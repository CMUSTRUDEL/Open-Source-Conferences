Title: OpenCue: Open Source Render Management
Publication date: 2020-08-24
Playlist: Open Source Days 2020
Description: 
	OpenCue: Open Source Render Management
Speakers: Eoin Bailey, Brian Cipriano, Benjamin Dines, Diego Tavares

For more information about the Academy Software Foundation go to: https://www.aswf.io/

The OpenCue Steering Committee gives a project update from the past year, an OpenCue user provides a real-world use case for using OpenCue in production, and we walk through an automated deployment of OpenCue in the cloud using Terraform.
Captions: 
	                              okay i think we can get started uh                               welcome                               uh i'm brian cipriano i'm the project                               chairperson of the uh                               open qtsc uh to our open source day                               presentation                               um so we have a few speakers today                               i'm going to be running through a quick                               project update um                                and then i'll hand off to some of the                                other folks we have                                we'll have a hopefully                                hopefully some time for q a at the at                                the ends so feel free to                                drop your q a questions uh in the uh                                in the q a box and uh we'll get to them                                afterwards uh we may                                run out of time so at the end we'll move                                to the open cue slack where we'll                                continue to                                be online for a while and get to get any                                any leftover questions there                                um cool so i'll get started                                um i'm just going to give a quick quick                                update on what opencue's been up to for                                the past                                year since our last uh last open source                                day session at sigraph last year                                um cool so some of the stuff we've we've                                come out with in the last year                                um we released uh                                so the original guide that we came out                                with when openq was first released was a                                bit complex pretty long                                you know we heard some some feedback                                that it was tough to kind of get get up                                and running quickly                                just to try open queue out first so we                                put together a                                a sandbox deployment that uses docker                                compose and                                runs on a single machine you know                                basically lets you get an open cue                                deployment up and running with a couple                                of commands                                um so we'll share uh we'll have our                                slides posted after this                                you can follow a link here it just goes                                to our website openq.io where there's                                some some getting started docs                                uh we also released a bunch of                                contributor guides um                                we've had a lot of kind of interesting                                new contributors and we used that                                that experience to put together guides                                for getting started within a development                                environment for                                all you know mac windows and linux we                                have separate guides for each of them                                the um the kind of biggest new feature                                that we've been working on                                is windows support i think at this time                                last year we had                                zero window support so since then we've                                moved through                                through an alpha phase and did a bunch                                of testing and now that's                                we're happy to announce that that's                                moved into a beta phase now                                um we have a few a few folks who are                                running it uh                                steadily in production and um uh                                seem to be quite happy with it so that's                                good to see                                uh we have we participated along with                                the rest of the aswf in                                uh google summer code this year uh                                and our uh summer codes student has been                                working on some uh                                some cloud support a cloud support                                plug-in for uh                                the q gui which i'll i'll show a bit of                                in                                a second we have uh                                recently completed our migrate migrating                                all of our ci environment to                                github actions to align with the rest of                                the aswf                                um so happy to see that wrapped up and                                then kind of the biggest                                uh i think the kind of biggest thing                                we've been working on is uh                                tons of kind of small improvements and                                bug fixes and stuff like that really                                worked on                                you know stability and uh performance                                and kind of                                finishing up all of the stuff that went                                on during the open source uh                                 open sourcing process uh before it was                                 released um                                 i would say that you know kind of the                                 big thing that we've we learned in the                                 last year was we spent a lot more time                                 on                                 on fixing minor stuff than and we didn't                                 get to some of the bigger ticket items                                 that we had hoped but                                 um i think it was all well worth it and                                 a good lesson learned um                                 so we just a couple days ago days ago                                 cut a new release                                 uh                                                                that contains that is basically                                 basically all the way up to date with                                 the master branch                                 of open cues so it has all the latest                                 bug fixes and                                 stuff like that i think the some of the                                 biggest stuff it contains is a                                 big batch of the fixes for windows so                                 big thanks to the folks from from                                 microsoft and from sbi who have done a                                 lot of the kind of heavy lifting on the                                 windows support                                 um so just a quick preview of the cloud                                 manager plugin                                 that is uh coming out soon                                 we're going to have some functionality                                 built into qgui for                                 uh creating groups of machines in the                                 cloud                                 this will be this has been designed in a                                 way where it'll work with                                 with really any cloud we're hoping to                                 release it with uh                                 gcp and azure and aws support um but it                                 will basically                                 allow you to you know create and scale                                 machine groups                                 it's all seamlessly integrated with open                                 cue um                                 and the existing rpd setup so it's                                 really nice to see this is a screenshot                                 of the                                 uh the ui as we have it now for creating                                 cloud groups                                 and then a shot of what it'll look like                                 when you have groups existing already                                 you can see that they're see what                                 they're doing and how many machines are                                 in there and                                 a little bit of other information about                                 them                                 um so actually a bit more on that so                                 summer code wraps up soon at the end of                                 this month                                 and hopefully the initial version of                                 this should get released uh                                 shortly after that but we'll see where                                 where things are at at the end of                                 the summer code period                                 uh some quick stats from the past year                                 uh we've seen                                 both the pool of contributors and                                 committers grow pretty significantly                                 you know we have                                                   contributed code                                 six people now in the uh in the                                 committers pool which is great to see                                 really nice growth there um merged about                                 three and a half pr's a week which is                                 about the same as we were at last year                                 so that's good kind of maintaining                                 velocity there except it's coming from a                                 much                                 more diverse pool of contributors which                                 which is good and much more                                 kind of maintainable and we're closing                                 about                                                                issues in the past                                 year which is gives you an idea of many                                 many kind of minor issues that we've                                 that we've closed up a few bits                                 uh pieces from uh that we're looking at                                 for the next year some of these will                                 look familiar since                                 as i mentioned we spent a lot more time                                 on the kind of minor stuff                                 recently we definitely want to keep                                 working on uh windows support and                                 getting that a lot uh                                 you know a lot more stable i think we're                                 still lacking in the docs                                 department there so we'd like to see our                                 documentation grow                                 especially around getting started guides                                 the kind of stuff we have                                 good support for on linux and uh already                                 so                                 um user management and permission system                                 that's that's been a kind of big ask and                                 a big                                 piece of work that's still high on our                                 list we'd like to see happen                                 uh packaging and installers you know                                 kind of                                 make it make it a lot easier to                                 install the opeq components especially                                 the client-side stuff                                 um it's i think we've made some progress                                 we have an rpms installer for cubot now                                 but the                                 the client-side stuff is still kind of                                 lacking still requires a lot of                                 creating virtual environments and                                 running python commands and                                 we'd like to see that get get a lot                                 smoother and integrated with some native                                 os tools                                 expanded cloud support we want to keep                                 building on the stuff that we're                                 building as part of summer                                 code we'd like to see that grow even                                 more                                 you know have to get things to work even                                 better in the cloud and in hybrid                                 environments                                 uh you know we want to keep growing the                                 contributor pool as well i think the                                 progress we made is good                                 and we've made some good we have some                                 pretty good procedures now for                                 you know trying to bring in new                                 contributors and promote existing                                 contributors to committers                                 we want to keep doing more of that and                                 uh                                 big thing on the aswf front we want to                                 get the                                 project to graduate to full status we                                 recently had our                                 uh incubation period standard for                                 another six months to the end of the                                 year                                 and we're looking to to wrap that up                                 soon and get                                 get the project to be a fully                                 established project                                 a few bits to get involved uh those will                                 all be linked in the in the slides after                                 openq dot io is uh you know has                                 all the documentation links to basically                                 all this other stuff                                 um so definitely start there link to our                                 github repo                                 uh the users and developers mailing                                 lists uh which we've seen some good                                 activity on and the uh                                 the slack channel uh you know we're                                 definitely around there                                 slap go to uh slack.aswf.io to                                 sign up and join slack um we're on the                                 open q                                 channel and uh yes it's also been linked                                 in the chat                                 um so yeah definitely uh check that out                                 and we'll we'll be around in the slack                                 after this session to answer any                                 questions you have in addition to the q                                 a that                                 we're doing as part of this session                                 so um next i will hand it off to                                 ben dynes with sony pictures imageworks                                 hey everyone my name is ben dines and i                                 work at                                 sony pictures image works at last year's                                 open source day i talked about the                                 history of q                                                         render management software that became                                 open queue                                 since last year we've begun the                                 transition from our old q                                                standard open cue build                                 and uh for our transition we've had two                                 major milestones so far                                 in january we kicked off our first show                                 entirely on openq                                 and then in may we migrated our entire                                 database backend for                                 for open queue from oracle to postgres                                 which                                 then opened the door for uh the open                                 source project to drop                                 oracle support completely which was a                                 blocking issue for a number of things                                 and uh so now that that's in progress i                                 you know i'd love to be able to tell you                                 some interesting stories about the                                 migration progress and all the profound                                 things we learned                                 but uh it actually went really really                                 smoothly                                 for what it's worth other than just                                 straightforward database migrations and                                 the usual stuff there were no major                                 caveats                                 or anything like that so hopefully that                                 would bode well for anyone else                                 attempting to do something similar                                 so in the meantime we had a lot of code                                 to pour over                                 uh to the new tool set and api uh there                                 are really two parts to this                                 the command line and the gui tools                                 uh the built-in ones and our own                                 internal queue management tools                                 getting the built-in tools up and                                 running was a close collaboration                                 between our own internal dev team                                 and the open source team and porting our                                 internal queue management tools involved                                 converting                                 over                                                                     varying quality                                 uh and so it was a task that we                                 distributed across                                 our dev team and our render management                                 teams                                 and uh just to quickly go over the                                 transition to postgres it was                                 uh it was actually a big deal for us                                 after so many years of relying on oracle                                 so heavily and their support contracts                                 uh                                 but uh in preparation for the switch we                                 needed to make sure                                 we had worked out uh whatever support                                 contracts we needed                                 for postgres and uh had a solid backup                                 and restore strategy                                 and had performance and health                                 monitoring tools in place                                 and as i just mentioned we rely on a                                 number of custom-built tools for                                 interacting with opencue                                 most of these were actually built under                                 q                                  but luckily porting them was just a                                 matter of updating api calls                                 and while these are all tools that are                                 internal to image works they should                                 illustrate                                 how much is possible with the built-in                                 frameworks whether it comes to                                 building pipelines or just retrieving                                 useful information                                 about rendering progress in a way that's                                 easy to scale and support a render farm                                 on the order of hundreds of thousands of                                 processors                                 in open queue job submission is done via                                 outline files which describe the job in                                 full detail                                 including the tasks to be performed the                                 arrangement into layers                                 and any necessary dependencies to                                 dictate execution order                                 these outline files can be composed in                                 either xml or yaml                                 of course neither of these two formats                                 lends itself to the amount of data entry                                 necessary                                 for a large rendering pipeline but                                 fortunately                                 there is openq includes the framework pi                                 outline                                 which wraps around those built-in                                 outline specifications                                 allowing rendering jobs to be created                                 programmatically                                 in fact it's it's actually very rare for                                 a user to need to manipulate those                                 outline files directly                                 describing and composing render jobs                                 programmatically then also opens the                                 door to significant automation                                 especially when it comes to integrating                                 with existing pipelines                                 at imageworks we've leveraged this                                 advantage into                                 custom uis actually for most of our                                 dcc's                                 here's an example from nuke                                 and because we were oh                                 and uh to oh and to elaborate a little                                 bit more here's houdini uh this is a                                 standard node graph it should look                                 pretty familiar                                 and uh because we're able to integrate                                 job                                 submission uh so easily with houdini uh                                 something like this where you have                                 elaborate node graphs                                 uh those can be easily translated into                                 uh cue jobs                                 uh for instance in this case each node                                 that you're seeing                                 in the node graph becomes a separate                                 layer                                 and and then the flow between the nodes                                 is translated into layer dependencies                                 in the cue job itself                                 besides pi outline another area where                                 we've been able to use the                                 the python api to our advantage is in                                 queue monitoring tools                                 these are crucial for ensuring render                                 farm efficiency                                 tracking progress and spotting problems                                 the apis provide real-time information                                 pulled directly from the backend                                 database                                 the apis for high-level job info                                 are also very lightweight which means                                 thousands of jobs can actually be                                 queried in a matter of seconds                                 this also makes extracting data insights                                 from open cue                                 very easy we have a number of relatively                                 simple scripts                                 and other automations that record the                                 goings-on                                 of queue at all times                                 here's an example of one of the                                 web-based monitoring tools that we built                                 for q                                  it will display all the cue jobs for a                                 given substring match                                 and then gives you vital stats about                                 each one                                 another extremely useful way of tracking                                 q data is with time series reporting                                 for example we have several tools built                                 around                                 rrd and grafana                                 here's a grafana page report showing                                 show level frame stats and course stats                                 and here's one reporting department                                 level frame in course stats                                 and for us at imageworks data insights                                 like this                                 are absolutely critical for projecting                                 future render farm needs                                 especially in the long term since they                                 can be correlated with                                 past current and future production                                 workload                                 and uh finally here's some rrd                                 examples that we built originally for q                                  and those are reporting cluster level                                 stats for monitoring the overall health                                 of the system                                 uh which is obviously very important as                                 the whole thing                                 scales up uh and moves into the cloud                                 and uh now i will hand off to diego                                 about                                 some of the development efforts we've                                 been doing at imageworks                                 hi everyone i'm diego i work at                                 imageworks with man                                 and let's get control                                 and as been mentioned we were running                                 open queue                                 on oracle before as oracle was the                                 database we were used to                                 and the q                                                             used to run an oracle but it was part of                                 our plan to migrate to postgres                                 and before pushing the change to                                 prediction                                 we really wanted to be sure that                                 the plus response resolution with open                                 queue will handle the load that we used                                 to handle                                 on oracle before and for that we decided                                 to go with                                 a stress test just to assess the booking                                 capacity                                 running the solution of postgres and                                 just to go                                 to have an idea of the hardware that                                 we're running on                                 for the server side that you bought we                                 were running on previums                                 with                                                              those vms will be on under a load                                 balancer so they will be getting all the                                 load distributed                                 and for the hosts the rendered form you                                 are running around                                                                                      those who are running on bare metal                                 machines and for the database we have                                 two new bare metal machines with                                    cores each                                 and                                                                   running on a monster standby mode so                                 only one of the                                 hosts would be getting the the hits the                                 other one would just come up                                 if the the master one fails                                 and to give an idea of the kind of jobs                                 we were running we were running                                 one to two minute jobs and they were                                 just simulation jobs                                 and the the way the tasks would work you                                 will start to book a queue slowly                                 and ramp up up to a point where i will                                 try to book                                 as many jobs as it will be possible                                 and on the biggest task we ran we had                                                                                                                                                                   and if you remember on the last slide                                 this is the amount of hosts we have so                                 we were able to fully book the whole                                 queue                                 uh running jobs on this test and with                                 the                                 this big test we were only using                                                                                                     big times and                                                         database                                 and for the tasks we what we ran a set                                 of tests                                 ranging from five jobs on a test                                 up to                                                                that is that we'll be able to                                 to have a curve on how the system will                                 behave                                 overload so we can see how the system is                                 behaving                                 under low load and under heavy load                                 and as we can see it's free linear which                                 is a good thing                                 and this means that open q didn't get in                                 the way so                                 it will handle distributing the jobs as                                 fast as it's possible to distribute                                 and                                 one good news that we had as brian                                 mentioned we are finally on beginner                                 stage or                                 open key on windows and                                 we are clearly on image works running                                 windows                                 hosts one open q and production                                 and what this means that we are able to                                 have one single server                                 that is running on linux managing jobs                                 that run on windows or on linux                                 so we can have unreal running on windows                                 and at the same time have new to running                                 on linux                                 for the same show and having the server                                 distributing the jobs based on the                                 os that the job is tagged to run on                                 and as we are talking about windows now                                 i'll pass the word to                                 aoi from microsoft                                 thanks diego yeah so my name is                                 owen bailey i work at microsoft let me                                 just uh                                 take my control                                 okay and i'm on the                                 azure storage media and edge team                                 and i'm gonna talk about uh deploying                                 open queue on azure this is gonna be a                                 little bit of a                                 call back to two things that brian                                 mentioned actually so how can you make                                 it easier                                 to deploy an environment and also                                 make use of the client                                 and very briefly i'm just going to                                 mention                                 one thing about this so in the last week                                 we have released                                 opensource.microsoft.com it's our new                                 central hub central location for the                                 thousands of open source projects that                                 we                                 both are releasing ourselves and support                                 and it just is a great place to go and                                 see information about                                 the philosophy of open source at                                 microsoft which may be different to                                 or you may have heard in the past                                 okay so the the number one location                                 uh that we're going to go for this demo                                 is aka dot ms                                 forward slash open cue that's a github                                 repository                                 there's dozens of different examples in                                 there that are all media focused                                 but that link is going to bring you                                 straight to the open cue specific                                 examples so let me                                 just go straight over there now that's                                 probably the easiest                                 and we'll reconnect that                                 okay so in here                                 let me go back we have                                 two different open cue examples                                 one is if you already have your data                                 stored into in an azure                                 blob account which is very useful if you                                 don't want to be downloading large range                                 of assets over and over again                                 but we're going to start on this new                                 storage one so this is                                 where you have no environment setup in                                 azure at all                                 no data at all and we have a                                 you know high level overview of the                                 architecture for what we're going to                                 deploy now and how we're going to go                                 about deploying this                                 so we're going to end up with a network                                 a virtual network                                 with multiple subnets uh one for our                                 openq server                                 that will only have access to uh two                                 ports so there'll be ssh and one for a                                 vnc connection                                 we're gonna have our render nodes um and                                 our                                 caching cluster which will be connected                                 to our azure blob storage                                 so azure blob storage is you know it's                                 it's low cost it's durable                                 but it's not going to give you the                                 performance you need to be feeding                                 data to hundreds of different node                                 instances so that's why we have a cache                                 as well                                 so here are the deployment instructions                                 we're going to use the azure cloud shell                                 so let me just                                 split these ice oh no that's not what i                                 want to do                                 there we go                                 ah dear                                 go on                                 okay                                 okay so                                 the readme contains all the steps that                                 we're going to go through now                                 so the azure cloud shell is a bash and                                 powershell environment if you choose                                 uh it has your azure cli already built                                 in it has terraform and a couple of                                 other tools we're going to use                                 um second step make sure you're in the                                 right subscription and azure i already                                 know i am in my account here                                 uh accept the terms and conditions for                                 the fxt                                 so the fxd is the the caching device                                 that we're going to use                                 make sure you have the terraform                                 provider                                 installed into your client shell                                 again i already have that here                                 so we can see it's in terraform here                                 that is the provider for the avira vfxt                                 and hpc cache so that's open source                                 again it's part of the same repository                                 so now let's                                 clone this repository                                 and once that is done we'll set up the                                 sparse checkout just to make sure we                                 only have the files that we                                 are interested in right now                                 okay                                 okay so now let's take a look at that                                 terraform file we can open it up in the                                 code editor                                 directly in the cloud shell                                 let's make it a little bit bigger for a                                 minus uh                                 i'm not going to go into the details of                                 everything that's in this terraform                                 script                                 but for now there's really just a few                                 things that we need to assess                                 to make sure that we can deploy this so                                 we need to get                                 my ssh key                                 we're going to deploy                                 let's say let's say we deploy                                          of                                               so we'll get over a thousand cores and                                 that's it everything else we can leave                                 as the                                 defaults so we'll initialize                                 our terraform environment                                 this is going to download any modules                                 that are referenced in here                                 it's going to make sure that the hpc                                 cache provider                                 is accessible                                 and uh                                 oh                                 that's always fun isn't this                                 well luckily i have a backup plan                                 so we can                                 go over here                                 so it looks like i may run out of space                                 in my                                 environment um                                 so this one's already initialized um                                 so it's already initialized the                                 terraform                                 uh modules and scripts or                                 very end and the provider is already                                 there                                 and then it's a matter of terraform                                 apply auto approve                                 and that's going to make sure that                                 everything is deployed as it should be                                 because i've already deployed this one                                 because we're not going to wait                                    minutes it's saying                                 yes everything is the way it should be                                 so we will take a look at what's being                                 deployed in a minute                                 but i really want to talk about what is                                 going on in that terraform script                                 so                                 the terraform script itself is as i said                                 is deploying your network it's deploying                                 storage accounts it's deploying the                                 cache                                 most of these are either modules or                                 using the provider and then the                                 open cue is                                 the the cubot here it's simply a vm                                 where we use cloudiness to                                 set up all the various                                 various installs that we need so i want                                 to take a look in there as well                                 let's make it a little bit bigger um i'd                                 love to get                                 any feedback on how to make this better                                 as well so for example                                 at low hanging fruit at the moment this                                 is all installed on one machine                                 for for open queue so like the database                                 exists on the same                                 uh the same machine uh you know next                                 steps is definitely to split that eight                                 into its own                                 uh platform service so that it it can be                                 more performant                                 uh one other thing that's sort of                                 interesting and here i mean most of                                 these steps are the the standard steps                                 from the documentation for how you                                 install                                 uh it's called cubos and soul cue gui                                 excuse miss                                 pi outline um but it's maintaining the                                 cache                                 so all of the uh the nodes both the qbos                                 vm and the render nodes are going to                                 mount                                 one of the vms from the caching cluster                                 and so we'll pop over here so we use two                                 different techniques                                 in this demo so one is cloudiness to set                                 up the eq boss                                 and then this is using a shell script                                 instead that is                                 it's actually downloaded and stored in                                 the cache so that all of the render                                 nodes as they come up can can pull down                                 the script and deploy it as needed                                 so we make sure that we have the cache                                 maintenance                                 and then this is these are the steps                                 that are more interesting and more                                 specific to this demonstration so                                 we install pbrt install the requirements                                 for that                                 and the reason that we use pbrt here is                                 because we're using the                                 disney moana islands scene and there are                                 um frames ready to render with pbrt                                 uh there's samples here for if that was                                 already in your cache                                 so using the pre-existing storage i have                                 a pre-built version of pbrt                                 and yum if you're using using                                 yum-based installs and then the same is                                 true down here for setting up our qd                                 and making sure that it connects back to                                 the                                 cubot which we'll go take a quick look                                 at now                                 so this is uh windows terminal by the                                 way which if you haven't seen                                 is i i think is great i've got my ubuntu                                 powershell command prompt and i can add                                 azure cloud shell and other                                 linux distributions through windows                                 subsystem for linux                                            kind of great so let me                                 set up an ssh tunnel                                 i'm going to connect                                 to the machine                                 okay                                 and let me just make that a little bit                                 larger                                 okay so here we have                                 the different nodes that i started up                                 earlier                                 i started one job earlier already this                                 is                                 one of the                                           so i just started one but we can start                                 another                                 so we'll                                 just submit another job obviously it's                                 just going to appear here be picked up                                 by one of the                                 waiting nodes                                 i have the completed frames just for                                 convenience                                 obviously all the logs are available                                 and here we have the                                          it's not going to look amazing obviously                                 on a remote connection and then streamed                                 as well                                 we have several other frames available                                 from that same                                 moana island scene collection                                 so any any questions please feel free to                                 share the mouse put them in the q a                                 put them in the slack channel and that                                 is                                 open cue running on azure scale this up                                 as large as you want                                 thank you very much                                 awesome thank you that looks great                                 uh so cool so we can move to q                                 a now uh yeah as owen said drop in the q                                 a window                                 and get to them or yeah feel free to                                 also visit our slack at any                                 time you know we're always always there                                 and uh happy to get to get to your                                 questions then                                 um so yeah so we've got a few                                 questions in the uh the q a right now um                                 so let's start with this first one uh                                 are there any planned integrations                                 between                                 open queue and any bi or data analytics                                 toolsets visualization tools                                 um yeah so i think greg actually i think                                 you were maybe                                 the most recent person to be taking a                                 look at some of this i will say that                                 there's no                                 there's uh nothing like that is i think                                 super high priority on the                                 like the project quad road map right now                                 though we have definitely                                 kicked around some some ideas about the                                 best uh                                 best tools that we can integrate with uh                                 in the future                                 yeah exactly i think um one of the keys                                 here                                 is i don't we don't necessarily have any                                 specific integrations planned                                 but um i what we want to really do is                                 expose the hooks                                 so that way you can create any                                 integration you want                                 to your analytics platform and really                                 make it flexible                                 so that way some of the the queueing                                 decisions things like that uh                                 some of the resource information that's                                 flowing into                                 openq right now and                                 the same type of information that ben                                 was showing scraping                                 uh from the open cue db                                 and uh piping into grafana and                                 uh their analytics platform just making                                 that easier to really access and get at                                 um so that that's really the work                                 that we have planned i would say yeah                                 and definitely once we like when that                                 does develop                                 uh the ideas i think that we would uh                                 you know                                 because we're shipping uh like docker                                 images of all the main                                 components we would be able to basically                                 release a version of the docker image                                 that has like an example deployment here                                 so                                 you know probably something like grafana                                 uh just that's set up to run alongside                                 cubot or the database and                                 uh you know give give folks something                                 that they can build on from that                                 um okay so                                 let's see the next question is kind of                                 related                                 uh will any of the tools internal to                                 image works make it into the open cue                                 package                                 um yeah i mean i will say in general                                 that we've                                 we've seen a bunch of uh stuff make its                                 way back into the                                 um the main open cube branch already and                                 this has been mostly                                 things like uh you know the window                                 support and bug fixes and and stuff like                                 that                                 um i'm not sure if                                 uh if band or diego you have anything                                 specific you'd like to mention there                                 yeah okay                                 but yeah we're definitely always we're                                 we're uh you know constantly kind of                                 talking to image works to see what we                                 can do to                                 kind of uh if they come up with any cool                                 stuff fold it back into the                                 main branch and on our side everything                                 that                                 it's generic enough that we can share                                 we'll definitely post to the open source                                 version                                 uh okay we've got let's see                                 question uh it might be obvious to read                                 the docs but how are licenses for                                 applications and renderers solved right                                 so uh so right now openq                                 does not really do anything around uh                                 licensing or                                 around kind of managing the                                 configuration of the render nodes uh                                 it does rely or i guess the other big                                 thing to mention there is the uh                                 the file server like asset storage as                                 well i think owen                                 showed a way where you can uh use like                                 uh of your vfxds to                                 provide that but it is definitely a                                 thing that users have to provide                                 on their own right now                                 so the question is uh does sony feel                                 they've reached parity with q                                  on the show uh done on open cue so i'll                                 answer that uh                                 yeah in fact uh open queue i would say                                 is already                                 you know well beyond where q                                         reason                                 for our slow adoption of it has nothing                                 to do with feature parity and everything                                 to do with                                 that database migration that i talked                                 about                                 that was kind of the biggest thing just                                 because                                 the the scale that we're using a                                 database like that um                                 really demands um solid support                                 contracts and                                 uh given that we're used to dealing                                 directly with a company like oracle we                                 had to                                 reevaluate how we were gonna you know                                 have                                 you know uh service license agreements                                 and all that stuff                                 um and uh and also just making sure that                                 uh                                  that we could put everything kind of                                  through its paces                                  uh we didn't wanna go and start the                                  whole thing off just                                  you know dumping you know                                                on it all at once so                                  that's why we started off a little you                                  know a little bit at a time                                  cool next question is um                                  there's all right could you talk a bit                                  about multi-platform support                                  uh how linux windows would play together                                  from a user's perspective                                  yeah so um so right now the                                  uh open cue is fairly agnostic when it                                  comes to the                                  uh the render hosts it it doesn't uh                                  okay                                  doesn't isn't very opinionated about you                                  know what what os it's running or where                                  it's running whether it's on-prem or in                                  the cloud                                  pretty much if you're able to get rqd                                  running it's able to do that                                  communication                                  um so in in that sense things play well                                  together the the big caveat to that                                  right now                                  is that there is there isn't really a                                  concept of                                  like drive mapping in open queue so you                                  know                                  when you're when you're building a job                                  submission and submitting your job                                  you're basically specifying either                                  windows or                                  linux paths and those are kind of making                                  their way back to the                                  rqd instance so kind of                                  the jobs need to pick one platform um                                  for now                                  but um i think that's the that's the                                  main caveat i think we do                                  we have it kicking around ideas for uh                                  for how to fix that i mean obviously the                                  the concept of drive mapping is pretty                                  well established concepts uh within the                                  industry and other tools so                                  we're not really shredding any new                                  ground there but uh it's definitely                                  you know when when i we talk about how                                  we want to build out window support more                                  in the next uh over the next year i                                  think that's definitely a big thing that                                  that                                  we'll want to cover the ability to to                                  kind of                                  send jobs to a mixed platform                                  it looks like greg's got the next one                                  yeah the next question was is there any                                  plans to break out the database and                                  other components into a more                                  pay as you go or serverless type setup                                  like brian was talking about                                  openq you know we really want to                                  maintain                                  that open nature with it and allow it to                                  run anywhere so it can be hybrid it can                                  be                                  run on any cladding wherever                                  you can run it it should run                                  and so uh to answer the question there                                  you can certainly break out the database                                  and run it on any of the cloud providers                                  uh kind of uh serverless database                                  options                                  or managed database options if you want                                  but                                  if you have an on-prem machine that you                                  want to run                                  on as well you can certainly run the                                  same code there                                  we don't want to kind of push in any                                  specific direction what what your                                  infrastructure requirements are                                  and really want to adapt to you know as                                  many environments as we can                                  brian anything to add there                                  um no i think i think that covers it                                  well yeah                                  um okay let's see next question                                  is uh can we view images in kugui not                                  using katana                                  right yeah so we uh um                                  so right now that the some of the image                                  viewing code is built uh just used like                                  a local                                  uh katana web uh like web instance                                  um i would say that's probably still a                                  kind of imageworks specific bit that's                                  in there                                  but yeah we definitely have a we have an                                  issue logged for uh                                  for taking care of that                                  and then following up on the license                                  management features                                  we do have a limiting                                  functionality that is part of openq                                  something we added                                  in them about a year ago and                                  it allows you to just specify arbitrary                                  limits                                  [Music]                                  refuses those licenses you just specify                                  that limit and it'll make sure that you                                  don't consume                                  more licenses than you have set up the                                  one                                  problem there is i it's not dynamic                                  it's not looking at your your license                                  count from the license server directly                                  it's kind of a static fixed number that                                  you're going against                                  yeah as i saw that question it did occur                                  to me that the license limits is                                  one of the big things that we added                                  since since last year                                  i didn't cover that on my slide but yes                                  definitely check that out                                  um let's see shin uh do we know                                  of any other studios beside sbi that                                  have adopted open q as their primary                                  scheduler                                  um no one that i can uh                                  mention right now i i i guess i'll                                  answer it in a more general way and say                                  that uh                                  you know kind of collecting uh                                  metrics on opeq usage is uh definitely                                  something we've we've talked a lot about                                  doing and                                  are and are working on as a very high                                  priority uh                                  so look out for um uh                                  what should be a user survey uh coming                                  pretty soon um                                  and we should be able to get some uh you                                  know be able to publish some                                  some more detailed metrics at the end of                                  it that survey                                  um okay let's see uh where can i find                                  information on wrangling how to alter                                  the priorities of jobs in the queue                                  limiting a job or layer from picking up                                  additional nodes                                  um yeah i think that documentation is is                                  definitely an area where we could still                                  use                                  a lot of work particularly user guides                                  around the gui and some of that other                                  functionality                                  um it's it's not not covered very well                                  right now or at all i think we have a                                  lot of guides on                                  getting deployments set up and getting                                  development environments set up but                                  uh the actual use is uh                                  documentation's kind of lacking right                                  now um so yeah i can definitely uh                                  we should be making more progress on                                  that soon hopefully                                  okay is there support for a hybrid                                  on-prem and cloud burst model                                  or would that be something you'd have to                                  manage separate open cube                                  deployments to manage um no so there's                                  definitely                                  it is uh supported right now um                                  i think it's right now openq is uh you                                  know like i said very agnostic about                                  uh where those nodes are running as long                                  as                                  um you know it's able to the the cubot                                  is able to                                  communicate with all the rpg instances                                  uh it                                  will be able to distribute jobs to those                                  uh of course there's                                  there are some caveats there about                                  setting up your cloud machines for                                  licensing and uh file management and all                                  that and making sure your assets                                  are available to those render nodes so                                  that is definitely a                                  consideration you have to make but um                                  there's nothing in opeq that would                                  prevent you from from doing that in a                                  single deployment as well                                  and there are there are a few different                                  ways that folks are managing that i mean                                  some folks are doing                                  a kind of uh just like a multiple                                  facility                                  deployment where they're using they're                                  keeping cloud and on-prem completely                                  separate                                  um and kind of you know uh setting the                                  the show uh you know resource limits to                                  you know kind of approve shows to go to                                  the cloud um                                  but there are also uh uh you know single                                  facility deployments as well that just                                  have                                  different instance groups running in                                  different places um                                  so uh and that will all                                  become uh hopefully easier as we build                                  out more of this cloud functionality uh                                  with                                  the summer of code work that's going on                                  we'll kind of lay a good base layer and                                  then                                  we'll build on that from there to uh                                  make it easier to manage those                                  deployments directly from open cue so                                  you don't have to                                  bounce back and forth between uh cue gui                                  and other tools                                  quite so often but um yeah it's                                  definitely but we've definitely kept in                                  mind that                                  you know folks have uh pretty complex                                  existing cloud deployments already so                                  we're                                  trying to make sure as we develop the                                  cloud tools that we're not interfering                                  with that in any way                                  so yeah we don't want you to require we                                  don't want to require anyone to you know                                  use our gui to create cloud groups or                                  anything like that                                  let's see any of the presenters more                                  familiar with uh                                  houdini pdg than i am                                  not super familiar with it personally i                                  know this has been                                  a thing that has been uh that has come                                  up                                  a few times before so i i think it's                                  certainly something we need to                                  look into is how to better integrate pdg                                  um as                                  a kind of scheduling extension for                                  houdini so yeah if there's anyone                                  with specific houdini experiences that                                  you know is interested in contributing                                  yeah we'd love to                                  to have help in that area i think yeah                                  definitely                                  okay looks like uh that's all we've got                                  for q                                  a in the chat                                  yes as it says in the chat um                                  if you uh if you have any any follow-up                                  questions definitely join us on the uh                                  aswf slack                                  on the open q channel um you know just                                  uh either either for this session                                  or uh you know in general                                  we're happy to answer questions there or                                  on the mailing list or                                  yeah hope to see you there
YouTube URL: https://www.youtube.com/watch?v=fnbRcTeKirw


