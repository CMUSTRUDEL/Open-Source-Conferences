Title: Pacific Northwest Scala 2013 Spire by Example by Tom Switzer
Publication date: 2020-01-27
Playlist: Pacific Northwest Scala 2013
Description: 
	Help us caption & translate this video!

http://amara.org/v/FG6q/
Captions: 
	                              do the impossible project at me and                               Erica stopping today started a cult                               spire you talking two million votes                               where it's supposed to be about con                               solving and they still call optimization                               promenade that was kind of fun and doing                               so kind of using spire throughout just                               see some little features it offers maybe                               hopefully get people into it to see                                what's there so anyways main thing is                                that i work at which relevance as a                                company it does product percent our                                product recommendations for our online                                retailers like                                                       some lovely stuff there recommended to                                you so we do that and one of the things                                I found interesting here is you know                                some of our various precise ation depend                                on a set of weights and sometimes these                                we could just kind of chosen heuristic                                elite based on what people think would                                be good in weather questions you know                                with kuya optimizing the way to go I                                should depend on an even game and why I                                was interesting is that you know for the                                real tools we have in terms of like                                interpreting optimization is that we                                basically actually have to consider we                                can split the traffic with somebody hits                                a site and one person get one side wait                                another person can know some weights and                                we wait long enough it will get some                                metrics out like the revenue per session                                personally else interesting like that                                and um why it's interesting is because                                it actually does take a certain li nan                                significant amount of time to actually                                calculate these metrics and like and                                sometimes being that you know our actual                                iteration sort of time to to optimize                                things is quite slow so anyways this                                doctor who is going to go over a                                gradient descent so it's a relational                                way to to optimize things and it's ideal                                to stop                                it's in                                                                 know it basically here you're at some                                point in a curve and you want to get to                                the minimum of it you don't know where                                the big move is we usually want to get                                there so it is that you basically find a                                gradient at the point where you're at                                and you travel in the opposite direction                                and if you take a small enough step in                                that direction you know you're gonna get                                a little bit closer towards the net oh                                it's Goldman so basically you can see it                                take this little step i keep this                                addition you'll stop moving you've                                reached in the car appreciate for it um                                anyway its requirements of principle                                fish beneath initial sort of a place                                we're starting for us or wait turns on                                TV turistic we do set up we need to step                                besides we can get very fancy when                                choosing this we're just going to fix                                foot stock but the important thing is                                you need to be loved calculate degree                                you're the greatest week happens very                                simple iteration of can see here so we                                have our initial weight that we're                                starting with or basically just                                subtracting from the waivers moving in                                the opposite direction opinion there is                                multiplied scaling up by some snap sides                                and we get a new way and that's                                basically here so a lot of this is a top                                products kala so I'll put this in a                                language gether sandwiches scholar as                                you can see here basically can be able                                two days little type aliases to help us                                out RV is the vector type which is just                                an array of doubles and our type a is                                just W and basically what we left the                                gradient implementation plan unspecified                                you can just kind of ignore the i                                pronounced see what we're using it later                                but really we just want to give                                we need and then get out of the way p                                which is a good and just encoded that                                little iteration formula directly and                                you see here though is is a little bit                                of spire coming to us so we have this                                little like operator this star cold so                                this is squares scholar ball tomorrow so                                the greedy returns a vector and we're                                just multiplying it by the scale of the                                vector to get any value we also have a                                subtraction here and we're subtracting                                 two vectors that's sort of some type of                                 your numbers are talking two vectors so                                 you just makes the operators were                                 operating on a raid that's the question                                 is why isn't work unlike again just too                                 much but basically the double is a field                                 over with the name or a doubles vector                                 space and you can basically it means                                 that we can add in subtract vectors and                                 we can multiply by the scare factor                                 which is a quick detour and go over the                                 actual stuff that will we talk about                                 this you don't really need to know too                                 much about this just kind of pay                                 attention the next little operator here                                 the main thing is basically for a feel                                 to just feel just means that we have                                 some type that's going to behave more or                                 less likely pick a number on your                                 elementary school so you know we get out                                 and it can subtract multiply and divide                                 the vision of that exact like integer                                 division did not expect do not behave                                 like an inflexible challenge I expected                                 to behave with us and hope I guess                                 anyways there's in the important thing                                 is there's instances for always                                 observing hear anything our number would                                 take classes alright fantastic oh so                                 anyways yeah all these things inspiring                                 so here's a quick little example we have                                 so we have the first important airspace                                 provides all need                                 fact we see so many time already seen                                 here comes one slide short but basically                                 you can see me absolutely no magic here                                 we have the the implicit parameter for                                 field for a and once you have that it                                 means that we can we can sell a month we                                 can apply to buy the silence for the                                 important thing here is like so the                                 field at zero is just shorthand for                                 perhaps I mean I just want to have weird                                 with that sorry you can see we just sell                                 them all up we divide it we get our me                                 and then the important thing here we can                                 runner the floats doubles rationals                                 doesn't like that this kind of the                                 benefit of using the spires provides an                                 abstraction over different types so what                                 is the vector space you've already seen                                 the vector space in in action you know                                 we subtract it seemed that cuz we                                 multiply and that's really just what we                                 want to do let's just work with a nice                                 little type like a ray of couples                                 instead of having a quote around most of                                 the enterprise space all this really                                 does for us today is it gives us the dot                                 product and all we're going to use up                                 for is to kind of get some notion of the                                 white private backer and then ordering                                 that orders just like scholars ordering                                 type class except it's specialized so                                 it's a little faster for primitives you                                 have a nice little example here of                                 sorting a bunch of numbers of an order                                 that's a little quick sort of thing here                                 and to put the sort IRS there because no                                 matter and listen to the detour blue you                                 skipper anyways so this example we have                                 our type aliases before the BNA the                                 question is do really actually Caribbean                                 Agence I mean you know here is there a                                 double but you know if they don't have                                 to be arranged that they just behave                                 like they expect them to behave then                                 then we just get rid of integrity so                                 just put them in the type parameters                                 there instead and instead I'll just say                                 that we require these things are you                                 know V is a vector space and                                             should hopefully good for us so yeah                                 this part is the optimization so                                 basically you know we don't actually                                 called necks weighed ourselves repeat                                 there's about this thing to do it to do                                 for us eventually stop and speech dr the                                 memo so to do this you will need be to                                 be an inner product space and so vector                                 space and really is a dot product                                 however second seed we have a little                                 implementation here that's pretty simple                                 lot of things are hard-coded because                                 fascinated anyways yeah so you can give                                 it basically the the step of learning                                 rate it's a fixed thing the goes                                 it was very straightforward we have our                                 WN you know four or just basically have                                 our hydration number we use that later                                 community to actually see how long                                 things take your money i basically just                                 do for one step and then all we do here                                 is we then check we converge and we just                                 do that by taking the delta the two                                 vectors musa dagh proctor gets the                                 notion of length out of this we just                                 check to see if it's creatively her pits                                 at westmin sometimes so some of our we                                 assume that's close enough to the                                 minimum so we stop for a little bit                                 least yeah he took the bottom here when                                 we actually do first off you just pass                                 in the zero vector so we're always just                                 starting from zero and i want to do it                                 but we're getting into this again it's                                 just adorable self how long the linear                                 least squares basically we just have a                                 bunch of points and want to fit a line                                 to the points the goal was really just                                 to minimize the sum of the squared                                 distances from points for these lovely                                 function                                 just uses the MX plus B sort of notation                                 for a wine we're just subtracting our                                 actual my position is wearing some of                                 the month over all the phones Scooby's                                 being sent into the sea animals I wonder                                 good the most important thing here is                                 rescheduled Calculon gradient that's a                                 to mention it's pretty straightforward                                 you know so our function is basically                                 rather this show before with that just                                 to sum of the squared distances so if we                                 just to go to summon we just deal with                                 one point at a time we made something                                 status MX plus B minus y squared and we                                 just take the derivative that because                                 parties to partial derivatives here it's                                 pretty straightforward and then we of                                 course the vehicle training we just                                 something about what overall our                                 practice of course I'm not very personal                                 udah to any conventions because it's                                 pretty straightforward to map that over                                 to them so basically you'll notice here                                 is that we've switched over to using the                                 dot product in Cyprus multiplication and                                 butter actual the derivatives are                                 actually very similar you know basically                                 just have the same thing at the end you                                 don't actually use a coordinator sees                                 one the important thing is the thing in                                 balloon here basically we just have                                 we're taking the dot product of our                                 coefficients which are beta and our                                 weight so the coke the coefficients come                                 from the point we subtract the y value                                 we get                                                                 scale it back to buy that and we get a                                 result anyway so inspire what we could                                 do here is basically just extend our                                 gradient descent thing which means that                                 we just packed into my brain so to do                                 that you can see that you know for our                                 pages our why a stash just corresponds                                 to our car payment or why they're for                                 each of points so we just sip them                                 together and we just got our little                                 formula to the thing                                 looks very much and does it's a formula                                 so it's kind of nice and then we                                 basically just sum them up and we divide                                 them by the size and the divided by the                                 side just going to mix it easier to                                 choose the size we don't work with                                 depending on how many points we have no                                 I've testing it out so now we just                                 actually want to run this and see how it                                 works on set of points so this isn't too                                 too important to the notice but I want                                 to wait here but here is a mystic as far                                 as a random packing butcher Eric created                                 which is really nice and the most                                 important thing here is this disk class                                 and basically means is that to give a                                 disavow ragebaby means you get like                                 distribution of her a raise of tech egg                                 we can sample from this distribution to                                 get a bunch out and so it's kind of like                                 a noose College hack it's kind of like                                 Scala check to Jack it's more focused                                 towards kind of like we might want to do                                 i guess and inspire anyways this video                                 we just are actual linear here okay                                 should we just generate a bunch of                                 points all on the line and just preserve                                 them on the y you know by something                                 gaudium so all right plus or minus so so                                 kind of its nice camp which one minute                                 then basically just use our least                                 squares and potentially to optimize it                                 go so the greatest end loop that hook we                                 stops some basic I just ran into some                                 points you can see here the line looks                                 pretty good doesn't quite match and we                                 originally give it but it looks like                                 it's still a good Finn anyway so like                                 original problem which was optimizing                                 way to something like a personalization                                 product and can we use creating descent                                 so the one requirement we need is a                                 gradient which we easily got from the                                 linearly squared that's not so easy when                                 we're talking about my frontier                                 procession because the                                 basically people clicking on products                                 and our side should happen to wait three                                 you know we don't know it that basically                                 stops problem but it's probably                                 concerned we can sum up by approximating                                 the gradient so you know when we have                                 like a sample points around that point                                 you can fit a polynomial or we going to                                 spin a hyperplane because we've already                                 invented that with the video these                                 squares that's nice so yeah let's just                                 sorry so what we can just do is use                                 exactly we just made a full sample the                                 points will run it through our are these                                 squares greens that optimizer and get a                                 bunch of much coefficients out I don't                                 give us approximation to create okay so                                 this is our version of the gradient                                 descent that uses the sampling actually                                 create a great so right now you can kind                                 of ignore the time span but basically                                 what it is is given iteration it'll give                                 you a range of time now we have to run                                 that for from like you know day I need                                 to get across monitor and basically the                                 most important thing for this is that we                                 build sample simple example so this is                                 using spires raynham package again you                                 can see here that all these methods are                                 from dist so we have a way of so like in                                 this case or uniform is basically going                                 to give us uniform distribution of a s                                 that's distributed between negative D in                                 power and then we're just going to                                 create an array of those there is going                                 to be same length as our vector and then                                 the constants just basically                                 distribution it always returns exact                                 size value over and over and over again                                 once had a cool yellow is that                                 distribution will take on the same                                 structure as the type of distribution up                                 so you're the distribution of a raise of                                 these and                                 vector space so is a distribution for me                                 so we can just add them together so you                                 take your content add some noise and                                 sample that to get our are similar to                                 the gradient you can see here we just                                 basically do a sample that we use are                                 these squares with imitation we just                                 made and we basically just take the                                 values average little bit span of time                                 for each sample and optimize on that put                                 the actual grating we don't need the                                 last intercept it could be irrelevant                                 somebody's drop it yeah soon as what's                                 the time span thing so this is the part                                 that was kind of interesting is just                                 that you know like people kind of people                                 shop differently on beacons of the new                                 drunk during the weekdays and so because                                 of that the function is actually not                                 seeing depending on your sample on                                 Monday or Tuesday or saturday or sunday                                 and select connect to throw a wrench in                                 the works because we assume something                                 like like a period of a week to this                                 function then in order to be accurate we                                 want a sample over week though because a                                 long time to sample over for one                                 iteration someone gradient descent you                                 know it's just not really a viable thing                                 today we basically make time an                                 explosive parameter so that we can sort                                 controllers intestines you can see how                                 it affects it was yeah so yeah the                                 important thing here is that we                                 basically need to evaluate if I some                                 sort of weights but the problem is that                                 you don't need to wait actual finite                                 amount of time with hours of days or                                 weeks to actually get the value of the                                 surrounding procession for seven weeks                                 and so we want to be able to optimize X                                 well I'll still being accurate you know                                 keep it too short then it's going to                                 very long be actually doing over the                                 whole week it'll be accurate but that's                                 cool so let's let's check the set so as                                 I said our main options that will just                                 assume that the purity of areas are                                 growing and so we kind of think of some                                 strategies the deal with this will fix                                 our X to like just one day wall needs to                                 sample for one                                 use as RF or we can sample for seven                                 days another way is we can just ramped                                 up from one day to seven days over the                                 course of time so you know I                                 mechanically can iterate a little bit                                 faster at the beginning but get where I                                 go la suppose kind of similar except we                                 just skipped                                                             the seventh after suffix for your time                                 so the first strategy is pretty                                 straightforward I could go ropa                                 basically just literally wait though                                 many days strategy to as we ramp up so                                 here's a little bit more spire so                                 basically we are using start at math                                 nothing spur has a lot of functions                                 inside of a spire time at that kind of                                 copy the Scala versions the big                                 differences is that their specialized by                                 large and they also include a lot of                                 things like bigdecimal and whatnot which                                 scalds business anyway so yeah this will                                 ramp up over a certain number so you                                 have a number of iterations that we have                                 we have a number of iterations we have                                 some map so you basically wait like                                     durations and then go find a little                                 heavy donations go up I appreciate board                                 that's right you three bases we just                                 wait like you know                                                       from utopia centers starting from one                                 anyway so yeah so now we want to                                 actually generate the data so this isn't                                 really that important i really just want                                 to show you guys is spires q sorted by                                 and the q search here so smart adds a                                 bunch of methods on to things like a                                 raisin sequences in particular that's                                 sorting everything with this news                                 fantastic and it's fast as Eric um                                 searching is like in a binary search                                 everybody hates implementing binary                                 search so do it justice fires we also                                 have you know linear time selection                                 which is something gets us out a lot and                                 most of us plus has a very beautiful                                 language                                 cyber standard library yeah anyways the                                 we basically just implement this little                                 function l you periodically important                                 thing is here you know kind of our                                 weekends or bags over the high or the                                 shifted and then give our weekdays that                                 are a little bit different and so the                                 minimum over week is                                               really we're trying to hit so this is                                 basically two mentions in here we're                                 just focusing on think about our for                                 once I'm sure is local town getting the                                 proper next drive and that should be                                     or minimum so our goal is to get as                                 close as possible so what we prefer is                                 for our stuff converge as fast as                                 possible we also want to be accurate                                 because you know there's a lot of                                 convergence in three games if it's                                 completely inaccurate so these things                                 kind of compute each other which is not                                 been texting anyway so I basically                                 generate a bunch of data and ran it over                                 the link you know                                                     how about things panned out and the                                 result of that just no free lunch the                                 things that do really well in terms of                                 the air but the fix it used to                                        year is very low it takes forever you                                 know like that's the little bit of                                 cracking the time almost waiting for                                 this thing to convert which would be                                 terrible right London convergence very                                 fast but I have a terrible error and                                 that's way off of Mark sort of the even                                 the ramp up now assume the kiddos had                                 terrible the jump ups were kind of you                                 know as you'd expect as you go as a                                 jump-off loose brother freely again more                                 errors but a good bridges faster Sony                                 what do you hear right so I me my cast                                 so to me this is kind of a best solution                                 because it's kind of a nice compromise                                 between the two that's still a really                                 long time I don't think that's                                 vile submission moment yeah I believe                                 curious if this work on or does it work                                 on so I mean the first in a raised                                 affected right now we don't have a                                 tennis court so we have a guy working on                                 a whole bunch of Bob then you're on just                                 port so adding basically matrices and                                 operations on them but it's not starting                                 you think you know like a s must be want                                 to do that one who actually care about                                 before is right I wanted you to drink                                 there is there's only like so yeah we                                 definitely don't quite do that yet that                                 is one thing that I've had my heart                                 sound for a while especially trying to                                 explore like you know doing that in some                                 interesting ways to preteens like that                                 goes and things now I think me and Eric                                 talked about kind of have like you were                                 in the expression basically Rapids and                                 inside out fuse if you wanted to do to                                 look at that and create a lowly esteem                                 then pass it into like some other a                                 little bit that can actually generate                                 like a faster version but no we don't                                 you don't have an opinion that is you                                 know the real thing is kind of what                                 amazed                                 the rest is called in degrees and there                                 is a size smaller how do you compare                                 fire those differences right so so                                 saddle basically provides actual                                 concrete instances of these spiky Oh                                 like a vector quick thinking actually                                 used right so spire is being goal is                                 really to provide the abstractions so I                                 mean spire would kind of fit into sat on                                 the way that you like you'd write a                                 vector space that uses house number text                                 and then the idea of you now you don't                                 have to tie yourself down to a                                 particular typing in town of abstract                                 over it do you use any of these                                 techniques like at work up in terms of                                 various optimization problems you're                                 doing those are things like that you                                 haven't used a bunch of me that's I                                 don't think it helps is the day I can                                 get on but I mean yeah I'm worked up too                                 long but yeah like we were kind of                                 exploring these things there's bit as                                 talk came from I was using it yeah it's                                 not use inspire to do a lot of a little                                 like and like pillars need some                                 operators and searching that kind of                                 stuff just what I get this time                                 you
YouTube URL: https://www.youtube.com/watch?v=EGwVDyyEeI8


