Title: Test anything that runs in the browser with Cypress and GitHub Actions
Publication date: 2020-12-14
Playlist: Open Source Friday
Description: 
	The web has evolved. Finally, testing has to. Join us with Cyrpress maintainer, Gleb Bahmutov, in learning how they put together a GitHub Actions to run fast, easy, and reliable browser tests.

GitHub Actions makes it easy to automate all your software workflows, now with world-class CI/CD. Build, test, and deploy your code right from GitHub. Make code reviews, branch management, and issue triaging work the way you want.

Gleb Bahmutov is JavaScript guru, image processing expert and software quality fanatic. During the day Gleb is making the web a better place as VP of Engineering at Cypress.io. At night he is fighting software bugs and blogs about it at glebbahmutov.com/blog.

Join bdougie and friends live for Open Source Fridays at https://www.meetup.com/GitHub-Virtual.

0:00 - Start
01:22 - What is Cypress?
3:27 - Why not use Puppeteer of Playwright for e2e testing?
8:12 - Cypress GitHub Action
15:15 - Walkthrough setting up Cypress on a project
17:50 - See Cypress in action
24:52 - Writing a Cypress test
35:55 - Add the Cypress GitHub Actions to a GitHub repo
47:29 - Passing our tests in the GitHub Action
53:00 - How to get involved and contribute to Cypress

As always, feel free to leave us a comment below and don't forget to subscribe: http://bit.ly/subgithub

Thanks!

Connect with us.
Facebook: http://fb.com/github
Twitter: http://twitter.com/github
LinkedIn: http://linkedin.com/company/github

About GitHub
GitHub is the best place to share code with friends, co-workers, classmates, and complete strangers. Millions of people use GitHub to build amazing things together. For more info, go to http://github.com
Captions: 
	00:00:00,240 --> 00:00:03,520
all right hello hello hello sorry folks

00:00:03,040 --> 00:00:05,040
uh

00:00:03,520 --> 00:00:06,480
i actually had the music muted the whole

00:00:05,040 --> 00:00:07,919
time so you weren't listening to any

00:00:06,480 --> 00:00:09,679
stream beats at all

00:00:07,919 --> 00:00:11,440
um but you know we'll figure this out

00:00:09,679 --> 00:00:13,679
eventually um i'm

00:00:11,440 --> 00:00:15,280
bw you probably see me around if you

00:00:13,679 --> 00:00:17,359
were watching universe at all

00:00:15,280 --> 00:00:19,760
on the twitch stream uh i was on the dev

00:00:17,359 --> 00:00:22,080
track for three days straight so

00:00:19,760 --> 00:00:22,800
uh what a great way to sort of end

00:00:22,080 --> 00:00:25,279
streaming

00:00:22,800 --> 00:00:26,320
the universe by streaming one more time

00:00:25,279 --> 00:00:28,000
uh with uh

00:00:26,320 --> 00:00:29,679
gleb gleb you want to introduce yourself

00:00:28,000 --> 00:00:32,559
and say hello

00:00:29,679 --> 00:00:35,120
hey everyone i'm claire bachmandev i'm

00:00:32,559 --> 00:00:37,440
vp of engineering at cypress detail

00:00:35,120 --> 00:00:39,200
and i'm here about to talk about github

00:00:37,440 --> 00:00:41,440
actions apparently

00:00:39,200 --> 00:00:42,640
yes excellent and folks uh thanks for if

00:00:41,440 --> 00:00:44,320
you're watching us on the stream right

00:00:42,640 --> 00:00:46,000
now to say hello in the chat

00:00:44,320 --> 00:00:47,440
let us know how the feed's looking uh i

00:00:46,000 --> 00:00:49,280
do know a delay in my voice

00:00:47,440 --> 00:00:51,440
and i had that fix on my other channel

00:00:49,280 --> 00:00:54,480
and totally forgot to fix that here so

00:00:51,440 --> 00:00:56,160
uh bear with me new setup new camera new

00:00:54,480 --> 00:00:57,920
angle and uh yeah we'll

00:00:56,160 --> 00:00:59,359
we'll we'll be working through all that

00:00:57,920 --> 00:01:00,800
stuff eventually in the next coming

00:00:59,359 --> 00:01:03,600
couple weeks but um

00:01:00,800 --> 00:01:04,400
gleb you um you work at cypress uh

00:01:03,600 --> 00:01:06,799
correct

00:01:04,400 --> 00:01:08,080
and um that's true cyprus is something

00:01:06,799 --> 00:01:11,040
that honestly

00:01:08,080 --> 00:01:12,640
i don't even know when it came out like

00:01:11,040 --> 00:01:13,439
when it came around but it's just always

00:01:12,640 --> 00:01:15,040
been

00:01:13,439 --> 00:01:16,640
around as far as like the sort of

00:01:15,040 --> 00:01:17,600
premier choice for ending testing for

00:01:16,640 --> 00:01:19,280
javascript

00:01:17,600 --> 00:01:21,040
um i've used a couple different tools in

00:01:19,280 --> 00:01:22,560
the past and i'm excited to learn more

00:01:21,040 --> 00:01:23,119
about it so do you want to give us like

00:01:22,560 --> 00:01:24,840
um

00:01:23,119 --> 00:01:26,560
like a brief introduction of what cyprus

00:01:24,840 --> 00:01:28,960
is

00:01:26,560 --> 00:01:29,680
absolutely so imagine you write a web

00:01:28,960 --> 00:01:32,079
application

00:01:29,680 --> 00:01:33,680
or a website well at the end of the day

00:01:32,079 --> 00:01:35,680
do you know if it's working

00:01:33,680 --> 00:01:37,920
for your users right not for you on your

00:01:35,680 --> 00:01:39,600
local machine not in ci but

00:01:37,920 --> 00:01:41,280
actually when your user goes to your web

00:01:39,600 --> 00:01:43,759
application tries to use it

00:01:41,280 --> 00:01:44,799
so it was always difficult because we

00:01:43,759 --> 00:01:46,479
didn't have tools

00:01:44,799 --> 00:01:48,880
that actually could control the browser

00:01:46,479 --> 00:01:50,320
very well and worked with modern web

00:01:48,880 --> 00:01:53,759
applications very well

00:01:50,320 --> 00:01:55,920
so brian mann six years ago

00:01:53,759 --> 00:01:56,960
decided i'm gonna write this tool i'm

00:01:55,920 --> 00:01:59,119
gonna do it

00:01:56,960 --> 00:02:00,079
because he needed something to test his

00:01:59,119 --> 00:02:02,240
applications

00:02:00,079 --> 00:02:03,920
and so he decided to use this new

00:02:02,240 --> 00:02:04,799
fangled thing that came out called

00:02:03,920 --> 00:02:07,680
electron

00:02:04,799 --> 00:02:09,679
where you had electron browser built in

00:02:07,680 --> 00:02:11,360
but you could control very well

00:02:09,679 --> 00:02:13,360
and so he has done this thing with the

00:02:11,360 --> 00:02:15,280
test run in the browser

00:02:13,360 --> 00:02:16,800
and then he expanded it so that you can

00:02:15,280 --> 00:02:19,599
control chrome

00:02:16,800 --> 00:02:20,319
and firefox but the main thing is the

00:02:19,599 --> 00:02:23,280
end-to-end

00:02:20,319 --> 00:02:25,120
test runner that works very well with

00:02:23,280 --> 00:02:26,879
modern web applications it runs

00:02:25,120 --> 00:02:28,640
right there in a browser so it knows

00:02:26,879 --> 00:02:30,640
when elements appear disappear

00:02:28,640 --> 00:02:33,360
become invisible or visible it has

00:02:30,640 --> 00:02:35,200
access to all the browser's apis

00:02:33,360 --> 00:02:37,680
right so everything you need to write

00:02:35,200 --> 00:02:39,920
good end-to-end tests

00:02:37,680 --> 00:02:41,440
is in a single package which you just do

00:02:39,920 --> 00:02:43,840
like npm install cyprus

00:02:41,440 --> 00:02:45,680
and you're good to go yeah that's that's

00:02:43,840 --> 00:02:47,440
awesome and um

00:02:45,680 --> 00:02:48,720
i i didn't realize it was a that

00:02:47,440 --> 00:02:51,200
straightforward so

00:02:48,720 --> 00:02:53,760
um using using electron like cyprus is

00:02:51,200 --> 00:02:56,480
powered by electron is that correct

00:02:53,760 --> 00:02:58,000
yes so when you install cyprus it's npm

00:02:56,480 --> 00:03:01,040
package but it downloads

00:02:58,000 --> 00:03:02,239
an electron based binary that we build

00:03:01,040 --> 00:03:05,840
for every platform

00:03:02,239 --> 00:03:09,519
okay and that's right um so we built

00:03:05,840 --> 00:03:12,560
you know cyprus for linux

00:03:09,519 --> 00:03:15,040
two versions for windows and one for mac

00:03:12,560 --> 00:03:16,879
and so when you start cypress it runs

00:03:15,040 --> 00:03:18,879
cyprus that comes with built in electron

00:03:16,879 --> 00:03:21,440
browser but if you have

00:03:18,879 --> 00:03:22,400
other browsers installed on your machine

00:03:21,440 --> 00:03:26,159
it will find it

00:03:22,400 --> 00:03:27,680
and it will be able to control it gotcha

00:03:26,159 --> 00:03:29,120
interesting and then how would this

00:03:27,680 --> 00:03:30,879
compare to because what do you say like

00:03:29,120 --> 00:03:32,000
and then testing and stuff like that um

00:03:30,879 --> 00:03:33,920
an interaction with the

00:03:32,000 --> 00:03:35,360
the web browser like i know about

00:03:33,920 --> 00:03:36,640
playwright i think microsoft's

00:03:35,360 --> 00:03:38,239
playwright and then the

00:03:36,640 --> 00:03:40,879
the other one google i know it's a very

00:03:38,239 --> 00:03:42,879
similar name but uh how do those compare

00:03:40,879 --> 00:03:45,680
yeah puppeteer yeah that's what it is

00:03:42,879 --> 00:03:48,400
how do those compare the cypress then

00:03:45,680 --> 00:03:49,760
so they solve this problem completely

00:03:48,400 --> 00:03:53,519
differently

00:03:49,760 --> 00:03:56,319
right they for example puppeteer is a

00:03:53,519 --> 00:03:58,319
google project so they decide to use

00:03:56,319 --> 00:03:59,200
chrome debugger protocol to control the

00:03:58,319 --> 00:04:01,040
browser

00:03:59,200 --> 00:04:02,799
and chrome debugger protocol if you ever

00:04:01,040 --> 00:04:04,400
open dev tools in chrome is super

00:04:02,799 --> 00:04:07,120
powerful because the devtools

00:04:04,400 --> 00:04:08,239
is using chrome debugger protocol to

00:04:07,120 --> 00:04:10,400
control the page

00:04:08,239 --> 00:04:11,840
send commands do everything so they

00:04:10,400 --> 00:04:13,599
decided why don't we

00:04:11,840 --> 00:04:14,879
connect to a browser using the same

00:04:13,599 --> 00:04:18,160
protocol

00:04:14,879 --> 00:04:19,919
and during tasks control it in general

00:04:18,160 --> 00:04:21,600
puppeteer is not a testing tool it's

00:04:19,919 --> 00:04:23,600
browser automation tool so it's not

00:04:21,600 --> 00:04:25,360
specifically built for testing

00:04:23,600 --> 00:04:28,560
so if you want for example to write

00:04:25,360 --> 00:04:30,000
actual test blocks and before each hooks

00:04:28,560 --> 00:04:31,840
and after each hooks

00:04:30,000 --> 00:04:33,120
and add assertions you need to bring

00:04:31,840 --> 00:04:35,280
extra packages

00:04:33,120 --> 00:04:36,880
so people have to like assemble kind of

00:04:35,280 --> 00:04:39,040
frankenstein monsters of

00:04:36,880 --> 00:04:40,800
jest and puppeteer and maybe something

00:04:39,040 --> 00:04:42,639
else in order for you to launch your

00:04:40,800 --> 00:04:43,520
browser and control it and the same play

00:04:42,639 --> 00:04:45,440
right

00:04:43,520 --> 00:04:46,639
right yeah but cyprus decided different

00:04:45,440 --> 00:04:48,160
thing we didn't want to use chrome

00:04:46,639 --> 00:04:50,960
debugger protocol

00:04:48,160 --> 00:04:52,800
right because we had technical

00:04:50,960 --> 00:04:54,720
limitations before and so on

00:04:52,800 --> 00:04:57,040
so instead we launched the browser and

00:04:54,720 --> 00:04:57,759
then we load all our javascript all our

00:04:57,040 --> 00:05:00,320
test specs

00:04:57,759 --> 00:05:01,280
right into the browser itself and we

00:05:00,320 --> 00:05:03,680
control everything

00:05:01,280 --> 00:05:05,199
natively well i mean like using

00:05:03,680 --> 00:05:08,560
javascript only

00:05:05,199 --> 00:05:09,120
so now we're adding back native events

00:05:08,560 --> 00:05:11,600
like

00:05:09,120 --> 00:05:12,240
we can use chrome debugger protocol and

00:05:11,600 --> 00:05:14,160
so on

00:05:12,240 --> 00:05:16,400
so we're adding those capabilities but

00:05:14,160 --> 00:05:17,199
our tests are much closer to the browser

00:05:16,400 --> 00:05:20,000
environment

00:05:17,199 --> 00:05:21,520
than sending commands from outside okay

00:05:20,000 --> 00:05:23,600
chrome debugger protocol

00:05:21,520 --> 00:05:25,039
okay excellent yeah that makes a lot of

00:05:23,600 --> 00:05:26,560
sense too and it actually makes it very

00:05:25,039 --> 00:05:28,080
enticing too as well because i've

00:05:26,560 --> 00:05:29,919
i've picked up playwright and as well as

00:05:28,080 --> 00:05:31,039
puppeteer previously just for some

00:05:29,919 --> 00:05:32,960
one-off

00:05:31,039 --> 00:05:34,560
interactions uh trying to sort of

00:05:32,960 --> 00:05:36,320
automate certain things

00:05:34,560 --> 00:05:37,919
and uh i felt like the sort of uh the

00:05:36,320 --> 00:05:39,199
learning curve even though it's pretty

00:05:37,919 --> 00:05:40,560
straightforward api the learning curve

00:05:39,199 --> 00:05:41,840
was kind of high for me

00:05:40,560 --> 00:05:43,440
uh at the time of what i was trying to

00:05:41,840 --> 00:05:45,120
accomplish so like i sort of just moved

00:05:43,440 --> 00:05:46,560
on to like uh you know what

00:05:45,120 --> 00:05:48,000
i'll figure out a different way to write

00:05:46,560 --> 00:05:48,720
these scripts or like i don't maintain

00:05:48,000 --> 00:05:49,680
them anymore

00:05:48,720 --> 00:05:51,840
mainly because they were just sort of

00:05:49,680 --> 00:05:52,800
one-off solutions but that was for more

00:05:51,840 --> 00:05:55,039
automation and less

00:05:52,800 --> 00:05:57,120
of testing uh but thanks for sort of

00:05:55,039 --> 00:05:59,440
walking through so the differences

00:05:57,120 --> 00:06:00,319
and um i wanted to actually learn more

00:05:59,440 --> 00:06:03,039
about the

00:06:00,319 --> 00:06:03,840
uh cyprus as a company too as well are

00:06:03,039 --> 00:06:05,919
y'all

00:06:03,840 --> 00:06:06,960
you you mentioned off offstream that you

00:06:05,919 --> 00:06:08,639
all are based in

00:06:06,960 --> 00:06:10,240
atlanta but you're not based in atlanta

00:06:08,639 --> 00:06:12,560
correct

00:06:10,240 --> 00:06:13,759
no so we from very beginning knew that

00:06:12,560 --> 00:06:16,800
we had to be remote

00:06:13,759 --> 00:06:20,800
right fully remote so i'm in boston

00:06:16,800 --> 00:06:23,840
we have people in philadelphia chicago

00:06:20,800 --> 00:06:26,720
west coast south america

00:06:23,840 --> 00:06:26,720
eastern europe

00:06:28,080 --> 00:06:34,080
we decided that we need to hire

00:06:31,440 --> 00:06:35,120
everywhere the talent is yeah right you

00:06:34,080 --> 00:06:37,360
cannot live

00:06:35,120 --> 00:06:39,120
so as a company we are about 40 people

00:06:37,360 --> 00:06:41,199
right now and you're like how can 40

00:06:39,120 --> 00:06:43,440
people work on the test runner

00:06:41,199 --> 00:06:44,880
so we started with test run and we tried

00:06:43,440 --> 00:06:47,520
to sell license throughout

00:06:44,880 --> 00:06:48,960
and that didn't work so imagine you're a

00:06:47,520 --> 00:06:50,560
company and you're like i need to write

00:06:48,960 --> 00:06:51,120
tests and then this startup comes and

00:06:50,560 --> 00:06:53,520
says

00:06:51,120 --> 00:06:54,479
pay me for a license invest all this

00:06:53,520 --> 00:06:58,240
time

00:06:54,479 --> 00:07:00,960
and then if we fold well

00:06:58,240 --> 00:07:03,919
you just wasted all this time right so

00:07:00,960 --> 00:07:05,199
that was a constant worry so we decided

00:07:03,919 --> 00:07:07,680
we're going to give away everything is

00:07:05,199 --> 00:07:09,120
open source so cyprus is absolutely open

00:07:07,680 --> 00:07:12,080
source project mit

00:07:09,120 --> 00:07:13,280
license forever right will be forever no

00:07:12,080 --> 00:07:15,440
future limitations

00:07:13,280 --> 00:07:16,960
there is not a you know beta and a pro

00:07:15,440 --> 00:07:18,319
version of service no

00:07:16,960 --> 00:07:20,800
completely you can use everything

00:07:18,319 --> 00:07:24,080
yourself fine

00:07:20,800 --> 00:07:26,800
but for a company when you run tests

00:07:24,080 --> 00:07:28,800
we by default take screenshots on

00:07:26,800 --> 00:07:30,560
failure so you know what happened

00:07:28,800 --> 00:07:32,560
we take video of a whole test run

00:07:30,560 --> 00:07:33,759
automatically on every platform nothing

00:07:32,560 --> 00:07:36,560
to install

00:07:33,759 --> 00:07:38,800
so if your company and you run it in ci

00:07:36,560 --> 00:07:40,720
where do all these test artifacts go

00:07:38,800 --> 00:07:42,639
where are all the test results so we

00:07:40,720 --> 00:07:44,240
provide that as a service to record that

00:07:42,639 --> 00:07:46,879
so you can privately store

00:07:44,240 --> 00:07:48,080
all the test artifacts from any ci so

00:07:46,879 --> 00:07:50,240
that's how we make money

00:07:48,080 --> 00:07:51,840
we have a cypress dashboard which is

00:07:50,240 --> 00:07:53,759
optional completely

00:07:51,840 --> 00:07:56,080
add-on product but makes sense for

00:07:53,759 --> 00:07:58,479
companies and when we like expanded it

00:07:56,080 --> 00:08:00,160
we added analytics desperation

00:07:58,479 --> 00:08:02,319
you know all through the use of a

00:08:00,160 --> 00:08:04,080
dashboard and that's how we make money

00:08:02,319 --> 00:08:05,680
right by providing commercial separate

00:08:04,080 --> 00:08:08,800
service for companies that

00:08:05,680 --> 00:08:11,440
run all of us excellent

00:08:08,800 --> 00:08:12,080
yeah so you reached out and we we

00:08:11,440 --> 00:08:15,120
connected

00:08:12,080 --> 00:08:15,919
about this um well sorry i need to

00:08:15,120 --> 00:08:18,800
actually share

00:08:15,919 --> 00:08:19,680
my screen but we connected uh about this

00:08:18,800 --> 00:08:22,160
sorry

00:08:19,680 --> 00:08:24,240
first day on the new stream but uh uh

00:08:22,160 --> 00:08:25,599
this is a github action and y'all made

00:08:24,240 --> 00:08:27,120
the decision to

00:08:25,599 --> 00:08:28,720
leverage credit of actions to help

00:08:27,120 --> 00:08:29,520
people incorporate cyprus in their sort

00:08:28,720 --> 00:08:32,320
of interest

00:08:29,520 --> 00:08:33,360
into and testing scheme um folks also

00:08:32,320 --> 00:08:34,959
thanks for the followers too on the

00:08:33,360 --> 00:08:36,320
twitch stream i do have the chat open so

00:08:34,959 --> 00:08:38,080
if you do have any questions about

00:08:36,320 --> 00:08:38,399
cypress or github actions like we both

00:08:38,080 --> 00:08:39,839
can

00:08:38,399 --> 00:08:41,599
probably ask answer questions from

00:08:39,839 --> 00:08:43,760
either bucket um

00:08:41,599 --> 00:08:45,680
but uh so definitely leverage the chat

00:08:43,760 --> 00:08:46,720
um but if you don't know about github

00:08:45,680 --> 00:08:50,000
actions real quick

00:08:46,720 --> 00:08:53,040
uh these are sort of ways to provide

00:08:50,000 --> 00:08:54,720
automation um to your repositories into

00:08:53,040 --> 00:08:55,440
your projects uh these could be web

00:08:54,720 --> 00:08:57,360
projects or

00:08:55,440 --> 00:08:59,360
any types of projects uh but what's

00:08:57,360 --> 00:09:01,279
really nice about this is that the sort

00:08:59,360 --> 00:09:04,720
of integration with cypress

00:09:01,279 --> 00:09:06,240
uh is pretty seamless um so

00:09:04,720 --> 00:09:08,160
uh here github actions you can sort of

00:09:06,240 --> 00:09:08,720
add stuff to your your ci and that's

00:09:08,160 --> 00:09:10,640
like

00:09:08,720 --> 00:09:12,399
we'll stop the github actions commercial

00:09:10,640 --> 00:09:14,959
for now and um

00:09:12,399 --> 00:09:16,480
but here i i actually wanted to sort of

00:09:14,959 --> 00:09:17,839
learn more about cyprus and

00:09:16,480 --> 00:09:19,360
about this action so do you want to

00:09:17,839 --> 00:09:20,080
explain sort of what you all are doing

00:09:19,360 --> 00:09:21,600
with the

00:09:20,080 --> 00:09:23,680
the get up action here and how it sort

00:09:21,600 --> 00:09:27,519
of integrates with cyprus

00:09:23,680 --> 00:09:30,000
yes um so brian as you know

00:09:27,519 --> 00:09:31,360
running tool locally is like the easiest

00:09:30,000 --> 00:09:33,200
thing you can do right that's why

00:09:31,360 --> 00:09:33,760
there's a joke run it like works on my

00:09:33,200 --> 00:09:35,920
machine

00:09:33,760 --> 00:09:37,279
yeah the most important thing from like

00:09:35,920 --> 00:09:40,080
day one for me

00:09:37,279 --> 00:09:41,839
is to set up automated tests on ci on a

00:09:40,080 --> 00:09:45,279
separate machine where

00:09:41,839 --> 00:09:47,760
every commit is tested

00:09:45,279 --> 00:09:49,120
so i had a lot of experience over the

00:09:47,760 --> 00:09:52,320
last forever

00:09:49,120 --> 00:09:55,760
15 years setting up you know jenkins

00:09:52,320 --> 00:09:58,640
and travis and

00:09:55,760 --> 00:09:59,760
uh gitlab ci like running everything

00:09:58,640 --> 00:10:03,120
in-house

00:09:59,760 --> 00:10:05,040
right and using over like external

00:10:03,120 --> 00:10:08,560
commercial ci providers

00:10:05,040 --> 00:10:10,079
so you give me the name of anything

00:10:08,560 --> 00:10:11,120
provider and i'll tell you my experience

00:10:10,079 --> 00:10:12,640
of it

00:10:11,120 --> 00:10:14,800
so from the very beginning we

00:10:12,640 --> 00:10:15,279
concentrated on making sure cyprus can

00:10:14,800 --> 00:10:17,920
run

00:10:15,279 --> 00:10:18,959
on any ci provider like like that right

00:10:17,920 --> 00:10:22,079
so we have list of

00:10:18,959 --> 00:10:23,519
os dependencies we have uh docker image

00:10:22,079 --> 00:10:26,959
repository

00:10:23,519 --> 00:10:28,320
uh on github and on with all our

00:10:26,959 --> 00:10:29,839
dependencies and then

00:10:28,320 --> 00:10:33,440
bunch of dark images ciphers pre

00:10:29,839 --> 00:10:35,519
installed from a very first moment

00:10:33,440 --> 00:10:37,440
we made conscious decision but we want

00:10:35,519 --> 00:10:38,480
to show an example of running cyprus on

00:10:37,440 --> 00:10:42,720
every side

00:10:38,480 --> 00:10:44,800
so i've written examples for hci

00:10:42,720 --> 00:10:46,000
when we saw github actions which came

00:10:44,800 --> 00:10:48,000
out what

00:10:46,000 --> 00:10:49,120
a year two years ago two years ago yes a

00:10:48,000 --> 00:10:51,839
year ago

00:10:49,120 --> 00:10:53,519
okay we did we kind of looked it was

00:10:51,839 --> 00:10:57,279
like oh wait this is pretty powerful

00:10:53,519 --> 00:10:59,040
i can write my ci code

00:10:57,279 --> 00:11:00,880
using javascript right and this is like

00:10:59,040 --> 00:11:03,920
such a big shift because

00:11:00,880 --> 00:11:05,440
when you need to write a ci

00:11:03,920 --> 00:11:07,760
configuration file

00:11:05,440 --> 00:11:09,600
right now every size like copy paste an

00:11:07,760 --> 00:11:13,120
example from the docs

00:11:09,600 --> 00:11:14,560
push it oh wait i forgot a comma oh wait

00:11:13,120 --> 00:11:15,920
this variable doesn't interpolate

00:11:14,560 --> 00:11:16,959
correctly oh wait how do i set up

00:11:15,920 --> 00:11:19,200
caching here

00:11:16,959 --> 00:11:20,320
right and so this constant iteration

00:11:19,200 --> 00:11:23,839
loop of like

00:11:20,320 --> 00:11:24,720
this push see if it works try to fix it

00:11:23,839 --> 00:11:28,399
push it again it's

00:11:24,720 --> 00:11:30,480
very frustrating and so we decided to

00:11:28,399 --> 00:11:31,519
abstract this so github action that

00:11:30,480 --> 00:11:34,880
we've written

00:11:31,519 --> 00:11:35,519
well i've written abstracts all cypress

00:11:34,880 --> 00:11:37,920
installed

00:11:35,519 --> 00:11:38,720
you know shenanigans yeah right but

00:11:37,920 --> 00:11:42,480
caching

00:11:38,720 --> 00:11:44,160
we're running the verification right

00:11:42,480 --> 00:11:45,680
so that our users don't have to think

00:11:44,160 --> 00:11:47,440
about it like

00:11:45,680 --> 00:11:48,800
literally right now in order for you to

00:11:47,440 --> 00:11:51,600
run cyprus

00:11:48,800 --> 00:11:52,880
on github actions it's a single yamas

00:11:51,600 --> 00:11:55,839
you know like uses

00:11:52,880 --> 00:11:57,360
cyphers io slash github action that's it

00:11:55,839 --> 00:11:59,760
yeah

00:11:57,360 --> 00:12:01,279
and like this is the basic example and

00:11:59,760 --> 00:12:02,880
it takes care of everything

00:12:01,279 --> 00:12:04,320
right it installs it if it's necessary

00:12:02,880 --> 00:12:06,880
to install it verifies it

00:12:04,320 --> 00:12:07,519
it caches right it runs npm installed

00:12:06,880 --> 00:12:09,839
for you

00:12:07,519 --> 00:12:11,920
using npm or yarn depending on what it

00:12:09,839 --> 00:12:14,320
finds in your repository

00:12:11,920 --> 00:12:15,279
and it works and you you never have to

00:12:14,320 --> 00:12:18,480
think about it

00:12:15,279 --> 00:12:22,079
right so our motivation was make our

00:12:18,480 --> 00:12:24,720
users lives easier and i think with

00:12:22,079 --> 00:12:25,920
power of javascript and the innovation

00:12:24,720 --> 00:12:28,399
of github actions

00:12:25,920 --> 00:12:29,440
because i used i used azure pipelines

00:12:28,399 --> 00:12:33,440
before and

00:12:29,440 --> 00:12:33,440
like no offense but this is stuff

00:12:33,450 --> 00:12:38,639
[Laughter]

00:12:35,600 --> 00:12:39,200
it's just amazing because um actions run

00:12:38,639 --> 00:12:40,880
on top of

00:12:39,200 --> 00:12:42,880
azure pipelines really under the hood

00:12:40,880 --> 00:12:46,399
it's the same vms that come up

00:12:42,880 --> 00:12:47,279
and so on but it's so much easier to

00:12:46,399 --> 00:12:51,040
actually just

00:12:47,279 --> 00:12:54,320
program everything in javascript

00:12:51,040 --> 00:12:56,320
right which is kind of unusual and so

00:12:54,320 --> 00:12:59,920
this was two years ago we started pretty

00:12:56,320 --> 00:13:03,279
popular action we put it on marketplace

00:12:59,920 --> 00:13:05,120
i use it myself all the time because

00:13:03,279 --> 00:13:06,800
i need an example for example of some

00:13:05,120 --> 00:13:09,360
app i create

00:13:06,800 --> 00:13:10,880
a repository and i immediately add

00:13:09,360 --> 00:13:13,440
github action

00:13:10,880 --> 00:13:15,279
right and it just runs like there is no

00:13:13,440 --> 00:13:17,519
authentication to configure

00:13:15,279 --> 00:13:19,680
nothing like it's such a winning

00:13:17,519 --> 00:13:22,320
combination and

00:13:19,680 --> 00:13:24,399
to be honest um microsoft has not paid

00:13:22,320 --> 00:13:27,279
me any money to say this right

00:13:24,399 --> 00:13:29,600
but i'm a big big fan boy of github

00:13:27,279 --> 00:13:31,680
action so

00:13:29,600 --> 00:13:32,880
yeah that's awesome yeah and i mean i'm

00:13:31,680 --> 00:13:34,000
right there with you i mean they do pay

00:13:32,880 --> 00:13:36,000
me a lot of money to uh

00:13:34,000 --> 00:13:37,040
to say i'm a fan of github actions but

00:13:36,000 --> 00:13:40,800
uh

00:13:37,040 --> 00:13:43,519
um yeah so like leveraging including the

00:13:40,800 --> 00:13:44,800
the action itself inside your yaml file

00:13:43,519 --> 00:13:46,880
that's the first step

00:13:44,800 --> 00:13:48,240
but how do you basically like how would

00:13:46,880 --> 00:13:50,399
i add test

00:13:48,240 --> 00:13:52,079
so if i wanted to test like if someone

00:13:50,399 --> 00:13:54,480
like clicked a button or whatever

00:13:52,079 --> 00:13:55,519
or whatever the hell world of cyprus

00:13:54,480 --> 00:13:58,560
testing is

00:13:55,519 --> 00:13:59,600
um do i i need to build a separate yaml

00:13:58,560 --> 00:14:02,959
file or

00:13:59,600 --> 00:14:04,959
a javascript file so that that's

00:14:02,959 --> 00:14:06,079
uh a separate thing right so we assume

00:14:04,959 --> 00:14:09,040
that you have

00:14:06,079 --> 00:14:10,959
uh cypress oh installed in npm

00:14:09,040 --> 00:14:11,440
independence is right but you run it

00:14:10,959 --> 00:14:13,360
once

00:14:11,440 --> 00:14:14,720
locally and we can go through these

00:14:13,360 --> 00:14:16,480
steps right

00:14:14,720 --> 00:14:18,800
you know brand review today if you want

00:14:16,480 --> 00:14:21,120
to we can start a new repository

00:14:18,800 --> 00:14:22,720
and when you install cypress and you run

00:14:21,120 --> 00:14:24,639
it first time it will scaffold a couple

00:14:22,720 --> 00:14:26,720
of example spec files

00:14:24,639 --> 00:14:28,560
so if you want to do that we can do that

00:14:26,720 --> 00:14:30,399
and then we can add just copy paste

00:14:28,560 --> 00:14:32,399
the action but i show that every basic

00:14:30,399 --> 00:14:35,120
one and it will run

00:14:32,399 --> 00:14:36,240
on github actions like from uh okay

00:14:35,120 --> 00:14:39,440
itself

00:14:36,240 --> 00:14:41,120
so i i do have a project demo yeah so i

00:14:39,440 --> 00:14:42,480
do have a project that um it's pretty

00:14:41,120 --> 00:14:45,760
straightforward is the next.js

00:14:42,480 --> 00:14:48,880
project so i wonder if i have perfect

00:14:45,760 --> 00:14:50,720
we can uh leverage that um

00:14:48,880 --> 00:14:53,680
i just need to i need to clean up some

00:14:50,720 --> 00:14:57,440
stuff maybe okay i'm good

00:14:53,680 --> 00:15:00,720
so yeah this pool should pull the latest

00:14:57,440 --> 00:15:02,000
uh which is main yeah and for context

00:15:00,720 --> 00:15:03,440
folks this is

00:15:02,000 --> 00:15:05,120
this is the project that i have it's

00:15:03,440 --> 00:15:07,600
just a simple uh

00:15:05,120 --> 00:15:09,279
nice little digital garden to have links

00:15:07,600 --> 00:15:13,440
to all my social stuff

00:15:09,279 --> 00:15:15,199
uh so we'll work with that and uh

00:15:13,440 --> 00:15:16,560
real quick uh let me set some things up

00:15:15,199 --> 00:15:18,160
to make sure

00:15:16,560 --> 00:15:19,760
since i'm sharing my full screen i want

00:15:18,160 --> 00:15:20,240
to make sure i'm not sharing too many

00:15:19,760 --> 00:15:23,760
things

00:15:20,240 --> 00:15:27,040
passwords yeah excellent

00:15:23,760 --> 00:15:29,920
everyone take screenshots all right

00:15:27,040 --> 00:15:31,279
okay um if you want to start in a

00:15:29,920 --> 00:15:34,720
different branch

00:15:31,279 --> 00:15:38,959
or if you want to work on this one yeah

00:15:34,720 --> 00:15:41,600
let's uh try cyprus we'll go there oh

00:15:38,959 --> 00:15:42,800
i swear i know how to use get there we

00:15:41,600 --> 00:15:44,240
go

00:15:42,800 --> 00:15:46,000
so you're saying i get to see npm

00:15:44,240 --> 00:15:49,680
install

00:15:46,000 --> 00:15:54,480
cyprus do you use yarn or npm here um

00:15:49,680 --> 00:15:56,000
honestly i think i don't know what i'm

00:15:54,480 --> 00:15:58,480
using i do have yarn actually okay

00:15:56,000 --> 00:16:00,240
i i see yarn so why don't we use uh oh

00:15:58,480 --> 00:16:03,440
and you also have package lock

00:16:00,240 --> 00:16:05,120
json so you have both so cypress is a

00:16:03,440 --> 00:16:07,759
dev tool right so you probably want to

00:16:05,120 --> 00:16:12,800
do dash capital g so you

00:16:07,759 --> 00:16:12,800
save it as a depth dependency got it

00:16:13,839 --> 00:16:19,680
let's do this and i i use both npm and

00:16:18,000 --> 00:16:21,440
yarn in different projects so i just

00:16:19,680 --> 00:16:23,839
type the first one i think of

00:16:21,440 --> 00:16:25,519
and never saying yeah yeah part of the

00:16:23,839 --> 00:16:28,399
reason why i have both of them in there

00:16:25,519 --> 00:16:29,680
but yeah just simply adding um yarn and

00:16:28,399 --> 00:16:30,959
i want to say i

00:16:29,680 --> 00:16:33,680
go out on a limb i have probably have

00:16:30,959 --> 00:16:36,240
zero tests for this project too as well

00:16:33,680 --> 00:16:37,600
so i actually started this from a

00:16:36,240 --> 00:16:39,360
template

00:16:37,600 --> 00:16:40,959
from one of my friends actually created

00:16:39,360 --> 00:16:43,600
so

00:16:40,959 --> 00:16:45,839
well we're talking to the next gs team

00:16:43,600 --> 00:16:46,880
right so we're adding cypress template

00:16:45,839 --> 00:16:50,079
there as well so

00:16:46,880 --> 00:16:50,720
eventually when you scaffold nexus apps

00:16:50,079 --> 00:16:52,399
i'll be

00:16:50,720 --> 00:16:53,839
a template with like cypress

00:16:52,399 --> 00:16:56,639
pre-configured

00:16:53,839 --> 00:16:57,839
but what's happening now it's downloaded

00:16:56,639 --> 00:17:01,759
cyprus npm which

00:16:57,839 --> 00:17:05,199
downloads uh whatever operating system

00:17:01,759 --> 00:17:08,400
cypress binary

00:17:05,199 --> 00:17:11,039
i feel like it's downloading cyprus

00:17:08,400 --> 00:17:11,919
electron package and it will place it on

00:17:11,039 --> 00:17:14,880
your machine

00:17:11,919 --> 00:17:15,280
in your like home folder cache folder

00:17:14,880 --> 00:17:16,559
okay

00:17:15,280 --> 00:17:18,240
so but you never have to download the

00:17:16,559 --> 00:17:20,559
same version of fabrics binary again

00:17:18,240 --> 00:17:22,400
because it's like 100 megabytes

00:17:20,559 --> 00:17:24,480
but what if the uh if you all ship a new

00:17:22,400 --> 00:17:26,319
version does it check to see

00:17:24,480 --> 00:17:27,919
uh and then validate that and installed

00:17:26,319 --> 00:17:30,400
in the latest one

00:17:27,919 --> 00:17:32,400
yeah so it in a cache it will actually

00:17:30,400 --> 00:17:33,120
keep different versions of cypress so if

00:17:32,400 --> 00:17:35,679
one pack

00:17:33,120 --> 00:17:37,200
like in a project uses one version no

00:17:35,679 --> 00:17:39,760
problem it will be cached

00:17:37,200 --> 00:17:41,120
separately and never overwrite it and

00:17:39,760 --> 00:17:44,160
then we also have like

00:17:41,120 --> 00:17:46,000
you know cypress prune that will clean

00:17:44,160 --> 00:17:46,400
up all these binaries because they take

00:17:46,000 --> 00:17:50,080
ups

00:17:46,400 --> 00:17:50,640
okay so the one thing that we want to do

00:17:50,080 --> 00:17:52,799
right now

00:17:50,640 --> 00:17:54,160
is probably like see cyprus in action so

00:17:52,799 --> 00:17:57,919
why don't you do

00:17:54,160 --> 00:17:57,919
yarn cypress open

00:17:59,120 --> 00:18:04,400
open okay so

00:18:02,240 --> 00:18:08,240
this is your first time it verified

00:18:04,400 --> 00:18:08,240
cyprus right and you to open it

00:18:08,400 --> 00:18:13,679
and it noticed that brian you never

00:18:11,520 --> 00:18:16,400
used cyprus in this project before so it

00:18:13,679 --> 00:18:20,080
actually scaffolded bunch of examples

00:18:16,400 --> 00:18:22,640
right excellent um by default and

00:18:20,080 --> 00:18:23,280
you know you could find we can delete

00:18:22,640 --> 00:18:25,039
them later

00:18:23,280 --> 00:18:26,480
but these are all different spec files

00:18:25,039 --> 00:18:29,200
like all different tests

00:18:26,480 --> 00:18:30,559
okay i notice that on uh okay when you

00:18:29,200 --> 00:18:32,640
click on that

00:18:30,559 --> 00:18:34,400
you know it starts chrome but it found

00:18:32,640 --> 00:18:39,280
on your machine

00:18:34,400 --> 00:18:41,919
and you see browser window open right

00:18:39,280 --> 00:18:44,280
and you can see in iframe on the right a

00:18:41,919 --> 00:18:45,600
website well in this case we use like

00:18:44,280 --> 00:18:47,760
example.cypress.io

00:18:45,600 --> 00:18:48,960
yeah and so it's an actual website right

00:18:47,760 --> 00:18:52,640
like you can like

00:18:48,960 --> 00:18:55,520
you can interact with it it's it's there

00:18:52,640 --> 00:18:57,440
you know uh on the left you see all

00:18:55,520 --> 00:18:59,120
extra like what we call command log so

00:18:57,440 --> 00:19:01,360
these are all different tests

00:18:59,120 --> 00:19:02,799
that's awesome right but finished and if

00:19:01,360 --> 00:19:06,480
you click on one for like

00:19:02,799 --> 00:19:09,440
any one of them it expands and it shows

00:19:06,480 --> 00:19:13,679
individual test commands

00:19:09,440 --> 00:19:16,240
that that just ran and uh

00:19:13,679 --> 00:19:18,320
so you can see but it visited a url

00:19:16,240 --> 00:19:19,679
cleared cookies got cookies ran

00:19:18,320 --> 00:19:22,000
assertions lots of

00:19:19,679 --> 00:19:23,039
the green things so this is end-to-end

00:19:22,000 --> 00:19:26,160
test it actually

00:19:23,039 --> 00:19:28,799
interacted with live website oh awesome

00:19:26,160 --> 00:19:29,600
so um out of some curiosities too

00:19:28,799 --> 00:19:30,960
because i've done some

00:19:29,600 --> 00:19:33,440
intent testing and i just want to shout

00:19:30,960 --> 00:19:35,039
out uh divster.gotgam

00:19:33,440 --> 00:19:36,559
it's the saying that he loves cyphers

00:19:35,039 --> 00:19:38,480
seen and grow from the start

00:19:36,559 --> 00:19:40,240
uh and also thinks actions just makes it

00:19:38,480 --> 00:19:40,559
even more powerful so shout out to them

00:19:40,240 --> 00:19:43,039
for

00:19:40,559 --> 00:19:44,320
dropping out in the chat um but when i

00:19:43,039 --> 00:19:46,720
think of indian testing

00:19:44,320 --> 00:19:48,960
so do i i i need an internet connection

00:19:46,720 --> 00:19:51,120
for this to work is that correct

00:19:48,960 --> 00:19:53,120
well uh you're testing the example that

00:19:51,120 --> 00:19:55,200
cyprus.org so it has to go there

00:19:53,120 --> 00:19:56,240
yes right okay and visit them right just

00:19:55,200 --> 00:19:58,160
like your browser

00:19:56,240 --> 00:19:59,440
but we we want to test your site but

00:19:58,160 --> 00:20:01,120
you're running locally

00:19:59,440 --> 00:20:02,880
yes right so i can swap that with

00:20:01,120 --> 00:20:04,960
localhost right

00:20:02,880 --> 00:20:06,400
so why don't we do that right because i

00:20:04,960 --> 00:20:08,559
think that might be

00:20:06,400 --> 00:20:10,320
kind of cool so you you know you can

00:20:08,559 --> 00:20:12,000
close the browser

00:20:10,320 --> 00:20:13,919
window yeah it looks like i uh i

00:20:12,000 --> 00:20:17,120
cancelled the cypress

00:20:13,919 --> 00:20:19,440
was that it's fine okay um

00:20:17,120 --> 00:20:20,480
so you probably want to open like your

00:20:19,440 --> 00:20:24,880
code editor

00:20:20,480 --> 00:20:24,880
right so we can write tests

00:20:26,960 --> 00:20:32,400
okay so when you did the

00:20:30,240 --> 00:20:34,480
cyprus open it it noticed that you

00:20:32,400 --> 00:20:36,000
didn't have any cyprus files so it

00:20:34,480 --> 00:20:38,080
scaffolded

00:20:36,000 --> 00:20:39,760
two things for you it's a folded cypress

00:20:38,080 --> 00:20:42,799
folder right

00:20:39,760 --> 00:20:46,159
in green that's where those integrations

00:20:42,799 --> 00:20:48,320
pack files were so you have integration

00:20:46,159 --> 00:20:50,240
right so if you expand with folder

00:20:48,320 --> 00:20:53,039
you'll find the example so

00:20:50,240 --> 00:20:54,559
so my code like yeah and this is how

00:20:53,039 --> 00:20:57,760
like a typical test looks right

00:20:54,559 --> 00:21:01,679
yeah um we use mocha syntax

00:20:57,760 --> 00:21:02,240
so we have it and then the name of a

00:21:01,679 --> 00:21:04,799
test

00:21:02,240 --> 00:21:05,679
and when inside you have called back and

00:21:04,799 --> 00:21:09,520
you have

00:21:05,679 --> 00:21:11,919
all commands chained of this

00:21:09,520 --> 00:21:13,600
like global site object so if you want

00:21:11,919 --> 00:21:14,880
to visit the site you say site visit and

00:21:13,600 --> 00:21:17,520
give a url

00:21:14,880 --> 00:21:20,880
if you want to find element using css

00:21:17,520 --> 00:21:23,280
selector it says i get and then selector

00:21:20,880 --> 00:21:25,679
and notice like in line 16 we found an

00:21:23,280 --> 00:21:27,760
element and then we clicked on that

00:21:25,679 --> 00:21:28,799
and cyprus has all these built in things

00:21:27,760 --> 00:21:31,520
where it says

00:21:28,799 --> 00:21:33,120
do i have this element no okay let me

00:21:31,520 --> 00:21:34,080
try again do i have this element no let

00:21:33,120 --> 00:21:36,000
me try again so

00:21:34,080 --> 00:21:37,520
it doesn't depend on like the way your

00:21:36,000 --> 00:21:40,159
application is written

00:21:37,520 --> 00:21:40,720
so you can use any framework it's what

00:21:40,159 --> 00:21:42,159
it does

00:21:40,720 --> 00:21:43,760
it sounds like it mimics the user

00:21:42,159 --> 00:21:44,720
experience so like the user doesn't know

00:21:43,760 --> 00:21:46,480
what my database

00:21:44,720 --> 00:21:47,840
tables are called but they just know

00:21:46,480 --> 00:21:48,880
that there's buttons and they can click

00:21:47,840 --> 00:21:51,120
them

00:21:48,880 --> 00:21:52,480
exactly and it has built-in things so

00:21:51,120 --> 00:21:53,600
for example before it clicks on the

00:21:52,480 --> 00:21:56,240
button it will check

00:21:53,600 --> 00:21:57,520
is my element covered by something else

00:21:56,240 --> 00:22:01,120
if yes i'll wait

00:21:57,520 --> 00:22:03,200
and i'll like paul until that model

00:22:01,120 --> 00:22:04,320
goes away uh maybe the button is

00:22:03,200 --> 00:22:05,919
disabled

00:22:04,320 --> 00:22:08,480
while like the app is doing something

00:22:05,919 --> 00:22:10,799
and when it enables it so the click will

00:22:08,480 --> 00:22:12,000
wait for the button to be enabled like

00:22:10,799 --> 00:22:14,080
all these building things like

00:22:12,000 --> 00:22:15,520
a real user would right so you don't

00:22:14,080 --> 00:22:18,320
have to think about things and

00:22:15,520 --> 00:22:19,919
add all these assertions yeah that's

00:22:18,320 --> 00:22:21,600
awesome

00:22:19,919 --> 00:22:25,200
so you want to write a desktop for your

00:22:21,600 --> 00:22:28,880
app yeah i mean we could write a

00:22:25,200 --> 00:22:32,320
attest to honestly so you're gonna

00:22:28,880 --> 00:22:33,360
my testing skills are kind of rusty uh i

00:22:32,320 --> 00:22:34,799
tend to

00:22:33,360 --> 00:22:36,400
i tend to do a lot of smoke tests when i

00:22:34,799 --> 00:22:37,039
do end in testing so like making sure

00:22:36,400 --> 00:22:40,640
that

00:22:37,039 --> 00:22:42,880
you know my twitch um

00:22:40,640 --> 00:22:44,080
twitch uh embed actually shows up on the

00:22:42,880 --> 00:22:45,840
page or

00:22:44,080 --> 00:22:47,280
that certain buttons buttons are

00:22:45,840 --> 00:22:48,720
existing um

00:22:47,280 --> 00:22:50,480
i used to have a login button which i

00:22:48,720 --> 00:22:51,679
removed but uh like things like have

00:22:50,480 --> 00:22:52,480
make sure the login button actually

00:22:51,679 --> 00:22:55,840
shows up

00:22:52,480 --> 00:22:56,400
um things like that so why don't why

00:22:55,840 --> 00:22:58,159
don't you do

00:22:56,400 --> 00:23:00,000
simple thing right like you have a title

00:22:58,159 --> 00:23:02,000
keeping it uh 100

00:23:00,000 --> 00:23:03,919
on the internet right like why don't we

00:23:02,000 --> 00:23:04,720
load the page and make sure this text is

00:23:03,919 --> 00:23:07,919
there

00:23:04,720 --> 00:23:09,360
yeah right i like that idea

00:23:07,919 --> 00:23:11,919
and we can we don't even have to test

00:23:09,360 --> 00:23:14,320
the local site right we can

00:23:11,919 --> 00:23:14,960
even though if you want start it locally

00:23:14,320 --> 00:23:18,080
we can

00:23:14,960 --> 00:23:18,720
yeah okay so why don't we do the

00:23:18,080 --> 00:23:21,600
following

00:23:18,720 --> 00:23:23,520
maybe invert cyprus integration just

00:23:21,600 --> 00:23:26,400
delete that examples folder

00:23:23,520 --> 00:23:28,880
completely all right like we see how

00:23:26,400 --> 00:23:30,880
it's integration

00:23:28,880 --> 00:23:33,120
leave a cypress right see how you have

00:23:30,880 --> 00:23:34,320
in cyprus like delete all the spec files

00:23:33,120 --> 00:23:38,720
because we don't need those

00:23:34,320 --> 00:23:41,200
got it but they kind of show like all

00:23:38,720 --> 00:23:41,919
capabilities of cyprus by default so

00:23:41,200 --> 00:23:46,960
someone

00:23:41,919 --> 00:23:46,960
yeah and just create like a new spec

00:23:48,840 --> 00:23:54,720
there

00:23:51,279 --> 00:23:57,120
so so usually like yes pack js or

00:23:54,720 --> 00:23:57,120
anything

00:23:58,559 --> 00:24:02,080
perfect and if you want to type

00:24:01,440 --> 00:24:05,600
something like

00:24:02,080 --> 00:24:08,960
it uh and then show

00:24:05,600 --> 00:24:14,720
it as yup and then the name of the text

00:24:08,960 --> 00:24:14,720
test would be probably shows title okay

00:24:15,440 --> 00:24:21,840
yep okay and this is a

00:24:18,799 --> 00:24:23,679
function and then a function yeah

00:24:21,840 --> 00:24:25,279
callback where we'll put all commands

00:24:23,679 --> 00:24:26,880
by the way if you don't provide a

00:24:25,279 --> 00:24:28,720
callback function it will

00:24:26,880 --> 00:24:30,159
still show the test but it will show it

00:24:28,720 --> 00:24:31,919
as skipped

00:24:30,159 --> 00:24:33,840
right kind of like to do so you will

00:24:31,919 --> 00:24:36,720
still see it it's just

00:24:33,840 --> 00:24:38,320
you haven't implemented it yeah okay and

00:24:36,720 --> 00:24:41,440
um

00:24:38,320 --> 00:24:43,520
did i get this correct um

00:24:41,440 --> 00:24:45,520
that it's going to have the arguments

00:24:43,520 --> 00:24:47,520
yeah perfect

00:24:45,520 --> 00:24:48,799
it's a callback function not just an

00:24:47,520 --> 00:24:52,720
object right

00:24:48,799 --> 00:24:55,919
but a callback function like um

00:24:52,720 --> 00:25:01,840
yeah and inside maybe just do

00:24:55,919 --> 00:25:01,840
psi dot visit

00:25:10,799 --> 00:25:14,559
okay so one thing uh notice that it

00:25:13,919 --> 00:25:17,919
actually doesn't

00:25:14,559 --> 00:25:20,400
stay side right because it's a global

00:25:17,919 --> 00:25:21,360
variable right when you run cypress test

00:25:20,400 --> 00:25:23,520
it will be

00:25:21,360 --> 00:25:25,679
available so the one thing the nice

00:25:23,520 --> 00:25:29,360
trick in this javascript project

00:25:25,679 --> 00:25:31,360
is to do this and i'll post it in your

00:25:29,360 --> 00:25:34,000
chat

00:25:31,360 --> 00:25:36,400
you see this triple slash reference

00:25:34,000 --> 00:25:39,200
types equals cyprus right if you

00:25:36,400 --> 00:25:40,840
uh just post it as this comment as a

00:25:39,200 --> 00:25:43,440
first

00:25:40,840 --> 00:25:47,600
line in in your file i

00:25:43,440 --> 00:25:47,600
put it in a chat or in zoom

00:25:48,159 --> 00:25:53,200
so you're saying the reference

00:25:53,559 --> 00:26:00,159
types uh

00:25:57,039 --> 00:26:00,799
and then cool close it but uh types uh

00:26:00,159 --> 00:26:03,039
did you

00:26:00,799 --> 00:26:03,039
spell

00:26:06,960 --> 00:26:12,240
interesting okay now do you see this now

00:26:10,080 --> 00:26:13,679
yeah right so now it understands

00:26:12,240 --> 00:26:14,720
everything because we include typescript

00:26:13,679 --> 00:26:18,080
definitions

00:26:14,720 --> 00:26:21,039
gotcha power variable okay so now uh

00:26:18,080 --> 00:26:21,919
you even in this javascript project it

00:26:21,039 --> 00:26:24,400
all works

00:26:21,919 --> 00:26:26,080
right out of a box and so if you hover

00:26:24,400 --> 00:26:27,919
over every command

00:26:26,080 --> 00:26:29,600
let's say visit it will actually show

00:26:27,919 --> 00:26:30,799
like health for this command that is

00:26:29,600 --> 00:26:32,159
nice it's nice to see the benefit of

00:26:30,799 --> 00:26:33,919
typescript uh

00:26:32,159 --> 00:26:36,480
in action too as well we definitely had

00:26:33,919 --> 00:26:37,279
some uh previously type scripted powered

00:26:36,480 --> 00:26:39,840
uh projects

00:26:37,279 --> 00:26:40,320
but um i've never actually leveraged vs

00:26:39,840 --> 00:26:42,320
code

00:26:40,320 --> 00:26:44,720
to use to see these properly so it's

00:26:42,320 --> 00:26:47,679
nice to see the value right there

00:26:44,720 --> 00:26:48,960
cyprus is so old it's it's written in

00:26:47,679 --> 00:26:52,559
coffeescript

00:26:48,960 --> 00:26:55,200
we now moved it away from to es6

00:26:52,559 --> 00:26:56,159
and type because when it first started

00:26:55,200 --> 00:26:58,080
right

00:26:56,159 --> 00:26:59,440
javascript was in such a bad shape where

00:26:58,080 --> 00:27:03,440
it was so much easier

00:26:59,440 --> 00:27:06,000
to program in coffeescript and so that's

00:27:03,440 --> 00:27:06,559
historic thing yeah yeah i mean i i did

00:27:06,000 --> 00:27:08,480
a lot of

00:27:06,559 --> 00:27:10,159
coffee script back in the day uh and i

00:27:08,480 --> 00:27:13,679
wanted to take a time out real quick and

00:27:10,159 --> 00:27:15,520
paul um paul won john um

00:27:13,679 --> 00:27:17,840
i'm pretty sure i got your last name one

00:27:15,520 --> 00:27:18,559
joey uh he wants to know the take of

00:27:17,840 --> 00:27:20,799
writing

00:27:18,559 --> 00:27:21,600
tests outside the main repo if that's a

00:27:20,799 --> 00:27:25,120
thing to

00:27:21,600 --> 00:27:26,880
take into consideration yeah so

00:27:25,120 --> 00:27:29,279
imagine you're just trying to evaluate

00:27:26,880 --> 00:27:31,200
cyprus well it's quite you know

00:27:29,279 --> 00:27:33,120
a big tool so you don't want to put it

00:27:31,200 --> 00:27:35,039
right in the main repo and have everyone

00:27:33,120 --> 00:27:36,159
install it when we do npm install or

00:27:35,039 --> 00:27:38,159
yarn install

00:27:36,159 --> 00:27:40,159
yeah so it's completely fine to kind of

00:27:38,159 --> 00:27:41,279
investigate it and do proof of concept

00:27:40,159 --> 00:27:44,159
with your tests

00:27:41,279 --> 00:27:45,760
in a separate repository oh right yeah

00:27:44,159 --> 00:27:49,039
because you can actually call it

00:27:45,760 --> 00:27:50,880
your own site live but

00:27:49,039 --> 00:27:53,200
after a while it would become hard to

00:27:50,880 --> 00:27:54,559
keep it up to date and in sync with main

00:27:53,200 --> 00:27:57,440
code

00:27:54,559 --> 00:27:59,120
our philosophy is that with time you

00:27:57,440 --> 00:28:00,240
really want to update the test and the

00:27:59,120 --> 00:28:03,200
code at the same time

00:28:00,240 --> 00:28:04,880
so when you push with commit it runs the

00:28:03,200 --> 00:28:07,039
test against that code

00:28:04,880 --> 00:28:10,000
and keeps it in sync but it's fine to

00:28:07,039 --> 00:28:11,840
start it in a separate repository

00:28:10,000 --> 00:28:14,320
okay interesting yeah and i could even

00:28:11,840 --> 00:28:17,039
see like if i only wanted to run tests

00:28:14,320 --> 00:28:18,240
like on netlify urls um like being able

00:28:17,039 --> 00:28:20,640
to actually leverage that

00:28:18,240 --> 00:28:21,919
new url uh and see when that changes

00:28:20,640 --> 00:28:23,440
yeah i could i honestly could see

00:28:21,919 --> 00:28:25,600
getting really crafty with the

00:28:23,440 --> 00:28:26,960
i'm sure the cypress community has uh

00:28:25,600 --> 00:28:27,919
already solved those problems so i don't

00:28:26,960 --> 00:28:30,640
need to

00:28:27,919 --> 00:28:31,279
solve those all but i think we'll solve

00:28:30,640 --> 00:28:34,320
this test

00:28:31,279 --> 00:28:35,120
and try to um yeah i guess so what do we

00:28:34,320 --> 00:28:37,120
want to test

00:28:35,120 --> 00:28:38,320
do you want to start site the site

00:28:37,120 --> 00:28:40,559
locally which in

00:28:38,320 --> 00:28:43,120
in a separate terminal and test like

00:28:40,559 --> 00:28:46,559
local host profile yeah let's do that

00:28:43,120 --> 00:28:48,720
let's do that um i could start my uh

00:28:46,559 --> 00:28:50,480
my next server and then we can uh

00:28:48,720 --> 00:28:51,679
practice that too as well so i've got

00:28:50,480 --> 00:28:55,360
the

00:28:51,679 --> 00:28:58,960
okay 3000 so here's the best practice

00:28:55,360 --> 00:29:01,520
take that url and go to the vs code

00:28:58,960 --> 00:29:02,399
and open cyprus.json so we had cyprus

00:29:01,520 --> 00:29:05,120
which is

00:29:02,399 --> 00:29:06,159
the thing and cyprus.json file but we

00:29:05,120 --> 00:29:07,679
scaffold it

00:29:06,159 --> 00:29:10,399
and this keeps like all the global

00:29:07,679 --> 00:29:12,240
settings yeah in this case

00:29:10,399 --> 00:29:13,679
of the settings that you want to change

00:29:12,240 --> 00:29:17,120
it's called base

00:29:13,679 --> 00:29:18,080
url single word is it a capital like

00:29:17,120 --> 00:29:21,120
this

00:29:18,080 --> 00:29:26,000
does it matter uh it's it's like base

00:29:21,120 --> 00:29:29,440
url it's like camel case right um

00:29:26,000 --> 00:29:33,760
yes okay and surrounded by double quotes

00:29:29,440 --> 00:29:36,159
yep uh

00:29:33,760 --> 00:29:37,760
yeah okay add a double quote around this

00:29:36,159 --> 00:29:41,039
that makes this a json file

00:29:37,760 --> 00:29:44,240
yes okay and so save it

00:29:41,039 --> 00:29:46,399
and now inside the title spec

00:29:44,240 --> 00:29:47,520
you can do side visit and because we put

00:29:46,399 --> 00:29:50,559
the base url

00:29:47,520 --> 00:29:52,480
you can just say uh no no no

00:29:50,559 --> 00:29:54,640
it will be added automatically oh right

00:29:52,480 --> 00:29:57,600
click slash yeah

00:29:54,640 --> 00:29:58,960
oh so like a string yeah got it put the

00:29:57,600 --> 00:30:01,600
tip

00:29:58,960 --> 00:30:04,880
and now start cyprus in another terminal

00:30:01,600 --> 00:30:04,880
and let's see if it works

00:30:05,039 --> 00:30:10,240
and so this leave it right yeah and then

00:30:12,559 --> 00:30:23,039
the moment of truth every time right yes

00:30:16,320 --> 00:30:25,520
it's a moment of truth okay

00:30:23,039 --> 00:30:26,960
excellent yeah i this is nice because i

00:30:25,520 --> 00:30:28,399
remember using like tools like night

00:30:26,960 --> 00:30:31,120
what i think was night watch

00:30:28,399 --> 00:30:32,080
was it um there's a couple other ones

00:30:31,120 --> 00:30:34,240
back in the day probably

00:30:32,080 --> 00:30:36,559
four years ago uh that was leveraging

00:30:34,240 --> 00:30:38,799
and it was um

00:30:36,559 --> 00:30:40,640
it was a lot there's a lot of setup and

00:30:38,799 --> 00:30:41,279
i i would probably only just get enough

00:30:40,640 --> 00:30:43,679
to like

00:30:41,279 --> 00:30:44,799
test the title and then move on but i

00:30:43,679 --> 00:30:46,000
like that there's a lot of built-in

00:30:44,799 --> 00:30:47,360
stuff too as well

00:30:46,000 --> 00:30:49,200
and i wonder is this all right now if

00:30:47,360 --> 00:30:52,720
something is not going right

00:30:49,200 --> 00:30:54,640
uh yeah i wonder

00:30:52,720 --> 00:30:56,320
oh that's interesting it just took a

00:30:54,640 --> 00:30:58,480
while from next oh you know what it is

00:30:56,320 --> 00:30:59,840
um i've got a lot of uh functions that

00:30:58,480 --> 00:31:02,480
are running

00:30:59,840 --> 00:31:04,240
to build the site the first time so um

00:31:02,480 --> 00:31:06,399
that might actually slow the test down

00:31:04,240 --> 00:31:08,399
but but notice this right so visit was

00:31:06,399 --> 00:31:12,000
smart enough i think by default will

00:31:08,399 --> 00:31:13,120
up to 60 seconds yeah right for the page

00:31:12,000 --> 00:31:14,960
to completely load

00:31:13,120 --> 00:31:16,880
and visit will fail if your server

00:31:14,960 --> 00:31:19,039
doesn't respond if it doesn't respond to

00:31:16,880 --> 00:31:21,279
something like text.html

00:31:19,039 --> 00:31:22,559
or if it doesn't respond to something

00:31:21,279 --> 00:31:25,919
like 200

00:31:22,559 --> 00:31:26,240
status code if unload event doesn't fire

00:31:25,919 --> 00:31:28,159
if

00:31:26,240 --> 00:31:30,559
there are any errors thrown out like by

00:31:28,159 --> 00:31:31,600
default it already checks your it's like

00:31:30,559 --> 00:31:34,559
a smoke test

00:31:31,600 --> 00:31:35,519
right now yeah so now we can see this

00:31:34,559 --> 00:31:38,000
loading right

00:31:35,519 --> 00:31:39,279
so we want to check if keeping it on the

00:31:38,000 --> 00:31:44,080
internet

00:31:39,279 --> 00:31:47,760
is there yeah so the best thing for this

00:31:44,080 --> 00:31:50,559
is probably to use side that contains

00:31:47,760 --> 00:31:51,279
command okay all right and so don't

00:31:50,559 --> 00:31:55,039
close anything

00:31:51,279 --> 00:31:57,679
just go straight to your editor yep

00:31:55,039 --> 00:32:01,840
and just say after that like next line

00:31:57,679 --> 00:32:01,840
side that contains

00:32:02,240 --> 00:32:05,919
and then just the text that you wanted

00:32:04,240 --> 00:32:08,399
yep

00:32:05,919 --> 00:32:09,840
and then if i hit save will this update

00:32:08,399 --> 00:32:13,919
here

00:32:09,840 --> 00:32:15,039
wait wait wait go to a browser yeah a

00:32:13,919 --> 00:32:18,240
browser that

00:32:15,039 --> 00:32:21,519
is already running yes

00:32:18,240 --> 00:32:26,080
okay notice this is already there

00:32:21,519 --> 00:32:29,200
yeah and so here's a cool thing

00:32:26,080 --> 00:32:31,120
when you hover over command it actually

00:32:29,200 --> 00:32:32,960
uh shows the element of the found you

00:32:31,120 --> 00:32:34,399
see it's highlighted yeah so you know

00:32:32,960 --> 00:32:35,360
that you didn't accidentally found the

00:32:34,399 --> 00:32:38,080
text somewhere else

00:32:35,360 --> 00:32:40,240
yeah and another thing it's a live

00:32:38,080 --> 00:32:41,600
application in that iframe

00:32:40,240 --> 00:32:43,039
but when you hover over different

00:32:41,600 --> 00:32:44,640
commands you will notice that we

00:32:43,039 --> 00:32:46,720
actually take dump snapshots when we

00:32:44,640 --> 00:32:48,799
notice something has changed

00:32:46,720 --> 00:32:51,679
so you will see your application how it

00:32:48,799 --> 00:32:54,559
looked at that particular moment

00:32:51,679 --> 00:32:55,600
right in time so you'll you'll see how

00:32:54,559 --> 00:32:59,919
it worked

00:32:55,600 --> 00:33:02,159
all right yeah that is a

00:32:59,919 --> 00:33:03,600
pretty nifty and um i could see i could

00:33:02,159 --> 00:33:07,039
see why people a lot of people are

00:33:03,600 --> 00:33:09,200
sort of excited about cyprus um

00:33:07,039 --> 00:33:10,640
so i'm curious at this point since we

00:33:09,200 --> 00:33:12,559
have like the like we

00:33:10,640 --> 00:33:14,320
have roughly about 25 minutes and folks

00:33:12,559 --> 00:33:17,840
thanks for joining in and saying hello

00:33:14,320 --> 00:33:19,200
um i think uh diverse i these these

00:33:17,840 --> 00:33:20,240
twitch handles are super hard to say out

00:33:19,200 --> 00:33:22,399
loud but uh

00:33:20,240 --> 00:33:23,360
i'm gonna just power through and say

00:33:22,399 --> 00:33:26,000
diverse the

00:33:23,360 --> 00:33:26,640
got gam uh note applications how easy to

00:33:26,000 --> 00:33:29,679
set up

00:33:26,640 --> 00:33:31,360
uh cypress test asking for a friend um

00:33:29,679 --> 00:33:32,799
i think we literally just set up some

00:33:31,360 --> 00:33:34,480
cypress tests and this isn't

00:33:32,799 --> 00:33:36,720
this is an xjs application so it is

00:33:34,480 --> 00:33:39,039
powered by node um

00:33:36,720 --> 00:33:40,720
but hopefully that answers your question

00:33:39,039 --> 00:33:42,720
and then sean saying he loves the uh the

00:33:40,720 --> 00:33:45,360
cypress ui

00:33:42,720 --> 00:33:47,200
thank you i i would say for a node

00:33:45,360 --> 00:33:47,600
application you might think how easy it

00:33:47,200 --> 00:33:49,600
is to

00:33:47,600 --> 00:33:51,440
test the code not the website because

00:33:49,600 --> 00:33:53,039
the code that's running in node like

00:33:51,440 --> 00:33:55,039
access the file system

00:33:53,039 --> 00:33:57,600
right right now cyprus is not built for

00:33:55,039 --> 00:33:58,080
that we only test code that runs in the

00:33:57,600 --> 00:34:00,720
browser

00:33:58,080 --> 00:34:03,279
actual website and you can also unit

00:34:00,720 --> 00:34:05,919
test any code that can run in a browser

00:34:03,279 --> 00:34:07,279
yeah so like no file system access from

00:34:05,919 --> 00:34:10,399
your test you can access

00:34:07,279 --> 00:34:12,720
node but it's a different thing uh so

00:34:10,399 --> 00:34:14,159
we test everything with runs in browser

00:34:12,720 --> 00:34:17,280
brian let's

00:34:14,159 --> 00:34:18,639
see github action in action yeah i feel

00:34:17,280 --> 00:34:20,480
like we should be taking action with

00:34:18,639 --> 00:34:23,760
github actions yeah um pun

00:34:20,480 --> 00:34:25,040
intended so i should be able to i'm

00:34:23,760 --> 00:34:25,520
hypothetically i should be able to grab

00:34:25,040 --> 00:34:28,320
this

00:34:25,520 --> 00:34:28,879
basic action and it would run my basic

00:34:28,320 --> 00:34:31,359
test that i

00:34:28,879 --> 00:34:32,399
have already yes but remember what you

00:34:31,359 --> 00:34:35,520
did before right

00:34:32,399 --> 00:34:38,000
you had to use yarn to install yeah you

00:34:35,520 --> 00:34:41,599
had to start application

00:34:38,000 --> 00:34:44,480
and uh so fine

00:34:41,599 --> 00:34:46,399
so what what i've done in my repository

00:34:44,480 --> 00:34:47,679
when i was doing this github action was

00:34:46,399 --> 00:34:50,800
provide examples

00:34:47,679 --> 00:34:51,599
so this is pretty common case to use

00:34:50,800 --> 00:34:53,359
yarn

00:34:51,599 --> 00:34:54,879
right it's pretty common case to start

00:34:53,359 --> 00:34:57,839
application

00:34:54,879 --> 00:35:00,240
and then run the test so you notice like

00:34:57,839 --> 00:35:03,280
right above basic we have

00:35:00,240 --> 00:35:05,040
a long list of examples right like how

00:35:03,280 --> 00:35:08,079
to do things like start server

00:35:05,040 --> 00:35:09,599
before running the test is right there

00:35:08,079 --> 00:35:11,119
right like right in the middle so if you

00:35:09,599 --> 00:35:14,160
search for like

00:35:11,119 --> 00:35:14,560
slightly lower things yep so you wanna

00:35:14,160 --> 00:35:17,520
like

00:35:14,560 --> 00:35:19,200
click on start server right so this is

00:35:17,520 --> 00:35:21,440
the action

00:35:19,200 --> 00:35:22,480
that probably is more appropriate for us

00:35:21,440 --> 00:35:24,400
yeah

00:35:22,480 --> 00:35:25,680
so basically you can configure the

00:35:24,400 --> 00:35:29,040
github actions using

00:35:25,680 --> 00:35:29,760
with and then provide settings in that

00:35:29,040 --> 00:35:32,000
action

00:35:29,760 --> 00:35:33,839
so in this case our action understands

00:35:32,000 --> 00:35:34,960
that if you pass start you probably want

00:35:33,839 --> 00:35:38,079
to execute this

00:35:34,960 --> 00:35:38,880
in the background and then cyprus will

00:35:38,079 --> 00:35:40,560
run the test

00:35:38,880 --> 00:35:42,160
and then github actions will clean up

00:35:40,560 --> 00:35:43,599
all those background processes

00:35:42,160 --> 00:35:45,200
so i think we should probably do

00:35:43,599 --> 00:35:47,599
something like this let's see yeah

00:35:45,200 --> 00:35:50,079
and i can put my my next dev which i

00:35:47,599 --> 00:35:51,440
think actually is my mpn start

00:35:50,079 --> 00:35:53,200
i might have had that set up you can

00:35:51,440 --> 00:35:54,720
always check it down yeah

00:35:53,200 --> 00:35:56,800
but uh i'm gonna go ahead and add this

00:35:54,720 --> 00:35:58,880
to my actions folder

00:35:56,800 --> 00:36:01,119
yeah which i have in my workflows and i

00:35:58,880 --> 00:36:04,400
have one action already so we'll

00:36:01,119 --> 00:36:07,599
go ahead and add another file

00:36:04,400 --> 00:36:10,480
and call it cyprus so i remember

00:36:07,599 --> 00:36:10,480
that is what it is

00:36:11,680 --> 00:36:15,280
and then i had some yeah i promised to

00:36:14,560 --> 00:36:20,480
check this

00:36:15,280 --> 00:36:20,480
and i think npm start higher

00:36:22,720 --> 00:36:26,240
where are my scripts there we go

00:36:24,320 --> 00:36:30,960
actually i don't have start i just have

00:36:26,240 --> 00:36:34,160
npm yeah well yeah i do have start

00:36:30,960 --> 00:36:35,680
oh there it is next start yeah which um

00:36:34,160 --> 00:36:37,359
yeah we'll just go with that we'll just

00:36:35,680 --> 00:36:38,720
leave it as this

00:36:37,359 --> 00:36:40,000
because i don't know if i actually need

00:36:38,720 --> 00:36:42,400
i don't really need the dev server

00:36:40,000 --> 00:36:44,320
running but only i would think that

00:36:42,400 --> 00:36:45,760
do we want to use yarn to install

00:36:44,320 --> 00:36:49,920
probably yes

00:36:45,760 --> 00:36:49,920
so to use yarn um

00:36:50,079 --> 00:36:54,320
you we have to look at the readme of

00:36:52,960 --> 00:36:57,359
action i already forgot

00:36:54,320 --> 00:37:00,079
i think it it it looks if you have

00:36:57,359 --> 00:37:01,520
yarn.log file and if yes uh if you

00:37:00,079 --> 00:37:04,700
search for yarn

00:37:01,520 --> 00:37:06,000
yeah we're a bunch of

00:37:04,700 --> 00:37:07,599
[Music]

00:37:06,000 --> 00:37:10,079
let's see if it let's just see if it

00:37:07,599 --> 00:37:10,560
works okay yeah it says the waffle the

00:37:10,079 --> 00:37:13,920
unlock

00:37:10,560 --> 00:37:15,359
file is found okay so it should be fine

00:37:13,920 --> 00:37:18,960
by default

00:37:15,359 --> 00:37:21,119
okay okay let's commit and push it

00:37:18,960 --> 00:37:22,720
excellent so i know that i can do a

00:37:21,119 --> 00:37:24,640
terminal uh if it doesn't show i'm not

00:37:22,720 --> 00:37:26,720
really a vs code user i've been

00:37:24,640 --> 00:37:28,079
practicing it for the past uh couple

00:37:26,720 --> 00:37:30,960
months

00:37:28,079 --> 00:37:32,480
uh i'm more of a vim person so all these

00:37:30,960 --> 00:37:35,680
files are good to add these

00:37:32,480 --> 00:37:37,440
uh json in the cypress folder yes yeah

00:37:35,680 --> 00:37:38,800
so we definitely modified package.json

00:37:37,440 --> 00:37:41,040
right we added

00:37:38,800 --> 00:37:41,920
cypress depend yarn lock automatically

00:37:41,040 --> 00:37:44,640
generated

00:37:41,920 --> 00:37:45,520
and cypress has cyprus folder and type

00:37:44,640 --> 00:37:49,520
json

00:37:45,520 --> 00:37:51,760
and you added you have workflow file

00:37:49,520 --> 00:37:53,760
by the way i'm i'm a big fan of having

00:37:51,760 --> 00:37:54,960
multiple workflow files like don't put

00:37:53,760 --> 00:37:57,359
everything in one

00:37:54,960 --> 00:37:58,640
workflow just keep them separate i'm a

00:37:57,359 --> 00:38:02,240
big fan because i've seen

00:37:58,640 --> 00:38:03,599
people uh put it all in one and

00:38:02,240 --> 00:38:06,480
actually so github actions does have a

00:38:03,599 --> 00:38:09,839
limit of how big your your file can be

00:38:06,480 --> 00:38:12,480
like um uh as far as like kb's and i've

00:38:09,839 --> 00:38:14,720
actually seen people hit that limit so

00:38:12,480 --> 00:38:16,960
there we uh that's also another good

00:38:14,720 --> 00:38:18,160
reason to separate that stuff as well

00:38:16,960 --> 00:38:20,160
uh yeah it looks like the chat's

00:38:18,160 --> 00:38:23,520
starting to pick up a bit too as well

00:38:20,160 --> 00:38:26,000
um order pizza if the test pass actually

00:38:23,520 --> 00:38:27,440
i need to write that actually um i

00:38:26,000 --> 00:38:28,240
learned from hashicorp that they

00:38:27,440 --> 00:38:31,359
actually have

00:38:28,240 --> 00:38:34,160
a way to provision pizza

00:38:31,359 --> 00:38:37,599
the domino's api is actually pretty good

00:38:34,160 --> 00:38:39,760
for anybody who is who is who cares

00:38:37,599 --> 00:38:41,680
by the way um so one thing we use to

00:38:39,760 --> 00:38:42,000
actually test our action right so github

00:38:41,680 --> 00:38:44,640
has

00:38:42,000 --> 00:38:46,480
bunch of stuff for testing actions but

00:38:44,640 --> 00:38:49,520
they're all kind of like you know stuff

00:38:46,480 --> 00:38:49,920
not scaffold like sandbox yeah right

00:38:49,520 --> 00:38:52,000
things

00:38:49,920 --> 00:38:52,960
and then you kind of make sure the right

00:38:52,000 --> 00:38:55,599
calls are made

00:38:52,960 --> 00:38:56,400
i i believe and i've used it in my own

00:38:55,599 --> 00:38:58,400
actions

00:38:56,400 --> 00:39:00,320
but for this particular github action if

00:38:58,400 --> 00:39:02,800
you look at our repository

00:39:00,320 --> 00:39:05,839
right we do something else if you look

00:39:02,800 --> 00:39:09,440
at our github workflows folder

00:39:05,839 --> 00:39:12,800
uh like if you scroll all the way up

00:39:09,440 --> 00:39:16,000
right so if you look at our close

00:39:12,800 --> 00:39:18,560
boom we actually run this action in a

00:39:16,000 --> 00:39:21,760
bunch of scenarios where every scenario

00:39:18,560 --> 00:39:23,920
is a subfolder in examples

00:39:21,760 --> 00:39:26,720
and the way you use local action notice

00:39:23,920 --> 00:39:29,520
like for example firefox on line 32.

00:39:26,720 --> 00:39:31,920
so this is an example how to run cypress

00:39:29,520 --> 00:39:33,599
test in a firefox because github action

00:39:31,920 --> 00:39:35,520
environment by default

00:39:33,599 --> 00:39:37,920
has firefox pre-installed just like

00:39:35,520 --> 00:39:41,119
chrome right browser

00:39:37,920 --> 00:39:42,000
so we actually do uses and then local

00:39:41,119 --> 00:39:45,040
file path

00:39:42,000 --> 00:39:48,000
so this repository test itself

00:39:45,040 --> 00:39:48,800
in a different scenarios like complete

00:39:48,000 --> 00:39:50,240
thing

00:39:48,800 --> 00:39:53,040
all right and that's how we kind of know

00:39:50,240 --> 00:39:56,320
that it works yeah

00:39:53,040 --> 00:39:58,960
yeah excellent and uh i've just

00:39:56,320 --> 00:40:00,240
pushed up my um i guess i can start yeah

00:39:58,960 --> 00:40:03,520
yeah

00:40:00,240 --> 00:40:03,520
look at the actions right like

00:40:04,720 --> 00:40:08,160
so our workflow was configured on push

00:40:07,359 --> 00:40:09,680
right so it

00:40:08,160 --> 00:40:11,599
should already be running oh you know

00:40:09,680 --> 00:40:14,640
what yeah you're right um

00:40:11,599 --> 00:40:16,960
so i don't need to create a pr all right

00:40:14,640 --> 00:40:19,359
so if you click on actions oh i see it's

00:40:16,960 --> 00:40:19,359
running

00:40:20,480 --> 00:40:25,040
excellent yeah i see our new visualizer

00:40:22,480 --> 00:40:28,240
ui yes

00:40:25,040 --> 00:40:29,920
just launched this week uh we'd also

00:40:28,240 --> 00:40:34,240
click through and see

00:40:29,920 --> 00:40:38,000
yeah the job running as well okay so

00:40:34,240 --> 00:40:40,560
setup job is uh varana oh that doesn't

00:40:38,000 --> 00:40:40,560
look right

00:40:41,440 --> 00:40:46,319
yeah it looks like next start failed

00:40:44,800 --> 00:40:47,839
see i think i'm gonna have to use next

00:40:46,319 --> 00:40:49,599
dev um

00:40:47,839 --> 00:40:51,280
i've actually never used next start i

00:40:49,599 --> 00:40:53,440
know it's actually built in a template

00:40:51,280 --> 00:40:54,480
but i think i'm gonna need to uh switch

00:40:53,440 --> 00:40:55,920
that out

00:40:54,480 --> 00:40:57,680
this is something interesting before you

00:40:55,920 --> 00:40:59,680
do that right yeah

00:40:57,680 --> 00:41:01,119
notice how cyprus actually gives you an

00:40:59,680 --> 00:41:03,040
error it says okay

00:41:01,119 --> 00:41:06,079
when i started i know that you define

00:41:03,040 --> 00:41:08,560
base url so we tried binging that url

00:41:06,079 --> 00:41:09,599
a couple of times right and it has not

00:41:08,560 --> 00:41:12,079
responded

00:41:09,599 --> 00:41:13,599
um so this is interesting because your

00:41:12,079 --> 00:41:15,760
server probably takes a little bit

00:41:13,599 --> 00:41:17,200
longer than we expected

00:41:15,760 --> 00:41:19,119
yeah and i think we noticed that too

00:41:17,200 --> 00:41:21,040
when we first opened it it took a little

00:41:19,119 --> 00:41:24,640
bit to do the build which i should

00:41:21,040 --> 00:41:26,800
definitely fix later but uh for now

00:41:24,640 --> 00:41:28,560
it's fine if you go to our action

00:41:26,800 --> 00:41:29,200
because it's such a common use case

00:41:28,560 --> 00:41:31,280
right for

00:41:29,200 --> 00:41:32,800
the initial server to take a while to

00:41:31,280 --> 00:41:35,359
build and transpile everything

00:41:32,800 --> 00:41:37,200
if you look at our examples you can

00:41:35,359 --> 00:41:40,319
actually wait for url to

00:41:37,200 --> 00:41:41,839
respond so if you go back to the readme

00:41:40,319 --> 00:41:46,000
file

00:41:41,839 --> 00:41:48,400
and search for weight like radio

00:41:46,000 --> 00:41:49,839
you can just see how it says wait on

00:41:48,400 --> 00:41:51,920
yeah you can just add this as a

00:41:49,839 --> 00:41:54,240
parameter to our action and then it will

00:41:51,920 --> 00:41:56,960
start you serving a background

00:41:54,240 --> 00:41:58,079
being that url for updating up to like a

00:41:56,960 --> 00:42:00,640
minute or two

00:41:58,079 --> 00:42:02,319
all right and once it responds then it

00:42:00,640 --> 00:42:04,880
will kick off cyprus

00:42:02,319 --> 00:42:05,839
excellent we can just try that all right

00:42:04,880 --> 00:42:08,319
yeah let's do

00:42:05,839 --> 00:42:08,319
let's try that

00:42:12,560 --> 00:42:21,119
we'll make sure this is 3000 as well

00:42:16,240 --> 00:42:21,119
yep okay i think this would be

00:42:26,800 --> 00:42:33,040
not the best uh commit message but

00:42:30,000 --> 00:42:33,040
we'll we'll run with it

00:42:35,200 --> 00:42:39,280
excellent it's fine it's fine

00:42:39,599 --> 00:42:44,160
trigger our new actions and i'm still

00:42:40,880 --> 00:42:46,160
getting used to this uh dark mode uh

00:42:44,160 --> 00:42:47,680
this might not not a popular opinion but

00:42:46,160 --> 00:42:51,119
i'm not a fan of dark mode

00:42:47,680 --> 00:42:53,280
just in general i love light mode um

00:42:51,119 --> 00:42:55,359
but you know we gotta wait i gotta find

00:42:53,280 --> 00:42:57,520
bugs so i need to i need to use this

00:42:55,359 --> 00:43:00,960
thing

00:42:57,520 --> 00:43:02,400
it's a little bit too dark a little too

00:43:00,960 --> 00:43:05,920
high contrasty you know

00:43:02,400 --> 00:43:09,359
yeah i think like maybe slightly less

00:43:05,920 --> 00:43:10,240
dark would be nice i'm a big fan of vs

00:43:09,359 --> 00:43:12,160
code dark mode

00:43:10,240 --> 00:43:14,079
right in dark teams yeah i'm not a big

00:43:12,160 --> 00:43:17,119
fan of a browser duck mode

00:43:14,079 --> 00:43:19,359
yeah this uh this is easy on the eyes

00:43:17,119 --> 00:43:21,599
and i think everything you need to see

00:43:19,359 --> 00:43:22,800
um is there and it has a nice contrast

00:43:21,599 --> 00:43:25,359
between the different levels

00:43:22,800 --> 00:43:26,720
of where you're looking at um i think we

00:43:25,359 --> 00:43:28,480
have a lot more

00:43:26,720 --> 00:43:30,079
iterations that are coming down the road

00:43:28,480 --> 00:43:33,119
uh we actually have

00:43:30,079 --> 00:43:35,359
um well we're calling it uh i guess

00:43:33,119 --> 00:43:36,880
code name color mode uh but be able to

00:43:35,359 --> 00:43:39,119
do like um

00:43:36,880 --> 00:43:41,280
like the contrast for red green

00:43:39,119 --> 00:43:42,560
colorblind or accessibility

00:43:41,280 --> 00:43:44,400
that's all going to be built in so you

00:43:42,560 --> 00:43:45,839
could actually leverage different not

00:43:44,400 --> 00:43:46,880
just dark mode and light mode but you'll

00:43:45,839 --> 00:43:49,440
be able to leverage

00:43:46,880 --> 00:43:49,920
different modes i've heard about that

00:43:49,440 --> 00:43:53,839
that's

00:43:49,920 --> 00:43:54,480
really nice yeah and i think we um

00:43:53,839 --> 00:43:55,680
honestly

00:43:54,480 --> 00:43:58,000
i don't know if we even announced that

00:43:55,680 --> 00:43:59,680
but anyway it's out there

00:43:58,000 --> 00:44:02,960
it's all good yeah i think our ceo

00:43:59,680 --> 00:44:02,960
actually did mention on twitter

00:44:03,839 --> 00:44:08,319
so the one thing you notice that um it

00:44:06,480 --> 00:44:11,520
installs things right

00:44:08,319 --> 00:44:15,599
um wait it i think look it says

00:44:11,520 --> 00:44:19,040
exit status one from next start

00:44:15,599 --> 00:44:23,680
yeah i think next start is not gonna

00:44:19,040 --> 00:44:25,280
not gonna work for us i'll need next dev

00:44:23,680 --> 00:44:26,960
because i think there's some extra uh

00:44:25,280 --> 00:44:27,920
but ground cover you probably then you

00:44:26,960 --> 00:44:31,119
have to do like uh

00:44:27,920 --> 00:44:36,400
yarn yard install no

00:44:31,119 --> 00:44:38,000
like yarn next death because next is a

00:44:36,400 --> 00:44:39,359
locally defined dependency so

00:44:38,000 --> 00:44:41,040
why don't you try it from a terminal

00:44:39,359 --> 00:44:42,960
let's let's see if it works locally we

00:44:41,040 --> 00:44:45,200
see our next dev

00:44:42,960 --> 00:44:47,119
all right because we don't have anything

00:44:45,200 --> 00:44:49,760
um

00:44:47,119 --> 00:44:50,240
installed globally i think you started

00:44:49,760 --> 00:44:53,280
in a

00:44:50,240 --> 00:44:56,800
in a second tab

00:44:53,280 --> 00:45:04,000
all right uh this one is cypress

00:44:56,800 --> 00:45:07,119
okay okay okay so now try your next dev

00:45:04,000 --> 00:45:08,720
okay this this seems like that's the

00:45:07,119 --> 00:45:12,079
command to be

00:45:08,720 --> 00:45:16,839
yeah i think i'm gonna run with this one

00:45:12,079 --> 00:45:19,839
and then uh yeah here we go doing it

00:45:16,839 --> 00:45:19,839
live

00:45:27,680 --> 00:45:30,960
so if you look at the examples in our

00:45:30,240 --> 00:45:34,640
repo

00:45:30,960 --> 00:45:36,400
you will see um how you can for example

00:45:34,640 --> 00:45:40,400
store screenshots

00:45:36,400 --> 00:45:42,640
videos right like on use on github

00:45:40,400 --> 00:45:43,920
so that oh excellent you're leveraging

00:45:42,640 --> 00:45:46,000
the artifacts

00:45:43,920 --> 00:45:48,000
yep yes yeah so you will download the

00:45:46,000 --> 00:45:50,000
zip the only thing there is that the

00:45:48,000 --> 00:45:52,240
screenshots will be generated

00:45:50,000 --> 00:45:53,839
if a test fails then it takes screenshot

00:45:52,240 --> 00:45:55,599
automatically at that particular

00:45:53,839 --> 00:45:59,200
and so you'll see the commands like the

00:45:55,599 --> 00:46:00,800
website uh videos are always generated

00:45:59,200 --> 00:46:02,400
right so if you do instead of a yarn

00:46:00,800 --> 00:46:05,119
cypress open if you decide

00:46:02,400 --> 00:46:05,839
you are in cyprus run that's the command

00:46:05,119 --> 00:46:09,119
that runs

00:46:05,839 --> 00:46:11,599
you know headless browser right and

00:46:09,119 --> 00:46:12,960
just save the video yeah i think paul

00:46:11,599 --> 00:46:14,880
was actually mentioning this uh

00:46:12,960 --> 00:46:16,000
as well that you can prevent merges if

00:46:14,880 --> 00:46:19,280
they fail

00:46:16,000 --> 00:46:20,960
um which this uh conditional here is um

00:46:19,280 --> 00:46:24,240
you can do whatever you want after a

00:46:20,960 --> 00:46:26,400
failure um so i think this is uh

00:46:24,240 --> 00:46:28,240
these so basically i guess as you were

00:46:26,400 --> 00:46:29,839
explaining uh if this fails that

00:46:28,240 --> 00:46:32,400
screenshot will get uploaded

00:46:29,839 --> 00:46:33,040
um right to the actual failure which is

00:46:32,400 --> 00:46:35,040
nice like

00:46:33,040 --> 00:46:36,480
um it's a nice little feature i guess

00:46:35,040 --> 00:46:39,040
that not a lot of people think of the

00:46:36,480 --> 00:46:39,520
sort of like the green and the red or

00:46:39,040 --> 00:46:42,000
the

00:46:39,520 --> 00:46:44,319
the good and the bad um so that's a nice

00:46:42,000 --> 00:46:46,720
little addition there

00:46:44,319 --> 00:46:47,680
i i've been looking at uh expression

00:46:46,720 --> 00:46:49,599
syntax

00:46:47,680 --> 00:46:50,800
for github actions it's pretty powerful

00:46:49,599 --> 00:46:53,839
like you can set

00:46:50,800 --> 00:46:55,760
output variables use them in other jobs

00:46:53,839 --> 00:46:58,800
and stuff like it's

00:46:55,760 --> 00:46:58,800
i it's nice

00:46:58,960 --> 00:47:03,680
it's so if this is a v2 right of github

00:47:01,920 --> 00:47:06,160
action the first syntax

00:47:03,680 --> 00:47:07,280
but yeah when it just came out like we i

00:47:06,160 --> 00:47:11,680
i wasn't big fan

00:47:07,280 --> 00:47:13,760
at all but now it's all good

00:47:11,680 --> 00:47:15,520
yep looks like we're getting some okay

00:47:13,760 --> 00:47:18,640
yeah yeah yeah i see what it says

00:47:15,520 --> 00:47:19,839
starting right excellent yeah i actually

00:47:18,640 --> 00:47:21,440
picked this site because i was thinking

00:47:19,839 --> 00:47:22,079
it would be a simple example and then as

00:47:21,440 --> 00:47:23,359
i

00:47:22,079 --> 00:47:24,559
am seeing this i'm like oh yeah there's

00:47:23,359 --> 00:47:26,000
actually a lot of complicated things

00:47:24,559 --> 00:47:27,119
happening in the build

00:47:26,000 --> 00:47:28,960
that i probably should have grabbed my

00:47:27,119 --> 00:47:29,680
other site um that was a little more

00:47:28,960 --> 00:47:32,640
simpler but

00:47:29,680 --> 00:47:33,200
you know you live and you learn what is

00:47:32,640 --> 00:47:36,240
say

00:47:33,200 --> 00:47:36,960
module not found something uh it's

00:47:36,240 --> 00:47:38,480
because

00:47:36,960 --> 00:47:40,240
all right so it's because i'm using

00:47:38,480 --> 00:47:40,960
relay that's actually doing persistent

00:47:40,240 --> 00:47:43,119
queries

00:47:40,960 --> 00:47:44,800
so when i said this is a complicated

00:47:43,119 --> 00:47:45,680
example this actually is a complicated

00:47:44,800 --> 00:47:48,880
example

00:47:45,680 --> 00:47:52,960
um so i'll need to actually

00:47:48,880 --> 00:47:56,240
run relay before this uh which is a nice

00:47:52,960 --> 00:47:58,240
um now we can either we only have

00:47:56,240 --> 00:47:59,440
roughly 10 minutes we can either dig in

00:47:58,240 --> 00:48:01,280
and do this so i can grab

00:47:59,440 --> 00:48:02,720
i can copy and paste and do this in the

00:48:01,280 --> 00:48:04,960
easier project

00:48:02,720 --> 00:48:06,720
no we're already there right yeah why

00:48:04,960 --> 00:48:08,880
don't we instead of localhost right

00:48:06,720 --> 00:48:10,400
test the production site that you have

00:48:08,880 --> 00:48:12,079
yeah actually that's a great idea change

00:48:10,400 --> 00:48:15,280
url in cyprus js

00:48:12,079 --> 00:48:18,480
in cyprus json file

00:48:15,280 --> 00:48:21,200
and instead of localhost just set

00:48:18,480 --> 00:48:22,319
your actual yeah that's actually a good

00:48:21,200 --> 00:48:25,599
idea

00:48:22,319 --> 00:48:27,520
um but the fact that we're already there

00:48:25,599 --> 00:48:29,040
it's going to make me uh want to finish

00:48:27,520 --> 00:48:32,000
this later

00:48:29,040 --> 00:48:32,400
absolutely and feel free to ping me on

00:48:32,000 --> 00:48:36,079
any

00:48:32,400 --> 00:48:37,920
of our chat channels on twitter

00:48:36,079 --> 00:48:39,680
and with base url you can override for

00:48:37,920 --> 00:48:42,480
example even in your

00:48:39,680 --> 00:48:43,200
yaml file for environment variable so

00:48:42,480 --> 00:48:45,119
you'll

00:48:43,200 --> 00:48:46,559
you can build in your local site tested

00:48:45,119 --> 00:48:48,319
so in this case we don't need anything

00:48:46,559 --> 00:48:52,000
here like we don't need any

00:48:48,319 --> 00:48:54,559
public block is gone right yeah

00:48:52,000 --> 00:48:56,640
um you can override so that you run

00:48:54,559 --> 00:48:58,960
local site deployed and then say

00:48:56,640 --> 00:49:00,319
test this side and maybe even run like

00:48:58,960 --> 00:49:03,599
just subset of tests

00:49:00,319 --> 00:49:06,559
like some small okay

00:49:03,599 --> 00:49:08,720
so with the base url because like what

00:49:06,559 --> 00:49:11,760
what and practice i've had before

00:49:08,720 --> 00:49:13,200
is that you don't like testing live urls

00:49:11,760 --> 00:49:13,839
has always been a super like a big

00:49:13,200 --> 00:49:15,599
challenge

00:49:13,839 --> 00:49:16,880
so it seems like you can actually you

00:49:15,599 --> 00:49:17,520
could have tests running on the base

00:49:16,880 --> 00:49:19,599
uriel

00:49:17,520 --> 00:49:21,200
uh which is localhost and test running

00:49:19,599 --> 00:49:25,200
on the live site as well

00:49:21,200 --> 00:49:27,280
um which is yeah pretty elegant

00:49:25,200 --> 00:49:28,960
and github actions oh so my favorite

00:49:27,280 --> 00:49:31,119
thing about github action is combining

00:49:28,960 --> 00:49:33,760
with github pages

00:49:31,119 --> 00:49:35,839
because in in your workflow you can say

00:49:33,760 --> 00:49:37,359
on deployment event if status is

00:49:35,839 --> 00:49:40,319
successful that means if

00:49:37,359 --> 00:49:41,359
when github pages have deployed you get

00:49:40,319 --> 00:49:42,960
a notification work

00:49:41,359 --> 00:49:44,880
your workflow around and then you can

00:49:42,960 --> 00:49:46,079
run like some smoke test against that

00:49:44,880 --> 00:49:48,960
using cyprus

00:49:46,079 --> 00:49:49,359
and you can get url even even hard-coded

00:49:48,960 --> 00:49:51,280
or

00:49:49,359 --> 00:49:53,119
from that deployment event to github

00:49:51,280 --> 00:49:55,040
pages so i have blog posts

00:49:53,119 --> 00:49:56,960
showing that okay excellent yeah i like

00:49:55,040 --> 00:49:58,559
doing a lot of uh experimenting

00:49:56,960 --> 00:50:00,559
with github pages one of my examples in

00:49:58,559 --> 00:50:01,680
my talk um two days ago at github

00:50:00,559 --> 00:50:04,559
universe was

00:50:01,680 --> 00:50:06,319
storybook and uh storybook being the

00:50:04,559 --> 00:50:08,319
component design system for building

00:50:06,319 --> 00:50:10,880
components in your front end app

00:50:08,319 --> 00:50:11,599
and i i leveraged github pages

00:50:10,880 --> 00:50:14,000
originally

00:50:11,599 --> 00:50:15,760
to have a separate deployment for just a

00:50:14,000 --> 00:50:16,240
storybook that was separate from my main

00:50:15,760 --> 00:50:18,240
site

00:50:16,240 --> 00:50:19,440
which i have half set up on this buggy

00:50:18,240 --> 00:50:20,800
live site

00:50:19,440 --> 00:50:22,720
but the beauty of this is that i'm

00:50:20,800 --> 00:50:25,200
leveraging netify for that

00:50:22,720 --> 00:50:26,079
i could actually leverage the same

00:50:25,200 --> 00:50:28,400
deployment

00:50:26,079 --> 00:50:29,119
pipeline for netlify but deployed at two

00:50:28,400 --> 00:50:30,880
different sites

00:50:29,119 --> 00:50:32,240
uh thanks for the github actions too as

00:50:30,880 --> 00:50:35,440
well which has been

00:50:32,240 --> 00:50:37,280
uh wonderful well if you use

00:50:35,440 --> 00:50:39,760
netlife they have their own netified

00:50:37,280 --> 00:50:40,960
build utility right now right where they

00:50:39,760 --> 00:50:43,760
can run the build

00:50:40,960 --> 00:50:44,640
and i've written that if i cyprus plugin

00:50:43,760 --> 00:50:48,079
for that build

00:50:44,640 --> 00:50:50,079
so it runs the task there and because

00:50:48,079 --> 00:50:52,720
when that if i build plugin system

00:50:50,079 --> 00:50:54,240
knows that uh deployed url it will just

00:50:52,720 --> 00:50:55,200
pass it to the plug-in so you don't even

00:50:54,240 --> 00:50:57,119
have to think about

00:50:55,200 --> 00:50:58,319
the url but you're testing it you can

00:50:57,119 --> 00:50:59,599
test local

00:50:58,319 --> 00:51:01,520
yeah that's beautiful yeah because they

00:50:59,599 --> 00:51:03,040
have those atomic deploys

00:51:01,520 --> 00:51:05,040
and uh do you have integration with for

00:51:03,040 --> 00:51:08,400
cell as well

00:51:05,040 --> 00:51:09,040
yes so for versailles if you run on

00:51:08,400 --> 00:51:11,280
github

00:51:09,040 --> 00:51:13,200
actions if a deployment event is very

00:51:11,280 --> 00:51:16,240
just go to my blog and i'll show how

00:51:13,200 --> 00:51:17,440
you can test the deploy site and test

00:51:16,240 --> 00:51:20,400
the preview as well

00:51:17,440 --> 00:51:22,960
so you can do a full circle okay well we

00:51:20,400 --> 00:51:24,480
seem to be running the tests right yeah

00:51:22,960 --> 00:51:26,240
it's a little easier when you're you're

00:51:24,480 --> 00:51:29,359
not worried about compiling uh

00:51:26,240 --> 00:51:31,920
persistent queries in graphql

00:51:29,359 --> 00:51:33,119
yeah so right now it found like it's

00:51:31,920 --> 00:51:37,040
using the built-in

00:51:33,119 --> 00:51:40,160
electron 87 right on the side

00:51:37,040 --> 00:51:43,200
all passed right if we stored with video

00:51:40,160 --> 00:51:45,599
as an artifact we could have downloaded

00:51:43,200 --> 00:51:47,040
you know watched it yeah oh that's

00:51:45,599 --> 00:51:49,440
amazing too as well

00:51:47,040 --> 00:51:51,760
because uh so artifacts stay up to on

00:51:49,440 --> 00:51:54,880
get your github blogs for up to 30 days

00:51:51,760 --> 00:51:56,720
so it's it'd be amazing to have these

00:51:54,880 --> 00:51:58,000
artifacts actually be uploaded so that

00:51:56,720 --> 00:51:58,720
way if you have a project that's

00:51:58,000 --> 00:52:01,520
constantly

00:51:58,720 --> 00:52:04,079
iterating um or you're practicing what

00:52:01,520 --> 00:52:07,359
is it um

00:52:04,079 --> 00:52:08,559
agile methodology always ship uh which

00:52:07,359 --> 00:52:09,359
is honestly yeah that's what you wanted

00:52:08,559 --> 00:52:11,040
to be doing

00:52:09,359 --> 00:52:12,559
um you can always go back and say hey

00:52:11,040 --> 00:52:14,480
someone broke something or something

00:52:12,559 --> 00:52:15,920
changed let's go back to our previous

00:52:14,480 --> 00:52:18,079
iteration and see what happened how we

00:52:15,920 --> 00:52:20,400
how we got to this point

00:52:18,079 --> 00:52:21,920
i like if you store those videos imagine

00:52:20,400 --> 00:52:23,680
you have a failed test run

00:52:21,920 --> 00:52:25,359
you download video and when you go to a

00:52:23,680 --> 00:52:26,720
previous successful test run

00:52:25,359 --> 00:52:28,480
download the video and just play them

00:52:26,720 --> 00:52:29,119
side by side and see where things

00:52:28,480 --> 00:52:30,800
diverge

00:52:29,119 --> 00:52:32,319
and that'll be clear oh like oh wait

00:52:30,800 --> 00:52:34,319
like this player

00:52:32,319 --> 00:52:36,480
did not load so that's why everything is

00:52:34,319 --> 00:52:38,559
off yeah so you can do that

00:52:36,480 --> 00:52:40,319
yeah i love that and honestly too as

00:52:38,559 --> 00:52:42,160
well the fact that you have this

00:52:40,319 --> 00:52:43,599
and as an action it's open source cyprus

00:52:42,160 --> 00:52:45,839
is open source uh

00:52:43,599 --> 00:52:47,280
folks can i mean this is open source

00:52:45,839 --> 00:52:49,200
friday so you could actually

00:52:47,280 --> 00:52:50,880
dig in and if you have an example it

00:52:49,200 --> 00:52:52,079
sounds like i i threw out vercell

00:52:50,880 --> 00:52:53,920
and netlify but it sounds like those

00:52:52,079 --> 00:52:55,280
examples are solved um

00:52:53,920 --> 00:52:58,160
but yeah if you have an example it seems

00:52:55,280 --> 00:52:59,839
like um opening up issues and

00:52:58,160 --> 00:53:01,119
seeing if you all can uh contribute to

00:52:59,839 --> 00:53:03,040
that sounds like a great way to get

00:53:01,119 --> 00:53:05,119
involved

00:53:03,040 --> 00:53:07,359
absolutely you'll find the source code

00:53:05,119 --> 00:53:10,640
for the action right where it's

00:53:07,359 --> 00:53:12,319
you know it's set up for testing

00:53:10,640 --> 00:53:14,079
when you open pull requests like all

00:53:12,319 --> 00:53:16,960
those examples

00:53:14,079 --> 00:53:18,559
run so we're not accidentally going to

00:53:16,960 --> 00:53:19,119
break bunch of users and it's all

00:53:18,559 --> 00:53:22,319
version

00:53:19,119 --> 00:53:22,720
after at the end so in our example you

00:53:22,319 --> 00:53:25,520
use

00:53:22,720 --> 00:53:26,640
like github action slash v2 which is

00:53:25,520 --> 00:53:30,319
like the latest

00:53:26,640 --> 00:53:33,440
yeah published of v2

00:53:30,319 --> 00:53:35,040
in um if you really want to be specific

00:53:33,440 --> 00:53:36,720
you can put a commit there

00:53:35,040 --> 00:53:38,319
so you lock yourself the specific

00:53:36,720 --> 00:53:41,760
version of our actions so but

00:53:38,319 --> 00:53:44,000
for sure like everything is immutable so

00:53:41,760 --> 00:53:44,880
it's up to you how strict you want to be

00:53:44,000 --> 00:53:47,200
in respect

00:53:44,880 --> 00:53:48,880
to versioning and what action you want

00:53:47,200 --> 00:53:51,119
to use

00:53:48,880 --> 00:53:52,000
yeah and i i appreciate you uh walking

00:53:51,119 --> 00:53:55,280
through this with me

00:53:52,000 --> 00:53:56,000
um i had not i mean as i mentioned

00:53:55,280 --> 00:53:57,119
earlier i

00:53:56,000 --> 00:53:58,480
might have said it on stream i said it

00:53:57,119 --> 00:54:00,240
before when we started this call i

00:53:58,480 --> 00:54:01,200
haven't tried cypress out but like to

00:54:00,240 --> 00:54:04,160
get started seem

00:54:01,200 --> 00:54:04,880
pretty trivial um what wasn't trivial is

00:54:04,160 --> 00:54:06,800
my build command

00:54:04,880 --> 00:54:09,119
my build system so that's what got us

00:54:06,800 --> 00:54:09,520
hung up but i have enough information to

00:54:09,119 --> 00:54:10,960
actually

00:54:09,520 --> 00:54:12,400
make that work i know it's gonna it's i

00:54:10,960 --> 00:54:13,680
can make it work it's just i didn't

00:54:12,400 --> 00:54:15,040
think i had 10 minutes it'd probably

00:54:13,680 --> 00:54:18,400
take a little more than 10 minutes to

00:54:15,040 --> 00:54:19,520
troubleshoot um but yeah i have cyprus

00:54:18,400 --> 00:54:21,440
in my site i'm not

00:54:19,520 --> 00:54:22,640
i've got a pr so i'm going to be merging

00:54:21,440 --> 00:54:25,440
that later today

00:54:22,640 --> 00:54:26,160
uh and i appreciate you gleb uh walking

00:54:25,440 --> 00:54:28,480
through

00:54:26,160 --> 00:54:29,680
this process with me uh i'm curious if

00:54:28,480 --> 00:54:32,400
people want to get involved

00:54:29,680 --> 00:54:33,839
um with the cypress community uh or as

00:54:32,400 --> 00:54:35,200
well as like outsiders into projects do

00:54:33,839 --> 00:54:36,559
you have anywhere that you we can point

00:54:35,200 --> 00:54:39,040
them to

00:54:36,559 --> 00:54:41,680
yes go to cyprus website we have links

00:54:39,040 --> 00:54:44,880
to all documentation our examples

00:54:41,680 --> 00:54:46,559
everything just find cyprus at ao there

00:54:44,880 --> 00:54:49,920
is a link to docs

00:54:46,559 --> 00:54:51,599
right and we we do have a lot of

00:54:49,920 --> 00:54:54,160
documentation

00:54:51,599 --> 00:54:55,280
and you can find everything for it and

00:54:54,160 --> 00:54:57,760
if you have any questions

00:54:55,280 --> 00:54:59,200
we have a chat channel we have discord

00:54:57,760 --> 00:55:02,400
channel

00:54:59,200 --> 00:55:03,920
i'm answering everything on twitter and

00:55:02,400 --> 00:55:07,119
everywhere so

00:55:03,920 --> 00:55:09,440
don't be a stranger excellent

00:55:07,119 --> 00:55:10,400
yeah so folks uh thanks for sitting

00:55:09,440 --> 00:55:12,400
around with us and

00:55:10,400 --> 00:55:13,760
doing open source friday these are

00:55:12,400 --> 00:55:15,520
streams we do on fridays

00:55:13,760 --> 00:55:17,040
we'll be taking a break for the the

00:55:15,520 --> 00:55:18,960
holidays that are happening so everybody

00:55:17,040 --> 00:55:20,960
happy hanukkah if you celebrate that

00:55:18,960 --> 00:55:22,720
which i think started this week and uh

00:55:20,960 --> 00:55:24,160
happy other holidays as well and

00:55:22,720 --> 00:55:26,079
we're gonna we're gonna have a really

00:55:24,160 --> 00:55:28,880
cool lineup starting in

00:55:26,079 --> 00:55:29,520
hopefully february um so if you have not

00:55:28,880 --> 00:55:31,040
yet

00:55:29,520 --> 00:55:32,960
definitely hit the subscribe button hit

00:55:31,040 --> 00:55:35,440
the like button uh follow

00:55:32,960 --> 00:55:37,280
and um clip hopefully this is like step

00:55:35,440 --> 00:55:39,040
one of our conversations well we would

00:55:37,280 --> 00:55:40,400
love to have you on in the future

00:55:39,040 --> 00:55:42,400
talk more about action so we can talk

00:55:40,400 --> 00:55:44,720
more about more details about cyprus but

00:55:42,400 --> 00:55:45,920
uh thanks so much for coming along for

00:55:44,720 --> 00:55:48,240
the ride and sharing

00:55:45,920 --> 00:55:50,319
all your information with us i

00:55:48,240 --> 00:55:51,920
appreciate opportunity and everyone stay

00:55:50,319 --> 00:55:57,520
safe and healthy

00:55:51,920 --> 00:55:57,520

YouTube URL: https://www.youtube.com/watch?v=gokM_zEmWLA


