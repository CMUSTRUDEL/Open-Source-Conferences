Title: Anders Lehmann - How to GIS with Python
Publication date: 2015-08-08
Playlist: EuroPython 2015
Description: 
	Anders Lehmann - How to GIS with Python
[EuroPython 2015]
[24 July 2015]
[Bilbao, Euskadi, Spain]

In this talk I will present some tools for working with Geographic
Information Systems in Python.

Geographic information Systems are widely used for managing geographic
(map) data. As an example I will present how to use Open Street Map
data (http://openstreetmap.org/), in routing, traffic planning and
estimation of pollution emission.

For the purpose of the project EcoSense (http://ecosense.au.dk), GPS
data from users smartphones are mapped to OSM roads. The map matching
algorithm is written in Python and uses data from the database
PostgreSQL, with the PostGIS extension.

One of the goals of the EcoSense project is to devise methods to
improve the estimation of air quality in urban environments.
Captions: 
	00:00:00,949 --> 00:00:09,660
good morning thank you

00:00:04,490 --> 00:00:12,450
so I call this how to tea is in Tison

00:00:09,660 --> 00:00:19,439
and was a subtitle of A Tale of Two

00:00:12,450 --> 00:00:21,420
Cities it was supposed to be about the

00:00:19,439 --> 00:00:25,170
city of my University ah whose and

00:00:21,420 --> 00:00:27,869
ýstanbul but you should chime were

00:00:25,170 --> 00:00:29,730
strange I have chosen or we need to talk

00:00:27,869 --> 00:00:33,809
about Easter bullets the more

00:00:29,730 --> 00:00:37,320
interesting case anyways but but so the

00:00:33,809 --> 00:00:38,489
subject is a little bit wrong but it was

00:00:37,320 --> 00:00:43,079
kind of funny

00:00:38,489 --> 00:00:46,289
okay let's go on so about me my name is

00:00:43,079 --> 00:00:52,500
Anna's Lehmann this is a compact edition

00:00:46,289 --> 00:00:56,660
of my CV what I well it's not very

00:00:52,500 --> 00:01:01,309
important but now I'm working at

00:00:56,660 --> 00:01:07,040
university in the engineering school

00:01:01,309 --> 00:01:13,049
and I'm teaching electronic engineers

00:01:07,040 --> 00:01:18,689
physics and programming so and part of

00:01:13,049 --> 00:01:21,600
my work is to finish my PhD so in one

00:01:18,689 --> 00:01:25,020
year's time I have to deliver my

00:01:21,600 --> 00:01:29,250
dissertation and I'm doing the PhD in

00:01:25,020 --> 00:01:31,710
the in the context of a funded project

00:01:29,250 --> 00:01:37,200
called eco sense which is about

00:01:31,710 --> 00:01:41,700
collective mobile sensing and modeling

00:01:37,200 --> 00:01:45,299
of emissions from mainly traffic so and

00:01:41,700 --> 00:01:47,490
the mission says I was too kind to two

00:01:45,299 --> 00:01:50,850
kinds of emissions you we're interested

00:01:47,490 --> 00:01:53,780
in the one is the climate gases to co2

00:01:50,850 --> 00:01:57,630
and the methane and stuff like that and

00:01:53,780 --> 00:02:00,329
the other other kind of emissions we are

00:01:57,630 --> 00:02:05,009
interested in are the more polluting or

00:02:00,329 --> 00:02:08,959
the more more acutely

00:02:05,009 --> 00:02:11,730
toxic pollution coming from car traffic

00:02:08,959 --> 00:02:19,230
there's also a visualization part of

00:02:11,730 --> 00:02:23,310
that project which okay but the idea is

00:02:19,230 --> 00:02:25,800
that you ask people to use a special app

00:02:23,310 --> 00:02:28,349
on the mobile phones and then we get

00:02:25,800 --> 00:02:31,410
data about how they are moving around in

00:02:28,349 --> 00:02:34,290
the cities the country and we can use

00:02:31,410 --> 00:02:39,319
that they these they have to to make

00:02:34,290 --> 00:02:42,330
models so the contents of this talk is

00:02:39,319 --> 00:02:45,810
like this so a little short introduction

00:02:42,330 --> 00:02:48,959
to what GIS is I'm not going to go into

00:02:45,810 --> 00:02:53,819
all these or if there's a lot of detail

00:02:48,959 --> 00:02:59,640
in GIS I'm going to just hand favor on

00:02:53,819 --> 00:03:05,099
that look look a couple of applications

00:02:59,640 --> 00:03:08,790
for GIS I think I'm more interested in

00:03:05,099 --> 00:03:14,280
applications so that's just my 40 you

00:03:08,790 --> 00:03:18,180
could say about where you can find data

00:03:14,280 --> 00:03:21,030
to use on your GIS systems or

00:03:18,180 --> 00:03:25,920
applications something about the Python

00:03:21,030 --> 00:03:30,180
tools available some examples and then I

00:03:25,920 --> 00:03:35,609
will go int a 5 time to talk about my

00:03:30,180 --> 00:03:44,299
research on on building a transportation

00:03:35,609 --> 00:03:48,599
model for example okay so what is GIS

00:03:44,299 --> 00:03:51,450
well it's it's a GIS stands for

00:03:48,599 --> 00:03:57,739
geographic information systems and it's

00:03:51,450 --> 00:04:05,900
all about maps there oh it's simple well

00:03:57,739 --> 00:04:09,030
not just a moment we live on a sphere is

00:04:05,900 --> 00:04:13,020
spherical and we would like our math to

00:04:09,030 --> 00:04:16,050
be flat two-dimensional so so how do you

00:04:13,020 --> 00:04:18,630
have you fit a sphere on a on a piece of

00:04:16,050 --> 00:04:21,750
paper that's that's where all the

00:04:18,630 --> 00:04:30,770
nitty-gritty things are coming from in

00:04:21,750 --> 00:04:36,480
GIS how to project the spherical things

00:04:30,770 --> 00:04:38,010
into a two-dimensional map and it turns

00:04:36,480 --> 00:04:40,260
out that I was a lot of way a lot of

00:04:38,010 --> 00:04:44,340
different ways to do these protections

00:04:40,260 --> 00:04:50,040
which each of these ways have had

00:04:44,340 --> 00:04:53,520
certain properties which are good some

00:04:50,040 --> 00:04:57,180
good properties that but there are no

00:04:53,520 --> 00:04:59,130
projection which can have all the good

00:04:57,180 --> 00:05:03,180
properties that you can do so some

00:04:59,130 --> 00:05:06,570
projections retaining area or some

00:05:03,180 --> 00:05:08,370
retain length and stuff like that so so

00:05:06,570 --> 00:05:13,940
depending on your application you will

00:05:08,370 --> 00:05:20,610
need different kind of projections but

00:05:13,940 --> 00:05:24,360
luckily this has many green salt in my

00:05:20,610 --> 00:05:27,360
view there's a there's a database

00:05:24,360 --> 00:05:31,220
containing 4,000 different projections

00:05:27,360 --> 00:05:34,620
and there is a standard way to to

00:05:31,220 --> 00:05:39,060
convert from one map type to another map

00:05:34,620 --> 00:05:41,250
type so so if you have legacy maps you

00:05:39,060 --> 00:05:44,580
just need to know which kind of

00:05:41,250 --> 00:05:49,280
projection that map is used using and

00:05:44,580 --> 00:05:53,850
then you can turn the data into that map

00:05:49,280 --> 00:06:01,910
projection that you need the most or

00:05:53,850 --> 00:06:07,440
most modern maps are using this wsg 84

00:06:01,910 --> 00:06:09,570
projection and so if if you start a new

00:06:07,440 --> 00:06:16,020
project and then it might be a good idea

00:06:09,570 --> 00:06:18,220
to try to use this projection which is

00:06:16,020 --> 00:06:22,060
kind of standard so

00:06:18,220 --> 00:06:23,950
so the nitty-gritty proud of GIS is

00:06:22,060 --> 00:06:26,170
mainly this projection factor there's a

00:06:23,950 --> 00:06:28,630
lot of mathematics and and stuff

00:06:26,170 --> 00:06:31,050
involved in that and it's kind of hard

00:06:28,630 --> 00:06:34,630
and confusing so I'm I'm just going to

00:06:31,050 --> 00:06:40,720
punt that to someone who knows about it

00:06:34,630 --> 00:06:43,590
and go on with the applications so there

00:06:40,720 --> 00:06:49,090
are quite a lot of different

00:06:43,590 --> 00:06:51,820
applications for key is this is just one

00:06:49,090 --> 00:06:54,640
application this is from Denmark all the

00:06:51,820 --> 00:06:59,380
black dots here are are the streets

00:06:54,640 --> 00:07:06,310
length in in my area so someone the

00:06:59,380 --> 00:07:08,320
medium has it has it has to keep track

00:07:06,310 --> 00:07:11,920
of their inventory of street lamps they

00:07:08,320 --> 00:07:16,140
have made a map where they have put in

00:07:11,920 --> 00:07:19,210
all the locations of the street lamps so

00:07:16,140 --> 00:07:21,670
that's a way of keeping track of your

00:07:19,210 --> 00:07:25,150
assets and it's a way that they can they

00:07:21,670 --> 00:07:27,340
can use for planning they know how many

00:07:25,150 --> 00:07:29,980
street lamps they have and then know

00:07:27,340 --> 00:07:31,570
where they are and if they have to be

00:07:29,980 --> 00:07:36,520
serviced or something like that you can

00:07:31,570 --> 00:07:38,830
you can plan in how many cars do you

00:07:36,520 --> 00:07:40,960
need to just service these lamps and in

00:07:38,830 --> 00:07:44,680
which order would it be a nice thing to

00:07:40,960 --> 00:07:49,690
do so that's one application that the

00:07:44,680 --> 00:07:51,120
assets track of things that you put out

00:07:49,690 --> 00:07:55,300
in your environment

00:07:51,120 --> 00:07:58,840
another way or another asset tracking

00:07:55,300 --> 00:08:01,060
application is is to keep track on where

00:07:58,840 --> 00:08:03,490
you put down your sewage lines your

00:08:01,060 --> 00:08:05,800
underground cable your your electric

00:08:03,490 --> 00:08:10,570
cables and stuff like that so that you

00:08:05,800 --> 00:08:12,880
hopefully can educate contractor so that

00:08:10,570 --> 00:08:15,780
they not they're not ruining anything

00:08:12,880 --> 00:08:19,169
when they have to take into the ground

00:08:15,780 --> 00:08:22,210
fleet management this is more a dynamic

00:08:19,169 --> 00:08:24,970
tracking thing but you still you would

00:08:22,210 --> 00:08:27,940
like to know where all your taxes or

00:08:24,970 --> 00:08:28,710
cars or trucks where they are and where

00:08:27,940 --> 00:08:32,790
they are going

00:08:28,710 --> 00:08:37,170
you need to to put them on the map maybe

00:08:32,790 --> 00:08:40,050
dynamically but still on a map and if

00:08:37,170 --> 00:08:43,170
you if you're a city planner you would

00:08:40,050 --> 00:08:48,240
like to have accurate maps so that you

00:08:43,170 --> 00:08:51,180
can you can plan for four different so

00:08:48,240 --> 00:08:54,840
in cities where should the interest

00:08:51,180 --> 00:08:57,600
industrial facilities where P and was

00:08:54,840 --> 00:09:00,210
the residential area be and stuff like

00:08:57,600 --> 00:09:07,020
that and in these kinds of map you also

00:09:00,210 --> 00:09:12,150
need features of of the of the geography

00:09:07,020 --> 00:09:15,630
is this hilly are there swamps and what

00:09:12,150 --> 00:09:18,390
kind of what is the crown made of on

00:09:15,630 --> 00:09:22,020
these specific sites so that's another

00:09:18,390 --> 00:09:32,570
way of putting information into maps

00:09:22,020 --> 00:09:37,190
that you can use okay and of course

00:09:32,570 --> 00:09:40,980
grouting which I think it's very

00:09:37,190 --> 00:09:45,030
important very used nowadays you've ever

00:09:40,980 --> 00:09:47,820
used application of GIS we do it on our

00:09:45,030 --> 00:09:53,130
smart phones we do it and specialized

00:09:47,820 --> 00:09:56,520
GPS route finders in our cars and stuff

00:09:53,130 --> 00:09:59,460
like that so it it has been a very

00:09:56,520 --> 00:10:02,460
successful application of GIS of course

00:09:59,460 --> 00:10:05,730
we all we call it a GPS receivers

00:10:02,460 --> 00:10:08,460
because but the GPS only give us a

00:10:05,730 --> 00:10:12,170
position we need the map to actually

00:10:08,460 --> 00:10:16,310
find a way from one point to another and

00:10:12,170 --> 00:10:16,310
preferably the fastest

00:10:16,850 --> 00:10:24,230
also already mint mentioned city

00:10:20,540 --> 00:10:25,610
planning but there is a specialized

00:10:24,230 --> 00:10:29,300
version of city planning which is

00:10:25,610 --> 00:10:34,000
traffic planning traffic modeling this

00:10:29,300 --> 00:10:37,040
is where I have done some research in

00:10:34,000 --> 00:10:40,220
and the problem is of course that we we

00:10:37,040 --> 00:10:44,060
want to plan our cities so that we we

00:10:40,220 --> 00:10:48,590
get as little congestion as possible in

00:10:44,060 --> 00:10:51,620
order to plan for congestion we need to

00:10:48,590 --> 00:10:56,840
have a model for where is the traffic

00:10:51,620 --> 00:11:02,660
going and when is it going here so all

00:10:56,840 --> 00:11:08,210
right where can we find data for our

00:11:02,660 --> 00:11:10,190
Maps well there's a very important

00:11:08,210 --> 00:11:13,640
resource called urban street map I don't

00:11:10,190 --> 00:11:16,880
know if you know it but I think that it

00:11:13,640 --> 00:11:21,020
it it might be under valued and

00:11:16,880 --> 00:11:25,820
underused because Google Earth is is of

00:11:21,020 --> 00:11:29,420
course very Google Maps it's very it's

00:11:25,820 --> 00:11:35,870
very good but the home street map has

00:11:29,420 --> 00:11:38,830
this further well it's an open format

00:11:35,870 --> 00:11:41,930
and you can actually go in and change

00:11:38,830 --> 00:11:44,390
stuff if you want if if you live in an

00:11:41,930 --> 00:11:47,060
area and the other they build a new road

00:11:44,390 --> 00:11:51,200
or the closer road or you can actually

00:11:47,060 --> 00:11:54,760
go in and change that in your map in the

00:11:51,200 --> 00:12:01,220
open street map is very easy to do that

00:11:54,760 --> 00:12:03,740
so so for researchers I think that's a

00:12:01,220 --> 00:12:07,400
very important thing that the data is

00:12:03,740 --> 00:12:11,150
available in its own and free to use of

00:12:07,400 --> 00:12:14,510
course I can use Google Maps for just

00:12:11,150 --> 00:12:17,720
for static maps but I can't use it for

00:12:14,510 --> 00:12:21,050
to creating the features of the map so I

00:12:17,720 --> 00:12:23,570
can see map where there are roads but I

00:12:21,050 --> 00:12:26,830
can't really get the coordinates of

00:12:23,570 --> 00:12:26,830
these roads that's

00:12:28,060 --> 00:12:36,850
actually but there are other sources at

00:12:33,820 --> 00:12:41,850
least in Denmark we have a new national

00:12:36,850 --> 00:12:44,650
data centers for a lot of different maps

00:12:41,850 --> 00:12:48,510
there's a similar quality environment

00:12:44,650 --> 00:12:51,880
GIS which have all kinds of strange

00:12:48,510 --> 00:12:57,940
information about where the rivers are

00:12:51,880 --> 00:13:01,420
and and where the where they are Depot's

00:12:57,940 --> 00:13:04,570
for searching wait waste and stuff like

00:13:01,420 --> 00:13:11,290
that so you can you can go there if you

00:13:04,570 --> 00:13:17,620
want to do research that palaces also

00:13:11,290 --> 00:13:19,510
have sources some and that can actually

00:13:17,620 --> 00:13:22,570
be sometimes be a problem because they

00:13:19,510 --> 00:13:25,030
take seem to be quite old some of these

00:13:22,570 --> 00:13:28,110
databases and they there you can

00:13:25,030 --> 00:13:31,780
actually risk to have a non-standard

00:13:28,110 --> 00:13:35,130
protection boat and you can it can be

00:13:31,780 --> 00:13:38,170
quite hard and to to convert these

00:13:35,130 --> 00:13:42,610
legacy databases to to more modern

00:13:38,170 --> 00:13:45,190
projects so that you can use all Street

00:13:42,610 --> 00:13:50,140
Map for instance with the old data from

00:13:45,190 --> 00:13:53,980
from the legacy database so I just

00:13:50,140 --> 00:13:56,560
wanted to mention I found this database

00:13:53,980 --> 00:13:58,720
the other day that about where all the

00:13:56,560 --> 00:13:59,440
cell towers for for mobile phones are in

00:13:58,720 --> 00:14:02,920
Denmark

00:13:59,440 --> 00:14:05,200
there's a database so you can yeah you

00:14:02,920 --> 00:14:08,500
could find the nearest cell tower

00:14:05,200 --> 00:14:12,210
if you knew why it's also there I think

00:14:08,500 --> 00:14:21,390
there must be application for that also

00:14:12,210 --> 00:14:24,900
okay so this is not easy to see but I'm

00:14:21,390 --> 00:14:27,640
the pilot tools that I have used most is

00:14:24,900 --> 00:14:32,760
is this

00:14:27,640 --> 00:14:40,210
it's called queue quantum GIS queue keys

00:14:32,760 --> 00:14:45,400
this is a visualization program will

00:14:40,210 --> 00:14:49,050
they embedded Python interpreter so you

00:14:45,400 --> 00:14:53,080
can you can make all your scripting in

00:14:49,050 --> 00:14:56,800
in Python I'm sorry about the quality I

00:14:53,080 --> 00:15:01,510
thought that yeah but maybe you could

00:14:56,800 --> 00:15:04,900
just make a little demo yeah so it's

00:15:01,510 --> 00:15:07,830
it's the same image you just fill the

00:15:04,900 --> 00:15:10,840
green color instead of the light blue

00:15:07,830 --> 00:15:14,290
this is actually all the roads in each

00:15:10,840 --> 00:15:17,820
sample so there are 300,000 wrote in

00:15:14,290 --> 00:15:19,960
simple and and that's the only thing

00:15:17,820 --> 00:15:22,840
yeah so you can actually see the

00:15:19,960 --> 00:15:27,610
Bosphorus Strait where are no roads and

00:15:22,840 --> 00:15:29,260
there are some islands with some so and

00:15:27,610 --> 00:15:34,210
then there are some mountains where

00:15:29,260 --> 00:15:37,330
there are no but it's this visualization

00:15:34,210 --> 00:15:43,410
program is actually fast enough to to

00:15:37,330 --> 00:15:54,930
accommodate this quite large number of

00:15:43,410 --> 00:15:59,470
it redraws quite fast so the the other

00:15:54,930 --> 00:16:02,680
tool I would mention is the arc GIS it's

00:15:59,470 --> 00:16:07,890
a very it's a commercial product which

00:16:02,680 --> 00:16:07,890
also has an embedded Python interpreter

00:16:08,580 --> 00:16:18,070
this is it seems very popular in in

00:16:13,570 --> 00:16:23,620
research I've read several papers where

00:16:18,070 --> 00:16:26,800
they're using ArcGIS but I think that I

00:16:23,620 --> 00:16:30,360
found QGIS a bit more approachable from

00:16:26,800 --> 00:16:33,360
the Python site so I chose to use that

00:16:30,360 --> 00:16:33,360
so

00:16:33,459 --> 00:16:45,019
yeah so I'm going to talk a little bit

00:16:40,850 --> 00:16:50,110
more about tools these are not toys and

00:16:45,019 --> 00:16:53,660
tools per se but there are very good

00:16:50,110 --> 00:16:56,570
bindings to them so you can you can you

00:16:53,660 --> 00:16:59,930
can accept some through Python so but

00:16:56,570 --> 00:17:03,290
they are not really heightened the the

00:16:59,930 --> 00:17:07,809
Postgres database with the extensions of

00:17:03,290 --> 00:17:11,569
corpo schism PT routing are quite good

00:17:07,809 --> 00:17:17,299
they so the post class is of course a

00:17:11,569 --> 00:17:21,650
very good SQL database and the host G's

00:17:17,299 --> 00:17:29,390
extension gives a lot of relevant

00:17:21,650 --> 00:17:32,750
functions to manipulate GIS data so I'm

00:17:29,390 --> 00:17:37,610
not going into the details but because

00:17:32,750 --> 00:17:40,970
that's that's a whole new and on top of

00:17:37,610 --> 00:17:43,760
Kochi is I have this PT routing

00:17:40,970 --> 00:17:49,700
extension has been built so that you can

00:17:43,760 --> 00:17:53,960
you can if you have if you put your data

00:17:49,700 --> 00:17:57,410
into into the database you can start to

00:17:53,960 --> 00:18:03,500
find the shortest path from one point to

00:17:57,410 --> 00:18:08,169
another using the base extension in

00:18:03,500 --> 00:18:11,540
order to do all the GIS conversion from

00:18:08,169 --> 00:18:13,720
there are a lot of different forms not

00:18:11,540 --> 00:18:18,130
only projections but also data formats

00:18:13,720 --> 00:18:23,890
but there are these libraries available

00:18:18,130 --> 00:18:29,900
DL and and especially OG are 200 gr

00:18:23,890 --> 00:18:32,990
which can reach almost any relevant

00:18:29,900 --> 00:18:35,480
format and convert to so most of the

00:18:32,990 --> 00:18:40,700
other relevant for me so they are very

00:18:35,480 --> 00:18:42,720
very generic tools but they are not that

00:18:40,700 --> 00:18:45,930
hard to use actually and

00:18:42,720 --> 00:18:48,260
and there are patent bindings for both

00:18:45,930 --> 00:18:48,260
of it

00:18:48,470 --> 00:18:58,380
okay so I talked about OpenStreetMap and

00:18:52,890 --> 00:19:07,220
I'm just going to show you hopefully it

00:18:58,380 --> 00:19:07,220
was so I should

00:19:13,380 --> 00:19:21,660
there you go so when you open street map

00:19:18,210 --> 00:19:24,870
you get maps of course and I've zoomed

00:19:21,660 --> 00:19:28,890
into to Bilbao and you can maybe you can

00:19:24,870 --> 00:19:33,240
with my recall or recognizes the river

00:19:28,890 --> 00:19:36,030
and their venue what is quite hard to

00:19:33,240 --> 00:19:39,150
see on this with these colors is that

00:19:36,030 --> 00:19:44,809
there's actually some problems with this

00:19:39,150 --> 00:19:49,260
map because there is a you can walk like

00:19:44,809 --> 00:19:50,850
along here and actually you can go under

00:19:49,260 --> 00:19:54,120
the bridge and you can continue on this

00:19:50,850 --> 00:19:58,370
footpath here but there is no connection

00:19:54,120 --> 00:20:01,409
from this bridge to to this footpath and

00:19:58,370 --> 00:20:03,390
but that's not hard to change you could

00:20:01,409 --> 00:20:05,970
just press edit and if you have locked

00:20:03,390 --> 00:20:12,240
in and stuff like that you options with

00:20:05,970 --> 00:20:16,159
this you and you can then choose to to

00:20:12,240 --> 00:20:16,159
connect this footpath yeah

00:20:18,420 --> 00:20:21,110
have to press

00:20:22,860 --> 00:20:25,669
with this

00:20:25,880 --> 00:20:30,760
and then you just have to do that once

00:20:28,610 --> 00:20:30,760
more

00:20:33,740 --> 00:20:39,830
so now I have put in a new line yeah and

00:20:36,919 --> 00:20:42,250
I should put in the metadata as well

00:20:39,830 --> 00:20:42,250
that is

00:20:51,110 --> 00:20:54,399
it's a perfect

00:20:57,310 --> 00:21:06,790
so when I've put in that I don't know if

00:21:02,590 --> 00:21:08,230
it has a name or or if I should prepare

00:21:06,790 --> 00:21:10,350
the surface and stuff like that but

00:21:08,230 --> 00:21:13,180
there are a lot of of

00:21:10,350 --> 00:21:15,040
militated that you can put in through

00:21:13,180 --> 00:21:18,130
Home Sweet method and when you're

00:21:15,040 --> 00:21:22,350
satisfied you could just press Save and

00:21:18,130 --> 00:21:26,590
then it will be updated to take this so

00:21:22,350 --> 00:21:29,740
and I want you to to recognize that it

00:21:26,590 --> 00:21:35,440
is very easy and it actually could be

00:21:29,740 --> 00:21:38,410
beneficial for the father for at least

00:21:35,440 --> 00:21:40,900
for me as a researcher if if the

00:21:38,410 --> 00:21:46,570
OpenStreetMap is as correct as possible

00:21:40,900 --> 00:21:48,850
so I want you to shoot when you notice

00:21:46,570 --> 00:21:49,660
something changed in your local

00:21:48,850 --> 00:21:53,920
environment

00:21:49,660 --> 00:21:57,430
please can try to chuckle into the

00:21:53,920 --> 00:22:01,000
street map and we can take it later

00:21:57,430 --> 00:22:05,440
right and change it it's very easy and

00:22:01,000 --> 00:22:08,530
it's very nice when it's working when

00:22:05,440 --> 00:22:21,700
it's correct so let's go back to the

00:22:08,530 --> 00:22:24,730
presentation so now we come to my to my

00:22:21,700 --> 00:22:32,650
stuff the traffic model that I've been

00:22:24,730 --> 00:22:34,540
working with and yeah of course this

00:22:32,650 --> 00:22:38,410
might be very boring for you because

00:22:34,540 --> 00:22:43,420
this is of course my pet so maybe I go

00:22:38,410 --> 00:22:45,400
into too much detail about this but the

00:22:43,420 --> 00:22:49,570
reason why we want to have a try traffic

00:22:45,400 --> 00:22:52,270
model is in we want to be able to

00:22:49,570 --> 00:22:56,680
predict how the traffic flows through a

00:22:52,270 --> 00:23:00,520
network we want to be able to predict

00:22:56,680 --> 00:23:03,910
where the congestion czar and and and we

00:23:00,520 --> 00:23:05,120
especially especially we want to predict

00:23:03,910 --> 00:23:07,749
how

00:23:05,120 --> 00:23:12,320
if we change the network how would let's

00:23:07,749 --> 00:23:17,090
how would that change the flow through

00:23:12,320 --> 00:23:20,509
the network so what I've been working

00:23:17,090 --> 00:23:24,529
with is a model that that considers how

00:23:20,509 --> 00:23:28,249
people actually choose where to drive so

00:23:24,529 --> 00:23:32,570
it's kind of a surface market model for

00:23:28,249 --> 00:23:34,759
for drivers and they in in the

00:23:32,570 --> 00:23:37,360
researches it's usually called the

00:23:34,759 --> 00:23:43,029
assignment problem it's how to assign

00:23:37,360 --> 00:23:47,230
drivers to different routes in a network

00:23:43,029 --> 00:23:51,879
the basic principles are derived from

00:23:47,230 --> 00:23:55,610
econometrics and it's based on on

00:23:51,879 --> 00:23:58,159
finding a liquor equilibrium and steady

00:23:55,610 --> 00:24:02,509
state solution so it's it's kind of its

00:23:58,159 --> 00:24:05,240
kind of a static model so you you create

00:24:02,509 --> 00:24:07,700
you you find out what is the demand for

00:24:05,240 --> 00:24:10,039
for going from one place to another and

00:24:07,700 --> 00:24:13,970
then you try to find the steady-state

00:24:10,039 --> 00:24:19,730
solution for for that network so it's

00:24:13,970 --> 00:24:22,999
not dynamic I say but it's the the the

00:24:19,730 --> 00:24:25,490
big problem with with these kind of

00:24:22,999 --> 00:24:27,649
models is that they're actually a very

00:24:25,490 --> 00:24:29,629
large number of different possible

00:24:27,649 --> 00:24:33,679
routes and if you want to make a

00:24:29,629 --> 00:24:35,299
computer find that that how people are

00:24:33,679 --> 00:24:40,570
teach to be with through all these rods

00:24:35,299 --> 00:24:45,769
is actually a large problem so this is a

00:24:40,570 --> 00:24:48,590
this is a picture of Copenhagen the

00:24:45,769 --> 00:24:50,720
central part of Copenhagen anyway so at

00:24:48,590 --> 00:24:54,769
the bottom right we have the Copenhagen

00:24:50,720 --> 00:24:58,580
Airport and there is a motorway coming

00:24:54,769 --> 00:25:03,019
down from the north so this is an

00:24:58,580 --> 00:25:07,279
assignment to see how will the how will

00:25:03,019 --> 00:25:10,460
traffic flow through the come hang area

00:25:07,279 --> 00:25:12,559
in in the morning when people comes from

00:25:10,460 --> 00:25:15,170
the north and I want they want to go to

00:25:12,559 --> 00:25:19,880
the to the airport

00:25:15,170 --> 00:25:23,050
the large path here is the motorways as

00:25:19,880 --> 00:25:25,340
a motorway over the wire array around

00:25:23,050 --> 00:25:28,160
Copenhagen and it goes to the airport so

00:25:25,340 --> 00:25:33,560
and of course most people choose to to

00:25:28,160 --> 00:25:35,810
go about it like that but as as many as

00:25:33,560 --> 00:25:38,900
more and more people come onto the

00:25:35,810 --> 00:25:42,020
motorways it it turns out that the the

00:25:38,900 --> 00:25:45,320
traffic flows and then it actually so

00:25:42,020 --> 00:25:47,930
there is other ways that are quite as

00:25:45,320 --> 00:25:51,620
fast and they are going to through the

00:25:47,930 --> 00:25:54,860
center of of the Copenhagen which might

00:25:51,620 --> 00:25:56,510
not be that nice for for the for the

00:25:54,860 --> 00:25:59,600
morning morning traffic in the central

00:25:56,510 --> 00:26:02,000
co-payment so but the idea here is that

00:25:59,600 --> 00:26:05,780
we try to find out how many are going at

00:26:02,000 --> 00:26:08,330
each route and when we have a

00:26:05,780 --> 00:26:10,490
equilibrium everyone would have the same

00:26:08,330 --> 00:26:16,400
travel time that's the basic idea

00:26:10,490 --> 00:26:22,790
because then we have what we call a user

00:26:16,400 --> 00:26:29,080
equilibrium okay so how do we model

00:26:22,790 --> 00:26:31,550
congestion well we you know that that

00:26:29,080 --> 00:26:34,190
roads I have a capacity they are

00:26:31,550 --> 00:26:38,770
designed to have a certain amount of

00:26:34,190 --> 00:26:42,320
cars per hour this is the CA in the and

00:26:38,770 --> 00:26:45,890
when we reach the capacity we know that

00:26:42,320 --> 00:26:50,660
the traffic flows and we model that with

00:26:45,890 --> 00:26:53,990
this simple power formula so the time it

00:26:50,660 --> 00:26:57,470
takes to go through a link is given by

00:26:53,990 --> 00:26:59,390
the free flow time that's the flow we

00:26:57,470 --> 00:27:02,870
would know you would experience if there

00:26:59,390 --> 00:27:06,290
were no other cars on the road and then

00:27:02,870 --> 00:27:08,660
we have this power function where well

00:27:06,290 --> 00:27:12,440
in when the volume of the cars are

00:27:08,660 --> 00:27:15,290
approaching the capacity then we it

00:27:12,440 --> 00:27:18,270
takes longer and longer time so this is

00:27:15,290 --> 00:27:22,630
a very old formula but it has

00:27:18,270 --> 00:27:24,280
work for it it still works and it's 50

00:27:22,630 --> 00:27:27,280
years old or something like that but it

00:27:24,280 --> 00:27:31,929
gives actually a very good approximation

00:27:27,280 --> 00:27:36,159
on how traffic flows and we can use this

00:27:31,929 --> 00:27:39,179
idea if we now we have a to route

00:27:36,159 --> 00:27:42,730
between our origin and destination and

00:27:39,179 --> 00:27:44,950
we want to assign traffic to these two

00:27:42,730 --> 00:27:47,740
routes in such a way that the travel

00:27:44,950 --> 00:27:50,710
time is the same on these two wells and

00:27:47,740 --> 00:27:54,669
we can find the equilibrium point where

00:27:50,710 --> 00:27:57,640
these two congestion curves cross that's

00:27:54,669 --> 00:28:01,510
the basic idea the user equilibrium is

00:27:57,640 --> 00:28:05,140
is the assignment where everyone has the

00:28:01,510 --> 00:28:08,440
same travel time because if we all have

00:28:05,140 --> 00:28:10,120
some travel time we can't we can't have

00:28:08,440 --> 00:28:12,789
a better travel time by choosing another

00:28:10,120 --> 00:28:16,330
route that's the basic idea it's I think

00:28:12,789 --> 00:28:21,490
it's attributable to Nash equilibriums

00:28:16,330 --> 00:28:25,870
if you so it ties into all this game

00:28:21,490 --> 00:28:29,140
theory and economics and selfish using

00:28:25,870 --> 00:28:32,289
stuff like that user equilibrium the

00:28:29,140 --> 00:28:36,730
different monistic part here is only

00:28:32,289 --> 00:28:40,120
applicable in in very small networks

00:28:36,730 --> 00:28:46,419
because you need to consider all all

00:28:40,120 --> 00:28:48,490
possible routes and so and as in even

00:28:46,419 --> 00:28:51,400
small networks has a lot of different

00:28:48,490 --> 00:28:55,390
possible routes so it's it's not really

00:28:51,400 --> 00:28:59,710
feasible to do deterministically use a

00:28:55,390 --> 00:29:04,539
model so people have invented stochastic

00:28:59,710 --> 00:29:06,190
methods where you can look at well the

00:29:04,539 --> 00:29:08,020
basic formulation is that instead of

00:29:06,190 --> 00:29:13,750
being certain that you have the best

00:29:08,020 --> 00:29:17,530
possible route shortest time we can we

00:29:13,750 --> 00:29:20,890
can you can put in some statistics is

00:29:17,530 --> 00:29:23,830
easy and then we can then people think

00:29:20,890 --> 00:29:26,919
they have the best route but there's a

00:29:23,830 --> 00:29:30,309
bit of uncertainty and this uncertainty

00:29:26,919 --> 00:29:35,460
we can model and we can

00:29:30,309 --> 00:29:38,950
use that to drive the assignment process

00:29:35,460 --> 00:29:42,399
so it turns into since we are looking

00:29:38,950 --> 00:29:47,590
for the smallest travel time it's a

00:29:42,399 --> 00:29:51,879
extreme value problem in stochastic and

00:29:47,590 --> 00:29:54,279
we can there are different formulation

00:29:51,879 --> 00:29:56,429
for it but the one I have worked with is

00:29:54,279 --> 00:30:00,820
Pass

00:29:56,429 --> 00:30:07,089
not it not it where you when you do get

00:30:00,820 --> 00:30:10,299
how how path look if they are looking

00:30:07,089 --> 00:30:16,450
light if different routes use the same

00:30:10,299 --> 00:30:19,719
links so so the the su casick usual

00:30:16,450 --> 00:30:25,809
equilibrium path is nice because you can

00:30:19,719 --> 00:30:27,279
use the classic medicine but still the

00:30:25,809 --> 00:30:30,389
problem with the stochastic equilibrium

00:30:27,279 --> 00:30:34,389
is that there will be nonzero

00:30:30,389 --> 00:30:36,009
probability to use every route so it

00:30:34,389 --> 00:30:37,989
might be a very small probability that

00:30:36,009 --> 00:30:40,109
you use a very stupid route but it's

00:30:37,989 --> 00:30:43,690
will it will be there and it will be

00:30:40,109 --> 00:30:47,159
calculated so you kind of underestimate

00:30:43,690 --> 00:30:52,929
the good parts the good rats so that's

00:30:47,159 --> 00:30:58,559
not so nice so in the ýstanbul case I

00:30:52,929 --> 00:31:01,960
have have used data from from from

00:30:58,559 --> 00:31:05,710
OpenStreetMap so you can just there's

00:31:01,960 --> 00:31:08,200
there's a there's a way that you can

00:31:05,710 --> 00:31:13,059
actually you can you don't need to have

00:31:08,200 --> 00:31:16,059
the complete complete data set you can

00:31:13,059 --> 00:31:20,440
just pick what area that you want the

00:31:16,059 --> 00:31:24,450
data from and then it's I it's converted

00:31:20,440 --> 00:31:29,799
into a party so that you have a network

00:31:24,450 --> 00:31:34,180
where everything is connected and it's

00:31:29,799 --> 00:31:39,010
turned into segments instead of roads so

00:31:34,180 --> 00:31:42,340
detail but there's 300,000 Road segments

00:31:39,010 --> 00:31:46,270
I have done a simulation with 2,000

00:31:42,340 --> 00:31:51,130
origin destination care I used the

00:31:46,270 --> 00:31:55,180
Postgres thing and have implemented a

00:31:51,130 --> 00:31:57,910
combination of the deterministic user

00:31:55,180 --> 00:32:02,380
equilibrium and the stochastic user

00:31:57,910 --> 00:32:07,690
equilibrium so that we so that I can

00:32:02,380 --> 00:32:15,220
assign traffic to different routes and I

00:32:07,690 --> 00:32:19,570
used Q G is for the visualization so and

00:32:15,220 --> 00:32:23,410
you I think it's kind of nice you can

00:32:19,570 --> 00:32:25,720
see on the left hand side here you can

00:32:23,410 --> 00:32:29,740
see the elephant that means that there's

00:32:25,720 --> 00:32:32,560
a dip direct connection from the QGIS to

00:32:29,740 --> 00:32:37,240
the Postgres database and I can just

00:32:32,560 --> 00:32:40,870
point to QGIS

00:32:37,240 --> 00:32:45,490
through my database and then ask it to

00:32:40,870 --> 00:32:51,690
show all the routes in my solution set

00:32:45,490 --> 00:32:55,720
and then this is from this is how I have

00:32:51,690 --> 00:33:01,230
my algorithm has assigned to traffic to

00:32:55,720 --> 00:33:01,230
to the different routes of course it's

00:33:02,690 --> 00:33:08,120
that's a lot of details where I can't

00:33:04,550 --> 00:33:14,120
really I haven't tried to to cover here

00:33:08,120 --> 00:33:18,110
so that was my demo okay so in

00:33:14,120 --> 00:33:20,660
conclusion so the way that I abused

00:33:18,110 --> 00:33:26,060
person is to drive all the other tools

00:33:20,660 --> 00:33:31,580
that are the libraries for doing routing

00:33:26,060 --> 00:33:33,980
directly in pattern but it was actually

00:33:31,580 --> 00:33:38,330
very easy and fast to use Postgres so I

00:33:33,980 --> 00:33:42,020
just I just did that so there are many

00:33:38,330 --> 00:33:50,870
tools and now I'm prompted to end my

00:33:42,020 --> 00:33:53,330
talk yeah yeah it's confusing but it's

00:33:50,870 --> 00:33:57,250
doable I think that's my main complete

00:33:53,330 --> 00:33:57,250
conclusion thank you

00:34:16,090 --> 00:34:23,480
thank you for the dog you do a lot of

00:34:21,110 --> 00:34:25,810
theoretical research in traffic

00:34:23,480 --> 00:34:30,679
congestion but do you actually get

00:34:25,810 --> 00:34:33,380
signals from drivers and do and my

00:34:30,679 --> 00:34:35,330
question is mainly because companies get

00:34:33,380 --> 00:34:38,570
that from their devices like Nokia or

00:34:35,330 --> 00:34:40,940
Google they get that from from users but

00:34:38,570 --> 00:34:44,179
you as an independent researcher where

00:34:40,940 --> 00:34:51,590
do you get the signal I'm part of this

00:34:44,179 --> 00:34:54,230
equations project and so in this product

00:34:51,590 --> 00:34:58,580
I was three PhD students one should do

00:34:54,230 --> 00:35:00,920
the the mobile applications and one did

00:34:58,580 --> 00:35:04,940
the modeling that's me and one did the

00:35:00,920 --> 00:35:07,550
visualizations so we have we have made

00:35:04,940 --> 00:35:10,730
this library for so it's easy to make

00:35:07,550 --> 00:35:15,110
applications that send us data and we

00:35:10,730 --> 00:35:17,990
have made some applications for to get

00:35:15,110 --> 00:35:21,790
users to use it so as a application

00:35:17,990 --> 00:35:26,420
called are you ready where you can

00:35:21,790 --> 00:35:29,960
download this application use it for a

00:35:26,420 --> 00:35:33,650
month and then there will be a nano

00:35:29,960 --> 00:35:36,950
analysis if your traffic pattern is fit

00:35:33,650 --> 00:35:42,770
for a car and if it is you can borrow

00:35:36,950 --> 00:35:46,130
any car for a month after that have

00:35:42,770 --> 00:35:50,830
given some data there's another project

00:35:46,130 --> 00:35:55,210
called learning drive to the moon

00:35:50,830 --> 00:35:57,560
bicycles to the moon where we with the

00:35:55,210 --> 00:36:02,060
municipality of hurting it's a small

00:35:57,560 --> 00:36:07,310
town where I teach they want people to

00:36:02,060 --> 00:36:08,930
bicycle to work and then they have asked

00:36:07,310 --> 00:36:12,140
people to use this application which

00:36:08,930 --> 00:36:15,310
will measure the length of the bike

00:36:12,140 --> 00:36:18,830
distance and then accumulated to

00:36:15,310 --> 00:36:21,290
hopefully get it to to show that they

00:36:18,830 --> 00:36:24,410
could back to the moon and back that

00:36:21,290 --> 00:36:26,870
also gives us the data also when they

00:36:24,410 --> 00:36:32,260
are driving in the car

00:36:26,870 --> 00:36:35,120
so there have been a several small scale

00:36:32,260 --> 00:36:39,470
applications like that that gives us

00:36:35,120 --> 00:36:42,470
some data which we which I can use to

00:36:39,470 --> 00:36:44,930
extract routes and see where people are

00:36:42,470 --> 00:36:46,820
actually moving and I get the speed

00:36:44,930 --> 00:36:50,660
information as well so I can also guess

00:36:46,820 --> 00:36:55,910
where there is congestion so so I can I

00:36:50,660 --> 00:37:03,350
can use this data to also see if my my

00:36:55,910 --> 00:37:06,160
models are correct questions one here

00:37:03,350 --> 00:37:06,160
during the talk

00:37:13,230 --> 00:37:23,270
I have one questions my comment question

00:37:18,200 --> 00:37:26,730
okay I use post is for large lists of

00:37:23,270 --> 00:37:27,810
points geographical points and areas and

00:37:26,730 --> 00:37:31,590
lines

00:37:27,810 --> 00:37:34,440
is there something directly in pipe what

00:37:31,590 --> 00:37:36,440
would you recommend if I have a few

00:37:34,440 --> 00:37:40,470
thousands of points and I want to find

00:37:36,440 --> 00:37:42,210
the closest ones or to group them what

00:37:40,470 --> 00:37:48,720
library would you recommend to storlock

00:37:42,210 --> 00:37:52,350
if you ladies units look briefly at pie

00:37:48,720 --> 00:37:57,390
route which as a browsing facility I

00:37:52,350 --> 00:38:02,700
guess I'm not I don't remember the data

00:37:57,390 --> 00:38:04,530
format that they use for storage but you

00:38:02,700 --> 00:38:08,310
could look for Dijkstra there would be

00:38:04,530 --> 00:38:10,800
several implementations of touch at the

00:38:08,310 --> 00:38:13,790
texture path finding room finding

00:38:10,800 --> 00:38:13,790
algorithm

00:38:17,000 --> 00:38:22,670
it's actually not a map is a database of

00:38:20,090 --> 00:38:26,880
geographical they are freely available

00:38:22,670 --> 00:38:30,930
you have just now didn't update to this

00:38:26,880 --> 00:38:33,810
path here in Bilbao in between the

00:38:30,930 --> 00:38:35,040
increasing number of contributors the

00:38:33,810 --> 00:38:37,050
OpenStreetMap and the increased

00:38:35,040 --> 00:38:40,320
complexity of all the routes you can do

00:38:37,050 --> 00:38:44,100
you can make a lot of further attributes

00:38:40,320 --> 00:38:45,930
is some sometimes it's too much for new

00:38:44,100 --> 00:38:48,780
users and not inviting them because they

00:38:45,930 --> 00:38:50,760
oh I have a lot of things to learn in

00:38:48,780 --> 00:38:53,690
OpenStreetMap there is a nice feature

00:38:50,760 --> 00:38:56,850
where you even don't have to to sign up

00:38:53,690 --> 00:38:58,470
mark a problem or a button submit the

00:38:56,850 --> 00:39:01,110
packet is directly on the page and you

00:38:58,470 --> 00:39:03,300
can just put a marker anywhere on the

00:39:01,110 --> 00:39:08,040
map and write in your language yeah

00:39:03,300 --> 00:39:10,200
there is some change there is always

00:39:08,040 --> 00:39:12,600
someone just like you or me or anyone

00:39:10,200 --> 00:39:16,020
else who goes to the area and then looks

00:39:12,600 --> 00:39:18,900
at this and fixes the problem on the

00:39:16,020 --> 00:39:21,570
best way possible I had to do it for the

00:39:18,900 --> 00:39:24,680
ýstanbul case because I noticed that the

00:39:21,570 --> 00:39:27,859
routes my I Berlin found was

00:39:24,680 --> 00:39:30,140
well it was not what how the taxi

00:39:27,859 --> 00:39:32,539
drivers in the past drivers drove so I

00:39:30,140 --> 00:39:33,980
had to find out why and then it turned

00:39:32,539 --> 00:39:40,339
out that there was a missing roundabout

00:39:33,980 --> 00:39:43,220
so I just put that in yeah there's also

00:39:40,339 --> 00:39:44,750
another feature which i think is a good

00:39:43,220 --> 00:39:47,510
feature foot opens treatment there's a

00:39:44,750 --> 00:39:51,099
there's they are trying to automatically

00:39:47,510 --> 00:39:55,460
find problems so for instance if a

00:39:51,099 --> 00:39:57,950
footpath crosses a motorway that should

00:39:55,460 --> 00:40:00,020
not happen serve the market with an

00:39:57,950 --> 00:40:04,130
arrow so there's a lot of automatic

00:40:00,020 --> 00:40:07,700
features to find problems so if you

00:40:04,130 --> 00:40:09,710
abort you can also look at all these in

00:40:07,700 --> 00:40:13,970
your own area you can look for the

00:40:09,710 --> 00:40:17,990
errors in in obviously there's a special

00:40:13,970 --> 00:40:20,150
map where you all the errors is $20 so

00:40:17,990 --> 00:40:39,520
you could just correct them if you are

00:40:20,150 --> 00:40:39,520

YouTube URL: https://www.youtube.com/watch?v=Qxg1n8as06s


