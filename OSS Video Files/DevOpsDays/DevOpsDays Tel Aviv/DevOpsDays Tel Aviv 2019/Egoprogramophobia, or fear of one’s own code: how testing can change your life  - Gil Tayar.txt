Title: Egoprogramophobia, or fear of one’s own code: how testing can change your life  - Gil Tayar
Publication date: 2020-01-12
Playlist: DevOpsDays Tel Aviv 2019
Description: 
	You fear your code. Once in production, you are afraid of changing it. A bug? You fix it using messy, yet surgical, hacks, rather than a refactoring that leaves your code better.

Admit it! You fear your code. But there's a way out: just write tests. Writing tests is impossible! It makes my productivity tank! My boss doesn’t leave me any time for writing tests!

These are all excuses for not writing tests. I will show you techniques that will force you to write those tests, and I will show you how they help you sleep better at night, make you more productive, and make you a much better developer.
Captions: 
	00:00:00,440 --> 00:00:03,580
[Music]

00:00:04,730 --> 00:00:14,880
good morning a go program of phobia how

00:00:11,160 --> 00:00:17,520
testing can change your life a little

00:00:14,880 --> 00:00:21,869
bit about me I go way back

00:00:17,520 --> 00:00:25,410
eighties dose assembler x86 I tried the

00:00:21,869 --> 00:00:30,000
whole startup founder thing found I

00:00:25,410 --> 00:00:31,349
didn't like it I am I am I was and

00:00:30,000 --> 00:00:35,640
probably till the day I die

00:00:31,349 --> 00:00:39,239
will be a developer incredibly enough I

00:00:35,640 --> 00:00:41,670
like testing testing the code is my own

00:00:39,239 --> 00:00:45,000
code is a passion of mine which is why I

00:00:41,670 --> 00:00:45,809
joined applitools as senior software

00:00:45,000 --> 00:00:47,489
architect

00:00:45,809 --> 00:00:51,629
which is what you what they call

00:00:47,489 --> 00:00:53,399
developers or old as I am and evangelist

00:00:51,629 --> 00:00:55,559
developer relations or whatever for

00:00:53,399 --> 00:00:58,590
applitools we do visual testing so if

00:00:55,559 --> 00:01:00,870
you're a front-end dev up stays and want

00:00:58,590 --> 00:01:04,260
to test how your application looks like

00:01:00,870 --> 00:01:07,260
come talk to me after the talk I want to

00:01:04,260 --> 00:01:10,110
talk about fear she's the mother of

00:01:07,260 --> 00:01:12,900
violence and and I have my own fear I

00:01:10,110 --> 00:01:14,610
have no fear going up on stage and

00:01:12,900 --> 00:01:19,040
talking that that's not a problem for me

00:01:14,610 --> 00:01:22,549
but doing the shy Reznick thing where

00:01:19,040 --> 00:01:25,080
crowd the people the audience

00:01:22,549 --> 00:01:27,240
participates that's that's a huge fear

00:01:25,080 --> 00:01:29,729
of mine so I'm gonna do some audience

00:01:27,240 --> 00:01:35,100
participation if and somebody doesn't

00:01:29,729 --> 00:01:37,170
like it this is the time to exit but

00:01:35,100 --> 00:01:38,939
before we start it's it's it's it's a

00:01:37,170 --> 00:01:41,009
it's a talk it's an inspirational talk

00:01:38,939 --> 00:01:43,200
about my life as a developer and how I

00:01:41,009 --> 00:01:46,110
came to understand what testing is like

00:01:43,200 --> 00:01:49,590
and a bit of guidelines also for free

00:01:46,110 --> 00:01:51,689
all about how to introduce testing but

00:01:49,590 --> 00:01:55,470
because this is a participatory talk I

00:01:51,689 --> 00:01:58,079
want I want to do a little exercise to

00:01:55,470 --> 00:02:00,810
help you participate so let's do that I

00:01:58,079 --> 00:02:03,810
want you not not yet clap your hands

00:02:00,810 --> 00:02:06,299
according to the volume of my of my hand

00:02:03,810 --> 00:02:08,970
right this is high volume for the weird

00:02:06,299 --> 00:02:10,709
of among us okay so let's start by

00:02:08,970 --> 00:02:12,780
really really little clapping come on

00:02:10,709 --> 00:02:15,209
you can do it you can do it everybody

00:02:12,780 --> 00:02:17,390
everybody this was taught to me by my

00:02:15,209 --> 00:02:24,920
inspiration Shai Resnick there we go

00:02:17,390 --> 00:02:27,990
there we go higher and yeah thank you

00:02:24,920 --> 00:02:30,090
okay I think we're ready we I'm gonna

00:02:27,990 --> 00:02:32,670
sing and you're gonna help me don't

00:02:30,090 --> 00:02:36,120
worry it's just a word or two here and

00:02:32,670 --> 00:02:38,930
there okay and who knows what this song

00:02:36,120 --> 00:02:42,239
is Supertramp

00:02:38,930 --> 00:02:44,130
it's a logical song so I'm gonna start

00:02:42,239 --> 00:02:47,040
singing you see those underlined words

00:02:44,130 --> 00:02:51,090
that's where your join in just those if

00:02:47,040 --> 00:02:54,560
you want more go ahead I mean I'm good

00:02:51,090 --> 00:02:59,400
with with everything so I'm a huge

00:02:54,560 --> 00:03:04,590
singer so are we ready when I was young

00:02:59,400 --> 00:03:09,090
it seemed that life was so a miracle oh

00:03:04,590 --> 00:03:15,500
it was beautiful and all the birds in

00:03:09,090 --> 00:03:20,430
the trees will t be singing so oh oh

00:03:15,500 --> 00:03:23,370
playfully watching me and yeah I was

00:03:20,430 --> 00:03:27,150
really young I just got my first PC this

00:03:23,370 --> 00:03:28,829
is me really that that's my PC but

00:03:27,150 --> 00:03:33,120
actually my first one I was a sinclair

00:03:28,829 --> 00:03:37,500
zx81 it had 1k and I got my first 16 K

00:03:33,120 --> 00:03:41,609
addition to my zx81 and I wrote these

00:03:37,500 --> 00:03:44,760
little programs and games and in basic I

00:03:41,609 --> 00:03:48,120
wrote mastermind if you know a bhoot

00:03:44,760 --> 00:03:51,329
bugia firfer for the Israelis among us

00:03:48,120 --> 00:03:55,170
and against the computer even I was I

00:03:51,329 --> 00:03:58,709
was a genius and I found a bug in the

00:03:55,170 --> 00:04:01,079
program no problem I fixed it I found it

00:03:58,709 --> 00:04:04,109
again because you know these things tend

00:04:01,079 --> 00:04:06,900
to come back I fixed it again no problem

00:04:04,109 --> 00:04:10,049
add a feature just added it broke

00:04:06,900 --> 00:04:12,870
something else fix that no problem

00:04:10,049 --> 00:04:16,019
remove code why should I

00:04:12,870 --> 00:04:18,900
spaghetti refactoring what was that what

00:04:16,019 --> 00:04:22,880
are you talking about life was beautiful

00:04:18,900 --> 00:04:22,880
at the age of 13

00:04:23,260 --> 00:04:34,510
okay ready but then they send me away to

00:04:29,389 --> 00:04:38,330
teach me how to be logical Oh

00:04:34,510 --> 00:04:42,790
responsible and then they showed me a

00:04:38,330 --> 00:04:49,280
world where I could be so how clinical

00:04:42,790 --> 00:04:52,370
or intellectual okay I started working

00:04:49,280 --> 00:04:54,680
professionally my mom for all those who

00:04:52,370 --> 00:04:58,070
know IDF Israeli Defense Forces that's

00:04:54,680 --> 00:05:00,740
my first job I'm a job Nick yeah so yeah

00:04:58,070 --> 00:05:03,680
it's definitely a job and and

00:05:00,740 --> 00:05:08,260
unfortunately things start to going

00:05:03,680 --> 00:05:12,830
downhill and we'll talk about that yeah

00:05:08,260 --> 00:05:14,780
people love these at first everything

00:05:12,830 --> 00:05:15,500
was good I got the specs developed the

00:05:14,780 --> 00:05:17,720
product

00:05:15,500 --> 00:05:20,600
ran it found the bugs fixed them again

00:05:17,720 --> 00:05:21,600
until everything basically worked but

00:05:20,600 --> 00:05:22,900
then I got the shakes

00:05:21,600 --> 00:05:25,610
[Music]

00:05:22,900 --> 00:05:28,100
every time I deployed the production I

00:05:25,610 --> 00:05:31,010
got the shakes you know I want to hit

00:05:28,100 --> 00:05:35,360
that Enter key and something in me has

00:05:31,010 --> 00:05:37,460
fear why why did I get the shakes

00:05:35,360 --> 00:05:42,229
whenever I wanted to deploy and the

00:05:37,460 --> 00:05:44,180
answer is echo program of phobia it's

00:05:42,229 --> 00:05:47,600
look it up in Wikipedia actually don't

00:05:44,180 --> 00:05:52,160
because I just invented it it's fear of

00:05:47,600 --> 00:05:56,570
one's own codes okay eggo program o

00:05:52,160 --> 00:05:58,460
phobia fear of one's own code we feel we

00:05:56,570 --> 00:06:02,600
don't we don't like to say it but we do

00:05:58,460 --> 00:06:04,580
fear the code that we write let's talk

00:06:02,600 --> 00:06:07,220
about things we do with with our own

00:06:04,580 --> 00:06:08,690
code we like to add code and the manager

00:06:07,220 --> 00:06:11,120
thinks that adding a feature is like

00:06:08,690 --> 00:06:13,760
Lego you just add the code and there

00:06:11,120 --> 00:06:18,650
there we have a feature the reality is

00:06:13,760 --> 00:06:22,400
this usually we all know that that's our

00:06:18,650 --> 00:06:26,060
code after we add code ok removing code

00:06:22,400 --> 00:06:29,240
we like to do that a lot we think of it

00:06:26,060 --> 00:06:32,210
as surgical you know we just do that

00:06:29,240 --> 00:06:33,889
thing and boom everything works the

00:06:32,210 --> 00:06:38,560
reality

00:06:33,889 --> 00:06:38,560
is this wait for it

00:06:44,420 --> 00:06:52,540
Oh No yeah that's what happens when you

00:06:50,660 --> 00:06:54,590
add something late at night yesterday

00:06:52,540 --> 00:06:56,240
refactoring code there's this nice

00:06:54,590 --> 00:07:00,350
little doggie and and and they're

00:06:56,240 --> 00:07:02,990
cleaning him or her think of that but

00:07:00,350 --> 00:07:04,820
the the the refactoring actually looks

00:07:02,990 --> 00:07:06,560
like this you start out and you change

00:07:04,820 --> 00:07:08,360
things and everything's good and then

00:07:06,560 --> 00:07:11,780
you change some more and you don't know

00:07:08,360 --> 00:07:14,210
where you are anymore and it doesn't

00:07:11,780 --> 00:07:16,580
matter whether it's our code is a

00:07:14,210 --> 00:07:18,860
horribly written pile of spaghetti or a

00:07:16,580 --> 00:07:21,890
loveling lee crafted set of loosely

00:07:18,860 --> 00:07:28,120
coupled modules we fear changing our

00:07:21,890 --> 00:07:31,850
code I'd made it feel the fear okay

00:07:28,120 --> 00:07:34,220
changing code means breaking the app so

00:07:31,850 --> 00:07:37,460
I understood that and I talked to my

00:07:34,220 --> 00:07:40,220
boss and he taught me how to be sensible

00:07:37,460 --> 00:07:42,920
well test the app manually after every

00:07:40,220 --> 00:07:46,730
change no problem logical do code

00:07:42,920 --> 00:07:48,740
reviews responsible don't do lots of

00:07:46,730 --> 00:07:50,840
changes even if it makes sense do

00:07:48,740 --> 00:07:52,550
surgical things so you'll break as

00:07:50,840 --> 00:07:56,780
little as possible and forget

00:07:52,550 --> 00:07:58,190
refactorings please well obviously my

00:07:56,780 --> 00:08:00,610
code after a while started looking like

00:07:58,190 --> 00:08:04,580
spaghetti which made things even worse

00:08:00,610 --> 00:08:06,730
so they sent in QA QA means checking the

00:08:04,580 --> 00:08:09,440
code after I write it checking the app

00:08:06,730 --> 00:08:11,990
because developers can't test their own

00:08:09,440 --> 00:08:17,150
code because it's like a cat guarding

00:08:11,990 --> 00:08:19,010
the milk yep matron spaghetti even worse

00:08:17,150 --> 00:08:24,050
because now you have these long release

00:08:19,010 --> 00:08:27,740
cycles so what do we do we manage the

00:08:24,050 --> 00:08:29,240
fear it's called JIRA and hey kiddo

00:08:27,740 --> 00:08:31,220
that's what my boss said that's how it

00:08:29,240 --> 00:08:37,120
is that software development in the

00:08:31,220 --> 00:08:41,490
grown-up world grow up but no I

00:08:37,120 --> 00:08:47,560
questioned right ready

00:08:41,490 --> 00:08:53,970
there are times when all the world the

00:08:47,560 --> 00:08:57,760
questions run for such a simple man

00:08:53,970 --> 00:09:01,650
won't you please please tell me what

00:08:57,760 --> 00:09:06,520
we've I know it sounds

00:09:01,650 --> 00:09:09,280
please tell me who thank you well who

00:09:06,520 --> 00:09:12,490
are we yeah who are we

00:09:09,280 --> 00:09:13,990
we're developers but what does that mean

00:09:12,490 --> 00:09:16,870
is this it

00:09:13,990 --> 00:09:18,740
do we have to live with echo programa

00:09:16,870 --> 00:09:20,370
phobia the shakes

00:09:18,740 --> 00:09:24,760
[Music]

00:09:20,370 --> 00:09:28,030
no I'll introduce something called

00:09:24,760 --> 00:09:31,300
developer testing what is developer

00:09:28,030 --> 00:09:34,540
testing well it's not QA it's writing

00:09:31,300 --> 00:09:37,960
code that tests your own code as part of

00:09:34,540 --> 00:09:40,720
writing the code itself part of your

00:09:37,960 --> 00:09:43,300
development is testing not a separate

00:09:40,720 --> 00:09:46,120
task oh I don't have time because my

00:09:43,300 --> 00:09:47,410
boss doesn't want me to do testing the

00:09:46,120 --> 00:09:51,100
boss doesn't have to tell you to do

00:09:47,410 --> 00:09:53,410
testing it's part of development it's

00:09:51,100 --> 00:09:56,050
not your boss's concern how much time

00:09:53,410 --> 00:09:58,210
you delegate to that it is not QA

00:09:56,050 --> 00:10:01,030
automation engineers writing tests that

00:09:58,210 --> 00:10:05,400
is this is explicitly developer zoning

00:10:01,030 --> 00:10:09,310
the tests that they write and testing

00:10:05,400 --> 00:10:12,700
just like ridiculous abolishes echo

00:10:09,310 --> 00:10:15,040
programmer phobia really I have just a

00:10:12,700 --> 00:10:18,880
teeny tiny amounts of it and the shakes

00:10:15,040 --> 00:10:26,530
are almost non-existent but the path is

00:10:18,880 --> 00:10:29,190
not easy some philosophy who's read

00:10:26,530 --> 00:10:31,960
Hermann Hesse's Siddhartha oh thank you

00:10:29,190 --> 00:10:34,540
which teacher can protect him to him

00:10:31,960 --> 00:10:36,520
from living his life for himself from

00:10:34,540 --> 00:10:41,320
drinking the bitter drink for himself

00:10:36,520 --> 00:10:43,120
from finding his path for himself I can

00:10:41,320 --> 00:10:44,500
show you the beginning of the path to

00:10:43,120 --> 00:10:47,110
developer testing and I can give you a

00:10:44,500 --> 00:10:49,750
map and I will just a sec but it's my

00:10:47,110 --> 00:10:51,670
path it's my map you must find your own

00:10:49,750 --> 00:10:56,709
way to developer testing

00:10:51,670 --> 00:11:00,310
find your own path not mine 5k last one

00:10:56,709 --> 00:11:05,620
I say what would you say or they'll be

00:11:00,310 --> 00:11:09,250
calling you liberal or fanatical

00:11:05,620 --> 00:11:10,899
Thank You Sharon how do we test how do

00:11:09,250 --> 00:11:13,600
you abolish ACO program and phobia well

00:11:10,899 --> 00:11:15,839
I have only guidelines a map first of

00:11:13,600 --> 00:11:18,640
all don't just do unit testing please

00:11:15,839 --> 00:11:21,459
okay on all your tests including

00:11:18,640 --> 00:11:23,019
end-to-end don't leave it to QA and if

00:11:21,459 --> 00:11:25,390
you have QA and sure that they get a

00:11:23,019 --> 00:11:26,740
working product not something they need

00:11:25,390 --> 00:11:29,290
to find the interesting bugs not the

00:11:26,740 --> 00:11:31,360
regular box choose the testing school

00:11:29,290 --> 00:11:33,339
based on the likes on how you like to

00:11:31,360 --> 00:11:35,589
test and there are three main schools

00:11:33,339 --> 00:11:38,079
and alcohol touch them like the pyramid

00:11:35,589 --> 00:11:41,440
school the diamond school and the

00:11:38,079 --> 00:11:43,300
hexagon the pyramid emphasizes unit only

00:11:41,440 --> 00:11:45,399
emphasizes there are others but they

00:11:43,300 --> 00:11:48,490
emphasize unit because of the speed the

00:11:45,399 --> 00:11:51,700
speed of unit testing the pyramid and it

00:11:48,490 --> 00:11:54,790
emphasizes testing of a lot of things in

00:11:51,700 --> 00:11:57,880
together that's integration testing but

00:11:54,790 --> 00:11:59,790
less of that the diamond says I units

00:11:57,880 --> 00:12:02,740
don't give me much confidence and

00:11:59,790 --> 00:12:05,260
integration test today give me speed so

00:12:02,740 --> 00:12:08,260
I'll emphasize integration and the

00:12:05,260 --> 00:12:10,720
hexagonal fantasizes units a lot and

00:12:08,260 --> 00:12:12,910
treats integration as only checking the

00:12:10,720 --> 00:12:14,529
outer layers where you network you

00:12:12,910 --> 00:12:17,579
interface to your network or to your

00:12:14,529 --> 00:12:20,800
database or whatever which is better

00:12:17,579 --> 00:12:24,940
it's a religion really I'm a pyramid guy

00:12:20,800 --> 00:12:26,199
but hey some of my best developers my

00:12:24,940 --> 00:12:28,209
some of my best friends but the

00:12:26,199 --> 00:12:31,360
commonality is the need for speed your

00:12:28,209 --> 00:12:32,560
tests run quick very few and twin tests

00:12:31,360 --> 00:12:34,570
if you're doing a lot of entice Ness

00:12:32,560 --> 00:12:36,519
you're doing it wrong and testing all

00:12:34,570 --> 00:12:39,220
the layers of your code not just the

00:12:36,519 --> 00:12:41,500
outer layers let's continue

00:12:39,220 --> 00:12:44,199
there are fanatics out there believe me

00:12:41,500 --> 00:12:46,720
I talk to them every day listen to them

00:12:44,199 --> 00:12:48,519
they have good advice but don't listen

00:12:46,720 --> 00:12:52,089
to their fanaticism choose your own path

00:12:48,519 --> 00:12:53,829
it doesn't have to be TDD okay it can be

00:12:52,089 --> 00:12:56,709
some of my best friends but it doesn't

00:12:53,829 --> 00:12:59,130
have to be don't write too many tests

00:12:56,709 --> 00:13:02,050
don't go for 100% cover it's it's a myth

00:12:59,130 --> 00:13:03,730
okay too many tests are a problems right

00:13:02,050 --> 00:13:04,250
enough tests to abolish echo program

00:13:03,730 --> 00:13:08,120
flow

00:13:04,250 --> 00:13:09,800
not more as little as possible and have

00:13:08,120 --> 00:13:10,430
them grow with time don't try to do it

00:13:09,800 --> 00:13:12,530
all at once

00:13:10,430 --> 00:13:14,270
let the production show you where to add

00:13:12,530 --> 00:13:16,300
the test let's your users I know it's

00:13:14,270 --> 00:13:18,890
horrible but it's true

00:13:16,300 --> 00:13:21,680
let's take too long paralyze them break

00:13:18,890 --> 00:13:23,870
them up break your modules do modular

00:13:21,680 --> 00:13:26,330
programming and tests will take less

00:13:23,870 --> 00:13:27,920
time ci is less important than you think

00:13:26,330 --> 00:13:31,310
I'll skip that because I don't have the

00:13:27,920 --> 00:13:32,360
time but really check your code manually

00:13:31,310 --> 00:13:36,260
as little as possible

00:13:32,360 --> 00:13:39,590
I don't ever check my code manually run

00:13:36,260 --> 00:13:41,150
the product the only way I write code is

00:13:39,590 --> 00:13:43,370
write code and then write the tests and

00:13:41,150 --> 00:13:45,560
then deploy to production I never run it

00:13:43,370 --> 00:13:49,190
manually like just do a little check

00:13:45,560 --> 00:13:50,660
never and no big project if you're

00:13:49,190 --> 00:13:52,100
starting out don't say yeah I'm gonna

00:13:50,660 --> 00:13:54,710
take three months and write all the

00:13:52,100 --> 00:13:56,870
tests and all that no start small let it

00:13:54,710 --> 00:13:59,270
grow with time it's not a sprint it's a

00:13:56,870 --> 00:14:01,790
marathon you want to be in a year or two

00:13:59,270 --> 00:14:03,530
years ago look back and say oh my god I

00:14:01,790 --> 00:14:05,150
don't have a good programmer phobia

00:14:03,530 --> 00:14:09,620
anymore but it takes time it takes a

00:14:05,150 --> 00:14:11,890
year and learning testing will take

00:14:09,620 --> 00:14:18,620
years also it's okay it's a long path

00:14:11,890 --> 00:14:20,810
start on that tomorrow last one this is

00:14:18,620 --> 00:14:23,360
a bit different this is from doom from

00:14:20,810 --> 00:14:25,280
fact Herbert I want you all to rise

00:14:23,360 --> 00:14:27,200
because this is the litany of echo

00:14:25,280 --> 00:14:30,080
program of focus so everybody rise I

00:14:27,200 --> 00:14:32,750
know I know it's a stay everybody there

00:14:30,080 --> 00:14:36,080
we go come on come on everybody I want

00:14:32,750 --> 00:14:38,960
you to recite with me the litany of echo

00:14:36,080 --> 00:14:47,680
programa phobia it's a bit changed okay

00:14:38,960 --> 00:14:51,680
are we ready I must not

00:14:47,680 --> 00:14:55,190
is the mind killer fear is the little

00:14:51,680 --> 00:14:59,720
death that brings total obliteration I

00:14:55,190 --> 00:15:03,260
will test my code I will permit it to

00:14:59,720 --> 00:15:07,040
pass over and through me and when it has

00:15:03,260 --> 00:15:08,600
gone past I will turn the inner I come

00:15:07,040 --> 00:15:11,630
on to see its path

00:15:08,600 --> 00:15:17,300
where the fear has gone oh there will be

00:15:11,630 --> 00:15:19,700
nothing only my tests will remain go

00:15:17,300 --> 00:15:21,829
home start writing tests abolish the

00:15:19,700 --> 00:15:25,930
fear of your abode abolish echo

00:15:21,829 --> 00:15:25,930
programer phobia thank you very much

00:15:25,990 --> 00:15:33,519
[Applause]

00:15:28,010 --> 00:15:33,519

YouTube URL: https://www.youtube.com/watch?v=43x7PqzPoAc


