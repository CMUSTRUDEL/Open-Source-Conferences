Title: [Ignite] That Garbage Benchmark is Useless - Ronen Botzer
Publication date: 2020-01-12
Playlist: DevOpsDays Tel Aviv 2019
Description: 
	We've all seen some breathtaking software benchmarks out there. We've heard some fantastic claims. Before you get too excited, use some critical thinking - can you use this information, or is it so cooked up as to be useless?

A database company's CTO claims updates between two data centers 6633km apart in less than a millisecond? Absolutely! Their technology is so fast, they've discovered a way to move TCP/IP packets faster than light.

What are some simple approaches to get a sense whether a benchmark is something solid that lets you evaluate a technology, useful for capacity planning, or a pile of poo.

This will be a concise rant about crappy benchmarks, and how to protect your mind against them.
Captions: 
	00:00:00,440 --> 00:00:03,580
[Music]

00:00:04,310 --> 00:00:08,880
okay this talk is that garbage benchmark

00:00:08,069 --> 00:00:11,000
is useless

00:00:08,880 --> 00:00:13,740
identifying bad technical marketing

00:00:11,000 --> 00:00:16,470
let's go I hope this is gonna do okay so

00:00:13,740 --> 00:00:18,300
I'm gonna Motel I've been at a data

00:00:16,470 --> 00:00:19,500
based company we're not supposed to

00:00:18,300 --> 00:00:21,510
mention it by names for five and a half

00:00:19,500 --> 00:00:22,680
years I started an engineer there was a

00:00:21,510 --> 00:00:24,869
solution architect now I'm doing

00:00:22,680 --> 00:00:26,189
director of product that's what happens

00:00:24,869 --> 00:00:28,070
when people die

00:00:26,189 --> 00:00:31,170
you know useless people come in anyway

00:00:28,070 --> 00:00:33,239
who actually cares about benchmarks

00:00:31,170 --> 00:00:34,950
nobody when you go to those parties

00:00:33,239 --> 00:00:36,239
where it's all engineers maybe you're

00:00:34,950 --> 00:00:37,410
allowed to talk about it but my wife

00:00:36,239 --> 00:00:39,480
would kill me if I ever mentioned that

00:00:37,410 --> 00:00:41,879
there if you're here you've probably

00:00:39,480 --> 00:00:43,379
heard about one benchmarks are usually a

00:00:41,879 --> 00:00:44,850
marketing job they're not engineering

00:00:43,379 --> 00:00:46,829
maybe they have an engineer associated

00:00:44,850 --> 00:00:49,260
with them but usually companies really

00:00:46,829 --> 00:00:51,750
use them to cover up technical dent okay

00:00:49,260 --> 00:00:53,969
so your engineers you're supposed to be

00:00:51,750 --> 00:00:55,530
rational and competent in theory it's

00:00:53,969 --> 00:00:57,629
time you're supposed to be a little more

00:00:55,530 --> 00:00:59,460
skeptical too so I want to point out

00:00:57,629 --> 00:01:01,710
some tricks that I've been noticing so

00:00:59,460 --> 00:01:03,090
you can protect your mind my examples

00:01:01,710 --> 00:01:04,769
are database related because that's why

00:01:03,090 --> 00:01:07,500
I don't know but it works to everything

00:01:04,769 --> 00:01:09,630
so I heard I saw this thing online with

00:01:07,500 --> 00:01:12,150
like a CTO of a database company and I

00:01:09,630 --> 00:01:13,290
usually trust bald people so and he was

00:01:12,150 --> 00:01:14,820
talking about how he has an active

00:01:13,290 --> 00:01:17,939
active cluster that's deployed across

00:01:14,820 --> 00:01:19,200
continents and he can do transfer of

00:01:17,939 --> 00:01:21,150
data between them in less than a

00:01:19,200 --> 00:01:23,909
millisecond and that was amazing

00:01:21,150 --> 00:01:26,520
because you know what it's magic the

00:01:23,909 --> 00:01:28,350
distance between Virginia and Frankfurt

00:01:26,520 --> 00:01:30,240
is six thousand kilometers speed of

00:01:28,350 --> 00:01:33,689
light that's 22 milliseconds one-way

00:01:30,240 --> 00:01:35,220
okay but somehow with CRD T's the guy is

00:01:33,689 --> 00:01:36,869
 sending messages back and forth

00:01:35,220 --> 00:01:38,909
eventually consistent in less than a

00:01:36,869 --> 00:01:40,950
millisecond okay so what the hell is

00:01:38,909 --> 00:01:43,049
going on here the trick is in the talk

00:01:40,950 --> 00:01:44,850
the guy says hey listen a millisecond

00:01:43,049 --> 00:01:46,829
writes then he drops the fact that it's

00:01:44,850 --> 00:01:48,180
local then he adds the word that has

00:01:46,829 --> 00:01:49,799
nothing to do with anything like CR

00:01:48,180 --> 00:01:51,329
Deepika has nothing to delay and see and

00:01:49,799 --> 00:01:53,490
then he puts a picture of two continents

00:01:51,329 --> 00:01:56,369
and now in your head you know that they

00:01:53,490 --> 00:02:00,119
do that okay so that's okay

00:01:56,369 --> 00:02:01,619
okay so one thing is strong eventual

00:02:00,119 --> 00:02:03,149
consistency and strong consistency as

00:02:01,619 --> 00:02:04,409
you saw yesterday are not the same thing

00:02:03,149 --> 00:02:06,600
they're academic terms than mean

00:02:04,409 --> 00:02:08,039
completely different things okay that's

00:02:06,600 --> 00:02:10,739
just like saying that the Santa Cruz

00:02:08,039 --> 00:02:12,870
warriors where I'm from are the same as

00:02:10,739 --> 00:02:13,670
the Golden State Warriors just because

00:02:12,870 --> 00:02:15,230
they won

00:02:13,670 --> 00:02:16,520
first place and their own leagues one

00:02:15,230 --> 00:02:18,980
year doesn't mean they're the same thing

00:02:16,520 --> 00:02:20,750
so you know just beer over that are they

00:02:18,980 --> 00:02:22,760
obfuscating terms and why are they

00:02:20,750 --> 00:02:24,260
obfuscating terms next thing bad

00:02:22,760 --> 00:02:26,599
benchmark smells we'll go over a few

00:02:24,260 --> 00:02:29,300
like bad code smells the first thing the

00:02:26,599 --> 00:02:31,190
massively over-provision smell recently

00:02:29,300 --> 00:02:33,110
an IOT benchmark for a company we're

00:02:31,190 --> 00:02:34,880
gonna call s there's a databases they

00:02:33,110 --> 00:02:38,000
have a total data set of seven terabytes

00:02:34,880 --> 00:02:41,180
the 83 node cluster it has 31 terabytes

00:02:38,000 --> 00:02:43,069
of RAM 300 terabytes of disk so why

00:02:41,180 --> 00:02:44,870
would you need a data set so small if

00:02:43,069 --> 00:02:47,480
the capacity is like a hundred

00:02:44,870 --> 00:02:49,160
times bigger you know does this actually

00:02:47,480 --> 00:02:51,170
tell you anything about a real

00:02:49,160 --> 00:02:52,430
deployment if you you know would you

00:02:51,170 --> 00:02:54,470
ever deploy a hundred times more

00:02:52,430 --> 00:02:56,780
hardware for something next thing the

00:02:54,470 --> 00:03:00,350
absurdly over-provisioned data you know

00:02:56,780 --> 00:03:02,540
data set we had some company database -

00:03:00,350 --> 00:03:05,360
let's call them are they use a hundred

00:03:02,540 --> 00:03:06,080
billion keys a hundred bytes 93

00:03:05,360 --> 00:03:08,120
gigabytes

00:03:06,080 --> 00:03:10,069
these 93 kibbutz are running on 40 nodes

00:03:08,120 --> 00:03:12,590
that have six terabytes of RAM one

00:03:10,069 --> 00:03:14,480
percent cut you till ization you know

00:03:12,590 --> 00:03:17,000
what else is closed at one percent the

00:03:14,480 --> 00:03:18,799
l2 cache now the real question is do you

00:03:17,000 --> 00:03:21,410
know anybody's gonna buy an l2 cache

00:03:18,799 --> 00:03:22,940
database because I don't and that's you

00:03:21,410 --> 00:03:24,859
know is this pure marketing or not

00:03:22,940 --> 00:03:26,720
that's kind of how it feels ok the next

00:03:24,859 --> 00:03:29,239
thing is the data access is in random

00:03:26,720 --> 00:03:30,680
pattern which means that all the clients

00:03:29,239 --> 00:03:32,660
are asking for the same date at the same

00:03:30,680 --> 00:03:35,390
time so it's not only in DRAM it's all

00:03:32,660 --> 00:03:36,859
cash in l2 l3 it's fantastic but it'll

00:03:35,390 --> 00:03:38,870
never happen to you in the real world so

00:03:36,859 --> 00:03:41,420
maybe that's a useless benchmark as well

00:03:38,870 --> 00:03:43,310
is this anything like the real access

00:03:41,420 --> 00:03:45,650
pattern you know that you would actually

00:03:43,310 --> 00:03:47,660
get unless maybe your clients always ask

00:03:45,650 --> 00:03:50,299
for one two three four in a row the next

00:03:47,660 --> 00:03:52,250
thing is is the benchmark tool actually

00:03:50,299 --> 00:03:54,620
doing a random load when you say - -

00:03:52,250 --> 00:03:57,440
data are you know random data okay next

00:03:54,620 --> 00:03:59,750
thing unfair comparison smell is the

00:03:57,440 --> 00:04:01,190
competing system is configured okay is

00:03:59,750 --> 00:04:02,690
the competing system used in a way that

00:04:01,190 --> 00:04:05,000
nobody actually ever uses it

00:04:02,690 --> 00:04:07,640
an honest benchmark actually gives a

00:04:05,000 --> 00:04:09,769
chance for the other system right and a

00:04:07,640 --> 00:04:11,359
real benchmark is written like a physics

00:04:09,769 --> 00:04:14,420
paper you should be able to read it

00:04:11,359 --> 00:04:16,720
evaluate and critique it all right next

00:04:14,420 --> 00:04:18,979
thing they're not reproducible smell the

00:04:16,720 --> 00:04:20,989
procedure this used for the benchmark

00:04:18,979 --> 00:04:22,490
isn't detailed in any way the

00:04:20,989 --> 00:04:25,159
configuration tuning parameters are

00:04:22,490 --> 00:04:26,599
missing a good benchmark again should

00:04:25,159 --> 00:04:27,420
give you all the details so you

00:04:26,599 --> 00:04:30,180
can actually

00:04:27,420 --> 00:04:32,190
for yourself is this real or not so can

00:04:30,180 --> 00:04:33,480
you verify this independently that's

00:04:32,190 --> 00:04:36,120
kind of an important thing for any

00:04:33,480 --> 00:04:39,360
research last thing almost really cool

00:04:36,120 --> 00:04:41,010
the restricted speech smell so nobody

00:04:39,360 --> 00:04:43,080
but the customers have access to the

00:04:41,010 --> 00:04:44,040
actual software the customers even

00:04:43,080 --> 00:04:45,720
though they're paying for the software

00:04:44,040 --> 00:04:47,550
are not allowed to actually write about

00:04:45,720 --> 00:04:49,680
it legally they're not allowed to blog

00:04:47,550 --> 00:04:52,460
about it so what do they have to hide

00:04:49,680 --> 00:04:54,900
all right if you see something like that

00:04:52,460 --> 00:04:56,610
then you know maybe it's a problem so I

00:04:54,900 --> 00:04:58,560
hope these things are useful

00:04:56,610 --> 00:05:00,540
you should read benchmarks closely or

00:04:58,560 --> 00:05:03,450
the Critical I probably do your own

00:05:00,540 --> 00:05:04,610
proof of concept of you care and thanks

00:05:03,450 --> 00:05:13,020
for listening

00:05:04,610 --> 00:05:18,160
[Applause]

00:05:13,020 --> 00:05:18,160

YouTube URL: https://www.youtube.com/watch?v=cvuqkKOcHVY


