Title: A Culture of Automation - Joe Smith - DevOpsDays Tel Aviv 2017
Publication date: 2017-11-28
Playlist: DevOpsDays Tel Aviv 2017
Description: 
	As teams grow and systems become more complicated, what used to be a simple set of commands quickly become branching logic chains that require insight and expertise. Runbooks serve as a decent structure for communicating this to teams around the globe but may miss crucial information that only an expert would know. Finally, runbooks are only as good as the last time they were updated, and in regular use, they stay out of typical workflows and become forgotten until they’re needed most.

This talk describes Slack’s approach to good runbook hygiene, as well as our process for moving to automated tools, and how it’s helped us scale our teams and infrastructure. We’ll dive into the tradeoffs of automation, as well as how to make sure the process is accessible to all members of the team, allowing them to gain familiarity and skills with tooling. Attendees will be able to not only improve their runbook contents and format but learn how to make code speak for operational procedures and ensure they are working best when needed most.
Captions: 
	00:00:01,980 --> 00:00:08,700
[Music]

00:00:06,180 --> 00:00:10,500
hello everybody thanks much welcome so

00:00:08,700 --> 00:00:12,090
far it's been great to get to know so

00:00:10,500 --> 00:00:15,260
many people out here and hear about the

00:00:12,090 --> 00:00:20,010
projects you're working on like earlier

00:00:15,260 --> 00:00:22,500
hospitality there's so much organizer is

00:00:20,010 --> 00:00:24,150
proper work leave this together together

00:00:22,500 --> 00:00:26,550
right here to talk about what we're

00:00:24,150 --> 00:00:28,619
doing in organizations and how we make

00:00:26,550 --> 00:00:35,090
supporting each other through easier and

00:00:28,619 --> 00:00:35,090
also hopefully great software and so

00:00:35,329 --> 00:00:40,500
we're going to talk a little bit about

00:00:37,050 --> 00:00:42,420
kind of the approach that we take to

00:00:40,500 --> 00:00:44,550
reliability engineering or operations

00:00:42,420 --> 00:00:47,129
engineering start out so that we're

00:00:44,550 --> 00:00:48,870
going to kind of deep dive into so the

00:00:47,129 --> 00:00:50,940
documentation that we called run books

00:00:48,870 --> 00:00:54,719
and these are very actionable checklists

00:00:50,940 --> 00:00:57,000
that I hope you know what procedures to

00:00:54,719 --> 00:00:59,760
follow in case something breaks so what

00:00:57,000 --> 00:01:02,399
you sort of start out with some of the

00:00:59,760 --> 00:01:04,470
metrics you might look at and what

00:01:02,399 --> 00:01:06,060
operations you need to perform and then

00:01:04,470 --> 00:01:08,610
after that we're gonna touch a little

00:01:06,060 --> 00:01:10,320
bit about what you kind of have this

00:01:08,610 --> 00:01:12,450
written out in text that a human can

00:01:10,320 --> 00:01:13,890
read some of the process some of the

00:01:12,450 --> 00:01:15,900
ways that you can go about converting

00:01:13,890 --> 00:01:17,520
that into something that a computer can

00:01:15,900 --> 00:01:18,750
read so we're not going to get too much

00:01:17,520 --> 00:01:20,460
into the code because I know that that's

00:01:18,750 --> 00:01:22,080
not really what we're here but more of

00:01:20,460 --> 00:01:25,080
the mindset of how you can kind of

00:01:22,080 --> 00:01:26,610
systematically approach structuring

00:01:25,080 --> 00:01:28,049
something to make it easy for humans and

00:01:26,610 --> 00:01:30,750
then apply that to the computers which

00:01:28,049 --> 00:01:34,229
is pretty fun so a little bit about

00:01:30,750 --> 00:01:36,869
myself so I started out my first job was

00:01:34,229 --> 00:01:38,759
in help desk at Google and it was pretty

00:01:36,869 --> 00:01:40,979
awesome I spent a bunch of time in

00:01:38,759 --> 00:01:42,840
Mountain View or as primarily based also

00:01:40,979 --> 00:01:44,640
in the Boston office as well as the

00:01:42,840 --> 00:01:46,770
Google Zurich office which is pretty fun

00:01:44,640 --> 00:01:49,530
so I got a chance to kind of experience

00:01:46,770 --> 00:01:51,810
like a global IT infrastructure and also

00:01:49,530 --> 00:01:53,070
got to figure out how board was run got

00:01:51,810 --> 00:01:55,290
to launch some systems out there with

00:01:53,070 --> 00:01:56,880
some teams for some side projects so I

00:01:55,290 --> 00:01:59,189
really felt like it was a pretty great

00:01:56,880 --> 00:02:01,619
experience kind of learning how global

00:01:59,189 --> 00:02:04,020
infrastructure is run after that I

00:02:01,619 --> 00:02:06,299
joined Twitter where was the first sre

00:02:04,020 --> 00:02:08,819
for a system called mesos where we sort

00:02:06,299 --> 00:02:09,179
of took sort of the inspiration from

00:02:08,819 --> 00:02:10,920
borg

00:02:09,179 --> 00:02:13,450
and then we actually built out a very

00:02:10,920 --> 00:02:15,190
large container system so we

00:02:13,450 --> 00:02:18,670
helped migrate Twitter's Ruby on Rails

00:02:15,190 --> 00:02:20,410
monorail which is just one big Ruby app

00:02:18,670 --> 00:02:22,840
you may have heard about and broke it

00:02:20,410 --> 00:02:24,700
down into a huge fleet of micro services

00:02:22,840 --> 00:02:26,470
and ran all of that on top of Aurora and

00:02:24,700 --> 00:02:28,569
mesas so we kind of started with the

00:02:26,470 --> 00:02:30,340
cluster that was probably about less

00:02:28,569 --> 00:02:31,959
than 100 servers and then we grew it up

00:02:30,340 --> 00:02:33,069
to tens of thousands of machines and

00:02:31,959 --> 00:02:35,530
multiple data centers around the world

00:02:33,069 --> 00:02:36,850
so I was really fortunate to work with a

00:02:35,530 --> 00:02:40,209
great team learn from a lot of smart

00:02:36,850 --> 00:02:41,890
people what is very focused so I didn't

00:02:40,209 --> 00:02:43,780
really have the opportunity to get the

00:02:41,890 --> 00:02:46,110
breadth of experience so he's you know

00:02:43,780 --> 00:02:49,300
running a cluster and doing some like

00:02:46,110 --> 00:02:50,920
economics of resource management how do

00:02:49,300 --> 00:02:53,860
we make sure we have enough CPUs for all

00:02:50,920 --> 00:02:55,420
of the systems that are running and so I

00:02:53,860 --> 00:02:57,940
was really excited to come work at slack

00:02:55,420 --> 00:03:00,580
where we do have an Operations team and

00:02:57,940 --> 00:03:02,530
we're really responsible for running

00:03:00,580 --> 00:03:04,569
slack itself so yesterday you may have

00:03:02,530 --> 00:03:06,130
seen my teammate Guido he's a member of

00:03:04,569 --> 00:03:07,840
the storage operations team where he

00:03:06,130 --> 00:03:10,120
really focuses on the stateful services

00:03:07,840 --> 00:03:11,920
and I'm a member of the application

00:03:10,120 --> 00:03:13,540
operations team and so this is pretty

00:03:11,920 --> 00:03:16,060
much everything that's not metrics and

00:03:13,540 --> 00:03:17,530
not stateful services so if you are

00:03:16,060 --> 00:03:18,970
having trouble connecting to slack or if

00:03:17,530 --> 00:03:20,290
you see that kind of yellow banner

00:03:18,970 --> 00:03:21,940
that's you know saying oh trying to

00:03:20,290 --> 00:03:23,500
reconnect it's probably my fault so I'm

00:03:21,940 --> 00:03:26,459
working really hard on fixing that so

00:03:23,500 --> 00:03:29,140
hopefully that doesn't happen too often

00:03:26,459 --> 00:03:31,000
so yeah so it's been been pretty great

00:03:29,140 --> 00:03:32,230
working with the team there and just

00:03:31,000 --> 00:03:37,120
experiencing that growth has been very

00:03:32,230 --> 00:03:39,070
interesting so I kind of touched on this

00:03:37,120 --> 00:03:42,400
initially but I really wanted to dig

00:03:39,070 --> 00:03:45,549
into what I consider sort of the

00:03:42,400 --> 00:03:47,620
audience of DevOps days conferences or

00:03:45,549 --> 00:03:49,959
sre Khan if you've been to an event like

00:03:47,620 --> 00:03:51,910
that I think there's a lot of different

00:03:49,959 --> 00:03:53,650
approaches and a lot of different titles

00:03:51,910 --> 00:03:57,280
for what I generally view is the same

00:03:53,650 --> 00:03:58,569
thing in this case if you're at Facebook

00:03:57,280 --> 00:04:00,790
maybe you think of it as Production

00:03:58,569 --> 00:04:03,340
Engineering Google really pushes the

00:04:00,790 --> 00:04:04,750
site reliability engineering and so I

00:04:03,340 --> 00:04:07,390
don't think that it necessarily matters

00:04:04,750 --> 00:04:09,160
so much what your title is I think that

00:04:07,390 --> 00:04:10,150
at the end of the day we all really care

00:04:09,160 --> 00:04:13,060
about making sure that we're building

00:04:10,150 --> 00:04:14,920
very strong excellent systems and I

00:04:13,060 --> 00:04:18,840
think that that's the important part

00:04:14,920 --> 00:04:20,979
so everything that we do is really about

00:04:18,840 --> 00:04:22,419
you know keeping the system up and

00:04:20,979 --> 00:04:24,909
running so we can keep serving customers

00:04:22,419 --> 00:04:26,500
if our site's down then obviously people

00:04:24,909 --> 00:04:27,160
are going to be able to use the service

00:04:26,500 --> 00:04:30,730
and

00:04:27,160 --> 00:04:32,590
like 0% value-add so to me it's you know

00:04:30,730 --> 00:04:34,870
the job that we all do in this room is

00:04:32,590 --> 00:04:36,400
one of the most important so we're gonna

00:04:34,870 --> 00:04:38,830
break this talk down into three pieces

00:04:36,400 --> 00:04:41,940
and we could definitely talk about any

00:04:38,830 --> 00:04:44,560
of them for hours but we're gonna focus

00:04:41,940 --> 00:04:47,110
sort of on these three parts as I said

00:04:44,560 --> 00:04:49,270
so who here considers yourself like an

00:04:47,110 --> 00:04:51,670
experienced operations engineer like a

00:04:49,270 --> 00:04:53,110
senior engineer something like that

00:04:51,670 --> 00:04:54,910
you've been around for a few years maybe

00:04:53,110 --> 00:04:57,880
you've had a few calls in the middle of

00:04:54,910 --> 00:05:00,550
the night no one really come on you've

00:04:57,880 --> 00:05:01,660
all have you been on call before okay

00:05:00,550 --> 00:05:04,840
awesome

00:05:01,660 --> 00:05:08,620
have you written have people heard the

00:05:04,840 --> 00:05:11,710
term run books before okay awesome who

00:05:08,620 --> 00:05:13,300
hasn't heard run books before okay food

00:05:11,710 --> 00:05:15,430
people cool yeah I was talking to some

00:05:13,300 --> 00:05:17,140
people the past few days and I think I

00:05:15,430 --> 00:05:19,060
made some assumptions about it so we'll

00:05:17,140 --> 00:05:22,990
go into a little bit of the description

00:05:19,060 --> 00:05:25,030
too so we're gonna kind of set the stage

00:05:22,990 --> 00:05:27,850
for what priorities and approaches we

00:05:25,030 --> 00:05:30,190
have to running a large web service and

00:05:27,850 --> 00:05:32,500
this is kind of based on many years of

00:05:30,190 --> 00:05:34,720
doing this in a few different

00:05:32,500 --> 00:05:35,920
organizations so primarily we're gonna

00:05:34,720 --> 00:05:38,680
be talking about when you're trying to

00:05:35,920 --> 00:05:40,390
run with a team of larger groups of

00:05:38,680 --> 00:05:42,010
people so this is where it's not just

00:05:40,390 --> 00:05:43,840
one team but you actually have like

00:05:42,010 --> 00:05:45,669
organizations that are composed of sub

00:05:43,840 --> 00:05:49,330
teams that all need to collaborate and

00:05:45,669 --> 00:05:51,910
work together so the way that I kind of

00:05:49,330 --> 00:05:54,040
break down the team is there's something

00:05:51,910 --> 00:05:55,510
called the - pizza rule and so this is

00:05:54,040 --> 00:05:58,300
when if you have a team off-site and

00:05:55,510 --> 00:05:59,980
everybody goes out to spend some time

00:05:58,300 --> 00:06:01,930
together the theory is that you should

00:05:59,980 --> 00:06:04,480
be generally large enough that you can

00:06:01,930 --> 00:06:05,760
share two pizzas if I was on the team it

00:06:04,480 --> 00:06:08,140
might be the three Pizza rule but

00:06:05,760 --> 00:06:11,650
generally this is enough to kind of

00:06:08,140 --> 00:06:13,000
communicate so there are a few best

00:06:11,650 --> 00:06:14,020
practices of course I did not wake up

00:06:13,000 --> 00:06:15,730
thinking I was going to take the

00:06:14,020 --> 00:06:19,720
projector down but you know things

00:06:15,730 --> 00:06:21,100
happen so that's okay because we can

00:06:19,720 --> 00:06:23,470
kind of figure out how are we going to

00:06:21,100 --> 00:06:25,660
structure and inform our work based on a

00:06:23,470 --> 00:06:27,850
lot of best practices so three things

00:06:25,660 --> 00:06:30,640
that I sort of look at is kind of

00:06:27,850 --> 00:06:32,200
forward thinking so it's sort of how do

00:06:30,640 --> 00:06:34,630
we plan and structure the work that

00:06:32,200 --> 00:06:37,600
we're going into and then there's also

00:06:34,630 --> 00:06:39,640
documentation and then also

00:06:37,600 --> 00:06:40,800
communication so we'll talk a little bit

00:06:39,640 --> 00:06:44,590
about at each of these threes

00:06:40,800 --> 00:06:45,490
so the first one is that when you're

00:06:44,590 --> 00:06:46,750
sort of looking at how you're

00:06:45,490 --> 00:06:48,340
structuring the work there's some of it

00:06:46,750 --> 00:06:49,990
which is you know this is just a very

00:06:48,340 --> 00:06:51,880
routine deploy this is a small

00:06:49,990 --> 00:06:53,470
configuration change it's not really

00:06:51,880 --> 00:06:56,320
something that's gonna be you know very

00:06:53,470 --> 00:06:58,000
stressful of course you know we've all

00:06:56,320 --> 00:06:59,590
had that that change we push out where

00:06:58,000 --> 00:07:01,360
we say oh this is gonna be so easy no

00:06:59,590 --> 00:07:03,040
big deal and then we wind up taking the

00:07:01,360 --> 00:07:07,740
site down but fortune those are

00:07:03,040 --> 00:07:10,420
generally pretty rare so so overall

00:07:07,740 --> 00:07:11,830
sometimes and then by extension

00:07:10,420 --> 00:07:13,120
sometimes you have the very large

00:07:11,830 --> 00:07:15,220
changes like hey we're gonna make this

00:07:13,120 --> 00:07:16,840
huge pivot we're not really sure of a

00:07:15,220 --> 00:07:18,730
way to do this incrementally so we kind

00:07:16,840 --> 00:07:20,770
of need to have a very special one-off

00:07:18,730 --> 00:07:23,050
deployment or something like that and

00:07:20,770 --> 00:07:25,300
that's hopefully very rare but sometimes

00:07:23,050 --> 00:07:27,010
we need to take a little bit more time

00:07:25,300 --> 00:07:29,230
to recognize hey we need to slow down

00:07:27,010 --> 00:07:31,360
here we do want to say hey maybe take

00:07:29,230 --> 00:07:32,410
the whole week to focus on this gets to

00:07:31,360 --> 00:07:34,240
give somebody the chance to whiteboard

00:07:32,410 --> 00:07:35,380
it with a few different people and I

00:07:34,240 --> 00:07:36,310
think that's really gonna be valuable

00:07:35,380 --> 00:07:40,590
when you have something that's a little

00:07:36,310 --> 00:07:42,520
bit more more intensive is anybody

00:07:40,590 --> 00:07:48,310
everyone's familiar with roll back

00:07:42,520 --> 00:07:50,850
strategies as well so this is generally

00:07:48,310 --> 00:07:52,840
a concept where if you push out a change

00:07:50,850 --> 00:07:54,430
sometimes people say oh well if we

00:07:52,840 --> 00:07:56,470
pushed it push something out then it's

00:07:54,430 --> 00:07:58,060
very easy just to roll it back and kind

00:07:56,470 --> 00:07:59,050
of go back the other way so if you say

00:07:58,060 --> 00:08:00,450
hey you know we're gonna try out this

00:07:59,050 --> 00:08:03,220
new load balancer it's gonna be great

00:08:00,450 --> 00:08:05,110
sometimes when you say okay well it's

00:08:03,220 --> 00:08:06,940
not working traffic success rate is

00:08:05,110 --> 00:08:08,460
dropping all we're gonna do is we're

00:08:06,940 --> 00:08:10,330
going to switch back to the other way

00:08:08,460 --> 00:08:12,130
sometimes that doesn't actually work out

00:08:10,330 --> 00:08:13,780
too well if sometimes maybe the traffic

00:08:12,130 --> 00:08:15,430
pattern has changed or maybe there was

00:08:13,780 --> 00:08:18,010
some increased errors and clients have

00:08:15,430 --> 00:08:19,479
started entering like a retry loop maybe

00:08:18,010 --> 00:08:21,100
switching back to the old load balancer

00:08:19,479 --> 00:08:22,870
now may not be able to handle the

00:08:21,100 --> 00:08:24,580
increased load because more clients are

00:08:22,870 --> 00:08:26,590
trying to connect and what's called a

00:08:24,580 --> 00:08:29,110
stampeding herd and so we've actually

00:08:26,590 --> 00:08:32,560
found that sometimes a rollback strategy

00:08:29,110 --> 00:08:34,060
is not very safe so in that case you may

00:08:32,560 --> 00:08:37,150
need to put a little bit of extra time

00:08:34,060 --> 00:08:39,610
into communicating something more

00:08:37,150 --> 00:08:41,469
extensive so kind of having a plan B so

00:08:39,610 --> 00:08:42,159
thinking through hey if we do make this

00:08:41,469 --> 00:08:44,290
change

00:08:42,159 --> 00:08:45,940
what is our back-up plan so making sure

00:08:44,290 --> 00:08:47,050
you do understand it may not be as

00:08:45,940 --> 00:08:49,860
simple as just pointing back to the

00:08:47,050 --> 00:08:52,270
other load balancer but maybe having

00:08:49,860 --> 00:08:54,430
maybe increasing the capacity for the

00:08:52,270 --> 00:08:57,040
original one considering some way of

00:08:54,430 --> 00:08:58,240
saying how do we shed some load or how

00:08:57,040 --> 00:09:00,700
do we redirect people to a different

00:08:58,240 --> 00:09:02,200
region so not just planning out the

00:09:00,700 --> 00:09:04,420
change that you're actually making but

00:09:02,200 --> 00:09:07,540
planning out a back-up plan as well is

00:09:04,420 --> 00:09:09,430
very critical this could also be

00:09:07,540 --> 00:09:11,140
something like a feature flag approach

00:09:09,430 --> 00:09:13,390
so you could say instead of pushing

00:09:11,140 --> 00:09:15,490
everybody all at once to one load

00:09:13,390 --> 00:09:17,770
balancer instead you could say hey let's

00:09:15,490 --> 00:09:21,430
in the code when we hand people DNS

00:09:17,770 --> 00:09:23,680
resolution or when we hand people a URL

00:09:21,430 --> 00:09:25,839
that they need to connect to instead we

00:09:23,680 --> 00:09:28,330
could say let's only point five percent

00:09:25,839 --> 00:09:29,830
of users to this new load balancer and

00:09:28,330 --> 00:09:31,960
then you can change that configuration

00:09:29,830 --> 00:09:34,150
over time to go to ten percent 25

00:09:31,960 --> 00:09:36,640
percent 50 percent and then you don't

00:09:34,150 --> 00:09:40,120
have this huge change you're able to do

00:09:36,640 --> 00:09:41,770
this more incrementally which can help

00:09:40,120 --> 00:09:44,830
and then lastly one aspect of planning

00:09:41,770 --> 00:09:47,350
which is helpful is making sure that as

00:09:44,830 --> 00:09:48,940
much as possible your deploy strategy

00:09:47,350 --> 00:09:51,190
for actually pushing an initial change

00:09:48,940 --> 00:09:53,620
out is going to be the same as your

00:09:51,190 --> 00:09:55,089
rollback strategy so if you do have some

00:09:53,620 --> 00:09:58,030
way of saying hey we're gonna you know

00:09:55,089 --> 00:10:00,490
push out this version of the code and

00:09:58,030 --> 00:10:03,070
then maybe we already have the rollback

00:10:00,490 --> 00:10:04,330
version ready to go make sure that the

00:10:03,070 --> 00:10:05,830
way that you actually push out that

00:10:04,330 --> 00:10:08,020
first version is the same as your

00:10:05,830 --> 00:10:09,850
rollback because sometimes it's you know

00:10:08,020 --> 00:10:11,680
oh we're gonna do this special you know

00:10:09,850 --> 00:10:13,780
SSH into the machines and we're gonna

00:10:11,680 --> 00:10:14,920
copy something from s3 which is

00:10:13,780 --> 00:10:16,930
different from the normal process

00:10:14,920 --> 00:10:18,190
sometimes this can be difficult because

00:10:16,930 --> 00:10:20,589
you don't actually test it as frequently

00:10:18,190 --> 00:10:21,790
as your normal procedure so making sure

00:10:20,589 --> 00:10:23,620
that these are one in the same is

00:10:21,790 --> 00:10:25,720
generally quite important to make sure

00:10:23,620 --> 00:10:30,060
nothing's gonna break in the meantime so

00:10:25,720 --> 00:10:35,410
this is going to be so this here is more

00:10:30,060 --> 00:10:38,320
about sort of the text that's written in

00:10:35,410 --> 00:10:39,910
the past and consumed in the present so

00:10:38,320 --> 00:10:42,459
this is something where you take some

00:10:39,910 --> 00:10:43,390
time you just finished a big project or

00:10:42,459 --> 00:10:46,480
maybe you're in the middle of a project

00:10:43,390 --> 00:10:47,680
and you're going to put down what you is

00:10:46,480 --> 00:10:49,120
hopefully very fresh in your brain

00:10:47,680 --> 00:10:50,950
you've just completed something and

00:10:49,120 --> 00:10:52,540
you're gonna put it down somewhere where

00:10:50,950 --> 00:10:54,339
your teammates or your future self can

00:10:52,540 --> 00:10:57,010
see it and then maybe two months from

00:10:54,339 --> 00:10:58,420
now next week a year from now you're

00:10:57,010 --> 00:10:59,740
gonna be able to come back to this and

00:10:58,420 --> 00:11:01,050
say okay well what was the state of

00:10:59,740 --> 00:11:03,029
things this time

00:11:01,050 --> 00:11:05,250
and we've actually found that this is

00:11:03,029 --> 00:11:07,110
something that's been difficult to do

00:11:05,250 --> 00:11:08,970
unless we make this a little bit more

00:11:07,110 --> 00:11:10,620
structured for us and make sure that we

00:11:08,970 --> 00:11:12,300
actually bake this into our planning and

00:11:10,620 --> 00:11:13,649
make sure that people do have the time

00:11:12,300 --> 00:11:16,170
to say hey you know I know I just

00:11:13,649 --> 00:11:17,670
finished this previous project and I

00:11:16,170 --> 00:11:18,720
know I have something coming up and this

00:11:17,670 --> 00:11:20,490
team needs this

00:11:18,720 --> 00:11:22,589
you know delivered quickly I'm going to

00:11:20,490 --> 00:11:25,260
take an extra you know hour or extra day

00:11:22,589 --> 00:11:26,910
and I'm gonna sort of carve this out you

00:11:25,260 --> 00:11:28,920
know even put something on my calendar

00:11:26,910 --> 00:11:31,290
to set time aside to make sure that I

00:11:28,920 --> 00:11:33,029
take what's up here and put it down into

00:11:31,290 --> 00:11:36,990
some text or you know the rest of my

00:11:33,029 --> 00:11:38,640
team to understand so in this case this

00:11:36,990 --> 00:11:41,220
is definitely something where you know

00:11:38,640 --> 00:11:42,630
everybody here in this room we can work

00:11:41,220 --> 00:11:44,519
with our teammates to make sure that we

00:11:42,630 --> 00:11:48,269
have enough time to do this this is not

00:11:44,519 --> 00:11:49,500
something which this is being used in

00:11:48,269 --> 00:11:51,209
the future I think it makes it really

00:11:49,500 --> 00:11:52,200
easy for people to say oh this isn't

00:11:51,209 --> 00:11:53,790
that helpful

00:11:52,200 --> 00:11:55,800
you know we don't need this now it's not

00:11:53,790 --> 00:11:57,510
gonna you know bring too much value to

00:11:55,800 --> 00:11:59,010
us this is something which has delayed

00:11:57,510 --> 00:12:00,540
benefits and so sometimes it can be

00:11:59,010 --> 00:12:01,829
difficult to justify it when you have a

00:12:00,540 --> 00:12:03,600
team that needs something else done

00:12:01,829 --> 00:12:05,610
right away but this is definitely

00:12:03,600 --> 00:12:06,810
something that we can all go back to our

00:12:05,610 --> 00:12:11,730
teams and make sure that we build that

00:12:06,810 --> 00:12:14,070
time for each other yeah of course sure

00:12:11,730 --> 00:12:15,690
so I think the question is what value

00:12:14,070 --> 00:12:19,380
could additional documentation that just

00:12:15,690 --> 00:12:21,510
JIRA bring so sometimes we've actually

00:12:19,380 --> 00:12:23,430
found that sometimes JIRA can be a

00:12:21,510 --> 00:12:25,440
little bit cluttered over time so

00:12:23,430 --> 00:12:27,300
sometimes it can be like the common

00:12:25,440 --> 00:12:28,890
thread in a ticketing system can

00:12:27,300 --> 00:12:30,720
sometimes have multiple approaches it

00:12:28,890 --> 00:12:32,370
can be a little bit more task oriented

00:12:30,720 --> 00:12:34,440
sort of you know here's my project for

00:12:32,370 --> 00:12:35,970
today oh I'm gonna be on vacation for a

00:12:34,440 --> 00:12:37,740
few weeks so I'm not gonna get onto this

00:12:35,970 --> 00:12:39,959
for a bit and so sometimes it can be

00:12:37,740 --> 00:12:41,820
more of like like a long story sort of

00:12:39,959 --> 00:12:44,459
like Lord of the Rings tale of getting

00:12:41,820 --> 00:12:45,930
to Mordor and documentation is supposed

00:12:44,459 --> 00:12:48,120
to be a little bit more of a full

00:12:45,930 --> 00:12:48,839
complete snapshot in time and so it's

00:12:48,120 --> 00:12:51,180
supposed to be a little bit more

00:12:48,839 --> 00:12:53,850
structured we're gonna talk a little bit

00:12:51,180 --> 00:12:56,730
more about the runbook documentation but

00:12:53,850 --> 00:12:58,560
I think one example would be a design

00:12:56,730 --> 00:13:00,120
document which typically is written a

00:12:58,560 --> 00:13:02,100
little bit before the project is

00:13:00,120 --> 00:13:04,740
completed and then updated after it's

00:13:02,100 --> 00:13:05,850
it's done to reflect the true state but

00:13:04,740 --> 00:13:07,649
this is something where somebody very

00:13:05,850 --> 00:13:08,910
new to the team or very new to the

00:13:07,649 --> 00:13:11,070
company you can say hey I've heard about

00:13:08,910 --> 00:13:12,930
this cool system what does this do

00:13:11,070 --> 00:13:13,840
what's the point of this what's its goal

00:13:12,930 --> 00:13:15,850
and what

00:13:13,840 --> 00:13:16,840
the pieces that make up the system and I

00:13:15,850 --> 00:13:18,280
think that that's something that's can

00:13:16,840 --> 00:13:19,690
be a little bit easier and more cohesive

00:13:18,280 --> 00:13:21,430
than something that's just a bunch of

00:13:19,690 --> 00:13:23,250
comments all strung together but that's

00:13:21,430 --> 00:13:27,430
a really good question that answer your

00:13:23,250 --> 00:13:29,080
call all right so now obviously working

00:13:27,430 --> 00:13:31,330
at slack I think communication is

00:13:29,080 --> 00:13:34,030
important there's a few different ways

00:13:31,330 --> 00:13:36,310
to do this but this part is much more

00:13:34,030 --> 00:13:39,280
real-time so this is something where

00:13:36,310 --> 00:13:41,560
you're gonna actually be having a

00:13:39,280 --> 00:13:44,020
conversation with somebody when the

00:13:41,560 --> 00:13:45,400
information is generated it's the same

00:13:44,020 --> 00:13:48,370
time that's actually consumed by your

00:13:45,400 --> 00:13:49,810
teammate or you have some sort of bot

00:13:48,370 --> 00:13:51,310
that's writing something in a channel

00:13:49,810 --> 00:13:53,230
you're gonna be reading this and taking

00:13:51,310 --> 00:13:57,370
advantage of it understanding and acting

00:13:53,230 --> 00:13:59,890
on it so this is something where we

00:13:57,370 --> 00:14:01,600
found that this is very immediate and

00:13:59,890 --> 00:14:04,690
very direct but it also has a very high

00:14:01,600 --> 00:14:05,890
cost so this is something where you know

00:14:04,690 --> 00:14:07,210
if you get paged in the middle of the

00:14:05,890 --> 00:14:09,670
night and you have to respond to an

00:14:07,210 --> 00:14:10,720
incident this is something where the

00:14:09,670 --> 00:14:12,430
only way that this is going to be

00:14:10,720 --> 00:14:15,790
helpful to you is if your teammate is

00:14:12,430 --> 00:14:17,260
also a wake at the time so if you know

00:14:15,790 --> 00:14:19,210
the benefit of documentation is that if

00:14:17,260 --> 00:14:20,980
it's well-written and helpful and very

00:14:19,210 --> 00:14:22,480
clear that you don't need to worry about

00:14:20,980 --> 00:14:24,250
having somebody else there someone's

00:14:22,480 --> 00:14:25,510
already taken the time in the morning

00:14:24,250 --> 00:14:27,430
they had their coffee there at their

00:14:25,510 --> 00:14:28,540
documentation this means that somebody

00:14:27,430 --> 00:14:30,010
needs to actually be there with you

00:14:28,540 --> 00:14:32,020
giving you attention and understanding

00:14:30,010 --> 00:14:33,640
what you're asking and then putting it

00:14:32,020 --> 00:14:37,720
there in real time for you to understand

00:14:33,640 --> 00:14:38,650
how to deal with it so one of the most

00:14:37,720 --> 00:14:41,680
important things that we've actually

00:14:38,650 --> 00:14:43,660
found is kind of communicating how do we

00:14:41,680 --> 00:14:45,190
describe some of the changes we've made

00:14:43,660 --> 00:14:47,290
to our system

00:14:45,190 --> 00:14:49,630
Guido kind of discussed it yesterday

00:14:47,290 --> 00:14:51,190
because we have a global team around the

00:14:49,630 --> 00:14:53,470
world in San Francisco Dublin and

00:14:51,190 --> 00:14:55,000
Melbourne and so for us in particular

00:14:53,470 --> 00:14:57,040
it's very important because we don't

00:14:55,000 --> 00:14:58,810
just have people in one timezone and so

00:14:57,040 --> 00:15:00,730
it's not as easy to you know go out with

00:14:58,810 --> 00:15:01,990
the team for lunch kind of hell what are

00:15:00,730 --> 00:15:03,370
you working on how are things going

00:15:01,990 --> 00:15:05,050
these there's going to be people who are

00:15:03,370 --> 00:15:06,540
going to be working when you're sleeping

00:15:05,050 --> 00:15:08,650
and so we need to make sure that

00:15:06,540 --> 00:15:10,210
sometimes we keep this real-time log

00:15:08,650 --> 00:15:11,680
which then eventually becomes

00:15:10,210 --> 00:15:13,090
documentation because you've written

00:15:11,680 --> 00:15:14,170
what you're doing in channel and then

00:15:13,090 --> 00:15:19,150
they can go back later and see what's

00:15:14,170 --> 00:15:21,190
going on one other thing that we've

00:15:19,150 --> 00:15:23,920
actually pushed a lot which has helped

00:15:21,190 --> 00:15:26,450
us is when we are either making a

00:15:23,920 --> 00:15:28,260
description in a code review or

00:15:26,450 --> 00:15:29,940
trying to update something in a

00:15:28,260 --> 00:15:31,769
ticketing system we do try to cross link

00:15:29,940 --> 00:15:34,050
between things which has actually been

00:15:31,769 --> 00:15:35,730
very very helpful a lot of the times we

00:15:34,050 --> 00:15:37,200
have PRS which go out and they're saying

00:15:35,730 --> 00:15:39,540
oh we just fixed this thing or we

00:15:37,200 --> 00:15:41,040
increase the RAM limit on this and it's

00:15:39,540 --> 00:15:43,260
a little bit difficult to understand you

00:15:41,040 --> 00:15:44,970
know six months from now why did we why

00:15:43,260 --> 00:15:46,740
do we bump the RAM you know it turned

00:15:44,970 --> 00:15:48,630
out doing that exhausted the resources

00:15:46,740 --> 00:15:51,269
on the box and now we're running into

00:15:48,630 --> 00:15:52,800
limits and some other components and it

00:15:51,269 --> 00:15:54,779
can be pretty difficult to sort of

00:15:52,800 --> 00:15:56,699
search back through history sometimes as

00:15:54,779 --> 00:15:58,769
opposed to just posting that quick link

00:15:56,699 --> 00:16:00,690
to the slack thread or to the ticket and

00:15:58,769 --> 00:16:02,160
then you can go through and see oh let's

00:16:00,690 --> 00:16:03,510
see the discussion somebody got paged

00:16:02,160 --> 00:16:06,029
they needed to figure out what was going

00:16:03,510 --> 00:16:08,310
on we had the UM killer kicked in so

00:16:06,029 --> 00:16:11,910
making it easy for the future is helpful

00:16:08,310 --> 00:16:14,699
as well so we talked about these three

00:16:11,910 --> 00:16:16,560
components obviously the ideal is you

00:16:14,699 --> 00:16:18,959
sort of structure things in this way but

00:16:16,560 --> 00:16:20,910
as we heard and talked previously this

00:16:18,959 --> 00:16:25,290
isn't always the case things aren't

00:16:20,910 --> 00:16:29,370
always this this glorious so of course

00:16:25,290 --> 00:16:31,910
things get more difficult over time you

00:16:29,370 --> 00:16:34,079
sort of have more people more locations

00:16:31,910 --> 00:16:35,490
sometimes you have you know people leave

00:16:34,079 --> 00:16:37,890
that have a lot of understanding and a

00:16:35,490 --> 00:16:39,209
lot of context and then you have new

00:16:37,890 --> 00:16:40,560
people new people that join the team

00:16:39,209 --> 00:16:43,440
that don't understand how this happens

00:16:40,560 --> 00:16:45,529
so these are just some of the some of

00:16:43,440 --> 00:16:48,390
the edge cases that you might run into

00:16:45,529 --> 00:16:51,750
and again I think that this is something

00:16:48,390 --> 00:16:54,660
where you know having good documentation

00:16:51,750 --> 00:16:56,070
can really help if you you know realize

00:16:54,660 --> 00:16:58,019
that you have only one superstar on the

00:16:56,070 --> 00:16:59,820
team who has a lot of that context in

00:16:58,019 --> 00:17:00,870
their head and they're not present maybe

00:16:59,820 --> 00:17:03,600
they're finally taking that vacation

00:17:00,870 --> 00:17:05,339
they should have done four years ago and

00:17:03,600 --> 00:17:06,720
they're not around all of a sudden the

00:17:05,339 --> 00:17:08,040
whole company is held hostage because

00:17:06,720 --> 00:17:09,569
you're not able to get information from

00:17:08,040 --> 00:17:11,490
them and so that's why I think really

00:17:09,569 --> 00:17:13,049
putting in the time maybe even creating

00:17:11,490 --> 00:17:18,390
a separate JIRA ticket for documentation

00:17:13,049 --> 00:17:19,679
is gonna be really helpful but I think

00:17:18,390 --> 00:17:21,959
the thing that's important to remember

00:17:19,679 --> 00:17:24,329
is that when you do have these issues

00:17:21,959 --> 00:17:26,010
this generally is a good thing if you do

00:17:24,329 --> 00:17:27,419
have more than just that one person who

00:17:26,010 --> 00:17:28,980
knows everything that means that you

00:17:27,419 --> 00:17:30,150
have a larger team you have more people

00:17:28,980 --> 00:17:31,950
that can work on improving your

00:17:30,150 --> 00:17:34,530
infrastructure you have more people to

00:17:31,950 --> 00:17:36,419
compare and ask questions and come up

00:17:34,530 --> 00:17:37,770
with new ideas and this is actually

00:17:36,419 --> 00:17:39,000
awesome is this means that you're doing

00:17:37,770 --> 00:17:39,809
something that your customers are

00:17:39,000 --> 00:17:41,070
enjoying

00:17:39,809 --> 00:17:42,419
and there are more people that are

00:17:41,070 --> 00:17:43,559
trying to come and take advantage of the

00:17:42,419 --> 00:17:46,110
value that you're bringing which is

00:17:43,559 --> 00:17:48,179
really important so here's where we get

00:17:46,110 --> 00:17:50,820
to what I think is the really fun part

00:17:48,179 --> 00:17:52,710
of this talk so I've been on a team

00:17:50,820 --> 00:17:56,070
previously where our run book was just

00:17:52,710 --> 00:17:57,389
one really long wiki page and it was

00:17:56,070 --> 00:17:59,999
actually kind of difficult to find out

00:17:57,389 --> 00:18:02,610
what was going on he's you know command

00:17:59,999 --> 00:18:04,259
F and or control F and try and find some

00:18:02,610 --> 00:18:06,690
of the keywords you're looking for and

00:18:04,259 --> 00:18:08,789
you get like 17 hits on the page and it

00:18:06,690 --> 00:18:11,009
was very difficult to say okay well do I

00:18:08,789 --> 00:18:12,929
follow this thing or maybe this change

00:18:11,009 --> 00:18:15,059
this looks like it was last edited like

00:18:12,929 --> 00:18:17,220
four months ago is it still valid oh

00:18:15,059 --> 00:18:19,590
this was just a formatting change the

00:18:17,220 --> 00:18:21,179
contents the same and so for us it was

00:18:19,590 --> 00:18:22,710
actually occasionally very difficult

00:18:21,179 --> 00:18:24,869
because we didn't really have much of a

00:18:22,710 --> 00:18:26,909
structure so we sort of said hey we have

00:18:24,869 --> 00:18:29,490
a run book and we're just gonna keep

00:18:26,909 --> 00:18:31,769
adding to the same page and it's jour it

00:18:29,490 --> 00:18:33,539
sort of worked out initially but over

00:18:31,769 --> 00:18:35,190
time as the system grew more complex is

00:18:33,539 --> 00:18:37,889
very difficult to deal with which is

00:18:35,190 --> 00:18:39,240
unfortunate so I'm a little biased but I

00:18:37,889 --> 00:18:43,619
think the current approach is a little

00:18:39,240 --> 00:18:47,279
bit better and it's mainly thanks to our

00:18:43,619 --> 00:18:48,840
visibility team headed up by our our

00:18:47,279 --> 00:18:50,279
teammate Megan and she did an awesome

00:18:48,840 --> 00:18:51,929
job of coming up with a good structure

00:18:50,279 --> 00:18:54,539
and I think it's actually been pretty

00:18:51,929 --> 00:18:56,610
pretty successful so even if you don't

00:18:54,539 --> 00:18:58,559
follow anything else I suggest here I

00:18:56,610 --> 00:19:02,820
think making the time for this would be

00:18:58,559 --> 00:19:04,470
really great so I think the first thing

00:19:02,820 --> 00:19:07,259
you're going to do is kind of consider

00:19:04,470 --> 00:19:09,779
the documentation that you're writing is

00:19:07,259 --> 00:19:10,889
actually a really a run book so if

00:19:09,779 --> 00:19:13,679
you're kind of documenting an

00:19:10,889 --> 00:19:15,240
architecture or a workflow that's sort

00:19:13,679 --> 00:19:18,419
of expected to become muscle memory so

00:19:15,240 --> 00:19:19,889
something like how logstash works or

00:19:18,419 --> 00:19:21,960
maybe what's the the workflow for

00:19:19,889 --> 00:19:24,299
committing a change to chef then

00:19:21,960 --> 00:19:27,950
probably this documentation belongs in

00:19:24,299 --> 00:19:30,539
like a larger like design doc directory

00:19:27,950 --> 00:19:33,360
so run books are for repeatable

00:19:30,539 --> 00:19:35,820
processes so we're all required to refer

00:19:33,360 --> 00:19:38,700
to the run book each and every time we

00:19:35,820 --> 00:19:41,070
execute a process documented so that the

00:19:38,700 --> 00:19:43,049
changes in run books will reliably take

00:19:41,070 --> 00:19:47,100
effect so this is pretty important

00:19:43,049 --> 00:19:50,669
because every time we need to maybe spin

00:19:47,100 --> 00:19:53,670
up a new service or we need to you know

00:19:50,669 --> 00:19:56,040
we do still have a few sort of like pet

00:19:53,670 --> 00:19:57,630
servers every time we do need to work on

00:19:56,040 --> 00:19:59,640
some of these we need to make sure that

00:19:57,630 --> 00:20:00,870
we go back to the run books these one of

00:19:59,640 --> 00:20:02,550
our teammates may have just finished

00:20:00,870 --> 00:20:04,590
working on one of them updating

00:20:02,550 --> 00:20:06,060
something you know modifying the way the

00:20:04,590 --> 00:20:07,740
database is provisioned that's attached

00:20:06,060 --> 00:20:08,910
that service and we need to make sure

00:20:07,740 --> 00:20:10,980
that we're following the latest steps

00:20:08,910 --> 00:20:13,320
otherwise the service comes up and may

00:20:10,980 --> 00:20:15,060
not be set up correctly so again this is

00:20:13,320 --> 00:20:16,320
something where it's built into our

00:20:15,060 --> 00:20:18,120
culture that we're always going to be

00:20:16,320 --> 00:20:20,880
checking this first giving it that

00:20:18,120 --> 00:20:22,320
glance checking when the file was last

00:20:20,880 --> 00:20:24,000
modified and making sure that we're okay

00:20:22,320 --> 00:20:25,590
with the steps is that written and if

00:20:24,000 --> 00:20:29,730
not we know who to talk to because it's

00:20:25,590 --> 00:20:33,690
gonna be listed who edited the page so

00:20:29,730 --> 00:20:34,950
there's sort of three components to how

00:20:33,690 --> 00:20:36,750
we sort of structure these things the

00:20:34,950 --> 00:20:38,220
first one is where do you locate this

00:20:36,750 --> 00:20:40,650
information there's a few different

00:20:38,220 --> 00:20:42,480
options the second is the format's and

00:20:40,650 --> 00:20:43,650
kind of how you lay it out and then the

00:20:42,480 --> 00:20:45,330
third is going to be the contents so

00:20:43,650 --> 00:20:49,350
what's actually inside of this so what

00:20:45,330 --> 00:20:51,300
are you going to see and use here so

00:20:49,350 --> 00:20:53,400
there are a few different like I said a

00:20:51,300 --> 00:20:55,620
few different options one of these that

00:20:53,400 --> 00:20:57,900
I've seen some teams use is Google Docs

00:20:55,620 --> 00:21:00,600
and this generally can work out okay

00:20:57,900 --> 00:21:04,620
Google obviously it's good with that

00:21:00,600 --> 00:21:06,660
search thing I think you have access to

00:21:04,620 --> 00:21:08,130
mobile apps so sometimes if you're at

00:21:06,660 --> 00:21:10,350
dinner your laptops in your bag and

00:21:08,130 --> 00:21:12,390
you're waiting for it to come on you can

00:21:10,350 --> 00:21:14,880
jump on ahead of time on the mobile app

00:21:12,390 --> 00:21:16,380
open it up and get the access to the

00:21:14,880 --> 00:21:18,330
information very quickly which is pretty

00:21:16,380 --> 00:21:21,240
nice so this is something that can be

00:21:18,330 --> 00:21:22,560
pretty helpful I'm not sure if it's a

00:21:21,240 --> 00:21:24,450
good thing or a bad thing but it is an

00:21:22,560 --> 00:21:25,830
external service so you're relying on

00:21:24,450 --> 00:21:27,750
Google's uptime which generally is

00:21:25,830 --> 00:21:29,190
pretty good but this is something where

00:21:27,750 --> 00:21:30,960
it is a little bit of a black box if

00:21:29,190 --> 00:21:32,640
Google Docs has an outage at the same

00:21:30,960 --> 00:21:33,780
time that you do it's not something that

00:21:32,640 --> 00:21:35,280
you're gonna be able to deal with you

00:21:33,780 --> 00:21:37,890
just have to trust Google to get up and

00:21:35,280 --> 00:21:39,240
keep that service running which again

00:21:37,890 --> 00:21:40,830
for the teams I know that have used it

00:21:39,240 --> 00:21:44,610
has been working out pretty well for

00:21:40,830 --> 00:21:47,220
them another option and again sort of

00:21:44,610 --> 00:21:49,110
what we used in a previous team was a

00:21:47,220 --> 00:21:51,690
web-based wiki that was hosted

00:21:49,110 --> 00:21:54,660
internally we found this to work out

00:21:51,690 --> 00:21:57,600
pretty well for us again we sort of got

00:21:54,660 --> 00:21:59,880
a little bit more functionality you know

00:21:57,600 --> 00:22:03,270
it was being hosted internally we were

00:21:59,880 --> 00:22:04,710
able to make sure that it was all the

00:22:03,270 --> 00:22:07,050
data was stored within our data centers

00:22:04,710 --> 00:22:07,920
which at the time I think was important

00:22:07,050 --> 00:22:10,740
to us now

00:22:07,920 --> 00:22:13,470
unless so but I think it was a little

00:22:10,740 --> 00:22:15,060
bit difficult to make sure that you know

00:22:13,470 --> 00:22:16,830
whenever you were making the changes you

00:22:15,060 --> 00:22:18,600
know you'd need to be VPN din or

00:22:16,830 --> 00:22:21,350
something like that so you didn't have

00:22:18,600 --> 00:22:24,270
that easy access which was not as nice

00:22:21,350 --> 00:22:25,530
and then also the text editor that was

00:22:24,270 --> 00:22:30,840
built in was a little bit difficult to

00:22:25,530 --> 00:22:35,160
use what we're using is markdown files

00:22:30,840 --> 00:22:38,550
and get and we're actually using github

00:22:35,160 --> 00:22:40,020
z' web UI just to display this it's sort

00:22:38,550 --> 00:22:42,390
of nice because you still have the same

00:22:40,020 --> 00:22:44,220
tools that you would use when you're

00:22:42,390 --> 00:22:46,430
like wrapping through source code you're

00:22:44,220 --> 00:22:48,990
able to use the same you know get grep

00:22:46,430 --> 00:22:49,980
workflows you would on your

00:22:48,990 --> 00:22:53,250
documentation as well

00:22:49,980 --> 00:22:54,480
github also does obviously have search

00:22:53,250 --> 00:22:58,080
functionality built into the

00:22:54,480 --> 00:22:59,850
repositories which is nice and you do

00:22:58,080 --> 00:23:01,680
have the normal like PR workflow so

00:22:59,850 --> 00:23:03,360
something that I typically do is after

00:23:01,680 --> 00:23:05,280
I'm you know making a bunch of changes

00:23:03,360 --> 00:23:07,170
I'll send it over to the teammate that

00:23:05,280 --> 00:23:09,120
I've paired up with and said hey here's

00:23:07,170 --> 00:23:10,380
what I think is going to be good does

00:23:09,120 --> 00:23:12,630
this seem like it makes sense to you and

00:23:10,380 --> 00:23:14,580
I guarantee you nine times out of ten

00:23:12,630 --> 00:23:16,920
they're like Joe I have no idea what any

00:23:14,580 --> 00:23:18,750
of this means like I know that you like

00:23:16,920 --> 00:23:20,790
all these words make sense to you but I

00:23:18,750 --> 00:23:22,140
don't know what any of this is and so

00:23:20,790 --> 00:23:24,900
it's actually a great step to kind of

00:23:22,140 --> 00:23:26,400
get that validation ahead of time not at

00:23:24,900 --> 00:23:28,200
2:00 a.m. to make sure that somebody

00:23:26,400 --> 00:23:30,680
else understands it and it's written in

00:23:28,200 --> 00:23:32,610
a manner that's very clear so there's no

00:23:30,680 --> 00:23:34,470
you know any terms that need to be

00:23:32,610 --> 00:23:36,180
defined ahead of time are going to be

00:23:34,470 --> 00:23:37,770
written up very clearly and there's not

00:23:36,180 --> 00:23:38,580
going to be some surprise like oh just

00:23:37,770 --> 00:23:40,500
you know

00:23:38,580 --> 00:23:41,880
tab the bobble or something and people

00:23:40,500 --> 00:23:43,920
like I don't know what a bobble is how

00:23:41,880 --> 00:23:46,590
does this work so I think that's pretty

00:23:43,920 --> 00:23:49,400
helpful and then one last thing that's

00:23:46,590 --> 00:23:52,830
actually has been quite helpful for us

00:23:49,400 --> 00:23:55,050
we do use github Enterprise and I think

00:23:52,830 --> 00:23:58,050
we're I think some of our use cases are

00:23:55,050 --> 00:24:00,000
a little bit unique and so sometimes we

00:23:58,050 --> 00:24:02,370
do need to make sure that we're able to

00:24:00,000 --> 00:24:04,260
restore github Enterprise in case it you

00:24:02,370 --> 00:24:06,090
know there any issues with it and

00:24:04,260 --> 00:24:08,130
fortunately people do have a local copy

00:24:06,090 --> 00:24:09,570
of the repository on their laptops and

00:24:08,130 --> 00:24:11,820
on some of the bastion servers that we

00:24:09,570 --> 00:24:13,500
use so this has been pretty nice just to

00:24:11,820 --> 00:24:14,820
make sure that no matter what happens

00:24:13,500 --> 00:24:16,470
you know there's several copies of this

00:24:14,820 --> 00:24:18,720
as well so you kind of get built in

00:24:16,470 --> 00:24:19,920
Federation you know all the benefits of

00:24:18,720 --> 00:24:20,460
git and so you don't need to worry about

00:24:19,920 --> 00:24:23,160
that

00:24:20,460 --> 00:24:24,900
cool so here's sort of a general

00:24:23,160 --> 00:24:26,520
structure that we've seen again thanks

00:24:24,900 --> 00:24:28,560
to Megan for you know really iterating

00:24:26,520 --> 00:24:30,120
on this and coming up with it so run

00:24:28,560 --> 00:24:31,740
books need to be organized into

00:24:30,120 --> 00:24:34,230
directories and so we have like a big

00:24:31,740 --> 00:24:37,380
top-level documentation repo and inside

00:24:34,230 --> 00:24:38,640
of that as a run books directory and all

00:24:37,380 --> 00:24:41,760
of these should be named sort of

00:24:38,640 --> 00:24:43,620
descriptively and sort of broadly so for

00:24:41,760 --> 00:24:45,950
instance we have a system called the

00:24:43,620 --> 00:24:48,780
message server for sending messages and

00:24:45,950 --> 00:24:50,190
that's a top-level directory and that's

00:24:48,780 --> 00:24:52,710
gonna have some descriptive files

00:24:50,190 --> 00:24:54,660
located within it so within those files

00:24:52,710 --> 00:24:57,450
there's like a first level heading that

00:24:54,660 --> 00:24:59,100
matches the name of the file and then

00:24:57,450 --> 00:25:00,900
also sort of second level headings which

00:24:59,100 --> 00:25:04,070
we'll see in a moment so we're gonna

00:25:00,900 --> 00:25:06,540
kind of walk through each of these files

00:25:04,070 --> 00:25:09,510
which I think will be a little bit

00:25:06,540 --> 00:25:12,660
easier to do that so this one here is

00:25:09,510 --> 00:25:14,790
the readme is kind of the main page when

00:25:12,660 --> 00:25:15,930
somebody first goes in here this is

00:25:14,790 --> 00:25:17,910
going to be you know the basic

00:25:15,930 --> 00:25:19,620
explanation of the service some of the

00:25:17,910 --> 00:25:21,180
related services which someone might

00:25:19,620 --> 00:25:23,070
need to know either upstream or

00:25:21,180 --> 00:25:25,050
downstream there's also going to be

00:25:23,070 --> 00:25:27,240
contacts or channels for that service

00:25:25,050 --> 00:25:29,640
and then maybe any links or graphs that

00:25:27,240 --> 00:25:31,350
might be helpful so usually each service

00:25:29,640 --> 00:25:33,990
is going to have a corresponding graph

00:25:31,350 --> 00:25:35,190
on a page and this is a perfect place to

00:25:33,990 --> 00:25:37,140
say hey you know if you wanted to

00:25:35,190 --> 00:25:38,040
generally see the overview click on this

00:25:37,140 --> 00:25:39,720
it's gonna take you right to the

00:25:38,040 --> 00:25:41,160
dashboard so this is going to be the

00:25:39,720 --> 00:25:42,930
window into the service for somebody

00:25:41,160 --> 00:25:44,010
that you know is just joining the team

00:25:42,930 --> 00:25:45,750
hey what are the things we're

00:25:44,010 --> 00:25:47,280
responsible for let me take a look at

00:25:45,750 --> 00:25:50,550
the run book and kind of get the lay of

00:25:47,280 --> 00:25:52,980
the land and contacts is also very

00:25:50,550 --> 00:25:54,720
important because sometimes it's going

00:25:52,980 --> 00:25:56,400
to be something where somebody is very

00:25:54,720 --> 00:25:57,690
confused they need to figure out who

00:25:56,400 --> 00:25:59,430
owns this and how do I get in contact

00:25:57,690 --> 00:26:00,720
with them and this is something which

00:25:59,430 --> 00:26:06,930
we're able to keep up-to-date which is

00:26:00,720 --> 00:26:08,730
good so this one here is fortunately

00:26:06,930 --> 00:26:10,440
going away there's this thing called an

00:26:08,730 --> 00:26:14,190
auto scaling group which took us a

00:26:10,440 --> 00:26:16,680
little bit of time to appreciate but but

00:26:14,190 --> 00:26:19,170
fortunately anytime there are some of

00:26:16,680 --> 00:26:20,930
these again special one-off servers this

00:26:19,170 --> 00:26:24,510
would be where these steps are located

00:26:20,930 --> 00:26:27,570
each process documented should present

00:26:24,510 --> 00:26:30,420
like as pros any context that might be

00:26:27,570 --> 00:26:31,650
required to decide if the people

00:26:30,420 --> 00:26:32,130
actually need to use this run book in

00:26:31,650 --> 00:26:34,380
particular

00:26:32,130 --> 00:26:36,510
so usually for us you know we'll get a

00:26:34,380 --> 00:26:38,480
request like hey we need to you know get

00:26:36,510 --> 00:26:40,470
a new back-end service for this thing

00:26:38,480 --> 00:26:42,179
you know we would know that this is

00:26:40,470 --> 00:26:47,789
where provisioning instructions would be

00:26:42,179 --> 00:26:50,010
for this and one other thing that we

00:26:47,789 --> 00:26:52,740
found very helpful is making sure that

00:26:50,010 --> 00:26:54,960
the markdown is used quite precisely so

00:26:52,740 --> 00:26:57,570
this means that you know if you do have

00:26:54,960 --> 00:26:59,309
someone some text that needs to be copy

00:26:57,570 --> 00:27:01,020
pasted into the terminal some commands

00:26:59,309 --> 00:27:02,100
that need to be run make sure you're

00:27:01,020 --> 00:27:04,169
using either backticks

00:27:02,100 --> 00:27:06,240
or the triple backticks to create a code

00:27:04,169 --> 00:27:08,280
block because in the heat of the moment

00:27:06,240 --> 00:27:10,470
consistent formatting is gonna help add

00:27:08,280 --> 00:27:14,370
clarity and help us move quickly and

00:27:10,470 --> 00:27:16,440
confidently so definitely if you know

00:27:14,370 --> 00:27:19,020
when I first started I had some decent

00:27:16,440 --> 00:27:20,100
markdown experience but you know it's

00:27:19,020 --> 00:27:21,870
definitely something where I definitely

00:27:20,100 --> 00:27:23,760
took a look at the documentation again

00:27:21,870 --> 00:27:24,780
made sure I was familiar and then also

00:27:23,760 --> 00:27:26,640
was able to look at some of the other

00:27:24,780 --> 00:27:28,500
run books to sort of make sure that we

00:27:26,640 --> 00:27:34,409
had a consistent style so this was

00:27:28,500 --> 00:27:36,260
something that really helps as well so

00:27:34,409 --> 00:27:39,240
this one I think is the most like

00:27:36,260 --> 00:27:41,820
actionable for and probably the most

00:27:39,240 --> 00:27:44,280
important because I use these pages like

00:27:41,820 --> 00:27:45,900
90% of the time this is where when you

00:27:44,280 --> 00:27:47,610
get the page and you say what the heck

00:27:45,900 --> 00:27:49,020
does this like I don't know like what

00:27:47,610 --> 00:27:51,270
this service is like I don't remember

00:27:49,020 --> 00:27:52,710
what's going on like our CDN is down

00:27:51,270 --> 00:27:55,470
that sounds bad what does what does that

00:27:52,710 --> 00:27:58,200
mean so usually we have a post in slack

00:27:55,470 --> 00:28:00,299
and it kind of gives you a little bit of

00:27:58,200 --> 00:28:02,429
context maybe a linked graph and then

00:28:00,299 --> 00:28:04,409
also a link to the corresponding run

00:28:02,429 --> 00:28:07,530
book as well and so that'll take you to

00:28:04,409 --> 00:28:09,870
directly to this page which matches to

00:28:07,530 --> 00:28:12,630
this location which matches the page

00:28:09,870 --> 00:28:14,520
that you just received and sort of the

00:28:12,630 --> 00:28:16,080
first thing I do you know we use page

00:28:14,520 --> 00:28:17,940
duty first thing we do we click through

00:28:16,080 --> 00:28:20,100
acknowledge page and then we go into

00:28:17,940 --> 00:28:21,990
slack look at the alerts in the channel

00:28:20,100 --> 00:28:23,610
which is in our alerts channel and then

00:28:21,990 --> 00:28:25,110
we click through to get to this page and

00:28:23,610 --> 00:28:26,940
to be honest usually it's on my phone

00:28:25,110 --> 00:28:31,740
which I'm taking advantage of github

00:28:26,940 --> 00:28:33,299
mobile formatting and this is where you

00:28:31,740 --> 00:28:34,919
know I think for me impact is actually

00:28:33,299 --> 00:28:36,750
quite critical because some pages are

00:28:34,919 --> 00:28:38,460
like you know whatever you're doing like

00:28:36,750 --> 00:28:40,470
walk out of the meeting get back to your

00:28:38,460 --> 00:28:42,090
desk and take a look and sometimes it's

00:28:40,470 --> 00:28:44,190
hey if you need like you know five

00:28:42,090 --> 00:28:45,840
minutes that's okay but you know you

00:28:44,190 --> 00:28:47,070
really should take a look at this now so

00:28:45,840 --> 00:28:49,440
sort of the difference between the

00:28:47,070 --> 00:28:50,730
services down for everyone and this is

00:28:49,440 --> 00:28:52,380
something that needs to be taken care of

00:28:50,730 --> 00:28:56,549
during business hours or something like

00:28:52,380 --> 00:28:58,049
that and again the insight is any more

00:28:56,549 --> 00:29:00,360
dashboards might be specific to this

00:28:58,049 --> 00:29:01,710
problem in particular so sometimes an

00:29:00,360 --> 00:29:04,620
alert could not just be for one

00:29:01,710 --> 00:29:06,539
particular service but maybe have issues

00:29:04,620 --> 00:29:08,130
with upstream or downstream services and

00:29:06,539 --> 00:29:10,500
that means that you need to take a look

00:29:08,130 --> 00:29:13,409
at those as well to see maybe where you

00:29:10,500 --> 00:29:14,820
can pinpoint the problem so the question

00:29:13,409 --> 00:29:18,809
is how do we correlate between pager

00:29:14,820 --> 00:29:20,760
duty and the run books so when we we use

00:29:18,809 --> 00:29:24,929
chef to like a little helper that we

00:29:20,760 --> 00:29:28,710
wrote in chef repo to create our alerts

00:29:24,929 --> 00:29:31,380
and icinga and when they fire they

00:29:28,710 --> 00:29:34,350
actually do two things the first is they

00:29:31,380 --> 00:29:36,539
like send a page with the API for pager

00:29:34,350 --> 00:29:38,520
duty and then they also use slack's api

00:29:36,539 --> 00:29:41,070
to post a message in channel and so then

00:29:38,520 --> 00:29:43,169
we format the message when we're

00:29:41,070 --> 00:29:45,720
configuring it we point we configure the

00:29:43,169 --> 00:29:49,470
URL for the page as well so making sure

00:29:45,720 --> 00:29:51,510
that that matches important so the

00:29:49,470 --> 00:29:54,120
question is is there like a wild card or

00:29:51,510 --> 00:29:57,299
some special like redirection that

00:29:54,120 --> 00:30:00,720
happens we don't in particular but I

00:29:57,299 --> 00:30:02,399
could see there being some like I could

00:30:00,720 --> 00:30:04,500
see there being some like service which

00:30:02,399 --> 00:30:06,419
maybe parses the alert and then actually

00:30:04,500 --> 00:30:07,620
does a redirect like sends a 301 so

00:30:06,419 --> 00:30:09,590
something like that could definitely be

00:30:07,620 --> 00:30:12,840
doable so that'd be pretty cool actually

00:30:09,590 --> 00:30:18,870
awesome that answer your question any

00:30:12,840 --> 00:30:20,370
other questions that how do you keep the

00:30:18,870 --> 00:30:23,490
documentation up-to-date is like the

00:30:20,370 --> 00:30:25,559
number one question of all time I don't

00:30:23,490 --> 00:30:28,890
want to say that we have like the magic

00:30:25,559 --> 00:30:30,240
answer unfortunately like you know just

00:30:28,890 --> 00:30:31,440
I think it was two weeks ago or

00:30:30,240 --> 00:30:34,320
something I was looking at some alert

00:30:31,440 --> 00:30:36,510
and I was like this doesn't like none of

00:30:34,320 --> 00:30:38,039
this is valid anymore like definitely we

00:30:36,510 --> 00:30:40,789
did not update this after we made this

00:30:38,039 --> 00:30:44,159
change and so I think that's where

00:30:40,789 --> 00:30:45,840
fortunately that's rare ish but I think

00:30:44,159 --> 00:30:47,940
like I don't want to say like shame your

00:30:45,840 --> 00:30:50,460
teammates and updating the docs but that

00:30:47,940 --> 00:30:52,799
was definitely something where you know

00:30:50,460 --> 00:30:54,570
I so I was actually working in Dublin in

00:30:52,799 --> 00:30:56,250
our Dublin office at the time and so I

00:30:54,570 --> 00:30:57,929
definitely paged my teammates in San

00:30:56,250 --> 00:30:58,900
Francisco and said hey like you happen

00:30:57,929 --> 00:31:00,460
to be the one working on the

00:30:58,900 --> 00:31:02,230
and I don't remember like what the steps

00:31:00,460 --> 00:31:03,700
were you know I searched through slack

00:31:02,230 --> 00:31:06,370
and I couldn't find anything about this

00:31:03,700 --> 00:31:08,080
what should we do here and so you know

00:31:06,370 --> 00:31:09,730
we were able to solve the problem we got

00:31:08,080 --> 00:31:11,500
things back up and running and then the

00:31:09,730 --> 00:31:13,930
next day of course my teammate was like

00:31:11,500 --> 00:31:15,790
oh here's the review for the alert

00:31:13,930 --> 00:31:18,520
update what do you think about this so I

00:31:15,790 --> 00:31:20,200
think this is something where you know

00:31:18,520 --> 00:31:22,210
if we don't hold ourselves accountable

00:31:20,200 --> 00:31:23,590
when we're working on the projects to

00:31:22,210 --> 00:31:24,580
actually update the documentation I

00:31:23,590 --> 00:31:27,100
think we need to hold each other

00:31:24,580 --> 00:31:30,850
accountable and so for me personally I

00:31:27,100 --> 00:31:32,440
think it's you know it's one thing to to

00:31:30,850 --> 00:31:33,820
say hey like you should update the alert

00:31:32,440 --> 00:31:35,440
but I think it's another when somebody

00:31:33,820 --> 00:31:36,880
pages you for something and then you say

00:31:35,440 --> 00:31:39,820
hey I don't want to get woken up again

00:31:36,880 --> 00:31:41,830
I'm gonna make sure I update that so so

00:31:39,820 --> 00:31:44,020
not that I like take evil Glee and

00:31:41,830 --> 00:31:46,120
paging my teammates but like maybe a

00:31:44,020 --> 00:31:46,990
little bit so yeah that's okay so I

00:31:46,120 --> 00:31:49,179
think a little bit of that motivation

00:31:46,990 --> 00:31:50,710
helps but but generally we try to like

00:31:49,179 --> 00:31:53,050
help each other and make sure we don't

00:31:50,710 --> 00:31:54,550
need to do that so that's where I think

00:31:53,050 --> 00:32:08,800
carving out that time for documentation

00:31:54,550 --> 00:32:11,830
in particular is very important yeah so

00:32:08,800 --> 00:32:14,380
I think our I think that for us because

00:32:11,830 --> 00:32:17,440
we do require peer review for all

00:32:14,380 --> 00:32:20,740
changes like all code changes I think

00:32:17,440 --> 00:32:22,809
that that's generally the process where

00:32:20,740 --> 00:32:24,280
when somebody's reviewing something if

00:32:22,809 --> 00:32:26,500
they don't have context on what this

00:32:24,280 --> 00:32:28,720
change means or how this works they're

00:32:26,500 --> 00:32:30,880
going to be like hey I don't know like

00:32:28,720 --> 00:32:32,590
what this is like it's part of the I

00:32:30,880 --> 00:32:34,150
think it's part of the code reviewers

00:32:32,590 --> 00:32:35,470
responsibility and something that they

00:32:34,150 --> 00:32:37,030
are paying attention to just say hey I

00:32:35,470 --> 00:32:39,490
like realize that you're making this

00:32:37,030 --> 00:32:41,380
change I kind of get it but I don't 100%

00:32:39,490 --> 00:32:42,730
understand I need to see a little bit

00:32:41,380 --> 00:32:44,050
more documentation about what's

00:32:42,730 --> 00:32:46,720
happening and so I think that's

00:32:44,050 --> 00:32:48,460
something that that we've actually found

00:32:46,720 --> 00:32:50,350
is caught in code review if the

00:32:48,460 --> 00:32:51,490
documentation isn't updated then people

00:32:50,350 --> 00:32:53,140
that review aren't going to have the

00:32:51,490 --> 00:32:56,290
context and so for us that's been

00:32:53,140 --> 00:32:59,620
something where it's been helpful we

00:32:56,290 --> 00:33:01,960
haven't created like we haven't created

00:32:59,620 --> 00:33:04,420
something that you know parses like a

00:33:01,960 --> 00:33:05,710
change to a certain cookbook and then

00:33:04,420 --> 00:33:08,950
checks to see if there's you know

00:33:05,710 --> 00:33:11,840
corresponding PR in documentation I

00:33:08,950 --> 00:33:13,800
think that's also super interesting but

00:33:11,840 --> 00:33:16,170
but yeah I think that might be a little

00:33:13,800 --> 00:33:18,150
bit difficult to make sure there's like

00:33:16,170 --> 00:33:19,110
it's not too noisy or too blocking but

00:33:18,150 --> 00:33:23,610
yeah it's something like that could be

00:33:19,110 --> 00:33:25,770
awesome so also one thing that's we

00:33:23,610 --> 00:33:27,840
found that is very important is don't

00:33:25,770 --> 00:33:29,820
just say like run this command but you

00:33:27,840 --> 00:33:31,700
should mention like where should you run

00:33:29,820 --> 00:33:33,390
the command from in some cases so

00:33:31,700 --> 00:33:35,430
sometimes there's actually like a

00:33:33,390 --> 00:33:37,770
orchestration host or some like

00:33:35,430 --> 00:33:39,240
centralized you know staging server or

00:33:37,770 --> 00:33:41,130
something and the command actually needs

00:33:39,240 --> 00:33:43,080
to be run there and not on the Box

00:33:41,130 --> 00:33:44,910
that's having the issue and so I think

00:33:43,080 --> 00:33:46,080
it's super critical to make sure that

00:33:44,910 --> 00:33:48,270
you don't just say like Oh run this

00:33:46,080 --> 00:33:50,010
command but where to run that from and

00:33:48,270 --> 00:33:52,410
being very explicit like you know SSH to

00:33:50,010 --> 00:33:55,410
this machine or you know go to this page

00:33:52,410 --> 00:33:57,540
and click on this button or like check

00:33:55,410 --> 00:34:01,170
this graph it's not just like execute

00:33:57,540 --> 00:34:02,400
this process another thing is again

00:34:01,170 --> 00:34:04,590
making sure that you have links to

00:34:02,400 --> 00:34:07,500
graphs and things like that particularly

00:34:04,590 --> 00:34:09,540
to show like a really great run book is

00:34:07,500 --> 00:34:11,340
gonna have the graph that says you know

00:34:09,540 --> 00:34:14,190
click here fill in you know whichever

00:34:11,340 --> 00:34:15,840
hosts or service maybe to our templated

00:34:14,190 --> 00:34:17,760
and so then you can actually see you

00:34:15,840 --> 00:34:19,379
know the huge drop which shows the

00:34:17,760 --> 00:34:21,060
problem and then hopefully you can also

00:34:19,379 --> 00:34:23,010
see a corresponding graph which after

00:34:21,060 --> 00:34:24,810
you fix it will show the improvement and

00:34:23,010 --> 00:34:26,639
you know the success rate climbing again

00:34:24,810 --> 00:34:28,860
so making sure that that's the kind of

00:34:26,639 --> 00:34:30,120
graph you're looking for shows that your

00:34:28,860 --> 00:34:33,510
alert and your metrics are probably

00:34:30,120 --> 00:34:34,889
tuned well enough and then lastly make

00:34:33,510 --> 00:34:38,100
sure that you're also including any like

00:34:34,889 --> 00:34:41,669
ancillary actions so we have status

00:34:38,100 --> 00:34:43,950
dot-com and for certain alerts again

00:34:41,669 --> 00:34:45,360
these ones that are very critical that

00:34:43,950 --> 00:34:46,740
means that like ok if you're getting

00:34:45,360 --> 00:34:48,120
this that means people cannot connect to

00:34:46,740 --> 00:34:50,760
slack and aren't able to get their work

00:34:48,120 --> 00:34:52,710
done so that means one of the first

00:34:50,760 --> 00:34:55,110
things we're gonna do like step number

00:34:52,710 --> 00:34:57,149
one is go into our incidents channel

00:34:55,110 --> 00:34:58,740
talk to our customer experience team and

00:34:57,149 --> 00:35:00,510
ask them to update the status site

00:34:58,740 --> 00:35:02,330
because there's an outage and we're

00:35:00,510 --> 00:35:03,960
going to be looking into fixing it so

00:35:02,330 --> 00:35:05,430
definitely making sure that you're

00:35:03,960 --> 00:35:07,320
explicitly listing out not just the

00:35:05,430 --> 00:35:10,530
technical steps but the organizational

00:35:07,320 --> 00:35:14,280
workflow as well very importantly so

00:35:10,530 --> 00:35:15,780
again fortunately this page I mentioned

00:35:14,280 --> 00:35:17,490
it here because we do have some pets and

00:35:15,780 --> 00:35:20,550
not everything's in an auto scaling

00:35:17,490 --> 00:35:22,860
group but this is something which

00:35:20,550 --> 00:35:25,260
you know you need to make sure that if

00:35:22,860 --> 00:35:27,390
you do have some system this is

00:35:25,260 --> 00:35:29,690
something that we've had more of that we

00:35:27,390 --> 00:35:35,190
don't really use as much anymore

00:35:29,690 --> 00:35:38,520
and this is maybe so this is an example

00:35:35,190 --> 00:35:39,690
that I think is maybe not the best and

00:35:38,520 --> 00:35:41,550
so that's kind of why I picked it out so

00:35:39,690 --> 00:35:45,840
this is something that I used which

00:35:41,550 --> 00:35:48,180
wasn't really helpful this this is an

00:35:45,840 --> 00:35:50,820
alert page for us where when our web

00:35:48,180 --> 00:35:53,400
servers have too many too many of their

00:35:50,820 --> 00:35:55,590
profit too many of the processes are

00:35:53,400 --> 00:35:57,750
locked up and they're not being

00:35:55,590 --> 00:36:00,450
responsive this is what you're gonna get

00:35:57,750 --> 00:36:01,740
and unfortunately this alert isn't the

00:36:00,450 --> 00:36:03,060
best because it actually means that

00:36:01,740 --> 00:36:05,160
there's some other part of the system

00:36:03,060 --> 00:36:07,020
which is probably having a problem so

00:36:05,160 --> 00:36:09,000
this is probably Apaches waiting on my

00:36:07,020 --> 00:36:11,220
sequel maybe you know somebody deployed

00:36:09,000 --> 00:36:12,750
a change you know we have some really

00:36:11,220 --> 00:36:14,550
tight loop which is iterating over all

00:36:12,750 --> 00:36:15,780
the members of a team and we're trying

00:36:14,550 --> 00:36:18,960
to patch too much from the database at

00:36:15,780 --> 00:36:21,600
once so basically the point of this

00:36:18,960 --> 00:36:23,430
alert a point of this documentation is

00:36:21,600 --> 00:36:25,110
actually to point people to downstream

00:36:23,430 --> 00:36:27,480
services and say hey if you're getting

00:36:25,110 --> 00:36:29,940
this like we know that this might look

00:36:27,480 --> 00:36:30,810
like an Apache web server problem but

00:36:29,940 --> 00:36:34,830
it's probably one of the downstream

00:36:30,810 --> 00:36:36,410
services so one thing that this doesn't

00:36:34,830 --> 00:36:38,610
do is it actually doesn't link to

00:36:36,410 --> 00:36:40,770
corresponding run books so this would be

00:36:38,610 --> 00:36:42,240
very helpful to say hey you know we've

00:36:40,770 --> 00:36:43,980
seen in the past that this is an issue

00:36:42,240 --> 00:36:46,050
with this you know my sequel thread

00:36:43,980 --> 00:36:47,520
exhaustion or something and so linking

00:36:46,050 --> 00:36:49,980
to other run books would actually be

00:36:47,520 --> 00:36:51,480
very helpful so this is something where

00:36:49,980 --> 00:36:53,460
you know it has been improved over time

00:36:51,480 --> 00:36:56,940
but I think this is something an example

00:36:53,460 --> 00:36:58,110
of where it isn't even actually you know

00:36:56,940 --> 00:36:59,730
it's telling you to do something but

00:36:58,110 --> 00:37:01,740
it's not like leading you to that point

00:36:59,730 --> 00:37:04,230
so then person at 2:00 a.m. just needs

00:37:01,740 --> 00:37:05,790
to follow through with this so an

00:37:04,230 --> 00:37:07,590
experienced team member would be able to

00:37:05,790 --> 00:37:09,210
read this and have no problem saying oh

00:37:07,590 --> 00:37:11,010
yeah I know where the my sequel page is

00:37:09,210 --> 00:37:12,660
and how to get there but someone new on

00:37:11,010 --> 00:37:13,500
the team is gonna burn some time trying

00:37:12,660 --> 00:37:16,320
to figure out where do I go to

00:37:13,500 --> 00:37:17,790
understand this and again like as we

00:37:16,320 --> 00:37:19,920
mentioned design documentation is sort

00:37:17,790 --> 00:37:24,390
of the overall like overview and layout

00:37:19,920 --> 00:37:26,580
and these these are like checklists

00:37:24,390 --> 00:37:30,630
we're actually running the services that

00:37:26,580 --> 00:37:32,550
you're dealing with so here's kind of my

00:37:30,630 --> 00:37:33,870
favorite part and I realize I'm a little

00:37:32,550 --> 00:37:38,460
slow so I'm going to speak

00:37:33,870 --> 00:37:40,950
a bit so we're gonna talk about one of

00:37:38,460 --> 00:37:43,800
my favorite Maxim's and then an ancient

00:37:40,950 --> 00:37:46,770
proverb so this is from the j-unit pact

00:37:43,800 --> 00:37:48,120
where I first saw it I don't I believe

00:37:46,770 --> 00:37:49,740
this came from somewhere else but this

00:37:48,120 --> 00:37:52,440
is where I've always sort of turned to

00:37:49,740 --> 00:37:54,600
it so when it comes to unit testing or

00:37:52,440 --> 00:37:55,890
load testing your service I find that

00:37:54,600 --> 00:37:57,360
this is actually very very helpful

00:37:55,890 --> 00:37:58,620
because I think there's a lot of times

00:37:57,360 --> 00:38:00,060
where I'm like really concerned about

00:37:58,620 --> 00:38:01,740
pushing something into production and

00:38:00,060 --> 00:38:04,460
that usually means that I need to remove

00:38:01,740 --> 00:38:06,480
some of that fear so I think the

00:38:04,460 --> 00:38:09,840
opposite part of that it's kind of a

00:38:06,480 --> 00:38:11,520
little inverse and I think that when you

00:38:09,840 --> 00:38:12,780
actually have like a very new process

00:38:11,520 --> 00:38:15,870
maybe you're looking at it you're not so

00:38:12,780 --> 00:38:17,340
sure what the steps are you sort of have

00:38:15,870 --> 00:38:19,170
the theory of it but not actually the

00:38:17,340 --> 00:38:20,340
practice and I think that once you've

00:38:19,170 --> 00:38:21,960
sort of done something enough that you

00:38:20,340 --> 00:38:24,510
say I don't understand why I keep doing

00:38:21,960 --> 00:38:25,680
this that's probably the best sign that

00:38:24,510 --> 00:38:27,900
it's time for you to start writing some

00:38:25,680 --> 00:38:28,830
code to take that process and put it

00:38:27,900 --> 00:38:29,570
into something that's going to happen

00:38:28,830 --> 00:38:32,250
automatically

00:38:29,570 --> 00:38:33,150
so it's something that's so standard you

00:38:32,250 --> 00:38:34,890
know you can handle it

00:38:33,150 --> 00:38:38,660
and even if you've seen some edge cases

00:38:34,890 --> 00:38:38,660
you know how to handle those as well so

00:38:39,620 --> 00:38:44,730
it's really nice about this is that a

00:38:42,720 --> 00:38:46,620
lot of times when you have the run books

00:38:44,730 --> 00:38:48,780
and especially for like a complex system

00:38:46,620 --> 00:38:52,230
you're gonna have a few cases where you

00:38:48,780 --> 00:38:53,490
say hey you know check this graph but

00:38:52,230 --> 00:38:55,830
also check like these four graphs

00:38:53,490 --> 00:38:57,420
because maybe it's my sequel issue maybe

00:38:55,830 --> 00:38:59,250
it's the cash is having a problem maybe

00:38:57,420 --> 00:39:01,380
this is going on and so it turns into

00:38:59,250 --> 00:39:03,000
this very difficult kind of like you

00:39:01,380 --> 00:39:04,170
know the data is everywhere you're in

00:39:03,000 --> 00:39:05,940
the matrix and you're looking at all

00:39:04,170 --> 00:39:08,190
these graphs and it can be really tough

00:39:05,940 --> 00:39:10,350
to sort of automatically understand okay

00:39:08,190 --> 00:39:12,480
well if all of these things are true but

00:39:10,350 --> 00:39:14,520
this service is okay but then this one

00:39:12,480 --> 00:39:15,990
has like tons of load issues then that

00:39:14,520 --> 00:39:17,910
probably means that this downstream is

00:39:15,990 --> 00:39:19,560
the issue and so when you write code you

00:39:17,910 --> 00:39:21,720
can actually have something that's gonna

00:39:19,560 --> 00:39:23,940
query your you know maybe graphite

00:39:21,720 --> 00:39:25,320
metric metrics back-end and it can

00:39:23,940 --> 00:39:27,960
actually do some of that calculations

00:39:25,320 --> 00:39:29,220
for you and so it can actually check and

00:39:27,960 --> 00:39:31,470
see you know hey if you know these

00:39:29,220 --> 00:39:33,480
metrics are all at you know above 95%

00:39:31,470 --> 00:39:36,180
but this one all of a sudden took a

00:39:33,480 --> 00:39:37,710
sharp dive below 70 then this is

00:39:36,180 --> 00:39:40,170
probably the procedure to follow and so

00:39:37,710 --> 00:39:41,820
you can codify that in code and write

00:39:40,170 --> 00:39:44,130
the conditionals and the if statements

00:39:41,820 --> 00:39:46,140
and then actually operate in that regard

00:39:44,130 --> 00:39:47,250
as opposed to kind of relying on the

00:39:46,140 --> 00:39:51,990
humans duel

00:39:47,250 --> 00:39:54,120
so even if you write a tool to operate

00:39:51,990 --> 00:39:55,650
on one system you can automatically

00:39:54,120 --> 00:40:01,290
query health metrics for downstream

00:39:55,650 --> 00:40:03,570
services so generally the workflow that

00:40:01,290 --> 00:40:05,790
we've sort of seen kind of happen again

00:40:03,570 --> 00:40:07,410
and again is that you know somebody

00:40:05,790 --> 00:40:09,660
works on a project they build out a

00:40:07,410 --> 00:40:11,700
service and they they're the only ones

00:40:09,660 --> 00:40:14,040
that sort of know how it works after

00:40:11,700 --> 00:40:15,960
that you know hopefully they're you know

00:40:14,040 --> 00:40:17,550
completing the process but actually

00:40:15,960 --> 00:40:20,700
communicating that and putting it into a

00:40:17,550 --> 00:40:22,560
run book and documentation and over time

00:40:20,700 --> 00:40:24,180
you know maybe there's something that we

00:40:22,560 --> 00:40:26,640
sort of need to repeatedly do to repair

00:40:24,180 --> 00:40:28,170
the service and maybe there's some small

00:40:26,640 --> 00:40:30,690
part of it where it's you know you need

00:40:28,170 --> 00:40:34,470
to SSH to this service grep through the

00:40:30,690 --> 00:40:36,450
config Curlin endpoint parson JSON pull

00:40:34,470 --> 00:40:38,400
something else out and that's a little

00:40:36,450 --> 00:40:40,410
bit difficult and so sometimes you can

00:40:38,400 --> 00:40:44,730
just write you know maybe the curl piped

00:40:40,410 --> 00:40:46,380
into crap you know in JQ and maybe make

00:40:44,730 --> 00:40:49,080
sure that you know what used to be like

00:40:46,380 --> 00:40:50,880
17 steps you can start breaking it down

00:40:49,080 --> 00:40:53,460
into something very small you're like I

00:40:50,880 --> 00:40:55,430
hate SSH into this box curling piping

00:40:53,460 --> 00:40:57,570
into JQ you know putting into a file

00:40:55,430 --> 00:41:00,750
taking something very small and simple

00:40:57,570 --> 00:41:02,790
and seams starting there and using that

00:41:00,750 --> 00:41:05,040
is sort of your pivot point into the

00:41:02,790 --> 00:41:07,140
script it's something that we've

00:41:05,040 --> 00:41:09,150
repeatedly done again and again and even

00:41:07,140 --> 00:41:10,260
somebody very new on the team we've

00:41:09,150 --> 00:41:11,760
usually found these are great starter

00:41:10,260 --> 00:41:13,830
projects so we've actually be able to

00:41:11,760 --> 00:41:14,940
look at run books say hey you know you

00:41:13,830 --> 00:41:16,980
know how we just made you do this thing

00:41:14,940 --> 00:41:19,110
like your first real task is actually

00:41:16,980 --> 00:41:22,680
automating that part of it you've been

00:41:19,110 --> 00:41:24,780
nice so over time you have this little

00:41:22,680 --> 00:41:25,680
script maybe kind of add on to it a

00:41:24,780 --> 00:41:29,790
little bit there's gonna be some

00:41:25,680 --> 00:41:31,290
problems you know what used to be like a

00:41:29,790 --> 00:41:32,730
human being able to understand and fix

00:41:31,290 --> 00:41:35,040
things on the fly now you're gonna need

00:41:32,730 --> 00:41:39,270
to write the code to fix things which is

00:41:35,040 --> 00:41:41,040
sort of tough but overall as you keep

00:41:39,270 --> 00:41:42,450
adding to this script in this tool you

00:41:41,040 --> 00:41:44,220
can continue to update the documentation

00:41:42,450 --> 00:41:46,110
and say hey just run this script instead

00:41:44,220 --> 00:41:47,670
of these like five commands just run

00:41:46,110 --> 00:41:49,620
this script instead which is sort of

00:41:47,670 --> 00:41:51,180
nice and over time as you continue to

00:41:49,620 --> 00:41:53,430
expand it out you're just gonna be able

00:41:51,180 --> 00:41:55,230
to run one tool or maybe automatically

00:41:53,430 --> 00:41:57,300
have the tool be executed and you're not

00:41:55,230 --> 00:42:02,100
gonna have to do this anymore so I think

00:41:57,300 --> 00:42:03,270
that I was pretty I was talking to my

00:42:02,100 --> 00:42:06,240
teammate about this and I think this was

00:42:03,270 --> 00:42:09,660
pretty good so this is my buddy Aaron he

00:42:06,240 --> 00:42:11,760
works down in Los Angeles but he was

00:42:09,660 --> 00:42:13,080
telling me that this was when he was

00:42:11,760 --> 00:42:14,370
really frustrated and he said he didn't

00:42:13,080 --> 00:42:16,020
want to be doing this anymore you know

00:42:14,370 --> 00:42:18,330
he wanted to make sure that we could

00:42:16,020 --> 00:42:20,220
write automation to do this and we

00:42:18,330 --> 00:42:22,380
realized that since we defined the logic

00:42:20,220 --> 00:42:23,610
for something in prose and we sort of

00:42:22,380 --> 00:42:26,190
written it out

00:42:23,610 --> 00:42:27,420
we could pick how like what language to

00:42:26,190 --> 00:42:28,770
write that out in and it could be

00:42:27,420 --> 00:42:31,050
something that a computer can understand

00:42:28,770 --> 00:42:32,760
so humans can also read code but

00:42:31,050 --> 00:42:37,830
machines can explicitly use those

00:42:32,760 --> 00:42:41,400
instructions to execute things so this

00:42:37,830 --> 00:42:42,960
is sort of the like general workflow

00:42:41,400 --> 00:42:45,390
that we've seen so somebody has in their

00:42:42,960 --> 00:42:47,910
head they write it out into prose in

00:42:45,390 --> 00:42:48,930
text in a run book that's when you start

00:42:47,910 --> 00:42:50,640
to say like hey I don't want to curl

00:42:48,930 --> 00:42:52,500
this endpoint anymore in pipe it's in JQ

00:42:50,640 --> 00:42:54,810
you can write a small Python script or a

00:42:52,500 --> 00:42:56,100
little ghost script to do this and then

00:42:54,810 --> 00:42:57,540
over time you realize like oh but

00:42:56,100 --> 00:43:00,480
there's an edge case what if you know

00:42:57,540 --> 00:43:03,270
the curl you know the request yet fails

00:43:00,480 --> 00:43:05,130
I need to retry you know what if the

00:43:03,270 --> 00:43:07,170
system's down how do I detect that and

00:43:05,130 --> 00:43:09,450
then execute like a reprovision or

00:43:07,170 --> 00:43:10,770
something and then over time you

00:43:09,450 --> 00:43:12,930
eventually have this tool which can be

00:43:10,770 --> 00:43:14,850
run automatically unfortunately if we

00:43:12,930 --> 00:43:16,230
keep doing this it turns out we spend a

00:43:14,850 --> 00:43:17,730
lot more time working on more

00:43:16,230 --> 00:43:19,200
interesting problems and not just

00:43:17,730 --> 00:43:22,160
dealing with these sort of lower-level

00:43:19,200 --> 00:43:23,850
problems as well which is pretty nice

00:43:22,160 --> 00:43:25,410
especially once you get down to like

00:43:23,850 --> 00:43:26,970
five and six you're not really getting

00:43:25,410 --> 00:43:29,580
woken up again and again having to deal

00:43:26,970 --> 00:43:30,600
with the same problem so I think that we

00:43:29,580 --> 00:43:32,990
found that there's a lot of libraries

00:43:30,600 --> 00:43:35,790
out there that we can use

00:43:32,990 --> 00:43:37,050
definitely after the talk over lunch

00:43:35,790 --> 00:43:39,480
we'd be happy to talk more about some of

00:43:37,050 --> 00:43:41,220
the examples that we have it can be a

00:43:39,480 --> 00:43:42,960
little bit slow going when you're using

00:43:41,220 --> 00:43:44,880
code and testing it all and making it

00:43:42,960 --> 00:43:46,890
work but we definitely found that it's

00:43:44,880 --> 00:43:49,080
worth it which has been awesome

00:43:46,890 --> 00:43:50,289
so thanks so much everybody hopefully

00:43:49,080 --> 00:43:52,829
motivated you too

00:43:50,289 --> 00:43:52,829
run books

00:43:53,020 --> 00:43:56,349

YouTube URL: https://www.youtube.com/watch?v=QejeeXmesk8


