Title: So you committed a secret... - GitHub Universe 2020
Publication date: 2020-12-09
Playlist: GitHub Universe 2020: Developer - Secure Development
Description: 
	Presented by Sasha Rosenbaum, Senior Product Manager, GitHub

Every month, GitHub detects about a million potential secrets in public repos, and one in every seven private repos has a potential committed credential. In this talk, we'll show you what you should do when you inadvertently commit a credential; how to doing so in the future by externalizing your secrets; and how to use GitHub to scan your projects to make sure no secrets make it into your source code again.

For more from GitHub Universe 2020, visit https://githubuniverse.com

As always, feel free to leave us a comment below and don't forget to subscribe: http://bit.ly/subgithub

Thanks!

Connect with us.
Facebook: http://fb.com/github
Twitter: http://twitter.com/github
LinkedIn: http://linkedin.com/company/github

About GitHub
GitHub is the best place to share code with friends, co-workers, classmates, and complete strangers. Millions of people use GitHub to build amazing things together. For more info, go to http://github.com
Captions: 
	00:00:00,240 --> 00:00:03,310
[Applause]

00:00:06,910 --> 00:00:12,960
[Music]

00:00:11,120 --> 00:00:15,519
thank you so much kath and brian

00:00:12,960 --> 00:00:16,160
i am super excited to be here and

00:00:15,519 --> 00:00:18,080
hopefully

00:00:16,160 --> 00:00:19,279
uh we get to talk about something you

00:00:18,080 --> 00:00:21,840
haven't seen before

00:00:19,279 --> 00:00:23,600
and i give you some details about very

00:00:21,840 --> 00:00:28,080
cool features that kind of has to

00:00:23,600 --> 00:00:31,199
offer um so without further ado i'm

00:00:28,080 --> 00:00:32,079
gonna jump into the presentation i do

00:00:31,199 --> 00:00:34,239
want to mention

00:00:32,079 --> 00:00:36,079
like has mentioned that my teammates are

00:00:34,239 --> 00:00:37,760
right now in the discussion board so if

00:00:36,079 --> 00:00:38,160
you have questions please head over

00:00:37,760 --> 00:00:41,280
there

00:00:38,160 --> 00:00:42,079
and ask the questions um and then you're

00:00:41,280 --> 00:00:46,079
going to be

00:00:42,079 --> 00:00:48,960
able to um see what's happening

00:00:46,079 --> 00:00:48,960
so on

00:00:49,920 --> 00:00:53,600
technology technology is complicated let

00:00:52,320 --> 00:00:55,840
me start by

00:00:53,600 --> 00:00:58,160
really quickly introducing myself i

00:00:55,840 --> 00:01:00,559
started my career as a developer

00:00:58,160 --> 00:01:01,600
15 years ago i can't believe it's been

00:01:00,559 --> 00:01:03,920
so long either

00:01:01,600 --> 00:01:06,080
and then i kind of transitioned into ops

00:01:03,920 --> 00:01:07,119
and devops infrastructure as code and

00:01:06,080 --> 00:01:10,240
things like that

00:01:07,119 --> 00:01:13,200
i was an architect for on

00:01:10,240 --> 00:01:13,920
the microsoft for microsoft for a number

00:01:13,200 --> 00:01:16,960
of years

00:01:13,920 --> 00:01:19,759
and right now i'm a product manager uh

00:01:16,960 --> 00:01:21,439
for github and you can find me on

00:01:19,759 --> 00:01:24,720
twitter and on github and

00:01:21,439 --> 00:01:26,159
by the same name uh divine ops so please

00:01:24,720 --> 00:01:29,759
feel free to reach out

00:01:26,159 --> 00:01:33,119
even after this conversation um

00:01:29,759 --> 00:01:36,240
so oh wow something is

00:01:33,119 --> 00:01:39,280
weird about the next slide but okay

00:01:36,240 --> 00:01:40,320
i so let's get started about i talking

00:01:39,280 --> 00:01:43,119
about the

00:01:40,320 --> 00:01:44,240
state of security today my favorite

00:01:43,119 --> 00:01:47,520
analogy for this

00:01:44,240 --> 00:01:47,840
is saying that you've just built a house

00:01:47,520 --> 00:01:50,399
so

00:01:47,840 --> 00:01:52,479
imagine that you just built the mansion

00:01:50,399 --> 00:01:54,640
of your dreams and you've installed all

00:01:52,479 --> 00:01:58,079
the most expensive furniture

00:01:54,640 --> 00:02:00,799
some of the best appliances features

00:01:58,079 --> 00:02:01,759
fixtures everything is just completely

00:02:00,799 --> 00:02:04,399
amazing

00:02:01,759 --> 00:02:05,520
but you just didn't install any windows

00:02:04,399 --> 00:02:07,920
or doors

00:02:05,520 --> 00:02:08,800
you're just like okay well you know the

00:02:07,920 --> 00:02:10,879
important part

00:02:08,800 --> 00:02:12,000
is to get all the features in and to get

00:02:10,879 --> 00:02:15,040
all the furniture

00:02:12,000 --> 00:02:16,879
and the windows and doors can wait right

00:02:15,040 --> 00:02:19,200
this is kind of what we think about

00:02:16,879 --> 00:02:19,520
security today as developers we just

00:02:19,200 --> 00:02:22,319
keep

00:02:19,520 --> 00:02:24,160
continue to say that like okay we're

00:02:22,319 --> 00:02:26,239
just gonna work on the features and

00:02:24,160 --> 00:02:28,239
release them into our product and if we

00:02:26,239 --> 00:02:28,879
have time left for security in the end

00:02:28,239 --> 00:02:32,000
of it

00:02:28,879 --> 00:02:32,959
then we're gonna address that so if

00:02:32,000 --> 00:02:34,800
you've seen

00:02:32,959 --> 00:02:37,680
github conferences before you might have

00:02:34,800 --> 00:02:40,080
seen this

00:02:37,680 --> 00:02:40,080
okay

00:02:41,440 --> 00:02:46,400
okay i can try to switch mics if you

00:02:45,440 --> 00:02:51,599
like

00:02:46,400 --> 00:02:55,360
yeah it sounds like uh

00:02:51,599 --> 00:02:56,000
all right okay lots of lots of issues

00:02:55,360 --> 00:02:59,120
all right

00:02:56,000 --> 00:02:59,680
so i started off not so great today it's

00:02:59,120 --> 00:03:02,800
fine

00:02:59,680 --> 00:03:05,840
hopefully you're still with me so um

00:03:02,800 --> 00:03:05,840
if you've seen

00:03:06,000 --> 00:03:08,400
sorry

00:03:16,840 --> 00:03:19,840
okay

00:03:34,159 --> 00:03:37,920
all right can you hear me now hopefully

00:03:37,280 --> 00:03:40,959
so

00:03:37,920 --> 00:03:40,959
all right so yeah

00:03:42,959 --> 00:03:47,840
sorry go ahead

00:03:49,360 --> 00:03:53,360
so sasha it sounds like you're going

00:03:51,680 --> 00:03:56,879
live

00:03:53,360 --> 00:04:00,159
now all right

00:03:56,879 --> 00:04:02,080
let's try again so um i'm sasha

00:04:00,159 --> 00:04:04,560
rosenbaum and this is a session

00:04:02,080 --> 00:04:05,439
on what to do if you've committed a

00:04:04,560 --> 00:04:09,120
secret

00:04:05,439 --> 00:04:11,920
so let's go on to my next slide

00:04:09,120 --> 00:04:14,000
and i'm just going to skip the intro

00:04:11,920 --> 00:04:15,439
this time

00:04:14,000 --> 00:04:17,440
and we're going to talk about this state

00:04:15,439 --> 00:04:20,239
of security today so

00:04:17,440 --> 00:04:21,840
again my favorite analogy for this is

00:04:20,239 --> 00:04:24,880
imagine that you just built

00:04:21,840 --> 00:04:27,360
your most amazing favorite mansion

00:04:24,880 --> 00:04:28,800
and you have just installed all the most

00:04:27,360 --> 00:04:31,040
expensive furniture

00:04:28,800 --> 00:04:33,440
and all the most expensive appliances

00:04:31,040 --> 00:04:36,240
and you just forgot to install doors

00:04:33,440 --> 00:04:38,960
so this is sort of how we treat um

00:04:36,240 --> 00:04:40,800
security today we just kind of say okay

00:04:38,960 --> 00:04:42,080
we have time for this we're just gonna

00:04:40,800 --> 00:04:44,479
first deliver on

00:04:42,080 --> 00:04:45,199
all of the features and then we're going

00:04:44,479 --> 00:04:47,280
to

00:04:45,199 --> 00:04:48,800
basically add some locks on the doors

00:04:47,280 --> 00:04:50,560
and some doors to our mansion

00:04:48,800 --> 00:04:53,520
right because features is what's

00:04:50,560 --> 00:04:56,320
important if we look at the chart of

00:04:53,520 --> 00:04:58,000
how we deliver code then we actually see

00:04:56,320 --> 00:05:00,320
that the more lines of code we

00:04:58,000 --> 00:05:01,600
write the more security threats we

00:05:00,320 --> 00:05:04,880
actually introduce

00:05:01,600 --> 00:05:05,440
and so we don't learn from our mistakes

00:05:04,880 --> 00:05:09,440
we just

00:05:05,440 --> 00:05:11,919
basically continue committing bugs and

00:05:09,440 --> 00:05:13,280
moving on and just like committing

00:05:11,919 --> 00:05:16,560
secrets committing uh

00:05:13,280 --> 00:05:20,000
security vulnerabilities into our main

00:05:16,560 --> 00:05:22,240
code base and despite that as developers

00:05:20,000 --> 00:05:23,199
we often treat it this way so we just

00:05:22,240 --> 00:05:26,000
basically say

00:05:23,199 --> 00:05:26,720
okay it works in dev so it's security

00:05:26,000 --> 00:05:29,360
problem now

00:05:26,720 --> 00:05:30,080
right so i have developed my code i

00:05:29,360 --> 00:05:33,680
committed

00:05:30,080 --> 00:05:34,080
all my stuff and now i can just get and

00:05:33,680 --> 00:05:36,560
uh

00:05:34,080 --> 00:05:38,560
ship it to security and then security is

00:05:36,560 --> 00:05:40,720
gonna fix it all for me

00:05:38,560 --> 00:05:41,840
but we know that that's not possible

00:05:40,720 --> 00:05:43,840
because there's so

00:05:41,840 --> 00:05:44,960
many more developers than security

00:05:43,840 --> 00:05:48,479
professionals

00:05:44,960 --> 00:05:50,560
basically we have about 45 million

00:05:48,479 --> 00:05:53,520
estimated developers and only

00:05:50,560 --> 00:05:54,240
70 000 estimated security researchers in

00:05:53,520 --> 00:05:57,039
the world

00:05:54,240 --> 00:05:57,520
so our security researchers just can't

00:05:57,039 --> 00:06:01,600
fix

00:05:57,520 --> 00:06:04,000
all of our issues for us

00:06:01,600 --> 00:06:06,240
so today i'm going to basically talk

00:06:04,000 --> 00:06:09,440
about how github can help you

00:06:06,240 --> 00:06:12,479
fix your security issues for you um

00:06:09,440 --> 00:06:14,960
so we have a large number of features

00:06:12,479 --> 00:06:16,080
in on github advanced security that can

00:06:14,960 --> 00:06:19,120
help you integrate

00:06:16,080 --> 00:06:21,600
security into your developer experience

00:06:19,120 --> 00:06:23,680
so it's not extraneous to what you do

00:06:21,600 --> 00:06:25,120
but rather it's shifted all the way left

00:06:23,680 --> 00:06:28,400
and integrated into your

00:06:25,120 --> 00:06:30,319
development lifecycle so basically we

00:06:28,400 --> 00:06:31,039
help you secure multiple parts of your

00:06:30,319 --> 00:06:33,360
code so

00:06:31,039 --> 00:06:35,520
we help you secure the supply chain the

00:06:33,360 --> 00:06:36,880
code the development lifecycle and of

00:06:35,520 --> 00:06:39,520
course your platform

00:06:36,880 --> 00:06:40,880
but today i'm going to talk specifically

00:06:39,520 --> 00:06:43,199
about the code part

00:06:40,880 --> 00:06:44,240
and even more specifically about the

00:06:43,199 --> 00:06:47,039
secrets part

00:06:44,240 --> 00:06:49,199
so why is um secret why are secrets

00:06:47,039 --> 00:06:51,759
important why is securing your secrets

00:06:49,199 --> 00:06:53,840
important well we're looking here at a

00:06:51,759 --> 00:06:56,880
chart that comes from a report

00:06:53,840 --> 00:06:59,599
uh in 2020 by verizon

00:06:56,880 --> 00:07:00,080
verizon data breach investigation report

00:06:59,599 --> 00:07:02,160
and

00:07:00,080 --> 00:07:03,199
basically these numbers don't add up to

00:07:02,160 --> 00:07:05,199
100 because

00:07:03,199 --> 00:07:07,360
some of them overlap but not all of them

00:07:05,199 --> 00:07:08,720
overlap so if we look at this we see

00:07:07,360 --> 00:07:11,120
that 37

00:07:08,720 --> 00:07:12,080
of all breaches actually use stolen

00:07:11,120 --> 00:07:14,400
credentials

00:07:12,080 --> 00:07:16,319
and in this particular chart this is not

00:07:14,400 --> 00:07:18,479
including fishing so phishing is

00:07:16,319 --> 00:07:20,560
classified under social engineering

00:07:18,479 --> 00:07:22,240
and it's in a different bucket here so

00:07:20,560 --> 00:07:23,599
this is just stolen credentials like

00:07:22,240 --> 00:07:25,280
something that's picked up from your

00:07:23,599 --> 00:07:27,120
test servers something that's picked up

00:07:25,280 --> 00:07:27,919
from your repository something that's

00:07:27,120 --> 00:07:30,800
picked up

00:07:27,919 --> 00:07:31,120
during brute force attacks so we can see

00:07:30,800 --> 00:07:33,360
that

00:07:31,120 --> 00:07:34,479
almost 50 percent of all the breaches in

00:07:33,360 --> 00:07:37,039
the world actually

00:07:34,479 --> 00:07:37,919
include stolen credentials and yet we're

00:07:37,039 --> 00:07:40,639
pretty bad

00:07:37,919 --> 00:07:41,840
about not committing these credentials

00:07:40,639 --> 00:07:44,080
or these secrets

00:07:41,840 --> 00:07:45,120
into source control as revised stories

00:07:44,080 --> 00:07:48,560
and this where

00:07:45,120 --> 00:07:50,879
secret scanning actually comes in so

00:07:48,560 --> 00:07:52,879
um we have different uh sort of

00:07:50,879 --> 00:07:53,759
different oriented features for public

00:07:52,879 --> 00:07:55,840
and private repo

00:07:53,759 --> 00:07:58,240
so i'm going to start with public repos

00:07:55,840 --> 00:08:00,639
for public reapers we actually have

00:07:58,240 --> 00:08:01,280
secret scanning for a number of years

00:08:00,639 --> 00:08:04,400
already

00:08:01,280 --> 00:08:07,680
and we are doing it at massive scale

00:08:04,400 --> 00:08:09,759
we're scanning about 150 million uh

00:08:07,680 --> 00:08:11,599
pushes a week so basically every push

00:08:09,759 --> 00:08:12,479
into a public repo basically gets

00:08:11,599 --> 00:08:15,680
scanned

00:08:12,479 --> 00:08:16,319
by github to identify secrets and many

00:08:15,680 --> 00:08:18,160
people don't

00:08:16,319 --> 00:08:20,400
know that it's happening because just

00:08:18,160 --> 00:08:23,840
because it's transparent to you

00:08:20,400 --> 00:08:26,319
so um on it just just to

00:08:23,840 --> 00:08:29,039
realize the scale of problem this is

00:08:26,319 --> 00:08:30,400
just github api keys committed to github

00:08:29,039 --> 00:08:32,640
public readers so

00:08:30,400 --> 00:08:34,560
it's uh we can't share data from our

00:08:32,640 --> 00:08:36,560
from other providers but we can

00:08:34,560 --> 00:08:38,159
track the data for ourselves so we know

00:08:36,560 --> 00:08:40,880
that there's hundreds

00:08:38,159 --> 00:08:42,560
of github api keys committed to github

00:08:40,880 --> 00:08:44,640
public repos every week

00:08:42,560 --> 00:08:47,279
there's rain this chart it ranges

00:08:44,640 --> 00:08:50,640
somewhere between 200 and 900 for

00:08:47,279 --> 00:08:52,080
every week over the past year so this is

00:08:50,640 --> 00:08:55,440
actually pretty bad

00:08:52,080 --> 00:08:57,760
um now github works with about 30 uh

00:08:55,440 --> 00:08:58,800
actually more than 30 different uh

00:08:57,760 --> 00:09:02,240
partners

00:08:58,800 --> 00:09:03,519
to identify top used secrets and to be

00:09:02,240 --> 00:09:05,120
able to identify them in the

00:09:03,519 --> 00:09:07,519
repositories and

00:09:05,120 --> 00:09:08,480
then handle that so how do we actually

00:09:07,519 --> 00:09:12,080
handle that

00:09:08,480 --> 00:09:12,959
well if you as a user check in your code

00:09:12,080 --> 00:09:15,920
and that code

00:09:12,959 --> 00:09:16,560
actually contains the secret so we

00:09:15,920 --> 00:09:19,200
actually

00:09:16,560 --> 00:09:21,279
run different regular expressions from

00:09:19,200 --> 00:09:24,080
known secret scouting partners

00:09:21,279 --> 00:09:24,640
to identify if something you committed

00:09:24,080 --> 00:09:26,800
actually

00:09:24,640 --> 00:09:27,760
matches one of these secrets so

00:09:26,800 --> 00:09:30,640
basically

00:09:27,760 --> 00:09:32,800
we then send the matches to a partner

00:09:30,640 --> 00:09:35,279
verify endpoint

00:09:32,800 --> 00:09:37,279
and then the partner can verify if it's

00:09:35,279 --> 00:09:39,200
a real secret or if it's not

00:09:37,279 --> 00:09:40,480
and then depending on what the partner

00:09:39,200 --> 00:09:43,120
wants to do with this

00:09:40,480 --> 00:09:44,720
sometimes they revoke the secret and

00:09:43,120 --> 00:09:47,519
sometimes they also

00:09:44,720 --> 00:09:48,560
email the user right so basically we

00:09:47,519 --> 00:09:51,279
have this process

00:09:48,560 --> 00:09:53,279
in which i completely transparent to the

00:09:51,279 --> 00:09:55,440
user in some cases your secret actually

00:09:53,279 --> 00:09:57,040
got it gets revoked by the partner

00:09:55,440 --> 00:09:59,519
and so your secret is no longer in the

00:09:57,040 --> 00:10:00,320
repository so if you say committed an

00:09:59,519 --> 00:10:04,160
aws

00:10:00,320 --> 00:10:05,839
uh secret into your repository then uh

00:10:04,160 --> 00:10:08,079
instead of someone stealing your

00:10:05,839 --> 00:10:09,279
credentials we're actually probably

00:10:08,079 --> 00:10:12,800
gonna revoke it

00:10:09,279 --> 00:10:15,040
for you so um let's show a real quick

00:10:12,800 --> 00:10:16,560
demo of this so this one is actually

00:10:15,040 --> 00:10:18,480
playing from the video because it's a

00:10:16,560 --> 00:10:21,680
little bit easier um

00:10:18,480 --> 00:10:22,320
but basically i am going to uh commit

00:10:21,680 --> 00:10:25,360
this

00:10:22,320 --> 00:10:26,480
secret into this very very simple public

00:10:25,360 --> 00:10:29,519
repository

00:10:26,480 --> 00:10:33,519
i so i'm just uh

00:10:29,519 --> 00:10:34,720
typing in a token on right and then i'm

00:10:33,519 --> 00:10:37,519
just going to commit it

00:10:34,720 --> 00:10:38,880
directly into the main branch of this

00:10:37,519 --> 00:10:41,600
repository

00:10:38,880 --> 00:10:42,560
and then it just takes about a couple of

00:10:41,600 --> 00:10:45,760
seconds

00:10:42,560 --> 00:10:47,440
but almost immediately i get an email so

00:10:45,760 --> 00:10:50,399
this secret was a doppler

00:10:47,440 --> 00:10:51,440
token um and the doppler in this case

00:10:50,399 --> 00:10:53,920
they automatically

00:10:51,440 --> 00:10:55,440
roll the secret for me so they actually

00:10:53,920 --> 00:10:56,399
rolled the secret for me i didn't have

00:10:55,440 --> 00:10:57,760
to do anything

00:10:56,399 --> 00:11:00,000
the moment they identified that i

00:10:57,760 --> 00:11:02,959
committed my secret into a public repo

00:11:00,000 --> 00:11:03,360
they immediately handled that for me and

00:11:02,959 --> 00:11:06,640
again

00:11:03,360 --> 00:11:08,959
keeping my code more secure so

00:11:06,640 --> 00:11:11,200
what do we do for private repos well

00:11:08,959 --> 00:11:11,680
private repos are a little bit different

00:11:11,200 --> 00:11:14,720
and

00:11:11,680 --> 00:11:18,079
so this feature is right now in beta and

00:11:14,720 --> 00:11:21,200
very very close to going ga

00:11:18,079 --> 00:11:22,959
but um basically we find the secrets uh

00:11:21,200 --> 00:11:25,279
the moment they are pushed to github

00:11:22,959 --> 00:11:26,240
there are secrets from the same

00:11:25,279 --> 00:11:28,160
providers

00:11:26,240 --> 00:11:29,920
that we talk about in terms of public

00:11:28,160 --> 00:11:31,839
secrets um and then

00:11:29,920 --> 00:11:33,040
we are doing a number of other things

00:11:31,839 --> 00:11:36,320
that we're going to talk about

00:11:33,040 --> 00:11:40,160
um in this presentation to do uh

00:11:36,320 --> 00:11:42,240
secret handling so um before we continue

00:11:40,160 --> 00:11:45,440
talking let's just uh let me show

00:11:42,240 --> 00:11:48,000
a quick demo of this and then hopefully

00:11:45,440 --> 00:11:52,320
this works

00:11:48,000 --> 00:11:52,320
so all right

00:11:52,880 --> 00:11:56,959
all right so hopefully let me know if

00:11:55,360 --> 00:12:00,000
you can see this okay

00:11:56,959 --> 00:12:01,200
um so basically this is a repository

00:12:00,000 --> 00:12:04,240
that i have

00:12:01,200 --> 00:12:06,160
that has uh already actually a secret in

00:12:04,240 --> 00:12:09,200
it but i'm going to commit

00:12:06,160 --> 00:12:11,519
a couple more just to blow it out um so

00:12:09,200 --> 00:12:14,320
i'm gonna go to my into my script again

00:12:11,519 --> 00:12:15,040
some very simple code in here so i'm

00:12:14,320 --> 00:12:18,399
going to

00:12:15,040 --> 00:12:20,560
just add oh that was not what was

00:12:18,399 --> 00:12:23,839
supposed to be in my clipboard but

00:12:20,560 --> 00:12:25,120
um typing is hard so all right i've

00:12:23,839 --> 00:12:28,079
added a couple things

00:12:25,120 --> 00:12:29,200
again i'm committing straight to my main

00:12:28,079 --> 00:12:31,839
branch

00:12:29,200 --> 00:12:32,800
because i live dangerously don't do this

00:12:31,839 --> 00:12:35,440
at home

00:12:32,800 --> 00:12:36,399
so uh we're going to go into my security

00:12:35,440 --> 00:12:38,399
tab

00:12:36,399 --> 00:12:40,639
and almost immediately you see that's

00:12:38,399 --> 00:12:42,160
even been less than a second

00:12:40,639 --> 00:12:44,399
but i can see that instead of one

00:12:42,160 --> 00:12:45,200
security alert i now have three security

00:12:44,399 --> 00:12:47,040
alert

00:12:45,200 --> 00:12:49,200
and i can see that i've identified a

00:12:47,040 --> 00:12:52,000
number of different keys

00:12:49,200 --> 00:12:54,639
in this repository so i have a stripe

00:12:52,000 --> 00:12:55,360
key and a google api key and a mail gun

00:12:54,639 --> 00:12:56,800
api key

00:12:55,360 --> 00:12:58,880
as we mentioned we've worked with

00:12:56,800 --> 00:13:00,160
different part partners on different

00:12:58,880 --> 00:13:02,800
regular expressions

00:13:00,160 --> 00:13:04,480
in terms of what you can see right and

00:13:02,800 --> 00:13:07,920
then i'm going to just go

00:13:04,480 --> 00:13:11,040
and um choose one of the secrets and say

00:13:07,920 --> 00:13:12,800
okay i want to handle this so in this

00:13:11,040 --> 00:13:14,399
case i have a number of

00:13:12,800 --> 00:13:16,399
options in terms of how i'm handling

00:13:14,399 --> 00:13:16,720
this so i can say it's revoked i can see

00:13:16,399 --> 00:13:19,440
it's

00:13:16,720 --> 00:13:20,000
say it's used in text or tests or if it

00:13:19,440 --> 00:13:22,800
is a false

00:13:20,000 --> 00:13:24,480
positives and stuff like that so i can

00:13:22,800 --> 00:13:27,600
go into revoked

00:13:24,480 --> 00:13:28,240
right and once i did that it actually

00:13:27,600 --> 00:13:31,600
shows up

00:13:28,240 --> 00:13:32,079
under closed right so i can actually go

00:13:31,600 --> 00:13:34,880
and then

00:13:32,079 --> 00:13:36,800
um you know choose to unmark it as uh

00:13:34,880 --> 00:13:37,680
revoked and stuff like that if i made a

00:13:36,800 --> 00:13:41,279
mistake

00:13:37,680 --> 00:13:42,959
but also i can see this nice added trace

00:13:41,279 --> 00:13:44,399
right so i can see exactly who marked

00:13:42,959 --> 00:13:46,800
this as revoked so

00:13:44,399 --> 00:13:48,079
if i needed some auditing trail in terms

00:13:46,800 --> 00:13:50,880
of what actually happened

00:13:48,079 --> 00:13:52,320
here i can i go into this repo and

00:13:50,880 --> 00:13:54,800
review this

00:13:52,320 --> 00:13:56,079
all right so let me stop sharing my

00:13:54,800 --> 00:13:58,240
screen

00:13:56,079 --> 00:13:59,360
and hopefully i can go into my next

00:13:58,240 --> 00:14:02,800
slide so

00:13:59,360 --> 00:14:05,839
um yes for even though this feature

00:14:02,800 --> 00:14:08,800
is in beta uh we already do

00:14:05,839 --> 00:14:09,680
about two million pushes uh scans a week

00:14:08,800 --> 00:14:13,120
so we scan

00:14:09,680 --> 00:14:15,440
massive amount of secrets already um

00:14:13,120 --> 00:14:16,560
and for us the most important part for

00:14:15,440 --> 00:14:18,880
us was actually

00:14:16,560 --> 00:14:21,360
how to figure out how to maintain a

00:14:18,880 --> 00:14:23,519
reasonable signal to noise ratio so

00:14:21,360 --> 00:14:24,399
we didn't want to throw a bunch of

00:14:23,519 --> 00:14:27,120
alerts out

00:14:24,399 --> 00:14:29,199
at you in terms of uh secrets that were

00:14:27,120 --> 00:14:32,639
going to prove to be false positives

00:14:29,199 --> 00:14:35,360
so actually what we have right now is

00:14:32,639 --> 00:14:37,440
if it goes to the next slide uh oh so um

00:14:35,360 --> 00:14:39,680
actually my next slide is about

00:14:37,440 --> 00:14:40,720
like potential false positives and the

00:14:39,680 --> 00:14:43,760
fact that it's not

00:14:40,720 --> 00:14:44,000
a simple problem so an example i want to

00:14:43,760 --> 00:14:46,560
give

00:14:44,000 --> 00:14:47,760
you is gold card list so for go card

00:14:46,560 --> 00:14:50,000
list the secret part

00:14:47,760 --> 00:14:52,320
pattern actually look like this so it's

00:14:50,000 --> 00:14:55,519
live dash and then some strings

00:14:52,320 --> 00:14:58,160
some numbers uh with some dash so

00:14:55,519 --> 00:14:59,600
pretty specific string and so we didn't

00:14:58,160 --> 00:15:00,800
think we would see a lot of false

00:14:59,600 --> 00:15:03,279
positives for that

00:15:00,800 --> 00:15:05,040
but actually we saw a ton right when we

00:15:03,279 --> 00:15:07,199
first ran the scan

00:15:05,040 --> 00:15:08,639
for the secret pattern there was a lot a

00:15:07,199 --> 00:15:11,519
lot of different urls

00:15:08,639 --> 00:15:13,440
and if you look at this you can notice

00:15:11,519 --> 00:15:17,040
that these are all urls right so

00:15:13,440 --> 00:15:17,839
certain um websites build urls for say

00:15:17,040 --> 00:15:19,920
blog posts

00:15:17,839 --> 00:15:21,440
in this particular fashion so they all

00:15:19,920 --> 00:15:23,839
look like this secret

00:15:21,440 --> 00:15:24,639
right so the solution to this particular

00:15:23,839 --> 00:15:28,240
problem

00:15:24,639 --> 00:15:31,199
was to uh get dictionary pass processing

00:15:28,240 --> 00:15:32,959
so we can uh then run these the

00:15:31,199 --> 00:15:34,800
potentially identified secrets through a

00:15:32,959 --> 00:15:35,279
dictionary and if we find dictionary

00:15:34,800 --> 00:15:37,120
words

00:15:35,279 --> 00:15:39,040
then it's probably not a secrets because

00:15:37,120 --> 00:15:41,279
secrets are usually random strings

00:15:39,040 --> 00:15:42,079
right we also identified a number of

00:15:41,279 --> 00:15:44,160
other different

00:15:42,079 --> 00:15:46,240
uh potential false positives for

00:15:44,160 --> 00:15:47,440
instance some images that are encoded in

00:15:46,240 --> 00:15:49,279
base 64

00:15:47,440 --> 00:15:50,560
look exactly like secret patterns from

00:15:49,279 --> 00:15:52,800
certain providers

00:15:50,560 --> 00:15:54,399
so it's actually not a trivial problem

00:15:52,800 --> 00:15:56,560
to solve

00:15:54,399 --> 00:15:58,000
but right now if we look at our own data

00:15:56,560 --> 00:16:00,800
for the past months

00:15:58,000 --> 00:16:02,480
we see that 61 of all secrets that we've

00:16:00,800 --> 00:16:05,199
identified through secret scanning

00:16:02,480 --> 00:16:06,000
in private repositories has been revoked

00:16:05,199 --> 00:16:08,880
and

00:16:06,000 --> 00:16:09,759
only 26 percent of them uh was marked as

00:16:08,880 --> 00:16:11,199
false positive

00:16:09,759 --> 00:16:13,040
and this is a process that we are

00:16:11,199 --> 00:16:15,040
continuing to improve

00:16:13,040 --> 00:16:16,880
so we're actually going to continue to

00:16:15,040 --> 00:16:17,440
reduce the number of false positives but

00:16:16,880 --> 00:16:20,320
again

00:16:17,440 --> 00:16:22,240
this is a pretty good result uh for us

00:16:20,320 --> 00:16:23,120
to be able to identify secrets and for

00:16:22,240 --> 00:16:25,279
you to

00:16:23,120 --> 00:16:27,440
actually have to worry about this right

00:16:25,279 --> 00:16:29,600
because you do not want to

00:16:27,440 --> 00:16:31,920
get into a position where a secret is

00:16:29,600 --> 00:16:35,440
actually leaked

00:16:31,920 --> 00:16:38,000
all right so we've talked about um

00:16:35,440 --> 00:16:38,800
you know not checking in secrets but

00:16:38,000 --> 00:16:41,680
what should you

00:16:38,800 --> 00:16:43,279
actually do instead of checking secrets

00:16:41,680 --> 00:16:45,680
into your repositories

00:16:43,279 --> 00:16:47,600
well i'm gonna talk really briefly about

00:16:45,680 --> 00:16:50,079
that and the biggest answer to that

00:16:47,600 --> 00:16:52,000
is to use a secret store now there's a

00:16:50,079 --> 00:16:53,040
lot of different secret stores out there

00:16:52,000 --> 00:16:55,120
on the market

00:16:53,040 --> 00:16:56,639
i'm not obviously going to talk about

00:16:55,120 --> 00:16:59,759
them all there's different

00:16:56,639 --> 00:17:01,360
types and sizes and different features

00:16:59,759 --> 00:17:03,519
for all of them

00:17:01,360 --> 00:17:04,559
i'm going to briefly just talk about our

00:17:03,519 --> 00:17:06,799
own secret store

00:17:04,559 --> 00:17:09,039
this is actions encrypted secrets so

00:17:06,799 --> 00:17:11,679
these are secrets that you can use

00:17:09,039 --> 00:17:12,240
in your repositories that you can then

00:17:11,679 --> 00:17:15,360
leverage

00:17:12,240 --> 00:17:18,160
in the actions workflows right so

00:17:15,360 --> 00:17:21,679
let me just quickly show a demo of this

00:17:18,160 --> 00:17:24,079
so i'm going to share my screen again

00:17:21,679 --> 00:17:26,240
and then i'm going to go back into my

00:17:24,079 --> 00:17:30,840
repository and i'm going to go back

00:17:26,240 --> 00:17:32,320
into settings um and then roll down into

00:17:30,840 --> 00:17:35,039
secrets

00:17:32,320 --> 00:17:38,400
and you will see that i don't see any

00:17:35,039 --> 00:17:40,960
particular secrets in this repository

00:17:38,400 --> 00:17:42,640
but i do see that there's organizational

00:17:40,960 --> 00:17:45,200
secrets that are already in here

00:17:42,640 --> 00:17:46,000
so if i wanted to i can leverage the

00:17:45,200 --> 00:17:49,280
organizational

00:17:46,000 --> 00:17:50,799
secrets um but i can also add a new

00:17:49,280 --> 00:17:53,280
repository secret

00:17:50,799 --> 00:17:54,160
and i can say okay this is my secret

00:17:53,280 --> 00:17:58,840
name

00:17:54,160 --> 00:18:01,360
and then i can say hi this is my super

00:17:58,840 --> 00:18:06,640
secret

00:18:01,360 --> 00:18:09,200
random string writing is really hard

00:18:06,640 --> 00:18:11,039
okay another matters in this particular

00:18:09,200 --> 00:18:14,160
case so i just checked in the secret

00:18:11,039 --> 00:18:16,720
and again i can leverage that in

00:18:14,160 --> 00:18:17,600
my actions workflow so i could

00:18:16,720 --> 00:18:22,000
potentially

00:18:17,600 --> 00:18:25,360
just go into my actions tab and i can go

00:18:22,000 --> 00:18:28,640
set up a workflow and then

00:18:25,360 --> 00:18:29,200
i can leverage the secret in my yaml

00:18:28,640 --> 00:18:31,360
file

00:18:29,200 --> 00:18:32,960
uh so in this case i'm just going to

00:18:31,360 --> 00:18:33,919
copy paste the whole thing because

00:18:32,960 --> 00:18:37,679
typing yammo

00:18:33,919 --> 00:18:39,520
is not a particular um good exercise

00:18:37,679 --> 00:18:40,960
and i could never do it without making a

00:18:39,520 --> 00:18:43,840
mistake but

00:18:40,960 --> 00:18:45,760
basically i can leverage this syntax to

00:18:43,840 --> 00:18:49,120
be able to leverage

00:18:45,760 --> 00:18:50,880
my secret in my actions workflow so i

00:18:49,120 --> 00:18:53,120
didn't have to expose my secret

00:18:50,880 --> 00:18:54,400
by the way don't print secrets to logs

00:18:53,120 --> 00:18:58,080
we do catch that

00:18:54,400 --> 00:19:00,160
so if you actually go and uh run this

00:18:58,080 --> 00:19:01,440
it's going to catch it but we can't

00:19:00,160 --> 00:19:03,120
catch them all so

00:19:01,440 --> 00:19:05,120
please don't do this don't live

00:19:03,120 --> 00:19:08,559
dangerously don't print your secrets

00:19:05,120 --> 00:19:12,320
into your logs okay i'm gonna go

00:19:08,559 --> 00:19:12,320
back into my slides

00:19:14,480 --> 00:19:23,280
all right so

00:19:19,520 --> 00:19:24,799
we basically have

00:19:23,280 --> 00:19:27,120
a lot of different secret vault

00:19:24,799 --> 00:19:29,200
providers i'm just mentioning the major

00:19:27,120 --> 00:19:31,200
clouds and i'm mentioning hashicorp

00:19:29,200 --> 00:19:32,960
because these are closely integrated

00:19:31,200 --> 00:19:35,039
with your infrastructure as code so you

00:19:32,960 --> 00:19:38,160
can choose to leverage the same

00:19:35,039 --> 00:19:38,880
um exact uh you know the same secret key

00:19:38,160 --> 00:19:41,360
vault

00:19:38,880 --> 00:19:42,000
or secret manager uh from your cloud

00:19:41,360 --> 00:19:44,080
provider

00:19:42,000 --> 00:19:45,440
so it is closely integrated with your

00:19:44,080 --> 00:19:48,559
workflow and it is

00:19:45,440 --> 00:19:49,520
easier to work with um again there's

00:19:48,559 --> 00:19:51,760
different types

00:19:49,520 --> 00:19:53,600
but the important part part is that you

00:19:51,760 --> 00:19:55,919
retrieve your secrets at runtime

00:19:53,600 --> 00:19:57,440
instead of committing them into code or

00:19:55,919 --> 00:19:59,919
even into configuration even

00:19:57,440 --> 00:20:02,240
configuration isn't safe so

00:19:59,919 --> 00:20:02,960
most obligations actually get breached

00:20:02,240 --> 00:20:05,679
through

00:20:02,960 --> 00:20:08,000
some configuration problems or code

00:20:05,679 --> 00:20:10,720
problems so be careful about that

00:20:08,000 --> 00:20:14,640
all right so let's talk briefly about

00:20:10,720 --> 00:20:14,640
what our roadmap is for this

00:20:15,360 --> 00:20:21,679
if it goes to the roadmap slide

00:20:18,480 --> 00:20:24,640
okay so um we do want to

00:20:21,679 --> 00:20:25,280
add an api for secret scanning finding

00:20:24,640 --> 00:20:26,960
so this

00:20:25,280 --> 00:20:29,520
these are the things that are coming out

00:20:26,960 --> 00:20:31,679
shortly uh so we will have an api

00:20:29,520 --> 00:20:32,559
so you don't have to go to ui to handle

00:20:31,679 --> 00:20:34,559
your secrets

00:20:32,559 --> 00:20:36,080
um you will be able to do this through

00:20:34,559 --> 00:20:38,880
the github api

00:20:36,080 --> 00:20:40,159
um we are going to work on an updated

00:20:38,880 --> 00:20:42,080
permission system

00:20:40,159 --> 00:20:43,760
uh so basically there is admin level

00:20:42,080 --> 00:20:45,280
permissions versus developer level

00:20:43,760 --> 00:20:48,400
permissions in terms of

00:20:45,280 --> 00:20:51,200
who can handle what um and where

00:20:48,400 --> 00:20:52,960
um we are going to work on more false

00:20:51,200 --> 00:20:55,760
positive reductions

00:20:52,960 --> 00:20:56,640
um and we are going to uh work on the

00:20:55,760 --> 00:20:59,679
org level

00:20:56,640 --> 00:21:01,520
view for detected secrets um again

00:20:59,679 --> 00:21:04,000
right now you have to manage secrets in

00:21:01,520 --> 00:21:06,320
every particular repository which may be

00:21:04,000 --> 00:21:07,679
a little bit harsh if you are looking at

00:21:06,320 --> 00:21:10,159
a large enterprise

00:21:07,679 --> 00:21:11,360
uh but then again sometimes it doesn't

00:21:10,159 --> 00:21:13,440
make sense to handle

00:21:11,360 --> 00:21:15,760
this the secret pattern at the end price

00:21:13,440 --> 00:21:17,440
level so we basically are working on

00:21:15,760 --> 00:21:18,880
figuring out what this experience really

00:21:17,440 --> 00:21:21,280
should look like

00:21:18,880 --> 00:21:23,200
um and then some other things that are

00:21:21,280 --> 00:21:26,400
more inspirational that are coming

00:21:23,200 --> 00:21:28,960
um is one is custom patterns so

00:21:26,400 --> 00:21:30,640
you're going to be able to define custom

00:21:28,960 --> 00:21:31,679
regular expressions or patterns that

00:21:30,640 --> 00:21:34,000
you're looking for

00:21:31,679 --> 00:21:36,000
so if you are generating your own

00:21:34,000 --> 00:21:37,840
secrets and you're not a secret provider

00:21:36,000 --> 00:21:39,280
you can still scan your repositories for

00:21:37,840 --> 00:21:41,200
secrets

00:21:39,280 --> 00:21:42,799
and you're going to be able to do

00:21:41,200 --> 00:21:44,960
pre-receive hook scanning

00:21:42,799 --> 00:21:46,400
so once you've committed your secret

00:21:44,960 --> 00:21:48,159
once it's committed and

00:21:46,400 --> 00:21:50,640
in pull requests it's already been

00:21:48,159 --> 00:21:52,799
exposed so it doesn't really help us to

00:21:50,640 --> 00:21:54,000
uh you know block a pull request from

00:21:52,799 --> 00:21:56,480
going in uh

00:21:54,000 --> 00:21:57,600
but it would help us if we could prevent

00:21:56,480 --> 00:21:59,760
the progress

00:21:57,600 --> 00:22:00,720
the committee from even going into your

00:21:59,760 --> 00:22:02,640
repository

00:22:00,720 --> 00:22:04,400
now this is kind of hard to do because

00:22:02,640 --> 00:22:06,559
we can't stop commits for

00:22:04,400 --> 00:22:08,480
potential false positives so we can only

00:22:06,559 --> 00:22:11,039
do this if we're super sure

00:22:08,480 --> 00:22:13,120
that a secret has been identified um and

00:22:11,039 --> 00:22:15,600
then again organizational white

00:22:13,120 --> 00:22:18,080
triage so we're going to be able to uh

00:22:15,600 --> 00:22:21,679
say revoke a particular secret pattern

00:22:18,080 --> 00:22:24,080
at a repository level so i do want to

00:22:21,679 --> 00:22:24,960
wish you all to stay safe both in terms

00:22:24,080 --> 00:22:27,919
of

00:22:24,960 --> 00:22:28,720
any you know any secrets that you are

00:22:27,919 --> 00:22:30,799
working with

00:22:28,720 --> 00:22:32,159
and in terms of the global pandemic

00:22:30,799 --> 00:22:34,960
hopefully

00:22:32,159 --> 00:22:37,520
github can help you secure your code and

00:22:34,960 --> 00:22:40,000
make it as easy as possible for you

00:22:37,520 --> 00:22:41,919
and um thank you so much like i say you

00:22:40,000 --> 00:22:42,960
can find me in multiple places by the

00:22:41,919 --> 00:22:44,960
name divine ops

00:22:42,960 --> 00:22:49,520
and i'm going to be in discussions for

00:22:44,960 --> 00:22:49,520

YouTube URL: https://www.youtube.com/watch?v=oaHBW9Il4Wg


