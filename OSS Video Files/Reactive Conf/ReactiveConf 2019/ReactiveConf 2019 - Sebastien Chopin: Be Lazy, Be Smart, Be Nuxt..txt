Title: ReactiveConf 2019 - Sebastien Chopin: Be Lazy, Be Smart, Be Nuxt.
Publication date: 2019-10-31
Playlist: ReactiveConf 2019
Description: 
	Oct 30 - Nov 1, 2019
Prague, Czech Republic
https://reactiveconf.com/
Discovery stage
-------------------------------------------------------------------
Nuxt.js is a framework based on Vue.js giving you all the tools to create any kind of applications (Universal, SPA and Statically Generated) while keeping performances and best practices at the top. Sebastien will demonstrate how to create a web application quickly by using Nuxt.js and explaining how it works under the hood. Giving you confidence for your next Vue applications.
Captions: 
	00:00:02,720 --> 00:00:11,850
[Music]

00:00:16,230 --> 00:00:23,200
okay hello everyone I'm Sebastian Chopin

00:00:19,210 --> 00:00:26,020
it was written right here my talk is

00:00:23,200 --> 00:00:27,849
really dense so I will go straight to

00:00:26,020 --> 00:00:31,240
the point today I'm going to talk about

00:00:27,849 --> 00:00:35,520
next year's who here has used view or

00:00:31,240 --> 00:00:39,730
next year's okay health that's good

00:00:35,520 --> 00:00:43,210
so next is a JavaScript framework it is

00:00:39,730 --> 00:00:46,809
based on view Jia's view Reuter view

00:00:43,210 --> 00:00:52,620
meta view X and view meta it's also

00:00:46,809 --> 00:00:56,260
composed of webpack babel and post CSS

00:00:52,620 --> 00:00:58,059
so you can run next dev or just next in

00:00:56,260 --> 00:01:00,820
development so you will have out module

00:00:58,059 --> 00:01:06,040
replacement and stuff and next build to

00:01:00,820 --> 00:01:08,229
bundle you up for production it gives

00:01:06,040 --> 00:01:11,500
you a directory structure to follow so

00:01:08,229 --> 00:01:13,979
this is all the directory most of them

00:01:11,500 --> 00:01:16,810
are optional only the pages directory is

00:01:13,979 --> 00:01:18,880
required and the next dot config dot GS

00:01:16,810 --> 00:01:21,340
is where you will put your configuration

00:01:18,880 --> 00:01:26,789
but we have no core configuration by

00:01:21,340 --> 00:01:29,229
default it is also performances oriented

00:01:26,789 --> 00:01:32,140
which means that we have automatic code

00:01:29,229 --> 00:01:35,020
splitting for your pages we have the

00:01:32,140 --> 00:01:37,710
resource hints also the HTTP to support

00:01:35,020 --> 00:01:40,299
we have this small prefetching feature

00:01:37,710 --> 00:01:42,520
so when you will navigate on a page

00:01:40,299 --> 00:01:45,039
every link in the viewport

00:01:42,520 --> 00:01:50,439
will automatically prefetch the next

00:01:45,039 --> 00:01:52,289
page and we have the modern build so

00:01:50,439 --> 00:01:54,939
when you use the modern build we will

00:01:52,289 --> 00:01:58,810
create a legacy build an important bill

00:01:54,939 --> 00:02:00,609
so when your browser is supporting the

00:01:58,810 --> 00:02:05,049
latest feature which directly serve this

00:02:00,609 --> 00:02:07,240
file and saving kilobyte of bandwidth we

00:02:05,049 --> 00:02:09,069
care about developer experience I care

00:02:07,240 --> 00:02:11,890
really deeply in the developer

00:02:09,069 --> 00:02:14,290
experience so when you run next you will

00:02:11,890 --> 00:02:16,540
see a splash screen showing you the web

00:02:14,290 --> 00:02:20,560
back progress as well as an indicator in

00:02:16,540 --> 00:02:23,379
the browser we all saw this next bit - -

00:02:20,560 --> 00:02:25,569
analyst so we run web back panel

00:02:23,379 --> 00:02:25,930
analyzer let's show you web page with

00:02:25,569 --> 00:02:29,200
your

00:02:25,930 --> 00:02:32,680
as a map so you can optimize them and

00:02:29,200 --> 00:02:35,230
you can write view file a CSS tyler's

00:02:32,680 --> 00:02:38,709
and processors without touching any

00:02:35,230 --> 00:02:40,629
configuration file and we have a strong

00:02:38,709 --> 00:02:44,019
module echo system you can think of it

00:02:40,629 --> 00:02:46,780
as the next plugins and you can install

00:02:44,019 --> 00:02:49,090
them with NPM added to your next config

00:02:46,780 --> 00:02:52,450
and you have extended your next app you

00:02:49,090 --> 00:02:53,890
can think of Google Analytics PWA etc so

00:02:52,450 --> 00:02:58,420
you can update them remove them without

00:02:53,890 --> 00:03:01,150
touching any of your code so next are

00:02:58,420 --> 00:03:03,370
server-side rendering we also do static

00:03:01,150 --> 00:03:05,849
generation you can take off gatsby for

00:03:03,370 --> 00:03:07,810
instance and we also support client-side

00:03:05,849 --> 00:03:10,150
application without server-side

00:03:07,810 --> 00:03:10,870
rendering without touching a single line

00:03:10,150 --> 00:03:13,989
of code

00:03:10,870 --> 00:03:16,209
I will show how it works so we have

00:03:13,989 --> 00:03:18,489
different rendering amount Universal

00:03:16,209 --> 00:03:19,510
it's a several render of the application

00:03:18,489 --> 00:03:22,000
on new request

00:03:19,510 --> 00:03:25,000
static generated so we pro render the

00:03:22,000 --> 00:03:28,329
page at Build time and we you can host

00:03:25,000 --> 00:03:29,859
it on any static hosting and we have a

00:03:28,329 --> 00:03:32,290
single page app which is clear inside

00:03:29,859 --> 00:03:35,319
only so let's get started about

00:03:32,290 --> 00:03:39,430
universal you run the next command for

00:03:35,319 --> 00:03:42,790
the development server then you run next

00:03:39,430 --> 00:03:44,739
bill to Bernalillo app and you can use

00:03:42,790 --> 00:03:47,919
Northstar to stop the no geoserver in

00:03:44,739 --> 00:03:49,629
production with the production vendor so

00:03:47,919 --> 00:03:50,169
let's see how it look like you have your

00:03:49,629 --> 00:03:53,829
browser

00:03:50,169 --> 00:03:57,910
you hit my let's say my blog you hit the

00:03:53,829 --> 00:04:00,430
noxious server node then we run the view

00:03:57,910 --> 00:04:02,230
app so let's say I have a WordPress API

00:04:00,430 --> 00:04:05,410
I'm listening my blog post calling

00:04:02,230 --> 00:04:08,019
WordPress API sending back my JSON then

00:04:05,410 --> 00:04:10,959
I finished rendering my view up on the

00:04:08,019 --> 00:04:13,780
server then I send back the HTML and the

00:04:10,959 --> 00:04:16,139
JavaScript so what happened here is my

00:04:13,780 --> 00:04:19,359
visitor can see the page you can scroll

00:04:16,139 --> 00:04:21,250
if he clicks on on a link at this stage

00:04:19,359 --> 00:04:24,039
it will refresh the page go back to the

00:04:21,250 --> 00:04:26,590
step one but while he is reading and

00:04:24,039 --> 00:04:29,800
scrolling the browser will download and

00:04:26,590 --> 00:04:31,510
execute the JavaScript then we will have

00:04:29,800 --> 00:04:34,030
this client-side hateration

00:04:31,510 --> 00:04:36,190
where we recreate the same page on

00:04:34,030 --> 00:04:39,090
client side with a virtual Dom we try to

00:04:36,190 --> 00:04:41,580
view will match the server render HT

00:04:39,090 --> 00:04:45,330
with the virtual dome if it's good the

00:04:41,580 --> 00:04:48,000
hub become reactive and when I we click

00:04:45,330 --> 00:04:50,100
on a blog post the view up we call the

00:04:48,000 --> 00:04:52,620
WordPress API send that of JSON and then

00:04:50,100 --> 00:04:58,199
I see my new page so it's client-side

00:04:52,620 --> 00:05:02,190
navigation let's see an example I have

00:04:58,199 --> 00:05:04,830
this eco news app so when I navigate

00:05:02,190 --> 00:05:08,310
here I have this client side navigation

00:05:04,830 --> 00:05:11,490
coding the icon use API and if I look at

00:05:08,310 --> 00:05:15,750
the source code I can see that my app

00:05:11,490 --> 00:05:18,960
has been severed entered so that's it

00:05:15,750 --> 00:05:22,350
for universal rendering static generated

00:05:18,960 --> 00:05:24,810
is the same for development

00:05:22,350 --> 00:05:27,060
you just run next then instead of

00:05:24,810 --> 00:05:29,160
calling next billion using next odd you

00:05:27,060 --> 00:05:30,870
will call next generate that will call

00:05:29,160 --> 00:05:33,810
next build and then we will generate

00:05:30,870 --> 00:05:39,030
every route at Build time cyber-render

00:05:33,810 --> 00:05:41,550
save the HTML and put everything inside

00:05:39,030 --> 00:05:44,280
the dist directory then you can host

00:05:41,550 --> 00:05:48,030
this this directory on keto page search

00:05:44,280 --> 00:05:49,860
every static hosting that you know then

00:05:48,030 --> 00:05:53,010
when you hit my blog which has been

00:05:49,860 --> 00:05:55,650
static generated the CDN the static host

00:05:53,010 --> 00:05:57,780
sent back the HTML and JavaScript like

00:05:55,650 --> 00:06:00,979
universal we have downloading the

00:05:57,780 --> 00:06:04,289
executing JavaScript iteration and

00:06:00,979 --> 00:06:06,030
difference so right here is for the next

00:06:04,289 --> 00:06:07,979
upcoming version for the full static

00:06:06,030 --> 00:06:10,740
generate right now is still calling the

00:06:07,979 --> 00:06:12,479
API on client side navigation but the

00:06:10,740 --> 00:06:15,900
point is I click on the blog post it

00:06:12,479 --> 00:06:19,020
will fetch this page data that has been

00:06:15,900 --> 00:06:20,849
saved as JSON and sent back to the

00:06:19,020 --> 00:06:25,139
browser and then you have this grant

00:06:20,849 --> 00:06:31,560
sign a vacation so we have it actually

00:06:25,139 --> 00:06:36,479
on next year's org so this is server

00:06:31,560 --> 00:06:41,090
rendered so we have the HTML and when I

00:06:36,479 --> 00:06:44,510
navigate you can see that we have this

00:06:41,090 --> 00:06:44,510
that's clear

00:06:46,020 --> 00:06:51,640
okay it's coding this payload is on

00:06:48,880 --> 00:06:52,960
where we have the page data so we don't

00:06:51,640 --> 00:06:55,930
call our API anymore

00:06:52,960 --> 00:07:01,960
so this with the PWA module allows to

00:06:55,930 --> 00:07:04,270
have a full offline capable website so

00:07:01,960 --> 00:07:05,950
that's the difference between universal

00:07:04,270 --> 00:07:07,780
and static generated of course if you

00:07:05,950 --> 00:07:09,580
need fresh data every time someone

00:07:07,780 --> 00:07:12,370
refresh the page like an e-commerce

00:07:09,580 --> 00:07:16,630
website I will recommend to use the

00:07:12,370 --> 00:07:19,030
universal rendering okay now we have the

00:07:16,630 --> 00:07:20,560
single page app so if you don't care

00:07:19,030 --> 00:07:22,330
about server-side rendering because you

00:07:20,560 --> 00:07:25,960
don't care about this you or some user

00:07:22,330 --> 00:07:27,580
experience you can run next - - s.p.a

00:07:25,960 --> 00:07:30,250
so we will disable the server-side

00:07:27,580 --> 00:07:31,720
rendering you can use next bit - SP a

00:07:30,250 --> 00:07:35,080
that weed vendor you up to the T's

00:07:31,720 --> 00:07:38,520
directory and that's how we look like

00:07:35,080 --> 00:07:41,200
you have the static hosting you request

00:07:38,520 --> 00:07:43,060
send back HTML but because we don't have

00:07:41,200 --> 00:07:46,540
server-side rendering then we show

00:07:43,060 --> 00:07:49,960
loader then processing executing the

00:07:46,540 --> 00:07:52,330
JavaScript getting the blog post sending

00:07:49,960 --> 00:07:55,150
back and then the user the visitor can

00:07:52,330 --> 00:07:58,900
see your website click on a link same as

00:07:55,150 --> 00:08:02,920
the other mod and we have this up to

00:07:58,900 --> 00:08:06,100
show so it's exactly the same app we

00:08:02,920 --> 00:08:08,410
just ran next bit - - SP a we have

00:08:06,100 --> 00:08:14,910
client side navigation but if I look at

00:08:08,410 --> 00:08:18,010
the source code I don't have the HTML

00:08:14,910 --> 00:08:20,740
one would USPA we still several render

00:08:18,010 --> 00:08:25,930
the meta so you still have some SEO

00:08:20,740 --> 00:08:32,580
capabilities ok that's it for the mods I

00:08:25,930 --> 00:08:35,349
hope you guys run something damn it ok

00:08:32,580 --> 00:08:37,000
we have different packages for

00:08:35,349 --> 00:08:40,000
development we recommend to use next

00:08:37,000 --> 00:08:42,040
which is 68 megabyte that's huge but

00:08:40,000 --> 00:08:44,830
that's not module and we have web pack

00:08:42,040 --> 00:08:46,540
Babel everything inside for production

00:08:44,830 --> 00:08:48,840
we recommend next art which is 8

00:08:46,540 --> 00:08:53,830
megabytes so it works for several s and

00:08:48,840 --> 00:08:56,430
any docker so that's the installation

00:08:53,830 --> 00:08:59,580
size not your app size of course

00:08:56,430 --> 00:09:02,770
bleeding-edge that's the package for

00:08:59,580 --> 00:09:05,290
if you want to have the latest bug fixes

00:09:02,770 --> 00:09:07,240
or feature requests we publish this

00:09:05,290 --> 00:09:09,790
package every day if we had commit

00:09:07,240 --> 00:09:11,860
during the day and for type scrip we

00:09:09,790 --> 00:09:14,100
have this package that you installed

00:09:11,860 --> 00:09:17,830
with AD next slash type script runtime

00:09:14,100 --> 00:09:20,350
because we support type script now and

00:09:17,830 --> 00:09:24,130
let's do some live coding so you can see

00:09:20,350 --> 00:09:29,980
how we look like so I have my package to

00:09:24,130 --> 00:09:34,450
JSON I hope that everyone can see is it

00:09:29,980 --> 00:09:38,560
okay or you can say okay thank you

00:09:34,450 --> 00:09:39,510
so I have this next command I'm gonna

00:09:38,560 --> 00:09:43,870
run

00:09:39,510 --> 00:09:45,190
actually I will run next - oh so it

00:09:43,870 --> 00:09:47,440
opened the browser

00:09:45,190 --> 00:09:50,380
so while web pack is burning we have

00:09:47,440 --> 00:09:53,260
this nice animation so you don't have to

00:09:50,380 --> 00:09:56,050
wait on the terminal so you say please

00:09:53,260 --> 00:09:58,690
create the pages directory so I'm going

00:09:56,050 --> 00:10:02,110
to create the pages directory and like

00:09:58,690 --> 00:10:14,790
PHP I will create this index dot view

00:10:02,110 --> 00:10:14,790
file and I will say hello chief okay

00:10:15,240 --> 00:10:25,900
saving refresh okay this is cool

00:10:20,530 --> 00:10:28,210
I have hot module replacement and I want

00:10:25,900 --> 00:10:32,440
to use a plug-in a view plug-in so I'm

00:10:28,210 --> 00:10:34,390
going I'm gonna use view multi select so

00:10:32,440 --> 00:10:36,430
I'm going to the installation page and

00:10:34,390 --> 00:10:39,430
say okay you have to import humidity

00:10:36,430 --> 00:10:41,860
select register the component so I will

00:10:39,430 --> 00:10:45,820
create a plugins directory create a

00:10:41,860 --> 00:10:54,420
fight call with you multi select select

00:10:45,820 --> 00:10:57,940
that yes I will all swing pod view and

00:10:54,420 --> 00:10:59,950
they say that I need to add the CSS so

00:10:57,940 --> 00:11:03,459
what I'm gonna do is that I will import

00:10:59,950 --> 00:11:07,060
it right inside my sorry my JavaScript

00:11:03,459 --> 00:11:09,760
file because we use webpack so we can

00:11:07,060 --> 00:11:11,500
import the CSS and what good is when I

00:11:09,760 --> 00:11:12,310
want to remove it I just have to remove

00:11:11,500 --> 00:11:14,350
these four

00:11:12,310 --> 00:11:16,690
so in the next version of next I will

00:11:14,350 --> 00:11:23,350
auto import the plugins but right now I

00:11:16,690 --> 00:11:31,990
need to specify it in my config so

00:11:23,350 --> 00:11:32,410
plugins will be an array and this is

00:11:31,990 --> 00:11:34,360
good

00:11:32,410 --> 00:11:38,110
now I want to use it in my page now I

00:11:34,360 --> 00:11:48,510
added the plug-in for that few multi

00:11:38,110 --> 00:11:54,340
select data I will replace to view react

00:11:48,510 --> 00:11:59,830
angular okay in the Dacian that's

00:11:54,340 --> 00:12:06,160
important okay now I have my component I

00:11:59,830 --> 00:12:14,950
have the CSS why is it not that's

00:12:06,160 --> 00:12:16,540
knowing okay okay I have my components

00:12:14,950 --> 00:12:22,180
now I'm going to create another page

00:12:16,540 --> 00:12:28,600
where we make an API call so let's

00:12:22,180 --> 00:12:35,820
create these users that view page I will

00:12:28,600 --> 00:12:42,520
have data I have my list of users here I

00:12:35,820 --> 00:12:46,180
will display my users okay let's go to

00:12:42,520 --> 00:12:51,640
the users page and as you can see this

00:12:46,180 --> 00:12:55,330
is several rendered by default and if I

00:12:51,640 --> 00:12:58,450
want to make an API call what I will do

00:12:55,330 --> 00:13:00,910
with the view application is I will make

00:12:58,450 --> 00:13:08,190
sure this is a synchronous I will use

00:13:00,910 --> 00:13:08,190
fetch I have my place order API

00:13:11,110 --> 00:13:19,300
and I have my list of user but the issue

00:13:14,830 --> 00:13:22,210
here is that is not sever rendered if i

00:13:19,300 --> 00:13:25,090
refresh that's not good for SEO and for

00:13:22,210 --> 00:13:28,450
user experience so we created in next

00:13:25,090 --> 00:13:30,340
this hook called a sync data so as you

00:13:28,450 --> 00:13:36,720
can guess it's like data so you have to

00:13:30,340 --> 00:13:41,320
return an object and I would directly

00:13:36,720 --> 00:13:46,120
fetch my users in the async data so I

00:13:41,320 --> 00:13:48,940
save now refresh I have my list of users

00:13:46,120 --> 00:13:50,770
that has been severe and 'red and we

00:13:48,940 --> 00:13:53,770
have this hydration and it works

00:13:50,770 --> 00:13:56,260
automatically I want to show how it is

00:13:53,770 --> 00:13:58,840
when you do clarence ID navigation so

00:13:56,260 --> 00:14:06,940
for this i will create a layout so i can

00:13:58,840 --> 00:14:09,420
have all of my mind navbar okay I will

00:14:06,940 --> 00:14:09,420
keep that

00:14:12,900 --> 00:14:18,850
so let's have my list of link I'm going

00:14:16,660 --> 00:14:21,940
to use Knox link which is the component

00:14:18,850 --> 00:14:24,610
to navigate on servers on client side

00:14:21,940 --> 00:14:29,400
but it will render from on the server as

00:14:24,610 --> 00:14:34,029
a normal a tag so this is my home link

00:14:29,400 --> 00:14:35,950
this is my users page I will also create

00:14:34,029 --> 00:14:38,950
a login page so I'm spoiling you a

00:14:35,950 --> 00:14:50,339
little bit and a secret page that you

00:14:38,950 --> 00:14:53,860
have to be logged in to access oops ok

00:14:50,339 --> 00:14:57,490
so I have my links but now I don't have

00:14:53,860 --> 00:14:59,529
my page anymore so I'm going to use the

00:14:57,490 --> 00:15:02,470
next component to render the current

00:14:59,529 --> 00:15:04,180
page and of course if I put three in

00:15:02,470 --> 00:15:07,750
x-component I have three times with the

00:15:04,180 --> 00:15:10,800
page so I don't recommend to use that so

00:15:07,750 --> 00:15:13,870
I have my pages so let's add some CSS I

00:15:10,800 --> 00:15:15,430
will use water CSS for those that

00:15:13,870 --> 00:15:20,080
doesn't know it's just a normal team

00:15:15,430 --> 00:15:23,490
that will make all the normal tag more

00:15:20,080 --> 00:15:25,660
beautiful I'm going to use the head key

00:15:23,490 --> 00:15:28,750
the head is for manage your head

00:15:25,660 --> 00:15:32,260
elements in your next up we use view

00:15:28,750 --> 00:15:36,880
meter for that and we say link which is

00:15:32,260 --> 00:15:45,420
an area and then we transform these like

00:15:36,880 --> 00:15:45,420
it's JavaScript object okay

00:15:48,800 --> 00:15:57,410
refresh okay I have my beautiful page on

00:15:53,679 --> 00:15:59,119
client side navigation what we do if I

00:15:57,410 --> 00:16:01,670
click on users and my connection is

00:15:59,119 --> 00:16:04,699
slower I will wait for a Singh data to

00:16:01,670 --> 00:16:09,009
be finished before showing the page and

00:16:04,699 --> 00:16:13,819
normally you had this loader at the top

00:16:09,009 --> 00:16:18,889
as you know add head you can use it for

00:16:13,819 --> 00:16:21,049
SEO so let's say homepage here and I

00:16:18,889 --> 00:16:25,339
have my title here so you can manage

00:16:21,049 --> 00:16:30,649
everything with this head meta tag and I

00:16:25,339 --> 00:16:33,619
want to make sure that I know it's hard

00:16:30,649 --> 00:16:39,230
to type and talk to know on which page I

00:16:33,619 --> 00:16:40,999
am so I would just have this okay so

00:16:39,230 --> 00:16:43,639
this is the class generated

00:16:40,999 --> 00:16:47,989
automatically by view Reuters so we say

00:16:43,639 --> 00:16:52,850
next link so now I know on which page I

00:16:47,989 --> 00:16:59,499
am so let's have this login page I'm

00:16:52,850 --> 00:17:02,269
going to create this login dot view and

00:16:59,499 --> 00:17:05,240
before this I need to manage my state

00:17:02,269 --> 00:17:07,459
for my whole app so whatever page I am I

00:17:05,240 --> 00:17:10,250
know if I'm logged in or know for this

00:17:07,459 --> 00:17:12,529
I'm going to use view X and if you X is

00:17:10,250 --> 00:17:14,779
like Redux let's talk about just a

00:17:12,529 --> 00:17:19,939
global state so we create a store

00:17:14,779 --> 00:17:25,459
directory with index dot J's file and I

00:17:19,939 --> 00:17:28,580
can directly export my state which is a

00:17:25,459 --> 00:17:33,610
function that return an object connected

00:17:28,580 --> 00:17:36,889
false I will export export my mutation

00:17:33,610 --> 00:17:41,480
login I got the state state that

00:17:36,889 --> 00:17:44,630
connects to the girl true I'm sorry if

00:17:41,480 --> 00:17:50,000
you guys are using semicolon I know it

00:17:44,630 --> 00:17:55,159
can be can hurt your eyes but sorry so

00:17:50,000 --> 00:17:58,100
let's see with view dev tools my state I

00:17:55,159 --> 00:18:00,799
have connected false so I can use the

00:17:58,100 --> 00:18:03,250
roster there are stored dot state in

00:18:00,799 --> 00:18:09,820
every page every come

00:18:03,250 --> 00:18:16,850
so that what I'm gonna do here so login

00:18:09,820 --> 00:18:20,860
button if the roster not state if I'm

00:18:16,850 --> 00:18:26,950
connected when you click on this link

00:18:20,860 --> 00:18:26,950
you will call this logout mutation

00:18:27,460 --> 00:18:38,500
otherwise you call the login and it

00:18:37,220 --> 00:18:41,690
works

00:18:38,500 --> 00:18:45,559
we have this mutation we are now

00:18:41,690 --> 00:18:55,759
connected let's create this secret page

00:18:45,559 --> 00:18:59,480
that I will protect just after so of

00:18:55,759 --> 00:19:01,669
course here my state is not persisted

00:18:59,480 --> 00:19:04,429
but I can use a module to keep it in a

00:19:01,669 --> 00:19:08,000
cookie session or whatever we have a hot

00:19:04,429 --> 00:19:13,970
odd module to manage this authentication

00:19:08,000 --> 00:19:15,110
and here so I'm the secret page but I

00:19:13,970 --> 00:19:17,120
don't want to show it if you're not

00:19:15,110 --> 00:19:18,350
connected so what I'm going to do we

00:19:17,120 --> 00:19:21,139
have this feature called

00:19:18,350 --> 00:19:25,309
middleware if you used Express you

00:19:21,139 --> 00:19:27,289
should be familiar formula with

00:19:25,309 --> 00:19:32,149
middleware so I'm going to create a

00:19:27,289 --> 00:19:38,750
middleware directory call it home TK did

00:19:32,149 --> 00:19:43,639
that GS which is a function here I get

00:19:38,750 --> 00:19:46,970
the context and let's look at the next

00:19:43,639 --> 00:19:50,299
year documentation for the context I can

00:19:46,970 --> 00:19:58,220
get all of these keys so app store

00:19:50,299 --> 00:20:07,039
I'm going to use store and redirect so

00:19:58,220 --> 00:20:09,769
if I am not connected redirect to login

00:20:07,039 --> 00:20:13,879
otherwise to nothing and go to the next

00:20:09,769 --> 00:20:16,190
step so I have my authenticate in

00:20:13,879 --> 00:20:20,629
middleware I want to use it on mice

00:20:16,190 --> 00:20:28,850
great page so metered well okay

00:20:20,629 --> 00:20:33,080
authenticated oh don't TK kid okay now

00:20:28,850 --> 00:20:35,240
let's try to access my secret page is I

00:20:33,080 --> 00:20:39,350
can see I'm automatically redirected to

00:20:35,240 --> 00:20:42,080
login so I'm now logged in I can access

00:20:39,350 --> 00:20:44,059
my secret page if i refresh I will be

00:20:42,080 --> 00:20:46,820
redirected to slash login since the

00:20:44,059 --> 00:20:48,409
store the state is not persisted this I

00:20:46,820 --> 00:20:51,169
don't have the time to show how to

00:20:48,409 --> 00:20:54,620
persist the state but you can do it with

00:20:51,169 --> 00:20:57,019
cookies so now I have my app what I do

00:20:54,620 --> 00:21:01,370
what I'm going to do is I want to make

00:20:57,019 --> 00:21:07,129
it a PWA so let's go to PW at next

00:21:01,370 --> 00:21:11,929
year's org it says that you need to add

00:21:07,129 --> 00:21:14,409
the PW module I have it here then you

00:21:11,929 --> 00:21:21,529
add it to your nugget config dot yes

00:21:14,409 --> 00:21:24,950
let's add it here then you ensure static

00:21:21,529 --> 00:21:31,070
directory exists and we create icon

00:21:24,950 --> 00:21:36,679
inside okay I have it and let's put an

00:21:31,070 --> 00:21:40,039
icon inside and then add swe dot star I

00:21:36,679 --> 00:21:42,519
have it here because you will create it

00:21:40,039 --> 00:21:48,370
automatically for the service worker and

00:21:42,519 --> 00:21:54,409
that's it I know that I will add nope

00:21:48,370 --> 00:22:01,129
this PWA option manifest so I can give a

00:21:54,409 --> 00:22:04,600
name next reactive and on English okay

00:22:01,129 --> 00:22:07,669
now I have this I will bundle it and

00:22:04,600 --> 00:22:10,629
push it on a static hosting so we'll

00:22:07,669 --> 00:22:10,629
call Yun generate

00:22:13,910 --> 00:22:19,520
so as you can see we have to bundle one

00:22:15,980 --> 00:22:21,770
for client one for server if you want to

00:22:19,520 --> 00:22:24,230
know how next works under the hood you

00:22:21,770 --> 00:22:26,720
can look at the dot next directory as

00:22:24,230 --> 00:22:29,300
you can see we have the router that is

00:22:26,720 --> 00:22:32,840
generated so it's the view application

00:22:29,300 --> 00:22:34,580
we have the middleware here that's it's

00:22:32,840 --> 00:22:38,330
like a boiler plate generating of Europe

00:22:34,580 --> 00:22:42,380
for you and it generated these pages so

00:22:38,330 --> 00:22:50,290
let's deploy this dist directory to

00:22:42,380 --> 00:23:02,060
search mighty boy dr. staat SH okay and

00:22:50,290 --> 00:23:08,030
let's incognito window HTTP and I have

00:23:02,060 --> 00:23:09,890
my application it's working perfect if i

00:23:08,030 --> 00:23:11,810
refresh here it has been static

00:23:09,890 --> 00:23:14,210
generated so when we see you have a

00:23:11,810 --> 00:23:16,730
redirect when we generate the page with

00:23:14,210 --> 00:23:19,700
do a client-side generation so it will

00:23:16,730 --> 00:23:21,700
be hid it will work on client-side see

00:23:19,700 --> 00:23:26,690
you not connected to the redirect and

00:23:21,700 --> 00:23:32,320
let's check the performances so finger

00:23:26,690 --> 00:23:42,220
crossed otherwise that we just ran away

00:23:32,320 --> 00:23:49,720
if it's really bad okay nice we have 96

00:23:42,220 --> 00:23:52,520
of performances so what can we do we can

00:23:49,720 --> 00:23:55,250
rent avoid this render blocking

00:23:52,520 --> 00:23:57,860
resources of course we put the CSS as

00:23:55,250 --> 00:24:00,290
head we could directly have it inside

00:23:57,860 --> 00:24:04,460
the app and let next server render it

00:24:00,290 --> 00:24:09,520
and best practice certain handle http/2

00:24:04,460 --> 00:24:17,570
and we have the PWA but we can install

00:24:09,520 --> 00:24:20,009
when we are not in in canítö normally it

00:24:17,570 --> 00:24:22,389
should happen here

00:24:20,009 --> 00:24:28,269
why I don't know how many time I have to

00:24:22,389 --> 00:24:32,919
do this but normally yes I can install

00:24:28,269 --> 00:24:36,849
it and we have our PWA so that's it for

00:24:32,919 --> 00:24:39,369
the live coding it's available on github

00:24:36,849 --> 00:24:41,409
on next demo on my personal account or

00:24:39,369 --> 00:24:46,059
you can play with it on next emo or

00:24:41,409 --> 00:24:48,249
night boy who are we we are now nine

00:24:46,059 --> 00:24:51,479
core team member working on next all on

00:24:48,249 --> 00:24:54,759
the world from Eastern Europe to Brazil

00:24:51,479 --> 00:24:59,009
my brother is here alex is taking a

00:24:54,759 --> 00:25:01,690
picture without asking and we have a

00:24:59,009 --> 00:25:03,429
good next adoption I'm really happy

00:25:01,690 --> 00:25:07,450
about this so thank you guys if you're

00:25:03,429 --> 00:25:10,559
using next that's because of you and we

00:25:07,450 --> 00:25:13,839
have companies to asking us as well some

00:25:10,559 --> 00:25:17,499
some companies that I don't know the

00:25:13,839 --> 00:25:19,149
name and we have more more company we

00:25:17,499 --> 00:25:24,820
have strong adoption in Japan and China

00:25:19,149 --> 00:25:26,829
as well thanks to view and you can keep

00:25:24,820 --> 00:25:29,440
in touch with us on the Twitter account

00:25:26,829 --> 00:25:31,479
github if you have a question or if you

00:25:29,440 --> 00:25:34,149
want to contribute answering question

00:25:31,479 --> 00:25:36,940
making pull request please I encourage

00:25:34,149 --> 00:25:41,049
you we have the discord if you want to

00:25:36,940 --> 00:25:43,509
chat with us we have a partnership with

00:25:41,049 --> 00:25:46,149
view school and we have a one month free

00:25:43,509 --> 00:25:51,629
pass if you want to take a picture of

00:25:46,149 --> 00:25:55,419
this you have a 5 4 3 2 1

00:25:51,629 --> 00:25:57,459
and I am Sebastian Chopin and the

00:25:55,419 --> 00:26:02,200
creator of next you can find me on

00:25:57,459 --> 00:26:04,379
Twitter and github with 18 x and thank

00:26:02,200 --> 00:26:04,379
you

00:26:06,169 --> 00:26:08,230

YouTube URL: https://www.youtube.com/watch?v=vbsPXHCu8Xg


