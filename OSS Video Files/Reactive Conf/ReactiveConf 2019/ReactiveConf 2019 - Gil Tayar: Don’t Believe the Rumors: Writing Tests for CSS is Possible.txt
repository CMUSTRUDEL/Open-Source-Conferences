Title: ReactiveConf 2019 - Gil Tayar: Don’t Believe the Rumors: Writing Tests for CSS is Possible
Publication date: 2019-10-31
Playlist: ReactiveConf 2019
Description: 
	Oct 30 - Nov 1, 2019
Prague, Czech Republic
https://reactiveconf.com/
Millennium stage
-------------------------------------------------------------------
You know that fear. The fear of changing something in your CSS. Deleting a CSS rule is a lesson in getting yourself to calm down, telling yourself that it’s OK, you are absolutely _sure_ that deleting that rule won’t change anything.

And only manual testing can assuage that fear. And yet, even then, you’re still frightened that you haven’t checked _everything_, and that you missed something. Not to mention that it’s amazingly boring.

Never fear again! Testing your CSS code, testing the _visual_ aspects of your code, is now possible, and I will show how. A slew of new Saas tools have come to the forefront which enable us to write tests that check that everything is the same that it was (even if we moved from BEM to CSS-in-JS).

So grab that keyboard, refactor your CSS, because writing tests for it is now possible!
Captions: 
	00:00:02,230 --> 00:00:11,330
[Music]

00:00:16,630 --> 00:00:24,920
hello Prague I'm so happy to be here

00:00:22,370 --> 00:00:29,570
it's like my second time first time was

00:00:24,920 --> 00:00:31,940
with my lovely wife we did the

00:00:29,570 --> 00:00:33,949
sightseeing and everything and and and

00:00:31,940 --> 00:00:37,090
then you know the second time I come

00:00:33,949 --> 00:00:41,060
here I come out of the cab and I am my

00:00:37,090 --> 00:00:44,180
hotel is like near Old Town and I look

00:00:41,060 --> 00:00:47,329
and I say oh my god I forgot how

00:00:44,180 --> 00:00:49,190
beautiful Prague is so thank you for

00:00:47,329 --> 00:00:52,250
inviting me thank you for reminding me

00:00:49,190 --> 00:00:55,489
that and I want to talk about beauty in

00:00:52,250 --> 00:00:59,780
this in this talk so we'll get to that

00:00:55,489 --> 00:01:02,270
okay writing tests a little bit about me

00:00:59,780 --> 00:01:05,000
I'm really old like I started developing

00:01:02,270 --> 00:01:08,709
in the 80s I have to say this is the

00:01:05,000 --> 00:01:11,600
most exciting time to to be a developer

00:01:08,709 --> 00:01:13,340
we think that things are constantly

00:01:11,600 --> 00:01:15,829
changing I've gone through a lot of

00:01:13,340 --> 00:01:18,170
these changes but think of that the web

00:01:15,829 --> 00:01:21,709
is 25 years old

00:01:18,170 --> 00:01:24,109
that is a long long time and it's you

00:01:21,709 --> 00:01:25,880
know we're starting to stabilize and for

00:01:24,109 --> 00:01:28,159
me the web is the most important

00:01:25,880 --> 00:01:30,920
software development things that

00:01:28,159 --> 00:01:32,599
happened and it's wonderful and and all

00:01:30,920 --> 00:01:34,969
you got all your people here are you

00:01:32,599 --> 00:01:38,420
know web developers so let's let's hope

00:01:34,969 --> 00:01:40,939
it continues I said I wanted to talk

00:01:38,420 --> 00:01:44,840
about Beauty but I want to talk about

00:01:40,939 --> 00:01:47,299
fear your fear and we'll get to that but

00:01:44,840 --> 00:01:49,819
first let's talk about you know all of

00:01:47,299 --> 00:01:52,310
you web developers what kind of web

00:01:49,819 --> 00:01:54,109
developers are there in the world first

00:01:52,310 --> 00:01:56,719
of all there's back-end developers you

00:01:54,109 --> 00:01:59,539
know they're they know their stuff

00:01:56,719 --> 00:02:01,789
they're experienced you know those guys

00:01:59,539 --> 00:02:04,759
those people they talk to things like

00:02:01,789 --> 00:02:07,749
you know thread pools and message queues

00:02:04,759 --> 00:02:07,749
in Scala

00:02:08,030 --> 00:02:12,530
and fronting people say their back end

00:02:10,520 --> 00:02:14,780
in front end developers I like to split

00:02:12,530 --> 00:02:17,390
the front end community to two

00:02:14,780 --> 00:02:19,520
communities one is the JavaScript

00:02:17,390 --> 00:02:23,510
developers daughters are responsible for

00:02:19,520 --> 00:02:25,850
JavaScript and and remember a lot of you

00:02:23,510 --> 00:02:27,290
people have both of these in common so

00:02:25,850 --> 00:02:28,940
first of all the JavaScript developers

00:02:27,290 --> 00:02:29,720
what did they talk about they talk about

00:02:28,940 --> 00:02:32,150
JavaScript

00:02:29,720 --> 00:02:35,530
you know we react things like DOM and

00:02:32,150 --> 00:02:38,870
angular and event listeners and all that

00:02:35,530 --> 00:02:41,920
but the male let's not forget the CSS

00:02:38,870 --> 00:02:45,650
developers who's a CSS developer here

00:02:41,920 --> 00:02:49,100
who is you guys are view people are

00:02:45,650 --> 00:02:52,070
beautiful you create beautiful stuff and

00:02:49,100 --> 00:02:54,950
you are beautiful and you talk about

00:02:52,070 --> 00:02:59,180
things like responsive design and media

00:02:54,950 --> 00:03:01,940
queries and flexbox and the wonderful

00:02:59,180 --> 00:03:03,560
thing is happening in the front and the

00:03:01,940 --> 00:03:07,100
in the development world web and

00:03:03,560 --> 00:03:12,320
otherwise developers yuga you people are

00:03:07,100 --> 00:03:14,030
starting to write tests why why are all

00:03:12,320 --> 00:03:16,820
with some of you most of you I hope

00:03:14,030 --> 00:03:21,410
starting to write tests why why are we

00:03:16,820 --> 00:03:24,530
writing tests I call it a go programa

00:03:21,410 --> 00:03:28,400
phobia what is echo programa phobia it

00:03:24,530 --> 00:03:29,209
is a fear of one's own code listen to

00:03:28,400 --> 00:03:32,420
yourself

00:03:29,209 --> 00:03:36,290
close your eyes seek that fear inside

00:03:32,420 --> 00:03:38,630
you you know that it is true we all fear

00:03:36,290 --> 00:03:41,420
our own code the code that we write

00:03:38,630 --> 00:03:42,980
let's talk about that a bit you know

00:03:41,420 --> 00:03:44,840
when a manager says can you add that

00:03:42,980 --> 00:03:47,690
feature for me that does this and that

00:03:44,840 --> 00:03:50,030
and that the picture it as a Lego you

00:03:47,690 --> 00:03:53,780
see that leg over there you just add the

00:03:50,030 --> 00:03:59,000
code wonderfully in and boom the feature

00:03:53,780 --> 00:04:01,840
works the real thing is this you add the

00:03:59,000 --> 00:04:05,060
code and everything breaks that is fear

00:04:01,840 --> 00:04:07,459
let's talk about removing code you want

00:04:05,060 --> 00:04:10,280
to remove a CSS rule you want to remove

00:04:07,459 --> 00:04:13,239
some code this is what you think is

00:04:10,280 --> 00:04:17,209
gonna happen it's like perfect

00:04:13,239 --> 00:04:20,680
this is the reality and I want I'm gonna

00:04:17,209 --> 00:04:20,680
waste time on this one

00:04:21,420 --> 00:04:31,930
this is the reality of removing cone

00:04:25,680 --> 00:04:35,440
yeah what is the third thing you do well

00:04:31,930 --> 00:04:38,200
you try to do its refactoring changing

00:04:35,440 --> 00:04:39,850
your code and this what you think is

00:04:38,200 --> 00:04:45,910
gonna happen and this is what really

00:04:39,850 --> 00:04:48,490
happens you are laughing but when you're

00:04:45,910 --> 00:04:53,080
doing this you are not laughing you are

00:04:48,490 --> 00:04:56,680
crying crying out of fear remember a go

00:04:53,080 --> 00:05:00,010
programa phobia and it doesn't matter

00:04:56,680 --> 00:05:03,610
whether our code is a horribly written

00:05:00,010 --> 00:05:06,670
pile of spaghetti or a lovingly crafted

00:05:03,610 --> 00:05:10,180
set of loosely coupled modules doesn't

00:05:06,670 --> 00:05:12,610
matter we fear changing the code a go

00:05:10,180 --> 00:05:17,230
programa phobia because changing the

00:05:12,610 --> 00:05:19,270
code means breaking the app remember the

00:05:17,230 --> 00:05:21,070
question was why do web developers start

00:05:19,270 --> 00:05:24,370
testing and the answer is they have

00:05:21,070 --> 00:05:26,740
discovered that testing specifically

00:05:24,370 --> 00:05:29,320
developer testing removes the need for

00:05:26,740 --> 00:05:32,170
manually testing the code after each

00:05:29,320 --> 00:05:33,520
code change and when I say developer

00:05:32,170 --> 00:05:37,440
testing I'm specifically talking about

00:05:33,520 --> 00:05:40,690
code that you people the developers

00:05:37,440 --> 00:05:43,840
write as part of writing your production

00:05:40,690 --> 00:05:46,270
code not QA automation engineers that's

00:05:43,840 --> 00:05:48,490
another thing very important but

00:05:46,270 --> 00:05:52,210
developers writing code for the test

00:05:48,490 --> 00:05:55,270
tests for themselves in testing abolish

00:05:52,210 --> 00:05:57,550
is that fear testing abolishes a BOGO

00:05:55,270 --> 00:06:00,550
Barranca phobia how does it work you

00:05:57,550 --> 00:06:03,370
write your code very cool and then you

00:06:00,550 --> 00:06:04,960
write the test for your code and then

00:06:03,370 --> 00:06:07,510
you know you run the test and boom

00:06:04,960 --> 00:06:09,760
doesn't work and you fix it and boom it

00:06:07,510 --> 00:06:13,300
doesn't work until finally great success

00:06:09,760 --> 00:06:15,700
it works and now every change you do you

00:06:13,300 --> 00:06:17,770
just run the tests again the tests pass

00:06:15,700 --> 00:06:19,740
you're good for production you're good

00:06:17,770 --> 00:06:22,390
for deployment

00:06:19,740 --> 00:06:27,100
remember testing abolishing echo

00:06:22,390 --> 00:06:31,030
programa phobia abolishes the fear of

00:06:27,100 --> 00:06:32,800
that code okay so who's writing the test

00:06:31,030 --> 00:06:35,639
who's abolishing their fear

00:06:32,800 --> 00:06:37,960
let's start with back-end developers

00:06:35,639 --> 00:06:38,590
they've been doing it for quite some

00:06:37,960 --> 00:06:41,259
time

00:06:38,590 --> 00:06:43,840
back-end developers have methodologies

00:06:41,259 --> 00:06:45,880
set and tooling and they're mostly

00:06:43,840 --> 00:06:48,130
established if you are a blanket

00:06:45,880 --> 00:06:50,919
developer you need to write tests it's

00:06:48,130 --> 00:06:54,090
not easy you may not know it but go to

00:06:50,919 --> 00:06:54,090
the web there's lots of information

00:06:54,240 --> 00:07:01,690
front-end JavaScript developers not

00:06:58,630 --> 00:07:03,310
totally there yet lots of confusion the

00:07:01,690 --> 00:07:03,789
methodologies and tooling are totally

00:07:03,310 --> 00:07:06,220
there yet

00:07:03,789 --> 00:07:08,560
but it's happening if you're a front-end

00:07:06,220 --> 00:07:09,880
developer that does Java Script you can

00:07:08,560 --> 00:07:11,259
know how did and there are a lot of

00:07:09,880 --> 00:07:14,199
educators in the field

00:07:11,259 --> 00:07:16,900
first and foremost Kent Dodds Justin

00:07:14,199 --> 00:07:18,970
Searles Kevin lamping glev which we saw

00:07:16,900 --> 00:07:22,120
in a talk here grab a motive of cyprus

00:07:18,970 --> 00:07:25,270
fame Shai Resnick on the angular Fame in

00:07:22,120 --> 00:07:28,810
others there slowly teaching us how to

00:07:25,270 --> 00:07:30,639
do front-end JavaScript testing and

00:07:28,810 --> 00:07:32,830
we're slowly building a methodology

00:07:30,639 --> 00:07:34,870
based on unit testing component and

00:07:32,830 --> 00:07:37,479
multi component testing using J's DOM

00:07:34,870 --> 00:07:39,699
and browser automation testing using

00:07:37,479 --> 00:07:44,110
Cypress webdriver al selenium webdriver

00:07:39,699 --> 00:07:45,880
test cafe and others okay so back in

00:07:44,110 --> 00:07:48,599
developers front-end JavaScript below

00:07:45,880 --> 00:07:54,550
what about front-end CSS developers

00:07:48,599 --> 00:07:58,479
they're sad yep

00:07:54,550 --> 00:08:02,550
they don't know how to write tests for

00:07:58,479 --> 00:08:06,330
CSS I didn't I used to work at Wix I

00:08:02,550 --> 00:08:09,940
didn't know we'll talk about that later

00:08:06,330 --> 00:08:13,240
why well front-end JavaScript tests are

00:08:09,940 --> 00:08:16,479
functional you have the input you have

00:08:13,240 --> 00:08:18,849
the algorithm you have the output so the

00:08:16,479 --> 00:08:20,650
tests themselves are you do something

00:08:18,849 --> 00:08:24,250
you pass it through the algorithm and

00:08:20,650 --> 00:08:26,169
you assert the results pretty easy well

00:08:24,250 --> 00:08:28,120
it gets more complicated than that but

00:08:26,169 --> 00:08:31,690
if you take the essence that is the

00:08:28,120 --> 00:08:35,529
essence do some action run the stuff

00:08:31,690 --> 00:08:40,260
check the results very easy but how do I

00:08:35,529 --> 00:08:44,229
functionally test the visuals of this

00:08:40,260 --> 00:08:46,209
I've seen places where they check the

00:08:44,229 --> 00:08:48,939
color of this border is blue

00:08:46,209 --> 00:08:52,089
and the width of this is a 100 pixels

00:08:48,939 --> 00:08:55,499
etc etc etc that's crazy that's hundreds

00:08:52,089 --> 00:08:58,179
of pages of testing CSS properties and

00:08:55,499 --> 00:09:00,429
frankly are not guaranteed that it looks

00:08:58,179 --> 00:09:04,240
what you think it should look like so

00:09:00,429 --> 00:09:07,959
how do I functionally test this and the

00:09:04,240 --> 00:09:10,240
answer is most people just don't know we

00:09:07,959 --> 00:09:13,480
can't do functional testing because

00:09:10,240 --> 00:09:16,869
there's no algorithm here not really

00:09:13,480 --> 00:09:18,399
it's the browser testing CSS is a really

00:09:16,869 --> 00:09:20,740
really hard problem if you haven't been

00:09:18,399 --> 00:09:23,319
doing it till now that's fine it really

00:09:20,740 --> 00:09:26,230
is a hard problem and that Wix I used to

00:09:23,319 --> 00:09:28,600
do as part of my front-end testing you

00:09:26,230 --> 00:09:30,399
know methodology building I went and

00:09:28,600 --> 00:09:33,279
said okay I've tested everything how do

00:09:30,399 --> 00:09:35,259
I test my CSS and I tried things and it

00:09:33,279 --> 00:09:37,899
they just didn't work and we'll talk

00:09:35,259 --> 00:09:40,449
about why later and you the reason the

00:09:37,899 --> 00:09:44,009
this essence reason is its visual not

00:09:40,449 --> 00:09:48,249
functional and testing visual is hard

00:09:44,009 --> 00:09:54,249
but don't believe the rumors writing

00:09:48,249 --> 00:09:56,019
tests for CSS is possible how well a lot

00:09:54,249 --> 00:09:59,379
of people come to me in conferences and

00:09:56,019 --> 00:10:01,059
say well you navigate this is how visual

00:09:59,379 --> 00:10:02,559
testing works and it it doesn't you

00:10:01,059 --> 00:10:04,540
navigate to a page using some browser

00:10:02,559 --> 00:10:07,420
automation tool like Cypress take a

00:10:04,540 --> 00:10:10,209
screenshot of the page and then verify

00:10:07,420 --> 00:10:12,459
that it looks good okay they think that

00:10:10,209 --> 00:10:15,670
the tooling can just look at a page and

00:10:12,459 --> 00:10:18,059
whew this is good or maybe verify that

00:10:15,670 --> 00:10:22,149
it conforms to a certain design system

00:10:18,059 --> 00:10:24,399
that's what they think unfortunately

00:10:22,149 --> 00:10:27,189
that's not possible our machine learning

00:10:24,399 --> 00:10:29,709
and other algorithms are just not good

00:10:27,189 --> 00:10:30,759
to look at a page and says hey this is

00:10:29,709 --> 00:10:32,920
beautiful

00:10:30,759 --> 00:10:34,569
I didn't remember we need to check that

00:10:32,920 --> 00:10:36,879
it is beautiful just like frog

00:10:34,569 --> 00:10:40,029
well prog I know is beautiful I look at

00:10:36,879 --> 00:10:42,670
it but how does an algorithm look at a

00:10:40,029 --> 00:10:44,499
page and say well this is good this

00:10:42,670 --> 00:10:49,869
looks good and the answer is they're not

00:10:44,499 --> 00:10:51,819
that good yet who knows but not yet so

00:10:49,869 --> 00:10:54,160
how does it work how does visual

00:10:51,819 --> 00:10:56,529
regression testing work and the answer

00:10:54,160 --> 00:10:58,689
is this and this is a sample code using

00:10:56,529 --> 00:10:59,720
cypress you've already seen it if you've

00:10:58,689 --> 00:11:03,830
seen the talk

00:10:59,720 --> 00:11:05,360
yesterday by gleb you set a viewport

00:11:03,830 --> 00:11:08,780
because you want to test it in a certain

00:11:05,360 --> 00:11:10,760
width you visit your application you

00:11:08,780 --> 00:11:13,010
navigate the browser to our application

00:11:10,760 --> 00:11:16,010
you do the stuff that you want to do

00:11:13,010 --> 00:11:19,040
this is typing into a into an input and

00:11:16,010 --> 00:11:22,190
then this is where the magic happens you

00:11:19,040 --> 00:11:25,100
do one-liner using some plugins on

00:11:22,190 --> 00:11:27,710
visual testing plug in and you say match

00:11:25,100 --> 00:11:33,440
image snapshot and what happens here

00:11:27,710 --> 00:11:36,560
this is what happens here the tool takes

00:11:33,440 --> 00:11:38,300
a screenshot of your app that's one then

00:11:36,560 --> 00:11:41,210
it compares the screenshot with a

00:11:38,300 --> 00:11:42,050
baseline screenshot the first time the

00:11:41,210 --> 00:11:44,690
test runs

00:11:42,050 --> 00:11:46,730
there's no baseline screenshot so it

00:11:44,690 --> 00:11:48,890
just takes that picture takes that

00:11:46,730 --> 00:11:59,300
screenshot that's the baseline the

00:11:48,890 --> 00:12:02,750
second time it compares it rock your

00:11:59,300 --> 00:12:04,940
mistake it compares the screenshots with

00:12:02,750 --> 00:12:07,700
the baselines and checks for differences

00:12:04,940 --> 00:12:10,400
if it finds if it doesn't find the

00:12:07,700 --> 00:12:13,730
difference perfect the test passes the

00:12:10,400 --> 00:12:15,620
check passes if it doesn't if it finds a

00:12:13,730 --> 00:12:20,480
difference there are two possible

00:12:15,620 --> 00:12:24,020
outcomes either it's a bug yep I'm acht

00:12:20,480 --> 00:12:28,160
up my CSS and change something deleted a

00:12:24,020 --> 00:12:30,980
ruler which was it seems used or it's

00:12:28,160 --> 00:12:33,350
okay I did want to move that button 10

00:12:30,980 --> 00:12:36,620
pixels to the right it happens

00:12:33,350 --> 00:12:38,720
what would the tool know of the visual

00:12:36,620 --> 00:12:40,970
testing to know whether it's a bug or a

00:12:38,720 --> 00:12:44,420
feature the answer's no it's up to you

00:12:40,970 --> 00:12:47,839
to decide whether a difference a diff is

00:12:44,420 --> 00:12:51,290
a bug or a feature so you need to accept

00:12:47,839 --> 00:12:54,110
or reject the difference and that is how

00:12:51,290 --> 00:12:56,420
you test your CSS take a screenshot do

00:12:54,110 --> 00:12:57,880
the comparison if it's fine good if not

00:12:56,420 --> 00:13:00,350
you accept or reject the difference

00:12:57,880 --> 00:13:04,820
thank you very much

00:13:00,350 --> 00:13:07,970
questions now I just joking I wish it

00:13:04,820 --> 00:13:10,400
were me this is what I tried it wicks it

00:13:07,970 --> 00:13:12,780
didn't work I really really tried it

00:13:10,400 --> 00:13:16,380
took a week oh my god I have this

00:13:12,780 --> 00:13:20,370
okay because there's an elephant in the

00:13:16,380 --> 00:13:23,070
room if you're not culturally American

00:13:20,370 --> 00:13:24,720
I'm not but an elephant in the room is

00:13:23,070 --> 00:13:27,000
something that nobody talks about but

00:13:24,720 --> 00:13:30,300
it's just there it's a problem it's

00:13:27,000 --> 00:13:32,190
actually not one elephant it's four and

00:13:30,300 --> 00:13:36,330
we'll talk about the four elephants

00:13:32,190 --> 00:13:40,110
elephant number one taking the screen

00:13:36,330 --> 00:13:41,850
shot is how hard I mean all of the tools

00:13:40,110 --> 00:13:43,650
know how to take a screen shot but

00:13:41,850 --> 00:13:45,750
believe me it's not easy

00:13:43,650 --> 00:13:47,520
each automation tool works differently

00:13:45,750 --> 00:13:48,990
they have lots of problems with taking a

00:13:47,520 --> 00:13:50,580
full-page most of them you know how to

00:13:48,990 --> 00:13:52,530
take a viewport you want to take a

00:13:50,580 --> 00:13:55,410
specific selector a specific component

00:13:52,530 --> 00:14:00,810
forget about it that stuff with

00:13:55,410 --> 00:14:02,550
scrolling and it's it's hard but so if

00:14:00,810 --> 00:14:05,790
even taking a screen shot is hard do we

00:14:02,550 --> 00:14:09,000
abandon ship don't believe the rumors

00:14:05,790 --> 00:14:12,420
writing test for CSS is possible because

00:14:09,000 --> 00:14:16,170
all those tools both commercial and open

00:14:12,420 --> 00:14:18,120
source deal with that but some of them

00:14:16,170 --> 00:14:19,700
deal with that better than others try

00:14:18,120 --> 00:14:22,890
before you buy

00:14:19,700 --> 00:14:26,490
elephant number two taking screenshots

00:14:22,890 --> 00:14:27,570
is easy comparing them is hard you have

00:14:26,490 --> 00:14:29,760
your base line you have your current

00:14:27,570 --> 00:14:32,760
screen shot how do you compare them the

00:14:29,760 --> 00:14:35,670
standard comparison is well pixel by

00:14:32,760 --> 00:14:39,060
pixel okay just check if all the pixels

00:14:35,670 --> 00:14:41,670
are different the answer is I wish look

00:14:39,060 --> 00:14:43,860
at these two these look the same same

00:14:41,670 --> 00:14:47,580
screenshot same app taking on different

00:14:43,860 --> 00:14:51,300
machines this is one this is the other

00:14:47,580 --> 00:14:53,490
as you can see there are anti-aliasing

00:14:51,300 --> 00:14:56,310
differences based on the graphic driver

00:14:53,490 --> 00:14:59,040
of the machine you can't do pixel

00:14:56,310 --> 00:15:02,460
comparison let's give another example

00:14:59,040 --> 00:15:05,570
same dog same JPEG this is Chrome 67

00:15:02,460 --> 00:15:08,280
this is Chrome 68 this is a real example

00:15:05,570 --> 00:15:11,430
this is the difference I mean it looks

00:15:08,280 --> 00:15:13,740
the same but these red ones are the

00:15:11,430 --> 00:15:20,460
pixel differences chrome changed the way

00:15:13,740 --> 00:15:22,560
they render JPEG from 67 - 68 remember

00:15:20,460 --> 00:15:25,290
our testing Bookstore I tried on it

00:15:22,560 --> 00:15:26,310
tried it with a pixel by pixel this is

00:15:25,290 --> 00:15:30,029
one screenshot this

00:15:26,310 --> 00:15:31,890
another this is a diff

00:15:30,029 --> 00:15:34,529
I have no idea why it's on the same

00:15:31,890 --> 00:15:37,560
machine ten minute difference in a brain

00:15:34,529 --> 00:15:39,200
in a headless browser I don't know how

00:15:37,560 --> 00:15:42,330
it happened but it does happen

00:15:39,200 --> 00:15:43,950
pixel-by-pixel basically generates

00:15:42,330 --> 00:15:47,730
either false positives or false

00:15:43,950 --> 00:15:49,800
negatives and the way these tools

00:15:47,730 --> 00:15:53,580
handled it the pixel by pixel is they

00:15:49,800 --> 00:15:55,770
give you a slider an error slider I call

00:15:53,580 --> 00:15:57,750
it the false positives or false negative

00:15:55,770 --> 00:16:03,290
error handler what do you want more

00:15:57,750 --> 00:16:05,910
false positives or false negatives so

00:16:03,290 --> 00:16:08,940
this one had me stumped a Twix do we

00:16:05,910 --> 00:16:12,450
abandon ship nope don't believe the

00:16:08,940 --> 00:16:14,550
rumor CSS testing is possible and the

00:16:12,450 --> 00:16:16,110
answer is some tools employee really

00:16:14,550 --> 00:16:19,470
advanced screenshot comparison

00:16:16,110 --> 00:16:21,960
algorithms they look at the page not

00:16:19,470 --> 00:16:23,820
like a pixel-by-pixel thing but they

00:16:21,960 --> 00:16:26,760
look at it as a human would they look

00:16:23,820 --> 00:16:29,040
for the texts they look for the images

00:16:26,760 --> 00:16:30,270
and they find the differences and if

00:16:29,040 --> 00:16:32,820
there are little differences minor

00:16:30,270 --> 00:16:34,920
differences in a certain text thing or

00:16:32,820 --> 00:16:38,850
if something is offset by one pixel

00:16:34,920 --> 00:16:40,410
which happens they ignore it no false

00:16:38,850 --> 00:16:43,110
positives no false negatives there are

00:16:40,410 --> 00:16:44,640
tools like that and all of them it's

00:16:43,110 --> 00:16:47,250
only commercial to us on firstly all of

00:16:44,640 --> 00:16:50,460
them have free analysis plants elephant

00:16:47,250 --> 00:16:53,130
three man I think those comparisons is

00:16:50,460 --> 00:16:54,660
hard remember you need to accept if

00:16:53,130 --> 00:16:56,880
there is a diff you need to accept or

00:16:54,660 --> 00:16:58,620
reject the difference how do you do that

00:16:56,880 --> 00:17:02,100
we have to do that for hundreds of

00:16:58,620 --> 00:17:04,610
comparisons and and the way that we do

00:17:02,100 --> 00:17:07,620
that is we copy the screenshot from the

00:17:04,610 --> 00:17:09,510
actual folder to the expected folder

00:17:07,620 --> 00:17:14,819
doing that for hundreds of screenshots

00:17:09,510 --> 00:17:16,170
is difficult so do we abandon ship there

00:17:14,819 --> 00:17:18,900
are three ways to deal with screenshot

00:17:16,170 --> 00:17:21,209
comparisons one is just accept them all

00:17:18,900 --> 00:17:24,600
this is one one of the tools and cypress

00:17:21,209 --> 00:17:26,220
uses that just yeah this looks good you

00:17:24,600 --> 00:17:29,010
run the test again and it accepts all

00:17:26,220 --> 00:17:31,890
the screenshots another one is as I said

00:17:29,010 --> 00:17:34,670
copying the folders the third one is

00:17:31,890 --> 00:17:37,440
using a commercial tool that has

00:17:34,670 --> 00:17:37,740
dashboards that enable this kind of

00:17:37,440 --> 00:17:40,559
stuff

00:17:37,740 --> 00:17:43,130
of all commercial tools and some OSS

00:17:40,559 --> 00:17:45,540
tools by the way have this dashboard

00:17:43,130 --> 00:17:48,720
elephant number four it's the difficult

00:17:45,540 --> 00:17:51,120
most difficult one testing all those

00:17:48,720 --> 00:17:54,000
responsive wits and browsers functional

00:17:51,120 --> 00:17:58,290
tests you your people you mostly test in

00:17:54,000 --> 00:17:59,850
chrome right but and why it used to be

00:17:58,290 --> 00:18:01,860
that it was wrong but today it's right

00:17:59,850 --> 00:18:04,410
not not because chrome is the most

00:18:01,860 --> 00:18:06,630
modern because functionally all browsers

00:18:04,410 --> 00:18:08,220
are now equivalent mostly equivalent

00:18:06,630 --> 00:18:10,920
unless you're doing crazy stuff but

00:18:08,220 --> 00:18:12,360
visually there are differences not only

00:18:10,920 --> 00:18:14,309
that you're doing responsive weights

00:18:12,360 --> 00:18:16,679
different weights and you have to test

00:18:14,309 --> 00:18:19,110
all of them and manually testing them is

00:18:16,679 --> 00:18:21,559
crazy how do we test all these

00:18:19,110 --> 00:18:23,700
responsive weights do we abandon ship

00:18:21,559 --> 00:18:26,010
nope it's possible and there are three

00:18:23,700 --> 00:18:29,910
solutions one is run the test multiple

00:18:26,010 --> 00:18:32,700
times this is an example you do you use

00:18:29,910 --> 00:18:35,700
you figure out your sizes responsive

00:18:32,700 --> 00:18:38,220
weights and on each one you generate a

00:18:35,700 --> 00:18:40,500
test which sets the viewport to the

00:18:38,220 --> 00:18:42,260
correct size and then just runs it you

00:18:40,500 --> 00:18:44,850
run the test multiple times

00:18:42,260 --> 00:18:47,700
that's very slow so you can try and

00:18:44,850 --> 00:18:50,790
paralyze the test and the last solution

00:18:47,700 --> 00:18:53,429
is let the cloud solve it for you

00:18:50,790 --> 00:18:55,590
instead of taking a screenshot on your

00:18:53,429 --> 00:18:59,940
machine and this is interesting

00:18:55,590 --> 00:19:03,600
you grab the Dom not just the Dom of the

00:18:59,940 --> 00:19:05,670
page the DOM and the CSS and the SVG is

00:19:03,600 --> 00:19:08,100
and the PNG isn't the fonts and or

00:19:05,670 --> 00:19:11,550
whatever upload them to the cloud and

00:19:08,100 --> 00:19:13,830
then the cloud in parallel can generate

00:19:11,550 --> 00:19:16,800
screenshots on all the browsers it has

00:19:13,830 --> 00:19:21,690
for you and generate those screenshots

00:19:16,800 --> 00:19:26,010
for you that's the fourth solution so it

00:19:21,690 --> 00:19:29,250
really is as easy as this this is how a

00:19:26,010 --> 00:19:32,309
visual regression test looks like do the

00:19:29,250 --> 00:19:35,670
stuff and then check to check the

00:19:32,309 --> 00:19:40,730
screenshot but you have to take care of

00:19:35,670 --> 00:19:40,730
the for Elephants let's let's do a demo

00:19:44,200 --> 00:19:51,100
okay may the gods of demo land be with

00:19:48,890 --> 00:19:51,100
me

00:19:52,670 --> 00:19:59,030
this is a test yep

00:19:56,120 --> 00:20:00,580
I visit you know oh I'm testing the

00:19:59,030 --> 00:20:04,040
testing bookstore which we saw earlier

00:20:00,580 --> 00:20:07,160
I'm doing I'm using applitools eyes here

00:20:04,040 --> 00:20:09,020
I'm do opening the test I'm specifying

00:20:07,160 --> 00:20:12,290
which browsers I want to generate

00:20:09,020 --> 00:20:15,170
screenshots on and then I do the type

00:20:12,290 --> 00:20:17,060
something in the in the search bar take

00:20:15,170 --> 00:20:20,480
a screenshot of the whole homepage and

00:20:17,060 --> 00:20:22,400
take a screenshot just of just one book

00:20:20,480 --> 00:20:28,460
in the bookstore just just do a

00:20:22,400 --> 00:20:34,430
component test and that's it I'll open

00:20:28,460 --> 00:20:37,250
the wonderful Cypress by the way I'm

00:20:34,430 --> 00:20:39,350
testing in Cypress but there are testing

00:20:37,250 --> 00:20:43,130
tools and applitools supports all of the

00:20:39,350 --> 00:20:48,650
SDKs that you know and love this is the

00:20:43,130 --> 00:20:51,050
test it's running and it's done but look

00:20:48,650 --> 00:20:54,410
the test is still running why is that

00:20:51,050 --> 00:20:56,210
because it's waiting for all the

00:20:54,410 --> 00:21:00,100
screenshots to be generated in the cloud

00:20:56,210 --> 00:21:00,100
we'll wait a few minutes a few seconds

00:21:00,430 --> 00:21:14,069
demo gods are no this is embarrassing

00:21:10,960 --> 00:21:14,069
[Music]

00:21:19,590 --> 00:21:26,669
oops let's look at the tests we see here

00:21:24,149 --> 00:21:32,669
I'll look in another one we'll see here

00:21:26,669 --> 00:21:35,909
oh it's the Wi-Fi we have a lot of

00:21:32,669 --> 00:21:37,440
screenshots each test has two pages why

00:21:35,909 --> 00:21:39,690
do we have a lot of screenshots here

00:21:37,440 --> 00:21:44,149
because this is running in Chrome ons

00:21:39,690 --> 00:21:46,740
800 and 600 etc etc we also have an IE

00:21:44,149 --> 00:21:49,409
page notice that there's a bug in IE

00:21:46,740 --> 00:21:54,749
we're not seeing the image so this is a

00:21:49,409 --> 00:21:56,580
visual bug in IE and this is a visual

00:21:54,749 --> 00:21:58,999
bug and we're running in Firefox in

00:21:56,580 --> 00:22:02,220
different in various different

00:21:58,999 --> 00:22:08,850
resolutions perfect now let's do a

00:22:02,220 --> 00:22:23,119
change I will change the CSS to make the

00:22:08,850 --> 00:22:23,119
title bold and oops run it

00:22:26,650 --> 00:22:39,580
so now as you can see this is now red

00:22:31,570 --> 00:22:43,120
all over here yep it's probably the wife

00:22:39,580 --> 00:22:44,770
I'm I'll stop I have a sample here this

00:22:43,120 --> 00:22:46,510
is all the test as you can see it's

00:22:44,770 --> 00:22:48,820
unresolved why is it unresolved because

00:22:46,510 --> 00:22:50,980
the the testing tool doesn't know

00:22:48,820 --> 00:22:53,559
whether it's a bug or a feature so let's

00:22:50,980 --> 00:22:56,200
look the component is fine we're good

00:22:53,559 --> 00:22:58,270
but the whole page as you can see

00:22:56,200 --> 00:23:01,690
there's a div here let's show both of

00:22:58,270 --> 00:23:04,360
them sorry and you can see the

00:23:01,690 --> 00:23:06,850
difference here between the two one is

00:23:04,360 --> 00:23:08,830
red and one is white it's the

00:23:06,850 --> 00:23:11,710
interesting thing about some of these

00:23:08,830 --> 00:23:14,380
tools is look I can do this remember we

00:23:11,710 --> 00:23:17,860
were capturing the Dom snapshot before

00:23:14,380 --> 00:23:22,390
so we're using that look what I do

00:23:17,860 --> 00:23:24,490
happens when I press on this what it's

00:23:22,390 --> 00:23:26,770
doing is it's saying hey we captured the

00:23:24,490 --> 00:23:30,790
Dom of the you know the baseline and not

00:23:26,770 --> 00:23:33,160
the baseline right I can do a diff I can

00:23:30,790 --> 00:23:35,530
check what elements were affected by

00:23:33,160 --> 00:23:40,870
this look at the rules that affect them

00:23:35,530 --> 00:23:43,450
and show you the cause of that CSS rule

00:23:40,870 --> 00:23:45,850
so you don't have to guess why something

00:23:43,450 --> 00:23:49,600
has changed the tool will give it to you

00:23:45,850 --> 00:23:55,510
with no problem so there we go that's

00:23:49,600 --> 00:23:58,900
the demo so in summary don't believe the

00:23:55,510 --> 00:24:01,210
rumors writing TSST tests for CSS is

00:23:58,900 --> 00:24:02,830
possible join the backend and the

00:24:01,210 --> 00:24:05,920
JavaScript client if you're a CSS

00:24:02,830 --> 00:24:09,880
developer markup developer you can do

00:24:05,920 --> 00:24:11,860
CSS testing you can cure your CSS echo

00:24:09,880 --> 00:24:13,990
programa phobia it's a hard problem

00:24:11,860 --> 00:24:16,780
because it's a visual one don't worry

00:24:13,990 --> 00:24:20,050
and taking screenshots etc there are

00:24:16,780 --> 00:24:23,410
four elephants it is solvable and don't

00:24:20,050 --> 00:24:27,370
forget the four elephants so I want you

00:24:23,410 --> 00:24:30,940
all you know I love science fiction one

00:24:27,370 --> 00:24:33,700
of the most important books for me is is

00:24:30,940 --> 00:24:35,950
Jun I think in a in a half a year you're

00:24:33,700 --> 00:24:36,790
all gonna see a movie by a denis

00:24:35,950 --> 00:24:39,220
villeneuve

00:24:36,790 --> 00:24:42,760
so I want you understand because we need

00:24:39,220 --> 00:24:48,190
to recite the litany of fear everybody

00:24:42,760 --> 00:24:50,049
stand please come on you can do it yes

00:24:48,190 --> 00:24:53,169
more of you more more more we need to

00:24:50,049 --> 00:24:56,440
recite because all of you people need to

00:24:53,169 --> 00:24:57,490
test and you need to remove your ego

00:24:56,440 --> 00:25:00,390
programa phobia

00:24:57,490 --> 00:25:07,600
so please along with me are you ready I

00:25:00,390 --> 00:25:10,600
must not fear fear is mine killer fear

00:25:07,600 --> 00:25:16,720
is the little death that brings total

00:25:10,600 --> 00:25:20,020
obliteration I will test my CSS I will

00:25:16,720 --> 00:25:23,710
permit to pass over and through me and

00:25:20,020 --> 00:25:27,610
when it has gone past I will turn the

00:25:23,710 --> 00:25:31,630
inner eye to see its path where the fear

00:25:27,610 --> 00:25:37,710
has gone there will be nothing only my

00:25:31,630 --> 00:25:37,710
tests will remain thank you very much

00:25:37,910 --> 00:25:41,089

YouTube URL: https://www.youtube.com/watch?v=3EJaforaVkA


