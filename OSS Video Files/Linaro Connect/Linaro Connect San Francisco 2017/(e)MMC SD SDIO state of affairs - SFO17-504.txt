Title: (e)MMC SD SDIO state of affairs - SFO17-504
Publication date: 2017-10-20
Playlist: Linaro Connect San Francisco 2017
Description: 
	Session ID: SFO17-504
Session Name: (e)MMC/SD/SDIO state of affairs - SFO17-504
Speaker: Ulf Hansson - Linus Walleij
Track: Kernel


★ Session Summary ★
A lot of people may be curious about what is happening on the (e)MMC/SD/SDIO front, let’s gather up and talk to the maintainers and hear out what has been going on and what is happening next.
---------------------------------------------------
★ Resources ★
Event Page: http://connect.linaro.org/resource/sfo17/sfo17-504/
Presentation: https://www.slideshare.net/linaroorg/emmcsdsdio-state-of-affairs-sfo17504
Video: https://www.youtube.com/watch?v=aud4hU23M2M
 ---------------------------------------------------

★ Event Details ★
Linaro Connect San Francisco 2017 (SFO17)
25-29 September 2017
Hyatt Regency San Francisco Airport

---------------------------------------------------
Keyword: 
'http://www.linaro.org'
'http://connect.linaro.org'
---------------------------------------------------
Follow us on Social Media
https://www.facebook.com/LinaroOrg
https://twitter.com/linaroorg
https://www.youtube.com/user/linaroorg?sub_confirmation=1
https://www.linkedin.com/company/1026961
Captions: 
	00:00:00,120 --> 00:00:04,060
[Music]

00:00:08,910 --> 00:00:12,320
[Music]

00:01:51,510 --> 00:01:54,609
[Music]

00:02:02,080 --> 00:02:05,170
[Music]

00:02:12,720 --> 00:02:24,509
[Music]

00:02:36,420 --> 00:02:40,439
[Music]

00:02:38,120 --> 00:02:41,519
there were some other concepts around at

00:02:40,439 --> 00:02:44,250
the time this was in the early

00:02:41,519 --> 00:02:48,409
two-thousands the other concepts were

00:02:44,250 --> 00:02:48,409
known as this con su voz

00:02:50,689 --> 00:03:19,950
already-existing that's a factor so for

00:03:16,530 --> 00:03:22,370
the use case of smart storage smart

00:03:19,950 --> 00:03:25,370
managed storage with a micro controller

00:03:22,370 --> 00:03:25,370
typical

00:03:37,040 --> 00:03:40,130
[Music]

00:04:11,130 --> 00:04:22,290
this was extremely popular to empower

00:04:17,700 --> 00:04:22,290
export fight system

00:04:23,410 --> 00:04:32,180
without royal folks so Quixote's are

00:04:27,140 --> 00:04:40,190
accused in the major portion of the

00:04:32,180 --> 00:04:41,570
world Sun sets for story that was a

00:04:40,190 --> 00:04:44,410
little place in the beginning where they

00:04:41,570 --> 00:04:44,410
were actually using

00:05:07,160 --> 00:05:10,160
we

00:05:22,420 --> 00:05:25,589
[Music]

00:05:30,210 --> 00:05:33,350
[Music]

00:05:40,890 --> 00:05:44,310
[Music]

00:06:11,780 --> 00:06:14,840
[Music]

00:06:20,970 --> 00:06:24,079
[Music]

00:06:44,490 --> 00:06:47,610
[Music]

00:07:14,200 --> 00:07:20,600
[Music]

00:07:23,840 --> 00:07:31,460
they were always always belief system

00:07:36,020 --> 00:07:41,460
the Senate mandates the exact way the

00:07:39,540 --> 00:07:44,370
Fed file system has to be laid out and

00:07:41,460 --> 00:07:47,310
the controller only has to give certain

00:07:44,370 --> 00:07:50,100
guarantees when you use the placed in

00:07:47,310 --> 00:07:53,630
the ways define the standard so if you

00:07:50,100 --> 00:07:59,790
put an XT for file system on SD card

00:07:53,630 --> 00:08:01,440
should still give you back the data but

00:07:59,790 --> 00:08:04,580
they don't make any guarantees regarding

00:08:01,440 --> 00:08:04,580
performance or

00:08:05,540 --> 00:08:08,589
[Music]

00:08:11,030 --> 00:08:14,330
[Music]

00:08:31,400 --> 00:08:39,450
and basically proven that the cheapest

00:08:35,250 --> 00:08:46,560
SD cards die before you fill them up

00:08:39,450 --> 00:08:48,570
with small piles just just the way the

00:08:46,560 --> 00:08:51,770
controller works and you exceed the

00:08:48,570 --> 00:08:54,270
number of writes per sector before

00:08:51,770 --> 00:08:55,800
therefore if you only drive smoke

00:08:54,270 --> 00:08:58,530
instead they're not meant for that in

00:08:55,800 --> 00:09:02,180
this case they're meant for storing

00:08:58,530 --> 00:09:06,210
files was four megabytes at a time so

00:09:02,180 --> 00:09:08,010
degrees JPEGs they're fine for that and

00:09:06,210 --> 00:09:12,120
they're fast enough that they're good

00:09:08,010 --> 00:09:14,390
for videos but the root filesystem on it

00:09:12,120 --> 00:09:18,960
and try to use it try to build a kernel

00:09:14,390 --> 00:09:21,060
is dead there's a better one set where

00:09:18,960 --> 00:09:23,070
like even seas and agencies are supposed

00:09:21,060 --> 00:09:26,550
to be able to deal with this and most of

00:09:23,070 --> 00:09:29,400
them do and the ones that were made

00:09:26,550 --> 00:09:33,360
after 2013 it's all of the actually do

00:09:29,400 --> 00:09:37,170
Jenna or different Chromebook with the

00:09:33,360 --> 00:09:39,620
Samsung processor or a nexus far than

00:09:37,170 --> 00:09:43,910
you will have noticed that

00:09:39,620 --> 00:09:47,210
probably dead yes so there's a bunch of

00:09:43,910 --> 00:09:48,620
interesting stuff in inside these cars

00:09:47,210 --> 00:09:56,089
there's also very nice write-up by a

00:09:48,620 --> 00:10:02,660
body one about discovery mm see cars and

00:09:56,089 --> 00:10:06,100
some how they very interesting fabric in

00:10:02,660 --> 00:10:08,150
some works and so on that's a whole i

00:10:06,100 --> 00:10:12,320
don't wanna we use the term ecosystem

00:10:08,150 --> 00:10:14,029
but there's a whole area of expertise

00:10:12,320 --> 00:10:16,670
and domain-specific knowledge around

00:10:14,029 --> 00:10:17,839
cars that can be gained if you're

00:10:16,670 --> 00:10:19,490
working in this business

00:10:17,839 --> 00:10:20,990
we're just waiting to face into the

00:10:19,490 --> 00:10:22,279
operating system but i think we would

00:10:20,990 --> 00:10:24,350
get into this thing there's more and

00:10:22,279 --> 00:10:33,620
more as to get the basic concepts about

00:10:24,350 --> 00:10:35,990
the subsystem and what's going to go on

00:10:33,620 --> 00:10:38,480
yeah SD card is common for storage and

00:10:35,990 --> 00:10:42,860
then we have the SDI oh those are the

00:10:38,480 --> 00:10:45,770
things you see down here and SDIO was

00:10:42,860 --> 00:10:48,650
introduced in 2001 and this initiative

00:10:45,770 --> 00:10:51,320
was to provide different accessories

00:10:48,650 --> 00:10:54,620
such as wireless gps and camera four PS

00:10:51,320 --> 00:10:57,380
so the least crazy cameras on an SD card

00:10:54,620 --> 00:11:04,910
and wireless SD cards they actually come

00:10:57,380 --> 00:11:07,029
about for things like devices and can be

00:11:04,910 --> 00:11:10,820
very specialized drivers for Windows CE

00:11:07,029 --> 00:11:12,830
so we usually we actually support some

00:11:10,820 --> 00:11:14,240
of money we don't know but the most of

00:11:12,830 --> 00:11:17,779
them don't work because they only have

00:11:14,240 --> 00:11:19,160
drivers for Windows CE and they were

00:11:17,779 --> 00:11:20,990
replacing the same things kind of

00:11:19,160 --> 00:11:25,310
compact flash and PC actually a before

00:11:20,990 --> 00:11:27,830
that indeed indeed so those just used as

00:11:25,310 --> 00:11:28,630
a generic interfaces this stuff is part

00:11:27,830 --> 00:11:30,390
of the specification

00:11:28,630 --> 00:11:34,300
[Music]

00:11:30,390 --> 00:11:37,630
and it can do some interesting things

00:11:34,300 --> 00:11:43,020
for example I got for Nico this GPS

00:11:37,630 --> 00:11:43,020
device that you spoke to your SD card

00:11:46,560 --> 00:11:54,060
tty and I just get the GPS coordinates

00:11:49,300 --> 00:12:02,370
from it is fantastic so there are these

00:11:54,060 --> 00:12:06,010
devices with support for these older

00:12:02,370 --> 00:12:08,470
kind of things but things must since the

00:12:06,010 --> 00:12:10,770
memorial with the wireless this is a big

00:12:08,470 --> 00:12:14,020
area this is where they remove this guy

00:12:10,770 --> 00:12:15,250
it's used in stealing money in

00:12:14,020 --> 00:12:22,839
production high quality of course

00:12:15,250 --> 00:12:25,740
feature calls from prostitutes this just

00:12:22,839 --> 00:12:25,740
one of the popular ones

00:12:26,010 --> 00:12:40,870
so SDIO has been deployed Wireless also

00:12:36,190 --> 00:12:45,040
Bluetooth and GPS but we don't know what

00:12:40,870 --> 00:12:47,140
is the extent there's also there also at

00:12:45,040 --> 00:12:51,000
the same time no brains the i/o as the

00:12:47,140 --> 00:12:56,190
transport a radio at the radio all right

00:12:51,000 --> 00:12:56,190
I'm not surprised you can cook anything

00:12:56,360 --> 00:13:07,220
surprising so that's something that we

00:13:00,380 --> 00:13:08,750
have to support details are lacking and

00:13:07,220 --> 00:13:13,910
upstream drivers are lacking in the

00:13:08,750 --> 00:13:16,940
kernel unfortunately is there a

00:13:13,910 --> 00:13:23,529
substantial reason why given C is mostly

00:13:16,940 --> 00:13:23,529
used for embedded use and well as that I

00:13:25,990 --> 00:13:44,329
think the answer is what s so since they

00:13:42,140 --> 00:13:46,970
are dominant on the desktop market you

00:13:44,329 --> 00:13:53,260
often after the use case for an external

00:13:46,970 --> 00:13:55,790
card is to move for example I don't know

00:13:53,260 --> 00:13:58,880
decreasing it so but it used to be an

00:13:55,790 --> 00:14:08,260
important use case so that it's

00:13:58,880 --> 00:14:08,260
important just works system just works I

00:14:11,199 --> 00:14:15,320
think was just luck it's one of this

00:14:13,699 --> 00:14:17,449
format was where you have to do things

00:14:15,320 --> 00:14:19,490
that almost do the same thing like HD

00:14:17,449 --> 00:14:31,190
DVD and blu-ray and one of the wins and

00:14:19,490 --> 00:14:34,070
you can't know which one I give you a

00:14:31,190 --> 00:14:39,310
little bit of overview of the MSE suck

00:14:34,070 --> 00:14:39,310
and how it's developing this is the

00:14:48,220 --> 00:15:59,560
it says sorry

00:16:00,590 --> 00:16:03,980
so those are the most common ones

00:16:01,700 --> 00:16:07,660
overall the insula still has this one

00:16:03,980 --> 00:16:07,660
low-end and the arm still

00:16:12,530 --> 00:17:03,030
from the Christian in May 2002 with

00:17:01,710 --> 00:17:05,970
Alessandro roubini

00:17:03,030 --> 00:17:11,790
and you all some Quebec and the rest is

00:17:05,970 --> 00:17:17,930
by yourself the you can see that there

00:17:11,790 --> 00:17:21,900
is the pro player here in context of

00:17:17,930 --> 00:17:23,580
request function underneath lose for

00:17:21,900 --> 00:17:26,550
pulling out requests from the rock layer

00:17:23,580 --> 00:17:32,690
using elevate the next request until he

00:17:26,550 --> 00:17:32,690
gets to know the player because

00:17:37,299 --> 00:17:44,630
but yeah it was just like that Deportes

00:17:41,650 --> 00:17:49,000
then requests are dispatched to the

00:17:44,630 --> 00:17:49,000
every host using this infrastructure and

00:17:49,120 --> 00:17:56,710
the the core operations in there in

00:17:52,250 --> 00:17:56,710
these galaxies stacked like set off some

00:17:57,970 --> 00:18:02,210
requests as I wonder if they look

00:18:00,020 --> 00:18:07,360
exactly the same as they do in this

00:18:02,210 --> 00:18:07,360
version so it's been staying

00:18:11,310 --> 00:18:13,850
so

00:18:17,660 --> 00:18:25,610
now there is no feeling after we tell

00:18:20,240 --> 00:18:28,010
you this I'm going on here there is a SD

00:18:25,610 --> 00:18:31,100
card skimming of course recessed

00:18:28,010 --> 00:18:34,220
actively supported energy similar but

00:18:31,100 --> 00:18:37,150
different as the iOS support was tossed

00:18:34,220 --> 00:18:39,650
in with the big house lock around it

00:18:37,150 --> 00:18:43,370
error handling and recovery has been

00:18:39,650 --> 00:18:45,170
posting medical practitioners like rtmp

00:18:43,370 --> 00:18:49,370
and both partitions and complications

00:18:45,170 --> 00:18:53,030
Thank You warden double decorates PDR

00:18:49,370 --> 00:18:58,730
retune reason which are low level

00:18:53,030 --> 00:19:02,120
electric operations to tune the when the

00:18:58,730 --> 00:19:05,540
square waves the bus so they don't but

00:19:02,120 --> 00:19:07,940
they get more and more you know Fourier

00:19:05,540 --> 00:19:10,100
transform does they go higher higher via

00:19:07,940 --> 00:19:11,860
the square waves are more and more soft

00:19:10,100 --> 00:19:15,200
around the edges under the certain point

00:19:11,860 --> 00:19:17,270
you notice today that means that this is

00:19:15,200 --> 00:19:18,890
also temperature you have to retune it

00:19:17,270 --> 00:19:22,610
all the time to keep up with a higher

00:19:18,890 --> 00:19:24,470
data rates that's why M and C protocol

00:19:22,610 --> 00:19:26,780
now contains the retuning mechanics so

00:19:24,470 --> 00:19:28,550
you have to retune the scale of the cost

00:19:26,780 --> 00:19:30,740
of things like that in between different

00:19:28,550 --> 00:19:35,230
requests and this has just been added on

00:19:30,740 --> 00:19:35,230
top so now it's gone pretty complex

00:19:41,820 --> 00:19:45,250
[Music]

00:19:45,480 --> 00:19:50,100
and when I've been looking through it

00:19:48,780 --> 00:19:53,750
because I want to clean up today I'm

00:19:50,100 --> 00:19:53,750
gonna see later I made this super big

00:19:54,140 --> 00:20:00,299
break down the LMC side and I understand

00:19:57,120 --> 00:20:02,429
it I guess intuitive understanding

00:20:00,299 --> 00:20:06,210
having works along with the desire to

00:20:02,429 --> 00:20:09,840
break it down and try to see what is on

00:20:06,210 --> 00:20:12,059
this one on this one tonight after a

00:20:09,840 --> 00:20:15,360
while I just see things like this so

00:20:12,059 --> 00:20:24,900
there are things in the file system that

00:20:15,360 --> 00:20:31,320
are called mmm c dl k 0k 0k m c dl k 3f

00:20:24,900 --> 00:20:33,419
m CP l k 3 0 1 t 1 or EMP what do you

00:20:31,320 --> 00:20:35,760
usually as a user intuitively expect

00:20:33,419 --> 00:20:38,790
from a doc device is that if you take

00:20:35,760 --> 00:20:41,220
this one and 1 c PF k 3 and you make a

00:20:38,790 --> 00:20:42,960
backup would be d you get to copy the

00:20:41,220 --> 00:20:45,570
whole book twice that's true for artists

00:20:42,960 --> 00:20:48,270
harddrive use PC whatever it's not true

00:20:45,570 --> 00:20:49,890
for MMC card with both sectors the good

00:20:48,270 --> 00:20:53,990
sectors will not be backed up why

00:20:49,890 --> 00:20:58,380
because these two boots partitions or

00:20:53,990 --> 00:21:00,840
they are the wrong book devices and

00:20:58,380 --> 00:21:03,059
that's how it was integrated in the DRC

00:21:00,840 --> 00:21:04,980
stack these instead of creating this as

00:21:03,059 --> 00:21:07,770
partitions which they are they were

00:21:04,980 --> 00:21:09,870
created a smoke devices and that's

00:21:07,770 --> 00:21:14,280
actually a substantial design mistake

00:21:09,870 --> 00:21:18,780
because that breaks the user's device

00:21:14,280 --> 00:21:20,280
actually works the problem they were

00:21:18,780 --> 00:21:21,929
trying to overcome of course they needed

00:21:20,280 --> 00:21:24,840
for reason the problem they try to

00:21:21,929 --> 00:21:28,470
overcome was that Linux partitions

00:21:24,840 --> 00:21:32,490
they are only logically they know

00:21:28,470 --> 00:21:34,740
to M plus M but I have these sectors and

00:21:32,490 --> 00:21:36,659
this is where my partition is but the

00:21:34,740 --> 00:21:39,360
MRC partitions weren't like that they

00:21:36,659 --> 00:21:41,010
over Hardware partitions so you special

00:21:39,360 --> 00:21:45,480
come on to switch and then you get a

00:21:41,010 --> 00:21:49,980
dressing from 0 to M and 0 to M so every

00:21:45,480 --> 00:21:53,179
every had its own array that started at

00:21:49,980 --> 00:21:55,559
0 instead of being part of a big array

00:21:53,179 --> 00:22:06,000
and then it was of course convenient to

00:21:55,559 --> 00:22:09,990
just make it a new device fixes it also

00:22:06,000 --> 00:22:12,809
earn RP and B is weird because of the

00:22:09,990 --> 00:22:15,330
512 bytes that you normally write you

00:22:12,809 --> 00:22:17,640
only get 256 bytes of yours and the rest

00:22:15,330 --> 00:22:20,370
of it is patches and Max and break count

00:22:17,640 --> 00:22:22,620
yeah so it's all it's like you can't

00:22:20,370 --> 00:22:25,830
write the correct fight-fight kidding

00:22:22,620 --> 00:22:27,210
yeah I think stuff this this is not

00:22:25,830 --> 00:22:28,559
device I would basically character

00:22:27,210 --> 00:22:32,190
device because it was the biggest to

00:22:28,559 --> 00:22:34,110
design mistake it can only handle I who

00:22:32,190 --> 00:22:35,669
controls you can't see from it the baby

00:22:34,110 --> 00:22:38,190
to is trying it will not work with this

00:22:35,669 --> 00:22:49,230
thing so it was never possible to open

00:22:38,190 --> 00:22:52,230
that device and read some yeah it always

00:22:49,230 --> 00:22:54,050
think so I realized I could just replace

00:22:52,230 --> 00:22:56,130
it with a character device or

00:22:54,050 --> 00:22:58,500
unfortunately their support unit I have

00:22:56,130 --> 00:23:00,210
to find because Intel company if you

00:22:58,500 --> 00:23:02,370
remove the modular design in practice

00:23:00,210 --> 00:23:04,830
but we exist in the r6 I'm pretty sure

00:23:02,370 --> 00:23:07,080
we can finally get rid of that's

00:23:04,830 --> 00:23:09,300
craziness so that is fixed but I have to

00:23:07,080 --> 00:23:11,370
also fix this boat partitions and so

00:23:09,300 --> 00:23:45,420
canary partitions generic partition C

00:23:11,370 --> 00:23:48,000
square my idea my sectors and then when

00:23:45,420 --> 00:23:50,610
operation comes in the transparency

00:23:48,000 --> 00:23:52,500
switch we do come on to the partition

00:23:50,610 --> 00:23:54,030
and region right over there instead we

00:23:52,500 --> 00:23:58,260
present it as some high sector number

00:23:54,030 --> 00:24:01,260
and there might be problems with us and

00:23:58,260 --> 00:24:03,870
there might be because I haven't tried

00:24:01,260 --> 00:24:07,970
the approach so maybe I would have to

00:24:03,870 --> 00:24:11,880
extend into the the damaged partitioning

00:24:07,970 --> 00:24:20,640
code possibility to actually have

00:24:11,880 --> 00:24:22,980
several petitioners begin zero but that

00:24:20,640 --> 00:24:25,200
is that's it's very intimidating which

00:24:22,980 --> 00:24:28,800
is used everywhere so I don't know if

00:24:25,200 --> 00:24:31,950
that approach is really desirable it's

00:24:28,800 --> 00:24:33,750
the petitioners here also closer to the

00:24:31,950 --> 00:24:36,050
MTD partitions but they are not using

00:24:33,750 --> 00:24:36,050
the liners

00:24:36,660 --> 00:25:05,410
they have their own so if you change

00:24:59,050 --> 00:25:13,530
this whatever way you choose one thing

00:25:05,410 --> 00:25:15,910
this stuff your wait wait

00:25:13,530 --> 00:25:19,330
[Music]

00:25:15,910 --> 00:25:28,990
they are they are just devices like any

00:25:19,330 --> 00:25:33,490
other devices and so on they just need

00:25:28,990 --> 00:25:43,590
to and we still have to fill in the

00:25:33,490 --> 00:25:46,960
partition sector end to end but the user

00:25:43,590 --> 00:25:49,300
land as far as I know they only assume

00:25:46,960 --> 00:25:52,540
they can open up device and read sectors

00:25:49,300 --> 00:25:58,030
or mount it as a file system they don't

00:25:52,540 --> 00:25:59,920
really care sector numbers and they only

00:25:58,030 --> 00:26:02,650
care that they can open for example

00:25:59,920 --> 00:26:05,500
Tennessee we all take we both zero three

00:26:02,650 --> 00:26:07,240
sectors here no one etc that works the

00:26:05,500 --> 00:26:13,770
same way is just transparent if I hope

00:26:07,240 --> 00:26:13,770
right so it should work but of course I

00:26:14,940 --> 00:26:21,429
mean so this can't be done I'm just not

00:26:17,860 --> 00:26:24,520
sure if it helps more than the potential

00:26:21,429 --> 00:26:28,929
danger of threatening some user because

00:26:24,520 --> 00:26:31,330
we we can always have fixed device notes

00:26:28,929 --> 00:26:34,960
in the file system like usually we

00:26:31,330 --> 00:26:38,770
create them through you death or the

00:26:34,960 --> 00:26:40,330
tempest but if you don't have to if you

00:26:38,770 --> 00:26:45,880
create your own device note that your

00:26:40,330 --> 00:26:48,399
own car loan you would then get a

00:26:45,880 --> 00:26:51,059
different minor number for the position

00:26:48,399 --> 00:26:51,059
if I understand this right

00:26:58,630 --> 00:27:52,670
because someone would create a file

00:27:48,350 --> 00:27:58,330
system on the rock device officials yeah

00:27:52,670 --> 00:27:58,330
and you don't get the expected behavior

00:27:58,990 --> 00:28:02,960
like if you don't use the normal

00:28:01,160 --> 00:28:06,470
partitioning and you have a good package

00:28:02,960 --> 00:28:08,150
that can be using the boot partition you

00:28:06,470 --> 00:28:14,000
might be authorized to do partitioned

00:28:08,150 --> 00:28:16,640
data while using the file system so

00:28:14,000 --> 00:28:20,560
there's a number of risks probably most

00:28:16,640 --> 00:28:24,400
of those risks are unlikely to happen

00:28:20,560 --> 00:28:24,400
but also the benefit of

00:28:28,730 --> 00:28:31,890
[Music]

00:28:36,140 --> 00:28:39,239
[Music]

00:28:39,999 --> 00:28:49,970
it's more intuitive as well but it's

00:28:42,649 --> 00:28:52,119
related to this the big yellow is taken

00:28:49,970 --> 00:29:20,239
[Music]

00:28:52,119 --> 00:29:31,669
when you on the and this this book is

00:29:20,239 --> 00:29:35,590
about this more because before we

00:29:31,669 --> 00:29:35,590
continue most likely an article

00:29:48,170 --> 00:29:52,819
[Music]

00:30:30,260 --> 00:30:36,750
so since it's actually the same device

00:30:33,630 --> 00:30:38,460
and since none of these threats can by

00:30:36,750 --> 00:30:40,830
definition are wrong simultaneously

00:30:38,460 --> 00:30:46,980
since yeah that's the only one physical

00:30:40,830 --> 00:30:50,670
device it's yes

00:30:46,980 --> 00:30:55,380
one of risks or appending those

00:30:50,670 --> 00:30:58,320
partitions you CMHC with SD card adapter

00:30:55,380 --> 00:31:03,150
and the back after you do this without

00:30:58,320 --> 00:31:07,170
the boot partitions without the and then

00:31:03,150 --> 00:31:10,080
here the size of MMC yogi something is

00:31:07,170 --> 00:31:13,680
the same size also the card if you use

00:31:10,080 --> 00:31:16,770
the adapter so if you change this it may

00:31:13,680 --> 00:31:20,550
turn out that images that are taken from

00:31:16,770 --> 00:31:24,110
here as a backup will be bigger than the

00:31:20,550 --> 00:31:28,020
size of the character trying to write

00:31:24,110 --> 00:31:29,900
well that's one of the reasons of you

00:31:28,020 --> 00:31:33,540
yeah

00:31:29,900 --> 00:31:36,780
so some screen might fail because the

00:31:33,540 --> 00:31:37,480
size doesn't matter so how big is the

00:31:36,780 --> 00:31:39,730
world

00:31:37,480 --> 00:31:43,390
relational people who use emmc a

00:31:39,730 --> 00:31:47,620
doctor's companion small PDA chips into

00:31:43,390 --> 00:31:50,520
their communities only but not not

00:31:47,620 --> 00:31:54,160
cheeks but their pores we have a MMC

00:31:50,520 --> 00:32:19,510
disconnect angle and we just disconnect

00:31:54,160 --> 00:32:22,150
that from the border because by equal

00:32:19,510 --> 00:32:36,730
those adapters does not present the

00:32:22,150 --> 00:32:40,030
partition complex approach to make the

00:32:36,730 --> 00:32:42,010
partition assistant aware of physical

00:32:40,030 --> 00:32:45,309
partitions so that you can still have

00:32:42,010 --> 00:32:50,580
them us MIT or just somehow consider

00:32:45,309 --> 00:32:50,580
this case now will you just

00:32:54,400 --> 00:32:57,489
[Music]

00:32:58,320 --> 00:33:02,850
something you often find like there's a

00:33:00,990 --> 00:33:06,510
simple and elegant solution to a problem

00:33:02,850 --> 00:33:11,790
and we have to say let's not do that

00:33:06,510 --> 00:33:13,560
let's do the complicated so what if you

00:33:11,790 --> 00:33:15,510
already support nested partition tables

00:33:13,560 --> 00:33:17,580
so that would help that you just

00:33:15,510 --> 00:33:20,850
register one partition table with a

00:33:17,580 --> 00:33:22,860
certain name schema and then you happen

00:33:20,850 --> 00:33:27,750
to have another partition table in the

00:33:22,860 --> 00:33:31,590
main partition yeah I don't know we

00:33:27,750 --> 00:33:33,990
Sakura we have to fix that too yes that

00:33:31,590 --> 00:33:35,610
might be a doctor change yeah that's it

00:33:33,990 --> 00:33:39,510
I don't know how hard it could be

00:33:35,610 --> 00:33:41,940
because yeah for each of those

00:33:39,510 --> 00:33:47,060
partitions that we want to like inject

00:33:41,940 --> 00:33:50,700
into the Linux partition table like the

00:33:47,060 --> 00:33:52,890
the per device partition table we need

00:33:50,700 --> 00:33:57,810
we will need to do something like that

00:33:52,890 --> 00:34:01,110
yes we have to have each boots party

00:33:57,810 --> 00:34:04,700
boot partition can contain a partition

00:34:01,110 --> 00:34:04,700
so it will be nested

00:34:05,870 --> 00:34:08,620
all right

00:34:08,710 --> 00:34:12,170
[Music]

00:34:14,719 --> 00:34:17,849
[Music]

00:34:25,300 --> 00:34:28,409
[Music]

00:34:39,909 --> 00:34:43,309
[Music]

00:35:00,190 --> 00:35:05,169
[Music]

00:35:25,210 --> 00:35:33,349
and we can change that code without

00:35:27,410 --> 00:35:42,440
having to worry about breaking it it

00:35:33,349 --> 00:35:44,770
might be positive so this this process

00:35:42,440 --> 00:35:50,000
context the finger

00:35:44,770 --> 00:35:53,630
[Music]

00:35:50,000 --> 00:35:57,740
places in them mmm CSD SDIO style so the

00:35:53,630 --> 00:36:00,020
idea is to reserve this house so take

00:35:57,740 --> 00:36:02,360
the host that's a lock music stops knock

00:36:00,020 --> 00:36:04,150
so that's the different accesses to the

00:36:02,360 --> 00:36:08,240
house to not collide with each other and

00:36:04,150 --> 00:36:10,580
I think describe this look really works

00:36:08,240 --> 00:36:15,290
and what it does because I'm just

00:36:10,580 --> 00:36:18,440
noticing this yeah so told most about

00:36:15,290 --> 00:36:22,570
there's nobody but yeah so we need an

00:36:18,440 --> 00:36:24,710
exclusive access to the house for most

00:36:22,570 --> 00:36:30,560
legacy recent matter because of this

00:36:24,710 --> 00:36:34,430
audition so I don't know really that the

00:36:30,560 --> 00:36:38,990
longest would not this but it's that

00:36:34,430 --> 00:36:44,510
part is taken care by using wait cues in

00:36:38,990 --> 00:36:50,090
speed locks but we also once back we

00:36:44,510 --> 00:36:55,520
needed to support nested lock so that is

00:36:50,090 --> 00:36:59,630
more like for my poor design banana and

00:36:55,520 --> 00:37:03,890
on top of that we have a team sport

00:36:59,630 --> 00:37:07,690
you'll see that we are in gender so it

00:37:03,890 --> 00:37:22,220
was just a way of using the existing

00:37:07,690 --> 00:37:25,460
infrastructure the actual role host

00:37:22,220 --> 00:37:27,610
where the dmt device just renamed the

00:37:25,460 --> 00:37:27,610
house

00:37:29,780 --> 00:37:34,230
coastal controller okay so this is

00:37:32,490 --> 00:37:35,970
talking to the controller talks to the

00:37:34,230 --> 00:37:40,050
uncie so that's where they're calling

00:37:35,970 --> 00:37:49,380
the host you see then you still talking

00:37:40,050 --> 00:37:51,030
here all right yes so this hope is

00:37:49,380 --> 00:37:55,140
something you want to minimize the usage

00:37:51,030 --> 00:38:09,420
of I removed a bunch of users what I did

00:37:55,140 --> 00:38:13,140
was I I first removed a bunch of them

00:38:09,420 --> 00:38:14,820
because there were there were il patrols

00:38:13,140 --> 00:38:17,910
coming in on the i/o controls also took

00:38:14,820 --> 00:38:19,859
took the big toe stop so we've managed

00:38:17,910 --> 00:38:23,010
to get rid of that with the approach

00:38:19,859 --> 00:38:26,700
recommended by on which is to create

00:38:23,010 --> 00:38:37,619
custom block device operations and those

00:38:26,700 --> 00:38:40,070
operations are specific operation and

00:38:37,619 --> 00:38:42,600
takes care of it so we converted it from

00:38:40,070 --> 00:38:44,840
i/o control spoking directly to the

00:38:42,600 --> 00:38:44,840
device

00:38:48,120 --> 00:38:51,780
any other requests and that were to

00:38:50,190 --> 00:38:52,650
really find out words nicely to scale

00:38:51,780 --> 00:38:54,900
moving and so on

00:38:52,650 --> 00:38:59,810
that was the low-hanging fruit quite

00:38:54,900 --> 00:38:59,810
direct and I think the last part of that

00:39:00,890 --> 00:39:06,200
people get a success for example three

00:39:04,250 --> 00:39:08,670
data from the court about the

00:39:06,200 --> 00:39:10,560
manufacturer and so on using one of

00:39:08,670 --> 00:39:12,690
these special requests so that forty

00:39:10,560 --> 00:39:20,790
seven users of the doctor before or

00:39:12,690 --> 00:39:31,980
after that this is after like over ten I

00:39:20,790 --> 00:39:33,750
think this so little magnets and it's

00:39:31,980 --> 00:39:37,710
over it really make things good because

00:39:33,750 --> 00:39:39,780
in software if you did de from the

00:39:37,710 --> 00:39:41,430
device you want to make it back up and

00:39:39,780 --> 00:39:49,620
at the same time read out the

00:39:41,430 --> 00:39:52,200
manufacturer ID but now it will be

00:39:49,620 --> 00:39:54,150
insert into the request q1 privatized W

00:39:52,200 --> 00:40:00,050
get off the manufacturer idea pilot this

00:39:54,150 --> 00:40:00,050
DD operation is going away that's nice

00:40:08,190 --> 00:40:11,400
[Music]

00:41:07,760 --> 00:41:15,150
being able to proceed with proceed list

00:41:11,400 --> 00:41:18,030
with multitude because multi Q is

00:41:15,150 --> 00:41:20,520
something that is taking over what all

00:41:18,030 --> 00:41:22,200
the block consumers in the car all the

00:41:20,520 --> 00:41:24,240
dog drivers that interface to the book

00:41:22,200 --> 00:41:27,420
layer are supposed to migrate from the

00:41:24,240 --> 00:41:30,020
old top layer which is which used to be

00:41:27,420 --> 00:41:30,020
called the elevator

00:41:30,080 --> 00:41:35,000
everybody knows ways for the other or

00:41:35,869 --> 00:41:40,490
so it was called the elevator algorithm

00:41:37,730 --> 00:41:44,300
this scheduling mechanism in the kernel

00:41:40,490 --> 00:41:46,369
and the pro player that that thing they

00:41:44,300 --> 00:41:48,770
are migrating now to multi cue there are

00:41:46,369 --> 00:41:50,960
good writer from WM and so on about

00:41:48,770 --> 00:41:53,990
mastic you is this is the helicopter

00:41:50,960 --> 00:41:56,570
view crash course in 30 seconds instead

00:41:53,990 --> 00:41:58,010
of having this is a problem instead of

00:41:56,570 --> 00:42:00,440
having all the processes on the system

00:41:58,010 --> 00:42:02,839
going into one funnel and after one

00:42:00,440 --> 00:42:04,910
device where you execute one block

00:42:02,839 --> 00:42:06,859
request at the time there is something

00:42:04,910 --> 00:42:09,380
like a funnel with the three pipes in

00:42:06,859 --> 00:42:12,410
the end so you can stop the request into

00:42:09,380 --> 00:42:15,310
this different point and exist the

00:42:12,410 --> 00:42:17,690
different block layer scheduling on this

00:42:15,310 --> 00:42:21,770
particular thing so for these three

00:42:17,690 --> 00:42:24,560
fights very spirit of the scheduling

00:42:21,770 --> 00:42:26,300
algorithm for kuiper that tries to stop

00:42:24,560 --> 00:42:30,740
them with equal amount of requests all

00:42:26,300 --> 00:42:33,830
the time and we have for this case and

00:42:30,740 --> 00:42:36,320
hopefully also for the future also

00:42:33,830 --> 00:42:43,099
merged our scheduler dfq in through

00:42:36,320 --> 00:42:51,790
thank you and do later securities there

00:42:43,099 --> 00:42:51,790
is nothing and there is a scheduler just

00:43:05,600 --> 00:43:08,639
[Music]

00:43:17,170 --> 00:43:20,239
[Music]

00:43:21,750 --> 00:43:27,610
but this this new layer it also comes

00:43:25,900 --> 00:43:30,970
with a bunch of new code of a

00:43:27,610 --> 00:43:33,340
refactoring and unfortunately the

00:43:30,970 --> 00:43:34,900
popular developers didn't take the

00:43:33,340 --> 00:43:37,450
approach of converting over first

00:43:34,900 --> 00:43:39,580
holding code users and the switching is

00:43:37,450 --> 00:43:41,410
that they create a new thing on the site

00:43:39,580 --> 00:43:44,350
I started to switch over drivers on that

00:43:41,410 --> 00:43:46,360
case basis to the multi cue first it was

00:43:44,350 --> 00:43:50,560
of course they inherently might be cube

00:43:46,360 --> 00:43:52,540
devices like nvme and they also

00:43:50,560 --> 00:43:54,430
implemented it for scarcely for devices

00:43:52,540 --> 00:43:55,660
casa devices to tell multiple cues that

00:43:54,430 --> 00:44:00,370
have some certain extensions you can

00:43:55,660 --> 00:44:02,710
access them and then actually they

00:44:00,370 --> 00:44:05,620
switched over some devices that were not

00:44:02,710 --> 00:44:08,350
naughty keyword or by QV address to use

00:44:05,620 --> 00:44:10,930
multi cue just because they want to go

00:44:08,350 --> 00:44:14,790
in that direction and multi cue is not

00:44:10,930 --> 00:44:18,780
just multi cue it also is a number of

00:44:14,790 --> 00:44:20,890
alligator helpers they have a case tax

00:44:18,780 --> 00:44:27,760
and take care of that for you they

00:44:20,890 --> 00:44:29,680
lifecycle tax and the per request data

00:44:27,760 --> 00:44:31,690
is managed by the top layer in the multi

00:44:29,680 --> 00:44:33,420
cue case where is something you have to

00:44:31,690 --> 00:44:36,280
take care of in your device driver and

00:44:33,420 --> 00:44:39,310
it's the kind same kind of substantive

00:44:36,280 --> 00:44:41,820
rewrite of the book the IRS DRM is of

00:44:39,310 --> 00:44:41,820
the old frame

00:44:50,009 --> 00:45:02,069
so we should

00:45:05,960 --> 00:45:17,229
[Music]

00:45:44,800 --> 00:45:48,019
[Music]

00:45:50,440 --> 00:45:58,139
[Music]

00:46:03,420 --> 00:46:13,119
[Music]

00:46:16,640 --> 00:46:22,590
[Music]

00:46:27,260 --> 00:46:34,359
[Music]

00:46:37,790 --> 00:46:40,849
[Music]

00:46:56,610 --> 00:46:59,689
[Music]

00:46:59,810 --> 00:47:05,180
same same layout same Keys Arabic so we

00:47:03,410 --> 00:47:07,010
must betray the subsystem book since

00:47:05,180 --> 00:47:09,020
this so no matter what storage device

00:47:07,010 --> 00:47:12,860
you have your excessive in the same way

00:47:09,020 --> 00:47:14,990
and you can create your PGI the

00:47:12,860 --> 00:47:17,120
company's public infrastructure we just

00:47:14,990 --> 00:47:19,840
never get that so this is one of the

00:47:17,120 --> 00:47:19,840
things that could help

00:47:22,250 --> 00:47:25,389
[Music]

00:47:28,060 --> 00:47:32,360
[Music]

00:47:53,370 --> 00:47:56,460
[Music]

00:48:04,030 --> 00:48:10,760
[Music]

00:48:16,940 --> 00:48:20,050
[Music]

00:48:33,610 --> 00:48:47,400
[Music]

00:48:39,170 --> 00:48:49,559
being able to use this yeah so we move

00:48:47,400 --> 00:48:51,299
the both petitioners the generic

00:48:49,559 --> 00:48:58,580
petitioners should be become clear

00:48:51,299 --> 00:49:03,989
expectations in some way inspector yeah

00:48:58,580 --> 00:49:03,989
[Music]

00:49:19,380 --> 00:49:22,469
[Music]

00:49:28,880 --> 00:49:32,030
[Music]

00:49:37,550 --> 00:49:45,719
[Music]

00:49:48,260 --> 00:49:55,959
[Music]

00:50:15,400 --> 00:50:27,010
and then I realize this software

00:50:19,600 --> 00:50:31,540
buffering mechanism the that was about

00:50:27,010 --> 00:50:34,140
having longer commands that we sent out

00:50:31,540 --> 00:50:34,140
to the device

00:50:37,380 --> 00:50:46,710
exactly the same us we would never get

00:50:41,860 --> 00:50:50,590
like we we do 16 4k iOS we would never

00:50:46,710 --> 00:50:57,940
consolidate them into 64 564 feet of

00:50:50,590 --> 00:51:01,210
pipes no that's too much they work for

00:50:57,940 --> 00:51:03,220
for the database something now something

00:51:01,210 --> 00:51:05,170
to the card so that you would get the

00:51:03,220 --> 00:51:11,700
Big Bopper to send out several small

00:51:05,170 --> 00:51:14,560
months that's why he kept together

00:51:11,700 --> 00:51:17,470
software implementation does the same

00:51:14,560 --> 00:51:19,720
thing so and the sum of the whole cell

00:51:17,470 --> 00:51:24,610
phone is switched to using us but this

00:51:19,720 --> 00:51:29,250
book was given up for just deleted

00:51:24,610 --> 00:51:29,250
if you miss it on tumblr but I think

00:51:31,440 --> 00:51:36,490
mutation so that the actual market we

00:51:34,990 --> 00:51:42,820
end up doing on the device and stop

00:51:36,490 --> 00:51:44,520
being Dodger using natural gossip like

00:51:42,820 --> 00:51:47,940
that but that's just because it gets

00:51:44,520 --> 00:51:50,920
larger it comes to Sun in the c'mon but

00:51:47,940 --> 00:51:52,270
just by copying to buffer that is my

00:51:50,920 --> 00:51:54,430
name so that it can not be

00:51:52,270 --> 00:51:56,860
come on of it and that's something of

00:51:54,430 --> 00:51:58,690
the Pops buffering the scatter gallic

00:51:56,860 --> 00:52:01,300
already does but the skeleton code

00:51:58,690 --> 00:52:04,120
wouldn't use it would use the bounce

00:52:01,300 --> 00:52:11,380
pathway all the data is below the you

00:52:04,120 --> 00:52:14,490
may mask so they the one covering that

00:52:11,380 --> 00:53:15,869
we had in the MMC code the point

00:52:14,490 --> 00:53:18,150
we also do the yes in the then yeah we

00:53:15,869 --> 00:53:20,430
might delete you a mode support I don't

00:53:18,150 --> 00:53:23,609
already know about that then we need to

00:53:20,430 --> 00:53:25,650
click the MMC and SD book access and

00:53:23,609 --> 00:53:27,780
SDIO host accessing to through words

00:53:25,650 --> 00:53:29,910
because that we can get rid of this big

00:53:27,780 --> 00:53:32,160
load now we just have music star either

00:53:29,910 --> 00:53:34,109
you are jocular block device for your an

00:53:32,160 --> 00:53:36,510
SDI you device not both at the same time

00:53:34,109 --> 00:53:38,340
one big reason that we have to get rid

00:53:36,510 --> 00:53:42,420
of this lock is because we got happy

00:53:38,340 --> 00:53:45,570
both SDIO one Wi-Fi for soft now oh man

00:53:42,420 --> 00:53:47,730
storage and Wi-Fi and then you have to

00:53:45,570 --> 00:53:53,130
switch between these two two interfaces

00:53:47,730 --> 00:53:54,120
being as being and it sounds it seems

00:53:53,130 --> 00:53:56,070
like nobody's used

00:53:54,120 --> 00:53:57,660
I have to make it closer starting to see

00:53:56,070 --> 00:53:59,280
if somebody's actually using input it

00:53:57,660 --> 00:55:06,810
seems like not now if you can just make

00:53:59,280 --> 00:55:12,800
a distinction you you are either come on

00:55:06,810 --> 00:55:18,330
cueing and this is method for creating

00:55:12,800 --> 00:55:20,520
MMC s because do not have multi cue they

00:55:18,330 --> 00:55:21,660
consume it for the job in multiple cue

00:55:20,520 --> 00:55:23,160
so what do they do instead

00:55:21,660 --> 00:55:25,260
yes they do the second best into

00:55:23,160 --> 00:55:26,850
pipeline so they try to start at the

00:55:25,260 --> 00:55:29,840
number of amounts off to each other and

00:55:26,850 --> 00:55:29,840
stand on the line

00:55:30,210 --> 00:55:34,630
[Music]

00:55:53,560 --> 00:56:03,220
because this is

00:56:18,090 --> 00:56:25,750
[Music]

00:56:29,130 --> 00:56:32,439
[Music]

00:56:37,200 --> 00:56:40,290
[Music]

00:56:53,000 --> 00:56:56,099
[Music]

00:56:58,410 --> 00:57:03,570
yeah copy blue you do speak around

00:57:00,420 --> 00:57:06,890
without children how long and how we are

00:57:03,570 --> 00:57:06,890
going to do the sweets

00:57:08,540 --> 00:57:16,160
anyways yeah so that's everything that's

00:57:12,240 --> 00:57:16,160
going on in the EMS DST you can find

00:57:16,720 --> 00:57:19,850
[Music]

00:57:25,880 --> 00:57:31,079

YouTube URL: https://www.youtube.com/watch?v=aud4hU23M2M


