Title: How Red Hat ran a Global OpenVPN offer during the COVID-19 Pandemic with 99% Open Source Software
Publication date: 2020-12-10
Playlist: All Things Open 2020 - Linux Infrastructure Track
Description: 
	Presented by: Mauricio Teixeira, Red Hat
Presented at All Things Open 2020 - Linux/Infrastructure Track

Abstract: Red Hat has been running a global OpenVPN infrastructure for their associates for years, which have been put under the microscope during the COVID-19 pandemic, and has been put under a lot of stress. Everything ran smoothly, without outages, without snags, with an average of 60% of company associates connected simultaneously during peak times. During this talk, we will demonstrate how the infrastructure has been configured, and all of the Open Source (and proprietary) technologies that were involved.
Captions: 
	00:00:05,920 --> 00:00:11,200
thanks everyone for being here

00:00:07,919 --> 00:00:13,599
um before we start

00:00:11,200 --> 00:00:14,639
uh just let me say thank you very much

00:00:13,599 --> 00:00:18,000
for

00:00:14,639 --> 00:00:20,160
your time for being here and i'm very

00:00:18,000 --> 00:00:22,800
fat there that you are here

00:00:20,160 --> 00:00:23,920
uh my name is mauricio dixera i work for

00:00:22,800 --> 00:00:27,599
red hat

00:00:23,920 --> 00:00:31,039
i've been a redhead for about 14

00:00:27,599 --> 00:00:31,920
years and i have god knows how many

00:00:31,039 --> 00:00:35,840
years of

00:00:31,920 --> 00:00:38,879
working with computers in general

00:00:35,840 --> 00:00:42,079
uh i'll just

00:00:38,879 --> 00:00:44,719
go over the presentation um and have the

00:00:42,079 --> 00:00:47,120
questions at the end of the presentation

00:00:44,719 --> 00:00:48,399
uh so you can go ahead and you can write

00:00:47,120 --> 00:00:51,280
your questions on the chat

00:00:48,399 --> 00:00:52,079
or on the q a feature and i'll take a

00:00:51,280 --> 00:00:55,840
look after

00:00:52,079 --> 00:00:59,120
by the end um

00:00:55,840 --> 00:01:00,640
sorry so this is what we're going to

00:00:59,120 --> 00:01:04,080
talk about today uh

00:01:00,640 --> 00:01:04,799
sorry just one note uh i have been

00:01:04,080 --> 00:01:08,560
asking why

00:01:04,799 --> 00:01:12,080
i wrote how red hat ran

00:01:08,560 --> 00:01:12,799
a global open vpn solution in this in

00:01:12,080 --> 00:01:15,600
the

00:01:12,799 --> 00:01:16,000
uh presentation but uh it is because

00:01:15,600 --> 00:01:17,840
when i

00:01:16,000 --> 00:01:19,119
actually wrote it started talking about

00:01:17,840 --> 00:01:21,920
the presentation i thought that

00:01:19,119 --> 00:01:23,920
by this time we would be over the the

00:01:21,920 --> 00:01:26,159
pandemic and we're not

00:01:23,920 --> 00:01:26,960
so that's why i rename it and it's not

00:01:26,159 --> 00:01:30,240
rain anymore

00:01:26,960 --> 00:01:32,640
it's still the way we are still running

00:01:30,240 --> 00:01:34,400
so this is what i'm going to talk today

00:01:32,640 --> 00:01:37,200
uh i'm going to give a little bit of

00:01:34,400 --> 00:01:38,960
uh who am i and talk about what red hat

00:01:37,200 --> 00:01:41,759
i.t infrastructure does

00:01:38,960 --> 00:01:43,280
how we uh have our corporate vpn

00:01:41,759 --> 00:01:46,320
solution how we present that

00:01:43,280 --> 00:01:48,159
how do we support it and then we

00:01:46,320 --> 00:01:50,240
we're going to go over the actual thing

00:01:48,159 --> 00:01:53,119
that how did we prepare

00:01:50,240 --> 00:01:53,680
for the kobe pandemic and what we're

00:01:53,119 --> 00:01:56,719
gonna do

00:01:53,680 --> 00:01:59,920
in the future after all of this

00:01:56,719 --> 00:02:00,399
so why should you listen to me like i

00:01:59,920 --> 00:02:02,640
said

00:02:00,399 --> 00:02:03,600
um i have many years in itune

00:02:02,640 --> 00:02:06,880
infrastructure

00:02:03,600 --> 00:02:09,280
in 13 14 years of redhead uh

00:02:06,880 --> 00:02:10,800
right now i'm working at the team that

00:02:09,280 --> 00:02:13,840
is called

00:02:10,800 --> 00:02:16,400
unified infrastructure and operations

00:02:13,840 --> 00:02:17,120
and i'm one of the technical leads and

00:02:16,400 --> 00:02:20,160
one of the

00:02:17,120 --> 00:02:22,000
next gen data center architects and

00:02:20,160 --> 00:02:23,680
i manage a lot of different services

00:02:22,000 --> 00:02:25,920
inside vpn the main

00:02:23,680 --> 00:02:29,200
products that i actually manage are the

00:02:25,920 --> 00:02:31,840
open vpn and dns solutions

00:02:29,200 --> 00:02:33,360
but i'm also a subject matter expert for

00:02:31,840 --> 00:02:34,720
a lot of other things

00:02:33,360 --> 00:02:36,560
those are only the things that i

00:02:34,720 --> 00:02:37,040
actually touch in the sense that i

00:02:36,560 --> 00:02:40,640
actually

00:02:37,040 --> 00:02:42,640
do some work writing code or managing

00:02:40,640 --> 00:02:44,480
but i i also have to work on

00:02:42,640 --> 00:02:47,280
architecting a lot of different stuff

00:02:44,480 --> 00:02:51,040
inside the company helping people to

00:02:47,280 --> 00:02:54,560
actually design their solutions etc

00:02:51,040 --> 00:02:56,080
uh i put this light i don't know why

00:02:54,560 --> 00:02:58,640
there's been a lot of discussions about

00:02:56,080 --> 00:03:01,360
why i still use this is admin title

00:02:58,640 --> 00:03:03,599
it's just a title uh these days devops

00:03:01,360 --> 00:03:06,159
designed me sre they are all

00:03:03,599 --> 00:03:07,360
combo together you may say otherwise

00:03:06,159 --> 00:03:10,480
people may think different

00:03:07,360 --> 00:03:11,680
than that but it's uh everybody's doing

00:03:10,480 --> 00:03:13,599
basically the same thing

00:03:11,680 --> 00:03:16,720
managing systems and writing code that's

00:03:13,599 --> 00:03:19,920
what everybody does at those those days

00:03:16,720 --> 00:03:21,040
so what exactly does uh what a red hat

00:03:19,920 --> 00:03:23,920
infrastructure does

00:03:21,040 --> 00:03:25,120
basically uh we are the corporate side

00:03:23,920 --> 00:03:29,040
of the company

00:03:25,120 --> 00:03:32,080
um you can more or less say that

00:03:29,040 --> 00:03:34,080
red hat is divided half engineering

00:03:32,080 --> 00:03:36,319
and have corporate more or less like

00:03:34,080 --> 00:03:37,360
this and we are part of the corporate

00:03:36,319 --> 00:03:39,920
side of the company

00:03:37,360 --> 00:03:40,480
we take care of everything related to

00:03:39,920 --> 00:03:43,200
the

00:03:40,480 --> 00:03:45,360
corporate infrastructure all the things

00:03:43,200 --> 00:03:46,560
that are needed for the company to

00:03:45,360 --> 00:03:51,120
actually run to

00:03:46,560 --> 00:03:54,400
actually uh do their everyday work like

00:03:51,120 --> 00:03:56,640
the finances sales and

00:03:54,400 --> 00:03:57,439
everything related to maintaining a

00:03:56,640 --> 00:04:00,159
company

00:03:57,439 --> 00:04:00,959
so basically when you look at our team

00:04:00,159 --> 00:04:03,360
we are

00:04:00,959 --> 00:04:05,439
basically any kind of i.t shop a regular

00:04:03,360 --> 00:04:07,840
80 shop like any other one it

00:04:05,439 --> 00:04:08,799
shop so we have basically the same

00:04:07,840 --> 00:04:10,319
problems as

00:04:08,799 --> 00:04:11,920
anyone else that is actually in this

00:04:10,319 --> 00:04:15,920
conference today same

00:04:11,920 --> 00:04:19,040
everyday problems our offerings

00:04:15,920 --> 00:04:21,440
and high level offerings here

00:04:19,040 --> 00:04:22,639
we work we offer compute storage and

00:04:21,440 --> 00:04:25,600
network

00:04:22,639 --> 00:04:26,080
and when you look at compute we have a

00:04:25,600 --> 00:04:29,919
mix

00:04:26,080 --> 00:04:32,400
of private and public cloud

00:04:29,919 --> 00:04:34,560
offerings and we call this the open

00:04:32,400 --> 00:04:36,479
hybrid cloud solutions because

00:04:34,560 --> 00:04:37,759
you can actually deploy your application

00:04:36,479 --> 00:04:39,759
anywhere you want and

00:04:37,759 --> 00:04:42,160
we have many different solutions many

00:04:39,759 --> 00:04:44,479
offerings anywhere

00:04:42,160 --> 00:04:46,560
storage we also have different vendors

00:04:44,479 --> 00:04:49,199
different types of storage

00:04:46,560 --> 00:04:49,759
and network and network wise we actually

00:04:49,199 --> 00:04:52,080
offer

00:04:49,759 --> 00:04:52,960
a network connectivity for all the

00:04:52,080 --> 00:04:56,000
offices

00:04:52,960 --> 00:04:58,240
in in the entire company and also

00:04:56,000 --> 00:05:00,880
all the data centers that red hat

00:04:58,240 --> 00:05:03,600
manages uh including data centers which

00:05:00,880 --> 00:05:05,360
host community projects for example

00:05:03,600 --> 00:05:07,440
there are a lot of community projects

00:05:05,360 --> 00:05:11,039
which are sponsored by red hat

00:05:07,440 --> 00:05:13,840
which live inside a given data center

00:05:11,039 --> 00:05:14,320
or some other given data centers that my

00:05:13,840 --> 00:05:17,280
team

00:05:14,320 --> 00:05:18,960
also manage help manage not the project

00:05:17,280 --> 00:05:20,800
itself but the infrastructure

00:05:18,960 --> 00:05:22,240
under the project that the project needs

00:05:20,800 --> 00:05:25,600
in in order to be able to

00:05:22,240 --> 00:05:28,000
be in the data center itself

00:05:25,600 --> 00:05:29,600
we are an actual global team a true

00:05:28,000 --> 00:05:32,639
follow this certain thing like

00:05:29,600 --> 00:05:33,520
i like to say because we have people all

00:05:32,639 --> 00:05:36,639
over the globe

00:05:33,520 --> 00:05:38,000
uh on the on this side of the screen i'm

00:05:36,639 --> 00:05:39,840
not gonna say left or right because they

00:05:38,000 --> 00:05:42,400
can be confused

00:05:39,840 --> 00:05:43,039
on this side of the screen you can see

00:05:42,400 --> 00:05:46,639
all the

00:05:43,039 --> 00:05:50,560
offices where we have redhead i.t

00:05:46,639 --> 00:05:52,160
presence but the the ones highlighted

00:05:50,560 --> 00:05:54,000
are the ones where we have i t

00:05:52,160 --> 00:05:56,000
infrastructure presence in the sense

00:05:54,000 --> 00:05:59,120
that we actually have a person

00:05:56,000 --> 00:06:01,039
doing infrastructure in the office or in

00:05:59,120 --> 00:06:04,000
some cases i also pointed out

00:06:01,039 --> 00:06:05,520
data centers in some situations but we

00:06:04,000 --> 00:06:07,280
also have a lot of infrastructure people

00:06:05,520 --> 00:06:09,199
who are not even in the offices they are

00:06:07,280 --> 00:06:11,440
actually working from home somewhere in

00:06:09,199 --> 00:06:13,360
some other parts of the globe so

00:06:11,440 --> 00:06:14,720
complicated we have really a lot of

00:06:13,360 --> 00:06:19,039
people

00:06:14,720 --> 00:06:22,319
and but talking about our vpn solution

00:06:19,039 --> 00:06:24,800
what do you actually use vpn for so

00:06:22,319 --> 00:06:26,080
some people may question why do you

00:06:24,800 --> 00:06:29,120
still need vpa

00:06:26,080 --> 00:06:32,080
right well um even though

00:06:29,120 --> 00:06:32,800
we see we we all live in the cloud world

00:06:32,080 --> 00:06:35,199
where

00:06:32,800 --> 00:06:36,319
you can have all your stuff in the cloud

00:06:35,199 --> 00:06:39,199
in

00:06:36,319 --> 00:06:40,639
whatever cloud vendor you want uh you

00:06:39,199 --> 00:06:43,440
still need to have a way to

00:06:40,639 --> 00:06:45,360
access the resource or to or to protect

00:06:43,440 --> 00:06:47,520
the resource somehow

00:06:45,360 --> 00:06:49,759
so in our case we actually have to

00:06:47,520 --> 00:06:51,759
protect those resources because some of

00:06:49,759 --> 00:06:54,080
those they are internal only

00:06:51,759 --> 00:06:55,520
again like i said even though we are an

00:06:54,080 --> 00:06:58,479
open source company

00:06:55,520 --> 00:07:00,400
we provide open source software we

00:06:58,479 --> 00:07:03,120
provide open source services

00:07:00,400 --> 00:07:03,680
we still need to be a regular company

00:07:03,120 --> 00:07:06,080
that

00:07:03,680 --> 00:07:07,039
we still have a lot of private data like

00:07:06,080 --> 00:07:09,120
financial

00:07:07,039 --> 00:07:10,800
data institutional data that really

00:07:09,120 --> 00:07:13,520
cannot be exposed

00:07:10,800 --> 00:07:15,120
right so uh part of this we we hide

00:07:13,520 --> 00:07:18,479
behind our firewalls

00:07:15,120 --> 00:07:21,440
also um we have to prevent the oops

00:07:18,479 --> 00:07:23,039
situation like people can make mistakes

00:07:21,440 --> 00:07:24,880
and

00:07:23,039 --> 00:07:27,280
make something public that should not be

00:07:24,880 --> 00:07:27,840
public so we at least have some kind of

00:07:27,280 --> 00:07:30,000
a

00:07:27,840 --> 00:07:31,520
preparation before it actually goes to

00:07:30,000 --> 00:07:34,479
the outside world

00:07:31,520 --> 00:07:36,160
right but we still like i said you we we

00:07:34,479 --> 00:07:37,680
still have our private cloud

00:07:36,160 --> 00:07:40,160
infrastructure so we have

00:07:37,680 --> 00:07:41,680
one cloud inside the firewall we have

00:07:40,160 --> 00:07:44,000
another cloud outside the fire

00:07:41,680 --> 00:07:44,879
we have multiple types of clouds

00:07:44,000 --> 00:07:47,120
everywhere

00:07:44,879 --> 00:07:48,080
and also never forget that there is a

00:07:47,120 --> 00:07:50,160
lot of things

00:07:48,080 --> 00:07:52,080
called regulations everywhere in the

00:07:50,160 --> 00:07:53,759
world different countries that have

00:07:52,080 --> 00:07:54,720
different requirements for different

00:07:53,759 --> 00:07:56,720
things so

00:07:54,720 --> 00:07:59,360
we need to be aware of those and that's

00:07:56,720 --> 00:08:02,400
why we we need to keep these vpns

00:07:59,360 --> 00:08:06,000
up and running um

00:08:02,400 --> 00:08:09,280
the way that we run vpn basically

00:08:06,000 --> 00:08:09,840
all our vpn servers they are basically

00:08:09,280 --> 00:08:13,280
running

00:08:09,840 --> 00:08:16,080
on top of virtual machines and today

00:08:13,280 --> 00:08:18,160
those virtual machines are basically

00:08:16,080 --> 00:08:21,120
running on rev

00:08:18,160 --> 00:08:21,840
which means red hat virtualization which

00:08:21,120 --> 00:08:25,199
is our

00:08:21,840 --> 00:08:26,319
um most common product for

00:08:25,199 --> 00:08:29,360
virtualization

00:08:26,319 --> 00:08:33,039
been around for years and years

00:08:29,360 --> 00:08:35,440
um we on top of on top of those

00:08:33,039 --> 00:08:37,360
red which are red hat enterprise

00:08:35,440 --> 00:08:41,120
machines rail machines

00:08:37,360 --> 00:08:44,080
those vms they run openvpn software

00:08:41,120 --> 00:08:46,080
and we actually use the openvpn itself

00:08:44,080 --> 00:08:48,640
we don't use the the paid version of

00:08:46,080 --> 00:08:49,600
openvpn we use the open source openvpn

00:08:48,640 --> 00:08:52,560
version

00:08:49,600 --> 00:08:53,519
and we use the strongest encryption that

00:08:52,560 --> 00:08:56,880
we can

00:08:53,519 --> 00:08:57,440
and yeah we use 2fa for authentication

00:08:56,880 --> 00:09:00,080
so

00:08:57,440 --> 00:09:01,519
we we have tokens software tokens

00:09:00,080 --> 00:09:04,160
hardware tokens

00:09:01,519 --> 00:09:05,760
uh whatever you want to use people can

00:09:04,160 --> 00:09:08,880
choose whatever they want

00:09:05,760 --> 00:09:11,279
but it's necessary that we use 2fa and

00:09:08,880 --> 00:09:13,440
that's a suggestion for everybody don't

00:09:11,279 --> 00:09:15,200
forget to set your 2fa

00:09:13,440 --> 00:09:16,560
whatever you have an account online

00:09:15,200 --> 00:09:19,120
account that

00:09:16,560 --> 00:09:20,320
gives you the ability to use ufa please

00:09:19,120 --> 00:09:24,480
enable 2fa

00:09:20,320 --> 00:09:27,600
give you more security um

00:09:24,480 --> 00:09:30,640
our global vpn solution has global reach

00:09:27,600 --> 00:09:32,880
we actually have uh vpn servers in

00:09:30,640 --> 00:09:33,200
multiple locations in some locations

00:09:32,880 --> 00:09:36,080
they

00:09:33,200 --> 00:09:38,080
are actually inside an office and in

00:09:36,080 --> 00:09:41,680
some other locations they are inside

00:09:38,080 --> 00:09:43,200
a data center we have to do that for

00:09:41,680 --> 00:09:47,519
many reasons

00:09:43,200 --> 00:09:51,519
we have some local resources

00:09:47,519 --> 00:09:55,040
which needs to be accessed faster like

00:09:51,519 --> 00:09:57,680
one example imagine someone

00:09:55,040 --> 00:09:59,200
in australia for example trying to

00:09:57,680 --> 00:10:01,600
access the server

00:09:59,200 --> 00:10:02,640
it's very slow for them to access the

00:10:01,600 --> 00:10:04,720
server in the us

00:10:02,640 --> 00:10:06,320
so they have some servers local in

00:10:04,720 --> 00:10:09,519
australia so they don't have to cross

00:10:06,320 --> 00:10:11,519
entire ocean right and we have other

00:10:09,519 --> 00:10:14,399
situations where

00:10:11,519 --> 00:10:15,839
i i will not name countries where there

00:10:14,399 --> 00:10:18,959
are restrictions that

00:10:15,839 --> 00:10:20,640
uh the services need to be local or in

00:10:18,959 --> 00:10:23,040
other situations that

00:10:20,640 --> 00:10:25,120
you cannot open a vpn connection to the

00:10:23,040 --> 00:10:26,800
outside of the country so there are many

00:10:25,120 --> 00:10:29,920
situations where

00:10:26,800 --> 00:10:33,760
uh which forced us to to create those

00:10:29,920 --> 00:10:37,360
local regional vpns and also that is the

00:10:33,760 --> 00:10:40,079
latency right the globe is

00:10:37,360 --> 00:10:40,959
enormous and we still have not beat the

00:10:40,079 --> 00:10:42,240
speed of light

00:10:40,959 --> 00:10:44,320
we still need to take that into

00:10:42,240 --> 00:10:46,959
consideration so

00:10:44,320 --> 00:10:48,160
latency is a factor for anybody that

00:10:46,959 --> 00:10:51,360
needs access

00:10:48,160 --> 00:10:53,120
and we as red hat infrastructure we care

00:10:51,360 --> 00:10:55,680
about providing the best

00:10:53,120 --> 00:10:57,040
reliable connectivity for anyone so for

00:10:55,680 --> 00:11:00,000
example if you are

00:10:57,040 --> 00:11:00,880
in any given country and you need to

00:11:00,000 --> 00:11:03,920
access

00:11:00,880 --> 00:11:06,640
any resource in another continent and

00:11:03,920 --> 00:11:07,600
uh it doesn't necessarily mean that your

00:11:06,640 --> 00:11:10,240
connectivity

00:11:07,600 --> 00:11:11,120
from your house is going to be the best

00:11:10,240 --> 00:11:13,600
possible

00:11:11,120 --> 00:11:15,200
so we provide you a way to reach out to

00:11:13,600 --> 00:11:17,200
our services with

00:11:15,200 --> 00:11:19,519
the minimal latency that we can provide

00:11:17,200 --> 00:11:22,399
because we have agreements with

00:11:19,519 --> 00:11:24,160
many uh partners to provide connectivity

00:11:22,399 --> 00:11:27,200
across the globe

00:11:24,160 --> 00:11:31,360
and um last but not least we

00:11:27,200 --> 00:11:34,480
we have uh automatic location selection

00:11:31,360 --> 00:11:35,200
and fallback to secondary using uh smart

00:11:34,480 --> 00:11:37,519
dns

00:11:35,200 --> 00:11:38,640
and a smart location which i'm going to

00:11:37,519 --> 00:11:41,920
talk about

00:11:38,640 --> 00:11:42,399
later this is basically an overview

00:11:41,920 --> 00:11:44,800
where

00:11:42,399 --> 00:11:45,600
our corporate solution our corporate vpn

00:11:44,800 --> 00:11:49,040
is located

00:11:45,600 --> 00:11:53,120
all the places where uh we have um

00:11:49,040 --> 00:11:56,079
some sort of uh vpn connectivity

00:11:53,120 --> 00:11:56,800
i actually forgot two locations here

00:11:56,079 --> 00:12:00,480
well well

00:11:56,800 --> 00:12:00,480
i'll fix that for the next time

00:12:00,720 --> 00:12:07,519
um so uh related

00:12:04,160 --> 00:12:08,880
to the open source things that we use

00:12:07,519 --> 00:12:11,760
remember that

00:12:08,880 --> 00:12:15,760
when i said the the title of this

00:12:11,760 --> 00:12:18,079
presentation is that we use 99

00:12:15,760 --> 00:12:19,920
open source things so these are

00:12:18,079 --> 00:12:20,720
basically the open source bits that we

00:12:19,920 --> 00:12:22,959
use

00:12:20,720 --> 00:12:24,800
we have red hat enterprise linux and we

00:12:22,959 --> 00:12:26,639
have red hat virtualization

00:12:24,800 --> 00:12:28,480
uh red hat virtualization is basically

00:12:26,639 --> 00:12:31,600
the name of the products that

00:12:28,480 --> 00:12:35,120
we uh provide to our customers but

00:12:31,600 --> 00:12:37,839
uh the overt project

00:12:35,120 --> 00:12:38,399
overt project is the actual open source

00:12:37,839 --> 00:12:41,680
project

00:12:38,399 --> 00:12:44,079
and um red hat enterprise linux

00:12:41,680 --> 00:12:44,720
is also open source and the equivalent

00:12:44,079 --> 00:12:46,880
that

00:12:44,720 --> 00:12:48,320
anybody can go and download without any

00:12:46,880 --> 00:12:51,519
problems that always uh

00:12:48,320 --> 00:12:52,880
central s or fedora they are all

00:12:51,519 --> 00:12:55,279
equivalent

00:12:52,880 --> 00:12:56,560
even though red hat is also free to

00:12:55,279 --> 00:13:00,160
download but

00:12:56,560 --> 00:13:03,440
there are some restrictions we also use

00:13:00,160 --> 00:13:05,200
ansible for our configuration management

00:13:03,440 --> 00:13:07,920
we have both

00:13:05,200 --> 00:13:09,120
a combination of instable engine which

00:13:07,920 --> 00:13:11,440
is basically when you run

00:13:09,120 --> 00:13:13,920
ansible playbooks from your laptop or

00:13:11,440 --> 00:13:16,720
from a common line chrome job whatever

00:13:13,920 --> 00:13:19,519
and we also have a instable tower that

00:13:16,720 --> 00:13:21,680
we use for orchestration since instable

00:13:19,519 --> 00:13:24,399
tower we can actually create

00:13:21,680 --> 00:13:26,160
shared playbooks or shared workflows

00:13:24,399 --> 00:13:28,639
that a lot of people can use we can

00:13:26,160 --> 00:13:31,760
create one single workflow to do

00:13:28,639 --> 00:13:33,200
let's say for example to uh provision a

00:13:31,760 --> 00:13:35,120
vm somewhere

00:13:33,200 --> 00:13:36,959
and any given developer they don't need

00:13:35,120 --> 00:13:38,720
to know the details about how to

00:13:36,959 --> 00:13:40,800
provision a vm all they need to know is

00:13:38,720 --> 00:13:44,800
click three buttons and eventually

00:13:40,800 --> 00:13:48,000
they got a vm somewhere

00:13:44,800 --> 00:13:50,240
we do that using ansible tower we

00:13:48,000 --> 00:13:51,839
still have a little bit of puppet in in

00:13:50,240 --> 00:13:52,240
our infrastructure i'm not gonna lie i

00:13:51,839 --> 00:13:54,240
could

00:13:52,240 --> 00:13:55,920
come here and say a lot of things are

00:13:54,240 --> 00:13:58,000
really not true i could hide a lot of

00:13:55,920 --> 00:14:00,000
skeletons in the closet but

00:13:58,000 --> 00:14:01,760
i don't think that's that's valuable i

00:14:00,000 --> 00:14:02,720
actually have to say that we see a grand

00:14:01,760 --> 00:14:05,839
puppet

00:14:02,720 --> 00:14:06,320
in in a lot of our environment and uh we

00:14:05,839 --> 00:14:08,639
actually

00:14:06,320 --> 00:14:10,079
have a combination of ansible and puppet

00:14:08,639 --> 00:14:13,120
we are transitioning

00:14:10,079 --> 00:14:16,320
out of puppet going to be 100

00:14:13,120 --> 00:14:17,360
ansible that's what i if you remember

00:14:16,320 --> 00:14:19,839
one of my

00:14:17,360 --> 00:14:21,360
initial slides i saw i said next gen

00:14:19,839 --> 00:14:23,120
data center that's basically what we're

00:14:21,360 --> 00:14:24,000
doing we are transitioning everything

00:14:23,120 --> 00:14:26,800
from

00:14:24,000 --> 00:14:30,880
uh puppet and standard infrastructure to

00:14:26,800 --> 00:14:34,560
infrastructure as a code using ansible

00:14:30,880 --> 00:14:35,600
um so like i said proprietary bits we

00:14:34,560 --> 00:14:38,800
actually do

00:14:35,600 --> 00:14:39,519
use some proprietary stuff and those are

00:14:38,800 --> 00:14:42,880
basically

00:14:39,519 --> 00:14:44,720
we use infoblox for the client-side dns

00:14:42,880 --> 00:14:46,240
resolution for cooperating internet

00:14:44,720 --> 00:14:49,680
hosts basically

00:14:46,240 --> 00:14:53,279
uh when anybody connects connects

00:14:49,680 --> 00:14:56,959
to the vpn or if they are sitting

00:14:53,279 --> 00:14:59,680
in any given office they use infoblox

00:14:56,959 --> 00:15:00,480
as the dns resolver it was a choice that

00:14:59,680 --> 00:15:02,800
we made

00:15:00,480 --> 00:15:05,279
just because of uh different

00:15:02,800 --> 00:15:08,480
requirements that we have in our network

00:15:05,279 --> 00:15:11,040
um there's no point in going over this i

00:15:08,480 --> 00:15:12,959
could give an entire presentation about

00:15:11,040 --> 00:15:14,560
our dns infrastructure why we chose

00:15:12,959 --> 00:15:18,399
infoblox but we still have

00:15:14,560 --> 00:15:19,519
bind um we still have bind as our core

00:15:18,399 --> 00:15:22,240
infrastructure

00:15:19,519 --> 00:15:23,920
dns it's still there and we're also

00:15:22,240 --> 00:15:26,079
analyzing looking at different other

00:15:23,920 --> 00:15:29,120
solutions like um

00:15:26,079 --> 00:15:33,279
core dns and and profit tree and

00:15:29,120 --> 00:15:36,160
other dns uh solutions unbound etc

00:15:33,279 --> 00:15:36,880
it's a mix of different stuff uh but for

00:15:36,160 --> 00:15:39,360
the

00:15:36,880 --> 00:15:40,079
for the purpose of the open vpn infoblox

00:15:39,360 --> 00:15:42,639
is what we use

00:15:40,079 --> 00:15:44,560
for client resolution and we also do

00:15:42,639 --> 00:15:46,720
some a little bit of protection with

00:15:44,560 --> 00:15:50,240
response policy zones basically we have

00:15:46,720 --> 00:15:52,720
lists of sites which are

00:15:50,240 --> 00:15:55,040
considered malicious and when someone is

00:15:52,720 --> 00:15:57,680
connected to the vpn

00:15:55,040 --> 00:15:58,639
we provide infoblox as the primary dns

00:15:57,680 --> 00:16:00,320
for them

00:15:58,639 --> 00:16:02,880
and every time they try to resolve

00:16:00,320 --> 00:16:04,880
something uh they go over these

00:16:02,880 --> 00:16:05,920
lists and just to make sure that they

00:16:04,880 --> 00:16:09,040
don't get

00:16:05,920 --> 00:16:10,480
they don't get scanned fished or malware

00:16:09,040 --> 00:16:13,920
or whatever

00:16:10,480 --> 00:16:17,199
um we also use akamai

00:16:13,920 --> 00:16:18,720
in this case uh i actually should

00:16:17,199 --> 00:16:20,800
edit this light and say that it's

00:16:18,720 --> 00:16:23,360
actually akamai dns

00:16:20,800 --> 00:16:24,639
we don't use for open vpn itself we do

00:16:23,360 --> 00:16:27,120
not use akamai

00:16:24,639 --> 00:16:28,399
as a content provider we use akamai as a

00:16:27,120 --> 00:16:29,839
dns solution

00:16:28,399 --> 00:16:31,920
and i'm going to talk a little bit about

00:16:29,839 --> 00:16:33,759
that uh on next slides

00:16:31,920 --> 00:16:36,160
uh there's a slide just for talking

00:16:33,759 --> 00:16:39,680
about akamai

00:16:36,160 --> 00:16:41,759
and the other property part is some

00:16:39,680 --> 00:16:43,120
software that we had to run on windows

00:16:41,759 --> 00:16:46,240
and mac

00:16:43,120 --> 00:16:49,120
for it needs to be proprietary because

00:16:46,240 --> 00:16:51,680
of compatibility with the way that

00:16:49,120 --> 00:16:53,279
we provide the corporate management for

00:16:51,680 --> 00:16:56,560
those laptops

00:16:53,279 --> 00:16:59,360
and but um obviously on linux

00:16:56,560 --> 00:17:03,360
and mobile clients we actually use the

00:16:59,360 --> 00:17:06,559
the official openvpn open source client

00:17:03,360 --> 00:17:08,959
um like i said um akamai

00:17:06,559 --> 00:17:10,319
uh why do you use akamai for and this is

00:17:08,959 --> 00:17:13,120
very interesting part

00:17:10,319 --> 00:17:13,679
this is something that i'm very proud of

00:17:13,120 --> 00:17:16,880
because

00:17:13,679 --> 00:17:20,079
i work on this for a long time uh

00:17:16,880 --> 00:17:21,919
we actually use akamai gtm global

00:17:20,079 --> 00:17:23,919
traffic management and

00:17:21,919 --> 00:17:25,439
when whenever you get uh whenever you

00:17:23,919 --> 00:17:27,600
get ahold of these slides you

00:17:25,439 --> 00:17:28,480
there is a link to how gtm there's a

00:17:27,600 --> 00:17:30,960
link to

00:17:28,480 --> 00:17:32,480
the explanation on how gtm works but

00:17:30,960 --> 00:17:33,440
basically what happens is that when

00:17:32,480 --> 00:17:36,160
someone uh

00:17:33,440 --> 00:17:37,360
tries to resolve the dns host name for

00:17:36,160 --> 00:17:39,440
our vpn

00:17:37,360 --> 00:17:40,960
they reach out to akamai akamai will

00:17:39,440 --> 00:17:43,600
figure out where

00:17:40,960 --> 00:17:46,000
in the globe they are and akamai will

00:17:43,600 --> 00:17:48,799
say okay so this is the closest

00:17:46,000 --> 00:17:49,760
country for you in case it's a country

00:17:48,799 --> 00:17:52,160
level thing

00:17:49,760 --> 00:17:54,080
but in case it's uh in case it's inside

00:17:52,160 --> 00:17:56,160
a giving country okay

00:17:54,080 --> 00:17:58,400
inside this country i have these

00:17:56,160 --> 00:17:58,880
locations these cities these states and

00:17:58,400 --> 00:18:00,880
then

00:17:58,880 --> 00:18:02,960
i'm gonna select the best one for you so

00:18:00,880 --> 00:18:05,520
for example if you are in europe

00:18:02,960 --> 00:18:06,240
uh if you're let's say for example in

00:18:05,520 --> 00:18:08,640
italy

00:18:06,240 --> 00:18:10,720
we do not have connectivity we do not

00:18:08,640 --> 00:18:12,720
have open vpn in italy but we have in

00:18:10,720 --> 00:18:14,480
different countries so

00:18:12,720 --> 00:18:16,720
they will choose akamai will choose

00:18:14,480 --> 00:18:19,360
which one is faster which one is closer

00:18:16,720 --> 00:18:21,679
to that person at any given moment

00:18:19,360 --> 00:18:23,520
and if you are for example in the united

00:18:21,679 --> 00:18:25,360
states you will choose between the east

00:18:23,520 --> 00:18:29,679
coast and the west coast

00:18:25,360 --> 00:18:32,160
and then uh once that country is located

00:18:29,679 --> 00:18:33,600
uh then you will selected the

00:18:32,160 --> 00:18:35,039
appropriate data center for that

00:18:33,600 --> 00:18:38,400
particular country

00:18:35,039 --> 00:18:42,720
and then finally it will connect to the

00:18:38,400 --> 00:18:46,080
vpn server

00:18:42,720 --> 00:18:50,080
so how did we do all our

00:18:46,080 --> 00:18:54,160
preparation for dealing with kovid

00:18:50,080 --> 00:18:57,120
um well

00:18:54,160 --> 00:18:58,080
everybody was hit by surprise with

00:18:57,120 --> 00:19:00,880
lockdowns

00:18:58,080 --> 00:19:01,280
and changes in behavior working from

00:19:00,880 --> 00:19:05,360
home

00:19:01,280 --> 00:19:08,480
and everything but uh red hat has been

00:19:05,360 --> 00:19:11,520
red hat has been using open vpn for

00:19:08,480 --> 00:19:14,880
many years already many many years

00:19:11,520 --> 00:19:18,080
and uh we have been

00:19:14,880 --> 00:19:21,520
slowly managing the load

00:19:18,080 --> 00:19:22,320
based on different patterns and we we

00:19:21,520 --> 00:19:25,200
have

00:19:22,320 --> 00:19:26,559
growth in this area or in that country

00:19:25,200 --> 00:19:29,600
or we have a different

00:19:26,559 --> 00:19:33,120
um uh traffic pattern

00:19:29,600 --> 00:19:34,880
in any different vpn server so

00:19:33,120 --> 00:19:37,360
that was basically how we were managing

00:19:34,880 --> 00:19:40,400
like just waiting for someone to

00:19:37,360 --> 00:19:41,760
come to talk to us and say hey this vpn

00:19:40,400 --> 00:19:45,120
server is not good for this

00:19:41,760 --> 00:19:45,520
these people in this location or we have

00:19:45,120 --> 00:19:47,520
this

00:19:45,520 --> 00:19:48,720
situation in this country or in this

00:19:47,520 --> 00:19:50,400
office that we

00:19:48,720 --> 00:19:53,120
should probably have a vpn for this

00:19:50,400 --> 00:19:56,160
location so we have been more or less

00:19:53,120 --> 00:20:00,160
kind of reactive in that regard but

00:19:56,160 --> 00:20:03,200
uh coincidentally a little bit a

00:20:00,160 --> 00:20:05,520
few well a few months before uh

00:20:03,200 --> 00:20:07,520
the pandemic hit we were actually

00:20:05,520 --> 00:20:09,760
preparing for a lot of stuff

00:20:07,520 --> 00:20:10,799
and one of the stuff that we were

00:20:09,760 --> 00:20:14,559
preparing was the

00:20:10,799 --> 00:20:16,000
uh the akamai global server selection

00:20:14,559 --> 00:20:17,679
that was the thing that we have been

00:20:16,000 --> 00:20:21,360
working for a long time

00:20:17,679 --> 00:20:24,799
even before the pandemic hits but

00:20:21,360 --> 00:20:27,039
once the pandemic actually came

00:20:24,799 --> 00:20:28,320
we started looking at what else can we

00:20:27,039 --> 00:20:30,799
do to improve

00:20:28,320 --> 00:20:31,760
and mind you we actually started talking

00:20:30,799 --> 00:20:34,880
about

00:20:31,760 --> 00:20:37,760
these topics even before

00:20:34,880 --> 00:20:38,400
the lockdown started because we said

00:20:37,760 --> 00:20:41,600
okay

00:20:38,400 --> 00:20:42,320
what if this is something that is part

00:20:41,600 --> 00:20:45,440
of our job

00:20:42,320 --> 00:20:46,320
it's part of our daily job is we need to

00:20:45,440 --> 00:20:49,039
think about the

00:20:46,320 --> 00:20:50,720
the next thing even though we have to

00:20:49,039 --> 00:20:52,480
focus on making sure that

00:20:50,720 --> 00:20:54,240
the lights at home and everything that

00:20:52,480 --> 00:20:56,480
we have today is

00:20:54,240 --> 00:20:57,919
working as good as possible we also need

00:20:56,480 --> 00:20:59,679
to think about

00:20:57,919 --> 00:21:01,120
what is the next thing in the next year

00:20:59,679 --> 00:21:01,679
or the next two years three years

00:21:01,120 --> 00:21:03,600
whatever

00:21:01,679 --> 00:21:05,440
we always need to think ahead in

00:21:03,600 --> 00:21:08,559
maintaining what we have today

00:21:05,440 --> 00:21:10,000
so um even before

00:21:08,559 --> 00:21:11,679
the lockdown we were already thinking

00:21:10,000 --> 00:21:12,799
what we're gonna do next what can be

00:21:11,679 --> 00:21:17,200
done

00:21:12,799 --> 00:21:20,640
so um when it actually happened

00:21:17,200 --> 00:21:22,720
uh we were more or less prepared for

00:21:20,640 --> 00:21:23,919
dealing with the situation because we

00:21:22,720 --> 00:21:26,400
already had

00:21:23,919 --> 00:21:26,960
a lot of vpn servers spread across the

00:21:26,400 --> 00:21:30,559
globe

00:21:26,960 --> 00:21:33,919
right and basically what we had to do

00:21:30,559 --> 00:21:35,520
was uh build additional servers in some

00:21:33,919 --> 00:21:38,799
locations

00:21:35,520 --> 00:21:41,120
so that uh we would prevent issues like

00:21:38,799 --> 00:21:43,200
availability it's not

00:21:41,120 --> 00:21:44,400
in some locations it wasn't a problem

00:21:43,200 --> 00:21:47,600
about

00:21:44,400 --> 00:21:49,039
capacity we had plenty capacity in some

00:21:47,600 --> 00:21:51,200
of those locations

00:21:49,039 --> 00:21:52,799
uh the problem was more related to

00:21:51,200 --> 00:21:55,520
actually availability

00:21:52,799 --> 00:21:57,039
and then in some other locations we had

00:21:55,520 --> 00:21:58,799
capacity problems and

00:21:57,039 --> 00:22:00,080
when i say capacity i actually talk

00:21:58,799 --> 00:22:03,280
about ip range

00:22:00,080 --> 00:22:05,120
it's not about cpu memory or anything

00:22:03,280 --> 00:22:08,000
it's basically our bandwidth

00:22:05,120 --> 00:22:08,480
it was just about ip range we we didn't

00:22:08,000 --> 00:22:10,880
plan

00:22:08,480 --> 00:22:12,320
for having so many people connected so

00:22:10,880 --> 00:22:13,280
we actually had to increase the ap

00:22:12,320 --> 00:22:17,200
ranges

00:22:13,280 --> 00:22:20,080
and we made educated guess guesses about

00:22:17,200 --> 00:22:21,840
what how many ips we should put in any

00:22:20,080 --> 00:22:23,120
given location and eventually we just

00:22:21,840 --> 00:22:25,440
said you know what

00:22:23,120 --> 00:22:27,440
let's just put as many ip addresses we

00:22:25,440 --> 00:22:29,760
can in every single location and then we

00:22:27,440 --> 00:22:33,520
don't have to worry about it anymore

00:22:29,760 --> 00:22:35,600
so um we we made that selection and we

00:22:33,520 --> 00:22:38,480
started doing this implementation

00:22:35,600 --> 00:22:40,159
and then we we increase it the level of

00:22:38,480 --> 00:22:43,200
monitoring everywhere

00:22:40,159 --> 00:22:46,320
putting more detailed monitoring

00:22:43,200 --> 00:22:50,000
on in terms of availability

00:22:46,320 --> 00:22:52,720
like making sure that any given

00:22:50,000 --> 00:22:54,240
server is accessible both from an

00:22:52,720 --> 00:22:55,440
internal perspective and from an

00:22:54,240 --> 00:22:57,360
external perspective

00:22:55,440 --> 00:22:58,640
because we have had in one situation

00:22:57,360 --> 00:23:00,480
like in

00:22:58,640 --> 00:23:02,880
we weren't monitoring internally the

00:23:00,480 --> 00:23:03,600
server was we could ping this over the

00:23:02,880 --> 00:23:05,600
service was

00:23:03,600 --> 00:23:08,799
up the service was reachable inside the

00:23:05,600 --> 00:23:10,720
firewall but not from outside the fire

00:23:08,799 --> 00:23:12,080
and so we had to implement this kind of

00:23:10,720 --> 00:23:16,480
monitoring as well from

00:23:12,080 --> 00:23:19,360
outside the the network actually um

00:23:16,480 --> 00:23:19,679
one of the things that um akamai gives

00:23:19,360 --> 00:23:23,600
us

00:23:19,679 --> 00:23:24,960
is this intelligent monitoring for

00:23:23,600 --> 00:23:27,840
availability

00:23:24,960 --> 00:23:28,320
if by because for any given country and

00:23:27,840 --> 00:23:30,000
i'm gonna

00:23:28,320 --> 00:23:32,640
go back a little bit just use this

00:23:30,000 --> 00:23:35,280
example let's say for example you are

00:23:32,640 --> 00:23:35,760
in in europe like i said someone is in

00:23:35,280 --> 00:23:39,760
italy

00:23:35,760 --> 00:23:43,120
they have in europe one europe 2 option

00:23:39,760 --> 00:23:46,080
and akamai is able to know not only

00:23:43,120 --> 00:23:47,120
which one is closer and faster for them

00:23:46,080 --> 00:23:49,919
to connect

00:23:47,120 --> 00:23:50,720
but also they are able to say this one

00:23:49,919 --> 00:23:53,120
is alive

00:23:50,720 --> 00:23:54,080
this one is dead so i'm gonna flip to

00:23:53,120 --> 00:23:55,600
the other one

00:23:54,080 --> 00:23:58,320
even though it's not the faster it's not

00:23:55,600 --> 00:24:00,480
the closer but at least it's alive

00:23:58,320 --> 00:24:02,480
so the same thing we do for for example

00:24:00,480 --> 00:24:04,559
in latin america even though there is uh

00:24:02,480 --> 00:24:06,480
there is a

00:24:04,559 --> 00:24:08,320
europa vp in sovereignty in america

00:24:06,480 --> 00:24:09,760
local and latin america if this one is

00:24:08,320 --> 00:24:11,840
not available then anybody in this

00:24:09,760 --> 00:24:13,840
region will connect to the u.s

00:24:11,840 --> 00:24:15,679
and we don't have to worry about it the

00:24:13,840 --> 00:24:17,440
customers don't have to worry about it

00:24:15,679 --> 00:24:19,279
it's one single profile they click i

00:24:17,440 --> 00:24:21,760
want to connect to the vpn i don't have

00:24:19,279 --> 00:24:26,159
to worry about where i'm going to

00:24:21,760 --> 00:24:26,159
uh akamai will do that selection for us

00:24:27,039 --> 00:24:32,320
so we also implemented other metrics

00:24:30,480 --> 00:24:33,679
basically looking at uh connection

00:24:32,320 --> 00:24:37,120
authentication attempts

00:24:33,679 --> 00:24:39,039
and looking we know an average of how

00:24:37,120 --> 00:24:42,559
many people are supposed to be connected

00:24:39,039 --> 00:24:44,720
at any given time or we know uh how many

00:24:42,559 --> 00:24:46,480
uh successful connection attempts should

00:24:44,720 --> 00:24:48,080
be at that one particular point of time

00:24:46,480 --> 00:24:49,919
and we monitor those

00:24:48,080 --> 00:24:52,000
we also look at authentication response

00:24:49,919 --> 00:24:54,640
times and disconnect reasons disconnect

00:24:52,000 --> 00:24:57,200
reasons is important because

00:24:54,640 --> 00:24:58,720
we can identify for example whether the

00:24:57,200 --> 00:25:01,840
disconnection has been

00:24:58,720 --> 00:25:04,240
made has been caused by our side because

00:25:01,840 --> 00:25:05,679
our server ran out of resources and

00:25:04,240 --> 00:25:08,720
disconnected the user

00:25:05,679 --> 00:25:10,080
or because on the user side they had an

00:25:08,720 --> 00:25:12,799
issue with their connectivity

00:25:10,080 --> 00:25:14,400
routing whatever and they disconnected

00:25:12,799 --> 00:25:15,919
or they disconnected because they really

00:25:14,400 --> 00:25:17,600
wanted to disconnect they just click the

00:25:15,919 --> 00:25:20,960
disconnect button we actually

00:25:17,600 --> 00:25:24,000
have a way to see this um

00:25:20,960 --> 00:25:26,720
this is this the specifications of any

00:25:24,000 --> 00:25:30,159
given openvpn server we standardize it

00:25:26,720 --> 00:25:32,480
in a minimum here and this minimum

00:25:30,159 --> 00:25:34,799
is i'm going to be honest the minimum is

00:25:32,480 --> 00:25:36,799
already a lot

00:25:34,799 --> 00:25:38,000
as you can see on the last line we

00:25:36,799 --> 00:25:41,120
barely touch

00:25:38,000 --> 00:25:44,159
when we have 2 000

00:25:41,120 --> 00:25:45,760
all over 2000 simultaneous users you

00:25:44,159 --> 00:25:47,200
actually we actually have only six

00:25:45,760 --> 00:25:51,039
percent cpu usage

00:25:47,200 --> 00:25:53,760
so um it's really like i said before the

00:25:51,039 --> 00:25:56,320
the capacity problem was not about cpu

00:25:53,760 --> 00:25:58,320
memory it's about ip ranges or

00:25:56,320 --> 00:26:00,799
availability in any given location it's

00:25:58,320 --> 00:26:04,240
not about cpu or anything

00:26:00,799 --> 00:26:07,039
it's a very lightweight protocol

00:26:04,240 --> 00:26:08,400
some interesting metrics to mention here

00:26:07,039 --> 00:26:11,520
we did

00:26:08,400 --> 00:26:13,600
roughly uh an average we did a 100

00:26:11,520 --> 00:26:15,600
capacity increase in but in some

00:26:13,600 --> 00:26:19,760
locations it was actually 200

00:26:15,600 --> 00:26:22,640
increase uh we have a 65

00:26:19,760 --> 00:26:24,320
usage peak which means basically at any

00:26:22,640 --> 00:26:29,039
given point in time

00:26:24,320 --> 00:26:29,440
we have the equivalent of 765 percent of

00:26:29,039 --> 00:26:32,559
our

00:26:29,440 --> 00:26:34,240
entire ipa location the entire globe and

00:26:32,559 --> 00:26:36,080
not talking about one specific location

00:26:34,240 --> 00:26:40,400
i'm talking about the entire globe

00:26:36,080 --> 00:26:43,600
65 percent of uh uh available

00:26:40,400 --> 00:26:47,679
connections are being you in use

00:26:43,600 --> 00:26:50,799
in in the peak usage uh the minimum

00:26:47,679 --> 00:26:53,200
is five percent uh we never go below

00:26:50,799 --> 00:26:55,600
five percent which means there is always

00:26:53,200 --> 00:26:58,080
someone connected even on the weekends

00:26:55,600 --> 00:26:59,520
now the people who connect on the

00:26:58,080 --> 00:27:01,039
weekend doesn't mean necessarily they

00:26:59,520 --> 00:27:02,480
are working we do have a lot of people

00:27:01,039 --> 00:27:04,240
working on the weekend because

00:27:02,480 --> 00:27:06,640
we still have to support our customers

00:27:04,240 --> 00:27:07,440
right but also we have a lot of people

00:27:06,640 --> 00:27:09,520
that they

00:27:07,440 --> 00:27:11,679
connect and forget i have done that

00:27:09,520 --> 00:27:13,520
before i had connected one time and i

00:27:11,679 --> 00:27:14,880
forgot it was connected my laptop was

00:27:13,520 --> 00:27:16,880
all the time and

00:27:14,880 --> 00:27:19,520
i don't know i was connected for a week

00:27:16,880 --> 00:27:22,000
probably and and then we actually have a

00:27:19,520 --> 00:27:23,440
disconnection automatic disconnection on

00:27:22,000 --> 00:27:24,880
our server side just to make sure that

00:27:23,440 --> 00:27:27,760
people don't forget this and

00:27:24,880 --> 00:27:28,880
we we set it for i don't know sorry i

00:27:27,760 --> 00:27:30,559
don't require it for

00:27:28,880 --> 00:27:34,240
five or seven days but we actually do

00:27:30,559 --> 00:27:36,880
some force disconnection after some time

00:27:34,240 --> 00:27:37,919
so i actually wrote a little bit of a

00:27:36,880 --> 00:27:41,120
timeline here

00:27:37,919 --> 00:27:42,559
just to um i i wanted to organize my

00:27:41,120 --> 00:27:45,039
thoughts

00:27:42,559 --> 00:27:45,760
and i think it's also useful to to see

00:27:45,039 --> 00:27:50,000
how

00:27:45,760 --> 00:27:53,200
we have been proactive in many senses

00:27:50,000 --> 00:27:54,880
so as you can see january 30

00:27:53,200 --> 00:27:57,440
the world health organization issued a

00:27:54,880 --> 00:28:00,640
global health emergency

00:27:57,440 --> 00:28:02,480
they said there's this disease and it's

00:28:00,640 --> 00:28:03,200
important and everybody should be aware

00:28:02,480 --> 00:28:06,240
of it and

00:28:03,200 --> 00:28:06,960
should be prepared for doing when it

00:28:06,240 --> 00:28:09,520
should be done

00:28:06,960 --> 00:28:10,640
because it could be a problem for us and

00:28:09,520 --> 00:28:13,039
on january

00:28:10,640 --> 00:28:14,000
31 wright had to issue an internal

00:28:13,039 --> 00:28:17,919
communication

00:28:14,000 --> 00:28:19,200
about so we are aware we are looking at

00:28:17,919 --> 00:28:21,120
what we're going to do and we're

00:28:19,200 --> 00:28:22,399
starting to make decisions like for

00:28:21,120 --> 00:28:24,240
example

00:28:22,399 --> 00:28:25,760
we ask people to be careful about

00:28:24,240 --> 00:28:28,080
traveling for example

00:28:25,760 --> 00:28:29,600
and that's when uh at this particular

00:28:28,080 --> 00:28:30,799
point of time we were already talking

00:28:29,600 --> 00:28:31,919
about what we're going to do with the

00:28:30,799 --> 00:28:35,200
vpn

00:28:31,919 --> 00:28:38,799
and but the company came in and said

00:28:35,200 --> 00:28:41,760
yeah travel restrictions so more people

00:28:38,799 --> 00:28:44,240
working from home and then around

00:28:41,760 --> 00:28:48,720
february 4 we started looking at the

00:28:44,240 --> 00:28:50,799
asia vpn servers because that's where

00:28:48,720 --> 00:28:52,559
all the lockdown actually started people

00:28:50,799 --> 00:28:53,120
started working from home more from the

00:28:52,559 --> 00:28:56,320
uh

00:28:53,120 --> 00:29:01,440
from that part of the world and then

00:28:56,320 --> 00:29:03,440
we realized there was an increase uh

00:29:01,440 --> 00:29:05,440
an increase of 75 percent in increased

00:29:03,440 --> 00:29:07,520
usage in that region

00:29:05,440 --> 00:29:09,279
but again the the region was already

00:29:07,520 --> 00:29:10,880
over provision so

00:29:09,279 --> 00:29:12,480
we were not too concerned we are

00:29:10,880 --> 00:29:16,240
monitoring close but we are

00:29:12,480 --> 00:29:17,919
not too concerned um we started thinking

00:29:16,240 --> 00:29:19,039
about the other regions of the country

00:29:17,919 --> 00:29:22,000
what if that

00:29:19,039 --> 00:29:23,039
actually spreads right so uh we started

00:29:22,000 --> 00:29:25,279
adding server

00:29:23,039 --> 00:29:28,240
in specifically in the usa just to

00:29:25,279 --> 00:29:31,279
increase reliability like i said before

00:29:28,240 --> 00:29:34,000
and then in march 4th

00:29:31,279 --> 00:29:34,320
they actually shut down started shutting

00:29:34,000 --> 00:29:37,440
down

00:29:34,320 --> 00:29:39,919
stuff places in the united states

00:29:37,440 --> 00:29:41,919
and i'm sorry it sounds a little bit

00:29:39,919 --> 00:29:43,760
like i'm focusing on the united states

00:29:41,919 --> 00:29:47,120
but that's because the majority

00:29:43,760 --> 00:29:49,200
of the uh the majority of the red hat

00:29:47,120 --> 00:29:50,000
associates are either in the united

00:29:49,200 --> 00:29:52,480
states or in

00:29:50,000 --> 00:29:55,360
in regions close to the united states or

00:29:52,480 --> 00:30:00,000
use the vpn in the united states because

00:29:55,360 --> 00:30:02,240
even some people who are in other

00:30:00,000 --> 00:30:03,600
continents in europe or asia they still

00:30:02,240 --> 00:30:06,000
prefer to connect to the

00:30:03,600 --> 00:30:06,880
uh to the vpn servers in the us just

00:30:06,000 --> 00:30:08,480
because

00:30:06,880 --> 00:30:11,120
it's easier for them it's better for

00:30:08,480 --> 00:30:14,240
them um

00:30:11,120 --> 00:30:17,440
so um in march 6 we started giving

00:30:14,240 --> 00:30:19,279
new resources for vpn right uh we

00:30:17,440 --> 00:30:21,360
came into production with the the

00:30:19,279 --> 00:30:23,200
yakamai solution the out selection

00:30:21,360 --> 00:30:24,559
it was already there but it was not

00:30:23,200 --> 00:30:27,679
public for everybody

00:30:24,559 --> 00:30:31,039
and then that's when we turned it on and

00:30:27,679 --> 00:30:31,919
we started distributing um right at red

00:30:31,039 --> 00:30:33,760
hat everybody

00:30:31,919 --> 00:30:36,799
uh most of the associates they have

00:30:33,760 --> 00:30:38,960
their laptops that they use for uh

00:30:36,799 --> 00:30:40,799
they have configuration distributed

00:30:38,960 --> 00:30:41,200
today automatically that's when we told

00:30:40,799 --> 00:30:42,480
everybo

00:30:41,200 --> 00:30:44,960
we gave everybody the single

00:30:42,480 --> 00:30:47,840
configuration and then on

00:30:44,960 --> 00:30:48,559
march 11 uh the it was the clarity

00:30:47,840 --> 00:30:51,279
epidemic

00:30:48,559 --> 00:30:51,919
officially and then we started closing

00:30:51,279 --> 00:30:54,159
red hat

00:30:51,919 --> 00:30:56,320
offices and that's when everybody went

00:30:54,159 --> 00:30:59,200
home and then the vpn

00:30:56,320 --> 00:31:00,080
increased the vpn usage increased it a

00:30:59,200 --> 00:31:02,320
lot

00:31:00,080 --> 00:31:04,000
and then we decided to double capacity

00:31:02,320 --> 00:31:07,279
before we actually had any issues

00:31:04,000 --> 00:31:10,399
at all so uh usage spiked

00:31:07,279 --> 00:31:12,399
around uh 20 percent uh so

00:31:10,399 --> 00:31:14,320
sorry this 20 is actually for new

00:31:12,399 --> 00:31:15,039
associates connected to the vpn which

00:31:14,320 --> 00:31:16,880
means

00:31:15,039 --> 00:31:18,720
people that uh they were actually

00:31:16,880 --> 00:31:20,720
working from off from from the office

00:31:18,720 --> 00:31:22,640
they moved to work from home

00:31:20,720 --> 00:31:24,320
they never connect to the vpn before and

00:31:22,640 --> 00:31:25,279
now they are actually connecting to the

00:31:24,320 --> 00:31:28,159
vpn but

00:31:25,279 --> 00:31:30,480
we actually had more people more

00:31:28,159 --> 00:31:31,679
regularly connected to the vpn than we

00:31:30,480 --> 00:31:34,880
had before

00:31:31,679 --> 00:31:36,320
and then we kept going looking at

00:31:34,880 --> 00:31:37,679
everything and making sure that

00:31:36,320 --> 00:31:40,240
everything is stable

00:31:37,679 --> 00:31:41,360
and and we got to a point where two

00:31:40,240 --> 00:31:43,120
weeks later

00:31:41,360 --> 00:31:45,440
we did it we realized that global

00:31:43,120 --> 00:31:46,240
increase of 35 percent in simultaneous

00:31:45,440 --> 00:31:50,320
connections

00:31:46,240 --> 00:31:53,440
so and we we said okay we're fine

00:31:50,320 --> 00:31:55,120
we're good now we have enough uh i just

00:31:53,440 --> 00:31:58,320
wanted to give a shout out to

00:31:55,120 --> 00:32:02,080
red hat for being a great employer

00:31:58,320 --> 00:32:03,919
because on may 20 they created what is

00:32:02,080 --> 00:32:07,120
called the red hat recharge day

00:32:03,919 --> 00:32:10,320
which is a day every quarter

00:32:07,120 --> 00:32:11,760
that we associates have the ability to

00:32:10,320 --> 00:32:15,519
just take the day off

00:32:11,760 --> 00:32:16,320
and it's just a free day off for us that

00:32:15,519 --> 00:32:19,440
we enjoy

00:32:16,320 --> 00:32:20,080
and we go out and we do whatever we want

00:32:19,440 --> 00:32:23,519
it's great

00:32:20,080 --> 00:32:26,720
and it actually happened last week and

00:32:23,519 --> 00:32:27,279
we it was a happy day you can see on

00:32:26,720 --> 00:32:29,679
twitter

00:32:27,279 --> 00:32:31,760
what people have been doing that is a

00:32:29,679 --> 00:32:34,799
hashtag recharge day

00:32:31,760 --> 00:32:37,039
uh sorry that was a bad slide it wasn't

00:32:34,799 --> 00:32:39,519
supposed to be there

00:32:37,039 --> 00:32:41,200
so what we're going to do in the future

00:32:39,519 --> 00:32:42,720
um

00:32:41,200 --> 00:32:44,240
in the future we are migrating like i

00:32:42,720 --> 00:32:45,679
said we are migrating everything to

00:32:44,240 --> 00:32:48,000
ansible we should use a little bit of

00:32:45,679 --> 00:32:49,120
puppet but we are migrating to be 100

00:32:48,000 --> 00:32:52,159
ansible

00:32:49,120 --> 00:32:53,360
um should orchestrate and automate every

00:32:52,159 --> 00:32:56,480
single thing that we're doing

00:32:53,360 --> 00:32:59,679
uh some stuff is a little bit manual

00:32:56,480 --> 00:33:00,480
um we're going to migrate as much as we

00:32:59,679 --> 00:33:03,360
can from

00:33:00,480 --> 00:33:05,039
red hat virtualization to openstack just

00:33:03,360 --> 00:33:05,760
because we want to use openstack how to

00:33:05,039 --> 00:33:07,519
escape

00:33:05,760 --> 00:33:09,519
auto scaling capabilities and some other

00:33:07,519 --> 00:33:12,720
capabilities that uh red hat

00:33:09,519 --> 00:33:15,679
virtualization does not have um

00:33:12,720 --> 00:33:18,080
and we are going to support ipv6

00:33:15,679 --> 00:33:19,200
connectivity which is a big thing these

00:33:18,080 --> 00:33:22,480
days we already have

00:33:19,200 --> 00:33:24,480
internal ipv6 at red hat but we're now

00:33:22,480 --> 00:33:25,519
opening up for people to connect from

00:33:24,480 --> 00:33:29,039
home

00:33:25,519 --> 00:33:31,200
using ipv6 to the vpn and

00:33:29,039 --> 00:33:32,720
that should solve a lot of problems

00:33:31,200 --> 00:33:35,039
right

00:33:32,720 --> 00:33:36,880
related to ip ranges and everything else

00:33:35,039 --> 00:33:39,279
we will not worry about ipv ranges

00:33:36,880 --> 00:33:41,919
anymore that's not going to be a problem

00:33:39,279 --> 00:33:42,880
oops i forgot also to remove that little

00:33:41,919 --> 00:33:45,760
thing

00:33:42,880 --> 00:33:47,120
so this is all i had to say i really

00:33:45,760 --> 00:33:50,080
appreciate your time

00:33:47,120 --> 00:33:52,720
uh it was great uh having the

00:33:50,080 --> 00:33:56,480
opportunity to share this story with you

00:33:52,720 --> 00:33:58,080
and um i'm here opening four questions

00:33:56,480 --> 00:33:58,640
uh and i'm sorry i don't know exactly

00:33:58,080 --> 00:34:00,000
how these

00:33:58,640 --> 00:34:02,000
lights are gonna be shared i know

00:34:00,000 --> 00:34:05,760
they're gonna share the the recording

00:34:02,000 --> 00:34:09,040
later if they do not share the slides

00:34:05,760 --> 00:34:09,440
i will post some way to share i will use

00:34:09,040 --> 00:34:11,280
my

00:34:09,440 --> 00:34:13,119
my twitter in order to share those

00:34:11,280 --> 00:34:20,879
lights and

00:34:13,119 --> 00:34:22,879
thank you so much

00:34:20,879 --> 00:34:24,320
thank you mauricio uh did you see the

00:34:22,879 --> 00:34:27,280
question

00:34:24,320 --> 00:34:27,919
that you guys had from brian brock uh

00:34:27,280 --> 00:34:32,320
yes

00:34:27,919 --> 00:34:32,320
um one second

00:34:32,480 --> 00:34:37,200
do you have further plans to develop

00:34:34,720 --> 00:34:40,639
your infrastructure to respond to covid

00:34:37,200 --> 00:34:44,000
or is the deployment of software

00:34:40,639 --> 00:34:47,440
to deal with covet complete no

00:34:44,000 --> 00:34:50,079
it's it's never complete uh we

00:34:47,440 --> 00:34:50,960
the only thing that uh on the open vpn

00:34:50,079 --> 00:34:52,639
point of view

00:34:50,960 --> 00:34:54,720
uh like i said the thing that we are

00:34:52,639 --> 00:34:58,560
preparing to do is basically to

00:34:54,720 --> 00:35:00,400
uh move from red hat virtualization to

00:34:58,560 --> 00:35:03,200
openstack we're gonna use autoscaping

00:35:00,400 --> 00:35:04,960
capabilities because right now

00:35:03,200 --> 00:35:07,040
we're just using like i said in the

00:35:04,960 --> 00:35:07,839
beginning in some locations we have one

00:35:07,040 --> 00:35:09,359
single server

00:35:07,839 --> 00:35:11,359
in some other locations we have two

00:35:09,359 --> 00:35:13,040
servers and

00:35:11,359 --> 00:35:14,480
they they were deployed manually we

00:35:13,040 --> 00:35:14,800
actually have to click on the button and

00:35:14,480 --> 00:35:17,280
say

00:35:14,800 --> 00:35:19,280
give me one more server and we have to

00:35:17,280 --> 00:35:20,079
maintain those servers we actually have

00:35:19,280 --> 00:35:23,280
to do

00:35:20,079 --> 00:35:26,320
patching so when we we have to reboot

00:35:23,280 --> 00:35:29,359
one given server because of

00:35:26,320 --> 00:35:31,359
a glibc or kernel update everybody on

00:35:29,359 --> 00:35:33,200
that server gets disconnected

00:35:31,359 --> 00:35:34,800
so we need to be able to spread

00:35:33,200 --> 00:35:37,359
connections across more

00:35:34,800 --> 00:35:39,520
servers so that we can actually do

00:35:37,359 --> 00:35:40,560
maintenance without impacting people so

00:35:39,520 --> 00:35:42,720
instead of

00:35:40,560 --> 00:35:44,320
impacting i don't know three four

00:35:42,720 --> 00:35:46,320
thousand people at once when

00:35:44,320 --> 00:35:48,480
when you reboot a server you're actually

00:35:46,320 --> 00:35:51,520
gonna impact only 200 300

00:35:48,480 --> 00:35:54,079
it's not gonna be so bad uh from the

00:35:51,520 --> 00:35:55,280
uh from the general red hat

00:35:54,079 --> 00:35:59,040
infrastructure

00:35:55,280 --> 00:36:00,560
um we we have been working on improving

00:35:59,040 --> 00:36:02,880
our data centers because

00:36:00,560 --> 00:36:04,960
more and more stuff are running inside

00:36:02,880 --> 00:36:06,640
our data centers or in our cloud

00:36:04,960 --> 00:36:10,000
solutions in our

00:36:06,640 --> 00:36:10,560
virtual private clouds or vpcs inside

00:36:10,000 --> 00:36:14,079
whatever

00:36:10,560 --> 00:36:16,079
cloud vendor we use and uh

00:36:14,079 --> 00:36:17,760
the majority of the software that we

00:36:16,079 --> 00:36:20,640
have been deploying

00:36:17,760 --> 00:36:22,400
for uh red hat corporate the majority of

00:36:20,640 --> 00:36:25,920
the software is actually being deployed

00:36:22,400 --> 00:36:28,240
in open shift in as containers

00:36:25,920 --> 00:36:29,760
those are the main things that we have

00:36:28,240 --> 00:36:39,119
been doing i hope that

00:36:29,760 --> 00:36:39,119

YouTube URL: https://www.youtube.com/watch?v=nRB67V5KGZ4


