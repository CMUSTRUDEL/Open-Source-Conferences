Title: ViennaJS, VR Maps - Putting OpenStreetMap data into WebVR, May 2018
Publication date: 2018-05-31
Playlist: viennaJS
Description: 
	Talk by Robert Kaiser

"VR Maps" is a small demo as a side project by Robert. It puts OpenStreetMap data into WebVR using Mozilla's A-Frame toolkit. The talk will describe and show the code on how that can be done and how to allow navigation through the scene both in the normal browser and with a VR headset on, as well as what additional steps can be done to improve on the existing demo and code. I'm also happy to answer questions on A-Frame, Mozilla's WebVR/AR/XR work as well as OpenStreetMap.
Captions: 
	00:00:00,030 --> 00:00:06,240
so I'll talk about VR map OpenStreetMap

00:00:02,669 --> 00:00:09,330
cos we are this is basically about

00:00:06,240 --> 00:00:10,860
simple geo data visualization with a

00:00:09,330 --> 00:00:13,230
library called a frame

00:00:10,860 --> 00:00:15,389
I'm Robert Kaiser as he already

00:00:13,230 --> 00:00:18,000
mentioned nickname is chiral I'm a

00:00:15,389 --> 00:00:19,800
Mozilla tech speaker which is a

00:00:18,000 --> 00:00:21,660
community position I'm not working for

00:00:19,800 --> 00:00:24,330
Mozilla this is not official Mozilla

00:00:21,660 --> 00:00:26,220
stuff the project I'm talking about this

00:00:24,330 --> 00:00:28,980
not official Mozilla stuff but it uses a

00:00:26,220 --> 00:00:33,809
lot of Mozilla technologies I'm

00:00:28,980 --> 00:00:36,630
freelancer right now but not working for

00:00:33,809 --> 00:00:38,520
Mozilla the slides if you want to click

00:00:36,630 --> 00:00:41,399
any links or anything or look it up

00:00:38,520 --> 00:00:46,170
later are its lights da da da DT right

00:00:41,399 --> 00:00:50,460
now just the first entry there and let's

00:00:46,170 --> 00:00:54,690
go to to the topic of VR has anyone of

00:00:50,460 --> 00:00:55,410
you used VR headset before there are

00:00:54,690 --> 00:01:00,329
quite a few

00:00:55,410 --> 00:01:09,390
has anyone developed for we are very few

00:01:00,329 --> 00:01:12,060
okay so what is web VR it's a virtual

00:01:09,390 --> 00:01:18,060
reality system powered by web

00:01:12,060 --> 00:01:21,000
technologies it this was the first name

00:01:18,060 --> 00:01:24,150
they had when they when people stepped

00:01:21,000 --> 00:01:28,250
into the connection of the web and

00:01:24,150 --> 00:01:31,350
virtual reality nowadays the put

00:01:28,250 --> 00:01:33,950
additionally to VR they put a our

00:01:31,350 --> 00:01:36,450
augmented reality into the same

00:01:33,950 --> 00:01:39,960
collection of standards and it's now

00:01:36,450 --> 00:01:42,299
called mixed reality or X our web X R or

00:01:39,960 --> 00:01:47,430
the web X our device API as the full

00:01:42,299 --> 00:01:49,799
name and the w3c proposals that's as I

00:01:47,430 --> 00:01:51,930
just mentioned a proposal for an open

00:01:49,799 --> 00:01:53,640
standard but already to a large part

00:01:51,930 --> 00:01:56,009
implemented by multiple parties

00:01:53,640 --> 00:02:02,000
including Mozilla but also including

00:01:56,009 --> 00:02:07,229
Google Samsung oculus and a few others

00:02:02,000 --> 00:02:10,649
it's basically taking WebGL Web Audio

00:02:07,229 --> 00:02:12,709
gamepad API is and putting a few

00:02:10,649 --> 00:02:16,519
additional things on

00:02:12,709 --> 00:02:21,470
in addition to that concert to make we

00:02:16,519 --> 00:02:25,300
are available in when it comes to

00:02:21,470 --> 00:02:29,890
Mozilla it's fully supported in Firefox

00:02:25,300 --> 00:02:32,780
release on Windows on Mac it was

00:02:29,890 --> 00:02:35,959
releasing in Firefox 60 and pulled back

00:02:32,780 --> 00:02:38,090
in 6001 because of some small issues so

00:02:35,959 --> 00:02:40,819
it's on nightly in beta right now on Mac

00:02:38,090 --> 00:02:43,790
on Linux it's still in development to

00:02:40,819 --> 00:02:46,670
some degree because the drivers for the

00:02:43,790 --> 00:02:48,170
HTC vive oculus does not have Linux

00:02:46,670 --> 00:02:50,980
drivers because Facebook doesn't think

00:02:48,170 --> 00:02:55,519
it's a good idea to do with Linux

00:02:50,980 --> 00:02:59,870
apparently but valve does drivers for

00:02:55,519 --> 00:03:03,730
for the HTC vive and those are in beta

00:02:59,870 --> 00:03:06,910
mode as well and Firefox has to do some

00:03:03,730 --> 00:03:11,930
GL graphics hardware acceleration

00:03:06,910 --> 00:03:15,140
patches before we can enable the support

00:03:11,930 --> 00:03:18,859
for VR itself most of the actual VR

00:03:15,140 --> 00:03:23,900
support is there but the the interfaces

00:03:18,859 --> 00:03:25,819
need to be done that said Mozilla is the

00:03:23,900 --> 00:03:28,370
first one who shipped support in a

00:03:25,819 --> 00:03:30,829
release version others of the major

00:03:28,370 --> 00:03:33,760
browser vendors others have Google has

00:03:30,829 --> 00:03:36,380
something in experimental stuff and

00:03:33,760 --> 00:03:38,510
while Microsoft has something in edge

00:03:36,380 --> 00:03:45,319
for the hololens but only for the

00:03:38,510 --> 00:03:48,620
hololens so what is VR map I asked

00:03:45,319 --> 00:03:50,989
before about your knowledge about VR

00:03:48,620 --> 00:03:55,160
stuff who of you has used Open Street

00:03:50,989 --> 00:03:58,359
Map a lot of you who has actually done

00:03:55,160 --> 00:04:01,160
some contributions for Open Street Map

00:03:58,359 --> 00:04:06,650
so a few who know a little bit about the

00:04:01,160 --> 00:04:08,030
concepts but most don't I'm involved in

00:04:06,650 --> 00:04:09,680
the Open Street Map project and I'm

00:04:08,030 --> 00:04:12,739
involved in Mozilla stuff and I thought

00:04:09,680 --> 00:04:15,049
well I'm doing VR stuff for Mozilla I

00:04:12,739 --> 00:04:18,049
love Open Street Map we could connect

00:04:15,049 --> 00:04:20,450
that somehow and so I did a little demo

00:04:18,049 --> 00:04:22,400
for web VR stuff using life

00:04:20,450 --> 00:04:23,350
OpenStreetMap data and that's what we

00:04:22,400 --> 00:04:27,050
are mapping

00:04:23,350 --> 00:04:30,620
in 2d mode you can use it in any modern

00:04:27,050 --> 00:04:32,600
browser actually put a few stuff things

00:04:30,620 --> 00:04:35,630
like fetch in it so you need a modern

00:04:32,600 --> 00:04:40,400
browser but you can use it in 2d mode it

00:04:35,630 --> 00:04:44,900
uses WebGL no issues there but where you

00:04:40,400 --> 00:04:49,370
have the web we are you can use the

00:04:44,900 --> 00:04:51,919
controllers you can use the headset it's

00:04:49,370 --> 00:04:54,650
using Mozilla's a frame library I'll

00:04:51,919 --> 00:04:55,610
come to that later right now it's very

00:04:54,650 --> 00:04:58,700
simple

00:04:55,610 --> 00:05:00,380
about 70 lines of HTML more than half of

00:04:58,700 --> 00:05:03,680
that is actually the start dialog that

00:05:00,380 --> 00:05:07,330
tells you what it is and about 400 lines

00:05:03,680 --> 00:05:09,980
of JavaScript not more than that

00:05:07,330 --> 00:05:11,960
and I'm talking a bit fast because I

00:05:09,980 --> 00:05:13,790
want to show you it a little bit of it

00:05:11,960 --> 00:05:17,690
and I also want to show you a little bit

00:05:13,790 --> 00:05:21,080
of code so let's take a look at it I'm

00:05:17,690 --> 00:05:25,190
actually using a locally hosted version

00:05:21,080 --> 00:05:27,830
here and this version looks a bit more

00:05:25,190 --> 00:05:30,200
data than then it usually does actually

00:05:27,830 --> 00:05:33,680
a little bit too much data for using the

00:05:30,200 --> 00:05:37,460
headset but I want to show you a little

00:05:33,680 --> 00:05:40,850
bit of a larger area here so we are

00:05:37,460 --> 00:05:44,990
standing actually right in front of this

00:05:40,850 --> 00:05:46,760
building when I load this local version

00:05:44,990 --> 00:05:48,080
by default when you load the official

00:05:46,760 --> 00:05:51,830
version you're standing right in front

00:05:48,080 --> 00:05:55,250
of the building I live in I will make

00:05:51,830 --> 00:05:57,020
some coordinate selections available in

00:05:55,250 --> 00:05:59,750
later versions but you have to start

00:05:57,020 --> 00:06:06,560
somewhere so why not in front of your

00:05:59,750 --> 00:06:11,080
front door and let's actually use the es

00:06:06,560 --> 00:06:19,250
DW keys and walk towards the girdle and

00:06:11,080 --> 00:06:22,880
I can actually fly and you see that even

00:06:19,250 --> 00:06:24,410
the trees so you see there's actually

00:06:22,880 --> 00:06:26,570
three things there you have the ground

00:06:24,410 --> 00:06:30,520
tiles where you see the the map itself

00:06:26,570 --> 00:06:33,979
you have buildings and you have trees

00:06:30,520 --> 00:06:36,140
the reason for that is pretty simple the

00:06:33,979 --> 00:06:37,009
ground tiles were the first thing I did

00:06:36,140 --> 00:06:41,029
to actually

00:06:37,009 --> 00:06:44,599
see something and then the easiest thing

00:06:41,029 --> 00:06:46,639
to do something with was something that

00:06:44,599 --> 00:06:49,219
is a node so there is a point on the map

00:06:46,639 --> 00:06:51,289
so I used I looked at the map and the

00:06:49,219 --> 00:06:54,770
saw tree so I thought tree should be

00:06:51,289 --> 00:06:57,080
easy so I put trees on it and then

00:06:54,770 --> 00:06:59,449
buildings are a bit more interesting so

00:06:57,080 --> 00:07:03,319
I put buildings on it just to show

00:06:59,449 --> 00:07:05,960
something off OpenStreetMaps at some

00:07:03,319 --> 00:07:09,589
point imported open government data

00:07:05,960 --> 00:07:11,539
that's says the size of the trees so I

00:07:09,589 --> 00:07:12,949
can could actually use some data about

00:07:11,539 --> 00:07:17,449
the size of the trees so you get

00:07:12,949 --> 00:07:21,430
different sized trees here and yeah as I

00:07:17,449 --> 00:07:24,469
said you can you can fly around there

00:07:21,430 --> 00:07:26,479
you if you have the controller you can

00:07:24,469 --> 00:07:32,469
jump around there with the controller as

00:07:26,479 --> 00:07:35,689
well or fly through the area and reverse

00:07:32,469 --> 00:07:39,169
fly up here you'll see that some

00:07:35,689 --> 00:07:41,029
buildings have different sizes but many

00:07:39,169 --> 00:07:44,749
of them are rendered in the same height

00:07:41,029 --> 00:07:48,289
which is also depending on which data is

00:07:44,749 --> 00:07:53,240
available in OpenStreetMap so a very

00:07:48,289 --> 00:07:56,899
simple thing actually how is this simple

00:07:53,240 --> 00:07:59,209
thing done so one of the first decisions

00:07:56,899 --> 00:08:01,129
I made with it to make everything simple

00:07:59,209 --> 00:08:04,099
is I decided that the world is flat

00:08:01,129 --> 00:08:06,589
actually in two ways for one thing you

00:08:04,099 --> 00:08:11,089
saw we are actually on some kind of

00:08:06,589 --> 00:08:13,209
slope here and on this map it's all flat

00:08:11,089 --> 00:08:17,419
you don't see anything go up and down

00:08:13,209 --> 00:08:21,860
the second thing is I decided the world

00:08:17,419 --> 00:08:25,159
I render here does not have a curve it's

00:08:21,860 --> 00:08:30,620
just flat and before the flat earthers

00:08:25,159 --> 00:08:33,349
rig choice to much I'm actually for the

00:08:30,620 --> 00:08:37,729
ground tiles with Mercator projection I

00:08:33,349 --> 00:08:39,500
actually calculate the size of the of

00:08:37,729 --> 00:08:47,500
the tile Mercator projection has this

00:08:39,500 --> 00:08:49,820
nice habit of the the closer the I

00:08:47,500 --> 00:08:52,280
always have a problem with with

00:08:49,820 --> 00:08:57,440
which lines on the on the globe are

00:08:52,280 --> 00:08:59,300
which but the smaller the the area gets

00:08:57,440 --> 00:09:01,040
in one direction the smaller details get

00:08:59,300 --> 00:09:03,710
in the other direction as well so you

00:09:01,040 --> 00:09:05,630
always have square tiles also in size on

00:09:03,710 --> 00:09:07,580
the ground but I'm taking the actual

00:09:05,630 --> 00:09:10,640
size because the coordinate system is in

00:09:07,580 --> 00:09:12,890
meters so it actually fits correctly so

00:09:10,640 --> 00:09:16,940
I actually have to respect the globe

00:09:12,890 --> 00:09:19,760
even though my world is flat for the

00:09:16,940 --> 00:09:23,240
trees and buildings I take life data

00:09:19,760 --> 00:09:25,040
from the overpass API the tiles are not

00:09:23,240 --> 00:09:28,040
coming from the overpass API I actually

00:09:25,040 --> 00:09:30,740
take the standard tiles from

00:09:28,040 --> 00:09:33,320
OpenStreetMap through my own tile

00:09:30,740 --> 00:09:36,230
caching server - not that I have for

00:09:33,320 --> 00:09:39,050
other purposes - not tax OpenStreetMap

00:09:36,230 --> 00:09:40,880
too much in terms of traffic and then

00:09:39,050 --> 00:09:44,510
there's a camera and controller setup

00:09:40,880 --> 00:09:47,090
which is a is not a minimally built it's

00:09:44,510 --> 00:09:51,290
a static thing that's defined in the

00:09:47,090 --> 00:09:55,100
HTML you will see that and yes as I said

00:09:51,290 --> 00:09:59,420
before it's all built with a frame so I

00:09:55,100 --> 00:10:03,770
have mentioned a frame quite a lot what

00:09:59,420 --> 00:10:08,120
is it a frame actually is building on

00:10:03,770 --> 00:10:11,540
top a second layer on top of web we are

00:10:08,120 --> 00:10:14,900
there's a first layer which is three J's

00:10:11,540 --> 00:10:17,870
which is a JavaScript library library

00:10:14,900 --> 00:10:21,350
doing all kinds of 3d stuff on top of

00:10:17,870 --> 00:10:23,570
web we are but you still need to write a

00:10:21,350 --> 00:10:26,270
whole lot of JavaScript boilerplate to

00:10:23,570 --> 00:10:28,010
initialize scenes and whatever so if our

00:10:26,270 --> 00:10:31,190
inputs the second layer on it to make it

00:10:28,010 --> 00:10:33,500
that simple to work with that and it

00:10:31,190 --> 00:10:35,780
uses an entity component system which

00:10:33,500 --> 00:10:37,940
something game developers probably will

00:10:35,780 --> 00:10:39,770
know very well and anyone playing

00:10:37,940 --> 00:10:43,340
Minecraft will know because it's

00:10:39,770 --> 00:10:44,920
basically you have blocks and then which

00:10:43,340 --> 00:10:48,230
are the entities and then you have

00:10:44,920 --> 00:10:50,960
components which give properties to the

00:10:48,230 --> 00:10:55,130
those boxes the blue one wouldn't wanna

00:10:50,960 --> 00:10:58,610
steal one whatever same thing here in a

00:10:55,130 --> 00:11:00,160
frame the first thing is you have

00:10:58,610 --> 00:11:03,610
everything

00:11:00,160 --> 00:11:07,330
that is the NE a-frame stuff enveloped

00:11:03,610 --> 00:11:09,180
in a scene tag and then you have your

00:11:07,330 --> 00:11:11,470
entities inside there there's a few

00:11:09,180 --> 00:11:13,390
specialized entities there's an e -

00:11:11,470 --> 00:11:15,220
entity which is a general entity and

00:11:13,390 --> 00:11:17,710
there's some specialized that you see

00:11:15,220 --> 00:11:20,710
here that's just a very simple hello

00:11:17,710 --> 00:11:24,370
world thing that just shows how this

00:11:20,710 --> 00:11:27,370
structure works you have a sphere cube

00:11:24,370 --> 00:11:31,420
cylinder a plane and the sky is actually

00:11:27,370 --> 00:11:35,200
just a fear that goes all around you and

00:11:31,420 --> 00:11:37,540
you see the inner side of it you even

00:11:35,200 --> 00:11:40,660
can do simple animations just with HTML

00:11:37,540 --> 00:11:42,640
tags so for those people who just want

00:11:40,660 --> 00:11:45,070
to start up with stuff and don't know

00:11:42,640 --> 00:11:48,310
much JavaScript at all even they can

00:11:45,070 --> 00:11:50,980
just use that but as a JavaScript

00:11:48,310 --> 00:11:56,920
developers which you all are you can

00:11:50,980 --> 00:11:59,410
actually use all those Dom entries the

00:11:56,920 --> 00:12:02,050
in the Dom tree and can many play them

00:11:59,410 --> 00:12:03,940
with JavaScript and then you can even go

00:12:02,050 --> 00:12:05,530
to the to the three-tier stuff

00:12:03,940 --> 00:12:09,430
underneath if you want to do more

00:12:05,530 --> 00:12:13,870
specialized things the components are

00:12:09,430 --> 00:12:18,460
just HTML attributes with some values in

00:12:13,870 --> 00:12:26,440
the inside of them so how does that map

00:12:18,460 --> 00:12:27,910
to my example first I'll tell you a

00:12:26,440 --> 00:12:32,560
little bit about the structure I built

00:12:27,910 --> 00:12:34,270
there the index.html has of course the

00:12:32,560 --> 00:12:37,030
includes for the JavaScript to start

00:12:34,270 --> 00:12:38,920
dialog and then this general thing you

00:12:37,030 --> 00:12:42,310
just saw with the scene and the static

00:12:38,920 --> 00:12:45,580
stuff which is the camera rig and some

00:12:42,310 --> 00:12:48,610
basically grouping entities where the

00:12:45,580 --> 00:12:51,790
dynamic parts will be put in then

00:12:48,610 --> 00:12:54,040
there's a map chess which is my main

00:12:51,790 --> 00:12:56,980
thing with variables load handler and

00:12:54,040 --> 00:13:00,400
the function for fetching just the

00:12:56,980 --> 00:13:03,280
general function conversions are boring

00:13:00,400 --> 00:13:06,880
just mathematical stuff coordinate

00:13:03,280 --> 00:13:09,070
conversions then there's position limit

00:13:06,880 --> 00:13:13,089
GS which is an iframe component that I

00:13:09,070 --> 00:13:13,920
wrote myself to limit Y we can go to fly

00:13:13,089 --> 00:13:17,620
because

00:13:13,920 --> 00:13:20,410
with the first variant I did with the

00:13:17,620 --> 00:13:23,680
WASD Keys you could actually fly through

00:13:20,410 --> 00:13:24,730
the ground and go underneath and that

00:13:23,680 --> 00:13:26,590
didn't look too good

00:13:24,730 --> 00:13:29,050
so I wrote a component that actually

00:13:26,590 --> 00:13:31,780
made stats and we'll take a short look

00:13:29,050 --> 00:13:34,390
at that because it's a nice example for

00:13:31,780 --> 00:13:36,580
a component and then there's the three

00:13:34,390 --> 00:13:41,650
javascript files for the three types of

00:13:36,580 --> 00:13:45,730
objects buildings styles and trees it's

00:13:41,650 --> 00:13:49,060
available on github Cairo - 8 - 80 ISM

00:13:45,730 --> 00:13:51,660
myself and just called VR map there's a

00:13:49,060 --> 00:13:54,490
link if you go to VR map Care authority

00:13:51,660 --> 00:13:57,700
where the example lives you'll find a

00:13:54,490 --> 00:13:59,950
github link there as well and actually

00:13:57,700 --> 00:14:02,920
you know we will not go to the questions

00:13:59,950 --> 00:14:08,040
yet we will actually take a look at the

00:14:02,920 --> 00:14:11,800
actual code because that's more fun so

00:14:08,040 --> 00:14:14,380
index.html the most interesting thing

00:14:11,800 --> 00:14:15,880
here in the head you have a lot of

00:14:14,380 --> 00:14:18,130
JavaScript includes but the most

00:14:15,880 --> 00:14:20,380
interesting one is this one that's

00:14:18,130 --> 00:14:25,810
actually the include of a frame itself

00:14:20,380 --> 00:14:30,820
and then underneath it you have just

00:14:25,810 --> 00:14:33,730
through a CDN link you have some a-frame

00:14:30,820 --> 00:14:36,310
components that I'm loading most

00:14:33,730 --> 00:14:38,140
importantly for all the things you do

00:14:36,310 --> 00:14:40,540
with the controllers and with the

00:14:38,140 --> 00:14:43,030
keyboard controllers and to be able to

00:14:40,540 --> 00:14:48,610
even you fly around with a touchscreen

00:14:43,030 --> 00:14:51,610
and stuff like that awesome - chill

00:14:48,610 --> 00:14:53,050
Jason converts but I get the XML I get

00:14:51,610 --> 00:14:55,750
from the overpass API

00:14:53,050 --> 00:14:58,870
- Jason which is more convenient to work

00:14:55,750 --> 00:15:02,980
with in JavaScript and then there's

00:14:58,870 --> 00:15:06,120
includes for my JavaScript very boring

00:15:02,980 --> 00:15:08,680
intro dialogue and here's the fun stuff

00:15:06,120 --> 00:15:12,310
so it's an a scene with a just a

00:15:08,680 --> 00:15:14,500
background color so that the sky is in

00:15:12,310 --> 00:15:19,540
this case or not actually a sphere but

00:15:14,500 --> 00:15:23,700
it's just blue all around you the ground

00:15:19,540 --> 00:15:27,089
is a is it just a workaround thing for

00:15:23,700 --> 00:15:29,819
for the teleport controls the

00:15:27,089 --> 00:15:34,499
that do not work with planes so I had to

00:15:29,819 --> 00:15:38,730
introduce a box for them and here's the

00:15:34,499 --> 00:15:39,269
the general in groupings for the dynamic

00:15:38,730 --> 00:15:41,759
stuff

00:15:39,269 --> 00:15:47,100
the tiles and items is both tracing

00:15:41,759 --> 00:15:51,089
buildings the camera rig is also an

00:15:47,100 --> 00:15:53,670
entity that sits starts off at position

00:15:51,089 --> 00:16:02,459
zero zero zero so all the coordinates

00:15:53,670 --> 00:16:04,949
are in meters and triples of numbers on

00:16:02,459 --> 00:16:09,709
this I put the movement controls which

00:16:04,949 --> 00:16:13,860
will allow me to fly around and I think

00:16:09,709 --> 00:16:17,160
yeah it also tells me where the camera

00:16:13,860 --> 00:16:19,559
is and here's how I use my own component

00:16:17,160 --> 00:16:23,639
for limiting the position so the whole

00:16:19,559 --> 00:16:25,470
camera rig is what's moved around the

00:16:23,639 --> 00:16:30,209
camera itself is basically where your

00:16:25,470 --> 00:16:32,509
head is in in VR and then the camera rig

00:16:30,209 --> 00:16:35,550
also has entities for the controller's

00:16:32,509 --> 00:16:38,519
to be able to display them and the whole

00:16:35,550 --> 00:16:41,399
rig is moving around and I give it a

00:16:38,519 --> 00:16:45,449
position limit on the y axis so the Y is

00:16:41,399 --> 00:16:48,600
actually the vertical axis X is the

00:16:45,449 --> 00:16:55,769
horizontal axis and Z is the depth axis

00:16:48,600 --> 00:16:58,889
and I limit Y to zero and as a minimum

00:16:55,769 --> 00:17:00,990
and I actually put in a maximum of 100

00:16:58,889 --> 00:17:06,539
meters but that's just because I felt

00:17:00,990 --> 00:17:09,959
it's nice to have it in the example as I

00:17:06,539 --> 00:17:11,579
said there's a camera that's an entity

00:17:09,959 --> 00:17:15,329
with a camera component which is the

00:17:11,579 --> 00:17:18,799
head and the teleport controls if you

00:17:15,329 --> 00:17:24,059
want to put something on multiple tags

00:17:18,799 --> 00:17:26,459
you can define in a mix in and all those

00:17:24,059 --> 00:17:29,669
components that are on the end with an

00:17:26,459 --> 00:17:33,860
ID all those components are applied

00:17:29,669 --> 00:17:37,160
everywhere you say mixing equals that ID

00:17:33,860 --> 00:17:45,350
which makes it easier for

00:17:37,160 --> 00:17:48,080
for coding and I'll just we'll just take

00:17:45,350 --> 00:17:50,180
a look at two other source files for for

00:17:48,080 --> 00:17:53,060
a little bit I don't want to go too long

00:17:50,180 --> 00:17:56,120
here I just want to show you how you

00:17:53,060 --> 00:17:58,580
define a component for a frame this is a

00:17:56,120 --> 00:18:00,860
very simple component for the position

00:17:58,580 --> 00:18:03,590
limit i actually defined it so you can

00:18:00,860 --> 00:18:06,290
do minimum maximum for all three axes

00:18:03,590 --> 00:18:09,110
but I'm only using the y axis in this

00:18:06,290 --> 00:18:11,930
example I might actually submit that as

00:18:09,110 --> 00:18:17,930
a general component I didn't get around

00:18:11,930 --> 00:18:23,200
to that yet schema says which properties

00:18:17,930 --> 00:18:25,850
it supports with types and defaults and

00:18:23,200 --> 00:18:28,330
tick you can actually have an

00:18:25,850 --> 00:18:30,710
initialization function if you need that

00:18:28,330 --> 00:18:37,790
but in this case I don't need any

00:18:30,710 --> 00:18:42,040
initialization tick is called at every

00:18:37,790 --> 00:18:47,180
time anything is is moving in the scene

00:18:42,040 --> 00:18:49,610
up to the frame rate that you have which

00:18:47,180 --> 00:18:54,230
on the headset is 90 frames per second

00:18:49,610 --> 00:18:57,650
usually and so you should only do very

00:18:54,230 --> 00:19:00,650
short things in a tick function nothing

00:18:57,650 --> 00:19:02,900
that takes long to calculate and in this

00:19:00,650 --> 00:19:08,150
case it's very simple you see it just

00:19:02,900 --> 00:19:11,540
says if the X min is defined and here I

00:19:08,150 --> 00:19:13,820
go down to this is the 3gs object

00:19:11,540 --> 00:19:17,060
underneath my help check the object 3d

00:19:13,820 --> 00:19:19,070
and then I go to the x position from it

00:19:17,060 --> 00:19:22,990
because it's more performant

00:19:19,070 --> 00:19:25,580
to query and manipulate the 3gs

00:19:22,990 --> 00:19:30,200
properties then to go to the Dom tree

00:19:25,580 --> 00:19:31,940
for it and I just say if it's smaller

00:19:30,200 --> 00:19:35,810
than my minimum then decided to remain

00:19:31,940 --> 00:19:41,630
names very simple to understand it's

00:19:35,810 --> 00:19:44,060
more interesting to to deconstruct how I

00:19:41,630 --> 00:19:46,070
go through the to the three TS stuff

00:19:44,060 --> 00:19:48,470
than what I'm actually doing because

00:19:46,070 --> 00:19:49,940
that's what you would do as well and

00:19:48,470 --> 00:19:53,639
that's everything it does

00:19:49,940 --> 00:19:58,559
but it's a very nice and small example

00:19:53,639 --> 00:20:03,950
of how you you do a component and I'll

00:19:58,559 --> 00:20:06,360
take a look at the buildings at the end

00:20:03,950 --> 00:20:10,639
we can always go to more depth

00:20:06,360 --> 00:20:14,690
if personally if you want to but I think

00:20:10,639 --> 00:20:20,399
not too short on time anyhow so

00:20:14,690 --> 00:20:23,730
buildings this is how you query overpass

00:20:20,399 --> 00:20:29,340
we I will not go into that this is how

00:20:23,730 --> 00:20:31,529
you do a query on on OpenStreetMap which

00:20:29,340 --> 00:20:34,379
I just hand over to my effect from

00:20:31,529 --> 00:20:37,590
overpass function function and I already

00:20:34,379 --> 00:20:39,690
get the CHEO jason back because i put

00:20:37,590 --> 00:20:43,019
that into my fetch from overpass

00:20:39,690 --> 00:20:46,350
function the conversion and for every

00:20:43,019 --> 00:20:51,359
feature in the jason i call at building

00:20:46,350 --> 00:20:53,850
and I actually have a back here the

00:20:51,359 --> 00:20:59,519
error message should be couldn't draw a

00:20:53,850 --> 00:21:03,769
building here copy and paste yeah at

00:20:59,519 --> 00:21:07,350
building I returned a promise so that

00:21:03,769 --> 00:21:09,690
it's actually paints everything is in

00:21:07,350 --> 00:21:15,869
Cronus Lee and stuff other stuff can

00:21:09,690 --> 00:21:18,559
happen and I create an entity put a

00:21:15,869 --> 00:21:18,559
class on it

00:21:18,899 --> 00:21:29,909
and calculate the points and just put

00:21:25,529 --> 00:21:35,249
that in the geometry component or

00:21:29,909 --> 00:21:39,899
attribute with primitive building and I

00:21:35,249 --> 00:21:43,559
actually register a geometry which just

00:21:39,899 --> 00:21:47,669
works the same way as I defined a

00:21:43,559 --> 00:21:50,029
component I can define a geometry and

00:21:47,669 --> 00:21:54,210
therefore have different geometric

00:21:50,029 --> 00:21:57,059
objects in my scene and the geometry

00:21:54,210 --> 00:22:01,559
building actually gets all the other

00:21:57,059 --> 00:22:03,580
points and the inner paths the ugly

00:22:01,559 --> 00:22:07,360
thing there is that I have to actually

00:22:03,580 --> 00:22:11,200
our strings but the nice thing about it

00:22:07,360 --> 00:22:13,990
is that I abstracted to a degree that we

00:22:11,200 --> 00:22:16,890
can actually write some HTML and put

00:22:13,990 --> 00:22:23,160
stuff in and you can also use the same

00:22:16,890 --> 00:22:26,440
inner workings of all this you can even

00:22:23,160 --> 00:22:30,460
take a rendered scene from OpenStreetMap

00:22:26,440 --> 00:22:34,390
data and serialize it into actual HTML

00:22:30,460 --> 00:22:35,770
that you can load at any time I didn't

00:22:34,390 --> 00:22:42,220
implement that but it's possible that

00:22:35,770 --> 00:22:45,280
way and the very happen init function so

00:22:42,220 --> 00:22:47,970
something you could use an init function

00:22:45,280 --> 00:22:52,000
in a component as an initialization

00:22:47,970 --> 00:22:55,380
function and here the unit function does

00:22:52,000 --> 00:22:58,570
all the heavy work it builds up three

00:22:55,380 --> 00:23:05,710
vectors a three shape and then the three

00:22:58,570 --> 00:23:07,930
shape is extruded to a height so nice

00:23:05,710 --> 00:23:09,700
fun a function of the three shape is

00:23:07,930 --> 00:23:11,860
that it you can actually specify holes

00:23:09,700 --> 00:23:17,650
so I did get that functionality for free

00:23:11,860 --> 00:23:20,770
to have buildings with holes and then I

00:23:17,650 --> 00:23:23,410
can extrude that shape even with the

00:23:20,770 --> 00:23:25,000
holes to a certain height putting roofs

00:23:23,410 --> 00:23:29,920
on it and so on would be more difficult

00:23:25,000 --> 00:23:32,530
but just the extruding it is very easy

00:23:29,920 --> 00:23:35,560
here and then I have to do some strange

00:23:32,530 --> 00:23:39,160
rotating to actually put it in the right

00:23:35,560 --> 00:23:41,920
place and I didn't completely understand

00:23:39,160 --> 00:23:48,640
why I didn't need to do that but I found

00:23:41,920 --> 00:23:51,250
out it worked and yeah that's that's

00:23:48,640 --> 00:23:54,580
basically all I wanted to show here I

00:23:51,250 --> 00:24:00,070
think we can go to two questions and we

00:23:54,580 --> 00:24:03,910
can also talk about it in in private

00:24:00,070 --> 00:24:10,210
afterwards if anyone wants to actually

00:24:03,910 --> 00:24:13,510
experience something of this in VR and

00:24:10,210 --> 00:24:16,240
we have the time after all the talks and

00:24:13,510 --> 00:24:16,800
discussions I can actually put up the

00:24:16,240 --> 00:24:19,170
via

00:24:16,800 --> 00:24:21,870
our stuff but only if it's if it's

00:24:19,170 --> 00:24:25,260
wanted it's it's put up in about five to

00:24:21,870 --> 00:24:28,890
ten minutes but I have it with me if if

00:24:25,260 --> 00:24:32,859
anyone wants to that's about it

00:24:28,890 --> 00:24:32,859

YouTube URL: https://www.youtube.com/watch?v=T9ap2lDPnJw


