Title: JS Roundabout, From React to Preact - The Quest for the 50KB App, February 2018
Publication date: 2018-02-10
Playlist: The JS Roundabout
Description: 
	Independent Front End Architect & Mentor at Agate.one, gives a talk entitled 'From React to Preact - The Quest for the 50kb App' which will provide a detailed comparison of React and Preact, outline the differences between the two, and provide further details on when to use Preact and Preact's community and tools.

More about The JS Roundabout: https://www.meetup.com/The-JS-Roundabout/
Captions: 
	00:00:00,030 --> 00:00:03,720
so today I'm going to talk to you a

00:00:01,140 --> 00:00:06,750
little bit about my journey into pre-act

00:00:03,720 --> 00:00:09,150
so I am currently developing a really

00:00:06,750 --> 00:00:11,250
really small widget that he's gonna

00:00:09,150 --> 00:00:13,380
leave in a lot of websites so I had to

00:00:11,250 --> 00:00:15,780
find a way to make it really small so

00:00:13,380 --> 00:00:17,940
after I saw that uber was announcing

00:00:15,780 --> 00:00:20,060
that they did their mobile website using

00:00:17,940 --> 00:00:24,090
pre-act and it had only 50 kilobytes I

00:00:20,060 --> 00:00:26,279
thought it was ideal actually my widget

00:00:24,090 --> 00:00:28,949
now has only 25 kilobytes so it's even

00:00:26,279 --> 00:00:31,920
smaller than I thought but we'll talk a

00:00:28,949 --> 00:00:35,610
lot about sizes now okay so who am i I

00:00:31,920 --> 00:00:37,380
mean I I basically got into web

00:00:35,610 --> 00:00:39,390
development for from founding my

00:00:37,380 --> 00:00:43,340
startups I founded a couple of

00:00:39,390 --> 00:00:45,780
e-commerce and entertainment startups I

00:00:43,340 --> 00:00:47,789
started around 2011 and since then I

00:00:45,780 --> 00:00:50,219
pretty much coded everyday it's just

00:00:47,789 --> 00:00:52,199
really addictive I currently call myself

00:00:50,219 --> 00:00:54,719
a front-end architect and the reason for

00:00:52,199 --> 00:00:57,030
that is what I most like to do we know

00:00:54,719 --> 00:00:58,890
what I most do is set up architectures

00:00:57,030 --> 00:01:00,920
for the front-end that scale and that

00:00:58,890 --> 00:01:04,129
junior developers enjoy working with

00:01:00,920 --> 00:01:05,280
yeah it happens it can happen really

00:01:04,129 --> 00:01:07,200
anyway

00:01:05,280 --> 00:01:09,869
but that's not about what this talk is

00:01:07,200 --> 00:01:12,450
going to be about I'm also a mentor for

00:01:09,869 --> 00:01:15,180
people learning to code or launching

00:01:12,450 --> 00:01:17,790
startups so if you have any questions

00:01:15,180 --> 00:01:20,340
about this later on feel free to hit me

00:01:17,790 --> 00:01:22,020
up on Twitter or anywhere like yeah I

00:01:20,340 --> 00:01:24,720
really like to take questions around

00:01:22,020 --> 00:01:27,060
this recently I've been very interested

00:01:24,720 --> 00:01:28,350
in AI in blockchain because I think it's

00:01:27,060 --> 00:01:30,630
the technologies that are going to

00:01:28,350 --> 00:01:32,790
mostly impact our lives in the recent

00:01:30,630 --> 00:01:34,439
future and I'm very disappointed with

00:01:32,790 --> 00:01:38,100
the lack of sci-fi movies but I think

00:01:34,439 --> 00:01:40,409
most most of us are so what I'm going to

00:01:38,100 --> 00:01:42,689
talk about I'm gonna tell you when I

00:01:40,409 --> 00:01:45,000
think we should use pre-act in my

00:01:42,689 --> 00:01:47,310
personal opinion and how different it is

00:01:45,000 --> 00:01:49,079
from react I'm gonna tell you a little

00:01:47,310 --> 00:01:51,509
bit about the communities and tools from

00:01:49,079 --> 00:01:54,829
my experience and I'm gonna tell you

00:01:51,509 --> 00:01:58,219
what you should not do in pre-act so

00:01:54,829 --> 00:02:00,780
when to use pre-act in my opinion

00:01:58,219 --> 00:02:02,399
pre-act should be used when you're

00:02:00,780 --> 00:02:03,719
making really small websites like

00:02:02,399 --> 00:02:05,100
imagine you're making a website in your

00:02:03,719 --> 00:02:08,520
site oh that's really simple I should

00:02:05,100 --> 00:02:09,259
just do jQuery don't use jQuery use use

00:02:08,520 --> 00:02:12,510
pre-act

00:02:09,259 --> 00:02:13,530
because yeah like you you know if you

00:02:12,510 --> 00:02:15,720
know how to use react

00:02:13,530 --> 00:02:17,160
how to use pre-act and its really small

00:02:15,720 --> 00:02:21,510
if you want to keep the website small it

00:02:17,160 --> 00:02:23,490
renders incredibly fast and also like

00:02:21,510 --> 00:02:24,150
yeah the reason why I'm using it for

00:02:23,490 --> 00:02:26,040
embeddable

00:02:24,150 --> 00:02:29,340
widgets because you know you're going to

00:02:26,040 --> 00:02:32,610
give an overhead to your clients so the

00:02:29,340 --> 00:02:35,930
smaller it is the better and now to

00:02:32,610 --> 00:02:40,530
really show you some data about why

00:02:35,930 --> 00:02:43,530
pre-act is small we can see here this

00:02:40,530 --> 00:02:45,780
little comparison I did on Sunday and as

00:02:43,530 --> 00:02:47,940
we can see this is just like this is a

00:02:45,780 --> 00:02:50,280
just a really they're all really boring

00:02:47,940 --> 00:02:53,130
apps but this is just like a little HTML

00:02:50,280 --> 00:02:57,090
file that just has a div and this inside

00:02:53,130 --> 00:02:57,930
or an h1 or something and as you can see

00:02:57,090 --> 00:03:00,030
there's nothing

00:02:57,930 --> 00:03:02,489
so no kilobytes just this and it

00:03:00,030 --> 00:03:06,540
basically renders around a bit after two

00:03:02,489 --> 00:03:09,120
seconds this is using slow 3G which so

00:03:06,540 --> 00:03:11,580
that it amplifies the effect so it

00:03:09,120 --> 00:03:12,870
renders a bit before three seconds and

00:03:11,580 --> 00:03:15,420
we'd pre-act

00:03:12,870 --> 00:03:19,140
this is the pre-act right here and it

00:03:15,420 --> 00:03:20,760
has only 9.6 kilobytes and we'd create

00:03:19,140 --> 00:03:22,890
oh sorry i forgot to tell you guys

00:03:20,760 --> 00:03:25,590
something this is rendered this is

00:03:22,890 --> 00:03:28,230
generated with pre axial I and this is

00:03:25,590 --> 00:03:30,329
rent generated with create react app

00:03:28,230 --> 00:03:33,989
they are the most you see allies for

00:03:30,329 --> 00:03:35,820
both the the frameworks and what I did

00:03:33,989 --> 00:03:37,890
is I removed all the routing and I

00:03:35,820 --> 00:03:41,970
removed all the CSS to try and make it

00:03:37,890 --> 00:03:44,190
as similar as I could so yeah we'd react

00:03:41,970 --> 00:03:46,260
as when you start a new project in react

00:03:44,190 --> 00:03:48,870
you you immediately come with 112

00:03:46,260 --> 00:03:51,359
kilobytes which again is completely okay

00:03:48,870 --> 00:03:54,840
and I don't think that all apps have to

00:03:51,359 --> 00:03:56,850
be incredibly tiny but yes it is true

00:03:54,840 --> 00:03:58,380
you start with nine kilobytes in in

00:03:56,850 --> 00:04:02,519
pre-act so that's really really

00:03:58,380 --> 00:04:05,220
interesting how smaller it can be so and

00:04:02,519 --> 00:04:06,239
how different is is it from react which

00:04:05,220 --> 00:04:08,010
is actually what I'm here to talk about

00:04:06,239 --> 00:04:12,320
and what I have to tell you is that it's

00:04:08,010 --> 00:04:16,919
not the the syntax is exactly the same

00:04:12,320 --> 00:04:20,280
because what basically pre-act pre-act

00:04:16,919 --> 00:04:21,959
does is it it uses most of what reactor

00:04:20,280 --> 00:04:23,640
ID has but it strips away a lot of

00:04:21,959 --> 00:04:26,789
bindings and use these native bindings

00:04:23,640 --> 00:04:29,330
from the browser so yeah it's it's

00:04:26,789 --> 00:04:29,330
really similar

00:04:29,720 --> 00:04:35,030
so but even though it is really really

00:04:32,580 --> 00:04:38,100
similar there are actually some small

00:04:35,030 --> 00:04:39,960
let me say this if you take a react app

00:04:38,100 --> 00:04:42,240
and put it into pre-act it's pretty much

00:04:39,960 --> 00:04:43,860
gonna work however there are some things

00:04:42,240 --> 00:04:45,840
that after that you can do that are very

00:04:43,860 --> 00:04:48,180
interesting like for example you can use

00:04:45,840 --> 00:04:50,570
class again which is something I never

00:04:48,180 --> 00:04:54,720
understood why I react to get out and

00:04:50,570 --> 00:04:57,990
you can pass props and state directly

00:04:54,720 --> 00:04:59,670
into your render function so if you see

00:04:57,990 --> 00:05:01,680
I have here the state and I don't have

00:04:59,670 --> 00:05:03,390
to do this dot props or this dot state I

00:05:01,680 --> 00:05:05,100
can just pass them in like this and

00:05:03,390 --> 00:05:07,530
they're immediately accessible and it

00:05:05,100 --> 00:05:10,170
makes the code a bit cleaner in my

00:05:07,530 --> 00:05:14,850
opinion so that's like a little plus it

00:05:10,170 --> 00:05:18,120
has but yeah it's basically react now

00:05:14,850 --> 00:05:22,860
about the communities that I experienced

00:05:18,120 --> 00:05:25,320
I interacted a lot with this three that

00:05:22,860 --> 00:05:29,550
we see here pre act proxy a lion Redux

00:05:25,320 --> 00:05:32,490
zero and I gotta say they are as active

00:05:29,550 --> 00:05:35,640
and proactive as react and I was angular

00:05:32,490 --> 00:05:38,610
and honestly any other main front-end

00:05:35,640 --> 00:05:43,140
framework front-end the community at the

00:05:38,610 --> 00:05:45,900
moment and yeah they're quite good like

00:05:43,140 --> 00:05:49,080
I wouldn't I would say that in terms of

00:05:45,900 --> 00:05:50,870
community they're all quite good and now

00:05:49,080 --> 00:05:54,390
if you guys are going to be working with

00:05:50,870 --> 00:05:56,400
with the pre act one thing that I at

00:05:54,390 --> 00:05:58,740
least prioritize a lot when I work in

00:05:56,400 --> 00:06:01,680
pre act is making everything really

00:05:58,740 --> 00:06:04,130
small so with this in mind I would

00:06:01,680 --> 00:06:07,169
recommend something for example like

00:06:04,130 --> 00:06:09,240
import cost 4 vs code which kind of

00:06:07,169 --> 00:06:11,580
makes you really neurotic about having

00:06:09,240 --> 00:06:12,870
everything really small which I don't

00:06:11,580 --> 00:06:14,490
know like I kind of made this my

00:06:12,870 --> 00:06:16,800
objective when I was using pre acts just

00:06:14,490 --> 00:06:18,750
make sure everything is really small so

00:06:16,800 --> 00:06:21,450
at the same time using bundle explorers

00:06:18,750 --> 00:06:24,030
all the time all the time tests the size

00:06:21,450 --> 00:06:25,740
of things because you know it's really

00:06:24,030 --> 00:06:28,320
easy to import to library and then it's

00:06:25,740 --> 00:06:30,300
bigger than then everything you even

00:06:28,320 --> 00:06:33,330
have their before including the the

00:06:30,300 --> 00:06:34,620
framework code your own codes and

00:06:33,330 --> 00:06:36,419
another thing that is interesting to

00:06:34,620 --> 00:06:38,400
note is that you can use react dev tools

00:06:36,419 --> 00:06:40,560
so like pretty much everything that

00:06:38,400 --> 00:06:41,340
works with react also works with pre-act

00:06:40,560 --> 00:06:45,020
so

00:06:41,340 --> 00:06:47,390
that's also a really nice thing to start

00:06:45,020 --> 00:06:51,330
one last thing I would like to tell you

00:06:47,390 --> 00:06:53,690
is is show you

00:06:51,330 --> 00:06:55,710
oh no wait sorry okay when things first

00:06:53,690 --> 00:06:58,860
another thing I have to tell you is

00:06:55,710 --> 00:07:01,230
about pre act CLI how amazing pre-act

00:06:58,860 --> 00:07:03,960
CLI is in getting you started in a

00:07:01,230 --> 00:07:06,080
project so I'm sure that many of you had

00:07:03,960 --> 00:07:08,280
have already heard about lazy loading

00:07:06,080 --> 00:07:11,460
basically this is the ultimate form of

00:07:08,280 --> 00:07:14,930
lazy loading I'm not going to get into

00:07:11,460 --> 00:07:17,820
too much detail about how it happens but

00:07:14,930 --> 00:07:19,680
the community has from my and

00:07:17,820 --> 00:07:21,090
understanding pretty much agree that

00:07:19,680 --> 00:07:23,790
this is the best form to do lazy loading

00:07:21,090 --> 00:07:24,780
and when you use pre act CLI it just

00:07:23,790 --> 00:07:26,490
works out of the box

00:07:24,780 --> 00:07:27,540
without any configuration you actually

00:07:26,490 --> 00:07:30,180
don't need to look at the configuration

00:07:27,540 --> 00:07:31,710
files at all it just it just works I

00:07:30,180 --> 00:07:34,080
mean of course you need you're gonna

00:07:31,710 --> 00:07:35,370
have to be aware of what not to run if

00:07:34,080 --> 00:07:39,300
you the code is going to run on this on

00:07:35,370 --> 00:07:41,940
the server but besides that it it works

00:07:39,300 --> 00:07:44,010
really well I was I was really impressed

00:07:41,940 --> 00:07:45,900
with this but actually for my use case I

00:07:44,010 --> 00:07:49,260
did not have to use this because I I'm

00:07:45,900 --> 00:07:50,700
just serving I actually have the widget

00:07:49,260 --> 00:07:54,510
and a super small app and the super

00:07:50,700 --> 00:07:56,010
small app I serve from CDN but anyway

00:07:54,510 --> 00:07:58,740
this is really interesting and I think

00:07:56,010 --> 00:08:01,440
for anybody that like server-side

00:07:58,740 --> 00:08:03,930
rendering they you have this from the

00:08:01,440 --> 00:08:08,010
beginning and this also works with from

00:08:03,930 --> 00:08:11,730
delivering as a static website okay so

00:08:08,010 --> 00:08:14,250
now what not to do in pre-act so

00:08:11,730 --> 00:08:16,740
basically pre-act is react so the best

00:08:14,250 --> 00:08:20,220
practices and and bad practices that

00:08:16,740 --> 00:08:22,130
that go in in react also come here so

00:08:20,220 --> 00:08:24,570
the one thing that I would add and

00:08:22,130 --> 00:08:27,390
probably understood this is a bit my

00:08:24,570 --> 00:08:30,060
personal opinion but is to not import

00:08:27,390 --> 00:08:31,800
large large libraries I I made up this

00:08:30,060 --> 00:08:34,080
rule of thumb of 10 kilobytes and the

00:08:31,800 --> 00:08:36,630
reason for that is that pre-act itself

00:08:34,080 --> 00:08:40,440
the thing you get when you render pre of

00:08:36,630 --> 00:08:42,300
your app from pre act CLI is around 9

00:08:40,440 --> 00:08:43,950
kilobytes and I don't know but I feel

00:08:42,300 --> 00:08:46,350
uncomfortable having a library that it's

00:08:43,950 --> 00:08:49,530
bigger than the framework so I just did

00:08:46,350 --> 00:08:52,860
that rule and I'm going to show you here

00:08:49,530 --> 00:08:55,170
an example I ran into so I cannot I

00:08:52,860 --> 00:08:57,060
cannot do front end without Redux

00:08:55,170 --> 00:08:59,519
just that way it doesn't scale for sure

00:08:57,060 --> 00:09:01,230
and I would relax it's really really

00:08:59,519 --> 00:09:06,000
easy to work with in scale so I had to

00:09:01,230 --> 00:09:09,420
use Redux so I initially try to use pre

00:09:06,000 --> 00:09:11,910
acrylics and what I noticed is that it

00:09:09,420 --> 00:09:14,070
basically adds 50 kilobytes even though

00:09:11,910 --> 00:09:16,680
it's pre-act Redux and it comes from the

00:09:14,070 --> 00:09:19,019
pre acts community I guess so this this

00:09:16,680 --> 00:09:20,730
little thing here is pre act and this is

00:09:19,019 --> 00:09:23,250
pre act Redux this is like Redux and

00:09:20,730 --> 00:09:25,620
this is pre act Redux so like I was a

00:09:23,250 --> 00:09:27,870
bit shocked when I saw how much it it

00:09:25,620 --> 00:09:29,220
increases the size so then I went

00:09:27,870 --> 00:09:31,339
looking around I found I found this

00:09:29,220 --> 00:09:34,050
ladder library called redux zero and

00:09:31,339 --> 00:09:36,389
yeah with that it already only has seven

00:09:34,050 --> 00:09:39,269
point four which is less than the nine

00:09:36,389 --> 00:09:42,899
that pre-act has so I managed to

00:09:39,269 --> 00:09:44,130
maintain my app size really small and

00:09:42,899 --> 00:09:47,279
yeah and this is how I managed to

00:09:44,130 --> 00:09:49,860
achieve now only 25 kilobytes for a

00:09:47,279 --> 00:09:53,760
widget which is smaller than ubers so

00:09:49,860 --> 00:09:55,230
yeah that's awesome but yeah I'm sure

00:09:53,760 --> 00:09:57,240
there's there's this much more complex

00:09:55,230 --> 00:10:00,810
because like what ends up happening with

00:09:57,240 --> 00:10:02,430
with the pre-act is that and this is

00:10:00,810 --> 00:10:03,990
just like a little starter it has like

00:10:02,430 --> 00:10:05,430
this would be my code and there's

00:10:03,990 --> 00:10:07,980
nothing here it just has like a little

00:10:05,430 --> 00:10:10,050
bit saying boring app that's why it has

00:10:07,980 --> 00:10:12,600
nothing but what happens with pre-act is

00:10:10,050 --> 00:10:14,790
that as you start writing code your part

00:10:12,600 --> 00:10:17,160
really increases a lot you will start

00:10:14,790 --> 00:10:19,320
noticing how big your code can get and

00:10:17,160 --> 00:10:22,589
even if you have like no dependencies if

00:10:19,320 --> 00:10:24,360
you make your code really extensive your

00:10:22,589 --> 00:10:25,769
app is gonna get big which is another

00:10:24,360 --> 00:10:28,529
reason why I think it's okay to use

00:10:25,769 --> 00:10:30,230
react if you have like a complex up

00:10:28,529 --> 00:10:33,570
anyway

00:10:30,230 --> 00:10:35,459
so yeah this is this is what I had to

00:10:33,570 --> 00:10:37,230
tell you today

00:10:35,459 --> 00:10:39,690
however if you guys have any more

00:10:37,230 --> 00:10:42,120
questions I'm here to answer

00:10:39,690 --> 00:10:43,980
feel free maybe this can be a bit more

00:10:42,120 --> 00:10:49,319
interactive because I probably didn't

00:10:43,980 --> 00:10:51,540
cover a lot so yeah yes on my widget Oh

00:10:49,319 --> 00:10:53,579
sir yeah I didn't I didn't say that so

00:10:51,540 --> 00:10:56,639
I'm I'm working for this company called

00:10:53,579 --> 00:10:59,130
agate and basically we are solving micro

00:10:56,639 --> 00:11:01,170
payments for bloggers so imagine you

00:10:59,130 --> 00:11:04,350
have a blog and you want to create some

00:11:01,170 --> 00:11:06,089
premium blog posts and when your users

00:11:04,350 --> 00:11:09,420
go to those premium blog posts they can

00:11:06,089 --> 00:11:11,520
pay via our our app our little wait

00:11:09,420 --> 00:11:13,620
it prompts you to unlock the premium

00:11:11,520 --> 00:11:15,900
content and takes care of everything so

00:11:13,620 --> 00:11:17,279
yeah it's gonna be present in a lot of

00:11:15,900 --> 00:11:18,150
blogs and these blogs need to load

00:11:17,279 --> 00:11:29,010
really fast

00:11:18,150 --> 00:11:34,110
thus super tiny widget I I actually was

00:11:29,010 --> 00:11:35,910
not doing this shame on me I know but I

00:11:34,110 --> 00:11:37,890
also could say a lot about that

00:11:35,910 --> 00:11:39,720
I believe in testing everything you do

00:11:37,890 --> 00:11:42,660
in redux and everything else I don't

00:11:39,720 --> 00:11:44,670
anyway doesn't matter no I didn't but I

00:11:42,660 --> 00:11:46,800
know they have support from it for it so

00:11:44,670 --> 00:11:50,580
yeah if you if you're looking to test

00:11:46,800 --> 00:11:52,690
they they go well with tests okay I

00:11:50,580 --> 00:11:59,269
guess I guess this is thanks a lot guys

00:11:52,690 --> 00:11:59,269

YouTube URL: https://www.youtube.com/watch?v=xWMhqTy-4Og


