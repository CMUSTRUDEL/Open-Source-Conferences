Title: Interactivity in AMP without Javascript - JS Roundabout - June 2018
Publication date: 2018-06-18
Playlist: The JS Roundabout
Description: 
	Presented by Sanjay Purswani of Compare the Market.

Accelerated Mobile Pages (AMP) is a Google project that aims to make the web fast by default, and one of the ways it wants to do that is by restricting user-authored JavaScript. Itâ€™s gaining too much popularity and solves too many problems for us to ignore as front-enders and web-developers - Sanjay's talk will explore how we can achieve the same interactivity and personalisation without JavaScript.

_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,000 --> 00:00:03,780
hey everyone how's it going thank you

00:00:01,560 --> 00:00:05,400
all very much for coming I'm really

00:00:03,780 --> 00:00:07,140
excited I'm really happy to be here and

00:00:05,400 --> 00:00:09,389
to be able to talk about something that

00:00:07,140 --> 00:00:12,360
I feel really passionate about my name

00:00:09,389 --> 00:00:15,570
is Sanjay I am an engineer here and

00:00:12,360 --> 00:00:19,100
compare the market we've been using amp

00:00:15,570 --> 00:00:22,260
on my team for about 18 months or so

00:00:19,100 --> 00:00:23,939
that was when we sort of first dipped

00:00:22,260 --> 00:00:26,250
our toes in the pool so to speak you

00:00:23,939 --> 00:00:28,920
know we hard-coded some pages and we saw

00:00:26,250 --> 00:00:30,750
how things turned out and in the last

00:00:28,920 --> 00:00:32,369
six months or so we've been heavily

00:00:30,750 --> 00:00:33,090
invested in that we've been doing a lot

00:00:32,369 --> 00:00:36,510
of stuff with it

00:00:33,090 --> 00:00:38,190
now I'm personally more of a web

00:00:36,510 --> 00:00:41,640
developer and more of a front-end er I

00:00:38,190 --> 00:00:43,200
really love JavaScript and so when I was

00:00:41,640 --> 00:00:45,420
told you need to start getting good at

00:00:43,200 --> 00:00:47,430
amp and you can't write JavaScript in it

00:00:45,420 --> 00:00:50,520
I sort of freaked out I was like what do

00:00:47,430 --> 00:00:52,739
you mean but actually it's not so bad

00:00:50,520 --> 00:00:56,640
it's all good so that's what I'm here to

00:00:52,739 --> 00:00:59,789
talk to you about today now what does

00:00:56,640 --> 00:01:02,550
that amp is Google accelerated mobile

00:00:59,789 --> 00:01:04,110
pages project it's an open source

00:01:02,550 --> 00:01:06,330
project it's been around since the end

00:01:04,110 --> 00:01:08,790
of 2015 it's got something like 500

00:01:06,330 --> 00:01:11,820
contributors or so more than that three

00:01:08,790 --> 00:01:15,150
of whom on three of whom are on our team

00:01:11,820 --> 00:01:17,820
hello now what is the problem that

00:01:15,150 --> 00:01:19,950
they're trying to solve their motto is

00:01:17,820 --> 00:01:21,720
fast by default and their mantra is user

00:01:19,950 --> 00:01:24,570
first so they want to put the user first

00:01:21,720 --> 00:01:27,210
and sacrifice everything else the issue

00:01:24,570 --> 00:01:30,600
is where we're in a place now with web

00:01:27,210 --> 00:01:33,689
development where the average 3G mobile

00:01:30,600 --> 00:01:35,610
page loads in about 15 seconds according

00:01:33,689 --> 00:01:38,700
to Google and also according to Google

00:01:35,610 --> 00:01:41,040
the average user or more than half of

00:01:38,700 --> 00:01:43,380
our users will drop off will bounce

00:01:41,040 --> 00:01:44,880
after about three and a half seconds so

00:01:43,380 --> 00:01:47,610
that's a huge gap and that's a huge

00:01:44,880 --> 00:01:48,930
problem that's a problem in mobile and

00:01:47,610 --> 00:01:52,829
that's the problem that amp tried to

00:01:48,930 --> 00:01:54,570
solve now it says accelerated mobile

00:01:52,829 --> 00:01:56,340
pages and that's where the project

00:01:54,570 --> 00:01:58,530
started off it started to solve problems

00:01:56,340 --> 00:02:02,040
from mobile but quickly it graduated

00:01:58,530 --> 00:02:04,320
from that and now really its accelerated

00:02:02,040 --> 00:02:08,009
web pages but they haven't figured out

00:02:04,320 --> 00:02:11,520
how to change your name yet so what what

00:02:08,009 --> 00:02:12,810
is amp so there's two main components to

00:02:11,520 --> 00:02:13,900
it first and foremost there's the

00:02:12,810 --> 00:02:16,330
JavaScript side of

00:02:13,900 --> 00:02:17,769
so it's sort of like HTML components or

00:02:16,330 --> 00:02:21,250
web components if you're familiar with

00:02:17,769 --> 00:02:24,310
those we write it using HTML or we can

00:02:21,250 --> 00:02:27,280
call it an HTML so in order to use those

00:02:24,310 --> 00:02:29,110
we need a couple of things one we need

00:02:27,280 --> 00:02:30,819
the app runtime which is there at the

00:02:29,110 --> 00:02:32,319
very top service this is very small

00:02:30,819 --> 00:02:34,840
we're going to go more into depth into

00:02:32,319 --> 00:02:37,060
stuff the app runtime just runs in a web

00:02:34,840 --> 00:02:39,640
worker and provides a platform for all

00:02:37,060 --> 00:02:42,670
the other components to run on and also

00:02:39,640 --> 00:02:43,989
the platform to manage resource loading

00:02:42,670 --> 00:02:48,549
because that's the biggest problem

00:02:43,989 --> 00:02:51,190
really and as well as that runtime we

00:02:48,549 --> 00:02:52,690
also need individual live scripts to

00:02:51,190 --> 00:02:55,660
load in for each of the libraries that

00:02:52,690 --> 00:02:57,160
we want to use the second part of it is

00:02:55,660 --> 00:02:58,840
of course the amp HTML this is how we

00:02:57,160 --> 00:03:00,760
would actually write stuff so it looks

00:02:58,840 --> 00:03:04,510
just like custom HTML with like

00:03:00,760 --> 00:03:06,640
attributes and this and that with those

00:03:04,510 --> 00:03:10,659
two things alone we can sort retweet amp

00:03:06,640 --> 00:03:12,220
like a component library if you if you

00:03:10,659 --> 00:03:14,349
want to look at it that way you can use

00:03:12,220 --> 00:03:16,180
it in isolation you can combine it with

00:03:14,349 --> 00:03:17,799
all this stuff on your page to get good

00:03:16,180 --> 00:03:19,060
results from like components that we

00:03:17,799 --> 00:03:21,299
built with open source and being

00:03:19,060 --> 00:03:25,540
designed to be really really performant

00:03:21,299 --> 00:03:29,410
but now the next part of it is the amp

00:03:25,540 --> 00:03:30,970
cache here so if we go beyond using it

00:03:29,410 --> 00:03:33,010
like a component library and start your

00:03:30,970 --> 00:03:36,400
trip try to start to follow their actual

00:03:33,010 --> 00:03:38,349
rule their rules then we get what's

00:03:36,400 --> 00:03:40,870
called a valid amp page and then they'll

00:03:38,349 --> 00:03:44,079
agree Google will agree to host our page

00:03:40,870 --> 00:03:46,449
in their own CDN so they cache our pages

00:03:44,079 --> 00:03:48,220
and there's a little bit of more there's

00:03:46,449 --> 00:03:52,780
a little bit more magic that happens as

00:03:48,220 --> 00:03:54,699
well so now how what are those rules

00:03:52,780 --> 00:03:57,250
what are the restrictions so some of

00:03:54,699 --> 00:04:00,280
them are that we can't there's some HTML

00:03:57,250 --> 00:04:02,019
there's not allowed primarily things

00:04:00,280 --> 00:04:03,370
which will block loading of the page or

00:04:02,019 --> 00:04:05,470
things that want to load lots and lots

00:04:03,370 --> 00:04:08,829
of resources or things like all that

00:04:05,470 --> 00:04:11,109
could cause a reflows of the dom but

00:04:08,829 --> 00:04:15,609
there's also replacement components for

00:04:11,109 --> 00:04:18,549
things that do that there's a 50

00:04:15,609 --> 00:04:21,849
kilobytes CSS limit and all the CSS has

00:04:18,549 --> 00:04:24,190
to go into one custom style tag at the

00:04:21,849 --> 00:04:24,720
very top if we can't use important we

00:04:24,190 --> 00:04:28,380
can't

00:04:24,720 --> 00:04:30,690
target amp selectors by and large and

00:04:28,380 --> 00:04:32,190
there's some other rules as well and the

00:04:30,690 --> 00:04:34,260
real kicker is that we can't really

00:04:32,190 --> 00:04:35,460
write JavaScript but there's some there

00:04:34,260 --> 00:04:39,810
are some exceptions to this that we'll

00:04:35,460 --> 00:04:41,850
go into so why follow these rules what

00:04:39,810 --> 00:04:42,990
is the actual effect of this now

00:04:41,850 --> 00:04:46,500
I'm very sorry to disappoint you but

00:04:42,990 --> 00:04:48,480
this one slide is refusing to animate if

00:04:46,500 --> 00:04:50,100
it did animates I'm on the Left what you

00:04:48,480 --> 00:04:53,340
would see is one of our hand pages which

00:04:50,100 --> 00:04:54,720
loads on a 3G connection in about two

00:04:53,340 --> 00:04:57,840
two-and-a-half seconds which is pretty

00:04:54,720 --> 00:05:00,240
good on a 3G one of our comparable non

00:04:57,840 --> 00:05:02,220
amp pages in the same environment loads

00:05:00,240 --> 00:05:03,900
in about four to eight seconds which is

00:05:02,220 --> 00:05:06,330
not bad but that's a huge gap and that's

00:05:03,900 --> 00:05:07,710
the wrong side of that 50% bounce rate

00:05:06,330 --> 00:05:12,300
that we're trying to get on the right

00:05:07,710 --> 00:05:15,180
side of now in 4G conditions that amp

00:05:12,300 --> 00:05:16,620
page will load almost instantly I mean

00:05:15,180 --> 00:05:18,360
in less than a second we're talking

00:05:16,620 --> 00:05:20,460
about fraction of a second which is

00:05:18,360 --> 00:05:22,290
insanely good which is why we're so

00:05:20,460 --> 00:05:26,640
highly invested in it it's a tool that

00:05:22,290 --> 00:05:29,280
solves a certain problem for us so we

00:05:26,640 --> 00:05:31,680
talked about the cache now this is this

00:05:29,280 --> 00:05:34,500
is one of this is one half of the magic

00:05:31,680 --> 00:05:36,540
so Google will cache our pages on their

00:05:34,500 --> 00:05:39,090
own CBN's and then when we search via

00:05:36,540 --> 00:05:40,680
Google search will actually be served up

00:05:39,090 --> 00:05:45,180
it'll look like it's our URL but I'll

00:05:40,680 --> 00:05:47,610
actually be Google's own cache URL and

00:05:45,180 --> 00:05:49,380
this is the second part of the magic

00:05:47,610 --> 00:05:51,210
this is the ant viewer the ant viewer is

00:05:49,380 --> 00:05:54,419
another open source project that they

00:05:51,210 --> 00:05:56,700
have and essentially it allows you to

00:05:54,419 --> 00:05:59,490
prove partially preload partially

00:05:56,700 --> 00:06:02,370
prefetch resources that it'll predict

00:05:59,490 --> 00:06:04,440
that you're looking for

00:06:02,370 --> 00:06:06,180
you'll see ant vo in a lot of different

00:06:04,440 --> 00:06:09,690
places you'll probably experience a have

00:06:06,180 --> 00:06:12,870
viewer if you use reddit or medium or

00:06:09,690 --> 00:06:15,960
Twitter Instagram things like that even

00:06:12,870 --> 00:06:18,030
Facebook who have instant articles so I

00:06:15,960 --> 00:06:20,070
think they called which was a precursor

00:06:18,030 --> 00:06:22,200
town even now Facebook have started

00:06:20,070 --> 00:06:25,669
using app on their platform and the good

00:06:22,200 --> 00:06:29,970
news for us is that at the app viewer is

00:06:25,669 --> 00:06:35,640
embedded in Google search so on mobile

00:06:29,970 --> 00:06:36,870
it gives us huge huge gains this is an

00:06:35,640 --> 00:06:37,550
example of some of the markup that we

00:06:36,870 --> 00:06:39,590
can use like

00:06:37,550 --> 00:06:41,480
most of your typical HTML is perfectly

00:06:39,590 --> 00:06:42,800
fine you can go ahead and use it there's

00:06:41,480 --> 00:06:44,510
some that aren't okay

00:06:42,800 --> 00:06:46,310
mainly things that have to load

00:06:44,510 --> 00:06:48,890
resources and there are amp replacements

00:06:46,310 --> 00:06:50,420
for those for those and the style and

00:06:48,890 --> 00:06:52,220
the script tag unfortunately we can't

00:06:50,420 --> 00:06:54,170
really use them as freely as we want to

00:06:52,220 --> 00:06:55,430
there are some exceptions where the

00:06:54,170 --> 00:06:58,520
script tab you can you can with the

00:06:55,430 --> 00:07:00,230
script tag you can store state and data

00:06:58,520 --> 00:07:01,880
but you can't really do all that fancy

00:07:00,230 --> 00:07:05,690
beautiful JavaScript stuff that we want

00:07:01,880 --> 00:07:07,910
to do so let's get into some of the

00:07:05,690 --> 00:07:08,930
components I'm going to show you some of

00:07:07,910 --> 00:07:11,300
the components and then we're going to

00:07:08,930 --> 00:07:14,000
look at the future around so this is an

00:07:11,300 --> 00:07:16,730
example of the amp replacement for an

00:07:14,000 --> 00:07:17,870
image tag it looks very similar you can

00:07:16,730 --> 00:07:19,700
see we've got a source we're going to

00:07:17,870 --> 00:07:21,380
alt and now the layout width and height

00:07:19,700 --> 00:07:24,740
this is where it's part of the magic of

00:07:21,380 --> 00:07:26,090
our am start because when it when we

00:07:24,740 --> 00:07:27,320
want to give it a reach an external

00:07:26,090 --> 00:07:28,940
resource that we want to load that's

00:07:27,320 --> 00:07:30,770
fine but it wants to know how to lay it

00:07:28,940 --> 00:07:33,110
out on the page so that I can give a

00:07:30,770 --> 00:07:35,390
user an instant and really consistent

00:07:33,110 --> 00:07:39,290
experience so with layout there's

00:07:35,390 --> 00:07:41,660
several different types of layout with

00:07:39,290 --> 00:07:43,580
responsive layout sorry I'll start again

00:07:41,660 --> 00:07:44,720
so with layout usually the width and the

00:07:43,580 --> 00:07:46,730
height there are going to be pixels

00:07:44,720 --> 00:07:50,300
they're not always mandatory sometimes

00:07:46,730 --> 00:07:52,400
amp can infer the size and position of

00:07:50,300 --> 00:07:54,050
elements but in cases where it can't

00:07:52,400 --> 00:07:56,510
then you need to explicitly state them

00:07:54,050 --> 00:07:58,400
in the case of a responsive layout it

00:07:56,510 --> 00:07:59,810
will responsibly scale so those width

00:07:58,400 --> 00:08:02,300
and height are actually just aspect

00:07:59,810 --> 00:08:04,130
ratios so it could be the exact exact

00:08:02,300 --> 00:08:08,630
pixel dimension or it could just be like

00:08:04,130 --> 00:08:10,340
one point five to one and this is just

00:08:08,630 --> 00:08:11,180
the output of that HTML that's what it

00:08:10,340 --> 00:08:13,520
would look like you should get a little

00:08:11,180 --> 00:08:16,310
image at the top of your page and here

00:08:13,520 --> 00:08:18,080
we have an example of some of the common

00:08:16,310 --> 00:08:19,610
attributes that components can have so

00:08:18,080 --> 00:08:22,010
we have fallback and no script here so

00:08:19,610 --> 00:08:24,950
almost all and component tools support

00:08:22,010 --> 00:08:27,140
the fallback and no script tag so if in

00:08:24,950 --> 00:08:29,150
the client you just can't support it

00:08:27,140 --> 00:08:30,770
then there's a safe fallback and if

00:08:29,150 --> 00:08:34,450
there's simply no scripts allowed then

00:08:30,770 --> 00:08:38,570
you can defer to your regular image tag

00:08:34,450 --> 00:08:41,510
here we have amp video so here we see

00:08:38,570 --> 00:08:42,860
we've got our fallback and we've also

00:08:41,510 --> 00:08:43,340
got something really interesting we've

00:08:42,860 --> 00:08:45,800
got

00:08:43,340 --> 00:08:48,050
a separate source type so if for example

00:08:45,800 --> 00:08:49,280
we wanted to use an HL s video is our

00:08:48,050 --> 00:08:51,290
main source at the very top of the

00:08:49,280 --> 00:08:53,810
client is unable to support it you can

00:08:51,290 --> 00:08:56,330
gracefully degrade down through a series

00:08:53,810 --> 00:08:59,960
of sources to finally find one that the

00:08:56,330 --> 00:09:02,870
client is happy to use that's just an

00:08:59,960 --> 00:09:04,700
example of what that would look like and

00:09:02,870 --> 00:09:06,380
now we have a whole bunch of proprietary

00:09:04,700 --> 00:09:07,910
components so because it's open source

00:09:06,380 --> 00:09:09,740
you can go in there another a third

00:09:07,910 --> 00:09:12,080
party can go in there and if they can

00:09:09,740 --> 00:09:14,330
make a good case for a component to be

00:09:12,080 --> 00:09:16,280
built to be built and the community is

00:09:14,330 --> 00:09:17,690
ok with it then it's fine and of course

00:09:16,280 --> 00:09:19,270
there are big partners that Google is

00:09:17,690 --> 00:09:22,220
happy to sort of cooperate with

00:09:19,270 --> 00:09:24,530
YouTube's one of them here we see how we

00:09:22,220 --> 00:09:26,360
would implement a YouTube embed in the

00:09:24,530 --> 00:09:28,640
page and we have a placeholder and page

00:09:26,360 --> 00:09:31,040
that can be shown before our video

00:09:28,640 --> 00:09:32,360
actually loads up this is these are just

00:09:31,040 --> 00:09:35,300
a couple of other examples we've got

00:09:32,360 --> 00:09:37,870
Facebook and Twitter and this is what

00:09:35,300 --> 00:09:37,870
that would look like

00:09:44,110 --> 00:09:48,350
now we have an app carousel this is one

00:09:46,430 --> 00:09:50,209
of the many layout type of components so

00:09:48,350 --> 00:09:52,940
we can use layout as an attribute on

00:09:50,209 --> 00:09:54,709
elements to tell them how to position

00:09:52,940 --> 00:09:56,600
individual elements or we have a lot of

00:09:54,709 --> 00:09:58,970
these really helpful container elements

00:09:56,600 --> 00:10:00,860
that carousel is one of them that lives

00:09:58,970 --> 00:10:03,589
in the layout family and this will just

00:10:00,860 --> 00:10:04,819
decide how to layout all its children so

00:10:03,589 --> 00:10:06,709
here for example we have a layout of

00:10:04,819 --> 00:10:08,600
type fixed height so it just knows it's

00:10:06,709 --> 00:10:10,310
a height of 300 pixels and it'll

00:10:08,600 --> 00:10:12,709
responsively scale to the width of the

00:10:10,310 --> 00:10:14,540
device and you can have any type of

00:10:12,709 --> 00:10:16,610
markup you want in there I just chosen

00:10:14,540 --> 00:10:21,440
an amp image and a paragraph and an

00:10:16,610 --> 00:10:23,089
ounce video pretty straightforward it

00:10:21,440 --> 00:10:25,370
works and because I've told it to be a

00:10:23,089 --> 00:10:27,380
slide type and I told to order play

00:10:25,370 --> 00:10:30,290
after a delay of 3,000 milliseconds

00:10:27,380 --> 00:10:31,610
that's the effect that we get and now

00:10:30,290 --> 00:10:33,860
let's start to see how we do some more

00:10:31,610 --> 00:10:35,329
fun stuff so here we have amp form now

00:10:33,860 --> 00:10:37,490
technically in the markup you can write

00:10:35,329 --> 00:10:39,350
this as a form if you want but you can't

00:10:37,490 --> 00:10:40,940
use a regular form or an amp form

00:10:39,350 --> 00:10:45,139
without first including the amp form

00:10:40,940 --> 00:10:47,420
JavaScript the library sorry and now a

00:10:45,139 --> 00:10:49,100
form is a really really good way so here

00:10:47,420 --> 00:10:51,470
first thing we can actually individually

00:10:49,100 --> 00:10:53,660
handle the success and the error States

00:10:51,470 --> 00:10:55,699
depending on what the post back to that

00:10:53,660 --> 00:10:59,029
form is and also if you wanted to like

00:10:55,699 --> 00:11:01,639
send data analytics from your front end

00:10:59,029 --> 00:11:03,500
sneakily wrapping it in a form is really

00:11:01,639 --> 00:11:05,300
probably the best way to do it and you

00:11:03,500 --> 00:11:08,269
can depending on whether you want to

00:11:05,300 --> 00:11:10,250
have an action X xhr attribute or just a

00:11:08,269 --> 00:11:12,680
simple action attribute you can either

00:11:10,250 --> 00:11:17,089
trigger just an update of the page or a

00:11:12,680 --> 00:11:18,589
full refresh if you wanted now let's get

00:11:17,089 --> 00:11:20,000
into some of more dynamic components

00:11:18,589 --> 00:11:21,199
this is a this is one that isn't really

00:11:20,000 --> 00:11:22,910
going to set the world alight but it

00:11:21,199 --> 00:11:24,920
just like blew my mind when I saw it a

00:11:22,910 --> 00:11:27,050
couple of weeks ago its amp time ago

00:11:24,920 --> 00:11:28,250
it's just a really cool little component

00:11:27,050 --> 00:11:30,259
it does like really simple thing you

00:11:28,250 --> 00:11:33,079
just give it a date time and it'll tell

00:11:30,259 --> 00:11:34,759
you like how long ago in the past that

00:11:33,079 --> 00:11:36,470
was or how long in the future that is

00:11:34,759 --> 00:11:38,449
you know so the next time I have to

00:11:36,470 --> 00:11:39,800
implement this implement something I

00:11:38,449 --> 00:11:41,660
there's somewhere I don't have to use a

00:11:39,800 --> 00:11:43,009
library of a massive library from

00:11:41,660 --> 00:11:45,110
somewhere or some kind or I'd have to

00:11:43,009 --> 00:11:46,910
write my own JavaScript I'm probably

00:11:45,110 --> 00:11:48,230
just gonna use that time to go if it was

00:11:46,910 --> 00:11:48,690
up to me there should be everywhere on a

00:11:48,230 --> 00:11:53,670
website

00:11:48,690 --> 00:11:55,290
love it and now we have amp list so this

00:11:53,670 --> 00:11:57,360
is a way of getting data from either

00:11:55,290 --> 00:12:02,250
hard-code adjacent that you have within

00:11:57,360 --> 00:12:04,050
your solution or an external API and

00:12:02,250 --> 00:12:05,970
here we see we're hitting this endpoint

00:12:04,050 --> 00:12:09,450
and we've got a placeholder here so

00:12:05,970 --> 00:12:11,100
while we wait for our response to come

00:12:09,450 --> 00:12:12,930
back we just hard-coded a delay of a

00:12:11,100 --> 00:12:14,700
thousand milliseconds there we're just

00:12:12,930 --> 00:12:17,010
going to show this placeholder and then

00:12:14,700 --> 00:12:19,470
once the the data actually comes back

00:12:17,010 --> 00:12:22,380
then we can go to amps templating system

00:12:19,470 --> 00:12:24,000
which is a Miss - so many of you are

00:12:22,380 --> 00:12:26,160
probably going to be I'm sure all of you

00:12:24,000 --> 00:12:27,480
are familiar with templating and many of

00:12:26,160 --> 00:12:29,250
you might be familiar with like most

00:12:27,480 --> 00:12:31,830
national Jaso handlebars something of

00:12:29,250 --> 00:12:33,600
that it's very similar it's a very

00:12:31,830 --> 00:12:35,250
logically simple sort of templating

00:12:33,600 --> 00:12:37,050
syntax but it's quite useful for what it

00:12:35,250 --> 00:12:39,990
does you can be quite creative with it

00:12:37,050 --> 00:12:41,580
and this is an example of how we just

00:12:39,990 --> 00:12:43,770
sort of go through that so it will just

00:12:41,580 --> 00:12:46,260
iterate through each one of our bits of

00:12:43,770 --> 00:12:50,430
data and just give us this markup with

00:12:46,260 --> 00:12:52,230
these variables sort of put in and amp

00:12:50,430 --> 00:12:54,180
actually has its own loading state but

00:12:52,230 --> 00:12:56,730
because we've told it to use no loading

00:12:54,180 --> 00:12:58,590
because we've used our own custom CSS so

00:12:56,730 --> 00:13:00,960
a style only state how we want it to be

00:12:58,590 --> 00:13:06,060
but this now looks and it looks fine

00:13:00,960 --> 00:13:08,100
looks great now one of the primary

00:13:06,060 --> 00:13:11,130
things that we probably use JavaScript

00:13:08,100 --> 00:13:14,190
for is to handle events so that's a bit

00:13:11,130 --> 00:13:17,660
of an issue but about a year ago now I

00:13:14,190 --> 00:13:19,950
guess and introduced events and actions

00:13:17,660 --> 00:13:21,390
which is what this is so this would be

00:13:19,950 --> 00:13:24,090
the syntax this is just an HTML

00:13:21,390 --> 00:13:26,910
attribute and we're saying on the event

00:13:24,090 --> 00:13:30,810
X - target why do the optional actions

00:13:26,910 --> 00:13:32,850
ed with optional arguments and you can

00:13:30,810 --> 00:13:34,290
see here we've used the tap event the

00:13:32,850 --> 00:13:35,850
tap event would be the simplest way to

00:13:34,290 --> 00:13:39,600
sort of recreate a click event handler

00:13:35,850 --> 00:13:41,910
and that that target would be the ID of

00:13:39,600 --> 00:13:43,350
your component or you can also target

00:13:41,910 --> 00:13:45,990
the amp runtime to do some clever things

00:13:43,350 --> 00:13:47,960
like navigate or set stage stuff like

00:13:45,990 --> 00:13:50,160
that

00:13:47,960 --> 00:13:52,350
and now we're going to get into amp bind

00:13:50,160 --> 00:13:54,870
and bind was released not too long ago

00:13:52,350 --> 00:13:57,720
and it's like a huge huge leap for for

00:13:54,870 --> 00:14:00,010
amp this is like well basically like

00:13:57,720 --> 00:14:01,810
data binding and we can you state music

00:14:00,010 --> 00:14:04,300
so this is an example of like how we

00:14:01,810 --> 00:14:07,810
would use state we can have as we get a

00:14:04,300 --> 00:14:09,670
multiple mutable state object and our

00:14:07,810 --> 00:14:11,950
Dom it's not a problem there are all

00:14:09,670 --> 00:14:19,210
referenced via the ID and they just use

00:14:11,950 --> 00:14:21,100
a Jason like syntax and next we have our

00:14:19,210 --> 00:14:23,050
event handler there and within here you

00:14:21,100 --> 00:14:24,520
can see in bold I don't know how easy

00:14:23,050 --> 00:14:25,930
that is to see but in bold were using

00:14:24,520 --> 00:14:27,910
the expression there so we can't use

00:14:25,930 --> 00:14:30,340
JavaScript but they've provided us a

00:14:27,910 --> 00:14:31,540
subset of JavaScript that we can use and

00:14:30,340 --> 00:14:34,360
that's just a really really simple

00:14:31,540 --> 00:14:36,940
example so to craft and to craft an

00:14:34,360 --> 00:14:40,480
endpoint that'll hit a random point in

00:14:36,940 --> 00:14:43,060
the Star Wars API and then finally we

00:14:40,480 --> 00:14:45,220
have binding here so this surrounded in

00:14:43,060 --> 00:14:46,810
the square brackets these are there are

00:14:45,220 --> 00:14:51,670
a bunch of common attributes to a lot of

00:14:46,810 --> 00:14:54,370
elements but there are some which you

00:14:51,670 --> 00:14:56,320
can which you can bind to so basically

00:14:54,370 --> 00:14:58,780
anything that's bound in this element

00:14:56,320 --> 00:15:00,960
down here it will have this text in it

00:14:58,780 --> 00:15:03,430
to begin with and then on user

00:15:00,960 --> 00:15:06,490
interaction the state gets updated and

00:15:03,430 --> 00:15:08,380
then bind kicks in so bind will then go

00:15:06,490 --> 00:15:10,720
and look at the state game and replace

00:15:08,380 --> 00:15:12,960
the text with that and that's what that

00:15:10,720 --> 00:15:12,960
looks like

00:15:21,810 --> 00:15:26,160
so we've seen a small selection of

00:15:24,329 --> 00:15:30,089
components but I'm going to show you a

00:15:26,160 --> 00:15:31,620
couple of pages that use really just the

00:15:30,089 --> 00:15:34,319
components that we've been talking about

00:15:31,620 --> 00:15:36,269
by large amount of this is only what

00:15:34,319 --> 00:15:37,889
we've been speaking about and you can

00:15:36,269 --> 00:15:40,319
see you can get this is an example of

00:15:37,889 --> 00:15:42,240
like a commerce site Aliexpress I think

00:15:40,319 --> 00:15:43,470
it is and you can see there's really put

00:15:42,240 --> 00:15:45,360
a pretty good experience these are all

00:15:43,470 --> 00:15:48,300
valid ad pages that load almost

00:15:45,360 --> 00:15:50,040
instantly so now if we just watch the

00:15:48,300 --> 00:15:51,420
very top of the screen there there's a

00:15:50,040 --> 00:15:52,680
little header there which when we scroll

00:15:51,420 --> 00:15:55,079
down that's going to collapse

00:15:52,680 --> 00:15:58,050
now that's achieved by the amp position

00:15:55,079 --> 00:15:59,879
observer component which that on their

00:15:58,050 --> 00:16:01,889
side they placed it just below the fold

00:15:59,879 --> 00:16:04,889
and as soon as you trigger that action

00:16:01,889 --> 00:16:08,850
it'll know to trigger an animation which

00:16:04,889 --> 00:16:11,160
collapses that little header this is an

00:16:08,850 --> 00:16:15,059
example of the Evening Standard so you

00:16:11,160 --> 00:16:16,649
can see we also benefit here by by that

00:16:15,059 --> 00:16:19,019
top little carousel there which will

00:16:16,649 --> 00:16:21,509
feature amp story so if we search for a

00:16:19,019 --> 00:16:22,740
certain subject like Trump or Kanye West

00:16:21,509 --> 00:16:24,809
or something we would get stories from

00:16:22,740 --> 00:16:27,689
many different publishers appear in that

00:16:24,809 --> 00:16:30,120
carousel but because we research for a

00:16:27,689 --> 00:16:31,769
specific website even in standard it

00:16:30,120 --> 00:16:35,309
populates the app carousel with only

00:16:31,769 --> 00:16:36,569
evening standard amp links and you can

00:16:35,309 --> 00:16:41,339
see here we've harnessed the power of

00:16:36,569 --> 00:16:44,220
the am viewer to preemptively predict 3

00:16:41,339 --> 00:16:46,589
amp navigations forward in time and when

00:16:44,220 --> 00:16:48,569
you encounter new potential amp

00:16:46,589 --> 00:16:50,339
navigations it'll push old ones out of

00:16:48,569 --> 00:16:54,120
the stack to try and keep everything

00:16:50,339 --> 00:16:56,069
nice and efficient now we're gonna look

00:16:54,120 --> 00:16:58,290
at one of the really clever components

00:16:56,069 --> 00:17:00,209
that we have called amp story so app

00:16:58,290 --> 00:17:02,040
story really really is something

00:17:00,209 --> 00:17:03,449
completely new different this was a

00:17:02,040 --> 00:17:05,459
solution that they wanted to make for

00:17:03,449 --> 00:17:07,919
like content publishers magazines and

00:17:05,459 --> 00:17:10,010
newspapers and the like in order to be

00:17:07,919 --> 00:17:14,309
able to tell like really rich

00:17:10,010 --> 00:17:17,539
interactive media sort of magazine

00:17:14,309 --> 00:17:19,649
layout fun digital story type things and

00:17:17,539 --> 00:17:21,689
you can see we've got a little progress

00:17:19,649 --> 00:17:23,850
bar at the top there and this is just a

00:17:21,689 --> 00:17:26,130
hello world it's example of what we can

00:17:23,850 --> 00:17:27,880
do now let's look at a couple of really

00:17:26,130 --> 00:17:31,210
really nice shiny

00:17:27,880 --> 00:17:32,679
so here on the left we have an article

00:17:31,210 --> 00:17:35,860
from People magazine about the royal

00:17:32,679 --> 00:17:37,840
family and you can see this harnesses

00:17:35,860 --> 00:17:39,820
all of the potential of layout and

00:17:37,840 --> 00:17:42,370
animation that's all built in with AM

00:17:39,820 --> 00:17:44,559
story and then there on your right

00:17:42,370 --> 00:17:46,720
you'll see the desktop experience so AM

00:17:44,559 --> 00:17:48,279
story is not really built as to be

00:17:46,720 --> 00:17:51,700
viewed in landscape view and it's not

00:17:48,279 --> 00:17:53,380
built to expand adaptively or

00:17:51,700 --> 00:17:55,510
responsively that's that's the UX that

00:17:53,380 --> 00:17:58,809
we'll get and I've worked on a little

00:17:55,510 --> 00:18:00,460
bit with the amp team and they're pretty

00:17:58,809 --> 00:18:06,429
adamant that they're not gonna move from

00:18:00,460 --> 00:18:10,539
that UX from now for now so is that

00:18:06,429 --> 00:18:12,880
really the end of JavaScript for amp not

00:18:10,539 --> 00:18:14,679
really there's this this stuff we can do

00:18:12,880 --> 00:18:18,399
now this stuff we might be able to do in

00:18:14,679 --> 00:18:20,710
the future so now we can use an iframe

00:18:18,399 --> 00:18:22,480
so those act like a regular iframe that

00:18:20,710 --> 00:18:24,159
you might use but there are some

00:18:22,480 --> 00:18:26,080
restrictions like it can't be in the top

00:18:24,159 --> 00:18:29,740
three quarters of the initial viewport

00:18:26,080 --> 00:18:31,690
only so that the user can be guaranteed

00:18:29,740 --> 00:18:34,450
a really consistent fast experience

00:18:31,690 --> 00:18:37,750
without having to wait for resources but

00:18:34,450 --> 00:18:39,220
you can see that it it does a lot of

00:18:37,750 --> 00:18:40,330
what we would want to do and if you

00:18:39,220 --> 00:18:43,029
wanted to write custom interactive

00:18:40,330 --> 00:18:44,380
JavaScript you can serve it up to an app

00:18:43,029 --> 00:18:46,690
my friend and it would load and work

00:18:44,380 --> 00:18:48,100
just fine in a valid amp page the only

00:18:46,690 --> 00:18:50,799
criteria would be that you need to give

00:18:48,100 --> 00:18:54,970
it a placeholder that takes up the exact

00:18:50,799 --> 00:19:01,750
same dimensions and there's an example

00:18:54,970 --> 00:19:04,440
of a Netflix iframe and Google Maps we

00:19:01,750 --> 00:19:07,000
also have app install serviceworker so

00:19:04,440 --> 00:19:09,220
this when you're on page load this

00:19:07,000 --> 00:19:10,809
installs a serviceworker which then can

00:19:09,220 --> 00:19:12,970
do all that beautiful magical stuff that

00:19:10,809 --> 00:19:15,399
we use service workers for so what they

00:19:12,970 --> 00:19:18,130
call what they call this is 20

00:19:15,399 --> 00:19:19,210
progressive web and the name is really

00:19:18,130 --> 00:19:21,130
really ridiculous

00:19:19,210 --> 00:19:22,840
but the concept is pretty cool so you

00:19:21,130 --> 00:19:24,850
know a user does a Google search or

00:19:22,840 --> 00:19:26,890
whatever they go by a Facebook or reddit

00:19:24,850 --> 00:19:28,179
or Twitter they want to click your link

00:19:26,890 --> 00:19:29,740
they come to your page it's an instant

00:19:28,179 --> 00:19:31,600
load they're like wow this is amazing

00:19:29,740 --> 00:19:32,080
then they're surfing a page and all and

00:19:31,600 --> 00:19:34,600
in

00:19:32,080 --> 00:19:36,700
time you use the serviceworker to load

00:19:34,600 --> 00:19:38,649
up the rest of what you need so you can

00:19:36,700 --> 00:19:41,370
make the future journey through your own

00:19:38,649 --> 00:19:44,140
domain as efficient as possible and

00:19:41,370 --> 00:19:45,820
there's also they announced in February

00:19:44,140 --> 00:19:49,299
of this year at napkins in Amsterdam

00:19:45,820 --> 00:19:50,679
they announced a proposal that they want

00:19:49,299 --> 00:19:53,710
to make our lives easier they want to

00:19:50,679 --> 00:19:55,360
make us all love amp so they know that

00:19:53,710 --> 00:19:57,760
one of our major pain points as

00:19:55,360 --> 00:20:00,309
developers is that why can't we write

00:19:57,760 --> 00:20:02,799
JavaScript so what they've proposed is

00:20:00,309 --> 00:20:05,500
that maybe they'll let us use pre-act

00:20:02,799 --> 00:20:07,299
to write off main thread javascript so

00:20:05,500 --> 00:20:09,070
javascript that can't like block the

00:20:07,299 --> 00:20:10,899
main thread but it's all gives us a bit

00:20:09,070 --> 00:20:12,850
of flexibility this is all work

00:20:10,899 --> 00:20:15,250
work-in-progress and they haven't

00:20:12,850 --> 00:20:17,470
guaranteed that they're gonna let us do

00:20:15,250 --> 00:20:20,830
this but the option is there it might

00:20:17,470 --> 00:20:23,049
happen and like I mentioned it's open

00:20:20,830 --> 00:20:24,340
source we contribute from what I've seen

00:20:23,049 --> 00:20:26,289
they're very friendly and they were

00:20:24,340 --> 00:20:28,720
hoping to help helping people contribute

00:20:26,289 --> 00:20:30,669
so if you want to make something happen

00:20:28,720 --> 00:20:32,320
to know if there's something that you

00:20:30,669 --> 00:20:34,899
don't like like we found a bug about a

00:20:32,320 --> 00:20:36,669
month ago and it there was a pain point

00:20:34,899 --> 00:20:38,649
for us we opened an issue and a couple

00:20:36,669 --> 00:20:40,299
of days later they agreed that it

00:20:38,649 --> 00:20:41,500
affected UX and they'd assigned it to

00:20:40,299 --> 00:20:43,330
someone and there was a lot of

00:20:41,500 --> 00:20:45,490
communication going on and two weeks

00:20:43,330 --> 00:20:47,590
later there was a PR merged in and three

00:20:45,490 --> 00:20:50,769
days later it was live so we've had a

00:20:47,590 --> 00:20:52,990
great experience with it and thanks

00:20:50,769 --> 00:20:55,870
that's actually all my talk these are

00:20:52,990 --> 00:20:57,940
some resources that I use to learn about

00:20:55,870 --> 00:20:59,590
amp and to figure out how to use how to

00:20:57,940 --> 00:21:02,980
use it and what and what else they can

00:20:59,590 --> 00:21:05,380
show to do so that's a good starting

00:21:02,980 --> 00:21:06,639
point and we also have an app meetup

00:21:05,380 --> 00:21:10,659
coming up in a few weeks that we're

00:21:06,639 --> 00:21:12,130
hosting at CNN I'm going to be talking

00:21:10,659 --> 00:21:13,929
someone from CNN is going to be talking

00:21:12,130 --> 00:21:16,260
more in depth about app story we've got

00:21:13,929 --> 00:21:18,700
someone from Google speaking about

00:21:16,260 --> 00:21:21,010
really really advanced deep

00:21:18,700 --> 00:21:22,149
interactivity shall we just taking a

00:21:21,010 --> 00:21:24,070
little bit of water on showing you and

00:21:22,149 --> 00:21:26,049
go really in depth with it just saw some

00:21:24,070 --> 00:21:27,250
really difficult problems so I've

00:21:26,049 --> 00:21:28,630
tweeted about it I don't have many

00:21:27,250 --> 00:21:29,880
tweets actually if you go to my Twitter

00:21:28,630 --> 00:21:31,980
you'll find a link to that

00:21:29,880 --> 00:21:33,850
if you want to come join us and that's

00:21:31,980 --> 00:21:38,810
all thank you so much for listening

00:21:33,850 --> 00:21:38,810

YouTube URL: https://www.youtube.com/watch?v=iLCWmlAZnYw


