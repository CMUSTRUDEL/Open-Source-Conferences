Title: Decentralized Architecture Robots and Food - JS Roundabout - July 2019
Publication date: 2019-07-12
Playlist: The JS Roundabout
Description: 
	Presented by Head of Software at Karakuri, Orfeo Nicolai.

A talk on 'Decentralized architecture and how robot components interact and communicate'

_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,000 --> 00:00:06,990
good evening I'm talking about robots

00:00:02,820 --> 00:00:10,950
and food tonight my name is Ophir

00:00:06,990 --> 00:00:13,500
Nicolai I'm from Switzerland I had many

00:00:10,950 --> 00:00:16,859
many roles in my past working in the

00:00:13,500 --> 00:00:20,240
industry for about over 20 years system

00:00:16,859 --> 00:00:22,619
administrator as coder as entrepreneurs

00:00:20,240 --> 00:00:24,930
business intelligence data science

00:00:22,619 --> 00:00:28,680
whatever came into my hands that was

00:00:24,930 --> 00:00:31,199
kind of technology related work in many

00:00:28,680 --> 00:00:33,989
companies at some point I came here to

00:00:31,199 --> 00:00:36,510
London to do a degree at an art school

00:00:33,989 --> 00:00:39,120
which is kind of random but was really

00:00:36,510 --> 00:00:41,550
really interesting I didn't want to

00:00:39,120 --> 00:00:43,530
leave afterwards and now I'm at curry

00:00:41,550 --> 00:00:45,899
curry which is a startup that does

00:00:43,530 --> 00:00:48,570
robots for the food industry I'm the

00:00:45,899 --> 00:00:50,430
head of software there and I want to

00:00:48,570 --> 00:00:51,809
talk a little bit about curry curry that

00:00:50,430 --> 00:00:55,110
you understand what we do because

00:00:51,809 --> 00:00:58,140
probably no one of you heard of us and

00:00:55,110 --> 00:01:00,989
then I'll talk about the architecture so

00:00:58,140 --> 00:01:03,690
curry curry was founded by Barney Rock

00:01:00,989 --> 00:01:07,409
and Simon watt these two guys met in the

00:01:03,690 --> 00:01:09,150
early days of armed in Cambridge part of

00:01:07,409 --> 00:01:11,850
what they're responsible for is that you

00:01:09,150 --> 00:01:13,470
have multi-core CPUs in your phones that

00:01:11,850 --> 00:01:16,680
was kind of their idea and I worked on

00:01:13,470 --> 00:01:18,299
that some point I left there ended up

00:01:16,680 --> 00:01:20,850
meeting again in the music industry

00:01:18,299 --> 00:01:23,720
worked at Universal Music Simon was the

00:01:20,850 --> 00:01:26,820
head of technology there for many years

00:01:23,720 --> 00:01:29,310
about 1/2 years ago they founded

00:01:26,820 --> 00:01:31,770
karakuri the idea they had is building a

00:01:29,310 --> 00:01:34,860
restaurant that is completely operate

00:01:31,770 --> 00:01:37,320
operated by robots so they made fancy

00:01:34,860 --> 00:01:41,009
slides and renderings and talked to many

00:01:37,320 --> 00:01:44,100
many people on the ride on their way

00:01:41,009 --> 00:01:47,909
there they gathered a team of few very

00:01:44,100 --> 00:01:49,979
smart men but they didn't really push

00:01:47,909 --> 00:01:54,360
forward the concept of like something

00:01:49,979 --> 00:01:55,770
new something like yeah tangible so they

00:01:54,360 --> 00:01:57,689
gathered around a little bit a younger

00:01:55,770 --> 00:02:03,299
team I was part of that I don't know how

00:01:57,689 --> 00:02:05,040
young I am still I am but so they came

00:02:03,299 --> 00:02:06,210
away from the restaurant because the

00:02:05,040 --> 00:02:10,140
restaurant is too much of a challenge

00:02:06,210 --> 00:02:12,480
today so too many unknowns too many

00:02:10,140 --> 00:02:13,380
things to build at the same time so they

00:02:12,480 --> 00:02:15,810
reduce their

00:02:13,380 --> 00:02:18,750
cope and kind of can we build a machine

00:02:15,810 --> 00:02:21,480
that just assembles food so a human

00:02:18,750 --> 00:02:23,730
chops it fills the Machine and the

00:02:21,480 --> 00:02:25,800
Machine just puts it on a plate the idea

00:02:23,730 --> 00:02:27,600
is people want more customized food

00:02:25,800 --> 00:02:30,330
they're aware about their nutrition's

00:02:27,600 --> 00:02:33,000
they care about their diets they have

00:02:30,330 --> 00:02:35,160
allergies but on the other hand we see

00:02:33,000 --> 00:02:36,630
cities like London more and more people

00:02:35,160 --> 00:02:39,420
want to eat at the same time over lunch

00:02:36,630 --> 00:02:41,610
and the quality suffers people just

00:02:39,420 --> 00:02:44,400
smash the food on a plate it's like yeah

00:02:41,610 --> 00:02:47,520
you don't really get what you want so I

00:02:44,400 --> 00:02:49,950
want to do a machine that kind of has

00:02:47,520 --> 00:02:53,070
mass production and customization in one

00:02:49,950 --> 00:02:55,710
thing kind of a tiny little factory so

00:02:53,070 --> 00:02:57,990
that prototype they wanted to build they

00:02:55,710 --> 00:03:00,330
got a team around and we actually kind

00:02:57,990 --> 00:03:01,830
of managed to build something that was

00:03:00,330 --> 00:03:03,840
pre-funding we had no money

00:03:01,830 --> 00:03:07,190
most of us worked for just good faith

00:03:03,840 --> 00:03:10,920
and hope to get some equity out of it

00:03:07,190 --> 00:03:13,500
it's made out of cereal dispensers you

00:03:10,920 --> 00:03:16,770
find in hotel lobbies kitchen scales we

00:03:13,500 --> 00:03:18,590
hacked to get the mass sensors a robot

00:03:16,770 --> 00:03:20,760
arm from a London company called

00:03:18,590 --> 00:03:22,910
automata which is about four thousand

00:03:20,760 --> 00:03:26,160
quid which is very cheap for a robot arm

00:03:22,910 --> 00:03:30,510
so we built this machine with including

00:03:26,160 --> 00:03:32,190
an interface and yeah it worked we got

00:03:30,510 --> 00:03:36,540
some money we got some preset funding

00:03:32,190 --> 00:03:38,790
about two months ago without compress a

00:03:36,540 --> 00:03:41,580
little bit and guess there's no one of

00:03:38,790 --> 00:03:43,740
you have read it and now we have to

00:03:41,580 --> 00:03:45,660
build a big version of this machine that

00:03:43,740 --> 00:03:48,209
actually works in a big restaurant so

00:03:45,660 --> 00:03:50,430
it's scary but it's fun and now the

00:03:48,209 --> 00:03:53,310
interesting bit so that's why you're

00:03:50,430 --> 00:03:54,420
here as I said I'm head of software I'm

00:03:53,310 --> 00:03:56,760
currently designing the whole

00:03:54,420 --> 00:03:59,400
architecture of these machine works so

00:03:56,760 --> 00:04:01,470
this is our prototype for at least a

00:03:59,400 --> 00:04:04,380
rendering of it I want to take it apart

00:04:01,470 --> 00:04:07,410
with you and explain how it works and

00:04:04,380 --> 00:04:09,690
how it relates to the bigger machine so

00:04:07,410 --> 00:04:11,520
on one hand we have these dispensers in

00:04:09,690 --> 00:04:15,270
the first machine their cereal

00:04:11,520 --> 00:04:19,200
dispensers plastic we put an Arduino on

00:04:15,270 --> 00:04:21,960
we had a stepper motor a scale but it's

00:04:19,200 --> 00:04:24,520
in the end it's just a tiny machine that

00:04:21,960 --> 00:04:27,849
dispenses one ingredient

00:04:24,520 --> 00:04:31,750
we have an arm that is in the end just

00:04:27,849 --> 00:04:35,650
some machine that moves vessels around

00:04:31,750 --> 00:04:37,539
to get the food in the same place we

00:04:35,650 --> 00:04:40,720
have some sort of interface to talk to

00:04:37,539 --> 00:04:45,789
the Machine and the middle is some sort

00:04:40,720 --> 00:04:48,610
of brain that coordinates everything for

00:04:45,789 --> 00:04:51,190
a big machine software it is kind of the

00:04:48,610 --> 00:04:52,960
same instead of a cereal dispenser it is

00:04:51,190 --> 00:04:55,930
a stainless steel industrial grade

00:04:52,960 --> 00:04:58,889
machine but the only thing is I want to

00:04:55,930 --> 00:05:02,470
talk to it and say give me some food

00:04:58,889 --> 00:05:04,630
so yeah early on the question about do I

00:05:02,470 --> 00:05:07,259
build a big brain in the middle do I

00:05:04,630 --> 00:05:09,520
take everything apart to the extreme and

00:05:07,259 --> 00:05:13,930
yeah kind of that's what the manager

00:05:09,520 --> 00:05:16,659
said I choose solution that is Microsoft

00:05:13,930 --> 00:05:19,960
micro service space because on one hand

00:05:16,659 --> 00:05:22,360
we have to process very fast we have

00:05:19,960 --> 00:05:24,400
daily changes in our architecture from a

00:05:22,360 --> 00:05:26,470
hardware side so working with some very

00:05:24,400 --> 00:05:28,930
talented mechanical engineers with the

00:05:26,470 --> 00:05:31,300
married talented food engineers they

00:05:28,930 --> 00:05:32,860
have new ideas every day they come to

00:05:31,300 --> 00:05:35,259
problems they can't solve and have to

00:05:32,860 --> 00:05:37,360
change things me as software guy I have

00:05:35,259 --> 00:05:39,430
to kind of do this dream next to it that

00:05:37,360 --> 00:05:43,360
keeps the whole thing running so I try

00:05:39,430 --> 00:05:44,889
to take everything apart one thing I

00:05:43,360 --> 00:05:46,449
wanted is a backbone kind of an

00:05:44,889 --> 00:05:49,479
universal language where everything

00:05:46,449 --> 00:05:52,870
talks about and I choose rabbitmq as my

00:05:49,479 --> 00:05:56,169
service or AMQP as a message protocol

00:05:52,870 --> 00:06:01,180
which is kind of that is my contract

00:05:56,169 --> 00:06:06,310
with all the parts let's start with the

00:06:01,180 --> 00:06:08,319
arm I'm a software developer suddenly

00:06:06,310 --> 00:06:10,360
something moves if I have a five which

00:06:08,319 --> 00:06:14,380
is quite scary I knocked over my coffee

00:06:10,360 --> 00:06:16,240
cup I made a hole in the wall it's not

00:06:14,380 --> 00:06:19,449
as safe as software development if you

00:06:16,240 --> 00:06:20,770
have a machine that moves around but

00:06:19,449 --> 00:06:22,659
it's also fun because it's a new

00:06:20,770 --> 00:06:25,120
challenge and it has also something else

00:06:22,659 --> 00:06:27,849
is you start learning you interact in a

00:06:25,120 --> 00:06:29,889
physical world software everything is

00:06:27,849 --> 00:06:32,949
fast it's based on the frequency of your

00:06:29,889 --> 00:06:35,380
CPU with hardware in a physical world

00:06:32,949 --> 00:06:37,639
you suddenly become very very slow in

00:06:35,380 --> 00:06:41,780
software terms you have plenty of times

00:06:37,639 --> 00:06:43,819
500 milliseconds who cares like no one

00:06:41,780 --> 00:06:45,710
cares if that's grapefruit opens or

00:06:43,819 --> 00:06:47,659
closes a little bit faster please not in

00:06:45,710 --> 00:06:49,729
the applications we're in so that keeps

00:06:47,659 --> 00:06:51,770
quite a new freedom of how to design a

00:06:49,729 --> 00:06:53,449
software it's not about how do you deal

00:06:51,770 --> 00:06:57,949
with concurrency how do you do way

00:06:53,449 --> 00:06:59,689
things that's all pretty easy so they

00:06:57,949 --> 00:07:03,500
have to talk we have this quite very

00:06:59,689 --> 00:07:05,379
slow physical system so javascript was

00:07:03,500 --> 00:07:08,180
quite an interesting decision because

00:07:05,379 --> 00:07:10,460
javascript is very good in IO heavy

00:07:08,180 --> 00:07:11,060
applications that's why it's used in a

00:07:10,460 --> 00:07:12,889
browser

00:07:11,060 --> 00:07:16,099
we constantly weight of a user to click

00:07:12,889 --> 00:07:18,889
on something or a browser to send us a

00:07:16,099 --> 00:07:20,689
push notification from from a service so

00:07:18,889 --> 00:07:21,379
that was actually quite an interesting

00:07:20,689 --> 00:07:23,270
choice

00:07:21,379 --> 00:07:25,610
most of the robotics companies they set

00:07:23,270 --> 00:07:27,169
on Python because python is what they

00:07:25,610 --> 00:07:29,779
teach you in the universities that's

00:07:27,169 --> 00:07:32,689
what you use when you do robotics but I

00:07:29,779 --> 00:07:36,259
found JavaScript it's actually a few

00:07:32,689 --> 00:07:39,469
better attributes components that work

00:07:36,259 --> 00:07:41,839
with robotics really well so in the end

00:07:39,469 --> 00:07:43,969
what I started doing is creating very

00:07:41,839 --> 00:07:47,529
simple processes very very clear

00:07:43,969 --> 00:07:52,759
interfaces so for the arm I wrote two

00:07:47,529 --> 00:07:56,629
classes a service which just listened so

00:07:52,759 --> 00:08:01,460
for amq messages our move that's it's

00:07:56,629 --> 00:08:03,830
only input it takes and it has one

00:08:01,460 --> 00:08:07,909
function that says move arm from

00:08:03,830 --> 00:08:10,669
position A to B so if I want to replace

00:08:07,909 --> 00:08:12,979
the hardware and change the arm I have

00:08:10,669 --> 00:08:15,319
to change some code but my interface

00:08:12,979 --> 00:08:18,169
stays the same the machine doesn't care

00:08:15,319 --> 00:08:20,629
if this is an arm with six joints or if

00:08:18,169 --> 00:08:22,909
it's a conveyor belt my contract in the

00:08:20,629 --> 00:08:25,310
software stays my whole system keeps

00:08:22,909 --> 00:08:29,330
working doesn't matter what their part

00:08:25,310 --> 00:08:32,479
is and obviously we got a bigger arm

00:08:29,330 --> 00:08:35,919
the one from automata was really good to

00:08:32,479 --> 00:08:38,990
prototype because it was cheap this is a

00:08:35,919 --> 00:08:41,449
company called Universal robots they do

00:08:38,990 --> 00:08:44,690
industrial grade machines you see them

00:08:41,449 --> 00:08:46,850
lots in automobile factories in other

00:08:44,690 --> 00:08:50,140
factories the other party we used it to

00:08:46,850 --> 00:08:50,140
put some spices on cheese

00:08:50,390 --> 00:08:59,370
with the dispensers very similar story

00:08:54,960 --> 00:09:01,830
we have the serial dispensers here now

00:08:59,370 --> 00:09:03,450
we're working on have more industrial

00:09:01,830 --> 00:09:05,160
grade stainless steel we live way

00:09:03,450 --> 00:09:07,650
further than the renderings we actually

00:09:05,160 --> 00:09:11,400
have prototypes I think of the latest I

00:09:07,650 --> 00:09:14,280
don't have pictures but same story here

00:09:11,400 --> 00:09:17,330
I need an interface I want the machine I

00:09:14,280 --> 00:09:21,480
have my architecture of the whole system

00:09:17,330 --> 00:09:24,330
use no chairs again my future goes

00:09:21,480 --> 00:09:27,630
JavaScript go away machine please talk

00:09:24,330 --> 00:09:28,950
to my AMQP directly now that's a super

00:09:27,630 --> 00:09:31,380
interesting challenge we're working on

00:09:28,950 --> 00:09:34,530
this because the dispensers there our

00:09:31,380 --> 00:09:38,100
components that's the one we develop the

00:09:34,530 --> 00:09:39,930
arm we buy in so we have the chance to

00:09:38,100 --> 00:09:43,440
make these talk straight to our

00:09:39,930 --> 00:09:46,280
architecture and then yeah we have all

00:09:43,440 --> 00:09:49,680
the different brains who does do

00:09:46,280 --> 00:09:52,560
sequencing of what to do next we have a

00:09:49,680 --> 00:09:54,720
brain that listens for locking just for

00:09:52,560 --> 00:09:57,060
us to kind of care for monitoring we

00:09:54,720 --> 00:09:59,550
have messaging that goes out if you have

00:09:57,060 --> 00:10:01,230
to refill something so we can make all

00:09:59,550 --> 00:10:04,830
these little services and just the touch

00:10:01,230 --> 00:10:07,500
to them and obviously the communication

00:10:04,830 --> 00:10:09,690
bit so we're in a kitchen we're never

00:10:07,500 --> 00:10:12,090
argument we want to do customization so

00:10:09,690 --> 00:10:14,820
where does this user input coming in

00:10:12,090 --> 00:10:16,710
today I guess one of the big one is

00:10:14,820 --> 00:10:18,900
delivery breeds these kind of services

00:10:16,710 --> 00:10:21,390
and if you look at their business model

00:10:18,900 --> 00:10:23,250
they go to a restaurant they give them a

00:10:21,390 --> 00:10:25,950
tablet and it's like here you can get

00:10:23,250 --> 00:10:27,270
your orders in and then if we go go in

00:10:25,950 --> 00:10:29,460
the restaurant and look at the kitchen

00:10:27,270 --> 00:10:30,840
on the counter or they have to tell they

00:10:29,460 --> 00:10:32,580
usually have to achieve four tablets

00:10:30,840 --> 00:10:34,920
because each of this delivery company

00:10:32,580 --> 00:10:37,920
puts another tablet there so today we

00:10:34,920 --> 00:10:39,450
recently started offering an IP I which

00:10:37,920 --> 00:10:40,980
is quite hard to integrate actually

00:10:39,450 --> 00:10:43,830
because you need have a public-facing

00:10:40,980 --> 00:10:46,440
service as a restaurant and we see how

00:10:43,830 --> 00:10:48,270
digital restaurants are at the moment so

00:10:46,440 --> 00:10:50,580
this is a big challenge we have how do

00:10:48,270 --> 00:10:54,210
we integrate our machine into these

00:10:50,580 --> 00:10:56,580
ecosystems so the delivery part that we

00:10:54,210 --> 00:10:59,070
can do how do we go into an ecosystem

00:10:56,580 --> 00:11:02,070
these are other challenges

00:10:59,070 --> 00:11:04,130
again note we are here in the JavaScript

00:11:02,070 --> 00:11:06,779
world that's why I'm here

00:11:04,130 --> 00:11:09,329
Express at the moment is a REST API man

00:11:06,779 --> 00:11:11,310
currently going to tomorrow graph QL y

00:11:09,329 --> 00:11:14,519
hopefully finding a way to kind of merge

00:11:11,310 --> 00:11:16,860
a little bit old-fashioned system of the

00:11:14,519 --> 00:11:20,190
gastro industry and to a bit newer level

00:11:16,860 --> 00:11:23,550
and we want this machine to talk to us

00:11:20,190 --> 00:11:25,380
because they have to optimize we have to

00:11:23,550 --> 00:11:27,930
update them so we kind of have need to

00:11:25,380 --> 00:11:30,420
get our source sort of backdoor to go

00:11:27,930 --> 00:11:33,649
into it and we want to connect them to

00:11:30,420 --> 00:11:36,269
all these services I called about before

00:11:33,649 --> 00:11:37,740
and in the end we have multiple

00:11:36,269 --> 00:11:41,069
restaurants we want them in multiple

00:11:37,740 --> 00:11:43,110
different places and we want them to

00:11:41,069 --> 00:11:45,300
talk to each other because our customers

00:11:43,110 --> 00:11:48,269
we focus on a mostly chain casual chain

00:11:45,300 --> 00:11:50,670
restaurants so how do they talk to each

00:11:48,269 --> 00:11:54,029
other how do they get to know which

00:11:50,670 --> 00:11:56,790
place produces how much of what that I

00:11:54,029 --> 00:12:02,610
can optimize their ordering and yes who

00:11:56,790 --> 00:12:05,010
saw that would be no chairs so where are

00:12:02,610 --> 00:12:08,490
we going from here so at the moment

00:12:05,010 --> 00:12:10,800
everything is quite like algorithmic

00:12:08,490 --> 00:12:13,860
driven very pragmatic it's it's on a

00:12:10,800 --> 00:12:17,180
prototype level but that's like to

00:12:13,860 --> 00:12:20,420
dispensing for an example having

00:12:17,180 --> 00:12:23,370
ingredients like kale or broccoli or

00:12:20,420 --> 00:12:26,910
fish cubes these are quite challenging

00:12:23,370 --> 00:12:28,470
things to dispense accurate so you find

00:12:26,910 --> 00:12:31,290
in the foodist industry you'll find like

00:12:28,470 --> 00:12:33,959
big machines they kind of take it apart

00:12:31,290 --> 00:12:35,699
put it in hundreds of buckets they know

00:12:33,959 --> 00:12:37,380
the weight of each bucket and mix to get

00:12:35,699 --> 00:12:40,350
the results but I mean it's a huge space

00:12:37,380 --> 00:12:42,449
to work on so what we want to do is go

00:12:40,350 --> 00:12:43,740
on a tiny space so one of the big

00:12:42,449 --> 00:12:45,959
challenges how can we make the

00:12:43,740 --> 00:12:48,510
dispensing accurate straight in on a

00:12:45,959 --> 00:12:50,100
plate and yeah computer vision is a

00:12:48,510 --> 00:12:51,899
great thing we're working on so with the

00:12:50,100 --> 00:12:53,910
professor's we have in our advisory

00:12:51,899 --> 00:12:55,319
board the universities is something

00:12:53,910 --> 00:12:57,329
we're really interested in kind of

00:12:55,319 --> 00:12:59,910
looking at the food that's coming on a

00:12:57,329 --> 00:13:02,790
conveyor belt recognizing what's coming

00:12:59,910 --> 00:13:04,290
and therefore control the speed and get

00:13:02,790 --> 00:13:06,269
the momentum of these these conveyor

00:13:04,290 --> 00:13:08,630
belts to dispense straight into a plate

00:13:06,269 --> 00:13:11,420
these are super interesting projects

00:13:08,630 --> 00:13:14,350
at the moment we're on the very side of

00:13:11,420 --> 00:13:17,060
the plate we get chopped ingredients

00:13:14,350 --> 00:13:19,190
humans prepare most of things but we

00:13:17,060 --> 00:13:23,420
want to go back because what we can do

00:13:19,190 --> 00:13:26,180
is we can track exactly what people eat

00:13:23,420 --> 00:13:28,699
how they've managed to do it how much

00:13:26,180 --> 00:13:31,190
ingredients the restaurants need

00:13:28,699 --> 00:13:33,019
therefore want to predict how much they

00:13:31,190 --> 00:13:35,389
need to order how they do their stock

00:13:33,019 --> 00:13:38,300
management and that's a really good idea

00:13:35,389 --> 00:13:41,329
to go further back and help to get the

00:13:38,300 --> 00:13:45,230
logistics part in I think our partner

00:13:41,329 --> 00:13:47,899
our sponsor or investor Accardo is a

00:13:45,230 --> 00:13:50,569
great great partner to do that and

00:13:47,899 --> 00:13:54,019
talking about the future I hope some of

00:13:50,569 --> 00:13:59,670
you may be also here we have some chops

00:13:54,019 --> 00:14:04,170
open thank you for listening now Quinto

00:13:59,670 --> 00:14:04,170

YouTube URL: https://www.youtube.com/watch?v=ZtV_825gP9A


