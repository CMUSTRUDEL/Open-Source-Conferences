Title: Hello Subgrid! – Rachel Andrew at CSSconf EU 2019
Publication date: 2019-05-31
Playlist: CSSconf EU 2019
Description: 
	We have had Grid Layout in browsers for two years. Long enough for us to start to find the edges, and discover things we really wish it could do. The biggest missing feature from Level 1 was subgrid, which has become the main feature for Level 2 of the specification. In this talk I’ll introduce subgrid, with use cases, example code and some thoughts on where we might see Grid going in the future.
Captions: 
	okay hello there's an awful lot of youout hereWow it's very very cool to be here I wasat the since then so it's very nice to be herebut I'm very sad that this is is thelast of type I'm so pleased to be hereso I'm rich Landrieu it's becomingincreasingly difficult for me to tellpeople what it is that I actually do Ikind of that they ask me so many thingsfor conference badges say can you putyour company down there and I think juststop doing stuff on the web so amongstthat stuff I'm a CSS working groupmember and I represent frontiers and itsreally as sort of part of that work iswhy I'm here talking to you today Imentioned that yes I was here in that I was in fact here talking aboutCSS grid layout slightly jumping the gunit has to be said because CSS gridlayout didn't ship into browsers untilthe spring of prepared and I was starting to feel abit like the CSS vaporware lady by thetime it eventually got out into browsersso I was quite pleased when it dideventually happenso a carrot two years on amazinglyalthough I feel like I've now spent halfof my life talking about thisspecification and I've shipped stuff youknow I've got production sites that usegrid a lot of you have probably gotproduction sites that are using grid tosome extent and we're starting to seepeople coming back and saying well thisgrid things all really good and but I'vediscovered that it doesn't do this orI've got this use case that doesn'treally work properlyyou know how are we going to how can wedo that so I'm kind of interested reallyin what's nextI really sort of see myself as a problemsolver whatever I've done in theindustry has been about solving problemsand that's why I really love working onCSS because we've got all of theseamazing problems to solve everywhere youlook there's a new problemsomeone's bringing a problem and which Iwork out to do that and one of theproblems that was that we sort ofimmediately started to see and we kindof knew this was going to be an issuewas this issue that grid items you knowyou can say display grid but only thedirect children of the grid become griditems so only they can be laid out onthe grid that you've created if youcreate a twelve column grid only thedirect children can sit on that grid andin the level one specification we hadthis idea of sub grids and it didn't getimplemented by anyone and we sort ofchanged how maybe that was going tohappen and and there was some debateabout it and eventually it was removedfrom the specification from the levelone spec so he kind of finished thatspecification but I was very very keenthat this sub grid feature wouldn't goaway and as soon as people started usinggrid I could see that yes people reallydid need this sub grid feature so thisis kind of the really good example ofwhy you might need sub grid we've got apattern like this you've got a set ofcards and they've got neat headers andfooters I imagine that everyone has hada designer bring to them a design likethis with all of the same content in allof the boxes because that's exactly howall websites work we have an identicalcontent in every box all of the time andof course you get it you implement thisyou say well that's a nice grid layoutreally easy grid layout like your basicgrid example will give you that layoutso you build that layout and then youget it into the CMS and this happens andthen the designer says no those footersare all supposed to line up with eachother and you're like yeah and it's kindof like we've pushed this problem alevel deeper because we used to havethis problem we had this problem withfloats that you couldn't line at thebottom of the boxes and then we got gridand we own flexbox and we could line atthe bottom of our boxes but if yourboxes are nested inside a grid item evenif they are a grid themselvesyou still can't line at the boxesbecause they're independent grids andthis is a fundamental thing about usingthe display property values of displaydon't inheritso the kind of wine back and understandthe actual problem CSS has got thisconcept of normal flow or block andinline layout and that's pretty much thefirst thing you learn when you learn CSSyou've got block things and they kind ofspread out and take up all the space andyou've got inline things like words andthey go next to each othernow that's normal flow and it can beworth thinking that essentially CSS isalways trying to go back to this layoutmethod so you can change the value ofdisplay you can make something displayflex you can make something display gridand it's children will become flex orgrid items but they're children theinternals of those boxes they go rightback to normal flow now that's kind of agood thing because otherwise once yousaid display grid you'd then have to goand say oh you know these things insideour grid items you can't really besetting yourself all the way downbecause generally normal flow is whatyou want it means that we can write thepage of HTML and just load up in abrowser and it's readable you know mostthe time that's actually what you wantso here's a simple flex example we'vegot a normal flow heading and aparagraph didn't have to do anythingabout their layout then I've got thismeteor object said display flex and theimage in the content our Flex items butthe content has a heading and some and aparagraph that's gone right back thereto normal flow so that's kind of what'shappening and that's why we can't justmake things the nest is somewhere in thestructure participate in the grid ourcard internals I've made my card a gridso I can make my grid item I can nestgrid to make my grid item a grid itselfso each of my cards a little mini gridsbut they don't know about each other andI've got the Firefox good inspectorturned on here now and you can see thegrid on that card and you can see howthe lines are extending out and they'renot lined up with all the other cardsthere so we have this problem there aresome times where we do want things nestit down inside the structure to be ableto somehow participate in the grid thatwe have defined on the parent now we dohave a way to make indirect children usea grid or a flex layoutand some of you might have come acrossso ready we've got display contents nowdisplay contents is one of the boxgeneration values if you say displaynone that removes the box and everythinginside it so it's as if that thing wasnever there on in your design as you cansay display:none on a containereverything inside gone can't see itdisplay contents does a similar thingwith the box itself but leaves thechildren alone so if you've got a boxyou say display contents on that box thebox is removed but the children stayvisible and then participate in whateverlayout they then become a child of soI've got a little example of that we'vegot a grid layout here and nested insideone of the grid items is actually a uland a nested inside that it's got somelist items so there's the HTML so I'vegot a div with the class of grid that'sgonna be my grid container I think gottwo divs there direct children I've gotare you well that is also a direct childand then inside that you well there aresome list items that you can see sothere's the CSS the direct grid childrenhave that sort of pale background onthem so the UL as well and the direct ULchildren they have a pink background sowe can see that they're actually a childof the UL and not a child of the gridnow if I wanted to remove the box of theUL I need to say display contents on theUL it vanishes the list items can nowparticipate in the grid layout and laythemselves out so that's pretty coolthat solves some sort of pattern and youcan see that's only happening to the Boxthe children are still the directchildren of a ul they've still got thatpink background color because they'restill a direct child everything elsestill applies just the box of the UL hasbeen visually removed but that does notsolve our card problem if we displaycontents our card we get this becausethe card box has been removed and so wenow have the sort of components insidethe card the header and the contents andthe footer and now beam order placedacross the gridand that's not what we wanted that mightbe a pattern that you want sometimes butit's not the pattern that we're tryingto build today and I can't talk aboutdisplay contents as well without alittle warning that although it haspretty good browser support there isalso a really gnarly accessibility bugwhen you say display:none that doesactually make the thing invisible forscreen readers and so on as well it'slike it goes away and then you mightwant to bring it back later displaycontent is only supposed to affect thevisual display but due to a bug inbrowsers it is actually removingelements from the accessibility tree andtherefore rendering it not very usefulfor the things it would be useful forwhich is allowing something to have asemantic box around it for you knowsemantic purposes and for accessibilitypurposes and saying hey I'm a list it'sactually removing that information aswellbrowsers are fixing this I think Firefoxhave pretty much fixed itI know chrome have been you know fixingit I've been seeing the notifications onthat issue coming through so browsersare taking this very seriously now it'sbeen pointed out and are fixing theproblem but if you do decide to usedisplay contents just test very verycarefully in assistive technology thatyou haven't made a terrible mess whiledoing ithowever we'll go back to our cards andour issue of wanting these cardinternals to line up using displaycontents even if it wasn't boogy and hadgreat browser support that doesn't giveus what we want because we want to keepour boxers we want to keep our cardbackgrounds so what are we going to doand it's this issue is where sub-gridbecomes useful so this is a value forgrid template columns and grid templaterows and it basically makes it possiblefor you to declare that the children ofa grid item become a sub grid and that'smuch easier to understand with someexamples and all of the code for theseexamples is online and it's with myresources so you can go and have a lookand play around rather than trying tosort of squint it on the screen and workout what's going on so we can make agrid item a grid you can say displaygrid asare down as you like but at the momentthat grid becomes this uniqueindependent thing it's a nested gridit's completely separate to the parentit has different lines for columns androws if you want that nested thing toline up with a parent you're gonna haveto do some very careful things with yourtrack sizing to make that work so hereI've got some CSS defining an outer gridand that's got the white border on andthere's an item that sits on that gridand the items also a grid with columnand row tracks and the serve item sitson that which the serve item the pinkthing is on the internal grid so againfive got screwed inspect if you'reworking with grids or with Flex box thatyou know the inspectors in Firefox arefantastic you really really do want tobe using them make everything so mucheasier when you can see where the linesare of your grid especially playingaround with this stuff so you turn onthe Firefox good inspector and you cansee the outer grid there on the parentyou can see how that pink box doesn'tline up with those grid lines it'sseparate and if we have a look at thegrid on the childthere's the grid on the child and thepink box lines up with the lines thatare on the child so fairly recently infirefox you've been delayed bailoutsource of set multiple grids displaythem at once very handy if you're usingsub grid so you can kind of see how thelines line up and or don't line up inthis case when we're looking at our itemso it basically sort of started overwith a new grid and so what sub gridlets us do it lets us selectively optgrids into the parent grid so we candecide if we want to opt our columns orrows or both into using at the parenttracks so what I've done here I've saidgrid template columns sub grid and youcan see what's happened the item is nowusing the columns that are defined onthe parent and so the pink item is nowpositioned according to those lines notto any internal lines and therefore itlines up with the rest of the tracks nowwe could do this for rows we could saygrid template rows sub grid and here I'mdefining my own column so the columnsdon't line up and that's because that'swhat I decided I willbut here four rows were using the tworows row tracks that are created and theitem is sort of been being stretchedover those because that we're goingacross two tracks we can also create asub grid in both dimensions so that willtie our sub grid completely to thetracks that are available for rows andfour columns so here were saying gridtemplate columns sub grid and gridtemplate rows sub grid and that's reallythe basics of the spec it's a verysimple thing it is essentially justanother value for grid template columnsand grid template rows that says youknow I'm not going to define my owncolumns or rows I'm just going to usethe ones that are already there on theparent now as with any specificationthere are some subtleties there thereare some things you might need to beaware of one of those is that linenumbers we don't use the line numberfrom the parent because if you did you'dhave to figure out exactly where on theparent your sub grid component was thatmight change it could be a component youuse all over the place so line numbersrestart inside the sub grid so in thatway a sub grid is no different todeclaring the the the tracks and use theline numbers they start from one if yourwork in English which is left-to-rightline one is from Y on the left-hand sideof your sub grid component just workingin exactly the same way that a normalgrid would so in this example here youcan see that column line one is actuallyon line two of the parent grid now youmight want to know where on the gridyour sub grid is you might care aboutlining up against a line that's actuallyin the parent are lining up somethinginside that grid but again it's lyingthe parent and to do that if you nameyour parent lines they will get passedinto the sub grid so you've used linenames on the on the parent they'll getpassed in and you can reuse them whenyou position things inside the sub gridso for instance if on my parent I'venamed cold start and call end when I'mpositioning the pink item inside the subgrid I can say call start and call endrather than worrying about the linenumbersI have a feeling that more people willuse named limes once they're usingsubgrade quite a bit so don't EE see somany people using named lines it's notsaying that tend to get in my emailpeople asking about I have a feelingthat once people start to use subgradethe named lines that get passed throughmight be quite useful so here's the codefor that and you can see where we namedlines with the square brackets we'renaming the line and then you've got thetrack size coming after it and then oursub-item can actually use those thosenames when we place the item but youmight also want some names that just ascope to that sub gridded item you mightwant to give the sub grid lines somenames and now we do that by basicallylisting the line names after the subgrid keyword who don't have tracts inorder to put our lines between so theylook a bit like that so you might sayyou've got your sub grid keyword andthen you're going to have all of thenamed tracks in square brackets becausethat's how we name those things so thereI've just named two lines so this withour example would let us do somethinglike this I've got my named lines on theparent I've also named all of the linesof my sub grid and so I've got I can useeither to position things I can use theparent line so I can use the sub gridlines it's up to me and so here's sortof a little worked example of that I'vegot my named lines on the parent nowI've added my named lines on the childand then I'm positioning two items oneusing parent lines and one using childlines so that's sort of a useful way tobe able to so scope line names to justthe the circuited item itself I thinkfairly obviously and logically the subgrid inherits the gaps from the parentso if you've used the gap property yourrow gap or column gap that's gonna getpassed through into the sub gridded itemwhich i think is probably what you'dexpect if you've got gaps on the parentin your lining things up against theparent you'd probably expect that wouldget passed through into your child itemand you can sort of see how that workshere but sometimes you want things toline up with a parent tracks but youmight actually want to say close the gapbetween two items perhaps you'veyou know some content with a box belowit you don't want to have a visible gapbetween the two things so to enable thatwe can change the gaps on the sub gridso you just used the gap properties asnormal on that sub grid at item so youcould if you wanted no gap like in thisexample I've said row gap zero settingthe gap to zero and it's a bit like ifadd as a negative margin then to theitem so it will sort of get into the gapand it won't expand out of the top ofthe there so good that would be reallyweird and not very useful it will justgo down into any gaps and sort of fillin the gap if you had said a larger gapthan is on the parent but it's as ifyou've added a margin and it will sortof you know go in but it's like that theline of the grid sort of runs down themiddle of the gap basically and you cansort of get into that by setting the gapto zeroor whatever you want and hopefully it'sme it's sort of fairly obvious so I'mlooking at this stuff that sizing ofitems in the sub grid can obviouslychange the size of the parent tracks soif you've got a row which is set to autowhich is the default for for grid tracksand you put more and more content andthat's going to obviously make the subgridded row grow but as long as theparent rows is auto that will grow aswell so it kind of works pretty much asyou'd expect it works pretty much likeyou've just nested a grid and you happento be using you at the tracks from theparent but everything else works in kindof the way you'd expect if you've nestedone grid inside the other or if you'vealready got designs where you're nestingone grid inside the other so this is howwe would get our card example to workwe'd basically stretch our card overthree tracks of the grid which meansthat the footers are now all in the samerow which means they all line up witheach other and when our footer which istaller makes that row bigger it makesthe whole row bigger and we just getspace below the items that don't have asmuch content which is really what wewanted and we can also remove the gapsthrow on the parent grid on the child ifwe don't want to have the bigger row gapwhich we have between thetwo items so this is this is pretty coolthis allows us to create that pattern itallows us to nest grids and let themthen participate in the sizing really ofthe parent and you can do this really asfar down as you need to do now I've beenplaying around this for a little whileand just sort of I like to sort of thinkOh will this solve any other problemsthat we've got and because you know thisis a sort of very obvious use casehaving a set of cards like this this wasone of the first things that was broughtto me well why can't we do this there'salso the example of you know maybehaving like a wanting things that are nestedfurther down in the structure to alsouse that same kind of the obvious sub grid examplesbut I think there's a few other thingsthat I've started to realize we can dobecause we've got sub grid and yeah thisis one of them if you use an explicitgrid so this is where you say gridtemplate columns and define the tracksome grid template rows and define thetracks that creates what we call theexplicit grid the difference betweenthat and the implicit grid is theimplicit grid is when you just say ohcreate as many rows as you want to fillthis to fill up with content which Ithink is a lot of the time what we do ifyou've got a set of cards like this andyou just want them to keep on fillingcards and keep creating grid rows asmany as you need you would just use theimplicit grid now in practice prettymuch the only difference between theexplicit grid and the implicit grid thatpeople run into is that you can targetthe end line of the explicit grid withminus one in other dimension which doesmean that you can you know if you'reusing the explicit grid you can say minus span to the end of the grid so that'swhat we're doing here I've got fiveexplicit grid rows my items are havebeen placed into that and I've got oneitem which is positions from grid Row to minus of the explicit grid so it stretches tofull height and that's really what Iwanted to happen but then I have toremember that line minus line if the explicit grid so if I don'tknow howmany of those items I'm going to have Idon't know how many rows I'm gonna havethem I have one row or might have ahundred rows I don't know and so I can'tactually get it though row minus onebecause I'm going to use the implicitgrid I'm going to create as many tracksas I need and so if I try and do thatone two minus one thing that happens andthat's not what I wanted at all and thiscomes up a lot I would get a lot ofpeople asking well how can I span to theend of my implicit tracks and I'm likewell not very easily because we don'tknow what we've got so what I reallywhat I want that pink block to be linedup with the rest of the cogs what ithave the same size as the rest of thecolumns they're going to be flexible andbut I want to be able to get to the endof the number of rows that are createdso this is what that sort of looks likeand in terms of the CSS where I'm youknow I've got no defined implicit rowsI'm using a grid Auto rows to give myrows a height so what I'm looking atthat then we can't talk that inline theimplicit grid I'm looking at sub gridI'm thinking I think we can probablysolve this with sub grid because we'venow got a way of saying I want all mycolumns to be everything lined up incolumns but those items to be able tocreate implicit tracks and so it doesinvolve an extra container because Ineeded something to sub grid so I'veadded a container a wrapper around myitems and that's going to use a sub gridfor columns so that means that thecolumn tracks are going to be the samefor the the item which is outside of thewrapper and the items that are insidethe wrapper so you can see there whereI've got my items and they're justcreating as many rows as they needinside that sub gridded area so I'm notgoing to submit on rows I've got a subgrid on columns I'm just creating theitems one of one row after the other asmany as I needbut that pink item is essentially justput in one row of the parent grid so itcan stretch as tall as it needs nomatter how many rows are created andthat basically just looks like this soI've still got no to find explicit rowsand I've got the items there which is asub grid for the columns so that the thepinkitem could be the same size as all theother items and then I've got the fullheight one which is going one two minusone but essentially just in one row ofthe parent grid now we can use that wecan do that when we've got sub gridbecause sub grid lets us sort of usedthat that one grid on the parents foreverything to be lined up column wiseand let me do something different withmy rows I think as we start playing withthis there's probably quite a few otherlittle pans that aren't obvious sub gridcandidates but they will be able to fixby using the sub grid now that's allmarvelous but in my role as CSSvaporware lady I need to have some badnews and that's fact that we don'tactually have anything in a live browserthat's going to be in front of yourclients just yet that's good isn't it Ilike that I'm gonna be sad when someoneships it and I'll not be able to showwhile it's all red but slightly betternews is that Firefox have actuallyshipped sub grid in nightly just lastweek all Lizzie yeah I forgot theFirefox so everything I've shown youhere is there they're screenshotsthey're all screenshots from Firefoxnightly you can get a copy of Firefoxnightly and all the examples from thistalk will work and so if you don't havea copy of any please go and download itand have a play it is really reallyimportant that you do and I'm going toquote myself from quoting me in until a spec is done and implemented tohave a look and say it's rubbish wellit's too late and browsers putting stuffout for us behind flags or in likenightly versions of browsers they giveus a chance to contribute because whilea spec is only in you know well we'vegot all that read on can I use thatmeans that so grid is not in anybody'shands get it's not out on any productionwebsites nothing is going to break if wehave to change something and that's thesame for any spec that is in developmentthat's just you know just starting toget out there and one of the browsers itis really the best time to be able toplay with that and to say hang on I cansee a use case that this nearly solvesbut doesn't quite perhaps perhapsit could so it's a time for us tocontribute and I think it's moreimportant than ever that web developersget involved with the web platform we'vegot a version of grid to experiment within the first place so the reason that Ihad grid you know now is playing aroundwith it from sort of because it was implemented prefixed inIE pivotal in allowing people like me toplay with it and evangelize the spec andhopefully try and get the interest ofweb developers and actually try and helpmove this forward and I think as we havefewer rendering engineswe're losing places where thoseexperiments might happen and I thinkthat makes it even more important thatus as the web development community useour influence on the browser's to theleft and we do have influence and so howdo we indicate what it is that weactually want the first thing we justneed to tell browsers what we want inthe platform and we can often just dothat by going along to their booktrackers here is the book in chromiumfor subgrade support and just flaggingup there's a like thing or a follow staryou can you can click on there to sayyou know yes I think so good isimportant I would like to have it andhere is a handy QR code you can use thatQR code you will go directly to thatbook tracker and you can just like thatbook and don't leave sort of me tocomments on bugs you know and we're nothere to pester browser engineers butwe're just here to say hey yes this issomething that I need as a web developerI would find it useful if you would likejust off talk a bit more about it andshare a bit more information then writeup features like so good or anythingelse that you want to see in browsersright of your use case write up theproblems that your feature will solvebecause it's seeing those use cases youknow web developers actually saying heywe need this and we need this because ofthis reason that's very compelling forpeople on the working group browservendors to actually think aboutimplementing it and solving a newproblem sometimes we get a feature thatis just in one browser for example it'slikely that Firefox are going to shipsub-grid before anybody else at whichpoint the entire web community will sayyeah Rachel that's very niceuse it because it's only supported inone browser now we've got featurequeries you could potentially use subgrid as enhancements you could shipsomething like that card design andwhich does have obviously not lined upheaders and footers that's fine if thebrowser has sub grid we can check forsub grid and we can use sub grid for thebrowsers that support it the ones oursupporter it looks better now this isimportant because if we're using it thenbrowsers are having a look to see whatit is that we're using because if you'rea browser that doesn't implementsomething you don't want everyone sayingwell it looks better in this otherbrowser so it kind of sends a messagewe're using this we'd like to have itand also use new features when they'rebehind a flag or in a nightly version ofthe browser as I say this is your chanceto be to test the web platform and offerfeedback you know you can you can be abeta tester of this stuff and you canactually make it better with yourfeedback and so what do you do with thefeedback well you might find a bug ifyou find a browser bug if it's like wellthe spec says you should do this find abrowser book it's not log to go and logit that's really helpful to the browserengineers who are working on this if youfind something that's missing from thespecification then come and tell the CSSworking group all of the CSS workinggroup issues are on github so you cancome onto github you can search theissues we're pretty good at them thenbeing sort of marked up with the name ofthe spec so you can search like CSSsquid issues for example if you realizethat your issue is not locked and we'renot talking about it then you know youcan add a new issue just like you canagainst any project you know CSS is justlike any other open source project it'sjust a very big one it's quite a longtime to get things sorted but we areinterested in the things that you haveto say so you can raise an issueparticularly it's around layout you canalways then prod me and say hey I'veraised this issue you know could youhave a look when much rather be able tokind of promote the things that arecoming out of the web developmentcommunity it's a lot more powerful thanthe stuff coming from just right insidethe working group so this is that thisis just the issues repo there as I sayyou can see in the square brackets thenames of the specs and it go and have apoke around anything that you'reparticularly interested in go and have alook and see the sort of things the sortofwork that's being done it can take awhile for things to be discussed butwhen we do discuss things at aface-to-face meeting or on our phoneconferencesthat's all minuted and the minutes arethen posted back to the issue so you cankind of follow along and see what theprogress of something is I'm really veryvery keen to encourage people toparticipate in the web platform and ifyou're people who build things usingthese features then you're exactly thesort of people who should becontributing and the browser engineerspeople work on browsers and the peoplewho write specifications are all veryvery clever folk but a lot of them don'tbuild websites anymore or haven't builtwebsites were a very long time so kindof your input is really really importantand also as a person who uses CSS youget an awful lot back by working on thisstuff by getting involved with thisstuff yeah I left school at no maths or science background and thethings I have learned by justcontributing and yet some has been toldI'm wrong but having conversations withbrowser engineers and people who havereally in-depth knowledge of this stuffyou know I couldn't have learned thatstuff on any course I couldn't havelearned that stuff out of any books andso contributing has actually given me ahuge amount back and I really wouldencourage anyone whether you're brandnew to the industry you've been doing itfor years to see how you can getinvolved follow along and do speak upand she might be the only person who'sactually spotted that missing use caseand you know you don't have to beendoing CSS foreverto realize that there's a glaring holethat no one has noticed so please do getinvolved and all of my demos and so onare at that URL and I'm around all dayI'm always very very happy to talk aboutlayout thank you very much[Applause][Music]
YouTube URL: https://www.youtube.com/watch?v=vxOj7CaWiPU


