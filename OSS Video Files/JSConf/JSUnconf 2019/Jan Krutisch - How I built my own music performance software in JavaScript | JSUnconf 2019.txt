Title: Jan Krutisch - How I built my own music performance software in JavaScript | JSUnconf 2019
Publication date: 2019-05-23
Playlist: JSUnconf 2019
Description: 
	
Captions: 
	00:00:08,300 --> 00:00:13,740
yeah I am going to talk a little bit

00:00:11,160 --> 00:00:15,990
about the thing that sits here and my

00:00:13,740 --> 00:00:18,869
own software and stuff but like I said

00:00:15,990 --> 00:00:21,869
this morning I've been asked to do

00:00:18,869 --> 00:00:24,600
something different I'm I'm not the best

00:00:21,869 --> 00:00:26,250
human beatbox in the world as you can

00:00:24,600 --> 00:00:29,369
imagine otherwise I wouldn't be a

00:00:26,250 --> 00:00:32,489
software developer anymore because human

00:00:29,369 --> 00:00:36,510
beatboxing is just so much more fun but

00:00:32,489 --> 00:00:38,879
if you're interested in how this works

00:00:36,510 --> 00:00:40,890
and what you can do yourself you can

00:00:38,879 --> 00:00:44,879
follow along so this is going to be like

00:00:40,890 --> 00:00:46,980
a very simple explanation I'm going to

00:00:44,879 --> 00:00:49,649
show three fundamental sounds of human

00:00:46,980 --> 00:00:57,600
beatboxing the first one is the bass

00:00:49,649 --> 00:01:00,210
drum it goes a little bit like this this

00:00:57,600 --> 00:01:03,059
is not it could be louder but that's

00:01:00,210 --> 00:01:05,729
probably fine and if you want to follow

00:01:03,059 --> 00:01:07,159
along and you want to try this yourself

00:01:05,729 --> 00:01:09,780
you should probably stand up because

00:01:07,159 --> 00:01:13,290
it's it's kind of hard to beat barks

00:01:09,780 --> 00:01:18,299
while sitting so if you want to you want

00:01:13,290 --> 00:01:21,750
to do that nice and so there are there

00:01:18,299 --> 00:01:24,810
few fundamental ways how you can do a

00:01:21,750 --> 00:01:28,470
bass drum and it's basically two

00:01:24,810 --> 00:01:31,850
different types of yeah sounds you can

00:01:28,470 --> 00:01:39,270
make the first one is a little bit like

00:01:31,850 --> 00:01:40,320
try that and it sounds unimpressive but

00:01:39,270 --> 00:01:41,939
that's because you don't have a

00:01:40,320 --> 00:01:44,310
microphone like a lot of human

00:01:41,939 --> 00:01:45,479
beatboxing relies on the fact that you

00:01:44,310 --> 00:01:49,020
have a microphone and the microphone

00:01:45,479 --> 00:01:51,540
responds in a specific way to the sound

00:01:49,020 --> 00:01:56,090
waves that your lips make and it sounds

00:01:51,540 --> 00:01:58,979
dull like that sounds like nothing but

00:01:56,090 --> 00:02:01,020
if you have a microphone it will sound

00:01:58,979 --> 00:02:03,060
more impressive and the other one is

00:02:01,020 --> 00:02:05,210
actually a D so you could do something

00:02:03,060 --> 00:02:05,210
like

00:02:13,459 --> 00:02:18,569
and at some point at some point you need

00:02:16,980 --> 00:02:21,000
to start breathing and then things go

00:02:18,569 --> 00:02:23,970
wrong that's that's totally normal for

00:02:21,000 --> 00:02:28,739
beginners as well the next one is a

00:02:23,970 --> 00:02:33,090
snare clap rimshot kind of thing and the

00:02:28,739 --> 00:02:41,760
original human beatbox people mostly did

00:02:33,090 --> 00:02:44,370
like like and it's like and it sounds a

00:02:41,760 --> 00:02:51,329
little bit like a synthesized snare of

00:02:44,370 --> 00:02:53,069
sorts and yeah try that again now the

00:02:51,329 --> 00:02:55,860
interesting thing is if you get into the

00:02:53,069 --> 00:02:57,959
breathing rhythm thing you actually need

00:02:55,860 --> 00:03:00,599
to learn how to do this backwards so by

00:02:57,959 --> 00:03:02,760
not pushing out air but to breathe air

00:03:00,599 --> 00:03:04,590
in and this is I I'm not really good at

00:03:02,760 --> 00:03:06,780
this so you don't need to try this

00:03:04,590 --> 00:03:09,470
because it's hard it goes a little

00:03:06,780 --> 00:03:09,470
something like this

00:03:09,739 --> 00:03:15,810
and I'm breathing in ear air while I'm

00:03:13,560 --> 00:03:22,380
doing that so it helps with a breathing

00:03:15,810 --> 00:03:25,170
rhythm now the second one is a a clap is

00:03:22,380 --> 00:03:28,940
really hard to to do with a mouth it's

00:03:25,170 --> 00:03:32,430
easier to just clap and that's and

00:03:28,940 --> 00:03:34,440
that's because a clap is usually a

00:03:32,430 --> 00:03:36,750
couple of impulses that come like in

00:03:34,440 --> 00:03:39,720
random order like if you if you see how

00:03:36,750 --> 00:03:42,060
drum synthesizes synthesize collapses

00:03:39,720 --> 00:03:44,430
it's relatively complicated and so what

00:03:42,060 --> 00:03:47,310
you can do is a rimshot which is the

00:03:44,430 --> 00:03:50,280
sound when the drummer hits the rim of

00:03:47,310 --> 00:03:52,709
the snare drum so the outer rim and a

00:03:50,280 --> 00:03:57,870
and it it's a it's a very harsh sounds

00:03:52,709 --> 00:04:05,700
look like and it's really just and and

00:03:57,870 --> 00:04:08,400
that one you can also do backwards and

00:04:05,700 --> 00:04:12,569
now we have two sounds and that's

00:04:08,400 --> 00:04:16,229
already something right and the last one

00:04:12,569 --> 00:04:19,250
is the high hat cymbal and that's really

00:04:16,229 --> 00:04:19,250
easy it's really just

00:04:21,879 --> 00:04:31,060
yeah that sounds right so if you want to

00:04:27,680 --> 00:04:34,250
turn this into a simple rhythm there's a

00:04:31,060 --> 00:04:47,270
really nice like a really nice way to

00:04:34,250 --> 00:04:50,629
say which is just and like I said I

00:04:47,270 --> 00:04:53,210
really suck at this so here's a couple

00:04:50,629 --> 00:04:56,870
of names to Google of people who can do

00:04:53,210 --> 00:05:00,199
it really really well just look at each

00:04:56,870 --> 00:05:02,389
YouTube and look at these people doing

00:05:00,199 --> 00:05:04,569
things so much better than what I can do

00:05:02,389 --> 00:05:04,569
here

00:05:06,009 --> 00:05:25,250
cool nice okay so why am i doing this so

00:05:21,349 --> 00:05:26,860
last year's j/s conf EU in Berlin was

00:05:25,250 --> 00:05:29,389
really special for me because I

00:05:26,860 --> 00:05:32,900
participated in the call for artists and

00:05:29,389 --> 00:05:36,199
I've been I've been doing weird stuff at

00:05:32,900 --> 00:05:38,389
J's confit you for awhile I for some

00:05:36,199 --> 00:05:41,569
reason even opened up J's confluence

00:05:38,389 --> 00:05:43,069
with another musician doing my live

00:05:41,569 --> 00:05:49,400
coding stuff that I was doing back in

00:05:43,069 --> 00:05:51,020
the time and last year we did music

00:05:49,400 --> 00:05:53,960
during the breaks we did the

00:05:51,020 --> 00:05:57,080
introduction we did a lot of things and

00:05:53,960 --> 00:06:00,110
after the conference ended I was invited

00:05:57,080 --> 00:06:02,479
to join live j/s which is sort of a

00:06:00,110 --> 00:06:06,409
music group collective of audio visual

00:06:02,479 --> 00:06:08,389
artists and you can find out more at

00:06:06,409 --> 00:06:11,240
live jazz the network there's also a

00:06:08,389 --> 00:06:13,400
live jazz slack if you're interested in

00:06:11,240 --> 00:06:15,650
audio-visual stuff it's a very helpful

00:06:13,400 --> 00:06:18,949
like it's an open slack very helpful

00:06:15,650 --> 00:06:23,659
people with all kinds of info on like

00:06:18,949 --> 00:06:27,860
modern WebGL visualization stuff web

00:06:23,659 --> 00:06:30,320
MIDI web audio all of that stuff yeah

00:06:27,860 --> 00:06:33,129
this is a picture from like a screen

00:06:30,320 --> 00:06:35,979
grab from a youtube video that exists

00:06:33,129 --> 00:06:37,869
this is me in the front there and we

00:06:35,979 --> 00:06:43,149
were doing the introduction of last

00:06:37,869 --> 00:06:46,509
year's live Jay Jay s con few I can tell

00:06:43,149 --> 00:06:49,509
you that was nerve-wracking it was a lot

00:06:46,509 --> 00:06:52,479
of fun too so this is most of life Jay s

00:06:49,509 --> 00:06:56,199
in one picture there

00:06:52,479 --> 00:07:00,430
our current lineup Ruth Tim Martin who

00:06:56,199 --> 00:07:05,249
was here yesterday I don't see him today

00:07:00,430 --> 00:07:07,779
Sam Matt Meadows Mehta's our New Zealand

00:07:05,249 --> 00:07:10,020
representative which sometimes makes

00:07:07,779 --> 00:07:14,229
travel a little harder than it should be

00:07:10,020 --> 00:07:15,580
yeah and like I said I joined last like

00:07:14,229 --> 00:07:17,830
I said we played at a couple of

00:07:15,580 --> 00:07:19,869
conferences Jays continue we are going

00:07:17,830 --> 00:07:22,959
to play Jays count of Asia this year

00:07:19,869 --> 00:07:25,330
which makes me super happy and also a

00:07:22,959 --> 00:07:29,979
bit anxious because I'm flying to

00:07:25,330 --> 00:07:31,360
Singapore we played at a s last year we

00:07:29,979 --> 00:07:34,360
played a cold front I think two years

00:07:31,360 --> 00:07:38,999
ago we played at were Jay s which was a

00:07:34,360 --> 00:07:41,649
lot of fun great great conference

00:07:38,999 --> 00:07:46,059
maybe we're going to do something again

00:07:41,649 --> 00:07:48,360
could be and yeah so I needed to come up

00:07:46,059 --> 00:07:52,620
with a tool that allows me to quickly

00:07:48,360 --> 00:07:56,229
improvised music with my with my

00:07:52,620 --> 00:07:58,360
synthesizers and my computer and I was

00:07:56,229 --> 00:08:01,029
doing like I said I was doing music life

00:07:58,360 --> 00:08:04,419
coding before which was fun but also way

00:08:01,029 --> 00:08:06,999
too slow I'm a I'm a bad slow coder I

00:08:04,419 --> 00:08:12,009
I'm not very good at memorizing all the

00:08:06,999 --> 00:08:13,719
shortcuts and I wanted to have something

00:08:12,009 --> 00:08:18,189
that was a little bit more intuitive and

00:08:13,719 --> 00:08:20,709
quick for me and I wanted to yeah I

00:08:18,189 --> 00:08:22,809
wanted to build this tool which would

00:08:20,709 --> 00:08:24,939
have a couple of features quick

00:08:22,809 --> 00:08:27,490
workflows means that I don't need to

00:08:24,939 --> 00:08:29,800
kind of go through a lot of menus to do

00:08:27,490 --> 00:08:32,620
stuff needs to be all kind of a Tibetan

00:08:29,800 --> 00:08:36,130
press it should be pattern based which

00:08:32,620 --> 00:08:38,370
is if you know more about music it

00:08:36,130 --> 00:08:41,110
probably makes sense to you if not

00:08:38,370 --> 00:08:42,880
patterns are basically very small pieces

00:08:41,110 --> 00:08:43,360
of music that you repeat over and over

00:08:42,880 --> 00:08:45,420
again

00:08:43,360 --> 00:08:48,180
and that makes it really easy to

00:08:45,420 --> 00:08:50,700
more complex stuff out of them it should

00:08:48,180 --> 00:08:52,500
fully utilize the Ableton push which is

00:08:50,700 --> 00:08:54,269
this weird thing sitting at the side

00:08:52,500 --> 00:08:57,540
here I'm going to hold it up in a second

00:08:54,269 --> 00:08:59,190
and ideally I wanted to have it so that

00:08:57,540 --> 00:09:01,290
I don't need to look at a different

00:08:59,190 --> 00:09:04,529
screen I don't want to want it to look

00:09:01,290 --> 00:09:06,389
at the computer screen because it's easy

00:09:04,529 --> 00:09:09,149
to get lost in a computer screen and

00:09:06,389 --> 00:09:11,190
like if you need to start like moving

00:09:09,149 --> 00:09:13,649
your mouse around especially on a touch

00:09:11,190 --> 00:09:16,860
pad or something you're already lost in

00:09:13,649 --> 00:09:20,310
terms of speed I wanted it to be

00:09:16,860 --> 00:09:21,870
built-in with web technologies mostly

00:09:20,310 --> 00:09:27,510
because the whole thing is called live

00:09:21,870 --> 00:09:29,820
j/s and not live C++ or live rust even

00:09:27,510 --> 00:09:33,290
though Matt does have a performance

00:09:29,820 --> 00:09:36,360
system that is built on rust but I mean

00:09:33,290 --> 00:09:37,980
he also did awesome stuff in JavaScript

00:09:36,360 --> 00:09:40,380
so I think that still counts and I

00:09:37,980 --> 00:09:43,290
didn't really want to have a huge build

00:09:40,380 --> 00:09:45,000
pipeline but that's just me I don't like

00:09:43,290 --> 00:09:49,579
to fiddle around with web hacker and

00:09:45,000 --> 00:09:51,690
whatnot and you know with modern web

00:09:49,579 --> 00:09:53,820
technologies so to speak you can

00:09:51,690 --> 00:09:55,890
actually do things like use JavaScript

00:09:53,820 --> 00:09:58,079
modules without having a build pipeline

00:09:55,890 --> 00:10:02,910
which is pretty cool the Ableton push

00:09:58,079 --> 00:10:04,860
tube from the top looks like this it's a

00:10:02,910 --> 00:10:07,500
controller that has been Bill

00:10:04,860 --> 00:10:09,449
purpose-built for a music software

00:10:07,500 --> 00:10:12,740
you're going to see the music software

00:10:09,449 --> 00:10:17,100
in a second as well but this is very

00:10:12,740 --> 00:10:18,300
like it it is very special hardware for

00:10:17,100 --> 00:10:21,269
that very special purpose

00:10:18,300 --> 00:10:23,459
but fortunately Ableton was kind enough

00:10:21,269 --> 00:10:25,140
to completely open up the specification

00:10:23,459 --> 00:10:27,300
of this thing and even though it has

00:10:25,140 --> 00:10:29,430
lots of buttons that are labeled in very

00:10:27,300 --> 00:10:32,880
specific Ableton ways you can kind of

00:10:29,430 --> 00:10:36,149
use them to your own avail and it has

00:10:32,880 --> 00:10:38,850
this awesome collection of 64 buttons in

00:10:36,149 --> 00:10:41,040
the middle which are velocity sensitive

00:10:38,850 --> 00:10:43,740
so you can play them lighter and harder

00:10:41,040 --> 00:10:46,199
and get different sounds out of it

00:10:43,740 --> 00:10:48,569
lots of encoders on the top which is a

00:10:46,199 --> 00:10:51,569
fancy name for knobs that you can turn

00:10:48,569 --> 00:10:55,690
endlessly and lots of buttons as well

00:10:51,569 --> 00:10:57,760
and yeah

00:10:55,690 --> 00:10:59,380
there's also a touch strip which is

00:10:57,760 --> 00:11:01,000
interesting so it's this piece of

00:10:59,380 --> 00:11:02,230
plastic and you can slide your fingers

00:11:01,000 --> 00:11:05,410
across and get different values

00:11:02,230 --> 00:11:08,320
depending on where your finger sits lots

00:11:05,410 --> 00:11:11,230
of LEDs every button has an LED below it

00:11:08,320 --> 00:11:14,200
so you can turn it on turn it off I

00:11:11,230 --> 00:11:16,180
don't know something like 60% or so our

00:11:14,200 --> 00:11:18,400
RGB LEDs so you can turn them into

00:11:16,180 --> 00:11:23,470
different colors as well which is cool

00:11:18,400 --> 00:11:25,360
the other half is just white LEDs and it

00:11:23,470 --> 00:11:29,170
has a display and we're going to see

00:11:25,360 --> 00:11:32,110
that this is interesting because well

00:11:29,170 --> 00:11:34,060
with the buttons pads and Coda's and

00:11:32,110 --> 00:11:37,120
touch strips and LEDs you can actually

00:11:34,060 --> 00:11:38,950
like all the input elements just send me

00:11:37,120 --> 00:11:40,690
D I'm going to talk about media in a

00:11:38,950 --> 00:11:42,400
second but it's it's like it's a really

00:11:40,690 --> 00:11:44,830
simple protocol that is easy to

00:11:42,400 --> 00:11:46,750
understand easy to work with and the

00:11:44,830 --> 00:11:48,670
LEDs of the on the other hand you just

00:11:46,750 --> 00:11:51,250
send MIDI data to the device and it's

00:11:48,670 --> 00:11:55,570
gonna display different colors depending

00:11:51,250 --> 00:11:58,240
on the values the display is too big and

00:11:55,570 --> 00:12:00,160
too high resolution that you could do

00:11:58,240 --> 00:12:03,340
something with Metis there so we need to

00:12:00,160 --> 00:12:06,340
figure out what's going on there this is

00:12:03,340 --> 00:12:08,620
the official description so you connect

00:12:06,340 --> 00:12:11,410
the whole thing by USB and use B as a

00:12:08,620 --> 00:12:13,810
so-called composite device with a media

00:12:11,410 --> 00:12:16,060
interface and a generic bulk data

00:12:13,810 --> 00:12:18,760
interface used to drive the display that

00:12:16,060 --> 00:12:27,070
sounds fancy right generic bulk data

00:12:18,760 --> 00:12:28,090
interface what so use B yes we can do as

00:12:27,070 --> 00:12:31,150
we know many things

00:12:28,090 --> 00:12:33,340
it's called Universal Serial bus for a

00:12:31,150 --> 00:12:35,530
reason so you can have storage devices

00:12:33,340 --> 00:12:37,450
you can have so-called human interface

00:12:35,530 --> 00:12:41,650
devices as we heard in the talk from

00:12:37,450 --> 00:12:43,900
Raman earlier yesterday so human

00:12:41,650 --> 00:12:45,730
interface device the keyboard mice game

00:12:43,900 --> 00:12:48,100
controllers whatever and then you have

00:12:45,730 --> 00:12:51,340
things like audio so you can connect

00:12:48,100 --> 00:12:55,710
something that isn't an audio card and

00:12:51,340 --> 00:12:58,690
listen to some music you can do media

00:12:55,710 --> 00:13:01,120
quite surprisingly and lots of other

00:12:58,690 --> 00:13:05,130
stuff and then you can also do generic

00:13:01,120 --> 00:13:08,310
data around a KA vendor-specific crap

00:13:05,130 --> 00:13:11,820
MIDI like I said is a ver

00:13:08,310 --> 00:13:13,730
simple protocol media the media or the

00:13:11,820 --> 00:13:19,550
original media specification is from

00:13:13,730 --> 00:13:19,550
1983 who in here is born after 1983

00:13:20,270 --> 00:13:27,390
interesting I mean that sounds like I'm

00:13:25,050 --> 00:13:29,880
trying to brag up here but to be honest

00:13:27,390 --> 00:13:32,900
like in 1983 I wasn't thinking about

00:13:29,880 --> 00:13:36,839
like doing stuff with computers and

00:13:32,900 --> 00:13:40,190
synthesizers to be fair because it's

00:13:36,839 --> 00:13:43,560
such an old standard it's it's a basic

00:13:40,190 --> 00:13:46,440
serial protocol for the most part in

00:13:43,560 --> 00:13:47,880
modern API is its encapsulated in a way

00:13:46,440 --> 00:13:50,640
that you don't have to parse out the

00:13:47,880 --> 00:13:52,080
data yourself so for example from web

00:13:50,640 --> 00:13:55,500
MIDI will you will get something like

00:13:52,080 --> 00:13:58,410
this which is three bytes that probably

00:13:55,500 --> 00:14:01,050
don't mean too much to you so there's no

00:13:58,410 --> 00:14:03,900
like high level tagging or anything it's

00:14:01,050 --> 00:14:05,520
just you I mean I'm looking at this now

00:14:03,900 --> 00:14:07,860
and I know exactly what it does but

00:14:05,520 --> 00:14:11,190
that's because I I've been breathing

00:14:07,860 --> 00:14:16,560
this stuff for far too long and my brain

00:14:11,190 --> 00:14:21,180
is mush with media but let's take a look

00:14:16,560 --> 00:14:22,980
so this is actually a command that for

00:14:21,180 --> 00:14:28,760
example a keyboard would send if you

00:14:22,980 --> 00:14:31,830
press down a key so the first command is

00:14:28,760 --> 00:14:33,990
the first byte is a command bite and you

00:14:31,830 --> 00:14:37,890
can tell that because the 8th bit of

00:14:33,990 --> 00:14:41,970
that byte is set you've seen that right

00:14:37,890 --> 00:14:46,200
so I mean the value is over 127

00:14:41,970 --> 00:14:48,450
basically so yeah every other thing

00:14:46,200 --> 00:14:50,880
you're sending like every data bit byte

00:14:48,450 --> 00:14:53,580
you're sending is only like with the 8th

00:14:50,880 --> 00:14:55,920
bit not set so it's going to be below

00:14:53,580 --> 00:14:59,220
hundred 27 which also means that for

00:14:55,920 --> 00:15:02,550
most things you can only send like 127

00:14:59,220 --> 00:15:06,810
distinct values which is barely enough

00:15:02,550 --> 00:15:10,230
for the for the note which is the second

00:15:06,810 --> 00:15:13,170
byte oh yeah and the other thing so in

00:15:10,230 --> 00:15:16,200
the the upper four bits of a command by

00:15:13,170 --> 00:15:18,720
it encodes the actual command and the

00:15:16,200 --> 00:15:20,310
lower four bits encode the channel so

00:15:18,720 --> 00:15:22,350
there's sixteen channels you can send

00:15:20,310 --> 00:15:24,509
data on

00:15:22,350 --> 00:15:28,500
which was more interesting when there

00:15:24,509 --> 00:15:31,889
were like no when there were like only

00:15:28,500 --> 00:15:33,990
like one cable connection nowadays like

00:15:31,889 --> 00:15:37,379
every synthesizer has own USB connection

00:15:33,990 --> 00:15:39,420
and turns up as a their own MIDI device

00:15:37,379 --> 00:15:41,970
and so it's not that needed anymore but

00:15:39,420 --> 00:15:44,879
anyway you have 16 channels yeah and the

00:15:41,970 --> 00:15:48,149
next one is the note and the note is a

00:15:44,879 --> 00:15:50,399
MIDI note number is corresponds to a

00:15:48,149 --> 00:15:52,680
note in the twelve in the standard

00:15:50,399 --> 00:15:58,259
twelve tone system that we have in in

00:15:52,680 --> 00:16:01,560
western music so zero would be a very

00:15:58,259 --> 00:16:08,879
very low C and a thirty six because it's

00:16:01,560 --> 00:16:10,860
12 24 36 values above that is also a C

00:16:08,879 --> 00:16:14,899
because every 12 I usually get to see

00:16:10,860 --> 00:16:19,529
again and then like a 1 would be a

00:16:14,899 --> 00:16:21,060
c-sharp 2 would be a D and so on so if

00:16:19,529 --> 00:16:24,389
you know a little bit about music it

00:16:21,060 --> 00:16:29,100
makes sense to you if not I'm sorry I

00:16:24,389 --> 00:16:31,290
guess and the last value is the velocity

00:16:29,100 --> 00:16:34,470
and that's just how hard I hit the key

00:16:31,290 --> 00:16:38,519
so 100 is pretty hard given that we have

00:16:34,470 --> 00:16:40,500
127 values if I play like if I touch it

00:16:38,519 --> 00:16:43,920
really lightly it will be a low value

00:16:40,500 --> 00:16:45,930
and so you can send this byte sequence

00:16:43,920 --> 00:16:47,970
to a synthesizer and it will start

00:16:45,930 --> 00:16:50,910
playing a sound now the problem with

00:16:47,970 --> 00:16:52,589
this is depending on the synthesizer it

00:16:50,910 --> 00:16:54,870
might never stop playing that sound

00:16:52,589 --> 00:16:57,540
because that's the different commands so

00:16:54,870 --> 00:17:00,809
you would send 128 to actually switch

00:16:57,540 --> 00:17:03,269
off the sound you that's one of the

00:17:00,809 --> 00:17:05,429
things you learn quite early when you're

00:17:03,269 --> 00:17:08,010
playing around with me because suddenly

00:17:05,429 --> 00:17:09,329
you have this cacophony of sounds that

00:17:08,010 --> 00:17:13,980
coming from your synthesizing and no

00:17:09,329 --> 00:17:17,039
idea why so that's me D let's talk about

00:17:13,980 --> 00:17:21,510
the generic bout data interface and this

00:17:17,039 --> 00:17:24,539
was a fun little experiment so this is

00:17:21,510 --> 00:17:29,280
all from like most of it is from from

00:17:24,539 --> 00:17:31,559
the documentation from Ableton so what

00:17:29,280 --> 00:17:33,299
you do is you have this generic bout

00:17:31,559 --> 00:17:36,090
data interface and you use

00:17:33,299 --> 00:17:38,850
a library called lip USB which there's a

00:17:36,090 --> 00:17:41,399
node module for it and so you're sending

00:17:38,850 --> 00:17:43,679
you just send bytes to it basically

00:17:41,399 --> 00:17:46,139
almost like a serial interface I mean

00:17:43,679 --> 00:17:49,049
which is not surprising USB use

00:17:46,139 --> 00:17:52,230
universal serial bus yeah makes sense

00:17:49,049 --> 00:17:55,470
make sense and so you send it a frame

00:17:52,230 --> 00:17:57,600
header which is just a thing that tells

00:17:55,470 --> 00:17:59,009
the device oh there's some data incoming

00:17:57,600 --> 00:18:02,879
I should take a look at it and it's just

00:17:59,009 --> 00:18:05,570
the same 16 bytes every time yeah and

00:18:02,879 --> 00:18:10,279
then you sent the frame buffer which is

00:18:05,570 --> 00:18:13,169
you know data to display on the on the

00:18:10,279 --> 00:18:16,769
display and then you do that all over

00:18:13,169 --> 00:18:18,989
again you do that 60 frames 60 times per

00:18:16,769 --> 00:18:21,029
second so you get 60 frames per second

00:18:18,989 --> 00:18:23,399
if you don't send any data

00:18:21,029 --> 00:18:25,379
the device will cache it for about two

00:18:23,399 --> 00:18:29,519
seconds or so and then the the display

00:18:25,379 --> 00:18:34,109
would turn black the frame buffer data

00:18:29,519 --> 00:18:36,929
is organized in a slightly weird way you

00:18:34,109 --> 00:18:39,840
have 16 bit per pixel so it's not like

00:18:36,929 --> 00:18:42,269
your usual 24 bit thing it's a little

00:18:39,840 --> 00:18:45,090
bit less resolution in there makes it a

00:18:42,269 --> 00:18:48,389
little easier to send raw data over and

00:18:45,090 --> 00:18:52,200
it's packed in a kind of weird way so

00:18:48,389 --> 00:18:56,190
you have something like 5 bits for blue

00:18:52,200 --> 00:18:59,279
and then for 6 bits for green and then 5

00:18:56,190 --> 00:19:01,889
bits for red and that probably makes

00:18:59,279 --> 00:19:06,059
sense for some weird color psychology

00:19:01,889 --> 00:19:08,460
you know color physic physical reason

00:19:06,059 --> 00:19:09,059
whatever I have no idea but that's how

00:19:08,460 --> 00:19:11,639
it works

00:19:09,059 --> 00:19:14,159
it's little-endian that's something you

00:19:11,639 --> 00:19:17,489
need to know when you're sending data

00:19:14,159 --> 00:19:19,379
there's bigger than bytes and for

00:19:17,489 --> 00:19:21,409
reasons that I do not completely

00:19:19,379 --> 00:19:24,509
understand but I think have to do with

00:19:21,409 --> 00:19:27,659
signal transfer over over the actual

00:19:24,509 --> 00:19:29,909
wire you need to XOR it with a specific

00:19:27,659 --> 00:19:32,519
value for signal shaping I think it's

00:19:29,909 --> 00:19:34,769
just to prevent things like zero zero

00:19:32,519 --> 00:19:39,600
zero zero for happening on the data bus

00:19:34,769 --> 00:19:44,490
because that would be bad for the the

00:19:39,600 --> 00:19:46,800
signal quality I think so yeah so we now

00:19:44,490 --> 00:19:50,550
know what kind of data we need to send

00:19:46,800 --> 00:19:54,210
but where do we get them from and I mean

00:19:50,550 --> 00:19:57,360
we're web we're on a web conference web

00:19:54,210 --> 00:20:02,310
related conference at least and so what

00:19:57,360 --> 00:20:05,310
would be easier than using canvas so if

00:20:02,310 --> 00:20:11,190
you have a canvas of a certain size why

00:20:05,310 --> 00:20:15,690
does that there you go okay so if you

00:20:11,190 --> 00:20:18,080
have something like a canvas that is a

00:20:15,690 --> 00:20:21,620
960 by 160 you can do something like

00:20:18,080 --> 00:20:25,740
context get image data and you will get

00:20:21,620 --> 00:20:27,840
actual raw pixel data from the formula

00:20:25,740 --> 00:20:30,270
canvas which is really cool you have to

00:20:27,840 --> 00:20:33,990
know in which way they are organized and

00:20:30,270 --> 00:20:35,910
as you will note it's kind of weird

00:20:33,990 --> 00:20:38,700
because we have we seem to have four

00:20:35,910 --> 00:20:42,350
bytes in there but I only need three of

00:20:38,700 --> 00:20:42,350
them what's going on here

00:20:43,340 --> 00:20:50,520
so yeah the fourth byte is actually

00:20:48,360 --> 00:20:55,340
transparency but I just discard that

00:20:50,520 --> 00:20:55,340
because yeah you know I I just show you

00:20:57,320 --> 00:21:03,200
like there's no hole in it so

00:21:00,570 --> 00:21:10,230
transparency doesn't make any sense

00:21:03,200 --> 00:21:12,330
anyway well okay so we have an

00:21:10,230 --> 00:21:15,120
interesting setup where we actually can

00:21:12,330 --> 00:21:17,460
use web technologies to generate the

00:21:15,120 --> 00:21:19,860
display data but now we have to send it

00:21:17,460 --> 00:21:22,260
over something like little USB which is

00:21:19,860 --> 00:21:24,660
a node module which you can't because it

00:21:22,260 --> 00:21:26,940
does have native dependencies on the

00:21:24,660 --> 00:21:28,440
views B which is a C library you can't

00:21:26,940 --> 00:21:30,060
just load it up in your browser that

00:21:28,440 --> 00:21:32,160
doesn't make any sense there is a thing

00:21:30,060 --> 00:21:36,360
called web use fee has anyone in here

00:21:32,160 --> 00:21:38,310
ever used web USB the thing is it needs

00:21:36,360 --> 00:21:42,309
to be supported by the hardware there's

00:21:38,310 --> 00:21:45,400
a specific amendment of the USB spec and

00:21:42,309 --> 00:21:49,240
I don't think the Ableton push does that

00:21:45,400 --> 00:21:51,940
so yeah what you can do is just use

00:21:49,240 --> 00:21:54,429
something like electron and then you can

00:21:51,940 --> 00:21:57,760
require a native a module with native

00:21:54,429 --> 00:22:02,020
dependencies in your webview that sounds

00:21:57,760 --> 00:22:04,990
scary to me but it works so yeah I'm

00:22:02,020 --> 00:22:09,809
just initializing the device and then

00:22:04,990 --> 00:22:34,990
send the frame out and that's all so

00:22:09,809 --> 00:22:36,730
that's how you end up with a display and

00:22:34,990 --> 00:22:39,520
it actually it actually works quite well

00:22:36,730 --> 00:22:41,799
it's a it's pretty responsive and yeah

00:22:39,520 --> 00:22:44,020
like I said this is all drawn on on a

00:22:41,799 --> 00:22:46,330
canvas as I can show you because I have

00:22:44,020 --> 00:22:50,710
this whole thing here and now if I turn

00:22:46,330 --> 00:22:53,640
this knob now if I turn this knob you

00:22:50,710 --> 00:22:55,900
can actually see that also being

00:22:53,640 --> 00:22:59,409
represented in the canvas element up

00:22:55,900 --> 00:23:01,750
here it's just quite cool I have a

00:22:59,409 --> 00:23:07,419
couple of extra slides I'm running a

00:23:01,750 --> 00:23:09,220
little bit out of time so I really

00:23:07,419 --> 00:23:15,070
wanted to talk a little bit more about

00:23:09,220 --> 00:23:18,400
this so why this is a great question I

00:23:15,070 --> 00:23:21,610
mean first of all because I can that's

00:23:18,400 --> 00:23:24,039
always a good thing because learning I

00:23:21,610 --> 00:23:25,870
really wanted to figure out this display

00:23:24,039 --> 00:23:28,900
thing and I also really wanted to figure

00:23:25,870 --> 00:23:32,049
out how can I build an instrument that

00:23:28,900 --> 00:23:34,390
works for myself because that's kind of

00:23:32,049 --> 00:23:37,390
the important part it's I built my own

00:23:34,390 --> 00:23:39,549
instrument I can do whatever I want with

00:23:37,390 --> 00:23:42,100
it it's not something where I need to

00:23:39,549 --> 00:23:44,890
wait for like a new update to a certain

00:23:42,100 --> 00:23:47,919
software to make it work better with my

00:23:44,890 --> 00:23:50,200
setup or something and I have my own

00:23:47,919 --> 00:23:52,149
feedback process so I sometimes talk to

00:23:50,200 --> 00:23:54,309
myself and say hey wouldn't it be cool

00:23:52,149 --> 00:23:56,260
if it would do this thing and I didn't

00:23:54,309 --> 00:23:58,450
just implement it

00:23:56,260 --> 00:24:02,080
and this actually does make a huge

00:23:58,450 --> 00:24:03,730
difference and also I just needed to

00:24:02,080 --> 00:24:08,380
build something for life Jess otherwise

00:24:03,730 --> 00:24:11,470
it would be pointless yeah and I would

00:24:08,380 --> 00:24:13,780
like to if I will show you a little demo

00:24:11,470 --> 00:24:17,800
of what this thing can do and I would

00:24:13,780 --> 00:24:20,050
like to close with this quote who in

00:24:17,800 --> 00:24:23,590
here knows where this quote is from

00:24:20,050 --> 00:24:30,070
there are actually two places so anyone

00:24:23,590 --> 00:24:33,120
knows this yeah no no no no it's it's

00:24:30,070 --> 00:24:36,310
like it's it's in two pieces of music

00:24:33,120 --> 00:24:38,670
like one quotes the other the other one

00:24:36,310 --> 00:24:41,560
is a little bit older than the other one

00:24:38,670 --> 00:24:44,380
interesting I thought like last time I

00:24:41,560 --> 00:24:46,240
did this there were very like a lot

00:24:44,380 --> 00:24:48,430
fewer people so I thought maybe this

00:24:46,240 --> 00:24:51,340
time someone would get it so the

00:24:48,430 --> 00:24:57,670
original the original quote is from Bob

00:24:51,340 --> 00:25:00,070
Marley and let me get the song I have no

00:24:57,670 --> 00:25:06,760
idea I need to look that up and then

00:25:00,070 --> 00:25:11,350
it's been quoted by come on

00:25:06,760 --> 00:25:16,000
it's bigger than hip hop here pop there

00:25:11,350 --> 00:25:18,730
press write nice so and it actually

00:25:16,000 --> 00:25:20,440
starts with that exact line one good

00:25:18,730 --> 00:25:23,290
thing about music when it hits you feel

00:25:20,440 --> 00:25:27,190
no pain and I just yeah I just love that

00:25:23,290 --> 00:25:31,930
so let me give you a quick demo and then

00:25:27,190 --> 00:25:35,200
I'm done and I'm going to attempt to

00:25:31,930 --> 00:25:36,910
play this overhead so you're gonna you

00:25:35,200 --> 00:25:42,030
can see it and that's going to be really

00:25:36,910 --> 00:25:42,030
hard so forgive me if it sounds terrible

00:25:45,960 --> 00:25:55,870
yeah I mean the the square I promised

00:25:49,570 --> 00:25:56,950
you to take a look at so this is this is

00:25:55,870 --> 00:25:59,920
Ableton

00:25:56,950 --> 00:26:02,320
this is I'm using this in the background

00:25:59,920 --> 00:26:05,270
just to generate the sounds because I

00:26:02,320 --> 00:26:07,940
didn't want to bring

00:26:05,270 --> 00:26:09,530
to again like additional to this heavy

00:26:07,940 --> 00:26:11,390
beasts I didn't want to bring like five

00:26:09,530 --> 00:26:13,309
to six synthesizers to make sense so

00:26:11,390 --> 00:26:16,070
this is all done in software right now I

00:26:13,309 --> 00:26:17,900
can do both this sounds better than

00:26:16,070 --> 00:26:19,700
external synthesizers because it's

00:26:17,900 --> 00:26:22,150
easier to build like this massive

00:26:19,700 --> 00:26:25,370
collection of synthesizers and effects

00:26:22,150 --> 00:26:27,020
so yeah this is what's going to generate

00:26:25,370 --> 00:26:29,710
the sound but the whole sequencing

00:26:27,020 --> 00:26:35,870
everything like you're gonna see on

00:26:29,710 --> 00:26:39,610
comes from the other software and yeah

00:26:35,870 --> 00:26:39,610
it's going to be driven by this thing

00:27:02,010 --> 00:28:08,660
[Music]

00:28:11,490 --> 00:28:15,880
[Music]

00:28:18,240 --> 00:28:48,099
[Music]

00:28:50,030 --> 00:29:00,900
[Applause]

00:29:03,469 --> 00:29:10,669
any questions

00:29:06,089 --> 00:29:10,669
oh there yeah go ahead

00:29:13,099 --> 00:29:26,489
good point the question was is this open

00:29:16,169 --> 00:29:30,239
source let me answer that question wait

00:29:26,489 --> 00:29:36,749
a second did I oh there you go

00:29:30,239 --> 00:29:38,609
so yeah that's the github URL so yeah it

00:29:36,749 --> 00:29:41,249
is open source if you want to take a

00:29:38,609 --> 00:29:43,199
look at it it doesn't make any sense

00:29:41,249 --> 00:29:45,059
without enabled and push right now I

00:29:43,199 --> 00:29:46,619
really want to bring other controllers

00:29:45,059 --> 00:29:49,199
to this as well because the push is

00:29:46,619 --> 00:29:50,879
heavy to lug around and it would be nice

00:29:49,199 --> 00:29:55,759
for conferences like this if I could

00:29:50,879 --> 00:29:55,759
just bring a smaller thing yeah yeah

00:30:03,779 --> 00:30:08,130
it's a thing that is on NPM like always

00:30:06,629 --> 00:30:13,560
but I wrote it

00:30:08,130 --> 00:30:13,560
[Laughter]

00:30:14,300 --> 00:30:21,179
so yeah so there's I mean there's Lib

00:30:18,750 --> 00:30:23,730
USB but I actually like implemented the

00:30:21,179 --> 00:30:26,360
whole data mangling to get it in the

00:30:23,730 --> 00:30:36,570
right format and stuff like that yeah

00:30:26,360 --> 00:30:39,870
yeah ah interesting point it like did I

00:30:36,570 --> 00:30:42,929
ever use this with my beatboxing not

00:30:39,870 --> 00:30:44,850
really so Ableton does have some looping

00:30:42,929 --> 00:30:47,100
functions and I really would like to try

00:30:44,850 --> 00:30:49,530
that out one time but the thing is that

00:30:47,100 --> 00:30:52,890
I'm so nervous when I'm doing this life

00:30:49,530 --> 00:30:55,590
music stuff every time that I don't

00:30:52,890 --> 00:30:57,660
think that with an additional I don't

00:30:55,590 --> 00:30:59,940
know something like 10,000 hours of

00:30:57,660 --> 00:31:02,360
practicing I would be confident enough

00:30:59,940 --> 00:31:10,320
to try to add my own voice to things

00:31:02,360 --> 00:31:11,270
yeah anyone else yeah thank you very

00:31:10,320 --> 00:31:13,110
much

00:31:11,270 --> 00:31:16,380
[Applause]

00:31:13,110 --> 00:31:16,380

YouTube URL: https://www.youtube.com/watch?v=a1Gwv4prtIo


