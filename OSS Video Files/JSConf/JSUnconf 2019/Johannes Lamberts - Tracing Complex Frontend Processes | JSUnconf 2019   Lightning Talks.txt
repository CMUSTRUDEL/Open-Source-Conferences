Title: Johannes Lamberts - Tracing Complex Frontend Processes | JSUnconf 2019   Lightning Talks
Publication date: 2019-05-23
Playlist: JSUnconf 2019
Description: 
	
Captions: 
	00:00:04,190 --> 00:00:07,249
[Music]

00:00:07,379 --> 00:00:12,330
tracing front-end processes in five

00:00:10,080 --> 00:00:15,269
minutes I think that will be intense but

00:00:12,330 --> 00:00:18,119
let's get into it I have a little

00:00:15,269 --> 00:00:21,180
example of a process that could happen

00:00:18,119 --> 00:00:24,449
in a front-end application we have some

00:00:21,180 --> 00:00:26,789
data is like counter for several items

00:00:24,449 --> 00:00:28,740
and we want to increment that counter

00:00:26,789 --> 00:00:30,900
and then synchronize with an external

00:00:28,740 --> 00:00:34,590
API and there could be many things that

00:00:30,900 --> 00:00:37,020
might happen it could go all well or the

00:00:34,590 --> 00:00:40,200
item could be remotely removed the

00:00:37,020 --> 00:00:43,800
server could return a 500 or let's say a

00:00:40,200 --> 00:00:45,899
409 for remotely changed and we have to

00:00:43,800 --> 00:00:50,219
react for that and you have a lot of

00:00:45,899 --> 00:00:54,809
asynchronous processes and that can be

00:00:50,219 --> 00:00:58,140
hard to debug and you might wanna have

00:00:54,809 --> 00:01:00,180
three questions at that point to what's

00:00:58,140 --> 00:01:02,879
happening in the application first we

00:01:00,180 --> 00:01:05,430
what is happening next thing is when is

00:01:02,879 --> 00:01:07,950
it happening and the third and crucial

00:01:05,430 --> 00:01:12,570
thing is why is it happening and often

00:01:07,950 --> 00:01:15,240
when I was debugging code I found that

00:01:12,570 --> 00:01:18,150
hard to answer because the like logging

00:01:15,240 --> 00:01:20,400
that you usually get shows you what

00:01:18,150 --> 00:01:23,520
request or what action happened I what

00:01:20,400 --> 00:01:26,820
time but not what immediately caused it

00:01:23,520 --> 00:01:29,340
and I will give you a short demo of a

00:01:26,820 --> 00:01:31,590
plugin for view that I built to give you

00:01:29,340 --> 00:01:34,409
an impression of how you could handle

00:01:31,590 --> 00:01:35,970
that and this is related to the state

00:01:34,409 --> 00:01:38,970
management I presented earlier I will

00:01:35,970 --> 00:01:41,250
not get into the state management but

00:01:38,970 --> 00:01:44,369
this is exactly the process that I just

00:01:41,250 --> 00:01:49,200
showed we have three items as you see

00:01:44,369 --> 00:01:51,869
and I will tell my API mark that I want

00:01:49,200 --> 00:01:55,200
to get this 509 back with a new count

00:01:51,869 --> 00:01:59,070
which is 900 and when I click on plus

00:01:55,200 --> 00:02:01,920
right here you see account jumps to 901

00:01:59,070 --> 00:02:04,590
which is the 900 from remote plus the

00:02:01,920 --> 00:02:06,750
one that I wanted to add and what I also

00:02:04,590 --> 00:02:10,170
see is a little entry in the console

00:02:06,750 --> 00:02:13,380
there's currently no more visual

00:02:10,170 --> 00:02:15,120
sadly but what you see is I just called

00:02:13,380 --> 00:02:17,030
warehouse dot incoming and that called

00:02:15,120 --> 00:02:20,160
update item count and that called

00:02:17,030 --> 00:02:22,410
synchronized save and that's try to

00:02:20,160 --> 00:02:25,230
synchronize with the API but returned an

00:02:22,410 --> 00:02:27,600
error with remotely change and with a

00:02:25,230 --> 00:02:30,980
new count and then I updated the local

00:02:27,600 --> 00:02:32,970
item and retried the updated item count

00:02:30,980 --> 00:02:35,640
resynchronized with the API and

00:02:32,970 --> 00:02:37,530
everything just worked and I have to

00:02:35,640 --> 00:02:40,920
tell you this is a plugin that you can

00:02:37,530 --> 00:02:43,410
insert into your code with it just like

00:02:40,920 --> 00:02:45,510
I don't know five lines of code of code

00:02:43,410 --> 00:02:50,340
or something and you don't have to touch

00:02:45,510 --> 00:02:53,310
the actually business logic and I think

00:02:50,340 --> 00:02:56,660
it shows you with very very little noise

00:02:53,310 --> 00:03:01,230
what's happening so this is the demo and

00:02:56,660 --> 00:03:04,019
how this works this is like what plugin

00:03:01,230 --> 00:03:07,380
does I think I don't have the time to

00:03:04,019 --> 00:03:10,410
get into that and very very short it

00:03:07,380 --> 00:03:13,980
graphs methods automatically to track

00:03:10,410 --> 00:03:16,739
calls and to inject the proxy as context

00:03:13,980 --> 00:03:19,579
into them that catches calls to other

00:03:16,739 --> 00:03:22,709
methods you have this deep tracking and

00:03:19,579 --> 00:03:25,290
does this for infinity if you have

00:03:22,709 --> 00:03:27,120
recursive calls for example so this is

00:03:25,290 --> 00:03:30,630
obviously very short and might be very

00:03:27,120 --> 00:03:34,200
confusing but it works so far I think

00:03:30,630 --> 00:03:36,690
that's like the point for this talk and

00:03:34,200 --> 00:03:40,500
what I would find interesting is ideas

00:03:36,690 --> 00:03:42,720
what you can think about if you get

00:03:40,500 --> 00:03:45,299
deeper into that you could write a more

00:03:42,720 --> 00:03:47,700
framework agnostic core and framework

00:03:45,299 --> 00:03:50,519
specific plugins you could think about

00:03:47,700 --> 00:03:53,459
browser extensions that we visualize the

00:03:50,519 --> 00:03:56,310
tracing that we just got boy you could

00:03:53,459 --> 00:03:59,730
go very crazy and maybe snapshot test

00:03:56,310 --> 00:04:03,510
those traces or I don't know so well

00:03:59,730 --> 00:04:06,299
that would be very crazy and I would

00:04:03,510 --> 00:04:08,519
love to hear your ideas or use cases I

00:04:06,299 --> 00:04:11,519
think this is this is not for small

00:04:08,519 --> 00:04:14,010
applications it's for bigger and more

00:04:11,519 --> 00:04:17,820
complex applications but I would love to

00:04:14,010 --> 00:04:19,410
get more into that and that was it yeah

00:04:17,820 --> 00:04:20,010
thank you very much

00:04:19,410 --> 00:04:21,130
[Applause]

00:04:20,010 --> 00:04:25,540
[Music]

00:04:21,130 --> 00:04:25,540

YouTube URL: https://www.youtube.com/watch?v=GmPSPw0VFus


