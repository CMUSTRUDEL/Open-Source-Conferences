Title: Dave Brotherstone - Mocking your backend with a MITM proxy | JSUnconf 2019   Lightning Talks
Publication date: 2019-05-23
Playlist: JSUnconf 2019
Description: 
	
Captions: 
	00:00:08,000 --> 00:00:16,410
yeah so high mocking your back end with

00:00:11,550 --> 00:00:18,660
man-in-the-middle proxy and so if um you

00:00:16,410 --> 00:00:20,100
got a back-end on your website like yeah

00:00:18,660 --> 00:00:23,660
you've got a website and you've got the

00:00:20,100 --> 00:00:25,619
Ajax call making to API dot whatever and

00:00:23,660 --> 00:00:27,840
what you might want to do is you might

00:00:25,619 --> 00:00:29,609
want to mock an endpoint to add some new

00:00:27,840 --> 00:00:31,109
feature or maybe you don't want to wait

00:00:29,609 --> 00:00:33,090
for the backend people to implement the

00:00:31,109 --> 00:00:36,540
new feature or change the endpoint to

00:00:33,090 --> 00:00:39,210
suit what your new feature and so we've

00:00:36,540 --> 00:00:41,190
built a tool that kind of pulls that

00:00:39,210 --> 00:00:43,290
down into your local laptop and

00:00:41,190 --> 00:00:44,520
optionally then proxies that through and

00:00:43,290 --> 00:00:46,649
you can change the headers you can

00:00:44,520 --> 00:00:49,530
change the response and you can change

00:00:46,649 --> 00:00:51,120
the change everything and it's just an

00:00:49,530 --> 00:00:52,949
NPM install module it's not open source

00:00:51,120 --> 00:00:54,539
yet but we'd like to do that and if

00:00:52,949 --> 00:00:57,199
you've got interest in it tell me and

00:00:54,539 --> 00:00:59,399
then I can use that as like internal and

00:00:57,199 --> 00:01:02,550
what it does is it creates a self-signed

00:00:59,399 --> 00:01:04,140
certificate for HTTP services and Trust

00:01:02,550 --> 00:01:07,290
that certificate automatically for

00:01:04,140 --> 00:01:09,150
Chrome and Safari adds the entry to a TC

00:01:07,290 --> 00:01:11,820
hosts does the DNS lookup for a real

00:01:09,150 --> 00:01:16,350
host anyway doesn't matter and you just

00:01:11,820 --> 00:01:18,060
run this and it works and what it does

00:01:16,350 --> 00:01:20,700
is it creates a little config file

00:01:18,060 --> 00:01:23,130
that's in typescript and so you can

00:01:20,700 --> 00:01:24,330
actually have typed mocks which is

00:01:23,130 --> 00:01:25,500
really nice for communication with the

00:01:24,330 --> 00:01:26,909
backend people because then you've got a

00:01:25,500 --> 00:01:30,240
definition for what it should look like

00:01:26,909 --> 00:01:33,060
and so if you just want to mark one

00:01:30,240 --> 00:01:34,770
endpoint you just want some fixed JSON

00:01:33,060 --> 00:01:37,200
back all the time you can just put the

00:01:34,770 --> 00:01:40,340
JSON in and you can also write a

00:01:37,200 --> 00:01:42,899
function to here we want to we're gonna

00:01:40,340 --> 00:01:44,610
overwrite a field or a defeat add a new

00:01:42,899 --> 00:01:45,810
field to the response and because the

00:01:44,610 --> 00:01:46,979
back in people are going to take two

00:01:45,810 --> 00:01:52,380
weeks to implement it because back in

00:01:46,979 --> 00:01:54,630
developments hard and so yeah so let's

00:01:52,380 --> 00:01:58,140
have a demo um so I went to Amazon

00:01:54,630 --> 00:02:00,030
Amazon D and they've got this this

00:01:58,140 --> 00:02:01,290
little autocomplete thing and I looked

00:02:00,030 --> 00:02:03,450
at what the call was and it makes a

00:02:01,290 --> 00:02:05,390
little Ajax call to to amazon co uk

00:02:03,450 --> 00:02:08,179
actually so there is some at least

00:02:05,390 --> 00:02:12,720
communication between Germany and

00:02:08,179 --> 00:02:15,610
Britain that's going well and

00:02:12,720 --> 00:02:17,290
I'm just gonna start this start this up

00:02:15,610 --> 00:02:20,319
it's going to ask me for my password

00:02:17,290 --> 00:02:22,209
because it's going to my god that's the

00:02:20,319 --> 00:02:25,420
first time I type that's right first

00:02:22,209 --> 00:02:28,690
time so this is the the config file I'm

00:02:25,420 --> 00:02:30,340
I'm looking at amazon co uk this is the

00:02:28,690 --> 00:02:32,739
end point and I'm just going to

00:02:30,340 --> 00:02:37,620
overwrite the the results so I'm gonna

00:02:32,739 --> 00:02:40,180
go back and what I do here that's it um

00:02:37,620 --> 00:02:43,090
we've used this for like new new

00:02:40,180 --> 00:02:47,620
endpoints new development mocking error

00:02:43,090 --> 00:02:50,530
conditions all sorts of stuff if you're

00:02:47,620 --> 00:02:53,459
interested ping me and well yeah we

00:02:50,530 --> 00:02:53,459
really want to open source it

00:02:54,100 --> 00:02:58,400

YouTube URL: https://www.youtube.com/watch?v=WLxmKMalWdE


