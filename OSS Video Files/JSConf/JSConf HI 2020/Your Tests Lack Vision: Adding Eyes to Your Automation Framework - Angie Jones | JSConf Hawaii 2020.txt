Title: Your Tests Lack Vision: Adding Eyes to Your Automation Framework - Angie Jones | JSConf Hawaii 2020
Publication date: 2020-03-24
Playlist: JSConf HI 2020
Description: 
	Automation has come a long way in assisting with regression testing efforts. Teams worldwide are successfully running hundreds of functional regression tests at every check-in. While this provides a great source of confidence, critical regression bugs are still missed using this approach. That’s because these tests can only assert on what their human programmer asks them to. Additional errors with functionality, UX, and usability often go uncaught using today’s most common test automation techniques.

For this reason, the top companies in all sectors of the industry are turning to visual validation. Visual validation is a relatively new concept that can be used to enhance existing automated tests and provide an easy way to perform those difficult checks for things like UX, localization, usability, responsive design, and cross-device testing.

In this talk, you’ll learn how visual validation works, see an integration into an existing test code base, and discuss the pros and cons of using various visual validation techniques.

JSConf Hawaii will return soon
https://www.jsconfhi.com/
Captions: 
	00:00:08,770 --> 00:00:14,340
hi everyone I'm a developer advocate and

00:00:12,350 --> 00:00:17,520
applitools and we're going to

00:00:14,340 --> 00:00:19,550
about visual validation today but first

00:00:17,520 --> 00:00:22,550
we're going to play a little game of

00:00:19,550 --> 00:00:22,550
whodunit

00:00:26,800 --> 00:00:33,110
clearly somebody in this room murdered

00:00:29,060 --> 00:00:35,960
Lord Smythe who at precisely 3:30 4:00

00:00:33,110 --> 00:00:38,540
this afternoon was brutally bludgeoned

00:00:35,960 --> 00:00:40,629
to death with a blunt instrument I want

00:00:38,540 --> 00:00:43,280
each of you to tell me your whereabouts

00:00:40,629 --> 00:00:47,210
at precisely the time that this

00:00:43,280 --> 00:00:48,920
dastardly deed took place I was

00:00:47,210 --> 00:00:52,070
polishing the brass in the master

00:00:48,920 --> 00:00:55,970
bedroom I was buttering his Lordships

00:00:52,070 --> 00:00:57,820
goes below stairs so but I was planting

00:00:55,970 --> 00:01:03,290
my petunias in the potting shed

00:00:57,820 --> 00:01:03,620
constable arrest lady Smythe but how did

00:01:03,290 --> 00:01:05,540
you know

00:01:03,620 --> 00:01:07,369
madam has any horticulturist will tell

00:01:05,540 --> 00:01:09,950
you one does not plant petunias until

00:01:07,369 --> 00:01:12,410
May is out take her away

00:01:09,950 --> 00:01:17,830
it's just a matter of observation the

00:01:12,410 --> 00:01:17,830
real question is how observant were you

00:01:24,470 --> 00:01:30,620
clearly somebody in this room murdered

00:01:26,600 --> 00:01:33,470
Lord Smythe who at precisely 3:30 4:00

00:01:30,620 --> 00:01:36,080
this afternoon was brutally bludgeoned

00:01:33,470 --> 00:01:38,140
to death with a blunt instrument I want

00:01:36,080 --> 00:01:40,820
each of you to tell me your whereabouts

00:01:38,140 --> 00:01:44,720
at precisely the time that this

00:01:40,820 --> 00:01:46,460
dastardly deed took place I was

00:01:44,720 --> 00:01:49,610
polishing the brass in the master

00:01:46,460 --> 00:01:52,490
bedroom I was buttering his raw tips

00:01:49,610 --> 00:01:54,800
goes for those stairs somewhere but I

00:01:52,490 --> 00:01:55,610
was planting my petunias in the potting

00:01:54,800 --> 00:02:01,030
shed

00:01:55,610 --> 00:02:01,030
constable arrest lady Smythe

00:02:04,480 --> 00:02:11,700
can't believe you all let

00:02:06,090 --> 00:02:13,560
deadman get up and walk away but

00:02:11,700 --> 00:02:15,300
actually I can't believe it because we

00:02:13,560 --> 00:02:17,940
all suffer from what's called

00:02:15,300 --> 00:02:20,519
inattentional blindness this is where

00:02:17,940 --> 00:02:23,489
you're so focused on a specific task

00:02:20,519 --> 00:02:25,709
that you miss other things new and

00:02:23,489 --> 00:02:28,560
unexpected that might come into your

00:02:25,709 --> 00:02:31,230
vision and this happens a lot when we're

00:02:28,560 --> 00:02:34,769
developing our code and we do these

00:02:31,230 --> 00:02:40,560
little quick I was about to curse these

00:02:34,769 --> 00:02:43,920
little quick half effort tests and we

00:02:40,560 --> 00:02:48,480
missed a lot of what else is going on in

00:02:43,920 --> 00:02:50,760
our application right so how do we solve

00:02:48,480 --> 00:02:53,250
it is we usually try to automate these

00:02:50,760 --> 00:02:56,129
tests so that it's not relying on us and

00:02:53,250 --> 00:02:58,260
when we automate the tests then we're

00:02:56,129 --> 00:03:00,810
making sure that every time that test

00:02:58,260 --> 00:03:04,019
runs is taking the exact same steps and

00:03:00,810 --> 00:03:06,629
it's verifying the exact same things and

00:03:04,019 --> 00:03:08,970
that sounds really good and predictable

00:03:06,629 --> 00:03:12,450
right what if I told you you were

00:03:08,970 --> 00:03:14,459
actually coding in the in intentional

00:03:12,450 --> 00:03:18,000
blindness because our scripts are worse

00:03:14,459 --> 00:03:19,859
than we are only looking at the thing

00:03:18,000 --> 00:03:22,049
that we told it to look at and it misses

00:03:19,859 --> 00:03:25,950
anything that we didn't specifically

00:03:22,049 --> 00:03:30,870
think of to code in for example what

00:03:25,950 --> 00:03:32,430
about if your text is on the screen and

00:03:30,870 --> 00:03:34,319
you want to verify that this text is

00:03:32,430 --> 00:03:36,930
there right so you write some code and

00:03:34,319 --> 00:03:39,150
it verifies that it's there but what if

00:03:36,930 --> 00:03:41,190
that text was bleeding off the edge of

00:03:39,150 --> 00:03:44,299
the page you see this all the time on

00:03:41,190 --> 00:03:47,190
mobile views what about it that text was

00:03:44,299 --> 00:03:48,739
covered by another element and so your

00:03:47,190 --> 00:03:51,840
user couldn't even see it

00:03:48,739 --> 00:03:53,760
what about if it was the same color as

00:03:51,840 --> 00:03:55,680
the background and again your user

00:03:53,760 --> 00:03:57,840
couldn't see it so all of these things

00:03:55,680 --> 00:04:01,769
will be missed with our traditional

00:03:57,840 --> 00:04:03,389
assertions and this isn't one off type

00:04:01,769 --> 00:04:05,549
things this happens all the time now

00:04:03,389 --> 00:04:09,329
that I'm aware of visual testing I see

00:04:05,549 --> 00:04:13,290
these visual bugs everywhere and some of

00:04:09,329 --> 00:04:14,069
your apps as well here's an example this

00:04:13,290 --> 00:04:16,099
is Cineworld

00:04:14,069 --> 00:04:18,010
this is the world's second largest

00:04:16,099 --> 00:04:19,720
cinema chain

00:04:18,010 --> 00:04:21,490
and they had a visual bug on the page

00:04:19,720 --> 00:04:25,260
that asks you if you would like to store

00:04:21,490 --> 00:04:25,260
your credit card information

00:04:25,610 --> 00:04:29,870
now if you saw this in your app you

00:04:27,650 --> 00:04:30,860
probably would wouldn't think it was a

00:04:29,870 --> 00:04:33,199
big bug

00:04:30,860 --> 00:04:35,810
you know but how many of you in here

00:04:33,199 --> 00:04:39,259
would actually or your credit card

00:04:35,810 --> 00:04:42,800
information exactly no one no hands

00:04:39,259 --> 00:04:45,590
worries the reason for that is cuz you

00:04:42,800 --> 00:04:50,270
look at this and you think if they

00:04:45,590 --> 00:04:52,250
didn't even see this I'm not convinced

00:04:50,270 --> 00:04:54,620
that they're testing the backend and and

00:04:52,250 --> 00:04:56,900
something actually holds my private data

00:04:54,620 --> 00:04:58,530
right so engagement here would go really

00:04:56,900 --> 00:05:02,190
low

00:04:58,530 --> 00:05:05,060
now your test as written today will

00:05:02,190 --> 00:05:05,060
probably pay

00:05:05,130 --> 00:05:09,960
cuz it is looking to see if those labels

00:05:08,430 --> 00:05:11,160
are there's all the radios the buttons

00:05:09,960 --> 00:05:14,670
are there it can click things

00:05:11,160 --> 00:05:16,920
functionally this works right so this

00:05:14,670 --> 00:05:20,490
gets deployed into production and you

00:05:16,920 --> 00:05:23,460
miss his type of thing this is open

00:05:20,490 --> 00:05:25,530
table how many people use open table

00:05:23,460 --> 00:05:27,480
make reservations yeah so I was born in

00:05:25,530 --> 00:05:29,910
Raleigh and they're famous for their

00:05:27,480 --> 00:05:31,950
barbecue so I wanted to make a dinner

00:05:29,910 --> 00:05:34,170
reservation at my favorite place there

00:05:31,950 --> 00:05:37,290
with some of my friends seven people

00:05:34,170 --> 00:05:39,810
this reservation so I went to click a

00:05:37,290 --> 00:05:42,270
time that I wanted and this modal popped

00:05:39,810 --> 00:05:44,070
up and I was a little bit confused at

00:05:42,270 --> 00:05:46,020
first because there was nothing in the

00:05:44,070 --> 00:05:48,360
center there so I didn't know what I was

00:05:46,020 --> 00:05:52,470
supposed to be doing as I looked around

00:05:48,360 --> 00:05:57,420
I noticed in the upper right corner

00:05:52,470 --> 00:06:00,600
those two buttons let's say select so I

00:05:57,420 --> 00:06:03,570
scratch my head a bit okay what are

00:06:00,600 --> 00:06:06,090
these buttons one why are there two of

00:06:03,570 --> 00:06:09,720
them too why are they not aligned in

00:06:06,090 --> 00:06:11,820
three what am i selecting again and so I

00:06:09,720 --> 00:06:16,230
did what any of you would do I open

00:06:11,820 --> 00:06:18,600
chrome dev tools I began to dig around

00:06:16,230 --> 00:06:21,480
and figure out what were these buttons

00:06:18,600 --> 00:06:23,970
and actually the labels were there they

00:06:21,480 --> 00:06:29,180
were just as far away from the buttons

00:06:23,970 --> 00:06:30,740
as possible again

00:06:29,180 --> 00:06:32,990
think that these people don't test take

00:06:30,740 --> 00:06:34,910
they're cold but they might be tested it

00:06:32,990 --> 00:06:37,550
the tests were passed in this case

00:06:34,910 --> 00:06:40,610
because the tests are looking in the Dom

00:06:37,550 --> 00:06:43,940
right and all of this stuff is there

00:06:40,610 --> 00:06:47,990
it's present functional but a user

00:06:43,940 --> 00:06:50,449
cannot use this right and most of their

00:06:47,990 --> 00:06:52,520
users are not engineers who know about

00:06:50,449 --> 00:06:54,440
chrome dev tools and are gonna dig in

00:06:52,520 --> 00:06:55,060
the Dom so this is money that's being

00:06:54,440 --> 00:06:58,310
lost

00:06:55,060 --> 00:07:01,449
these aren't one offs happens to your

00:06:58,310 --> 00:07:04,940
favorite tech companies as well

00:07:01,449 --> 00:07:06,530
Amazon someone not only wants to

00:07:04,940 --> 00:07:09,800
purchase something but they want to

00:07:06,530 --> 00:07:13,190
multiply the number of items the amount

00:07:09,800 --> 00:07:15,590
of money they're going to spin and you

00:07:13,190 --> 00:07:18,590
have this goofy bug

00:07:15,590 --> 00:07:20,780
Facebook on their marketplace page I'm

00:07:18,590 --> 00:07:24,290
going shopping I want to buy things I

00:07:20,780 --> 00:07:25,370
cannot even read the text again your

00:07:24,290 --> 00:07:29,120
test yeah

00:07:25,370 --> 00:07:32,930
Texas present Instagram this is my

00:07:29,120 --> 00:07:34,190
favorite one the reason this is my

00:07:32,930 --> 00:07:40,370
favorite one is because this is

00:07:34,190 --> 00:07:42,830
sponsored content someone paid Instagram

00:07:40,370 --> 00:07:45,500
to show their polls to people and it

00:07:42,830 --> 00:07:50,590
looks like this again your test is this

00:07:45,500 --> 00:07:50,590
text present yes yes yes and deploy

00:07:51,250 --> 00:07:57,380
Twitter all of the tweets are there the

00:07:54,979 --> 00:08:01,100
text is present we can't read this this

00:07:57,380 --> 00:08:04,020
is very annoying the great news is that

00:08:01,100 --> 00:08:08,699
we don't have to live like this

00:08:04,020 --> 00:08:11,039
visual testing can also be automated now

00:08:08,699 --> 00:08:13,169
what is visual testing it's where you

00:08:11,039 --> 00:08:16,289
take a screenshot of your application in

00:08:13,169 --> 00:08:19,319
the state that everything is perfect and

00:08:16,289 --> 00:08:21,210
as you want it and then on any

00:08:19,319 --> 00:08:23,909
regression runs it takes another

00:08:21,210 --> 00:08:28,069
screenshot and compares the two there

00:08:23,909 --> 00:08:30,690
are any differences it alerts you now

00:08:28,069 --> 00:08:32,820
visual testing is not something that is

00:08:30,690 --> 00:08:35,700
very new it's been around for a while

00:08:32,820 --> 00:08:38,159
but we as an industry we're using some

00:08:35,700 --> 00:08:40,649
antiquated methods but we were comparing

00:08:38,159 --> 00:08:42,750
them pixel by pixel and making sure that

00:08:40,649 --> 00:08:44,370
the picture was exactly the same the

00:08:42,750 --> 00:08:46,680
problem with this is that pixel

00:08:44,370 --> 00:08:50,040
comparison is really flaky not really

00:08:46,680 --> 00:08:53,339
designed for testing purposes for

00:08:50,040 --> 00:08:55,589
example the top picture is picture of my

00:08:53,339 --> 00:08:57,930
app when it's in its perfect state the

00:08:55,589 --> 00:09:01,500
second picture is a regression run the

00:08:57,930 --> 00:09:04,500
regression run failed token see walk

00:09:01,500 --> 00:09:06,690
the search button is bold here in the

00:09:04,500 --> 00:09:08,550
second picture but not the first well if

00:09:06,690 --> 00:09:10,440
you put your mouse over the button it

00:09:08,550 --> 00:09:13,860
bowls so if you were running this

00:09:10,440 --> 00:09:15,990
front-end test and it just so happened

00:09:13,860 --> 00:09:18,390
that the mouse landed right there when

00:09:15,990 --> 00:09:22,020
the screenshot was taken now you have a

00:09:18,390 --> 00:09:24,330
field feel it another one who can see

00:09:22,020 --> 00:09:28,050
what why this one feel

00:09:24,330 --> 00:09:30,870
the cursor so after the word bad the

00:09:28,050 --> 00:09:33,660
cursor is solid in the first picture but

00:09:30,870 --> 00:09:36,600
not in the second cuz cursors blink

00:09:33,660 --> 00:09:38,430
right so if you happen to take the

00:09:36,600 --> 00:09:41,190
picture in the split second that is not

00:09:38,430 --> 00:09:45,330
the same than that feel so this became

00:09:41,190 --> 00:09:47,370
very very annoying for people apples

00:09:45,330 --> 00:09:50,190
came out with a way to do visual

00:09:47,370 --> 00:09:52,980
validation that uses machine learning to

00:09:50,190 --> 00:09:57,110
be able to only capture the things that

00:09:52,980 --> 00:09:58,970
we would care about as human beings

00:09:57,110 --> 00:10:00,800
here's another little spot a difference

00:09:58,970 --> 00:10:02,810
game you all don't get to play because

00:10:00,800 --> 00:10:05,870
you let the dead man walk away in the

00:10:02,810 --> 00:10:07,490
first game so I did it for you I ran

00:10:05,870 --> 00:10:09,800
this through the pics of the pixel and I

00:10:07,490 --> 00:10:12,080
ran it through the athlete tools so with

00:10:09,800 --> 00:10:14,360
pixel to pixel you'll notice here pretty

00:10:12,080 --> 00:10:18,290
much everything is highlighted very very

00:10:14,360 --> 00:10:20,660
sensitive even to white spaces using

00:10:18,290 --> 00:10:23,510
this I can't really tell exactly what's

00:10:20,660 --> 00:10:26,360
different in those pictures versus using

00:10:23,510 --> 00:10:29,000
it with applitools it's faster things we

00:10:26,360 --> 00:10:32,810
would as human beings okay

00:10:29,000 --> 00:10:35,060
so let's add this to an existing test

00:10:32,810 --> 00:10:36,680
base first let me show you the

00:10:35,060 --> 00:10:38,959
application that we're going to be

00:10:36,680 --> 00:10:42,200
testing it's a single page application

00:10:38,959 --> 00:10:45,740
and it has 8 of my favorite books on

00:10:42,200 --> 00:10:48,320
testing and the way that this works give

00:10:45,740 --> 00:10:50,240
us some more real estate the way that

00:10:48,320 --> 00:10:52,700
this works is you just type in one of

00:10:50,240 --> 00:10:55,160
the book titles and it filters that for

00:10:52,700 --> 00:10:57,110
example if I put in test and I see all

00:10:55,160 --> 00:11:00,440
the books that have tests as part of the

00:10:57,110 --> 00:11:04,540
title that's it okay and let's look at

00:11:00,440 --> 00:11:04,540
the test now so we have

00:11:05,070 --> 00:11:11,490
two tests here one that is looking for a

00:11:08,190 --> 00:11:13,740
specific book with the exact title agile

00:11:11,490 --> 00:11:15,690
testing so we search for that we make

00:11:13,740 --> 00:11:18,029
sure that there's only one book that's

00:11:15,690 --> 00:11:21,480
returned in that it is the right title

00:11:18,029 --> 00:11:23,100
and then the second test this one is

00:11:21,480 --> 00:11:24,779
looking for multiple ones so the one I

00:11:23,100 --> 00:11:26,880
showed you in the example you put in the

00:11:24,779 --> 00:11:29,130
word test here are the books that we

00:11:26,880 --> 00:11:31,649
expect to come back we validate that all

00:11:29,130 --> 00:11:34,170
of them are actually visible and they

00:11:31,649 --> 00:11:39,389
are at the right titles okay

00:11:34,170 --> 00:11:41,940
so let's run this test this big one and

00:11:39,389 --> 00:11:44,579
I'm using Cypress here anybody use

00:11:41,940 --> 00:11:47,279
Cypress yeah

00:11:44,579 --> 00:11:51,720
did y'all see that announcement

00:11:47,279 --> 00:11:56,759
so they just released 4.0 yesterday and

00:11:51,720 --> 00:11:59,579
now cross browser support I know all

00:11:56,759 --> 00:12:02,100
right so we've run this test and this is

00:11:59,579 --> 00:12:04,740
past beautiful everything is lovely

00:12:02,100 --> 00:12:06,930
okay let's switch back to application

00:12:04,740 --> 00:12:08,850
mode and let's say we want to like jazz

00:12:06,930 --> 00:12:11,699
this page up a bit you know we want a

00:12:08,850 --> 00:12:14,639
little bouncy effect or something so we

00:12:11,699 --> 00:12:17,399
had a little CSS here and we have test

00:12:14,639 --> 00:12:21,569
so we feel very confident and we go

00:12:17,399 --> 00:12:25,550
ahead and commit this right so we run

00:12:21,569 --> 00:12:29,550
this little test again and let's see oh

00:12:25,550 --> 00:12:32,720
no with one line of CSS I have flipped

00:12:29,550 --> 00:12:36,920
this application on its head

00:12:32,720 --> 00:12:40,580
but the test is still passing why is

00:12:36,920 --> 00:12:43,610
this because we said make sure there are

00:12:40,580 --> 00:12:46,400
five books are there five books check

00:12:43,610 --> 00:12:49,700
make sure that those five books are

00:12:46,400 --> 00:12:51,500
these titles that's true right it's

00:12:49,700 --> 00:12:54,340
missing these other things the

00:12:51,500 --> 00:12:56,960
inattentional blindness so let's add

00:12:54,340 --> 00:12:59,720
visual testing to see if we can catch

00:12:56,960 --> 00:13:02,630
these kinds of bugs that our traditional

00:12:59,720 --> 00:13:04,870
frameworks would miss okay so to add

00:13:02,630 --> 00:13:09,720
visual testing

00:13:04,870 --> 00:13:17,420
the first command is to open your eyes

00:13:09,720 --> 00:13:19,690
beautiful a tree so we say sigh dot eyes

00:13:17,420 --> 00:13:22,600
open

00:13:19,690 --> 00:13:26,280
all right and then after the test let's

00:13:22,600 --> 00:13:26,280
go ahead and make it after each

00:13:27,950 --> 00:13:35,800
and in here we're going to want to close

00:13:30,830 --> 00:13:35,800
our eyes when we're done very intuitive

00:13:36,630 --> 00:13:42,870
all right okay now within the test

00:13:41,010 --> 00:13:45,600
itself let's go ahead and add some

00:13:42,870 --> 00:13:52,610
visual testing here so we're going to

00:13:45,600 --> 00:13:52,610
say side eyes check window

00:13:52,780 --> 00:14:00,550
entire thing this will do a screen

00:13:57,370 --> 00:14:02,980
capture and do the visual testing and

00:14:00,550 --> 00:14:05,710
with that screen capture it's gonna make

00:14:02,980 --> 00:14:08,290
sure that this title all of the titles

00:14:05,710 --> 00:14:10,690
are visible so really I don't even need

00:14:08,290 --> 00:14:12,820
this line anymore it's gonna make sure

00:14:10,690 --> 00:14:14,920
it's only five of them so I don't need

00:14:12,820 --> 00:14:18,040
this so now I'm doing my favorite thing

00:14:14,920 --> 00:14:20,890
which is to delete code I no longer need

00:14:18,040 --> 00:14:23,680
this array oh my gosh this is getting

00:14:20,890 --> 00:14:26,380
really good and I don't need a variable

00:14:23,680 --> 00:14:29,200
cuz I'm only using it that one time so I

00:14:26,380 --> 00:14:33,940
can put that there so look how nice my

00:14:29,200 --> 00:14:36,120
test looks now yes yes okay all right so

00:14:33,940 --> 00:14:38,830
let's make sure we put the books back

00:14:36,120 --> 00:14:44,740
yes okay so we're gonna run it this

00:14:38,830 --> 00:14:46,690
first time and what's going on here did

00:14:44,740 --> 00:14:49,540
I mess something up okay

00:14:46,690 --> 00:14:51,820
okay so what's going on here is it takes

00:14:49,540 --> 00:14:55,270
a picture it's going to send this image

00:14:51,820 --> 00:14:56,950
out to the applitools cloud and so I

00:14:55,270 --> 00:14:59,200
don't have to store this stuff on my

00:14:56,950 --> 00:15:01,510
computer I can if I wanted to there's

00:14:59,200 --> 00:15:03,580
options for that but by default this

00:15:01,510 --> 00:15:06,940
just goes out to the applicants clown

00:15:03,580 --> 00:15:09,280
and applitools will then create this as

00:15:06,940 --> 00:15:12,250
a new baseline saying okay this is a new

00:15:09,280 --> 00:15:14,740
test that you have we'll store that

00:15:12,250 --> 00:15:16,690
there all right and then every time I

00:15:14,740 --> 00:15:18,850
run the regression runs is going to

00:15:16,690 --> 00:15:23,650
compare the two now this is still

00:15:18,850 --> 00:15:26,080
running because I'm on like my Wi-Fi so

00:15:23,650 --> 00:15:28,090
it's a little bit slower but let's go to

00:15:26,080 --> 00:15:30,040
the applicant tools dashboard so we can

00:15:28,090 --> 00:15:31,750
see now you don't have to do this the

00:15:30,040 --> 00:15:33,910
very first time you run the test I'm

00:15:31,750 --> 00:15:40,910
really done but I just want to show you

00:15:33,910 --> 00:15:44,240
this okay so we have this search here

00:15:40,910 --> 00:15:47,120
and we see that there's no baseline so

00:15:44,240 --> 00:15:49,760
this new image will be the baseline

00:15:47,120 --> 00:15:52,300
image that will be store for us once

00:15:49,760 --> 00:15:52,300
that looks

00:15:58,570 --> 00:16:01,290
techgirls juice

00:16:02,660 --> 00:16:07,610
alright I'm gonna let that cook but you

00:16:05,930 --> 00:16:11,150
see the little thumbnail here right

00:16:07,610 --> 00:16:13,340
alright so

00:16:11,150 --> 00:16:15,590
okay there is all right so let's talk

00:16:13,340 --> 00:16:19,640
about this a little bit this is really

00:16:15,590 --> 00:16:21,530
powerful this is great like I want to

00:16:19,640 --> 00:16:23,840
run this again with the books flips and

00:16:21,530 --> 00:16:26,420
let's make sure that it actually

00:16:23,840 --> 00:16:29,660
captures that okay so let's uncomment

00:16:26,420 --> 00:16:32,350
out that we flip the books and let's run

00:16:29,660 --> 00:16:32,350
our test again

00:16:32,890 --> 00:16:40,430
okay great so this is now going to take

00:16:36,740 --> 00:16:44,140
another screenshot again since this out

00:16:40,430 --> 00:16:47,480
to the cloud and now it's doing the AI

00:16:44,140 --> 00:16:49,940
comparisons to make sure that these are

00:16:47,480 --> 00:16:54,010
the same or not and then it should alert

00:16:49,940 --> 00:16:54,010
us when this feels

00:16:55,960 --> 00:17:00,430
all right so see we got a little error

00:16:58,000 --> 00:17:02,470
here and Cyprus you have to go into like

00:17:00,430 --> 00:17:05,950
chrome dev tools to see the error but

00:17:02,470 --> 00:17:08,230
I'm just gonna show you here so we come

00:17:05,950 --> 00:17:10,180
back to our dashboard and we see that

00:17:08,230 --> 00:17:14,140
now we have this test marked as

00:17:10,180 --> 00:17:17,650
unresolved so AI is saying that failed

00:17:14,140 --> 00:17:19,900
but hey something has changed here human

00:17:17,650 --> 00:17:22,120
come and see if this is what you want it

00:17:19,900 --> 00:17:23,080
like this was an intentional change or

00:17:22,120 --> 00:17:25,870
not

00:17:23,080 --> 00:17:28,630
of course flipping our books upside down

00:17:25,870 --> 00:17:31,720
is not an intentional change so we say

00:17:28,630 --> 00:17:34,930
oh no and we just do a thumbs down and

00:17:31,720 --> 00:17:38,680
now this test is marked as filmed okay

00:17:34,930 --> 00:17:40,750
so this will capture the things that we

00:17:38,680 --> 00:17:42,270
miss with our inattentional blindness we

00:17:40,750 --> 00:17:45,580
don't have to think of every single

00:17:42,270 --> 00:17:48,460
assertion to add to our code base this

00:17:45,580 --> 00:17:51,580
covers everything but on the flip side

00:17:48,460 --> 00:17:54,160
of that that's also a con if we think

00:17:51,580 --> 00:17:57,460
about it in some cases right because it

00:17:54,160 --> 00:18:00,940
captures everything so not just these

00:17:57,460 --> 00:18:03,760
books it also captured the text that I

00:18:00,940 --> 00:18:06,550
put into here the name of the the title

00:18:03,760 --> 00:18:08,890
on the application anything else that

00:18:06,550 --> 00:18:10,810
was going on a page so that's great in

00:18:08,890 --> 00:18:12,580
some cases but it could also be a

00:18:10,810 --> 00:18:16,810
nuisance in other cases where it's

00:18:12,580 --> 00:18:19,900
capturing too much right so we could

00:18:16,810 --> 00:18:21,730
solve for this by scoping this down we

00:18:19,900 --> 00:18:25,930
don't have to take a picture of the

00:18:21,730 --> 00:18:27,850
entire page it's very very flexible so

00:18:25,930 --> 00:18:33,700
if I wanted to do this other test

00:18:27,850 --> 00:18:37,860
instead let's uh let's disable this one

00:18:33,700 --> 00:18:37,860
and here I'm gonna do

00:18:38,020 --> 00:18:43,860
okay so this one is the one where is

00:18:40,240 --> 00:18:46,500
just one book now let's say that

00:18:43,860 --> 00:18:48,360
I only want this one book captured I

00:18:46,500 --> 00:18:52,020
don't want to take a picture of the

00:18:48,360 --> 00:18:54,360
entire page so we can simplify this

00:18:52,020 --> 00:18:59,429
again we get to delete some code and

00:18:54,360 --> 00:19:02,400
then let's do the side odd-eyes check

00:18:59,429 --> 00:19:05,100
window and this time we can specify some

00:19:02,400 --> 00:19:10,230
information so we can say target a

00:19:05,100 --> 00:19:12,480
specific region and give it the selector

00:19:10,230 --> 00:19:15,299
for that region that you want targeted

00:19:12,480 --> 00:19:18,570
so I already know that it has an idea of

00:19:15,299 --> 00:19:23,650
PID 3 so I'm saying just do this one

00:19:18,570 --> 00:19:27,000
book all right so if we run this again

00:19:23,650 --> 00:19:27,000
did I miss up my search

00:19:31,390 --> 00:19:37,120
yes all right so it takes a picture of

00:19:34,270 --> 00:19:39,490
this but this time only the book so it

00:19:37,120 --> 00:19:41,410
finds that selector it takes a picture

00:19:39,490 --> 00:19:45,330
of that and then sends it off to

00:19:41,410 --> 00:19:45,330
applitools to do the comparison

00:19:45,560 --> 00:19:49,210
so let's look at what that looks like

00:19:51,890 --> 00:19:56,990
all right so we have a new test here and

00:19:54,110 --> 00:19:58,940
we see that it's only the book that's

00:19:56,990 --> 00:20:01,610
captured not all the rest of the noise

00:19:58,940 --> 00:20:03,560
so this is pretty powerful as well we

00:20:01,610 --> 00:20:06,110
can scope it down as we want but there's

00:20:03,560 --> 00:20:06,800
some drawbacks to this approach too

00:20:06,110 --> 00:20:09,980
right

00:20:06,800 --> 00:20:12,710
so for example let's say that I actually

00:20:09,980 --> 00:20:16,640
typed in the word a dual testing here

00:20:12,710 --> 00:20:18,290
and it didn't work the filter didn't

00:20:16,640 --> 00:20:20,090
work none of the books were filtered

00:20:18,290 --> 00:20:21,860
away all of them were still there would

00:20:20,090 --> 00:20:26,300
this test pass or what it failed how

00:20:21,860 --> 00:20:27,890
many say pass I mean say fail how many

00:20:26,300 --> 00:20:31,880
are on the edge of their seats waiting

00:20:27,890 --> 00:20:34,910
okay so this would actually pass because

00:20:31,880 --> 00:20:37,460
it's going to find that specific region

00:20:34,910 --> 00:20:39,770
that I told it and that book is there

00:20:37,460 --> 00:20:43,010
and it looks beautiful so this would

00:20:39,770 --> 00:20:44,600
pass so we could couple our visual

00:20:43,010 --> 00:20:46,970
assertions with the traditional

00:20:44,600 --> 00:20:48,710
functional ones as well so in this case

00:20:46,970 --> 00:20:52,250
we could say okay only do the visual

00:20:48,710 --> 00:20:56,270
testing on that one book but then make

00:20:52,250 --> 00:20:58,400
sure that there's only one book showing

00:20:56,270 --> 00:20:59,990
so that way you're mixing and matching

00:20:58,400 --> 00:21:02,860
it doesn't have to replace everything

00:20:59,990 --> 00:21:06,920
you already have you can do both okay

00:21:02,860 --> 00:21:12,110
you can also do testing on dynamic

00:21:06,920 --> 00:21:14,240
layouts so let's look at another test

00:21:12,110 --> 00:21:16,370
let's go ahead and just make one really

00:21:14,240 --> 00:21:19,990
quickly

00:21:16,370 --> 00:21:24,920
and this one we're gonna say should have

00:21:19,990 --> 00:21:28,130
a nice layout and this time we're not

00:21:24,920 --> 00:21:33,370
even on a search okay so we're just

00:21:28,130 --> 00:21:33,370
going to look at the layout it's

00:21:34,930 --> 00:21:40,090
who works on vs cold here I don't like

00:21:38,330 --> 00:21:42,970
that part I don't like that feature

00:21:40,090 --> 00:21:46,240
alright

00:21:42,970 --> 00:21:51,940
so have a nice layout here so let's go

00:21:46,240 --> 00:21:55,809
ahead and run this as is so what this is

00:21:51,940 --> 00:21:57,400
going to do is it is going to at this

00:21:55,809 --> 00:21:59,380
point is running as normally but we're

00:21:57,400 --> 00:22:01,600
going to add some things here to see you

00:21:59,380 --> 00:22:03,370
know what I want to test some dynamic

00:22:01,600 --> 00:22:06,070
content it might not always be the same

00:22:03,370 --> 00:22:09,640
every time so the way that this works is

00:22:06,070 --> 00:22:12,789
is going to use machine learning to

00:22:09,640 --> 00:22:16,600
observe any patterns that it can find

00:22:12,789 --> 00:22:19,179
with this application and the patterns

00:22:16,600 --> 00:22:22,450
that I'm guessing it's seeing is okay we

00:22:19,179 --> 00:22:24,429
have some squares and they are this much

00:22:22,450 --> 00:22:26,590
width apart and they all have like a

00:22:24,429 --> 00:22:29,380
purple thing at the top and some white

00:22:26,590 --> 00:22:31,539
text in it and a picture and some bold

00:22:29,380 --> 00:22:32,980
text and blah blah blah so it's figuring

00:22:31,539 --> 00:22:35,200
those things out and then we can

00:22:32,980 --> 00:22:37,690
actually go into our application and we

00:22:35,200 --> 00:22:39,669
can change the order of let's just

00:22:37,690 --> 00:22:43,030
change the order of a couple of books

00:22:39,669 --> 00:22:48,669
all right now in order to say hey

00:22:43,030 --> 00:22:51,850
applitools we want to do some some

00:22:48,669 --> 00:22:57,480
dynamic testing here we are going to say

00:22:51,850 --> 00:22:57,480
inside of here we can do match level

00:22:58,029 --> 00:23:05,849
and say this equals a layout match level

00:23:00,519 --> 00:23:05,849
okay and then we'll run this again

00:23:05,870 --> 00:23:09,410
and there are four different types of

00:23:08,059 --> 00:23:12,559
match levels so the one we've been using

00:23:09,410 --> 00:23:15,050
by default was streaked that just does a

00:23:12,559 --> 00:23:17,210
regular comparison there is exact which

00:23:15,050 --> 00:23:18,920
does pixel to pixel but we say no the

00:23:17,210 --> 00:23:23,330
pixel to pixel right so don't use that

00:23:18,920 --> 00:23:25,130
one and there is this one layout which

00:23:23,330 --> 00:23:28,130
does the dynamic content and then

00:23:25,130 --> 00:23:32,750
there's also a content one that does

00:23:28,130 --> 00:23:35,030
color blind comparison all right so

00:23:32,750 --> 00:23:40,059
let's look at this test I've run it

00:23:35,030 --> 00:23:40,059
twice so I should have a baseline yes

00:23:40,750 --> 00:23:45,580
alright so notice here that cucumber

00:23:42,970 --> 00:23:47,860
book and the first picture was in the

00:23:45,580 --> 00:23:50,140
third place on the second row but in the

00:23:47,860 --> 00:23:52,929
second picture it is the second place

00:23:50,140 --> 00:23:56,710
and this still passed because it noticed

00:23:52,929 --> 00:23:59,200
okay the layout and everything is fine

00:23:56,710 --> 00:24:00,970
nothing looks messed up here and if I

00:23:59,200 --> 00:24:03,429
wanted to preview this in a different

00:24:00,970 --> 00:24:05,289
match level just to see it if I did it

00:24:03,429 --> 00:24:08,710
in strict mode it would have captured

00:24:05,289 --> 00:24:10,510
that these books were different alright

00:24:08,710 --> 00:24:14,169
so this is really powerful we use this

00:24:10,510 --> 00:24:18,429
when I was working at Twitter after the

00:24:14,169 --> 00:24:20,350
ugly bug we found and we have like new

00:24:18,429 --> 00:24:22,000
sites and things they use this where

00:24:20,350 --> 00:24:24,700
their content is gonna be different

00:24:22,000 --> 00:24:26,230
pretty much every time the app loads but

00:24:24,700 --> 00:24:29,039
structurally you want to make sure

00:24:26,230 --> 00:24:32,890
everything looks good alright and

00:24:29,039 --> 00:24:35,440
finally last thing I want to show you is

00:24:32,890 --> 00:24:37,659
that you can do cross browser testing

00:24:35,440 --> 00:24:40,049
with this as well so let's get rid of

00:24:37,659 --> 00:24:40,049
that

00:24:41,500 --> 00:24:49,270
and I'm going to I should've did that

00:24:46,290 --> 00:24:50,890
just pass in like all of the things I

00:24:49,270 --> 00:24:53,350
want to test on so I want to test on

00:24:50,890 --> 00:24:56,560
firefox and chrome and ie and I want to

00:24:53,350 --> 00:24:59,980
test on iPhone 10 and in landscape mode

00:24:56,560 --> 00:25:02,170
and in galaxy so I can just add this

00:24:59,980 --> 00:25:04,330
here and this will run all of those

00:25:02,170 --> 00:25:08,730
tests across all of those configurations

00:25:04,330 --> 00:25:12,120
so I mean it let's let's run

00:25:08,730 --> 00:25:15,190
let's run both of those tests that we

00:25:12,120 --> 00:25:17,100
had our first two tests

00:25:15,190 --> 00:25:20,940
okay

00:25:17,100 --> 00:25:25,200
so notice this just opens in electron or

00:25:20,940 --> 00:25:27,660
whatever this is not going into all of

00:25:25,200 --> 00:25:30,150
those different browsers at least not

00:25:27,660 --> 00:25:32,820
from our view so what this is doing it's

00:25:30,150 --> 00:25:35,520
really magical in my mind it is

00:25:32,820 --> 00:25:38,460
capturing the DOM and all of its assets

00:25:35,520 --> 00:25:41,520
so all of the J's files all of the CSS

00:25:38,460 --> 00:25:43,919
files and it's taking it in that state

00:25:41,520 --> 00:25:45,780
and then blasting it across all of the

00:25:43,919 --> 00:25:48,990
configurations that we said so you don't

00:25:45,780 --> 00:25:51,260
have to execute those scenarios over and

00:25:48,990 --> 00:25:53,970
over again across all of these platforms

00:25:51,260 --> 00:25:55,980
it just takes it once it's already in

00:25:53,970 --> 00:25:58,799
that state and shows what it'll look

00:25:55,980 --> 00:26:01,470
like in all of them so if we go back to

00:25:58,799 --> 00:26:04,039
our dashboard let's see what we have

00:26:01,470 --> 00:26:04,039
here

00:26:07,450 --> 00:26:15,580
okay wallah so in a matter of seconds

00:26:11,080 --> 00:26:18,040
we've run these 12 tests it's a lot to

00:26:15,580 --> 00:26:21,400
look at I can even group this down to

00:26:18,040 --> 00:26:23,440
like by device or like by browser and

00:26:21,400 --> 00:26:26,680
then I can manage this a little bit more

00:26:23,440 --> 00:26:30,400
and I see that that test has run so this

00:26:26,680 --> 00:26:33,880
is iPhone in whatever mode that is which

00:26:30,400 --> 00:26:37,210
one is that landscape and this is a

00:26:33,880 --> 00:26:41,500
portrait and then this is the book on

00:26:37,210 --> 00:26:44,890
both as well so that is visual testing

00:26:41,500 --> 00:26:47,410
in a nutshell very very powerful stuff

00:26:44,890 --> 00:26:50,440
you can open your free account out on

00:26:47,410 --> 00:26:51,790
applitools site let me know if you have

00:26:50,440 --> 00:26:55,690
any questions I'll be around for the

00:26:51,790 --> 00:26:57,940
rest of the day and you can also you can

00:26:55,690 --> 00:27:00,430
also hit me up on Twitter at Tech girl

00:26:57,940 --> 00:27:02,770
one 9:08 if you don't or if you're too

00:27:00,430 --> 00:27:04,220
shy to come talk to me in person alright

00:27:02,770 --> 00:27:10,630
thank you so much

00:27:04,220 --> 00:27:10,630

YouTube URL: https://www.youtube.com/watch?v=Tx7L-33Po2o


