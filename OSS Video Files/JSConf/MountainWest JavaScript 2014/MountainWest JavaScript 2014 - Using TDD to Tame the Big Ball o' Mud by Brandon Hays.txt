Title: MountainWest JavaScript 2014 - Using TDD to Tame the Big Ball o' Mud by Brandon Hays
Publication date: 2020-01-24
Playlist: MountainWest JavaScript 2014
Description: 
	By Brandon Hays

You have it in your codebase. You've tried to clean it up. Heck, you may have written it. It's the Ball of Mud.
It didn't start out that way. You just wanted to add some nice interactive functionality to your website. But then one jQuery plugin turns to three, you add a dash of statefulness, some AJAX error handling, and here you are, unable to sleep at night.
But your client-side ball of mud can be tamed! We'll walk through test-driving a refactor until the code is understandable, usable, and extensible.
We'll use Ember Components, though the pattern holds for the framework (or no framework) of your choice. It's time to get excited, not exasperated, when asked to add advanced client-side interactions to your website.

Help us caption & translate this video!

http://amara.org/v/FG3F/
Captions: 
	00:00:24,820 --> 00:00:31,300
hi everybody I am here to teach you

00:00:30,140 --> 00:00:33,950
about a thing that I learned about

00:00:31,300 --> 00:00:36,710
architecture we're going to journey into

00:00:33,950 --> 00:00:37,879
the heart of architecture you're

00:00:36,710 --> 00:00:41,360
probably going to say hey that sounds

00:00:37,879 --> 00:00:43,220
like nothing that is engineering nothing

00:00:41,360 --> 00:00:44,960
I think javascript is ready for

00:00:43,220 --> 00:00:47,210
engineering is JavaScript ready are you

00:00:44,960 --> 00:00:51,340
ready for engineering are you ready for

00:00:47,210 --> 00:00:55,750
architecture castles bridges

00:00:51,340 --> 00:01:01,579
architecture hammers anvils

00:00:55,750 --> 00:01:06,979
craftsmanship cloud cloud gineering

00:01:01,579 --> 00:01:09,470
clouds midship clouded texture these are

00:01:06,979 --> 00:01:11,090
all things I know this isn't a

00:01:09,470 --> 00:01:12,920
confessional I actually don't know what

00:01:11,090 --> 00:01:14,390
any of those things I just said were so

00:01:12,920 --> 00:01:16,220
if anybody wants to provide some

00:01:14,390 --> 00:01:18,830
definitions for me after the top I'm a

00:01:16,220 --> 00:01:22,420
cloud genere at the front side in Austin

00:01:18,830 --> 00:01:26,119
Texas you'll see I'm highly credentialed

00:01:22,420 --> 00:01:27,470
three years jazz two years tap my wife

00:01:26,119 --> 00:01:30,979
came up with a few of these she says I'm

00:01:27,470 --> 00:01:32,959
a donut master which is totally legit uh

00:01:30,979 --> 00:01:34,580
I actually not here to talk about

00:01:32,959 --> 00:01:36,200
architecture because I don't really know

00:01:34,580 --> 00:01:37,970
about it I think the universe actually

00:01:36,200 --> 00:01:40,220
does have one uncle bob martin and i

00:01:37,970 --> 00:01:42,289
think he'd agree that's plenty we don't

00:01:40,220 --> 00:01:43,250
live in an ivory tower I've never really

00:01:42,289 --> 00:01:44,810
had much use for ivory tower

00:01:43,250 --> 00:01:45,920
architecture but that's maybe because

00:01:44,810 --> 00:01:49,729
you know I've only been programming for

00:01:45,920 --> 00:01:53,330
a few years uh we don't live in the Ivy

00:01:49,729 --> 00:01:54,440
Tower we live in someplace else and I

00:01:53,330 --> 00:01:56,300
want to talk to you bout the ball of mud

00:01:54,440 --> 00:01:57,470
architecture pattern if any of you have

00:01:56,300 --> 00:01:59,649
heard of it brian flatt came up with

00:01:57,470 --> 00:02:03,289
this in the late 70s with Brian Merrick

00:01:59,649 --> 00:02:04,729
it's it's pretty great website I'm going

00:02:03,289 --> 00:02:06,380
to point you to it and I hope that you

00:02:04,729 --> 00:02:08,569
all go read it because it will it will

00:02:06,380 --> 00:02:11,200
just if if you've been coding for more

00:02:08,569 --> 00:02:13,099
than a year it will bang you like a gong

00:02:11,200 --> 00:02:14,930
to do that and you talk about City

00:02:13,099 --> 00:02:18,110
Planning you guys recognize this city

00:02:14,930 --> 00:02:20,470
probably not it's a little quaint hamlet

00:02:18,110 --> 00:02:22,340
in the midwest called salt lake city

00:02:20,470 --> 00:02:23,810
most of these aren't designed for growth

00:02:22,340 --> 00:02:25,670
in salt lake city would actually be a

00:02:23,810 --> 00:02:27,409
rare exception and you'll see that

00:02:25,670 --> 00:02:29,739
actually handled its eventual growth

00:02:27,409 --> 00:02:32,239
quite well from layout to infrastructure

00:02:29,739 --> 00:02:33,140
it doesn't have many of the problems

00:02:32,239 --> 00:02:36,110
that seem to

00:02:33,140 --> 00:02:37,700
plague larger cities but most of our

00:02:36,110 --> 00:02:39,700
programs don't actually work like this

00:02:37,700 --> 00:02:42,680
we dream that they will but they don't

00:02:39,700 --> 00:02:44,780
my current home town of Austin is a lot

00:02:42,680 --> 00:02:46,700
more typical the city layout

00:02:44,780 --> 00:02:48,590
infrastructure were unprepared for that

00:02:46,700 --> 00:02:51,020
kind of growth a they start small and

00:02:48,590 --> 00:02:53,650
gradually grow larger and this results

00:02:51,020 --> 00:02:57,260
in the dreaded urban sprawl that's mopac

00:02:53,650 --> 00:03:00,500
looks like around maybe thirtieth Street

00:02:57,260 --> 00:03:01,730
and that's the traffic I sit in every

00:03:00,500 --> 00:03:03,200
day so that actually gives me a little

00:03:01,730 --> 00:03:05,300
bit of shell shock let's not look at

00:03:03,200 --> 00:03:07,070
that much longer even that though is

00:03:05,300 --> 00:03:13,190
much too good for most of the code that

00:03:07,070 --> 00:03:15,080
we inherit we live here our code often

00:03:13,190 --> 00:03:17,120
doesn't live in that nice plan city or

00:03:15,080 --> 00:03:19,880
even a sprawling Metroplex in code we

00:03:17,120 --> 00:03:21,739
live in a favela this is a favela it's a

00:03:19,880 --> 00:03:23,480
Brazilian slum looks really kind of cool

00:03:21,739 --> 00:03:26,800
it's like the definition of a walkable

00:03:23,480 --> 00:03:29,840
city but let's just zoom in a little bit

00:03:26,800 --> 00:03:32,630
it's it's a Brazilian shantytown kind of

00:03:29,840 --> 00:03:35,360
turn into a permanent settlement how did

00:03:32,630 --> 00:03:37,400
that happen well people with little

00:03:35,360 --> 00:03:39,500
skill can create houses that's great

00:03:37,400 --> 00:03:40,730
anybody can do it so you walk in and you

00:03:39,500 --> 00:03:42,560
build whatever structure you want with

00:03:40,730 --> 00:03:44,840
whatever you can find so they pop up

00:03:42,560 --> 00:03:46,790
everywhere the problem is these

00:03:44,840 --> 00:03:49,010
structures are difficult to maintain to

00:03:46,790 --> 00:03:51,500
grow or protect they have very little

00:03:49,010 --> 00:03:54,230
fire or police presence and safety and

00:03:51,500 --> 00:03:55,519
crime issues are everywhere so forget

00:03:54,230 --> 00:03:56,959
about architecture I'm going to hand

00:03:55,519 --> 00:03:59,060
wave over the entire concept of

00:03:56,959 --> 00:04:01,280
architecture we're going to journey into

00:03:59,060 --> 00:04:05,870
a code favela and I'm going to take your

00:04:01,280 --> 00:04:08,510
sanity so the favela is actually a

00:04:05,870 --> 00:04:10,250
manifestation of Brian foots ball of mud

00:04:08,510 --> 00:04:12,650
pattern and we'll talk more on that in a

00:04:10,250 --> 00:04:15,340
minute but making one is really easy

00:04:12,650 --> 00:04:18,130
it's so easy that most of us do it a lot

00:04:15,340 --> 00:04:20,720
you start with a piece of throwaway code

00:04:18,130 --> 00:04:23,000
something temporary then you add to it

00:04:20,720 --> 00:04:25,220
and then you decide to lean on it as a

00:04:23,000 --> 00:04:27,320
part of your business so how does that

00:04:25,220 --> 00:04:29,390
happen this if any of this sounds

00:04:27,320 --> 00:04:32,330
familiar so this should be easy it's got

00:04:29,390 --> 00:04:33,890
to happen this week how many of you hate

00:04:32,330 --> 00:04:38,410
being asked to raise your hands and a

00:04:33,890 --> 00:04:40,610
talk I should c 0 hands people seriously

00:04:38,410 --> 00:04:43,820
no none of you should have raised your

00:04:40,610 --> 00:04:45,530
hands the rest of you how many have you

00:04:43,820 --> 00:04:46,169
have been asked to put a prototype of

00:04:45,530 --> 00:04:49,499
your own info

00:04:46,169 --> 00:04:53,430
before the best feeling right you're

00:04:49,499 --> 00:04:54,689
like sleep so good so there's this myth

00:04:53,430 --> 00:04:56,490
of a two-week feature I was talking to a

00:04:54,689 --> 00:04:58,499
CTO of a company that was a client of

00:04:56,490 --> 00:04:59,939
ours and he's like yeah they keep asking

00:04:58,499 --> 00:05:00,960
like what can we do in two weeks what

00:04:59,939 --> 00:05:02,969
can we do in two weeks the answer is

00:05:00,960 --> 00:05:04,650
nothing you can talk about what you want

00:05:02,969 --> 00:05:05,819
in two weeks but they say no no no we

00:05:04,650 --> 00:05:07,979
want you to deliver something in two

00:05:05,819 --> 00:05:09,749
weeks so those two week features take

00:05:07,979 --> 00:05:10,770
six weeks and then we try to cram it

00:05:09,749 --> 00:05:13,620
into two weeks and then we make

00:05:10,770 --> 00:05:15,599
sacrifices or will inherit code from

00:05:13,620 --> 00:05:18,330
inexperienced des but most of the time

00:05:15,599 --> 00:05:21,960
our shanty towns start as a quick

00:05:18,330 --> 00:05:23,580
prototype so let's just let's build one

00:05:21,960 --> 00:05:27,810
right like we do this all the time

00:05:23,580 --> 00:05:29,999
probably it starts like any other let's

00:05:27,810 --> 00:05:32,279
say we work on Giffin door it's a social

00:05:29,999 --> 00:05:34,139
network for animated gifs it was founded

00:05:32,279 --> 00:05:36,060
by someone who had made a lot of money

00:05:34,139 --> 00:05:38,279
with their harry potter fanfic site and

00:05:36,060 --> 00:05:40,860
decided they wanted to start a site to

00:05:38,279 --> 00:05:42,870
share animated gif it's just a plain

00:05:40,860 --> 00:05:45,389
vanilla server side up somebody said you

00:05:42,870 --> 00:05:48,349
know rails G scaffold blah and given

00:05:45,389 --> 00:05:50,310
door magically popped into existence uh

00:05:48,349 --> 00:05:52,770
mana do we really want to talk about

00:05:50,310 --> 00:05:59,099
pronunciation of gif all right here's

00:05:52,770 --> 00:06:01,800
the thing I don't care what the guy who

00:05:59,099 --> 00:06:05,279
created it said I'm an English major guy

00:06:01,800 --> 00:06:08,089
so I care a lot about seeing it with the

00:06:05,279 --> 00:06:11,849
soft Chee I don't know actually if yeah

00:06:08,089 --> 00:06:14,939
so we're going to start by sprinkling

00:06:11,849 --> 00:06:16,439
jeaious dhh calls it a sprinkling I

00:06:14,939 --> 00:06:17,759
think of jas which I always thought was

00:06:16,439 --> 00:06:19,979
a little weird but it's a you know nice

00:06:17,759 --> 00:06:21,899
little mental thing to visualize we're

00:06:19,979 --> 00:06:24,210
going to sprinkle some jansen all right

00:06:21,899 --> 00:06:25,669
your boss calls she says she that users

00:06:24,210 --> 00:06:27,930
want a better experience on the site so

00:06:25,669 --> 00:06:30,810
they shouldn't have to go to the whole

00:06:27,930 --> 00:06:33,210
new page to submit a new gift it should

00:06:30,810 --> 00:06:35,339
do it right from the index page you look

00:06:33,210 --> 00:06:37,729
at your javascript file mmm let's see

00:06:35,339 --> 00:06:41,159
okay well I'm daunted we march forward

00:06:37,729 --> 00:06:43,379
all right easy right what will sprinkle

00:06:41,159 --> 00:06:46,789
little HTML on the forum and AB

00:06:43,379 --> 00:06:50,310
show/hide all done great job all right

00:06:46,789 --> 00:06:52,229
except submit requires a full page

00:06:50,310 --> 00:06:53,819
refresh that's kind of irritating to

00:06:52,229 --> 00:06:56,069
users could you just do that with Ajax

00:06:53,819 --> 00:06:58,919
well we know Ajax that's just a little

00:06:56,069 --> 00:06:59,670
jquery ajax that's what it's for all

00:06:58,919 --> 00:07:02,160
right

00:06:59,670 --> 00:07:04,530
now that's great except now you've

00:07:02,160 --> 00:07:05,910
actually created a bug because the new

00:07:04,530 --> 00:07:07,560
post doesn't actually pop into the

00:07:05,910 --> 00:07:09,450
screen because that's static HTML

00:07:07,560 --> 00:07:11,970
generated from the server can you add it

00:07:09,450 --> 00:07:15,300
to the list oh no problem all right okay

00:07:11,970 --> 00:07:17,550
so it's a little bit of a problem you're

00:07:15,300 --> 00:07:19,890
now duplicating gone from your a bin je

00:07:17,550 --> 00:07:22,620
s but a little duplication never kill

00:07:19,890 --> 00:07:25,260
anybody so you're agile right so you

00:07:22,620 --> 00:07:27,390
agile the code in this is agile we add

00:07:25,260 --> 00:07:30,240
jold it right in there yeah until the

00:07:27,390 --> 00:07:31,650
whole thing is so agile alright so the

00:07:30,240 --> 00:07:34,410
sprinkles starting to turn into a little

00:07:31,650 --> 00:07:37,710
bit more of a rain shower so your

00:07:34,410 --> 00:07:39,840
project manager comes by and says he's

00:07:37,710 --> 00:07:41,640
super happy right he says great users

00:07:39,840 --> 00:07:44,130
are happy but I've got another idea for

00:07:41,640 --> 00:07:46,020
you you just kind of want to be able to

00:07:44,130 --> 00:07:47,670
cancel that window and close it out in

00:07:46,020 --> 00:07:49,770
zero that form out all right this is

00:07:47,670 --> 00:07:53,280
this is a very small feature so we

00:07:49,770 --> 00:07:54,840
happily oblige we dutifully implement

00:07:53,280 --> 00:07:58,980
the cancel button and 0 at the forum

00:07:54,840 --> 00:08:00,870
with jquery all right so now users are

00:07:58,980 --> 00:08:02,700
hitting submit though on empty and

00:08:00,870 --> 00:08:03,690
invalid form so we got it like okay

00:08:02,700 --> 00:08:06,240
we're going to validate this a little

00:08:03,690 --> 00:08:07,800
bit so we're validating on the server

00:08:06,240 --> 00:08:10,560
but we're not getting good responses

00:08:07,800 --> 00:08:12,150
back that we're handling well let's just

00:08:10,560 --> 00:08:13,530
prevent it on the client side it

00:08:12,150 --> 00:08:15,740
shouldn't be hard too hard to tell if

00:08:13,530 --> 00:08:18,870
there's a gift inside that post body

00:08:15,740 --> 00:08:20,100
okay well it's a little hard to tell it

00:08:18,870 --> 00:08:22,500
wasn't easy but it was relatively

00:08:20,100 --> 00:08:25,140
straightforward we also need to disable

00:08:22,500 --> 00:08:27,810
the submit button unless it's valid so

00:08:25,140 --> 00:08:29,970
now we are kind of pushing some state of

00:08:27,810 --> 00:08:31,020
this thing around that's fine just it's

00:08:29,970 --> 00:08:33,510
fine it's fine everything's fine don't

00:08:31,020 --> 00:08:35,610
worry about it's fine alright so now

00:08:33,510 --> 00:08:37,470
you're sprinkling is a little bit more

00:08:35,610 --> 00:08:39,290
of a torrential downpour it's really

00:08:37,470 --> 00:08:42,240
kind of coming out coming down out there

00:08:39,290 --> 00:08:43,950
alright so the CEO comes by and she

00:08:42,240 --> 00:08:46,080
wants to congratulate you and ask for

00:08:43,950 --> 00:08:48,360
just a couple more enhancements let's

00:08:46,080 --> 00:08:49,980
not in cool inline preview for the image

00:08:48,360 --> 00:08:51,270
so users know exactly what they're

00:08:49,980 --> 00:08:53,340
posting before they click Submit and

00:08:51,270 --> 00:08:55,620
let's add a character count like Twitter

00:08:53,340 --> 00:09:00,450
so that doesn't deem them for long gif

00:08:55,620 --> 00:09:02,610
URLs okay all right oh so we do the

00:09:00,450 --> 00:09:05,190
check and we add it in and and we add a

00:09:02,610 --> 00:09:07,680
little we had a little character count

00:09:05,190 --> 00:09:09,990
that breaks a couple other things and it

00:09:07,680 --> 00:09:11,370
leads to more double checking as we

00:09:09,990 --> 00:09:13,110
start moving this state around to say

00:09:11,370 --> 00:09:15,390
okay zero out the form

00:09:13,110 --> 00:09:16,829
seriously on cancel make sure that it's

00:09:15,390 --> 00:09:19,500
zeroed out in this place make sure that

00:09:16,829 --> 00:09:21,959
the button is enabled in this case we're

00:09:19,500 --> 00:09:24,829
starting to build pretty pretty

00:09:21,959 --> 00:09:27,420
awesome-looking little application here

00:09:24,829 --> 00:09:29,490
standing that's who's like one of my

00:09:27,420 --> 00:09:31,140
favorite people on the planet talks

00:09:29,490 --> 00:09:34,589
about code shape as an indicator of code

00:09:31,140 --> 00:09:37,769
quality this code has a shape that shape

00:09:34,589 --> 00:09:39,450
is a sack of hot garbage like on the

00:09:37,769 --> 00:09:40,800
streets of Manhattan in summertime where

00:09:39,450 --> 00:09:44,790
it's like dripping like a brown liquid

00:09:40,800 --> 00:09:49,730
it's unidentifiable so here we are a

00:09:44,790 --> 00:09:52,709
total tsunami of entangle jQuery code

00:09:49,730 --> 00:09:55,140
excellent all right so please see you a

00:09:52,709 --> 00:10:00,029
comes by please just one more feature

00:09:55,140 --> 00:10:02,310
it's really important so I really was

00:10:00,029 --> 00:10:03,990
going to write one more feature but

00:10:02,310 --> 00:10:06,600
there is so much double checking in this

00:10:03,990 --> 00:10:07,820
app and enter welven states that concept

00:10:06,600 --> 00:10:10,320
of interleaving that we talked about

00:10:07,820 --> 00:10:12,410
initially the thought of editing that

00:10:10,320 --> 00:10:15,149
code makes me want to physically vomit

00:10:12,410 --> 00:10:17,220
so now what right we have several

00:10:15,149 --> 00:10:19,290
options available to us addressing a but

00:10:17,220 --> 00:10:20,940
of ball of mud is pretty difficult and

00:10:19,290 --> 00:10:22,260
you have a few choices so we could sweep

00:10:20,940 --> 00:10:24,300
it under the rug and put it inside a

00:10:22,260 --> 00:10:26,699
black box and forget about it we could

00:10:24,300 --> 00:10:28,529
tear it down and rebuild from scratch we

00:10:26,699 --> 00:10:29,850
could do block by block renovation these

00:10:28,529 --> 00:10:31,949
are all part of the the ball of mud

00:10:29,850 --> 00:10:32,940
pattern and how to address it you keep

00:10:31,949 --> 00:10:34,980
the whole thing working but you

00:10:32,940 --> 00:10:38,040
reconstruct it block by block or you can

00:10:34,980 --> 00:10:40,019
quit your job so the black box is fine

00:10:38,040 --> 00:10:42,029
if you know you're never going to have

00:10:40,019 --> 00:10:43,890
to touch it again the rewrite is super

00:10:42,029 --> 00:10:46,260
tempting but you're going to find lots

00:10:43,890 --> 00:10:49,740
of hidden pain from features that exist

00:10:46,260 --> 00:10:51,300
and were built over time and you always

00:10:49,740 --> 00:10:53,010
discover some kind of business logic

00:10:51,300 --> 00:10:55,290
that was just like secretly hiding in

00:10:53,010 --> 00:10:56,519
that code somewhere and quitting's out

00:10:55,290 --> 00:10:58,740
because we're done running away from our

00:10:56,519 --> 00:11:00,990
problems all right so we decide to

00:10:58,740 --> 00:11:02,820
refactor is best in this case the

00:11:00,990 --> 00:11:05,070
feature has to be maintained but it's

00:11:02,820 --> 00:11:07,620
become too difficult to manage users are

00:11:05,070 --> 00:11:10,740
having a bad time and those problems

00:11:07,620 --> 00:11:12,630
actually get more intense the and and

00:11:10,740 --> 00:11:15,120
riskier the longer a user is clicking

00:11:12,630 --> 00:11:16,860
around on your site because it's you're

00:11:15,120 --> 00:11:18,209
getting more of that state on the client

00:11:16,860 --> 00:11:20,670
side that could be out of sync with the

00:11:18,209 --> 00:11:21,600
server or even itself so most

00:11:20,670 --> 00:11:23,399
importantly you're tossing and turning

00:11:21,600 --> 00:11:25,199
at night you can't stop thinking about

00:11:23,399 --> 00:11:26,400
the bug reports you're going to have in

00:11:25,199 --> 00:11:28,350
the morning that you're going to

00:11:26,400 --> 00:11:30,720
with the frustrated users and angry

00:11:28,350 --> 00:11:33,060
managers and your gut is telling you to

00:11:30,720 --> 00:11:35,220
fix this and your gut is totally right

00:11:33,060 --> 00:11:38,820
all right so you have to pass out of

00:11:35,220 --> 00:11:40,770
this place one of them is to refactor

00:11:38,820 --> 00:11:42,450
toward more idiomatic Jess actually I

00:11:40,770 --> 00:11:45,330
was talking about this with a friend of

00:11:42,450 --> 00:11:49,140
mine in Austin and he's like that oh did

00:11:45,330 --> 00:11:51,180
you write that code as like a like a

00:11:49,140 --> 00:11:55,800
straw man argument about how bad jQuery

00:11:51,180 --> 00:11:57,210
code can be and I was like yes well I

00:11:55,800 --> 00:12:00,570
actually I was kind of maybe doing my

00:11:57,210 --> 00:12:01,590
best with when I had at the time so he's

00:12:00,570 --> 00:12:03,390
like well you could do this and this and

00:12:01,590 --> 00:12:05,130
this you could you can have one is you

00:12:03,390 --> 00:12:07,500
can refactor to plain JavaScript objects

00:12:05,130 --> 00:12:09,450
and make it more idiomatic but path to

00:12:07,500 --> 00:12:12,000
is you can lean on a framework or

00:12:09,450 --> 00:12:13,860
something to refactor toward and use

00:12:12,000 --> 00:12:17,940
models to manage that that's data in

00:12:13,860 --> 00:12:20,040
that state our goal is to get at the

00:12:17,940 --> 00:12:22,050
heck out of the dome as fast as humanly

00:12:20,040 --> 00:12:23,760
possible that's our biggest pain point

00:12:22,050 --> 00:12:25,740
so we're going to choose a framework to

00:12:23,760 --> 00:12:27,270
help manage that for us will have the

00:12:25,740 --> 00:12:29,760
framework manage to DOM and will manage

00:12:27,270 --> 00:12:31,860
the data so there are five steps to

00:12:29,760 --> 00:12:33,240
doing this and so that should be easy

00:12:31,860 --> 00:12:35,130
right like refactoring is just five

00:12:33,240 --> 00:12:37,130
steps so we can probably just cancel the

00:12:35,130 --> 00:12:40,140
rest of the talk it's thanks everybody

00:12:37,130 --> 00:12:41,880
all right we'll go into it it's just

00:12:40,140 --> 00:12:43,950
nice to kind of build up in my opinion

00:12:41,880 --> 00:12:45,900
against a framework to spend like

00:12:43,950 --> 00:12:48,000
spending a time having something that

00:12:45,900 --> 00:12:50,610
manages that for me as a developer of no

00:12:48,000 --> 00:12:52,220
particular skill I guess I really I

00:12:50,610 --> 00:12:56,010
really like having that to lean against

00:12:52,220 --> 00:12:58,170
the reason that we choose ember we've

00:12:56,010 --> 00:12:59,910
written a blog post about it will

00:12:58,170 --> 00:13:01,410
probably write more I like a lot of

00:12:59,910 --> 00:13:03,510
things about it for this specific case

00:13:01,410 --> 00:13:06,540
it's a few things it's got a model layer

00:13:03,510 --> 00:13:07,890
for managing data bindings to represent

00:13:06,540 --> 00:13:10,200
state and tie them to the page and

00:13:07,890 --> 00:13:12,540
components to tie them together in a way

00:13:10,200 --> 00:13:15,390
that we can drop in easily so we'll move

00:13:12,540 --> 00:13:18,500
to step one wrap it wrap it wrap it wrap

00:13:15,390 --> 00:13:18,500
it wrap it

00:13:18,580 --> 00:13:23,360
okay so a lot of people think the ember

00:13:21,110 --> 00:13:25,010
is just for starting an application from

00:13:23,360 --> 00:13:27,950
scratch it's with all the tutorials who

00:13:25,010 --> 00:13:30,320
tell you in reality ember has a pretty

00:13:27,950 --> 00:13:32,150
great component system that that lets

00:13:30,320 --> 00:13:34,220
you drop ember into an existing

00:13:32,150 --> 00:13:36,080
application without too much too much

00:13:34,220 --> 00:13:37,700
trouble we've written that process up on

00:13:36,080 --> 00:13:38,990
our blog as well it's actually really

00:13:37,700 --> 00:13:41,750
easy so you'll actually get it from

00:13:38,990 --> 00:13:45,589
contacts going along here alright first

00:13:41,750 --> 00:13:47,480
step this code goes to code jail it's if

00:13:45,589 --> 00:13:49,310
it escapes it will actually it will kill

00:13:47,480 --> 00:13:51,050
people so we're going to put that

00:13:49,310 --> 00:13:53,650
terrible code in code jail and wrap it

00:13:51,050 --> 00:13:57,320
in a component which is a self-enclosed

00:13:53,650 --> 00:13:58,940
contained bit of Dom and jas code jail

00:13:57,320 --> 00:14:01,160
here is the net legacy code function

00:13:58,940 --> 00:14:02,810
doesn't that name is not significant I

00:14:01,160 --> 00:14:05,120
just picked it because it's actually

00:14:02,810 --> 00:14:07,610
bootstrapping the old code so we make no

00:14:05,120 --> 00:14:09,380
changes the actual code itself and we

00:14:07,610 --> 00:14:11,900
move the HTML into the associated

00:14:09,380 --> 00:14:14,000
handlebars template and no structure of

00:14:11,900 --> 00:14:15,560
the Dom or the code actually changes it

00:14:14,000 --> 00:14:18,160
just takes it and closes it inside a

00:14:15,560 --> 00:14:20,089
component and puts it on the page and

00:14:18,160 --> 00:14:21,560
the way that we put it on the page is

00:14:20,089 --> 00:14:23,180
just with jquery we instantiate the

00:14:21,560 --> 00:14:26,270
component and stuff it into the page and

00:14:23,180 --> 00:14:27,860
that actually just works we think we you

00:14:26,270 --> 00:14:29,270
know there's no way to really know if

00:14:27,860 --> 00:14:31,070
your stuff works you just poke at it

00:14:29,270 --> 00:14:33,650
with the you know your hands on the

00:14:31,070 --> 00:14:39,050
browser so the next step is to test it

00:14:33,650 --> 00:14:40,250
and we write our first test and we just

00:14:39,050 --> 00:14:41,720
make sure that the thing shows up in the

00:14:40,250 --> 00:14:44,630
first place and that test actually

00:14:41,720 --> 00:14:46,220
passes you guys are going to wait well

00:14:44,630 --> 00:14:47,420
yeah we did we skip something here in

00:14:46,220 --> 00:14:52,160
their test and then now the tests are

00:14:47,420 --> 00:14:54,110
passing that test just does what it says

00:14:52,160 --> 00:14:56,150
it does it asserts that the component

00:14:54,110 --> 00:14:58,430
exists and that the piece of the

00:14:56,150 --> 00:14:59,959
component exists as well all right so

00:14:58,430 --> 00:15:02,390
you probably saw a little magical

00:14:59,959 --> 00:15:03,980
hand-waving there i'm doing a huge hand

00:15:02,390 --> 00:15:05,510
wave over javascript testing set up and

00:15:03,980 --> 00:15:07,640
i think most people in here do

00:15:05,510 --> 00:15:09,020
javascript and so you've probably got a

00:15:07,640 --> 00:15:10,730
solution that either works or does not

00:15:09,020 --> 00:15:13,250
work for you based on my experience with

00:15:10,730 --> 00:15:15,050
javascript testing a note on that really

00:15:13,250 --> 00:15:16,930
fast on its own testing javascript is

00:15:15,050 --> 00:15:19,130
pretty easy but when you start adding

00:15:16,930 --> 00:15:20,150
frameworks or server-side frameworks

00:15:19,130 --> 00:15:21,320
like rails with the asset pipeline

00:15:20,150 --> 00:15:23,720
things can start getting a little

00:15:21,320 --> 00:15:26,260
complicated this whole scheme is kind of

00:15:23,720 --> 00:15:28,339
a wild west there are lots of choices

00:15:26,260 --> 00:15:31,430
for what you want to do and it's pretty

00:15:28,339 --> 00:15:33,649
wide open not like like wide open spaces

00:15:31,430 --> 00:15:37,730
is in fresh air but like this wild west

00:15:33,649 --> 00:15:40,040
and it can actually lead to a paralysis

00:15:37,730 --> 00:15:41,570
of choice in my experience and there's

00:15:40,040 --> 00:15:44,060
not really an accepted happy path for a

00:15:41,570 --> 00:15:45,680
lot of this stuff yet so things are

00:15:44,060 --> 00:15:47,330
maturing and we're building schools and

00:15:45,680 --> 00:15:49,640
hospitals still so we're just kind of

00:15:47,330 --> 00:15:51,890
all figuring it out there's lots of need

00:15:49,640 --> 00:15:53,690
right now for libraries for blog posts

00:15:51,890 --> 00:15:56,360
people finding happy paths through this

00:15:53,690 --> 00:15:58,040
if you have questions about getting your

00:15:56,360 --> 00:15:59,240
test set up for something like we're

00:15:58,040 --> 00:16:00,860
talking about right now the best thing

00:15:59,240 --> 00:16:02,750
to do is take me aside and talk to me

00:16:00,860 --> 00:16:04,940
for about 15 minutes and I can help you

00:16:02,750 --> 00:16:07,190
get it set up we'd love to blog about it

00:16:04,940 --> 00:16:09,110
and make it more obvious how this how we

00:16:07,190 --> 00:16:11,570
do this stuff I'd love to get feedback

00:16:09,110 --> 00:16:14,510
from all of y'all about how how you do

00:16:11,570 --> 00:16:17,180
it we're all kind of collectively as a

00:16:14,510 --> 00:16:19,310
community figuring this stuff out so all

00:16:17,180 --> 00:16:20,959
right moving back into hand wave over

00:16:19,310 --> 00:16:23,000
we're actually back into actual tests

00:16:20,959 --> 00:16:25,760
that actually pass and we want to

00:16:23,000 --> 00:16:27,890
actually test some stuff that relies on

00:16:25,760 --> 00:16:30,140
ajax and that could be intimidating it's

00:16:27,890 --> 00:16:31,880
actually pretty simple i liked IC ajax

00:16:30,140 --> 00:16:35,870
from ryan florence and his team and in

00:16:31,880 --> 00:16:37,459
structure and we add tasks for each path

00:16:35,870 --> 00:16:39,920
through the experience here we're

00:16:37,459 --> 00:16:44,600
testing that submit throws a success

00:16:39,920 --> 00:16:46,220
message and then we add more tasks for

00:16:44,600 --> 00:16:48,230
each path through the experience and

00:16:46,220 --> 00:16:52,820
here we're testing that submit shows a

00:16:48,230 --> 00:16:55,070
success message here thing yes alright

00:16:52,820 --> 00:16:56,870
so that's the test that's a lot of tests

00:16:55,070 --> 00:16:58,490
around this thing but this was this was

00:16:56,870 --> 00:17:00,650
a tiny featured that they asked you for

00:16:58,490 --> 00:17:02,000
and all of this is just testing the

00:17:00,650 --> 00:17:04,130
various kinds of functionality and

00:17:02,000 --> 00:17:06,470
pathways do that miniscule little

00:17:04,130 --> 00:17:07,309
component but with that in place we can

00:17:06,470 --> 00:17:09,620
actually move forward with some

00:17:07,309 --> 00:17:11,449
confidence with this refactor so all

00:17:09,620 --> 00:17:13,790
right let's take a victory lap this is

00:17:11,449 --> 00:17:17,569
actually for Cassandra who is a superb

00:17:13,790 --> 00:17:19,520
at a like roller derby champ so go and

00:17:17,569 --> 00:17:24,170
take a victory lap you earned it this is

00:17:19,520 --> 00:17:26,030
actually just the start though the third

00:17:24,170 --> 00:17:29,870
step is that we need to identify models

00:17:26,030 --> 00:17:31,220
what I mean by that is there are things

00:17:29,870 --> 00:17:33,679
that you rely on in your client side

00:17:31,220 --> 00:17:36,350
that that are persistent that have state

00:17:33,679 --> 00:17:38,330
and your server side MVC might give you

00:17:36,350 --> 00:17:39,700
some first clues toward this it probably

00:17:38,330 --> 00:17:42,290
won't might wind up matching exactly

00:17:39,700 --> 00:17:44,960
what you wind up with but it's actually

00:17:42,290 --> 00:17:47,059
pretty good place to start in this

00:17:44,960 --> 00:17:48,320
case we get to drive with the test we

00:17:47,059 --> 00:17:50,000
know that we're going to have a gift

00:17:48,320 --> 00:17:52,309
post model and that it has a piece of

00:17:50,000 --> 00:17:54,649
behavior that extracts the gift out of

00:17:52,309 --> 00:17:56,600
the post body so we can we can write a

00:17:54,649 --> 00:17:58,279
test specifically for this so we're

00:17:56,600 --> 00:18:00,080
going to create the model and write the

00:17:58,279 --> 00:18:04,940
test to make sure that that gets

00:18:00,080 --> 00:18:08,090
extracted out with no code that fails

00:18:04,940 --> 00:18:10,490
that's good all right so we go ahead and

00:18:08,090 --> 00:18:12,320
create the model and the function this

00:18:10,490 --> 00:18:13,850
is actually computed property and for

00:18:12,320 --> 00:18:16,669
those that don't know what a computed

00:18:13,850 --> 00:18:19,279
property it's that it's a one of that

00:18:16,669 --> 00:18:21,880
it's a it's a function that just assigns

00:18:19,279 --> 00:18:26,270
itself as a property on the object and

00:18:21,880 --> 00:18:28,610
then we make the unit test pass and from

00:18:26,270 --> 00:18:31,549
that point we can turn the static

00:18:28,610 --> 00:18:33,289
content into dynamic content in the

00:18:31,549 --> 00:18:36,110
handlebars template so now we're leaning

00:18:33,289 --> 00:18:38,720
on that model to store that data for the

00:18:36,110 --> 00:18:42,830
character count and extracting the the

00:18:38,720 --> 00:18:44,870
gift link from the post body and then we

00:18:42,830 --> 00:18:47,630
can actually delete all of that goofy

00:18:44,870 --> 00:18:49,010
functionality from the legacy code so

00:18:47,630 --> 00:18:53,270
we're liberating some code from the code

00:18:49,010 --> 00:18:54,590
jail by killing it okay so but this

00:18:53,270 --> 00:18:56,270
should actually get the older acceptance

00:18:54,590 --> 00:18:59,090
tests up and running it is the coolest

00:18:56,270 --> 00:19:00,770
feeling y'all when you you delete a

00:18:59,090 --> 00:19:02,059
bunch of old code and you do refactor

00:19:00,770 --> 00:19:04,340
like this and you click the button and

00:19:02,059 --> 00:19:06,140
your test run and they pass like oh my

00:19:04,340 --> 00:19:07,940
gosh like you just there's so much stuff

00:19:06,140 --> 00:19:10,100
that you did not do just there when you

00:19:07,940 --> 00:19:11,750
have a good test suite all right so here

00:19:10,100 --> 00:19:13,309
now we're letting the frameworks start

00:19:11,750 --> 00:19:14,720
to carry some of this load like we don't

00:19:13,309 --> 00:19:17,029
want to carry our own match the luggage

00:19:14,720 --> 00:19:18,710
we can't live without it so this is what

00:19:17,029 --> 00:19:20,480
i mean by leaning on the framework the

00:19:18,710 --> 00:19:22,100
models hold on to our data keep it up to

00:19:20,480 --> 00:19:24,380
date and bind the changes to the dorm

00:19:22,100 --> 00:19:25,580
automatically and we're going to lean a

00:19:24,380 --> 00:19:29,059
little harder because now it's time to

00:19:25,580 --> 00:19:30,529
identify states in the app that's step 4

00:19:29,059 --> 00:19:32,149
so this is actually pretty fun part it's

00:19:30,529 --> 00:19:33,440
pretty pretty simple you go back through

00:19:32,149 --> 00:19:35,240
the app and actually kind of pick out

00:19:33,440 --> 00:19:36,919
what those states are all right so we

00:19:35,240 --> 00:19:39,140
have this sort of initial state that

00:19:36,919 --> 00:19:40,789
things are in the buttons visible the

00:19:39,140 --> 00:19:44,059
button goes away during editing state

00:19:40,789 --> 00:19:45,529
and the thing is ready to save while the

00:19:44,059 --> 00:19:46,669
data is in flight we just want to

00:19:45,529 --> 00:19:49,070
disable the post button but leave

00:19:46,669 --> 00:19:50,750
everything else the same and on an error

00:19:49,070 --> 00:19:54,230
state we want to leave the text intact

00:19:50,750 --> 00:19:55,549
and display a message and on success we

00:19:54,230 --> 00:19:57,620
want to display a message and hide the

00:19:55,549 --> 00:19:58,490
form and then after five seconds or so

00:19:57,620 --> 00:20:00,790
we want to do

00:19:58,490 --> 00:20:03,080
forum reset back to the initial state

00:20:00,790 --> 00:20:05,929
which is exactly what we were doing

00:20:03,080 --> 00:20:08,360
before but now we're actually defining

00:20:05,929 --> 00:20:10,130
it and specifying it alright so the

00:20:08,360 --> 00:20:13,280
component starts in an initial state we

00:20:10,130 --> 00:20:14,510
bind that state to a class this is that

00:20:13,280 --> 00:20:16,610
class name bindings is how ember does

00:20:14,510 --> 00:20:18,770
that and we'll use that later to manage

00:20:16,610 --> 00:20:21,230
show and hide with just CSS instead of

00:20:18,770 --> 00:20:23,059
jQuery all right so we want the dog to

00:20:21,230 --> 00:20:26,420
just be a representation of state for

00:20:23,059 --> 00:20:28,760
the app now instead of managing the Dom

00:20:26,420 --> 00:20:30,500
with jquery we're actually going to just

00:20:28,760 --> 00:20:32,300
push that state around so we're like

00:20:30,500 --> 00:20:33,950
yeah you go over here stay and you go

00:20:32,300 --> 00:20:35,690
over here and we're getting rid of

00:20:33,950 --> 00:20:38,660
anything where we're actually touching

00:20:35,690 --> 00:20:40,940
the Dom directly these actions kind of

00:20:38,660 --> 00:20:42,290
form a poor man's state machine but

00:20:40,940 --> 00:20:44,090
it'll do for now for what we're trying

00:20:42,290 --> 00:20:46,390
to accomplish all right step four is

00:20:44,090 --> 00:20:49,040
we've liberated most of the code jail

00:20:46,390 --> 00:20:51,020
there's a few things hanging out there

00:20:49,040 --> 00:20:54,200
the states are in place and the model is

00:20:51,020 --> 00:20:55,670
tested couple of ugly things are left so

00:20:54,200 --> 00:20:57,410
the code jail is not empty we still have

00:20:55,670 --> 00:21:00,070
this legacy code that reaches outside of

00:20:57,410 --> 00:21:03,770
the component into the list to handle

00:21:00,070 --> 00:21:06,950
the delete function it deletes kind of

00:21:03,770 --> 00:21:08,840
in a wonky way here and just look at

00:21:06,950 --> 00:21:10,400
this for a second just let that soak in

00:21:08,840 --> 00:21:15,500
that's good code right there is what

00:21:10,400 --> 00:21:18,080
that is holy cow inserting the post is

00:21:15,500 --> 00:21:20,809
so painful it's painful to modify it

00:21:18,080 --> 00:21:22,429
invites pain for the user but it's

00:21:20,809 --> 00:21:24,590
outside the components job so what can

00:21:22,429 --> 00:21:26,770
we do well it's probably time for a

00:21:24,590 --> 00:21:29,270
second component for listing the posts

00:21:26,770 --> 00:21:30,710
we're really quick detour into ember

00:21:29,270 --> 00:21:32,690
data and when I say a quick detour this

00:21:30,710 --> 00:21:35,030
actually took 20 minutes to do in real

00:21:32,690 --> 00:21:37,580
time we'll use ember data to manage a

00:21:35,030 --> 00:21:39,380
global state and store of all these

00:21:37,580 --> 00:21:41,720
models that means we need to convert our

00:21:39,380 --> 00:21:44,000
existing like plain ember object model

00:21:41,720 --> 00:21:45,380
into ember data which is actually very

00:21:44,000 --> 00:21:47,000
very little work it took us about 20

00:21:45,380 --> 00:21:50,690
minutes and it buys us lots of good

00:21:47,000 --> 00:21:53,179
things i like to wire in a spicy Ajax to

00:21:50,690 --> 00:21:54,880
ember data amazingly fixtures will just

00:21:53,179 --> 00:21:57,620
continue to work as they did before and

00:21:54,880 --> 00:22:00,920
that amber data reef factors in place

00:21:57,620 --> 00:22:02,990
tests are green we can move on all right

00:22:00,920 --> 00:22:05,480
this is pretty much it it just handles a

00:22:02,990 --> 00:22:07,010
delete function that gets rid of that

00:22:05,480 --> 00:22:08,990
record so we're actually dealing with

00:22:07,010 --> 00:22:11,559
the data now instead of pushing stuff in

00:22:08,990 --> 00:22:11,559
and out of the Dom

00:22:11,980 --> 00:22:17,320
and it references a list of posts that's

00:22:14,200 --> 00:22:19,150
it and then in that second template we

00:22:17,320 --> 00:22:20,830
just list those out p kind of had a

00:22:19,150 --> 00:22:22,270
actually pretty solid example of what

00:22:20,830 --> 00:22:25,059
amber handlebars templates look like

00:22:22,270 --> 00:22:28,240
they look like this it replaces the old

00:22:25,059 --> 00:22:29,320
server side markup in this case and then

00:22:28,240 --> 00:22:31,299
we sprinkle it in just like the first

00:22:29,320 --> 00:22:33,669
one just in a different spot on that

00:22:31,299 --> 00:22:34,840
same page and then we have a second set

00:22:33,669 --> 00:22:36,130
of tests that pretty much follow the

00:22:34,840 --> 00:22:37,510
first we have a we actually have a

00:22:36,130 --> 00:22:39,250
pretty good pattern set forward now for

00:22:37,510 --> 00:22:40,929
how to test these components and that

00:22:39,250 --> 00:22:42,760
they show that these show up just as you

00:22:40,929 --> 00:22:45,400
expect them to and we can drive out the

00:22:42,760 --> 00:22:46,960
delete functionality from there so now

00:22:45,400 --> 00:22:49,090
we have two components with totally

00:22:46,960 --> 00:22:50,650
totally in separate spaces but they rely

00:22:49,090 --> 00:22:53,380
on a shared set of data and state

00:22:50,650 --> 00:22:55,960
they're talking through to each other so

00:22:53,380 --> 00:22:57,910
we'll create in one place adds two

00:22:55,960 --> 00:22:59,200
things in the second place so that's a

00:22:57,910 --> 00:23:00,910
lot of boilerplate code we didn't have

00:22:59,200 --> 00:23:03,460
to write we just trust that the data

00:23:00,910 --> 00:23:05,290
layer does this job all right last last

00:23:03,460 --> 00:23:08,010
thing I'll do will move all of the

00:23:05,290 --> 00:23:10,450
show/hide behavior into CSS animations

00:23:08,010 --> 00:23:12,100
what I like to do with that is by

00:23:10,450 --> 00:23:13,510
creating placeholders for the various

00:23:12,100 --> 00:23:15,370
states of this thing because we bound

00:23:13,510 --> 00:23:17,020
that class so we know that we're going

00:23:15,370 --> 00:23:19,090
to push it from initial class to editing

00:23:17,020 --> 00:23:21,970
and so on so we'll create those classes

00:23:19,090 --> 00:23:24,610
as little containers to hold things like

00:23:21,970 --> 00:23:26,290
CSS animation so hopefully the CSS here

00:23:24,610 --> 00:23:28,210
actually kind of tells a story that it's

00:23:26,290 --> 00:23:31,030
an initial state the height is 0 the

00:23:28,210 --> 00:23:32,799
opacity 0 but after its moved out of

00:23:31,030 --> 00:23:35,010
that state we actually can see things

00:23:32,799 --> 00:23:40,210
pop into existence so it should

00:23:35,010 --> 00:23:42,250
translate down and into opacity one we

00:23:40,210 --> 00:23:46,809
can do a quick demo here of what the

00:23:42,250 --> 00:23:52,179
state of this thing is right now so this

00:23:46,809 --> 00:23:54,250
is it and we'll submit an animated gif I

00:23:52,179 --> 00:23:59,620
like to just switch it up just to throw

00:23:54,250 --> 00:24:01,240
people off that's not one and our

00:23:59,620 --> 00:24:03,270
character count is doing what it says it

00:24:01,240 --> 00:24:03,270
does

00:24:05,910 --> 00:24:11,240
and we'll post that one got some CSS bug

00:24:11,810 --> 00:24:19,920
lalalalala this is from Liz Thank You

00:24:14,310 --> 00:24:22,170
Liz I think this is wonderful and this

00:24:19,920 --> 00:24:27,060
one's pretty sweet this kid is really

00:24:22,170 --> 00:24:28,350
cool at parallel parking sorry I will do

00:24:27,060 --> 00:24:33,060
this all day if you guys don't stop me

00:24:28,350 --> 00:24:34,200
oh this one is probably my favorite so

00:24:33,060 --> 00:24:54,240
I'll just do this one and then we'll

00:24:34,200 --> 00:24:55,560
stop I just well we may if we've got

00:24:54,240 --> 00:24:57,780
time for four more we've got just a few

00:24:55,560 --> 00:24:59,430
minutes left so but we're our tests can

00:24:57,780 --> 00:25:01,500
actually relax about testing that Dom

00:24:59,430 --> 00:25:03,030
directly if we want they can continue to

00:25:01,500 --> 00:25:04,290
test the integration style but they

00:25:03,030 --> 00:25:05,550
don't necessarily need to test the Dom

00:25:04,290 --> 00:25:07,680
because the framework is managing that

00:25:05,550 --> 00:25:10,680
for us and now we can actually focus on

00:25:07,680 --> 00:25:12,360
application law logic and integration

00:25:10,680 --> 00:25:14,070
tests only if we want to so let's see

00:25:12,360 --> 00:25:16,770
what we've done so far see if you can

00:25:14,070 --> 00:25:19,260
find the business logic in here mmm if

00:25:16,770 --> 00:25:22,110
you can actually that's probably in the

00:25:19,260 --> 00:25:25,640
dsm-5 so you're diagnosed bowl jquery

00:25:22,110 --> 00:25:27,990
disease so i'm actually introducing

00:25:25,640 --> 00:25:30,540
512-bit Jake UCS encryption it actually

00:25:27,990 --> 00:25:32,580
encrypts your business logic in hundreds

00:25:30,540 --> 00:25:34,050
of lines of jQuery so no hacker that

00:25:32,580 --> 00:25:36,170
reads your source could ever figure out

00:25:34,050 --> 00:25:38,280
how your business actually makes money

00:25:36,170 --> 00:25:39,540
there's one you know the small downside

00:25:38,280 --> 00:25:41,940
as your other developers can't figure it

00:25:39,540 --> 00:25:44,190
out either but you know a small price to

00:25:41,940 --> 00:25:45,690
pay for security all right that's cloud

00:25:44,190 --> 00:25:49,230
gineering folks that's what I get paid

00:25:45,690 --> 00:25:51,090
the big bucks for so that turns out not

00:25:49,230 --> 00:25:53,460
to be such a hot idea for most of us we

00:25:51,090 --> 00:25:55,680
move that encrypted logic to computed

00:25:53,460 --> 00:25:57,030
properties states and models so your

00:25:55,680 --> 00:25:58,590
business logic is actually front and

00:25:57,030 --> 00:26:01,650
center so somebody could jump in here

00:25:58,590 --> 00:26:03,660
and see how to edit this to add more

00:26:01,650 --> 00:26:07,140
states to add more functionality to

00:26:03,660 --> 00:26:09,810
handle different actions so we've gone

00:26:07,140 --> 00:26:11,460
from a sack of hot garbage to a tested

00:26:09,810 --> 00:26:13,710
and documented pretty reliable

00:26:11,460 --> 00:26:15,480
implementation it's not perfect but it

00:26:13,710 --> 00:26:18,630
sort of begs now to be extended and

00:26:15,480 --> 00:26:19,590
reused so what happens now is kind of up

00:26:18,630 --> 00:26:20,760
to you you can

00:26:19,590 --> 00:26:21,779
keep extending this with more and more

00:26:20,760 --> 00:26:25,049
components and we built applications

00:26:21,779 --> 00:26:27,270
that way a if you want right now

00:26:25,049 --> 00:26:28,559
actually if you want to create a full

00:26:27,270 --> 00:26:30,179
single page application that's just a

00:26:28,559 --> 00:26:31,740
couple of steps away if you want the

00:26:30,179 --> 00:26:33,000
benefits of embers router and a lot of

00:26:31,740 --> 00:26:35,730
other cool stuff that ever will do for

00:26:33,000 --> 00:26:41,250
you if you just embrace it like the cult

00:26:35,730 --> 00:26:42,600
that it is ah I love leader so we did

00:26:41,250 --> 00:26:45,270
all this work and my brain is super

00:26:42,600 --> 00:26:46,950
tired and now I kind of like forgotten

00:26:45,270 --> 00:26:49,500
why I did any of it or why I became a

00:26:46,950 --> 00:26:50,789
programmer in the first place and then

00:26:49,500 --> 00:26:53,250
your boss comes by and she's like oh

00:26:50,789 --> 00:26:54,809
yeah we had a job to do a job that we

00:26:53,250 --> 00:26:56,010
were just about to quit right before we

00:26:54,809 --> 00:26:58,049
IP owed that would have been

00:26:56,010 --> 00:27:01,350
embarrassing all our friends driving up

00:26:58,049 --> 00:27:03,480
in Ferraris so we didn't quit because we

00:27:01,350 --> 00:27:05,159
love our users we love our co-workers

00:27:03,480 --> 00:27:07,590
and we want them to have cool nice stuff

00:27:05,159 --> 00:27:09,240
and we want to love our job the software

00:27:07,590 --> 00:27:10,559
development is supposed to be fun like I

00:27:09,240 --> 00:27:11,549
keep harping on this because I really

00:27:10,559 --> 00:27:13,350
believe it it can be very frustrating

00:27:11,549 --> 00:27:14,760
but we're pretty lucky to work in this

00:27:13,350 --> 00:27:16,799
industry and it should not give you

00:27:14,760 --> 00:27:17,820
night sweats that that does mean that we

00:27:16,799 --> 00:27:19,890
are doing something wrong if we're in

00:27:17,820 --> 00:27:21,860
that situation so let's try this again

00:27:19,890 --> 00:27:23,909
against our new and improved code base

00:27:21,860 --> 00:27:25,799
once we know the API it's pretty small

00:27:23,909 --> 00:27:27,809
test to verify that adding this

00:27:25,799 --> 00:27:29,490
functionality will do what we want this

00:27:27,809 --> 00:27:30,899
test is a little hand wavy because it

00:27:29,490 --> 00:27:31,770
passed for the wrong reasons and I

00:27:30,899 --> 00:27:34,860
didn't have time to fix it before

00:27:31,770 --> 00:27:36,210
finishing the talk but it would be

00:27:34,860 --> 00:27:38,640
something very similar to this probably

00:27:36,210 --> 00:27:42,149
was stepping out the save action and

00:27:38,640 --> 00:27:44,460
then we create a model that just defines

00:27:42,149 --> 00:27:47,039
what a favorite is we have the dynamic

00:27:44,460 --> 00:27:51,360
content to the handlebars and we write a

00:27:47,039 --> 00:27:53,399
toggle fav action to destroy or create a

00:27:51,360 --> 00:27:56,270
favorite and that's pretty much it so

00:27:53,399 --> 00:27:56,270
I'll show you that really fast

00:28:06,580 --> 00:28:16,520
all right yes all right now we're going

00:28:13,790 --> 00:28:23,720
to do a full page refresh all right so

00:28:16,520 --> 00:28:28,100
now mmm live demo I'm in the wrong

00:28:23,720 --> 00:28:32,450
branch okay well live demo bort hi

00:28:28,100 --> 00:28:34,750
everybody it's my first day all right so

00:28:32,450 --> 00:28:37,549
actually we have just a minute left so

00:28:34,750 --> 00:28:40,660
adding that functionality for the

00:28:37,549 --> 00:28:42,559
favoriting was actually pretty fun and I

00:28:40,660 --> 00:28:44,480
didn't have time to show it to you and

00:28:42,559 --> 00:28:46,160
that's a bummer but we can actually do a

00:28:44,480 --> 00:28:48,320
lot with that now that we have it we've

00:28:46,160 --> 00:28:50,809
added that favorite functionality it's

00:28:48,320 --> 00:28:52,429
extended we can add more filters to that

00:28:50,809 --> 00:28:54,110
we can add popular posts we can add

00:28:52,429 --> 00:28:55,490
sharing this thing is actually

00:28:54,110 --> 00:28:58,100
extensible and it's something that you

00:28:55,490 --> 00:28:59,960
can actually work in now with my last

00:28:58,100 --> 00:29:01,220
minute and my last breath before I die I

00:28:59,960 --> 00:29:03,049
want to tell you guys my Mountain West

00:29:01,220 --> 00:29:07,250
story really fast this is my fourth year

00:29:03,049 --> 00:29:08,690
at Mountain West my first year I was a

00:29:07,250 --> 00:29:09,950
brand new developer I'd never really

00:29:08,690 --> 00:29:11,720
built anything before and was really

00:29:09,950 --> 00:29:14,030
intimidating and I didn't really know

00:29:11,720 --> 00:29:15,740
too many people at all maybe just one or

00:29:14,030 --> 00:29:18,320
two people and it was it was pretty

00:29:15,740 --> 00:29:22,280
scary for me I went to a hack night that

00:29:18,320 --> 00:29:23,630
night and I walked into the door and I

00:29:22,280 --> 00:29:26,000
didn't know anybody and everybody seemed

00:29:23,630 --> 00:29:28,309
so smart and so intimidating and so for

00:29:26,000 --> 00:29:30,260
real programmer and I saw was not that

00:29:28,309 --> 00:29:31,190
actually like ran out of the hotel room

00:29:30,260 --> 00:29:33,049
where they were having the hack night

00:29:31,190 --> 00:29:35,720
and I like cried and drove home and was

00:29:33,049 --> 00:29:37,940
really sad and this is a long time ago

00:29:35,720 --> 00:29:40,190
now it feels very distant but I just

00:29:37,940 --> 00:29:42,100
want everybody here to know that the

00:29:40,190 --> 00:29:44,840
community here pick me out dust me off

00:29:42,100 --> 00:29:46,940
and made me feel like like I could just

00:29:44,840 --> 00:29:49,460
join in and participate and I hope

00:29:46,940 --> 00:29:51,799
that's how you guys feel as well these

00:29:49,460 --> 00:29:54,380
are my friends these are my people and I

00:29:51,799 --> 00:29:55,640
want to hug every dev I want you guys so

00:29:54,380 --> 00:29:57,370
please introduce yourself and ask me to

00:29:55,640 --> 00:29:59,840
actually demo the functioning a feature

00:29:57,370 --> 00:30:03,220
I'm told I'm pretty good at hugs and I

00:29:59,840 --> 00:30:03,220
just want to say thank you guys so much

00:30:36,060 --> 00:30:38,120

YouTube URL: https://www.youtube.com/watch?v=GB8pgxoBEBg


