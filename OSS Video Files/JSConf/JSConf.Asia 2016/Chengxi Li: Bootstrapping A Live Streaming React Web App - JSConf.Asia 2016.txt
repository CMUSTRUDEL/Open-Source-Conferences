Title: Chengxi Li: Bootstrapping A Live Streaming React Web App - JSConf.Asia 2016
Publication date: 2016-12-20
Playlist: JSConf.Asia 2016
Description: 
	Nowadays, live streaming is an essential feature of an internet product. There are tons of examples that show when live streaming can enrich a product: Super-stars connecting with fans, professors broadcasting vivid live courses and live video shopping experiences. 
In this talk, Iâ€˜m going to use React, a component based framework which makes it easy to build and maintain the bricks and blocks for a live streaming web-app. He'll dive into performance optimizations and how you can migrate your product to offer similar functionality and keep up with this trend.

Lee is part of the AlloyTeam at Tencent, China. He is working on bootstrapping a live video web-app with React and HLS in order to win over market-share for their product in China.


JSConf.Asia - Capitol Theatre, Singapore - 25+26 November 2016

Source: https://2016.jsconf.asia/

License: For reuse of this video under a more permissive license please get in touch with us. The speakers retain the copyright for their performances.
Captions: 
	00:00:01,100 --> 00:00:18,850
[Music]

00:00:22,590 --> 00:00:30,310
morning Singapore okay

00:00:27,070 --> 00:00:34,030
my topic is about how to boost chap a

00:00:30,310 --> 00:00:37,030
live-streaming react web app I think

00:00:34,030 --> 00:00:42,429
this girl's J's conference is perfect

00:00:37,030 --> 00:00:45,429
and I just saw the five minute talk just

00:00:42,429 --> 00:00:47,460
an and I think there is a rare kind of

00:00:45,429 --> 00:00:52,059
thing I think it is quite consider a

00:00:47,460 --> 00:00:57,460
there is Cameron out there and then he

00:00:52,059 --> 00:01:01,780
will switch the video here to show the

00:00:57,460 --> 00:01:06,310
demo performed by the speaker had thing

00:01:01,780 --> 00:01:08,259
I I suddenly see this behavior in

00:01:06,310 --> 00:01:10,299
China's conference so I think it is

00:01:08,259 --> 00:01:14,649
quite considerate but I think there is a

00:01:10,299 --> 00:01:18,610
pity that this year's conference has no

00:01:14,649 --> 00:01:21,250
live streaming video so the developers

00:01:18,610 --> 00:01:24,070
outside Singapore cannot enjoy such a

00:01:21,250 --> 00:01:26,350
perfect conference so hopefully next

00:01:24,070 --> 00:01:29,289
year the committee of the conference

00:01:26,350 --> 00:01:32,950
will permit up to write a live streaming

00:01:29,289 --> 00:01:35,159
video to the developers all over the

00:01:32,950 --> 00:01:35,159
world

00:01:35,280 --> 00:01:44,320
yep we okay we will provide service for

00:01:39,340 --> 00:01:46,719
you yeah okay about me

00:01:44,320 --> 00:01:48,700
I'm from tension alloy team which is I

00:01:46,719 --> 00:01:51,310
think one of the best front end

00:01:48,700 --> 00:01:55,479
developer team in Hanson and my major

00:01:51,310 --> 00:01:59,859
focus is on affirmation web and the

00:01:55,479 --> 00:02:03,549
performance of web app and there are

00:01:59,859 --> 00:02:06,009
some there's a small numbers of as with

00:02:03,549 --> 00:02:09,519
live streaming features in China so you

00:02:06,009 --> 00:02:11,800
can see the competition in this segment

00:02:09,519 --> 00:02:14,200
segmentation is quite fears in China

00:02:11,800 --> 00:02:19,120
because everyone wants to catch up

00:02:14,200 --> 00:02:21,580
and so what comes up in your mind if I

00:02:19,120 --> 00:02:26,340
mentioned live streaming do you have any

00:02:21,580 --> 00:02:29,190
ideas yep

00:02:26,340 --> 00:02:32,260
but there are more scenarios for example

00:02:29,190 --> 00:02:34,060
in university we usually skip our

00:02:32,260 --> 00:02:39,340
courses because the professors are

00:02:34,060 --> 00:02:44,349
boring so we will just watch the lecture

00:02:39,340 --> 00:02:48,760
video after the class and then some is

00:02:44,349 --> 00:02:52,269
some musical students we all like prayed

00:02:48,760 --> 00:02:56,410
a piano to earn money in the live

00:02:52,269 --> 00:03:00,810
streaming app and as a gaming fan we

00:02:56,410 --> 00:03:06,130
would like to enjoy a gaming narration

00:03:00,810 --> 00:03:12,190
or as a james of bronze fan I'd like to

00:03:06,130 --> 00:03:16,989
enjoy an NBA sports but there are a lot

00:03:12,190 --> 00:03:20,100
of mature native apps out there but why

00:03:16,989 --> 00:03:22,930
we need to build another like web

00:03:20,100 --> 00:03:26,290
version of life swimming out there are

00:03:22,930 --> 00:03:31,440
two reasons number one we would like to

00:03:26,290 --> 00:03:34,120
attract traffics for example this one is

00:03:31,440 --> 00:03:36,940
the scripture from life taught me which

00:03:34,120 --> 00:03:40,420
is the famous live streaming app in the

00:03:36,940 --> 00:03:44,920
USA which is produced by a Chinese

00:03:40,420 --> 00:03:47,709
company and when you think the house of

00:03:44,920 --> 00:03:50,350
the obvious video is it's funny and you

00:03:47,709 --> 00:03:53,139
click the share button to share it the

00:03:50,350 --> 00:03:56,650
link to the Facebook or Twitter then

00:03:53,139 --> 00:04:00,310
when your friends clicked the link and

00:03:56,650 --> 00:04:03,639
they also thing the house is quite

00:04:00,310 --> 00:04:06,579
impressive derivatives register a ton of

00:04:03,639 --> 00:04:12,280
the app and register as the user so

00:04:06,579 --> 00:04:15,669
that's the target of the version number

00:04:12,280 --> 00:04:19,870
two it can be a replacement for some

00:04:15,669 --> 00:04:22,530
native features like the live room and a

00:04:19,870 --> 00:04:24,880
second one is promotion activities

00:04:22,530 --> 00:04:28,740
because there are a lot of different

00:04:24,880 --> 00:04:31,020
kinds of activities the users were pay

00:04:28,740 --> 00:04:34,650
this activity is because they will earn

00:04:31,020 --> 00:04:40,710
some like gifts or they can improve

00:04:34,650 --> 00:04:43,860
their favorite host in the rank but it

00:04:40,710 --> 00:04:48,060
is not good for a native app to build

00:04:43,860 --> 00:04:52,140
different kinds of activities so this is

00:04:48,060 --> 00:04:55,350
the opportunities for for web and in

00:04:52,140 --> 00:04:59,070
this talk what I can show you there are

00:04:55,350 --> 00:05:03,330
three parts the first one in case there

00:04:59,070 --> 00:05:05,400
are some people do not know what live

00:05:03,330 --> 00:05:08,700
streaming is I've show you some basic

00:05:05,400 --> 00:05:12,060
concepts about it and then after that I

00:05:08,700 --> 00:05:15,060
will show you how to design the basic

00:05:12,060 --> 00:05:19,230
structure of complete live stirring app

00:05:15,060 --> 00:05:28,170
and lastly if the core of today's topics

00:05:19,230 --> 00:05:31,350
is what to build in react so what is the

00:05:28,170 --> 00:05:34,170
video here is a group of pictures and

00:05:31,350 --> 00:05:36,540
they're consecutive when you pray these

00:05:34,170 --> 00:05:40,230
pictures in a virtual time you can see

00:05:36,540 --> 00:05:42,960
an animation so this is a very simple

00:05:40,230 --> 00:05:46,350
video but for video it is not only

00:05:42,960 --> 00:05:50,510
contains images it contains like audio

00:05:46,350 --> 00:05:54,780
and the metadata about this video and

00:05:50,510 --> 00:06:01,520
codec is like a - to compress the raw

00:05:54,780 --> 00:06:04,710
data for example video we usually use

00:06:01,520 --> 00:06:09,030
h.264 to compress our video and we use

00:06:04,710 --> 00:06:11,910
AAC or h8a see the compressed audio and

00:06:09,030 --> 00:06:15,780
after that we will wrap it into a

00:06:11,910 --> 00:06:22,110
container we usually use like mp4 avi or

00:06:15,780 --> 00:06:24,870
FL we but is there any connections

00:06:22,110 --> 00:06:29,160
between like streaming and video yep

00:06:24,870 --> 00:06:32,310
they do live streaming is to deliver the

00:06:29,160 --> 00:06:40,440
video frame by frame from the server to

00:06:32,310 --> 00:06:41,580
the client here is the fraud of how live

00:06:40,440 --> 00:06:44,189
streaming

00:06:41,580 --> 00:06:47,490
it's delivered to the client firstly we

00:06:44,189 --> 00:06:51,719
use our device to produce a raw data and

00:06:47,490 --> 00:06:56,120
then we upload the data while I'm rtmp

00:06:51,719 --> 00:07:00,509
and web RTC then we can add some like

00:06:56,120 --> 00:07:02,789
watermark or some filters to make the

00:07:00,509 --> 00:07:05,969
picture that the video without the facts

00:07:02,789 --> 00:07:10,800
and then we contrast the whole thing

00:07:05,969 --> 00:07:14,509
with Kodak and when we when we finished

00:07:10,800 --> 00:07:18,750
the compression we will push the stream

00:07:14,509 --> 00:07:22,440
using like affair we Arabs Evo HLS and

00:07:18,750 --> 00:07:26,009
finally we get through the client when a

00:07:22,440 --> 00:07:31,229
client gets the streaming they will just

00:07:26,009 --> 00:07:34,169
pray the video right away before front

00:07:31,229 --> 00:07:37,590
and side we you we we cannot do a lot of

00:07:34,169 --> 00:07:40,560
things about it but we can still do

00:07:37,590 --> 00:07:42,830
something in the last step I will show

00:07:40,560 --> 00:07:42,830
you later

00:07:43,069 --> 00:07:50,430
so how can we pray the reader sauce in a

00:07:46,469 --> 00:07:54,840
web we have three kind of solutions in

00:07:50,430 --> 00:07:56,940
O'Day's fresh applause FL we is the main

00:07:54,840 --> 00:08:02,430
stream it has low latency

00:07:56,940 --> 00:08:04,770
however since Apple and Google decided

00:08:02,430 --> 00:08:11,310
to give our supporting France in the

00:08:04,770 --> 00:08:14,550
future so video and HR else will be we

00:08:11,310 --> 00:08:20,879
do tag and actually how as will be the

00:08:14,550 --> 00:08:25,050
future in though it has high latency but

00:08:20,879 --> 00:08:32,399
it is it has a good compatibility in

00:08:25,050 --> 00:08:36,300
mobile but am mpeg-dash I think will be

00:08:32,399 --> 00:08:38,510
the future stander it not only has

00:08:36,300 --> 00:08:41,039
loaded later disease but it also has

00:08:38,510 --> 00:08:44,219
bechamel operating and it's also

00:08:41,039 --> 00:08:47,550
convenient because we can load unpacked

00:08:44,219 --> 00:08:49,699
- video while HTTP and it should be

00:08:47,550 --> 00:08:49,699
asked

00:08:51,660 --> 00:08:59,670
so what exactly is hls it is soft for

00:08:56,460 --> 00:09:04,230
HTTP Live Streaming it has a control in

00:08:59,670 --> 00:09:08,370
this fire core m3u8 and in this file it

00:09:04,230 --> 00:09:12,810
has a lease of TS fires which is the

00:09:08,370 --> 00:09:18,900
video we pray in a client-side and then

00:09:12,810 --> 00:09:22,020
it has H dot 264 for the widow con codec

00:09:18,900 --> 00:09:27,660
and has am be 3 or AAC for the audio

00:09:22,020 --> 00:09:31,050
codec but if you would like to play that

00:09:27,660 --> 00:09:34,560
HLS in chrome you have to install a

00:09:31,050 --> 00:09:37,560
native OS pray extension and when you

00:09:34,560 --> 00:09:41,810
install it and show the developer to in

00:09:37,560 --> 00:09:46,800
chrome you can see there is a lace of

00:09:41,810 --> 00:09:55,710
information about TS fires it includes

00:09:46,800 --> 00:09:57,240
like the data and a duration so after a

00:09:55,710 --> 00:10:00,210
very boring lecture

00:09:57,240 --> 00:10:04,920
I've gonna show you how to design the

00:10:00,210 --> 00:10:07,250
whole picture of the architecture before

00:10:04,920 --> 00:10:09,990
we kicked off we need to think about

00:10:07,250 --> 00:10:13,260
where the apps will be where our web

00:10:09,990 --> 00:10:18,270
apps will be shown firstly we usually

00:10:13,260 --> 00:10:20,370
have a standalone version and then for

00:10:18,270 --> 00:10:24,750
some pages we will show it in the native

00:10:20,370 --> 00:10:28,500
web and in order to attract the traffic

00:10:24,750 --> 00:10:31,700
we will like share the links to QQ or

00:10:28,500 --> 00:10:33,840
witch hats in Chinese in China or in

00:10:31,700 --> 00:10:39,090
Western countries will share it to

00:10:33,840 --> 00:10:41,400
Facebook or like Twitter and there is

00:10:39,090 --> 00:10:44,730
some sophisticated so the video

00:10:41,400 --> 00:10:47,340
solutions like in tans and cloud we have

00:10:44,730 --> 00:10:51,090
a reader solutions for those startup

00:10:47,340 --> 00:10:55,290
companies and and as a solar company a

00:10:51,090 --> 00:10:58,110
developer you can use it you can use the

00:10:55,290 --> 00:11:01,560
API or SDK provided by it as an cloud

00:10:58,110 --> 00:11:03,390
and then you can like build a very

00:11:01,560 --> 00:11:06,779
simple video

00:11:03,390 --> 00:11:12,000
pray prayer but it is not enough is

00:11:06,779 --> 00:11:16,019
still far away from a complete video a

00:11:12,000 --> 00:11:18,120
live streaming app so based on our

00:11:16,019 --> 00:11:22,290
working experience I come up with this

00:11:18,120 --> 00:11:25,950
map of a whole structure at the top we

00:11:22,290 --> 00:11:30,810
have a user system we offer a system for

00:11:25,950 --> 00:11:33,630
reducers to register or login and we

00:11:30,810 --> 00:11:36,240
have a charming pawns and LeBeau system

00:11:33,630 --> 00:11:38,640
this is quite important because the

00:11:36,240 --> 00:11:41,370
users will pave to increase their

00:11:38,640 --> 00:11:45,240
charming points and the level and that's

00:11:41,370 --> 00:11:48,779
why we can survive and next we have a

00:11:45,240 --> 00:11:53,430
room which accommodate a lot of content

00:11:48,779 --> 00:11:56,339
we provided to the users and for the

00:11:53,430 --> 00:12:00,320
video we have two kinds of videos we

00:11:56,339 --> 00:12:03,649
have a live streaming and the house can

00:12:00,320 --> 00:12:07,380
deliver the message there or perform

00:12:03,649 --> 00:12:11,040
things in real-time through the clients

00:12:07,380 --> 00:12:13,980
and then if the thing the content is

00:12:11,040 --> 00:12:17,880
quite minified who the clients Dave you

00:12:13,980 --> 00:12:21,089
just make a record and then after they

00:12:17,880 --> 00:12:25,709
finish the live streaming the the

00:12:21,089 --> 00:12:30,209
clients can take a look at it in when

00:12:25,709 --> 00:12:33,300
they when they're free and we also have

00:12:30,209 --> 00:12:37,589
a message system for a client to

00:12:33,300 --> 00:12:42,180
interact with other like users or the

00:12:37,589 --> 00:12:46,170
host and we call the false for pass the

00:12:42,180 --> 00:12:48,320
content provider because we think these

00:12:46,170 --> 00:12:55,680
four systems we provide a meaningful

00:12:48,320 --> 00:12:58,079
content to our users but besides we have

00:12:55,680 --> 00:13:01,740
to survive so we we need to attract

00:12:58,079 --> 00:13:04,890
users to pay for our service so we have

00:13:01,740 --> 00:13:10,680
a few a payment system a gift system and

00:13:04,890 --> 00:13:14,550
an activity system but to ensure the

00:13:10,680 --> 00:13:19,140
whole thing working fine we need we need

00:13:14,550 --> 00:13:21,990
a monitor system to monitor like the

00:13:19,140 --> 00:13:28,649
performance and there now the arrow rate

00:13:21,990 --> 00:13:33,209
of the whole system but you see it is a

00:13:28,649 --> 00:13:37,170
choir large-scale system so it is quite

00:13:33,209 --> 00:13:39,540
limited there Israel not enough time

00:13:37,170 --> 00:13:44,490
today so I will just focus on the front

00:13:39,540 --> 00:13:47,850
and side in this conference so what we

00:13:44,490 --> 00:13:52,500
used to bill I have already mentioned in

00:13:47,850 --> 00:13:54,779
the first PPT I will use react to build

00:13:52,500 --> 00:13:57,180
a house system but it's not enough have

00:13:54,779 --> 00:14:01,680
you also used with us to manage our data

00:13:57,180 --> 00:14:07,110
and react route to manage the the route

00:14:01,680 --> 00:14:10,350
and we also have to help from the web

00:14:07,110 --> 00:14:13,290
pack because we need some API is like

00:14:10,350 --> 00:14:17,490
require ensure in my version 1 and

00:14:13,290 --> 00:14:21,360
system dot import in web pack ocean to

00:14:17,490 --> 00:14:30,560
to make sure that we can build a single

00:14:21,360 --> 00:14:34,170
page application but to ensure the

00:14:30,560 --> 00:14:38,940
stability of the whole system we have to

00:14:34,170 --> 00:14:42,870
use the started here in in July Facebook

00:14:38,940 --> 00:14:46,800
has ready launch starter kit core create

00:14:42,870 --> 00:14:49,040
rehab app but I want to use it I think

00:14:46,800 --> 00:14:52,699
it is good but it is not enough because

00:14:49,040 --> 00:14:57,449
it only gives us a hello world project

00:14:52,699 --> 00:15:01,589
so I start I just decided to create a

00:14:57,449 --> 00:15:05,399
starter kit course tamer reacts this is

00:15:01,589 --> 00:15:09,180
also started care but it is based on our

00:15:05,399 --> 00:15:12,510
teens max practice and how we improve

00:15:09,180 --> 00:15:15,930
the performance of reacts for example we

00:15:12,510 --> 00:15:19,410
include like pure render features in in

00:15:15,930 --> 00:15:22,830
this starter kit to ensure that we can

00:15:19,410 --> 00:15:26,490
improve the data comparison process

00:15:22,830 --> 00:15:29,220
in web and we have a touch in Bank

00:15:26,490 --> 00:15:31,770
component to solve the problem that

00:15:29,220 --> 00:15:35,510
reactors no support touch in R and in

00:15:31,770 --> 00:15:40,800
mobile browser and we also like have a

00:15:35,510 --> 00:15:47,970
reduced dev tools to help the developers

00:15:40,800 --> 00:15:51,840
is to see the data fro when we develop

00:15:47,970 --> 00:15:55,170
an app an octane in addition we have

00:15:51,840 --> 00:15:58,860
three template Rises for the first

00:15:55,170 --> 00:16:01,860
branch we have a simple branch it is

00:15:58,860 --> 00:16:06,330
just the helloweb project just like tray

00:16:01,860 --> 00:16:11,280
or a gap and we also have a react branch

00:16:06,330 --> 00:16:14,640
I use tensor news web app as an example

00:16:11,280 --> 00:16:16,920
so as a developer when you use this

00:16:14,640 --> 00:16:19,730
starter kit you can just copy the code

00:16:16,920 --> 00:16:23,430
from these demos so it is quite an easy

00:16:19,730 --> 00:16:27,240
process to develop an app using this

00:16:23,430 --> 00:16:30,780
starter kit and lastly I have a I also

00:16:27,240 --> 00:16:33,660
include in some morphic feature in your

00:16:30,780 --> 00:16:36,090
starter kit so if it will you would like

00:16:33,660 --> 00:16:39,870
to boost your performance you can use

00:16:36,090 --> 00:16:42,660
this branch and in the future I may also

00:16:39,870 --> 00:16:46,800
be like steamer carpet steamer wheel and

00:16:42,660 --> 00:16:49,710
similar rectangular and so on so you can

00:16:46,800 --> 00:16:54,630
choose whatever framers you like based

00:16:49,710 --> 00:16:59,790
on your project but for today I will

00:16:54,630 --> 00:17:05,490
have two cases to show you case one is

00:16:59,790 --> 00:17:08,850
the life room and there are several

00:17:05,490 --> 00:17:12,060
pages for the first one is this lays it

00:17:08,850 --> 00:17:15,570
is the least page which has the

00:17:12,060 --> 00:17:19,949
recommended hosts in this app and the

00:17:15,570 --> 00:17:25,380
second one is the setting and the last

00:17:19,949 --> 00:17:28,650
one is the life room and this one is the

00:17:25,380 --> 00:17:34,250
anchor the profile car in endure and the

00:17:28,650 --> 00:17:34,250
life room and I will show the demo here

00:17:34,750 --> 00:17:41,410
I write ass demo for the past three

00:17:37,540 --> 00:17:46,240
weeks right after work and here's the

00:17:41,410 --> 00:17:54,010
lease page and then I click click it and

00:17:46,240 --> 00:17:55,480
now it pays game of thumb you can chat

00:17:54,010 --> 00:17:58,200
with the anchor

00:17:55,480 --> 00:18:00,640
I guess and

00:17:58,200 --> 00:18:03,880
give today

00:18:00,640 --> 00:18:03,880
there's about

00:18:04,090 --> 00:18:11,040
and in after this conference when I

00:18:07,390 --> 00:18:14,620
clean up the crowd I will just put it in

00:18:11,040 --> 00:18:17,650
the github and hopefully you can help

00:18:14,620 --> 00:18:22,860
you to build a live streaming app for

00:18:17,650 --> 00:18:26,490
your company so our target is to build

00:18:22,860 --> 00:18:26,490
and our SVA

00:18:26,700 --> 00:18:31,690
let's do a division job first because

00:18:29,170 --> 00:18:35,310
react is a component based framework so

00:18:31,690 --> 00:18:42,640
we will need to divide a how app into

00:18:35,310 --> 00:18:46,480
pieces so the inner reffering is the

00:18:42,640 --> 00:18:50,020
radial component and the green one is

00:18:46,480 --> 00:18:53,520
the message component and blue one is

00:18:50,020 --> 00:18:58,150
the activity component the yellow one is

00:18:53,520 --> 00:19:02,830
the gift and payment component the red

00:18:58,150 --> 00:19:09,040
one will be the user component so as a

00:19:02,830 --> 00:19:11,380
whole they compose a room component and

00:19:09,040 --> 00:19:17,710
it's quite clear that the co structure

00:19:11,380 --> 00:19:20,200
will be like this so before you create

00:19:17,710 --> 00:19:23,200
app you can just pray you can just pray

00:19:20,200 --> 00:19:26,250
some empty components first and then you

00:19:23,200 --> 00:19:30,060
praise video chat feature and so on in

00:19:26,250 --> 00:19:33,490
in this structure in its wrapper and

00:19:30,060 --> 00:19:39,750
after that you can just fulfill the

00:19:33,490 --> 00:19:43,450
content of each component one by one so

00:19:39,750 --> 00:19:47,530
let's come to the most important part of

00:19:43,450 --> 00:19:50,140
video we have two kinds of video

00:19:47,530 --> 00:19:54,400
components as I mentioned before we have

00:19:50,140 --> 00:19:58,210
a live one and a pray by one and clearly

00:19:54,400 --> 00:20:02,020
the live one is the subset of pray bag

00:19:58,210 --> 00:20:06,780
so let's finish the moral compress one

00:20:02,020 --> 00:20:10,510
first let's do the division drop again

00:20:06,780 --> 00:20:14,710
here is the progress bar the pray bottom

00:20:10,510 --> 00:20:16,720
that they talk the audio bottom the

00:20:14,710 --> 00:20:19,900
audio controller

00:20:16,720 --> 00:20:23,320
and as a whole it is the controller and

00:20:19,900 --> 00:20:30,010
right above it it is the component to

00:20:23,320 --> 00:20:33,730
show the video so for the bottoms which

00:20:30,010 --> 00:20:36,940
is which has not so much change we can

00:20:33,730 --> 00:20:44,770
use a console abandon rack in react to

00:20:36,940 --> 00:20:48,250
represent and we can and all this come

00:20:44,770 --> 00:20:53,440
cause elements can compose it a praetor

00:20:48,250 --> 00:20:56,830
control so we can create another

00:20:53,440 --> 00:20:59,440
component to accommodate these elements

00:20:56,830 --> 00:21:04,900
and write some logics about how to

00:20:59,440 --> 00:21:07,240
control the video and since we know life

00:21:04,900 --> 00:21:09,880
control is the subset of pray back

00:21:07,240 --> 00:21:14,560
control we can just simply extends it

00:21:09,880 --> 00:21:18,910
and then we we can just do some small

00:21:14,560 --> 00:21:20,890
modification for example we know a live

00:21:18,910 --> 00:21:25,090
controller does not contain a progress

00:21:20,890 --> 00:21:33,910
bar we do not need to initiate the

00:21:25,090 --> 00:21:37,930
progress bar in this component and and

00:21:33,910 --> 00:21:42,390
then we use live control playback and we

00:21:37,930 --> 00:21:46,570
do text to form the whole life rooms and

00:21:42,390 --> 00:21:51,790
in this process we used hoc to help us

00:21:46,570 --> 00:21:57,130
to finish the job so what is hoc it is

00:21:51,790 --> 00:21:58,540
so for high high order component I think

00:21:57,130 --> 00:22:01,300
it is quite easy to for you to

00:21:58,540 --> 00:22:05,640
understand it is just like you put a

00:22:01,300 --> 00:22:08,980
Picard shoe and then it returns a Rachel

00:22:05,640 --> 00:22:15,520
now it it always returns a stronger one

00:22:08,980 --> 00:22:17,500
and then when you when you try to create

00:22:15,520 --> 00:22:22,110
a live room or private room you just put

00:22:17,500 --> 00:22:24,340
the video and a controller and does it

00:22:22,110 --> 00:22:26,890
so here's an example

00:22:24,340 --> 00:22:30,520
it is create a the pray back and room

00:22:26,890 --> 00:22:34,300
creator which is the is a an hoc

00:22:30,520 --> 00:22:39,270
and then you'll pray some metrics in in

00:22:34,300 --> 00:22:45,130
these components and then that's it and

00:22:39,270 --> 00:22:48,309
this is the same here so in a row it is

00:22:45,130 --> 00:22:52,510
just like a template you might think if

00:22:48,309 --> 00:22:56,440
you use hoc correctly you you can just

00:22:52,510 --> 00:22:59,320
create a different tamp raise for

00:22:56,440 --> 00:23:02,770
whatever the product manager asks you to

00:22:59,320 --> 00:23:05,590
do so if the manager hope to add the

00:23:02,770 --> 00:23:07,300
bullet screen you just put a Burris

00:23:05,590 --> 00:23:10,240
scream component here and then you just

00:23:07,300 --> 00:23:15,030
finish this component does it it's quite

00:23:10,240 --> 00:23:18,550
easy actually these are all concepts

00:23:15,030 --> 00:23:21,540
which you maybe see in other as one's

00:23:18,550 --> 00:23:24,760
programming languages but Reax is this

00:23:21,540 --> 00:23:28,080
is a new implementation of this new

00:23:24,760 --> 00:23:31,300
concept it and it is the perfect one for

00:23:28,080 --> 00:23:33,490
those elements does not change much the

00:23:31,300 --> 00:23:36,910
interest you easily use Khan's element

00:23:33,490 --> 00:23:38,910
to represent and for those components

00:23:36,910 --> 00:23:44,470
have a lot in common

00:23:38,910 --> 00:23:46,600
simply use extend and lastly for if you

00:23:44,470 --> 00:23:55,660
wanted to create different combinations

00:23:46,600 --> 00:23:58,360
you can use hoc after some chitchat I I

00:23:55,660 --> 00:24:05,080
will also like to show you how to

00:23:58,360 --> 00:24:07,660
control the video for life raucous it is

00:24:05,080 --> 00:24:13,929
not takes a long time you can just use

00:24:07,660 --> 00:24:18,370
m3u a if you use HLS and you can praise

00:24:13,929 --> 00:24:21,280
video tag here and as some logics to

00:24:18,370 --> 00:24:26,890
listen to the real events like like can

00:24:21,280 --> 00:24:30,280
play praying time update and etc for

00:24:26,890 --> 00:24:32,140
pray back it is also easy to but what if

00:24:30,280 --> 00:24:35,830
the product manager helps to support

00:24:32,140 --> 00:24:39,550
trom and then you may consider to use

00:24:35,830 --> 00:24:42,669
mp4 but what you use which is still use

00:24:39,550 --> 00:24:47,350
only one link and one video tag in this

00:24:42,669 --> 00:24:50,289
scenario I'm saying no I reused two or

00:24:47,350 --> 00:24:56,200
more widows text to help but the theory

00:24:50,289 --> 00:25:00,100
is the same as HLS because in HLS there

00:24:56,200 --> 00:25:02,259
are several pieces of TS virus but the

00:25:00,100 --> 00:25:05,980
browsers we would do the whole work for

00:25:02,259 --> 00:25:09,369
you if you just you just pray the first

00:25:05,980 --> 00:25:13,230
test fires and when if it is nearly

00:25:09,369 --> 00:25:16,330
finished it will load a second one

00:25:13,230 --> 00:25:18,730
here's the example we have three widow

00:25:16,330 --> 00:25:19,690
text here and when the first one is

00:25:18,730 --> 00:25:25,389
praying

00:25:19,690 --> 00:25:27,789
the other two are idle and for example

00:25:25,389 --> 00:25:29,980
there is 210 seconds to go in the first

00:25:27,789 --> 00:25:33,460
video you will start loading the second

00:25:29,980 --> 00:25:35,379
one and when I friend the first one

00:25:33,460 --> 00:25:39,669
finished the second one starts praying

00:25:35,379 --> 00:25:42,489
and the whole process loops and then

00:25:39,669 --> 00:25:46,840
this distinct theories I think is quite

00:25:42,489 --> 00:25:49,960
clear right and here are some

00:25:46,840 --> 00:25:51,940
compatibility issues on how to control

00:25:49,960 --> 00:25:54,249
the video button I will not go into

00:25:51,940 --> 00:26:03,609
details you can take a look after the

00:25:54,249 --> 00:26:08,249
conference so next I would show you how

00:26:03,609 --> 00:26:08,249
to lower the stream as far as I can

00:26:09,809 --> 00:26:17,080
there's something front-ends I cannot do

00:26:12,519 --> 00:26:20,619
but we can help the back ends I actually

00:26:17,080 --> 00:26:25,119
you're the size of group a GOP really

00:26:20,619 --> 00:26:30,070
matters in in this situation for example

00:26:25,119 --> 00:26:35,049
if the GOP is too big so it has a high

00:26:30,070 --> 00:26:36,940
solution but there is some downside the

00:26:35,049 --> 00:26:41,230
performance of the first screen will be

00:26:36,940 --> 00:26:44,460
slow and we have a high delay so we have

00:26:41,230 --> 00:26:48,460
to trade off we have to pick up

00:26:44,460 --> 00:26:52,259
relatively small size in acceptable

00:26:48,460 --> 00:26:52,259
range of resolution

00:26:54,390 --> 00:27:02,430
but they were sooo something the front

00:26:56,820 --> 00:27:06,800
ends I can do in react we can use server

00:27:02,430 --> 00:27:11,420
render which is core in some morphic and

00:27:06,800 --> 00:27:17,040
there are three options here to and from

00:27:11,420 --> 00:27:19,710
left to right the performance will be

00:27:17,040 --> 00:27:22,320
with the worse for the big pie it is it

00:27:19,710 --> 00:27:25,710
has a it has the best performance before

00:27:22,320 --> 00:27:27,780
the window data a scrape it has the the

00:27:25,710 --> 00:27:31,050
worst performance but it is still

00:27:27,780 --> 00:27:37,770
slightly better than the app without

00:27:31,050 --> 00:27:41,400
server and ax so one is window data for

00:27:37,770 --> 00:27:45,030
example you create a an express server

00:27:41,400 --> 00:27:47,610
and then you just load the CGI the API

00:27:45,030 --> 00:27:50,760
and then you just put the data in a

00:27:47,610 --> 00:27:53,730
script and after the server render the

00:27:50,760 --> 00:27:56,310
whole structure the jas in the front and

00:27:53,730 --> 00:27:59,130
we just gather data from the script and

00:27:56,310 --> 00:28:07,530
then it is and then it was render the

00:27:59,130 --> 00:28:10,200
whole structure however from the right

00:28:07,530 --> 00:28:15,480
the right one is is the easiest to

00:28:10,200 --> 00:28:17,220
implement for big PI you have to do a

00:28:15,480 --> 00:28:20,340
lot of work like change the whole

00:28:17,220 --> 00:28:23,460
structure of of your logic and you have

00:28:20,340 --> 00:28:27,060
to also modify the building too to build

00:28:23,460 --> 00:28:29,370
an app so for me I will use just use

00:28:27,060 --> 00:28:32,850
render to stream it has a relatively

00:28:29,370 --> 00:28:36,870
better performance and you don't have to

00:28:32,850 --> 00:28:39,270
change a lot in in your app you just you

00:28:36,870 --> 00:28:44,970
just use render to stream API in a react

00:28:39,270 --> 00:28:48,330
and does it so after I finished the we

00:28:44,970 --> 00:28:52,830
do part I will introduce the interacting

00:28:48,330 --> 00:28:55,710
part in a live room there are three

00:28:52,830 --> 00:28:58,740
pictures here for the first one it shows

00:28:55,710 --> 00:29:02,310
you the messages and a second one it has

00:28:58,740 --> 00:29:04,470
some like faces you can send to the

00:29:02,310 --> 00:29:08,950
anchor to express your

00:29:04,470 --> 00:29:14,080
fillings right now and the right one it

00:29:08,950 --> 00:29:18,190
offers some gifts for you to send to the

00:29:14,080 --> 00:29:20,230
house if you like this tanker so there

00:29:18,190 --> 00:29:24,190
are also three choices for you to build

00:29:20,230 --> 00:29:28,180
this interactive part we have a

00:29:24,190 --> 00:29:30,790
WebSocket which is the future choice but

00:29:28,180 --> 00:29:34,720
since it has some compatibility issue

00:29:30,790 --> 00:29:37,630
and some polyfill to finish this job is

00:29:34,720 --> 00:29:42,460
quite large so I will just dumb this

00:29:37,630 --> 00:29:46,480
choice but I will take a look at mckee

00:29:42,460 --> 00:29:48,990
p-- watching how the community solve

00:29:46,480 --> 00:29:52,150
these problems and if in the future the

00:29:48,990 --> 00:29:54,430
browsers a more browsers we support the

00:29:52,150 --> 00:29:58,060
WebSocket feature I returned through

00:29:54,430 --> 00:30:02,470
this option for the second one event

00:29:58,060 --> 00:30:05,110
source since it has a once I

00:30:02,470 --> 00:30:07,860
communication feature so it is also not

00:30:05,110 --> 00:30:11,680
good for building the interview

00:30:07,860 --> 00:30:16,120
interactive feature so lastly I would

00:30:11,680 --> 00:30:22,540
choose long polling it is a cross

00:30:16,120 --> 00:30:26,020
browser option you can just use it you

00:30:22,540 --> 00:30:29,380
can just use Ajax to finish this feature

00:30:26,020 --> 00:30:31,270
and it is not used up too much servers

00:30:29,380 --> 00:30:36,610
to resources so it is quite a good

00:30:31,270 --> 00:30:39,910
choice one last thing don't forget to

00:30:36,610 --> 00:30:44,860
control the dom numbers because when the

00:30:39,910 --> 00:30:48,490
users send a lot of messages and the dom

00:30:44,860 --> 00:30:51,370
numbers will just increase immediately

00:30:48,490 --> 00:30:56,620
so we have to in control the numbers to

00:30:51,370 --> 00:31:01,930
avoid rendering issues in this app so

00:30:56,620 --> 00:31:04,060
the second case is about activity which

00:31:01,930 --> 00:31:07,990
is also the important part because we

00:31:04,060 --> 00:31:12,810
need to rely on this part to survive we

00:31:07,990 --> 00:31:15,340
need to attract the users to pay our app

00:31:12,810 --> 00:31:17,710
we have to client different kinds of

00:31:15,340 --> 00:31:21,520
activities here like

00:31:17,710 --> 00:31:28,620
kajoor gift game or discount for each

00:31:21,520 --> 00:31:33,700
charge and some requests and and

00:31:28,620 --> 00:31:36,789
actually we can see in the left side it

00:31:33,700 --> 00:31:40,659
is a PC version of luggage or activity

00:31:36,789 --> 00:31:44,830
and on the right side it is the mobile

00:31:40,659 --> 00:31:46,960
version of lucky Joel and there there

00:31:44,830 --> 00:31:50,289
were a lot of components we can really

00:31:46,960 --> 00:31:52,840
use and when we when we finish the left

00:31:50,289 --> 00:31:56,890
one we will just copy the code and do

00:31:52,840 --> 00:32:02,590
some modification in CSS styles and we

00:31:56,890 --> 00:32:11,260
can tackle it using what using just one

00:32:02,590 --> 00:32:14,080
developer account but in this case what

00:32:11,260 --> 00:32:16,929
I want to show you is is that rillette

00:32:14,080 --> 00:32:20,470
is too heavy for this kind of pages and

00:32:16,929 --> 00:32:22,990
when I try to recommend react to my

00:32:20,470 --> 00:32:25,899
colleagues in such kind of activities

00:32:22,990 --> 00:32:29,520
they refers to use it why because the

00:32:25,899 --> 00:32:33,279
thing is too it is too heavy of activity

00:32:29,520 --> 00:32:38,860
pages so I would recommend you react in

00:32:33,279 --> 00:32:42,010
this case it is a library solution in a

00:32:38,860 --> 00:32:45,309
community and it has also has a good

00:32:42,010 --> 00:32:49,929
performance you can use with exactly the

00:32:45,309 --> 00:32:53,169
same react API and Jas and the code base

00:32:49,929 --> 00:32:55,750
of this project is quite small and and

00:32:53,169 --> 00:33:00,360
our team started to contribute to this

00:32:55,750 --> 00:33:05,860
project in order to fulfill our target

00:33:00,360 --> 00:33:08,830
and here is the benchmark you can see

00:33:05,860 --> 00:33:12,220
the the performance of this framer is

00:33:08,830 --> 00:33:17,970
not that bad and in some I am in some

00:33:12,220 --> 00:33:21,549
tasks it is also better than react and

00:33:17,970 --> 00:33:27,100
the most impressed impressive thing is

00:33:21,549 --> 00:33:28,740
that pre L only has 10 KB and even you

00:33:27,100 --> 00:33:33,690
you add prayer

00:33:28,740 --> 00:33:34,470
act come back to use foo api's with

00:33:33,690 --> 00:33:39,330
react

00:33:34,470 --> 00:33:44,270
it only has 14 KB to the whole bundle

00:33:39,330 --> 00:33:49,770
but comparing to react if you use react

00:33:44,270 --> 00:33:54,840
it occupies more than 100 KB and that's

00:33:49,770 --> 00:33:56,490
quite a lot and here is thickly yourself

00:33:54,840 --> 00:33:58,260
it would be good if you couldn't wrap up

00:33:56,490 --> 00:34:00,360
in the next two minutes sorry

00:33:58,260 --> 00:34:03,570
it would be good if you can wrap up in

00:34:00,360 --> 00:34:06,990
the next two minutes depth yes III am

00:34:03,570 --> 00:34:10,139
you finished and and here's lays off

00:34:06,990 --> 00:34:13,050
like lightweight solutions and you can

00:34:10,139 --> 00:34:20,520
take a look at it when you go back home

00:34:13,050 --> 00:34:23,369
and yep this is the end of my topic and

00:34:20,520 --> 00:34:26,850
today I have already talked about

00:34:23,369 --> 00:34:29,490
livestream this is the content we would

00:34:26,850 --> 00:34:32,820
like to provide and we use react to be

00:34:29,490 --> 00:34:35,790
the whole things so hopefully I this

00:34:32,820 --> 00:34:38,010
lecture will tell you how to build the

00:34:35,790 --> 00:34:42,300
whole thing in like one week or two

00:34:38,010 --> 00:34:43,190
weeks so thank you thank you

00:34:42,300 --> 00:34:47,709
same thing

00:34:43,190 --> 00:34:47,709
[Applause]

00:34:52,570 --> 00:34:54,630

YouTube URL: https://www.youtube.com/watch?v=RHq6bEgeZD4


