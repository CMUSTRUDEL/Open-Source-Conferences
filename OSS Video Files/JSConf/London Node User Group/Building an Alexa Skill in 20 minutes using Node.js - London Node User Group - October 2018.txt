Title: Building an Alexa Skill in 20 minutes using Node.js - London Node User Group - October 2018
Publication date: 2018-11-02
Playlist: London Node User Group
Description: 
	Presented by Andrea Muttoni

Developers can build engaging voice experiences, aka Skills, for their services with the Alexa Skills Kit. In this 20 minute session, learn how to build a voice experience for Amazon Alexa: from idea to working skill including some best practices to consider along the way.

_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,030 --> 00:00:05,100
so today I'm hoping to convince you to

00:00:03,689 --> 00:00:06,330
build Alexis skills and show you how

00:00:05,100 --> 00:00:08,179
easy it is especially if you have

00:00:06,330 --> 00:00:10,320
experience with nodejs

00:00:08,179 --> 00:00:14,250
how many of you have already built a

00:00:10,320 --> 00:00:15,929
skill for Amazon Alexa I'm hoping no

00:00:14,250 --> 00:00:18,570
hands go up so at least it's useful to

00:00:15,929 --> 00:00:22,410
everyone good although I'm a bit sad at

00:00:18,570 --> 00:00:25,080
the same time but you will go home today

00:00:22,410 --> 00:00:28,109
and build one for sure

00:00:25,080 --> 00:00:28,920
anyone have a device who has a device

00:00:28,109 --> 00:00:32,279
raise your hand

00:00:28,920 --> 00:00:34,680
ecco or something okay you don't need

00:00:32,279 --> 00:00:39,000
one to build a skill so don't worry I

00:00:34,680 --> 00:00:40,469
was just testing you alright I just have

00:00:39,000 --> 00:00:42,000
a couple slides just to give you a bit

00:00:40,469 --> 00:00:44,610
of a rationale as to why we're doing

00:00:42,000 --> 00:00:46,289
this and then we'll go straight into the

00:00:44,610 --> 00:00:47,760
we'll quit out of PowerPoint and I'll

00:00:46,289 --> 00:00:49,530
show you how to build one hopefully in

00:00:47,760 --> 00:00:51,230
in 20 minutes so I'll start the timer

00:00:49,530 --> 00:00:56,940
now and I'll try and stick to the time

00:00:51,230 --> 00:00:58,980
so why did we talk about voice it's been

00:00:56,940 --> 00:01:00,570
around for a long time some would say

00:00:58,980 --> 00:01:03,390
millions of years right but why do we

00:01:00,570 --> 00:01:06,000
care about about it now we've seen that

00:01:03,390 --> 00:01:07,860
every 10 years or so there's been a new

00:01:06,000 --> 00:01:10,140
way a new type of interface that's come

00:01:07,860 --> 00:01:14,250
about right so from the character mode

00:01:10,140 --> 00:01:17,130
to the GUI to web to mobile now voice

00:01:14,250 --> 00:01:18,840
but if you notice all of these types of

00:01:17,130 --> 00:01:21,000
interfaces are still here today we were

00:01:18,840 --> 00:01:22,950
just showing a screenshots of the

00:01:21,000 --> 00:01:25,020
command line you know we're still using

00:01:22,950 --> 00:01:27,000
do you is and we're not here to tell you

00:01:25,020 --> 00:01:28,560
that voice will replace everything but

00:01:27,000 --> 00:01:31,079
we really think that voice has some

00:01:28,560 --> 00:01:33,570
specific applications that make it

00:01:31,079 --> 00:01:35,430
superior to the other types of interface

00:01:33,570 --> 00:01:37,409
we're still at the beginning so there's

00:01:35,430 --> 00:01:39,180
definitely some kinks to iron out but

00:01:37,409 --> 00:01:40,909
here a couple examples so what's the

00:01:39,180 --> 00:01:44,189
modern way of adding it to do lists

00:01:40,909 --> 00:01:46,710
without voice today right it's taking

00:01:44,189 --> 00:01:48,380
out your phone unlocking your phone it's

00:01:46,710 --> 00:01:50,670
getting faster with face ID and stuff

00:01:48,380 --> 00:01:52,380
locating and opened an opening the

00:01:50,670 --> 00:01:55,049
appropriate app typing in the to-do list

00:01:52,380 --> 00:01:57,030
so these there's all these steps between

00:01:55,049 --> 00:01:59,250
wanting to do something and having that

00:01:57,030 --> 00:02:00,659
thing done whereas I could just say

00:01:59,250 --> 00:02:02,399
Alexa had booked flight to my to-do list

00:02:00,659 --> 00:02:04,710
and I didn't have to look away I didn't

00:02:02,399 --> 00:02:06,090
have to be rude and I'll tell you a

00:02:04,710 --> 00:02:07,140
little bit about how we're also making

00:02:06,090 --> 00:02:09,209
sure that you don't have to be you don't

00:02:07,140 --> 00:02:12,420
have to worry about being close to an

00:02:09,209 --> 00:02:13,860
Alexa device another example anyone have

00:02:12,420 --> 00:02:15,900
smartphone devices

00:02:13,860 --> 00:02:18,330
yeah I'm seeing some nodding faces as

00:02:15,900 --> 00:02:22,860
it's not a raising your hand too proud

00:02:18,330 --> 00:02:24,630
is it okay the the modern way is you

00:02:22,860 --> 00:02:26,580
know if you don't use voice is again

00:02:24,630 --> 00:02:28,500
using smartphone apps the problem with

00:02:26,580 --> 00:02:30,330
smart phone with smart home is that

00:02:28,500 --> 00:02:31,770
every vendor has a different app so if

00:02:30,330 --> 00:02:33,090
to find the right app I have a colleague

00:02:31,770 --> 00:02:35,190
who's a smart home fanatic and he has

00:02:33,090 --> 00:02:38,510
pages and pages of different smart home

00:02:35,190 --> 00:02:40,800
apps I think it's a little overkill but

00:02:38,510 --> 00:02:42,510
what's the old way of turning off the

00:02:40,800 --> 00:02:43,890
light right just getting up walking to

00:02:42,510 --> 00:02:45,750
the lights and turning it off so

00:02:43,890 --> 00:02:47,190
sometimes we're just using technology

00:02:45,750 --> 00:02:48,360
for technology's sake I'm not trying to

00:02:47,190 --> 00:02:50,070
hate on apps here I think they're

00:02:48,360 --> 00:02:53,940
wonderful and I use them every day in my

00:02:50,070 --> 00:02:55,410
pocket but there is still room you know

00:02:53,940 --> 00:02:57,120
when you're in your bed under the covers

00:02:55,410 --> 00:02:58,430
and you realize the bathroom light is

00:02:57,120 --> 00:03:01,290
still on you wish you could just say

00:02:58,430 --> 00:03:03,630
like turn off and you can do that with

00:03:01,290 --> 00:03:06,540
Alexa last example then we'll get into

00:03:03,630 --> 00:03:08,370
the coding Oh kado anyone here use a cot

00:03:06,540 --> 00:03:13,440
oh yeah

00:03:08,370 --> 00:03:15,480
Oh perfect so you probably used the app

00:03:13,440 --> 00:03:18,060
right but to use the app this is a

00:03:15,480 --> 00:03:19,620
screenshot of my phone you have to find

00:03:18,060 --> 00:03:21,720
the app which is in my food folder in my

00:03:19,620 --> 00:03:24,500
second screen which is always pretty

00:03:21,720 --> 00:03:28,170
messy I didn't put the loading page here

00:03:24,500 --> 00:03:30,450
type in you know tuna for example find

00:03:28,170 --> 00:03:32,400
the tuna that usually buy at it and add

00:03:30,450 --> 00:03:35,090
it to your cart they also made a skill

00:03:32,400 --> 00:03:37,410
and Amazon Alexa skill which is

00:03:35,090 --> 00:03:38,880
practically a voice app but we like to

00:03:37,410 --> 00:03:41,220
call them skills because you're teaching

00:03:38,880 --> 00:03:42,900
Alexa something new you can just say

00:03:41,220 --> 00:03:45,930
Alexa ask Okada to add tuna to my

00:03:42,900 --> 00:03:47,540
trolley and again immediate and the way

00:03:45,930 --> 00:03:49,650
that they've built the skill is to

00:03:47,540 --> 00:03:50,910
automatically infer what type of tuna

00:03:49,650 --> 00:03:52,530
you want to add because you've already

00:03:50,910 --> 00:03:56,850
added a specific brand to your trolley

00:03:52,530 --> 00:04:00,570
before so to build a skill it's quite

00:03:56,850 --> 00:04:01,560
easy if you do get into the into the

00:04:00,570 --> 00:04:04,350
documentation I think it's worth

00:04:01,560 --> 00:04:06,150
differentiating between the Alexa voice

00:04:04,350 --> 00:04:07,530
service which is how you add Alexa to

00:04:06,150 --> 00:04:08,730
physical things and this is what I was

00:04:07,530 --> 00:04:11,610
saying earlier about making sure that

00:04:08,730 --> 00:04:14,100
anyone can access Alexa and no matter

00:04:11,610 --> 00:04:16,590
what device they are using so this is a

00:04:14,100 --> 00:04:19,049
you know this is a free set of libraries

00:04:16,590 --> 00:04:21,540
that anyone can use no licensing fees

00:04:19,049 --> 00:04:23,190
that you can use - Alexa enable your

00:04:21,540 --> 00:04:25,860
things whether they be virtual things

00:04:23,190 --> 00:04:27,690
like a piece of software or whether they

00:04:25,860 --> 00:04:32,310
be physical things like you know

00:04:27,690 --> 00:04:35,490
this light or that camera some partners

00:04:32,310 --> 00:04:36,600
that are already adding Alexa but what

00:04:35,490 --> 00:04:38,220
I'm gonna talk to you about today is the

00:04:36,600 --> 00:04:38,880
other side of it so once you have Alexa

00:04:38,220 --> 00:04:41,220
everywhere

00:04:38,880 --> 00:04:43,830
what sort of experience can you access

00:04:41,220 --> 00:04:47,100
right what sort of content can you use

00:04:43,830 --> 00:04:48,300
and it comes through skills how do you

00:04:47,100 --> 00:04:52,890
build the skill we're gonna find out now

00:04:48,300 --> 00:04:54,320
so I'm gonna quit out and walk you

00:04:52,890 --> 00:04:56,400
through it

00:04:54,320 --> 00:04:58,080
the timer's gone because it was on

00:04:56,400 --> 00:05:00,630
PowerPoint so someone has to keep me

00:04:58,080 --> 00:05:02,190
honest but there's two sides to building

00:05:00,630 --> 00:05:06,000
a skill I'm gonna zoom in so everyone

00:05:02,190 --> 00:05:09,810
can see the first side to building a

00:05:06,000 --> 00:05:11,790
skill is the voice user interface and it

00:05:09,810 --> 00:05:12,990
happens on developer to amazon.com so

00:05:11,790 --> 00:05:15,450
we're going to developer to amazon.com

00:05:12,990 --> 00:05:16,950
and you you know if you've ever

00:05:15,450 --> 00:05:19,800
developed for any Amazon thing you'll

00:05:16,950 --> 00:05:20,670
you're familiar with this portal but if

00:05:19,800 --> 00:05:23,820
you've never built the skill you

00:05:20,670 --> 00:05:28,650
probably aren't so I'm gonna go to Alexa

00:05:23,820 --> 00:05:30,180
and I will go to my skills we just

00:05:28,650 --> 00:05:34,860
launched it in Italy and Spain by the

00:05:30,180 --> 00:05:37,290
way today how do we build a ignore the

00:05:34,860 --> 00:05:39,710
pork squirrel this was a suggestion from

00:05:37,290 --> 00:05:42,240
the crowd of another it's okay but

00:05:39,710 --> 00:05:44,580
rather than just doing a template which

00:05:42,240 --> 00:05:47,250
I'm sure you can find tons of online how

00:05:44,580 --> 00:05:48,419
about we build one together now anyone

00:05:47,250 --> 00:05:51,900
have an idea for a school that we can

00:05:48,419 --> 00:05:55,560
build quickly random idea doesn't have

00:05:51,900 --> 00:05:55,890
to what's the weather okay that's one

00:05:55,560 --> 00:05:57,300
idea

00:05:55,890 --> 00:06:00,180
although Alexa those that are already

00:05:57,300 --> 00:06:09,450
but we can use it as a plan-b and anyone

00:06:00,180 --> 00:06:13,230
else give me the top song okay all right

00:06:09,450 --> 00:06:15,240
I like let's do something let's do this

00:06:13,230 --> 00:06:16,470
mainly because it's gonna uncover some

00:06:15,240 --> 00:06:20,250
of the features so that's good too

00:06:16,470 --> 00:06:27,390
English UK and what should we call the

00:06:20,250 --> 00:06:32,010
skill what's the pub called sorry let's

00:06:27,390 --> 00:06:36,419
just call it the bullfrog bullfrog or

00:06:32,010 --> 00:06:38,520
the bullfrog so custom skill is

00:06:36,419 --> 00:06:39,330
basically the blank canvas we can do

00:06:38,520 --> 00:06:42,750
whatever we want

00:06:39,330 --> 00:06:45,360
flash briefing is a RSS feed of either

00:06:42,750 --> 00:06:46,740
text or audio snippets that people can

00:06:45,360 --> 00:06:49,200
add to their flash briefing list and

00:06:46,740 --> 00:06:51,450
consume every day or every week smart

00:06:49,200 --> 00:06:53,250
home is a limited subset of commands

00:06:51,450 --> 00:06:55,289
that allow you to invoke them without

00:06:53,250 --> 00:06:56,580
asking for the skill so you can say turn

00:06:55,289 --> 00:06:57,930
off the lights and Alexa will

00:06:56,580 --> 00:07:01,410
automatically invoke the skill that

00:06:57,930 --> 00:07:04,950
you've built but with custom we can have

00:07:01,410 --> 00:07:06,960
any command and video is like a custom

00:07:04,950 --> 00:07:10,080
skill with some video handlers so we're

00:07:06,960 --> 00:07:12,080
gonna just make a custom skill so we're

00:07:10,080 --> 00:07:16,680
gonna go ahead and click create skill

00:07:12,080 --> 00:07:19,620
about the bullfrog and we're gonna start

00:07:16,680 --> 00:07:21,330
from scratch and this is what the

00:07:19,620 --> 00:07:23,070
developer console looks like so we have

00:07:21,330 --> 00:07:24,870
various steps we have the build section

00:07:23,070 --> 00:07:27,240
hopefully everyone can see the build

00:07:24,870 --> 00:07:29,280
section the Test section distribution

00:07:27,240 --> 00:07:30,780
and certification analytics everything

00:07:29,280 --> 00:07:31,710
has to be done in order so the first

00:07:30,780 --> 00:07:35,220
thing that we should do is add an

00:07:31,710 --> 00:07:38,010
invocation name we could keep open the

00:07:35,220 --> 00:07:39,300
bullfrog but yeah let's just keep open

00:07:38,010 --> 00:07:41,160
the bullfrog

00:07:39,300 --> 00:07:42,330
so the bullfrog is the invocation name

00:07:41,160 --> 00:07:43,979
the invocation name doesn't have to be

00:07:42,330 --> 00:07:45,720
the same as the skill name it's just

00:07:43,979 --> 00:07:47,849
what people have to say to invoke it if

00:07:45,720 --> 00:07:49,200
you're used to building apps how you get

00:07:47,849 --> 00:07:50,700
people to use your app is to click on a

00:07:49,200 --> 00:07:52,830
button and go into the relative App

00:07:50,700 --> 00:07:54,450
Store and downloading it with skills

00:07:52,830 --> 00:07:55,860
they're never downloaded and installed

00:07:54,450 --> 00:07:59,700
they're just enabled so you can just

00:07:55,860 --> 00:08:02,610
share a sentence like Alexa open the

00:07:59,700 --> 00:08:05,789
bullfrog or Alexa ask the bullfrog when

00:08:02,610 --> 00:08:07,470
it closes and if it's not enabled on the

00:08:05,789 --> 00:08:09,900
account Alexa will automatically enable

00:08:07,470 --> 00:08:11,669
it and let you speak to with it so it's

00:08:09,900 --> 00:08:14,130
kind of like an installation with one

00:08:11,669 --> 00:08:16,500
sentence so we have some built in

00:08:14,130 --> 00:08:18,030
intents fallback cancel help stop which

00:08:16,500 --> 00:08:20,210
are pretty self-explanatory these are

00:08:18,030 --> 00:08:22,590
intents that every skill should satisfy

00:08:20,210 --> 00:08:23,940
in order to guarantee a consistent

00:08:22,590 --> 00:08:27,840
customer experience but we're gonna add

00:08:23,940 --> 00:08:31,650
our own intent which for example is get

00:08:27,840 --> 00:08:33,959
closing time right now Alexa doesn't

00:08:31,650 --> 00:08:36,080
have any sort of understanding of what

00:08:33,959 --> 00:08:39,030
get closing time is so we have to give

00:08:36,080 --> 00:08:40,289
examples of what sentences can trigger

00:08:39,030 --> 00:08:44,219
get closing time so

00:08:40,289 --> 00:08:47,279
example what time does it close what

00:08:44,219 --> 00:08:58,009
time does the pub close any other

00:08:47,279 --> 00:09:01,050
examples when is last orders etc right

00:08:58,009 --> 00:09:05,459
how long do I have to get drunk right

00:09:01,050 --> 00:09:07,350
sir we won't add that one okay and we

00:09:05,459 --> 00:09:08,970
didn't have a lot of different intents

00:09:07,350 --> 00:09:12,240
for example if we wanted to have a more

00:09:08,970 --> 00:09:15,449
complex intent that didn't just trigger

00:09:12,240 --> 00:09:18,449
a simple intention like get closing time

00:09:15,449 --> 00:09:20,279
but maybe wanted to get the price of a

00:09:18,449 --> 00:09:22,259
beer in order to get a price of a

00:09:20,279 --> 00:09:24,600
specific beer you need to have the

00:09:22,259 --> 00:09:27,380
variables passed along right because the

00:09:24,600 --> 00:09:30,449
way that Alexa works is it will parse

00:09:27,380 --> 00:09:34,139
what the user says so if I say Alexa

00:09:30,449 --> 00:09:36,089
asked the bullfrog what time it closes

00:09:34,139 --> 00:09:38,399
it will detect that we're invoking the

00:09:36,089 --> 00:09:40,560
bullfrog skill and it will pass along

00:09:38,399 --> 00:09:42,870
not the raw sentence it will pass along

00:09:40,560 --> 00:09:45,149
the intent that's being triggered right

00:09:42,870 --> 00:09:46,260
so if we only get the intent for some

00:09:45,149 --> 00:09:48,449
intents we also need additional

00:09:46,260 --> 00:09:50,670
information like variables so for

00:09:48,449 --> 00:09:53,940
example if we have like get price of

00:09:50,670 --> 00:09:55,949
beer right which is another intent that

00:09:53,940 --> 00:09:57,540
we're just making up we might want to

00:09:55,949 --> 00:10:00,839
have to specify what beer brand we have

00:09:57,540 --> 00:10:04,440
and what yeah what beer brand we have so

00:10:00,839 --> 00:10:06,120
what is the price of and we'll just make

00:10:04,440 --> 00:10:10,410
a variable called beer which we call

00:10:06,120 --> 00:10:13,649
slots what is the price of beer or how

00:10:10,410 --> 00:10:15,660
much is beer right basically like a wild

00:10:13,649 --> 00:10:17,269
card and we just have to give it a type

00:10:15,660 --> 00:10:19,829
now I don't think there's any beer

00:10:17,269 --> 00:10:22,279
built-in slot types which have been pre

00:10:19,829 --> 00:10:25,439
trained but that's fine we can just

00:10:22,279 --> 00:10:27,060
build our own type now some of these

00:10:25,439 --> 00:10:31,019
built-in types are very useful because

00:10:27,060 --> 00:10:32,670
for example time and date and numbers

00:10:31,019 --> 00:10:34,050
you don't want to have to parse those

00:10:32,670 --> 00:10:35,730
yourself right if someone says three

00:10:34,050 --> 00:10:38,639
weeks from now you want the ISO date

00:10:35,730 --> 00:10:40,740
code you can just pipe into moment is

00:10:38,639 --> 00:10:43,680
and not have to worry about it so what

00:10:40,740 --> 00:10:45,899
I'm gonna keep here is basically make

00:10:43,680 --> 00:10:47,779
our own so we can make our own slot type

00:10:45,899 --> 00:10:50,010
called beers and here we would either

00:10:47,779 --> 00:10:51,750
download a huge list of beer types or

00:10:50,010 --> 00:10:54,110
the ones that the pub has maybe I'm just

00:10:51,750 --> 00:10:56,610
making them up but like frontier

00:10:54,110 --> 00:10:58,740
any other suggestions I'm sure people

00:10:56,610 --> 00:11:02,580
have ideas for this one any other beer

00:10:58,740 --> 00:11:05,480
names no one what just look at the

00:11:02,580 --> 00:11:05,480
bottle that you have in your hand

00:11:05,600 --> 00:11:11,370
Stella is it like that yeah anyways you

00:11:10,680 --> 00:11:15,380
get the idea

00:11:11,370 --> 00:11:15,380
Corona just thinking of random ones

00:11:15,950 --> 00:11:24,110
what's another tap sorry Guiness it's a

00:11:20,790 --> 00:11:28,320
hard one lefe this one like that

00:11:24,110 --> 00:11:31,140
so you basically train the slot to

00:11:28,320 --> 00:11:32,850
recognize beers right it's not a closed

00:11:31,140 --> 00:11:34,380
list so if someone asks for something

00:11:32,850 --> 00:11:35,940
that's not in the list it'll still pick

00:11:34,380 --> 00:11:37,980
it up it'll just have more difficulty if

00:11:35,940 --> 00:11:40,980
it's a weird name to match it to an

00:11:37,980 --> 00:11:44,040
English word right maybe left if we

00:11:40,980 --> 00:11:46,800
hadn't added it to our slot type it

00:11:44,040 --> 00:11:50,190
might have converted it to left or to

00:11:46,800 --> 00:11:51,780
leave I don't know we'll see how it goes

00:11:50,190 --> 00:11:54,710
so we go back to price of beer and we

00:11:51,780 --> 00:11:57,960
assign our new beers slot type

00:11:54,710 --> 00:12:00,210
capitalized just my choice to the beer

00:11:57,960 --> 00:12:03,240
variable which is the slot we save the

00:12:00,210 --> 00:12:05,070
model and we build it now building the

00:12:03,240 --> 00:12:07,980
model kicks off the whole machine

00:12:05,070 --> 00:12:10,710
learning process so it's digesting what

00:12:07,980 --> 00:12:13,470
we've done and it's adding it to the

00:12:10,710 --> 00:12:14,850
knowledge graph so we could technically

00:12:13,470 --> 00:12:16,620
already use the skill however to use

00:12:14,850 --> 00:12:18,090
this skill we need to satisfy the back

00:12:16,620 --> 00:12:21,870
end and this is where nodejs comes in

00:12:18,090 --> 00:12:23,490
right so how do we add the back end in

00:12:21,870 --> 00:12:27,120
our queue so you have two choices as an

00:12:23,490 --> 00:12:30,180
end point you can specify a lambda how

00:12:27,120 --> 00:12:32,730
many of you use lambda okay or you can

00:12:30,180 --> 00:12:34,200
just specify your own HTTP endpoint for

00:12:32,730 --> 00:12:37,200
example if you're using another service

00:12:34,200 --> 00:12:40,200
function from other providers or you're

00:12:37,200 --> 00:12:43,230
using you know you're using your own

00:12:40,200 --> 00:12:45,450
local server you're using your own you

00:12:43,230 --> 00:12:48,240
know hardware you can just put in an

00:12:45,450 --> 00:12:49,920
HTTP endpoint and it'll just send a post

00:12:48,240 --> 00:12:52,230
request with the JSON request that I'll

00:12:49,920 --> 00:12:54,290
show you what is what it's like in just

00:12:52,230 --> 00:12:56,280
a second we're gonna go with lambda and

00:12:54,290 --> 00:12:59,580
we'll just create a quick lambda

00:12:56,280 --> 00:13:01,380
function sure let's zoom in here so I'm

00:12:59,580 --> 00:13:08,300
in AWS now I'm just gonna go to lambda

00:13:01,380 --> 00:13:08,300
and let me go to create function

00:13:10,020 --> 00:13:16,870
I'm a bit too zoomed in and you can

00:13:15,100 --> 00:13:18,880
offer it from scratch but just for the

00:13:16,870 --> 00:13:20,140
sake of keeping it under 20 minutes I'm

00:13:18,880 --> 00:13:21,910
gonna use the server list

00:13:20,140 --> 00:13:24,220
application repository so it already has

00:13:21,910 --> 00:13:26,260
the node modules that I need to simplify

00:13:24,220 --> 00:13:28,900
the JSON parsing and Jason formulation

00:13:26,260 --> 00:13:30,940
back to the Alexa service if you're in

00:13:28,900 --> 00:13:33,070
Ireland I recommend you stay in Ireland

00:13:30,940 --> 00:13:36,850
not London even though it seems obvious

00:13:33,070 --> 00:13:38,590
to be in London but if the Alexus skills

00:13:36,850 --> 00:13:40,690
get trigger for lambda is only available

00:13:38,590 --> 00:13:42,490
in Ireland in Europe so we're gonna keep

00:13:40,690 --> 00:13:43,900
stick with the Ireland region go with

00:13:42,490 --> 00:13:45,070
the Alexa server lists

00:13:43,900 --> 00:13:47,080
it'll be a service application

00:13:45,070 --> 00:13:48,700
repository and click on the facts skill

00:13:47,080 --> 00:13:52,090
template we won't be using the code but

00:13:48,700 --> 00:13:54,120
we will be using the libraries that the

00:13:52,090 --> 00:13:58,660
template comes with and we'll call this

00:13:54,120 --> 00:13:59,950
bull frog deploy essentially if you've

00:13:58,660 --> 00:14:04,810
never used the service application

00:13:59,950 --> 00:14:08,530
repository it's a interface and it's

00:14:04,810 --> 00:14:11,100
like a collection of cloud formation

00:14:08,530 --> 00:14:13,300
templates that just create a stack and

00:14:11,100 --> 00:14:14,589
in this case it's going to create a

00:14:13,300 --> 00:14:16,030
lambda function and create a role

00:14:14,589 --> 00:14:18,820
specific to that lambda function with

00:14:16,030 --> 00:14:20,740
basic permissions and assign it a lexis

00:14:18,820 --> 00:14:22,839
khillski trigger which is a trusted

00:14:20,740 --> 00:14:26,500
trigger so that the alexis service can

00:14:22,839 --> 00:14:28,120
ping your lambda and your lambda can

00:14:26,500 --> 00:14:29,740
process the request and formulate a

00:14:28,120 --> 00:14:32,140
response back because really what you

00:14:29,740 --> 00:14:33,670
should see the developer console as is

00:14:32,140 --> 00:14:35,170
the front end which I was telling you

00:14:33,670 --> 00:14:37,570
the voice interface right where you

00:14:35,170 --> 00:14:39,550
define the intense and how users can

00:14:37,570 --> 00:14:41,740
interact with your skill but the back

00:14:39,550 --> 00:14:44,170
end which doesn't have to be AWS but in

00:14:41,740 --> 00:14:46,450
this case it is is what you actually say

00:14:44,170 --> 00:14:47,890
back to the user now it's done it's

00:14:46,450 --> 00:14:50,230
created it so we can go to our lambda

00:14:47,890 --> 00:14:52,870
function and I'll just walk you through

00:14:50,230 --> 00:14:55,690
the template code even though we won't

00:14:52,870 --> 00:14:58,060
be using it it's pretty self-explanatory

00:14:55,690 --> 00:15:01,540
if you're familiar with with JavaScript

00:14:58,060 --> 00:15:04,830
and no no js' basically what we're doing

00:15:01,540 --> 00:15:08,410
is we have a handler for one or more

00:15:04,830 --> 00:15:11,200
intense so for example in the fact skill

00:15:08,410 --> 00:15:13,150
template there's a handler for both the

00:15:11,200 --> 00:15:15,880
launch request when I say open the fax

00:15:13,150 --> 00:15:17,920
kill write or the intent to get new fact

00:15:15,880 --> 00:15:20,710
we won't be using this intent we'll be

00:15:17,920 --> 00:15:22,720
using the get beer buy price or whatever

00:15:20,710 --> 00:15:24,370
and you see that each handler has two

00:15:22,720 --> 00:15:27,220
methods can handle which checks whether

00:15:24,370 --> 00:15:29,770
this is the right handler for the

00:15:27,220 --> 00:15:32,860
incoming request and if it is if it

00:15:29,770 --> 00:15:35,290
returns true then we will use the handle

00:15:32,860 --> 00:15:36,820
method of this handler so you write as

00:15:35,290 --> 00:15:38,140
many handlers as you want and it can

00:15:36,820 --> 00:15:40,480
become pretty complex with state

00:15:38,140 --> 00:15:41,830
management based on you know what intent

00:15:40,480 --> 00:15:46,570
is being triggered and what's happening

00:15:41,830 --> 00:15:49,390
in your application of State and then

00:15:46,570 --> 00:15:50,920
you just write the actual business logic

00:15:49,390 --> 00:15:53,649
in the handler or call the business

00:15:50,920 --> 00:15:55,180
logic from the handle method and really

00:15:53,649 --> 00:15:57,220
all we're doing is we're creating a

00:15:55,180 --> 00:15:59,380
response builder object that speaks out

00:15:57,220 --> 00:16:01,839
something and it can be text or audio

00:15:59,380 --> 00:16:03,550
and it can send back other things like a

00:16:01,839 --> 00:16:06,040
multi-modal template if you're using the

00:16:03,550 --> 00:16:08,410
echo show or the echo spot or a card to

00:16:06,040 --> 00:16:09,790
the Alexa app for example here there's

00:16:08,410 --> 00:16:12,130
the help handler which is even simpler

00:16:09,790 --> 00:16:13,899
right it'll be used to handle the

00:16:12,130 --> 00:16:16,000
request if the request type is an intent

00:16:13,899 --> 00:16:18,130
request and the intent name is Amazon to

00:16:16,000 --> 00:16:20,529
help intent which by the way is exactly

00:16:18,130 --> 00:16:22,899
the same as the built-in intent here

00:16:20,529 --> 00:16:24,910
right Amazon don't help intent so every

00:16:22,899 --> 00:16:26,440
intent will have a handler but you can

00:16:24,910 --> 00:16:28,750
also group different intents to one

00:16:26,440 --> 00:16:30,370
handler like we did in the get new fact

00:16:28,750 --> 00:16:32,410
handler that supports the launch request

00:16:30,370 --> 00:16:34,930
and the getting fact intent but I will

00:16:32,410 --> 00:16:37,870
just delete everything and I will use a

00:16:34,930 --> 00:16:40,600
little tool that my team has created

00:16:37,870 --> 00:16:42,450
which is the code generator and the code

00:16:40,600 --> 00:16:45,520
generator I'll share the link later and

00:16:42,450 --> 00:16:48,040
basically just takes in the JSON

00:16:45,520 --> 00:16:50,290
representation of what we've done in the

00:16:48,040 --> 00:16:52,900
front-end right so you go to the jason

00:16:50,290 --> 00:16:55,810
editor and you copy this jason and you

00:16:52,900 --> 00:16:58,750
paste it in and based on that jason it

00:16:55,810 --> 00:17:00,790
just scaffolds your code with your

00:16:58,750 --> 00:17:02,860
intents and a bunch of other helper

00:17:00,790 --> 00:17:04,150
functions which might get confusing for

00:17:02,860 --> 00:17:05,800
just starting out so if you are starting

00:17:04,150 --> 00:17:07,990
out maybe i suggest you follow a normal

00:17:05,800 --> 00:17:11,010
template I will link to them at the end

00:17:07,990 --> 00:17:13,839
but let's just copy and paste here and

00:17:11,010 --> 00:17:15,339
go to our intents so you see that

00:17:13,839 --> 00:17:16,870
there's the cancel intent which is a

00:17:15,339 --> 00:17:19,209
built-in intent there's the fallback

00:17:16,870 --> 00:17:22,089
intent which is a built-in intent but

00:17:19,209 --> 00:17:25,329
there's also our custom ones like get

00:17:22,089 --> 00:17:26,679
closing time right in this case the the

00:17:25,329 --> 00:17:29,020
boilerplate will say hello from get

00:17:26,679 --> 00:17:31,090
closing time and the get price of beer

00:17:29,020 --> 00:17:33,490
and you'll see that it has also parsed

00:17:31,090 --> 00:17:34,480
the incoming slots and created a slot

00:17:33,490 --> 00:17:36,760
values object

00:17:34,480 --> 00:17:39,130
if her ties or resolve in case you use

00:17:36,760 --> 00:17:40,750
synonyms but I am getting a little bit

00:17:39,130 --> 00:17:42,610
ahead of myself so let's zoom out of

00:17:40,750 --> 00:17:46,630
this and show you how to connect the

00:17:42,610 --> 00:17:49,330
lambda and the skill so every lambda has

00:17:46,630 --> 00:17:52,210
a a RN which is a replacement in our

00:17:49,330 --> 00:17:53,620
case for the HTTP address so the a RN is

00:17:52,210 --> 00:17:55,360
Amazon resource name it's the unique

00:17:53,620 --> 00:17:58,150
identifier for every resource in Amazon

00:17:55,360 --> 00:18:00,730
and in Amazon Web web services and what

00:17:58,150 --> 00:18:03,240
we're going to do is copy this and paste

00:18:00,730 --> 00:18:07,030
it as the end point of our skill and

00:18:03,240 --> 00:18:10,179
just by doing that we are ready to test

00:18:07,030 --> 00:18:11,290
it so it's saved we can go to test we

00:18:10,179 --> 00:18:16,059
already built the model so it's already

00:18:11,290 --> 00:18:18,100
in the knowledge graph and we can say if

00:18:16,059 --> 00:18:20,710
the demo gods will be named we enable

00:18:18,100 --> 00:18:24,309
testing and if the demo gods are willing

00:18:20,710 --> 00:18:31,450
we do open the bullfrog and what's gonna

00:18:24,309 --> 00:18:33,429
happen it will trigger if the audio is

00:18:31,450 --> 00:18:37,000
not pretty good not very good from the

00:18:33,429 --> 00:18:39,640
HDMI but let's try just can you all hear

00:18:37,000 --> 00:18:42,370
this better hello and welcome to the

00:18:39,640 --> 00:18:46,960
bullfrog they help to hear some options

00:18:42,370 --> 00:18:51,160
okay so this is just a placeholder

00:18:46,960 --> 00:18:53,440
response that the the the the code

00:18:51,160 --> 00:18:55,150
generator has created now let's modify

00:18:53,440 --> 00:18:56,470
it but first I wanted to show you what

00:18:55,150 --> 00:18:58,360
the incoming request looks like because

00:18:56,470 --> 00:18:59,910
all Alexa skill development is is

00:18:58,360 --> 00:19:05,559
parsing a JSON request in and

00:18:59,910 --> 00:19:07,630
formulating a JSON response out so here

00:19:05,559 --> 00:19:11,620
you have a session which can have type

00:19:07,630 --> 00:19:12,970
true and then you have for example when

00:19:11,620 --> 00:19:15,220
we say open we trigger the launch

00:19:12,970 --> 00:19:18,010
request and this is why this is why

00:19:15,220 --> 00:19:20,380
since the request doctype is launched

00:19:18,010 --> 00:19:22,450
request when we go back to our function

00:19:20,380 --> 00:19:24,549
and we check the code you'll see that we

00:19:22,450 --> 00:19:27,520
have a handler that only returns true if

00:19:24,549 --> 00:19:30,460
the request dot type is launched request

00:19:27,520 --> 00:19:33,750
let's go here I think it is no let's

00:19:30,460 --> 00:19:33,750
launch request

00:19:35,370 --> 00:19:39,330
and I'll also show you how you don't

00:19:37,420 --> 00:19:41,440
have to code in the browser either so

00:19:39,330 --> 00:19:43,360
you see here the launch request handler

00:19:41,440 --> 00:19:46,000
will be used if the request duck type is

00:19:43,360 --> 00:19:47,740
launched request in this case it will

00:19:46,000 --> 00:19:50,260
say hello and welcome to the bullfrog

00:19:47,740 --> 00:19:51,310
say help to hear some options what

00:19:50,260 --> 00:19:55,080
should we say back to the user when they

00:19:51,310 --> 00:20:04,510
say help when they say open the bullfrog

00:19:55,080 --> 00:20:08,140
welcome to the bullfrog we are we can't

00:20:04,510 --> 00:20:10,440
we are anxious to host you after the

00:20:08,140 --> 00:20:10,440
Meetup

00:20:11,310 --> 00:20:19,540
and here you would also maybe add a

00:20:16,320 --> 00:20:23,200
maybe some explanation right like what

00:20:19,540 --> 00:20:29,410
can your skill do you can ask us for

00:20:23,200 --> 00:20:31,390
beer prices or closing times what shall

00:20:29,410 --> 00:20:32,680
it be and the cool thing about

00:20:31,390 --> 00:20:35,530
developing skills

00:20:32,680 --> 00:20:39,970
well I press save now and I stop the

00:20:35,530 --> 00:20:44,050
context and now I can just do open the

00:20:39,970 --> 00:20:45,910
bullfrog welcome to the bullfrog we are

00:20:44,050 --> 00:20:48,850
anxious to host you after the mess up

00:20:45,910 --> 00:20:51,970
you can ask us for bit prizes or closing

00:20:48,850 --> 00:20:54,370
times what shall it be you see there was

00:20:51,970 --> 00:20:56,110
no deployment no installation no copying

00:20:54,370 --> 00:20:58,000
and pasting stuff and if I had a real

00:20:56,110 --> 00:21:00,760
device here registered to my developer

00:20:58,000 --> 00:21:02,800
account which which can be my Amazon

00:21:00,760 --> 00:21:04,330
account so if your developer account on

00:21:02,800 --> 00:21:06,010
developer at amazon.com is the same

00:21:04,330 --> 00:21:07,660
email as your Amazon account where you

00:21:06,010 --> 00:21:09,910
have your physical devices registered to

00:21:07,660 --> 00:21:11,560
then the skill will automatically work

00:21:09,910 --> 00:21:12,970
there as well so you can just say open

00:21:11,560 --> 00:21:16,090
the bullfrog with your voice and it'll

00:21:12,970 --> 00:21:17,800
work but then for to have other people

00:21:16,090 --> 00:21:19,390
use it on other accounts you will need

00:21:17,800 --> 00:21:22,090
to go through the distribution which is

00:21:19,390 --> 00:21:23,260
free the analytics which is free and the

00:21:22,090 --> 00:21:25,810
certification which is free as well

00:21:23,260 --> 00:21:27,700
there so there's no cost associated with

00:21:25,810 --> 00:21:30,970
building it and the last thing I want to

00:21:27,700 --> 00:21:33,130
show you is you know triggering a

00:21:30,970 --> 00:21:36,760
specific intent so if we go back to not

00:21:33,130 --> 00:21:37,990
the launch request but to the let's do

00:21:36,760 --> 00:21:41,290
them in order let's go to the gate

00:21:37,990 --> 00:21:43,300
closing time right which is here let's

00:21:41,290 --> 00:21:47,260
just respond back with what time does

00:21:43,300 --> 00:21:48,230
the pub closed anyone know today we

00:21:47,260 --> 00:21:58,669
closed sorry

00:21:48,230 --> 00:22:04,250
I'll say ok close at sorry right and now

00:21:58,669 --> 00:22:08,990
we can say what time do you or what time

00:22:04,250 --> 00:22:11,240
does it close today we close at 11 p.m.

00:22:08,990 --> 00:22:13,070
sorry

00:22:11,240 --> 00:22:14,360
and obviously here you wouldn't

00:22:13,070 --> 00:22:16,070
hard-code the string you would maybe

00:22:14,360 --> 00:22:17,779
query a table that you have with the

00:22:16,070 --> 00:22:19,460
closing times you could do whatever you

00:22:17,779 --> 00:22:22,460
want but now we get into the realm of

00:22:19,460 --> 00:22:24,230
normal no js' development not Alexis

00:22:22,460 --> 00:22:27,320
specific development and the last thing

00:22:24,230 --> 00:22:29,299
is to look at sloths so here we have you

00:22:27,320 --> 00:22:31,909
know I'll show you what what the request

00:22:29,299 --> 00:22:34,100
looks like when we use slots instead of

00:22:31,909 --> 00:22:37,519
just saying hello from get price of beer

00:22:34,100 --> 00:22:39,350
let's say something a bit more let's

00:22:37,519 --> 00:22:42,799
parse the incoming slot and this is just

00:22:39,350 --> 00:22:46,850
some helper functions to formulate a

00:22:42,799 --> 00:22:48,440
boilerplate response let's go here sorry

00:22:46,850 --> 00:22:50,029
I'm jumping and but again we're in the

00:22:48,440 --> 00:22:52,580
get price with beer handle there's one

00:22:50,029 --> 00:22:58,039
handler for each type of intent and here

00:22:52,580 --> 00:23:00,380
we say so the get slot values function

00:22:58,039 --> 00:23:04,450
returns a hurt as and resolved for each

00:23:00,380 --> 00:23:09,440
slot so we can do the if or it can do if

00:23:04,450 --> 00:23:16,360
slot values and slot values dot what do

00:23:09,440 --> 00:23:16,360
we call it beer then we can do

00:23:19,730 --> 00:23:34,799
say is equal to the price that's already

00:23:29,220 --> 00:23:43,549
there the price of slot values beer dot

00:23:34,799 --> 00:23:48,630
heard as is I will make it up to pounds

00:23:43,549 --> 00:23:54,000
hey I'm being optimistic and else we'll

00:23:48,630 --> 00:23:58,110
just say say equals I didn't quite catch

00:23:54,000 --> 00:23:58,740
that your name that beer what is it

00:23:58,110 --> 00:24:01,710
again

00:23:58,740 --> 00:24:08,539
and then we'll just respond back with

00:24:01,710 --> 00:24:14,340
say let's try that so here we'll say

00:24:08,539 --> 00:24:17,399
what is the price of frontier the price

00:24:14,340 --> 00:24:21,390
of frontier is two points and you see

00:24:17,399 --> 00:24:24,870
here how the request has an intent with

00:24:21,390 --> 00:24:27,120
name get price of beer and therefore we

00:24:24,870 --> 00:24:28,710
are using this handler because the

00:24:27,120 --> 00:24:30,600
request is of type intent request and

00:24:28,710 --> 00:24:32,340
the request intent of name is get price

00:24:30,600 --> 00:24:33,809
of beer so there's a match therefore it

00:24:32,340 --> 00:24:38,970
will return true and this handler will

00:24:33,809 --> 00:24:41,130
be used and since the slot values object

00:24:38,970 --> 00:24:42,659
is defined it will go into here as you

00:24:41,130 --> 00:24:44,700
know this is just JavaScript and it will

00:24:42,659 --> 00:24:46,649
say this here again you would probably

00:24:44,700 --> 00:24:48,450
query a table or something but the cool

00:24:46,649 --> 00:24:49,950
thing is that you have this this object

00:24:48,450 --> 00:24:51,779
here this is exactly what your lambda

00:24:49,950 --> 00:24:53,850
function receives then the SDK does some

00:24:51,779 --> 00:24:55,620
tumbling it for you so you don't have to

00:24:53,850 --> 00:24:57,120
worry about parsing it manually but you

00:24:55,620 --> 00:24:59,520
see here everything is here you see you

00:24:57,120 --> 00:25:01,049
have the slots which of there's one

00:24:59,520 --> 00:25:04,020
called beer because we only have one

00:25:01,049 --> 00:25:07,710
slot in this intent with name beer and

00:25:04,020 --> 00:25:12,510
value frontier if we say what is the

00:25:07,710 --> 00:25:15,779
price of laugh at the price of life is

00:25:12,510 --> 00:25:19,309
two points but also if we say what is

00:25:15,779 --> 00:25:19,309
the price of Manas

00:25:19,880 --> 00:25:24,360
we didn't add bananas the slot type but

00:25:22,830 --> 00:25:26,460
it's still picking it up and passing it

00:25:24,360 --> 00:25:28,500
to us because it realized that that word

00:25:26,460 --> 00:25:30,330
was the thing that we were asking the

00:25:28,500 --> 00:25:33,419
price for which is which is in the wild

00:25:30,330 --> 00:25:35,969
card so of course the next steps would

00:25:33,419 --> 00:25:39,589
to remove these random strings and

00:25:35,969 --> 00:25:44,279
actually put some hard-coded values and

00:25:39,589 --> 00:25:45,839
you don't need to you know you don't

00:25:44,279 --> 00:25:48,059
need me to teach you how to do that this

00:25:45,839 --> 00:25:51,089
is just regular JavaScript you know just

00:25:48,059 --> 00:25:53,399
to make a HTTP call or query your

00:25:51,089 --> 00:25:56,820
dynamodb table or any other database

00:25:53,399 --> 00:25:58,950
that you may have what I did want to

00:25:56,820 --> 00:26:05,099
share with you though is things that you

00:25:58,950 --> 00:26:07,079
can do to get started so I'm actually

00:26:05,099 --> 00:26:12,269
gonna paste them here so you can take

00:26:07,079 --> 00:26:17,309
pictures so the first thing is you can

00:26:12,269 --> 00:26:21,869
start at alexa design slash node sdk so

00:26:17,309 --> 00:26:23,700
this is the github repo for the sdk that

00:26:21,869 --> 00:26:26,070
we're using with lambda and it has a ton

00:26:23,700 --> 00:26:28,109
of sample templates from hello world all

00:26:26,070 --> 00:26:30,089
the way to complex interactions so you

00:26:28,109 --> 00:26:31,619
can kind of pick and make pick some pick

00:26:30,089 --> 00:26:34,589
and match with what type of skill you're

00:26:31,619 --> 00:26:37,049
trying to build and the other thing that

00:26:34,589 --> 00:26:39,779
i would recommend checking out is voice

00:26:37,049 --> 00:26:43,739
design best practices so alexa design

00:26:39,779 --> 00:26:45,899
slash guide and this is just a working

00:26:43,739 --> 00:26:48,299
document where you can check how to

00:26:45,899 --> 00:26:52,289
build good skills not just skills that

00:26:48,299 --> 00:26:54,329
work and then if you didn't need incent

00:26:52,289 --> 00:26:55,739
if you didn't need any other incentives

00:26:54,329 --> 00:26:57,629
right because this talk was so

00:26:55,739 --> 00:26:59,429
interesting and you're just gonna go

00:26:57,629 --> 00:27:02,039
home skip the next talk and just start

00:26:59,429 --> 00:27:05,039
building skills just just kidding then

00:27:02,039 --> 00:27:09,029
what you should keep in mind is that if

00:27:05,039 --> 00:27:12,509
you build skills by the 15th of december

00:27:09,029 --> 00:27:14,279
if you build three of them and you sign

00:27:12,509 --> 00:27:18,059
up for the developer promo we'll send

00:27:14,279 --> 00:27:19,679
you an echo spot if you also publish a

00:27:18,059 --> 00:27:22,259
fourth one that has multi display

00:27:19,679 --> 00:27:25,019
functionality will give you an echo show

00:27:22,259 --> 00:27:27,450
and if your skill which is the most

00:27:25,019 --> 00:27:31,229
important thing is one of the most top

00:27:27,450 --> 00:27:33,329
25 most used skills that period then you

00:27:31,229 --> 00:27:37,529
will also get a collectible figurine the

00:27:33,329 --> 00:27:40,559
Alexa super skills figure zero resale

00:27:37,529 --> 00:27:42,269
value but infinite bragging rights and

00:27:40,559 --> 00:27:45,569
much you know much more valuable than

00:27:42,269 --> 00:27:47,610
devices that anyone can buy so if you do

00:27:45,569 --> 00:27:50,010
have any questions

00:27:47,610 --> 00:27:52,410
feel free to reach out hopefully I was

00:27:50,010 --> 00:27:53,610
in time and happy to answer questions if

00:27:52,410 --> 00:27:55,080
there's gonna be a break sooner or later

00:27:53,610 --> 00:28:00,420
so thank you very much

00:27:55,080 --> 00:28:00,420

YouTube URL: https://www.youtube.com/watch?v=BB3wwxgqPOU


