Title: 100 Players: Using Realtime API's for a Game- Lightning Talk - London Node Usergroup - November 2019
Publication date: 2019-12-21
Playlist: London Node User Group
Description: 
	Adamatz uses Pushers real-time API empowering functions to create a game amongst other tools including Fastify & Svelte.

_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,089 --> 00:00:03,540
this is the first talk I've ever given a

00:00:01,770 --> 00:00:06,330
dialogue so a little bit nervous but I'm

00:00:03,540 --> 00:00:08,880
mostly excited because this is also an

00:00:06,330 --> 00:00:10,590
idea I've had for many years that at

00:00:08,880 --> 00:00:13,530
last gonna get the chance with your help

00:00:10,590 --> 00:00:15,839
to try and get working so this all

00:00:13,530 --> 00:00:19,020
started okay first of all I'm Adam admin

00:00:15,839 --> 00:00:21,270
known as ad meters you can find me

00:00:19,020 --> 00:00:22,859
anywhere on the web as ad metas I work

00:00:21,270 --> 00:00:24,630
at a company called near form near form

00:00:22,859 --> 00:00:26,039
bought the pizza a new form for you put

00:00:24,630 --> 00:00:30,000
the beer so a big round ball spinner

00:00:26,039 --> 00:00:32,009
form yeah so yeah this the this this

00:00:30,000 --> 00:00:35,100
idea came came around many years ago

00:00:32,009 --> 00:00:36,719
when I was working on a museum

00:00:35,100 --> 00:00:40,739
exhibition and I was reading up a lot

00:00:36,719 --> 00:00:42,540
about play and the emergence of play and

00:00:40,739 --> 00:00:44,730
the experience of it and the

00:00:42,540 --> 00:00:46,829
togetherness of people in the same room

00:00:44,730 --> 00:00:48,780
connecting and always thought it would

00:00:46,829 --> 00:00:51,000
be a really good idea to try and bring

00:00:48,780 --> 00:00:53,430
this together in a web environment or

00:00:51,000 --> 00:00:55,610
using the technologies that are used

00:00:53,430 --> 00:00:59,510
every day instead of you know developing

00:00:55,610 --> 00:01:02,609
interfaces for corporate clients and

00:00:59,510 --> 00:01:05,640
what really triggered this was I was I

00:01:02,609 --> 00:01:08,100
was saying thanks to all our sponsors a

00:01:05,640 --> 00:01:10,200
couple of months ago to near form and

00:01:08,100 --> 00:01:11,610
Conde Nast for the hosting and that's

00:01:10,200 --> 00:01:15,509
all very easy you know beer and pizza

00:01:11,610 --> 00:01:18,540
and venue then pusher who provide us

00:01:15,509 --> 00:01:20,700
with video every month but push our

00:01:18,540 --> 00:01:24,750
another video production company pusher

00:01:20,700 --> 00:01:25,979
our platform and the conversation sort

00:01:24,750 --> 00:01:27,600
of rolled from there because I said

00:01:25,979 --> 00:01:29,670
something like I yeah you should all try

00:01:27,600 --> 00:01:31,979
pusher like bit like you did earlier

00:01:29,670 --> 00:01:32,549
it's great for developers wonderful

00:01:31,979 --> 00:01:36,420
wonderful

00:01:32,549 --> 00:01:37,829
kind of trumpian sort of thing and so

00:01:36,420 --> 00:01:40,079
the conversation progressed from there

00:01:37,829 --> 00:01:41,790
with the video guy who's on that night

00:01:40,079 --> 00:01:43,500
which is Alex and we decided we need to

00:01:41,790 --> 00:01:44,970
actually show what pusher can do and I

00:01:43,500 --> 00:01:47,970
need to actually read some of the

00:01:44,970 --> 00:01:50,549
documentation so that's what that's the

00:01:47,970 --> 00:01:57,000
origin story of this little lightning

00:01:50,549 --> 00:01:59,159
talk why is that slide there right this

00:01:57,000 --> 00:02:01,560
is talking about playing together and

00:01:59,159 --> 00:02:06,000
being part but not just being spectators

00:02:01,560 --> 00:02:09,629
alright and of course we got to start

00:02:06,000 --> 00:02:11,550
somewhere and this game was invented or

00:02:09,629 --> 00:02:13,680
released slightly before I was born

00:02:11,550 --> 00:02:15,420
which was a long time ago

00:02:13,680 --> 00:02:17,519
and what I'm going to try and do tonight

00:02:15,420 --> 00:02:20,400
just show you how we can take something

00:02:17,519 --> 00:02:21,989
like a concept of pong and take it one

00:02:20,400 --> 00:02:25,019
step further or maybe a hundred steps

00:02:21,989 --> 00:02:26,430
further and my initial idea for the for

00:02:25,019 --> 00:02:29,310
this was I read an article where someone

00:02:26,430 --> 00:02:31,950
had done this in an auditorium level and

00:02:29,310 --> 00:02:34,200
created a multiplayer pong and the

00:02:31,950 --> 00:02:36,329
excitement that was tangible within the

00:02:34,200 --> 00:02:38,219
audience that I'm the hoping that to

00:02:36,329 --> 00:02:41,340
reignite some of that excitement here

00:02:38,219 --> 00:02:43,349
tonight to the point which you maybe we

00:02:41,340 --> 00:02:48,599
can be like Skunk Anansie and do some

00:02:43,349 --> 00:02:50,280
really exciting things right it all

00:02:48,599 --> 00:02:52,889
starts with powering real-time

00:02:50,280 --> 00:02:56,189
experiences and you're in your all your

00:02:52,889 --> 00:02:57,780
apps I mean I like pusher and I have got

00:02:56,189 --> 00:02:59,819
to know the technology but really it's

00:02:57,780 --> 00:03:01,379
difficult to get excited about language

00:02:59,819 --> 00:03:04,049
like this right you guys should go to

00:03:01,379 --> 00:03:05,939
build it hosted API is our flexible

00:03:04,049 --> 00:03:07,609
scalable and easy to integrate right

00:03:05,939 --> 00:03:10,169
we're going to do something about that

00:03:07,609 --> 00:03:12,269
so I've chosen a few technologies to

00:03:10,169 --> 00:03:14,819
support this I'm using a framework

00:03:12,269 --> 00:03:17,579
called FASTA file which is a node.js

00:03:14,819 --> 00:03:19,829
framework which helps will chose help

00:03:17,579 --> 00:03:21,269
with the web side of things and I'm

00:03:19,829 --> 00:03:25,530
using salt does anyone else here use

00:03:21,269 --> 00:03:28,019
felt alright sauce is sort of a reactive

00:03:25,530 --> 00:03:30,449
programming for the for the for the UI

00:03:28,019 --> 00:03:32,340
what react would be doing but with a

00:03:30,449 --> 00:03:34,439
slightly different different approach

00:03:32,340 --> 00:03:35,879
and I'll go into some of what I've done

00:03:34,439 --> 00:03:37,680
with salt but mostly I want to

00:03:35,879 --> 00:03:40,979
concentrate on the on the on the stuff

00:03:37,680 --> 00:03:44,609
that we've that pushes offering us as a

00:03:40,979 --> 00:03:46,109
platform to do let's see did I get a

00:03:44,609 --> 00:03:47,909
slide for that oh this is where we mix

00:03:46,109 --> 00:03:52,109
pong and Skunk Anansie

00:03:47,909 --> 00:03:54,479
all right okay so just just just one it

00:03:52,109 --> 00:03:57,750
oh man I'm not least keynotes you gotta

00:03:54,479 --> 00:04:00,180
forgive me escape so I just had the

00:03:57,750 --> 00:04:02,189
pusher website up here quickly just to

00:04:00,180 --> 00:04:06,269
have a quick look at what they actually

00:04:02,189 --> 00:04:07,470
offer taking on products it got

00:04:06,269 --> 00:04:08,489
something called cat kit they've got

00:04:07,470 --> 00:04:09,930
something called channels they've got

00:04:08,489 --> 00:04:11,939
something called beans and if you don't

00:04:09,930 --> 00:04:13,409
dive much further into it it's not

00:04:11,939 --> 00:04:16,370
really very meaningful as I was saying I

00:04:13,409 --> 00:04:19,049
think I find the language a little bit

00:04:16,370 --> 00:04:21,419
buzzword I suppose so

00:04:19,049 --> 00:04:23,909
but there is a good section in the

00:04:21,419 --> 00:04:25,680
pusher website around tutorials document

00:04:23,909 --> 00:04:27,120
the documentation is pretty good the

00:04:25,680 --> 00:04:28,980
tutorials

00:04:27,120 --> 00:04:31,650
are a good place to start because they

00:04:28,980 --> 00:04:33,780
give you some really easy ways into

00:04:31,650 --> 00:04:35,250
using nodejs with a particular product

00:04:33,780 --> 00:04:38,070
that they have for instance and then you

00:04:35,250 --> 00:04:39,060
can follow up follow the tutorial I've

00:04:38,070 --> 00:04:41,699
looked at these and I thought well maybe

00:04:39,060 --> 00:04:43,620
I'll replay one of these tutorials but

00:04:41,699 --> 00:04:46,889
I've decided to actually make something

00:04:43,620 --> 00:04:51,120
myself so what are channels channels are

00:04:46,889 --> 00:04:54,090
really a way for us to manage WebSockets

00:04:51,120 --> 00:04:58,220
easily or if it takes a bit of a lot of

00:04:54,090 --> 00:05:02,580
the pain out of having WebSocket

00:04:58,220 --> 00:05:05,460
connections with your app and it

00:05:02,580 --> 00:05:08,370
provides this pub/sub messaging service

00:05:05,460 --> 00:05:11,580
it provides us a way to track users in

00:05:08,370 --> 00:05:13,229
the in in in that you can have you can

00:05:11,580 --> 00:05:15,720
have the what they call presence

00:05:13,229 --> 00:05:19,200
channels so you know which users have

00:05:15,720 --> 00:05:20,580
logged into a channel and there's a

00:05:19,200 --> 00:05:21,930
privacy and security layer which I've

00:05:20,580 --> 00:05:24,930
disabled because it's those things down

00:05:21,930 --> 00:05:26,820
for what I'm trying to do but all of

00:05:24,930 --> 00:05:29,669
this would be quite painful to do

00:05:26,820 --> 00:05:31,910
yourself where push it help us out by

00:05:29,669 --> 00:05:34,080
providing this as a platform

00:05:31,910 --> 00:05:35,280
what are those sort of interesting okay

00:05:34,080 --> 00:05:37,350
we're going to come back they've also

00:05:35,280 --> 00:05:39,270
provide a lot of statistics and help us

00:05:37,350 --> 00:05:41,039
to help us understand how our apps

00:05:39,270 --> 00:05:43,760
working and we're going to try and get

00:05:41,039 --> 00:05:45,479
this going in real time first by

00:05:43,760 --> 00:05:46,919
recommend if you're looking for a web

00:05:45,479 --> 00:05:48,870
framework faster file is really really

00:05:46,919 --> 00:05:51,060
good it takes all the good parts and

00:05:48,870 --> 00:05:53,130
from half things like happy and Express

00:05:51,060 --> 00:05:56,280
and makes them better and faster it's a

00:05:53,130 --> 00:05:58,020
great API as well as I've mentioned now

00:05:56,280 --> 00:06:00,510
the game they were that I've that I've

00:05:58,020 --> 00:06:02,880
created it was created mostly installed

00:06:00,510 --> 00:06:06,150
because it's mostly client-side and will

00:06:02,880 --> 00:06:09,720
step you through how that has feeds into

00:06:06,150 --> 00:06:11,130
the pusher API as well and all of this

00:06:09,720 --> 00:06:19,099
is available which I'll share with you

00:06:11,130 --> 00:06:25,139
later on my github so back to ok yeah

00:06:19,099 --> 00:06:29,820
the screen that says let's play have it

00:06:25,139 --> 00:06:31,950
hidden over here so for starters if you

00:06:29,820 --> 00:06:36,539
have a device and you can see that QR

00:06:31,950 --> 00:06:38,159
code please try and log into it I'm

00:06:36,539 --> 00:06:39,980
gonna log into it in the meantime here

00:06:38,159 --> 00:06:43,360
this is this is

00:06:39,980 --> 00:06:46,570
you should see if you don't have a

00:06:43,360 --> 00:06:50,870
device that can read a QR code there is

00:06:46,570 --> 00:06:53,450
IP address one seven eight six two five

00:06:50,870 --> 00:06:55,310
one six one how many people dislike show

00:06:53,450 --> 00:06:57,260
of hands are managing to login okay so

00:06:55,310 --> 00:07:01,040
you've got you've got a few players all

00:06:57,260 --> 00:07:03,200
right I'm behind so you need to put in

00:07:01,040 --> 00:07:05,960
your initials to start off with and then

00:07:03,200 --> 00:07:07,990
let's go and play all right I think the

00:07:05,960 --> 00:07:10,250
point of the game is pretty obvious

00:07:07,990 --> 00:07:12,080
you've got to get the little yellow ball

00:07:10,250 --> 00:07:16,030
into one of the goals the Blues on the

00:07:12,080 --> 00:07:16,030
right this is great

00:07:22,360 --> 00:07:29,660
okay there's no referee it's free for

00:07:27,580 --> 00:07:32,150
how many players have we got okay so

00:07:29,660 --> 00:07:33,650
while you're doing that I'm gonna win to

00:07:32,150 --> 00:07:40,670
switch to the stats and see what it says

00:07:33,650 --> 00:07:43,730
what it's telling us oh do you know your

00:07:40,670 --> 00:07:46,180
Konami code alright try your Konami and

00:07:43,730 --> 00:07:46,180
see what happens

00:07:46,550 --> 00:07:58,850
it shouldn't happen up up down down left

00:07:52,540 --> 00:08:01,180
right left right BA won't everything

00:07:58,850 --> 00:08:01,180
stopped

00:08:01,420 --> 00:08:04,509
[Music]

00:08:04,860 --> 00:08:09,100
all right so we had a peak of stats

00:08:07,300 --> 00:08:15,460
they're going we've had you know what we

00:08:09,100 --> 00:08:18,370
might have hit our limit all right so we

00:08:15,460 --> 00:08:28,990
picked we've hit pushes free limit which

00:08:18,370 --> 00:08:31,990
was 200,000 so so we basically you get

00:08:28,990 --> 00:08:34,330
200,000 messages a day and as you can

00:08:31,990 --> 00:08:38,610
see playing a game where each move takes

00:08:34,330 --> 00:08:38,610
a message uses that up pretty quickly

00:08:39,030 --> 00:08:45,550
okay I had no idea tested it with about

00:08:41,830 --> 00:08:49,500
5 5 devices at home understand that so

00:08:45,550 --> 00:08:51,790
this is the pusher interface you can

00:08:49,500 --> 00:08:53,740
there's a debug console you can start

00:08:51,790 --> 00:08:55,090
sending messages I can't show you the

00:08:53,740 --> 00:08:58,510
one of the coolest features that I have

00:08:55,090 --> 00:09:00,730
as well also this little black bar but

00:08:58,510 --> 00:09:03,180
along the top here I'll just give a

00:09:00,730 --> 00:09:06,640
quick explanation of what's happening so

00:09:03,180 --> 00:09:09,760
when when you log in you created a

00:09:06,640 --> 00:09:13,600
session subscribing to a channel with

00:09:09,760 --> 00:09:16,210
with with pusher and each time you're

00:09:13,600 --> 00:09:17,560
moving you sending a message to pusher

00:09:16,210 --> 00:09:18,850
and that's getting broadcast out to the

00:09:17,560 --> 00:09:20,470
rest of the players to move you around

00:09:18,850 --> 00:09:24,250
as well alright so the low there's a lot

00:09:20,470 --> 00:09:25,930
of network activity going on and put

00:09:24,250 --> 00:09:27,160
something there called presence channels

00:09:25,930 --> 00:09:28,630
this is why I had to get you to log in

00:09:27,160 --> 00:09:29,770
and this is why I needed to have fast

00:09:28,630 --> 00:09:31,120
fun I couldn't just do it as a

00:09:29,770 --> 00:09:33,670
client-side application because we

00:09:31,120 --> 00:09:36,850
needed to identify you and so I've got a

00:09:33,670 --> 00:09:39,400
Roth well authentication process going

00:09:36,850 --> 00:09:40,870
on in faster Phi which is an endpoint to

00:09:39,400 --> 00:09:42,730
make sure you're a real user that means

00:09:40,870 --> 00:09:45,280
you can log into its first login to

00:09:42,730 --> 00:09:47,050
pusher and start enjoying that channel

00:09:45,280 --> 00:09:48,910
and there's another kind of channel

00:09:47,050 --> 00:09:52,020
which I was hoping to get to demo before

00:09:48,910 --> 00:09:55,900
we actually ran out of quota which was

00:09:52,020 --> 00:10:01,990
which I'll just demo in this sort of in

00:09:55,900 --> 00:10:05,110
the command line here I'm hoping it's ok

00:10:01,990 --> 00:10:07,120
so it was it the idea was that it would

00:10:05,110 --> 00:10:11,440
pick up any tweets that came in

00:10:07,120 --> 00:10:13,210
mentioning L mug or and scan them they

00:10:11,440 --> 00:10:15,670
would scan across the top in that black

00:10:13,210 --> 00:10:16,840
bar and a sort of advertising style so

00:10:15,670 --> 00:10:17,139
if you're not a player you can be a

00:10:16,840 --> 00:10:18,699
speck

00:10:17,139 --> 00:10:21,189
eh-oh you can be an advertiser that's

00:10:18,699 --> 00:10:22,689
kind of the the idea behind it people

00:10:21,189 --> 00:10:23,889
interested in seeing code see what it

00:10:22,689 --> 00:10:26,049
looks like I can give you a quick

00:10:23,889 --> 00:10:27,519
overview yeah this thumbs up for coming

00:10:26,049 --> 00:10:32,230
up at the top of this so I'll quickly

00:10:27,519 --> 00:10:35,850
switch to my non vim code editor sorry

00:10:32,230 --> 00:10:38,199
Luther's after I did try already tried

00:10:35,850 --> 00:10:41,049
so just to give you a quick quick

00:10:38,199 --> 00:10:46,739
overview I've got a I've got a server

00:10:41,049 --> 00:10:50,919
here which is my faster fire service and

00:10:46,739 --> 00:10:53,019
everything in fast fives and here so the

00:10:50,919 --> 00:10:56,379
main thing we're worried about doing

00:10:53,019 --> 00:10:57,759
here is registering and connecting so

00:10:56,379 --> 00:10:59,949
this is where we do the connection and

00:10:57,759 --> 00:11:05,290
the authentication will make that bigger

00:10:59,949 --> 00:11:07,029
if you like with with the pusher this is

00:11:05,290 --> 00:11:10,059
all fairly well documented and fairly

00:11:07,029 --> 00:11:14,019
standard I'm just creating a JWT and

00:11:10,059 --> 00:11:17,379
getting the user's name that way then

00:11:14,019 --> 00:11:19,989
the bulk of the complexity really lies

00:11:17,379 --> 00:11:21,610
in the client right so I've dealt if

00:11:19,989 --> 00:11:22,689
you're familiar with any sort of this

00:11:21,610 --> 00:11:26,009
sort of component driven art

00:11:22,689 --> 00:11:29,079
architecture on the front end so out

00:11:26,009 --> 00:11:30,850
follows mainly the same rules but also

00:11:29,079 --> 00:11:32,799
slightly differently so we've got a main

00:11:30,850 --> 00:11:36,179
app and this is where most of the logic

00:11:32,799 --> 00:11:39,730
is happening and you can see my pusher

00:11:36,179 --> 00:11:41,379
key there that's great it's not the

00:11:39,730 --> 00:11:43,119
private one there and this is where I'm

00:11:41,379 --> 00:11:45,730
setting up the channels and the events

00:11:43,119 --> 00:11:47,499
around binding to those channels and and

00:11:45,730 --> 00:11:50,049
and the responses to those so for

00:11:47,499 --> 00:11:52,449
instance here this is where a member has

00:11:50,049 --> 00:11:54,309
been added and we need to tell the rest

00:11:52,449 --> 00:11:57,999
of the game that a members been added so

00:11:54,309 --> 00:12:01,470
that gets broadcast out to to pusher on

00:11:57,999 --> 00:12:04,809
this our this is the move one sorry but

00:12:01,470 --> 00:12:06,089
that's that's - so you tells you tells

00:12:04,809 --> 00:12:08,799
them where you are

00:12:06,089 --> 00:12:12,100
this is initializes a client this is

00:12:08,799 --> 00:12:13,929
initializes a new player that player has

00:12:12,100 --> 00:12:15,160
been removed that if someone if you had

00:12:13,929 --> 00:12:16,359
have left you would have disappeared

00:12:15,160 --> 00:12:22,480
from the screen and everyone else's

00:12:16,359 --> 00:12:23,889
screen and the various events that are

00:12:22,480 --> 00:12:25,539
in the game even the ball bouncing

00:12:23,889 --> 00:12:27,339
against another player needs to be

00:12:25,539 --> 00:12:30,069
broadcast as an event and this is where

00:12:27,339 --> 00:12:30,970
I spent most of my time was trying to

00:12:30,069 --> 00:12:34,060
get this to work

00:12:30,970 --> 00:12:35,079
devices using SVG and scalable things

00:12:34,060 --> 00:12:38,769
you'll notice that we all had different

00:12:35,079 --> 00:12:40,750
size different size devices but the idea

00:12:38,769 --> 00:12:44,379
was that we could we could scale this to

00:12:40,750 --> 00:12:45,790
any proportion and still have the

00:12:44,379 --> 00:12:50,439
integrity of the position of the players

00:12:45,790 --> 00:12:52,180
in the ball yeah so unfortunately we

00:12:50,439 --> 00:12:55,990
didn't get to I don't did anyone score a

00:12:52,180 --> 00:12:59,170
goal no all right so next time I'll pay

00:12:55,990 --> 00:13:00,459
for the paper sure maybe we can get them

00:12:59,170 --> 00:13:02,829
to sponsor something and we can get it

00:13:00,459 --> 00:13:04,449
do a full talk but yeah that's about it

00:13:02,829 --> 00:13:06,189
that's my lightning talk if you're

00:13:04,449 --> 00:13:08,470
interested to look at the source code

00:13:06,189 --> 00:13:10,689
it's available there get to hub com

00:13:08,470 --> 00:13:13,209
advertise hundred players thanks to

00:13:10,689 --> 00:13:14,620
pusher for you know providing video and

00:13:13,209 --> 00:13:17,500
providing a great platform for a bit of

00:13:14,620 --> 00:13:18,759
fun and actually that did fulfill a bit

00:13:17,500 --> 00:13:20,259
of my dream there of having a lot of

00:13:18,759 --> 00:13:22,180
people playing the same game at the same

00:13:20,259 --> 00:13:23,680
time and getting a little bit excited so

00:13:22,180 --> 00:13:30,540
thank you

00:13:23,680 --> 00:13:30,540
[Applause]

00:13:34,350 --> 00:13:43,120
it went up up down down left right left

00:13:38,740 --> 00:13:47,709
right BA and it should it should it just

00:13:43,120 --> 00:13:51,129
turns your name into emoji it didn't

00:13:47,709 --> 00:13:52,329
give you superpowers but yeah I mean I

00:13:51,129 --> 00:13:53,439
could have done more with it I added it

00:13:52,329 --> 00:13:58,779
this afternoon because I just thought

00:13:53,439 --> 00:14:00,220
well why not and yeah so that's why I

00:13:58,779 --> 00:14:01,420
kept the a and B in there cuz I just

00:14:00,220 --> 00:14:02,889
thought you know someone I thought I was

00:14:01,420 --> 00:14:06,069
hoping someone would just try it anyway

00:14:02,889 --> 00:14:15,730
just out of nature any other questions

00:14:06,069 --> 00:14:18,819
you didn't like for every single action

00:14:15,730 --> 00:14:24,939
in the game so what I'm what I've got is

00:14:18,819 --> 00:14:27,040
I've got a I've got I'm recalculating

00:14:24,939 --> 00:14:30,850
the position of all game of the state of

00:14:27,040 --> 00:14:35,589
the game every every action and then but

00:14:30,850 --> 00:14:39,160
every every player has a local state

00:14:35,589 --> 00:14:41,589
stored so if a player moves I transmit

00:14:39,160 --> 00:14:43,329
that movement or if the ball hits a

00:14:41,589 --> 00:14:44,800
player and move somewhere else I

00:14:43,329 --> 00:14:48,279
transmit that movement

00:14:44,800 --> 00:14:49,720
which all other players get so the the

00:14:48,279 --> 00:14:52,839
movement of the ball turns out being

00:14:49,720 --> 00:14:57,250
able to be a bit janky as a result the

00:14:52,839 --> 00:15:00,910
players seem to move okay but so I'm not

00:14:57,250 --> 00:15:03,310
yeah I'm running it using the animation

00:15:00,910 --> 00:15:04,570
frame Dom animation frame thing that's

00:15:03,310 --> 00:15:07,720
60 frames a second that would be too

00:15:04,570 --> 00:15:09,459
many to run to send every and so I'm

00:15:07,720 --> 00:15:11,170
trying to I was trying to minimize it

00:15:09,459 --> 00:15:13,630
and probably could optimize how many

00:15:11,170 --> 00:15:15,070
messages I'm sending but I didn't expect

00:15:13,630 --> 00:15:22,240
to run out of turn to turn their tails

00:15:15,070 --> 00:15:24,220
and so quickly there's no internal game

00:15:22,240 --> 00:15:27,850
states on the server that was one of my

00:15:24,220 --> 00:15:30,730
goals was not to have to I did I did

00:15:27,850 --> 00:15:33,310
look at that as an architecture just to

00:15:30,730 --> 00:15:35,170
be able to you know when you say a new

00:15:33,310 --> 00:15:36,880
player joins to be able to you know

00:15:35,170 --> 00:15:38,380
update them with the positions of all

00:15:36,880 --> 00:15:40,720
the other players or the current score

00:15:38,380 --> 00:15:42,339
or whatever it is but I wanted to avoid

00:15:40,720 --> 00:15:45,220
that and what I've got is I've got a

00:15:42,339 --> 00:15:49,600
concept of a game host so the first

00:15:45,220 --> 00:15:51,990
player is is the host so that that's the

00:15:49,600 --> 00:15:54,700
player that transmits to all new players

00:15:51,990 --> 00:15:58,510
well transmits to pusher and then pusher

00:15:54,700 --> 00:16:01,029
pushes out and if that player drops out

00:15:58,510 --> 00:16:02,950
then the next the next action will pick

00:16:01,029 --> 00:16:05,709
up a new game host and pick up the state

00:16:02,950 --> 00:16:07,420
from that so there is a kind of but it's

00:16:05,709 --> 00:16:09,579
not it's not it's not centrally

00:16:07,420 --> 00:16:11,170
controlled I mean and it would be

00:16:09,579 --> 00:16:15,070
interesting to do this with sort of you

00:16:11,170 --> 00:16:16,990
know you know i PF ipfs or something

00:16:15,070 --> 00:16:20,680
like that where you have a hundred sort

00:16:16,990 --> 00:16:48,610
of distribution and see how that works i

00:16:20,680 --> 00:16:58,029
mean anybody else service from a service

00:16:48,610 --> 00:17:00,699
perspective i'm not doing any checking i

00:16:58,029 --> 00:17:02,440
mean i'm trusting that any message I

00:17:00,699 --> 00:17:04,510
sent is being received by everyone else

00:17:02,440 --> 00:17:10,449
in this iteration in this version I mean

00:17:04,510 --> 00:17:13,660
it's like a game of pong you know but no

00:17:10,449 --> 00:17:14,919
I don't know I don't know I I mean they

00:17:13,660 --> 00:17:17,110
have a lot of statistics and stuff

00:17:14,919 --> 00:17:19,059
around that possibly you could you could

00:17:17,110 --> 00:17:21,280
see where things are failing but I'm not

00:17:19,059 --> 00:17:26,949
I mean there's an error log if you if we

00:17:21,280 --> 00:17:30,820
look at the go back to the UI here they

00:17:26,949 --> 00:17:36,490
have a sort of they have a bunch of sort

00:17:30,820 --> 00:17:41,800
of error logs here yeah quota exceeded

00:17:36,490 --> 00:17:43,360
so we knew that happened it happened

00:17:41,800 --> 00:17:46,929
four times I don't know how you can

00:17:43,360 --> 00:17:49,630
exceed your quota four times but yeah so

00:17:46,929 --> 00:17:51,429
there may be tooling associated with

00:17:49,630 --> 00:17:53,679
what pusher can offer I don't know I was

00:17:51,429 --> 00:17:56,370
just really trying to get as much as I

00:17:53,679 --> 00:18:00,340
could out of it for free

00:17:56,370 --> 00:18:05,679
I don't know this one's mean this means

00:18:00,340 --> 00:18:08,250
mean like 15 years in the making so yeah

00:18:05,679 --> 00:18:10,900
yeah cool well thank you

00:18:08,250 --> 00:18:10,900

YouTube URL: https://www.youtube.com/watch?v=1KNSWB2t5Gk


