Title: Vue.js Vienna, Vue js and GDPR - Creating A Custom Cookie Component, April 2018
Publication date: 2018-04-18
Playlist: Vue.js Vienna
Description: 
	In anticipation of GDPR becoming enforceable on May 25, Markus Danek will demonstrate how to create a custom cookie component.
Captions: 
	00:00:00,000 --> 00:00:07,020
so um yeah as I said I'm working here as

00:00:03,720 --> 00:00:09,540
a front-end developer and today I will

00:00:07,020 --> 00:00:11,910
talk shortly about gdpr

00:00:09,540 --> 00:00:14,910
especially how it affects some modern

00:00:11,910 --> 00:00:17,580
websites and how we use cookies and then

00:00:14,910 --> 00:00:20,220
I will do live programming session and

00:00:17,580 --> 00:00:24,150
where we create a cookie message warning

00:00:20,220 --> 00:00:25,769
component yeah and also and we will

00:00:24,150 --> 00:00:27,480
integrate Google Analytics because

00:00:25,769 --> 00:00:33,270
otherwise it wouldn't make sense to do

00:00:27,480 --> 00:00:34,230
such things okay so this came up all you

00:00:33,270 --> 00:00:36,030
hear about gdpr

00:00:34,230 --> 00:00:38,489
is my personal opinion so I'm not a

00:00:36,030 --> 00:00:40,050
lawyer and it's just a recommendation

00:00:38,489 --> 00:00:45,360
how you should do it

00:00:40,050 --> 00:00:51,239
so just for reference and so the next

00:00:45,360 --> 00:00:53,309
page so so GDP oh I think almost

00:00:51,239 --> 00:00:55,680
everybody heard about this term because

00:00:53,309 --> 00:00:59,010
it's in every newspaper and everybody's

00:00:55,680 --> 00:01:02,910
in Harry and like and it's something

00:00:59,010 --> 00:01:05,030
like chaos here and in companies like

00:01:02,910 --> 00:01:07,049
okey oh my god what do I have to do and

00:01:05,030 --> 00:01:10,650
do I need something to do

00:01:07,049 --> 00:01:13,380
so G PR stands shortly for general data

00:01:10,650 --> 00:01:16,350
product protection regulation and it

00:01:13,380 --> 00:01:19,530
starts and in the end of me and it

00:01:16,350 --> 00:01:21,780
generally covers all topics how to

00:01:19,530 --> 00:01:26,189
handle personal data in companies and

00:01:21,780 --> 00:01:28,979
how we should also secure them so it's

00:01:26,189 --> 00:01:31,170
not only for developing focused

00:01:28,979 --> 00:01:34,619
companies but also for auto repair shop

00:01:31,170 --> 00:01:36,810
for and a hairdresser so everybody who

00:01:34,619 --> 00:01:45,630
handles with person data has to be

00:01:36,810 --> 00:01:48,659
cheaper GDP I'll confirm so so you might

00:01:45,630 --> 00:01:51,380
think ok yeah I just have a normal

00:01:48,659 --> 00:01:54,509
website and I don't really have any

00:01:51,380 --> 00:01:57,570
personal data from my users so why

00:01:54,509 --> 00:02:04,409
should follow me why should I research

00:01:57,570 --> 00:02:07,079
for it or whatsoever yeah well maybe

00:02:04,409 --> 00:02:09,750
some of you think ok I already have one

00:02:07,079 --> 00:02:12,750
of these annoying cookie warning

00:02:09,750 --> 00:02:16,890
messages on my website so I'm also fine

00:02:12,750 --> 00:02:20,910
so get at me gdpr so my first question

00:02:16,890 --> 00:02:22,410
is and I hope that you raise your hands

00:02:20,910 --> 00:02:25,080
or not

00:02:22,410 --> 00:02:27,270
who thinks that for example this cookie

00:02:25,080 --> 00:02:32,390
message Waunakee SGD our GDP are

00:02:27,270 --> 00:02:36,150
conformed ok good

00:02:32,390 --> 00:02:38,610
what about this one so in this case you

00:02:36,150 --> 00:02:40,980
don't even have a button to click so it

00:02:38,610 --> 00:02:45,950
just says ok we track your personal data

00:02:40,980 --> 00:02:53,040
and that's it so I think y'all know okay

00:02:45,950 --> 00:02:56,760
this is doing completely one so yeah so

00:02:53,040 --> 00:03:03,480
we have to do something till the 25th of

00:02:56,760 --> 00:03:06,890
May so yeah the GDP our guideline it's a

00:03:03,480 --> 00:03:09,600
huge paper with 50 pages or longer and

00:03:06,890 --> 00:03:14,370
especially regarding cookies there's

00:03:09,600 --> 00:03:17,250
only one paragraph mentioned and I think

00:03:14,370 --> 00:03:19,590
the last one here is important may be

00:03:17,250 --> 00:03:21,680
used to create progress too often it of

00:03:19,590 --> 00:03:26,250
the natural persons and intensify them

00:03:21,680 --> 00:03:29,459
but yeah who knows exactly what their

00:03:26,250 --> 00:03:32,820
meaning I think nobody really saw in

00:03:29,459 --> 00:03:35,160
plain English this means ok implied

00:03:32,820 --> 00:03:37,140
consent is no long long enough it must

00:03:35,160 --> 00:03:40,530
be easy to with to our content as it is

00:03:37,140 --> 00:03:43,260
to give and soft opt soft opt-in is not

00:03:40,530 --> 00:03:45,480
as sufficient so cookie one with just

00:03:43,260 --> 00:03:48,180
one button where you can click ok I I

00:03:45,480 --> 00:03:50,400
read the info I can't do nothing against

00:03:48,180 --> 00:03:53,730
it it's not sufficient enough so you

00:03:50,400 --> 00:03:55,230
have to also have to provide a button

00:03:53,730 --> 00:03:58,580
where you can say ok now don't really

00:03:55,230 --> 00:04:00,780
want to be tracked and all the tracking

00:03:58,580 --> 00:04:05,790
programs like Google Analytics so Adobe

00:04:00,780 --> 00:04:09,290
Analytics be stopped so ok we have a

00:04:05,790 --> 00:04:14,220
problem here we have to do something

00:04:09,290 --> 00:04:17,790
against Ted and now we are coming to the

00:04:14,220 --> 00:04:22,890
live cramming session so now we create a

00:04:17,790 --> 00:04:24,600
short a small futures project with the

00:04:22,890 --> 00:04:28,830
new if you apply worse

00:04:24,600 --> 00:04:32,010
free interface we will also use the NPM

00:04:28,830 --> 00:04:36,060
package view analytics and yeah and

00:04:32,010 --> 00:04:43,380
obviously create one component so let's

00:04:36,060 --> 00:04:45,750
do this so I also have a cheat sheet for

00:04:43,380 --> 00:04:50,360
that because my first talk so I don't

00:04:45,750 --> 00:04:58,380
want to mess ups too many things okay so

00:04:50,360 --> 00:05:02,120
what do we have here so we create a new

00:04:58,380 --> 00:05:02,120
demo app with the future

00:05:04,130 --> 00:05:10,910
so select minimally we don't need

00:05:08,670 --> 00:05:17,790
typescript or whatsoever so it's really

00:05:10,910 --> 00:05:20,240
vanilla and we want package file and now

00:05:17,790 --> 00:05:25,700
we might need some elevator music

00:05:20,240 --> 00:05:35,510
because npm takes some time okay damn it

00:05:25,700 --> 00:05:37,830
okay but in the meantime oh okay

00:05:35,510 --> 00:05:43,410
someone disconnect from the villa from

00:05:37,830 --> 00:05:47,550
the Wi-Fi so it's fast enough okay short

00:05:43,410 --> 00:05:53,060
question who is using NPM and who is

00:05:47,550 --> 00:05:53,060
using yarn okay okay interesting

00:05:53,900 --> 00:05:59,750
okay I'm still the NPM guys so yeah

00:06:01,120 --> 00:06:04,310
okay just a few hours and then you're

00:06:03,860 --> 00:06:12,170
finished

00:06:04,310 --> 00:06:19,030
oh wow

00:06:12,170 --> 00:06:19,030
okay let's do some magic

00:06:26,790 --> 00:06:31,410
no fake presentation here all life

00:06:34,350 --> 00:06:41,530
okay so we are ready to go so we go to

00:06:37,570 --> 00:06:49,780
the application so we have our files

00:06:41,530 --> 00:06:53,200
here and now I will open my terminal and

00:06:49,780 --> 00:06:57,040
in the oops the background we will also

00:06:53,200 --> 00:06:57,820
on so we will see what we are doing

00:06:57,040 --> 00:07:04,900
really here

00:06:57,820 --> 00:07:06,240
what I'm doing here okay so yeah as you

00:07:04,900 --> 00:07:14,530
already know standart

00:07:06,240 --> 00:07:17,230
default view oops there it is so um yeah

00:07:14,530 --> 00:07:20,520
we have one hello a few hello world

00:07:17,230 --> 00:07:23,530
component we have to app dot view and

00:07:20,520 --> 00:07:26,950
what we are basically doing now is I

00:07:23,530 --> 00:07:29,110
call it cookie message or annoying

00:07:26,950 --> 00:07:33,960
cooking message component whatever you

00:07:29,110 --> 00:07:36,550
want to call it and now I have to cheat

00:07:33,960 --> 00:07:40,090
because otherwise we are sitting here

00:07:36,550 --> 00:07:43,840
till 11 p.m. I don't what I want to

00:07:40,090 --> 00:07:47,980
leave early so yeah and yeah are we go

00:07:43,840 --> 00:07:56,710
shortly fluid so we have our HTML here

00:07:47,980 --> 00:07:59,350
so are you sure it's okay so um what we

00:07:56,710 --> 00:08:02,350
have in here is we have free tips we

00:07:59,350 --> 00:08:06,010
have found some CSS classes we have one

00:08:02,350 --> 00:08:08,350
condition if is it open so this is

00:08:06,010 --> 00:08:10,450
required so banned the use of visits the

00:08:08,350 --> 00:08:13,080
page for the first time we get the info

00:08:10,450 --> 00:08:19,090
if it keeps on the button it goes away

00:08:13,080 --> 00:08:23,410
we also have a slot message and enter

00:08:19,090 --> 00:08:25,990
button for to accept the cookies and or

00:08:23,410 --> 00:08:29,740
to accept to be tracked and also to

00:08:25,990 --> 00:08:34,240
denied how also defined some crops which

00:08:29,740 --> 00:08:37,660
is pretty straightforward so for example

00:08:34,240 --> 00:08:42,400
we also have a proposition for

00:08:37,660 --> 00:08:45,730
in the end I can say okay I wanted to to

00:08:42,400 --> 00:08:50,320
be displayed in the top on the bottom so

00:08:45,730 --> 00:08:53,530
this is computed here with this method

00:08:50,320 --> 00:08:57,490
so I'm calling this here in this class

00:08:53,530 --> 00:08:59,500
and then it sets in cookie - manners and

00:08:57,490 --> 00:09:02,800
the position so cookie - Maris button

00:08:59,500 --> 00:09:06,490
for example and of course I have CSS for

00:09:02,800 --> 00:09:11,230
that when the component is created in

00:09:06,490 --> 00:09:17,020
the lifecycle I check if we have local

00:09:11,230 --> 00:09:19,990
storage item and if it's true so if we

00:09:17,020 --> 00:09:24,310
accepted it it gets hidden the component

00:09:19,990 --> 00:09:27,940
and we have to the methods here so the

00:09:24,310 --> 00:09:29,950
one is accept which sets the local

00:09:27,940 --> 00:09:33,100
storage item GPI accepted - - otherwise

00:09:29,950 --> 00:09:37,120
it's false and this is here just just to

00:09:33,100 --> 00:09:42,970
return it and I also used some CSS crits

00:09:37,120 --> 00:09:45,040
which is the latest as you yeah

00:09:42,970 --> 00:09:48,130
everybody's talking with I tried for the

00:09:45,040 --> 00:09:50,710
first time I struggled a little bit but

00:09:48,130 --> 00:09:55,750
yeah I hope I get better for next

00:09:50,710 --> 00:09:59,350
futures Meetup who knows and so we have

00:09:55,750 --> 00:10:03,930
our component here what we will need

00:09:59,350 --> 00:10:07,980
here now is to import it

00:10:03,930 --> 00:10:07,980
cookie message

00:10:12,160 --> 00:10:26,840
and also included here looking message

00:10:16,540 --> 00:10:28,910
and also and if I have done everything

00:10:26,840 --> 00:10:31,940
right the moment of truth

00:10:28,910 --> 00:10:39,110
Hey okay we have our cookie warning

00:10:31,940 --> 00:10:41,920
message Wow okay what I mentioned is we

00:10:39,110 --> 00:10:47,060
can use now our props for example on

00:10:41,920 --> 00:10:48,500
position so bottom and if i refresh now

00:10:47,060 --> 00:10:50,060
it's on the bottom

00:10:48,500 --> 00:10:52,700
and yes stuff like that so it's pretty

00:10:50,060 --> 00:11:01,670
straightforward the interesting part is

00:10:52,700 --> 00:11:03,530
coming I hope so so so we can I will

00:11:01,670 --> 00:11:07,700
check the local storage here so it's

00:11:03,530 --> 00:11:11,330
empty just from that pack 1 if we click

00:11:07,700 --> 00:11:14,330
on accept obviously it gets written to

00:11:11,330 --> 00:11:17,840
the local storage and the notification

00:11:14,330 --> 00:11:21,860
is hidden and vice-versa so could hear

00:11:17,840 --> 00:11:25,790
it and it's working so the important

00:11:21,860 --> 00:11:27,740
thing is here that we want to say the

00:11:25,790 --> 00:11:30,560
use okay um please accept the cookies

00:11:27,740 --> 00:11:34,400
because we want to track how you use our

00:11:30,560 --> 00:11:45,310
website so therefore we will use Google

00:11:34,400 --> 00:11:45,310
Analytics so I will go oops

00:11:48,120 --> 00:11:57,100
okay so we are here now a demo app and I

00:11:54,520 --> 00:12:01,210
will use the NPM package view analytics

00:11:57,100 --> 00:12:03,640
it has about 700 stars on github and the

00:12:01,210 --> 00:12:07,210
maintain is very active and is pushing a

00:12:03,640 --> 00:12:09,570
lot of commits so I can recommend it

00:12:07,210 --> 00:12:13,080
it's just a Google Analytics API wrapper

00:12:09,570 --> 00:12:18,520
so what we will do is in p.m. install

00:12:13,080 --> 00:12:24,510
few and the tick's loop so elevate the

00:12:18,520 --> 00:12:24,510
music again hopefully not this long

00:12:25,920 --> 00:12:34,660
tulip tulip and then so okay edit

00:12:31,780 --> 00:12:40,240
we have here a package.json now with few

00:12:34,660 --> 00:12:59,680
analytics and we also would want to

00:12:40,240 --> 00:13:06,610
import it so thank you item so no magic

00:12:59,680 --> 00:13:10,600
here and normally we would just so how

00:13:06,610 --> 00:13:13,170
should I do it so don't look at the

00:13:10,600 --> 00:13:13,170
screen please

00:13:14,260 --> 00:13:26,470
so normally we would use if you used to

00:13:24,070 --> 00:13:30,810
in your initialize tip the plug-in I

00:13:26,470 --> 00:13:34,750
created evaluate Google Analytics IT and

00:13:30,810 --> 00:13:37,630
also the debug flag that we see okay

00:13:34,750 --> 00:13:40,480
it's working and this year is the

00:13:37,630 --> 00:13:42,640
important stuff because we've disabled

00:13:40,480 --> 00:13:44,470
we can set okay please do not write any

00:13:42,640 --> 00:13:49,540
cookies and we want to really disable

00:13:44,470 --> 00:13:51,910
Google Analytics and this is you use it

00:13:49,540 --> 00:13:54,820
with you analytics like this and if you

00:13:51,910 --> 00:13:58,780
just copy and paste normal JavaScript

00:13:54,820 --> 00:14:01,090
script file into your HTML file you have

00:13:58,780 --> 00:14:09,010
a window property you can set to disable

00:14:01,090 --> 00:14:11,830
it and yeah so but we want to have it

00:14:09,010 --> 00:14:15,520
depending on if the user accepted or

00:14:11,830 --> 00:14:17,410
denied it so the problem is here we'll

00:14:15,520 --> 00:14:21,820
figure out yesterday evening so I'm

00:14:17,410 --> 00:14:26,500
really happy that it's working I hope so

00:14:21,820 --> 00:14:28,600
that you can't set this this flag here

00:14:26,500 --> 00:14:33,040
during the runtime so you have to do it

00:14:28,600 --> 00:14:38,710
when you initialize the package so my

00:14:33,040 --> 00:14:40,900
little trick is that I get the status so

00:14:38,710 --> 00:14:45,780
true or false of the local storage item

00:14:40,900 --> 00:14:49,840
and depending on that so if he accepted

00:14:45,780 --> 00:14:52,510
Google Analytics with our fancy cooking

00:14:49,840 --> 00:14:56,410
message component or whatever you want

00:14:52,510 --> 00:14:59,500
to call it we set it up normally and say

00:14:56,410 --> 00:15:02,470
disable force which can be also you

00:14:59,500 --> 00:15:04,360
don't have really have to do that

00:15:02,470 --> 00:15:07,150
because it automatically set up

00:15:04,360 --> 00:15:09,730
otherwise it wouldn't make sense and if

00:15:07,150 --> 00:15:14,200
he said okay I want to denied with set

00:15:09,730 --> 00:15:20,230
it to disabled true so we save this one

00:15:14,200 --> 00:15:26,430
and I hope I didn't mess up something so

00:15:20,230 --> 00:15:26,430
if we so the local storage is empty

00:15:26,930 --> 00:15:32,970
so we click on accept' into a reload now

00:15:30,750 --> 00:15:35,010
you see ok the Google Analytics plug-in

00:15:32,970 --> 00:15:38,240
is some loading we have our debug

00:15:35,010 --> 00:15:42,030
messages and if we check our cookies now

00:15:38,240 --> 00:15:46,320
and refresh it we have our cookies

00:15:42,030 --> 00:15:49,050
automatically set by Google ok works

00:15:46,320 --> 00:15:51,390
fine but now we have a user who says

00:15:49,050 --> 00:15:55,470
okay I'm totally paranoid and I don't

00:15:51,390 --> 00:15:58,640
want to to track or to be tracked so he

00:15:55,470 --> 00:16:02,390
comes again says ok I want to deny it

00:15:58,640 --> 00:16:06,060
let me kick it again and now you see

00:16:02,390 --> 00:16:10,920
from Google Analytics that yeah the use

00:16:06,060 --> 00:16:13,110
has opted out of how tracking yeah the

00:16:10,920 --> 00:16:16,980
cookie writing has failed we do not have

00:16:13,110 --> 00:16:20,180
any cookies here and hopefully your GDP

00:16:16,980 --> 00:16:25,380
are compliant and gone don't get sued

00:16:20,180 --> 00:16:28,320
which is about 4% of the yearly even a

00:16:25,380 --> 00:16:35,210
revenue of a company's so could be a lot

00:16:28,320 --> 00:16:37,200
and yeah that's it so far so any

00:16:35,210 --> 00:16:40,419
questions

00:16:37,200 --> 00:16:40,419

YouTube URL: https://www.youtube.com/watch?v=yFSSgHj9C-0


