Title: The web is getting pushy by Phil Nash at JSConf Budapest 2015
Publication date: 2020-09-23
Playlist: JSConf Budapest 2015
Description: 
	Slides: https://speakerdeck.com/philnash/the-web-is-getting-pushy

http://jsconfbp.com/#philnash

The battle between native and web rages on. The browsers are fighting hard to tear down the benefits that native developers have relied on since the inception of mobile platforms. Geolocation, sorted. Accelerometer, done. Performance, we'll come back to that. But one of the greatest draws for native developers has been push notifications, for the web, email alerts just don't cut it. 

But now, new in browsers for 2015, is the Service Worker. Born out of the struggle to make the Appcache work for offline capable sites it has also brought the advent of push notifications to the web. Through building up an example application live we will see how to implement the Service Worker to not only serve up an app when we're offline but enhance the online experience with push notifications. 

The battle may continue, but the web is definitely pushing back.
Captions: 
	00:00:09,070 --> 00:00:11,840
[Applause]

00:00:10,480 --> 00:00:13,920
thank you very much

00:00:11,840 --> 00:00:15,759
are you sure you're ready i'm not that

00:00:13,920 --> 00:00:18,880
was very slow that was

00:00:15,759 --> 00:00:19,680
i'm really glad uh you all made it in uh

00:00:18,880 --> 00:00:22,320
in order to see

00:00:19,680 --> 00:00:24,400
breakfast uh that has worked out nicely

00:00:22,320 --> 00:00:27,199
for me that's working as well good stuff

00:00:24,400 --> 00:00:28,960
so my name is phil nash i'm a developer

00:00:27,199 --> 00:00:30,000
evangelist for twilio

00:00:28,960 --> 00:00:31,760
let me tell you a little bit about

00:00:30,000 --> 00:00:32,160
twilio just before i get started as

00:00:31,760 --> 00:00:34,960
we're

00:00:32,160 --> 00:00:36,719
up on the side things there um twilio is

00:00:34,960 --> 00:00:38,480
a cloud communications platform

00:00:36,719 --> 00:00:40,079
uh that allows you to send or receive

00:00:38,480 --> 00:00:41,040
text messages or make and receive phone

00:00:40,079 --> 00:00:42,719
calls using

00:00:41,040 --> 00:00:44,399
the tools languages or frameworks you

00:00:42,719 --> 00:00:47,039
already do

00:00:44,399 --> 00:00:48,320
we also are about to launch a video

00:00:47,039 --> 00:00:50,480
product which will allow you to do

00:00:48,320 --> 00:00:51,760
webrtc video chat

00:00:50,480 --> 00:00:53,120
very easily in the browser as well

00:00:51,760 --> 00:00:54,879
without having to mess around with all

00:00:53,120 --> 00:00:56,719
the auxiliary servers that you need in

00:00:54,879 --> 00:00:58,399
order to set up webrtc

00:00:56,719 --> 00:01:00,320
talk to me all about that later because

00:00:58,399 --> 00:01:02,719
i'm not here to talk about that today

00:01:00,320 --> 00:01:04,000
however much i like talking about webrtc

00:01:02,719 --> 00:01:05,439
uh instead

00:01:04,000 --> 00:01:07,840
i'm here to talk about uh push

00:01:05,439 --> 00:01:10,000
notifications the web is getting pushy

00:01:07,840 --> 00:01:12,240
but before i start i want to warn you

00:01:10,000 --> 00:01:14,880
guys of something

00:01:12,240 --> 00:01:16,159
there is going to be some live coding um

00:01:14,880 --> 00:01:19,040
this means

00:01:16,159 --> 00:01:21,119
that we are now pair programming all

00:01:19,040 --> 00:01:24,400
together

00:01:21,119 --> 00:01:25,680
that doesn't mean that you can tell me

00:01:24,400 --> 00:01:27,520
that my code is bad

00:01:25,680 --> 00:01:29,119
because this is all live but it does

00:01:27,520 --> 00:01:30,880
mean you have to shout out any obvious

00:01:29,119 --> 00:01:32,640
syntax errors so that i don't look like

00:01:30,880 --> 00:01:34,400
a fool

00:01:32,640 --> 00:01:35,759
this will also rely on the internet but

00:01:34,400 --> 00:01:39,920
i brought my own

00:01:35,759 --> 00:01:40,479
so i've been told that the wi-fi has

00:01:39,920 --> 00:01:42,720
been uh

00:01:40,479 --> 00:01:44,479
upgraded a bit today so uh good luck

00:01:42,720 --> 00:01:46,000
there there's gonna be some opinions not

00:01:44,479 --> 00:01:48,240
too many it's early in the morning

00:01:46,000 --> 00:01:49,360
i understand um but i might put out a

00:01:48,240 --> 00:01:51,040
couple of opinions

00:01:49,360 --> 00:01:52,560
and there is gonna be uh some audience

00:01:51,040 --> 00:01:53,360
participation so i actually want you to

00:01:52,560 --> 00:01:55,840
kind of grab

00:01:53,360 --> 00:01:57,280
your internet-enabled devices as long as

00:01:55,840 --> 00:01:58,079
they are indeed internet enabled right

00:01:57,280 --> 00:02:00,560
now

00:01:58,079 --> 00:02:01,360
and uh be ready to uh send me some uh

00:02:00,560 --> 00:02:04,079
tweets

00:02:01,360 --> 00:02:05,759
uh or some yes tweets tweeting is what

00:02:04,079 --> 00:02:07,040
we will be doing in order to make stuff

00:02:05,759 --> 00:02:09,000
happen

00:02:07,040 --> 00:02:12,560
there are no cat gifts

00:02:09,000 --> 00:02:14,400
[Laughter]

00:02:12,560 --> 00:02:17,200
not enough time for cat gifts because i

00:02:14,400 --> 00:02:19,760
have to write the code for this okay

00:02:17,200 --> 00:02:21,280
um so the web is getting pushy let's uh

00:02:19,760 --> 00:02:23,599
let's get started

00:02:21,280 --> 00:02:25,040
i uh this this is all very new stuff so

00:02:23,599 --> 00:02:27,680
i'm very excited about it and as

00:02:25,040 --> 00:02:29,120
carolina said at the start uh i i just

00:02:27,680 --> 00:02:31,599
cannot get over how quick the

00:02:29,120 --> 00:02:32,319
web platform is moving for us uh right

00:02:31,599 --> 00:02:34,319
now

00:02:32,319 --> 00:02:36,080
uh and so that's why i wanted to talk

00:02:34,319 --> 00:02:39,200
about this because i feel as though

00:02:36,080 --> 00:02:39,920
um we are in a long almost never-ending

00:02:39,200 --> 00:02:42,400
battle

00:02:39,920 --> 00:02:43,760
uh since apple decided that web apps

00:02:42,400 --> 00:02:45,519
were not the way forward

00:02:43,760 --> 00:02:48,000
we are in this battle of web versus

00:02:45,519 --> 00:02:49,920
native uh and

00:02:48,000 --> 00:02:51,280
i always i always like to say you know

00:02:49,920 --> 00:02:54,239
there is no need uh

00:02:51,280 --> 00:02:55,920
to um create a native application if the

00:02:54,239 --> 00:02:57,840
web can do it and there are so many

00:02:55,920 --> 00:02:59,440
things the web can do right now

00:02:57,840 --> 00:03:01,360
uh geolocation is one we've got that

00:02:59,440 --> 00:03:02,480
sorted right we have the accelerometer

00:03:01,360 --> 00:03:04,319
that that works

00:03:02,480 --> 00:03:05,840
uh very nicely as well we can get all

00:03:04,319 --> 00:03:07,760
the events for that kind of thing

00:03:05,840 --> 00:03:09,440
peer-to-peer video chat as i said this

00:03:07,760 --> 00:03:11,519
is in the browsers today

00:03:09,440 --> 00:03:13,040
uh in over fifty percent of used

00:03:11,519 --> 00:03:16,159
browsers you can do

00:03:13,040 --> 00:03:19,280
a a a peer-to-peer video chat

00:03:16,159 --> 00:03:19,599
um performance you know that's fine we

00:03:19,280 --> 00:03:22,720
have

00:03:19,599 --> 00:03:24,159
react canvas um that that is

00:03:22,720 --> 00:03:26,159
one of my first opinions that's a

00:03:24,159 --> 00:03:26,560
terrible thing let's never ever make

00:03:26,159 --> 00:03:29,599
react

00:03:26,560 --> 00:03:32,080
canvas again um talk to me about that

00:03:29,599 --> 00:03:34,640
after a couple of beers this evening and

00:03:32,080 --> 00:03:36,640
we'll have a long discussion

00:03:34,640 --> 00:03:38,080
um but push notifications push

00:03:36,640 --> 00:03:40,000
notifications have been

00:03:38,080 --> 00:03:41,280
a thing that the web platform has been

00:03:40,000 --> 00:03:43,280
missing uh

00:03:41,280 --> 00:03:44,799
as i said earlier i i worked for twilio

00:03:43,280 --> 00:03:46,560
so for a long time we probably would

00:03:44,799 --> 00:03:47,519
have suggested that maybe you try sms

00:03:46,560 --> 00:03:50,640
instead

00:03:47,519 --> 00:03:51,440
but we know uh that genuinely that is

00:03:50,640 --> 00:03:53,360
not as

00:03:51,440 --> 00:03:55,439
immersive or deep as something like a

00:03:53,360 --> 00:03:57,599
push notification like that

00:03:55,439 --> 00:03:58,799
um that is of course a terrible push

00:03:57,599 --> 00:04:00,640
notification

00:03:58,799 --> 00:04:02,000
nobody cares that your friends that you

00:04:00,640 --> 00:04:05,280
may or may not follow on twitter are

00:04:02,000 --> 00:04:08,560
talking about grey's anatomy

00:04:05,280 --> 00:04:09,680
come on twitter so uh notifications i

00:04:08,560 --> 00:04:11,920
think the web

00:04:09,680 --> 00:04:13,680
you know we have grown up trying to do

00:04:11,920 --> 00:04:15,040
some sort of notification so i want to

00:04:13,680 --> 00:04:18,639
kind of take you through

00:04:15,040 --> 00:04:21,600
a bit of a history of that using

00:04:18,639 --> 00:04:22,960
a live demo as i said so we are going to

00:04:21,600 --> 00:04:24,720
come out of full screen and remind me

00:04:22,960 --> 00:04:27,360
not to go back into full screen because

00:04:24,720 --> 00:04:31,040
some things won't show up if i do

00:04:27,360 --> 00:04:33,600
and what we have here it's running right

00:04:31,040 --> 00:04:34,080
it's running cool uh what we have here

00:04:33,600 --> 00:04:36,240
is

00:04:34,080 --> 00:04:37,680
a search on twitter for the hashtag

00:04:36,240 --> 00:04:40,320
jsconf push

00:04:37,680 --> 00:04:42,240
nobody has uh sent a hash a tweet with

00:04:40,320 --> 00:04:46,960
the hashtag jsconf push yet

00:04:42,240 --> 00:04:46,960
but if i were to do that right now

00:04:47,840 --> 00:04:50,560
that's been sent

00:04:51,120 --> 00:04:54,960
and nothing happens because there is

00:04:52,960 --> 00:04:56,400
nothing on there i can refresh

00:04:54,960 --> 00:04:58,720
and still nothing there because the

00:04:56,400 --> 00:05:02,479
twitter api is kind of slow

00:04:58,720 --> 00:05:02,479
good didn't actually send the right

00:05:08,840 --> 00:05:12,000
thing

00:05:10,400 --> 00:05:14,160
excellent that's exactly what i wanted

00:05:12,000 --> 00:05:16,240
to see happen okay let's come fish

00:05:14,160 --> 00:05:17,759
um so no worries let's just think about

00:05:16,240 --> 00:05:19,440
it this is the application behind it all

00:05:17,759 --> 00:05:20,160
can you read that that is fairly large

00:05:19,440 --> 00:05:23,360
right

00:05:20,160 --> 00:05:24,320
good it's an express application we have

00:05:23,360 --> 00:05:26,080
a twitter

00:05:24,320 --> 00:05:28,080
library getting a search for the tweets

00:05:26,080 --> 00:05:30,400
for the hashtag the hashtag is just

00:05:28,080 --> 00:05:30,400
push

00:05:32,639 --> 00:05:36,160
what i probably did there we go so we've

00:05:34,160 --> 00:05:39,039
got some stuff it worked

00:05:36,160 --> 00:05:41,120
it's just a little slow and not broken

00:05:39,039 --> 00:05:43,520
whoever that was

00:05:41,120 --> 00:05:44,800
thank you though um so we have some

00:05:43,520 --> 00:05:45,680
stuff but it's not doing anything

00:05:44,800 --> 00:05:48,000
interesting yet

00:05:45,680 --> 00:05:48,880
so right here i have a streaming

00:05:48,000 --> 00:05:52,320
endpoint this

00:05:48,880 --> 00:05:53,600
is sending out um this will send out an

00:05:52,320 --> 00:05:55,360
event stream uh

00:05:53,600 --> 00:05:56,720
in order to consume that on the front

00:05:55,360 --> 00:05:59,280
end uh

00:05:56,720 --> 00:06:00,800
and here is my front end application

00:05:59,280 --> 00:06:02,000
very little at the moment so what we're

00:06:00,800 --> 00:06:04,479
going to do

00:06:02,000 --> 00:06:06,960
is um so this is kind of the basic thing

00:06:04,479 --> 00:06:09,759
that we could have done

00:06:06,960 --> 00:06:12,240
let's have a new event source from that

00:06:09,759 --> 00:06:14,400
endpoint which is stream

00:06:12,240 --> 00:06:15,680
and we also have that list and i'm using

00:06:14,400 --> 00:06:19,039
jquery because i am

00:06:15,680 --> 00:06:20,800
lazy and

00:06:19,039 --> 00:06:22,560
you don't want to see me build uh dom

00:06:20,800 --> 00:06:24,319
elements live here today we're just

00:06:22,560 --> 00:06:27,280
going to write things out

00:06:24,319 --> 00:06:27,280
so um

00:06:28,479 --> 00:06:31,520
this could be anything really this could

00:06:30,080 --> 00:06:33,120
be anything back from

00:06:31,520 --> 00:06:35,199
i mean the original notifications was

00:06:33,120 --> 00:06:36,560
just refreshing the page as we just saw

00:06:35,199 --> 00:06:39,440
but this could be anything back from

00:06:36,560 --> 00:06:40,639
uh any kind of polling uh long polling

00:06:39,440 --> 00:06:44,960
ajax

00:06:40,639 --> 00:06:47,280
websockets or all this indeed and um

00:06:44,960 --> 00:06:49,280
this is an event uh stream just in order

00:06:47,280 --> 00:06:50,319
to get notifications into our browser

00:06:49,280 --> 00:06:54,080
okay

00:06:50,319 --> 00:06:56,400
so we get an event um

00:06:54,080 --> 00:06:57,680
false because it's that event listener

00:06:56,400 --> 00:06:59,520
and with that event

00:06:57,680 --> 00:07:01,400
we're going to get some data so i've got

00:06:59,520 --> 00:07:03,199
the message and we're just going to

00:07:01,400 --> 00:07:06,160
json.parse

00:07:03,199 --> 00:07:07,759
event.data that gives us a message and

00:07:06,160 --> 00:07:09,919
then i can just build up

00:07:07,759 --> 00:07:11,440
uh and so the apologies for the vars i

00:07:09,919 --> 00:07:12,639
know we've seen a lot of lets and consts

00:07:11,440 --> 00:07:13,440
in the last couple of days i will be

00:07:12,639 --> 00:07:16,319
using some

00:07:13,440 --> 00:07:17,520
lovely es6 stuff like right here uh this

00:07:16,319 --> 00:07:21,360
is a template string

00:07:17,520 --> 00:07:23,360
um but i i haven't got into

00:07:21,360 --> 00:07:24,880
lets and vars just yet so we'll ignore

00:07:23,360 --> 00:07:27,199
that for now

00:07:24,880 --> 00:07:28,720
so this is just my message if you

00:07:27,199 --> 00:07:30,720
haven't seen template strings they stop

00:07:28,720 --> 00:07:33,360
you having to do all that horrible plus

00:07:30,720 --> 00:07:33,919
uh stuff because you can just embed uh

00:07:33,360 --> 00:07:37,039
strings

00:07:33,919 --> 00:07:41,120
within the thing so message from uh

00:07:37,039 --> 00:07:44,720
end that p and that uh start new one

00:07:41,120 --> 00:07:46,800
we're just writing out simply a uh

00:07:44,720 --> 00:07:49,280
an li that's going to show us the

00:07:46,800 --> 00:07:49,280
message

00:07:50,240 --> 00:07:54,639
and then i got message dot body

00:07:57,120 --> 00:08:02,000
n the p and the li no one's shouted any

00:08:00,080 --> 00:08:03,360
obvious mistakes yet so

00:08:02,000 --> 00:08:05,520
we're just going to take the list and

00:08:03,360 --> 00:08:08,319
pre-pend the li

00:08:05,520 --> 00:08:09,599
okay cool so if that works we're going

00:08:08,319 --> 00:08:10,479
to refresh this page and if you send

00:08:09,599 --> 00:08:12,240
another tweet

00:08:10,479 --> 00:08:14,000
or if anybody sends it to it with jsconf

00:08:12,240 --> 00:08:14,400
with the jsconf push we will start to

00:08:14,000 --> 00:08:16,400
see

00:08:14,400 --> 00:08:18,639
little notifications come on screen not

00:08:16,400 --> 00:08:20,800
the most exciting ones

00:08:18,639 --> 00:08:23,440
santa missing cat gift all right all

00:08:20,800 --> 00:08:23,440
right all right

00:08:24,000 --> 00:08:27,840
better be a cat gift

00:08:27,919 --> 00:08:30,319
there we go

00:08:32,399 --> 00:08:35,440
isn't that lovely is anybody sending

00:08:34,240 --> 00:08:40,080
anything we should be getting

00:08:35,440 --> 00:08:43,680
streams of messages through right now

00:08:40,080 --> 00:08:43,680
let's let me send one just myself

00:08:48,800 --> 00:08:52,560
effectively what would be happening is a

00:08:50,959 --> 00:08:53,760
little yellow notification flashes up

00:08:52,560 --> 00:08:54,640
with a thing in the top and it's all

00:08:53,760 --> 00:08:57,680
good

00:08:54,640 --> 00:08:58,640
uh it's apparently not happening do we

00:08:57,680 --> 00:08:59,760
have any errors

00:08:58,640 --> 00:09:01,920
that's always a good thing to check

00:08:59,760 --> 00:09:01,920
right

00:09:02,959 --> 00:09:06,560
normally i use firefox and f12 would

00:09:04,800 --> 00:09:10,320
work there we go we missed

00:09:06,560 --> 00:09:10,320
the favicon that's not an error okay

00:09:17,200 --> 00:09:20,880
happy 20th birthday javascript

00:09:18,480 --> 00:09:23,200
absolutely good um

00:09:20,880 --> 00:09:24,560
so we'll ignore that for a sec uh we

00:09:23,200 --> 00:09:26,160
have all this we have other things

00:09:24,560 --> 00:09:28,560
but uh what i want to get back to in

00:09:26,160 --> 00:09:29,519
that case is just talking about uh what

00:09:28,560 --> 00:09:32,320
else is happening

00:09:29,519 --> 00:09:33,200
uh we've had uh that kind of awkward uh

00:09:32,320 --> 00:09:34,839
doesn't even work

00:09:33,200 --> 00:09:36,480
when i try and do it live kind of

00:09:34,839 --> 00:09:38,160
notification um

00:09:36,480 --> 00:09:39,600
and that doesn't really that doesn't

00:09:38,160 --> 00:09:40,640
really help us it doesn't really notify

00:09:39,600 --> 00:09:42,560
we we can

00:09:40,640 --> 00:09:43,680
try and make that look as native or as

00:09:42,560 --> 00:09:45,040
um

00:09:43,680 --> 00:09:46,560
as kind of exciting as possible but it

00:09:45,040 --> 00:09:48,320
all lives within the web page it all

00:09:46,560 --> 00:09:49,519
lives on that page that we've created

00:09:48,320 --> 00:09:52,640
there

00:09:49,519 --> 00:09:53,519
however that's exactly what it should

00:09:52,640 --> 00:09:55,440
look like

00:09:53,519 --> 00:09:57,839
see i was ready for this little yellow

00:09:55,440 --> 00:09:59,200
thing um flashing it at the top

00:09:57,839 --> 00:10:00,640
not really a thing that was me uh

00:09:59,200 --> 00:10:01,600
recording these last night whilst you

00:10:00,640 --> 00:10:04,720
started the party

00:10:01,600 --> 00:10:06,000
um so anyway real notifications do exist

00:10:04,720 --> 00:10:06,720
in browsers though you might have seen

00:10:06,000 --> 00:10:08,880
them

00:10:06,720 --> 00:10:09,920
and they have some support uh in some

00:10:08,880 --> 00:10:11,040
browsers um

00:10:09,920 --> 00:10:13,120
as you can see internet explorer is

00:10:11,040 --> 00:10:15,120
always fun uh chrome

00:10:13,120 --> 00:10:16,959
uh has supported real notifications in

00:10:15,120 --> 00:10:18,079
the browser since version 22. as has

00:10:16,959 --> 00:10:21,120
firefox

00:10:18,079 --> 00:10:22,720
opera since 25 and safari since version

00:10:21,120 --> 00:10:26,240
6 as long as you're on

00:10:22,720 --> 00:10:29,600
os 10.8

00:10:26,240 --> 00:10:29,600
internet explorer is thinking about it

00:10:31,040 --> 00:10:34,560
which i will come back to later and i

00:10:32,959 --> 00:10:36,079
think is better than some things but

00:10:34,560 --> 00:10:37,839
internet explorer is thinking about it

00:10:36,079 --> 00:10:40,079
okay so we can you know this is this is

00:10:37,839 --> 00:10:42,480
all a progressive enhancement so

00:10:40,079 --> 00:10:43,360
um let's have a look at what i mean in

00:10:42,480 --> 00:10:46,399
that case

00:10:43,360 --> 00:10:47,839
um so what we're going to do is just uh

00:10:46,399 --> 00:10:49,440
i'm going to open up a button here which

00:10:47,839 --> 00:10:51,519
is going to give me some

00:10:49,440 --> 00:10:53,839
things to ask about there's there's

00:10:51,519 --> 00:10:53,839
nothing

00:10:56,720 --> 00:11:00,240
and with our button i'm and grab that

00:10:59,519 --> 00:11:04,800
button

00:11:00,240 --> 00:11:04,800
and we can when you click for it

00:11:09,360 --> 00:11:12,880
we can ask for permission and this is

00:11:11,760 --> 00:11:14,160
important i think when you start to

00:11:12,880 --> 00:11:16,720
reach into deeper

00:11:14,160 --> 00:11:18,079
kind of browser to operating system kind

00:11:16,720 --> 00:11:21,360
of level things

00:11:18,079 --> 00:11:24,640
permissions become very important and so

00:11:21,360 --> 00:11:26,000
notification is the object and we can

00:11:24,640 --> 00:11:30,000
request

00:11:26,000 --> 00:11:32,800
permission now that does take a callback

00:11:30,000 --> 00:11:32,800
i need to probably

00:11:36,240 --> 00:11:40,000
good uh that that takes a callback but

00:11:38,800 --> 00:11:41,360
we don't need that right now because i

00:11:40,000 --> 00:11:45,680
am just going to accept

00:11:41,360 --> 00:11:45,680
um the weird thing about the callback is

00:11:46,399 --> 00:11:50,160
there you go i already allowed it let's

00:11:48,800 --> 00:11:52,959
try that once more

00:11:50,160 --> 00:11:54,800
so we get the uh we get a notification

00:11:52,959 --> 00:11:56,160
and it gets to ask whether we allow this

00:11:54,800 --> 00:11:58,639
site here today

00:11:56,160 --> 00:11:59,360
to give us uh notifications and we can

00:11:58,639 --> 00:12:02,240
say allow

00:11:59,360 --> 00:12:03,519
and in the callback that will say um

00:12:02,240 --> 00:12:04,880
that won't give us a true or false a

00:12:03,519 --> 00:12:08,000
boolean or anything it will give us

00:12:04,880 --> 00:12:09,360
a string saying granted somewhat

00:12:08,000 --> 00:12:11,839
annoying but you know

00:12:09,360 --> 00:12:13,440
um so we're going to do that we've given

00:12:11,839 --> 00:12:15,040
ourselves permission that's all i needed

00:12:13,440 --> 00:12:16,079
to do then i'm going to just remove that

00:12:15,040 --> 00:12:19,040
for now and right let's

00:12:16,079 --> 00:12:19,760
oops cancel let's let's hide that and

00:12:19,040 --> 00:12:21,839
instead

00:12:19,760 --> 00:12:23,360
what we're going to do in here when when

00:12:21,839 --> 00:12:26,880
we receive a message

00:12:23,360 --> 00:12:26,880
which may or may not be working

00:12:28,720 --> 00:12:31,920
let's try and find out where my problem

00:12:30,480 --> 00:12:35,760
is

00:12:31,920 --> 00:12:39,839
when we receive a message if we have

00:12:35,760 --> 00:12:39,839
the notification permission

00:12:40,720 --> 00:12:44,720
and if it's granted it's awkward that

00:12:43,040 --> 00:12:47,680
you have to check against a

00:12:44,720 --> 00:12:48,800
string i like triple equals it's fine

00:12:47,680 --> 00:12:49,839
it's awkward you have to check against

00:12:48,800 --> 00:12:51,440
the string it could be

00:12:49,839 --> 00:12:53,200
anything else but this is if we have the

00:12:51,440 --> 00:12:54,639
permission then we can create a new

00:12:53,200 --> 00:12:57,440
notification object

00:12:54,639 --> 00:12:58,800
and that takes two arguments the title

00:12:57,440 --> 00:13:01,120
uh which again we're going to do our

00:12:58,800 --> 00:13:01,120
from

00:13:02,200 --> 00:13:06,000
message.from

00:13:04,480 --> 00:13:07,920
and it takes a second argument where you

00:13:06,000 --> 00:13:11,600
can give a bunch of things uh but the

00:13:07,920 --> 00:13:16,000
um uh the main is uh body

00:13:11,600 --> 00:13:16,000
which is gonna say message

00:13:16,880 --> 00:13:21,120
message.body uh you can give that a url

00:13:20,000 --> 00:13:22,720
and other things like that but we're

00:13:21,120 --> 00:13:23,760
just going to keep it simple for right

00:13:22,720 --> 00:13:26,000
now

00:13:23,760 --> 00:13:26,000
and

00:13:27,600 --> 00:13:32,839
if that all works that's a big croc

00:13:30,639 --> 00:13:34,000
i don't there's no crocodiles involved

00:13:32,839 --> 00:13:37,519
whatsoever

00:13:34,000 --> 00:13:39,920
um that is possibly working

00:13:37,519 --> 00:13:41,279
uh we're not seeing any events in there

00:13:39,920 --> 00:13:44,560
so that's rather sad that is how you

00:13:41,279 --> 00:13:44,560
write it and what happens is

00:13:44,720 --> 00:13:48,800
you click that we get our now and then

00:13:47,120 --> 00:13:50,079
eventually a notification comes through

00:13:48,800 --> 00:13:53,199
and we see

00:13:50,079 --> 00:13:55,519
a notification at the top uh oh we have

00:13:53,199 --> 00:13:59,440
one they are working how about that

00:13:55,519 --> 00:13:59,440
it's a real life notification and

00:14:00,320 --> 00:14:04,000
i've broken something within the actual

00:14:02,959 --> 00:14:07,040
putting them into the page but the

00:14:04,000 --> 00:14:10,560
notifications are working so there we go

00:14:07,040 --> 00:14:13,600
i might make that stop now um

00:14:10,560 --> 00:14:13,600
it's just going to keep going

00:14:14,399 --> 00:14:18,399
so that works and and we're just like uh

00:14:16,480 --> 00:14:19,519
you know a quick request to permissions

00:14:18,399 --> 00:14:21,600
find out what's going on

00:14:19,519 --> 00:14:23,360
we can send an actual real notification

00:14:21,600 --> 00:14:31,839
values work as i said in chrome

00:14:23,360 --> 00:14:31,839
and firefox and uh opera

00:14:34,800 --> 00:14:39,760
good let's uh let's pop back in here and

00:14:37,360 --> 00:14:41,199
let me tell you about the

00:14:39,760 --> 00:14:42,720
i'm just gonna leave those there because

00:14:41,199 --> 00:14:43,199
it only goes up to a maximum of three in

00:14:42,720 --> 00:14:44,880
chrome

00:14:43,199 --> 00:14:46,240
you can't put any more on screen until i

00:14:44,880 --> 00:14:48,720
cancel them

00:14:46,240 --> 00:14:50,480
so push notifications we've we've seen

00:14:48,720 --> 00:14:50,880
these before like i said chrome 22

00:14:50,480 --> 00:14:53,839
that's

00:14:50,880 --> 00:14:54,399
years ago right we're on chrome 42 now

00:14:53,839 --> 00:14:55,920
um

00:14:54,399 --> 00:14:57,600
and for anybody who was wondering about

00:14:55,920 --> 00:14:58,399
whether numbers matter in semantic

00:14:57,600 --> 00:15:00,639
versioning

00:14:58,399 --> 00:15:03,600
has the browsers moving once a quarter

00:15:00,639 --> 00:15:06,079
really bothered us i don't think so

00:15:03,600 --> 00:15:07,360
the service worker is our future this is

00:15:06,079 --> 00:15:10,480
what we are talking about

00:15:07,360 --> 00:15:11,600
well service workers are a piece of

00:15:10,480 --> 00:15:14,160
javascript that can

00:15:11,600 --> 00:15:14,959
live inside a browser registered by a

00:15:14,160 --> 00:15:18,160
website

00:15:14,959 --> 00:15:18,639
in order to uh well actually they came

00:15:18,160 --> 00:15:20,720
because

00:15:18,639 --> 00:15:22,880
uh of the terrible ways that the

00:15:20,720 --> 00:15:24,399
application cache uh treated us and if

00:15:22,880 --> 00:15:26,320
you know jake archibald's or have seen

00:15:24,399 --> 00:15:28,480
that talk or read the articles that he's

00:15:26,320 --> 00:15:30,399
written on the application cache

00:15:28,480 --> 00:15:32,079
or even tried to implement the app cache

00:15:30,399 --> 00:15:34,160
to include to create an

00:15:32,079 --> 00:15:35,680
offline capable website before then you

00:15:34,160 --> 00:15:38,000
will know the pain

00:15:35,680 --> 00:15:39,279
and service worker was created in order

00:15:38,000 --> 00:15:41,600
to

00:15:39,279 --> 00:15:43,759
make that pain go away somewhat give us

00:15:41,600 --> 00:15:46,639
a lot more control

00:15:43,759 --> 00:15:47,680
over uh offline capabilities of web

00:15:46,639 --> 00:15:50,720
browsers

00:15:47,680 --> 00:15:53,040
and and sites

00:15:50,720 --> 00:15:54,160
but what happened is we were lucky

00:15:53,040 --> 00:15:55,920
enough that we now have a piece of

00:15:54,160 --> 00:15:58,240
javascript that runs in the background

00:15:55,920 --> 00:16:01,120
within the within the web within the

00:15:58,240 --> 00:16:01,839
browser uh that can react to other

00:16:01,120 --> 00:16:03,920
events

00:16:01,839 --> 00:16:05,839
uh and so this has brought around the

00:16:03,920 --> 00:16:06,720
herald of actual real push notifications

00:16:05,839 --> 00:16:08,720
as well

00:16:06,720 --> 00:16:11,040
so it's not just for offline it is for

00:16:08,720 --> 00:16:13,440
um bringing things back into focus

00:16:11,040 --> 00:16:15,040
that that code can live there wait for

00:16:13,440 --> 00:16:16,639
events of any sort

00:16:15,040 --> 00:16:19,519
and and create a an actual real

00:16:16,639 --> 00:16:22,160
notification service worker support

00:16:19,519 --> 00:16:23,600
is coming in browsers we have it in

00:16:22,160 --> 00:16:25,759
since chrome 40.

00:16:23,600 --> 00:16:26,880
um it's behind a flag in firefox right

00:16:25,759 --> 00:16:30,959
now

00:16:26,880 --> 00:16:33,120
it's in opera 24 safari

00:16:30,959 --> 00:16:33,120
i

00:16:34,480 --> 00:16:37,040
and this is where i think under

00:16:35,519 --> 00:16:38,720
consideration is more important who

00:16:37,040 --> 00:16:40,880
knows what safari is thinking

00:16:38,720 --> 00:16:42,639
if anybody is out there from apple or

00:16:40,880 --> 00:16:42,959
out on the live stream or whatever or

00:16:42,639 --> 00:16:45,759
know

00:16:42,959 --> 00:16:46,160
somebody at apple please ask them to be

00:16:45,759 --> 00:16:47,600
a little

00:16:46,160 --> 00:16:50,079
more open with what we're doing here

00:16:47,600 --> 00:16:52,320
because um it's very hard to guess

00:16:50,079 --> 00:16:53,120
what's actually going on um so this is

00:16:52,320 --> 00:16:55,519
service worker

00:16:53,120 --> 00:16:57,199
support um support for push

00:16:55,519 --> 00:16:59,920
notifications within service workers

00:16:57,199 --> 00:17:02,160
actually started in chrome 42

00:16:59,920 --> 00:17:04,400
which is the most recent chrome so

00:17:02,160 --> 00:17:07,280
that's what i'm running right now um

00:17:04,400 --> 00:17:08,240
it is uh behind the flag in firefox and

00:17:07,280 --> 00:17:11,120
does

00:17:08,240 --> 00:17:13,520
i haven't tried it yet but it it it's

00:17:11,120 --> 00:17:15,039
there it's waiting to emerge

00:17:13,520 --> 00:17:16,880
uh i actually cannot find any

00:17:15,039 --> 00:17:19,039
documentation on opera and whether they

00:17:16,880 --> 00:17:23,439
are supporting this just yet

00:17:19,039 --> 00:17:26,480
and i i have some theories as to why um

00:17:23,439 --> 00:17:28,319
apple actually has a non-standard

00:17:26,480 --> 00:17:30,320
way of doing push notifications into

00:17:28,319 --> 00:17:32,400
safari um

00:17:30,320 --> 00:17:34,640
and this is all based around the same

00:17:32,400 --> 00:17:36,799
stuff they do for ios notifications

00:17:34,640 --> 00:17:37,840
and this is why the notification object

00:17:36,799 --> 00:17:40,720
only works

00:17:37,840 --> 00:17:42,160
within os 10.8 and beyond because that

00:17:40,720 --> 00:17:43,919
is when notification center

00:17:42,160 --> 00:17:45,360
appeared and that is where we can get

00:17:43,919 --> 00:17:47,520
notifications into it

00:17:45,360 --> 00:17:48,559
however in order to set up uh

00:17:47,520 --> 00:17:52,240
notifications

00:17:48,559 --> 00:17:53,600
into safari you need to um

00:17:52,240 --> 00:17:55,120
you need to go through all the hassle

00:17:53,600 --> 00:17:56,480
that any ios developer does with

00:17:55,120 --> 00:17:58,480
certificates and

00:17:56,480 --> 00:18:00,240
logging into the apple thing all sorts

00:17:58,480 --> 00:18:01,280
of horrible stuff

00:18:00,240 --> 00:18:02,480
if you really really want push

00:18:01,280 --> 00:18:03,280
notifications and you want to support

00:18:02,480 --> 00:18:04,960
these browsers

00:18:03,280 --> 00:18:07,200
and you're happy to go off standard then

00:18:04,960 --> 00:18:09,039
safari does have it

00:18:07,200 --> 00:18:11,200
um and finally internet explorer is

00:18:09,039 --> 00:18:12,559
under consideration as you can imagine

00:18:11,200 --> 00:18:14,480
uh you know they're doing good stuff

00:18:12,559 --> 00:18:15,280
let's uh i cannot wait to see the first

00:18:14,480 --> 00:18:17,600
um

00:18:15,280 --> 00:18:19,200
real live version of edge when it comes

00:18:17,600 --> 00:18:21,280
out in fact i should stop calling

00:18:19,200 --> 00:18:22,720
internet explorer

00:18:21,280 --> 00:18:24,799
so let's write this let's see what

00:18:22,720 --> 00:18:26,080
happens here and let's get rid of all of

00:18:24,799 --> 00:18:29,600
these

00:18:26,080 --> 00:18:33,919
it's not going to work oops

00:18:29,600 --> 00:18:35,280
okay cool so if we go back over here

00:18:33,919 --> 00:18:37,200
i don't know why that doesn't work all

00:18:35,280 --> 00:18:40,000
right what we're going to do

00:18:37,200 --> 00:18:41,120
is we're going to get a service worker

00:18:40,000 --> 00:18:44,320
promise

00:18:41,120 --> 00:18:46,520
so there's more uh stuff here that

00:18:44,320 --> 00:18:47,919
is of course new um so we've got

00:18:46,520 --> 00:18:49,120
navigator.serviceworker

00:18:47,919 --> 00:18:50,720
and we're going to register as

00:18:49,120 --> 00:18:52,440
serviceworker i'm going to register mine

00:18:50,720 --> 00:18:55,200
at

00:18:52,440 --> 00:18:56,640
serviceworker.js you can pass more

00:18:55,200 --> 00:18:58,240
options to that including a scope for

00:18:56,640 --> 00:18:58,960
service workers so where they can work

00:18:58,240 --> 00:19:01,280
within your

00:18:58,960 --> 00:19:02,640
uh website but this is a very vanilla

00:19:01,280 --> 00:19:04,320
one and let's say we're not doing

00:19:02,640 --> 00:19:07,360
anything with caching today

00:19:04,320 --> 00:19:08,799
so uh this is uh all we're going to do

00:19:07,360 --> 00:19:10,799
so we'll register that service worker

00:19:08,799 --> 00:19:12,960
and then down here in when we click the

00:19:10,799 --> 00:19:14,880
button

00:19:12,960 --> 00:19:16,160
uh that service worker promise i'm going

00:19:14,880 --> 00:19:18,640
to allow to resolve

00:19:16,160 --> 00:19:19,440
uh or not to resolve and then it and

00:19:18,640 --> 00:19:23,039
with that

00:19:19,440 --> 00:19:26,080
in there we get a registration

00:19:23,039 --> 00:19:27,120
that is our service worker registration

00:19:26,080 --> 00:19:29,280
and with that service worker

00:19:27,120 --> 00:19:32,559
registration

00:19:29,280 --> 00:19:35,919
we can get a push manager and that push

00:19:32,559 --> 00:19:35,919
manager we want to subscribe to

00:19:36,080 --> 00:19:41,480
and again that will return as a promise

00:19:39,120 --> 00:19:44,480
which when it works we'll get a

00:19:41,480 --> 00:19:44,480
subscription

00:19:46,160 --> 00:19:52,000
uh okay and with that subscription

00:19:49,919 --> 00:19:53,039
uh we actually want to uh so this is

00:19:52,000 --> 00:19:56,640
this is fairly simple

00:19:53,039 --> 00:19:58,640
um i have a an endpoint uh down here

00:19:56,640 --> 00:20:00,480
uh which is just a get with the to the

00:19:58,640 --> 00:20:02,480
sub and it's going to take the sub

00:20:00,480 --> 00:20:04,480
id out of it and save that to a global

00:20:02,480 --> 00:20:07,679
variable this is not a pretty

00:20:04,480 --> 00:20:08,080
application but it does uh the uh the it

00:20:07,679 --> 00:20:10,880
has the

00:20:08,080 --> 00:20:12,240
right idea so we're going to um with our

00:20:10,880 --> 00:20:13,200
subscription we're just going to use the

00:20:12,240 --> 00:20:16,080
fetch api

00:20:13,200 --> 00:20:17,280
isn't fetch lovely and we're going to go

00:20:16,080 --> 00:20:21,200
after sub

00:20:17,280 --> 00:20:24,320
and the sub id is

00:20:21,200 --> 00:20:27,919
the subscription dot

00:20:24,320 --> 00:20:27,919
subscription id

00:20:28,720 --> 00:20:33,919
cool fetch returns a promise as well but

00:20:30,480 --> 00:20:34,559
i'm fairly sure that's going to work

00:20:33,919 --> 00:20:38,080
long as i

00:20:34,559 --> 00:20:40,640
close the string uh that

00:20:38,080 --> 00:20:41,520
all works and so if we go back in here

00:20:40,640 --> 00:20:42,640
i'm just going to uh

00:20:41,520 --> 00:20:44,880
i'm just going to show you this was our

00:20:42,640 --> 00:20:46,400
this is our twitter client that's

00:20:44,880 --> 00:20:48,720
that is streaming things into the

00:20:46,400 --> 00:20:50,480
browser uh it is streaming things into

00:20:48,720 --> 00:20:52,400
that sorry that event stream that we had

00:20:50,480 --> 00:20:55,440
but also and i'm not going to type this

00:20:52,400 --> 00:20:55,440
bit out because it's a bit dull

00:20:56,320 --> 00:21:00,799
this is a bit of code to use google

00:20:59,360 --> 00:21:02,640
cloud messaging

00:21:00,799 --> 00:21:04,320
google cloud messaging is the thing that

00:21:02,640 --> 00:21:06,559
powers uh android

00:21:04,320 --> 00:21:08,559
notifications uh so it's fairly well

00:21:06,559 --> 00:21:10,720
battled tested and has a few

00:21:08,559 --> 00:21:12,559
um has libraries in most languages for

00:21:10,720 --> 00:21:14,960
you already so this is using

00:21:12,559 --> 00:21:15,600
a node gcm library which creates a

00:21:14,960 --> 00:21:17,679
message

00:21:15,600 --> 00:21:19,440
fills it with data and i'll tell you why

00:21:17,679 --> 00:21:22,559
that's pointless later

00:21:19,440 --> 00:21:24,559
and then sends it off using our

00:21:22,559 --> 00:21:28,240
registration id that we saved

00:21:24,559 --> 00:21:30,799
that we're saving from that sub endpoint

00:21:28,240 --> 00:21:31,360
so once we've got that i'm actually

00:21:30,799 --> 00:21:32,799
going to stop

00:21:31,360 --> 00:21:34,799
these notifications coming through

00:21:32,799 --> 00:21:36,480
because we don't need them anymore

00:21:34,799 --> 00:21:38,720
uh not least because you are sending me

00:21:36,480 --> 00:21:39,280
so many of them and this is our service

00:21:38,720 --> 00:21:41,600
worker

00:21:39,280 --> 00:21:43,440
um now within the service worker we then

00:21:41,600 --> 00:21:46,159
have to listen for some events

00:21:43,440 --> 00:21:48,880
um as we said at the start i also do

00:21:46,159 --> 00:21:50,720
ruby so i like the self keyword um

00:21:48,880 --> 00:21:51,919
but the self refers to the service

00:21:50,720 --> 00:21:55,200
worker itself

00:21:51,919 --> 00:21:56,840
and at least it's not this so what we

00:21:55,200 --> 00:21:59,840
can listen to

00:21:56,840 --> 00:22:01,760
is

00:21:59,840 --> 00:22:04,159
we can listen to push and we'll get an

00:22:01,760 --> 00:22:04,159
event

00:22:05,919 --> 00:22:11,360
and with that we can do some stuff

00:22:09,039 --> 00:22:12,559
now the problem with so as i showed you

00:22:11,360 --> 00:22:15,120
back over here

00:22:12,559 --> 00:22:16,559
i'm sending some data which should be

00:22:15,120 --> 00:22:19,760
the

00:22:16,559 --> 00:22:21,679
tweet handle and the text but right now

00:22:19,760 --> 00:22:23,679
in the current version of push

00:22:21,679 --> 00:22:24,559
notifications that data does not get

00:22:23,679 --> 00:22:26,720
sent back to us

00:22:24,559 --> 00:22:28,159
that is coming but it does not get sent

00:22:26,720 --> 00:22:31,679
back to us

00:22:28,159 --> 00:22:32,400
so what i'm going to do uh is event.wait

00:22:31,679 --> 00:22:35,679
until

00:22:32,400 --> 00:22:37,679
uh wait until makes the service worker

00:22:35,679 --> 00:22:39,280
allows you to do some more promise based

00:22:37,679 --> 00:22:40,159
actions and will not close the service

00:22:39,280 --> 00:22:42,080
worker down

00:22:40,159 --> 00:22:44,400
until it's done with and this is useful

00:22:42,080 --> 00:22:45,679
because uh again another security thing

00:22:44,400 --> 00:22:47,120
with this is when you ask to send

00:22:45,679 --> 00:22:48,960
notifications via this

00:22:47,120 --> 00:22:50,880
you need to actually send notifications

00:22:48,960 --> 00:22:51,520
otherwise the browser will make one for

00:22:50,880 --> 00:22:54,159
you

00:22:51,520 --> 00:22:54,640
and who knows what it says so you wait

00:22:54,159 --> 00:22:57,280
until

00:22:54,640 --> 00:22:58,640
this bit uh finishes and that's what

00:22:57,280 --> 00:23:00,480
happens so i have an endpoint called

00:22:58,640 --> 00:23:01,600
latest on my server which is going to go

00:23:00,480 --> 00:23:03,919
to the twitter api

00:23:01,600 --> 00:23:05,200
and get the latest tweet and send it

00:23:03,919 --> 00:23:08,880
back to me

00:23:05,200 --> 00:23:12,720
so fetch latest and when i get that back

00:23:08,880 --> 00:23:17,200
um oops that's a function obviously

00:23:12,720 --> 00:23:19,840
with some data uh that data

00:23:17,200 --> 00:23:20,480
i'm going to parse the json out of which

00:23:19,840 --> 00:23:22,400
is another

00:23:20,480 --> 00:23:24,640
nice little function based thing uh

00:23:22,400 --> 00:23:28,720
sorry promise-based thing

00:23:24,640 --> 00:23:28,720
and that's going to have my message

00:23:29,280 --> 00:23:33,200
and then finally we're allowed to take

00:23:31,679 --> 00:23:35,360
our

00:23:33,200 --> 00:23:37,120
registration and we can call show

00:23:35,360 --> 00:23:39,120
notification show notification

00:23:37,120 --> 00:23:40,559
is effectively the same api as the

00:23:39,120 --> 00:23:43,039
notification object

00:23:40,559 --> 00:23:44,600
in which we send in a title we've seen

00:23:43,039 --> 00:23:48,559
this before

00:23:44,600 --> 00:23:52,240
message.from and we send in an object

00:23:48,559 --> 00:23:57,679
which will put the rest of the uh

00:23:52,240 --> 00:23:57,679
text in message oops message.body

00:23:58,400 --> 00:24:02,000
uh cool so that will uh eventually

00:24:01,120 --> 00:24:03,520
resolve our promise

00:24:02,000 --> 00:24:05,120
and that's all done and we'll show a

00:24:03,520 --> 00:24:06,880
notification i'm gonna do one more thing

00:24:05,120 --> 00:24:10,159
before i actually reload this with my

00:24:06,880 --> 00:24:12,159
uh with my thing and we can listen for

00:24:10,159 --> 00:24:19,279
the notification

00:24:12,159 --> 00:24:22,320
click event

00:24:19,279 --> 00:24:24,080
and with that uh we then

00:24:22,320 --> 00:24:25,279
because we can actually close our uh

00:24:24,080 --> 00:24:26,559
browser window at this point we can

00:24:25,279 --> 00:24:28,080
close out of our website

00:24:26,559 --> 00:24:30,000
uh with this it allows us to bring us

00:24:28,080 --> 00:24:33,120
back in to

00:24:30,000 --> 00:24:34,480
uh the uh to the site that we're getting

00:24:33,120 --> 00:24:36,559
the notifications from

00:24:34,480 --> 00:24:38,400
so simply for now i'm going to open the

00:24:36,559 --> 00:24:42,080
window into

00:24:38,400 --> 00:24:44,840
uh oops

00:24:42,080 --> 00:24:47,840
again we should wait wait until this

00:24:44,840 --> 00:24:47,840
happens

00:24:49,520 --> 00:24:55,600
cool so that is uh my service worker

00:24:53,360 --> 00:24:57,200
that's all running so let's go back to

00:24:55,600 --> 00:24:59,520
the browser

00:24:57,200 --> 00:25:02,720
here they all are it's come out of full

00:24:59,520 --> 00:25:06,000
screen because that's not what we want

00:25:02,720 --> 00:25:07,120
refresh that we're going to get the

00:25:06,000 --> 00:25:10,400
notifications which

00:25:07,120 --> 00:25:12,159
would uh bring up the um permissions

00:25:10,400 --> 00:25:14,559
if we hadn't already allowed real other

00:25:12,159 --> 00:25:16,799
notifications and that has sent

00:25:14,559 --> 00:25:17,919
my subscription id which is a big long

00:25:16,799 --> 00:25:19,120
random string as you can see at the

00:25:17,919 --> 00:25:22,240
bottom down there

00:25:19,120 --> 00:25:22,799
that means i'm ready to close that that

00:25:22,240 --> 00:25:24,720
is the

00:25:22,799 --> 00:25:26,400
service worker internals page that

00:25:24,720 --> 00:25:28,480
allows you to check on what running

00:25:26,400 --> 00:25:29,600
service workers are doing and so we

00:25:28,480 --> 00:25:31,039
don't have our

00:25:29,600 --> 00:25:32,880
we don't have the website open we do not

00:25:31,039 --> 00:25:35,919
have our notification site thing open

00:25:32,880 --> 00:25:37,679
so if you start sending um tweets

00:25:35,919 --> 00:25:40,960
once more we will eventually start to

00:25:37,679 --> 00:25:44,400
see things coming back through

00:25:40,960 --> 00:25:46,159
i will start to wrap up uh a little bit

00:25:44,400 --> 00:25:47,200
uh just waiting for those but what we

00:25:46,159 --> 00:25:48,640
should see isn't start to come through

00:25:47,200 --> 00:25:50,480
please somebody send a tweet

00:25:48,640 --> 00:25:51,840
um and i want to finish with a couple of

00:25:50,480 --> 00:25:54,880
uh uh

00:25:51,840 --> 00:25:56,960
a couple of things about it um

00:25:54,880 --> 00:25:58,640
i just want to say like notifications

00:25:56,960 --> 00:26:01,200
are annoying um

00:25:58,640 --> 00:26:02,799
they can be if you do them wrong uh

00:26:01,200 --> 00:26:03,520
there are some guidelines that are being

00:26:02,799 --> 00:26:05,440
set out

00:26:03,520 --> 00:26:07,600
about how to do notifications right and

00:26:05,440 --> 00:26:10,799
i i recommend that before

00:26:07,600 --> 00:26:12,559
uh you decide to start

00:26:10,799 --> 00:26:14,320
any of this read what the best way to

00:26:12,559 --> 00:26:16,320
deal with this is allow people to

00:26:14,320 --> 00:26:18,559
opt in and out of all the notifications

00:26:16,320 --> 00:26:20,000
you can please do not send annoying

00:26:18,559 --> 00:26:21,200
notifications like the twitter

00:26:20,000 --> 00:26:23,120
application does

00:26:21,200 --> 00:26:25,120
because seriously nobody cares about

00:26:23,120 --> 00:26:27,360
grey's anatomy

00:26:25,120 --> 00:26:28,159
and we didn't get any through so let me

00:26:27,360 --> 00:26:31,440
just pop

00:26:28,159 --> 00:26:32,559
oops i'll just pop back to that

00:26:31,440 --> 00:26:34,640
what we should be able to do is close

00:26:32,559 --> 00:26:35,120
the thing and notifications would in

00:26:34,640 --> 00:26:37,360
fact

00:26:35,120 --> 00:26:39,840
pop in at the side when you go and click

00:26:37,360 --> 00:26:39,840
that notification

00:26:40,960 --> 00:26:44,720
it will reopen the browser back to the

00:26:43,200 --> 00:26:47,039
site you're on

00:26:44,720 --> 00:26:49,440
cool so that is kind of all i want to

00:26:47,039 --> 00:26:50,960
say i have one tiny little announcement

00:26:49,440 --> 00:26:52,640
that next week if you happen to be in

00:26:50,960 --> 00:26:54,240
san francisco it's possible

00:26:52,640 --> 00:26:55,360
uh or if you want to go or if you have

00:26:54,240 --> 00:26:56,080
somebody who's willing to fly you out

00:26:55,360 --> 00:26:57,440
there right now

00:26:56,080 --> 00:26:59,279
uh twilio holding a conference called

00:26:57,440 --> 00:27:00,320
signal it is about modern communications

00:26:59,279 --> 00:27:02,320
and it's about

00:27:00,320 --> 00:27:04,320
talking to your customers talking to

00:27:02,320 --> 00:27:06,000
users and communicating with them as

00:27:04,320 --> 00:27:08,480
best you can in all the ways we know

00:27:06,000 --> 00:27:10,080
how to do on the web uh if you use the

00:27:08,480 --> 00:27:12,240
promo code nash 20 you get 20

00:27:10,080 --> 00:27:13,520
off a ticket and that is all i want to

00:27:12,240 --> 00:27:15,360
say about that

00:27:13,520 --> 00:27:17,360
so uh thank you very much for bearing

00:27:15,360 --> 00:27:19,120
with me uh for sending tweets

00:27:17,360 --> 00:27:20,320
that is push notifications and how we

00:27:19,120 --> 00:27:22,080
can make the web a little bit more

00:27:20,320 --> 00:27:24,300
interesting a little bit more native

00:27:22,080 --> 00:27:31,520
uh thank you very much

00:27:24,300 --> 00:27:34,640
[Applause]

00:27:31,520 --> 00:27:36,799
and now couch time i'm

00:27:34,640 --> 00:27:38,080
we're just going to have a nap because

00:27:36,799 --> 00:27:41,440
there are no questions

00:27:38,080 --> 00:27:42,880
okay so before you think about everyone

00:27:41,440 --> 00:27:44,720
thinks about questions because i haven't

00:27:42,880 --> 00:27:47,440
seen anything on twitter

00:27:44,720 --> 00:27:48,640
reminder use twitter to ask questions

00:27:47,440 --> 00:27:51,600
speaking of which

00:27:48,640 --> 00:27:52,159
and please be very mindful of wi-fi

00:27:51,600 --> 00:27:54,720
because

00:27:52,159 --> 00:27:56,799
it's working pretty well right now so do

00:27:54,720 --> 00:28:00,159
not download your cat movies

00:27:56,799 --> 00:28:01,600
and stuff please so we can all actually

00:28:00,159 --> 00:28:03,520
like use twitter to ask questions and

00:28:01,600 --> 00:28:04,480
whatnot and just share everything with

00:28:03,520 --> 00:28:07,120
the hashtag

00:28:04,480 --> 00:28:08,000
which she did a great job of yesterday

00:28:07,120 --> 00:28:11,919
so

00:28:08,000 --> 00:28:14,880
speaking of questions anyone

00:28:11,919 --> 00:28:17,679
i mean that was pretty cool so i expect

00:28:14,880 --> 00:28:19,919
some questions

00:28:17,679 --> 00:28:21,840
can't see any hands oh there's one over

00:28:19,919 --> 00:28:24,960
here and there's one over there

00:28:21,840 --> 00:28:24,960
please don't fight over it

00:28:25,520 --> 00:28:29,120
all right thanks for the nice

00:28:27,200 --> 00:28:32,880
presentation do you know

00:28:29,120 --> 00:28:35,520
anything about the mobile support or

00:28:32,880 --> 00:28:36,480
how does these workers affect for

00:28:35,520 --> 00:28:40,080
example do

00:28:36,480 --> 00:28:42,080
to the devices better in life

00:28:40,080 --> 00:28:44,080
oh i have no idea about battery life i

00:28:42,080 --> 00:28:47,440
can tell you that right now

00:28:44,080 --> 00:28:49,360
mobile support this service worker with

00:28:47,440 --> 00:28:52,159
push notification is supported in

00:28:49,360 --> 00:28:52,880
chrome 42 that is both browser and

00:28:52,159 --> 00:28:56,080
android

00:28:52,880 --> 00:28:57,919
um so anybody using yeah the chrome and

00:28:56,080 --> 00:29:00,000
android can use this right now so that's

00:28:57,919 --> 00:29:02,480
where we can start to get these um

00:29:00,000 --> 00:29:03,279
notifications safari even with its

00:29:02,480 --> 00:29:07,039
non-standard

00:29:03,279 --> 00:29:08,159
notification way doesn't support that on

00:29:07,039 --> 00:29:10,320
ios yet

00:29:08,159 --> 00:29:11,679
again i hope to hear that they are

00:29:10,320 --> 00:29:12,960
interested in service workers are going

00:29:11,679 --> 00:29:14,480
to replace the whole thing

00:29:12,960 --> 00:29:16,080
oh one more thing i meant to say

00:29:14,480 --> 00:29:17,039
actually i was using google cloud

00:29:16,080 --> 00:29:19,440
messaging

00:29:17,039 --> 00:29:20,240
there to send the notifications through

00:29:19,440 --> 00:29:22,000
but

00:29:20,240 --> 00:29:24,159
apparently i've been told that google

00:29:22,000 --> 00:29:26,159
and mozilla are in fact working together

00:29:24,159 --> 00:29:27,600
on a standard called web push which will

00:29:26,159 --> 00:29:29,760
allow

00:29:27,600 --> 00:29:31,279
not google to have to you know you don't

00:29:29,760 --> 00:29:32,640
have to put it through google or

00:29:31,279 --> 00:29:33,840
mozilla's servers or something like that

00:29:32,640 --> 00:29:34,399
there will be a standard for this

00:29:33,840 --> 00:29:36,640
hopefully

00:29:34,399 --> 00:29:38,960
so yes sorry don't know about battery

00:29:36,640 --> 00:29:42,240
life chrome 42

00:29:38,960 --> 00:29:44,080
i think from like what i recall um jake

00:29:42,240 --> 00:29:46,399
archibald has a website

00:29:44,080 --> 00:29:47,600
for like updates for service workers is

00:29:46,399 --> 00:29:51,039
service worker ready

00:29:47,600 --> 00:29:52,399
yet yeah exactly so if you want any

00:29:51,039 --> 00:29:53,120
information about that go to that

00:29:52,399 --> 00:29:55,039
website or

00:29:53,120 --> 00:29:57,279
pancake because he's amazing and i hope

00:29:55,039 --> 00:30:08,159
he's watching absolutely

00:29:57,279 --> 00:30:11,440
next question

00:30:08,159 --> 00:30:15,039
more questions no that was a fake

00:30:11,440 --> 00:30:17,520
question that's not cool don't do that

00:30:15,039 --> 00:30:19,039
uh someone upstairs there is a question

00:30:17,520 --> 00:30:22,480
over there or are you just like

00:30:19,039 --> 00:30:26,480
stretching because i can't tell

00:30:22,480 --> 00:30:28,799
questions uh

00:30:26,480 --> 00:30:37,840
does twilio have plans to support this

00:30:28,799 --> 00:30:37,840
kind of technology anytime soon

00:30:41,520 --> 00:30:44,880
if you're interested in that uh kind of

00:30:43,360 --> 00:30:45,840
thing i would probably try and pay

00:30:44,880 --> 00:30:48,960
attention to

00:30:45,840 --> 00:30:50,559
uh the proceedings that signal where any

00:30:48,960 --> 00:30:52,480
kind of official announcements

00:30:50,559 --> 00:30:56,240
may or may not be made but i have

00:30:52,480 --> 00:30:57,760
nothing i can tell you on that right now

00:30:56,240 --> 00:30:59,200
which basically means there will be

00:30:57,760 --> 00:30:59,600
something but i can tell you right now

00:30:59,200 --> 00:31:02,640
just

00:30:59,600 --> 00:31:02,640
go to the conference

00:31:02,799 --> 00:31:06,480
any more questions we have well maybe

00:31:06,159 --> 00:31:10,000
like

00:31:06,480 --> 00:31:11,840
time for two more upstairs wake up

00:31:10,000 --> 00:31:14,159
they're still they were like sleeping

00:31:11,840 --> 00:31:16,080
all day yesterday i don't know what's up

00:31:14,159 --> 00:31:19,840
i mean we can't throw the mic or you can

00:31:16,080 --> 00:31:19,840
shout at us

00:31:31,279 --> 00:31:34,320
so there's a lot of work and a lot of

00:31:32,720 --> 00:31:35,360
thought being put into this and this is

00:31:34,320 --> 00:31:37,519
why we are

00:31:35,360 --> 00:31:38,640
uh hiding as many things as we can

00:31:37,519 --> 00:31:40,880
behind uh

00:31:38,640 --> 00:31:41,840
permissions and things like that uh in

00:31:40,880 --> 00:31:45,440
terms of

00:31:41,840 --> 00:31:46,320
uh security uh it's as secure as any

00:31:45,440 --> 00:31:47,919
other

00:31:46,320 --> 00:31:50,080
javascript that you can and write in

00:31:47,919 --> 00:31:52,080
effect to happen on the page

00:31:50,080 --> 00:31:53,519
um the service worker itself is somewhat

00:31:52,080 --> 00:31:55,760
sandboxed um

00:31:53,519 --> 00:31:57,039
uh it can affect things back onto the

00:31:55,760 --> 00:32:00,960
host page

00:31:57,039 --> 00:32:03,120
via kind of post messages um but

00:32:00,960 --> 00:32:04,399
i i i don't know in depth about actual

00:32:03,120 --> 00:32:07,840
um security

00:32:04,399 --> 00:32:07,840
implications of it but um

00:32:08,480 --> 00:32:11,200
they are thinking very hard about it as

00:32:09,840 --> 00:32:12,080
they come up with this stuff so that we

00:32:11,200 --> 00:32:15,840
can't

00:32:12,080 --> 00:32:17,679
cause trouble okay there's

00:32:15,840 --> 00:32:19,200
there's a question on twitter and that

00:32:17,679 --> 00:32:22,480
would be the last question

00:32:19,200 --> 00:32:25,600
um is the recommended interval for push

00:32:22,480 --> 00:32:29,279
notifications recommended interval

00:32:25,600 --> 00:32:31,120
for potion uh that's a that's a great

00:32:29,279 --> 00:32:32,799
point brought up i suppose by the

00:32:31,120 --> 00:32:34,320
barrage of notifications that i was

00:32:32,799 --> 00:32:37,120
getting on screen at one point

00:32:34,320 --> 00:32:37,840
um as as you could see chrome was

00:32:37,120 --> 00:32:39,519
limiting

00:32:37,840 --> 00:32:41,200
to kind of three on the page at any one

00:32:39,519 --> 00:32:44,640
time

00:32:41,200 --> 00:32:47,120
if you are going to i would um

00:32:44,640 --> 00:32:48,399
very much kind of play that by ear i

00:32:47,120 --> 00:32:50,000
don't think there is a recommendation it

00:32:48,399 --> 00:32:51,760
depends on what you're trying to notify

00:32:50,000 --> 00:32:53,279
like if everything is super important

00:32:51,760 --> 00:32:54,720
if everything is super important

00:32:53,279 --> 00:32:56,320
somebody needs to see everything then

00:32:54,720 --> 00:32:59,600
you've got to send everything right

00:32:56,320 --> 00:33:00,320
but if if it is just kind of um you know

00:32:59,600 --> 00:33:02,000
emails

00:33:00,320 --> 00:33:03,760
coming in or something like that like

00:33:02,000 --> 00:33:06,000
yeah and somebody gets three in a row

00:33:03,760 --> 00:33:07,279
probably back off a bit or say make the

00:33:06,000 --> 00:33:09,440
notifications say

00:33:07,279 --> 00:33:11,039
there's three uh emails coming in i

00:33:09,440 --> 00:33:14,320
think it really does depend on your use

00:33:11,039 --> 00:33:14,320
case in that particular case

00:33:14,640 --> 00:33:21,200
okay i think we're out of time sadly

00:33:17,840 --> 00:33:22,320
but i think everyone is awake now i i'm

00:33:21,200 --> 00:33:24,480
definitely awake

00:33:22,320 --> 00:33:26,159
although we need more cat gifts i think

00:33:24,480 --> 00:33:27,840
i think next speakers

00:33:26,159 --> 00:33:30,080
should actually just like change their

00:33:27,840 --> 00:33:32,320
slides and just include cat gifts

00:33:30,080 --> 00:33:33,760
well people send them in it's fine okay

00:33:32,320 --> 00:33:38,080
thank you phil that was amazing

00:33:33,760 --> 00:33:48,880
thank you very much

00:33:38,080 --> 00:33:48,880

YouTube URL: https://www.youtube.com/watch?v=7X6k6zxkzaI


