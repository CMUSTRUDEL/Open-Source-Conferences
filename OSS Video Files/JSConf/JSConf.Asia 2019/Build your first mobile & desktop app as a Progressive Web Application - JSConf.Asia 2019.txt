Title: Build your first mobile & desktop app as a Progressive Web Application - JSConf.Asia 2019
Publication date: 2019-07-05
Playlist: JSConf.Asia 2019
Description: 
	Speaker: Noorulameen & Ritesh Mehrotra

Let's build PWA application with native mobile features such as push notification, background sync which will seamlessly work across Android, iOS, Windows, Mac and Linux.

Requirements:
Bring a laptop. Attendees should make sure that they have their favourite code editor, an up-to-date version of Google Chrome as well as NodeJS installed (either LTS or Current)

Noorul works as a front-end development lead at Credit Suisse. His interests are Micro Front-ends, Progressive Web Applications and recently started exploring React Native. He is one of the co-organizer of an active meetup group "Tech Talks" in Singapore. When he is not programming, he likes to travel and play badminton. 

Ritesh is a keen web developer and agile consultant. Spends most of his time in agile consulting and technical training with multiple teams, with focus on micro service and micro-front end development. He is an advocate of XP development practices, and co-organizer of the popular meetup based tech community - "TechTalks". On a leisure day, you might spot him with a camera on Singapore streets.

Event Page: https://2019.jsconf.asia/

Produced by Engineers.SG

Help us caption & translate this video!

https://amara.org/v/pl3o/
Captions: 
	00:00:02,330 --> 00:00:06,960
[Music]

00:00:36,200 --> 00:00:43,260
okay good afternoon everybody

00:00:40,200 --> 00:00:46,860
so I'm Narula main I work as a front-end

00:00:43,260 --> 00:00:49,200
development lead in credits ways and I

00:00:46,860 --> 00:00:50,969
am a conference speaker also I used to

00:00:49,200 --> 00:00:53,610
talk about micro front-ends progressive

00:00:50,969 --> 00:00:56,190
web applications and we have a

00:00:53,610 --> 00:00:58,920
co-organizer of one of the meetup group

00:00:56,190 --> 00:01:01,739
called tech boxing appu so yeah please

00:00:58,920 --> 00:01:04,340
join and then you come to a talk so if

00:01:01,739 --> 00:01:04,340
you're interested

00:01:12,030 --> 00:01:15,350
[Laughter]

00:01:48,390 --> 00:01:51,519
[Music]

00:01:55,549 --> 00:02:03,360
okay agenda since shop you don't want to

00:02:00,360 --> 00:02:05,009
talk much on the slides but we

00:02:03,360 --> 00:02:07,319
understand that it's good to have a

00:02:05,009 --> 00:02:09,569
basic understanding of what is PWA and

00:02:07,319 --> 00:02:11,099
why do we need pw8 and the building

00:02:09,569 --> 00:02:13,709
blocks which enables building

00:02:11,099 --> 00:02:14,640
progressive web applications and then

00:02:13,709 --> 00:02:17,430
you will state awake

00:02:14,640 --> 00:02:20,190
dive into developing an app or I would

00:02:17,430 --> 00:02:22,680
say converting an existing app into a

00:02:20,190 --> 00:02:24,569
progressive web app and then we will be

00:02:22,680 --> 00:02:28,859
deploying it and testing it across

00:02:24,569 --> 00:02:30,060
Android iOS Mac and Windows okay just to

00:02:28,859 --> 00:02:31,980
get an idea how many are already

00:02:30,060 --> 00:02:33,650
familiar with progressive allocation

00:02:31,980 --> 00:02:36,660
what it's all about

00:02:33,650 --> 00:02:39,680
okay so how many of you kind of

00:02:36,660 --> 00:02:42,359
developed something and so on experience

00:02:39,680 --> 00:02:43,950
no that's good so what you are going to

00:02:42,359 --> 00:02:46,500
do is we are going to start from the

00:02:43,950 --> 00:02:50,840
basics so that everybody gets familiar

00:02:46,500 --> 00:02:50,840
and then they can try on their own

00:02:52,670 --> 00:02:57,120
what is PWA there are so many

00:02:55,050 --> 00:03:00,260
definitions of progressive web

00:02:57,120 --> 00:03:04,860
applications so one of my favorite is

00:03:00,260 --> 00:03:08,190
this one it's combining best of web and

00:03:04,860 --> 00:03:11,849
best of native apps okay so we all know

00:03:08,190 --> 00:03:13,080
like the best of web web is like you can

00:03:11,849 --> 00:03:14,519
just click a link and access an

00:03:13,080 --> 00:03:17,069
application and then you can do whatever

00:03:14,519 --> 00:03:20,010
you want and it's like works across all

00:03:17,069 --> 00:03:21,599
devices all operating systems so you

00:03:20,010 --> 00:03:23,940
don't need to kind of a specifically

00:03:21,599 --> 00:03:26,250
download iOS app or develop iOS Airport

00:03:23,940 --> 00:03:28,590
native apps and also web is inclusive

00:03:26,250 --> 00:03:30,810
everybody in the world can access to the

00:03:28,590 --> 00:03:33,989
web so irrespective of whether what

00:03:30,810 --> 00:03:35,910
device they have ok I'm the best of

00:03:33,989 --> 00:03:38,370
native apps the native apps are really

00:03:35,910 --> 00:03:40,739
good I think all of us have used apps

00:03:38,370 --> 00:03:44,280
and then we have smart ones tons of apps

00:03:40,739 --> 00:03:46,739
on the homescreen and the best part

00:03:44,280 --> 00:03:50,160
about native apps are like take you very

00:03:46,739 --> 00:03:52,500
good user experience so they also engage

00:03:50,160 --> 00:03:55,530
the users like push notification and all

00:03:52,500 --> 00:04:03,140
those things which are not available in

00:03:55,530 --> 00:04:03,140
their before and ok sure

00:04:11,410 --> 00:04:14,410
yep

00:04:24,800 --> 00:04:30,280
okay so we have we have just seen what

00:04:27,470 --> 00:04:34,819
is pw8 and some of the features of PWA

00:04:30,280 --> 00:04:37,430
first of all why do we need PWA so these

00:04:34,819 --> 00:04:40,430
are statistics you see the left hand

00:04:37,430 --> 00:04:44,389
side is average monthly unique visitors

00:04:40,430 --> 00:04:47,060
you see app has a score of seven and the

00:04:44,389 --> 00:04:49,370
web has fifteen point seven the reach of

00:04:47,060 --> 00:04:52,400
the web is way higher than the app on

00:04:49,370 --> 00:04:54,889
the other side average monthly minutes

00:04:52,400 --> 00:04:57,860
per visitor how much time they spend in

00:04:54,889 --> 00:05:04,460
the web or app you see app they spend

00:04:57,860 --> 00:05:07,639
more time compared to the web so why is

00:05:04,460 --> 00:05:10,190
it why the engagement is slower in the

00:05:07,639 --> 00:05:12,169
web constraints on the mobile web it has

00:05:10,190 --> 00:05:15,830
a greater reach but lacks on the

00:05:12,169 --> 00:05:21,139
richness the usability the richness and

00:05:15,830 --> 00:05:23,259
the engagement is lacking unlimited

00:05:21,139 --> 00:05:23,259
access

00:05:24,940 --> 00:05:31,310
let's see the constraints on the app

00:05:27,770 --> 00:05:34,130
side the native apps now problem with

00:05:31,310 --> 00:05:36,680
the native apps or let's say if you want

00:05:34,130 --> 00:05:37,880
to use an application in web you just

00:05:36,680 --> 00:05:39,110
click a link and then you see and then

00:05:37,880 --> 00:05:41,390
you decide whether you want to use it or

00:05:39,110 --> 00:05:43,070
not in apps first you have to know the

00:05:41,390 --> 00:05:45,050
name you have to go to the App Store or

00:05:43,070 --> 00:05:46,370
Android store under here to search for

00:05:45,050 --> 00:05:48,320
the application and then you have to see

00:05:46,370 --> 00:05:49,610
it and then you have to download it and

00:05:48,320 --> 00:05:50,870
then you have to install it and then you

00:05:49,610 --> 00:05:53,840
have to launch it and then if you don't

00:05:50,870 --> 00:05:57,370
like it delete it so the distribution

00:05:53,840 --> 00:05:57,370
problem is there in the native apps

00:05:57,940 --> 00:06:02,300
another problem is it's not all like

00:06:00,770 --> 00:06:04,700
Singapore and other developed countries

00:06:02,300 --> 00:06:06,260
we have a good network conditions in

00:06:04,700 --> 00:06:08,180
some of the countries the network is not

00:06:06,260 --> 00:06:10,190
reliable so if you want to download and

00:06:08,180 --> 00:06:12,310
I have before you can use it I think for

00:06:10,190 --> 00:06:14,750
example the 60m B app in one of the

00:06:12,310 --> 00:06:16,340
countries we visited took seven minutes

00:06:14,750 --> 00:06:18,050
just to download the user has to be

00:06:16,340 --> 00:06:20,360
patient for seven minutes to just

00:06:18,050 --> 00:06:24,230
download and then launch it and then try

00:06:20,360 --> 00:06:26,690
to see if it is useful the storage some

00:06:24,230 --> 00:06:28,460
of the users we might have a low-end

00:06:26,690 --> 00:06:30,320
devices which may not have lots of

00:06:28,460 --> 00:06:34,100
storage so it will be problem for their

00:06:30,320 --> 00:06:36,990
mouths phone and the cost of the network

00:06:34,100 --> 00:06:39,449
bandwidth the data

00:06:36,990 --> 00:06:41,819
okay so that's all so we just want to

00:06:39,449 --> 00:06:43,860
cover what is PW a and what we are

00:06:41,819 --> 00:06:45,240
trying to do in when one line you are

00:06:43,860 --> 00:06:48,690
trying to make the web application

00:06:45,240 --> 00:06:50,370
closer the native application and why

00:06:48,690 --> 00:06:52,229
there is a need for progressive web

00:06:50,370 --> 00:06:54,660
application even though we have a native

00:06:52,229 --> 00:06:56,639
mobile apps so now let's see the

00:06:54,660 --> 00:06:58,949
building blocks the last few years

00:06:56,639 --> 00:07:00,930
lots of good development happened on the

00:06:58,949 --> 00:07:03,750
progressive web application side which

00:07:00,930 --> 00:07:06,150
enables us to provide features which are

00:07:03,750 --> 00:07:08,190
close enough to native apps so I will

00:07:06,150 --> 00:07:09,690
give it to you - to talk about the

00:07:08,190 --> 00:07:13,280
building blocks which enabled

00:07:09,690 --> 00:07:13,280
progressive web applications

00:07:38,240 --> 00:07:52,780
and well as different women by now what

00:07:42,050 --> 00:07:52,780
do you like yes what more

00:07:55,490 --> 00:08:03,350
yeah notifications star bypass are

00:07:58,460 --> 00:08:05,120
interacting they talk to you whatever it

00:08:03,350 --> 00:08:07,099
is really so you could work on a mobile

00:08:05,120 --> 00:08:09,319
app even if you're not connected to

00:08:07,099 --> 00:08:11,360
internet you could play games you could

00:08:09,319 --> 00:08:14,860
do whatever things that you do on your

00:08:11,360 --> 00:08:14,860
app you could interact with it yes

00:08:22,800 --> 00:08:28,090
I'm a teacher so they are native so it

00:08:26,080 --> 00:08:31,840
has support from the operating systems

00:08:28,090 --> 00:08:34,060
whatever docking system or university

00:08:31,840 --> 00:08:35,740
has supported so that means essentially

00:08:34,060 --> 00:08:37,900
the performance of girls and things are

00:08:35,740 --> 00:08:40,000
there and mobile apps are out there with

00:08:37,900 --> 00:08:41,979
first class citizens in the whole wide

00:08:40,000 --> 00:08:44,440
world right if you have to excel at the

00:08:41,979 --> 00:08:46,390
lab okay find it except for the start of

00:08:44,440 --> 00:08:49,570
all your apps and if that eyes are

00:08:46,390 --> 00:08:51,850
congruent go to the browser and then if

00:08:49,570 --> 00:08:54,790
it is not responsive it would look

00:08:51,850 --> 00:09:02,130
immediately you would also sort of see

00:08:54,790 --> 00:09:07,860
that we have so many rules here and

00:09:02,130 --> 00:09:10,510
things that you buy mobile apps are the

00:09:07,860 --> 00:09:12,670
minimizations or anything so experience

00:09:10,510 --> 00:09:14,110
is minimal I know just exactly this one

00:09:12,670 --> 00:09:15,820
action that I think it takes in

00:09:14,110 --> 00:09:17,800
somewhere else and they do certain more

00:09:15,820 --> 00:09:20,080
actions alright so it gives you

00:09:17,800 --> 00:09:22,170
something to work while Web Apps gives

00:09:20,080 --> 00:09:25,440
you a lot of features in

00:09:22,170 --> 00:09:27,959
things get in there but then there are

00:09:25,440 --> 00:09:32,250
few other challenges as well between the

00:09:27,959 --> 00:09:34,800
pack maybe perhaps right if you do we

00:09:32,250 --> 00:09:36,420
live at the weapon you see you would

00:09:34,800 --> 00:09:39,089
have Android developers you would have

00:09:36,420 --> 00:09:42,060
us you have different as that usually

00:09:39,089 --> 00:09:43,550
you might be using some hybrid software

00:09:42,060 --> 00:09:47,430
technologies like the app native or

00:09:43,550 --> 00:09:49,320
self-protective but you still are in the

00:09:47,430 --> 00:09:54,899
molecule in fact we have to hydrate

00:09:49,320 --> 00:09:59,000
wrappers on the top so you teams could

00:09:54,899 --> 00:09:59,000
be different and technology choices

00:10:00,889 --> 00:10:04,820
secondly as you

00:10:16,800 --> 00:10:21,449
perhaps write letters are rather than be

00:10:19,439 --> 00:10:23,699
factored in sex whatever commission that

00:10:21,449 --> 00:10:25,949
you need is on the circle your English

00:10:23,699 --> 00:10:29,149
effected a work is done virtually

00:10:25,949 --> 00:10:32,369
accessible by lab it's all up on your

00:10:29,149 --> 00:10:34,649
software mobile right so if it's the 50m

00:10:32,369 --> 00:10:36,449
VR it has two less there if they are 20

00:10:34,649 --> 00:10:40,079
and here everything has been tested and

00:10:36,449 --> 00:10:41,850
how much capital Ouagadougou that you

00:10:40,079 --> 00:10:43,529
would realize that it sometimes you can

00:10:41,850 --> 00:10:46,230
just keep in selected as you know mobile

00:10:43,529 --> 00:10:47,699
you're adding deleting so on takes too

00:10:46,230 --> 00:10:50,519
much of the space I need space for

00:10:47,699 --> 00:10:52,739
engages also cannot be bad and you'll be

00:10:50,519 --> 00:10:54,629
engagement so that I provides you the

00:10:52,739 --> 00:10:56,790
feature if you might be able to utilize

00:10:54,629 --> 00:11:00,809
of you Portugal see of the credits that

00:10:56,790 --> 00:11:04,019
you've had and because any and that's

00:11:00,809 --> 00:11:07,350
weather is very good because if you have

00:11:04,019 --> 00:11:09,809
ability to download it use it I liken it

00:11:07,350 --> 00:11:11,970
to that you would replace very few caves

00:11:09,809 --> 00:11:13,679
are in thieves and then whatever the

00:11:11,970 --> 00:11:16,049
information that we need is both from

00:11:13,679 --> 00:11:20,559
the server pretty easy

00:11:16,049 --> 00:11:23,769
so can well I have all the features that

00:11:20,559 --> 00:11:25,509
canta estate on your Milan's have to be

00:11:23,769 --> 00:11:27,939
tracked a bit about that just like you

00:11:25,509 --> 00:11:32,319
do with the native app can you give you

00:11:27,939 --> 00:11:34,329
push notifications and that essentially

00:11:32,319 --> 00:11:37,599
is the cushion what progressive web apps

00:11:34,329 --> 00:11:47,109
try to answer and a few building blocks

00:11:37,599 --> 00:11:50,739
that you see here this is what the

00:11:47,109 --> 00:11:53,409
language stream of providing one there

00:11:50,739 --> 00:11:56,139
are many tests and second is the service

00:11:53,409 --> 00:11:59,409
Booker them up amethyst is more of a

00:11:56,139 --> 00:12:01,629
Jason applying think of it a progressive

00:11:59,409 --> 00:12:08,499
rock in a nutshell is nothing more than

00:12:01,629 --> 00:12:10,359
HTML CSS and ok and then you have the

00:12:08,499 --> 00:12:13,779
gzip file the solution ellipse you start

00:12:10,359 --> 00:12:18,069
will see that how you want your look and

00:12:13,779 --> 00:12:20,109
feel of your equity how you know by what

00:12:18,069 --> 00:12:23,559
will be the icons like how the name

00:12:20,109 --> 00:12:27,729
would appear and manifest is something

00:12:23,559 --> 00:12:31,329
that gives you the ability to save it on

00:12:27,729 --> 00:12:33,770
your mo Fe just like a half so it

00:12:31,329 --> 00:12:35,780
appears nothing

00:12:33,770 --> 00:12:38,780
these are the settings these are the

00:12:35,780 --> 00:12:41,450
emitters these are the orientations and

00:12:38,780 --> 00:12:44,840
the disputes that happen when you see an

00:12:41,450 --> 00:12:48,410
iphone which has a small name only might

00:12:44,840 --> 00:12:50,030
be super small you might be a me has a

00:12:48,410 --> 00:12:52,220
little item when you click on that I can

00:12:50,030 --> 00:12:54,740
use these flashes been coming over and

00:12:52,220 --> 00:12:57,440
then shorten the space of the messages

00:12:54,740 --> 00:12:59,540
some images pop up and then Apple comes

00:12:57,440 --> 00:13:01,550
up is very responsive you could go

00:12:59,540 --> 00:13:03,650
around so all those capabilities are

00:13:01,550 --> 00:13:05,660
something that comes with manifest which

00:13:03,650 --> 00:13:09,460
is essentially a decent fight and this

00:13:05,660 --> 00:13:12,880
haven't been ported it's pretty simple

00:13:09,460 --> 00:13:12,880
whatever it is

00:13:15,200 --> 00:13:57,720
through this simple key value pairs that

00:13:55,440 --> 00:13:59,610
you could define this is what I want

00:13:57,720 --> 00:14:00,600
might have to be there so dramatically

00:13:59,610 --> 00:14:03,210
pop properties

00:14:00,600 --> 00:14:09,750
you just get through and you see that it

00:14:03,210 --> 00:14:11,970
just how does it provide you the ability

00:14:09,750 --> 00:14:15,250
of a potion

00:14:11,970 --> 00:14:19,990
capability it needs to have to yourself

00:14:15,250 --> 00:14:21,790
right now my abs are something that say

00:14:19,990 --> 00:14:24,700
that that's our something that stay

00:14:21,790 --> 00:14:26,950
epistle you request something it

00:14:24,700 --> 00:14:29,470
delivers the docile to you executed if

00:14:26,950 --> 00:14:32,500
you need something from the EPA to put

00:14:29,470 --> 00:14:35,290
all that then how it will affect it

00:14:32,500 --> 00:14:37,570
means something to interact with the

00:14:35,290 --> 00:14:40,180
soul it means something to stop and say

00:14:37,570 --> 00:14:43,300
that if I am NOT offline I will listen

00:14:40,180 --> 00:14:46,329
to my what my user is saying recorded

00:14:43,300 --> 00:14:47,230
and whenever I get back online I will

00:14:46,329 --> 00:14:50,410
send it to the server

00:14:47,230 --> 00:14:53,140
and the response back that is the road

00:14:50,410 --> 00:14:55,089
of serviceworker it acts as a proxy

00:14:53,140 --> 00:14:58,120
between the browser and the web server

00:14:55,089 --> 00:15:00,040
it just sits on your browser in the

00:14:58,120 --> 00:15:03,310
background listens to all that you

00:15:00,040 --> 00:15:04,959
talking to the server regards it if you

00:15:03,310 --> 00:15:06,880
are online depending on how you

00:15:04,959 --> 00:15:10,890
contribute it could send the response

00:15:06,880 --> 00:15:10,890
percent the request get the response

00:15:23,710 --> 00:15:38,140
so this is the very basics of course

00:15:26,320 --> 00:15:41,920
Elvis Booker's again it's outside of

00:15:38,140 --> 00:15:43,990
your app don't it's something to

00:15:41,920 --> 00:15:46,240
transfer with your app but it's

00:15:43,990 --> 00:15:48,790
asynchronous it's runs in the background

00:15:46,240 --> 00:15:50,920
and it does not have access to you Dom

00:15:48,790 --> 00:16:00,820
objects so it can not interfere with

00:15:50,920 --> 00:16:01,510
what you are let's start up and see this

00:16:00,820 --> 00:16:04,660
in action

00:16:01,510 --> 00:16:06,430
ok let's go

00:16:04,660 --> 00:16:09,070
the first thing we will be doing is

00:16:06,430 --> 00:16:10,750
adding the web app manifest so that your

00:16:09,070 --> 00:16:14,380
website can be added to the homescreen

00:16:10,750 --> 00:16:17,200
like app and then you can verify that in

00:16:14,380 --> 00:16:19,930
Mac Windows and I was an Android so

00:16:17,200 --> 00:16:23,380
recently the PWA the app manifest

00:16:19,930 --> 00:16:26,050
support has been added to linux mac and

00:16:23,380 --> 00:16:28,089
windows so desktop also you can have a

00:16:26,050 --> 00:16:30,550
app and then you can launch it so we are

00:16:28,089 --> 00:16:32,910
going to see that so let's get rid of

00:16:30,550 --> 00:16:32,910
the slides

00:16:40,869 --> 00:16:48,259
okay so what we are going to do now is

00:16:44,839 --> 00:16:50,240
we are going to take an existing app and

00:16:48,259 --> 00:16:53,720
add all the progress you features to it

00:16:50,240 --> 00:16:56,720
so prerequisite I hope everybody has

00:16:53,720 --> 00:17:00,980
gate load version greater than ten

00:16:56,720 --> 00:17:02,149
Chrome latest version and maybe people

00:17:00,980 --> 00:17:03,829
can write their email address we can

00:17:02,149 --> 00:17:07,449
invite them to the slack channel so that

00:17:03,829 --> 00:17:07,449
we can copy and paste some of the things

00:17:07,510 --> 00:17:19,100
yeah email addresses here whatever they

00:17:11,000 --> 00:17:21,740
used for slack yeah okay so if you

00:17:19,100 --> 00:17:26,740
satisfy all the prerequisite try to

00:17:21,740 --> 00:17:26,740
follow these steps get clone in this one

00:17:28,590 --> 00:17:36,660
can able to see from the back logic yes

00:17:34,450 --> 00:17:36,660
sure

00:17:54,880 --> 00:17:59,470
I think if you just go to the github and

00:17:58,210 --> 00:18:05,560
go to the repository

00:17:59,470 --> 00:18:09,510
DWA - workshop - 2019 you can get the

00:18:05,560 --> 00:18:09,510
URL from there also when you are

00:18:28,040 --> 00:18:32,080
and there's not any way to find this

00:19:12,230 --> 00:19:16,460
just raise your hand if you need any

00:19:14,340 --> 00:19:16,460
help

00:20:25,290 --> 00:20:30,220
so once you get the project stall and

00:20:27,970 --> 00:20:33,190
start you need to have a Heroku account

00:20:30,220 --> 00:20:45,100
so go to Heroku comm and then you can

00:20:33,190 --> 00:20:47,940
sign up trying to deploy into the cloud

00:20:45,100 --> 00:20:47,940
so that we can access

00:23:22,570 --> 00:23:28,139
once you install and start make sure

00:23:24,969 --> 00:23:28,139
that you can see the screen

00:23:52,050 --> 00:23:57,390
one simplest of her who are you will see

00:23:54,660 --> 00:23:59,570
that they cancel each other and that few

00:23:57,390 --> 00:24:02,570
other you can use to view it on your

00:23:59,570 --> 00:24:02,570
models

00:24:48,169 --> 00:24:52,949
let me know once you're done with all

00:24:50,339 --> 00:24:55,969
these five steps and then we can take

00:24:52,949 --> 00:24:55,969
the next phase of plate out

00:27:57,890 --> 00:28:00,890
okay

00:28:04,159 --> 00:28:09,960
let me know if anybody is still trying

00:28:06,990 --> 00:28:11,909
to finish the five steps anybody still

00:28:09,960 --> 00:28:15,470
write trying to finish the Ross five

00:28:11,909 --> 00:28:15,470
steps okay cool

00:28:34,500 --> 00:28:40,860
okay if you have installed Heroku CLI

00:28:38,190 --> 00:28:44,929
then you can do Heroku login from your

00:28:40,860 --> 00:28:44,929
command prompt terminal

00:28:46,979 --> 00:28:53,340
and then it will ask you for your

00:28:49,239 --> 00:28:53,340
credential again you can type it

00:29:28,640 --> 00:29:33,649
and that's the next step you go to the

00:29:30,679 --> 00:29:38,000
heroku calm and then once you log in you

00:29:33,649 --> 00:29:40,820
can see a new project new app option and

00:29:38,000 --> 00:29:43,820
then you can call it like SG clinics -

00:29:40,820 --> 00:29:46,059
here you can put your name here a short

00:29:43,820 --> 00:29:46,059
form

00:30:01,479 --> 00:30:06,929
I think the region you can put in the

00:30:03,549 --> 00:30:06,929
United States or Europe anything

00:30:46,549 --> 00:30:51,030
once we have created the project in

00:30:48,990 --> 00:30:54,390
Haruka comm and then from the command

00:30:51,030 --> 00:30:57,809
line you can pry this command Heroku get

00:30:54,390 --> 00:30:59,370
remote - yay and the username whatever

00:30:57,809 --> 00:31:01,679
name you have created you have to give

00:30:59,370 --> 00:31:04,080
the same name the third step will attach

00:31:01,679 --> 00:31:05,730
your git project with Heroku so that

00:31:04,080 --> 00:31:07,650
whenever you push all your changes will

00:31:05,730 --> 00:31:10,040
go to Heroku and then it will be auto

00:31:07,650 --> 00:31:10,040
deployed

00:31:35,390 --> 00:31:40,310
when you look get remote on me you you

00:31:38,360 --> 00:31:42,610
should see the Heroku I saw one of the

00:31:40,310 --> 00:31:42,610
origin

00:33:05,760 --> 00:33:08,360
yes

00:33:18,490 --> 00:33:25,810
oh good yes Janie she wanted the same

00:33:23,710 --> 00:33:28,710
thing yeah okay

00:33:25,810 --> 00:33:28,710
what's that I do

00:33:31,670 --> 00:33:36,290
unusually good I have done wonderful

00:33:33,890 --> 00:33:45,740
different luggage and then

00:33:36,290 --> 00:33:53,300
you are inside that folder okay I think

00:33:45,740 --> 00:34:02,270
you're good you can okay can you do the

00:33:53,300 --> 00:34:04,970
last command that next one get in okay

00:34:02,270 --> 00:34:09,530
all set so I know you can run the last

00:34:04,970 --> 00:34:11,540
git push now this will push you a

00:34:09,530 --> 00:34:14,409
project to cloud and then you can able

00:34:11,540 --> 00:34:14,409
to access it from there

00:34:23,010 --> 00:34:31,540
which wouldn't get remote - is it

00:34:25,630 --> 00:34:33,730
winning this one okay yes the app is

00:34:31,540 --> 00:34:34,500
created just in name it doesn't have any

00:34:33,730 --> 00:34:40,450
code right

00:34:34,500 --> 00:34:43,270
and then we are touching this place in

00:34:40,450 --> 00:34:45,190
the GUI it doesn't have any code so we

00:34:43,270 --> 00:34:48,250
need to attach the code and uploaded

00:34:45,190 --> 00:34:51,159
there to link your git project with

00:34:48,250 --> 00:34:54,850
Heroku that's a step git remote attach

00:34:51,159 --> 00:34:56,740
this project attaches your project to

00:34:54,850 --> 00:35:00,550
the Heroku and then now you are pushing

00:34:56,740 --> 00:35:01,420
the code now the code will go there and

00:35:00,550 --> 00:35:07,300
it will take time

00:35:01,420 --> 00:35:08,980
still going did you take the version one

00:35:07,300 --> 00:35:11,460
or the normal one I think it should be a

00:35:08,980 --> 00:35:11,460
normal one

00:35:16,520 --> 00:35:23,780
anymore here you should get this and we

00:35:22,250 --> 00:35:27,109
can repeat the track it's the completed

00:35:23,780 --> 00:35:31,570
core you can refer back now you create a

00:35:27,109 --> 00:35:31,570
new project cool with a different name

00:35:46,980 --> 00:35:51,960
so let me know once everyone is done

00:35:49,740 --> 00:35:55,319
with all the steps and then you can try

00:35:51,960 --> 00:36:00,020
to access your Heroku app from your

00:35:55,319 --> 00:36:00,020
browser it will be like

00:36:16,560 --> 00:36:23,100
yep don't forget to put HTTP because all

00:36:20,740 --> 00:36:29,050
the features we are going to put needs

00:36:23,100 --> 00:36:30,760
HTTP and then you should be able to see

00:36:29,050 --> 00:36:33,120
the same app whatever you have seen

00:36:30,760 --> 00:36:33,120
locally

00:37:11,310 --> 00:37:15,290
okay my dad kissing

00:37:20,680 --> 00:37:31,270
you know I would access it in your

00:37:23,110 --> 00:37:33,820
mobile nice can you try to add to

00:37:31,270 --> 00:37:42,820
homescreen and it doesn't go to the

00:37:33,820 --> 00:37:44,710
magnet yes yes yes you can remove it and

00:37:42,820 --> 00:37:54,970
then that's what we are going to do next

00:37:44,710 --> 00:37:57,580
so you can also access this URL from

00:37:54,970 --> 00:37:59,440
your mobile then see how it looks and

00:37:57,580 --> 00:38:02,790
then from your mobile try to add to

00:37:59,440 --> 00:38:02,790
homescreen and see what happens

00:38:04,369 --> 00:38:16,239
oh you down with this step so you know

00:38:13,339 --> 00:38:16,239
okay

00:38:17,860 --> 00:38:21,150
are you done with the steps

00:38:21,830 --> 00:38:27,859
you guys know the steps

00:38:24,930 --> 00:38:27,859
are you messed up

00:38:33,230 --> 00:38:38,980
okay try to access the URL from your

00:38:36,080 --> 00:38:38,980
mobile

00:38:40,310 --> 00:38:49,430
all verify ok this is the one correct

00:38:45,520 --> 00:38:52,070
the next step is you created the second

00:38:49,430 --> 00:38:52,850
step the third step is Hiroko get

00:38:52,070 --> 00:38:59,840
removed

00:38:52,850 --> 00:39:01,750
I done it ok can you go to the yeah so

00:38:59,840 --> 00:39:12,460
here I did step

00:39:01,750 --> 00:39:12,460
hello cool yeah before we get remote

00:39:16,400 --> 00:39:31,819
no yeah just a name yep Anto okay so you

00:39:29,210 --> 00:39:34,809
have to install the haricot come online

00:39:31,819 --> 00:39:34,809
can you go to the browser

00:39:49,770 --> 00:39:55,560
okay you need to download this and

00:39:53,020 --> 00:39:55,560
install this

00:40:00,339 --> 00:40:16,319
I need to download this windows right

00:40:06,099 --> 00:40:16,319
yeah this would be downloading yep

00:40:19,430 --> 00:40:25,800
tonight that command so he's now John

00:40:22,770 --> 00:40:30,480
loading the head of UCLA once it's done

00:40:25,800 --> 00:40:34,110
you can help him with the steps once

00:40:30,480 --> 00:40:36,290
it's done you can install it it are you

00:40:34,110 --> 00:40:36,290
done

00:40:37,290 --> 00:40:52,980
I hope everyone is done with the steps

00:40:44,300 --> 00:40:55,560
okay we can move on and do our first PWA

00:40:52,980 --> 00:40:58,310
feature which is adding an app manifest

00:40:55,560 --> 00:41:01,470
and which will help us to add this

00:40:58,310 --> 00:41:06,450
website web app into home screen so that

00:41:01,470 --> 00:41:07,970
you can launch it like mobile app okay

00:41:06,450 --> 00:41:09,990
so RIT is covered

00:41:07,970 --> 00:41:14,180
some part of it what are the steps you

00:41:09,990 --> 00:41:14,180
need to do so let's look at it again

00:41:15,290 --> 00:41:24,690
okay

00:41:18,080 --> 00:41:27,570
first go here public index dot HTML and

00:41:24,690 --> 00:41:29,630
then you just need to uncomment this

00:41:27,570 --> 00:41:29,630
line

00:41:42,820 --> 00:41:48,830
okay so then we need to add this

00:41:45,530 --> 00:41:53,320
manifest dot JSON file which we don't

00:41:48,830 --> 00:41:53,320
have at the moment for that

00:41:56,420 --> 00:42:00,160
you can get the file from here

00:42:04,079 --> 00:42:07,380
okay once again

00:42:21,050 --> 00:42:27,640
go to github and there is a second

00:42:23,720 --> 00:42:27,640
project which is a Zeke Linux version

00:42:27,880 --> 00:42:33,020
1.1 the whole project and that has the

00:42:30,440 --> 00:42:43,369
completed code so don't download it just

00:42:33,020 --> 00:42:47,000
take this file and then put it the

00:42:43,369 --> 00:42:48,470
public folder so I'm just going to do

00:42:47,000 --> 00:42:51,190
these steps just follow me and then you

00:42:48,470 --> 00:42:51,190
can do it yourself

00:42:57,200 --> 00:43:18,140
okay this file just copy it go to public

00:43:05,660 --> 00:43:20,589
folder money first dorje say and then

00:43:18,140 --> 00:43:20,589
paste it here

00:43:36,700 --> 00:43:44,230
okay and the next step is let's walk

00:43:40,839 --> 00:43:47,410
through this file okay the first one is

00:43:44,230 --> 00:43:49,660
short name this is the name which will

00:43:47,410 --> 00:43:51,849
appear in your home screen so normally

00:43:49,660 --> 00:43:54,099
if your app has a bigger name you should

00:43:51,849 --> 00:43:55,359
provide a short name so that they the

00:43:54,099 --> 00:43:57,849
name it will be displayed in the home

00:43:55,359 --> 00:44:01,720
screen of your mobile already a desktop

00:43:57,849 --> 00:44:05,190
in in your desktop and name is the

00:44:01,720 --> 00:44:08,680
actual name icons so you need to provide

00:44:05,190 --> 00:44:10,450
icons with various sizes so that the

00:44:08,680 --> 00:44:12,940
operating system will the browser will

00:44:10,450 --> 00:44:14,859
decide which icon to pick and then it

00:44:12,940 --> 00:44:17,859
will use it in the home screen so we

00:44:14,859 --> 00:44:20,559
have mobile life desktop so it's good to

00:44:17,859 --> 00:44:24,400
provide a multiple icons so if you want

00:44:20,559 --> 00:44:30,819
these icons you can get it from here the

00:44:24,400 --> 00:44:32,799
same project version one images so it

00:44:30,819 --> 00:44:35,440
has four icons you can download this and

00:44:32,799 --> 00:44:37,480
then put it under the same public images

00:44:35,440 --> 00:44:40,230
you can copy the whole image folder and

00:44:37,480 --> 00:44:40,230
paste it there

00:44:41,610 --> 00:44:52,820
so I'm going to do the same step public

00:44:49,320 --> 00:44:52,820
images going to copy it

00:45:00,620 --> 00:45:07,080
you just need to I think replace the

00:45:03,810 --> 00:45:12,950
images here this people is the whole

00:45:07,080 --> 00:45:12,950
folder here oh right

00:45:50,400 --> 00:45:56,070
okay once you put all the images here so

00:45:54,220 --> 00:45:59,500
there's three changes in text or HTML

00:45:56,070 --> 00:46:01,870
you uncomment the manifesto Jason

00:45:59,500 --> 00:46:06,250
and the second part thing is add this

00:46:01,870 --> 00:46:13,570
file manifesto Jason here and then add

00:46:06,250 --> 00:46:16,080
the images that's it you can go here npm

00:46:13,570 --> 00:46:16,080
run bail

00:46:37,510 --> 00:46:44,099
then npm and start server

00:46:51,980 --> 00:46:55,420
okay it's already news

00:47:09,590 --> 00:47:15,500
okay so let me put the steps here and

00:47:12,270 --> 00:47:15,500
then you can follow one by one

00:47:25,160 --> 00:47:28,400
step one

00:47:28,580 --> 00:47:31,580
uncomment

00:48:11,099 --> 00:48:13,880
okay

00:48:16,559 --> 00:48:24,250
these are the steps and then you can

00:48:20,470 --> 00:48:28,529
access it again and then now try to add

00:48:24,250 --> 00:48:28,529
homescreen and then see how it looks

00:51:15,440 --> 00:51:18,559
[Music]

00:51:33,290 --> 00:51:37,500
from the desktop once we're done it

00:51:35,820 --> 00:51:40,680
sometimes you will see resorption

00:51:37,500 --> 00:51:43,860
install HT clinics if you don't see this

00:51:40,680 --> 00:51:50,640
option don't worry you can go to more

00:51:43,860 --> 00:51:52,440
tools and create shortcut and then it

00:51:50,640 --> 00:51:54,120
shows this icon whatever we have added

00:51:52,440 --> 00:51:55,650
and then also it shows the name this is

00:51:54,120 --> 00:51:58,410
a short name which we are given in the

00:51:55,650 --> 00:52:05,430
manifest adjacent and you check this box

00:51:58,410 --> 00:52:09,080
open ass window then it's coming in a

00:52:05,430 --> 00:52:09,080
different window then the browser window

00:52:10,809 --> 00:52:25,789
you can select book you can close in a

00:52:21,049 --> 00:52:28,160
desktop you will see this SC clinic you

00:52:25,789 --> 00:52:30,490
open it it opens here not in the browser

00:52:28,160 --> 00:52:30,490
window

00:52:53,680 --> 00:52:57,220
exiting is it let me

00:53:04,450 --> 00:53:12,310
so I'm Chris

00:53:07,040 --> 00:53:12,310
this app open it

00:53:13,120 --> 00:53:16,050
okay

00:53:21,830 --> 00:53:29,240
so ease it in this perhaps okay do it

00:53:27,150 --> 00:53:29,240
again

00:53:36,150 --> 00:53:46,980
mortals which is create shortcut click

00:53:42,400 --> 00:53:50,790
this openness we have to it

00:53:46,980 --> 00:53:50,790
yeah right open it

00:53:59,110 --> 00:54:08,680
let's close all the things and make sure

00:54:03,950 --> 00:54:08,680
your thing is running para cool

00:54:17,370 --> 00:54:22,900
you should access it from here

00:54:19,450 --> 00:54:26,470
local localhost 4000 we have intend a

00:54:22,900 --> 00:54:39,850
ploy to Heroku so access it from

00:54:26,470 --> 00:54:42,390
localhost 4000 create shortcut openness

00:54:39,850 --> 00:54:42,390
window you

00:54:54,480 --> 00:55:08,390
you already know which is Oh can you use

00:55:01,630 --> 00:55:11,799
Chrome yeah yes it tastes I know

00:55:08,390 --> 00:55:11,799
okay let me come

00:55:14,660 --> 00:55:21,490
I don't see anything after women this is

00:55:19,040 --> 00:55:25,410
stuff here

00:55:21,490 --> 00:55:33,150
to push my successful

00:55:25,410 --> 00:55:36,010
oh yeah okay so do the second one yeah

00:55:33,150 --> 00:55:40,960
the point it's fine yeah he just

00:55:36,010 --> 00:55:44,820
deployed you npm run build after that

00:55:40,960 --> 00:55:44,820
stores over can you close and try again

00:55:51,570 --> 00:55:57,220
after this you access the app from

00:55:54,460 --> 00:56:00,130
localhost 4000 port number because we

00:55:57,220 --> 00:56:03,060
haven't yet deploy to Heroku so you can

00:56:00,130 --> 00:56:03,060
access from localhost

00:56:14,740 --> 00:56:17,640
Randall

00:56:20,269 --> 00:56:23,269
okay

00:56:57,950 --> 00:57:03,180
those who have completed this you can do

00:57:00,510 --> 00:57:10,970
the next step so you can commit the

00:57:03,180 --> 00:57:10,970
changes git commit and then do a get

00:57:11,030 --> 00:57:16,400
push Heroku Master

00:57:19,700 --> 00:57:25,530
this step will push our latest changes

00:57:23,430 --> 00:57:27,660
into Heroku so that you can try to

00:57:25,530 --> 00:57:29,309
access it from your mobile phone and

00:57:27,660 --> 00:57:30,960
then you can try to do the same at the

00:57:29,309 --> 00:57:33,140
home screen and then launch it from a

00:57:30,960 --> 00:57:33,140
while

00:57:36,099 --> 00:57:42,249
you can commit and then push to Heroku

00:57:38,599 --> 00:57:42,249
git push Heroku master

00:57:49,950 --> 00:57:54,060
I think we started earlier

00:58:02,040 --> 00:58:06,740
to speak already abuse as they will like

00:58:04,530 --> 00:58:06,740
that

00:58:10,430 --> 00:58:17,250
maybe this like any level if you have

00:58:14,100 --> 00:58:24,690
any food you might also see it you'll

00:58:17,250 --> 00:58:30,800
need to plan ahead of cou this one now

00:58:24,690 --> 00:58:30,800
have an exact idea the orientation is

00:58:33,320 --> 00:58:41,240
yes I think that the manifest

00:58:35,160 --> 00:58:43,110
destination file has a yes yes option

00:58:41,240 --> 00:58:45,740
actually can quickly Google and then you

00:58:43,110 --> 00:58:45,740
can try to change it

00:59:00,210 --> 00:59:05,050
if you're on an iPhone you can try to

00:59:02,560 --> 00:59:07,470
access it from Safari and then at the

00:59:05,050 --> 00:59:07,470
home screen

00:59:17,350 --> 00:59:26,410
so Android phone try to use Chrome yeah

00:59:21,630 --> 00:59:28,510
they're coming yeah for the web browser

00:59:26,410 --> 00:59:30,220
icon is incorrect

00:59:28,510 --> 00:59:33,280
yes it's not correct can you delete it

00:59:30,220 --> 00:59:43,780
and trying it it should go you deploy to

00:59:33,280 --> 00:59:47,200
Heroku okay launch it yeah wait

00:59:43,780 --> 00:59:49,530
normal it should change did you add the

00:59:47,200 --> 00:59:49,530
images

01:00:01,380 --> 01:00:16,590
I'll correct okay close all the browser

01:00:07,090 --> 01:00:16,590
plug-in Safari yep any tabs open can you

01:00:16,920 --> 01:00:20,770
okay

01:00:18,510 --> 01:00:22,780
it does just matter you just need to

01:00:20,770 --> 01:00:26,740
close this tab for this one and then

01:00:22,780 --> 01:00:30,700
should be okay can you apply HTTP yes

01:00:26,740 --> 01:00:34,980
please make sure you try HTTP yes when

01:00:30,700 --> 01:00:34,980
you access the Heroku

01:00:39,380 --> 01:00:47,120
hmm why risk work or something

01:00:44,150 --> 01:00:50,170
yeah I'm just simply using energy tools

01:00:47,120 --> 01:00:50,170
so which Bush at home

01:00:52,090 --> 01:00:56,560
can you play out sometimes comes

01:00:58,480 --> 01:01:20,170
let me try you on your lame okay

01:01:18,549 --> 01:01:22,270
in the commit command itself you can

01:01:20,170 --> 01:01:24,819
give the message can you try again

01:01:22,270 --> 01:01:27,329
commit and then - them you can give them

01:01:24,819 --> 01:01:27,329
as a state

01:01:48,009 --> 01:02:17,929
okay yes Nate push a monster now it

01:02:16,069 --> 01:02:21,529
won't wash to Heroku once this is done

01:02:17,929 --> 01:02:23,739
you can let us try to access your URL

01:02:21,529 --> 01:02:23,739
from

01:02:26,750 --> 01:02:36,920
the Heroku URL you can log into Heroku

01:02:31,740 --> 01:02:36,920
and then you will have open yes

01:02:44,999 --> 01:02:57,569
what's very worldly SG clinics - okay

01:03:12,830 --> 01:03:16,360
let me delete my

01:03:29,390 --> 01:03:33,080
longer than appointment

01:03:34,650 --> 01:03:48,589
can you show us index dot HTML okay

01:03:41,450 --> 01:03:48,589
manifest is it under images folder

01:03:48,590 --> 01:04:01,880
nobody knows correct okay

01:03:56,370 --> 01:04:01,880
I forgot how come to give others

01:04:04,690 --> 01:04:13,960
yeah I mean my ways in regard these

01:04:07,430 --> 01:04:13,960
icons oh yes

01:04:17,060 --> 01:04:23,930
okay for people using iPhones you need

01:04:21,180 --> 01:04:23,930
to do one more step

01:04:27,440 --> 01:04:32,610
so Apple doesn't respect the manifester

01:04:30,960 --> 01:04:36,900
Jason so you have to do they have their

01:04:32,610 --> 01:04:41,700
own way of doing it copy this and put it

01:04:36,900 --> 01:04:44,000
your in index dot HTML so I will just

01:04:41,700 --> 01:04:44,000
put it here

01:04:56,410 --> 01:05:01,750
it is the same tag with the different

01:04:59,600 --> 01:05:01,750
images

01:06:07,120 --> 01:06:12,730
you're able to see an icon in mobile is

01:06:10,340 --> 01:06:12,730
it coming

01:06:15,870 --> 01:06:18,770
at home

01:06:21,770 --> 01:06:24,430
yes

01:06:40,070 --> 01:06:43,139
[Music]

01:06:48,620 --> 01:06:53,300
I need company off them I think they

01:06:52,010 --> 01:06:57,610
just trying lost them

01:06:53,300 --> 01:06:57,610
oh that should be okay the first is okay

01:07:02,099 --> 01:07:07,080
can I just raise your hand if you're

01:07:04,090 --> 01:07:10,230
still doing it okay

01:07:07,080 --> 01:07:10,230
anybody else

01:07:11,440 --> 01:07:15,130
let's give five more minutes

01:07:18,500 --> 01:07:26,740
I'm not walking up

01:07:21,700 --> 01:07:33,270
Oh candy boy hack it's a deployed okay

01:07:26,740 --> 01:07:33,270
the other night for you the x6

01:07:54,110 --> 01:08:00,369
it's a diploid

01:07:57,470 --> 01:08:00,369
let's see

01:08:03,290 --> 01:08:11,300
clothes under here I'll start again yes

01:08:30,790 --> 01:08:40,420
anyone got it working in their iPhone

01:08:34,779 --> 01:08:40,420
sorry okay thank ya

01:08:42,239 --> 01:08:45,989
yeah commit and deploy

01:08:48,419 --> 01:08:56,189
sorry yeah get and commit and then push

01:08:52,259 --> 01:09:03,409
Heroku master anybody got the icon in

01:08:56,189 --> 01:09:03,409
iphone step compiling okay

01:09:03,819 --> 01:09:08,319
we're still trying to deploy and get

01:09:25,179 --> 01:09:31,089
oh by the way I have added most of you

01:09:28,960 --> 01:09:32,920
to the slack Channel please join so that

01:09:31,089 --> 01:09:36,029
I can paste this so that you can just

01:09:32,920 --> 01:09:36,029
copy and paste instead of typing

01:09:40,030 --> 01:09:47,770
no need Oh what happened suddenly looks

01:09:54,940 --> 01:10:06,230
nice good you don't need to run we'll

01:10:02,810 --> 01:10:08,030
just commit and then push and Heroku

01:10:06,230 --> 01:10:10,190
will do the build and then it will start

01:10:08,030 --> 01:10:15,530
it so you don't need to do NP m run

01:10:10,190 --> 01:10:19,010
build here slack

01:10:15,530 --> 01:10:24,320
have you given your email address did

01:10:19,010 --> 01:10:26,810
you receive an email know what okay yes

01:10:24,320 --> 01:10:34,300
please join slack so that I can post the

01:10:26,810 --> 01:10:37,960
code there no I haven't seen this

01:10:34,300 --> 01:10:47,290
cabaret dancer maybe is it a new one

01:10:37,960 --> 01:10:49,699
how did it especial for Chloe sorry

01:10:47,290 --> 01:10:51,230
slack you should have received the email

01:10:49,699 --> 01:10:55,599
not to join

01:10:51,230 --> 01:10:58,699
I think slack will send an email

01:10:55,599 --> 01:11:00,940
whoever not received slack in wait let

01:10:58,699 --> 01:11:00,940
me know

01:11:02,360 --> 01:11:06,889
okay so I will give the list one second

01:11:09,440 --> 01:11:15,400
I can see one two three four five

01:12:08,060 --> 01:12:13,500
please let me know if you haven't

01:12:09,990 --> 01:12:14,730
received a slack invite you can write or

01:12:13,500 --> 01:12:17,660
if you haven't written your email

01:12:14,730 --> 01:12:17,660
address you can also write now

01:12:18,560 --> 01:12:24,409
so that we can paste all the code there

01:12:21,210 --> 01:12:24,409
and then you can just copy and paste

01:13:17,719 --> 01:13:20,320
I'm just

01:13:23,519 --> 01:13:26,329
okay

01:13:42,760 --> 01:13:45,890
[Music]

01:13:46,090 --> 01:13:48,239
yeah

01:16:16,220 --> 01:16:28,050
it's just one more two things okay

01:16:19,320 --> 01:16:29,480
everybody not just to sentence okay

01:16:28,050 --> 01:16:35,460
everyone it's done

01:16:29,480 --> 01:16:39,900
iPhone Android desktop cool just few

01:16:35,460 --> 01:16:42,360
more things here so you see the team

01:16:39,900 --> 01:16:44,340
color so this is the background color

01:16:42,360 --> 01:16:46,170
when the launch screen comes if you want

01:16:44,340 --> 01:16:49,920
to customize you can change the color

01:16:46,170 --> 01:16:52,010
and then you can see the start URL this

01:16:49,920 --> 01:16:54,600
is the URL which will be used when you

01:16:52,010 --> 01:16:56,370
tap on the home screen icon and then it

01:16:54,600 --> 01:16:58,740
will open so that's a URL will be used

01:16:56,370 --> 01:17:00,810
here dot means it will use the home URL

01:16:58,740 --> 01:17:06,480
which is localhost 4000 or your header

01:17:00,810 --> 01:17:08,310
cube calm okay nothing much yeah so if

01:17:06,480 --> 01:17:11,340
you are done then we can move on to the

01:17:08,310 --> 01:17:16,140
next one okay

01:17:11,340 --> 01:17:18,450
all done cool okay the next feature we

01:17:16,140 --> 01:17:20,820
are going to cover is making the app

01:17:18,450 --> 01:17:22,440
offline maybe you can try now so if

01:17:20,820 --> 01:17:23,900
disconnect network and then try it will

01:17:22,440 --> 01:17:26,880
fail because there is no offline

01:17:23,900 --> 01:17:32,210
capability at the moment we are going to

01:17:26,880 --> 01:17:32,210
make it offline capable water it's

01:17:34,840 --> 01:17:38,079
[Music]

01:17:41,190 --> 01:17:45,990
but installed it you would understand it

01:17:43,610 --> 01:17:48,840
just looks like any other thing on your

01:17:45,990 --> 01:17:52,490
mobile phone but if you go away with a

01:17:48,840 --> 01:17:55,940
bone because what is it it will say

01:17:52,490 --> 01:17:55,940
Internet company

01:18:29,239 --> 01:18:32,239
smiling

01:18:33,650 --> 01:18:38,120
on a flamer my us it looks

01:18:46,880 --> 01:18:49,989
[Music]

01:18:54,600 --> 01:19:02,440
yeah but in Safari

01:18:58,840 --> 01:19:02,440
yeah it's not there

01:19:51,590 --> 01:20:00,450
all right moving on to the next section

01:19:54,840 --> 01:20:01,680
it's called serviceworker so as we

01:20:00,450 --> 01:20:03,990
discussed a while back about

01:20:01,680 --> 01:20:06,080
serviceworker right serviceworker is

01:20:03,990 --> 01:20:08,280
something that stays with the browser

01:20:06,080 --> 01:20:10,290
imagine it is to be a JavaScript file

01:20:08,280 --> 01:20:12,690
but which is independent of your

01:20:10,290 --> 01:20:15,570
application it just sets at the

01:20:12,690 --> 01:20:18,590
background so that nobody knows listens

01:20:15,570 --> 01:20:21,030
to what you're talking with the server

01:20:18,590 --> 01:20:24,240
just sortin facilitates your records

01:20:21,030 --> 01:20:26,540
sense and acts as an interceptor so what

01:20:24,240 --> 01:20:29,700
we are going to do next is add a small

01:20:26,540 --> 01:20:32,280
serviceworker and see how it behaves the

01:20:29,700 --> 01:20:36,540
main reasons to do serviceworker is to

01:20:32,280 --> 01:20:38,970
make your app work offline and to make

01:20:36,540 --> 01:20:40,440
your app save some information that in

01:20:38,970 --> 01:20:42,510
case you are offline whenever you go

01:20:40,440 --> 01:20:45,300
back online you don't have to redo it

01:20:42,510 --> 01:20:50,610
the app will do its producers for itself

01:20:45,300 --> 01:20:55,200
so for that thing what we need to do is

01:20:50,610 --> 01:21:00,300
if you go back to your web pack dot

01:20:55,200 --> 01:21:04,800
config dot J's depending on the ID if

01:21:00,300 --> 01:21:07,710
you search and go to this file the pack

01:21:04,800 --> 01:21:10,650
is a kind of library that allows you to

01:21:07,710 --> 01:21:12,750
modularize your code and make it more

01:21:10,650 --> 01:21:16,020
focus it resolves the dependencies make

01:21:12,750 --> 01:21:19,490
certain chunks of it and just organizes

01:21:16,020 --> 01:21:22,980
that information in smaller or rather

01:21:19,490 --> 01:21:25,380
minified files so it's a pre compiler

01:21:22,980 --> 01:21:29,250
and what we are going to use here you

01:21:25,380 --> 01:21:32,390
see a few commented lines in line 18 on

01:21:29,250 --> 01:21:36,240
your web pack dot config dot J's

01:21:32,390 --> 01:21:40,890
uncomment this line which is constant

01:21:36,240 --> 01:21:42,920
work box web pack plugin and if you

01:21:40,890 --> 01:21:46,730
search

01:21:42,920 --> 01:21:46,730
work box

01:21:52,130 --> 01:21:59,869
uncomment this block from five seven

01:21:58,020 --> 01:22:04,699
zero oops

01:21:59,869 --> 01:22:04,699
from five seven zero to five eight two

01:22:06,469 --> 01:22:15,469
it is commented five seven zero two five

01:22:12,989 --> 01:22:15,469
eight two

01:22:17,830 --> 01:22:29,860
and line here line number 18 and from

01:22:23,770 --> 01:22:39,370
5-7 zero two five eight to step back dot

01:22:29,860 --> 01:22:47,340
config Dargis uncomment line 18 and

01:22:39,370 --> 01:22:47,340
command line 5 72 585

01:22:48,919 --> 01:22:56,649
and once you have done that sorry

01:23:01,370 --> 01:23:08,660
go over and npm build and then PM start

01:23:15,570 --> 01:23:21,640
lines to uncomment again line number 18

01:23:18,670 --> 01:23:26,610
in website config days and line numbers

01:23:21,640 --> 01:23:26,610
570 to 585 see there are no errors

01:24:19,630 --> 01:24:26,450
once you do that and launch your program

01:24:24,080 --> 01:24:29,450
what you would see is if you do NPM

01:24:26,450 --> 01:24:31,790
start NPM run build and NPM start you

01:24:29,450 --> 01:24:35,680
could merge the commands and as you

01:24:31,790 --> 01:24:38,600
launch your browser on your given port

01:24:35,680 --> 01:24:43,880
go to developer tools if you are using

01:24:38,600 --> 01:24:45,650
Chrome or ie or Mozilla and go into the

01:24:43,880 --> 01:24:49,880
application sections you would see

01:24:45,650 --> 01:24:52,490
manifest that shows all the information

01:24:49,880 --> 01:24:57,500
that is what you have already added in

01:24:52,490 --> 01:25:00,110
the manifest different icons the names

01:24:57,500 --> 01:25:05,360
and everything like that and you will

01:25:00,110 --> 01:25:07,720
see a file here named service worker dot

01:25:05,360 --> 01:25:07,720
GS

01:25:09,369 --> 01:25:15,040
within the application manifest and

01:25:11,780 --> 01:25:18,349
service workers see if you have that in

01:25:15,040 --> 01:25:24,099
your application look through developer

01:25:18,349 --> 01:25:24,099
tools now

01:25:33,860 --> 01:25:37,750
to make it simpler clearly everyone can

01:25:35,600 --> 01:25:37,750
use

01:26:01,220 --> 01:26:06,950
not that no here justice

01:26:11,600 --> 01:26:18,440
okay you have already built and drives

01:26:14,760 --> 01:26:18,440
up see ya

01:26:21,480 --> 01:26:33,070
it starts and then give now it's

01:26:31,000 --> 01:26:33,910
generating its Auto generation our

01:26:33,070 --> 01:26:43,750
generation

01:26:33,910 --> 01:26:45,670
yes run star service star okay let's go

01:26:43,750 --> 01:26:47,910
back can you close the browser and

01:26:45,670 --> 01:26:47,910
reopen

01:26:59,790 --> 01:27:07,639
still yeah still not there can you see

01:27:04,030 --> 01:27:09,980
the manifest is that fine yeah

01:27:07,639 --> 01:27:14,090
okay let's go to your website config

01:27:09,980 --> 01:27:18,170
once more and go up do you have the work

01:27:14,090 --> 01:27:24,520
the line number 18 we have done

01:27:18,170 --> 01:27:24,520
to entertained expertise not as yet

01:27:28,040 --> 01:27:36,350
okay all right so I think that is so

01:27:38,660 --> 01:27:43,130
in case you don't see it that's not a

01:27:40,670 --> 01:27:45,470
problem because we will anyways do the

01:27:43,130 --> 01:27:47,510
very initial step to set it up if he

01:27:45,470 --> 01:27:50,830
seeds is well and good but it doesn't

01:27:47,510 --> 01:27:53,480
hurt so what we are going to do next is

01:27:50,830 --> 01:27:55,850
service work as I say it's primarily

01:27:53,480 --> 01:27:58,220
just in JavaScript file that essentially

01:27:55,850 --> 01:28:00,140
would have certain events that would

01:27:58,220 --> 01:28:03,460
intercept what browser means to

01:28:00,140 --> 01:28:03,460
communicate with the server and back

01:28:03,590 --> 01:28:17,240
it relies on certain oops events named

01:28:09,910 --> 01:28:23,110
installed that is event to install the

01:28:17,240 --> 01:28:23,110
Service Worker activate

01:28:24,010 --> 01:28:31,580
to activate the serviceworker the life

01:28:27,620 --> 01:28:41,180
cycle includes installation followed by

01:28:31,580 --> 01:28:45,740
activation followed by termination or in

01:28:41,180 --> 01:28:47,300
between waiting in case so let us go

01:28:45,740 --> 01:28:52,490
through this work cycle and service it's

01:28:47,300 --> 01:28:58,030
about adding the road so while you have

01:28:52,490 --> 01:29:07,450
added that will show thanks

01:28:58,030 --> 01:29:07,450
go to your K index dot GS

01:29:12,290 --> 01:29:17,000
window dot add eventlistener

01:29:17,810 --> 01:29:21,290
have a load event

01:29:32,030 --> 01:29:37,730
while serviceworker is widely supported

01:29:34,749 --> 01:29:39,860
not necessarily all the browser

01:29:37,730 --> 01:29:41,900
supported so we need to check if the

01:29:39,860 --> 01:29:48,070
current navigator that you are using is

01:29:41,900 --> 01:29:48,070
supporting serviceworker or not so here

01:29:49,880 --> 01:30:01,650
service worker in navigator so if your

01:29:59,309 --> 01:30:03,889
navigator currently supports the service

01:30:01,650 --> 01:30:03,889
worker

01:30:14,840 --> 01:30:23,260
if you navigator a supporting service

01:30:17,510 --> 01:30:27,199
worker navigator dot service worker dot

01:30:23,260 --> 01:30:31,489
register it needs an absolute path which

01:30:27,199 --> 01:30:35,239
we will give shortly this is the promise

01:30:31,489 --> 01:30:38,409
that would return a registration object

01:30:35,239 --> 01:30:38,409
to service worker

01:30:42,150 --> 01:30:44,870
sorry

01:32:44,639 --> 01:32:53,939
once you have done this go to your

01:32:47,489 --> 01:33:01,969
source folder and create a new file call

01:32:53,939 --> 01:33:01,969
it service - worker dot J's

01:33:07,450 --> 01:33:16,460
under your source SG - Kleenex under

01:33:13,190 --> 01:33:19,300
source create a new file name service -

01:33:16,460 --> 01:33:19,300
worker

01:33:27,000 --> 01:33:45,140
and add eventlistener install will pass

01:33:42,030 --> 01:33:45,140
at the event object

01:33:57,360 --> 01:34:08,240
and say console dot log installed

01:34:04,250 --> 01:34:08,240
Service Worker

01:34:14,079 --> 01:34:17,010
I'm sorry

01:34:42,580 --> 01:34:47,790
sorry

01:34:44,890 --> 01:34:47,790
the way of you

01:34:50,950 --> 01:34:59,090
the you mean this arrow wait until here

01:34:56,780 --> 01:35:03,590
is a command to sort of and wait until

01:34:59,090 --> 01:35:07,250
whatever follows is executed so the the

01:35:03,590 --> 01:35:08,840
event won't end until whatever are the a

01:35:07,250 --> 01:35:13,940
list of commands that you pass under it

01:35:08,840 --> 01:35:16,040
are executed so this is kind of in at

01:35:13,940 --> 01:35:18,110
the construct within which all that you

01:35:16,040 --> 01:35:21,650
want to execute and E stands for the

01:35:18,110 --> 01:35:29,780
event the event of installation and wait

01:35:21,650 --> 01:35:33,190
until is no yeah so III need does not

01:35:29,780 --> 01:35:33,190
need to be under any error function

01:35:35,740 --> 01:35:43,010
once you have done it you could go back

01:35:38,840 --> 01:35:44,990
to your web pack dot config J's there is

01:35:43,010 --> 01:35:50,990
there are quite a few things there which

01:35:44,990 --> 01:35:56,170
you could get rid of like the new

01:35:50,990 --> 01:35:56,170
regular expression fall back

01:35:58,510 --> 01:36:04,420
trim your wok box configuration down to

01:36:05,219 --> 01:36:08,060
it's much

01:36:32,650 --> 01:36:36,270
sorry this

01:36:40,639 --> 01:36:48,560
and the generate as GDS tableau method

01:36:45,619 --> 01:36:53,030
that you see change it would inject

01:36:48,560 --> 01:36:55,969
manifest so we are not asking this very

01:36:53,030 --> 01:36:58,010
library to generate a service worker but

01:36:55,969 --> 01:37:03,080
a refer a service worker that we are

01:36:58,010 --> 01:37:08,540
creating and this would need a path

01:37:03,080 --> 01:37:12,909
where to pick a service worker from so

01:37:08,540 --> 01:37:12,909
it will be SW SRC

01:37:17,489 --> 01:37:25,860
source folder service - worker dot J's

01:37:29,680 --> 01:37:36,360
and remove this line of clients clean

01:37:58,180 --> 01:38:04,520
okay so you have your service worker in

01:38:01,280 --> 01:38:07,700
place we have the web pack config setup

01:38:04,520 --> 01:38:10,640
and then we have also added an event

01:38:07,700 --> 01:38:13,220
listener for load okay

01:38:10,640 --> 01:38:16,400
I'll also add a console here to sort of

01:38:13,220 --> 01:38:21,620
and see if the event is being fired and

01:38:16,400 --> 01:38:28,180
when the load event and let us see what

01:38:21,620 --> 01:38:28,180
happens so I'll just build it and rerun

01:38:30,900 --> 01:38:39,090
and p.m. run build and NPM starts over

01:38:36,030 --> 01:38:39,090
try it

01:38:52,210 --> 01:38:57,480
very well-received psychic just

01:39:41,270 --> 01:39:58,290
okay in the Lord event I forgot to give

01:39:54,150 --> 01:40:01,460
the path for Service Worker so just add

01:39:58,290 --> 01:40:01,460
the service worker name

01:40:40,440 --> 01:40:47,160
it's like you you're gonna call be

01:40:42,180 --> 01:40:49,580
abased orderly what okay okay yeah yeah

01:40:47,160 --> 01:40:49,580
sure

01:41:21,600 --> 01:41:31,990
yeah sure yeah so I'll just put

01:41:30,040 --> 01:41:32,920
everything on slack so that it's easier

01:41:31,990 --> 01:41:36,160
for you to review

01:41:32,920 --> 01:41:43,470
I first change inductors JS file in

01:41:36,160 --> 01:41:43,470
source adding the windows load event

01:41:44,400 --> 01:41:57,390
after that add Service Worker service -

01:41:50,830 --> 01:42:05,950
worker dot J's in source directory and

01:41:57,390 --> 01:42:10,960
under service worker in service - worker

01:42:05,950 --> 01:42:13,420
dot J's write this line of encode which

01:42:10,960 --> 01:42:15,970
is the install event and we are just

01:42:13,420 --> 01:42:19,350
writing on the console and velocity in

01:42:15,970 --> 01:42:19,350
your web pack config

01:42:20,100 --> 01:42:36,000
from lines 572 573 and sure they look

01:42:27,010 --> 01:42:39,190
like this the back dot config dot chase

01:42:36,000 --> 01:42:42,790
so it's all on the general channel of

01:42:39,190 --> 01:42:58,120
slack now and once you have done these

01:42:42,790 --> 01:43:03,990
things and when you do rebuild NPM run

01:42:58,120 --> 01:43:03,990
build and PM run start server

01:43:11,619 --> 01:43:14,219
just

01:43:33,780 --> 01:43:40,170
senior console if you see messages are

01:43:36,690 --> 01:43:42,360
like this in the window load event I am

01:43:40,170 --> 01:43:46,040
ready to register a service worker and

01:43:42,360 --> 01:43:46,040
install the service worker

01:44:00,400 --> 01:44:08,360
and along with it you would see a

01:44:04,010 --> 01:44:12,950
service worker available with a number

01:44:08,360 --> 01:44:15,800
if you go to application tab in your

01:44:12,950 --> 01:44:17,720
chrome developer tools and go to the

01:44:15,800 --> 01:44:20,240
service worker you should see a service

01:44:17,720 --> 01:44:23,350
worker with a particular number probably

01:44:20,240 --> 01:44:23,350
zero or one

01:44:35,740 --> 01:44:41,380
[Music]

01:44:38,750 --> 01:44:41,380
so

01:44:42,990 --> 01:44:49,420
the pack on this last one is the change

01:44:45,970 --> 01:44:52,290
about the config file so online 572 582

01:44:49,420 --> 01:44:52,290
just replace that

01:44:57,010 --> 01:45:01,289
you know that that conflict yeah

01:45:01,760 --> 01:45:08,239
so this world walks 5-7 to this whole

01:45:05,989 --> 01:45:10,780
object trying to just replace that

01:45:08,239 --> 01:45:10,780
object

01:45:13,780 --> 01:45:19,340
come on

01:45:16,469 --> 01:45:19,340
that should be it

01:45:23,820 --> 01:45:26,990
[Music]

01:45:50,280 --> 01:45:53,280
[Music]

01:46:25,180 --> 01:46:28,199
[Music]

01:46:35,240 --> 01:46:42,510
that's the screen because you get done

01:46:38,730 --> 01:46:52,220
no no HDMI box 100k I thought it was

01:46:42,510 --> 01:46:52,220
alright thank you can you refresh it

01:46:52,550 --> 01:46:55,210
yeah

01:46:58,160 --> 01:47:06,070
okay you have received this is something

01:47:01,910 --> 01:47:06,070
else no clothes

01:47:16,290 --> 01:47:21,940
you don't

01:47:17,830 --> 01:47:23,960
okay you see this one is fine so or does

01:47:21,940 --> 01:47:27,720
not control

01:47:23,960 --> 01:47:32,090
let's go back to the cold inject

01:47:27,720 --> 01:47:36,290
manifest this is fine index

01:47:32,090 --> 01:47:38,620
serviceworker navigate resistor then

01:47:36,290 --> 01:47:40,650
registration

01:47:38,620 --> 01:47:40,650
Oh

01:47:53,280 --> 01:47:56,940
this could be tricky

01:48:12,190 --> 01:48:17,479
lovely

01:48:14,300 --> 01:48:17,479
[Music]

01:48:36,510 --> 01:48:41,710
everyone can see those three messages or

01:48:39,640 --> 01:48:44,400
at least your serviceworker in place

01:48:41,710 --> 01:48:47,200
your serviceworker will look like this

01:48:44,400 --> 01:48:51,580
it will probably have a number zero one

01:48:47,200 --> 01:48:53,850
two activated and is running just

01:48:51,580 --> 01:49:00,430
confirm that you have a message like

01:48:53,850 --> 01:49:02,940
some number is activated and running all

01:49:00,430 --> 01:49:02,940
right cool

01:49:09,640 --> 01:49:17,060
once you have done with that go back to

01:49:14,120 --> 01:49:25,480
your service worker and we'll add one

01:49:17,060 --> 01:49:25,480
more event activate

01:49:33,999 --> 01:49:50,760
II rate activated service

01:50:08,780 --> 01:50:12,310
I'll put this on slack

01:50:37,580 --> 01:50:44,780
and once you do that and you go back to

01:50:41,750 --> 01:50:48,110
your browser and refresh it you would

01:50:44,780 --> 01:50:51,260
see something like this you would see a

01:50:48,110 --> 01:50:54,340
old service worker and new service

01:50:51,260 --> 01:50:54,340
worker that is waiting

01:50:58,469 --> 01:51:02,010
see if that happens

01:51:08,719 --> 01:51:13,999
you're probably zero serviceworker which

01:51:11,969 --> 01:51:16,650
would be activated and running and

01:51:13,999 --> 01:51:22,679
another serviceworker two or three

01:51:16,650 --> 01:51:25,760
waiting to activate once you add the

01:51:22,679 --> 01:51:25,760
activate event

01:52:00,900 --> 01:52:06,760
there is something very interesting

01:52:02,890 --> 01:52:10,390
about web applications now when you work

01:52:06,760 --> 01:52:13,000
on web application and when you probably

01:52:10,390 --> 01:52:14,800
deploy it into the production

01:52:13,000 --> 01:52:17,110
environment and say if someone would be

01:52:14,800 --> 01:52:21,070
consuming this application what do you

01:52:17,110 --> 01:52:24,100
usually take care of you would probably

01:52:21,070 --> 01:52:28,300
ensure that while you really deploy it

01:52:24,100 --> 01:52:30,370
no one is online because if they are

01:52:28,300 --> 01:52:33,460
online they would be impacted in certain

01:52:30,370 --> 01:52:34,780
ways right somebody is working on this

01:52:33,460 --> 01:52:36,780
application and here is the new

01:52:34,780 --> 01:52:39,220
production release that comes in and

01:52:36,780 --> 01:52:41,020
everything has changed the look and feel

01:52:39,220 --> 01:52:43,150
has changed that functionality probably

01:52:41,020 --> 01:52:45,040
no longer exists or probably whatever

01:52:43,150 --> 01:52:46,900
they work they were doing is lost

01:52:45,040 --> 01:52:50,980
because oops

01:52:46,900 --> 01:52:53,650
there was a bounce right and that's a

01:52:50,980 --> 01:52:55,420
common problem that we have with web

01:52:53,650 --> 01:52:58,060
applications because we have to plan a

01:52:55,420 --> 01:52:59,650
release of every application because

01:52:58,060 --> 01:53:01,390
everything is related to the server

01:52:59,650 --> 01:53:03,220
whatever request comes needs to go to

01:53:01,390 --> 01:53:05,200
the server and the response comes from

01:53:03,220 --> 01:53:07,750
there so if there is its downtime on the

01:53:05,200 --> 01:53:11,140
server the application is impacted and

01:53:07,750 --> 01:53:12,550
the users are impacted the way Service

01:53:11,140 --> 01:53:15,190
Worker handles is that whatever

01:53:12,550 --> 01:53:20,620
information you think that is important

01:53:15,190 --> 01:53:21,880
to the users is you cache it use it from

01:53:20,620 --> 01:53:25,540
within the serviceworker

01:53:21,880 --> 01:53:27,850
and while suppose you're working on your

01:53:25,540 --> 01:53:30,820
mobile and then there is a new app

01:53:27,850 --> 01:53:32,860
update usually what happens in native

01:53:30,820 --> 01:53:34,690
apps is that you would receive a

01:53:32,860 --> 01:53:37,000
notification or you would see it in your

01:53:34,690 --> 01:53:39,070
Play Store or App Store that new update

01:53:37,000 --> 01:53:41,980
is available for your app but it does

01:53:39,070 --> 01:53:44,020
not update automatically you could of

01:53:41,980 --> 01:53:45,820
course choose it too but while you are

01:53:44,020 --> 01:53:47,200
working at least it does not it's not

01:53:45,820 --> 01:53:49,120
like you are surfing through an

01:53:47,200 --> 01:53:52,300
Instagram or Facebook oops there is an

01:53:49,120 --> 01:53:54,400
update but restart that does not happen

01:53:52,300 --> 01:53:56,740
in his native apps so how do we control

01:53:54,400 --> 01:53:59,320
that is web app is through serviceworker

01:53:56,740 --> 01:54:01,750
to say that as and when there is a new

01:53:59,320 --> 01:54:04,600
release that happens part of web

01:54:01,750 --> 01:54:07,810
application it has new updated

01:54:04,600 --> 01:54:10,690
serviceworker that would wait in the

01:54:07,810 --> 01:54:12,040
background till the top a time a browser

01:54:10,690 --> 01:54:13,990
is open that

01:54:12,040 --> 01:54:16,750
means a client is working on an

01:54:13,990 --> 01:54:18,670
application the new Service Worker which

01:54:16,750 --> 01:54:21,280
comes with certain changes like we added

01:54:18,670 --> 01:54:24,490
the activate event it would not replace

01:54:21,280 --> 01:54:28,570
the existing one it would wait until all

01:54:24,490 --> 01:54:30,760
the browser's are closed on that all the

01:54:28,570 --> 01:54:33,640
clients on this particular browser are

01:54:30,760 --> 01:54:35,890
closed so if you just do that if you

01:54:33,640 --> 01:54:38,560
have this open and you see something

01:54:35,890 --> 01:54:41,530
like this where one browser is active

01:54:38,560 --> 01:54:45,880
and second one is currently waiting try

01:54:41,530 --> 01:54:49,590
to close your browser see no clients are

01:54:45,880 --> 01:54:49,590
active and launch it again

01:54:55,059 --> 01:55:00,719
I have to open see that all the clients

01:54:58,389 --> 01:55:00,719
are closed

01:55:24,909 --> 01:55:27,600
oops

01:55:28,769 --> 01:55:39,659
open the app try to see if automatically

01:55:37,630 --> 01:55:42,820
updates when you close all your Chrome

01:55:39,659 --> 01:55:45,760
instances and when you close it and you

01:55:42,820 --> 01:55:48,329
reload it it should ideally auto update

01:55:45,760 --> 01:55:51,760
the serviceworker to the newer version

01:55:48,329 --> 01:55:55,719
that means that whenever a user closes

01:55:51,760 --> 01:55:57,369
the app in the background and when he

01:55:55,719 --> 01:55:58,900
opens it against the serviceworker will

01:55:57,369 --> 01:56:00,959
be reinstalled and a new version will be

01:55:58,900 --> 01:56:03,249
updated whatever changes have been made

01:56:00,959 --> 01:56:05,469
so that's the difference between what

01:56:03,249 --> 01:56:07,360
installation is and activate Edition is

01:56:05,469 --> 01:56:09,070
every time you request and there are

01:56:07,360 --> 01:56:10,599
certain changes those will be available

01:56:09,070 --> 01:56:12,610
to Service Worker those will be

01:56:10,599 --> 01:56:14,709
installed but they would not be active

01:56:12,610 --> 01:56:18,130
unless the current application is closed

01:56:14,709 --> 01:56:21,239
and relaunched so see if you are able to

01:56:18,130 --> 01:56:21,239
do that one thing

01:56:30,340 --> 01:56:38,300
honey back once you have done that also

01:56:34,370 --> 01:56:43,370
try this if you now go offline you could

01:56:38,300 --> 01:56:49,760
do certain really adventurous steps stop

01:56:43,370 --> 01:56:53,270
the web server or go in the airplane

01:56:49,760 --> 01:56:55,570
mode and try to refresh see if this

01:56:53,270 --> 01:56:55,570
works

01:57:02,110 --> 01:57:13,099
just close the application and refresh

01:57:05,269 --> 01:57:15,590
it see if it works no right yeah it sure

01:57:13,099 --> 01:57:19,269
it will is still complain about there is

01:57:15,590 --> 01:57:22,190
no internet or the app is not running

01:57:19,269 --> 01:57:25,190
yes because we still need to write the

01:57:22,190 --> 01:57:27,650
code of how this set fetch because

01:57:25,190 --> 01:57:30,110
service worker is not cashing anything

01:57:27,650 --> 01:57:33,440
as yet it is just installed but I said

01:57:30,110 --> 01:57:35,900
dummy does not do anything what you see

01:57:33,440 --> 01:57:37,969
here in your application I want you to

01:57:35,900 --> 01:57:38,989
examine that you would see certain ways

01:57:37,969 --> 01:57:41,530
of storage

01:57:38,989 --> 01:57:45,349
you see local storage session storage

01:57:41,530 --> 01:57:48,800
index DB web sequel cookies cache and

01:57:45,349 --> 01:57:51,710
application cache primarily what is

01:57:48,800 --> 01:57:52,489
being used as a storage mechanism with

01:57:51,710 --> 01:57:55,940
serviceworker

01:57:52,489 --> 01:57:58,730
our cache storage and index TV these are

01:57:55,940 --> 01:58:01,610
all asynchronous storage mechanisms a

01:57:58,730 --> 01:58:03,710
while cache storage is an key value pair

01:58:01,610 --> 01:58:05,840
that could store the information is wall

01:58:03,710 --> 01:58:08,480
information like files that you need to

01:58:05,840 --> 01:58:10,579
be reality or or be often available and

01:58:08,480 --> 01:58:12,429
index TV for certain operation which are

01:58:10,579 --> 01:58:14,980
more structure and more data intensive

01:58:12,429 --> 01:58:17,420
other kind of storage are rather

01:58:14,980 --> 01:58:19,159
synchronous in nature and they don't

01:58:17,420 --> 01:58:20,960
work with serviceworker ideally because

01:58:19,159 --> 01:58:26,269
serviceworker in itself is in a

01:58:20,960 --> 01:58:27,800
synchronous worker so yeah so ideally

01:58:26,269 --> 01:58:30,469
what you would largely be using for

01:58:27,800 --> 01:58:35,030
storage mechanism or cache storage and

01:58:30,469 --> 01:58:36,489
index TV so now that we know that if you

01:58:35,030 --> 01:58:40,159
refresh it

01:58:36,489 --> 01:58:43,389
it says the site cannot be reached so

01:58:40,159 --> 01:58:43,389
let us try to fix this

01:58:44,500 --> 01:58:57,250
so we go back and we say cash and give

01:58:56,449 --> 01:59:06,139
it a name

01:58:57,250 --> 01:59:08,150
my PWA a cash then go ahead and say what

01:59:06,139 --> 01:59:21,409
prize do you want to catch files to

01:59:08,150 --> 01:59:23,440
catch have the default have index dot

01:59:21,409 --> 01:59:23,440
HTML

01:59:27,749 --> 01:59:33,719
okay this is currently what I want to I

01:59:31,019 --> 01:59:36,210
just want the index.html to be cached

01:59:33,719 --> 01:59:43,619
and that's all and how when will I do it

01:59:36,210 --> 01:59:53,070
when I install a serviceworker I would

01:59:43,619 --> 01:59:58,979
say I'll do it after this caches is an

01:59:53,070 --> 02:00:03,050
API dot open use the cache name from

01:59:58,979 --> 02:00:03,050
here - name

02:00:04,090 --> 02:00:11,980
it's a promise so whether it will return

02:00:06,740 --> 02:00:11,980
you a gash so when that cache opens

02:00:13,450 --> 02:00:21,190
cache dot add all files to cache

02:00:48,650 --> 02:00:54,699
and once you have done that try to build

02:00:52,219 --> 02:00:54,699
and run

02:01:01,490 --> 02:01:06,050
I'll put this on slack

02:01:17,979 --> 02:01:24,809
out of this like cash

02:01:30,180 --> 02:01:43,030
okay once you have done that go back

02:01:35,160 --> 02:01:46,870
refresh okay and I think you would have

02:01:43,030 --> 02:01:48,910
no serviceworker try to update it in

02:01:46,870 --> 02:01:54,010
case there is something that's missing

02:01:48,910 --> 02:02:02,400
and then try to go offline probably

02:01:54,010 --> 02:02:02,400
bring down the app sorry what did I do

02:02:08,840 --> 02:02:12,470
and see what it does

02:02:14,550 --> 02:02:17,690
oops buddy

02:02:17,750 --> 02:02:21,260
we run again

02:03:08,640 --> 02:03:10,670
ah

02:03:12,880 --> 02:03:18,309
sorry remove the console I think that is

02:03:15,440 --> 02:03:18,309
creating problem

02:03:36,800 --> 02:03:47,160
refresh update the cache manually or you

02:03:43,680 --> 02:03:48,720
could always choose update on reload so

02:03:47,160 --> 02:03:52,890
that your service worker is always

02:03:48,720 --> 02:03:55,050
updated see that the word version number

02:03:52,890 --> 02:03:58,400
of service worker is updated from

02:03:55,050 --> 02:03:58,400
whatever you last one was

02:04:05,889 --> 02:04:16,980
and after that take the bold step of

02:04:09,300 --> 02:04:16,980
bringing down the server and refresh it

02:04:17,700 --> 02:04:20,330
oops

02:04:22,650 --> 02:04:27,409
and let's see Skinner

02:05:16,900 --> 02:05:21,580
just see once you refresh the

02:05:18,790 --> 02:05:26,260
serviceworker you would see under the

02:05:21,580 --> 02:05:30,520
cache storage an object created for my

02:05:26,260 --> 02:05:33,910
PW Akash if it is not created probably

02:05:30,520 --> 02:05:36,780
it's not refreshed and it will have

02:05:33,910 --> 02:05:36,780
these two values

02:05:39,890 --> 02:05:47,120
and then try to bring down your app and

02:05:44,040 --> 02:05:47,120
then refresh

02:05:50,020 --> 02:05:54,810
Wow somebody a problem

02:06:03,130 --> 02:06:11,950
okay it requires one additional step

02:06:12,880 --> 02:06:18,980
because currently it does not know what

02:06:15,170 --> 02:06:21,590
to do while we have cashed it but it

02:06:18,980 --> 02:06:23,090
does not know that if I receive such a

02:06:21,590 --> 02:06:26,090
request what should I do

02:06:23,090 --> 02:06:33,710
so we got to tell it that whenever you

02:06:26,090 --> 02:06:35,540
go to fetch how do I respond

02:06:33,710 --> 02:06:43,900
how should service worker respond it

02:06:35,540 --> 02:06:43,900
needs to know so a dot respond red

02:06:45,300 --> 02:06:54,850
say if in the caches if you could find

02:06:51,610 --> 02:07:07,500
something that matches this request that

02:06:54,850 --> 02:07:07,500
I make then whatever is the response

02:07:08,760 --> 02:07:18,540
return the response or try to go and

02:07:15,639 --> 02:07:18,540
fetch from the server

02:08:16,630 --> 02:08:25,809
and once you have done this refresh

02:08:23,110 --> 02:08:27,519
update use of this worker if you have

02:08:25,809 --> 02:08:33,639
already checked it would be out updated

02:08:27,519 --> 02:08:35,739
just ensure it is you could also verify

02:08:33,639 --> 02:08:38,019
that you have the latest by looking at

02:08:35,739 --> 02:08:42,630
the sources and the service worker if it

02:08:38,019 --> 02:08:42,630
has whatever updates that you have made

02:08:48,370 --> 02:08:54,250
try to bring down the server and refresh

02:08:59,740 --> 02:09:11,480
you would see a blank page but at least

02:09:03,500 --> 02:09:14,410
you won't see that the site is done see

02:09:11,480 --> 02:09:14,410
if that happens to you

02:09:21,820 --> 02:09:27,380
I'll show the code again add the fetch

02:09:25,010 --> 02:09:29,750
we are saying that whatever request

02:09:27,380 --> 02:09:32,269
comes our way we'll try to return it

02:09:29,750 --> 02:09:34,670
from the cache see if it exists in the

02:09:32,269 --> 02:09:37,150
catch if it does not exist we'll try and

02:09:34,670 --> 02:09:37,150
go and fetch it

02:09:41,690 --> 02:09:48,030
run it update the serviceworker and see

02:09:45,210 --> 02:09:50,840
if you see a blank page instead of the

02:09:48,030 --> 02:09:50,840
site cannot be reached

02:10:09,269 --> 02:10:16,439
yes so probably here is before bedrooms

02:10:12,789 --> 02:10:16,439
done before back home sick

02:10:24,960 --> 02:10:33,480
do you all see blank page instead of the

02:10:28,150 --> 02:10:33,480
site cannot be reached No

02:10:40,489 --> 02:10:46,150
okay service work is pending let us look

02:10:43,790 --> 02:10:51,050
at the service worker what does it show

02:10:46,150 --> 02:10:57,310
you have the regiment yeah index okay

02:10:51,050 --> 02:10:57,310
the site can be reached and extra testy

02:11:00,750 --> 02:11:08,030
Oh Oh I think for you I think you're

02:11:04,890 --> 02:11:08,030
missing something here

02:11:14,090 --> 02:11:23,699
let's go to application oh you can we

02:11:21,239 --> 02:11:27,419
need to see something here so - storage

02:11:23,699 --> 02:11:30,169
is somehow not updated so you don't even

02:11:27,419 --> 02:11:30,169
see serviceworker

02:11:37,360 --> 02:11:45,910
something it's updated 15:25 which is

02:11:40,900 --> 02:11:54,760
fine gas storage so you already have you

02:11:45,910 --> 02:11:57,310
have added everything yes yes so I think

02:11:54,760 --> 02:12:00,130
what we need to do is let's go back to

02:11:57,310 --> 02:12:03,660
the service smoker and you already

02:12:00,130 --> 02:12:03,660
updated the backpack configure

02:12:05,510 --> 02:12:13,570
can we do this in the build folder let

02:12:08,930 --> 02:12:13,570
us see how the service works

02:12:17,949 --> 02:12:29,739
okay can you delete the bill folder and

02:12:21,469 --> 02:12:29,739
rebirth I'll come that side

02:12:34,670 --> 02:12:39,139
yes let's go and see him

02:12:39,810 --> 02:12:44,610
number eight - what did I do

02:12:46,950 --> 02:12:59,160
all remove this concern okay try this

02:12:53,440 --> 02:12:59,160
tryna I need to restart just yes

02:13:14,810 --> 02:13:20,940
and the thing is that if you go offline

02:13:18,420 --> 02:13:22,910
from here serviceworker still has access

02:13:20,940 --> 02:13:25,770
to the server because it knows is there

02:13:22,910 --> 02:13:32,190
so you have to bring down the

02:13:25,770 --> 02:13:34,080
application itself and also do this one

02:13:32,190 --> 02:13:36,960
more thing because I think whatever it

02:13:34,080 --> 02:13:43,440
is in the history is not cleared so if

02:13:36,960 --> 02:13:45,180
you could clear this oh ok ok so once

02:13:43,440 --> 02:13:48,080
you launch the application clear the

02:13:45,180 --> 02:13:51,380
storage and then try it again so what

02:13:48,080 --> 02:13:51,380
you can get

02:13:53,440 --> 02:13:59,170
evade until you have go until you are

02:13:56,540 --> 02:13:59,170
missing an and

02:14:01,920 --> 02:14:06,119
you mdl until

02:14:20,660 --> 02:14:28,710
so if you already see blank page its of

02:14:24,360 --> 02:14:31,110
no use right you would notice that lots

02:14:28,710 --> 02:14:33,210
of things are missing because we are

02:14:31,110 --> 02:14:35,700
building this whole work package through

02:14:33,210 --> 02:14:37,740
web back and it chunks down all your

02:14:35,700 --> 02:14:40,980
JavaScript files and your CSS and

02:14:37,740 --> 02:14:42,840
everything so when the service worker

02:14:40,980 --> 02:14:45,180
goes and look out for file it doesn't

02:14:42,840 --> 02:14:48,240
get the whole file it just because these

02:14:45,180 --> 02:14:50,640
are rather auto-generated so one way to

02:14:48,240 --> 02:14:53,430
sort of and do it is to sort of end you

02:14:50,640 --> 02:14:55,800
have a plug-in for serviceworker in your

02:14:53,430 --> 02:14:57,510
web pack config and say that you know in

02:14:55,800 --> 02:14:59,730
the runtime try to identify the

02:14:57,510 --> 02:15:02,250
dependencies and add all those lists in

02:14:59,730 --> 02:15:04,320
your zone self that itself is a tedious

02:15:02,250 --> 02:15:07,410
task or you could start up and go ahead

02:15:04,320 --> 02:15:15,960
and if you just want to try you could

02:15:07,410 --> 02:15:20,010
copy one go back said sorry you could

02:15:15,960 --> 02:15:21,930
keep on adding that to your list of

02:15:20,010 --> 02:15:26,850
files to cache and you see that it will

02:15:21,930 --> 02:15:28,320
eventually get resolved but we don't

02:15:26,850 --> 02:15:31,860
need to do that because there is a much

02:15:28,320 --> 02:15:34,530
easier way some of you might already be

02:15:31,860 --> 02:15:35,910
aware of work box which is a Google

02:15:34,530 --> 02:15:37,590
product which simplifies the

02:15:35,910 --> 02:15:40,110
implementation of Service Worker

02:15:37,590 --> 02:15:42,750
the reason why I showed you this Service

02:15:40,110 --> 02:15:45,990
Worker is because this is what how it

02:15:42,750 --> 02:15:48,600
actually is work box look makes it look

02:15:45,990 --> 02:15:52,590
much more simpler and much more easy to

02:15:48,600 --> 02:15:54,570
implement but what what box actually

02:15:52,590 --> 02:15:56,130
hides all the complexity so you don't

02:15:54,570 --> 02:15:59,100
know what happens on install and

02:15:56,130 --> 02:16:00,930
activate and fetch and sync and so on so

02:15:59,100 --> 02:16:02,790
that's why was this demo to just

02:16:00,930 --> 02:16:05,070
understand what serviceworker and how it

02:16:02,790 --> 02:16:06,750
actually functions but actually don't

02:16:05,070 --> 02:16:11,610
need to write any of this code if you

02:16:06,750 --> 02:16:14,310
are using bug box so I'll quickly show

02:16:11,610 --> 02:16:17,930
you that how by just one line of code

02:16:14,310 --> 02:16:17,930
could replace all of this

02:16:20,270 --> 02:16:27,360
you already have work box installed

02:16:23,820 --> 02:16:31,200
through the web.config so I just copy

02:16:27,360 --> 02:16:34,800
this one line if you have these things

02:16:31,200 --> 02:16:40,850
working rather you could just comment

02:16:34,800 --> 02:16:43,580
this out and go ahead and say work box

02:16:40,850 --> 02:16:46,250
dot

02:16:43,580 --> 02:16:49,250
[Music]

02:16:46,250 --> 02:16:49,250
pre-caching

02:16:54,540 --> 02:17:01,229
dot free cash and route

02:17:02,939 --> 02:17:13,739
self dot underscore three cache manifest

02:17:16,740 --> 02:17:21,440
or an MBA

02:17:28,869 --> 02:17:35,199
just write this one line and comment

02:17:31,550 --> 02:17:35,199
everything else in serviceworker

02:17:37,400 --> 02:17:43,040
posting this on the slap

02:17:51,869 --> 02:17:59,550
and after this and being run star server

02:18:07,130 --> 02:18:12,630
we have already installed a plug-in for

02:18:09,989 --> 02:18:14,819
work box in our web config and then we

02:18:12,630 --> 02:18:20,960
are already passing it the necessary

02:18:14,819 --> 02:18:24,420
parameter to pick from the PCAST list so

02:18:20,960 --> 02:18:27,420
ideally when you run it you probably

02:18:24,420 --> 02:18:30,870
would see that it is encapsulating the

02:18:27,420 --> 02:18:33,599
install activate fetch and all the files

02:18:30,870 --> 02:18:35,819
that it deems necessary for caching

02:18:33,599 --> 02:18:37,109
which essentially means everything that

02:18:35,819 --> 02:18:40,200
is in the public folder of your

02:18:37,109 --> 02:18:47,609
application bd-r images be it your

02:18:40,200 --> 02:18:50,160
generic J's files or index.html and if

02:18:47,609 --> 02:18:50,599
you go back to your browser you refresh

02:18:50,160 --> 02:18:54,840
it

02:18:50,599 --> 02:19:01,639
ensure that your serviceworker is

02:18:54,840 --> 02:19:01,639
updated cache

02:19:03,160 --> 02:19:09,450
- of it pretty good

02:19:23,710 --> 02:19:26,550
is

02:20:37,439 --> 02:20:47,910
one typo there if you are copying from

02:20:42,630 --> 02:20:47,910
slack use this instead

02:21:04,450 --> 02:21:08,890
note that double underscores here

02:21:25,421 --> 02:21:31,990
once you update your serviceworker you

02:21:28,250 --> 02:21:31,990
would see messages like this

02:22:26,050 --> 02:22:30,010
once you do that if work box is

02:22:28,270 --> 02:22:33,580
installed and you bring down your

02:22:30,010 --> 02:22:35,530
application refresh it you are still

02:22:33,580 --> 02:22:37,720
missing a few things but you will see

02:22:35,530 --> 02:22:40,479
most of things are auto drawn without

02:22:37,720 --> 02:22:42,939
you writing a single line of code so we

02:22:40,479 --> 02:22:44,170
have not we have commented installed we

02:22:42,939 --> 02:22:47,020
have commented activate we have

02:22:44,170 --> 02:22:48,550
committed commented fetch but yeah it's

02:22:47,020 --> 02:22:51,790
everything is then bound within the

02:22:48,550 --> 02:22:53,380
world box so it makes life much more

02:22:51,790 --> 02:22:59,830
easier when you have to deal with these

02:22:53,380 --> 02:23:02,740
things the next thing is different

02:22:59,830 --> 02:23:05,320
strategies of dealing with offline

02:23:02,740 --> 02:23:07,170
content and online content backgrounds

02:23:05,320 --> 02:23:09,790
synchronization and push notifications

02:23:07,170 --> 02:23:14,400
but I guess we all need a little bit of

02:23:09,790 --> 02:23:14,400
break so let's give it five minutes

02:24:56,280 --> 02:25:04,721
all right thank you welcome back so

02:25:01,030 --> 02:25:07,301
before the break we saw that how you

02:25:04,721 --> 02:25:09,580
could use work box or service worker to

02:25:07,301 --> 02:25:11,620
get the offline capability by caching

02:25:09,580 --> 02:25:13,711
certain requests there are different

02:25:11,620 --> 02:25:17,740
strategies to that you could sort of and

02:25:13,711 --> 02:25:20,730
use while caching say what specific

02:25:17,740 --> 02:25:23,860
things you want to cache when to cache

02:25:20,730 --> 02:25:26,351
there could be things like your strive

02:25:23,860 --> 02:25:28,961
sheets and images and so that you might

02:25:26,351 --> 02:25:31,601
always prefer to pick from caches and

02:25:28,961 --> 02:25:33,551
rather certain transaction requests that

02:25:31,601 --> 02:25:36,971
you send to the server you never want to

02:25:33,551 --> 02:25:39,221
cache them work box offers you and

02:25:36,971 --> 02:25:40,601
serviceworker in turn offers you

02:25:39,221 --> 02:25:44,141
different strategies that you could

02:25:40,601 --> 02:25:46,240
essentially use which you could define

02:25:44,141 --> 02:25:48,221
whether you want to just always look up

02:25:46,240 --> 02:25:50,561
for a certain request from cash only or

02:25:48,221 --> 02:25:54,011
certain requests from always-on network

02:25:50,561 --> 02:25:56,740
or first if it is not available on the

02:25:54,011 --> 02:25:58,541
network picked from the cache or first

02:25:56,740 --> 02:26:00,881
just go to the cache and while you

02:25:58,541 --> 02:26:03,101
refresh in the background returned from

02:26:00,881 --> 02:26:05,980
the cache and then update it and keep

02:26:03,101 --> 02:26:08,261
the copies updated I show you a very

02:26:05,980 --> 02:26:11,471
quick example of what it is I realize

02:26:08,261 --> 02:26:13,811
that we are very short of time but I'll

02:26:11,471 --> 02:26:16,471
just give you a demo of how you could

02:26:13,811 --> 02:26:22,530
really just do one strategy of cache

02:26:16,471 --> 02:26:22,530
work dot routing dot

02:26:23,600 --> 02:26:30,350
and register route

02:26:32,311 --> 02:26:38,320
it takes two to three parameters one you

02:26:35,980 --> 02:26:41,700
could give it a regular expression of

02:26:38,320 --> 02:26:41,700
the path that you are looking for

02:26:47,889 --> 02:27:01,689
and it takes the strategy so workbox got

02:26:52,479 --> 02:27:05,619
strategies dot cache first Network first

02:27:01,689 --> 02:27:08,229
cache only these kind of things that you

02:27:05,619 --> 02:27:09,939
could use to define the different

02:27:08,229 --> 02:27:12,609
strategies are available in cashflow

02:27:09,939 --> 02:27:15,039
strategy what your service worker would

02:27:12,609 --> 02:27:17,199
do is is to first try to pick from the

02:27:15,039 --> 02:27:19,409
cache or self if it is not available in

02:27:17,199 --> 02:27:23,020
the cache then go to the network for

02:27:19,409 --> 02:27:26,649
this particular endpoint or server

02:27:23,020 --> 02:27:29,729
resource that we had a questing quick

02:27:26,649 --> 02:27:33,249
view if you just go to work box

02:27:29,729 --> 02:27:36,819
strategies you would find a quick

02:27:33,249 --> 02:27:38,939
documentation here that lists about the

02:27:36,819 --> 02:27:42,339
different strategies that are available

02:27:38,939 --> 02:27:44,229
the syntax is pretty simple regular

02:27:42,339 --> 02:27:45,999
expression whether you are looking for

02:27:44,229 --> 02:27:49,029
images you're looking for specific

02:27:45,999 --> 02:27:51,639
resources just name it by strategy and

02:27:49,029 --> 02:27:54,939
that's the only little code that we need

02:27:51,639 --> 02:27:58,629
to write for this we'll see one of the

02:27:54,939 --> 02:28:02,560
strategies as we are moved on to see the

02:27:58,629 --> 02:28:05,409
background synchronization background

02:28:02,560 --> 02:28:07,449
synchronization is something that while

02:28:05,409 --> 02:28:11,039
you're on your device and you're working

02:28:07,449 --> 02:28:13,719
on something and suppose you go offline

02:28:11,039 --> 02:28:15,999
you may lose your work so how to

02:28:13,719 --> 02:28:18,909
essentially avoid that and how not to

02:28:15,999 --> 02:28:21,399
redo it a classic example is your

02:28:18,909 --> 02:28:23,979
whatsapp chats right so you're talking

02:28:21,399 --> 02:28:25,899
to somebody and you're sending messages

02:28:23,979 --> 02:28:29,319
and everything but if you get into an

02:28:25,899 --> 02:28:30,999
MRT and you lose your network your

02:28:29,319 --> 02:28:31,929
message does not go through but do you

02:28:30,999 --> 02:28:36,039
have to rewrite it

02:28:31,929 --> 02:28:38,889
no you just probably write it you post

02:28:36,039 --> 02:28:40,689
it it shows that yes it has gone out

02:28:38,889 --> 02:28:42,699
from your window but it has not yet been

02:28:40,689 --> 02:28:45,369
delivered probably it would get

02:28:42,699 --> 02:28:47,109
delivered once you come back in or it

02:28:45,369 --> 02:28:48,699
would say still waiting I cannot find

02:28:47,109 --> 02:28:50,409
Network so you would see a wait sign in

02:28:48,699 --> 02:28:53,589
there but you don't have to really

02:28:50,409 --> 02:28:56,770
repost it and how do you bring that kind

02:28:53,589 --> 02:28:58,160
of in capability on the web app is what

02:28:56,770 --> 02:29:01,130
background synchronization is

02:28:58,160 --> 02:29:04,910
all about so let's see an example of

02:29:01,130 --> 02:29:08,950
that one for that I would request you to

02:29:04,910 --> 02:29:08,950
go to server door GS

02:29:16,550 --> 02:29:21,530
let us add a end point here

02:29:25,960 --> 02:29:45,609
and call it babe another words this is

02:29:37,000 --> 02:29:54,130
what everything is here

02:29:45,609 --> 02:30:03,569
Austin with one line subscription I'll

02:29:54,130 --> 02:30:06,640
just come and give something else yeah

02:30:03,569 --> 02:30:08,800
let me not use this one or you just I'll

02:30:06,640 --> 02:30:16,359
just say book what I'll just comment it

02:30:08,800 --> 02:30:19,680
out okay so you already have this in b1

02:30:16,359 --> 02:30:20,949
it's already on the server right oh

02:30:19,680 --> 02:30:23,949
sorry

02:30:20,949 --> 02:30:27,130
so in the server are in your server you

02:30:23,949 --> 02:30:29,020
would already see this one endpoint you

02:30:27,130 --> 02:30:32,550
could come into all the things and let's

02:30:29,020 --> 02:30:42,569
sort of and just see that if we could

02:30:32,550 --> 02:30:46,350
dot send object back and say call it

02:30:42,569 --> 02:30:46,350
looking skaters

02:30:47,430 --> 02:31:00,440
as bummed okay and for the time being I

02:30:55,710 --> 02:31:00,440
will just make it get instead of post

02:31:06,180 --> 02:31:15,590
okay once you do this run the app let's

02:31:12,749 --> 02:31:15,590
see if this works

02:31:26,050 --> 02:31:37,180
okay go on localhost 4000 our endpoint

02:31:34,840 --> 02:31:39,630
is booked see if you are able to access

02:31:37,180 --> 02:31:39,630
this

02:31:40,620 --> 02:31:42,649
ah

02:31:49,131 --> 02:32:01,670
for the time being also come in the app

02:31:51,740 --> 02:32:04,131
use HTTP PS it's from line 16 to 23 on

02:32:01,670 --> 02:32:09,070
server dot J's just commend it for the

02:32:04,131 --> 02:32:15,971
time being and in the book just have a

02:32:09,070 --> 02:32:15,971
dummy sample value written restart

02:32:42,560 --> 02:32:48,069
see if you see a response coming back

02:32:45,529 --> 02:32:48,069
from the server

02:32:57,860 --> 02:33:01,550
you share the snippet

02:33:04,030 --> 02:33:06,690
yeah

02:33:07,711 --> 02:33:13,091
in serviceworker there is order I ignore

02:33:11,561 --> 02:33:16,391
this code that was just a sample this is

02:33:13,091 --> 02:33:22,721
not related to that so yeah you don't

02:33:16,391 --> 02:33:26,400
need to do this as of now suggest in the

02:33:22,721 --> 02:33:34,391
book have this one object return and

02:33:26,400 --> 02:33:36,101
comment over the HTTPS part okay see if

02:33:34,391 --> 02:33:43,870
you are able to see this response coming

02:33:36,101 --> 02:33:46,751
from the server all right lovely I just

02:33:43,870 --> 02:33:48,851
see everything is updated I'll just

02:33:46,751 --> 02:33:50,410
clear your storage and everything so

02:33:48,851 --> 02:33:57,160
that we could have a fresh view at the

02:33:50,410 --> 02:33:59,131
data that would come in here and then go

02:33:57,160 --> 02:34:03,240
back to the serviceworker

02:33:59,131 --> 02:34:03,240
let us have a strategy

02:34:08,169 --> 02:34:22,159
where we will say this very end point

02:34:14,060 --> 02:34:24,560
book new work box strategy now suppose

02:34:22,159 --> 02:34:26,419
this is something that we really want to

02:34:24,560 --> 02:34:29,359
get delivered to the server and get a

02:34:26,419 --> 02:34:31,220
response from the server so in this case

02:34:29,359 --> 02:34:33,859
where we want the message to be

02:34:31,220 --> 02:34:36,770
delivered for instance we are doing a

02:34:33,859 --> 02:34:38,390
bank transaction a cache won't do there

02:34:36,770 --> 02:34:41,629
right we really want the network to

02:34:38,390 --> 02:34:50,119
reply over so the strategy that we would

02:34:41,629 --> 02:34:52,339
use for this booking is network only in

02:34:50,119 --> 02:34:55,699
this strategy itself you could use

02:34:52,339 --> 02:35:00,319
certain parameters and plug in what we

02:34:55,699 --> 02:35:05,229
are going to use is a plugin which is

02:35:00,319 --> 02:35:05,229
work box dot background sync

02:35:07,540 --> 02:35:11,609
and give it a name

02:35:20,371 --> 02:35:29,991
I say sing okay

02:35:42,001 --> 02:35:44,961
okay

02:35:45,220 --> 02:35:50,800
object ensure this is object

02:36:00,570 --> 02:36:09,920
lexpark strategies

02:36:05,120 --> 02:36:09,920
network on me yep

02:36:14,961 --> 02:36:20,571
so what it will do in turn is it will

02:36:18,411 --> 02:36:26,331
call the sink event for Service Worker

02:36:20,571 --> 02:36:29,721
and for every request that is routed to

02:36:26,331 --> 02:36:31,730
book it intends to go to the network so

02:36:29,721 --> 02:36:33,831
nothing should be picked from the cache

02:36:31,730 --> 02:36:36,171
itself so this request will not be

02:36:33,831 --> 02:36:38,751
cached the serviceworker will always try

02:36:36,171 --> 02:36:41,241
to hit the network in case it's not able

02:36:38,751 --> 02:36:44,871
to hit the network it will store that

02:36:41,241 --> 02:36:46,911
request in a cache and the next time the

02:36:44,871 --> 02:36:50,121
network is available it will try to post

02:36:46,911 --> 02:36:53,261
that request so let's see if you can

02:36:50,121 --> 02:36:53,261
make this work

02:36:54,130 --> 02:36:58,680
and p.m. run build and start

02:37:05,480 --> 02:37:10,021
so we have already seen that we get a

02:37:08,130 --> 02:37:13,080
response from the booking statuses

02:37:10,021 --> 02:37:19,500
booked we have cleared our data let us

02:37:13,080 --> 02:37:21,180
go back once it's ready and I'll just

02:37:19,500 --> 02:37:23,851
see everything is clear

02:37:21,180 --> 02:37:28,950
notice that indexdb is currently null it

02:37:23,851 --> 02:37:32,990
does not have anything okay and the

02:37:28,950 --> 02:37:32,990
service worker just updated

02:37:34,681 --> 02:37:41,120
so for me it's installing let's give it

02:37:38,790 --> 02:37:41,120
a while

02:37:51,569 --> 02:37:56,310
register some type of

02:38:23,340 --> 02:38:25,340
Oh

02:38:31,340 --> 02:38:47,039
sorry the very name is different

02:38:36,380 --> 02:38:49,880
change the regex to reg X yeah take it

02:38:47,039 --> 02:38:49,880
back on slack

02:38:54,181 --> 02:38:57,391
labeled at

02:39:01,780 --> 02:39:08,141
feel free to use node1 if you have I did

02:39:05,360 --> 02:39:08,141
not install it

02:39:21,240 --> 02:39:25,390
refresh it see the time it was last

02:39:24,190 --> 02:39:31,660
updated

02:39:25,390 --> 02:39:36,760
it means updating I just updated mind it

02:39:31,660 --> 02:39:41,770
is precast six files now what I will do

02:39:36,760 --> 02:39:44,170
is I will try to go offline in the

02:39:41,770 --> 02:39:48,790
airplane mode but since I'm running this

02:39:44,170 --> 02:39:58,450
locally it will still hit my server so I

02:39:48,790 --> 02:40:06,750
will also bring my app down and call the

02:39:58,450 --> 02:40:06,750
book endpoint see if it does okay

02:40:07,101 --> 02:40:10,400
go back

02:40:12,561 --> 02:40:19,521
you will see that in the indexdb there

02:40:16,591 --> 02:40:19,521
is an entry now

02:40:23,580 --> 02:40:27,620
which reads like this

02:40:27,730 --> 02:40:36,230
the Rope requests data in the certain

02:40:31,940 --> 02:40:39,230
queue sync you name and to this URL and

02:40:36,230 --> 02:40:41,150
whatever information we are sending idly

02:40:39,230 --> 02:40:43,311
to do post requests there you do sending

02:40:41,150 --> 02:40:45,351
a whole body a lot of information but we

02:40:43,311 --> 02:40:47,931
just did a simple request which does not

02:40:45,351 --> 02:40:50,030
have a lot of information but yes it is

02:40:47,931 --> 02:40:53,721
something that is automatically added to

02:40:50,030 --> 02:40:55,610
a queue but it is not the serviceworker

02:40:53,721 --> 02:40:58,011
is not returning your result it is

02:40:55,610 --> 02:41:00,051
storing that so that whenever the server

02:40:58,011 --> 02:41:04,040
is back online it could be sent to the

02:41:00,051 --> 02:41:10,341
server now if you go back if I go back

02:41:04,040 --> 02:41:14,181
and restart the server and also switch

02:41:10,341 --> 02:41:17,660
off my airplane mode let's see if we see

02:41:14,181 --> 02:41:20,601
something in the console and if ideally

02:41:17,660 --> 02:41:23,920
whenever the serviceworker detects that

02:41:20,601 --> 02:41:27,170
it's back online it would fire event

02:41:23,920 --> 02:41:29,990
background sync for tank request added

02:41:27,170 --> 02:41:32,420
to the sync the request failed to replay

02:41:29,990 --> 02:41:34,551
because it was still offline and then it

02:41:32,420 --> 02:41:37,091
will replay at a certain point in time

02:41:34,551 --> 02:41:41,391
it will retry and this would eventually

02:41:37,091 --> 02:41:44,950
get clear try it if you could replicate

02:41:41,391 --> 02:41:44,950
this in your machines

02:43:21,040 --> 02:43:28,130
what's wrong my service book though it

02:43:23,240 --> 02:43:30,140
should be like this right yes and then

02:43:28,130 --> 02:43:33,649
we have server which is just simply

02:43:30,140 --> 02:43:37,660
telling this yes and I running so I just

02:43:33,649 --> 02:43:37,660
rewrite this

02:43:53,109 --> 02:44:01,840
visitor slow country no it shouldn't be

02:43:58,210 --> 02:44:07,800
but here you can still enter sorry yeah

02:44:01,840 --> 02:44:07,800
yeah yes I think you should thank you

02:44:08,220 --> 02:44:11,640
thank you very much

02:44:13,260 --> 02:44:25,329
people seated okay yes you see there to

02:44:17,649 --> 02:44:27,130
request yes yeah so this is already sort

02:44:25,329 --> 02:44:30,100
of and so when you were off it has

02:44:27,130 --> 02:44:35,439
already added it and now as are you an

02:44:30,100 --> 02:44:37,239
airplane mode yes so what you could

02:44:35,439 --> 02:44:40,930
summon try to do is is to sort of

02:44:37,239 --> 02:44:43,869
enforce clear this index TV and then you

02:44:40,930 --> 02:44:46,749
go to a plane mode run it see it will

02:44:43,869 --> 02:44:49,600
get added here and then as soon as you

02:44:46,749 --> 02:44:53,399
turn that off and you come back online

02:44:49,600 --> 02:44:53,399
this queue will automatically be cleared

02:44:54,899 --> 02:44:59,859
yeah it will listen it detects that you

02:44:57,609 --> 02:45:02,909
are not connected to internet as far as

02:44:59,859 --> 02:45:02,909
serviceworker is concerned

02:45:13,319 --> 02:45:51,899
- okay - give a substitution object to

02:45:49,000 --> 02:45:57,910
the server so that the server wants to

02:45:51,899 --> 02:46:02,100
use each client and all this information

02:45:57,910 --> 02:46:02,100
then what it can forget wine

02:46:20,950 --> 02:46:24,221
so they have

02:46:41,300 --> 02:46:44,330
[Music]

02:47:05,700 --> 02:47:12,160
first let's clean up this class

02:47:09,430 --> 02:47:14,710
appointment reviewed ojs under booking

02:47:12,160 --> 02:47:19,980
so a few changes you need to make just

02:47:14,710 --> 02:47:22,450
uncomment this first if it is commented

02:47:19,980 --> 02:47:26,521
and also you have to make sure this

02:47:22,450 --> 02:47:26,521
method exists poke appointment

02:47:30,290 --> 02:47:33,130
that's it

02:47:33,690 --> 02:47:41,790
yeah well good okay the next thing you

02:47:37,300 --> 02:47:41,790
need to do is go to server dot Jas

02:47:51,460 --> 02:48:00,540
just whatever we have done just revert

02:47:54,160 --> 02:48:00,540
this change uncomment those lines

02:48:02,351 --> 02:48:06,040
make it post back

02:48:09,609 --> 02:48:16,899
okay so if you want I can post this I'm

02:48:15,189 --> 02:48:18,729
just going to make small change this

02:48:16,899 --> 02:48:20,849
line will not be here in your code I'm

02:48:18,729 --> 02:48:24,629
going to make it

02:48:20,849 --> 02:48:24,629
subscription checked

02:48:33,920 --> 02:48:41,480
okay so I'll just put this in slack you

02:48:38,521 --> 02:48:41,480
can just copy and paste

02:48:57,469 --> 02:49:01,299
I think it is tone will keep

02:49:07,510 --> 02:49:20,030
let me run it so just few changes

02:49:17,240 --> 02:49:22,040
appointment review Jas you are just

02:49:20,030 --> 02:49:25,280
putting back the methods notification

02:49:22,040 --> 02:49:29,870
book appointment and enabling this

02:49:25,280 --> 02:49:34,130
method and then server Jas you are

02:49:29,870 --> 02:49:35,960
reverting the previous changes and

02:49:34,130 --> 02:49:37,670
making it post and this one I have

02:49:35,960 --> 02:49:48,950
pasted this in slack you can just copy

02:49:37,670 --> 02:49:51,020
and paste okay let's see maybe you can

02:49:48,950 --> 02:49:53,060
watch first and then I will send all the

02:49:51,020 --> 02:49:56,830
code through a slack and then you can

02:49:53,060 --> 02:49:56,830
try it on you around okay

02:50:22,320 --> 02:50:29,930
okay so let's go back 4,000

02:50:31,570 --> 02:50:46,990
so just for make it everything clean so

02:50:41,970 --> 02:50:51,420
update maybe unregister go to clear

02:50:46,990 --> 02:50:51,420
storage Clea site data

02:51:03,909 --> 02:51:12,550
you start okay good so the scenario we

02:51:09,790 --> 02:51:14,140
are going to replicate is let's say you

02:51:12,550 --> 02:51:17,199
are trying to book appointment you are

02:51:14,140 --> 02:51:19,960
an a.m. at Amati train and then suddenly

02:51:17,199 --> 02:51:21,399
the network goes off you want the

02:51:19,960 --> 02:51:23,199
appointment still go through when you

02:51:21,399 --> 02:51:24,550
are back online and then you want to

02:51:23,199 --> 02:51:27,580
receive a notification that the

02:51:24,550 --> 02:51:31,390
appointment has been booked or not so

02:51:27,580 --> 02:51:34,779
let's see book so this is the normal

02:51:31,390 --> 02:51:36,220
case so let's go over this this normal

02:51:34,779 --> 02:51:39,550
case confirmed the appointment status

02:51:36,220 --> 02:51:42,869
will be confirmed let's switch off the

02:51:39,550 --> 02:51:42,869
network make it offline

02:51:46,950 --> 02:51:52,870
okay if you're offline you will see this

02:51:49,660 --> 02:51:54,490
additional text it seems you are offline

02:51:52,870 --> 02:51:55,870
don't worry we can book the appointment

02:51:54,490 --> 02:51:58,660
automatically when you are back online

02:51:55,870 --> 02:51:59,771
do you wish to proceed we are asking the

02:51:58,660 --> 02:52:02,080
users permission whether they are

02:51:59,771 --> 02:52:05,710
working to go ahead so they have to

02:52:02,080 --> 02:52:07,510
choose this yes at this point in time

02:52:05,710 --> 02:52:09,101
when you are doing first time it will

02:52:07,510 --> 02:52:11,170
ask you whether do you want to allow

02:52:09,101 --> 02:52:15,360
this website to share notification the

02:52:11,170 --> 02:52:18,700
client has to say yes then you go next

02:52:15,360 --> 02:52:22,800
the final status will be pending but

02:52:18,700 --> 02:52:22,800
it's okay but once you are back online

02:52:23,040 --> 02:52:26,950
you should be receiving a notification

02:52:25,030 --> 02:52:30,880
that appointment has been booked that's

02:52:26,950 --> 02:52:35,130
what we are going to try now okay for

02:52:30,880 --> 02:52:35,130
that let's go to the code the first step

02:52:35,529 --> 02:52:45,310
I prepared a cheat sheet let me face

02:52:40,630 --> 02:52:47,229
this don't worry I will pierce the steps

02:52:45,310 --> 02:52:49,630
in slack so that you can follow one by

02:52:47,229 --> 02:52:52,930
one so first is there is a library

02:52:49,630 --> 02:52:54,909
called web push which will help us to

02:52:52,930 --> 02:52:57,249
commit the server to communicate with

02:52:54,909 --> 02:52:58,659
the push service so you have seen in the

02:52:57,249 --> 02:53:00,279
diagram there is a push service for

02:52:58,659 --> 02:53:01,510
Safari Chrome and everything we don't

02:53:00,279 --> 02:53:03,399
need to write code there is a library

02:53:01,510 --> 02:53:04,930
which will help us to communicate to the

02:53:03,399 --> 02:53:07,329
right push service and then deliver the

02:53:04,930 --> 02:53:10,840
message and also since we are

02:53:07,329 --> 02:53:13,060
communicating with the push service so

02:53:10,840 --> 02:53:14,649
everything has to be encrypted so the

02:53:13,060 --> 02:53:16,959
message has to be encrypted so we have

02:53:14,649 --> 02:53:20,079
to use private and public key so the

02:53:16,959 --> 02:53:23,789
first step here is NPM install global

02:53:20,079 --> 02:53:23,789
web push so let's do it one by one

02:53:25,081 --> 02:53:35,101
okay npm install global we are going to

02:53:33,150 --> 02:53:41,271
create a pair of public key and private

02:53:35,101 --> 02:53:41,271
key okay so this is a second command

02:53:44,869 --> 02:53:53,119
web push generate rapid keys yesin so

02:53:48,420 --> 02:53:53,119
you get a pair of private and public key

02:53:53,180 --> 02:53:57,979
just need to copy this public key

02:54:05,270 --> 02:54:11,479
okay so here I have a file called vapid

02:54:08,510 --> 02:54:14,390
Keys everything commented out let's

02:54:11,479 --> 02:54:22,100
uncomment since I generated a new set of

02:54:14,390 --> 02:54:25,120
key let me replace it this is public let

02:54:22,100 --> 02:54:25,120
me copy the private

02:54:35,850 --> 02:54:40,510
that's it so we have created a private

02:54:38,740 --> 02:54:43,120
and public key using the web push tool

02:54:40,510 --> 02:54:45,850
and then it is there so we just updated

02:54:43,120 --> 02:54:48,340
the rapid keys we will be using it the

02:54:45,850 --> 02:54:50,890
server has to have both the keys but the

02:54:48,340 --> 02:54:53,680
server has to give the public key to the

02:54:50,890 --> 02:54:55,660
client so that the client has the public

02:54:53,680 --> 02:54:58,290
key but the server has both the keys

02:54:55,660 --> 02:54:58,290
okay

02:55:00,670 --> 02:55:06,050
so we have updated we have done with the

02:55:03,020 --> 02:55:08,270
step three so now we need to go to step

02:55:06,050 --> 02:55:10,610
four when the user clicks the toggle

02:55:08,270 --> 02:55:13,220
button notify me when the appointment is

02:55:10,610 --> 02:55:15,890
booked so we have to put some code

02:55:13,220 --> 02:55:21,020
so this is the code the interest of time

02:55:15,890 --> 02:55:24,200
I will just copy and paste so a pieman

02:55:21,020 --> 02:55:26,750
review so you have this spot

02:55:24,200 --> 02:55:29,630
push notification code here so what

02:55:26,750 --> 02:55:33,250
happens when the user clicks the toggle

02:55:29,630 --> 02:55:33,250
button Selmy notification

02:55:46,240 --> 02:55:49,240
okay

02:55:49,939 --> 02:55:56,530
copy and paste it here I will walk

02:55:53,510 --> 02:55:56,530
through this goal what it does

02:55:58,239 --> 02:56:02,630
so we need to see if the service worker

02:56:01,039 --> 02:56:05,329
is there because for push notification

02:56:02,630 --> 02:56:07,460
service worker has to be there and if it

02:56:05,329 --> 02:56:09,050
is ready and also we are checking if the

02:56:07,460 --> 02:56:12,470
push manager is supported the service

02:56:09,050 --> 02:56:16,270
worker supports push notification if not

02:56:12,470 --> 02:56:19,460
you return it if it supports that's fine

02:56:16,270 --> 02:56:22,850
this if check means you say clicked yes

02:56:19,460 --> 02:56:26,390
if no means this will be no false you go

02:56:22,850 --> 02:56:28,760
here registration dot post manager so

02:56:26,390 --> 02:56:31,039
this is the one of when this code

02:56:28,760 --> 02:56:32,930
executes user will get a pop up this

02:56:31,039 --> 02:56:35,479
website wants you you to send

02:56:32,930 --> 02:56:39,770
notification do you allow if the user

02:56:35,479 --> 02:56:42,260
says allow then it will come inside if

02:56:39,770 --> 02:56:46,880
the user says don't allow it will not

02:56:42,260 --> 02:56:48,199
come inside so then after this you have

02:56:46,880 --> 02:56:50,329
this the browser will have the

02:56:48,199 --> 02:56:50,930
subscription object so the client

02:56:50,329 --> 02:56:52,460
authorized

02:56:50,930 --> 02:56:55,340
so that's browser will have the

02:56:52,460 --> 02:56:57,319
subscription object I am just storing

02:56:55,340 --> 02:57:01,430
the subscription object into a state

02:56:57,319 --> 02:57:03,020
here so in this web page I have the

02:57:01,430 --> 02:57:06,199
subscription object if the user clicks

02:57:03,020 --> 02:57:10,010
allow then I have this object and the

02:57:06,199 --> 02:57:15,710
next thing I need to do is when the user

02:57:10,010 --> 02:57:18,109
clicks proceed so the user is ok to get

02:57:15,710 --> 02:57:20,439
the notification so when they proceed on

02:57:18,109 --> 02:57:20,439
click

02:57:20,800 --> 02:57:29,590
they store booked appointment okay so

02:57:26,290 --> 02:57:35,050
this is booked appointment so this

02:57:29,590 --> 02:57:40,630
method what it does is it calls API book

02:57:35,050 --> 02:57:43,750
dot Jason and it passes the subscription

02:57:40,630 --> 02:57:46,360
object the object which user allowed us

02:57:43,750 --> 02:57:48,250
to send the notification and the actual

02:57:46,360 --> 02:57:49,601
appointment details so along with the

02:57:48,250 --> 02:57:51,130
actual appointment details I am also

02:57:49,601 --> 02:57:57,190
sending the subscription object to the

02:57:51,130 --> 02:57:59,500
server okay so the next thing is server

02:57:57,190 --> 02:58:01,750
has to receive this book appointment

02:57:59,500 --> 02:58:07,200
request and then send the notification

02:58:01,750 --> 02:58:07,200
once it's booked we are going to server

02:58:07,530 --> 02:58:17,311
thing we need to change it to API slash

02:58:10,480 --> 02:58:17,311
book or we can demo it from here

02:58:22,240 --> 02:58:31,010
okay you can change it too okay the

02:58:29,061 --> 02:58:33,050
endpoint will come here so that accursed

02:58:31,010 --> 02:58:35,150
has two information one is subscription

02:58:33,050 --> 02:58:36,590
object and the appointment details the

02:58:35,150 --> 02:58:39,440
subscription object is the permission

02:58:36,590 --> 02:58:40,940
which client gave so that the server can

02:58:39,440 --> 02:58:43,250
communicate the right clients in the

02:58:40,940 --> 02:58:45,200
notification so what I am doing is in

02:58:43,250 --> 02:58:48,230
the normal case I am returning with this

02:58:45,200 --> 02:58:50,450
and if the subscription object is

02:58:48,230 --> 02:58:52,780
present that means client allowed us to

02:58:50,450 --> 02:58:57,380
send the notification then I'm calling

02:58:52,780 --> 02:59:00,110
send notification method I am just

02:58:57,380 --> 02:59:01,490
providing as message your appointment is

02:59:00,110 --> 02:59:05,150
booked successfully that will be the

02:59:01,490 --> 02:59:08,210
message inside the notification and I'm

02:59:05,150 --> 02:59:10,190
pausing the subscription object what

02:59:08,210 --> 02:59:13,851
this method does in notification let's

02:59:10,190 --> 02:59:17,681
go here this is the important part for

02:59:13,851 --> 02:59:20,090
sending the push notification just

02:59:17,681 --> 02:59:23,811
simple just to luck to three lines of

02:59:20,090 --> 02:59:26,000
code let's look at this first web push

02:59:23,811 --> 02:59:28,431
this is the library which we installed

02:59:26,000 --> 02:59:32,061
NPM installed web push so you can go up

02:59:28,431 --> 02:59:34,460
and see so this is the library we used

02:59:32,061 --> 02:59:37,431
this library will help us to send the

02:59:34,460 --> 02:59:39,260
notification to the client so you just

02:59:37,431 --> 02:59:41,721
need to call web post or send

02:59:39,260 --> 02:59:43,610
notification you have to post the exact

02:59:41,721 --> 02:59:45,681
subscription object you received from

02:59:43,610 --> 02:59:48,290
the client so whatever you received from

02:59:45,681 --> 02:59:50,931
the client you are going to send it to

02:59:48,290 --> 02:59:53,630
the push service what message you want

02:59:50,931 --> 02:59:56,540
to send and the additional option what

02:59:53,630 --> 02:59:59,420
are the additional options time to live

02:59:56,540 --> 03:00:01,431
maybe 60 seconds so it will wait if the

02:59:59,420 --> 03:00:04,280
user is not available it will retry so

03:00:01,431 --> 03:00:06,170
that time and rapid details this is

03:00:04,280 --> 03:00:08,210
where you are giving the public key and

03:00:06,170 --> 03:00:10,221
private key for the encryption so all

03:00:08,210 --> 03:00:12,380
the encryption you don't need to do this

03:00:10,221 --> 03:00:14,540
library will take care of it you just

03:00:12,380 --> 03:00:16,971
need to provide private key and public

03:00:14,540 --> 03:00:18,590
key so this library will do all the work

03:00:16,971 --> 03:00:20,900
for you it will encrypt and then it will

03:00:18,590 --> 03:00:23,391
communicate with the right push service

03:00:20,900 --> 03:00:25,760
and it will send the notification good

03:00:23,391 --> 03:00:27,771
there is one missing part here what is

03:00:25,760 --> 03:00:30,561
missing so the client gives the

03:00:27,771 --> 03:00:32,000
permission we send to the server the

03:00:30,561 --> 03:00:34,400
subscription object and the appointment

03:00:32,000 --> 03:00:34,760
details and the server trying to send

03:00:34,400 --> 03:00:37,789
that

03:00:34,760 --> 03:00:39,050
notification through push service so

03:00:37,789 --> 03:00:41,630
there is one missing part

03:00:39,050 --> 03:00:44,090
if a client pod client has to receive

03:00:41,630 --> 03:00:46,699
the notification and then trigger a

03:00:44,090 --> 03:00:52,999
prompt so the last part of the code you

03:00:46,699 --> 03:00:56,409
need to go to Service Worker here I will

03:00:52,999 --> 03:00:56,409
also quickly copy and paste

03:01:10,950 --> 03:01:19,870
okay I will explain this code so push

03:01:15,820 --> 03:01:21,700
notification well it any idea will it

03:01:19,870 --> 03:01:23,560
come if you close the browser you close

03:01:21,700 --> 03:01:27,609
the app will you receive the push

03:01:23,560 --> 03:01:29,229
notification app it works in web also it

03:01:27,609 --> 03:01:31,990
will happen so we can close the browser

03:01:29,229 --> 03:01:33,550
you can close the app still the server

03:01:31,990 --> 03:01:35,890
will send the push notification and the

03:01:33,550 --> 03:01:37,600
client will receive it that's how that's

03:01:35,890 --> 03:01:38,979
why that that's a good thing about the

03:01:37,600 --> 03:01:41,439
serviceworker even though the app is

03:01:38,979 --> 03:01:43,149
closed the server can wake up the

03:01:41,439 --> 03:01:45,970
serviceworker and execute the code for

03:01:43,149 --> 03:01:48,520
that app so self dot addeventlistener

03:01:45,970 --> 03:01:51,070
similar to fetch we have something

03:01:48,520 --> 03:01:53,229
called push when the serve the push

03:01:51,070 --> 03:01:56,560
service sends the notification this code

03:01:53,229 --> 03:01:59,350
will get executed and it will have a

03:01:56,560 --> 03:02:01,960
event then message will be part of event

03:01:59,350 --> 03:02:04,750
or data text so this is the actual

03:02:01,960 --> 03:02:08,130
message the push service is sending to

03:02:04,750 --> 03:02:10,600
the client and then you are just doing

03:02:08,130 --> 03:02:14,320
self dot registration dot show

03:02:10,600 --> 03:02:18,040
notification and the message and the

03:02:14,320 --> 03:02:20,430
title so let's see what is the body

03:02:18,040 --> 03:02:20,430
option

03:02:20,920 --> 03:02:27,190
I think the title is repeated you can

03:02:24,400 --> 03:02:29,141
remove this so you can provide an icon

03:02:27,190 --> 03:02:32,650
for the notification and also the

03:02:29,141 --> 03:02:34,660
message I am passing it here so that's

03:02:32,650 --> 03:02:36,221
it so the main part of the code is this

03:02:34,660 --> 03:02:40,110
one the client has to receive the

03:02:36,221 --> 03:02:42,880
notification and show it and the server

03:02:40,110 --> 03:02:44,440
has to send the notification using this

03:02:42,880 --> 03:02:46,540
library that's it

03:02:44,440 --> 03:02:47,980
so let's try to run it and then see if

03:02:46,540 --> 03:02:50,051
you are receiving the notification and

03:02:47,980 --> 03:02:53,910
then you can try it on yourself and then

03:02:50,051 --> 03:02:56,530
I will put all the code and steps there

03:02:53,910 --> 03:02:58,780
one another thing for testing the push

03:02:56,530 --> 03:03:01,660
notification we have to deploy to Heroku

03:02:58,780 --> 03:03:03,431
localhost will not work because when the

03:03:01,660 --> 03:03:05,561
server tries to communicate with the

03:03:03,431 --> 03:03:08,801
push service it checks whether it's HTTP

03:03:05,561 --> 03:03:10,511
so localhost it's just HTTP so we have

03:03:08,801 --> 03:03:14,801
to deploy to Heroku and then test this

03:03:10,511 --> 03:03:16,450
push notification so let's double check

03:03:14,801 --> 03:03:19,931
if we have done all the things so

03:03:16,450 --> 03:03:22,080
client-side we are receiving the

03:03:19,931 --> 03:03:22,080
notification

03:03:24,150 --> 03:03:31,960
and then we are showing it perfect on

03:03:28,120 --> 03:03:34,360
the server side we are sending the

03:03:31,960 --> 03:03:35,890
notification using web push and then we

03:03:34,360 --> 03:03:40,930
are providing the option private key and

03:03:35,890 --> 03:03:42,700
public key okay and then whenever this

03:03:40,930 --> 03:03:45,280
book is called we are going to send the

03:03:42,700 --> 03:03:51,521
notification if the user allows tests so

03:03:45,280 --> 03:03:55,090
and then appointment review when the

03:03:51,521 --> 03:03:56,170
user gives us the permission you are

03:03:55,090 --> 03:04:03,490
doing all these things yeah

03:03:56,170 --> 03:04:07,080
notify clicked and book appointment ok

03:04:03,490 --> 03:04:07,080
let's try to build it

03:04:15,950 --> 03:04:22,750
so for this we don't need to build get

03:04:19,750 --> 03:04:22,750
status

03:04:39,369 --> 03:04:43,220
these are the changes I'm going to

03:04:41,659 --> 03:04:45,800
commit and deploy to Heroku

03:04:43,220 --> 03:04:48,760
let me quickly double-check this is fine

03:04:45,800 --> 03:04:48,760
this is fine this is fine

03:04:51,759 --> 03:05:02,579
when I first Lord this is fine

03:05:19,440 --> 03:05:45,730
okay cool okay I have committed now I'm

03:05:37,661 --> 03:05:48,091
going to deploy to Heroku get push arrow

03:05:45,730 --> 03:05:48,091
camasta

03:06:19,980 --> 03:06:26,940
meanwhile let me put the steps in slack

03:07:42,209 --> 03:07:51,739
okay we just need to do this appointment

03:07:49,289 --> 03:07:51,739
review

03:07:56,400 --> 03:08:04,530
the client should have a public key and

03:08:01,080 --> 03:08:04,530
we need this

03:08:18,800 --> 03:08:26,240
so meanwhile you can follow the steps I

03:08:21,540 --> 03:08:26,240
posted in slack one two three four

03:08:38,230 --> 03:08:41,470
you know

03:08:48,851 --> 03:08:51,511
okay

03:08:58,601 --> 03:09:03,010
G clinics Heroku

03:10:00,000 --> 03:10:06,490
okay so this is the demo so I just click

03:10:03,520 --> 03:10:08,439
the button I receive notification once

03:10:06,490 --> 03:10:11,350
the appointment is booked and this is

03:10:08,439 --> 03:10:14,140
the pop up it will show so the user has

03:10:11,350 --> 03:10:16,570
to click hello our block so let's say I

03:10:14,140 --> 03:10:18,760
am allowing so then the client browser

03:10:16,570 --> 03:10:22,840
has the subscription object which it can

03:10:18,760 --> 03:10:25,770
send it to the client okay

03:10:22,840 --> 03:10:25,770
the appointment is pending

03:10:28,510 --> 03:10:33,280
and let's see the Heroku logs also

03:10:47,590 --> 03:10:52,069
okay appointment details and push

03:10:50,510 --> 03:10:55,159
subscription object this is the

03:10:52,069 --> 03:10:58,720
subscription object and we are sending

03:10:55,159 --> 03:10:58,720
using the library

03:11:14,500 --> 03:11:20,500
so you see a notification received your

03:11:17,090 --> 03:11:20,500
appointment is booked successfully

03:11:22,290 --> 03:11:26,100
did you see the notification

03:11:27,591 --> 03:11:31,070
so let's try again

03:11:47,390 --> 03:11:51,479
okay the second time when you check this

03:11:49,740 --> 03:11:52,979
button you will not have that pop-up

03:11:51,479 --> 03:11:56,720
coming again because once you are given

03:11:52,979 --> 03:11:56,720
the permission so it will take it

03:12:19,680 --> 03:12:23,729
so notification received

03:12:42,780 --> 03:12:49,480
maybe in the interest of time I think we

03:12:47,380 --> 03:12:51,820
got the message but the notification

03:12:49,480 --> 03:12:53,200
prompt it did not work maybe if you want

03:12:51,820 --> 03:12:55,450
to stay we can stay otherwise in the

03:12:53,200 --> 03:13:01,360
interest of time I will push the code

03:12:55,450 --> 03:13:04,690
and you can try it on your end okay in

03:13:01,360 --> 03:13:07,360
the guitar the second project version

03:13:04,690 --> 03:13:09,370
one has all the completed code so you

03:13:07,360 --> 03:13:13,480
can always refer to version one and then

03:13:09,370 --> 03:13:15,601
you can play it on your end thank you

03:13:13,480 --> 03:13:15,601

YouTube URL: https://www.youtube.com/watch?v=Rschzf9R1cs


