Title: Unlocking Progress Web Applications - JSConf.Asia 2019
Publication date: 2019-07-05
Playlist: JSConf.Asia 2019
Description: 
	Speaker: Tamas Piros @tpiros

During the workshop we will take a regular web application and convert it into a Progressive Web App. This workshop is for people wishing to learn more about Service Workers, Workbox.js and web performance/caching in relation to PWAs.

Requirements:
Bring a laptop. Attendees should make sure that they have their favourite code editor, an up-to-date version of Google Chrome as well as NodeJS installed (either LTS or Current)

Tamas is an experienced Developer Evangelist, Google Developer Expert and Technical Instructor. He has more than a decade of experience working with large, prestigious organisations and throughout his career, he has delivered training classes all over the world to both technical and non-technical audiences.

Event Page: https://2019.jsconf.asia/

Produced by Engineers.SG

Help us caption & translate this video!

https://amara.org/v/pl0x/
Captions: 
	00:00:00,000 --> 00:00:08,429
good afternoon how are you doing awesome

00:00:04,879 --> 00:00:11,160
after lunch coma hitting him so here's a

00:00:08,429 --> 00:00:15,210
quick question who has ever seen me do a

00:00:11,160 --> 00:00:18,779
talk or a presentation YouTube Noah

00:00:15,210 --> 00:00:20,970
great so what happens is that every time

00:00:18,779 --> 00:00:24,689
before I do a talk or a workshop or

00:00:20,970 --> 00:00:27,390
whatever I get the people to do some

00:00:24,689 --> 00:00:29,300
physical exercise now you may be

00:00:27,390 --> 00:00:32,820
wondering why is he doing this

00:00:29,300 --> 00:00:34,230
you just ate right you know we have to

00:00:32,820 --> 00:00:37,440
burn those calories

00:00:34,230 --> 00:00:39,870
number two is because I'm losing my

00:00:37,440 --> 00:00:42,360
voice already it's because you know that

00:00:39,870 --> 00:00:44,730
saying fresh body fresh mind so I want

00:00:42,360 --> 00:00:46,379
you to be hundred percent concentrated

00:00:44,730 --> 00:00:48,360
on what's going to happen here so in

00:00:46,379 --> 00:00:50,879
light of this mm-hmm

00:00:48,360 --> 00:00:55,110
try to not to lose my voice please stand

00:00:50,879 --> 00:00:57,059
up and if you thought I'm joking I'm not

00:00:55,110 --> 00:01:00,329
it's going to be it's going to be nice

00:00:57,059 --> 00:01:02,370
so what I need you to do is going to be

00:01:00,329 --> 00:01:04,700
very very very simple all you need to do

00:01:02,370 --> 00:01:08,900
is lift up your arms like this

00:01:04,700 --> 00:01:08,900
okay and clap

00:01:10,820 --> 00:01:16,240
and you may sit down thank you very much

00:01:15,070 --> 00:01:19,430
mm-hmm

00:01:16,240 --> 00:01:21,470
so what just happened standing ovation

00:01:19,430 --> 00:01:23,720
right this is how it's done

00:01:21,470 --> 00:01:26,270
so what I do I keep on sending these

00:01:23,720 --> 00:01:28,370
images to my boss and he's like how do

00:01:26,270 --> 00:01:31,670
you do this on i.t conferences I'm like

00:01:28,370 --> 00:01:33,979
yeah just get give me a pay rise and

00:01:31,670 --> 00:01:35,360
I'll tell you okay and the reason why I

00:01:33,979 --> 00:01:38,450
asked it because there are some people

00:01:35,360 --> 00:01:39,830
like I did a meet up a second time in

00:01:38,450 --> 00:01:41,570
the same group and then when I said oh

00:01:39,830 --> 00:01:44,060
this someone see me talk before and they

00:01:41,570 --> 00:01:46,540
were like five people already like I'm

00:01:44,060 --> 00:01:49,460
like okay you know what's going anyway

00:01:46,540 --> 00:01:52,700
progressive web apps is what we're going

00:01:49,460 --> 00:01:54,650
to talk about today and my name is Tomas

00:01:52,700 --> 00:01:58,070
I come from Hungary I lived in the UK

00:01:54,650 --> 00:01:59,840
and Brazilian other places I work as a

00:01:58,070 --> 00:02:02,090
developer evangelist at a company called

00:01:59,840 --> 00:02:04,850
Cloud nari we're going to talk about

00:02:02,090 --> 00:02:07,250
cloud me a little bit as well and quite

00:02:04,850 --> 00:02:08,959
recently I was very very thrilled that I

00:02:07,250 --> 00:02:10,580
got selected as a Google developer

00:02:08,959 --> 00:02:11,920
expert in web technologies so that's

00:02:10,580 --> 00:02:14,780
quite a good thing

00:02:11,920 --> 00:02:16,340
also if you believe that you would like

00:02:14,780 --> 00:02:18,430
to be a Google developer expert then

00:02:16,340 --> 00:02:21,200
come talk to me and I can refer anyone

00:02:18,430 --> 00:02:24,080
so if you interest in that please come

00:02:21,200 --> 00:02:26,930
and talk to me so quick poll before we

00:02:24,080 --> 00:02:30,370
get started who here knows what

00:02:26,930 --> 00:02:30,370
progressive web apps are

00:02:30,590 --> 00:02:38,209
huh just theory just a bit has heard

00:02:35,420 --> 00:02:40,489
about PWA has put them together use them

00:02:38,209 --> 00:02:42,770
seeing them off a few of you who here

00:02:40,489 --> 00:02:47,950
has seen the serviceworker knows what it

00:02:42,770 --> 00:02:52,489
is serviceworker api ok cache API

00:02:47,950 --> 00:02:55,610
angular PW a plug-in network information

00:02:52,489 --> 00:02:59,180
API ok so everyone's going to learn

00:02:55,610 --> 00:03:00,920
quite a lot here I like that so let's

00:02:59,180 --> 00:03:05,150
take a look at the agenda now I have to

00:03:00,920 --> 00:03:07,790
admit something I had a problem problem

00:03:05,150 --> 00:03:10,130
was that when I put together this

00:03:07,790 --> 00:03:11,390
material I wanted to share so much

00:03:10,130 --> 00:03:13,430
because there's so much about

00:03:11,390 --> 00:03:15,459
progressive web apps I could talk you

00:03:13,430 --> 00:03:18,110
know for two days just about this and

00:03:15,459 --> 00:03:20,870
what I ended up doing is I created kind

00:03:18,110 --> 00:03:22,580
of two sample apps one that I'm going to

00:03:20,870 --> 00:03:24,440
show you I'm going to give you the code

00:03:22,580 --> 00:03:26,269
we're going to go through it relatively

00:03:24,440 --> 00:03:29,140
quickly and then we're going to put

00:03:26,269 --> 00:03:31,970
together a relatively complex PW as well

00:03:29,140 --> 00:03:34,519
which will also you know take a look at

00:03:31,970 --> 00:03:37,549
the various parts and see how that works

00:03:34,519 --> 00:03:38,959
now when I ask the question who knows

00:03:37,549 --> 00:03:40,930
what the progressive web app is and who

00:03:38,959 --> 00:03:43,430
has worked with service workers before

00:03:40,930 --> 00:03:45,290
there were few of you who said you know

00:03:43,430 --> 00:03:48,140
what it is but I just realized that the

00:03:45,290 --> 00:03:49,760
majority of the people here are not that

00:03:48,140 --> 00:03:51,799
familiar with that so we're going to

00:03:49,760 --> 00:03:53,209
have a crash course on pwace and

00:03:51,799 --> 00:03:55,549
serviceworker so i'm going to show you a

00:03:53,209 --> 00:03:58,160
very very basic example so that you

00:03:55,549 --> 00:03:59,989
understand how a progressive web app is

00:03:58,160 --> 00:04:03,829
and what the service workers do and how

00:03:59,989 --> 00:04:06,560
a service worker enables the PWA

00:04:03,829 --> 00:04:08,150
functionality ok and then so for those

00:04:06,560 --> 00:04:09,590
of you who already know this please bear

00:04:08,150 --> 00:04:11,269
with me I just want to make sure that

00:04:09,590 --> 00:04:12,530
everyone is on the same page so we're

00:04:11,269 --> 00:04:14,269
going to take a look at progressive web

00:04:12,530 --> 00:04:15,980
apps in general then we're going to talk

00:04:14,269 --> 00:04:17,539
about service workers then we're going

00:04:15,980 --> 00:04:19,549
to talk about this thing called work box

00:04:17,539 --> 00:04:23,930
- yes anyone familiar with word box -

00:04:19,549 --> 00:04:26,240
yes one ok so another 20 some people

00:04:23,930 --> 00:04:28,340
will learn something and as I said demos

00:04:26,240 --> 00:04:31,460
and we'll do some coding as well if time

00:04:28,340 --> 00:04:34,550
permits but I'll try to speak fast so in

00:04:31,460 --> 00:04:36,500
a nutshell what is a progressive web app

00:04:34,550 --> 00:04:38,030
so there's lots of definitions but I

00:04:36,500 --> 00:04:41,060
would like you to think about the

00:04:38,030 --> 00:04:43,289
progressive web app as just the website

00:04:41,060 --> 00:04:44,969
that acts as an application

00:04:43,289 --> 00:04:48,860
and the key here is that it is a website

00:04:44,969 --> 00:04:51,599
that acts as an application because

00:04:48,860 --> 00:04:54,059
basically you can't say that every

00:04:51,599 --> 00:04:55,949
website is a progressive web app but if

00:04:54,059 --> 00:04:59,309
you enable some features for that

00:04:55,949 --> 00:05:01,499
website that make that website have some

00:04:59,309 --> 00:05:03,599
app like behavior then you can consider

00:05:01,499 --> 00:05:05,699
that to be a progressive web app so what

00:05:03,599 --> 00:05:08,009
are those features right if you think

00:05:05,699 --> 00:05:10,469
about a native mobile application so

00:05:08,009 --> 00:05:13,229
these are applications that you install

00:05:10,469 --> 00:05:15,319
from your app store from Google Play

00:05:13,229 --> 00:05:17,369
right so you look for it for an app

00:05:15,319 --> 00:05:19,559
download it on your phone that is what

00:05:17,369 --> 00:05:21,770
we call a native mobile app so those

00:05:19,559 --> 00:05:24,119
native mobile apps have these features

00:05:21,770 --> 00:05:26,189
amongst many things right offline

00:05:24,119 --> 00:05:28,770
availability right so all the apps that

00:05:26,189 --> 00:05:30,389
you have you may not have network but

00:05:28,770 --> 00:05:32,459
you can still launch it and you could

00:05:30,389 --> 00:05:34,259
still potentially interact with it right

00:05:32,459 --> 00:05:36,899
if it's a news app you would probably

00:05:34,259 --> 00:05:39,059
see other news and when you go online

00:05:36,899 --> 00:05:40,289
then your news feed is going to refresh

00:05:39,059 --> 00:05:40,740
right that's that's like a normal

00:05:40,289 --> 00:05:43,740
behavior

00:05:40,740 --> 00:05:45,599
you also get notifications so you get

00:05:43,740 --> 00:05:48,300
some new notifications in the app and

00:05:45,599 --> 00:05:51,749
what progress see web applications also

00:05:48,300 --> 00:05:53,490
enable the for you to do is something

00:05:51,749 --> 00:05:54,779
called adaptive performance so we're

00:05:53,490 --> 00:05:58,199
going to take a look at a very nice

00:05:54,779 --> 00:05:59,539
example on achieving this so essentially

00:05:58,199 --> 00:06:01,769
I want you to remember this a

00:05:59,539 --> 00:06:04,229
progressive web application that's the

00:06:01,769 --> 00:06:06,539
first sentence here allows a web app or

00:06:04,229 --> 00:06:08,909
a website to be accessible by anyone

00:06:06,539 --> 00:06:11,069
regardless of what device they use and

00:06:08,909 --> 00:06:13,289
where they are in the world meaning you

00:06:11,069 --> 00:06:16,649
know what speed of network they use or

00:06:13,289 --> 00:06:18,419
what their location is okay so the term

00:06:16,649 --> 00:06:21,330
progressive in the progressive web app

00:06:18,419 --> 00:06:24,509
also means that you give your users of

00:06:21,330 --> 00:06:26,639
progressive enhancement for their

00:06:24,509 --> 00:06:29,580
application meaning if someone is on a

00:06:26,639 --> 00:06:32,129
2g network for example you definitely

00:06:29,580 --> 00:06:34,199
don't want to for example stream an HD

00:06:32,129 --> 00:06:35,789
video for them whereas if they are on a

00:06:34,199 --> 00:06:38,519
Wi-Fi then you want to show them that

00:06:35,789 --> 00:06:41,610
video okay so think about a single

00:06:38,519 --> 00:06:42,899
article let's say it's about a sport

00:06:41,610 --> 00:06:45,839
event where you want to show a nice

00:06:42,899 --> 00:06:48,389
video of some action right if you detect

00:06:45,839 --> 00:06:51,199
that your user is on a Wi-Fi show the

00:06:48,389 --> 00:06:54,300
video if they are on a 2g or in a slower

00:06:51,199 --> 00:06:55,979
Network then show them a picture instead

00:06:54,300 --> 00:06:56,940
or maybe show them nothing right so this

00:06:55,979 --> 00:07:02,520
is from

00:06:56,940 --> 00:07:05,280
recive enhancement as well so I think

00:07:02,520 --> 00:07:08,340
Google was the first company who who

00:07:05,280 --> 00:07:10,970
come up with this sort of checklist and

00:07:08,340 --> 00:07:13,830
you know the more of these you check the

00:07:10,970 --> 00:07:15,390
the more likely that your application on

00:07:13,830 --> 00:07:17,640
your website could be considered as a

00:07:15,390 --> 00:07:20,790
progressive web app so the first one is

00:07:17,640 --> 00:07:22,560
app like it acts and feels like a native

00:07:20,790 --> 00:07:24,750
mobile app that's very simple

00:07:22,560 --> 00:07:26,940
connectivity independent again very

00:07:24,750 --> 00:07:29,190
simple stuff by the way the reason why

00:07:26,940 --> 00:07:31,110
you see these weird bullet points is

00:07:29,190 --> 00:07:32,550
because I just changed the theme for the

00:07:31,110 --> 00:07:34,620
slide in the last minute because I

00:07:32,550 --> 00:07:35,910
realized I had a dark theme and you now

00:07:34,620 --> 00:07:37,790
wouldn't be able to read anything so

00:07:35,910 --> 00:07:40,220
it's all going to be a bit weird

00:07:37,790 --> 00:07:44,340
connectivity independent works offline

00:07:40,220 --> 00:07:47,700
simple as discoverable means that you

00:07:44,340 --> 00:07:50,610
can install this and find the PWA now

00:07:47,700 --> 00:07:52,830
I'm going to link out to an interesting

00:07:50,610 --> 00:07:56,190
article but we'll get to that as well

00:07:52,830 --> 00:07:57,930
fresh meaning that you get you open the

00:07:56,190 --> 00:07:59,490
app and it should automatically pull for

00:07:57,930 --> 00:08:02,070
example the latest news so it's always

00:07:59,490 --> 00:08:05,070
fresh if there's connection installable

00:08:02,070 --> 00:08:06,630
that you can install it on to a mobile

00:08:05,070 --> 00:08:08,790
device and we're going to talk about

00:08:06,630 --> 00:08:10,110
this as well linkable that you can link

00:08:08,790 --> 00:08:12,360
to it right so if you think about

00:08:10,110 --> 00:08:15,360
applications on your mobile there's no

00:08:12,360 --> 00:08:18,030
way that you can link to a native app

00:08:15,360 --> 00:08:20,490
but because this is now a website

00:08:18,030 --> 00:08:21,750
theoretically you could link to parts of

00:08:20,490 --> 00:08:23,400
that as well

00:08:21,750 --> 00:08:25,140
progressive we talked about that

00:08:23,400 --> 00:08:27,660
reengage book means that once it's

00:08:25,140 --> 00:08:30,360
installed your users can just get back

00:08:27,660 --> 00:08:32,700
to it as easy as possible how do they do

00:08:30,360 --> 00:08:34,320
that you will have a launcher icon in

00:08:32,700 --> 00:08:36,630
the operating system on your mobile

00:08:34,320 --> 00:08:39,719
device and they tap it and boom your app

00:08:36,630 --> 00:08:45,210
opens responsive very straightforward

00:08:39,719 --> 00:08:46,920
thing if you are using this app on a

00:08:45,210 --> 00:08:48,600
tablet it should have the right

00:08:46,920 --> 00:08:50,070
dimensions if use it on a mobile phone

00:08:48,600 --> 00:08:51,600
you should have the right dimensions so

00:08:50,070 --> 00:08:55,320
it's standard web development

00:08:51,600 --> 00:08:56,730
responsiveness here safe progressive web

00:08:55,320 --> 00:09:00,450
apps and especially the serviceworker

00:08:56,730 --> 00:09:03,060
api dictates that you must use HTTPS at

00:09:00,450 --> 00:09:05,370
all times okay so using HTTP will not

00:09:03,060 --> 00:09:11,040
work with the serviceworker

00:09:05,370 --> 00:09:13,710
okay so why progressive web apps there's

00:09:11,040 --> 00:09:16,440
a lot of reasons now the what I

00:09:13,710 --> 00:09:18,120
recommend you to do is take a look at

00:09:16,440 --> 00:09:20,910
the resources that you can find on

00:09:18,120 --> 00:09:23,400
Google's website after the latest IO and

00:09:20,910 --> 00:09:27,360
they release some more use cases and

00:09:23,400 --> 00:09:29,760
case studies they have a myriad of you

00:09:27,360 --> 00:09:31,440
know use cases and what company changed

00:09:29,760 --> 00:09:32,790
from what kind of application to a

00:09:31,440 --> 00:09:34,770
progressive web app and they give you

00:09:32,790 --> 00:09:37,530
all sorts of numbers that many users

00:09:34,770 --> 00:09:39,510
that many sales which left to this and

00:09:37,530 --> 00:09:41,490
left to that but essentially what you

00:09:39,510 --> 00:09:43,860
need to remember is that for some

00:09:41,490 --> 00:09:47,280
companies they had a website and then

00:09:43,860 --> 00:09:49,770
they had a application in Google Play

00:09:47,280 --> 00:09:51,240
for Android and for iOS right and the

00:09:49,770 --> 00:09:52,470
users didn't like that and then they

00:09:51,240 --> 00:09:55,500
said okay you know what I would just

00:09:52,470 --> 00:09:57,900
create one simple website if my user is

00:09:55,500 --> 00:10:00,450
on the on a desktop I will show that

00:09:57,900 --> 00:10:02,190
website and then I'm going to make a PWA

00:10:00,450 --> 00:10:03,900
out of that website so that if they're

00:10:02,190 --> 00:10:06,120
on the mobile are we offered the option

00:10:03,900 --> 00:10:07,770
for them to install that and then they

00:10:06,120 --> 00:10:09,480
can just keep on coming back so it's

00:10:07,770 --> 00:10:12,720
basically one code base that they have

00:10:09,480 --> 00:10:14,400
to maintain it's really easy and there

00:10:12,720 --> 00:10:16,170
are some links here that you can read on

00:10:14,400 --> 00:10:18,450
how for example Pinterest and Twitter

00:10:16,170 --> 00:10:20,580
achieved you know better performance

00:10:18,450 --> 00:10:23,720
better sales better user retention

00:10:20,580 --> 00:10:26,070
better user engagement by converting

00:10:23,720 --> 00:10:29,600
parts of the applications or the entire

00:10:26,070 --> 00:10:31,950
application to a progressive web app so

00:10:29,600 --> 00:10:36,600
what are the core technologies that

00:10:31,950 --> 00:10:38,220
enable the progressive web apps so let's

00:10:36,600 --> 00:10:40,020
start with the me the second one service

00:10:38,220 --> 00:10:42,150
workers so without the service worker

00:10:40,020 --> 00:10:44,190
you wouldn't be able to create a

00:10:42,150 --> 00:10:46,470
progressive web app and for those of you

00:10:44,190 --> 00:10:48,390
who are new to this I'm going to show

00:10:46,470 --> 00:10:50,040
you a very simple example and you will

00:10:48,390 --> 00:10:52,140
understand why so without the service

00:10:50,040 --> 00:10:54,690
worker and without using this thing

00:10:52,140 --> 00:10:57,030
called a service worker API you are not

00:10:54,690 --> 00:10:59,190
able to create a progressive web app so

00:10:57,030 --> 00:11:02,010
that is the core to everything that is

00:10:59,190 --> 00:11:03,750
progressive about then there's this it's

00:11:02,010 --> 00:11:06,360
not really a technology it's more like

00:11:03,750 --> 00:11:09,390
as you see a JSON file manifesto JSON

00:11:06,360 --> 00:11:11,040
that contains a metadata about the

00:11:09,390 --> 00:11:12,690
progressive web app we're going to take

00:11:11,040 --> 00:11:15,260
a look at an example what that metadata

00:11:12,690 --> 00:11:18,180
is but essentially it's things like

00:11:15,260 --> 00:11:19,230
where is the icon that is going to

00:11:18,180 --> 00:11:22,020
appear once you in

00:11:19,230 --> 00:11:25,110
so all the app what should be the actual

00:11:22,020 --> 00:11:26,220
icon launcher text for that particular

00:11:25,110 --> 00:11:28,170
application and these are the things

00:11:26,220 --> 00:11:30,210
that you specifying that manifesto JSON

00:11:28,170 --> 00:11:32,460
file then we also have the cache in the

00:11:30,210 --> 00:11:34,320
cache API right so if you think about

00:11:32,460 --> 00:11:36,780
the progressive web app one of the key

00:11:34,320 --> 00:11:38,850
pillars of that is that it allows you to

00:11:36,780 --> 00:11:40,980
work offline right in order for it to

00:11:38,850 --> 00:11:43,410
work offline it needs to store some of

00:11:40,980 --> 00:11:44,820
your assets where does it store it it

00:11:43,410 --> 00:11:47,180
will store it in the cache which you can

00:11:44,820 --> 00:11:51,900
manipulate using the cache API

00:11:47,180 --> 00:11:53,790
lighthouse is a tool again that I I

00:11:51,900 --> 00:11:55,650
think it's created by Google but I'm not

00:11:53,790 --> 00:11:58,380
sure it's definitely part of the chrome

00:11:55,650 --> 00:12:02,640
dev tools as of version sixty something

00:11:58,380 --> 00:12:04,620
it basically gives you a score value so

00:12:02,640 --> 00:12:06,450
you can run some tests and it will tell

00:12:04,620 --> 00:12:08,880
you oh you know what your progressive

00:12:06,450 --> 00:12:11,040
web app is awesome you get a score of

00:12:08,880 --> 00:12:13,770
100 or it's quite bad you got a score of

00:12:11,040 --> 00:12:15,960
62 and they explain to you what you need

00:12:13,770 --> 00:12:19,020
to change in your app in order to

00:12:15,960 --> 00:12:21,240
improve that that's core and then quite

00:12:19,020 --> 00:12:22,890
recently they started and when I say day

00:12:21,240 --> 00:12:24,390
it's it's Google and the reason why I

00:12:22,890 --> 00:12:25,950
mentioned Google so much it's not

00:12:24,390 --> 00:12:29,640
because I'm a Google developer expert

00:12:25,950 --> 00:12:31,410
it's also because they are one of the

00:12:29,640 --> 00:12:33,390
big companies who are advocating

00:12:31,410 --> 00:12:35,040
progressive web apps quite a lot so they

00:12:33,390 --> 00:12:37,950
have a lot of resources and they put a

00:12:35,040 --> 00:12:38,700
lot of investment into educating people

00:12:37,950 --> 00:12:41,160
about this

00:12:38,700 --> 00:12:43,740
so quite recently they have come up with

00:12:41,160 --> 00:12:45,930
this PR PL abbreviation which they

00:12:43,740 --> 00:12:48,210
pronounce as purple which is short for

00:12:45,930 --> 00:12:50,640
push render free cash and lazy low and

00:12:48,210 --> 00:12:54,720
what they say is that if you take all

00:12:50,640 --> 00:12:56,910
these boxes then you're like PW a master

00:12:54,720 --> 00:12:59,460
level 99 okay oh they're like the coder

00:12:56,910 --> 00:13:02,250
for pwace but they also say that if you

00:12:59,460 --> 00:13:04,950
just take either of these then you're

00:13:02,250 --> 00:13:07,200
also making a step forward at least

00:13:04,950 --> 00:13:12,650
having a better performing website okay

00:13:07,200 --> 00:13:14,880
so push refers to the HTTP to push

00:13:12,650 --> 00:13:18,120
thingy I don't know how that's called

00:13:14,880 --> 00:13:23,490
the push whatever do you guys know what

00:13:18,120 --> 00:13:27,460
that is okay so browser interaction 101

00:13:23,490 --> 00:13:32,350
so what happens you have

00:13:27,460 --> 00:13:34,690
your browser you have the Internet and

00:13:32,350 --> 00:13:38,490
here's a web server okay so you type in

00:13:34,690 --> 00:13:42,399
something CNN or Chrome for example and

00:13:38,490 --> 00:13:44,649
we go out here this sends back the index

00:13:42,399 --> 00:13:46,180
file so you get the index of HTML and

00:13:44,649 --> 00:13:49,300
then your browser starts to parse this

00:13:46,180 --> 00:13:52,149
file right it's going to find JavaScript

00:13:49,300 --> 00:13:54,040
files and CSS files as it keeps on

00:13:52,149 --> 00:13:55,959
parsing through your HTML file and it's

00:13:54,040 --> 00:13:59,380
going to go to the server and say hey I

00:13:55,959 --> 00:14:00,790
found a CSS file can you please send it

00:13:59,380 --> 00:14:02,950
to me yes I can

00:14:00,790 --> 00:14:04,839
okay now I have it so I will add the CSS

00:14:02,950 --> 00:14:09,930
and understanding to my site okay this

00:14:04,839 --> 00:14:20,110
is HTTP 1.1 this is how it works okay

00:14:09,930 --> 00:14:23,200
HTTP the / - push works differently with

00:14:20,110 --> 00:14:26,230
this you can sort of proactively tell

00:14:23,200 --> 00:14:28,839
the server that when you request an

00:14:26,230 --> 00:14:32,440
index file or index of HTML you also

00:14:28,839 --> 00:14:35,640
want to request let's say an app dot CSS

00:14:32,440 --> 00:14:39,339
file so what happens you go to a website

00:14:35,640 --> 00:14:42,040
the server sends back index.html your

00:14:39,339 --> 00:14:44,170
browser we start to parse it it will get

00:14:42,040 --> 00:14:45,730
to the CSS state and it's going to want

00:14:44,170 --> 00:14:47,560
to make a request in the server saying

00:14:45,730 --> 00:14:50,560
hey could you send me that CSS file and

00:14:47,560 --> 00:14:53,080
that point because you have asked that

00:14:50,560 --> 00:14:55,180
file to be pushed the server has

00:14:53,080 --> 00:14:57,970
assented that even before the browser

00:14:55,180 --> 00:14:59,380
requested it right so the actual browser

00:14:57,970 --> 00:15:00,910
is going to say you know what actually I

00:14:59,380 --> 00:15:03,700
don't need it because it's already here

00:15:00,910 --> 00:15:05,440
so it's just going to allow some there

00:15:03,700 --> 00:15:07,420
are some keywords that I could throw at

00:15:05,440 --> 00:15:10,720
you like multiplexing blah blah blah

00:15:07,420 --> 00:15:15,160
doesn't matter just better performance

00:15:10,720 --> 00:15:17,740
okay remember that render precache and

00:15:15,160 --> 00:15:20,140
lazy load so pre caching is something

00:15:17,740 --> 00:15:22,510
similar to push which allows you to sort

00:15:20,140 --> 00:15:24,730
of pre cache your resources and there

00:15:22,510 --> 00:15:26,520
are some techniques that allow you to

00:15:24,730 --> 00:15:30,970
kind of correctively

00:15:26,520 --> 00:15:32,829
get entire routes pre cached and I think

00:15:30,970 --> 00:15:33,830
Google was it last year when they were

00:15:32,829 --> 00:15:36,380
Nick

00:15:33,830 --> 00:15:39,110
launched this machine learning based

00:15:36,380 --> 00:15:40,700
pre-caching something so you basically

00:15:39,110 --> 00:15:43,910
they learn the behavior of the users of

00:15:40,700 --> 00:15:45,769
a website and they will ahead of time

00:15:43,910 --> 00:15:47,690
believe that you will click a link and

00:15:45,769 --> 00:15:49,399
they will precache assets that are

00:15:47,690 --> 00:15:51,519
required for that link and when you

00:15:49,399 --> 00:15:53,959
click on it it's going to load faster

00:15:51,519 --> 00:15:54,320
lazy loading is another interesting

00:15:53,959 --> 00:15:58,790
thing

00:15:54,320 --> 00:16:00,769
imagine a a website that shows you

00:15:58,790 --> 00:16:02,570
photos right a gallery of photos and

00:16:00,769 --> 00:16:06,620
you're on your mobile device and you see

00:16:02,570 --> 00:16:09,320
three images out of twenty okay so lazy

00:16:06,620 --> 00:16:11,360
loading means that you should only load

00:16:09,320 --> 00:16:13,370
those three images because there's no

00:16:11,360 --> 00:16:14,720
need to load the other 17 because the

00:16:13,370 --> 00:16:16,790
user is not going to see that so you

00:16:14,720 --> 00:16:20,269
should lazy load it when the user starts

00:16:16,790 --> 00:16:22,190
to scroll okay so they say if you adhere

00:16:20,269 --> 00:16:23,120
to any of these or all of these then

00:16:22,190 --> 00:16:25,700
you're going to have a much better

00:16:23,120 --> 00:16:29,120
performing website and they also edit

00:16:25,700 --> 00:16:34,610
these features to their progressive web

00:16:29,120 --> 00:16:39,110
app collection of goodness whatever

00:16:34,610 --> 00:16:41,480
okay so Service Worker so the Service

00:16:39,110 --> 00:16:46,370
Worker I think the easiest way to think

00:16:41,480 --> 00:16:49,790
of it is to think about it as a proxy

00:16:46,370 --> 00:16:52,610
that sits between your browser and the

00:16:49,790 --> 00:16:54,589
Internet or the server battery the site

00:16:52,610 --> 00:16:56,779
is being returned from okay and I have

00:16:54,589 --> 00:16:57,980
an animation it's probably a bit broken

00:16:56,779 --> 00:17:01,040
but never mind

00:16:57,980 --> 00:17:04,280
so the serviceworker itself lives inside

00:17:01,040 --> 00:17:05,839
the browser so you need to have what

00:17:04,280 --> 00:17:07,790
they call you know the modern web

00:17:05,839 --> 00:17:10,610
browser so of course we had lots of

00:17:07,790 --> 00:17:13,040
jokes before about IE 6 and 7 and 9 and

00:17:10,610 --> 00:17:15,260
whatever older i versions don't have it

00:17:13,040 --> 00:17:18,770
but most modern browsers including edge

00:17:15,260 --> 00:17:22,540
of course have the serviceworker enabled

00:17:18,770 --> 00:17:26,120
and you can use the serviceworker api so

00:17:22,540 --> 00:17:28,700
normally what happens if you go out to a

00:17:26,120 --> 00:17:30,980
particular domain your request goes to

00:17:28,700 --> 00:17:33,290
the Internet to the server and then the

00:17:30,980 --> 00:17:34,990
response gets sent back to the browser

00:17:33,290 --> 00:17:36,980
and then the browser parses everything

00:17:34,990 --> 00:17:39,950
but what happens when you have a

00:17:36,980 --> 00:17:42,230
serviceworker enabled activated and

00:17:39,950 --> 00:17:45,350
installed is that every single request

00:17:42,230 --> 00:17:46,970
and response will go through that this

00:17:45,350 --> 00:17:49,490
enables us

00:17:46,970 --> 00:17:52,280
to do whatever we want with this request

00:17:49,490 --> 00:17:54,200
and response cycle right it allows us to

00:17:52,280 --> 00:17:56,659
sort of massage the request it allows us

00:17:54,200 --> 00:17:59,210
to take some responses and put them into

00:17:56,659 --> 00:18:01,789
the cache which is already leading me to

00:17:59,210 --> 00:18:04,520
how we're going to utilize the service

00:18:01,789 --> 00:18:06,799
worker and the cache API to make our

00:18:04,520 --> 00:18:09,080
website work offline okay so the service

00:18:06,799 --> 00:18:10,850
worker is the key that enables a

00:18:09,080 --> 00:18:12,620
progressive web application purely

00:18:10,850 --> 00:18:16,299
because it can intercept these requests

00:18:12,620 --> 00:18:18,520
and you can do stuff with that request

00:18:16,299 --> 00:18:21,080
so the other thing that we talked about

00:18:18,520 --> 00:18:24,230
manifest file so it's a simple JSON file

00:18:21,080 --> 00:18:25,700
that contains a lot more than this but

00:18:24,230 --> 00:18:28,549
these are the key pieces of information

00:18:25,700 --> 00:18:30,409
that you in my opinion at the bare

00:18:28,549 --> 00:18:32,260
minimum should have as part of a

00:18:30,409 --> 00:18:35,659
manifest file so add to homescreen

00:18:32,260 --> 00:18:37,490
information what is the name of the icon

00:18:35,659 --> 00:18:39,200
that you want on your mobile device

00:18:37,490 --> 00:18:41,059
after you've installed the app so you

00:18:39,200 --> 00:18:43,580
can specify that there where are the

00:18:41,059 --> 00:18:46,190
icons for that app what orientation

00:18:43,580 --> 00:18:48,620
should it should start in a horizontal

00:18:46,190 --> 00:18:51,110
in a vertical mode background color and

00:18:48,620 --> 00:18:53,330
startup pace what page should it launch

00:18:51,110 --> 00:18:56,030
when you tap that icon so these are all

00:18:53,330 --> 00:18:58,610
things that you can specify using this

00:18:56,030 --> 00:19:00,530
manifest file and then the browser's can

00:18:58,610 --> 00:19:03,250
of course pick this up and we'll see how

00:19:00,530 --> 00:19:03,250
that works as well

00:19:03,400 --> 00:19:07,789
cache API so probably very

00:19:06,110 --> 00:19:09,890
straightforward the cache API allows us

00:19:07,789 --> 00:19:11,809
to manage the browser's cache which

00:19:09,890 --> 00:19:14,900
means that we can add SS to it we can

00:19:11,809 --> 00:19:18,950
retrieve those assets the one thing that

00:19:14,900 --> 00:19:22,940
I will point out here is that every

00:19:18,950 --> 00:19:26,120
single browser from every single vendor

00:19:22,940 --> 00:19:27,289
on every single machine so the cache

00:19:26,120 --> 00:19:29,390
size and every single machine is going

00:19:27,289 --> 00:19:32,539
to be different okay it's dependent on

00:19:29,390 --> 00:19:34,850
your disk capacity depends on what

00:19:32,539 --> 00:19:39,020
version of Chrome on what OS you are

00:19:34,850 --> 00:19:40,880
using but the point of this is that you

00:19:39,020 --> 00:19:43,250
know let's say you have a very nice

00:19:40,880 --> 00:19:45,289
looking website which is very rich in

00:19:43,250 --> 00:19:46,549
media so it's full of images and videos

00:19:45,289 --> 00:19:49,789
and you say oh I'm just going to cache

00:19:46,549 --> 00:19:51,590
everything right all the 500 megabytes

00:19:49,789 --> 00:19:53,659
of images right you can't do that you

00:19:51,590 --> 00:19:56,390
have to be wary of the fact that you

00:19:53,659 --> 00:19:58,100
have a limited amount of space and there

00:19:56,390 --> 00:19:59,870
are some strategies that you can use to

00:19:58,100 --> 00:20:04,659
manage this space which

00:19:59,870 --> 00:20:07,010
I think we'll take a look at as well now

00:20:04,659 --> 00:20:09,740
caching strategies now there's more

00:20:07,010 --> 00:20:11,779
caching strategies out there I'll tell

00:20:09,740 --> 00:20:13,370
you why I chose this five there's a

00:20:11,779 --> 00:20:15,260
particular reason why I'm showing you

00:20:13,370 --> 00:20:17,270
these five caching strategies so

00:20:15,260 --> 00:20:18,740
whenever you cache a resource or

00:20:17,270 --> 00:20:20,270
whenever you create a progressive web

00:20:18,740 --> 00:20:22,330
app you need to find into the

00:20:20,270 --> 00:20:27,740
appropriate caching strategy and there's

00:20:22,330 --> 00:20:28,610
these five ones let's start from bottom

00:20:27,740 --> 00:20:31,039
to up here

00:20:28,610 --> 00:20:32,840
so cash only what does that mean you

00:20:31,039 --> 00:20:35,390
make a request for something that is

00:20:32,840 --> 00:20:37,880
going to take a look inside your cache

00:20:35,390 --> 00:20:39,679
let's say you requesting app dot CSS the

00:20:37,880 --> 00:20:42,770
request is going to take a look in your

00:20:39,679 --> 00:20:45,380
cache is it there if it is it returns it

00:20:42,770 --> 00:20:47,960
if it's not boom I can't find it Network

00:20:45,380 --> 00:20:49,850
only is the exact opposite of this it

00:20:47,960 --> 00:20:52,220
will always go to the network to find

00:20:49,850 --> 00:20:55,520
the resource if you never go to the

00:20:52,220 --> 00:20:59,200
cache then we have cache first and

00:20:55,520 --> 00:21:02,539
network first so cache first means that

00:20:59,200 --> 00:21:04,610
you request AB dot CSS it will go to the

00:21:02,539 --> 00:21:06,080
cache if it finds it in the cache it

00:21:04,610 --> 00:21:08,419
returns it to your application if it

00:21:06,080 --> 00:21:09,950
can't find it in the cache then it falls

00:21:08,419 --> 00:21:11,840
back to the network so it will try to

00:21:09,950 --> 00:21:12,620
make a network request and get that back

00:21:11,840 --> 00:21:16,370
from the network

00:21:12,620 --> 00:21:18,409
on the contrary network first works the

00:21:16,370 --> 00:21:21,289
other way around right so you request a

00:21:18,409 --> 00:21:22,880
block CSS if we go out to the network if

00:21:21,289 --> 00:21:24,260
it can't find it or if there's no

00:21:22,880 --> 00:21:27,260
network it will fall back to the cache

00:21:24,260 --> 00:21:30,440
and then we have this very first one

00:21:27,260 --> 00:21:32,149
stale while revalidate so this is an

00:21:30,440 --> 00:21:34,370
interesting one this is almost like a

00:21:32,149 --> 00:21:36,080
race between the cache and the network

00:21:34,370 --> 00:21:39,260
so the way this works is that you

00:21:36,080 --> 00:21:41,360
request AB dot CSS and it's going to be

00:21:39,260 --> 00:21:43,190
a request to the cache and to the

00:21:41,360 --> 00:21:44,840
network as well if it's in the cache

00:21:43,190 --> 00:21:48,140
it's going to be returned from the cache

00:21:44,840 --> 00:21:50,390
and then the version that it received

00:21:48,140 --> 00:21:52,250
from the network will update whatever is

00:21:50,390 --> 00:21:54,919
in the cache ok so that's why I stay a

00:21:52,250 --> 00:21:57,710
while everybody died ok remember these

00:21:54,919 --> 00:21:59,510
these are going to come back and then it

00:21:57,710 --> 00:22:04,940
will all make sense why I talked about

00:21:59,510 --> 00:22:07,009
these four five strategies so workbooks

00:22:04,940 --> 00:22:12,909
there was one person who was familiar

00:22:07,009 --> 00:22:17,419
with workbooks I think verbose jess is

00:22:12,909 --> 00:22:21,919
super awesome like seriously if you've

00:22:17,419 --> 00:22:23,659
ever written serviceworker codes you may

00:22:21,919 --> 00:22:26,119
have come across situations where it

00:22:23,659 --> 00:22:28,789
just becomes way too complex to manage

00:22:26,119 --> 00:22:30,859
and there's lots of dark corners and

00:22:28,789 --> 00:22:33,859
hidden things that you know hidden traps

00:22:30,859 --> 00:22:37,129
that you can fall into so workbook GS is

00:22:33,859 --> 00:22:39,259
basically a set of libraries that it's

00:22:37,129 --> 00:22:41,179
almost like a wrapper or a layer above

00:22:39,259 --> 00:22:45,169
the service worker and the caching api's

00:22:41,179 --> 00:22:47,599
so basically comparing the code using

00:22:45,169 --> 00:22:49,940
the cache API and the service worker

00:22:47,599 --> 00:22:51,979
versus writing the same piece of code in

00:22:49,940 --> 00:22:54,769
Berbick GS would be the matter of 20

00:22:51,979 --> 00:22:57,019
lines versus one it's it's really good

00:22:54,769 --> 00:23:01,279
so we're going to take a look at this it

00:22:57,019 --> 00:23:04,279
has a lot of good options it basically

00:23:01,279 --> 00:23:08,029
if you will ever create progressive web

00:23:04,279 --> 00:23:10,099
apps then use verb boxes it's really

00:23:08,029 --> 00:23:12,320
really easy to use it has a plug-in

00:23:10,099 --> 00:23:14,809
based system you can write your custom

00:23:12,320 --> 00:23:16,789
plugins there's a lot of options that it

00:23:14,809 --> 00:23:18,229
can manage which would take a lot of

00:23:16,789 --> 00:23:23,299
time to figure out using all these

00:23:18,229 --> 00:23:26,389
native api's yeah it's just I'm really

00:23:23,299 --> 00:23:29,529
happy that I found it and guess who is

00:23:26,389 --> 00:23:29,529
the creator of per box yes

00:23:32,039 --> 00:23:37,799
me Yeah right no Google but but thank

00:23:36,340 --> 00:23:39,879
you

00:23:37,799 --> 00:23:40,860
although I've wrote a plug-in but we'll

00:23:39,879 --> 00:23:43,989
get to that

00:23:40,860 --> 00:23:46,330
okay so progress Sababa so now you

00:23:43,989 --> 00:23:48,070
hopefully know what a progressive web

00:23:46,330 --> 00:23:49,690
app is or what to expect from it and

00:23:48,070 --> 00:23:51,909
you're probably thinking oh that's great

00:23:49,690 --> 00:23:55,179
but you know I use react I use angular

00:23:51,909 --> 00:23:57,129
how can I use this thing so the good

00:23:55,179 --> 00:24:00,749
news is that and this is just a very

00:23:57,129 --> 00:24:02,619
short list if you google my favorite

00:24:00,749 --> 00:24:04,359
framework PWA

00:24:02,619 --> 00:24:07,289
I guarantee that you will find some sort

00:24:04,359 --> 00:24:11,109
of plugin so for angular it's angular

00:24:07,289 --> 00:24:13,090
/pwa so you need to DS ng add that and

00:24:11,109 --> 00:24:14,379
then progressive web app support is

00:24:13,090 --> 00:24:17,139
going to be added to your angular app

00:24:14,379 --> 00:24:19,210
similarly this is for view Knox GS is a

00:24:17,139 --> 00:24:21,909
static site generator for view that

00:24:19,210 --> 00:24:24,820
actually uses workbooks GS as well so

00:24:21,909 --> 00:24:27,070
once you know how that works is just

00:24:24,820 --> 00:24:29,799
apply all your knowledge there for react

00:24:27,070 --> 00:24:32,379
you need to add serviceworker or you

00:24:29,799 --> 00:24:34,269
just add work box to your project ionic

00:24:32,379 --> 00:24:36,639
since that's based on angular that works

00:24:34,269 --> 00:24:38,919
as well polymer has PW a starter kit and

00:24:36,639 --> 00:24:40,239
as I said probably other frameworks have

00:24:38,919 --> 00:24:42,519
that as well so the good news is that

00:24:40,239 --> 00:24:46,720
the major frameworks have very good

00:24:42,519 --> 00:24:49,389
support for progressive web apps okay

00:24:46,720 --> 00:24:52,299
now we're going to talk about this thing

00:24:49,389 --> 00:24:57,340
it's a putting concept in there because

00:24:52,299 --> 00:24:59,499
it uses one of the it's not that new a

00:24:57,340 --> 00:25:01,809
fairly new browser API called the

00:24:59,499 --> 00:25:05,799
network information API so the network

00:25:01,809 --> 00:25:09,570
information API basically anyone I think

00:25:05,799 --> 00:25:15,609
I also but no one said you know ok so

00:25:09,570 --> 00:25:20,139
what it does it tells you the connection

00:25:15,609 --> 00:25:23,769
of the user is browsing your website so

00:25:20,139 --> 00:25:25,629
basically if your users on Wi-Fi on 4G

00:25:23,769 --> 00:25:27,279
it's going to return a string called 4G

00:25:25,629 --> 00:25:30,909
if they I use it on a 3G is going to

00:25:27,279 --> 00:25:33,909
return 3G anything to G edge or lower is

00:25:30,909 --> 00:25:36,399
going to return a string 2g or slow - 2g

00:25:33,909 --> 00:25:38,559
what this means is that you can take

00:25:36,399 --> 00:25:41,440
this information and act on it right so

00:25:38,559 --> 00:25:43,059
you could do different renderings you

00:25:41,440 --> 00:25:45,340
could do

00:25:43,059 --> 00:25:46,540
and the example that we'll see is using

00:25:45,340 --> 00:25:50,110
workbooks so you could for example

00:25:46,540 --> 00:25:52,450
render lower quality images for users

00:25:50,110 --> 00:25:55,059
who aren't a 3G device versus people who

00:25:52,450 --> 00:25:58,420
use a Wi-Fi so the reason why it's a

00:25:55,059 --> 00:26:00,580
concept is because of its I would love

00:25:58,420 --> 00:26:03,580
for all the browsers to support this but

00:26:00,580 --> 00:26:05,740
at the moment I think Chrome and maybe

00:26:03,580 --> 00:26:08,080
Firefox supports it but I think the

00:26:05,740 --> 00:26:10,210
others will hopefully soon support this

00:26:08,080 --> 00:26:11,980
as well so we're going to take a look at

00:26:10,210 --> 00:26:13,330
this as well because I have some code to

00:26:11,980 --> 00:26:19,390
show you and we're going to go through

00:26:13,330 --> 00:26:34,540
that right excited ok any questions so

00:26:19,390 --> 00:26:37,000
far so I just put a few names like

00:26:34,540 --> 00:26:39,190
Sydney there's an instant app it's

00:26:37,000 --> 00:26:41,110
suddenly in my screen it works like an

00:26:39,190 --> 00:26:45,130
epic I I don't know on the background of

00:26:41,110 --> 00:26:48,220
something download or install probably

00:26:45,130 --> 00:26:54,100
at some point you installed it yeah I

00:26:48,220 --> 00:26:56,500
have yes it's not just going to crawl

00:26:54,100 --> 00:26:58,809
its way into them while it sits you have

00:26:56,500 --> 00:27:00,370
to that's going to be a prompt you say

00:26:58,809 --> 00:27:01,780
install this that's going to be

00:27:00,370 --> 00:27:04,410
something you know installing and then

00:27:01,780 --> 00:27:04,410
the icon will appear

00:27:06,660 --> 00:27:13,980
application okay okay well we can take a

00:27:11,820 --> 00:27:17,160
look at that later but theoretically a

00:27:13,980 --> 00:27:18,450
pitohui works after well it works

00:27:17,160 --> 00:27:20,429
because it's a website so you can go to

00:27:18,450 --> 00:27:22,230
any URL you can use the website or if

00:27:20,429 --> 00:27:24,179
you want to use it as an app you would

00:27:22,230 --> 00:27:28,260
have to install it but we'll be going to

00:27:24,179 --> 00:27:31,770
take a look at that so where should we

00:27:28,260 --> 00:27:35,880
start so if you don't mind I will sit

00:27:31,770 --> 00:27:38,100
down for this quick poll is this tax

00:27:35,880 --> 00:27:39,539
large enough it doesn't matter what it

00:27:38,100 --> 00:27:41,700
says there but it can you guys see it in

00:27:39,539 --> 00:27:43,890
the back and white background works as

00:27:41,700 --> 00:27:48,659
well okay because I changed this last

00:27:43,890 --> 00:27:50,309
minute as well so there's there are some

00:27:48,659 --> 00:27:53,960
people are you know new to this whole

00:27:50,309 --> 00:27:56,960
PWA thing so let me find a very simple

00:27:53,960 --> 00:27:56,960
example

00:28:07,179 --> 00:28:14,540
so I did a very simple I did a talk

00:28:10,250 --> 00:28:17,780
yesterday about less technical PW stuff

00:28:14,540 --> 00:28:21,860
for for a coding bootcamp so what I'm

00:28:17,780 --> 00:28:23,480
going to do I'm going to take that like

00:28:21,860 --> 00:28:27,200
a minified version of that talk and just

00:28:23,480 --> 00:28:28,840
show you what a Peter way looks like in

00:28:27,200 --> 00:28:32,330
one second

00:28:28,840 --> 00:28:33,920
serviceworker code so at least for those

00:28:32,330 --> 00:28:36,020
of you haven't seen it or you don't know

00:28:33,920 --> 00:28:38,840
how to imagine this you will understand

00:28:36,020 --> 00:28:43,970
it as well okay so let me reset a few

00:28:38,840 --> 00:28:46,900
things here pretend you're not seeing

00:28:43,970 --> 00:28:51,020
this now this is not happening

00:28:46,900 --> 00:28:54,730
cool so here we have a very simple

00:28:51,020 --> 00:28:59,390
website that has an h1 element okay

00:28:54,730 --> 00:29:01,660
hopefully this is nothing too difficult

00:28:59,390 --> 00:29:04,190
so we're going to launch this website

00:29:01,660 --> 00:29:07,610
and what you will find is that when you

00:29:04,190 --> 00:29:11,540
work with this serviceworker so a few

00:29:07,610 --> 00:29:13,670
things I use Chrome almost exclusively

00:29:11,540 --> 00:29:15,950
when I create pwace and I work with the

00:29:13,670 --> 00:29:19,220
serviceworker other browsers as I said

00:29:15,950 --> 00:29:21,800
support it but I find the chrome dev

00:29:19,220 --> 00:29:23,809
tools and their overall support for how

00:29:21,800 --> 00:29:25,460
you can debug and and take a look at

00:29:23,809 --> 00:29:26,920
service workers to be the best ok so

00:29:25,460 --> 00:29:30,320
that's why I'm going to stick to this

00:29:26,920 --> 00:29:33,740
you can use any other browser if you

00:29:30,320 --> 00:29:36,050
want so at the moment this is our

00:29:33,740 --> 00:29:38,120
website ok so there's a reason why you

00:29:36,050 --> 00:29:43,520
see that the serviceworker is read that

00:29:38,120 --> 00:29:46,460
is because there's this advert CSS that

00:29:43,520 --> 00:29:47,840
applies the style okay very easy to

00:29:46,460 --> 00:29:52,400
understand so far so good

00:29:47,840 --> 00:29:55,670
now the basic groups the basic premise

00:29:52,400 --> 00:30:01,530
of a progressive web app is that when I

00:29:55,670 --> 00:30:10,690
go of line is that let me remove the

00:30:01,530 --> 00:30:15,520
hi I want to get rid of the okay this is

00:30:10,690 --> 00:30:17,710
hopefully better so notice that and I

00:30:15,520 --> 00:30:20,350
probably moved this but if you open your

00:30:17,710 --> 00:30:22,540
dev tools you is that large enough for

00:30:20,350 --> 00:30:24,820
you to see in the back okay you should

00:30:22,540 --> 00:30:26,440
have that application tabs somewhere

00:30:24,820 --> 00:30:30,280
okay I just moved it here because I

00:30:26,440 --> 00:30:32,669
access it a lot in my dev tools and not

00:30:30,280 --> 00:30:34,780
as it has manifest serviceworker storage

00:30:32,669 --> 00:30:36,370
somewhere here it has cache so we're

00:30:34,780 --> 00:30:39,640
going to use all of this because this is

00:30:36,370 --> 00:30:43,260
the place that you want to be when you

00:30:39,640 --> 00:30:47,830
create your PW and when you test it so

00:30:43,260 --> 00:30:49,630
offline right so we want to make sure

00:30:47,830 --> 00:30:50,980
that it works offline and probably this

00:30:49,630 --> 00:30:53,049
is something that you've seen millions

00:30:50,980 --> 00:30:54,790
of times right at the moment we have a

00:30:53,049 --> 00:30:57,400
standard website we are offline nothing

00:30:54,790 --> 00:30:59,640
works okay do you know how this thing is

00:30:57,400 --> 00:30:59,640
called

00:31:00,110 --> 00:31:11,330
so it's not Steve of Zilla or down-ass

00:31:06,470 --> 00:31:12,019
or like down a socket but you know of

00:31:11,330 --> 00:31:14,269
the game right

00:31:12,019 --> 00:31:19,940
everyone knows the game jumpy jumpy no

00:31:14,269 --> 00:31:21,669
okay back to pwace so it probably seen

00:31:19,940 --> 00:31:24,440
this before right you don't have network

00:31:21,669 --> 00:31:26,570
your site doesn't work so what can you

00:31:24,440 --> 00:31:29,269
do to fix it well you can start working

00:31:26,570 --> 00:31:32,299
with the serviceworker now the

00:31:29,269 --> 00:31:35,630
serviceworker this is all what it takes

00:31:32,299 --> 00:31:37,580
to enable the serviceworker itself okay

00:31:35,630 --> 00:31:41,299
so we check whether the serviceworker is

00:31:37,580 --> 00:31:42,649
enabled for the browser it's probably

00:31:41,299 --> 00:31:44,120
good practice to do that because you

00:31:42,649 --> 00:31:46,669
want to make sure that you know your

00:31:44,120 --> 00:31:48,289
users don't get any errors and notice

00:31:46,669 --> 00:31:50,809
navigated that serviceworker don't

00:31:48,289 --> 00:31:52,159
register so don't register is one of the

00:31:50,809 --> 00:31:52,820
methods that you can access in the

00:31:52,159 --> 00:31:55,669
serviceworker

00:31:52,820 --> 00:31:57,440
API which allows you to register the

00:31:55,669 --> 00:31:59,149
serviceworker itself and the

00:31:57,440 --> 00:32:00,860
serviceworker in our case is that

00:31:59,149 --> 00:32:03,019
javascript file okay so the

00:32:00,860 --> 00:32:06,019
serviceworker is just another JavaScript

00:32:03,019 --> 00:32:08,720
file that you create so what happens is

00:32:06,019 --> 00:32:12,500
that when you have this code the browser

00:32:08,720 --> 00:32:14,990
is going to download register and then

00:32:12,500 --> 00:32:18,590
activate that serviceworker okay so

00:32:14,990 --> 00:32:21,889
theoretically if that's correct and this

00:32:18,590 --> 00:32:23,600
is a promise based API we should see

00:32:21,889 --> 00:32:28,669
that serviceworker is good to go message

00:32:23,600 --> 00:32:30,440
in our console so konso just refresh

00:32:28,669 --> 00:32:32,809
this site okay serviceworker

00:32:30,440 --> 00:32:35,809
is good to go so that means that we now

00:32:32,809 --> 00:32:38,510
have a serviceworker enabled activated

00:32:35,809 --> 00:32:42,590
and ready to go so if I go offline that

00:32:38,510 --> 00:32:43,730
should just work right no why because we

00:32:42,590 --> 00:32:45,559
have just registered the serviceworker

00:32:43,730 --> 00:32:47,750
but we haven't actually written any code

00:32:45,559 --> 00:32:50,059
for the serviceworker we now need to

00:32:47,750 --> 00:32:53,610
write the code for the serviceworker

00:32:50,059 --> 00:32:57,480
itself okay hmm

00:32:53,610 --> 00:33:00,480
so let's ignore that's there so let's

00:32:57,480 --> 00:33:02,340
just collect all the files that make up

00:33:00,480 --> 00:33:05,070
our application and put them into an

00:33:02,340 --> 00:33:06,570
array okay so this is as I said the most

00:33:05,070 --> 00:33:09,750
simple example that you will come across

00:33:06,570 --> 00:33:11,820
probably index.html we have an Abbe doji

00:33:09,750 --> 00:33:15,900
s and we have an app dot CSS these are

00:33:11,820 --> 00:33:18,210
the three pieces of the three files that

00:33:15,900 --> 00:33:23,570
make up our application so what we can

00:33:18,210 --> 00:33:23,570
do is then this

00:33:24,860 --> 00:33:31,560
so in line 8 we come up with a name for

00:33:28,920 --> 00:33:33,330
a cache so that's going to be our custom

00:33:31,560 --> 00:33:37,260
cache in the browser so I just gave it

00:33:33,330 --> 00:33:39,510
the name my - cache self so when you

00:33:37,260 --> 00:33:41,940
write serviceworker code itself always

00:33:39,510 --> 00:33:44,520
refers to always refers to the

00:33:41,940 --> 00:33:47,070
serviceworker execution contact so

00:33:44,520 --> 00:33:48,060
that's like the this in the scope of the

00:33:47,070 --> 00:33:50,460
serviceworker okay

00:33:48,060 --> 00:33:52,800
so self dot and we add an event listener

00:33:50,460 --> 00:33:55,820
on install so we say when the

00:33:52,800 --> 00:33:59,670
serviceworker is being installed then

00:33:55,820 --> 00:34:02,910
open a cache with the name my cache open

00:33:59,670 --> 00:34:04,410
is going to either create our cache

00:34:02,910 --> 00:34:07,950
we'll see what that means in just a

00:34:04,410 --> 00:34:10,650
moment and then the real magic is cache

00:34:07,950 --> 00:34:12,270
Edel files okay so it's going to create

00:34:10,650 --> 00:34:14,640
that cache and it's going to add all

00:34:12,270 --> 00:34:17,160
those files that we have specified from

00:34:14,640 --> 00:34:21,990
lines so in that array for the files

00:34:17,160 --> 00:34:25,860
does this make sense okay so let's save

00:34:21,990 --> 00:34:28,080
this refresh or go back online

00:34:25,860 --> 00:34:30,179
refresh this so we have serviceworker

00:34:28,080 --> 00:34:33,390
it's good to go but now if under the

00:34:30,179 --> 00:34:35,220
application tab I scroll down I have

00:34:33,390 --> 00:34:37,590
this section called the cache storage

00:34:35,220 --> 00:34:39,990
and if I expand that notice I have

00:34:37,590 --> 00:34:41,669
something called my cache so that is the

00:34:39,990 --> 00:34:44,310
cache that I've just created and if I

00:34:41,669 --> 00:34:47,760
click on it I see that there are these

00:34:44,310 --> 00:34:52,260
assets in that cache ok so now we have

00:34:47,760 --> 00:34:53,610
any boardís cache so if I now go offline

00:34:52,260 --> 00:34:58,470
will it work

00:34:53,610 --> 00:35:01,050
no it won't why and just keep on doing

00:34:58,470 --> 00:35:04,380
of it I like the down the store thing so

00:35:01,050 --> 00:35:07,740
why it doesn't work we now have the

00:35:04,380 --> 00:35:10,350
serviceworker we we now have these

00:35:07,740 --> 00:35:12,720
assets in the cache but we never told

00:35:10,350 --> 00:35:14,850
the browser what to do when it's offline

00:35:12,720 --> 00:35:17,040
and how to get these items from the

00:35:14,850 --> 00:35:22,010
cache right that is the last piece that

00:35:17,040 --> 00:35:22,010
we need to add so how do I do that

00:35:28,799 --> 00:35:34,180
so this is where the real magic happens

00:35:31,109 --> 00:35:37,000
so the way the browser works is that

00:35:34,180 --> 00:35:39,700
every time it requests a resource so it

00:35:37,000 --> 00:35:42,790
requests a CSS file a JavaScript file

00:35:39,700 --> 00:35:44,589
and index file it uses a fetch event so

00:35:42,790 --> 00:35:46,420
it goes out and fetches a dot CSS

00:35:44,589 --> 00:35:49,750
patches whatever to the debtor

00:35:46,420 --> 00:35:51,790
okay so in the serviceworker we add an

00:35:49,750 --> 00:35:55,900
event listener for the fetch event and

00:35:51,790 --> 00:35:59,230
then the real magic happens in line and

00:35:55,900 --> 00:36:01,270
19 so what happens so in that block line

00:35:59,230 --> 00:36:03,819
18 - what 21

00:36:01,270 --> 00:36:05,710
it basically says take a look at the

00:36:03,819 --> 00:36:07,390
event request so the event request is

00:36:05,710 --> 00:36:09,940
going to be localhost

00:36:07,390 --> 00:36:13,359
something-something slash a dot CSS if

00:36:09,940 --> 00:36:15,450
you find that AB dot CSS in the cache

00:36:13,359 --> 00:36:19,569
that's the response did return it

00:36:15,450 --> 00:36:21,040
otherwise so or go and run your standard

00:36:19,569 --> 00:36:23,380
fetch event so try to go out to the

00:36:21,040 --> 00:36:26,559
network so what this is going to do is

00:36:23,380 --> 00:36:29,170
because we have we will have a match for

00:36:26,559 --> 00:36:32,200
a dot CSS at the GS and index of HTML

00:36:29,170 --> 00:36:34,480
all of those resources are going to be

00:36:32,200 --> 00:36:36,609
returned from the cache itself so

00:36:34,480 --> 00:36:39,520
actually that piece of code after the or

00:36:36,609 --> 00:36:47,250
is never going to be executed right so

00:36:39,520 --> 00:36:47,250
let's save this let's do go back online

00:36:47,970 --> 00:36:58,089
refresh hit offline refresh oh ok ok how

00:36:56,079 --> 00:36:59,980
is vary from one ok and stay and

00:36:58,089 --> 00:37:02,380
everything works okay so I'm offline I

00:36:59,980 --> 00:37:03,970
don't have network this thing still

00:37:02,380 --> 00:37:05,680
works and if you take a look at here in

00:37:03,970 --> 00:37:07,750
the console and not sure how much you

00:37:05,680 --> 00:37:11,079
can see that but basically it says

00:37:07,750 --> 00:37:13,119
request for AB dodea AB the GS and the

00:37:11,079 --> 00:37:14,710
reason why I say this here is because I

00:37:13,119 --> 00:37:16,299
added that log statement in the file so

00:37:14,710 --> 00:37:18,490
now everything is being returned from

00:37:16,299 --> 00:37:23,380
the cache so let me prove something to

00:37:18,490 --> 00:37:28,990
you let's say I forget to add AB dot CSS

00:37:23,380 --> 00:37:30,549
okay so I'm not adding that and here's

00:37:28,990 --> 00:37:32,680
another thing so this is a good learning

00:37:30,549 --> 00:37:36,400
moment as well every time when you work

00:37:32,680 --> 00:37:37,900
with the service worker and pwace first

00:37:36,400 --> 00:37:40,270
of all I already made a mistake you

00:37:37,900 --> 00:37:41,250
should always test it on a private tab

00:37:40,270 --> 00:37:45,370
because

00:37:41,250 --> 00:37:47,080
having tested so many PWA sometimes I go

00:37:45,370 --> 00:37:48,310
to local host port something and

00:37:47,080 --> 00:37:50,650
something there's opens even though I'm

00:37:48,310 --> 00:37:52,930
not running anything I'm like what so

00:37:50,650 --> 00:37:53,890
you will have this very fun things going

00:37:52,930 --> 00:37:56,020
on

00:37:53,890 --> 00:37:59,440
this is the magic reset button here

00:37:56,020 --> 00:38:01,150
clear storage okay so you will use this

00:37:59,440 --> 00:38:02,620
this is going to be your best friend so

00:38:01,150 --> 00:38:04,660
if you scroll here there's this clear

00:38:02,620 --> 00:38:06,880
side data make sure that everything is

00:38:04,660 --> 00:38:07,750
checked and as you can see it's going to

00:38:06,880 --> 00:38:09,730
unregister

00:38:07,750 --> 00:38:11,230
all the active service workers it's

00:38:09,730 --> 00:38:13,750
going to clear the cache so basically

00:38:11,230 --> 00:38:15,970
it's like your big red reset everything

00:38:13,750 --> 00:38:18,280
button to normal okay and this is very

00:38:15,970 --> 00:38:20,050
useful because sometimes you will run

00:38:18,280 --> 00:38:21,430
multiple service workers in multiple

00:38:20,050 --> 00:38:23,230
ports and it just gets all very

00:38:21,430 --> 00:38:25,240
confusing you come here clear everything

00:38:23,230 --> 00:38:26,650
start from scratch okay so that's what

00:38:25,240 --> 00:38:31,000
I'm going to do now make sure everything

00:38:26,650 --> 00:38:34,780
is deleted and now okay it doesn't work

00:38:31,000 --> 00:38:38,770
so let's go back online so when we are

00:38:34,780 --> 00:38:42,310
online we get the standard functionality

00:38:38,770 --> 00:38:44,920
but when we go offline remember we now

00:38:42,310 --> 00:38:47,260
did not add a dot CSS to the cache so

00:38:44,920 --> 00:38:48,940
when we go online we no longer get the

00:38:47,260 --> 00:38:51,640
stylesheet applied we still get the

00:38:48,940 --> 00:38:53,320
content but because F dot CSS is not in

00:38:51,640 --> 00:38:54,670
our cache there's no way that the

00:38:53,320 --> 00:38:56,710
browser can get to that so it will

00:38:54,670 --> 00:39:01,410
render whatever it can without the CSS

00:38:56,710 --> 00:39:04,330
okay so this is your most basic PWA

00:39:01,410 --> 00:39:07,840
works offline for those of you who are

00:39:04,330 --> 00:39:11,570
new to this does this make sense clear

00:39:07,840 --> 00:39:15,770
as mud okay

00:39:11,570 --> 00:39:18,890
two techniques you use from the here

00:39:15,770 --> 00:39:20,330
it's this is cash first cash for because

00:39:18,890 --> 00:39:21,440
you go to the cash first and then you

00:39:20,330 --> 00:39:24,890
fall back to the network

00:39:21,440 --> 00:39:25,990
so whatever the name of that was any

00:39:24,890 --> 00:39:30,230
questions so far

00:39:25,990 --> 00:39:35,810
sorry what time I finish I might finish

00:39:30,230 --> 00:39:43,370
that's four or five four i doesn't know

00:39:35,810 --> 00:39:49,310
because I can but I think I don't have

00:39:43,370 --> 00:39:53,920
it here for 30 mm-hmm perfect

00:39:49,310 --> 00:39:53,920
so any questions no yes

00:39:55,400 --> 00:40:03,809
so I can't hear well yeah there was a

00:40:01,650 --> 00:40:06,660
reason for that but I forgot there's a

00:40:03,809 --> 00:40:13,920
particular reason for that which I can't

00:40:06,660 --> 00:40:16,260
remember but it could be yeah it could

00:40:13,920 --> 00:40:18,000
be to do something with how the service

00:40:16,260 --> 00:40:22,740
worker looks at the scope of your app

00:40:18,000 --> 00:40:24,510
but I'm not I'm not sure but I need to

00:40:22,740 --> 00:40:29,400
check that up and now I'll try to find

00:40:24,510 --> 00:40:35,609
it for you okay so from this you now

00:40:29,400 --> 00:40:37,920
understand how this all works but where

00:40:35,609 --> 00:40:39,150
is it you know let me show you another

00:40:37,920 --> 00:40:41,670
basic example and then we'll

00:40:39,150 --> 00:40:45,720
progressively go to the sort of harder

00:40:41,670 --> 00:40:47,430
examples PWA code I wasn't planning on

00:40:45,720 --> 00:40:53,550
showing all this but this is another

00:40:47,430 --> 00:40:57,030
good example so nodes server is so this

00:40:53,550 --> 00:41:02,160
is running on low cost 80 so this is a

00:40:57,030 --> 00:41:03,750
slightly more complex example let me

00:41:02,160 --> 00:41:08,010
just clear everything because god knows

00:41:03,750 --> 00:41:09,900
what I've done before so being reset but

00:41:08,010 --> 00:41:11,220
oh you see I was actually offline I just

00:41:09,900 --> 00:41:15,660
loaded something that's what I'm saying

00:41:11,220 --> 00:41:19,170
it's crazy so I'm online it will load

00:41:15,660 --> 00:41:22,319
probably the same thing but okay so this

00:41:19,170 --> 00:41:25,770
example is kind of the same but it has

00:41:22,319 --> 00:41:28,530
one extra thing added to it this is like

00:41:25,770 --> 00:41:32,339
a news website which I'm not a designer

00:41:28,530 --> 00:41:34,020
as you can tell by the-- wonderful is

00:41:32,339 --> 00:41:37,530
that this took me like a day just to

00:41:34,020 --> 00:41:39,359
make it look like this the only

00:41:37,530 --> 00:41:42,359
difference here is that this time the

00:41:39,359 --> 00:41:45,690
data that you see here is coming from an

00:41:42,359 --> 00:41:47,839
API ok so there's actually if I go to

00:41:45,690 --> 00:41:53,339
locos API slash

00:41:47,839 --> 00:41:55,079
news this is the raw data that gets

00:41:53,339 --> 00:41:56,819
parsed and displayed to you ok so this

00:41:55,079 --> 00:41:58,020
is assuming that we grabbing data from

00:41:56,819 --> 00:42:01,190
somewhere and displaying it in the

00:41:58,020 --> 00:42:01,190
application itself and

00:42:02,190 --> 00:42:08,520
and you will see that if we go offline

00:42:04,620 --> 00:42:10,620
this whole thing still works okay so I'm

00:42:08,520 --> 00:42:12,540
not able to refresh in a sense that I'm

00:42:10,620 --> 00:42:15,360
not able to go out to the API and get

00:42:12,540 --> 00:42:17,400
the latest data but still I can just see

00:42:15,360 --> 00:42:19,140
the data that was there when I lost

00:42:17,400 --> 00:42:23,480
refresh the application when when I was

00:42:19,140 --> 00:42:23,480
lost online so the way this is done is

00:42:23,810 --> 00:42:31,380
it's all in this cache thingy here so

00:42:27,480 --> 00:42:33,060
let's close this so now you will see

00:42:31,380 --> 00:42:35,700
that I have two caches I have this news

00:42:33,060 --> 00:42:38,730
cache which is again just the JavaScript

00:42:35,700 --> 00:42:40,740
file the index file and also what I want

00:42:38,730 --> 00:42:44,220
you to notice is that this looks a bit

00:42:40,740 --> 00:42:45,570
weird like slash Ajax slash libs etc if

00:42:44,220 --> 00:42:48,420
you take a look at the serviceworker

00:42:45,570 --> 00:42:51,840
file itself for this particular

00:42:48,420 --> 00:42:54,570
application you will notice that you can

00:42:51,840 --> 00:42:56,760
not only cash resources that are local

00:42:54,570 --> 00:43:00,510
to your device but you can also go out

00:42:56,760 --> 00:43:02,250
to a third-party CSS file or JavaScript

00:43:00,510 --> 00:43:04,980
file and put that into your own cache as

00:43:02,250 --> 00:43:07,950
well ok so that's what I'm doing and if

00:43:04,980 --> 00:43:10,710
you look carefully there's another cache

00:43:07,950 --> 00:43:13,860
storage here called PWA news data cache

00:43:10,710 --> 00:43:19,470
which just contains such API news but if

00:43:13,860 --> 00:43:23,490
I click on that I probably need to the

00:43:19,470 --> 00:43:26,610
this way ok what you see here is that

00:43:23,490 --> 00:43:30,060
the entire response from the API is also

00:43:26,610 --> 00:43:32,250
cached so this is what allows me to

00:43:30,060 --> 00:43:34,860
basically fetch this even though when

00:43:32,250 --> 00:43:36,930
I'm offline ok but it makes sense to put

00:43:34,860 --> 00:43:38,100
this into a different cache right

00:43:36,930 --> 00:43:40,860
because you want to make sure that your

00:43:38,100 --> 00:43:43,710
assets are different from the API why

00:43:40,860 --> 00:43:45,380
the API response inside the cache is

00:43:43,710 --> 00:43:48,180
likely to be updated more frequently

00:43:45,380 --> 00:43:50,280
than your static assets right it's not

00:43:48,180 --> 00:43:52,080
likely that a CSS file or a JavaScript

00:43:50,280 --> 00:43:53,880
file is going to change every time when

00:43:52,080 --> 00:44:00,560
you go online whereas the actual

00:43:53,880 --> 00:44:00,560
response from a news API is going to

00:44:01,260 --> 00:44:10,240
get updated so this application does a

00:44:05,020 --> 00:44:12,990
few more additional things first of all

00:44:10,240 --> 00:44:15,850
it has a manifest.json file so you can

00:44:12,990 --> 00:44:19,240
take a look at a very basic one here so

00:44:15,850 --> 00:44:21,100
named PW a news short name name and then

00:44:19,240 --> 00:44:23,680
an icon which is an array of objects

00:44:21,100 --> 00:44:26,470
that specifies the icon in different

00:44:23,680 --> 00:44:27,520
sizes for when you install this app and

00:44:26,470 --> 00:44:30,370
we're going to take a look at that in

00:44:27,520 --> 00:44:33,730
just a second where the browser should

00:44:30,370 --> 00:44:36,460
look for the actual icon and on top of

00:44:33,730 --> 00:44:39,610
that we also specify the start URL so

00:44:36,460 --> 00:44:43,390
when it is installed and when you tap it

00:44:39,610 --> 00:44:45,970
on your mobile where it should start so

00:44:43,390 --> 00:44:49,780
it's the root display stand-alone so

00:44:45,970 --> 00:44:52,360
this is what's going to render our PWA

00:44:49,780 --> 00:44:54,250
in a separate window so it's not going

00:44:52,360 --> 00:44:56,500
to open the browser is going to open a

00:44:54,250 --> 00:44:57,970
separate window on the device and then

00:44:56,500 --> 00:45:00,880
background and theme color you will see

00:44:57,970 --> 00:45:02,970
that in just a second and there's one

00:45:00,880 --> 00:45:06,400
more thing that this particular

00:45:02,970 --> 00:45:10,120
application does it accepts push

00:45:06,400 --> 00:45:12,640
notifications so push notifications are

00:45:10,120 --> 00:45:14,860
a bit tricky because every push

00:45:12,640 --> 00:45:16,450
notification that you have or that you

00:45:14,860 --> 00:45:19,630
want to any boom must go through a

00:45:16,450 --> 00:45:22,090
third-party service ok the reason for

00:45:19,630 --> 00:45:23,920
this is because imagine that you allow

00:45:22,090 --> 00:45:25,570
push notifications and then I as a

00:45:23,920 --> 00:45:27,310
developer can just spam you with

00:45:25,570 --> 00:45:29,770
whatever I want ok so it has to go

00:45:27,310 --> 00:45:31,960
through a service and that service will

00:45:29,770 --> 00:45:35,380
send out a notification to all the

00:45:31,960 --> 00:45:37,450
devices that have any border allowed the

00:45:35,380 --> 00:45:39,520
notifications to happen and how do I

00:45:37,450 --> 00:45:42,670
know that I have notifications enabled

00:45:39,520 --> 00:45:44,890
this is particularly in chrome you know

00:45:42,670 --> 00:45:48,610
you click this icon and notifications is

00:45:44,890 --> 00:45:50,620
allowed so when it's asked default what

00:45:48,610 --> 00:45:52,240
happens is that you know we refresh this

00:45:50,620 --> 00:45:54,450
site and probably you've seen this

00:45:52,240 --> 00:45:54,450
before

00:45:56,510 --> 00:46:06,200
right big magic reset button where a

00:46:03,710 --> 00:46:07,250
website does something similar to this

00:46:06,200 --> 00:46:09,890
okay

00:46:07,250 --> 00:46:11,720
this means that that website is likely

00:46:09,890 --> 00:46:14,240
to be a progressive web app and they

00:46:11,720 --> 00:46:16,700
want you to accept notifications a

00:46:14,240 --> 00:46:18,200
notification can happen on certain

00:46:16,700 --> 00:46:22,430
conditions so I'm going to allow this

00:46:18,200 --> 00:46:26,320
and then fingers crossed I'm going to

00:46:22,430 --> 00:46:26,320
try to send a notification to this app

00:46:26,500 --> 00:46:35,480
using in some new arm so what I'm going

00:46:31,880 --> 00:46:38,810
to do and the way this is done is I will

00:46:35,480 --> 00:46:41,960
send an HTTP POST I'll zoom in on this

00:46:38,810 --> 00:46:44,510
sorry it's too dark maybe so I'm going

00:46:41,960 --> 00:46:48,140
to send an HTTP POST with a hypothetical

00:46:44,510 --> 00:46:50,240
new article to the API slash news and

00:46:48,140 --> 00:46:52,430
point that I have and the way I've set

00:46:50,240 --> 00:46:55,640
up this application is that if there's a

00:46:52,430 --> 00:46:58,160
new article added the PWA should receive

00:46:55,640 --> 00:47:01,160
a push notification ok telling the user

00:46:58,160 --> 00:47:04,280
hey there's a new article that just got

00:47:01,160 --> 00:47:06,170
added so finger crossed 50% chance that

00:47:04,280 --> 00:47:10,130
this is going to fire okay so I'm going

00:47:06,170 --> 00:47:12,859
to sand and there we go

00:47:10,130 --> 00:47:14,750
okay so I receive the notification and

00:47:12,859 --> 00:47:17,630
what I did I just put in the title and

00:47:14,750 --> 00:47:19,700
the name of the author it's now gone to

00:47:17,630 --> 00:47:21,800
the notification okay now theoretically

00:47:19,700 --> 00:47:23,510
there's a lot more that you could do I'm

00:47:21,800 --> 00:47:24,830
not refreshing the newsfeed but you

00:47:23,510 --> 00:47:26,119
could also do that automatically and

00:47:24,830 --> 00:47:30,380
there's a whole lot of things that you

00:47:26,119 --> 00:47:33,800
could do now one more thing that I want

00:47:30,380 --> 00:47:35,390
you to realize and we're not going to

00:47:33,800 --> 00:47:38,200
get into the details of that but if I

00:47:35,390 --> 00:47:38,200
open the serviceworker

00:47:38,440 --> 00:47:45,770
this is it right it's it's complex okay

00:47:42,890 --> 00:47:46,910
there's a lot happening here the reason

00:47:45,770 --> 00:47:49,850
why I'm showing this to you is because

00:47:46,910 --> 00:47:51,950
this is using the serviceworker api and

00:47:49,850 --> 00:47:54,680
it's using the cache API so it's using

00:47:51,950 --> 00:47:56,660
these native things next up we're going

00:47:54,680 --> 00:47:59,450
to take a look at a word box example and

00:47:56,660 --> 00:48:02,690
hopefully you will see that all of this

00:47:59,450 --> 00:48:06,410
is just going to be literally about ten

00:48:02,690 --> 00:48:09,150
lines of code or maybe less okay

00:48:06,410 --> 00:48:11,820
any questions on this we're not going to

00:48:09,150 --> 00:48:14,910
talk about this web push thing there's a

00:48:11,820 --> 00:48:17,340
an NPM package that one second there's

00:48:14,910 --> 00:48:18,840
an NPM package allows you to do that

00:48:17,340 --> 00:48:20,040
pretty much out of the box it's called

00:48:18,840 --> 00:48:22,980
web - push

00:48:20,040 --> 00:48:25,470
so NPM iWeb - push you just get some API

00:48:22,980 --> 00:48:28,940
keys but I'll get you this code so you

00:48:25,470 --> 00:48:28,940
can see how it's done yeah

00:48:30,689 --> 00:48:42,009
could I just show you D yeah so what

00:48:37,449 --> 00:48:49,689
happens there is it's basically this bit

00:48:42,009 --> 00:48:50,259
here so lines 36 to 50 something so what

00:48:49,689 --> 00:48:54,880
oopsie

00:48:50,259 --> 00:48:58,359
sorry so what happens is that we take a

00:48:54,880 --> 00:49:01,119
look at the request URL and if it

00:48:58,359 --> 00:49:03,849
contains slash API slash News then we

00:49:01,119 --> 00:49:05,199
put stuff into the data cache otherwise

00:49:03,849 --> 00:49:06,789
so this is the code that you've already

00:49:05,199 --> 00:49:09,369
seen before in the very simple example

00:49:06,789 --> 00:49:11,979
that's exactly the same and then here we

00:49:09,369 --> 00:49:13,839
have casually put and we put a cloned

00:49:11,979 --> 00:49:16,779
version of the the response that's how

00:49:13,839 --> 00:49:20,109
you would do it for the API I also want

00:49:16,779 --> 00:49:24,160
you to kind of not memorize it but just

00:49:20,109 --> 00:49:26,439
remember sort of how complex lines 43:49

00:49:24,160 --> 00:49:28,150
look like and then I'm going to show you

00:49:26,439 --> 00:49:30,130
the world box equivalent of that which

00:49:28,150 --> 00:49:32,249
is believe it or not one single line of

00:49:30,130 --> 00:49:32,249
code

00:49:34,540 --> 00:49:37,140
yeah

00:49:37,930 --> 00:49:50,070
at the ATM alliance of opera apply yep

00:49:45,340 --> 00:49:56,060
is there the p-doped realized in Bexley

00:49:50,070 --> 00:49:56,060
and another version of

00:50:01,490 --> 00:50:06,079
Oh like how do you okay so how does the

00:50:04,009 --> 00:50:09,680
browser know where the manifest file is

00:50:06,079 --> 00:50:13,069
kinda yes or if I could be the forgot

00:50:09,680 --> 00:50:16,069
that right here right so it's your index

00:50:13,069 --> 00:50:18,319
of HTML you have to point to the

00:50:16,069 --> 00:50:19,789
manifest I'm sorry quite obvious but

00:50:18,319 --> 00:50:22,450
that's how it's done

00:50:19,789 --> 00:50:25,859
so one sec

00:50:22,450 --> 00:50:25,859
is better

00:50:27,890 --> 00:50:34,560
so every website could be made into a

00:50:32,310 --> 00:50:36,150
progressive about how adding the

00:50:34,560 --> 00:50:39,859
serviceworker adding the manifest file

00:50:36,150 --> 00:50:39,859
using the cache that's it

00:50:43,499 --> 00:50:53,409
our normal no sorry the node modules

00:50:50,499 --> 00:50:56,140
here is because I have a server file and

00:50:53,409 --> 00:50:58,659
that's that's because I'm launching this

00:50:56,140 --> 00:51:02,019
from node 2 n able the push

00:50:58,659 --> 00:51:04,059
notifications so you wouldn't even need

00:51:02,019 --> 00:51:10,029
that if you don't need that and the

00:51:04,059 --> 00:51:12,880
other thing is click so you may have

00:51:10,029 --> 00:51:15,459
noticed this before but there's a

00:51:12,880 --> 00:51:16,899
manifest thing on their application so

00:51:15,459 --> 00:51:18,399
just where you know where the service

00:51:16,899 --> 00:51:20,289
worker thing is and where the reset

00:51:18,399 --> 00:51:22,299
button is there's manifest and it

00:51:20,289 --> 00:51:23,499
basically shows you the icons and

00:51:22,299 --> 00:51:25,479
everything so you get like a visual

00:51:23,499 --> 00:51:28,299
representation of your manifest file as

00:51:25,479 --> 00:51:31,239
well so why is this important I have a

00:51:28,299 --> 00:51:33,159
wonderful simulator here so I'm going to

00:51:31,239 --> 00:51:34,809
show this to you on iOS and then I have

00:51:33,159 --> 00:51:36,999
an Android version of this as well so

00:51:34,809 --> 00:51:40,299
you often open Safari you go to

00:51:36,999 --> 00:51:42,279
localhost and so far this is you know

00:51:40,299 --> 00:51:45,880
nothing special you've seen this before

00:51:42,279 --> 00:51:49,709
so how does this become a progressive

00:51:45,880 --> 00:51:53,979
how does it become an app ok so in

00:51:49,709 --> 00:51:56,559
Safari on iOS you tagged tab that

00:51:53,979 --> 00:51:58,479
whatever button that was and then you

00:51:56,559 --> 00:52:00,819
scroll a bit and notice there is this

00:51:58,479 --> 00:52:03,509
thing called add to homescreen okay so

00:52:00,819 --> 00:52:06,219
when you click on that you will see some

00:52:03,509 --> 00:52:09,429
familiar things in there right you see

00:52:06,219 --> 00:52:12,399
the icon that's from the manifest file

00:52:09,429 --> 00:52:15,249
you see news that was also in the

00:52:12,399 --> 00:52:18,489
manifest file short short name notice

00:52:15,249 --> 00:52:23,319
the localhost / that was in the manifest

00:52:18,489 --> 00:52:25,989
file as well so you hit add and notice I

00:52:23,319 --> 00:52:26,859
now have an icon right or like a launch

00:52:25,989 --> 00:52:28,630
I have it twice

00:52:26,859 --> 00:52:32,199
ignore that that's from yesterday but

00:52:28,630 --> 00:52:34,359
but now I have that icon and if I look

00:52:32,199 --> 00:52:36,699
at my phone now there's no way that I

00:52:34,359 --> 00:52:38,559
could tell whether that's a native app

00:52:36,699 --> 00:52:40,179
that I installed from from the App Store

00:52:38,559 --> 00:52:41,679
or whether that's a PWA that I just

00:52:40,179 --> 00:52:43,509
added to my home screen right that's the

00:52:41,679 --> 00:52:48,159
the whole point and remember in the

00:52:43,509 --> 00:52:49,749
manifest file we said stand alone

00:52:48,159 --> 00:52:51,639
whatever that option was so it will

00:52:49,749 --> 00:52:54,789
launch in a standalone window so when

00:52:51,639 --> 00:52:56,650
you hit this it will start a window

00:52:54,789 --> 00:52:58,299
which is not Safari although it's

00:52:56,650 --> 00:52:59,980
based on safari that doesn't matter and

00:52:58,299 --> 00:53:02,170
then now you get this app that you can

00:52:59,980 --> 00:53:04,839
scroll through now I can't bring the

00:53:02,170 --> 00:53:11,819
simulator of line but it would now work

00:53:04,839 --> 00:53:14,140
offline as well yeah

00:53:11,819 --> 00:53:16,349
sorry because of the a/c I can't see

00:53:14,140 --> 00:53:16,349
anyone

00:53:20,480 --> 00:53:24,510
user would get a pop-up saying would you

00:53:23,400 --> 00:53:33,059
like to install this on your home screen

00:53:24,510 --> 00:53:34,319
still there yes yes okay so for this

00:53:33,059 --> 00:53:35,970
part of the room if you didn't hear the

00:53:34,319 --> 00:53:37,890
question the question was on Android you

00:53:35,970 --> 00:53:39,089
get do you want to install this thing

00:53:37,890 --> 00:53:41,880
automatically

00:53:39,089 --> 00:53:43,859
is it possible on iOS and kind of how

00:53:41,880 --> 00:53:45,599
that works I suppose to an Android

00:53:43,859 --> 00:53:48,720
there's still a thing I have an Android

00:53:45,599 --> 00:53:50,309
test mobile with me which will use very

00:53:48,720 --> 00:53:54,720
shortly and then you will see how that

00:53:50,309 --> 00:53:57,960
works two points one is that you can

00:53:54,720 --> 00:53:59,640
have a custom installer there's an event

00:53:57,960 --> 00:54:03,809
that you can listen on which is I think

00:53:59,640 --> 00:54:05,660
some like beef before install or some

00:54:03,809 --> 00:54:09,450
something like that so you can actually

00:54:05,660 --> 00:54:11,460
replace the Mobile's native installation

00:54:09,450 --> 00:54:13,170
prompt with your own custom one and if

00:54:11,460 --> 00:54:16,890
you do that that works on iOS as well

00:54:13,170 --> 00:54:19,619
with some teeny-tiny modifications so

00:54:16,890 --> 00:54:21,900
you can on an iOS device there's no

00:54:19,619 --> 00:54:24,420
automatic way of doing this so iOS will

00:54:21,900 --> 00:54:27,210
not prompt you to install something but

00:54:24,420 --> 00:54:28,950
you can programmatically put out a

00:54:27,210 --> 00:54:31,079
prompt to your users or have a button

00:54:28,950 --> 00:54:34,130
that says install and then on that it

00:54:31,079 --> 00:54:34,130
will do this automatically

00:54:35,619 --> 00:54:42,859
okay we're next let's take a look at a

00:54:40,460 --> 00:54:44,180
verb box example and then we will take a

00:54:42,859 --> 00:54:46,670
look at some additional things and then

00:54:44,180 --> 00:54:48,920
we get to the big app that I I prepare

00:54:46,670 --> 00:54:52,280
for this workshop which is going to be

00:54:48,920 --> 00:54:53,480
tested for the first time so obviously

00:54:52,280 --> 00:54:59,890
because you come to a workshop without

00:54:53,480 --> 00:55:02,690
testing any of your applications so I

00:54:59,890 --> 00:55:08,170
think I open that home ready choose one

00:55:02,690 --> 00:55:08,170
sack so let me close all of these first

00:55:09,700 --> 00:55:12,630
this is

00:55:15,080 --> 00:55:17,710
No

00:55:19,050 --> 00:55:21,680
nope

00:55:35,549 --> 00:55:39,700
okay let's take a look at first it's a

00:55:37,779 --> 00:55:41,589
very simple word box example so at least

00:55:39,700 --> 00:55:42,849
you know what it is and how it works and

00:55:41,589 --> 00:55:46,539
I will show you a more complex example

00:55:42,849 --> 00:55:52,539
as well that would just probably make

00:55:46,539 --> 00:55:55,900
more sense so back to our familiar

00:55:52,539 --> 00:55:59,920
application that has a simple h1 element

00:55:55,900 --> 00:56:02,289
of serviceworker but if we take a look

00:55:59,920 --> 00:56:05,319
at the serviceworker itself actually

00:56:02,289 --> 00:56:08,519
this one you will see that it is a lot

00:56:05,319 --> 00:56:12,190
simpler so what's happening here the

00:56:08,519 --> 00:56:14,380
serviceworker API exposes this method or

00:56:12,190 --> 00:56:16,239
this function called import scripts that

00:56:14,380 --> 00:56:18,400
you see in line number one which allows

00:56:16,239 --> 00:56:20,769
you to import any other JavaScript file

00:56:18,400 --> 00:56:23,529
into your serviceworker whether that's

00:56:20,769 --> 00:56:25,959
local or whether that's out on a CDN you

00:56:23,529 --> 00:56:28,450
can just grab it so work box this is

00:56:25,959 --> 00:56:31,930
this is how you use work box now it has

00:56:28,450 --> 00:56:34,920
multiple sort of ways to function you

00:56:31,930 --> 00:56:36,160
can use it by a CLI to auto generate a

00:56:34,920 --> 00:56:39,190
serviceworker

00:56:36,160 --> 00:56:41,259
you can use it using your favorite

00:56:39,190 --> 00:56:45,219
module bundler so you can use it by a

00:56:41,259 --> 00:56:46,630
web pack gulp grunt etc but the point is

00:56:45,219 --> 00:56:48,219
that you know if you want to use it you

00:56:46,630 --> 00:56:49,809
have to somehow import it and this is

00:56:48,219 --> 00:56:52,930
how you do it in your serviceworker file

00:56:49,809 --> 00:56:54,699
you say import scripts and it's my bad

00:56:52,930 --> 00:56:56,410
they are now at version four point

00:56:54,699 --> 00:56:58,839
something so that's the kind of older

00:56:56,410 --> 00:57:02,920
version and if you import that file it

00:56:58,839 --> 00:57:05,410
exposes a verb box global so if that's

00:57:02,920 --> 00:57:08,229
available that means that work box is

00:57:05,410 --> 00:57:10,299
loaded and then notice what we have here

00:57:08,229 --> 00:57:13,959
work box dot pre-caching the pre cache

00:57:10,299 --> 00:57:16,329
and root so this is something where

00:57:13,959 --> 00:57:20,529
broke box is doing its magic so adding

00:57:16,329 --> 00:57:22,299
that line and then generating the

00:57:20,529 --> 00:57:23,890
serviceworker based on this I'm going to

00:57:22,299 --> 00:57:27,299
show that to you in just a second

00:57:23,890 --> 00:57:27,299
actually let me show that to you now

00:57:27,760 --> 00:57:34,700
this is the the service work of build

00:57:30,230 --> 00:57:36,140
script very simple take service worker

00:57:34,700 --> 00:57:40,010
dough depth OGS that's the fire that

00:57:36,140 --> 00:57:41,960
you've seen just now generate the

00:57:40,010 --> 00:57:44,210
service worker the GS file based on that

00:57:41,960 --> 00:57:46,480
and the most important thing I think is

00:57:44,210 --> 00:57:49,240
his global patterns so remember before

00:57:46,480 --> 00:57:52,010
we had the files array where we had

00:57:49,240 --> 00:57:55,550
index.html AB dot CSS AB dodgiest now if

00:57:52,010 --> 00:57:58,040
I would had 200 CSS files and JavaScript

00:57:55,550 --> 00:58:00,110
files I would have to help enter that

00:57:58,040 --> 00:58:03,320
manually because there's no way that you

00:58:00,110 --> 00:58:04,820
can have a regular expression using the

00:58:03,320 --> 00:58:08,660
cache API and the serviceworker api

00:58:04,820 --> 00:58:10,610
natively arrives word box to us that

00:58:08,660 --> 00:58:13,970
allows you to specify global patterns

00:58:10,610 --> 00:58:18,440
and say you know what star GS CSS HTML

00:58:13,970 --> 00:58:20,930
it's going to cache all of those ok so

00:58:18,440 --> 00:58:23,390
when you run this build script it will

00:58:20,930 --> 00:58:26,360
generate a serviceworker file and what I

00:58:23,390 --> 00:58:31,520
want you to notice is that I kind of

00:58:26,360 --> 00:58:33,950
modified this let me know build so this

00:58:31,520 --> 00:58:38,000
will hopefully regenerate this for us so

00:58:33,950 --> 00:58:40,220
it will close this ok serviceworker cool

00:58:38,000 --> 00:58:43,010
so what I want you to notice is that it

00:58:40,220 --> 00:58:45,680
basically expanded the pre cache and

00:58:43,010 --> 00:58:47,420
route array that we just put in there so

00:58:45,680 --> 00:58:51,140
what work box causes I think is like a

00:58:47,420 --> 00:58:53,420
placeholder and it added all the CSS and

00:58:51,140 --> 00:58:55,970
JavaScript and HTML files that it found

00:58:53,420 --> 00:58:59,600
in the project where we've that specify

00:58:55,970 --> 00:59:01,820
this using the build script it also

00:58:59,600 --> 00:59:03,530
added ones that shouldn't be there ok I

00:59:01,820 --> 00:59:04,910
should have excluded some there's no

00:59:03,530 --> 00:59:07,340
point to have the builder dress in there

00:59:04,910 --> 00:59:08,990
but ignore that for now and also notice

00:59:07,340 --> 00:59:11,860
there's a revision what do you think

00:59:08,990 --> 00:59:11,860
that revision is for

00:59:13,540 --> 00:59:18,190
why would you want to have the hash of

00:59:15,620 --> 00:59:18,190
the file in there

00:59:18,640 --> 00:59:23,540
exactly

00:59:19,790 --> 00:59:25,910
so using this approach workbooks will be

00:59:23,540 --> 00:59:27,920
able to automatically figure out which

00:59:25,910 --> 00:59:30,230
files to update in your cache and which

00:59:27,920 --> 00:59:32,000
not so it will take a look at the

00:59:30,230 --> 00:59:33,500
revision number and if I modify at the

00:59:32,000 --> 00:59:36,020
GS the revision is going to change

00:59:33,500 --> 00:59:37,940
therefore workbooks will know I need to

00:59:36,020 --> 00:59:41,150
remove that from the cache and add the

00:59:37,940 --> 00:59:43,010
new version all of this is done for you

00:59:41,150 --> 00:59:45,590
behind the scenes kind of automatically

00:59:43,010 --> 00:59:47,390
whereas if you would write this using

00:59:45,590 --> 00:59:50,810
the cache API and the serviceworker api

00:59:47,390 --> 00:59:53,150
we would be on a two day workshop just

00:59:50,810 --> 00:59:57,590
on that because it's very very complex

00:59:53,150 --> 00:59:59,600
ok and when you launch this app there's

00:59:57,590 --> 01:00:05,840
one more difference which may not have

00:59:59,600 --> 01:00:07,790
been that obvious before okay so the

01:00:05,840 --> 01:00:11,300
result is going to be the same and if

01:00:07,790 --> 01:00:13,190
you look at the cons oh and I'm actually

01:00:11,300 --> 01:00:14,720
a flute no I'm not of mine you look at

01:00:13,190 --> 01:00:18,410
the console there are some were books

01:00:14,720 --> 01:00:20,540
related messages in here these messages

01:00:18,410 --> 01:00:22,850
only appear when you are working on

01:00:20,540 --> 01:00:25,550
localhost so whenever you publish your

01:00:22,850 --> 01:00:28,190
PWA and it uses workbooks it will not do

01:00:25,550 --> 01:00:32,030
logging ok so it's it intently knows

01:00:28,190 --> 01:00:33,410
whether it's on the coast or not it's

01:00:32,030 --> 01:00:36,860
responding to things it shouldn't

01:00:33,410 --> 01:00:39,830
respond to anything but as I said you

01:00:36,860 --> 01:00:41,300
know reset the thingy so when the first

01:00:39,830 --> 01:00:43,690
time when you load it is just going to

01:00:41,300 --> 01:00:43,690
say

01:00:45,660 --> 01:00:49,400
it's going to say nothing

01:00:51,430 --> 01:00:54,150
okay

01:00:54,250 --> 01:00:57,550
what did I do

01:00:58,310 --> 01:01:03,960
clear I'm I'm online maybe do it maybe

01:01:03,090 --> 01:01:07,380
do it this way

01:01:03,960 --> 01:01:10,350
oh we're box is loaded okay so it

01:01:07,380 --> 01:01:12,600
Prakash is five files now this is an

01:01:10,350 --> 01:01:15,360
important difference between what we've

01:01:12,600 --> 01:01:18,390
seen before and how we're box works and

01:01:15,360 --> 01:01:22,020
the key to understanding this is in this

01:01:18,390 --> 01:01:25,110
term pre-cached so think about this you

01:01:22,020 --> 01:01:26,850
have a website you load it for the first

01:01:25,110 --> 01:01:30,480
time yet the service worker is going to

01:01:26,850 --> 01:01:32,100
be installed activated and ready the

01:01:30,480 --> 01:01:34,170
next time you refresh that website

01:01:32,100 --> 01:01:36,330
that's when the service worker is going

01:01:34,170 --> 01:01:39,120
to do its job for the first time right

01:01:36,330 --> 01:01:42,080
because at the initial load is just

01:01:39,120 --> 01:01:45,180
activated itself it wasn't there right

01:01:42,080 --> 01:01:48,000
workbooks can do pre-caching so even on

01:01:45,180 --> 01:01:49,650
the first load it can not only activate

01:01:48,000 --> 01:01:51,720
the service worker but at the same time

01:01:49,650 --> 01:01:53,700
also put things into the cache which

01:01:51,720 --> 01:01:56,490
means it eliminates that extra sort of

01:01:53,700 --> 01:01:58,260
refresh need for the application okay

01:01:56,490 --> 01:02:04,530
this is what the term precache refers to

01:01:58,260 --> 01:02:07,470
so now if I go offline everything works

01:02:04,530 --> 01:02:10,080
okay so all I needed to do was add one

01:02:07,470 --> 01:02:11,370
single line of code run that build

01:02:10,080 --> 01:02:14,700
script and everything has been taken

01:02:11,370 --> 01:02:16,860
care of me in a much more I think easier

01:02:14,700 --> 01:02:19,020
way than having to type all of the same

01:02:16,860 --> 01:02:21,270
ok and now I get all this version or

01:02:19,020 --> 01:02:24,660
revision control as well out of the box

01:02:21,270 --> 01:02:27,720
so this is one thing that where books

01:02:24,660 --> 01:02:32,330
can do but let's take this to the next

01:02:27,720 --> 01:02:32,330
level because what can go I close this

01:02:33,920 --> 01:02:37,670
because it can do a lot more

01:02:42,590 --> 01:02:50,650
the workbooks plug-in example

01:02:48,390 --> 01:02:53,290
and normally people ask me this question

01:02:50,650 --> 01:02:56,860
and and that's a very legit question as

01:02:53,290 --> 01:02:58,900
well because so far what we've done was

01:02:56,860 --> 01:03:01,840
taken a look at websites that were kind

01:02:58,900 --> 01:03:03,970
of they only had tax try there was

01:03:01,840 --> 01:03:07,300
nothing visual about them and and

01:03:03,970 --> 01:03:08,920
usually what people ask is that's really

01:03:07,300 --> 01:03:12,490
nice what you're doing there but can you

01:03:08,920 --> 01:03:15,220
cash images okay so here's the answer

01:03:12,490 --> 01:03:20,710
our updated news website a lot more

01:03:15,220 --> 01:03:23,650
visual and a lot more visual that's just

01:03:20,710 --> 01:03:25,240
a quick visual I designed this as well

01:03:23,650 --> 01:03:29,170
so maybe this looks better than the

01:03:25,240 --> 01:03:30,610
other one I take all the credit and I've

01:03:29,170 --> 01:03:36,280
wrote all the text so just ignore that

01:03:30,610 --> 01:03:37,960
completely it's completely fake news so

01:03:36,280 --> 01:03:42,430
what are we doing here okay so this

01:03:37,960 --> 01:03:45,460
example uses again an API slash API

01:03:42,430 --> 01:03:48,520
slash news so it caches the API it

01:03:45,460 --> 01:03:50,650
caches the static assets and it caches

01:03:48,520 --> 01:03:52,620
the images as well so let's take a look

01:03:50,650 --> 01:03:55,330
at the serviceworker code for this and

01:03:52,620 --> 01:03:56,890
especially remember how the

01:03:55,330 --> 01:03:59,080
serviceworker code I think I

01:03:56,890 --> 01:04:03,400
deliberately didn't close it remember

01:03:59,080 --> 01:04:05,290
all of this to get the API news put it

01:04:03,400 --> 01:04:07,900
into the cache updated that under the

01:04:05,290 --> 01:04:12,190
data right this was the first news page

01:04:07,900 --> 01:04:16,420
example okay just look at the keep on

01:04:12,190 --> 01:04:17,800
looking at this okay ugly confusing you

01:04:16,420 --> 01:04:18,700
have no idea even I don't know what's

01:04:17,800 --> 01:04:20,280
going on there I wouldn't be able to

01:04:18,700 --> 01:04:22,810
write this again okay

01:04:20,280 --> 01:04:29,280
not without Stack Overflow and Google

01:04:22,810 --> 01:04:29,280
anyway and now compare this with

01:04:30,839 --> 01:04:38,809
where is my serviceworker file not this

01:04:41,580 --> 01:04:46,910
I opened the wrong thing sorry

01:04:49,040 --> 01:04:52,329
got the books

01:04:57,220 --> 01:05:04,089
I meant to open this one although they

01:05:01,780 --> 01:05:06,630
work in the same way so Service Worker

01:05:04,089 --> 01:05:06,630
file

01:05:13,480 --> 01:05:21,040
that's it okay word box routing register

01:05:19,150 --> 01:05:23,890
route you specify a route that you want

01:05:21,040 --> 01:05:26,500
to register it accepts regular

01:05:23,890 --> 01:05:28,359
expressions whatever you want so here I

01:05:26,500 --> 01:05:30,990
just say whenever you say slash API

01:05:28,359 --> 01:05:32,890
slash News work box dot strategies

01:05:30,990 --> 01:05:35,260
remember the slides remember the

01:05:32,890 --> 01:05:37,599
strategies that we talked about stale by

01:05:35,260 --> 01:05:41,380
revalidate cache first network first is

01:05:37,599 --> 01:05:44,230
a etc those were also methods that were

01:05:41,380 --> 01:05:47,200
box exposes for you out of the box okay

01:05:44,230 --> 01:05:48,700
so stale by revalidate and you pass in

01:05:47,200 --> 01:05:50,260
options like the name of the cache

01:05:48,700 --> 01:05:52,300
that's all what you need to do and this

01:05:50,260 --> 01:05:54,339
is now automatically going to cache the

01:05:52,300 --> 01:05:55,990
response from the API it's going to go

01:05:54,339 --> 01:05:57,369
out to the network and if it sees

01:05:55,990 --> 01:05:59,440
there's a difference between what is

01:05:57,369 --> 01:06:01,240
stored locally and what's remote it's

01:05:59,440 --> 01:06:03,310
going to update the cache this is what

01:06:01,240 --> 01:06:09,700
still while we validate does okay

01:06:03,310 --> 01:06:11,770
does this look more simple a bit okay so

01:06:09,700 --> 01:06:15,700
this is what I said before that using

01:06:11,770 --> 01:06:17,859
workbooks has been a really really good

01:06:15,700 --> 01:06:19,480
thing in my life because it's just so

01:06:17,859 --> 01:06:22,569
easy to use okay

01:06:19,480 --> 01:06:25,780
and it does a lot more we're going to

01:06:22,569 --> 01:06:28,230
get to this but before we take a look at

01:06:25,780 --> 01:06:30,670
that and I will do a demo for you

01:06:28,230 --> 01:06:32,859
so I mentioned I work at a company

01:06:30,670 --> 01:06:34,750
called cloud Neri anyone heard about

01:06:32,859 --> 01:06:39,069
cloud in it before you're my man and

01:06:34,750 --> 01:06:40,690
you're my man and you're my man you all

01:06:39,069 --> 01:06:46,329
be able in my men and women of course

01:06:40,690 --> 01:06:49,540
all right very shortly so what does

01:06:46,329 --> 01:06:53,230
cloud and we do in a nutshell we are a

01:06:49,540 --> 01:06:55,480
cloud-based media management company so

01:06:53,230 --> 01:06:58,839
you take your media assets those being

01:06:55,480 --> 01:07:01,060
images videos and and some other things

01:06:58,839 --> 01:07:03,069
you upload it to us and then we serve it

01:07:01,060 --> 01:07:07,900
back to you now at this point you're

01:07:03,069 --> 01:07:11,680
thinking the Dropbox fine but what we do

01:07:07,900 --> 01:07:14,109
on top of that is image transformation

01:07:11,680 --> 01:07:15,579
image optimization the same for videos

01:07:14,109 --> 01:07:19,359
and I'm going to give you a very quick

01:07:15,579 --> 01:07:22,390
demo of this and this is also going to

01:07:19,359 --> 01:07:24,550
lead me to using the network information

01:07:22,390 --> 01:07:25,329
API and doing that adaptive image

01:07:24,550 --> 01:07:32,609
loading thing that

01:07:25,329 --> 01:07:32,609
talked about so starting from here

01:07:34,760 --> 01:07:40,260
this is a stock image that we have so

01:07:37,920 --> 01:07:42,000
what happens you take an image you have

01:07:40,260 --> 01:07:44,820
an image somewhere on your computer you

01:07:42,000 --> 01:07:48,420
upload it to cloud Neri and then you get

01:07:44,820 --> 01:07:51,870
an access URL which looks like this okay

01:07:48,420 --> 01:07:54,000
so something that cloud income name of

01:07:51,870 --> 01:07:56,040
your account slash image slash upload

01:07:54,000 --> 01:07:58,080
and what's missing is of course the name

01:07:56,040 --> 01:08:02,070
of the file human dot JPEG okay so this

01:07:58,080 --> 01:08:04,200
is a raw image this is the image that

01:08:02,070 --> 01:08:05,900
was on your computer or somewhere and

01:08:04,200 --> 01:08:10,170
you uploaded it it hasn't been modified

01:08:05,900 --> 01:08:14,760
in any way if you look at the network

01:08:10,170 --> 01:08:19,590
tab if i refresh this then we should see

01:08:14,760 --> 01:08:20,100
this so this is a JPEG image where did

01:08:19,590 --> 01:08:24,270
it go

01:08:20,100 --> 01:08:29,490
which is 570 kilobytes in size okay I

01:08:24,270 --> 01:08:35,190
want you to remember 570 oh with me

01:08:29,490 --> 01:08:36,840
what's the number 570 perfect so what

01:08:35,190 --> 01:08:41,490
I'm going to do so what cloud and you

01:08:36,840 --> 01:08:44,160
allows you to do is we have a bazillion

01:08:41,490 --> 01:08:47,370
api's from angular to react to know -

01:08:44,160 --> 01:08:49,890
Ruby - pH careful with the extension

01:08:47,370 --> 01:08:51,780
table which you can use but we also

01:08:49,890 --> 01:08:53,580
allow you to just directly manipulate

01:08:51,780 --> 01:08:55,590
the URL the access you are out the image

01:08:53,580 --> 01:08:58,970
and then based on that things are going

01:08:55,590 --> 01:09:02,490
to happen so I'm going to add the few

01:08:58,970 --> 01:09:04,560
the first one is Q underscore Auto what

01:09:02,490 --> 01:09:08,609
do you think Q underscore alter is what

01:09:04,560 --> 01:09:11,710
is what is the Q in their quality

01:09:08,609 --> 01:09:14,560
exactly so

01:09:11,710 --> 01:09:17,830
excuse me so what Kyoto is going to do

01:09:14,560 --> 01:09:22,060
is going to reduce the quality of this

01:09:17,830 --> 01:09:24,700
image in a way that is not going to be

01:09:22,060 --> 01:09:27,610
visible to the human eye okay so what I

01:09:24,700 --> 01:09:31,750
want you to do is look closely to this

01:09:27,610 --> 01:09:32,350
image and what's the magic number 570

01:09:31,750 --> 01:09:34,390
exactly

01:09:32,350 --> 01:09:37,120
it's good that you're listening so I'm

01:09:34,390 --> 01:09:39,940
going to hit enter and that's going to

01:09:37,120 --> 01:09:42,400
go to our service and get a newly

01:09:39,940 --> 01:09:45,580
generated image what I want you to see

01:09:42,400 --> 01:09:48,730
or very focused on is whether you see a

01:09:45,580 --> 01:09:51,880
visual difference in the newly loaded

01:09:48,730 --> 01:09:56,910
image okay it's a very big screen so you

01:09:51,880 --> 01:09:56,910
tell me okay it's done

01:09:57,219 --> 01:10:00,639
is it the same

01:10:01,010 --> 01:10:10,620
is it blurred seriously never ever has

01:10:07,230 --> 01:10:12,990
said that before but okay let me zoom

01:10:10,620 --> 01:10:17,820
back because that does date that's the

01:10:12,990 --> 01:10:22,470
normal resolution okay so do you notice

01:10:17,820 --> 01:10:28,260
something very interesting so what was a

01:10:22,470 --> 01:10:30,570
number what is the number now okay so we

01:10:28,260 --> 01:10:34,170
already saved a lot right so 49

01:10:30,570 --> 01:10:36,420
kilobytes without except for you we now

01:10:34,170 --> 01:10:37,770
visually modifying the image but but

01:10:36,420 --> 01:10:40,020
serious if you take if you take a look

01:10:37,770 --> 01:10:41,940
at it it's really not that visible it's

01:10:40,020 --> 01:10:46,620
not that it's really pixelated it's

01:10:41,940 --> 01:10:52,650
barely visible but the difference in the

01:10:46,620 --> 01:10:55,800
size is really significant okay so we

01:10:52,650 --> 01:10:59,030
can do a lot better than this who here

01:10:55,800 --> 01:11:03,510
has heard about the format of web pee

01:10:59,030 --> 01:11:07,140
few of you so basically web P is an

01:11:03,510 --> 01:11:08,850
image format that Google has came up

01:11:07,140 --> 01:11:11,760
with I don't know how many years ago

01:11:08,850 --> 01:11:13,590
which basically says they they found a

01:11:11,760 --> 01:11:17,940
better algorithm to to compress images

01:11:13,590 --> 01:11:19,710
and Chrome and I think maybe Firefox

01:11:17,940 --> 01:11:24,840
supports that but no other browsers

01:11:19,710 --> 01:11:27,630
supported JPEG XR is another image

01:11:24,840 --> 01:11:30,900
format that Microsoft has come up with

01:11:27,630 --> 01:11:34,470
which is a better compression algorithm

01:11:30,900 --> 01:11:36,330
than JPEG and they expect ie browsers to

01:11:34,470 --> 01:11:39,120
receive this format so therefore now if

01:11:36,330 --> 01:11:40,500
you want to serve the right image format

01:11:39,120 --> 01:11:44,010
for the right browser you need to have a

01:11:40,500 --> 01:11:47,600
jpg JPEG XR a web be and God knows how

01:11:44,010 --> 01:11:50,190
many others right which is button and

01:11:47,600 --> 01:11:54,170
JPEG 2000 for Safari exactly right so

01:11:50,190 --> 01:11:54,170
it's like all very confusing now

01:11:54,200 --> 01:12:02,130
let's add F underscore author what do

01:11:57,420 --> 01:12:05,760
you think f is for format so F Auto

01:12:02,130 --> 01:12:08,010
format we made that request so what I

01:12:05,760 --> 01:12:11,790
want you to take a look at now is when I

01:12:08,010 --> 01:12:14,730
open this header is that even though so

01:12:11,790 --> 01:12:18,420
if you look here it's a JPEG image but

01:12:14,730 --> 01:12:21,750
Cloudera knows that I'm using Chrome and

01:12:18,420 --> 01:12:24,660
it knows that web P is the best

01:12:21,750 --> 01:12:29,040
compression algorithm for Chrome so it

01:12:24,660 --> 01:12:33,180
sends a web P file back ok remember the

01:12:29,040 --> 01:12:33,510
magic number 570 let's update that magic

01:12:33,180 --> 01:12:36,810
number

01:12:33,510 --> 01:12:37,500
what was it 49 so 49 is our new magic

01:12:36,810 --> 01:12:42,030
number okay

01:12:37,500 --> 01:12:45,390
so web P 32 okay so 32 is our new magic

01:12:42,030 --> 01:12:48,840
number so you think oh no way is going

01:12:45,390 --> 01:12:52,350
to reduce that mm hm think again so

01:12:48,840 --> 01:12:55,350
normally when you see this image you

01:12:52,350 --> 01:12:58,550
would want to upload it probably like a

01:12:55,350 --> 01:13:02,400
profile image kind of thing right so

01:12:58,550 --> 01:13:04,200
this is now what thousand by its here

01:13:02,400 --> 01:13:07,070
thousand by six hundred and eighty eight

01:13:04,200 --> 01:13:12,810
pixels in size that's way too big so

01:13:07,070 --> 01:13:15,240
let's say with 250 and height 250 this

01:13:12,810 --> 01:13:18,450
is now going to generate 250 by 250

01:13:15,240 --> 01:13:22,680
image size went down to new magic number

01:13:18,450 --> 01:13:28,770
six kilobytes but it's not the prettiest

01:13:22,680 --> 01:13:30,690
image right very not we can fix that so

01:13:28,770 --> 01:13:34,470
let's say that we want it to really

01:13:30,690 --> 01:13:37,020
create a thumbnail so we say crop this

01:13:34,470 --> 01:13:39,150
as a thumbnail and I'm going to add this

01:13:37,020 --> 01:13:42,600
G underscore face which is short for

01:13:39,150 --> 01:13:46,050
gravity face so we're telling our system

01:13:42,600 --> 01:13:50,730
find the face on this image and put that

01:13:46,050 --> 01:13:53,520
into the center and voila okay this is

01:13:50,730 --> 01:13:58,380
what we got and just for good measure

01:13:53,520 --> 01:14:01,010
let's add our underscore max for maximum

01:13:58,380 --> 01:14:04,200
radius and now we have our profile image

01:14:01,010 --> 01:14:05,670
7.18 kilobytes the rounding obviously

01:14:04,200 --> 01:14:06,840
increases the size a bit but we went

01:14:05,670 --> 01:14:10,650
from 507

01:14:06,840 --> 01:14:15,929
- what did I say eight kilobytes which

01:14:10,650 --> 01:14:18,630
is very big savings right there also the

01:14:15,929 --> 01:14:22,290
point of this is sometimes I see

01:14:18,630 --> 01:14:24,659
developers taking an image and applying

01:14:22,290 --> 01:14:25,199
css3 to reduce the size and do all sorts

01:14:24,659 --> 01:14:27,750
of things

01:14:25,199 --> 01:14:28,980
that's bad practice why is it bad

01:14:27,750 --> 01:14:31,739
practice because you're still

01:14:28,980 --> 01:14:33,929
downloading the thousand by 688 pixel

01:14:31,739 --> 01:14:37,199
image which is 570 kilobytes which is

01:14:33,929 --> 01:14:41,280
not that bad in you know theoretically

01:14:37,199 --> 01:14:43,469
but imagine times 20 okay so you have

01:14:41,280 --> 01:14:45,869
the same images same size 20 times

01:14:43,469 --> 01:14:47,909
that's a lot whereas if you just do cool

01:14:45,869 --> 01:14:49,800
two and a photo you reduce the size by I

01:14:47,909 --> 01:14:51,690
don't know how many percent therefore

01:14:49,800 --> 01:14:56,239
maybe downloading the 20 images

01:14:51,690 --> 01:14:56,239
altogether is going to be 570 kilobytes

01:14:56,540 --> 01:15:01,020
maybe if there's time I'm going to show

01:14:58,619 --> 01:15:03,150
you some additional things what we do

01:15:01,020 --> 01:15:04,889
with videos is definitely let me

01:15:03,150 --> 01:15:06,300
actually show you one video example

01:15:04,889 --> 01:15:08,960
before I forget because yesterday I

01:15:06,300 --> 01:15:08,960
forgot that

01:15:13,190 --> 01:15:20,090
question is where did I put the video

01:15:17,090 --> 01:15:20,090
mp4

01:15:20,190 --> 01:15:27,150
I think is this one so imagine that you

01:15:24,330 --> 01:15:29,900
have a sport a website this hopefully

01:15:27,150 --> 01:15:29,900
isn't going to be that loud

01:15:31,839 --> 01:15:37,680
okay

01:15:34,280 --> 01:15:39,510
so let's say you have a website that is

01:15:37,680 --> 01:15:41,520
about sports and you know you want to

01:15:39,510 --> 01:15:44,490
show a video obviously you know in a

01:15:41,520 --> 01:15:46,890
reduced size inside that article now

01:15:44,490 --> 01:15:48,540
this is this is an HD video and as you

01:15:46,890 --> 01:15:50,040
can tell from the wonderful Wi-Fi

01:15:48,540 --> 01:15:52,430
connection here it's not even loading

01:15:50,040 --> 01:15:55,170
properly it's about ten seconds inside

01:15:52,430 --> 01:15:59,010
and I don't know how many kilobytes or

01:15:55,170 --> 01:16:03,630
even megabytes large the point is is

01:15:59,010 --> 01:16:05,670
that and that this is related to some

01:16:03,630 --> 01:16:08,190
what - web performance and some what to

01:16:05,670 --> 01:16:10,860
progressive web apps as well the thing

01:16:08,190 --> 01:16:13,020
that you need to remember with regards

01:16:10,860 --> 01:16:15,870
to progressive web apps and web

01:16:13,020 --> 01:16:17,970
performance is the fact that as I said I

01:16:15,870 --> 01:16:19,830
think on the very first slide that this

01:16:17,970 --> 01:16:22,710
web app should be made available for

01:16:19,830 --> 01:16:24,330
everyone regardless on what connection

01:16:22,710 --> 01:16:27,390
they have and what device they are using

01:16:24,330 --> 01:16:30,150
therefore on an older device I think

01:16:27,390 --> 01:16:31,740
Google now has this Motorola something

01:16:30,150 --> 01:16:34,140
as their test device which is a very old

01:16:31,740 --> 01:16:36,840
device and if you want to have a really

01:16:34,140 --> 01:16:39,030
good PWA you should be able to run it on

01:16:36,840 --> 01:16:41,340
that side with all on that device

01:16:39,030 --> 01:16:42,750
without a problem now there are two

01:16:41,340 --> 01:16:44,820
things that you need to remember first

01:16:42,750 --> 01:16:47,040
of all some of your users who use your

01:16:44,820 --> 01:16:49,290
site or your web app or your progressive

01:16:47,040 --> 01:16:52,410
web app may have some very old devices

01:16:49,290 --> 01:16:54,480
you should still give them a relatively

01:16:52,410 --> 01:16:55,770
good experience in using your site

01:16:54,480 --> 01:16:57,450
because otherwise they were just you

01:16:55,770 --> 01:17:00,900
know and leave and never come back

01:16:57,450 --> 01:17:04,350
second thing is that not everyone has

01:17:00,900 --> 01:17:08,460
access to you you know 4G and 5g and

01:17:04,350 --> 01:17:10,040
very super fast Wi-Fi networks and that

01:17:08,460 --> 01:17:13,110
leads me to two things first of all

01:17:10,040 --> 01:17:15,900
expecting someone to load this video

01:17:13,110 --> 01:17:17,510
unlike a 2g connection it's never going

01:17:15,900 --> 01:17:20,400
to finish right it's never going to load

01:17:17,510 --> 01:17:23,640
second of all also if they have a 2g

01:17:20,400 --> 01:17:26,040
connection that may mean that the data

01:17:23,640 --> 01:17:27,960
plan is not endless they may have

01:17:26,040 --> 01:17:30,600
hundred megabytes per minute just

01:17:27,960 --> 01:17:32,310
downloading this 50% of it is gone in

01:17:30,600 --> 01:17:35,280
like what ten seconds right you don't

01:17:32,310 --> 01:17:38,610
want to do that to your users so one

01:17:35,280 --> 01:17:41,280
idea is so this is our videos one idea

01:17:38,610 --> 01:17:43,830
is to instead generate an image for them

01:17:41,280 --> 01:17:47,700
now in cloud anair all you need to do is

01:17:43,830 --> 01:17:49,950
stay that mp4 and just type in jpg

01:17:47,700 --> 01:17:51,720
now you have a steel image which is in

01:17:49,950 --> 01:17:54,420
the this is the middle frame from the

01:17:51,720 --> 01:17:56,520
video you apply a photo Kyoto to this

01:17:54,420 --> 01:17:59,610
and now you have still given a visual

01:17:56,520 --> 01:18:01,920
experience to users but they're going to

01:17:59,610 --> 01:18:04,170
download two or three kilobytes worth of

01:18:01,920 --> 01:18:06,510
of an image right so this is again just

01:18:04,170 --> 01:18:09,420
making sure and remembering the

01:18:06,510 --> 01:18:11,550
experience for your users okay so they

01:18:09,420 --> 01:18:13,590
should be able to have still a visually

01:18:11,550 --> 01:18:15,450
experience regardless of what connection

01:18:13,590 --> 01:18:18,830
they use where they are and what mobile

01:18:15,450 --> 01:18:22,140
device they use okay

01:18:18,830 --> 01:18:23,760
do you wanna have a break because I

01:18:22,140 --> 01:18:26,100
realize I've been speaking a lot for

01:18:23,760 --> 01:18:26,990
like an hour and a half now so let's

01:18:26,100 --> 01:18:31,680
take a quick break

01:18:26,990 --> 01:18:34,260
mmm 10 minutes work so everyone so

01:18:31,680 --> 01:18:39,270
that's ten minutes pass half so that's

01:18:34,260 --> 01:18:43,190
what 340 the 240 we're going to resume

01:18:39,270 --> 01:18:43,190
with discussing this app

01:18:46,769 --> 01:18:51,039
really

01:18:47,920 --> 01:18:52,749
yeah man I'm sorry I stand corrected

01:18:51,039 --> 01:18:55,780
because the last time when I tried it

01:18:52,749 --> 01:18:57,880
was like down lisore it probably has

01:18:55,780 --> 01:19:00,820
many difficult problems but everybody's

01:18:57,880 --> 01:19:02,650
a funny little guys Steve the dinosaur

01:19:00,820 --> 01:19:05,559
thank you

01:19:02,650 --> 01:19:08,590
I've seen the screen so many times at

01:19:05,559 --> 01:19:10,570
the 404 speed yeah yeah I never realized

01:19:08,590 --> 01:19:12,639
there was a game hidden beneath it it

01:19:10,570 --> 01:19:15,880
was the first time you've seen it okay

01:19:12,639 --> 01:19:20,860
storage and the data so what this does

01:19:15,880 --> 01:19:22,389
it says cache images from in this case

01:19:20,860 --> 01:19:23,469
from cloud nary but it could be local

01:19:22,389 --> 01:19:26,559
doesn't matter

01:19:23,469 --> 01:19:29,110
so cache images but only add 50 images

01:19:26,559 --> 01:19:31,630
to the cache no more purge on quota

01:19:29,110 --> 01:19:33,820
error true means that if you go above 50

01:19:31,630 --> 01:19:35,769
then delete the oldest one so you get

01:19:33,820 --> 01:19:38,289
this nice rotation so you will never go

01:19:35,769 --> 01:19:41,019
above 50 image assets inside your cache

01:19:38,289 --> 01:19:43,900
okay you can set this number to 10 25

01:19:41,019 --> 01:19:46,269
100 remembering you know the sizes of

01:19:43,900 --> 01:19:48,789
your images and the storage that you

01:19:46,269 --> 01:19:53,889
have available but I think 50 seems to

01:19:48,789 --> 01:19:56,190
be like a good starting point so does

01:19:53,889 --> 01:19:59,050
this make sense so far you understand

01:19:56,190 --> 01:20:01,300
once you understand how work box works

01:19:59,050 --> 01:20:04,949
at the moment right how easy it is to

01:20:01,300 --> 01:20:04,949
use okay that's good yeah

01:20:08,010 --> 01:20:19,050
is taking into account the errors one I

01:20:16,409 --> 01:20:22,499
think the because we set this to true

01:20:19,050 --> 01:20:23,999
yes I think I would need to look it up

01:20:22,499 --> 01:20:30,840
in the dogs but I think I read it once

01:20:23,999 --> 01:20:34,650
that says if you magic sorry if you run

01:20:30,840 --> 01:20:36,869
out of space I think if we just start

01:20:34,650 --> 01:20:41,309
deleting it I think it's this option

01:20:36,869 --> 01:20:43,369
that sets it okay so line 52 cloud aneri

01:20:41,309 --> 01:20:48,469
plug-in what does that do so as I said

01:20:43,369 --> 01:20:51,690
workbooks is not only good for creating

01:20:48,469 --> 01:20:53,459
or for sort of abstracting away the

01:20:51,690 --> 01:20:56,909
complexity of the Service Worker API

01:20:53,459 --> 01:21:00,119
code but it also allows us to sort of

01:20:56,909 --> 01:21:06,300
extend or add our custom logic to it via

01:21:00,119 --> 01:21:08,699
plugins so cloud inori plug-in add so I

01:21:06,300 --> 01:21:11,519
think in this example it's sort of

01:21:08,699 --> 01:21:14,099
hard-coded in here but anyone can write

01:21:11,519 --> 01:21:16,440
a plug-in so I created this plug-in I've

01:21:14,099 --> 01:21:18,239
released it and then Google has added

01:21:16,440 --> 01:21:19,860
that to their work box documentation

01:21:18,239 --> 01:21:22,619
it's all very nice and it's there and

01:21:19,860 --> 01:21:24,809
I'm super happy about it so you can

01:21:22,619 --> 01:21:26,489
write any sort of extension and you can

01:21:24,809 --> 01:21:30,059
submit that to Google and if it's good

01:21:26,489 --> 01:21:31,949
enough they will consider it adding to

01:21:30,059 --> 01:21:34,320
the word box tree as Docs and they will

01:21:31,949 --> 01:21:37,679
write all sorts of nice things about you

01:21:34,320 --> 01:21:38,999
and the plug-in so what does this

01:21:37,679 --> 01:21:42,239
plug-in do so remember we talked about

01:21:38,999 --> 01:21:46,739
the network information API so network

01:21:42,239 --> 01:21:50,369
information API is available under this

01:21:46,739 --> 01:21:51,869
navigator so we say if navigate is not

01:21:50,369 --> 01:21:54,479
an if but we say if the navigator that

01:21:51,869 --> 01:21:57,389
connection is available so the network

01:21:54,479 --> 01:22:00,090
information is available then get this

01:21:57,389 --> 01:22:01,499
thing called the effective type okay so

01:22:00,090 --> 01:22:04,349
this is what I mentioned that this

01:22:01,499 --> 01:22:07,920
network information API allows us to

01:22:04,349 --> 01:22:10,400
capture the connection speed of the user

01:22:07,920 --> 01:22:16,349
and as I said it returns a string value

01:22:10,400 --> 01:22:18,269
4g 3g 2g or slow - 2g also remember what

01:22:16,349 --> 01:22:21,070
I said about the serviceworker that acts

01:22:18,269 --> 01:22:24,429
as a proxy that sits between

01:22:21,070 --> 01:22:27,670
the inside your browser and the network

01:22:24,429 --> 01:22:30,489
and it's able to intercept your request

01:22:27,670 --> 01:22:34,270
response cycle so the combination of

01:22:30,489 --> 01:22:36,849
this knowledge allows us to do this

01:22:34,270 --> 01:22:40,900
thing here we basically look for JPEG

01:22:36,849 --> 01:22:43,900
PNG and other type of extensions we

01:22:40,900 --> 01:22:46,060
break up that particular URL then we

01:22:43,900 --> 01:22:48,130
check whether the navigation or the

01:22:46,060 --> 01:22:50,349
network information API is available in

01:22:48,130 --> 01:22:53,320
the browser for the user then we check

01:22:50,349 --> 01:22:56,290
for the connection and we say if they

01:22:53,320 --> 01:22:58,599
are on a 4G connection then use qo2 what

01:22:56,290 --> 01:23:01,090
I didn't say before is that you can pass

01:22:58,599 --> 01:23:03,699
in flag so that it remember Kyoto that's

01:23:01,090 --> 01:23:06,460
the automatic quality so good echo and

01:23:03,699 --> 01:23:09,190
lo each of these is going to reduce the

01:23:06,460 --> 01:23:11,980
quality in a more aggressive fashion so

01:23:09,190 --> 01:23:14,889
pure Auto good I think that's a default

01:23:11,980 --> 01:23:16,719
one so that's that is going to modify

01:23:14,889 --> 01:23:19,030
the quality in a way that is not going

01:23:16,719 --> 01:23:21,639
to be that visible for you echo is going

01:23:19,030 --> 01:23:24,070
to apply a more aggressive compression

01:23:21,639 --> 01:23:26,530
algorithm and lo is going to that's

01:23:24,070 --> 01:23:28,840
where you will kind of start to see some

01:23:26,530 --> 01:23:32,800
pixelation going on okay but the result

01:23:28,840 --> 01:23:34,900
is that you get a smaller image the

01:23:32,800 --> 01:23:40,570
lower or the slower the connection is

01:23:34,900 --> 01:23:43,090
okay and then we then we construct the

01:23:40,570 --> 01:23:46,810
URL you know joins and whatever and the

01:23:43,090 --> 01:23:50,199
key happens in line 41 right here

01:23:46,810 --> 01:23:52,750
so what we do we basically go to URL

01:23:50,199 --> 01:23:54,940
check the network information API check

01:23:52,750 --> 01:23:58,119
the connection of the user and then we

01:23:54,940 --> 01:24:01,360
reconstruct the URL and send it back as

01:23:58,119 --> 01:24:03,219
a new request right this is this should

01:24:01,360 --> 01:24:05,940
be like the lightbulb moment of the

01:24:03,219 --> 01:24:08,920
service worker being able to request

01:24:05,940 --> 01:24:12,429
intercept the request do something with

01:24:08,920 --> 01:24:15,250
it and send a modified request out to

01:24:12,429 --> 01:24:19,329
the Internet's big Internet's right so

01:24:15,250 --> 01:24:23,560
new URL will now contain either Kyoto

01:24:19,329 --> 01:24:24,579
good low or I follow my work at the

01:24:23,560 --> 01:24:27,880
compare I don't know why I'm talking

01:24:24,579 --> 01:24:30,429
about so one of the Kyoto versions and

01:24:27,880 --> 01:24:32,020
it's going to send that and pass in you

01:24:30,429 --> 01:24:33,340
know just the original headers that came

01:24:32,020 --> 01:24:34,570
in the request so the only thing that we

01:24:33,340 --> 01:24:38,590
modify is the URL

01:24:34,570 --> 01:24:40,770
so what this allows us to do is the

01:24:38,590 --> 01:24:40,770
following

01:24:43,000 --> 01:24:51,310
let's close this now so let's take a

01:24:46,840 --> 01:24:52,900
look at this image here now let me reset

01:24:51,310 --> 01:24:58,180
everything that's the that's the best

01:24:52,900 --> 01:25:03,340
thing to do at this point clear go back

01:24:58,180 --> 01:25:08,410
to online network refresh so when this

01:25:03,340 --> 01:25:14,350
image loads where is it

01:25:08,410 --> 01:25:16,630
okay eighty come on Jake oh come back

01:25:14,350 --> 01:25:22,900
eighty four kilobytes okay so that is

01:25:16,630 --> 01:25:25,270
the sort of original size of our image

01:25:22,900 --> 01:25:26,469
and if you look at the URL it just I

01:25:25,270 --> 01:25:28,510
don't know how much you can read that

01:25:26,469 --> 01:25:31,060
but it there's nothing in the UHS image

01:25:28,510 --> 01:25:33,760
upload PWA and then the name of the file

01:25:31,060 --> 01:25:35,830
that's it okay so let's now go and do

01:25:33,760 --> 01:25:38,620
throttling so how do i do throttling

01:25:35,830 --> 01:25:40,120
under the network tab next to the

01:25:38,620 --> 01:25:41,830
offline checkbox you can also do

01:25:40,120 --> 01:25:45,330
throttling using the dev tools so you

01:25:41,830 --> 01:25:48,160
can sort of emulate a 3g connection or

01:25:45,330 --> 01:25:52,000
2g or whatever you can also add your

01:25:48,160 --> 01:25:55,930
custom ones so I'm going to say first 3G

01:25:52,000 --> 01:25:59,050
and I'm going to refresh my application

01:25:55,930 --> 01:26:04,449
and if I now take a look at the file

01:25:59,050 --> 01:26:06,969
that got returned by this where is it

01:26:04,449 --> 01:26:09,100
so it's 33 kilobytes as opposed to the

01:26:06,969 --> 01:26:11,770
8th is something that we had and if you

01:26:09,100 --> 01:26:14,290
take a look at the URL notice queue Auto

01:26:11,770 --> 01:26:15,820
echo and I didn't show you that but I

01:26:14,290 --> 01:26:19,570
also added a photo just for good measure

01:26:15,820 --> 01:26:22,420
so basically now we injected this into

01:26:19,570 --> 01:26:24,460
the URL why because we wanted to make

01:26:22,420 --> 01:26:26,170
sure that if someone is on a 3G device

01:26:24,460 --> 01:26:28,750
they don't get you know we're saving

01:26:26,170 --> 01:26:31,600
them kilobytes here and then a 3G on a

01:26:28,750 --> 01:26:33,219
2g connection saving you know 20

01:26:31,600 --> 01:26:35,860
kilobytes here so we have how many

01:26:33,219 --> 01:26:38,380
background image 3 images say 20

01:26:35,860 --> 01:26:41,680
kilobytes each 80 kilobytes we say

01:26:38,380 --> 01:26:46,600
someone write or you know sometimes the

01:26:41,680 --> 01:26:50,530
savings can be even bigger now this as I

01:26:46,600 --> 01:26:54,950
said is sort of a concept some browsers

01:26:50,530 --> 01:26:56,780
like Chrome do support this but I think

01:26:54,950 --> 01:26:58,880
and obviously other browsers will

01:26:56,780 --> 01:27:02,000
support this as well and I think this is

01:26:58,880 --> 01:27:05,720
going to be a very good way to give sort

01:27:02,000 --> 01:27:07,460
of an adaptive performance for images

01:27:05,720 --> 01:27:09,940
for your users also remember the

01:27:07,460 --> 01:27:13,970
progressive thing from PW a

01:27:09,940 --> 01:27:17,270
progressively enhanced applications the

01:27:13,970 --> 01:27:19,940
Foster speed I have the better sort of

01:27:17,270 --> 01:27:22,180
experience I give to my user ok so this

01:27:19,940 --> 01:27:25,780
helps you to achieve that as well any

01:27:22,180 --> 01:27:25,780
questions on this

01:27:26,829 --> 01:27:33,280
okay what I didn't say before hmm and I

01:27:30,750 --> 01:27:35,619
meant to so this is for those of you are

01:27:33,280 --> 01:27:37,719
new to service workers and stuff so

01:27:35,619 --> 01:27:39,730
under the network panel you see these

01:27:37,719 --> 01:27:42,030
cog wheels here so every time when you

01:27:39,730 --> 01:27:45,460
see that that means that that response

01:27:42,030 --> 01:27:47,530
was either coming back from the cache or

01:27:45,460 --> 01:27:49,630
something that has to do with a service

01:27:47,530 --> 01:27:52,510
worker okay so this is how chrome sort

01:27:49,630 --> 01:27:54,520
of denotes or or demarcates that for you

01:27:52,510 --> 01:27:58,690
so when you say that it means that this

01:27:54,520 --> 01:28:02,139
file was received or manipulated by the

01:27:58,690 --> 01:28:04,270
service worker okay so normally you

01:28:02,139 --> 01:28:07,030
wouldn't see that so in the earlier

01:28:04,270 --> 01:28:10,030
requests but if you scroll down you see

01:28:07,030 --> 01:28:11,559
that for example this the news because

01:28:10,030 --> 01:28:13,119
it was available in the cache the

01:28:11,559 --> 01:28:15,070
service worker knew if it only returned

01:28:13,119 --> 01:28:21,929
it from that so that's just for

01:28:15,070 --> 01:28:21,929
debugging purposes okay

01:28:22,210 --> 01:28:29,540
I'm just thinking what I'm for getting

01:28:24,860 --> 01:28:31,250
but I think we can go back to the slides

01:28:29,540 --> 01:28:34,790
because now we're going to create

01:28:31,250 --> 01:28:36,560
another PWA which is going to be well as

01:28:34,790 --> 01:28:40,130
I said is it work or not though we'll

01:28:36,560 --> 01:28:43,070
see so now everyone knows about service

01:28:40,130 --> 01:28:46,550
workers caches you know about workbooks

01:28:43,070 --> 01:28:48,380
so we can create something so what I

01:28:46,550 --> 01:28:51,320
came up with is an interesting app that

01:28:48,380 --> 01:28:51,740
allows you to take selfies because why

01:28:51,320 --> 01:28:55,130
not

01:28:51,740 --> 01:28:58,340
so it's an angular application that uses

01:28:55,130 --> 01:29:00,860
the angular PWA plugin now interesting

01:28:58,340 --> 01:29:02,990
enough word box being a Google product

01:29:00,860 --> 01:29:06,140
angular being a Google product angular

01:29:02,990 --> 01:29:09,170
PWA does not use word box the reason for

01:29:06,140 --> 01:29:11,090
that is twofold first of all work box

01:29:09,170 --> 01:29:13,640
was created at the same time when

01:29:11,090 --> 01:29:15,560
angular created this PWA plugin so there

01:29:13,640 --> 01:29:18,380
was nothing that they could have used

01:29:15,560 --> 01:29:21,820
and then they were concerned about some

01:29:18,380 --> 01:29:25,400
caching mechanism in in work box and I

01:29:21,820 --> 01:29:27,890
asked the the creator of work box just

01:29:25,400 --> 01:29:31,550
like yesterday and the answer he gave

01:29:27,890 --> 01:29:33,950
was I should code that he said at this

01:29:31,550 --> 01:29:36,230
point in time I cannot give any publicly

01:29:33,950 --> 01:29:37,700
available information as to whether work

01:29:36,230 --> 01:29:40,610
box is going to be implemented in the

01:29:37,700 --> 01:29:42,200
angular or not now you have it I think

01:29:40,610 --> 01:29:45,710
that's a yes but it's fine

01:29:42,200 --> 01:29:47,240
I think I'd you know verb box is really

01:29:45,710 --> 01:29:51,740
cool so I think they go in to somehow

01:29:47,240 --> 01:29:53,540
integrate into anger then we have an

01:29:51,740 --> 01:29:57,580
interesting candidate here so anyone is

01:29:53,540 --> 01:29:57,580
familiar with firebase fire store

01:29:59,620 --> 01:30:05,840
I'm not dancing I want you to okay some

01:30:02,720 --> 01:30:10,880
of you so basically it's like it's an

01:30:05,840 --> 01:30:12,170
online real time database thing the

01:30:10,880 --> 01:30:14,540
reason why I'm using it here is because

01:30:12,170 --> 01:30:16,670
you will see the app in a minute you

01:30:14,540 --> 01:30:18,770
take a selfie that image is going to

01:30:16,670 --> 01:30:21,140
appear in a feed and then everyone else

01:30:18,770 --> 01:30:23,960
who is opening up the app will see that

01:30:21,140 --> 01:30:25,610
picture appearing so it's like fire

01:30:23,960 --> 01:30:29,060
store or firebase is capable of

01:30:25,610 --> 01:30:31,340
distributing in real time data to all

01:30:29,060 --> 01:30:34,730
the connected devices okay what's

01:30:31,340 --> 01:30:37,250
interesting is that it also works

01:30:34,730 --> 01:30:39,740
offline not the redistribution but you

01:30:37,250 --> 01:30:41,870
can still access data from firebase even

01:30:39,740 --> 01:30:44,240
though you're offline in fact I just

01:30:41,870 --> 01:30:47,060
learned I think a few days ago that the

01:30:44,240 --> 01:30:51,140
latest releases that firebase and

01:30:47,060 --> 01:30:53,060
firestore did basically any bull you

01:30:51,140 --> 01:30:55,130
know there's like hundred-percent PWA

01:30:53,060 --> 01:30:57,440
support for them so they support things

01:30:55,130 --> 01:31:00,110
like authentication even when you are

01:30:57,440 --> 01:31:03,050
offline they sync data when you go

01:31:00,110 --> 01:31:05,300
online so this really really good stuff

01:31:03,050 --> 01:31:07,460
that they do so definitely check out

01:31:05,300 --> 01:31:10,880
firebase and pwh they're just Google for

01:31:07,460 --> 01:31:13,220
that we'll use cloud iñárritu of course

01:31:10,880 --> 01:31:15,530
store and transform those images so what

01:31:13,220 --> 01:31:17,660
should this app do should work when

01:31:15,530 --> 01:31:19,640
we're offline that's the whole point

01:31:17,660 --> 01:31:22,340
while we're here and here's an

01:31:19,640 --> 01:31:24,860
interesting point as well so what I want

01:31:22,340 --> 01:31:27,770
this application to do is even though if

01:31:24,860 --> 01:31:30,320
I'm offline I want to still able to take

01:31:27,770 --> 01:31:32,630
an image of myself because who wouldn't

01:31:30,320 --> 01:31:34,910
want to do that and then when I next go

01:31:32,630 --> 01:31:38,180
online I want the picture to be uploaded

01:31:34,910 --> 01:31:40,690
immediately okay so this is going to be

01:31:38,180 --> 01:31:46,910
something that we will add as well

01:31:40,690 --> 01:31:48,350
second time we get excited so I'm a bit

01:31:46,910 --> 01:31:50,690
worried because as I said I've only

01:31:48,350 --> 01:31:51,950
tested it locally but we will see now so

01:31:50,690 --> 01:31:55,190
let me first show you how the

01:31:51,950 --> 01:31:58,970
application looks like using this

01:31:55,190 --> 01:32:00,680
wonderful thing here so this is my test

01:31:58,970 --> 01:32:02,240
device which is a nexus 5 which

01:32:00,680 --> 01:32:06,620
sometimes breaks because it's really

01:32:02,240 --> 01:32:07,379
really old but it was a very good phone

01:32:06,620 --> 01:32:11,309
to exact

01:32:07,379 --> 01:32:21,419
anyway you see okay so you will see what

01:32:11,309 --> 01:32:25,019
I'm doing on the phone here so I publish

01:32:21,419 --> 01:32:27,209
this app somewhere I'll give you the

01:32:25,019 --> 01:32:30,349
link but this is how it looks like what

01:32:27,209 --> 01:32:33,709
you will notice is that in a few seconds

01:32:30,349 --> 01:32:33,709
or did I

01:32:35,590 --> 01:32:43,720
what wait let me let me do something hit

01:32:40,510 --> 01:32:51,490
the big reset button as well which you

01:32:43,720 --> 01:32:53,820
can do if you're interested on how to do

01:32:51,490 --> 01:33:01,120
this I can show and I can do this

01:32:53,820 --> 01:33:02,500
because no it's not on localhost let me

01:33:01,120 --> 01:33:05,880
load this again so basically what should

01:33:02,500 --> 01:33:09,240
happen is that I should see a

01:33:05,880 --> 01:33:11,890
notification saying that this is a PW a

01:33:09,240 --> 01:33:18,250
although I have installed this yesterday

01:33:11,890 --> 01:33:22,330
anyway so on Android sorry you see it

01:33:18,250 --> 01:33:25,660
now yeah so on Android you remember on

01:33:22,330 --> 01:33:27,370
iOS we had the the little arrow in the

01:33:25,660 --> 01:33:28,900
bottom add to homescreen on Android you

01:33:27,370 --> 01:33:30,580
go at least I don't know if on all

01:33:28,900 --> 01:33:32,290
Android versions you go to this traffic

01:33:30,580 --> 01:33:33,430
light button and then you scroll and

01:33:32,290 --> 01:33:36,190
there's this thing called Add to Home

01:33:33,430 --> 01:33:38,470
screen and then you get something

01:33:36,190 --> 01:33:40,660
similar to what we had before right so

01:33:38,470 --> 01:33:43,840
there's a custom icon the name and some

01:33:40,660 --> 01:33:47,110
additional things so let's add that you

01:33:43,840 --> 01:33:49,030
see that it's adding Oh someone the

01:33:47,110 --> 01:33:49,800
notification arrived who was asking me

01:33:49,030 --> 01:33:51,850
that

01:33:49,800 --> 01:33:55,870
who was I talking to about the

01:33:51,850 --> 01:33:57,550
notification from the news app I was

01:33:55,870 --> 01:34:00,250
talking to someone I can't find the face

01:33:57,550 --> 01:34:02,350
anyway it worked it's here doesn't

01:34:00,250 --> 01:34:04,720
matter so Eddie - I don't know if you

01:34:02,350 --> 01:34:07,330
can read that by says Eddie - homescreen

01:34:04,720 --> 01:34:09,190
we haven't okay let's wait for the

01:34:07,330 --> 01:34:14,650
advert because I'm using a free version

01:34:09,190 --> 01:34:18,010
I'm not paying for this thank you this

01:34:14,650 --> 01:34:22,060
is not the PWA okay before before you

01:34:18,010 --> 01:34:24,220
that's that's not it it's just it's

01:34:22,060 --> 01:34:26,890
visor that I'm using yeah and it's as

01:34:24,220 --> 01:34:28,990
you saw at support it so I installed it

01:34:26,890 --> 01:34:32,260
self limiter is available as an

01:34:28,990 --> 01:34:35,170
application so I can now open this right

01:34:32,260 --> 01:34:37,090
so it works inside it's only two little

01:34:35,170 --> 01:34:40,330
window at the moment i refresh this

01:34:37,090 --> 01:34:43,590
there's nothing so let's do capture so

01:34:40,330 --> 01:34:46,780
let's do this

01:34:43,590 --> 01:34:49,570
okay I got two options retake photo use

01:34:46,780 --> 01:34:52,000
photo I will just use this terrible

01:34:49,570 --> 01:34:53,920
photo and when we say use photo it is

01:34:52,000 --> 01:34:55,929
going to go back to the feed uploading

01:34:53,920 --> 01:35:03,969
to cloud and reapply transformation boom

01:34:55,929 --> 01:35:06,250
it's there so what happens when I now go

01:35:03,969 --> 01:35:08,380
offline okay so I killed the Wi-Fi I'm

01:35:06,250 --> 01:35:10,570
also in airplane mode so I'm not

01:35:08,380 --> 01:35:14,969
connected to the Internet the applique

01:35:10,570 --> 01:35:14,969
let's close that and our moment of truth

01:35:16,739 --> 01:35:23,050
you are offline the image should show as

01:35:20,409 --> 01:35:26,079
well okay okay so it warns me that I'm

01:35:23,050 --> 01:35:28,630
offline on two different locations you

01:35:26,079 --> 01:35:30,010
can't see the hee-ho so it burns me on

01:35:28,630 --> 01:35:32,440
two different locations there was a

01:35:30,010 --> 01:35:35,889
snack bar notification that went away

01:35:32,440 --> 01:35:37,900
I probably overdone this is just trying

01:35:35,889 --> 01:35:39,280
to show you what you can do in order to

01:35:37,900 --> 01:35:41,829
tell you users that they are offline

01:35:39,280 --> 01:35:44,440
okay but I can still the point is I can

01:35:41,829 --> 01:35:48,789
still see this and use the app I can use

01:35:44,440 --> 01:35:52,900
it to the extent of taking a picture I

01:35:48,789 --> 01:35:55,389
should put a different face now okay and

01:35:52,900 --> 01:35:57,579
notice now I have used photo and upload

01:35:55,389 --> 01:36:00,670
later as opposed to just use photo

01:35:57,579 --> 01:36:02,590
because I'm offline right so I say okay

01:36:00,670 --> 01:36:04,659
this is this is good enough so let's use

01:36:02,590 --> 01:36:06,520
this since you are offline your photo

01:36:04,659 --> 01:36:09,610
will be uploaded next time you go online

01:36:06,520 --> 01:36:10,690
all these you know messages that I came

01:36:09,610 --> 01:36:17,349
up with okay got it

01:36:10,690 --> 01:36:19,270
so let's rien able the Wi-Fi come back

01:36:17,349 --> 01:36:22,960
to the app and be patient because this

01:36:19,270 --> 01:36:26,829
is an old phone but what should happen

01:36:22,960 --> 01:36:28,949
is that at some point in time it should

01:36:26,829 --> 01:36:34,389
find that there's a Jace comp network

01:36:28,949 --> 01:36:35,340
somewhere it didn't so let's help it oh

01:36:34,389 --> 01:36:38,550
hello

01:36:35,340 --> 01:36:41,080
Jas Camtasia

01:36:38,550 --> 01:36:45,699
mmm what is that - gee is that like a

01:36:41,080 --> 01:36:46,570
really a 2g speed now I'm asking I

01:36:45,699 --> 01:36:51,250
really don't know

01:36:46,570 --> 01:36:56,820
oh is it 2 gigahertz so I should look

01:36:51,250 --> 01:36:56,820
let's connect to that done GS :

01:36:57,060 --> 01:37:04,020
okay so Jay s con fascia connects saved

01:37:01,600 --> 01:37:09,930
great but the Hawkeye connecting ok so

01:37:04,020 --> 01:37:16,300
quickly you can still see everything ok

01:37:09,930 --> 01:37:19,710
waiting for the network at home this

01:37:16,300 --> 01:37:19,710
worked a lot better I have to tell you

01:37:28,959 --> 01:37:39,880
nope retry what sir yeah I did

01:37:36,539 --> 01:37:44,559
connecting this is not it's not

01:37:39,880 --> 01:37:49,630
connecting connecting but the other one

01:37:44,559 --> 01:37:50,199
doesn't even appear you see connected no

01:37:49,630 --> 01:37:55,090
internet

01:37:50,199 --> 01:37:59,979
wait connected no internet allow USB

01:37:55,090 --> 01:38:02,800
debugging what yes and now you can't see

01:37:59,979 --> 01:38:05,139
so it says uploading photo taken at

01:38:02,800 --> 01:38:07,989
whatever time and it will go back to the

01:38:05,139 --> 01:38:11,530
feed and you we would see that thing but

01:38:07,989 --> 01:38:13,239
this everything now just broke so you

01:38:11,530 --> 01:38:23,769
get the idea right of what's happening

01:38:13,239 --> 01:38:26,320
okay so how to do this I wanted to do

01:38:23,769 --> 01:38:33,130
like live coding with you by thing we

01:38:26,320 --> 01:38:35,260
won't have time to do that anyway so it

01:38:33,130 --> 01:38:37,659
now just uploaded okay so now I have

01:38:35,260 --> 01:38:39,999
these two images so what I want to do is

01:38:37,659 --> 01:38:42,729
so if you want you can try this app as

01:38:39,999 --> 01:38:50,800
well I tell you one thing

01:38:42,729 --> 01:38:53,320
iOS Safari mmm don't expect magic okay

01:38:50,800 --> 01:38:54,130
it kind of works like the video feed is

01:38:53,320 --> 01:38:57,749
super laggy

01:38:54,130 --> 01:39:01,209
I don't know why you have to press play

01:38:57,749 --> 01:39:03,189
then you pause then you shrink the video

01:39:01,209 --> 01:39:04,719
then you take the snapshot and it won't

01:39:03,189 --> 01:39:07,570
work offline I'm still working on that

01:39:04,719 --> 01:39:09,189
so if you're an Android by all means try

01:39:07,570 --> 01:39:13,840
this also if you're not going to take

01:39:09,189 --> 01:39:19,179
this offline you can try it on your iOS

01:39:13,840 --> 01:39:22,269
device and the address is I think I

01:39:19,179 --> 01:39:23,249
already put it somewhere here it's this

01:39:22,269 --> 01:39:26,800
one

01:39:23,249 --> 01:39:32,949
can you guys read put it in

01:39:26,800 --> 01:39:36,960
black and bald at least I think that's

01:39:32,949 --> 01:39:36,960
the one but let me quickly track that

01:39:41,690 --> 01:39:46,070
I actually used a different version of

01:39:44,480 --> 01:39:51,430
it but hopefully that's going to work as

01:39:46,070 --> 01:39:51,430
well let me load this

01:39:53,940 --> 01:40:01,909
so let's put it here let's put them

01:39:56,909 --> 01:40:04,830
there okay

01:40:01,909 --> 01:40:06,510
somewhere in the app it does say that I

01:40:04,830 --> 01:40:09,600
will delete the images that you take

01:40:06,510 --> 01:40:12,179
okay promise so feel free to try it and

01:40:09,600 --> 01:40:21,420
I'm going to delete all the data later

01:40:12,179 --> 01:40:24,719
on you're getting an error saying but

01:40:21,420 --> 01:40:29,969
now it works I think it's probably

01:40:24,719 --> 01:40:32,639
because the network is slow trying if

01:40:29,969 --> 01:40:33,840
you if you want to if you don't want to

01:40:32,639 --> 01:40:35,370
use your phone you can also use your

01:40:33,840 --> 01:40:39,780
laptop it should work on your laptops as

01:40:35,370 --> 01:40:41,730
well and what we should see if someone

01:40:39,780 --> 01:40:43,860
is brave enough to take a picture it

01:40:41,730 --> 01:40:46,110
should appear in the Phaedo matically on

01:40:43,860 --> 01:40:49,760
everyone's device who is connected to

01:40:46,110 --> 01:40:54,120
the website so what is enabling that is

01:40:49,760 --> 01:40:56,520
the is firebase right oh come on who did

01:40:54,120 --> 01:41:00,750
that it's selfie mater it's selfie

01:40:56,520 --> 01:41:02,880
anyway so what enables this is firebase

01:41:00,750 --> 01:41:09,389
right so firebase basically as I said is

01:41:02,880 --> 01:41:13,639
like an online and I went blank was the

01:41:09,389 --> 01:41:19,380
word it's not distributed database

01:41:13,639 --> 01:41:22,880
online that it sends all the data out to

01:41:19,380 --> 01:41:22,880
the connected I don't know the word oh

01:41:25,100 --> 01:41:31,489
so you're trolling the system okay it's

01:41:29,940 --> 01:41:35,100
fine

01:41:31,489 --> 01:41:37,020
WebSockets but there's a real-time the

01:41:35,100 --> 01:41:39,840
firebase is real-time database so every

01:41:37,020 --> 01:41:42,030
connected device is basically going to

01:41:39,840 --> 01:41:44,550
see all these updates because the

01:41:42,030 --> 01:41:46,770
database receives an entry and then it

01:41:44,550 --> 01:41:48,630
pushes out the update to everyone who is

01:41:46,770 --> 01:41:50,489
looking at the site either on mobile or

01:41:48,630 --> 01:41:52,100
on web and someone is trolling my

01:41:50,489 --> 01:41:55,889
application quite badly

01:41:52,100 --> 01:41:58,469
also what I do is obviously I do that

01:41:55,889 --> 01:42:00,690
phase detection thing from cloud Neri so

01:41:58,469 --> 01:42:02,040
that's why you take a picture even

01:42:00,690 --> 01:42:07,310
though your face is not in the middle

01:42:02,040 --> 01:42:09,410
it's going to generate an thumbnail

01:42:07,310 --> 01:42:13,630
where you see your faces in the middle

01:42:09,410 --> 01:42:17,240
I'm you for demonstration purposes okay

01:42:13,630 --> 01:42:19,250
so this is the app if you try this on a

01:42:17,240 --> 01:42:21,560
mobile you can try to bring your mobile

01:42:19,250 --> 01:42:23,030
of edit to the home screen trying to

01:42:21,560 --> 01:42:26,240
bring it offline and play with it and

01:42:23,030 --> 01:42:35,540
see whether that works also one more

01:42:26,240 --> 01:42:39,350
thing so I really wanted to show this to

01:42:35,540 --> 01:42:41,540
you but I can't get back to the GS conf

01:42:39,350 --> 01:42:42,740
Asia who is connecting now to Jos

01:42:41,540 --> 01:42:45,440
confession yes

01:42:42,740 --> 01:42:47,680
okay so let's try to do this again

01:42:45,440 --> 01:42:55,150
[Music]

01:42:47,680 --> 01:42:55,150
vizor no devices

01:43:00,970 --> 01:43:03,970
dum-dum

01:43:10,690 --> 01:43:13,590
why's our

01:43:22,099 --> 01:43:40,250
ok so let me do this USB enable USB

01:43:26,690 --> 01:43:41,739
debugging and ROI thing settings I'm

01:43:40,250 --> 01:43:44,300
doing this because I want to show you

01:43:41,739 --> 01:43:47,139
something in particular on this Android

01:43:44,300 --> 01:43:49,520
phone so just bear with me for one

01:43:47,139 --> 01:43:55,719
second to like any about this thing

01:43:49,520 --> 01:43:55,719
again build number tap it seven times

01:44:10,309 --> 01:44:19,750
okay connected mmm why's or crate

01:44:30,030 --> 01:44:34,869
okay I give up sorry I don't know why

01:44:32,829 --> 01:44:39,189
this is now not working anymore I'll

01:44:34,869 --> 01:44:42,489
show you another example so believe it

01:44:39,189 --> 01:44:43,090
or not as of I think two or three weeks

01:44:42,489 --> 01:44:46,239
ago

01:44:43,090 --> 01:44:49,689
you can run Microsoft edge on a Chrome

01:44:46,239 --> 01:44:52,599
device as well Chrome you see it's

01:44:49,689 --> 01:44:56,260
getting late on a Mac device okay so

01:44:52,599 --> 01:45:01,719
this is Microsoft edge running on my

01:44:56,260 --> 01:45:03,909
macbook so what happens and this is the

01:45:01,719 --> 01:45:05,559
same behavior that you would see on an

01:45:03,909 --> 01:45:07,179
Android device as well I don't know if

01:45:05,559 --> 01:45:09,249
any one of you has opened the Android

01:45:07,179 --> 01:45:11,409
device on the bottom it should have said

01:45:09,249 --> 01:45:13,209
something like Add to Home screen or

01:45:11,409 --> 01:45:15,519
something automatically right some of

01:45:13,209 --> 01:45:18,090
you are nodding so this is because this

01:45:15,519 --> 01:45:20,050
is a PWA Android and Chrome

01:45:18,090 --> 01:45:22,110
automatically detects that and offers

01:45:20,050 --> 01:45:25,479
you the the actual installation

01:45:22,110 --> 01:45:27,880
automatically okay if it didn't offer it

01:45:25,479 --> 01:45:30,669
to you you can always tap traffic lights

01:45:27,880 --> 01:45:34,300
add to homescreen so what's also very

01:45:30,669 --> 01:45:39,400
interesting is that if I open this PWA

01:45:34,300 --> 01:45:42,849
on an edge browser what should happen is

01:45:39,400 --> 01:45:45,900
that at some point in time notice that I

01:45:42,849 --> 01:45:49,059
get this plus icon that says install

01:45:45,900 --> 01:45:53,309
okay so this is in the address bar of my

01:45:49,059 --> 01:45:57,159
edge browser I can click on that and

01:45:53,309 --> 01:46:00,070
what I will get is this installation so

01:45:57,159 --> 01:46:03,130
also this the edge browser now detects

01:46:00,070 --> 01:46:05,559
that hey this is probably a PWA and it

01:46:03,130 --> 01:46:08,679
offers me to install that automatically

01:46:05,559 --> 01:46:11,400
so I can click install and what this

01:46:08,679 --> 01:46:14,679
will do it will actually give me this

01:46:11,400 --> 01:46:16,439
separate window that I can use just like

01:46:14,679 --> 01:46:19,809
an application okay

01:46:16,439 --> 01:46:21,189
so that's this is where this is what you

01:46:19,809 --> 01:46:24,489
should envision when you think about the

01:46:21,189 --> 01:46:26,709
progressive web app you go into your

01:46:24,489 --> 01:46:30,189
visitor site using the browser it acts

01:46:26,709 --> 01:46:31,900
as a website but you install it and it

01:46:30,189 --> 01:46:33,579
kind of looks and feels like an

01:46:31,900 --> 01:46:37,870
application ok so this is the core

01:46:33,579 --> 01:46:40,870
premise of this progressive web app

01:46:37,870 --> 01:46:40,870
hmm

01:46:41,260 --> 01:46:52,430
okay so so I have I can show you the

01:46:48,130 --> 01:46:57,470
Microsoft edge go away I can show you

01:46:52,430 --> 01:46:59,030
the the code base for the application so

01:46:57,470 --> 01:47:03,700
I have prepared two separate

01:46:59,030 --> 01:47:07,720
repositories they are well hidden here

01:47:03,700 --> 01:47:10,580
so let me make those black and both so

01:47:07,720 --> 01:47:13,430
someone when someone's asking me during

01:47:10,580 --> 01:47:17,450
the break whether I am going to give

01:47:13,430 --> 01:47:19,880
access to the repositories so this the

01:47:17,450 --> 01:47:22,310
two links that you see on github are to

01:47:19,880 --> 01:47:26,990
the self emitter examples one is the

01:47:22,310 --> 01:47:29,300
starter just a standard angular app no

01:47:26,990 --> 01:47:32,600
PWA nothing you want to take it offline

01:47:29,300 --> 01:47:35,840
it won't work final is what we should

01:47:32,600 --> 01:47:37,760
have arrived to so that's the working

01:47:35,840 --> 01:47:39,650
version I'm going to show you some bits

01:47:37,760 --> 01:47:42,770
of the code as opposed to try to code

01:47:39,650 --> 01:47:44,780
that together and I did show you some

01:47:42,770 --> 01:47:46,850
very basic serviceworker examples as

01:47:44,780 --> 01:47:50,120
well before and some very basic word box

01:47:46,850 --> 01:47:52,640
examples I wasn't actually prepared to

01:47:50,120 --> 01:47:55,850
show those so I will add those

01:47:52,640 --> 01:47:57,560
repositories to my slides and then you

01:47:55,850 --> 01:48:00,020
will get access to the slides you will

01:47:57,560 --> 01:48:01,940
be able to access those as well okay but

01:48:00,020 --> 01:48:04,070
for now just take a look at these I

01:48:01,940 --> 01:48:06,200
think I made them public so if someone

01:48:04,070 --> 01:48:08,600
could just quickly try that I think I

01:48:06,200 --> 01:48:11,060
just did that okay so remember the

01:48:08,600 --> 01:48:15,890
starter if you check that out you do an

01:48:11,060 --> 01:48:17,780
NPM install and then you do and here's

01:48:15,890 --> 01:48:19,850
the thing ya for the starter you can

01:48:17,780 --> 01:48:21,470
just do an NG serve if you're familiar

01:48:19,850 --> 01:48:23,210
with angular that's going to start an

01:48:21,470 --> 01:48:25,730
HTTP server and then you can go to your

01:48:23,210 --> 01:48:28,340
browser and check that out for the final

01:48:25,730 --> 01:48:31,250
version because it uses the Service

01:48:28,340 --> 01:48:34,520
Worker ng serve will not work you either

01:48:31,250 --> 01:48:36,110
do ng serve - - prod I probably should

01:48:34,520 --> 01:48:39,410
have added this in - somewhere in that

01:48:36,110 --> 01:48:42,170
so ng serve - - prod or you actually

01:48:39,410 --> 01:48:45,260
have to build your application which is

01:48:42,170 --> 01:48:47,330
ng build - - project okay so it's either

01:48:45,260 --> 01:48:49,250
the - just remember that when you have a

01:48:47,330 --> 01:48:53,119
progressive web app and you use angular

01:48:49,250 --> 01:49:00,139
you need to make sure that you've run

01:48:53,119 --> 01:49:03,170
production build of that so what we will

01:49:00,139 --> 01:49:05,330
do because of lack of time I'm going to

01:49:03,170 --> 01:49:09,619
explain to you the final version and

01:49:05,330 --> 01:49:10,699
just if you want you can or just you can

01:49:09,619 --> 01:49:11,510
look at my screen because I'm going to

01:49:10,699 --> 01:49:13,550
talk about this anyway

01:49:11,510 --> 01:49:15,170
just take a picture make sure that you

01:49:13,550 --> 01:49:17,440
know where that is and then later on you

01:49:15,170 --> 01:49:19,869
can come back to it and check it out

01:49:17,440 --> 01:49:23,110
well literally check it out actually

01:49:19,869 --> 01:49:23,110
okay so

01:49:25,460 --> 01:49:30,670
I'll sit down for this if you don't mind

01:49:32,519 --> 01:49:40,969
I just closed it I just so did I closed

01:49:35,369 --> 01:49:40,969
it so okay

01:49:43,770 --> 01:49:52,030
hmmm quick show of hands who is here

01:49:47,380 --> 01:49:55,120
familiar with angular and everyone else

01:49:52,030 --> 01:49:57,850
is not familiar with angular ok it's

01:49:55,120 --> 01:50:01,080
fine I will try to concentrate on the

01:49:57,850 --> 01:50:04,270
PWA bits and and how this is achieved

01:50:01,080 --> 01:50:07,450
sort of agnostic to the angular context

01:50:04,270 --> 01:50:09,100
because this contacts this you know

01:50:07,450 --> 01:50:10,720
storing something in local storage

01:50:09,100 --> 01:50:13,060
uploading when you're flying could be

01:50:10,720 --> 01:50:18,640
applied to whatever else it doesn't have

01:50:13,060 --> 01:50:20,320
to be angular so for those of you are

01:50:18,640 --> 01:50:22,390
interested in angular what what you need

01:50:20,320 --> 01:50:25,120
to do and actually I prepared some steps

01:50:22,390 --> 01:50:28,660
as well but basically you do ng add at

01:50:25,120 --> 01:50:30,310
angular /pwa that is going to add all

01:50:28,660 --> 01:50:33,190
the files and all the support necessary

01:50:30,310 --> 01:50:35,620
for the angular project to be able to

01:50:33,190 --> 01:50:37,690
act as a progressive web app as a next

01:50:35,620 --> 01:50:41,020
step you need to configure how the

01:50:37,690 --> 01:50:45,910
serviceworker works which you can do in

01:50:41,020 --> 01:50:49,120
angular using the ng SW so the angular

01:50:45,910 --> 01:50:53,950
serviceworker config JSON file and in

01:50:49,120 --> 01:50:55,840
this file I have and you know this is

01:50:53,950 --> 01:50:58,750
slightly different from what we've

01:50:55,840 --> 01:51:01,570
discussed but still follows kind of the

01:50:58,750 --> 01:51:04,780
same pattern so what we have here is an

01:51:01,570 --> 01:51:07,240
asset group app prefetch all the static

01:51:04,780 --> 01:51:09,220
assets for the application which is

01:51:07,240 --> 01:51:10,900
really just the index.html file and all

01:51:09,220 --> 01:51:13,750
the CSS and all the JavaScript files

01:51:10,900 --> 01:51:15,670
okay we've done this but in a slightly

01:51:13,750 --> 01:51:17,140
different context using the

01:51:15,670 --> 01:51:19,030
serviceworker okay so this is just a

01:51:17,140 --> 01:51:23,440
config file that does that and then what

01:51:19,030 --> 01:51:27,460
we have is the second section where we

01:51:23,440 --> 01:51:29,230
specify some URLs that I want to cache

01:51:27,460 --> 01:51:32,880
so these are sort of external

01:51:29,230 --> 01:51:38,680
third-party resources right so fonts

01:51:32,880 --> 01:51:41,500
what is it yeah fonts and excuse me

01:51:38,680 --> 01:51:43,390
phones and the cloud meri image assets

01:51:41,500 --> 01:51:45,940
right so I want to make sure that the

01:51:43,390 --> 01:51:48,130
serviceworker is aware of that and it

01:51:45,940 --> 01:51:50,350
can cache it now the way this angular

01:51:48,130 --> 01:51:52,720
PWA thing works

01:51:50,350 --> 01:51:54,820
it's kind of similar to word box in a

01:51:52,720 --> 01:51:57,070
sense that you specify regular

01:51:54,820 --> 01:51:57,460
expressions and then angular is going to

01:51:57,070 --> 01:51:59,739
gel

01:51:57,460 --> 01:52:01,900
the service worker based on this config

01:51:59,739 --> 01:52:03,340
file okay so it's automatically going to

01:52:01,900 --> 01:52:09,580
January that way so you don't need to

01:52:03,340 --> 01:52:13,750
manually write the service worker so no

01:52:09,580 --> 01:52:15,850
for next does the view SSG huh

01:52:13,750 --> 01:52:19,330
okay so for Knox remember from my slides

01:52:15,850 --> 01:52:23,230
it actually uses word books so when you

01:52:19,330 --> 01:52:25,060
use Knox I think you just I did that

01:52:23,230 --> 01:52:27,790
before I can't remember you type in some

01:52:25,060 --> 01:52:29,530
sort of a command it creates you a blank

01:52:27,790 --> 01:52:32,469
Service Worker where the first line is

01:52:29,530 --> 01:52:34,300
going to say import script workbooks and

01:52:32,469 --> 01:52:37,630
then you add your own word box project

01:52:34,300 --> 01:52:39,730
to that and as I said for react so I

01:52:37,630 --> 01:52:42,880
don't know any react developers I'm not

01:52:39,730 --> 01:52:47,219
really good Oh everyone's like ooh I'm

01:52:42,880 --> 01:52:49,630
not that good at react on beat me up I

01:52:47,219 --> 01:52:51,160
don't think there's a separate plugin

01:52:49,630 --> 01:52:53,200
for it but you can just add the Service

01:52:51,160 --> 01:52:54,640
Worker file and register it and just get

01:52:53,200 --> 01:52:57,540
on with your life or use workbooks

01:52:54,640 --> 01:52:59,890
that's it I don't think there's a plug

01:52:57,540 --> 01:53:02,110
it's either one yeah so if it's

01:52:59,890 --> 01:53:03,730
something simple use the service or KPI

01:53:02,110 --> 01:53:05,350
if it's something more complex like you

01:53:03,730 --> 01:53:07,480
want to try this adaptive image loading

01:53:05,350 --> 01:53:08,320
in a react context you know you create a

01:53:07,480 --> 01:53:10,989
serviceworker

01:53:08,320 --> 01:53:13,390
import work box write your code add that

01:53:10,989 --> 01:53:14,860
to your index.html file

01:53:13,390 --> 01:53:16,150
you know the registration script and

01:53:14,860 --> 01:53:20,020
that's that's all what you need to do

01:53:16,150 --> 01:53:21,730
for something more angular is obviously

01:53:20,020 --> 01:53:23,739
a larger framework than react it's

01:53:21,730 --> 01:53:26,320
slightly more complex so probably that's

01:53:23,739 --> 01:53:29,230
why him that's why they have this oldest

01:53:26,320 --> 01:53:30,940
config of trance but again this is you

01:53:29,230 --> 01:53:31,980
know somewhat similar to to what we've

01:53:30,940 --> 01:53:36,790
seen before

01:53:31,980 --> 01:53:38,469
okay I also created a service actually

01:53:36,790 --> 01:53:40,930
this was quite tricky so if this is

01:53:38,469 --> 01:53:44,770
going to be interesting for for those of

01:53:40,930 --> 01:53:51,400
you who are angular developers so I had

01:53:44,770 --> 01:53:55,030
an issue whereby I had used I actually

01:53:51,400 --> 01:53:57,330
forgot what I used so I'll tell you what

01:53:55,030 --> 01:54:01,570
this service is doing this service

01:53:57,330 --> 01:54:04,930
basically takes a look at the navigator

01:54:01,570 --> 01:54:08,200
dot online value so navigator dot online

01:54:04,930 --> 01:54:11,440
either returns true or false it returns

01:54:08,200 --> 01:54:16,110
true if you are online it returns for

01:54:11,440 --> 01:54:16,110
when you are offline well kind of right

01:54:17,670 --> 01:54:21,280
yeah and that's regardless of angular

01:54:19,840 --> 01:54:23,050
right so even if you're in your dev

01:54:21,280 --> 01:54:25,300
tools you just type in navigator dot

01:54:23,050 --> 01:54:26,620
online at this point it should return

01:54:25,300 --> 01:54:29,620
you true because you are online you

01:54:26,620 --> 01:54:31,510
check that offline checkbox in dev tools

01:54:29,620 --> 01:54:34,390
and it should return you false so what I

01:54:31,510 --> 01:54:38,770
do here I created this observable to

01:54:34,390 --> 01:54:40,900
actually check whether check the change

01:54:38,770 --> 01:54:42,490
between the online and the offline State

01:54:40,900 --> 01:54:44,380
in the browser ok and this is going to

01:54:42,490 --> 01:54:46,990
be important because this enables me to

01:54:44,380 --> 01:54:49,180
do many many things right this enables

01:54:46,990 --> 01:54:51,220
me to notify you whether you are offline

01:54:49,180 --> 01:54:54,850
or off or online using that red little

01:54:51,220 --> 01:54:57,940
bar on top it also allows me to say if I

01:54:54,850 --> 01:54:59,740
was offline and now I am online I want

01:54:57,940 --> 01:55:01,480
to check local storage and if there is

01:54:59,740 --> 01:55:03,940
something in local storage I want to

01:55:01,480 --> 01:55:06,550
upload that so I just separated this

01:55:03,940 --> 01:55:09,940
logic into this service now the problem

01:55:06,550 --> 01:55:13,450
that I had and I had to take a look at

01:55:09,940 --> 01:55:21,520
there's a very good talk on angular

01:55:13,450 --> 01:55:24,760
observables by Joe I forget the guys

01:55:21,520 --> 01:55:26,560
name he did a talk at angular something

01:55:24,760 --> 01:55:28,990
conference last year or maybe earlier

01:55:26,560 --> 01:55:33,010
earlier this year where he explains how

01:55:28,990 --> 01:55:34,900
the different observables and subjects

01:55:33,010 --> 01:55:36,550
and everything how that works in angular

01:55:34,900 --> 01:55:39,160
so that helped me a lot because what my

01:55:36,550 --> 01:55:42,490
issue was is that I have a feed

01:55:39,160 --> 01:55:45,190
component I have the capture component

01:55:42,490 --> 01:55:48,250
and then if I took my browser offline

01:55:45,190 --> 01:55:52,060
while I was at the feed component then I

01:55:48,250 --> 01:55:54,430
changed to the capture component the

01:55:52,060 --> 01:55:55,900
browser thought I'm I'm online even

01:55:54,430 --> 01:55:57,640
though I was offline I had to be fresh

01:55:55,900 --> 01:55:59,740
and that's when it updated itself and

01:55:57,640 --> 01:56:01,420
that was because I messed something up

01:55:59,740 --> 01:56:04,090
with these observables but I can't

01:56:01,420 --> 01:56:05,800
remember what it was but I know I had to

01:56:04,090 --> 01:56:07,870
create this behavior subject and that

01:56:05,800 --> 01:56:09,580
kind of solved it anyway that's only

01:56:07,870 --> 01:56:11,050
important for angular developers for

01:56:09,580 --> 01:56:13,540
everyone else what you need to remember

01:56:11,050 --> 01:56:15,040
navigate or not online if your online

01:56:13,540 --> 01:56:17,500
Twitter is true if you are offline

01:56:15,040 --> 01:56:20,679
witters false okay so I separated this

01:56:17,500 --> 01:56:24,750
into a service just for easy access

01:56:20,679 --> 01:56:24,750
so at the app component level

01:56:26,420 --> 01:56:29,420
hmm

01:56:30,289 --> 01:56:34,820
I'm trying to look at the important bits

01:56:33,289 --> 01:56:37,670
here so that's quite a lot of code here

01:56:34,820 --> 01:56:43,639
but let's kind of try to pick the the

01:56:37,670 --> 01:56:45,979
most important things here so first of

01:56:43,639 --> 01:56:48,380
all notice line 29 behavior subject

01:56:45,979 --> 01:56:51,349
observable the SUBSCRIBE online so I'm

01:56:48,380 --> 01:56:53,150
going to take a look at my connection

01:56:51,349 --> 01:56:58,090
service and I'm going to check whether I

01:56:53,150 --> 01:57:01,789
am online or offline so if I'm not

01:56:58,090 --> 01:57:04,010
online I show this snack bar that comes

01:57:01,789 --> 01:57:06,139
from the angular material library it's

01:57:04,010 --> 01:57:11,449
just you know a little snack bar that

01:57:06,139 --> 01:57:15,459
pops up otherwise so if I am online I

01:57:11,449 --> 01:57:19,369
check whether I have any items in my

01:57:15,459 --> 01:57:21,170
local storage ok so if I have any items

01:57:19,369 --> 01:57:23,420
in my local storage that means that

01:57:21,170 --> 01:57:25,130
someone took a picture while they were

01:57:23,420 --> 01:57:28,929
offline and I'm going to show that to

01:57:25,130 --> 01:57:31,459
how I add that in there ok and what I do

01:57:28,929 --> 01:57:34,789
anyone not familiar with the local

01:57:31,459 --> 01:57:37,340
storage is basically a key value pair

01:57:34,789 --> 01:57:40,519
that you can store in the browser so for

01:57:37,340 --> 01:57:42,800
me the key starts with capture at

01:57:40,519 --> 01:57:45,320
followed by an actual timestamp of when

01:57:42,800 --> 01:57:52,189
you took the picture and then I iterate

01:57:45,320 --> 01:57:54,709
through all of these in that local

01:57:52,189 --> 01:57:59,829
storage ok that I find all these images

01:57:54,709 --> 01:57:59,829
and then I take the cloud in airy API

01:57:59,949 --> 01:58:09,499
here 43 so API cloud unit comes - we won

01:58:06,939 --> 01:58:12,920
my cloud name so that's not much demo

01:58:09,499 --> 01:58:15,289
image upload and what I pass in is the

01:58:12,920 --> 01:58:21,499
actual value from the local storage

01:58:15,289 --> 01:58:24,170
which is a I think it's a it's a base64

01:58:21,499 --> 01:58:25,969
encoded value ok so cloud Neri can

01:58:24,170 --> 01:58:27,650
understand that as well to upload images

01:58:25,969 --> 01:58:31,969
it doesn't have to be an actual image

01:58:27,650 --> 01:58:34,760
file ok so I then if I get a response

01:58:31,969 --> 01:58:38,449
from cloud nuri I assume that the upload

01:58:34,760 --> 01:58:40,219
was successful I removed that image from

01:58:38,449 --> 01:58:43,050
the local storage there's no need to

01:58:40,219 --> 01:58:46,679
store that and then I also

01:58:43,050 --> 01:58:48,510
these lines update firebase right so I'm

01:58:46,679 --> 01:58:51,510
updating my database I'm updating my

01:58:48,510 --> 01:58:54,329
back-end and I say hello there's a new

01:58:51,510 --> 01:58:55,860
entry okay and then I never gate back to

01:58:54,329 --> 01:58:58,590
the slash of my application which is

01:58:55,860 --> 01:59:02,670
which is the root so how does this look

01:58:58,590 --> 01:59:09,590
behind the scenes so I have the firebase

01:59:02,670 --> 01:59:15,119
console where I have set up a project

01:59:09,590 --> 01:59:19,230
and if I click on database what you will

01:59:15,119 --> 01:59:21,210
see here is a collection called captures

01:59:19,230 --> 01:59:22,800
and these are all the images that you

01:59:21,210 --> 01:59:26,130
have uploaded so all they have is a

01:59:22,800 --> 01:59:28,829
public ID and then uploaded timestamp ok

01:59:26,130 --> 01:59:30,690
so these are all the values that get

01:59:28,829 --> 01:59:33,929
added so every time when you upload an

01:59:30,690 --> 01:59:36,090
image a new entry gets added into this

01:59:33,929 --> 01:59:38,460
database and because this new value gets

01:59:36,090 --> 01:59:41,070
added and because how firebase works in

01:59:38,460 --> 01:59:42,750
real time it pushes that update out to

01:59:41,070 --> 01:59:44,520
all the connected devices which then you

01:59:42,750 --> 01:59:47,940
can act on as well so what is this

01:59:44,520 --> 01:59:50,040
public ID so that public ID I'm just

01:59:47,940 --> 01:59:51,210
trying to put the pieces together for

01:59:50,040 --> 01:59:53,820
you so that you understand what's

01:59:51,210 --> 01:59:57,090
happening if I log in into my cloud in

01:59:53,820 --> 01:59:58,770
your account under my media library I

01:59:57,090 --> 02:00:01,349
will have to delete a lot of images now

01:59:58,770 --> 02:00:03,780
I should have put them in a folder but I

02:00:01,349 --> 02:00:06,510
didn't so what you will see is all your

02:00:03,780 --> 02:00:09,360
pictures appearing here and the public

02:00:06,510 --> 02:00:11,429
ID is just a unique reference ID to the

02:00:09,360 --> 02:00:14,159
picture itself ok so I store this value

02:00:11,429 --> 02:00:16,110
in the database so that later on I can

02:00:14,159 --> 02:00:19,260
come to Cloud Murray and retrieve the

02:00:16,110 --> 02:00:22,079
image also notice that the images that

02:00:19,260 --> 02:00:23,429
you see here are the raw images even

02:00:22,079 --> 02:00:25,170
though in the app you see the

02:00:23,429 --> 02:00:29,699
transformed versions of the images right

02:00:25,170 --> 02:00:35,340
you see the little rounded zoom on the

02:00:29,699 --> 02:00:36,960
face ok so public ID in firebase that

02:00:35,340 --> 02:00:40,050
reference is cloud meri

02:00:36,960 --> 02:00:44,609
so far so good at least I hope does this

02:00:40,050 --> 02:00:52,469
kind of make sense so far ok

02:00:44,609 --> 02:00:54,809
hopefully so capture component has the

02:00:52,469 --> 02:00:56,399
actual video and the canvas so what

02:00:54,809 --> 02:00:58,139
happens here is that you get a video I

02:00:56,399 --> 02:01:00,929
get a video feed that's from the camera

02:00:58,139 --> 02:01:03,869
and when you take a picture that image

02:01:00,929 --> 02:01:05,129
gets inputted to this canvas element so

02:01:03,869 --> 02:01:06,749
that's when you remember you took a

02:01:05,129 --> 02:01:11,010
picture and then you had a still image

02:01:06,749 --> 02:01:13,769
in place okay so this is what achieves

02:01:11,010 --> 02:01:16,800
that there's some additional logic in

02:01:13,769 --> 02:01:18,689
here using you know ng-if probably does

02:01:16,800 --> 02:01:20,969
an equivalent in every other framework

02:01:18,689 --> 02:01:24,499
so we say if the stream is being

02:01:20,969 --> 02:01:28,559
displayed do you capture photo and if

02:01:24,499 --> 02:01:30,359
line 17 if we are not on line and if we

02:01:28,559 --> 02:01:31,979
are not displaying the stream meaning

02:01:30,359 --> 02:01:33,419
that we've just taken a picture so we're

02:01:31,979 --> 02:01:35,489
showing that picture and we're offline

02:01:33,419 --> 02:01:37,139
then the button says useful to end

02:01:35,489 --> 02:01:40,469
upload later so it's just a logic to

02:01:37,139 --> 02:01:44,570
show the different buttons furthermore

02:01:40,469 --> 02:01:44,570
in capture components

02:01:47,330 --> 02:01:50,840
what should I show you what should I

02:01:49,040 --> 02:01:53,120
show you that doesn't matter you can

02:01:50,840 --> 02:01:55,070
always check how I got the actual feet

02:01:53,120 --> 02:01:58,510
from the camera but that's kind of

02:01:55,070 --> 02:02:03,440
irrelevant now what's important is the

02:01:58,510 --> 02:02:07,640
use photo okay so use photo is a method

02:02:03,440 --> 02:02:09,200
that also checks actually I did

02:02:07,640 --> 02:02:12,620
navigator online I probably should have

02:02:09,200 --> 02:02:15,290
used my service ignore that so I check

02:02:12,620 --> 02:02:15,890
whether I'm online or not so if I'm not

02:02:15,290 --> 02:02:17,450
online

02:02:15,890 --> 02:02:19,850
meaning that you know I don't have an

02:02:17,450 --> 02:02:23,030
active network connection I basically

02:02:19,850 --> 02:02:25,970
call local story step set item and I

02:02:23,030 --> 02:02:28,010
store the captured image in local

02:02:25,970 --> 02:02:30,440
storage as a key value pair where the

02:02:28,010 --> 02:02:32,660
key is captured at and the time taken

02:02:30,440 --> 02:02:36,800
and the value is the actual capture

02:02:32,660 --> 02:02:39,800
which is a data URL of the canvas

02:02:36,800 --> 02:02:45,680
element image JPEG so that's line 88

02:02:39,800 --> 02:02:48,530
okay otherwise so else if I'm online I

02:02:45,680 --> 02:02:50,660
just call the cloud in your API I upload

02:02:48,530 --> 02:02:54,500
the image if I get a response from

02:02:50,660 --> 02:02:56,840
cloudera saying upload was okay then I

02:02:54,500 --> 02:02:59,450
remember this capture collection that's

02:02:56,840 --> 02:03:02,060
in firebase I just add a new item to my

02:02:59,450 --> 02:03:03,980
firebase database because that new item

02:03:02,060 --> 02:03:05,660
gets added firebase pushes that out to

02:03:03,980 --> 02:03:09,100
all the devices and you see an updated

02:03:05,660 --> 02:03:09,100
feed okay

02:03:10,370 --> 02:03:21,630
now what's interesting is the firebase

02:03:16,710 --> 02:03:25,410
integration so firebase even though it's

02:03:21,630 --> 02:03:27,960
an online real-time WebSocket based data

02:03:25,410 --> 02:03:32,210
store as you so even though when we're

02:03:27,960 --> 02:03:35,280
offline it still showed us some data and

02:03:32,210 --> 02:03:39,300
so even if you so I'm using angularfire

02:03:35,280 --> 02:03:41,310
store which is the angular firebase

02:03:39,300 --> 02:03:44,940
library I don't know how to explain

02:03:41,310 --> 02:03:46,469
that's like the if you want to use

02:03:44,940 --> 02:03:50,340
firebase with angular use angular fire

02:03:46,469 --> 02:03:52,350
that's what I'm trying to say and if you

02:03:50,340 --> 02:03:54,870
wouldn't have this enabled persistence

02:03:52,350 --> 02:03:56,730
when you when you call when you actually

02:03:54,870 --> 02:03:59,010
add the anger the firebase

02:03:56,730 --> 02:04:00,930
implementation we wouldn't see the

02:03:59,010 --> 02:04:03,090
images that wouldn't work okay

02:04:00,930 --> 02:04:06,620
it's it is only because I've added this

02:04:03,090 --> 02:04:09,510
enable persistence that enables us to

02:04:06,620 --> 02:04:11,700
see the images to see the data that

02:04:09,510 --> 02:04:14,130
comes from this online data store even

02:04:11,700 --> 02:04:17,130
when we are offline ok so this is this

02:04:14,130 --> 02:04:19,530
is key here and this enable persistence

02:04:17,130 --> 02:04:22,320
method is available in firebase as a

02:04:19,530 --> 02:04:25,200
whole so you don't need to use angular

02:04:22,320 --> 02:04:28,320
and angular fire for that if you just

02:04:25,200 --> 02:04:31,290
work with firebase then you have access

02:04:28,320 --> 02:04:33,800
to enable persistence regardless of

02:04:31,290 --> 02:04:33,800
where you are

02:04:37,599 --> 02:04:41,349
any questions

02:04:41,820 --> 02:04:47,290
so this is a massive app especially if

02:04:44,710 --> 02:04:50,470
you're not an angular developer but

02:04:47,290 --> 02:04:53,290
hopefully you can still take away some

02:04:50,470 --> 02:04:57,850
things from this you can apply this to

02:04:53,290 --> 02:05:01,720
two other frameworks luckily I have a

02:04:57,850 --> 02:05:07,690
link to a very similar app that does

02:05:01,720 --> 02:05:10,450
this but uses react so yay

02:05:07,690 --> 02:05:12,790
but again the concept there is exactly

02:05:10,450 --> 02:05:14,440
say it's not using firebase there but

02:05:12,790 --> 02:05:17,590
the concept is the same local storage

02:05:14,440 --> 02:05:19,480
navigator online offline make sure that

02:05:17,590 --> 02:05:21,400
you act on the change if you come online

02:05:19,480 --> 02:05:24,940
local storage has something upload image

02:05:21,400 --> 02:05:27,190
you know same same stuff but using react

02:05:24,940 --> 02:05:31,720
and as I said you could use any other

02:05:27,190 --> 02:05:34,060
framework so besides this are there any

02:05:31,720 --> 02:05:36,490
questions on this so you have access to

02:05:34,060 --> 02:05:39,610
both the starter and both the final code

02:05:36,490 --> 02:05:42,160
which is this one feel free to have a

02:05:39,610 --> 02:05:44,400
look at this run it test it if there's

02:05:42,160 --> 02:05:46,990
any questions then you can just email me

02:05:44,400 --> 02:05:48,790
Twitter tweet me LinkedIn me whatever

02:05:46,990 --> 02:05:51,610
and just ask away we'll be more than

02:05:48,790 --> 02:05:54,880
happy to help the last thing I want to

02:05:51,610 --> 02:05:59,470
talk about is lighthouse because we

02:05:54,880 --> 02:06:02,680
didn't talk about lighthouse itself so

02:05:59,470 --> 02:06:05,830
let's take our app I actually never run

02:06:02,680 --> 02:06:09,310
the lighthouse test with we disapp but

02:06:05,830 --> 02:06:11,500
it's going to be interesting to see so

02:06:09,310 --> 02:06:13,660
as I said lighthouse you can use that as

02:06:11,500 --> 02:06:16,390
a CLI to so you can just npm install

02:06:13,660 --> 02:06:21,780
lighthouse and run it locally or you can

02:06:16,390 --> 02:06:23,170
run it wire dev tools and it's under

02:06:21,780 --> 02:06:27,100
audits

02:06:23,170 --> 02:06:28,540
yes under audit and notice that you get

02:06:27,100 --> 02:06:30,280
some options here you can say you want

02:06:28,540 --> 02:06:33,220
to test on mobile or desktop so that's

02:06:30,280 --> 02:06:35,140
the desktop it can do a lot more but I'm

02:06:33,220 --> 02:06:36,640
not interested in the performance nor

02:06:35,140 --> 02:06:38,530
the best practices I just want to make

02:06:36,640 --> 02:06:41,110
sure that you know I pass the

02:06:38,530 --> 02:06:42,640
progressive web app test I'm not going

02:06:41,110 --> 02:06:46,060
to do throttling so you can also do

02:06:42,640 --> 02:06:48,610
throttling for 3G and 2g clear storage

02:06:46,060 --> 02:06:49,990
yes so run old it so I don't know how

02:06:48,610 --> 02:06:53,050
long this is going to take whether this

02:06:49,990 --> 02:06:55,739
is going to work but I'm pretty

02:06:53,050 --> 02:06:59,640
confident that I've added everything

02:06:55,739 --> 02:07:04,790
in order for this to be a proper PWA if

02:06:59,640 --> 02:07:08,340
not then we will check another example

02:07:04,790 --> 02:07:14,010
so what this does just for those of you

02:07:08,340 --> 02:07:17,969
not familiar with lighthouse it's too

02:07:14,010 --> 02:07:21,239
slow it's fine so what it does it has

02:07:17,969 --> 02:07:23,640
certain tests okay so by default it

02:07:21,239 --> 02:07:26,160
gives you tests for is it fast and

02:07:23,640 --> 02:07:28,590
reliable is it installable and I'm going

02:07:26,160 --> 02:07:30,420
to scroll through those what is

02:07:28,590 --> 02:07:33,810
important to remember is that this

02:07:30,420 --> 02:07:35,790
lighthouse tool is also based on plugins

02:07:33,810 --> 02:07:38,010
so you can come up with your own tests

02:07:35,790 --> 02:07:39,870
again you can submit that to Google and

02:07:38,010 --> 02:07:41,640
then they're going to either include it

02:07:39,870 --> 02:07:44,100
or not but even if they they don't

02:07:41,640 --> 02:07:48,210
include it you can run lighthouse

02:07:44,100 --> 02:07:50,390
locally with your own tests so ignoring

02:07:48,210 --> 02:07:54,780
the fact that it's a very slow site

02:07:50,390 --> 02:07:57,630
installable uses HTTPS PW optimized so

02:07:54,780 --> 02:07:59,880
we get a few warnings manifest is

02:07:57,630 --> 02:08:02,219
missing a single icon we could probably

02:07:59,880 --> 02:08:04,020
fix that but we are in a very good state

02:08:02,219 --> 02:08:07,290
right we got a lot of green checkmarks

02:08:04,020 --> 02:08:09,660
okay so this is showing us that okay

02:08:07,290 --> 02:08:11,489
this is a relatively good progressive

02:08:09,660 --> 02:08:13,410
web application okay so now what you

02:08:11,489 --> 02:08:15,420
could do of course you could take a look

02:08:13,410 --> 02:08:17,340
at this why is it loading to slow add

02:08:15,420 --> 02:08:20,340
that icon and then you will get an even

02:08:17,340 --> 02:08:22,920
better result mm-hmm now on all the

02:08:20,340 --> 02:08:25,350
versions of Chrome I don't know if you

02:08:22,920 --> 02:08:26,940
guys do auto updates or not you may get

02:08:25,350 --> 02:08:30,030
a different view they used to have like

02:08:26,940 --> 02:08:33,690
a score of 100 and I need to say you

02:08:30,030 --> 02:08:36,770
scored 86 out of 100 for your PWA so if

02:08:33,690 --> 02:08:39,840
you see that that's an older version of

02:08:36,770 --> 02:08:41,850
lighthouse but feel free to have a look

02:08:39,840 --> 02:08:44,520
at this we also have this is still

02:08:41,850 --> 02:08:48,960
running so we can do a local audit for

02:08:44,520 --> 02:08:51,449
this this uses images so no performance

02:08:48,960 --> 02:08:55,170
no best practices so let's see how this

02:08:51,449 --> 02:08:56,620
one is going to do how I stopped that

02:08:55,170 --> 02:09:00,510
yeah

02:08:56,620 --> 02:09:00,510
when is in next

02:09:05,110 --> 02:09:11,750
so they specified certain thresholds

02:09:08,900 --> 02:09:13,640
like for example now you see I got red

02:09:11,750 --> 02:09:16,520
warnings everywhere because it only uses

02:09:13,640 --> 02:09:19,100
HTTPS nothing else you know there's no

02:09:16,520 --> 02:09:22,130
money first file it's not optimized

02:09:19,100 --> 02:09:25,250
there's no viewport tag so all of these

02:09:22,130 --> 02:09:27,770
things if you add all of these then they

02:09:25,250 --> 02:09:31,070
say it's a proper PWA so what I'm going

02:09:27,770 --> 02:09:33,949
to do I'll try to find this site real

02:09:31,070 --> 02:09:40,280
quick I've run it and then rerun the

02:09:33,949 --> 02:09:45,230
test and see if we can get some better

02:09:40,280 --> 02:09:48,340
results I wish I could know what that

02:09:45,230 --> 02:09:48,340
example was

02:09:53,010 --> 02:09:55,639
No

02:09:58,260 --> 02:10:07,160
okay so node server the Jess 81-81

02:10:12,170 --> 02:10:15,590
go away

02:10:18,350 --> 02:10:24,250
Oh ditz plus

02:10:28,760 --> 02:10:34,900
Oh

02:10:30,699 --> 02:10:34,900
okay so run this all it

02:10:36,179 --> 02:10:44,670
I think this one has most of the things

02:10:40,110 --> 02:10:48,120
that it are required okay so start your

02:10:44,670 --> 02:10:49,350
doesn't respond okay so there's still

02:10:48,120 --> 02:10:51,989
some things that I would obviously

02:10:49,350 --> 02:10:53,850
there's no HTTP there's no splash okay

02:10:51,989 --> 02:10:55,290
so there's probably more than I thought

02:10:53,850 --> 02:10:58,770
that we would need to fix but at least

02:10:55,290 --> 02:11:01,469
it gives you a good sense of knowing

02:10:58,770 --> 02:11:05,610
what you're missing you fix them and

02:11:01,469 --> 02:11:10,350
then you're going to be ready - ready to

02:11:05,610 --> 02:11:13,980
roll with your PW hmm let me also try

02:11:10,350 --> 02:11:21,710
one more thing because now I think this

02:11:13,980 --> 02:11:21,710
little thing works okay so view

02:11:23,580 --> 02:11:28,740
yay okay so what I will try to do is

02:11:29,340 --> 02:11:44,730
redirect 8:08 one to localhost:8080 home

02:11:39,460 --> 02:11:51,420
screen thing hopefully that's going to

02:11:44,730 --> 02:11:51,420
pop up so what is it 8 0 81

02:11:55,039 --> 02:12:01,440
still doesn't show anyway I give up

02:11:58,110 --> 02:12:03,239
sorry there should be a little pop-up so

02:12:01,440 --> 02:12:07,190
if towards the bottom of the screen to

02:12:03,239 --> 02:12:07,190
say Add to Home screen why it's fine

02:12:07,280 --> 02:12:17,250
okay so last few slides so these are all

02:12:12,719 --> 02:12:19,619
links to articles some are kind of order

02:12:17,250 --> 02:12:21,150
but these are all related to the last

02:12:19,619 --> 02:12:24,360
three are very fresh

02:12:21,150 --> 02:12:25,530
so I don't know when that happened I

02:12:24,360 --> 02:12:27,269
probably should look that up but you

02:12:25,530 --> 02:12:29,789
know in Google Play traditionally

02:12:27,269 --> 02:12:32,309
speaking when you look for an app it was

02:12:29,789 --> 02:12:34,860
an Android coupling something app right

02:12:32,309 --> 02:12:38,070
but Google has changed that so they now

02:12:34,860 --> 02:12:40,199
allow you to submit progressive web apps

02:12:38,070 --> 02:12:42,690
and people just can search for that

02:12:40,199 --> 02:12:43,409
download it from there and it will you

02:12:42,690 --> 02:12:45,389
know you wouldn't know the difference

02:12:43,409 --> 02:12:48,150
whether you have a proper app or a

02:12:45,389 --> 02:12:51,210
progressive web app the same is true for

02:12:48,150 --> 02:12:53,250
Microsoft Store and as you saw Microsoft

02:12:51,210 --> 02:12:57,210
edge automatically detects these pwace

02:12:53,250 --> 02:12:59,219
as well so I show that to you a few

02:12:57,210 --> 02:13:03,989
minutes ago

02:12:59,219 --> 02:13:07,469
iOS 13 so obviously Apple recently had

02:13:03,989 --> 02:13:09,690
this how do they call it the WWDC

02:13:07,469 --> 02:13:12,090
something conference where they

02:13:09,690 --> 02:13:14,099
announced iOS 13 what they didn't

02:13:12,090 --> 02:13:17,369
announce is that they will have a lot of

02:13:14,099 --> 02:13:19,199
improved pwace support as well this is a

02:13:17,369 --> 02:13:23,849
link to an article that discusses those

02:13:19,199 --> 02:13:26,849
changes and on Google i/o about what a

02:13:23,849 --> 02:13:29,309
month ago two months ago Google said

02:13:26,849 --> 02:13:31,170
that they now support so if you have a

02:13:29,309 --> 02:13:35,789
what do they called Chromebook pixel

02:13:31,170 --> 02:13:37,440
book that runs a Chrome OS pwace are

02:13:35,789 --> 02:13:39,360
automatically going to be supported

02:13:37,440 --> 02:13:40,949
there so that means that you can install

02:13:39,360 --> 02:13:43,099
an app it's going to be added to your

02:13:40,949 --> 02:13:47,250
launch bar and it's going to act as a

02:13:43,099 --> 02:13:49,949
standard application so these are links

02:13:47,250 --> 02:13:52,260
some are to tweet some are to YouTube

02:13:49,949 --> 02:13:55,530
videos some are to articles that you can

02:13:52,260 --> 02:13:59,130
take a look at additional resources so I

02:13:55,530 --> 02:14:00,929
created a PWA handbook which I will now

02:13:59,130 --> 02:14:03,539
update because there's some updates that

02:14:00,929 --> 02:14:06,520
needs to go in there but if you are new

02:14:03,539 --> 02:14:09,610
to the PWA stuff that handbook

02:14:06,520 --> 02:14:11,770
walks you through of putting together

02:14:09,610 --> 02:14:13,900
that news application the first one the

02:14:11,770 --> 02:14:15,760
very ugly one okay and it walks you

02:14:13,900 --> 02:14:17,950
through the basics of the service API

02:14:15,760 --> 02:14:19,810
how to use the cache and it shows you

02:14:17,950 --> 02:14:20,920
the code samples and the end result

02:14:19,810 --> 02:14:24,160
should be that you have a fully

02:14:20,920 --> 02:14:26,890
functioning very simple but fully

02:14:24,160 --> 02:14:29,350
functioning progress ababa these two

02:14:26,890 --> 02:14:31,090
links are two blog posts that go into

02:14:29,350 --> 02:14:32,890
the detail of this adaptive image

02:14:31,090 --> 02:14:35,310
loading that we kind of discussed using

02:14:32,890 --> 02:14:38,740
the network information API and stuff

02:14:35,310 --> 02:14:40,480
without workbooks and with workbooks and

02:14:38,740 --> 02:14:42,190
then this is the reacts of that I

02:14:40,480 --> 02:14:45,400
mentioned so that is a similar

02:14:42,190 --> 02:14:47,890
application which basically is a camera

02:14:45,400 --> 02:14:50,050
app it allows you to take a picture and

02:14:47,890 --> 02:14:51,430
if your offline stores in local storage

02:14:50,050 --> 02:14:57,970
when you go online it uploads it to

02:14:51,430 --> 02:14:59,830
cloud Neri written in react are there

02:14:57,970 --> 02:15:05,190
any questions about anything that we

02:14:59,830 --> 02:15:07,780
have discussed this afternoon you will I

02:15:05,190 --> 02:15:10,000
don't know the slides are going to be

02:15:07,780 --> 02:15:14,320
distributed right at some point I'm

02:15:10,000 --> 02:15:17,440
asking the organizers but one is hiding

02:15:14,320 --> 02:15:19,560
behind the column do you know if these

02:15:17,440 --> 02:15:22,360
slides are going to be distributed

02:15:19,560 --> 02:15:24,730
probably they will and then they have to

02:15:22,360 --> 02:15:27,550
be ok I'll make sure maybe I will tweet

02:15:24,730 --> 02:15:30,370
about this as well what this design

02:15:27,550 --> 02:15:32,110
change also remove these all my Twitter

02:15:30,370 --> 02:15:34,090
handles but how I put them back in just

02:15:32,110 --> 02:15:36,250
a second I'll make sure that you get

02:15:34,090 --> 02:15:37,750
this and I will update this with the key

02:15:36,250 --> 02:15:40,360
table links as well so you have access

02:15:37,750 --> 02:15:42,330
to those as well sorry any any other

02:15:40,360 --> 02:15:46,420
questions yeah

02:15:42,330 --> 02:15:50,710
I'm really wondering how does this

02:15:46,420 --> 02:15:52,360
compare in your opinion - if you get

02:15:50,710 --> 02:15:53,860
four like it if you want to make like a

02:15:52,360 --> 02:15:55,750
mobile application others this compared

02:15:53,860 --> 02:15:57,940
to if you want to make a mobile app case

02:15:55,750 --> 02:15:59,200
using rapid technology I mean how does

02:15:57,940 --> 02:16:09,520
this compare to like using something

02:15:59,200 --> 02:16:12,640
like other technology so one obvious

02:16:09,520 --> 02:16:15,730
difference and in that Google i/o talk I

02:16:12,640 --> 02:16:16,960
think the the Google team gave away an

02:16:15,730 --> 02:16:21,730
answer to your question

02:16:16,960 --> 02:16:25,390
they basically showcased sketch which is

02:16:21,730 --> 02:16:28,750
like this design app and they showed

02:16:25,390 --> 02:16:30,580
three screenshots one was a PWA one was

02:16:28,750 --> 02:16:32,890
working on a Mac and one was working on

02:16:30,580 --> 02:16:35,230
an iPad or some sort of something and a

02:16:32,890 --> 02:16:37,630
key what they said there was that is the

02:16:35,230 --> 02:16:40,420
same codebase it was exactly the same

02:16:37,630 --> 02:16:42,460
code base running on three different

02:16:40,420 --> 02:16:44,500
completely separate devices one in an

02:16:42,460 --> 02:16:48,160
app one in a browser and I think that's

02:16:44,500 --> 02:16:49,660
the key right so think about this this

02:16:48,160 --> 02:16:52,240
selfie thing that we did right so let's

02:16:49,660 --> 02:16:53,740
say you have this angular app and now

02:16:52,240 --> 02:16:56,860
you want to have a mobile version of

02:16:53,740 --> 02:16:59,080
that so yeah now you would have to you

02:16:56,860 --> 02:17:01,270
know recreate this entire new project

02:16:59,080 --> 02:17:03,820
using one of these technologies like

02:17:01,270 --> 02:17:06,250
Cordova or ionic or whatever with this

02:17:03,820 --> 02:17:08,140
you just say okay ng add angular PW and

02:17:06,250 --> 02:17:10,150
you continue to work on the same code

02:17:08,140 --> 02:17:13,330
base with minimum money modifications

02:17:10,150 --> 02:17:24,310
and you will end up having the same

02:17:13,330 --> 02:17:27,220
result essentially that depends that

02:17:24,310 --> 02:17:30,250
depends if you again I'm just going to

02:17:27,220 --> 02:17:33,880
reference Google material here they have

02:17:30,250 --> 02:17:36,100
a lot of use cases and showcases and

02:17:33,880 --> 02:17:38,350
comparisons with regarding to

02:17:36,100 --> 02:17:39,850
performance and user retention and they

02:17:38,350 --> 02:17:41,320
give you all the percent which is an all

02:17:39,850 --> 02:17:45,430
the dollar values that you ever wanted

02:17:41,320 --> 02:17:47,040
and the other thing is that what I want

02:17:45,430 --> 02:17:50,490
to say

02:17:47,040 --> 02:17:50,490
the other thing

02:17:52,460 --> 02:18:00,060
that was another thing no it's about the

02:17:58,070 --> 02:18:01,590
what was your question again say the

02:18:00,060 --> 02:18:09,450
question again let's just replay the

02:18:01,590 --> 02:18:11,640
conversation down I have it I have it

02:18:09,450 --> 02:18:13,320
sorry obviously there are some things

02:18:11,640 --> 02:18:15,630
that you can't access from the browser

02:18:13,320 --> 02:18:24,030
that you would be able to access from a

02:18:15,630 --> 02:18:27,510
native mobile app right I I want to say

02:18:24,030 --> 02:18:29,910
an example you can see the camera you

02:18:27,510 --> 02:18:32,310
can't use so for your fingerprint

02:18:29,910 --> 02:18:35,790
readers right you can you there is now a

02:18:32,310 --> 02:18:37,620
proper I don't know what state that is

02:18:35,790 --> 02:18:39,060
in at the moment but there's this web

02:18:37,620 --> 02:18:41,580
authentication thing that has a

02:18:39,060 --> 02:18:43,080
fingerprint API which is which means

02:18:41,580 --> 02:18:46,140
that the browser's would be able to read

02:18:43,080 --> 02:18:47,700
that as well but it's in progress okay

02:18:46,140 --> 02:18:49,110
so there's lots of things again if you

02:18:47,700 --> 02:18:53,790
check that Google i/o talk they have

02:18:49,110 --> 02:18:56,370
this nice sort of timeline they will

02:18:53,790 --> 02:18:58,051
also support I think that's all though

02:18:56,370 --> 02:19:00,180
that's relevant to the Pixar book that

02:18:58,051 --> 02:19:02,280
their progressive web apps if you run it

02:19:00,180 --> 02:19:06,420
on a Chromebook or Pixar book they will

02:19:02,280 --> 02:19:09,570
give you native file system support plus

02:19:06,420 --> 02:19:11,310
they will have special extensions that

02:19:09,570 --> 02:19:13,470
you double click and they will open in

02:19:11,310 --> 02:19:17,040
progress civil apps so they make a lot

02:19:13,470 --> 02:19:21,060
of efforts to making progressive web

02:19:17,040 --> 02:19:22,320
apps come up to par with native mobile

02:19:21,060 --> 02:19:25,110
apps so there are something that you

02:19:22,320 --> 02:19:26,790
can't do but as the web progresses

02:19:25,110 --> 02:19:29,400
there's going to be a lot more that you

02:19:26,790 --> 02:19:30,660
can do and and that's when there's not

02:19:29,400 --> 02:19:32,970
going to be a difference between a

02:19:30,660 --> 02:19:35,460
traditional app and the pro ed of

02:19:32,970 --> 02:19:37,920
web-based progressive

02:19:35,460 --> 02:19:41,790
to the allowing or maybe they are

02:19:37,920 --> 02:19:45,360
amateur it always going to yeah it's

02:19:41,790 --> 02:19:47,309
always going to depend on the vendor

02:19:45,360 --> 02:19:51,810
support so whether Apple is going to

02:19:47,309 --> 02:19:54,450
ever add the web authentication API with

02:19:51,810 --> 02:19:54,870
the fingerprints to Safari big question

02:19:54,450 --> 02:19:56,430
mark

02:19:54,870 --> 02:19:59,130
no one knows maybe they will maybe they

02:19:56,430 --> 02:20:00,960
want you know but then you know you may

02:19:59,130 --> 02:20:02,250
have just a news app that you want to do

02:20:00,960 --> 02:20:04,050
that doesn't need a fingerprint reader

02:20:02,250 --> 02:20:07,460
right so it's it's always going to be

02:20:04,050 --> 02:20:07,460
dependent on what you use cases

02:20:08,990 --> 02:20:15,540
okay so let's this thank you slide but

02:20:14,070 --> 02:20:18,030
I'm going to go back to the very very

02:20:15,540 --> 02:20:20,430
first one that's why you find my Twitter

02:20:18,030 --> 02:20:24,090
handle that's right there it was as I

02:20:20,430 --> 02:20:27,120
said removed from the when I change the

02:20:24,090 --> 02:20:28,140
slides doesn't matter so feel free to

02:20:27,120 --> 02:20:30,840
contact me there if you have any

02:20:28,140 --> 02:20:33,900
questions as I said if you have

02:20:30,840 --> 02:20:36,060
questions about becoming a developer

02:20:33,900 --> 02:20:38,490
expert let me know if you have questions

02:20:36,060 --> 02:20:43,020
about cloud Neri let me know before I

02:20:38,490 --> 02:20:44,600
forget I brought you stickers lots of

02:20:43,020 --> 02:20:46,800
stickers I don't know if someone was

02:20:44,600 --> 02:20:52,170
already saw this on Twitter

02:20:46,800 --> 02:20:53,760
I have whoopsie cool cat okay it's a cat

02:20:52,170 --> 02:20:55,740
wearing a hat it's these are all cloud

02:20:53,760 --> 02:21:00,600
and restrictors by the way and I have

02:20:55,740 --> 02:21:02,700
their being unicorns that's the one that

02:21:00,600 --> 02:21:04,170
people I know that's a few people okay

02:21:02,700 --> 02:21:07,740
so I'm going to open this feel free to

02:21:04,170 --> 02:21:10,470
take all of them because my bag was full

02:21:07,740 --> 02:21:13,860
of this so yeah any questions about

02:21:10,470 --> 02:21:15,930
anything tweet me and thank you very

02:21:13,860 --> 02:21:17,400
much for your attention today

02:21:15,930 --> 02:21:19,530
[Applause]

02:21:17,400 --> 02:21:19,530

YouTube URL: https://www.youtube.com/watch?v=iz3xX5vWyUs


