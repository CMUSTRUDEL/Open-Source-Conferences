Title: RustFest Zürich 2017 - Create Rust games easily by Lisa
Publication date: 2017-10-21
Playlist: RustFest Zürich 2017
Description: 
	Ever wanted to make a game in Rust but didn’t know where to start? Then ggez is the framework just for you!

It bundles graphics and audio crates together with a simple API so can get started straight away.

In this talk I want to walk you through the making of a game with ggez from empty boilerplate to publishing a playable game.

About Lisa:
Lisa works in the product team at Travis CI. When not writing frontend code she learns Clojure and Rust, makes games and boycotts centralized social media.
Captions: 
	00:00:12,230 --> 00:00:19,189
hello rust fist thank you for the

00:00:15,680 --> 00:00:20,930
introduction and as you may see behind

00:00:19,189 --> 00:00:24,980
me we're going to talk about creating

00:00:20,930 --> 00:00:28,540
rest games easily but first things first

00:00:24,980 --> 00:00:31,309
I also have a clicker things about me

00:00:28,540 --> 00:00:33,079
just like why why am I talking to you

00:00:31,309 --> 00:00:35,510
why why is this may be of interest to

00:00:33,079 --> 00:00:38,030
you I'm actually a web developer

00:00:35,510 --> 00:00:41,899
travesty I where I write HTML CSS and

00:00:38,030 --> 00:00:43,879
JavaScript and no rust anywhere except

00:00:41,899 --> 00:00:48,020
in our like infrastructure where we'd

00:00:43,879 --> 00:00:49,280
like rust compiles but not on rust I

00:00:48,020 --> 00:00:52,310
also put some stickers outside but I

00:00:49,280 --> 00:00:54,590
think they're all gone so sorry

00:00:52,310 --> 00:00:56,360
what is the like maybe even more

00:00:54,590 --> 00:00:58,610
interesting is that I like playing and

00:00:56,360 --> 00:01:00,410
making video games and like hanging out

00:00:58,610 --> 00:01:02,630
in hackathons or game jams or anything

00:01:00,410 --> 00:01:05,299
that allows me to produce large amounts

00:01:02,630 --> 00:01:07,460
of badly written codes in a short amount

00:01:05,299 --> 00:01:12,500
of time you can find a lot of these

00:01:07,460 --> 00:01:13,880
things I make it up and yeah like this

00:01:12,500 --> 00:01:15,979
morning saw that a lot of people also

00:01:13,880 --> 00:01:18,530
attended West West Kiev this was like my

00:01:15,979 --> 00:01:21,649
first time speaking at a breakfast also

00:01:18,530 --> 00:01:24,829
the event for which I learned rust in

00:01:21,649 --> 00:01:26,149
the first place sorry yeah so this is

00:01:24,829 --> 00:01:28,280
rust fist Eric and I was like super

00:01:26,149 --> 00:01:31,759
excited to be like one of the speakers

00:01:28,280 --> 00:01:32,869
again the at the when I got the emails

00:01:31,759 --> 00:01:34,700
like oh you've been selected as a

00:01:32,869 --> 00:01:37,310
speaker it's like oh my god versus Eric

00:01:34,700 --> 00:01:39,200
it's gonna be so cool and but one of my

00:01:37,310 --> 00:01:42,590
co-workers was like so they're having a

00:01:39,200 --> 00:01:45,759
rust event in in Switzerland and they

00:01:42,590 --> 00:01:45,759
didn't call it rusty fist

00:01:46,060 --> 00:01:50,409
as I missed opportunity but I got you

00:01:50,049 --> 00:01:53,200
covered

00:01:50,409 --> 00:02:00,439
because I made stickers

00:01:53,200 --> 00:02:04,990
[Applause]

00:02:00,439 --> 00:02:06,970
I have 200 we put them here

00:02:04,990 --> 00:02:08,959
limited-edition okay

00:02:06,970 --> 00:02:12,170
[Applause]

00:02:08,959 --> 00:02:13,780
okay so back in April and Kiev I was

00:02:12,170 --> 00:02:17,870
also talking about making games and rust

00:02:13,780 --> 00:02:20,930
but back then I presented a game that I

00:02:17,870 --> 00:02:23,660
used that I implemented using piston but

00:02:20,930 --> 00:02:27,140
doing the research for the other talk i

00:02:23,660 --> 00:02:29,120
already stumbled upon a game making

00:02:27,140 --> 00:02:32,900
framework library engine as you may want

00:02:29,120 --> 00:02:35,739
to call it called GG easy and I can I

00:02:32,900 --> 00:02:38,870
guess what I used for this talk

00:02:35,739 --> 00:02:40,580
and finally enough I was like the

00:02:38,870 --> 00:02:42,200
creator of this is actually present

00:02:40,580 --> 00:02:43,459
which was like a pleasant surprise in

00:02:42,200 --> 00:02:49,160
the break because the game using your

00:02:43,459 --> 00:02:50,660
thing okay so what does GGC it's like

00:02:49,160 --> 00:02:54,140
the name was one of the most confusing

00:02:50,660 --> 00:02:58,519
things for me in the beginning since for

00:02:54,140 --> 00:03:00,829
good games easily obviously it's a

00:02:58,519 --> 00:03:02,630
library for making 2d games it's

00:03:00,829 --> 00:03:06,470
inspired by Louis left to the engine

00:03:02,630 --> 00:03:08,569
which is a very nice API and just like

00:03:06,470 --> 00:03:10,250
creating games for like like packaging

00:03:08,569 --> 00:03:14,269
everything you need for an event I get

00:03:10,250 --> 00:03:15,920
Game Jam which I attend so it was like

00:03:14,269 --> 00:03:17,299
this is like a very cool approach and

00:03:15,920 --> 00:03:19,069
like totally different to the one that

00:03:17,299 --> 00:03:21,319
like piston takes so that was

00:03:19,069 --> 00:03:24,500
interesting so we have events and

00:03:21,319 --> 00:03:26,780
drawing and and sounds all in one crate

00:03:24,500 --> 00:03:28,340
which is great and there's also like a

00:03:26,780 --> 00:03:31,310
module system in the making which like

00:03:28,340 --> 00:03:34,190
also aims to extend these things but

00:03:31,310 --> 00:03:35,600
it's from like I stuck the the issues

00:03:34,190 --> 00:03:37,220
they were like opening and discussions

00:03:35,600 --> 00:03:41,200
going on it's like okay I'm gonna wait a

00:03:37,220 --> 00:03:44,389
bit until I get my hands dirty with that

00:03:41,200 --> 00:03:47,780
okay so when I wrote the proposal for

00:03:44,389 --> 00:03:49,010
this talk I thought okay so what can I

00:03:47,780 --> 00:03:50,359
do different this time so it's not like

00:03:49,010 --> 00:03:51,709
always the same thing just like a

00:03:50,359 --> 00:03:53,720
different game and that's how I was like

00:03:51,709 --> 00:03:55,430
oh I'm gonna do like a little

00:03:53,720 --> 00:03:58,459
walkthrough of like actually just like

00:03:55,430 --> 00:04:00,620
making a game during the talk and just

00:03:58,459 --> 00:04:04,340
like explain you like what the things to

00:04:00,620 --> 00:04:05,720
and just I create a small 2-d game and I

00:04:04,340 --> 00:04:07,759
thought it was like a very good idea to

00:04:05,720 --> 00:04:09,620
like in the in the review field for the

00:04:07,759 --> 00:04:11,509
committee right something like oh we

00:04:09,620 --> 00:04:13,030
kind of do this like maybe semi life I

00:04:11,509 --> 00:04:15,610
drew some copy pasting and

00:04:13,030 --> 00:04:19,389
gonna be fine and again this is totally

00:04:15,610 --> 00:04:22,360
not scary but then in the announcements

00:04:19,389 --> 00:04:24,220
that happened on the rest rest it was

00:04:22,360 --> 00:04:28,180
like like a lice coding session are they

00:04:24,220 --> 00:04:29,490
oh my god this is not what I signed up

00:04:28,180 --> 00:04:31,990
for so there will be it will be

00:04:29,490 --> 00:04:32,650
depending on your definition of life

00:04:31,990 --> 00:04:35,320
coding

00:04:32,650 --> 00:04:36,389
it may not be live coding but I'm doing

00:04:35,320 --> 00:04:40,120
my best

00:04:36,389 --> 00:04:43,630
yeah so if you want to make a game you

00:04:40,120 --> 00:04:46,330
should up front now roughly no but the

00:04:43,630 --> 00:04:48,790
games should be about and inspiration

00:04:46,330 --> 00:04:50,470
can come from like everywhere and like

00:04:48,790 --> 00:04:52,480
things that you think about or like

00:04:50,470 --> 00:04:56,050
things that happened to you and for this

00:04:52,480 --> 00:04:58,390
game I was very much inspired by the

00:04:56,050 --> 00:05:02,860
music video of Beyonce like from hold up

00:04:58,390 --> 00:05:04,419
the music video and like my roommate was

00:05:02,860 --> 00:05:06,940
playing it like on repeat all the time

00:05:04,419 --> 00:05:08,530
and what's so much to me the music video

00:05:06,940 --> 00:05:10,270
quite a couple of times and I'm gonna

00:05:08,530 --> 00:05:12,400
walk you through this and you hopefully

00:05:10,270 --> 00:05:14,229
could share my enthusiasm for it if you

00:05:12,400 --> 00:05:16,270
just Beyonce I mean this very awesome

00:05:14,229 --> 00:05:19,479
yellow dress and the baseball bat and

00:05:16,270 --> 00:05:23,130
she walks down the street and she

00:05:19,479 --> 00:05:27,550
smashes fire hydrants CCTV cameras

00:05:23,130 --> 00:05:29,110
caught various cars and the coolest

00:05:27,550 --> 00:05:31,210
thing that just like I think only

00:05:29,110 --> 00:05:34,600
happens like in the music video is that

00:05:31,210 --> 00:05:36,760
just before the baseball bat hits a

00:05:34,600 --> 00:05:38,770
thing sometimes the music stops for like

00:05:36,760 --> 00:05:41,410
a tiny fraction and that's just like

00:05:38,770 --> 00:05:45,250
plays again when the bat hits like a car

00:05:41,410 --> 00:05:47,560
or something I was like that is a very

00:05:45,250 --> 00:05:47,890
awesome game mechanic I'm just gonna use

00:05:47,560 --> 00:05:51,280
it

00:05:47,890 --> 00:05:54,270
so I created a game

00:05:51,280 --> 00:05:54,270
Beyonce brawls

00:05:55,140 --> 00:05:58,890
so this is just like a small small ship

00:05:57,540 --> 00:06:03,330
so what's happening is that we have like

00:05:58,890 --> 00:06:04,740
like a portrait view game game window

00:06:03,330 --> 00:06:07,470
and we have Beyonce walking down the

00:06:04,740 --> 00:06:10,920
street which she does automatically but

00:06:07,470 --> 00:06:14,970
you will later see and if I press space

00:06:10,920 --> 00:06:16,740
in this in this game she stops and puts

00:06:14,970 --> 00:06:18,510
up the baseball bat and then if I keep a

00:06:16,740 --> 00:06:20,670
space pressed we will have this little

00:06:18,510 --> 00:06:23,910
counter that counts up and to hold up

00:06:20,670 --> 00:06:25,670
appears and then if I release the

00:06:23,910 --> 00:06:28,560
spacebar we're just gonna have to smash

00:06:25,670 --> 00:06:30,630
bush lines and then smash whatever is

00:06:28,560 --> 00:06:32,970
around us there's also like a little

00:06:30,630 --> 00:06:34,830
score thing and like I also calculate

00:06:32,970 --> 00:06:36,810
like track time and in the end I

00:06:34,830 --> 00:06:38,010
calculate like a high score from the

00:06:36,810 --> 00:06:42,000
points that you make and the time that

00:06:38,010 --> 00:06:43,650
it took you but all of this is already

00:06:42,000 --> 00:06:44,040
too much to explain to you in like 30

00:06:43,650 --> 00:06:45,210
minutes

00:06:44,040 --> 00:06:46,620
so we're gonna do like a more

00:06:45,210 --> 00:06:48,710
stripped-down version of this which

00:06:46,620 --> 00:06:51,740
looks like this

00:06:48,710 --> 00:06:54,020
which is you you have the yellow dot and

00:06:51,740 --> 00:06:56,539
in a couple of like red dots to your

00:06:54,020 --> 00:07:00,880
left and right we have the space

00:06:56,539 --> 00:07:00,880
pressing thing and the smoosh lines are

00:07:01,210 --> 00:07:08,320
was like a red red rectangle that where

00:07:04,639 --> 00:07:12,050
we do calculus collision calculation on

00:07:08,320 --> 00:07:14,240
yeah this is what I just said

00:07:12,050 --> 00:07:16,610
you have the Ottoman like self moving

00:07:14,240 --> 00:07:19,310
player some keyword events spying

00:07:16,610 --> 00:07:24,620
smashable things and detecting collision

00:07:19,310 --> 00:07:26,449
so let's start and I have like on so the

00:07:24,620 --> 00:07:29,539
game is up on github already and I

00:07:26,449 --> 00:07:30,949
created a psych like so the full game is

00:07:29,539 --> 00:07:33,979
a master but I created a walkthrough

00:07:30,949 --> 00:07:36,229
branch with commits that are roughly the

00:07:33,979 --> 00:07:38,210
same steps as that we will that I will

00:07:36,229 --> 00:07:44,800
walk you through so if you want to

00:07:38,210 --> 00:07:47,419
follow along you can do some but yeah

00:07:44,800 --> 00:07:51,699
okay so this is quite scary can you see

00:07:47,419 --> 00:07:57,560
this okay that's okay

00:07:51,699 --> 00:08:00,289
okay so brand-new project so what you're

00:07:57,560 --> 00:08:03,080
gonna do is we're just gonna add the

00:08:00,289 --> 00:08:06,349
dependencies to our cargo tunnel which

00:08:03,080 --> 00:08:09,470
is GG easy the the game crate currently

00:08:06,349 --> 00:08:11,240
in 0.3 there is supposed to be a 0.4

00:08:09,470 --> 00:08:12,680
release soon ish and I'm a little bit

00:08:11,240 --> 00:08:16,159
afraid it will break everything but

00:08:12,680 --> 00:08:17,690
you'll see and also like random crate

00:08:16,159 --> 00:08:29,780
because I don't know how to create games

00:08:17,690 --> 00:08:31,280
without randomness safe and then yeah

00:08:29,780 --> 00:08:32,690
it's like oh we need to start somehow

00:08:31,280 --> 00:08:36,020
and this looks like a lot of code but in

00:08:32,690 --> 00:08:38,479
fact I just went to the GG easy RS

00:08:36,020 --> 00:08:40,370
website and then you have like this

00:08:38,479 --> 00:08:42,640
example thing and I can just like copy

00:08:40,370 --> 00:08:42,640
this

00:08:44,160 --> 00:08:53,170
and instead of the birds I'm just gonna

00:08:49,269 --> 00:08:56,560
use main RS and just paste this yeah and

00:08:53,170 --> 00:08:58,000
we just basically do all of the stuff in

00:08:56,560 --> 00:09:03,220
here I hope you can read this I think

00:08:58,000 --> 00:09:06,790
it's okay okay so let's just try cargo

00:09:03,220 --> 00:09:10,779
run and while it fetches our

00:09:06,790 --> 00:09:14,980
dependencies I'm just like I really hope

00:09:10,779 --> 00:09:18,579
this works okay so what is going on we

00:09:14,980 --> 00:09:20,350
get the the GG ez crate we're gonna use

00:09:18,579 --> 00:09:23,819
some of the stuff that did like prepared

00:09:20,350 --> 00:09:26,639
for us like a configuration thing events

00:09:23,819 --> 00:09:28,569
the game result in context which is like

00:09:26,639 --> 00:09:38,829
related to like the drawing that will

00:09:28,569 --> 00:09:44,640
happen sorry Oh like just like Oh mark

00:09:38,829 --> 00:09:46,269
okay like this okay okay thank you okay

00:09:44,640 --> 00:09:48,910
[Music]

00:09:46,269 --> 00:09:50,829
we have graphics we have some primitives

00:09:48,910 --> 00:09:52,779
to actually draw shapes on the thing

00:09:50,829 --> 00:09:55,810
that we can later remove because I will

00:09:52,779 --> 00:09:58,509
use PNG s some tram tracking thing and

00:09:55,810 --> 00:09:59,920
here is like the more the more

00:09:58,509 --> 00:10:01,660
interesting stuff we have one struct

00:09:59,920 --> 00:10:05,069
that is called main states which will

00:10:01,660 --> 00:10:07,389
have all our the the properties that we

00:10:05,069 --> 00:10:09,939
keep track of because they interest us

00:10:07,389 --> 00:10:11,740
in the course of the game in this like

00:10:09,939 --> 00:10:16,149
getting started example it's just like a

00:10:11,740 --> 00:10:17,860
like a little float position X and when

00:10:16,149 --> 00:10:20,199
we implement this like the only thing

00:10:17,860 --> 00:10:24,519
that we do is I give this position X I 0

00:10:20,199 --> 00:10:27,189
point 0 value nothing too fancy the

00:10:24,519 --> 00:10:31,779
interesting stuff is happening in once

00:10:27,189 --> 00:10:34,600
we implement the event handler trade on

00:10:31,779 --> 00:10:36,370
main state where we have like the two

00:10:34,600 --> 00:10:38,350
most important functions update and draw

00:10:36,370 --> 00:10:41,279
which is the things that we know it's

00:10:38,350 --> 00:10:43,629
flightcheck know okay so this is the

00:10:41,279 --> 00:10:45,009
this is the example that i just copied

00:10:43,629 --> 00:10:48,450
from the from the start page it's a

00:10:45,009 --> 00:10:50,009
circle that just like moves to the right

00:10:48,450 --> 00:10:52,689
[Music]

00:10:50,009 --> 00:10:54,780
nothing yeah interesting it wraps around

00:10:52,689 --> 00:10:56,220
which we'll look at in a second

00:10:54,780 --> 00:10:58,410
because here in the update function we

00:10:56,220 --> 00:11:00,180
just say is like okay every time we call

00:10:58,410 --> 00:11:04,230
this so like roughly 60 times a second

00:11:00,180 --> 00:11:07,350
we will increase the exposition by this

00:11:04,230 --> 00:11:10,710
value and then in the draw function

00:11:07,350 --> 00:11:15,570
between the clear and the present we

00:11:10,710 --> 00:11:18,020
actually draw this the circle yeah and

00:11:15,570 --> 00:11:21,090
then we have a main function which then

00:11:18,020 --> 00:11:25,320
essentially it's the config and then we

00:11:21,090 --> 00:11:27,690
load the context and then we put the

00:11:25,320 --> 00:11:31,320
context in with the main state and ran

00:11:27,690 --> 00:11:36,360
the entire thing so yeah I didn't even

00:11:31,320 --> 00:11:37,080
need to learn something about this it

00:11:36,360 --> 00:11:40,860
just works

00:11:37,080 --> 00:11:42,870
okay so we saw our that game looks like

00:11:40,860 --> 00:11:44,310
and it's kind of like not really a game

00:11:42,870 --> 00:11:46,290
it's just like a circle that moves but

00:11:44,310 --> 00:11:48,660
the thing is it Auto moves and we can

00:11:46,290 --> 00:11:54,480
directly use this for our Beyonce

00:11:48,660 --> 00:11:56,400
purposes so I would just like copy over

00:11:54,480 --> 00:12:00,660
some like we just like to find some

00:11:56,400 --> 00:12:02,910
values like how our window should like

00:12:00,660 --> 00:12:04,260
the dimensions of a window so we have

00:12:02,910 --> 00:12:09,380
like more like like a portrait style

00:12:04,260 --> 00:12:11,760
thing and we can put this in the config

00:12:09,380 --> 00:12:13,830
the only thing that you need to change

00:12:11,760 --> 00:12:15,690
is that this needs to be a mutable thing

00:12:13,830 --> 00:12:17,250
then and we just put it like so that the

00:12:15,690 --> 00:12:19,530
the title of the windows as Beyonce

00:12:17,250 --> 00:12:23,220
brawls and we take off the the width and

00:12:19,530 --> 00:12:24,680
the height from the the window and if I

00:12:23,220 --> 00:12:27,120
run this this is fine

00:12:24,680 --> 00:12:30,870
yeah okay so we have like a few

00:12:27,120 --> 00:12:32,640
configuration values and okay that's a

00:12:30,870 --> 00:12:36,120
good start

00:12:32,640 --> 00:12:38,250
I start with the with the player I will

00:12:36,120 --> 00:12:41,280
also just copy over these bunch of

00:12:38,250 --> 00:12:44,400
values that we use so most of these are

00:12:41,280 --> 00:12:46,950
just like eyeballed because it's like

00:12:44,400 --> 00:12:50,130
you can then adjust and see how how

00:12:46,950 --> 00:12:53,180
things work for you I defy player X and

00:12:50,130 --> 00:12:55,380
player Y whereas because we just walk

00:12:53,180 --> 00:12:58,410
downwards X will always stay the same

00:12:55,380 --> 00:13:02,280
and Y would be the the value that we

00:12:58,410 --> 00:13:03,930
update so like move down the axis I have

00:13:02,280 --> 00:13:05,520
like a little value for a speed so we

00:13:03,930 --> 00:13:07,490
can adjust like how fast we want this to

00:13:05,520 --> 00:13:09,380
go and

00:13:07,490 --> 00:13:12,320
then I defined something like which I

00:13:09,380 --> 00:13:15,920
call the hit area which is like the red

00:13:12,320 --> 00:13:18,050
more rectangle that will then we detect

00:13:15,920 --> 00:13:22,279
collision on or like the the swoosh of

00:13:18,050 --> 00:13:24,290
the baseball bat so to say and and these

00:13:22,279 --> 00:13:26,660
three things holding speed holding time

00:13:24,290 --> 00:13:28,339
in and holding time ax could probably

00:13:26,660 --> 00:13:32,000
have nicer names but they are supposed

00:13:28,339 --> 00:13:34,070
to be keep track of the the time that I

00:13:32,000 --> 00:13:39,170
keep the spacebar pressed so if I press

00:13:34,070 --> 00:13:42,050
space I will count up and 0.3 until I

00:13:39,170 --> 00:13:43,940
heat until I reach the minimum holding

00:13:42,050 --> 00:13:46,190
time which is after like this is when

00:13:43,940 --> 00:13:49,610
the hold up appears and after like

00:13:46,190 --> 00:13:54,770
during which I can collect it and

00:13:49,610 --> 00:13:56,570
collect the position thing until I reach

00:13:54,770 --> 00:13:58,880
the maximum limit and then I just like

00:13:56,570 --> 00:14:02,089
then you have this like window basically

00:13:58,880 --> 00:14:05,480
of like this where you can actually do

00:14:02,089 --> 00:14:07,490
the thing this whoosh you might wonder

00:14:05,480 --> 00:14:09,080
it's like oh but this is like not

00:14:07,490 --> 00:14:11,390
actually time you're just like counting

00:14:09,080 --> 00:14:13,250
up a value like on every iteration of

00:14:11,390 --> 00:14:15,440
update which is true so it's like not

00:14:13,250 --> 00:14:17,120
actually time related and you will see

00:14:15,440 --> 00:14:20,209
significant differences depending on

00:14:17,120 --> 00:14:22,339
like what computer you run the Sun but

00:14:20,209 --> 00:14:25,330
for the purpose of this game I think

00:14:22,339 --> 00:14:25,330
it's totally fine okay

00:14:26,120 --> 00:14:33,680
so let's create a struct it can make use

00:14:30,680 --> 00:14:36,830
of some of these values so I have a

00:14:33,680 --> 00:14:41,930
struct player the player has an accent

00:14:36,830 --> 00:14:44,540
on why I use graphics graphics image for

00:14:41,930 --> 00:14:48,589
both the sprite and the hit area images

00:14:44,540 --> 00:14:51,410
later will be just like a colored PNG

00:14:48,589 --> 00:14:53,270
but later on you kind of like have

00:14:51,410 --> 00:14:55,130
Beyonce and the baseball bat and smoosh

00:14:53,270 --> 00:14:58,640
and stuff

00:14:55,130 --> 00:15:00,860
I will also define H X X Y and its width

00:14:58,640 --> 00:15:03,829
and height for the hitbox so that the

00:15:00,860 --> 00:15:07,149
hit area and because lots of calculation

00:15:03,829 --> 00:15:10,640
things and then I feel holding which

00:15:07,149 --> 00:15:14,500
will keep which I would use for the

00:15:10,640 --> 00:15:17,690
holding time to keep track of that and

00:15:14,500 --> 00:15:19,740
implementing this looks something like

00:15:17,690 --> 00:15:27,840
this

00:15:19,740 --> 00:15:32,490
where's my thing just put this here okay

00:15:27,840 --> 00:15:36,360
so we have a new player and yes I use

00:15:32,490 --> 00:15:37,950
one rep I'm sorry and we just like

00:15:36,360 --> 00:15:39,450
initiate the things was like the

00:15:37,950 --> 00:15:43,080
constants that we have holding will be

00:15:39,450 --> 00:15:44,310
zero point zero in the update function

00:15:43,080 --> 00:15:49,800
that we will call in the maintenance

00:15:44,310 --> 00:15:51,690
update we basically check if if self

00:15:49,800 --> 00:15:55,290
holding is zero point zero which means

00:15:51,690 --> 00:15:57,000
we're not holding this we will use to

00:15:55,290 --> 00:15:58,470
like update the players Y and also the

00:15:57,000 --> 00:16:01,980
hitbox wise that we have like them

00:15:58,470 --> 00:16:05,100
moving downwards and in the draw

00:16:01,980 --> 00:16:07,470
function we just like get the

00:16:05,100 --> 00:16:09,210
coordinates put them in the point thing

00:16:07,470 --> 00:16:11,190
because it's nicer when we draw it and

00:16:09,210 --> 00:16:14,570
we just like draw the sprite that we

00:16:11,190 --> 00:16:16,920
defined and if we are indeed holding

00:16:14,570 --> 00:16:19,410
like our holding value is over the

00:16:16,920 --> 00:16:23,790
threshold of 4.0 that I defined earlier

00:16:19,410 --> 00:16:28,860
and we will also draw the hitbox the hit

00:16:23,790 --> 00:16:30,780
area okay so if I save this and run run

00:16:28,860 --> 00:16:33,510
we should already get something that

00:16:30,780 --> 00:16:41,670
moves it's not moving

00:16:33,510 --> 00:16:43,530
ah I know why except oh yeah I need this

00:16:41,670 --> 00:16:46,320
event thing but I think for later I just

00:16:43,530 --> 00:16:47,700
put it on the slide because I need to

00:16:46,320 --> 00:16:52,380
put the player into the main stage

00:16:47,700 --> 00:16:55,620
obviously okay

00:16:52,380 --> 00:17:01,020
so I'll remove the position X and put

00:16:55,620 --> 00:17:05,070
the player in here and then in the the

00:17:01,020 --> 00:17:07,080
main States new I will just so instead

00:17:05,070 --> 00:17:08,550
of like just position X we'd now create

00:17:07,080 --> 00:17:13,020
a new player and give the player of the

00:17:08,550 --> 00:17:14,550
context and then we can call cells

00:17:13,020 --> 00:17:22,339
player update instead of like the

00:17:14,550 --> 00:17:22,339
position update and draw

00:17:24,350 --> 00:17:33,679
no that's the same what okay let's try

00:17:31,770 --> 00:17:35,850
this again

00:17:33,679 --> 00:17:38,309
we get a few warnings because I'm not

00:17:35,850 --> 00:17:44,429
okay I know what this is this is the

00:17:38,309 --> 00:17:50,360
unrep that's biting me luckily enough

00:17:44,429 --> 00:17:56,130
rest so it's the pngs that I'm trying to

00:17:50,360 --> 00:17:57,390
draw are not actually there yet so I put

00:17:56,130 --> 00:18:00,059
them in the resources folder in my

00:17:57,390 --> 00:18:03,419
example run through things I'm just

00:18:00,059 --> 00:18:08,160
gonna put them in here and try this

00:18:03,419 --> 00:18:10,620
again I know and I also I should read my

00:18:08,160 --> 00:18:12,990
own readme is better because I also need

00:18:10,620 --> 00:18:14,669
to put this in the target debug thing

00:18:12,990 --> 00:18:16,559
because for path reasons that I couldn't

00:18:14,669 --> 00:18:18,490
figure out but okay this should work

00:18:16,559 --> 00:18:19,800
okay so we have Beyonce

00:18:18,490 --> 00:18:23,990
[Music]

00:18:19,800 --> 00:18:31,149
[Applause]

00:18:23,990 --> 00:18:33,620
and this is all there is right now so

00:18:31,149 --> 00:18:37,820
yeah this is kind of boring even though

00:18:33,620 --> 00:18:39,770
it moves which is exciting that they

00:18:37,820 --> 00:18:40,340
implement some more functions on our

00:18:39,770 --> 00:18:51,470
play

00:18:40,340 --> 00:18:55,370
for example hold and unhold okay so

00:18:51,470 --> 00:18:57,350
these are just like functions that we

00:18:55,370 --> 00:19:00,860
will later call when I press the space

00:18:57,350 --> 00:19:04,330
key so if you say if like our holding

00:19:00,860 --> 00:19:07,279
thing is more than zero point zero so

00:19:04,330 --> 00:19:10,370
there's holding like pressing going on

00:19:07,279 --> 00:19:13,159
on the button and we'd like count up the

00:19:10,370 --> 00:19:16,100
holding thing but in case we reached

00:19:13,159 --> 00:19:16,429
like the maximum limit I will call on

00:19:16,100 --> 00:19:20,090
hold

00:19:16,429 --> 00:19:23,029
so basically reset and then if we're

00:19:20,090 --> 00:19:25,279
like yeah this would reset it to as you

00:19:23,029 --> 00:19:27,380
can see here in the on hold function we

00:19:25,279 --> 00:19:30,649
set it to zero point zero and this is

00:19:27,380 --> 00:19:32,059
also if we call hold in fickle hold in

00:19:30,649 --> 00:19:33,620
the first place and the value is zero

00:19:32,059 --> 00:19:38,059
point zero we go into this branch which

00:19:33,620 --> 00:19:40,250
will then start increasing the hold and

00:19:38,059 --> 00:19:44,330
because we need to call it at some point

00:19:40,250 --> 00:19:46,610
I can define for example a custom like

00:19:44,330 --> 00:19:51,529
the key down event and this goes into

00:19:46,610 --> 00:19:58,190
the event handler thing for the main

00:19:51,529 --> 00:20:01,700
state Emacs what's happening okay

00:19:58,190 --> 00:20:04,279
key down event comes from ggz we get a

00:20:01,700 --> 00:20:06,980
key code and we also get modifier keys

00:20:04,279 --> 00:20:08,960
and I think this the last third argument

00:20:06,980 --> 00:20:11,090
is like repeat or something but we don't

00:20:08,960 --> 00:20:12,770
need this or I don't need this in my

00:20:11,090 --> 00:20:15,470
case and then I just gonna match over

00:20:12,770 --> 00:20:20,510
the key code match for space and then I

00:20:15,470 --> 00:20:25,279
call self player hold and we're gonna do

00:20:20,510 --> 00:20:28,010
this again and now if I press space it

00:20:25,279 --> 00:20:30,020
stops and then the thing appears and

00:20:28,010 --> 00:20:31,490
then you see this it's like because I

00:20:30,020 --> 00:20:35,029
never released there is no release event

00:20:31,490 --> 00:20:36,980
so we cannot go on so we should have

00:20:35,029 --> 00:20:41,630
something that I

00:20:36,980 --> 00:20:45,890
let's go on and this would be the key

00:20:41,630 --> 00:20:48,049
down event which is kind of the same but

00:20:45,890 --> 00:20:50,510
and be much the same thing but instead

00:20:48,049 --> 00:20:53,330
of whole be called unhold which will

00:20:50,510 --> 00:20:55,360
resets the holding value and that should

00:20:53,330 --> 00:20:58,309
that should be it

00:20:55,360 --> 00:21:01,880
so I can press space and I release it

00:20:58,309 --> 00:21:05,720
and then we go on and if I press it

00:21:01,880 --> 00:21:07,549
longer yeah okay so this works so we

00:21:05,720 --> 00:21:09,290
have sort of like our little mechanism

00:21:07,549 --> 00:21:14,929
of like counting up waiting a bit before

00:21:09,290 --> 00:21:16,580
something happens and what's next we

00:21:14,929 --> 00:21:19,960
need things that we can smash obviously

00:21:16,580 --> 00:21:26,510
I start with a couple of values that I

00:21:19,960 --> 00:21:28,730
need so I saw or maybe remember from the

00:21:26,510 --> 00:21:30,380
jiff I have I just lined all the things

00:21:28,730 --> 00:21:34,730
up in either on the left or the right

00:21:30,380 --> 00:21:36,919
side and those two points on like the

00:21:34,730 --> 00:21:39,500
x-axis are just like hard-coded like I

00:21:36,919 --> 00:21:42,290
just chose them which seems right and

00:21:39,500 --> 00:21:44,720
look kind of okay I have two things

00:21:42,290 --> 00:21:47,450
called the spawn factor which is like

00:21:44,720 --> 00:21:49,100
the area which is smaller than like the

00:21:47,450 --> 00:21:50,270
overall window heights but just like a

00:21:49,100 --> 00:21:52,340
little bit less because I don't want

00:21:50,270 --> 00:21:54,309
them to be like two up like up too high

00:21:52,340 --> 00:21:56,870
or up too low and just like looks wonky

00:21:54,309 --> 00:21:58,780
I have smashed builds per screen so you

00:21:56,870 --> 00:22:03,169
can say us like how many things you want

00:21:58,780 --> 00:22:06,380
to be like to have generated and then

00:22:03,169 --> 00:22:09,260
what I also do is I just use a the same

00:22:06,380 --> 00:22:11,240
width for all the smashable so in the in

00:22:09,260 --> 00:22:13,100
the finished game I had like a car and

00:22:11,240 --> 00:22:14,540
the higher end and the CCTV camera and

00:22:13,100 --> 00:22:17,030
they look like they have different

00:22:14,540 --> 00:22:19,250
widths but in fact I just like treat

00:22:17,030 --> 00:22:20,840
them all as the same thing because it's

00:22:19,250 --> 00:22:23,840
easier and I don't have to like position

00:22:20,840 --> 00:22:28,640
things like I just for simplification

00:22:23,840 --> 00:22:36,770
reasons okay so how does a struct look

00:22:28,640 --> 00:22:39,919
like we just have like x and y values

00:22:36,770 --> 00:22:44,600
that we then like fill in we have an

00:22:39,919 --> 00:22:46,280
active flag that I use a lot which is

00:22:44,600 --> 00:22:48,020
just like we will only like once you

00:22:46,280 --> 00:22:49,669
basically hit a thing it will no longer

00:22:48,020 --> 00:22:50,960
be active and we stopped drawing it and

00:22:49,669 --> 00:22:54,380
we like count up score

00:22:50,960 --> 00:22:56,299
or whatever and I also like the little

00:22:54,380 --> 00:22:59,240
graphic that's just read but it could be

00:22:56,299 --> 00:23:00,590
lekar or a hydrant and you can depending

00:22:59,240 --> 00:23:05,270
on what kind of smashable thing you have

00:23:00,590 --> 00:23:07,580
this would be different I have here we

00:23:05,270 --> 00:23:13,340
also need randomness I'm just gonna put

00:23:07,580 --> 00:23:17,980
this up here so yeah randomness because

00:23:13,340 --> 00:23:29,630
it's essential okay let's implement this

00:23:17,980 --> 00:23:32,830
thing okay so the new function is kind

00:23:29,630 --> 00:23:36,140
of yeah let's just walk through it a bit

00:23:32,830 --> 00:23:38,899
for the wine like the value of the

00:23:36,140 --> 00:23:41,539
y-axis I just chose to like generate

00:23:38,899 --> 00:23:43,250
some random thing that is in the spawn

00:23:41,539 --> 00:23:45,230
factor and I also still have this like

00:23:43,250 --> 00:23:46,340
plus 100 to like move it down even a

00:23:45,230 --> 00:23:47,690
little further it should probably also

00:23:46,340 --> 00:23:51,830
put this in one of the configuration

00:23:47,690 --> 00:23:54,350
values for X I just just like generating

00:23:51,830 --> 00:23:55,880
a boolean so and then match it to true

00:23:54,350 --> 00:23:57,980
or false and then aside like left and

00:23:55,880 --> 00:23:59,390
right so like it's like and sometimes if

00:23:57,980 --> 00:24:01,100
these like weird occurrences where like

00:23:59,390 --> 00:24:02,539
literally everything is on either the

00:24:01,100 --> 00:24:06,940
left or the right sides like this

00:24:02,539 --> 00:24:06,940
doesn't seem right but it's okay

00:24:06,950 --> 00:24:14,120
the sprite is a new sprite yeah and then

00:24:11,330 --> 00:24:20,120
in draw which is kind of this should

00:24:14,120 --> 00:24:22,549
probably go into this so I check if if

00:24:20,120 --> 00:24:25,640
the thing is still active only then we

00:24:22,549 --> 00:24:27,320
draw and if it's not active we don't do

00:24:25,640 --> 00:24:29,080
anything okay

00:24:27,320 --> 00:24:31,880
[Music]

00:24:29,080 --> 00:24:33,590
so as with the player we also need to

00:24:31,880 --> 00:24:37,970
like let our mainstay know about that we

00:24:33,590 --> 00:24:42,890
have a thing that we can smash so in our

00:24:37,970 --> 00:24:45,140
main state struct yeah we also have

00:24:42,890 --> 00:24:48,080
smashed balls and we don't just have one

00:24:45,140 --> 00:24:51,100
but we have multiple so I say like oh we

00:24:48,080 --> 00:24:51,100
need a vector of smashable

00:24:51,460 --> 00:25:00,549
and when we create a new game state I

00:24:57,220 --> 00:25:02,350
just create an empty vector and then say

00:25:00,549 --> 00:25:04,559
basically in the range of like zero to

00:25:02,350 --> 00:25:07,029
how many smashed balls on one per screen

00:25:04,559 --> 00:25:18,010
push nice Mashable's into this vector

00:25:07,029 --> 00:25:21,279
and then so yeah and then the only thing

00:25:18,010 --> 00:25:24,820
left to do is to draw things and that

00:25:21,279 --> 00:25:27,279
goes into draw I will draw the smash

00:25:24,820 --> 00:25:31,659
before the player so that the hitbox

00:25:27,279 --> 00:25:34,149
will then overlay the vegetables okay so

00:25:31,659 --> 00:25:41,049
let's see how this looks never made a

00:25:34,149 --> 00:25:42,580
mistake oh we have things and when I if

00:25:41,049 --> 00:25:45,390
I not press space you should see that

00:25:42,580 --> 00:25:48,730
the hitbox will eventually collide with

00:25:45,390 --> 00:25:52,559
things on the left of the right side but

00:25:48,730 --> 00:25:55,840
we don't have that yet so let's add that

00:25:52,559 --> 00:25:57,850
and there's like one place where I would

00:25:55,840 --> 00:26:00,070
call collision there's probably and that

00:25:57,850 --> 00:26:03,039
like a thing that is better suited but I

00:26:00,070 --> 00:26:05,890
would call it in the key event so if we

00:26:03,039 --> 00:26:09,460
release just before we reset I would

00:26:05,890 --> 00:26:13,419
check collision and collision itself I

00:26:09,460 --> 00:26:22,929
decided to implement on the main state

00:26:13,419 --> 00:26:25,539
as well so what happens

00:26:22,929 --> 00:26:28,330
so I release the key we call collision

00:26:25,539 --> 00:26:30,070
and then we're actually checking like if

00:26:28,330 --> 00:26:31,899
if the whole thing like if we're still

00:26:30,070 --> 00:26:34,000
holding the key and they're just over

00:26:31,899 --> 00:26:36,309
the minimum time because otherwise we

00:26:34,000 --> 00:26:37,929
had already reset it I'm gonna iterate

00:26:36,309 --> 00:26:41,200
over all this Mashable's that we have

00:26:37,929 --> 00:26:44,230
check if they're active then do the nice

00:26:41,200 --> 00:26:46,659
geographical to the boxes intersect

00:26:44,230 --> 00:26:49,750
thing which is just like very verbose

00:26:46,659 --> 00:26:51,460
could probably perfecter that and if

00:26:49,750 --> 00:26:53,890
they do intersect I said the active like

00:26:51,460 --> 00:26:56,080
on this mesh filter Falls I could also

00:26:53,890 --> 00:26:59,320
play a destruction sound I already

00:26:56,080 --> 00:27:02,350
picked them in the sound API is also

00:26:59,320 --> 00:27:04,990
really nice or like count up score or

00:27:02,350 --> 00:27:08,200
all these things but I would just

00:27:04,990 --> 00:27:09,010
make them go away and let's see if this

00:27:08,200 --> 00:27:33,720
works

00:27:09,010 --> 00:27:41,440
what main stage but oh true

00:27:33,720 --> 00:27:46,080
wrong line thank you okay so let's see

00:27:41,440 --> 00:27:48,549
if i press this yeah and this is like

00:27:46,080 --> 00:27:55,149
and you see I'm very generous with the

00:27:48,549 --> 00:27:59,260
implementation okay so that was it for

00:27:55,149 --> 00:28:04,299
this let's go back to slides yeah we're

00:27:59,260 --> 00:28:06,820
done thank you for their force but yes

00:28:04,299 --> 00:28:09,010
so things that I did not cover because

00:28:06,820 --> 00:28:11,470
this yeah and there's an API for like

00:28:09,010 --> 00:28:13,779
writing text to the screen and like all

00:28:11,470 --> 00:28:15,870
these timing functions that I'd like way

00:28:13,779 --> 00:28:18,460
better suited to actually time things

00:28:15,870 --> 00:28:19,750
just like scoring you can like have this

00:28:18,460 --> 00:28:22,630
depend on like what kinds of things you

00:28:19,750 --> 00:28:25,600
want to smash it's a lot of fun drawing

00:28:22,630 --> 00:28:28,090
pngs in making those because it makes

00:28:25,600 --> 00:28:29,350
things cute but like there's also a

00:28:28,090 --> 00:28:33,399
certain aesthetic to like just

00:28:29,350 --> 00:28:34,690
rectangles I think sounds you can like

00:28:33,399 --> 00:28:36,279
play them it's like really just like

00:28:34,690 --> 00:28:38,940
like lot of sound play a sound stab a

00:28:36,279 --> 00:28:41,500
sound and then you can play around with

00:28:38,940 --> 00:28:43,480
with the well use of just like how many

00:28:41,500 --> 00:28:45,130
things you want to create and like how

00:28:43,480 --> 00:28:48,850
like how generous you want to be with

00:28:45,130 --> 00:28:51,960
the collision and those values and yeah

00:28:48,850 --> 00:28:55,320
but I like this as an exercise to you

00:28:51,960 --> 00:29:05,530
and that is actually

00:28:55,320 --> 00:29:05,530

YouTube URL: https://www.youtube.com/watch?v=str_mex__0M


