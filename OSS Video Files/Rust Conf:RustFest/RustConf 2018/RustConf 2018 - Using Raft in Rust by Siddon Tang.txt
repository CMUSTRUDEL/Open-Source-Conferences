Title: RustConf 2018 - Using Raft in Rust by Siddon Tang
Publication date: 2018-09-06
Playlist: RustConf 2018
Description: 
	RustConf 2018 - Using Raft in Rust by Siddon Tang

The Raft consensus algorithm has been widely adopted in many companies to build a consistent distributed services that are highly available. This topic is about how we implemented Raft in rust to support TiKV, an open-Source distributed transactional Key-Value store. In this topic, I will first give a brief introduction about Raft, and then talk about our Raft implementation in Rust, and in the end, I will show you how to use Raft in Rust to build a simple distributed Key-Value database.
Captions: 
	00:00:00,410 --> 00:00:21,650
[Music]

00:00:14,800 --> 00:00:24,860
okay can you hear me clear oh oh thank

00:00:21,650 --> 00:00:28,340
you very glad to see you here and it's

00:00:24,860 --> 00:00:30,770
not easy I have a long journey flying

00:00:28,340 --> 00:00:33,440
from Tyler to the San Francisco and

00:00:30,770 --> 00:00:37,340
there's some Francesa go to tea to

00:00:33,440 --> 00:00:39,800
Poland so very glad to see you here and

00:00:37,340 --> 00:00:42,559
today I will talk about how we're using

00:00:39,800 --> 00:00:49,660
rough-in Ross already put it here load

00:00:42,559 --> 00:00:52,579
rock free oh great amazing two men and

00:00:49,660 --> 00:00:56,300
before I start I will let me introduce

00:00:52,579 --> 00:00:58,190
myself my name is Lu Tung even call me

00:00:56,300 --> 00:01:01,129
Satan and allow and the chief engineer

00:00:58,190 --> 00:01:04,640
of pink hair and we have been developing

00:01:01,129 --> 00:01:08,390
a next-generation hybrid transaction and

00:01:04,640 --> 00:01:11,899
LED database we koi pidb maybe

00:01:08,390 --> 00:01:12,920
someone Joey and then based on the hi

00:01:11,899 --> 00:01:15,880
Phoebe

00:01:12,920 --> 00:01:18,380
we have build a distributed

00:01:15,880 --> 00:01:21,280
transactional criminal database we call

00:01:18,380 --> 00:01:24,260
it high kv and is everything in rust and

00:01:21,280 --> 00:01:26,299
in my spare tire and we also open source

00:01:24,260 --> 00:01:28,700
Nara and have developed some open

00:01:26,299 --> 00:01:33,020
sources like Russell Crowe issues and

00:01:28,700 --> 00:01:35,990
that was rough eyes and we which I will

00:01:33,020 --> 00:01:37,880
talk about rate the Roth is and the java

00:01:35,990 --> 00:01:42,579
sea ice and the cold Mexico the next be

00:01:37,880 --> 00:01:45,650
is a cetera that's what today's this is

00:01:42,579 --> 00:01:50,570
agenda for this talk I have four parts

00:01:45,650 --> 00:01:52,970
and at first I will talk about why we

00:01:50,570 --> 00:01:55,159
needed to use a raft and at the end I

00:01:52,970 --> 00:01:59,119
will give a brief introduction about

00:01:55,159 --> 00:02:02,479
raft and there I will show you how we

00:01:59,119 --> 00:02:04,909
use rough in a row in the RUS sorry and

00:02:02,479 --> 00:02:08,299
I didn't yell I will talk about

00:02:04,909 --> 00:02:12,950
something about our product TV ok let's

00:02:08,299 --> 00:02:16,310
begin the first is what what we use raft

00:02:12,950 --> 00:02:20,709
and assume that everybody here we want

00:02:16,310 --> 00:02:24,709
to build database or story server so

00:02:20,709 --> 00:02:26,410
maybe the first simple thing is that you

00:02:24,709 --> 00:02:29,620
use one load and

00:02:26,410 --> 00:02:32,620
here you can let me use Mexico or post a

00:02:29,620 --> 00:02:34,840
critical and that's okay and the client

00:02:32,620 --> 00:02:36,640
read it are two days ago and currently

00:02:34,840 --> 00:02:39,310
right read the data from the road and

00:02:36,640 --> 00:02:42,160
the it works well but you can see the

00:02:39,310 --> 00:02:46,420
load is only one load and he's had a

00:02:42,160 --> 00:02:50,230
single point so even though is crashed

00:02:46,420 --> 00:02:55,090
and the service is unavailable horrible

00:02:50,230 --> 00:02:56,170
and furthermore if the load can't be

00:02:55,090 --> 00:02:59,020
rock you're horrible

00:02:56,170 --> 00:03:02,290
so you lose war your data it's called

00:02:59,020 --> 00:03:07,150
accept low in some database so how can

00:03:02,290 --> 00:03:11,350
we solve this problem and mostly here we

00:03:07,150 --> 00:03:16,990
need replication and and as you can see

00:03:11,350 --> 00:03:19,900
here we add a new slave you load and we

00:03:16,990 --> 00:03:22,300
call the overload the master and the new

00:03:19,900 --> 00:03:25,990
load of a slave lacked common my stock

00:03:22,300 --> 00:03:28,120
pot and we mostly for better proponents

00:03:25,990 --> 00:03:30,490
we use a synchronized replication and

00:03:28,120 --> 00:03:33,160
when the client right attitude on master

00:03:30,490 --> 00:03:35,980
law and the master repair you can okay

00:03:33,160 --> 00:03:36,490
the data received and the enter the

00:03:35,980 --> 00:03:39,880
master

00:03:36,490 --> 00:03:42,900
we are replicated the data from to the

00:03:39,880 --> 00:03:45,700
slave synchronously this work well in

00:03:42,900 --> 00:03:48,160
most over by circle architecture will

00:03:45,700 --> 00:03:50,290
use this replication mode but as you can

00:03:48,160 --> 00:03:52,600
see that a single replication has a

00:03:50,290 --> 00:03:55,360
problem is that because the replica is a

00:03:52,600 --> 00:03:58,030
sink rollers so sometimes the slave

00:03:55,360 --> 00:04:02,230
can't have the latest data if the master

00:03:58,030 --> 00:04:05,230
is done and we the slave is promoted

00:04:02,230 --> 00:04:07,300
call you master and we found that that's

00:04:05,230 --> 00:04:10,690
Lee book the slave can't have the lowest

00:04:07,300 --> 00:04:12,970
data so as this car the slave had one

00:04:10,690 --> 00:04:15,600
had eight and a peep but we lost three

00:04:12,970 --> 00:04:17,950
and at least do some acceptable

00:04:15,600 --> 00:04:18,910
acceptable in some critical database

00:04:17,950 --> 00:04:25,270
LRO's

00:04:18,910 --> 00:04:27,850
so how can we do so this problem and we

00:04:25,270 --> 00:04:29,169
caught here mostly we use a synchronized

00:04:27,850 --> 00:04:32,710
replication

00:04:29,169 --> 00:04:35,169
unlike a sinkhole at replication uses in

00:04:32,710 --> 00:04:37,660
collide and the master must guarantee

00:04:35,169 --> 00:04:38,400
that the data has been replicated at

00:04:37,660 --> 00:04:40,500
your slave

00:04:38,400 --> 00:04:44,970
then the masa will reply to the client

00:04:40,500 --> 00:04:47,130
at the data is save so uses this way we

00:04:44,970 --> 00:04:51,030
can guarantee that our data is safety

00:04:47,130 --> 00:04:53,280
even the master is crashed the nutria

00:04:51,030 --> 00:04:55,500
slave is promote your new master and we

00:04:53,280 --> 00:04:59,010
can know that we have world-eater Lewis

00:04:55,500 --> 00:05:01,169
theta with countless our data guys had a

00:04:59,010 --> 00:05:03,540
lot of problem is that as you can see we

00:05:01,169 --> 00:05:05,790
have only two loads and if the matter

00:05:03,540 --> 00:05:08,699
you don't the slave promote your new

00:05:05,790 --> 00:05:12,240
master and there used to be so do one

00:05:08,699 --> 00:05:16,350
load when we meet single o the single

00:05:12,240 --> 00:05:20,910
point of problem again so how can we

00:05:16,350 --> 00:05:23,100
solve this problem and mostly we can't

00:05:20,910 --> 00:05:29,010
use only two load we need Marquis loss

00:05:23,100 --> 00:05:32,910
and most of those early if we want one

00:05:29,010 --> 00:05:36,180
node cubic be available with the onliest

00:05:32,910 --> 00:05:38,729
reload you know maybe the quorum and as

00:05:36,180 --> 00:05:42,479
you can see that for one master we need

00:05:38,729 --> 00:05:45,690
a queue slaves and here we because

00:05:42,479 --> 00:05:48,660
recipe as i said before that we use a

00:05:45,690 --> 00:05:52,650
synchronized replication but there's a

00:05:48,660 --> 00:05:54,380
trade-off here because for the better

00:05:52,650 --> 00:05:57,300
performance and high availability

00:05:54,380 --> 00:06:00,270
because using synchronous replication

00:05:57,300 --> 00:06:02,760
can reduce performance so sometimes

00:06:00,270 --> 00:06:05,340
there we use on a quorum replication

00:06:02,760 --> 00:06:07,830
which means that if the master found

00:06:05,340 --> 00:06:10,650
that the majority of the server's has

00:06:07,830 --> 00:06:13,229
already received replicated the same

00:06:10,650 --> 00:06:13,740
data in the casing that the data had pc

00:06:13,229 --> 00:06:16,320
e

00:06:13,740 --> 00:06:18,169
the say that you see and we can sink

00:06:16,320 --> 00:06:21,810
that that they tell you the consistency

00:06:18,169 --> 00:06:23,220
as you can see that the master just only

00:06:21,810 --> 00:06:26,580
replicas to the data

00:06:23,220 --> 00:06:28,740
kula west load and i think that the data

00:06:26,580 --> 00:06:34,889
had been saved into load and as facing

00:06:28,740 --> 00:06:37,590
that a data is saved so and a lot of

00:06:34,889 --> 00:06:39,840
problem comes is that when the master

00:06:37,590 --> 00:06:43,199
because now we have a Cyrillic hard or

00:06:39,840 --> 00:06:46,289
even more we have more replicas and now

00:06:43,199 --> 00:06:48,120
is the master you Tom which one which

00:06:46,289 --> 00:06:50,190
still duel either to promote cure you

00:06:48,120 --> 00:06:53,250
master

00:06:50,190 --> 00:06:55,830
obvious really and we needed to promote

00:06:53,250 --> 00:06:58,680
sleep which had the lowest data but how

00:06:55,830 --> 00:07:03,480
can we know that big asleep had a Lewis

00:06:58,680 --> 00:07:05,670
data so this is our one problem I live

00:07:03,480 --> 00:07:08,610
here and the other promo is that the

00:07:05,670 --> 00:07:11,280
cola we have market replicas and we are

00:07:08,610 --> 00:07:14,460
you a distributed system because we are

00:07:11,280 --> 00:07:16,500
distributed system and HP each load is a

00:07:14,460 --> 00:07:18,690
community with other loads through the

00:07:16,500 --> 00:07:22,260
letter work because we are a letter and

00:07:18,690 --> 00:07:27,060
the letter work can be broken so we meet

00:07:22,260 --> 00:07:29,460
some narrow ladder really and here you

00:07:27,060 --> 00:07:31,650
can see that the old matter is isolated

00:07:29,460 --> 00:07:34,800
from other Cutler sorry

00:07:31,650 --> 00:07:37,140
the older muscle here and the new matter

00:07:34,800 --> 00:07:41,880
report under the loose matter is

00:07:37,140 --> 00:07:45,390
promoted so here we exceed to matter one

00:07:41,880 --> 00:07:49,260
old still master and a new master and at

00:07:45,390 --> 00:07:53,250
this time unlucky some cry so do crack

00:07:49,260 --> 00:07:55,740
yo the master so we meet up a little

00:07:53,250 --> 00:07:57,350
problem that can this clan so do real

00:07:55,740 --> 00:08:03,330
data from this matter

00:07:57,350 --> 00:08:08,040
yes Lola and assume that we now we have

00:08:03,330 --> 00:08:13,260
a key we live what we live a with value

00:08:08,040 --> 00:08:17,220
1 in the master so if the clan reader a

00:08:13,260 --> 00:08:21,570
with value 1 is ok but then later if we

00:08:17,220 --> 00:08:26,040
write a new value to this key a and then

00:08:21,570 --> 00:08:29,520
if the current reader read the data from

00:08:26,040 --> 00:08:30,150
old master still read a with with the

00:08:29,520 --> 00:08:33,360
value 1

00:08:30,150 --> 00:08:37,560
it can't be accessible because it break

00:08:33,360 --> 00:08:40,800
the data consistency and become other we

00:08:37,560 --> 00:08:43,979
read reread or we write a new data but

00:08:40,800 --> 00:08:47,430
can't read us their data and it can't

00:08:43,979 --> 00:08:50,850
XML in that in some critical database

00:08:47,430 --> 00:08:54,990
narrows so how can we solve this problem

00:08:50,850 --> 00:08:57,000
as you can see I list many problems from

00:08:54,990 --> 00:09:02,550
the one node and the to the Marquis load

00:08:57,000 --> 00:09:05,820
and luckily we have

00:09:02,550 --> 00:09:08,450
the joint sorry we have the console

00:09:05,820 --> 00:09:10,740
algorithm and the consider of the

00:09:08,450 --> 00:09:15,180
algorithm can help us to solve this

00:09:10,740 --> 00:09:17,690
problem I said yeah I said a bar and in

00:09:15,180 --> 00:09:21,270
the current work there are two popular

00:09:17,690 --> 00:09:24,240
comes in the algorithm y axis and the

00:09:21,270 --> 00:09:26,790
other is rot and here we only talk about

00:09:24,240 --> 00:09:29,430
a bra because I think the raft is more

00:09:26,790 --> 00:09:32,340
simple and more easy than taxes and

00:09:29,430 --> 00:09:35,460
surreal and you may think that is more

00:09:32,340 --> 00:09:39,060
easy to use in production and I even

00:09:35,460 --> 00:09:42,650
think that you can use our product Roth

00:09:39,060 --> 00:09:48,660
library in the production suanne bitter

00:09:42,650 --> 00:09:50,820
so easy I think and I see if you want to

00:09:48,660 --> 00:09:54,300
master raft I think that you only need a

00:09:50,820 --> 00:09:57,870
cure no to pour two points

00:09:54,300 --> 00:10:00,900
the wine is how the rough elect a leader

00:09:57,870 --> 00:10:03,630
and the other thing is that how the rock

00:10:00,900 --> 00:10:06,630
do the local replication and I leave a

00:10:03,630 --> 00:10:09,900
single area viewed no dates to please

00:10:06,630 --> 00:10:10,230
and you have you have already mastered a

00:10:09,900 --> 00:10:15,150
raft

00:10:10,230 --> 00:10:18,300
oh that's be the first is that let's

00:10:15,150 --> 00:10:18,990
talk about election and for the rock

00:10:18,300 --> 00:10:21,960
class

00:10:18,990 --> 00:10:25,830
every load has three rows the leader the

00:10:21,960 --> 00:10:27,900
follower and the candidate and every

00:10:25,830 --> 00:10:30,420
rough clutter has only one leader and

00:10:27,900 --> 00:10:33,840
the leader is elected by the majority

00:10:30,420 --> 00:10:36,420
over the period and only if the leader

00:10:33,840 --> 00:10:40,290
is elected and only the leader can

00:10:36,420 --> 00:10:45,050
handle crying Oh can only handle and

00:10:40,290 --> 00:10:48,210
class no more sorry

00:10:45,050 --> 00:10:51,600
the neither can only not only the right

00:10:48,210 --> 00:10:54,330
but also don't read must be through the

00:10:51,600 --> 00:10:57,030
leader so even if so at this time

00:10:54,330 --> 00:10:59,840
because we have only one either so we

00:10:57,030 --> 00:11:02,160
don't we don't be that you mister not

00:10:59,840 --> 00:11:04,980
really the problem as I said before

00:11:02,160 --> 00:11:08,040
because only the reader will only

00:11:04,980 --> 00:11:10,530
through the leader and if the leader is

00:11:08,040 --> 00:11:12,600
Iraq Kira what other four other other

00:11:10,530 --> 00:11:15,370
peers are the followers the follower we

00:11:12,600 --> 00:11:17,900
are do lasse but you shall receive

00:11:15,370 --> 00:11:20,720
message from the leader and a duel and

00:11:17,900 --> 00:11:22,280
local replication and even the poll if

00:11:20,720 --> 00:11:24,200
the follower personal receive any

00:11:22,280 --> 00:11:27,080
messages from the leader for long time

00:11:24,200 --> 00:11:32,390
the leader will become to that candidate

00:11:27,080 --> 00:11:34,790
and can cube elect a new leader this is

00:11:32,390 --> 00:11:37,630
a whole picture over the election i the

00:11:34,790 --> 00:11:40,670
first what appears are the followers and

00:11:37,630 --> 00:11:42,500
after election turnout the follower we

00:11:40,670 --> 00:11:45,560
have become the candidate the candidate

00:11:42,500 --> 00:11:47,030
will just walk by yourself and the

00:11:45,560 --> 00:11:50,210
candidate will send the world to other

00:11:47,030 --> 00:11:51,830
peers when the candidate found that even

00:11:50,210 --> 00:11:53,930
receive the vote from the majority of

00:11:51,830 --> 00:11:55,820
the CEO so us and either can't become

00:11:53,930 --> 00:11:57,650
the leader of course the candidate you

00:11:55,820 --> 00:11:59,480
found that the eyes huh

00:11:57,650 --> 00:12:01,370
there has someone become the leader and

00:11:59,480 --> 00:12:07,430
either we have become either way Abby

00:12:01,370 --> 00:12:09,290
step back for Bakula polar look when the

00:12:07,430 --> 00:12:12,320
leader is when the leader is the back

00:12:09,290 --> 00:12:14,810
here and the leader only to handle the

00:12:12,320 --> 00:12:16,970
kind of requests when for example here

00:12:14,810 --> 00:12:19,150
the kind we all read some data to the

00:12:16,970 --> 00:12:22,610
leader and the leader we are used each

00:12:19,150 --> 00:12:25,040
module we need roster here is a rough

00:12:22,610 --> 00:12:28,430
algorithm and the to replicate based

00:12:25,040 --> 00:12:31,970
data into other fall alerts and here

00:12:28,430 --> 00:12:34,490
each load we are a panda commander to

00:12:31,970 --> 00:12:36,200
die either own rough logs when the

00:12:34,490 --> 00:12:38,990
leader found that the majority of the

00:12:36,200 --> 00:12:41,030
server had received this rough log and

00:12:38,990 --> 00:12:43,610
the user testing that the rough log is

00:12:41,030 --> 00:12:45,740
committed well after the rough log is

00:12:43,610 --> 00:12:48,890
commit here you can apply this rough log

00:12:45,740 --> 00:12:54,230
and apply this to the station machine

00:12:48,890 --> 00:12:57,020
and this is a common replicated emotion

00:12:54,230 --> 00:12:59,210
with the graphic repeated mrs. the

00:12:57,020 --> 00:13:02,960
reputation log and this is the core

00:12:59,210 --> 00:13:07,940
concept of the raft and as I said before

00:13:02,960 --> 00:13:10,940
and here Porter there are many scenes I

00:13:07,940 --> 00:13:13,700
don't mention here about the reflector

00:13:10,940 --> 00:13:16,790
like slap sha and on how the membership

00:13:13,700 --> 00:13:19,520
change about how rough do de el oued and

00:13:16,790 --> 00:13:21,260
removal though and the hub of the rough

00:13:19,520 --> 00:13:24,260
dual approval if you want you must

00:13:21,260 --> 00:13:26,510
really want to must master the RAF and

00:13:24,260 --> 00:13:28,580
they used to allow this concern and of

00:13:26,510 --> 00:13:31,790
course you needed to do many

00:13:28,580 --> 00:13:34,100
optimization to photograph and use it in

00:13:31,790 --> 00:13:36,709
your production black uses a pipeline

00:13:34,100 --> 00:13:38,990
and - and the path to severe after

00:13:36,709 --> 00:13:43,070
network transportation and the user

00:13:38,990 --> 00:13:46,120
Lindner to let the victim slap a

00:13:43,070 --> 00:13:50,899
membership change more stable and

00:13:46,120 --> 00:13:53,630
luckily the word optimization at least a

00:13:50,899 --> 00:13:58,820
bar had working support in our rough

00:13:53,630 --> 00:14:03,589
library so here I will talk about a

00:13:58,820 --> 00:14:06,410
rough library here and you can see the

00:14:03,589 --> 00:14:12,320
report here and you can use it directly

00:14:06,410 --> 00:14:16,250
from the crate and our library is

00:14:12,320 --> 00:14:18,290
inspired by the HDD raft because it's

00:14:16,250 --> 00:14:20,660
too rough has been used in production

00:14:18,290 --> 00:14:23,930
for a long time and the many popular

00:14:20,660 --> 00:14:26,420
project like Cuba lately like karate be

00:14:23,930 --> 00:14:28,850
rewarded usually in production so it's a

00:14:26,420 --> 00:14:32,300
cool stuff for us cue to inspire from

00:14:28,850 --> 00:14:35,839
the etcd draft and the rough library is

00:14:32,300 --> 00:14:39,079
a highly library and its various like

00:14:35,839 --> 00:14:42,709
you can abandon it into a application

00:14:39,079 --> 00:14:45,740
easily to provide it or concert layer

00:14:42,709 --> 00:14:50,240
and the library is only focused on the

00:14:45,740 --> 00:14:51,920
consensus algorithm so you should you

00:14:50,240 --> 00:14:54,500
should I leave it you need to consider

00:14:51,920 --> 00:14:57,230
how to save the rough log and how to

00:14:54,500 --> 00:14:59,180
apply the rough log and save it into

00:14:57,230 --> 00:15:04,670
that slow motion and how to communicate

00:14:59,180 --> 00:15:06,620
our rough load by yourself and using

00:15:04,670 --> 00:15:08,720
rough load it may be using the rough

00:15:06,620 --> 00:15:11,000
library it's very easy and you can see

00:15:08,720 --> 00:15:14,149
the whole picture here and at first you

00:15:11,000 --> 00:15:17,690
needed to create a rough load like ok

00:15:14,149 --> 00:15:20,779
that's not really our arrow you need to

00:15:17,690 --> 00:15:23,000
create a rough low and when we create

00:15:20,779 --> 00:15:25,070
our upload and you can see that every

00:15:23,000 --> 00:15:26,839
rough flow is austere machine and the

00:15:25,070 --> 00:15:28,550
what we needed to do is to traverse the

00:15:26,839 --> 00:15:31,790
machine from this state to other state

00:15:28,550 --> 00:15:35,449
and mostly we have through it to grab a

00:15:31,790 --> 00:15:39,380
why is 40 and which means that we need

00:15:35,449 --> 00:15:41,960
to gravity is rough alowed regularly for

00:15:39,380 --> 00:15:44,090
example every 100 millisecond with

00:15:41,960 --> 00:15:47,000
for the cake tick-tick-tick to grab the

00:15:44,090 --> 00:15:49,880
Ruffalo and a lot of ways lat

00:15:47,000 --> 00:15:52,990
the protic and we are sell the required

00:15:49,880 --> 00:15:56,000
to the raffle loader speak to a leader

00:15:52,990 --> 00:15:58,120
explicitly and the recorded propose we

00:15:56,000 --> 00:16:02,240
use a propose to cross the Ruffalo and

00:15:58,120 --> 00:16:03,830
here is that we sometimes because the

00:16:02,240 --> 00:16:06,080
rasa-lila will receive the message from

00:16:03,830 --> 00:16:09,080
other raffle load and the Waco here we

00:16:06,080 --> 00:16:11,930
will stab shoot offer Ruffalo after we

00:16:09,080 --> 00:16:14,300
drive the rough low and the Rauf Lala we

00:16:11,930 --> 00:16:16,010
are moved to some state and sometimes

00:16:14,300 --> 00:16:19,730
it's the raffle load we are moved to a

00:16:16,010 --> 00:16:22,550
ready state and in the ready state we

00:16:19,730 --> 00:16:25,010
can do something in the ready we can get

00:16:22,550 --> 00:16:27,500
an increase from the rally and a plan to

00:16:25,010 --> 00:16:30,710
the raffle walk and we also can get a

00:16:27,500 --> 00:16:33,140
committee the entries and virtuously

00:16:30,710 --> 00:16:36,020
motion and we can also get some messages

00:16:33,140 --> 00:16:38,810
and the send IAM to remove buffalos and

00:16:36,020 --> 00:16:41,110
after we can award already finish world

00:16:38,810 --> 00:16:44,030
already and we are called advance to

00:16:41,110 --> 00:16:46,640
gravida to advanced or offload to all

00:16:44,030 --> 00:16:53,960
other step to a large state and a lack

00:16:46,640 --> 00:16:55,610
to again so well you when you want to

00:16:53,960 --> 00:16:58,090
create a roll out the first scene that

00:16:55,610 --> 00:17:00,530
you need a to create a raft storage and

00:16:58,090 --> 00:17:03,650
is very simple and you can see that

00:17:00,530 --> 00:17:05,930
there are only six high function and the

00:17:03,650 --> 00:17:07,760
first initial state returned the initial

00:17:05,930 --> 00:17:10,820
add state over the wrath of the Rafah

00:17:07,760 --> 00:17:12,800
load the rough state include current

00:17:10,820 --> 00:17:16,850
term the current committee committee the

00:17:12,800 --> 00:17:19,160
index and carnal and author and increase

00:17:16,850 --> 00:17:21,230
return a slice of blood off log from the

00:17:19,160 --> 00:17:23,360
low to the high and the term written a

00:17:21,230 --> 00:17:25,220
cover current a load and the first index

00:17:23,360 --> 00:17:27,890
and alice in dairyland us first and a

00:17:25,220 --> 00:17:31,040
last the index of the whole raft logs

00:17:27,890 --> 00:17:33,800
and the snapshot Rotonda count the

00:17:31,040 --> 00:17:35,360
snapshot of a current state machine you

00:17:33,800 --> 00:17:43,310
can think that you take a picture of the

00:17:35,360 --> 00:17:43,570
sewer machine at that time and then you

00:17:43,310 --> 00:17:46,240
can

00:17:43,570 --> 00:17:48,450
crew the crew the buffaloed and with

00:17:46,240 --> 00:17:50,620
your storage and with our computation

00:17:48,450 --> 00:17:53,440
yeah here you can see that the

00:17:50,620 --> 00:17:56,950
configuration your very simple and even

00:17:53,440 --> 00:17:58,960
each rough load has a unique ID and the

00:17:56,950 --> 00:18:01,630
end here is a reduction tick and how to

00:17:58,960 --> 00:18:05,769
be the cake you may still remember that

00:18:01,630 --> 00:18:09,039
I mention the kick before so for every

00:18:05,769 --> 00:18:12,309
geek for example the electric eel is for

00:18:09,039 --> 00:18:14,830
the hauler so when we when we kick ten

00:18:12,309 --> 00:18:16,809
times the polar if the terminal receive

00:18:14,830 --> 00:18:19,419
a message from the leader and the UW

00:18:16,809 --> 00:18:21,700
sent began to the candidate and become

00:18:19,419 --> 00:18:25,419
to the election again the harpy that

00:18:21,700 --> 00:18:27,519
means that when peak sweetheart and the

00:18:25,419 --> 00:18:31,389
leader we ascend a hot beat to other

00:18:27,519 --> 00:18:33,970
followers and so well after we create a

00:18:31,389 --> 00:18:37,840
rough load we can do something here you

00:18:33,970 --> 00:18:39,639
can see I said before the tea right the

00:18:37,840 --> 00:18:42,279
chicken drive rock Ruffalo that

00:18:39,639 --> 00:18:44,440
regularly and you snap to receive the

00:18:42,279 --> 00:18:47,289
remove messages from other load and just

00:18:44,440 --> 00:18:49,090
grab it and the youth use a pro boat to

00:18:47,289 --> 00:18:52,929
receive the commander from the clan and

00:18:49,090 --> 00:18:56,259
the gravy is cue when when we travel the

00:18:52,929 --> 00:18:58,629
Ruffalo and you may be into the ready

00:18:56,259 --> 00:19:01,120
state we can call the load has already

00:18:58,629 --> 00:19:03,490
function to check whether the Ruffalo is

00:19:01,120 --> 00:19:05,289
already or Lord and when the rock below

00:19:03,490 --> 00:19:07,450
is already we can get these ready and

00:19:05,289 --> 00:19:10,000
the hair if you can see it is entry and

00:19:07,450 --> 00:19:14,320
we can append this entry to the rough

00:19:10,000 --> 00:19:17,110
logs and here is message we can send the

00:19:14,320 --> 00:19:19,990
message to the other remove low and here

00:19:17,110 --> 00:19:21,610
is committed or Russell Rafa logs and we

00:19:19,990 --> 00:19:23,799
can apply this to the Slayer machine

00:19:21,610 --> 00:19:28,659
after we finish them or we can call

00:19:23,799 --> 00:19:31,179
advanced and I don't measure some but in

00:19:28,659 --> 00:19:33,309
the ready we also need a two-hander so

00:19:31,179 --> 00:19:36,159
structure or handled a leader challenge

00:19:33,309 --> 00:19:39,129
from change or committed induction but I

00:19:36,159 --> 00:19:42,850
don't mention I don't list here in this

00:19:39,129 --> 00:19:45,220
poll so as you can see using the raft

00:19:42,850 --> 00:19:47,100
library is very simple and are you

00:19:45,220 --> 00:19:50,590
missing that you can better in the

00:19:47,100 --> 00:19:53,230
implication to provide a concentrator

00:19:50,590 --> 00:19:56,649
contents of the database service easily

00:19:53,230 --> 00:19:59,070
and we have always do it that antacids

00:19:56,649 --> 00:19:59,070
Huckabee

00:19:59,160 --> 00:20:04,060
Thank You V is a distributed transaction

00:20:02,020 --> 00:20:06,490
a key value database and use based on

00:20:04,060 --> 00:20:10,990
the Rafah library and you can visit

00:20:06,490 --> 00:20:14,230
ripple here and we use the rocks db2

00:20:10,990 --> 00:20:16,420
stable a rough lot and to save the same

00:20:14,230 --> 00:20:19,240
ocean data and we will use that you have

00:20:16,420 --> 00:20:23,440
you say to community to do the network

00:20:19,240 --> 00:20:24,460
communication and even more now do all

00:20:23,440 --> 00:20:30,460
of those things here

00:20:24,460 --> 00:20:33,790
anybody know here oh la parka B is the e

00:20:30,460 --> 00:20:34,750
is the CCF sandbox project but I use a

00:20:33,790 --> 00:20:36,820
lot here alongs

00:20:34,750 --> 00:20:39,280
may be either will be a lot in the air

00:20:36,820 --> 00:20:44,260
at the end of this smart I under here

00:20:39,280 --> 00:20:46,090
I just allows it and now maybe tacky

00:20:44,260 --> 00:20:49,120
are you missing that heck we may be the

00:20:46,090 --> 00:20:52,300
first raft database storage database

00:20:49,120 --> 00:20:54,190
project in the scenes yet you'd written

00:20:52,300 --> 00:21:01,240
by rot the first are written by rust the

00:20:54,190 --> 00:21:03,400
database so and our ambition and B so if

00:21:01,240 --> 00:21:07,650
you have paid rent you are welcome to

00:21:03,400 --> 00:21:18,619
join us to develop ikv so that's what

00:21:07,650 --> 00:21:18,619
[Applause]

00:21:19,290 --> 00:21:26,950
[Music]

00:21:24,890 --> 00:21:26,950

YouTube URL: https://www.youtube.com/watch?v=ueA44Tz1NF8


