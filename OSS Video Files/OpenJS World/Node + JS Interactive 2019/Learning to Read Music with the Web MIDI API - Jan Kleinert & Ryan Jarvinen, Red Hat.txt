Title: Learning to Read Music with the Web MIDI API - Jan Kleinert & Ryan Jarvinen, Red Hat
Publication date: 2020-05-11
Playlist: Node + JS Interactive 2019
Description: 
	Learning to Read Music with the Web MIDI API - Jan Kleinert & Ryan Jarvinen, Red Hat
Speakers: Ryan Jarvinen, Jan Kleinert
Getting students to practice piano - or any instrument - can be a challenge, but combining learning with technology and games in an interactive way can make practice more enticing. With a digital keyboard, JavaScript, and the Web MIDI API, Jan created a web app to help her kids practice reading music. Through demos and an exploration of how the app was built, you'll learn the basics of MIDI and the Web MIDI API and maybe a thing or two about reading music, too!
Captions: 
	00:00:00,000 --> 00:00:04,859
all right I think we'll go ahead and

00:00:01,800 --> 00:00:08,550
start so this session is about learning

00:00:04,859 --> 00:00:10,620
to read music with the web MIDI API if

00:00:08,550 --> 00:00:15,839
you want to get to the slides you can

00:00:10,620 --> 00:00:18,480
get to them here bitly web - MIDI API if

00:00:15,839 --> 00:00:20,039
you want to look at any of this later so

00:00:18,480 --> 00:00:21,900
I'm really excited about this talk this

00:00:20,039 --> 00:00:24,210
is the first time I've given it and it's

00:00:21,900 --> 00:00:25,769
also I think the first time in many

00:00:24,210 --> 00:00:27,960
years that I've done that talk that was

00:00:25,769 --> 00:00:30,330
just totally based off of a random fun

00:00:27,960 --> 00:00:33,840
side project so I'm really excited to be

00:00:30,330 --> 00:00:36,480
able to do this today so I'm Jam cleaner

00:00:33,840 --> 00:00:39,450
with me is Ronnie and Jarvan and we are

00:00:36,480 --> 00:00:40,890
both developer advocates at Red Hat I'm

00:00:39,450 --> 00:00:42,360
gonna be talking through most of this

00:00:40,890 --> 00:00:47,210
Ryan's gonna be helping with the demo

00:00:42,360 --> 00:00:50,270
and probably jumping in also with more

00:00:47,210 --> 00:00:52,800
color as he goes he's a lot more

00:00:50,270 --> 00:00:55,050
knowledgeable of music in general I

00:00:52,800 --> 00:00:56,520
would say electronic music than I am so

00:00:55,050 --> 00:00:59,460
he may have some interesting thoughts

00:00:56,520 --> 00:01:05,400
that I don't touch on as we go along no

00:00:59,460 --> 00:01:07,890
pressure so the way this came about is

00:01:05,400 --> 00:01:09,570
related to this picture so I have two

00:01:07,890 --> 00:01:12,090
kids two daughters and they both take

00:01:09,570 --> 00:01:15,780
piano lessons and what you kind of can't

00:01:12,090 --> 00:01:18,540
see here at the top is this is a web app

00:01:15,780 --> 00:01:20,189
that their piano studio uses as part of

00:01:18,540 --> 00:01:22,619
their their practice and their music

00:01:20,189 --> 00:01:24,299
theory stuff and so it's really it's

00:01:22,619 --> 00:01:25,680
cool for what it is so it shows at the

00:01:24,299 --> 00:01:27,750
top that you can't see right now

00:01:25,680 --> 00:01:29,670
the treble clef with a note displayed

00:01:27,750 --> 00:01:31,740
and what they're supposed to do is click

00:01:29,670 --> 00:01:34,200
on the keyboard what note that is so if

00:01:31,740 --> 00:01:36,240
it's middle C they click the middle C on

00:01:34,200 --> 00:01:37,290
the screen and it's green if it's right

00:01:36,240 --> 00:01:39,000
it's right if it's wrong and that's

00:01:37,290 --> 00:01:40,740
really cool but what's always kind of

00:01:39,000 --> 00:01:43,079
bugged me about it is I don't feel like

00:01:40,740 --> 00:01:46,590
it's as transferable as if they were

00:01:43,079 --> 00:01:51,479
actually pressing it on the piano so we

00:01:46,590 --> 00:01:55,619
got a new digital piano maybe about six

00:01:51,479 --> 00:01:57,810
months ago and it had MIDI out on it it

00:01:55,619 --> 00:02:01,079
was like USB which is kind of exciting

00:01:57,810 --> 00:02:03,810
and that's what this basically came from

00:02:01,079 --> 00:02:06,149
I wanted to create something so my kids

00:02:03,810 --> 00:02:08,670
could practice like their their note

00:02:06,149 --> 00:02:10,619
homework basically but by actually

00:02:08,670 --> 00:02:12,330
pressing the notes on the keyboard so it

00:02:10,619 --> 00:02:14,910
would really trigger in their mind

00:02:12,330 --> 00:02:18,600
okay middle C is there not just like a

00:02:14,910 --> 00:02:20,850
picture on the screen so that is what

00:02:18,600 --> 00:02:23,580
I'm going to demo for you later is that

00:02:20,850 --> 00:02:25,350
little web app that I put together but

00:02:23,580 --> 00:02:28,020
in order to do that I had to learn about

00:02:25,350 --> 00:02:33,450
MIDI and the web MIDI API and so that's

00:02:28,020 --> 00:02:36,510
what we're going to talk about now so if

00:02:33,450 --> 00:02:39,990
you're like me when you think about the

00:02:36,510 --> 00:02:44,340
word MIDI this is typically what comes

00:02:39,990 --> 00:02:45,240
to mind if we can get it y'all can only

00:02:44,340 --> 00:02:47,670
hear it through here but uh

00:02:45,240 --> 00:02:50,640
this kind of sound is typically what I

00:02:47,670 --> 00:02:54,720
would think of from like mid-90s

00:02:50,640 --> 00:02:58,590
websites oh that's okay you know you

00:02:54,720 --> 00:03:00,870
know what it is but but MIDI is not

00:02:58,590 --> 00:03:05,520
actually that kind of sound MIDI is not

00:03:00,870 --> 00:03:07,740
sound at all um you can create sound

00:03:05,520 --> 00:03:09,360
from MIDI messages but but MIDI is not

00:03:07,740 --> 00:03:11,040
sound and it's not that any kind of

00:03:09,360 --> 00:03:14,310
stuff that we're used to from like old

00:03:11,040 --> 00:03:17,220
PC games and things like that what it is

00:03:14,310 --> 00:03:20,790
instead is stands for a musical

00:03:17,220 --> 00:03:22,140
instrument digital interface and it's a

00:03:20,790 --> 00:03:26,280
technical standard that's been around

00:03:22,140 --> 00:03:28,950
since the 80s and there are several

00:03:26,280 --> 00:03:30,300
components to it but essentially what it

00:03:28,950 --> 00:03:33,920
is in the context of what we're going to

00:03:30,300 --> 00:03:36,540
talk about today it's it's a way for

00:03:33,920 --> 00:03:39,570
digital musical instruments audio

00:03:36,540 --> 00:03:41,100
devices computers anything that can can

00:03:39,570 --> 00:03:42,930
transmit these MIDI messages to

00:03:41,100 --> 00:03:45,060
communicate with each other and there's

00:03:42,930 --> 00:03:47,250
a ton of things that you can do with

00:03:45,060 --> 00:03:49,620
that but it's a it's basically a

00:03:47,250 --> 00:03:50,880
protocol a communication standard for

00:03:49,620 --> 00:03:54,810
these devices to be able to communicate

00:03:50,880 --> 00:03:57,840
this musical information so to go into a

00:03:54,810 --> 00:04:00,330
little bit more detail on that there are

00:03:57,840 --> 00:04:04,950
quite a few different types of messages

00:04:00,330 --> 00:04:06,990
that that MIDI composes or comprises we

00:04:04,950 --> 00:04:09,660
are only going to look at a couple

00:04:06,990 --> 00:04:12,000
things here for the for what I'm doing

00:04:09,660 --> 00:04:14,790
I'm only using something called a

00:04:12,000 --> 00:04:16,350
channel voice message and even more

00:04:14,790 --> 00:04:19,200
specifically the only message that I

00:04:16,350 --> 00:04:22,229
care about for this demo is note on so

00:04:19,200 --> 00:04:24,840
what note on means is somebody has

00:04:22,229 --> 00:04:25,520
pressed a note so in the sense of a

00:04:24,840 --> 00:04:27,680
keyboard

00:04:25,520 --> 00:04:29,840
has pressed a key that would generate

00:04:27,680 --> 00:04:32,599
this note on message and they've got

00:04:29,840 --> 00:04:34,879
this 144 in parentheses here because

00:04:32,599 --> 00:04:37,970
that's the numeric value for that note

00:04:34,879 --> 00:04:40,490
on event so like the MIDI message that

00:04:37,970 --> 00:04:43,159
would that would come through that's got

00:04:40,490 --> 00:04:45,370
three parts one is this like this event

00:04:43,159 --> 00:04:47,750
that's no on so that would be 144 the

00:04:45,370 --> 00:04:50,449
next piece of information that comes

00:04:47,750 --> 00:04:52,490
through is the note number I found this

00:04:50,449 --> 00:04:56,449
interesting the note numbers can go from

00:04:52,490 --> 00:04:58,370
0 to 127 which is more than the number

00:04:56,449 --> 00:05:00,650
of keys on the piano so like the the

00:04:58,370 --> 00:05:03,289
notes that you can represent with MIDI

00:05:00,650 --> 00:05:06,050
are beyond like what you can do on a

00:05:03,289 --> 00:05:07,610
standard like 88 key piano so that's I

00:05:06,050 --> 00:05:09,860
don't know if that's useful information

00:05:07,610 --> 00:05:13,130
but I thought it was kind of cool so the

00:05:09,860 --> 00:05:15,949
note number comes through middle C in my

00:05:13,130 --> 00:05:18,889
voice middle C is 60 which you'll be

00:05:15,949 --> 00:05:20,840
useful later to know but so 60 is middle

00:05:18,889 --> 00:05:23,840
C as you go higher up in the notes the

00:05:20,840 --> 00:05:26,330
number goes up and the same for as you

00:05:23,840 --> 00:05:30,889
go lower and then the third piece of

00:05:26,330 --> 00:05:32,479
information is velocity and as ryan is

00:05:30,889 --> 00:05:34,190
demonstrating over here velocity is

00:05:32,479 --> 00:05:36,979
basically in the sense of a keyboard how

00:05:34,190 --> 00:05:39,229
hard are you pressing the key so if you

00:05:36,979 --> 00:05:40,669
gently press the key the velocity is

00:05:39,229 --> 00:05:42,979
going to be a low number if you just

00:05:40,669 --> 00:05:46,060
like slam it it's gonna be a much higher

00:05:42,979 --> 00:05:48,830
number and so that as your you know that

00:05:46,060 --> 00:05:50,599
can be useful if you are then taking

00:05:48,830 --> 00:05:53,419
this MIDI information and playing it

00:05:50,599 --> 00:05:56,300
back out in some way that can influence

00:05:53,419 --> 00:05:58,009
how you decide to produce that sound in

00:05:56,300 --> 00:05:59,810
our case what we're going to be doing

00:05:58,009 --> 00:06:03,500
we're not producing any sound with this

00:05:59,810 --> 00:06:04,789
demo instead we're using the MIDI

00:06:03,500 --> 00:06:07,909
information that's coming from the

00:06:04,789 --> 00:06:08,990
keyboard to to match against what's on

00:06:07,909 --> 00:06:10,639
the screen and see if they're playing

00:06:08,990 --> 00:06:13,099
the right note so we'll look at that

00:06:10,639 --> 00:06:14,180
once we get to the demo but so those are

00:06:13,099 --> 00:06:15,979
the three important pieces of

00:06:14,180 --> 00:06:18,740
information that I ended up needing to

00:06:15,979 --> 00:06:20,599
use in order to do this was in this

00:06:18,740 --> 00:06:22,969
channel voice message I want to look at

00:06:20,599 --> 00:06:24,919
I'm listening for the note on event I

00:06:22,969 --> 00:06:27,529
don't care about no off or some of these

00:06:24,919 --> 00:06:29,779
other types of events that can happen I

00:06:27,529 --> 00:06:31,550
need to know what note number was played

00:06:29,779 --> 00:06:34,449
and then I don't really care about the

00:06:31,550 --> 00:06:38,149
velocity but it's coming through for us

00:06:34,449 --> 00:06:39,169
all right so that's MIDI but then how

00:06:38,149 --> 00:06:40,819
can we get that to

00:06:39,169 --> 00:06:43,249
actually work with the browser and

00:06:40,819 --> 00:06:45,520
that's where the web MIDI API comes in

00:06:43,249 --> 00:06:49,819
so web MIDI API lets you have MIDI

00:06:45,520 --> 00:06:52,719
devices communicating with with your

00:06:49,819 --> 00:06:55,819
browser and with web applications and

00:06:52,719 --> 00:06:58,729
the API itself is actually pretty simple

00:06:55,819 --> 00:07:00,490
the most important thing to know first

00:06:58,729 --> 00:07:03,259
though is does the browser you're using

00:07:00,490 --> 00:07:06,349
actually support the web MIDI API and

00:07:03,259 --> 00:07:08,689
this is the slightly sad part so this is

00:07:06,349 --> 00:07:11,060
the request you can use to find the

00:07:08,689 --> 00:07:14,629
answer to that navigator dot request

00:07:11,060 --> 00:07:16,550
MIDI access your browser supports it

00:07:14,629 --> 00:07:21,349
you'll be great and you can move on if

00:07:16,550 --> 00:07:24,229
not there are some alternatives and here

00:07:21,349 --> 00:07:27,919
is the current state of the world from

00:07:24,229 --> 00:07:30,620
can I use for web MIDI so chrome

00:07:27,919 --> 00:07:33,289
supports it opera supports it and like

00:07:30,620 --> 00:07:35,659
the amp Android Chrome for Android and

00:07:33,289 --> 00:07:38,360
opera mobile browsers but nothing

00:07:35,659 --> 00:07:41,900
nothing else maybe that'll change in the

00:07:38,360 --> 00:07:43,699
future but that's unfortunate that makes

00:07:41,900 --> 00:07:48,830
it not as easy to use these things in a

00:07:43,699 --> 00:07:50,899
widespread way but there are some

00:07:48,830 --> 00:07:52,879
alternatives out there now I'll just I

00:07:50,899 --> 00:07:55,039
haven't actually tried this but this is

00:07:52,879 --> 00:07:59,029
what I've always seen referenced as an

00:07:55,039 --> 00:08:02,629
alternative that makes this work in in

00:07:59,029 --> 00:08:04,759
other browsers there is I think this is

00:08:02,629 --> 00:08:07,639
called it's from jazz soft this jazz

00:08:04,759 --> 00:08:09,259
plug-in that you can install and then

00:08:07,639 --> 00:08:12,469
there's this this package that you can

00:08:09,259 --> 00:08:14,960
use that kind of what makes it work more

00:08:12,469 --> 00:08:16,219
than just in Chrome and opera so again I

00:08:14,960 --> 00:08:18,529
haven't tried it myself but this seems

00:08:16,219 --> 00:08:20,899
to be the supported way of getting this

00:08:18,529 --> 00:08:25,219
to work and I'm in a broader set of

00:08:20,899 --> 00:08:26,199
browsers alright so going back here for

00:08:25,219 --> 00:08:28,639
just a second

00:08:26,199 --> 00:08:31,339
the first thing you need to do is see if

00:08:28,639 --> 00:08:34,279
MIDI supported in the browser your N and

00:08:31,339 --> 00:08:36,740
then what we're going to do is if it is

00:08:34,279 --> 00:08:38,389
then we're going to actually request

00:08:36,740 --> 00:08:40,729
that MIDI access and then we've got a

00:08:38,389 --> 00:08:44,540
success handler if everything's looking

00:08:40,729 --> 00:08:46,579
good we'll end up over here in our

00:08:44,540 --> 00:08:48,260
success handler and so this is giving

00:08:46,579 --> 00:08:51,210
you kind of a sense of what this demo

00:08:48,260 --> 00:08:53,250
app is going to do it's a scratch

00:08:51,210 --> 00:08:55,350
be at there's probably much better ways

00:08:53,250 --> 00:08:58,050
of writing this but this is what we're

00:08:55,350 --> 00:09:00,240
doing today so to start we have an array

00:08:58,050 --> 00:09:03,180
of notes so I mentioned before middle C

00:09:00,240 --> 00:09:06,270
is 60 so what I'm covering here is

00:09:03,180 --> 00:09:10,110
basically from middle C then C sharp

00:09:06,270 --> 00:09:13,589
would be 61 D would be 62 d sharp is 63

00:09:10,110 --> 00:09:15,990
and so on so every like every note goes

00:09:13,589 --> 00:09:18,660
up by one that makes sense right so

00:09:15,990 --> 00:09:20,880
we're going up to 72 which is the next C

00:09:18,660 --> 00:09:24,029
higher than middle C the reason I

00:09:20,880 --> 00:09:26,160
stopped there is that's where this demo

00:09:24,029 --> 00:09:28,050
keyboard stops so there's no sense in

00:09:26,160 --> 00:09:30,450
going any higher if we were doing this

00:09:28,050 --> 00:09:31,560
for like a full piano you could there's

00:09:30,450 --> 00:09:33,690
probably a much more efficient way of

00:09:31,560 --> 00:09:36,149
doing this but for for demo purposes

00:09:33,690 --> 00:09:38,820
that's where we're at so what we're

00:09:36,149 --> 00:09:40,410
doing in here is I'm shuffling this

00:09:38,820 --> 00:09:41,760
array because I don't want to present my

00:09:40,410 --> 00:09:43,470
kids the notes in the same order every

00:09:41,760 --> 00:09:45,810
time or they're gonna just memorize

00:09:43,470 --> 00:09:48,990
which note is which so we shuffle that

00:09:45,810 --> 00:09:51,180
then we're gonna draw whatever the new

00:09:48,990 --> 00:09:54,600
first note in the array is draw it on a

00:09:51,180 --> 00:09:56,940
staff and then we're gonna get our list

00:09:54,600 --> 00:09:58,709
of MIDI inputs I'm showing outputs here

00:09:56,940 --> 00:10:01,080
just so you know that you can output to

00:09:58,709 --> 00:10:02,790
a MIDI you can output as well I only

00:10:01,080 --> 00:10:05,700
care about inputs what's plugged into my

00:10:02,790 --> 00:10:07,560
laptop at our house it would be our big

00:10:05,700 --> 00:10:11,040
digital piano here it's this little

00:10:07,560 --> 00:10:13,230
keyboard could be multiple things so

00:10:11,040 --> 00:10:15,029
we're we are cycling through I've only

00:10:13,230 --> 00:10:18,089
got one plugged in so we're going to get

00:10:15,029 --> 00:10:20,670
our input and then when a message comes

00:10:18,089 --> 00:10:22,230
through so like a key press we're going

00:10:20,670 --> 00:10:24,330
to get that message and do something

00:10:22,230 --> 00:10:29,640
with it this all making sense so far

00:10:24,330 --> 00:10:35,640
cool okay all right so we talked about

00:10:29,640 --> 00:10:36,959
the note on command here that's what

00:10:35,640 --> 00:10:38,459
we're going to do when we get a MIDI

00:10:36,959 --> 00:10:40,470
message we're going to look at this

00:10:38,459 --> 00:10:43,020
message now here's the three parts that

00:10:40,470 --> 00:10:44,880
we talked about the command the note and

00:10:43,020 --> 00:10:47,730
the velocity so those are those three

00:10:44,880 --> 00:10:49,350
pieces of data that we get we have a

00:10:47,730 --> 00:10:51,600
switch statement with one case that's

00:10:49,350 --> 00:10:53,070
exciting but you could build it out so

00:10:51,600 --> 00:10:55,529
that's why that's why we've got that

00:10:53,070 --> 00:10:57,300
there and note on is 1:44 so when we get

00:10:55,529 --> 00:10:59,310
that one what we're gonna do is I've got

00:10:57,300 --> 00:11:02,490
just like a little lake text string that

00:10:59,310 --> 00:11:04,470
comes up to say what note was played and

00:11:02,490 --> 00:11:07,110
then we're going to go into this note on

00:11:04,470 --> 00:11:12,390
and that's where the actual logic

00:11:07,110 --> 00:11:14,610
happens and rather than printing all the

00:11:12,390 --> 00:11:16,320
code out for that here what it's doing

00:11:14,610 --> 00:11:18,870
its checking if the note that was played

00:11:16,320 --> 00:11:20,640
matched the note that we were at we had

00:11:18,870 --> 00:11:22,080
displayed on the screen so checking

00:11:20,640 --> 00:11:24,420
those note numbers against each other to

00:11:22,080 --> 00:11:26,130
make sure they match if they do changes

00:11:24,420 --> 00:11:28,170
it to green if they don't it changes it

00:11:26,130 --> 00:11:29,940
to red my kids have already given me a

00:11:28,170 --> 00:11:31,980
feature request that also needs a thumbs

00:11:29,940 --> 00:11:35,670
up in a thumbs down picture next to it

00:11:31,980 --> 00:11:37,620
we don't have that today then after one

00:11:35,670 --> 00:11:41,400
and a half seconds which is just to give

00:11:37,620 --> 00:11:43,560
us time to register the correct or

00:11:41,400 --> 00:11:45,270
incorrect feedback it's gonna display

00:11:43,560 --> 00:11:47,190
the next note in the array so it's gonna

00:11:45,270 --> 00:11:48,810
cycle through all 13 of those notes

00:11:47,190 --> 00:11:49,410
giving you a chance to play them and get

00:11:48,810 --> 00:11:51,540
it right or wrong

00:11:49,410 --> 00:11:53,280
and at the end it'll tell you how many

00:11:51,540 --> 00:11:55,980
out of that 13 you got correct so it's

00:11:53,280 --> 00:11:57,570
really simple but it kind of can show

00:11:55,980 --> 00:12:00,270
you what you can start to do with this

00:11:57,570 --> 00:12:02,280
sort of API and I love that the API

00:12:00,270 --> 00:12:04,080
itself is so easy to work with that's

00:12:02,280 --> 00:12:07,680
really for a basic thing that's really

00:12:04,080 --> 00:12:09,900
all there is to it so Ryan you wanna

00:12:07,680 --> 00:12:12,860
know this isn't fair because this is

00:12:09,900 --> 00:12:14,880
their treble cleff demo and i'm ryan

00:12:12,860 --> 00:12:17,730
familiar with bass clef so this was

00:12:14,880 --> 00:12:20,400
super unfair of me to uh to do this to

00:12:17,730 --> 00:12:23,070
Ryan but I don't want this to get

00:12:20,400 --> 00:12:25,770
unplugged so I can give you give you a

00:12:23,070 --> 00:12:28,890
cheat sheet if you want yeah I may need

00:12:25,770 --> 00:12:31,890
some help because my music education was

00:12:28,890 --> 00:12:35,130
not on a piano and was definitely bass

00:12:31,890 --> 00:12:39,300
clef instead of treble clef so we'd be

00:12:35,130 --> 00:12:40,860
making some guesses at these so middle

00:12:39,300 --> 00:12:45,720
this is our middle C on this keyboard

00:12:40,860 --> 00:12:50,240
that's our middle C so this is e oh yeah

00:12:45,720 --> 00:12:53,370
that's gonna be up a good let's try oh

00:12:50,240 --> 00:12:55,020
very good thank you it displays quickly

00:12:53,370 --> 00:12:57,060
but you can see it's gonna show you that

00:12:55,020 --> 00:12:58,740
the command which is always gonna be 144

00:12:57,060 --> 00:13:01,740
so while we listen for the note in the

00:12:58,740 --> 00:13:05,490
velocity so now this is a couple notes

00:13:01,740 --> 00:13:08,160
higher this is a H right yes hit it

00:13:05,490 --> 00:13:09,960
really hard so the velocity is 50 now on

00:13:08,160 --> 00:13:12,560
this next one this I have step downs at

00:13:09,960 --> 00:13:12,560
a sharp Oh

00:13:14,170 --> 00:13:20,829
um I see here so the velocity it was 107

00:13:19,209 --> 00:13:22,089
so you can feel if you wanted to do

00:13:20,829 --> 00:13:24,519
something useful with that velocity

00:13:22,089 --> 00:13:26,350
information like maybe make the note

00:13:24,519 --> 00:13:29,829
light get bigger if you press it harder

00:13:26,350 --> 00:13:32,139
yeah yeah what we were talking about you

00:13:29,829 --> 00:13:34,839
know what you could we don't really have

00:13:32,139 --> 00:13:36,910
this playing out audio but it we could

00:13:34,839 --> 00:13:40,600
wire it up to all kinds of fun things

00:13:36,910 --> 00:13:43,750
like change the brightness of a light

00:13:40,600 --> 00:13:45,760
bulb if you had some IOT lights you know

00:13:43,750 --> 00:13:48,210
the harder I smashed the keys the

00:13:45,760 --> 00:13:51,330
brighter the lights are or I don't know

00:13:48,210 --> 00:13:51,330
[Music]

00:13:56,010 --> 00:14:03,339
where where I'm playing creepy Count

00:14:00,459 --> 00:14:05,260
Dracula music in order to make the bats

00:14:03,339 --> 00:14:07,000
fly out of the chimney or something fun

00:14:05,260 --> 00:14:09,459
like that I don't know instead what it

00:14:07,000 --> 00:14:13,269
does is it turns the green or red but

00:14:09,459 --> 00:14:16,060
you get the idea so you can cycle

00:14:13,269 --> 00:14:17,470
through these and actually I added

00:14:16,060 --> 00:14:19,810
something in to kind of give a very

00:14:17,470 --> 00:14:22,360
simple sense of other things you can do

00:14:19,810 --> 00:14:23,350
if you go up I'll do it cuz I I know

00:14:22,360 --> 00:14:25,750
you're trying to hold it

00:14:23,350 --> 00:14:27,339
you can also so these lower notes down

00:14:25,750 --> 00:14:28,870
here on the keyboard or just changing

00:14:27,339 --> 00:14:31,839
the background color of the page just to

00:14:28,870 --> 00:14:33,820
drive home the point that like it's

00:14:31,839 --> 00:14:36,610
musical information but you don't have

00:14:33,820 --> 00:14:38,740
to just use MIDI for musical

00:14:36,610 --> 00:14:42,130
applications you could use this to do

00:14:38,740 --> 00:14:43,990
whatever you want with it's also

00:14:42,130 --> 00:14:45,670
something that is often when you're

00:14:43,990 --> 00:14:48,399
doing more interesting and complex

00:14:45,670 --> 00:14:52,180
things using the web MIDI API alongside

00:14:48,399 --> 00:14:56,380
the Web Audio API would allow you to do

00:14:52,180 --> 00:14:58,720
a lot of really interesting applications

00:14:56,380 --> 00:15:00,069
so you know there's ice I've seen some

00:14:58,720 --> 00:15:03,040
demo apps out there that are kind of

00:15:00,069 --> 00:15:04,720
like like a digital synthesizer or you

00:15:03,040 --> 00:15:09,010
could you can do all sorts of cool stuff

00:15:04,720 --> 00:15:12,490
with it but for this example we've got

00:15:09,010 --> 00:15:14,410
this this use case here and we've we'll

00:15:12,490 --> 00:15:16,750
have these two keyboards and the Red Hat

00:15:14,410 --> 00:15:19,360
booth if you feel like stopping by and

00:15:16,750 --> 00:15:26,589
plugging in to test it out with your own

00:15:19,360 --> 00:15:27,650
code so I think did we ever get through

00:15:26,589 --> 00:15:30,440
to the end of it

00:15:27,650 --> 00:15:31,820
let's see if we can get through oh now

00:15:30,440 --> 00:15:33,920
I've got it in a bat oh I'm on the wrong

00:15:31,820 --> 00:15:37,760
octave your piece of information

00:15:33,920 --> 00:15:41,360
combined score five we need to practice

00:15:37,760 --> 00:15:46,460
some more there you go back to school

00:15:41,360 --> 00:15:49,700
all right so I don't know what we did to

00:15:46,460 --> 00:15:52,850
it but um yeah so that that gives you a

00:15:49,700 --> 00:15:54,430
sense of how you can work you know a web

00:15:52,850 --> 00:15:57,260
application with this MIDI data

00:15:54,430 --> 00:15:58,940
something else in case this is new to

00:15:57,260 --> 00:16:01,190
you all like it was to me so I'm just

00:15:58,940 --> 00:16:04,160
using SVG to draw the staff in the notes

00:16:01,190 --> 00:16:05,600
and then basically just I've got the

00:16:04,160 --> 00:16:07,820
measurements of like where the note

00:16:05,600 --> 00:16:12,230
needs to be placed relative to this

00:16:07,820 --> 00:16:13,610
staff but I hadn't worked with SVG much

00:16:12,230 --> 00:16:15,500
in the past and I didn't realize you

00:16:13,610 --> 00:16:20,630
couldn't just like set the color of it

00:16:15,500 --> 00:16:23,540
you can't but you can use filter filter

00:16:20,630 --> 00:16:26,600
on it to get the color to be what you

00:16:23,540 --> 00:16:29,029
want and it's really kind of interesting

00:16:26,600 --> 00:16:30,920
how that works so you can like rotate

00:16:29,029 --> 00:16:32,660
the hue if you think about on the color

00:16:30,920 --> 00:16:34,040
wheel and this might be obvious to

00:16:32,660 --> 00:16:35,330
everybody but me but I thought that was

00:16:34,040 --> 00:16:38,120
pretty awesome

00:16:35,330 --> 00:16:43,250
to go from one color to another for

00:16:38,120 --> 00:16:47,089
these SVG things so bonus all right so

00:16:43,250 --> 00:16:48,709
that was our demo and then there's a lot

00:16:47,089 --> 00:16:50,779
of information out there that I also

00:16:48,709 --> 00:16:53,060
want to point to I used a lot of

00:16:50,779 --> 00:16:57,589
resources when I was figuring this out

00:16:53,060 --> 00:16:59,900
myself one of the best ones I found was

00:16:57,589 --> 00:17:02,420
this article I'm getting started with

00:16:59,900 --> 00:17:06,140
the web MIDI API there is an awesome

00:17:02,420 --> 00:17:09,679
example where they are doing they

00:17:06,140 --> 00:17:11,750
programmed kind of like a luck code for

00:17:09,679 --> 00:17:13,280
like almost like an escape room thing

00:17:11,750 --> 00:17:16,309
where you had to figure out like the

00:17:13,280 --> 00:17:21,770
pattern of keys to play to like solve a

00:17:16,309 --> 00:17:23,780
puzzle like in Goonies ooh maybe like in

00:17:21,770 --> 00:17:29,079
giant they have to play the notes and

00:17:23,780 --> 00:17:29,079
Goonies totally like Goonies then

00:17:29,980 --> 00:17:36,860
totally um I'm so horrified that I can't

00:17:34,610 --> 00:17:38,240
remember that part of the movie but but

00:17:36,860 --> 00:17:39,770
it's a really cool example they've got

00:17:38,240 --> 00:17:42,279
some of the code there and that's doing

00:17:39,770 --> 00:17:45,229
a slightly more complex thing

00:17:42,279 --> 00:17:47,149
that's not a just a pure music learning

00:17:45,229 --> 00:17:50,419
application to it there's also

00:17:47,149 --> 00:17:52,039
information on the web MIDI API on MIDI

00:17:50,419 --> 00:17:53,359
org which is a great resource if you

00:17:52,039 --> 00:17:56,450
just want to learn more about MIDI in

00:17:53,359 --> 00:17:58,009
general this page here also has a bunch

00:17:56,450 --> 00:18:01,460
of links out to cool examples and demos

00:17:58,009 --> 00:18:05,019
and things like that this is the slides

00:18:01,460 --> 00:18:05,019
and then if you want to play around with

00:18:05,229 --> 00:18:10,429
the code for this demo you can find it

00:18:07,999 --> 00:18:12,109
here again like I said it's scrappy

00:18:10,429 --> 00:18:15,590
there's probably ways it could be way

00:18:12,109 --> 00:18:18,259
more efficient but it works and you are

00:18:15,590 --> 00:18:22,340
welcome to to try it out ahead in bass

00:18:18,259 --> 00:18:24,889
clef if you want and let me know if you

00:18:22,340 --> 00:18:26,450
have any questions so we finished a

00:18:24,889 --> 00:18:28,580
little bit early does anybody have

00:18:26,450 --> 00:18:41,840
questions about this or wanted to come

00:18:28,580 --> 00:18:44,869
play the keyboard yeah no I'm curious

00:18:41,840 --> 00:18:48,200
now though yeah question was about

00:18:44,869 --> 00:18:50,239
google magenta I've seen some demos and

00:18:48,200 --> 00:18:53,869
it's definitely on my list of things to

00:18:50,239 --> 00:18:56,239
look into I have not personally had

00:18:53,869 --> 00:18:57,559
experience with it but it looks really

00:18:56,239 --> 00:19:00,429
really interesting did you have a

00:18:57,559 --> 00:19:00,429
comment on that

00:19:12,740 --> 00:19:15,980
that's cool

00:19:35,090 --> 00:19:43,529
yeah yeah really cool stuff you said he

00:19:40,200 --> 00:19:47,370
if you didn't weren't able to hear start

00:19:43,529 --> 00:19:50,580
off a melody and it will detect based on

00:19:47,370 --> 00:19:53,700
the first couple notes will follow this

00:19:50,580 --> 00:19:58,320
progression chord progression and try to

00:19:53,700 --> 00:19:59,509
make something Bach style sounding based

00:19:58,320 --> 00:20:04,830
on tensorflow

00:19:59,509 --> 00:20:07,559
neural nets and and yeah outputting MIDI

00:20:04,830 --> 00:20:10,590
I guess well I'm not sure yeah probably

00:20:07,559 --> 00:20:16,559
MIDI yeah but magenta sounds like a

00:20:10,590 --> 00:20:25,980
really interesting creative process to

00:20:16,559 --> 00:20:27,840
the research in here we were just using

00:20:25,980 --> 00:20:29,399
OneNote it looked like what about if

00:20:27,840 --> 00:20:31,440
there's a chord progression and there's

00:20:29,399 --> 00:20:34,049
multiple notes anything special you

00:20:31,440 --> 00:20:36,480
think to handle those like for example I

00:20:34,049 --> 00:20:38,100
know human hands won't precisely hit the

00:20:36,480 --> 00:20:39,980
court of the exact same millisecond for

00:20:38,100 --> 00:20:41,669
example but it should be considered I

00:20:39,980 --> 00:20:44,519
don't know what do you think about that

00:20:41,669 --> 00:20:45,990
though in this I don't remember the

00:20:44,519 --> 00:20:47,580
actual answer to your question but I

00:20:45,990 --> 00:20:49,679
know that there was some chord related

00:20:47,580 --> 00:20:50,429
stuff in this example here I remember

00:20:49,679 --> 00:20:52,649
reading about it

00:20:50,429 --> 00:21:00,299
I don't remember precisely how that's

00:20:52,649 --> 00:21:04,500
handled the the note on callback or hook

00:21:00,299 --> 00:21:07,559
that you have can catch multiple note on

00:21:04,500 --> 00:21:09,779
events and so just because one note has

00:21:07,559 --> 00:21:11,639
been pressed on doesn't mean that

00:21:09,779 --> 00:21:14,970
they've let the button go yeah you're

00:21:11,639 --> 00:21:17,220
just signaling a press not a release of

00:21:14,970 --> 00:21:19,860
the button so that's a separate event

00:21:17,220 --> 00:21:22,860
and you have to catch them both or the

00:21:19,860 --> 00:21:25,500
note will stay stuck on so sometimes

00:21:22,860 --> 00:21:28,679
you'll have when you're doing MIDI if it

00:21:25,500 --> 00:21:31,350
misses the note off event it'll just be

00:21:28,679 --> 00:21:35,340
like have this long tone and you'll have

00:21:31,350 --> 00:21:38,330
to run a clear all notes command to

00:21:35,340 --> 00:21:41,190
basically signal that it should be clear

00:21:38,330 --> 00:21:42,480
so hopefully you don't have to run clear

00:21:41,190 --> 00:21:48,990
all notes but these are all asynchronous

00:21:42,480 --> 00:21:50,909
so that would be a poly poly notes I

00:21:48,990 --> 00:21:54,059
don't know yeah that makes perfect sense

00:21:50,909 --> 00:21:55,470
I think sorry um we're only keeping

00:21:54,059 --> 00:21:56,669
track of like one thing at a given time

00:21:55,470 --> 00:21:58,289
but if you were keeping track of how

00:21:56,669 --> 00:21:59,789
many had been down and then where they

00:21:58,289 --> 00:22:01,379
lifted back up that would work there's

00:21:59,789 --> 00:22:04,500
also something I can't remember the name

00:22:01,379 --> 00:22:05,700
for it right now but there's another

00:22:04,500 --> 00:22:06,990
message that can come through if you've

00:22:05,700 --> 00:22:10,529
pressed down the key and then you press

00:22:06,990 --> 00:22:13,409
more like yeah see I don't know these

00:22:10,529 --> 00:22:17,549
things I just know how to make my kids

00:22:13,409 --> 00:22:18,870
do their homework but but that's another

00:22:17,549 --> 00:22:21,570
message that can come through if that's

00:22:18,870 --> 00:22:23,730
useful for things outside of my kids

00:22:21,570 --> 00:22:25,919
doing their piano homework was there

00:22:23,730 --> 00:22:27,570
another question um yeah this isn't

00:22:25,919 --> 00:22:30,210
really a question just a comment to

00:22:27,570 --> 00:22:33,389
follow up on on the note off some MIDI

00:22:30,210 --> 00:22:36,419
keyboards don't actually send note offs

00:22:33,389 --> 00:22:39,389
they send note ons with zero velocity so

00:22:36,419 --> 00:22:41,010
just like FYI if like you're playing

00:22:39,389 --> 00:22:42,330
around with a really cheap keyboard and

00:22:41,010 --> 00:22:46,590
it like all of your notes are getting

00:22:42,330 --> 00:22:47,580
stuck like that's probably why good nice

00:22:46,590 --> 00:22:51,779
nice feedback

00:22:47,580 --> 00:22:56,510
yeah the these controllers that we had

00:22:51,779 --> 00:22:59,669
that Jan and I are using have aftertouch

00:22:56,510 --> 00:23:01,830
velocity so you can play a note and then

00:22:59,669 --> 00:23:05,669
kind of hit it again and it'll send

00:23:01,830 --> 00:23:08,879
another the after touch event but that

00:23:05,669 --> 00:23:14,460
is something that's been kind of added

00:23:08,879 --> 00:23:16,860
on to MIDI in later years and it's funny

00:23:14,460 --> 00:23:20,820
there's still some clear kind of

00:23:16,860 --> 00:23:26,940
limitations with the language of MIDI I

00:23:20,820 --> 00:23:30,809
think that one of the absolute limits

00:23:26,940 --> 00:23:34,309
since the 80s has been the the range of

00:23:30,809 --> 00:23:35,759
values you can express has to be 0 to

00:23:34,309 --> 00:23:39,090
00:23:35,759 --> 00:23:42,919
that's your you know the largest integer

00:23:39,090 --> 00:23:46,429
you can basically have within this so

00:23:42,919 --> 00:23:48,799
you can you can do a lot but if you want

00:23:46,429 --> 00:23:51,919
to get really fine details you almost

00:23:48,799 --> 00:24:09,340
have to fake the tempo to add more data

00:23:51,919 --> 00:24:15,590
or something but whoa ho revolutionary

00:24:09,340 --> 00:24:18,619
the first I've heard MIDI 2.0 is a thing

00:24:15,590 --> 00:24:21,710
and it's been out a couple weeks and it

00:24:18,619 --> 00:24:25,429
has floating points incredible

00:24:21,710 --> 00:24:28,549
oh yeah no hardware yeah yeah good luck

00:24:25,429 --> 00:24:33,769
finding a keyboard or an API for that

00:24:28,549 --> 00:24:36,919
one yeah yeah that'll be really

00:24:33,769 --> 00:24:40,970
interesting more expressive quality I

00:24:36,919 --> 00:24:43,340
guess and in the MIDI yeah anyway good

00:24:40,970 --> 00:24:44,779
luck experimenting with this stuff a

00:24:43,340 --> 00:24:49,580
hundred and twenty seven different

00:24:44,779 --> 00:24:53,059
values is still a lot to work with and

00:24:49,580 --> 00:24:55,190
you you have a full range of notes and a

00:24:53,059 --> 00:24:57,139
full range of chanted there's twelve

00:24:55,190 --> 00:25:01,759
channels to work on so you could send a

00:24:57,139 --> 00:25:03,470
lot of data over a MIDI bus and yeah

00:25:01,759 --> 00:25:06,470
it's a fun thing to work with for all

00:25:03,470 --> 00:25:08,600
kinds of automation so I hope you enjoy

00:25:06,470 --> 00:25:10,639
it and have learned something fun

00:25:08,600 --> 00:25:13,159
you got any closing thoughts Jan no

00:25:10,639 --> 00:25:15,679
except that uh I hope you learned a

00:25:13,159 --> 00:25:18,590
little something about MIDI and can do

00:25:15,679 --> 00:25:21,019
more creative things with this then then

00:25:18,590 --> 00:25:23,840
I've done here yeah stop by the booth to

00:25:21,019 --> 00:25:26,749
tell us your ideas of if you plan on

00:25:23,840 --> 00:25:28,340
doing any fun automation or many

00:25:26,749 --> 00:25:31,370
projects we'd love to hear about them

00:25:28,340 --> 00:25:33,430
thanks for attending all yeah

00:25:31,370 --> 00:25:33,430

YouTube URL: https://www.youtube.com/watch?v=lWQFA3baiG4


