Title: Workshop: Cloud Native Development for Node.js Engineers - Luke Holmquist, Red Hat
Publication date: 2020-05-11
Playlist: Node + JS Interactive 2019
Description: 
	Workshop: Cloud Native Development for Node.js Engineers - Luke Holmquist, Red Hat
Speakers: Lucas Holmquist
As cloud services and deployment platforms have come to bear more and more responsibility for the “Enterprise” features of modern application development, Node.js becomes more appealing for enterprise engineers who want to take advantage of its light weight, quick startup time, developer productivity and overall happiness.

But cloud native development can seem daunting. How do you both write an app and also deal with automation, service discovery, observability, immutability, scalability and all of the other cloud native and practices?

It’s a lot to keep track of. It’s a lot to do. It’s scary!

But it doesn’t have to be. In this workshop you will learn how to develop and deploy Kubernetes managed Node.js applications. By the time we’re done, you will have created a Node.js application backed by Node.js microservices, and deployed it to a live Kubernetes cluster.
Captions: 
	00:00:00,030 --> 00:00:04,230
all right I suppose we could get started

00:00:02,000 --> 00:00:05,759
as a speaker they give us an attendance

00:00:04,230 --> 00:00:06,870
list so we'll probably just do like the

00:00:05,759 --> 00:00:08,580
attendance first if you guys want to

00:00:06,870 --> 00:00:10,469
raise your hands if you're here now I'm

00:00:08,580 --> 00:00:11,550
just kidding that's yeah we're not gonna

00:00:10,469 --> 00:00:14,880
do that

00:00:11,550 --> 00:00:16,920
hi everybody so I'm Luke Holmquist that

00:00:14,880 --> 00:00:18,869
were for Red Hat and today we're gonna

00:00:16,920 --> 00:00:22,080
be talking about this fun topic cloud

00:00:18,869 --> 00:00:24,330
any development which I'm sure you may

00:00:22,080 --> 00:00:26,420
have gone to a talk that today or maybe

00:00:24,330 --> 00:00:29,550
possibly tomorrow that is very similar

00:00:26,420 --> 00:00:31,640
because I saw on the schedule that was

00:00:29,550 --> 00:00:34,200
very a lot of very similar things but

00:00:31,640 --> 00:00:37,309
we'll see if this is any different right

00:00:34,200 --> 00:00:39,270
so like I said I'm a engineer at Red Hat

00:00:37,309 --> 00:00:41,280
Maya there's my twitter handle if you

00:00:39,270 --> 00:00:43,680
want to follow me also a huge fish fan

00:00:41,280 --> 00:00:45,329
so if anybody is also a huge fish fan

00:00:43,680 --> 00:00:48,090
and anybody in the room raise of hands

00:00:45,329 --> 00:00:50,030
nobody awesome so if you want to come

00:00:48,090 --> 00:00:52,590
talk to me later would be great

00:00:50,030 --> 00:00:55,500
also this episode this picture here is

00:00:52,590 --> 00:00:57,930
from 2009 and I realized that there's

00:00:55,500 --> 00:01:01,109
that whole 10-year challenge stupid

00:00:57,930 --> 00:01:02,850
thing so that's from that's ten years

00:01:01,109 --> 00:01:04,530
ago and this is what I look like now in

00:01:02,850 --> 00:01:08,729
2019 so there you go there's the

00:01:04,530 --> 00:01:09,900
challenge completed all right so yeah so

00:01:08,729 --> 00:01:12,840
alright so what we learned says probably

00:01:09,900 --> 00:01:16,020
some some ways to develop and deploy

00:01:12,840 --> 00:01:17,610
cloud native applications super Nettie's

00:01:16,020 --> 00:01:18,720
or slash openshift

00:01:17,610 --> 00:01:21,270
it's gonna be probably the platform that

00:01:18,720 --> 00:01:22,740
we're going to use so we're gonna need

00:01:21,270 --> 00:01:25,590
for this workshop and it is only an hour

00:01:22,740 --> 00:01:27,270
long so we'll try to go quick with these

00:01:25,590 --> 00:01:29,400
first few slides that I have that kind

00:01:27,270 --> 00:01:31,470
of introduce some topic or some concepts

00:01:29,400 --> 00:01:34,470
and then the second half of it will just

00:01:31,470 --> 00:01:36,720
be like in the actual app and doing some

00:01:34,470 --> 00:01:39,960
things so right so you'd really just

00:01:36,720 --> 00:01:41,189
need your laptop and a web browser so

00:01:39,960 --> 00:01:44,759
hopefully everybody has a web browser

00:01:41,189 --> 00:01:46,619
installed on their laptop hopefully that

00:01:44,759 --> 00:01:47,640
actually has JavaScript enabled so that

00:01:46,619 --> 00:01:50,670
was the other that was the other thing

00:01:47,640 --> 00:01:53,520
right so right so first survey so who is

00:01:50,670 --> 00:01:56,780
uh sorry did you not have a web browser

00:01:53,520 --> 00:01:59,939
installed that we were like yeah okay

00:01:56,780 --> 00:02:01,829
yeah yeah so anybody here writing nodejs

00:01:59,939 --> 00:02:04,110
applications I mean this is a node

00:02:01,829 --> 00:02:06,420
conference so I would imagine I'd see a

00:02:04,110 --> 00:02:08,849
bunch of hands all right cool anybody

00:02:06,420 --> 00:02:11,400
using containers to deploy their stuff

00:02:08,849 --> 00:02:13,230
all right cool have fun good good chunk

00:02:11,400 --> 00:02:15,540
people

00:02:13,230 --> 00:02:16,920
buddy familiar with the cube CTO cube

00:02:15,540 --> 00:02:18,659
cut' oh whatever you want to power you

00:02:16,920 --> 00:02:20,879
ever want to pronounce it or maybe the

00:02:18,659 --> 00:02:23,700
open ship command-line CLI tools

00:02:20,879 --> 00:02:25,650
anything now that's probably why you're

00:02:23,700 --> 00:02:29,610
in the workshop to learn a little bit

00:02:25,650 --> 00:02:33,599
more about that anybody name a handful

00:02:29,610 --> 00:02:33,840
of committees objects no yeah there you

00:02:33,599 --> 00:02:38,010
go

00:02:33,840 --> 00:02:40,349
awesome any anybody can name maybe a

00:02:38,010 --> 00:02:42,120
cloud native pattern or something now

00:02:40,349 --> 00:02:45,780
that it's probably why you're here - to

00:02:42,120 --> 00:02:47,819
find out also who do I have for anybody

00:02:45,780 --> 00:02:50,430
from your up here anyway travel from

00:02:47,819 --> 00:02:59,069
Europe North America East Coast West

00:02:50,430 --> 00:03:02,310
Coast South America Asia okay cool cool

00:02:59,069 --> 00:03:05,129
Australia I was gonna say if you quote

00:03:02,310 --> 00:03:06,959
draw from that impressive but alright

00:03:05,129 --> 00:03:08,519
anyway that's enough for these things

00:03:06,959 --> 00:03:10,920
right so some cloud native patterns that

00:03:08,519 --> 00:03:12,120
were you take a look at or this single

00:03:10,920 --> 00:03:13,859
responsibility pattern which I'm sure

00:03:12,120 --> 00:03:16,769
you've heard about you know it's like do

00:03:13,859 --> 00:03:20,730
one thing do it well I'm just kind of

00:03:16,769 --> 00:03:23,700
microservices basically is this putting

00:03:20,730 --> 00:03:25,079
things into containers making having

00:03:23,700 --> 00:03:27,090
health checks for your app which is

00:03:25,079 --> 00:03:29,489
essentially making you know checking to

00:03:27,090 --> 00:03:31,260
see if your app is running or when if

00:03:29,489 --> 00:03:33,030
it's ready to run and we'll see examples

00:03:31,260 --> 00:03:35,970
of these too and resilience something

00:03:33,030 --> 00:03:39,150
like circuit breaking so if your app

00:03:35,970 --> 00:03:41,730
goes down what you can do to kind of

00:03:39,150 --> 00:03:43,440
mitigate that and have different fall

00:03:41,730 --> 00:03:45,030
backs and that kind of thing and there's

00:03:43,440 --> 00:03:46,410
a whole bunch of other things that I

00:03:45,030 --> 00:03:50,010
didn't really write down this list

00:03:46,410 --> 00:03:51,630
because there's a lot right so what is

00:03:50,010 --> 00:03:52,829
kubernetes I'm sure if you had gone to

00:03:51,630 --> 00:03:54,000
one of the talks today that is about

00:03:52,829 --> 00:03:55,980
chrome raised you've kind of already

00:03:54,000 --> 00:03:58,379
learned that basically it's a platform

00:03:55,980 --> 00:04:01,829
for container organ orchestration and a

00:03:58,379 --> 00:04:03,959
lot of other cool buzzwords so I'm gonna

00:04:01,829 --> 00:04:06,810
assume that you guys have a little bit

00:04:03,959 --> 00:04:09,090
of info on what Cooper nase is so just

00:04:06,810 --> 00:04:11,060
to kind of do this workshop and get it

00:04:09,090 --> 00:04:13,440
moving we'll just kind of keep going

00:04:11,060 --> 00:04:15,060
just kind of I just wanted to kind of do

00:04:13,440 --> 00:04:16,500
this a little small little overview of

00:04:15,060 --> 00:04:19,560
some of these concepts right for coop

00:04:16,500 --> 00:04:21,719
that you would use when doing you know

00:04:19,560 --> 00:04:22,950
Cabernets deployments so basically you

00:04:21,719 --> 00:04:24,270
have this and this is gonna work from

00:04:22,950 --> 00:04:26,190
like the smallest thing it's gonna go

00:04:24,270 --> 00:04:27,900
kind of up to like a higher level

00:04:26,190 --> 00:04:30,270
that's kind of the way this is gonna go

00:04:27,900 --> 00:04:32,880
so a container is the smallest your

00:04:30,270 --> 00:04:34,380
smallest thing you have and then you

00:04:32,880 --> 00:04:36,270
know there's these container images that

00:04:34,380 --> 00:04:37,590
you combine with your code and you

00:04:36,270 --> 00:04:40,560
that's actually what creates the

00:04:37,590 --> 00:04:42,720
container and then those containers are

00:04:40,560 --> 00:04:44,520
stored in an imagery in image registry

00:04:42,720 --> 00:04:45,690
somewhere something like docker hub if

00:04:44,520 --> 00:04:47,910
you're using open ship open ship

00:04:45,690 --> 00:04:48,930
actually has its own internal registry

00:04:47,910 --> 00:04:52,220
where you can store your things like

00:04:48,930 --> 00:04:54,270
that maybe Quay i/o or something else

00:04:52,220 --> 00:04:57,630
and then inside the image straight

00:04:54,270 --> 00:04:58,770
inside the registry that's where you can

00:04:57,630 --> 00:05:03,110
store all your different versions and

00:04:58,770 --> 00:05:05,490
everything of your images and then

00:05:03,110 --> 00:05:08,040
basically that container that you we've

00:05:05,490 --> 00:05:10,260
been talking about will get wrapped in a

00:05:08,040 --> 00:05:15,330
pod and that's what you deploy on

00:05:10,260 --> 00:05:16,470
kubernetes all right so what an

00:05:15,330 --> 00:05:18,300
appointment is the deployment is

00:05:16,470 --> 00:05:20,010
actually just the descriptor for that

00:05:18,300 --> 00:05:21,840
pod saying okay what this menu replicas

00:05:20,010 --> 00:05:24,750
I want this much CPU or this much memory

00:05:21,840 --> 00:05:26,280
or whatever something I forgot to

00:05:24,750 --> 00:05:30,390
mention I'm not a DevOps person at all

00:05:26,280 --> 00:05:32,730
like hate it if yeah if I can avoid it I

00:05:30,390 --> 00:05:33,960
will but so a lot of this stuff is gonna

00:05:32,730 --> 00:05:36,750
be very kind of more of a high-level

00:05:33,960 --> 00:05:39,480
more of like a developer focus than like

00:05:36,750 --> 00:05:41,130
like oh we need to boost the memory for

00:05:39,480 --> 00:05:43,890
this and make it had this have this many

00:05:41,130 --> 00:05:45,840
CPUs and this so I'm sorry if that's

00:05:43,890 --> 00:05:48,120
what you're looking for in this there's

00:05:45,840 --> 00:05:50,820
more there's actually a nice for jeaious

00:05:48,120 --> 00:05:52,169
people talk tomorrow morning from some

00:05:50,820 --> 00:05:53,910
of my colleagues which they go earn a

00:05:52,169 --> 00:05:55,200
little bit more depth there so if you

00:05:53,910 --> 00:05:58,380
want to check that out that's it 9

00:05:55,200 --> 00:05:59,669
o'clock tomorrow quick plug right so

00:05:58,380 --> 00:06:03,240
there's this other concept of services

00:05:59,669 --> 00:06:04,640
this is essentially if you want to have

00:06:03,240 --> 00:06:06,960
those pods and those deployments

00:06:04,640 --> 00:06:09,030
accessible physical side then you put a

00:06:06,960 --> 00:06:10,440
service on top of that it's kind of like

00:06:09,030 --> 00:06:12,630
a load balancer so if you have multiple

00:06:10,440 --> 00:06:15,060
pods or if you have a particular

00:06:12,630 --> 00:06:16,560
container that has multiple pods so you

00:06:15,060 --> 00:06:20,220
can have maybe three or something like

00:06:16,560 --> 00:06:22,290
that the service will connect that and

00:06:20,220 --> 00:06:26,490
then kind of low balance in the traffic

00:06:22,290 --> 00:06:28,380
to throughout all those and it's also a

00:06:26,490 --> 00:06:30,120
way for other applications that you

00:06:28,380 --> 00:06:33,090
might have in your cluster to talk to

00:06:30,120 --> 00:06:34,890
each other as well with a service and

00:06:33,090 --> 00:06:38,370
then this is something this is more of

00:06:34,890 --> 00:06:40,169
an open ship specific thing or route but

00:06:38,370 --> 00:06:43,830
what it does is essentially it lives on

00:06:40,169 --> 00:06:47,129
of service and it makes it have a more

00:06:43,830 --> 00:06:49,669
readable URL for easier access because

00:06:47,129 --> 00:06:52,169
we'll see in a minute one of the apps

00:06:49,669 --> 00:06:54,389
how just a plain community service works

00:06:52,169 --> 00:06:55,830
and what you have to do to get access to

00:06:54,389 --> 00:06:59,099
it and then we'll see like a route and

00:06:55,830 --> 00:07:02,340
and just see a little bit yeah the

00:06:59,099 --> 00:07:04,439
niceties that that adds and then kind of

00:07:02,340 --> 00:07:05,879
going up the tier a little bit and then

00:07:04,439 --> 00:07:07,759
we have a namespace and that's

00:07:05,879 --> 00:07:10,319
essentially kind of like the grouping of

00:07:07,759 --> 00:07:12,449
kind of all your applications or all

00:07:10,319 --> 00:07:14,550
your services and you can break them up

00:07:12,449 --> 00:07:16,409
in between you know a bunch of different

00:07:14,550 --> 00:07:17,580
ways between groups departments and

00:07:16,409 --> 00:07:21,719
they're all kind of isolated from each

00:07:17,580 --> 00:07:22,860
other right so we talked about a little

00:07:21,719 --> 00:07:27,960
bit of a kubernetes and so these

00:07:22,860 --> 00:07:31,080
concepts openshift is basically red-hats

00:07:27,960 --> 00:07:33,120
implementation of kubernetes so it's if

00:07:31,080 --> 00:07:34,680
you wanted to run just doom balloon

00:07:33,120 --> 00:07:36,479
plain kubernetes on OpenShift you could

00:07:34,680 --> 00:07:38,789
do that I'll be ship does add some

00:07:36,479 --> 00:07:40,499
niceties I'm not gonna not a marketing

00:07:38,789 --> 00:07:42,029
person I'm not gonna go and like oh this

00:07:40,499 --> 00:07:43,620
is the this is the differences and stuff

00:07:42,029 --> 00:07:46,469
but it just adds some things on top of

00:07:43,620 --> 00:07:47,909
it which are kind of nice and one of

00:07:46,469 --> 00:07:49,650
those things which we will see in an

00:07:47,909 --> 00:07:53,819
example is this thing called source to

00:07:49,650 --> 00:07:57,330
image so basically what source image is

00:07:53,819 --> 00:08:00,210
is you can you can basically take your

00:07:57,330 --> 00:08:02,279
code and take a specialized docker image

00:08:00,210 --> 00:08:03,330
and combine them together so you can

00:08:02,279 --> 00:08:04,560
take your source code that having to

00:08:03,330 --> 00:08:06,029
write any docker files or anything like

00:08:04,560 --> 00:08:07,860
that and create a docker image and a

00:08:06,029 --> 00:08:10,439
resulting image that you then you could

00:08:07,860 --> 00:08:13,050
then deploy so if you're doing on that

00:08:10,439 --> 00:08:15,930
and so this little picture here actually

00:08:13,050 --> 00:08:18,149
shows kind of like a two-stage one so

00:08:15,930 --> 00:08:19,080
the first sort of top part is kind of

00:08:18,149 --> 00:08:20,520
what we're talking about here where you

00:08:19,080 --> 00:08:22,740
take the image you take your source code

00:08:20,520 --> 00:08:24,569
this build happens and then your

00:08:22,740 --> 00:08:28,469
application image is essentially just a

00:08:24,569 --> 00:08:29,879
docker image there right so and then

00:08:28,469 --> 00:08:32,789
within an open chip there's this concept

00:08:29,879 --> 00:08:34,250
of the build and we'll see that in a

00:08:32,789 --> 00:08:36,390
minute

00:08:34,250 --> 00:08:39,329
alright so I kind of want to just go

00:08:36,390 --> 00:08:40,800
quick through that okay good 10 myths so

00:08:39,329 --> 00:08:41,969
then we have the rest of the the kind of

00:08:40,800 --> 00:08:45,420
the 15 minutes or whatever for this hour

00:08:41,969 --> 00:08:48,180
to kind of go through this so if anybody

00:08:45,420 --> 00:08:50,069
everybody wants to go to this link this

00:08:48,180 --> 00:08:52,319
will open up an ether pad you might have

00:08:50,069 --> 00:08:53,670
to I'm not sure if you're gonna have to

00:08:52,319 --> 00:08:55,770
say allow the

00:08:53,670 --> 00:08:56,850
it's a self-signed certificate on here

00:08:55,770 --> 00:08:58,440
so you might have to say you know

00:08:56,850 --> 00:09:00,180
chromite or whatever you're using might

00:08:58,440 --> 00:09:05,400
freak out so you might just have to

00:09:00,180 --> 00:09:07,200
allow the the exception and I'm gonna

00:09:05,400 --> 00:09:08,700
actually kind of switch in between back

00:09:07,200 --> 00:09:12,510
and forth because I do have things open

00:09:08,700 --> 00:09:13,470
if that's too small let me know right so

00:09:12,510 --> 00:09:20,370
you should see any other pad like this

00:09:13,470 --> 00:09:24,900
so connect so basically yeah so I'm yeah

00:09:20,370 --> 00:09:26,700
here we go the link yeah it's a bit lame

00:09:24,900 --> 00:09:28,640
ah yeah so basically when you go into

00:09:26,700 --> 00:09:33,050
that what you're going to want to do is

00:09:28,640 --> 00:09:33,050
is that good for the link we're breasts

00:09:36,440 --> 00:09:41,670
right so yes so when you and when you go

00:09:40,590 --> 00:09:43,500
when you do go into that you're gonna

00:09:41,670 --> 00:09:45,420
see all these users so if you could just

00:09:43,500 --> 00:09:47,250
claim one you don't put your name you

00:09:45,420 --> 00:09:49,440
could put like your world Warcraft

00:09:47,250 --> 00:09:51,930
character name I don't really care just

00:09:49,440 --> 00:09:53,340
so somebody else doesn't use it and

00:09:51,930 --> 00:09:55,500
we'll use that and you'll use that

00:09:53,340 --> 00:10:00,050
username with the password of OpenShift

00:09:55,500 --> 00:10:00,050
I'm coming up as your logins for things

00:10:00,710 --> 00:10:20,340
so right there's are people in that or

00:10:04,800 --> 00:10:23,180
no okay all right I wonder if yeah I was

00:10:20,340 --> 00:10:23,180
just using this too

00:10:28,529 --> 00:10:34,759
well this might make the the workshop a

00:10:31,169 --> 00:10:34,759
little harder to do

00:10:34,789 --> 00:10:41,879
all right let's it could be that this

00:10:37,769 --> 00:10:45,139
service is possibly down so this is so

00:10:41,879 --> 00:10:47,519
basically there's a hosted service that

00:10:45,139 --> 00:10:48,809
that's supposed to be able to open up a

00:10:47,519 --> 00:10:55,649
terminal we can do all this stuff within

00:10:48,809 --> 00:10:59,599
there so if that is not working okay

00:10:55,649 --> 00:10:59,599
okay so it's possible that's

00:11:15,830 --> 00:11:22,570
possible if they might have Lytle the

00:11:17,840 --> 00:11:22,570
service on me which that's gonna be fun

00:11:26,740 --> 00:11:37,660
are you able to get outs actually out to

00:11:29,180 --> 00:11:37,660
the Internet okay okay

00:11:39,470 --> 00:11:42,910
it's pretty slow on that

00:11:59,870 --> 00:12:02,500
well

00:12:06,610 --> 00:12:10,460
all right I guess we'll just have to

00:12:08,540 --> 00:12:11,840
restart the thing which might take a

00:12:10,460 --> 00:12:13,730
little time to come up but maybe we can

00:12:11,840 --> 00:12:17,150
just they can just go through the slides

00:12:13,730 --> 00:12:18,890
and then if it does come up it will be

00:12:17,150 --> 00:12:20,330
up for a little while and if we do run

00:12:18,890 --> 00:12:23,480
it and I'm sure we'll run out of time

00:12:20,330 --> 00:12:26,360
but if we run out of time the slide

00:12:23,480 --> 00:12:28,450
should be somewhat self-explanatory and

00:12:26,360 --> 00:12:37,610
then like this should be up once we

00:12:28,450 --> 00:12:39,110
after after everything so oh my god you

00:12:37,610 --> 00:12:40,790
guys are seeing inside stuff right here

00:12:39,110 --> 00:12:43,280
everybody close their eyes for a while

00:12:40,790 --> 00:12:45,580
and I'd take care of this no I'm just

00:12:43,280 --> 00:12:45,580
kidding

00:13:19,710 --> 00:13:24,000
all right let me just will do this will

00:13:22,649 --> 00:13:28,020
restart thing and then kind of we'll go

00:13:24,000 --> 00:13:31,770
through the the things and we'll wait

00:13:28,020 --> 00:13:33,720
and see what happens before do that to

00:13:31,770 --> 00:13:34,890
make sure that everything is still

00:13:33,720 --> 00:13:40,050
broken

00:13:34,890 --> 00:13:42,620
okay yes I would like to reset our data

00:13:40,050 --> 00:13:42,620
okay

00:13:58,500 --> 00:14:02,829
okay that's probably take a few minutes

00:14:00,640 --> 00:14:08,709
sir so we'll just kind of I'll just go

00:14:02,829 --> 00:14:10,120
back to this okay

00:14:08,709 --> 00:14:11,769
right so what you were supposed to do

00:14:10,120 --> 00:14:13,450
there was go to this etherpad

00:14:11,769 --> 00:14:15,790
and what you're gonna do is when this

00:14:13,450 --> 00:14:17,500
all the stuff comes back up we're gonna

00:14:15,790 --> 00:14:18,970
everybody's gonna kind of take one of

00:14:17,500 --> 00:14:22,209
those users these are one through

00:14:18,970 --> 00:14:24,190
whatever it is and if the user one or

00:14:22,209 --> 00:14:26,399
user to use the user whatever user

00:14:24,190 --> 00:14:28,870
number is OMA ship will be the password

00:14:26,399 --> 00:14:31,839
and then once setup we're actually go to

00:14:28,870 --> 00:14:33,250
this cool terminal that that'll be

00:14:31,839 --> 00:14:36,760
running and that's where we do all our

00:14:33,250 --> 00:14:39,010
stuff you'll see this screen here it

00:14:36,760 --> 00:14:40,180
will say you know it will start

00:14:39,010 --> 00:14:46,990
provisioning this stuff and then we'll

00:14:40,180 --> 00:14:48,279
go into the terminal and then what we're

00:14:46,990 --> 00:14:50,050
gonna do is we're gonna log in we're

00:14:48,279 --> 00:14:52,029
gonna see who we are we're gonna go you

00:14:50,050 --> 00:14:53,800
know check out the version of the thing

00:14:52,029 --> 00:14:55,690
in while we're doing that you know keep

00:14:53,800 --> 00:15:04,839
it like this and then we can we can see

00:14:55,690 --> 00:15:06,010
if it reloads okay might take like 10

00:15:04,839 --> 00:15:07,630
minutes or something like that so I'm

00:15:06,010 --> 00:15:10,870
sure we can talk about something else

00:15:07,630 --> 00:15:12,970
and then we're gonna kind of treat a new

00:15:10,870 --> 00:15:14,860
project and that kind of thing so

00:15:12,970 --> 00:15:16,690
all right let's wait a few minutes for

00:15:14,860 --> 00:15:18,250
that thing so you guys we could talk

00:15:16,690 --> 00:15:21,880
about something else while we're while

00:15:18,250 --> 00:15:23,649
we're waiting you know how is uh what

00:15:21,880 --> 00:15:25,180
was your I guess what have people gone

00:15:23,649 --> 00:15:26,890
to already what's your favorite talk

00:15:25,180 --> 00:15:31,709
that's happened other than this one

00:15:26,890 --> 00:15:33,550
right now as and did anybody like

00:15:31,709 --> 00:15:37,500
anybody from New York New York

00:15:33,550 --> 00:15:40,300
from upstate nobody all right awesome

00:15:37,500 --> 00:15:44,890
Albany area Oh

00:15:40,300 --> 00:15:48,519
all right cool sweet anybody from New

00:15:44,890 --> 00:15:50,860
York City no no okay

00:15:48,519 --> 00:15:52,000
anybody actually from Montreal here Iran

00:15:50,860 --> 00:15:54,190
or Canada

00:15:52,000 --> 00:15:56,290
generally I heard this general area I

00:15:54,190 --> 00:15:58,930
guess I should ask right local people

00:15:56,290 --> 00:16:05,050
all right cool yeah

00:15:58,930 --> 00:16:07,260
locals yeah my favorite kind of fish the

00:16:05,050 --> 00:16:07,260
band

00:16:08,069 --> 00:16:16,169
okay so okay things are coming back up

00:16:11,559 --> 00:16:19,869
it looks like so yes okay awesome

00:16:16,169 --> 00:16:22,899
excellent let's see if the either pair

00:16:19,869 --> 00:16:24,759
thing yeah so we'll take actually take a

00:16:22,899 --> 00:16:27,629
look at that this would be a little fun

00:16:24,759 --> 00:16:34,509
little experiments for every night

00:16:27,629 --> 00:16:38,859
hoping Shh something right okay all

00:16:34,509 --> 00:16:41,949
right I will make this okay cool so this

00:16:38,859 --> 00:16:44,470
is a view of OpenShift right here all

00:16:41,949 --> 00:16:47,229
these things or pods we which we heard

00:16:44,470 --> 00:16:48,729
about a few minutes ago all these other

00:16:47,229 --> 00:16:50,919
things we'll all these are applications

00:16:48,729 --> 00:16:53,169
and that kind of thing this is actually

00:16:50,919 --> 00:16:55,319
our terminal app that we're waiting and

00:16:53,169 --> 00:16:57,669
actually it is running these little

00:16:55,319 --> 00:16:59,049
circles you know that when they're blue

00:16:57,669 --> 00:17:04,329
it means that they're they're now

00:16:59,049 --> 00:17:07,689
running the etherpad thing which is here

00:17:04,329 --> 00:17:08,819
it says is now running also so if we go

00:17:07,689 --> 00:17:14,379
back to the etherpad

00:17:08,819 --> 00:17:19,600
let's see if that comes up is it working

00:17:14,379 --> 00:17:23,919
oh all right cool it is slow yeah but

00:17:19,600 --> 00:17:25,329
it's working it is working okay yeah

00:17:23,919 --> 00:17:26,289
right so okay cool

00:17:25,329 --> 00:17:32,889
all right I think we're back in business

00:17:26,289 --> 00:17:35,019
here which yeah awesome okay so when

00:17:32,889 --> 00:17:37,029
that comes up like we said before we're

00:17:35,019 --> 00:17:40,840
gonna claim the username everybody claim

00:17:37,029 --> 00:17:43,230
username that comes up which it is

00:17:40,840 --> 00:17:43,230
coming up

00:17:52,360 --> 00:18:03,070
this is actually the look what the

00:17:54,760 --> 00:18:10,169
console looks like here probably not

00:18:03,070 --> 00:18:16,809
logged in yeah I'm cool let's see if I

00:18:10,169 --> 00:18:18,580
that was when I created okay so see when

00:18:16,809 --> 00:18:20,679
it's light blue that means it's not up

00:18:18,580 --> 00:18:24,059
it just looks like it just restarted

00:18:20,679 --> 00:18:26,350
again okay so all these pods should be

00:18:24,059 --> 00:18:27,970
they things wait like 15 minutes after

00:18:26,350 --> 00:18:30,309
everything comes up but we're kind of

00:18:27,970 --> 00:18:32,460
just clicking so we'll see what happens

00:18:30,309 --> 00:18:32,460
now

00:18:48,120 --> 00:18:51,120
yeah you can actually click into this

00:18:49,830 --> 00:18:54,330
this is actually clicking what will go

00:18:51,120 --> 00:18:56,100
through this if this ever works but I've

00:18:54,330 --> 00:18:59,250
now clicked into a pod you can actually

00:18:56,100 --> 00:19:04,789
check out the logs here if you want it

00:18:59,250 --> 00:19:04,789
to you can update some more logs Oh

00:19:05,659 --> 00:19:11,250
looks like it is uh MPM installing some

00:19:09,029 --> 00:19:14,909
things for the terminal or for the ether

00:19:11,250 --> 00:19:17,669
pad it's a review of applications yeah

00:19:14,909 --> 00:19:19,919
this thing up here this route basically

00:19:17,669 --> 00:19:22,980
this URL that's actually an open ship

00:19:19,919 --> 00:19:31,559
route that's you can click on that and

00:19:22,980 --> 00:19:43,350
that makes it a nice ok keeps restarting

00:19:31,559 --> 00:19:44,880
which is not great can ever let's go

00:19:43,350 --> 00:19:47,130
back to the slides real quick and maybe

00:19:44,880 --> 00:19:48,330
we can do something else like either

00:19:47,130 --> 00:19:49,919
pass because the ether pet is really

00:19:48,330 --> 00:19:52,500
just to get our username so maybe we can

00:19:49,919 --> 00:19:56,690
guess at it can people go try going to

00:19:52,500 --> 00:19:56,690
this terminal link Omi's make it bigger

00:19:58,669 --> 00:20:05,190
so when you go to this I forget you

00:20:03,600 --> 00:20:08,630
might have to say allow permissions

00:20:05,190 --> 00:20:14,610
there might be a screen first for that

00:20:08,630 --> 00:20:19,289
before it starts creating but if it asks

00:20:14,610 --> 00:20:22,289
you to log in I would you can use user

00:20:19,289 --> 00:20:23,850
and then try a I don't want everybody

00:20:22,289 --> 00:20:30,049
use the same user so that's gonna kind

00:20:23,850 --> 00:20:33,419
of be in a shoe if we don't do that but

00:20:30,049 --> 00:20:39,690
there's 75 total so if I have to I can

00:20:33,419 --> 00:20:43,710
be like 1 2 3 4 5 6 the console is good

00:20:39,690 --> 00:20:44,909
ok let's see if we're a bunch of

00:20:43,710 --> 00:20:50,490
Engineers here I feel like we could

00:20:44,909 --> 00:20:51,860
figure something out alright okay so the

00:20:50,490 --> 00:20:55,049
etherpad looks like it's working

00:20:51,860 --> 00:20:56,940
maybe yeah ok cool alright so yeah if

00:20:55,049 --> 00:20:59,700
you go back to this etherpad thing put

00:20:56,940 --> 00:21:00,760
your name or a mark of some kind that

00:20:59,700 --> 00:21:01,780
somebody knows

00:21:00,760 --> 00:21:03,250
want to put your name you just put

00:21:01,780 --> 00:21:08,560
something on there so you know which

00:21:03,250 --> 00:21:10,120
user you are alright good people are

00:21:08,560 --> 00:21:12,090
people are filling things in yeah we're

00:21:10,120 --> 00:21:21,460
all the way down 75 oh cool

00:21:12,090 --> 00:21:29,740
alright so people are are there no okay

00:21:21,460 --> 00:21:33,580
okay you okay so you're you can be used

00:21:29,740 --> 00:21:37,000
or 30 yeah an issue okay so I'll just

00:21:33,580 --> 00:21:38,500
put take in there okay now it looks like

00:21:37,000 --> 00:21:39,430
people are in there and they're doing

00:21:38,500 --> 00:21:42,460
stuff which is great

00:21:39,430 --> 00:21:44,560
oh so the password is gonna be open

00:21:42,460 --> 00:21:46,210
shift yeah oh sorry I can go back to the

00:21:44,560 --> 00:21:47,950
slide so you can see the actual stuff

00:21:46,210 --> 00:21:52,000
right yeah so the password will be a

00:21:47,950 --> 00:21:57,520
will be OpenShift so if we go back to

00:21:52,000 --> 00:21:58,780
here right okay so once you start

00:21:57,520 --> 00:21:59,800
getting into the terminal does anybody

00:21:58,780 --> 00:22:01,600
need me to put up the link for the

00:21:59,800 --> 00:22:05,230
terminal essentially it's the bitly link

00:22:01,600 --> 00:22:08,260
slash Montreal 2019 terminal I think it

00:22:05,230 --> 00:22:11,020
is I can go back one this is just a

00:22:08,260 --> 00:22:14,110
thing for the terminal just as well as

00:22:11,020 --> 00:22:16,480
it quick whatever yeah so once you go in

00:22:14,110 --> 00:22:18,850
there you'll see I'm gonna have to click

00:22:16,480 --> 00:22:23,200
allow for some permissions you'll see

00:22:18,850 --> 00:22:24,610
this thing provisioning and once you get

00:22:23,200 --> 00:22:26,860
through that you'll actually be in the

00:22:24,610 --> 00:22:29,800
terminal and you are gonna need to log

00:22:26,860 --> 00:22:30,370
in inside the terminal so which is ICU

00:22:29,800 --> 00:22:32,140
login

00:22:30,370 --> 00:22:34,690
- you which is then you specify your

00:22:32,140 --> 00:22:36,640
user don't actually put user and the n

00:22:34,690 --> 00:22:38,260
stands for your number just in case

00:22:36,640 --> 00:22:40,420
anybody didn't know that

00:22:38,260 --> 00:22:46,810
and then - P and then open shift is your

00:22:40,420 --> 00:22:53,050
password just I'm gonna kind of click

00:22:46,810 --> 00:22:55,600
around here so we can see things let's

00:22:53,050 --> 00:22:57,790
see I can see in the terminal people are

00:22:55,600 --> 00:22:59,590
terminals are getting created so yeah so

00:22:57,790 --> 00:23:01,180
these every time somebody logs into the

00:22:59,590 --> 00:23:05,740
terminal it's actually creating these

00:23:01,180 --> 00:23:07,890
pods right here that's actually not part

00:23:05,740 --> 00:23:10,540
of the whole presentation but since

00:23:07,890 --> 00:23:12,830
everything went to anyway so we're

00:23:10,540 --> 00:23:17,720
gonna we're gonna improvise

00:23:12,830 --> 00:23:20,360
yeah so alright cool

00:23:17,720 --> 00:23:21,260
yeah coats okay so just sure I don't

00:23:20,360 --> 00:23:22,430
know if everybody's in there but we're

00:23:21,260 --> 00:23:25,270
just gonna kind of move along just to

00:23:22,430 --> 00:23:28,250
kind of get things get things wrong here

00:23:25,270 --> 00:23:29,840
alright yeah so you gotta login if

00:23:28,250 --> 00:23:31,100
you're doing an OC Who am I after you've

00:23:29,840 --> 00:23:33,410
logged in you can see that you are the

00:23:31,100 --> 00:23:35,210
particular user that you logged in as if

00:23:33,410 --> 00:23:37,940
you use cube CTL version then you can

00:23:35,210 --> 00:23:41,680
see that those thing that that

00:23:37,940 --> 00:23:41,680
command-line tool is actually installed

00:23:44,200 --> 00:23:57,020
interesting yay okay gotcha

00:23:53,330 --> 00:24:01,880
awesome I will give you a dollar ws

00:23:57,020 --> 00:24:04,490
after this yeah I don't know what the

00:24:01,880 --> 00:24:07,220
conversion rate is is it like if one

00:24:04,490 --> 00:24:09,290
u.s. dollar is like a dollar fifty or

00:24:07,220 --> 00:24:14,590
something Canadian or or is it like the

00:24:09,290 --> 00:24:14,590
other way okay it's the first one okay

00:24:17,510 --> 00:24:21,470
all right so kind of moving on so you

00:24:20,180 --> 00:24:23,720
don't actually have to do this this next

00:24:21,470 --> 00:24:24,920
the new project thing it's just that's

00:24:23,720 --> 00:24:27,830
how you can create a new project right

00:24:24,920 --> 00:24:29,500
now if you were to do OC project it

00:24:27,830 --> 00:24:33,950
would say that you're using the user

00:24:29,500 --> 00:24:35,900
number of your guy is project if you

00:24:33,950 --> 00:24:39,530
want to use nano as your editor instead

00:24:35,900 --> 00:24:40,820
VI do this export command here but I

00:24:39,530 --> 00:24:44,810
would I would recommend doing this

00:24:40,820 --> 00:24:46,010
export host command you don't have to

00:24:44,810 --> 00:24:47,150
put that backslash if you're just

00:24:46,010 --> 00:24:49,280
writing it all out of this is if you're

00:24:47,150 --> 00:24:53,120
going to copy and paste and this slides

00:24:49,280 --> 00:24:55,610
are on actually that first slide if you

00:24:53,120 --> 00:24:56,890
were to actually go to it but because

00:24:55,610 --> 00:24:59,630
we're going to use this host variable

00:24:56,890 --> 00:25:00,530
and a couple of examples so if we have

00:24:59,630 --> 00:25:03,190
it set up already

00:25:00,530 --> 00:25:03,190
you'll be good

00:25:10,349 --> 00:25:21,099
let's give you guys a few minutes to to

00:25:14,529 --> 00:25:23,559
type and it's not easy GPS it is just

00:25:21,099 --> 00:25:26,519
where your HTTP just piece anybody

00:25:23,559 --> 00:25:26,519
thought I made a typo

00:25:38,990 --> 00:25:43,169
yeah yeah so if you're just typing it

00:25:41,700 --> 00:25:44,700
out we you could get you don't have to

00:25:43,169 --> 00:25:47,390
put the slashing it was just for a

00:25:44,700 --> 00:25:47,390
copy-paste thing

00:26:05,290 --> 00:26:11,360
all right if anybody needs me to go back

00:26:08,120 --> 00:26:12,890
I can and so now we're gonna open up the

00:26:11,360 --> 00:26:14,840
web console with the thing that I've

00:26:12,890 --> 00:26:17,510
been kind of clicking through so now you

00:26:14,840 --> 00:26:18,500
guys can actually get your own one so if

00:26:17,510 --> 00:26:20,900
you guys want to go to that link

00:26:18,500 --> 00:26:25,870
username password is the same as what

00:26:20,900 --> 00:26:25,870
you logged in with the with the terminal

00:26:25,930 --> 00:26:30,800
there will be some things where it would

00:26:28,460 --> 00:26:32,210
be nice to have the terminal and the web

00:26:30,800 --> 00:26:34,430
console up at the same time so we can

00:26:32,210 --> 00:26:36,140
see some things and which we kind of saw

00:26:34,430 --> 00:26:48,830
when we were debugging all this other

00:26:36,140 --> 00:26:51,950
things so yeah so it should you should

00:26:48,830 --> 00:26:54,800
see this this thing that we saw if you

00:26:51,950 --> 00:26:56,990
go into it might open up where it's like

00:26:54,800 --> 00:26:58,520
this catalog of different icons and

00:26:56,990 --> 00:27:05,750
stuff so you're just on the right hand

00:26:58,520 --> 00:27:06,980
side I'll just show you so when you when

00:27:05,750 --> 00:27:09,050
you first open up you might actually see

00:27:06,980 --> 00:27:11,270
this kind of view I would just you would

00:27:09,050 --> 00:27:13,520
just go into it'll you'll have like one

00:27:11,270 --> 00:27:16,910
thing on of course you can't actually

00:27:13,520 --> 00:27:19,610
see me pointing at my screen on that

00:27:16,910 --> 00:27:21,170
this would be the right-hand side you'll

00:27:19,610 --> 00:27:22,580
probably just see like user and then the

00:27:21,170 --> 00:27:23,870
number user you are so you just actually

00:27:22,580 --> 00:27:26,270
click that and that goes into your

00:27:23,870 --> 00:27:28,310
namespace or your project or if you

00:27:26,270 --> 00:27:30,320
created one on the command line

00:27:28,310 --> 00:27:39,260
you could go into that one too so this

00:27:30,320 --> 00:27:47,410
is the one I have no Devon times all

00:27:39,260 --> 00:27:47,410
right so we're now all right what's that

00:27:54,600 --> 00:28:00,510
that at the moment now so that's just

00:27:57,780 --> 00:28:02,310
four we will work in a minute this is

00:28:00,510 --> 00:28:08,130
yeah so that's just kind of a little bit

00:28:02,310 --> 00:28:09,840
of preparation okay actually if you put

00:28:08,130 --> 00:28:12,530
the ette that you put to eat if you did

00:28:09,840 --> 00:28:17,690
it as HTTP I think it would open up the

00:28:12,530 --> 00:28:20,250
that console instead but we're not yeah

00:28:17,690 --> 00:28:23,490
alright so right we're just gonna try to

00:28:20,250 --> 00:28:27,570
do is it's a very simple nodejs app to

00:28:23,490 --> 00:28:28,860
get deployed you know so you know you

00:28:27,570 --> 00:28:30,450
might have something like this very

00:28:28,860 --> 00:28:31,470
basic Express app I'm sure everybody's

00:28:30,450 --> 00:28:34,200
kind of familiar with this what this

00:28:31,470 --> 00:28:35,550
looks like so we'll go quick and then in

00:28:34,200 --> 00:28:37,380
order to make this into a container we

00:28:35,550 --> 00:28:39,630
need a docker file it might select you

00:28:37,380 --> 00:28:41,670
know you have some sort of some version

00:28:39,630 --> 00:28:43,290
of node you know at the bottom you're

00:28:41,670 --> 00:28:44,790
gonna say run NPM starts they may like

00:28:43,290 --> 00:28:47,790
that as your command I'm just kind of

00:28:44,790 --> 00:28:49,020
just gonna kind of go quick here alright

00:28:47,790 --> 00:28:52,410
so how do we get this in the communities

00:28:49,020 --> 00:28:54,060
right we deploy an image so here's some

00:28:52,410 --> 00:28:56,100
things now okay so going back to your

00:28:54,060 --> 00:29:00,390
terminal if you guys type this in this

00:28:56,100 --> 00:29:02,670
will actually deploy a container that we

00:29:00,390 --> 00:29:06,830
already have it's on docker hub with

00:29:02,670 --> 00:29:06,830
just a basic sort of hello node

00:29:06,920 --> 00:29:12,210
application and again the reason why for

00:29:10,080 --> 00:29:14,040
that backslash that slash is because if

00:29:12,210 --> 00:29:15,540
you're copying and pasting this for new

00:29:14,040 --> 00:29:18,300
lines and stuff so you could leave that

00:29:15,540 --> 00:29:20,550
out if you need to so basically this is

00:29:18,300 --> 00:29:22,890
saying write create a deployment called

00:29:20,550 --> 00:29:24,720
hello and we're going to use through

00:29:22,890 --> 00:29:27,480
this image in just this per image and

00:29:24,720 --> 00:29:30,690
we're going to use version 1.0.0 when we

00:29:27,480 --> 00:29:36,390
deploy it I can actually do that with

00:29:30,690 --> 00:29:37,140
you you know I might as well just follow

00:29:36,390 --> 00:29:41,850
along as well

00:29:37,140 --> 00:29:44,010
I can't copy and paste within I will

00:29:41,850 --> 00:29:47,390
follow along with you guys so I kind of

00:29:44,010 --> 00:29:47,390
have an idea of the timing

00:29:55,290 --> 00:30:02,100
so let's see who's not taking 22 all

00:29:59,920 --> 00:30:02,100
right

00:30:12,560 --> 00:30:29,420
all right cool projects should be able

00:30:21,930 --> 00:30:29,420
to see the user 22 I just

00:30:32,780 --> 00:30:38,330
right so if you had so if you actually

00:30:35,810 --> 00:30:40,010
look at the at the web console in your

00:30:38,330 --> 00:30:42,410
user you should see that there is this

00:30:40,010 --> 00:30:44,660
there is this appointment of what we

00:30:42,410 --> 00:30:46,820
just did I'm kind of going back to the

00:30:44,660 --> 00:30:57,410
slides here gonna be jumping back and

00:30:46,820 --> 00:30:59,600
forth yeah so we have this appointment

00:30:57,410 --> 00:31:01,190
you can do this cube kiddo get

00:30:59,600 --> 00:31:03,620
deployment hello which is the name of

00:31:01,190 --> 00:31:05,890
the deployment and - oh is for the

00:31:03,620 --> 00:31:08,090
output and you did yeah mol you'll see

00:31:05,890 --> 00:31:11,570
what your deployment is what it looks

00:31:08,090 --> 00:31:12,980
like in Yama format you could also

00:31:11,570 --> 00:31:16,340
describe it and that gives a little bit

00:31:12,980 --> 00:31:18,710
more readable things for the desk oh you

00:31:16,340 --> 00:31:22,010
could also do a - Oh JSON and that will

00:31:18,710 --> 00:31:27,380
output in I you guessed it JSON format

00:31:22,010 --> 00:31:29,240
instead of VMO if you do a coupie of CTL

00:31:27,380 --> 00:31:30,980
get pods you actually see the pods that

00:31:29,240 --> 00:31:33,980
you have running which should be just

00:31:30,980 --> 00:31:36,980
the one which is the the one that we

00:31:33,980 --> 00:31:40,430
just did and then you can do a cube CTL

00:31:36,980 --> 00:31:42,320
logs and then don't actually it's

00:31:40,430 --> 00:31:44,540
whatever the pod name is that they

00:31:42,320 --> 00:31:45,950
change so that if you were to type that

00:31:44,540 --> 00:31:47,570
one that's on the screen it would

00:31:45,950 --> 00:31:51,560
actually not work because that's not pod

00:31:47,570 --> 00:31:53,210
name but you can also do that if you're

00:31:51,560 --> 00:31:55,130
in the web console by clicking in that

00:31:53,210 --> 00:31:57,440
role blue circle that we looked at

00:31:55,130 --> 00:32:01,220
earlier and you can click on logs and

00:31:57,440 --> 00:32:02,870
and check and check that out there - all

00:32:01,220 --> 00:32:05,840
right so now we have something deployed

00:32:02,870 --> 00:32:10,820
how do we actually expose that and be

00:32:05,840 --> 00:32:13,220
able to get access to it we have to

00:32:10,820 --> 00:32:14,690
create a service for that so I'm just

00:32:13,220 --> 00:32:17,990
doing plain cube or any stuff you know

00:32:14,690 --> 00:32:19,820
do a cube CTL expose you want you ever

00:32:17,990 --> 00:32:22,510
want to expose the deployment with the

00:32:19,820 --> 00:32:25,430
name of hello we're gonna tell it to

00:32:22,510 --> 00:32:28,040
bind to port 8080 and here we're gonna

00:32:25,430 --> 00:32:29,450
use a type of node port there's a couple

00:32:28,040 --> 00:32:30,410
different types we're not I'm not going

00:32:29,450 --> 00:32:33,890
to go into what those are but

00:32:30,410 --> 00:32:38,300
essentially node port is kind of the

00:32:33,890 --> 00:32:39,980
most basic ways of exposing things it

00:32:38,300 --> 00:32:43,190
actually if you don't specify a

00:32:39,980 --> 00:32:45,230
particular port for your node fort it

00:32:43,190 --> 00:32:47,370
will which is different than the port

00:32:45,230 --> 00:32:49,950
that's there

00:32:47,370 --> 00:32:51,269
it assigns you a random one so in this

00:32:49,950 --> 00:32:53,519
case we'll actually be assigned a random

00:32:51,269 --> 00:33:02,879
port and we'll I'll show you how to how

00:32:53,519 --> 00:33:06,240
to get that in a minute or two right

00:33:02,879 --> 00:33:07,769
yeah so you can see the service that you

00:33:06,240 --> 00:33:09,990
created if you do cube CT I'll get

00:33:07,769 --> 00:33:14,450
service with Hello as the name of the

00:33:09,990 --> 00:33:18,990
service and their show again the mo yeah

00:33:14,450 --> 00:33:21,090
and now actually to get the the port

00:33:18,990 --> 00:33:24,240
that the new port that the service

00:33:21,090 --> 00:33:27,690
creative force the dynamic thing you

00:33:24,240 --> 00:33:31,039
could do this command basically we're

00:33:27,690 --> 00:33:31,039
getting we're getting the service and

00:33:31,519 --> 00:33:36,419
inside if you were actually to get that

00:33:33,960 --> 00:33:38,850
service as a JSON output then you can

00:33:36,419 --> 00:33:40,980
actually see you know where it's located

00:33:38,850 --> 00:33:44,129
so in this particular using a JSON path

00:33:40,980 --> 00:33:46,769
we're saying you know within within that

00:33:44,129 --> 00:33:49,500
big JSON object there's a spec parameter

00:33:46,769 --> 00:33:51,840
inside that there's hazards which is an

00:33:49,500 --> 00:33:53,399
array we're gonna get the first the

00:33:51,840 --> 00:33:56,730
first element or the zero element

00:33:53,399 --> 00:33:59,250
whatever of that array and then get the

00:33:56,730 --> 00:34:02,549
note poor element from that

00:33:59,250 --> 00:34:04,740
alright in that return to object and

00:34:02,549 --> 00:34:06,899
that will give us the port if we're

00:34:04,740 --> 00:34:09,240
using the web console we can actually

00:34:06,899 --> 00:34:12,530
it's slightly easier because it's just

00:34:09,240 --> 00:34:15,179
display there we can copy and paste it

00:34:12,530 --> 00:34:16,859
but if you do these commands and you

00:34:15,179 --> 00:34:19,260
curl the host which we created earlier

00:34:16,859 --> 00:34:23,639
with that port then you're actually able

00:34:19,260 --> 00:34:26,669
to get the application that we've the

00:34:23,639 --> 00:34:32,700
very very simple node app that we that

00:34:26,669 --> 00:34:33,510
we deployed anybody that needs me to go

00:34:32,700 --> 00:34:38,280
back at all

00:34:33,510 --> 00:34:46,530
slide why's that no take silences

00:34:38,280 --> 00:34:50,389
whatever yeah I'm sure there's people

00:34:46,530 --> 00:34:50,389
still typing that export statement

00:34:53,620 --> 00:35:00,610
I will have I'll keep this up but if you

00:34:56,740 --> 00:35:06,490
wanted to yeah I'm sure you can't see

00:35:00,610 --> 00:35:07,750
that but if you wanted to actually no I

00:35:06,490 --> 00:35:09,990
didn't actually create the service on my

00:35:07,750 --> 00:35:09,990
ends

00:35:36,480 --> 00:35:40,200
everybody was here I'm sorry

00:35:43,880 --> 00:35:49,500
if you XO sorry

00:35:45,900 --> 00:35:50,850
maybe because I'm fun so weird I

00:35:49,500 --> 00:35:53,010
basically what I did was there's this

00:35:50,850 --> 00:35:55,260
little service section here I clicked on

00:35:53,010 --> 00:35:56,280
that hello for the service and then

00:35:55,260 --> 00:36:01,080
right here is actually what the node

00:35:56,280 --> 00:36:11,340
port is if people were wanting to go

00:36:01,080 --> 00:36:12,720
that route instead this is a workshop

00:36:11,340 --> 00:36:21,240
via and I guess I can come around long

00:36:12,720 --> 00:36:26,580
track okay so let's see because I'll go

00:36:21,240 --> 00:36:28,350
back to your terminal okay so it's not

00:36:26,580 --> 00:36:30,980
getting on there okay so it hasn't come

00:36:28,350 --> 00:36:35,790
up with any things at all your uh

00:36:30,980 --> 00:36:43,920
squirrel uh here do an OC or uh keep CTL

00:36:35,790 --> 00:36:45,360
get service go back to with your your

00:36:43,920 --> 00:36:46,860
thing that and actually do just like a

00:36:45,360 --> 00:36:49,230
refresh of a page and make sure it's

00:36:46,860 --> 00:36:52,650
still running all right that's good

00:36:49,230 --> 00:36:56,850
that's a good son okay um here once you

00:36:52,650 --> 00:36:59,670
go back to the terminal thing there and

00:36:56,850 --> 00:37:01,320
this was okay the surface is exposed

00:36:59,670 --> 00:37:04,980
here actually go back to sorry in the

00:37:01,320 --> 00:37:08,850
web console go to applications and then

00:37:04,980 --> 00:37:12,390
services as I'm saying something and you

00:37:08,850 --> 00:37:16,650
were who are you in the butterfly thing

00:37:12,390 --> 00:37:18,570
there oh I mean you should only be okay

00:37:16,650 --> 00:37:21,020
thirty-eight okay okay

00:37:18,570 --> 00:37:21,020
all right cool

00:37:28,510 --> 00:37:34,990
all right all right okay see how much

00:37:32,930 --> 00:37:40,190
time we have here yeah we got that like

00:37:34,990 --> 00:37:46,190
it was time to send 410 420 I don't know

00:37:40,190 --> 00:37:48,500
for 10 maybe 410 yeah okay all right so

00:37:46,190 --> 00:37:51,140
all right so one of the let's go back to

00:37:48,500 --> 00:37:53,930
them just make this bigger easier to do

00:37:51,140 --> 00:37:55,820
all right all right so if you wanted to

00:37:53,930 --> 00:37:59,510
roll out a new version of the

00:37:55,820 --> 00:38:03,500
application you can just set the image

00:37:59,510 --> 00:38:06,830
to basically a new version of the doctor

00:38:03,500 --> 00:38:09,740
image that's that's here and then that

00:38:06,830 --> 00:38:10,850
will I'm just gonna run through this -

00:38:09,740 --> 00:38:12,260
we can get to the actual real

00:38:10,850 --> 00:38:14,120
application that actually has the cloud

00:38:12,260 --> 00:38:15,740
native pattern so if you don't want to

00:38:14,120 --> 00:38:17,060
type this in its find their slides and

00:38:15,740 --> 00:38:18,500
you could kind of work on this later -

00:38:17,060 --> 00:38:20,450
so basically what you do is you would

00:38:18,500 --> 00:38:23,750
just deploy a new image with the new

00:38:20,450 --> 00:38:27,110
version and that will actually just

00:38:23,750 --> 00:38:28,250
update the image right and then and then

00:38:27,110 --> 00:38:30,320
this is just the way you would clean up

00:38:28,250 --> 00:38:32,450
you leave this stuff and basically it's

00:38:30,320 --> 00:38:35,210
saying that services and deployments are

00:38:32,450 --> 00:38:36,440
actually independent of each other so if

00:38:35,210 --> 00:38:40,250
you delete a service it doesn't actually

00:38:36,440 --> 00:38:42,290
delete the deployment yeah because

00:38:40,250 --> 00:38:44,420
they're not connected that way I mean

00:38:42,290 --> 00:38:46,550
they sort of connected but if you they

00:38:44,420 --> 00:38:49,790
can live you know independently from

00:38:46,550 --> 00:38:51,860
each other all right right

00:38:49,790 --> 00:38:54,920
so we deployed a thing we saw pod so

00:38:51,860 --> 00:38:56,600
deployments so a service we saw how to

00:38:54,920 --> 00:39:01,610
run in a container image in kubernetes

00:38:56,600 --> 00:39:02,420
and how to expose that all right so now

00:39:01,610 --> 00:39:03,980
we're actually gonna build a real

00:39:02,420 --> 00:39:05,720
application here so okay so if you're in

00:39:03,980 --> 00:39:09,400
your terminal what we can clone this

00:39:05,720 --> 00:39:09,400
this repo here

00:39:15,430 --> 00:39:25,840
we're gonna do it like a combination of

00:39:18,670 --> 00:39:25,840
like yeah I'll save it I won't spoil it

00:39:56,160 --> 00:40:00,990
all right so hopefully most people have

00:39:58,079 --> 00:40:04,400
that clones if not I can just wait

00:40:00,990 --> 00:40:04,400
another second a few seconds

00:40:14,360 --> 00:40:18,420
all right well okay if anybody needs me

00:40:16,860 --> 00:40:20,220
to go back just let me know

00:40:18,420 --> 00:40:23,330
basically I'll make this bigger just for

00:40:20,220 --> 00:40:26,490
this so basically what this app is is is

00:40:23,330 --> 00:40:28,650
we're going to be basically hitting a

00:40:26,490 --> 00:40:32,430
couple different services and we're

00:40:28,650 --> 00:40:36,230
gonna basically return this Elizabethan

00:40:32,430 --> 00:40:38,580
insult like an insult from the time of

00:40:36,230 --> 00:40:43,040
probably the 1600 or something like that

00:40:38,580 --> 00:40:44,940
England we're gonna be insulted that way

00:40:43,040 --> 00:40:46,170
that the way the app is broken up

00:40:44,940 --> 00:40:49,350
there's this front-end service that's

00:40:46,170 --> 00:40:51,360
running that then goes into this insult

00:40:49,350 --> 00:40:53,730
service that's that's just an ode

00:40:51,360 --> 00:40:55,560
regular note service that service

00:40:53,730 --> 00:40:56,940
actually calls two different ones an

00:40:55,560 --> 00:40:59,970
adjective service and announce service

00:40:56,940 --> 00:41:01,710
to get back an adjective and a noun and

00:40:59,970 --> 00:41:05,070
then all that stuff is put together and

00:41:01,710 --> 00:41:06,810
sent back to the browser within each of

00:41:05,070 --> 00:41:08,610
those in front of in front of each of

00:41:06,810 --> 00:41:11,190
those services we have a circuit breaker

00:41:08,610 --> 00:41:14,280
that one here we're using a possum J S

00:41:11,190 --> 00:41:15,810
which is one circuit breaker

00:41:14,280 --> 00:41:18,120
implementation I think brakes is another

00:41:15,810 --> 00:41:24,510
one there might be a couple other then

00:41:18,120 --> 00:41:29,040
maybe a couple others right okay right

00:41:24,510 --> 00:41:30,870
so if you have that repo cloned what

00:41:29,040 --> 00:41:33,570
we're gonna do is so you go into that

00:41:30,870 --> 00:41:36,150
directory you can cat the deploy SH to

00:41:33,570 --> 00:41:39,300
see kind of what we're doing here

00:41:36,150 --> 00:41:42,240
there's a couple we're gonna do kind of

00:41:39,300 --> 00:41:43,770
a couple different things here so the

00:41:42,240 --> 00:41:45,930
majority the services we're just gonna

00:41:43,770 --> 00:41:48,510
do the regular deploy like we saw from

00:41:45,930 --> 00:41:49,530
the the other app it's just gonna you

00:41:48,510 --> 00:41:51,150
know push up a docker image that's

00:41:49,530 --> 00:41:52,620
already been created and it's gonna

00:41:51,150 --> 00:41:53,850
expose that and then it's actually gonna

00:41:52,620 --> 00:41:55,500
create routes so we don't have to worry

00:41:53,850 --> 00:41:59,850
about doing that no port stuff anymore

00:41:55,500 --> 00:42:02,040
because that's just a pain but if you

00:41:59,850 --> 00:42:03,210
look in that file we there's the the

00:42:02,040 --> 00:42:05,940
kind of the noun service has been

00:42:03,210 --> 00:42:07,710
commented out that I actually wanted to

00:42:05,940 --> 00:42:11,220
have us deploy a different way using a

00:42:07,710 --> 00:42:13,260
tool called node shift which will do

00:42:11,220 --> 00:42:16,020
sort of that s2i flow of deploying

00:42:13,260 --> 00:42:18,570
things just to kind of get a different

00:42:16,020 --> 00:42:22,020
kind of perspective on different ways of

00:42:18,570 --> 00:42:23,820
deployment and so if you run that deploy

00:42:22,020 --> 00:42:25,730
script now you should be able to have

00:42:23,820 --> 00:42:27,480
you should it should be pretty quick

00:42:25,730 --> 00:42:29,820
deploying the front

00:42:27,480 --> 00:42:32,250
servus I think the adjective service and

00:42:29,820 --> 00:42:33,869
the insult service and if you do to keep

00:42:32,250 --> 00:42:38,640
CTL get pods you should be able to see

00:42:33,869 --> 00:42:48,869
that they're running we'll do it all

00:42:38,640 --> 00:42:54,150
together at the same time problem with

00:42:48,869 --> 00:42:56,250
context switching go back and get this

00:42:54,150 --> 00:43:18,690
he's anybody need it here's the get URL

00:42:56,250 --> 00:43:22,160
again if I can take correctly and if

00:43:18,690 --> 00:43:22,160
you're looking you're in your console

00:43:23,990 --> 00:43:27,210
don't worry about the hello thing I mean

00:43:26,010 --> 00:43:28,920
if you still have that hello app in

00:43:27,210 --> 00:43:31,050
there it's we just didn't clean it up

00:43:28,920 --> 00:43:32,880
that's fine so we should see that

00:43:31,050 --> 00:43:34,920
there's an adjective application running

00:43:32,880 --> 00:43:38,790
front-end install one that's also

00:43:34,920 --> 00:43:42,810
running if you want it if you are in

00:43:38,790 --> 00:43:47,250
this view right now you can and this is

00:43:42,810 --> 00:43:50,010
just a picture of of that before before

00:43:47,250 --> 00:43:51,570
we deploy the noun 1 but you can you can

00:43:50,010 --> 00:43:53,160
actually if you're inside the side

00:43:51,570 --> 00:43:56,970
console and you click on the link to the

00:43:53,160 --> 00:43:59,820
front-end that should open up and you

00:43:56,970 --> 00:44:06,300
can actually you know hit insult me and

00:43:59,820 --> 00:44:07,350
it gives you a nice nice insult here if

00:44:06,300 --> 00:44:09,150
you do it a couple of times we'll notice

00:44:07,350 --> 00:44:11,010
that it's the same thing that's that's

00:44:09,150 --> 00:44:13,920
happening there's something we need to

00:44:11,010 --> 00:44:18,690
fix with how it's getting to the insult

00:44:13,920 --> 00:44:21,180
service here we'll just do that so if

00:44:18,690 --> 00:44:23,250
you're actually so if you go to the like

00:44:21,180 --> 00:44:25,040
your web console or the dev console in

00:44:23,250 --> 00:44:27,480
Chrome or wherever browsers are using

00:44:25,040 --> 00:44:31,080
you'll see that it's the circuit breaker

00:44:27,480 --> 00:44:33,780
is breaking so it's failing and it is

00:44:31,080 --> 00:44:36,240
because I don't know if you can see it I

00:44:33,780 --> 00:44:40,230
don't know if it shows it in here but

00:44:36,240 --> 00:44:40,600
the the the URL that's trying to hit is

00:44:40,230 --> 00:44:42,880
a little

00:44:40,600 --> 00:44:45,760
host 8080 it's not actually trying to

00:44:42,880 --> 00:44:47,920
hit it has the the one that we're

00:44:45,760 --> 00:44:52,360
actually running on on our kubernetes

00:44:47,920 --> 00:44:54,190
cluster so we need to fix that so the

00:44:52,360 --> 00:44:58,660
way we're going to do that go back to

00:44:54,190 --> 00:45:01,360
here well while we're fixing that if you

00:44:58,660 --> 00:45:03,220
what you want it if you want to back in

00:45:01,360 --> 00:45:05,380
the terminal go into the now directory

00:45:03,220 --> 00:45:09,700
do an NPM run deploy this will actually

00:45:05,380 --> 00:45:10,870
kick off the node shift thing which will

00:45:09,700 --> 00:45:12,460
take a little bit because it's gonna

00:45:10,870 --> 00:45:14,230
basically what that's going to do it's

00:45:12,460 --> 00:45:17,050
gonna package up the code that's in the

00:45:14,230 --> 00:45:18,970
noun directory it's gonna send that up

00:45:17,050 --> 00:45:20,890
to OpenShift and it's going to combine

00:45:18,970 --> 00:45:22,420
it with an s2 i image it's gonna build

00:45:20,890 --> 00:45:25,840
that which means it's gonna do an NPM

00:45:22,420 --> 00:45:27,730
install all on the cluster once that

00:45:25,840 --> 00:45:29,170
gets done then it will create the

00:45:27,730 --> 00:45:30,730
deployment it'll create a service and

00:45:29,170 --> 00:45:32,580
I'll create a route and it will deploy

00:45:30,730 --> 00:45:34,840
that pod and everything will be running

00:45:32,580 --> 00:45:36,190
but it'll just take a few you know maybe

00:45:34,840 --> 00:45:38,520
a minute or two while does the NPM

00:45:36,190 --> 00:45:40,900
install you know on the hosted service

00:45:38,520 --> 00:45:42,310
so if we have that running when we while

00:45:40,900 --> 00:45:44,920
we create this sort of this external

00:45:42,310 --> 00:45:47,260
configuration that we're gonna see to to

00:45:44,920 --> 00:45:51,160
fix the issue with it's still pointing

00:45:47,260 --> 00:45:53,530
to little host all right and then what

00:45:51,160 --> 00:45:54,700
we'll and we'll come back to and yeah so

00:45:53,530 --> 00:45:56,590
these were the slides basically saying

00:45:54,700 --> 00:45:58,090
hey look this thing is broken because

00:45:56,590 --> 00:45:59,610
it's looking pointing at a local host so

00:45:58,090 --> 00:46:01,450
we're skipping around a little bit

00:45:59,610 --> 00:46:03,430
alright so we're gonna check out this

00:46:01,450 --> 00:46:04,620
external configuration thing and we're

00:46:03,430 --> 00:46:07,690
gonna do it

00:46:04,620 --> 00:46:10,170
III do have slides where you do do from

00:46:07,690 --> 00:46:13,330
the command line which is farther down

00:46:10,170 --> 00:46:14,950
it's editing the ammo files and I just

00:46:13,330 --> 00:46:17,650
very dislike hitting yell files because

00:46:14,950 --> 00:46:20,320
I don't know where the tabs and spaces

00:46:17,650 --> 00:46:22,660
are supposed to be on those things so

00:46:20,320 --> 00:46:24,700
we're gonna do it from the console so if

00:46:22,660 --> 00:46:29,130
you go back to the go to your web

00:46:24,700 --> 00:46:35,440
console and just follow me if you want

00:46:29,130 --> 00:46:38,530
under resources config Maps and then we

00:46:35,440 --> 00:46:42,490
say create a config map we're gonna call

00:46:38,530 --> 00:46:46,030
we're gonna name it insult service just

00:46:42,490 --> 00:46:47,200
with the - you told - service the key

00:46:46,030 --> 00:46:48,760
was gonna now that you're gonna have

00:46:47,200 --> 00:46:52,680
this is gonna be all uppercase it's

00:46:48,760 --> 00:46:55,109
gonna just be insult underscore service

00:46:52,680 --> 00:46:58,859
and the value here that we're going to

00:46:55,109 --> 00:47:02,010
do is it's going to be the Roshan your

00:46:58,859 --> 00:47:02,880
searching yeah yeah the valuable here

00:47:02,010 --> 00:47:06,839
we're gonna have here is gonna actually

00:47:02,880 --> 00:47:10,500
going to be the route to the insult

00:47:06,839 --> 00:47:12,839
service that's running so I probably

00:47:10,500 --> 00:47:15,150
should have told you to copy that first

00:47:12,839 --> 00:47:19,920
so and I always made that mistake while

00:47:15,150 --> 00:47:21,059
practicing this too so so we'll just

00:47:19,920 --> 00:47:22,619
have to do that part again so if you go

00:47:21,059 --> 00:47:24,660
back to the overview and you go up to

00:47:22,619 --> 00:47:33,270
the the insult thing here and copy this

00:47:24,660 --> 00:47:39,000
this link first and then go back to the

00:47:33,270 --> 00:47:41,069
resources and we can actually can see if

00:47:39,000 --> 00:47:45,059
you put that in and do slush API slash

00:47:41,069 --> 00:47:50,760
insult sorry I'm just giving around you

00:47:45,059 --> 00:47:53,640
can actually see that that's getting it

00:47:50,760 --> 00:47:55,440
is getting insults with adjectives and

00:47:53,640 --> 00:48:00,450
actually the same now because I have yet

00:47:55,440 --> 00:48:05,869
to deploy the noun the noun thing the

00:48:00,450 --> 00:48:10,670
noun service sorry so Creek config map

00:48:05,869 --> 00:48:13,619
insult service - service capitals

00:48:10,670 --> 00:48:16,500
underscore service so then your value is

00:48:13,619 --> 00:48:22,109
actually going to be that route that you

00:48:16,500 --> 00:48:25,200
copied slash API slash insult so if we

00:48:22,109 --> 00:48:28,500
create that that will create our config

00:48:25,200 --> 00:48:31,829
map and now we're gonna go back kind of

00:48:28,500 --> 00:48:33,540
back to the overview and then our front

00:48:31,829 --> 00:48:35,339
end here we can click this front end

00:48:33,540 --> 00:48:37,380
thing to go into our front end

00:48:35,339 --> 00:48:43,109
deployment hopefully I'm not losing

00:48:37,380 --> 00:48:47,510
anybody in environment we're gonna click

00:48:43,109 --> 00:48:47,510
on add value from config map or secret

00:48:48,770 --> 00:48:53,130
this name we're gonna actually be insult

00:48:51,660 --> 00:48:56,010
service where it's going to be capitals

00:48:53,130 --> 00:48:59,160
and skull insult underscore service all

00:48:56,010 --> 00:49:00,960
caps the resource that we're going to

00:48:59,160 --> 00:49:03,270
use is the insult service config map

00:49:00,960 --> 00:49:04,589
that we just created and the key that

00:49:03,270 --> 00:49:05,970
we're going to use is the insult service

00:49:04,589 --> 00:49:09,839
key that we created for that

00:49:05,970 --> 00:49:11,130
for that and then if you click save that

00:49:09,839 --> 00:49:12,510
will actually trigger if you go back to

00:49:11,130 --> 00:49:15,000
the overview that actually will trigger

00:49:12,510 --> 00:49:16,980
a new deployment and I didn't click back

00:49:15,000 --> 00:49:18,839
fast enough and it so this actually

00:49:16,980 --> 00:49:19,950
redeployed and we can see that because

00:49:18,839 --> 00:49:21,599
there's a number two here that's

00:49:19,950 --> 00:49:26,490
actually the second deployment that

00:49:21,599 --> 00:49:31,710
happened if we refresh the the insult

00:49:26,490 --> 00:49:35,400
the the application page yeah and insult

00:49:31,710 --> 00:49:36,180
me it should have different except for

00:49:35,400 --> 00:49:37,650
the noun part of it

00:49:36,180 --> 00:49:45,839
all the other things that the adjectives

00:49:37,650 --> 00:49:47,579
should be should be different no unless

00:49:45,839 --> 00:49:49,650
you have already if you if you did

00:49:47,579 --> 00:49:52,940
deploy the noun service then the noun

00:49:49,650 --> 00:49:52,940
should actually be changing as well

00:49:54,980 --> 00:50:10,140
right so for service you a URL don't put

00:49:57,930 --> 00:50:11,609
anything in there I don't right so here

00:50:10,140 --> 00:50:13,410
click this add value from Kingdom a

00:50:11,609 --> 00:50:16,290
procedure yep so from here we're gonna

00:50:13,410 --> 00:50:21,780
put in insult underscore service all

00:50:16,290 --> 00:50:26,790
capitals in I in unless that's what you

00:50:21,780 --> 00:50:30,119
named it but and then there should just

00:50:26,790 --> 00:50:32,280
be the insult service thing and then the

00:50:30,119 --> 00:50:37,760
key should just be yeah that's a and

00:50:32,280 --> 00:50:37,760
then just hit save cool

00:50:43,329 --> 00:50:51,940
alright alright okay did anybody

00:50:49,220 --> 00:50:54,470
actually get that deployed and working

00:50:51,940 --> 00:50:59,140
one person alright that's a success one

00:50:54,470 --> 00:50:59,140
person now you get two US dollars

00:51:00,759 --> 00:51:07,609
alright alright let's see where we were

00:51:05,660 --> 00:51:11,829
on the slides alright so that was config

00:51:07,609 --> 00:51:15,200
nap so that's one pattern is kind of

00:51:11,829 --> 00:51:16,999
having your some configurations not

00:51:15,200 --> 00:51:19,819
necessarily within your app but in an

00:51:16,999 --> 00:51:22,369
external resource that you can change

00:51:19,819 --> 00:51:24,230
and so every time you change that then

00:51:22,369 --> 00:51:24,619
your deployment could rehab can happen

00:51:24,230 --> 00:51:26,480
again

00:51:24,619 --> 00:51:28,099
but you're not actually changing code so

00:51:26,480 --> 00:51:31,160
that's a good thing to kind of keep

00:51:28,099 --> 00:51:35,150
things separate and you should think pot

00:51:31,160 --> 00:51:38,960
of pods to is is things that you know

00:51:35,150 --> 00:51:40,539
that will will die I'll you know sort of

00:51:38,960 --> 00:51:42,859
consistently I'm not consistent but like

00:51:40,539 --> 00:51:46,130
it's there and they should be somewhat

00:51:42,859 --> 00:51:49,309
stateless because you know they can go

00:51:46,130 --> 00:51:51,230
up and down like a bunch so you want to

00:51:49,309 --> 00:51:53,299
keep as little as little state as you

00:51:51,230 --> 00:51:54,739
pop as you can probably out of in you

00:51:53,299 --> 00:51:57,130
know in the pod and keep it in these

00:51:54,739 --> 00:51:59,690
other different external configurations

00:51:57,130 --> 00:52:00,769
this just walks through going on so if

00:51:59,690 --> 00:52:03,170
you would did want to do it for the

00:52:00,769 --> 00:52:06,950
command line and you were playing along

00:52:03,170 --> 00:52:08,900
with the slides and this is just another

00:52:06,950 --> 00:52:12,079
way of doing it and you actually have to

00:52:08,900 --> 00:52:15,319
edit the deployment and edit some yamo

00:52:12,079 --> 00:52:18,019
and that's why I'd rather do it from the

00:52:15,319 --> 00:52:22,249
the web console because editing amyl

00:52:18,019 --> 00:52:24,200
isn't my my favorite thing alright so

00:52:22,249 --> 00:52:28,369
health checks which you're alive Elena

00:52:24,200 --> 00:52:29,349
stand readiness URLs this here's another

00:52:28,369 --> 00:52:33,589
pattern

00:52:29,349 --> 00:52:35,930
so essentially what aliveness probe is

00:52:33,589 --> 00:52:40,039
is basically checking to see if your app

00:52:35,930 --> 00:52:41,839
is alive and readiness is you know it's

00:52:40,039 --> 00:52:44,210
something that you can check just make

00:52:41,839 --> 00:52:45,499
see if your app is ready yet and with a

00:52:44,210 --> 00:52:48,140
combination of these you could actually

00:52:45,499 --> 00:52:51,769
make it so you have zero downtime when

00:52:48,140 --> 00:52:53,580
redeploying your app applications so

00:52:51,769 --> 00:52:55,680
something with

00:52:53,580 --> 00:52:56,849
so with all these application this

00:52:55,680 --> 00:53:00,320
particular application that we're doing

00:52:56,849 --> 00:53:03,210
all the services there's actually a

00:53:00,320 --> 00:53:07,200
module called queue probe which if you

00:53:03,210 --> 00:53:09,119
add that it'll actually add these slash

00:53:07,200 --> 00:53:11,010
API slash health live NS and the

00:53:09,119 --> 00:53:13,320
readiness probes to your expressed

00:53:11,010 --> 00:53:14,940
applications so you don't have to worry

00:53:13,320 --> 00:53:19,740
about it because those are the defaults

00:53:14,940 --> 00:53:21,270
for kubernetes and slashin OpenShift but

00:53:19,740 --> 00:53:23,280
if you did want it if you did have other

00:53:21,270 --> 00:53:25,470
you or say your URL that you wanted to

00:53:23,280 --> 00:53:27,200
hit or change it up you could modify

00:53:25,470 --> 00:53:30,300
that and then you know when you're

00:53:27,200 --> 00:53:32,490
requiring you add the apne I can do the

00:53:30,300 --> 00:53:34,290
options and stuff so all the app all of

00:53:32,490 --> 00:53:36,990
these services within this elisa be thin

00:53:34,290 --> 00:53:40,320
and soul app do you has this already

00:53:36,990 --> 00:53:42,390
kind of installed there so if you were

00:53:40,320 --> 00:53:45,810
to if you happen to have that that

00:53:42,390 --> 00:53:48,150
front-end path already in your terminal

00:53:45,810 --> 00:53:51,630
and you went to these these out you know

00:53:48,150 --> 00:53:53,970
these api's or you could just do it from

00:53:51,630 --> 00:53:57,869
the web browser as well you go to those

00:53:53,970 --> 00:53:59,490
api's it should just return okay that's

00:53:57,869 --> 00:54:05,430
just that's the default thing it does it

00:53:59,490 --> 00:54:07,830
just returns a 200 ok but right now

00:54:05,430 --> 00:54:10,170
there and we'll we'll actually do this

00:54:07,830 --> 00:54:13,460
from from the from the web console

00:54:10,170 --> 00:54:17,220
because it is easier than editing the

00:54:13,460 --> 00:54:21,210
thing so if so if we wanted to add the

00:54:17,220 --> 00:54:23,849
actual so right now those those you

00:54:21,210 --> 00:54:26,609
those api's in the URL the URLs the rest

00:54:23,849 --> 00:54:30,000
api is are there in the app but they're

00:54:26,609 --> 00:54:32,849
not configured inside the cluster for

00:54:30,000 --> 00:54:34,920
that particular deployment so again if

00:54:32,849 --> 00:54:37,130
we go in here into this deployment for

00:54:34,920 --> 00:54:39,359
front-end we could say configuration

00:54:37,130 --> 00:54:40,260
here it actually says hey you don't have

00:54:39,359 --> 00:54:44,730
any health checks do you want to add

00:54:40,260 --> 00:54:46,890
them yeah sure we do so you can add it

00:54:44,730 --> 00:54:51,200
readiness one so the path for that would

00:54:46,890 --> 00:54:55,170
would be slash API slash health slash

00:54:51,200 --> 00:54:57,780
ready Ness if that's the right Innes one

00:54:55,170 --> 00:54:59,400
yeah and then port is a DAT because

00:54:57,780 --> 00:55:01,920
that's the port that the app actually

00:54:59,400 --> 00:55:03,180
applications running on and then you can

00:55:01,920 --> 00:55:06,290
just leave you know if you wanted to

00:55:03,180 --> 00:55:08,180
leave the defaults here

00:55:06,290 --> 00:55:10,850
basically the initial delay is saying

00:55:08,180 --> 00:55:14,090
how long should I wait before or doing

00:55:10,850 --> 00:55:15,530
this ping and then the timeout is you

00:55:14,090 --> 00:55:18,560
know how long to wait after the counter

00:55:15,530 --> 00:55:20,600
starts before checking health or

00:55:18,560 --> 00:55:22,090
actually it's not right cuz I read the

00:55:20,600 --> 00:55:29,119
wrong one

00:55:22,090 --> 00:55:34,910
yeah I could read that right and 11's

00:55:29,119 --> 00:55:36,560
has has very similar options as well so

00:55:34,910 --> 00:55:40,660
right now we're just gonna add a

00:55:36,560 --> 00:55:43,460
readiness one and then that's it and

00:55:40,660 --> 00:55:45,320
then basically every kind of

00:55:43,460 --> 00:55:47,090
configuration change that we've been

00:55:45,320 --> 00:55:48,410
doing here has been redeploying this

00:55:47,090 --> 00:55:50,480
front NF sorry this is now we're up to

00:55:48,410 --> 00:55:52,670
the third time so that's why it is a

00:55:50,480 --> 00:55:54,890
good idea to keep things any kind of

00:55:52,670 --> 00:55:58,190
configurations kind of kind of separate

00:55:54,890 --> 00:56:00,290
there too so we've actually went in here

00:55:58,190 --> 00:56:02,320
into the configuration now we can see

00:56:00,290 --> 00:56:07,010
that it's we have this readiness probe

00:56:02,320 --> 00:56:08,060
here and it doesn't have to be it

00:56:07,010 --> 00:56:10,000
doesn't have to be a rest endpoint

00:56:08,060 --> 00:56:13,580
either it could be like you could tell

00:56:10,000 --> 00:56:15,230
these these probes to run a command from

00:56:13,580 --> 00:56:17,900
like the command line or something like

00:56:15,230 --> 00:56:19,670
that to see if you're if you're you know

00:56:17,900 --> 00:56:25,100
your app is ready or if your app is

00:56:19,670 --> 00:56:27,160
still alive so yeah alright so we don't

00:56:25,100 --> 00:56:30,530
have too much time here so go quick a

00:56:27,160 --> 00:56:34,359
one kind of more more concept here which

00:56:30,530 --> 00:56:37,130
is probably the most important one and

00:56:34,359 --> 00:56:38,510
because that's resilience which is the

00:56:37,130 --> 00:56:41,300
circuit breaking stuff so we saw this

00:56:38,510 --> 00:56:43,910
diagram earlier there's circuit breakers

00:56:41,300 --> 00:56:45,710
basically before you know every single

00:56:43,910 --> 00:56:48,109
app here and here we're using this thing

00:56:45,710 --> 00:56:49,640
called a possum which you know has some

00:56:48,109 --> 00:56:51,500
options this particular error threshold

00:56:49,640 --> 00:56:54,619
percent is saying this one says

00:56:51,500 --> 00:56:56,090
basically if there's 70% of things that

00:56:54,619 --> 00:56:57,470
happen our errors then we're gonna trip

00:56:56,090 --> 00:56:58,940
the circuit and we're gonna we're gonna

00:56:57,470 --> 00:57:01,600
fail and we're gonna fall back to the

00:56:58,940 --> 00:57:05,630
error stuff and we're gonna open up

00:57:01,600 --> 00:57:07,580
timeout here is how long like if we're

00:57:05,630 --> 00:57:10,640
making a rest like a rest call like how

00:57:07,580 --> 00:57:13,310
long should that happen before we say

00:57:10,640 --> 00:57:16,490
it's failing this is 500 milliseconds so

00:57:13,310 --> 00:57:18,950
we probably want to up that possible

00:57:16,490 --> 00:57:20,180
and then once things do open it's like

00:57:18,950 --> 00:57:23,059
this reset time

00:57:20,180 --> 00:57:26,859
saying how long should we wait to to

00:57:23,059 --> 00:57:28,970
close the circuit so we can try again

00:57:26,859 --> 00:57:31,040
that's with it and then the name is just

00:57:28,970 --> 00:57:34,040
naming something it's not really a big a

00:57:31,040 --> 00:57:35,930
big thing there so in this example this

00:57:34,040 --> 00:57:37,670
is just a node example here we have this

00:57:35,930 --> 00:57:40,280
function called get noun which gets a

00:57:37,670 --> 00:57:42,559
URL from some service and if if it

00:57:40,280 --> 00:57:46,520
passes then we're going to return some

00:57:42,559 --> 00:57:48,680
some data we create our new circuit and

00:57:46,520 --> 00:57:50,690
then we say ok you know on failure we're

00:57:48,680 --> 00:57:53,390
gonna just output to the console but as

00:57:50,690 --> 00:57:54,740
a fallback if it does error we're just

00:57:53,390 --> 00:57:57,319
going to return we're gonna call this

00:57:54,740 --> 00:57:59,900
function that returns this object that

00:57:57,319 --> 00:58:06,079
says noun and dung scrapers the is the

00:57:59,900 --> 00:58:09,109
value of of the return value this is

00:58:06,079 --> 00:58:15,319
actually I think the the the getting the

00:58:09,109 --> 00:58:17,329
noun service in in the code right and

00:58:15,319 --> 00:58:19,910
then this is just saying hey on this

00:58:17,329 --> 00:58:21,920
thing we do the circuit fire which calls

00:58:19,910 --> 00:58:23,210
that function that we previously so

00:58:21,920 --> 00:58:26,240
that's the fire function will actually

00:58:23,210 --> 00:58:29,089
call the get now function there and then

00:58:26,240 --> 00:58:30,619
you know do all that stuff and then we

00:58:29,089 --> 00:58:32,930
can also do it inside the browser to

00:58:30,619 --> 00:58:37,250
which it also works and has very similar

00:58:32,930 --> 00:58:38,780
options and then in this case and when

00:58:37,250 --> 00:58:40,040
we saw this when our install service

00:58:38,780 --> 00:58:44,329
wasn't working we were actually getting

00:58:40,040 --> 00:58:46,280
that as fallback as a return values so

00:58:44,329 --> 00:58:48,170
it is you know but you can use in on

00:58:46,280 --> 00:58:50,059
just regular node apps or you can use it

00:58:48,170 --> 00:58:52,369
on like a web front-end kind of thing

00:58:50,059 --> 00:58:54,020
and then again this is saying when in

00:58:52,369 --> 00:58:56,809
the form is for most weeks and it was it

00:58:54,020 --> 00:58:59,200
was firing so one way we can test that

00:58:56,809 --> 00:59:02,210
and we sort of already saw it already

00:58:59,200 --> 00:59:03,680
thing but this is saying and we can do

00:59:02,210 --> 00:59:08,780
this from we can actually do this from

00:59:03,680 --> 00:59:10,460
the web console again here what that

00:59:08,780 --> 00:59:12,650
example is saying they wanted to take

00:59:10,460 --> 00:59:15,190
down and I don't have it here so just

00:59:12,650 --> 00:59:18,440
follow along but if you if you took down

00:59:15,190 --> 00:59:20,540
they wanted to basically say let's take

00:59:18,440 --> 00:59:21,829
down one one of those services so in

00:59:20,540 --> 00:59:23,530
this case I'm doing the adjective 1 if

00:59:21,829 --> 00:59:26,470
you want to do noun that's fine too so

00:59:23,530 --> 00:59:28,720
we can actually scale it down to zero

00:59:26,470 --> 00:59:30,920
from the command those command line

00:59:28,720 --> 00:59:32,900
commands that were that I can show you

00:59:30,920 --> 00:59:33,829
again basically doing the same thing I

00:59:32,900 --> 00:59:35,630
was saying

00:59:33,829 --> 00:59:38,450
just the amount of replicas that it

00:59:35,630 --> 00:59:41,809
should have just make them zero so this

00:59:38,450 --> 00:59:51,289
is now zero and so if we do if we do it

00:59:41,809 --> 00:59:52,700
now the yeah I think the yeah the

00:59:51,289 --> 00:59:54,650
circuit breaker should kick in and it

00:59:52,700 --> 00:59:57,920
should just do the fallback values

00:59:54,650 --> 01:00:02,690
instead and then if you want to bring

00:59:57,920 --> 01:00:03,829
the that particular service back up then

01:00:02,690 --> 01:00:05,569
you can just click that little button

01:00:03,829 --> 01:00:10,969
say give me one pod and then it'll bring

01:00:05,569 --> 01:00:11,989
it back up I know we're just moving fast

01:00:10,969 --> 01:00:14,900
because if you don't really have any

01:00:11,989 --> 01:00:16,400
time left but right and that's saying so

01:00:14,900 --> 01:00:18,890
yeah basically this is saying edit the

01:00:16,400 --> 01:00:20,660
edit the deployment file for the noun

01:00:18,890 --> 01:00:22,339
bring the amount of replicas to zero

01:00:20,660 --> 01:00:25,279
basically saying just don't have any

01:00:22,339 --> 01:00:26,420
more pods you test the service and you

01:00:25,279 --> 01:00:28,640
can see that it's failing then you just

01:00:26,420 --> 01:00:34,609
bring them back up and the pods start

01:00:28,640 --> 01:00:37,900
working again right okay so this is so

01:00:34,609 --> 01:00:40,729
that's kind of it so the review we saw

01:00:37,900 --> 01:00:43,219
very very quickly and sorry for that

01:00:40,729 --> 01:00:44,989
that we kind of had that first ten

01:00:43,219 --> 01:00:48,529
minutes or whatever of trying to get

01:00:44,989 --> 01:00:52,099
things back into into order but we saw

01:00:48,529 --> 01:00:55,069
some things like we saw you know

01:00:52,099 --> 01:00:57,499
deploying deploying with just using the

01:00:55,069 --> 01:01:00,680
regular vanilla Cabrini stuff we saw

01:00:57,499 --> 01:01:03,739
using node shift so about creating

01:01:00,680 --> 01:01:06,410
routes so these different sort of

01:01:03,739 --> 01:01:10,400
patterns or patterns as my six-year-old

01:01:06,410 --> 01:01:12,680
likes to say you know of keeping things

01:01:10,400 --> 01:01:14,900
separate and external configurations and

01:01:12,680 --> 01:01:19,369
circuit breaking and putting in using

01:01:14,900 --> 01:01:21,499
health checks so since we don't have any

01:01:19,369 --> 01:01:23,930
time I do I want if we did I was gonna

01:01:21,499 --> 01:01:25,130
do this thing where how would you

01:01:23,930 --> 01:01:26,359
actually do like a modern web

01:01:25,130 --> 01:01:28,069
application because they want the

01:01:26,359 --> 01:01:31,279
application for front-end here it's

01:01:28,069 --> 01:01:35,119
actually some I you know it's just HTML

01:01:31,279 --> 01:01:36,739
but it's also being served by it's just

01:01:35,119 --> 01:01:37,789
a regular web app it's just being served

01:01:36,739 --> 01:01:40,670
and it's also being to serve like an

01:01:37,789 --> 01:01:41,930
express server but how would you do like

01:01:40,670 --> 01:01:44,430
just like if you were gonna do like a

01:01:41,930 --> 01:01:47,460
react app or like angular amber

01:01:44,430 --> 01:01:49,200
something like that there's actually we

01:01:47,460 --> 01:01:52,260
actually have an s2i image that's

01:01:49,200 --> 01:01:53,670
specific for those kinds of things and

01:01:52,260 --> 01:01:55,350
you don't have to do this now because I

01:01:53,670 --> 01:01:59,250
know we're sort of at the time but

01:01:55,350 --> 01:02:04,080
basically this allows you to this this

01:01:59,250 --> 01:02:05,910
s2i image will take your like in this

01:02:04,080 --> 01:02:07,950
example it's just this react web app is

01:02:05,910 --> 01:02:11,910
a basic create react whip create react

01:02:07,950 --> 01:02:13,860
app application that's all it is and it

01:02:11,910 --> 01:02:15,930
basically will take that code it will

01:02:13,860 --> 01:02:18,690
Rhianna it will run the npm build or

01:02:15,930 --> 01:02:20,340
your on build whatever you're using it

01:02:18,690 --> 01:02:23,100
will take that it'll take what you've

01:02:20,340 --> 01:02:25,530
built and that output directory and then

01:02:23,100 --> 01:02:27,690
it will just it'll actually do ill use

01:02:25,530 --> 01:02:30,600
NPM serve or I think technically it's

01:02:27,690 --> 01:02:32,760
npx serve it'll use the serve module to

01:02:30,600 --> 01:02:34,710
then serve that code that's that's one

01:02:32,760 --> 01:02:38,850
way you can do it you can actually also

01:02:34,710 --> 01:02:41,610
do some slight modification or s-some

01:02:38,850 --> 01:02:44,460
some vibrant variables where you can

01:02:41,610 --> 01:02:46,950
actually run the full roll server or the

01:02:44,460 --> 01:02:49,880
dev server of that modern web app on

01:02:46,950 --> 01:02:52,020
open shift and then connect your code

01:02:49,880 --> 01:02:54,960
you know like a Narsingh kind of thing

01:02:52,020 --> 01:02:58,260
in between so changes you make locally

01:02:54,960 --> 01:03:02,310
they will reflect and that whole kind of

01:02:58,260 --> 01:03:04,500
loop of change making a change locally

01:03:02,310 --> 01:03:06,360
in it propagating up to the running

01:03:04,500 --> 01:03:08,910
container and then you can see the

01:03:06,360 --> 01:03:12,660
changes and stuff and then the other

01:03:08,910 --> 01:03:15,060
thing that this is great for is kind of

01:03:12,660 --> 01:03:19,320
that to state if I'll just go back to a

01:03:15,060 --> 01:03:23,370
really quick just to confuse everybody

01:03:19,320 --> 01:03:26,250
here was this so this two-stage thing

01:03:23,370 --> 01:03:27,540
here because really when you create a

01:03:26,250 --> 01:03:30,510
modern web app like a web application

01:03:27,540 --> 01:03:32,370
you're not necessarily it's all it is

01:03:30,510 --> 01:03:33,900
HTML and JavaScript it's not necessarily

01:03:32,370 --> 01:03:38,280
a node app right like you use no to

01:03:33,900 --> 01:03:40,020
build your things but you really don't

01:03:38,280 --> 01:03:41,700
use node to serve it necessarily and

01:03:40,020 --> 01:03:43,680
that's something like nginx or Apache or

01:03:41,700 --> 01:03:47,130
some sort of HTTP server is better

01:03:43,680 --> 01:03:49,200
suited for that so this allows you to do

01:03:47,130 --> 01:03:52,860
this this is what's called a chain build

01:03:49,200 --> 01:03:55,140
right here so you basically take your

01:03:52,860 --> 01:03:56,850
your web code which is the source code

01:03:55,140 --> 01:03:57,750
in this particular top example would

01:03:56,850 --> 01:04:00,030
that would that bill

01:03:57,750 --> 01:04:01,230
image that gets and you create a new

01:04:00,030 --> 01:04:03,540
image and then you can take that image

01:04:01,230 --> 01:04:06,450
with like an engine X image for instance

01:04:03,540 --> 01:04:09,000
and say because all really the image is

01:04:06,450 --> 01:04:11,010
is a file system and you can point and

01:04:09,000 --> 01:04:13,710
say here's where that code was just

01:04:11,010 --> 01:04:16,230
built using that code in that directory

01:04:13,710 --> 01:04:18,510
pipe or push that you know put that code

01:04:16,230 --> 01:04:20,100
into this nginx image and that gets

01:04:18,510 --> 01:04:22,740
built and that's the thing that actually

01:04:20,100 --> 01:04:24,690
runs so on your resulting image image

01:04:22,740 --> 01:04:28,320
with legible on function whatever you

01:04:24,690 --> 01:04:32,670
have 0 node code at all because all is

01:04:28,320 --> 01:04:33,870
is HTML and that kind of stuff I've

01:04:32,670 --> 01:04:35,700
written a few blog posts on that called

01:04:33,870 --> 01:04:39,630
modern map applications on OpenShift

01:04:35,700 --> 01:04:41,520
you can google that or not if you wanted

01:04:39,630 --> 01:04:44,640
to learn more or just come and talk to

01:04:41,520 --> 01:04:47,060
me if you want to or you don't have to

01:04:44,640 --> 01:04:50,430
talk to me at all if you don't want to

01:04:47,060 --> 01:04:51,830
so I'm actually gonna skip the questions

01:04:50,430 --> 01:04:55,220
section and just say thank you because

01:04:51,830 --> 01:05:00,210
this was a very interesting interesting

01:04:55,220 --> 01:05:02,490
thing just last if so I'm usually the

01:05:00,210 --> 01:05:04,170
person walking around aimlessly because

01:05:02,490 --> 01:05:05,970
I have nobody to talk to so if you find

01:05:04,170 --> 01:05:06,840
yourself in that position where you like

01:05:05,970 --> 01:05:09,330
walking on because don't really know

01:05:06,840 --> 01:05:11,370
anybody and you see me you can just

01:05:09,330 --> 01:05:12,180
randomly come and talk to me so you

01:05:11,370 --> 01:05:15,780
don't have to be in that position

01:05:12,180 --> 01:05:18,600
anymore just it has nothing to do with

01:05:15,780 --> 01:05:20,580
this talk it's just it's just how you

01:05:18,600 --> 01:05:22,680
know it's good this is how things happen

01:05:20,580 --> 01:05:25,140
in conferences so if you find yourself

01:05:22,680 --> 01:05:26,970
it's kind of a mostly walking around and

01:05:25,140 --> 01:05:29,070
been like I don't know what to do

01:05:26,970 --> 01:05:31,290
because I don't know anybody here and

01:05:29,070 --> 01:05:32,070
you see and you see me just you can come

01:05:31,290 --> 01:05:34,710
up in how we can have random

01:05:32,070 --> 01:05:38,520
conversations and how interesting this

01:05:34,710 --> 01:05:42,930
talk was or or fish or Star Wars or war

01:05:38,520 --> 01:05:46,140
Warcraft or anything really yeah so but

01:05:42,930 --> 01:05:50,420
alright thank you so much for enduring

01:05:46,140 --> 01:05:54,459
that alright yeah

01:05:50,420 --> 01:05:54,459

YouTube URL: https://www.youtube.com/watch?v=RhN-VCn6t4o


