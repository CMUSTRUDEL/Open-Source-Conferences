Title: Ruby On Ales 2013 `bundle install` Y U SO SLOW: Server Edition by Terence Lee
Publication date: 2020-01-28
Playlist: Ruby on Ales 2013
Description: 
	If you've ever done anything in ruby, you've probably used rubygems and to search or install your favorite gem. On October 17, 2012, rubygems.org went down. A Dependency API was built to be used by Bundler 1.1+ to speed up bundle install. Unfortunately, it was a bit too popular and the service caused too much load on the current infrasture. In order to get rubygems.org back up the API had to be disabled. You can watch the post-mortem for details. http://youtu.be/z73uiWKdJhw

Help us caption & translate this video!

http://amara.org/v/FGbC/
Captions: 
	00:00:12,650 --> 00:00:14,710
you

00:00:20,070 --> 00:00:26,189
possibly thanks i mean i'm super excited

00:00:22,740 --> 00:00:28,529
to be here last year was my first long

00:00:26,189 --> 00:00:30,539
never accept our conference so that's

00:00:28,529 --> 00:00:34,890
going to be back here rate is very

00:00:30,539 --> 00:00:39,500
monster Scooby some parents i'm the dude

00:00:34,890 --> 00:00:42,269
wears blue hat box round of part my mo I

00:00:39,500 --> 00:00:44,460
laree Stewart at work here which means i

00:00:42,269 --> 00:00:46,830
had all your experience when you push

00:00:44,460 --> 00:00:49,650
apps up there so and broken there's

00:00:46,830 --> 00:00:53,690
definitely my fault and it totally my

00:00:49,650 --> 00:00:56,370
fault so it was probably come talk to me

00:00:53,690 --> 00:00:58,969
here's my contact info imposed 02 on

00:00:56,370 --> 00:01:02,520
Twitter just hold on get out and then

00:00:58,969 --> 00:01:05,479
turns at broadcom that's with one are no

00:01:02,520 --> 00:01:07,410
A's people like this film I need a lock

00:01:05,479 --> 00:01:11,880
because if you do I won't get that you

00:01:07,410 --> 00:01:13,680
know come from Austin Texas not the bear

00:01:11,880 --> 00:01:15,690
area so I haven't been home in three and

00:01:13,680 --> 00:01:18,539
a half months so I guess my stuff was

00:01:15,690 --> 00:01:21,570
there if you're ever in town I would

00:01:18,539 --> 00:01:25,950
love to go out Paco so just don't read

00:01:21,570 --> 00:01:27,810
reject me grab the tacos my dream so one

00:01:25,950 --> 00:01:30,030
of the awesome things about Austin is

00:01:27,810 --> 00:01:33,030
that we have great barbecue so there's

00:01:30,030 --> 00:01:34,830
it's awesome it's like local barbecue

00:01:33,030 --> 00:01:36,869
chain that's like now all over Texas

00:01:34,830 --> 00:01:39,450
that started in austin pole gratis and

00:01:36,869 --> 00:01:41,369
they have these amazing and watch you

00:01:39,450 --> 00:01:42,990
might mistake your hands on that might

00:01:41,369 --> 00:01:45,930
happen 30 seconds their hands and pain

00:01:42,990 --> 00:01:47,280
really gained much your pc BBQ food and

00:01:45,930 --> 00:01:50,670
the best part is you get these like

00:01:47,280 --> 00:01:52,950
stickers and now so when I go home this

00:01:50,670 --> 00:01:57,079
Saturday I'm going to go and collect all

00:01:52,950 --> 00:01:59,939
these stickers on my door great question

00:01:57,079 --> 00:02:06,270
so it you guys are Constantine it's like

00:01:59,939 --> 00:02:09,509
my favorite sticker that he has so if

00:02:06,270 --> 00:02:12,390
you need I work on bundler Hungary guy

00:02:09,509 --> 00:02:14,940
talk about today that's you I would pop

00:02:12,390 --> 00:02:17,329
up from Steve and then some bunch of

00:02:14,940 --> 00:02:19,709
stuff with rails girls around the world

00:02:17,329 --> 00:02:21,930
so if you haven't done anything with

00:02:19,709 --> 00:02:22,770
railroad rails girls or any type of

00:02:21,930 --> 00:02:24,210
teaching word

00:02:22,770 --> 00:02:26,280
where you're talking to gators i would

00:02:24,210 --> 00:02:29,370
highly recommend it it's a great

00:02:26,280 --> 00:02:31,350
experience to sort of just like see the

00:02:29,370 --> 00:02:34,260
world from their view and realize how

00:02:31,350 --> 00:02:37,710
much stuff you forget that you know and

00:02:34,260 --> 00:02:39,600
how hard and a key is to be beginner so

00:02:37,710 --> 00:02:42,810
I like to do this somebody's often just

00:02:39,600 --> 00:02:47,310
to realize like how much is still sucks

00:02:42,810 --> 00:02:49,950
to start reprogramming and so I was just

00:02:47,310 --> 00:02:53,760
not straight a last month and forty aims

00:02:49,950 --> 00:02:55,830
a do thank you know and so report is

00:02:53,760 --> 00:02:59,550
doing for both paying for games and it's

00:02:55,830 --> 00:03:02,220
kinda important aids and one of the

00:02:59,550 --> 00:03:04,620
things he talked about was the

00:03:02,220 --> 00:03:06,990
simulation March where he would take on

00:03:04,620 --> 00:03:11,400
the title of someone else that you want

00:03:06,990 --> 00:03:14,190
to aspire to and so he took on the title

00:03:11,400 --> 00:03:16,800
Aaron Patterson because he wanted to he

00:03:14,190 --> 00:03:19,320
was so appreciative all the work here

00:03:16,800 --> 00:03:23,220
did notice or so twice a week he's gonna

00:03:19,320 --> 00:03:24,930
do this or Porter and I as well on its

00:03:23,220 --> 00:03:28,320
our dear cousin but for different

00:03:24,930 --> 00:03:30,870
reasons so Aaron's also does it's Friday

00:03:28,320 --> 00:03:33,630
hood thing so basically you would like

00:03:30,870 --> 00:03:35,910
take care for himself hiking the camera

00:03:33,630 --> 00:03:38,670
and it's meet at every friday since

00:03:35,910 --> 00:03:41,130
picture of him and is awesome cat for

00:03:38,670 --> 00:03:42,930
wood shop puff puff thunderhorse he'll

00:03:41,130 --> 00:03:44,550
also have a Twitter accounts for new pup

00:03:42,930 --> 00:03:48,240
you're not home yet I would highly

00:03:44,550 --> 00:03:50,990
recommend that so since near and start

00:03:48,240 --> 00:03:53,310
talking about this I started saying it

00:03:50,990 --> 00:03:56,970
or one of the things that aren does

00:03:53,310 --> 00:03:58,500
users in SF last week rwanda and you're

00:03:56,970 --> 00:04:00,780
just like walking down the street is guy

00:03:58,500 --> 00:04:02,760
comes up terms like a bride a hug and

00:04:00,780 --> 00:04:04,290
then just keeps walking and I thought

00:04:02,760 --> 00:04:06,000
that was pretty awesome so I was pretty

00:04:04,290 --> 00:04:08,070
inspired by that so I've kind of gone

00:04:06,000 --> 00:04:09,840
around the world while talking after

00:04:08,070 --> 00:04:14,099
everyone else

00:04:09,840 --> 00:04:19,290
Finland we did one in Singapore this is

00:04:14,099 --> 00:04:22,740
an Amsterdam Leon Seattle and looks like

00:04:19,290 --> 00:04:24,540
a bunch of other ones and so the final

00:04:22,740 --> 00:04:29,460
book Twitter accounts without me a pie

00:04:24,540 --> 00:04:31,440
hug evangelist so today's Friday and my

00:04:29,460 --> 00:04:33,960
brief conference so the women's that's a

00:04:31,440 --> 00:04:39,830
good product oh so you all could stand

00:04:33,960 --> 00:04:39,830
up and soon be five hugs inning pitcher

00:05:06,449 --> 00:05:14,409
pull my favorite part of policy and so

00:05:11,649 --> 00:05:16,029
on to the time so today I'm going to

00:05:14,409 --> 00:05:18,819
talk about sort of a little bit about

00:05:16,029 --> 00:05:21,009
what I did talk about last year so fun

00:05:18,819 --> 00:05:22,989
learner and the clients just in getting

00:05:21,009 --> 00:05:24,969
to sort of people who were your last

00:05:22,989 --> 00:05:27,609
year and to give you a sense of like why

00:05:24,969 --> 00:05:29,499
we actually have the API talk about the

00:05:27,609 --> 00:05:32,529
older events at work instructions or

00:05:29,499 --> 00:05:35,349
instant of when it went down the next

00:05:32,529 --> 00:05:37,559
talk about people drink I that awesome

00:05:35,349 --> 00:05:40,059
the bubbler team bolts and maintain and

00:05:37,559 --> 00:05:42,279
depending on how much time you have and

00:05:40,059 --> 00:05:45,339
how much people want to eat lunch I have

00:05:42,279 --> 00:05:47,169
a bonus round so I guess I'll take a

00:05:45,339 --> 00:05:51,819
pull out yeah I would see one go and

00:05:47,169 --> 00:05:53,939
talk about extra things so as I guess

00:05:51,819 --> 00:06:00,039
someone acts in the last presentation

00:05:53,939 --> 00:06:01,779
jessica says jessica lynn souls she is

00:06:00,039 --> 00:06:04,059
gian settles on twitter if you weren't

00:06:01,779 --> 00:06:08,409
calling her should i guess today's like

00:06:04,059 --> 00:06:11,499
that's good day and the reason we have

00:06:08,409 --> 00:06:14,379
pictured her in here as a gay she's 18

00:06:11,499 --> 00:06:21,009
tom burke or so we call graduate herbert

00:06:14,379 --> 00:06:22,629
or the bum teen super excited in the two

00:06:21,009 --> 00:06:24,279
years out and we're going to be haven't

00:06:22,629 --> 00:06:26,019
had anyone else on the team so this is

00:06:24,279 --> 00:06:28,779
like the first person that would be

00:06:26,019 --> 00:06:30,429
helping us what's up supersize of having

00:06:28,779 --> 00:06:35,409
no scripts on the team helping on gran

00:06:30,429 --> 00:06:38,109
died and you have so graduations so once

00:06:35,409 --> 00:06:40,389
upon their so what is it bummer for

00:06:38,109 --> 00:06:42,879
people are familiar just how high level

00:06:40,389 --> 00:06:45,969
it's a gem dependency manager your movie

00:06:42,879 --> 00:06:48,939
application so if you guys were here for

00:06:45,969 --> 00:06:50,769
the older days of rails 23 would you

00:06:48,939 --> 00:06:53,709
remember like the concrete jumps up I

00:06:50,769 --> 00:06:56,799
remember starting an application for my

00:06:53,709 --> 00:07:00,039
first flight for me job back to the day

00:06:56,799 --> 00:07:01,749
their boxes Austin and it would take

00:07:00,039 --> 00:07:03,429
literally like whole day just eat your

00:07:01,749 --> 00:07:05,409
app up and running yet to figure out

00:07:03,429 --> 00:07:06,350
what hemp's install even they were

00:07:05,409 --> 00:07:08,480
listed on

00:07:06,350 --> 00:07:09,920
then there's games that worked in there

00:07:08,480 --> 00:07:12,260
that you had installed and you have like

00:07:09,920 --> 00:07:14,300
clock your co-workers to figure out the

00:07:12,260 --> 00:07:16,610
exact comes you had installed and we're

00:07:14,300 --> 00:07:18,530
using my cucumber are back in the day so

00:07:16,610 --> 00:07:20,480
the birds that you come to work even

00:07:18,530 --> 00:07:23,090
really backwards compatible so if you're

00:07:20,480 --> 00:07:26,690
off by a patently slip would break your

00:07:23,090 --> 00:07:28,790
bowl integration custom ease and so when

00:07:26,690 --> 00:07:31,010
I saw you didn't Carl give us a hump on

00:07:28,790 --> 00:07:34,730
there I thought it was best thing since

00:07:31,010 --> 00:07:36,350
sliced red so the interface that most

00:07:34,730 --> 00:07:38,540
see you are familiar with is just funnel

00:07:36,350 --> 00:07:40,820
install or bundle which defaults to be

00:07:38,540 --> 00:07:43,490
installed for hands and literally you

00:07:40,820 --> 00:07:45,140
just have this gem file that has you

00:07:43,490 --> 00:07:46,940
list your sources and you need this dish

00:07:45,140 --> 00:07:48,890
for be doing today the private repos you

00:07:46,940 --> 00:07:50,960
have and then you just list the gems

00:07:48,890 --> 00:07:53,180
five down name and then sort of

00:07:50,960 --> 00:07:55,130
requirements hey Heather so this is the

00:07:53,180 --> 00:07:59,720
example jump follow me using in this

00:07:55,130 --> 00:08:01,310
presentation so when I was in this

00:07:59,720 --> 00:08:03,770
presentation last year i think the

00:08:01,310 --> 00:08:06,230
latest version back in was under 10 to

00:08:03,770 --> 00:08:10,160
do and then we ran this bundle install

00:08:06,230 --> 00:08:13,480
command over a year ago and we would get

00:08:10,160 --> 00:08:15,740
this profession source index message and

00:08:13,480 --> 00:08:18,440
your honor that you'd end up waiting a

00:08:15,740 --> 00:08:20,120
really long time and it plays so for

00:08:18,440 --> 00:08:23,120
that simple jump I'll that was just an

00:08:20,120 --> 00:08:24,200
asura it took about 18 seconds wish for

00:08:23,120 --> 00:08:26,780
a lot of people we got a bunch of those

00:08:24,200 --> 00:08:28,760
xk te compiling jokes related to bone

00:08:26,780 --> 00:08:30,320
there and say we go get a coffee or made

00:08:28,760 --> 00:08:33,410
a sandwich with a tight local stall at

00:08:30,320 --> 00:08:35,450
the time and in order to really

00:08:33,410 --> 00:08:38,330
understand like why why this is really

00:08:35,450 --> 00:08:40,960
that slow we have to look into sort of

00:08:38,330 --> 00:08:45,920
how well they're does all the results up

00:08:40,960 --> 00:08:47,090
so funny has this class hold of X and it

00:08:45,920 --> 00:08:49,450
doesn't want to self but most

00:08:47,090 --> 00:08:51,320
importantly it contains all these

00:08:49,450 --> 00:08:54,890
specification information needed to

00:08:51,320 --> 00:08:56,480
actually do the result and in it has

00:08:54,890 --> 00:08:59,870
this instance variable called specs

00:08:56,480 --> 00:09:01,850
which baki it's the name of the dome

00:08:59,870 --> 00:09:06,230
some spec name and then the value is

00:09:01,850 --> 00:09:10,270
this array of smash that s and we need

00:09:06,230 --> 00:09:14,600
to go and fetch all the the specs to

00:09:10,270 --> 00:09:16,580
fill up the index so inside this in xbox

00:09:14,600 --> 00:09:17,790
you have notes facts which halls goes

00:09:16,580 --> 00:09:19,740
through all remotes and

00:09:17,790 --> 00:09:24,050
in your junk piles all the sources and

00:09:19,740 --> 00:09:27,180
calls this special remote specs on and

00:09:24,050 --> 00:09:29,490
inside there we call smack better for

00:09:27,180 --> 00:09:33,060
rubygems and you notice we call twice

00:09:29,490 --> 00:09:35,310
and for each of these we gets back

00:09:33,060 --> 00:09:37,860
essentially modern index and so what the

00:09:35,310 --> 00:09:40,170
modern X is it's a list of all the gems

00:09:37,860 --> 00:09:42,180
that have I written release to that node

00:09:40,170 --> 00:09:44,010
server and the reason we have to call

00:09:42,180 --> 00:09:45,510
twice is because in the older versions

00:09:44,010 --> 00:09:48,390
of Ruby know they're cletus's fix it

00:09:45,510 --> 00:09:50,310
Ruby knows too but you when you'd call

00:09:48,390 --> 00:09:53,310
true true it actually would return both

00:09:50,310 --> 00:09:55,530
the actual specs and then if you're less

00:09:53,310 --> 00:09:58,320
pre-release spec so we have to fetch

00:09:55,530 --> 00:10:05,130
them twice then come on them bleep Eric

00:09:58,320 --> 00:10:07,590
fixes so thanks so a lot of people back

00:10:05,130 --> 00:10:09,090
today used to think oh the specs is like

00:10:07,590 --> 00:10:11,280
really large is why it takes a really

00:10:09,090 --> 00:10:13,140
long time to actually sort of do this

00:10:11,280 --> 00:10:15,690
was all why would it taste like 18

00:10:13,140 --> 00:10:18,120
seconds but I went and did this I guess

00:10:15,690 --> 00:10:20,820
about a month ago and it the main index

00:10:18,120 --> 00:10:22,200
was only about 1.2 megabytes so once

00:10:20,820 --> 00:10:24,420
you're on like a really really slow

00:10:22,200 --> 00:10:28,470
connection I don't imagine the staging

00:10:24,420 --> 00:10:30,900
variable time and if we go and look at

00:10:28,470 --> 00:10:34,100
what's inside this index it's all we see

00:10:30,900 --> 00:10:37,290
that it's a gzip file of this array of

00:10:34,100 --> 00:10:41,280
this reachable which is the gem named

00:10:37,290 --> 00:10:42,540
members of a bottle here and then inside

00:10:41,280 --> 00:10:45,000
a bundler we have this remote

00:10:42,540 --> 00:10:47,820
specification class which is kind of

00:10:45,000 --> 00:10:51,330
just a fake Gemma classification that

00:10:47,820 --> 00:10:53,520
quacks like gems education and inside

00:10:51,330 --> 00:10:55,410
the craft of the name the version of the

00:10:53,520 --> 00:10:58,020
platform and then we have this fourth

00:10:55,410 --> 00:10:59,760
option here in the stack pressure which

00:10:58,020 --> 00:11:03,810
allows us to fetch any other an extra

00:10:59,760 --> 00:11:05,760
information we need so when we call Jim

00:11:03,810 --> 00:11:08,070
remote better on the special we can

00:11:05,760 --> 00:11:09,330
download the actual jumps back and get

00:11:08,070 --> 00:11:11,940
any other information that's necessary

00:11:09,330 --> 00:11:13,470
so one of the things that you notice is

00:11:11,940 --> 00:11:15,180
that there's no dependency of patient

00:11:13,470 --> 00:11:16,980
here so without that you can't actually

00:11:15,180 --> 00:11:19,980
do the result is you have no ideas and

00:11:16,980 --> 00:11:21,810
we fetch Sinatra yep kid Palmer has no

00:11:19,980 --> 00:11:24,090
idea what the dependencies are that

00:11:21,810 --> 00:11:26,340
action is resolved so we would actually

00:11:24,090 --> 00:11:26,830
need to go and fetch this gem stack for

00:11:26,340 --> 00:11:30,430
each of these

00:11:26,830 --> 00:11:33,130
things that turn the resolver to get the

00:11:30,430 --> 00:11:35,470
dependency that it needs it's how do i

00:11:33,130 --> 00:11:37,330
has to construct the whole rap here it

00:11:35,470 --> 00:11:43,060
says don't have an identity information

00:11:37,330 --> 00:11:47,500
from the X so we go back to that

00:11:43,060 --> 00:11:51,550
promotes tax method that that the index

00:11:47,500 --> 00:11:53,020
calls we see that the metal respects and

00:11:51,550 --> 00:11:54,700
then we go through and sort of create

00:11:53,020 --> 00:11:57,550
all these were no specification objects

00:11:54,700 --> 00:11:59,760
for every single gem version platforms

00:11:57,550 --> 00:12:02,920
tuple that ever exists on freedoms and

00:11:59,760 --> 00:12:07,360
as you can imagine this takes up a lot

00:12:02,920 --> 00:12:09,400
of memory so on the back of the day when

00:12:07,360 --> 00:12:13,210
under 10 first came out if you have like

00:12:09,400 --> 00:12:15,730
a lino 256 megabytes yes good one bundle

00:12:13,210 --> 00:12:18,850
install because it just would consume

00:12:15,730 --> 00:12:20,560
too much memory in October finish so we

00:12:18,850 --> 00:12:22,030
realized this was a problem on the

00:12:20,560 --> 00:12:23,850
bottom team and this was one of the

00:12:22,030 --> 00:12:31,780
first things I work on after joining

00:12:23,850 --> 00:12:33,820
post 1 point 0 so using mother 1 2 3 we

00:12:31,780 --> 00:12:35,860
see that we get this fetching again meta

00:12:33,820 --> 00:12:38,800
data thing said the fecking source of X

00:12:35,860 --> 00:12:41,620
and when that happens that Gentile

00:12:38,800 --> 00:12:43,510
dishes in about three seconds which is a

00:12:41,620 --> 00:12:48,000
little bit faster than the 18 seconds

00:12:43,510 --> 00:12:50,590
were poor and the secret of this is that

00:12:48,000 --> 00:12:52,090
Ruby gems at the time when we were first

00:12:50,590 --> 00:12:56,200
building this built its endpoints that

00:12:52,090 --> 00:12:58,570
we hit this premiums up or a TI b 1

00:12:56,200 --> 00:13:01,300
dependencies it takes sort of this gem

00:12:58,570 --> 00:13:04,210
splendor of any common separated value

00:13:01,300 --> 00:13:06,910
list of all the gem of any of the gems

00:13:04,210 --> 00:13:08,980
that you want and so in our case we just

00:13:06,910 --> 00:13:12,360
pass sort of the top hole dependencies

00:13:08,980 --> 00:13:14,230
of things that you listen jump off here

00:13:12,360 --> 00:13:16,480
so if we go and look at what that

00:13:14,230 --> 00:13:18,040
becomes we see that it's pretty similar

00:13:16,480 --> 00:13:20,710
to the next but now we also get this

00:13:18,040 --> 00:13:23,260
fancy solution so you get name the

00:13:20,710 --> 00:13:25,690
version number of the gem of a platform

00:13:23,260 --> 00:13:28,120
and all this identities if you get array

00:13:25,690 --> 00:13:33,610
of that so few patents not Roy gives you

00:13:28,120 --> 00:13:34,520
every single version of that and then

00:13:33,610 --> 00:13:38,840
you get it said

00:13:34,520 --> 00:13:40,610
they're so now we can actually use a

00:13:38,840 --> 00:13:42,410
recursive method so this is the first

00:13:40,610 --> 00:13:44,360
method inside upon their s or goes

00:13:42,410 --> 00:13:46,070
through and continually hips and points

00:13:44,360 --> 00:13:48,410
to sort of construct a much smaller

00:13:46,070 --> 00:13:50,030
graph so if we just have to knock in

00:13:48,410 --> 00:13:52,700
there we don't actually care about rails

00:13:50,030 --> 00:13:54,890
and it's an empties or any other

00:13:52,700 --> 00:13:59,930
religion that doesn't Lee sort of fit on

00:13:54,890 --> 00:14:01,400
that crap there and then so instead of

00:13:59,930 --> 00:14:02,600
building a bunch of promoter

00:14:01,400 --> 00:14:05,030
classifications week to build this

00:14:02,600 --> 00:14:07,460
endpoint specification that instead of

00:14:05,030 --> 00:14:10,760
taking these back pressure it takes this

00:14:07,460 --> 00:14:13,220
much information now we know that we

00:14:10,760 --> 00:14:14,960
have the pen season kill confession this

00:14:13,220 --> 00:14:17,060
allows us to construct a savings

00:14:14,960 --> 00:14:20,060
autograph so we sort of walk through

00:14:17,060 --> 00:14:22,370
what that looks like with just at dr.

00:14:20,060 --> 00:14:24,920
example the first passive snapped up and

00:14:22,370 --> 00:14:27,410
then it returns tools rack protection

00:14:24,920 --> 00:14:29,270
rack on rolls these are any dependencies

00:14:27,410 --> 00:14:31,340
that ever existed as a personal

00:14:29,270 --> 00:14:33,680
defensive Sandro and if you go in for

00:14:31,340 --> 00:14:35,660
you all those get their dependencies can

00:14:33,680 --> 00:14:37,430
we construct that list imagine we get

00:14:35,660 --> 00:14:39,470
down to rack and then once again empty

00:14:37,430 --> 00:14:40,940
list you know we're done we have the

00:14:39,470 --> 00:14:43,910
complete wrap that we're ever going to

00:14:40,940 --> 00:14:47,570
40 on and so given that we can pan that

00:14:43,910 --> 00:14:50,540
to the resolver and it will finish and

00:14:47,570 --> 00:14:53,950
sort of do you remember so that's what

00:14:50,540 --> 00:14:57,590
all the client-side stuff out leading up

00:14:53,950 --> 00:15:01,190
to five libraries and endpoints and what

00:14:57,590 --> 00:15:04,910
it looks like on the client side so on

00:15:01,190 --> 00:15:06,320
to new stuff for this year so we move

00:15:04,910 --> 00:15:11,990
over to the server side of reasons

00:15:06,320 --> 00:15:14,900
aboard the old setup from last year was

00:15:11,990 --> 00:15:17,000
we have a single box it was a spike or

00:15:14,900 --> 00:15:19,400
machine I don't remember coach Graham it

00:15:17,000 --> 00:15:21,170
was running but it contained every

00:15:19,400 --> 00:15:22,850
single piece of the region's

00:15:21,170 --> 00:15:26,470
infrastructure that at each one so

00:15:22,850 --> 00:15:29,150
include the rails app that is on regions

00:15:26,470 --> 00:15:31,130
flat feet of the horn on get up it

00:15:29,150 --> 00:15:33,640
contained the postgres server that was

00:15:31,130 --> 00:15:35,890
using a sort user confirmation

00:15:33,640 --> 00:15:38,050
jetted out of stuff as well as the Retta

00:15:35,890 --> 00:15:41,140
stuff for cash download counts and

00:15:38,050 --> 00:15:43,810
whatnot as well as I believe the engine

00:15:41,140 --> 00:15:46,090
Xbox that was in the engine X server

00:15:43,810 --> 00:15:50,700
that I was sitting in the front to sort

00:15:46,090 --> 00:15:55,690
of box requests and handle satin assets

00:15:50,700 --> 00:15:59,080
but on Wednesday / 17 but Reuben James

00:15:55,690 --> 00:16:00,880
upward went down and one of the things

00:15:59,080 --> 00:16:03,670
that they had to do to bring it back up

00:16:00,880 --> 00:16:05,950
was that they took down the bummer he

00:16:03,670 --> 00:16:08,140
got and we realized in the post mortem

00:16:05,950 --> 00:16:10,000
when we're talking about it was at fund

00:16:08,140 --> 00:16:13,570
wreak havoc on for seventy percent of

00:16:10,000 --> 00:16:15,940
the traffic to that boss and it also

00:16:13,570 --> 00:16:19,360
took a three hundred eighty percent of

00:16:15,940 --> 00:16:21,280
the quarter percent of CQ available most

00:16:19,360 --> 00:16:23,650
the time and this was you too Marshall

00:16:21,280 --> 00:16:25,630
because father doesn't have any

00:16:23,650 --> 00:16:27,730
dependencies and if they do they're

00:16:25,630 --> 00:16:30,310
better tin and so one of the things that

00:16:27,730 --> 00:16:33,370
when they built this was that he

00:16:30,310 --> 00:16:35,620
returned the thing as a marshal dump and

00:16:33,370 --> 00:16:38,800
then sent it to Butler and butter with

00:16:35,620 --> 00:16:40,840
my marshall it and it feed it in and so

00:16:38,800 --> 00:16:45,100
having to marshal the data for every

00:16:40,840 --> 00:16:48,850
single requests is so they disabled the

00:16:45,100 --> 00:16:52,900
pond right guard and rock brunettes

00:16:48,850 --> 00:16:55,300
Thorg backup but i know from both

00:16:52,900 --> 00:16:57,160
working at roku and talk longer daylight

00:16:55,300 --> 00:16:59,320
this wasn't really a great social for us

00:16:57,160 --> 00:17:02,140
because this man we all went back to the

00:16:59,320 --> 00:17:03,910
Balmer 10 days like you had to hit you

00:17:02,140 --> 00:17:06,160
had to fetch indexes every time in there

00:17:03,910 --> 00:17:09,730
was no api and sort of the whole

00:17:06,160 --> 00:17:11,410
community was feeling that pain and so

00:17:09,730 --> 00:17:13,329
I've been really want that broker that

00:17:11,410 --> 00:17:15,370
when this happened they allowed me to

00:17:13,329 --> 00:17:16,810
just sort of drop everything else

00:17:15,370 --> 00:17:20,920
working on it sort of prototype

00:17:16,810 --> 00:17:22,540
something to get something running so we

00:17:20,920 --> 00:17:26,560
start working on this game on the API

00:17:22,540 --> 00:17:29,170
and these architects report was that we

00:17:26,560 --> 00:17:32,320
have this simple snack wrap because we

00:17:29,170 --> 00:17:34,480
just have to sort of mock up the bat one

00:17:32,320 --> 00:17:36,250
a cat in point that you pass the jokes

00:17:34,480 --> 00:17:38,830
too and have it returned the bolts back

00:17:36,250 --> 00:17:40,130
and then we want to move that load off

00:17:38,830 --> 00:17:43,790
of the region

00:17:40,130 --> 00:17:45,350
work infrastructure so that it could

00:17:43,790 --> 00:17:46,820
come back off it not really get affected

00:17:45,350 --> 00:17:49,280
in an engine acts and just rapt

00:17:46,820 --> 00:17:52,490
attention to some other service where it

00:17:49,280 --> 00:17:54,530
wasn't destroying this over there of the

00:17:52,490 --> 00:17:55,850
other things me to do was since this is

00:17:54,530 --> 00:17:58,160
now a separate piece in the

00:17:55,850 --> 00:18:00,830
infrastructure we have to somehow keep

00:17:58,160 --> 00:18:03,200
all of our data up-to-date because in a

00:18:00,830 --> 00:18:05,840
day we have to return the meta data that

00:18:03,200 --> 00:18:08,390
people look for and at the time we

00:18:05,840 --> 00:18:11,050
wanted to do web hooks up serene domes

00:18:08,390 --> 00:18:12,860
you don't know has this quote books

00:18:11,050 --> 00:18:14,930
infrastructure that allows you to get

00:18:12,860 --> 00:18:19,460
notified for specific gems or whole

00:18:14,930 --> 00:18:22,160
games when do gems get released and we

00:18:19,460 --> 00:18:24,830
wanted times that system so we get push

00:18:22,160 --> 00:18:27,440
notifications when new jobs release but

00:18:24,830 --> 00:18:30,350
that wasn't fun like we didn't have weed

00:18:27,440 --> 00:18:32,780
once you put work on the regions of work

00:18:30,350 --> 00:18:37,160
team to get this up so this came a lot

00:18:32,780 --> 00:18:39,800
later so if we look to a guide point is

00:18:37,160 --> 00:18:41,950
really two parts there's like the

00:18:39,800 --> 00:18:45,350
database i'm using which we took from

00:18:41,950 --> 00:18:49,370
regions on post rest and so Nick

00:18:45,350 --> 00:18:52,430
gave us a postgres dump of the Rue gems

00:18:49,370 --> 00:18:56,780
versions of these cables but what the

00:18:52,430 --> 00:18:59,360
private user that's up from i guess like

00:18:56,780 --> 00:19:01,880
it was a few weeks old and from that we

00:18:59,360 --> 00:19:04,070
could food shack the whole process so

00:19:01,880 --> 00:19:07,100
inside the rooms table we just really

00:19:04,070 --> 00:19:09,800
just or listing the names and then in

00:19:07,100 --> 00:19:11,540
the versions you have links of Rudy

00:19:09,800 --> 00:19:13,400
Jones and then basically the number of

00:19:11,540 --> 00:19:15,860
platforms whether it's creative gemenon

00:19:13,400 --> 00:19:17,420
and then inside the tendencies it's

00:19:15,860 --> 00:19:19,640
where you actually link the defense

00:19:17,420 --> 00:19:24,560
information so it's not you have on rack

00:19:19,640 --> 00:19:27,590
we have sinatra as the specific version

00:19:24,560 --> 00:19:29,260
likes not sure 142 and an attempt on rap

00:19:27,590 --> 00:19:32,140
that would easily get my the

00:19:29,260 --> 00:19:33,820
apartments to be whatever they

00:19:32,140 --> 00:19:37,240
operator or whatever you have their

00:19:33,820 --> 00:19:39,340
further markets listed so that makes up

00:19:37,240 --> 00:19:43,090
sort of the whole relational tables that

00:19:39,340 --> 00:19:44,500
you we have on phone great guy and from

00:19:43,090 --> 00:19:47,760
there we constructed this really awesome

00:19:44,500 --> 00:19:50,590
for a to get all the information I mean

00:19:47,760 --> 00:19:52,330
one of the things you have the main

00:19:50,590 --> 00:19:56,320
motive is at the bottom here you see the

00:19:52,330 --> 00:19:59,320
scope and so when you have empty have

00:19:56,320 --> 00:20:01,990
both runtime development and if you

00:19:59,320 --> 00:20:05,290
don't scopus you get too crazy circular

00:20:01,990 --> 00:20:07,360
dependencies so also when you're

00:20:05,290 --> 00:20:09,640
pointing out your a coupon don't care

00:20:07,360 --> 00:20:12,400
about developing portland gym at that

00:20:09,640 --> 00:20:15,790
time so we certain is to run time really

00:20:12,400 --> 00:20:18,450
important and then so here's literally

00:20:15,790 --> 00:20:22,270
like the paul modest instrumentation a

00:20:18,450 --> 00:20:24,130
code to just do this on out there so we

00:20:22,270 --> 00:20:26,110
have eight yagi one dependencies and

00:20:24,130 --> 00:20:28,600
then make sure that we returning like

00:20:26,110 --> 00:20:31,060
it's auto screen back to Ba murray cod

00:20:28,600 --> 00:20:33,610
and what we're calling the Marshall dump

00:20:31,060 --> 00:20:35,920
of like all the dependencies here and so

00:20:33,610 --> 00:20:38,050
this get thumbs ended just pulls the

00:20:35,920 --> 00:20:41,200
gems off the perimeter list splits then

00:20:38,050 --> 00:20:43,630
makes an array and then sort of call

00:20:41,200 --> 00:20:46,630
this step count method which essentially

00:20:43,630 --> 00:20:49,180
runs accordion massages it so just for

00:20:46,630 --> 00:20:51,610
clarity here it's like that method here

00:20:49,180 --> 00:20:53,530
so we call the sequel query which I

00:20:51,610 --> 00:20:55,480
showed before and we go for each them

00:20:53,530 --> 00:20:57,130
and sort of just put them in that format

00:20:55,480 --> 00:20:59,350
that's similar to the slide i have

00:20:57,130 --> 00:21:02,320
before of what it looked like 480 out

00:20:59,350 --> 00:21:05,500
here so you know that how did just makes

00:21:02,320 --> 00:21:07,810
up a whole web part of when you 40

00:21:05,500 --> 00:21:11,920
there's a 9.8 returns the top of the

00:21:07,810 --> 00:21:14,200
event and so now that we have that

00:21:11,920 --> 00:21:15,820
hard-working need to get sort of the

00:21:14,200 --> 00:21:17,790
sink codes make sure when people push

00:21:15,820 --> 00:21:20,590
your gums you actually get those enzyme

00:21:17,790 --> 00:21:23,020
and so the initial thing we have

00:21:20,590 --> 00:21:25,300
invented was this pulling mechanism i

00:21:23,020 --> 00:21:29,140
would literally just go through hit the

00:21:25,300 --> 00:21:32,290
index and try to talk in a few give in

00:21:29,140 --> 00:21:34,090
our lights or cash and post rest and so

00:21:32,290 --> 00:21:34,860
it needs it really just do two things so

00:21:34,090 --> 00:21:36,900
it needs to get

00:21:34,860 --> 00:21:39,059
new gems into our local cache and it

00:21:36,900 --> 00:21:41,010
needs to find a email this is much rarer

00:21:39,059 --> 00:21:42,840
like it still needs to find gems that

00:21:41,010 --> 00:21:45,030
were games like you're good to bad Elise

00:21:42,840 --> 00:21:47,190
a mark them to make sure not to return

00:21:45,030 --> 00:21:49,130
them back when people were doing bubble

00:21:47,190 --> 00:21:51,330
salt so they're not getting the exact

00:21:49,130 --> 00:21:53,960
have maybe security problems like

00:21:51,330 --> 00:21:56,700
hundreds like it out or other plug

00:21:53,960 --> 00:21:59,790
police's at people though the gem others

00:21:56,700 --> 00:22:02,160
don't want it from happening and just to

00:21:59,790 --> 00:22:03,630
give you a sense of so when we're

00:22:02,160 --> 00:22:06,090
building seven time I bleed it was like

00:22:03,630 --> 00:22:08,280
there's a gem released every five

00:22:06,090 --> 00:22:11,040
minutes was this at that i got from

00:22:08,280 --> 00:22:15,540
scheme so it was kind of important to

00:22:11,040 --> 00:22:18,720
try to keep this as fast as possible so

00:22:15,540 --> 00:22:20,850
inside of this we just had we have this

00:22:18,720 --> 00:22:23,220
sort of this worker pole up here and we

00:22:20,850 --> 00:22:25,020
started and then we go through we fetch

00:22:23,220 --> 00:22:27,000
all the specs from the modern tech

00:22:25,020 --> 00:22:30,120
center to what mother does we just go

00:22:27,000 --> 00:22:32,340
through and and sub job worker jobs for

00:22:30,120 --> 00:22:33,960
each of whether we need to get more at

00:22:32,340 --> 00:22:36,030
them so we go through in each of those

00:22:33,960 --> 00:22:38,790
jobs figures out you want you yank this

00:22:36,030 --> 00:22:42,240
gem this gym actually exists inside of

00:22:38,790 --> 00:22:44,280
the local catcher and then we have this

00:22:42,240 --> 00:22:45,990
poison thing and then we wait for this

00:22:44,280 --> 00:22:51,150
pool condition i'm sort of we just have

00:22:45,990 --> 00:22:53,760
a rape assets or ghosts and dozens so if

00:22:51,150 --> 00:22:55,980
you look at the super bowl that we both

00:22:53,760 --> 00:22:59,990
with us it's like pretty simple it uses

00:22:55,980 --> 00:23:03,179
cue from sander lips thread library and

00:22:59,990 --> 00:23:04,740
what we do is you can specify how big

00:23:03,179 --> 00:23:07,500
you want full is or how many threads you

00:23:04,740 --> 00:23:09,540
want to swap to do work and then you

00:23:07,500 --> 00:23:12,179
know pretty standard ipod usage on there

00:23:09,540 --> 00:23:14,700
so just add to queue when you start it

00:23:12,179 --> 00:23:17,100
you have you free all threads make sure

00:23:14,700 --> 00:23:20,880
the running and then join just join them

00:23:17,100 --> 00:23:23,700
freds and waits for a little finish so

00:23:20,880 --> 00:23:25,860
it exits cleanly and then we have this

00:23:23,700 --> 00:23:28,679
poison object so what this does is it's

00:23:25,860 --> 00:23:30,809
the special object that's inside the one

00:23:28,679 --> 00:23:34,090
loop when we take you a job you just

00:23:30,809 --> 00:23:37,510
check if that job is a poisonous it is

00:23:34,090 --> 00:23:39,690
no to exit so all those what is on tape

00:23:37,510 --> 00:23:42,730
at the end you have one for every single

00:23:39,690 --> 00:23:47,140
brad penny love you so make sure each

00:23:42,730 --> 00:23:50,380
day and so that's or the Superbowl there

00:23:47,140 --> 00:23:52,059
and so one of the things when we tried

00:23:50,380 --> 00:23:54,130
it so our initial lot of this was it

00:23:52,059 --> 00:23:57,309
took like 16 minutes i believe sort of

00:23:54,130 --> 00:23:59,770
go through indexes every time and that

00:23:57,309 --> 00:24:02,860
that we is not quite fast enough people

00:23:59,770 --> 00:24:06,730
earning a lot of problems when they push

00:24:02,860 --> 00:24:07,870
them to have them not be updated so one

00:24:06,730 --> 00:24:10,390
of the things they have meant was we

00:24:07,870 --> 00:24:12,970
have just like the 30 for damad license

00:24:10,390 --> 00:24:15,640
so we run this in blue and just make

00:24:12,970 --> 00:24:17,529
sure okay or how the index has been

00:24:15,640 --> 00:24:20,230
updated it off and like Wesley per

00:24:17,529 --> 00:24:23,470
minute and then the other thing we did

00:24:20,230 --> 00:24:28,360
was in memory we would keep track of all

00:24:23,470 --> 00:24:30,039
the stuff from days in a hash and if we

00:24:28,360 --> 00:24:32,049
would just check this hash so we would

00:24:30,039 --> 00:24:33,730
have to assumption to sort of a base for

00:24:32,049 --> 00:24:35,500
anything at all to bourbon single

00:24:33,730 --> 00:24:37,860
jamming every single comes back there

00:24:35,500 --> 00:24:41,590
and then you're just fully updated hash

00:24:37,860 --> 00:24:43,059
so once the leg after the first one

00:24:41,590 --> 00:24:44,980
would be warmed up I want to take like a

00:24:43,059 --> 00:24:46,980
minute or two factory with the same so

00:24:44,980 --> 00:24:51,720
you keep it up-to-date up pretty easily

00:24:46,980 --> 00:24:54,309
but then that is just like pretty

00:24:51,720 --> 00:24:56,610
resource intensive just sort of like add

00:24:54,309 --> 00:24:59,710
like one pair of every five minutes so

00:24:56,610 --> 00:25:02,350
we moved to we now move to these web

00:24:59,710 --> 00:25:07,090
hook system thanks to Andre and FM

00:25:02,350 --> 00:25:10,539
phoenix and so right inside of premiums

00:25:07,090 --> 00:25:12,490
so this is in ruins aboard this is some

00:25:10,539 --> 00:25:15,549
of the coat this is the code modest like

00:25:12,490 --> 00:25:17,350
some security or some like parsing sup

00:25:15,549 --> 00:25:19,330
to like make sure things are clean but

00:25:17,350 --> 00:25:21,820
essentially we just have this like JSON

00:25:19,330 --> 00:25:25,120
though and any time you push a gem it

00:25:21,820 --> 00:25:27,789
sends a request to bone or API and lets

00:25:25,120 --> 00:25:30,460
us know about a new gem has been updated

00:25:27,789 --> 00:25:32,880
and then we just have you know tokens

00:25:30,460 --> 00:25:35,559
erica security so you can't just like

00:25:32,880 --> 00:25:39,520
push to the end point let's put multi

00:25:35,559 --> 00:25:42,039
gems into orchid base and then we also

00:25:39,520 --> 00:25:44,440
make sure you have a timeout here so in

00:25:42,039 --> 00:25:47,470
case like bubbly guys down or

00:25:44,440 --> 00:25:49,840
some reason why you can't hit us or it

00:25:47,470 --> 00:25:52,270
takes too long but it doesn't prevent

00:25:49,840 --> 00:25:53,410
you from pushing into a mountain and it

00:25:52,270 --> 00:25:56,530
will just take that up through the

00:25:53,410 --> 00:25:58,750
repast later on and then so this is the

00:25:56,530 --> 00:26:01,000
code on pulmonary outside it's going to

00:25:58,750 --> 00:26:03,880
just suppose that this that pulls the

00:26:01,000 --> 00:26:06,670
same AB job as they pass and we just

00:26:03,880 --> 00:26:10,870
want it and make sure that it gets a

00:26:06,670 --> 00:26:12,730
tecate so all this phone is publicly

00:26:10,870 --> 00:26:15,430
available if you go to read em before

00:26:12,730 --> 00:26:17,290
you sort of um a guy all of our

00:26:15,430 --> 00:26:19,380
pulmonary guy code is there an obvious

00:26:17,290 --> 00:26:21,580
en route gem support code is under

00:26:19,380 --> 00:26:26,170
freedoms are born of the rubygems

00:26:21,580 --> 00:26:28,540
organization get up and so building it

00:26:26,170 --> 00:26:31,240
is one part but you are part of a frame

00:26:28,540 --> 00:26:32,590
guys who actually maintain stuff in

00:26:31,240 --> 00:26:34,480
production which i assume is once you

00:26:32,590 --> 00:26:35,710
guys like it's actually the service and

00:26:34,480 --> 00:26:39,700
eighth notes that takes up both of the

00:26:35,710 --> 00:26:41,290
timer work so one of the things to give

00:26:39,700 --> 00:26:44,080
you a sense of like how this is running

00:26:41,290 --> 00:26:47,470
so this one's on for you right now we

00:26:44,080 --> 00:26:50,860
have six items one uniform naked ones

00:26:47,470 --> 00:26:53,890
three workers each and then we have a

00:26:50,860 --> 00:26:55,510
ronin database for reads and then we

00:26:53,890 --> 00:26:58,050
have a g'day today's which is simply

00:26:55,510 --> 00:27:03,130
bigger I believe the low depends like

00:26:58,050 --> 00:27:07,030
1.7 gates and passion or something like

00:27:03,130 --> 00:27:09,370
that and so basically all of our wreaths

00:27:07,030 --> 00:27:11,620
for a guy and point go through life

00:27:09,370 --> 00:27:13,810
debase and then any of the flights just

00:27:11,620 --> 00:27:15,820
your master so we're sort of swinging

00:27:13,810 --> 00:27:18,070
the workload there this made a lot of

00:27:15,820 --> 00:27:19,960
sense or early on when we're doing the

00:27:18,070 --> 00:27:22,480
folding stuff because every time you

00:27:19,960 --> 00:27:24,460
would like every time you do a write it

00:27:22,480 --> 00:27:27,370
potentially destroy the database I just

00:27:24,460 --> 00:27:30,190
like hanging it over and over again with

00:27:27,370 --> 00:27:32,830
all those parades in resin to it so

00:27:30,190 --> 00:27:36,070
swing it early on helped us a lot with

00:27:32,830 --> 00:27:38,230
performance iron and some of the things

00:27:36,070 --> 00:27:40,480
being how to do to sort of have a

00:27:38,230 --> 00:27:43,780
service at people from island community

00:27:40,480 --> 00:27:47,680
was paging generously donated account

00:27:43,780 --> 00:27:50,620
something to them and Andre Larry and I

00:27:47,680 --> 00:27:51,020
are always on all for this so anytime he

00:27:50,620 --> 00:27:53,930
goes

00:27:51,020 --> 00:27:57,610
we get a text or email to let you know

00:27:53,930 --> 00:28:02,600
like there's happening or services down

00:27:57,610 --> 00:28:06,290
we use paper trail which they donated to

00:28:02,600 --> 00:28:09,560
us as well just like four blocks and go

00:28:06,290 --> 00:28:12,920
back and look at a lot of data to being

00:28:09,560 --> 00:28:15,470
alive bugs of problems and then we also

00:28:12,920 --> 00:28:17,000
usable rod with a blade layer did a lot

00:28:15,470 --> 00:28:18,680
of work on this sort of get us a

00:28:17,000 --> 00:28:20,900
dashboard of white what does it look

00:28:18,680 --> 00:28:23,000
like what is our performance what is the

00:28:20,900 --> 00:28:25,790
expectation air and same super helpful

00:28:23,000 --> 00:28:28,250
to sort of see whether me to scale or

00:28:25,790 --> 00:28:30,590
upgrades or database and it's like like

00:28:28,250 --> 00:28:32,630
during the security releases are

00:28:30,590 --> 00:28:35,210
graphically room handers day because a

00:28:32,630 --> 00:28:38,240
new rail gem from how everyone will buy

00:28:35,210 --> 00:28:40,580
upgrades or gems and like Earth

00:28:38,240 --> 00:28:43,760
certainly going out as we have this a

00:28:40,580 --> 00:28:49,550
lot and so how do these graphs we're all

00:28:43,760 --> 00:28:52,130
Pollock if we think that advisement so

00:28:49,550 --> 00:28:54,890
all this all the old lovato metrics are

00:28:52,130 --> 00:28:56,690
publicly available at this URL I think

00:28:54,890 --> 00:28:58,820
we're going to I think it's also on the

00:28:56,690 --> 00:29:00,560
German bomber complex launches page

00:28:58,820 --> 00:29:02,660
there's a link to this so you don't have

00:29:00,560 --> 00:29:06,920
to memorize it or by the type it in if

00:29:02,660 --> 00:29:08,600
you want to look at it but yeah it's all

00:29:06,920 --> 00:29:10,370
that subset of will and you also have

00:29:08,600 --> 00:29:13,700
things like air cons of the things that

00:29:10,370 --> 00:29:17,060
hit a committee alessio like a pro to

00:29:13,700 --> 00:29:20,630
spy pairs like nature's plus known as he

00:29:17,060 --> 00:29:22,850
it like it's a pollinator a powder went

00:29:20,630 --> 00:29:27,440
down or something to let us know that

00:29:22,850 --> 00:29:29,150
we're doing this up so sorta sad I've

00:29:27,440 --> 00:29:32,630
rulebook mating like how we set this up

00:29:29,150 --> 00:29:35,060
with vibrato we're using the Memphis

00:29:32,630 --> 00:29:37,550
jump highly recommend it if you're good

00:29:35,060 --> 00:29:40,070
use this and you just sort of Zama

00:29:37,550 --> 00:29:42,080
cotabato counts set all this up up and

00:29:40,070 --> 00:29:45,710
then when you push for option it will

00:29:42,080 --> 00:29:48,290
hang Lovato under your account and then

00:29:45,710 --> 00:29:50,270
in development we set the logger to go

00:29:48,290 --> 00:29:52,370
to that home we initially did not do

00:29:50,270 --> 00:29:54,590
this and then so we're ready to serve

00:29:52,370 --> 00:29:57,500
locally or blockages it stand with life

00:29:54,590 --> 00:29:59,029
working networks so it's not super

00:29:57,500 --> 00:30:01,880
helpful using when you're trying to test

00:29:59,029 --> 00:30:03,860
up what way to make you do that and then

00:30:01,880 --> 00:30:06,980
the nice stuff with metrics allows you

00:30:03,860 --> 00:30:09,250
to really easily like self timer

00:30:06,980 --> 00:30:11,299
information if dr. or histogram perhaps

00:30:09,250 --> 00:30:14,809
just by calling these things around

00:30:11,299 --> 00:30:17,450
methods nappin so the easily allows to

00:30:14,809 --> 00:30:21,559
construct annotation around certain

00:30:17,450 --> 00:30:23,990
parts of the application and I only want

00:30:21,559 --> 00:30:25,820
to never this point in but fight this

00:30:23,990 --> 00:30:28,640
foolery God is meant to be a fini

00:30:25,820 --> 00:30:30,770
projects so even I don't know if we've

00:30:28,640 --> 00:30:33,200
done that super great job of it but we

00:30:30,770 --> 00:30:36,260
we're trying to make this as transparent

00:30:33,200 --> 00:30:38,750
also like all the code is open source or

00:30:36,260 --> 00:30:42,049
rats or pokey bubble at the gym seekers

00:30:38,750 --> 00:30:44,590
here trying to keep information away and

00:30:42,049 --> 00:30:46,970
really we want to make it a project that

00:30:44,590 --> 00:30:49,340
people the root mean you're out of the

00:30:46,970 --> 00:30:52,309
order or if they want to help out in it

00:30:49,340 --> 00:30:55,760
like to redo so either reach out to

00:30:52,309 --> 00:30:59,809
Andre where I and fuel weren't happy

00:30:55,760 --> 00:31:02,330
like talking about it and getting set up

00:30:59,809 --> 00:31:04,789
like you can stay on like how to get

00:31:02,330 --> 00:31:06,710
this up and running I mean it actually

00:31:04,789 --> 00:31:08,120
provides a lot of benefit like with the

00:31:06,710 --> 00:31:09,590
garden see things that we can do like

00:31:08,120 --> 00:31:12,289
this or just the bare minimum getting

00:31:09,590 --> 00:31:14,120
API and for money but now that it is up

00:31:12,289 --> 00:31:16,130
and running like a lot of more things we

00:31:14,120 --> 00:31:18,740
can do so you're wondering things you

00:31:16,130 --> 00:31:20,179
think about with so with regards of

00:31:18,740 --> 00:31:23,750
disability monitoring on all the way

00:31:20,179 --> 00:31:25,850
that's an ongoing thing and any good

00:31:23,750 --> 00:31:28,340
thing you guys have just like

00:31:25,850 --> 00:31:31,399
information or knowledge from doing your

00:31:28,340 --> 00:31:32,929
jobs and just like how can we have a

00:31:31,399 --> 00:31:36,679
better visibility like what are the

00:31:32,929 --> 00:31:38,059
things that we do to honor a better how

00:31:36,679 --> 00:31:39,860
can we make our own publication

00:31:38,059 --> 00:31:44,059
something if you guys want to how about

00:31:39,860 --> 00:31:46,190
on call that'd be super awesome tail and

00:31:44,059 --> 00:31:47,899
then also like putting wise like /

00:31:46,190 --> 00:31:49,309
community like one of the things that

00:31:47,899 --> 00:31:53,210
we've talked about a lot after going the

00:31:49,309 --> 00:31:55,490
services we want to have a building for

00:31:53,210 --> 00:31:59,419
Butler to pass like a unique cookin for

00:31:55,490 --> 00:32:01,669
every time you fumbled Saul so that when

00:31:59,419 --> 00:32:03,309
on the server side is retractable gem

00:32:01,669 --> 00:32:05,710
file install so now we can get

00:32:03,309 --> 00:32:08,230
what is it a Versailles most jump out

00:32:05,710 --> 00:32:10,600
coming dependencies are people at like

00:32:08,230 --> 00:32:14,080
how long does that take all this slight

00:32:10,600 --> 00:32:16,179
usage metrics to sort of a bill but get

00:32:14,080 --> 00:32:18,070
efficient a father better be like

00:32:16,179 --> 00:32:20,740
interesting information just gives a

00:32:18,070 --> 00:32:23,620
unique way our gem store white or

00:32:20,740 --> 00:32:25,629
deposit over time like its rails adding

00:32:23,620 --> 00:32:29,499
like for the 50s as more releases are

00:32:25,629 --> 00:32:32,799
happening my stuff like that and the

00:32:29,499 --> 00:32:34,720
next part is sort of earring earring

00:32:32,799 --> 00:32:37,480
with primitive data so what that means

00:32:34,720 --> 00:32:39,759
is i think was kind of a painful bought

00:32:37,480 --> 00:32:41,799
play to sort of get all these in fiction

00:32:39,759 --> 00:32:44,080
versions yes it's like all get the whole

00:32:41,799 --> 00:32:46,210
let anyone go to the index fetch this

00:32:44,080 --> 00:32:48,700
information parts it juice up with it

00:32:46,210 --> 00:32:51,639
but it'd be much easier if you could

00:32:48,700 --> 00:32:53,350
just like poor do some API that gets me

00:32:51,639 --> 00:32:55,360
both of just life i just want the

00:32:53,350 --> 00:32:56,889
incremental differ i just want like this

00:32:55,360 --> 00:32:58,690
is if information and sort of making

00:32:56,889 --> 00:33:00,369
that much more easy accessible to all

00:32:58,690 --> 00:33:02,169
community versus being like i need to

00:33:00,369 --> 00:33:04,360
download everything and then figure out

00:33:02,169 --> 00:33:06,340
like the two things i want from all this

00:33:04,360 --> 00:33:08,169
data every time I want to do something

00:33:06,340 --> 00:33:11,350
so that's something we would like to

00:33:08,169 --> 00:33:13,450
explore more and then other things that

00:33:11,350 --> 00:33:16,179
I like I those are sort of the ideas

00:33:13,450 --> 00:33:17,799
that I have or the me hat on the team

00:33:16,179 --> 00:33:19,809
just talk about this stuff that we like

00:33:17,799 --> 00:33:22,059
to go forth of you but I'm sure there's

00:33:19,809 --> 00:33:24,249
some stuff that has really that you guys

00:33:22,059 --> 00:33:27,419
would like to see you want to step up

00:33:24,249 --> 00:33:30,940
and build some stuff into that service

00:33:27,419 --> 00:33:34,360
definitely trying to make it a service

00:33:30,940 --> 00:33:37,869
horrible new date here so I wanted to

00:33:34,360 --> 00:33:42,210
but I ones eh thoughtful thanks to Andre

00:33:37,869 --> 00:33:45,279
for all work on Butler and helping out

00:33:42,210 --> 00:33:48,879
maintain this moment I service with pain

00:33:45,279 --> 00:33:50,799
Larry with super HTML and I guess doing

00:33:48,879 --> 00:33:52,869
literally all the instrumentation in the

00:33:50,799 --> 00:33:55,509
app initially and getting a set up local

00:33:52,869 --> 00:33:58,149
rato prefer time and then putting in

00:33:55,509 --> 00:34:00,220
metrics and sort of taking the sort of

00:33:58,149 --> 00:34:00,540
furs I've been trying to make costly or

00:34:00,220 --> 00:34:02,880
real

00:34:00,540 --> 00:34:04,830
service where we monitor and I can see

00:34:02,880 --> 00:34:07,080
what is going on here and you can they

00:34:04,830 --> 00:34:10,860
use that about all the time of s and

00:34:07,080 --> 00:34:14,000
then Daniel arena Miroku was the initial

00:34:10,860 --> 00:34:17,160
person who healthy with swype county is

00:34:14,000 --> 00:34:23,660
your first doing referred to this we

00:34:17,160 --> 00:34:23,660
both know that's kind of how I all I had

00:34:26,510 --> 00:34:31,130
but it does anyone have any questions I

00:34:28,950 --> 00:34:31,130
guess

00:34:38,710 --> 00:34:46,250
okay so I want us route sweet so one of

00:34:44,300 --> 00:34:47,929
the things that were times even during

00:34:46,250 --> 00:34:50,540
the service I've been working on is this

00:34:47,929 --> 00:34:53,629
honor academy play service and so if you

00:34:50,540 --> 00:34:54,919
look at this graph here so we have about

00:34:53,629 --> 00:34:59,119
an app which is the thing that are going

00:34:54,919 --> 00:35:01,550
hits and what we can do developers on

00:34:59,119 --> 00:35:04,130
brokers that we have we can take like

00:35:01,550 --> 00:35:06,320
waterings and then essentially just try

00:35:04,130 --> 00:35:08,420
to we had this idea why trying to replay

00:35:06,320 --> 00:35:10,520
all this crap into Dodgers dating apps

00:35:08,420 --> 00:35:13,310
put the idea behind this is like we

00:35:10,520 --> 00:35:15,470
could stage we can have a scene yeah but

00:35:13,310 --> 00:35:17,780
see you can code be happy be like Oh

00:35:15,470 --> 00:35:19,490
what does this look like with v2 like

00:35:17,780 --> 00:35:22,070
we're currently running on car i when i

00:35:19,490 --> 00:35:23,360
read like what does this look like if

00:35:22,070 --> 00:35:25,040
you try to convert this out to do every

00:35:23,360 --> 00:35:29,000
week like what is the performance like

00:35:25,040 --> 00:35:30,590
are there much errors like or any other

00:35:29,000 --> 00:35:32,660
configuration like I want to switch to

00:35:30,590 --> 00:35:35,480
come on like what is that look like

00:35:32,660 --> 00:35:37,369
stuff like that I thought me super

00:35:35,480 --> 00:35:40,040
helpful to action yet production traffic

00:35:37,369 --> 00:35:43,940
on it and see below and see how that you

00:35:40,040 --> 00:35:47,690
performs so this is kind of that yet on

00:35:43,940 --> 00:35:49,160
this whole project error and so this

00:35:47,690 --> 00:35:51,200
lives that are my gate on counts up

00:35:49,160 --> 00:35:54,890
underneath every place or world code is

00:35:51,200 --> 00:35:56,750
there and so the key part to make this

00:35:54,890 --> 00:35:59,359
over is gone rogue we have these

00:35:56,750 --> 00:36:01,700
bloggers age thing and there's this beta

00:35:59,359 --> 00:36:05,359
P called HP my brains so if you ever use

00:36:01,700 --> 00:36:06,950
rope you at all you have a chronic motor

00:36:05,359 --> 00:36:10,220
will sing something like this get this

00:36:06,950 --> 00:36:13,250
routing log tells you like Method a path

00:36:10,220 --> 00:36:15,890
post a bunch of other like grabbing

00:36:13,250 --> 00:36:18,080
physics and then you also get like four

00:36:15,890 --> 00:36:20,300
other bottles so for sponsors like the

00:36:18,080 --> 00:36:22,700
standards not a lot of their if using

00:36:20,300 --> 00:36:25,280
post grad school create your slow query

00:36:22,700 --> 00:36:26,869
logs as well but for this particular

00:36:25,280 --> 00:36:31,640
service only fair doubt or the routing

00:36:26,869 --> 00:36:35,300
lines and so in order to sort of like do

00:36:31,640 --> 00:36:38,010
this at home you just need to enable the

00:36:35,300 --> 00:36:41,550
HTTPS drains lab seeker

00:36:38,010 --> 00:36:44,070
and then you just need to add a drain to

00:36:41,550 --> 00:36:46,560
the application that you want to drain

00:36:44,070 --> 00:36:48,930
the water on so this would be fun or API

00:36:46,560 --> 00:36:50,520
will be app name on a rope you because

00:36:48,930 --> 00:36:53,280
that's our production app and then you

00:36:50,520 --> 00:36:54,480
just pass in usually you want to set

00:36:53,280 --> 00:36:57,540
like some type of basic authentication

00:36:54,480 --> 00:37:01,350
here just zero watch old bill to post

00:36:57,540 --> 00:37:03,810
like bad logs to your app and then you

00:37:01,350 --> 00:37:06,150
just point like Lily any HD endpoint

00:37:03,810 --> 00:37:08,220
like anywhere old it Nina me on her

00:37:06,150 --> 00:37:10,440
ovary doesn't have to be it is made

00:37:08,220 --> 00:37:11,970
easier trust that safe design group here

00:37:10,440 --> 00:37:14,160
so we're just passing into this log data

00:37:11,970 --> 00:37:16,550
point here and so literally just don't

00:37:14,160 --> 00:37:20,490
miss not have that takes the post and

00:37:16,550 --> 00:37:23,070
the body is the routing or is the vlogs

00:37:20,490 --> 00:37:25,890
that would be sort of posted to that end

00:37:23,070 --> 00:37:27,930
point there so I built some libraries

00:37:25,890 --> 00:37:29,400
here inside of this that will

00:37:27,930 --> 00:37:33,120
essentially parse through that payload

00:37:29,400 --> 00:37:36,230
and try to figure out is this like is

00:37:33,120 --> 00:37:39,480
this a round log it is like let's

00:37:36,230 --> 00:37:42,360
legislate go through all the sites 102

00:37:39,480 --> 00:37:44,310
and put this on like you and sort of go

00:37:42,360 --> 00:37:48,990
through it and replay the traffic to

00:37:44,310 --> 00:37:50,130
those sites and so a fact that they were

00:37:48,990 --> 00:37:54,060
doing this experiment of your version a

00:37:50,130 --> 00:37:56,670
budding the app on in using sick dogs

00:37:54,060 --> 00:38:00,810
and obsessing I want to sort of see like

00:37:56,670 --> 00:38:02,820
how a reformed so I went to a lot of

00:38:00,810 --> 00:38:04,200
like Jeremy talks last year and one of

00:38:02,820 --> 00:38:05,880
the things they talked about was like

00:38:04,200 --> 00:38:07,770
how much better do you ever do is and

00:38:05,880 --> 00:38:09,720
how great the performance was but like

00:38:07,770 --> 00:38:12,600
all the benchmarks I gave you more like

00:38:09,720 --> 00:38:14,820
micro like they felt like the sandbox

00:38:12,600 --> 00:38:17,670
like awesome environment benchmark looks

00:38:14,820 --> 00:38:19,020
like i have a sauce out of them and like

00:38:17,670 --> 00:38:21,360
i'm going to do red black trees with

00:38:19,020 --> 00:38:23,970
every person alive if i want to see you

00:38:21,360 --> 00:38:26,970
like what does it look like in an actual

00:38:23,970 --> 00:38:29,690
app that i'm using ended and sort of see

00:38:26,970 --> 00:38:33,090
how that fair so just a single dino

00:38:29,690 --> 00:38:37,230
running six threads using none of that

00:38:33,090 --> 00:38:40,350
here should good people label it but i

00:38:37,230 --> 00:38:44,370
want to see so one of the things that we

00:38:40,350 --> 00:38:47,400
did to sort of make the experiment sort

00:38:44,370 --> 00:38:49,829
of demon was this is feature on Roku's

00:38:47,400 --> 00:38:51,509
poster a system that has

00:38:49,829 --> 00:38:53,219
change how I do a lot of things like you

00:38:51,509 --> 00:38:54,839
can have these followers that's what it

00:38:53,219 --> 00:38:57,119
is you can spend up another database we

00:38:54,839 --> 00:38:59,489
want to spend another follower database

00:38:57,119 --> 00:39:01,709
that matched the polar database that

00:38:59,489 --> 00:39:05,789
production using and so what this does

00:39:01,709 --> 00:39:08,430
is essentially like a inner of your

00:39:05,789 --> 00:39:10,109
database wanted in its independent

00:39:08,430 --> 00:39:12,180
boxing with eight of that production

00:39:10,109 --> 00:39:14,519
indeed it would be as close as possible

00:39:12,180 --> 00:39:18,119
like configuration wise so you slob

00:39:14,519 --> 00:39:20,309
another one of those and then we're just

00:39:18,119 --> 00:39:23,099
looking at the databases we have on one

00:39:20,309 --> 00:39:26,670
Drake I we have this crane which is just

00:39:23,099 --> 00:39:28,769
for random testing things on via the

00:39:26,670 --> 00:39:31,079
brown which is like the production reef

00:39:28,769 --> 00:39:32,880
ulmer and then the violet is the one

00:39:31,079 --> 00:39:35,700
that I just bought off in the last slide

00:39:32,880 --> 00:39:38,430
for testing purposes and then the Ronin

00:39:35,700 --> 00:39:40,079
down here which is a smaller one is sort

00:39:38,430 --> 00:39:44,279
of the master by paydays is that all the

00:39:40,079 --> 00:39:46,729
followers are hearing from so whenever

00:39:44,279 --> 00:39:51,599
we get this is kind of this graph here

00:39:46,729 --> 00:39:54,119
read it that well but the the blue graph

00:39:51,599 --> 00:39:57,420
is sort of the JRuby percent quite

00:39:54,119 --> 00:40:01,799
ninety percent I'll kc air so it seems

00:39:57,420 --> 00:40:04,289
like how to psyche and then the purple

00:40:01,799 --> 00:40:08,130
graph there is what it looks like a

00:40:04,289 --> 00:40:13,949
profit so certain much scooters Russ and

00:40:08,130 --> 00:40:17,579
then the my green rap like alway bottom

00:40:13,949 --> 00:40:19,680
column but Izzy like request a minute so

00:40:17,579 --> 00:40:23,660
like this is really that's how much they

00:40:19,680 --> 00:40:23,660
reach boss in there and then the

00:40:24,019 --> 00:40:30,509
born-again old one is the request form

00:40:28,019 --> 00:40:32,459
in a non-profit so one things that we

00:40:30,509 --> 00:40:34,799
notice is like pretty much always the

00:40:32,459 --> 00:40:36,089
whatever we were testing against like a

00:40:34,799 --> 00:40:38,579
minute and half your knives i think

00:40:36,089 --> 00:40:41,039
we've always be under and so the

00:40:38,579 --> 00:40:44,519
resilience like someone to discuss but

00:40:41,039 --> 00:40:46,219
we found out that republicanism joining

00:40:44,519 --> 00:40:48,329
with JRuby to get better performance but

00:40:46,219 --> 00:40:50,969
overall I've on one diner you can

00:40:48,329 --> 00:40:52,620
definitely get a lot more energy by a

00:40:50,969 --> 00:40:56,340
good amount of urz

00:40:52,620 --> 00:40:58,140
using Trinidad cat and we'd ever need to

00:40:56,340 --> 00:40:59,850
do some more pass to actually even my

00:40:58,140 --> 00:41:02,880
boot over but it was good to see that

00:40:59,850 --> 00:41:05,010
like I just can't move over like that

00:41:02,880 --> 00:41:07,770
like there was things we haven't looked

00:41:05,010 --> 00:41:09,710
into to try to get performance this

00:41:07,770 --> 00:41:12,690
ellipse a lodge whether it I was like a

00:41:09,710 --> 00:41:14,910
memory or what we need to tune like some

00:41:12,690 --> 00:41:16,920
of the data and settings those I still

00:41:14,910 --> 00:41:19,740
the CEO exciting before life just trying

00:41:16,920 --> 00:41:23,490
it and it's usually a happy event or

00:41:19,740 --> 00:41:25,770
something so the limitations of the same

00:41:23,490 --> 00:41:27,660
was like let me a vibe here between like

00:41:25,770 --> 00:41:29,850
my production gets it when I replay

00:41:27,660 --> 00:41:32,340
service we navigate the replay service

00:41:29,850 --> 00:41:34,890
faster but it's always gonna be behind

00:41:32,340 --> 00:41:37,350
weapon is the only way to get around

00:41:34,890 --> 00:41:42,540
this would be tactics it Robin that

00:41:37,350 --> 00:41:45,240
workout it to the other links that

00:41:42,540 --> 00:41:46,710
moment and the next thing that be else

00:41:45,240 --> 00:41:50,670
knows was if you don't have something

00:41:46,710 --> 00:41:55,410
fun like you're never an option in sleep

00:41:50,670 --> 00:41:57,450
early get the state of my sister so I

00:41:55,410 --> 00:41:59,130
sent the illumination to take into

00:41:57,450 --> 00:42:01,830
account well you sort of go through

00:41:59,130 --> 00:42:04,050
these metrics here and the other thing

00:42:01,830 --> 00:42:07,470
that we allow still do this is this app

00:42:04,050 --> 00:42:09,840
is completely stateless so if if no one

00:42:07,470 --> 00:42:12,510
ever pushed any of them to be when you

00:42:09,840 --> 00:42:15,660
send a query to regions be hellish

00:42:12,510 --> 00:42:17,220
always beats and songs and I know this

00:42:15,660 --> 00:42:19,260
isn't true for a lot of applications you

00:42:17,220 --> 00:42:22,770
guys moving light reception you're

00:42:19,260 --> 00:42:25,200
getting with users so this time project

00:42:22,770 --> 00:42:27,420
has limited like feasibility but it's

00:42:25,200 --> 00:42:29,970
something interesting that yeah and it's

00:42:27,420 --> 00:42:32,160
helped us out a lot as we move our appt

00:42:29,970 --> 00:42:36,690
already informed so let's see like how

00:42:32,160 --> 00:42:38,330
that fit out so in the future for this

00:42:36,690 --> 00:42:40,620
project one things I would like to do is

00:42:38,330 --> 00:42:42,420
sort of separate out these libraries

00:42:40,620 --> 00:42:45,390
that have built-in into like it jumped

00:42:42,420 --> 00:42:48,110
in like this is these are programming

00:42:45,390 --> 00:42:50,640
logs or these are broken like logs like

00:42:48,110 --> 00:42:52,920
using this library we can easily like

00:42:50,640 --> 00:42:54,960
classic soft and like we easily build

00:42:52,920 --> 00:42:57,360
your own standalone like blog grain to

00:42:54,960 --> 00:42:59,220
do like anything you wanted like I want

00:42:57,360 --> 00:43:00,160
metrics on like I want to look at the

00:42:59,220 --> 00:43:02,289
rottie metrics like

00:43:00,160 --> 00:43:06,069
boom like access that information to be

00:43:02,289 --> 00:43:08,500
late or like any other things so having

00:43:06,069 --> 00:43:10,359
has its own Santa Maria being really

00:43:08,500 --> 00:43:13,960
awesome and pulling that outside of this

00:43:10,359 --> 00:43:16,569
project and the next thing is offline

00:43:13,960 --> 00:43:18,789
processing so little into like just like

00:43:16,569 --> 00:43:20,619
take a sample log file or anything or

00:43:18,789 --> 00:43:22,690
just constant in and have actually

00:43:20,619 --> 00:43:25,180
replay to specific application may be

00:43:22,690 --> 00:43:27,400
super useful so we need to take like a

00:43:25,180 --> 00:43:29,380
log potentially paper trail you like oh

00:43:27,400 --> 00:43:31,210
like our appt went down during this time

00:43:29,380 --> 00:43:32,770
like let me try and replay that and see

00:43:31,210 --> 00:43:35,289
if I can reproduce that in one of our

00:43:32,770 --> 00:43:36,609
aging apps or and see you like if there

00:43:35,289 --> 00:43:40,270
is their various configuration that

00:43:36,609 --> 00:43:41,890
would help there or like easily like

00:43:40,270 --> 00:43:44,530
they get taped by an eclipse me I'd be

00:43:41,890 --> 00:43:45,910
able to just like Kayla log firm life

00:43:44,530 --> 00:43:47,799
maybe some other app and kinds of

00:43:45,910 --> 00:43:50,920
through I think that dude we play sort

00:43:47,799 --> 00:43:53,859
of like having what weight or on group

00:43:50,920 --> 00:43:56,400
or something and then next thing is just

00:43:53,859 --> 00:43:59,109
like having some way to sort of do like

00:43:56,400 --> 00:44:00,730
processing the herbs away able to sort

00:43:59,109 --> 00:44:03,160
of the traffic and then at some later

00:44:00,730 --> 00:44:05,230
time being so late so I've replayed that

00:44:03,160 --> 00:44:06,970
traffic anyone would be really cool so

00:44:05,230 --> 00:44:08,500
that means stuff that's like in the

00:44:06,970 --> 00:44:10,480
pipeline not have to really work on long

00:44:08,500 --> 00:44:14,170
but would love if people are interested

00:44:10,480 --> 00:44:20,260
in working on this project yeah that's

00:44:14,170 --> 00:44:22,770
kind of why I had for food are they

00:44:20,260 --> 00:44:22,770
questions

00:44:24,720 --> 00:44:27,720
alright

00:45:03,089 --> 00:45:05,150

YouTube URL: https://www.youtube.com/watch?v=bSUfsvvsk3E


