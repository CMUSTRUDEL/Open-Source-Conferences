Title: The Psychological Effects of useEffect - Sara Vieira | JSHeroes Meetups
Publication date: 2020-05-26
Playlist: JSHeroes Meetups 2020
Description: 
	We have been using hooks for a while and with that we have also been using useEffect in particular and in this today I wanna take a look at the trickier parts of useEffect and why they work that way so you can leave with a super understanding of how this magic all works.

Our speaker:
Sara is a developer at CodeSandbox. GraphQL and Open Source enthusiast. Conference Speaker and Airport expert. She's also a fan of horror movies, has talents such as banging sticks into a drum kit and saying the wrong thing at the wrong time.

Her twitter: https://twitter.com/NikkitaFTW
Captions: 
	00:00:03,179 --> 00:00:09,540
let's get started welcome again everyone

00:00:06,679 --> 00:00:10,950
50 people I think it's close to a record

00:00:09,540 --> 00:00:15,720
right there I'm not sure when they were

00:00:10,950 --> 00:00:18,439
that many people from it up so everyone

00:00:15,720 --> 00:00:18,439
must be hooked

00:00:23,699 --> 00:00:32,519
we have a special guest speaking today

00:00:28,490 --> 00:00:36,600
Sarah is originally from porto portugal

00:00:32,519 --> 00:00:39,690
and she's living in berlin and she's JS

00:00:36,600 --> 00:00:42,180
heroes ambassador and I really mean that

00:00:39,690 --> 00:00:44,190
like I think she was the one that made

00:00:42,180 --> 00:00:46,950
up coined that term ambassador because

00:00:44,190 --> 00:00:49,230
every conference I would go in Europe

00:00:46,950 --> 00:00:52,020
and I was telling people about Yeshua

00:00:49,230 --> 00:00:55,110
they're like oh yeah calling telling us

00:00:52,020 --> 00:01:02,039
about it because I cried in the

00:00:55,110 --> 00:01:06,240
interview she was really one one of the

00:01:02,039 --> 00:01:08,240
one of the best brand ambassadors or so

00:01:06,240 --> 00:01:11,810
you want to thank again for that and

00:01:08,240 --> 00:01:17,459
thank thanks for also for doing these

00:01:11,810 --> 00:01:20,849
presentations that's all the webcam is

00:01:17,459 --> 00:01:23,759
yours thank you and so is the share

00:01:20,849 --> 00:01:26,149
screen okay Alex can you give me a

00:01:23,759 --> 00:01:32,039
thumbs up if you can see my screen yep

00:01:26,149 --> 00:01:35,069
okay I'm gonna start with a type a small

00:01:32,039 --> 00:01:36,840
back story that starts in Oktoberfest so

00:01:35,069 --> 00:01:39,149
if you don't know so we're first it's

00:01:36,840 --> 00:01:41,130
that thing that happens in October where

00:01:39,149 --> 00:01:43,169
if you submit I think 500 requests you

00:01:41,130 --> 00:01:44,669
get a free t-shirt to any open source

00:01:43,169 --> 00:01:47,340
project which basically to me is like

00:01:44,669 --> 00:01:48,959
the month of the year where I get a free

00:01:47,340 --> 00:01:52,469
t-shirt because the code sandbox repo is

00:01:48,959 --> 00:01:53,909
open source and it's great but a lot of

00:01:52,469 --> 00:01:56,849
people have to do pro requests and at

00:01:53,909 --> 00:01:58,950
the time it was like when we were trying

00:01:56,849 --> 00:02:01,349
to convert a lot of the things to hooks

00:01:58,950 --> 00:02:03,509
on code sandbox so we thought like let's

00:02:01,349 --> 00:02:05,489
create a master issue and anyone who

00:02:03,509 --> 00:02:08,489
wants to work on converting it to hooks

00:02:05,489 --> 00:02:11,069
can just do it here and we were like it

00:02:08,489 --> 00:02:12,959
should be easy to like check out these

00:02:11,069 --> 00:02:16,079
things because it's just like your

00:02:12,959 --> 00:02:19,170
replace ed State with you state like it

00:02:16,079 --> 00:02:21,000
should be it should be fine it was not

00:02:19,170 --> 00:02:23,519
fine like it was actually quite terrible

00:02:21,000 --> 00:02:26,760
and I think that's what we realized that

00:02:23,519 --> 00:02:28,769
like yours effect is incredibly

00:02:26,760 --> 00:02:30,569
confusing I think that was the point in

00:02:28,769 --> 00:02:33,000
which we were like what the is

00:02:30,569 --> 00:02:34,409
happening and we have to send a bunch of

00:02:33,000 --> 00:02:36,420
requests down because we couldn't

00:02:34,409 --> 00:02:38,819
understand how to replace everything

00:02:36,420 --> 00:02:40,230
with use effect it was just like I don't

00:02:38,819 --> 00:02:42,329
think this is gonna work and there's

00:02:40,230 --> 00:02:46,260
like five or six components there that

00:02:42,329 --> 00:02:50,400
are still kind of like basically classes

00:02:46,260 --> 00:02:51,810
so like along that time I tried to

00:02:50,400 --> 00:02:55,079
figure out whose effect and I thought I

00:02:51,810 --> 00:02:57,239
did and I thought I was fine and then I

00:02:55,079 --> 00:02:59,489
started writing a like a book about like

00:02:57,239 --> 00:03:01,499
the things I use and react and stuff

00:02:59,489 --> 00:03:04,109
like that and I realize again that I do

00:03:01,499 --> 00:03:06,299
not understand use effect and I feel

00:03:04,109 --> 00:03:11,159
like and no one does and I feel like

00:03:06,299 --> 00:03:12,900
it's just something that is not easy so

00:03:11,159 --> 00:03:15,480
my talk today is gonna be about the

00:03:12,900 --> 00:03:18,209
psychological effects of use effect I am

00:03:15,480 --> 00:03:19,290
aware now because some what some person

00:03:18,209 --> 00:03:22,019
corrected me on Twitter that I

00:03:19,290 --> 00:03:23,760
misspelled psychological but no one

00:03:22,019 --> 00:03:26,760
cares I copied it out of Google now I

00:03:23,760 --> 00:03:29,670
hope everyone's happy ok so my name is

00:03:26,760 --> 00:03:31,079
Sarah I currently am a front-end

00:03:29,670 --> 00:03:32,700
developer at code sandbox which

00:03:31,079 --> 00:03:34,950
basically means that I make buttons and

00:03:32,700 --> 00:03:37,079
modal's and forms I quote sandbox

00:03:34,950 --> 00:03:38,760
because everything on the web is

00:03:37,079 --> 00:03:42,269
basically they're a modal a form or a

00:03:38,760 --> 00:03:46,319
button just look it up I live in Berlin

00:03:42,269 --> 00:03:48,629
and I am originally from the sunny face

00:03:46,319 --> 00:03:50,099
of Europe which is Portugal I'm still

00:03:48,629 --> 00:03:51,480
not sure if it's the face or the part of

00:03:50,099 --> 00:03:54,150
Europe but we'll get to it someday I

00:03:51,480 --> 00:03:56,370
don't know but I am originally from

00:03:54,150 --> 00:03:58,019
Portugal and you may be wondering why

00:03:56,370 --> 00:04:00,930
did someone from like this sunny place

00:03:58,019 --> 00:04:02,670
of happiness would move to Berlin this

00:04:00,930 --> 00:04:03,989
is the part where I should underline so

00:04:02,670 --> 00:04:05,819
like you need to understand that Berlin

00:04:03,989 --> 00:04:08,959
is the land of stone and architecture

00:04:05,819 --> 00:04:12,420
look at this it's a beautiful passage

00:04:08,959 --> 00:04:14,189
there's also very gourmet food that

00:04:12,420 --> 00:04:16,859
comes from all the spot seas that you

00:04:14,189 --> 00:04:18,510
can imagine so as species it's your spot

00:04:16,859 --> 00:04:20,220
say if you don't know what it is it's

00:04:18,510 --> 00:04:22,590
basically like a convenience store that

00:04:20,220 --> 00:04:24,060
sells cigarettes and beer and sometimes

00:04:22,590 --> 00:04:27,000
it's open until 2:00 a.m. and there's

00:04:24,060 --> 00:04:28,590
always people like drinking outside of

00:04:27,000 --> 00:04:29,820
this pizza and you're like you couldn't

00:04:28,590 --> 00:04:31,080
really find anywhere else

00:04:29,820 --> 00:04:33,570
right and you're like fine it's like

00:04:31,080 --> 00:04:36,690
people drinking outside of a like a gas

00:04:33,570 --> 00:04:39,840
station basically it's very conservative

00:04:36,690 --> 00:04:41,610
in nature before I move to where I am I

00:04:39,840 --> 00:04:43,230
used to live in print slavery in the

00:04:41,610 --> 00:04:44,880
part of Berlin which is actually quite

00:04:43,230 --> 00:04:46,320
conservative but in front of my house

00:04:44,880 --> 00:04:49,770
there was this you just you're looking

00:04:46,320 --> 00:04:51,870
ad and this part here is a kebab store

00:04:49,770 --> 00:04:55,320
so it's basics that explains Berlin

00:04:51,870 --> 00:04:57,630
basically and has the best airports look

00:04:55,320 --> 00:04:59,940
at this it's so bad this Airport is

00:04:57,630 --> 00:05:02,310
so bad we have one that's kind of ok

00:04:59,940 --> 00:05:06,000
the government closed it because of

00:05:02,310 --> 00:05:07,440
Corona and honestly I'm heartbroken but

00:05:06,000 --> 00:05:09,090
we're not here to talk about airports I

00:05:07,440 --> 00:05:10,590
wish we were here to talk about airports

00:05:09,090 --> 00:05:11,760
I could feel like an entire hour let me

00:05:10,590 --> 00:05:14,190
just ranting about airports

00:05:11,760 --> 00:05:16,770
we're here to talk about reacts react is

00:05:14,190 --> 00:05:20,190
JavaScript right and JavaScript stands

00:05:16,770 --> 00:05:21,870
for job security and honestly I'm the

00:05:20,190 --> 00:05:23,720
same no one can convince me otherwise I

00:05:21,870 --> 00:05:27,750
don't know why this only has 79 likes

00:05:23,720 --> 00:05:29,760
are you hooked yet thank you Alex thank

00:05:27,750 --> 00:05:32,040
you for ruining this okay so let's start

00:05:29,760 --> 00:05:34,560
with like yeah back in the day when we

00:05:32,040 --> 00:05:36,210
were all sweet summer childs and I still

00:05:34,560 --> 00:05:39,630
lived in Portugal where there's summer I

00:05:36,210 --> 00:05:41,940
mean we had component lifecycles so

00:05:39,630 --> 00:05:43,110
there's a bunch of other components life

00:05:41,940 --> 00:05:45,060
cycles where most of them are like

00:05:43,110 --> 00:05:46,410
prefixed with unsafe which means they're

00:05:45,060 --> 00:05:48,090
unsafe and you should not use them so I

00:05:46,410 --> 00:05:50,280
didn't put some chair so we have things

00:05:48,090 --> 00:05:52,800
like opponent in bands should component

00:05:50,280 --> 00:05:54,630
update where I've seen the worst use of

00:05:52,800 --> 00:05:56,100
super burn an update was when I saw

00:05:54,630 --> 00:05:57,720
project and one of the companies that I

00:05:56,100 --> 00:05:59,310
worked in where there was a bunch of

00:05:57,720 --> 00:06:01,620
people didn't know how to do they were

00:05:59,310 --> 00:06:04,050
back-end developers of PHP and excited

00:06:01,620 --> 00:06:05,940
use react and instead of like mapping an

00:06:04,050 --> 00:06:08,580
array like normally you're doing react

00:06:05,940 --> 00:06:10,590
they import a dollar from jQuery and

00:06:08,580 --> 00:06:13,380
they did it for each and appended HTML

00:06:10,590 --> 00:06:15,680
to the like a list and you're like what

00:06:13,380 --> 00:06:18,960
happens when it updates you return false

00:06:15,680 --> 00:06:20,460
so sure it's me you can never see worse

00:06:18,960 --> 00:06:22,320
code than that so you're gonna be fine

00:06:20,460 --> 00:06:24,060
and you have component in update and

00:06:22,320 --> 00:06:26,490
have components will unmount these were

00:06:24,060 --> 00:06:29,600
the main ones that we would use on a

00:06:26,490 --> 00:06:31,620
daily basis like there were a lot of

00:06:29,600 --> 00:06:33,750
good point of life site was like it was

00:06:31,620 --> 00:06:37,680
a lot to remember out of the top of your

00:06:33,750 --> 00:06:41,790
head but like can you guess when

00:06:37,680 --> 00:06:43,260
component adopted ran it ran when the

00:06:41,790 --> 00:06:46,140
 component updated like

00:06:43,260 --> 00:06:48,060
in the name like it's very obvious we're

00:06:46,140 --> 00:06:50,760
like component didn't mount renders like

00:06:48,060 --> 00:06:53,520
it renders wait upon the max you're like

00:06:50,760 --> 00:06:55,770
wow magic right but that was too easy

00:06:53,520 --> 00:06:56,850
and we can have that that's not the

00:06:55,770 --> 00:06:59,400
German way even though they're not

00:06:56,850 --> 00:07:00,930
German but that is not the way that we

00:06:59,400 --> 00:07:02,550
do things in the JavaScript world you're

00:07:00,930 --> 00:07:05,730
like this is too easy we can't do it

00:07:02,550 --> 00:07:07,140
gotta make it weird okay so that's the

00:07:05,730 --> 00:07:08,550
thing and if I tell you like there's

00:07:07,140 --> 00:07:10,050
this new thing that basically is

00:07:08,550 --> 00:07:13,230
lifecycle method it's called use effect

00:07:10,050 --> 00:07:15,840
can you guess what it runs everywhere

00:07:13,230 --> 00:07:17,130
like it's literally everything so you

00:07:15,840 --> 00:07:19,440
have instead of having these six

00:07:17,130 --> 00:07:22,380
functions you have this one tiny

00:07:19,440 --> 00:07:24,150
function that is usually actually pretty

00:07:22,380 --> 00:07:27,660
 massive but you have this one

00:07:24,150 --> 00:07:29,940
function that does everything and that's

00:07:27,660 --> 00:07:31,920
incredibly confusing at least to me so

00:07:29,940 --> 00:07:34,680
this is the basic thing of yours effect

00:07:31,920 --> 00:07:37,620
so you have a function called use effect

00:07:34,680 --> 00:07:40,080
and out of it you run a you run

00:07:37,620 --> 00:07:42,360
something and in sheer can I do this oh

00:07:40,080 --> 00:07:44,640
my god I can you put your your magical

00:07:42,360 --> 00:07:48,080
code here that's like I don't know

00:07:44,640 --> 00:07:50,760
usually fetching stop from an API and

00:07:48,080 --> 00:07:53,790
you can also do this clean up magic

00:07:50,760 --> 00:07:56,670
which is you will always associate it

00:07:53,790 --> 00:07:58,410
with component to a map will amount and

00:07:56,670 --> 00:08:00,240
I always associated with it and I got

00:07:58,410 --> 00:08:02,070
into so many issues with that because

00:08:00,240 --> 00:08:04,950
that's that what it's supposed to do

00:08:02,070 --> 00:08:08,820
because that again that would be too

00:08:04,950 --> 00:08:10,980
easy and then you have the dependencies

00:08:08,820 --> 00:08:13,410
right which in this case I showed us is

00:08:10,980 --> 00:08:15,950
an empty thing so you have three things

00:08:13,410 --> 00:08:19,350
to play with that are supposed to make

00:08:15,950 --> 00:08:21,570
everything there's what know wrong wrong

00:08:19,350 --> 00:08:23,790
right you have three things to play with

00:08:21,570 --> 00:08:26,840
that are supposed to be everything that

00:08:23,790 --> 00:08:29,520
like each component I have no idea many

00:08:26,840 --> 00:08:32,150
15 I'm kidding like six component life

00:08:29,520 --> 00:08:36,180
cycles were supposed to do and that

00:08:32,150 --> 00:08:37,470
makes it where is it

00:08:36,180 --> 00:08:40,140
okay it doesn't matter that makes it

00:08:37,470 --> 00:08:42,419
super confusing so this is a good ten

00:08:40,140 --> 00:08:43,979
box but I just after a while you may be

00:08:42,419 --> 00:08:48,090
wondering why I'm using my local editor

00:08:43,979 --> 00:08:50,460
it's because I'm gonna break the tab and

00:08:48,090 --> 00:08:52,050
if I break the tab in code sandbox

00:08:50,460 --> 00:08:55,170
I literally break pretty much all of the

00:08:52,050 --> 00:08:56,510
browser which is not a good idea because

00:08:55,170 --> 00:08:58,880
I'm running on battery

00:08:56,510 --> 00:09:00,710
because I have no fear it's like if it's

00:08:58,880 --> 00:09:05,300
too much Q&A I'm like oh no my battery's

00:09:00,710 --> 00:09:08,480
dying okay so that's creating its effect

00:09:05,300 --> 00:09:13,040
real fast so oh sorry let me increase

00:09:08,480 --> 00:09:16,070
the font size uh open user settings run

00:09:13,040 --> 00:09:18,410
sighs let me set it to 16 all right

00:09:16,070 --> 00:09:22,270
good start there we go I think that was

00:09:18,410 --> 00:09:27,770
too loud and I apologize um use effect

00:09:22,270 --> 00:09:29,390
okay cool so we have a user fact and in

00:09:27,770 --> 00:09:32,330
this oh I should explain what the code

00:09:29,390 --> 00:09:33,980
does first so you have this which

00:09:32,330 --> 00:09:35,510
basically just toggles the fancy text

00:09:33,980 --> 00:09:37,910
here which is something called react

00:09:35,510 --> 00:09:40,280
spectrum that it just shows this instead

00:09:37,910 --> 00:09:42,290
of like lorem ipsum blah blah blah and

00:09:40,280 --> 00:09:42,860
you have something that increases the

00:09:42,290 --> 00:09:45,290
counter

00:09:42,860 --> 00:09:48,380
it doesn't say time and times because no

00:09:45,290 --> 00:09:50,150
one cares this is the demo if someone

00:09:48,380 --> 00:09:52,790
says it's not one time I know it's not

00:09:50,150 --> 00:09:54,170
one time it's one time and in here I

00:09:52,790 --> 00:09:57,050
have a button that toggles the fancy

00:09:54,170 --> 00:10:01,460
text and said show text equal to natural

00:09:57,050 --> 00:10:03,770
text and put Times click plus one and

00:10:01,460 --> 00:10:06,740
then this just has this so like no

00:10:03,770 --> 00:10:08,360
animations no no fancy stuff we also

00:10:06,740 --> 00:10:09,740
don't care about whatever returns we

00:10:08,360 --> 00:10:11,780
only care about this so let's run

00:10:09,740 --> 00:10:16,100
something on every render on every

00:10:11,780 --> 00:10:17,810
render I want a console sorry I have a

00:10:16,100 --> 00:10:20,140
German keyboard but with a Portuguese

00:10:17,810 --> 00:10:22,190
thing and it's very confusing

00:10:20,140 --> 00:10:26,960
the Portuguese want to take two months

00:10:22,190 --> 00:10:30,260
to get here like I get I get that so if

00:10:26,960 --> 00:10:31,880
I do this and I save oh I was any error

00:10:30,260 --> 00:10:34,160
step oh my god I was like oh my god did

00:10:31,880 --> 00:10:36,320
I really already screw up that was fast

00:10:34,160 --> 00:10:39,860
increase the counter and then you have

00:10:36,320 --> 00:10:43,370
something that says what can I know

00:10:39,860 --> 00:10:44,000
apparently I click zoom and he does wait

00:10:43,370 --> 00:10:45,410
okay

00:10:44,000 --> 00:10:50,570
I don't know where the plus button is

00:10:45,410 --> 00:10:53,840
but it says what that's cool so we run

00:10:50,570 --> 00:10:55,430
this on everything okay cool and you may

00:10:53,840 --> 00:10:57,320
be wondering like that's cool so this

00:10:55,430 --> 00:11:00,770
means that it will render when this

00:10:57,320 --> 00:11:02,600
changes which it does and you will

00:11:00,770 --> 00:11:05,660
render when this changes which it says

00:11:02,600 --> 00:11:07,580
10 now and so that's cool so like

00:11:05,660 --> 00:11:10,070
basically what use effect is is a

00:11:07,580 --> 00:11:12,110
component it updates with a small

00:11:10,070 --> 00:11:14,240
all really up twists that is that

00:11:12,110 --> 00:11:16,850
if I reload the page it actually also

00:11:14,240 --> 00:11:19,040
runs on component in maps so it's like

00:11:16,850 --> 00:11:21,470
if you put together component it update

00:11:19,040 --> 00:11:24,020
with component it map just to make it

00:11:21,470 --> 00:11:27,830
more confusing okay so what if you want

00:11:24,020 --> 00:11:29,300
to run it only when something when the

00:11:27,830 --> 00:11:33,080
things start so you put an empty array

00:11:29,300 --> 00:11:35,480
in it so this is called the dependency

00:11:33,080 --> 00:11:37,310
array so this means that what I actually

00:11:35,480 --> 00:11:39,260
like the way they invention this is that

00:11:37,310 --> 00:11:41,450
you can pass several arguments as the

00:11:39,260 --> 00:11:42,950
third argument in use effect and these

00:11:41,450 --> 00:11:44,870
are all the dependents that use effect

00:11:42,950 --> 00:11:46,670
has so the way that react works is for

00:11:44,870 --> 00:11:49,580
example if you change the stage it's not

00:11:46,670 --> 00:11:51,440
like an object assignment it actually

00:11:49,580 --> 00:11:53,570
just rear Enders the thing with a new

00:11:51,440 --> 00:11:55,640
state for example and it passes the

00:11:53,570 --> 00:11:58,160
state down and it rear end there's the

00:11:55,640 --> 00:12:00,950
thing and it shakes like if this changed

00:11:58,160 --> 00:12:03,080
run this like if the value that's here

00:12:00,950 --> 00:12:06,650
so basically it gets its like if it gets

00:12:03,080 --> 00:12:08,450
this value here so text here that means

00:12:06,650 --> 00:12:10,580
that basically when he runs this

00:12:08,450 --> 00:12:12,560
function again which show text equals

00:12:10,580 --> 00:12:14,810
false it will see like oh this is not

00:12:12,560 --> 00:12:16,790
true anymore this is false so it needs

00:12:14,810 --> 00:12:19,040
to rerun the thing and you may be

00:12:16,790 --> 00:12:20,690
wondering like okay that's cool but the

00:12:19,040 --> 00:12:23,540
point is like why would you pass an

00:12:20,690 --> 00:12:26,240
empty array to me to this day this still

00:12:23,540 --> 00:12:27,740
sounds like a hack it sounds like

00:12:26,240 --> 00:12:29,990
something that they were like this

00:12:27,740 --> 00:12:31,520
sounds like it's gonna work so this

00:12:29,990 --> 00:12:33,890
means that if there's a dependency array

00:12:31,520 --> 00:12:37,100
and you changed when something changes

00:12:33,890 --> 00:12:40,580
if there's nothing on in then nothing

00:12:37,100 --> 00:12:42,770
changes and you're like i s yeah I guess

00:12:40,580 --> 00:12:44,630
that makes sense I don't think that was

00:12:42,770 --> 00:12:45,170
supposed to be the thing but yeah sure

00:12:44,630 --> 00:12:47,420
why not

00:12:45,170 --> 00:12:48,620
so if you think of it as a dependency

00:12:47,420 --> 00:12:51,050
array you can start to see different

00:12:48,620 --> 00:12:55,520
things so let's do something if I come

00:12:51,050 --> 00:12:58,220
here and I say lo you guess what happens

00:12:55,520 --> 00:13:00,380
law also never changes so this actually

00:12:58,220 --> 00:13:01,970
never runs again the dependency array

00:13:00,380 --> 00:13:03,680
there is there is no actual

00:13:01,970 --> 00:13:05,480
specification that says it needs to be

00:13:03,680 --> 00:13:07,550
empty but you could put whatever you

00:13:05,480 --> 00:13:10,970
want in it like if he never changes then

00:13:07,550 --> 00:13:13,040
it only runs once you can put text in it

00:13:10,970 --> 00:13:15,170
you can put a variable in it you can put

00:13:13,040 --> 00:13:18,140
wherever you wanted it if that's thing

00:13:15,170 --> 00:13:19,310
never changes it actually can only run

00:13:18,140 --> 00:13:22,550
once mm-hmm

00:13:19,310 --> 00:13:23,600
the summit sense does that make more

00:13:22,550 --> 00:13:25,820
sense than

00:13:23,600 --> 00:13:28,940
to run at once you must fasten and t

00:13:25,820 --> 00:13:30,410
array only all the time you actually

00:13:28,940 --> 00:13:32,839
just need to pass something that never

00:13:30,410 --> 00:13:35,060
changes because what I checked is like

00:13:32,839 --> 00:13:37,670
has this law changed it has not changed

00:13:35,060 --> 00:13:40,850
Lolita so it's fine you can it will not

00:13:37,670 --> 00:13:44,510
run again okay so up until now we're

00:13:40,850 --> 00:13:45,920
fine okay so let's try something so

00:13:44,510 --> 00:13:48,709
let's say you want to run something on

00:13:45,920 --> 00:13:50,630
component did unmount and that's usually

00:13:48,709 --> 00:13:51,920
like the first thing that I would do is

00:13:50,630 --> 00:13:54,470
that I would come here and I would say

00:13:51,920 --> 00:13:57,230
okay so that needs to return a function

00:13:54,470 --> 00:13:59,329
so that's how it works is that you need

00:13:57,230 --> 00:14:01,300
to return a function so let me return a

00:13:59,329 --> 00:14:03,950
function and that function returns

00:14:01,300 --> 00:14:06,380
consoled out loud and you're like okay

00:14:03,950 --> 00:14:09,320
so this is gonna run on the unmount of

00:14:06,380 --> 00:14:11,120
the component so like when I reload the

00:14:09,320 --> 00:14:13,399
page or something all right

00:14:11,120 --> 00:14:15,290
let me just write this and you're like

00:14:13,399 --> 00:14:18,380
that makes sense but on the other hand

00:14:15,290 --> 00:14:20,720
it doesn't because it also runs here so

00:14:18,380 --> 00:14:22,910
this actually does not run on the like

00:14:20,720 --> 00:14:25,670
the ending of the life cycle of a

00:14:22,910 --> 00:14:30,350
component of the entire component this

00:14:25,670 --> 00:14:32,600
runs on the end of each use effect so

00:14:30,350 --> 00:14:36,800
basically if this only runs on the start

00:14:32,600 --> 00:14:39,050
for example like this you're fine and

00:14:36,800 --> 00:14:41,480
that will never run unless I can like

00:14:39,050 --> 00:14:46,459
just break this component really hard

00:14:41,480 --> 00:14:49,130
and but if I run it on everything this

00:14:46,459 --> 00:14:51,140
means that it basically everything is

00:14:49,130 --> 00:14:53,810
broken this means that you're out doing

00:14:51,140 --> 00:14:55,519
this on every single thing so the point

00:14:53,810 --> 00:14:58,910
is if you want to do something on every

00:14:55,519 --> 00:15:01,579
render and you only want to unmount it

00:14:58,910 --> 00:15:03,380
on like an amount of the component you

00:15:01,579 --> 00:15:06,829
actually need to use effect so you need

00:15:03,380 --> 00:15:07,610
to do this and then wait where's my

00:15:06,829 --> 00:15:10,160
mouse there we go

00:15:07,610 --> 00:15:12,560
and then you need to do this and it's

00:15:10,160 --> 00:15:14,660
also like a lot of boilerplate and then

00:15:12,560 --> 00:15:17,660
you need to return this console that log

00:15:14,660 --> 00:15:21,110
and this will run every render but this

00:15:17,660 --> 00:15:23,420
will only run in the last render so like

00:15:21,110 --> 00:15:25,640
when the component gets unmounted which

00:15:23,420 --> 00:15:27,500
was not a very good example because i

00:15:25,640 --> 00:15:31,940
cannot test our component gets unmount

00:15:27,500 --> 00:15:34,069
it put oh wait I can't I can't I can

00:15:31,940 --> 00:15:35,000
wait but I gotta change the index oh my

00:15:34,069 --> 00:15:36,560
god this is so hard

00:15:35,000 --> 00:15:39,949
okay Const

00:15:36,560 --> 00:15:47,269
home okay you're now uppercase I don't

00:15:39,949 --> 00:15:50,749
care and okay cost show a set show

00:15:47,269 --> 00:15:50,959
whatever set show equals please don't do

00:15:50,749 --> 00:15:52,519
this

00:15:50,959 --> 00:15:54,230
it really bothers me I don't know why to

00:15:52,519 --> 00:15:56,660
when people are like lazy and they're

00:15:54,230 --> 00:15:58,879
like react that you state I don't know

00:15:56,660 --> 00:16:01,279
why it triggers my bones inside I don't

00:15:58,879 --> 00:16:03,139
I don't understand that either and this

00:16:01,279 --> 00:16:09,769
returns either

00:16:03,139 --> 00:16:14,899
so if home if show it returns app if not

00:16:09,769 --> 00:16:20,420
show every times no that was stupid

00:16:14,899 --> 00:16:25,040
because I need a button we can do this

00:16:20,420 --> 00:16:33,889
together as a family and now button on

00:16:25,040 --> 00:16:36,339
click set show equal to us not as 1s yes

00:16:33,889 --> 00:16:36,339
why not

00:16:40,569 --> 00:16:47,930
total everything there we go and now

00:16:45,019 --> 00:16:49,759
instead of this actual phone and home

00:16:47,930 --> 00:16:53,509
has a thing called toggle everything and

00:16:49,759 --> 00:16:57,949
now I'm gonna do something very very bad

00:16:53,509 --> 00:17:00,910
I know I am very aware that this is

00:16:57,949 --> 00:17:03,410
disgusting there we go oh look space

00:17:00,910 --> 00:17:05,000
space I don't know if it's worse than

00:17:03,410 --> 00:17:08,929
being like style equals margin bottom

00:17:05,000 --> 00:17:12,380
but at this point I don't care and now

00:17:08,929 --> 00:17:14,089
it actually runs this thing so the first

00:17:12,380 --> 00:17:16,760
thing that needs to be like thought into

00:17:14,089 --> 00:17:18,620
is that this the return function that

00:17:16,760 --> 00:17:20,449
supposed to be the unmount is the amount

00:17:18,620 --> 00:17:22,100
of the actual effect and not of the

00:17:20,449 --> 00:17:23,419
component which is a completely

00:17:22,100 --> 00:17:25,819
different thing from component will

00:17:23,419 --> 00:17:27,980
amount and I think the mistake that I

00:17:25,819 --> 00:17:31,340
made for example was that I just tried

00:17:27,980 --> 00:17:33,679
to map different uses of use effects in

00:17:31,340 --> 00:17:35,720
two different sorry different components

00:17:33,679 --> 00:17:38,720
like life cycles in two different uses

00:17:35,720 --> 00:17:42,169
of use effects and you cry in the shower

00:17:38,720 --> 00:17:42,799
alone because that doesn't work and it's

00:17:42,169 --> 00:17:46,760
very sad

00:17:42,799 --> 00:17:48,679
alright so I hope this makes sense I

00:17:46,760 --> 00:17:50,300
hope this makes sense I have no way of

00:17:48,679 --> 00:17:53,540
knowing because

00:17:50,300 --> 00:17:55,460
meet up Alex can you make a thumbs up if

00:17:53,540 --> 00:17:56,420
this makes sense it makes sense thank

00:17:55,460 --> 00:17:58,130
you Alex

00:17:56,420 --> 00:18:00,890
you are the best you're the only person

00:17:58,130 --> 00:18:02,840
I can see so like if you laugh I'm good

00:18:00,890 --> 00:18:04,310
and nobody feels it feels like he needs

00:18:02,840 --> 00:18:07,400
the love okay

00:18:04,310 --> 00:18:10,910
so let's continue this covering she's a

00:18:07,400 --> 00:18:13,160
fun okay so let's do something and I

00:18:10,910 --> 00:18:17,270
actually think I saved it in Pacey

00:18:13,160 --> 00:18:19,460
where's Pacey Hey No so this is just

00:18:17,270 --> 00:18:20,990
face I can just like do this okay so

00:18:19,460 --> 00:18:23,300
let's see what the are you doing

00:18:20,990 --> 00:18:25,430
here okay so in this case I'm returning

00:18:23,300 --> 00:18:27,980
a function right and the function is

00:18:25,430 --> 00:18:30,050
that you need to return something and it

00:18:27,980 --> 00:18:32,120
says if the x click is equal to zero you

00:18:30,050 --> 00:18:34,400
say show text is different than show

00:18:32,120 --> 00:18:37,510
text so which means is that if I reload

00:18:34,400 --> 00:18:42,170
this page why is it type of sunshine

00:18:37,510 --> 00:18:45,050
whatever and I do this everything Oh

00:18:42,170 --> 00:18:47,780
everything work I know why sorry no yeah

00:18:45,050 --> 00:18:50,270
look at this marvelous piece of

00:18:47,780 --> 00:18:56,570
technology this is why I couldn't run it

00:18:50,270 --> 00:18:58,520
inside of yeah oh my god oh okay so this

00:18:56,570 --> 00:19:00,470
is like okay if x squared equals zero

00:18:58,520 --> 00:19:04,610
then said show text to not show text

00:19:00,470 --> 00:19:07,460
okay so I need to run this on when time

00:19:04,610 --> 00:19:09,800
clicks when when show text changes

00:19:07,460 --> 00:19:13,400
okay cool so I can just pass this on

00:19:09,800 --> 00:19:16,010
show text but there's a problem here and

00:19:13,400 --> 00:19:18,890
the problem is anything in here will run

00:19:16,010 --> 00:19:21,050
on mount as well so another issue that

00:19:18,890 --> 00:19:23,140
I've had with use effect is that it's

00:19:21,050 --> 00:19:26,750
gonna break everything no it's fine

00:19:23,140 --> 00:19:28,520
beautiful beautiful so one problem that

00:19:26,750 --> 00:19:30,650
I've had with use effect is that if I

00:19:28,520 --> 00:19:32,570
want to do this which is a very shitty

00:19:30,650 --> 00:19:34,220
code but the point is if I want to do

00:19:32,570 --> 00:19:36,800
this and I only want to run it

00:19:34,220 --> 00:19:38,840
after the component has mounted well

00:19:36,800 --> 00:19:41,930
then that's that's terrible because I

00:19:38,840 --> 00:19:43,820
can't so the thing that if I run this

00:19:41,930 --> 00:19:46,520
every time time still it changes it the

00:19:43,820 --> 00:19:51,410
same thing happens actually the times

00:19:46,520 --> 00:19:52,730
click change yeah and now wait what see

00:19:51,410 --> 00:19:54,770
this is the problem with this effect

00:19:52,730 --> 00:19:57,470
you're like now that I think I have this

00:19:54,770 --> 00:20:00,230
figured out I don't have this figured I

00:19:57,470 --> 00:20:02,690
have no it does console.log it yeah okay

00:20:00,230 --> 00:20:03,510
oh yeah but it doesn't unmount times

00:20:02,690 --> 00:20:06,390
clicked

00:20:03,510 --> 00:20:08,520
that's the thing so like so times claim

00:20:06,390 --> 00:20:10,890
needs to change for this thing to

00:20:08,520 --> 00:20:13,500
actually run okay let me go back to the

00:20:10,890 --> 00:20:15,840
start so if you did this this only runs

00:20:13,500 --> 00:20:20,610
on start right if I do this this also

00:20:15,840 --> 00:20:23,700
runs on is also runs on start and one

00:20:20,610 --> 00:20:27,090
time to exchange but on start it runs on

00:20:23,700 --> 00:20:29,250
starts right oh good but it doesn't do

00:20:27,090 --> 00:20:32,130
the unmount on start because that thing

00:20:29,250 --> 00:20:34,890
has not unmounted it's all good and then

00:20:32,130 --> 00:20:36,540
it does only unmount like it only

00:20:34,890 --> 00:20:38,610
changes this when you increase the

00:20:36,540 --> 00:20:41,310
counter you're an increase the counter

00:20:38,610 --> 00:20:43,080
it actually runs this but the problem is

00:20:41,310 --> 00:20:47,610
this is never zero okay so let's put

00:20:43,080 --> 00:20:49,920
this s1 and this means that if I

00:20:47,610 --> 00:20:54,630
increase the counter to one everything

00:20:49,920 --> 00:20:56,550
breaks and you're like why because it

00:20:54,630 --> 00:20:59,160
says something really beautiful it says

00:20:56,550 --> 00:21:00,930
that destroy is not a function and

00:20:59,160 --> 00:21:04,020
you're like wait what the does that

00:21:00,930 --> 00:21:05,880
mean I can show you what that means this

00:21:04,020 --> 00:21:07,650
means that if for some reason the

00:21:05,880 --> 00:21:10,470
function that you have in here just

00:21:07,650 --> 00:21:12,840
returns no you have a function that

00:21:10,470 --> 00:21:15,090
returns null for example and you want to

00:21:12,840 --> 00:21:17,310
run this when you do show tax which can

00:21:15,090 --> 00:21:21,360
happen if you have an F inside of it so

00:21:17,310 --> 00:21:24,410
if I toggle the fancy text and I talk

00:21:21,360 --> 00:21:27,390
about it oh my god sorry it's like this

00:21:24,410 --> 00:21:30,210
and I talk all the fancy text everything

00:21:27,390 --> 00:21:33,120
breaks so the thing is you can never

00:21:30,210 --> 00:21:35,670
return null in a use effects if you have

00:21:33,120 --> 00:21:39,720
any type of if statements anything that

00:21:35,670 --> 00:21:41,100
may return null just you can't do it but

00:21:39,720 --> 00:21:45,570
I want to show you something really

00:21:41,100 --> 00:21:47,340
stupid which is uh not this I mean it's

00:21:45,570 --> 00:21:50,220
also stupid but it's not what I mean

00:21:47,340 --> 00:21:53,040
if you return in the finds everything is

00:21:50,220 --> 00:21:56,300
fine because apparently on the fine is a

00:21:53,040 --> 00:21:59,970
function but no is not a function that

00:21:56,300 --> 00:22:01,290
doesn't make any sense i I don't I

00:21:59,970 --> 00:22:04,740
honestly don't know why this is the

00:22:01,290 --> 00:22:05,850
thing I think someone tried to talk and

00:22:04,740 --> 00:22:08,520
I hope that never I'm off it's not in

00:22:05,850 --> 00:22:15,330
this conference talk oh my god is he

00:22:08,520 --> 00:22:17,270
here let's get it right okay so this is

00:22:15,330 --> 00:22:20,360
sorry guys think to make like

00:22:17,270 --> 00:22:22,370
slightly more sense okay so let's

00:22:20,360 --> 00:22:29,360
actually like get it something from an

00:22:22,370 --> 00:22:30,770
API I think oh I can write Kanye Kanye

00:22:29,360 --> 00:22:32,240
down reverse there we go so this is a

00:22:30,770 --> 00:22:35,390
random API that I keep using because it

00:22:32,240 --> 00:22:37,880
just returns text it's beautiful and you

00:22:35,390 --> 00:22:42,670
just call this okay so let's do that at

00:22:37,880 --> 00:22:48,350
the start and let's call so Fitch this

00:22:42,670 --> 00:22:52,040
fetch this you've got this right there

00:22:48,350 --> 00:22:55,340
we go okay and then you do the thing

00:22:52,040 --> 00:22:57,860
that no wait where am i doing that I can

00:22:55,340 --> 00:23:00,950
just do a sync yeah I can just do so

00:22:57,860 --> 00:23:03,290
that this is an async function and you

00:23:00,950 --> 00:23:05,570
say oh wait I mean I still want to do it

00:23:03,290 --> 00:23:08,900
then because the thing is just like not

00:23:05,570 --> 00:23:13,370
fun to do like then an R R the Chasen

00:23:08,900 --> 00:23:17,060
and okay so let's say like console

00:23:13,370 --> 00:23:19,490
dialogue just a weight cost data because

00:23:17,060 --> 00:23:22,910
this and no console that log this data

00:23:19,490 --> 00:23:24,350
okay cool so let's we return this return

00:23:22,910 --> 00:23:31,210
of the fine cuz that's was stupid and

00:23:24,350 --> 00:23:35,840
let me do this and where's that respect

00:23:31,210 --> 00:23:39,860
and I go here so something that you

00:23:35,840 --> 00:23:46,730
should know about use the fact is that

00:23:39,860 --> 00:23:55,340
oh yeah and it's got that quote okay so

00:23:46,730 --> 00:23:57,620
this works but you should not like

00:23:55,340 --> 00:24:01,840
apparently a thing is you should not get

00:23:57,620 --> 00:24:06,110
ya a use effect function should never be

00:24:01,840 --> 00:24:08,660
asynchronous so the reason for that that

00:24:06,110 --> 00:24:12,590
I found is that this is run in a very

00:24:08,660 --> 00:24:16,070
specific time so you run this when the

00:24:12,590 --> 00:24:18,020
like for example the show text changes

00:24:16,070 --> 00:24:20,900
so that shouldn't be an asynchronous

00:24:18,020 --> 00:24:26,030
return which makes sense so let's do

00:24:20,900 --> 00:24:28,610
this on set so text so if I go here you

00:24:26,030 --> 00:24:29,480
can see that it also runs on start great

00:24:28,610 --> 00:24:30,760
that makes sense

00:24:29,480 --> 00:24:36,890
toggle defense to check

00:24:30,760 --> 00:24:38,840
and since it's not on starts this says

00:24:36,890 --> 00:24:42,169
the same error which says the show is

00:24:38,840 --> 00:24:45,590
not a function and you're like what

00:24:42,169 --> 00:24:48,260
so put is you cannot write you cannot do

00:24:45,590 --> 00:24:49,669
this because that is not German way

00:24:48,260 --> 00:24:51,470
that's that's too easy

00:24:49,669 --> 00:24:54,110
but it doesn't make sense well the thing

00:24:51,470 --> 00:24:55,490
is effects have to be synchronous they

00:24:54,110 --> 00:24:57,559
can have promises inside of them but

00:24:55,490 --> 00:24:59,659
they can't be in asynchronous because

00:24:57,559 --> 00:25:01,730
they need to run at a specific time of

00:24:59,659 --> 00:25:03,830
your code I hope that kind of makes

00:25:01,730 --> 00:25:07,460
sense so you actually need to run this

00:25:03,830 --> 00:25:10,640
in here and this can be a stink and it's

00:25:07,460 --> 00:25:12,380
equals async and then you can put this

00:25:10,640 --> 00:25:13,039
in here okay now like this that's

00:25:12,380 --> 00:25:15,350
terrible

00:25:13,039 --> 00:25:20,350
and now you need to return data that

00:25:15,350 --> 00:25:24,200
quote yeah data transfer yes that worked

00:25:20,350 --> 00:25:25,760
and okay so in here I completely broke

00:25:24,200 --> 00:25:27,110
this year's effect so let me just write

00:25:25,760 --> 00:25:30,169
it again because I think that would be

00:25:27,110 --> 00:25:32,600
easier to them okay so now I can

00:25:30,169 --> 00:25:35,600
actually say so fetch data and that's

00:25:32,600 --> 00:25:40,429
fine Oh have to call it that then and

00:25:35,600 --> 00:25:43,610
then I can run a console that look and

00:25:40,429 --> 00:25:48,860
now in what it's perfectly fine so if I

00:25:43,610 --> 00:25:50,830
only run this on show text it runs in

00:25:48,860 --> 00:25:53,270
the beginning of course that makes sense

00:25:50,830 --> 00:25:56,630
but now it doesn't break any more so

00:25:53,270 --> 00:25:58,370
rule number 34 no that's actually the

00:25:56,630 --> 00:26:01,909
actual rule of the universe

00:25:58,370 --> 00:26:03,950
rule number 75 do not put async

00:26:01,909 --> 00:26:06,260
functions in use effect mmm and will

00:26:03,950 --> 00:26:07,940
either not work exactly the way you

00:26:06,260 --> 00:26:09,350
think it will or don't we'll just break

00:26:07,940 --> 00:26:12,470
your app completely and you're like what

00:26:09,350 --> 00:26:14,360
the just happened here that's

00:26:12,470 --> 00:26:17,299
because it needs to run in a very

00:26:14,360 --> 00:26:19,039
specific time you can't you can't do

00:26:17,299 --> 00:26:21,260
async things because reactant won't know

00:26:19,039 --> 00:26:24,020
when this actually runs it needs to run

00:26:21,260 --> 00:26:26,779
it at a time it does give you an error

00:26:24,020 --> 00:26:29,720
that is actually quite useful so if I

00:26:26,779 --> 00:26:33,649
copy all of this and I put it in here

00:26:29,720 --> 00:26:38,600
like this okay

00:26:33,649 --> 00:26:40,490
nope yes maybe let's go exactly okay so

00:26:38,600 --> 00:26:43,610
and I go to the error it says like

00:26:40,490 --> 00:26:44,360
warning in an error thing you have

00:26:43,610 --> 00:26:46,340
console

00:26:44,360 --> 00:26:50,510
warnings I don't know why this is an

00:26:46,340 --> 00:26:52,490
error even though it's a warning but

00:26:50,510 --> 00:26:53,900
that's besides the point an effect

00:26:52,490 --> 00:26:55,549
function must not return anything

00:26:53,900 --> 00:26:56,870
besides a function which is used for

00:26:55,549 --> 00:26:58,640
cleaning up it looks like you wrote and

00:26:56,870 --> 00:27:00,500
they sync effect which returns a promise

00:26:58,640 --> 00:27:04,370
so that's the thing it will always

00:27:00,500 --> 00:27:06,500
return a province ok cool so I hope this

00:27:04,370 --> 00:27:09,740
is making more sense so now let's try

00:27:06,500 --> 00:27:13,309
and do something which oh I don't think

00:27:09,740 --> 00:27:15,860
I have the thing installed ok so let me

00:27:13,309 --> 00:27:17,690
say that every time I click on show text

00:27:15,860 --> 00:27:19,400
I want to increase the counter might

00:27:17,690 --> 00:27:20,960
that make sense why wouldn't I do that

00:27:19,400 --> 00:27:23,240
that is a completely normal thing that

00:27:20,960 --> 00:27:26,809
you would do in your daily life right ok

00:27:23,240 --> 00:27:28,340
so I wanted to say that every time I do

00:27:26,809 --> 00:27:30,970
this so every time I increase the

00:27:28,340 --> 00:27:37,190
counter so it's show text I want to say

00:27:30,970 --> 00:27:39,940
set ok no it's not saying it salty the

00:27:37,190 --> 00:27:43,610
show text set number times but it's

00:27:39,940 --> 00:27:45,710
equal to N and let me just say n plus 1

00:27:43,610 --> 00:27:48,710
that's not what I'm sorry German

00:27:45,710 --> 00:27:51,440
keyboard so this means that when I click

00:27:48,710 --> 00:27:52,640
here the story is not a function and you

00:27:51,440 --> 00:27:57,620
know why because I forgot to take the a

00:27:52,640 --> 00:27:59,000
sink do it ok ok so as you can see you

00:27:57,620 --> 00:28:01,490
in already right now start and if I

00:27:59,000 --> 00:28:04,400
click total defense e-text that works

00:28:01,490 --> 00:28:07,070
and that's fine but the reality of it is

00:28:04,400 --> 00:28:11,840
I don't have the thing installed so this

00:28:07,070 --> 00:28:14,169
will not show me the error I need to go

00:28:11,840 --> 00:28:17,630
and goats and goats I am so sorry

00:28:14,169 --> 00:28:20,600
because I don't have the react hooks yes

00:28:17,630 --> 00:28:24,799
lint plugin and I need to click on 420

00:28:20,600 --> 00:28:30,650
to move Alex there we go so if I copy

00:28:24,799 --> 00:28:34,690
and paste this in here there we go and

00:28:30,650 --> 00:28:34,690
this an add react spectrum

00:28:37,690 --> 00:28:41,360
okay cool I know I get a new fatherhood

00:28:40,309 --> 00:28:43,269
crawl because it's not the latest

00:28:41,360 --> 00:28:45,710
version

00:28:43,269 --> 00:28:47,299
nope okay

00:28:45,710 --> 00:28:49,429
it looks like you have done this and

00:28:47,299 --> 00:28:51,529
cried in front of look I have I have

00:28:49,429 --> 00:28:57,279
like literally 20 minutes ago I was like

00:28:51,529 --> 00:29:00,409
I'm working okay cool so we have this

00:28:57,279 --> 00:29:02,299
which makes sense right

00:29:00,409 --> 00:29:04,070
always good set number of times quick

00:29:02,299 --> 00:29:11,350
and toggle the fancy text and everything

00:29:04,070 --> 00:29:13,580
is fine but what is the error of this I

00:29:11,350 --> 00:29:15,799
can also do something really fun which

00:29:13,580 --> 00:29:21,440
is like set so text equal to natural

00:29:15,799 --> 00:29:23,720
texture and if I do this what are you

00:29:21,440 --> 00:29:31,850
doing where are you Oh

00:29:23,720 --> 00:29:33,350
said show text I am so sorry see this is

00:29:31,850 --> 00:29:34,759
the thing that people usually correct me

00:29:33,350 --> 00:29:38,350
when I'm like in a live audience

00:29:34,759 --> 00:29:40,730
dog Oh fancy text that's cool so

00:29:38,350 --> 00:29:42,169
basically every time this effect runs in

00:29:40,730 --> 00:29:46,009
the store it just toggles the text so if

00:29:42,169 --> 00:29:48,080
I rerun this it basically just just says

00:29:46,009 --> 00:29:50,570
it's a false but it gives me an error

00:29:48,080 --> 00:29:53,299
which says react with dependency is

00:29:50,570 --> 00:29:56,149
missing show text oh I know okay sorry

00:29:53,299 --> 00:29:58,279
so if I do n plus one here not end but

00:29:56,149 --> 00:30:04,370
times click plus one so that's what I

00:29:58,279 --> 00:30:06,139
want sorry experiment I'm gonna

00:30:04,370 --> 00:30:11,720
apologize for the German keyboard until

00:30:06,139 --> 00:30:14,240
forever okay so that's cool right right

00:30:11,720 --> 00:30:15,769
I get a non value which makes perfect

00:30:14,240 --> 00:30:17,840
sense actually have no idea okay there

00:30:15,769 --> 00:30:23,029
we go so this runs on starts and it says

00:30:17,840 --> 00:30:25,429
okay so when short exchanges I need the

00:30:23,029 --> 00:30:27,980
I need the eslint plugin that's why we

00:30:25,429 --> 00:30:31,309
run called sandbox I am aware beautiful

00:30:27,980 --> 00:30:32,870
so when the shot exchanges just do this

00:30:31,309 --> 00:30:34,700
which doesn't make sense but you may

00:30:32,870 --> 00:30:35,990
want to like when some things changes

00:30:34,700 --> 00:30:38,450
you may want to trigger something else

00:30:35,990 --> 00:30:39,950
which is a completely valid thing so

00:30:38,450 --> 00:30:41,720
what happens this if I talk all the

00:30:39,950 --> 00:30:42,919
fancy text this happens and I can also

00:30:41,720 --> 00:30:45,740
increase the counter and trouble to

00:30:42,919 --> 00:30:47,629
fancy text that's cool but I only want

00:30:45,740 --> 00:30:50,190
to run this when short exchanges but the

00:30:47,629 --> 00:30:52,529
issue is that if I

00:30:50,190 --> 00:30:53,970
we got an error which says that react to

00:30:52,529 --> 00:30:58,289
accuse effect is missing a dependency

00:30:53,970 --> 00:31:00,750
times glitch which that's the thing so

00:30:58,289 --> 00:31:02,250
the thing is you're you're using

00:31:00,750 --> 00:31:04,620
something inside of yous effect that's

00:31:02,250 --> 00:31:07,559
not being tracked and reactors like

00:31:04,620 --> 00:31:09,419
you're using something here but you

00:31:07,559 --> 00:31:11,909
don't care when it changes but you need

00:31:09,419 --> 00:31:14,330
to care when it changes because you're

00:31:11,909 --> 00:31:17,399
saying like I want to get to time squids

00:31:14,330 --> 00:31:19,259
so this can actually bug out because the

00:31:17,399 --> 00:31:21,720
thing is you're not checking exactly

00:31:19,259 --> 00:31:24,120
what the number of this times clicked is

00:31:21,720 --> 00:31:26,700
you're only checking if the show text is

00:31:24,120 --> 00:31:28,500
toggled so there are ways that if you do

00:31:26,700 --> 00:31:29,730
this really fast it I'm definitely to

00:31:28,500 --> 00:31:31,259
God well there we go

00:31:29,730 --> 00:31:33,570
some some of it bugged out but I don't

00:31:31,259 --> 00:31:35,610
have a keyboard but like if you do this

00:31:33,570 --> 00:31:37,830
really fast if I could do this really

00:31:35,610 --> 00:31:40,679
fast but my hands are sweaty from doing

00:31:37,830 --> 00:31:43,049
your conference talk I can't do it okay

00:31:40,679 --> 00:31:45,000
but the point is it will catch the other

00:31:43,049 --> 00:31:47,370
value and not the actual value that you

00:31:45,000 --> 00:31:49,320
want to do but you may think okay fine

00:31:47,370 --> 00:31:53,549
fine okay I'll shut up this and I'll add

00:31:49,320 --> 00:31:57,240
times clicked but that really puts you

00:31:53,549 --> 00:31:59,730
in unlimited the butter no it's not

00:31:57,240 --> 00:32:01,500
butterflies it's just flies that puts

00:31:59,730 --> 00:32:03,090
you in unlimited loop I don't think it's

00:32:01,500 --> 00:32:04,860
an unlimited loop that's called it's not

00:32:03,090 --> 00:32:06,450
calling an unlimited loop that's what

00:32:04,860 --> 00:32:08,399
we're calling it because you're running

00:32:06,450 --> 00:32:10,740
this every time times call it changes

00:32:08,399 --> 00:32:13,379
and transclude changes every

00:32:10,740 --> 00:32:15,450
time because you change it instead of

00:32:13,379 --> 00:32:18,419
the use of fangs and you're like oh the

00:32:15,450 --> 00:32:21,029
 am I gonna fix this you can fix

00:32:18,419 --> 00:32:22,590
this with a very nasty it's not fast

00:32:21,029 --> 00:32:25,350
it's actually quite nice so you can get

00:32:22,590 --> 00:32:27,779
time school you can do two things inside

00:32:25,350 --> 00:32:29,940
of your state I can change it back

00:32:27,779 --> 00:32:34,529
because this is gonna break into zero

00:32:29,940 --> 00:32:37,289
like no time you can do what I did or

00:32:34,529 --> 00:32:40,409
you can do this so actually every of

00:32:37,289 --> 00:32:42,870
every you stayed you can call a function

00:32:40,409 --> 00:32:44,970
with a previous value and that previous

00:32:42,870 --> 00:32:46,259
value will be so you'll get to the

00:32:44,970 --> 00:32:48,000
previous value and then you can append

00:32:46,259 --> 00:32:50,549
to it so this will ensure that you

00:32:48,000 --> 00:32:53,940
actually don't need to pass times

00:32:50,549 --> 00:32:55,350
clicked inside of it this will ensure

00:32:53,940 --> 00:32:57,990
that every time this runs you will

00:32:55,350 --> 00:33:00,720
actually go reach X what times what the

00:32:57,990 --> 00:33:02,429
time how many times you have actually

00:33:00,720 --> 00:33:04,080
clicked on this button and how many

00:33:02,429 --> 00:33:07,049
times are in there so this will

00:33:04,080 --> 00:33:10,470
only run when I click this but said

00:33:07,049 --> 00:33:12,750
number of that oh I didn't save no I did

00:33:10,470 --> 00:33:14,760
save that's interesting it's not

00:33:12,750 --> 00:33:18,330
interesting it's just weird oh I'm only

00:33:14,760 --> 00:33:20,580
running this on Stark Babu times collect

00:33:18,330 --> 00:33:23,399
no it's not that one it's on show text

00:33:20,580 --> 00:33:28,080
so this to ensure that react is aware of

00:33:23,399 --> 00:33:30,120
what is happening in this in this state

00:33:28,080 --> 00:33:31,830
right now because it has to refresh it

00:33:30,120 --> 00:33:34,890
and it's also aware of what's happening

00:33:31,830 --> 00:33:38,190
in show text so we all update the

00:33:34,890 --> 00:33:39,779
component itself when short exchanges it

00:33:38,190 --> 00:33:41,279
doesn't need to care about the other one

00:33:39,779 --> 00:33:44,880
because the other one is all like

00:33:41,279 --> 00:33:47,610
encapsulated in shear and now it works

00:33:44,880 --> 00:33:52,440
what if I do something like this

00:33:47,610 --> 00:33:53,909
oh no chill so I return this oh wait I

00:33:52,440 --> 00:33:58,139
caught something really bad on my

00:33:53,909 --> 00:34:00,360
computer so what happens is if I click

00:33:58,139 --> 00:34:02,549
the fancy tips it's always zero take

00:34:00,360 --> 00:34:05,309
azygos to one and then he goes back to

00:34:02,549 --> 00:34:07,590
zero because that's what happens so the

00:34:05,309 --> 00:34:10,560
way that this works is that I can say

00:34:07,590 --> 00:34:14,599
when okay just bear with me as I

00:34:10,560 --> 00:34:18,839
remember how to use window that sit

00:34:14,599 --> 00:34:22,859
hangout if it's not this I'm sorry I

00:34:18,839 --> 00:34:25,919
haven't you said time on I'm like this

00:34:22,859 --> 00:34:29,550
is just gonna work everything breaks

00:34:25,919 --> 00:34:31,349
okay that makes sense because the stroke

00:34:29,550 --> 00:34:31,649
is not a function that actually makes

00:34:31,349 --> 00:34:36,659
sense

00:34:31,649 --> 00:34:40,230
weirdly enough that makes sense okay so

00:34:36,659 --> 00:34:41,580
if I run this to and then run once Donal

00:34:40,230 --> 00:34:43,679
defense it takes it's actually always

00:34:41,580 --> 00:34:46,050
gonna be just one because in here when I

00:34:43,679 --> 00:34:48,480
unmount it it's actually going to

00:34:46,050 --> 00:34:51,480
unmount every time this thing changes

00:34:48,480 --> 00:34:53,700
and you may be wondering what is the

00:34:51,480 --> 00:34:55,980
ultimate trick to run this like only

00:34:53,700 --> 00:34:58,530
when short X changes and not on the

00:34:55,980 --> 00:35:01,170
start well that's the thing I don't have

00:34:58,530 --> 00:35:04,800
one so you can use refs you can also use

00:35:01,170 --> 00:35:10,020
States which is kind of like dirty but

00:35:04,800 --> 00:35:12,589
you can say like const mount it ha set

00:35:10,020 --> 00:35:16,700
mounted you can also use register this

00:35:12,589 --> 00:35:20,210
set mounted because you state

00:35:16,700 --> 00:35:26,210
false and then you go on the first one

00:35:20,210 --> 00:35:27,770
and I just set mount it equals true yes

00:35:26,210 --> 00:35:33,829
I think that makes sense

00:35:27,770 --> 00:35:35,540
and if mounted you run a counsel dialog

00:35:33,829 --> 00:35:38,750
and I hope to god that this works

00:35:35,540 --> 00:35:42,010
oh not she I'm not giving you exact like

00:35:38,750 --> 00:35:43,280
a good boy oh my god I think it worked

00:35:42,010 --> 00:35:47,210
yes

00:35:43,280 --> 00:35:51,560
so if now I toggle the fancy text it'll

00:35:47,210 --> 00:35:53,570
actually only run this in here which I'm

00:35:51,560 --> 00:35:56,869
right there with you like this is not

00:35:53,570 --> 00:35:59,660
the best way but we the thing that I

00:35:56,869 --> 00:36:01,730
think happens a bit is that it's one

00:35:59,660 --> 00:36:05,240
function literally trying to do

00:36:01,730 --> 00:36:06,829
everything and when you try to do

00:36:05,240 --> 00:36:08,510
everything some edge cases are gonna

00:36:06,829 --> 00:36:11,000
miss and some things are gonna get

00:36:08,510 --> 00:36:12,740
confusing and kind of what got missed in

00:36:11,000 --> 00:36:15,440
the midst of all of use effect that

00:36:12,740 --> 00:36:17,240
happened to be component they update so

00:36:15,440 --> 00:36:19,550
to do component get update you actually

00:36:17,240 --> 00:36:23,329
have to check as this thing mounted yet

00:36:19,550 --> 00:36:25,220
and if it has then only run it there but

00:36:23,329 --> 00:36:27,859
for that even your mutable thing I think

00:36:25,220 --> 00:36:31,790
you can let me try to do it with ref so

00:36:27,859 --> 00:36:38,440
I can say Const mounted equals react

00:36:31,790 --> 00:36:41,180
that use Rev and I'm gonna say no and

00:36:38,440 --> 00:36:43,060
then set mounted is not to find I know

00:36:41,180 --> 00:36:47,200
I'm aware of that

00:36:43,060 --> 00:36:50,829
mounted are currents equals true and

00:36:47,200 --> 00:36:54,260
then if mounted run this if mounted dot

00:36:50,829 --> 00:36:57,460
current run this and the still doesn't

00:36:54,260 --> 00:36:57,460
work because that makes perfect sense

00:37:02,790 --> 00:37:07,590
see this is next dogs are gonna be alone

00:37:05,100 --> 00:37:08,370
we use wrath because I feel like this

00:37:07,590 --> 00:37:15,180
should work

00:37:08,370 --> 00:37:23,310
I feel like this definitely should work

00:37:15,180 --> 00:37:24,900
and yet it doesn't oh okay wait because

00:37:23,310 --> 00:37:28,200
this one is completely okay so the

00:37:24,900 --> 00:37:29,760
difference is that I've learned in the

00:37:28,200 --> 00:37:33,330
last couple of days and the rest was

00:37:29,760 --> 00:37:36,660
literally just now is that your f is

00:37:33,330 --> 00:37:39,240
actually not old can only math English

00:37:36,660 --> 00:37:41,220
is so hard can be used for more things

00:37:39,240 --> 00:37:43,650
than actually getting the reps out of

00:37:41,220 --> 00:37:45,990
like getting the L the jQuery thing out

00:37:43,650 --> 00:37:47,580
of the thing like out of an HTML element

00:37:45,990 --> 00:37:49,890
so that's what I use usually usually

00:37:47,580 --> 00:37:52,530
user asked for but reps are actually

00:37:49,890 --> 00:37:54,960
immutable value that will not rerender

00:37:52,530 --> 00:37:57,240
your component so the difference was

00:37:54,960 --> 00:37:59,040
that if I put a set state in here it

00:37:57,240 --> 00:38:00,900
will rerender the component so we won't

00:37:59,040 --> 00:38:03,840
run them it will only run this

00:38:00,900 --> 00:38:06,000
afterwards but if I do this you will

00:38:03,840 --> 00:38:07,800
actually just continue because it's

00:38:06,000 --> 00:38:09,600
mutable so this is also something that

00:38:07,800 --> 00:38:11,010
you can do which I do think it's kind of

00:38:09,600 --> 00:38:14,040
cleaner but on the other hand if someone

00:38:11,010 --> 00:38:15,150
who looks at it they're like what the

00:38:14,040 --> 00:38:17,880
 are you doing

00:38:15,150 --> 00:38:19,850
which is also a valid question that I do

00:38:17,880 --> 00:38:23,670
not have an answer for but that's cool

00:38:19,850 --> 00:38:25,890
okay so yeah that is pretty much what I

00:38:23,670 --> 00:38:28,140
wanted to show you this is like all of

00:38:25,890 --> 00:38:31,320
the really weird edge cases that I found

00:38:28,140 --> 00:38:35,520
with users effect there will be times

00:38:31,320 --> 00:38:40,740
where they react like hooks plug-in that

00:38:35,520 --> 00:38:43,080
I showed that I don't have locally the

00:38:40,740 --> 00:38:44,760
hooks plug-in that I showed like will

00:38:43,080 --> 00:38:47,190
catch some bugs but there will be times

00:38:44,760 --> 00:38:51,330
where it will just it's not exactly what

00:38:47,190 --> 00:38:53,370
you want and that's also okay if I go

00:38:51,330 --> 00:38:58,820
let me just I'm just gonna do something

00:38:53,370 --> 00:39:03,590
real fast okay so let's go here and

00:38:58,820 --> 00:39:11,870
let's look for iya slain it's like

00:39:03,590 --> 00:39:14,870
exhaust tube depths think okay it's here

00:39:11,870 --> 00:39:14,870
okay

00:39:16,319 --> 00:39:20,049
there we go

00:39:17,709 --> 00:39:22,150
sometimes it just doesn't do what you

00:39:20,049 --> 00:39:26,019
want it to do like it's fine

00:39:22,150 --> 00:39:28,719
so and get for this one the thing is for

00:39:26,019 --> 00:39:31,119
example this is a modal let's say this

00:39:28,719 --> 00:39:33,429
is a modal I can show this in here

00:39:31,119 --> 00:39:36,369
that's fine so I'm gonna copy this in

00:39:33,429 --> 00:39:39,160
here and I don't need this because it

00:39:36,369 --> 00:39:42,179
won't give me the error but what I want

00:39:39,160 --> 00:39:50,919
to do is like if you click ask it will

00:39:42,179 --> 00:39:53,529
also share to set the shots next oh

00:39:50,919 --> 00:39:54,419
ask is not to find I mean that makes

00:39:53,529 --> 00:39:58,809
sense

00:39:54,419 --> 00:40:00,039
dad yeah I sort of got a persist as okay

00:39:58,809 --> 00:40:04,869
it says something else that's not a

00:40:00,039 --> 00:40:06,249
that's good okay so if I click ask no it

00:40:04,869 --> 00:40:08,619
also you can't see me but I actually

00:40:06,249 --> 00:40:10,150
have an S cuz this is 16 inch MacBook so

00:40:08,619 --> 00:40:12,519
I have an actual test I hope you can

00:40:10,150 --> 00:40:15,819
hear it it's beautiful yeah it also does

00:40:12,519 --> 00:40:18,069
this but it will tell you like I want to

00:40:15,819 --> 00:40:20,499
see when listen for ask changes me like

00:40:18,069 --> 00:40:23,549
like don't care what it changes like I

00:40:20,499 --> 00:40:25,989
just generally don't give a so

00:40:23,549 --> 00:40:28,269
that's the reason why the thing is there

00:40:25,989 --> 00:40:30,819
sometimes it works sometimes it will

00:40:28,269 --> 00:40:33,729
give you some random thing so this one

00:40:30,819 --> 00:40:37,869
is because it needs oh this one for

00:40:33,729 --> 00:40:41,709
example let's delete this and there you

00:40:37,869 --> 00:40:46,059
go okay as missing dependencies like all

00:40:41,709 --> 00:40:48,279
of these but the thing is I don't want

00:40:46,059 --> 00:40:50,469
local team like I don't care I'd

00:40:48,279 --> 00:40:52,150
actually don't want it to change so

00:40:50,469 --> 00:40:55,029
there will be cases where it won't work

00:40:52,150 --> 00:40:57,609
and you'll be like okay that's cool um

00:40:55,029 --> 00:40:59,739
this once I think he wants filter to go

00:40:57,609 --> 00:41:01,539
but I'm like I don't want it to go like

00:40:59,739 --> 00:41:02,679
I only so the thing is for example in

00:41:01,539 --> 00:41:05,979
this case let me try to explain this

00:41:02,679 --> 00:41:07,419
case so in this case I'm running I am

00:41:05,979 --> 00:41:09,130
getting all the filters that come out of

00:41:07,419 --> 00:41:12,009
the user like selecting like I want to

00:41:09,130 --> 00:41:14,259
see it all the reacts and boxes for

00:41:12,009 --> 00:41:17,019
example and I set the visible send boxes

00:41:14,259 --> 00:41:18,549
you like the filter that we have and

00:41:17,019 --> 00:41:20,079
blah blah blah but I don't want to run

00:41:18,549 --> 00:41:22,479
it one filter changes because filter

00:41:20,079 --> 00:41:24,909
will change more times than this case we

00:41:22,479 --> 00:41:27,900
will also change would like to scroll so

00:41:24,909 --> 00:41:30,850
it doesn't make sense

00:41:27,900 --> 00:41:33,210
that was a lot of complaining I'm tired

00:41:30,850 --> 00:41:36,910
I'm tired of complaining that was great

00:41:33,210 --> 00:41:39,520
okay so do things that a couple of

00:41:36,910 --> 00:41:46,750
things that I want to leave right now is

00:41:39,520 --> 00:41:48,520
that so if I add this and I say and I

00:41:46,750 --> 00:41:51,370
say that I want to run something on

00:41:48,520 --> 00:41:57,570
unmount so I do this and I say console

00:41:51,370 --> 00:42:00,310
that log a this will not one on

00:41:57,570 --> 00:42:02,680
component will amount to Ryan component

00:42:00,310 --> 00:42:05,590
will amount you have to do this this

00:42:02,680 --> 00:42:07,720
will run when the effect like unmount

00:42:05,590 --> 00:42:09,610
basically so it's a cleanup to this

00:42:07,720 --> 00:42:14,230
effect it's not a clean up to the

00:42:09,610 --> 00:42:16,090
unmounting of the entire component the

00:42:14,230 --> 00:42:18,280
reason we use an empty array is because

00:42:16,090 --> 00:42:21,400
an empty array never changes that's the

00:42:18,280 --> 00:42:26,320
only reason you can use text you can use

00:42:21,400 --> 00:42:27,880
numbers you can I use like fake fake

00:42:26,320 --> 00:42:29,380
variables but besides that you can use

00:42:27,880 --> 00:42:30,790
whatever you want as long as it doesn't

00:42:29,380 --> 00:42:33,010
change it's actually not gonna get used

00:42:30,790 --> 00:42:37,450
again you can use this as a common thing

00:42:33,010 --> 00:42:41,620
it's like in key what Fiasco okay

00:42:37,450 --> 00:42:45,060
and here I run console log I can do

00:42:41,620 --> 00:42:49,530
whatever the you want it's fine

00:42:45,060 --> 00:42:55,240
and remember you cannot return null you

00:42:49,530 --> 00:42:57,970
cannot return no oh wait sorry show

00:42:55,240 --> 00:43:01,180
text because this will only run on

00:42:57,970 --> 00:43:03,810
amount remember you can never return

00:43:01,180 --> 00:43:07,150
null but you can return undefined and

00:43:03,810 --> 00:43:09,610
that's completely fine that's completely

00:43:07,150 --> 00:43:12,310
fine because undefined is a function but

00:43:09,610 --> 00:43:13,630
no it's not a function so there's a

00:43:12,310 --> 00:43:15,520
couple of errors that you should look

00:43:13,630 --> 00:43:20,050
out for if you have an error that says

00:43:15,520 --> 00:43:23,230
like a warning that says so if I do this

00:43:20,050 --> 00:43:25,840
actually you will have an error if you

00:43:23,230 --> 00:43:27,280
see an effect must apply it means you're

00:43:25,840 --> 00:43:28,780
probably returning something that you

00:43:27,280 --> 00:43:36,520
shouldn't and you're probably returning

00:43:28,780 --> 00:43:38,950
null you can return on the find yes and

00:43:36,520 --> 00:43:40,600
there's the other error which is when

00:43:38,950 --> 00:43:42,550
you're doing acing things

00:43:40,600 --> 00:43:44,830
you cannot do wasting things like you

00:43:42,550 --> 00:43:47,470
just can't you can kind of do it when

00:43:44,830 --> 00:43:50,110
you like start the when you do it on

00:43:47,470 --> 00:43:52,830
Mount but I would say it's a terrible

00:43:50,110 --> 00:43:55,330
terrible thing to do because it's not

00:43:52,830 --> 00:43:56,860
how the way hooks were intended to do

00:43:55,330 --> 00:43:59,140
they should be synchronous because you

00:43:56,860 --> 00:44:03,640
cannot return the promise and this will

00:43:59,140 --> 00:44:05,050
also give you an error and yeah I think

00:44:03,640 --> 00:44:07,570
that's a that's about it so let's just

00:44:05,050 --> 00:44:08,560
do something fun with this so so let's

00:44:07,570 --> 00:44:13,870
say that every time

00:44:08,560 --> 00:44:18,310
show tax changes I want to return said

00:44:13,870 --> 00:44:26,410
show text equals still not ice not show

00:44:18,310 --> 00:44:28,810
text that makes way more sense and

00:44:26,410 --> 00:44:30,220
that's it that's what happens because

00:44:28,810 --> 00:44:34,390
you're basically saying every time show

00:44:30,220 --> 00:44:36,310
text changes as a cleanup effect I want

00:44:34,390 --> 00:44:37,720
you to set it to the other thing so if

00:44:36,310 --> 00:44:40,840
you want to create like an infinite

00:44:37,720 --> 00:44:43,980
scrolling thing I would totally totally

00:44:40,840 --> 00:44:47,680
go to the VEX abuse effect

00:44:43,980 --> 00:44:50,320
yeah that's about it I hope you enjoy

00:44:47,680 --> 00:44:52,120
this effect it's very very good as it

00:44:50,320 --> 00:44:55,140
had really terrible side effects on my

00:44:52,120 --> 00:44:59,320
brain yes it has and I want to say that

00:44:55,140 --> 00:45:00,820
if you do this you're actually running I

00:44:59,320 --> 00:45:04,870
forgot about that one

00:45:00,820 --> 00:45:08,590
if you do this Portuguese cursing I'm

00:45:04,870 --> 00:45:11,710
sorry wait there we go beautiful

00:45:08,590 --> 00:45:13,320
beautiful if you do this it will be like

00:45:11,710 --> 00:45:17,920
oh okay

00:45:13,320 --> 00:45:19,870
what's happening wait why can't I click

00:45:17,920 --> 00:45:21,190
this oh oh no wait I broke it I broke

00:45:19,870 --> 00:45:26,290
everything because of my infinite

00:45:21,190 --> 00:45:31,600
scrolling oh wait wait inspect we got

00:45:26,290 --> 00:45:35,460
this we got it okay reload mmm oh wait

00:45:31,600 --> 00:45:35,460
not here here like this

00:45:37,509 --> 00:45:42,369
like you just shouldn't do this this is

00:45:39,849 --> 00:45:44,139
actually I think not at this point I

00:45:42,369 --> 00:45:46,119
don't even know no I guess they have a

00:45:44,139 --> 00:45:48,729
safeguard for this no that's nice

00:45:46,119 --> 00:45:51,689
so actually you can't do this now in the

00:45:48,729 --> 00:45:54,009
old days when we were all summer childs

00:45:51,689 --> 00:45:56,229
this would be the return and it would

00:45:54,009 --> 00:45:57,130
only run on unmount ins which doesn't

00:45:56,229 --> 00:45:59,380
know so that's nice

00:45:57,130 --> 00:46:00,669
also please stop calling it unmount like

00:45:59,380 --> 00:46:02,380
I do because it's actually not amount

00:46:00,669 --> 00:46:05,889
it's a cleanup from the effect that

00:46:02,380 --> 00:46:07,719
you're using so if you only want to run

00:46:05,889 --> 00:46:10,479
something in line you can I'll do this

00:46:07,719 --> 00:46:12,009
which is also pretty nice but I feel

00:46:10,479 --> 00:46:14,439
like our memories are now just used to

00:46:12,009 --> 00:46:19,059
doing this at this point and that's also

00:46:14,439 --> 00:46:20,079
the same thing there's no way I want a

00:46:19,059 --> 00:46:24,279
console Bella okay

00:46:20,079 --> 00:46:26,499
it's just now that's nice and that's

00:46:24,279 --> 00:46:28,389
nice because it runs on the amount of

00:46:26,499 --> 00:46:40,149
this component so every time I toggle it

00:46:28,389 --> 00:46:42,399
it actually runs and I fire or not it

00:46:40,149 --> 00:46:44,939
only runs this you know runs on so this

00:46:42,399 --> 00:46:46,569
is literally component in amounts

00:46:44,939 --> 00:46:48,359
components although Maps

00:46:46,569 --> 00:46:51,579
okay so that's pretty much what I have

00:46:48,359 --> 00:46:55,599
I'm done with complain I think I'm never

00:46:51,579 --> 00:46:59,469
done complain so the reality is is use

00:46:55,599 --> 00:47:02,289
effect confusing oh my god yes I don't

00:46:59,469 --> 00:47:08,529
understand why grandpa Lee is running on

00:47:02,289 --> 00:47:10,959
slights calm but yes like use effect is

00:47:08,529 --> 00:47:12,909
extremely confusing like I can't find

00:47:10,959 --> 00:47:14,319
the best place to explain it because I

00:47:12,909 --> 00:47:15,969
feel like the thing is like unless you

00:47:14,319 --> 00:47:17,079
actually produce effects you're gonna be

00:47:15,969 --> 00:47:23,499
like halfway through when you're like

00:47:17,079 --> 00:47:25,509
what it is confusing but you'll get the

00:47:23,499 --> 00:47:27,279
hang of it eventually like at a certain

00:47:25,509 --> 00:47:29,499
point I feel like for now I can predict

00:47:27,279 --> 00:47:32,139
a lot of the things except this last one

00:47:29,499 --> 00:47:33,880
apparently got updated which is nice but

00:47:32,139 --> 00:47:35,619
in general I feel like after a while you

00:47:33,880 --> 00:47:37,299
can actually predict a lot of things and

00:47:35,619 --> 00:47:39,339
it's like if you like the way I teach

00:47:37,299 --> 00:47:40,809
I'm writing a book about like your steps

00:47:39,339 --> 00:47:43,749
the things and reacts and packages and

00:47:40,809 --> 00:47:45,639
stuff it's on opinionated guide to react

00:47:43,749 --> 00:47:47,739
and you can subscribe it should be done

00:47:45,639 --> 00:47:49,119
by this month I think it's still a bunch

00:47:47,739 --> 00:47:51,040
of copies that weren't finished but

00:47:49,119 --> 00:47:53,050
that's about it

00:47:51,040 --> 00:47:55,450
it feels so weird for me to like market

00:47:53,050 --> 00:47:59,170
stuff and I forgot to thank you slide

00:47:55,450 --> 00:48:03,490
but thank you so much and I hope this

00:47:59,170 --> 00:48:07,530
makes sense and yeah it's time for Q&A

00:48:03,490 --> 00:48:14,590
if anyone has any questions

00:48:07,530 --> 00:48:17,260
my wife is clapping thank you thank you

00:48:14,590 --> 00:48:18,010
Alex thank you thank you thank you thank

00:48:17,260 --> 00:48:23,920
you so much

00:48:18,010 --> 00:48:25,030
do we have any questions everyone is

00:48:23,920 --> 00:48:28,470
muted by the way so if you have

00:48:25,030 --> 00:48:28,470
questions you have to unmute yourself oh

00:48:32,160 --> 00:48:43,470
my god my chrome is still broken I can't

00:48:35,980 --> 00:48:46,330
close oh there we go okay cool oh sorry

00:48:43,470 --> 00:48:48,820
uh so now I understand how to do

00:48:46,330 --> 00:48:52,570
component it thank thank you I don't

00:48:48,820 --> 00:48:55,660
know why I said thank you but yes okay

00:48:52,570 --> 00:49:00,640
oh sorry I didn't check the chat so let

00:48:55,660 --> 00:49:04,630
me just check the chat section is me

00:49:00,640 --> 00:49:05,860
recording yeah no I understand want you

00:49:04,630 --> 00:49:08,290
to use use layout effect so you just

00:49:05,860 --> 00:49:18,310
layout affect one's after from my

00:49:08,290 --> 00:49:19,900
understanding I know right from my

00:49:18,310 --> 00:49:21,430
understanding and let me just double

00:49:19,900 --> 00:49:27,220
check I think the thing is usually on

00:49:21,430 --> 00:49:31,450
effect runs after paints what using

00:49:27,220 --> 00:49:35,560
other things go before rendering okay

00:49:31,450 --> 00:49:37,600
it runs of a4 page he is a fact okay I

00:49:35,560 --> 00:49:40,530
am actually never usually out effect in

00:49:37,600 --> 00:49:40,530
my entire life

00:49:45,090 --> 00:50:03,720
okay what we recommend starting with

00:49:47,370 --> 00:50:08,430
user Frank is it what this after all Dom

00:50:03,720 --> 00:50:11,340
mutations yeah yeah so this one no I

00:50:08,430 --> 00:50:13,530
think the thing is like this so usually

00:50:11,340 --> 00:50:15,930
out of fact runs after all Dom things

00:50:13,530 --> 00:50:20,070
I've been oh my god there's a timing of

00:50:15,930 --> 00:50:20,460
effects here that is insane yeah okay

00:50:20,070 --> 00:50:22,200
there we go

00:50:20,460 --> 00:50:25,920
yeah the function paths you use affect

00:50:22,200 --> 00:50:27,810
fires after layout and paints

00:50:25,920 --> 00:50:34,110
during a deferred event this makes it

00:50:27,810 --> 00:50:36,030
suitable however for example a da

00:50:34,110 --> 00:50:38,550
mutation that's visible to the user must

00:50:36,030 --> 00:50:42,660
fire synchronously before the next paint

00:50:38,550 --> 00:50:46,020
so usually artifact runs like after

00:50:42,660 --> 00:50:48,090
every dumb thing is done except paint

00:50:46,020 --> 00:50:49,890
from what I can understand but to be

00:50:48,090 --> 00:50:54,030
honest I have never used usually

00:50:49,890 --> 00:50:58,800
artifacts it only differs when it's

00:50:54,030 --> 00:51:00,780
fired yeah until the browser has painted

00:50:58,800 --> 00:51:02,570
it's game yeah so use effect runs after

00:51:00,780 --> 00:51:11,760
pages layout effect runs before me I

00:51:02,570 --> 00:51:13,050
think yes that's it yeah the only

00:51:11,760 --> 00:51:14,760
difference is the paint difference

00:51:13,050 --> 00:51:17,010
that's why it's called layout so it's

00:51:14,760 --> 00:51:18,900
more like if you want to do actual Dom

00:51:17,010 --> 00:51:20,940
CSS manipulation and stuff like that

00:51:18,900 --> 00:51:21,420
that can be very costly in terms of

00:51:20,940 --> 00:51:24,660
paint

00:51:21,420 --> 00:51:27,030
that's why oh I forgot to show that you

00:51:24,660 --> 00:51:33,390
can't like conditionally fire an effect

00:51:27,030 --> 00:51:35,730
which is very sad yeah okay yeah that

00:51:33,390 --> 00:51:38,130
makes sense so it's for actual like Dom

00:51:35,730 --> 00:51:41,730
specific things like mastering changing

00:51:38,130 --> 00:51:44,430
sizes changing colors because it runs

00:51:41,730 --> 00:51:48,440
before page so it actually doesn't have

00:51:44,430 --> 00:51:48,440
the flicker which like this yeah

00:51:51,610 --> 00:51:57,040
does anyone else have any questions I

00:51:54,240 --> 00:51:59,230
actually have a question did you have

00:51:57,040 --> 00:52:02,260
any or do you have in general any

00:51:59,230 --> 00:52:05,380
problems with managing components which

00:52:02,260 --> 00:52:06,640
get too much amused effect so you get a

00:52:05,380 --> 00:52:09,970
function you have to scroll through

00:52:06,640 --> 00:52:11,470
because it does too many things now so

00:52:09,970 --> 00:52:13,180
the first thing that I like the

00:52:11,470 --> 00:52:16,030
beginning when I used to just like if

00:52:13,180 --> 00:52:18,390
you have to do 10 things on start I will

00:52:16,030 --> 00:52:20,560
just run them all in the same effect

00:52:18,390 --> 00:52:23,710
I've learned that that's a terrible idea

00:52:20,560 --> 00:52:25,270
for bigness sake that you just get a

00:52:23,710 --> 00:52:28,390
huge function so I think the first step

00:52:25,270 --> 00:52:29,920
is to divide it into several like if one

00:52:28,390 --> 00:52:32,020
gets data the other one mint or

00:52:29,920 --> 00:52:34,990
something but only on start there should

00:52:32,020 --> 00:52:36,640
be two different effects like it's hard

00:52:34,990 --> 00:52:39,490
to make sense of that since we only had

00:52:36,640 --> 00:52:42,100
one component amount but that is the way

00:52:39,490 --> 00:52:43,600
that they want it to be do I have things

00:52:42,100 --> 00:52:46,240
that scroll forever yes

00:52:43,600 --> 00:52:48,790
do I have utils that yes on my folder

00:52:46,240 --> 00:52:52,780
just to put the things that have effects

00:52:48,790 --> 00:52:54,340
that like how it's 350 lines yes

00:52:52,780 --> 00:52:56,740
also another way of doing that is to

00:52:54,340 --> 00:52:59,080
make a custom hook what's with what's

00:52:56,740 --> 00:53:00,340
inside that effect so basically when you

00:52:59,080 --> 00:53:02,700
make a costume okay just create a

00:53:00,340 --> 00:53:05,410
function called like use something and

00:53:02,700 --> 00:53:06,970
that will run basically what's inside of

00:53:05,410 --> 00:53:08,920
your you can just copy that your effect

00:53:06,970 --> 00:53:11,080
and do that and custom hook and you will

00:53:08,920 --> 00:53:13,720
run there so it's more isolated but

00:53:11,080 --> 00:53:15,730
there's not really like a great

00:53:13,720 --> 00:53:21,780
I can't delete code on with my mind I

00:53:15,730 --> 00:53:21,780
wish I could dr. Dre but yeah

00:53:24,450 --> 00:53:31,119
so I'm gonna be very honest right now

00:53:26,770 --> 00:53:33,160
and I'm gonna tell you how many tests

00:53:31,119 --> 00:53:37,780
code sandbox actually has in terms of

00:53:33,160 --> 00:53:40,390
like unit tests and that's like 20 but

00:53:37,780 --> 00:53:43,900
all of them are TS files we actually

00:53:40,390 --> 00:53:46,180
don't just any react files and I

00:53:43,900 --> 00:53:49,210
actually don't know like I just don't

00:53:46,180 --> 00:53:52,180
know we do a lot of like automated

00:53:49,210 --> 00:53:54,700
testing and Storybrook testing but we

00:53:52,180 --> 00:53:56,849
don't actually unit tests use effects or

00:53:54,700 --> 00:54:00,150
literally I think anything in reaction

00:53:56,849 --> 00:54:00,150
sorry about that

00:54:04,200 --> 00:54:09,760
we nice we're used type scripts though

00:54:07,510 --> 00:54:12,700
yeah we use type script as well do you

00:54:09,760 --> 00:54:15,490
still do you use steel classes with the

00:54:12,700 --> 00:54:17,170
lifecycle notes there are a couple of

00:54:15,490 --> 00:54:19,210
components that use classes mostly

00:54:17,170 --> 00:54:21,880
because of component will mount and we

00:54:19,210 --> 00:54:22,960
couldn't fix it yet so yeah there used

00:54:21,880 --> 00:54:24,910
to be component there used to be

00:54:22,960 --> 00:54:27,579
component dead mount and also component

00:54:24,910 --> 00:54:30,849
will mount component din mantre Cup on a

00:54:27,579 --> 00:54:33,970
dual mount which rent for the component

00:54:30,849 --> 00:54:35,230
merit which doesn't exist anymore except

00:54:33,970 --> 00:54:37,270
if you were unusually on effect on the

00:54:35,230 --> 00:54:38,770
start but it still didn't quite fix it

00:54:37,270 --> 00:54:41,530
we have like five files that are like

00:54:38,770 --> 00:54:48,309
that that we can write like get the time

00:54:41,530 --> 00:54:51,369
to do that I think there there ya know

00:54:48,309 --> 00:54:53,410
but it doesn't quite work they get on

00:54:51,369 --> 00:54:57,369
because components will mount actually

00:54:53,410 --> 00:54:59,920
ran before all the JavaScript like for

00:54:57,369 --> 00:55:02,260
that component started rendering and

00:54:59,920 --> 00:55:05,049
layout effect actually runs before only

00:55:02,260 --> 00:55:06,520
the paint I don't know but we couldn't

00:55:05,049 --> 00:55:08,470
figure those one out but it also didn't

00:55:06,520 --> 00:55:09,819
have a lot of time to like figure those

00:55:08,470 --> 00:55:12,010
one out but we have only like five

00:55:09,819 --> 00:55:14,079
components or like that there's also

00:55:12,010 --> 00:55:15,670
like and all of these are actually gonna

00:55:14,079 --> 00:55:17,980
be deleted because we're refactoring to

00:55:15,670 --> 00:55:19,869
the dashboard and all these components

00:55:17,980 --> 00:55:22,420
will be deleted but like the thing is

00:55:19,869 --> 00:55:23,829
sometimes like what happens is that you

00:55:22,420 --> 00:55:25,660
need to cut the entire components and

00:55:23,829 --> 00:55:27,309
just restart it and we didn't have the

00:55:25,660 --> 00:55:28,089
time to do that we were just trying to

00:55:27,309 --> 00:55:30,760
make it fast

00:55:28,089 --> 00:55:32,079
but right now it actually like in like

00:55:30,760 --> 00:55:33,430
three weeks or something when we

00:55:32,079 --> 00:55:36,660
released the dashboard doesn't have

00:55:33,430 --> 00:55:36,660
anything else with that so that's

00:55:37,490 --> 00:55:51,660
any other questions how often do you end

00:55:48,450 --> 00:55:52,200
up with infinite loops or something like

00:55:51,660 --> 00:55:55,800
that

00:55:52,200 --> 00:55:57,600
when using a lot of your defect you

00:55:55,800 --> 00:56:00,450
haven't no idea many times about the

00:55:57,600 --> 00:56:02,280
computer so that's the thing like if you

00:56:00,450 --> 00:56:04,260
have like a huge component that only has

00:56:02,280 --> 00:56:06,450
like so reused

00:56:04,260 --> 00:56:08,520
mob eggs which like if if you're

00:56:06,450 --> 00:56:10,560
tracking something and we don't not use

00:56:08,520 --> 00:56:12,450
more of that so the fun news Overmind

00:56:10,560 --> 00:56:13,620
which is like and the same idea like if

00:56:12,450 --> 00:56:16,220
you're tracking something you will just

00:56:13,620 --> 00:56:18,600
rear-end there's a component and

00:56:16,220 --> 00:56:21,120
sometimes I run use effect will actually

00:56:18,600 --> 00:56:24,360
like set something indica mobile stayed

00:56:21,120 --> 00:56:26,430
on mound for example but I forget the

00:56:24,360 --> 00:56:28,710
array and then he just runs every time

00:56:26,430 --> 00:56:30,150
so it actually sets the global state and

00:56:28,710 --> 00:56:33,870
then comes back as I have changed and

00:56:30,150 --> 00:56:36,390
then you're like why do I have 300

00:56:33,870 --> 00:56:39,030
requests to this API because you forgot

00:56:36,390 --> 00:56:40,440
the dependency array you forgot it yes

00:56:39,030 --> 00:56:44,060
that happens to me all the time

00:56:40,440 --> 00:56:44,060
don't worry see that happens to everyone

00:56:55,540 --> 00:57:00,710
does it yeah yeah I've heard a lot of

00:56:58,490 --> 00:57:04,040
good things about testing the testing

00:57:00,710 --> 00:57:06,740
library I do hope we start using it we

00:57:04,040 --> 00:57:09,650
we do want to start using it but we're

00:57:06,740 --> 00:57:13,190
on this like very like high like destroy

00:57:09,650 --> 00:57:16,070
everything phase and we're just pumping

00:57:13,190 --> 00:57:17,930
out features and yeah I mean honestly

00:57:16,070 --> 00:57:23,990
it's the life of a startup you're like

00:57:17,930 --> 00:57:26,030
alright unit tests one day is not now

00:57:23,990 --> 00:57:27,260
that day is like after the next funding

00:57:26,030 --> 00:57:29,000
but then you get the next one thing and

00:57:27,260 --> 00:57:30,460
you're like no I actually need to

00:57:29,000 --> 00:57:32,780
write unit tests

00:57:30,460 --> 00:57:34,430
yeah but I've heard really good things

00:57:32,780 --> 00:57:37,070
about react testing library I have used

00:57:34,430 --> 00:57:42,410
it inside projects but never in like

00:57:37,070 --> 00:57:44,030
actual things I also want to point out

00:57:42,410 --> 00:57:47,060
that the name is genius by the

00:57:44,030 --> 00:57:48,860
way because if you test if you like

00:57:47,060 --> 00:57:51,170
literally write react testing it will

00:57:48,860 --> 00:57:53,480
just so react testing library and I feel

00:57:51,170 --> 00:57:55,010
like no one appreciates that enough like

00:57:53,480 --> 00:57:57,290
that is a god of marketing right there

00:57:55,010 --> 00:58:12,940
and I'm pretty sure it was on purpose I

00:57:57,290 --> 00:58:12,940
respect that and the other question yeah

00:58:17,830 --> 00:58:20,600
cool thank you so much everyone for

00:58:20,120 --> 00:58:25,000
coming

00:58:20,600 --> 00:58:25,000
I hope this made any like more sense Oh

00:58:25,010 --> 00:58:30,560
Portuguese people nice there's only ten

00:58:27,260 --> 00:58:31,850
of us if you have any things that you

00:58:30,560 --> 00:58:33,620
think I should also explain in this talk

00:58:31,850 --> 00:58:36,440
like I want to make it better please let

00:58:33,620 --> 00:58:41,110
me know on Twitter I'm gonna post my

00:58:36,440 --> 00:58:43,520
Twitter thing my messages are open um

00:58:41,110 --> 00:58:45,680
please let me know I want to make this

00:58:43,520 --> 00:58:46,220
talk even better an ting and thank you

00:58:45,680 --> 00:58:54,790
again for coming

00:58:46,220 --> 00:58:56,360
it was great thank you my my everyone

00:58:54,790 --> 00:58:58,840
thank you bye

00:58:56,360 --> 00:58:58,840
right

00:59:06,880 --> 00:59:08,940

YouTube URL: https://www.youtube.com/watch?v=Hca6DkWPyMg


