Title: Sleeping well at night with cypress.io - Tomasz Łakomy | JSHeroes 2019
Publication date: 2019-04-28
Playlist: JSHeroes 2019
Description: 
	Why are we afraid of releasing stuff to production on Friday evening? Mostly because it's hard to know if nothing is broken because manual testing takes time and automated testing was not reliable. (And we really want to go home)

With cypress things are different. In this talk, we are going to cover how to start covering your app with e2e tests and showcase coolest features that cypress.io has to offer.

Automated tests don't have to be boring, difficult to write and even harder to debug. We deserve to have tests we can count on, even when shipping stuff as soon as ASAP.
Captions: 
	00:00:00,070 --> 00:00:03,219
[Music]

00:00:15,240 --> 00:00:21,040
are you doing closed everyone's awake

00:00:18,600 --> 00:00:22,840
okay mister you take enough it's okay

00:00:21,040 --> 00:00:26,680
it's okay I don't mind because this talk

00:00:22,840 --> 00:00:29,320
is actually about sleeping so it's more

00:00:26,680 --> 00:00:31,029
than okay for you to take a nap I've

00:00:29,320 --> 00:00:33,070
seen some of you were on a party

00:00:31,029 --> 00:00:33,850
yesterday I was honest because dinner it

00:00:33,070 --> 00:00:39,100
was wild

00:00:33,850 --> 00:00:40,930
I had two beers so in any case let's

00:00:39,100 --> 00:00:42,879
jump right in my name is Thomas Holcomb

00:00:40,930 --> 00:00:44,769
I work as a senior front-end engineer at

00:00:42,879 --> 00:00:47,589
Oleg's group you can find me on twitter

00:00:44,769 --> 00:00:49,839
at telecom and although this group is

00:00:47,589 --> 00:00:52,180
the biggest online company you've never

00:00:49,839 --> 00:00:54,309
heard of probably but if you are from

00:00:52,180 --> 00:00:57,040
Romania I probably heard about this so

00:00:54,309 --> 00:00:58,750
this is all ex Romania the biggest

00:00:57,040 --> 00:01:01,269
marketplace in this country and also one

00:00:58,750 --> 00:01:04,059
of the biggest websites when it comes to

00:01:01,269 --> 00:01:05,860
visits in Romania but I don't mention

00:01:04,059 --> 00:01:08,770
that because I want to talk about myself

00:01:05,860 --> 00:01:11,110
I mentioned that because we as a company

00:01:08,770 --> 00:01:12,549
we are on a large number for different

00:01:11,110 --> 00:01:13,810
websites and we want to make sure that

00:01:12,549 --> 00:01:15,940
whatever we are pushing out there

00:01:13,810 --> 00:01:17,950
actually works and gives value to our

00:01:15,940 --> 00:01:21,009
users and this is why I'm here to talk

00:01:17,950 --> 00:01:22,000
about Cyprus but first let's talk a bit

00:01:21,009 --> 00:01:23,140
about you

00:01:22,000 --> 00:01:26,890
because there's only one of me and

00:01:23,140 --> 00:01:28,539
there's 500 of you so it kind of makes

00:01:26,890 --> 00:01:31,359
sense to focus on the majority instead

00:01:28,539 --> 00:01:33,820
of talking about this Deut on stage so

00:01:31,359 --> 00:01:37,899
have a question for you why are you

00:01:33,820 --> 00:01:39,820
afraid of pushing stuff to products on a

00:01:37,899 --> 00:01:41,740
Friday

00:01:39,820 --> 00:01:43,960
why is that what's the difference

00:01:41,740 --> 00:01:46,060
between Tuesday and a Friday when it

00:01:43,960 --> 00:01:48,190
comes to releases so I had no idea I

00:01:46,060 --> 00:01:50,560
asked a team of elite scientists and

00:01:48,190 --> 00:01:52,360
this is what they came up with so

00:01:50,560 --> 00:01:56,860
basically if you released on week on

00:01:52,360 --> 00:02:00,490
Friday you are 100% what a 20% shoot is

00:01:56,860 --> 00:02:01,840
going to break first a 95% of course

00:02:00,490 --> 00:02:04,600
this is not true but this is what we

00:02:01,840 --> 00:02:06,670
feel as developers and honestly since we

00:02:04,600 --> 00:02:09,640
talked quite a lot at this conference

00:02:06,670 --> 00:02:11,920
about mental health it it is important

00:02:09,640 --> 00:02:13,540
for us to feel safe and I truly mean

00:02:11,920 --> 00:02:15,760
that mental health is absolutely

00:02:13,540 --> 00:02:17,890
important so we must feel safe that

00:02:15,760 --> 00:02:20,800
whatever we are pushing out there gives

00:02:17,890 --> 00:02:22,480
value to our users works we can go home

00:02:20,800 --> 00:02:23,620
and we don't have to debug production

00:02:22,480 --> 00:02:25,810
issues on Saturday

00:02:23,620 --> 00:02:28,300
so how do we do that well there are

00:02:25,810 --> 00:02:31,270
numerous approaches that we can have one

00:02:28,300 --> 00:02:35,620
other percent unit test coverage but

00:02:31,270 --> 00:02:38,410
it's not ideal if you have one other

00:02:35,620 --> 00:02:40,930
person test coverage you can't have bugs

00:02:38,410 --> 00:02:42,400
and unless you shouldn't aim for 100%

00:02:40,930 --> 00:02:45,880
coverage if you have 100 percent

00:02:42,400 --> 00:02:47,170
coverage it's not a good idea so more

00:02:45,880 --> 00:02:50,230
and more engineering teams are focusing

00:02:47,170 --> 00:02:53,080
on automation because automated test

00:02:50,230 --> 00:02:54,910
allows you to test your app exactly as

00:02:53,080 --> 00:02:56,680
the user interacts with it because users

00:02:54,910 --> 00:02:58,989
don't care about you any tests users

00:02:56,680 --> 00:03:01,150
don't care users want to be able to log

00:02:58,989 --> 00:03:02,890
in to buy something to sell something to

00:03:01,150 --> 00:03:04,660
tweet to watch a movie this is what they

00:03:02,890 --> 00:03:08,110
care about not the fact that you have

00:03:04,660 --> 00:03:10,390
80% unit test coverage so automated

00:03:08,110 --> 00:03:13,630
tests they've been around for quite some

00:03:10,390 --> 00:03:15,790
time they allows you to you know do some

00:03:13,630 --> 00:03:18,310
stuff log in and someone click on the

00:03:15,790 --> 00:03:20,050
buttons as the user would so I would

00:03:18,310 --> 00:03:22,690
like to give you some overview of the

00:03:20,050 --> 00:03:25,000
test in ancient times so like early 2018

00:03:22,690 --> 00:03:28,480
last year I'm not sure if you remember

00:03:25,000 --> 00:03:30,970
but we had 2018 at some point stability

00:03:28,480 --> 00:03:33,280
issues as an engineer I've been part of

00:03:30,970 --> 00:03:35,440
many engineering teams so far in a

00:03:33,280 --> 00:03:37,420
couple of different companies and in

00:03:35,440 --> 00:03:40,300
most of those teams we attempted some

00:03:37,420 --> 00:03:42,130
sort of automated testing and the common

00:03:40,300 --> 00:03:44,019
problem of stability so we had tests

00:03:42,130 --> 00:03:46,660
they were passing on Monday fighting

00:03:44,019 --> 00:03:48,639
confused a some of those were like

00:03:46,660 --> 00:03:50,230
related to the position between Saturn

00:03:48,639 --> 00:03:52,630
and Venus if they're aligned like the

00:03:50,230 --> 00:03:53,410
test would pass and this was simply not

00:03:52,630 --> 00:03:55,570
fun

00:03:53,410 --> 00:03:58,180
second the tests were difficult oh right

00:03:55,570 --> 00:03:59,860
and even harder to debug so in some of

00:03:58,180 --> 00:04:02,830
the case you have to depend on locks I

00:03:59,860 --> 00:04:04,300
mean not like those button Jenkins so we

00:04:02,830 --> 00:04:06,220
have to scroll through gigabytes of

00:04:04,300 --> 00:04:09,550
locks to find that you miss a selector

00:04:06,220 --> 00:04:11,140
here and there again not fun and those

00:04:09,550 --> 00:04:13,540
two factors added to a complete distrust

00:04:11,140 --> 00:04:15,820
in automated tests in some of the things

00:04:13,540 --> 00:04:17,920
I worked out we had large number of

00:04:15,820 --> 00:04:19,510
tests with that no one cared about they

00:04:17,920 --> 00:04:21,280
were constantly regret but we kept on

00:04:19,510 --> 00:04:23,170
pushing to production anyway because we

00:04:21,280 --> 00:04:25,120
had features to ship and those stairs

00:04:23,170 --> 00:04:28,960
are not stable anyway so who cares and

00:04:25,120 --> 00:04:30,580
this is terrible like this arm approach

00:04:28,960 --> 00:04:33,130
of automated tests are failing are who

00:04:30,580 --> 00:04:35,170
cares this is terrible because we've

00:04:33,130 --> 00:04:36,850
wasted so much time where I think those

00:04:35,170 --> 00:04:40,060
tests and now no one cares about them

00:04:36,850 --> 00:04:41,980
our solution should be to have automated

00:04:40,060 --> 00:04:44,500
tests are failing whew it should be an

00:04:41,980 --> 00:04:46,480
alarm you know like if those tests are

00:04:44,500 --> 00:04:47,560
failing like the literary act the doors

00:04:46,480 --> 00:04:50,260
to the office should be locked you

00:04:47,560 --> 00:04:52,330
cannot go away until you fix your login

00:04:50,260 --> 00:04:53,610
page or whatever or better yet you

00:04:52,330 --> 00:04:55,420
cannot do a release to production

00:04:53,610 --> 00:04:57,270
because then you are absolutely sure

00:04:55,420 --> 00:05:00,010
that you're going to break something

00:04:57,270 --> 00:05:01,900
with ciphers I strongly feel like these

00:05:00,010 --> 00:05:04,660
things are different I don't work for

00:05:01,900 --> 00:05:06,790
Cyprus I work for all X but we've

00:05:04,660 --> 00:05:09,460
adopted Cyprus a year ago and we are

00:05:06,790 --> 00:05:11,140
quite happy with it so far because as

00:05:09,460 --> 00:05:13,450
they say on the homepage and it's a

00:05:11,140 --> 00:05:15,990
large phone so I do believe it the web

00:05:13,450 --> 00:05:18,160
has evolved and the testing has as well

00:05:15,990 --> 00:05:19,960
so it there are a couple of things that

00:05:18,160 --> 00:05:21,640
Cyprus does really well first off

00:05:19,960 --> 00:05:25,330
there's no selenium there's no that

00:05:21,640 --> 00:05:26,980
there's no magic because we've with

00:05:25,330 --> 00:05:28,540
other solutions for automated tests you

00:05:26,980 --> 00:05:29,950
had to use selenium which is a java

00:05:28,540 --> 00:05:33,010
machine that sending commands to a

00:05:29,950 --> 00:05:34,840
browser and it's a large overhead and

00:05:33,010 --> 00:05:38,110
it's not stable it doesn't work most of

00:05:34,840 --> 00:05:41,110
the time also you can debug exactly how

00:05:38,110 --> 00:05:42,880
you are used to so you can use chrome

00:05:41,110 --> 00:05:44,680
dev tools to debug your tests so your

00:05:42,880 --> 00:05:46,360
current experience as a front-end

00:05:44,680 --> 00:05:47,770
engineer Chancellor is very nicely

00:05:46,360 --> 00:05:49,660
because you don't have to learn new

00:05:47,770 --> 00:05:52,840
tools in order to get started with

00:05:49,660 --> 00:05:55,060
ciphers for next up you have our instant

00:05:52,840 --> 00:05:56,920
feedback loop so basically once you save

00:05:55,060 --> 00:05:59,080
a test is going to result automatically

00:05:56,920 --> 00:06:00,970
and so you don't have to restart whole

00:05:59,080 --> 00:06:04,240
Java machine with like for two weeks for

00:06:00,970 --> 00:06:05,290
to start you just get in a panic tests

00:06:04,240 --> 00:06:06,740
are easy to write

00:06:05,290 --> 00:06:08,180
it's just Java

00:06:06,740 --> 00:06:10,430
so if you know JavaScript if you know

00:06:08,180 --> 00:06:11,870
dev tools you just have to learn the

00:06:10,430 --> 00:06:14,540
Cypress API which is honestly

00:06:11,870 --> 00:06:18,170
well-documented and it's quite easy to

00:06:14,540 --> 00:06:20,930
get to this is something that also is in

00:06:18,170 --> 00:06:22,670
other solutions but with Cypress you

00:06:20,930 --> 00:06:25,400
also get automatic screen shows a video

00:06:22,670 --> 00:06:28,400
recording so you can see exactly where

00:06:25,400 --> 00:06:29,960
the tests are going to fail it doesn't

00:06:28,400 --> 00:06:31,970
make sense to talk about this stuff it

00:06:29,960 --> 00:06:33,520
makes more sense to show it and see

00:06:31,970 --> 00:06:36,230
something first want to speak today

00:06:33,520 --> 00:06:41,030
might as well break the first live demo

00:06:36,230 --> 00:06:42,530
today so oops okay so what we're going

00:06:41,030 --> 00:06:44,600
to do it we are going to test this

00:06:42,530 --> 00:06:46,340
around the studio app so I'm sure you've

00:06:44,600 --> 00:06:48,650
seen some of those who can add an item

00:06:46,340 --> 00:06:50,720
you can remove an item and this is very

00:06:48,650 --> 00:06:52,400
simple stuff but nevertheless imagine

00:06:50,720 --> 00:06:54,620
this is a mission-critical app you have

00:06:52,400 --> 00:06:57,170
to be absolutely sure that it works you

00:06:54,620 --> 00:07:00,260
probably want to test before pushing an

00:06:57,170 --> 00:07:02,360
X version to production okay so on the

00:07:00,260 --> 00:07:04,390
left side my visual studio code on

00:07:02,360 --> 00:07:06,970
around right-hand side you can see

00:07:04,390 --> 00:07:09,830
sideways UI I run it in the browser so

00:07:06,970 --> 00:07:11,390
right now I have a very complicated test

00:07:09,830 --> 00:07:14,990
I'm testing whether 2 is equal to true

00:07:11,390 --> 00:07:17,600
and it's true if I change it to false

00:07:14,990 --> 00:07:20,150
and save it the test is going to start

00:07:17,600 --> 00:07:22,310
automatically true is not equal to false

00:07:20,150 --> 00:07:24,500
which is which is finding change it to

00:07:22,310 --> 00:07:26,360
true again the test is passing so you

00:07:24,500 --> 00:07:27,860
can see how quickly the Cypress is going

00:07:26,360 --> 00:07:30,200
to reload those tests you don't have to

00:07:27,860 --> 00:07:33,410
restart anything manually you can just

00:07:30,200 --> 00:07:35,090
get it to work okay let me write some

00:07:33,410 --> 00:07:37,520
tests so first thing I would like to do

00:07:35,090 --> 00:07:40,870
is to visit not crypto

00:07:37,520 --> 00:07:43,370
I don't know I don't want any Bitcoin

00:07:40,870 --> 00:07:46,430
how you interact with Cypress is there

00:07:43,370 --> 00:07:49,550
through this global cy object so this is

00:07:46,430 --> 00:07:51,230
global you can do CI visit and I'm going

00:07:49,550 --> 00:07:54,110
to copy and paste this URL from here

00:07:51,230 --> 00:07:56,360
bank after I save it I'm going to visit

00:07:54,110 --> 00:07:58,220
our home page and there are a couple of

00:07:56,360 --> 00:08:00,500
interesting fields here so first off

00:07:58,220 --> 00:08:04,460
this is fully interactive so I can add

00:08:00,500 --> 00:08:07,100
something and there was something in the

00:08:04,460 --> 00:08:08,660
Cypress UI this is highly useful because

00:08:07,100 --> 00:08:10,550
sometimes when you develop your own

00:08:08,660 --> 00:08:12,920
tests they sometimes end up with this

00:08:10,550 --> 00:08:16,490
very very weak spot for instance we are

00:08:12,920 --> 00:08:18,500
somehow between a removing a treat and

00:08:16,490 --> 00:08:20,210
adding it at the same time and you will

00:08:18,500 --> 00:08:20,700
probably want to get in at the back out

00:08:20,210 --> 00:08:22,380
exact

00:08:20,700 --> 00:08:23,450
is going on and Cyprus offers it to do

00:08:22,380 --> 00:08:26,460
that because it's really interactive

00:08:23,450 --> 00:08:29,280
next up if you click on the request you

00:08:26,460 --> 00:08:32,370
can switch the state of your up before

00:08:29,280 --> 00:08:35,370
and after the request for sent which

00:08:32,370 --> 00:08:37,380
allows you to very easy kind of going

00:08:35,370 --> 00:08:39,479
take a deep dive on what exactly is

00:08:37,380 --> 00:08:42,180
going on with my app and how the state

00:08:39,479 --> 00:08:44,430
of of the application is changed as I'm

00:08:42,180 --> 00:08:47,670
loading or performing some actions also

00:08:44,430 --> 00:08:49,050
you get console.log druvan debugging as

00:08:47,670 --> 00:08:51,330
well because if you click on the request

00:08:49,050 --> 00:08:53,400
Cyprus is going to log out all kinds of

00:08:51,330 --> 00:08:55,080
useful info for you so first us here I

00:08:53,400 --> 00:08:58,230
can see that this request has returned

00:08:55,080 --> 00:09:00,480
free to do items which I'm displaying in

00:08:58,230 --> 00:09:02,610
the in the UI cool

00:09:00,480 --> 00:09:05,070
if you have a fee to the items it would

00:09:02,610 --> 00:09:07,620
be kind of cool for me to test it the

00:09:05,070 --> 00:09:10,830
way we test it is that we do see I get

00:09:07,620 --> 00:09:12,450
and now you are using jQuery okay it's

00:09:10,830 --> 00:09:13,200
not exactly jQuery about the site those

00:09:12,450 --> 00:09:19,590
are exactly the same

00:09:13,200 --> 00:09:21,840
should have lengths of free after I save

00:09:19,590 --> 00:09:23,780
that they go we have a finding a passing

00:09:21,840 --> 00:09:26,970
test can I go home now

00:09:23,780 --> 00:09:28,650
no because it's a terrible test there is

00:09:26,970 --> 00:09:30,480
why it's so terrible is that if someone

00:09:28,650 --> 00:09:35,460
were to do this

00:09:30,480 --> 00:09:37,560
whoops and after I start the test yeah

00:09:35,460 --> 00:09:39,660
it's going to fail because I'm expecting

00:09:37,560 --> 00:09:40,350
three items and I have four okay how do

00:09:39,660 --> 00:09:42,450
what do I do

00:09:40,350 --> 00:09:48,660
how do I want to go home okay can I do

00:09:42,450 --> 00:09:49,950
this I mean I can rewrite but this is of

00:09:48,660 --> 00:09:52,190
course it's a terrible because someone

00:09:49,950 --> 00:09:55,290
can just remove something add something

00:09:52,190 --> 00:09:57,570
this is random we've automated tests

00:09:55,290 --> 00:09:59,880
what we want to do to have is that we

00:09:57,570 --> 00:10:02,160
want to have an own state of the app at

00:09:59,880 --> 00:10:04,410
the start of the test and compared to an

00:10:02,160 --> 00:10:06,750
expected output at the end of the test

00:10:04,410 --> 00:10:09,930
so in other words we would have to have

00:10:06,750 --> 00:10:12,350
a control over what the server is

00:10:09,930 --> 00:10:15,540
returning and we can actually do that so

00:10:12,350 --> 00:10:17,910
I'm going to show you that you can start

00:10:15,540 --> 00:10:19,710
your own server with cyber's I'm so good

00:10:17,910 --> 00:10:23,160
at out live coding I'm going to do it

00:10:19,710 --> 00:10:27,420
with one hand so basically once you have

00:10:23,160 --> 00:10:31,999
a once you have a get request or API to

00:10:27,420 --> 00:10:34,579
do this you can do that

00:10:31,999 --> 00:10:36,199
in a gay once we have our to the get

00:10:34,579 --> 00:10:38,419
request to API to do it I would like to

00:10:36,199 --> 00:10:40,579
a server to return those foot forward to

00:10:38,419 --> 00:10:42,859
the items instead let me save that and

00:10:40,579 --> 00:10:44,929
right now I'm going to have off passing

00:10:42,859 --> 00:10:47,589
tests because I'm expecting four items

00:10:44,929 --> 00:10:51,679
and I have four to the items over here

00:10:47,589 --> 00:10:54,289
fantastic okay but this copy and pasting

00:10:51,679 --> 00:10:57,229
this entire area even if you are so good

00:10:54,289 --> 00:10:58,999
at the live coding as I am this is not

00:10:57,229 --> 00:11:01,220
something that you want to do you

00:10:58,999 --> 00:11:03,499
probably want to define some fixtures in

00:11:01,220 --> 00:11:05,389
some and in some file and use it instead

00:11:03,499 --> 00:11:07,639
of copying pasting this alright and this

00:11:05,389 --> 00:11:09,859
is exactly what you can do because

00:11:07,639 --> 00:11:12,799
Cypress allows you to have a couple of

00:11:09,859 --> 00:11:16,429
useful files so functions in in fixtures

00:11:12,799 --> 00:11:18,769
you can specify basically like this JSON

00:11:16,429 --> 00:11:21,319
file and you can tell the ciphers all

00:11:18,769 --> 00:11:23,179
right you know what instead of getting

00:11:21,319 --> 00:11:25,189
this array what I would like to do is

00:11:23,179 --> 00:11:28,279
that if there is a request to this API

00:11:25,189 --> 00:11:30,379
to do is just give me fixture to do this

00:11:28,279 --> 00:11:33,109
this is a special syntax for ciphers

00:11:30,379 --> 00:11:34,879
that are basically going to fix the

00:11:33,109 --> 00:11:37,489
directory and gave me two doors I don't

00:11:34,879 --> 00:11:40,399
care how just do it you will notice that

00:11:37,489 --> 00:11:42,439
this also changed because you don't have

00:11:40,399 --> 00:11:44,989
to copy and paste the URL to your

00:11:42,439 --> 00:11:47,209
development staging production or

00:11:44,989 --> 00:11:49,249
whatever you have environments instead

00:11:47,209 --> 00:11:51,429
each you define in the config file

00:11:49,249 --> 00:11:53,479
what's there our main URL of your

00:11:51,429 --> 00:11:56,209
production environment or your staging

00:11:53,479 --> 00:12:00,229
then you can just use the slash as your

00:11:56,209 --> 00:12:02,959
home page okay let me let me face this

00:12:00,229 --> 00:12:04,789
test you will notice it's not going to

00:12:02,959 --> 00:12:06,949
fail at an instant actually it's going

00:12:04,789 --> 00:12:09,859
to wait some time it waits for four

00:12:06,949 --> 00:12:11,239
seconds mostly because I'm not sure if

00:12:09,859 --> 00:12:14,419
you've noticed about most of the apps

00:12:11,239 --> 00:12:16,819
out there are kind of slow so basically

00:12:14,419 --> 00:12:20,349
it cypress is well aware of that is that

00:12:16,819 --> 00:12:22,489
sometimes things things take time so

00:12:20,349 --> 00:12:24,409
let's make it even worse

00:12:22,489 --> 00:12:27,409
so I'm going to do something like this

00:12:24,409 --> 00:12:32,179
I'm going to ensure that I'm fetching

00:12:27,409 --> 00:12:35,509
the items after five seconds let me fix

00:12:32,179 --> 00:12:37,939
this test and start it and we have a

00:12:35,509 --> 00:12:40,309
problem because I want to have four

00:12:37,939 --> 00:12:42,949
items but I'm sending the request to

00:12:40,309 --> 00:12:46,100
fetch them after five seconds which is

00:12:42,949 --> 00:12:48,409
like way to date at some times you you

00:12:46,100 --> 00:12:50,959
have that sometimes you have backends

00:12:48,409 --> 00:12:52,279
that can be slow sometimes you have some

00:12:50,959 --> 00:12:54,379
animations that you would like to wait

00:12:52,279 --> 00:12:56,239
for and some other stuff and with

00:12:54,379 --> 00:12:58,759
ciphers you can do to tell you that so

00:12:56,239 --> 00:13:01,129
you can set an alias for request so

00:12:58,759 --> 00:13:05,079
henceforth this request shall be known

00:13:01,129 --> 00:13:09,769
as load and I'm going to wait for it

00:13:05,079 --> 00:13:11,720
load after I save that Cypress is going

00:13:09,769 --> 00:13:15,139
to ensure that the response from this

00:13:11,720 --> 00:13:17,119
request came before we actually check

00:13:15,139 --> 00:13:19,339
whether we have for to do items or not

00:13:17,119 --> 00:13:20,839
and this is how useful of course we

00:13:19,339 --> 00:13:22,879
don't want to wait forever

00:13:20,839 --> 00:13:24,649
by default Cypress allows you to wait

00:13:22,879 --> 00:13:27,769
for 20 seconds because honestly if

00:13:24,649 --> 00:13:28,850
something is not visible in 20 seconds

00:13:27,769 --> 00:13:30,709
you probably want to fight the test

00:13:28,850 --> 00:13:32,029
anyway because it is there are terrible

00:13:30,709 --> 00:13:36,349
up in you shouldn't push it to

00:13:32,029 --> 00:13:39,229
production okay this thing that we start

00:13:36,349 --> 00:13:41,179
a server we specify some routes visit

00:13:39,229 --> 00:13:44,029
the homepage wait wait so for something

00:13:41,179 --> 00:13:46,339
and this is probably stuff that you end

00:13:44,029 --> 00:13:48,139
up doing over and over again it would be

00:13:46,339 --> 00:13:50,899
useful to have it as a single command

00:13:48,139 --> 00:13:52,909
with suppose you can do that there's a

00:13:50,899 --> 00:13:55,519
command file where you can specify your

00:13:52,909 --> 00:13:57,349
own custom commands so here I have this

00:13:55,519 --> 00:13:59,839
initialize app that is going to do

00:13:57,349 --> 00:14:02,209
exactly those four steps which I had

00:13:59,839 --> 00:14:04,459
defined in the other file and what's

00:14:02,209 --> 00:14:08,149
really cool is that you can even if you

00:14:04,459 --> 00:14:10,609
wanted to you can compose custom

00:14:08,149 --> 00:14:12,679
commands out of custom commands but

00:14:10,609 --> 00:14:16,039
don't go too far because I've seen some

00:14:12,679 --> 00:14:17,689
very weird abstractions when it comes to

00:14:16,039 --> 00:14:19,279
tests and you shouldn't do that like

00:14:17,689 --> 00:14:20,959
test should be easy to it easy to

00:14:19,279 --> 00:14:23,029
understand if you want to have more

00:14:20,959 --> 00:14:25,629
abstractions than learn Java because

00:14:23,029 --> 00:14:28,970
this but this is not the point

00:14:25,629 --> 00:14:32,229
okay let me show you something else I'm

00:14:28,970 --> 00:14:35,179
going to copy and paste this bit because

00:14:32,229 --> 00:14:37,099
not everything always works all right

00:14:35,179 --> 00:14:39,919
now what I would like to test is that

00:14:37,099 --> 00:14:40,759
what happens if I want to add a new to

00:14:39,919 --> 00:14:43,729
do whoopsie

00:14:40,759 --> 00:14:47,119
but the back end doesn't work so I have

00:14:43,729 --> 00:14:48,290
a 500 empty response things down all

00:14:47,119 --> 00:14:50,630
right so this is how you

00:14:48,290 --> 00:14:53,449
can type in in the field so you get an

00:14:50,630 --> 00:14:55,399
input you type some text if you want to

00:14:53,449 --> 00:14:56,870
press the Enter key you put it in the

00:14:55,399 --> 00:14:58,220
curly bracket so this is a signal for

00:14:56,870 --> 00:15:01,070
Cyprus that I would like to press this

00:14:58,220 --> 00:15:03,290
button press the Enter key on the on

00:15:01,070 --> 00:15:05,630
your keyboard and I'm expecting for to

00:15:03,290 --> 00:15:07,850
the items because I was not able to add

00:15:05,630 --> 00:15:10,279
this new one and I also would like the

00:15:07,850 --> 00:15:12,199
arrow to be visible and the best part I

00:15:10,279 --> 00:15:14,180
didn't even have to read the code

00:15:12,199 --> 00:15:18,769
because I could just open the test and

00:15:14,180 --> 00:15:21,620
hover over those items as I go and I can

00:15:18,769 --> 00:15:24,350
see the state of the app changing in the

00:15:21,620 --> 00:15:27,079
real time this is highly useful and

00:15:24,350 --> 00:15:31,009
honestly it's just fun to take a look at

00:15:27,079 --> 00:15:35,680
those for my experience I've seen people

00:15:31,009 --> 00:15:35,680
actually volunteering to write tests

00:15:36,730 --> 00:15:41,269
it's insane but it actually happened

00:15:39,259 --> 00:15:45,440
like I've seen people volunteering

00:15:41,269 --> 00:15:47,839
because honestly with Cyprus we finally

00:15:45,440 --> 00:15:50,449
get to test our code and not our

00:15:47,839 --> 00:15:52,020
patience thank you so much for this

00:15:50,449 --> 00:15:54,780
thing

00:15:52,020 --> 00:15:56,490
[Applause]

00:15:54,780 --> 00:15:59,539
[Music]

00:15:56,490 --> 00:15:59,539

YouTube URL: https://www.youtube.com/watch?v=S4hcRcJLIGo


