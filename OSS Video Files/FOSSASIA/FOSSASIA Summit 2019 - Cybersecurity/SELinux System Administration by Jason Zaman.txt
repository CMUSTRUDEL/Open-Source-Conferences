Title: SELinux System Administration by Jason Zaman
Publication date: 2019-03-25
Playlist: FOSSASIA Summit 2019 - Cybersecurity
Description: 
	16 March 2019 14:00, Training Room 9-2/9-3

This talk will cover the core SELinux concepts and how to leverage SELinux to improve protections on a Linux system. You will learn the fundamentals of SELinux configuration including conditional policies, policy types and constraints, and the Linux audit subsystem.
Captions: 
	00:00:00,030 --> 00:00:17,550
thank you everybody so I'm Jason this is

00:00:08,940 --> 00:00:21,750
the neatest one in the series I'm the

00:00:17,550 --> 00:00:26,090
lead on the aesthetics team and project

00:00:21,750 --> 00:00:29,160
I'm also an upstream ethics maintainer I

00:00:26,090 --> 00:00:34,860
also do flow and other things too but

00:00:29,160 --> 00:00:39,719
that's not real bit now I'll put the

00:00:34,860 --> 00:00:42,510
slides on my blog later so quick

00:00:39,719 --> 00:00:47,309
overview we're gonna do quick intro what

00:00:42,510 --> 00:00:52,800
is selinux then Mac versus back we'll

00:00:47,309 --> 00:00:58,770
get there then in about context rolls

00:00:52,800 --> 00:01:03,629
pipes users and then different things

00:00:58,770 --> 00:01:07,710
you can run into and why and how you can

00:01:03,629 --> 00:01:11,299
fix them and then a few examples at the

00:01:07,710 --> 00:01:17,520
end so this is perfect

00:01:11,299 --> 00:01:20,400
just last night at there I know like

00:01:17,520 --> 00:01:24,170
final release of 2.9 was out like really

00:01:20,400 --> 00:01:26,820
scattered to being the last few weeks so

00:01:24,170 --> 00:01:29,009
literally a dinner this was done so this

00:01:26,820 --> 00:01:34,740
is awesome

00:01:29,009 --> 00:01:36,380
new versions out not a huge update so

00:01:34,740 --> 00:01:39,180
the other ones had more things

00:01:36,380 --> 00:01:42,119
well the notable features is that we a

00:01:39,180 --> 00:01:43,799
Python 3 by default it does not use

00:01:42,119 --> 00:01:48,899
Python too many more by default you can

00:01:43,799 --> 00:01:54,329
still turn that on if you want but well

00:01:48,899 --> 00:01:57,390
I thought she's going so there are other

00:01:54,329 --> 00:02:00,390
fun things recently in selinux the

00:01:57,390 --> 00:02:03,869
kernel has added stacking of LSMs

00:02:00,390 --> 00:02:06,899
so now you can have or not quite yet but

00:02:03,869 --> 00:02:09,929
very soon you will have X and X Mac App

00:02:06,899 --> 00:02:12,270
Armour like many of these enabled all

00:02:09,929 --> 00:02:13,280
the same time I'm not entirely sure why

00:02:12,270 --> 00:02:16,970
you would

00:02:13,280 --> 00:02:19,040
but you can and it's better for distros

00:02:16,970 --> 00:02:21,680
so they can just apply all the min and

00:02:19,040 --> 00:02:26,780
then users can switch by just changing a

00:02:21,680 --> 00:02:29,090
boot argument so be quite nice so we

00:02:26,780 --> 00:02:33,440
talked about her larynx what is it it's

00:02:29,090 --> 00:02:38,180
security it controls access between

00:02:33,440 --> 00:02:41,240
resources users files anything on your

00:02:38,180 --> 00:02:42,650
computer and the notable difference

00:02:41,240 --> 00:02:44,870
between Isis and experts and other

00:02:42,650 --> 00:02:49,340
things is that it is a match mandatory

00:02:44,870 --> 00:02:51,650
access control so if it's a global

00:02:49,340 --> 00:02:53,720
policy set only at our computer

00:02:51,650 --> 00:02:57,220
everything has to obey it like the

00:02:53,720 --> 00:02:59,270
colonel will enforce it there are other

00:02:57,220 --> 00:03:01,670
things that will understand this in

00:02:59,270 --> 00:03:04,700
Linux and of course other things but

00:03:01,670 --> 00:03:07,250
most of those would be D bus or system D

00:03:04,700 --> 00:03:09,739
or those kind of things will enforce

00:03:07,250 --> 00:03:10,730
extra things on top but the kernel will

00:03:09,739 --> 00:03:13,030
enforce most things

00:03:10,730 --> 00:03:16,280
and it's an boxes different applications

00:03:13,030 --> 00:03:18,440
so they can all access things that are

00:03:16,280 --> 00:03:26,750
supposed to they only get things they

00:03:18,440 --> 00:03:30,110
get so when you try to access something

00:03:26,750 --> 00:03:32,900
on your leader like if I have a program

00:03:30,110 --> 00:03:35,480
trying to read a file it has several

00:03:32,900 --> 00:03:38,930
security checks along the way so first

00:03:35,480 --> 00:03:40,130
it will check the regular UNIX

00:03:38,930 --> 00:03:42,799
permissions so what the

00:03:40,130 --> 00:03:44,900
read/write/execute bits if those are

00:03:42,799 --> 00:03:47,360
allowed then it will proceed down the

00:03:44,900 --> 00:03:49,850
pipe and then go to the OS m which is

00:03:47,360 --> 00:03:53,450
the Linux security modules there are

00:03:49,850 --> 00:03:54,950
more than one of those already and there

00:03:53,450 --> 00:03:58,850
will be even more of them in the future

00:03:54,950 --> 00:04:00,170
when that new patch is landed and it

00:03:58,850 --> 00:04:02,450
will basically check them all in order

00:04:00,170 --> 00:04:05,780
like that OSM's can register a certain

00:04:02,450 --> 00:04:09,079
hooks so they could be read file these

00:04:05,780 --> 00:04:11,209
kind of things and they will check the

00:04:09,079 --> 00:04:15,280
system aesthetic policy before allowing

00:04:11,209 --> 00:04:17,269
it so it will go it will start at

00:04:15,280 --> 00:04:19,820
regulating permissions and then keep

00:04:17,269 --> 00:04:22,610
going if at any point in time any of

00:04:19,820 --> 00:04:25,780
those fail it'll fail and you'll get an

00:04:22,610 --> 00:04:25,780
audit log entry

00:04:25,800 --> 00:04:32,520
if all of them succeed then you'll be

00:04:28,500 --> 00:04:35,069
allowed to do it so you need to know

00:04:32,520 --> 00:04:40,530
this order because if you are getting

00:04:35,069 --> 00:04:42,150
permission denied and maybe a nestlings

00:04:40,530 --> 00:04:44,009
problem but it might not be maybe your

00:04:42,150 --> 00:04:45,509
unix permissions are wrong I think you

00:04:44,009 --> 00:04:47,550
won't see an SLA problem because they

00:04:45,509 --> 00:04:49,800
never got there you'll only actually

00:04:47,550 --> 00:04:53,009
show those errors if you get that far in

00:04:49,800 --> 00:04:56,250
the pipe which you may or may not you

00:04:53,009 --> 00:04:58,800
cannot label things SELinux is denied by

00:04:56,250 --> 00:05:01,800
default everything and then you can add

00:04:58,800 --> 00:05:05,159
rules to allow things but only within SU

00:05:01,800 --> 00:05:06,960
like if it doesn't get there it's never

00:05:05,159 --> 00:05:11,789
gonna get there but it just won't it'll

00:05:06,960 --> 00:05:14,550
air out early so you need to know the

00:05:11,789 --> 00:05:17,270
format of what these types and contexts

00:05:14,550 --> 00:05:21,180
look like everything initial Enix has a

00:05:17,270 --> 00:05:29,520
user role type and a sensitivity is

00:05:21,180 --> 00:05:32,430
optional so for example old programs or

00:05:29,520 --> 00:05:34,580
demons or like Apache or those kind of

00:05:32,430 --> 00:05:40,650
things we'll run it into the system user

00:05:34,580 --> 00:05:42,870
that user is fairly widely that's quite

00:05:40,650 --> 00:05:45,030
a lot of permissions well all right now

00:05:42,870 --> 00:05:46,320
users don't have permissions users are

00:05:45,030 --> 00:05:47,820
allowed to do different roles and

00:05:46,320 --> 00:05:55,199
different roles are allowed to do

00:05:47,820 --> 00:05:58,759
different types so the system the system

00:05:55,199 --> 00:06:01,319
user is allowed all the like Apache SSH

00:05:58,759 --> 00:06:02,280
those kind of things but it is not

00:06:01,319 --> 00:06:05,639
allowed

00:06:02,280 --> 00:06:09,300
like x-ored like you want to run chrome

00:06:05,639 --> 00:06:12,479
those things they can't do so there's a

00:06:09,300 --> 00:06:17,940
very big gap between like system demons

00:06:12,479 --> 00:06:22,110
and like user Beutler user users and the

00:06:17,940 --> 00:06:26,210
roles for those so then staff user and

00:06:22,110 --> 00:06:29,659
those are what different users will get

00:06:26,210 --> 00:06:32,729
so the context is separated by colons

00:06:29,659 --> 00:06:38,479
the first part is the user the next part

00:06:32,729 --> 00:06:38,479
is user a role type and the sensitivity

00:06:38,540 --> 00:06:43,460
a tend to end with underscore you

00:06:42,080 --> 00:06:46,460
underscore our and underscore to you

00:06:43,460 --> 00:06:48,410
that's just the convention they don't

00:06:46,460 --> 00:06:50,030
actually have to if you look at Android

00:06:48,410 --> 00:06:52,070
which has Islamic enforcing on

00:06:50,030 --> 00:06:53,870
everything they don't do them they just

00:06:52,070 --> 00:06:58,820
call a really short thing so like their

00:06:53,870 --> 00:07:01,010
system U is just and it's really short

00:06:58,820 --> 00:07:02,510
and we just do it that way because when

00:07:01,010 --> 00:07:08,740
you write policies it's much easier to

00:07:02,510 --> 00:07:11,630
see and understand the sensitivity is

00:07:08,740 --> 00:07:14,140
off on a lot of systems by default I

00:07:11,630 --> 00:07:18,410
like it

00:07:14,140 --> 00:07:19,760
those are used for MLS and MCS MLS is

00:07:18,410 --> 00:07:22,690
the super heart for one if you're the

00:07:19,760 --> 00:07:25,670
NSA you really want pop secret versus

00:07:22,690 --> 00:07:29,000
classified which is secret and those

00:07:25,670 --> 00:07:32,810
things that one is really hard to use

00:07:29,000 --> 00:07:35,780
and basically doesn't work I have it

00:07:32,810 --> 00:07:38,420
kind of working a couple times but don't

00:07:35,780 --> 00:07:43,550
really bother the really useful one is

00:07:38,420 --> 00:07:44,990
mcs which is multi category security so

00:07:43,550 --> 00:07:47,000
to do any of this you need to have

00:07:44,990 --> 00:07:48,500
sensitivity so multi category security

00:07:47,000 --> 00:07:50,810
just have a single one and just kind of

00:07:48,500 --> 00:07:52,970
ignore is it but then you get all the

00:07:50,810 --> 00:07:56,480
categories at the end so if you see the

00:07:52,970 --> 00:07:58,580
s0 s1 part that is the sensitivity part

00:07:56,480 --> 00:08:02,150
and then the categories are the c0 to

00:07:58,580 --> 00:08:05,960
see quick thing about users first and

00:08:02,150 --> 00:08:09,380
roles so the roles are user which is

00:08:05,960 --> 00:08:14,210
most users if you're using the system

00:08:09,380 --> 00:08:18,440
not administrator yes you can use like

00:08:14,210 --> 00:08:20,780
you're using chrome text editor come

00:08:18,440 --> 00:08:24,380
online whatever these kind of things

00:08:20,780 --> 00:08:27,370
that's a user you and user are and those

00:08:24,380 --> 00:08:33,200
have like all the types belong to those

00:08:27,370 --> 00:08:34,490
so the user role gets all these like web

00:08:33,200 --> 00:08:37,430
browser and those kind of things

00:08:34,490 --> 00:08:39,590
but it does not get any of them that

00:08:37,430 --> 00:08:41,990
allows you to switch to any other roles

00:08:39,590 --> 00:08:44,750
it only has one role and it will never

00:08:41,990 --> 00:08:49,010
get any other one staff is the one that

00:08:44,750 --> 00:08:51,500
you give to your users that are admin so

00:08:49,010 --> 00:08:52,820
the staff role is the one that it's

00:08:51,500 --> 00:08:55,630
almost identical to

00:08:52,820 --> 00:08:58,910
user they said it also has to do and see

00:08:55,630 --> 00:09:02,540
and can switch to the sysadmin goal the

00:08:58,910 --> 00:09:04,100
sysadmin troll is like has a lot of

00:09:02,540 --> 00:09:09,770
permission it can read and write like

00:09:04,100 --> 00:09:12,590
almost anything but it does not get the

00:09:09,770 --> 00:09:14,390
type spurt like web browsers or those

00:09:12,590 --> 00:09:17,390
kind of things cuz those you really

00:09:14,390 --> 00:09:20,510
should not ever be running has like

00:09:17,390 --> 00:09:22,100
admin it's kind of the same deal as like

00:09:20,510 --> 00:09:25,010
people have the normal user and there's

00:09:22,100 --> 00:09:26,510
else to do to root run sysadmin things

00:09:25,010 --> 00:09:32,330
but this is another level that's

00:09:26,510 --> 00:09:35,240
orthogonal to that you can have your

00:09:32,330 --> 00:09:38,630
regular like i'm i jason user and then i

00:09:35,240 --> 00:09:42,800
can see the roof and then i will be rude

00:09:38,630 --> 00:09:45,290
but i will not have changed type i'll

00:09:42,800 --> 00:09:48,530
still be in the staff goal so then if I

00:09:45,290 --> 00:09:49,910
try and run things I will not be allowed

00:09:48,530 --> 00:09:52,280
even though I'm rude

00:09:49,910 --> 00:09:54,650
it doesn't matter because I see like

00:09:52,280 --> 00:10:00,470
parts say I so can't do it

00:09:54,650 --> 00:10:04,450
if I am my regular user I can switch

00:10:00,470 --> 00:10:07,370
role into sysadmin and stay as I use it

00:10:04,450 --> 00:10:12,410
now if I do that I still can't really do

00:10:07,370 --> 00:10:13,340
that much because it's still not like

00:10:12,410 --> 00:10:18,680
I'm still on a route so I can review

00:10:13,340 --> 00:10:21,290
much but I could switch roles system are

00:10:18,680 --> 00:10:23,210
is the one that most demons and things

00:10:21,290 --> 00:10:25,700
are under there are also other

00:10:23,210 --> 00:10:30,620
specialized roles which are not used

00:10:25,700 --> 00:10:32,540
super often but depending on what you if

00:10:30,620 --> 00:10:34,070
you had a bigger system or like you

00:10:32,540 --> 00:10:36,140
wanted different roles to do different

00:10:34,070 --> 00:10:39,800
things you could have an audit admin

00:10:36,140 --> 00:10:41,900
which is the role that can touch the

00:10:39,800 --> 00:10:43,340
audit subsystem which is very important

00:10:41,900 --> 00:10:45,800
subsystem because it gets like log

00:10:43,340 --> 00:10:49,030
messages from the entire system it could

00:10:45,800 --> 00:10:51,770
potentially get other like by their

00:10:49,030 --> 00:10:54,890
secret secured data or whatever so that

00:10:51,770 --> 00:10:57,050
one is quite separate you find then

00:10:54,890 --> 00:10:59,240
there is like DB admin and web admin if

00:10:57,050 --> 00:11:01,430
you want to have a user that can add me

00:10:59,240 --> 00:11:02,750
in the web server with a database but

00:11:01,430 --> 00:11:05,560
not the rest of the system you can give

00:11:02,750 --> 00:11:08,160
those roles so then they will be in

00:11:05,560 --> 00:11:13,800
type and then they can switch up to the

00:11:08,160 --> 00:11:16,899
higher permission role and second in is

00:11:13,800 --> 00:11:19,569
kind of like the audit admin but dealing

00:11:16,899 --> 00:11:21,519
with ethnic policy part so second I

00:11:19,569 --> 00:11:24,639
think can we load the policy and update

00:11:21,519 --> 00:11:26,529
it other people can if you run on a

00:11:24,639 --> 00:11:28,779
normal system sysadmin just gets all

00:11:26,529 --> 00:11:30,279
those and like you just kind of use that

00:11:28,779 --> 00:11:32,759
one like I don't really switch between

00:11:30,279 --> 00:11:35,100
all because it's only me on my laptop so

00:11:32,759 --> 00:11:39,459
that's easy

00:11:35,100 --> 00:11:42,639
categories these are the fun part so

00:11:39,459 --> 00:11:45,100
it's not a typo the last part is the

00:11:42,639 --> 00:11:48,100
sensitivity range so it's the low and

00:11:45,100 --> 00:11:52,600
high so in this case example it is units

00:11:48,100 --> 00:11:55,629
s2 which is anything in those ranges of

00:11:52,600 --> 00:11:58,180
securities I can read but not anything

00:11:55,629 --> 00:12:02,019
higher and full SEO is the lowest but if

00:11:58,180 --> 00:12:04,449
I had like four to five I could do just

00:12:02,019 --> 00:12:09,389
though something higher double lower and

00:12:04,449 --> 00:12:09,389
then on top of that are the categories

00:12:09,720 --> 00:12:14,170
so then you can have a list of

00:12:12,339 --> 00:12:15,970
categories where you can have a range so

00:12:14,170 --> 00:12:20,889
in the earlier thing or at the bottom of

00:12:15,970 --> 00:12:23,470
this it says G 0 dot 1023 that gives me

00:12:20,889 --> 00:12:26,500
all the categories so any file with any

00:12:23,470 --> 00:12:29,319
category I can we if I do not have a

00:12:26,500 --> 00:12:31,059
category then I can't read it

00:12:29,319 --> 00:12:34,959
so by default you just give the user

00:12:31,059 --> 00:12:37,329
kind of everything and since the names

00:12:34,959 --> 00:12:40,269
are kind of like ugly and not really

00:12:37,329 --> 00:12:42,790
understandable you can add there's this

00:12:40,269 --> 00:12:44,920
other demon on top which can take these

00:12:42,790 --> 00:12:46,839
and translate them to like names you

00:12:44,920 --> 00:12:49,209
give them you can write them in it like

00:12:46,839 --> 00:12:52,240
a config file and you could say like

00:12:49,209 --> 00:12:54,069
category 102 is contracts and put in 3

00:12:52,240 --> 00:13:00,759
your salaries and then when you LS

00:12:54,069 --> 00:13:04,480
you'll see that instead so if a file

00:13:00,759 --> 00:13:06,100
does not have any categories so in this

00:13:04,480 --> 00:13:08,709
case at the bottom it's just a zero and

00:13:06,100 --> 00:13:13,779
nothing then anyone can read them if I

00:13:08,709 --> 00:13:15,399
gave it like c5 then as my staff user

00:13:13,779 --> 00:13:18,460
that had all the categories I cancel

00:13:15,399 --> 00:13:20,680
weird but if I had

00:13:18,460 --> 00:13:24,310
a different user that didn't have those

00:13:20,680 --> 00:13:27,510
categories I wouldn't be over with so if

00:13:24,310 --> 00:13:31,780
you see the staff line there's the low

00:13:27,510 --> 00:13:34,090
permission in the high permission it

00:13:31,780 --> 00:13:36,760
doesn't it's meant for the multi-level

00:13:34,090 --> 00:13:40,240
security and then multi category

00:13:36,760 --> 00:13:43,450
security is just like that yeah so if

00:13:40,240 --> 00:13:45,370
you see at the bottom that the route

00:13:43,450 --> 00:13:49,060
like that's the type on my home

00:13:45,370 --> 00:13:52,770
directory that one is implicitly s 0 to

00:13:49,060 --> 00:13:55,150
s 0 but it's double to eat a bright one

00:13:52,770 --> 00:13:55,870
but like it's the low and high are the

00:13:55,150 --> 00:13:59,890
same thing

00:13:55,870 --> 00:14:02,830
so it's only s 0 because MCS doesn't use

00:13:59,890 --> 00:14:05,980
the categories MLS if you want to have

00:14:02,830 --> 00:14:08,380
like s 15 as the top secret and then

00:14:05,980 --> 00:14:10,830
like s 14 could be secret and then s 0

00:14:08,380 --> 00:14:14,170
could be like public then you could have

00:14:10,830 --> 00:14:19,660
you could log in as different sets of 10

00:14:14,170 --> 00:14:21,100
available and you could read up like if

00:14:19,660 --> 00:14:23,110
you are secret you can read public

00:14:21,100 --> 00:14:25,420
information but you cannot write the

00:14:23,110 --> 00:14:32,740
public so you can like have different

00:14:25,420 --> 00:14:35,220
levels and it kind of so I don't really

00:14:32,740 --> 00:14:35,220
know anyone

00:14:42,900 --> 00:14:45,740
yes

00:14:51,190 --> 00:15:00,140
yes so there are excess ilanics

00:14:54,800 --> 00:15:01,520
extensions which does all of that most

00:15:00,140 --> 00:15:06,340
policies just kind of let you do

00:15:01,520 --> 00:15:06,340
whatever you want and X 11 sucks oh you

00:15:06,820 --> 00:15:13,160
but I have seen some things where the

00:15:11,360 --> 00:15:15,770
window manager will put like red if it's

00:15:13,160 --> 00:15:19,250
secret and green if it's not and like

00:15:15,770 --> 00:15:31,370
hide the windows differently I don't

00:15:19,250 --> 00:15:34,120
actually know other than like yeah yeah

00:15:31,370 --> 00:15:34,120
yeah

00:15:36,730 --> 00:15:46,360
Fedora doesn't yeah and I I've got I'm

00:15:43,490 --> 00:15:49,940
the last to work on a console the end

00:15:46,360 --> 00:15:53,390
I'm pretty sure it just wouldn't work on

00:15:49,940 --> 00:15:56,660
it at least without like a lot of

00:15:53,390 --> 00:16:01,820
example policies it really is it so it

00:15:56,660 --> 00:16:04,070
kind of isn't great so another thing

00:16:01,820 --> 00:16:08,450
people have with xox is they get a lot

00:16:04,070 --> 00:16:10,780
of errors and they blame which is

00:16:08,450 --> 00:16:12,830
sometimes fair and sometimes no hi

00:16:10,780 --> 00:16:15,410
alright what is really nice about this

00:16:12,830 --> 00:16:17,540
is the audience subsystem in the kernel

00:16:15,410 --> 00:16:19,610
it actually is not really related to

00:16:17,540 --> 00:16:24,290
assuming they're used very heavily

00:16:19,610 --> 00:16:26,780
together but you could use audit even if

00:16:24,290 --> 00:16:29,030
you don't care at all about having

00:16:26,780 --> 00:16:31,730
installed and you can use it to watch

00:16:29,030 --> 00:16:35,240
certain directories files like audit

00:16:31,730 --> 00:16:39,520
different events on the system so SEO

00:16:35,240 --> 00:16:42,020
Linux will publish an audit entry if you

00:16:39,520 --> 00:16:43,820
do something you're not supposed to so

00:16:42,020 --> 00:16:46,040
if you get a denial it will show up in

00:16:43,820 --> 00:16:48,190
the audit log if you don't see it in the

00:16:46,040 --> 00:16:50,390
audit log there are two possible reasons

00:16:48,190 --> 00:16:53,020
one is that it's being don't audit here

00:16:50,390 --> 00:16:55,790
where it's like it's a harmless thing

00:16:53,020 --> 00:16:56,630
that gets checked but the program

00:16:55,790 --> 00:16:58,520
doesn't need it

00:16:56,630 --> 00:16:59,900
so these are typically badly written

00:16:58,520 --> 00:17:01,130
programs like I've seen a lot of

00:16:59,900 --> 00:17:02,420
programs they just like open every

00:17:01,130 --> 00:17:04,220
single file under this

00:17:02,420 --> 00:17:06,310
like why would it do that I don't know

00:17:04,220 --> 00:17:09,050
but it clearly doesn't need to do that

00:17:06,310 --> 00:17:10,730
it only needs this one file and like

00:17:09,050 --> 00:17:12,200
flashing if you see something it's own

00:17:10,730 --> 00:17:16,160
contact file but it will just stack

00:17:12,200 --> 00:17:17,750
every single file anyway and then you're

00:17:16,160 --> 00:17:19,360
gonna get an aunt like you're gonna get

00:17:17,750 --> 00:17:21,800
a denial for every single file in there

00:17:19,360 --> 00:17:23,300
so you could give it to the program but

00:17:21,800 --> 00:17:24,589
that's probably not a good idea so then

00:17:23,300 --> 00:17:26,180
you can just don't audit for thing and

00:17:24,589 --> 00:17:34,790
they could go away and it won't show up

00:17:26,180 --> 00:17:37,160
and pull your logs or it didn't happen

00:17:34,790 --> 00:17:39,440
I see if you get denied something it

00:17:37,160 --> 00:17:42,230
doesn't work and you don't see an audit

00:17:39,440 --> 00:17:46,040
entry then you can turn off don't audits

00:17:42,230 --> 00:17:47,780
run I see module - B or C D to rebuild

00:17:46,040 --> 00:17:50,870
it load it again without it or either

00:17:47,780 --> 00:17:53,390
don't want it in then if you still don't

00:17:50,870 --> 00:17:55,460
see it it might be not initially you

00:17:53,390 --> 00:17:58,220
like it might be that your unix

00:17:55,460 --> 00:18:01,580
permissions were wrong like the

00:17:58,220 --> 00:18:04,250
beginning then you can take video

00:18:01,580 --> 00:18:08,000
searches search the audit logs you can

00:18:04,250 --> 00:18:11,210
say search the ABC entries and give me

00:18:08,000 --> 00:18:14,390
them from today or recent or some time

00:18:11,210 --> 00:18:15,980
frame in it if you say - today it's

00:18:14,390 --> 00:18:20,390
gonna give you all the ones that happen

00:18:15,980 --> 00:18:21,740
like today and then you can just list

00:18:20,390 --> 00:18:23,930
them out and they look kind of like that

00:18:21,740 --> 00:18:26,000
line underneath or you can pipe it means

00:18:23,930 --> 00:18:28,460
audit to Y which will take an audit

00:18:26,000 --> 00:18:32,570
entry and then give you a more English

00:18:28,460 --> 00:18:35,660
like explanation they're not necessarily

00:18:32,570 --> 00:18:37,130
great explanation in this case the

00:18:35,660 --> 00:18:42,010
examples actually like completely the

00:18:37,130 --> 00:18:45,200
wrong solution what's happened here is

00:18:42,010 --> 00:18:50,600
VAR dub dub dub HTML is where you put

00:18:45,200 --> 00:18:53,630
your websites so the S context in this

00:18:50,600 --> 00:18:56,330
is the source and the t context is the

00:18:53,630 --> 00:19:01,310
target so the source is Apache running

00:18:56,330 --> 00:19:03,380
under HTTP T the T context is in this

00:19:01,310 --> 00:19:06,140
case the file or the directory that was

00:19:03,380 --> 00:19:11,980
trying to read it so you look at the

00:19:06,140 --> 00:19:11,980
contact you see if label user home T so

00:19:12,250 --> 00:19:16,130
these are home T even if you don't know

00:19:14,780 --> 00:19:18,320
anything about Linux or

00:19:16,130 --> 00:19:23,060
I say thanks at all probably doesn't

00:19:18,320 --> 00:19:24,620
sound like a website file so this audit

00:19:23,060 --> 00:19:26,870
- why it goes well you're trying to read

00:19:24,620 --> 00:19:28,760
it use their own file there is a boolean

00:19:26,870 --> 00:19:30,680
to do that so you can set the boolean

00:19:28,760 --> 00:19:33,320
turn it on then Apache will be allowed

00:19:30,680 --> 00:19:36,650
to read you their own files and this

00:19:33,320 --> 00:19:38,330
would then work but that's the wrong

00:19:36,650 --> 00:19:40,190
solution you should just fix the labels

00:19:38,330 --> 00:19:44,060
on that file because that file should be

00:19:40,190 --> 00:19:47,270
labeled like web server files which are

00:19:44,060 --> 00:19:49,700
httpd this content I'm trying to think

00:19:47,270 --> 00:19:52,010
like in the usual case pretty much yes

00:19:49,700 --> 00:19:55,160
you may have some things like you can do

00:19:52,010 --> 00:19:57,230
labels networking so you can like the

00:19:55,160 --> 00:19:58,700
packets over the wire can have contacts

00:19:57,230 --> 00:20:00,200
and I'm kind of think maybe you could do

00:19:58,700 --> 00:20:01,910
weird things there but in the general

00:20:00,200 --> 00:20:04,520
case of things you will encounter in

00:20:01,910 --> 00:20:10,850
normally yeah pretty much it's it's the

00:20:04,520 --> 00:20:12,530
it's the user or something yeah like

00:20:10,850 --> 00:20:19,100
there may be some edge cases but I can't

00:20:12,530 --> 00:20:22,130
think of them right now so yes mostly so

00:20:19,100 --> 00:20:26,290
if you pipe it there's actually several

00:20:22,130 --> 00:20:38,450
different things going on one is that

00:20:26,290 --> 00:20:42,530
script from another and have the

00:20:38,450 --> 00:20:45,440
Commission for reading have it set up so

00:20:42,530 --> 00:20:47,300
you can take the file descriptor from

00:20:45,440 --> 00:20:48,740
the other process and read it but you

00:20:47,300 --> 00:20:56,170
would not be able to write back to it or

00:20:48,740 --> 00:20:56,170
something like that so

00:20:56,370 --> 00:21:03,480
pretty much anything you need to do to

00:21:01,169 --> 00:21:05,370
administrate an excellent system is done

00:21:03,480 --> 00:21:09,539
with a Mac there are a couple other

00:21:05,370 --> 00:21:11,700
tools are really just like this one a

00:21:09,539 --> 00:21:13,770
lot of the other tools are kind of like

00:21:11,700 --> 00:21:15,659
older tools they were written first or

00:21:13,770 --> 00:21:17,460
smaller and they do only part of it and

00:21:15,659 --> 00:21:20,760
now I see manna just kind of does

00:21:17,460 --> 00:21:23,100
everything like there's an S set se Bull

00:21:20,760 --> 00:21:24,720
to turn on our pool Ian's but there's

00:21:23,100 --> 00:21:27,150
also asking manage boolean which will

00:21:24,720 --> 00:21:30,360
turn on our boolean seems to do that

00:21:27,150 --> 00:21:31,890
instead if you run se manage that have

00:21:30,360 --> 00:21:33,539
helped the list all of them there are

00:21:31,890 --> 00:21:36,120
more they wouldn't fit on the slide you

00:21:33,539 --> 00:21:38,760
can do InfiniBand stuff you can set

00:21:36,120 --> 00:21:40,260
different contacts and things on the

00:21:38,760 --> 00:21:42,510
different parts of bands which I don't

00:21:40,260 --> 00:21:46,529
really never done in advance or

00:21:42,510 --> 00:21:48,440
everything how it works but there's a

00:21:46,529 --> 00:21:52,230
bunch of networking options you can set

00:21:48,440 --> 00:21:54,360
labeled networking which is like on the

00:21:52,230 --> 00:21:55,799
wire it'll include the contexts on the

00:21:54,360 --> 00:21:59,970
packets so the other system can

00:21:55,799 --> 00:22:01,470
understand it you can then also have you

00:21:59,970 --> 00:22:03,210
could set firewall rules and say any

00:22:01,470 --> 00:22:05,159
packets coming from this IP address get

00:22:03,210 --> 00:22:07,710
labeled as this and that stays within

00:22:05,159 --> 00:22:10,200
your system there's a bunch of other

00:22:07,710 --> 00:22:13,830
ones which are like I had never used

00:22:10,200 --> 00:22:18,330
them ever so there's there it's clips or

00:22:13,830 --> 00:22:22,559
it's Calypso and tips for ipv4 and six

00:22:18,330 --> 00:22:25,710
so it took it's an RFC for like it's not

00:22:22,559 --> 00:22:31,770
up C for a thing do you don't have to

00:22:25,710 --> 00:22:33,120
use rest nice but then their packets

00:22:31,770 --> 00:22:34,340
coming back would not have them so your

00:22:33,120 --> 00:22:36,840
system will throw those records away

00:22:34,340 --> 00:22:38,820
because you can set up a demon like you

00:22:36,840 --> 00:22:41,220
could set up for example if you had a

00:22:38,820 --> 00:22:42,720
public web server and a top-secret web

00:22:41,220 --> 00:22:44,640
server you could have the top-secret web

00:22:42,720 --> 00:22:47,130
server running under like a different

00:22:44,640 --> 00:22:51,750
one and that one you could make only

00:22:47,130 --> 00:22:53,130
accept labelled packets from like your

00:22:51,750 --> 00:22:56,600
secure Network and the other one could

00:22:53,130 --> 00:22:56,600
be public network and things like that

00:22:57,020 --> 00:23:03,270
it's not super commonly used but you can

00:22:59,700 --> 00:23:07,570
do that the most common ones you'll need

00:23:03,270 --> 00:23:12,220
are obviously user logins the first one

00:23:07,570 --> 00:23:15,429
ports and then file contacts the big one

00:23:12,220 --> 00:23:17,289
and boolean which occurred billions a

00:23:15,429 --> 00:23:23,679
lot in the previous here talks you can

00:23:17,289 --> 00:23:25,059
watch those logins and users are a

00:23:23,679 --> 00:23:26,229
little bit complicated to understand it

00:23:25,059 --> 00:23:29,649
first you have to realize that there are

00:23:26,229 --> 00:23:33,009
Linux users which are your regular Linux

00:23:29,649 --> 00:23:35,940
users then there are SC Linux users

00:23:33,009 --> 00:23:40,109
which typically end with underscore you

00:23:35,940 --> 00:23:44,320
not always in the root case there is the

00:23:40,109 --> 00:23:48,249
system Linux user called root there's

00:23:44,320 --> 00:23:51,999
also an entry hold root that is

00:23:48,249 --> 00:23:54,059
SC Linux user and then there's the

00:23:51,999 --> 00:23:58,029
category range and things like that

00:23:54,059 --> 00:24:01,509
so this actually managed login Maps SC

00:23:58,029 --> 00:24:04,090
Linux users to logging users so in this

00:24:01,509 --> 00:24:07,119
case root will when they log in they get

00:24:04,090 --> 00:24:09,460
this SC Linux user reading and people in

00:24:07,119 --> 00:24:11,919
wheel get stopped and everyone else gets

00:24:09,460 --> 00:24:14,379
user you could set things up if you

00:24:11,919 --> 00:24:16,210
wanted someone to run under like the

00:24:14,379 --> 00:24:18,849
database admins group put their user

00:24:16,210 --> 00:24:21,399
name specifically and then they'd get

00:24:18,849 --> 00:24:22,899
the database admin one or you can set a

00:24:21,399 --> 00:24:26,619
group so the percent in the front means

00:24:22,899 --> 00:24:29,200
it's group so the wheel group users are

00:24:26,619 --> 00:24:32,200
what's related to the whole user role

00:24:29,200 --> 00:24:34,450
mapping so different roles can do

00:24:32,200 --> 00:24:38,379
different things so this is how you give

00:24:34,450 --> 00:24:44,080
someone different sets of them so user

00:24:38,379 --> 00:24:46,330
you gets the assilex rolled user are and

00:24:44,080 --> 00:24:51,149
nothing else and it gets the lowest

00:24:46,330 --> 00:24:51,149
range they can't really do categories

00:24:51,389 --> 00:24:55,349
just thing you kind of gets everything

00:24:56,049 --> 00:25:02,080
staff gets all the categories if you use

00:25:00,009 --> 00:25:05,580
that did you have it empty area and the

00:25:02,080 --> 00:25:05,580
last turned off you know that call mode

00:25:06,059 --> 00:25:11,649
but you'll see under assilex roles

00:25:08,950 --> 00:25:14,769
there's now two things so staff you will

00:25:11,649 --> 00:25:17,649
get staff or first when they login

00:25:14,769 --> 00:25:18,970
you'll get that one but you are also

00:25:17,649 --> 00:25:20,980
allowed to switch to any of the other

00:25:18,970 --> 00:25:22,840
ones you can add data

00:25:20,980 --> 00:25:26,080
admin of things too well you could make

00:25:22,840 --> 00:25:29,169
an ood DB admin user and then add the

00:25:26,080 --> 00:25:30,250
database admin role later and has the

00:25:29,169 --> 00:25:34,570
stop one first

00:25:30,250 --> 00:25:39,210
or something like that like order

00:25:34,570 --> 00:25:45,390
matters in that list so switching roles

00:25:39,210 --> 00:25:47,679
if you switch to root you can do that

00:25:45,390 --> 00:25:49,270
but you'll actually get an error when

00:25:47,679 --> 00:25:53,350
you sue that it can't read your home

00:25:49,270 --> 00:25:54,610
directory because home directories label

00:25:53,350 --> 00:25:58,510
different for group versus the other

00:25:54,610 --> 00:26:00,190
users so I kind of let me do that and

00:25:58,510 --> 00:26:01,750
they need to try to do things you'll

00:26:00,190 --> 00:26:04,990
just get like tons there's like nothing

00:26:01,750 --> 00:26:08,350
will work and if you look at your like

00:26:04,990 --> 00:26:09,910
ID - Dead Eye cynic says early enough

00:26:08,350 --> 00:26:11,770
that we vanished a claim - that on

00:26:09,910 --> 00:26:14,530
almost everything so all the tools -

00:26:11,770 --> 00:26:18,100
said will show the s Linux context the

00:26:14,530 --> 00:26:20,590
last - L said will show the context on

00:26:18,100 --> 00:26:23,169
the files ID - dead or and that's that -

00:26:20,590 --> 00:26:24,190
dead or whatever it'll show all them so

00:26:23,169 --> 00:26:27,160
if you look at that you're still

00:26:24,190 --> 00:26:30,130
starting point you're running ass root

00:26:27,160 --> 00:26:33,970
Linux user so then you can new roles

00:26:30,130 --> 00:26:36,490
just having our and then you can look

00:26:33,970 --> 00:26:39,580
your ID and now it will have changed so

00:26:36,490 --> 00:26:41,350
the staff new at the prime that never

00:26:39,580 --> 00:26:43,270
ever ever changes you can only change

00:26:41,350 --> 00:26:46,299
that by logging in again as some others

00:26:43,270 --> 00:26:48,190
use it you can change your role the

00:26:46,299 --> 00:26:49,660
roles like one user can have any

00:26:48,190 --> 00:26:52,030
different roles and then within the role

00:26:49,660 --> 00:26:53,860
you gotta mean times so you can give

00:26:52,030 --> 00:26:55,330
someone a user and then they can switch

00:26:53,860 --> 00:26:56,650
between the roles they have like if

00:26:55,330 --> 00:27:00,280
they're administrator versus normal user

00:26:56,650 --> 00:27:03,250
and they do that but no matter how many

00:27:00,280 --> 00:27:07,870
times you sue or sudo you'll keep the

00:27:03,250 --> 00:27:09,820
first part that one doesn't change but

00:27:07,870 --> 00:27:12,970
this kind of sucks so you can just use

00:27:09,820 --> 00:27:16,600
sudo it understands and you can do sudo

00:27:12,970 --> 00:27:20,860
- R - t - give it a role in type and

00:27:16,600 --> 00:27:22,330
then it will do it when you do that also

00:27:20,860 --> 00:27:24,010
kind of sucks so you can just add it in

00:27:22,330 --> 00:27:25,510
the studio file and say anyone this in

00:27:24,010 --> 00:27:28,870
the wheel group will automatically do

00:27:25,510 --> 00:27:31,630
type just admin role system if you do

00:27:28,870 --> 00:27:34,090
that then like to do - s we'll just do

00:27:31,630 --> 00:27:34,480
like it'll just work as far as things

00:27:34,090 --> 00:27:35,830
are concerned

00:27:34,480 --> 00:27:39,549
when you switch to read your also you

00:27:35,830 --> 00:27:41,410
switch dessert music you can also

00:27:39,549 --> 00:27:42,700
specify the manually if you want like if

00:27:41,410 --> 00:27:45,549
you are a normal thing and you want to

00:27:42,700 --> 00:27:47,320
do the database and then stuff you can

00:27:45,549 --> 00:27:50,500
then specify the database admin role in

00:27:47,320 --> 00:27:53,400
time yes those are special they run

00:27:50,500 --> 00:27:56,169
through Pam as well some time is special

00:27:53,400 --> 00:27:59,290
but stuff like sue in studio like

00:27:56,169 --> 00:28:04,750
there's a whole bunch of really tight

00:27:59,290 --> 00:28:06,850
security on those programs when they

00:28:04,750 --> 00:28:09,070
fork they'll make another sub process

00:28:06,850 --> 00:28:11,200
the other one but like their base they

00:28:09,070 --> 00:28:12,929
have the ability to the set like to

00:28:11,200 --> 00:28:15,460
change it during that transition and

00:28:12,929 --> 00:28:17,830
there's a bunch of like extra labels on

00:28:15,460 --> 00:28:19,210
those so they're all categorized in the

00:28:17,830 --> 00:28:22,290
policies you can search for them and

00:28:19,210 --> 00:28:25,630
there's constraints set in the policy so

00:28:22,290 --> 00:28:28,870
if something that tries to do that if

00:28:25,630 --> 00:28:32,140
you try and give some random program the

00:28:28,870 --> 00:28:34,450
ability to change type you'll fail the

00:28:32,140 --> 00:28:36,790
policy compile because the constraint

00:28:34,450 --> 00:28:39,120
rules one way I do that you also need to

00:28:36,790 --> 00:28:42,400
give it but like the type or the

00:28:39,120 --> 00:28:44,740
attribute to allow it to change roles

00:28:42,400 --> 00:28:46,390
and types just so that like you can't

00:28:44,740 --> 00:28:48,280
accidentally do it you need to be very

00:28:46,390 --> 00:28:53,049
like really really specific when you do

00:28:48,280 --> 00:28:56,770
that so see there's a lot nicer you just

00:28:53,049 --> 00:28:59,049
add a thing the bottom it works that's

00:28:56,770 --> 00:29:01,690
for your user if you want to run other

00:28:59,049 --> 00:29:07,929
programs and other domains normally

00:29:01,690 --> 00:29:10,090
there are pipes on the files so like our

00:29:07,929 --> 00:29:13,510
sink might be are sinking exactiy and

00:29:10,090 --> 00:29:16,570
then when you run it there'll be a pipe

00:29:13,510 --> 00:29:19,150
transition like when staff runs it this

00:29:16,570 --> 00:29:21,220
executable type it'll when it runs that

00:29:19,150 --> 00:29:24,130
program it'll run it in the destination

00:29:21,220 --> 00:29:28,090
type I covered this a lot more in last

00:29:24,130 --> 00:29:29,500
year's talks if you don't have a type

00:29:28,090 --> 00:29:32,110
transition and you want to do it

00:29:29,500 --> 00:29:33,250
manually you can bank on or if there is

00:29:32,110 --> 00:29:36,460
a time transition but you want to go to

00:29:33,250 --> 00:29:39,100
a different one but maybe SSH will go to

00:29:36,460 --> 00:29:42,490
sh t but you don't for some reason you

00:29:39,100 --> 00:29:44,710
can then run con something else it's

00:29:42,490 --> 00:29:47,130
useful during policy development if you

00:29:44,710 --> 00:29:50,500
haven't like put all the transitions

00:29:47,130 --> 00:29:53,470
or if you're trying to screw around but

00:29:50,500 --> 00:29:55,870
it is quite useful so this is the type

00:29:53,470 --> 00:29:57,580
like you can do drunk on - tea it'll

00:29:55,870 --> 00:30:04,049
keep your user in your role and it'll

00:29:57,580 --> 00:30:08,350
set the pipe on it and these types other

00:30:04,049 --> 00:30:09,820
types a set one that doesn't like they

00:30:08,350 --> 00:30:12,130
need to be associated at least a little

00:30:09,820 --> 00:30:13,480
bit the transition cannot be there and

00:30:12,130 --> 00:30:15,309
you can switch to it

00:30:13,480 --> 00:30:18,340
but if the pipe is not associated with

00:30:15,309 --> 00:30:21,520
it you can't do it so like HTTP tea is

00:30:18,340 --> 00:30:23,679
the apache type staff role cannot run

00:30:21,520 --> 00:30:29,740
that that's not a thing so if you try to

00:30:23,679 --> 00:30:32,350
run con - tea HTTP t e you won't run

00:30:29,740 --> 00:30:35,040
like it'll try and compute the context

00:30:32,350 --> 00:30:38,710
you'll say stop you stop r h PT and then

00:30:35,040 --> 00:30:41,260
it will just fail and not write if you

00:30:38,710 --> 00:30:43,240
want to run system stuff there's another

00:30:41,260 --> 00:30:44,410
thing in front called running it which

00:30:43,240 --> 00:30:46,150
does a whole bunch of stuff it lasts

00:30:44,410 --> 00:30:48,880
your password at first and then do some

00:30:46,150 --> 00:30:53,530
more funny things and then it will get

00:30:48,880 --> 00:30:55,600
to init T which is in it and then when

00:30:53,530 --> 00:30:59,530
you run it there is a transition from an

00:30:55,600 --> 00:31:01,510
it to the HTTP T daemon and then that

00:30:59,530 --> 00:31:03,669
will work but if you just has your

00:31:01,510 --> 00:31:06,160
normal user running Apache control start

00:31:03,669 --> 00:31:08,410
it probably won't work

00:31:06,160 --> 00:31:11,260
you might nowadays but like system D has

00:31:08,410 --> 00:31:14,500
these better things we can like figure

00:31:11,260 --> 00:31:16,630
it out but if you just try and run the

00:31:14,500 --> 00:31:23,770
server by area like actually directly it

00:31:16,630 --> 00:31:26,040
just probably pull it all worked so if

00:31:23,770 --> 00:31:28,750
you want to do strange things with users

00:31:26,040 --> 00:31:30,250
if you had a finance department and you

00:31:28,750 --> 00:31:32,410
want it to keep the finance stuff

00:31:30,250 --> 00:31:34,270
separate from everyone else you can set

00:31:32,410 --> 00:31:37,330
categories on the file of Finance things

00:31:34,270 --> 00:31:42,970
you could give them 0 to 127

00:31:37,330 --> 00:31:45,309
so the 0.1 27 is a range if it's 0 comma

00:31:42,970 --> 00:31:54,010
127 then it's kind of a 0 and category

00:31:45,309 --> 00:31:57,970
127 its 0.1 27 its 0 1 2 3 4 up to so in

00:31:54,010 --> 00:32:00,609
this case you make a finance you and you

00:31:57,970 --> 00:32:02,109
give it a different set of categories

00:32:00,609 --> 00:32:04,119
and then you just give it user role

00:32:02,109 --> 00:32:06,669
again the role stuff you can just

00:32:04,119 --> 00:32:09,369
inherit and keep that's all the same you

00:32:06,669 --> 00:32:11,499
just set the categories and the

00:32:09,369 --> 00:32:13,779
sensitivity on it and then it's a whole

00:32:11,499 --> 00:32:17,139
new set of things and it'll just work

00:32:13,779 --> 00:32:22,719
really nicely then you would need to set

00:32:17,139 --> 00:32:24,820
that new finance you user on Alice or

00:32:22,719 --> 00:32:27,129
Bob or whatever and then you would need

00:32:24,820 --> 00:32:29,289
to reset the home directory of that user

00:32:27,129 --> 00:32:33,549
because if the home directory was still

00:32:29,289 --> 00:32:37,119
on user you and the user types and then

00:32:33,549 --> 00:32:38,649
they log in they log in before they read

00:32:37,119 --> 00:32:41,440
the file system like they're gonna log

00:32:38,649 --> 00:32:43,809
in and become Finance you would like

00:32:41,440 --> 00:32:45,519
whatever those roles are then they're

00:32:43,809 --> 00:32:47,649
gonna try and read their home directory

00:32:45,519 --> 00:32:49,899
and bash RC and that's gonna fail and

00:32:47,649 --> 00:32:51,729
they're kind of knocking again so you

00:32:49,899 --> 00:32:53,739
need to reset that to like they're

00:32:51,729 --> 00:32:56,889
they're quite different like every

00:32:53,739 --> 00:33:00,999
single thing has a different label on it

00:32:56,889 --> 00:33:03,070
he's like it's not usually that hard you

00:33:00,999 --> 00:33:06,190
just kind of reset everything the store

00:33:03,070 --> 00:33:08,249
con will read the policy that has

00:33:06,190 --> 00:33:12,459
defined the context and then set those

00:33:08,249 --> 00:33:16,869
like back to default cars recursive V is

00:33:12,459 --> 00:33:20,070
verbose F is force so there are certain

00:33:16,869 --> 00:33:22,719
types that are marked as customizable

00:33:20,070 --> 00:33:23,859
like users want to change things in

00:33:22,719 --> 00:33:25,690
their home directory and maybe like

00:33:23,859 --> 00:33:27,159
their downloads folder is somewhere else

00:33:25,690 --> 00:33:29,379
and they want to label that one is the

00:33:27,159 --> 00:33:30,729
downloads folder because chrome can only

00:33:29,379 --> 00:33:32,320
write to the Downloads folder right

00:33:30,729 --> 00:33:33,309
anywhere else so if I try to say

00:33:32,320 --> 00:33:35,739
something the home directory that won't

00:33:33,309 --> 00:33:38,769
work but if I also want to save it to a

00:33:35,739 --> 00:33:42,759
different downloads folder and I said

00:33:38,769 --> 00:33:45,940
that if you restore Kon without the

00:33:42,759 --> 00:33:47,859
force and that type is marked as a

00:33:45,940 --> 00:33:51,399
customizable type like the Downloads

00:33:47,859 --> 00:33:53,589
directory is then it won't change it if

00:33:51,399 --> 00:33:56,200
it's if you do the dash F to force it

00:33:53,589 --> 00:34:00,549
it'll just go right off thankfully so I

00:33:56,200 --> 00:34:01,629
like to force them I like to add them to

00:34:00,549 --> 00:34:03,039
the policy and they just force

00:34:01,629 --> 00:34:04,779
everything does that I keep track of

00:34:03,039 --> 00:34:06,039
what I've done what I haven't but if

00:34:04,779 --> 00:34:08,139
you're on a multi-user system and like

00:34:06,039 --> 00:34:10,389
only one like IT admin has this

00:34:08,139 --> 00:34:13,520
permission then you would probably use

00:34:10,389 --> 00:34:18,330
customizable types a lot more

00:34:13,520 --> 00:34:21,179
the file contexts on these files are

00:34:18,330 --> 00:34:24,750
stored in extended attributes like on

00:34:21,179 --> 00:34:26,850
the file system you need to know that

00:34:24,750 --> 00:34:29,160
they're there as it's been attributes if

00:34:26,850 --> 00:34:31,010
you're backing up your system and you

00:34:29,160 --> 00:34:33,210
don't turn on backups for X adders

00:34:31,010 --> 00:34:36,600
depending on the tool you won't get

00:34:33,210 --> 00:34:38,280
labels which means when you restore you

00:34:36,600 --> 00:34:41,460
could just like reset all the types back

00:34:38,280 --> 00:34:42,810
to be whole that's probably fine but it

00:34:41,460 --> 00:34:45,510
might not be so if you're doing your

00:34:42,810 --> 00:34:48,080
backups most different tools have a way

00:34:45,510 --> 00:34:52,710
to keep height what it was

00:34:48,080 --> 00:34:54,419
so if you do CP and copy something it's

00:34:52,710 --> 00:34:56,520
making a new file and then writing the

00:34:54,419 --> 00:34:58,500
content over so that's going to use the

00:34:56,520 --> 00:35:00,810
type inheritance alt like the parent

00:34:58,500 --> 00:35:02,340
directory if that's something else and

00:35:00,810 --> 00:35:05,520
you don't want to do that then you do

00:35:02,340 --> 00:35:07,560
preserve public they don't copy over if

00:35:05,520 --> 00:35:09,570
you do CPP whatever it is it'll just

00:35:07,560 --> 00:35:10,680
preserving the preserve timestamp and

00:35:09,570 --> 00:35:16,080
all the other things so then you'll get

00:35:10,680 --> 00:35:17,970
the context as well but all the way our

00:35:16,080 --> 00:35:21,650
sync has an X headers one little do I

00:35:17,970 --> 00:35:24,510
see links and everything else tar has

00:35:21,650 --> 00:35:26,970
separate flags for regular x adders and

00:35:24,510 --> 00:35:28,650
isolates because sometimes if you're

00:35:26,970 --> 00:35:30,750
restoring things back and you don't have

00:35:28,650 --> 00:35:34,620
permission to write certain types

00:35:30,750 --> 00:35:37,640
innocent labels you can write them back

00:35:34,620 --> 00:35:45,590
but you might want the other than that

00:35:37,640 --> 00:35:49,640
you can if you want to change them

00:35:45,590 --> 00:35:57,140
temporarily you th con change context

00:35:49,640 --> 00:35:59,340
just like CH owner or CH or whatever

00:35:57,140 --> 00:36:02,010
this let's change the context you do -

00:35:59,340 --> 00:36:03,960
teil you're the type - L will be the

00:36:02,010 --> 00:36:05,850
level if you don't give anything you can

00:36:03,960 --> 00:36:07,980
get all the whole thing's filled out and

00:36:05,850 --> 00:36:12,180
it'll set that you can also do - F

00:36:07,980 --> 00:36:13,500
reference and it'll you - have reference

00:36:12,180 --> 00:36:15,480
it can read the type of another file and

00:36:13,500 --> 00:36:18,420
set it and then you restore kondeh set

00:36:15,480 --> 00:36:19,620
everything back if you want to do it

00:36:18,420 --> 00:36:24,270
permanently which is the way I like to

00:36:19,620 --> 00:36:26,130
do it you can se manage F context and

00:36:24,270 --> 00:36:29,279
then you give it a type and the direct

00:36:26,130 --> 00:36:34,859
Riggins Luther spring X is an actual reg

00:36:29,279 --> 00:36:36,960
X so you can set different like hots

00:36:34,859 --> 00:36:38,880
under it matching only certain things or

00:36:36,960 --> 00:36:42,299
whatever and then it'll set that type on

00:36:38,880 --> 00:36:45,089
it so if you moved apaches directory

00:36:42,299 --> 00:36:47,130
normally it's under bar w w want to put

00:36:45,089 --> 00:36:50,369
it under server or something else then

00:36:47,130 --> 00:36:52,200
you can set the type on it and then you

00:36:50,369 --> 00:36:54,180
restore con and things might still not

00:36:52,200 --> 00:36:57,390
quite work right because we have other

00:36:54,180 --> 00:36:59,309
types underneath like cgi-bin is labeled

00:36:57,390 --> 00:37:00,809
differently from the base one and then

00:36:59,309 --> 00:37:02,099
like an upload directory as marked as we

00:37:00,809 --> 00:37:04,680
write whereas the regular ones are only

00:37:02,099 --> 00:37:07,489
we don't mean so if you actually look

00:37:04,680 --> 00:37:11,430
for VAR dub dub dub in like my laptop's

00:37:07,489 --> 00:37:13,529
all a contacts file you get 24 of them

00:37:11,430 --> 00:37:14,640
you could set them all manually in that

00:37:13,529 --> 00:37:16,319
new directory but that's kind of pain

00:37:14,640 --> 00:37:18,239
the ass but you add one in the pole so

00:37:16,319 --> 00:37:22,470
you won't get it so there's also a dash

00:37:18,239 --> 00:37:23,460
equal equal or - e so you can say SR

00:37:22,470 --> 00:37:26,910
vwww

00:37:23,460 --> 00:37:28,769
is exactly equivalent to VAR w so when

00:37:26,910 --> 00:37:31,680
it tries to label file in there it will

00:37:28,769 --> 00:37:33,359
just realize oh it's that let me look up

00:37:31,680 --> 00:37:35,999
here instead so then that's how we

00:37:33,359 --> 00:37:37,400
support like user Lib 64 usually

00:37:35,999 --> 00:37:42,710
thirty-two and these kind of things

00:37:37,400 --> 00:37:47,009
they're just handled by that you set

00:37:42,710 --> 00:37:49,430
equal one and then you set F context on

00:37:47,009 --> 00:37:52,999
SRV dub dub dub it will not see that one

00:37:49,430 --> 00:37:52,999
when it reads the path

00:37:55,970 --> 00:38:10,010
yes Danny will automatically yeah yeah

00:38:03,420 --> 00:38:13,380
it'll it'll rewrite the yep almost done

00:38:10,010 --> 00:38:15,690
ports a lot of people run ports or run

00:38:13,380 --> 00:38:17,130
servers and run things on ports there

00:38:15,690 --> 00:38:18,690
are the standard ports which are labeled

00:38:17,130 --> 00:38:20,580
different things and then there are

00:38:18,690 --> 00:38:22,950
other sometimes you want to run on

00:38:20,580 --> 00:38:28,080
another port for whatever reason you get

00:38:22,950 --> 00:38:32,510
my spam if that's not labeled and it's

00:38:28,080 --> 00:38:36,560
like port 80 and 443 and these ones are

00:38:32,510 --> 00:38:39,450
labeled as port HTTP port type

00:38:36,560 --> 00:38:40,980
so then Apache is allowed to bind to

00:38:39,450 --> 00:38:42,780
those ports and connect to those ports

00:38:40,980 --> 00:38:44,730
and do all that now they if you want to

00:38:42,780 --> 00:38:48,080
put Apache on port 8081

00:38:44,730 --> 00:38:53,270
that's not in policy so then you can add

00:38:48,080 --> 00:38:57,030
put 1881 TCP for that port type locally

00:38:53,270 --> 00:38:59,250
without having a to the pulse just on

00:38:57,030 --> 00:39:01,260
your machine then after that

00:38:59,250 --> 00:39:06,720
how'd you combine - fine so except that

00:39:01,260 --> 00:39:08,130
we start apache will work mostly done

00:39:06,720 --> 00:39:12,240
thank you

00:39:08,130 --> 00:39:15,240
I finished github is there yes things

00:39:12,240 --> 00:39:19,020
coloring book is awesome I've talked

00:39:15,240 --> 00:39:21,210
about in my first talk otherwise the

00:39:19,020 --> 00:39:23,099
wiki's are pretty good then - in Fedora

00:39:21,210 --> 00:39:24,599
have a lot of information on them so the

00:39:23,099 --> 00:39:28,710
point when I see Linux is that it's

00:39:24,599 --> 00:39:31,200
mandatory access set globally by the

00:39:28,710 --> 00:39:34,160
administrator on the entire system users

00:39:31,200 --> 00:39:38,730
cannot change it that permissions are

00:39:34,160 --> 00:39:40,890
discretionary access where the user can

00:39:38,730 --> 00:39:42,690
do what they want so if in my home

00:39:40,890 --> 00:39:45,390
directory I set everything to like chmod

00:39:42,690 --> 00:39:48,869
seven seven seven then anyone leave my

00:39:45,390 --> 00:39:51,599
stuff but you still need those

00:39:48,869 --> 00:39:54,420
permissions you can't get rid of it's

00:39:51,599 --> 00:39:55,859
like there's EDS Linux would allow

00:39:54,420 --> 00:39:57,180
something but you want to walk it down

00:39:55,859 --> 00:40:01,109
even more you can just use the

00:39:57,180 --> 00:40:03,599
inscriptions on that or you can't get

00:40:01,109 --> 00:40:04,920
rid of selinux because discretionary the

00:40:03,599 --> 00:40:06,270
problem with them is the user can choose

00:40:04,920 --> 00:40:07,210
themselves a foot if they see it want

00:40:06,270 --> 00:40:09,610
everything then

00:40:07,210 --> 00:40:13,570
the system can read it if you have this

00:40:09,610 --> 00:40:17,590
links on top then even if the user sets

00:40:13,570 --> 00:40:23,920
seven seven seven you can't read it so

00:40:17,590 --> 00:40:26,980
no no I have scheme will only use like

00:40:23,920 --> 00:40:29,410
don't local share scheme and don't

00:40:26,980 --> 00:40:32,500
whatever no no on my system it cannot do

00:40:29,410 --> 00:40:35,410
anything else so I have set the

00:40:32,500 --> 00:40:37,120
mainstream binary to steam key and then

00:40:35,410 --> 00:40:38,890
there are no transitions out of that

00:40:37,120 --> 00:40:40,660
there is no way once you get into that

00:40:38,890 --> 00:40:44,020
to get anywhere else and then I've given

00:40:40,660 --> 00:40:46,360
the steam domain permissions for like

00:40:44,020 --> 00:40:48,370
the graphics to use that use whatever

00:40:46,360 --> 00:40:50,140
and only write to those small

00:40:48,370 --> 00:40:52,810
directories it can't write anywhere else

00:40:50,140 --> 00:40:56,680
because I'm sure you heard some time ago

00:40:52,810 --> 00:40:58,360
there was the steam dog dog when you

00:40:56,680 --> 00:41:02,620
upgrade steam it would nuke your entire

00:40:58,360 --> 00:41:05,050
system disarmed RF everything yeah so I

00:41:02,620 --> 00:41:09,400
can't that can't happen now for me which

00:41:05,050 --> 00:41:11,310
is nice it's mostly worse on my machine

00:41:09,400 --> 00:41:15,940
but I haven't upstream default yet I

00:41:11,310 --> 00:41:18,790
could do that terribly I let it read for

00:41:15,940 --> 00:41:20,530
like oh we have nice macros to help but

00:41:18,790 --> 00:41:22,000
like DNS lookups you need to read

00:41:20,530 --> 00:41:23,650
there's all columns and those things so

00:41:22,000 --> 00:41:26,970
it's easy to give a domain those kind of

00:41:23,650 --> 00:41:26,970

YouTube URL: https://www.youtube.com/watch?v=q8EHD-0Kwcg


