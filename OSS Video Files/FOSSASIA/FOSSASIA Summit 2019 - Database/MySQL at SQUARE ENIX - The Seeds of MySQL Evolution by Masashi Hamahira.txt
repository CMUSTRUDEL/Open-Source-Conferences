Title: MySQL at SQUARE ENIX - The Seeds of MySQL Evolution by Masashi Hamahira
Publication date: 2019-03-22
Playlist: FOSSASIA Summit 2019 - Database
Description: 
	17 March 2019 11:00, Training Room 2-1

We manage over 9,000 servers and 3,000 MySQL servers.

In one game, 800,000 QPS in database.

I will explain what the game company wants for MySQL.

Now, game companies are increasingly using PaaS(for example AWS Aurora).

I would like people to come and listen to these stories.
Captions: 
	00:00:00,030 --> 00:00:05,370
whoa during my presentation today I'm

00:00:04,500 --> 00:00:10,110
Musashi

00:00:05,370 --> 00:00:14,250
mahira Raja Bell she a manager of square

00:00:10,110 --> 00:00:17,910
eggs I'm not good at speaking English

00:00:14,250 --> 00:00:22,680
very well but I will do my best

00:00:17,910 --> 00:00:27,210
please listen thank you today I will

00:00:22,680 --> 00:00:32,660
talk about usage of my sq L of Square

00:00:27,210 --> 00:00:37,680
Enix proud of our cloud platform and my

00:00:32,660 --> 00:00:42,480
expectations for my sq L let me start

00:00:37,680 --> 00:00:46,950
with video or movies final pattering our

00:00:42,480 --> 00:00:51,329
mobile RPG made by the team behind the

00:00:46,950 --> 00:00:54,500
Final Fantasy series with 10 million

00:00:51,329 --> 00:00:54,500
players war

00:01:15,540 --> 00:01:18,659
[Music]

00:01:47,120 --> 00:01:50,279
[Music]

00:01:50,890 --> 00:01:53,640
we're just

00:02:32,220 --> 00:02:45,310
you play this game after you know I fall

00:02:39,820 --> 00:02:51,390
satphone this baby is also learning of

00:02:45,310 --> 00:02:51,390
my SQL and my team is managing it

00:03:00,360 --> 00:03:08,700
I joined Square Enix in 2007

00:03:05,310 --> 00:03:13,430
I will playing many games created by

00:03:08,700 --> 00:03:18,560
Square Enix and today I manage an

00:03:13,430 --> 00:03:18,560
infrastructure team for those games too

00:03:23,379 --> 00:03:30,549
square enix is best known for

00:03:26,340 --> 00:03:33,480
role-playing video games including final

00:03:30,549 --> 00:03:38,590
fantasy dragon quest Dragon Warrior and

00:03:33,480 --> 00:03:42,810
keeping our hearts with Disney our

00:03:38,590 --> 00:03:42,810
corporate philosophy believe this

00:03:47,910 --> 00:03:55,680
our headquarters in Tokyo Japan

00:03:50,910 --> 00:03:58,950
it is in Tokyo Japan we also have branch

00:03:55,680 --> 00:04:01,040
offices in the United States Europe and

00:03:58,950 --> 00:04:01,040
China

00:04:05,810 --> 00:04:13,280
we operate games globally our

00:04:09,890 --> 00:04:15,580
development team is located across that

00:04:13,280 --> 00:04:15,580
lock

00:04:19,750 --> 00:04:44,130
my dream are square enix is called C

00:04:24,660 --> 00:04:53,830
which stands for social game here are

00:04:44,130 --> 00:05:01,690
almighty we manage even 19,000 service

00:04:53,830 --> 00:05:07,120
of which 3,000 of MySQL cells these

00:05:01,690 --> 00:05:14,669
servers love more than 100 games are

00:05:07,120 --> 00:05:14,669
running we leave her to give us project

00:05:17,620 --> 00:05:26,090
all my games at square enix

00:05:21,170 --> 00:05:31,310
are not only games or smartphones we

00:05:26,090 --> 00:05:35,900
deliver games for web browsers to games

00:05:31,310 --> 00:05:40,220
on gaming and consoles also corrected

00:05:35,900 --> 00:05:42,310
rhyme and players can provide with each

00:05:40,220 --> 00:05:45,700
other

00:05:42,310 --> 00:05:51,290
Square Enix place is one of the

00:05:45,700 --> 00:05:54,620
questions for players players can manage

00:05:51,290 --> 00:05:59,240
in-app purchases with this screen

00:05:54,620 --> 00:06:03,560
explained also square in it bridge is

00:05:59,240 --> 00:06:07,550
used to back up player data and to

00:06:03,560 --> 00:06:12,770
transfer data to other devices like when

00:06:07,550 --> 00:06:13,700
you purchase a new smartphone for most

00:06:12,770 --> 00:06:19,040
projects

00:06:13,700 --> 00:06:22,810
strannix with these factions we touch

00:06:19,040 --> 00:06:27,790
chichi prepare these functions as a

00:06:22,810 --> 00:06:27,790
common platform for our cover

00:06:32,490 --> 00:06:42,540
our main responsibility is managing a

00:06:36,670 --> 00:06:45,850
parking the success of over 100 projects

00:06:42,540 --> 00:06:48,970
including cloud-based infrastructure and

00:06:45,850 --> 00:06:53,940
video we're of course

00:06:48,970 --> 00:06:58,660
- Trewin is a key component we manage

00:06:53,940 --> 00:07:02,560
each project can reach 800 thousand

00:06:58,660 --> 00:07:05,860
rupiah's in database and about six

00:07:02,560 --> 00:07:10,990
gigabit per second data transfer among

00:07:05,860 --> 00:07:16,660
servers but we explain more of this

00:07:10,990 --> 00:07:22,030
array the slides we sometimes alive and

00:07:16,660 --> 00:07:25,330
improve server-side applications we do

00:07:22,030 --> 00:07:32,800
this to reduce operation costs by

00:07:25,330 --> 00:07:37,150
reducing workload ourselves eight years

00:07:32,800 --> 00:07:41,230
ago when I joined Square Enix I needed

00:07:37,150 --> 00:07:46,540
to I needed to manage infrastructure of

00:07:41,230 --> 00:07:51,400
online games at this time I managed only

00:07:46,540 --> 00:07:54,940
one game name single exam a web based

00:07:51,400 --> 00:08:00,750
strategy game you are a samurai warrior

00:07:54,940 --> 00:08:04,360
and explorers through chapters now I

00:08:00,750 --> 00:08:10,390
have a team of 30 plus members and

00:08:04,360 --> 00:08:14,700
manage over 100 projects day each member

00:08:10,390 --> 00:08:20,590
a subject matter expert who each device

00:08:14,700 --> 00:08:23,440
like to feel emotional right picture who

00:08:20,590 --> 00:08:26,350
is one over the cool members of the

00:08:23,440 --> 00:08:29,710
Debian community in Tokyo

00:08:26,350 --> 00:08:32,340
I always select a technical expert for

00:08:29,710 --> 00:08:32,340
my IP

00:09:07,779 --> 00:09:19,850
these are the methods we are currently

00:09:13,790 --> 00:09:25,930
using three cloud infrastructures 50

00:09:19,850 --> 00:09:30,230
cloud in our ways Google cloud platform

00:09:25,930 --> 00:09:36,610
mainly 50 cloud which is open-ended by

00:09:30,230 --> 00:09:36,610
US subsidiary or fugitive and others

00:09:41,910 --> 00:09:49,470
one of the major challenge for my team

00:09:44,730 --> 00:09:53,690
now is system overall some titles can

00:09:49,470 --> 00:09:59,400
get a much larger number of user than

00:09:53,690 --> 00:10:03,600
expected planning which is generally

00:09:59,400 --> 00:10:07,260
good news but sometimes large numbers

00:10:03,600 --> 00:10:12,690
cause performance problems that we spend

00:10:07,260 --> 00:10:17,510
hours to resolve cheating with managing

00:10:12,690 --> 00:10:23,430
the large or multiple products each week

00:10:17,510 --> 00:10:28,320
if two events happen at the same time it

00:10:23,430 --> 00:10:32,760
can become a serious situation I wish

00:10:28,320 --> 00:10:35,780
that human resources were as elastic as

00:10:32,760 --> 00:10:35,780
the cloud

00:10:39,180 --> 00:10:48,900
Leticia plans and strategies around our

00:10:43,050 --> 00:10:53,970
Cloud usage as I mentioned earlier we

00:10:48,900 --> 00:10:58,860
are mainly using UT cloud and AWS Google

00:10:53,970 --> 00:11:02,760
cloud platform we are using matter of

00:10:58,860 --> 00:11:07,320
class largely because of direction from

00:11:02,760 --> 00:11:10,230
our management we want to keep strengths

00:11:07,320 --> 00:11:15,510
in price negotiation with service

00:11:10,230 --> 00:11:21,300
providers and diversify risks so what is

00:11:15,510 --> 00:11:24,420
next the key word is global what do I do

00:11:21,300 --> 00:11:28,320
users are finding matching players

00:11:24,420 --> 00:11:34,080
globally accessing the same games from

00:11:28,320 --> 00:11:37,290
history remote locations this brings you

00:11:34,080 --> 00:11:41,580
requirements management database with

00:11:37,290 --> 00:11:45,090
low ratings shift between labels of

00:11:41,580 --> 00:11:50,550
course latency of mobile network is

00:11:45,090 --> 00:11:55,400
major concern for game players while our

00:11:50,550 --> 00:11:55,400
g-forces or server side issues

00:11:57,800 --> 00:12:03,860
we are culturally testing several

00:11:59,869 --> 00:12:07,399
different options I hooked up the new

00:12:03,860 --> 00:12:15,889
mastery based cloud service from Oracle

00:12:07,399 --> 00:12:19,850
can beat our be climate to major cloud

00:12:15,889 --> 00:12:25,489
providers are releasing new services

00:12:19,850 --> 00:12:28,989
possibly fulfill our requirements so

00:12:25,489 --> 00:12:32,360
some of those are still plenty version

00:12:28,989 --> 00:12:35,540
we will X my details all those

00:12:32,360 --> 00:12:39,259
subsystems out with engineers probe each

00:12:35,540 --> 00:12:42,499
cloud vendors which can help us to

00:12:39,259 --> 00:12:44,949
overcome technical details of those

00:12:42,499 --> 00:12:44,949
hassles

00:12:47,730 --> 00:12:57,060
next topic is house where it is using

00:12:51,510 --> 00:13:02,730
MySQL this is the typical population of

00:12:57,060 --> 00:13:07,020
our online games the numbers here are

00:13:02,730 --> 00:13:13,260
from one of our major games which is

00:13:07,020 --> 00:13:18,570
using MySQL in this game there are 20

00:13:13,260 --> 00:13:26,520
words one here means chapters was kgs in

00:13:18,570 --> 00:13:31,950
game at the peak period over 6500

00:13:26,520 --> 00:13:37,830
players are online in this game but this

00:13:31,950 --> 00:13:40,440
number is only in one word total number

00:13:37,830 --> 00:13:47,820
of users playing at the same time

00:13:40,440 --> 00:13:52,350
college over 130,000 network traffic

00:13:47,820 --> 00:14:01,620
from users college over 80 mega biblical

00:13:52,350 --> 00:14:05,970
world 1.6 Giga bps 420 works and traffic

00:14:01,620 --> 00:14:10,320
between servers can be 1 Giga bps in

00:14:05,970 --> 00:14:16,370
each word which means 20 Giga people in

00:14:10,320 --> 00:14:22,410
total we are using MySQL replication

00:14:16,370 --> 00:14:27,810
this MySQL servers in each 114,000 lead

00:14:22,410 --> 00:14:32,390
and write queries per second the total

00:14:27,810 --> 00:14:38,000
number of transactions of this game is

00:14:32,390 --> 00:14:43,190
800,000 we are using MySQL replication

00:14:38,000 --> 00:14:48,889
these MySQL servers if I saw it again

00:14:43,190 --> 00:14:53,740
this is just one game we have we are

00:14:48,889 --> 00:14:53,740
managing over 100 games right now

00:14:58,050 --> 00:15:06,680
as you know in Japan we most prepare for

00:15:03,810 --> 00:15:13,649
catastrophic disasters like huge

00:15:06,680 --> 00:15:19,050
earthquake and tsunamis those disasters

00:15:13,649 --> 00:15:22,740
can destroy date centers that's why

00:15:19,050 --> 00:15:28,589
disaster recovery is mandatory for all

00:15:22,740 --> 00:15:32,660
regions critical systems our games are

00:15:28,589 --> 00:15:32,660
critical for our business

00:15:36,720 --> 00:15:45,300
last year over five million people

00:15:41,040 --> 00:15:49,380
living in Hokkaido the northern island

00:15:45,300 --> 00:15:56,250
of Japan experienced an island-wide

00:15:49,380 --> 00:16:01,560
black out for 48 hours which was

00:15:56,250 --> 00:16:05,090
triggered by a large quake there are 10

00:16:01,560 --> 00:16:08,420
major data centers in Hokkaido

00:16:05,090 --> 00:16:14,940
most of them successfully rooted

00:16:08,420 --> 00:16:16,350
generators but not 100% perfect this is

00:16:14,940 --> 00:16:23,100
one example

00:16:16,350 --> 00:16:27,800
who we are what food in Hawaii we can

00:16:23,100 --> 00:16:30,330
utilizing MySQL replication one server

00:16:27,800 --> 00:16:33,540
receives transactions

00:16:30,330 --> 00:16:38,250
it will implicate to another slave

00:16:33,540 --> 00:16:42,900
planning a different dish center in this

00:16:38,250 --> 00:16:47,130
example but the center is located in

00:16:42,900 --> 00:16:50,330
eastern Japan and another one is in

00:16:47,130 --> 00:16:50,330
western Japan

00:17:52,480 --> 00:18:00,610
sir

00:17:53,870 --> 00:18:00,610
I like chewy

00:18:01,059 --> 00:18:14,470
how we are resource usage then I would

00:18:07,460 --> 00:18:14,470
have to to us in by for any work

00:18:16,330 --> 00:18:21,679
that brings us to the end of the

00:18:18,950 --> 00:18:25,250
presentation thank you so much for your

00:18:21,679 --> 00:18:30,440
interest interest and attention please

00:18:25,250 --> 00:18:33,919
find our online games or upstarts when

00:18:30,440 --> 00:18:37,340
playing those you will remember those

00:18:33,919 --> 00:18:53,840
games are landing on my Asteria thank

00:18:37,340 --> 00:18:56,409
you we have a few minutes for questions

00:18:53,840 --> 00:18:56,409
maybe

00:19:01,350 --> 00:19:04,070

YouTube URL: https://www.youtube.com/watch?v=pi4d_KvUpcY


