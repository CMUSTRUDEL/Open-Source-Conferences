Title: Accelerating container network with channel based IO - Rony Efraim, Or Gerlitz
Publication date: 2016-10-08
Playlist: Netdev 1.2 - Day 3 - Friday October 7, 2016
Description: 
	http://netdevconf.org/1.2/session.html?rony-efraim-2
Captions: 
	00:00:20,730 --> 00:00:23,940
select phone

00:00:25,010 --> 00:00:27,070
you

00:00:29,060 --> 00:00:40,710
should be fine testing one two three yes

00:00:33,210 --> 00:00:43,980
good ok so again my name is Ronnie fry

00:00:40,710 --> 00:00:48,780
for mellanox and I have with me or galit

00:00:43,980 --> 00:00:52,050
also for mellanox m and we want to talk

00:00:48,780 --> 00:00:58,550
about container and especially how to

00:00:52,050 --> 00:00:58,550
accelerate the networking for containers

00:01:00,350 --> 00:01:07,200
so i would start and describe what the

00:01:04,500 --> 00:01:19,619
how can you connect a compare container

00:01:07,200 --> 00:01:21,960
to the network today just once okay so

00:01:19,619 --> 00:01:25,320
of course we have a proprietary

00:01:21,960 --> 00:01:30,570
connections of sockets but we are more

00:01:25,320 --> 00:01:33,899
interesting in networking like real

00:01:30,570 --> 00:01:38,720
networking stuff and so of course we

00:01:33,899 --> 00:01:44,940
have an obvious let's can do a bridging

00:01:38,720 --> 00:01:50,039
we can have a lil Oxbridge we can either

00:01:44,940 --> 00:01:53,340
tech as a entire Nick and give it a to a

00:01:50,039 --> 00:01:55,410
container all the other thing that we're

00:01:53,340 --> 00:01:57,330
working most I think most of the

00:01:55,410 --> 00:02:04,560
customer working today with an muk

00:01:57,330 --> 00:02:06,660
villain and IP villain and currently

00:02:04,560 --> 00:02:11,970
today the mock villain can have

00:02:06,660 --> 00:02:17,910
acceleration of the in order to have a

00:02:11,970 --> 00:02:19,120
cube per per McQuillan and yes this is

00:02:17,910 --> 00:02:23,290
Jones V

00:02:19,120 --> 00:02:25,629
like that have accelerated masculine so

00:02:23,290 --> 00:02:30,010
it's something that is already we have

00:02:25,629 --> 00:02:32,260
today and we also have the don't

00:02:30,010 --> 00:02:33,909
remember the name with this excessive

00:02:32,260 --> 00:02:39,190
networking is an abdominal graphing

00:02:33,909 --> 00:02:42,549
company that uses vpf and my guest ve th

00:02:39,190 --> 00:02:48,970
to to do all their provision continues

00:02:42,549 --> 00:02:52,840
and asuka we can understand some of them

00:02:48,970 --> 00:02:54,940
are manageable and someone or not the

00:02:52,840 --> 00:02:57,940
mac villa on the IP villain are not

00:02:54,940 --> 00:02:59,500
manageable it's like a standard switch

00:02:57,940 --> 00:03:03,220
you can set this is the mock interview

00:02:59,500 --> 00:03:09,670
and you don't have any object that you

00:03:03,220 --> 00:03:14,879
can manage in the default namespace very

00:03:09,670 --> 00:03:14,879
laughing wait

00:03:17,510 --> 00:03:25,680
yes well mean that there's a question

00:03:22,200 --> 00:03:28,170
you give a container some interface to

00:03:25,680 --> 00:03:30,540
interact with networking so the question

00:03:28,170 --> 00:03:32,069
is once you do that does this interface

00:03:30,540 --> 00:03:34,709
completely disappears from the

00:03:32,069 --> 00:03:36,390
hypervisor or you have like like this

00:03:34,709 --> 00:03:37,980
which case you have some representation

00:03:36,390 --> 00:03:40,709
of what you gave them so you can query

00:03:37,980 --> 00:03:41,939
statistics you can monitor them so if

00:03:40,709 --> 00:03:44,609
you give them a mark of the line and you

00:03:41,939 --> 00:03:46,530
don't see it anymore on your side of the

00:03:44,609 --> 00:03:50,569
namespace of the hypervisor it's

00:03:46,530 --> 00:03:53,189
problematic we believe a bit in a way

00:03:50,569 --> 00:03:57,290
but you want to just use the statistics

00:03:53,189 --> 00:03:57,290
they are running now so how would you

00:03:57,470 --> 00:04:02,400
can run I p dash namespace and get ready

00:04:00,510 --> 00:04:05,849
just exam yeah that's that to get

00:04:02,400 --> 00:04:08,819
statistics but if you want to like to

00:04:05,849 --> 00:04:11,040
have an ACL so we do you program the ACL

00:04:08,819 --> 00:04:13,739
if they are allowed to present a cell

00:04:11,040 --> 00:04:15,930
it's bad and so if you have

00:04:13,739 --> 00:04:22,770
representation of whether you gave them

00:04:15,930 --> 00:04:25,260
you can go get them okay so if you think

00:04:22,770 --> 00:04:29,610
like a switch like a managed switch so

00:04:25,260 --> 00:04:33,330
you have the the two part of the of the

00:04:29,610 --> 00:04:36,710
link you have the part that is you give

00:04:33,330 --> 00:04:40,800
their virtual make the container and

00:04:36,710 --> 00:04:43,169
this is the and the device of course and

00:04:40,800 --> 00:04:46,889
you have the other part of the of the

00:04:43,169 --> 00:04:48,449
wire that if it's unmanaged so you don't

00:04:46,889 --> 00:04:50,880
have you don't see this you don't have a

00:04:48,449 --> 00:04:53,490
representation for it but if listen if

00:04:50,880 --> 00:04:56,570
you want to manage this port you need to

00:04:53,490 --> 00:04:59,789
have a representation for it and and

00:04:56,570 --> 00:05:01,710
then you can try to do things you of

00:04:59,789 --> 00:05:05,849
course you can read counters but you can

00:05:01,710 --> 00:05:07,800
do all the ACLS you can do a bunch of

00:05:05,849 --> 00:05:10,800
things that you can you can do import

00:05:07,800 --> 00:05:14,940
what you need someone to point on but I

00:05:10,800 --> 00:05:17,430
want to do something to this channel but

00:05:14,940 --> 00:05:21,449
in order to do that you must have to

00:05:17,430 --> 00:05:25,830
have a representation in the default

00:05:21,449 --> 00:05:28,090
domain that's that's the most difference

00:05:25,830 --> 00:05:30,300
I think between a Mac villain

00:05:28,090 --> 00:05:34,480
and when you are working with the bridge

00:05:30,300 --> 00:05:36,910
it's a it's a linux bridge or or vs

00:05:34,480 --> 00:05:39,040
bridge allah other kind of something

00:05:36,910 --> 00:05:42,540
that's blue bridging because you can see

00:05:39,040 --> 00:05:50,710
you can have a part of it also in the

00:05:42,540 --> 00:05:52,540
default domain so i think and when we do

00:05:50,710 --> 00:05:54,970
when we want to have hardware

00:05:52,540 --> 00:05:57,520
acceleration think that's the same issue

00:05:54,970 --> 00:05:59,350
that we had with sr IOV we have a

00:05:57,520 --> 00:06:03,700
virtual function we get the virtual

00:05:59,350 --> 00:06:06,720
function to the vm and you can't and the

00:06:03,700 --> 00:06:11,229
management for this model like was

00:06:06,720 --> 00:06:14,580
something that we we did but it was very

00:06:11,229 --> 00:06:18,850
limited so you had the IP link laughs

00:06:14,580 --> 00:06:22,419
said so we can set specific attribute on

00:06:18,850 --> 00:06:25,720
this virtual function and we notice that

00:06:22,419 --> 00:06:29,440
we are lacking many things that we want

00:06:25,720 --> 00:06:32,410
to do so and that's the idea we change

00:06:29,440 --> 00:06:35,050
in the HRV that we have a representation

00:06:32,410 --> 00:06:38,200
for this virtual function in the

00:06:35,050 --> 00:06:41,680
hypervisor so so really I think we have

00:06:38,200 --> 00:06:43,210
maybe it's above so many two points we

00:06:41,680 --> 00:06:46,300
want to put on the table now so one is

00:06:43,210 --> 00:06:49,180
that today you have like many different

00:06:46,300 --> 00:06:52,539
ways to approach a container macvean in

00:06:49,180 --> 00:06:56,070
google you do the IP villain and thomas

00:06:52,539 --> 00:06:58,840
and other people uses the V V th so

00:06:56,070 --> 00:07:00,250
that's one one domain of the problem

00:06:58,840 --> 00:07:02,650
that there are multiple ways to do that

00:07:00,250 --> 00:07:03,940
so if you want to accelerate what you're

00:07:02,650 --> 00:07:05,530
going to do do you accelerate all of

00:07:03,940 --> 00:07:07,510
them or you do something else which is

00:07:05,530 --> 00:07:10,330
maybe intel driver of known forever that

00:07:07,510 --> 00:07:14,050
does acceleration and in other vision

00:07:10,330 --> 00:07:16,300
what do people think that the methods

00:07:14,050 --> 00:07:18,970
which have representations for the

00:07:16,300 --> 00:07:22,389
difficult namespace are indeed the

00:07:18,970 --> 00:07:24,160
direction to go to so right right money

00:07:22,389 --> 00:07:26,529
that's maybe two questions that we put

00:07:24,160 --> 00:07:29,769
here jamali came later

00:07:26,529 --> 00:07:32,589
usually that's so it's also will have to

00:07:29,769 --> 00:07:34,449
have happy to hear your feedback so i

00:07:32,589 --> 00:07:37,329
think one thing to consider is just

00:07:34,449 --> 00:07:39,429
because an interface is in a child

00:07:37,329 --> 00:07:41,529
namespace doesn't necessarily mean that

00:07:39,429 --> 00:07:43,509
you have to give that child namespace

00:07:41,529 --> 00:07:45,489
the ability to arbitrarily configure it

00:07:43,509 --> 00:07:48,159
so you could have an IP VLAN interface

00:07:45,489 --> 00:07:51,429
where route and that namespace can't

00:07:48,159 --> 00:07:53,409
change things on it right so you had to

00:07:51,429 --> 00:07:57,719
be rootin the default namespace too so

00:07:53,409 --> 00:08:00,159
that's the natural can t call it a DM is

00:07:57,719 --> 00:08:04,119
not sure if this is implemented but like

00:08:00,159 --> 00:08:05,349
that's one approach right it does

00:08:04,119 --> 00:08:08,339
someone know okay look at these

00:08:05,349 --> 00:08:10,689
implemented no good guys know it you can

00:08:08,339 --> 00:08:12,159
if you have group there's others ways to

00:08:10,689 --> 00:08:15,009
do it as well you can buy mount the

00:08:12,159 --> 00:08:17,559
father network namespace and manipulate

00:08:15,009 --> 00:08:19,419
it that way sorry cookie so if a

00:08:17,559 --> 00:08:21,579
container is handed an interface they

00:08:19,419 --> 00:08:23,619
can do whatever they want no the

00:08:21,579 --> 00:08:26,649
complete opposite okay good I got in

00:08:23,619 --> 00:08:28,869
from even knowing it's there so they

00:08:26,649 --> 00:08:32,949
legal phrases they cannot set up a TC

00:08:28,869 --> 00:08:37,120
rule correct no big so then we want to

00:08:32,949 --> 00:08:38,949
limit the call a container that's that

00:08:37,120 --> 00:08:40,959
the container can't do anything saan is

00:08:38,949 --> 00:08:42,789
networking now I think I think that's

00:08:40,959 --> 00:08:47,410
probably continue secure is almost an

00:08:42,789 --> 00:08:50,230
oxymoron so you can you can you can go

00:08:47,410 --> 00:08:51,579
to host by mount enter it as IP

00:08:50,230 --> 00:08:54,819
nuttiness and do whatever the hell you

00:08:51,579 --> 00:08:57,490
want if you come from list yes that's

00:08:54,819 --> 00:09:01,269
but you're you're but as Mike was saying

00:08:57,490 --> 00:09:03,040
if Messi run the one you use the word

00:09:01,269 --> 00:09:07,660
darker but let's say use work talk and

00:09:03,040 --> 00:09:09,129
you copy you limit the a net admin you

00:09:07,660 --> 00:09:12,629
don't give access to me that mean then

00:09:09,129 --> 00:09:12,629
yes they can do it anything

00:09:14,760 --> 00:09:21,510
okay so a better solution will be that

00:09:18,090 --> 00:09:23,550
it will be limited to the ways the

00:09:21,510 --> 00:09:28,290
switch is located the switch is not in

00:09:23,550 --> 00:09:32,130
the container the switches inside I the

00:09:28,290 --> 00:09:35,190
different domain so here's the deal I'm

00:09:32,130 --> 00:09:38,970
so sorry so the configuration need to

00:09:35,190 --> 00:09:41,160
come from there because think like a top

00:09:38,970 --> 00:09:44,550
of racks which we do your configuration

00:09:41,160 --> 00:09:48,230
you don't do it on the server you do the

00:09:44,550 --> 00:09:48,230
configuration on the top of switch

00:09:48,530 --> 00:09:59,850
depend so Mike no sir so for something

00:09:58,470 --> 00:10:02,160
like I pee pee when there's kind of the

00:09:59,850 --> 00:10:03,510
lower low level configuration and the

00:10:02,160 --> 00:10:04,860
high level configuration and the high

00:10:03,510 --> 00:10:06,240
level configuration is something that

00:10:04,860 --> 00:10:08,520
people in the namespace should be able

00:10:06,240 --> 00:10:10,110
to change like I can remove IP addresses

00:10:08,520 --> 00:10:11,940
and then kind of a low level

00:10:10,110 --> 00:10:13,890
configuration is kind of the stuff that

00:10:11,940 --> 00:10:16,110
they shouldn't be able to change right

00:10:13,890 --> 00:10:17,670
and I think that's the natural way to

00:10:16,110 --> 00:10:19,590
split things out I don't think this is

00:10:17,670 --> 00:10:21,270
currently done it cities is not

00:10:19,590 --> 00:10:27,990
supported what you said i don't know i

00:10:21,270 --> 00:10:29,970
don't think it is but ok so i am so at

00:10:27,990 --> 00:10:31,920
this moment l three more in I pee wee

00:10:29,970 --> 00:10:34,980
lad does something similar it's all you

00:10:31,920 --> 00:10:38,850
can how only Allah can how is the IP

00:10:34,980 --> 00:10:40,410
address aside and there are those things

00:10:38,850 --> 00:10:43,820
which were planned I mean obviously a

00:10:40,410 --> 00:10:47,250
people ask that will get implemented but

00:10:43,820 --> 00:10:49,350
all the controls are in the default

00:10:47,250 --> 00:10:53,190
namespace all the policies that you

00:10:49,350 --> 00:10:55,710
apply all the equitable rules that you

00:10:53,190 --> 00:10:57,930
apply are in default namespace that you

00:10:55,710 --> 00:10:59,870
can put it for the chart in edgeways so

00:10:57,930 --> 00:11:02,940
it's it's kind of a secure model I

00:10:59,870 --> 00:11:06,810
should I shouldn't say secure model it's

00:11:02,940 --> 00:11:09,180
like a control model and you had to

00:11:06,810 --> 00:11:12,060
couple that with your user name space so

00:11:09,180 --> 00:11:15,300
that the admin privileges and the root

00:11:12,060 --> 00:11:19,160
privilege for the user who's running in

00:11:15,300 --> 00:11:19,160
certain age based our control

00:11:22,700 --> 00:11:31,220
okay so the question is do we need to

00:11:26,030 --> 00:11:36,350
have a things that we want to allow to

00:11:31,220 --> 00:11:41,150
do only from the default namespace I I

00:11:36,350 --> 00:11:42,860
think that we do so in order to that my

00:11:41,150 --> 00:11:48,170
first question was do we need a

00:11:42,860 --> 00:11:53,150
representation for IP or Mac Vela also

00:11:48,170 --> 00:11:55,550
and the default domain that's absolutely

00:11:53,150 --> 00:11:58,420
i mean mug villain is held to debug so

00:11:55,550 --> 00:12:02,510
anything that will give access to detail

00:11:58,420 --> 00:12:05,870
is useful yeah i think this means you

00:12:02,510 --> 00:12:08,420
but you know what does the Diploma the

00:12:05,870 --> 00:12:10,610
problem other so i know that people they

00:12:08,420 --> 00:12:12,470
use a lot I TV on deck and they

00:12:10,610 --> 00:12:14,300
contributed and then came to conference

00:12:12,470 --> 00:12:15,800
and so people use IP villain other

00:12:14,300 --> 00:12:18,800
people use not villain are these people

00:12:15,800 --> 00:12:20,690
use vth so so what do we do have to do

00:12:18,800 --> 00:12:24,260
now we have to do how do I flow to all

00:12:20,690 --> 00:12:25,880
of them presentation falls down or so we

00:12:24,260 --> 00:12:27,680
should start with McKinnon and takes

00:12:25,880 --> 00:12:29,330
under but you're jumping by the next

00:12:27,680 --> 00:12:31,610
well yes excuse me before hardware for

00:12:29,330 --> 00:12:34,820
this killer I want to conclude this psss

00:12:31,610 --> 00:12:36,710
do agree but we need any anybody think

00:12:34,820 --> 00:12:40,150
that we don't need to have a

00:12:36,710 --> 00:12:44,650
representation for this port in the

00:12:40,150 --> 00:12:44,650
default domain default namespace then

00:12:46,030 --> 00:12:52,330
cuz it's you it's just a waste rabbit

00:12:54,250 --> 00:12:59,900
but if its a Mac even an IP then there's

00:12:57,950 --> 00:13:02,030
always already a software of semantics

00:12:59,900 --> 00:13:05,600
that goes along with them do you really

00:13:02,030 --> 00:13:09,740
need to do additional management on it

00:13:05,600 --> 00:13:13,790
at that point I could be that's in mock

00:13:09,740 --> 00:13:15,860
villain you don't you don't need to

00:13:13,790 --> 00:13:19,340
because currently is not supporting

00:13:15,860 --> 00:13:21,560
anything that's behind his McMillan but

00:13:19,340 --> 00:13:24,170
if you want to have an ACL on this Mac

00:13:21,560 --> 00:13:26,300
Vela remember how do you do that today

00:13:24,170 --> 00:13:29,330
today you have the maximum in the new

00:13:26,300 --> 00:13:30,800
assign a TC filter or something to it

00:13:29,330 --> 00:13:33,440
but

00:13:30,800 --> 00:13:35,149
and then you put the object I mean the

00:13:33,440 --> 00:13:37,399
container itself can only do this right

00:13:35,149 --> 00:13:39,649
yeah but you let the container now

00:13:37,399 --> 00:13:41,899
manage this there but that's the current

00:13:39,649 --> 00:13:44,300
semantics we have a magazine and I p.m.

00:13:41,899 --> 00:13:47,510
today yeah if you want to do it to it to

00:13:44,300 --> 00:13:50,779
do it inside the the default namespace

00:13:47,510 --> 00:13:52,880
how you can do it you can't today even

00:13:50,779 --> 00:13:55,279
if that's a problem I ain't you know a

00:13:52,880 --> 00:13:58,310
general thing expanding gas I mean he

00:13:55,279 --> 00:14:02,510
has other people soon so do we agree

00:13:58,310 --> 00:14:03,649
that are we done that I'm just pointed

00:14:02,510 --> 00:14:05,660
out that I think that you were changing

00:14:03,649 --> 00:14:08,750
the semantics from the existing software

00:14:05,660 --> 00:14:10,160
interface as well so it's like rage if

00:14:08,750 --> 00:14:11,360
you do the presentation to something

00:14:10,160 --> 00:14:13,010
doesn't mean you change us and I think

00:14:11,360 --> 00:14:15,079
they even that they don't know that you

00:14:13,010 --> 00:14:16,399
did it so I John you're not talking

00:14:15,079 --> 00:14:18,980
about my feelin you're talking about the

00:14:16,399 --> 00:14:21,589
other the IP villain and which are

00:14:18,980 --> 00:14:23,209
referring as being changed semantics so

00:14:21,589 --> 00:14:25,480
today if you create a mac view and the

00:14:23,209 --> 00:14:29,500
lights and you assign a device to a

00:14:25,480 --> 00:14:34,040
namespace right and I'm source can add a

00:14:29,500 --> 00:14:35,600
IP filters and sure nough TC and Q disks

00:14:34,040 --> 00:14:38,839
and all sorts of things to it you don't

00:14:35,600 --> 00:14:40,339
have away from the house yay he added to

00:14:38,839 --> 00:14:44,750
the magneto mile away from the hostess

00:14:40,339 --> 00:14:46,399
cool whip you're right that however is

00:14:44,750 --> 00:14:48,140
that what you're saying is changing

00:14:46,399 --> 00:14:49,880
semantics yeah let's just rooms I'm just

00:14:48,140 --> 00:14:51,170
making the observation that it's

00:14:49,880 --> 00:14:52,670
different than it is today I'm not

00:14:51,170 --> 00:14:54,350
saying I'm not saying it's bad okay

00:14:52,670 --> 00:14:56,360
later that it shouldn't be done I'm just

00:14:54,350 --> 00:14:59,270
no swinging out that there's a change in

00:14:56,360 --> 00:15:02,860
how software solution that use to be

00:14:59,270 --> 00:15:06,920
allowed but do you have an issue with a

00:15:02,860 --> 00:15:08,209
am old way that's not allowed I don't

00:15:06,920 --> 00:15:10,190
think I have an issue with it either way

00:15:08,209 --> 00:15:11,240
I'm just pointing out that that today

00:15:10,190 --> 00:15:13,579
you don't have a way to do this and

00:15:11,240 --> 00:15:15,410
software either I think and Alex's go to

00:15:13,579 --> 00:15:17,600
say something guess what this is not

00:15:15,410 --> 00:15:18,860
secured that's a problem well see the

00:15:17,600 --> 00:15:21,649
way I see it the problem is it's

00:15:18,860 --> 00:15:24,860
creating a new hybrid that's almost a ve

00:15:21,649 --> 00:15:27,800
an almost magdalene but not really

00:15:24,860 --> 00:15:29,899
either because if i'm not mistaken with

00:15:27,800 --> 00:15:33,170
your bf port representer then what we

00:15:29,899 --> 00:15:34,760
had now have is I can translate into

00:15:33,170 --> 00:15:36,140
that VF port representing it's gonna be

00:15:34,760 --> 00:15:36,410
an alternate path that the host will

00:15:36,140 --> 00:15:41,269
have

00:15:36,410 --> 00:15:42,529
remember to go from there into the they

00:15:41,269 --> 00:15:44,389
actually know it so I create a new route

00:15:42,529 --> 00:15:47,690
because with mac VLAN you can't hairpin

00:15:44,389 --> 00:15:50,600
can yours is it okay so yeah so

00:15:47,690 --> 00:15:52,279
basically it creates like a an automatic

00:15:50,600 --> 00:15:53,949
hairpin interface for us to now turn

00:15:52,279 --> 00:15:56,959
around on which is going to be confusing

00:15:53,949 --> 00:15:58,910
well I guess just maybe not I don't know

00:15:56,959 --> 00:16:01,670
this is where I starts getting confusing

00:15:58,910 --> 00:16:04,670
is yet right because we end up with the

00:16:01,670 --> 00:16:05,990
PF or whatever the interface was you

00:16:04,670 --> 00:16:07,699
create the Magdalen on is going to be

00:16:05,990 --> 00:16:09,350
was originally capable of doing hairpin

00:16:07,699 --> 00:16:10,850
now you have this extra interface that's

00:16:09,350 --> 00:16:12,019
going to require a hairpin that's gonna

00:16:10,850 --> 00:16:15,740
be sitting up on your switch somewhere

00:16:12,019 --> 00:16:18,589
and so it really might be an advantage

00:16:15,740 --> 00:16:19,819
you have a ga ga paper from knowings

00:16:18,589 --> 00:16:21,860
presented it in different appears

00:16:19,819 --> 00:16:24,680
netcong netconf Magna dev and his

00:16:21,860 --> 00:16:26,899
presentation is under a few things like

00:16:24,680 --> 00:16:29,540
mobile for switching for both containers

00:16:26,899 --> 00:16:31,939
in this area absolutely without a doubt

00:16:29,540 --> 00:16:34,819
need a way to debug this thing and we

00:16:31,939 --> 00:16:36,500
can't today right once it's it's hidden

00:16:34,819 --> 00:16:38,240
into the container there's no way I

00:16:36,500 --> 00:16:43,069
figure out what why something got

00:16:38,240 --> 00:16:44,930
dropped what's in there now probably the

00:16:43,069 --> 00:16:50,449
as a port on the host may be the best

00:16:44,930 --> 00:16:52,670
way to do that so I think both the

00:16:50,449 --> 00:16:55,009
models are required one is like secure

00:16:52,670 --> 00:16:57,079
container and unsecured container kind

00:16:55,009 --> 00:17:00,019
of thing so that in a secure container

00:16:57,079 --> 00:17:02,420
I'm sorry not secure trusted container

00:17:00,019 --> 00:17:05,750
versus untrusted container where you can

00:17:02,420 --> 00:17:09,400
say everything is allowed inside the

00:17:05,750 --> 00:17:12,169
container and in an untrusted container

00:17:09,400 --> 00:17:14,480
if the other things are taken care you

00:17:12,169 --> 00:17:16,159
can allow applying policies in the

00:17:14,480 --> 00:17:19,610
default namespace will not allow inside

00:17:16,159 --> 00:17:21,650
the namespace yeah I think what this

00:17:19,610 --> 00:17:23,150
comes down to this isn't really IP via

00:17:21,650 --> 00:17:25,539
an immaculate and this is harder

00:17:23,150 --> 00:17:27,640
accelerated bees is what it seems like

00:17:25,539 --> 00:17:31,030
but the quick before

00:17:27,640 --> 00:17:33,160
how accelerated we wanted we have to go

00:17:31,030 --> 00:17:36,160
there because time is today we try to

00:17:33,160 --> 00:17:38,440
actually see if we have grumps and since

00:17:36,160 --> 00:17:39,880
I think VF is the wrong way to look at

00:17:38,440 --> 00:17:41,620
it because it gives you a pair of

00:17:39,880 --> 00:17:43,150
devices and then kind of packets come

00:17:41,620 --> 00:17:44,500
out of the other side and you have to do

00:17:43,150 --> 00:17:46,510
something with them route them or

00:17:44,500 --> 00:17:48,310
something what you kind of are really

00:17:46,510 --> 00:17:51,040
looking at is more like a bonding

00:17:48,310 --> 00:17:52,990
interface style where you you create a

00:17:51,040 --> 00:17:54,520
mad fool on device you leave it in the

00:17:52,990 --> 00:17:56,770
default namespace and then you kind of

00:17:54,520 --> 00:17:59,470
bond a device on top of that bag of

00:17:56,770 --> 00:18:01,750
allah and move the bond into the into

00:17:59,470 --> 00:18:03,280
the child namespace and then you kind of

00:18:01,750 --> 00:18:05,260
have to set the best of both world

00:18:03,280 --> 00:18:07,090
you've got an interface inside of the

00:18:05,260 --> 00:18:08,920
namespace that you can manage from

00:18:07,090 --> 00:18:10,840
within the namespace set up anything you

00:18:08,920 --> 00:18:12,640
want there but you also kind of have the

00:18:10,840 --> 00:18:15,370
interface in the default namespace where

00:18:12,640 --> 00:18:18,700
you could potentially add filters and

00:18:15,370 --> 00:18:21,730
wine either bottle yes it is because you

00:18:18,700 --> 00:18:24,490
are very select device to device tie

00:18:21,730 --> 00:18:26,290
that I'm not I don't really see how else

00:18:24,490 --> 00:18:28,210
you can get that I like I mean clearly

00:18:26,290 --> 00:18:31,000
bond isn't entirely right approach

00:18:28,210 --> 00:18:32,830
driver right but but like if you do it

00:18:31,000 --> 00:18:34,750
with a VF pair then you end up well I

00:18:32,830 --> 00:18:36,670
guess you could bridge back view on with

00:18:34,750 --> 00:18:39,070
thief and then move the other side of

00:18:36,670 --> 00:18:41,100
beef into the namespace do something

00:18:39,070 --> 00:18:45,550
like that you kind of need this way to

00:18:41,100 --> 00:18:47,590
to to have like something on top you

00:18:45,550 --> 00:18:49,480
basically the way to kind of split the

00:18:47,590 --> 00:18:51,880
interface into an upper level in a lower

00:18:49,480 --> 00:18:54,550
level and remove the upper level into

00:18:51,880 --> 00:18:56,500
the channel name space so the present

00:18:54,550 --> 00:19:01,390
there a presentation is the lower level

00:18:56,500 --> 00:19:07,930
that's the switchboard yeah okay so okay

00:19:01,390 --> 00:19:09,580
so just one more comment I mean it

00:19:07,930 --> 00:19:11,680
doesn't have to be a part the way to

00:19:09,580 --> 00:19:17,100
have visibility into what's going series

00:19:11,680 --> 00:19:17,100
slide yeah now you have it oh sorry

00:19:18,230 --> 00:19:25,140
go back so actually kind of going back

00:19:23,309 --> 00:19:27,510
there's actually an annoyance I've

00:19:25,140 --> 00:19:30,000
always had will live both bridge and

00:19:27,510 --> 00:19:31,830
bonding that the slave interface is to

00:19:30,000 --> 00:19:34,350
bridge and bonding aren't really

00:19:31,830 --> 00:19:36,179
full-blown interfaces and they shouldn't

00:19:34,350 --> 00:19:37,890
show up as full-blown interfaces they

00:19:36,179 --> 00:19:41,640
should show up as just bottom half

00:19:37,890 --> 00:19:43,980
interfaces just go back one slide so

00:19:41,640 --> 00:19:46,289
just haven seen so Jesus is on the right

00:19:43,980 --> 00:19:53,570
or not on the right side is judy's

00:19:46,289 --> 00:19:53,570
slides right this is the representation

00:19:54,080 --> 00:19:58,169
that's a representation yeah that's

00:19:56,309 --> 00:20:00,870
that's three slides on a conf that's

00:19:58,169 --> 00:20:03,269
that's confidential representation model

00:20:00,870 --> 00:20:05,279
for a powerful chews asian or for

00:20:03,269 --> 00:20:08,190
continuous so you have you have the

00:20:05,279 --> 00:20:15,929
switch port and you have the part that

00:20:08,190 --> 00:20:20,130
you were given to the container it's

00:20:15,929 --> 00:20:22,919
kind of a switch and the end of and the

00:20:20,130 --> 00:20:25,080
server and the other side yeah I'm

00:20:22,919 --> 00:20:26,760
arguing with the value of doing this I

00:20:25,080 --> 00:20:29,010
just wanted to point out that it's not

00:20:26,760 --> 00:20:32,309
McNamara and we previously made lots of

00:20:29,010 --> 00:20:35,429
statements about keeping software kind

00:20:32,309 --> 00:20:38,159
of semantics yes okay we need to solve

00:20:35,429 --> 00:20:40,500
the visibility problem if it's being

00:20:38,159 --> 00:20:43,230
exposed as a port representer or some

00:20:40,500 --> 00:20:47,340
other scheme and I think I see value in

00:20:43,230 --> 00:20:49,769
being able to control t CEOs or routes

00:20:47,340 --> 00:20:53,070
oh sorry whatever that sport based from

00:20:49,769 --> 00:20:55,500
the host because typically the owner of

00:20:53,070 --> 00:20:57,630
the container sits on the host and is

00:20:55,500 --> 00:21:04,860
there at least the control of the of the

00:20:57,630 --> 00:21:05,950
container again just next so this is

00:21:04,860 --> 00:21:08,470
this

00:21:05,950 --> 00:21:10,690
architecture of the G we're proposing is

00:21:08,470 --> 00:21:12,669
actually unifying model see if you have

00:21:10,690 --> 00:21:14,230
limited virtualization your server

00:21:12,669 --> 00:21:16,120
becomes top of the racks which they

00:21:14,230 --> 00:21:18,519
switch between continuous between VN

00:21:16,120 --> 00:21:20,320
between I don't know what so we're going

00:21:18,519 --> 00:21:24,429
to be good to have some sort of unified

00:21:20,320 --> 00:21:27,870
model to the switching sure so because

00:21:24,429 --> 00:21:27,870
you say hey you change the semantics of

00:21:27,960 --> 00:21:34,120
then users are using Mac the event today

00:21:31,019 --> 00:21:36,610
right and if you if all of a sudden the

00:21:34,120 --> 00:21:40,120
way that Mac Vela and devices or manage

00:21:36,610 --> 00:21:42,190
changes that's f is a change and we

00:21:40,120 --> 00:21:44,200
should you know I didn't technology in

00:21:42,190 --> 00:21:46,269
sa reine differently I think what would

00:21:44,200 --> 00:21:47,919
be a couple of years ago wasn't excuse

00:21:46,269 --> 00:21:50,139
me a mistake the way we got today the

00:21:47,919 --> 00:21:52,690
legacy mode and those of us were heavily

00:21:50,139 --> 00:21:56,100
involved thats a little the switcher I'm

00:21:52,690 --> 00:22:01,659
not unbiased of course but but but here

00:21:56,100 --> 00:22:03,580
again so um a couple years back that

00:22:01,659 --> 00:22:06,460
proposed a series of patches that allows

00:22:03,580 --> 00:22:08,440
you from IP waiting to say add switch

00:22:06,460 --> 00:22:09,850
port type something like this is you

00:22:08,440 --> 00:22:11,470
tell it how many q's it needs and stuff

00:22:09,850 --> 00:22:14,409
like this and it would create a net

00:22:11,470 --> 00:22:16,240
death and that netdev it was the sort of

00:22:14,409 --> 00:22:18,039
management front back end for all this

00:22:16,240 --> 00:22:19,630
kind of stuff they will reject will be

00:22:18,039 --> 00:22:21,760
in the suggestion was to use something

00:22:19,630 --> 00:22:24,389
like McNamara because there's already an

00:22:21,760 --> 00:22:27,730
existing infrastructure around it and

00:22:24,389 --> 00:22:29,559
and I think that works fairly well but

00:22:27,730 --> 00:22:30,730
the problem here is your point out that

00:22:29,559 --> 00:22:33,070
is if you don't trust your container

00:22:30,730 --> 00:22:34,870
then how do you consult rules and

00:22:33,070 --> 00:22:36,580
filters and stuff on it so maybe it's

00:22:34,870 --> 00:22:38,169
worth revisiting this idea of having

00:22:36,580 --> 00:22:39,730
them I think this way you're suggesting

00:22:38,169 --> 00:22:44,399
as well is that there's a management

00:22:39,730 --> 00:22:44,399
port bow need it so

00:22:45,110 --> 00:22:50,370
so they doesn't even have to be money

00:22:47,940 --> 00:22:52,680
you input as long as you can control it

00:22:50,370 --> 00:22:55,050
through some interface what almost looks

00:22:52,680 --> 00:23:04,640
like the easy thing to do it's the most

00:22:55,050 --> 00:23:08,940
natural I guess okay okay so i think we

00:23:04,640 --> 00:23:12,690
familiar what what can do with a virtual

00:23:08,940 --> 00:23:15,540
function but and the easy implementation

00:23:12,690 --> 00:23:18,000
could be just probed the virtual

00:23:15,540 --> 00:23:20,330
function into the the host and you can

00:23:18,000 --> 00:23:24,540
give each of them for our container and

00:23:20,330 --> 00:23:27,000
you have a kind of solution but this

00:23:24,540 --> 00:23:29,460
solution is limited because currently

00:23:27,000 --> 00:23:33,470
you can't have a 10,000 virtual

00:23:29,460 --> 00:23:38,820
functions for Nick but we can have

00:23:33,470 --> 00:23:42,410
10,000 or even more of rings of kills in

00:23:38,820 --> 00:23:46,560
the intern sitting in a single Nick and

00:23:42,410 --> 00:23:52,500
I think what we want to do is to give

00:23:46,560 --> 00:23:55,110
each container a dedicated Q that is

00:23:52,500 --> 00:23:56,940
managed by the hardware not of course we

00:23:55,110 --> 00:23:58,980
are talking about the acceleration it

00:23:56,940 --> 00:24:01,200
with other it can do of course by

00:23:58,980 --> 00:24:03,980
software but if you want to accelerate

00:24:01,200 --> 00:24:09,600
it with hardware so it means that every

00:24:03,980 --> 00:24:14,100
container will get a delicate cue from

00:24:09,600 --> 00:24:18,480
the hardware that can do at all the

00:24:14,100 --> 00:24:20,670
thing that said Nick can do it can do it

00:24:18,480 --> 00:24:24,130
can do this so you can do our says you

00:24:20,670 --> 00:24:28,390
can do we can run a CA

00:24:24,130 --> 00:24:32,230
on this particular link and many things

00:24:28,390 --> 00:24:34,990
that we can do and I think that look

00:24:32,230 --> 00:24:36,670
like proprietary things that's not

00:24:34,990 --> 00:24:40,900
proprietary its proprietor

00:24:36,670 --> 00:24:46,480
implementation and when I mean looking

00:24:40,900 --> 00:24:48,280
on it I see a vendor driver as John said

00:24:46,480 --> 00:24:50,950
that's what he will talk is open during

00:24:48,280 --> 00:24:53,230
a beginning so it's look like it's a

00:24:50,950 --> 00:24:56,770
proprietary drive effects of propriety

00:24:53,230 --> 00:25:01,030
it's a vendor driver a very tight tight

00:24:56,770 --> 00:25:04,630
and very small one that's every vendor

00:25:01,030 --> 00:25:06,640
can can implement for his card like a

00:25:04,630 --> 00:25:10,810
virtual function driver official

00:25:06,640 --> 00:25:13,180
function and Driver and that is creating

00:25:10,810 --> 00:25:18,430
on the file with an IP IP link add

00:25:13,180 --> 00:25:20,350
command and when you create the the port

00:25:18,430 --> 00:25:22,900
that's the net device that you give to

00:25:20,350 --> 00:25:25,690
the container you also can create the

00:25:22,900 --> 00:25:28,360
other part of it like a like a ve th

00:25:25,690 --> 00:25:30,280
that you have two ports when you give to

00:25:28,360 --> 00:25:32,190
the container and want to live in the

00:25:30,280 --> 00:25:36,430
host and you can connect it to a bridge

00:25:32,190 --> 00:25:40,750
so we can have the same intelligent here

00:25:36,430 --> 00:25:44,500
and then you can control the forwarding

00:25:40,750 --> 00:25:48,700
with with if we want to do it with a

00:25:44,500 --> 00:25:52,420
linux bridge with an obvious with just

00:25:48,700 --> 00:25:54,490
like TC or everything that's we want to

00:25:52,420 --> 00:25:57,640
manage how you folding the traffic but

00:25:54,490 --> 00:26:00,220
like just to say every Mac Mac villain

00:25:57,640 --> 00:26:03,720
like this go to this port so we can

00:26:00,220 --> 00:26:07,030
manage it with by TT or we buy any

00:26:03,720 --> 00:26:15,420
matter anyway that's we think is a good

00:26:07,030 --> 00:26:15,420
too are you what your talk about it

00:26:24,950 --> 00:26:31,110
so I'd like to meet you any questions so

00:26:27,389 --> 00:26:33,539
yeah so when so there's some richness

00:26:31,110 --> 00:26:34,980
and how the offloads that can be applied

00:26:33,539 --> 00:26:36,750
to continuous you know there are like

00:26:34,980 --> 00:26:39,840
the what tom was listening to five

00:26:36,750 --> 00:26:44,669
conventional floats of checksums and TSO

00:26:39,840 --> 00:26:46,169
RSS and stuff so you can come with a 50

00:26:44,669 --> 00:26:47,970
kilogram hammer and say okay I'm going

00:26:46,169 --> 00:26:49,500
to send a virtual function to each

00:26:47,970 --> 00:26:51,509
container but this is not scalable and

00:26:49,500 --> 00:26:53,639
that's usable for many people so you

00:26:51,509 --> 00:26:55,379
would but you still modern weeks have

00:26:53,639 --> 00:26:56,879
thousands or tens of thousands of

00:26:55,379 --> 00:26:59,190
millions of rings so you can assign

00:26:56,879 --> 00:27:02,309
rings how the Rings to container and

00:26:59,190 --> 00:27:03,750
this today Jones muc-off loaded have

00:27:02,309 --> 00:27:06,330
accelerated Mike villain with some

00:27:03,750 --> 00:27:08,580
people call vm DQ you can create the

00:27:06,330 --> 00:27:11,879
imac villain device which already

00:27:08,580 --> 00:27:14,730
especially uses some ring on the driver

00:27:11,879 --> 00:27:16,379
that are assigned to this container but

00:27:14,730 --> 00:27:18,389
the question we try to pose here if you

00:27:16,379 --> 00:27:21,659
want to go beyond the dedicated rings we

00:27:18,389 --> 00:27:29,399
want to use although all this basic

00:27:21,659 --> 00:27:32,159
hardware stuff do we want to do that

00:27:29,399 --> 00:27:33,840
each vendor will extend their draw

00:27:32,159 --> 00:27:35,129
interval metals will extend our driver

00:27:33,840 --> 00:27:38,820
that you will be able to create an

00:27:35,129 --> 00:27:41,399
instance of mx-5 of ROI for TE that goes

00:27:38,820 --> 00:27:45,179
to this container or do we want to stick

00:27:41,399 --> 00:27:46,559
to Jones approach of from well I think

00:27:45,179 --> 00:27:48,360
we already talked about this and there's

00:27:46,559 --> 00:27:49,649
a limit in the API right now that just

00:27:48,360 --> 00:27:52,679
needs to be fixed and then you can do

00:27:49,649 --> 00:27:55,230
whatever you want we hav I they're not

00:27:52,679 --> 00:27:56,789
via an API if you if the mac via API

00:27:55,230 --> 00:27:59,460
pass is an opaque pointer to the driver

00:27:56,789 --> 00:28:00,930
instead of a cue net index yes but

00:27:59,460 --> 00:28:03,870
that's

00:28:00,930 --> 00:28:05,460
things because but since 84 fix this

00:28:03,870 --> 00:28:07,470
detail you have a fail to stick to the

00:28:05,460 --> 00:28:09,930
counter perch or if you fix that detail

00:28:07,470 --> 00:28:12,630
then I 40 will start allocating BS is 4

00:28:09,930 --> 00:28:16,440
for these containers and then the vsi

00:28:12,630 --> 00:28:18,360
sir the same unit of driver is about

00:28:16,440 --> 00:28:19,920
this via sighs your hover construct you

00:28:18,360 --> 00:28:22,620
still want to expose to continuing the

00:28:19,920 --> 00:28:25,680
form of mark villain or you want and I

00:28:22,620 --> 00:28:28,050
30 instance together soon as I in the

00:28:25,680 --> 00:28:30,720
form of magma and this approach I think

00:28:28,050 --> 00:28:33,510
so yes I mean it's big and it's fully

00:28:30,720 --> 00:28:35,790
you'll be able to use everything she's a

00:28:33,510 --> 00:28:37,340
nut to have you can say I'd want for

00:28:35,790 --> 00:28:39,540
cues and then as long as we get the

00:28:37,340 --> 00:28:41,490
safety act which is an attorney okay by

00:28:39,540 --> 00:28:44,010
the way sometimes because I internal API

00:28:41,490 --> 00:28:47,340
correct yep then the drivers should know

00:28:44,010 --> 00:28:48,540
how to do OSS and to you soon and yeah I

00:28:47,340 --> 00:28:50,040
mean then it's just a matter of it

00:28:48,540 --> 00:28:52,650
making sure that night villain passes

00:28:50,040 --> 00:28:54,690
the controls through down to the PF

00:28:52,650 --> 00:28:56,340
correctly to allow these kind of

00:28:54,690 --> 00:29:00,020
transitions or control to happen

00:28:56,340 --> 00:29:03,810
rightness I also also think to like down

00:29:00,020 --> 00:29:06,420
the general approach but again this

00:29:03,810 --> 00:29:08,580
vanilla was I doing stuff that Google

00:29:06,420 --> 00:29:10,260
Thomas is not here so the question is I

00:29:08,580 --> 00:29:11,820
want to address you only get like a

00:29:10,260 --> 00:29:13,830
villain case and we're neglecting other

00:29:11,820 --> 00:29:15,090
cases see my concern with this is that

00:29:13,830 --> 00:29:17,340
it seems like it's going to break the

00:29:15,090 --> 00:29:22,140
standard Magdalene case in favor of this

00:29:17,340 --> 00:29:23,670
pseudo deep pair because a lot of

00:29:22,140 --> 00:29:25,470
behavior is going to change you set

00:29:23,670 --> 00:29:28,920
those currently on the Mac feeling and

00:29:25,470 --> 00:29:30,240
software it passes it down to the PF now

00:29:28,920 --> 00:29:32,580
you've got this completely different

00:29:30,240 --> 00:29:34,800
setup so someone sets up something in

00:29:32,580 --> 00:29:36,240
software which right now the case that

00:29:34,800 --> 00:29:37,980
you're having problems with is because I

00:29:36,240 --> 00:29:40,380
40 works a very specific way the base

00:29:37,980 --> 00:29:41,730
and where to this so you can't spawn via

00:29:40,380 --> 00:29:44,130
size right now because it creates the

00:29:41,730 --> 00:29:46,170
same mac address on the PF that would

00:29:44,130 --> 00:29:49,110
have for the mac VLAN but now the

00:29:46,170 --> 00:29:50,490
behavior changes because this device has

00:29:49,110 --> 00:29:52,500
the ability to set up completely

00:29:50,490 --> 00:29:53,520
separate rules on each mac nuin that if

00:29:52,500 --> 00:29:55,890
you don't have this

00:29:53,520 --> 00:29:58,020
where and this variation on the driver

00:29:55,890 --> 00:30:01,320
all of a sudden the software fall back

00:29:58,020 --> 00:30:04,800
doesn't match with what the expectations

00:30:01,320 --> 00:30:07,020
are for the driver so really I think

00:30:04,800 --> 00:30:09,810
what this is in the grand scheme of

00:30:07,020 --> 00:30:11,490
things this is much more of a you know

00:30:09,810 --> 00:30:13,290
it ends up being essentially separate

00:30:11,490 --> 00:30:16,320
net debs that your spine not necessarily

00:30:13,290 --> 00:30:19,170
maki lands yeah it's in your negative

00:30:16,320 --> 00:30:20,520
right right so like that's kind of

00:30:19,170 --> 00:30:22,200
department have a calling this even Mac

00:30:20,520 --> 00:30:23,540
VLAN because at this point this thing

00:30:22,200 --> 00:30:26,340
must be able to support i'm assuming

00:30:23,540 --> 00:30:28,710
multiple unicast and multiple multicast

00:30:26,340 --> 00:30:32,340
addresses theoretically right yeah and

00:30:28,710 --> 00:30:34,320
whereas software maculans ports one and

00:30:32,340 --> 00:30:36,540
it basically inherits all the MAC

00:30:34,320 --> 00:30:38,400
addresses of the PF things are being a

00:30:36,540 --> 00:30:40,620
ton of behaviors all change between the

00:30:38,400 --> 00:30:42,900
two I really think it opens us up to a

00:30:40,620 --> 00:30:44,550
ton of regressions when you look at the

00:30:42,900 --> 00:30:46,770
software in your face versus what this

00:30:44,550 --> 00:30:48,270
hardware interface to be capable of if

00:30:46,770 --> 00:30:50,310
anything you think it would hamstring

00:30:48,270 --> 00:30:52,620
them if they try to stick to this is Mac

00:30:50,310 --> 00:30:54,510
VLAN versus you know this is hardware

00:30:52,620 --> 00:30:59,370
accelerated be e Thor whatever else you

00:30:54,510 --> 00:31:00,900
want to call it XD PE BPF feelin so good

00:30:59,370 --> 00:31:02,880
I don't know really i mean that that

00:31:00,900 --> 00:31:05,640
implements everything on that list with

00:31:02,880 --> 00:31:09,600
the exception of qos everything else can

00:31:05,640 --> 00:31:11,610
be done is I've cd/dvd earth sir I said

00:31:09,600 --> 00:31:13,470
everything except for qos if it does

00:31:11,610 --> 00:31:15,150
everything on that list except for qos

00:31:13,470 --> 00:31:17,790
and then it's just a matter of

00:31:15,150 --> 00:31:19,410
offloading that EP PF into the neck so

00:31:17,790 --> 00:31:21,240
so really the data structure that holds

00:31:19,410 --> 00:31:23,160
all the information for all this

00:31:21,240 --> 00:31:27,450
configuration is the net dev struct

00:31:23,160 --> 00:31:30,000
right so we need a new some layer driver

00:31:27,450 --> 00:31:31,770
layer or new abstraction that does a

00:31:30,000 --> 00:31:36,920
netdev creation it's you know it's

00:31:31,770 --> 00:31:36,920
basically the mdq to write this

00:31:37,460 --> 00:31:41,430
understand but do they allow you to

00:31:39,630 --> 00:31:46,230
configure the net dev in such a way that

00:31:41,430 --> 00:31:48,030
the hardware will have the demo will

00:31:46,230 --> 00:31:49,710
have the ability to react to

00:31:48,030 --> 00:31:51,960
configuration changes so that the PF

00:31:49,710 --> 00:31:52,509
driver gets noticed that the that's the

00:31:51,960 --> 00:31:54,070
problem

00:31:52,509 --> 00:31:55,479
and even today right that's why I said

00:31:54,070 --> 00:31:57,879
you'd have to pass through the right

00:31:55,479 --> 00:31:59,679
configuration commands down to the PF so

00:31:57,879 --> 00:32:01,749
that so that things the changes can be

00:31:59,679 --> 00:32:03,129
made for configuration I'm just

00:32:01,749 --> 00:32:06,639
wondering if we just need to create a

00:32:03,129 --> 00:32:08,139
new you know one of a new virtual driver

00:32:06,639 --> 00:32:10,629
that would represent this kind of thing

00:32:08,139 --> 00:32:12,639
in the same manner and not break all the

00:32:10,629 --> 00:32:16,899
existing usages so much going on too

00:32:12,639 --> 00:32:19,409
yeah ish or you make the default not do

00:32:16,899 --> 00:32:23,769
this again like we have legacy

00:32:19,409 --> 00:32:25,179
verification yeah if you just someone

00:32:23,769 --> 00:32:26,829
has to go out of their way to configure

00:32:25,179 --> 00:32:28,569
it so it does this then that's populist

00:32:26,829 --> 00:32:30,249
okay no cuz if nothing else we could

00:32:28,569 --> 00:32:32,259
just call it like a switch dev d eath

00:32:30,249 --> 00:32:35,109
pair so that's essentially what this is

00:32:32,259 --> 00:32:37,149
it's going to be you have some in your

00:32:35,109 --> 00:32:38,649
face that goes into the container which

00:32:37,149 --> 00:32:40,959
is usually you either end of the beef

00:32:38,649 --> 00:32:42,609
pair and the one that's represented on

00:32:40,959 --> 00:32:45,729
the switch step and so we want to have

00:32:42,609 --> 00:32:49,599
control on the hosts I'd be eath portion

00:32:45,729 --> 00:32:53,609
of this and then the client side should

00:32:49,599 --> 00:32:55,719
have no control over much anything i

00:32:53,609 --> 00:32:59,469
would say slightly different than

00:32:55,719 --> 00:33:01,149
calling it ve 'the you may not have to

00:32:59,469 --> 00:33:03,489
pass packets between the control between

00:33:01,149 --> 00:33:06,429
the host and the container correct right

00:33:03,489 --> 00:33:09,279
right you if ya if you do it yes it's

00:33:06,429 --> 00:33:11,259
not to be hard well for ya well then how

00:33:09,279 --> 00:33:13,449
are you going to control like you are

00:33:11,259 --> 00:33:14,829
talking about setting of ACLs how you're

00:33:13,449 --> 00:33:16,449
going to set up acl's on this interface

00:33:14,829 --> 00:33:22,179
without a switch def port representing

00:33:16,449 --> 00:33:23,169
it tity alright but TC on what you have

00:33:22,179 --> 00:33:25,029
to have a switch ative poor that

00:33:23,169 --> 00:33:26,469
represents it yeah and if I decide to

00:33:25,029 --> 00:33:31,509
put package seems that switch dev pork

00:33:26,469 --> 00:33:33,159
where do they go dig they're gonna get

00:33:31,509 --> 00:33:35,739
delivered to the other end of the pipe

00:33:33,159 --> 00:33:37,359
so therefore this has to have be set up

00:33:35,739 --> 00:33:39,190
like ve 'the because you're going to

00:33:37,359 --> 00:33:40,779
have to have a port that can represent

00:33:39,190 --> 00:33:43,199
but you can transmit packets on

00:33:40,779 --> 00:33:45,909
otherwise you break the hold switch deb

00:33:43,199 --> 00:33:47,499
concept because if you have an upper

00:33:45,909 --> 00:33:48,849
level switch the sides oh I've gotta

00:33:47,499 --> 00:33:51,009
handle this packet by sending it to the

00:33:48,849 --> 00:33:52,659
other device you have to be able to

00:33:51,009 --> 00:33:53,530
transmit on the port so that's why in my

00:33:52,659 --> 00:33:57,160
mind this is

00:33:53,530 --> 00:34:04,030
ee with a switch dev aspect to it yes

00:33:57,160 --> 00:34:06,370
yeah I think work might not for us to do

00:34:04,030 --> 00:34:08,650
is drop control and visibility into the

00:34:06,370 --> 00:34:10,990
muck violent right or whatever you want

00:34:08,650 --> 00:34:12,700
to call it Mike villain to not miss said

00:34:10,990 --> 00:34:14,740
it was pockets we need a control thing

00:34:12,700 --> 00:34:17,230
well they're not necessarily advice

00:34:14,740 --> 00:34:19,810
purse which there is we want to use this

00:34:17,230 --> 00:34:22,450
in switch dead if they want to use us in

00:34:19,810 --> 00:34:24,730
switch dev they have to be able to pass

00:34:22,450 --> 00:34:26,080
packets to that interface because if

00:34:24,730 --> 00:34:27,880
they have a switch rule that's not set

00:34:26,080 --> 00:34:29,080
up they have to be able to pass it to

00:34:27,880 --> 00:34:30,970
the host and have the host get the

00:34:29,080 --> 00:34:32,590
packet back to the destination but reach

00:34:30,970 --> 00:34:35,050
catch part of the interface the one that

00:34:32,590 --> 00:34:37,210
sits in the container on the host on the

00:34:35,050 --> 00:34:39,250
host so the host has to have an

00:34:37,210 --> 00:34:43,030
interface if you're running with switch

00:34:39,250 --> 00:34:45,159
dev so you can have you seen the VF port

00:34:43,030 --> 00:34:46,450
representer stuff right right yeah it

00:34:45,159 --> 00:34:48,909
ends up being equivalent of that in this

00:34:46,450 --> 00:34:51,070
case will be like a it's on the chart

00:34:48,909 --> 00:34:53,169
yes yes I was right you know if you go

00:34:51,070 --> 00:34:56,020
to this full-blown concept we have to

00:34:53,169 --> 00:34:58,630
obey this requirement may be as you say

00:34:56,020 --> 00:35:00,310
that your needs are less than that and

00:34:58,630 --> 00:35:02,650
we can yeah my needs a lesson that I

00:35:00,310 --> 00:35:05,920
okay so only problem I have I love Mac

00:35:02,650 --> 00:35:07,180
Vela it just held to debug that's all so

00:35:05,920 --> 00:35:09,370
we should yeah but if you want to run

00:35:07,180 --> 00:35:11,760
and open this which on that so you do

00:35:09,370 --> 00:35:15,670
need the requirement to ford also

00:35:11,760 --> 00:35:18,070
hitting this the case again where we

00:35:15,670 --> 00:35:19,330
have a tension between explicitly saying

00:35:18,070 --> 00:35:20,650
we're doing something that's offloading

00:35:19,330 --> 00:35:23,020
and transparently doing something that's

00:35:20,650 --> 00:35:24,880
offloading and when we did mike moran

00:35:23,020 --> 00:35:26,770
the intent was to have it be completely

00:35:24,880 --> 00:35:29,440
transparent you don't have to know that

00:35:26,770 --> 00:35:32,080
you are doing any sort of switch their

00:35:29,440 --> 00:35:36,970
their offload and revert continues to

00:35:32,080 --> 00:35:38,440
work and there's no need to change your

00:35:36,970 --> 00:35:40,000
model because you're doing all floating

00:35:38,440 --> 00:35:41,170
in this case we're showing your motor

00:35:40,000 --> 00:35:43,030
changes for every when you're doing

00:35:41,170 --> 00:35:44,560
offloading and i think what's worth

00:35:43,030 --> 00:35:47,040
noting i don't think it's a showstopper

00:35:44,560 --> 00:35:48,720
but on this group

00:35:47,040 --> 00:35:52,620
in the past been quite opposed to

00:35:48,720 --> 00:35:54,060
changing models for offroading this

00:35:52,620 --> 00:35:56,970
might be a case where I spell it but

00:35:54,060 --> 00:35:58,380
just some of it I don't think I really

00:35:56,970 --> 00:36:00,380
think we should probably not use maximum

00:35:58,380 --> 00:36:03,420
because michaelina has that existing

00:36:00,380 --> 00:36:06,390
offload its transparent we have people

00:36:03,420 --> 00:36:08,640
using it with libvirt and it works my

00:36:06,390 --> 00:36:10,200
concerns of your change it it was

00:36:08,640 --> 00:36:12,120
missing to solve all these things and

00:36:10,200 --> 00:36:14,130
then be it seems to break what we have

00:36:12,120 --> 00:36:15,360
working already in production I would

00:36:14,130 --> 00:36:18,300
just have been happy with a command that

00:36:15,360 --> 00:36:20,850
would have told me that the marvelous

00:36:18,300 --> 00:36:22,920
inside a container what democracy is how

00:36:20,850 --> 00:36:27,960
impacts was seen and received that ever

00:36:22,920 --> 00:36:29,700
been more than enough yeah but if I if

00:36:27,960 --> 00:36:31,830
I'm going to end up representative rice

00:36:29,700 --> 00:36:33,480
then like then I think maybe we should

00:36:31,830 --> 00:36:36,270
call it something else okay so rule of

00:36:33,480 --> 00:36:38,700
it will continue ok so I think a little

00:36:36,270 --> 00:36:40,260
odd to sign like what we had food a sra

00:36:38,700 --> 00:36:42,540
OV before where you just have a list in

00:36:40,260 --> 00:36:44,360
the IP link could call it like I a link

00:36:42,540 --> 00:36:46,200
or something like that and get a list of

00:36:44,360 --> 00:36:48,600
interfaces that were active this kind of

00:36:46,200 --> 00:36:49,530
what we had for sr lv initially so

00:36:48,600 --> 00:36:50,820
that's probably all you're really

00:36:49,530 --> 00:36:57,620
looking for it would be something like

00:36:50,820 --> 00:36:57,620
that this case good

00:36:57,720 --> 00:37:01,020

YouTube URL: https://www.youtube.com/watch?v=_Y38Q0NzqaM


