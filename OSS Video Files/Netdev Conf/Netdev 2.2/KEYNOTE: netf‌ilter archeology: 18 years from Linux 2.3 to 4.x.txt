Title: KEYNOTE: netfâ€Œilter archeology: 18 years from Linux 2.3 to 4.x
Publication date: 2018-03-14
Playlist: Netdev 2.2
Description: 
	Speaker: Harald Welte
Friday November 8th, 2017 
Seoul, Korea
https://www.netdevconf.org/2.2/session.html?welte-netfilterhistory-keynote
Captions: 
	00:00:01,020 --> 00:00:08,100
our first keynote speaker Harold wealthy

00:00:05,390 --> 00:00:10,260
Harold does not need an introduction I

00:00:08,100 --> 00:00:14,820
mean his he has a Wikipedia page says

00:00:10,260 --> 00:00:18,660
the next German hacker and yeah he's

00:00:14,820 --> 00:00:21,120
been netfilter maintainer and I'm sure

00:00:18,660 --> 00:00:25,020
many other areas contributing many other

00:00:21,120 --> 00:00:26,940
areas in the Linux kernel my story of

00:00:25,020 --> 00:00:31,399
knowing Harold actually goes way back

00:00:26,940 --> 00:00:33,989
about 1718 years first my first force

00:00:31,399 --> 00:00:38,180
conference in Bangalore India

00:00:33,989 --> 00:00:40,950
my second job yeah out of college and

00:00:38,180 --> 00:00:44,430
yeah it's yeah it's not a hint to

00:00:40,950 --> 00:00:47,040
calculate my age here but so yeah

00:00:44,430 --> 00:00:49,320
attribute I only remember Harold's talk

00:00:47,040 --> 00:00:52,200
of that conference and I attribute much

00:00:49,320 --> 00:00:56,719
of my working in Linux and open source

00:00:52,200 --> 00:00:59,670
to journey with netfilter actually so

00:00:56,719 --> 00:01:02,640
yeah and it was great meeting held in

00:00:59,670 --> 00:01:05,999
person after a long time in civil and

00:01:02,640 --> 00:01:09,149
one of the negative conferences so yeah

00:01:05,999 --> 00:01:11,549
like you I'm really excited to listen to

00:01:09,149 --> 00:01:17,579
Harold today talk about netfilter

00:01:11,549 --> 00:01:20,249
through the years going to be a bit of a

00:01:17,579 --> 00:01:22,229
tour it's not I try to be not one of the

00:01:20,249 --> 00:01:24,539
boring history teachers they like oh in

00:01:22,229 --> 00:01:26,219
year 1999 this happened and then that

00:01:24,539 --> 00:01:28,859
happened and now you need to remember

00:01:26,219 --> 00:01:30,420
those days I try to be a bit more

00:01:28,859 --> 00:01:33,359
exciting and have a bit more fun in

00:01:30,420 --> 00:01:35,399
entertainment in this talk so what is it

00:01:33,359 --> 00:01:37,799
about it's about netfilter history

00:01:35,399 --> 00:01:39,959
it's about netfilter who is who it's

00:01:37,799 --> 00:01:42,539
barnett filter anecdotes netfilter

00:01:39,959 --> 00:01:47,669
folklore and netfilter world domination

00:01:42,539 --> 00:01:49,859
of course so it's important to see a

00:01:47,669 --> 00:01:51,509
little bit of the context I mean some of

00:01:49,859 --> 00:01:53,729
you have been around in Linux

00:01:51,509 --> 00:01:57,029
development or in Linux networking for

00:01:53,729 --> 00:02:00,329
many years some others have not shared

00:01:57,029 --> 00:02:02,489
all this experience of the 18 years that

00:02:00,329 --> 00:02:04,889
I'm going to cover and for those I'm

00:02:02,489 --> 00:02:07,380
going to give a little bit of context as

00:02:04,889 --> 00:02:09,899
to what actually happened and when and

00:02:07,380 --> 00:02:12,510
what kind of time it was so we talk

00:02:09,899 --> 00:02:14,140
about the late 1990s this is the last

00:02:12,510 --> 00:02:16,430
century

00:02:14,140 --> 00:02:20,180
the internet was still new to many

00:02:16,430 --> 00:02:22,610
people internet security was an

00:02:20,180 --> 00:02:24,590
extremely new topic well to most people

00:02:22,610 --> 00:02:26,300
at least we still had issues like the

00:02:24,590 --> 00:02:32,150
ping of deaths not sure who remembers

00:02:26,300 --> 00:02:34,190
that one yeah jamal das i know and also

00:02:32,150 --> 00:02:36,350
in terms of the development process we

00:02:34,190 --> 00:02:40,700
did not have get yet we did not have

00:02:36,350 --> 00:02:42,290
even subversion we had CVS and we didn't

00:02:40,700 --> 00:02:44,960
even have bitkeeper yet at the time net

00:02:42,290 --> 00:02:48,050
fit has started so kernel releases were

00:02:44,960 --> 00:02:50,710
basically done by linnaeus taking in

00:02:48,050 --> 00:02:53,630
patches by email applying them and

00:02:50,710 --> 00:02:55,610
releasing them as at our archive every

00:02:53,630 --> 00:02:57,200
so often that was how the development

00:02:55,610 --> 00:02:58,820
workflow was happening that's sort of

00:02:57,200 --> 00:03:02,390
the context in which we are starting

00:02:58,820 --> 00:03:05,150
this it's also a time in which many

00:03:02,390 --> 00:03:08,240
people did this really even more than

00:03:05,150 --> 00:03:10,160
today of just for fun and it was the

00:03:08,240 --> 00:03:12,680
commercial interest was there it was the

00:03:10,160 --> 00:03:15,290
first dot-com bubble in the late 90s but

00:03:12,680 --> 00:03:17,930
still it was a bit more enthusiasm I

00:03:15,290 --> 00:03:22,070
would say then it is at least for some

00:03:17,930 --> 00:03:23,900
people today we also didn't have proper

00:03:22,070 --> 00:03:26,000
authorship annotation or commit history

00:03:23,900 --> 00:03:28,370
at the time because well if you have no

00:03:26,000 --> 00:03:31,730
revision control system where would you

00:03:28,370 --> 00:03:33,410
have for this annotation also in terms

00:03:31,730 --> 00:03:35,690
of development we didn't have virtual

00:03:33,410 --> 00:03:37,640
machines we had to test on physical

00:03:35,690 --> 00:03:40,430
boxes with lots of network interface

00:03:37,640 --> 00:03:42,110
cards and lots of cables and lots of

00:03:40,430 --> 00:03:44,630
physical boxes I still remember I had

00:03:42,110 --> 00:03:47,180
like service in my kitchen because they

00:03:44,630 --> 00:03:49,280
were so noisy they would disturb me in

00:03:47,180 --> 00:03:51,170
any other room of my apartment so I put

00:03:49,280 --> 00:03:55,000
them in the kitchen where I spent the

00:03:51,170 --> 00:03:59,090
least time which says a lot about my

00:03:55,000 --> 00:04:00,140
nutrition anyway so we also had pre

00:03:59,090 --> 00:04:03,350
netfilter days

00:04:00,140 --> 00:04:08,390
how was packet filtering in net filter

00:04:03,350 --> 00:04:11,570
before so Linux 1.2 1.3 and 2.0 I had a

00:04:08,390 --> 00:04:14,600
program called IPFW ADM the IP

00:04:11,570 --> 00:04:16,790
firewalling administration was developed

00:04:14,600 --> 00:04:20,330
by josephus from the netherlands and

00:04:16,790 --> 00:04:22,130
some of his compatriots and now my

00:04:20,330 --> 00:04:24,870
question is who in the audience has

00:04:22,130 --> 00:04:27,430
still used that please raise your hand

00:04:24,870 --> 00:04:29,740
okay so it's actually much for your

00:04:27,430 --> 00:04:32,470
people than I would have expected okay

00:04:29,740 --> 00:04:35,830
yeah so this is what I started to use

00:04:32,470 --> 00:04:40,510
when I did my first experiments with

00:04:35,830 --> 00:04:42,760
firewalling on Linux in 2.2 then we had

00:04:40,510 --> 00:04:47,100
IP chains which was already developed by

00:04:42,760 --> 00:04:52,060
rusty Russel who I will introduce

00:04:47,100 --> 00:04:53,970
shortly IP chains then well how many

00:04:52,060 --> 00:04:57,729
people in the room have used IP chains

00:04:53,970 --> 00:05:01,150
okay many more okay okay okay I see 2.2

00:04:57,729 --> 00:05:03,040
seems to be the entry point for many of

00:05:01,150 --> 00:05:05,370
the people in the audience and the

00:05:03,040 --> 00:05:07,690
context for this is rusty was doing

00:05:05,370 --> 00:05:10,450
system administration work at an

00:05:07,690 --> 00:05:12,360
Internet service provider in Australia

00:05:10,450 --> 00:05:14,560
and he was doing his job so well

00:05:12,360 --> 00:05:18,250
automatize in so many things that he had

00:05:14,560 --> 00:05:20,139
plenty of time to work on packet

00:05:18,250 --> 00:05:23,710
filtering and that's basically what got

00:05:20,139 --> 00:05:25,120
him into IP chains development and one

00:05:23,710 --> 00:05:27,910
of the other key things that really

00:05:25,120 --> 00:05:30,880
sparked rusty into working on IP chains

00:05:27,910 --> 00:05:32,830
and netfilter is and I just recently

00:05:30,880 --> 00:05:35,320
spoke to him and he reconfirmed that was

00:05:32,830 --> 00:05:38,229
a talk by David Miller on beating the

00:05:35,320 --> 00:05:40,060
hell out of Solaris on SPARC machines at

00:05:38,229 --> 00:05:41,830
some point in the late 90s and he said

00:05:40,060 --> 00:05:43,750
you know this is this is the cool guys I

00:05:41,830 --> 00:05:45,550
want to do something with them this is

00:05:43,750 --> 00:05:49,360
where I can learn this is where exciting

00:05:45,550 --> 00:05:50,979
technology happens this is you know the

00:05:49,360 --> 00:05:54,539
kind of people I want to associate with

00:05:50,979 --> 00:05:57,789
and so that was a big motivational boost

00:05:54,539 --> 00:06:00,850
he wanted to do more Linux development

00:05:57,789 --> 00:06:03,280
he met a company called WatchGuard which

00:06:00,850 --> 00:06:09,330
was back then and I believe is still

00:06:03,280 --> 00:06:14,039
producing today firewall appliances and

00:06:09,330 --> 00:06:16,780
they were kind enough to fund rusty for

00:06:14,039 --> 00:06:19,030
doing a redesign of the Linux firewall

00:06:16,780 --> 00:06:21,639
at that time it was IP Chains was the

00:06:19,030 --> 00:06:23,440
the existing code and he wanted to do a

00:06:21,639 --> 00:06:25,990
proper redesign which then would be

00:06:23,440 --> 00:06:28,240
netfilter IP tables if they would pay

00:06:25,990 --> 00:06:29,830
him for six to twelve months his initial

00:06:28,240 --> 00:06:31,780
estimate was six months in the end it

00:06:29,830 --> 00:06:33,550
took 12 months but they were kind enough

00:06:31,780 --> 00:06:35,710
to do so and he just basically had a

00:06:33,550 --> 00:06:37,510
free hand to do it whatever he thought

00:06:35,710 --> 00:06:40,810
was fit and what was the

00:06:37,510 --> 00:06:45,280
thing to do so they did that and from

00:06:40,810 --> 00:06:48,700
mid 98 to mid 99 he act away on this new

00:06:45,280 --> 00:06:51,700
plan on this new architecture of packet

00:06:48,700 --> 00:06:54,730
filtering so let me introduce some of

00:06:51,700 --> 00:06:58,800
the people to you first of all rusty who

00:06:54,730 --> 00:07:01,690
started the project I'm taking this from

00:06:58,800 --> 00:07:04,030
one of the how-to documents he wrote so

00:07:01,690 --> 00:07:07,180
I'm not going to read the entire thing

00:07:04,030 --> 00:07:09,580
but he says well and always in his

00:07:07,180 --> 00:07:12,040
humble a manner he's no kernel guru he

00:07:09,580 --> 00:07:13,540
knows this because his kernel work has

00:07:12,040 --> 00:07:17,230
brought him into contact with some of

00:07:13,540 --> 00:07:19,090
them some of them in this room so the

00:07:17,230 --> 00:07:21,190
the real gurus are doing all the deep

00:07:19,090 --> 00:07:23,260
magic leaving rusty to wait in the

00:07:21,190 --> 00:07:25,330
shallow end where it's safe and that's

00:07:23,260 --> 00:07:27,670
apparently the netfilter code at the

00:07:25,330 --> 00:07:30,790
time at least so in terms of timeline

00:07:27,670 --> 00:07:32,200
July 98 rusty posts the initial net

00:07:30,790 --> 00:07:34,120
filter designed to the net deathless

00:07:32,200 --> 00:07:35,800
were actually net F is incorrect I think

00:07:34,120 --> 00:07:37,690
it was Linux net at the time and net

00:07:35,800 --> 00:07:40,680
death did not even start yet but they've

00:07:37,690 --> 00:07:43,630
might be able to correct me on that

00:07:40,680 --> 00:07:47,470
in January twenty nine ninety nine net

00:07:43,630 --> 00:07:49,840
filter version 0.1 was released in

00:07:47,470 --> 00:07:52,690
August of the same year net filter was

00:07:49,840 --> 00:07:56,920
merged into kernel to 315 to be more

00:07:52,690 --> 00:07:59,700
precise it was to 315 three two and then

00:07:56,920 --> 00:08:01,840
the to 315 final release headed in there

00:07:59,700 --> 00:08:04,090
shortly after a core team was

00:08:01,840 --> 00:08:05,890
established with two members Mark

00:08:04,090 --> 00:08:08,740
Boucher and rusty and I'm going to look

00:08:05,890 --> 00:08:12,310
at a couple of historic emails from that

00:08:08,740 --> 00:08:16,240
context so this is the ninety nine

00:08:12,310 --> 00:08:17,980
January mail where again I mean it's

00:08:16,240 --> 00:08:22,000
just that the humor in all of this is

00:08:17,980 --> 00:08:23,590
really amazing so just in case all the

00:08:22,000 --> 00:08:25,450
people are sick of this stable chronic

00:08:23,590 --> 00:08:27,190
wrap and once they're interesting

00:08:25,450 --> 00:08:29,470
behavior back there is the first alpha

00:08:27,190 --> 00:08:32,080
quality cut of my new firewall and so on

00:08:29,470 --> 00:08:34,090
and so on so this is like the the birth

00:08:32,080 --> 00:08:38,410
of net filter basically and this post

00:08:34,090 --> 00:08:40,870
companies that just to get some historic

00:08:38,410 --> 00:08:43,330
context in other news Yahoo brought geo

00:08:40,870 --> 00:08:45,460
cities at the time and Clinton faced his

00:08:43,330 --> 00:08:48,880
impeachment trial so just to put this in

00:08:45,460 --> 00:08:51,750
historic context then the merge in

00:08:48,880 --> 00:08:51,750
August 99

00:08:51,830 --> 00:08:57,330
where the actual change log entry by

00:08:55,350 --> 00:09:00,240
Linnaeus in the change log is

00:08:57,330 --> 00:09:02,190
firewalling is gone again replaced by an

00:09:00,240 --> 00:09:04,410
even more generic netfilter facility

00:09:02,190 --> 00:09:06,630
this is the first commit log entry in

00:09:04,410 --> 00:09:08,400
the kernel change log and at that time

00:09:06,630 --> 00:09:10,320
East Timor becomes independent of

00:09:08,400 --> 00:09:12,029
Indonesia and Vladimir Putin becomes

00:09:10,320 --> 00:09:14,520
Prime Minister of Russia for the first

00:09:12,029 --> 00:09:16,680
time okay and now if you're wondering

00:09:14,520 --> 00:09:18,510
how rusty was looking like at the time

00:09:16,680 --> 00:09:20,880
this is the oldest picture I could find

00:09:18,510 --> 00:09:23,730
from rusty in my archives it was at an

00:09:20,880 --> 00:09:27,210
event called Linux bigger hike 2000 it

00:09:23,730 --> 00:09:28,680
happened in the UK and actually was the

00:09:27,210 --> 00:09:31,410
first time I spent a significant amount

00:09:28,680 --> 00:09:34,440
of time with rusty hacking on that

00:09:31,410 --> 00:09:36,330
filter and other things and to give you

00:09:34,440 --> 00:09:38,640
some more context how this environment

00:09:36,330 --> 00:09:42,089
looked like in which we spend part of

00:09:38,640 --> 00:09:45,870
our holidays it looks like this and like

00:09:42,089 --> 00:09:49,560
that it was basically a bunch of crazy

00:09:45,870 --> 00:09:51,510
Linux geeks in the middle of the UK the

00:09:49,560 --> 00:09:53,940
core team was established together with

00:09:51,510 --> 00:09:57,240
Mark Boucher whom you can find here

00:09:53,940 --> 00:10:01,650
again a picture from 2000 so from this

00:09:57,240 --> 00:10:04,310
historic context and the core team is

00:10:01,650 --> 00:10:06,990
basically the group of people who feels

00:10:04,310 --> 00:10:10,080
more responsible than than probably

00:10:06,990 --> 00:10:12,779
others it's not really officially

00:10:10,080 --> 00:10:14,520
defined what the the rules are and so on

00:10:12,779 --> 00:10:16,680
I'm just going to introduce a couple of

00:10:14,520 --> 00:10:18,630
people to you I'm not going to read this

00:10:16,680 --> 00:10:21,360
now but we will have a look individually

00:10:18,630 --> 00:10:23,310
at those so for James Morris I don't

00:10:21,360 --> 00:10:25,650
have any older picture from from the

00:10:23,310 --> 00:10:30,660
exact exact historic context so this is

00:10:25,650 --> 00:10:33,330
a picture I could find also again the

00:10:30,660 --> 00:10:35,310
humor I think is something that made the

00:10:33,330 --> 00:10:37,080
project live at the time it's not just

00:10:35,310 --> 00:10:38,760
the humor in the announcements or in the

00:10:37,080 --> 00:10:40,740
documentation there's also lots of humor

00:10:38,760 --> 00:10:43,470
in the source code unfortunately a lot

00:10:40,740 --> 00:10:45,990
of this has been sort of phased out due

00:10:43,470 --> 00:10:48,480
to subsequent changes in the kernel but

00:10:45,990 --> 00:10:51,000
if you read original netfilter code then

00:10:48,480 --> 00:10:52,980
you find comments like welcome Mr Bond

00:10:51,000 --> 00:10:54,900
I've been expecting you which is

00:10:52,980 --> 00:10:57,600
basically when a so called connection

00:10:54,900 --> 00:11:00,060
tracking expect is invoked and then if

00:10:57,600 --> 00:11:03,720
you look at there's all these you know

00:11:00,060 --> 00:11:04,170
IP tables in the filter table NAT table

00:11:03,720 --> 00:11:06,000
and many

00:11:04,170 --> 00:11:07,649
the tables and then rusty put a comment

00:11:06,000 --> 00:11:09,750
in there somewhere furniture shopping

00:11:07,649 --> 00:11:11,610
because of so many tables involved so

00:11:09,750 --> 00:11:14,250
there were all these funny comments and

00:11:11,610 --> 00:11:15,959
the funny you know the humorous posts

00:11:14,250 --> 00:11:17,700
and now I'm just going to read this

00:11:15,959 --> 00:11:19,950
because part of this because it's so

00:11:17,700 --> 00:11:21,779
funny so it was the dawn of the Third

00:11:19,950 --> 00:11:24,750
Age of Linux firewalling the Third Age

00:11:21,779 --> 00:11:27,389
because IPFW Adium and IP chains before

00:11:24,750 --> 00:11:29,370
a time of great struggle and heroic

00:11:27,389 --> 00:11:32,010
deeds it was our last best hope for

00:11:29,370 --> 00:11:33,690
peace great communities were founded all

00:11:32,010 --> 00:11:37,260
civilizations were lost and new

00:11:33,690 --> 00:11:38,459
alliances were formed james missions

00:11:37,260 --> 00:11:40,170
during this period included the

00:11:38,459 --> 00:11:43,800
continued perversion of the networking

00:11:40,170 --> 00:11:47,279
code and so on to inflict grave terror

00:11:43,800 --> 00:11:49,560
upon unsuspecting SNMP packets and to

00:11:47,279 --> 00:11:52,709
expend the IP stack into user space with

00:11:49,560 --> 00:11:54,269
Perl now peering squarely into the abyss

00:11:52,709 --> 00:11:56,220
we noticed the good deeds of a young

00:11:54,269 --> 00:11:57,779
kernel warrior named Havel relative who

00:11:56,220 --> 00:12:00,000
seemed to actually understand the

00:11:57,779 --> 00:12:02,130
netcode accordingly his distinctiveness

00:12:00,000 --> 00:12:04,589
was added to the collective with balance

00:12:02,130 --> 00:12:06,180
restored the netfilter juggernaut was

00:12:04,589 --> 00:12:08,130
now free to accelerate into the brave

00:12:06,180 --> 00:12:10,250
new world of the next 2.4 and so on and

00:12:08,130 --> 00:12:12,600
this is sort of like really the official

00:12:10,250 --> 00:12:14,940
kind of announcement about core team

00:12:12,600 --> 00:12:17,550
members joining and so on anyway to put

00:12:14,940 --> 00:12:19,829
some historical context at the same time

00:12:17,550 --> 00:12:23,940
Bill Gates stepped down as CEO we don't

00:12:19,829 --> 00:12:26,390
claim any causality in that and this is

00:12:23,940 --> 00:12:30,440
how I was looking like at that time so

00:12:26,390 --> 00:12:30,440
hard to imagine that yes

00:12:44,960 --> 00:12:51,510
okay yeah so more funny pictures okay

00:12:49,050 --> 00:12:55,020
next to enter the net filter project on

00:12:51,510 --> 00:12:58,830
the decor team was you Jeff in December

00:12:55,020 --> 00:12:59,850
2001 you Woodruff looks like this he

00:12:58,830 --> 00:13:01,970
hasn't really changed much

00:12:59,850 --> 00:13:04,530
ever since probably because also he was

00:13:01,970 --> 00:13:07,830
not as young as any of the other people

00:13:04,530 --> 00:13:09,300
involved at the time he is he was and is

00:13:07,830 --> 00:13:11,340
a physicist at a Hungarian physics

00:13:09,300 --> 00:13:14,030
Research Institute he did lots of

00:13:11,340 --> 00:13:16,590
sysadmin work there and well by the way

00:13:14,030 --> 00:13:18,000
what's it with physicists and Linux

00:13:16,590 --> 00:13:20,730
kernel networking and there's another

00:13:18,000 --> 00:13:22,470
famous developer called Alexey Kuznetsov

00:13:20,730 --> 00:13:24,680
who some of you may remember at least

00:13:22,470 --> 00:13:27,530
from comments in the code or from from

00:13:24,680 --> 00:13:30,360
comments on the mailing list so

00:13:27,530 --> 00:13:32,190
physicists from former Eastern Bloc

00:13:30,360 --> 00:13:33,480
countries hacking away on the kernel

00:13:32,190 --> 00:13:35,940
networking code there must be some

00:13:33,480 --> 00:13:37,980
conspiracy he did lots of work on

00:13:35,940 --> 00:13:40,080
connection tracking for example the TCP

00:13:37,980 --> 00:13:44,130
window tracking and he's still active

00:13:40,080 --> 00:13:46,560
today again sort of to put us in

00:13:44,130 --> 00:13:48,390
historic context around the same time

00:13:46,560 --> 00:13:50,220
two four zero was released the first

00:13:48,390 --> 00:13:53,310
stable kernel that includes net filter

00:13:50,220 --> 00:13:55,290
IP tables and also in at around the same

00:13:53,310 --> 00:13:59,940
time Enron files chapter 11 bankruptcy

00:13:55,290 --> 00:14:03,050
for those who follow us economic news

00:13:59,940 --> 00:14:06,900
also the United Nations authorizes the

00:14:03,050 --> 00:14:09,270
is ISAF in in Afghanistan post the 9/11

00:14:06,900 --> 00:14:11,070
attacks in that year President Karzai is

00:14:09,270 --> 00:14:14,370
elected to lead the Afghan interim

00:14:11,070 --> 00:14:18,870
administration okay

00:14:14,370 --> 00:14:21,030
interlude um here so one thing that I

00:14:18,870 --> 00:14:23,160
thought was particularly important in

00:14:21,030 --> 00:14:24,750
for example enabling me and others to

00:14:23,160 --> 00:14:28,200
join early in the net further

00:14:24,750 --> 00:14:30,000
development is documentation and I know

00:14:28,200 --> 00:14:31,890
it's always hard for developers you know

00:14:30,000 --> 00:14:33,720
you can continue to write some great

00:14:31,890 --> 00:14:35,880
code and you can add more features and

00:14:33,720 --> 00:14:38,250
so on but on the other hand having good

00:14:35,880 --> 00:14:40,230
documentation both for developers and

00:14:38,250 --> 00:14:42,990
users is absolutely important in order

00:14:40,230 --> 00:14:44,860
to enable quick growth of a project and

00:14:42,990 --> 00:14:47,290
to enable more people to enter it and

00:14:44,860 --> 00:14:49,420
it to me it has helped a lot and

00:14:47,290 --> 00:14:50,980
everyone else I spoke to the the how to

00:14:49,420 --> 00:14:53,590
us that were there early in the project

00:14:50,980 --> 00:14:55,330
have helped enormously to get people

00:14:53,590 --> 00:14:58,120
involved and and to to make quick

00:14:55,330 --> 00:14:59,470
progress another funny thing we had in

00:14:58,120 --> 00:15:01,870
that photo was called a net photo

00:14:59,470 --> 00:15:03,850
scoreboard which is basically a high

00:15:01,870 --> 00:15:07,900
score for a number of patches and

00:15:03,850 --> 00:15:10,660
contributions so today people would call

00:15:07,900 --> 00:15:11,910
this probably gamification and of course

00:15:10,660 --> 00:15:14,560
you have all those statistics

00:15:11,910 --> 00:15:17,680
automatically in the get commit log and

00:15:14,560 --> 00:15:19,690
people like John Corbett at lwn and

00:15:17,680 --> 00:15:21,130
others are creating statistics about who

00:15:19,690 --> 00:15:22,960
changed how much of the kernel

00:15:21,130 --> 00:15:25,720
but back then this didn't really exist

00:15:22,960 --> 00:15:27,820
and all the tools did not exist this

00:15:25,720 --> 00:15:29,830
looked like this so on the webpage we

00:15:27,820 --> 00:15:32,620
had this scoreboard this is the main

00:15:29,830 --> 00:15:35,470
overview picture who is like the top

00:15:32,620 --> 00:15:37,810
contributors who contributed something

00:15:35,470 --> 00:15:40,000
and the score next to them is a high

00:15:37,810 --> 00:15:41,800
score and when you click on one of those

00:15:40,000 --> 00:15:44,250
individual links then you actually get a

00:15:41,800 --> 00:15:47,230
page like this which shows you the

00:15:44,250 --> 00:15:51,310
contributions of this particular person

00:15:47,230 --> 00:15:54,100
antoshka chavo and then you see like

00:15:51,310 --> 00:15:56,290
what points for what so we had different

00:15:54,100 --> 00:15:57,670
number of points for different things so

00:15:56,290 --> 00:16:00,460
if you submitted the patch incorrect

00:15:57,670 --> 00:16:05,110
form there was a bonus point an extra

00:16:00,460 --> 00:16:07,000
bonus point and then five points for a

00:16:05,110 --> 00:16:08,950
back fix and so many points for a patch

00:16:07,000 --> 00:16:10,450
and there were also interesting records

00:16:08,950 --> 00:16:17,260
like zero points for nothing

00:16:10,450 --> 00:16:19,440
in this line yeah people with too much

00:16:17,260 --> 00:16:21,820
time at their hands at that time I guess

00:16:19,440 --> 00:16:24,130
another key part I think of net fair is

00:16:21,820 --> 00:16:26,050
the modularity and acceptance ability so

00:16:24,130 --> 00:16:27,550
in the end the Coronet filter is just a

00:16:26,050 --> 00:16:30,580
couple of folks in the stack as I think

00:16:27,550 --> 00:16:33,490
most people know and iptables was there

00:16:30,580 --> 00:16:37,210
to match packets and so on and there

00:16:33,490 --> 00:16:40,840
were match and target plugins in the net

00:16:37,210 --> 00:16:42,910
filter and iptables code and together

00:16:40,840 --> 00:16:44,890
with the good API documentation lots of

00:16:42,910 --> 00:16:47,830
people got involved in developing their

00:16:44,890 --> 00:16:50,100
own favorite plugin or module for IP

00:16:47,830 --> 00:16:52,360
tables and now the problem was how to

00:16:50,100 --> 00:16:53,560
distribute them and how to maintain them

00:16:52,360 --> 00:16:56,320
because a lot of them were out of

00:16:53,560 --> 00:16:58,300
mainline and probably will continue or

00:16:56,320 --> 00:17:01,090
would continue to stay out of mainline

00:16:58,300 --> 00:17:02,650
such such an obscure thing that you

00:17:01,090 --> 00:17:04,870
don't want as a general feature in the

00:17:02,650 --> 00:17:08,320
kernel so we created something called

00:17:04,870 --> 00:17:10,750
petrol Matic not sure how many in here

00:17:08,320 --> 00:17:14,230
remember paramedic okay

00:17:10,750 --> 00:17:17,590
very few soap a tramatic was basically a

00:17:14,230 --> 00:17:21,550
collection of netfilter or particularly

00:17:17,590 --> 00:17:25,420
iptables extensions and you could

00:17:21,550 --> 00:17:27,400
basically run it like here indicated on

00:17:25,420 --> 00:17:30,520
this announcement or the readme text if

00:17:27,400 --> 00:17:32,350
this run me script and you prompt you

00:17:30,520 --> 00:17:34,630
give it where your kernel sources are

00:17:32,350 --> 00:17:36,640
and then you can select which of the

00:17:34,630 --> 00:17:38,260
iptables extensions you want to apply

00:17:36,640 --> 00:17:41,080
and you want to patch into that kernel

00:17:38,260 --> 00:17:43,540
basically it solved the problem of

00:17:41,080 --> 00:17:44,770
having clashes in make files in k config

00:17:43,540 --> 00:17:46,210
and and all that stuff that you would

00:17:44,770 --> 00:17:50,530
normally have if you have many patches

00:17:46,210 --> 00:17:53,350
touching the same part of code so that

00:17:50,530 --> 00:17:55,570
was our solution or for the problem and

00:17:53,350 --> 00:17:57,760
we didn't really check what went in

00:17:55,570 --> 00:18:01,450
there so we ended up with interesting

00:17:57,760 --> 00:18:04,840
posts like this where well at that time

00:18:01,450 --> 00:18:06,940
Daniel Stone said well I see a problem

00:18:04,840 --> 00:18:08,740
and something is not working in fat

00:18:06,940 --> 00:18:11,050
romatic and this means aid has not

00:18:08,740 --> 00:18:13,840
received any testing at all or be it was

00:18:11,050 --> 00:18:15,610
a mistake pastes or some some problem

00:18:13,840 --> 00:18:18,340
with the patch and then rusty responds

00:18:15,610 --> 00:18:21,010
completely untested and Petra Matic is

00:18:18,340 --> 00:18:22,810
for getting stuff out there without

00:18:21,010 --> 00:18:26,070
waiting for the rusty Linus planet

00:18:22,810 --> 00:18:28,780
alignment thing so that was the

00:18:26,070 --> 00:18:30,790
basically a complete collection of some

00:18:28,780 --> 00:18:33,160
useful and some not so useful things but

00:18:30,790 --> 00:18:35,440
it was a method how people could get

00:18:33,160 --> 00:18:37,660
their module in their extension out

00:18:35,440 --> 00:18:41,110
there and distribute it and and usable

00:18:37,660 --> 00:18:43,150
for people so the combination to the

00:18:41,110 --> 00:18:45,670
success I think is the documentation the

00:18:43,150 --> 00:18:47,470
modular framework and the the way how to

00:18:45,670 --> 00:18:49,780
maintain those patches also keep in mind

00:18:47,470 --> 00:18:52,720
this was a time when many more people

00:18:49,780 --> 00:18:55,510
compiled their own kernels this was a

00:18:52,720 --> 00:18:57,550
different time than today I mean I think

00:18:55,510 --> 00:19:00,220
we probably had 10% of the K config

00:18:57,550 --> 00:19:02,230
options that we have today and I'm

00:19:00,220 --> 00:19:03,460
saying that from the netfilter point of

00:19:02,230 --> 00:19:05,050
view which has more cake and fork

00:19:03,460 --> 00:19:08,260
options than probably any other part of

00:19:05,050 --> 00:19:10,750
networking yeah so we have Martin Joseph

00:19:08,260 --> 00:19:11,929
son joining the core team we have the

00:19:10,750 --> 00:19:15,460
2.6 kernel being

00:19:11,929 --> 00:19:17,779
least also around the same time the

00:19:15,460 --> 00:19:19,009
People's Republic of North Korea

00:19:17,779 --> 00:19:21,049
withdraws from the nuclear

00:19:19,009 --> 00:19:22,909
non-proliferation treaty and the US

00:19:21,049 --> 00:19:25,610
Space Shuttle crashes and the u.s.

00:19:22,909 --> 00:19:27,980
launches war on Iraq and Saddam Hussein

00:19:25,610 --> 00:19:30,289
is captured none of these events are in

00:19:27,980 --> 00:19:34,009
any causality with netfilter development

00:19:30,289 --> 00:19:37,340
and in 2003 we also see some interesting

00:19:34,009 --> 00:19:41,480
messages from a brave new young warrior

00:19:37,340 --> 00:19:43,549
called Pablo Neera well I'm not going to

00:19:41,480 --> 00:19:45,710
read all of this this is the first email

00:19:43,549 --> 00:19:47,419
from him ever on the netfilter list and

00:19:45,710 --> 00:19:49,879
this is like this really really nice

00:19:47,419 --> 00:19:52,789
piece of code and we see the next

00:19:49,879 --> 00:19:55,580
message from him and you see yes thanks

00:19:52,789 --> 00:19:58,159
for this great piece of code so it seems

00:19:55,580 --> 00:19:59,960
he had from day one an enormous

00:19:58,159 --> 00:20:04,129
appreciation for the code for whatever

00:19:59,960 --> 00:20:05,570
reason he can explain that himself he

00:20:04,129 --> 00:20:06,679
does not become a member of the core

00:20:05,570 --> 00:20:09,470
team at that point

00:20:06,679 --> 00:20:13,669
first we have Patrick McCarty who joins

00:20:09,470 --> 00:20:16,429
the core team has recently been removed

00:20:13,669 --> 00:20:19,820
from the core team due to non technical

00:20:16,429 --> 00:20:21,950
issues and licensed enforcement that

00:20:19,820 --> 00:20:24,769
people didn't agree historic context for

00:20:21,950 --> 00:20:27,200
2004 is Facebook was born and the

00:20:24,769 --> 00:20:31,669
Bluetooth 2.0 spec has been released and

00:20:27,200 --> 00:20:33,289
Skype becomes popular okay at that time

00:20:31,669 --> 00:20:36,289
also we introduced netfilter core team

00:20:33,289 --> 00:20:38,330
emeritus members which according to

00:20:36,289 --> 00:20:42,289
Rusty is Latin for burned-out

00:20:38,330 --> 00:20:44,570
free-riding slacker that's the the

00:20:42,289 --> 00:20:47,600
description so and a little bit of

00:20:44,570 --> 00:20:49,279
background on that so until recently I

00:20:47,600 --> 00:20:50,929
actually thought well rusty basically

00:20:49,279 --> 00:20:52,639
just disappeared because there were so

00:20:50,929 --> 00:20:54,740
many other attempting and distracting

00:20:52,639 --> 00:20:57,259
projects he was rewriting the kernel

00:20:54,740 --> 00:20:59,059
module loader he was working on qmu who

00:20:57,259 --> 00:21:00,919
is working on para virtualization and

00:20:59,059 --> 00:21:02,749
all kinds of other things that you know

00:21:00,919 --> 00:21:04,909
are all very important and and

00:21:02,749 --> 00:21:06,860
definitely needed attention so I thought

00:21:04,909 --> 00:21:09,350
it was just you know too many tasks at

00:21:06,860 --> 00:21:10,999
hand recently however rusty told me it

00:21:09,350 --> 00:21:13,279
was a deliberate decision at the time to

00:21:10,999 --> 00:21:15,139
leave netfilter and it was a strategic

00:21:13,279 --> 00:21:16,340
decision because he said thought the new

00:21:15,139 --> 00:21:17,749
core team and maintainer

00:21:16,340 --> 00:21:19,580
should run the project without

00:21:17,749 --> 00:21:21,769
interference from the active project

00:21:19,580 --> 00:21:23,840
father if you always have it like the

00:21:21,769 --> 00:21:25,730
old guy around and the kids have to

00:21:23,840 --> 00:21:27,560
stand on their own feet at some point

00:21:25,730 --> 00:21:29,600
you have to basically pull out and let

00:21:27,560 --> 00:21:32,270
them do what they want to do without

00:21:29,600 --> 00:21:33,650
being this father figure in the

00:21:32,270 --> 00:21:35,680
background all the time so that's

00:21:33,650 --> 00:21:38,690
basically why he's why he disappeared

00:21:35,680 --> 00:21:41,480
rather quickly and rather completely

00:21:38,690 --> 00:21:44,840
from the project next we have Yasuyuki

00:21:41,480 --> 00:21:48,200
KU Sakai he is was a member of the

00:21:44,840 --> 00:21:51,500
Japanese zaggy project for Linux ipv6 he

00:21:48,200 --> 00:21:52,970
worked on well unsurprisingly many ipv6

00:21:51,500 --> 00:21:55,280
related features among them

00:21:52,970 --> 00:21:59,900
ipv6 connection tracking which we didn't

00:21:55,280 --> 00:22:05,330
have until that point in 2007 we have

00:21:59,900 --> 00:22:08,180
Pablo joining the core team and this is

00:22:05,330 --> 00:22:09,860
how Pablo looked at the time slightly

00:22:08,180 --> 00:22:15,140
different than today but not as

00:22:09,860 --> 00:22:16,310
different as I did back then he's the

00:22:15,140 --> 00:22:18,970
official head of the core team since

00:22:16,310 --> 00:22:23,510
2013 known as the check of all trades

00:22:18,970 --> 00:22:25,130
and for fairness sake actually I there

00:22:23,510 --> 00:22:27,110
should be a picture here but it's not

00:22:25,130 --> 00:22:28,790
there I'm sorry I wanted to show also a

00:22:27,110 --> 00:22:30,260
picture from me after that time since

00:22:28,790 --> 00:22:31,640
I'm showing old pictures of other people

00:22:30,260 --> 00:22:34,100
somehow the picture disappeared from the

00:22:31,640 --> 00:22:35,780
slide historical context well Obama is

00:22:34,100 --> 00:22:38,060
inaugurated for the first time we have

00:22:35,780 --> 00:22:40,070
the configure virus infecting 9.5

00:22:38,060 --> 00:22:43,520
million pcs Michael Jackson died in

00:22:40,070 --> 00:22:45,710
Google starts Chrome OS another thing

00:22:43,520 --> 00:22:49,750
that happened in 2009 is NF Tables the

00:22:45,710 --> 00:22:52,670
first version of NF Tables came out and

00:22:49,750 --> 00:22:55,160
it was sort of the fourth generation of

00:22:52,670 --> 00:22:57,770
UNIX kernel packet filtering but as you

00:22:55,160 --> 00:23:00,050
could see IPFW IDM was very short-lived

00:22:57,770 --> 00:23:01,550
IP chains was rather short-lived a few

00:23:00,050 --> 00:23:03,920
tables has lived for a very long time

00:23:01,550 --> 00:23:05,660
and even 2009 it was not replaced it

00:23:03,920 --> 00:23:07,850
took another four years until it went

00:23:05,660 --> 00:23:09,410
mainline and I still think the majority

00:23:07,850 --> 00:23:11,810
of the firewalls today are running IP

00:23:09,410 --> 00:23:16,030
tables so the cycles are getting longer

00:23:11,810 --> 00:23:18,290
and linear iteration of linked lists

00:23:16,030 --> 00:23:20,090
with packets apparently still is

00:23:18,290 --> 00:23:21,740
sufficient for a lot of applications and

00:23:20,090 --> 00:23:26,000
use cases otherwise people wouldn't do

00:23:21,740 --> 00:23:29,030
it fast forward 2012 we have Eric live

00:23:26,000 --> 00:23:30,910
long and slowly invest for joining some

00:23:29,030 --> 00:23:34,390
references to the many contributions

00:23:30,910 --> 00:23:38,770
that people have made

00:23:34,390 --> 00:23:40,900
also in 2012 a lot of the former core

00:23:38,770 --> 00:23:42,340
team members enter emeritus state

00:23:40,900 --> 00:23:44,710
including myself

00:23:42,340 --> 00:23:46,990
historical context while lots of

00:23:44,710 --> 00:23:49,180
retaliations of different war parties

00:23:46,990 --> 00:23:51,460
and we have the great patent war of

00:23:49,180 --> 00:23:56,410
apple vs. samsung and megaupload gets

00:23:51,460 --> 00:23:59,610
shut down in 2012 and f tables yeah so

00:23:56,410 --> 00:24:03,130
in 2013 and f tables finally gets merged

00:23:59,610 --> 00:24:05,800
into mainline we have this following

00:24:03,130 --> 00:24:07,810
commit and well I think you cannot

00:24:05,800 --> 00:24:10,300
really see it here on the projector but

00:24:07,810 --> 00:24:12,850
this bubble like the speech bubble

00:24:10,300 --> 00:24:16,000
actually says bye-bye iptables in that

00:24:12,850 --> 00:24:19,180
picture so yeah we finally at a point

00:24:16,000 --> 00:24:22,240
where IP tables can become legacy and

00:24:19,180 --> 00:24:26,710
can be phased out slowly and replaced by

00:24:22,240 --> 00:24:29,140
a more generic framework now after all

00:24:26,710 --> 00:24:31,390
this history part let me also talk a bit

00:24:29,140 --> 00:24:34,900
about bugs and some topics that I think

00:24:31,390 --> 00:24:38,380
are particularly problematic or worth

00:24:34,900 --> 00:24:40,240
mentioning so of course we had bugs like

00:24:38,380 --> 00:24:42,760
anyone had box the problem is of course

00:24:40,240 --> 00:24:47,440
netfilter bugs tend to affect a security

00:24:42,760 --> 00:24:49,720
in a quite significant way and well we

00:24:47,440 --> 00:24:52,770
had some some issues and so on and then

00:24:49,720 --> 00:24:57,880
we see again some very rusty like

00:24:52,770 --> 00:25:00,130
responses so yeah I'm a

00:24:57,880 --> 00:25:03,400
well not many people would say that

00:25:00,130 --> 00:25:06,400
about themselves I think it's a quite

00:25:03,400 --> 00:25:09,460
special way of responding to to bugs

00:25:06,400 --> 00:25:11,560
Rusty's response to to to bugs was he

00:25:09,460 --> 00:25:14,440
created NFS in the netfilter simulator

00:25:11,560 --> 00:25:17,170
and a test suit and the problem with

00:25:14,440 --> 00:25:19,090
this is that well you have a lot of code

00:25:17,170 --> 00:25:21,700
of course and you need automatic testing

00:25:19,090 --> 00:25:23,590
so the netfilter simulator tried to run

00:25:21,700 --> 00:25:25,930
lots of netfilter and other kernel code

00:25:23,590 --> 00:25:28,330
in userspace together with the test suit

00:25:25,930 --> 00:25:31,330
and then wrappers for all the user space

00:25:28,330 --> 00:25:33,190
tools simulate allocation failures and

00:25:31,330 --> 00:25:36,090
so on in general it's a very good idea

00:25:33,190 --> 00:25:40,210
and was lots of useful work

00:25:36,090 --> 00:25:42,790
the problem is reality sucks so very few

00:25:40,210 --> 00:25:45,340
contributions to the test suit very few

00:25:42,790 --> 00:25:46,470
users beyond the original authors rusty

00:25:45,340 --> 00:25:48,330
and Jeremy

00:25:46,470 --> 00:25:53,370
very limited adoption and used by other

00:25:48,330 --> 00:25:57,120
netfilter developers and then well still

00:25:53,370 --> 00:25:59,309
we see discussions about this so here

00:25:57,120 --> 00:26:01,770
Patrick says well I spent 10 hours to

00:25:59,309 --> 00:26:03,750
verify proposed fixes manually of course

00:26:01,770 --> 00:26:07,140
and then Rusty's as well this is why we

00:26:03,750 --> 00:26:08,730
need an automatic test suit so the test

00:26:07,140 --> 00:26:10,409
suit would have run in five seconds if

00:26:08,730 --> 00:26:13,710
you had implemented a test case against

00:26:10,409 --> 00:26:15,780
the test suit so you see useful tool but

00:26:13,710 --> 00:26:19,919
other developers didn't really adopt it

00:26:15,780 --> 00:26:21,630
and reality sucks even more because the

00:26:19,919 --> 00:26:22,980
patches then sometimes get validated

00:26:21,630 --> 00:26:25,770
only in the test suit and not in the

00:26:22,980 --> 00:26:29,240
real kernel anymore which leads to an

00:26:25,770 --> 00:26:31,530
upset David Miller which says well I

00:26:29,240 --> 00:26:34,919
really think they were not ready the

00:26:31,530 --> 00:26:36,299
patches and so on and so on yeah an FSM

00:26:34,919 --> 00:26:37,860
is becoming particularly a crutch

00:26:36,299 --> 00:26:39,120
because I know this is what rusty and

00:26:37,860 --> 00:26:40,650
others use heavily for testing which is

00:26:39,120 --> 00:26:42,210
fine but if you fetchers break the

00:26:40,650 --> 00:26:44,400
built-in many ways in the real kernel

00:26:42,210 --> 00:26:47,010
dream and so on you relying too much on

00:26:44,400 --> 00:26:49,380
the simulator so nice idea but reality

00:26:47,010 --> 00:26:51,900
sucks so we have very few contributions

00:26:49,380 --> 00:26:55,010
very limited adoption we have bit rot of

00:26:51,900 --> 00:26:58,590
the kernel environment simulation inside

00:26:55,010 --> 00:27:02,610
the net filter simulation for example

00:26:58,590 --> 00:27:04,380
new features that we used like NF

00:27:02,610 --> 00:27:08,370
netlink CT net link and so on they all

00:27:04,380 --> 00:27:11,549
were not present in the simulator so I

00:27:08,370 --> 00:27:14,640
think by 2008 it was abandoned and there

00:27:11,549 --> 00:27:16,409
were no continued patches on maintenance

00:27:14,640 --> 00:27:20,429
of it and until today we have no

00:27:16,409 --> 00:27:23,010
replacement and successor and that is

00:27:20,429 --> 00:27:24,720
something that I find particularly a

00:27:23,010 --> 00:27:26,760
pity so all we can do is we can join

00:27:24,720 --> 00:27:34,230
David in praying that the code is

00:27:26,760 --> 00:27:37,679
correct yeah so some more humor summer

00:27:34,230 --> 00:27:39,600
anecdotes that I picked out so here yo

00:27:37,679 --> 00:27:45,360
Jeff is finding some patches that rusty

00:27:39,600 --> 00:27:46,919
didn't complete and your Jeff asks well

00:27:45,360 --> 00:27:48,539
are you still going to complete this or

00:27:46,919 --> 00:27:50,250
can I pick up or should I pick up and

00:27:48,539 --> 00:27:52,500
you have and then rusty says well let me

00:27:50,250 --> 00:27:56,899
put it this way take over those patches

00:27:52,500 --> 00:27:56,899
and I will name my first child after you

00:27:56,929 --> 00:28:00,280
to the best of my knowledge this did not

00:27:59,850 --> 00:28:03,400
happen

00:28:00,280 --> 00:28:05,710
so and Rusty's common is Oh

00:28:03,400 --> 00:28:07,930
unfortunately it's rather complicated to

00:28:05,710 --> 00:28:13,090
change the name of a child in Australia

00:28:07,930 --> 00:28:16,500
so okay also some interesting other

00:28:13,090 --> 00:28:19,120
funny anecdotes this was me in 2003

00:28:16,500 --> 00:28:21,940
somebody was asking whether there are

00:28:19,120 --> 00:28:24,190
plans to incorporate NAT into ip6 tables

00:28:21,940 --> 00:28:26,200
or the future packet tables we didn't

00:28:24,190 --> 00:28:27,640
call it an F tables then was an idea

00:28:26,200 --> 00:28:29,920
about something called packet tables and

00:28:27,640 --> 00:28:32,440
I said over my dead body NAT is what

00:28:29,920 --> 00:28:34,300
broke ipv4 end-to-end let's not do the

00:28:32,440 --> 00:28:36,520
same with ipv6 the only reasonable

00:28:34,300 --> 00:28:40,600
application is ipv4 to ipv6 transition

00:28:36,520 --> 00:28:42,160
NAT luckily by the time I pv6 nat

00:28:40,600 --> 00:28:45,190
support was merged I was no longer

00:28:42,160 --> 00:28:47,320
active so I didn't have to kill myself

00:28:45,190 --> 00:28:48,490
and nobody else has to kill myself I

00:28:47,320 --> 00:28:51,450
still think it's horrible

00:28:48,490 --> 00:28:55,660
and I would rather have avoided it but

00:28:51,450 --> 00:28:57,220
it wasn't my call at the time yeah

00:28:55,660 --> 00:29:00,820
another thing that we had rather

00:28:57,220 --> 00:29:02,290
successfully was net filter workshops in

00:29:00,820 --> 00:29:04,030
the beginning the first couple of years

00:29:02,290 --> 00:29:06,160
there were more informal meetings I mean

00:29:04,030 --> 00:29:08,550
was 2 or 3 people there's no real need

00:29:06,160 --> 00:29:11,620
to make a lot of rather large workshop

00:29:08,550 --> 00:29:16,750
from 2001 onwards we established

00:29:11,620 --> 00:29:18,400
workshops where developers meet up not

00:29:16,750 --> 00:29:20,800
every year but we had certain workshops

00:29:18,400 --> 00:29:25,180
in eighteen years the invitation only

00:29:20,800 --> 00:29:27,880
similar to the net deaf conf not net

00:29:25,180 --> 00:29:33,550
deaf no net conf

00:29:27,880 --> 00:29:35,500
net conf event and done by community for

00:29:33,550 --> 00:29:37,750
the community we had always very

00:29:35,500 --> 00:29:41,080
generous support from commercial net 50

00:29:37,750 --> 00:29:44,460
users in terms of sponsoring this is the

00:29:41,080 --> 00:29:47,890
list of workshops that we held so far a

00:29:44,460 --> 00:29:50,500
couple of group pictures some of those

00:29:47,890 --> 00:29:52,360
like this one are rather low resolution

00:29:50,500 --> 00:29:56,980
miss digital cameras at the time weren't

00:29:52,360 --> 00:29:59,920
really all that great you can see here

00:29:56,980 --> 00:30:02,740
stars changing over the years also fun

00:29:59,920 --> 00:30:05,710
fact in the 2005 workshop in Sevilla

00:30:02,740 --> 00:30:08,050
actually we saw these fire extinguishers

00:30:05,710 --> 00:30:09,640
at the event venue which were of the

00:30:08,050 --> 00:30:10,510
brand Unix so we thought long

00:30:09,640 --> 00:30:11,200
firewalling

00:30:10,510 --> 00:30:12,820
on Linux

00:30:11,200 --> 00:30:15,820
at a workshop and we have UNIX fire

00:30:12,820 --> 00:30:17,430
extinguishers at the venue and can't get

00:30:15,820 --> 00:30:21,190
much better than that

00:30:17,430 --> 00:30:23,380
yeah more workshop pictures from various

00:30:21,190 --> 00:30:25,240
different workshops more recent ones you

00:30:23,380 --> 00:30:28,600
will recognize the people more on the

00:30:25,240 --> 00:30:31,210
more recent pictures in 2015's context

00:30:28,600 --> 00:30:35,830
kernel 4.0 is released with net filter

00:30:31,210 --> 00:30:40,240
IP tables and an F tables finally 2016

00:30:35,830 --> 00:30:44,650
and yeah so what kind of challenges do

00:30:40,240 --> 00:30:46,630
we have or did we have of course many

00:30:44,650 --> 00:30:48,970
challenges one of the funnier parts I

00:30:46,630 --> 00:30:51,160
think was originally the IP tables

00:30:48,970 --> 00:30:53,290
kernel code did not validate the rule

00:30:51,160 --> 00:30:55,750
set integrity because at the time we

00:30:53,290 --> 00:30:58,510
said well if somebody loads an IP tables

00:30:55,750 --> 00:31:00,760
rule set into the kernel he has to have

00:30:58,510 --> 00:31:02,950
cap net admin anyway so basically his

00:31:00,760 --> 00:31:05,230
root he owns the machine so if he wants

00:31:02,950 --> 00:31:07,240
to break his machine that's his own you

00:31:05,230 --> 00:31:10,090
know business and it's not our job to

00:31:07,240 --> 00:31:12,340
protect him against inserting a rule set

00:31:10,090 --> 00:31:16,090
that has I don't know like endless loops

00:31:12,340 --> 00:31:18,550
or other crashes unfortunately this

00:31:16,090 --> 00:31:20,950
broke when people thought they'd want to

00:31:18,550 --> 00:31:23,520
have unprivileged containers with UID

00:31:20,950 --> 00:31:27,340
mappings so now you can create a

00:31:23,520 --> 00:31:29,290
container a namespace where root is no

00:31:27,340 --> 00:31:32,260
longer root at least not on the host

00:31:29,290 --> 00:31:35,310
machine and you are able to load rules

00:31:32,260 --> 00:31:37,620
and you can crash the entire system so

00:31:35,310 --> 00:31:41,260
some of those things had to be reworked

00:31:37,620 --> 00:31:45,190
and I think this was one of the early

00:31:41,260 --> 00:31:47,440
architectural or conceptual issues that

00:31:45,190 --> 00:31:49,440
nobody could anticipate at the time so a

00:31:47,440 --> 00:31:52,480
lot of validation code had to be added

00:31:49,440 --> 00:31:55,210
also some fun facts about net fedora

00:31:52,480 --> 00:31:56,800
infrastructure we did self hosting of

00:31:55,210 --> 00:32:00,130
all the infrastructure for a long time

00:31:56,800 --> 00:32:02,190
and it's still mostly the case except

00:32:00,130 --> 00:32:04,540
the mailing lists have moved to Viger

00:32:02,190 --> 00:32:06,580
otherwise it's that the firewall machine

00:32:04,540 --> 00:32:09,160
in front of netfilter org infrastructure

00:32:06,580 --> 00:32:12,850
was for many years IP tables on Linux on

00:32:09,160 --> 00:32:14,440
ultrasparc why well because we can and

00:32:12,850 --> 00:32:17,740
because script kiddies don't do spark

00:32:14,440 --> 00:32:19,990
assembly in general so of course there

00:32:17,740 --> 00:32:21,790
was a time when people found it

00:32:19,990 --> 00:32:23,380
particularly attractive to try to hack

00:32:21,790 --> 00:32:24,790
netfilter org because it's like a target

00:32:23,380 --> 00:32:27,070
where you can

00:32:24,790 --> 00:32:28,840
like a high-value target if you can hack

00:32:27,070 --> 00:32:32,860
netfilter you know then then you're the

00:32:28,840 --> 00:32:34,990
really good cool kid and the actual web

00:32:32,860 --> 00:32:36,130
service and maid service and so on well

00:32:34,990 --> 00:32:38,260
for a long time

00:32:36,130 --> 00:32:39,820
PowerPC based machines again for the

00:32:38,260 --> 00:32:44,350
same reason just to add a layer of

00:32:39,820 --> 00:32:48,850
obscurity for the people who had fun

00:32:44,350 --> 00:32:51,250
okay brings us to the summary why do I

00:32:48,850 --> 00:32:53,350
think net filter was successful I think

00:32:51,250 --> 00:32:55,000
one of the key facts is that some smart

00:32:53,350 --> 00:32:57,910
people got funded to implement things

00:32:55,000 --> 00:33:00,520
the way they want that was a key aspect

00:32:57,910 --> 00:33:03,400
I think in in getting the architecture

00:33:00,520 --> 00:33:07,270
right extensible architecture from day

00:33:03,400 --> 00:33:09,040
one interfaces for plugins good

00:33:07,270 --> 00:33:11,350
documentation on how you write such

00:33:09,040 --> 00:33:13,809
plugins and I mean rusty did not only

00:33:11,350 --> 00:33:16,450
write documentation on how to write

00:33:13,809 --> 00:33:19,000
netfilter extensions but he wrote how to

00:33:16,450 --> 00:33:21,160
our networking concepts and and you know

00:33:19,000 --> 00:33:22,929
much more fundamental things and a

00:33:21,160 --> 00:33:24,520
kernel locking guy the rust is

00:33:22,929 --> 00:33:26,770
unreliable kernel locking guy to

00:33:24,520 --> 00:33:28,330
understand how to handle the locking

00:33:26,770 --> 00:33:31,750
when you write such modules and so on so

00:33:28,330 --> 00:33:33,340
it was really I think a key part we had

00:33:31,750 --> 00:33:34,809
a couple of passionate developers who

00:33:33,340 --> 00:33:36,580
peak net fit as their own topic of

00:33:34,809 --> 00:33:37,990
interests it's not because somebody gave

00:33:36,580 --> 00:33:43,450
them an assignment or something like

00:33:37,990 --> 00:33:45,190
that yeah so any regrets well of course

00:33:43,450 --> 00:33:46,809
I have a regret that I don't have time

00:33:45,190 --> 00:33:50,650
for netfilter work anymore but there's

00:33:46,809 --> 00:33:52,380
too many other things to do and lots of

00:33:50,650 --> 00:33:55,090
good people taking care of netfilter I

00:33:52,380 --> 00:33:57,280
should have stepped down sooner as rusty

00:33:55,090 --> 00:33:59,679
did as the official like as a core team

00:33:57,280 --> 00:34:03,640
member giving Pablo and Patrick at the

00:33:59,679 --> 00:34:05,470
time more credit so that I regret I also

00:34:03,640 --> 00:34:07,480
regret that contract and net helpers are

00:34:05,470 --> 00:34:09,159
still in kernel space I mean I think for

00:34:07,480 --> 00:34:11,169
about 10 years or longer we have the

00:34:09,159 --> 00:34:13,629
infrastructure of doing them in user

00:34:11,169 --> 00:34:17,800
space but then still in reality they're

00:34:13,629 --> 00:34:19,690
implemented in the kernel the city

00:34:17,800 --> 00:34:22,060
netlink helped infrastructure is there

00:34:19,690 --> 00:34:25,480
but I don't think it's very popular so

00:34:22,060 --> 00:34:28,659
we still have a sn1 parsing in the SNMP

00:34:25,480 --> 00:34:31,480
net helper and and and sip nat helpers

00:34:28,659 --> 00:34:35,619
and and h.323 nat helpers in the kernel

00:34:31,480 --> 00:34:37,119
which make me uneasy we still have

00:34:35,619 --> 00:34:38,480
people that think they need dynamic

00:34:37,119 --> 00:34:40,369
fully dynamic IP

00:34:38,480 --> 00:34:44,540
- ipv6 network address import

00:34:40,369 --> 00:34:46,399
translation which well okay I can only

00:34:44,540 --> 00:34:47,030
have regret about it I can't do anything

00:34:46,399 --> 00:34:49,220
about it

00:34:47,030 --> 00:34:52,250
and we have no replacement for the net

00:34:49,220 --> 00:34:54,590
filter simulator which means the net

00:34:52,250 --> 00:34:56,750
filter code remains largely without test

00:34:54,590 --> 00:35:00,109
as well without automatic tests at least

00:34:56,750 --> 00:35:02,119
sure there is unit tests and so on in an

00:35:00,109 --> 00:35:03,830
eff tables in user space and in other

00:35:02,119 --> 00:35:05,570
parts but the actual kernel code

00:35:03,830 --> 00:35:07,670
including all the connection tracking

00:35:05,570 --> 00:35:10,880
and net code does not have automatic

00:35:07,670 --> 00:35:13,990
regression tests and that I think is

00:35:10,880 --> 00:35:16,490
rather sad state I know in the kernel

00:35:13,990 --> 00:35:18,050
it's sort of a different culture than in

00:35:16,490 --> 00:35:20,359
some other projects and in the kernel

00:35:18,050 --> 00:35:22,430
you have millions or billions of users

00:35:20,359 --> 00:35:24,080
out there and and you basically rely on

00:35:22,430 --> 00:35:26,030
the fact that there are some early

00:35:24,080 --> 00:35:28,160
adopters who will run into the bugs and

00:35:26,030 --> 00:35:30,020
report them so you can fix them but I

00:35:28,160 --> 00:35:31,780
think especially with something as

00:35:30,020 --> 00:35:35,210
complex as netfilter

00:35:31,780 --> 00:35:38,450
I'm not sure how long it actually takes

00:35:35,210 --> 00:35:40,940
until somebody finds bugs in in in in

00:35:38,450 --> 00:35:43,359
parts of the code so with the size and

00:35:40,940 --> 00:35:46,609
relevance of the Linux industry in 2017

00:35:43,359 --> 00:35:49,990
I'm a bit surprised why people don't

00:35:46,609 --> 00:35:52,760
invest in automatic test suits to really

00:35:49,990 --> 00:35:54,500
validate that you're sure I mean in

00:35:52,760 --> 00:35:57,680
other projects that I'm involved in all

00:35:54,500 --> 00:35:59,480
these days and also with age of course

00:35:57,680 --> 00:36:01,940
over time you look at things differently

00:35:59,480 --> 00:36:03,710
I basically have the attitude well if a

00:36:01,940 --> 00:36:05,990
feature is not automatically tested it's

00:36:03,710 --> 00:36:07,700
of very little use only if you can

00:36:05,990 --> 00:36:09,410
automatically validate it you can be

00:36:07,700 --> 00:36:11,770
sure that it does what it does and it

00:36:09,410 --> 00:36:15,950
continue to do what it's supposed to do

00:36:11,770 --> 00:36:17,660
and in absence of that it's yeah you

00:36:15,950 --> 00:36:18,590
know how often does somebody do a manual

00:36:17,660 --> 00:36:21,859
test and so on

00:36:18,590 --> 00:36:24,920
another regret I have in technically is

00:36:21,859 --> 00:36:27,200
that we should have pushed more for for

00:36:24,920 --> 00:36:29,720
user space logging in firewalling

00:36:27,200 --> 00:36:33,080
you locti I wrote the first version in

00:36:29,720 --> 00:36:34,670
2000 I think and 17 years later still a

00:36:33,080 --> 00:36:38,060
lot of people are doing syslog based

00:36:34,670 --> 00:36:40,820
logging from packet filter rules with a

00:36:38,060 --> 00:36:43,100
string printf in the kernel and yeah

00:36:40,820 --> 00:36:44,720
okay it's not elegant but then if that's

00:36:43,100 --> 00:36:46,130
what people want and I think we should

00:36:44,720 --> 00:36:50,030
we could have more pushed a bit more

00:36:46,130 --> 00:36:52,310
okay well thanks to the audience for

00:36:50,030 --> 00:36:54,470
bearing with me thanks to the net

00:36:52,310 --> 00:36:57,350
me for inviting me to give this keynote

00:36:54,470 --> 00:37:01,730
thanks for rusty to rusty for being my

00:36:57,350 --> 00:37:03,380
hero at the time as a youngster getting

00:37:01,730 --> 00:37:05,630
into kernel development to Pablo for

00:37:03,380 --> 00:37:07,220
picking up the pieces when I left today

00:37:05,630 --> 00:37:10,130
for being everyone's here including

00:37:07,220 --> 00:37:12,380
rusty zero to Jasper for a lot of the

00:37:10,130 --> 00:37:15,170
pictures I used here without giving him

00:37:12,380 --> 00:37:16,820
proper credit on each of the page and to

00:37:15,170 --> 00:37:19,220
every single netfilter contributor out

00:37:16,820 --> 00:37:24,830
there for making us what we are today

00:37:19,220 --> 00:37:26,630
Thank You Annie

00:37:24,830 --> 00:37:29,590
we have five minutes anybody wants to

00:37:26,630 --> 00:37:29,590

YouTube URL: https://www.youtube.com/watch?v=D1eMqKyn09Y


