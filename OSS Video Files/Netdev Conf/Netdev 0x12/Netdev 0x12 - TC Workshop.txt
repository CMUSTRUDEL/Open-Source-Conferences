Title: Netdev 0x12 - TC Workshop
Publication date: 2018-09-02
Playlist: Netdev 0x12
Description: 
	Jamal Hadi Salim chaired a working session with face to face discussions on different Traffic Control topics on July 11th, 2018, at Netdev 0x12 in Montreal.

More info:
https://www.netdevconf.org/0x12/session.html?tc-workshop
Captions: 
	00:00:03,170 --> 00:00:31,910
all right this is the internet I'm

00:00:29,369 --> 00:00:31,910
writing a document

00:04:54,380 --> 00:05:01,760
and it is fat so it is there any

00:04:58,310 --> 00:05:10,670
questions on this I won't spend much

00:05:01,760 --> 00:05:11,690
time yeah I'm gonna post it so the

00:05:10,670 --> 00:05:16,070
question is where is it

00:05:11,690 --> 00:05:18,610
use the mic a few yeah if there's two

00:05:16,070 --> 00:05:29,330
mics because it's being recorded

00:05:18,610 --> 00:05:30,920
my mom's out here yeah I don't know

00:05:29,330 --> 00:05:33,080
which post it I'm looking for location

00:05:30,920 --> 00:05:56,090
to put it but it's using something

00:05:33,080 --> 00:05:59,650
called get book all right look for the

00:05:56,090 --> 00:05:59,650
next section

00:06:07,620 --> 00:06:23,130
yeah before admitted it next slide yeah

00:06:20,110 --> 00:06:23,130
betray me to dinner

00:06:40,560 --> 00:06:43,920
yeah that's what

00:06:50,889 --> 00:07:24,689
yeah requires that is

00:08:39,190 --> 00:08:46,160
so if you look if you look at this this

00:08:43,550 --> 00:08:49,160
is the classifier loop if you wanna call

00:08:46,160 --> 00:08:53,120
it filters any change there's a chain

00:08:49,160 --> 00:08:59,750
one chain another one so we loop we find

00:08:53,120 --> 00:09:11,480
a match each machine which calls a bunch

00:08:59,750 --> 00:09:15,310
of actions the life time of the major is

00:09:11,480 --> 00:09:34,130
just between within this construction so

00:09:15,310 --> 00:09:37,340
I picked this TC skb field the CV

00:09:34,130 --> 00:09:47,120
structure which is a pointer it's 48

00:09:37,340 --> 00:09:49,460
bytes for dissection so you you can each

00:09:47,120 --> 00:09:52,490
subsystem that you can use it to store

00:09:49,460 --> 00:09:57,500
temporary state it's not guaranteed to

00:09:52,490 --> 00:10:01,550
survive in the next function anybody on

00:09:57,500 --> 00:10:03,830
it but given that in our case the life

00:10:01,550 --> 00:10:07,970
time of the guarantee lifetime is here

00:10:03,830 --> 00:10:11,030
then I checked all the code there's no

00:10:07,970 --> 00:10:26,060
consume of this except for the first few

00:10:11,030 --> 00:10:29,420
fields yeah I mean there's that those

00:10:26,060 --> 00:10:31,790
first three fields are used by I've seen

00:10:29,420 --> 00:10:34,460
TCP septum I think in consumed by the K

00:10:31,790 --> 00:10:38,540
disk but so we're reserving the bombed

00:10:34,460 --> 00:10:41,440
fashion that filled the 20 bytes is more

00:10:38,540 --> 00:10:41,440
than enough to store

00:10:46,270 --> 00:10:53,990
and I borrowed heavily from so you need

00:10:51,589 --> 00:10:59,089
some methods or help us to set and get

00:10:53,990 --> 00:11:02,959
this metadata the IFE action has a lot

00:10:59,089 --> 00:11:04,910
of helper functions that setting in

00:11:02,959 --> 00:11:09,440
encoding encoding and decoding metadata

00:11:04,910 --> 00:11:16,100
on the wire so they they we can reuse

00:11:09,440 --> 00:11:23,870
some of that stuff so the first one is I

00:11:16,100 --> 00:11:27,890
want to get the consumer will specify a

00:11:23,870 --> 00:11:31,850
method ID from by the skp get retired a

00:11:27,890 --> 00:11:33,980
void pointer to their dinner the

00:11:31,850 --> 00:11:36,080
producer will just call the best heavy

00:11:33,980 --> 00:11:38,230
metal cent passive this give me what the

00:11:36,080 --> 00:11:41,209
maitreyee value the length the void

00:11:38,230 --> 00:11:49,270
pointer to theta I'm assuming in this

00:11:41,209 --> 00:11:53,079
case they're just looking at peaceful

00:11:49,270 --> 00:11:53,079
sample call that I've seen so far

00:11:58,930 --> 00:12:04,339
yeah but what kind of hobby put the

00:12:01,520 --> 00:12:07,940
metadata P I'll be put the metadata

00:12:04,339 --> 00:12:13,100
being difficult scenarios single

00:12:07,940 --> 00:12:14,570
metadata 64 bit so we have 20 bytes so

00:12:13,100 --> 00:12:18,770
we can probably sit a couple of them

00:12:14,570 --> 00:12:26,320
maybe but that's eight fights to 64 bits

00:12:18,770 --> 00:12:29,570
and 132 so and maybe a few smaller ones

00:12:26,320 --> 00:12:32,600
so let's look safe to me that we can

00:12:29,570 --> 00:12:36,520
pass it between back and forth it was

00:12:32,600 --> 00:12:36,520
identified as a gap now meeting

00:14:26,209 --> 00:14:32,310
okay point taken

00:14:29,600 --> 00:14:43,500
so we'll be fine just what that data is

00:14:32,310 --> 00:14:45,060
in a different structure problem when I

00:14:43,500 --> 00:14:48,810
look to the code is somebody's actually

00:14:45,060 --> 00:14:52,170
mucking around with across subsystems

00:14:48,810 --> 00:15:31,800
I think I have to go look again so I

00:14:52,170 --> 00:15:43,339
didn't want to comments so this was a

00:15:31,800 --> 00:15:43,339
gap that was tamari is another

00:16:48,750 --> 00:16:51,990
[Music]

00:16:59,900 --> 00:17:03,000
[Music]

00:17:09,510 --> 00:17:16,589
[Music]

00:17:18,890 --> 00:17:21,929
[Music]

00:17:27,940 --> 00:17:35,390
and there's something in the middle of

00:17:29,900 --> 00:17:43,120
saying I want to use some pieces I don't

00:17:35,390 --> 00:17:54,550
want to create some new technology maybe

00:17:43,120 --> 00:17:54,550
technology which to the packet summer

00:17:56,540 --> 00:17:59,710
[Music]

00:18:26,890 --> 00:18:32,149
okay so now all this what we're trying

00:18:29,809 --> 00:18:37,429
to do we are trying to come up with

00:18:32,149 --> 00:18:41,360
something called the and ID behind that

00:18:37,429 --> 00:18:49,220
this time the picture will be generic to

00:18:41,360 --> 00:18:52,640
multiple won't be it will use this as a

00:18:49,220 --> 00:18:56,330
back end and it will be able to use all

00:18:52,640 --> 00:19:01,029
the leaner of sporting entity in

00:18:56,330 --> 00:19:01,029
addition to that to add some customized

00:19:04,090 --> 00:19:16,159
this is an example it's not all the

00:19:06,769 --> 00:19:20,210
talks about looking at PC quite terrible

00:19:16,159 --> 00:19:25,760
you can define a pipeline in all those

00:19:20,210 --> 00:19:28,880
points to an edifice of tables create

00:19:25,760 --> 00:19:32,630
quite flexible match in action we can

00:19:28,880 --> 00:19:37,159
always add additional accessibility

00:19:32,630 --> 00:19:38,840
there and make major power system all

00:19:37,159 --> 00:19:41,659
this right because it is ability to

00:19:38,840 --> 00:19:43,639
define you all they type in information

00:19:41,659 --> 00:19:48,500
between different table it's quite

00:19:43,639 --> 00:19:53,330
powerful power which is the power sing

00:19:48,500 --> 00:19:54,320
every person the person part and again

00:19:53,330 --> 00:19:57,649
this is work in progress

00:19:54,320 --> 00:20:01,130
we are working on that now it is not

00:19:57,649 --> 00:20:04,039
just an ID it is not something before so

00:20:01,130 --> 00:20:14,360
we be in write code but I want to show

00:20:04,039 --> 00:20:19,010
our plan and when you're modifying the

00:20:14,360 --> 00:20:27,260
parser is not only if is not struct feel

00:20:19,010 --> 00:20:31,639
because then you can from the time it is

00:20:27,260 --> 00:20:34,299
more than that you need actually to you

00:20:31,639 --> 00:20:34,299
want the ability to

00:20:49,500 --> 00:20:52,609
[Music]

00:21:05,500 --> 00:21:12,760
and in more than how you have ability to

00:21:13,000 --> 00:21:22,310
impose after well - after the three

00:21:18,140 --> 00:21:24,530
replace email whatever and the question

00:21:22,310 --> 00:21:29,600
is how can we do it's an introduced

00:21:24,530 --> 00:21:36,590
nothing to do much talk about this only

00:21:29,600 --> 00:21:41,120
sector which actually is the structure

00:21:36,590 --> 00:21:48,560
to extract envelopes and parcel data and

00:21:41,120 --> 00:21:51,440
currently it is fixed so it's an NP so

00:21:48,560 --> 00:21:55,250
lvl 4 are well defined out you can see

00:21:51,440 --> 00:21:57,950
it is out coated and then the format is

00:21:55,250 --> 00:21:59,150
out for that and once you get the deals

00:21:57,950 --> 00:22:00,920
with you Camille with it you know it's

00:21:59,150 --> 00:22:04,430
been extracted by them if you introduce

00:22:00,920 --> 00:22:06,350
a new peel your puppy your before the

00:22:04,430 --> 00:22:08,990
sector won't be able to extract the IP

00:22:06,350 --> 00:22:12,260
even if there is an IEP the only all you

00:22:08,990 --> 00:22:20,090
have is a new MPLS or Ann Ewing panther

00:22:12,260 --> 00:22:23,810
Emily or whatever and this is maybe this

00:22:20,090 --> 00:22:26,600
can be a solution to that the follow of

00:22:23,810 --> 00:22:30,070
the sector is looking at the packets

00:22:26,600 --> 00:22:30,070
it's not in the prototype

00:22:36,620 --> 00:22:41,830
we won't see the animation that's okay

00:22:39,590 --> 00:22:52,460
solely for thats all we try to play that

00:22:41,830 --> 00:22:55,309
so each decision point we can say okay

00:22:52,460 --> 00:22:57,080
stop we can say go back to the protocol

00:22:55,309 --> 00:23:02,960
for example if you are multiple we don't

00:22:57,080 --> 00:23:11,080
have a you want to iterate and you can

00:23:02,960 --> 00:23:19,700
go to the next level you can decide to

00:23:11,080 --> 00:23:27,710
back to the example and you can rotate

00:23:19,700 --> 00:23:41,240
in the IP protocol itself options that

00:23:27,710 --> 00:23:42,799
way and you can go out in case in which

00:23:41,240 --> 00:23:46,700
we can actually at the new disappear

00:23:42,799 --> 00:23:48,710
option or the new portal like repls new

00:23:46,700 --> 00:23:55,700
VPLS or you invent anomaly or whatever

00:23:48,710 --> 00:23:58,340
and for that we can add EBP a few points

00:23:55,700 --> 00:24:00,470
on the boat apart and if you put point

00:23:58,340 --> 00:24:05,590
on the ID photo power part and by doing

00:24:00,470 --> 00:24:10,220
that we can actually be able to jump on

00:24:05,590 --> 00:24:12,289
new headers jump word of the artist

00:24:10,220 --> 00:24:15,770
going back to the photo and they just

00:24:12,289 --> 00:24:18,740
say okay I guess the new ders or going

00:24:15,770 --> 00:24:22,250
to the IP photo going in a loop EP or a

00:24:18,740 --> 00:24:28,940
new tunnel as N and so on so this is the

00:24:22,250 --> 00:24:32,049
high level idea slowing person in my

00:24:28,940 --> 00:24:32,049
parallel topic now mine

00:25:38,290 --> 00:25:41,460
[Music]

00:26:30,340 --> 00:26:33,480
[Music]

00:27:32,000 --> 00:29:09,620
I guess this is something we can and

00:29:07,670 --> 00:29:17,510
again that idea is that the user will I

00:29:09,620 --> 00:29:19,640
to before it will fire into TCM and the

00:29:17,510 --> 00:29:22,030
match option from the PC from the house

00:29:19,640 --> 00:29:22,030
and the

00:31:26,190 --> 00:31:29,519
[Music]

00:32:37,920 --> 00:32:40,989
[Music]

00:33:46,470 --> 00:33:49,640
[Music]

00:34:04,330 --> 00:34:07,420
[Music]

00:38:48,250 --> 00:38:51,380
[Music]

00:40:10,390 --> 00:41:38,950
I have to write so to interact this or

00:41:37,269 --> 00:41:42,000
mostly interested in the portability

00:41:38,950 --> 00:41:46,589
aspect of p4 we have some standard

00:41:42,000 --> 00:41:46,589
architectures for different

00:43:46,020 --> 00:43:49,020
programming

00:45:31,009 --> 00:45:37,679
oh maybe I can introduce a new p4

00:45:34,259 --> 00:45:41,249
architecture or every class on

00:45:37,679 --> 00:45:44,219
networking devices trying to control and

00:45:41,249 --> 00:45:45,959
write a special program for others so I

00:45:44,219 --> 00:45:47,880
could have like a next EP architecture

00:45:45,959 --> 00:45:50,009
and write the Pico program which is

00:45:47,880 --> 00:45:51,809
going to be running the next EP I can

00:45:50,009 --> 00:45:53,549
have different architectures maybe four

00:45:51,809 --> 00:45:55,979
different CG classifiers and write

00:45:53,549 --> 00:45:59,150
different eco programs I can use the

00:45:55,979 --> 00:45:59,150
portable standard architect

00:49:56,890 --> 00:49:59,890
for

00:51:11,140 --> 00:51:39,530
what the I stands for is there any

00:51:16,750 --> 00:51:43,300
program which Portofino means it comes

00:51:39,530 --> 00:51:43,300
with a native civilization format

00:51:53,090 --> 00:51:56,219
[Music]

00:52:50,370 --> 00:52:53,449
[Music]

00:53:05,270 --> 00:53:18,030
or like that for balls which

00:53:08,970 --> 00:53:23,490
architecture what is the best or

00:53:18,030 --> 00:53:26,840
detector I can think for basically what

00:53:23,490 --> 00:53:38,780
I want to do which is export existing

00:53:26,840 --> 00:53:38,780
and be able to add which solution for us

00:55:21,979 --> 00:55:26,519
but there were some cases where a

00:55:24,420 --> 00:55:29,099
topological sorting wasn't unique and

00:55:26,519 --> 00:55:31,920
then you could have actually some work

00:55:29,099 --> 00:55:33,390
cases when you are adding others in the

00:55:31,920 --> 00:55:36,920
vibrator were not present in the

00:55:33,390 --> 00:55:36,920
original where things

00:55:54,110 --> 00:55:57,110
you

00:57:57,810 --> 00:58:40,330
so x1 h header that comes

00:58:37,440 --> 00:58:44,980
so before we assume that you do the

00:58:40,330 --> 00:58:47,490
boxing once menu actually implemented

00:58:44,980 --> 00:58:52,600
with the ephors language we assume that

00:58:47,490 --> 00:58:55,360
and then you have a bunch of and so that

00:58:52,600 --> 00:58:57,970
each like generic temporary flank

00:58:55,360 --> 00:59:13,210
parameter as easy as your type which is

00:58:57,970 --> 00:59:17,560
available throughout which is also

00:59:13,210 --> 00:59:21,660
provided which is available throughout

00:59:17,560 --> 00:59:21,660
the pipeline and so forces may be

00:59:28,170 --> 01:01:00,010
you're just like what kind of method

01:00:58,630 --> 01:01:02,020
that would be available for the first

01:01:00,010 --> 01:01:09,240
flex looks for example I think it makes

01:01:02,020 --> 01:01:09,240
sense of the US sports with the land and

01:01:09,750 --> 01:01:17,320
likes one block maybe or x1 make

01:01:15,630 --> 01:01:19,710
decision and you want to drop the

01:01:17,320 --> 01:01:19,710
package

01:03:17,210 --> 01:03:19,270
Oh

01:06:19,130 --> 01:06:23,910
things are 2 things you're actually

01:06:21,960 --> 01:06:27,619
talking about this approach but I think

01:06:23,910 --> 01:06:27,619
making long terms there should be a way

01:06:37,549 --> 01:06:43,410
for 16 mechanism called annotations

01:06:40,549 --> 01:06:45,599
which basically let you attach any kind

01:06:43,410 --> 01:06:48,900
of flags to be for object and you can

01:06:45,599 --> 01:06:54,630
define like your own metalanguage using

01:06:48,900 --> 01:06:58,970
those annotations what I'm saying is we

01:06:54,630 --> 01:06:58,970
shine like new annotation here I call

01:07:28,250 --> 01:08:12,450
or so it doesn't have to be easy for

01:08:07,290 --> 01:08:16,710
program information there is the one

01:08:12,450 --> 01:08:40,650
that's been a jury might give advice

01:08:16,710 --> 01:08:48,810
could imagine can be based on that's why

01:08:40,650 --> 01:08:52,920
right now there is M whereas or compiler

01:08:48,810 --> 01:08:57,240
generates byte code specific before and

01:08:52,920 --> 01:09:01,940
there is like a horsey idea compiler

01:08:57,240 --> 01:09:01,940
which I guess this moment for TCP

01:12:50,210 --> 01:12:53,380
[Music]

01:13:22,679 --> 01:13:43,440
so I probably need user space

01:13:24,659 --> 01:13:49,130
application for driver for before native

01:13:43,440 --> 01:13:52,880
devices another way to upload and

01:13:49,130 --> 01:13:52,880
generate before drivers

01:14:49,270 --> 01:15:01,820
so so is really here I'm proposing to

01:14:57,340 --> 01:15:29,989
driver that's based in the car that's

01:15:01,820 --> 01:15:33,830
going to let you control you run time TC

01:15:29,989 --> 01:15:35,630
n P for example because you will return

01:15:33,830 --> 01:15:39,500
a people program your programming your

01:15:35,630 --> 01:15:41,120
pranks blocks so you want like control

01:15:39,500 --> 01:15:43,790
plane applications to be able to use

01:15:41,120 --> 01:15:48,110
some carrot before interface to talk to

01:15:43,790 --> 01:15:49,010
those flags at the same time you want to

01:15:48,110 --> 01:15:53,200
bypass the colonel

01:15:49,010 --> 01:16:00,760
so you can need to convert those runtime

01:15:53,200 --> 01:16:03,920
messages in - but then you're talking to

01:16:00,760 --> 01:16:05,950
some people other work to convert it

01:16:03,920 --> 01:16:05,950
back

01:16:22,400 --> 01:16:27,030
provided by the compiler so you need to

01:16:25,380 --> 01:16:30,570
know how to convert shortage for untie

01:16:27,030 --> 01:16:32,780
messages to CC comments and let's take

01:16:30,570 --> 01:16:32,780
an example

01:18:31,430 --> 01:18:34,529
[Music]

01:18:55,300 --> 01:18:58,409
[Music]

01:19:26,070 --> 01:19:32,940
this can happen you points down to you

01:19:28,810 --> 01:19:32,940
have some identifies funny to be tidy

01:19:46,890 --> 01:19:50,580
say something about this

01:22:00,490 --> 01:22:03,490
or

01:24:00,120 --> 01:24:13,830
the drivers

01:33:53,660 --> 01:34:03,720
talking about so zoom all mentioned our

01:33:59,760 --> 01:34:08,720
our goal is to take v4 code and

01:34:03,720 --> 01:34:08,720
translate it into a basically a working

01:34:10,550 --> 01:34:32,520
but so I'm going to start by showing

01:34:16,730 --> 01:34:35,460
simple we tested everything and then my

01:34:32,520 --> 01:34:37,200
my machine like crash like 10 minutes

01:34:35,460 --> 01:34:41,840
ago to try to set everything up so some

01:34:37,200 --> 01:34:41,840
of the some of the demo breaks may not

01:34:49,970 --> 01:34:59,100
this is a simple p4 program so just a

01:34:55,620 --> 01:35:03,120
few things I want to highlight I know I

01:34:59,100 --> 01:35:06,060
know before expert but a few things I

01:35:03,120 --> 01:35:08,190
wanna highlight is that the the p4 has

01:35:06,060 --> 01:35:10,650
definitions for the different headers

01:35:08,190 --> 01:35:17,630
it's gonna be processing for example as

01:35:10,650 --> 01:35:20,490
the as you can see that the internet

01:35:17,630 --> 01:35:26,940
header representation of the Ethernet

01:35:20,490 --> 01:35:30,290
header and the ipv4 header each table

01:35:26,940 --> 01:35:33,060
specifies of each of those structures

01:35:30,290 --> 01:35:38,480
specifies the layout of the specific

01:35:33,060 --> 01:35:38,480
header we want to deal with there's also

01:35:49,989 --> 01:36:10,580
there is also a vicodin there's also

01:36:06,770 --> 01:36:12,949
this table which specify where we can

01:36:10,580 --> 01:36:16,460
specify keys that will be matched to

01:36:12,949 --> 01:36:24,699
action so in this little presentation to

01:36:16,460 --> 01:36:28,010
focus on this ipv4 forward action so

01:36:24,699 --> 01:36:34,960
we're matching on the ipv4 destination

01:36:28,010 --> 01:36:37,960
header and we want to execute this ipv4

01:36:34,960 --> 01:36:37,960
forward

01:37:18,780 --> 01:37:25,450
so this yeah so that means I'm already

01:37:22,480 --> 01:37:29,790
touching this but this ipv4 forward

01:37:25,450 --> 01:37:32,110
action you know set some metadata so we

01:37:29,790 --> 01:37:33,400
talked earlier about how that's actually

01:37:32,110 --> 01:37:35,410
working for a risk so we haven't

01:37:33,400 --> 01:37:38,410
implemented that yet

01:37:35,410 --> 01:37:41,160
and it's going to swap copy the

01:37:38,410 --> 01:37:44,800
destination address the source address

01:37:41,160 --> 01:37:46,780
set the destination address as a user

01:37:44,800 --> 01:37:49,810
programmable parameter that's passed as

01:37:46,780 --> 01:37:59,740
part of this ipv4 forward action and

01:37:49,810 --> 01:38:02,560
finally decrement the TTL value so to

01:37:59,740 --> 01:38:04,800
convert this TC there's two components

01:38:02,560 --> 01:38:07,270
seriously there's the key matching

01:38:04,800 --> 01:38:10,000
component that actually picks out with

01:38:07,270 --> 01:38:14,250
action we're going to execute and then

01:38:10,000 --> 01:38:17,110
there's the actual action itself so to

01:38:14,250 --> 01:38:22,030
do the matching we're going to use we're

01:38:17,110 --> 01:38:25,480
converting to the u-32 classifier and

01:38:22,030 --> 01:38:31,230
the actual packet processing components

01:38:25,480 --> 01:38:31,230
are implemented using the edit

01:38:49,179 --> 01:40:10,610
so as so so anyway you can see in the

01:40:04,730 --> 01:40:16,219
JSON we for each header type we have the

01:40:10,610 --> 01:40:18,650
different fields and in the we we

01:40:16,219 --> 01:40:24,139
support three different P edit commands

01:40:18,650 --> 01:40:26,530
and one u32 so I command you 32 has to

01:40:24,139 --> 01:40:30,219
support matching so you can see this

01:40:26,530 --> 01:40:33,559
match command here so this is the

01:40:30,219 --> 01:40:36,020
conversion so for example for the which

01:40:33,559 --> 01:40:38,360
field is this let me go to destination

01:40:36,020 --> 01:40:41,010
address so to match on the destination

01:40:38,360 --> 01:40:45,550
address this is the corresponding

01:40:41,010 --> 01:40:48,189
you thirty-two cold to add to the

01:40:45,550 --> 01:40:51,969
destination address this is the Pieta

01:40:48,189 --> 01:41:24,099
it's a snippet of the Edit code and so

01:40:51,969 --> 01:41:28,420
on for setting so you can see here

01:41:24,099 --> 01:41:49,869
there's this is the actual command we we

01:41:28,420 --> 01:41:52,929
used to generate the so this is a fee

01:41:49,869 --> 01:41:56,800
for it's supposed to mimic what a what

01:41:52,929 --> 01:42:01,239
you do creating a regular TC filter so

01:41:56,800 --> 01:42:04,869
we we add a filter the filter is this

01:42:01,239 --> 01:42:15,820
the key is this ipv4 LPM which is the

01:42:04,869 --> 01:42:21,909
the table from our p4 file we're

01:42:15,820 --> 01:42:24,789
creating this on this these device first

01:42:21,909 --> 01:42:29,189
apply the parent the protocol the IP the

01:42:24,789 --> 01:42:29,189
key here's the IP address of the

01:42:29,550 --> 01:42:34,150
container that we're sending traffic to

01:42:32,019 --> 01:42:37,459
and then the other important part is

01:42:34,150 --> 01:42:39,889
this ipv4 forward

01:42:37,459 --> 01:42:43,340
components so that's the actual action

01:42:39,889 --> 01:42:45,110
or the p4 action we're deploying and the

01:42:43,340 --> 01:42:50,269
port and destination address are the

01:42:45,110 --> 01:42:54,880
parameters that it that it took so when

01:42:50,269 --> 01:42:57,469
we run this script the very bottom here

01:42:54,880 --> 01:43:02,659
it's a little difficult to see but

01:42:57,469 --> 01:43:04,909
that's the that's the resulting TC

01:43:02,659 --> 01:43:07,760
script that we generate from this each

01:43:04,909 --> 01:43:10,999
step we show here for example to copy

01:43:07,760 --> 01:43:13,729
the destination address to the source

01:43:10,999 --> 01:43:16,840
address it's it's accomplished through

01:43:13,729 --> 01:43:20,530
these three you can see here these three

01:43:16,840 --> 01:43:20,530
edit lunch commands

01:44:10,640 --> 01:44:13,969
is on the

01:45:13,560 --> 01:45:16,560
okay

01:46:27,090 --> 01:46:47,310
from the wife's it is negative because

01:47:23,900 --> 01:47:27,230
from here

01:47:37,280 --> 01:47:40,370
[Music]

01:48:02,310 --> 01:48:05,369
[Music]

01:48:44,550 --> 01:48:49,129
[Applause]

01:49:03,230 --> 01:49:20,420
we're gonna get started no let's just

01:49:09,510 --> 01:49:23,880
wait for those people hello okay

01:49:20,420 --> 01:49:26,250
my name is lot I'm from Mellanox and I

01:49:23,880 --> 01:49:28,530
like to talk about effort which I've

01:49:26,250 --> 01:49:33,330
been doing since autumn it's paralyzing

01:49:28,530 --> 01:49:35,159
this eros update so basically to see

01:49:33,330 --> 01:49:37,469
already works and Harbor offload in

01:49:35,159 --> 01:49:40,230
initiative also why do we need it anyway

01:49:37,469 --> 01:49:43,409
because you can configure rules every

01:49:40,230 --> 01:49:45,540
all infrastructure is there so why who

01:49:43,409 --> 01:49:48,960
needs millions of rules

01:49:45,540 --> 01:49:51,179
I work in team which you see there are

01:49:48,960 --> 01:49:54,540
people who needs this kind of stuff so

01:49:51,179 --> 01:49:57,449
my team you provide in Harbor flows for

01:49:54,540 --> 01:49:59,850
open V switch and South there are a lot

01:49:57,449 --> 01:50:01,770
of people like Jamal who wants to be

01:49:59,850 --> 01:50:03,929
able to configure millions of rules and

01:50:01,770 --> 01:50:06,630
they want to do it fast they don't want

01:50:03,929 --> 01:50:07,140
to eight minutes for the rules to to be

01:50:06,630 --> 01:50:10,080
provisioned

01:50:07,140 --> 01:50:13,380
to hard work so I think every one of you

01:50:10,080 --> 01:50:15,210
knows what is open the switch soft wish

01:50:13,380 --> 01:50:17,670
Ryan with hypervisor a control stack

01:50:15,210 --> 01:50:20,489
silicon it's directly copied from open V

01:50:17,670 --> 01:50:22,980
switch website and in case of our

01:50:20,489 --> 01:50:26,130
connected scarred for Mellanox and when

01:50:22,980 --> 01:50:27,989
it does Harbor a flow-through kernel we

01:50:26,130 --> 01:50:31,140
leverage this in kernel infrastructure

01:50:27,989 --> 01:50:33,310
to do this and open we switch itself

01:50:31,140 --> 01:50:35,800
it's multi-threaded application it

01:50:33,310 --> 01:50:39,250
use any number of course we give to it

01:50:35,800 --> 01:50:40,960
and especially with Deepa DK and with

01:50:39,250 --> 01:50:44,260
but we want to do the Swiss kernel and

01:50:40,960 --> 01:50:46,840
the problem is that TC infrastructure is

01:50:44,260 --> 01:50:51,430
completely locked by one big lock our

01:50:46,840 --> 01:50:54,550
channel lock and so even if you provide

01:50:51,430 --> 01:50:56,620
the hundred threads for open V switch it

01:50:54,550 --> 01:51:00,100
will still be stuck waiting for F

01:50:56,620 --> 01:51:02,230
channel lock and by undal slow you know

01:51:00,100 --> 01:51:04,180
if you have ten percent of your time

01:51:02,230 --> 01:51:05,770
spent on some critical section you still

01:51:04,180 --> 01:51:07,600
will not be able to leverage parallelism

01:51:05,770 --> 01:51:09,970
for most more than 10 threads for

01:51:07,600 --> 01:51:12,310
example and I think in this case it's

01:51:09,970 --> 01:51:17,530
even more it's like 30 percent of time

01:51:12,310 --> 01:51:20,470
spent in general under channel locks you

01:51:17,530 --> 01:51:22,240
see so you can have a bunch of handler

01:51:20,470 --> 01:51:23,640
threads revalidated threads but then you

01:51:22,240 --> 01:51:26,260
have to go through the kernel and

01:51:23,640 --> 01:51:31,510
original mutex ruining everything for

01:51:26,260 --> 01:51:34,510
you so general DC architecture i

01:51:31,510 --> 01:51:37,240
reviewed some previous talk talks about

01:51:34,510 --> 01:51:39,790
people were given about TC and about the

01:51:37,240 --> 01:51:44,290
vs and sons and said that it can take

01:51:39,790 --> 01:51:46,060
100 milliseconds of holding a general

01:51:44,290 --> 01:51:48,310
look for some tasks actually it's even

01:51:46,060 --> 01:51:50,350
more as you can see you can easily lock

01:51:48,310 --> 01:51:52,510
it up for almost two seconds I just

01:51:50,350 --> 01:51:55,330
configure it to millions of rules and I

01:51:52,510 --> 01:51:58,060
deleted the queue which holds them and

01:51:55,330 --> 01:52:00,100
for two seconds you cannot create an

01:51:58,060 --> 01:52:03,010
inner on judy's you cannot change IP

01:52:00,100 --> 01:52:04,390
address Reena interfaces and this

01:52:03,010 --> 01:52:06,220
Hardware flaws it will be even worse

01:52:04,390 --> 01:52:09,850
because it will include all the time it

01:52:06,220 --> 01:52:13,930
needs to remove rows from from your

01:52:09,850 --> 01:52:15,580
Renick so that's basically why our

01:52:13,930 --> 01:52:19,090
channel lock usage is so bad

01:52:15,580 --> 01:52:21,910
currently for for programs like open V

01:52:19,090 --> 01:52:23,860
switch and the another problem is it is

01:52:21,910 --> 01:52:26,050
that completely related tasks rely on

01:52:23,860 --> 01:52:28,090
same log so it's not per interface if

01:52:26,050 --> 01:52:29,500
something is really a global lock so

01:52:28,090 --> 01:52:31,510
whatever you send in some sense through

01:52:29,500 --> 01:52:35,590
net lint it probably takes a channel log

01:52:31,510 --> 01:52:40,300
and holds any other users can completely

01:52:35,590 --> 01:52:44,110
lock them out so what is currently there

01:52:40,300 --> 01:52:46,840
so orange box is part of the stack which

01:52:44,110 --> 01:52:47,370
holds our channel lock so as soon as you

01:52:46,840 --> 01:52:49,260
do nothing

01:52:47,370 --> 01:52:51,300
receive it determines the type of

01:52:49,260 --> 01:52:53,370
netting message handler should handle

01:52:51,300 --> 01:52:55,710
this message and if it's not unlocked

01:52:53,370 --> 01:52:57,990
handler it takes a channel lock so

01:52:55,710 --> 01:53:00,750
basically all the classifier API also

01:52:57,990 --> 01:53:01,680
flower infrastructure action API and

01:53:00,750 --> 01:53:03,660
then your driver

01:53:01,680 --> 01:53:06,480
everything happens while holding this

01:53:03,660 --> 01:53:12,510
looks you cannot do much parallelism

01:53:06,480 --> 01:53:14,550
with this kind of architecture and the

01:53:12,510 --> 01:53:16,500
problem with this is historically all

01:53:14,550 --> 01:53:18,840
the code in this infrastructure assumes

01:53:16,500 --> 01:53:21,840
that you hold the channel locks people

01:53:18,840 --> 01:53:23,520
of course people have this magic lock

01:53:21,840 --> 01:53:25,950
which holds everything for them and they

01:53:23,520 --> 01:53:28,790
start to rely on it in all kinds of

01:53:25,950 --> 01:53:31,080
situation that for example that your

01:53:28,790 --> 01:53:32,730
interface will not be remove that no one

01:53:31,080 --> 01:53:36,510
will delete the qgs cannot parallel

01:53:32,730 --> 01:53:39,270
modifications possible so it spreads the

01:53:36,510 --> 01:53:41,280
whole infrastructure because this one

01:53:39,270 --> 01:53:46,050
big lock is convenient of course it's

01:53:41,280 --> 01:53:50,070
convenient for implementers to use so

01:53:46,050 --> 01:53:52,380
that's from point of view of route

01:53:50,070 --> 01:53:54,570
create infrastructure that's how data

01:53:52,380 --> 01:53:56,220
structure looks like you obtain qgs

01:53:54,570 --> 01:53:58,620
chrome interface then you obtain blocks

01:53:56,220 --> 01:54:00,690
and you look up the chains ntp

01:53:58,620 --> 01:54:02,520
isn't filtered as an action and as you

01:54:00,690 --> 01:54:05,850
can see it's already kind of tree like

01:54:02,520 --> 01:54:07,980
structure so it's only nature of the

01:54:05,850 --> 01:54:09,480
care that you can lock on lis some nodes

01:54:07,980 --> 01:54:10,380
and it's right you don't have to lock

01:54:09,480 --> 01:54:16,320
the whole tree

01:54:10,380 --> 01:54:20,430
it means it's obvious right so if you go

01:54:16,320 --> 01:54:22,800
to insert filter selections here the

01:54:20,430 --> 01:54:24,480
orange line for people on that path part

01:54:22,800 --> 01:54:26,850
of audience of course you don't have to

01:54:24,480 --> 01:54:28,560
block all other people and not even

01:54:26,850 --> 01:54:30,480
talking about completely unrelated net

01:54:28,560 --> 01:54:33,660
in message handlers like change an API

01:54:30,480 --> 01:54:35,160
or IP address or whatever just even

01:54:33,660 --> 01:54:40,320
inside the tree you don't need to block

01:54:35,160 --> 01:54:43,800
all these guys if you see you can only

01:54:40,320 --> 01:54:45,420
look here the dashed line and these guys

01:54:43,800 --> 01:54:50,970
should be able to work in parallel to

01:54:45,420 --> 01:54:52,740
each other so my proposal is to

01:54:50,970 --> 01:54:56,610
completely remove our said after

01:54:52,740 --> 01:54:59,310
analogue from this stack as you can see

01:54:56,610 --> 01:55:00,449
now all the user space thread can

01:54:59,310 --> 01:55:02,580
completely cause

01:55:00,449 --> 01:55:06,590
sends an urgent message and they

01:55:02,580 --> 01:55:09,480
supposed to be handled in parallel and

01:55:06,590 --> 01:55:11,040
on the right you can see the data

01:55:09,480 --> 01:55:13,590
structure picture it's shortened well

01:55:11,040 --> 01:55:15,780
not the original but it describes some

01:55:13,590 --> 01:55:18,270
changes that I made so it's not some

01:55:15,780 --> 01:55:20,400
fancy algorithm which magically does it

01:55:18,270 --> 01:55:22,920
for you it just a lot of small changes

01:55:20,400 --> 01:55:25,230
in all infrastructure like some

01:55:22,920 --> 01:55:26,850
sometimes they had the reference counter

01:55:25,230 --> 01:55:30,750
sometimes reference counter was already

01:55:26,850 --> 01:55:33,660
there but it was not actually used it's

01:55:30,750 --> 01:55:35,580
used for example for block block can be

01:55:33,660 --> 01:55:39,300
shared between key discs so you have the

01:55:35,580 --> 01:55:41,670
reference counter a foreign key disk but

01:55:39,300 --> 01:55:43,440
the reference counter for cue disk was

01:55:41,670 --> 01:55:44,850
not taken when you add the rules from

01:55:43,440 --> 01:55:47,310
this kiddies because it's assumed that

01:55:44,850 --> 01:55:49,920
if you hold the channel lock no one can

01:55:47,310 --> 01:55:51,780
remove cue disk anyway so you just

01:55:49,920 --> 01:55:53,640
increment increment the counter if if

01:55:51,780 --> 01:55:56,610
you add additional user for kiddies but

01:55:53,640 --> 01:55:58,860
not when you work with key discs so I

01:55:56,610 --> 01:56:00,870
had to change the logic which works with

01:55:58,860 --> 01:56:02,340
cue disk and sometimes there were no no

01:56:00,870 --> 01:56:04,650
reference comes in at all I had

01:56:02,340 --> 01:56:07,860
reference counters and of course I had

01:56:04,650 --> 01:56:10,620
locks which look like linkedlist ideas

01:56:07,860 --> 01:56:13,280
whatever structures which are not safe

01:56:10,620 --> 01:56:16,860
to modify in parallel

01:56:13,280 --> 01:56:20,550
bunch of small changes and adapt like 60

01:56:16,860 --> 01:56:22,350
patches already I will talk about patch

01:56:20,550 --> 01:56:25,440
status afterwards think I'm getting

01:56:22,350 --> 01:56:29,179
ahead of myself so it took some code

01:56:25,440 --> 01:56:29,179
refactoring some additions and

01:56:30,980 --> 01:56:35,580
development status and the business

01:56:33,030 --> 01:56:37,800
editions were whist and now some of it

01:56:35,580 --> 01:56:42,150
is already up streamed some of it is

01:56:37,800 --> 01:56:44,940
pending on code review and what I did is

01:56:42,150 --> 01:56:48,000
of course a change classifier API and

01:56:44,940 --> 01:56:52,199
action API to allow this unlocked access

01:56:48,000 --> 01:56:55,050
and all actions were changed to also low

01:56:52,199 --> 01:56:57,120
unlocked access but not all filters not

01:56:55,050 --> 01:56:59,580
all pacifiers in cages because they're

01:56:57,120 --> 01:57:00,780
very complex and implementations so I of

01:56:59,580 --> 01:57:03,690
course don't want to go through all

01:57:00,780 --> 01:57:05,640
possible classifiers and modify them but

01:57:03,690 --> 01:57:08,790
I did it for classifiers which is used

01:57:05,640 --> 01:57:10,679
by obvious open the switch in case of

01:57:08,790 --> 01:57:12,380
card or float switches flavor classifier

01:57:10,679 --> 01:57:13,940
and in rescue disk and

01:57:12,380 --> 01:57:16,490
it's a very changed interface there that

01:57:13,940 --> 01:57:18,560
flux feel flex feel then you can set the

01:57:16,490 --> 01:57:23,740
flag that this classifier or qgs doesn't

01:57:18,560 --> 01:57:23,740
require caller to hold the channel lock

01:57:24,760 --> 01:57:28,880
ok so why are we doing that in the first

01:57:27,230 --> 01:57:31,610
place because we want to leverage

01:57:28,880 --> 01:57:33,680
parallelism to get better performance so

01:57:31,610 --> 01:57:35,870
in for single threaded performance case

01:57:33,680 --> 01:57:37,280
some patches well already submitted

01:57:35,870 --> 01:57:39,110
before I think some of them by my

01:57:37,280 --> 01:57:41,960
colleagues like for example they changed

01:57:39,110 --> 01:57:44,210
some lint list which menu have linear

01:57:41,960 --> 01:57:46,700
search to idea which they like

01:57:44,210 --> 01:57:48,320
structures logarithmic search so we

01:57:46,700 --> 01:57:50,870
already improved the single threaded

01:57:48,320 --> 01:57:53,600
case and there is not much you know you

01:57:50,870 --> 01:57:57,010
can do single freedom comparing to

01:57:53,600 --> 01:58:00,260
current CPUs which have tens of course

01:57:57,010 --> 01:58:02,090
so benchmark which I did is very simple

01:58:00,260 --> 01:58:06,500
I did not want to hard code anything

01:58:02,090 --> 01:58:09,980
it's just a bunch of bunch of batch

01:58:06,500 --> 01:58:12,230
files for easy and I did it on my CPUs

01:58:09,980 --> 01:58:15,170
middle of the line CPU twelve course

01:58:12,230 --> 01:58:17,510
again no fancy hardware no hard coded

01:58:15,170 --> 01:58:20,090
stuff and what I do is just run with

01:58:17,510 --> 01:58:23,180
exacts multiple instances of T seen in

01:58:20,090 --> 01:58:25,610
each TC hesitant bunch files and I

01:58:23,180 --> 01:58:28,220
measure how much time does it take to

01:58:25,610 --> 01:58:30,230
insert millions of rules and delete

01:58:28,220 --> 01:58:33,590
millions of rules you know to expose any

01:58:30,230 --> 01:58:35,800
kind of linear search for something

01:58:33,590 --> 01:58:42,410
which doesn't scale well with number of

01:58:35,800 --> 01:58:44,990
number of rules inserted so I mean sir

01:58:42,410 --> 01:58:47,720
2.4 million of rules vices number

01:58:44,990 --> 01:58:50,510
because a 12-course and easy to divide

01:58:47,720 --> 01:58:53,120
to 4 by 12 and if you have if your rule

01:58:50,510 --> 01:58:55,550
count is too small you will probably

01:58:53,120 --> 01:58:57,650
measure just disturbed startup time and

01:58:55,550 --> 01:58:59,750
the time it takes for its arcs to run

01:58:57,650 --> 01:59:01,940
multiple instances of Jesus it has to be

01:58:59,750 --> 01:59:05,270
some reasonable number of flaws but also

01:59:01,940 --> 01:59:07,250
not too many because you can't even dump

01:59:05,270 --> 01:59:09,920
them to count that was the long standing

01:59:07,250 --> 01:59:12,230
back which meant that damping flower

01:59:09,920 --> 01:59:13,820
classifiers is quadratic and

01:59:12,230 --> 01:59:17,540
complexities if you have for example

01:59:13,820 --> 01:59:19,730
five million rules today I left my set

01:59:17,540 --> 01:59:21,560
up overnight to just try try to count

01:59:19,730 --> 01:59:24,290
five million rules and flower and it

01:59:21,560 --> 01:59:25,550
wasn't finished by morning we submitted

01:59:24,290 --> 01:59:29,360
a patch to fix this but

01:59:25,550 --> 01:59:30,830
just find example of how many parts of

01:59:29,360 --> 01:59:36,200
this infrastructure currently are not

01:59:30,830 --> 01:59:38,720
optimized for this kind of load load so

01:59:36,200 --> 01:59:40,490
use cases which I tested so it's not a

01:59:38,720 --> 01:59:42,770
marketing presentation so I'm not only

01:59:40,490 --> 01:59:44,750
just you know testing rule insertion two

01:59:42,770 --> 01:59:46,820
standalone interfaces and telling you

01:59:44,750 --> 01:59:49,670
that we have that we have absolute

01:59:46,820 --> 01:59:51,770
scalability I test some very worst

01:59:49,670 --> 01:59:54,860
possible use case when I insert the same

01:59:51,770 --> 01:59:59,890
filters to same TP instance which

01:59:54,860 --> 02:00:03,050
basically means that slide

01:59:59,890 --> 02:00:13,850
so what use case is when we insert two

02:00:03,050 --> 02:00:15,470
same filters and actions so this is the

02:00:13,850 --> 02:00:18,020
worst case scenario and some better

02:00:15,470 --> 02:00:20,240
scenarios is when I'm in certain rules

02:00:18,020 --> 02:00:21,860
to standalone chains which means you

02:00:20,240 --> 02:00:23,450
only share the first node and as soon as

02:00:21,860 --> 02:00:27,980
you looked up the chain you insert a

02:00:23,450 --> 02:00:30,440
different classifier instance some rule

02:00:27,980 --> 02:00:34,090
type again is v double plus source and

02:00:30,440 --> 02:00:36,620
destination MAC address and for

02:00:34,090 --> 02:00:39,200
standalone chains each file has

02:00:36,620 --> 02:00:41,900
different chain index and when I test

02:00:39,200 --> 02:00:45,290
the worst case it all goes to Senshi and

02:00:41,900 --> 02:00:46,730
again shared the action which is when I

02:00:45,290 --> 02:00:48,350
provide the same index fraction which

02:00:46,730 --> 02:00:51,520
means that only first true create

02:00:48,350 --> 02:00:56,230
section allows a rule share the section

02:00:51,520 --> 02:00:59,150
it's kind of just a way to test which

02:00:56,230 --> 02:01:04,850
part consumes more CPU action code or a

02:00:59,150 --> 02:01:06,710
rule creation code so worst case

02:01:04,850 --> 02:01:08,480
scenario when we insert into very same

02:01:06,710 --> 02:01:10,610
chip instance and we have to increment

02:01:08,480 --> 02:01:15,590
the very same reference counters let us

02:01:10,610 --> 02:01:20,570
take very same locks it's once one

02:01:15,590 --> 02:01:23,990
instance of GC 3 6 and 12 as you can see

02:01:20,570 --> 02:01:26,570
even without removing a 10 a lot we

02:01:23,990 --> 02:01:28,820
still get some improves in three

02:01:26,570 --> 02:01:31,670
instances and why because obviously some

02:01:28,820 --> 02:01:33,860
part of TCC's user space and when you

02:01:31,670 --> 02:01:36,610
run into parallel you paralyze the user

02:01:33,860 --> 02:01:40,719
space part but not get no space part

02:01:36,610 --> 02:01:42,699
the services that vanilla kernel does

02:01:40,719 --> 02:01:45,940
not improve performance this number of

02:01:42,699 --> 02:01:48,580
course because as soon as you paralyzed

02:01:45,940 --> 02:01:51,699
the user space part can no space part

02:01:48,580 --> 02:01:53,830
cannot be paralyzed and in case the the

02:01:51,699 --> 02:01:55,570
blue bar is unlocked kernel insertion

02:01:53,830 --> 02:01:58,540
and dark green is unlocked kernel

02:01:55,570 --> 02:02:04,960
deletion and as you can see it continues

02:01:58,540 --> 02:02:06,730
to scale this number of course used say

02:02:04,960 --> 02:02:09,070
delete by the way does not scale very

02:02:06,730 --> 02:02:13,480
well and dry because delete is basically

02:02:09,070 --> 02:02:15,489
just removal of your classifier of your

02:02:13,480 --> 02:02:17,409
filter in your action from shared data

02:02:15,489 --> 02:02:19,540
structure like IDR and you have to look

02:02:17,409 --> 02:02:21,909
and all your work is locked anyway

02:02:19,540 --> 02:02:27,429
because you target in same data

02:02:21,909 --> 02:02:56,440
structure which contains them and you

02:02:27,429 --> 02:02:58,270
can because they are just no it's not a

02:02:56,440 --> 02:03:00,820
channel its internal spin locks which

02:02:58,270 --> 02:03:02,710
protects the ideas or kind of data

02:03:00,820 --> 02:03:05,190
structure but it's were case scenario

02:03:02,710 --> 02:03:07,630
because we target in exactly the same

02:03:05,190 --> 02:03:10,210
classifier instance exactly the same TP

02:03:07,630 --> 02:03:12,159
and when you delete you don't do

02:03:10,210 --> 02:03:14,380
anything much besides parts in initial

02:03:12,159 --> 02:03:16,270
message and then removing it from all

02:03:14,380 --> 02:03:19,210
the shared data structure which you have

02:03:16,270 --> 02:03:22,449
to look anyway that's why as we can see

02:03:19,210 --> 02:03:25,630
the threads registrant update to obtain

02:03:22,449 --> 02:03:32,139
at the top danger spin lock and not

02:03:25,630 --> 02:03:33,760
doing much actual work okay we reducing

02:03:32,139 --> 02:03:36,130
lock contention first of all we can use

02:03:33,760 --> 02:03:38,650
shared actions so instead of create an

02:03:36,130 --> 02:03:40,659
action power rule we only create one

02:03:38,650 --> 02:03:43,810
action and then all other rules are

02:03:40,659 --> 02:03:46,989
attached to the section and that means

02:03:43,810 --> 02:03:48,920
that we are no longer using the action

02:03:46,989 --> 02:03:52,580
ID are for modification of level

02:03:48,920 --> 02:03:53,989
cup and they are not allocating per CPU

02:03:52,580 --> 02:03:57,230
counters which is also kind of

02:03:53,989 --> 02:04:00,739
bottleneck because internally per CPU

02:03:57,230 --> 02:04:02,330
counters also have look so in best-case

02:04:00,739 --> 02:04:04,400
scenario for example when you target

02:04:02,330 --> 02:04:06,620
different interfaces of different chains

02:04:04,400 --> 02:04:09,410
you will see in profile and date more

02:04:06,620 --> 02:04:11,120
and more of per CPU code serving up

02:04:09,410 --> 02:04:13,820
because they have locks and it's

02:04:11,120 --> 02:04:15,560
relatively heavy operation maybe it can

02:04:13,820 --> 02:04:18,920
be improved for somehow a lot

02:04:15,560 --> 02:04:21,350
reallocating them I did not write yet

02:04:18,920 --> 02:04:23,719
because dispatch said mostly about

02:04:21,350 --> 02:04:26,120
enabling paralyze myself and it's not

02:04:23,719 --> 02:04:28,489
about any kind of optimization which

02:04:26,120 --> 02:04:30,620
applies to everything just removing our

02:04:28,489 --> 02:04:33,350
channel lock which will of course allow

02:04:30,620 --> 02:04:38,989
us to do some small changes to leverage

02:04:33,350 --> 02:04:42,440
the parallelism to the maximum so this

02:04:38,989 --> 02:04:44,060
one is different chain and of course the

02:04:42,440 --> 02:04:47,179
different cheapest is that it scales

02:04:44,060 --> 02:04:49,160
very well because now we don't share

02:04:47,179 --> 02:04:50,960
this data structure only initial look up

02:04:49,160 --> 02:04:53,870
as soon as you looked up with a chain

02:04:50,960 --> 02:04:57,380
and TP you don't have any more

02:04:53,870 --> 02:04:59,630
interference between threads besides a

02:04:57,380 --> 02:05:02,320
purse if you counted allocation in this

02:04:59,630 --> 02:05:08,380
case you can see that both delete and

02:05:02,320 --> 02:05:08,380
create scales very well in this scenario

02:05:08,410 --> 02:05:15,380
maybe someone has any questions people

02:05:11,690 --> 02:05:18,140
are silent but does everyone knows how

02:05:15,380 --> 02:05:20,210
GTC based basic disk architecture

02:05:18,140 --> 02:05:22,760
because maybe people some people don't

02:05:20,210 --> 02:05:29,300
know what this chain CP filter how it

02:05:22,760 --> 02:05:30,199
all all fits together 2.4 million rules

02:05:29,300 --> 02:05:32,510
total yeah

02:05:30,199 --> 02:05:34,699
in the 12 thread which at least 12

02:05:32,510 --> 02:05:36,530
instances of disease or 12 processes are

02:05:34,699 --> 02:05:39,170
running yeah each one is doing 200

02:05:36,530 --> 02:05:41,150
thousand yeah so is it possible that

02:05:39,170 --> 02:05:44,060
maybe one of them finishes ahead of time

02:05:41,150 --> 02:05:46,429
and so what's your jitter is there jitta

02:05:44,060 --> 02:05:49,520
in your results like this come again

02:05:46,429 --> 02:05:51,469
jitter like jitter yeah do you get

02:05:49,520 --> 02:05:55,929
consistent results all the time how many

02:05:51,469 --> 02:05:58,010
times ten ten percent difference

02:05:55,929 --> 02:05:59,750
probably if I had coded some call

02:05:58,010 --> 02:06:00,889
internal I can get much more consistent

02:05:59,750 --> 02:06:02,300
result but I won't

02:06:00,889 --> 02:06:04,639
to have tests which are completely

02:06:02,300 --> 02:06:06,590
reproducible by anyone you know no magic

02:06:04,639 --> 02:06:10,099
recorded stuff which no one can verify

02:06:06,590 --> 02:06:13,820
for themselves just userspace TC run in

02:06:10,099 --> 02:06:16,280
parallel with exact Sandbach files but

02:06:13,820 --> 02:06:19,159
the difference is very big I mean 10%

02:06:16,280 --> 02:06:25,999
jitter will not give you that much

02:06:19,159 --> 02:06:28,159
difference it's like 3.5 times okay it's

02:06:25,999 --> 02:06:30,320
for combining two approaches it's both

02:06:28,159 --> 02:06:32,179
using sharing a shared action so only

02:06:30,320 --> 02:06:42,590
one action is created and target

02:06:32,179 --> 02:06:45,019
different chains so it's for delete yes

02:06:42,590 --> 02:06:49,340
but for insert you can see that we have

02:06:45,019 --> 02:06:52,249
much better results for us insertion so

02:06:49,340 --> 02:06:59,269
I get like yeah five me half a million

02:06:52,249 --> 02:07:05,649
per second yeah come you have any

02:06:59,269 --> 02:07:05,649
questions remote mic is the mic please

02:07:09,229 --> 02:07:13,329
like my quiz Mike

02:07:27,570 --> 02:07:35,460
so these rules are added to PC layer in

02:07:32,100 --> 02:07:37,140
soft winner it's a software because

02:07:35,460 --> 02:07:38,730
first you have to do software

02:07:37,140 --> 02:07:40,380
implementation order to be able to

02:07:38,730 --> 02:07:43,560
implement the parallel driver itself

02:07:40,380 --> 02:07:45,150
because driver all drivers currently

02:07:43,560 --> 02:07:48,090
also assumes that you holes are channel

02:07:45,150 --> 02:07:50,850
log and the part of this patch set will

02:07:48,090 --> 02:07:54,330
be to give drivers the interface to

02:07:50,850 --> 02:07:56,760
register block and active callbacks that

02:07:54,330 --> 02:07:59,400
do not require color to holder channel

02:07:56,760 --> 02:08:01,680
lock so this one is without hardware yet

02:07:59,400 --> 02:08:03,330
because v7 we don't have a driver fully

02:08:01,680 --> 02:08:21,660
implemented for this until we get it

02:08:03,330 --> 02:08:23,130
upstream yeah of course will be slower

02:08:21,660 --> 02:08:25,590
because first of all you also call

02:08:23,130 --> 02:08:28,110
driver which is another piece of code

02:08:25,590 --> 02:08:30,480
run and you need to wait to send

02:08:28,110 --> 02:08:34,140
something to hardware and wait for some

02:08:30,480 --> 02:08:36,060
occur knock some results but it also

02:08:34,140 --> 02:08:39,000
means that you don't get so much lock

02:08:36,060 --> 02:08:42,510
contention and shared case my internal

02:08:39,000 --> 02:08:46,820
results with preliminary drivers get me

02:08:42,510 --> 02:08:46,820
very nice results of linear scaling

02:09:02,480 --> 02:09:09,930
threads dumped in parallel work well

02:09:06,000 --> 02:09:11,760
creation when you look you can do in

02:09:09,930 --> 02:09:13,350
parallel in certain delete rules while

02:09:11,760 --> 02:09:15,750
you dump in them another thread I did

02:09:13,350 --> 02:09:17,550
not have such test case but yes it's the

02:09:15,750 --> 02:09:22,290
possible which is patch that they will

02:09:17,550 --> 02:09:24,540
no longer interfere yes because update

02:09:22,290 --> 02:09:27,000
the path bus does not hold their channel

02:09:24,540 --> 02:09:28,440
log so there is no way to exclude it you

02:09:27,000 --> 02:09:30,690
know when you don't have one big lock

02:09:28,440 --> 02:09:38,070
you have to account for all cases like

02:09:30,690 --> 02:09:39,420
this thanks I know that Ronnie one-time

02:09:38,070 --> 02:09:40,300
bragged that he can do a million a

02:09:39,420 --> 02:09:41,920
second

02:09:40,300 --> 02:09:46,240
is it this you're using to connect x5

02:09:41,920 --> 02:09:47,470
yeah can you do do you think this you

02:09:46,240 --> 02:09:50,050
can handle this kind of rate to your

02:09:47,470 --> 02:09:52,120
hardware like say there was no over the

02:09:50,050 --> 02:09:53,110
hardware itself can handle it but what

02:09:52,120 --> 02:09:54,850
we get

02:09:53,110 --> 02:11:02,950
I mean first we need to paralyze the

02:09:54,850 --> 02:11:04,870
driver and access to the Internet and we

02:11:02,950 --> 02:11:13,090
still continue working and improving it

02:11:04,870 --> 02:11:15,760
to understand its internal demo that we

02:11:13,090 --> 02:11:18,070
are doing that we can have more than

02:11:15,760 --> 02:11:23,800
half a million almost a million updates

02:11:18,070 --> 02:11:25,540
per second you would not be doing it if

02:11:23,800 --> 02:11:29,050
it did not give us at the advantage for

02:11:25,540 --> 02:11:33,250
her right that's the reason but we were

02:11:29,050 --> 02:11:34,840
also 40c because you know if if this is

02:11:33,250 --> 02:11:40,690
not supporting that and you're going

02:11:34,840 --> 02:11:42,520
through TC that's the last time you said

02:11:40,690 --> 02:11:47,560
you said you could do a million so I'm

02:11:42,520 --> 02:11:51,910
still seeing 500,000 a its software yes

02:11:47,560 --> 02:11:53,869
this is skip skip powder yeah

02:11:51,910 --> 02:12:40,159
well I'm expecting to her

02:11:53,869 --> 02:13:38,419
slaw if this is a bottle yes yes yeah go

02:12:40,159 --> 02:13:40,099
ahead yeah in the end goes to speed up

02:13:38,419 --> 02:13:41,659
the is asking you what your end goal

02:13:40,099 --> 02:13:45,110
adventure is just to remove the artena

02:13:41,659 --> 02:13:47,090
lock or the low parallel execution of TC

02:13:45,110 --> 02:13:49,340
subsystems the current both the most

02:13:47,090 --> 02:13:50,929
prominent bottleneck is our channel lock

02:13:49,340 --> 02:13:53,499
of course but as soon as we remove it

02:13:50,929 --> 02:13:55,999
and this is another obvious obvious

02:13:53,499 --> 02:13:57,769
bottlenecks we will work on them as well

02:13:55,999 --> 02:14:00,229
so yeah end result is to be able to go

02:13:57,769 --> 02:14:04,249
to our driver and parallel which means

02:14:00,229 --> 02:14:05,880
removing the slope from CLS IP action

02:14:04,249 --> 02:14:11,520
API and

02:14:05,880 --> 02:14:13,020
flower and elections yeah if you

02:14:11,520 --> 02:14:16,200
remember I think we presented the last

02:14:13,020 --> 02:14:19,770
night that's the performance of TC was

02:14:16,200 --> 02:14:22,080
around less than 100 or around 100 100 K

02:14:19,770 --> 02:14:24,720
per se for a second yeah and we

02:14:22,080 --> 02:14:27,740
understand that is not enough so that's

02:14:24,720 --> 02:14:30,420
we try to spit it out spit it out up and

02:14:27,740 --> 02:14:32,850
remember that you have many ports we

02:14:30,420 --> 02:14:37,260
talk about a speed switch there so you

02:14:32,850 --> 02:14:40,040
have like Teddy 64 5 0 function so not

02:14:37,260 --> 02:14:43,880
all of them adding rules to the same

02:14:40,040 --> 02:14:43,880
entity all the time

02:14:47,270 --> 02:14:55,050
each of them is different so it's not

02:14:51,210 --> 02:15:47,100
the same table all the time so that's

02:14:55,050 --> 02:15:50,090
the access to the saying basically could

02:15:47,100 --> 02:15:52,410
you get this without removing they're

02:15:50,090 --> 02:15:55,680
not really because they're channel oh

02:15:52,410 --> 02:15:57,840
it's my presentation take it's taken

02:15:55,680 --> 02:15:59,040
very early in this is tech show that

02:15:57,840 --> 02:16:02,270
profile again I don't know if we can

02:15:59,040 --> 02:16:05,040
speak and it's not without its analog

02:16:02,270 --> 02:16:06,480
the profile is without 13 L look after

02:16:05,040 --> 02:16:09,750
they are 0 has been removed

02:16:06,480 --> 02:16:11,550
yeah ok so you don't have one that the

02:16:09,750 --> 02:16:13,320
problem is the profiling that I think

02:16:11,550 --> 02:16:14,880
already explained to you privately the

02:16:13,320 --> 02:16:16,800
problem with profiling of channellock is

02:16:14,880 --> 02:16:19,380
that simple profile at like perf

02:16:16,800 --> 02:16:22,590
he only profile it only profiles on see

02:16:19,380 --> 02:16:24,780
you tasks so if you task is sleeping

02:16:22,590 --> 02:16:26,730
well waiting for us eh analog to be

02:16:24,780 --> 02:16:27,660
released it will not show up in sampling

02:16:26,730 --> 02:16:30,840
profilin

02:16:27,660 --> 02:16:32,940
so that's a problematic part of the

02:16:30,840 --> 02:16:35,340
phylum sleeping locks you know what

02:16:32,940 --> 02:16:37,740
because we only have like 30 may 40

02:16:35,340 --> 02:16:39,900
minutes left so maybe then we take this

02:16:37,740 --> 02:16:42,290
offline a little bit trip because kong

02:16:39,900 --> 02:17:13,349
has to is going next

02:16:42,290 --> 02:17:15,150
yeah thank you both can we put it on

02:17:13,349 --> 02:17:26,120
both screens I'm sorry you're just once

02:17:15,150 --> 02:17:26,120
of the two screens okay yeah go ahead

02:17:30,500 --> 02:17:33,639
[Music]

02:17:38,120 --> 02:17:47,840
Chiaki - you brought me is the only

02:17:45,150 --> 02:17:52,410
concern is I'm gonna have enough time so

02:17:47,840 --> 02:17:53,910
so let's see this is we can run into the

02:17:52,410 --> 02:17:55,410
break that's okay the next thing that

02:17:53,910 --> 02:18:15,360
comes as a break so we can chew into the

02:17:55,410 --> 02:18:24,080
little break few contractions so I'm

02:18:15,360 --> 02:18:24,080
going to think of you see you completely

02:18:26,260 --> 02:18:35,439
going to discuss the current local

02:18:31,750 --> 02:18:44,460
insecurities Canada potentially truly is

02:18:35,439 --> 02:18:49,450
curious in cheesy and all pre a bizarre

02:18:44,460 --> 02:18:54,729
ccq man who is the securities so let's

02:18:49,450 --> 02:19:02,969
see so the current yesterday's locking

02:18:54,729 --> 02:19:06,550
we use these Arabic TC so like almost

02:19:02,969 --> 02:19:12,189
networking stable pathways which new

02:19:06,550 --> 02:19:16,689
uses out here she sees surpass as well

02:19:12,189 --> 02:19:22,599
for Cutie's for few curves allows of

02:19:16,689 --> 02:19:26,109
actions so there is no surprise here but

02:19:22,599 --> 02:19:30,750
for the purpose actually Mozilla we are

02:19:26,109 --> 02:19:36,040
already coaches are as you read about so

02:19:30,750 --> 02:19:43,840
is temper for the CC actions so I will

02:19:36,040 --> 02:19:50,500
talk about the selection is very special

02:19:43,840 --> 02:19:52,330
because with the city you have ink use a

02:19:50,500 --> 02:19:55,630
heavy sound with you that is all the

02:19:52,330 --> 02:19:58,660
paths paths which means dr and she's

02:19:55,630 --> 02:20:01,000
already do a write operation so which

02:19:58,660 --> 02:20:04,270
means we still have two things

02:20:01,000 --> 02:20:08,680
the writer origins also because earlier

02:20:04,270 --> 02:20:12,010
I also as you know obviously so that's

02:20:08,680 --> 02:20:14,859
why I always do kind of a whole some

02:20:12,010 --> 02:20:19,510
stream or on the first pass and for this

02:20:14,859 --> 02:20:23,470
we know we always think that this memo

02:20:19,510 --> 02:20:27,160
from the road cuties could because this

02:20:23,470 --> 02:20:30,460
is given here this is cross over so it

02:20:27,160 --> 02:20:34,930
is a hierarchical so it has a mark or

02:20:30,460 --> 02:20:38,050
three layers so the rule here actually

02:20:34,930 --> 02:20:42,790
we go with the walk from the roads

02:20:38,050 --> 02:20:45,010
FEMA and full that's full of

02:20:42,790 --> 02:20:47,109
transmissions are following us sorry

02:20:45,010 --> 02:20:51,040
actually is a pretty simple because we

02:20:47,109 --> 02:20:54,270
usually have not use on the humorous

02:20:51,040 --> 02:21:00,270
side we only have part while to kind of

02:20:54,270 --> 02:21:06,520
Cuban leader side and they both are

02:21:00,270 --> 02:21:09,880
cutest so that's why we could shave

02:21:06,520 --> 02:21:12,550
lewdness all the fat fighters for the

02:21:09,880 --> 02:21:16,090
inner stuff that their father is a

02:21:12,550 --> 02:21:19,510
pretty simple so we will see so let's

02:21:16,090 --> 02:21:22,510
first take a look at the transmission

02:21:19,510 --> 02:21:26,470
side consumer society so they are

02:21:22,510 --> 02:21:31,890
basically two powers so though the extra

02:21:26,470 --> 02:21:37,810
lives on the Yakuza that is well

02:21:31,890 --> 02:21:42,370
sometimes can happen on the personal

02:21:37,810 --> 02:21:45,729
contacts so and so that hard actually we

02:21:42,370 --> 02:21:51,520
always takes the rules we long as I

02:21:45,729 --> 02:21:54,069
mentioned when we father the smiler we

02:21:51,520 --> 02:21:56,439
will find the Curie's and we always find

02:21:54,069 --> 02:22:01,840
I see you read along

02:21:56,439 --> 02:22:07,750
Jesus is a lq x means so for the harder

02:22:01,840 --> 02:22:12,630
we can impose paese absolutely long and

02:22:07,750 --> 02:22:15,220
also by the ludus barack so when we

02:22:12,630 --> 02:22:19,319
include the Peggy's

02:22:15,220 --> 02:22:24,220
we already have occurred post blocks and

02:22:19,319 --> 02:22:28,810
once we include a packet into the cubes

02:22:24,220 --> 02:22:30,430
Cahuilla we go to the future earlier to

02:22:28,810 --> 02:22:33,870
classify these pagans

02:22:30,430 --> 02:22:37,210
so this this party is also as you

02:22:33,870 --> 02:22:39,790
powering the bar see it's already

02:22:37,210 --> 02:22:45,479
complete so these are pouring out of

02:22:39,790 --> 02:22:47,130
here and after we go to go over the

02:22:45,479 --> 02:22:54,240
classification

02:22:47,130 --> 02:22:58,439
neither to go to the TC action the year

02:22:54,240 --> 02:23:01,290
so I wish you read mostly rely on the

02:22:58,439 --> 02:23:03,660
FCU riddle of the bangles I mean is this

02:23:01,290 --> 02:23:07,770
product is not a complete so I would

02:23:03,660 --> 02:23:10,760
cover this today so follow weakens as

02:23:07,770 --> 02:23:12,960
well soon ever see on the Fast Pass is

02:23:10,760 --> 02:23:17,880
prohibited by the answer you will walk

02:23:12,960 --> 02:23:21,810
upon the the Buddhist piano so the other

02:23:17,880 --> 02:23:24,330
actually is is a DQ car

02:23:21,810 --> 02:23:25,920
so this morning's story sometimes

02:23:24,330 --> 02:23:30,080
haven't seen the process

02:23:25,920 --> 02:23:35,790
come has so which means it will peel

02:23:30,080 --> 02:23:37,770
several eyes with in ink apart or it

02:23:35,790 --> 02:23:41,610
could be cool

02:23:37,770 --> 02:23:47,420
Terrell always the incubator happens

02:23:41,610 --> 02:23:53,270
these pom-pom ha so hard if this view

02:23:47,420 --> 02:23:58,080
provides rules veena and of course after

02:23:53,270 --> 02:24:01,830
because we happy with it goes down to

02:23:58,080 --> 02:24:03,030
the tower a year and if it is private a

02:24:01,830 --> 02:24:08,300
year and the most of it

02:24:03,030 --> 02:24:08,300
given all the time average require some

02:24:09,350 --> 02:24:19,140
something we should have a discussion

02:24:13,530 --> 02:24:21,600
here so this is first class for the

02:24:19,140 --> 02:24:25,200
transmission summit so next let's take a

02:24:21,600 --> 02:24:27,750
look at the deposit is synchronizer

02:24:25,200 --> 02:24:33,360
business through us so when we have the

02:24:27,750 --> 02:24:37,590
instant curious of a future of action so

02:24:33,360 --> 02:24:42,090
how's so happy the synchronize with puff

02:24:37,590 --> 02:24:46,580
pass so the most important thing

02:24:42,090 --> 02:24:50,250
actually is a curious the critical is

02:24:46,580 --> 02:24:53,939
very we're not currently because our

02:24:50,250 --> 02:24:55,110
vehicle for historical reasons is relies

02:24:53,939 --> 02:24:58,341
on some

02:24:55,110 --> 02:25:02,670
[Applause]

02:24:58,341 --> 02:25:04,891
point her away because for the cookie

02:25:02,670 --> 02:25:12,181
escalator actually when we are these

02:25:04,891 --> 02:25:16,230
cuties we actually install nucleus for

02:25:12,181 --> 02:25:20,250
the hibiscus living in a current under

02:25:16,230 --> 02:25:26,250
effect the one we use for the first pass

02:25:20,250 --> 02:25:30,000
which is an ostomy so after we install

02:25:26,250 --> 02:25:34,410
that Cuba's exposes living we will do a

02:25:30,000 --> 02:25:39,511
flip on the whole device level to swap

02:25:34,410 --> 02:25:42,990
the pointer to makes the nudist nucleus

02:25:39,511 --> 02:25:47,820
installed on a hot pasta as well so

02:25:42,990 --> 02:25:50,280
because of the display actually we have

02:25:47,820 --> 02:25:54,360
a chance to synchronize with the first

02:25:50,280 --> 02:25:59,221
pass a the hope device is flipped so

02:25:54,360 --> 02:26:03,811
that literally means the the active QT

02:25:59,221 --> 02:26:06,801
skins also be active and also follow us

02:26:03,811 --> 02:26:12,480
on actually is synchronized by the

02:26:06,801 --> 02:26:15,480
synchronize nets yeah so this is very

02:26:12,480 --> 02:26:19,380
different because if we compare these

02:26:15,480 --> 02:26:29,761
who is a picture of the action actually

02:26:19,380 --> 02:26:33,391
they are with traditional RCU long

02:26:29,761 --> 02:26:36,540
because we rely on the synchronize I see

02:26:33,391 --> 02:26:38,450
you just a car I see you come back to

02:26:36,540 --> 02:26:41,641
synchronize with the Fastpass

02:26:38,450 --> 02:26:44,730
so Jimmy's coming here is the complete

02:26:41,641 --> 02:26:49,080
dependence so then that's why I want to

02:26:44,730 --> 02:26:52,530
highlight this part because I think we

02:26:49,080 --> 02:26:55,160
can possibly remove color will remove

02:26:52,530 --> 02:27:00,721
the cue discussed living and switch

02:26:55,160 --> 02:27:06,780
choose I'll see you a PR price the rest

02:27:00,721 --> 02:27:09,380
of the cheesy car the funeral's action

02:27:06,780 --> 02:27:12,350
so let's see how summary of

02:27:09,380 --> 02:27:16,069
I are gonna discharge avocado crema

02:27:12,350 --> 02:27:20,060
Samara here to follow she's for look and

02:27:16,069 --> 02:27:23,350
you can see the she sees q6 so no palsy

02:27:20,060 --> 02:27:25,939
is a very weird is you know sounds

02:27:23,350 --> 02:27:29,770
different the pointer artistry like all

02:27:25,939 --> 02:27:34,340
the divides me which a single is the

02:27:29,770 --> 02:27:38,119
first pass and the full filter and

02:27:34,340 --> 02:27:41,930
action Lee actually they are pretty

02:27:38,119 --> 02:27:46,369
normal life is the rest of the arson you

02:27:41,930 --> 02:27:48,949
users we think either with synchronize

02:27:46,369 --> 02:27:53,210
I'll see you in this case a actually is

02:27:48,949 --> 02:27:57,770
as you come back and forth the other

02:27:53,210 --> 02:28:01,100
action except she actually is the CC

02:27:57,770 --> 02:28:05,470
actions sure CC action different because

02:28:01,100 --> 02:28:08,720
we totally free with the action from

02:28:05,470 --> 02:28:11,840
Europe from the T bar I saw the few

02:28:08,720 --> 02:28:17,029
terms of the device we actually retrieve

02:28:11,840 --> 02:28:20,449
the action problems from product next

02:28:17,029 --> 02:28:22,670
namespace take a structure so that that

02:28:20,449 --> 02:28:29,000
is currently this route or Agra petha

02:28:22,670 --> 02:28:31,580
asking around lock so this so they are

02:28:29,000 --> 02:28:35,989
using the synchronize with traditional

02:28:31,580 --> 02:28:41,239
are see you here so you nothing in

02:28:35,989 --> 02:28:43,399
surprise here so we go back to the inner

02:28:41,239 --> 02:28:46,010
estar actually is praising home so

02:28:43,399 --> 02:28:52,369
because this is this is a tradition of

02:28:46,010 --> 02:28:58,100
Queen how we a package from the device

02:28:52,369 --> 02:29:01,430
choose network is there is some

02:28:58,100 --> 02:29:04,819
difference when Wayne's devices are

02:29:01,430 --> 02:29:10,970
knocking if she is capital finish around

02:29:04,819 --> 02:29:15,050
the packet is related with the from the

02:29:10,970 --> 02:29:17,660
formula driver or Anna be put into some

02:29:15,050 --> 02:29:21,830
for CPU

02:29:17,660 --> 02:29:28,940
is some humanity of you and after that

02:29:21,830 --> 02:29:32,510
they will retrieve by the next action in

02:29:28,940 --> 02:29:36,940
the bomb from Ramallah and actually it

02:29:32,510 --> 02:29:40,790
will start he threw his salute is a

02:29:36,940 --> 02:29:44,330
networking stack and a medium and a

02:29:40,790 --> 02:29:47,570
ladder the inference actually liking ego

02:29:44,330 --> 02:29:48,740
has goodies ok we will have an EQ here

02:29:47,570 --> 02:29:51,561
somehow

02:29:48,740 --> 02:29:57,950
it's a costume it's all spectacles three

02:29:51,561 --> 02:30:00,800
forward and I'll choose a prediction a

02:29:57,950 --> 02:30:03,950
year so they're now futures not eat eco

02:30:00,800 --> 02:30:07,720
here so it's more simple so is there's

02:30:03,950 --> 02:30:11,811
no no long later

02:30:07,720 --> 02:30:16,760
so let's come back to the RC you hard

02:30:11,811 --> 02:30:20,180
let us get a review to see how much we

02:30:16,760 --> 02:30:27,050
can go with comfort as you complete in

02:30:20,180 --> 02:30:30,820
this so this again is a very exception

02:30:27,050 --> 02:30:35,120
now because as usually it has to use

02:30:30,820 --> 02:30:41,720
Bosnia because it is our acid is a write

02:30:35,120 --> 02:30:45,260
operation consider itself before it sees

02:30:41,720 --> 02:30:48,800
yes you need with you think use the

02:30:45,260 --> 02:30:52,130
fabric lean through a few right so this

02:30:48,800 --> 02:30:55,930
part is not hard unless we decided to go

02:30:52,130 --> 02:31:01,090
through some lockness reason our

02:30:55,930 --> 02:31:08,030
gorgeous little further energy actually

02:31:01,090 --> 02:31:11,500
it's already are see you complete feel

02:31:08,030 --> 02:31:16,400
ready for action reaction I have to

02:31:11,500 --> 02:31:19,940
repeat this actually missing so carbon

02:31:16,400 --> 02:31:20,761
we will just copy actually when we are

02:31:19,940 --> 02:31:25,521
these

02:31:20,761 --> 02:31:27,601
teach affection actually is a resounding

02:31:25,521 --> 02:31:32,551
consonants popplets

02:31:27,601 --> 02:31:37,021
we read notes Carlo is a rather so this

02:31:32,551 --> 02:31:40,081
is not good there is nobody reported by

02:31:37,021 --> 02:31:42,661
them probably because these areas

02:31:40,081 --> 02:31:50,971
committee is very complicated not

02:31:42,661 --> 02:31:52,221
because if a thousand days so you have a

02:31:50,971 --> 02:31:55,771
sweetheart

02:31:52,221 --> 02:32:02,161
recall the audience the Kobe is very

02:31:55,771 --> 02:32:04,411
important and is missing in the question

02:32:02,161 --> 02:32:06,931
so well I didn't quite follow the copy

02:32:04,411 --> 02:32:10,771
missing there I know you try to explain

02:32:06,931 --> 02:32:14,241
it but I wasn't wasn't clear like what

02:32:10,771 --> 02:32:35,511
level of copy from the RC you copy

02:32:14,241 --> 02:32:49,311
copying what to replace like this mean

02:32:35,511 --> 02:32:49,311
yeah which we lose the reader is you see

02:32:50,391 --> 02:33:24,631
do you see this as being generic like at

02:32:53,311 --> 02:33:29,631
act API level or yes okay yeah yeah so

02:33:24,631 --> 02:33:29,631
for CC actions so that means

02:33:30,390 --> 02:33:37,260
be totally calm because we rely on uh

02:33:33,979 --> 02:33:39,689
archaea are long to think before less

02:33:37,260 --> 02:33:42,660
robust though there is no point for

02:33:39,689 --> 02:33:48,840
those belong to exist for connections

02:33:42,660 --> 02:33:55,140
no yeah so a you for mr. Adair is

02:33:48,840 --> 02:33:57,860
already not risk units which is you know

02:33:55,140 --> 02:34:00,090
the people of our but actually is not

02:33:57,860 --> 02:34:03,780
actually that's not true it's not

02:34:00,090 --> 02:34:06,750
smokiness there is there in distribution

02:34:03,780 --> 02:34:12,540
law it's just really barker article is

02:34:06,750 --> 02:34:15,090
stuff for having powers is confusing it

02:34:12,540 --> 02:34:20,870
is ring matter and as this room average

02:34:15,090 --> 02:34:25,020
not dominance there are laws to

02:34:20,870 --> 02:34:29,250
conceptually so there is a one consumer

02:34:25,020 --> 02:34:32,460
all and purdue's mark so come so

02:34:29,250 --> 02:34:36,420
consumer naga is conquering consumers

02:34:32,460 --> 02:34:40,430
and forgive us a lot prevalence the

02:34:36,420 --> 02:34:43,350
concurrent producers so we sleep a block

02:34:40,430 --> 02:34:47,160
possibilities feelings of sri sri sri

02:34:43,350 --> 02:34:51,420
lanka is a critical areas

02:34:47,160 --> 02:34:55,189
haha that sure we cover the name is

02:34:51,420 --> 02:34:59,810
Lawrence and it's a good hammer Falls

02:34:55,189 --> 02:35:06,870
for visible actually it's a Chicago's

02:34:59,810 --> 02:35:12,060
Jingu from think this is this is a good

02:35:06,870 --> 02:35:17,700
move and motoring phonetic for now is

02:35:12,060 --> 02:35:28,189
it's 54 fast it is one of the simplest q

02:35:17,700 --> 02:35:35,090
disc it's almost certainly very hard to

02:35:28,189 --> 02:35:38,880
move this idea to other complex theories

02:35:35,090 --> 02:35:41,150
because of the other reason is the

02:35:38,880 --> 02:35:42,660
property are knots

02:35:41,150 --> 02:35:46,681
[Applause]

02:35:42,660 --> 02:35:49,990
confidence Z the party is a hierarchy so

02:35:46,681 --> 02:35:52,710
we because over a hierarchy is that's

02:35:49,990 --> 02:35:54,660
very hard to make his blog honest

02:35:52,710 --> 02:35:59,110
analysts who say they could have

02:35:54,660 --> 02:36:00,851
funerals it could have actions so it's a

02:35:59,110 --> 02:36:04,650
completely different

02:36:00,851 --> 02:36:07,330
yeah or if it's hard well spirituality

02:36:04,650 --> 02:36:18,271
if it's hardware Florida's probably yeah

02:36:07,330 --> 02:36:25,260
yeah may work as well yeah details of

02:36:18,271 --> 02:36:33,311
the human security kuvasz time so what

02:36:25,260 --> 02:36:39,910
was the structure we still share with in

02:36:33,311 --> 02:36:45,311
human disease this time action issues we

02:36:39,910 --> 02:36:46,300
we sure the curious condition because is

02:36:45,311 --> 02:36:51,851
the COBOL

02:36:46,300 --> 02:36:53,021
so I receive you possibly contain almost

02:36:51,851 --> 02:36:57,720
imputed

02:36:53,021 --> 02:37:04,030
gives so and neither will stay they are

02:36:57,720 --> 02:37:07,840
taking courage so services are also

02:37:04,030 --> 02:37:11,080
shared party philosophy used so this is

02:37:07,840 --> 02:37:15,641
0 Z these are the biggest auctions we

02:37:11,080 --> 02:37:21,120
needed to protect and the facility for

02:37:15,641 --> 02:37:28,181
single CPU actually Tony to re palaces

02:37:21,120 --> 02:37:32,230
the convention because we could either

02:37:28,181 --> 02:37:33,311
either per semester or on genes of a

02:37:32,230 --> 02:37:36,970
poem haha

02:37:33,311 --> 02:37:45,210
Connors so he is a known as a toner

02:37:36,970 --> 02:37:50,021
container and yeah and yeah sometimes

02:37:45,210 --> 02:37:54,641
actually is a one I think

02:37:50,021 --> 02:37:57,040
and all these a person connects this

02:37:54,641 --> 02:38:03,940
diagram is not a very accurate but it

02:37:57,040 --> 02:38:08,230
also will show the worst pains actually

02:38:03,940 --> 02:38:10,960
I think it is possible to go luminance

02:38:08,230 --> 02:38:14,200
for the four feet no case because it's a

02:38:10,960 --> 02:38:18,221
same as one but they are wanted for now

02:38:14,200 --> 02:38:22,570
there is a charade area because we still

02:38:18,221 --> 02:38:29,010
needed to sync the link you with the and

02:38:22,570 --> 02:38:33,971
also accommodate excuse could be

02:38:29,010 --> 02:38:36,400
colorful and hierarchical so you needed

02:38:33,971 --> 02:38:41,500
to sing about other way is partly the

02:38:36,400 --> 02:38:45,490
testing about how we implement tree

02:38:41,500 --> 02:38:51,820
structure long list is wishes Oliveira

02:38:45,490 --> 02:38:53,561
and of course it needed to be a tree

02:38:51,820 --> 02:38:55,900
structure it could be of a

02:38:53,561 --> 02:38:56,771
multifunctional structure depend on you

02:38:55,900 --> 02:38:59,950
and attention

02:38:56,771 --> 02:39:06,760
so it's three vertical just think of

02:38:59,950 --> 02:39:09,101
American heroes follow case actually I

02:39:06,760 --> 02:39:13,660
do have some idea we have you as you

02:39:09,101 --> 02:39:16,561
probably realize I saw already locally

02:39:13,660 --> 02:39:20,650
link within three years of Connor

02:39:16,561 --> 02:39:24,370
companies full voluminous as would

02:39:20,650 --> 02:39:26,950
advise the orders it is accompanied with

02:39:24,370 --> 02:39:29,141
a fan assembly is the battery result in

02:39:26,950 --> 02:39:32,410
something donor heating creddies so

02:39:29,141 --> 02:39:35,110
everything every operation is having all

02:39:32,410 --> 02:39:39,130
the hand so that means is lastly you

02:39:35,110 --> 02:39:42,550
fossa we was absolute recipe some of

02:39:39,130 --> 02:39:47,141
this column and also he wants is limited

02:39:42,550 --> 02:39:50,771
excuses we don't want to go through what

02:39:47,141 --> 02:39:59,730
witnesses are cues are because speaking

02:39:50,771 --> 02:39:59,730
Finnish right also because I'm a genius

02:40:00,011 --> 02:40:08,721
unless we should choose best operation

02:40:03,320 --> 02:40:12,471
on the produce and consumer side but who

02:40:08,721 --> 02:40:15,891
can delay we follow cheesy curiously you

02:40:12,471 --> 02:40:18,530
and the teacher is not bad we missed our

02:40:15,891 --> 02:40:22,160
weekly qy a single packet time just how

02:40:18,530 --> 02:40:25,551
we teach you a single penny so actually

02:40:22,160 --> 02:40:27,471
I agree didn't it possible to pass a

02:40:25,551 --> 02:40:32,620
police report the income side because

02:40:27,471 --> 02:40:41,061
these are you assuming that it's already

02:40:32,620 --> 02:40:43,880
there are there could be monocle pews so

02:40:41,061 --> 02:40:48,561
I think it is possible YouTube

02:40:43,880 --> 02:40:53,750
best money more babies to put it on me

02:40:48,561 --> 02:41:00,200
into the curry curry is very unlikely to

02:40:53,750 --> 02:41:05,690
do the same for the deacon is having

02:41:00,200 --> 02:41:09,471
here so my dish is self poverty you want

02:41:05,690 --> 02:41:14,830
to take a look at a lot immensely leave

02:41:09,471 --> 02:41:14,830
API and single of the bench

02:41:15,641 --> 02:41:23,271
thank you and I think you operation so

02:41:20,330 --> 02:41:27,820
there are also some other ideas maybe is

02:41:23,271 --> 02:41:31,420
crazy from me but I also TV gives some

02:41:27,820 --> 02:41:35,271
possible ideas for this culture so and I

02:41:31,420 --> 02:41:41,120
mentioned has Q this custody beans very

02:41:35,271 --> 02:41:43,851
possible you can cooperate because we

02:41:41,120 --> 02:41:47,570
have not seen you it is very possible

02:41:43,851 --> 02:41:49,940
how which of removals are Co visible

02:41:47,570 --> 02:41:54,320
Ravens device because of Filipino

02:41:49,940 --> 02:41:57,681
tamati very handsome so which updates

02:41:54,320 --> 02:42:04,750
one thing okay this width or even the

02:41:57,681 --> 02:42:07,370
whole device there not one and unless

02:42:04,750 --> 02:42:10,070
someone is working

02:42:07,370 --> 02:42:28,220
it's suppose a very causal relationship

02:42:10,070 --> 02:42:30,620
breakdowns achievable global sum is

02:42:28,220 --> 02:42:34,930
somehow we needed to coming to the other

02:42:30,620 --> 02:42:39,020
stop system we need to reuse some

02:42:34,930 --> 02:42:45,850
treasurer with other systems that's the

02:42:39,020 --> 02:42:48,740
only reason those are to exist for 4gc

02:42:45,850 --> 02:42:54,170
reason so kind of uh no value it's a

02:42:48,740 --> 02:43:01,430
very possible to and also for the treats

02:42:54,170 --> 02:43:21,040
me Locke also very possible to move in a

02:43:01,430 --> 02:43:21,040
tongue to you because this is fiction so

02:43:26,350 --> 02:43:34,550
you see medicine and the intention

02:43:30,850 --> 02:43:37,100
freedom to decide whether to move is

02:43:34,550 --> 02:43:39,260
this the more easily here like is the

02:43:37,100 --> 02:43:47,350
HTTP cooler

02:43:39,260 --> 02:43:47,350
go decide to move this to just leave oh

02:43:50,710 --> 02:43:59,510
yeah yeah so yeah so sorry I can

02:43:57,500 --> 02:44:03,410
interject or yeah yeah

02:43:59,510 --> 02:44:05,990
so the yeah yeah the pad device locking

02:44:03,410 --> 02:44:07,580
is kind of interesting because basically

02:44:05,990 --> 02:44:10,640
but is this gonna help

02:44:07,580 --> 02:44:15,530
well in your case like with I'm asking

02:44:10,640 --> 02:44:18,850
flat actually I don't with a mic where

02:44:15,530 --> 02:44:18,850
is the mic somebody huh

02:44:27,120 --> 02:44:33,540
yeah for the case of dumping or

02:44:30,970 --> 02:44:37,830
inserting millions of rules per second

02:44:33,540 --> 02:44:40,689
what is your view on what can be saying

02:44:37,830 --> 02:44:43,180
should break in the National log to per

02:44:40,689 --> 02:44:46,810
device login will help but removing it

02:44:43,180 --> 02:44:49,899
completely is even better so you want to

02:44:46,810 --> 02:45:27,729
totally remove it as opposed that is

02:44:49,899 --> 02:45:29,830
useful but yeah because by some so you

02:45:27,729 --> 02:45:36,939
think it's impossible to totally remove

02:45:29,830 --> 02:45:40,080
it of course it has to be some lock

02:45:36,939 --> 02:45:42,130
which controls the device and directly

02:45:40,080 --> 02:45:44,350
provides looking for a touch into

02:45:42,130 --> 02:45:47,080
touching qts but specifically for a

02:45:44,350 --> 02:45:51,000
rules update case I think it's possible

02:45:47,080 --> 02:45:51,000
to completely eliminate it from update

02:45:58,710 --> 02:46:04,569
update same rule yeah I have two threads

02:46:01,899 --> 02:46:07,479
updating the status for the same

02:46:04,569 --> 02:46:09,310
attributes let's say let's say you you

02:46:07,479 --> 02:46:10,530
know if you have fun during logging of

02:46:09,310 --> 02:46:13,380
course

02:46:10,530 --> 02:46:16,230
can lock it on deeper level but I mean

02:46:13,380 --> 02:46:18,210
you don't want to have top level lock

02:46:16,230 --> 02:46:23,160
which completely locks whole subsystem

02:46:18,210 --> 02:46:25,681
or whole device right so that could ya

02:46:23,160 --> 02:46:28,830
that's almost one of the suggestions

02:46:25,681 --> 02:46:30,990
from Kong was you video a more finer

02:46:28,830 --> 02:46:34,471
grain locking at the implementation

02:46:30,990 --> 02:46:36,630
level so so you think you agree there is

02:46:34,471 --> 02:46:39,511
a need for a tip at least locking at the

02:46:36,630 --> 02:46:41,641
teepee level so basically our currently

02:46:39,511 --> 02:46:44,460
implemented is that even if you updating

02:46:41,641 --> 02:46:45,530
a roommate actually deletes old one it's

02:46:44,460 --> 02:46:48,391
a new one

02:46:45,530 --> 02:46:52,920
it does not really update like actions

02:46:48,391 --> 02:46:56,280
do but you could send two rules let's

02:46:52,920 --> 02:46:58,440
say to update to our tributes of the

02:46:56,280 --> 02:47:00,870
same action or the same attribute

02:46:58,440 --> 02:47:03,271
followed with different values yeah but

02:47:00,870 --> 02:47:09,950
currently flower you just delete the old

02:47:03,271 --> 02:47:14,221
one and creates a new one is a compact

02:47:09,950 --> 02:47:30,511
compact change or it just delete the old

02:47:14,221 --> 02:47:32,490
one creates another one yeah I know but

02:47:30,511 --> 02:47:34,021
internally delete the old one and

02:47:32,490 --> 02:47:38,811
creates another bond that's how it's

02:47:34,021 --> 02:47:38,811
implemented in case of flowers because

02:47:40,490 --> 02:48:24,670
it's not but the par device locking will

02:48:24,511 --> 02:48:27,580
be

02:48:24,670 --> 02:48:30,130
less fine-grained than party P locking

02:48:27,580 --> 02:48:31,720
because it depends on your work set

02:48:30,130 --> 02:48:33,610
right because if you really need to

02:48:31,720 --> 02:48:34,900
update bunch of roots and single device

02:48:33,610 --> 02:48:37,540
you're locked

02:48:34,900 --> 02:48:40,180
anyway it's only good if you know that

02:48:37,540 --> 02:48:43,920
your rules are spread out like evenly

02:48:40,180 --> 02:48:46,479
between all devices on switch yes

02:48:43,920 --> 02:48:48,220
conquer a are you gonna paid more

02:48:46,479 --> 02:48:52,390
attention to Vlad's patches when he

02:48:48,220 --> 02:49:04,600
posts when he's posting there some good

02:48:52,390 --> 02:49:08,170
feedback yeah yeah okay so why don't you

02:49:04,600 --> 02:49:09,640
continue because we are we don't have as

02:49:08,170 --> 02:49:15,660
much time and then we can come back to

02:49:09,640 --> 02:49:15,660
some more questions is this last night

02:49:19,229 --> 02:49:26,430
the disk slipping that's an interesting

02:49:50,170 --> 02:49:53,219
[Music]

02:49:56,300 --> 02:49:59,390
[Music]

02:50:11,250 --> 02:50:17,470
yeah I think you're right those Mars

02:50:13,750 --> 02:50:19,420
here the time and is it Q disk sleeping

02:50:17,470 --> 02:50:21,220
that gets inserted when the device goes

02:50:19,420 --> 02:50:22,930
down is that the no there's one that

02:50:21,220 --> 02:50:26,080
gets replaced when the device goes

02:50:22,930 --> 02:50:28,470
administratively down when you I've

02:50:26,080 --> 02:50:28,470
configured

02:50:35,420 --> 02:50:57,290
okay okay okay okay

02:51:24,510 --> 02:51:32,110
[Music]

02:51:36,360 --> 02:51:39,459
[Music]

02:51:43,590 --> 02:51:52,771
I think there's some good ideas in there

02:51:50,120 --> 02:51:54,570
you're thinking about you're just

02:51:52,771 --> 02:52:14,521
thinking about it right now we have

02:51:54,570 --> 02:52:16,620
started working some patches yeah I

02:52:14,521 --> 02:52:16,980
think Vlad is doing some good stuff

02:52:16,620 --> 02:52:23,220
there

02:52:16,980 --> 02:52:24,590
it's feedback David just applied some of

02:52:23,220 --> 02:52:33,240
these patches

02:52:24,590 --> 02:52:39,260
you said he at 65 more at 14 I thought

02:52:33,240 --> 02:52:47,420
just Wendy no five more opposite okay

02:52:39,260 --> 02:52:47,420
okay well thanks conk thank you

02:52:50,780 --> 02:52:59,521
okay all right that is it

02:52:57,510 --> 02:53:03,170
we were almost like on time by five

02:52:59,521 --> 02:53:11,460
minutes well we went past five minutes

02:53:03,170 --> 02:53:16,320
so it's a break and next session is yeah

02:53:11,460 --> 02:53:23,040
the open look at NATO s for switch

02:53:16,320 --> 02:53:24,930
ethics but in 12 minutes

02:53:23,040 --> 02:53:29,790
no sorry in 8 minutes I'm sorry we ate

02:53:24,930 --> 02:53:32,061
into that break yeah all right thank you

02:53:29,790 --> 02:53:32,061
everybody

02:53:37,370 --> 02:53:52,430

YouTube URL: https://www.youtube.com/watch?v=6-FLEpfQ7W8


