Title: Fearless Tinkering: How NixOS Works (NixCon 2019)
Publication date: 2019-10-27
Playlist: NixCon 2019 (Brno)
Description: 
	Learn how NixOS goes from a configuration.nix through the module system, to a profile. How the profile activates, how the boot loader entry is created, and how bootloader rollbacks work.

We will explore how NixOS boots, and learn how to experiment fearlessly.
Captions: 
	00:03:13,220 --> 00:03:20,450
all right everybody we're gonna start

00:03:17,480 --> 00:03:23,090
talking about noose OS and why it's

00:03:20,450 --> 00:03:26,150
wonderful and I don't even remember what

00:03:23,090 --> 00:03:28,160
title this talk is but I find NICs OS

00:03:26,150 --> 00:03:31,370
give a real superpowers in understanding

00:03:28,160 --> 00:03:34,460
how Linux works how operating systems

00:03:31,370 --> 00:03:38,540
are put together and gives me extreme

00:03:34,460 --> 00:03:40,430
power to experiment and try to I don't

00:03:38,540 --> 00:03:42,560
have any slides written for this at all

00:03:40,430 --> 00:03:45,710
and so I'm just going to show some stuff

00:03:42,560 --> 00:03:46,010
and look I'm hoping you'll take it from

00:03:45,710 --> 00:03:47,720
there

00:03:46,010 --> 00:03:49,540
and I'll just show you some cool stuff I

00:03:47,720 --> 00:03:53,420
hope that's okay

00:03:49,540 --> 00:03:55,790
it should be pretty interesting so this

00:03:53,420 --> 00:03:59,720
just for what it's worth on my github

00:03:55,790 --> 00:04:02,240
which is gr8 h8 in C I have just pushed

00:03:59,720 --> 00:04:04,880
a repository called toss it has all the

00:04:02,240 --> 00:04:15,950
notes and junk fun curated from what

00:04:04,880 --> 00:04:16,190
I've put together for everything ok here

00:04:15,950 --> 00:04:17,660
we are

00:04:16,190 --> 00:04:20,419
so this one is going to be a lot more

00:04:17,660 --> 00:04:22,780
typing so I moved over here and let's

00:04:20,419 --> 00:04:27,919
just get started

00:04:22,780 --> 00:04:29,210
so moving here is music so us alright

00:04:27,919 --> 00:04:30,470
mate it'll be easier if I ask you out

00:04:29,210 --> 00:04:33,260
officer question new year is not used

00:04:30,470 --> 00:04:38,630
next to us ok cool

00:04:33,260 --> 00:04:43,940
who here feels comfortable oh cool so

00:04:38,630 --> 00:04:46,970
this will be a little weird for not

00:04:43,940 --> 00:04:51,040
familiar with the module system cool

00:04:46,970 --> 00:04:55,100
alright so this will be fun great so

00:04:51,040 --> 00:05:00,020
every Nix OS system is way back it up a

00:04:55,100 --> 00:05:01,940
little bit Nix OS is sort of like it

00:05:00,020 --> 00:05:04,400
does configuration management but puppet

00:05:01,940 --> 00:05:07,480
and chef in ample insult a logon to a

00:05:04,400 --> 00:05:09,740
system and just make some changes and

00:05:07,480 --> 00:05:10,280
and hopefully it gets to you where you

00:05:09,740 --> 00:05:12,230
want it

00:05:10,280 --> 00:05:14,300
Nick sighs starts the opposite direction

00:05:12,230 --> 00:05:16,400
it starts with a specification it

00:05:14,300 --> 00:05:18,830
creates a brand new system every single

00:05:16,400 --> 00:05:20,670
time that's a little weird

00:05:18,830 --> 00:05:22,350
let me use this Nick's and it uses the

00:05:20,670 --> 00:05:24,270
Cashin of Nyx so it's not a ton of work

00:05:22,350 --> 00:05:28,200
every single time so let's take a look

00:05:24,270 --> 00:05:30,330
at what I need to close here so I don't

00:05:28,200 --> 00:05:36,110
look that what did Nick's West's

00:05:30,330 --> 00:05:36,110
configuration looks like so at the top

00:05:36,290 --> 00:05:49,070
at the top we have I 18 cons of a map

00:05:39,180 --> 00:05:52,530
we're a Dvorak how's that that's good

00:05:49,070 --> 00:05:56,520
cool so console came up to set the

00:05:52,530 --> 00:05:58,170
Dvorak I tagged a Brack so and and this

00:05:56,520 --> 00:05:59,880
is going to involve a system that I'm

00:05:58,170 --> 00:06:03,420
actually typing into so I don't want to

00:05:59,880 --> 00:06:04,860
make a fool of so we're gonna build a

00:06:03,420 --> 00:06:06,540
system with its console key is going to

00:06:04,860 --> 00:06:09,780
be in the back we're gonna have inch

00:06:06,540 --> 00:06:12,120
nginx enabled nginx is gonna serve a

00:06:09,780 --> 00:06:14,760
single domain for any request to get so

00:06:12,120 --> 00:06:17,970
they'll serve some files which is in

00:06:14,760 --> 00:06:19,650
this directory called public and this is

00:06:17,970 --> 00:06:25,350
the HTML of the file that we're going to

00:06:19,650 --> 00:06:27,180
serve and we have some firewall

00:06:25,350 --> 00:06:30,330
configuration by default Nick so s

00:06:27,180 --> 00:06:32,550
blocks all the ports in this little port

00:06:30,330 --> 00:06:34,380
80 and 443 we don't have let's encrypt

00:06:32,550 --> 00:06:35,610
enable but it's pretty trivial to turn

00:06:34,380 --> 00:06:37,200
it on but I'm not going to go there

00:06:35,610 --> 00:06:40,380
because this won't actually work because

00:06:37,200 --> 00:06:44,040
it's not on the internet and it's that's

00:06:40,380 --> 00:06:45,900
my hostname to hole up under users it's

00:06:44,040 --> 00:06:48,270
forced for the root user to have an

00:06:45,900 --> 00:06:49,980
empty password because it's just a demo

00:06:48,270 --> 00:06:53,040
so that's fine

00:06:49,980 --> 00:06:54,960
set mutable users default to false this

00:06:53,040 --> 00:06:56,520
is pretty neat with puppet and whatnot

00:06:54,960 --> 00:06:58,350
if you add a user you have to explicitly

00:06:56,520 --> 00:07:00,120
add a line later if you want to get rid

00:06:58,350 --> 00:07:03,870
of it you have to say whatever the user

00:07:00,120 --> 00:07:06,690
was removed with Nick's LS and beautiful

00:07:03,870 --> 00:07:09,210
user set to false the list of users

00:07:06,690 --> 00:07:10,800
defined here is the list of users and if

00:07:09,210 --> 00:07:13,250
you make a change and remove somebody

00:07:10,800 --> 00:07:13,250
that they're gone

00:07:17,270 --> 00:07:22,320
I think so yeah yeah so the problem with

00:07:20,640 --> 00:07:23,940
and immutable users too true is if

00:07:22,320 --> 00:07:25,290
you've forgot to change your password to

00:07:23,940 --> 00:07:28,650
set your password or you forgot to give

00:07:25,290 --> 00:07:31,620
yourself wheel for sudo you if hurt

00:07:28,650 --> 00:07:35,820
yourself so it's a little bit safer to

00:07:31,620 --> 00:07:37,830
start true but yeah it also sets the

00:07:35,820 --> 00:07:40,890
message of the day which will display

00:07:37,830 --> 00:07:42,750
when you log in and it has some some

00:07:40,890 --> 00:07:45,450
nice messages there including describing

00:07:42,750 --> 00:07:48,600
what our system looks like and then

00:07:45,450 --> 00:07:55,560
finally in yourselves them which is fine

00:07:48,600 --> 00:07:58,400
but I'm gonna change this to MX any

00:07:55,560 --> 00:07:58,400
questions about this so far

00:07:59,600 --> 00:08:05,570
sure yeah I'll get to that right away

00:08:03,090 --> 00:08:11,630
any other questions about this so far

00:08:05,570 --> 00:08:16,710
yeah oh like the idea of having

00:08:11,630 --> 00:08:18,630
attribute set used as a yeah packages

00:08:16,710 --> 00:08:21,330
gone thing you thought of dot yeah

00:08:18,630 --> 00:08:25,500
can you like start it a bit like what

00:08:21,330 --> 00:08:28,920
that is yeah like okay sure yeah yeah so

00:08:25,500 --> 00:08:30,780
this is this is a mix with module mix OS

00:08:28,920 --> 00:08:33,150
modules have access to a package set and

00:08:30,780 --> 00:08:36,810
the rest of the configuration of the

00:08:33,150 --> 00:08:38,780
system and so this can be imported and

00:08:36,810 --> 00:08:42,270
then as as the Nick sauce systems

00:08:38,780 --> 00:08:43,470
configuration is evaluated the different

00:08:42,270 --> 00:08:46,020
modules can look at each other's

00:08:43,470 --> 00:08:47,290
configuration to come up with a final

00:08:46,020 --> 00:08:51,140
configuration

00:08:47,290 --> 00:08:53,420
yeah so to put it sort of the fine pin

00:08:51,140 --> 00:08:54,980
on so we refer to config there and then

00:08:53,420 --> 00:08:57,680
down here referred to configure

00:08:54,980 --> 00:08:59,420
networking the hostname right and we

00:08:57,680 --> 00:09:01,280
refer to system the mixer s don't

00:08:59,420 --> 00:09:05,360
release all of these are offenses the

00:09:01,280 --> 00:09:07,640
config attributes yeah but the DA

00:09:05,360 --> 00:09:09,200
thought is basically to say when there

00:09:07,640 --> 00:09:12,530
could be other arguments yeah we don't

00:09:09,200 --> 00:09:15,130
care about them yeah who calls I don't

00:09:12,530 --> 00:09:18,500
understand that's combat sure yeah so

00:09:15,130 --> 00:09:22,130
there is a way with deep dark trickery

00:09:18,500 --> 00:09:24,320
to add more parameters which I don't I

00:09:22,130 --> 00:09:27,760
don't do but there are some other

00:09:24,320 --> 00:09:30,230
parameters like Lib is passed in so you

00:09:27,760 --> 00:09:40,550
there's just a few more things but I

00:09:30,230 --> 00:09:43,370
don't know because more more pack frames

00:09:40,550 --> 00:09:45,470
are definitely testing we could like

00:09:43,370 --> 00:09:47,060
find out at an exhaustive list but like

00:09:45,470 --> 00:10:02,090
I don't

00:09:47,060 --> 00:10:04,430
unlike 99% of the ones that interesting

00:10:02,090 --> 00:10:07,610
I don't think it does but I would defer

00:10:04,430 --> 00:10:09,770
to you so cool

00:10:07,610 --> 00:10:15,050
the last thing is letting system yeah

00:10:09,770 --> 00:10:21,779
system yeah so that that is on so config

00:10:15,050 --> 00:10:30,629
dot system okay with all right

00:10:21,779 --> 00:10:33,420
food box in application no they're the

00:10:30,629 --> 00:10:36,209
only exceptions OpenSSH if you enable

00:10:33,420 --> 00:10:41,670
Opus Sh it will open port 22 no other

00:10:36,209 --> 00:10:44,370
applications own voice sure

00:10:41,670 --> 00:10:46,350
so that's up to you so it's up to you to

00:10:44,370 --> 00:10:47,730
decide is this big business like

00:10:46,350 --> 00:10:50,069
database supposed to be listening

00:10:47,730 --> 00:10:53,430
publicly or is it to the local thing and

00:10:50,069 --> 00:10:55,139
that's up to you to sort out but by

00:10:53,430 --> 00:10:58,170
default we we try to keep the system

00:10:55,139 --> 00:11:01,050
minimal and secure and so the other

00:10:58,170 --> 00:11:03,180
thing about this miss allow it TCP ports

00:11:01,050 --> 00:11:05,339
is its opening up on all interfaces and

00:11:03,180 --> 00:11:07,860
might want to do some especially

00:11:05,339 --> 00:11:11,129
elaborate firewall configure which can

00:11:07,860 --> 00:11:18,740
be annoying to override later ok so good

00:11:11,129 --> 00:11:22,240
cool let's uh let's run this again

00:11:18,740 --> 00:11:25,710
all right so in Nix OS

00:11:22,240 --> 00:11:25,710
[Music]

00:11:31,120 --> 00:11:34,480
[Music]

00:11:35,730 --> 00:11:37,760
Oh

00:11:50,830 --> 00:11:56,970
all right cool is that too confusing if

00:11:54,160 --> 00:11:56,970
I type down here

00:11:57,610 --> 00:12:04,020
all right that's that that's actually a

00:12:00,280 --> 00:12:04,020
pet slightly one

00:12:07,540 --> 00:12:15,850
cool all right hmm okay perfect

00:12:11,710 --> 00:12:17,410
um clear great so we can use Nick OS -

00:12:15,850 --> 00:12:21,100
rebuilt this is a little bit of a

00:12:17,410 --> 00:12:23,620
misnomer because it's used to build and

00:12:21,100 --> 00:12:26,830
we want to typically Nicolas rebuild

00:12:23,620 --> 00:12:30,010
looks at the configuration FNC new s

00:12:26,830 --> 00:12:39,160
configuration but we want to use it

00:12:30,010 --> 00:12:40,780
everyone so we will pass okay so at this

00:12:39,160 --> 00:12:42,850
point it just going to get Nick's

00:12:40,780 --> 00:12:44,140
packages from my channel and that

00:12:42,850 --> 00:12:46,930
determines what version of Nick's

00:12:44,140 --> 00:12:49,170
package leaves I could override that and

00:12:46,930 --> 00:12:56,710
specify a specific Nick's packages but

00:12:49,170 --> 00:12:58,420
whatever my system currently has wait ok

00:12:56,710 --> 00:13:03,820
I need to pass the self command so let's

00:12:58,420 --> 00:13:05,890
do a bill okay that's not right that's

00:13:03,820 --> 00:13:07,600
fine it is complaining because I haven't

00:13:05,890 --> 00:13:11,020
told it weird to write the bootloader

00:13:07,600 --> 00:13:13,140
but it has a secret command called build

00:13:11,020 --> 00:13:13,140
yeah

00:13:17,410 --> 00:13:24,490
it's not really a secret a secret that

00:13:20,800 --> 00:13:27,220
your secrets yeah okay so here we go

00:13:24,490 --> 00:13:29,110
it's built a system path it's built all

00:13:27,220 --> 00:13:30,880
of what should be in the Etsy directory

00:13:29,110 --> 00:13:33,490
it's it's put all of these pieces as one

00:13:30,880 --> 00:13:35,200
this system that I just created it's

00:13:33,490 --> 00:13:37,150
very similar my host so it really didn't

00:13:35,200 --> 00:13:40,240
need to build very much it just has

00:13:37,150 --> 00:13:41,860
what's frankly so I have this result

00:13:40,240 --> 00:13:44,890
Civic right everybody's familiar with

00:13:41,860 --> 00:13:51,120
this results in like and if I do result

00:13:44,890 --> 00:13:53,950
being I can run I can run the video and

00:13:51,120 --> 00:13:56,250
here we go alright I don't know if I can

00:13:53,950 --> 00:13:56,250
make this

00:14:05,660 --> 00:14:11,940
cool guess we'll see if that does all

00:14:09,840 --> 00:14:13,410
right so we're gonna it hasn't had a

00:14:11,940 --> 00:14:15,090
password so it just drops right in

00:14:13,410 --> 00:14:16,890
there's that method of the day with

00:14:15,090 --> 00:14:21,720
message of the day is this readable ears

00:14:16,890 --> 00:14:31,700
is terrible what make a little bit of

00:14:21,720 --> 00:14:33,000
both yikes that's pretty tough yeah

00:14:31,700 --> 00:14:44,820
exactly

00:14:33,000 --> 00:14:45,440
let's do what's that it's a little

00:14:44,820 --> 00:14:49,880
better

00:14:45,440 --> 00:14:49,880
all right I wish I could do better

00:14:57,990 --> 00:15:18,210
so my god okay so it's not like it's a

00:15:15,270 --> 00:15:19,980
virtual machine running and qmu and it's

00:15:18,210 --> 00:15:21,570
raining it's on systemd it has like a

00:15:19,980 --> 00:15:23,940
certain number processors and RAM and

00:15:21,570 --> 00:15:27,170
disk space allocated to it okay in fact

00:15:23,940 --> 00:15:27,170
if we

00:15:40,209 --> 00:15:45,930
so there's a hello duck kick out - so

00:15:42,310 --> 00:15:45,930
that's the root filesystem of that view

00:15:51,870 --> 00:15:58,959
so and there's no configuration so it

00:15:56,170 --> 00:16:00,279
just needs some people's so so this

00:15:58,959 --> 00:16:02,380
configuration the mix that we were

00:16:00,279 --> 00:16:04,930
looking at this that's the complete

00:16:02,380 --> 00:16:07,089
configuration for the VM and then it

00:16:04,930 --> 00:16:09,610
uses key mu to run it as a VM on my

00:16:07,089 --> 00:16:21,579
asthma user so there's no host configure

00:16:09,610 --> 00:16:25,570
so for you know it's just um let's come

00:16:21,579 --> 00:16:29,110
us so if we look at the resulting men

00:16:25,570 --> 00:16:32,589
Olivia it's just a script that uses key

00:16:29,110 --> 00:16:35,310
mu and like sets ups and paths and not

00:16:32,589 --> 00:16:35,310
answering your question

00:16:43,440 --> 00:16:48,509
when testing for example I don't use

00:16:45,690 --> 00:16:50,819
this common with you test with with the

00:16:48,509 --> 00:16:57,120
testing infrastructure you can set how

00:16:50,819 --> 00:16:58,620
many gigs you want to give its this is

00:16:57,120 --> 00:17:10,250
temporary like this isn't a thing you've

00:16:58,620 --> 00:17:10,250
been in production yeah yeah okay great

00:17:11,689 --> 00:17:15,600
all right so the next question I think

00:17:13,829 --> 00:17:17,490
I'll try to answer is where are these

00:17:15,600 --> 00:17:19,319
options coming from and like how do you

00:17:17,490 --> 00:17:23,069
find out about them is that sound cool

00:17:19,319 --> 00:17:29,250
people will know that alright let's go

00:17:23,069 --> 00:17:30,750
to three and so typically what I'll do

00:17:29,250 --> 00:17:34,320
is they'll go to the next step org slash

00:17:30,750 --> 00:17:37,650
Nick so a select options HTML and that's

00:17:34,320 --> 00:17:41,610
linked to from the home page so just the

00:17:37,650 --> 00:17:44,809
options book options and then like what

00:17:41,610 --> 00:17:47,789
some stocks where people read thanks max

00:17:44,809 --> 00:17:53,370
all right this serves for Emacs probably

00:17:47,789 --> 00:17:56,400
run DMX daemon and install these user

00:17:53,370 --> 00:17:57,750
services if you want you can specify the

00:17:56,400 --> 00:18:06,169
exact package you want

00:17:57,750 --> 00:18:08,730
how about what's so cool sure so engine

00:18:06,169 --> 00:18:12,960
yeah so it's like there's the ton of

00:18:08,730 --> 00:18:14,789
configure nginx like virtual hosts and

00:18:12,960 --> 00:18:20,760
ssl just like turns on let's encrypt

00:18:14,789 --> 00:18:21,120
automatically who force SSL stuff like

00:18:20,760 --> 00:18:24,500
that

00:18:21,120 --> 00:18:24,500
cool right yeah

00:18:35,400 --> 00:18:53,700
yeah I love this okay so yeah open fire

00:19:04,800 --> 00:19:45,100
okay okay okay I'm gonna make a note to

00:19:42,460 --> 00:20:00,940
our overriding service service but I'm

00:19:45,100 --> 00:20:10,300
not mix kind of Confucian OpenSSH you

00:20:00,940 --> 00:20:13,660
can probably do the binding specific all

00:20:10,300 --> 00:20:18,430
right so any other questions so far cool

00:20:13,660 --> 00:20:20,890
all right yeah yeah absolutely

00:20:18,430 --> 00:20:23,520
that's exactly go see it in vm or where

00:20:20,890 --> 00:20:23,520
you can actually read

00:20:25,490 --> 00:20:30,030
well so that you win so there's first

00:20:27,990 --> 00:20:39,630
there's command age for configuration

00:20:30,030 --> 00:20:43,770
mix and it's large it's very large quite

00:20:39,630 --> 00:20:46,020
large almost ten 100,000 blends and so

00:20:43,770 --> 00:20:47,220
this contains every single mix OS option

00:20:46,020 --> 00:21:01,220
that the entire operating system

00:20:47,220 --> 00:21:05,490
supports so like very cool all right

00:21:01,220 --> 00:21:07,650
what's something we should do okay can

00:21:05,490 --> 00:21:09,780
you show us that option oh sure yeah

00:21:07,650 --> 00:21:12,270
mixer stash this will show for my laptop

00:21:09,780 --> 00:21:15,049
actually which could be cool so the next

00:21:12,270 --> 00:21:25,380
option lets you interrogate

00:21:15,049 --> 00:21:29,390
configuration so okay so program stops

00:21:25,380 --> 00:21:34,350
way isn't full one so maybe that enable

00:21:29,390 --> 00:21:37,040
so barrier program stops way Valley I

00:21:34,350 --> 00:21:40,679
accepted the truth the default is false

00:21:37,040 --> 00:21:42,990
sample you can said it's true and the

00:21:40,679 --> 00:21:45,559
the description that's embedded in Nix

00:21:42,990 --> 00:21:49,230
packages it's kind of poorly formatted

00:21:45,559 --> 00:21:52,200
but for sure and here's where it's

00:21:49,230 --> 00:21:56,520
declare and this is where I specified

00:21:52,200 --> 00:21:57,960
the value I want alright so maybe let's

00:21:56,520 --> 00:22:00,350
take a look at that file because it's

00:21:57,960 --> 00:22:03,919
pretty cool that it shows it like that

00:22:00,350 --> 00:22:03,919
yeah oh yeah

00:22:05,210 --> 00:22:12,700
would have been programs are swayed

00:22:16,370 --> 00:22:23,280
wait what's it doing yeah yeah yeah this

00:22:21,720 --> 00:22:25,020
is this is where I feel like Mission

00:22:23,280 --> 00:22:28,380
West gives me super powers because you

00:22:25,020 --> 00:22:30,150
install like these you like on a sub en

00:22:28,380 --> 00:22:32,790
system or something or Ubuntu you like

00:22:30,150 --> 00:22:34,380
apt-get install KDE or plasma and it

00:22:32,790 --> 00:22:37,350
just installs bunch of hooks and then

00:22:34,380 --> 00:22:38,700
systems doing what I don't know and all

00:22:37,350 --> 00:22:40,890
these programs have different hooks that

00:22:38,700 --> 00:22:44,220
are all interacting together and I don't

00:22:40,890 --> 00:22:46,200
feel like it is clear to me how to know

00:22:44,220 --> 00:22:48,600
what its gonna do so let's take a look

00:22:46,200 --> 00:22:51,270
at what programs that suede enable will

00:22:48,600 --> 00:22:55,730
do and I'll do this in the browser

00:22:51,270 --> 00:23:05,250
because I think that'll be a bit nicer

00:22:55,730 --> 00:23:07,020
programs cool alright so um on the web

00:23:05,250 --> 00:23:16,320
interface it takes you to github which

00:23:07,020 --> 00:23:18,510
is school okay so we'll skip across the

00:23:16,320 --> 00:23:20,250
top because this is all just some

00:23:18,510 --> 00:23:22,020
background stuff remember Nyx's of lazy

00:23:20,250 --> 00:23:25,950
language so let's lead read this a bit

00:23:22,020 --> 00:23:28,470
easily so the first section in a module

00:23:25,950 --> 00:23:30,780
like this is where you define some

00:23:28,470 --> 00:23:31,980
options these are just a description of

00:23:30,780 --> 00:23:34,410
the options that you want to be

00:23:31,980 --> 00:23:36,870
available and so there's that config

00:23:34,410 --> 00:23:41,640
that we the description that we saw in

00:23:36,870 --> 00:23:43,560
the main page we have ass another option

00:23:41,640 --> 00:23:45,690
here extra session commands where you

00:23:43,560 --> 00:23:49,580
can just run some arbitrary commands

00:23:45,690 --> 00:23:52,440
when you start up some extra packages

00:23:49,580 --> 00:23:55,410
the so this for example installs by

00:23:52,440 --> 00:23:59,340
defaults way lock sway idle sway BG X

00:23:55,410 --> 00:24:00,840
Wayland Rd T and D menu so these pack if

00:23:59,340 --> 00:24:03,360
what if you enable sway these will be

00:24:00,840 --> 00:24:04,920
installed with it if you disable sway

00:24:03,360 --> 00:24:07,280
those package will no longer be

00:24:04,920 --> 00:24:07,280
installed

00:24:08,280 --> 00:24:16,140
and some example there okay so here we

00:24:14,340 --> 00:24:18,990
go here's the actual implementation of

00:24:16,140 --> 00:24:23,060
the module where it's actually doing a

00:24:18,990 --> 00:24:28,020
fit if it's enabled CFG just refers to

00:24:23,060 --> 00:24:29,820
packages that sway sway to enable ya

00:24:28,020 --> 00:24:32,340
programs let's wait on anyone it's all

00:24:29,820 --> 00:24:34,200
right if that's enabled it adds

00:24:32,340 --> 00:24:36,990
environment very or some environment

00:24:34,200 --> 00:24:39,900
items so adds sway and the extra

00:24:36,990 --> 00:24:44,220
packages to your environment it adds an

00:24:39,900 --> 00:24:49,740
Etsy / Etsy sway / config file which is

00:24:44,220 --> 00:24:52,770
a sin link to this default config it

00:24:49,740 --> 00:24:55,590
enables swing lock in Pam it enables

00:24:52,770 --> 00:24:58,830
OpenGL enable some fonts and enables

00:24:55,590 --> 00:25:00,390
decomps and that's it that's what that's

00:24:58,830 --> 00:25:04,080
what happens when you do programs to

00:25:00,390 --> 00:25:08,750
sway it on enable this equals true make

00:25:04,080 --> 00:25:08,750
sense and everything in here is

00:25:09,440 --> 00:25:13,470
everything in here is undone so if you

00:25:11,910 --> 00:25:15,840
if you enable sway and then you check

00:25:13,470 --> 00:25:19,340
backoff all of the stuff goes away that

00:25:15,840 --> 00:25:29,580
file and se will no longer be there

00:25:19,340 --> 00:25:33,780
let's take a look at sag rate question

00:25:29,580 --> 00:25:39,360
I'm so good can you know it's been a bit

00:25:33,780 --> 00:25:41,640
like make option B fault sure yeah so

00:25:39,360 --> 00:25:45,720
okay yes so this gets a little bit into

00:25:41,640 --> 00:25:48,210
the weeds but so this just adds the

00:25:45,720 --> 00:25:49,740
default so like the sway package comes

00:25:48,210 --> 00:25:53,190
with a default config so it could start

00:25:49,740 --> 00:25:57,630
and maybe you want to specify only sway

00:25:53,190 --> 00:25:59,970
and so you can override that file in

00:25:57,630 --> 00:26:00,630
your own config and then we'll take

00:25:59,970 --> 00:26:02,400
precedence

00:26:00,630 --> 00:26:03,040
so make option default makes it very

00:26:02,400 --> 00:26:06,370
little press

00:26:03,040 --> 00:26:09,780
and if you if you said it without makeup

00:26:06,370 --> 00:26:09,780
sweetie felt it's a higher best notes

00:26:12,210 --> 00:26:15,330
all right

00:26:16,780 --> 00:26:28,540
mmm yeah so Nick so s modules are a

00:26:23,080 --> 00:26:30,190
delightful bit of programming tricks in

00:26:28,540 --> 00:26:32,920
order to make all the modules merge

00:26:30,190 --> 00:26:37,300
together and so one of the tricky things

00:26:32,920 --> 00:26:40,180
is Nick's can't know if like so if in

00:26:37,300 --> 00:26:43,500
this block you could do programs that's

00:26:40,180 --> 00:26:45,970
laid out in Abel equals false right and

00:26:43,500 --> 00:26:47,500
the module system knows a hat needs to

00:26:45,970 --> 00:26:49,600
know ahead of time the total sum of

00:26:47,500 --> 00:26:51,730
every configuration before it's merged

00:26:49,600 --> 00:26:55,000
so that it can merge it together and

00:26:51,730 --> 00:26:58,780
that make if it's a it's a magic trick

00:26:55,000 --> 00:27:05,710
to get rid of recursion problems all

00:26:58,780 --> 00:27:09,280
right yeah so every module can do that

00:27:05,710 --> 00:27:10,720
not so cool that sound let's take a look

00:27:09,280 --> 00:27:20,100
at another one maybe we could look at

00:27:10,720 --> 00:27:20,100
open uh cessation and complicating yeah

00:27:22,140 --> 00:27:31,020
no I don't I just want to give him like

00:27:26,770 --> 00:27:31,020
the tools to go explore the conference

00:27:38,860 --> 00:27:42,610
all right so this one turned out to be a

00:27:40,059 --> 00:27:44,440
bit complicated but so if you have

00:27:42,610 --> 00:27:46,990
services that open estates edit option

00:27:44,440 --> 00:27:49,680
enable certainly needed some other

00:27:46,990 --> 00:27:52,180
common flags that you have for open SH

00:27:49,680 --> 00:27:54,760
we'll get past this is all the

00:27:52,180 --> 00:27:57,220
documentation and option set up the none

00:27:54,760 --> 00:27:58,720
of this is actually doing anything down

00:27:57,220 --> 00:28:03,490
at the end we have that you make make

00:27:58,720 --> 00:28:05,350
this config that enable and so here we

00:28:03,490 --> 00:28:08,710
are it creates its own user for for

00:28:05,350 --> 00:28:12,450
isolation it adds some s SSH file to

00:28:08,710 --> 00:28:14,710
Etsy and sets up the system tea service

00:28:12,450 --> 00:28:21,760
so this is some tea service

00:28:14,710 --> 00:28:25,480
let's see wanted by multi user needs

00:28:21,760 --> 00:28:27,160
network to start stop the chases false

00:28:25,480 --> 00:28:28,360
so that it like if it changed it doesn't

00:28:27,160 --> 00:28:32,679
kick you out of your server that's be

00:28:28,360 --> 00:28:34,630
nice and then some some scripts that it

00:28:32,679 --> 00:28:38,170
will start execute as it starts up like

00:28:34,630 --> 00:28:39,490
generating the host keys this turned out

00:28:38,170 --> 00:28:42,160
to be a bit more complicated than I was

00:28:39,490 --> 00:28:44,250
expecting so if you will take a look at

00:28:42,160 --> 00:28:44,250
it

00:28:48,010 --> 00:28:55,210
sure we have tell me yeah we don't have

00:28:50,170 --> 00:28:58,980
to tell me so thank goodness let's just

00:28:55,210 --> 00:28:58,980
go take play around this VM a little bit

00:29:00,900 --> 00:29:05,800
so we've got a we've got this

00:29:03,160 --> 00:29:07,360
configuration we had they had nginx they

00:29:05,800 --> 00:29:12,210
didn't demonstrate curl working in the

00:29:07,360 --> 00:29:12,210
view I'm not sure I did all right

00:29:23,390 --> 00:29:30,360
cruel ones who send to one alright so

00:29:27,540 --> 00:29:38,400
there's that that website that we had to

00:29:30,360 --> 00:29:41,090
find really wrong alright so let's

00:29:38,400 --> 00:29:41,090
change that

00:29:43,400 --> 00:29:52,140
let's disable nginx so just setting that

00:29:49,410 --> 00:29:55,289
to false and

00:29:52,140 --> 00:29:55,289
[Music]

00:30:01,170 --> 00:30:04,250
and then we go

00:30:13,460 --> 00:30:18,800
this is a brand-new system configuration

00:30:16,040 --> 00:30:32,740
if they reuse the hard disk that we had

00:30:18,800 --> 00:30:36,080
before so we can do and if we run curl

00:30:32,740 --> 00:30:37,490
it's not ready so curl or nginx is no

00:30:36,080 --> 00:30:48,140
longer running on the host

00:30:37,490 --> 00:30:50,060
essentially no trace so there you are

00:30:48,140 --> 00:30:54,010
we can see that do mine nginx at one

00:30:50,060 --> 00:30:54,010
point because this Susan has lost yeah

00:31:11,970 --> 00:31:15,200
[Music]

00:31:33,779 --> 00:31:41,649
also like to turn off Nick's like so you

00:31:36,129 --> 00:31:43,389
don't even have Nick's yeah that's a

00:31:41,649 --> 00:31:45,279
good idea I don't think you can do that

00:31:43,389 --> 00:32:10,330
right now but I think you should be able

00:31:45,279 --> 00:32:15,970
to do that that's a great all right so

00:32:10,330 --> 00:32:27,370
we just can we enable the intermix

00:32:15,970 --> 00:32:28,539
inside so let's see so it's kind of

00:32:27,370 --> 00:32:32,379
unfortunate because the font really

00:32:28,539 --> 00:32:34,090
sucks so it's gonna hard to see but what

00:32:32,379 --> 00:32:51,250
we could do is we could copy this config

00:32:34,090 --> 00:32:53,320
in into a dictionary build yeah yeah as

00:32:51,250 --> 00:32:56,830
long as you inside VM you didn't expose

00:32:53,320 --> 00:32:57,830
we build switch it would break the disk

00:32:56,830 --> 00:33:00,950
and have a new

00:32:57,830 --> 00:33:07,279
and bring the new so then you have a mix

00:33:00,950 --> 00:33:12,919
coffee yeah that's been a dangerous how

00:33:07,279 --> 00:33:14,960
do you yeah sure so when I deploy to

00:33:12,919 --> 00:33:17,539
real things like with Knicks ups which

00:33:14,960 --> 00:33:20,520
is sort of a similar idea to this I do

00:33:17,539 --> 00:33:24,970
this thing where I paint it

00:33:20,520 --> 00:33:24,970
[Music]

00:33:25,929 --> 00:33:32,299
so inside I have I added custom

00:33:30,500 --> 00:33:35,029
configurations on this which fails

00:33:32,299 --> 00:33:37,240
saying you're on your server don't do

00:33:35,029 --> 00:33:37,240
that

00:33:41,510 --> 00:33:50,000
so as you say like the configuration

00:33:44,450 --> 00:33:53,360
that mix is not in slash next so sorry

00:33:50,000 --> 00:33:55,460
in slash let's see next generation it's

00:33:53,360 --> 00:33:57,460
not there in the VN by default is it no

00:33:55,460 --> 00:34:01,580
it's not as well I know

00:33:57,460 --> 00:34:04,970
well it doesn't here well okay you know

00:34:01,580 --> 00:34:07,490
so it ideally for demo purposes of would

00:34:04,970 --> 00:34:08,960
like this demo it would so I can be in

00:34:07,490 --> 00:34:13,250
there and just like hacking around and

00:34:08,960 --> 00:34:14,929
playing and stuff but it's my first one

00:34:13,250 --> 00:34:16,849
so thank you to me when I'm working on

00:34:14,929 --> 00:34:19,609
an excess module yeah and I usually like

00:34:16,849 --> 00:34:21,589
you're hearing yeah and whatever part

00:34:19,609 --> 00:34:24,889
are doing is repos up over here every

00:34:21,589 --> 00:34:26,540
time which takes time mmm yeah so you

00:34:24,889 --> 00:34:27,859
should totally be able to have a

00:34:26,540 --> 00:34:29,960
configure in there and like Nick's

00:34:27,859 --> 00:34:32,810
remote switch and like do have takes to

00:34:29,960 --> 00:34:34,550
system yeah yeah I've got me when I

00:34:32,810 --> 00:34:36,409
first hit that I was looking for or to

00:34:34,550 --> 00:34:38,599
rebuild at the end there was no

00:34:36,409 --> 00:34:41,020
configuration Nick so I'll just import

00:34:38,599 --> 00:34:44,839
it and then we talked about that I think

00:34:41,020 --> 00:34:46,429
that's a feature or some things in

00:34:44,839 --> 00:34:50,260
Nick's Toback sense until you start

00:34:46,429 --> 00:34:50,260
doing it now because oh I see why

00:34:50,510 --> 00:34:55,100
so let's take a look at them my system

00:34:53,119 --> 00:34:57,130
configure because I think I think

00:34:55,100 --> 00:35:00,459
there's some kind of interesting stuff

00:34:57,130 --> 00:35:00,459
[Music]

00:35:05,650 --> 00:35:11,030
alright okay so there was a question

00:35:09,470 --> 00:35:13,760
about overwriting services and

00:35:11,030 --> 00:35:19,520
overwriting options and services one

00:35:13,760 --> 00:35:21,560
thing you can do is so let's take them

00:35:19,520 --> 00:35:24,380
all so I have this definition there of

00:35:21,560 --> 00:35:45,470
Nyx GC where garbage collects is mix

00:35:24,380 --> 00:35:48,050
automatically alright so there's this

00:35:45,470 --> 00:35:49,850
option mix GC automatically turned it on

00:35:48,050 --> 00:35:53,330
it'll periodically collect garbage echo

00:35:49,850 --> 00:35:55,040
system garbage being mixed or paths that

00:35:53,330 --> 00:36:00,200
are not used by the other store path

00:35:55,040 --> 00:36:02,540
Saunders so this is fairly familiar I

00:36:00,200 --> 00:36:04,880
think at this point we've defined some a

00:36:02,540 --> 00:36:11,000
few options specifically automatic which

00:36:04,880 --> 00:36:13,100
is interesting and let's see so it

00:36:11,000 --> 00:36:18,140
create all these creates the next GC

00:36:13,100 --> 00:36:20,150
service but only creates some reason to

00:36:18,140 --> 00:36:24,740
tell system D to start it if you specify

00:36:20,150 --> 00:36:26,450
automatic and and so this that's that's

00:36:24,740 --> 00:36:30,200
all of is it's pretty simple any

00:36:26,450 --> 00:36:34,780
questions about this I'm worried a loss

00:36:30,200 --> 00:36:39,050
to punch you and I apologize if I have

00:36:34,780 --> 00:36:41,869
but okay so I like this this is pretty

00:36:39,050 --> 00:36:47,030
good I have what configured my laptop to

00:36:41,869 --> 00:36:49,210
run garbage collection every five

00:36:47,030 --> 00:36:49,210
minutes

00:36:53,279 --> 00:37:00,880
yeah well every 10 minutes

00:36:55,390 --> 00:37:02,229
okay so I've specified Nick's GC told

00:37:00,880 --> 00:37:06,669
system do you start this every 10

00:37:02,229 --> 00:37:07,809
minutes call the guards it's super

00:37:06,669 --> 00:37:10,390
annoying that's why I work in the

00:37:07,809 --> 00:37:13,439
practical lorry and actually I did this

00:37:10,390 --> 00:37:15,849
because I wanted to make worry good

00:37:13,439 --> 00:37:17,890
anyway so this is pretty good but what

00:37:15,849 --> 00:37:20,979
is really annoying is that I'm on an

00:37:17,890 --> 00:37:22,569
airplane or I am unplugged and can't

00:37:20,979 --> 00:37:24,640
plug in the garbage collects with the

00:37:22,569 --> 00:37:26,949
stuff and I have to spend a bunch

00:37:24,640 --> 00:37:30,279
battery power rebuilding all this stuff

00:37:26,949 --> 00:37:32,859
and you can see that this not this

00:37:30,279 --> 00:37:37,749
module I specified system deed services

00:37:32,859 --> 00:37:41,890
NICs - GC and so we can we can go fiddle

00:37:37,749 --> 00:37:44,589
with it so here we are we have system T

00:37:41,890 --> 00:37:47,259
got services Nicks - GC and we can

00:37:44,589 --> 00:37:50,529
extend it so I have added this unit fig

00:37:47,259 --> 00:37:52,779
called conditioned AC power and so only

00:37:50,529 --> 00:37:55,589
if I am plugged into the power will next

00:37:52,779 --> 00:37:55,589
GC start yes

00:38:03,000 --> 00:38:06,199
[Music]

00:38:11,660 --> 00:38:23,700
usually yes let me show it one more in

00:38:21,930 --> 00:38:27,150
Naga affect it so here's another one I

00:38:23,700 --> 00:38:29,340
use EFS in my file system and ZFS scrubs

00:38:27,150 --> 00:38:31,080
means read everything on your disk and

00:38:29,340 --> 00:38:32,370
make sure it's good and that's not nice

00:38:31,080 --> 00:38:46,230
to run while you're not on battery power

00:38:32,370 --> 00:38:48,330
either and so it doesn't it isn't that

00:38:46,230 --> 00:38:51,120
cool look around but ages ya get that

00:38:48,330 --> 00:38:54,210
 to work it's really nice don't

00:38:51,120 --> 00:38:54,630
swallow things it works using these

00:38:54,210 --> 00:38:58,050
things

00:38:54,630 --> 00:39:00,300
meet you alright so this abyss do you

00:38:58,050 --> 00:39:03,840
talk about the script yeah okay yeah so

00:39:00,300 --> 00:39:04,230
we could totally do that we could let's

00:39:03,840 --> 00:39:05,820
see

00:39:04,230 --> 00:39:08,970
well we'll break this up a little bit so

00:39:05,820 --> 00:39:10,930
we'll make this a little more

00:39:08,970 --> 00:39:16,380
normal so that's the same thing right

00:39:10,930 --> 00:39:16,380
and we can totally do script equals

00:39:17,670 --> 00:39:25,750
alright so we can we can do that this

00:39:20,590 --> 00:39:28,000
would be fine oh it does it oh so it'll

00:39:25,750 --> 00:39:30,660
run this first and then okay so it will

00:39:28,000 --> 00:39:33,370
routes them but how about make for us

00:39:30,660 --> 00:39:37,480
alright so in this case it will just add

00:39:33,370 --> 00:39:40,150
some more scripts to run but we could

00:39:37,480 --> 00:39:41,620
use live done make books and this will

00:39:40,150 --> 00:39:43,840
make it a higher priority and say

00:39:41,620 --> 00:39:48,850
nothing what is like by default just do

00:39:43,840 --> 00:39:52,270
this okay

00:39:48,850 --> 00:39:59,640
good yeah okay so cool so let's try that

00:39:52,270 --> 00:39:59,640
is that cool let's try

00:40:06,600 --> 00:40:12,570
so this is my actual laptop oh boy

00:40:09,740 --> 00:40:17,040
all right so I have a custom branch of

00:40:12,570 --> 00:40:18,660
mix packages so I need to set that so

00:40:17,040 --> 00:40:22,080
this is going to use to just the check

00:40:18,660 --> 00:40:23,700
out of each package that I have and use

00:40:22,080 --> 00:40:45,920
that version picks packages to build my

00:40:23,700 --> 00:40:48,120
system so there we go

00:40:45,920 --> 00:41:00,090
instead of rainy garbage collector just

00:40:48,120 --> 00:41:02,070
Brin so I actually don't want that so

00:41:00,090 --> 00:41:05,880
I'm going to bleep that and return it

00:41:02,070 --> 00:41:08,070
back to normal I sometimes I like to do

00:41:05,880 --> 00:41:09,750
things that feel a little scary you know

00:41:08,070 --> 00:41:11,730
earlier demo I did a NYX build which

00:41:09,750 --> 00:41:12,960
deleted everything in my system but it

00:41:11,730 --> 00:41:15,480
did work because it would a certain mix

00:41:12,960 --> 00:41:17,340
build but if I'm being honest with you I

00:41:15,480 --> 00:41:23,520
actually do race a lot of my system and

00:41:17,340 --> 00:41:26,400
every boot where so every time my system

00:41:23,520 --> 00:41:27,900
boots I ran a ZFS rollback on my point

00:41:26,400 --> 00:41:30,780
on the group file system and everything

00:41:27,900 --> 00:41:32,910
on my root filesystem gets erased that

00:41:30,780 --> 00:41:34,230
does not in fact my next directory or my

00:41:32,910 --> 00:41:36,390
home directory but everything else is

00:41:34,230 --> 00:41:39,540
done and this is fine Nick's OS can boot

00:41:36,390 --> 00:41:40,740
without without anything in your root it

00:41:39,540 --> 00:41:43,320
doesn't need anything in that seat it

00:41:40,740 --> 00:41:46,460
doesn't need anything end user and bar

00:41:43,320 --> 00:41:49,200
or live anything like that it's just

00:41:46,460 --> 00:41:51,860
it's just it's fine it's fine booting

00:41:49,200 --> 00:41:51,860
just from next door

00:41:59,060 --> 00:42:06,090
yeah yeah so one thing that really was

00:42:02,250 --> 00:42:08,730
annoying about this so one thing I do is

00:42:06,090 --> 00:42:12,140
my my network configurations like my

00:42:08,730 --> 00:42:14,390
Wi-Fi networks that's not erased

00:42:12,140 --> 00:42:33,820
Bluetooth effects are erased and my very

00:42:14,390 --> 00:42:33,820
nice headphones sir sorry oh ah oh yeah

00:42:48,310 --> 00:42:51,420
[Music]

00:42:58,860 --> 00:43:04,620
one else is kept cool in here

00:43:01,460 --> 00:43:07,880
can I ask you about this merging I don't

00:43:04,620 --> 00:43:07,880
understand always up to complicate

00:43:08,300 --> 00:43:12,720
merging a configuration merchant

00:43:11,010 --> 00:43:15,660
yeah they understand the concept yeah

00:43:12,720 --> 00:43:17,730
sure that's totally reasonable so and

00:43:15,660 --> 00:43:20,370
here I have this vibe like to take this

00:43:17,730 --> 00:43:21,840
example I have environment and inside

00:43:20,370 --> 00:43:25,350
environment variables and then some

00:43:21,840 --> 00:43:27,600
variables that I've specified and other

00:43:25,350 --> 00:43:28,350
places said if iron McDuck variables too

00:43:27,600 --> 00:43:32,000
so

00:43:28,350 --> 00:43:32,000
[Music]

00:43:36,840 --> 00:43:40,019
[Music]

00:43:45,810 --> 00:43:51,210
all right so we'll dig north at one

00:43:48,330 --> 00:43:52,590
here's a here's a place in xdg portals

00:43:51,210 --> 00:43:55,290
where it sets the war environment

00:43:52,590 --> 00:43:58,200
variables and it's an input method

00:43:55,290 --> 00:44:03,150
variables are set and all of this comes

00:43:58,200 --> 00:44:03,930
down to the make option so Nix OS

00:44:03,150 --> 00:44:06,240
options

00:44:03,930 --> 00:44:09,180
many of them have merged a VIIRS so if

00:44:06,240 --> 00:44:12,750
two or more places to find the same

00:44:09,180 --> 00:44:14,850
value they'll merge in some way in this

00:44:12,750 --> 00:44:18,240
case the value is an attribute set so

00:44:14,850 --> 00:44:23,550
the merge behavior is take the two

00:44:18,240 --> 00:44:25,680
actually sets and get the sum up to some

00:44:23,550 --> 00:44:27,750
with lists the default behavior is to

00:44:25,680 --> 00:44:31,830
take all the lists and just append them

00:44:27,750 --> 00:44:34,800
in order and what order I couldn't tell

00:44:31,830 --> 00:44:36,690
you exactly so here is a kind of

00:44:34,800 --> 00:44:39,060
complicated one profile of relative and

00:44:36,690 --> 00:44:41,880
environment variables and this is an

00:44:39,060 --> 00:44:43,440
attribute set of lists and so in this

00:44:41,880 --> 00:44:50,730
case the actually sets with merge and

00:44:43,440 --> 00:44:53,640
the list inside of them yeah one thing

00:44:50,730 --> 00:44:55,590
it's like if these services were like

00:44:53,640 --> 00:44:57,690
Nixa finder they knew about the store

00:44:55,590 --> 00:44:59,480
and their derivation is done good thing

00:44:57,690 --> 00:45:02,370
because there's a lot of budget to get

00:44:59,480 --> 00:45:06,750
traditional generic services work in

00:45:02,370 --> 00:45:12,450
this framework if say OpenSSH well Nix

00:45:06,750 --> 00:45:16,910
is great and use a book user module to

00:45:12,450 --> 00:45:19,470
maintain and menu system hang together

00:45:16,910 --> 00:45:21,660
it's a bit tricky so part of the

00:45:19,470 --> 00:45:23,640
superpowers I think niche gives me and

00:45:21,660 --> 00:45:25,890
Nick's packages kiss me is everything's

00:45:23,640 --> 00:45:27,690
in one place but if I have to wait get

00:45:25,890 --> 00:45:29,520
them open it up open a steak package to

00:45:27,690 --> 00:45:34,470
look at it I feel like it's a lot more

00:45:29,520 --> 00:45:37,260
complicated yeah are you gonna show how

00:45:34,470 --> 00:45:39,630
basically modules like the models

00:45:37,260 --> 00:45:42,360
infrastructure as if not the modules

00:45:39,630 --> 00:45:42,570
themself but I know code no no it's too

00:45:42,360 --> 00:45:46,310
much

00:45:42,570 --> 00:45:46,310
yeah how do you know

00:45:47,830 --> 00:45:52,000
yeah so it's by type

00:45:49,540 --> 00:45:53,740
almost all of them are merging some

00:45:52,000 --> 00:45:56,440
don't have sensible merges you can't

00:45:53,740 --> 00:45:58,990
merge a true and a false right so if you

00:45:56,440 --> 00:46:00,250
declare a type is a boolean one place to

00:45:58,990 --> 00:46:00,880
clear as it does enable it and I've

00:46:00,250 --> 00:46:02,740
disabled

00:46:00,880 --> 00:46:11,440
it'll be an error and it won't it won't

00:46:02,740 --> 00:46:13,900
create a system okay pretty much yeah

00:46:11,440 --> 00:46:20,530
too much all our virtual and I think in

00:46:13,900 --> 00:46:23,800
a way that is intuitive yeah my secrets

00:46:20,530 --> 00:46:26,800
yeah yeah sure

00:46:23,800 --> 00:46:28,480
so SSH keys I copy the mint where I use

00:46:26,800 --> 00:46:32,380
a hardware dongle I don't put those in

00:46:28,480 --> 00:46:39,250
my next rest container I have some like

00:46:32,380 --> 00:46:42,670
Wi-Fi secrets I are I mean so typical a

00:46:39,250 --> 00:46:53,710
temple system and in fact wait so for

00:46:42,670 --> 00:46:59,590
SSH so so I mean I I do that just like

00:46:53,710 --> 00:47:01,360
just like anybody else so I have like

00:46:59,590 --> 00:47:03,040
message directory and I have a config

00:47:01,360 --> 00:47:07,690
and I have some keys in there and and

00:47:03,040 --> 00:47:09,700
mixed doesn't touch that for other

00:47:07,690 --> 00:47:12,820
secrets I try to put them elsewhere

00:47:09,700 --> 00:47:15,250
secrets and X OS is a bit of unsolved

00:47:12,820 --> 00:47:18,960
problem and the only real concrete

00:47:15,250 --> 00:47:22,860
advice is don't put your secrets in it

00:47:18,960 --> 00:47:22,860
because you don't want them in your next

00:47:25,490 --> 00:47:45,910
yeah yeah but that way you know just

00:47:41,720 --> 00:47:45,910
like SSH keys and GPG keys like that son

00:47:49,480 --> 00:47:55,369
yeah I mean I use I use tools like other

00:47:52,520 --> 00:47:58,670
people use too so like pass or even just

00:47:55,369 --> 00:48:03,760
like a walk down the aisle in my duck

00:47:58,670 --> 00:48:03,760
big directory there nothing special

00:48:13,390 --> 00:48:18,650
yeah yeah good point so he's saying

00:48:16,089 --> 00:48:18,950
secrets are like stick and and I agree

00:48:18,650 --> 00:48:21,770
with that

00:48:18,950 --> 00:48:25,130
so typically secrets have a different

00:48:21,770 --> 00:48:27,950
life life cycle event in your system if

00:48:25,130 --> 00:48:29,750
I were to reboot and like I rolled over

00:48:27,950 --> 00:48:31,430
a bunch of my SSH keys I wouldn't want

00:48:29,750 --> 00:48:32,270
to roll back and have that old SSH keys

00:48:31,430 --> 00:48:35,380
again

00:48:32,270 --> 00:48:45,440
so I treat them as completely separate

00:48:35,380 --> 00:48:47,000
thank you sure okay so I I so I use EFS

00:48:45,440 --> 00:48:48,560
so I feel like this is cheating a little

00:48:47,000 --> 00:48:51,800
bit by the only thing my backup is

00:48:48,560 --> 00:48:58,280
working directory a trucks bus system

00:48:51,800 --> 00:49:00,670
and it was our fault because and we

00:48:58,280 --> 00:49:05,950
stole the whole system but it's comfy

00:49:00,670 --> 00:49:05,950
without a backup system

00:49:06,749 --> 00:49:10,619
I rescued the system I got data off but

00:49:09,180 --> 00:49:34,799
I got the system back to the state it

00:49:10,619 --> 00:49:38,609
was before we talk too much yeah so we

00:49:34,799 --> 00:49:41,279
did a mix I think Nick's us from from a

00:49:38,609 --> 00:49:44,519
USB Drive and then made a new partition

00:49:41,279 --> 00:49:49,579
and then Nick sauce we build switch got

00:49:44,519 --> 00:49:49,579
the new config in and it kind of worked

00:49:51,019 --> 00:49:59,640
so every time well I'm sorry I just

00:49:57,599 --> 00:50:01,440
showed you one more thing which are real

00:49:59,640 --> 00:50:03,299
cool thing is that when you're changing

00:50:01,440 --> 00:50:05,579
and saying the config is Avenger Nexus

00:50:03,299 --> 00:50:07,440
stuff like that all the all the changes

00:50:05,579 --> 00:50:09,119
haven't done go into the store and that

00:50:07,440 --> 00:50:13,109
got me out some trouble because I'm like

00:50:09,119 --> 00:50:16,799
a vast revision versioning by by a

00:50:13,109 --> 00:50:19,380
side-effect of our mix work so I knocked

00:50:16,799 --> 00:50:21,869
up by nginx confit yes I was be able to

00:50:19,380 --> 00:50:25,019
it wasn't a gate you thought it wasn't

00:50:21,869 --> 00:50:25,739
mixed or so I was back and find out what

00:50:25,019 --> 00:50:28,680
the problem was

00:50:25,739 --> 00:50:30,960
yeah yeah so ok so every mixer assistant

00:50:28,680 --> 00:50:35,369
has this thing called in a profile and

00:50:30,960 --> 00:50:37,200
so my current system is this whatever

00:50:35,369 --> 00:50:39,200
that is and my booted system is probably

00:50:37,200 --> 00:50:43,010
the same actually no it's different

00:50:39,200 --> 00:50:47,790
because I played with though

00:50:43,010 --> 00:50:58,380
the GC tuning options and also I can do

00:50:47,790 --> 00:50:59,910
in to us rebuild rollback right and and

00:50:58,380 --> 00:51:06,059
so what this will do

00:50:59,910 --> 00:51:08,280
oops Academy route so it's a Milan

00:51:06,059 --> 00:51:10,980
burden 252 and it's going back to 251

00:51:08,280 --> 00:51:13,170
and in fact I could do that again and

00:51:10,980 --> 00:51:14,520
I'm back at 250 and eventually it's

00:51:13,170 --> 00:51:17,240
going to break because my networking for

00:51:14,520 --> 00:51:27,510
configuration maybe this time unit and

00:51:17,240 --> 00:51:30,559
that is so these are all the systems

00:51:27,510 --> 00:51:40,710
I've had almost it starts at number 100

00:51:30,559 --> 00:51:47,640
and those are all starts at number give

00:51:40,710 --> 00:51:50,160
you four three pretty good there's two I

00:51:47,640 --> 00:51:55,170
don't think I have a one so there's my

00:51:50,160 --> 00:51:58,290
config from January 2019 and if I want

00:51:55,170 --> 00:52:00,720
to do I could roll back to that I wish I

00:51:58,290 --> 00:52:02,190
had a like different desktop setup

00:52:00,720 --> 00:52:06,869
because I could also do it at the motor

00:52:02,190 --> 00:52:08,369
if I reboot I can it will show you a

00:52:06,869 --> 00:52:10,589
list of all the configuration versions

00:52:08,369 --> 00:52:12,890
ever had and I could pick one and reboot

00:52:10,589 --> 00:52:12,890
to it

00:52:14,430 --> 00:52:26,790
- when / transistor /sw okay it's

00:52:19,490 --> 00:52:35,670
actually linked to the output yeah and I

00:52:26,790 --> 00:52:39,690
was wondering why it's not believed so

00:52:35,670 --> 00:52:43,350
this so current system itself is like

00:52:39,690 --> 00:52:45,840
assume like so I get so so it's all

00:52:43,350 --> 00:52:47,910
self-contained in there and so linking

00:52:45,840 --> 00:52:50,120
to a profile would be variable whereas

00:52:47,910 --> 00:52:52,800
this is is fixed

00:52:50,120 --> 00:52:56,850
anyway that's worse super over time so I

00:52:52,800 --> 00:52:58,620
feel bad keeping y'all here we should

00:52:56,850 --> 00:53:01,700
take a minute let people believe and

00:52:58,620 --> 00:53:01,700
then have people up for questions

00:53:03,740 --> 00:53:11,220

YouTube URL: https://www.youtube.com/watch?v=DK_iLg2Ekwk


