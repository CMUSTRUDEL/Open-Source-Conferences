Title: Gleb - lazy dev env (NixCon 2018)
Publication date: 2018-11-05
Playlist: NixCon 2018 (London)
Description: 
	
Captions: 
	00:00:00,770 --> 00:00:06,480
so hello I'm Gleb I work at digital

00:00:04,049 --> 00:00:08,880
asset we are using mix for the work

00:00:06,480 --> 00:00:12,590
environment and I wanted to give you a

00:00:08,880 --> 00:00:14,460
quick rundown of our Devon as Rob

00:00:12,590 --> 00:00:16,740
previously presented like it's a good

00:00:14,460 --> 00:00:19,080
idea good way to introduce Nixon some

00:00:16,740 --> 00:00:22,590
companies to wrap it in something which

00:00:19,080 --> 00:00:24,420
just works very clean and the users

00:00:22,590 --> 00:00:27,000
don't have to understand what's inside

00:00:24,420 --> 00:00:28,560
so that's exactly what we do all of the

00:00:27,000 --> 00:00:29,820
kudos go to you see Mikey who actually

00:00:28,560 --> 00:00:32,969
did all the hard work I'm just

00:00:29,820 --> 00:00:35,309
maintaining it nowadays so let's say I

00:00:32,969 --> 00:00:38,550
am a new developer in our company and I

00:00:35,309 --> 00:00:40,920
start my first day I get instruction

00:00:38,550 --> 00:00:45,809
installed dear NF Yanis awesome tool

00:00:40,920 --> 00:00:49,020
thank you and then I check out the code

00:00:45,809 --> 00:00:54,539
I go to let me assume that I don't have

00:00:49,020 --> 00:00:56,760
mix installed I go to the our repo it

00:00:54,539 --> 00:00:58,440
tries to load that load the drop

00:00:56,760 --> 00:01:00,449
environment but the tells me insulation

00:00:58,440 --> 00:01:03,719
might be invalid and ax asks me to

00:01:00,449 --> 00:01:09,720
install our so-called Devon

00:01:03,719 --> 00:01:10,290
so I do that with the - which just does

00:01:09,720 --> 00:01:13,950
it for me

00:01:10,290 --> 00:01:16,439
I run it I wait so it will take like 30

00:01:13,950 --> 00:01:19,619
seconds and this connection and why

00:01:16,439 --> 00:01:21,509
we're doing this so why this Devon is

00:01:19,619 --> 00:01:22,740
different from others because probably

00:01:21,509 --> 00:01:24,689
many of you have something similar in

00:01:22,740 --> 00:01:26,820
your companies our company is very

00:01:24,689 --> 00:01:29,369
diverse in your technological choices

00:01:26,820 --> 00:01:30,479
there are people who do Isabel - here

00:01:29,369 --> 00:01:33,119
improving their people who are doing

00:01:30,479 --> 00:01:35,159
Python scripts or JavaScript and

00:01:33,119 --> 00:01:36,509
everything in between so I we cannot

00:01:35,159 --> 00:01:38,280
just use Nick shell because that would

00:01:36,509 --> 00:01:40,409
mean that everybody have to download

00:01:38,280 --> 00:01:43,950
everything and everything is like 10

00:01:40,409 --> 00:01:46,259
gigs of - link so we had to solve this

00:01:43,950 --> 00:01:47,759
somehow so people don't have to wait for

00:01:46,259 --> 00:01:49,950
like now where every single time we

00:01:47,759 --> 00:01:53,270
update our an expected snapshot so we

00:01:49,950 --> 00:01:56,909
had to we implemented use implemented

00:01:53,270 --> 00:01:59,909
lazy layer on top of Nick's tooling to

00:01:56,909 --> 00:02:02,610
kind of download tools on demand when

00:01:59,909 --> 00:02:06,630
need be so while I was waiting the whole

00:02:02,610 --> 00:02:09,690
thing downloaded so let's force the room

00:02:06,630 --> 00:02:12,030
to reload it now I have my path have

00:02:09,690 --> 00:02:13,620
changed and couple of other variables

00:02:12,030 --> 00:02:16,890
have change and if

00:02:13,620 --> 00:02:19,819
- whoops take coal coal SBT to build

00:02:16,890 --> 00:02:23,129
some Scala I can see that this BT now is

00:02:19,819 --> 00:02:25,950
loaded from Devon beam SBT and actually

00:02:23,129 --> 00:02:27,599
when I call it there is it's a wrapper

00:02:25,950 --> 00:02:31,920
script which downloads a bunch of things

00:02:27,599 --> 00:02:34,319
which are necessary to run SBT and does

00:02:31,920 --> 00:02:36,739
cement and this is done completely in

00:02:34,319 --> 00:02:40,049
the background if we're honest BT again

00:02:36,739 --> 00:02:44,670
actually runs right away it's just slow

00:02:40,049 --> 00:02:48,810
with SVG and and the same goes for

00:02:44,670 --> 00:02:51,239
things like JQ or any other tools Jo or

00:02:48,810 --> 00:02:53,640
we even put HT top inside because I mean

00:02:51,239 --> 00:02:56,670
oh there is nothing better on my quest

00:02:53,640 --> 00:02:58,019
and we use support Linux and Mac OS so

00:02:56,670 --> 00:03:01,709
we need to make sure that all Devon's

00:02:58,019 --> 00:03:03,659
tools are actually portable Orkin sorry

00:03:01,709 --> 00:03:05,640
we have different versions on linux

00:03:03,659 --> 00:03:07,379
medicine and they work the same use the

00:03:05,640 --> 00:03:10,290
same we used the same Devon for the same

00:03:07,379 --> 00:03:12,329
set of tools on workstations and on CI

00:03:10,290 --> 00:03:15,150
so when you something works in your

00:03:12,329 --> 00:03:17,099
machine it will work on CI and we don't

00:03:15,150 --> 00:03:21,540
many people go in in the direction of

00:03:17,099 --> 00:03:24,540
containers we solved with Nick's okay so

00:03:21,540 --> 00:03:27,030
and I wanted to I said that I wanted to

00:03:24,540 --> 00:03:29,340
make this as clean as invisible as as

00:03:27,030 --> 00:03:31,799
possible from users so for example if

00:03:29,340 --> 00:03:33,720
somebody wants to add a new tool is

00:03:31,799 --> 00:03:36,840
actually it's extremely trivial they

00:03:33,720 --> 00:03:40,500
need to create a stupid wrapper a

00:03:36,840 --> 00:03:43,379
symlink in directory and add one line to

00:03:40,500 --> 00:03:45,449
expose this tool into the Devon and

00:03:43,379 --> 00:03:46,919
that's it that's it that's all the user

00:03:45,449 --> 00:03:49,049
needs to do and it's completely

00:03:46,919 --> 00:03:50,790
transparent for them the problem is how

00:03:49,049 --> 00:03:53,190
do they find the appropriate attributes

00:03:50,790 --> 00:03:55,290
path but that's why we have a selection

00:03:53,190 --> 00:03:57,449
where we help them with that if need be

00:03:55,290 --> 00:04:00,230
but many many non mixers have

00:03:57,449 --> 00:04:03,989
contributed significantly in terms of

00:04:00,230 --> 00:04:05,699
set of packages which expose so and this

00:04:03,989 --> 00:04:06,930
thing is used by like ninety five

00:04:05,699 --> 00:04:09,090
percent of the company

00:04:06,930 --> 00:04:12,060
people are pretty happy with it except

00:04:09,090 --> 00:04:13,459
for every single Mac OS upgrade it's a

00:04:12,060 --> 00:04:15,799
disaster

00:04:13,459 --> 00:04:20,180
so I've been working this most of this

00:04:15,799 --> 00:04:21,350
conference yeah and I'm I mean we're

00:04:20,180 --> 00:04:24,380
happy with NYX we will definitely be

00:04:21,350 --> 00:04:27,050
using it I'm hiring we use NYX Haskell

00:04:24,380 --> 00:04:29,449
we'd use back and basil so if you want

00:04:27,050 --> 00:04:32,120
to work on these topics in London New

00:04:29,449 --> 00:04:33,810
York Zurich or butter-poached talk to me

00:04:32,120 --> 00:04:40,259
thank you

00:04:33,810 --> 00:04:40,259

YouTube URL: https://www.youtube.com/watch?v=8BzxUTeP0ik


