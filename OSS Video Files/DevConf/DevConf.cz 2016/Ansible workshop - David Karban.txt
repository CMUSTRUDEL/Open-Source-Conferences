Title: Ansible workshop - David Karban
Publication date: 2016-02-11
Playlist: DevConf.cz 2016
Description: 
	Ansible is very powerfull automatization software, but easy to learn at the same time. 

I will show you how to start automating all the thinks and have some fun of it at the same time :).

www.ansible.com
Captions: 
	00:00:14,750 --> 00:00:22,380
ok

00:00:17,670 --> 00:00:22,380
you know Michelle the kitchen

00:01:04,379 --> 00:01:08,400
he just feel sensations

00:01:13,720 --> 00:01:20,380
the lucky me huh yu hakusho because cut

00:01:18,229 --> 00:01:20,380
off

00:01:34,500 --> 00:01:37,500
No

00:01:50,320 --> 00:01:56,479
okay welcome everybody on the talcum

00:01:53,840 --> 00:01:59,780
powder uncibal first of all I would like

00:01:56,479 --> 00:02:02,479
to ask you to be quiet because we don't

00:01:59,780 --> 00:02:05,090
have additional audio system in this

00:02:02,479 --> 00:02:10,369
room so if you want to leave the room

00:02:05,090 --> 00:02:14,440
please be be quiet and try to not cut

00:02:10,369 --> 00:02:17,630
the door I would like to ask you to

00:02:14,440 --> 00:02:21,050
recast feedback about it talk about it

00:02:17,630 --> 00:02:24,560
talk you can see the Twitter and

00:02:21,050 --> 00:02:28,910
channels and everything on the back side

00:02:24,560 --> 00:02:34,310
of the leaf large and I think that

00:02:28,910 --> 00:02:37,130
that's that's probably from the

00:02:34,310 --> 00:02:50,090
organization and there will be a short

00:02:37,130 --> 00:02:51,890
break at the 13 50 or 40 ok and so in

00:02:50,090 --> 00:02:55,459
the first part so we will have the

00:02:51,890 --> 00:03:00,220
presentation in the second part there

00:02:55,459 --> 00:03:00,220
will probably be demo of unstable usage

00:03:08,470 --> 00:03:16,400
and I think we will start in about 10

00:03:11,989 --> 00:03:20,060
minutes because my hdmi reduction to vga

00:03:16,400 --> 00:03:25,010
is apparently not working well I will

00:03:20,060 --> 00:03:27,609
need a computer ok so we will we will

00:03:25,010 --> 00:03:30,950
solve somehow the computer issues and

00:03:27,609 --> 00:03:33,129
sorry for that we will start in 10

00:03:30,950 --> 00:03:33,129
minutes

00:03:45,080 --> 00:03:52,340
come on possesses back total submission

00:03:49,340 --> 00:03:52,340
yeah

00:03:55,170 --> 00:03:57,200
Oh

00:04:05,459 --> 00:04:08,459
mr.

00:04:11,220 --> 00:04:15,800
dr. dominant of the gospel idealistic

00:04:16,640 --> 00:04:23,490
excessively with Jabbar guitar notes

00:04:19,200 --> 00:04:26,750
done taking he would have to turn up to

00:04:23,490 --> 00:04:26,750
another 20

00:04:39,110 --> 00:04:43,540
is there anyone who can use magic

00:04:41,420 --> 00:04:46,640
because i'm not sure what happened now

00:04:43,540 --> 00:04:49,810
it's suddenly works so let's hope in

00:04:46,640 --> 00:04:49,810
your state that right

00:06:33,420 --> 00:06:35,480
you

00:06:36,939 --> 00:06:43,279
okay oh it looks it works so let me try

00:06:41,149 --> 00:06:47,019
to introduce you the vid carbon he is

00:06:43,279 --> 00:06:50,539
freelancer and he uses unstable for

00:06:47,019 --> 00:06:53,509
automation of obvious job tasks for at

00:06:50,539 --> 00:06:56,149
least two years so he will tell you how

00:06:53,509 --> 00:06:59,089
to use unstable to automate the tasks in

00:06:56,149 --> 00:07:03,049
New York and infrastructure and how to

00:06:59,089 --> 00:07:10,369
use it to make your life easier okay

00:07:03,049 --> 00:07:12,289
thank you just think i will do some

00:07:10,369 --> 00:07:15,439
introduction tell you what is ansible

00:07:12,289 --> 00:07:17,599
this does and how it works but in the

00:07:15,439 --> 00:07:20,899
second part we will try something so i

00:07:17,599 --> 00:07:24,829
need to I need you to have it actually

00:07:20,899 --> 00:07:28,339
installed so I see not everyone has no

00:07:24,829 --> 00:07:31,219
poo well actually almost everyone has it

00:07:28,339 --> 00:07:34,659
good and if you don't have an table

00:07:31,219 --> 00:07:39,379
installed please go on the ansible

00:07:34,659 --> 00:07:43,779
installation page and install it and if

00:07:39,379 --> 00:07:47,479
you don't have a gate install it too I

00:07:43,779 --> 00:07:50,569
heard rumors that there's summat USB

00:07:47,479 --> 00:07:53,599
stakin that with virtual machine that

00:07:50,569 --> 00:07:55,939
you maybe have here and there should be

00:07:53,599 --> 00:07:57,769
answerable on that petrol machine to not

00:07:55,939 --> 00:07:59,629
sure if it really happened so if you

00:07:57,769 --> 00:08:03,489
don't have USB stick just install it

00:07:59,629 --> 00:08:03,489
from the web page

00:08:05,700 --> 00:08:12,390
well maybe I should asked first in here

00:08:09,310 --> 00:08:26,980
anyone who don't have uncibal installed

00:08:12,390 --> 00:08:29,610
ok ok ok so we have so we write our

00:08:26,980 --> 00:08:29,610
answer

00:09:11,279 --> 00:09:17,879
okay so while you will be installing it

00:09:14,339 --> 00:09:20,009
or looking if it's on the steak I will

00:09:17,879 --> 00:09:26,550
go through some basics some basic

00:09:20,009 --> 00:09:29,939
architecture and things like that the

00:09:26,550 --> 00:09:33,259
men think why I use antibodies I tried

00:09:29,939 --> 00:09:39,089
to puppet and read quite a lot about

00:09:33,259 --> 00:09:42,990
Chef knots like that time that I was

00:09:39,089 --> 00:09:45,720
like I have to go on the server and

00:09:42,990 --> 00:09:50,129
install the agent to start provisioning

00:09:45,720 --> 00:09:53,040
it and it looked like it's well it

00:09:50,129 --> 00:09:58,829
should not be necessary and then I found

00:09:53,040 --> 00:10:02,699
out antigo with very easy SSH style of

00:09:58,829 --> 00:10:05,999
working well actually it's agentless if

00:10:02,699 --> 00:10:09,209
you have access on the server through

00:10:05,999 --> 00:10:12,660
ssh or of the computer and mainly

00:10:09,209 --> 00:10:16,050
working like as links administrator so I

00:10:12,660 --> 00:10:24,660
working with service so if i say server

00:10:16,050 --> 00:10:26,970
its computer okay and it's a journalist

00:10:24,660 --> 00:10:30,149
if you have access to ssh you can

00:10:26,970 --> 00:10:32,430
provision it by ansible instantly

00:10:30,149 --> 00:10:36,629
without any configuration on the server

00:10:32,430 --> 00:10:39,329
side and it's a secure because it's

00:10:36,629 --> 00:10:42,689
using association tiff well if ssh will

00:10:39,329 --> 00:10:48,480
be an unsecured we are doomed so

00:10:42,689 --> 00:10:51,990
nevermind and it can do provisioning and

00:10:48,480 --> 00:10:55,889
deployment you can use the one tool to

00:10:51,990 --> 00:10:58,199
set up the machine configure any stake

00:10:55,889 --> 00:11:00,990
you need there and then do a rolling

00:10:58,199 --> 00:11:03,629
update for example you have several web

00:11:00,990 --> 00:11:07,559
servers you can do things like shutdown

00:11:03,629 --> 00:11:10,679
server update take it from roll bounce

00:11:07,559 --> 00:11:14,560
or updated put it back and do it for

00:11:10,679 --> 00:11:18,100
every server in

00:11:14,560 --> 00:11:22,150
static or something like that puppet and

00:11:18,100 --> 00:11:24,430
chef mainly can configure server but

00:11:22,150 --> 00:11:27,520
cannot do Rebecca brave it's possible

00:11:24,430 --> 00:11:31,360
they have some add-ons to be possible

00:11:27,520 --> 00:11:33,670
but it it seems like it's work it's

00:11:31,360 --> 00:11:37,029
another complication for me announce

00:11:33,670 --> 00:11:44,770
table it's quite easy and it it just

00:11:37,029 --> 00:11:47,920
works it's you know i'm i'm loading out

00:11:44,770 --> 00:11:50,680
can you hear me on the okay perfect so

00:11:47,920 --> 00:11:55,870
let's hope my voice bill will be able to

00:11:50,680 --> 00:11:58,480
i will be able to speak in our it's also

00:11:55,870 --> 00:12:00,339
easy to start you will see it in an hour

00:11:58,480 --> 00:12:02,560
you will be able to provision some

00:12:00,339 --> 00:12:04,480
things without the program don't try to

00:12:02,560 --> 00:12:06,970
do this the same with puppet you will

00:12:04,480 --> 00:12:11,820
have you will need at least two days to

00:12:06,970 --> 00:12:14,200
get to the similar stage and the

00:12:11,820 --> 00:12:16,600
important thing it's not programming

00:12:14,200 --> 00:12:19,089
language because i'm i'm a little

00:12:16,600 --> 00:12:22,980
administrator a new programmer actually

00:12:19,089 --> 00:12:27,220
I can convert something it's more like

00:12:22,980 --> 00:12:29,470
gluing together some parts of code for

00:12:27,220 --> 00:12:32,860
little scripts okay but I'm not

00:12:29,470 --> 00:12:37,230
programmer I don't like to do something

00:12:32,860 --> 00:12:39,760
bigger than 10 lines of any code and

00:12:37,230 --> 00:12:41,680
well maybe that's why I don't like

00:12:39,760 --> 00:12:42,850
puppet because it's technically

00:12:41,680 --> 00:12:48,009
programming language

00:12:42,850 --> 00:12:51,940
tu ultimo is more like you tell what you

00:12:48,009 --> 00:12:55,209
need you define the final state you want

00:12:51,940 --> 00:13:00,579
on the server and it will ensure it's

00:12:55,209 --> 00:13:03,100
there so you will say I want this a

00:13:00,579 --> 00:13:08,319
purge their with this configuration and

00:13:03,100 --> 00:13:11,230
it will happen and well it's it and put

00:13:08,319 --> 00:13:17,079
it but I don't know how to spell this

00:13:11,230 --> 00:13:20,110
word sorry it's but it means that if you

00:13:17,079 --> 00:13:23,019
run uncibal on your computer several

00:13:20,110 --> 00:13:28,000
times it will not change anything if

00:13:23,019 --> 00:13:31,750
there's nothing well maybe I would try

00:13:28,000 --> 00:13:34,029
to say it another way if you first start

00:13:31,750 --> 00:13:37,209
an super provisioning on the mail server

00:13:34,029 --> 00:13:39,399
it will set up a bunch of things but if

00:13:37,209 --> 00:13:41,079
you started again it will not do

00:13:39,399 --> 00:13:43,600
anything it will not change any file

00:13:41,079 --> 00:13:49,350
because the system is in desired state

00:13:43,600 --> 00:13:52,209
and if there if you change the

00:13:49,350 --> 00:13:55,829
perception you change for example you

00:13:52,209 --> 00:13:59,079
will new operation you upload new rpm or

00:13:55,829 --> 00:14:00,880
add another repository then it will

00:13:59,079 --> 00:14:03,069
change all the parts that is that our

00:14:00,880 --> 00:14:06,480
change in the prescription it will note

00:14:03,069 --> 00:14:09,480
the church anything more what's that

00:14:06,480 --> 00:14:09,480
understandable

00:14:16,970 --> 00:14:21,180
Oh

00:14:18,540 --> 00:14:23,910
for me personally the ugg antlers here's

00:14:21,180 --> 00:14:25,890
the killer feature I just can't

00:14:23,910 --> 00:14:29,160
provision every component because it

00:14:25,890 --> 00:14:31,620
it's a part of my job I'm fair answer I

00:14:29,160 --> 00:14:34,440
have a bunch of clear clients and the

00:14:31,620 --> 00:14:38,880
every client has its own summers I

00:14:34,440 --> 00:14:43,440
cannot use can install puppet agent on

00:14:38,880 --> 00:14:45,900
every server and even if I could I would

00:14:43,440 --> 00:14:50,880
have to install puppet server for every

00:14:45,900 --> 00:14:53,100
customer which is just nonsense we want

00:14:50,880 --> 00:14:56,280
ssible I just have super dietary for

00:14:53,100 --> 00:14:58,530
support clients and I have the ssh

00:14:56,280 --> 00:15:07,500
access and I can work on it without a

00:14:58,530 --> 00:15:11,880
problem now the second question I forgot

00:15:07,500 --> 00:15:17,150
to ask at the beginning dunno ansible is

00:15:11,880 --> 00:15:22,460
here anyone who work with uncivil well

00:15:17,150 --> 00:15:26,940
good i'm not sure i will tell us

00:15:22,460 --> 00:15:29,160
something new for it here but you may

00:15:26,940 --> 00:15:32,220
ask you may be with that if that will be

00:15:29,160 --> 00:15:35,940
for interesting in second part but i

00:15:32,220 --> 00:15:41,370
will go through the mostly basics for

00:15:35,940 --> 00:15:43,770
now so if you want to manage many

00:15:41,370 --> 00:15:46,710
computers advanced you need some

00:15:43,770 --> 00:15:52,950
inventory you need some to take

00:15:46,710 --> 00:15:55,830
informations about this so eight answer

00:15:52,950 --> 00:15:58,380
go has two types of inventory the first

00:15:55,830 --> 00:16:01,740
one is static do you have already

00:15:58,380 --> 00:16:05,190
installed it you should have 10 an hour

00:16:01,740 --> 00:16:08,540
so let's look in your unsecured hosts

00:16:05,190 --> 00:16:08,540
file try to

00:16:10,950 --> 00:16:15,140
help doesn't a shin

00:16:19,110 --> 00:16:21,589
here

00:16:32,660 --> 00:16:36,579
oh it's small I guess

00:16:55,250 --> 00:17:15,740
yeah thanks so is it let's try it oh but

00:17:09,949 --> 00:17:17,569
now okay okay and this is a static

00:17:15,740 --> 00:17:20,600
inventory it's quite simple you just

00:17:17,569 --> 00:17:22,640
define a group and the service in the

00:17:20,600 --> 00:17:24,920
group you don't have even defined group

00:17:22,640 --> 00:17:28,280
you'll see that's just the hostname or

00:17:24,920 --> 00:17:33,470
IP addresses or you can define the group

00:17:28,280 --> 00:17:37,540
and put some servers there the groups

00:17:33,470 --> 00:17:40,010
are used mainly for some logical

00:17:37,540 --> 00:17:43,580
isolation of service you can have web

00:17:40,010 --> 00:17:46,010
servers database servers or servers in

00:17:43,580 --> 00:17:49,790
one data center or service on a

00:17:46,010 --> 00:17:52,850
different one you can run ansible on

00:17:49,790 --> 00:17:55,970
group of service or combination of

00:17:52,850 --> 00:18:03,400
groups without quite a problem you can

00:17:55,970 --> 00:18:13,580
use some wild card type of writing like

00:18:03,400 --> 00:18:16,010
intervals doctor and actually it's

00:18:13,580 --> 00:18:18,140
simple you have a file where your

00:18:16,010 --> 00:18:21,320
infrastructure is described that's the

00:18:18,140 --> 00:18:23,720
static inventory uncivil has possibility

00:18:21,320 --> 00:18:26,090
to use the dynamic and rich inventory

00:18:23,720 --> 00:18:29,270
which is technically the script that

00:18:26,090 --> 00:18:31,970
taps into your database or on amazon or

00:18:29,270 --> 00:18:35,420
rec space or any other cloud provider

00:18:31,970 --> 00:18:38,810
and budget information about your hosts

00:18:35,420 --> 00:18:42,230
so if you don't want to enter every

00:18:38,810 --> 00:18:45,800
server into host files you can write or

00:18:42,230 --> 00:18:48,710
reduce dynamic in virtual script and you

00:18:45,800 --> 00:18:50,690
can do the things like your provision

00:18:48,710 --> 00:18:52,220
new holes don't amazon and it's

00:18:50,690 --> 00:18:54,370
instantly there and you can work with

00:18:52,220 --> 00:18:54,370
that

00:18:55,230 --> 00:19:03,809
but for now you know what inventory is

00:18:57,980 --> 00:19:10,130
now the module module is something that

00:19:03,809 --> 00:19:13,890
just chillin does want to ask it's like

00:19:10,130 --> 00:19:16,549
for example popular file use a template

00:19:13,890 --> 00:19:23,460
or set up user on the remote server

00:19:16,549 --> 00:19:26,250
create new Amazon instance or modify

00:19:23,460 --> 00:19:29,760
host files every action and that you

00:19:26,250 --> 00:19:33,299
want to do remotely is done by module

00:19:29,760 --> 00:19:36,750
they are even too not so good modules

00:19:33,299 --> 00:19:38,790
that command and shell which just run

00:19:36,750 --> 00:19:43,559
show comments if you really really need

00:19:38,790 --> 00:19:48,290
it you can do you can run a rhetorical

00:19:43,559 --> 00:19:51,450
answer with ansible it's usually if you

00:19:48,290 --> 00:19:55,049
don't have a module specifically for

00:19:51,450 --> 00:19:57,450
your use for every or need it's somehow

00:19:55,049 --> 00:20:01,429
better to write one then use shell

00:19:57,450 --> 00:20:05,850
because so with module it's easier to be

00:20:01,429 --> 00:20:08,070
that word I don't put them well I

00:20:05,850 --> 00:20:12,650
will just spell it randomly every time I

00:20:08,070 --> 00:20:12,650
will tell you later you know what I mean

00:20:12,710 --> 00:20:18,919
there are hundreds of modules if you

00:20:15,900 --> 00:20:23,540
know if you want you can go on the

00:20:18,919 --> 00:20:27,650
documentation and 12 I can show you I

00:20:23,540 --> 00:20:27,650
have it here should

00:20:31,110 --> 00:20:37,630
it's just huge see that's all the other

00:20:35,200 --> 00:20:41,610
thing modular installation of software

00:20:37,630 --> 00:20:46,870
on servers some big-ip whatever today's

00:20:41,610 --> 00:20:50,200
Buntline for a bit blue beeping / things

00:20:46,870 --> 00:20:54,610
like setting up her own or copy files Oh

00:20:50,200 --> 00:20:58,450
what is it looks that oh I don't know it

00:20:54,610 --> 00:21:00,580
exists for a modest four digit ocean

00:20:58,450 --> 00:21:04,510
what a bunch of modules for Amazon it's

00:21:00,580 --> 00:21:10,780
like well you need something on amazon

00:21:04,510 --> 00:21:13,150
not a problem and well you will likely

00:21:10,780 --> 00:21:18,789
find the module for the work you need

00:21:13,150 --> 00:21:23,250
then don't see a avian for ZFS for

00:21:18,789 --> 00:21:26,909
OpenStack diet can't just go down and

00:21:23,250 --> 00:21:26,909
you have the idea

00:21:31,170 --> 00:21:37,460
so we have the amatory we know about our

00:21:34,320 --> 00:21:41,720
server still doing can do something that

00:21:37,460 --> 00:21:45,720
one more thing we need it's variables

00:21:41,720 --> 00:21:49,920
usually you need to have some particular

00:21:45,720 --> 00:21:54,840
good obstruction you need some variable

00:21:49,920 --> 00:21:57,570
like anything you need to describe there

00:21:54,840 --> 00:22:00,090
are several groups of variables in a

00:21:57,570 --> 00:22:04,980
duel better several places when you can

00:22:00,090 --> 00:22:07,230
setup them it's on solar levels as we

00:22:04,980 --> 00:22:09,720
have seen in inverter file there can be

00:22:07,230 --> 00:22:12,630
definition of groups and you have so

00:22:09,720 --> 00:22:14,850
named group VARs then there you can

00:22:12,630 --> 00:22:18,720
define the variables for the web server

00:22:14,850 --> 00:22:22,530
like the port where approach is waiting

00:22:18,720 --> 00:22:25,770
for noticing for or you can have defined

00:22:22,530 --> 00:22:29,340
variable for the server exact one server

00:22:25,770 --> 00:22:31,410
you need and you can defined in

00:22:29,340 --> 00:22:36,050
inventory to it was probably somewhere

00:22:31,410 --> 00:22:41,730
in that department or even a look at

00:22:36,050 --> 00:22:45,330
their special now another type of

00:22:41,730 --> 00:22:49,110
variables that facts that are taken from

00:22:45,330 --> 00:22:51,240
the remote server if you you can now if

00:22:49,110 --> 00:22:56,280
you have ansible installed you can now

00:22:51,240 --> 00:22:59,880
try this line and this will run the

00:22:56,280 --> 00:23:02,570
setup module that fetches all the top of

00:22:59,880 --> 00:23:02,570
your computer

00:23:15,010 --> 00:23:30,370
and yes and you can see ansible is

00:23:27,040 --> 00:23:32,590
talking to you with Jason LA and there's

00:23:30,370 --> 00:23:36,940
quite a pontiff I hope there's no

00:23:32,590 --> 00:23:42,430
password I think no password that rite

00:23:36,940 --> 00:23:48,250
of spring down Aldo now Oh ipv6

00:23:42,430 --> 00:23:51,820
addresses so oh so you can see there's

00:23:48,250 --> 00:23:56,890
quite a bunch of information and about

00:23:51,820 --> 00:24:02,140
my IP address don't touch me now device

00:23:56,890 --> 00:24:06,910
slow so r dr sue well i think you may

00:24:02,140 --> 00:24:11,680
meet yes I'm running on tibia may be

00:24:06,910 --> 00:24:18,210
interesting and just so you'll see that

00:24:11,680 --> 00:24:21,310
i have stable distribution oh oh whoa

00:24:18,210 --> 00:24:24,130
that was no nice supplemental form

00:24:21,310 --> 00:24:28,930
control variable i will have to change

00:24:24,130 --> 00:24:34,380
some keys like this and you can see

00:24:28,930 --> 00:24:39,960
there's really many many types of

00:24:34,380 --> 00:24:43,150
processor disk disk sizes this usage and

00:24:39,960 --> 00:24:48,010
the host name of computer Ethernet

00:24:43,150 --> 00:24:52,350
devices and lost everything you can know

00:24:48,010 --> 00:24:52,350
you won't know about the computer and

00:24:52,770 --> 00:25:01,220
host on kvm now

00:24:57,630 --> 00:25:04,830
okay and it's not a one hundred percent

00:25:01,220 --> 00:25:08,850
precise because yeah host not cast okay

00:25:04,830 --> 00:25:11,760
it's okay the game is there actually so

00:25:08,850 --> 00:25:15,390
I can with the setup module I can get

00:25:11,760 --> 00:25:17,910
the bunch of information about the

00:25:15,390 --> 00:25:21,240
computer I'm on I'm provisioning the

00:25:17,910 --> 00:25:23,850
thing is even if you have puppet or chef

00:25:21,240 --> 00:25:27,420
installed ansible will detect their

00:25:23,850 --> 00:25:30,620
factor and add their facts to uncibal

00:25:27,420 --> 00:25:35,210
fact so you if you want it even longer

00:25:30,620 --> 00:25:35,210
just install a puppet and you will see

00:25:42,580 --> 00:25:46,330
so now we are

00:25:57,639 --> 00:26:05,859
now we've been speaking about modules

00:26:02,919 --> 00:26:08,769
and inventory and variables now task

00:26:05,859 --> 00:26:11,169
task is the one little part that will

00:26:08,769 --> 00:26:15,820
use module and do the thing you need for

00:26:11,169 --> 00:26:17,259
MIT play is set of tasks so it's like if

00:26:15,820 --> 00:26:19,869
you need provision of watch you need

00:26:17,259 --> 00:26:24,039
more than only one time or installed you

00:26:19,869 --> 00:26:26,019
need to upload a configuration three

00:26:24,039 --> 00:26:29,529
started and things like that and a

00:26:26,019 --> 00:26:32,099
playbook is a set of place you can

00:26:29,529 --> 00:26:34,869
provision in one run you can provision

00:26:32,099 --> 00:26:37,029
peppers and my secure servers without a

00:26:34,869 --> 00:26:40,029
problem just one play will be web

00:26:37,029 --> 00:26:42,789
servers second play will be my secure

00:26:40,029 --> 00:26:46,539
servers and the third one will be load

00:26:42,789 --> 00:26:50,200
balancer why not we have one additional

00:26:46,539 --> 00:26:52,989
thing it's a role role is something like

00:26:50,200 --> 00:26:57,489
function function in or maybe maybe

00:26:52,989 --> 00:27:00,239
object and C++ I hope its object

00:26:57,489 --> 00:27:03,579
oriented programming is still think and

00:27:00,239 --> 00:27:10,659
I learned about it from school ten years

00:27:03,579 --> 00:27:14,289
ago maybe I don't know if so it's a way

00:27:10,659 --> 00:27:18,820
how to abstract the for example approach

00:27:14,289 --> 00:27:21,029
installation completely into well into

00:27:18,820 --> 00:27:21,029
row

00:27:26,100 --> 00:27:30,820
where r showed the difference with me

00:27:28,810 --> 00:27:38,980
between playbook and roll in the second

00:27:30,820 --> 00:27:41,950
part now another thing to set we try to

00:27:38,980 --> 00:27:44,200
uncibal command this is for other

00:27:41,950 --> 00:27:46,830
commands if you need for example shut

00:27:44,200 --> 00:27:50,440
down every web server you have in your

00:27:46,830 --> 00:27:55,480
every web server just ansible mins and

00:27:50,440 --> 00:27:58,720
command and service a botch stop or go

00:27:55,480 --> 00:28:02,170
but don't blame me don't blame me if

00:27:58,720 --> 00:28:04,930
somebody will complain about and the

00:28:02,170 --> 00:28:08,140
same thing you can you can use any

00:28:04,930 --> 00:28:10,030
module available with one shot and send

00:28:08,140 --> 00:28:15,520
it on any group or any several you need

00:28:10,030 --> 00:28:20,290
so one time upload a file installation

00:28:15,520 --> 00:28:23,890
of any package or for example I used it

00:28:20,290 --> 00:28:26,590
for removal of the not so well

00:28:23,890 --> 00:28:29,080
provisioned the hosts file that shutdown

00:28:26,590 --> 00:28:33,960
my Apache servers on several computers

00:28:29,080 --> 00:28:37,810
so I just quickly write down the uncivil

00:28:33,960 --> 00:28:41,620
command and remove the most file it was

00:28:37,810 --> 00:28:46,110
done at you a playbook takes the plane

00:28:41,620 --> 00:28:49,750
the playbook which is the gamma file and

00:28:46,110 --> 00:28:53,260
go through it playbook typically has set

00:28:49,750 --> 00:28:56,350
of tasks and do something you will see

00:28:53,260 --> 00:29:00,940
it in the second part now there exists a

00:28:56,350 --> 00:29:06,390
hug for civil roars its ansible galaxy

00:29:00,940 --> 00:29:10,090
and there's quite a lot of roles from

00:29:06,390 --> 00:29:17,020
whoever will upload them that's it's a

00:29:10,090 --> 00:29:19,720
great place for wow it's like you can

00:29:17,020 --> 00:29:22,360
download a row if you need something

00:29:19,720 --> 00:29:24,820
like web server my secure sir any load

00:29:22,360 --> 00:29:27,130
balancer or something well almost

00:29:24,820 --> 00:29:29,740
everything you can look at the galaxy

00:29:27,130 --> 00:29:32,860
and it will be there I would not say

00:29:29,740 --> 00:29:35,440
take it and use it I would say look at

00:29:32,860 --> 00:29:38,080
it maybe modify it to

00:29:35,440 --> 00:29:43,919
it into your environment and use it but

00:29:38,080 --> 00:29:48,149
it's a perfect place to look and it's a

00:29:43,919 --> 00:29:52,509
danceable galaxy is the command line

00:29:48,149 --> 00:29:55,210
program that fetches the roles from

00:29:52,509 --> 00:29:57,389
God's will sure well use it an ansible

00:29:55,210 --> 00:29:59,769
vault if you need some credentials

00:29:57,389 --> 00:30:05,379
hidden in your configuration files

00:29:59,769 --> 00:30:15,190
danceable Walt can encrypt it and we can

00:30:05,379 --> 00:30:17,620
try to cover it to later so when I've

00:30:15,190 --> 00:30:21,070
been thinking what can we actually do

00:30:17,620 --> 00:30:24,220
try to learn it I thought about some

00:30:21,070 --> 00:30:26,889
load balance hi available and slag with

00:30:24,220 --> 00:30:30,879
replicated my secure and it would be

00:30:26,889 --> 00:30:32,919
four hours maybe more it was tempting i

00:30:30,879 --> 00:30:35,169
thought maybe i will be able to stand

00:30:32,919 --> 00:30:37,059
here for 50 minutes before they will

00:30:35,169 --> 00:30:39,970
take me to write that that's the thing i

00:30:37,059 --> 00:30:42,879
got an email that i will have only 40

00:30:39,970 --> 00:30:45,309
minutes so I thought okay maybe 50

00:30:42,879 --> 00:30:47,649
minutes I was pretty sure that after

00:30:45,309 --> 00:30:51,759
hour they will take two gorillas will go

00:30:47,649 --> 00:30:53,080
here and take me out so I thought we

00:30:51,759 --> 00:30:58,480
will have to start with something

00:30:53,080 --> 00:31:03,240
slightly more easy which we will be able

00:30:58,480 --> 00:31:06,429
and do in half an hour so well

00:31:03,240 --> 00:31:10,289
unfortunately really in an hour and half

00:31:06,429 --> 00:31:15,190
it would be better than never mind so

00:31:10,289 --> 00:31:18,850
now we will try to use ansible to

00:31:15,190 --> 00:31:20,830
install ntp server it's well it should

00:31:18,850 --> 00:31:25,240
be easy an NTP server is quite easy to

00:31:20,830 --> 00:31:27,009
install and configure and we will show I

00:31:25,240 --> 00:31:30,399
will show you how to do it through

00:31:27,009 --> 00:31:32,620
playbook and how to create a role that

00:31:30,399 --> 00:31:35,970
will have everything and we will see the

00:31:32,620 --> 00:31:35,970
differences with between it

00:31:37,180 --> 00:31:48,010
so the first and i have prepared because

00:31:43,150 --> 00:31:49,660
i don't like to write if i'm on some

00:31:48,010 --> 00:31:52,810
workshop i don't like to write the code

00:31:49,660 --> 00:31:56,520
just to write it so you may now download

00:31:52,810 --> 00:31:56,520
the repository it's

00:32:49,880 --> 00:32:53,660
so okay

00:32:55,980 --> 00:33:07,440
much much will be oh sherry through if

00:33:03,340 --> 00:33:11,520
you will go here i can upload it the eye

00:33:07,440 --> 00:33:11,520
on us be without a problem

00:33:29,240 --> 00:33:40,090
I believe everyone has told it so

00:34:46,109 --> 00:34:54,720
so this is the playbook and at the same

00:34:51,839 --> 00:34:58,499
time it's applied play always starts

00:34:54,720 --> 00:35:00,059
with the hosts bag up here I say tell

00:34:58,499 --> 00:35:03,239
too uncivil that I progression only

00:35:00,059 --> 00:35:05,279
low-cost the single there should be a

00:35:03,239 --> 00:35:07,680
web server as so we have seen in host

00:35:05,279 --> 00:35:11,160
files the web server group can be web

00:35:07,680 --> 00:35:18,180
server can be even all which means every

00:35:11,160 --> 00:35:22,999
computer in the inventory and there's

00:35:18,180 --> 00:35:28,230
some play white settings become means

00:35:22,999 --> 00:35:32,339
use sudo to switch to a root user what

00:35:28,230 --> 00:35:36,450
it actually can use the so it can maybe

00:35:32,339 --> 00:35:39,180
use the windows run s if you configure

00:35:36,450 --> 00:35:46,579
it it's configurable in a config file

00:35:39,180 --> 00:35:50,249
but by default it use the pseudo and and

00:35:46,579 --> 00:35:55,589
the root user you can override it if

00:35:50,249 --> 00:36:00,630
need it like right it there you can see

00:35:55,589 --> 00:36:03,599
it's the young in uncivil writer reach

00:36:00,630 --> 00:36:07,079
the other five so what it takes should I

00:36:03,599 --> 00:36:09,210
can I think it can read in JSON file as

00:36:07,079 --> 00:36:13,190
input what I have never seen the

00:36:09,210 --> 00:36:13,190
playbook inches Jason style

00:36:22,750 --> 00:36:27,760
you can see I have defined some

00:36:24,970 --> 00:36:32,470
valuables here it's ntp state and

00:36:27,760 --> 00:36:36,180
servers and ntp state it's it's

00:36:32,470 --> 00:36:40,750
variables i am using further down i will

00:36:36,180 --> 00:36:44,800
show you now here there are the tasks

00:36:40,750 --> 00:36:47,200
that are doing the actual words there's

00:36:44,800 --> 00:36:52,270
the row section unique using its

00:36:47,200 --> 00:36:58,260
variables for tasks and drone devs and

00:36:52,270 --> 00:37:03,220
handlers which I'll explain the forger

00:36:58,260 --> 00:37:06,820
now I was thinking my work is to

00:37:03,220 --> 00:37:09,310
provision ntp server so i try to use it

00:37:06,820 --> 00:37:12,220
to do it on as many and she lectures

00:37:09,310 --> 00:37:17,980
possible for this demo its own a redhead

00:37:12,220 --> 00:37:19,960
and debian type of computers which is

00:37:17,980 --> 00:37:27,100
majority of what is running on linux

00:37:19,960 --> 00:37:31,350
wart i believe so i will go through

00:37:27,100 --> 00:37:34,450
every task and say what it's doing i

00:37:31,350 --> 00:37:38,020
have some variable definitions here but

00:37:34,450 --> 00:37:41,800
i need some very variables dependent on

00:37:38,020 --> 00:37:45,580
type of server because NTV can be ntp on

00:37:41,800 --> 00:37:48,660
one architecture can be ntpd on an

00:37:45,580 --> 00:37:52,390
ativan so i have to choose somehow and

00:37:48,660 --> 00:37:54,850
i'm using this litter tray I tell aunt

00:37:52,390 --> 00:38:00,150
able to include the variables in a

00:37:54,850 --> 00:38:06,450
vibrance directory and i'm using the

00:38:00,150 --> 00:38:06,450
factor f we will go back to fast

00:38:12,900 --> 00:38:19,690
then you can see that one of it is

00:38:16,480 --> 00:38:23,410
ansible operation system family which is

00:38:19,690 --> 00:38:26,290
debian on debian ubuntu and the Red Hat

00:38:23,410 --> 00:38:34,270
on centos and difficult and red hat of

00:38:26,290 --> 00:38:36,370
course and gene to launch into so I'm

00:38:34,270 --> 00:38:38,980
here using a little trick to get that

00:38:36,370 --> 00:38:44,020
variables for the specific use case

00:38:38,980 --> 00:38:45,790
because the name of service can change

00:38:44,020 --> 00:38:47,980
configuration directories can be

00:38:45,790 --> 00:38:51,520
different especially debian tends to

00:38:47,980 --> 00:38:55,060
have for my secures a TCM I secure my

00:38:51,520 --> 00:38:58,440
secure my cone for redhead it's like a

00:38:55,060 --> 00:39:01,000
TC my conf and so on so every service

00:38:58,440 --> 00:39:02,860
same service with several architectures

00:39:01,000 --> 00:39:05,350
can have different paths names of

00:39:02,860 --> 00:39:10,680
configuration and this all things I read

00:39:05,350 --> 00:39:10,680
from files redhead piano or debian here

00:39:13,410 --> 00:39:20,350
previously it's not true anymore but you

00:39:17,530 --> 00:39:25,210
will see it probably quite in many

00:39:20,350 --> 00:39:28,690
examples there has been the specific

00:39:25,210 --> 00:39:32,580
package modules for different for Yom

00:39:28,690 --> 00:39:38,560
for apt that's why it's twice that both

00:39:32,580 --> 00:39:41,260
tasks in style the NTP the now uncibal

00:39:38,560 --> 00:39:45,220
can work with package has a package

00:39:41,260 --> 00:39:47,110
module that chose the package uni

00:39:45,220 --> 00:39:50,080
package manager you need on the

00:39:47,110 --> 00:39:54,430
architecture you are so it's a new thing

00:39:50,080 --> 00:39:59,970
in ansible 20 and so it will be easier

00:39:54,430 --> 00:40:03,730
to write things like that but

00:39:59,970 --> 00:40:07,860
it's also good to think no good place to

00:40:03,730 --> 00:40:11,050
show you the variable two loops and

00:40:07,860 --> 00:40:14,050
conditionals you can see the name is

00:40:11,050 --> 00:40:18,160
just name it is what it's shown when you

00:40:14,050 --> 00:40:22,300
run it you get ducks every task can have

00:40:18,160 --> 00:40:24,580
one or more tax oh okay five minutes I

00:40:22,300 --> 00:40:30,880
missed 10 minutes can you show it 10

00:40:24,580 --> 00:40:35,500
mins again ok ok you can talk every

00:40:30,880 --> 00:40:40,600
tasks by many tags it's and you can then

00:40:35,500 --> 00:40:42,580
play only the target tasks so you don't

00:40:40,600 --> 00:40:45,750
have to run provisioning of everything

00:40:42,580 --> 00:40:50,110
you can narrow it down and DP or

00:40:45,750 --> 00:40:52,840
configuration of something like you not

00:40:50,110 --> 00:40:55,090
a problem at all yum it's the name of

00:40:52,840 --> 00:40:56,980
the module and its parameters you can

00:40:55,090 --> 00:40:59,230
see it's not the young if you are

00:40:56,980 --> 00:41:04,680
familiar with llamo it should be written

00:40:59,230 --> 00:41:04,680
more like this way

00:41:09,900 --> 00:41:18,569
it's another possible and it will work

00:41:12,579 --> 00:41:21,430
to uncibal peripherals to the shorter

00:41:18,569 --> 00:41:25,059
more compact way when you write it on

00:41:21,430 --> 00:41:30,549
one line I usually use it because I just

00:41:25,059 --> 00:41:33,819
don't like two big tasks but if there

00:41:30,549 --> 00:41:36,069
are is far too much parameters which is

00:41:33,819 --> 00:41:39,720
technically on cloud modules almost

00:41:36,069 --> 00:41:44,230
everyone i'm using this type of writing

00:41:39,720 --> 00:41:46,950
because it's so more you can see go

00:41:44,230 --> 00:41:50,530
through each other better I think and

00:41:46,950 --> 00:41:53,170
there are two things you see I'm using

00:41:50,530 --> 00:41:56,410
ntp state variable that is defined here

00:41:53,170 --> 00:41:58,839
which is present and this means actually

00:41:56,410 --> 00:42:01,420
install it if it's not there leave it be

00:41:58,839 --> 00:42:03,910
if it's there you can override it to

00:42:01,420 --> 00:42:08,650
absent we will show you now I will show

00:42:03,910 --> 00:42:11,920
you the for now this means this is

00:42:08,650 --> 00:42:15,250
present so installing TP and here you

00:42:11,920 --> 00:42:18,869
see item which is somehow magic variable

00:42:15,250 --> 00:42:23,200
because it's working with with items and

00:42:18,869 --> 00:42:26,920
until be packages in ntp packages they

00:42:23,200 --> 00:42:30,220
are defined there it's a array of files

00:42:26,920 --> 00:42:35,950
i want to install or programs and well

00:42:30,220 --> 00:42:39,700
it's ntp only because ntp is so simple

00:42:35,950 --> 00:42:43,329
but if you would install PHP for example

00:42:39,700 --> 00:42:47,680
it wouldn't follow PHP and PHP Jason and

00:42:43,329 --> 00:42:52,150
PHP p do and things like that and with

00:42:47,680 --> 00:42:56,020
items cycle through the array and add it

00:42:52,150 --> 00:42:58,079
here so this way you can do a loop you

00:42:56,020 --> 00:43:00,670
don't have to root ask install one

00:42:58,079 --> 00:43:03,220
program install second one third one you

00:43:00,670 --> 00:43:07,329
do it ray you put it in one place and

00:43:03,220 --> 00:43:11,289
install it at once this is the way how

00:43:07,329 --> 00:43:13,980
unstable is doing loop loops on the task

00:43:11,289 --> 00:43:13,980
level and

00:43:14,510 --> 00:43:21,230
which is like month old that it's

00:43:18,500 --> 00:43:24,320
possible to define blogs and I think you

00:43:21,230 --> 00:43:28,490
can do loop through the whole block but

00:43:24,320 --> 00:43:32,270
I haven't tried it yet this is sometimes

00:43:28,490 --> 00:43:36,170
this is bad because you can do loop in

00:43:32,270 --> 00:43:40,130
one task so if you need to actions it's

00:43:36,170 --> 00:43:43,280
really hard to do but it should be ok

00:43:40,130 --> 00:43:47,450
with blocks now now here is actually a

00:43:43,280 --> 00:43:50,780
yeah and when only if ansible family is

00:43:47,450 --> 00:43:55,310
red head which is because you is on

00:43:50,780 --> 00:43:59,450
reddit I will does anyone has Federer

00:43:55,310 --> 00:44:02,510
here with the new package manager yeah

00:43:59,450 --> 00:44:05,660
perfect I want to know if it will work

00:44:02,510 --> 00:44:08,600
actually I gotta i'm not sure if there

00:44:05,660 --> 00:44:14,870
we don't need something like Federer

00:44:08,600 --> 00:44:17,360
here Oh Lucy here it's basically the

00:44:14,870 --> 00:44:19,970
same thing for the bear just one thing

00:44:17,360 --> 00:44:25,510
more its environment I'm overriding the

00:44:19,970 --> 00:44:25,510
default environment yep yep

00:44:32,160 --> 00:44:41,500
yeah I think I mentioned it that their

00:44:36,400 --> 00:44:45,250
spec image module already but well I'm

00:44:41,500 --> 00:44:47,170
like thinking in old ways still it's

00:44:45,250 --> 00:44:51,940
like two years you are using it like

00:44:47,170 --> 00:44:56,410
this so there I redefine the local

00:44:51,940 --> 00:44:58,630
environment for brown and it's one thing

00:44:56,410 --> 00:45:02,079
i don't like one thing on debian really

00:44:58,630 --> 00:45:04,930
much if you install the server package

00:45:02,079 --> 00:45:10,900
it you started out automatically well

00:45:04,930 --> 00:45:14,319
sometimes so this little trick force

00:45:10,900 --> 00:45:16,809
eight do not start it because he debian

00:45:14,319 --> 00:45:18,910
thinks it's installed in relevancy one

00:45:16,809 --> 00:45:22,269
which is a known at for ground level and

00:45:18,910 --> 00:45:26,230
it will not start the package and i will

00:45:22,269 --> 00:45:29,619
start it later when I want I like it

00:45:26,230 --> 00:45:32,019
centers because well if you install

00:45:29,619 --> 00:45:38,500
package its instant let's that are

00:45:32,019 --> 00:45:41,650
different things now next thing I use

00:45:38,500 --> 00:45:44,230
the template model with ntp

00:45:41,650 --> 00:45:46,450
configuration you can see that again i

00:45:44,230 --> 00:45:50,799
have the different configuration for

00:45:46,450 --> 00:45:53,740
different architecture and i uploaded to

00:45:50,799 --> 00:45:58,119
whenever that architecture has its

00:45:53,740 --> 00:46:03,190
config folder drag to it and config my

00:45:58,119 --> 00:46:05,799
nap whichever it now its name is that i

00:46:03,190 --> 00:46:10,750
use the notify which is another thing

00:46:05,799 --> 00:46:13,349
that the farce only if this starts is

00:46:10,750 --> 00:46:13,349
changed

00:46:17,530 --> 00:46:25,030
Oh five more minutes maximum because

00:46:22,810 --> 00:46:30,250
it's the two hours tasks and after the

00:46:25,030 --> 00:46:33,310
tribe minutes we will have Greg actually

00:46:30,250 --> 00:46:36,700
if you run a task it can be failed if

00:46:33,310 --> 00:46:39,610
something goes bad it can be okay which

00:46:36,700 --> 00:46:41,950
means nothing changed it can be in

00:46:39,610 --> 00:46:45,610
changed site that something changed and

00:46:41,950 --> 00:46:48,690
if it's in change state the notify will

00:46:45,610 --> 00:46:51,760
run a handler which is defined here

00:46:48,690 --> 00:46:55,000
second part as you see this is not fast

00:46:51,760 --> 00:46:57,760
and verse but it's a normal task but

00:46:55,000 --> 00:47:00,190
it's fire off only if the configuration

00:46:57,760 --> 00:47:02,860
file has changed so we don't have to

00:47:00,190 --> 00:47:05,800
restart any service when it's well

00:47:02,860 --> 00:47:07,840
actually nothing happened or you can for

00:47:05,800 --> 00:47:11,920
example if you install the my secure

00:47:07,840 --> 00:47:14,830
service then you can notify and upload

00:47:11,920 --> 00:47:16,720
the test database for example and it

00:47:14,830 --> 00:47:18,940
will not be it will not happen again

00:47:16,720 --> 00:47:23,440
because you install it only once and

00:47:18,940 --> 00:47:27,490
it's installed next time and the last

00:47:23,440 --> 00:47:33,100
thing is start ntp server if it's

00:47:27,490 --> 00:47:35,440
instant and that's the one here moderate

00:47:33,100 --> 00:47:42,400
service name of service and what to do

00:47:35,440 --> 00:47:45,670
and devastate when we don't want to try

00:47:42,400 --> 00:47:48,250
to start it if we remove it in a

00:47:45,670 --> 00:47:51,910
previous step and this playbook can

00:47:48,250 --> 00:47:53,560
install or remove the ntp i will show

00:47:51,910 --> 00:47:57,900
you how we will try to start it but

00:47:53,560 --> 00:47:57,900
after the break

00:48:51,220 --> 00:48:53,220
Oh

00:49:04,140 --> 00:49:06,140
Oh

00:49:16,450 --> 00:49:18,450
Oh

00:49:51,690 --> 00:49:54,710
should I bother yourself

00:50:13,650 --> 00:50:15,680
Oh

00:50:16,859 --> 00:50:19,859
in

00:50:22,569 --> 00:50:25,569
particular

00:50:25,580 --> 00:50:27,580
Oh

00:50:54,050 --> 00:50:56,050
Oh

00:51:27,800 --> 00:51:30,670
so I'm just

00:52:29,090 --> 00:52:31,150
you

00:53:01,660 --> 00:53:03,750
Oh

00:54:13,640 --> 00:54:17,120
that one is

00:54:17,200 --> 00:54:19,230
Oh

00:57:33,220 --> 00:57:36,220
very

00:57:37,940 --> 00:57:39,940
Oh

01:00:21,440 --> 01:00:24,440
matricide

01:02:18,550 --> 01:02:36,990
yeah and it's a bigger change sit for

01:02:34,870 --> 01:02:36,990
what

01:02:40,090 --> 01:02:59,170
okay okay so we can continue and I

01:02:55,740 --> 01:03:01,870
learned during the break that if you

01:02:59,170 --> 01:03:06,250
have a new federal it will not work

01:03:01,870 --> 01:03:08,890
because the young module well Federer it

01:03:06,250 --> 01:03:14,080
don't have young anymore so there are

01:03:08,890 --> 01:03:18,210
several so shins and most easy for you

01:03:14,080 --> 01:03:22,150
if you have Phaedra is chen jian 48 tnf

01:03:18,210 --> 01:03:24,400
and i guess you can try to change it to

01:03:22,150 --> 01:03:27,460
package if you have unstable too and

01:03:24,400 --> 01:03:31,630
later it will work too but if you have

01:03:27,460 --> 01:03:34,090
the 192 version which is in default at

01:03:31,630 --> 01:03:38,760
all repository so it's possible you have

01:03:34,090 --> 01:03:38,760
it the dnf will be okay

01:03:45,390 --> 01:03:53,110
the other option would be at another

01:03:49,780 --> 01:03:56,890
task and use the ansible distribution

01:03:53,110 --> 01:04:00,160
fact that would show you it's a federal

01:03:56,890 --> 01:04:06,280
it's not right at but ansible always

01:04:00,160 --> 01:04:08,950
from West family is a redhead for a red

01:04:06,280 --> 01:04:24,760
hat for federer too so it would not work

01:04:08,950 --> 01:04:32,280
so easily so if you look in the dr dre

01:04:24,760 --> 01:04:38,140
there's the template and vars

01:04:32,280 --> 01:04:43,150
directories template is that like you

01:04:38,140 --> 01:04:44,920
know what I play this and here it is for

01:04:43,150 --> 01:04:48,100
to show you how you can implement

01:04:44,920 --> 01:04:50,580
several configures because sometimes

01:04:48,100 --> 01:04:55,270
really that configuration file can be

01:04:50,580 --> 01:04:59,380
merged to one on ntp for example it will

01:04:55,270 --> 01:05:03,300
be possible to have just ntp conf and go

01:04:59,380 --> 01:05:07,420
with it if you try to do with a patch to

01:05:03,300 --> 01:05:09,700
two and a patch to 24 it will be much

01:05:07,420 --> 01:05:14,350
harder it's still a part but it's very

01:05:09,700 --> 01:05:19,020
different and it's a better to have two

01:05:14,350 --> 01:05:22,480
templates for basic configuration and

01:05:19,020 --> 01:05:26,740
you can see how it's done here and we

01:05:22,480 --> 01:05:29,410
can look at the template to see some

01:05:26,740 --> 01:05:32,710
things that will happen there the first

01:05:29,410 --> 01:05:35,820
line here is ansible managed this is the

01:05:32,710 --> 01:05:38,970
magic variable that is defined in a

01:05:35,820 --> 01:05:42,040
configuration file it's something like

01:05:38,970 --> 01:05:44,800
this file is created by ansible

01:05:42,040 --> 01:05:47,950
at this time from this directory by this

01:05:44,800 --> 01:05:51,430
user you can define it whatever

01:05:47,950 --> 01:05:54,250
whichever way you want and it's a good

01:05:51,430 --> 01:05:57,310
place order for anyone if you see oh

01:05:54,250 --> 01:06:01,750
it's done by muncipal don't edit any by

01:05:57,310 --> 01:06:04,090
your hand because it will be lost sooner

01:06:01,750 --> 01:06:10,710
or later you can see that the variable

01:06:04,090 --> 01:06:15,730
starts with the double law firms as this

01:06:10,710 --> 01:06:21,400
this and the action if you know ginger

01:06:15,730 --> 01:06:23,740
is just ginger this the example for loop

01:06:21,400 --> 01:06:26,320
you can have the conditionals that

01:06:23,740 --> 01:06:28,350
there's filters you can find more on

01:06:26,320 --> 01:06:32,940
unstable documentation about ginger true

01:06:28,350 --> 01:06:35,650
you can use here we have NTP servers

01:06:32,940 --> 01:06:39,490
valuable defined which is array of sever

01:06:35,650 --> 01:06:43,330
the service that should be used and I

01:06:39,490 --> 01:06:49,320
just loop through it and generate four

01:06:43,330 --> 01:06:55,450
lines server variable and a burst the

01:06:49,320 --> 01:07:04,450
redhead and Debbie on our configurations

01:06:55,450 --> 01:07:11,850
are quite different even if I enforce if

01:07:04,450 --> 01:07:14,710
I try to show you differences then you

01:07:11,850 --> 01:07:19,120
can see they're actually quite different

01:07:14,710 --> 01:07:23,770
but the I think it's the more like if

01:07:19,120 --> 01:07:26,410
you have time and want that you really

01:07:23,770 --> 01:07:32,740
can do one and T because without a

01:07:26,410 --> 01:07:36,300
problem so another one like another

01:07:32,740 --> 01:07:36,300
directory is variables

01:07:41,839 --> 01:07:49,259
you see that the first task and the

01:07:47,369 --> 01:07:52,019
PlayBook is to load these variables and

01:07:49,259 --> 01:07:55,109
to see for Debbie on it will load the

01:07:52,019 --> 01:07:58,890
certain set of packages and config files

01:07:55,109 --> 01:08:01,769
and default servers thus for red hat and

01:07:58,890 --> 01:08:04,829
TP same in this but the name of service

01:08:01,769 --> 01:08:09,809
is different configuration is saying

01:08:04,829 --> 01:08:13,529
here and different servers and then used

01:08:09,809 --> 01:08:20,190
in the play in the tasks run so let's

01:08:13,529 --> 01:08:24,089
try to right now if you will use it as I

01:08:20,190 --> 01:08:27,449
will on localhost now you will need to

01:08:24,089 --> 01:08:30,719
provide a sudo password if you don't if

01:08:27,449 --> 01:08:34,049
you are not able to switch to route well

01:08:30,719 --> 01:08:48,900
I cannot imagine you are not so let's

01:08:34,049 --> 01:08:51,290
try it yeah I see sorry and yeah that

01:08:48,900 --> 01:08:51,290
will not work

01:09:01,440 --> 01:09:04,440
so

01:09:06,410 --> 01:09:09,190
is it better

01:09:14,069 --> 01:09:22,529
now we answer we play book is the

01:09:19,409 --> 01:09:26,069
command line that runs a play and it's a

01:09:22,529 --> 01:09:31,170
ntp da te amo is the file when the place

01:09:26,069 --> 01:09:33,000
so i try to run it and i will need to

01:09:31,170 --> 01:09:35,250
enter the sudo password because i cannot

01:09:33,000 --> 01:09:41,609
switch to sudo without password which is

01:09:35,250 --> 01:09:46,440
the minus key now run it and i have cows

01:09:41,609 --> 01:09:50,369
neighborhood so that's a great feature

01:09:46,440 --> 01:09:58,530
in unstable to you can have a random cow

01:09:50,369 --> 01:10:01,230
cow at every task but wow and there's

01:09:58,530 --> 01:10:04,679
nice cows it's like there's a big dragon

01:10:01,230 --> 01:10:07,050
actually I didn't know about cows a

01:10:04,679 --> 01:10:12,719
before I try to start using constable

01:10:07,050 --> 01:10:17,219
it's nice be right okay you can see the

01:10:12,719 --> 01:10:20,610
cow tells us the supply and it starts

01:10:17,219 --> 01:10:24,920
set up by default if you start the play

01:10:20,610 --> 01:10:28,199
on a computer on any computer it first

01:10:24,920 --> 01:10:31,380
automatically call setup module will get

01:10:28,199 --> 01:10:34,280
variables from the computer which is

01:10:31,380 --> 01:10:38,159
what happens here and here you see

01:10:34,280 --> 01:10:41,699
there's actually the name I have poked

01:10:38,159 --> 01:10:45,810
into the llamo file just to know in

01:10:41,699 --> 01:10:49,530
which stage it is you see I'm on debian

01:10:45,810 --> 01:10:52,500
so it's skipping the redhead package

01:10:49,530 --> 01:10:55,020
installation and it tells me that i do

01:10:52,500 --> 01:10:58,460
have ntp already installed because it's

01:10:55,020 --> 01:11:02,489
okay it's not installing anything and

01:10:58,460 --> 01:11:07,860
here i had different configuration so it

01:11:02,489 --> 01:11:10,949
changed and here okay again because I'm

01:11:07,860 --> 01:11:17,590
TP is running now I need to restart it

01:11:10,949 --> 01:11:24,190
because the configuration has changed so

01:11:17,590 --> 01:11:27,179
and i think i will try thinking how to

01:11:24,190 --> 01:11:27,179
disable the cows

01:11:34,450 --> 01:11:37,870
goes Oh

01:11:41,830 --> 01:11:55,420
oni plethora ah so that's more I think

01:11:50,340 --> 01:11:58,870
it's not so much fun anymore but you see

01:11:55,420 --> 01:12:03,100
I have run it a second time and changed

01:11:58,870 --> 01:12:09,100
our 0h0 because nothing new happened now

01:12:03,100 --> 01:12:14,430
let's say that I would damage somehow my

01:12:09,100 --> 01:12:18,910
ntp configuration like doing oh no no no

01:12:14,430 --> 01:12:21,130
somebody is deleting that and now i can

01:12:18,910 --> 01:12:26,520
run it again but i will run it in check

01:12:21,130 --> 01:12:26,520
mode and i want to see the differences

01:12:30,219 --> 01:12:34,719
and you can see there would be two

01:12:32,949 --> 01:12:37,269
changes nothing happened if I run it

01:12:34,719 --> 01:12:41,110
again and check mode it will again show

01:12:37,269 --> 01:12:44,320
me to change because it's not doing it

01:12:41,110 --> 01:12:47,889
and I can see okay somebody deleted this

01:12:44,320 --> 01:12:51,369
parts of five so ansible where I'll put

01:12:47,889 --> 01:13:02,130
it back back and restart and TP so they

01:12:51,369 --> 01:13:02,130
will know it's working again okay

01:13:14,230 --> 01:13:24,830
okay okay that's a thing okay we have

01:13:23,180 --> 01:13:27,950
ten minutes left so I will fast forward

01:13:24,830 --> 01:13:33,370
it because that was a playbook one file

01:13:27,950 --> 01:13:41,480
where you have anything and on one place

01:13:33,370 --> 01:13:43,790
so now here we've been talking that are

01:13:41,480 --> 01:13:49,969
super galaxy is the tool that install

01:13:43,790 --> 01:13:53,690
galaxy role for you and the david carbon

01:13:49,969 --> 01:13:57,860
is my github account and def cove 2016

01:13:53,690 --> 01:13:59,840
and TP row is 0 that do the same thing

01:13:57,860 --> 01:14:02,540
as our playbook but it's in the row

01:13:59,840 --> 01:14:04,700
itself itself so you can see the

01:14:02,540 --> 01:14:14,000
differences and you can install it by a

01:14:04,700 --> 01:14:19,010
galaxy two so it and if only 10 minutes

01:14:14,000 --> 01:14:21,850
left i guess it will be your homework to

01:14:19,010 --> 01:14:25,790
look at that I fear you will see mostly

01:14:21,850 --> 01:14:29,719
that the role has superb directories for

01:14:25,790 --> 01:14:31,940
tasks for variables for handlers so what

01:14:29,719 --> 01:14:35,690
is in one place in playbook it's in

01:14:31,940 --> 01:14:39,620
several directories biological thing you

01:14:35,690 --> 01:14:42,200
will see the exactly same task there but

01:14:39,620 --> 01:14:46,280
it's more structured and it's a reusable

01:14:42,200 --> 01:14:47,900
because display book the thing if this

01:14:46,280 --> 01:14:50,270
playbook was specifically for host

01:14:47,900 --> 01:14:53,000
localhost if you want to share it with

01:14:50,270 --> 01:14:56,719
someone it would probably want to change

01:14:53,000 --> 01:14:59,380
the groups but if you have role you can

01:14:56,719 --> 01:15:04,610
do a minimal playbook like host

01:14:59,380 --> 01:15:07,580
localhost use the role role ntp and the

01:15:04,610 --> 01:15:10,670
other person will download the role and

01:15:07,580 --> 01:15:13,760
use host my own servers row and TP and

01:15:10,670 --> 01:15:16,210
it will use the TP on the set up on

01:15:13,760 --> 01:15:16,210
everything

01:15:19,080 --> 01:15:29,730
the road itself cannot itself cannot be

01:15:22,180 --> 01:15:40,410
run and it's but it's easy to monitor

01:15:29,730 --> 01:15:40,410
all you need is dire it's like this

01:15:44,010 --> 01:15:51,010
this is the equivalent for the playbook

01:15:46,990 --> 01:15:55,000
it's suitor shorter but it's because the

01:15:51,010 --> 01:15:58,630
NTP year old is the separate in another

01:15:55,000 --> 01:16:01,560
place and you can use it on any bunch of

01:15:58,630 --> 01:16:01,560
hoes to you need

01:16:11,550 --> 01:16:14,550
ok

01:16:15,040 --> 01:16:21,430
and this is playbook so you can run it

01:16:18,850 --> 01:16:23,710
without zebra playbook and this and TP

01:16:21,430 --> 01:16:29,520
and it will to set the same play boobs

01:16:23,710 --> 01:16:29,520
can be more complicated if I mean I can

01:16:44,920 --> 01:16:54,870
to some divine message you can combine

01:16:49,199 --> 01:16:59,020
tasks and rolls one important thing an

01:16:54,870 --> 01:17:01,179
ansible in puppet you define something

01:16:59,020 --> 01:17:04,780
which should be applied on server and

01:17:01,179 --> 01:17:07,840
Papa the Defiant when it will apply it

01:17:04,780 --> 01:17:10,989
in which ordering in ansible it's much

01:17:07,840 --> 01:17:13,660
easier from top to down so if you define

01:17:10,989 --> 01:17:15,190
your playbook and the approach will be

01:17:13,660 --> 01:17:18,100
first you know the approaches the first

01:17:15,190 --> 01:17:21,460
thing that is provisioned and I

01:17:18,100 --> 01:17:24,429
personally if I did again either it's

01:17:21,460 --> 01:17:27,160
more easy for me because I know if it

01:17:24,429 --> 01:17:28,920
fails if the playbook run fails it's

01:17:27,160 --> 01:17:33,760
usually because I've made a mistake

01:17:28,920 --> 01:17:37,570
sometimes the puppet it is said that if

01:17:33,760 --> 01:17:40,420
puppets fails it means you have not

01:17:37,570 --> 01:17:44,050
defined to dependence as well but

01:17:40,420 --> 01:17:50,469
somehow I found up myself unable to

01:17:44,050 --> 01:17:52,480
define them well about that maybe as i

01:17:50,469 --> 01:17:56,500
said the puppet is really not my thing

01:17:52,480 --> 01:17:58,270
it may be problem in me but if you have

01:17:56,500 --> 01:18:09,749
the same problem ansible may work better

01:17:58,270 --> 01:18:15,340
for you so this is it

01:18:09,749 --> 01:18:18,269
and this is me I thought about including

01:18:15,340 --> 01:18:21,880
a photo but you know their life better

01:18:18,269 --> 01:18:23,590
hope that but sure is the photo is

01:18:21,880 --> 01:18:29,440
photoshopped it won't maybe it would be

01:18:23,590 --> 01:18:32,199
better than me nevermind and if you want

01:18:29,440 --> 01:18:35,039
to ask anything we have about five

01:18:32,199 --> 01:18:35,039
minutes or so

01:18:39,300 --> 01:18:46,710
nevermind my voice is beckoning to

01:19:25,159 --> 01:19:33,030
i define the variables for something

01:19:29,850 --> 01:19:36,120
like this say cheese and i am going from

01:19:33,030 --> 01:19:39,330
talk about I have group all I defined

01:19:36,120 --> 01:19:41,580
that RuPaul has this sections and then

01:19:39,330 --> 01:19:44,310
the good works ever meets this is for

01:19:41,580 --> 01:19:47,909
this users and the hosts some hosts have

01:19:44,310 --> 01:19:55,199
different needs so i created the city's

01:19:47,909 --> 01:19:58,949
back so i define identifying which is I

01:19:55,199 --> 01:20:02,580
need shelves and up an item on tomorrow

01:19:58,949 --> 01:20:06,510
that will take the variable sshds and

01:20:02,580 --> 01:20:11,630
apply the reason I need one key to get

01:20:06,510 --> 01:20:11,630
that this magnet to be able to provision

01:20:13,500 --> 01:20:34,630
I need 20 different photos I'm sure if

01:20:25,090 --> 01:20:38,619
it's sher ali well i will have a look

01:20:34,630 --> 01:20:43,630
into the inventory it just is supposed

01:20:38,619 --> 01:20:46,389
to define the key to use the phone I we

01:20:43,630 --> 01:20:58,059
can look at that after with wicked

01:20:46,389 --> 01:21:00,820
amateur because I monkey I think I if

01:20:58,059 --> 01:21:03,329
it's possible I know what to look hot it

01:21:00,820 --> 01:21:03,329
may take some

01:21:12,489 --> 01:21:30,730
no is there a way to get standard out

01:21:16,880 --> 01:21:30,730
standard but is there a way to execute

01:21:34,690 --> 01:21:45,980
and you mean if you want all the

01:21:41,870 --> 01:21:51,640
informations if it's okay I'm not sure I

01:21:45,980 --> 01:21:55,150
follow well sometimes your standard out

01:21:51,640 --> 01:21:58,480
DVD or dash BBB starts giving more

01:21:55,150 --> 01:22:08,630
information so more efficient way to

01:21:58,480 --> 01:22:17,630
just get not directly without the door

01:22:08,630 --> 01:22:21,290
playbook but you can create go back

01:22:17,630 --> 01:22:24,110
again that we will send information to

01:22:21,290 --> 01:22:26,690
you are you go backpacking or certain

01:22:24,110 --> 01:22:29,630
way task is done and information about

01:22:26,690 --> 01:22:30,710
task is pushed to go back to here and

01:22:29,630 --> 01:22:33,739
let's go

01:22:30,710 --> 01:22:36,110
so you will have your lobby area that

01:22:33,739 --> 01:22:50,989
will take information what's up love the

01:22:36,110 --> 01:22:55,570
way you walk yeah for example this week

01:22:50,989 --> 01:22:55,570
I've been creating to a picture for my

01:22:57,790 --> 01:23:07,940
like I run etc and it creates PPC robots

01:23:04,969 --> 01:23:11,600
or address it starts of the database

01:23:07,940 --> 01:23:22,700
create the anguish for the server and

01:23:11,600 --> 01:23:32,570
devoted ourselves oh it's so I provision

01:23:22,700 --> 01:23:34,369
the web server vyvanse ago that i'm in

01:23:32,570 --> 01:23:39,619
the castle before installing

01:23:34,369 --> 01:23:42,709
or created for instance in stock a

01:23:39,619 --> 01:23:45,019
varchar coffee with PHP and all the

01:23:42,709 --> 01:23:49,820
environment impregnated into a message

01:23:45,019 --> 01:23:52,039
and that anyway it's a like if I need

01:23:49,820 --> 01:23:55,309
another shower I just publishing

01:23:52,039 --> 01:23:58,280
together great another minute rate so

01:23:55,309 --> 01:24:04,039
it's not intersecting actually so that

01:23:58,280 --> 01:24:08,719
way you my image mostly read over here

01:24:04,039 --> 01:24:12,530
if there's enough deploy it looks like

01:24:08,719 --> 01:24:14,599
many works it looks like it's a work but

01:24:12,530 --> 01:24:17,389
the extra edge of one while the other

01:24:14,599 --> 01:24:33,829
script and it created professional grade

01:24:17,389 --> 01:24:36,769
and to change it to providing you can

01:24:33,829 --> 01:24:41,469
have open sir for example package a

01:24:36,769 --> 01:24:41,469
changeup shake-up are 300

01:25:00,720 --> 01:25:08,620
but it is possible to do it to Alexis I

01:25:06,250 --> 01:25:11,230
picture you have the worst of our

01:25:08,620 --> 01:25:14,020
businesses h and that's what you need to

01:25:11,230 --> 01:25:16,140
do anything cancels and it doesn't

01:25:14,020 --> 01:25:16,140
matter

01:25:33,900 --> 01:25:53,890
no I have seen issue for me I just I

01:25:50,800 --> 01:25:59,770
hurt now my clique based on the cutting

01:25:53,890 --> 01:26:04,420
edge one can open source in the future

01:25:59,770 --> 01:26:07,620
it's like maybe the future because as a

01:26:04,420 --> 01:26:12,070
bell tower is enterprise solution that

01:26:07,620 --> 01:26:14,260
really can do well it's nice craft store

01:26:12,070 --> 01:26:16,570
management but it can do much more than

01:26:14,260 --> 01:26:19,530
that is for example it automatically

01:26:16,570 --> 01:26:23,380
takes the state of a big package on a

01:26:19,530 --> 01:26:25,300
computer so you can go to a story see

01:26:23,380 --> 01:26:29,500
what challenge to see what packages were

01:26:25,300 --> 01:26:32,980
updated when and have fun stuff like

01:26:29,500 --> 01:26:37,380
somebody can run this playbook and not

01:26:32,980 --> 01:26:37,380
the other it's good

01:27:12,030 --> 01:27:30,639
your first what's a module in fact what

01:27:25,060 --> 01:27:36,580
you mean by who's coaching classes some

01:27:30,639 --> 01:27:38,800
purpose that's where all your question

01:27:36,580 --> 01:27:41,650
of roles

01:27:38,800 --> 01:27:47,470
for example for for installing and

01:27:41,650 --> 01:27:50,170
setting up EP that's the role you can't

01:27:47,470 --> 01:27:53,590
remove it there's answer the rocks Brian

01:27:50,170 --> 01:27:58,150
D'Arcy at school and there's a bunch of

01:27:53,590 --> 01:28:03,570
rocks and it's likely that I answered it

01:27:58,150 --> 01:28:06,430
before download it look at it and then

01:28:03,570 --> 01:28:10,150
it's like everyone can close the roll

01:28:06,430 --> 01:28:14,830
and reading my rules I have quite good

01:28:10,150 --> 01:28:18,400
words for Canseco and i hope you will

01:28:14,830 --> 01:28:25,570
not look at them it's there because I

01:28:18,400 --> 01:28:28,090
think so but well I'm improving their

01:28:25,570 --> 01:28:30,280
but it's not like anyone can down them

01:28:28,090 --> 01:28:32,520
and I have quite a billion that the most

01:28:30,280 --> 01:28:35,200
of the roads are there of this quality

01:28:32,520 --> 01:28:39,180
but it can be done with it and you can

01:28:35,200 --> 01:28:39,180
look at it and qualified to environment

01:28:52,470 --> 01:29:01,870
yeah its resolution if you cannot if you

01:28:59,620 --> 01:29:04,320
don't have because an ansible master

01:29:01,870 --> 01:29:06,820
server and you must have ssh to the

01:29:04,320 --> 01:29:09,310
provision that you can have unstable

01:29:06,820 --> 01:29:11,110
pool there's even a binary uncibal pool

01:29:09,310 --> 01:29:14,200
and i missed it when I prepared this

01:29:11,110 --> 01:29:16,120
session sorry and it what it does

01:29:14,200 --> 01:29:18,760
basically it's download the git

01:29:16,120 --> 01:29:20,200
repository you enter to it and run it in

01:29:18,760 --> 01:29:25,650
the gait your posture you have a

01:29:20,200 --> 01:29:29,050
playbook usually and so it's a actual do

01:29:25,650 --> 01:29:32,710
get go or check out or something and run

01:29:29,050 --> 01:29:34,540
uncibal playbook so it's possible if

01:29:32,710 --> 01:29:37,930
you'll have access to the dead kids

01:29:34,540 --> 01:29:40,530
repository and whatever it is on the

01:29:37,930 --> 01:29:43,600
computer you can use the answer boo boo

01:29:40,530 --> 01:29:46,710
it's I think it's not used much often

01:29:43,600 --> 01:29:50,110
because ansible is mostly push laughing

01:29:46,710 --> 01:29:53,440
but it's possibility you can have brunch

01:29:50,110 --> 01:29:56,560
old ansible pool and it was download to

01:29:53,440 --> 01:29:58,990
the show provisional llamo configuration

01:29:56,560 --> 01:30:01,030
and run it and it's tough but you have

01:29:58,990 --> 01:30:04,080
to install ansible on every computer you

01:30:01,030 --> 01:30:09,390
are managed by that you are mentioned

01:30:04,080 --> 01:30:09,390
but sometimes it's it's just necessary

01:30:35,050 --> 01:30:38,200
you watch

01:30:59,480 --> 01:31:02,470
years

01:31:08,570 --> 01:31:10,570
Oh

01:31:17,060 --> 01:31:20,060
issue

01:31:41,520 --> 01:31:46,440
if you'll just check on your system

01:31:54,260 --> 01:31:57,760
 this up again

01:31:59,170 --> 01:32:03,190
and it was

01:32:23,550 --> 01:32:26,940
because there is

01:32:37,700 --> 01:32:42,260
with me we are doing it together so you

01:32:46,160 --> 01:33:08,030
can actually okay by the way food

01:33:05,040 --> 01:33:08,030
package of four

01:33:17,560 --> 01:33:20,560
company

01:33:28,630 --> 01:33:33,099
this is no more okay

01:33:41,749 --> 01:34:31,119
I don't need

01:34:38,169 --> 01:34:41,169
sorry

01:34:44,420 --> 01:34:48,139

YouTube URL: https://www.youtube.com/watch?v=o_6WCYn4QY8


