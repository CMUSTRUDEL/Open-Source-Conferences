Title: 2019: Public Transport Navigation using OpenStreetMap by OsmAnd
Publication date: 2019-09-28
Playlist: SotM 2019. Day 3, Hörsaal Ost
Description: 
	The presentation describes stages of developing and starting of new feature of OsmAnd app.

OsmAnd is the first among the large OSM apps that developed public transport support. Now we continue to improve this function further, add new modes of transport, and experiment with the settings.
How we came to the idea of ​​public transport? In the presentation, we will explain why we use the PTv2 scheme, why this option is preferred, and how it works. In addition, in our report, we will consider the future support of GTFS.
During the work we faced various difficulties, so we will explain what these difficulties were and how we tried to build at least something. We will also cover how OSM users can help us, and whether it is possible and how long it will take to improve the data.
Lastly, we will present our results and plans, namely, what was our most significant success and how we want to build an editor for public transport..
We launched the function at the beginning of the year, and throughout the year we tested it, supplemented it with new conditions for building a route and tried to take into account all possible conditions for building routes. Although the data in the OSM have not proved to be always correct, everything can be fixed by the community.

Victor Shcherb Eugene Kizevich

https://pretalx.com/sotm2019/talk/NWW7GF/
Captions: 
	                              good afternoon and welcome everybody I                               am TD we are going to have a talk by                               Victor and Eugene on public transport                               navigation using oil Zaman by ausma                               knows it's going to be a twenty minutes                               talk and five minutes for questions                               thank you                               hello everybody                               so Tom                                                                  you already tired so our president                                presentation will not be difficult and                                at first the name of our application                                pronoun we pronounced Osment yeah during                                this conference I heard other variants                                but we say Osment okay also the head and                                as no okay                                we are small team developers of the                                application which many of you know and                                use Osment use called as swiss knife                                among similar applications by the way we                                took survey of features of Osman compare                                it with other application in such areas                                as scheduled tourism active tourism                                awesome and social tourism and it turn                                out that in these areas like casual                                tourism active tourism and our same we                                have in this we have a bunch of features                                that overlap with many application in                                general these social trees we still have                                work to do now we will talk about the                                feature that religious to casual trees                                each work of lines it is nice to have                                for many people especially us Mars                                and this is navigation by public                                transport at such scale tis supported                                only by Osmond okay we all smoke team                                developers of the oil okay we a small                                team here we are ten people we are                                already nine years old we are open                                source we use as                                                    have more than one and a half million                                active users okay and at this moment                                Osment teams Othman team works with for                                general projects our application is                                designed for two systems Android and iOS                                IOC is currently under active                                development which can be read in our                                block                                soon the person will come closer to                                Android in functionality also one of our                                new project uses osmond tracker and of                                course some of you listened to Victor's                                presentation this is open place reviews                                okay why did we decided to develop this                                vision this idea was born last year on                                sodium                                                                  to do this oceanology named public                                transport navigation which is render                                data content according to the                                public transport aversion to scheme this                                is actually is a beginning on the                                project all development continued for                                almost six months and ended who is                                released three points three in March of                                this year there were enough problems in                                development better testing began at the                                end of January and took almost one month                                only by this time with a pipe                                parrot can one feel the complexity and                                scale of such feature as public                                transport navigation okay actually who                                uses public transport navigation the                                first it used offline by travelers                                during trips of course they can find                                with                                                              Osmond and builder Road at next general                                group is aa Smurfs at the moment the                                feature works in the test mode there is                                road construction that you can follow                                but there is no navigation itself there                                is no worry that you are at your stop                                cetera as I said the feature was                                according to the data of public                                transport version                                                      transport version to skim shortly any                                public transport road can be described                                by exciting elements in our Sam Roth's                                batsto platform and cetera                                all this all this is described by                                relation by special roles it is quite                                difficult for beginner Osmo which can                                make a mistake by creating a public                                transport wrote with probability of                                                                                                         lead to role in the build of road in                                Osment to build wrote in Osment unit                                automata version                                                   should to choose public transport                                profile start and and boyens after that                                 you shoot click button start                                 Osment author it builds roads using only                                 public transport data you choose one of                                 the road to Berens which is convenient                                 to you if you click on details button                                 you will have full information where you                                 can see is time distance bus stops                                 information of course so there is an                                 opportunity to show all roads at the map                                 by clicking show on map button and even                                 compare roads so on the map and see all                                 alternatives okay                                 when we prepared the release we decided                                 to write an article about public                                 transport in awesome where we try to to                                 explain how to build and check public                                 transport roles you can find this                                 information in our blog our website                                 Osment net                                 as I said earlier the fish' using the                                 testing phase because for full                                 functionality we don't have information                                 from same database current problems use                                 public transport                                 dublicate roads or no full-service                                 information no facilities for                                 handicapped passengers no support of                                 traffic interval no support of Transport                                 Tech open hours the main problem is the                                 timetable at this site we compare our                                 public transport road with Google as you                                 see the reason for there is information                                 about time departure and arrival in                                 Google Maps but we don't have this today                                 another problem which is a result of                                 waking timetable that Osment mixed up a                                 night bus with date ramp of course this                                 is an impossible road to use yeah                                 nextpart victim yeah well focus more on                                 a technical stuff so of course as you                                 see it's pretty unusable without                                 schedule even though it's good to test                                 data good to see if the routes are                                 connected and so on                                 but because of these routes that mix up                                 things which are not possible to happen                                 in real life                                 we take a look at GTFS it's rough                                      GTFS providers around the world                                 sometimes they focused on the city level                                 sometimes on the counter level so anyway                                 you can find the data sorry and it's                                 open mostly and there is a number of                                 this date is growing but then we have a                                 end up in a problem how do we match it                                 with this osm data for us very important                                 to have all the data offline so what we                                 need to build                                 routes offline so we need to connect the                                 timetable into our format and mix up                                 with awesome data and the simple things                                 that we cannot find a correlation                                 between trip which is entity in GTFS and                                 osm relation route this is one of the                                 master route and once we have that                                 relation once we know if this relation                                 ID matches this trip by the in Z's GTFS                                 file then we almost get working then                                 almost like we already have algorithms                                 to support timetables and and it's easy                                 to basically make it almost the next                                 release the problem of course how do we                                 make this relation how do we make this                                 happen so we cannot store trip ID GTFS                                 this is gtfo with the link to GTFS file                                 itself in OpenStreetMap because trip ID                                 is not stable it changes it generates a                                 new one in just a number it's an ID so                                 it will basically blow up or some                                 database and also we cannot put or some                                 relation ad in GTFS trip table because                                 it is generated by transport companies                                 and municipalities which are not aware                                 of OpenStreetMap so basically and alsa                                 relation age is not stable enough to                                 remember that this one will stay so what                                 what we are searching for and looking                                 for maybe we probably already found it                                 at least a couple of fraternity from                                 this conference a project that collects                                 GTFS and basically can augment trip                                 table with a relation ad from                                 OpenStreetMap from that point we can                                 parse it build it into our own format                                 because we need to support and mobile                                 clients to make it compact and make use                                 of it and since then we basically can                                 support the most important feature the                                 time table as as Eugene said we own on                                 the face to not implement all possible                                 feature even though we're mission                                 features in public transport and                                 algorithm could be done better but what                                 we are looking for to make a greater use                                 of public transport from OpenStreetMap                                 get audience attention so more and so                                 data will become more and more reliable                                 and reliable and comparing to half a                                 year ago in some countries we see a                                 tremendous progress in some countries of                                 course the reason it was already                                 maintained and greatly and had a great                                 support but in some still has a quite                                 more support so we really hope that in                                 the year                                                              coverage and all the users will use                                 transport schedule from OpenStreetMap                                 data thank you                                 [Applause]                                 [Applause]                                 Thank You Victor and Eugene for the                                 Lenten talks now we'll have questions I                                 think we have about eighteen eight                                 minutes                                 Thank You Victor                                 Amelia so you just said that you can                                 find correlation between GTFS trips and                                 some wrote relations well actually you                                 can there is not one-to-one relation of                                 course because there are multiple trips                                 today but you can just compare stops for                                 a trip and any trip has a fixed list of                                 stops and use the proper relation but                                 then the TV version two schema you are                                 using in that stops are optional for a                                 road just highways are required so you                                 might not get a list of stops if you                                 rely and if you promote the BTB two                                 schema we should call new but it's ten                                 years old now so at the last autumn you                                 had an idea for this also the next                                 public transport scheme was proposed so                                 what's your opinion on that                                 yeah it's it's a great comment about                                 that what we can do automatically and we                                 did I did myself investigation in the                                 Netherlands and almost fifteen percent                                 and max I reached a fifteen percent                                 coverage of GTFS mentioned perfectly                                 with OpenStreetMap relation by algorithm                                 comparing stops almost fifty percent I                                 measured myself manually I think is                                 possible to overcome difficulties and                                 main difficulties comes that osm doesn't                                 have does not have enough relations                                 because in GTFS you really have all                                 possible routes which at the end of the                                 day at the beginning and some doesn't                                 have them so it's possible to fix                                 OpenStreetMap in that way and thirty                                 percent kind of I counted as extreme                                 cases where the data is missing was                                 completely kind of doesn't make sense so                                 it was hard to manage it so I say                                 I didn't understand why it's not                                 possible to manage current GTFS map in                                 this public transport v                                                  said maybe it will not become great but                                 they could not comment on version three                                 because I didn't look into that tip                                 I would challenge why even use the route                                 relations because you have GTFS so you                                 could simply use GTFS for routes and use                                 the stops which are in OpenStreetMap so                                 you would change why do we need to map                                 relation and we can skip and just have a                                 yeah indeed but I think because                                 relations are present in OpenStreetMap                                 we as I need to make decision to delete                                 them because they're not going to                                 maintain or we need to use them because                                 they are really connected with stops we                                 have validation tools that validate if                                 relation matches or not and it's just                                 one single bit which is missing                                 comparing to for example if you match                                 one level deeper here you just miss this                                 beat between one table mapping what trip                                 ID and relation to my team but I agree                                 there are multiple possible solutions we                                 just need to reach an agreement on which                                 level we actually can map the problem is                                 that we cannot store weaponizing GTFS                                 neither in OpenStreetMap so we need to                                 find a third party where every story yes                                 I think well the some nations publish                                 their GTFS data and I think that will be                                 increasing and you will have an overlap                                 in data for the for the routes so in my                                 opinion probably would be better to take                                 the roots from the GTFS and the ones in                                 an open street map of course half there                                 [Music]                                 can be there as well for for displaying                                 a map just not for for timetable just to                                 resolve that ambiguity I think it's the                                 most important bit if I can answer is to                                 have a validation to which people will                                 look regularly and then say based on the                                 changes that it is required by                                 meditation how many how much often it is                                 broken local communities can make                                 decisions either to semi automate some                                 import from GTFS data or maybe maintain                                 it separately                                 it really will it could really ver eyes                                 on a local kind of various and what the                                 date is coming from GTFS how good these                                 days and so on so for anyone mapping or                                 public transport routes today already                                 what validators should we look to what I                                 don't know dozen plugins or validation                                 there is helpful so that we create                                 routes that you can consume easily well                                 I think it's a quite typical validations                                 this is validation hosted on a Geo                                 fabric it was it's already three years                                 old I think it's good enough the problem                                 is that yeah public transport is hard to                                 basically change without making a                                 mistake and but again the day before was                                 a course how to do it with the plugin                                 using jaws so it is hard and we need                                 validation tool and we need to encourage                                 people to look at the errors of                                 validation too for example in Minsk we                                 did in the in Kiev it was everything was                                 broken it was public transfers to v                                      not supported but once we build the tool                                 we start encouraging people ok you can                                 use it and check it and slowly but                                 steadily people convert to version                                       using keep it green once you reach the                                 level of green I think it for community                                 becomes easier to maintain it but when                                 you open an everything rather it's yeah                                 that's becomes a challenge                                 on one page a web page just asking I                                 have another tool for validation of                                 public transport routes                                 it's called PT and a public transport                                 network analysis and now this is                                 available in the Internet                                 just give me a call and I configure that                                 for your network and it runs every night                                 presenting you the errors in the routes                                 gaps and everything else whether it's PT                                 PT v                                                                     are missing bus routes or something like                                 that compared to what exists in reality                                 so currently I did it for Brazil some                                 weeks ago or some days ago based on GTFS                                 data on the routes table converted it to                                 an CSV file and this is the input for                                 the tool to compare reality versus what                                 we have in OpenStreetMap and it's called                                 PT and a dot OpenStreetMap dot de this                                 is really great we need to give it a                                 bigger media coverage and so of all                                 possible channels because this does                                 really help and observe sometimes we                                 don't know of their existence is great                                 and it provides it in HTML tables not in                                 graphical form or something like that                                 yeah attending thanks hello team                                 [Applause]
YouTube URL: https://www.youtube.com/watch?v=SPab09kaWPc


