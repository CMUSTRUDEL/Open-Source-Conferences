Title: 2019: OSM Vector Tiles in custom coordinate systems
Publication date: 2019-09-28
Playlist: SotM 2019. Day 3, Hörsaal Ost
Description: 
	OpenMapTiles is an open-source set of tools for processing OpenStreetMap data into vector maps, which can be produced in various coordinate systems.

OpenMapTiles is an open-source set of tools for processing OpenStreetMap data into zoomable and web-compatible vector tiles, which are ready to use in OpenLayers, Mapbox GL, Leaflet, QGIS as well as mobile applications. 

This talk gives an overview of the OpenMapTiles tools to produce vector tiles in coordinate systems other than Mercator while keeping all the features, such as interactivity to create powerful region-specific applications.

Today’s de-facto global standard is a Spherical Mercator projection because it preserves shape and angles. The entire world looks like a square, which makes it easy to work with on a computer. However, such a transformation causes several issues like distortion of sizes where places around the equator are visually smaller than those near poles. That’s why new global coordinate systems were developed.

There are also many local coordinate systems with a long tradition. They perfectly fit the need to display a particular country/area in the most acceptable way. They are heavily used, especially by governments. OpenMapTiles can serve as a base map for displaying data in a different coordinate system or for view/print purposes.

There is also a hosting service based on OpenMapTiles called MapTiler Cloud, which offers the same ability to be displayed in a different coordinate system than Mercator.

Jiri Komarek

https://pretalx.com/sotm2019/talk/RYPLFZ/
Captions: 
	                              good afternoon and welcome everybody to                               their talk by Rico Merrick on all some                               vector tile in custom coordinate system                               it's going to be a                                                   five minutes for questions thank you                               okay thank you for the introduction so                               hi everyone                               thanks for coming I'm Mary I'm from the                               met tire team and well what we do it's                                like apart from providing some beautiful                                base maps those you can see satellite                                maps and so on we are also working on a                                lot of open source projects and today                                I'm going to present one of them which                                is called open map tiles by using this                                project this this spec you can create                                your own vector tiles and you can also                                create them in your own coordinate                                systems on the very beginning not                                everybody here has like GIS background                                so what are the what are the different                                projections or the coordinate systems                                what is it about the issue is that the                                globe is well kind of around                                          unfortunately it's not flat otherwise it                                would be really easy and we are trying                                somehow to put this                                                  two-dimensional screens or papers or                                whatever and there are many ways how to                                do it as you can see a lot of them are                                well they are different but they have                                one thing in common all of them are                                wrong the only difference is the aspect                                in which they are wrong so let's start                                with with the most common one which is                                Mercator you can see it's if you have                                ever been to OpenStreetMap dot org you                                can see there it's great for instance                                for navigation                                yeah it keeps the squares as they are on                                the other hand the biggest problem with                                this projection is in the in the sizes                                so for instance here you can see the                                greenland's which is much bigger than                                Europe well in fact it's almost like                                five times smaller than Europe and not                                talking about the countries or the area                                around equator there the problem is much                                much bigger well the answer to this                                could be gout Peters projections for                                instance which is correct in showing the                                decisis however it's wrong in everything                                else so you also don't want to use it or                                you can then for some reasons                                disappeared the third one sorry the                                second one in the middle this is the                                French one Bert this is the example of                                the local coordinate system which was                                developed for a specific country in this                                case it was for France I will talk about                                the local coordinate system later on the                                third one is not Lombard sorry the third                                one on the third picture you can see how                                incorrect it is because is you know                                obviously that the Antarctica is not                                that it has totally different shape then                                it is in has in reality so but it's                                really great to show the areas around                                the North Pole but there are other ways                                how to show the globe but none of them                                is really it's all of them are far from                                being perfect apart from the from the                                coordinate system which are trying to                                show the global data we have a lot of                                local coordinate systems because                                historically speaking a lot of maths I                                would say most of the maps were designed                                to show some local data some kingdoms or                                even small areas like cities and so on                                and for them it was much better to                                define their own coordinate system which                                fits their needs if you take an example                                of well let's say Norway you can see the                                problem where it's but it looks a little                                bit like me                                it's like real tall and slim and well if                                you try to put me on the on a Mercator                                my feet will be correct my hips will                                already like this and my head like that                                so you don't want to do that but well                                apparently we are doing it with Norway                                so a lot of those local coordinate                                systems were created and they are still                                in use even in the modern days even for                                some smaller countries like Switzerland                                or Czech Republic where this issue is                                not that big however it still stays                                there and it will probably because it's                                required by the governments and some                                 official bodies so yeah here you can see                                 yeah right you can see the vgs                                           tiles in this vgs                                                        already available on the map sauerkraut                                 so you can go there and you can start                                 using it you can crazy see it looks                                 somehow weird especially on the really                                 high zoom levels right now                                 so this is one of the example of the of                                 the coordinate system we already have                                 and now if you want to use one of these                                 coordinate systems you have basically                                 two options if you want to go with our                                 stack the first one the easiest one is                                 just to go to Metacom such clouds create                                 a free account and well start using it                                 as I said the vgs                                                        maybe already they're like our                                 developers are working today on                                 deployment so if it's there it's still                                 hot if not it will be there today                                 tomorrow wednesday like this so check it                                 out and more coordinates are coming soo                                 what do you have there you can start                                 using with open layers which can show                                 both raster tiles and vector tiles or                                 you can also mix it and we also operate                                 the XY side because we are sterilized it                                 on demand bpms or static Maps API so                                 that's the this easy way and now okay                                 yeah one more thing right now there is                                 this basic style we will add more and                                 later on we will also add the                                 possibility of the of the our customized                                 tool which is available for the for the                                 maps in Mercator but right now you can                                 write or you can import any style which                                 you create yourself so the heck for                                 today is like just create your own map                                 using this tool or the edit tool                                 download it just change the source and                                 upload it back and you have your own                                 style and now we are switching to open                                 map tiles                                 part let's say this is the way how you                                 can do it any of you can do it for those                                 who still don't know open map tiles this                                 is the set of open source to daily dis                                 used by we estimate                                                    we don't know exactly how many because                                 not everything is our users it is                                 already adopted by other companies like                                 carto or I know if there is someone else                                 who is using it so we estimate                                     million people every day it's available                                 on open Taos org or on github or you can                                 find it there all the tools needed for                                 building how's it made so first there is                                 this vector tile schema which defines                                 the layers and attribute and this can be                                 used with any kind of data what we use                                 most of the time it's OpenStreetMap                                 however for our own usage we also mix it                                 with other data so for zoom level                                                                                                               has some much better look on those zoom                                 levels we are also adding Vicky's data                                 the reason for that is other                                 translations because every city is or                                 most of the cities are much better                                 translated on Vicky's data than                                 OS M but you can also use it for your                                 own data it has been adopted by                                 Luxembourg national geo portal or the                                 cartographic Institute of Catalonia yeah                                 I can see yeah it was also the                                 inspiration for the for the UK Ordnance                                 Survey open zoom stack how we are                                 creating this well if this is just like                                 some overview how we are doing it if you                                 want some step-by-step guide then you                                 should search for open map tiles state                                 of the map                                                               about this so there's really like clear                                 guide but basically you take the PDF                                 file with Open Street Map data you                                 import it into the database use passages                                 and then you generate those vector tiles                                 in the web box a vector tile format so                                 at the end you will also get again the                                 PDF file in the MB tiles format so it's                                 quite confusing you you have PBF on the                                 very beginning but with the whole world                                 with like ten of gigabytes of data at                                 the end you have like a lot of those                                 small PBS in the form of vector tiles                                 and now you have the tiles so the last                                 step how to transform those tiles into                                 the real Maps it's you need to apply                                 some kind of style there are several of                                 them they are also available on the                                 github so you can use it for the photo                                 map generated from Open Street Map but                                 also you can use it for your own data in                                 case                                 you you stay compatible with the with                                 the schema so you can say for instance                                 let's take everything from Overstreet                                 map except for roads because I have my                                 own road if you if you follow the schema                                 then you can well get exactly the same                                 output as here and now we modified the                                 flow little bit and to be able render                                 the tiles in different coordinate                                 systems the difference is that at the                                 end we are storing in Geo package the                                 reason for that is the MB tiles format                                 is by definition only in marketer and                                 then yeah then you can already use it                                 with open layers and or with oil                                 netbooks style so it looks really the                                 same way as like the normal map since                                 the last presentation state of the map                                                                                                  November the biggest change was in the                                 water part but also we added the                                 multilingual street names that's the                                 case for countries like Belgium or                                 Finland they have also to do official                                 language is there and in                                                 again the water layers and some                                 boundaries plus we added four new                                 languages yes                                 also Basque and what is planned for the                                 future well right now the situation is                                 that we have a lot of repositories and                                 for the beginners or even for us it's                                 really hard to orient in it so we want                                 to make it somehow easier and what we                                 are also trying to define and achieve                                 its to have like the basic set or to to                                 have to have a tool that creates the                                 base map I'd say and then have                                 additional repositories for some                                 specific use cases so the advantage is                                 it's really easy                                 somehow for the newcomers to start and                                 also to keep the size of the rendered                                 files to some like normal size and yeah                                 of course if you are interested in                                 what's going on issues like for it a to                                 our blog post or start following us on                                 Twitter so how to get how to generate                                 the map yourself as I said it er you                                 watch the presentation from the last                                 year or you can go to github and there                                 is the tutorial plus there is this                                 QuickStart shell script which you just                                 run and it will it will really guide you                                 there is also the                                 on open map tiles org and here you have                                 also this this view were when you can                                 see all the features which are there the                                 other option is of course that you just                                 download what is already pre generated                                 that is for most of the users it is much                                 better because well creating your own                                 tiles it's quite costly so you can                                 either download it's free for                                 non-commercial use and well for prices                                 if you are a business so yep there are                                 also additional data layers one of them                                 is Hill shading digital elevation model                                 plus satellite which is Singh here but                                 yeah we have it as well                                 and the project vision                                 I already well I already said it we are                                 trying to keep the size somehow                                 low between                                                              some base map which contains the                                 important topographic information and                                 for the rest there will be this custom                                 additional layers so what we already                                 created we created one sample layer it's                                 available on the github it's it's a                                 layer which contains the things for                                 skiing like slopes and lists and things                                 like that and we are also thinking about                                 others other things other use cases yeah                                 here is this is not done by us                                 unfortunately but it's really beautiful                                 for those who                                 no this is open infrastructure map and                                 all right and using it for showing or                                 the electric infrastructure and so on                                 what we we are working on right now this                                 is this hiking map and yeah and as I                                 said on the very beginning this is not                                 the only thing which we are working on                                 we have other open source project the                                 full list is on Metacom slash open                                 source one of them is PI server GL which                                 is like the node.js server for running                                 your own map                                 it has also we have also time server PHP                                 which is a simple script which you put                                 on your PHP server put the mat next to                                 it and you have it you have the map OS m                                 names this is the geocoding service                                 based on the data from upper stream map                                 the interesting thing the ranking is                                 partially done of course it's done by                                 bounding box and so on but the hierarchy                                 is also based on the on the Wikipedia it                                 means like the more the price is search                                 on Wikipedia the highest chances are                                 that it will stay on the top here web                                 grf as I said on a very beginning our                                 planet is a globe so this is really like                                 the                                                                      webpage and a pc g io this is the                                 database of all the coordinate systems                                 you can find everything what you can                                 ever heard of and probably never heard                                 of so yeah as i said check it out                                 mattias go slash oppressors thank you                                 [Applause]                                 the interesting and informative talk                                 you'll now ask for questions we have I                                 think four minutes but before everybody                                 else go we would like to make an                                 announcement that there's going to be a                                 closing session and in the main hall add                                 four questions comments my question is                                 about the future of local projection in                                 the open maptiler project this feature                                 is already available or not because I                                 not see it yeah it's not available on                                 the open web tiles right now the reason                                 is as I said we are trying or we will                                 try to make it as simple as possible                                 and this is exactly the opposite so                                 right now we are thinking how to make it                                 in a nice way so it's not that we are                                 hiding it but if we just put it there                                 then it will make the whole process more                                 complicated so stay tuned                                 more questions comments okay and hi are                                 you using the hip pocket for store them                                 up that the vector tiling in information                                 or you use the for store day the real                                 data yes like I don't know the shape                                 file or the new JSON data in the new                                 package or you would you store the                                 vector tile in the hip pocket I don't                                 know it is play me well or not yeah I'm                                 not sure if I got question correctly                                 like if we use the use your pocket for                                 serve a vector tiles no no for serving                                 vector tiles we mostly use MB tiles yeah                                 that's like our that's our format which                                 we use most of the time however the                                 problem with local coordinate system is                                 that or the problem with MP tiles is                                 that it supports on the Mercator and                                 therefore for this specific use case we                                 switch to your package                                 use your package directly like normal                                 image yeah yeah                                 hi okay so my question is with the                                 prerendered tiles can be used the                                 customized styling what is offered on                                 open my Tyler yes yes it can be used you                                 only need to change the weight where                                 exactly on the metal cloud or for your                                 own yeah yeah there is no problem if you                                 want to use it on a map sauerkraut you                                 need to download it then change the                                 source and then upload it again                                 is we will work on it so it will be                                 easier of course easier in the future                                 but right now it's workaround because we                                 want to make it in a nice way and yeah                                 it takes sometimes to really like think                                 about it how to do it properly if I have                                 to make a custom style then I have to                                 use your application then to custom make                                 a custom style no you can you can create                                 it yourself it's like you can write it                                 from the scratch you can use some edit                                 tools or you can use one of the one                                 which are prepared                                 Thanks
YouTube URL: https://www.youtube.com/watch?v=6ke3vp9M1Uw


