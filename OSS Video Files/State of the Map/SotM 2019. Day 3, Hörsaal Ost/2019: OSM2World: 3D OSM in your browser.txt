Title: 2019: OSM2World: 3D OSM in your browser
Publication date: 2019-09-28
Playlist: SotM 2019. Day 3, HÃ¶rsaal Ost
Description: 
	OSM2World is an open-source renderer capable of creating rich 3D worlds from OpenStreetMap data. It is now available as a web application powered by WebGL.

OpenStreetMap contains a wealth of data that can be used to build a 3D representation of our world. Some of it, such as buildings mapped using the [Simple 3D Buildings](https://wiki.openstreetmap.org/wiki/Simple_3D_Buildings) tagging convention, is intended primarily for 3D use cases. Other feature classes, such as roads and railways, urban infrastructure, or landuse information, aren't usually mapped with 3D in mind, but are nevertheless essential ingredients of a 3D world. In either case, unlocking the full potential of OSM data and converting it into a representation that's suitable for typical use cases in the domain of 3D rendering requires specialized software tools.

[OSM2World](http://osm2world.org/) is one of these tools. Fully open source, it can be used to export 3D data for modelling software, animations, and games, as a library in other programs, and as an interactive map on the web. Until recently, however, the lack of a powerful 3d rendering solution for the web put constraints on the features available without a local installation of the software. Today, the WebGL standard allows real-time 3D rendering in all major browsers. A new web frontend for OSM2World builds on these capabilities to allow users to explore the world in 3D, based entirely on open data.

This talk demonstrates the abilities of OSM2World and its new web frontend, showcases some impressive 3D mapping around the world, and briefly explores how the software works behind the scenes.

Tobias Knerr

https://pretalx.com/sotm2019/talk/V7QPGG/
Captions: 
	                              we're gonna hear about                                              browser from                               thank you thank you                               okay so I want to tell you a bit about                               bottom two words or them two words is a                               piece of open-source software that I'm                               maintaining for quite a few years now                               and simply speaking the goal of osm                               preferred is to create                                               OpenStreetMap data a beaten-up data                                comes in various forms and autumn                                provide supports of your serums archers                                or with m                                                          overpass api                                it can also use elevation data which is                                not part of ODEs M but as a TM or other                                sources provide open licensed elevation                                data - so I've described the mission of                                autumn - vert as creating                                               Open Street Map in three simple steps to                                create                                                                to store open Street data in some kind                                of suitable storage period or passage in                                order to be able to work with it as a                                second step we need to actually                                understand the data the value of tagging                                conventions that exist and to build                                   models from it and finally we need to                                export it into the desired targets or                                not now a big part of the idea of                                Awesome to verge is that the second step                                understanding data and building                                   models from it is actually quite a bit                                of work if you want to do it properly so                                for example just rendering as we D                                building by extruding the outline is                                relatively easy but as soon as you start                                for example creating individual roof                                shades and so on which are all things                                that can be tacked in with em you need                                to actually write code that supports all                                of these variations and Paris xxx order                                that this work is mostly the same for                                many different use cases so I mean                                that's a step three                                to export the models into a desired                                target format but the step two is very                                similar for all these different use                                cases I mean that some other project in                                the autumn ecosystem who also do                                   models from osm but they often focus on                                one particular output so they focus on                                making the best for one particular                                gaming engine or one particular editor                                of one particular modeling tool or                                something like that                                oesn't word tries to instead focus on                                the common functionality between all                                these use cases as a result it supports                                multiple output formats and to go Lystra                                at even more in the future this includes                                for example a                                                          in the obj file format which is very                                common delivered and can be read by                                practically everything it can do                                interactive rendering is OpenGL and it                                can also end PNG images again with                                OpenGL including for                                                    few examples of things people have been                                doing with om                                                        art so load some in blender apply some                                cool effect and create a camera flight                                gaming applications like this now cried                                old super tux cat version with some                                great track created from Open Street Map                                data in it and this isometric chart that                                I available at maps or them to word Park                                this has also been around for quite a                                few years now and back then it was one                                of the first services that even let you                                see                                                              browser at all the way it worked was                                just creating the                                                 essentially virtual photographs from a                                particular angle and cutting it into                                tiles so that it can then be shown with                                open layers normally like regular                                   ties                                back then there wasn't really a perfect                                alternative yet but nowadays is very old                                technology and there were focus of this                                talk it's essentially our current                                project to use WebGL which is a                                technology that not even altered new                                anymore to when the real-time graphic in                                the browser so in terms of software                                architecture the what we are doing                                before it's essentially this practically                                everything happens on the server                                 including taking over them data creating                                                                                                        images using open share this also                                 implies that the server used to have for                                 example a graphics accelerator hardware                                 which is not the case for many servers                                 that you can easily range and it also                                 means that the server has a lot to do                                 for each of these raster images which                                 limited the geographic coverage of the                                 service so what we want to do instead is                                 to create the                                                        server but to have send suicide - it's a                                 client and the client and handles the                                 rendering using WebGL of course this                                 raises the question why not do                                 everything on the client I mean we could                                 Church then open Twitter data to the                                 client and well do the other steps in                                 the browser there are essentially two                                 reasons for not doing this yet one is                                 that the performance isn't quite there                                 yet so creating the                                                      of time relatively speaking and this is                                 something that doesn't really make one                                 interactive experience yet the other is                                 that autumns word it's using a software                                 tag that not particularly suited for                                 this kind of setup so it's something                                 that I want to eventually be doing but                                 at the moment this is the intermediate                                 goal okay originally my intention had                                 been to like be able to show                                 a working version that already published                                 and launched and everything this didn't                                 get quite done in time for this state of                                 the map so I only have a prototype to                                 show you but still I want to give you an                                 impression of what it's currently like                                 so this is a                                                            is where I'm living and yeah as you can                                 see this is rendered for your time in                                 the browser so you can as you would                                 expect like move the camera freely                                 around wherever you want it to be and                                 you also get an immediate impression of                                 some of the benefit like for example                                 this animated water wouldn't be possible                                 with the old technology you have tried a                                 lot of details that actually were always                                 fair but we're invisible like I mean you                                 can zoom in on the sports pictures if                                 you want far more closely than would                                 have been possible with the old                                 technology and there's a lot of things                                 that autumn toward us besides buildings                                 like rendering roads with lane markings                                 and so on and crossing we place randomly                                 located cars on parking spaces and so on                                 this kind of detail is actually                                 something that o'them to Virg want to do                                 and that now really actually possible to                                 do in the browser so I'm quite happy                                 about that we'll be coming back to that                                 later but I want to show you it's not                                 just working in my town it's also                                 working elsewhere because people have                                 been doing                                                               the world already these are all rendered                                 with the same technologies that I showed                                 you before I would like to treat it like                                 the stadium in the background where                                 people put really a lot of work into                                 details that yeah                                 and our finally possible to really                                 appreciate with or them to verge one                                 reason why I'm showing you four examples                                 of last slide here if this I fit our                                 model                                 this is not something that you can                                 realistically do in OpenStreetMap data                                 so instead are not even trying there's a                                 platform called the                                                     at this URL and you can upload                                          fare and link them from OpenStreetMap                                 and/or them to word Wills and place them                                 in the correct position based on this                                 link this can not only be used for                                 unique landmark it can also be used for                                 things like street furniture so for                                 example if set a particular type of park                                 bench or bath shader or something like                                 that you can also models within blend or                                 sketchup or something uploaded and link                                 it in order locations where it exists                                 okay back to the theory for a moment                                 this is a diagram I showed you before as                                 you can see we are sending                                           through the internet so in order to do                                 that with reasonable bandwidth                                 requirement we need to encode C somehow                                 and the option I've gone for versus is                                 protobuf ties with a custom quote of a                                 schema now using a custom format instead                                 of one of those that already existed                                 isn't an easy decision and it's                                 something that will probably change this                                 long term for compatibility reason but                                 for now it allows me to iterate more                                 quickly and it also allows me to do some                                 of the things that always m                                          using particularly healthily compared to                                 other client                                 this includes for example texture layers                                 including cholera protection layer that                                 OpenStreetMap data you have a lot of                                 variation so for example you can for                                 each building set tags that describes                                 the color the material of the building                                 and so on and these can be combined                                 freely so I mean you can have various                                 materials like glass or break or glass                                 and you can have arbitrary colors true                                 and these need to be able to be freely                                 combined and the way this works is that                                 the building geometry is only                                 transmitted                                 to the client ones along with a list of                                 texture images that should be pasted on                                 top of that geometry and the client                                 attend responds Barefoot's playings is                                 accordingly this is also something we                                 can see in the demo so you can see that                                 the buildings have various colors and so                                 on and these are essentially the same                                 material plus Keller values that                                 transmits to the client and send used to                                 display the buildings correctly we can                                 also see like down here on the road the                                 road markings which use the same concept                                 so you have an asset texture which could                                 depending on the tags or to be a                                 concrete texture or a cobblestone                                 texture something like that and you have                                 serious road markings drawn on top which                                 are freely combined with any of the                                 other types of surface below it okay                                 while they're talking about texture data                                 textures are usually including in autumn                                 to verge raster images or their PNG                                 files or JPEG files but we can order you                                 with vector graphics or textured now and                                 we can order use procedural textures                                 once that's been recently added a text                                 texture so for example in this traffic                                 kind text number five isn't actually                                 part of the image but it's written by                                 the client on top of the sign which is                                 very useful for signs that have a lot of                                 different possible tech so if you                                 imagine for example one of the signs                                 that I posted at the entrance when you                                 drive into a city then you wouldn't want                                 to create an individual image for every                                 city on the planet instead you just look                                 at the OpenStreetMap data and look at                                 the value of the name tag and write the                                 name onto that sign as needed                                 this was actually added just the summer                                 during the summer of code by Asin and                                 she also added a lot of other huge                                 features related to a traffic sign so                                 for example detonation time rendering                                 but also the ability to define traffic                                 signs                                 see look in a particular country without                                 having to change the source code of                                 autumn to verge this is something we                                 would also like health care so if you                                 want autumn prover to render your                                 country's traffic signs correctly you                                 can do that without actually having to                                 change the odds on favorite source code                                 just by editing our map style there are                                 also a few other features like deriving                                 traffic signs from asset act like                                 machspeed tags that's optionally                                 possible now so if you haven't already I                                 recommend you read thousands blog post                                 about this which are quite informative                                 another feature that's now done on the                                 client instead of the server is                                 extrusion autumns word makes heavy use                                 of extrusion which is essentially the                                 concept of defining the cross section of                                 a shape and then drawing that shape                                 along OpenStreetMap way or some other                                 kind of path so this water slide is                                 created by extruding the waterslide                                 cross section along the OpenStreetMap                                 way that someone has mapped and this is                                 done on decline so we don't transmit or                                 the individual triangles making up this                                 model in that we just transmits a much                                 lower amount of data for the cross                                 section and third pass there's another                                 example of what we do with shape                                 extrusions that I would also like to                                 show you in the actual client of it                                 let's go over here so if you look at                                 this we wouldn't really want to transmit                                 all the triangles making abscess rich                                 railing for example to the client                                 because that would be a lot of data this                                 order hint at one of the things we                                 actually would still like to do before                                 it was launched which is work on                                 performance optimizations at the moment                                 we don't really have a concept of level                                 of details that mean all the details of                                 this free training around that even if                                 you're far away from it which is not                                 ideal and                                 have negative effect on the frame rate                                 that's currently possible so it isn't                                 something we are there working on at the                                 moment to have dynamic level of detail                                 depending on how far you are away from                                 an object okay there are other                                 optimizations we have done with the                                 format like in tenting so if there's a                                 tree we don't send the full geometry of                                 the tree for everything your intent of                                 it and that we just tell the client                                 through the for our tree it look like                                 this is a list of places where trees are                                 and the clients then just copy of the                                 trees                                 wherever they are needed although the                                 youthful podcast and variedly Perth and                                 many other objects where that only one                                 or a few variations of the object you                                 know there's other optimizations that                                 are also quite common other graphics                                 contact like index geometry and variable                                 length encoding a coordinate which is                                 made easily possible by a throw to bus                                 just as a list of things we been                                 thinking about have been working on even                                 and some of the things actually work in                                 autumn to word already but not in the                                 client yet so for example the terrain                                 elevation of some things that don't                                 revert itself can do but we won't add it                                 into the client before the first person                                 is launched because that's still a bit                                 of work to do to actually get that tour                                 yeah look good and run smoothly other                                 things like additional light sources or                                 animations already work to some extent                                 and yeah some features that would also                                 be cool is of course simply inter                                 tagging support for seamless indoor and                                 outdoor buildings or even adding a VR                                 mode which is also not that hot nowadays                                 because many framework actually have                                 that built in to an extent okay so                                 that's it I hope you liked it and you                                 will be staying tuned for the actual                                 launch of the program for now I'm                                 looking forward to your question thanks                                 for your attention                                 [Applause]                                 excellent okay we have a couple minutes                                 for questions                                 [Music]                                 so when I saw your list of output                                 formats my what immediately popped into                                 my head is gltf is becoming more or less                                 the standard now for our models are                                 there any plans to make that possible                                 output format I've not worked on it yet                                 but it definitely would be one of the                                 most likely candidate for additional                                 format in the future                                 Jennsen                                 yes I see that the online pages are                                 limited to Germany online images are                                 limited to Germany I don't see images                                 for foreign countries yeah                                 one of the limitations of the current                                 technology because the server has so                                 much work to do to render the images on                                 the server side we actually haven't been                                 able to support more than like Germany                                 and a few AG adjacent countries yet so                                 it's something I hope will be possible                                 visible to a client because it                                 drastically reduces the server load so                                 that we might actually be able to the                                 porch eventually the whole verge I'm                                 hoping that this will be possible any                                 other questions I just I have a question                                 I'm curious if you're gonna have terrain                                 support or it's not something you've                                 thought about for elevations and such                                 within cities this is something that                                 autumn devote itself has taught some                                 exchange so it allows you to place a                                 folder with a                                                          it will send users who actually render                                 terrain there are a few challenges if                                 you want to actually have it look nice I                                 mean for example you don't want to roads                                 to be placed like on the side of the                                 mountain you want to actually make sure                                 that the roads are still flat and that                                 breathing entrances honor at ground                                 level so until these teachers work as I                                 would like them to or for the moment I'm                                 keeping it flat but of course eventually                                 we want terrain because it's an                                 essential part of the                                               do you think with enough performance                                 optimizations you might eventually                                 support like a light source a Sun and                                 shadows and stuff or with that is that                                 unrealistic for WebGL in the browser I                                 mean I think the light source is                                 relatively easy so think like normal                                 shadows and ambient occlusion and think                                 like that I believe will be easily                                 feasible I'm not sure yet if we can also                                 do lots of light sort of like having                                 each street lamp actually image                                 individualized but think like just                                 having a dynamically located Sun                                 depending on time of day and that that                                 is I believe easily here into our master                                 program a continuation on me out on the                                 terrain one of the local shopping                                 centres as is built up against the side                                 of a cliff hence you have a door at the                                 at one ground level then five levels up                                 you have a door on the other side also                                 at street level it would be really good                                 if that could be rendered I didn't quite                                 get the beginning of one of our local                                 shopping centre shopping mall is built                                 up against the side of a cliff so you                                 have a ground level here the building is                                 here and then you have an exit another                                 ground level higher up being able to                                 render that in                                                    fantastic it depends a bit on how it's                                 mapped I mean if it map there's a finger                                 buildings and there are definitions for                                 what the how the ground level is defined                                 in terms of the simple                                              tagging scheme if it's might of a                                 building then it's difficult because it                                 means that that                                 it relies on the terrain being accurate                                 enough to like line up the neighboring                                 buildings correctly and because the                                 terrain isn't actually from                                 OpenStreetMap but from some answer data                                 source it's likely that it won't fit fit                                 perfectly with each other so I've always                                 kept these kinds of problem to the back                                 of my mind and I hope that someday we                                 will be able to like add tags that allow                                 me then to adjust the elevation                                 correctly but for now this shot doesn't                                 forego it down to luck yes with yes for                                 now with                                                             stuck to flat places okay thank you                                 maybe we have time for one more question                                 okay let's thank our speaker again                                 you
YouTube URL: https://www.youtube.com/watch?v=c1laX2W9RO8


