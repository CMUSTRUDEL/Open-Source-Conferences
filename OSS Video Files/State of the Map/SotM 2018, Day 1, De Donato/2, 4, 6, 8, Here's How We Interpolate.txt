Title: 2, 4, 6, 8, Here's How We Interpolate
Publication date: 2018-09-21
Playlist: SotM 2018, Day 1, De Donato
Description: 
	Julian Simioni (geocode.earth), State of the Map 2018
https://2018.stateofthemap.org/2018/T128-2__4__6__8__Here_s_How_We_Interpolate

The work done by our community to build the OpenStreetMap dataset is incredible but like any data project, it will never “be done”. Our world is constantly changing and we need tools that help us make the most of what we have. Address interpolation is one of those tools.

In this talk we’ll explore the following questions:

What is Address Interpolation?
How does it work in OpenStreetMap?
I’m a developer! What can I do to help address interpolation?
I’m an editor! What can I do to make address interpolation better?
How can I use OpenStreetMap to get to dinner?
This will be a first-hand account of the benefits and lessons learned from building the address interpolation engine for the Pelias Geocoder based heavily on OpenStreetMap data. You’ll walk away with the knowledge of how OpenStreetMap, with address interpolation, can help you find that new cafe before anyone else.
Captions: 
	00:00:00,000 --> 00:00:04,650
hi everyone how you doing it's good to

00:00:03,300 --> 00:00:08,370
be in Italy where my last name is

00:00:04,650 --> 00:00:10,710
pronounced perfectly every time so I

00:00:08,370 --> 00:00:13,920
have to explain the joke of my title

00:00:10,710 --> 00:00:16,800
first at least in the US there's like a

00:00:13,920 --> 00:00:18,000
children's saying I don't really know

00:00:16,800 --> 00:00:20,070
what to call it it's not long enough to

00:00:18,000 --> 00:00:21,990
be a song but like in when you're a

00:00:20,070 --> 00:00:24,689
young kid and you want the class to

00:00:21,990 --> 00:00:27,240
express you know appreciation for

00:00:24,689 --> 00:00:30,150
someone you chant two four six eight who

00:00:27,240 --> 00:00:34,040
do we appreciate so if you don't have

00:00:30,150 --> 00:00:34,040
that in your country you should

00:00:34,079 --> 00:00:39,390
and fortunately the rhyme works with

00:00:36,809 --> 00:00:41,850
interpolate and eight as well and you'll

00:00:39,390 --> 00:00:44,670
see how the numbers play into everything

00:00:41,850 --> 00:00:45,840
as well so I used to work at maps in

00:00:44,670 --> 00:00:48,660
we'll get this over with

00:00:45,840 --> 00:00:50,579
right at the start the work for the

00:00:48,660 --> 00:00:52,079
Pelle SEO coder which which this is all

00:00:50,579 --> 00:00:55,079
about and the work on interpolation was

00:00:52,079 --> 00:00:59,039
done there and of course as many of you

00:00:55,079 --> 00:01:01,079
may know Matson is no more it's very sad

00:00:59,039 --> 00:01:06,030
you can ask me about that maybe later

00:01:01,079 --> 00:01:07,350
tonight and but for me personally I'm

00:01:06,030 --> 00:01:10,409
continuing to work on the Pelle s geo

00:01:07,350 --> 00:01:12,750
coder we've a teammate and I have

00:01:10,409 --> 00:01:15,420
started a new company to continue and

00:01:12,750 --> 00:01:16,770
hopefully make it our day job for a

00:01:15,420 --> 00:01:17,939
little while longer and it's been a fun

00:01:16,770 --> 00:01:20,610
ride so far if you want to hear more

00:01:17,939 --> 00:01:22,619
about that definitely ask me as well

00:01:20,610 --> 00:01:25,229
we're not really here to talk about that

00:01:22,619 --> 00:01:27,869
we're here to talk about geocoding

00:01:25,229 --> 00:01:30,420
itself so here's our little demo of

00:01:27,869 --> 00:01:32,159
autocomplete for four peles there's a

00:01:30,420 --> 00:01:36,180
link to really start and learn more if

00:01:32,159 --> 00:01:38,640
you'd like to learn about what we do and

00:01:36,180 --> 00:01:41,939
the approach that we've taken and the

00:01:38,640 --> 00:01:44,399
pros and cons and all the fun things and

00:01:41,939 --> 00:01:48,090
as we just we just saw for 20 whole

00:01:44,399 --> 00:01:51,720
minutes geo coders love addresses they

00:01:48,090 --> 00:01:53,790
are a great way to find places right

00:01:51,720 --> 00:01:55,590
most of us are trained to write

00:01:53,790 --> 00:01:57,210
addresses it's different in every

00:01:55,590 --> 00:02:00,180
country but in each country it's maybe

00:01:57,210 --> 00:02:02,159
mostly similar hopefully not not so

00:02:00,180 --> 00:02:03,600
perfectly similar as you might like if

00:02:02,159 --> 00:02:08,009
you're writing the code to handle it but

00:02:03,600 --> 00:02:11,910
similar enough and so addresses where

00:02:08,009 --> 00:02:14,240
they do exist are great for finding the

00:02:11,910 --> 00:02:18,740
place that we all are looking for

00:02:14,240 --> 00:02:21,900
this is a account of addresses in in a

00:02:18,740 --> 00:02:24,240
standard Pelle s build we import several

00:02:21,900 --> 00:02:25,650
different data sources so we have quite

00:02:24,240 --> 00:02:28,260
a few a lot of them come from open

00:02:25,650 --> 00:02:29,610
addresses which is a administrative data

00:02:28,260 --> 00:02:32,610
directive from cities so that's really

00:02:29,610 --> 00:02:34,320
nice and then I don't have the numbers

00:02:32,610 --> 00:02:37,170
with me for just what's from

00:02:34,320 --> 00:02:38,600
OpenStreetMap versus what's not but I

00:02:37,170 --> 00:02:41,160
would I think they're actually

00:02:38,600 --> 00:02:42,120
surprisingly similar to the numbers you

00:02:41,160 --> 00:02:44,250
might have just seen there's somewhere

00:02:42,120 --> 00:02:47,010
around I think we imported about sixty

00:02:44,250 --> 00:02:48,090
million addresses from OpenStreetMap so

00:02:47,010 --> 00:02:50,400
we got to do a little bit better there

00:02:48,090 --> 00:02:53,460
to catch up if you want to check out

00:02:50,400 --> 00:02:56,100
these numbers there's a link but even

00:02:53,460 --> 00:02:59,880
with five hundred million globally

00:02:56,100 --> 00:03:05,280
that's not enough this is a graph of

00:02:59,880 --> 00:03:08,160
address coverage per country and people

00:03:05,280 --> 00:03:12,150
who know about such things who make it

00:03:08,160 --> 00:03:15,540
their goal to estimate say that about

00:03:12,150 --> 00:03:17,100
two people per address which is one half

00:03:15,540 --> 00:03:19,230
an address per person just to make the

00:03:17,100 --> 00:03:20,940
graph a little bit easier to read where

00:03:19,230 --> 00:03:23,700
higher is better about half an address

00:03:20,940 --> 00:03:25,800
per person is about what you expect for

00:03:23,700 --> 00:03:27,780
good address coverage that's the red

00:03:25,800 --> 00:03:29,430
line and you can see there's a couple

00:03:27,780 --> 00:03:32,340
countries doing great Netherlands

00:03:29,430 --> 00:03:34,410
Denmark Australia they just added an

00:03:32,340 --> 00:03:35,940
address import of their entire country

00:03:34,410 --> 00:03:38,790
every address in the entire country so

00:03:35,940 --> 00:03:40,050
kudos to them Norway Estonia Finland

00:03:38,790 --> 00:03:41,400
everyone else has at least a little bit

00:03:40,050 --> 00:03:43,920
of work to do

00:03:41,400 --> 00:03:45,810
and this is only you notice there's way

00:03:43,920 --> 00:03:47,459
more countries that are on here the

00:03:45,810 --> 00:03:49,080
graph doesn't get any better if it were

00:03:47,459 --> 00:03:52,110
to extend off the side of the screen as

00:03:49,080 --> 00:03:53,340
you might imagine so we have this dual

00:03:52,110 --> 00:03:58,080
problem if there's a lot of addresses

00:03:53,340 --> 00:03:59,550
but not nearly enough and that's a

00:03:58,080 --> 00:04:01,530
problem that's existed for a long time

00:03:59,550 --> 00:04:03,540
and it might be useful to first look at

00:04:01,530 --> 00:04:07,050
how this problem was solved a little

00:04:03,540 --> 00:04:09,830
while ago so this is a photo of some

00:04:07,050 --> 00:04:11,069
some folks at the the US Census Bureau

00:04:09,830 --> 00:04:13,140
who

00:04:11,069 --> 00:04:15,239
Ben you know they've been tasked with

00:04:13,140 --> 00:04:16,799
figuring out all sorts of things about a

00:04:15,239 --> 00:04:18,269
fairly large country for a long time

00:04:16,799 --> 00:04:21,030
since long before computers could really

00:04:18,269 --> 00:04:22,380
play much of a role I'd like to think

00:04:21,030 --> 00:04:24,000
they're discussing postal codes or

00:04:22,380 --> 00:04:25,919
something like we just had some

00:04:24,000 --> 00:04:27,150
discussion about how how troublesome

00:04:25,919 --> 00:04:29,210
they can be

00:04:27,150 --> 00:04:31,590
it's definitely worthy of its own talk

00:04:29,210 --> 00:04:34,289
so they had this problem they wanted to

00:04:31,590 --> 00:04:37,169
be able to at least estimate addresses

00:04:34,289 --> 00:04:40,229
all over a large country they didn't

00:04:37,169 --> 00:04:41,910
even have the computers to handle 500

00:04:40,229 --> 00:04:44,190
million addresses if they had them and

00:04:41,910 --> 00:04:48,180
they certainly didn't have 500 million

00:04:44,190 --> 00:04:52,349
addresses so they needed to estimate

00:04:48,180 --> 00:04:53,639
right this is a photo of 1300 people

00:04:52,349 --> 00:04:56,190
were working at one point making paper

00:04:53,639 --> 00:04:58,759
maps to build the data sets that were

00:04:56,190 --> 00:05:00,539
required just to get decent

00:04:58,759 --> 00:05:02,669
understanding of where addresses were in

00:05:00,539 --> 00:05:07,349
the u.s. probably one person with QGIS

00:05:02,669 --> 00:05:08,550
now so what they built was it came

00:05:07,349 --> 00:05:09,419
through a bunch of different names and

00:05:08,550 --> 00:05:11,970
it eventually ended up being called

00:05:09,419 --> 00:05:15,949
tiger and it got this amazing old school

00:05:11,970 --> 00:05:18,090
logo which is really a work of art and

00:05:15,949 --> 00:05:19,650
Tiger includes many many different

00:05:18,090 --> 00:05:21,419
things but the most important thing that

00:05:19,650 --> 00:05:23,490
it includes oh by the way if you want to

00:05:21,419 --> 00:05:26,280
see more cool old photos I'll post the

00:05:23,490 --> 00:05:28,199
slides there on Pinterest which is

00:05:26,280 --> 00:05:32,669
really interesting but they're great

00:05:28,199 --> 00:05:34,470
photos so what Tiger made is is an

00:05:32,669 --> 00:05:38,909
interpolation data set an address range

00:05:34,470 --> 00:05:40,409
data set right and what that is is for

00:05:38,909 --> 00:05:43,949
every segment of a street that you care

00:05:40,409 --> 00:05:45,240
about store what the beginning address

00:05:43,949 --> 00:05:46,919
would be and what the end address would

00:05:45,240 --> 00:05:50,009
be and nothing about the actual

00:05:46,919 --> 00:05:52,620
addresses themselves and so these data

00:05:50,009 --> 00:05:55,919
sets are I don't know for the US today

00:05:52,620 --> 00:05:58,800
tens of megabytes not enormous so

00:05:55,919 --> 00:06:03,210
reasonable to work on in a computer of

00:05:58,800 --> 00:06:04,680
of your and and reasonably accurate

00:06:03,210 --> 00:06:06,180
right we've all gotten directions

00:06:04,680 --> 00:06:07,349
somewhere and you at least get to the

00:06:06,180 --> 00:06:11,550
right street with an address that's

00:06:07,349 --> 00:06:13,919
maybe not perfect so we were thinking on

00:06:11,550 --> 00:06:15,419
the peláez team a while back Tiger is

00:06:13,919 --> 00:06:17,400
great in the United States but there's a

00:06:15,419 --> 00:06:19,560
whole world out there some countries do

00:06:17,400 --> 00:06:22,409
have interpolation datasets already many

00:06:19,560 --> 00:06:23,639
don't but we thought it would be

00:06:22,409 --> 00:06:26,099
interesting to

00:06:23,639 --> 00:06:28,830
attempt to build an interpolation

00:06:26,099 --> 00:06:30,930
dataset from the data that's already out

00:06:28,830 --> 00:06:32,939
there and so to do that you need a

00:06:30,930 --> 00:06:35,279
couple things you need you need streets

00:06:32,939 --> 00:06:37,340
and OpenStreetMap is it's in the name I

00:06:35,279 --> 00:06:40,050
mean there's pretty good street coverage

00:06:37,340 --> 00:06:43,110
and you need addresses and we just saw

00:06:40,050 --> 00:06:44,580
this there's 80 million in in

00:06:43,110 --> 00:06:46,259
OpenStreetMap and growing every day and

00:06:44,580 --> 00:06:48,389
that doesn't even count OpenStreetMap

00:06:46,259 --> 00:06:51,330
supports interpolation ranges as well

00:06:48,389 --> 00:06:54,020
and we thought it would be nice to to be

00:06:51,330 --> 00:06:56,400
able to import open addresses as well

00:06:54,020 --> 00:06:58,319
I'll use the l word and say that the

00:06:56,400 --> 00:07:01,860
licensing of that is quite interesting

00:06:58,319 --> 00:07:04,710
did new geo coding guidelines say that

00:07:01,860 --> 00:07:07,020
it should it would not fall under the

00:07:04,710 --> 00:07:09,800
ODB l that resulting data set but I

00:07:07,020 --> 00:07:12,180
think if it does that's also great too

00:07:09,800 --> 00:07:14,550
and so what do you get when you combine

00:07:12,180 --> 00:07:17,129
those and build an interpolation data

00:07:14,550 --> 00:07:19,740
set for the parts of the world that we

00:07:17,129 --> 00:07:22,169
have coverage for you get the pellis

00:07:19,740 --> 00:07:23,580
interpolation engine here's the link on

00:07:22,169 --> 00:07:25,349
github where you can see little bit more

00:07:23,580 --> 00:07:26,870
and I'm going to show you kind of how it

00:07:25,349 --> 00:07:30,810
works

00:07:26,870 --> 00:07:32,699
so here is our demo interface it's like

00:07:30,810 --> 00:07:33,779
a really more of a debug interface I

00:07:32,699 --> 00:07:34,770
guess in a demo interface but it's

00:07:33,779 --> 00:07:38,180
really useful for figuring out what's

00:07:34,770 --> 00:07:40,589
going on this is a street here in Nano

00:07:38,180 --> 00:07:43,110
across towns where I found one that was

00:07:40,589 --> 00:07:45,629
a good couple things to show off at

00:07:43,110 --> 00:07:48,360
first so you could see some blue and red

00:07:45,629 --> 00:07:49,680
points those are address points that we

00:07:48,360 --> 00:07:55,139
know about from these are all from Open

00:07:49,680 --> 00:07:56,849
Street Map we have two as you can see

00:07:55,139 --> 00:08:00,029
with the 15 in the lower left you have

00:07:56,849 --> 00:08:01,800
to map where it belongs on the actual

00:08:00,029 --> 00:08:03,060
street right that's kind of a big

00:08:01,800 --> 00:08:06,449
building the address point is in the

00:08:03,060 --> 00:08:08,939
center for interpolation is useful to to

00:08:06,449 --> 00:08:11,490
project it onto the street and then the

00:08:08,939 --> 00:08:14,039
red and the blue it's definitely useful

00:08:11,490 --> 00:08:16,409
to detect left and right side of the

00:08:14,039 --> 00:08:19,529
street you'll see why in a minute

00:08:16,409 --> 00:08:21,240
and so this is showing kind of what we

00:08:19,529 --> 00:08:22,589
what you end up having to store for each

00:08:21,240 --> 00:08:24,719
address this is actually every known

00:08:22,589 --> 00:08:26,669
address it's basically what I just said

00:08:24,719 --> 00:08:29,219
where where it's from what's the house

00:08:26,669 --> 00:08:32,250
number latitude and longitude and

00:08:29,219 --> 00:08:33,990
projected as well and what you get when

00:08:32,250 --> 00:08:36,020
you combine all that together for

00:08:33,990 --> 00:08:38,390
streets and then you add some math

00:08:36,020 --> 00:08:40,690
do the interpolation in between is you

00:08:38,390 --> 00:08:44,210
can put in a dress that doesn't exist

00:08:40,690 --> 00:08:46,250
and get an estimate of where it will be

00:08:44,210 --> 00:08:49,190
so in this case if there were a to a new

00:08:46,250 --> 00:08:52,160
building comes in maybe you know it

00:08:49,190 --> 00:08:53,630
wasn't mapped and it's actually there it

00:08:52,160 --> 00:08:56,000
would be approximately there and this

00:08:53,630 --> 00:08:58,430
this is kind of nice it can estimate in

00:08:56,000 --> 00:09:02,300
between the 1 and the 3 rather than say

00:08:58,430 --> 00:09:03,530
for example with the tiger data set it

00:09:02,300 --> 00:09:05,930
only knows the address range for the

00:09:03,530 --> 00:09:07,520
entire street so if you have a long a

00:09:05,930 --> 00:09:08,750
long street segment you can get a little

00:09:07,520 --> 00:09:11,000
bit more accuracy even with a few

00:09:08,750 --> 00:09:14,450
addresses so kind of nice and all from

00:09:11,000 --> 00:09:16,820
OpenStreetMap data doesn't require 1,300

00:09:14,450 --> 00:09:20,930
people making paper maps to to build

00:09:16,820 --> 00:09:22,430
that data set in advance again 14 kind

00:09:20,930 --> 00:09:24,410
of on the other side closer to the 15

00:09:22,430 --> 00:09:28,100
than the 11 so I think that math works

00:09:24,410 --> 00:09:31,220
out we've tested it a little bit not all

00:09:28,100 --> 00:09:33,650
streets are lines as you may be aware of

00:09:31,220 --> 00:09:35,360
straight lines I didn't mention it but

00:09:33,650 --> 00:09:37,250
in the last slide you may have seen some

00:09:35,360 --> 00:09:39,200
yellow points you see a few more of them

00:09:37,250 --> 00:09:42,350
here and that's where there is curvature

00:09:39,200 --> 00:09:44,330
into the street this is in New Jersey in

00:09:42,350 --> 00:09:45,680
New York and if you want to interpolate

00:09:44,330 --> 00:09:48,320
properly across the street you can see

00:09:45,680 --> 00:09:50,240
here we're looking for 22 and it it

00:09:48,320 --> 00:09:52,820
doesn't interpolate say between the 14

00:09:50,240 --> 00:09:55,370
and the 23 or between the 35 and the 2

00:09:52,820 --> 00:09:56,840
at the be at the ends that would put you

00:09:55,370 --> 00:10:00,410
in the middle of a forest in either case

00:09:56,840 --> 00:10:02,150
that would be not ideal but if you take

00:10:00,410 --> 00:10:05,210
advantage of the geometry that's in

00:10:02,150 --> 00:10:06,770
OpenStreetMap you can do that here's an

00:10:05,210 --> 00:10:09,050
example of a really long street this is

00:10:06,770 --> 00:10:10,280
near Boulder Colorado there was a state

00:10:09,050 --> 00:10:12,410
of the map conference there last year

00:10:10,280 --> 00:10:15,710
maybe some of the people here were there

00:10:12,410 --> 00:10:18,800
it was very very beautiful this is like

00:10:15,710 --> 00:10:21,710
a 50 kilometer long street so lots of

00:10:18,800 --> 00:10:24,260
fun here's a really fun complicated

00:10:21,710 --> 00:10:28,130
example of mapping two streets here in

00:10:24,260 --> 00:10:30,920
Milano this is a big Gaza nearby and you

00:10:28,130 --> 00:10:32,330
can see that that there's been a lot of

00:10:30,920 --> 00:10:35,180
work done in OpenStreetMap

00:10:32,330 --> 00:10:38,030
to actually correctly identify this

00:10:35,180 --> 00:10:39,470
really complicated street and you can

00:10:38,030 --> 00:10:41,780
see there's a few errors maybe there are

00:10:39,470 --> 00:10:44,690
bugs maybe there's duplicate addresses

00:10:41,780 --> 00:10:46,190
and OpenStreetMap I see two twelves down

00:10:44,690 --> 00:10:46,690
there and they say they're on opposite

00:10:46,190 --> 00:10:49,060
sides

00:10:46,690 --> 00:10:50,230
when they definitely aren't so maybe you

00:10:49,060 --> 00:10:51,760
work something worth checking out this

00:10:50,230 --> 00:10:53,850
afternoon if anyone's looking for a

00:10:51,760 --> 00:10:56,230
stroll

00:10:53,850 --> 00:10:58,150
so here we get to why odd and even

00:10:56,230 --> 00:11:00,840
matters this is from the house numbering

00:10:58,150 --> 00:11:03,520
wikipedia page which will repeatedly

00:11:00,840 --> 00:11:06,840
surprise you at how much complexity

00:11:03,520 --> 00:11:11,620
there is yes someone laughs knowingly

00:11:06,840 --> 00:11:14,440
there's really two common orderings for

00:11:11,620 --> 00:11:16,300
addresses the first one the top one is

00:11:14,440 --> 00:11:19,210
like the zigzag pattern it's really

00:11:16,300 --> 00:11:21,130
common probably the most the most common

00:11:19,210 --> 00:11:23,380
especially in Europe I really could not

00:11:21,130 --> 00:11:25,270
find too many examples that weren't like

00:11:23,380 --> 00:11:27,340
this which is nice because it's the most

00:11:25,270 --> 00:11:30,430
straightforward for from a mathematical

00:11:27,340 --> 00:11:33,730
standpoint right but there's also the

00:11:30,430 --> 00:11:35,260
clockwise option on the bottom where the

00:11:33,730 --> 00:11:37,030
house numbers go up on one side and down

00:11:35,260 --> 00:11:39,240
on the other and obviously if you don't

00:11:37,030 --> 00:11:43,260
account for that any attempts to

00:11:39,240 --> 00:11:45,310
interpolate will be met with sadness

00:11:43,260 --> 00:11:48,070
here's an example of that this is in

00:11:45,310 --> 00:11:50,170
Berlin you can see there's one right

00:11:48,070 --> 00:11:51,520
next to 108 and if you look they're

00:11:50,170 --> 00:11:54,760
going up on one side down on the other

00:11:51,520 --> 00:11:56,680
and a couple kilometers off to the right

00:11:54,760 --> 00:11:58,660
on the screen is 50 where it turns back

00:11:56,680 --> 00:12:00,400
around so that's pretty fun

00:11:58,660 --> 00:12:02,050
so let's look at an example where

00:12:00,400 --> 00:12:04,480
there's not good coverage right in Milan

00:12:02,050 --> 00:12:06,790
and in Berlin we know about most of the

00:12:04,480 --> 00:12:09,190
addresses this is just outside of

00:12:06,790 --> 00:12:10,750
Johannesburg in South Africa you can see

00:12:09,190 --> 00:12:12,870
it's a really busy city Johannesburg has

00:12:10,750 --> 00:12:15,670
like 10 million people but it's not

00:12:12,870 --> 00:12:16,870
completely mapped right there's there's

00:12:15,670 --> 00:12:19,810
buildings everywhere whether or not

00:12:16,870 --> 00:12:23,410
there's a building in osm this is Smith

00:12:19,810 --> 00:12:26,920
Street and there are two exactly two

00:12:23,410 --> 00:12:30,310
addresses on this big long street 111 at

00:12:26,920 --> 00:12:33,220
one end and 321 on the other and just

00:12:30,310 --> 00:12:34,720
from those two addresses you can

00:12:33,220 --> 00:12:36,700
interpolate somewhere in the middle so

00:12:34,720 --> 00:12:39,640
estimating where 175 is it would be

00:12:36,700 --> 00:12:41,470
about about there so I think that's

00:12:39,640 --> 00:12:43,390
really really cool for that middle

00:12:41,470 --> 00:12:46,530
ground where there there is some address

00:12:43,390 --> 00:12:48,700
coverage but not complete an

00:12:46,530 --> 00:12:51,070
interpolation data set bill from osm can

00:12:48,700 --> 00:12:54,160
have you can get a lot of a bang for

00:12:51,070 --> 00:12:55,830
your open data buck so to speak so I

00:12:54,160 --> 00:12:58,240
think that's pretty cool

00:12:55,830 --> 00:12:59,720
here's another example this is a New

00:12:58,240 --> 00:13:02,780
Delhi India

00:12:59,720 --> 00:13:05,330
same thing to two addresses really long

00:13:02,780 --> 00:13:06,350
street you can estimate where the

00:13:05,330 --> 00:13:08,420
address would be anywhere in between

00:13:06,350 --> 00:13:11,900
them note in this one there's there's

00:13:08,420 --> 00:13:14,750
more of the street off to the left you

00:13:11,900 --> 00:13:16,610
can't really make any informed choice

00:13:14,750 --> 00:13:18,800
about what's there you could guess but

00:13:16,610 --> 00:13:22,820
that would be more often wrong than

00:13:18,800 --> 00:13:25,190
right so that's not advisable here's a

00:13:22,820 --> 00:13:27,250
very sad example and if you look

00:13:25,190 --> 00:13:29,930
carefully at the map it's very nearby

00:13:27,250 --> 00:13:33,260
this is a street with just one address

00:13:29,930 --> 00:13:35,930
and unfortunately you cannot interpolate

00:13:33,260 --> 00:13:38,150
on a street with just one address so if

00:13:35,930 --> 00:13:39,590
someone is looking to add another

00:13:38,150 --> 00:13:41,240
address somewhere where it would have a

00:13:39,590 --> 00:13:43,040
big impact this little Street just north

00:13:41,240 --> 00:13:46,900
of the campus would be a good a good

00:13:43,040 --> 00:13:48,920
shot you know if you want more examples

00:13:46,900 --> 00:13:50,840
we're working on that I think it would

00:13:48,920 --> 00:13:52,010
be really cool to to find all the

00:13:50,840 --> 00:13:54,980
streets out there with exactly one

00:13:52,010 --> 00:13:56,900
address so not everything is going

00:13:54,980 --> 00:13:59,390
according to plan in the course of

00:13:56,900 --> 00:14:00,800
building this code and not everything

00:13:59,390 --> 00:14:02,830
well and if ever go according to plan on

00:14:00,800 --> 00:14:05,270
a geo coder so this will be sort of the

00:14:02,830 --> 00:14:08,780
rocket explosion montage part of the

00:14:05,270 --> 00:14:10,550
talk we were reminded very very quickly

00:14:08,780 --> 00:14:13,070
when we built this engine that not all

00:14:10,550 --> 00:14:15,610
addresses our numbers only this is in

00:14:13,070 --> 00:14:18,380
Queens in New York anyone from the area

00:14:15,610 --> 00:14:20,270
knows the pain of dealing with that area

00:14:18,380 --> 00:14:24,830
there's there's a hyphen in every every

00:14:20,270 --> 00:14:27,530
address here's an example of I think

00:14:24,830 --> 00:14:29,710
this was either disconnected roundabouts

00:14:27,530 --> 00:14:33,170
kind of on the left side over there or

00:14:29,710 --> 00:14:35,870
possibly a street segments the the OSM

00:14:33,170 --> 00:14:37,100
no or ways going and then in different

00:14:35,870 --> 00:14:38,660
directions you can see that the left

00:14:37,100 --> 00:14:40,640
what means what is left and right

00:14:38,660 --> 00:14:43,610
switches this one was fixed just

00:14:40,640 --> 00:14:45,020
entirely by updating osm data and now

00:14:43,610 --> 00:14:47,150
you can see there's a little bit better

00:14:45,020 --> 00:14:48,710
understanding of the roundabouts and odd

00:14:47,150 --> 00:14:51,170
and even is consistent on the whole

00:14:48,710 --> 00:14:52,760
street so that's really cool that would

00:14:51,170 --> 00:14:53,930
be another great I know there's tools

00:14:52,760 --> 00:14:56,480
out there are ready to do things like

00:14:53,930 --> 00:14:59,240
that detect ways that don't go in the

00:14:56,480 --> 00:15:01,670
right order consistently here's an

00:14:59,240 --> 00:15:03,110
example one of the components of

00:15:01,670 --> 00:15:06,290
interpolation you have to do textual

00:15:03,110 --> 00:15:07,850
matching on the street name and thus and

00:15:06,290 --> 00:15:09,950
the the name of the street on the

00:15:07,850 --> 00:15:13,560
address and the name of the street way

00:15:09,950 --> 00:15:15,630
itself street names are not unique you

00:15:13,560 --> 00:15:17,160
in a single city this is in Berlin I

00:15:15,630 --> 00:15:19,110
can't see the street name this is a

00:15:17,160 --> 00:15:20,460
really early version but suffice it to

00:15:19,110 --> 00:15:23,310
say there are two very different streets

00:15:20,460 --> 00:15:27,060
with exactly the same name the solution

00:15:23,310 --> 00:15:29,210
there is postal codes to at least

00:15:27,060 --> 00:15:31,380
differentiate them if the data is there

00:15:29,210 --> 00:15:33,120
here's an even better example this is

00:15:31,380 --> 00:15:35,730
all in New Jersey near New York

00:15:33,120 --> 00:15:39,060
lots of streets with the same name yeah

00:15:35,730 --> 00:15:41,850
very painful so what's coming in the

00:15:39,060 --> 00:15:44,610
future well you saw the demo at the

00:15:41,850 --> 00:15:46,710
beginning with autocomplete support in

00:15:44,610 --> 00:15:48,600
peles it doesn't support interpolated

00:15:46,710 --> 00:15:50,430
addresses right now you can imagine that

00:15:48,600 --> 00:15:53,720
since interpolation is already sort of

00:15:50,430 --> 00:15:56,040
guessing at what's happening guessing

00:15:53,720 --> 00:15:58,470
when you only have a few characters to

00:15:56,040 --> 00:16:00,180
go by maybe only a number is even harder

00:15:58,470 --> 00:16:04,580
than the general autocomplete problem

00:16:00,180 --> 00:16:06,900
which is already the stuff of nightmares

00:16:04,580 --> 00:16:08,130
we may be able to figure out something

00:16:06,900 --> 00:16:10,980
if you're interested in that I can tell

00:16:08,130 --> 00:16:14,160
you all about the pain of that at

00:16:10,980 --> 00:16:17,279
another time we also are not very good

00:16:14,160 --> 00:16:18,870
programmers so right now conflating all

00:16:17,279 --> 00:16:21,360
the addresses and all of these streets

00:16:18,870 --> 00:16:24,330
takes 16 days on the computers we've run

00:16:21,360 --> 00:16:26,700
it on it's pretty single-threaded right

00:16:24,330 --> 00:16:27,570
now so there's a lot of easy wins so it

00:16:26,700 --> 00:16:30,000
feels like we're running it on a

00:16:27,570 --> 00:16:32,640
computer like this is another old census

00:16:30,000 --> 00:16:34,620
photo that I found so but we swear it's

00:16:32,640 --> 00:16:37,170
very fast machine so that's something

00:16:34,620 --> 00:16:38,610
that will be nice so whoever makes the

00:16:37,170 --> 00:16:40,589
edit to add that address on the street

00:16:38,610 --> 00:16:44,220
nearby come back in a couple weeks and

00:16:40,589 --> 00:16:45,900
it should be good and then no OS I'm

00:16:44,220 --> 00:16:48,240
talk--i be complete without a list of

00:16:45,900 --> 00:16:50,010
what you can do to help streets is the

00:16:48,240 --> 00:16:52,890
obvious one adding streets the names are

00:16:50,010 --> 00:16:54,630
very important as well people on the

00:16:52,890 --> 00:16:57,180
ground looking at street signs are

00:16:54,630 --> 00:16:59,670
important again without the textual

00:16:57,180 --> 00:17:02,910
matching from address to the street you

00:16:59,670 --> 00:17:04,589
can't do interpolation adding extra

00:17:02,910 --> 00:17:06,540
streets wherever they adding extra

00:17:04,589 --> 00:17:08,310
addresses wherever possible is great

00:17:06,540 --> 00:17:11,400
there's a lot of I notice especially a

00:17:08,310 --> 00:17:14,790
lot of like restaurants and points of

00:17:11,400 --> 00:17:16,170
interest don't have their address that

00:17:14,790 --> 00:17:17,670
could be an easy way to map something

00:17:16,170 --> 00:17:19,110
that already exists and just get a

00:17:17,670 --> 00:17:20,910
little bit more address information and

00:17:19,110 --> 00:17:22,970
once again postal codes

00:17:20,910 --> 00:17:25,039
you can't interpolate or really ever

00:17:22,970 --> 00:17:27,919
estimate postal codes they're just

00:17:25,039 --> 00:17:30,470
basically a huge mystery to all people

00:17:27,919 --> 00:17:32,750
of the world again definitely worthy of

00:17:30,470 --> 00:17:34,280
its own talk so adding postal codes to

00:17:32,750 --> 00:17:35,929
existing addresses really helps for

00:17:34,280 --> 00:17:37,580
people that do need to use a postal code

00:17:35,929 --> 00:17:40,130
to find that address there's really

00:17:37,580 --> 00:17:43,070
nothing you can do to guess and if you

00:17:40,130 --> 00:17:45,440
want to get extra fancy there is a page

00:17:43,070 --> 00:17:48,049
on the OSM wiki I should have put the

00:17:45,440 --> 00:17:50,289
link in here all about the tags for

00:17:48,049 --> 00:17:54,320
interpolation osm has native support for

00:17:50,289 --> 00:17:56,690
interpolating from for creating

00:17:54,320 --> 00:18:00,679
interpolated ranges rather than adding

00:17:56,690 --> 00:18:02,480
addresses themselves so if you're in a

00:18:00,679 --> 00:18:05,090
pinch for time and you want to map a big

00:18:02,480 --> 00:18:07,070
long street at least a little bit using

00:18:05,090 --> 00:18:09,440
an interpolated interpolation range will

00:18:07,070 --> 00:18:12,500
work in nómine demand peles right out of

00:18:09,440 --> 00:18:14,630
the box which is really great and I and

00:18:12,500 --> 00:18:17,260
all my talks with a picture of my cat so

00:18:14,630 --> 00:18:17,260
thank you very much

00:18:22,799 --> 00:18:28,570
so Thank You Julian are there questions

00:18:25,779 --> 00:18:33,580
yes I saw that there were people taking

00:18:28,570 --> 00:18:36,039
them you said that you we oughta reorder

00:18:33,580 --> 00:18:38,289
the ways of a street to make your

00:18:36,039 --> 00:18:41,200
interpolation works does it does this

00:18:38,289 --> 00:18:43,720
mean that your software is not able to

00:18:41,200 --> 00:18:45,879
work with streets well some parts of the

00:18:43,720 --> 00:18:49,989
streets are one ways in different

00:18:45,879 --> 00:18:54,519
directions that's a great question

00:18:49,989 --> 00:18:56,019
I don't know offhand if you had if you

00:18:54,519 --> 00:18:58,539
know an example of that actually I'd

00:18:56,019 --> 00:19:02,049
love to test it out some other time

00:18:58,539 --> 00:19:05,830
there's so many examples of edge cases

00:19:02,049 --> 00:19:08,529
like that tricky streets we

00:19:05,830 --> 00:19:10,659
OpenStreetMap has really good handling

00:19:08,529 --> 00:19:12,580
of all of that and by following kind of

00:19:10,659 --> 00:19:14,919
the patterns of vocal street map tags

00:19:12,580 --> 00:19:18,970
and customs we've we've gotten pretty

00:19:14,919 --> 00:19:20,919
far so I think if it works in in other

00:19:18,970 --> 00:19:23,019
OS I'm software it should work I'm sure

00:19:20,919 --> 00:19:27,190
you can find something that breaks great

00:19:23,019 --> 00:19:29,070
question okay I have a about one

00:19:27,190 --> 00:19:31,809
specific case in in my country the

00:19:29,070 --> 00:19:35,379
typical standard error system is that we

00:19:31,809 --> 00:19:37,269
have even numbers on one side and also

00:19:35,379 --> 00:19:39,009
on the other side and they're not

00:19:37,269 --> 00:19:40,749
correlated at all so it's not like

00:19:39,009 --> 00:19:42,909
zigzag system maybe in the beginning of

00:19:40,749 --> 00:19:44,739
3t T's but in the end it's completely

00:19:42,909 --> 00:19:47,379
off actually I think you had one sample

00:19:44,739 --> 00:19:49,659
in this Boulder about that also where

00:19:47,379 --> 00:19:52,269
you were interpolating assuming that the

00:19:49,659 --> 00:19:55,330
numbering is kind of zigzag or that it

00:19:52,269 --> 00:19:57,700
makes sense to interpolate odd number

00:19:55,330 --> 00:20:00,639
between even ones but actually it

00:19:57,700 --> 00:20:02,789
doesn't and you end up completely wrong

00:20:00,639 --> 00:20:05,499
addresses you should be interpolated

00:20:02,789 --> 00:20:07,480
independently even and odd numbers have

00:20:05,499 --> 00:20:09,999
you considered this case sir yeah I

00:20:07,480 --> 00:20:13,359
think that would fall in handling of the

00:20:09,999 --> 00:20:16,029
of kind of the clockwise code that we

00:20:13,359 --> 00:20:17,350
have it basically allows addresses on

00:20:16,029 --> 00:20:19,029
the left or the right side of the street

00:20:17,350 --> 00:20:22,179
to be handled independently all right

00:20:19,029 --> 00:20:23,250
I'll go back to that one photo in in

00:20:22,179 --> 00:20:26,070
Berlin

00:20:23,250 --> 00:20:28,650
find it it's pretty visually right so if

00:20:26,070 --> 00:20:31,140
you didn't know that if you were looking

00:20:28,650 --> 00:20:34,560
for say eleven is a missing address here

00:20:31,140 --> 00:20:36,780
right if you didn't know that you

00:20:34,560 --> 00:20:37,920
couldn't say estimate between one and a

00:20:36,780 --> 00:20:39,660
hundred and eight which would get you

00:20:37,920 --> 00:20:41,340
nowhere right knowing that you should

00:20:39,660 --> 00:20:43,500
only look on the side on the on the

00:20:41,340 --> 00:20:46,170
right I think would handle most cases

00:20:43,500 --> 00:20:47,820
like that I think you should have kind

00:20:46,170 --> 00:20:50,010
of two phases first detect what is the

00:20:47,820 --> 00:20:53,670
system here it is not even an thought

00:20:50,010 --> 00:20:57,060
sites but something else and if it is

00:20:53,670 --> 00:20:58,860
even a thought system then you use like

00:20:57,060 --> 00:21:01,020
one algorithm and of course this kind of

00:20:58,860 --> 00:21:02,580
different one yeah that might be a third

00:21:01,020 --> 00:21:05,130
case we need to look at send me send me

00:21:02,580 --> 00:21:07,200
an example and we can see how gloriously

00:21:05,130 --> 00:21:09,420
it it breaks you had this Boulder

00:21:07,200 --> 00:21:12,330
example which actually has this kind of

00:21:09,420 --> 00:21:15,540
addressing and this one oh this one yeah

00:21:12,330 --> 00:21:18,330
you have this twenty-two oh that's true

00:21:15,540 --> 00:21:20,910
it should be actually after eighteen and

00:21:18,330 --> 00:21:27,600
between eighteen and whatever is softer

00:21:20,910 --> 00:21:29,520
that not between 23 and 19 so that's a

00:21:27,600 --> 00:21:31,230
cool example actually where 22 is

00:21:29,520 --> 00:21:33,060
probably how intricate the wrong place

00:21:31,230 --> 00:21:36,980
that is a good example well thank you

00:21:33,060 --> 00:21:40,380
we're debugging live on stage everyone

00:21:36,980 --> 00:21:44,190
hi thank you for your presentation I

00:21:40,380 --> 00:21:47,430
have some just a short question in

00:21:44,190 --> 00:21:49,770
previous presentation before is yours we

00:21:47,430 --> 00:21:56,880
could see that in Japan we have blocks

00:21:49,770 --> 00:22:00,450
of 19 known cysteine 119 house numbers

00:21:56,880 --> 00:22:03,210
in one block some cases are present in

00:22:00,450 --> 00:22:05,550
my country too so interpolation is not

00:22:03,210 --> 00:22:08,880
possible in these situations or eighties

00:22:05,550 --> 00:22:10,440
I would say it's not I actually checked

00:22:08,880 --> 00:22:12,000
Japan when I was looking for good

00:22:10,440 --> 00:22:14,760
examples for interpolation I think right

00:22:12,000 --> 00:22:17,640
now for what I think the reason that

00:22:14,760 --> 00:22:21,750
that interpolation for our interpolation

00:22:17,640 --> 00:22:24,480
doesn't work well there is his issues

00:22:21,750 --> 00:22:27,680
with with the the textual matching of

00:22:24,480 --> 00:22:30,000
the street name but I could be wrong but

00:22:27,680 --> 00:22:32,700
the problem with interpolation is it's

00:22:30,000 --> 00:22:35,340
always estimating what could be there an

00:22:32,700 --> 00:22:36,840
interesting thought experiment would be

00:22:35,340 --> 00:22:38,789
to figure out ways

00:22:36,840 --> 00:22:43,340
to say that there is definitively no

00:22:38,789 --> 00:22:46,140
address at this number one way might be

00:22:43,340 --> 00:22:47,700
maybe just indicate you know good

00:22:46,140 --> 00:22:49,590
coverage in an area and passed us a

00:22:47,700 --> 00:22:51,090
certain threshold don't try but

00:22:49,590 --> 00:22:53,429
interpolation is useful even in big

00:22:51,090 --> 00:22:55,080
cities where there's nearly full data

00:22:53,429 --> 00:22:56,970
coverage right new buildings are

00:22:55,080 --> 00:23:00,450
constructed all the time and having

00:22:56,970 --> 00:23:02,880
interpolation not necessarily correct

00:23:00,450 --> 00:23:04,679
missing data but just briefly you know

00:23:02,880 --> 00:23:06,840
how dated data is also useful so that

00:23:04,679 --> 00:23:11,820
would be really finding a happy medium

00:23:06,840 --> 00:23:13,049
there would be really interesting yeah

00:23:11,820 --> 00:23:14,820
thanks thanks for the talk

00:23:13,049 --> 00:23:17,149
and how question about the data

00:23:14,820 --> 00:23:21,120
processing because you mentioned like

00:23:17,149 --> 00:23:24,120
patias you guys import different data

00:23:21,120 --> 00:23:26,159
sources I wonder if you can share some

00:23:24,120 --> 00:23:31,380
experience about consolidation of these

00:23:26,159 --> 00:23:33,210
different data sources yeah so multiple

00:23:31,380 --> 00:23:35,399
data sources is a both a blessing and a

00:23:33,210 --> 00:23:36,980
curse you get more coverage overall but

00:23:35,399 --> 00:23:41,730
you have to deal with duplicates and

00:23:36,980 --> 00:23:46,740
disagreements there's no easy solutions

00:23:41,730 --> 00:23:50,250
it's a it's it's painful but it's it's

00:23:46,740 --> 00:23:54,090
worth it and in peles we you can always

00:23:50,250 --> 00:23:55,980
filter by data source is an option on

00:23:54,090 --> 00:23:57,149
all of the the different types of

00:23:55,980 --> 00:23:59,190
querying you can do which is really

00:23:57,149 --> 00:24:00,929
useful if you know you want

00:23:59,190 --> 00:24:06,149
OpenStreetMap data or you know you don't

00:24:00,929 --> 00:24:09,210
for example and then right now how we've

00:24:06,149 --> 00:24:12,149
generally set things up is we've had a

00:24:09,210 --> 00:24:13,740
we've built up a I don't know no rhyme

00:24:12,149 --> 00:24:15,120
or reason but really just empirical

00:24:13,740 --> 00:24:17,399
guidelines of what seemed to work well

00:24:15,120 --> 00:24:19,250
for say deduplicating if there's an

00:24:17,399 --> 00:24:21,480
address from two different data sources

00:24:19,250 --> 00:24:23,220
maybe one has a postal code and the

00:24:21,480 --> 00:24:25,409
other doesn't just pick the one with the

00:24:23,220 --> 00:24:27,000
postal code unless they were asking for

00:24:25,409 --> 00:24:28,049
a specific data source in which case

00:24:27,000 --> 00:24:32,850
give them whatever they asked for

00:24:28,049 --> 00:24:34,049
there's no perfect solution but at the

00:24:32,850 --> 00:24:36,000
very least getting to a point where

00:24:34,049 --> 00:24:39,690
having multiple data sets is always

00:24:36,000 --> 00:24:41,960
better than just having one is not too

00:24:39,690 --> 00:24:41,960
far away

00:24:42,250 --> 00:24:46,850
fascinating presentation thank you your

00:24:44,930 --> 00:24:49,900
unit analysis seems to be the street

00:24:46,850 --> 00:24:53,300
rather than the block face and I just

00:24:49,900 --> 00:24:54,530
wonder whether that's I mean the

00:24:53,300 --> 00:24:57,050
examples that were given that the odds

00:24:54,530 --> 00:24:58,460
will not necessarily line up with IVA

00:24:57,050 --> 00:25:00,320
evens

00:24:58,460 --> 00:25:01,670
there's also anomaly that you haven't

00:25:00,320 --> 00:25:04,130
mentioned which is how you deal with

00:25:01,670 --> 00:25:05,450
corner properties which have anomalous

00:25:04,130 --> 00:25:07,550
addresses because you can't tell which

00:25:05,450 --> 00:25:10,400
treat the rest will be on from any

00:25:07,550 --> 00:25:13,040
mechanical way and the final one was the

00:25:10,400 --> 00:25:14,540
missing addresses the United Kingdom is

00:25:13,040 --> 00:25:18,080
very superstitious we have very few

00:25:14,540 --> 00:25:20,390
number 13 s on streets and again you

00:25:18,080 --> 00:25:22,340
almost need to incorporate that into

00:25:20,390 --> 00:25:24,800
your interpolation schemes if you find

00:25:22,340 --> 00:25:26,059
suspicious numbers of 11 A's that's

00:25:24,800 --> 00:25:28,700
understandable

00:25:26,059 --> 00:25:31,340
but very interesting work thank you

00:25:28,700 --> 00:25:33,700
thank you yeah the the missing addresses

00:25:31,340 --> 00:25:36,140
will be an interesting problem to solve

00:25:33,700 --> 00:25:38,860
there are a lot of 13s in pelvis right

00:25:36,140 --> 00:25:46,160
now is what it is what I would gather

00:25:38,860 --> 00:25:48,370
okay so thank you Julian again thanks

00:25:46,160 --> 00:25:48,370

YouTube URL: https://www.youtube.com/watch?v=zefj5hn08Kw


