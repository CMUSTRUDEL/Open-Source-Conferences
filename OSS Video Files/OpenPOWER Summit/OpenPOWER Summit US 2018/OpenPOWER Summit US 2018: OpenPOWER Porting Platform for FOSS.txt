Title: OpenPOWER Summit US 2018: OpenPOWER Porting Platform for FOSS
Publication date: 2018-04-04
Playlist: OpenPOWER Summit US 2018
Description: 
	Lance Albertson, Director, Oregon State University Open Source Lab, discusses OpenPOWER porting platform for FOSS using OpenStack at OSUOSL at OpenPOWER Summit 2018.

For more information, please visit: http://www.openpowerfoundation.org
Captions: 
	00:00:00,949 --> 00:00:05,970
all right thank you for coming my name

00:00:04,380 --> 00:00:07,259
is Lance Albertson I'm the director of

00:00:05,970 --> 00:00:09,300
the open source lab at Oregon State

00:00:07,259 --> 00:00:12,330
University and here and here to talk to

00:00:09,300 --> 00:00:14,219
talk to you about all the open power

00:00:12,330 --> 00:00:15,509
porting that we've been doing for open

00:00:14,219 --> 00:00:19,289
source projects free and open source

00:00:15,509 --> 00:00:20,910
projects at the open source lab so as a

00:00:19,289 --> 00:00:22,289
summary I'm gonna kind of give you an

00:00:20,910 --> 00:00:25,320
introduction of what we do will be

00:00:22,289 --> 00:00:27,750
provide overall or open source reporting

00:00:25,320 --> 00:00:29,699
off operation that we have also talked

00:00:27,750 --> 00:00:31,230
about how we went around creating an

00:00:29,699 --> 00:00:33,600
open set platform to enable as many

00:00:31,230 --> 00:00:35,899
projects as we could in an easy and easy

00:00:33,600 --> 00:00:41,730
way and I'll also briefly talk about

00:00:35,899 --> 00:00:43,079
some continuous integration stuff that

00:00:41,730 --> 00:00:45,660
we were working on to kind of get going

00:00:43,079 --> 00:00:48,260
along with all of us as well so the

00:00:45,660 --> 00:00:50,399
start out what is the open source lab

00:00:48,260 --> 00:00:53,190
we're an infrastructure hosting provider

00:00:50,399 --> 00:00:54,930
for a lot of open source projects we do

00:00:53,190 --> 00:00:57,000
you cervical location we'll do private

00:00:54,930 --> 00:01:00,210
cloud hosting we'll do we also have our

00:00:57,000 --> 00:01:02,010
popular FTP Mir for software downloading

00:01:00,210 --> 00:01:03,180
we have for managed hosting for projects

00:01:02,010 --> 00:01:04,890
that need it

00:01:03,180 --> 00:01:07,439
I also employ a lot of undergraduate

00:01:04,890 --> 00:01:08,689
students to do a lot of the work and a

00:01:07,439 --> 00:01:11,640
lot of them go out and do amazing things

00:01:08,689 --> 00:01:18,060
probably somewhere notable alumni are

00:01:11,640 --> 00:01:21,420
Alex Povey and now completely forgetting

00:01:18,060 --> 00:01:25,409
his name and Phillips Brandon Phillips

00:01:21,420 --> 00:01:26,490
who co-founded quo us so we have a lot

00:01:25,409 --> 00:01:29,880
of students that go out and do amazing

00:01:26,490 --> 00:01:31,140
things we work closely with open source

00:01:29,880 --> 00:01:33,570
projects that kind of makes sure that we

00:01:31,140 --> 00:01:35,430
provide the services we want some of the

00:01:33,570 --> 00:01:37,140
notable projects that we do some hosting

00:01:35,430 --> 00:01:38,790
for the Linux Foundation the Python

00:01:37,140 --> 00:01:41,430
Software Foundation the Apache Software

00:01:38,790 --> 00:01:45,000
Foundation we also provide some hosting

00:01:41,430 --> 00:01:46,470
for the WM linux fedora and about 150

00:01:45,000 --> 00:01:49,049
different other projects that we provide

00:01:46,470 --> 00:01:51,149
hosting for on a wide range of ways that

00:01:49,049 --> 00:01:52,500
we do but one part of it was what we do

00:01:51,149 --> 00:01:57,479
is what we do with the open power side

00:01:52,500 --> 00:01:59,219
of it another thing that's really unique

00:01:57,479 --> 00:02:01,890
about us is that we're we're considering

00:01:59,219 --> 00:02:03,719
a neutral hosting provider for for

00:02:01,890 --> 00:02:05,759
anything that we do really for open

00:02:03,719 --> 00:02:08,099
source hosting and specifically for open

00:02:05,759 --> 00:02:10,770
power that really gives the project's a

00:02:08,099 --> 00:02:11,970
really nice warm and fuzzy feeling that

00:02:10,770 --> 00:02:13,180
they know that if they need to have

00:02:11,970 --> 00:02:15,280
access to the power architect

00:02:13,180 --> 00:02:16,959
they can go to us and we'll handle the

00:02:15,280 --> 00:02:19,060
the nitty-gritty of getting the harder'

00:02:16,959 --> 00:02:20,230
up and maintaining and all that and they

00:02:19,060 --> 00:02:22,720
can get access to what they need to make

00:02:20,230 --> 00:02:24,689
sure their software is ported we also

00:02:22,720 --> 00:02:27,040
try to make sure that we provide a

00:02:24,689 --> 00:02:30,879
stable and flexible environment so they

00:02:27,040 --> 00:02:33,459
can do what they need to do a lot of

00:02:30,879 --> 00:02:35,019
these things that we set up initially

00:02:33,459 --> 00:02:36,730
when we started we started this way back

00:02:35,019 --> 00:02:38,260
in the day when we were using el pars

00:02:36,730 --> 00:02:42,909
and all of that now it's much easier

00:02:38,260 --> 00:02:44,739
with with open power what we try to also

00:02:42,909 --> 00:02:46,180
do is provide resources for a lot of

00:02:44,739 --> 00:02:47,379
these projects so they can tie it into

00:02:46,180 --> 00:02:50,139
their own continuous integration

00:02:47,379 --> 00:02:52,030
backends or they can also put it into

00:02:50,139 --> 00:02:55,629
their software building operations for

00:02:52,030 --> 00:02:58,420
downstream users so as I mentioned our

00:02:55,629 --> 00:03:00,310
power our history with power goes a long

00:02:58,420 --> 00:03:02,019
ways it really started back I think

00:03:00,310 --> 00:03:04,689
actually before I started working at the

00:03:02,019 --> 00:03:06,879
lab back in about 2005 I think we had a

00:03:04,689 --> 00:03:08,439
powerful five server at the time and it

00:03:06,879 --> 00:03:10,420
was just one server with shell access we

00:03:08,439 --> 00:03:12,310
didn't give anybody root they could you

00:03:10,420 --> 00:03:15,700
know run software build software do what

00:03:12,310 --> 00:03:17,919
they want to do then later in the late

00:03:15,700 --> 00:03:20,500
2000s we got connected up with having

00:03:17,919 --> 00:03:22,840
several power7 systems so we provided el

00:03:20,500 --> 00:03:24,010
pars I got the unfortunate task of

00:03:22,840 --> 00:03:29,010
having to manage all of them and getting

00:03:24,010 --> 00:03:31,000
them all set up that was a lot of fun

00:03:29,010 --> 00:03:32,949
those are actually gonna be going away

00:03:31,000 --> 00:03:34,120
by the end of the year so I'll be

00:03:32,949 --> 00:03:35,379
thankful that I don't have to worry

00:03:34,120 --> 00:03:38,440
about Manny's gonna those systems

00:03:35,379 --> 00:03:40,349
anytime soon and then around that time

00:03:38,440 --> 00:03:43,840
we got connected up with the GCC

00:03:40,349 --> 00:03:46,479
compiled form project and they do a lot

00:03:43,840 --> 00:03:47,889
of porting work as well so they have

00:03:46,479 --> 00:03:50,260
their own dedicated machine that we give

00:03:47,889 --> 00:03:53,349
them access to and then in about 2011

00:03:50,260 --> 00:03:55,479
really the very beginning of the open

00:03:53,349 --> 00:03:56,739
open power movement we got involved in

00:03:55,479 --> 00:03:58,239
the very early stage I think we were one

00:03:56,739 --> 00:04:01,569
of the first universities that were part

00:03:58,239 --> 00:04:04,150
of the foundation at that time we

00:04:01,569 --> 00:04:06,220
actually started out working on power 7

00:04:04,150 --> 00:04:07,629
plus machines that had opel firmware so

00:04:06,220 --> 00:04:09,519
they were acting like power 8 but

00:04:07,629 --> 00:04:12,819
they're on power 7 they were developing

00:04:09,519 --> 00:04:14,109
machines and that at least got us our

00:04:12,819 --> 00:04:16,169
hands on what the new environment was

00:04:14,109 --> 00:04:18,280
going to be like and so we could start

00:04:16,169 --> 00:04:20,609
creating this environment for it

00:04:18,280 --> 00:04:22,419
open-source developers to have access to

00:04:20,609 --> 00:04:25,479
and around that same time

00:04:22,419 --> 00:04:26,620
OpenStack has been really becoming more

00:04:25,479 --> 00:04:28,419
popular

00:04:26,620 --> 00:04:30,250
and it really was the the the medium

00:04:28,419 --> 00:04:31,990
that we wanted to provide this hosting

00:04:30,250 --> 00:04:34,180
instead of doing the old method with el

00:04:31,990 --> 00:04:35,650
pars and sending that up we could just

00:04:34,180 --> 00:04:39,010
give them API access and they can do

00:04:35,650 --> 00:04:40,389
what they want we quickly got some of

00:04:39,010 --> 00:04:43,600
the first power eight machines at the

00:04:40,389 --> 00:04:46,260
time sent to us and so I quickly was

00:04:43,600 --> 00:04:48,310
able to build out architecture for that

00:04:46,260 --> 00:04:51,639
currently hosts about 70 or more

00:04:48,310 --> 00:04:53,080
projects right now on the platform with

00:04:51,639 --> 00:04:54,880
five machines and we're supposed to be

00:04:53,080 --> 00:04:58,860
having p9 machines coming later this

00:04:54,880 --> 00:04:58,860
year so that'll be great

00:04:59,520 --> 00:05:04,780
so let's talk about what it takes deal

00:05:02,590 --> 00:05:07,030
with porting on open power what we what

00:05:04,780 --> 00:05:08,740
we try to do what projects really need

00:05:07,030 --> 00:05:11,260
is is I need easy access to computing

00:05:08,740 --> 00:05:12,700
resources that's as simple as we can get

00:05:11,260 --> 00:05:13,870
just so they can do some easy

00:05:12,700 --> 00:05:16,000
development and architectural

00:05:13,870 --> 00:05:17,620
troubleshooting if they want to do

00:05:16,000 --> 00:05:19,660
continuous integration or they want to

00:05:17,620 --> 00:05:21,789
have continuous binary builds for

00:05:19,660 --> 00:05:23,590
downstream users they also want to have

00:05:21,789 --> 00:05:26,020
access to a lot of different operating

00:05:23,590 --> 00:05:27,580
system platforms so not everybody runs

00:05:26,020 --> 00:05:29,410
about two not everybody runs CentOS

00:05:27,580 --> 00:05:31,419
sometimes they want to run so you say

00:05:29,410 --> 00:05:33,190
four or they want to run whatever else

00:05:31,419 --> 00:05:34,630
they can do that and they also just want

00:05:33,190 --> 00:05:36,280
to have raw resources to do what they

00:05:34,630 --> 00:05:38,560
need to do and that usually just means

00:05:36,280 --> 00:05:40,090
disk space and RAM and we have to make

00:05:38,560 --> 00:05:42,789
sure that we provide enough of that for

00:05:40,090 --> 00:05:44,260
them so they can do that and also for

00:05:42,789 --> 00:05:47,289
some of some of the other advanced

00:05:44,260 --> 00:05:49,000
projects like blockchain which we

00:05:47,289 --> 00:05:50,919
provide some hosting for inside of this

00:05:49,000 --> 00:05:53,110
is they want to be API driven so they

00:05:50,919 --> 00:05:55,539
can spin things up spin things down try

00:05:53,110 --> 00:05:57,310
things out I think we also do that with

00:05:55,539 --> 00:05:58,810
the Cloud Foundry project as well so

00:05:57,310 --> 00:06:00,099
they can do multi node testing and make

00:05:58,810 --> 00:06:03,639
sure everything is working the way that

00:06:00,099 --> 00:06:06,210
they want to have it working so what we

00:06:03,639 --> 00:06:08,410
provide is an OpenStack power cluster

00:06:06,210 --> 00:06:10,870
and we basically give them compute

00:06:08,410 --> 00:06:11,860
networking the block storage and if they

00:06:10,870 --> 00:06:13,450
want to use it they can use the

00:06:11,860 --> 00:06:15,789
orchestration API that OpenStack

00:06:13,450 --> 00:06:18,880
provides as well we either give them

00:06:15,789 --> 00:06:21,610
full API access or if they don't want to

00:06:18,880 --> 00:06:24,039
do that we'll just set up a VM and our

00:06:21,610 --> 00:06:25,840
form that we provide they give us an SSH

00:06:24,039 --> 00:06:27,430
key we put it on there we say here's the

00:06:25,840 --> 00:06:30,880
IP and the user login you have full

00:06:27,430 --> 00:06:34,270
pseudo go have fun and so that's what we

00:06:30,880 --> 00:06:35,890
do and as projects move along they might

00:06:34,270 --> 00:06:38,389
need more resources so we adjust things

00:06:35,890 --> 00:06:39,439
up and kind of go from there

00:06:38,389 --> 00:06:41,360
one of the key things that's really

00:06:39,439 --> 00:06:44,210
helped out helped us out with throughout

00:06:41,360 --> 00:06:48,830
the years is having direct access to IBM

00:06:44,210 --> 00:06:51,949
engineering support as we need it I have

00:06:48,830 --> 00:06:54,319
a weekly call with a project manager and

00:06:51,949 --> 00:06:56,000
a systems engineer there so if I run

00:06:54,319 --> 00:06:58,039
into some weird hardware or software

00:06:56,000 --> 00:07:00,889
problems which I did initially quite a

00:06:58,039 --> 00:07:02,000
bit I could track down where things are

00:07:00,889 --> 00:07:03,530
at and kind of work through that and

00:07:02,000 --> 00:07:05,090
make sure things are working and kind of

00:07:03,530 --> 00:07:10,250
find out what I need to do to make that

00:07:05,090 --> 00:07:12,620
better so some of the projects that we

00:07:10,250 --> 00:07:15,080
have on this platform on one of the

00:07:12,620 --> 00:07:17,750
larger ones is docker itself I think I

00:07:15,080 --> 00:07:19,189
discovered after we actually started

00:07:17,750 --> 00:07:20,779
hosting that we actually provide a lot

00:07:19,189 --> 00:07:26,240
of the infrastructure they used to build

00:07:20,779 --> 00:07:27,529
a lot of their PVC le docteur images you

00:07:26,240 --> 00:07:30,080
see on their platform or gate being

00:07:27,529 --> 00:07:31,759
built on this as well we also been

00:07:30,080 --> 00:07:37,129
providing some beta testing for Travis

00:07:31,759 --> 00:07:38,810
CI on this architecture as well we've

00:07:37,129 --> 00:07:40,580
been running into some IO contention

00:07:38,810 --> 00:07:41,840
problems so they haven't been doing as

00:07:40,580 --> 00:07:43,610
much but we're hopefully going to be

00:07:41,840 --> 00:07:45,680
resolving that here pretty quick and

00:07:43,610 --> 00:07:47,210
here's a list of just some of the

00:07:45,680 --> 00:07:49,430
projects we also provide some hosting

00:07:47,210 --> 00:07:52,759
for and they have resources that do what

00:07:49,430 --> 00:07:55,940
they need to do and they each kind of

00:07:52,759 --> 00:07:57,349
have their own needs most of them are

00:07:55,940 --> 00:07:58,550
pretty hands-off but some of them maybe

00:07:57,349 --> 00:08:04,879
they run into some issues and they need

00:07:58,550 --> 00:08:06,680
some help on getting things going I'm a

00:08:04,879 --> 00:08:08,360
system administrator by trade so I love

00:08:06,680 --> 00:08:10,729
talking about how I make these

00:08:08,360 --> 00:08:12,830
architecture and how I made it go I'm

00:08:10,729 --> 00:08:15,610
making this work was a very big

00:08:12,830 --> 00:08:18,710
challenge for me and it was a lot of fun

00:08:15,610 --> 00:08:20,029
we first off I had to learn OpenStack

00:08:18,710 --> 00:08:23,479
and then I had to learn how to make it

00:08:20,029 --> 00:08:24,979
go on a PowerPC as well

00:08:23,479 --> 00:08:28,729
and I'm not going to go through the

00:08:24,979 --> 00:08:29,960
whole explanation of where we started

00:08:28,729 --> 00:08:31,639
and how we got to it but it was really

00:08:29,960 --> 00:08:33,110
it was really tough but right now what

00:08:31,639 --> 00:08:35,870
we're at is we're running OpenStack

00:08:33,110 --> 00:08:38,690
Newton which is I think about three or

00:08:35,870 --> 00:08:40,789
four releases behind just a year and a

00:08:38,690 --> 00:08:42,979
half behind they do six months releases

00:08:40,789 --> 00:08:44,449
we just did an upgrade from another

00:08:42,979 --> 00:08:47,300
version and we're gonna try and do some

00:08:44,449 --> 00:08:49,579
more here coming up but we have the

00:08:47,300 --> 00:08:51,950
basic services enabled that we need for

00:08:49,579 --> 00:08:53,930
projects our primary host

00:08:51,950 --> 00:08:55,850
we'd like to use it as CentOS and since

00:08:53,930 --> 00:08:58,640
all seven when I started doing this

00:08:55,850 --> 00:09:00,680
CentOS didn't have a I built for it and

00:08:58,640 --> 00:09:01,970
we didn't have a Red Hat license for it

00:09:00,680 --> 00:09:04,090
so we couldn't really run it so I was

00:09:01,970 --> 00:09:07,430
running Fedora 19 I think at the time

00:09:04,090 --> 00:09:09,350
that was fun and we use chef for all of

00:09:07,430 --> 00:09:11,090
our configuration management and we have

00:09:09,350 --> 00:09:12,380
a wrapper cookbook which I have a link

00:09:11,090 --> 00:09:13,760
up there that you can kind of see what I

00:09:12,380 --> 00:09:17,570
had to do to make it work on on

00:09:13,760 --> 00:09:20,830
OpenStack all the systems that we have

00:09:17,570 --> 00:09:24,650
running the compute nodes or the 82 47s

00:09:20,830 --> 00:09:26,000
they're set up in the same same way and

00:09:24,650 --> 00:09:27,950
actually the connectivity just got

00:09:26,000 --> 00:09:30,200
updated in the last week I just updated

00:09:27,950 --> 00:09:33,440
them all to 40-gig I moved them over to

00:09:30,200 --> 00:09:35,830
a 40 gig switch that I actually have

00:09:33,440 --> 00:09:37,940
kool-aid co-located with Chris over here

00:09:35,830 --> 00:09:40,040
so that's gonna be helping and I have

00:09:37,940 --> 00:09:41,120
one controller that's actually a VM

00:09:40,040 --> 00:09:43,100
running somewhere else that's running

00:09:41,120 --> 00:09:44,240
all the API stuff on there and for the

00:09:43,100 --> 00:09:46,510
size that we're dealing with that works

00:09:44,240 --> 00:09:48,710
pretty well for at least until recently

00:09:46,510 --> 00:09:50,570
there's a lot of challenges of getting

00:09:48,710 --> 00:09:52,040
this to go at the time when I first

00:09:50,570 --> 00:09:54,710
started this getting this going there

00:09:52,040 --> 00:09:56,240
was no support for CentOS chef didn't

00:09:54,710 --> 00:09:57,800
have a build for it so I had to build my

00:09:56,240 --> 00:09:59,990
own chef client so I could actually run

00:09:57,800 --> 00:10:01,880
the software I wanted to do it

00:09:59,990 --> 00:10:05,330
a lot of the pre-built binaries for

00:10:01,880 --> 00:10:07,760
things I needed didn't exist so for

00:10:05,330 --> 00:10:11,090
example there was CentOS has their own

00:10:07,760 --> 00:10:13,310
OpenStack distribution but they don't

00:10:11,090 --> 00:10:14,870
have any build for it for PowerPC so I

00:10:13,310 --> 00:10:16,340
have to manually do that myself I take

00:10:14,870 --> 00:10:19,910
their source rpms and they just build it

00:10:16,340 --> 00:10:22,370
and everything's happy I also initially

00:10:19,910 --> 00:10:25,600
had some really fun hypervisor problems

00:10:22,370 --> 00:10:28,220
because we use KVM to run a lot of this

00:10:25,600 --> 00:10:30,290
there was early bugs with Q mu and

00:10:28,220 --> 00:10:32,600
libvirt but a lot of that has been

00:10:30,290 --> 00:10:34,760
resolved more recently I ran into some

00:10:32,600 --> 00:10:38,150
issues with CM a memory contiguous

00:10:34,760 --> 00:10:39,560
memory allocation I finally got a

00:10:38,150 --> 00:10:42,080
solution for that to kind of get that to

00:10:39,560 --> 00:10:44,450
go the other part of it is is building

00:10:42,080 --> 00:10:47,500
guest images a lot of the distributions

00:10:44,450 --> 00:10:49,970
upstream some of them provide the the

00:10:47,500 --> 00:10:51,800
guest images that we want to have for

00:10:49,970 --> 00:10:53,240
our operating systems but sometimes they

00:10:51,800 --> 00:10:54,410
don't have the key software that we need

00:10:53,240 --> 00:10:57,770
to make it work on OpenStack

00:10:54,410 --> 00:10:59,450
so for example on power on guest you

00:10:57,770 --> 00:11:03,660
need to have

00:10:59,450 --> 00:11:06,210
the PPC 64 diag application or package

00:11:03,660 --> 00:11:09,960
installed and that provides the ability

00:11:06,210 --> 00:11:11,010
to hot-swap add remove volumes if you

00:11:09,960 --> 00:11:12,450
need to be able to do that on the

00:11:11,010 --> 00:11:13,920
systems and we were having problems with

00:11:12,450 --> 00:11:16,380
some of the other projects that were

00:11:13,920 --> 00:11:18,810
using that that they couldn't do it so

00:11:16,380 --> 00:11:20,700
we had to build all that well to kind of

00:11:18,810 --> 00:11:22,470
go through all of that the tool that we

00:11:20,700 --> 00:11:25,920
use to build images is called Packer

00:11:22,470 --> 00:11:27,900
Packers written and go and early on in

00:11:25,920 --> 00:11:30,960
the time there wasn't a go compiler and

00:11:27,900 --> 00:11:32,820
for power so we had to get get the go

00:11:30,960 --> 00:11:34,080
language access to the platform so they

00:11:32,820 --> 00:11:36,150
could fix all those bugs and then we

00:11:34,080 --> 00:11:37,230
were finally able to build go and then

00:11:36,150 --> 00:11:39,060
we could build pack and then we could

00:11:37,230 --> 00:11:42,120
build our image was like we wanted to do

00:11:39,060 --> 00:11:44,520
so that was a fun adventure eating your

00:11:42,120 --> 00:11:46,590
own dog food so to speak and then also

00:11:44,520 --> 00:11:48,840
we a lot of challenges going through

00:11:46,590 --> 00:11:50,370
dealing with opposite cup grades we had

00:11:48,840 --> 00:11:51,480
to go through one major upgrade where we

00:11:50,370 --> 00:11:54,330
completely change the underlying

00:11:51,480 --> 00:11:55,950
networking subsystem and and it caused

00:11:54,330 --> 00:11:57,120
the big outage we had to deal with but

00:11:55,950 --> 00:11:58,950
now that we've made that switch

00:11:57,120 --> 00:12:01,050
everything is happy and everything works

00:11:58,950 --> 00:12:02,820
much much better I think

00:12:01,050 --> 00:12:07,470
upgrades moving forward should be fairly

00:12:02,820 --> 00:12:09,150
smooth so what we've been dealing with a

00:12:07,470 --> 00:12:11,010
lot lately is scalability issues for

00:12:09,150 --> 00:12:13,320
what we have and most of it is dealing

00:12:11,010 --> 00:12:15,210
with storage and i/o contention around

00:12:13,320 --> 00:12:17,070
that so when we created this cluster

00:12:15,210 --> 00:12:19,200
initially for the size that we think we

00:12:17,070 --> 00:12:20,910
were going to have we we expect it out

00:12:19,200 --> 00:12:23,490
so that we have most of the stores local

00:12:20,910 --> 00:12:26,040
on the on the nodes and have the vm's

00:12:23,490 --> 00:12:27,750
access it that way unfortunately this

00:12:26,040 --> 00:12:29,790
created a lot of i/o contention and a

00:12:27,750 --> 00:12:32,820
lot of problems with a lot of various

00:12:29,790 --> 00:12:34,800
projects and what they were doing also

00:12:32,820 --> 00:12:36,300
at the time we had a lot of problems

00:12:34,800 --> 00:12:38,400
with memory we didn't realize how much

00:12:36,300 --> 00:12:40,350
RAM that projects wanted to use so we

00:12:38,400 --> 00:12:43,890
had to get more RAM purchase for the

00:12:40,350 --> 00:12:46,440
machines and we also have limited ipv4

00:12:43,890 --> 00:12:48,450
space so we have to be careful about how

00:12:46,440 --> 00:12:51,330
many instances that we provide so we

00:12:48,450 --> 00:12:53,160
initially had a shared subnet that we

00:12:51,330 --> 00:12:55,320
did all of our OpenStack stuff whether

00:12:53,160 --> 00:12:57,750
it was x86 or power and then we split it

00:12:55,320 --> 00:12:59,340
off and so this one bigger subnet is

00:12:57,750 --> 00:13:01,890
just for open power because we have so

00:12:59,340 --> 00:13:04,140
many users on it and then we also have

00:13:01,890 --> 00:13:06,570
you know issues sometimes a lot of these

00:13:04,140 --> 00:13:08,450
projects pull pull down code from github

00:13:06,570 --> 00:13:10,740
and

00:13:08,450 --> 00:13:12,180
depending on what github has and how

00:13:10,740 --> 00:13:14,610
they're peering works sometimes it can

00:13:12,180 --> 00:13:15,960
be slower they would think that it's a

00:13:14,610 --> 00:13:17,460
problem on our end and really it's a

00:13:15,960 --> 00:13:19,460
problem with github zone on trying to

00:13:17,460 --> 00:13:21,540
get things going inside of our control

00:13:19,460 --> 00:13:23,550
we actually have I think a pretty good

00:13:21,540 --> 00:13:25,800
direct I think they finally brought

00:13:23,550 --> 00:13:27,030
online they're pairing up in Seattle so

00:13:25,800 --> 00:13:32,730
now we have really good speeds for

00:13:27,030 --> 00:13:35,040
github so some upcoming changes that

00:13:32,730 --> 00:13:37,320
we're gonna be doing is we're gonna be

00:13:35,040 --> 00:13:39,450
implementing stuff storage we got five

00:13:37,320 --> 00:13:41,280
stuff servers donated from IBM to make

00:13:39,450 --> 00:13:43,230
this work we're gonna be entirely

00:13:41,280 --> 00:13:46,680
switching the backend storage from local

00:13:43,230 --> 00:13:49,410
to SEF this increases our capacity from

00:13:46,680 --> 00:13:51,020
about 38 terabytes to 292 terabytes so

00:13:49,410 --> 00:13:53,400
we should be doing pretty good on that

00:13:51,020 --> 00:13:55,920
everything's gonna be on a 40 gigabit

00:13:53,400 --> 00:13:57,780
backplane for all of the connectivity

00:13:55,920 --> 00:14:00,120
and I'm hoping this will improve a lot

00:13:57,780 --> 00:14:01,470
of the disk i/o problems and also give

00:14:00,120 --> 00:14:03,540
us a little bit more flexibility and

00:14:01,470 --> 00:14:05,400
doing a lot of live migration so I have

00:14:03,540 --> 00:14:09,180
the cluster up right now I finally got

00:14:05,400 --> 00:14:10,800
it going didn't take too much work I had

00:14:09,180 --> 00:14:13,470
to do some of the typical there's no

00:14:10,800 --> 00:14:16,080
prime there was no binaries built for

00:14:13,470 --> 00:14:18,720
CentOS for stuff but that was really

00:14:16,080 --> 00:14:22,260
easy I just took the source RPM rebuilt

00:14:18,720 --> 00:14:23,550
it and everything's happy I was hoping

00:14:22,260 --> 00:14:25,380
to get this all converted over before

00:14:23,550 --> 00:14:26,730
someone but I didn't quite get get there

00:14:25,380 --> 00:14:28,860
I'm probably gonna be doing that in the

00:14:26,730 --> 00:14:31,050
next week or two I'm excited to see that

00:14:28,860 --> 00:14:33,120
go and then after that we're gonna be

00:14:31,050 --> 00:14:35,820
upgrading to the newer late latest

00:14:33,120 --> 00:14:38,010
releases of OpenStack and moving through

00:14:35,820 --> 00:14:39,660
there and I'm trying to get it so where

00:14:38,010 --> 00:14:45,360
we're only one released behind OpenStack

00:14:39,660 --> 00:14:47,520
releases and kind of work with that the

00:14:45,360 --> 00:14:49,350
other part of what we do the newer part

00:14:47,520 --> 00:14:51,540
that we've been working on is some

00:14:49,350 --> 00:14:53,070
continuous integration services for

00:14:51,540 --> 00:14:55,500
projects so these are for the projects

00:14:53,070 --> 00:14:57,000
that don't really have their own CI

00:14:55,500 --> 00:14:59,490
right now and they want to just have

00:14:57,000 --> 00:15:02,070
access to the the hardware and just kind

00:14:59,490 --> 00:15:05,430
of get it going and so we've created our

00:15:02,070 --> 00:15:07,380
own manage to Jenkins CI platform it's

00:15:05,430 --> 00:15:09,060
integrated in with github so all you

00:15:07,380 --> 00:15:11,580
need to have as a github username and

00:15:09,060 --> 00:15:12,839
you can get access right now the way

00:15:11,580 --> 00:15:14,160
it's set up is that slaves are

00:15:12,839 --> 00:15:16,530
dynamically spun up as a docker

00:15:14,160 --> 00:15:18,959
container running on the platform that

00:15:16,530 --> 00:15:21,289
we already have and so we can run

00:15:18,959 --> 00:15:24,719
whatever they need to do

00:15:21,289 --> 00:15:26,669
and also soon I'll have access to the

00:15:24,719 --> 00:15:30,269
some GPU hardware as well thanks to

00:15:26,669 --> 00:15:32,879
Chris so through CI through Jenkins we

00:15:30,269 --> 00:15:34,619
can now talk to his cluster we can run

00:15:32,879 --> 00:15:35,759
jobs on that cluster inside of hopefully

00:15:34,619 --> 00:15:36,719
docker containers we're going to try

00:15:35,759 --> 00:15:39,299
that out and see if we can get that

00:15:36,719 --> 00:15:41,429
going and that way we can enable some

00:15:39,299 --> 00:15:44,189
users where I never have we have PI

00:15:41,429 --> 00:15:45,779
torch the PI torch community is one of

00:15:44,189 --> 00:15:47,669
our big users right now for that and

00:15:45,779 --> 00:15:49,919
give them access to actually running

00:15:47,669 --> 00:15:51,329
tests on GPU hardware so I'm real

00:15:49,919 --> 00:15:52,799
excited about seeing that and getting

00:15:51,329 --> 00:15:54,869
more users on this continuous

00:15:52,799 --> 00:15:59,939
integration platform and seeing where it

00:15:54,869 --> 00:16:03,419
goes and I went much faster than I

00:15:59,939 --> 00:16:05,489
thought I was gonna go so I knew it was

00:16:03,419 --> 00:16:07,229
shorter in time for for this session but

00:16:05,489 --> 00:16:10,139
I thought I would go through a lot of

00:16:07,229 --> 00:16:11,579
stuff so I have a link there if you were

00:16:10,139 --> 00:16:15,329
a project and you want to have access

00:16:11,579 --> 00:16:17,189
and to do stuff that would be great

00:16:15,329 --> 00:16:19,819
with that do you have any questions on

00:16:17,189 --> 00:16:19,819
what I've provided

00:16:42,149 --> 00:16:47,139
the vast majority of those problems was

00:16:44,709 --> 00:16:49,630
very early on when we switched from the

00:16:47,139 --> 00:16:52,720
big endian to the little endian so it

00:16:49,630 --> 00:16:55,000
was probably 2013 2014 I'm thinking and

00:16:52,720 --> 00:16:57,190
that's when I literally was pulling

00:16:55,000 --> 00:16:58,930
patches from mailing lists to fix

00:16:57,190 --> 00:17:01,389
problems that engineers had literally

00:16:58,930 --> 00:17:02,350
just fixed I don't have to deal with

00:17:01,389 --> 00:17:04,750
that as much anymore

00:17:02,350 --> 00:17:06,220
for example with the Ceph stuff I didn't

00:17:04,750 --> 00:17:07,720
have to do any patching whatsoever I

00:17:06,220 --> 00:17:10,539
just had to build the binaries and

00:17:07,720 --> 00:17:12,159
everything just worked and with

00:17:10,539 --> 00:17:13,839
OpenStack I don't have any problems with

00:17:12,159 --> 00:17:18,789
that most of the issues I rent it and

00:17:13,839 --> 00:17:21,789
run into now or edge case things like

00:17:18,789 --> 00:17:23,260
the seem a problem I was having was my

00:17:21,789 --> 00:17:25,870
Sheen's would have enough memory

00:17:23,260 --> 00:17:27,789
allocated I had enough free memory but I

00:17:25,870 --> 00:17:29,320
couldn't deploy any new VMs on it in the

00:17:27,789 --> 00:17:30,820
back end it just says I don't have

00:17:29,320 --> 00:17:33,520
enough memory to allocate it can't do it

00:17:30,820 --> 00:17:35,140
and that took a while of working with

00:17:33,520 --> 00:17:38,200
the engineers to understand what's

00:17:35,140 --> 00:17:40,169
causing that and eventually say we need

00:17:38,200 --> 00:17:42,789
to tweak this little kernel parameter

00:17:40,169 --> 00:17:44,530
instead of the default 5% of memory

00:17:42,789 --> 00:17:46,030
switch it up to maybe 10% and see what

00:17:44,530 --> 00:17:47,650
happens and when I did that instantly

00:17:46,030 --> 00:17:49,929
everything started deploying again and

00:17:47,650 --> 00:17:51,570
they also suggested well maybe you

00:17:49,929 --> 00:17:54,549
should use a more closer mainline kernel

00:17:51,570 --> 00:17:56,650
because that has a lot more updated

00:17:54,549 --> 00:17:58,330
features that you may need and that also

00:17:56,650 --> 00:18:00,100
gave me visibility and how much seemed a

00:17:58,330 --> 00:18:02,289
memory usage I had so if I ran into that

00:18:00,100 --> 00:18:04,840
problem again I would know hey I can

00:18:02,289 --> 00:18:07,830
deal with that so I don't have as much

00:18:04,840 --> 00:18:12,100
problems as as much anymore really

00:18:07,830 --> 00:18:15,789
thankfully I know there was some initial

00:18:12,100 --> 00:18:18,789
problems with the the open boot firmware

00:18:15,789 --> 00:18:20,500
with a petit boug there were some weird

00:18:18,789 --> 00:18:22,419
issues initially but all that's been

00:18:20,500 --> 00:18:25,510
resolved at least for me although Chris

00:18:22,419 --> 00:18:29,230
Renan - a fun issue recently he could

00:18:25,510 --> 00:18:31,600
talk about that his says i thankfully

00:18:29,230 --> 00:18:33,730
haven't run into but but yeah things

00:18:31,600 --> 00:18:36,309
have been going really well I ran into a

00:18:33,730 --> 00:18:37,720
weird hardware issue of all things in

00:18:36,309 --> 00:18:39,220
this last week I was moving five

00:18:37,720 --> 00:18:41,409
machines closer to where this 40 gig

00:18:39,220 --> 00:18:44,049
switch was on my last machine I moved it

00:18:41,409 --> 00:18:46,510
and I plugged it in I was waiting for

00:18:44,049 --> 00:18:49,090
the HM or the FSB to come up so I can

00:18:46,510 --> 00:18:51,250
get on the console and it never came up

00:18:49,090 --> 00:18:52,650
I looked on the little console and it's

00:18:51,250 --> 00:18:54,870
just trying to boot

00:18:52,650 --> 00:18:56,190
and come to find out the back plane had

00:18:54,870 --> 00:19:00,180
failed somewhere and they had to replace

00:18:56,190 --> 00:19:04,350
the back plane what's just fun because

00:19:00,180 --> 00:19:05,750
they have to pull everything out and put

00:19:04,350 --> 00:19:07,830
it back in but once they did that

00:19:05,750 --> 00:19:11,670
everything came back up and everything's

00:19:07,830 --> 00:19:17,490
fine so so that's been a lot of fun good

00:19:11,670 --> 00:19:19,920
not going it kind of depends

00:19:17,490 --> 00:19:24,450
I could probably if I with my network oh

00:19:19,920 --> 00:19:27,809
wait I forgot I'm on here but it depends

00:19:24,450 --> 00:19:30,360
on the note the CPU I would say is

00:19:27,809 --> 00:19:33,420
probably where we see most a lot of the

00:19:30,360 --> 00:19:34,890
usage it could be probably 20 to 30

00:19:33,420 --> 00:19:36,240
percent let me let me see if I can at

00:19:34,890 --> 00:19:38,670
least go to our website where we have

00:19:36,240 --> 00:19:44,150
the access and I can see if it's working

00:19:38,670 --> 00:19:46,590
[Music]

00:19:44,150 --> 00:19:50,850
so I named all these machines Oakland

00:19:46,590 --> 00:19:52,980
power number so let's see here I'll pick

00:19:50,850 --> 00:19:55,230
one of these just random and we'll see

00:19:52,980 --> 00:20:01,110
kind of how this is going I think it's

00:19:55,230 --> 00:20:03,660
here I could see where I'm using about

00:20:01,110 --> 00:20:07,110
was it a hundred and forty gigs of RAM

00:20:03,660 --> 00:20:09,059
there the load average is pretty low and

00:20:07,110 --> 00:20:10,980
actually on this machine I'm not using

00:20:09,059 --> 00:20:16,590
that much CPU so the green is the CPU

00:20:10,980 --> 00:20:19,170
usage the yellow is unused but it

00:20:16,590 --> 00:20:22,710
depends on the machine I know that we

00:20:19,170 --> 00:20:24,750
the the open power to is configured with

00:20:22,710 --> 00:20:26,280
much faster disk so that they can it can

00:20:24,750 --> 00:20:29,850
do quite a bit more on the i/o side of

00:20:26,280 --> 00:20:31,050
it and so we have a lot more stuff

00:20:29,850 --> 00:20:33,150
running on it I can't remember where

00:20:31,050 --> 00:20:35,760
it's yeah it's running about that much

00:20:33,150 --> 00:20:38,360
so it's not full bore all the time that

00:20:35,760 --> 00:20:38,360
we have running

00:20:41,540 --> 00:20:46,839
any other questions

00:20:43,330 --> 00:20:46,839
[Music]

00:20:51,020 --> 00:20:59,640
yep-yep-yep we we get we get a request

00:20:56,640 --> 00:21:01,200
probably one or two a week kind of

00:20:59,640 --> 00:21:02,940
depending I imagine we're going to

00:21:01,200 --> 00:21:04,260
probably have more after this week has

00:21:02,940 --> 00:21:08,429
usually get more visibility at

00:21:04,260 --> 00:21:09,870
conferences and such my students are the

00:21:08,429 --> 00:21:11,640
ones that are responsible for giving out

00:21:09,870 --> 00:21:14,100
that access and we usually try to do it

00:21:11,640 --> 00:21:18,510
within a few business days time and get

00:21:14,100 --> 00:21:21,059
them going and we we have all of our

00:21:18,510 --> 00:21:24,059
requests go through process where we get

00:21:21,059 --> 00:21:25,320
approval from an IBM advocate so our

00:21:24,059 --> 00:21:27,690
primary advocate right now is Jeff

00:21:25,320 --> 00:21:35,070
she'll actually so and I've worked with

00:21:27,690 --> 00:21:37,860
him a long time so he'll so he'll either

00:21:35,070 --> 00:21:39,660
do this or do this and we'll get it will

00:21:37,860 --> 00:21:41,669
get interesting requests sometimes

00:21:39,660 --> 00:21:44,429
they're like what are you trying to do

00:21:41,669 --> 00:21:46,140
why do you need access for this and and

00:21:44,429 --> 00:21:47,820
then a lot of times it's like it's one

00:21:46,140 --> 00:21:49,679
project maybe an IBM and another project

00:21:47,820 --> 00:21:50,880
in IBM that are kind of doing the same

00:21:49,679 --> 00:21:52,320
thing and they don't realize that they

00:21:50,880 --> 00:21:56,940
need to talk to each other so we have to

00:21:52,320 --> 00:22:00,620
kind of see yeah we have a lot of that

00:21:56,940 --> 00:22:00,620
going on too so that's always been fun

00:22:01,280 --> 00:22:05,429
yeah the other fun thing that we've had

00:22:03,990 --> 00:22:07,049
to deal with is actually on the security

00:22:05,429 --> 00:22:09,090
side so initially when we made a lot of

00:22:07,049 --> 00:22:11,730
these images we had missed a few steps

00:22:09,090 --> 00:22:14,790
on securing some of the some of the

00:22:11,730 --> 00:22:16,950
services that are deployed and so our

00:22:14,790 --> 00:22:19,169
ISP would send us all these reports of

00:22:16,950 --> 00:22:21,090
all these things that got that we had to

00:22:19,169 --> 00:22:23,429
deal with and we finally got that all

00:22:21,090 --> 00:22:25,049
fixed finally knock on wood and I think

00:22:23,429 --> 00:22:28,049
we got a better better system in place

00:22:25,049 --> 00:22:29,580
for that so a lot of it is just simple

00:22:28,049 --> 00:22:31,140
user stuff like hey I changed the

00:22:29,580 --> 00:22:35,130
password to something really simple and

00:22:31,140 --> 00:22:38,510
allows login and I left it up and you

00:22:35,130 --> 00:22:40,860
know what two days later it's got owned

00:22:38,510 --> 00:22:46,980
so we have we have fun dealing with that

00:22:40,860 --> 00:22:48,270
as well yeah yeah we're Jeff yeah Jeff

00:22:46,980 --> 00:22:50,130
shows our person that's gonna be getting

00:22:48,270 --> 00:22:53,580
us our power 9 systems are planning on

00:22:50,130 --> 00:22:55,980
getting a couple of Boston machines when

00:22:53,580 --> 00:22:57,720
they get g8 I think in May sometimes so

00:22:55,980 --> 00:23:00,330
that probably means we won't get it

00:22:57,720 --> 00:23:01,260
until 2 or 3 months later just kind of

00:23:00,330 --> 00:23:03,990
depends on where

00:23:01,260 --> 00:23:06,210
in the pecking order but but yeah that's

00:23:03,990 --> 00:23:08,309
the plan right now the new stuff servers

00:23:06,210 --> 00:23:11,250
were I can't remember with a code name

00:23:08,309 --> 00:23:13,020
of a more but they were they weren't the

00:23:11,250 --> 00:23:15,600
IBM branded box they were in the Super

00:23:13,020 --> 00:23:16,860
Micro looking boxes so that was new for

00:23:15,600 --> 00:23:18,390
me to kind of work on that and I think

00:23:16,860 --> 00:23:20,160
that's what the Boston is I think

00:23:18,390 --> 00:23:23,490
there's actually one out there and

00:23:20,160 --> 00:23:24,809
that's gonna be fun working on that so

00:23:23,490 --> 00:23:26,220
it's fun figuring out how you update the

00:23:24,809 --> 00:23:26,980
firmware in each one because they're all

00:23:26,220 --> 00:23:31,370
different

00:23:26,980 --> 00:23:31,370
[Laughter]

00:23:33,590 --> 00:23:40,169
any other questions all right well I

00:23:38,669 --> 00:23:43,490
think we got five minutes and you're

00:23:40,169 --> 00:23:46,220
next i Hank thank you

00:23:43,490 --> 00:23:46,220

YouTube URL: https://www.youtube.com/watch?v=ehK59djJjQg


