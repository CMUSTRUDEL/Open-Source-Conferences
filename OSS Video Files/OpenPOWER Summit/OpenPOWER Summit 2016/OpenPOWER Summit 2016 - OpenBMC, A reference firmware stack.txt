Title: OpenPOWER Summit 2016 - OpenBMC, A reference firmware stack
Publication date: 2016-04-29
Playlist: OpenPOWER Summit 2016
Description: 
	Presented by Chris Austen of IBM
Captions: 
	00:00:00,000 --> 00:00:03,810
hey thank you very much yeah I'm Chris

00:00:02,220 --> 00:00:07,290
awesome from Austin Texas originally

00:00:03,810 --> 00:00:09,360
from Canada today I'm going to talk

00:00:07,290 --> 00:00:12,300
about the open VM see the work that

00:00:09,360 --> 00:00:14,880
we've done there last year we are here

00:00:12,300 --> 00:00:17,250
and we talked about host boot code and

00:00:14,880 --> 00:00:20,640
the Opel code and how we were able to

00:00:17,250 --> 00:00:22,050
take the work that we did there and get

00:00:20,640 --> 00:00:25,920
up on the github and make it freely

00:00:22,050 --> 00:00:29,640
available as part of open power are the

00:00:25,920 --> 00:00:31,430
donation to open power all right but we

00:00:29,640 --> 00:00:34,110
all know something a little bit

00:00:31,430 --> 00:00:36,270
interesting is that over here this is

00:00:34,110 --> 00:00:38,790
open power systems right if you wanted

00:00:36,270 --> 00:00:41,550
to build a server this is your stack and

00:00:38,790 --> 00:00:44,610
everything in blue is available free

00:00:41,550 --> 00:00:46,469
open you can work with us and we'll help

00:00:44,610 --> 00:00:49,050
you out there's this one part down the

00:00:46,469 --> 00:00:52,800
bottom though and it's for a server of a

00:00:49,050 --> 00:00:54,840
BMC and if you if you did it yourself

00:00:52,800 --> 00:00:57,149
that's fine it but we didn't really

00:00:54,840 --> 00:00:59,370
provide an open available one for you to

00:00:57,149 --> 00:01:02,280
do so you had to either go and purchase

00:00:59,370 --> 00:01:05,670
a contract with another company or you

00:01:02,280 --> 00:01:07,799
had to do it yourself so the talk this

00:01:05,670 --> 00:01:10,530
morning from Erin was pretty appropriate

00:01:07,799 --> 00:01:12,119
because we talked about open open make

00:01:10,530 --> 00:01:15,210
everything open and that's what we tried

00:01:12,119 --> 00:01:21,509
to do is support the barreleye system

00:01:15,210 --> 00:01:23,009
and create BMC that was open all right

00:01:21,509 --> 00:01:24,659
we've heard this a few times already so

00:01:23,009 --> 00:01:27,240
I'll go by really really quick but a

00:01:24,659 --> 00:01:29,939
base management controller can his job

00:01:27,240 --> 00:01:33,500
in life you plug it into the wall and it

00:01:29,939 --> 00:01:35,880
is available for you and it will monitor

00:01:33,500 --> 00:01:38,670
sensors on your system maybe your fans

00:01:35,880 --> 00:01:40,710
are running fast or slow you care about

00:01:38,670 --> 00:01:43,680
temperatures of your system you care

00:01:40,710 --> 00:01:45,689
about the inventory oh you have 84 dims

00:01:43,680 --> 00:01:47,729
and you're in your system and you got to

00:01:45,689 --> 00:01:50,100
make sure that the serial numbers all

00:01:47,729 --> 00:01:52,820
match for that box you know the bmc's

00:01:50,100 --> 00:01:55,890
job in life is to do those kind of tasks

00:01:52,820 --> 00:01:57,630
currently on the on the servers that we

00:01:55,890 --> 00:02:00,840
have back over there I think most of

00:01:57,630 --> 00:02:02,610
them are in the the a speed ast 2400

00:02:00,840 --> 00:02:05,620
chip

00:02:02,610 --> 00:02:09,100
all right so so let's talk about the

00:02:05,620 --> 00:02:12,160
open BMC then what we did was we decided

00:02:09,100 --> 00:02:14,530
to kind of go out to the world and see

00:02:12,160 --> 00:02:15,970
what people do because you know like we

00:02:14,530 --> 00:02:18,010
do some great things but some other

00:02:15,970 --> 00:02:21,360
people do even better stuff and so we

00:02:18,010 --> 00:02:23,670
discovered that you know there's a Yocto

00:02:21,360 --> 00:02:26,280
Linux packaging

00:02:23,670 --> 00:02:28,660
there's also open and embedded

00:02:26,280 --> 00:02:31,240
foundation and they kind of specialized

00:02:28,660 --> 00:02:34,120
and putting Linux in small places in

00:02:31,240 --> 00:02:36,160
embedded places so that's all you worked

00:02:34,120 --> 00:02:37,450
with and we went ahead and we put the

00:02:36,160 --> 00:02:38,410
kernel like pretty much the latest

00:02:37,450 --> 00:02:40,390
kernels and we're trying to keep

00:02:38,410 --> 00:02:42,100
up-to-date all the time and the latest

00:02:40,390 --> 00:02:45,400
Yocto and we're gonna move up to the

00:02:42,100 --> 00:02:46,959
latest latest Yocto pretty soon but we

00:02:45,400 --> 00:02:48,520
package this all together and then you

00:02:46,959 --> 00:02:49,690
can start tossing in any applications

00:02:48,520 --> 00:02:51,580
that you want if you want to put on

00:02:49,690 --> 00:02:53,500
Python a web server whatever you want

00:02:51,580 --> 00:02:56,130
SSL SSH it doesn't matter you can

00:02:53,500 --> 00:02:59,680
package it as part of the Yocto build

00:02:56,130 --> 00:03:02,860
tools chain and it's just available for

00:02:59,680 --> 00:03:05,739
you so what's the thing that's different

00:03:02,860 --> 00:03:07,810
well what we did is we have all of our

00:03:05,739 --> 00:03:14,380
applications communicate to each other

00:03:07,810 --> 00:03:16,209
over d-bus and then if if you as a user

00:03:14,380 --> 00:03:17,980
want to call into the system and

00:03:16,209 --> 00:03:20,410
discover what's going on and you can

00:03:17,980 --> 00:03:22,269
just apply a rest interface on top and

00:03:20,410 --> 00:03:25,780
communicate over rest and that's how you

00:03:22,269 --> 00:03:28,420
get information so actually there isn't

00:03:25,780 --> 00:03:31,030
really an IP mi stack outwardly

00:03:28,420 --> 00:03:32,950
available for this because you know when

00:03:31,030 --> 00:03:34,390
you start to grow into bigger boxes IP

00:03:32,950 --> 00:03:36,280
line becomes very limited there's only

00:03:34,390 --> 00:03:38,769
one byte to talk about all the different

00:03:36,280 --> 00:03:40,329
sensors and half of the sensors could be

00:03:38,769 --> 00:03:42,549
present sensors fault sensors

00:03:40,329 --> 00:03:44,290
temperature sensors when you get into

00:03:42,549 --> 00:03:45,700
big boxes that's not the case that

00:03:44,290 --> 00:03:51,100
you're going to be able to do that on a

00:03:45,700 --> 00:03:52,989
per entity basis all right and of course

00:03:51,100 --> 00:03:55,120
because the people that worked on the

00:03:52,989 --> 00:03:58,360
hosts leuco the opal color yeah these

00:03:55,120 --> 00:04:00,160
guys some of these people work helped it

00:03:58,360 --> 00:04:01,750
on the open BMC code and so therefore

00:04:00,160 --> 00:04:04,150
guess what it's a hundred percent

00:04:01,750 --> 00:04:07,959
compatible you could switch out your

00:04:04,150 --> 00:04:10,470
existing BMC software with the open BMC

00:04:07,959 --> 00:04:12,930
software in the host code

00:04:10,470 --> 00:04:14,280
need to change whatsoever right and

00:04:12,930 --> 00:04:17,880
there's the host code there you can

00:04:14,280 --> 00:04:19,709
actually pick it up it doesn't have to

00:04:17,880 --> 00:04:21,450
like we're not enforcing a rule here

00:04:19,709 --> 00:04:23,790
that says that open power foundation or

00:04:21,450 --> 00:04:25,200
you must go ahead and use the open BMC

00:04:23,790 --> 00:04:26,340
you don't you did actually just use it

00:04:25,200 --> 00:04:27,870
as a reference so if you're building

00:04:26,340 --> 00:04:30,330
your own server and you want to figure

00:04:27,870 --> 00:04:32,940
out how and open or how it open power

00:04:30,330 --> 00:04:35,910
server what the host communicates down

00:04:32,940 --> 00:04:37,440
to the BMC how it interacts heck even if

00:04:35,910 --> 00:04:39,780
you want to know just how to power on

00:04:37,440 --> 00:04:41,610
the Box you can look at the source code

00:04:39,780 --> 00:04:43,440
for free openly available and just use

00:04:41,610 --> 00:04:45,900
it as a reference just figure it out oh

00:04:43,440 --> 00:04:49,590
that's how they did that okay cool

00:04:45,900 --> 00:04:52,590
purely the the open BMC codes that could

00:04:49,590 --> 00:04:55,800
run on a on a barreleye system the the

00:04:52,590 --> 00:04:58,550
LC lock model from IBM which is the 822

00:04:55,800 --> 00:05:04,710
LC as well as the power eight reference

00:04:58,550 --> 00:05:06,300
system from open power yeah we talked a

00:05:04,710 --> 00:05:08,190
little bit of open BMC but basically you

00:05:06,300 --> 00:05:09,630
can swap out your management consoles

00:05:08,190 --> 00:05:10,800
you don't have to have that twenty-four

00:05:09,630 --> 00:05:13,230
hundred you didn't have a twenty five

00:05:10,800 --> 00:05:16,590
hundred you have a completely different

00:05:13,230 --> 00:05:18,270
companies thing chip and then just you

00:05:16,590 --> 00:05:20,250
know change the kernel so that it works

00:05:18,270 --> 00:05:21,990
right and then all the applications all

00:05:20,250 --> 00:05:24,120
the sensors communicate over the Debose

00:05:21,990 --> 00:05:25,650
and then you can communicate and you can

00:05:24,120 --> 00:05:28,770
swap it you can do anything you want on

00:05:25,650 --> 00:05:30,870
the front side what you care about just

00:05:28,770 --> 00:05:34,680
by you know communicating to that rest

00:05:30,870 --> 00:05:37,320
interface if you haven't known a little

00:05:34,680 --> 00:05:40,020
bit about what open via or sorry what

00:05:37,320 --> 00:05:42,060
dbus works every application that we

00:05:40,020 --> 00:05:45,510
have can go ahead and attach interfaces

00:05:42,060 --> 00:05:48,060
to it if you're here so if you're a

00:05:45,510 --> 00:05:52,290
service maybe you're a web service you

00:05:48,060 --> 00:05:54,780
can attach a open BMC service interface

00:05:52,290 --> 00:05:56,550
and then you get you know status and

00:05:54,780 --> 00:05:58,710
information about it if you wanted to

00:05:56,550 --> 00:05:59,940
say like yeah I can be deleted a perfect

00:05:58,710 --> 00:06:02,490
example is that it is if you have an

00:05:59,940 --> 00:06:04,800
airlock so the yeah a particular error

00:06:02,490 --> 00:06:07,440
log can then attach an open vmz delete

00:06:04,800 --> 00:06:09,720
interface and then everybody knows that

00:06:07,440 --> 00:06:11,400
oh that can be deleted and a user could

00:06:09,720 --> 00:06:12,990
go ahead and just get rid of it all

00:06:11,400 --> 00:06:14,400
right especially for an airlock if

00:06:12,990 --> 00:06:17,250
you've read it you understand it this

00:06:14,400 --> 00:06:18,600
and then an inventory item so you have a

00:06:17,250 --> 00:06:21,900
bunch of fruisé so you

00:06:18,600 --> 00:06:24,060
DIMMs fans and you can either claim that

00:06:21,900 --> 00:06:27,500
they're you know in fault true or false

00:06:24,060 --> 00:06:30,390
you could say present true or false

00:06:27,500 --> 00:06:32,400
another great thing about open BMC and

00:06:30,390 --> 00:06:34,020
d-bus of course is that it's totally

00:06:32,400 --> 00:06:36,210
compatible with you know whatever

00:06:34,020 --> 00:06:37,770
language you want to write so here's

00:06:36,210 --> 00:06:39,960
example these are all the different

00:06:37,770 --> 00:06:41,970
applications that we run on the open VM

00:06:39,960 --> 00:06:44,220
sea and you know some are running and

00:06:41,970 --> 00:06:46,830
see some are written at Python just a

00:06:44,220 --> 00:06:50,720
matter of how you wanted to go about how

00:06:46,830 --> 00:06:52,710
about doing it from a rest interface

00:06:50,720 --> 00:06:54,270
sometimes you ask people a spec hey

00:06:52,710 --> 00:06:56,370
what's the schema alright so here's a

00:06:54,270 --> 00:06:59,550
schema you know if you just go to a URL

00:06:56,370 --> 00:07:01,050
or URI of the particular entity you

00:06:59,550 --> 00:07:02,520
would just get the properties of it if

00:07:01,050 --> 00:07:04,950
you do a slash you get to see the

00:07:02,520 --> 00:07:07,230
children of that interface if you do a

00:07:04,950 --> 00:07:10,380
slash list you can see all the children

00:07:07,230 --> 00:07:12,600
and the property's a new Marine if you

00:07:10,380 --> 00:07:15,540
wanted to just read a particular

00:07:12,600 --> 00:07:18,330
property right like one feed or maybe

00:07:15,540 --> 00:07:20,940
the ambient temperature sensor you could

00:07:18,330 --> 00:07:22,380
just in your you know curl call your

00:07:20,940 --> 00:07:24,960
rest call you can just go and get a

00:07:22,380 --> 00:07:27,630
particular property you can call methods

00:07:24,960 --> 00:07:31,080
you can inject air logs you can delete

00:07:27,630 --> 00:07:33,600
air logs all that stuff and then if you

00:07:31,080 --> 00:07:35,940
want oh if you wanted to know what you

00:07:33,600 --> 00:07:38,370
are actually need to call you can use

00:07:35,940 --> 00:07:40,590
slash schema and then I actually tell

00:07:38,370 --> 00:07:43,200
you you know you needed to call it with

00:07:40,590 --> 00:07:45,900
two parameters four parameters whatever

00:07:43,200 --> 00:07:48,210
oh man there wouldn't be a presentation

00:07:45,900 --> 00:07:50,040
with a little bit of code so let's see

00:07:48,210 --> 00:07:51,960
some examples if you wanted to log into

00:07:50,040 --> 00:07:53,310
a server you'd actually run the command

00:07:51,960 --> 00:07:54,990
like this you were just able to go to

00:07:53,310 --> 00:07:57,270
the IP address you care about slash

00:07:54,990 --> 00:07:59,610
login and then you would give it your

00:07:57,270 --> 00:08:02,100
route and your password if you wanted to

00:07:59,610 --> 00:08:03,780
find out about all the the temperatures

00:08:02,100 --> 00:08:05,580
are they okay then you could just run

00:08:03,780 --> 00:08:07,590
this command here temperature sensor

00:08:05,580 --> 00:08:10,020
slash ambient and you to get the ambient

00:08:07,590 --> 00:08:12,000
temperature if you wanted to power on

00:08:10,020 --> 00:08:14,040
the server you just run a command like

00:08:12,000 --> 00:08:17,160
this and boom the system is starting to

00:08:14,040 --> 00:08:18,780
power on and the cool thing is that you

00:08:17,160 --> 00:08:20,670
can swap it out right you don't have to

00:08:18,780 --> 00:08:23,640
do rest all the time in fact we had one

00:08:20,670 --> 00:08:25,950
of our front end designers develop a

00:08:23,640 --> 00:08:27,940
front end to do this and you can see

00:08:25,950 --> 00:08:30,040
that all it well

00:08:27,940 --> 00:08:31,690
what it does is it just goes and makes

00:08:30,040 --> 00:08:33,970
breast calls and it was cool because you

00:08:31,690 --> 00:08:36,250
can put your overlay on top right this

00:08:33,970 --> 00:08:37,300
is an implementation that we do and if

00:08:36,250 --> 00:08:39,729
you wanted to do something completely

00:08:37,300 --> 00:08:42,990
different that was tailored to your to

00:08:39,729 --> 00:08:47,140
your server to your system change it

00:08:42,990 --> 00:08:49,450
where's the code code is there open BMC

00:08:47,140 --> 00:08:51,220
I forget how about from BMC there's a

00:08:49,450 --> 00:08:52,480
readme there so you can learn about how

00:08:51,220 --> 00:08:55,330
to actually build it and stuff it's

00:08:52,480 --> 00:08:57,070
really straightforward I'm a manager and

00:08:55,330 --> 00:08:58,690
I always ask my employees to please make

00:08:57,070 --> 00:09:00,820
it so that I can do it because I love to

00:08:58,690 --> 00:09:02,410
do the to the builds too and you can

00:09:00,820 --> 00:09:04,570
actually go and look at the schema and

00:09:02,410 --> 00:09:07,300
see what we're trying to do for the

00:09:04,570 --> 00:09:09,190
d-bus interfaces themselves you don't

00:09:07,300 --> 00:09:10,810
need to actually have hardware you can

00:09:09,190 --> 00:09:13,150
feel free to put it on but you don't

00:09:10,810 --> 00:09:15,010
have to you can actually run thanks to

00:09:13,150 --> 00:09:16,000
Yocto we didn't do this ourselves we got

00:09:15,010 --> 00:09:20,320
yot tools to do it

00:09:16,000 --> 00:09:22,750
and you can just run it in a simulation

00:09:20,320 --> 00:09:24,220
environment right so just offer QEMU so

00:09:22,750 --> 00:09:26,730
you can do the compile and then you can

00:09:24,220 --> 00:09:30,940
say run and then it'll actually run your

00:09:26,730 --> 00:09:33,070
build in a simulator and then you can

00:09:30,940 --> 00:09:41,500
you know issue calls and see all that

00:09:33,070 --> 00:09:43,030
fun stuff yeah if you care about the

00:09:41,500 --> 00:09:44,710
project you are interested in it the

00:09:43,030 --> 00:09:46,360
thing is every time we drop code we

00:09:44,710 --> 00:09:47,800
always drop coding to get we don't kind

00:09:46,360 --> 00:09:51,100
of hold it off to the side and then do a

00:09:47,800 --> 00:09:53,590
massive push we drop everyday code into

00:09:51,100 --> 00:09:55,270
github and then every time there's a

00:09:53,590 --> 00:09:57,250
commit we actually have an open powered

00:09:55,270 --> 00:09:58,960
on XYZ server and it actually kicks off

00:09:57,250 --> 00:10:00,730
the compile and make sure is that I

00:09:58,960 --> 00:10:03,010
didn't break the build or anybody else

00:10:00,730 --> 00:10:03,960
didn't break the bill it's really nice

00:10:03,010 --> 00:10:07,210
and easy

00:10:03,960 --> 00:10:09,070
so what's next right this code stack is

00:10:07,210 --> 00:10:10,780
designed to go on to a couple different

00:10:09,070 --> 00:10:12,700
things number one the p9 server

00:10:10,780 --> 00:10:16,110
reference system the reference board

00:10:12,700 --> 00:10:18,220
will have the open vm c code stack on it

00:10:16,110 --> 00:10:20,170
this is going to be a continually

00:10:18,220 --> 00:10:22,450
growing project because you know IBM

00:10:20,170 --> 00:10:24,790
internal servers we're also going to be

00:10:22,450 --> 00:10:26,920
putting an open BMC stack on to that and

00:10:24,790 --> 00:10:29,650
you know maybe on to your server as well

00:10:26,920 --> 00:10:31,720
if you'd like if you'd like to join and

00:10:29,650 --> 00:10:33,780
help out what can you do well you can do

00:10:31,720 --> 00:10:36,550
lots I'd love to get some help

00:10:33,780 --> 00:10:38,540
first of all designs really beyond the

00:10:36,550 --> 00:10:41,150
data center would be fantastic

00:10:38,540 --> 00:10:42,860
enhancements to QEMU for the specific

00:10:41,150 --> 00:10:44,330
chip that would be great because right

00:10:42,860 --> 00:10:46,580
now it's assimilated one would love to

00:10:44,330 --> 00:10:48,380
have somebody where it can pretend that

00:10:46,580 --> 00:10:51,110
the fan is actually wobbling and then we

00:10:48,380 --> 00:10:53,060
can see what the system works like red

00:10:51,110 --> 00:10:55,700
fish red fish is kind of the new

00:10:53,060 --> 00:10:58,130
industry standard for rest-based

00:10:55,700 --> 00:11:00,350
system management we'd love to get some

00:10:58,130 --> 00:11:02,150
help on that we have some inroads going

00:11:00,350 --> 00:11:04,370
and we love to get more because I think

00:11:02,150 --> 00:11:07,280
it's so new that it was great to have

00:11:04,370 --> 00:11:10,880
more people talking about it test

00:11:07,280 --> 00:11:13,850
automation compliance all right down I'm

00:11:10,880 --> 00:11:15,320
done so this is the last slide this is

00:11:13,850 --> 00:11:17,930
my email address this is where the

00:11:15,320 --> 00:11:20,120
documentation is located the code is

00:11:17,930 --> 00:11:22,280
there and if you want to talk to any of

00:11:20,120 --> 00:11:25,130
us that are on the project right off of

00:11:22,280 --> 00:11:27,170
freenode net if you go to the open BMC

00:11:25,130 --> 00:11:29,240
hashtag you're the channel you'll

00:11:27,170 --> 00:11:31,490
actually be able to have developers and

00:11:29,240 --> 00:11:36,230
it's a worldwide team right like it's

00:11:31,490 --> 00:11:37,700
India China Australia on the US and so

00:11:36,230 --> 00:11:39,830
anytime you're in the day or night

00:11:37,700 --> 00:11:41,480
whenever you're available if you ask the

00:11:39,830 --> 00:11:43,520
question and I like hid somebody's

00:11:41,480 --> 00:11:45,470
around that actually you know reply back

00:11:43,520 --> 00:11:47,920
to the to the question or go off and

00:11:45,470 --> 00:11:47,920

YouTube URL: https://www.youtube.com/watch?v=5uSNsE-mHx4


