Title: [OLF 2019] Power your Directory with Samba
Publication date: 2020-01-06
Playlist: 2019 Videos
Description: 
	Speaker: Don Vosburg
Slides: https://ohiolinux.org/wp-content/uploads/2019/11/2019-openSUSE_AD_samba_v2.pdf
Videographer: Ernest Parke


You can have a powerful Active Directory environment without the burden of Windows servers. That’s right – Samba can run a powerful domain and enable your Windows machines to join. Find out how it was implemented in an environment with two buildings and 200 computers. Gain insight from lessons learned and see a live demo.
Captions: 
	00:00:01,889 --> 00:00:09,639
hi I'm dawn Vosburgh I'm a guy who is

00:00:07,299 --> 00:00:12,190
not a programmer but I still contribute

00:00:09,639 --> 00:00:14,529
to open source right mostly by

00:00:12,190 --> 00:00:17,830
submitting bugs and by trying to

00:00:14,529 --> 00:00:22,150
implement this stuff so I'm the person

00:00:17,830 --> 00:00:26,560
who has been complaining about your lack

00:00:22,150 --> 00:00:31,089
of documentation and trying to do things

00:00:26,560 --> 00:00:34,870
by Google for many years so I work for

00:00:31,089 --> 00:00:40,890
Susa and my day job but in my part-time

00:00:34,870 --> 00:00:45,399
hobby ish things I'm consultant and my

00:00:40,890 --> 00:00:48,820
my biggest customer is a school district

00:00:45,399 --> 00:00:53,109
in Anderson Indiana a private school and

00:00:48,820 --> 00:00:54,820
I have with me three of my current and

00:00:53,109 --> 00:01:00,429
former coworkers

00:00:54,820 --> 00:01:03,010
this is my son Duncan he's he's studying

00:01:00,429 --> 00:01:06,780
at Ball State University this is Trent

00:01:03,010 --> 00:01:10,380
Zimmer Trent is a high school student at

00:01:06,780 --> 00:01:15,670
APA Anderson Preparatory Academy and

00:01:10,380 --> 00:01:20,070
this is Zach Zach painter is a student

00:01:15,670 --> 00:01:24,310
at Rose Hulman University so yeah well

00:01:20,070 --> 00:01:27,280
go engineers right okay so power your

00:01:24,310 --> 00:01:31,240
directory with Samba this is actually a

00:01:27,280 --> 00:01:34,390
reprise of a topic I spoke on 10 years

00:01:31,240 --> 00:01:38,230
ago at Ohio Linux Fest so some of you

00:01:34,390 --> 00:01:42,510
are old enough to remember that I spoke

00:01:38,230 --> 00:01:46,570
on samba So You Think You Can Dance and

00:01:42,510 --> 00:01:49,240
in them days it was ugly as heck but

00:01:46,570 --> 00:01:50,140
it's and it's still somewhat ugly but

00:01:49,240 --> 00:01:52,210
we're going to have an adventure

00:01:50,140 --> 00:01:55,810
together and enjoy and have a good time

00:01:52,210 --> 00:01:58,810
so always I ask myself the question

00:01:55,810 --> 00:02:00,550
first why the heck would anybody want to

00:01:58,810 --> 00:02:03,760
do this ok

00:02:00,550 --> 00:02:08,170
so we'll explore that a bit about Samba

00:02:03,760 --> 00:02:11,129
and openSUSE sorry it's my context right

00:02:08,170 --> 00:02:14,230
ok so I'm wearing my son to West's shirt

00:02:11,129 --> 00:02:17,580
just so you guys can feel better

00:02:14,230 --> 00:02:20,530
right but we do have some Center West's

00:02:17,580 --> 00:02:25,060
but specifically this project was done

00:02:20,530 --> 00:02:26,980
on openSUSE so and then I'll explain the

00:02:25,060 --> 00:02:28,810
case study environment why am i cutting

00:02:26,980 --> 00:02:32,980
in and out chief what's going on with

00:02:28,810 --> 00:02:35,200
that and then how we implemented it

00:02:32,980 --> 00:02:41,650
including some of the implementers that

00:02:35,200 --> 00:02:44,260
are here in this room okay and then

00:02:41,650 --> 00:02:47,019
we'll do a live look in I don't want to

00:02:44,260 --> 00:02:50,440
call it a demo because it's the real

00:02:47,019 --> 00:02:51,540
thing okay so we're looking at one in

00:02:50,440 --> 00:02:54,459
production

00:02:51,540 --> 00:02:58,629
Jason oh my gosh I haven't seen you for

00:02:54,459 --> 00:03:03,040
a long time how are you so why do this

00:02:58,629 --> 00:03:06,670
at all first because you have more time

00:03:03,040 --> 00:03:10,420
than money which is especially true of

00:03:06,670 --> 00:03:16,510
the school district that just paid me

00:03:10,420 --> 00:03:17,140
yesterday for work done in July Active

00:03:16,510 --> 00:03:18,940
Directory

00:03:17,140 --> 00:03:21,790
is like the standard for

00:03:18,940 --> 00:03:24,340
interoperability come on you know don't

00:03:21,790 --> 00:03:27,880
try to tell me that it's not everyone

00:03:24,340 --> 00:03:31,209
uses ad even though it came from

00:03:27,880 --> 00:03:34,060
Microsoft right you know the simplicity

00:03:31,209 --> 00:03:37,000
and ubiquity of the administrative tools

00:03:34,060 --> 00:03:43,180
around it are just out there so

00:03:37,000 --> 00:03:46,120
everybody knows how to run the user

00:03:43,180 --> 00:03:50,730
tools for Active Directory and we'll

00:03:46,120 --> 00:03:53,230
look at some of that even even part-time

00:03:50,730 --> 00:03:55,239
persons know how to use that and it's

00:03:53,230 --> 00:04:00,879
easier for me to hand them debt than to

00:03:55,239 --> 00:04:04,060
say oh just add an LDAP user right and

00:04:00,879 --> 00:04:07,359
because Linux is just way cooler than

00:04:04,060 --> 00:04:09,459
Windows this is a reason it's at the

00:04:07,359 --> 00:04:11,349
bottom of the reasons because doing

00:04:09,459 --> 00:04:16,930
things because they're cool does not

00:04:11,349 --> 00:04:19,239
sell very much okay so how does Samba

00:04:16,930 --> 00:04:22,930
deliver AD so those of you who have been

00:04:19,239 --> 00:04:25,599
around for a long time grew up with how

00:04:22,930 --> 00:04:27,830
many of you installed samba to anybody

00:04:25,599 --> 00:04:30,650
oh yeah well

00:04:27,830 --> 00:04:32,960
okay okay so you're older than me no I'm

00:04:30,650 --> 00:04:35,120
just kidding you you're probably not

00:04:32,960 --> 00:04:39,830
older you might be older than me I'm in

00:04:35,120 --> 00:04:43,460
my 60s so samba4 was a promise for a

00:04:39,830 --> 00:04:46,120
long time and the integration and

00:04:43,460 --> 00:04:50,659
promise of creating Active Directory is

00:04:46,120 --> 00:04:54,500
is a nice thing and several key services

00:04:50,659 --> 00:04:58,669
get consolidated into what is this the

00:04:54,500 --> 00:05:02,750
Samba ad DC service so Samba basically

00:04:58,669 --> 00:05:04,580
took used to be just SMB and NMB so he

00:05:02,750 --> 00:05:08,030
had Samba shares and then he had wind

00:05:04,580 --> 00:05:10,550
bind to do some of the translation

00:05:08,030 --> 00:05:14,500
between the POSIX you would Gibbs and

00:05:10,550 --> 00:05:18,169
the Windows stuff for identity things

00:05:14,500 --> 00:05:21,729
but what Sambas done is build it to

00:05:18,169 --> 00:05:24,650
where I have LDAP DNS and Kerberos all

00:05:21,729 --> 00:05:28,819
controlled in one centralized service

00:05:24,650 --> 00:05:32,389
called Samba so it has a single

00:05:28,819 --> 00:05:35,949
configuration tool Samba - tool this is

00:05:32,389 --> 00:05:39,139
from the Linux point of view okay so

00:05:35,949 --> 00:05:41,599
once you're you're done setting it up on

00:05:39,139 --> 00:05:44,240
the Linux side you can give people the

00:05:41,599 --> 00:05:48,349
Active Directory tools to be able to

00:05:44,240 --> 00:05:52,370
administer so from the Linux side though

00:05:48,349 --> 00:05:55,339
Samba - tool is the thing the default

00:05:52,370 --> 00:05:58,270
Kerberos server that comes along with

00:05:55,339 --> 00:06:02,150
that a crypt encryption in Samba is

00:05:58,270 --> 00:06:06,560
heimdal so how many of you read have

00:06:02,150 --> 00:06:11,599
people run heimdal nobody right because

00:06:06,560 --> 00:06:16,629
we're all MIT Kerberos people in red

00:06:11,599 --> 00:06:20,120
both Red Hat and Sousa use MIT Kerberos

00:06:16,629 --> 00:06:26,210
Heimdall was not the server of choice

00:06:20,120 --> 00:06:28,400
and thus before Samba 4.7 your only

00:06:26,210 --> 00:06:34,599
choice was to run it on a distribution

00:06:28,400 --> 00:06:39,380
that was not Suzhou or Red Hat okay so

00:06:34,599 --> 00:06:41,600
MIT was actually added in 4.7 and this

00:06:39,380 --> 00:06:45,140
timing sort of coalesced with my

00:06:41,600 --> 00:06:48,830
project so you'll see some of the pains

00:06:45,140 --> 00:06:52,490
from nap to DNS you have your choice you

00:06:48,830 --> 00:06:58,100
can either use the internal DNS which

00:06:52,490 --> 00:07:00,980
has the Windows dish extensions to DNS

00:06:58,100 --> 00:07:03,500
that make it special

00:07:00,980 --> 00:07:11,450
right DNS was perfectly fine before

00:07:03,500 --> 00:07:15,740
Microsoft jacked it up but yeah wow it's

00:07:11,450 --> 00:07:19,550
true ain't it yeah yeah yeah they

00:07:15,740 --> 00:07:21,320
changed it a lot so so you can either

00:07:19,550 --> 00:07:25,400
use the internal one or you can actually

00:07:21,320 --> 00:07:30,050
use a bind configuration for the 4ad

00:07:25,400 --> 00:07:34,490
in my example we chose to sub domain so

00:07:30,050 --> 00:07:37,460
our Deena's control for the ad domain as

00:07:34,490 --> 00:07:41,260
a subdomain ad dot Liberty online dot

00:07:37,460 --> 00:07:44,360
org and the rest of it is all bind but I

00:07:41,260 --> 00:07:46,760
just took the ad part and let it be part

00:07:44,360 --> 00:07:52,040
of the Samba tool and it really worked

00:07:46,760 --> 00:07:54,440
out I I was scared LDAP is also handled

00:07:52,040 --> 00:07:57,530
only by the internal Samba service so

00:07:54,440 --> 00:08:00,170
don't try to implement samba ad thinking

00:07:57,530 --> 00:08:04,190
you'll be able to use your open LDAP or

00:08:00,170 --> 00:08:06,350
389 di server it won't work Samba

00:08:04,190 --> 00:08:09,620
recommends a separate domain controller

00:08:06,350 --> 00:08:13,610
for ad so don't put the shares on the

00:08:09,620 --> 00:08:18,170
same instance that you're running the DC

00:08:13,610 --> 00:08:20,870
ok and you know we're in a world where

00:08:18,170 --> 00:08:23,060
it's not about trying to consolidate

00:08:20,870 --> 00:08:26,570
everything onto one monolithic server

00:08:23,060 --> 00:08:30,170
anyway so splitting that up is not a bad

00:08:26,570 --> 00:08:32,539
idea I did mind with all VMs which I

00:08:30,170 --> 00:08:36,320
mean it makes sense to cut it up like

00:08:32,539 --> 00:08:40,430
that so here's some of the limitations

00:08:36,320 --> 00:08:42,919
of Samba ad and this maybe goes back to

00:08:40,430 --> 00:08:43,880
ask me again why in the world would I do

00:08:42,919 --> 00:08:48,920
this

00:08:43,880 --> 00:08:50,810
there is no PowerShell ad module so even

00:08:48,920 --> 00:08:54,320
though Microsoft has been really nice

00:08:50,810 --> 00:08:55,110
about trying to make everyone use a

00:08:54,320 --> 00:08:57,480
command

00:08:55,110 --> 00:09:01,709
line now as they should have done years

00:08:57,480 --> 00:09:06,990
ago that integration is not there for

00:09:01,709 --> 00:09:09,420
somebody the Samba team knows this and I

00:09:06,990 --> 00:09:11,910
don't know the status if it takes as

00:09:09,420 --> 00:09:17,329
long as it did for Samba for to come out

00:09:11,910 --> 00:09:20,640
it might be 2030 limited sysvol

00:09:17,329 --> 00:09:23,910
replication so how many of you know what

00:09:20,640 --> 00:09:25,890
sis file replication is a few yeah if

00:09:23,910 --> 00:09:27,870
you're a Windows administrator you know

00:09:25,890 --> 00:09:31,170
this is where all the GPIOs or the

00:09:27,870 --> 00:09:33,630
policy objects are stored and there's

00:09:31,170 --> 00:09:39,570
windows services that replicate those

00:09:33,630 --> 00:09:41,850
and in samba there aren't samba services

00:09:39,570 --> 00:09:46,529
for replicating that there's a hacky way

00:09:41,850 --> 00:09:50,250
you can use our sink so that was manual

00:09:46,529 --> 00:09:55,339
and hacky and took a while the directory

00:09:50,250 --> 00:09:58,110
mode maximum right now is 2008 r2 so

00:09:55,339 --> 00:10:02,910
don't try to do your you know

00:09:58,110 --> 00:10:06,029
exclusively directory mode 2016 and then

00:10:02,910 --> 00:10:07,350
just joint your your Samba ad to that

00:10:06,029 --> 00:10:11,430
it's not going to happen

00:10:07,350 --> 00:10:13,980
okay and then you had we ran into some

00:10:11,430 --> 00:10:16,730
limited application of computer GPIOs

00:10:13,980 --> 00:10:21,269
and some of this had to do with the MIT

00:10:16,730 --> 00:10:26,160
Kerberos stuff too so anyway here's the

00:10:21,269 --> 00:10:29,600
way samba and samba ad happened in our

00:10:26,160 --> 00:10:34,230
distribution Samba for first arrived in

00:10:29,600 --> 00:10:38,459
2014 and in January of 2014 we had Samba

00:10:34,230 --> 00:10:41,010
4.1 and we told everybody it does not

00:10:38,459 --> 00:10:45,060
include support to operate as active

00:10:41,010 --> 00:10:48,140
directory so sorry you can just use

00:10:45,060 --> 00:10:52,680
regular shares and all of that because

00:10:48,140 --> 00:11:01,050
the it did not integrate with MIT

00:10:52,680 --> 00:11:03,240
Kerberos but magically in four seven we

00:11:01,050 --> 00:11:08,130
introduced for the first time and

00:11:03,240 --> 00:11:09,350
openSUSE leap 15 packages that had the

00:11:08,130 --> 00:11:14,310
Samba - two

00:11:09,350 --> 00:11:17,790
so right now in leap 15 which is the one

00:11:14,310 --> 00:11:20,700
that correlates dis less you have samba

00:11:17,790 --> 00:11:24,810
4.9 it's four nine five something still

00:11:20,700 --> 00:11:26,910
in a maintained branch four eleven is in

00:11:24,810 --> 00:11:29,430
tumbleweed tumbleweeds the rolling

00:11:26,910 --> 00:11:32,460
release and most people don't run

00:11:29,430 --> 00:11:34,860
rolling releases on servers how many of

00:11:32,460 --> 00:11:39,590
you have arch servers in your world

00:11:34,860 --> 00:11:39,590
right whoa dude

00:11:41,660 --> 00:11:51,840
give him this sticker will you holy cow

00:11:48,780 --> 00:11:55,380
okay yeah I probably should have known

00:11:51,840 --> 00:11:58,050
that huh okay so here's your

00:11:55,380 --> 00:12:00,660
distribution of choice may have

00:11:58,050 --> 00:12:03,900
different package names these are the

00:12:00,660 --> 00:12:06,360
ones that we include so a general Samba

00:12:03,900 --> 00:12:10,200
one one that has a client this one

00:12:06,360 --> 00:12:12,960
connects to a self-storage we didn't use

00:12:10,200 --> 00:12:16,320
that in my example the important one

00:12:12,960 --> 00:12:21,510
that was not their previous is Samba a

00:12:16,320 --> 00:12:24,480
DDC which has its own Samba - tool which

00:12:21,510 --> 00:12:27,240
is the executable to manage the active

00:12:24,480 --> 00:12:34,770
directory piece these are the official

00:12:27,240 --> 00:12:37,800
Samba releases as of four days ago 4.12

00:12:34,770 --> 00:12:41,310
is upcoming the most current is 4.11 and

00:12:37,800 --> 00:12:46,470
they will they they have this declining

00:12:41,310 --> 00:12:50,670
table in support ability 4.8 was

00:12:46,470 --> 00:12:54,720
discontinued September the 17th 4.9 is

00:12:50,670 --> 00:12:59,070
still getting security patches 10 and 11

00:12:54,720 --> 00:12:59,970
are our current we use we were using for

00:12:59,070 --> 00:13:04,880
tat nine right now

00:12:59,970 --> 00:13:07,830
we started with 4.7 and that was a mess

00:13:04,880 --> 00:13:11,910
okay so here's our case study

00:13:07,830 --> 00:13:15,180
environment it's Liberty Christian

00:13:11,910 --> 00:13:16,800
school in Anderson Indiana there's about

00:13:15,180 --> 00:13:19,080
five hundred 50s they have two

00:13:16,800 --> 00:13:22,499
facilities they have a high school this

00:13:19,080 --> 00:13:25,199
is the elementary facility and nails

00:13:22,499 --> 00:13:27,779
Highschool there's about five hundred

00:13:25,199 --> 00:13:32,459
fifty total students K through 12 and

00:13:27,779 --> 00:13:35,699
about 80 staff there's about a 150 or so

00:13:32,459 --> 00:13:40,109
Windows PCs and Windows 10 is our

00:13:35,699 --> 00:13:44,479
standard Zack helped to build the image

00:13:40,109 --> 00:13:47,009
for that this summer again kudos to him

00:13:44,479 --> 00:13:50,159
we have somewhere around five hundred

00:13:47,009 --> 00:13:51,839
seventy five active Chromebooks and a

00:13:50,159 --> 00:13:54,029
whole bunch of them that are essentially

00:13:51,839 --> 00:13:56,429
bricks because Google stopped supporting

00:13:54,029 --> 00:13:59,189
the hardware and then there's

00:13:56,429 --> 00:14:02,519
approximately one old its system

00:13:59,189 --> 00:14:04,679
administrator because I say

00:14:02,519 --> 00:14:10,319
approximately because I'm not really

00:14:04,679 --> 00:14:12,719
full-time and I'm sort of old well we

00:14:10,319 --> 00:14:16,589
have two teenage helpers Zack and Trent

00:14:12,719 --> 00:14:21,119
here and then the school actually deemed

00:14:16,589 --> 00:14:25,499
it alright alright will cave in and give

00:14:21,119 --> 00:14:28,470
you one part-time staff person so for

00:14:25,499 --> 00:14:31,919
the last two years I've had a part-time

00:14:28,470 --> 00:14:36,179
staff person to help out with I can't

00:14:31,919 --> 00:14:39,899
print kind of questions so here's the IT

00:14:36,179 --> 00:14:43,889
information each facility is running two

00:14:39,899 --> 00:14:45,839
clustered KVM servers the reason is

00:14:43,889 --> 00:14:49,649
because when I started doing this ten

00:14:45,839 --> 00:14:52,589
years ago for a charitable stipend I had

00:14:49,649 --> 00:14:55,709
that I only agreed to do it if they gave

00:14:52,589 --> 00:14:59,249
me discretion to inject as much Linux as

00:14:55,709 --> 00:15:02,249
I wanted to into their environment so we

00:14:59,249 --> 00:15:07,799
have a lot and most of our servers were

00:15:02,249 --> 00:15:13,679
purchased on eBay and have had varying

00:15:07,799 --> 00:15:18,109
chequered hardware health issues but you

00:15:13,679 --> 00:15:23,189
know it's ok we use storage via I scuzzy

00:15:18,109 --> 00:15:24,989
Leap 15:1 now is on all of the servers

00:15:23,189 --> 00:15:28,879
so they're not burning any of my

00:15:24,989 --> 00:15:32,129
enterprise licenses it's all open stuff

00:15:28,879 --> 00:15:33,629
we have two Windows servers one of which

00:15:32,129 --> 00:15:36,000
is getting ready to be decommissioned

00:15:33,629 --> 00:15:39,720
and they're running as apply

00:15:36,000 --> 00:15:42,780
ances so Windows is really good running

00:15:39,720 --> 00:15:47,880
a single application that's really where

00:15:42,780 --> 00:15:50,880
we put it okay so SUSE Linux Enterprise

00:15:47,880 --> 00:15:56,130
Server was the default when I started in

00:15:50,880 --> 00:15:59,580
2009 we started with less 11 just even

00:15:56,130 --> 00:16:02,910
before with GA so with really old and

00:15:59,580 --> 00:16:06,030
kind of ugly and we moved everything to

00:16:02,910 --> 00:16:11,280
to leap 15 Windows 10 is our standard

00:16:06,030 --> 00:16:14,220
Windows and we have a DC and a share

00:16:11,280 --> 00:16:16,260
server in each of the two facilities so

00:16:14,220 --> 00:16:19,200
I have one server that's running all my

00:16:16,260 --> 00:16:21,450
shares and one that's a DC in each

00:16:19,200 --> 00:16:23,460
building however because we have fiber

00:16:21,450 --> 00:16:27,300
between them

00:16:23,460 --> 00:16:30,450
people have shares access to shares in

00:16:27,300 --> 00:16:33,990
both buildings so if the connection

00:16:30,450 --> 00:16:37,410
between buildings is down like it was on

00:16:33,990 --> 00:16:40,980
Monday morning because of a failed

00:16:37,410 --> 00:16:45,690
network card people complain that they

00:16:40,980 --> 00:16:47,730
can't see their files so what are we the

00:16:45,690 --> 00:16:51,180
compelling events that drove us to do

00:16:47,730 --> 00:16:54,810
this insanity first of all we had a nine

00:16:51,180 --> 00:16:57,410
year old Samba 3 LDAP domain that was

00:16:54,810 --> 00:17:01,560
getting more difficult to support and

00:16:57,410 --> 00:17:06,110
and every time there was a user change I

00:17:01,560 --> 00:17:08,579
had to do it and that was not good so

00:17:06,110 --> 00:17:12,240
and it was getting harder to support in

00:17:08,579 --> 00:17:18,209
fact Windows 10 1803 breaks the domain

00:17:12,240 --> 00:17:21,270
join so if you have Samba 3 LDAP how

00:17:18,209 --> 00:17:26,370
many of you run Samba 3 somewhere anyone

00:17:21,270 --> 00:17:30,060
yeah yeah this is a problem ok so even

00:17:26,370 --> 00:17:32,820
though it can stay in you can't use the

00:17:30,060 --> 00:17:37,500
domain join utility anymore with a Samba

00:17:32,820 --> 00:17:42,380
3 domain even with all of my very cool

00:17:37,500 --> 00:17:45,050
registry hacks we needed a better

00:17:42,380 --> 00:17:51,049
standardization and interoperability

00:17:45,050 --> 00:17:54,149
also plan for post the post Don

00:17:51,049 --> 00:17:58,070
included something normal people could

00:17:54,149 --> 00:18:01,169
use right and we had no budget okay so

00:17:58,070 --> 00:18:05,909
no money but we got to do all these

00:18:01,169 --> 00:18:08,250
things and the local admins no windows

00:18:05,909 --> 00:18:10,860
for what that's worth

00:18:08,250 --> 00:18:14,130
and it's worth some time is what it's

00:18:10,860 --> 00:18:17,580
worth so here's how we implemented it

00:18:14,130 --> 00:18:20,309
and what what our design was we put a DC

00:18:17,580 --> 00:18:24,269
virtual machine in each of the two

00:18:20,309 --> 00:18:28,620
facilities and then we did what's called

00:18:24,269 --> 00:18:34,080
the classic upgrade from Samba 3 LDAP to

00:18:28,620 --> 00:18:36,870
Active Directory this is classic

00:18:34,080 --> 00:18:39,720
in that you remember how hard you worked

00:18:36,870 --> 00:18:48,029
when you first started in IT we're gonna

00:18:39,720 --> 00:18:50,909
take you back to those days we chose to

00:18:48,029 --> 00:18:56,700
use the internal DNS for our Samba ad

00:18:50,909 --> 00:18:59,220
domain so we just added the sub domain

00:18:56,700 --> 00:19:03,389
ad dot Liberty online dot org and then

00:18:59,220 --> 00:19:05,250
forward it out to the bind environment

00:19:03,389 --> 00:19:09,510
for the rest of my DNS for Liberty

00:19:05,250 --> 00:19:13,080
online org we retained all the old share

00:19:09,510 --> 00:19:17,360
server names because we really didn't

00:19:13,080 --> 00:19:21,330
want to have to redo drive mappings and

00:19:17,360 --> 00:19:25,399
we rebuilt brand new VMs as domain

00:19:21,330 --> 00:19:28,980
members to deliver those shares so

00:19:25,399 --> 00:19:32,730
reconnecting and a fest points and I

00:19:28,980 --> 00:19:35,070
scuzzy shares and all of that stuff we

00:19:32,730 --> 00:19:37,559
reconfigure the dependent services so

00:19:35,070 --> 00:19:40,740
there were two things that you that you

00:19:37,559 --> 00:19:43,710
were using the LDAP previous our school

00:19:40,740 --> 00:19:51,320
information system and Google G Suites

00:19:43,710 --> 00:19:54,090
so we use GCD aus Google cloud directory

00:19:51,320 --> 00:19:57,860
sync is that what it is right

00:19:54,090 --> 00:20:01,039
Google cloud directory sync yeah so

00:19:57,860 --> 00:20:03,450
essentially every night a script runs

00:20:01,039 --> 00:20:08,220
that synchronizes the

00:20:03,450 --> 00:20:10,049
ad domain with the Google domain so

00:20:08,220 --> 00:20:13,769
that's important for a school district

00:20:10,049 --> 00:20:17,130
because for us we use graduation year as

00:20:13,769 --> 00:20:20,279
a separate oh you so that way the

00:20:17,130 --> 00:20:23,130
students that are graduated five years

00:20:20,279 --> 00:20:26,250
ago their accounts ur to go off the map

00:20:23,130 --> 00:20:28,710
until they push the panic button and

00:20:26,250 --> 00:20:32,010
call the school office and say oh my

00:20:28,710 --> 00:20:35,700
Docs were there we have to go back and

00:20:32,010 --> 00:20:38,429
help them and then we wanted to

00:20:35,700 --> 00:20:41,909
replicate it in a virtual world first to

00:20:38,429 --> 00:20:45,480
test because if you don't replicate it

00:20:41,909 --> 00:20:47,700
in a virtual environment and test it you

00:20:45,480 --> 00:20:50,760
really won't understand what's going on

00:20:47,700 --> 00:20:52,740
the problem with cap classic one of the

00:20:50,760 --> 00:20:56,250
problems with classic upgrades is it's

00:20:52,740 --> 00:21:00,600
one-way right once you do it that's the

00:20:56,250 --> 00:21:03,210
end right there's no going back so we

00:21:00,600 --> 00:21:05,970
were there in January oh yeah and you

00:21:03,210 --> 00:21:09,029
want to make sure you have really

00:21:05,970 --> 00:21:11,789
helpful people like Trent and Zach to

00:21:09,029 --> 00:21:17,760
make this work right so they were there

00:21:11,789 --> 00:21:20,789
as hands and and legs in the process so

00:21:17,760 --> 00:21:23,700
there's good and bad and and ugly

00:21:20,789 --> 00:21:26,700
there's far more good than there is bad

00:21:23,700 --> 00:21:29,309
or ugly but I'll explain all of this

00:21:26,700 --> 00:21:31,620
briefly anyway all the users are

00:21:29,309 --> 00:21:35,639
machines with passport passwords

00:21:31,620 --> 00:21:41,100
imported everything we imported it and I

00:21:35,639 --> 00:21:46,590
could see it the shares work okay my

00:21:41,100 --> 00:21:48,659
windows admin tools work ah and we

00:21:46,590 --> 00:21:54,210
accomplished it over winter break this

00:21:48,659 --> 00:21:56,490
January although some of this I don't

00:21:54,210 --> 00:21:58,559
know if you call it winter break when

00:21:56,490 --> 00:22:00,809
you're working on something at 2:30 in

00:21:58,559 --> 00:22:03,360
the morning if that would be a break

00:22:00,809 --> 00:22:07,260
right but we've been running

00:22:03,360 --> 00:22:08,730
continuously since then so this is the

00:22:07,260 --> 00:22:13,049
first school year where we've actually

00:22:08,730 --> 00:22:17,460
had the ad front-end and it has made for

00:22:13,049 --> 00:22:17,910
less work for me by by offloading my

00:22:17,460 --> 00:22:21,930
user

00:22:17,910 --> 00:22:25,020
management stuff the bad part is all the

00:22:21,930 --> 00:22:25,350
users were stuck into one oh you all of

00:22:25,020 --> 00:22:29,340
them

00:22:25,350 --> 00:22:32,010
I had like several oh use but it put

00:22:29,340 --> 00:22:35,760
them all into one the groups were

00:22:32,010 --> 00:22:41,160
imported but unpopulated so I had group

00:22:35,760 --> 00:22:43,590
names right and nobody in them so these

00:22:41,160 --> 00:22:46,020
guys helped me helped me to get past

00:22:43,590 --> 00:22:49,140
that one that was that was the classic

00:22:46,020 --> 00:22:52,620
part right we needed a bunch of file

00:22:49,140 --> 00:22:54,600
permission changes prom I mean this was

00:22:52,620 --> 00:22:58,500
because of how our shears were

00:22:54,600 --> 00:23:01,980
constructed and obviously in moving over

00:22:58,500 --> 00:23:04,110
the file ownerships changed so we had to

00:23:01,980 --> 00:23:07,440
do so that we use group level permission

00:23:04,110 --> 00:23:14,880
changes mostly to get past that the

00:23:07,440 --> 00:23:16,380
manual system I'll represent and test

00:23:14,880 --> 00:23:18,780
that and make sure everything was

00:23:16,380 --> 00:23:21,570
working between the two buildings so

00:23:18,780 --> 00:23:24,000
that way when we create a policies they

00:23:21,570 --> 00:23:25,310
actually show up on all the computers

00:23:24,000 --> 00:23:29,880
right

00:23:25,310 --> 00:23:32,550
all of these are mitigated now and we've

00:23:29,880 --> 00:23:36,240
gone past this week everything's working

00:23:32,550 --> 00:23:39,270
those were temporary issues that we had

00:23:36,240 --> 00:23:44,750
to mess with but it's fixed now this was

00:23:39,270 --> 00:23:47,850
an ugly one which I did not see until a

00:23:44,750 --> 00:23:51,000
week after I'd done the implementation

00:23:47,850 --> 00:23:55,560
that Samba labeled the MIT Kerberos I

00:23:51,000 --> 00:23:58,470
was using experimental this was not a

00:23:55,560 --> 00:24:01,740
good thing to find out after you've done

00:23:58,470 --> 00:24:05,250
a project right after you've done all

00:24:01,740 --> 00:24:07,740
these and the reason is because there

00:24:05,250 --> 00:24:13,680
was a bug that affected it at deploy

00:24:07,740 --> 00:24:15,990
time so this bug which is CVE all of you

00:24:13,680 --> 00:24:19,010
guys familiar with CVS common

00:24:15,990 --> 00:24:22,560
vulnerabilities and exposures

00:24:19,010 --> 00:24:24,860
essentially the effect was at random

00:24:22,560 --> 00:24:29,430
times during the day the Kerberos server

00:24:24,860 --> 00:24:31,419
stopped which if the Kerberos server

00:24:29,430 --> 00:24:35,079
isn't running

00:24:31,419 --> 00:24:37,479
how many people can log-in zero right

00:24:35,079 --> 00:24:41,979
nobody yeah so this is not a good thing

00:24:37,479 --> 00:24:44,889
I had to write a custom salt state that

00:24:41,979 --> 00:24:47,649
would check if the Kerberos process was

00:24:44,889 --> 00:24:50,109
running and as soon as it stopped it

00:24:47,649 --> 00:24:53,919
would send a beacon to my salt master in

00:24:50,109 --> 00:24:57,190
the self master would would tell it to

00:24:53,919 --> 00:25:00,149
restart Samba so this was happening

00:24:57,190 --> 00:25:02,919
quite a bit during the first week or so

00:25:00,149 --> 00:25:06,249
and then they fixed the bug in the

00:25:02,919 --> 00:25:09,459
software and it went away so even this

00:25:06,249 --> 00:25:13,839
is mitigated too so the reality is we've

00:25:09,459 --> 00:25:16,539
got something really good so any

00:25:13,839 --> 00:25:34,589
questions before we do a live look in

00:25:16,539 --> 00:25:34,589
here yeah yes on a shared file system

00:25:34,619 --> 00:25:41,889
well you you run the risk because Samba

00:25:39,849 --> 00:25:46,239
does not know and that's a good question

00:25:41,889 --> 00:25:50,909
in and you should get so are you wearing

00:25:46,239 --> 00:25:50,909
the Red Hat to annoy me or just because

00:25:52,349 --> 00:26:02,079
ok well that's fair then here I'll give

00:25:54,969 --> 00:26:04,509
you this so I just had to ask right

00:26:02,079 --> 00:26:13,269
because some of us even have suits of

00:26:04,509 --> 00:26:15,489
socks right no they don't recommend that

00:26:13,269 --> 00:26:21,239
you do that in part because the dc's

00:26:15,489 --> 00:26:24,639
it's not a true because of that not

00:26:21,239 --> 00:26:27,609
replication Samba tells you you can't

00:26:24,639 --> 00:26:31,659
just like turn one you have one that is

00:26:27,609 --> 00:26:34,899
VDC the designated one right and it's

00:26:31,659 --> 00:26:38,889
not an automated process to turn it in

00:26:34,899 --> 00:26:41,889
the other one into the DC there's manual

00:26:38,889 --> 00:26:44,950
intervention required and you run the

00:26:41,889 --> 00:26:48,010
risk to of potential

00:26:44,950 --> 00:26:51,460
if I jack it up in that one shared place

00:26:48,010 --> 00:27:00,040
I'm toast right so really don't want to

00:26:51,460 --> 00:27:01,990
be killing it correct yeah and and

00:27:00,040 --> 00:27:05,890
really the only thing that's this wall

00:27:01,990 --> 00:27:08,380
is being is handling is GPOs and we'll

00:27:05,890 --> 00:27:11,470
talk about that so do you know what GP o

00:27:08,380 --> 00:27:18,430
stands for anybody know what GP o stands

00:27:11,470 --> 00:27:21,670
for yeah Group Policy object right yeah

00:27:18,430 --> 00:27:27,310
I used to curse Microsoft for GPIOs but

00:27:21,670 --> 00:27:34,030
you know I live with it now so anyway so

00:27:27,310 --> 00:27:37,060
at the school I have a I have a Windows

00:27:34,030 --> 00:27:44,340
box and that I'm go we're going to look

00:27:37,060 --> 00:27:48,310
at it's here let me make this bigger so

00:27:44,340 --> 00:27:52,240
this is my active directory and you can

00:27:48,310 --> 00:27:56,620
see I have users in these student groups

00:27:52,240 --> 00:28:00,310
ones are sorted by calendar year each of

00:27:56,620 --> 00:28:04,270
these has students in them we give the

00:28:00,310 --> 00:28:08,140
students Windows logins there's a

00:28:04,270 --> 00:28:10,060
Windows lab in the high school that they

00:28:08,140 --> 00:28:10,690
can log in most of them are using

00:28:10,060 --> 00:28:13,420
Chromebooks

00:28:10,690 --> 00:28:15,700
for their internet access and they log

00:28:13,420 --> 00:28:18,550
in using their Google ID which is

00:28:15,700 --> 00:28:19,170
synchronized with now with Active

00:28:18,550 --> 00:28:22,720
Directory

00:28:19,170 --> 00:28:24,970
so we move these around so they're not

00:28:22,720 --> 00:28:26,950
all in the same oh you with the teachers

00:28:24,970 --> 00:28:30,850
so I have separate a separate location

00:28:26,950 --> 00:28:32,590
for teachers and staff are down here we

00:28:30,850 --> 00:28:35,560
have a separate location for Chromebooks

00:28:32,590 --> 00:28:39,040
because we have some students who are

00:28:35,560 --> 00:28:42,820
too young to have their own assigned

00:28:39,040 --> 00:28:45,760
email account so they get a machine

00:28:42,820 --> 00:28:48,880
account and log into that Chromebook

00:28:45,760 --> 00:28:51,070
account and their email can't go out of

00:28:48,880 --> 00:28:53,620
the school it's restricted to only in

00:28:51,070 --> 00:28:57,480
the school domain because of parental

00:28:53,620 --> 00:28:59,940
things right so so the

00:28:57,480 --> 00:29:02,880
zadie and it's been very healthy even

00:28:59,940 --> 00:29:04,620
with the break in communication between

00:29:02,880 --> 00:29:07,919
the two buildings that occurred this

00:29:04,620 --> 00:29:12,570
last week so we do have some domain

00:29:07,919 --> 00:29:19,970
policy and the person here responsible

00:29:12,570 --> 00:29:24,059
for this is Zach yay so if I edit my

00:29:19,970 --> 00:29:27,450
domain policy you'll actually see some

00:29:24,059 --> 00:29:31,440
stuff that he has done here

00:29:27,450 --> 00:29:33,990
a lot of it is really nice and it makes

00:29:31,440 --> 00:29:35,549
for things like I'll show you some of

00:29:33,990 --> 00:29:39,360
the things that we've been able to do

00:29:35,549 --> 00:29:42,720
with it so here's one of them we set a

00:29:39,360 --> 00:29:47,220
unified background for all of our

00:29:42,720 --> 00:29:51,720
Windows machines so nobody has their

00:29:47,220 --> 00:29:56,309
dog's picture on here anymore and we

00:29:51,720 --> 00:30:01,200
have an established Start menu so we

00:29:56,309 --> 00:30:04,650
don't end up with with Microsoft Games

00:30:01,200 --> 00:30:07,590
as part of part of the Start menu yeah

00:30:04,650 --> 00:30:12,799
so we have Chrome and Firefox and we're

00:30:07,590 --> 00:30:16,110
we pay Microsoft for office still so

00:30:12,799 --> 00:30:20,280
office is delivered here and this part

00:30:16,110 --> 00:30:25,770
of the GPO stuff too so we have we also

00:30:20,280 --> 00:30:28,650
have actually Firefox policy because we

00:30:25,770 --> 00:30:32,160
have proxy servers in each building and

00:30:28,650 --> 00:30:35,010
by default Firefox is proxy setting does

00:30:32,160 --> 00:30:37,710
not inherit a proxy from the system it

00:30:35,010 --> 00:30:41,809
doesn't work so we set that with a GPO

00:30:37,710 --> 00:30:45,059
and then nobody ever complained anymore

00:30:41,809 --> 00:30:48,090
so the live look in from the windows

00:30:45,059 --> 00:30:52,950
side is here let's take a little bit of

00:30:48,090 --> 00:30:56,010
a look from the Linux side ok so this is

00:30:52,950 --> 00:30:57,840
one of my two domain controllers fledge

00:30:56,010 --> 00:31:00,299
and I'm going to slide this over a

00:30:57,840 --> 00:31:03,570
little bit there you go

00:31:00,299 --> 00:31:06,799
so all of our servers are named after

00:31:03,570 --> 00:31:10,470
characters in The Chronicles of Narnia

00:31:06,799 --> 00:31:14,039
so we have Caspian and

00:31:10,470 --> 00:31:17,190
come now pledge and Farsight as part of

00:31:14,039 --> 00:31:19,760
the Active Directory domains those are

00:31:17,190 --> 00:31:24,790
all virtual machines that are running on

00:31:19,760 --> 00:31:26,600
Aslan Azeroth Hagen and puddle glumly

00:31:24,790 --> 00:31:30,000
[Laughter]

00:31:26,600 --> 00:31:31,830
yeah it's fun ain't it right once you

00:31:30,000 --> 00:31:39,720
start down that road you can't stop

00:31:31,830 --> 00:31:43,500
right so so when I look at my eight

00:31:39,720 --> 00:31:47,179
active directory info on this server my

00:31:43,500 --> 00:31:51,059
LDAP server is myself on this one

00:31:47,179 --> 00:31:54,270
pledges the LDAP server and the server

00:31:51,059 --> 00:31:56,400
name is pledged to 80 Liberty online

00:31:54,270 --> 00:32:01,500
don't work this is also our Kerberos

00:31:56,400 --> 00:32:06,030
realm so the DNS sub domain is the

00:32:01,500 --> 00:32:08,640
Kerberos realm and then it's using port

00:32:06,030 --> 00:32:12,120
389 of course and this is also the KDC

00:32:08,640 --> 00:32:18,870
server so it's running Kerberos and all

00:32:12,120 --> 00:32:25,409
of this is in samba so you can do if you

00:32:18,870 --> 00:32:27,740
do samba - tool with a - - help you can

00:32:25,409 --> 00:32:31,710
see some of the things that samba do can

00:32:27,740 --> 00:32:35,159
samba tool can do those of you who are

00:32:31,710 --> 00:32:37,980
the samba - people you will love this

00:32:35,159 --> 00:32:40,799
test parm you might remember that from

00:32:37,980 --> 00:32:45,000
samba days this has always been a thing

00:32:40,799 --> 00:32:47,220
samba does to test the parameters but I

00:32:45,000 --> 00:32:48,750
just used it to show you what's in my

00:32:47,220 --> 00:32:51,809
SMB Kampf

00:32:48,750 --> 00:32:56,669
so my Essen betta cuff is very simple

00:32:51,809 --> 00:33:00,659
it's an Etsy Samba like always I set my

00:32:56,669 --> 00:33:04,470
DNS forwarders in here so there anything

00:33:00,659 --> 00:33:07,380
that's not in AD Liberty online org and

00:33:04,470 --> 00:33:09,870
these guys become the primary DNS for my

00:33:07,380 --> 00:33:13,049
Windows machines because you want your

00:33:09,870 --> 00:33:15,390
ad server to be the primary DNS they

00:33:13,049 --> 00:33:16,200
forward out to my bind stuff for the

00:33:15,390 --> 00:33:22,020
rest of the world

00:33:16,200 --> 00:33:24,070
I set a NetBIOS name and a realm this is

00:33:22,020 --> 00:33:26,950
this is Kerberos realm

00:33:24,070 --> 00:33:30,039
the server roll is an ad Active

00:33:26,950 --> 00:33:34,139
Directory domain controller and then

00:33:30,039 --> 00:33:38,200
this uses for the ID map it uses RFC

00:33:34,139 --> 00:33:41,049
23:07 I set the net login path and sis

00:33:38,200 --> 00:33:44,859
file that's all I have on my domain

00:33:41,049 --> 00:33:46,479
controller I have a second domain

00:33:44,859 --> 00:33:49,299
controller and you can do a ton of

00:33:46,479 --> 00:33:54,340
things with samba tool you can do things

00:33:49,299 --> 00:33:57,669
like check the ad database you can

00:33:54,340 --> 00:33:59,830
delegate things you can look at DNS this

00:33:57,669 --> 00:34:03,639
way if you really want to you can also

00:33:59,830 --> 00:34:06,429
use the Windows DNS tool for anything in

00:34:03,639 --> 00:34:08,829
AD down Liberty online organic thing in

00:34:06,429 --> 00:34:17,169
that domain that it's controlling you

00:34:08,829 --> 00:34:20,950
can use the Windows DNS tool yes you can

00:34:17,169 --> 00:34:23,829
install the remote administration tools

00:34:20,950 --> 00:34:27,099
on any workstation that you want with

00:34:23,829 --> 00:34:30,869
the right credentials of course you can

00:34:27,099 --> 00:34:34,329
manage Active Directory from that server

00:34:30,869 --> 00:34:39,069
so our Windows machine that we've been

00:34:34,329 --> 00:34:44,530
looking at here hang on sorry this one

00:34:39,069 --> 00:34:48,879
is sort of a laptop at rent is laughing

00:34:44,530 --> 00:34:51,490
because it has no screen it just has the

00:34:48,879 --> 00:34:55,379
metal things sticking out of the side of

00:34:51,490 --> 00:34:58,299
it and it's behind the monitor on a

00:34:55,379 --> 00:35:00,609
desktop that I have because we busted

00:34:58,299 --> 00:35:03,369
the screen and didn't have the money to

00:35:00,609 --> 00:35:05,589
fix it and decided I'm just gonna take

00:35:03,369 --> 00:35:08,740
this over and use it as my remote access

00:35:05,589 --> 00:35:12,299
machine so you do what you have to right

00:35:08,740 --> 00:35:16,540
so that's what that one is

00:35:12,299 --> 00:35:21,400
my share servers are Caspian and Tumnus

00:35:16,540 --> 00:35:24,059
as I've explained so if I go to one of

00:35:21,400 --> 00:35:24,059
those servers

00:35:26,160 --> 00:35:35,880
so here's Caspian this one happens to be

00:35:30,819 --> 00:35:37,780
in the high school you can always use I

00:35:35,880 --> 00:35:40,510
can do net

00:35:37,780 --> 00:35:44,820
yes info on this guy also and you can

00:35:40,510 --> 00:35:48,640
see that I'm joined to the same domain

00:35:44,820 --> 00:35:53,110
was the same Kerberos realm Here I am

00:35:48,640 --> 00:35:55,510
also running for file permissions sake

00:35:53,110 --> 00:35:59,230
because this is a share server I'm

00:35:55,510 --> 00:36:01,780
running SSD to get my user

00:35:59,230 --> 00:36:04,870
authentication from at the Active

00:36:01,780 --> 00:36:07,390
Directory domain so I'm not running that

00:36:04,870 --> 00:36:10,620
on fledge because I really don't want of

00:36:07,390 --> 00:36:14,110
my my normal users logging into the DC

00:36:10,620 --> 00:36:18,430
command-line really not not a good idea

00:36:14,110 --> 00:36:22,480
and I don't care anyway so but here I

00:36:18,430 --> 00:36:28,540
actually do so if I look at who is

00:36:22,480 --> 00:36:30,730
running this thing and those of you who

00:36:28,540 --> 00:36:34,180
have been samba people for a long time

00:36:30,730 --> 00:36:37,660
I've been using net status sessions to

00:36:34,180 --> 00:36:41,170
see things for a long time but you can

00:36:37,660 --> 00:36:44,850
see I have anybody that's in the 10.3

00:36:41,170 --> 00:36:48,130
network is in the high school building

00:36:44,850 --> 00:36:50,530
anybody that's in the 10.2 that work

00:36:48,130 --> 00:36:53,710
like these two people kids club in a

00:36:50,530 --> 00:36:56,560
clark are in the elementary school so I

00:36:53,710 --> 00:37:00,370
have people accessing shares on this

00:36:56,560 --> 00:37:02,980
server from both buildings and this is a

00:37:00,370 --> 00:37:06,640
Saturday so apparently I'm not teaching

00:37:02,980 --> 00:37:09,910
them to logout properly because they're

00:37:06,640 --> 00:37:11,650
all they're all still connected so I

00:37:09,910 --> 00:37:14,800
don't want to ruin this since this is

00:37:11,650 --> 00:37:18,730
real life right I trust me I've ruined

00:37:14,800 --> 00:37:22,120
it enough in the past I've had several

00:37:18,730 --> 00:37:25,150
times when I've so the target has been

00:37:22,120 --> 00:37:30,310
to keep this server live during school

00:37:25,150 --> 00:37:33,220
hours always right so we had a little

00:37:30,310 --> 00:37:35,740
downtime on Monday morning in part

00:37:33,220 --> 00:37:39,120
because the school had neglected to pay

00:37:35,740 --> 00:37:43,300
Comcast their allotted amount and

00:37:39,120 --> 00:37:48,520
Comcast responded by disconnecting the

00:37:43,300 --> 00:37:51,910
internet and at the same time I blew out

00:37:48,520 --> 00:37:54,910
a network card in one of my

00:37:51,910 --> 00:37:58,000
so at the school we use pfsense

00:37:54,910 --> 00:37:59,920
for both firewalls and I'm using it for

00:37:58,000 --> 00:38:04,470
routing the fiber between the two

00:37:59,920 --> 00:38:11,650
buildings and it's running on a classic

00:38:04,470 --> 00:38:15,430
classic hardware core - something to gig

00:38:11,650 --> 00:38:18,760
of ram I think and to network cards

00:38:15,430 --> 00:38:22,740
those are my routers right and one of my

00:38:18,760 --> 00:38:27,670
one of my routers just simply said no

00:38:22,740 --> 00:38:29,799
carrier but the IP would ping on it but

00:38:27,670 --> 00:38:32,260
it didn't matter what I did unplug the

00:38:29,799 --> 00:38:35,760
cable plug in a cable nothing changed

00:38:32,260 --> 00:38:38,920
I'm like make this never card go faraway

00:38:35,760 --> 00:38:44,799
so we did and and everything came back

00:38:38,920 --> 00:38:47,710
so I could still blame it on Comcast I

00:38:44,799 --> 00:38:50,109
can sort of or the city of Anderson we

00:38:47,710 --> 00:38:52,109
leased the fiber from we called them and

00:38:50,109 --> 00:38:55,329
they're like oh no everything looks good

00:38:52,109 --> 00:39:00,160
that was legit it did look good it was

00:38:55,329 --> 00:39:06,430
my my little network card so so that's

00:39:00,160 --> 00:39:10,770
the live look in and I'm gonna go back

00:39:06,430 --> 00:39:10,770
to the presentation just for a sec here

00:39:23,849 --> 00:39:33,880
so one of our one of the things that we

00:39:28,359 --> 00:39:37,029
say openSUSE is have a lot of fun so if

00:39:33,880 --> 00:39:39,010
you do nothing on an open SUSE box the

00:39:37,029 --> 00:39:43,240
first time you log in the message of the

00:39:39,010 --> 00:39:46,750
day says have a lot of fun and so as you

00:39:43,240 --> 00:39:50,680
can see we've been having a lot of fun

00:39:46,750 --> 00:39:54,010
and now it's your turn to go have a lot

00:39:50,680 --> 00:39:56,619
of fun so what questions do you have for

00:39:54,010 --> 00:39:59,279
me or for the team

00:39:56,619 --> 00:39:59,279
go ahead

00:40:02,260 --> 00:40:19,790
yes Samba knows this yeah so so the

00:40:16,490 --> 00:40:23,120
consolation prize is samba tool where

00:40:19,790 --> 00:40:26,690
you can actually do GPO editing and you

00:40:23,120 --> 00:40:30,680
can do some scripting there right

00:40:26,690 --> 00:40:33,740
exactly because yes you can move users

00:40:30,680 --> 00:40:37,900
you can you can create OU's you can do

00:40:33,740 --> 00:40:41,600
all the things that you might but

00:40:37,900 --> 00:40:44,210
obviously it does not meet the criterion

00:40:41,600 --> 00:40:47,870
that we had we're making it more

00:40:44,210 --> 00:40:50,360
accessible right so that was part of my

00:40:47,870 --> 00:40:53,030
reason for going to ad was so I could

00:40:50,360 --> 00:40:55,160
offload the user management and if I

00:40:53,030 --> 00:41:01,370
have to teach somebody samba tool that's

00:40:55,160 --> 00:41:06,440
not a good thing right we don't want

00:41:01,370 --> 00:41:12,260
them using PowerShell anyway okay you

00:41:06,440 --> 00:41:14,270
win yeah yeah hopefully they'll get the

00:41:12,260 --> 00:41:21,170
message and change it and fix it so

00:41:14,270 --> 00:41:25,340
other questions yes oh okay somebody

00:41:21,170 --> 00:41:28,610
wants to see my SSS D so that's another

00:41:25,340 --> 00:41:31,600
session how many of you use SSST in your

00:41:28,610 --> 00:41:36,260
world yeah so

00:41:31,600 --> 00:41:39,080
SSST is really nice let me let me show

00:41:36,260 --> 00:41:42,940
you my SSS D and then I gotta quit cuz

00:41:39,080 --> 00:41:42,940
there's another session in here so

00:42:02,220 --> 00:42:11,860
so as you probably know SSST it has a

00:42:09,220 --> 00:42:16,300
bunch of different potential directives

00:42:11,860 --> 00:42:18,670
in it this one obviously you want to

00:42:16,300 --> 00:42:20,980
have this if you use an sss the filter

00:42:18,670 --> 00:42:23,110
routes so it doesn't try to query the

00:42:20,980 --> 00:42:28,410
domain for the root password this would

00:42:23,110 --> 00:42:32,950
be really bad but you can use your

00:42:28,410 --> 00:42:35,410
domain has to be specifically the name

00:42:32,950 --> 00:42:38,410
of your Active Directory domain it can't

00:42:35,410 --> 00:42:42,100
be a made-up thing like a can with LDAP

00:42:38,410 --> 00:42:46,000
I set all my ID provider my auth

00:42:42,100 --> 00:42:48,850
provider both be ad I turn enumeration

00:42:46,000 --> 00:42:51,820
off because this is a slow down

00:42:48,850 --> 00:42:55,510
mechanism right you only turn it on for

00:42:51,820 --> 00:42:57,970
tests don't leave it on or it will slow

00:42:55,510 --> 00:43:00,430
things down you always want to cache the

00:42:57,970 --> 00:43:06,030
credentials that the part of the

00:43:00,430 --> 00:43:09,850
function of s SSD I said set my Kerberos

00:43:06,030 --> 00:43:12,550
canonicalization to be false set my

00:43:09,850 --> 00:43:15,220
fallback home Durand and shell for for

00:43:12,550 --> 00:43:19,300
logins for these users and that's about

00:43:15,220 --> 00:43:22,420
all I had to do with s SSD on this

00:43:19,300 --> 00:43:25,420
particular environment so does that

00:43:22,420 --> 00:43:27,870
answer your question sort of kind of

00:43:25,420 --> 00:43:27,870
mostly

00:43:33,910 --> 00:43:40,260
there has to do with MIT Kerberos and

00:43:37,510 --> 00:43:45,220
doom an uppercase lowercase or

00:43:40,260 --> 00:43:48,520
canonicalization so this was my old I

00:43:45,220 --> 00:43:51,250
actually had SSD working against LDAP

00:43:48,520 --> 00:43:53,830
previously so that's what this domain is

00:43:51,250 --> 00:43:59,410
it's not active but this is what we were

00:43:53,830 --> 00:44:01,000
using without that prior okay all right

00:43:59,410 --> 00:44:03,390
thanks guys appreciate your

00:44:01,000 --> 00:44:03,390

YouTube URL: https://www.youtube.com/watch?v=7PXretlX4ao


