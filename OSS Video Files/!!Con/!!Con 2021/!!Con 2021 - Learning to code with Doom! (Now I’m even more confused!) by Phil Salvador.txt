Title: !!Con 2021 - Learning to code with Doom! (Now I’m even more confused!) by Phil Salvador
Publication date: 2021-07-06
Playlist: !!Con 2021
Description: 
	Learning to code with Doom! (Now I’m even more confused!) by Phil Salvador

During the pandemic, I picked up programming as a hobby in order to help my friend create a mod for the 1993 video game Doom. This was my first time embarking on a major coding project, and it turns out this was probably not the easiest place to start! Over the years, the Doom game engine has been modified and re-implemented so many times that now it uses multiple programming languages stacked on top of each other. For someone like me with minimal coding exposure, this was challenging, to say the least!

In this talk, I’ll walk through one of my misadventures that taught me it can be fun when coding is confusing. I started with a simple task — playing a sound effect — that rippled out into so many other issues that it made me wonder why I didn’t just take up baking like everyone else instead!

Phil Salvador is a librarian, digital archivist, and video game historian who writes about unusual old computer games on his blog, The Obscuritory. But most importantly, he is a friend to all birds.
Captions: 
	00:00:12,639 --> 00:00:15,920
hello

00:00:13,280 --> 00:00:16,880
uh thanks so much for having me uh my

00:00:15,920 --> 00:00:19,600
name is phil

00:00:16,880 --> 00:00:20,480
and over the pandemic i learned how to

00:00:19,600 --> 00:00:22,080
code

00:00:20,480 --> 00:00:23,600
a friend of mine right when the things

00:00:22,080 --> 00:00:25,840
were starting to uh you know

00:00:23,600 --> 00:00:27,680
flare up a friend of mine was working on

00:00:25,840 --> 00:00:29,519
a mod for the video game doom

00:00:27,680 --> 00:00:31,039
so i learned how to code to help them

00:00:29,519 --> 00:00:32,559
out i figured this would be kind of a

00:00:31,039 --> 00:00:33,360
fun way to learn how to code get my

00:00:32,559 --> 00:00:35,440
hands on with

00:00:33,360 --> 00:00:38,239
a little more coding experience but it

00:00:35,440 --> 00:00:40,559
turns out that uh making a doom mod

00:00:38,239 --> 00:00:42,160
in 2021 is actually a lot more

00:00:40,559 --> 00:00:44,079
complicated than you might think it was

00:00:42,160 --> 00:00:46,079
a little more than i bargained for and i

00:00:44,079 --> 00:00:47,440
wanted to explain why that is by talking

00:00:46,079 --> 00:00:50,480
a little bit about the

00:00:47,440 --> 00:00:52,719
the engine that powers the doom games uh

00:00:50,480 --> 00:00:54,800
so when you think about doom doom is a

00:00:52,719 --> 00:00:56,559
game that came out in 1993

00:00:54,800 --> 00:00:59,120
but what happened shortly after that is

00:00:56,559 --> 00:01:00,879
a couple other spin-offs and games that

00:00:59,120 --> 00:01:02,320
use the doom engine begin to come out

00:01:00,879 --> 00:01:03,920
they start adding their own features

00:01:02,320 --> 00:01:05,680
they start adding all these new

00:01:03,920 --> 00:01:08,159
scripting systems things that people can

00:01:05,680 --> 00:01:10,400
use at the same time

00:01:08,159 --> 00:01:11,840
fans are also making their own hacked

00:01:10,400 --> 00:01:13,760
version of doom where they can add new

00:01:11,840 --> 00:01:14,560
graphics and effects so you get things

00:01:13,760 --> 00:01:16,240
like you know

00:01:14,560 --> 00:01:18,080
the simpsons doom mods that come at

00:01:16,240 --> 00:01:20,080
around that time

00:01:18,080 --> 00:01:21,439
and then also the doom source code is

00:01:20,080 --> 00:01:23,920
released publicly

00:01:21,439 --> 00:01:25,040
so fans begin to take all these features

00:01:23,920 --> 00:01:27,040
all these spin-offs

00:01:25,040 --> 00:01:29,040
and they begin to incorporate them into

00:01:27,040 --> 00:01:30,960
new versions of the doom engine

00:01:29,040 --> 00:01:33,040
and they keep adding features and making

00:01:30,960 --> 00:01:33,680
spin-offs and they keep stacking things

00:01:33,040 --> 00:01:36,320
on top

00:01:33,680 --> 00:01:37,040
and keep stacking things on top over and

00:01:36,320 --> 00:01:39,360
over and over

00:01:37,040 --> 00:01:41,200
until you get this teetering tower of

00:01:39,360 --> 00:01:41,520
dependencies that is the doom engine

00:01:41,200 --> 00:01:44,079
just

00:01:41,520 --> 00:01:45,280
all these features just stacked atop

00:01:44,079 --> 00:01:47,200
each other

00:01:45,280 --> 00:01:48,640
so you know if you made a doom mod back

00:01:47,200 --> 00:01:49,840
in the day you really just had to learn

00:01:48,640 --> 00:01:51,680
one or two things

00:01:49,840 --> 00:01:53,040
if you're making a doom mod in the year

00:01:51,680 --> 00:01:55,840
00:01:53,040 --> 00:01:56,240
you have to learn a modified version of

00:01:55,840 --> 00:01:58,799
c

00:01:56,240 --> 00:02:00,640
that is based on a custom bespoke

00:01:58,799 --> 00:02:03,040
programming language that is built on

00:02:00,640 --> 00:02:05,759
top of a series of spin-offs and hacks

00:02:03,040 --> 00:02:07,439
to a video game from 1993 and there's

00:02:05,759 --> 00:02:09,039
also a completely separate

00:02:07,439 --> 00:02:11,280
scripting language you have to learn how

00:02:09,039 --> 00:02:15,120
to use that has a different

00:02:11,280 --> 00:02:16,720
version of math so it's kind of a mess

00:02:15,120 --> 00:02:19,040
and i want to walk through this was i

00:02:16,720 --> 00:02:20,640
get the sense that a lot of coding is

00:02:19,040 --> 00:02:22,000
like this so i want to walk through one

00:02:20,640 --> 00:02:24,319
example i had to deal with

00:02:22,000 --> 00:02:26,080
where i learned how temperamental this

00:02:24,319 --> 00:02:27,520
stuff can be and this is an example of

00:02:26,080 --> 00:02:29,920
trying to play

00:02:27,520 --> 00:02:32,080
one sound effect and everything that

00:02:29,920 --> 00:02:35,440
rippled out of that decision

00:02:32,080 --> 00:02:37,120
so um this is a very silly doom mod my

00:02:35,440 --> 00:02:38,640
friend was making so there's a feature i

00:02:37,120 --> 00:02:42,000
wanted to add to the mod

00:02:38,640 --> 00:02:44,000
called um constant screaming mode where

00:02:42,000 --> 00:02:45,760
you turn it on and the player character

00:02:44,000 --> 00:02:47,440
just screams constantly

00:02:45,760 --> 00:02:49,040
it's very silly but i thought like oh

00:02:47,440 --> 00:02:50,000
this is a joke feature i can you know

00:02:49,040 --> 00:02:53,360
knock this out in like

00:02:50,000 --> 00:02:55,040
an hour it'll be pretty easy to do uh

00:02:53,360 --> 00:02:57,040
so this was the script i originally

00:02:55,040 --> 00:02:58,640
wrote it's a pretty simple script for

00:02:57,040 --> 00:03:01,440
the player that says

00:02:58,640 --> 00:03:02,640
uh if screaming mode is turned on play

00:03:01,440 --> 00:03:05,040
the screaming sound effect

00:03:02,640 --> 00:03:07,920
if screaming mode is turned off don't

00:03:05,040 --> 00:03:09,920
play the screaming sound effect

00:03:07,920 --> 00:03:11,680
but things got complicated pretty

00:03:09,920 --> 00:03:13,760
quickly because again of this giant

00:03:11,680 --> 00:03:14,480
tower of dependencies and other versions

00:03:13,760 --> 00:03:16,159
of doom

00:03:14,480 --> 00:03:18,560
and there's all these features that kind

00:03:16,159 --> 00:03:20,239
of conflict and collide and don't mesh

00:03:18,560 --> 00:03:22,400
well so i want to talk about

00:03:20,239 --> 00:03:24,560
two of those features and how they ended

00:03:22,400 --> 00:03:28,239
up making this very simple script

00:03:24,560 --> 00:03:29,760
surprisingly complicated so

00:03:28,239 --> 00:03:31,760
one of the things in this mod is in

00:03:29,760 --> 00:03:34,239
addition to playing as the

00:03:31,760 --> 00:03:35,599
the traditional human doom character uh

00:03:34,239 --> 00:03:36,080
there's also a part in the game where

00:03:35,599 --> 00:03:39,519
you turn

00:03:36,080 --> 00:03:40,959
into a tank and we do this by using a

00:03:39,519 --> 00:03:42,319
feature that was introduced in one of

00:03:40,959 --> 00:03:44,000
the doom spin-offs

00:03:42,319 --> 00:03:45,840
uh called the morph system this was

00:03:44,000 --> 00:03:47,519
added in the game heretic which was uh

00:03:45,840 --> 00:03:49,280
it uses the doom engine

00:03:47,519 --> 00:03:51,840
uh and it's a feature that lets one

00:03:49,280 --> 00:03:52,879
player character transform into another

00:03:51,840 --> 00:03:55,280
player character

00:03:52,879 --> 00:03:57,040
uh it was originally used as sort of a

00:03:55,280 --> 00:03:58,840
joke there is an item that turns you

00:03:57,040 --> 00:04:01,360
into a chicken in heretic

00:03:58,840 --> 00:04:03,280
um so we're using it in ways it was

00:04:01,360 --> 00:04:04,879
really never intended to be used

00:04:03,280 --> 00:04:06,640
and it doesn't play well with some of

00:04:04,879 --> 00:04:08,000
the other features that eventually got

00:04:06,640 --> 00:04:09,760
added to the doom engine

00:04:08,000 --> 00:04:11,840
and one of those big features is the way

00:04:09,760 --> 00:04:12,799
that gender is conceptualized in the

00:04:11,840 --> 00:04:14,400
doom engine

00:04:12,799 --> 00:04:15,920
uh this was something that was added by

00:04:14,400 --> 00:04:17,759
fans in 1998

00:04:15,920 --> 00:04:19,040
in a fan version of the doom engine

00:04:17,759 --> 00:04:21,440
called z doom

00:04:19,040 --> 00:04:23,600
and it was meant to let players use

00:04:21,440 --> 00:04:25,360
custom pronouns in multiplayer mode

00:04:23,600 --> 00:04:27,040
so you know when you get blown up it

00:04:25,360 --> 00:04:29,759
says player one killed

00:04:27,040 --> 00:04:31,199
herself for instance uh and i think this

00:04:29,759 --> 00:04:32,720
was you know a fairly progressive

00:04:31,199 --> 00:04:34,800
feature for its time but it has some

00:04:32,720 --> 00:04:37,199
pretty significant limitations

00:04:34,800 --> 00:04:38,479
the biggest one is that the player's

00:04:37,199 --> 00:04:40,479
voice sound effects are

00:04:38,479 --> 00:04:42,400
tied directly to the gender they select

00:04:40,479 --> 00:04:44,400
which is you know somewhat an archaic

00:04:42,400 --> 00:04:45,600
understanding of how gender works but

00:04:44,400 --> 00:04:48,000
it's what we have to work with when

00:04:45,600 --> 00:04:49,520
we're making a doom mod but the really

00:04:48,000 --> 00:04:51,440
weird part of this is that

00:04:49,520 --> 00:04:53,199
uh gender in the doom engine is

00:04:51,440 --> 00:04:56,800
conceptualized as a

00:04:53,199 --> 00:04:59,759
scale of zero to three which sure

00:04:56,800 --> 00:05:00,560
um so here's the scale the reason this

00:04:59,759 --> 00:05:03,600
is so weird

00:05:00,560 --> 00:05:05,199
is because uh players are the only

00:05:03,600 --> 00:05:06,720
characters in the game that actually get

00:05:05,199 --> 00:05:08,000
given genders based on the player's

00:05:06,720 --> 00:05:09,759
preferences

00:05:08,000 --> 00:05:11,520
everything else in the game gets a

00:05:09,759 --> 00:05:14,560
default gender value of zero

00:05:11,520 --> 00:05:15,440
which as you can see here corresponds to

00:05:14,560 --> 00:05:17,280
male

00:05:15,440 --> 00:05:18,880
which means that technically speaking

00:05:17,280 --> 00:05:20,720
every object in the game that's not a

00:05:18,880 --> 00:05:22,560
player we're talking every monster

00:05:20,720 --> 00:05:25,120
every rocket launcher every flaming

00:05:22,560 --> 00:05:27,919
barrel is technically male

00:05:25,120 --> 00:05:29,680
the reason this is a problem is because

00:05:27,919 --> 00:05:31,039
the morph system was designed before

00:05:29,680 --> 00:05:33,759
there was ever

00:05:31,039 --> 00:05:35,520
uh you know gender in the doom engine so

00:05:33,759 --> 00:05:37,440
it doesn't account for it when you turn

00:05:35,520 --> 00:05:39,360
into a tank it's considered a new

00:05:37,440 --> 00:05:39,919
character that's not technically the

00:05:39,360 --> 00:05:42,000
player

00:05:39,919 --> 00:05:43,680
so therefore the tank is also considered

00:05:42,000 --> 00:05:45,199
male so it's not going to play the

00:05:43,680 --> 00:05:47,440
correct sound effects

00:05:45,199 --> 00:05:49,199
so i had to manually re-implement the

00:05:47,440 --> 00:05:50,880
gender system of the doom engine i had

00:05:49,199 --> 00:05:53,360
to manually rewrite it

00:05:50,880 --> 00:05:55,360
and attempt to uh you know read the

00:05:53,360 --> 00:05:56,960
player's preference file and then see

00:05:55,360 --> 00:05:59,440
what uh you know choose which sound

00:05:56,960 --> 00:06:00,880
effect to play based on that

00:05:59,440 --> 00:06:02,160
so this is already starting to get

00:06:00,880 --> 00:06:03,520
pretty far out of hand this script is

00:06:02,160 --> 00:06:04,960
getting pretty long for what was

00:06:03,520 --> 00:06:08,000
originally supposed to be

00:06:04,960 --> 00:06:09,680
a joke feature um but we're not done yet

00:06:08,000 --> 00:06:11,360
of course there's one other very

00:06:09,680 --> 00:06:12,960
frustrating thing so

00:06:11,360 --> 00:06:15,199
we have to go back again to the morph

00:06:12,960 --> 00:06:17,280
system because once again we're using it

00:06:15,199 --> 00:06:19,039
in ways it was never intended to be used

00:06:17,280 --> 00:06:20,479
it was a way to make the player turn

00:06:19,039 --> 00:06:22,479
into a chicken as a joke

00:06:20,479 --> 00:06:23,759
we're using it as like a major feature

00:06:22,479 --> 00:06:26,479
of this game

00:06:23,759 --> 00:06:28,080
so the issue is that when you transform

00:06:26,479 --> 00:06:30,000
with the morph system

00:06:28,080 --> 00:06:32,160
what i learned is that technically the

00:06:30,000 --> 00:06:34,160
player doesn't actually transform

00:06:32,160 --> 00:06:36,400
the player becomes intangible and

00:06:34,160 --> 00:06:37,680
invisible a new character appears and

00:06:36,400 --> 00:06:40,880
then you control

00:06:37,680 --> 00:06:42,400
the new character so technically there's

00:06:40,880 --> 00:06:43,919
two characters in the game world at once

00:06:42,400 --> 00:06:46,000
now there's the human character

00:06:43,919 --> 00:06:47,520
and there's the tank character and the

00:06:46,000 --> 00:06:48,000
doom engine doesn't distinguish between

00:06:47,520 --> 00:06:50,000
them so

00:06:48,000 --> 00:06:51,360
now both these characters are screaming

00:06:50,000 --> 00:06:53,360
at the same time

00:06:51,360 --> 00:06:55,360
this is not ideal so we have to find

00:06:53,360 --> 00:06:57,840
some way to

00:06:55,360 --> 00:06:58,639
only make the correct character scream

00:06:57,840 --> 00:07:00,240
and

00:06:58,639 --> 00:07:02,000
we turn to something that i understand

00:07:00,240 --> 00:07:04,080
is a very important part of any

00:07:02,000 --> 00:07:05,520
programmer skill set which is terrible

00:07:04,080 --> 00:07:06,880
workarounds

00:07:05,520 --> 00:07:08,720
what we end up doing is we're going to

00:07:06,880 --> 00:07:10,400
use the inventory system in the doom

00:07:08,720 --> 00:07:11,759
engine because for some reason the

00:07:10,400 --> 00:07:13,919
inventory system

00:07:11,759 --> 00:07:16,479
does work with the morph system things

00:07:13,919 --> 00:07:18,319
do transfer between characters correctly

00:07:16,479 --> 00:07:20,160
so we're going to horribly misuse this

00:07:18,319 --> 00:07:21,039
we're going to instead of having the

00:07:20,160 --> 00:07:22,960
player

00:07:21,039 --> 00:07:25,599
scream themselves we're going to give

00:07:22,960 --> 00:07:28,720
them an item that screams

00:07:25,599 --> 00:07:29,280
the item if it's owned by a player it

00:07:28,720 --> 00:07:31,440
will

00:07:29,280 --> 00:07:33,280
look at the player's options see what

00:07:31,440 --> 00:07:36,560
gender they selected and then

00:07:33,280 --> 00:07:38,240
scream in the correct gender uh but then

00:07:36,560 --> 00:07:40,000
when they turn into a tank that item is

00:07:38,240 --> 00:07:41,840
going to transfer correctly so it's

00:07:40,000 --> 00:07:43,599
still only going to be one screen sound

00:07:41,840 --> 00:07:44,960
effect it's moving over to the correct

00:07:43,599 --> 00:07:47,440
character

00:07:44,960 --> 00:07:49,120
this is how we have to implement this

00:07:47,440 --> 00:07:51,440
this is kind of ridiculous

00:07:49,120 --> 00:07:53,360
um so again i started out with like a

00:07:51,440 --> 00:07:53,919
six line script and by the end of this

00:07:53,360 --> 00:07:55,759
process

00:07:53,919 --> 00:07:57,199
i've ended up with a script that is

00:07:55,759 --> 00:07:59,599
multiple pages long

00:07:57,199 --> 00:08:00,879
and spans across multiple files it has

00:07:59,599 --> 00:08:02,879
to re-implement a

00:08:00,879 --> 00:08:05,360
chunk of the doom engine into it in

00:08:02,879 --> 00:08:07,759
order to work correctly

00:08:05,360 --> 00:08:09,759
so going into this project i understood

00:08:07,759 --> 00:08:11,440
when people said like oh my code is so

00:08:09,759 --> 00:08:12,800
ugly it's so you know it's so full of

00:08:11,440 --> 00:08:14,560
hacks don't look at it and i

00:08:12,800 --> 00:08:16,720
i understood that in principle but i

00:08:14,560 --> 00:08:18,479
don't think i i actually

00:08:16,720 --> 00:08:20,000
was able to to get to get what that

00:08:18,479 --> 00:08:22,319
meant until i did this

00:08:20,000 --> 00:08:24,160
until i had to create this you know

00:08:22,319 --> 00:08:25,039
terrible frankenstein work around to

00:08:24,160 --> 00:08:26,720
make this

00:08:25,039 --> 00:08:28,080
joke feature in the doom engine work

00:08:26,720 --> 00:08:29,680
correctly

00:08:28,080 --> 00:08:31,280
but it was a very interesting experience

00:08:29,680 --> 00:08:32,640
i learned a lot about programming having

00:08:31,280 --> 00:08:35,360
to

00:08:32,640 --> 00:08:37,440
see a very simple line of code slowly

00:08:35,360 --> 00:08:38,880
turn into this monstrosity

00:08:37,440 --> 00:08:40,959
so the lessons i learned from this the

00:08:38,880 --> 00:08:42,560
most important lesson was coding is a

00:08:40,959 --> 00:08:44,640
labyrinth of absurdities

00:08:42,560 --> 00:08:46,240
i get the sense that a lot of coding is

00:08:44,640 --> 00:08:47,040
like this that there's just these towers

00:08:46,240 --> 00:08:48,399
of

00:08:47,040 --> 00:08:50,160
dependencies and things you have to

00:08:48,399 --> 00:08:52,320
worry about affecting different levels

00:08:50,160 --> 00:08:54,080
and having to understand how the engine

00:08:52,320 --> 00:08:55,519
interprets what you've written i i get

00:08:54,080 --> 00:08:56,880
the sense that this is a lot of what

00:08:55,519 --> 00:08:59,760
coding is

00:08:56,880 --> 00:09:00,560
but the thing is i liked it i really

00:08:59,760 --> 00:09:02,480
enjoyed this

00:09:00,560 --> 00:09:04,880
i like the problem solving aspects of it

00:09:02,480 --> 00:09:06,959
i like the fact that you get this

00:09:04,880 --> 00:09:08,399
this seemingly simple task and to

00:09:06,959 --> 00:09:09,360
actually make it work you have to start

00:09:08,399 --> 00:09:10,800
to understand

00:09:09,360 --> 00:09:12,240
how the engine works you have to

00:09:10,800 --> 00:09:12,880
understand how it's interpreting your

00:09:12,240 --> 00:09:14,480
inputs

00:09:12,880 --> 00:09:16,640
how different parts of the program are

00:09:14,480 --> 00:09:18,080
parsed by other parts of the program

00:09:16,640 --> 00:09:19,760
i thought it was really interesting that

00:09:18,080 --> 00:09:22,000
it gave me a better sense of what the

00:09:19,760 --> 00:09:23,839
character of the doom engine was

00:09:22,000 --> 00:09:25,279
i think compared to any other game

00:09:23,839 --> 00:09:26,640
engine that exists you really get a

00:09:25,279 --> 00:09:29,040
sense of

00:09:26,640 --> 00:09:30,720
how it's all these sort of interlocking

00:09:29,040 --> 00:09:32,880
systems and how it's the decision to

00:09:30,720 --> 00:09:34,240
have strong backwards compatibility with

00:09:32,880 --> 00:09:36,080
old versions of doom

00:09:34,240 --> 00:09:37,519
to you know to incorporate legacy

00:09:36,080 --> 00:09:38,240
features to build on top of those

00:09:37,519 --> 00:09:40,480
features

00:09:38,240 --> 00:09:41,600
and by having to learn how to do

00:09:40,480 --> 00:09:44,240
something like this

00:09:41,600 --> 00:09:45,920
you get a better sense of of what the

00:09:44,240 --> 00:09:47,360
doom engine is and how it works just

00:09:45,920 --> 00:09:49,120
kind of what the feel of this kind of

00:09:47,360 --> 00:09:50,959
you know indeterminate

00:09:49,120 --> 00:09:52,480
feel of the doom engine i thought that

00:09:50,959 --> 00:09:53,279
was really cool and exciting and that's

00:09:52,480 --> 00:09:54,959
what i think

00:09:53,279 --> 00:09:56,959
was interesting to me about this project

00:09:54,959 --> 00:09:58,880
and about programming in general

00:09:56,959 --> 00:10:00,640
i get why folks enjoy this i get why

00:09:58,880 --> 00:10:02,000
people enjoy programming i like

00:10:00,640 --> 00:10:03,760
tinkering with these things i like

00:10:02,000 --> 00:10:04,000
having to poke and prod at it and see

00:10:03,760 --> 00:10:06,480
why

00:10:04,000 --> 00:10:08,160
things work the way they do even and

00:10:06,480 --> 00:10:08,720
especially when it gets confusing

00:10:08,160 --> 00:10:11,360
because

00:10:08,720 --> 00:10:12,880
as i learned that day it took me the

00:10:11,360 --> 00:10:13,360
larger part of an afternoon and an

00:10:12,880 --> 00:10:17,680
evening

00:10:13,360 --> 00:10:22,160
just to make my computer scream at me

00:10:17,680 --> 00:10:22,160

YouTube URL: https://www.youtube.com/watch?v=92cCxTifMj8


