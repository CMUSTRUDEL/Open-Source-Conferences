Title: !!Con 2021 - How layers upon layers of hacky abstractions turned Doom II into... by Kimberly Wilber
Publication date: 2021-07-06
Playlist: !!Con 2021
Description: 
	How layers upon layers of hacky abstractions turned Doom II into the best kart racer!! by Kimberly Wilber

How does one build a “modern” kart racing game on top of the 1994 Doom engine? The answer: layers upon layers of terrible hacks! Like enumerating the rings of an ancient fossilized tree, I’ll be giving you a lovingly detailed look at the 25-year creative history of my favorite racing game (SRB2Kart). Passed from designer to designer over the span of multiple decades, an iconically bloody shooter game became a Sonic the Hedgehog fangame, a third-person skateboarding sim, and then an incredibly underrated open-source kart racer! We’ll look at the clever hacks, the egregious workarounds, and the wonderful community that makes it all possible.

Kimmy is a trans engineer in New York City. She likes to read books, sip tea, and work on doom mods. She has been a part of the SRB2 community off and on since 2003.
Captions: 
	00:00:13,519 --> 00:00:17,440
hi listeners

00:00:14,799 --> 00:00:18,240
i'm kimmy i'm a trans girl from new york

00:00:17,440 --> 00:00:20,640
city

00:00:18,240 --> 00:00:21,680
and today i want to share a video game

00:00:20,640 --> 00:00:24,720
that's been

00:00:21,680 --> 00:00:28,080
really special to me a game that's

00:00:24,720 --> 00:00:30,560
grown up alongside me so to speak

00:00:28,080 --> 00:00:31,920
see this is a game that's been not so

00:00:30,560 --> 00:00:35,360
much developed

00:00:31,920 --> 00:00:37,760
as lovingly cobbled together from the

00:00:35,360 --> 00:00:40,239
pieces they had over the past 30 years

00:00:37,760 --> 00:00:41,360
gives it a really lovely charm i'm

00:00:40,239 --> 00:00:44,320
talking of course

00:00:41,360 --> 00:00:45,440
about the very simply named sonic

00:00:44,320 --> 00:00:49,440
roboblast 2

00:00:45,440 --> 00:00:52,800
cart affectionately known as srb2cart

00:00:49,440 --> 00:00:55,360
for short srb2card is

00:00:52,800 --> 00:00:56,719
an open source extremely customizable

00:00:55,360 --> 00:01:00,079
racing game focused on

00:00:56,719 --> 00:01:01,680
fast-paced gameplay and twitch reflexes

00:01:00,079 --> 00:01:03,440
there's lots of ideas that make it

00:01:01,680 --> 00:01:06,560
special the

00:01:03,440 --> 00:01:09,920
predictable and fair physics engine the

00:01:06,560 --> 00:01:13,200
robust multiplayer capabilities

00:01:09,920 --> 00:01:17,119
this power up that chases you it's

00:01:13,200 --> 00:01:18,880
half blue shell half anxiety trigger

00:01:17,119 --> 00:01:20,720
but the most charming aspect of this

00:01:18,880 --> 00:01:22,720
game and the aspects that i wanted to

00:01:20,720 --> 00:01:25,920
highlight today is how gosh darn

00:01:22,720 --> 00:01:26,479
customizable it is that's right this

00:01:25,920 --> 00:01:29,360
here

00:01:26,479 --> 00:01:31,759
is a sonic the hedgehog fan game which

00:01:29,360 --> 00:01:34,720
means the entire thing is kind of one

00:01:31,759 --> 00:01:36,479
giantly giant lovingly crafted post

00:01:34,720 --> 00:01:38,240
from top to bottom

00:01:36,479 --> 00:01:40,159
the community has put together hundreds

00:01:38,240 --> 00:01:42,560
of custom maps and characters

00:01:40,159 --> 00:01:43,280
probably touching on every obscure anime

00:01:42,560 --> 00:01:44,880
character

00:01:43,280 --> 00:01:46,799
or pop culture reference that you can

00:01:44,880 --> 00:01:49,119
think of you want to play

00:01:46,799 --> 00:01:50,399
hatsune miku you can play several

00:01:49,119 --> 00:01:52,880
different versions of her

00:01:50,399 --> 00:01:54,640
in any selectable color you want a

00:01:52,880 --> 00:01:57,439
literal office chair

00:01:54,640 --> 00:02:01,200
you got it you want a replica of the

00:01:57,439 --> 00:02:04,240
hornet racing car from daytona usa

00:02:01,200 --> 00:02:06,560
you got it well it's a it's a

00:02:04,240 --> 00:02:07,680
cart racer you see so it has to be a

00:02:06,560 --> 00:02:11,360
cart that

00:02:07,680 --> 00:02:14,879
the rally car is is driving the go-kart

00:02:11,360 --> 00:02:17,200
you see so interestingly

00:02:14,879 --> 00:02:18,000
that's not even the most horrifying bit

00:02:17,200 --> 00:02:20,560
all of this

00:02:18,000 --> 00:02:21,280
right now is running on a heavily

00:02:20,560 --> 00:02:26,720
modified

00:02:21,280 --> 00:02:29,920
doom engine yes that doom from 1994.

00:02:26,720 --> 00:02:32,800
listener it's 2021

00:02:29,920 --> 00:02:33,920
and bless we're still using the same

00:02:32,800 --> 00:02:35,760
file formats

00:02:33,920 --> 00:02:37,360
our mapping editors are writing the same

00:02:35,760 --> 00:02:39,440
data structures on disk

00:02:37,360 --> 00:02:40,879
with broadly the same constraints and

00:02:39,440 --> 00:02:43,599
limitations

00:02:40,879 --> 00:02:44,879
unsigned 16-bit integers are still

00:02:43,599 --> 00:02:47,599
everywhere

00:02:44,879 --> 00:02:51,440
how did this happen dear listener let me

00:02:47,599 --> 00:02:56,080
take you on a journey back through time

00:02:51,440 --> 00:02:58,400
it's 1994 and doom 2 was just released

00:02:56,080 --> 00:03:00,239
one of the things that made doom unique

00:02:58,400 --> 00:03:04,640
is that it was one of the first

00:03:00,239 --> 00:03:05,040
truly 3d games but that's not entirely

00:03:04,640 --> 00:03:07,040
true

00:03:05,040 --> 00:03:08,879
actually when you look at it because

00:03:07,040 --> 00:03:10,640
despite the sophisticated graphics at

00:03:08,879 --> 00:03:12,319
the time the levels were simple and

00:03:10,640 --> 00:03:14,640
completely two-dimensional

00:03:12,319 --> 00:03:16,319
just like an architecture blueprint i'll

00:03:14,640 --> 00:03:17,120
talk a bit about the level format in a

00:03:16,319 --> 00:03:19,360
bit later

00:03:17,120 --> 00:03:20,720
but originally doom couldn't contain

00:03:19,360 --> 00:03:23,840
buildings with multiple

00:03:20,720 --> 00:03:25,040
floors on top of each other it was fake

00:03:23,840 --> 00:03:26,480
2d

00:03:25,040 --> 00:03:28,640
and because of the straightforward

00:03:26,480 --> 00:03:30,400
format used for asset storage it wasn't

00:03:28,640 --> 00:03:32,560
long of course before the

00:03:30,400 --> 00:03:33,760
community began reverse engineering at

00:03:32,560 --> 00:03:36,000
secrets

00:03:33,760 --> 00:03:37,519
it turns out that the structure of doom

00:03:36,000 --> 00:03:40,080
makes modifications

00:03:37,519 --> 00:03:41,440
super easy if you want to replace all of

00:03:40,080 --> 00:03:44,400
the enemies with

00:03:41,440 --> 00:03:46,480
seinfeld characters for example all you

00:03:44,400 --> 00:03:48,319
have to do is load a patch file that you

00:03:46,480 --> 00:03:50,799
downloaded over your modem

00:03:48,319 --> 00:03:53,280
that overwrites the enemy graphics it's

00:03:50,799 --> 00:03:55,360
a different time before the internet

00:03:53,280 --> 00:03:56,879
but eventually its software released the

00:03:55,360 --> 00:03:58,799
do mention as open source for

00:03:56,879 --> 00:04:01,120
non-commercial use

00:03:58,799 --> 00:04:02,959
this made doom an ideal development

00:04:01,120 --> 00:04:05,040
platform for many young

00:04:02,959 --> 00:04:06,879
game designers overly ambitious fan

00:04:05,040 --> 00:04:11,360
projects

00:04:06,879 --> 00:04:14,720
like what i wonder meanwhile we had

00:04:11,360 --> 00:04:17,280
sonic roboblast

00:04:14,720 --> 00:04:18,880
in many ways srb2 car traces its

00:04:17,280 --> 00:04:22,720
development history to

00:04:18,880 --> 00:04:25,840
this specimen from 1998. it looks silly

00:04:22,720 --> 00:04:27,440
but i mean come on you could play as

00:04:25,840 --> 00:04:30,479
sonic the hedgehog

00:04:27,440 --> 00:04:33,280
on your computer yeah ibm pc

00:04:30,479 --> 00:04:34,080
it's incredible for its time after this

00:04:33,280 --> 00:04:36,560
release

00:04:34,080 --> 00:04:38,560
game designer sonicoo and his friend ss

00:04:36,560 --> 00:04:39,360
entails decided to base their next

00:04:38,560 --> 00:04:41,680
project

00:04:39,360 --> 00:04:42,720
off of the hot new doom engine they

00:04:41,680 --> 00:04:45,120
wanted to bring it

00:04:42,720 --> 00:04:45,919
into the third dimension they called

00:04:45,120 --> 00:04:50,000
this

00:04:45,919 --> 00:04:51,840
sonic roboblast 2. the earliest versions

00:04:50,000 --> 00:04:54,400
from 1999 were more

00:04:51,840 --> 00:04:56,720
doomed than sonic really they still had

00:04:54,400 --> 00:04:59,440
the characteristic gray palette

00:04:56,720 --> 00:05:01,840
narrow hallways it was halloween themed

00:04:59,440 --> 00:05:03,840
so you had spooky enemies still

00:05:01,840 --> 00:05:05,039
which were little more than ms paint

00:05:03,840 --> 00:05:08,400
scribbles of course

00:05:05,039 --> 00:05:10,240
but it was a start and it soon grew this

00:05:08,400 --> 00:05:13,360
small cult following which then

00:05:10,240 --> 00:05:16,639
blossomed into like a vibrant community

00:05:13,360 --> 00:05:18,560
for all its false and toxicity the srv2

00:05:16,639 --> 00:05:19,680
community is special to me because it

00:05:18,560 --> 00:05:22,960
was really

00:05:19,680 --> 00:05:26,560
my first online community that

00:05:22,960 --> 00:05:29,520
encouraged aggressive self expression

00:05:26,560 --> 00:05:31,199
i could see all the zany characters and

00:05:29,520 --> 00:05:31,919
original creations that my friends were

00:05:31,199 --> 00:05:34,479
making

00:05:31,919 --> 00:05:35,600
to paraphrase toaster one of the srb2

00:05:34,479 --> 00:05:38,800
card devs

00:05:35,600 --> 00:05:40,560
you had all these you know creative kids

00:05:38,800 --> 00:05:42,479
who were hungry for their sonic the

00:05:40,560 --> 00:05:45,600
hedgehog content back in

00:05:42,479 --> 00:05:46,880
2004 and you had this really malleable

00:05:45,600 --> 00:05:50,000
game engine

00:05:46,880 --> 00:05:51,520
and as long as the environment isn't too

00:05:50,000 --> 00:05:54,000
aggressively toxic

00:05:51,520 --> 00:05:55,120
what happens is that you know this scam

00:05:54,000 --> 00:05:57,360
srb2 is

00:05:55,120 --> 00:05:59,360
ideally positioned to kind of absorb as

00:05:57,360 --> 00:06:00,319
many kids as possible into a swirling

00:05:59,360 --> 00:06:03,680
massive

00:06:00,319 --> 00:06:06,479
unrefined creative talent back then

00:06:03,680 --> 00:06:08,240
messing around in the level editor and

00:06:06,479 --> 00:06:10,800
excitedly posting my

00:06:08,240 --> 00:06:13,840
terrible creations to the message board

00:06:10,800 --> 00:06:16,400
kickstarted my computing career honestly

00:06:13,840 --> 00:06:16,880
and of course i wasn't the only one

00:06:16,400 --> 00:06:20,080
before

00:06:16,880 --> 00:06:21,600
long modifications to srb2 started

00:06:20,080 --> 00:06:23,120
popping up on the message board like

00:06:21,600 --> 00:06:26,560
wildflowers

00:06:23,120 --> 00:06:28,560
some good some bad you know

00:06:26,560 --> 00:06:30,080
for the ones related to srb2 cuts

00:06:28,560 --> 00:06:30,720
history going through them really

00:06:30,080 --> 00:06:34,080
quickly

00:06:30,720 --> 00:06:37,039
you had mk races

00:06:34,080 --> 00:06:38,960
this is one of the very earlier ones uh

00:06:37,039 --> 00:06:41,680
july 2005 i think

00:06:38,960 --> 00:06:43,440
it's pretty primitive you are instantly

00:06:41,680 --> 00:06:45,120
killed the moment you fall off the track

00:06:43,440 --> 00:06:48,319
for example

00:06:45,120 --> 00:06:51,199
moving on we had srb2 riders in

00:06:48,319 --> 00:06:53,199
2006 i think it's a parody of the sonic

00:06:51,199 --> 00:06:55,599
the hedgehog skateboarding game

00:06:53,199 --> 00:06:56,800
it also had an extra cart mode almost as

00:06:55,599 --> 00:06:59,199
an afterthought

00:06:56,800 --> 00:07:00,880
people ran with that one you had dude

00:06:59,199 --> 00:07:03,919
cart 64

00:07:00,880 --> 00:07:06,160
super srb2 kart zed and all of these

00:07:03,919 --> 00:07:07,360
other efforts done by other creators on

00:07:06,160 --> 00:07:09,280
the message board

00:07:07,360 --> 00:07:10,560
and that's sort of coalesced into

00:07:09,280 --> 00:07:14,000
srb2card

00:07:10,560 --> 00:07:16,639
that we know and love today meanwhile

00:07:14,000 --> 00:07:18,720
the sonic roboblast 2 video game itself

00:07:16,639 --> 00:07:19,680
also matured into a very high polished

00:07:18,720 --> 00:07:21,919
release

00:07:19,680 --> 00:07:23,199
the two games have heavily overlapping

00:07:21,919 --> 00:07:25,360
but kind of

00:07:23,199 --> 00:07:27,440
slowly bifurcating communities with a

00:07:25,360 --> 00:07:29,759
distinct development focus

00:07:27,440 --> 00:07:31,599
it's really fascinating to watch given

00:07:29,759 --> 00:07:35,919
their humble origins

00:07:31,599 --> 00:07:38,960
so in short srb2cart is an amalgamation

00:07:35,919 --> 00:07:41,919
of an overhaul of a

00:07:38,960 --> 00:07:43,919
joke gameplay mode inside of a mod of a

00:07:41,919 --> 00:07:44,319
sonic the hedgehog total conversion of a

00:07:43,919 --> 00:07:48,160
doom

00:07:44,319 --> 00:07:51,199
source port 1994

00:07:48,160 --> 00:07:53,280
to 2021 all right here

00:07:51,199 --> 00:07:55,360
but for everything that's changed things

00:07:53,280 --> 00:07:58,960
are broadly still the same

00:07:55,360 --> 00:08:00,560
in 1994 matt fell wrote this amazing

00:07:58,960 --> 00:08:03,120
giant text file the

00:08:00,560 --> 00:08:06,240
unofficial doomspec one of the first

00:08:03,120 --> 00:08:09,599
efforts to reverse engineer the system

00:08:06,240 --> 00:08:12,720
and almost everything written here

00:08:09,599 --> 00:08:13,919
still works the same let me give you a

00:08:12,720 --> 00:08:16,960
comparison

00:08:13,919 --> 00:08:18,800
this here is e1 m1

00:08:16,960 --> 00:08:21,440
the first level in the first episode of

00:08:18,800 --> 00:08:22,160
doom as i mentioned earlier dm levels

00:08:21,440 --> 00:08:25,199
are stored as

00:08:22,160 --> 00:08:27,759
2d architecture floor plans you have

00:08:25,199 --> 00:08:28,400
vertices which are 2d points within each

00:08:27,759 --> 00:08:31,120
map

00:08:28,400 --> 00:08:32,399
you have line depths which connect pairs

00:08:31,120 --> 00:08:34,959
of vertices

00:08:32,399 --> 00:08:36,000
each line here has a front side and a

00:08:34,959 --> 00:08:38,479
back side

00:08:36,000 --> 00:08:39,519
each of which might be textured and

00:08:38,479 --> 00:08:41,360
connected lines

00:08:39,519 --> 00:08:43,440
form sectors that the players can walk

00:08:41,360 --> 00:08:46,320
through it's all indoors

00:08:43,440 --> 00:08:48,320
to provide the illusion of 3d gameplay

00:08:46,320 --> 00:08:50,160
you know you can raise or lower the

00:08:48,320 --> 00:08:52,480
ceiling on each sector floor

00:08:50,160 --> 00:08:54,080
so it comes into or out of the screen in

00:08:52,480 --> 00:08:55,680
this top down view

00:08:54,080 --> 00:08:58,000
that way you can have some height you

00:08:55,680 --> 00:09:00,160
can make rooms and stairs and ledges

00:08:58,000 --> 00:09:02,560
which give a bit of verticality

00:09:00,160 --> 00:09:04,560
and then finally a list of things like

00:09:02,560 --> 00:09:06,320
monsters and power-ups populate the

00:09:04,560 --> 00:09:09,120
objects within each level

00:09:06,320 --> 00:09:10,800
that's all there is nothing more other

00:09:09,120 --> 00:09:14,000
than the graphics

00:09:10,800 --> 00:09:17,519
this map was made in 92 i think

00:09:14,000 --> 00:09:20,800
it's fairly famous compare that too

00:09:17,519 --> 00:09:22,800
this is splashdown zone a recently

00:09:20,800 --> 00:09:26,399
released cart level from a mapper named

00:09:22,800 --> 00:09:26,959
ivo i'm opening it in exactly the same

00:09:26,399 --> 00:09:29,680
tool

00:09:26,959 --> 00:09:30,959
it uses the same binary format the same

00:09:29,680 --> 00:09:33,279
conventions

00:09:30,959 --> 00:09:34,399
as before you have your vertices you

00:09:33,279 --> 00:09:37,680
have your line defs

00:09:34,399 --> 00:09:40,480
you have your sectors except in game

00:09:37,680 --> 00:09:42,560
this is what it looks like a sprawling

00:09:40,480 --> 00:09:44,000
canyon dash through a vibrant outdoor

00:09:42,560 --> 00:09:46,080
landscape

00:09:44,000 --> 00:09:47,440
the same primitive building blocks

00:09:46,080 --> 00:09:50,640
transforming those

00:09:47,440 --> 00:09:51,839
bloody dark hallways into something

00:09:50,640 --> 00:09:55,360
fresh

00:09:51,839 --> 00:09:57,040
a reframed space that's new and inviting

00:09:55,360 --> 00:09:58,959
somehow

00:09:57,040 --> 00:10:00,240
that's what makes this game so special

00:09:58,959 --> 00:10:04,480
to me

00:10:00,240 --> 00:10:06,959
after all srb2cart is like us

00:10:04,480 --> 00:10:09,760
lovingly cobble together from whatever

00:10:06,959 --> 00:10:09,760
pieces we have

00:10:10,480 --> 00:10:13,200

YouTube URL: https://www.youtube.com/watch?v=xj6o0hPpMfo


