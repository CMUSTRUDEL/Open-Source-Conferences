Title: !!Con West 2020: Jessica Garson - How I solved my NYC parking problem with Python!
Publication date: 2020-03-23
Playlist: !!Con West 2020
Description: 
	Presented at !!Con West 2020: http://bangbangcon.com/west

Since I have a car in New York City, my car is subject to the city’s alternate-side-of-the-street parking regulations. This means most nights I need to move my car before the early morning street cleaning that happens in my neighborhood. I had developed a nightly routine around moving my car before I go to bed. I am sometimes a bit too good at this, and I often move my car on days I don’t need to. Since alternate-side-of-the-street parking is often canceled on holidays or days where there is bad weather, there is a Twitter account, @NYCASP, which posts daily and whenever there is an emergency situation. I used Python, Twilio and the Twitter API to solve this problem for myself so I get a text message whenever I don’t need to move my car.

#bangbangcon #bangbangconwest #bangbangconwest2020
Captions: 
	00:00:26,820 --> 00:00:28,400
Hey, how's it going?

00:00:29,520 --> 00:00:30,620
Can you all hear me okay?

00:00:31,080 --> 00:00:32,080
All right. Cool.

00:00:32,630 --> 00:00:33,630
Hi.

00:00:33,630 --> 00:00:36,580
So my name is Jess, and I'm a developer advocate at Twitter.

00:00:36,580 --> 00:00:41,870
And I'm here to talk with you about how I solved a parking problem that I had in my life

00:00:41,870 --> 00:00:44,220
with code.

00:00:44,220 --> 00:00:47,850
And let me know if this inspires you to create anything.

00:00:47,850 --> 00:00:56,700
You can reach me @JessicaGarson on Twitter, and code for the talk can be found at github.com/twitterdev/parking.

00:00:59,300 --> 00:01:03,980
Today we're actually gonna be using a repository in there called Recent Search.

00:01:03,990 --> 00:01:08,200
So let's talk a little bit about what was happening in my life to inspire me to create

00:01:08,200 --> 00:01:09,870
a solution with code.

00:01:09,870 --> 00:01:13,540
So I live in Brooklyn, New York.

00:01:13,540 --> 00:01:21,430
And if you notice, the car has an orange... envelope, of sorts, on it.

00:01:21,430 --> 00:01:22,480
That is a parking ticket.

00:01:22,480 --> 00:01:26,219
How many people have gotten a parking ticket in New York?

00:01:26,219 --> 00:01:27,830
So a couple of hands are raised.

00:01:27,830 --> 00:01:30,090
How many people have ever gotten a parking ticket?

00:01:30,090 --> 00:01:31,090
Alright.

00:01:31,090 --> 00:01:33,230
The whole room has raised their hands.

00:01:33,230 --> 00:01:39,440
So in New York, that is a $45 to $160 endeavor.

00:01:39,440 --> 00:01:42,210
Depending on where you park and the situation.

00:01:42,210 --> 00:01:45,820
And that's really, really a lot of money.

00:01:45,820 --> 00:01:47,920
So I had a problem.

00:01:47,920 --> 00:01:49,080
I had a car.

00:01:49,080 --> 00:01:50,670
I no longer have a car.

00:01:50,670 --> 00:01:52,140
But I did have a car.

00:01:52,140 --> 00:01:56,040
And I was moving my car a lot.

00:01:56,050 --> 00:01:57,050
Every night.

00:01:57,050 --> 00:02:03,909
I actually looked at traffic data in my neighborhood and I would move my car every night at 8 o'clock.

00:02:03,909 --> 00:02:05,130
And I was really good about this.

00:02:05,130 --> 00:02:10,129
I had an alarm to remind me to do so, I would move my social schedule, so I would move my

00:02:10,129 --> 00:02:11,120
car right on time.

00:02:12,400 --> 00:02:13,500
And I was doing this every night.

00:02:13,510 --> 00:02:14,510
You might be wondering...

00:02:14,510 --> 00:02:16,120
Jess, why were you doing this?

00:02:16,120 --> 00:02:19,640
What are alternate side of the street parking restrictions anyway in New York?!

00:02:19,640 --> 00:02:20,640
What is this?

00:02:20,640 --> 00:02:21,540
So.

00:02:22,340 --> 00:02:23,040
Yeah.

00:02:23,040 --> 00:02:27,390
On Mondays and Thursdays, in my neighborhood, you can park on the right side of the street

00:02:27,390 --> 00:02:32,620
until 8 am, where there is street cleaning that comes through the neighborhood.

00:02:32,620 --> 00:02:39,490
And on Tuesdays and Fridays, on the other side of the street, it's the same situation.

00:02:39,490 --> 00:02:40,780
So...

00:02:41,250 --> 00:02:42,940
I was moving my car a lot.

00:02:42,940 --> 00:02:48,490
And there was one night where... I was driving around for about 2 hours, 3 hours, listening

00:02:48,490 --> 00:02:52,070
to a book on tape, and I came back home and my roommate was like...

00:02:52,070 --> 00:02:53,070
Jess!

00:02:53,070 --> 00:02:54,070
Where were you?

00:02:54,070 --> 00:02:55,070
And I was like...

00:02:55,070 --> 00:02:55,680
Yeah.

00:02:55,680 --> 00:02:56,440
I was moving my car.

00:02:56,440 --> 00:02:57,060
And they're like...

00:02:57,060 --> 00:02:58,420
Yeah, but after, what did you do?

00:02:58,420 --> 00:02:59,480
Did you go to a show?

00:02:59,480 --> 00:03:00,440
Did you go to a party?

00:03:00,780 --> 00:03:02,400
Did you do something cool?

00:03:02,640 --> 00:03:03,140
I was like, nope!

00:03:03,140 --> 00:03:04,220
I was just moving my car.

00:03:04,520 --> 00:03:05,990
They were like...

00:03:05,990 --> 00:03:07,650
You know, you didn't have to do that.

00:03:07,650 --> 00:03:08,650
I was like...

00:03:08,650 --> 00:03:10,020
What do you mean I didn't have to do that?

00:03:10,020 --> 00:03:14,110
And they showed me this really cool Twitter handle called NYC alternate side of the street parking

00:03:14,110 --> 00:03:19,440
and it updates every day at 7:30 am and 4 pm.

00:03:19,440 --> 00:03:20,580
And I was like...

00:03:20,580 --> 00:03:21,580
Whoa!

00:03:21,580 --> 00:03:23,370
I'm a developer advocate at Twitter!!

00:03:23,370 --> 00:03:27,099
I think I can solve this problem!

00:03:27,099 --> 00:03:32,930
So I built this solution using Twitter data and Twilio to send myself a text message whenever

00:03:32,930 --> 00:03:35,510
I didn't have to move my car.

00:03:35,510 --> 00:03:38,440
So let's kind of talk about how I solved this.

00:03:38,440 --> 00:03:43,330
So I needed to get the tweets from the NYC ASP Twitter handle.

00:03:43,330 --> 00:03:47,620
I needed to see if the words "suspended" and "tomorrow" appeared in the same tweet.

00:03:47,800 --> 00:03:51,660
I needed to get a text message when the words appeared, and I needed to run this on a server

00:03:51,660 --> 00:03:56,740
so that this repeated without any effort from me, because I would never remember to run the script.

00:03:57,020 --> 00:04:01,800
So the process for creating this app is to get the tweets we want from the Twitter API

00:04:01,800 --> 00:04:05,989
connect to Twilio, and get a text whenever I didn't have to move my car.

00:04:05,989 --> 00:04:08,629
If you want to build something like this, you might be wondering: What will I need to

00:04:08,629 --> 00:04:10,210
get started?

00:04:10,210 --> 00:04:16,340
You will need to create a Twitter app which allows you to connect to the API.

00:04:16,340 --> 00:04:21,160
You can apply for access at this address if you need that.

00:04:21,160 --> 00:04:26,430
The endpoint that I'm gonna be showcasing today uses one of our experimental endpoints

00:04:26,430 --> 00:04:28,650
called Twitter developer labs.

00:04:28,650 --> 00:04:34,840
It's Recent Search, which allows you to get tweets from the past seven days.

00:04:34,840 --> 00:04:36,150
And you also need a Twilio account.

00:04:36,150 --> 00:04:39,729
You can check out their documentation on getting started on the subject.

00:04:39,729 --> 00:04:43,129
Tilde is actually here with Twilio.

00:04:43,129 --> 00:04:48,240
And they have some really great example code as well and you can talk with them if you need any help.

00:04:48,900 --> 00:04:54,900
You'll also need the libraries twilio.rest, which you can pip install, pandas, and requests.

00:04:54,900 --> 00:04:56,550
So let's look at the code.

00:04:56,550 --> 00:04:58,499
I always like looking at the code.

00:04:58,499 --> 00:05:01,900
So I have this running in a Jupyter notebook right now.

00:05:01,900 --> 00:05:07,919
So the first thing you have to do is import the libraries that you need which is pandas, yaml,

00:05:07,919 --> 00:05:08,919
and requests.

00:05:08,919 --> 00:05:10,400
So you run that.

00:05:10,400 --> 00:05:13,909
Then we also can create a helper script.

00:05:13,909 --> 00:05:19,999
So you can actually get code that's very similar to this on an index card over at the Twilio booth.

00:05:19,999 --> 00:05:25,550
But from here, you'll import in os, you can use environment variables, import in twilio.rest

00:05:25,550 --> 00:05:29,470
and their client to help you connect and you can create a function that I like to think

00:05:29,470 --> 00:05:36,439
of as a secret handshake to create the authentication that you need, and then you can go and send a message.

00:05:36,439 --> 00:05:39,830
So this is where you set it up, so you can say...

00:05:39,830 --> 00:05:41,680
You don't have to move your car tonight.

00:05:41,680 --> 00:05:42,710
Enjoy your night.

00:05:42,710 --> 00:05:46,460
At one point, I had the full tweets going through this.

00:05:46,460 --> 00:05:48,690
But it wasn't really needed.

00:05:48,690 --> 00:05:56,100
So from there, you can actually import these two functions that you've created into the script.

00:05:56,240 --> 00:05:59,740
And then from here, let's actually run this.

00:05:59,740 --> 00:06:04,619
From here, we can actually pass in the handle that we're looking for, into the URL.

00:06:04,619 --> 00:06:10,639
So we can pass in the NYC ASP handle, and we see the full URL that we're gonna be connecting to.

00:06:11,639 --> 00:06:19,569
And then from here, I actually have a yaml file to keep my secrets in it.

00:06:19,569 --> 00:06:22,599
I make sure I don't push that anywhere.

00:06:22,599 --> 00:06:25,469
And I keep it in my .gitignore.

00:06:25,469 --> 00:06:29,320
But I have my bearer token in there, so I can pass that through.

00:06:29,320 --> 00:06:34,919
So I'm gonna go through the secret yaml file, and then from there, I can pass in that bearer

00:06:34,919 --> 00:06:41,509
token, in through the headers, using the requests library for Python and then do a GET request,

00:06:41,509 --> 00:06:44,909
pass in the URL, and pass in the headers that contain the bearer token.

00:06:44,909 --> 00:06:50,759
And so the next thing I have to do is figure out if the response encoding is correct.

00:06:50,759 --> 00:06:55,559
Create an object for the JSON, print out that JSON, and then...

00:06:55,559 --> 00:06:56,559
Ooh!

00:06:56,560 --> 00:07:00,360
When I get nervous, I like move my hands in weird ways.

00:07:01,380 --> 00:07:02,260
Yay cool.

00:07:02,540 --> 00:07:04,540
And so we can actually scroll down here.

00:07:04,550 --> 00:07:06,550
We can put it inside of a dataframe.

00:07:06,550 --> 00:07:13,730
And so from here, what we can see is that we have the data in a dataframe, and we have

00:07:13,730 --> 00:07:17,029
just the ID and the last 10 tweets.

00:07:17,029 --> 00:07:18,029
Which is pretty exciting.

00:07:18,029 --> 00:07:19,029
So we have...

00:07:19,029 --> 00:07:24,610
We can actually see that the rules are in effect every day, except for on the 8th line

00:07:24,610 --> 00:07:25,990
and the 9th line.

00:07:25,990 --> 00:07:27,729
You can see that...

00:07:27,729 --> 00:07:32,159
Actually, line number 7, the rules will be suspended.

00:07:32,160 --> 00:07:34,140
So that's pretty exciting.

00:07:35,260 --> 00:07:36,200
Actually, no.

00:07:36,200 --> 00:07:36,999
It's the 8th line.

00:07:37,000 --> 00:07:38,389
I did get it right.

00:07:39,120 --> 00:07:40,840
It's an older version of the code.

00:07:40,849 --> 00:07:46,770
And then when you do the client, that's where you connect to the Twilio API, and then you

00:07:46,770 --> 00:07:49,110
can put the logic in this one statement.

00:07:49,110 --> 00:07:54,749
So here we have: If the word "suspended" and "tomorrow" appear in the same text, then it

00:07:54,749 --> 00:07:56,270
says "text sent".

00:07:56,270 --> 00:08:00,179
And since it is not today, it will say "not today, friend."

00:08:00,180 --> 00:08:08,460
However, if I move this and change it to the 8th line, then I should get a text message.

00:08:10,530 --> 00:08:12,460
And I do have a text message.

00:08:12,479 --> 00:08:13,710
And two more minutes left.

00:08:13,710 --> 00:08:15,800
Which is pretty exciting.

00:08:16,660 --> 00:08:19,800
So this is what the text message looks like for me right now.

00:08:19,809 --> 00:08:23,159
It tells me that I don't have to move my car.

00:08:23,159 --> 00:08:28,330
And this is currently deployed to a DigitalOcean server using a cron job.

00:08:28,330 --> 00:08:33,070
So the conclusion is: You might be wondering -- Jess, why didn't you make this so you do

00:08:33,070 --> 00:08:37,180
get a text when you need to move your car instead of when you don't?

00:08:37,180 --> 00:08:39,020
That's something that like everytime I give this talk people ask me about.

00:08:39,020 --> 00:08:42,460
Why did you build this whole thing instead of tell you when you did have to move your car?

00:08:42,469 --> 00:08:44,310
That just wasn't the problem I had in my life.

00:08:44,310 --> 00:08:49,620
So I challenge all of you to think about the problems that you have in your life and think

00:08:49,620 --> 00:08:53,920
about how you can create a solution with code.

00:08:53,920 --> 00:09:00,500
And if you want to see a blog post version of this talk, you can check it out at t.co/parking-post.

00:09:00,500 --> 00:09:02,780
Let me know if this inspires you to create anything.

00:09:02,780 --> 00:09:06,770
And you can let us know at @TwitterDev, or on the Twitter community forums if you get

00:09:06,770 --> 00:09:11,070
stuck or if you just want to tell us what you've built, and if you have feedback while

00:09:11,070 --> 00:09:16,220
you're using the Twitter API, you can give us feedback at twitterdevfeedback.uservoice.com.

00:09:16,220 --> 00:09:19,280
And we're also hiring for a developer advocacy manager.

00:09:19,280 --> 00:09:21,930
So if that's something you're interested in, come talk to me.

00:09:21,930 --> 00:09:24,650
And if you're building with the Twitter API and wanna' talk, come find me.

00:09:24,650 --> 00:09:26,220
I'd love to have a conversation.

00:09:26,480 --> 00:09:27,160
Thanks!

00:09:27,720 --> 00:09:31,240

YouTube URL: https://www.youtube.com/watch?v=y43v_2RWcRE


