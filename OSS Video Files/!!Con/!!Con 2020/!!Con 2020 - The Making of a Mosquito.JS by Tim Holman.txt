Title: !!Con 2020 - The Making of a Mosquito.JS by Tim Holman
Publication date: 2020-05-28
Playlist: !!Con 2020
Description: 
	The Making of a Mosquito.JS by Tim Holman

The audio api’s are one of the most complex and wonderful parts of the browser, built to open up the entire web to audio creation. At some point though, we were so preoccupied with whether or not we could, we didn’t stop to think if we should… And as such, mosquito.js was born.

This talk is about my descent into madness, as piece by piece I poured my energy into best possible recreation of the most dangerous, and annoying creatures on the entire planet. Learn some web audio basics, and some neat tips and tricks, and see how one person completely fell apart trying to perfect something that should never have existed in the first place. If you’re lucky, you can go a little insane too!

Tim is an Australian developer with a love for all things weird on the web, if you don’t catch him hacking away at the worlds most useless code, he’ll be working hard on tools to get more people into generative art, and feeling empowered to create!
Captions: 
	00:00:13,629 --> 00:00:20,300
okay hello everyone welcome to my talk

00:00:16,369 --> 00:00:21,770
making of a mosquito here are my details

00:00:20,300 --> 00:00:24,110
I would love to talk about myself more

00:00:21,770 --> 00:00:26,810
but we only have 10 minutes so we got to

00:00:24,110 --> 00:00:30,379
get through it quick but again if you

00:00:26,810 --> 00:00:32,450
have ever seen me on the internet before

00:00:30,379 --> 00:00:34,550
or in any of my talks you'll kind of

00:00:32,450 --> 00:00:36,079
know that I really want to get people

00:00:34,550 --> 00:00:38,350
into creating things and I think it's

00:00:36,079 --> 00:00:41,390
the best way to learn and teach and grow

00:00:38,350 --> 00:00:44,420
and all around have fun

00:00:41,390 --> 00:00:45,620
so the reason that I wanted to make a

00:00:44,420 --> 00:00:47,750
mosquito in the first place was to

00:00:45,620 --> 00:00:49,489
explore the Web Audio API and wanted

00:00:47,750 --> 00:00:52,550
something not too crazy and not too

00:00:49,489 --> 00:00:55,130
simple to learn Web Audio API can be a

00:00:52,550 --> 00:00:58,430
little intimidating it even mentions

00:00:55,130 --> 00:01:01,130
that in the mdn documentation so I built

00:00:58,430 --> 00:01:02,989
this beautiful sanity child to track my

00:01:01,130 --> 00:01:06,619
sanity over time I like the child at

00:01:02,989 --> 00:01:09,020
this point because it shows that sanity

00:01:06,619 --> 00:01:11,570
could potentially go above one when that

00:01:09,020 --> 00:01:13,159
is truly not the case but with every

00:01:11,570 --> 00:01:15,170
project you kind of just got to start

00:01:13,159 --> 00:01:18,020
with your building blocks and for me

00:01:15,170 --> 00:01:19,880
that is a small HTML page referencing a

00:01:18,020 --> 00:01:22,340
script and in that script I just have

00:01:19,880 --> 00:01:24,859
one single line to begin let context

00:01:22,340 --> 00:01:27,740
equal new windows audio context the

00:01:24,859 --> 00:01:31,130
audio context is how you access the Web

00:01:27,740 --> 00:01:32,389
Audio API so if we were to look at my

00:01:31,130 --> 00:01:36,259
mosquito and I just have to emphasize

00:01:32,389 --> 00:01:38,450
how much I truly just buys this emoji it

00:01:36,259 --> 00:01:41,389
would just be the audio context now to

00:01:38,450 --> 00:01:43,099
get noise from the Web Audio API you

00:01:41,389 --> 00:01:45,409
need a couple more things I need an

00:01:43,099 --> 00:01:47,329
oscillator node and a game node and

00:01:45,409 --> 00:01:48,950
don't worry I'm not gonna Al you're here

00:01:47,329 --> 00:01:50,990
I'm gonna go back and explain these but

00:01:48,950 --> 00:01:52,369
the raid that I the reason that I want

00:01:50,990 --> 00:01:53,810
to do it this way is because this is how

00:01:52,369 --> 00:01:55,880
I built it and then I kind of reverse

00:01:53,810 --> 00:01:58,759
engineered backward towards making the

00:01:55,880 --> 00:02:01,249
mosquito so if I had my code I would

00:01:58,759 --> 00:02:02,689
have the context I'd be creating an

00:02:01,249 --> 00:02:04,429
oscillator node you can see that it

00:02:02,689 --> 00:02:06,950
comes from that context that way of

00:02:04,429 --> 00:02:09,979
audio context I'd be creating a gain

00:02:06,950 --> 00:02:12,620
node and then I would be connecting my

00:02:09,979 --> 00:02:14,480
gain node to the oscillator node and I'd

00:02:12,620 --> 00:02:16,340
be connecting the context decks

00:02:14,480 --> 00:02:18,800
destination which is the output the

00:02:16,340 --> 00:02:21,320
speakers to the gain node and then I

00:02:18,800 --> 00:02:23,810
also have to add a button in because

00:02:21,320 --> 00:02:26,330
back in the day we allowed auto-playing

00:02:23,810 --> 00:02:29,480
audio and the world ruined

00:02:26,330 --> 00:02:30,860
it's for everyone so this would be my

00:02:29,480 --> 00:02:36,440
mosquito at the start and this would

00:02:30,860 --> 00:02:40,820
sound exactly like this a very annoying

00:02:36,440 --> 00:02:43,610
buzz kind of space noise my sanity

00:02:40,820 --> 00:02:45,530
immediately started to go down I

00:02:43,610 --> 00:02:49,130
immediately had to search how to reduce

00:02:45,530 --> 00:02:51,290
Web Audio API volume and lo and behold

00:02:49,130 --> 00:02:53,750
up comes the game node so we figured out

00:02:51,290 --> 00:02:55,310
what that does it also mentions in the

00:02:53,750 --> 00:02:57,410
game node never changed this value

00:02:55,310 --> 00:02:59,780
directly but I never stopped to think of

00:02:57,410 --> 00:03:01,970
I should and I decided that I will just

00:02:59,780 --> 00:03:03,920
change that value directly and it

00:03:01,970 --> 00:03:05,510
reduced the volume to half and that one

00:03:03,920 --> 00:03:07,420
that you heard just then was actually

00:03:05,510 --> 00:03:10,100
half already it was really really loud

00:03:07,420 --> 00:03:11,780
so if we looked at my mosquito now it

00:03:10,100 --> 00:03:13,520
would be an oscillator node a game node

00:03:11,780 --> 00:03:15,740
and an audio context we know what the

00:03:13,520 --> 00:03:17,810
game node is but what is this oscillator

00:03:15,740 --> 00:03:19,550
note do well it turns out that the

00:03:17,810 --> 00:03:22,130
oscillator node is responsible for

00:03:19,550 --> 00:03:25,250
emitting a sound wave much like this

00:03:22,130 --> 00:03:27,800
sine wave that you see here and it has a

00:03:25,250 --> 00:03:29,540
few properties on it it has a frequency

00:03:27,800 --> 00:03:31,850
which is the frequency of the wave and

00:03:29,540 --> 00:03:35,630
it has a type there's a bunch of

00:03:31,850 --> 00:03:37,760
different types of waves that it can

00:03:35,630 --> 00:03:39,590
emit and of course a mosquito would be

00:03:37,760 --> 00:03:41,959
the most intimidating sounding type

00:03:39,590 --> 00:03:43,760
which is the sawtooth and then I did a

00:03:41,959 --> 00:03:47,150
little research into frequencies of

00:03:43,760 --> 00:03:50,360
mosquitoes and there are a lot of videos

00:03:47,150 --> 00:03:51,769
online upsettingly and I also kind of

00:03:50,360 --> 00:03:53,989
learned that you could just Jack the

00:03:51,769 --> 00:03:55,940
frequency up to about 10,000 and make

00:03:53,989 --> 00:03:58,340
that noise that only dogs and small kids

00:03:55,940 --> 00:04:01,640
can hear do with that information what

00:03:58,340 --> 00:04:04,130
you will so I played around with my

00:04:01,640 --> 00:04:07,760
oscillator node the sawtooth again was

00:04:04,130 --> 00:04:10,640
the best the best no time for this and I

00:04:07,760 --> 00:04:12,860
set the frequency to about 750 and that

00:04:10,640 --> 00:04:15,310
gave me a mosquito that sounded a little

00:04:12,860 --> 00:04:15,310
like this

00:04:17,269 --> 00:04:22,650
very annoying I have to reduce the

00:04:19,650 --> 00:04:25,800
volume again straight away sanity is at

00:04:22,650 --> 00:04:27,330
an all-time low of 0.8 the graph has

00:04:25,800 --> 00:04:30,180
figured out now that it's not gonna go

00:04:27,330 --> 00:04:32,370
above that but this mosquito I would

00:04:30,180 --> 00:04:35,069
call the bass mosquito it's the oncreate

00:04:32,370 --> 00:04:37,020
mosquito the MPM in it mosquito the user

00:04:35,069 --> 00:04:39,509
bin mosquito that's where I would live

00:04:37,020 --> 00:04:41,879
sanity is falling at a rapid rate at

00:04:39,509 --> 00:04:44,099
this point I've been playing with this

00:04:41,879 --> 00:04:46,050
for 30 minutes or something I listen to

00:04:44,099 --> 00:04:47,669
mosquito videos it was all kind of going

00:04:46,050 --> 00:04:49,650
crazy in my head I decided that I need

00:04:47,669 --> 00:04:51,000
to stop the mosquito noise you know at

00:04:49,650 --> 00:04:53,669
the moment I was refreshing it was

00:04:51,000 --> 00:04:55,349
really difficult to debug and the

00:04:53,669 --> 00:04:57,810
oscillator had a starting to stop so I

00:04:55,349 --> 00:04:59,970
thought okay let me just plug that in to

00:04:57,810 --> 00:05:01,800
the mosquito so I can press that button

00:04:59,970 --> 00:05:03,509
I can press it again to stop but at this

00:05:01,800 --> 00:05:05,699
point I'd already closed all my tabs

00:05:03,509 --> 00:05:08,130
multiple times because I felt that I was

00:05:05,699 --> 00:05:10,590
still hearing the buzzing afterwards I

00:05:08,130 --> 00:05:12,900
decided to add a clap audio noise to

00:05:10,590 --> 00:05:16,400
give me a small brief moment of

00:05:12,900 --> 00:05:16,400
satisfaction so

00:05:18,010 --> 00:05:23,750
there we had our clap and our ending of

00:05:21,169 --> 00:05:26,270
the mosquito I decided to add in some

00:05:23,750 --> 00:05:28,550
ASCII art because I was really losing

00:05:26,270 --> 00:05:30,620
the plot and then I found this when I

00:05:28,550 --> 00:05:33,710
tried to stop my mosquito again it turns

00:05:30,620 --> 00:05:35,510
out you can't restart and also later

00:05:33,710 --> 00:05:38,180
node once you've called stuff on it I

00:05:35,510 --> 00:05:40,280
have no idea why my best guess is that

00:05:38,180 --> 00:05:42,650
once you clap a mosquito completely out

00:05:40,280 --> 00:05:45,860
of existence you can't obviously clap a

00:05:42,650 --> 00:05:48,500
mosquito into existence so I had to do a

00:05:45,860 --> 00:05:50,030
bunch of different things here I had to

00:05:48,500 --> 00:05:52,010
stop the oscillator node when I

00:05:50,030 --> 00:05:54,200
initially clicked the button and then

00:05:52,010 --> 00:05:57,380
otherwise I would disconnect or

00:05:54,200 --> 00:06:00,350
reconnect the gain node my sanity again

00:05:57,380 --> 00:06:02,180
took a big hit here because I knew that

00:06:00,350 --> 00:06:04,330
every time I stopped the mosquito it was

00:06:02,180 --> 00:06:07,010
secretly oscillating behind the scenes

00:06:04,330 --> 00:06:09,770
waiting for its opportunity to strike

00:06:07,010 --> 00:06:12,710
now if we think of the mosquito that I

00:06:09,770 --> 00:06:13,230
have at the moment this again hears the

00:06:12,710 --> 00:06:16,439
noise

00:06:13,230 --> 00:06:16,439
[Music]

00:06:17,199 --> 00:06:24,969
well you can hear the pain you can feel

00:06:21,490 --> 00:06:26,289
the pain the equivalent of that would

00:06:24,969 --> 00:06:29,710
really be a mosquito just kind of

00:06:26,289 --> 00:06:31,419
sitting hovering above us at exactly the

00:06:29,710 --> 00:06:32,949
same spot looking down and although that

00:06:31,419 --> 00:06:35,889
would be intimidating I kind of wanted

00:06:32,949 --> 00:06:39,159
to make the mosquito a little bit more

00:06:35,889 --> 00:06:40,930
bumbling and frustrating than the stuck

00:06:39,159 --> 00:06:43,870
mosquito in the sky and between that

00:06:40,930 --> 00:06:45,939
frequency and and type option there was

00:06:43,870 --> 00:06:48,009
detuned I didn't really need to read

00:06:45,939 --> 00:06:49,479
what detune was because at high school a

00:06:48,009 --> 00:06:51,430
lot of people played Wonderwall and

00:06:49,479 --> 00:06:54,580
their guitar and I had great experience

00:06:51,430 --> 00:06:56,939
with detune now my sanity is low at this

00:06:54,580 --> 00:06:59,710
point it's below the zero point six line

00:06:56,939 --> 00:07:02,469
that I called the insane or genius line

00:06:59,710 --> 00:07:05,050
you know I've set up my citronella

00:07:02,469 --> 00:07:08,319
candles on spraying everywhere I'm

00:07:05,050 --> 00:07:10,060
trouble for doing that okay but I

00:07:08,319 --> 00:07:11,650
decided to build a mesquite engine and

00:07:10,060 --> 00:07:14,169
the mesquite engine is what I was going

00:07:11,650 --> 00:07:16,300
to use to detune the mosquito so if I

00:07:14,169 --> 00:07:17,220
were to just set that originally up on a

00:07:16,300 --> 00:07:20,539
sine wave

00:07:17,220 --> 00:07:20,539
[Music]

00:07:21,090 --> 00:07:26,530
you can hear them that it goes up and it

00:07:24,099 --> 00:07:27,969
goes down as as with the sine wave now

00:07:26,530 --> 00:07:29,560
that mosquito would just be kind of

00:07:27,969 --> 00:07:31,810
hovering up and down which again would

00:07:29,560 --> 00:07:34,840
be an intimidating but not completely

00:07:31,810 --> 00:07:37,419
what I was going for so I decided to

00:07:34,840 --> 00:07:39,610
rather than completely just keep adding

00:07:37,419 --> 00:07:42,400
to the sine counter putting it round

00:07:39,610 --> 00:07:44,590
around I decided that 25% of the time I

00:07:42,400 --> 00:07:46,599
would move backwards and 50% of the time

00:07:44,590 --> 00:07:48,699
I would move forwards and the other

00:07:46,599 --> 00:07:51,069
remaining 25% it would just stay static

00:07:48,699 --> 00:07:53,620
which gives us this staggered mesquite

00:07:51,069 --> 00:07:59,560
engine I call mesquite engine 0.5 and if

00:07:53,620 --> 00:08:01,569
you were to listen to it you can hear

00:07:59,560 --> 00:08:02,319
that there it is much much more like a

00:08:01,569 --> 00:08:05,199
mosquito

00:08:02,319 --> 00:08:07,659
I felt that it needed a little bit more

00:08:05,199 --> 00:08:09,669
variance so I added a small pusher and

00:08:07,659 --> 00:08:12,879
pull it in the middle of that this

00:08:09,669 --> 00:08:14,830
variable will just go up to 0.6 or down

00:08:12,879 --> 00:08:17,439
and it was just randomly 50% of the time

00:08:14,830 --> 00:08:20,349
go up or down that small little push

00:08:17,439 --> 00:08:25,539
looks like this and if I were to attach

00:08:20,349 --> 00:08:27,969
that to the end of my already rotating

00:08:25,539 --> 00:08:32,310
broken rotating mesquite engine I would

00:08:27,969 --> 00:08:32,310
have what I call mesquite engine 1.0

00:08:35,010 --> 00:08:39,310
now that is a mosquito if I've ever seen

00:08:37,870 --> 00:08:41,050
one but now that I've got this mesquite

00:08:39,310 --> 00:08:42,580
engine running the detune why don't I

00:08:41,050 --> 00:08:44,080
connect it to all the pieces if I

00:08:42,580 --> 00:08:46,000
connect it to the gain node I can

00:08:44,080 --> 00:08:49,350
control the volume and it can go up and

00:08:46,000 --> 00:08:49,350
down again with the mosquito

00:08:53,390 --> 00:08:58,530
that is really starting to get on to the

00:08:56,610 --> 00:09:00,840
annoyance of the mosquito and I thought

00:08:58,530 --> 00:09:02,310
what else do I hate about mosquitos

00:09:00,840 --> 00:09:03,630
aside from everything and one thing

00:09:02,310 --> 00:09:06,030
that's really difficult about mosquitoes

00:09:03,630 --> 00:09:07,560
is trying to triangulate the noise when

00:09:06,030 --> 00:09:09,000
they're in your room or they're near you

00:09:07,560 --> 00:09:11,610
you know you're looking at trying to

00:09:09,000 --> 00:09:13,260
find it you want to get it and it turns

00:09:11,610 --> 00:09:15,210
out there was one more beautiful piece

00:09:13,260 --> 00:09:17,430
in the web mosquito API called the

00:09:15,210 --> 00:09:19,440
stereo panic mode and the stereo pan

00:09:17,430 --> 00:09:21,780
enode which I'm going to connect to the

00:09:19,440 --> 00:09:23,400
mesquite engine of course controls the

00:09:21,780 --> 00:09:24,630
left or the right speaker now I'm not

00:09:23,400 --> 00:09:27,000
too sure if this will come up with a

00:09:24,630 --> 00:09:39,000
stream but this was my absolute complete

00:09:27,000 --> 00:09:41,340
mosquito infuriating infuriating and

00:09:39,000 --> 00:09:42,020
fury ating that is my talk thank you

00:09:41,340 --> 00:09:43,890
everybody

00:09:42,020 --> 00:09:45,600
presenting this to you of course has

00:09:43,890 --> 00:09:49,550
brought my sanity straight back up to

00:09:45,600 --> 00:09:49,550

YouTube URL: https://www.youtube.com/watch?v=rncnohpRY2Q


