Title: What do I need for my IoT Cloud platform? - Joakim Fernstad
Publication date: 2018-04-24
Playlist: foss-north 2018
Description: 
	I just want my device to send data somewhere. How hard can it be?
The right IoT platform lets your devices send data somewhere, in a reliable and secure way, and you don't have to care how. This is a talk for those who care about the ""how"" part, with focus on open source building blocks. What is the basic functionality I need in my cloud? Why do I need this functionality? Then what? There are plenty of questions, let's explore some answers.

---

Joakim is Software Architect at Endian Technologies where he maintains their IoT Cloud Platform, Endian SCORE, and also helps clients with cloud infrastructure work. Previously, he has been CTO at a couple startups where he designed and implemented their backends from scratch. Joakim lives by the mantra "never stop learning". 

http://foss-north.se/2018/speakers-and-talks.html#jfernstad
Captions: 
	00:00:14,150 --> 00:00:21,840
my name is yoga and a victor Sultan MDM

00:00:17,970 --> 00:00:25,439
technologies and did you know that last

00:00:21,840 --> 00:00:31,590
year in June there were 450 global IOT

00:00:25,439 --> 00:00:32,460
cloud platforms was that not that's

00:00:31,590 --> 00:00:34,860
exactly right

00:00:32,460 --> 00:00:38,210
and after this talk you guys will know

00:00:34,860 --> 00:00:41,040
how to build your own IOT cloud platform

00:00:38,210 --> 00:00:44,519
so the alternate title for my talk is

00:00:41,040 --> 00:00:47,070
the 9 verbs automatic now cloud platform

00:00:44,519 --> 00:00:50,070
and these 9 perhaps define the absolute

00:00:47,070 --> 00:00:52,920
basic functionality you need to create a

00:00:50,070 --> 00:00:55,890
scalable secure and robust IOT cloud

00:00:52,920 --> 00:00:58,110
platform so let's the game we'll see

00:00:55,890 --> 00:01:00,270
what these verbs mean and which

00:00:58,110 --> 00:01:05,970
components would be used to fulfill this

00:01:00,270 --> 00:01:07,649
nationality the first one is scalable so

00:01:05,970 --> 00:01:10,340
the reason you have an IOT cloud

00:01:07,649 --> 00:01:13,200
platform rather than an IOT platform

00:01:10,340 --> 00:01:15,899
running our server in your basement is

00:01:13,200 --> 00:01:19,560
the clouds ability to escape so what

00:01:15,899 --> 00:01:23,369
does that mean so before the cloud you

00:01:19,560 --> 00:01:25,259
had a server in your basement and if you

00:01:23,369 --> 00:01:27,569
need more cloud resources you have to

00:01:25,259 --> 00:01:29,640
buy bigger server you have to move your

00:01:27,569 --> 00:01:32,369
service to this new server and store the

00:01:29,640 --> 00:01:35,220
old one this is called the vertical

00:01:32,369 --> 00:01:38,759
scaling and it's time-consuming and and

00:01:35,220 --> 00:01:41,160
it's cumbersome now the opposite of

00:01:38,759 --> 00:01:43,380
vertical scaling is or samples gaming

00:01:41,160 --> 00:01:46,020
it's instead of buying a bigger server

00:01:43,380 --> 00:01:48,720
you buy multiple often that's powerful

00:01:46,020 --> 00:01:51,390
servers instead of stacking or software

00:01:48,720 --> 00:01:54,869
and that your service can take the

00:01:51,390 --> 00:02:00,599
combined resources multi service and

00:01:54,869 --> 00:02:02,729
have that it's at its disposal now the

00:02:00,599 --> 00:02:04,470
cloud we don't care about machines

00:02:02,729 --> 00:02:06,509
anymore they're in a data center

00:02:04,470 --> 00:02:08,970
somewhere but we don't have to think

00:02:06,509 --> 00:02:13,200
about that instead of who these virtual

00:02:08,970 --> 00:02:15,150
servers and virtual services sort of

00:02:13,200 --> 00:02:17,250
like files you can copy them we can move

00:02:15,150 --> 00:02:17,920
them around they can execute on

00:02:17,250 --> 00:02:24,970
animation

00:02:17,920 --> 00:02:27,130
which they are not and if you need to if

00:02:24,970 --> 00:02:30,130
you need to scale the cloud we just you

00:02:27,130 --> 00:02:32,950
know copy this virtual machine so this

00:02:30,130 --> 00:02:36,700
is virtual server and the balance of the

00:02:32,950 --> 00:02:38,110
gamma see you get more resources but in

00:02:36,700 --> 00:02:41,500
order to manage all these virtual

00:02:38,110 --> 00:02:43,180
servers we we need we need a way to

00:02:41,500 --> 00:02:46,630
manage it and then we have cloud

00:02:43,180 --> 00:02:48,970
orchestration software cloud straight to

00:02:46,630 --> 00:02:51,270
supper does is they they decide on which

00:02:48,970 --> 00:02:53,970
machine to this virtual server executes

00:02:51,270 --> 00:02:57,070
and it also have a scaling or

00:02:53,970 --> 00:03:03,190
replicating these versus serves if you

00:02:57,070 --> 00:03:04,840
need more resources so some examples of

00:03:03,190 --> 00:03:08,230
cloud registrations after you have

00:03:04,840 --> 00:03:12,280
kubernetes by Google missiles by Apache

00:03:08,230 --> 00:03:13,989
or a docker swarm now these specific

00:03:12,280 --> 00:03:17,830
cloud registration software or

00:03:13,989 --> 00:03:20,470
calibration tools use containers and

00:03:17,830 --> 00:03:23,350
container sort of like a virtual machine

00:03:20,470 --> 00:03:28,380
Liquide virtual machine which your code

00:03:23,350 --> 00:03:37,390
is executed inside and the leading

00:03:28,380 --> 00:03:39,370
container technology is dr. so this is

00:03:37,390 --> 00:03:41,260
an IOT cloud platform which means you

00:03:39,370 --> 00:03:45,880
have devices communicating with your

00:03:41,260 --> 00:03:47,980
with your server or service now assuming

00:03:45,880 --> 00:03:52,840
that purely you are the guys creating

00:03:47,980 --> 00:03:55,390
these devices when they end up in your

00:03:52,840 --> 00:03:57,070
customers has you have no way of knowing

00:03:55,390 --> 00:04:02,890
if the data is flowing through secure

00:03:57,070 --> 00:04:06,010
networks or not and in order to protect

00:04:02,890 --> 00:04:09,180
that data from being captured or

00:04:06,010 --> 00:04:11,650
manipulated you should encrypt that link

00:04:09,180 --> 00:04:13,959
and specifically if you can use TLS

00:04:11,650 --> 00:04:16,750
that's what we used to encrypt

00:04:13,959 --> 00:04:18,789
communications websites and that's

00:04:16,750 --> 00:04:20,549
encrypt is a great service we can have

00:04:18,789 --> 00:04:23,759
we can get

00:04:20,549 --> 00:04:29,250
guess which your service will use to

00:04:23,759 --> 00:04:31,650
facilitate this encryption another big

00:04:29,250 --> 00:04:35,430
piece of your IOT cloud security

00:04:31,650 --> 00:04:37,169
solution is provisioning and

00:04:35,430 --> 00:04:38,699
provisioning is all about the base

00:04:37,169 --> 00:04:41,639
management is where you give your

00:04:38,699 --> 00:04:47,340
devices a unique identity and give it

00:04:41,639 --> 00:04:52,050
access to cloud resources so a common

00:04:47,340 --> 00:04:55,199
way right so this identities use two of

00:04:52,050 --> 00:04:57,539
them to keep of your service to normally

00:04:55,199 --> 00:04:59,909
use username and password but please

00:04:57,539 --> 00:05:02,909
don't use a pin admin as the username a

00:04:59,909 --> 00:05:04,680
password for you for all your devices in

00:05:02,909 --> 00:05:07,560
fact don't use the same username and

00:05:04,680 --> 00:05:09,150
password for the advices only one needs

00:05:07,560 --> 00:05:11,719
to be compromised in order to compromise

00:05:09,150 --> 00:05:13,770
your entire fleet

00:05:11,719 --> 00:05:16,199
instead the stronger form of

00:05:13,770 --> 00:05:18,930
authentication is TLS mutual

00:05:16,199 --> 00:05:21,300
authentication where each device gets a

00:05:18,930 --> 00:05:24,479
unique certificate which it presents to

00:05:21,300 --> 00:05:27,389
your service and you know it's is your

00:05:24,479 --> 00:05:31,380
device and not sound maybe King your

00:05:27,389 --> 00:05:35,039
glass so this takes care of application

00:05:31,380 --> 00:05:37,710
data partes authorization where you give

00:05:35,039 --> 00:05:39,960
access to specific resources there you

00:05:37,710 --> 00:05:41,870
can use something called a CL access

00:05:39,960 --> 00:05:43,080
control list which is basically a

00:05:41,870 --> 00:05:45,120
whitelist

00:05:43,080 --> 00:05:48,620
all the resources that this specific

00:05:45,120 --> 00:05:48,620
device can access

00:05:52,820 --> 00:05:59,010
the next nerve is collect so there are

00:05:57,360 --> 00:06:03,330
many reasons to create create a

00:05:59,010 --> 00:06:05,250
connective products but what high up on

00:06:03,330 --> 00:06:10,580
the list is the ability to centralize

00:06:05,250 --> 00:06:10,580
data collection for all your devices and

00:06:11,090 --> 00:06:15,450
when you have your data in one

00:06:13,320 --> 00:06:18,150
collection you can apply Big Data

00:06:15,450 --> 00:06:20,190
algorithms or you can feed this data to

00:06:18,150 --> 00:06:22,290
artificial artificial intelligence

00:06:20,190 --> 00:06:27,630
systems to detect normal and abnormal

00:06:22,290 --> 00:06:30,240
behavior but there are three things you

00:06:27,630 --> 00:06:32,270
need to consider assuming that you are

00:06:30,240 --> 00:06:35,850
in control of the devices and you can

00:06:32,270 --> 00:06:38,220
select stuff like protocols so first

00:06:35,850 --> 00:06:40,979
choice is which protocol are we going to

00:06:38,220 --> 00:06:45,030
use to connect our devices to our

00:06:40,979 --> 00:06:48,720
platform income amounts are MQTT coop or

00:06:45,030 --> 00:06:53,820
HTTP where MQTT and co-op are

00:06:48,720 --> 00:06:56,760
specifically made for embedded buses now

00:06:53,820 --> 00:06:59,550
you should figure out which protocol

00:06:56,760 --> 00:07:05,460
works for you the considered team secure

00:06:59,550 --> 00:07:11,430
verb there the protocol needs to support

00:07:05,460 --> 00:07:14,160
encryption the second choice is which

00:07:11,430 --> 00:07:18,150
server or am I gonna use to receive all

00:07:14,160 --> 00:07:20,400
that data and using MQTT as an example

00:07:18,150 --> 00:07:23,729
here because it's very popular for IOT

00:07:20,400 --> 00:07:28,139
devices you can use mosquito or an M q

00:07:23,729 --> 00:07:31,530
or e mq now consider the skinny keeper

00:07:28,139 --> 00:07:33,750
this is convert these servers have to

00:07:31,530 --> 00:07:37,710
scale horizontally a definite remains

00:07:33,750 --> 00:07:39,510
some sort of clustering functionality BM

00:07:37,710 --> 00:07:42,210
q and vernon q have clustering

00:07:39,510 --> 00:07:43,910
functionality built in this little bit

00:07:42,210 --> 00:07:48,150
harder with mosquito it gets better

00:07:43,910 --> 00:07:50,370
vertically and the third thing to

00:07:48,150 --> 00:07:54,180
consider is I'm not going to store all

00:07:50,370 --> 00:07:56,550
this data so the data you're going to

00:07:54,180 --> 00:07:57,340
get from your devices is probably some

00:07:56,550 --> 00:08:00,400
sort of sense of

00:07:57,340 --> 00:08:03,520
you together with a time staff that's

00:08:00,400 --> 00:08:06,460
called Travis there's data you can store

00:08:03,520 --> 00:08:09,430
taxers data in relational databases of

00:08:06,460 --> 00:08:12,310
Word files but you should probably use a

00:08:09,430 --> 00:08:15,370
database specifically made to handle

00:08:12,310 --> 00:08:18,580
track sales data for example in plus DB

00:08:15,370 --> 00:08:23,320
on time scale again consider the skin

00:08:18,580 --> 00:08:25,270
keyword your database should be able to

00:08:23,320 --> 00:08:29,139
scale horizontally using some sort of

00:08:25,270 --> 00:08:31,540
clustering or sharding technologies tags

00:08:29,139 --> 00:08:33,550
get us gastric built-in and influx VB

00:08:31,540 --> 00:08:40,570
can scale horizontally but is still a

00:08:33,550 --> 00:08:42,370
bit more tricky alright so in your cloud

00:08:40,570 --> 00:08:44,920
you can have all these components and

00:08:42,370 --> 00:08:49,210
you can have replicas of some components

00:08:44,920 --> 00:08:51,700
because a scale or something and if you

00:08:49,210 --> 00:08:58,990
have a monitoring solution that collects

00:08:51,700 --> 00:09:02,140
cloud metrics and like CPU load or

00:08:58,990 --> 00:09:07,120
traffic that's coming to your cloud you

00:09:02,140 --> 00:09:09,850
can avoid unexpected downtime by by

00:09:07,120 --> 00:09:13,810
detecting errors detecting failures

00:09:09,850 --> 00:09:16,089
earlier or abnormal behavior but

00:09:13,810 --> 00:09:19,450
effective monitoring solution also have

00:09:16,089 --> 00:09:21,959
a rules engine that will act on this

00:09:19,450 --> 00:09:25,660
data or not it's a for example if you

00:09:21,959 --> 00:09:27,700
that or if it detects a sudden spike in

00:09:25,660 --> 00:09:32,050
traffic it can send you a notification

00:09:27,700 --> 00:09:34,890
or it can automatically scan your club

00:09:32,050 --> 00:09:39,089
by letting your cloud education software

00:09:34,890 --> 00:09:42,400
know that it needs more resources

00:09:39,089 --> 00:09:45,400
prometheus is a great monitoring

00:09:42,400 --> 00:09:47,650
software as with support blog

00:09:45,400 --> 00:09:51,540
open-source components and you can use

00:09:47,650 --> 00:09:51,540
capacitor as the rules engine

00:09:53,900 --> 00:09:58,650
all right so you have you have your

00:09:56,850 --> 00:10:01,500
classes they can communicate with your

00:09:58,650 --> 00:10:06,410
cloud securely they can sound data you

00:10:01,500 --> 00:10:10,380
can store all that data now what

00:10:06,410 --> 00:10:14,580
well taxes data is great to visualize as

00:10:10,380 --> 00:10:16,230
graphs so in order to get a great

00:10:14,580 --> 00:10:18,720
overview of what's going on with your

00:10:16,230 --> 00:10:23,300
devices use the visualization tool that

00:10:18,720 --> 00:10:23,300
can show these graphs in in a dashboard

00:10:24,710 --> 00:10:31,680
and some tools to use as co-founder and

00:10:28,920 --> 00:10:40,530
director on graph or your famous or

00:10:31,680 --> 00:10:41,940
popular one back to your devices again

00:10:40,530 --> 00:10:44,630
I'm assuming you're in control of the

00:10:41,940 --> 00:10:47,070
device after your manufacturing device

00:10:44,630 --> 00:10:50,100
there's some time between your customers

00:10:47,070 --> 00:10:52,770
get some in your hand and during that

00:10:50,100 --> 00:10:55,020
time you might find a security hole or

00:10:52,770 --> 00:10:58,170
we find a bug or you won't have a

00:10:55,020 --> 00:11:01,170
feature to make sure you have it device

00:10:58,170 --> 00:11:02,970
contract great solution I'm not going to

00:11:01,170 --> 00:11:04,980
talk more about this because tomorrow at

00:11:02,970 --> 00:11:08,220
4 my colleague Musa is gonna go into

00:11:04,980 --> 00:11:12,530
depth on device firmware update here at

00:11:08,220 --> 00:11:12,530
4 o'clock don't miss that talk

00:11:13,280 --> 00:11:20,460
alright so no cloud platform is complete

00:11:17,730 --> 00:11:23,010
without customization the verbs have

00:11:20,460 --> 00:11:26,010
been talking about is there to support

00:11:23,010 --> 00:11:28,200
your platform but this is probably where

00:11:26,010 --> 00:11:32,010
you make the money unless it's a

00:11:28,200 --> 00:11:34,350
visualization link use it Petersburg so

00:11:32,010 --> 00:11:36,350
this is where you components to for

00:11:34,350 --> 00:11:39,090
example import data from other clouds

00:11:36,350 --> 00:11:43,140
where you can export data to another

00:11:39,090 --> 00:11:44,760
service or maybe have a web app that

00:11:43,140 --> 00:11:47,220
interface your customers with your class

00:11:44,760 --> 00:11:49,140
or that web app has some to the web

00:11:47,220 --> 00:11:53,220
service studying to face your database

00:11:49,140 --> 00:11:55,500
with your web application depending on

00:11:53,220 --> 00:11:58,170
the application you have you can have

00:11:55,500 --> 00:12:00,900
different types of data that you need to

00:11:58,170 --> 00:12:04,110
handle for example if you have this big

00:12:00,900 --> 00:12:05,490
data analytics component you probably

00:12:04,110 --> 00:12:08,250
can have large amounts of

00:12:05,490 --> 00:12:10,320
structured data they accuse databases

00:12:08,250 --> 00:12:13,620
like Cassandra our model DB to store

00:12:10,320 --> 00:12:15,720
that data or maybe an e-commerce

00:12:13,620 --> 00:12:18,270
solution where you have a registry of

00:12:15,720 --> 00:12:20,820
customers and you have list a products

00:12:18,270 --> 00:12:23,399
and prices and that's more relational

00:12:20,820 --> 00:12:27,060
data and infuse that lactose as well or

00:12:23,399 --> 00:12:30,810
my sequel to store a data or maybe you

00:12:27,060 --> 00:12:34,110
just have a bunch of individual values

00:12:30,810 --> 00:12:39,270
that he takes us quickly you can use a

00:12:34,110 --> 00:12:46,350
key value databases such as Redis again

00:12:39,270 --> 00:12:47,970
I'm considered as gatekeeper the the

00:12:46,350 --> 00:12:50,040
database needs to be able to scale

00:12:47,970 --> 00:12:52,890
horizontally using clustering or

00:12:50,040 --> 00:12:56,700
Charlotte technologies which all these

00:12:52,890 --> 00:12:59,850
components do post cases well can scale

00:12:56,700 --> 00:13:02,600
as a clustering to use a plug-in from

00:12:59,850 --> 00:13:02,600
status data

00:13:03,920 --> 00:13:12,570
all right this brings us to the file

00:13:06,240 --> 00:13:14,730
final work back up your customer and

00:13:12,570 --> 00:13:16,350
device data is the most valuable asset

00:13:14,730 --> 00:13:22,350
you have neutrality should make sure

00:13:16,350 --> 00:13:24,510
that you never lose them so they're it's

00:13:22,350 --> 00:13:26,640
it's hard to find a geminal backup

00:13:24,510 --> 00:13:31,560
solution because it depends my data is

00:13:26,640 --> 00:13:33,600
stored and how its distributed that your

00:13:31,560 --> 00:13:36,180
RIT cloud platforms probably can execute

00:13:33,600 --> 00:13:38,160
in some cloud provider and they have

00:13:36,180 --> 00:13:40,709
backup solutions you should figure out

00:13:38,160 --> 00:13:44,000
what those are properly use those they

00:13:40,709 --> 00:13:44,000
might be the best option for you

00:13:45,110 --> 00:13:51,450
all right so bringing it all together

00:13:48,020 --> 00:13:53,310
this is your IOT cloud platform on the

00:13:51,450 --> 00:13:56,070
left side you have devices generating

00:13:53,310 --> 00:13:58,500
data and just going to flow through your

00:13:56,070 --> 00:14:01,320
cloud what's being refined and then it's

00:13:58,500 --> 00:14:02,930
going to be consumed on the right side

00:14:01,320 --> 00:14:08,870
that's a sort of

00:14:02,930 --> 00:14:10,580
okay all right that's all you need

00:14:08,870 --> 00:14:13,490
now you know how to be alive to cloud

00:14:10,580 --> 00:14:17,270
platforms and I expect to see many more

00:14:13,490 --> 00:14:37,430
in the near future thank you very much

00:14:17,270 --> 00:14:41,140
that is all I had so the question is am

00:14:37,430 --> 00:14:41,140
I going to make the slides available yes

00:14:51,399 --> 00:14:55,820
well if we want to talk more about IOT

00:14:53,720 --> 00:14:59,680
cloud platforms that and the unstable

00:14:55,820 --> 00:14:59,680
today or tomorrow thank you very much

00:14:59,690 --> 00:15:05,169

YouTube URL: https://www.youtube.com/watch?v=C_LPXAFZS7Q


