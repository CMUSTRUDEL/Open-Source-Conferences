Title: The NextCloud VM - Daniel Hansson
Publication date: 2019-04-19
Playlist: foss-north 2019
Description: 
	The Nextcloud VM is a popular way to deploy your Nextcloud for the first time. The scripts make it easy for any sysadmin to deploy in almost any environment. It's made with simplicity in mind and is therefore also very popular amongst users that aren't familiar with Linux.
This talk will explain a little bit about the history behind the VM and how it's developed over time.

---

Daniel has been active in the Nextcloud community since the beginning and is the main developer of the Nextcloud VM. He founded both Tech and Me, and T&M Hansson IT AB.
You can find out more about the NextCloud VM here: https://hanssonit.se/nextcloud-vm, and here: https://github.com/nextcloud/vm.

https://foss-north.se/2019/speakers-and-talks.html#dhansson
Captions: 
	00:00:16,209 --> 00:00:21,669
hello everyone

00:00:18,550 --> 00:00:24,929
about the next RBM my name is Daniel and

00:00:21,669 --> 00:00:28,329
I'm the developer of the next rpm and

00:00:24,929 --> 00:00:31,390
today's talk will be a little bit about

00:00:28,329 --> 00:00:34,480
the history behind the VM why I decided

00:00:31,390 --> 00:00:37,480
to make the BM from the beginning also

00:00:34,480 --> 00:00:40,629
the present state of the VM and the

00:00:37,480 --> 00:00:40,989
future what I think will happen in the

00:00:40,629 --> 00:00:46,149
future

00:00:40,989 --> 00:00:50,920
and also a little bit about Who am I so

00:00:46,149 --> 00:00:54,609
I came from Windows and Dropbox back in

00:00:50,920 --> 00:01:01,769
2013 I didn't know anything about Linux

00:00:54,609 --> 00:01:05,979
I mean sudo what was that I I decided to

00:01:01,769 --> 00:01:08,140
I mean privacy and integrity have always

00:01:05,979 --> 00:01:13,030
been like questions that are important

00:01:08,140 --> 00:01:15,640
for me and I mean using Dropbox to store

00:01:13,030 --> 00:01:16,420
all your files all your personal photos

00:01:15,640 --> 00:01:19,539
and everything like that

00:01:16,420 --> 00:01:23,709
in one single place I felt kind of like

00:01:19,539 --> 00:01:26,950
insecure so I started to look around for

00:01:23,709 --> 00:01:31,200
options and I found own cloud back then

00:01:26,950 --> 00:01:34,929
because next door was founded in 2016

00:01:31,200 --> 00:01:36,700
and yeah I didn't have any Linux skills

00:01:34,929 --> 00:01:40,090
and I try to install it and it was

00:01:36,700 --> 00:01:42,429
pretty hard I mean patchy and you needed

00:01:40,090 --> 00:01:45,340
a server and you needed like bunch of

00:01:42,429 --> 00:01:48,910
stuff that I didn't have any clue about

00:01:45,340 --> 00:01:52,239
at all and so in the beginning I was

00:01:48,910 --> 00:01:55,830
mostly like reporting bugs to the server

00:01:52,239 --> 00:02:02,310
repository of own cloud and I got help

00:01:55,830 --> 00:02:06,910
installing and my first uncap server and

00:02:02,310 --> 00:02:08,739
yeah here's me sitting with three

00:02:06,910 --> 00:02:12,849
computers like trying to figure out how

00:02:08,739 --> 00:02:14,739
everything worked back in 2013 so I

00:02:12,849 --> 00:02:17,140
reached reinstall the server probably

00:02:14,739 --> 00:02:19,000
like 25 times or even more than that and

00:02:17,140 --> 00:02:20,920
if you accumulate all the time I spent

00:02:19,000 --> 00:02:21,580
on Google it's probably like six months

00:02:20,920 --> 00:02:24,819
or something like that

00:02:21,580 --> 00:02:27,490
I mean awake from like you know when I

00:02:24,819 --> 00:02:31,450
quit my work until early in the morning

00:02:27,490 --> 00:02:32,480
and so I start the scripts the

00:02:31,450 --> 00:02:35,510
installation I said

00:02:32,480 --> 00:02:37,940
to get the same result all the time and

00:02:35,510 --> 00:02:40,849
I started to do that in 2014 because I

00:02:37,940 --> 00:02:43,430
noticed there there was a need for it I

00:02:40,849 --> 00:02:45,650
mean there were more people like me that

00:02:43,430 --> 00:02:49,970
wanted to install their own cloud but

00:02:45,650 --> 00:02:52,400
they didn't know how to do it so the

00:02:49,970 --> 00:02:55,550
first VM that I made was based on around

00:02:52,400 --> 00:02:58,610
10 scripts very easy like you have to

00:02:55,550 --> 00:03:04,220
get to install and stuff like that and

00:02:58,610 --> 00:03:08,750
around 300 lines of bash code my first

00:03:04,220 --> 00:03:10,190
public vm i presented in our released in

00:03:08,750 --> 00:03:13,840
different forums or stuff I didn't have

00:03:10,190 --> 00:03:17,900
a web page back then and it got popular

00:03:13,840 --> 00:03:20,180
pretty quickly and I got more server

00:03:17,900 --> 00:03:25,459
resources because I was running this out

00:03:20,180 --> 00:03:28,580
of my old HTTP C so I need a new server

00:03:25,459 --> 00:03:30,260
and yeah like I said apparently I wasn't

00:03:28,580 --> 00:03:32,360
the only one with installing issues

00:03:30,260 --> 00:03:34,850
installing because I mean I got several

00:03:32,360 --> 00:03:37,820
downloads per day and and I also noticed

00:03:34,850 --> 00:03:41,390
after after some time that yeah it got

00:03:37,820 --> 00:03:44,090
more popular so I attended the own cloud

00:03:41,390 --> 00:03:47,390
conference back in 2015 where I

00:03:44,090 --> 00:03:51,410
presented the VM and yeah I got good

00:03:47,390 --> 00:03:55,340
response I mean one of the developers of

00:03:51,410 --> 00:03:57,470
own cloud posted this tweet that it was

00:03:55,340 --> 00:04:00,079
one of the most important thing that

00:03:57,470 --> 00:04:01,130
happened to own cloud that year that you

00:04:00,079 --> 00:04:04,760
could yeah

00:04:01,130 --> 00:04:07,120
just download the own cloud VM and then

00:04:04,760 --> 00:04:12,109
you had your own server

00:04:07,120 --> 00:04:15,769
so I published yeah time went and and as

00:04:12,109 --> 00:04:19,130
you may know next word was a longer was

00:04:15,769 --> 00:04:23,890
forked by its own inventor Frank call to

00:04:19,130 --> 00:04:28,100
check and yeah he created next route and

00:04:23,890 --> 00:04:29,960
they asked me if I wanted to do their

00:04:28,100 --> 00:04:36,020
their virtual machine which I said yes

00:04:29,960 --> 00:04:40,610
to so in 2016 are published all my bash

00:04:36,020 --> 00:04:45,340
codes or my bash yeah there are roads in

00:04:40,610 --> 00:04:47,600
their own index jobs repository

00:04:45,340 --> 00:04:51,139
over the time I made different versions

00:04:47,600 --> 00:04:53,600
of the VM the free and standard version

00:04:51,139 --> 00:04:55,820
is 40 gigabytes then you have different

00:04:53,600 --> 00:04:57,949
options as well like you can download a

00:04:55,820 --> 00:05:00,889
500 gigabyte version you can download a

00:04:57,949 --> 00:05:04,330
1 terabyte version and two terabyte

00:05:00,889 --> 00:05:04,330
version and also for for hyper-v

00:05:04,509 --> 00:05:11,330
which you can find in the shop the

00:05:07,940 --> 00:05:16,280
present state of the VM is that it helps

00:05:11,330 --> 00:05:22,250
you do a full installation you can yeah

00:05:16,280 --> 00:05:26,150
next route is not only like a Dropbox or

00:05:22,250 --> 00:05:28,840
not only a cloud you can also do some

00:05:26,150 --> 00:05:33,160
online editing if you want to you can

00:05:28,840 --> 00:05:37,460
use yeah elasticsearch for all the files

00:05:33,160 --> 00:05:40,180
you can you have contacts you have

00:05:37,460 --> 00:05:43,759
calendar you have like everything I

00:05:40,180 --> 00:05:44,900
would compare it to maybe like Google

00:05:43,759 --> 00:05:46,849
Apps or something like that where you

00:05:44,900 --> 00:05:49,699
have everything in one place so it's

00:05:46,849 --> 00:05:52,250
it's rather rather than like just a

00:05:49,699 --> 00:05:54,949
cloud service its ecosystem of apps

00:05:52,250 --> 00:05:58,220
together and that makes it complete I

00:05:54,949 --> 00:06:01,010
would say so this is some of the apps

00:05:58,220 --> 00:06:04,780
that you can install with the scripts

00:06:01,010 --> 00:06:07,970
and that are included in the VM as well

00:06:04,780 --> 00:06:10,849
the full list is available on on github

00:06:07,970 --> 00:06:14,060
so it's easy to deploy and and the whole

00:06:10,849 --> 00:06:15,919
thoughts about the VM was to to make it

00:06:14,060 --> 00:06:20,750
possible and to make it easy for people

00:06:15,919 --> 00:06:23,060
to install next-gen themselves I mean my

00:06:20,750 --> 00:06:25,220
target audience is people coming from

00:06:23,060 --> 00:06:28,760
windows that doesn't have a clue like I

00:06:25,220 --> 00:06:33,229
didn't have a clue back in 2013 on how

00:06:28,760 --> 00:06:36,789
to install a Linux server with this it's

00:06:33,229 --> 00:06:39,470
possible to just download Adobe OVA file

00:06:36,789 --> 00:06:41,930
run the initial script and voila you

00:06:39,470 --> 00:06:45,139
have your own server prepared with with

00:06:41,930 --> 00:06:48,770
SSL and and all the different security

00:06:45,139 --> 00:06:50,960
measures as well so that's one option

00:06:48,770 --> 00:06:53,770
you can download away you can also go to

00:06:50,960 --> 00:06:57,050
github and run the scripts for yourself

00:06:53,770 --> 00:06:58,490
the only thing you need is a server like

00:06:57,050 --> 00:07:01,550
a bare-bones server

00:06:58,490 --> 00:07:06,009
or a virtual machine which runs a bunch

00:07:01,550 --> 00:07:09,289
oh I chose the bun - because I want this

00:07:06,009 --> 00:07:12,860
distribution that I am most familiar

00:07:09,289 --> 00:07:15,460
with since I started out with that so

00:07:12,860 --> 00:07:20,330
and it's also tested on being aware

00:07:15,460 --> 00:07:24,789
VirtualBox hyper-v and also KVM so it

00:07:20,330 --> 00:07:27,349
works on those hypervisors small texture

00:07:24,789 --> 00:07:30,889
but it's based on a bunch of servers I

00:07:27,349 --> 00:07:33,590
said before mostly because I mean if you

00:07:30,889 --> 00:07:37,280
want to learn Linux my opinion is that

00:07:33,590 --> 00:07:39,409
bond to connect contains like yeah it's

00:07:37,280 --> 00:07:41,810
easy to learn event I would say and

00:07:39,409 --> 00:07:44,090
there's a lot of like if you google you

00:07:41,810 --> 00:07:47,120
can find a lot of information about went

00:07:44,090 --> 00:07:50,000
online so I chose that rather than

00:07:47,120 --> 00:07:52,880
choosing a smaller distro because it's

00:07:50,000 --> 00:07:55,250
easier for newcomers to to learn Linux

00:07:52,880 --> 00:07:58,669
which also is like one of the goals with

00:07:55,250 --> 00:08:01,150
the VM to make people more interested in

00:07:58,669 --> 00:08:06,440
Linux and to learn Linux as well

00:08:01,150 --> 00:08:10,190
it runs on Apache PHP fpm PHP 7.2

00:08:06,440 --> 00:08:13,909
Postgres released memcache and I also

00:08:10,190 --> 00:08:17,539
use Salafist for the data store so the

00:08:13,909 --> 00:08:20,960
the main OS is on a disk which is on x4

00:08:17,539 --> 00:08:24,940
and then you have set FS for a data

00:08:20,960 --> 00:08:28,550
store because of multiple reasons I mean

00:08:24,940 --> 00:08:31,310
yeah I think it's safer or better CEO to

00:08:28,550 --> 00:08:33,020
run Salafist for data you also have

00:08:31,310 --> 00:08:36,229
snapshot capabilities and stuff like

00:08:33,020 --> 00:08:40,130
that with CFS which you don't have with

00:08:36,229 --> 00:08:42,560
x4s for if I know anyway let's equip

00:08:40,130 --> 00:08:44,589
it's also included and I would say it's

00:08:42,560 --> 00:08:46,820
a full-blown production environments

00:08:44,589 --> 00:08:49,880
several companies around the world use

00:08:46,820 --> 00:08:51,740
it today on from github it's been

00:08:49,880 --> 00:08:54,560
downloaded like 30,000 times or

00:08:51,740 --> 00:08:56,720
something like that I don't I don't keep

00:08:54,560 --> 00:08:59,600
track of how many times it's been

00:08:56,720 --> 00:09:03,920
ordered for my own site but several

00:08:59,600 --> 00:09:06,230
thousands anyway so the future I will

00:09:03,920 --> 00:09:09,320
keep maintaining it of course I mean

00:09:06,230 --> 00:09:11,440
that's what I do I will try to improve

00:09:09,320 --> 00:09:14,530
and add new features

00:09:11,440 --> 00:09:17,530
I'm mostly myself doing this so I don't

00:09:14,530 --> 00:09:20,230
have any and you want to help me so yes

00:09:17,530 --> 00:09:25,000
as much as time allows I will try to

00:09:20,230 --> 00:09:27,300
like make it better I also want to make

00:09:25,000 --> 00:09:31,960
the build process easier right now I do

00:09:27,300 --> 00:09:33,790
every release manually so I like I have

00:09:31,960 --> 00:09:35,350
a base VM and then I do all the

00:09:33,790 --> 00:09:39,670
different versions which takes forever

00:09:35,350 --> 00:09:42,010
so it would be nice if someone here or

00:09:39,670 --> 00:09:44,230
yeah so would would be able to help me

00:09:42,010 --> 00:09:46,630
with that because I'm not so good in in

00:09:44,230 --> 00:09:50,790
vagrants so you're welcome to help me

00:09:46,630 --> 00:09:53,590
and also maybe I will do some more

00:09:50,790 --> 00:10:00,850
collaboration with some heavier Bosch

00:09:53,590 --> 00:10:03,850
projects in next cloud as well and Who

00:10:00,850 --> 00:10:09,280
am I so I'm always root at localhost of

00:10:03,850 --> 00:10:11,190
course I run a company which is T and T

00:10:09,280 --> 00:10:14,620
ni Mountain EIT

00:10:11,190 --> 00:10:17,770
where from where I like to give support

00:10:14,620 --> 00:10:20,710
around the neck the next shot VM I also

00:10:17,770 --> 00:10:23,980
help people like installing necks out

00:10:20,710 --> 00:10:27,700
and yeah stuff like that I've been a

00:10:23,980 --> 00:10:33,060
community member since 2013 in on

00:10:27,700 --> 00:10:35,440
Sheldon and in next well since 2016 and

00:10:33,060 --> 00:10:39,280
from my full time work I work as a

00:10:35,440 --> 00:10:47,890
sysadmin in magma so that was my speech

00:10:39,280 --> 00:10:49,750
I hope you liked it or like do you

00:10:47,890 --> 00:10:59,470
wonder anything about the next and next

00:10:49,750 --> 00:11:00,850
one in general yeah I was wondering is

00:10:59,470 --> 00:11:04,839
since you talking about vagrant more

00:11:00,850 --> 00:11:07,540
what have you also looked at me see you

00:11:04,839 --> 00:11:09,339
said about looking at vagrant like yeah

00:11:07,540 --> 00:11:11,770
yeah have you also looked at something

00:11:09,339 --> 00:11:13,240
like terraform that can you also do like

00:11:11,770 --> 00:11:15,490
your orchestration based on bare metal

00:11:13,240 --> 00:11:19,780
hardware as well no I didn't even know

00:11:15,490 --> 00:11:21,280
that that existed so no I haven't but

00:11:19,780 --> 00:11:23,550
you're welcome very welcome to help me

00:11:21,280 --> 00:11:29,770
if you want

00:11:23,550 --> 00:11:31,210
any more questions is there anyone here

00:11:29,770 --> 00:11:36,480
that doesn't know what next for this by

00:11:31,210 --> 00:11:36,480
the way I mean okay so everyone knows

00:11:42,600 --> 00:11:49,210
IIIi don't have any written test for it

00:11:45,600 --> 00:11:51,490
but I mean since I've been doing all the

00:11:49,210 --> 00:11:54,280
lines and like everything you know

00:11:51,490 --> 00:11:56,380
there'll be em inside out and I I like

00:11:54,280 --> 00:11:59,140
test different scenarios like for

00:11:56,380 --> 00:12:00,550
instance if the network is down what

00:11:59,140 --> 00:12:02,620
happens then you know bash is very

00:12:00,550 --> 00:12:04,840
simple you know you tell the computer

00:12:02,620 --> 00:12:07,330
what what to do when it does exactly

00:12:04,840 --> 00:12:09,490
that so all the tester I do I do myself

00:12:07,330 --> 00:12:14,050
which also takes a lot of time actually

00:12:09,490 --> 00:12:16,060
yeah so I would like to thank you and

00:12:14,050 --> 00:12:22,290
actually open up for the next speaker

00:12:16,060 --> 00:12:26,080
okay thank you very much

00:12:22,290 --> 00:12:26,080
[Applause]

00:12:33,560 --> 00:12:35,620

YouTube URL: https://www.youtube.com/watch?v=KNXNXMItD2Q


