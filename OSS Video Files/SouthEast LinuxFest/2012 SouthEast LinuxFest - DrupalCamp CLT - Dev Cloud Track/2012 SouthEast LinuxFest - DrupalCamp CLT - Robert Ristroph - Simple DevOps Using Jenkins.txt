Title: 2012 SouthEast LinuxFest - DrupalCamp CLT - Robert Ristroph - Simple DevOps Using Jenkins
Publication date: 2014-06-30
Playlist: 2012 SouthEast LinuxFest - DrupalCamp CLT - Dev Cloud Track
Description: 
	2012 SouthEast LinuxFest
DrupalCamp Charlotte

Robert Ristroph - Simple DevOps Using Jenkins
Captions: 
	00:00:00,000 --> 00:00:05,279
the following presentation was recorded

00:00:02,490 --> 00:00:08,040
the 2012 southeast linux fest in

00:00:05,279 --> 00:00:10,410
charlotte north carolina it is licensed

00:00:08,040 --> 00:00:12,090
under a creative commons license for

00:00:10,410 --> 00:00:16,859
more information about the southeast

00:00:12,090 --> 00:00:19,230
linux fest visit www.lend expense org

00:00:16,859 --> 00:00:21,320
the southeast linux fest would like to

00:00:19,230 --> 00:00:23,449
thank the following diamond sponsors in

00:00:21,320 --> 00:00:28,189
2012 for helping make these videos

00:00:23,449 --> 00:00:32,219
possible introduction will be required

00:00:28,189 --> 00:00:34,559
just the only note about here i if you

00:00:32,219 --> 00:00:36,690
go to drupalcamp charlotte calm and go

00:00:34,559 --> 00:00:40,680
to the sessions i've already posted

00:00:36,690 --> 00:00:43,050
these slides on there there's also i

00:00:40,680 --> 00:00:45,149
made a zip file of the jenkins jobs that

00:00:43,050 --> 00:00:49,500
that I demo and and that's linked to

00:00:45,149 --> 00:00:53,579
from there too so gives you a quick get

00:00:49,500 --> 00:00:56,570
started if you want to and with that

00:00:53,579 --> 00:00:56,570
musical introduction

00:01:00,500 --> 00:01:06,000
some I'm going to kind of shoot through

00:01:02,960 --> 00:01:08,460
some some kind of side slides that

00:01:06,000 --> 00:01:11,400
probably cover a lot of buzz words most

00:01:08,460 --> 00:01:13,500
of you have heard before how many how

00:01:11,400 --> 00:01:15,270
many people here like know what the term

00:01:13,500 --> 00:01:24,090
DevOps means and know what Jenkins is

00:01:15,270 --> 00:01:26,550
just kind of in a basic way okay um all

00:01:24,090 --> 00:01:28,680
right so most of this presentation is

00:01:26,550 --> 00:01:32,130
its kind of hands-on and like going

00:01:28,680 --> 00:01:33,420
through the Jenkins UI and and and kind

00:01:32,130 --> 00:01:34,800
of saying oh you can do this you can do

00:01:33,420 --> 00:01:36,479
that so I'm just going to I'm going to

00:01:34,800 --> 00:01:38,790
go through these initial introduction

00:01:36,479 --> 00:01:40,410
slides kind of fast cuz I think most of

00:01:38,790 --> 00:01:43,979
them are just background stuff that

00:01:40,410 --> 00:01:46,860
people know DevOps was sort of this

00:01:43,979 --> 00:01:52,200
buzzword movement type thing it started

00:01:46,860 --> 00:01:55,140
out as a reaction to a sort of big

00:01:52,200 --> 00:01:57,330
overly bureaucratic shops where the

00:01:55,140 --> 00:01:58,470
operations team that ran the website and

00:01:57,330 --> 00:02:00,149
the development team that wrote it were

00:01:58,470 --> 00:02:01,800
very separate and there was this you

00:02:00,149 --> 00:02:04,680
know sort of official handoff process

00:02:01,800 --> 00:02:07,680
and bug fixing going back and forth took

00:02:04,680 --> 00:02:10,709
had a round-trip time of a long time and

00:02:07,680 --> 00:02:14,370
so on and it came from development

00:02:10,709 --> 00:02:15,870
operations merged together and the idea

00:02:14,370 --> 00:02:18,299
was it had a lot of ideas like

00:02:15,870 --> 00:02:19,890
continuous integration sophisticated use

00:02:18,299 --> 00:02:25,140
of version control and stuff like that

00:02:19,890 --> 00:02:27,920
but essentially it it kind of stood for

00:02:25,140 --> 00:02:29,850
this let's cut the nonsense and just

00:02:27,920 --> 00:02:33,450
automate as much as possible and get

00:02:29,850 --> 00:02:36,660
stuff done right and then it's sort of a

00:02:33,450 --> 00:02:38,430
mob become associated I think with

00:02:36,660 --> 00:02:41,100
places that have a lot of overhead to

00:02:38,430 --> 00:02:42,480
burn because people associated you know

00:02:41,100 --> 00:02:45,269
maybe with Twitter and Facebook and

00:02:42,480 --> 00:02:47,660
things like that and so a lot of

00:02:45,269 --> 00:02:50,700
individual developers whatever are

00:02:47,660 --> 00:02:51,959
freelancers you know so on tend to

00:02:50,700 --> 00:02:53,579
dismiss it thinking like that's

00:02:51,959 --> 00:02:55,590
something I need a whole team for

00:02:53,579 --> 00:02:58,130
something like that even though it kind

00:02:55,590 --> 00:03:03,329
of started out with exactly the opposite

00:02:58,130 --> 00:03:05,100
things and my my goal here is to I main

00:03:03,329 --> 00:03:08,220
goal of this just to show you how you as

00:03:05,100 --> 00:03:11,970
one person without a team just as a as a

00:03:08,220 --> 00:03:13,810
web developer can use this use this tool

00:03:11,970 --> 00:03:15,610
to make your life a lot better

00:03:13,810 --> 00:03:17,770
and probably get a payoff within a week

00:03:15,610 --> 00:03:20,709
like it may take you a couple hours to

00:03:17,770 --> 00:03:22,450
set it up and within somewhere for a

00:03:20,709 --> 00:03:27,160
week from a month you will easily save

00:03:22,450 --> 00:03:30,640
more than a couple hours so just some

00:03:27,160 --> 00:03:33,840
background on this particular tool as a

00:03:30,640 --> 00:03:37,450
website jika and cio are c is for

00:03:33,840 --> 00:03:40,120
continuous integration it's a java

00:03:37,450 --> 00:03:42,010
server that runs so you know it's

00:03:40,120 --> 00:03:44,230
essential technology behind it as a war

00:03:42,010 --> 00:03:48,069
file that starts up and listens on a

00:03:44,230 --> 00:03:50,140
port one of its keys is there's a huge

00:03:48,069 --> 00:03:52,120
variety of plugins that kind of go into

00:03:50,140 --> 00:03:55,150
it in some ways jenkins is sort of like

00:03:52,120 --> 00:03:57,940
the drupal of the sphere in that just as

00:03:55,150 --> 00:03:59,890
drupal has the terrifying array of

00:03:57,940 --> 00:04:03,130
modules Jenkins has a ton of stuff too

00:03:59,890 --> 00:04:04,750
and we'll scroll through the list and it

00:04:03,130 --> 00:04:09,910
has a pretty good and supportive

00:04:04,750 --> 00:04:13,150
community it's open source it's I'm not

00:04:09,910 --> 00:04:15,160
sure it's the best option for every for

00:04:13,150 --> 00:04:17,019
every situation there are kind of

00:04:15,160 --> 00:04:21,930
competitors into it but it's sort of the

00:04:17,019 --> 00:04:23,890
standard one right it's the default one

00:04:21,930 --> 00:04:24,850
you know if you're getting started

00:04:23,890 --> 00:04:28,060
you're probably not doing anything too

00:04:24,850 --> 00:04:32,380
strange and it will almost surely do the

00:04:28,060 --> 00:04:34,750
kind of stuff you need the way the way

00:04:32,380 --> 00:04:38,229
usually runs is there's that one master

00:04:34,750 --> 00:04:40,600
server the Java server that runs and

00:04:38,229 --> 00:04:43,680
then users interact with it through a

00:04:40,600 --> 00:04:46,870
web interface Jenkins in a lot of ways

00:04:43,680 --> 00:04:47,830
evolved kind of following I think I

00:04:46,870 --> 00:04:50,530
think in some ways it kind of follows

00:04:47,830 --> 00:04:53,440
the path of how Drupal evolved as it

00:04:50,530 --> 00:04:55,360
became more serious people said we need

00:04:53,440 --> 00:04:58,870
a command-line tool and the Jenkins

00:04:55,360 --> 00:05:00,639
equivalent of drush appeared which i

00:04:58,870 --> 00:05:02,260
think is common on tools like once they

00:05:00,639 --> 00:05:04,530
reach a certain level of complexity it's

00:05:02,260 --> 00:05:07,030
kind of interesting observation of eight

00:05:04,530 --> 00:05:08,919
nodes and jenkins aren't like nodes in

00:05:07,030 --> 00:05:11,110
drupal they are computers that run

00:05:08,919 --> 00:05:13,570
something and so they're generally

00:05:11,110 --> 00:05:15,310
referred to as workers and this master

00:05:13,570 --> 00:05:16,780
jenkins can reach out to them and tell

00:05:15,310 --> 00:05:20,650
them to do something and run something

00:05:16,780 --> 00:05:21,669
on them and the way we're going to we're

00:05:20,650 --> 00:05:23,260
going to mess around setting you up we

00:05:21,669 --> 00:05:25,090
have the master and it's going to run

00:05:23,260 --> 00:05:26,020
stuff on itself and

00:05:25,090 --> 00:05:28,150
we're not going to try to figure out

00:05:26,020 --> 00:05:31,210
talking to different workers or so on

00:05:28,150 --> 00:05:33,729
because it's a more than you can kind of

00:05:31,210 --> 00:05:35,260
cover with an hour it's also one of the

00:05:33,729 --> 00:05:37,510
irritating parts of Jenkins because you

00:05:35,260 --> 00:05:38,889
got a copy private SSH keys back and

00:05:37,510 --> 00:05:44,169
forth there are private ones the public

00:05:38,889 --> 00:05:45,520
ones and do stuff like that and so the

00:05:44,169 --> 00:05:47,350
things that actually run are going to is

00:05:45,520 --> 00:05:49,030
jobs sometimes people refer to them as

00:05:47,350 --> 00:05:50,530
tasks but sort of the official

00:05:49,030 --> 00:05:53,800
nomenclature is jobs that are run on

00:05:50,530 --> 00:05:55,750
workers / nodes they use those words

00:05:53,800 --> 00:05:58,720
entertained interchangeably and the

00:05:55,750 --> 00:06:00,400
results are called builds and this comes

00:05:58,720 --> 00:06:02,620
about because Jenkins was originally

00:06:00,400 --> 00:06:04,750
made to build complex pieces of software

00:06:02,620 --> 00:06:06,940
where all the different chunks had to be

00:06:04,750 --> 00:06:09,610
compiled and the only way to get it done

00:06:06,940 --> 00:06:11,200
fast enough to have any reasonable turn

00:06:09,610 --> 00:06:13,330
around for testing and so on was to

00:06:11,200 --> 00:06:16,990
build all the chunks in here in massive

00:06:13,330 --> 00:06:19,870
parallel and so a lot of this

00:06:16,990 --> 00:06:21,310
terminology comes from thinking that

00:06:19,870 --> 00:06:23,199
you're taking a big software project

00:06:21,310 --> 00:06:25,570
you're putting like one library one

00:06:23,199 --> 00:06:27,789
component across 50 different workers

00:06:25,570 --> 00:06:29,590
you're compiling them you're getting

00:06:27,789 --> 00:06:31,090
builds from those which is then

00:06:29,590 --> 00:06:35,110
aggregated by another process that

00:06:31,090 --> 00:06:39,180
produces like the final build and so

00:06:35,110 --> 00:06:39,180
that just explains a bit of the yes

00:06:46,569 --> 00:06:52,819
yes that is that is a great question we

00:06:50,419 --> 00:06:54,349
won't get into that in what I do here

00:06:52,819 --> 00:06:57,529
but it's the first thing you'll run into

00:06:54,349 --> 00:06:59,269
when you set it up so the question is is

00:06:57,529 --> 00:07:01,489
there any piece of Jenkins that is

00:06:59,269 --> 00:07:06,019
required to run on the workers as

00:07:01,489 --> 00:07:09,279
opposed to the the master server and yes

00:07:06,019 --> 00:07:11,479
so there is a user and it has a

00:07:09,279 --> 00:07:13,699
essentially kind of a restricted shell

00:07:11,479 --> 00:07:16,339
so to speak and that's actually written

00:07:13,699 --> 00:07:18,019
in Java so there is this chunk of thing

00:07:16,339 --> 00:07:21,469
that you put on the worker that's in

00:07:18,019 --> 00:07:24,110
java and ssh is but it's an ssh

00:07:21,469 --> 00:07:26,419
connection to it and then it runs things

00:07:24,110 --> 00:07:29,289
and aggregates up log files and so on

00:07:26,419 --> 00:07:31,999
and shoves them back to the master

00:07:29,289 --> 00:07:34,550
sometimes you can fake it without it

00:07:31,999 --> 00:07:36,829
because in a Jenkins job that runs on

00:07:34,550 --> 00:07:39,649
the master you can just put a command

00:07:36,829 --> 00:07:42,379
and that does SSH with a particular key

00:07:39,649 --> 00:07:44,839
and then you know I think it's dicey and

00:07:42,379 --> 00:07:47,869
like execute some command right and so

00:07:44,839 --> 00:07:52,719
you can kind of in this rahway just run

00:07:47,869 --> 00:07:52,719
a command on another server right and

00:07:53,079 --> 00:07:58,099
that that's a lot more common you would

00:07:55,219 --> 00:07:59,629
think if you have a lot of small servers

00:07:58,099 --> 00:08:01,639
that are running very small tiny things

00:07:59,629 --> 00:08:04,579
like name servers or something like that

00:08:01,639 --> 00:08:06,769
a lot of times adding the Jenkins worker

00:08:04,579 --> 00:08:08,860
stuff to it is is annoying because then

00:08:06,769 --> 00:08:11,179
you have to resize that instance up from

00:08:08,860 --> 00:08:16,699
256 or whatever if you're running really

00:08:11,179 --> 00:08:17,869
small stuff that was a good question ok

00:08:16,699 --> 00:08:21,669
so I think what I'm going to do right

00:08:17,869 --> 00:08:21,669
now is yes

00:08:30,970 --> 00:08:38,240
they are machines in the sense that you

00:08:34,190 --> 00:08:40,279
can you can ssh into them right so what

00:08:38,240 --> 00:08:43,310
kind of defines them as a worker inside

00:08:40,279 --> 00:08:45,200
Jenkins is is the fact that you can ssh

00:08:43,310 --> 00:08:47,600
to them so that the question is what are

00:08:45,200 --> 00:08:50,050
the workers are they machines or they

00:08:47,600 --> 00:08:54,200
bare metal are they virtual and and

00:08:50,050 --> 00:08:56,690
inside the Jenkins nomenclature a worker

00:08:54,200 --> 00:08:58,820
is essentially a place that you can ssh

00:08:56,690 --> 00:09:00,709
to to run something so it could be

00:08:58,820 --> 00:09:02,510
anything and you could even give your

00:09:00,709 --> 00:09:04,970
own master several names as different

00:09:02,510 --> 00:09:06,860
workers and then when you when you make

00:09:04,970 --> 00:09:08,800
a job you can tag it as saying hey this

00:09:06,860 --> 00:09:11,450
is going to run only on this worker and

00:09:08,800 --> 00:09:12,860
so you might even tag of ticular machine

00:09:11,450 --> 00:09:14,540
with several different workers just that

00:09:12,860 --> 00:09:22,700
later you can split it apart easily or

00:09:14,540 --> 00:09:24,230
something like that um this is going to

00:09:22,700 --> 00:09:29,209
be a little bit of the tricky part let

00:09:24,230 --> 00:09:35,839
me see if I can increase my font size

00:09:29,209 --> 00:09:42,910
and so on and well let me first scape

00:09:35,839 --> 00:09:42,910
out of that oh it's for the recording so

00:10:02,910 --> 00:10:13,380
okay so let's see I think I have some

00:10:09,330 --> 00:10:15,120
stuff in the history here the first

00:10:13,380 --> 00:10:17,280
command I'm going to run is just apt-get

00:10:15,120 --> 00:10:18,330
remove / jenkins the reason why i'm

00:10:17,280 --> 00:10:19,770
going to remove that is because i want

00:10:18,330 --> 00:10:25,560
to kind of show you i'm really starting

00:10:19,770 --> 00:10:27,330
from scratch and the dash purge in you

00:10:25,560 --> 00:10:29,070
know debian ubuntu linux or whatever

00:10:27,330 --> 00:10:30,840
means also remove all the config files

00:10:29,070 --> 00:10:45,090
so we're going to really be starting

00:10:30,840 --> 00:10:46,710
from scratch and if you were installing

00:10:45,090 --> 00:10:48,540
this on a mac or windows or whatever

00:10:46,710 --> 00:10:52,110
there is an appropriate installer from

00:10:48,540 --> 00:10:53,760
the jenkins install page and and they're

00:10:52,110 --> 00:11:00,320
they're pretty good it's free software

00:10:53,760 --> 00:11:03,260
installers go yeah so I think in here

00:11:00,320 --> 00:11:05,580
there's the apt get install Jenkins

00:11:03,260 --> 00:11:11,070
which should run pretty quick because it

00:11:05,580 --> 00:11:14,520
the actual download should be installed

00:11:11,070 --> 00:11:18,650
you notice it starts it up and adds it

00:11:14,520 --> 00:11:18,650
and at this point

00:11:30,000 --> 00:11:35,190
so I'm gonna have to make this window

00:11:32,319 --> 00:11:35,190
smaller too

00:11:49,870 --> 00:11:56,380
is that pretty reasonable in terms of

00:11:53,500 --> 00:11:59,560
size okay good so um I went to localhost

00:11:56,380 --> 00:12:00,910
8080 and it had a page there one of the

00:11:59,560 --> 00:12:03,970
things i'd like to point out is that it

00:12:00,910 --> 00:12:07,420
didn't ask me for a login or anything

00:12:03,970 --> 00:12:11,880
and so kind of installing it just by

00:12:07,420 --> 00:12:13,990
default can be can be insecure right and

00:12:11,880 --> 00:12:15,970
the first thing I always do when i

00:12:13,990 --> 00:12:20,200
install it is i go into this manage

00:12:15,970 --> 00:12:28,120
jenkins thing and then one of the

00:12:20,200 --> 00:12:30,940
options here is configure system and if

00:12:28,120 --> 00:12:33,970
we scroll down through this it has this

00:12:30,940 --> 00:12:36,520
checkbox enable security which in my

00:12:33,970 --> 00:12:40,839
opinion is kind of like having a option

00:12:36,520 --> 00:12:43,350
on a car for breaks but huh it really

00:12:40,839 --> 00:12:45,550
should be on and you can check it

00:12:43,350 --> 00:12:50,500
uncheck it if you know you're in a LAN

00:12:45,550 --> 00:12:51,970
or some secure environment and it has so

00:12:50,500 --> 00:12:53,110
in spite of it being turned off maybe

00:12:51,970 --> 00:12:56,339
the one reason why is turned off is

00:12:53,110 --> 00:12:58,450
because it's um it's kind of complicated

00:12:56,339 --> 00:13:02,350
because it can hook up to all different

00:12:58,450 --> 00:13:04,990
sorts of registries and ldap and so on

00:13:02,350 --> 00:13:07,270
and you can have it keep its own user

00:13:04,990 --> 00:13:08,890
database you can the way I haven't

00:13:07,270 --> 00:13:10,420
installed here out of the box it just

00:13:08,890 --> 00:13:12,310
keeps everything in XML files but you

00:13:10,420 --> 00:13:15,700
can have its back in took up to mysql

00:13:12,310 --> 00:13:19,930
you do all kinds of crazy things to to

00:13:15,700 --> 00:13:22,990
uh if you're just wanting to install it

00:13:19,930 --> 00:13:24,310
as quickly as possible and and use it to

00:13:22,990 --> 00:13:26,830
make your life better just tell it to

00:13:24,310 --> 00:13:28,540
use the user the UNIX user group

00:13:26,830 --> 00:13:30,580
database and that way you'll log in the

00:13:28,540 --> 00:13:32,980
same user as your shell account on this

00:13:30,580 --> 00:13:34,959
machine one of the things that you'll do

00:13:32,980 --> 00:13:37,480
is you'll have to hit that test and it

00:13:34,959 --> 00:13:39,970
will tell you that Jenkins has to be in

00:13:37,480 --> 00:13:43,830
a group the user gene gets just being a

00:13:39,970 --> 00:13:43,830
group that can read the password file

00:13:44,490 --> 00:13:50,680
and I find this kind of annoying because

00:13:46,959 --> 00:13:52,240
it goes a little bit against the whole

00:13:50,680 --> 00:13:55,690
point of this is that it's supposed to

00:13:52,240 --> 00:13:58,440
be really simple right but instead we

00:13:55,690 --> 00:13:58,440
have to add that group

00:14:07,230 --> 00:14:16,870
and that actually take a fact that to

00:14:15,579 --> 00:14:20,949
actually take effect we also have to

00:14:16,870 --> 00:14:24,160
restart jenkins and i think on mac and

00:14:20,949 --> 00:14:27,670
other installs it it may not need to do

00:14:24,160 --> 00:14:30,069
that and it takes a minute to start up

00:14:27,670 --> 00:14:35,699
because it's java is slow but it looks

00:14:30,069 --> 00:14:35,699
like that did work and i will save this

00:14:36,420 --> 00:14:42,220
actually is one other thing i wanted to

00:14:38,769 --> 00:14:44,589
do well now gives me a log in there are

00:14:42,220 --> 00:14:47,079
now fewer options here but note that

00:14:44,589 --> 00:14:50,620
even if you come to it anonymously you

00:14:47,079 --> 00:14:53,920
can still see stuff so keep that keep

00:14:50,620 --> 00:14:55,180
that in mind the default set up even

00:14:53,920 --> 00:14:57,189
when you turn on the lowest level

00:14:55,180 --> 00:15:03,430
security you can still like see the

00:14:57,189 --> 00:15:08,670
names of jobs and stuff like that so I

00:15:03,430 --> 00:15:12,040
also always check a box that simply says

00:15:08,670 --> 00:15:13,689
logged in users can do anything and if

00:15:12,040 --> 00:15:15,939
you're not logged in you you Kate you

00:15:13,689 --> 00:15:18,939
can't do anything unfortunately guess

00:15:15,939 --> 00:15:21,990
we'll see a lot but and that's that's um

00:15:18,939 --> 00:15:26,019
that's reasonable for a developer's

00:15:21,990 --> 00:15:27,939
laptop so here's anyone can do anything

00:15:26,019 --> 00:15:32,639
I'm just going to change that to logged

00:15:27,939 --> 00:15:36,310
in users can do anything and do save and

00:15:32,639 --> 00:15:38,740
at that at this point like you you have

00:15:36,310 --> 00:15:40,329
a working Jenkins that's you know

00:15:38,740 --> 00:15:43,769
reasonable to have on your laptop even

00:15:40,329 --> 00:15:43,769
if you're in a coffee shop or something

00:15:45,389 --> 00:15:50,500
so one of the things I'm going to do

00:15:48,639 --> 00:15:54,189
just to demonstrate what this is so I'm

00:15:50,500 --> 00:15:56,889
going to make a make a very simple job

00:15:54,189 --> 00:15:58,480
that just like runs LS and then I'm

00:15:56,889 --> 00:16:00,399
going to go through the plugins and then

00:15:58,480 --> 00:16:03,699
I'll switch back to the presentation and

00:16:00,399 --> 00:16:07,860
cover some stuff some other stuff so I'm

00:16:03,699 --> 00:16:17,790
going to go to new job here and

00:16:07,860 --> 00:16:20,370
I'll just name it test job let's see and

00:16:17,790 --> 00:16:24,420
you almost always check this build a

00:16:20,370 --> 00:16:27,660
free freestyle software project these

00:16:24,420 --> 00:16:33,089
other ones connect up to other explicit

00:16:27,660 --> 00:16:38,370
types of build systems and so it throws

00:16:33,089 --> 00:16:42,420
me into the descrip the the configure

00:16:38,370 --> 00:16:46,620
panel essentially for this job and it

00:16:42,420 --> 00:16:48,630
has a description it has various options

00:16:46,620 --> 00:16:50,459
here I'm going to run through some of

00:16:48,630 --> 00:16:52,800
them quickly and ignore almost all of

00:16:50,459 --> 00:16:54,600
them this discard old builds will keep

00:16:52,800 --> 00:16:56,570
it from keeping a log I'm going to leave

00:16:54,600 --> 00:16:58,769
that off this build is parametrized

00:16:56,570 --> 00:17:00,420
means that when you run it it'll give

00:16:58,769 --> 00:17:02,339
you a little farm anyway you can enter

00:17:00,420 --> 00:17:06,299
in arguments like which machine to back

00:17:02,339 --> 00:17:08,669
up for instance there's of course a

00:17:06,299 --> 00:17:10,709
bunch of advanced stuff notice it has

00:17:08,669 --> 00:17:14,699
some source code management stuff and

00:17:10,709 --> 00:17:18,419
get is not in there so it has these

00:17:14,699 --> 00:17:20,490
build triggers and if you do build

00:17:18,419 --> 00:17:24,270
periodically and you look at this help

00:17:20,490 --> 00:17:27,299
thing well it should come up it has the

00:17:24,270 --> 00:17:30,200
standard old con job syntax so if you

00:17:27,299 --> 00:17:32,850
want to make something that runs every

00:17:30,200 --> 00:17:34,260
you know five minutes to run drush con

00:17:32,850 --> 00:17:36,840
on your site that's how you would do

00:17:34,260 --> 00:17:40,290
that the key part is that if you go to

00:17:36,840 --> 00:17:43,080
add build step and go to execute shell

00:17:40,290 --> 00:17:45,059
you can just put commands in here that

00:17:43,080 --> 00:17:46,770
will run and so I'm going to throw a

00:17:45,059 --> 00:17:48,330
couple in here i'm going to put LS date

00:17:46,770 --> 00:17:50,870
and Who am I just because they give

00:17:48,330 --> 00:17:50,870
output

00:17:55,610 --> 00:18:03,180
there's a link here it should open in a

00:17:58,710 --> 00:18:07,380
new tab if I click it let's see did you

00:18:03,180 --> 00:18:13,410
do that or maybe it's not completely

00:18:07,380 --> 00:18:15,060
ungraded so there's a bunch of

00:18:13,410 --> 00:18:18,570
environmental variables you can use in

00:18:15,060 --> 00:18:20,520
here so if you want um if you need some

00:18:18,570 --> 00:18:25,770
of these things such as the directory it

00:18:20,520 --> 00:18:28,020
runs in our the URL or CBS branch that

00:18:25,770 --> 00:18:29,670
this build is attached to and so on you

00:18:28,020 --> 00:18:32,190
can refer to those in your shell scripts

00:18:29,670 --> 00:18:34,200
so you can get you can do complicated

00:18:32,190 --> 00:18:39,330
reporting in here we will just do a save

00:18:34,200 --> 00:18:42,120
and there is now this job and I'm going

00:18:39,330 --> 00:18:45,350
to click build now and you see this

00:18:42,120 --> 00:18:48,270
little build history box on the side

00:18:45,350 --> 00:18:54,900
each time I run build now it will

00:18:48,270 --> 00:18:58,290
accumulate a a run there right so i can

00:18:54,900 --> 00:19:00,900
i see a history of the builds if i click

00:18:58,290 --> 00:19:04,500
on one of them and then do console

00:19:00,900 --> 00:19:11,100
output then i can see the actual results

00:19:04,500 --> 00:19:14,970
of running that script and and that's

00:19:11,100 --> 00:19:17,700
kind of the the low level you know

00:19:14,970 --> 00:19:21,090
Jenkins 101 run-through so if you had

00:19:17,700 --> 00:19:23,250
something such as a Drudge back up my my

00:19:21,090 --> 00:19:25,440
gray or address SQL dump or whatever and

00:19:23,250 --> 00:19:28,290
you want to automated this this is kind

00:19:25,440 --> 00:19:30,000
of like a more gooey gooey fight and

00:19:28,290 --> 00:19:31,950
feature full version of chron like you

00:19:30,000 --> 00:19:34,110
can automate that and it keeps a log

00:19:31,950 --> 00:19:37,080
history so you can know if it quit

00:19:34,110 --> 00:19:40,980
running at some point if I go to the

00:19:37,080 --> 00:19:44,220
main page of Jenkins like the top page

00:19:40,980 --> 00:19:46,050
it lists all these jobs here if in the

00:19:44,220 --> 00:19:47,580
job you put a category you can separate

00:19:46,050 --> 00:19:50,400
them out in the tabs so you can keep a

00:19:47,580 --> 00:19:52,230
bunch of organized and this blue ball

00:19:50,400 --> 00:19:55,200
indicates whether the last time it ran

00:19:52,230 --> 00:19:57,420
it was successful or not and so that's

00:19:55,200 --> 00:19:58,860
handy when you have a bunch of stuff you

00:19:57,420 --> 00:20:02,880
can come to your Jenkins scan down it

00:19:58,860 --> 00:20:05,610
and sort of see an idea of is the system

00:20:02,880 --> 00:20:08,610
working or not and the little sUNshine

00:20:05,610 --> 00:20:09,059
thing turns to rainy clouds if like it's

00:20:08,610 --> 00:20:10,679
been five

00:20:09,059 --> 00:20:12,840
ailing occasionally within the last 10

00:20:10,679 --> 00:20:14,399
runs or something like that so it's kind

00:20:12,840 --> 00:20:17,759
of like a quick scan down those little

00:20:14,399 --> 00:20:19,070
icons like all sunny is good if you see

00:20:17,759 --> 00:20:21,389
a few cloudy things you know that

00:20:19,070 --> 00:20:23,759
something didn't happen some some time I

00:20:21,389 --> 00:20:30,629
can sort of quickly see where your

00:20:23,759 --> 00:20:37,559
system is in this case it is running

00:20:30,629 --> 00:20:41,460
them on this machine and okay um let's

00:20:37,559 --> 00:20:42,809
uh let's go to this job and put a PWD in

00:20:41,460 --> 00:20:47,759
there and we'll print out the current

00:20:42,809 --> 00:20:50,580
working directory so if I hover over it

00:20:47,759 --> 00:20:51,720
you can go right to configure that's one

00:20:50,580 --> 00:20:55,169
of the things they added in just the

00:20:51,720 --> 00:20:59,730
most recent version it should be in a

00:20:55,169 --> 00:21:01,860
job working directory somewhere so that

00:20:59,730 --> 00:21:03,929
command in bed should print out the

00:21:01,860 --> 00:21:07,740
current working directory I'm going to

00:21:03,929 --> 00:21:10,740
do is save and I'm going to do a build

00:21:07,740 --> 00:21:14,249
now you see how it says build scheduled

00:21:10,740 --> 00:21:17,129
and then it appears here you can have a

00:21:14,249 --> 00:21:18,720
bunch of if if you set your worker so it

00:21:17,129 --> 00:21:20,759
will only run one job at a time you can

00:21:18,720 --> 00:21:22,879
get a bunch stacked up and then that

00:21:20,759 --> 00:21:29,029
another box appears i hear of the queue

00:21:22,879 --> 00:21:33,749
and let's go to the console output and

00:21:29,029 --> 00:21:36,119
you see it's running in here now that

00:21:33,749 --> 00:21:38,730
directory is one of the settings you can

00:21:36,119 --> 00:21:40,529
put in the job so that that was just a

00:21:38,730 --> 00:21:44,429
default one but you can set it for

00:21:40,529 --> 00:21:48,509
example set this job to go to VAR WV

00:21:44,429 --> 00:21:53,369
hose example calm and then tell to run

00:21:48,509 --> 00:21:54,990
you know drush you know I was gonna say

00:21:53,369 --> 00:21:56,299
Josh TC all but probably is not

00:21:54,990 --> 00:21:58,919
something you want to just be running

00:21:56,299 --> 00:22:00,960
all the time you have problems if you're

00:21:58,919 --> 00:22:03,480
doing that oh but some drush command

00:22:00,960 --> 00:22:04,860
like sade rush cron that's actually one

00:22:03,480 --> 00:22:08,669
of my example ones it's running address

00:22:04,860 --> 00:22:13,110
crime through this system let's go to

00:22:08,669 --> 00:22:18,179
manage jenkins and let's go to this

00:22:13,110 --> 00:22:20,490
manage plugins thing and you see

00:22:18,179 --> 00:22:22,110
something here that you know talking

00:22:20,490 --> 00:22:22,840
about how complex systems kind of

00:22:22,110 --> 00:22:24,700
evolved toward

00:22:22,840 --> 00:22:27,640
the same things this is essentially like

00:22:24,700 --> 00:22:29,680
the Drupal modules page you have the

00:22:27,640 --> 00:22:31,660
ones that are available for update the

00:22:29,680 --> 00:22:34,840
ones that are installed the ones that

00:22:31,660 --> 00:22:36,670
are available and not installed and they

00:22:34,840 --> 00:22:38,530
don't have as many as Drupal so they can

00:22:36,670 --> 00:22:42,610
afford to have an available tab that's

00:22:38,530 --> 00:22:45,370
just really really long and the main

00:22:42,610 --> 00:22:49,060
point I wanted to make here is just that

00:22:45,370 --> 00:22:52,300
there are a ton of plugins that do

00:22:49,060 --> 00:22:57,160
various things like almost anything you

00:22:52,300 --> 00:22:59,230
want to connect to or have it produce or

00:22:57,160 --> 00:23:01,690
something like that so some of them are

00:22:59,230 --> 00:23:04,810
funny like there's the chuck norris

00:23:01,690 --> 00:23:06,250
plugin instead of the blue balls it

00:23:04,810 --> 00:23:07,930
shows a picture of Chuck Norris and the

00:23:06,250 --> 00:23:10,300
more failures there there are the

00:23:07,930 --> 00:23:13,000
angrier he gets and the final picture

00:23:10,300 --> 00:23:17,410
he's actually in the karate dress like

00:23:13,000 --> 00:23:23,140
getting ready to kick your ass actually

00:23:17,410 --> 00:23:27,660
we can just let's install that and so

00:23:23,140 --> 00:23:31,210
you notice ones that attract to harvest

00:23:27,660 --> 00:23:33,610
every kind of so here's the source code

00:23:31,210 --> 00:23:39,430
management related and I want to install

00:23:33,610 --> 00:23:44,010
the get ones in particular we have to

00:23:39,430 --> 00:23:44,010
search for get in here

00:23:50,920 --> 00:23:58,300
yes because i was i was practicing this

00:23:54,320 --> 00:24:00,320
last night so that's just to get oh

00:23:58,300 --> 00:24:02,990
that's something else you know so

00:24:00,320 --> 00:24:06,650
there's an IRC plugin so you can tell it

00:24:02,990 --> 00:24:12,740
if the job fails put a message in this

00:24:06,650 --> 00:24:21,020
IRC channel and I think drupal.org has

00:24:12,740 --> 00:24:23,480
some uses that yes normally by default a

00:24:21,020 --> 00:24:25,940
fail is when that shell script you know

00:24:23,480 --> 00:24:27,710
return zero just like you know shell

00:24:25,940 --> 00:24:31,310
commands normally return 0 or 1 at the

00:24:27,710 --> 00:24:33,950
base prompt and I think there are of

00:24:31,310 --> 00:24:36,740
course plugins that do all kinds of more

00:24:33,950 --> 00:24:38,780
complicated stuff you can have the

00:24:36,740 --> 00:24:40,850
script to produce a chunk of XML with

00:24:38,780 --> 00:24:42,830
like some complicated stuff in it and it

00:24:40,850 --> 00:24:49,820
can have like many different return

00:24:42,830 --> 00:24:51,110
types of them you know just 0 1 so i

00:24:49,820 --> 00:24:55,010
don't think i need anything other than

00:24:51,110 --> 00:24:57,530
that one but just scanning through here

00:24:55,010 --> 00:25:01,700
you can see all kinds of other things

00:24:57,530 --> 00:25:10,160
like jira plugins that post things to

00:25:01,700 --> 00:25:12,020
jira stuff um redmine like there's one

00:25:10,160 --> 00:25:14,060
of the reasons why this is like the

00:25:12,020 --> 00:25:15,460
default technology to go to isn't

00:25:14,060 --> 00:25:17,870
because of the necessary it's the best

00:25:15,460 --> 00:25:18,770
but Jenkins by its nature is something

00:25:17,870 --> 00:25:20,780
that connects to a lot of different

00:25:18,770 --> 00:25:26,030
stuff and this thing has the most

00:25:20,780 --> 00:25:27,230
plugins to connect to other things so

00:25:26,030 --> 00:25:32,000
I'm going to click install without

00:25:27,230 --> 00:25:33,800
restart and it's and you notice how it

00:25:32,000 --> 00:25:41,030
went and got dependencies to just like a

00:25:33,800 --> 00:25:43,510
good Drudge dl command and hopefully I'm

00:25:41,030 --> 00:25:43,510
internet

00:25:44,999 --> 00:25:51,539
um and it will go in and we'll install

00:25:48,839 --> 00:25:54,239
those after we install it just like if

00:25:51,539 --> 00:25:56,849
you add a module and Drupal that you

00:25:54,239 --> 00:25:59,159
know adds more fields to certain content

00:25:56,849 --> 00:26:00,749
types or something if we go back to that

00:25:59,159 --> 00:26:06,179
job page will see that we have a lot

00:26:00,749 --> 00:26:14,719
more options that are derived from from

00:26:06,179 --> 00:26:14,719
each one of these see why it should be

00:26:14,929 --> 00:26:26,699
running stuff well it's doing something

00:26:24,029 --> 00:26:30,509
there maybe that was a little slow

00:26:26,699 --> 00:26:34,339
downloading it and so it will go through

00:26:30,509 --> 00:26:36,629
there and install it not unlike um

00:26:34,339 --> 00:26:39,899
installing and install profile and

00:26:36,629 --> 00:26:41,189
Interpol and I think it is kind of stink

00:26:39,899 --> 00:26:43,919
to look at this and look at Drupal and

00:26:41,189 --> 00:26:46,579
look at other big CMS systems and see

00:26:43,919 --> 00:26:50,419
how they all kind of had the same things

00:26:46,579 --> 00:26:53,309
like I think a lot of CMS is bill really

00:26:50,419 --> 00:26:54,599
complicated user interfaces and then got

00:26:53,309 --> 00:26:56,989
angry at them and made a command-line

00:26:54,599 --> 00:27:03,749
interface with fixing the user interface

00:26:56,989 --> 00:27:06,929
do you have a question done the question

00:27:03,749 --> 00:27:10,589
is can Drupal trigger a task and the

00:27:06,929 --> 00:27:13,139
answer is yes if you go in in those in

00:27:10,589 --> 00:27:15,029
those jobs there's like a little trigger

00:27:13,139 --> 00:27:16,409
section and you can have it trigger on

00:27:15,029 --> 00:27:19,169
all kinds of different things like you

00:27:16,409 --> 00:27:20,519
can tell it to trigger on a cron job but

00:27:19,169 --> 00:27:22,679
you can also tell it hey i want you to

00:27:20,519 --> 00:27:26,069
trigger any time someone calls this URL

00:27:22,679 --> 00:27:29,609
and it will give you a URL and then you

00:27:26,069 --> 00:27:31,469
could have drupal just just curl or w

00:27:29,609 --> 00:27:37,109
get that URL and that would be the

00:27:31,469 --> 00:27:38,369
simplest way but given that a gene

00:27:37,109 --> 00:27:40,619
consists what it is as you may imagine

00:27:38,369 --> 00:27:42,199
there are a lot of other ways too you

00:27:40,619 --> 00:27:45,689
could have it trigger something off of

00:27:42,199 --> 00:27:49,079
IRC the most common complicated trigger

00:27:45,689 --> 00:27:52,799
is to trigger when someone merges a

00:27:49,079 --> 00:27:55,049
commit to a specific branch and get so a

00:27:52,799 --> 00:27:57,299
common way that the jenkins is used as

00:27:55,049 --> 00:27:58,800
someone commits to master and jinkin

00:27:57,299 --> 00:28:00,930
says oh the site is updated

00:27:58,800 --> 00:28:06,230
gets the code puts it there runs drush

00:28:00,930 --> 00:28:12,750
update update DB and and will actually

00:28:06,230 --> 00:28:26,190
look at a actually look at a an example

00:28:12,750 --> 00:28:28,590
of that it's a little bit slow yeah

00:28:26,190 --> 00:28:30,810
that's a good point i'll i'll repeat

00:28:28,590 --> 00:28:33,270
that who's saying that it can run simple

00:28:30,810 --> 00:28:35,430
tests and selenium tests and peach pee

00:28:33,270 --> 00:28:36,900
tests and there are plugins for all of

00:28:35,430 --> 00:28:39,630
these so you can get sort of

00:28:36,900 --> 00:28:42,840
pre-configured jobs that run this test

00:28:39,630 --> 00:28:46,740
and report the right output back one of

00:28:42,840 --> 00:28:50,430
the more interesting and complex in cool

00:28:46,740 --> 00:28:52,560
setups is to have it on every commit to

00:28:50,430 --> 00:28:55,410
a staging branch or a master branch

00:28:52,560 --> 00:28:58,050
check out a copy of everything and then

00:28:55,410 --> 00:28:59,220
run a bunch of selenium tests and to do

00:28:58,050 --> 00:29:01,700
that you have to have a selenium worker

00:28:59,220 --> 00:29:05,490
that has Mozilla set up with the

00:29:01,700 --> 00:29:06,900
selenium plugin so you have the selenium

00:29:05,490 --> 00:29:09,030
jobs that go off and visit particular

00:29:06,900 --> 00:29:11,100
pages like it goes to the register a new

00:29:09,030 --> 00:29:14,700
user page put something in tries to

00:29:11,100 --> 00:29:16,800
register it right and you can you can

00:29:14,700 --> 00:29:19,980
set it up so that worker captures the

00:29:16,800 --> 00:29:22,350
output of captures a movie a screenshot

00:29:19,980 --> 00:29:24,960
movie of that of that browser running

00:29:22,350 --> 00:29:26,880
and then when you go and click on the

00:29:24,960 --> 00:29:30,120
job in that little like job results

00:29:26,880 --> 00:29:31,530
thing you see the mp4 there and if it

00:29:30,120 --> 00:29:33,180
fails you can click on it and you can

00:29:31,530 --> 00:29:35,370
see the mouse go around and click and

00:29:33,180 --> 00:29:37,830
say oh for some reason this tab

00:29:35,370 --> 00:29:40,170
disappeared our validation fails in this

00:29:37,830 --> 00:29:42,750
forum and you can do kind of into end

00:29:40,170 --> 00:29:44,960
user based tests that way and collect

00:29:42,750 --> 00:29:47,850
you know archives of them and so on

00:29:44,960 --> 00:29:51,030
which would never happen if it wasn't

00:29:47,850 --> 00:29:52,170
automated right I mean and that's that's

00:29:51,030 --> 00:29:54,330
kind of the cool thing about this is

00:29:52,170 --> 00:29:56,700
that if you automate stuff then all the

00:29:54,330 --> 00:29:59,490
things you should do but don't you can

00:29:56,700 --> 00:30:01,290
do you will actually do them all right

00:29:59,490 --> 00:30:07,530
so it says it finally finished updating

00:30:01,290 --> 00:30:11,470
everyone everything and i'll just go

00:30:07,530 --> 00:30:19,419
back here click on test job

00:30:11,470 --> 00:30:22,539
and let me click on configure and my

00:30:19,419 --> 00:30:23,950
main point here is that now there is

00:30:22,539 --> 00:30:27,179
additional things that weren't there

00:30:23,950 --> 00:30:31,780
before there's this github project link

00:30:27,179 --> 00:30:34,630
and down here under source code

00:30:31,780 --> 00:30:36,490
management there's now a get thing so i

00:30:34,630 --> 00:30:40,809
could do get and it asked me for

00:30:36,490 --> 00:30:44,350
different repositories and so you can in

00:30:40,809 --> 00:30:46,690
the advanced you can specify whether get

00:30:44,350 --> 00:30:48,760
tells the job to run with a trigger or

00:30:46,690 --> 00:30:50,620
whether you pull get every five minutes

00:30:48,760 --> 00:30:52,419
you know and stuff like that so you can

00:30:50,620 --> 00:30:58,360
get into the details of how the two are

00:30:52,419 --> 00:31:02,590
connected and and that's that's the main

00:30:58,360 --> 00:31:05,049
point is just that I um it's just that

00:31:02,590 --> 00:31:08,280
we we added some plugins and now we have

00:31:05,049 --> 00:31:10,630
a lot more options of stuff to do and

00:31:08,280 --> 00:31:13,030
aji can set up just like a Drupal set up

00:31:10,630 --> 00:31:14,799
if you just sit in there throwing Chuck

00:31:13,030 --> 00:31:17,020
Norris type plugins all the time but you

00:31:14,799 --> 00:31:25,450
can make it really slow so you know keep

00:31:17,020 --> 00:31:28,679
that in mind yeah where is he so I was

00:31:25,450 --> 00:31:32,850
expecting that was on Project test job

00:31:28,679 --> 00:31:32,850
actually let me go back to dashboard

00:31:35,520 --> 00:31:43,960
yeah I think we might need to restart

00:31:38,520 --> 00:31:46,440
let's see I have the restore command in

00:31:43,960 --> 00:31:46,440
here

00:31:53,210 --> 00:32:02,910
okay so let's uh so it should so now

00:32:00,690 --> 00:32:05,400
it's still starting up one of the things

00:32:02,910 --> 00:32:07,260
about Jenkins is being Java its kind of

00:32:05,400 --> 00:32:08,870
feels kind of heavy sometimes like when

00:32:07,260 --> 00:32:11,820
you started it's not just there

00:32:08,870 --> 00:32:14,640
instantly and sometimes the workers use

00:32:11,820 --> 00:32:17,720
more RAM than you'd really want and so

00:32:14,640 --> 00:32:20,330
you have to do little stuff in the

00:32:17,720 --> 00:32:22,470
tomcat server dot XML file and like

00:32:20,330 --> 00:32:26,640
limit amount of memory and stuff like

00:32:22,470 --> 00:32:31,160
that and so it's back now I'm not logged

00:32:26,640 --> 00:32:31,160
in wonder if that makes a difference

00:32:40,190 --> 00:32:44,889
yeah let me just edit the job and see if

00:32:42,289 --> 00:32:49,549
there's like a Chuck Norris selection

00:32:44,889 --> 00:32:51,740
there's some there's some code of

00:32:49,549 --> 00:32:55,789
conduct violating plugins to wear like

00:32:51,740 --> 00:33:07,190
the girl loses more clothing as the job

00:32:55,789 --> 00:33:09,409
gets better and stuff like that that's a

00:33:07,190 --> 00:33:11,179
that's a good um that's a good question

00:33:09,409 --> 00:33:13,820
that question is are there any plugins

00:33:11,179 --> 00:33:21,379
for code quality are matching certain

00:33:13,820 --> 00:33:27,529
code rules and and the answer is um err

00:33:21,379 --> 00:33:29,870
activate Chuck Norris there we go if you

00:33:27,529 --> 00:33:37,210
click apply it says saved but if you

00:33:29,870 --> 00:33:37,210
click Save it doesn't say applied yes

00:33:37,779 --> 00:33:44,870
it's no status only commands see a

00:33:41,029 --> 00:33:50,570
little description here and now see if

00:33:44,870 --> 00:33:58,000
we go here maybe maybe buddy to go to

00:33:50,570 --> 00:33:58,000
the dashboard so he should be right here

00:34:01,550 --> 00:34:08,490
yeah he's probably in ninja mode all

00:34:06,660 --> 00:34:14,340
right so getting Chuck Norris will be

00:34:08,490 --> 00:34:20,850
like homework for this thing I think let

00:34:14,340 --> 00:34:27,810
me switch back to the slide show and see

00:34:20,850 --> 00:34:30,690
what else I had in here so how many

00:34:27,810 --> 00:34:32,850
people here are sort of familiar with

00:34:30,690 --> 00:34:34,710
what people call like sort of a basic

00:34:32,850 --> 00:34:36,600
DevOps workflow or a developer makes

00:34:34,710 --> 00:34:41,490
things that go to a staging machine and

00:34:36,600 --> 00:34:42,900
then to a production anybody want me to

00:34:41,490 --> 00:34:45,450
kind of explain that a little bit I'll

00:34:42,900 --> 00:34:46,860
just go to it real quick so they this

00:34:45,450 --> 00:34:50,280
hokey graphic which looks horrible

00:34:46,860 --> 00:34:52,800
because I made it the idea of ideas

00:34:50,280 --> 00:34:54,960
there's a there's a developer making

00:34:52,800 --> 00:34:56,850
things there's this and he does

00:34:54,960 --> 00:34:58,230
development usually at the time that he

00:34:56,850 --> 00:35:00,180
starts maybe hasn't been working on that

00:34:58,230 --> 00:35:02,370
project for a while alright so the first

00:35:00,180 --> 00:35:03,900
thing he wants is is a fresh copy of

00:35:02,370 --> 00:35:06,660
everything in case other developers have

00:35:03,900 --> 00:35:09,210
been working on it or the the site user

00:35:06,660 --> 00:35:11,300
has been adding content so he grabs a

00:35:09,210 --> 00:35:15,180
fresh copy of the day of the database

00:35:11,300 --> 00:35:17,430
this job should also unless you like to

00:35:15,180 --> 00:35:19,620
live dangerously sanitize the database

00:35:17,430 --> 00:35:21,960
like change all the emails to a test

00:35:19,620 --> 00:35:23,640
email and said all the passwords to the

00:35:21,960 --> 00:35:26,160
same thing or whatever because you know

00:35:23,640 --> 00:35:29,490
maybe this developers somebody you hired

00:35:26,160 --> 00:35:32,250
off rent a coder are you you you met him

00:35:29,490 --> 00:35:35,010
at a boffin drupalcamp in and you're

00:35:32,250 --> 00:35:37,020
working together so he does stuff and

00:35:35,010 --> 00:35:39,000
when he commits this job is able to

00:35:37,020 --> 00:35:42,060
commit we want that to kind of happen

00:35:39,000 --> 00:35:43,950
automatically so when he adds something

00:35:42,060 --> 00:35:45,780
to github automatically it's put on the

00:35:43,950 --> 00:35:49,650
staging machine and people can look at

00:35:45,780 --> 00:35:51,990
it right um this implies that the stuff

00:35:49,650 --> 00:35:53,910
he does doesn't require you to go into

00:35:51,990 --> 00:35:56,310
actual admin and click things to make

00:35:53,910 --> 00:35:58,850
them happen so it implies that you're

00:35:56,310 --> 00:36:00,720
using features and stuff like that a lot

00:35:58,850 --> 00:36:03,210
which of course isn't always true

00:36:00,720 --> 00:36:05,960
sometimes he he does have to go there

00:36:03,210 --> 00:36:09,240
and then the idea is like some sort of

00:36:05,960 --> 00:36:11,010
project owner the customer or maybe you

00:36:09,240 --> 00:36:13,600
if you're on your project you're

00:36:11,010 --> 00:36:15,190
everything you look at it on stage

00:36:13,600 --> 00:36:17,500
being silly yeah it looks good and then

00:36:15,190 --> 00:36:19,810
we have this job that's deploy which is

00:36:17,500 --> 00:36:21,430
a manually trigger job so you don't want

00:36:19,810 --> 00:36:24,190
stuff to happen alive automatically

00:36:21,430 --> 00:36:25,750
right or you click that he's okay put

00:36:24,190 --> 00:36:31,210
this on live and it goes and puts that

00:36:25,750 --> 00:36:33,550
code on live and runs up to 8tb and some

00:36:31,210 --> 00:36:36,480
of the dev up guys give really really

00:36:33,550 --> 00:36:42,280
academic about variations on this but I

00:36:36,480 --> 00:36:43,630
go with keep it simple mostly and so i

00:36:42,280 --> 00:36:45,700
think what i'm going to do go through

00:36:43,630 --> 00:36:47,790
now is just go through and look at at

00:36:45,700 --> 00:36:51,610
some of those jobs that do those things

00:36:47,790 --> 00:36:53,920
i'm going to just just copy some xml

00:36:51,610 --> 00:36:57,850
files that are the jobs in there restart

00:36:53,920 --> 00:36:59,050
jenkins and my main point looking at

00:36:57,850 --> 00:37:01,060
each of the jobs is just going to be

00:36:59,050 --> 00:37:03,430
that they're really simple there are a

00:37:01,060 --> 00:37:07,270
few lines of script and then we use

00:37:03,430 --> 00:37:09,720
jenkins to tell them when to run so i'll

00:37:07,270 --> 00:37:09,720
do that

00:37:23,630 --> 00:37:38,610
so I have I have a zip file of these

00:37:29,880 --> 00:37:40,710
jobs that's linked to on the web and and

00:37:38,610 --> 00:37:42,210
if you wanted to start with my jobs that

00:37:40,710 --> 00:37:45,930
you don't have to you would unpack this

00:37:42,210 --> 00:37:49,860
and just copy it in there so i'm in VAR

00:37:45,930 --> 00:37:51,210
lib i'm going to CD into jenkins and it

00:37:49,860 --> 00:37:54,650
may be in a slightly different place and

00:37:51,210 --> 00:37:57,090
other os's but it's not hard to find

00:37:54,650 --> 00:37:58,800
there's some configuration stuff in here

00:37:57,090 --> 00:38:00,890
like all those settings for passwords

00:37:58,800 --> 00:38:03,510
and stuff are in that config tex ml file

00:38:00,890 --> 00:38:05,400
which is good to know because you want

00:38:03,510 --> 00:38:06,770
to back that up when your configuration

00:38:05,400 --> 00:38:10,010
starts getting really complicated

00:38:06,770 --> 00:38:12,990
there's a directory here called jobs and

00:38:10,010 --> 00:38:17,390
that just has a directory in it for each

00:38:12,990 --> 00:38:20,250
one of these jobs so if I've going jobs

00:38:17,390 --> 00:38:25,350
by going jobs is a directory called test

00:38:20,250 --> 00:38:27,210
job and if we look in that what we see

00:38:25,350 --> 00:38:30,000
is a configuration file that config dot

00:38:27,210 --> 00:38:31,680
XML has all the settings from that form

00:38:30,000 --> 00:38:34,950
is all just saved in there in an XML

00:38:31,680 --> 00:38:36,540
file and then there's a builds which has

00:38:34,950 --> 00:38:38,580
the directories where the commands will

00:38:36,540 --> 00:38:51,410
run and their log of when they were run

00:38:38,580 --> 00:38:51,410
and and it's like copied everything

00:38:53,560 --> 00:38:58,270
to this job's directory

00:39:10,310 --> 00:39:15,900
okay so what I did there is i copied the

00:39:13,410 --> 00:39:17,790
contents of the zip file in here so now

00:39:15,900 --> 00:39:21,270
i have also directories for these other

00:39:17,790 --> 00:39:23,490
jobs there's a cron there's a backup

00:39:21,270 --> 00:39:26,339
there's a deploy there's a first job

00:39:23,490 --> 00:39:30,810
which is what I called the demo job last

00:39:26,339 --> 00:39:32,130
time i did it etc if you unpack the zip

00:39:30,810 --> 00:39:35,430
file and packet in there you might have

00:39:32,130 --> 00:39:39,690
to change these user names before

00:39:35,430 --> 00:39:41,880
Jenkins sees it and usually I have to

00:39:39,690 --> 00:39:43,470
restart Jenkins to get to get this to

00:39:41,880 --> 00:39:54,150
see them when i copy the jobs in let me

00:39:43,470 --> 00:39:59,130
do that and now if I reload them here I

00:39:54,150 --> 00:40:02,089
should be logged out again and it's

00:39:59,130 --> 00:40:02,089
restarting

00:40:10,210 --> 00:40:17,180
and as I wind up toward the end of these

00:40:13,579 --> 00:40:19,970
jobs it would be a good time if you guys

00:40:17,180 --> 00:40:24,589
want to know hey ken Jenkins do X we can

00:40:19,970 --> 00:40:27,349
actually just try it so now I brought it

00:40:24,589 --> 00:40:30,410
back all those jobs i put in there now

00:40:27,349 --> 00:40:31,759
appear because they're just a xml file

00:40:30,410 --> 00:40:34,039
essentially that i copied into the right

00:40:31,759 --> 00:40:37,249
place they're great because they've

00:40:34,039 --> 00:40:41,619
never been run before and I'm not logged

00:40:37,249 --> 00:40:46,640
in but again note that in like this

00:40:41,619 --> 00:40:48,249
default really simple setup if even if

00:40:46,640 --> 00:40:53,779
you're anonymous you can see some stuff

00:40:48,249 --> 00:40:54,680
so just keep that in mind and I guess I

00:40:53,779 --> 00:40:55,880
should have mentioned the first time

00:40:54,680 --> 00:40:57,319
around that if you're going to manage

00:40:55,880 --> 00:41:01,039
Jenkins you can also restrict what I

00:40:57,319 --> 00:41:08,960
peas can visit the Machine and stuff

00:41:01,039 --> 00:41:13,369
like that so I'm now logged in and and

00:41:08,960 --> 00:41:20,109
so I'm going to run through I'm going to

00:41:13,369 --> 00:41:24,440
run through some of these um jobs and um

00:41:20,109 --> 00:41:26,720
and so I'm actually going to start out

00:41:24,440 --> 00:41:29,720
with these top three that are not part

00:41:26,720 --> 00:41:31,849
of that that little cycle but if you're

00:41:29,720 --> 00:41:34,369
just trying to use Jenkins to spend less

00:41:31,849 --> 00:41:36,109
time doing sis admin stuff and get more

00:41:34,369 --> 00:41:37,849
time getting paid to work with Drupal

00:41:36,109 --> 00:41:41,359
these might be some of the first ones

00:41:37,849 --> 00:41:43,900
you'll set up so here's this Kron four

00:41:41,359 --> 00:41:43,900
kitchens one

00:41:48,960 --> 00:41:57,300
and as as you might think it's set to

00:41:55,680 --> 00:41:59,660
build periodically it runs it once every

00:41:57,300 --> 00:42:04,250
10 minutes and it has a shell command

00:41:59,660 --> 00:42:10,920
which changes to the patchy user and

00:42:04,250 --> 00:42:12,330
runs and runs and runs drush cron that's

00:42:10,920 --> 00:42:14,339
very very simple like something that

00:42:12,330 --> 00:42:16,500
people normally put in the cron thing i

00:42:14,339 --> 00:42:20,280
like to use drush cron you could put the

00:42:16,500 --> 00:42:22,230
w get con PHP in there if you if you

00:42:20,280 --> 00:42:24,480
dude rush cron and there are like PHP

00:42:22,230 --> 00:42:26,880
errors they'll get captured in this

00:42:24,480 --> 00:42:30,300
console log so that you'll be able to

00:42:26,880 --> 00:42:35,099
see them and that's kind of cool one of

00:42:30,300 --> 00:42:37,080
the things I did in this one is I did

00:42:35,099 --> 00:42:38,700
discard old builds and keep only three

00:42:37,080 --> 00:42:40,320
days worth of builds because if it's

00:42:38,700 --> 00:42:43,640
running every 10 minutes this build

00:42:40,320 --> 00:42:46,470
history well we'll fill up forever and

00:42:43,640 --> 00:42:50,730
and you will eventually run out of the

00:42:46,470 --> 00:42:52,500
space and but I want to keep some

00:42:50,730 --> 00:42:53,940
because if I discover that chron is not

00:42:52,500 --> 00:42:56,220
running like somebody says hey our

00:42:53,940 --> 00:42:58,140
search isn't updating and I go and look

00:42:56,220 --> 00:42:59,700
in there and oak Ron's not running i

00:42:58,140 --> 00:43:02,609
kind of want to be able to see when II

00:42:59,700 --> 00:43:04,470
quit running so I can tell them oh it

00:43:02,609 --> 00:43:07,320
quit running because of X instead of

00:43:04,470 --> 00:43:09,000
just saying I fixed it which like leaves

00:43:07,320 --> 00:43:11,400
people with this feeling of uncertainty

00:43:09,000 --> 00:43:13,650
and that's one of the things that I

00:43:11,400 --> 00:43:15,420
think as a like freelancer or if you're

00:43:13,650 --> 00:43:18,780
the only computer guy at a small

00:43:15,420 --> 00:43:20,910
business or something that arm that kind

00:43:18,780 --> 00:43:23,040
of gives you like a big level of

00:43:20,910 --> 00:43:25,230
professionalism once you have those logs

00:43:23,040 --> 00:43:30,660
like if you have a problem that your own

00:43:25,230 --> 00:43:32,640
boneheaded mess up and you go back and

00:43:30,660 --> 00:43:35,820
say yeah I messed up I messed up on

00:43:32,640 --> 00:43:37,800
Friday and it hasn't run from from then

00:43:35,820 --> 00:43:39,480
until Wednesday like it just makes you

00:43:37,800 --> 00:43:41,310
look like you you're keeping track of

00:43:39,480 --> 00:43:42,510
what's going on if you can like show

00:43:41,310 --> 00:43:45,330
them this and say oh here's what

00:43:42,510 --> 00:43:47,670
happened you know it you know it just it

00:43:45,330 --> 00:43:50,430
just raises your status a little bit it

00:43:47,670 --> 00:43:53,010
makes you you know more professional and

00:43:50,430 --> 00:43:54,900
given that this is like easy to install

00:43:53,010 --> 00:43:56,760
on your laptop or your your server if

00:43:54,900 --> 00:43:58,490
you're a one-man shop you know it's kind

00:43:56,760 --> 00:44:06,380
of a nice win and that

00:43:58,490 --> 00:44:08,840
that regards let's go here so it also

00:44:06,380 --> 00:44:12,140
has an email notification so when it

00:44:08,840 --> 00:44:14,810
fails actually so when it's unstable

00:44:12,140 --> 00:44:17,150
that means that it started failing it

00:44:14,810 --> 00:44:19,190
sends an email if it keeps failing it

00:44:17,150 --> 00:44:21,800
doesn't send additional emails but it

00:44:19,190 --> 00:44:24,530
sends an email when it quits failing so

00:44:21,800 --> 00:44:27,020
that does is it not to spam you with a

00:44:24,530 --> 00:44:28,700
bunch of emails but and you know that

00:44:27,020 --> 00:44:31,010
each email like indicates something has

00:44:28,700 --> 00:44:42,140
actually changed and we have IKEA for

00:44:31,010 --> 00:44:44,270
kitchens um in this case in 10 min with

00:44:42,140 --> 00:44:47,540
in 10 minutes it will try to run and

00:44:44,270 --> 00:44:50,030
fail and it will fail because there's no

00:44:47,540 --> 00:44:54,170
VAR w w for kitchens com directory on

00:44:50,030 --> 00:44:56,119
here so that that command will fail and

00:44:54,170 --> 00:45:02,710
it will give back a shell shell with 0

00:44:56,119 --> 00:45:02,710
or whatever the failure thing yeah what

00:45:03,400 --> 00:45:08,480
right so that that's that's it that's a

00:45:06,830 --> 00:45:10,640
good question ideas like what

00:45:08,480 --> 00:45:12,109
constitutes a failure of a job and by

00:45:10,640 --> 00:45:13,460
default when you create jobs what

00:45:12,109 --> 00:45:16,760
constitutes a failure is whether those

00:45:13,460 --> 00:45:18,680
shell commands or turn to 0 or 1 which

00:45:16,760 --> 00:45:22,550
means that you could run ad rush command

00:45:18,680 --> 00:45:24,770
which could say oh no such blah blah

00:45:22,550 --> 00:45:26,810
blah but it's the dress command return

00:45:24,770 --> 00:45:28,790
to the shell the right thing it look

00:45:26,810 --> 00:45:30,770
like the job didn't fail and then this

00:45:28,790 --> 00:45:34,369
could happen a long time and build up

00:45:30,770 --> 00:45:36,290
right and so you have to think about

00:45:34,369 --> 00:45:38,359
that when you write your command

00:45:36,290 --> 00:45:40,790
sometimes people you know collect the

00:45:38,359 --> 00:45:42,680
return with the dollar the dollar sign

00:45:40,790 --> 00:45:44,690
syntax and by shell and then like you

00:45:42,680 --> 00:45:48,080
know return that or something like that

00:45:44,690 --> 00:45:50,540
um you can also like capture the output

00:45:48,080 --> 00:45:51,950
and if there's for some commands if

00:45:50,540 --> 00:45:53,540
there's any output at all you want to

00:45:51,950 --> 00:45:55,550
fail because that means messages came

00:45:53,540 --> 00:46:01,609
out and so you can capture the output

00:45:55,550 --> 00:46:02,510
and that kind of stuff yes so the

00:46:01,609 --> 00:46:05,960
question was can you set up custom

00:46:02,510 --> 00:46:08,900
graphs for them grab you can set up

00:46:05,960 --> 00:46:11,000
custom grabs so as the shell commands

00:46:08,900 --> 00:46:11,190
get more complicated than drush cron and

00:46:11,000 --> 00:46:13,020
they

00:46:11,190 --> 00:46:14,520
as they get past like the five lines a

00:46:13,020 --> 00:46:16,410
little window if you find yourself

00:46:14,520 --> 00:46:18,750
expanding that text window making it

00:46:16,410 --> 00:46:21,270
bigger it's probably time to stop and

00:46:18,750 --> 00:46:23,700
write a dedicated Python or PHP script

00:46:21,270 --> 00:46:25,380
whatever your basic whatever your sis

00:46:23,700 --> 00:46:27,119
admin script is put that script in the

00:46:25,380 --> 00:46:29,069
right place and make sure that script

00:46:27,119 --> 00:46:30,450
returns the right thing and then just

00:46:29,069 --> 00:46:32,900
call that script in one line from there

00:46:30,450 --> 00:46:35,790
and that's that's the way most people

00:46:32,900 --> 00:46:37,020
evolve in their setup so usually what

00:46:35,790 --> 00:46:38,910
happens their jobs get bigger and bigger

00:46:37,020 --> 00:46:40,440
at some point to your eyes I really hate

00:46:38,910 --> 00:46:41,700
editing in this thing it doesn't match

00:46:40,440 --> 00:46:43,530
curly brackets or whatever i have this

00:46:41,700 --> 00:46:45,180
complicates shell command and then the

00:46:43,530 --> 00:46:47,579
epiphany comes on i'll cut this and put

00:46:45,180 --> 00:46:50,160
it in a file and then just call it from

00:46:47,579 --> 00:47:04,290
here and that's that that's that's

00:46:50,160 --> 00:47:05,460
probably the best way to go yeah so so

00:47:04,290 --> 00:47:06,930
so the question is I suppose you're not

00:47:05,460 --> 00:47:09,630
a one-man shop you have ten programmers

00:47:06,930 --> 00:47:12,420
you know who does the set up and do just

00:47:09,630 --> 00:47:13,950
let programmers jump on here and be

00:47:12,420 --> 00:47:17,490
creating jobs that run on production or

00:47:13,950 --> 00:47:19,560
how do you how do you do that the answer

00:47:17,490 --> 00:47:22,800
is there there's a lot of different ways

00:47:19,560 --> 00:47:24,810
to do it as you might imagine Jenkins

00:47:22,800 --> 00:47:26,390
has ways to organize things into tabs

00:47:24,810 --> 00:47:30,359
and give people only specific

00:47:26,390 --> 00:47:32,130
permissions so just as drush just as

00:47:30,359 --> 00:47:35,099
Drupal develop this ridiculous

00:47:32,130 --> 00:47:37,140
permissions page that we all hate if you

00:47:35,099 --> 00:47:40,920
go and you do the managed by project

00:47:37,140 --> 00:47:43,319
matrix option in Jenkins it'll give you

00:47:40,920 --> 00:47:45,329
a list of all the jobs a list of all the

00:47:43,319 --> 00:47:47,670
people and then you can check whether

00:47:45,329 --> 00:47:49,140
they can build it whether they can see

00:47:47,670 --> 00:47:51,569
the build results in addition to running

00:47:49,140 --> 00:47:53,880
it whether they can edit the job and so

00:47:51,569 --> 00:47:55,920
on and typically people do something a

00:47:53,880 --> 00:47:57,359
little more restricted than that they

00:47:55,920 --> 00:48:00,720
have like a bunch of development machine

00:47:57,359 --> 00:48:04,920
jobs and usually developers can do any

00:48:00,720 --> 00:48:06,660
anything there and then there's either

00:48:04,920 --> 00:48:08,579
an entire separate Jenkins installation

00:48:06,660 --> 00:48:12,800
or a separate class of jobs that wrote

00:48:08,579 --> 00:48:15,930
on production and usually that's more of

00:48:12,800 --> 00:48:20,220
you know the most white haired person

00:48:15,930 --> 00:48:22,470
there oh it is is is kind of is kind of

00:48:20,220 --> 00:48:24,810
managing that but I would advise that

00:48:22,470 --> 00:48:27,390
you make it so everyone

00:48:24,810 --> 00:48:30,870
see the jobs said both they can see the

00:48:27,390 --> 00:48:32,400
script in some way like even if they you

00:48:30,870 --> 00:48:34,290
have an rsync that copies the config.xml

00:48:32,400 --> 00:48:35,520
somewhere or something right because

00:48:34,290 --> 00:48:36,750
sometimes you're trying to debug

00:48:35,520 --> 00:48:38,430
something you don't realize that hey we

00:48:36,750 --> 00:48:39,960
updated these jobs on staging to do

00:48:38,430 --> 00:48:42,270
something right it never happened on

00:48:39,960 --> 00:48:44,280
production I understand what's going on

00:48:42,270 --> 00:48:47,610
you also want the developers to be able

00:48:44,280 --> 00:48:49,260
to see the history of the jobs in really

00:48:47,610 --> 00:48:51,510
big websites a lot of times things start

00:48:49,260 --> 00:48:53,340
taking longer and longer as like

00:48:51,510 --> 00:48:54,330
databases grow bigger or whatever and

00:48:53,340 --> 00:48:55,620
you want to kind of push that

00:48:54,330 --> 00:48:57,060
information as far down the chain as

00:48:55,620 --> 00:49:01,110
possible so people can realize you know

00:48:57,060 --> 00:49:02,520
hey ever since I did X you know cron is

00:49:01,110 --> 00:49:04,050
taking ten minutes instead of five

00:49:02,520 --> 00:49:08,630
seconds you know maybe I should think

00:49:04,050 --> 00:49:11,690
about that or something like that so

00:49:08,630 --> 00:49:19,620
let's just hit a couple more of these

00:49:11,690 --> 00:49:22,560
jobs this one backs up the the vhosts

00:49:19,620 --> 00:49:25,710
the file installs on a particular

00:49:22,560 --> 00:49:27,480
machine one thing I didn't point out on

00:49:25,710 --> 00:49:30,420
the other one this one else has to

00:49:27,480 --> 00:49:32,610
discard builds this one has this

00:49:30,420 --> 00:49:35,070
restrict where this project can be run

00:49:32,610 --> 00:49:38,040
and we were talking about workers and so

00:49:35,070 --> 00:49:40,650
on what I did is in the manage Dinkins i

00:49:38,040 --> 00:49:43,350
created a worker and i gave it a name

00:49:40,650 --> 00:49:46,620
and i said to do this work are you ssh

00:49:43,350 --> 00:49:49,670
to this machine with this key and set

00:49:46,620 --> 00:49:52,950
that up and what that is telling on

00:49:49,670 --> 00:49:56,100
jenkins here is that when it runs this

00:49:52,950 --> 00:49:57,960
job it should run it there right and you

00:49:56,100 --> 00:49:59,340
can set a set a job so it can run

00:49:57,960 --> 00:50:00,990
anywhere so like if it was like a

00:49:59,340 --> 00:50:04,050
generic processing type thing it's like

00:50:00,990 --> 00:50:05,580
grab the least busy machine gene kids is

00:50:04,050 --> 00:50:07,230
set up to do that kind of stuff but

00:50:05,580 --> 00:50:08,640
that's kind of not what we usually use

00:50:07,230 --> 00:50:10,590
it for and DevOps type stuff usually

00:50:08,640 --> 00:50:14,820
there's a particular machine you want to

00:50:10,590 --> 00:50:17,070
run something on and in the way that

00:50:14,820 --> 00:50:18,870
that you would probably set it up for

00:50:17,070 --> 00:50:20,580
yourself initially you would not

00:50:18,870 --> 00:50:23,640
restrict that thing at all and it would

00:50:20,580 --> 00:50:26,730
always run on your your laptop and then

00:50:23,640 --> 00:50:30,750
once you set up and say Stage or dev

00:50:26,730 --> 00:50:32,400
then you could put those in there the

00:50:30,750 --> 00:50:34,710
first step that I would do in setting up

00:50:32,400 --> 00:50:36,840
workers is usually people have a server

00:50:34,710 --> 00:50:37,880
and their stage is kind of a different V

00:50:36,840 --> 00:50:40,250
host on the same sir

00:50:37,880 --> 00:50:44,300
as production and you can just create

00:50:40,250 --> 00:50:45,740
two workers and then just that later in

00:50:44,300 --> 00:50:47,810
case you split it apart but have them

00:50:45,740 --> 00:50:52,640
point to the same machine and run stuff

00:50:47,810 --> 00:50:55,760
that way um so let's just look at the

00:50:52,640 --> 00:51:00,590
script this one's build periodically not

00:50:55,760 --> 00:51:03,440
triggered and as you can see it's just a

00:51:00,590 --> 00:51:06,230
simple little CD to somewhere make a tar

00:51:03,440 --> 00:51:07,340
file type backup and usually if it gets

00:51:06,230 --> 00:51:09,650
much bigger than this and you really

00:51:07,340 --> 00:51:12,200
should be doing something else you could

00:51:09,650 --> 00:51:15,320
also trigger a more sophisticated backup

00:51:12,200 --> 00:51:17,300
system from here and that last line on

00:51:15,320 --> 00:51:18,440
there are that fine command let's write

00:51:17,300 --> 00:51:21,200
delete all the backups that are older

00:51:18,440 --> 00:51:32,320
than 10 days so I don't keep filling up

00:51:21,200 --> 00:51:36,290
the disk um where are we on time okay

00:51:32,320 --> 00:51:38,000
I'm going to skip the mice goal backup

00:51:36,290 --> 00:51:42,250
thing that just does of my skull dump

00:51:38,000 --> 00:51:45,650
it's pretty much the same i'm going to

00:51:42,250 --> 00:51:49,100
i'm going to skip this one that's the

00:51:45,650 --> 00:51:52,490
first step in that chain what this does

00:51:49,100 --> 00:51:54,950
is it ssh is to production does a dump

00:51:52,490 --> 00:51:56,810
of the database and it copies it to a

00:51:54,950 --> 00:51:58,850
particular temp directory so that

00:51:56,810 --> 00:52:01,820
developers can reload their database and

00:51:58,850 --> 00:52:03,770
start from a clean stage and it's it's

00:52:01,820 --> 00:52:04,880
pretty simple and it actually should be

00:52:03,770 --> 00:52:09,410
more sophisticated because it should

00:52:04,880 --> 00:52:11,630
sanitize everything these two jobs are

00:52:09,410 --> 00:52:14,440
almost the same the main thing is that

00:52:11,630 --> 00:52:19,130
this one you have to click on to run and

00:52:14,440 --> 00:52:23,680
this one you this deploy stage runs

00:52:19,130 --> 00:52:23,680
automatically so let's look at that one

00:52:26,890 --> 00:52:33,880
and the gain I am careful to discard the

00:52:31,029 --> 00:52:37,210
old builds and this one is hooked up to

00:52:33,880 --> 00:52:38,890
a github project which is just has the

00:52:37,210 --> 00:52:41,260
Drupal that runs the press float org

00:52:38,890 --> 00:52:44,440
site which is the simple as Drupal ever

00:52:41,260 --> 00:52:47,619
it's a spice page kind of massive

00:52:44,440 --> 00:52:49,690
overkill but um that press flow was the

00:52:47,619 --> 00:52:53,079
worker I set up to go to the press flow

00:52:49,690 --> 00:52:55,059
production machine and it's giving that

00:52:53,079 --> 00:52:57,190
error of course because in this setup I

00:52:55,059 --> 00:52:58,750
just made I never made the workers and I

00:52:57,190 --> 00:53:00,700
didn't want to because I'm kind of

00:52:58,750 --> 00:53:02,170
scared of doing something where my

00:53:00,700 --> 00:53:03,849
laptop accidentally click connect

00:53:02,170 --> 00:53:05,980
somewhere and does something I haven't

00:53:03,849 --> 00:53:07,000
this is all key bays passwords let's

00:53:05,980 --> 00:53:10,980
login so it'd be hard to do that

00:53:07,000 --> 00:53:10,980
accidentally but I still don't want to

00:53:11,910 --> 00:53:17,880
there's the source code management and

00:53:14,500 --> 00:53:21,130
the get and the repository there and

00:53:17,880 --> 00:53:25,480
this branch specifier with star star

00:53:21,130 --> 00:53:29,619
just means master and this is set up to

00:53:25,480 --> 00:53:31,059
pull the get every minute it has a

00:53:29,619 --> 00:53:33,940
warning there to try to get you to not

00:53:31,059 --> 00:53:37,119
pull it every minute and actually right

00:53:33,940 --> 00:53:39,160
now on live it's it's set up more to to

00:53:37,119 --> 00:53:40,839
pull like every hour or something but I

00:53:39,160 --> 00:53:42,130
it was sent like this when I copied them

00:53:40,839 --> 00:53:45,309
because someone was in the middle of

00:53:42,130 --> 00:53:48,809
development and doing stuff and then

00:53:45,309 --> 00:53:52,180
there's a shell command that essentially

00:53:48,809 --> 00:53:54,460
updates that server right so it does get

00:53:52,180 --> 00:53:56,259
sub-module and it gets some module

00:53:54,460 --> 00:53:57,849
update because we're using get sub

00:53:56,259 --> 00:53:59,079
modules on this project which I think we

00:53:57,849 --> 00:54:00,970
got frustrated with and quit on all our

00:53:59,079 --> 00:54:03,910
other projects and then it does the

00:54:00,970 --> 00:54:07,059
update DB dash Y and the dash Y means

00:54:03,910 --> 00:54:07,750
that when it asked you for yes no are

00:54:07,059 --> 00:54:10,089
you sure it's going to do it

00:54:07,750 --> 00:54:12,599
automatically so that runs and then it

00:54:10,089 --> 00:54:14,859
has a notifier if it fails to run and so

00:54:12,599 --> 00:54:16,960
with all of these things the main point

00:54:14,859 --> 00:54:19,509
is that there's just a few key lines in

00:54:16,960 --> 00:54:21,130
here but you never forget one of them

00:54:19,509 --> 00:54:22,869
because you've put them in one place and

00:54:21,130 --> 00:54:24,970
now it's automated I'm getting really

00:54:22,869 --> 00:54:28,809
close to the end here so I'm going to

00:54:24,970 --> 00:54:31,299
jump back and I'm going to go through my

00:54:28,809 --> 00:54:36,400
slides I'm gonna go through them really

00:54:31,299 --> 00:54:40,330
really fast because I think I think for

00:54:36,400 --> 00:54:44,540
this audience um people probably

00:54:40,330 --> 00:54:46,130
grasp all the all the basics so there's

00:54:44,540 --> 00:54:47,900
the point about this flow requiring

00:54:46,130 --> 00:54:48,980
features and update hooks and so on and

00:54:47,900 --> 00:54:50,480
trying to get everything into code as

00:54:48,980 --> 00:54:54,650
much as possible I think that's a

00:54:50,480 --> 00:54:56,270
something people have figured out I have

00:54:54,650 --> 00:54:58,640
this thing about why you should use rush

00:54:56,270 --> 00:55:00,020
cron instead of drush in addition to the

00:54:58,640 --> 00:55:01,760
error messages you can also give it a

00:55:00,020 --> 00:55:04,460
lot more RAM if you actually have to

00:55:01,760 --> 00:55:07,070
have it do some serious processing and

00:55:04,460 --> 00:55:12,770
then keep the PHP limitations on your

00:55:07,070 --> 00:55:14,720
Apache low for most audiences that do

00:55:12,770 --> 00:55:15,740
this I do a poll of the audience asked

00:55:14,720 --> 00:55:17,630
how many people are backing up their

00:55:15,740 --> 00:55:19,610
website right now and a lot of them

00:55:17,630 --> 00:55:22,840
aren't and I going a little rant about

00:55:19,610 --> 00:55:25,460
how they should do backups and and

00:55:22,840 --> 00:55:28,130
that's pretty much it my main point here

00:55:25,460 --> 00:55:31,370
is that you can install Jenkins and get

00:55:28,130 --> 00:55:32,990
a payoff of it without you know having

00:55:31,370 --> 00:55:35,300
to spend all week on it or lose money on

00:55:32,990 --> 00:55:36,890
it and you will save time and will make

00:55:35,300 --> 00:55:38,810
you look you know more professional

00:55:36,890 --> 00:55:42,740
you'll screw up less it'll make your

00:55:38,810 --> 00:55:44,360
life better if you need examples of

00:55:42,740 --> 00:55:47,150
those jobs or maybe you want some other

00:55:44,360 --> 00:55:48,860
jobs that are more complicated you want

00:55:47,150 --> 00:55:50,750
to know if maybe I've set some up at

00:55:48,860 --> 00:55:53,360
four kitchens I could send to you just

00:55:50,750 --> 00:55:57,980
some email and I also want the end with

00:55:53,360 --> 00:55:59,870
a plug for that bit ly URL goes to the

00:55:57,980 --> 00:56:03,830
online web forum survey for the drupal

00:55:59,870 --> 00:56:04,940
camp and you know sometime before you go

00:56:03,830 --> 00:56:09,080
home and forget it you should do that

00:56:04,940 --> 00:56:12,940
maybe towards into camp and maybe we

00:56:09,080 --> 00:56:12,940
have time for one question

00:56:21,369 --> 00:56:25,760
that's a great question he says best

00:56:23,780 --> 00:56:27,980
practices you have dev prod stage where

00:56:25,760 --> 00:56:29,660
does the Jenkins server live on a very

00:56:27,980 --> 00:56:31,339
small setup usually stick it somewhere

00:56:29,660 --> 00:56:34,010
like on stage or somewhere convenient

00:56:31,339 --> 00:56:36,260
the main key is it has to be where it

00:56:34,010 --> 00:56:38,089
can ssh to all the other machines right

00:56:36,260 --> 00:56:41,000
so you can't sometimes it can't be

00:56:38,089 --> 00:56:42,380
inside a land or sometimes you have to

00:56:41,000 --> 00:56:44,300
have another Jenkins inside of land

00:56:42,380 --> 00:56:45,230
because their backup machines you don't

00:56:44,300 --> 00:56:47,180
want to be able to get to from the

00:56:45,230 --> 00:56:48,589
outside and it has to go from the

00:56:47,180 --> 00:56:50,150
outside grab your backups from the cloud

00:56:48,589 --> 00:56:52,010
bring them back which is way so I

00:56:50,150 --> 00:56:54,369
actually have to Jenkins running you

00:56:52,010 --> 00:56:57,730
know at four kitchens once I went out

00:56:54,369 --> 00:57:01,010
you can you can run it on your laptop

00:56:57,730 --> 00:57:03,260
eventually most people because of

00:57:01,010 --> 00:57:05,329
security concerns and so on if your if

00:57:03,260 --> 00:57:06,890
your setup gets very big at all you have

00:57:05,329 --> 00:57:09,829
a separate server maybe it's the same

00:57:06,890 --> 00:57:11,119
server where you have your jira and and

00:57:09,829 --> 00:57:13,160
other stuff running or your read mine

00:57:11,119 --> 00:57:16,730
and you put Jenkins on that and it's

00:57:13,160 --> 00:57:18,079
sort of out of the chain of things you

00:57:16,730 --> 00:57:20,329
have to realize that if the Jenkins

00:57:18,079 --> 00:57:22,069
server gets hacked by somebody it has

00:57:20,329 --> 00:57:25,609
keys that allow it to login as user

00:57:22,069 --> 00:57:26,780
bender on all your machines and so you

00:57:25,609 --> 00:57:30,290
do have to keep that in mind from a

00:57:26,780 --> 00:57:33,079
security point of view and I think

00:57:30,290 --> 00:57:36,890
that's it I'll be around for the rest of

00:57:33,079 --> 00:57:38,390
camp obviously so um ask me anything and

00:57:36,890 --> 00:57:40,730
I have these slides already on the

00:57:38,390 --> 00:57:45,700
drupal camp charlotte website so you can

00:57:40,730 --> 00:57:48,700
download the PDF or the ODP so anyway

00:57:45,700 --> 00:57:48,700
thanks

00:58:28,130 --> 00:58:34,610
how's that sigh every way this is the

00:58:31,310 --> 00:58:36,800
way to better utilize all your resources

00:58:34,610 --> 00:58:40,250
and it makes managing all your resources

00:58:36,800 --> 00:58:44,080
pretty easy all of the innovation is

00:58:40,250 --> 00:58:47,570
happening in open source the

00:58:44,080 --> 00:58:49,400
collaborative nature and of the you know

00:58:47,570 --> 00:58:51,500
of the community and the speed at which

00:58:49,400 --> 00:58:53,480
these are these you know these these

00:58:51,500 --> 00:58:55,760
deficiencies these bugs are getting

00:58:53,480 --> 00:58:58,640
discovered and then fixed is it i think

00:58:55,760 --> 00:59:01,640
that really shows the power of the of

00:58:58,640 --> 00:59:04,090
the open source community it is global

00:59:01,640 --> 00:59:07,640
and it's definitely because of the users

00:59:04,090 --> 00:59:13,280
community people are extremely friendly

00:59:07,640 --> 00:59:15,170
and they're always ready to help if you

00:59:13,280 --> 00:59:17,450
go on tire see any day you'll see these

00:59:15,170 --> 00:59:19,180
guys helping each other out and they're

00:59:17,450 --> 00:59:21,890
all doing it like in a selfless manner

00:59:19,180 --> 00:59:24,880
the product is transparent for everyone

00:59:21,890 --> 00:59:28,070
everyone can look at the code base

00:59:24,880 --> 00:59:30,310
everyone can see how close dark is being

00:59:28,070 --> 00:59:35,810
built nothing nothing is proprietary

00:59:30,310 --> 00:59:38,510
everything is open in many ways it's

00:59:35,810 --> 00:59:42,890
absolutely vital to the the ongoing

00:59:38,510 --> 00:59:47,090
health cloudstack the most exciting

00:59:42,890 --> 00:59:49,950
event in recent memory for me was our

00:59:47,090 --> 00:59:52,589
first developer boot camp

00:59:49,950 --> 00:59:55,230
and our call gave people I gave you two

00:59:52,589 --> 00:59:59,190
weeks notice to come attend I was

00:59:55,230 --> 01:00:03,359
expecting 25 or 30 people so we ended up

00:59:59,190 --> 01:00:06,180
with 87 people and had to go get more

01:00:03,359 --> 01:00:08,730
chairs in the room twice everything

01:00:06,180 --> 01:00:12,060
within cloud computing is commodity and

01:00:08,730 --> 01:00:15,030
is open source and so I don't think that

01:00:12,060 --> 01:00:16,800
you will you'll see anywhere where open

01:00:15,030 --> 01:00:19,829
source is not pervasive in cloud

01:00:16,800 --> 01:00:22,380
computing and so i think it's i think

01:00:19,829 --> 01:00:23,910
it's an assumption i think when you talk

01:00:22,380 --> 01:00:27,619
about cloud computing you're really

01:00:23,910 --> 01:00:27,619
talking about a source cloud computing

01:00:27,890 --> 01:00:33,960
cloud sac is a robust solution for large

01:00:31,200 --> 01:00:36,329
deployments you'll have dozens of data

01:00:33,960 --> 01:00:40,380
centers and thousands of servers in each

01:00:36,329 --> 01:00:43,619
data centers these hardware is going to

01:00:40,380 --> 01:00:46,859
fail and CloudStack is designed to

01:00:43,619 --> 01:00:49,320
handle number one that mass scale number

01:00:46,859 --> 01:00:52,050
two it's designed to handle the failure

01:00:49,320 --> 01:00:54,930
that inevitably happens in large

01:00:52,050 --> 01:00:59,099
deployments started working on contact

01:00:54,930 --> 01:01:02,400
over four years ago and it was the

01:00:59,099 --> 01:01:04,170
original set of people working on it had

01:01:02,400 --> 01:01:08,250
a background of delivering software

01:01:04,170 --> 01:01:12,510
telcos and service providers lots of QA

01:01:08,250 --> 01:01:16,109
lots of users actually using it high

01:01:12,510 --> 01:01:19,200
availability is a key feature multiple

01:01:16,109 --> 01:01:21,359
hypervisors support different network

01:01:19,200 --> 01:01:24,390
models we can pick up whatever suits you

01:01:21,359 --> 01:01:26,160
better while step management server can

01:01:24,390 --> 01:01:29,849
be deployed in different physical

01:01:26,160 --> 01:01:31,500
machines it definitely has a huge

01:01:29,849 --> 01:01:36,480
footprint it's being deployed everywhere

01:01:31,500 --> 01:01:39,060
there's a major movie studio that they

01:01:36,480 --> 01:01:42,359
were using cloudstack they were using it

01:01:39,060 --> 01:01:44,339
to transcode video and i thought that

01:01:42,359 --> 01:01:45,990
was terribly fascinating what i found

01:01:44,339 --> 01:01:49,260
more fascinating is what they did during

01:01:45,990 --> 01:01:52,050
lunch where they would spin up you know

01:01:49,260 --> 01:01:53,220
50 or 60 game servers then as soon as

01:01:52,050 --> 01:01:55,050
lunch was over they would

01:01:53,220 --> 01:01:59,310
all the instances and go back to doing

01:01:55,050 --> 01:02:00,810
real work CloudStack is vast it touches

01:01:59,310 --> 01:02:02,880
so many different aspects and there's no

01:02:00,810 --> 01:02:05,280
one person that's kind of like a master

01:02:02,880 --> 01:02:09,390
of all those realms I think clouds stack

01:02:05,280 --> 01:02:11,700
as a project is going to be one of the

01:02:09,390 --> 01:02:15,660
leaders simply because it's some of the

01:02:11,700 --> 01:02:21,090
most feature fallen and and robust

01:02:15,660 --> 01:02:23,990
platforms out they learn Adam senior

01:02:21,090 --> 01:02:23,990
living through the clouds dag

01:02:36,780 --> 01:02:38,840
you

01:02:42,180 --> 01:02:46,990
when we created asterisk over a decade

01:02:44,920 --> 01:02:49,210
ago we could not have imagined that

01:02:46,990 --> 01:02:51,430
asterisk would not only become the most

01:02:49,210 --> 01:02:53,560
widely adopted open source communication

01:02:51,430 --> 01:02:55,600
software on the planet but that it would

01:02:53,560 --> 01:02:58,120
impact the entire industry in the way

01:02:55,600 --> 01:03:00,100
that it has today asterisk has found its

01:02:58,120 --> 01:03:02,740
way in the more than 170 countries and

01:03:00,100 --> 01:03:04,690
virtually every fortune 1000 company the

01:03:02,740 --> 01:03:06,760
success of asterisk has enabled a

01:03:04,690 --> 01:03:08,170
transition of power from the hands of

01:03:06,760 --> 01:03:10,450
the traditional proprietary phone

01:03:08,170 --> 01:03:12,850
vendors into the hands of the users and

01:03:10,450 --> 01:03:14,800
administrators of phone systems using

01:03:12,850 --> 01:03:16,030
this power our customers have created

01:03:14,800 --> 01:03:17,950
all sorts of business changing

01:03:16,030 --> 01:03:19,810
applications from small office phone

01:03:17,950 --> 01:03:22,330
systems to mission-critical call centers

01:03:19,810 --> 01:03:23,920
the international carrier networks in

01:03:22,330 --> 01:03:25,720
fact there's even an entire country

01:03:23,920 --> 01:03:28,090
those communications infrastructure runs

01:03:25,720 --> 01:03:30,250
on esters the gym has always been about

01:03:28,090 --> 01:03:31,960
creating technology that expands

01:03:30,250 --> 01:03:34,120
communications capabilities in ways that

01:03:31,960 --> 01:03:35,320
we could never have imagined and that's

01:03:34,120 --> 01:03:37,720
part of what's game-changing about

01:03:35,320 --> 01:03:40,390
Digium today we're doing it again this

01:03:37,720 --> 01:03:42,490
time by introducing a new family of HD

01:03:40,390 --> 01:03:44,620
IP phones that extends control of the

01:03:42,490 --> 01:03:46,360
user all the way to the desktop the

01:03:44,620 --> 01:03:48,070
launch of these new products represents

01:03:46,360 --> 01:03:50,080
the next phase indigenous history of

01:03:48,070 --> 01:03:52,570
innovation these are the first and only

01:03:50,080 --> 01:03:53,920
IP phones designed to fully leverage the

01:03:52,570 --> 01:03:55,600
power of esther's when we first

01:03:53,920 --> 01:03:57,250
discussed our expectations for building

01:03:55,600 --> 01:03:59,860
a family of phones for use with asterisk

01:03:57,250 --> 01:04:01,630
our requirements were pretty simple we

01:03:59,860 --> 01:04:03,400
asked the team to build the phones such

01:04:01,630 --> 01:04:05,590
that they were easy to install integrate

01:04:03,400 --> 01:04:07,450
provision and use I think you'll soon

01:04:05,590 --> 01:04:10,000
agree our engineers have delivered on

01:04:07,450 --> 01:04:11,650
that goal user feedback is validating

01:04:10,000 --> 01:04:13,750
that when it comes to operation with

01:04:11,650 --> 01:04:16,180
astro space systems including our own

01:04:13,750 --> 01:04:18,760
Switchvox based product these are the

01:04:16,180 --> 01:04:20,050
easiest to use best integrated most

01:04:18,760 --> 01:04:22,660
interoperable products on the market

01:04:20,050 --> 01:04:24,630
today the Digium family of phones will

01:04:22,660 --> 01:04:26,740
initially include three IP des hommes

01:04:24,630 --> 01:04:28,630
uniquely designed to complement any

01:04:26,740 --> 01:04:30,520
asterisk or switch box based solution

01:04:28,630 --> 01:04:33,190
these phones are different for a number

01:04:30,520 --> 01:04:35,830
of reasons first there is clue sively

01:04:33,190 --> 01:04:37,270
designed for use with esters secondly

01:04:35,830 --> 01:04:38,880
we've made it really easy to

01:04:37,270 --> 01:04:41,260
autodiscover and provision the phones

01:04:38,880 --> 01:04:42,940
next we've made it easy for the phones

01:04:41,260 --> 01:04:44,920
to access information inside of

01:04:42,940 --> 01:04:46,920
asterisks allowing tight coupling

01:04:44,920 --> 01:04:48,880
between the application and the phone

01:04:46,920 --> 01:04:51,040
additionally we've created an

01:04:48,880 --> 01:04:53,170
applications engineer that allows users

01:04:51,040 --> 01:04:56,380
and developers to create and run their

01:04:53,170 --> 01:04:58,180
own apps on the phone and finally we've

01:04:56,380 --> 01:05:00,130
done all of this at a very compelling

01:04:58,180 --> 01:05:01,810
price point at Digium we're always

01:05:00,130 --> 01:05:03,910
thinking of ways to give our customers

01:05:01,810 --> 01:05:06,460
the best value in business phone systems

01:05:03,910 --> 01:05:08,020
and also give them the power to create

01:05:06,460 --> 01:05:10,150
their own solutions or any

01:05:08,020 --> 01:05:11,890
communications challenge well continue

01:05:10,150 --> 01:05:13,300
to push the boundaries not only to make

01:05:11,890 --> 01:05:15,370
Astra's cooler faster and more

01:05:13,300 --> 01:05:16,990
technologically feature-rich but to make

01:05:15,370 --> 01:05:19,450
asterisk and what communications even

01:05:16,990 --> 01:05:22,590
easier and together we'll change the way

01:05:19,450 --> 01:05:22,590

YouTube URL: https://www.youtube.com/watch?v=-R9nxeUfDNY


