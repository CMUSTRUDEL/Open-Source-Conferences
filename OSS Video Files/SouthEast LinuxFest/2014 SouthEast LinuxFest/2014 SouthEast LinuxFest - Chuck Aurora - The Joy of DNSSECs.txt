Title: 2014 SouthEast LinuxFest - Chuck Aurora - The Joy of DNSSECs
Publication date: 2015-05-14
Playlist: 2014 SouthEast LinuxFest
Description: 
	2014 SouthEast LinuxFest
Chuck Aurora
The Joy of DNSSECs
Captions: 
	00:00:00,000 --> 00:00:05,339
the following presentation was recorded

00:00:02,490 --> 00:00:08,189
the 2014 southeast linux fest in

00:00:05,339 --> 00:00:11,070
charlotte north carolina it is licensed

00:00:08,189 --> 00:00:15,150
under a creative commons license for

00:00:11,070 --> 00:00:18,330
more information visit www.fcn expense

00:00:15,150 --> 00:00:20,310
org the southeast linux fest would like

00:00:18,330 --> 00:00:22,859
to thank the following diamond sponsors

00:00:20,310 --> 00:00:25,560
in 2014 for helping make these videos

00:00:22,859 --> 00:00:29,369
possible my name is Chuck Aurora I am a

00:00:25,560 --> 00:00:33,510
software support engineer for ISC org

00:00:29,369 --> 00:00:37,140
and the talk this morning is on the joy

00:00:33,510 --> 00:00:41,070
of DNS sex which is what they should

00:00:37,140 --> 00:00:44,250
have named it but oh well or how i

00:00:41,070 --> 00:00:46,559
learned to stop worrying and i am

00:00:44,250 --> 00:00:54,270
getting email notifications that i don't

00:00:46,559 --> 00:00:57,980
really want to see right now yeah here

00:00:54,270 --> 00:00:57,980
we go there's some little

00:00:58,460 --> 00:01:11,030
there goes Hogan okay where are we at

00:01:03,519 --> 00:01:12,680
all right let's move on first thing I

00:01:11,030 --> 00:01:17,229
wanted to start out is find out a little

00:01:12,680 --> 00:01:20,030
bit about who I'm talking to here I

00:01:17,229 --> 00:01:23,420
didn't expect such a large crowd on

00:01:20,030 --> 00:01:28,399
Friday morning everybody got off work I

00:01:23,420 --> 00:01:31,429
guess but um quick show of hands who

00:01:28,399 --> 00:01:36,679
knows anything about DNS I mean what it

00:01:31,429 --> 00:01:38,929
is all right everybody everybody good is

00:01:36,679 --> 00:01:44,270
anybody here familiar with ISC the

00:01:38,929 --> 00:01:46,940
internet systems consortium good who can

00:01:44,270 --> 00:01:49,429
who knows what DNS SEC is in a nutshell

00:01:46,940 --> 00:01:59,780
just one person you just somebody holler

00:01:49,429 --> 00:02:02,630
out a nutshell definition exactly thank

00:01:59,780 --> 00:02:08,530
you all right do we have anyone here

00:02:02,630 --> 00:02:11,540
that owns their own domain Wow good deal

00:02:08,530 --> 00:02:16,160
now anyone here that runs their own name

00:02:11,540 --> 00:02:21,130
server oh good deal any of these are

00:02:16,160 --> 00:02:24,920
bind or some other implementation bind

00:02:21,130 --> 00:02:30,400
others okay now we got nothing against

00:02:24,920 --> 00:02:33,920
the others now who is running a

00:02:30,400 --> 00:02:36,829
recursive server for resolving names

00:02:33,920 --> 00:02:41,720
okay and who's running an authoritative

00:02:36,829 --> 00:02:44,230
server for serving all right in some

00:02:41,720 --> 00:02:46,700
cases it is and bind is the only

00:02:44,230 --> 00:02:50,000
implementation that will do both which

00:02:46,700 --> 00:02:55,640
by the way we don't recommend but it can

00:02:50,000 --> 00:02:59,090
be done all right good crowd about me I

00:02:55,640 --> 00:03:02,060
am a support engineer at ISC publishers

00:02:59,090 --> 00:03:05,750
a bind nine which I guess you've heard

00:03:02,060 --> 00:03:08,329
about open source dns server I've been

00:03:05,750 --> 00:03:12,549
there since 2013 that's not very long

00:03:08,329 --> 00:03:12,549
but it's been a great

00:03:12,990 --> 00:03:17,170
it's been a great six months I really

00:03:15,670 --> 00:03:23,080
enjoy it this is what I want to do when

00:03:17,170 --> 00:03:25,360
I grow up if I do ever grow up someone

00:03:23,080 --> 00:03:29,620
who looks a lot like me has been seen at

00:03:25,360 --> 00:03:31,570
these self conferences before but going

00:03:29,620 --> 00:03:33,700
under some different names so I don't

00:03:31,570 --> 00:03:38,110
know but anyway there's a rumor that I'm

00:03:33,700 --> 00:03:44,050
affiliated with slack builds org and yes

00:03:38,110 --> 00:03:45,970
that makes me a man of mystery my family

00:03:44,050 --> 00:03:50,110
is here by the way hey you were supposed

00:03:45,970 --> 00:03:53,200
to introduce me oh you don't have a

00:03:50,110 --> 00:03:54,760
microphone okay all right well I guess

00:03:53,200 --> 00:03:56,080
he got away with that that's my son back

00:03:54,760 --> 00:04:04,720
there on the camera and my other son

00:03:56,080 --> 00:04:15,730
back there and my wife and daughter over

00:04:04,720 --> 00:04:18,100
here okay and there's Alan Hicks all

00:04:15,730 --> 00:04:20,140
right okay I'm just going to do a quick

00:04:18,100 --> 00:04:22,780
little overview of what we're going to

00:04:20,140 --> 00:04:24,970
cover in this talk and by the way i just

00:04:22,780 --> 00:04:27,010
finished what I didn't actually finish

00:04:24,970 --> 00:04:29,740
but i just got done with as much as i

00:04:27,010 --> 00:04:32,470
could get done before walking in the

00:04:29,740 --> 00:04:35,290
door if it wasn't for last minutes i

00:04:32,470 --> 00:04:36,250
don't think i'd get anything done anyway

00:04:35,290 --> 00:04:40,720
we're going to do a quick little

00:04:36,250 --> 00:04:43,780
overview of of what how a DNS system

00:04:40,720 --> 00:04:45,730
works which I'm gathering most of you

00:04:43,780 --> 00:04:47,440
were this is going to be old hat for you

00:04:45,730 --> 00:04:49,320
it's not going to be very interesting

00:04:47,440 --> 00:04:51,310
we'll just buzzed through that quickly

00:04:49,320 --> 00:04:56,290
we're going to talk about the need for

00:04:51,310 --> 00:04:59,170
DNS SEC and we're going to split it I

00:04:56,290 --> 00:05:02,590
said DNS sex in the title there's two

00:04:59,170 --> 00:05:05,470
different forms that it takes there's

00:05:02,590 --> 00:05:09,700
the validation and there is the

00:05:05,470 --> 00:05:13,290
publishing the signing how you go about

00:05:09,700 --> 00:05:15,640
it is pretty simple in both cases but

00:05:13,290 --> 00:05:20,370
we're going to we're going to split that

00:05:15,640 --> 00:05:20,370
in half so we'll cover each separately

00:05:20,770 --> 00:05:24,830
references did I put references in there

00:05:22,910 --> 00:05:27,590
I actually had help making these slides

00:05:24,830 --> 00:05:33,470
by the way and we'll have a summary at

00:05:27,590 --> 00:05:36,830
the end all right now first we're going

00:05:33,470 --> 00:05:39,470
to do the quick little overview of how

00:05:36,830 --> 00:05:45,020
name resolution works you're going to

00:05:39,470 --> 00:05:46,910
see here you have your user the client

00:05:45,020 --> 00:05:48,650
the person we're just going to pretend

00:05:46,910 --> 00:05:50,660
they're running a web browser which

00:05:48,650 --> 00:05:54,770
seems to be the most common use of the

00:05:50,660 --> 00:05:57,050
Internet these days and they're going to

00:05:54,770 --> 00:06:02,570
be using a recursive resolver over here

00:05:57,050 --> 00:06:06,110
on the far on your left and then the

00:06:02,570 --> 00:06:10,610
resolver is going to contact the various

00:06:06,110 --> 00:06:15,200
authoritative servers and here we go the

00:06:10,610 --> 00:06:23,870
user typed in ww example.com in the

00:06:15,200 --> 00:06:26,510
browser so his the user system libraries

00:06:23,870 --> 00:06:30,830
which in in a Linux system would be glib

00:06:26,510 --> 00:06:34,880
c is going to contact the resolver in

00:06:30,830 --> 00:06:37,150
its resolv.conf file the name server and

00:06:34,880 --> 00:06:43,340
it's going to ask what is the address of

00:06:37,150 --> 00:06:46,610
ww example com the resolver does not

00:06:43,340 --> 00:06:48,770
know so there was supposed to be an

00:06:46,610 --> 00:06:52,340
arrow and I don't see it there but it is

00:06:48,770 --> 00:06:56,960
talking from the resolver to the root

00:06:52,340 --> 00:07:03,080
nameservers up here and asks what is the

00:06:56,960 --> 00:07:06,970
address of ww example.com the root name

00:07:03,080 --> 00:07:10,700
server signified by the dot up their

00:07:06,970 --> 00:07:16,760
replies back here is a list of all the

00:07:10,700 --> 00:07:19,100
dot-com name servers okay so then the

00:07:16,760 --> 00:07:22,040
resolver makes another request it goes

00:07:19,100 --> 00:07:25,160
to the dot-com one of the dot-com name

00:07:22,040 --> 00:07:30,740
servers and it asks the same question

00:07:25,160 --> 00:07:37,160
what is the address of ww example com

00:07:30,740 --> 00:07:42,259
and the.com name server says here is a

00:07:37,160 --> 00:07:44,840
list of example.com name servers ok so

00:07:42,259 --> 00:07:47,090
the resolver knows what to do it goes to

00:07:44,840 --> 00:07:49,699
one of those nameservers and asks the

00:07:47,090 --> 00:07:56,780
very same question the third time what

00:07:49,699 --> 00:07:59,270
is the example com well just so happens

00:07:56,780 --> 00:08:04,009
that this name server is authoritative

00:07:59,270 --> 00:08:06,620
for example calm and names underneath it

00:08:04,009 --> 00:08:09,500
so it says here is the answer to your

00:08:06,620 --> 00:08:12,889
question here is the address of ww

00:08:09,500 --> 00:08:15,860
example calm which is then passed back

00:08:12,889 --> 00:08:27,259
to the user and all this happens in a

00:08:15,860 --> 00:08:33,110
split second ideally DNS SEC domain name

00:08:27,259 --> 00:08:37,579
system security extensions I'm not going

00:08:33,110 --> 00:08:39,919
to go into a very detailed discussion of

00:08:37,579 --> 00:08:42,829
that because well that would put you all

00:08:39,919 --> 00:08:46,000
to sleep and besides i'd have to have

00:08:42,829 --> 00:08:49,850
looked all that stuff up and i don't

00:08:46,000 --> 00:08:51,980
don't keep it in memory but basically

00:08:49,850 --> 00:08:58,209
it's all about integrity assurance for

00:08:51,980 --> 00:09:01,339
DNS data for the publishers of DNS data

00:08:58,209 --> 00:09:07,220
the digital signatures which clients can

00:09:01,339 --> 00:09:09,860
verify proves that the data is what it's

00:09:07,220 --> 00:09:14,050
supposed to be it could have been

00:09:09,860 --> 00:09:16,279
modified in transit as the slide says or

00:09:14,050 --> 00:09:20,000
you could have a man in the middle

00:09:16,279 --> 00:09:22,240
that's substituting their own data for

00:09:20,000 --> 00:09:22,240
yours

00:09:23,610 --> 00:09:28,649
now we're going to go into the why and

00:09:25,320 --> 00:09:33,149
the who well we kind of discussed the

00:09:28,649 --> 00:09:38,120
why already we want to be sure that the

00:09:33,149 --> 00:09:40,350
data is what we want with DNS SEC

00:09:38,120 --> 00:09:42,420
Internet users know that it's going to

00:09:40,350 --> 00:09:45,839
be accurate well that's of course only

00:09:42,420 --> 00:09:49,140
for a sign zone of course usually you're

00:09:45,839 --> 00:09:51,630
going to use this for a website if if

00:09:49,140 --> 00:09:54,779
you're just your ordinary Internet user

00:09:51,630 --> 00:09:57,450
the rest of us may not be so ordinary

00:09:54,779 --> 00:10:01,680
and we're going to do other things but

00:09:57,450 --> 00:10:03,899
suppose you doing banking online banks

00:10:01,680 --> 00:10:12,019
financial institutions are one of the

00:10:03,899 --> 00:10:16,320
biggest adopters of DNS SEC I'm not

00:10:12,019 --> 00:10:18,589
personally aware of of actual substance

00:10:16,320 --> 00:10:20,490
moving attacks that have happened to

00:10:18,589 --> 00:10:25,350
banks but that would be an obvious

00:10:20,490 --> 00:10:28,260
target paying taxes or bills online is

00:10:25,350 --> 00:10:32,579
another issue now in the United States

00:10:28,260 --> 00:10:35,310
the.gov top-level domain has been a

00:10:32,579 --> 00:10:37,709
major driving force behind DNS SEC

00:10:35,310 --> 00:10:41,579
because they require it of all the

00:10:37,709 --> 00:10:47,000
agencies and they make mistakes

00:10:41,579 --> 00:10:47,000
sometimes as we have seen

00:10:53,600 --> 00:10:58,260
complaints from customers when you can't

00:10:55,950 --> 00:11:03,660
talk to dot gov domains and yes that

00:10:58,260 --> 00:11:08,850
happens all the time why would someone

00:11:03,660 --> 00:11:14,640
complain about that good good question

00:11:08,850 --> 00:11:17,690
yes DNS spoofing attacks do really occur

00:11:14,640 --> 00:11:21,270
and sometimes in varying degrees of

00:11:17,690 --> 00:11:26,700
malice for example you're going to use a

00:11:21,270 --> 00:11:28,140
hotel wireless connection and it's a

00:11:26,700 --> 00:11:30,120
captive portal and they're going to

00:11:28,140 --> 00:11:34,350
redirect you you're going to make a

00:11:30,120 --> 00:11:35,790
request for a domain name and they're

00:11:34,350 --> 00:11:39,060
going to redirect you to through their

00:11:35,790 --> 00:11:41,550
servers and it's not going to return the

00:11:39,060 --> 00:11:43,440
right data well it's their connection so

00:11:41,550 --> 00:11:46,290
you can't really call that malice but at

00:11:43,440 --> 00:11:49,130
least with DNS SEC validation you know

00:11:46,290 --> 00:11:49,130
that they have done this

00:11:56,550 --> 00:12:02,700
here's just a quick little overview of

00:11:59,010 --> 00:12:10,050
how DNS SEC is implemented at the

00:12:02,700 --> 00:12:12,000
various points in the resolver chain the

00:12:10,050 --> 00:12:17,399
user down here at the bottom in the

00:12:12,000 --> 00:12:19,380
middle can be protected by their

00:12:17,399 --> 00:12:21,450
validating resolver and that's what

00:12:19,380 --> 00:12:24,329
we're going to cover today is to how to

00:12:21,450 --> 00:12:26,339
set up that validating resolver we're

00:12:24,329 --> 00:12:30,750
also going to touch on you can use a

00:12:26,339 --> 00:12:34,500
browser plug-in to to do the

00:12:30,750 --> 00:12:36,600
verification for you but that really

00:12:34,500 --> 00:12:39,769
doesn't have much to do with bind so I'm

00:12:36,600 --> 00:12:39,769
not going to get into that in detail

00:12:40,399 --> 00:12:51,000
okay the resolver will now all versions

00:12:45,120 --> 00:12:54,120
of bind I'm not sure all yes 9.8 all

00:12:51,000 --> 00:12:59,310
supported versions of by nine do include

00:12:54,120 --> 00:13:02,190
the root zone key so you don't have to

00:12:59,310 --> 00:13:04,529
do anything special it's there you just

00:13:02,190 --> 00:13:08,370
have to enable the validation and it

00:13:04,529 --> 00:13:10,500
will happen the publishers of DNS data

00:13:08,370 --> 00:13:13,680
now including the root zone and the.com

00:13:10,500 --> 00:13:17,970
zone and and whatever second-level

00:13:13,680 --> 00:13:21,839
domain there is they would sign their

00:13:17,970 --> 00:13:24,630
zone with a cryptographic key usually

00:13:21,839 --> 00:13:27,990
that's going to work in with a dual key

00:13:24,630 --> 00:13:30,750
system most of you who are running your

00:13:27,990 --> 00:13:33,329
own authoritative name servers might be

00:13:30,750 --> 00:13:37,589
familiar with that but there is a zone

00:13:33,329 --> 00:13:41,760
signing key and a key signing key the

00:13:37,589 --> 00:13:45,690
key signing key only signs the the DNS

00:13:41,760 --> 00:13:48,230
key records the zone signing key signs

00:13:45,690 --> 00:13:48,230
everything

00:13:55,379 --> 00:14:01,989
okay now we're going to touch on how how

00:13:59,709 --> 00:14:07,689
do you set up a validating resolver and

00:14:01,989 --> 00:14:11,709
there it is all on one slide you can

00:14:07,689 --> 00:14:14,499
delete your name decomp that your Linux

00:14:11,709 --> 00:14:17,369
distributor gave you you can delete it

00:14:14,499 --> 00:14:22,299
and replace it with this one line

00:14:17,369 --> 00:14:23,919
options DNS SEC validation auto and you

00:14:22,299 --> 00:14:26,199
got to have our nice little curly

00:14:23,919 --> 00:14:29,379
brackets and our semicolons at the end

00:14:26,199 --> 00:14:35,470
that's just the way I SC does our config

00:14:29,379 --> 00:14:37,660
files and that's it restart it's a

00:14:35,470 --> 00:14:40,239
validating resolver it's as simple as

00:14:37,660 --> 00:14:45,480
that any of you could run this on your

00:14:40,239 --> 00:14:48,549
own laptop it's just that simple you

00:14:45,480 --> 00:14:50,769
point your clients to it you can use

00:14:48,549 --> 00:14:54,639
your resolve can't file if it's running

00:14:50,769 --> 00:14:56,410
on your own system if it's running on

00:14:54,639 --> 00:14:58,720
your own system this is a little-known

00:14:56,410 --> 00:15:00,759
trick but you can simply delete your

00:14:58,720 --> 00:15:07,569
resolv.conf and make sure that it's not

00:15:00,759 --> 00:15:10,419
rewritten by dhcp clients and the glib c

00:15:07,569 --> 00:15:14,679
library is going to default to asking

00:15:10,419 --> 00:15:19,529
name server 120 7020 dot one so it's

00:15:14,679 --> 00:15:24,059
going to query your name d instance and

00:15:19,529 --> 00:15:26,939
it's going to get records from there oh

00:15:24,059 --> 00:15:30,610
now Chuck this isn't very secure is it

00:15:26,939 --> 00:15:35,499
are we in open resolver here well no not

00:15:30,610 --> 00:15:39,819
likely see the defaults for allowing

00:15:35,499 --> 00:15:41,649
recursion are sensible so in fact most

00:15:39,819 --> 00:15:43,569
of the defaults of name d make good

00:15:41,649 --> 00:15:46,959
sense which is why you can get away with

00:15:43,569 --> 00:15:53,039
such a small configuration file you're

00:15:46,959 --> 00:15:56,470
only going to allow recursion for

00:15:53,039 --> 00:16:02,259
localhost and local nets these are two

00:15:56,470 --> 00:16:06,610
built-in access control lists that bind

00:16:02,259 --> 00:16:07,650
uses local host is the mission queries

00:16:06,610 --> 00:16:11,170
from the machine it's

00:16:07,650 --> 00:16:14,740
local Nets means anything any network

00:16:11,170 --> 00:16:17,530
that you are physically connected to so

00:16:14,740 --> 00:16:19,900
yes you're partly open depending on what

00:16:17,530 --> 00:16:21,400
networks you're connected to but if you

00:16:19,900 --> 00:16:26,710
control the network then that's not a

00:16:21,400 --> 00:16:29,020
problem you can also serve it out to

00:16:26,710 --> 00:16:30,670
other clients via DHCP which I'm sure

00:16:29,020 --> 00:16:35,260
there's people here to do that show a

00:16:30,670 --> 00:16:40,300
hands you run your DHCP demon okay any

00:16:35,260 --> 00:16:45,880
of them use ISE dhcp a few any DNS mass

00:16:40,300 --> 00:16:48,130
fans yes good piece of software alright

00:16:45,880 --> 00:16:50,890
firth that's it for if you're just an

00:16:48,130 --> 00:16:52,870
Internet user and you don't own your own

00:16:50,890 --> 00:16:55,930
domain name and you're never interested

00:16:52,870 --> 00:16:58,150
in owning a domain name you're done here

00:16:55,930 --> 00:17:02,770
I'm sorry I've got nothing else of

00:16:58,150 --> 00:17:05,860
interest for you week you can sneak out

00:17:02,770 --> 00:17:10,930
quietly or or just storm out I don't

00:17:05,860 --> 00:17:12,400
care anyway then the rest of this is

00:17:10,930 --> 00:17:15,400
going to be for people who own their own

00:17:12,400 --> 00:17:19,120
domains or who may be interested in

00:17:15,400 --> 00:17:23,310
doing that in the future you got a few

00:17:19,120 --> 00:17:27,160
considerations to check out before you

00:17:23,310 --> 00:17:29,110
can actually sign your zone first is

00:17:27,160 --> 00:17:31,180
your top-level domain signed and I

00:17:29,110 --> 00:17:33,220
looked at this the other day and I

00:17:31,180 --> 00:17:36,340
believe that something like sixty

00:17:33,220 --> 00:17:39,190
percent or more somebody correct me if

00:17:36,340 --> 00:17:41,140
you know better but i believe it's it's

00:17:39,190 --> 00:17:43,210
gotten up to about sixty percent of all

00:17:41,140 --> 00:17:46,210
top-level domains or sign now that

00:17:43,210 --> 00:17:52,660
includes any domain that you are likely

00:17:46,210 --> 00:17:56,460
to use for most American use all the

00:17:52,660 --> 00:18:02,290
generic top-level domains com org net

00:17:56,460 --> 00:18:04,900
those are all signed ed yougov dot us

00:18:02,290 --> 00:18:09,760
the the US country code domain is signed

00:18:04,900 --> 00:18:11,530
and and that's true for like I say most

00:18:09,760 --> 00:18:15,400
country codes some of them are lagging

00:18:11,530 --> 00:18:17,620
behind and are not signed yet now if in

00:18:15,400 --> 00:18:21,750
the unlikely event that your top-level

00:18:17,620 --> 00:18:28,360
domain is not signed as a temporary

00:18:21,750 --> 00:18:35,040
measure ISC provides a service called d

00:18:28,360 --> 00:18:40,990
lv DNS SEC lookaside verification where

00:18:35,040 --> 00:18:45,130
you submit your your DS record to us at

00:18:40,990 --> 00:18:50,200
the URL at the bottom d lv is sea org

00:18:45,130 --> 00:18:55,120
and then we publish it in our in that

00:18:50,200 --> 00:18:58,180
zone so you could if you have example

00:18:55,120 --> 00:19:01,960
dot org we would your record would be

00:18:58,180 --> 00:19:03,820
example dot org dot DL vis sea org

00:19:01,960 --> 00:19:06,420
that's how that works I'm just going

00:19:03,820 --> 00:19:10,860
over that as a little historic curiosity

00:19:06,420 --> 00:19:13,810
nowadays it should not be necessary and

00:19:10,860 --> 00:19:17,560
our operations people want to get rid of

00:19:13,810 --> 00:19:23,880
d lv but but we're still providing the

00:19:17,560 --> 00:19:28,450
service the next consideration is and

00:19:23,880 --> 00:19:32,140
yes sir go ahead how do you check to see

00:19:28,450 --> 00:19:36,220
if your TLD is signed well i guess first

00:19:32,140 --> 00:19:41,890
place i would look would be at wikipedia

00:19:36,220 --> 00:19:47,620
i seriously i would look up your dot WS

00:19:41,890 --> 00:19:51,100
or whatever oh well sure look it up in

00:19:47,620 --> 00:19:57,670
the root zone just query query it at the

00:19:51,100 --> 00:19:59,170
root zone it will be dig and can you

00:19:57,670 --> 00:20:02,350
give me example of what top-level domain

00:19:59,170 --> 00:20:04,780
you're talking about dot system okay

00:20:02,350 --> 00:20:10,390
systems dot you got to put the dot at

00:20:04,780 --> 00:20:16,630
the end systems dot and I query for type

00:20:10,390 --> 00:20:20,710
any so just a NY it's sunny okay it has

00:20:16,630 --> 00:20:24,670
a d/s record okay assigned top-level

00:20:20,710 --> 00:20:28,800
domain in the root zone will have one or

00:20:24,670 --> 00:20:33,229
more NS records usually at least two and

00:20:28,800 --> 00:20:37,139
want to one or more d s records we

00:20:33,229 --> 00:20:39,539
so you can query that from a root server

00:20:37,139 --> 00:20:44,669
now you have to direct the query in dig

00:20:39,539 --> 00:20:49,169
and it would be at F dot root hyphen

00:20:44,669 --> 00:20:56,190
servers net I mentioned F route because

00:20:49,169 --> 00:20:57,839
that's the one that is C runs assuming

00:20:56,190 --> 00:21:00,899
it's not cached you don't have to good

00:20:57,839 --> 00:21:07,109
point and who looks up dot system I

00:21:00,899 --> 00:21:08,999
never have okay and then the next

00:21:07,109 --> 00:21:12,229
consideration is do you host your own

00:21:08,999 --> 00:21:17,399
DNS if you don't host your own DNS

00:21:12,229 --> 00:21:20,219
master server it's not going to be easy

00:21:17,399 --> 00:21:25,489
to do this there's not many alternatives

00:21:20,219 --> 00:21:29,009
for commercial services that are hosting

00:21:25,489 --> 00:21:30,809
the the sign zone and maintaining your

00:21:29,009 --> 00:21:32,639
keys for you I don't know if I would

00:21:30,809 --> 00:21:37,279
want them doing that frankly because the

00:21:32,639 --> 00:21:37,279
whole point of keys is you control it

00:21:38,479 --> 00:21:44,399
but anyway if anyone knows of any

00:21:42,149 --> 00:21:48,389
services that are doing that I'd be

00:21:44,399 --> 00:21:56,729
interested to know dyn I'll bet you're

00:21:48,389 --> 00:21:58,739
right i'll bet your idea I n.com okay

00:21:56,729 --> 00:22:01,229
for domain owner steps to signing your

00:21:58,739 --> 00:22:04,979
zone I'm going to just quickly run over

00:22:01,229 --> 00:22:07,559
this because i got my presentation up in

00:22:04,979 --> 00:22:08,639
this screen and we're just going to run

00:22:07,559 --> 00:22:10,529
through that and then we're going to

00:22:08,639 --> 00:22:12,749
come back to that at the end we're going

00:22:10,529 --> 00:22:15,509
to we're going to go into the examples

00:22:12,749 --> 00:22:18,440
the steps to signing your zone you

00:22:15,509 --> 00:22:21,359
generate your keys and your DS record

00:22:18,440 --> 00:22:24,029
you configure the zone in your name d

00:22:21,359 --> 00:22:27,479
Conte file and the example that i'm

00:22:24,029 --> 00:22:31,440
going to show is using inline signing in

00:22:27,479 --> 00:22:35,099
line signing is a bind 9.9 feature so if

00:22:31,440 --> 00:22:37,769
you're using bind 9.8 that's our oldest

00:22:35,099 --> 00:22:42,599
supported version you don't have this

00:22:37,769 --> 00:22:44,750
choice also the auto DNS SEC maintain I

00:22:42,599 --> 00:22:49,660
don't remember if bind9 point

00:22:44,750 --> 00:22:54,080
aight had that but I know 9.9 does it

00:22:49,660 --> 00:22:56,210
9.8 was nice but but 9.9 was better nine

00:22:54,080 --> 00:22:59,780
point 10 was a big improvement to but

00:22:56,210 --> 00:23:02,750
we've had a few issues it's it's coming

00:22:59,780 --> 00:23:04,730
around by nine point 10 is our most

00:23:02,750 --> 00:23:09,440
recent release it's on a second patch

00:23:04,730 --> 00:23:14,030
level of nine point 10.0 but we've got

00:23:09,440 --> 00:23:20,600
some new toys there to every new issue

00:23:14,030 --> 00:23:22,700
is exciting to me then the final step is

00:23:20,600 --> 00:23:31,430
to sign your zone and test that it's

00:23:22,700 --> 00:23:33,770
verifying properly the last step the

00:23:31,430 --> 00:23:37,010
very last step you want to go into is to

00:23:33,770 --> 00:23:41,330
publish your dns vs record that's going

00:23:37,010 --> 00:23:46,910
to vary by registrar and possibly by

00:23:41,330 --> 00:23:50,210
top-level domain most registrar's now

00:23:46,910 --> 00:23:54,020
are supporting DNS SEC but some major

00:23:50,210 --> 00:23:56,930
ones don't what can you do vote with

00:23:54,020 --> 00:23:59,870
your feet you can find a registrar that

00:23:56,930 --> 00:24:02,860
is going to have a better interface most

00:23:59,870 --> 00:24:08,450
of them only have a web interface to the

00:24:02,860 --> 00:24:12,050
to the publisher DS record it would be

00:24:08,450 --> 00:24:18,380
nice and the gentleman back in the back

00:24:12,050 --> 00:24:23,300
mentioned dyn and I'll bet they for

00:24:18,380 --> 00:24:27,050
enough money have a an API that you can

00:24:23,300 --> 00:24:31,880
use to publish your and change your DS

00:24:27,050 --> 00:24:33,950
records now if here's a question why do

00:24:31,880 --> 00:24:36,800
you not want to do that until you know

00:24:33,950 --> 00:24:38,390
everything is right what would happen

00:24:36,800 --> 00:24:40,610
anybody know what will happen if you

00:24:38,390 --> 00:24:43,690
publish your DNS record and all your

00:24:40,610 --> 00:24:43,690
ducks are not in a row

00:24:47,530 --> 00:24:52,940
well you actually he's a little worse

00:24:50,030 --> 00:24:55,100
than that he said you're screwed until

00:24:52,940 --> 00:24:59,950
the TTL expires what's going to happen

00:24:55,100 --> 00:25:04,910
is a validating resolver is going to

00:24:59,950 --> 00:25:09,740
check it and see the signature this zone

00:25:04,910 --> 00:25:11,150
should be a secure delegation so then

00:25:09,740 --> 00:25:13,850
it's going to ask the authoritative

00:25:11,150 --> 00:25:16,190
server for the records and if the

00:25:13,850 --> 00:25:20,810
signatures don't line up with what is in

00:25:16,190 --> 00:25:23,930
the parent domain the d/s record that's

00:25:20,810 --> 00:25:27,380
spoofing you blew it this is what we see

00:25:23,930 --> 00:25:37,780
with the dot gov folks all the time it's

00:25:27,380 --> 00:25:41,210
very common okay now my colleague from

00:25:37,780 --> 00:25:43,760
ISC made me put this in the presentation

00:25:41,210 --> 00:25:46,700
but like I said validating in your

00:25:43,760 --> 00:25:50,120
browser this is not a bind issues but

00:25:46,700 --> 00:25:51,860
I'm going to touch on it because maybe

00:25:50,120 --> 00:25:56,960
you're running one of those operating

00:25:51,860 --> 00:26:01,000
systems where you can't run bind wait a

00:25:56,960 --> 00:26:05,290
minute what operating system is that no

00:26:01,000 --> 00:26:09,140
most operating systems support bind even

00:26:05,290 --> 00:26:12,530
the evil Microsoft you can run named E

00:26:09,140 --> 00:26:13,970
on Windows let's suppose you don't want

00:26:12,530 --> 00:26:16,280
to do that you don't want to set up your

00:26:13,970 --> 00:26:19,040
validating resolver for whatever reason

00:26:16,280 --> 00:26:23,060
you can set up your web browser to

00:26:19,040 --> 00:26:27,020
validate DNS with a plug-in and here is

00:26:23,060 --> 00:26:33,970
the plug for them there ww DNS SEC

00:26:27,020 --> 00:26:33,970
validate hyphen validator CZ okay

00:26:39,059 --> 00:26:45,010
peace

00:26:41,880 --> 00:26:49,900
if you can only talk to your isp's name

00:26:45,010 --> 00:26:53,470
server or whatever in the case of DNS

00:26:49,900 --> 00:26:56,290
hijacking yes that's true you you have

00:26:53,470 --> 00:26:59,740
problems then and I hate to say it but

00:26:56,290 --> 00:27:04,870
my own ISP at home is like that I have

00:26:59,740 --> 00:27:08,590
problems okay you're going to want a a

00:27:04,870 --> 00:27:11,950
DNS SEC friendly registrar and you're

00:27:08,590 --> 00:27:15,010
going to want to use DNS SEC friendly

00:27:11,950 --> 00:27:17,380
dns providers obviously I did not put

00:27:15,010 --> 00:27:19,900
anything on this slide kind of for a

00:27:17,380 --> 00:27:22,600
reason well I don't want to be endorsing

00:27:19,900 --> 00:27:27,460
any particular service I mean you all

00:27:22,600 --> 00:27:29,950
understand that but personally when I'm

00:27:27,460 --> 00:27:34,150
aware of is g kg net is a very good

00:27:29,950 --> 00:27:37,720
registrar for their support of DNS SEC

00:27:34,150 --> 00:27:42,310
they are also a DNS SEC friendly DNS

00:27:37,720 --> 00:27:44,230
provider you can run your own stealth

00:27:42,310 --> 00:27:48,970
master which is what I'm going to cover

00:27:44,230 --> 00:27:53,710
here in a bit and their slaves will

00:27:48,970 --> 00:27:55,720
serve your signs own it works well the

00:27:53,710 --> 00:28:01,270
same thing and we're in the what room

00:27:55,720 --> 00:28:04,470
are we in here linode room yes there is

00:28:01,270 --> 00:28:08,380
a real good all-in-one solution for

00:28:04,470 --> 00:28:12,280
small businesses maybe you're not maybe

00:28:08,380 --> 00:28:15,400
you don't have any really expert linux

00:28:12,280 --> 00:28:20,950
or dns administrators on staff but you

00:28:15,400 --> 00:28:23,440
can get your own linode for a reasonably

00:28:20,950 --> 00:28:25,570
low cost per month in there they wanted

00:28:23,440 --> 00:28:27,730
me to tell you now this is not a plug

00:28:25,570 --> 00:28:29,950
but ok it's a plug they wanted me to

00:28:27,730 --> 00:28:31,900
tell you that they're offering fifty

00:28:29,950 --> 00:28:35,820
dollar discounts for anybody who stops

00:28:31,900 --> 00:28:38,350
by their table and ask for one but I

00:28:35,820 --> 00:28:43,540
have personal familiarity with them i'm

00:28:38,350 --> 00:28:47,500
not a linode user but i have my zone is

00:28:43,540 --> 00:28:51,850
slaved on their servers and it works

00:28:47,500 --> 00:28:53,980
very well when you update a signature or

00:28:51,850 --> 00:28:56,590
anything in your zone

00:28:53,980 --> 00:28:59,559
prop it propagates instantly to all your

00:28:56,590 --> 00:29:05,770
slaves and is immediately available to

00:28:59,559 --> 00:29:14,110
be served other DNS SEC friendly DNS

00:29:05,770 --> 00:29:17,380
providers dyn is a good example most of

00:29:14,110 --> 00:29:19,990
the free ones that I know do not support

00:29:17,380 --> 00:29:21,790
DNS SEC even the ones that have been

00:29:19,990 --> 00:29:27,700
saying for years that they're going to

00:29:21,790 --> 00:29:30,429
like mmm hurricane electric 'he net

00:29:27,700 --> 00:29:36,660
they've they've got a really good dns

00:29:30,429 --> 00:29:36,660
service but not yet supporting DNS SEC

00:29:39,750 --> 00:29:45,580
things might go better for them if they

00:29:42,160 --> 00:29:52,480
weren't using power DNS man after my own

00:29:45,580 --> 00:29:58,559
heart oh my are we up to summer yet it

00:29:52,480 --> 00:30:07,919
says summary dnf sex signing your own

00:29:58,559 --> 00:30:13,809
data is a is a way to impress your

00:30:07,919 --> 00:30:16,450
company okay in the real world there's

00:30:13,809 --> 00:30:18,040
not a whole lot of the tax of DNS

00:30:16,450 --> 00:30:19,390
spoofing going on but you never know

00:30:18,040 --> 00:30:21,669
when it's going to happen it could

00:30:19,390 --> 00:30:26,730
happen and there can always be a

00:30:21,669 --> 00:30:26,730
man-in-the-middle so if

00:30:31,140 --> 00:30:36,100
okay I'm glad to hear that if he says if

00:30:34,510 --> 00:30:40,750
you're connecting at a starbucks or a

00:30:36,100 --> 00:30:44,890
lot of public Wi-Fi access points you

00:30:40,750 --> 00:30:47,230
need to be thinking about this now while

00:30:44,890 --> 00:30:48,909
that's about signing you're talking

00:30:47,230 --> 00:30:54,940
about validating and yet but yeah that's

00:30:48,909 --> 00:30:57,309
a good point you can get benefit to get

00:30:54,940 --> 00:31:00,580
the benefit of DNS SEC is as we showed

00:30:57,309 --> 00:31:06,190
very simple I showed you the entire name

00:31:00,580 --> 00:31:08,529
d confidence you need a single line or

00:31:06,190 --> 00:31:10,679
you can use the browser plug-in if

00:31:08,529 --> 00:31:13,600
that's what you're more comfortable with

00:31:10,679 --> 00:31:17,470
the good thing about the browser plug-in

00:31:13,600 --> 00:31:22,450
i will say is that it's not going to

00:31:17,470 --> 00:31:24,580
just baffle you with NX domain replies

00:31:22,450 --> 00:31:26,559
in other words the domain does not exist

00:31:24,580 --> 00:31:28,090
that's what you're going to well you

00:31:26,559 --> 00:31:32,649
don't get in extra man you get served

00:31:28,090 --> 00:31:33,700
fail when the signature fails but your

00:31:32,649 --> 00:31:36,490
browser isn't going to know the

00:31:33,700 --> 00:31:39,399
difference it's going to say holes I'm

00:31:36,490 --> 00:31:46,149
able to find the address for ww example

00:31:39,399 --> 00:31:48,899
org now if you publish DNS data you

00:31:46,149 --> 00:31:51,190
should sign it you've got

00:31:48,899 --> 00:31:55,809
responsibilities to your users and and

00:31:51,190 --> 00:31:57,520
as I said to your own reputation for

00:31:55,809 --> 00:32:00,220
their security and for your own it's a

00:31:57,520 --> 00:32:04,870
good idea to do this this is technology

00:32:00,220 --> 00:32:06,640
that works it's not new it's been well

00:32:04,870 --> 00:32:10,840
supported for years it's getting better

00:32:06,640 --> 00:32:16,840
all the time as I said bind 9.8 was good

00:32:10,840 --> 00:32:19,120
9.9 was way better but it's there it's

00:32:16,840 --> 00:32:21,880
there it's available to use it just

00:32:19,120 --> 00:32:26,830
hasn't gotten a lot of widespread

00:32:21,880 --> 00:32:30,580
adoption yet okay I've got a few

00:32:26,830 --> 00:32:36,669
acknowledgments I really want to thank

00:32:30,580 --> 00:32:38,890
my colleague Vicky risk at ISC who while

00:32:36,669 --> 00:32:42,020
I was rehearsing this presentation on

00:32:38,890 --> 00:32:44,700
the telephone

00:32:42,020 --> 00:32:48,690
actually wrote up these slides for me

00:32:44,700 --> 00:32:51,320
isn't that awesome I also want to thank

00:32:48,690 --> 00:32:54,900
my other colleagues at ISC it's a great

00:32:51,320 --> 00:32:56,760
company it's a great place to work it's

00:32:54,900 --> 00:32:59,909
a it's a virtual place to work I

00:32:56,760 --> 00:33:03,990
actually work from my home in rural

00:32:59,909 --> 00:33:09,360
dixieland where I have a slow dsl signal

00:33:03,990 --> 00:33:12,780
and managed to get by but it's nice my

00:33:09,360 --> 00:33:19,799
commute to work is not too difficult

00:33:12,780 --> 00:33:21,870
most times what's that yeah there's well

00:33:19,799 --> 00:33:26,429
no actually it's in the same room what

00:33:21,870 --> 00:33:30,960
am I going to bed hey I'm a geek you are

00:33:26,429 --> 00:33:33,960
too i know you are Jeff okay and at this

00:33:30,960 --> 00:33:35,580
time I'm going to ask if there's well

00:33:33,960 --> 00:33:37,590
you know what I probably ought to go

00:33:35,580 --> 00:33:39,539
into the you want me to do the questions

00:33:37,590 --> 00:33:43,409
and comments now or go into the sample

00:33:39,539 --> 00:33:47,159
signing his own ok will do the sample

00:33:43,409 --> 00:33:50,179
signing zone and come back to this I hit

00:33:47,159 --> 00:33:53,730
escape and move over to another desktop

00:33:50,179 --> 00:33:58,909
where I have that's white no oh yeah I

00:33:53,730 --> 00:34:01,590
see where I'm at ok there we go ok oh

00:33:58,909 --> 00:34:07,460
boy I may determine a way too big for

00:34:01,590 --> 00:34:07,460
this window wonder if I can

00:34:10,790 --> 00:34:21,980
maybe if I maximize it it'll dahej the

00:34:14,000 --> 00:34:24,860
deal okay all right the tool that you

00:34:21,980 --> 00:34:26,570
use to sign or to generate your keys

00:34:24,860 --> 00:34:28,160
this is what you get one of the steps

00:34:26,570 --> 00:34:31,100
you have to do to sign your zone is

00:34:28,160 --> 00:34:34,400
called surprisingly enough DNS SEC

00:34:31,100 --> 00:34:36,890
hyphen keygen if you call it by that

00:34:34,400 --> 00:34:38,540
name the the defaults are pretty much

00:34:36,890 --> 00:34:43,880
going to work the only thing you have to

00:34:38,540 --> 00:34:46,970
tell it is named it says owner of the

00:34:43,880 --> 00:34:48,679
key that's a little confusing it was to

00:34:46,970 --> 00:34:50,900
me when I first came across that but

00:34:48,679 --> 00:34:53,750
what that means is basically the name of

00:34:50,900 --> 00:34:59,150
the zone you are signing if you own

00:34:53,750 --> 00:35:06,830
example org then it is DNS SEC hyphen

00:34:59,150 --> 00:35:10,550
keygen space example org that's all that

00:35:06,830 --> 00:35:13,490
is required now we're going to I'm going

00:35:10,550 --> 00:35:16,430
to suggest you would use the dash K the

00:35:13,490 --> 00:35:20,350
very first option there dash K and the

00:35:16,430 --> 00:35:24,500
directory name to write keys into the

00:35:20,350 --> 00:35:27,590
directory because we're going to do the

00:35:24,500 --> 00:35:29,930
auto DNS SEC maintained later on we want

00:35:27,590 --> 00:35:35,720
it to go ahead and put the keys in the

00:35:29,930 --> 00:35:38,720
key directory we're going to page down

00:35:35,720 --> 00:35:39,890
there the output we're going to get at

00:35:38,720 --> 00:35:46,550
the very bottom then we're going to get

00:35:39,890 --> 00:35:49,550
two files one is the K and the name

00:35:46,550 --> 00:35:53,180
which it was example org in the example

00:35:49,550 --> 00:35:55,130
the algorithm plus algorithm then plus

00:35:53,180 --> 00:35:59,210
the ID of the key which is a five digit

00:35:55,130 --> 00:36:02,210
number at least the ones that most the

00:35:59,210 --> 00:36:04,880
ones I've seen are I'm not sure how they

00:36:02,210 --> 00:36:08,690
actually figure that but we don't need

00:36:04,880 --> 00:36:11,750
to know details Dottie that's the that

00:36:08,690 --> 00:36:14,660
is the record that's going to have the

00:36:11,750 --> 00:36:18,670
DNS key records that you're going to put

00:36:14,660 --> 00:36:24,050
in your zone ok

00:36:18,670 --> 00:36:26,660
the other file is the secret key itself

00:36:24,050 --> 00:36:28,460
and it's going to have a similar naming

00:36:26,660 --> 00:36:31,640
scheme except it's going to be Dot

00:36:28,460 --> 00:36:33,710
private that needs to be kept secure in

00:36:31,640 --> 00:36:37,910
your key directory needs to be readable

00:36:33,710 --> 00:36:40,670
by the user that is running name D which

00:36:37,910 --> 00:36:42,170
maybe you're just using route I don't

00:36:40,670 --> 00:36:47,180
have anything against using route as

00:36:42,170 --> 00:36:49,520
bind now okay we've had a few security

00:36:47,180 --> 00:36:50,930
issues I'm not going to deny it but I'll

00:36:49,520 --> 00:36:53,180
tell you something about the security

00:36:50,930 --> 00:36:55,430
issues we have it's all denial of

00:36:53,180 --> 00:36:57,980
service stuff it's that somebody can

00:36:55,430 --> 00:36:59,750
crash your server we don't have root

00:36:57,980 --> 00:37:01,970
exploits we haven't had those for I

00:36:59,750 --> 00:37:04,400
don't know how long but it's not it's

00:37:01,970 --> 00:37:06,440
not happening anymore one thing we do in

00:37:04,400 --> 00:37:09,490
Linux this is a linux fest so I'll speak

00:37:06,440 --> 00:37:14,000
Linux Pacific is that we use the

00:37:09,490 --> 00:37:19,790
capabilities feature in the colonel when

00:37:14,000 --> 00:37:22,760
route starts name d root binds the binds

00:37:19,790 --> 00:37:28,010
get it the port 53 which is a privilege

00:37:22,760 --> 00:37:36,080
port of UDP and tcp and also the port

00:37:28,010 --> 00:37:37,790
953 44 rndc those are all privileged

00:37:36,080 --> 00:37:40,099
ports and that's a privileged action

00:37:37,790 --> 00:37:42,560
that that name D has to do that's I

00:37:40,099 --> 00:37:47,349
believe the only privileged action that

00:37:42,560 --> 00:37:49,400
we do at that point name d drops all

00:37:47,349 --> 00:37:51,640
superuser privileges and even though

00:37:49,400 --> 00:37:54,740
it's still running as the user root it

00:37:51,640 --> 00:37:58,970
cannot go read Alan's files or Jeff's

00:37:54,740 --> 00:38:01,670
files if the process is compromised it

00:37:58,970 --> 00:38:04,310
can only read files that the user root

00:38:01,670 --> 00:38:06,430
could read if root was not a super user

00:38:04,310 --> 00:38:09,740
does that make sense you understand

00:38:06,430 --> 00:38:14,960
you're not going to have a root exploit

00:38:09,740 --> 00:38:17,930
from name d if you do then I'll eat my

00:38:14,960 --> 00:38:20,390
words but I mean things happen but I

00:38:17,930 --> 00:38:24,040
think I think you can feel fairly secure

00:38:20,390 --> 00:38:24,040
with name d these days

00:38:24,609 --> 00:38:27,609
ok

00:38:35,100 --> 00:38:40,960
well you're talking about it running is

00:38:38,170 --> 00:38:42,130
the name d user and that is a command

00:38:40,960 --> 00:38:43,990
line option that you're going to give it

00:38:42,130 --> 00:38:47,110
now most distros are going to do that by

00:38:43,990 --> 00:38:49,660
default I believe that Fedora does that

00:38:47,110 --> 00:38:54,490
I believe debian does that and Debbie

00:38:49,660 --> 00:38:57,610
and derived distros hmm slackware

00:38:54,490 --> 00:38:59,530
doesn't I will tell you that I know the

00:38:57,610 --> 00:39:03,430
slacker does not and I don't think the

00:38:59,530 --> 00:39:06,130
gentoo does but I don't know right it's

00:39:03,430 --> 00:39:09,520
an option which which you can do that in

00:39:06,130 --> 00:39:14,950
slackware or any other distro you simply

00:39:09,520 --> 00:39:18,340
add the dash you command you waved at me

00:39:14,950 --> 00:39:20,950
am i running out of time wait a minute I

00:39:18,340 --> 00:39:27,730
see what time it is ok I'm not running

00:39:20,950 --> 00:39:31,200
out of time I'm doing good all right oh

00:39:27,730 --> 00:39:37,620
there's one other I should cover here is

00:39:31,200 --> 00:39:37,620
user has been d

00:39:40,930 --> 00:39:48,140
dsds from key okay this is the second

00:39:46,010 --> 00:39:50,480
thing you'll have to you take your you

00:39:48,140 --> 00:39:58,040
will get your keys from the DNS SEC key

00:39:50,480 --> 00:40:02,270
gen and then the DS from key DNS SEC des

00:39:58,040 --> 00:40:06,710
from key command is how you extract your

00:40:02,270 --> 00:40:12,230
DS record to put in the parent publish

00:40:06,710 --> 00:40:14,030
in the parent zone that's pretty simple

00:40:12,230 --> 00:40:17,720
too you're going to you might want to

00:40:14,030 --> 00:40:19,910
pass the uppercase K directory to tell

00:40:17,720 --> 00:40:21,920
it where to find where your keys are or

00:40:19,910 --> 00:40:23,570
if you're in the same directory it'll

00:40:21,920 --> 00:40:29,090
just take a relative path and you don't

00:40:23,570 --> 00:40:32,000
need that there's other options there

00:40:29,090 --> 00:40:34,850
that you're not likely to need but but

00:40:32,000 --> 00:40:42,440
that's what you do you'll come what you

00:40:34,850 --> 00:40:44,620
will get is a DS record on standard

00:40:42,440 --> 00:40:44,620
output

00:40:49,309 --> 00:40:54,500
okay now I wanted to go over what

00:40:54,799 --> 00:41:00,030
unsigned records look like I didn't

00:40:57,240 --> 00:41:05,069
mention that in the slides but here is a

00:41:00,030 --> 00:41:14,789
sample unsigned zone that I'm familiar

00:41:05,069 --> 00:41:17,579
with and these are these are the typical

00:41:14,789 --> 00:41:20,130
records you're going to see in a in an

00:41:17,579 --> 00:41:27,240
unsigned zone notice there are no are

00:41:20,130 --> 00:41:32,099
our cigs there are no insect records

00:41:27,240 --> 00:41:33,630
which is the next secure record I want

00:41:32,099 --> 00:41:37,920
to bring your attention to down there at

00:41:33,630 --> 00:41:41,910
the bottom the message size 348 348

00:41:37,920 --> 00:41:44,130
bites that's pretty small and there's a

00:41:41,910 --> 00:41:53,250
lot of information that has come in that

00:41:44,130 --> 00:42:02,549
one little packet the next example here

00:41:53,250 --> 00:42:08,970
is a sign zone oops which is is sea org

00:42:02,549 --> 00:42:14,670
and look there we have all those scary

00:42:08,970 --> 00:42:18,779
looking are our sig records we have down

00:42:14,670 --> 00:42:22,730
there at the bottom nail okay up near

00:42:18,779 --> 00:42:22,730
the top now we've got our two dns keys

00:42:25,190 --> 00:42:33,380
after Dina and let me highlight that so

00:42:28,710 --> 00:42:39,029
you can see what I'm talking about okay

00:42:33,380 --> 00:42:41,250
257 I'm not I can't remember off hand

00:42:39,029 --> 00:42:43,200
and had enough coffee this morning to

00:42:41,250 --> 00:42:44,940
remember but one of those is the zone

00:42:43,200 --> 00:42:51,480
signing key and one is the key signing

00:42:44,940 --> 00:42:53,490
key and it thank you sir 257 is the key

00:42:51,480 --> 00:42:55,950
signing key this is what we have

00:42:53,490 --> 00:43:00,619
published the d/s record in the parent

00:42:55,950 --> 00:43:00,619
zone of dot org

00:43:00,710 --> 00:43:10,260
256 the next one there is the zones I

00:43:03,480 --> 00:43:12,930
mean the zone soninke right and that

00:43:10,260 --> 00:43:15,510
signs all the records in the zone so

00:43:12,930 --> 00:43:21,060
that has done all now these first two

00:43:15,510 --> 00:43:25,170
are our sigs one of them i think is from

00:43:21,060 --> 00:43:26,760
the obviously one is from the key

00:43:25,170 --> 00:43:29,340
signing key but i think there might be

00:43:26,760 --> 00:43:32,250
the other one is from the zone signing

00:43:29,340 --> 00:43:35,609
key that's an option nobody really cares

00:43:32,250 --> 00:43:40,230
about the zone signing keys opinion of

00:43:35,609 --> 00:43:45,349
the dns TR are set but it doesn't hurt

00:43:40,230 --> 00:43:45,349
anything either ok

00:43:47,250 --> 00:43:56,820
that was all okay now I want to go I've

00:43:49,500 --> 00:43:59,160
got a simple bare minimum for signing

00:43:56,820 --> 00:44:00,810
his own and i finished the name decon if

00:43:59,160 --> 00:44:02,880
I didn't finish your samples own file

00:44:00,810 --> 00:44:05,190
but you can get a sample zone file

00:44:02,880 --> 00:44:10,890
anywhere you like they're not very

00:44:05,190 --> 00:44:13,590
complicated the I I've got a slightly

00:44:10,890 --> 00:44:15,330
larger options block in this one for

00:44:13,590 --> 00:44:19,710
this is for the authoritative server

00:44:15,330 --> 00:44:21,120
that is serving a sign zone I set the

00:44:19,710 --> 00:44:23,760
directory there that's just a

00:44:21,120 --> 00:44:25,350
convenience it's not required and then i

00:44:23,760 --> 00:44:31,080
set the key directory now that is

00:44:25,350 --> 00:44:34,710
required for auto DNS set maintained so

00:44:31,080 --> 00:44:37,950
that has to be there the last line DNS

00:44:34,710 --> 00:44:41,430
SEC enabled yes I looked that up and I

00:44:37,950 --> 00:44:43,710
believe we've had that as default in all

00:44:41,430 --> 00:44:46,440
supported versions and then some I think

00:44:43,710 --> 00:44:50,600
it went back to 9.7 which is no longer

00:44:46,440 --> 00:44:54,030
supported so you don't need that but if

00:44:50,600 --> 00:44:55,920
you have happened to have DNS SEC and

00:44:54,030 --> 00:45:00,090
able know then that would obviously

00:44:55,920 --> 00:45:04,950
break things then we've got the next the

00:45:00,090 --> 00:45:07,680
simple little zone stanza example org in

00:45:04,950 --> 00:45:12,390
class in the internet class which is

00:45:07,680 --> 00:45:15,390
pretty much all dns these days you need

00:45:12,390 --> 00:45:17,400
to declare it as a type of Master we

00:45:15,390 --> 00:45:21,120
give it a file name and you can name it

00:45:17,400 --> 00:45:25,740
whatever you like a lot of distros use a

00:45:21,120 --> 00:45:28,350
default of a dot d b or d b dot on the

00:45:25,740 --> 00:45:30,180
front of it sometimes those don't matter

00:45:28,350 --> 00:45:33,300
it's all up to you whatever makes sense

00:45:30,180 --> 00:45:37,560
to the administrators all it needs we're

00:45:33,300 --> 00:45:42,360
using inline signing yes and auto DNS

00:45:37,560 --> 00:45:44,220
SEC maintained in your zone file which I

00:45:42,360 --> 00:45:47,310
did not finish typing before running in

00:45:44,220 --> 00:45:50,370
here all you're going to have to do is

00:45:47,310 --> 00:45:54,090
paste in those DNS key records that you

00:45:50,370 --> 00:45:57,480
got from DNS SEC key gen just paste them

00:45:54,090 --> 00:45:59,599
right in there and it will and along

00:45:57,480 --> 00:46:03,390
with the other records you have as

00:45:59,599 --> 00:46:05,729
requires at minimum an SOA start of

00:46:03,390 --> 00:46:11,219
authority record it requires at least

00:46:05,729 --> 00:46:17,579
one NS record what else does the zone

00:46:11,219 --> 00:46:19,739
require anybody no good that's right it

00:46:17,579 --> 00:46:21,930
does not require anything else just

00:46:19,739 --> 00:46:23,869
those two you don't have to have any a

00:46:21,930 --> 00:46:28,109
records you do not have to have any

00:46:23,869 --> 00:46:29,880
other type of records most people are

00:46:28,109 --> 00:46:36,299
going to want to have an a record or a

00:46:29,880 --> 00:46:40,739
quad a for the ipv6 folks but those are

00:46:36,299 --> 00:46:45,299
not required to run your or to serve

00:46:40,739 --> 00:46:51,779
your zone after you have done this you

00:46:45,299 --> 00:46:53,759
save that you do you you can restart

00:46:51,779 --> 00:46:59,339
your name d process or we r do a

00:46:53,759 --> 00:47:03,719
reconfig are in DC reconfig and suddenly

00:46:59,339 --> 00:47:08,269
you are serving signed data in line

00:47:03,719 --> 00:47:13,079
signing means we can edit that zone file

00:47:08,269 --> 00:47:16,440
which i call VAR name d VAR slant name d

00:47:13,079 --> 00:47:21,799
slant example org we can edit that just

00:47:16,440 --> 00:47:24,989
like we've always done years passed and

00:47:21,799 --> 00:47:27,959
which people like Alan I know they like

00:47:24,989 --> 00:47:30,589
to do that he edited my zone file one

00:47:27,959 --> 00:47:36,329
time which wasn't supposed to be done

00:47:30,589 --> 00:47:38,849
all in the past but don't worry you can

00:47:36,329 --> 00:47:44,519
still do that with inline signing that

00:47:38,849 --> 00:47:46,559
was a popular feature of x 9.9 so now

00:47:44,519 --> 00:47:48,420
the the modern way the way i like to do

00:47:46,559 --> 00:47:51,749
it and the way we're recommending to

00:47:48,420 --> 00:47:54,299
most customers and a lot of them say no

00:47:51,749 --> 00:47:59,819
they don't want to do it that way is to

00:47:54,299 --> 00:48:02,549
use the NSF date program which basically

00:47:59,819 --> 00:48:05,459
you're going to change your zone data by

00:48:02,549 --> 00:48:09,269
means of a special DNS query that goes

00:48:05,459 --> 00:48:10,110
to your master server and it will edit

00:48:09,269 --> 00:48:13,900
the

00:48:10,110 --> 00:48:15,520
zone contents in memory and it'll send

00:48:13,900 --> 00:48:18,700
it out to the slaves and record it in

00:48:15,520 --> 00:48:24,340
all the journal files on the master and

00:48:18,700 --> 00:48:27,370
the slaves instantly NS update is a more

00:48:24,340 --> 00:48:31,660
flexible way to handle a zone data

00:48:27,370 --> 00:48:34,090
management in the future but a lot of

00:48:31,660 --> 00:48:39,130
people are not there yet if we can get

00:48:34,090 --> 00:48:40,930
them signing zones will be happy okay at

00:48:39,130 --> 00:48:44,050
that point i think i'm going to go back

00:48:40,930 --> 00:48:46,480
to the questions and comments and we're

00:48:44,050 --> 00:48:56,470
going to be done in plenty of time how

00:48:46,480 --> 00:48:58,650
about that oops wrong place let's do

00:48:56,470 --> 00:48:58,650
this

00:49:00,120 --> 00:49:11,130
and okay whoa wrong place there I don't

00:49:05,160 --> 00:49:13,470
know how to work this thing okay anybody

00:49:11,130 --> 00:49:15,800
have any questions or any comments go

00:49:13,470 --> 00:49:15,800
ahead sir

00:49:36,230 --> 00:49:45,530
the question is about distributing SSH

00:49:42,570 --> 00:49:50,220
keys and other secure type of

00:49:45,530 --> 00:49:56,130
information via dns and are you familiar

00:49:50,220 --> 00:49:57,900
with the what do they call that it's on

00:49:56,130 --> 00:50:01,140
tip of my tongue I've just published it

00:49:57,900 --> 00:50:03,540
in my own zone but we're doing that with

00:50:01,140 --> 00:50:06,990
email now that's already working for

00:50:03,540 --> 00:50:13,470
email it's called somebody help ya no

00:50:06,990 --> 00:50:17,100
sir no we're talking about where you you

00:50:13,470 --> 00:50:23,490
publish your SSL key for you for your

00:50:17,100 --> 00:50:28,290
name for your mail server in Dane Dane

00:50:23,490 --> 00:50:32,610
which stands for DNS authentication of

00:50:28,290 --> 00:50:35,970
named entities Dane is there I don't

00:50:32,610 --> 00:50:40,430
know if it's working for ssh keys yet

00:50:35,970 --> 00:50:40,430
but there's no reason why it couldn't

00:50:46,150 --> 00:50:49,150
ok

00:50:56,040 --> 00:50:59,980
going to have a hard time repeating all

00:50:58,180 --> 00:51:03,310
that back for the record but basically

00:50:59,980 --> 00:51:06,369
he's saying that openssh already

00:51:03,310 --> 00:51:08,830
supports option alternate means of doing

00:51:06,369 --> 00:51:12,670
that but do check out Dane and that is

00:51:08,830 --> 00:51:15,670
another real advantage of of DNS seconds

00:51:12,670 --> 00:51:17,890
that you can have guaranteed secure

00:51:15,670 --> 00:51:20,590
email you know that you're not going to

00:51:17,890 --> 00:51:22,840
have any snooping in the middle if you

00:51:20,590 --> 00:51:26,460
have verified the other side's key and

00:51:22,840 --> 00:51:28,869
you can do that if they have signed and

00:51:26,460 --> 00:51:31,840
published their Dane records which I

00:51:28,869 --> 00:51:34,060
have done and I don't believe we've done

00:51:31,840 --> 00:51:41,530
it at ISC dot org yet but I've been

00:51:34,060 --> 00:51:43,560
nagging about that Alan go ahead go

00:51:41,530 --> 00:51:43,560
ahead

00:51:47,099 --> 00:52:03,609
chain of trust right right won't the the

00:52:01,180 --> 00:52:05,770
what prevents someone from spoofing the

00:52:03,609 --> 00:52:08,859
route tell these well guess what we have

00:52:05,770 --> 00:52:11,579
built into every copy of name D we have

00:52:08,859 --> 00:52:11,579
the root key

00:52:18,220 --> 00:52:30,500
right enter Nick it I AAA I na is the

00:52:27,400 --> 00:52:34,250
org is the authoritative source of the

00:52:30,500 --> 00:52:35,720
route public key and there's lots of

00:52:34,250 --> 00:52:40,460
different places you can get it and

00:52:35,720 --> 00:52:42,320
verify it if you trust is see you just

00:52:40,460 --> 00:52:44,870
use your name D and if you're not

00:52:42,320 --> 00:52:51,170
running name D then I guess that's not

00:52:44,870 --> 00:52:52,670
my problem is it but yeah there's other

00:52:51,170 --> 00:52:57,560
implementations are going to have other

00:52:52,670 --> 00:53:01,100
ways of entering the key and in

00:52:57,560 --> 00:53:07,160
verifying records from there okay

00:53:01,100 --> 00:53:09,980
somebody over here go ahead any type of

00:53:07,160 --> 00:53:13,070
revelation in the system you simply

00:53:09,980 --> 00:53:19,820
change your DS record at the parent and

00:53:13,070 --> 00:53:24,170
then that will invalidate the older key

00:53:19,820 --> 00:53:27,560
now let's talk about key role / i think

00:53:24,170 --> 00:53:35,450
that's a useful thing we should touch on

00:53:27,560 --> 00:53:38,810
because well there's a reason why they

00:53:35,450 --> 00:53:42,740
decided on the the zone signing key and

00:53:38,810 --> 00:53:46,660
the key signing key model the reason

00:53:42,740 --> 00:53:51,770
being a single signature does not

00:53:46,660 --> 00:53:57,230
present a whole lot of attacker a

00:53:51,770 --> 00:54:01,130
cryptographic attack profile you're not

00:53:57,230 --> 00:54:05,990
going to be able to do get a whole lot

00:54:01,130 --> 00:54:09,100
of well I'm no cryptographic expert on

00:54:05,990 --> 00:54:11,660
it maybe somebody in here is but

00:54:09,100 --> 00:54:19,820
basically it's not going to be easy to

00:54:11,660 --> 00:54:22,660
attack from the just looking at the the

00:54:19,820 --> 00:54:26,330
key signing key now the zone signing key

00:54:22,660 --> 00:54:28,660
has considerable more exposure because

00:54:26,330 --> 00:54:30,799
it signed every record in your zone and

00:54:28,660 --> 00:54:35,209
you might okay

00:54:30,799 --> 00:54:38,630
you want to roll over your zone signing

00:54:35,209 --> 00:54:43,519
key as for rolling over the key signing

00:54:38,630 --> 00:54:45,109
key most zones really don't need to

00:54:43,519 --> 00:54:51,219
worry about that very often maybe 10

00:54:45,109 --> 00:54:53,209
years and that's I mean your own

00:54:51,219 --> 00:54:55,819
paranoia level is going to determine

00:54:53,209 --> 00:54:57,079
that but basically we don't have any

00:54:55,819 --> 00:54:59,239
reason to think that you're going to

00:54:57,079 --> 00:55:03,559
need to roll over your key signing key

00:54:59,239 --> 00:55:05,809
very often at all rolling over your zone

00:55:03,559 --> 00:55:07,519
sign and key really the only reason I

00:55:05,809 --> 00:55:10,069
would say to do that every two or three

00:55:07,519 --> 00:55:13,549
years is just so you can remember how to

00:55:10,069 --> 00:55:15,799
do it I always forget these things I'm

00:55:13,549 --> 00:55:17,749
serious you know you're going to if you

00:55:15,799 --> 00:55:19,789
don't know how to do the rollover you're

00:55:17,749 --> 00:55:22,939
going to forget it and we've got

00:55:19,789 --> 00:55:27,559
knowledgebase articles at kb is sea org

00:55:22,939 --> 00:55:33,640
that cover DNS second key role lovers

00:55:27,559 --> 00:55:37,670
plus there's some good presentations of

00:55:33,640 --> 00:55:41,390
on DNS SEC from a colleague of mine

00:55:37,670 --> 00:55:44,599
Allen Clegg has done I believe he called

00:55:41,390 --> 00:55:46,729
DNS SEC in six minutes I think he took a

00:55:44,599 --> 00:55:49,849
little longer than six minutes no mine

00:55:46,729 --> 00:55:51,979
did but but i would i would encourage

00:55:49,849 --> 00:55:53,959
you if you're interested to look up that

00:55:51,979 --> 00:55:55,549
i believe we've got the video i don't

00:55:53,959 --> 00:56:01,369
have video online but we have the slides

00:55:55,549 --> 00:56:10,359
in the audio did that address what you

00:56:01,369 --> 00:56:10,359
were asking okay anyone else Jeff

00:56:17,069 --> 00:56:24,130
older mechanism before in line signing

00:56:20,319 --> 00:56:28,720
what you had to do if you wanted to just

00:56:24,130 --> 00:56:31,359
edit your zone file and as you've always

00:56:28,720 --> 00:56:36,069
done you had to have you had to manually

00:56:31,359 --> 00:56:39,609
sign it you'd have to keep your your

00:56:36,069 --> 00:56:45,369
plain text zone and your sign zone and

00:56:39,609 --> 00:56:48,249
you would add your records sign it with

00:56:45,369 --> 00:56:53,319
I can't even remember the name of the

00:56:48,249 --> 00:56:56,650
tool DNS signs own yeah or rndc sign is

00:56:53,319 --> 00:56:58,690
another way to do it live but you'd have

00:56:56,650 --> 00:57:05,130
to manually take the steps to sign it

00:56:58,690 --> 00:57:07,690
before in mind signing anyone else I

00:57:05,130 --> 00:57:11,829
think lunch sounds pretty good about now

00:57:07,690 --> 00:57:16,410
what are you alright all in favor say

00:57:11,829 --> 00:57:16,410
aye thank you much

00:57:27,710 --> 00:57:29,770
you

00:57:53,380 --> 00:57:57,650
your customers rely on your website or

00:57:56,150 --> 00:58:00,020
application if it's slower

00:57:57,650 --> 00:58:02,990
non-responsive it infuriates your users

00:58:00,020 --> 00:58:04,790
and costs you money keeping your

00:58:02,990 --> 00:58:08,310
business critical systems humming along

00:58:04,790 --> 00:58:10,620
requires insight into what they're doing

00:58:08,310 --> 00:58:12,570
your system metrics tells stories

00:58:10,620 --> 00:58:14,580
stories that can reveal performance

00:58:12,570 --> 00:58:16,920
bottlenecks resource limitations and

00:58:14,580 --> 00:58:18,480
other problems but how do you keep an

00:58:16,920 --> 00:58:21,120
eye on all of your systems performance

00:58:18,480 --> 00:58:24,150
metrics in real-time and record this

00:58:21,120 --> 00:58:25,920
data for later analysis enter longview

00:58:24,150 --> 00:58:27,930
the new way to see what's really going

00:58:25,920 --> 00:58:30,090
on under the hood the long view

00:58:27,930 --> 00:58:32,160
dashboard lets you visualize the status

00:58:30,090 --> 00:58:34,620
of all your systems providing you with a

00:58:32,160 --> 00:58:37,980
bird's-eye view of your entire fleet you

00:58:34,620 --> 00:58:40,560
can sort by cpu memory swap processes

00:58:37,980 --> 00:58:42,330
load and network usage click a specific

00:58:40,560 --> 00:58:44,730
system to access its individual

00:58:42,330 --> 00:58:47,240
dashboard then click and drag to zoom in

00:58:44,730 --> 00:58:49,650
on chokepoints and get more detail

00:58:47,240 --> 00:58:51,300
comprehensive network data including

00:58:49,650 --> 00:58:53,640
inbound and outbound traffic is

00:58:51,300 --> 00:58:55,200
available on the network tab and disk

00:58:53,640 --> 00:58:57,120
rights and free space on the disk

00:58:55,200 --> 00:58:59,970
stabbed while the process Explorer

00:58:57,120 --> 00:59:02,490
displays usage statistics for individual

00:58:59,970 --> 00:59:04,650
processes the system info tab shows

00:59:02,490 --> 00:59:06,900
listening services active connections

00:59:04,650 --> 00:59:09,030
and available updates adding long view

00:59:06,900 --> 00:59:10,740
to a system is easy just click the

00:59:09,030 --> 00:59:12,870
button copy the one line installation

00:59:10,740 --> 00:59:15,330
command then run the command on your

00:59:12,870 --> 00:59:17,010
linux system to complete the process the

00:59:15,330 --> 00:59:19,200
agent will begin collecting data and

00:59:17,010 --> 00:59:21,029
sending it to longview then the graph

00:59:19,200 --> 00:59:23,609
start rolling

00:59:21,029 --> 00:59:25,979
use longview to gain visibility into

00:59:23,609 --> 00:59:29,719
your servers so when your website or app

00:59:25,979 --> 00:59:29,719

YouTube URL: https://www.youtube.com/watch?v=EePHWNP_L2c


