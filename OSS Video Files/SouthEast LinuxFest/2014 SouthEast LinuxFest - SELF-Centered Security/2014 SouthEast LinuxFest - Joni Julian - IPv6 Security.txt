Title: 2014 SouthEast LinuxFest - Joni Julian - IPv6 Security
Publication date: 2015-05-17
Playlist: 2014 SouthEast LinuxFest - SELF-Centered Security
Description: 
	2014 SouthEast LinuxFest
Joni Julian
IPv6 Security
Captions: 
	00:00:00,000 --> 00:00:05,339
the following presentation was recorded

00:00:02,490 --> 00:00:08,250
the 2014 southeast linux fest in

00:00:05,339 --> 00:00:11,070
charlotte north carolina it is licensed

00:00:08,250 --> 00:00:14,880
under a creative commons license for

00:00:11,070 --> 00:00:18,180
more information visit www selfies linux

00:00:14,880 --> 00:00:19,710
pc org the southeast linux fest would

00:00:18,180 --> 00:00:22,740
like to thank the following diamond

00:00:19,710 --> 00:00:25,680
sponsors in 2014 for helping make these

00:00:22,740 --> 00:00:27,510
videos possible okay I'll try not to

00:00:25,680 --> 00:00:31,410
blast quite as much now that I have a

00:00:27,510 --> 00:00:32,790
microphone on I am used to talking to

00:00:31,410 --> 00:00:35,550
the back of the classroom and keeping

00:00:32,790 --> 00:00:38,090
everyone awake so microphone or no

00:00:35,550 --> 00:00:42,629
microphone doesn't really bother me Oh

00:00:38,090 --> 00:00:45,660
like I said I'm Joni Julian what am I

00:00:42,629 --> 00:00:47,460
doing here what is my background I have

00:00:45,660 --> 00:00:50,820
a background in physics before I jumped

00:00:47,460 --> 00:00:52,680
ship into biomedical engineering and I

00:00:50,820 --> 00:00:55,320
kind of jumped ship within biomedical

00:00:52,680 --> 00:00:57,629
engineering instead of sticking with the

00:00:55,320 --> 00:01:00,989
straight path in my case on medical

00:00:57,629 --> 00:01:02,579
imaging I jumped over into telemedicine

00:01:00,989 --> 00:01:05,670
and then said ooh this network

00:01:02,579 --> 00:01:08,630
management is far more fun than that so

00:01:05,670 --> 00:01:14,670
my dissertation is actually on the

00:01:08,630 --> 00:01:17,970
intersection of internet SNMP network

00:01:14,670 --> 00:01:20,549
management in general and quality of

00:01:17,970 --> 00:01:24,450
service which by the way is a bad word

00:01:20,549 --> 00:01:26,250
around me but I've got the numbers to

00:01:24,450 --> 00:01:30,479
back it up and as one of my co-workers

00:01:26,250 --> 00:01:32,939
says he introduces me he says this is

00:01:30,479 --> 00:01:35,869
joni julian she has PhD so we call her

00:01:32,939 --> 00:01:38,100
dr j don't mess with her she has numbers

00:01:35,869 --> 00:01:40,140
because i do come back with my nice

00:01:38,100 --> 00:01:41,759
charts and graphs and this is why we do

00:01:40,140 --> 00:01:44,520
it this way I've got the charts and

00:01:41,759 --> 00:01:48,470
graphs to show it that leads me to the

00:01:44,520 --> 00:01:53,040
bad news though I'm in networking not in

00:01:48,470 --> 00:01:55,020
security so my goal is to build a

00:01:53,040 --> 00:01:57,540
network where I can Shepherd all the

00:01:55,020 --> 00:02:00,719
little packets through this whole thing

00:01:57,540 --> 00:02:04,079
about dropping packets kind of creeps me

00:02:00,719 --> 00:02:06,680
out so I may be the absolute wrong

00:02:04,079 --> 00:02:09,720
person to give you a talk on security

00:02:06,680 --> 00:02:12,120
that said when I talked with our

00:02:09,720 --> 00:02:12,940
firewall person about why he's dropping

00:02:12,120 --> 00:02:14,440
certain packets

00:02:12,940 --> 00:02:16,150
every time he goes through and while I

00:02:14,440 --> 00:02:17,860
dropped so many packets like this and

00:02:16,150 --> 00:02:20,530
like that I sort of like oh yeah I want

00:02:17,860 --> 00:02:23,470
you to drop those I just don't think

00:02:20,530 --> 00:02:25,870
that way so apologies in advance for

00:02:23,470 --> 00:02:30,520
probably being completely unqualified to

00:02:25,870 --> 00:02:36,310
give this talk I do know the networking

00:02:30,520 --> 00:02:39,040
site so if you look at me and say I'm

00:02:36,310 --> 00:02:43,300
not running ipv6 I am going to look back

00:02:39,040 --> 00:02:46,000
at you and say are you sure it's on by

00:02:43,300 --> 00:02:48,160
default in most major operating systems

00:02:46,000 --> 00:02:52,930
the only one I can think of where it

00:02:48,160 --> 00:02:56,320
isn't is raspberry pi if you're running

00:02:52,930 --> 00:02:58,920
a modern operating system it's turned on

00:02:56,320 --> 00:03:01,960
by default it's running on linked local

00:02:58,920 --> 00:03:04,630
so that said if your insecurity and

00:03:01,960 --> 00:03:07,740
you've already got the ipv6 turned on or

00:03:04,630 --> 00:03:12,460
worse yet your users have it turned on

00:03:07,740 --> 00:03:17,590
you probably want to secure it in fact I

00:03:12,460 --> 00:03:19,630
really hope we all want to secure it so

00:03:17,590 --> 00:03:22,330
let's get a little bit started with how

00:03:19,630 --> 00:03:23,890
are we going to do ipv6 um at the end of

00:03:22,330 --> 00:03:26,410
this presentation I'll take it out a

00:03:23,890 --> 00:03:29,230
full screen mode so that you can see the

00:03:26,410 --> 00:03:30,910
URL I'm going off of this is all

00:03:29,230 --> 00:03:33,580
available online in a couple different

00:03:30,910 --> 00:03:37,900
places that's called redundancy so I can

00:03:33,580 --> 00:03:42,519
walk in and it's just there but I have

00:03:37,900 --> 00:03:45,670
two links here on how to build your ipv6

00:03:42,519 --> 00:03:48,640
Network Louisiana State University wrote

00:03:45,670 --> 00:03:51,489
a fantastic white paper on how they did

00:03:48,640 --> 00:03:53,650
theirs and it included we fell into this

00:03:51,489 --> 00:03:57,250
pitfall and there is this booby trap

00:03:53,650 --> 00:03:59,260
over here and we had to rework it

00:03:57,250 --> 00:04:01,750
several times here's how we got it right

00:03:59,260 --> 00:04:03,700
so it's a fantastic white paper if you

00:04:01,750 --> 00:04:06,519
don't want to start off learning your

00:04:03,700 --> 00:04:08,590
lessons the hard way and then the one I

00:04:06,519 --> 00:04:11,950
liked was don't have the plaid polyester

00:04:08,590 --> 00:04:14,590
leisure suit of ipv6 networks they throw

00:04:11,950 --> 00:04:17,019
in some interesting thoughts on how to

00:04:14,590 --> 00:04:19,540
do your naming you've got so much more

00:04:17,019 --> 00:04:22,030
address space available than you had

00:04:19,540 --> 00:04:24,630
before that they recommend

00:04:22,030 --> 00:04:27,310
you know taking some of those bites and

00:04:24,630 --> 00:04:29,200
making a and after all you will get in

00:04:27,310 --> 00:04:32,560
the habit of recognizing them you know

00:04:29,200 --> 00:04:34,330
this building gets this you know couple

00:04:32,560 --> 00:04:37,419
of bites together you know so two words

00:04:34,330 --> 00:04:39,490
for the building floor something to make

00:04:37,419 --> 00:04:41,230
it easily identifiable something to

00:04:39,490 --> 00:04:44,020
bring extra meeting you've got the

00:04:41,230 --> 00:04:46,419
address space permit like you've got the

00:04:44,020 --> 00:04:48,220
address space which is an interesting

00:04:46,419 --> 00:04:53,200
point since we don't think about

00:04:48,220 --> 00:04:56,260
addresses that way right now same thing

00:04:53,200 --> 00:04:59,260
for security as I said I am NOT a

00:04:56,260 --> 00:05:01,150
security person will get into some of

00:04:59,260 --> 00:05:03,430
the details I may be blurring it a

00:05:01,150 --> 00:05:05,890
little bit of National Institutes

00:05:03,430 --> 00:05:10,750
standards and technology has published

00:05:05,890 --> 00:05:12,310
guidelines for doing this it's it's a

00:05:10,750 --> 00:05:15,280
good overview to get you started with

00:05:12,310 --> 00:05:18,160
the language this again maybe because

00:05:15,280 --> 00:05:19,150
I'm not a security person i found it

00:05:18,160 --> 00:05:25,360
looked like a good cure for

00:05:19,150 --> 00:05:29,350
sleeplessness for me I liked the ipv6

00:05:25,360 --> 00:05:31,900
security overview the vulnerability

00:05:29,350 --> 00:05:34,390
concepts have not changed that much with

00:05:31,900 --> 00:05:35,919
the advent of ipv6 I think the most

00:05:34,390 --> 00:05:39,370
important thing you can get out of this

00:05:35,919 --> 00:05:41,740
talk is oh we have pretty much the exact

00:05:39,370 --> 00:05:43,690
same concerns I just need a little

00:05:41,740 --> 00:05:46,390
translation chart this is what I called

00:05:43,690 --> 00:05:49,419
it in ipv4 this is what I call it an

00:05:46,390 --> 00:05:51,910
ipv6 everything you've learned is still

00:05:49,419 --> 00:05:53,410
valid you might twist it a little bit

00:05:51,910 --> 00:05:55,030
you might change your vocabulary a

00:05:53,410 --> 00:05:58,479
little bit it's the same thing you're

00:05:55,030 --> 00:06:02,650
ready for it you can do this report on

00:05:58,479 --> 00:06:05,650
ipv6 security test methodology we just

00:06:02,650 --> 00:06:07,870
went through a big firewall review

00:06:05,650 --> 00:06:11,620
process and had to figure out how to

00:06:07,870 --> 00:06:14,680
test these things including for ipv6

00:06:11,620 --> 00:06:16,780
when we don't have any experience with

00:06:14,680 --> 00:06:19,270
ipv6 firewalls that's when it's really

00:06:16,780 --> 00:06:21,100
helpful instead of learning things the

00:06:19,270 --> 00:06:24,160
hard way and perhaps not having the

00:06:21,100 --> 00:06:27,310
feature we want refer to somebody else's

00:06:24,160 --> 00:06:30,370
test methodology and then here's another

00:06:27,310 --> 00:06:34,100
one where cisco has done a here are the

00:06:30,370 --> 00:06:38,080
vulnerabilities here's how to avoid them

00:06:34,100 --> 00:06:38,080
if you're using cisco routers

00:06:45,560 --> 00:06:51,030
hopefully I don't have to comment much

00:06:47,970 --> 00:06:53,759
on this does anybody want me to go into

00:06:51,030 --> 00:06:57,990
why network address translation is not a

00:06:53,759 --> 00:07:00,389
form of security the short version is to

00:06:57,990 --> 00:07:02,490
do network address translation you have

00:07:00,389 --> 00:07:05,069
to keep that table of here's the inside

00:07:02,490 --> 00:07:07,110
address and the port it's using here's

00:07:05,069 --> 00:07:09,599
the outside address and the port it's

00:07:07,110 --> 00:07:14,099
using what is that when you have to keep

00:07:09,599 --> 00:07:18,440
track of this that's called stateful so

00:07:14,099 --> 00:07:20,729
when you do NAT yes this one's awesome

00:07:18,440 --> 00:07:23,159
when you do not you've already got the

00:07:20,729 --> 00:07:25,199
state fulness track they throw in a

00:07:23,159 --> 00:07:28,280
stateful firewall for free what you want

00:07:25,199 --> 00:07:30,599
is a stateful firewall but please as a

00:07:28,280 --> 00:07:34,050
network manager who has to go

00:07:30,599 --> 00:07:36,599
troubleshoot this mess the less NAT the

00:07:34,050 --> 00:07:38,849
better you throw in and that and I can't

00:07:36,599 --> 00:07:45,479
troubleshoot my way out of that nap it's

00:07:38,849 --> 00:07:47,879
much worse than a paper bag if you enjoy

00:07:45,479 --> 00:07:51,690
it there is a youtube video with a nap

00:07:47,879 --> 00:07:56,069
fanboy again I'll bring up the URL at

00:07:51,690 --> 00:07:58,469
the end oh I forgot to mention one of my

00:07:56,069 --> 00:08:00,360
things about talks I prefer to be

00:07:58,469 --> 00:08:03,060
interrupted when you have questions

00:08:00,360 --> 00:08:05,699
please feel free to interrupt me that's

00:08:03,060 --> 00:08:07,770
the reason why I have slides if I just

00:08:05,699 --> 00:08:10,319
go off of the slides and nobody says

00:08:07,770 --> 00:08:12,120
anything it will put me to sleep you

00:08:10,319 --> 00:08:14,340
don't want the speaker going to sleep if

00:08:12,120 --> 00:08:16,860
you interrupt me when you have questions

00:08:14,340 --> 00:08:19,469
or comments that will keep me awake I

00:08:16,860 --> 00:08:21,120
like getting lost in the weeds and then

00:08:19,469 --> 00:08:23,610
I go back and I look at the slides and I

00:08:21,120 --> 00:08:25,500
go oh yes that's where I was the slides

00:08:23,610 --> 00:08:27,750
are here so that we can go get lost in

00:08:25,500 --> 00:08:31,080
the weeds you can interrupt me and I

00:08:27,750 --> 00:08:33,329
won't get too badly off track here's one

00:08:31,080 --> 00:08:35,729
of my translation charts for you what do

00:08:33,329 --> 00:08:39,209
we say in the ipv4 world what do we say

00:08:35,729 --> 00:08:42,690
in the ipv6 world well at a very basic

00:08:39,209 --> 00:08:45,420
level we have art nice little layer to

00:08:42,690 --> 00:08:48,540
what's going on you run the ARP command

00:08:45,420 --> 00:08:52,350
to see what's in your art table it's not

00:08:48,540 --> 00:08:54,670
art in ipv6 reason why it's not ARP is

00:08:52,350 --> 00:08:57,790
ARP is a broadcast protocol

00:08:54,670 --> 00:09:01,510
and ipv6 does no broadcast it will only

00:08:57,790 --> 00:09:02,560
multicast so we have to warp we have to

00:09:01,510 --> 00:09:05,290
find something to replace that

00:09:02,560 --> 00:09:07,720
functionality that doesn't use broadcast

00:09:05,290 --> 00:09:10,570
that uses multicast instead it's called

00:09:07,720 --> 00:09:14,830
NDP neighbor discovery protocol if

00:09:10,570 --> 00:09:19,750
you're on a BSD box you can do NDP a in

00:09:14,830 --> 00:09:23,380
the exact same way off your on Linux IP

00:09:19,750 --> 00:09:25,870
neighbors show so if you wanted to use

00:09:23,380 --> 00:09:30,940
ARP watch for something in the ipv4

00:09:25,870 --> 00:09:34,150
world there's an NDP mon if you want to

00:09:30,940 --> 00:09:38,590
run ping but to a v6 address its ping

00:09:34,150 --> 00:09:42,490
six trace route trace route 6 a lot of

00:09:38,590 --> 00:09:46,060
commands you for instance nmap becomes

00:09:42,490 --> 00:09:50,230
nmap dash 6 the host command dig command

00:09:46,060 --> 00:09:53,740
goes from host and dig to host six dig

00:09:50,230 --> 00:09:55,780
six and then if you're used to IP tables

00:09:53,740 --> 00:09:58,600
so you go ok so it's either paying ping

00:09:55,780 --> 00:10:00,070
6 and map and map minus 6 I got the

00:09:58,600 --> 00:10:01,930
pattern here i'll just try both of them

00:10:00,070 --> 00:10:04,930
now then they have to throw you a curve

00:10:01,930 --> 00:10:06,990
like IP tables and IP 6 tails this time

00:10:04,930 --> 00:10:10,830
we need the 6 in the middle because

00:10:06,990 --> 00:10:15,960
consistency is for smaller minded people

00:10:10,830 --> 00:10:15,960
clearly yes

00:10:21,519 --> 00:10:29,329
Nancy's question is is the output the

00:10:24,079 --> 00:10:32,389
same not always usually it is very

00:10:29,329 --> 00:10:35,870
similar a lot of commands like netstat

00:10:32,389 --> 00:10:39,949
will now take a dash W flag where W

00:10:35,870 --> 00:10:42,139
stands for wide the problem is the v6

00:10:39,949 --> 00:10:44,089
addresses are so much longer that they

00:10:42,139 --> 00:10:47,540
get truncated and you don't get to see

00:10:44,089 --> 00:10:49,730
all of them so you also learn not only

00:10:47,540 --> 00:10:52,490
do you want the dash 6 you might want to

00:10:49,730 --> 00:10:54,800
dash W in there there's a certain amount

00:10:52,490 --> 00:10:57,709
of trial and error to figure out what's

00:10:54,800 --> 00:10:59,480
right but I can almost guarantee if you

00:10:57,709 --> 00:11:01,100
run into a wall with a certain command

00:10:59,480 --> 00:11:02,720
of you know you're not trying me

00:11:01,100 --> 00:11:04,759
everything I need to see there's

00:11:02,720 --> 00:11:06,740
probably another command flag for that

00:11:04,759 --> 00:11:10,160
I've had to go back and make good

00:11:06,740 --> 00:11:15,499
friends with me and pages again it's

00:11:10,160 --> 00:11:17,660
okay I like my man pages so the part

00:11:15,499 --> 00:11:19,550
where I am comfortable talking about

00:11:17,660 --> 00:11:22,879
what's going on is talking about the

00:11:19,550 --> 00:11:25,279
host firewall I have iptables running on

00:11:22,879 --> 00:11:27,920
a large number of servers and I have IP

00:11:25,279 --> 00:11:30,829
six tables running on a large number of

00:11:27,920 --> 00:11:33,769
servers and the last time I went in and

00:11:30,829 --> 00:11:35,899
looked at how our IP tables had grown I

00:11:33,769 --> 00:11:39,529
have a really good system administrator

00:11:35,899 --> 00:11:42,019
but he is not a security person and I

00:11:39,529 --> 00:11:43,160
went to a talk on IP tables and I came

00:11:42,019 --> 00:11:45,170
back and I looked at what we were

00:11:43,160 --> 00:11:48,170
running and I wanted to run screaming

00:11:45,170 --> 00:11:49,730
out of the room yet can't do that when

00:11:48,170 --> 00:11:51,769
you're the manager of the system so

00:11:49,730 --> 00:11:54,019
instead you sit down with what do we

00:11:51,769 --> 00:11:56,089
have oh goodness why do we have this I

00:11:54,019 --> 00:11:59,179
don't know if I don't know why the rule

00:11:56,089 --> 00:12:01,339
is there it's going out and then came up

00:11:59,179 --> 00:12:03,800
with a nice clean consistent we will be

00:12:01,339 --> 00:12:06,620
putting this IP tables on all of our

00:12:03,800 --> 00:12:08,990
machines and we're not running ip6

00:12:06,620 --> 00:12:11,959
tables anywhere I'm not okay with that

00:12:08,990 --> 00:12:13,970
so we will be putting this IP six tables

00:12:11,959 --> 00:12:15,769
everywhere so after i sat down and went

00:12:13,970 --> 00:12:20,720
through all of that they're really

00:12:15,769 --> 00:12:23,029
almost the same so I'm running a diff on

00:12:20,720 --> 00:12:25,549
the text files I kept on my computer

00:12:23,029 --> 00:12:28,119
because I need master copies in about a

00:12:25,549 --> 00:12:32,420
dozen locations before uncomfortable

00:12:28,119 --> 00:12:34,699
so I just ran a diff on these oh and I

00:12:32,420 --> 00:12:36,350
asked for a machine I could beat up on

00:12:34,699 --> 00:12:39,350
you will see in a later slide this is a

00:12:36,350 --> 00:12:42,949
vm the machine i got was moose so

00:12:39,350 --> 00:12:46,540
everything will be running on moose if i

00:12:42,949 --> 00:12:48,889
don't kick the screen so i've started

00:12:46,540 --> 00:12:51,019
adding some chains one thing i decided

00:12:48,889 --> 00:12:52,209
to do was to put names on them so that i

00:12:51,019 --> 00:12:54,799
could remember what they were doing

00:12:52,209 --> 00:12:57,889
since i'm in the networking group we

00:12:54,799 --> 00:12:59,959
have a VLAN for our servers of mangled

00:12:57,889 --> 00:13:03,470
the IP address we have a VLAN for our

00:12:59,959 --> 00:13:05,600
users and we also have a knock that does

00:13:03,470 --> 00:13:08,509
a lot of monitoring so I've got my

00:13:05,600 --> 00:13:10,610
servers my users and the other group

00:13:08,509 --> 00:13:14,809
that's monitoring us we also do internal

00:13:10,610 --> 00:13:16,610
monitoring TSM for backups and then who

00:13:14,809 --> 00:13:20,110
are my users this is basically defining

00:13:16,610 --> 00:13:23,179
inside versus outside so who's at UNC

00:13:20,110 --> 00:13:26,389
with me so we see I've had to iterate

00:13:23,179 --> 00:13:30,410
out a number of subnets for the ipv4

00:13:26,389 --> 00:13:33,230
world and in the v6 world yeah it's a

00:13:30,410 --> 00:13:35,089
lot more compact again you've got all

00:13:33,230 --> 00:13:38,540
that elbow space so you don't have to

00:13:35,089 --> 00:13:41,240
have multiple subnets unc has three

00:13:38,540 --> 00:13:46,819
Class B networks and a handful of class

00:13:41,240 --> 00:13:50,179
sees I know this is I told you I mangled

00:13:46,819 --> 00:13:52,759
the address is in here but we have a lot

00:13:50,179 --> 00:13:55,970
of address space and on the v4 side it's

00:13:52,759 --> 00:13:59,540
very tight yes why did you do / 64 how

00:13:55,970 --> 00:14:05,470
come you did not do like every / 24 make

00:13:59,540 --> 00:14:05,470
it a size 54 so that your servers

00:14:07,079 --> 00:14:14,139
okay I'm sorry yeah this this is we're

00:14:10,930 --> 00:14:17,139
doing / 64 for every VLAN that's just

00:14:14,139 --> 00:14:19,899
our default every VLAN will be a minimum

00:14:17,139 --> 00:14:22,269
of a / 64 if you can give a use case for

00:14:19,899 --> 00:14:26,050
needing more than that we allocate more

00:14:22,269 --> 00:14:28,240
than that we have done that libraries

00:14:26,050 --> 00:14:31,660
and I biblia have larger allocations

00:14:28,240 --> 00:14:34,990
from us and then for UNC we actually do

00:14:31,660 --> 00:14:37,600
have a / 47 or 248 if you want to look

00:14:34,990 --> 00:14:40,360
at it that way but again the real

00:14:37,600 --> 00:14:42,100
difference here um I move from one

00:14:40,360 --> 00:14:43,959
address space to the other and because

00:14:42,100 --> 00:14:47,259
the other has more elbow room I needed

00:14:43,959 --> 00:14:55,829
fewer lines to define it not really

00:14:47,259 --> 00:14:57,850
scary yet so what do we have to change

00:14:55,829 --> 00:15:01,089
since we're in networking and we do a

00:14:57,850 --> 00:15:04,089
lot of trouble shooting ping ping is my

00:15:01,089 --> 00:15:06,819
friend so I definitely want ICMP turned

00:15:04,089 --> 00:15:08,800
on on my boxes I've met with other

00:15:06,819 --> 00:15:11,620
groups where they don't want that in the

00:15:08,800 --> 00:15:14,620
v4 world you get to choose that in the

00:15:11,620 --> 00:15:16,839
v6 world you do not remember how I said

00:15:14,620 --> 00:15:19,240
we had to have a replacement for ARP

00:15:16,839 --> 00:15:21,519
that uses multicast and it's the

00:15:19,240 --> 00:15:26,019
neighbor discovery protocol that is a

00:15:21,519 --> 00:15:31,920
component of icmpv6 you cannot blanket

00:15:26,019 --> 00:15:31,920
turn off icmpv6 and have your ipv6 work

00:15:35,250 --> 00:15:41,680
I feel that way about it but I like to

00:15:39,130 --> 00:15:43,720
have a target and okay ping anser okay

00:15:41,680 --> 00:15:46,090
this step is working go a little farther

00:15:43,720 --> 00:15:48,580
out go a little farther out so I'm with

00:15:46,090 --> 00:15:50,170
you I'm trying to be a little more

00:15:48,580 --> 00:15:51,940
moderate about it since I'm talking to a

00:15:50,170 --> 00:15:53,470
security audience and I know everybody

00:15:51,940 --> 00:15:54,790
else wants to drop my packets and i'll

00:15:53,470 --> 00:15:56,710
try not to have a heart attack about

00:15:54,790 --> 00:15:59,740
that security through obscurity in

00:15:56,710 --> 00:16:01,480
security thank you see I didn't even

00:15:59,740 --> 00:16:04,120
have to say at this time security

00:16:01,480 --> 00:16:05,890
through obscurity I'm going to go back

00:16:04,120 --> 00:16:08,280
to the slide with the ostrich sticking

00:16:05,890 --> 00:16:14,530
its head in the sand that's not security

00:16:08,280 --> 00:16:18,730
just wait so you do have to leave my pv6

00:16:14,530 --> 00:16:21,370
icmp turned on if you need to go through

00:16:18,730 --> 00:16:24,430
which options and okay we'll leave NDP

00:16:21,370 --> 00:16:27,190
working go ahead I'd rather leave all of

00:16:24,430 --> 00:16:30,820
it turned on though it shows up in so

00:16:27,190 --> 00:16:33,600
many places for crucial to how ipv6

00:16:30,820 --> 00:16:37,870
works another one is the path MTU

00:16:33,600 --> 00:16:40,720
detection I see ipv6 says there will be

00:16:37,870 --> 00:16:44,230
no fragmentation so it has to have good

00:16:40,720 --> 00:16:47,410
path MTU detection that's part of the

00:16:44,230 --> 00:16:50,500
icmpv6 protocol so lots of really cool

00:16:47,410 --> 00:16:52,210
stuff in there it almost always works

00:16:50,500 --> 00:16:54,220
when it doesn't work I've usually been

00:16:52,210 --> 00:16:56,110
able to track it down to why did you

00:16:54,220 --> 00:16:57,310
configure this router this way or more

00:16:56,110 --> 00:16:59,260
often why did you configure this

00:16:57,310 --> 00:17:01,720
firewall this way please turn this

00:16:59,260 --> 00:17:04,320
option back on for me so i can again

00:17:01,720 --> 00:17:10,540
troubleshoot my way out of the paper bag

00:17:04,320 --> 00:17:13,720
um oh right reason why these lines show

00:17:10,540 --> 00:17:17,560
up for my TSM backups that's a v4 only

00:17:13,720 --> 00:17:22,030
server thank you or no thank you IBM for

00:17:17,560 --> 00:17:25,209
that other than that almost everything

00:17:22,030 --> 00:17:27,880
is the same the first place I was told

00:17:25,209 --> 00:17:31,450
to turn on ipv6 was on the campus name

00:17:27,880 --> 00:17:33,760
servers and I went oh great there's only

00:17:31,450 --> 00:17:36,220
going to be like 50,000 people who

00:17:33,760 --> 00:17:37,870
notice if I make these servers burst

00:17:36,220 --> 00:17:40,900
into flames

00:17:37,870 --> 00:17:42,280
it went flawlessly nobody noticed except

00:17:40,900 --> 00:17:45,040
me and I was over in the corner jumping

00:17:42,280 --> 00:17:48,970
up and down almost everything works

00:17:45,040 --> 00:17:51,370
exactly the same no no need for a heart

00:17:48,970 --> 00:17:54,550
attack here some things are different

00:17:51,370 --> 00:18:01,330
though I run the campus DHCP servers as

00:17:54,550 --> 00:18:04,750
well dhcp v4 needs port 67 dhcpv6 need

00:18:01,330 --> 00:18:07,330
support 547 so as soon as you get used

00:18:04,750 --> 00:18:09,460
to oh hey this is just the same you'll

00:18:07,330 --> 00:18:11,890
run into an application like dhcp where

00:18:09,460 --> 00:18:14,380
it runs the v6 on a different port just

00:18:11,890 --> 00:18:17,470
keep your eyes open for that a few of us

00:18:14,380 --> 00:18:21,970
will jump out and bite you and then I

00:18:17,470 --> 00:18:25,270
defined my DHCP server VLANs this is the

00:18:21,970 --> 00:18:27,460
whole sum total difference between

00:18:25,270 --> 00:18:30,700
iptables that I put on all of my servers

00:18:27,460 --> 00:18:33,790
and IP six tables that I put on all of

00:18:30,700 --> 00:18:35,760
my servers not a huge amount of

00:18:33,790 --> 00:18:39,130
difference so everything you know

00:18:35,760 --> 00:18:45,460
translates fairly painlessly into the

00:18:39,130 --> 00:18:48,780
world of ipv6 so big message now don't

00:18:45,460 --> 00:18:48,780
panic you can do it yes

00:18:53,680 --> 00:19:02,550
oh you did have to go there Robbie asked

00:18:57,280 --> 00:19:02,550
if I actually use the dhcp 6 protocol um

00:19:03,090 --> 00:19:13,210
yes very hesitantly the problems with

00:19:08,770 --> 00:19:14,920
dhcpv6 if I go too far down this rabbit

00:19:13,210 --> 00:19:18,520
hole it's going to be very bad for my

00:19:14,920 --> 00:19:26,260
blood pressure I hate what is C has done

00:19:18,520 --> 00:19:28,900
with dhcpv6 thank you and that's why I'm

00:19:26,260 --> 00:19:30,970
running it as he said there are some

00:19:28,900 --> 00:19:34,540
things you can only do with DHCP and

00:19:30,970 --> 00:19:38,680
that's why I'm running it I would say my

00:19:34,540 --> 00:19:43,840
biggest completely legitimate grief with

00:19:38,680 --> 00:19:47,770
ISC dhcpd is it doesn't do what it says

00:19:43,840 --> 00:19:49,870
in the documentation one of those items

00:19:47,770 --> 00:19:52,060
where it does not do what it says in the

00:19:49,870 --> 00:19:55,030
documentation I say through clenched

00:19:52,060 --> 00:19:58,540
teeth is it says it will rotate its

00:19:55,030 --> 00:20:02,260
leases log for you now it should rotate

00:19:58,540 --> 00:20:05,610
its leases log for you that said I've

00:20:02,260 --> 00:20:08,560
been known to get an alert that says

00:20:05,610 --> 00:20:10,690
dhcpd isn't running and I go look at it

00:20:08,560 --> 00:20:16,810
and the leases file has hit the 2gig

00:20:10,690 --> 00:20:19,810
wall and I say hmm I rotate the leases

00:20:16,810 --> 00:20:23,320
logged manually and the process suddenly

00:20:19,810 --> 00:20:27,550
restarts if you say you're going to roll

00:20:23,320 --> 00:20:30,490
the log for me do it don't put it in the

00:20:27,550 --> 00:20:33,460
documentation and crash and burn badly

00:20:30,490 --> 00:20:38,410
and then this is where we run into

00:20:33,460 --> 00:20:41,860
another interesting characteristic for a

00:20:38,410 --> 00:20:44,530
university we have some departments with

00:20:41,860 --> 00:20:47,560
more money than others let's concentrate

00:20:44,530 --> 00:20:49,780
on the ones with less money and then

00:20:47,560 --> 00:20:55,280
let's think about printers particularly

00:20:49,780 --> 00:21:00,470
the good old HP printers in and older

00:20:55,280 --> 00:21:02,540
we have many yes we have laserjet for my

00:21:00,470 --> 00:21:11,090
bet I could find a couple of laserjet to

00:21:02,540 --> 00:21:15,700
and laserjet three on our network I'm

00:21:11,090 --> 00:21:15,700
yes Robbie is recording me

00:21:20,320 --> 00:21:34,000
yes because they don't die yes which is

00:21:30,159 --> 00:21:36,880
why I love them be the only reason why I

00:21:34,000 --> 00:21:40,059
upgraded from my laserjet to this is a

00:21:36,880 --> 00:21:42,669
true story I was trying to print some of

00:21:40,059 --> 00:21:45,309
the figures in my dissertation including

00:21:42,669 --> 00:21:48,279
a nice little decision flowchart it was

00:21:45,309 --> 00:21:51,580
fairly detailed on when it was

00:21:48,279 --> 00:21:52,629
permissible to use qos and I think

00:21:51,580 --> 00:21:57,490
you'll remember from the beginning I

00:21:52,629 --> 00:21:59,860
talk I consider that a bad word qos is a

00:21:57,490 --> 00:22:02,500
lot like Matt I don't want either one of

00:21:59,860 --> 00:22:05,129
them on my network I can design a better

00:22:02,500 --> 00:22:10,330
network that doesn't need either one

00:22:05,129 --> 00:22:13,419
please let me have that chance good for

00:22:10,330 --> 00:22:15,460
them good for them when they go to

00:22:13,419 --> 00:22:21,159
troubleshoot it too so we have a lot of

00:22:15,460 --> 00:22:24,460
very old printers on our network a lot

00:22:21,159 --> 00:22:26,080
of thumb don't have passwords on them

00:22:24,460 --> 00:22:28,809
yeah I probably shouldn't say this one

00:22:26,080 --> 00:22:30,429
I'm being recorded we get to have fun

00:22:28,809 --> 00:22:31,750
with some departments that when they get

00:22:30,429 --> 00:22:33,340
reported for that will change the

00:22:31,750 --> 00:22:38,980
password and see how long it takes them

00:22:33,340 --> 00:22:41,529
to notice so far no one has now one of

00:22:38,980 --> 00:22:43,389
the problems with old devices after a

00:22:41,529 --> 00:22:45,700
while the manufacturer stops making

00:22:43,389 --> 00:22:49,809
firmware for them and they might not

00:22:45,700 --> 00:22:51,820
support modern protocols will so it was

00:22:49,809 --> 00:22:54,250
our computer science department as a

00:22:51,820 --> 00:22:56,799
matter of fact and they actually do

00:22:54,250 --> 00:22:58,980
refresh their printers a little more

00:22:56,799 --> 00:23:05,039
often than some of the other departments

00:22:58,980 --> 00:23:07,990
old HP printers don't do ipv6 very well

00:23:05,039 --> 00:23:12,009
the problem was they do a little bit of

00:23:07,990 --> 00:23:15,850
ipv6 and what it did was once a second

00:23:12,009 --> 00:23:18,039
ask my dhcpv6 server for release do

00:23:15,850 --> 00:23:19,929
nothing with it next second ask my

00:23:18,039 --> 00:23:22,600
server for release

00:23:19,929 --> 00:23:25,749
and they did have a couple dozen of

00:23:22,600 --> 00:23:28,119
those asking for a lease once per second

00:23:25,749 --> 00:23:30,639
now remember that Lisa's file that's

00:23:28,119 --> 00:23:34,929
supposed to roll every two gig it was

00:23:30,639 --> 00:23:37,509
staying up for about six hours and I get

00:23:34,929 --> 00:23:40,929
tired of getting paged after a while so

00:23:37,509 --> 00:23:45,970
then I yeah and we see carted off on the

00:23:40,929 --> 00:23:53,559
printers so I that's some of the fun you

00:23:45,970 --> 00:23:57,190
can okay thank you I will find out what

00:23:53,559 --> 00:24:00,100
model the printers were we can fix this

00:23:57,190 --> 00:24:05,350
in this case we fixed it by turning it

00:24:00,100 --> 00:24:08,679
all there is another butcher this didn't

00:24:05,350 --> 00:24:11,019
actually hit my DHCP six server I'm just

00:24:08,679 --> 00:24:13,809
going to throw it in because it had some

00:24:11,019 --> 00:24:15,850
similar characteristics only instead of

00:24:13,809 --> 00:24:20,669
the frequency being once per second

00:24:15,850 --> 00:24:26,220
asking for a dhcp v6 lease these are

00:24:20,669 --> 00:24:28,869
newer computers with Intel Knicks I

00:24:26,220 --> 00:24:32,919
don't remember which model but get the

00:24:28,869 --> 00:24:35,879
new shiny thing with an intel nic new

00:24:32,919 --> 00:24:40,929
shiny lenovo desktop i think it was the

00:24:35,879 --> 00:24:45,789
m3 whatever Intel network card comes

00:24:40,929 --> 00:24:48,519
with that if you leave ipv6 enabled by

00:24:45,789 --> 00:24:54,100
default it decides to do a neighbor

00:24:48,519 --> 00:24:58,779
discovery every micro second 10 to the

00:24:54,100 --> 00:25:01,570
minus 6 so a million times a second and

00:24:58,779 --> 00:25:06,009
i'm actually not exaggerating 1 million

00:25:01,570 --> 00:25:07,539
times per second it says who are my

00:25:06,009 --> 00:25:10,570
neighbors who are many who are my

00:25:07,539 --> 00:25:14,950
neighbors that turns into a multicast

00:25:10,570 --> 00:25:18,070
flood very quickly this is on link local

00:25:14,950 --> 00:25:20,529
it's not enabled on the router on these

00:25:18,070 --> 00:25:22,450
VLAN swear this has happened it's just

00:25:20,529 --> 00:25:25,259
someone has decided to do their custom

00:25:22,450 --> 00:25:30,370
build not the UNC recommended build and

00:25:25,259 --> 00:25:31,930
it blows up so

00:25:30,370 --> 00:25:34,300
some of those things you might want to

00:25:31,930 --> 00:25:36,610
watch out for once a second getting a

00:25:34,300 --> 00:25:38,320
multicast flood anybody know what the

00:25:36,610 --> 00:25:42,040
Canaries in the coal mine are when you

00:25:38,320 --> 00:25:44,890
have a multicast flood what was I

00:25:42,040 --> 00:25:46,990
talking about before old printers if you

00:25:44,890 --> 00:25:50,230
get your printers old enough they're 10

00:25:46,990 --> 00:25:52,420
meg only and it doesn't take much of a

00:25:50,230 --> 00:25:54,250
flood particularly when your end users

00:25:52,420 --> 00:25:56,620
are connected at gig and asking a

00:25:54,250 --> 00:26:00,750
million times a second it doesn't take

00:25:56,620 --> 00:26:03,640
much to flood out a 10 mega only printer

00:26:00,750 --> 00:26:06,309
they're the Canaries in the coal mine if

00:26:03,640 --> 00:26:08,500
we get a phone call and someone says

00:26:06,309 --> 00:26:11,559
things seem a little bit slow and I

00:26:08,500 --> 00:26:13,630
can't print or sometimes they say things

00:26:11,559 --> 00:26:15,610
seem a little bit slow can you print

00:26:13,630 --> 00:26:18,100
something for me to the oldest and

00:26:15,610 --> 00:26:20,440
slowest printer you have over there they

00:26:18,100 --> 00:26:23,230
can't print there's usually some sort of

00:26:20,440 --> 00:26:27,730
flood going on and we can look that up

00:26:23,230 --> 00:26:30,309
pretty easily so fun little stories of

00:26:27,730 --> 00:26:35,830
how we can flood the network in New in

00:26:30,309 --> 00:26:39,100
different ways there is a replacement to

00:26:35,830 --> 00:26:41,080
IP tables I haven't sat down to go

00:26:39,100 --> 00:26:42,820
through it yet because my boxes are

00:26:41,080 --> 00:26:45,520
running red hat enterprise linux and

00:26:42,820 --> 00:26:48,400
they don't have the new kernel with NF

00:26:45,520 --> 00:26:52,300
tables in it netfilter tables it bundles

00:26:48,400 --> 00:26:54,790
up iptables ip6 tables arc table and eb

00:26:52,300 --> 00:26:56,770
tables and i can't tell you the number

00:26:54,790 --> 00:26:58,510
of times I've wanted to go oh if I could

00:26:56,770 --> 00:27:00,400
just say this piece of layer 2

00:26:58,510 --> 00:27:02,620
information with this piece of layer 3

00:27:00,400 --> 00:27:05,100
information drop it on the floor quickly

00:27:02,620 --> 00:27:05,100
or

00:27:13,340 --> 00:27:23,510
yes I am very much looking forward to oh

00:27:18,220 --> 00:27:26,240
sorry his comment was and projection his

00:27:23,510 --> 00:27:30,200
comment was that the syntax for NF

00:27:26,240 --> 00:27:34,880
tables is semantics almost exactly the

00:27:30,200 --> 00:27:37,730
same as open flow so we can start to

00:27:34,880 --> 00:27:41,030
have a lot of fun with this and I've

00:27:37,730 --> 00:27:42,530
always wanted to merge this plus what

00:27:41,030 --> 00:27:45,400
did I just spend two slides talking

00:27:42,530 --> 00:27:48,230
about my eyepiece tables rules are

00:27:45,400 --> 00:27:50,030
identical to my IP six tables rules

00:27:48,230 --> 00:27:51,650
except in a couple of little corner

00:27:50,030 --> 00:27:53,390
cases where I have to change where I'm

00:27:51,650 --> 00:27:55,040
talking about the address space or one

00:27:53,390 --> 00:27:57,050
of those applications where it changes

00:27:55,040 --> 00:27:59,810
so wouldn't it be nice if I could just

00:27:57,050 --> 00:28:02,450
do all of my rules together iptables and

00:27:59,810 --> 00:28:07,580
ip6 tables I think that sounds fantastic

00:28:02,450 --> 00:28:10,310
but they had so much duplication and the

00:28:07,580 --> 00:28:11,600
code and got it so specialized it was

00:28:10,310 --> 00:28:15,950
one of those we're going to start over

00:28:11,600 --> 00:28:17,540
with netfilter tables and f tables I'm

00:28:15,950 --> 00:28:23,030
really looking forward to getting to

00:28:17,540 --> 00:28:24,620
play with this but that's new shiny I

00:28:23,030 --> 00:28:29,150
haven't played with it so we're going to

00:28:24,620 --> 00:28:32,320
the next slide so what are our ipv6

00:28:29,150 --> 00:28:36,650
security tools we hadn't even turned on

00:28:32,320 --> 00:28:40,100
ipv6 yet when th see the hackers choice

00:28:36,650 --> 00:28:42,320
released their ipv6 toolkit and I was

00:28:40,100 --> 00:28:45,110
like oh man they got to the starting

00:28:42,320 --> 00:28:49,130
line before we did this this is not a

00:28:45,110 --> 00:28:53,270
good thing so the first one out the door

00:28:49,130 --> 00:28:55,550
came out number of years ago followed a

00:28:53,270 --> 00:29:00,310
little more recently by si6 networks

00:28:55,550 --> 00:29:03,860
ipv6 toolkit a little more in the

00:29:00,310 --> 00:29:06,410
testing realm than completely the

00:29:03,860 --> 00:29:08,750
hacking realm and since i'm more into

00:29:06,410 --> 00:29:11,380
the i don't want to blow up my network I

00:29:08,750 --> 00:29:13,850
just built it I don't want to blow it up

00:29:11,380 --> 00:29:16,460
that is the package i'll actually

00:29:13,850 --> 00:29:17,770
concentrate on and i looked at a lot of

00:29:16,460 --> 00:29:19,540
the tools who went

00:29:17,770 --> 00:29:22,570
not going to do a flood over here now

00:29:19,540 --> 00:29:24,400
I'm not going to do that so my plan was

00:29:22,570 --> 00:29:26,050
to step through all of the tools to show

00:29:24,400 --> 00:29:28,240
you how they worked and then I kept

00:29:26,050 --> 00:29:31,120
going but I don't want to flood my

00:29:28,240 --> 00:29:34,210
network so we'll go through the ones i

00:29:31,120 --> 00:29:37,840
found more benign because i like my

00:29:34,210 --> 00:29:41,230
network another tool from SI fix

00:29:37,840 --> 00:29:43,450
networks is their ipv6 mon it is an

00:29:41,230 --> 00:29:45,880
active probe to discover the ipv6

00:29:43,450 --> 00:29:48,670
addresses that's an interesting thing

00:29:45,880 --> 00:29:51,370
because that gives us a third or fourth

00:29:48,670 --> 00:29:54,430
tool to do the same thing and they don't

00:29:51,370 --> 00:30:00,760
all agree on who's there so you may want

00:29:54,430 --> 00:30:03,220
to use all of them yes ipv6 month I did

00:30:00,760 --> 00:30:05,170
not poke at it but this bit about active

00:30:03,220 --> 00:30:06,610
probing to me says it's going to have to

00:30:05,170 --> 00:30:11,400
be on the local link the question was

00:30:06,610 --> 00:30:14,230
does ipv6 Mon work on link local only I

00:30:11,400 --> 00:30:17,710
did not look at it to be positive but it

00:30:14,230 --> 00:30:19,750
almost certainly does because there's so

00:30:17,710 --> 00:30:22,180
much there's multicast groups and then

00:30:19,750 --> 00:30:25,150
everybody responds to it that only work

00:30:22,180 --> 00:30:27,400
on link local so my guess is that it

00:30:25,150 --> 00:30:31,030
does but I have not investigated that

00:30:27,400 --> 00:30:34,270
one there scape II Python tool this is

00:30:31,030 --> 00:30:37,600
general purpose for build a packet build

00:30:34,270 --> 00:30:40,870
a packet that scape E is your tool there

00:30:37,600 --> 00:30:43,000
is a firewall tester built on Skippy

00:30:40,870 --> 00:30:45,130
ready to go so if you want to roll your

00:30:43,000 --> 00:30:49,920
own ghost ap if you just want to test a

00:30:45,130 --> 00:30:54,190
firewall try ft 6 or the ipv6 toolkit

00:30:49,920 --> 00:30:58,810
and then while I was poking around I

00:30:54,190 --> 00:31:02,830
found Chiron and NDP mon NDP mon is the

00:30:58,810 --> 00:31:06,790
ARP watch analogue for ipv6 so we have

00:31:02,830 --> 00:31:11,560
other tools and I I teach a class on

00:31:06,790 --> 00:31:13,060
networking every spring and I'm quite

00:31:11,560 --> 00:31:15,370
lucky i often get students who are

00:31:13,060 --> 00:31:19,480
already very good at this so i can learn

00:31:15,370 --> 00:31:22,360
from them recently had a student from

00:31:19,480 --> 00:31:25,090
the Army Signal Corps who taught me

00:31:22,360 --> 00:31:26,710
about security onion how all these

00:31:25,090 --> 00:31:28,270
things had been packaged together and

00:31:26,710 --> 00:31:29,980
just watching him jump from one

00:31:28,270 --> 00:31:31,900
application to the next

00:31:29,980 --> 00:31:34,299
to the next and it was pulling along the

00:31:31,900 --> 00:31:36,700
same data and you know now let's analyze

00:31:34,299 --> 00:31:38,620
it over here I was really quite

00:31:36,700 --> 00:31:42,750
impressed with that nice little

00:31:38,620 --> 00:31:45,730
all-in-one boot from this CD toolkit

00:31:42,750 --> 00:31:47,710
there's nothing like that for ipv6 that

00:31:45,730 --> 00:31:50,080
I've seen yet so bring your own duct

00:31:47,710 --> 00:31:52,299
tape and this means you do need to have

00:31:50,080 --> 00:31:53,530
a goal and a plan for that and that's

00:31:52,299 --> 00:31:56,650
where you can go back and look at the

00:31:53,530 --> 00:32:01,030
testing methodology link that I

00:31:56,650 --> 00:32:05,140
suggested and now it's time for me to

00:32:01,030 --> 00:32:08,620
jump in and make some trouble so like i

00:32:05,140 --> 00:32:12,429
said i got a vm to beat up on on moose i

00:32:08,620 --> 00:32:15,850
did have to just install live p captive

00:32:12,429 --> 00:32:20,110
l and then just jumped in grab the ipv6

00:32:15,850 --> 00:32:23,049
toolkit I don't install anything without

00:32:20,110 --> 00:32:26,919
looking at it first so first I looked at

00:32:23,049 --> 00:32:29,950
it then i installed it read the read me

00:32:26,919 --> 00:32:31,120
and went read the readme Emmett yeah you

00:32:29,950 --> 00:32:34,990
know there's not even a dot slash

00:32:31,120 --> 00:32:37,809
configure so make all boom and all the

00:32:34,990 --> 00:32:40,540
commands were built right there they all

00:32:37,809 --> 00:32:43,450
end with a six so you can do this LS

00:32:40,540 --> 00:32:46,150
grep for what ends in a six and you're

00:32:43,450 --> 00:32:48,340
there or you can see D to the manuals

00:32:46,150 --> 00:32:50,590
directory again I did not install these

00:32:48,340 --> 00:32:53,169
in the standard directory I didn't have

00:32:50,590 --> 00:32:57,160
the end man path so I had to use Enroth

00:32:53,169 --> 00:32:58,630
to meet them read them yeah I'm much

00:32:57,160 --> 00:33:00,340
happier on the UNIX side than the

00:32:58,630 --> 00:33:03,370
security side this should probably be

00:33:00,340 --> 00:33:07,330
clear by now I like security especially

00:33:03,370 --> 00:33:09,790
if someone else does it the standard

00:33:07,330 --> 00:33:12,490
options for all of these tools they all

00:33:09,790 --> 00:33:15,880
took dash I in an interface bayahibe

00:33:12,490 --> 00:33:18,790
dash h4 display help and a dash V to be

00:33:15,880 --> 00:33:22,059
verbose these are good options to have

00:33:18,790 --> 00:33:23,980
on unix tools when you want to do

00:33:22,059 --> 00:33:25,990
something on linked local and as we were

00:33:23,980 --> 00:33:29,049
just talking there are many ways to say

00:33:25,990 --> 00:33:31,030
show me all my link local addresses you

00:33:29,049 --> 00:33:32,910
know all my link local neighbors well

00:33:31,030 --> 00:33:36,460
the problem with link local addresses

00:33:32,910 --> 00:33:40,480
what is localhost in the world of ipv6

00:33:36,460 --> 00:33:41,920
it's colon colon 1 so you can get a

00:33:40,480 --> 00:33:44,110
loopback I'm sorry

00:33:41,920 --> 00:33:46,570
you have a loopback address on every

00:33:44,110 --> 00:33:48,940
single interface so if you want to say

00:33:46,570 --> 00:33:51,490
you know ping loopback you're going to

00:33:48,940 --> 00:33:54,310
have to give it which interface pinks

00:33:51,490 --> 00:33:56,410
loopback or which interface pings the

00:33:54,310 --> 00:33:59,460
multicast group of all of my link local

00:33:56,410 --> 00:34:02,260
neighbors every single interface

00:33:59,460 --> 00:34:05,380
wireless if you've got any tunneling

00:34:02,260 --> 00:34:07,450
mechanism your actual network interfaces

00:34:05,380 --> 00:34:09,490
they've all got that multicast group

00:34:07,450 --> 00:34:12,880
that would be that would exist in be

00:34:09,490 --> 00:34:20,800
valid you do often need to specify what

00:34:12,880 --> 00:34:23,140
interface you're going out of so the

00:34:20,800 --> 00:34:26,950
first tool just going alphabetically is

00:34:23,140 --> 00:34:29,679
adder six an ipv6 address analysis and

00:34:26,950 --> 00:34:32,830
manipulation tool I didn't see time

00:34:29,679 --> 00:34:35,710
manipulation in there but adder six dash

00:34:32,830 --> 00:34:38,890
a pic and address dash D for decode

00:34:35,710 --> 00:34:41,080
decode that ipv6 address probably my

00:34:38,890 --> 00:34:44,380
favorite website for doing that is v6

00:34:41,080 --> 00:34:46,450
decode com you can hover over the bites

00:34:44,380 --> 00:34:48,790
and it'll tell you things about them I

00:34:46,450 --> 00:34:51,130
like that website there's also Tavian

00:34:48,790 --> 00:34:53,560
it's a perl script you can download it

00:34:51,130 --> 00:34:56,500
if you want to run it locally or I've

00:34:53,560 --> 00:34:59,800
always just used it there or you can

00:34:56,500 --> 00:35:02,020
install ipv6 calc command line tool for

00:34:59,800 --> 00:35:06,280
a unix I've built it for a number of

00:35:02,020 --> 00:35:09,160
different targets nice simple easy pick

00:35:06,280 --> 00:35:11,320
one that you like and use it so I saw a

00:35:09,160 --> 00:35:13,000
lot of alternatives to add or six but

00:35:11,320 --> 00:35:15,300
this one doesn't involve flooding my

00:35:13,000 --> 00:35:18,850
network so I perfectly happy to try it

00:35:15,300 --> 00:35:22,180
so I throw in an adder six blah blah I

00:35:18,850 --> 00:35:25,000
threw in the / 64 just out of habit I'm

00:35:22,180 --> 00:35:28,450
used to doing it that way and it barked

00:35:25,000 --> 00:35:30,730
at me address not valid I say oh maybe

00:35:28,450 --> 00:35:32,920
it didn't want the netmask in there so I

00:35:30,730 --> 00:35:35,380
try it again without the netmask and it

00:35:32,920 --> 00:35:37,840
tells me that this is the IP address for

00:35:35,380 --> 00:35:43,320
moose you can look it up in DNS moose

00:35:37,840 --> 00:35:47,050
net unc edu it's unicast global global

00:35:43,320 --> 00:35:49,720
low byte and unspecified it's not

00:35:47,050 --> 00:35:53,170
looking you know so then I threw in

00:35:49,720 --> 00:35:55,120
mooses link local address and it comes

00:35:53,170 --> 00:35:57,430
back and says this is unicast

00:35:55,120 --> 00:35:59,770
it specifies one machine not a group of

00:35:57,430 --> 00:36:03,010
machines with multicast it is linked

00:35:59,770 --> 00:36:05,860
local so it's on the length i triple e

00:36:03,010 --> 00:36:11,590
derived and then it's giving me the oh

00:36:05,860 --> 00:36:13,350
you I anyone recognize that oh you I yes

00:36:11,590 --> 00:36:18,010
the first three bites of the mac address

00:36:13,350 --> 00:36:20,110
that oh you I is vmware so I look at

00:36:18,010 --> 00:36:24,700
that and go yep I'm running it on a vm I

00:36:20,110 --> 00:36:28,570
know this ok so the first tool wasn't so

00:36:24,700 --> 00:36:30,910
scary let's move on to the next one I go

00:36:28,570 --> 00:36:33,940
Oh Flo labels one of the interesting

00:36:30,910 --> 00:36:37,810
things about ipv6 it adds a flow label

00:36:33,940 --> 00:36:39,700
to every packet and this instead of

00:36:37,810 --> 00:36:42,040
having to do tricks on your router

00:36:39,700 --> 00:36:44,200
should you decide to turn on something

00:36:42,040 --> 00:36:46,180
like quality of service if you're

00:36:44,200 --> 00:36:50,110
messing with the net flow no the flow

00:36:46,180 --> 00:36:52,390
identifies itself in ipv6 this is part

00:36:50,110 --> 00:36:54,970
of the same flow the same conversation

00:36:52,390 --> 00:37:04,440
that's going on it's self identifying

00:36:54,970 --> 00:37:04,440
which is wicked cool actually yes yes

00:37:05,280 --> 00:37:11,260
yes but there are interesting thing that

00:37:08,860 --> 00:37:12,700
I can do with that do I trust it do I

00:37:11,260 --> 00:37:17,310
not would you run this in that

00:37:12,700 --> 00:37:17,310
production Network probably not yeah

00:37:27,070 --> 00:37:34,370
and I tend to rate limit what I

00:37:30,380 --> 00:37:35,870
professes yeah I tend to rate limit

00:37:34,370 --> 00:37:42,250
anything that gets a fast path you get a

00:37:35,870 --> 00:37:48,200
fast path for a small volume yes oh oh

00:37:42,250 --> 00:37:50,120
the yep oh the first quest first comment

00:37:48,200 --> 00:37:53,300
was flow labels are just ripe for

00:37:50,120 --> 00:37:55,820
manipulation yes I tend not to trust

00:37:53,300 --> 00:37:58,190
anything that the user tags in fact if

00:37:55,820 --> 00:38:01,430
they set the diffserv code point the

00:37:58,190 --> 00:38:05,890
very first thing I do is strip that the

00:38:01,430 --> 00:38:05,890
next comment I'm sorry for your friend

00:38:06,820 --> 00:38:12,560
ah use the flow label to put things on

00:38:09,980 --> 00:38:14,540
the fast path and my follow-up is and I

00:38:12,560 --> 00:38:16,310
always rate limit that you know what do

00:38:14,540 --> 00:38:19,660
I reasonably expect if you do more than

00:38:16,310 --> 00:38:22,610
that what's going wrong throw an alert

00:38:19,660 --> 00:38:24,950
so this assesses the flow labeled

00:38:22,610 --> 00:38:28,850
generation policy of whatever you're

00:38:24,950 --> 00:38:30,950
probing the dash D destination for TCP

00:38:28,850 --> 00:38:34,430
by default you contain change that with

00:38:30,950 --> 00:38:35,900
the dash capital P option on port 80 by

00:38:34,430 --> 00:38:39,560
default you can change that with the

00:38:35,900 --> 00:38:42,350
dash lowercase P option and I went I

00:38:39,560 --> 00:38:46,130
don't have anything that's really doing

00:38:42,350 --> 00:38:51,830
much over there I suppose I should have

00:38:46,130 --> 00:38:53,990
probed itself for that fragment flood

00:38:51,830 --> 00:38:56,630
this is where I started going I don't

00:38:53,990 --> 00:38:58,250
really want to flood the network that

00:38:56,630 --> 00:39:00,410
happens to have all of my servers in it

00:38:58,250 --> 00:39:03,080
that that just doesn't seem like a good

00:39:00,410 --> 00:39:05,600
idea to me so frag 6 is a tool to

00:39:03,080 --> 00:39:08,000
perform ipv6 fragmentation based attacks

00:39:05,600 --> 00:39:09,980
and to perform a security assessment of

00:39:08,000 --> 00:39:13,130
a number of fragmentation related

00:39:09,980 --> 00:39:15,310
aspects one of the interesting things I

00:39:13,130 --> 00:39:21,380
learned while we were just during our

00:39:15,310 --> 00:39:23,390
firewall RFP was firewalls don't

00:39:21,380 --> 00:39:27,170
necessarily treat fragments the same way

00:39:23,390 --> 00:39:28,940
as they treat the first packet and that

00:39:27,170 --> 00:39:31,580
just terrified me if you drop the first

00:39:28,940 --> 00:39:34,230
packet drop all the rest of them okay

00:39:31,580 --> 00:39:37,620
and to understand that sometimes

00:39:34,230 --> 00:39:41,640
fragments got through when the first

00:39:37,620 --> 00:39:44,220
packet didn't terrifies me so this is

00:39:41,640 --> 00:39:50,010
something I want whoever's evaluating

00:39:44,220 --> 00:39:51,570
the firewall to check so let's see

00:39:50,010 --> 00:39:54,930
here's where you check it for the ID

00:39:51,570 --> 00:39:58,800
policy this dash capital F is the flag

00:39:54,930 --> 00:40:00,450
to send a flood of fragments and see if

00:39:58,800 --> 00:40:03,360
the firewall that you're testing stands

00:40:00,450 --> 00:40:05,520
up to it or not you can also see if the

00:40:03,360 --> 00:40:07,350
host you're sending this to falls down

00:40:05,520 --> 00:40:08,970
when it gets a whole bunch of fragments

00:40:07,350 --> 00:40:10,710
that it is going to attempt to

00:40:08,970 --> 00:40:12,300
reassemble but hey we're doing this

00:40:10,710 --> 00:40:15,810
maliciously and there's nothing to

00:40:12,300 --> 00:40:18,450
reassemble to those are sort of things

00:40:15,810 --> 00:40:22,860
that firewalls and hosts should discard

00:40:18,450 --> 00:40:23,970
out of hand without thinking and I think

00:40:22,860 --> 00:40:30,090
we're all going to hold our breath

00:40:23,970 --> 00:40:34,080
waiting for that to happen ah now we get

00:40:30,090 --> 00:40:36,750
into our friend icmpv6 the ICMP 6 is a

00:40:34,080 --> 00:40:41,190
tool to perform attacks based on icmpv6

00:40:36,750 --> 00:40:44,160
error messages all of the ICMP error

00:40:41,190 --> 00:40:46,800
message rules are true you not to send

00:40:44,160 --> 00:40:48,600
an error in response to an error you're

00:40:46,800 --> 00:40:51,660
not to send it to an address other than

00:40:48,600 --> 00:40:52,860
a unicast address unless of course you

00:40:51,660 --> 00:40:56,190
have a tool like this where you can

00:40:52,860 --> 00:40:58,650
break the rules so for instance you

00:40:56,190 --> 00:41:01,380
could send the error icmp six pack it

00:40:58,650 --> 00:41:03,450
too big remember the path MTU I was

00:41:01,380 --> 00:41:07,200
talking about you can throw back a yeah

00:41:03,450 --> 00:41:10,050
I don't like your empty you using ICMP 6

00:41:07,200 --> 00:41:12,990
send it to a destination you can make up

00:41:10,050 --> 00:41:15,600
what address you want to use here for

00:41:12,990 --> 00:41:18,720
the source and then you can say what MTU

00:41:15,600 --> 00:41:22,230
your advertising and throw it into for

00:41:18,720 --> 00:41:23,850
both mood to look at it and I mean yeah

00:41:22,230 --> 00:41:28,350
I don't want to watch any of my hosts

00:41:23,850 --> 00:41:30,810
fall down this is where we get into my

00:41:28,350 --> 00:41:32,970
I'm glad I work with a good security

00:41:30,810 --> 00:41:35,220
group and they can tell me the horror

00:41:32,970 --> 00:41:38,400
stories of this brand of firewall that

00:41:35,220 --> 00:41:42,660
we didn't buy whitelists every piece of

00:41:38,400 --> 00:41:45,600
ipv6 coming in and I go what and they

00:41:42,660 --> 00:41:47,580
say and this brand sends all the

00:41:45,600 --> 00:41:53,700
fragments through even if it dropped the

00:41:47,580 --> 00:41:59,850
first packet and I go what I don't

00:41:53,700 --> 00:42:04,320
remember oh I also think they do that

00:41:59,850 --> 00:42:06,210
just to watch me yelp because I will

00:42:04,320 --> 00:42:07,710
actively respond to the things they're

00:42:06,210 --> 00:42:12,660
saying I don't fall asleep while they're

00:42:07,710 --> 00:42:16,800
talking about this testing oh wait I

00:42:12,660 --> 00:42:19,710
didn't cover tompa will go back to jumbo

00:42:16,800 --> 00:42:22,950
6 the tool to assess potential flaws in

00:42:19,710 --> 00:42:25,080
the handling of ipv6 jumbo grams we have

00:42:22,950 --> 00:42:27,810
the source destination and you pick a

00:42:25,080 --> 00:42:32,550
payload size it's actually pretty cool

00:42:27,810 --> 00:42:34,230
if you want to test jumbo packets but it

00:42:32,550 --> 00:42:35,640
depends I want them on my local area

00:42:34,230 --> 00:42:38,900
network for a number of things my

00:42:35,640 --> 00:42:41,900
storage area network loves jumbo grams

00:42:38,900 --> 00:42:41,900
yes

00:42:47,020 --> 00:42:49,980
process

00:42:56,170 --> 00:43:03,260
so his comment is correct jumbo grams

00:43:00,050 --> 00:43:07,220
were originally designed for shared

00:43:03,260 --> 00:43:09,860
memory and shared storage VMs that said

00:43:07,220 --> 00:43:13,820
our storage area network loves jumbo

00:43:09,860 --> 00:43:16,640
grams performs much better the

00:43:13,820 --> 00:43:20,330
interesting thing is Jumbo's are

00:43:16,640 --> 00:43:23,870
becoming more useful you can decide

00:43:20,330 --> 00:43:25,940
whether that's good or bad as the links

00:43:23,870 --> 00:43:29,540
feet are getting faster this isn't an

00:43:25,940 --> 00:43:31,700
ipv6 issue when you go to 10 gig if you

00:43:29,540 --> 00:43:34,520
don't bump up your default window size

00:43:31,700 --> 00:43:36,500
you can end up with a 10 gig server that

00:43:34,520 --> 00:43:39,410
maxes out in throughput testing at

00:43:36,500 --> 00:43:40,880
around four gigabits per second and you

00:43:39,410 --> 00:43:43,700
grumble and you say why did I buy this

00:43:40,880 --> 00:43:45,770
shiny new Nick and if you're like me you

00:43:43,700 --> 00:43:47,960
do your first iteration of well the

00:43:45,770 --> 00:43:49,790
network card is so new they haven't

00:43:47,960 --> 00:43:51,920
gotten that good at writing the drivers

00:43:49,790 --> 00:43:53,360
for it and you go along for a minute and

00:43:51,920 --> 00:43:55,690
you think you're right because this used

00:43:53,360 --> 00:43:58,280
to be true in the past and then you go

00:43:55,690 --> 00:44:00,740
now something still smells wrong because

00:43:58,280 --> 00:44:04,250
you usually get about sixty percent when

00:44:00,740 --> 00:44:09,560
it's bad firmware not forty percent and

00:44:04,250 --> 00:44:13,130
you go do a little more digging and it's

00:44:09,560 --> 00:44:17,390
at the switch CH website you can see the

00:44:13,130 --> 00:44:19,940
impact of TCP window size on maximum

00:44:17,390 --> 00:44:23,480
throughput so we have a large number of

00:44:19,940 --> 00:44:27,020
NDT servers network diagnostics testing

00:44:23,480 --> 00:44:29,180
on campus for users to see how their

00:44:27,020 --> 00:44:32,630
throughputs going we have a number of

00:44:29,180 --> 00:44:35,600
them with 10 gig carts we had to bump up

00:44:32,630 --> 00:44:39,260
the window size seriously to see the two

00:44:35,600 --> 00:44:41,870
full 10 gig throughput on these so jumbo

00:44:39,260 --> 00:44:45,110
grams as an ipv6 thing

00:44:41,870 --> 00:44:48,880
me being able to test that because we're

00:44:45,110 --> 00:44:52,700
going to want that for servers soon yeah

00:44:48,880 --> 00:44:55,040
I'm all on board with that so send a

00:44:52,700 --> 00:44:57,200
jumbo frame well at this point when we

00:44:55,040 --> 00:44:59,360
start talking about jumbo frames I start

00:44:57,200 --> 00:45:02,120
thinking about you think scaping build

00:44:59,360 --> 00:45:04,160
my jumbo packet from there that's that's

00:45:02,120 --> 00:45:07,340
a packet building tool I like it for

00:45:04,160 --> 00:45:10,370
that neighbor advertisements getting

00:45:07,340 --> 00:45:12,230
down into the NDP so we can send

00:45:10,370 --> 00:45:15,890
arbitrary neighbor advertisement

00:45:12,230 --> 00:45:19,730
messages target destination interface

00:45:15,890 --> 00:45:23,300
and we can flood yeah I don't want to

00:45:19,730 --> 00:45:26,870
flood my server Network sorry but I like

00:45:23,300 --> 00:45:30,230
my servers note information this is

00:45:26,870 --> 00:45:33,440
again in icmpv6 to send arbitrary nude

00:45:30,230 --> 00:45:35,450
information messages and to look for

00:45:33,440 --> 00:45:39,410
potential flaws the thing about the

00:45:35,450 --> 00:45:42,320
shiny new protocol is no one has

00:45:39,410 --> 00:45:47,180
carefully thought through all the ways

00:45:42,320 --> 00:45:49,040
you can make it blow up well know the

00:45:47,180 --> 00:45:52,370
protocol designer haven't thought about

00:45:49,040 --> 00:45:55,090
that the developers haven't thought

00:45:52,370 --> 00:45:59,380
about that the hackers probably have

00:45:55,090 --> 00:46:01,670
being able to test this would be nice

00:45:59,380 --> 00:46:04,880
okay we also have the neighbor

00:46:01,670 --> 00:46:08,570
solicitation flood so we can send

00:46:04,880 --> 00:46:12,890
arbitrary messages that say hey tell me

00:46:08,570 --> 00:46:14,480
if you're a neighbor hmm that that

00:46:12,890 --> 00:46:16,730
sounds like we could get into another

00:46:14,480 --> 00:46:19,640
flood like I was talking about new

00:46:16,730 --> 00:46:23,630
windows boxes with the intel nic and a

00:46:19,640 --> 00:46:26,660
million times a second I this one scares

00:46:23,630 --> 00:46:30,800
me so it's saying do a flood of 100

00:46:26,660 --> 00:46:34,130
packets every five seconds and you can

00:46:30,800 --> 00:46:38,150
tweak that one I didn't want to flood my

00:46:34,130 --> 00:46:40,820
nice little Network sorry router

00:46:38,150 --> 00:46:41,840
advertisements this one really can bite

00:46:40,820 --> 00:46:44,600
you

00:46:41,840 --> 00:46:48,890
okay i'm going to do a time check right

00:46:44,600 --> 00:46:51,620
now i'm going to speed up a little bit

00:46:48,890 --> 00:46:52,580
through the tools that i went you i'm

00:46:51,620 --> 00:46:55,960
not putting that on my nice pretty

00:46:52,580 --> 00:47:00,320
network told us an arbitrary router

00:46:55,960 --> 00:47:01,730
advertisements you can send things like

00:47:00,320 --> 00:47:05,060
you need to get your information from

00:47:01,730 --> 00:47:06,470
dhcpv6 what if you send a fake router

00:47:05,060 --> 00:47:09,740
advertisement that says get your

00:47:06,470 --> 00:47:12,430
information from dhcpv6 that includes a

00:47:09,740 --> 00:47:15,110
v6 server that say i didn't build

00:47:12,430 --> 00:47:19,010
someone else built yeah I don't want

00:47:15,110 --> 00:47:22,280
anybody else doing that you know there

00:47:19,010 --> 00:47:25,480
is one true dhcp server I run it I don't

00:47:22,280 --> 00:47:28,430
want robes we scan for rogues regularly

00:47:25,480 --> 00:47:30,890
this would make it far too easy to

00:47:28,430 --> 00:47:33,230
escape detection on just a link-local

00:47:30,890 --> 00:47:35,330
somewhere over there and if it's linked

00:47:33,230 --> 00:47:37,040
local in a VLAN where we don't have v6

00:47:35,330 --> 00:47:40,670
enabled I'm not even going to reach it

00:47:37,040 --> 00:47:45,050
be able to hear it from my console this

00:47:40,670 --> 00:47:48,590
does not thrill me a tool to send

00:47:45,050 --> 00:47:53,120
arbitrary icmpv6 redirect messages can

00:47:48,590 --> 00:47:55,220
you say man-in-the-middle attack oh and

00:47:53,120 --> 00:47:57,830
you can do it as a flood as if that

00:47:55,220 --> 00:48:00,080
weren't fun enough the tool to send

00:47:57,830 --> 00:48:02,510
arbitrary router solicitation messages I

00:48:00,080 --> 00:48:04,750
don't know I think sending that every

00:48:02,510 --> 00:48:12,020
microsecond might crash the router

00:48:04,750 --> 00:48:14,570
didn't feel like trying that ah we get

00:48:12,020 --> 00:48:16,700
to their local segment scam this is

00:48:14,570 --> 00:48:19,760
probably going to be similar to the ipv6

00:48:16,700 --> 00:48:22,880
mom in terms of scanning for addresses

00:48:19,760 --> 00:48:28,010
so you do scans six you pick an

00:48:22,880 --> 00:48:30,260
interface dash l to list it or one of

00:48:28,010 --> 00:48:34,400
the things when i teach my class on ipv6

00:48:30,260 --> 00:48:36,350
is i say we've all heard you know pull

00:48:34,400 --> 00:48:38,650
out your phone you want to do something

00:48:36,350 --> 00:48:41,780
on your phone there's an app for that

00:48:38,650 --> 00:48:44,390
well when it comes to ipv6 i want you to

00:48:41,780 --> 00:48:45,860
learn to say there's a multicast group

00:48:44,390 --> 00:48:48,630
for that

00:48:45,860 --> 00:48:51,300
nice simple and once you start thinking

00:48:48,630 --> 00:48:54,780
that way it's true the first time I went

00:48:51,300 --> 00:48:57,750
to set up our dhcpv6 server I just went

00:48:54,780 --> 00:48:59,700
through all of our v4 options tact a six

00:48:57,750 --> 00:49:02,010
in the place where was attacked

00:48:59,700 --> 00:49:06,510
everywhere else turns out if you try to

00:49:02,010 --> 00:49:11,250
send the NTP server / dhcpv6 you will

00:49:06,510 --> 00:49:12,660
crash your own ISC dhcpv6 server and I'm

00:49:11,250 --> 00:49:14,910
beating my head against the wall why

00:49:12,660 --> 00:49:18,420
can't i set the ntp server i'd do it

00:49:14,910 --> 00:49:20,430
everywhere else the reason why there was

00:49:18,420 --> 00:49:23,160
a multicast group for that you don't

00:49:20,430 --> 00:49:26,550
need to get it from dhcp when you can

00:49:23,160 --> 00:49:37,950
just multicast for it i think i disagree

00:49:26,550 --> 00:49:41,160
with that yes yes when it bothers to

00:49:37,950 --> 00:49:46,080
listen to the question was about ipv6

00:49:41,160 --> 00:49:50,010
and android and the correct answer is to

00:49:46,080 --> 00:49:53,720
start laughing in somebody's face some

00:49:50,010 --> 00:49:58,530
Android phones support it very well on

00:49:53,720 --> 00:50:02,420
the radio the cellular side t-mobile you

00:49:58,530 --> 00:50:07,310
get a new t mobile phone it's doing v6

00:50:02,420 --> 00:50:12,630
fantastically Android on the Wi-Fi

00:50:07,310 --> 00:50:16,230
ignores well yes appears to ignore a lot

00:50:12,630 --> 00:50:19,200
of router advertisements just puts the

00:50:16,230 --> 00:50:23,580
v6 stack to sleep randomly while still

00:50:19,200 --> 00:50:25,170
keeping the v4 stack running they have a

00:50:23,580 --> 00:50:27,870
lot of bugs that have been open for a

00:50:25,170 --> 00:50:31,830
long time and there was a rather snarky

00:50:27,870 --> 00:50:34,440
well patches welcome that came out about

00:50:31,830 --> 00:50:38,640
six months ago and such a patch was

00:50:34,440 --> 00:50:42,260
recently submitted and rejected and it

00:50:38,640 --> 00:50:42,260
was rather nicely written in my opinion

00:50:44,080 --> 00:50:49,300
themselves by pointed android is how to

00:50:47,030 --> 00:50:49,300
do

00:50:50,670 --> 00:50:56,090
the comment is I pointed Android for how

00:50:53,730 --> 00:50:58,950
to do corporate open source wrong I

00:50:56,090 --> 00:51:03,270
think that's a far nicer way to put it

00:50:58,950 --> 00:51:06,750
than I would have I'm not very good at

00:51:03,270 --> 00:51:12,390
finding the euphemism so thank you for

00:51:06,750 --> 00:51:18,570
the euphemism I agree wholeheartedly so

00:51:12,390 --> 00:51:20,400
being me I try scam 6 and got a lot of

00:51:18,570 --> 00:51:23,700
results so I just counted them word

00:51:20,400 --> 00:51:27,390
count dashed line I got 60 or I got 75

00:51:23,700 --> 00:51:29,820
lines from scan six and I noticed almost

00:51:27,390 --> 00:51:33,780
all of them were linked local link-local

00:51:29,820 --> 00:51:36,780
addresses start with mpat so I go hmm so

00:51:33,780 --> 00:51:39,330
how many of them were linked local where

00:51:36,780 --> 00:51:43,260
the address started with fe 80 so rep

00:51:39,330 --> 00:51:46,680
for that count again 67 out of 75 were

00:51:43,260 --> 00:51:49,560
linked local the remaining eight came

00:51:46,680 --> 00:51:53,190
back with their global unicast address

00:51:49,560 --> 00:51:56,280
the 26 10 28 39 d same thing that moose

00:51:53,190 --> 00:51:59,430
is in but then I said you know there is

00:51:56,280 --> 00:52:01,710
a multicast group for that again I want

00:51:59,430 --> 00:52:03,930
you to get used saying v6 there's a

00:52:01,710 --> 00:52:07,290
multicast group for that well the

00:52:03,930 --> 00:52:10,710
multicast group is FF 0 2 colon colon 1

00:52:07,290 --> 00:52:13,850
this is all neighbors this is linked

00:52:10,710 --> 00:52:16,260
local so linked local all neighbors and

00:52:13,850 --> 00:52:17,940
because that could apply to any of the

00:52:16,260 --> 00:52:21,480
interfaces on moose I have to specify

00:52:17,940 --> 00:52:26,880
that it's eath one interesting thing I

00:52:21,480 --> 00:52:29,790
tell it it has to send two packets and i

00:52:26,880 --> 00:52:33,480
grep for fe 80 it turns out they're all

00:52:29,790 --> 00:52:35,880
in fe 80 when i send two packets blah

00:52:33,480 --> 00:52:38,310
blah blah we could jump i cut out a huge

00:52:35,880 --> 00:52:41,970
amount and come down here two packets

00:52:38,310 --> 00:52:46,230
transmitted to received 73 duplicates

00:52:41,970 --> 00:52:50,310
what that means is 74 neighbors answered

00:52:46,230 --> 00:52:53,910
my ping of the link local so i got 75

00:52:50,310 --> 00:52:57,660
from the scan 6 tool but only 67 of them

00:52:53,910 --> 00:53:01,730
were linked local whereas when i used

00:52:57,660 --> 00:53:06,450
pink 6 I got

00:53:01,730 --> 00:53:08,910
74 link-local answering so this is a

00:53:06,450 --> 00:53:11,760
case where you want more than one tool

00:53:08,910 --> 00:53:14,460
to do the job because they don't all

00:53:11,760 --> 00:53:18,869
give you the same answer in a perfect

00:53:14,460 --> 00:53:22,200
world they would they don't so why did I

00:53:18,869 --> 00:53:25,349
do ping for a count of two packets well

00:53:22,200 --> 00:53:27,780
if I send one packet ping exits after it

00:53:25,349 --> 00:53:30,810
gets the first response I actually want

00:53:27,780 --> 00:53:33,119
to get I tell it it has to send two

00:53:30,810 --> 00:53:36,210
packets and then it gets all of those

00:53:33,119 --> 00:53:38,640
duplicates I also wonder if I ran it for

00:53:36,210 --> 00:53:40,770
more than two pads maybe some of the

00:53:38,640 --> 00:53:43,230
hosts were very slow replying what if I

00:53:40,770 --> 00:53:46,310
told it to send three or five and then

00:53:43,230 --> 00:53:52,829
filtered for the unique addresses i got

00:53:46,310 --> 00:53:54,839
this is going to be experienced we will

00:53:52,829 --> 00:54:01,980
all learn this I don't know the answer I

00:53:54,839 --> 00:54:04,920
usually put in two or three right now so

00:54:01,980 --> 00:54:08,540
again doing an actual scan what i get is

00:54:04,920 --> 00:54:12,480
I'm seeing 64 bytes from first host

00:54:08,540 --> 00:54:15,720
those are vmware MAC addresses so

00:54:12,480 --> 00:54:17,880
they're likely on the same be a master

00:54:15,720 --> 00:54:20,040
what I got at the end of this line that

00:54:17,880 --> 00:54:23,760
has swelled off the side is in / ends

00:54:20,040 --> 00:54:25,740
capital letters dupe in dabangg to let

00:54:23,760 --> 00:54:27,720
you know these are duplicates in this

00:54:25,740 --> 00:54:33,900
case that's actually what I want to see

00:54:27,720 --> 00:54:37,440
I want all of my duplicates we have a

00:54:33,900 --> 00:54:39,930
tool to send arbitrary TCP segments that

00:54:37,440 --> 00:54:42,740
sounds a lot like Skippy again pick

00:54:39,930 --> 00:54:45,630
whichever one is easiest for you to use

00:54:42,740 --> 00:54:50,020
if it's where I wanted to get toolkits

00:54:45,630 --> 00:54:53,410
compare and it scrolled off the screen

00:54:50,020 --> 00:54:55,480
so if you like to add or six in ipv6

00:54:53,410 --> 00:55:00,220
toolkit if you wanted an alternative

00:54:55,480 --> 00:55:03,400
there is ipv6 calc for the ICMP six tool

00:55:00,220 --> 00:55:06,490
in the hackers choice one we had THC

00:55:03,400 --> 00:55:08,590
pink six neighbor advertisement there is

00:55:06,490 --> 00:55:11,290
flood advertise six neighbor

00:55:08,590 --> 00:55:14,010
solicitation there is parasite six and

00:55:11,290 --> 00:55:17,260
send peace six this is where it does the

00:55:14,010 --> 00:55:20,290
cryptographic because if sec IP security

00:55:17,260 --> 00:55:22,720
is built in this pics a nasty

00:55:20,290 --> 00:55:26,760
cryptographic hash so you spike the CPU

00:55:22,720 --> 00:55:29,350
on the receiver trying to calculate this

00:55:26,760 --> 00:55:31,450
certainly when I looked at the things so

00:55:29,350 --> 00:55:34,270
this is the router advertisement six

00:55:31,450 --> 00:55:39,750
toolkit flood router six fake advertiser

00:55:34,270 --> 00:55:42,640
six these looked a lot more malicious

00:55:39,750 --> 00:55:45,310
another reason why I installed the one

00:55:42,640 --> 00:55:49,120
that I did and still it I don't want to

00:55:45,310 --> 00:55:51,430
run these so apologies for being a

00:55:49,120 --> 00:55:55,660
scaredy cat about this but I built this

00:55:51,430 --> 00:55:58,390
nice network I don't want to sink it so

00:55:55,660 --> 00:56:00,310
what did I actually see to me this is

00:55:58,390 --> 00:56:03,150
the interesting part what have I

00:56:00,310 --> 00:56:05,370
actually seen I have seen rogue router

00:56:03,150 --> 00:56:09,490
advertisements anybody remember

00:56:05,370 --> 00:56:11,290
microsoft windows XP the Home Edition

00:56:09,490 --> 00:56:13,840
would come up with this lovely thing

00:56:11,290 --> 00:56:16,360
called network bridge that if you put it

00:56:13,840 --> 00:56:17,920
on an enterprise network like UNC's it

00:56:16,360 --> 00:56:22,870
would try to bridge wired and wireless

00:56:17,920 --> 00:56:25,000
and suddenly you have this and things

00:56:22,870 --> 00:56:29,250
were very bad we learned how to block

00:56:25,000 --> 00:56:33,190
that one very quickly well ipv6 is again

00:56:29,250 --> 00:56:36,370
considered often an island and certain

00:56:33,190 --> 00:56:39,430
versions of Windows of most of them made

00:56:36,370 --> 00:56:42,940
overseas from what I can tell come up

00:56:39,430 --> 00:56:45,370
and say oh I'll advertise myself as a v6

00:56:42,940 --> 00:56:47,830
router and translate from linked local

00:56:45,370 --> 00:56:49,900
to out there but it's test telling all

00:56:47,830 --> 00:56:51,340
the other hosts on its feet lamp all

00:56:49,900 --> 00:56:54,700
right you're hooked better not do that

00:56:51,340 --> 00:56:55,990
I'll route your v6 for you and yeah that

00:56:54,700 --> 00:56:59,020
doesn't work if you actually have a

00:56:55,990 --> 00:57:01,380
router on that VLAN working the feature

00:56:59,020 --> 00:57:04,470
when Cisco sell the feature we needed

00:57:01,380 --> 00:57:07,020
or network bridge was bpdu guard the

00:57:04,470 --> 00:57:09,960
feature for ipv6 is called are a guard

00:57:07,020 --> 00:57:13,290
router advertisement guard this is

00:57:09,960 --> 00:57:14,910
something we will need only cisco has it

00:57:13,290 --> 00:57:18,570
right now and we don't connect users to

00:57:14,910 --> 00:57:20,580
routers this sucks all I've seen the

00:57:18,570 --> 00:57:23,250
neighbor detection flood that was the

00:57:20,580 --> 00:57:25,380
new windows machines that I was talking

00:57:23,250 --> 00:57:27,360
about it's a bug in the Intel firmware

00:57:25,380 --> 00:57:29,310
so I've seen the neighbor detection

00:57:27,360 --> 00:57:32,100
floods that was the million times per

00:57:29,310 --> 00:57:33,810
second and I've seen what could have

00:57:32,100 --> 00:57:35,540
been a router advertisement flood it

00:57:33,810 --> 00:57:37,890
went away before I could characterize it

00:57:35,540 --> 00:57:40,290
so those are the ones that I'm actually

00:57:37,890 --> 00:57:43,710
worried about and then on the network

00:57:40,290 --> 00:57:46,020
layer what have I seen break my v6 we

00:57:43,710 --> 00:57:48,570
didn't finish configuring ospfv3 for

00:57:46,020 --> 00:57:51,390
ipv6 yeah if you're not passing your

00:57:48,570 --> 00:57:53,270
routing information life is bad scene

00:57:51,390 --> 00:57:57,030
timeouts or silent failures or

00:57:53,270 --> 00:57:59,100
inconsistency between platforms when the

00:57:57,030 --> 00:58:01,170
v6 address has gone down in the v4

00:57:59,100 --> 00:58:03,810
hasn't for a while I had the misfortune

00:58:01,170 --> 00:58:07,350
of also having some Solaris servers they

00:58:03,810 --> 00:58:09,810
would randomly turn off lose their ipv6

00:58:07,350 --> 00:58:12,810
address which when they're also your

00:58:09,810 --> 00:58:16,400
name servers that you've published with

00:58:12,810 --> 00:58:20,400
both v4 and v6 this is a bad thing and

00:58:16,400 --> 00:58:22,950
you get inconsistent behavior on the

00:58:20,400 --> 00:58:26,070
client platform you give a timeout or

00:58:22,950 --> 00:58:28,500
the silent failure or big error message

00:58:26,070 --> 00:58:30,270
failure or inconsistent yes sir one

00:58:28,500 --> 00:58:32,310
vulnerability related to the top one is

00:58:30,270 --> 00:58:39,780
is if you bare your hand a head in the

00:58:32,310 --> 00:58:42,210
sand squared ipv6 you can get on your

00:58:39,780 --> 00:58:46,900
network

00:58:42,210 --> 00:58:49,360
forever lost to yes yes what he said is

00:58:46,900 --> 00:58:51,850
you're still vulnerable to rogue router

00:58:49,360 --> 00:58:53,650
advertisements even with no v6 they will

00:58:51,850 --> 00:58:55,900
tunnel your traffic out it's not going

00:58:53,650 --> 00:58:59,610
through your firewall your analysis not

00:58:55,900 --> 00:59:03,490
only telling out but tunneling back in

00:58:59,610 --> 00:59:07,450
you may want to block some aspects of v6

00:59:03,490 --> 00:59:10,380
before you turn it on we have hit the

00:59:07,450 --> 00:59:12,880
wall of time and we got to the best part

00:59:10,380 --> 00:59:15,730
it's out there the names have changed

00:59:12,880 --> 00:59:18,160
but the concepts remain the same there's

00:59:15,730 --> 00:59:23,170
some good tools we've got a lab here

00:59:18,160 --> 00:59:28,810
we've got a table in the expo area whoo

00:59:23,170 --> 00:59:32,950
and there's your URL flying penguin tech

00:59:28,810 --> 00:59:36,520
org slash slide self 2014 ipv6 security

00:59:32,950 --> 00:59:39,550
if you go to the flying penguin tech org

00:59:36,520 --> 00:59:41,380
homepage right now click on resources

00:59:39,550 --> 00:59:44,800
click on slides it'll bring you right

00:59:41,380 --> 00:59:48,960
here so everything becomes clickable and

00:59:44,800 --> 00:59:48,960
usable we're out of time but yes Nancy

00:59:50,820 --> 00:59:59,020
yes nope it's literally a welcome to

00:59:56,590 --> 01:00:00,850
ipv6 where we step through things where

00:59:59,020 --> 01:00:04,500
I trained everybody to say there's a

01:00:00,850 --> 01:00:04,500
multicast group for that

01:00:11,930 --> 01:00:16,799
okay the question is what percent of our

01:00:14,460 --> 01:00:21,119
end users are dual stack at the

01:00:16,799 --> 01:00:23,520
University I'm not sure off hand in

01:00:21,119 --> 01:00:25,650
terms of who has it enabled for

01:00:23,520 --> 01:00:31,220
link-local but everything newer is

01:00:25,650 --> 01:00:31,220
shipping with ipv6 turned on by people

01:00:32,089 --> 01:00:38,130
what percentage of our traffic is v6 I

01:00:35,099 --> 01:00:40,710
do know the answer to that this is from

01:00:38,130 --> 01:00:44,690
my network management hat and having net

01:00:40,710 --> 01:00:47,010
flow tools and the answer to that is a

01:00:44,690 --> 01:00:50,099
disturbing like one half of one percent

01:00:47,010 --> 01:00:53,099
this is because we only turn v6 on in

01:00:50,099 --> 01:00:57,779
VLANs where we trust the users so

01:00:53,099 --> 01:00:59,730
networking security i TS computer

01:00:57,779 --> 01:01:03,630
science promised to behave themselves if

01:00:59,730 --> 01:01:11,279
we would turn it on bioinformatics and I

01:01:03,630 --> 01:01:14,549
biblia I completely agree with you we're

01:01:11,279 --> 01:01:16,859
not allowed to roll out more ipv6 until

01:01:14,549 --> 01:01:18,150
we can secure it and I said well if

01:01:16,859 --> 01:01:22,910
that's your problem I'll go start

01:01:18,150 --> 01:01:22,910
learning about this and here we are yes

01:01:25,130 --> 01:01:32,700
yes we've looked at what part of our

01:01:28,319 --> 01:01:36,750
traffic is v6 eligible and more than

01:01:32,700 --> 01:01:40,109
fifty percent goes to v6 hosts if we

01:01:36,750 --> 01:01:43,609
turned it on in resnet at least fifty

01:01:40,109 --> 01:01:43,609
percent of our traffic would be v6

01:01:46,990 --> 01:01:57,970
p 6 and save legacy yes I'm totally with

01:01:52,960 --> 01:01:59,980
you ipv6 it is we just have to get used

01:01:57,970 --> 01:02:02,140
to it and that's why I keep coming out

01:01:59,980 --> 01:02:03,820
and giving these talks and why I have a

01:02:02,140 --> 01:02:06,820
lab where you can plug in anything and

01:02:03,820 --> 01:02:10,150
we'll see if it goes or not and if it's

01:02:06,820 --> 01:02:13,860
Android it's not and once again I've hit

01:02:10,150 --> 01:02:13,860
the wall of time and smashed through

01:02:51,150 --> 01:02:55,450
your customers rely on your website or

01:02:53,980 --> 01:02:57,819
application if it's slower

01:02:55,450 --> 01:03:00,760
non-responsive it infuriates your users

01:02:57,819 --> 01:03:02,589
and costs you money keeping your

01:03:00,760 --> 01:03:06,090
business critical systems humming along

01:03:02,589 --> 01:03:08,400
requires insight into what they're doing

01:03:06,090 --> 01:03:10,350
your system metrics tells stories

01:03:08,400 --> 01:03:12,360
stories that can reveal performance

01:03:10,350 --> 01:03:14,700
bottlenecks resource limitations and

01:03:12,360 --> 01:03:16,260
other problems but how do you keep an

01:03:14,700 --> 01:03:18,900
eye on all of your systems performance

01:03:16,260 --> 01:03:21,930
metrics in real-time and record this

01:03:18,900 --> 01:03:23,700
data for later analysis enter longview

01:03:21,930 --> 01:03:25,710
the new way to see what's really going

01:03:23,700 --> 01:03:27,870
on under the hood the long view

01:03:25,710 --> 01:03:29,940
dashboard lets you visualize the status

01:03:27,870 --> 01:03:32,400
of all your systems providing you with a

01:03:29,940 --> 01:03:35,760
bird's-eye view of your entire fleet you

01:03:32,400 --> 01:03:38,340
can sort by cpu memory swap processes

01:03:35,760 --> 01:03:40,110
load and network usage click a specific

01:03:38,340 --> 01:03:42,510
system to access its individual

01:03:40,110 --> 01:03:45,020
dashboard then click and drag to zoom in

01:03:42,510 --> 01:03:47,430
on chokepoints and get more detail

01:03:45,020 --> 01:03:49,110
comprehensive network data including

01:03:47,430 --> 01:03:51,420
inbound and outbound traffic is

01:03:49,110 --> 01:03:53,370
available on the network tab and disk

01:03:51,420 --> 01:03:55,560
rights and free space on the discs tab

01:03:53,370 --> 01:03:57,750
while the process Explorer displays

01:03:55,560 --> 01:04:00,270
usage statistics for individual

01:03:57,750 --> 01:04:02,460
processes the system info tab shows

01:04:00,270 --> 01:04:04,680
listening services active connections

01:04:02,460 --> 01:04:06,840
and available updates adding long view

01:04:04,680 --> 01:04:08,520
to a system is easy just click the

01:04:06,840 --> 01:04:10,680
button copy the one line installation

01:04:08,520 --> 01:04:13,110
command then run the command on your

01:04:10,680 --> 01:04:14,820
linux system to complete the process the

01:04:13,110 --> 01:04:17,010
agent will begin collecting data and

01:04:14,820 --> 01:04:18,840
sending it to longview then the graphs

01:04:17,010 --> 01:04:21,390
start rolling

01:04:18,840 --> 01:04:23,760
use longview to gain visibility into

01:04:21,390 --> 01:04:27,500
your servers so when your website or app

01:04:23,760 --> 01:04:27,500

YouTube URL: https://www.youtube.com/watch?v=eW5J4du2Pkw


