Title: 2011 SouthEast LinuxFest - Thomas Cameron - SELinux For Mere Mortals
Publication date: 2012-02-23
Playlist: 2011 SouthEast LinuxFest
Description: 
	2011 SouthEast LinuxFest - Thomas Cameron - SELinux For Mere Mortals

This video is licensed under Creative Commons Attribution 3.0 Unported License.
Captions: 
	00:00:01,129 --> 00:00:07,290
the following presentation was recorded

00:00:04,200 --> 00:00:09,870
at the 2011 southeast linux fest in

00:00:07,290 --> 00:00:11,370
Spartanburg South Carolina it is

00:00:09,870 --> 00:00:14,190
licensed under a creative commons

00:00:11,370 --> 00:00:18,390
license for more information about the

00:00:14,190 --> 00:00:21,840
southeast linux fest visit www southeast

00:00:18,390 --> 00:00:23,070
linux fest org the southeast linux fest

00:00:21,840 --> 00:00:26,430
would like to thank the following

00:00:23,070 --> 00:00:30,740
diamond and platinum sponsors in 2011

00:00:26,430 --> 00:00:30,740
for helping make these videos possible

00:00:31,250 --> 00:00:34,550
yep let's go

00:00:58,719 --> 00:01:03,710
thank you guys very much as he said my

00:01:02,360 --> 00:01:05,149
name is thomas cameron I'm managing

00:01:03,710 --> 00:01:08,630
solutions architect for the central

00:01:05,149 --> 00:01:10,280
region the United States at Red Hat been

00:01:08,630 --> 00:01:12,830
with red hat for almost six years now

00:01:10,280 --> 00:01:13,820
prior to that I was with Bank of America

00:01:12,830 --> 00:01:16,280
I was an architect on the Linux

00:01:13,820 --> 00:01:18,679
engineering team there so previous to

00:01:16,280 --> 00:01:21,020
that I was the IT manager of the UNIX IT

00:01:18,679 --> 00:01:22,789
manager for an ISP so my point here is

00:01:21,020 --> 00:01:25,970
that I've actually been in the trenches

00:01:22,789 --> 00:01:28,610
I am a software consultant essentially

00:01:25,970 --> 00:01:30,229
as with solutions architects do I've

00:01:28,610 --> 00:01:31,490
been doing this for a while I'm a red

00:01:30,229 --> 00:01:32,899
hat certified architect redhead

00:01:31,490 --> 00:01:35,179
certified data center specialist right

00:01:32,899 --> 00:01:36,800
it has certified security specialist red

00:01:35,179 --> 00:01:38,630
has certified examiner red hat certified

00:01:36,800 --> 00:01:42,429
instructor I hold every certification

00:01:38,630 --> 00:01:44,960
from Red Hat that that is available

00:01:42,429 --> 00:01:46,520
prior to that I held certifications as

00:01:44,960 --> 00:01:48,830
microsoft certified systems engineer

00:01:46,520 --> 00:01:50,690
novell certified netware engineer I'm

00:01:48,830 --> 00:01:52,459
not saying this to pound my chest and

00:01:50,690 --> 00:01:54,349
say look at me what a badass i am i'm

00:01:52,459 --> 00:01:58,340
saying this to say i've been doing this

00:01:54,349 --> 00:02:04,399
for a long time selinux scared the crap

00:01:58,340 --> 00:02:05,569
out of me all right so if you come from

00:02:04,399 --> 00:02:08,229
that kind of background you're like

00:02:05,569 --> 00:02:11,150
Louie selinux you're in the right place

00:02:08,229 --> 00:02:12,950
so I want to talk a little bit about red

00:02:11,150 --> 00:02:14,360
hat in its relationship with selinux

00:02:12,950 --> 00:02:16,580
tell you a little bit about what red or

00:02:14,360 --> 00:02:18,680
what selinux is and then we'll jump

00:02:16,580 --> 00:02:22,160
right into some of the meaty details of

00:02:18,680 --> 00:02:24,170
how to use selinux so from a red hat

00:02:22,160 --> 00:02:25,580
perspective we've actually worked with

00:02:24,170 --> 00:02:27,500
the National Security Agency since

00:02:25,580 --> 00:02:30,650
pretty much the inception inception of

00:02:27,500 --> 00:02:32,000
selinux selinux has recognized a number

00:02:30,650 --> 00:02:34,910
of red hat employees for their

00:02:32,000 --> 00:02:37,910
contributions to the selinux project dan

00:02:34,910 --> 00:02:39,950
walsh who is a guy that I work with at

00:02:37,910 --> 00:02:41,810
Red Hat is a phenomenal phenomenal

00:02:39,950 --> 00:02:44,180
developer he's kind of our primary guy

00:02:41,810 --> 00:02:46,909
on selinux he's been called out by the

00:02:44,180 --> 00:02:48,709
NSA as well and then red hat as a

00:02:46,909 --> 00:02:50,989
company was also acknowledged by the NSA

00:02:48,709 --> 00:02:52,460
as a corporate contributor I will say

00:02:50,989 --> 00:02:54,020
that even though I am a red hat employee

00:02:52,460 --> 00:02:56,120
I'm here in support of the Fedora

00:02:54,020 --> 00:02:57,280
projects the reason that I work for red

00:02:56,120 --> 00:02:58,959
hat is

00:02:57,280 --> 00:03:01,030
hey I like getting paid for working with

00:02:58,959 --> 00:03:02,770
them source I mean who doesn't right but

00:03:01,030 --> 00:03:04,150
the primary reason is because the work

00:03:02,770 --> 00:03:06,700
that I do in a small way supports a

00:03:04,150 --> 00:03:08,860
fedora project so if you are at all

00:03:06,700 --> 00:03:10,750
interested in fedora please stop by the

00:03:08,860 --> 00:03:14,489
booth I've got a bunch of schwag up here

00:03:10,750 --> 00:03:17,530
so good questions will get fedora schwag

00:03:14,489 --> 00:03:20,620
all right so like I said this is where I

00:03:17,530 --> 00:03:22,900
came from I was the 98-pound bully I was

00:03:20,620 --> 00:03:24,310
scared to death of selinux how many

00:03:22,900 --> 00:03:28,390
folks installed red hat enterprise linux

00:03:24,310 --> 00:03:32,200
for or fedora core three and what did

00:03:28,390 --> 00:03:34,000
you do with selinux good answer good

00:03:32,200 --> 00:03:36,010
answer i was at be of a we're a

00:03:34,000 --> 00:03:38,019
financial stuff I nancial services

00:03:36,010 --> 00:03:39,670
agency right I'm a financial services

00:03:38,019 --> 00:03:42,130
institution everything was about

00:03:39,670 --> 00:03:44,410
security I was the architect for the

00:03:42,130 --> 00:03:46,540
rail for rollout I turned that bad boy

00:03:44,410 --> 00:03:48,640
off it was not intuitive it was painful

00:03:46,540 --> 00:03:50,580
to use so like I said if you feel the

00:03:48,640 --> 00:03:52,810
same way you're in the right place a

00:03:50,580 --> 00:03:54,370
little bit of history just so you kind

00:03:52,810 --> 00:03:57,640
of know where selinux came from

00:03:54,370 --> 00:03:59,860
originally created by the NSA by the no

00:03:57,640 --> 00:04:01,930
such agency and I love when I get to go

00:03:59,860 --> 00:04:03,130
to the red head offices in Virginia it's

00:04:01,930 --> 00:04:04,750
really cool because you know you go into

00:04:03,130 --> 00:04:06,430
the selinux class right you got the guy

00:04:04,750 --> 00:04:08,590
that you do the meet and greet you know

00:04:06,430 --> 00:04:10,329
who are you where do you work what ru de

00:04:08,590 --> 00:04:12,459
leur know you get the guy that says yeah

00:04:10,329 --> 00:04:14,110
you know I'm from a retail grocery and

00:04:12,459 --> 00:04:15,430
I'm really hoping to learn selinux I got

00:04:14,110 --> 00:04:17,650
another guy that's like well I work in a

00:04:15,430 --> 00:04:20,049
financial services institution and I you

00:04:17,650 --> 00:04:21,459
know we're got PCI compliance issues and

00:04:20,049 --> 00:04:24,160
things like that and then you get to the

00:04:21,459 --> 00:04:30,669
guy that's like I work for the

00:04:24,160 --> 00:04:36,220
government anything else I could tell

00:04:30,669 --> 00:04:38,770
you but okay cool next student so anyway

00:04:36,220 --> 00:04:40,270
having said that the NSA even though you

00:04:38,770 --> 00:04:41,169
know everyone's all scared of the NSA as

00:04:40,270 --> 00:04:43,360
being the big scary government

00:04:41,169 --> 00:04:45,310
organization has been phenomenal in

00:04:43,360 --> 00:04:48,640
releasing code and engineering resources

00:04:45,310 --> 00:04:52,120
out to the to the community to us so we

00:04:48,640 --> 00:04:54,910
worked with them to release originally

00:04:52,120 --> 00:04:57,640
as lsm Linux security modules released

00:04:54,910 --> 00:05:01,300
under the GPL and 2000 got adopted into

00:04:57,640 --> 00:05:02,919
the mainstream Colonel in 2003 so a long

00:05:01,300 --> 00:05:04,750
history it's been around for a long long

00:05:02,919 --> 00:05:06,760
time selinux is very mature and very

00:05:04,750 --> 00:05:09,460
robust and very stable and incredibly

00:05:06,760 --> 00:05:10,810
low performance overhead so let's talk a

00:05:09,460 --> 00:05:12,460
little bit about what se

00:05:10,810 --> 00:05:15,490
is I'm going to talk about mandatory

00:05:12,460 --> 00:05:16,840
versus discretionary access control so

00:05:15,490 --> 00:05:18,550
mandatory access control versus

00:05:16,840 --> 00:05:20,380
discretionary access control I'm going

00:05:18,550 --> 00:05:23,910
to talk a little bit about labeling I'm

00:05:20,380 --> 00:05:26,200
going to talk about type enforcement and

00:05:23,910 --> 00:05:29,110
transitions so let's talk about

00:05:26,200 --> 00:05:31,180
mandatory versus discretionary access

00:05:29,110 --> 00:05:33,340
control in a typical UNIX or Linux

00:05:31,180 --> 00:05:34,960
environment its discretionary access

00:05:33,340 --> 00:05:36,970
control you've got users and you've got

00:05:34,960 --> 00:05:38,919
groups and you've got ownership that

00:05:36,970 --> 00:05:41,470
information that ownership is just

00:05:38,919 --> 00:05:43,000
stored as information it's actually

00:05:41,470 --> 00:05:45,430
metadata about the data on the hard

00:05:43,000 --> 00:05:47,710
drive this directory or this file is

00:05:45,430 --> 00:05:50,169
owned by this user and this group and

00:05:47,710 --> 00:05:51,880
there are permissions assigned to it so

00:05:50,169 --> 00:05:53,470
if you're in the user if you are the

00:05:51,880 --> 00:05:55,540
user or in the group you may have

00:05:53,470 --> 00:05:57,520
permissions if you're not the user or in

00:05:55,540 --> 00:05:59,229
the group you don't have permissions but

00:05:57,520 --> 00:06:01,090
the thing is in a discretionary access

00:05:59,229 --> 00:06:03,910
control environment I have the ability

00:06:01,090 --> 00:06:07,960
or discretion to shoot myself in the

00:06:03,910 --> 00:06:10,510
foot I can go and douche mod + r WX

00:06:07,960 --> 00:06:12,280
slash home slash my directory nothing's

00:06:10,510 --> 00:06:14,560
going to stop me and in a discretionary

00:06:12,280 --> 00:06:16,120
access control environment nothing's

00:06:14,560 --> 00:06:18,220
going to stop anyone else from getting

00:06:16,120 --> 00:06:22,060
in so here's the gun there's your foot

00:06:18,220 --> 00:06:26,020
go for it in discretionary access

00:06:22,060 --> 00:06:31,020
control systems root is omnipotent thank

00:06:26,020 --> 00:06:33,160
God for thinkgeek com I love this shirt

00:06:31,020 --> 00:06:36,640
but it's true right i mean if you got

00:06:33,160 --> 00:06:38,979
root you got access to everything but in

00:06:36,640 --> 00:06:44,350
a mandatory access control environment

00:06:38,979 --> 00:06:46,870
of which selinux is a type policy is

00:06:44,350 --> 00:06:49,780
centrally fixed that policy is defined

00:06:46,870 --> 00:06:51,610
beforehand and you can set up an selinux

00:06:49,780 --> 00:06:54,870
policy that says even if you change the

00:06:51,610 --> 00:06:57,100
discretionary access control labels

00:06:54,870 --> 00:06:59,260
mandatory access control can still

00:06:57,100 --> 00:07:03,100
potentially keep bad guys out of your

00:06:59,260 --> 00:07:06,340
home directory Matt can be incredibly

00:07:03,100 --> 00:07:08,139
fine grained policy can be set determine

00:07:06,340 --> 00:07:10,660
access between users between files

00:07:08,139 --> 00:07:13,690
directories memory sockets TCP and UDP

00:07:10,660 --> 00:07:15,490
sorts you can get very very fine-grained

00:07:13,690 --> 00:07:21,729
control using mandatory access control

00:07:15,490 --> 00:07:24,490
and this is all about labeling selinux

00:07:21,729 --> 00:07:25,150
attributes are stored as extended

00:07:24,490 --> 00:07:26,500
attributes

00:07:25,150 --> 00:07:28,510
the second extended third extended

00:07:26,500 --> 00:07:30,790
fourth extended filesystems this is just

00:07:28,510 --> 00:07:33,550
information that's stored about about

00:07:30,790 --> 00:07:34,840
the context of files unless we're

00:07:33,550 --> 00:07:37,030
talking about things that are in memory

00:07:34,840 --> 00:07:38,650
like sockets and ports and things like

00:07:37,030 --> 00:07:41,260
that those are then stored in memory by

00:07:38,650 --> 00:07:44,860
the kernel until a reboot so all of

00:07:41,260 --> 00:07:48,250
these are assigned different labels the

00:07:44,860 --> 00:07:50,590
only thing we for today's purposes the

00:07:48,250 --> 00:07:53,110
only thing we really care about is the

00:07:50,590 --> 00:07:55,810
labels that we have on processes and

00:07:53,110 --> 00:07:57,550
objects on the file system and how those

00:07:55,810 --> 00:08:00,220
labels can interact with each other so

00:07:57,550 --> 00:08:03,490
for example really easy example the

00:08:00,220 --> 00:08:05,500
Apache web server if I do an LS dash

00:08:03,490 --> 00:08:06,640
Capital Z and we'll talk about the

00:08:05,500 --> 00:08:07,840
capital Z in just a little while it's

00:08:06,640 --> 00:08:10,210
kind of the magic argument for all

00:08:07,840 --> 00:08:12,580
almost all commands if I do an LS dash

00:08:10,210 --> 00:08:15,220
Capital Z you'll see that the actual

00:08:12,580 --> 00:08:20,080
executable on disk httpd under user s

00:08:15,220 --> 00:08:23,290
bin has the type or label httpd exact t

00:08:20,080 --> 00:08:26,500
so it's an HTTP d executable type the

00:08:23,290 --> 00:08:28,540
config files under etsy httpd they have

00:08:26,500 --> 00:08:32,770
the context httpd underscore underscore

00:08:28,540 --> 00:08:35,140
config t if I look at the content of the

00:08:32,770 --> 00:08:38,170
website VAR dub dub dub HTML you'll see

00:08:35,140 --> 00:08:41,920
that has the httpd system content type

00:08:38,170 --> 00:08:45,220
if i look at the the log files httpd

00:08:41,920 --> 00:08:46,420
underscore log underscore type so you

00:08:45,220 --> 00:08:48,910
can see that these things all have

00:08:46,420 --> 00:08:50,440
labels if I look at the the modules that

00:08:48,910 --> 00:08:54,070
are stored for the Apache web server

00:08:50,440 --> 00:08:56,410
they've got hedd ba-bum httpd modules

00:08:54,070 --> 00:08:59,230
type and if i look at the Annette RC

00:08:56,410 --> 00:09:01,180
script for it the httpd underscore in it

00:08:59,230 --> 00:09:03,220
underscore exec I'm sorry Ana Darcy

00:09:01,180 --> 00:09:05,740
underscore exact type we see in a

00:09:03,220 --> 00:09:07,420
pattern here it's fairly consistent

00:09:05,740 --> 00:09:10,900
naming and it's actually fairly logical

00:09:07,420 --> 00:09:12,640
naming now that's stuff that's on the

00:09:10,900 --> 00:09:14,560
file system but when i'm running the

00:09:12,640 --> 00:09:16,920
executable when httpd is actually

00:09:14,560 --> 00:09:19,660
resident in memory if i do a PS dash

00:09:16,920 --> 00:09:22,360
capital z capital z is a magic command

00:09:19,660 --> 00:09:25,990
line argument i will see that it has the

00:09:22,360 --> 00:09:29,440
label httpd underscore t or HTTP type if

00:09:25,990 --> 00:09:30,820
i look at the port number the port

00:09:29,440 --> 00:09:33,610
numbers which are commonly associated

00:09:30,820 --> 00:09:36,790
with apache i'll see that 8443 etc etc

00:09:33,610 --> 00:09:38,370
etc are labeled HTTP underscore port

00:09:36,790 --> 00:09:43,050
underscore t

00:09:38,370 --> 00:09:45,810
so these labels are just used to enforce

00:09:43,050 --> 00:09:47,700
policies now we'll come back to how we

00:09:45,810 --> 00:09:49,680
do that in just a second but for now

00:09:47,700 --> 00:09:51,390
there are other fields in the selinux

00:09:49,680 --> 00:09:54,270
context i'm going to talk about them

00:09:51,390 --> 00:09:56,339
briefly there is an selinux root

00:09:54,270 --> 00:09:59,010
definition I'm sorry Nessie Linux user

00:09:56,339 --> 00:10:01,770
definition now one thing that's kind of

00:09:59,010 --> 00:10:04,170
odd about selinux users is selinux users

00:10:01,770 --> 00:10:05,910
are not the same as as UNIX users you

00:10:04,170 --> 00:10:07,650
may have a user account John Paul George

00:10:05,910 --> 00:10:09,779
and Ringo I may have my user account t

00:10:07,650 --> 00:10:11,670
Cameron or whatever there are typically

00:10:09,779 --> 00:10:13,589
only a very small very limited number of

00:10:11,670 --> 00:10:15,810
selinux accounts for the purposes of

00:10:13,589 --> 00:10:17,370
today's example really the only ones we

00:10:15,810 --> 00:10:20,250
care about are the root user the

00:10:17,370 --> 00:10:22,050
uncontained user the user user and the

00:10:20,250 --> 00:10:23,460
system user these are not the same as

00:10:22,050 --> 00:10:28,490
Linux users there are a very limited

00:10:23,460 --> 00:10:32,070
number of selinux users typically all

00:10:28,490 --> 00:10:35,070
Linux user accounts run as the

00:10:32,070 --> 00:10:36,360
uncontained user user files and

00:10:35,070 --> 00:10:38,700
processes are typically going to be

00:10:36,360 --> 00:10:40,470
labeled as unconfined underscore you

00:10:38,700 --> 00:10:43,070
system files and processes are often

00:10:40,470 --> 00:10:45,540
labeled as system underscore you and

00:10:43,070 --> 00:10:47,279
selinux user is not used in the targeted

00:10:45,540 --> 00:10:49,260
policy will talk about policies in a

00:10:47,279 --> 00:10:50,190
little while my point with this slide is

00:10:49,260 --> 00:10:51,420
and I'm sorry it's kind of an eye chart

00:10:50,190 --> 00:10:52,560
for those of you in the back of the room

00:10:51,420 --> 00:10:54,510
I'll just point out I've got four

00:10:52,560 --> 00:10:56,130
sessions where I'm logging into a

00:10:54,510 --> 00:10:59,610
machine I've logged in as John Paul

00:10:56,130 --> 00:11:01,920
George and Ringo I do I d dash capital Z

00:10:59,610 --> 00:11:03,990
and you'll notice that even though I'm

00:11:01,920 --> 00:11:06,779
logged in as either John or Paul or

00:11:03,990 --> 00:11:09,930
George or ringo all of them come back as

00:11:06,779 --> 00:11:12,450
I'm running as the uncontained user so

00:11:09,930 --> 00:11:14,820
from an selinux context you're running

00:11:12,450 --> 00:11:16,110
as the same user but it's and it's a nun

00:11:14,820 --> 00:11:18,089
confined user and i'll talk more about

00:11:16,110 --> 00:11:20,760
that a little while in fact even when i

00:11:18,089 --> 00:11:22,770
login as root and i do an ID dash

00:11:20,760 --> 00:11:26,250
capital z i'm running as an unconfined

00:11:22,770 --> 00:11:29,070
user user files are typically going to

00:11:26,250 --> 00:11:32,130
be labeled as an unconfined you context

00:11:29,070 --> 00:11:34,529
system files are often going to be

00:11:32,130 --> 00:11:37,500
labeled as system underscore you from a

00:11:34,529 --> 00:11:39,360
user perspective but again not terribly

00:11:37,500 --> 00:11:41,100
important for today's context this is

00:11:39,360 --> 00:11:42,480
just background information and I've run

00:11:41,100 --> 00:11:43,950
a couple of commands here and again

00:11:42,480 --> 00:11:45,300
sorry it's kind of far back for those of

00:11:43,950 --> 00:11:48,600
you in the back that's why you need a

00:11:45,300 --> 00:11:51,300
looks cute up for now kidding so I do an

00:11:48,600 --> 00:11:52,620
LS dash capital Z on slash home and

00:11:51,300 --> 00:11:54,090
you'll see that

00:11:52,620 --> 00:11:56,700
everybody's home directory is owned by

00:11:54,090 --> 00:11:58,860
the unconfined user if i look at etsy

00:11:56,700 --> 00:12:01,050
password for instance that's owned by

00:11:58,860 --> 00:12:03,570
the system user if i look at bin bash

00:12:01,050 --> 00:12:08,130
that's owned by the system user in the

00:12:03,570 --> 00:12:10,230
selinux fields user processes are

00:12:08,130 --> 00:12:13,080
typically going to run in the unconfined

00:12:10,230 --> 00:12:15,930
user space as well so if I do a PSA X

00:12:13,080 --> 00:12:17,940
capital Z pipe grep bash all of my

00:12:15,930 --> 00:12:19,620
logins are running as the uncontained

00:12:17,940 --> 00:12:22,470
user which kind of makes sense in

00:12:19,620 --> 00:12:24,210
security context if I'm logged in as I'm

00:12:22,470 --> 00:12:27,480
find user my processes are going to run

00:12:24,210 --> 00:12:29,190
it as an undefined user alright system

00:12:27,480 --> 00:12:31,110
process is often labelled system

00:12:29,190 --> 00:12:33,720
underscore you in this example I am

00:12:31,110 --> 00:12:37,530
again I'm picking on the httpd process I

00:12:33,720 --> 00:12:40,920
do a PSA X capital Z and I'll see that

00:12:37,530 --> 00:12:42,870
all of my httpd account are applications

00:12:40,920 --> 00:12:48,530
processes i should say are running as

00:12:42,870 --> 00:12:53,370
the system user there is also a role

00:12:48,530 --> 00:12:55,020
filled in the selinux label almost

00:12:53,370 --> 00:12:57,240
everything that you're going to see on

00:12:55,020 --> 00:12:58,860
the file system is just in the object

00:12:57,240 --> 00:13:01,110
role it's an object on the file system

00:12:58,860 --> 00:13:03,480
so for an selinux from an SE linux

00:13:01,110 --> 00:13:05,250
perspective it's just an in the object

00:13:03,480 --> 00:13:07,790
roll those roles are typically going to

00:13:05,250 --> 00:13:10,470
be either unconfined object or system

00:13:07,790 --> 00:13:12,120
object or roles i should say are really

00:13:10,470 --> 00:13:13,380
used for role-based access control we're

00:13:12,120 --> 00:13:15,150
not going to cover that today also

00:13:13,380 --> 00:13:16,800
they're used in multi layer security and

00:13:15,150 --> 00:13:19,560
strict policy and again we're not going

00:13:16,800 --> 00:13:22,110
to spend a lot of time on that but as an

00:13:19,560 --> 00:13:23,640
example files directories or other

00:13:22,110 --> 00:13:25,860
entries on the final systems almost

00:13:23,640 --> 00:13:27,690
always live in the object roll or almost

00:13:25,860 --> 00:13:29,940
always labeled as object roll and you

00:13:27,690 --> 00:13:32,250
can see here i'm looking at etsy httpd

00:13:29,940 --> 00:13:34,710
i'm looking at the HTTP diamond i'm

00:13:32,250 --> 00:13:40,050
looking at the home directory all of

00:13:34,710 --> 00:13:42,930
them are just object roll all right as

00:13:40,050 --> 00:13:46,200
far as at processes which are actually

00:13:42,930 --> 00:13:47,790
running in memory a process is in the

00:13:46,200 --> 00:13:50,040
system our role if it was started up at

00:13:47,790 --> 00:13:51,870
boot time if it's in the uncontained

00:13:50,040 --> 00:13:53,940
roll it means it's a user user process

00:13:51,870 --> 00:13:55,020
so what that means is and here's

00:13:53,940 --> 00:13:56,880
something that's kind of interesting is

00:13:55,020 --> 00:13:59,190
when the system boots up and the anit

00:13:56,880 --> 00:14:01,020
scripts come up you can see that all of

00:13:59,190 --> 00:14:03,770
the HTTP processes are running in the

00:14:01,020 --> 00:14:05,939
system roll interestingly enough if root

00:14:03,770 --> 00:14:08,369
restarts httpd

00:14:05,939 --> 00:14:12,929
after the system has booted up it'll

00:14:08,369 --> 00:14:15,659
actually come back up in the object role

00:14:12,929 --> 00:14:17,609
I'm sorry in the user role because rude

00:14:15,659 --> 00:14:19,859
is just a user so if it started by the

00:14:17,609 --> 00:14:21,749
system init scripts then its system role

00:14:19,859 --> 00:14:25,529
but if it started by root or restarted

00:14:21,749 --> 00:14:29,519
by root then it is in the user role or

00:14:25,529 --> 00:14:33,720
uncontrolled sorry so there are other

00:14:29,519 --> 00:14:37,439
fields in the context around MLS and MCS

00:14:33,720 --> 00:14:38,849
components really these are used for for

00:14:37,439 --> 00:14:40,979
like top secret environments where you

00:14:38,849 --> 00:14:43,439
can do some really cool stuff like say

00:14:40,979 --> 00:14:45,720
i'm going to start up this application

00:14:43,439 --> 00:14:47,129
in the exact same context is this other

00:14:45,720 --> 00:14:51,209
application except i want to put

00:14:47,129 --> 00:14:52,919
different i'm going to put different

00:14:51,209 --> 00:14:54,869
ranges on it so i could actually have

00:14:52,919 --> 00:14:56,879
two processes to the same processes

00:14:54,869 --> 00:14:58,799
running in different selinux contexts

00:14:56,879 --> 00:15:00,929
you can set really neat fine-grained

00:14:58,799 --> 00:15:03,299
control where for instance you can copy

00:15:00,929 --> 00:15:04,799
from this window and not be able to

00:15:03,299 --> 00:15:08,009
paste to this window because they're

00:15:04,799 --> 00:15:11,189
running in different selinux contexts

00:15:08,009 --> 00:15:14,369
you can also apply this to virtual

00:15:11,189 --> 00:15:16,049
machines so if somebody compromises a

00:15:14,369 --> 00:15:17,879
virtual machine that is running in a

00:15:16,049 --> 00:15:19,589
different selinux context from another

00:15:17,879 --> 00:15:21,989
virtual machine they may take out that

00:15:19,589 --> 00:15:26,069
one process they cannot then jump to the

00:15:21,989 --> 00:15:28,589
next process alright so who labels this

00:15:26,069 --> 00:15:29,789
is not terribly intuitive so far but now

00:15:28,589 --> 00:15:31,109
let's look at where some of this stuff

00:15:29,789 --> 00:15:33,470
starts tying together and hopefully

00:15:31,109 --> 00:15:36,179
starts making a little bit more sense

00:15:33,470 --> 00:15:39,809
selinux is really a type enforcement

00:15:36,179 --> 00:15:41,249
system okay type enforcement is just a

00:15:39,809 --> 00:15:42,899
definition of how types are going to

00:15:41,249 --> 00:15:46,199
interact for instance a process running

00:15:42,899 --> 00:15:50,069
in the httpd or HTTP underscore t

00:15:46,199 --> 00:15:53,039
context probably needs to access files

00:15:50,069 --> 00:15:54,869
that are labeled httpd underscore config

00:15:53,039 --> 00:15:56,399
underscore t right we saw the

00:15:54,869 --> 00:15:58,169
relationship between those I've got a

00:15:56,399 --> 00:15:59,789
process and I've got config files it

00:15:58,169 --> 00:16:01,229
certainly makes sense for that web

00:15:59,789 --> 00:16:03,929
server to read its own config files

00:16:01,229 --> 00:16:08,129
right okay I know you're out there I can

00:16:03,929 --> 00:16:11,669
hear you breathing alright does a

00:16:08,129 --> 00:16:14,129
process labeled HTTP underscore t need

00:16:11,669 --> 00:16:17,730
to access a file with a context of

00:16:14,129 --> 00:16:21,899
shadow underscore t we're

00:16:17,730 --> 00:16:24,990
probably not right right so type

00:16:21,899 --> 00:16:26,579
enforcement is just what types are

00:16:24,990 --> 00:16:28,709
allowed to interact with what other

00:16:26,579 --> 00:16:33,240
types what process types are allowed to

00:16:28,709 --> 00:16:36,060
deal with what object types so how do we

00:16:33,240 --> 00:16:37,320
allow access to various components in

00:16:36,060 --> 00:16:38,760
the system and again those components

00:16:37,320 --> 00:16:40,889
can be everything from users to

00:16:38,760 --> 00:16:44,089
directories to files to sockets to UDP

00:16:40,889 --> 00:16:48,240
ports to things like that now a

00:16:44,089 --> 00:16:50,610
transition is how do i change the

00:16:48,240 --> 00:16:51,810
security context as the system changes

00:16:50,610 --> 00:16:53,880
as it boots up or something like that

00:16:51,810 --> 00:16:56,310
for example when rude execute a file

00:16:53,880 --> 00:17:00,060
with the 5-htt BD exec T it should

00:16:56,310 --> 00:17:02,699
transition to HTTP underscore t you

00:17:00,060 --> 00:17:04,829
probably don't want network facing

00:17:02,699 --> 00:17:06,799
services for instance running in roots

00:17:04,829 --> 00:17:09,750
context or running with root privileges

00:17:06,799 --> 00:17:11,760
so and this is true as the system boots

00:17:09,750 --> 00:17:13,439
up win the system first boots when the

00:17:11,760 --> 00:17:17,250
colonel loads the very first command

00:17:13,439 --> 00:17:19,410
that it looks for is in it right so as

00:17:17,250 --> 00:17:21,809
an it comes up it goes out depending on

00:17:19,410 --> 00:17:26,370
what start start up system you have what

00:17:21,809 --> 00:17:28,319
are we using this week upstart depending

00:17:26,370 --> 00:17:30,330
on the way that the system boots up and

00:17:28,319 --> 00:17:32,700
it is actually going to then spawn child

00:17:30,330 --> 00:17:34,470
processes and run other commands well

00:17:32,700 --> 00:17:37,049
you need to have a mechanism whereby

00:17:34,470 --> 00:17:39,630
those commands change security context

00:17:37,049 --> 00:17:42,030
that's all that transitions are so when

00:17:39,630 --> 00:17:44,070
s been in it / I spin / and it starts up

00:17:42,030 --> 00:17:45,540
it starts other processes their

00:17:44,070 --> 00:17:47,549
transition to their new security

00:17:45,540 --> 00:17:50,010
enhanced Linux context based on

00:17:47,549 --> 00:17:52,679
transition rules which are defined in

00:17:50,010 --> 00:17:54,150
policy and I got an example here root

00:17:52,679 --> 00:17:55,650
fires up a network listener without a

00:17:54,150 --> 00:17:57,929
targeted policy in this case I'm just

00:17:55,650 --> 00:18:00,090
running netcat but to give you an idea

00:17:57,929 --> 00:18:03,299
I'm going to do netcat and listen on

00:18:00,090 --> 00:18:04,770
port 99 now this listener is running

00:18:03,299 --> 00:18:06,780
unconfined if a bad guy were to

00:18:04,770 --> 00:18:10,970
compromise it potentially the guy could

00:18:06,780 --> 00:18:15,360
own the entire system so if I do a PSA

00:18:10,970 --> 00:18:17,400
XZ or I'm sorry I netstat against it I

00:18:15,360 --> 00:18:20,309
can see that it's running totally I'm

00:18:17,400 --> 00:18:24,000
confined with root privileges I got a

00:18:20,309 --> 00:18:26,159
listener that's running uncontained if

00:18:24,000 --> 00:18:29,230
you think that's a good idea because we

00:18:26,159 --> 00:18:33,380
were shuttin you we will shame you

00:18:29,230 --> 00:18:36,050
alright cool so we probably don't want

00:18:33,380 --> 00:18:37,700
that to happen so do you understand why

00:18:36,050 --> 00:18:39,290
it probably makes sense if I were

00:18:37,700 --> 00:18:40,670
actually this were a real listener I

00:18:39,290 --> 00:18:42,890
would probably need to come up with an

00:18:40,670 --> 00:18:44,570
selinux policy that says I'm only going

00:18:42,890 --> 00:18:50,000
to allow that listener to access certain

00:18:44,570 --> 00:18:51,920
components of the file system okay so an

00:18:50,000 --> 00:18:53,360
example of type enforcement root uses

00:18:51,920 --> 00:18:55,280
the system startup script to launch HD

00:18:53,360 --> 00:18:58,700
DVD even though the user context changes

00:18:55,280 --> 00:19:00,380
the type does not and since we're

00:18:58,700 --> 00:19:01,910
dealing with type enforcement the user

00:19:00,380 --> 00:19:03,170
context changing doesn't really matter

00:19:01,910 --> 00:19:04,970
and this is an example I was talking

00:19:03,170 --> 00:19:08,630
about earlier when the system boots up

00:19:04,970 --> 00:19:10,309
httpd is running as a system user when

00:19:08,630 --> 00:19:12,440
root restarts it it's actually running

00:19:10,309 --> 00:19:15,920
as an unconfined user but the important

00:19:12,440 --> 00:19:17,809
part here it hello important part here

00:19:15,920 --> 00:19:19,160
is let's see if i can get my mouse nope

00:19:17,809 --> 00:19:20,990
that's not wanted there we go the

00:19:19,160 --> 00:19:23,240
important part is it's still running as

00:19:20,990 --> 00:19:24,710
the hd-dvd type whether it's restarted

00:19:23,240 --> 00:19:27,230
or not and that's the important

00:19:24,710 --> 00:19:29,059
component because it's running as the

00:19:27,230 --> 00:19:30,590
HTTP type it's not going to be allowed

00:19:29,059 --> 00:19:33,250
to access anything else on the file

00:19:30,590 --> 00:19:36,380
system that a bad guy would care about

00:19:33,250 --> 00:19:38,600
so policy is just the set of rules that

00:19:36,380 --> 00:19:42,260
defines how these labeled objects

00:19:38,600 --> 00:19:46,059
interact the default policy in rel 6 and

00:19:42,260 --> 00:19:50,330
fedora 15 is the targeted policy unless

00:19:46,059 --> 00:19:53,059
a service is explicitly covered by a

00:19:50,330 --> 00:19:55,059
policy or by a component of the targeted

00:19:53,059 --> 00:19:58,580
policy the process runs unconfined

00:19:55,059 --> 00:20:00,080
that's different from a strict policy

00:19:58,580 --> 00:20:01,880
I'll talk a little bit more about that a

00:20:00,080 --> 00:20:04,100
little while there are hundreds of

00:20:01,880 --> 00:20:05,840
applications that are targeted that are

00:20:04,100 --> 00:20:07,040
covered by targeted policy I mean we've

00:20:05,840 --> 00:20:08,240
got it we've got policies that cover

00:20:07,040 --> 00:20:12,260
everything from the big stuff that you

00:20:08,240 --> 00:20:14,210
would expect right like name D or HD DVD

00:20:12,260 --> 00:20:16,700
or send mail or post fix we've got

00:20:14,210 --> 00:20:18,380
policies that deal with how Firefox is

00:20:16,700 --> 00:20:20,179
allowed to access your file system I

00:20:18,380 --> 00:20:22,850
mean we are we have very fine-grained

00:20:20,179 --> 00:20:25,340
control of anything that a bad guy or

00:20:22,850 --> 00:20:27,380
hopefully anything that a bad guy could

00:20:25,340 --> 00:20:31,100
compromise to get access to your system

00:20:27,380 --> 00:20:34,040
now MLS and MCS policy is very very

00:20:31,100 --> 00:20:37,580
fine-grained and the reverse is true in

00:20:34,040 --> 00:20:38,800
an mcs or mls and that's a multi-layer

00:20:37,580 --> 00:20:42,050
or

00:20:38,800 --> 00:20:44,270
boom drawn a blank on MCS I only present

00:20:42,050 --> 00:20:47,240
on this like every other week it'll come

00:20:44,270 --> 00:20:48,950
to me a second they're very fine-grained

00:20:47,240 --> 00:20:50,960
and it's sort of the reverse unless

00:20:48,950 --> 00:20:54,740
something is explicitly allowed it is

00:20:50,960 --> 00:20:59,120
defined as a by default denied in a MCS

00:20:54,740 --> 00:21:01,280
or mls policy so you can take a look at

00:20:59,120 --> 00:21:04,490
what the policy looks like under etsy

00:21:01,280 --> 00:21:08,990
selinux specifically under etsy selinux

00:21:04,490 --> 00:21:11,450
config or Etsy selinux targeted contexts

00:21:08,990 --> 00:21:13,190
files and just to give you an idea i'm

00:21:11,450 --> 00:21:15,140
gonna i'm actually going to break out of

00:21:13,190 --> 00:21:23,930
the slide deck for just a second and

00:21:15,140 --> 00:21:31,630
fire up a shell hopefully i'll be able

00:21:23,930 --> 00:21:31,630
to type here hold on at CSE len eggs

00:21:32,500 --> 00:21:45,080
let's go to targeted nope nope not

00:21:38,990 --> 00:21:54,200
policy okay so i'm going to look under

00:21:45,080 --> 00:21:56,090
here and cat default underscore contexts

00:21:54,200 --> 00:21:57,620
and you can see that when i when I'm

00:21:56,090 --> 00:21:58,850
when I'm building something whenever any

00:21:57,620 --> 00:22:01,100
kind of a file gets built or anything

00:21:58,850 --> 00:22:02,720
like that the context is going to be

00:22:01,100 --> 00:22:05,990
defined by whatever the defaults there

00:22:02,720 --> 00:22:09,940
are what I want to also point out though

00:22:05,990 --> 00:22:09,940
is let me get back over to that screen

00:22:13,390 --> 00:22:20,570
all right there we go I want to go to

00:22:15,680 --> 00:22:24,770
targeted contexts files CD files ok so

00:22:20,570 --> 00:22:28,250
here are files file contexts every time

00:22:24,770 --> 00:22:30,500
you see my hand go down I'm doing an

00:22:28,250 --> 00:22:34,460
entire page of context which has been

00:22:30,500 --> 00:22:37,700
defined so I'm going page page page you

00:22:34,460 --> 00:22:41,960
can get an idea of how much work goes

00:22:37,700 --> 00:22:45,830
into setting up these policies there's a

00:22:41,960 --> 00:22:47,330
ton oops sorry helps bios I have a hand

00:22:45,830 --> 00:22:52,270
accuracy but anyway my point here is

00:22:47,330 --> 00:22:52,270
these policies are very well thought out

00:22:52,440 --> 00:22:57,690
get the idea we've spent a lot of time

00:22:55,890 --> 00:22:59,760
generating these policies to try to

00:22:57,690 --> 00:23:01,290
cover every eventuality to every binary

00:22:59,760 --> 00:23:03,630
every executable that's installed on the

00:23:01,290 --> 00:23:05,520
file system we do a really good job of

00:23:03,630 --> 00:23:07,530
making sure that as one of these

00:23:05,520 --> 00:23:09,090
processes is running it only has access

00:23:07,530 --> 00:23:11,430
to the area of the file system which

00:23:09,090 --> 00:23:14,580
makes sense for it and if somebody tries

00:23:11,430 --> 00:23:18,060
to do something bad to the web server or

00:23:14,580 --> 00:23:20,550
to name D or to something like that it's

00:23:18,060 --> 00:23:21,660
not going to have permission essentially

00:23:20,550 --> 00:23:25,230
it's not going to have that mandatory

00:23:21,660 --> 00:23:26,460
access control access to two areas of

00:23:25,230 --> 00:23:28,680
the filesystem it's not supposed to have

00:23:26,460 --> 00:23:31,170
access to so let's talk a little bit

00:23:28,680 --> 00:23:34,820
about working with labels I'll talk

00:23:31,170 --> 00:23:36,930
about viewing labels and creating labels

00:23:34,820 --> 00:23:39,000
most of the utilities that have anything

00:23:36,930 --> 00:23:40,800
to do with showing me how something is

00:23:39,000 --> 00:23:43,110
either defined or how something is

00:23:40,800 --> 00:23:45,510
running we'll take the dash capital Z

00:23:43,110 --> 00:23:46,890
argument if you've been paying attention

00:23:45,510 --> 00:23:50,910
you've already seen me do LS dash

00:23:46,890 --> 00:23:54,240
capitals eps dash capital z c pz i D

00:23:50,910 --> 00:23:56,370
dash Z if you want to see how something

00:23:54,240 --> 00:23:59,190
is labeled almost always you can pass

00:23:56,370 --> 00:24:00,180
the dash capital Z argument to it if you

00:23:59,190 --> 00:24:02,670
want to see what your own security

00:24:00,180 --> 00:24:06,870
enhance Linux context is just do I d

00:24:02,670 --> 00:24:08,670
dash capital Z so to create selinux

00:24:06,870 --> 00:24:11,220
labels there's a couple of ways you can

00:24:08,670 --> 00:24:14,880
do it you can use the change context or

00:24:11,220 --> 00:24:17,400
CH kon command you can use restore con

00:24:14,880 --> 00:24:18,510
restore Conda is your friend and I'm

00:24:17,400 --> 00:24:19,620
going to show you some examples of that

00:24:18,510 --> 00:24:20,760
in just a little while all of these i'm

00:24:19,620 --> 00:24:23,580
going to give you examples of in just a

00:24:20,760 --> 00:24:26,460
few minutes you can use SE manage to

00:24:23,580 --> 00:24:28,920
change the file context and again you

00:24:26,460 --> 00:24:30,630
can look in EDSA linux targeted contexts

00:24:28,920 --> 00:24:34,230
files file underscore context to get an

00:24:30,630 --> 00:24:36,690
idea of what the contexts are RPM the

00:24:34,230 --> 00:24:38,460
RPM command is selinux aware so when you

00:24:36,690 --> 00:24:39,840
install a new rpm if the package

00:24:38,460 --> 00:24:42,330
maintainer has put an s heel into

00:24:39,840 --> 00:24:46,710
context into it it'll it'll install that

00:24:42,330 --> 00:24:48,780
context as well you create an selinux

00:24:46,710 --> 00:24:50,960
context when you create a new file you

00:24:48,780 --> 00:24:52,920
create an selinux or you can potentially

00:24:50,960 --> 00:24:54,750
you can potentially shoot yourself in

00:24:52,920 --> 00:24:55,620
the foot when you move a file to

00:24:54,750 --> 00:24:59,010
everybody know the difference between

00:24:55,620 --> 00:25:00,810
copying a file and moving a file ok when

00:24:59,010 --> 00:25:02,520
I copy a file I'm actually creating a

00:25:00,810 --> 00:25:05,370
new instance that file and it's going to

00:25:02,520 --> 00:25:05,850
typically inherit attributes from the

00:25:05,370 --> 00:25:07,860
parent

00:25:05,850 --> 00:25:09,179
victory if I move a file I'm just

00:25:07,860 --> 00:25:14,760
changing the pointer in the inode and

00:25:09,179 --> 00:25:16,590
all bets are off process context is

00:25:14,760 --> 00:25:19,020
created by things like login when you

00:25:16,590 --> 00:25:21,900
login your processes are given a context

00:25:19,020 --> 00:25:25,080
typically I'm confined file transitions

00:25:21,900 --> 00:25:26,730
can be defined by policy for instance of

00:25:25,080 --> 00:25:29,070
an application with a type foo type

00:25:26,730 --> 00:25:31,980
creates a file on a directory labeled

00:25:29,070 --> 00:25:35,789
bar type you can actually create selinux

00:25:31,980 --> 00:25:37,740
policy that says well that file as it's

00:25:35,789 --> 00:25:38,820
gotten created with these specific

00:25:37,740 --> 00:25:42,440
conditions is actually going to be

00:25:38,820 --> 00:25:44,490
transitioned to type Baz underscore T

00:25:42,440 --> 00:25:46,890
example of this a real good example this

00:25:44,490 --> 00:25:48,720
is when i boot up and i'm using dhcp the

00:25:46,890 --> 00:25:50,580
d h the application running or the

00:25:48,720 --> 00:25:53,280
process running in the d h client type

00:25:50,580 --> 00:25:56,190
creates a resolv.conf and directory etsy

00:25:53,280 --> 00:25:58,799
underscore t but it gets labeled by

00:25:56,190 --> 00:26:04,770
policy it transitions to label netcom

00:25:58,799 --> 00:26:06,720
type ok execution transitions are also

00:26:04,770 --> 00:26:09,240
defined by policy if a processed food

00:26:06,720 --> 00:26:12,210
type execute bar exec type policy can

00:26:09,240 --> 00:26:13,890
require a transition to bar type so that

00:26:12,210 --> 00:26:16,530
process running in memory takes on the

00:26:13,890 --> 00:26:19,409
bar type selinux context a good example

00:26:16,530 --> 00:26:21,539
this is an it an it executes to Nick and

00:26:19,409 --> 00:26:23,549
hit RC exact types which eventually

00:26:21,539 --> 00:26:26,460
includes all the start/stop scripts via

00:26:23,549 --> 00:26:31,530
RC and so you've got HTTP types you've

00:26:26,460 --> 00:26:34,230
got DNS server types etc etc etc so what

00:26:31,530 --> 00:26:38,460
does it mean if selinux is barking at me

00:26:34,230 --> 00:26:41,820
it means that something is wrong either

00:26:38,460 --> 00:26:44,159
our policy is wrong you're labeling is

00:26:41,820 --> 00:26:46,380
wrong there are another a couple of

00:26:44,159 --> 00:26:48,390
other issues that could be there that I

00:26:46,380 --> 00:26:51,419
want to point out in a few minutes but

00:26:48,390 --> 00:26:53,820
really folks ignoring selinux or turning

00:26:51,419 --> 00:26:55,710
off selinux is like saying well my car

00:26:53,820 --> 00:26:59,510
was making a loud noise and it really

00:26:55,710 --> 00:27:05,460
bothered me so I turned up the radio

00:26:59,510 --> 00:27:07,049
problem solved right no all right it can

00:27:05,460 --> 00:27:10,620
mean that you're labeling is wrong and

00:27:07,049 --> 00:27:12,179
I'll show some examples of that it could

00:27:10,620 --> 00:27:13,590
mean that the policy that's enforced

00:27:12,179 --> 00:27:15,360
that's being enforced on your system

00:27:13,590 --> 00:27:16,950
needs to be tweaked not even that it's

00:27:15,360 --> 00:27:19,080
wrong it just may be that you're doing

00:27:16,950 --> 00:27:19,770
something that's different from the way

00:27:19,080 --> 00:27:21,630
we expect

00:27:19,770 --> 00:27:23,340
different from the way that that we

00:27:21,630 --> 00:27:25,620
designed the application that is not a

00:27:23,340 --> 00:27:29,130
bad thing it just means you need to tell

00:27:25,620 --> 00:27:30,330
us he Linux about it and and to do that

00:27:29,130 --> 00:27:32,190
you can also do things like turn on

00:27:30,330 --> 00:27:34,280
selinux booleans and i'll talk about

00:27:32,190 --> 00:27:37,200
selinux bullion's in just a little while

00:27:34,280 --> 00:27:39,690
it could mean that there is a bug in the

00:27:37,200 --> 00:27:42,840
application selinux has actually

00:27:39,690 --> 00:27:45,300
uncovered a lot of sometimes minor but a

00:27:42,840 --> 00:27:47,130
lot of bugs like leaked file descriptors

00:27:45,300 --> 00:27:49,500
and things like that so it's actually

00:27:47,130 --> 00:27:51,360
fairly fairly common that what gets

00:27:49,500 --> 00:27:52,680
reported is in selinux error actually

00:27:51,360 --> 00:27:54,300
turns out to be something that the

00:27:52,680 --> 00:27:55,770
developer who owns the application just

00:27:54,300 --> 00:27:57,660
didn't close correctly or something like

00:27:55,770 --> 00:28:01,020
that but we do need to know about that

00:27:57,660 --> 00:28:03,660
and then finally it could very well mean

00:28:01,020 --> 00:28:06,510
that you have been or are being broken

00:28:03,660 --> 00:28:08,670
into I was actually presenting on

00:28:06,510 --> 00:28:11,880
selinux at the texas linux fest about a

00:28:08,670 --> 00:28:14,070
year and a half ago and my phone starts

00:28:11,880 --> 00:28:15,630
going nuts i'm getting all these calls

00:28:14,070 --> 00:28:17,730
from a customer mind getting all these

00:28:15,630 --> 00:28:19,650
calls I'm like excuse me folks all right

00:28:17,730 --> 00:28:21,600
folks turning the thing off I get off

00:28:19,650 --> 00:28:22,800
the stage go in and it's the weirdest

00:28:21,600 --> 00:28:24,510
thing this is like one of those kismet

00:28:22,800 --> 00:28:25,620
things I walk off the stage I call him

00:28:24,510 --> 00:28:27,570
back I'm like hey what's up and it goes

00:28:25,620 --> 00:28:31,620
hey I'm seeing all these weird error

00:28:27,570 --> 00:28:34,770
message ABC denial messages in in VAR

00:28:31,620 --> 00:28:37,050
log messages when did some investigation

00:28:34,770 --> 00:28:39,270
and found out that sure enough while I

00:28:37,050 --> 00:28:40,830
was on stage talking about selinux his

00:28:39,270 --> 00:28:43,770
system had been compromised due to a

00:28:40,830 --> 00:28:46,170
badly formed php.ini file or a badly

00:28:43,770 --> 00:28:47,970
configured php.ini file bad guy had

00:28:46,170 --> 00:28:50,430
gotten access to his system looked

00:28:47,970 --> 00:28:51,720
through and sure enough the bad guy was

00:28:50,430 --> 00:28:53,490
running in the context of the web server

00:28:51,720 --> 00:28:54,600
trying to access at sea shadow and all

00:28:53,490 --> 00:28:56,310
of all that kind of good stuff as he

00:28:54,600 --> 00:28:58,530
Linux topped it so the system got

00:28:56,310 --> 00:29:00,090
somewhat compromised but I see Linux

00:28:58,530 --> 00:29:03,390
stopped him from actually getting any

00:29:00,090 --> 00:29:05,970
further all right so some tips and

00:29:03,390 --> 00:29:08,280
tricks if you want to use selinux

00:29:05,970 --> 00:29:11,150
effectively make sure you install the SE

00:29:08,280 --> 00:29:15,330
troubleshoot and SE troubleshoot server

00:29:11,150 --> 00:29:16,530
rpms on a red hat ish system these are

00:29:15,330 --> 00:29:18,660
going to send messages to VAR log

00:29:16,530 --> 00:29:21,780
messages and also VAR log audit audit

00:29:18,660 --> 00:29:23,790
log and it also pulls in a lot of tools

00:29:21,780 --> 00:29:27,750
that you can use to look like a real

00:29:23,790 --> 00:29:30,960
selinux ninja I'm all about ninja tude I

00:29:27,750 --> 00:29:32,460
want to be the SE links ninja so install

00:29:30,960 --> 00:29:33,549
all those rpms I don't know why it took

00:29:32,460 --> 00:29:35,259
a screenshot of this this may

00:29:33,549 --> 00:29:36,909
shenzhen when i first did this so you

00:29:35,259 --> 00:29:38,980
install SE troubleshoot server and it

00:29:36,909 --> 00:29:40,809
pulls in a whole ton of other policy

00:29:38,980 --> 00:29:41,919
utilities and things like that i just

00:29:40,809 --> 00:29:44,470
wanted to give you an example what that

00:29:41,919 --> 00:29:48,549
looked like so let's get to the meat of

00:29:44,470 --> 00:29:52,450
this some real world examples where sis

00:29:48,549 --> 00:29:53,919
admins typically make mistakes so let's

00:29:52,450 --> 00:29:56,440
say and again I'm going to pick on

00:29:53,919 --> 00:29:58,360
Apache for this one we're going to

00:29:56,440 --> 00:30:01,419
create some content because I'm a cool

00:29:58,360 --> 00:30:05,049
boy webmaster I cannot code HTML to save

00:30:01,419 --> 00:30:06,820
my life so this is total spoof actually

00:30:05,049 --> 00:30:08,350
I can it's just hideously ugly I don't

00:30:06,820 --> 00:30:12,369
have a creative bench to make pretty

00:30:08,350 --> 00:30:15,820
pretty web pages so since admin creates

00:30:12,369 --> 00:30:18,399
a a foo HTML file this is my foo and he

00:30:15,820 --> 00:30:19,929
redirects that out into foodie ml and

00:30:18,399 --> 00:30:21,730
you know like any good sysadmin he moves

00:30:19,929 --> 00:30:24,759
it over into the web server content

00:30:21,730 --> 00:30:28,840
location so he moves food CML to VAR dub

00:30:24,759 --> 00:30:30,669
dub dub HTML hi-yah tries to access it

00:30:28,840 --> 00:30:32,649
and goes back and looks and the

00:30:30,669 --> 00:30:34,179
permissions are right chamada 644

00:30:32,649 --> 00:30:38,200
everything looks good it's like what the

00:30:34,179 --> 00:30:41,590
heck is going on well that's a move

00:30:38,200 --> 00:30:43,809
versus copy issue because he moved the

00:30:41,590 --> 00:30:47,080
content out of his home directory the

00:30:43,809 --> 00:30:50,619
selinux context was set for his home

00:30:47,080 --> 00:30:53,169
directory so if I do an LS dash Capital

00:30:50,619 --> 00:30:57,489
Z of our dub-dub-dub HTML you can see

00:30:53,169 --> 00:31:00,820
that fuj tml is of the type admin home

00:30:57,489 --> 00:31:03,220
type do we want the Apache web server to

00:31:00,820 --> 00:31:06,249
be able to read content that is labeled

00:31:03,220 --> 00:31:07,139
for routes home directory raise your

00:31:06,249 --> 00:31:09,309
hand if you think it's a good idea

00:31:07,139 --> 00:31:11,980
anyone come on I want to shame someone

00:31:09,309 --> 00:31:14,830
by the end of the club all right no

00:31:11,980 --> 00:31:16,119
that's probably not a good idea so what

00:31:14,830 --> 00:31:17,889
we need to do is we need to fix it we

00:31:16,119 --> 00:31:20,590
need to change the context and there's a

00:31:17,889 --> 00:31:22,779
couple of ways to do that the hardest

00:31:20,590 --> 00:31:24,879
way to do it is to go figure out what an

00:31:22,779 --> 00:31:27,730
appropriate context is and use CH kon

00:31:24,879 --> 00:31:30,609
from the command line so I'm going to do

00:31:27,730 --> 00:31:32,799
an LS dash Z of our dub dub dub HTML I'm

00:31:30,609 --> 00:31:36,669
sorry an LS dash Z of our dub dub dub

00:31:32,799 --> 00:31:39,789
and I'll see that for the HTML directory

00:31:36,669 --> 00:31:42,609
it is of type HTTP d underscores this

00:31:39,789 --> 00:31:44,379
underscore content underscore tea and

00:31:42,609 --> 00:31:46,570
again that makes sense because labeling

00:31:44,379 --> 00:31:47,350
should be somewhat intuitive so what I'm

00:31:46,570 --> 00:31:51,130
going to do is I'm

00:31:47,350 --> 00:31:54,700
you the CH kon command change context so

00:31:51,130 --> 00:31:56,650
I'm going to say CH kon oh hello come

00:31:54,700 --> 00:31:59,230
back here there we go CH kon i'm going

00:31:56,650 --> 00:32:01,750
to set the user unconfined you the role

00:31:59,230 --> 00:32:04,390
object role and the type HDTV sis

00:32:01,750 --> 00:32:07,510
content type against bar w Bubba HTML

00:32:04,390 --> 00:32:09,130
foo HTML now when I do an LS dash Z

00:32:07,510 --> 00:32:12,130
against that again I'll see that sure

00:32:09,130 --> 00:32:14,530
enough that context that selinux context

00:32:12,130 --> 00:32:17,710
is correct and dum dum dum my website

00:32:14,530 --> 00:32:19,000
magically works anybody like typing all

00:32:17,710 --> 00:32:22,150
those command-line arguments I'm a lazy

00:32:19,000 --> 00:32:23,590
typist anyone else lazy anyone yea

00:32:22,150 --> 00:32:25,780
though that's where I'm expecting to see

00:32:23,590 --> 00:32:29,710
the hands pop up hey oh yes automate it

00:32:25,780 --> 00:32:31,840
an easier way to do this is to use CH

00:32:29,710 --> 00:32:34,000
kon and say hey CH kon I'm going to let

00:32:31,840 --> 00:32:37,510
you do the heavy lifting reference this

00:32:34,000 --> 00:32:41,380
known good file or directory so in this

00:32:37,510 --> 00:32:43,570
case when I take a look I see that my

00:32:41,380 --> 00:32:45,400
context is set up incorrectly I can do

00:32:43,570 --> 00:32:47,020
an LS dash Z of our dub dub dub and I

00:32:45,400 --> 00:32:49,539
see yet again that hTML is set up

00:32:47,020 --> 00:32:54,760
correctly so I say CH kon dash dash

00:32:49,539 --> 00:32:57,340
reference VAR w HTML and use those that

00:32:54,760 --> 00:33:00,220
context against VAR dub dub dub HTML foo

00:32:57,340 --> 00:33:02,049
HTML so i do a CH kon dash dash

00:33:00,220 --> 00:33:04,929
reference and sure enough it changes the

00:33:02,049 --> 00:33:07,360
content or it changes the context to the

00:33:04,929 --> 00:33:10,809
correct context and my web server works

00:33:07,360 --> 00:33:15,549
again or if you're like me and really

00:33:10,809 --> 00:33:17,049
seriously lazy restore con restore con

00:33:15,549 --> 00:33:18,490
goes and reads remember that that page

00:33:17,049 --> 00:33:20,890
after page after page after page after

00:33:18,490 --> 00:33:23,320
page of contexts that i had restore con

00:33:20,890 --> 00:33:25,450
goes and reads that and says I'm going

00:33:23,320 --> 00:33:27,570
to restore whatever you tell me to to

00:33:25,450 --> 00:33:30,580
the appropriate context based on that

00:33:27,570 --> 00:33:32,620
contexts file so in this example I see

00:33:30,580 --> 00:33:35,140
that I've screwed up my my context for

00:33:32,620 --> 00:33:39,039
food each tml and this time what I do is

00:33:35,140 --> 00:33:40,990
I just say restore come on I like to do

00:33:39,039 --> 00:33:44,200
dash of V to be verbose so that I can

00:33:40,990 --> 00:33:46,419
see what it's doing dash capital R to do

00:33:44,200 --> 00:33:48,340
it recursively against bar dub dub dub

00:33:46,419 --> 00:33:51,760
HTML it'll come back and it'll say well

00:33:48,340 --> 00:33:55,000
i found this file fuj tml whose context

00:33:51,760 --> 00:33:57,820
was admin home and i changed it to HDTV

00:33:55,000 --> 00:33:59,530
sis content type and now when i do in LS

00:33:57,820 --> 00:34:01,120
dash z against it sure enough i see that

00:33:59,530 --> 00:34:04,120
it's correct so restore con

00:34:01,120 --> 00:34:06,190
absolutely your friend almost invariably

00:34:04,120 --> 00:34:07,720
if you've been moving stuff around and

00:34:06,190 --> 00:34:09,700
not paying attention and this happens I

00:34:07,720 --> 00:34:11,560
mean we're human I do it all the time i

00:34:09,700 --> 00:34:13,720
use restore con i bet i use restore con

00:34:11,560 --> 00:34:15,100
twice or three times a week i'm jacking

00:34:13,720 --> 00:34:16,419
around with my system setting up demos

00:34:15,100 --> 00:34:18,250
doing all kinds of crazy stuff and then

00:34:16,419 --> 00:34:20,200
some something doesn't work my first

00:34:18,250 --> 00:34:21,730
step in that case is almost always ooh

00:34:20,200 --> 00:34:23,590
you know i don't remember if i set the

00:34:21,730 --> 00:34:24,909
context correctly restore convey our

00:34:23,590 --> 00:34:26,830
against the directory that i was working

00:34:24,909 --> 00:34:30,490
on almost invariably things start

00:34:26,830 --> 00:34:47,409
working so let's go to a little bit yes

00:34:30,490 --> 00:34:50,350
sir no why would it be dangerous well

00:34:47,409 --> 00:34:53,379
restore con is now because the default

00:34:50,350 --> 00:34:55,720
contexts are generally i mean obviously

00:34:53,379 --> 00:34:57,280
this is code that's written by humans so

00:34:55,720 --> 00:34:59,110
there is a potential for it for an error

00:34:57,280 --> 00:35:00,670
but restore con is generally very good

00:34:59,110 --> 00:35:02,860
about making sure that the context have

00:35:00,670 --> 00:35:04,720
been restored to the safe sane defaults

00:35:02,860 --> 00:35:07,540
now if you're doing something on your

00:35:04,720 --> 00:35:09,220
system where you're saying basically i

00:35:07,540 --> 00:35:10,390
think i'm better than the guys who i

00:35:09,220 --> 00:35:11,890
think I'm smarter than the guys who

00:35:10,390 --> 00:35:13,960
developed the selinux policy for this

00:35:11,890 --> 00:35:16,090
directory what I would posit is perhaps

00:35:13,960 --> 00:35:18,910
you should at least open a bug report

00:35:16,090 --> 00:35:20,470
and explain why you think that the

00:35:18,910 --> 00:35:23,980
policy is wrong and hopefully get that

00:35:20,470 --> 00:35:26,170
adopted upstream or if you think you're

00:35:23,980 --> 00:35:27,220
doing your think you're smarter than the

00:35:26,170 --> 00:35:29,530
whole team that does all the selinux

00:35:27,220 --> 00:35:32,230
work maybe potentially you might want to

00:35:29,530 --> 00:35:43,110
look at that again and see why see if

00:35:32,230 --> 00:35:43,110
you think that's accurate Jared yep

00:35:43,859 --> 00:35:47,619
yeah and I was really proud of myself I

00:35:46,119 --> 00:35:50,590
am a contributor to Red Hat Enterprise

00:35:47,619 --> 00:35:52,840
Linux version 6 I actually did find a

00:35:50,590 --> 00:35:54,400
bug in an selinux policy and I posted

00:35:52,840 --> 00:35:56,200
what I thought the fix was supposed to

00:35:54,400 --> 00:35:58,480
be and Dan actually act it and put it in

00:35:56,200 --> 00:36:02,350
so I could say bum bum bum I have a

00:35:58,480 --> 00:36:04,060
contributor ha now to be fair I used

00:36:02,350 --> 00:36:05,619
audit to allow which is totally the lazy

00:36:04,060 --> 00:36:09,880
way of doing it but we'll give back to

00:36:05,619 --> 00:36:10,869
that so so I again an answer your

00:36:09,880 --> 00:36:12,910
question i would say i don't think that

00:36:10,869 --> 00:36:14,680
it's it's dangerous i think that if you

00:36:12,910 --> 00:36:16,090
use restore con and it sets up a

00:36:14,680 --> 00:36:18,520
dangerous situation i think that maybe

00:36:16,090 --> 00:36:31,510
you may want to revisit your design that

00:36:18,520 --> 00:36:34,150
makes sense here's the gun there's your

00:36:31,510 --> 00:36:42,310
foot we can't prevent you from doing

00:36:34,150 --> 00:36:44,560
stuff like that exactly exactly i would

00:36:42,310 --> 00:36:46,420
i would say that restore con is probably

00:36:44,560 --> 00:36:48,130
even less dangerous than chmod cuz chmod

00:36:46,420 --> 00:36:49,990
you can go okay let me go do something

00:36:48,130 --> 00:36:53,080
stupid restore Khan says please set it

00:36:49,990 --> 00:36:54,850
back to the same defaults but yeah I

00:36:53,080 --> 00:36:56,590
mean yeah you're trusting Dan and

00:36:54,850 --> 00:36:58,270
company and Steve grub and all those

00:36:56,590 --> 00:37:00,760
guys oh my god even Thomas because I

00:36:58,270 --> 00:37:02,619
wrote one policy one time alright cool

00:37:00,760 --> 00:37:03,730
so let's talk about another kind of real

00:37:02,619 --> 00:37:04,990
world experience and again i'm going to

00:37:03,730 --> 00:37:08,710
pick on a patch because it's just so

00:37:04,990 --> 00:37:10,210
easy to pick on i want to set up you

00:37:08,710 --> 00:37:12,160
know how you can set up web servers that

00:37:10,210 --> 00:37:12,970
allow access to your home directory you

00:37:12,160 --> 00:37:15,790
know the public underscore HTML

00:37:12,970 --> 00:37:17,980
directory so what i'm going to do is I'm

00:37:15,790 --> 00:37:20,109
going to fix the httpd.conf file so that

00:37:17,980 --> 00:37:30,670
Paul can share off as public underscore

00:37:20,109 --> 00:37:33,300
HTML whoa hello that is interesting hang

00:37:30,670 --> 00:37:33,300
on just a second guys

00:37:36,570 --> 00:37:42,910
that is bizarre that got totally out of

00:37:39,040 --> 00:37:44,260
order we'll come back to that i was like

00:37:42,910 --> 00:37:47,770
no i'm not in the example section yeah

00:37:44,260 --> 00:37:49,030
not for that part alright so i also want

00:37:47,770 --> 00:37:50,170
to talk a little bit about that's really

00:37:49,030 --> 00:37:51,700
weird that i got totally out of order i

00:37:50,170 --> 00:37:54,490
don't know how i did that i want to talk

00:37:51,700 --> 00:37:56,350
a little bit about boolean boolean czar

00:37:54,490 --> 00:37:58,690
default settings that either allow or

00:37:56,350 --> 00:38:02,470
disallow something and as an example of

00:37:58,690 --> 00:38:05,440
that if i do a get SE bool so get as he

00:38:02,470 --> 00:38:07,450
linux bullion's dash a you can see that

00:38:05,440 --> 00:38:08,740
there are just billions of them I think

00:38:07,450 --> 00:38:13,090
there's something like 400 and something

00:38:08,740 --> 00:38:20,140
or other pretty crazy stuff what in the

00:38:13,090 --> 00:38:21,760
world okay my presentation I got a bunch

00:38:20,140 --> 00:38:23,530
of weird stuff out of order oh I

00:38:21,760 --> 00:38:28,660
apologize folks I don't know how that

00:38:23,530 --> 00:38:33,460
happened so as an example if I do a get

00:38:28,660 --> 00:38:35,350
se bool dash a pipe grep NFS I can see

00:38:33,460 --> 00:38:37,330
all of the selinux rules that are set up

00:38:35,350 --> 00:38:40,450
around NFS like for instance do I want

00:38:37,330 --> 00:38:44,230
to allow ftpd to use NFS mounted

00:38:40,450 --> 00:38:46,120
directories do I want to allow httpd to

00:38:44,230 --> 00:38:48,250
use NFS mounted directories do I want to

00:38:46,120 --> 00:38:49,990
use Samba to use NFS mount of

00:38:48,250 --> 00:38:53,530
directories these are all policies which

00:38:49,990 --> 00:38:54,730
can be set from within selinux and hang

00:38:53,530 --> 00:39:04,570
on just second because I see something

00:38:54,730 --> 00:39:06,160
weird coming hold on okay this is truly

00:39:04,570 --> 00:39:07,990
bizarre guys I don't know how but my

00:39:06,160 --> 00:39:10,450
slides got completely blown out of order

00:39:07,990 --> 00:39:15,910
from the last time I delivered this so

00:39:10,450 --> 00:39:17,470
give me two seconds I apologize I know I

00:39:15,910 --> 00:39:23,740
know all right here you logged into my

00:39:17,470 --> 00:39:27,100
system all right there we go that that

00:39:23,740 --> 00:39:28,390
is bizarre so this is it I don't know

00:39:27,100 --> 00:39:30,250
how these got out of order but I

00:39:28,390 --> 00:39:32,350
probably shot myself in the foot to do

00:39:30,250 --> 00:39:34,240
something on a previous presentation so

00:39:32,350 --> 00:39:36,700
we'll come back to the boolean such a

00:39:34,240 --> 00:39:38,320
second this is odd stuff so in the

00:39:36,700 --> 00:39:39,460
example allowing access to that home

00:39:38,320 --> 00:39:42,700
directory like I was talking about

00:39:39,460 --> 00:39:46,330
earlier so you set permissions to Paul's

00:39:42,700 --> 00:39:48,010
home directory you modify the httpd.conf

00:39:46,330 --> 00:39:49,450
file and I

00:39:48,010 --> 00:39:52,650
see here if I look at the home directory

00:39:49,450 --> 00:39:54,970
I get I've set permissions so that

00:39:52,650 --> 00:39:56,560
Paul's home directory is accessible by

00:39:54,970 --> 00:39:57,790
other because that's you know the Apache

00:39:56,560 --> 00:39:59,290
web server needs to be able to access

00:39:57,790 --> 00:40:06,070
that so my permissions are set correctly

00:39:59,290 --> 00:40:09,100
I have modified the httpd comp file and

00:40:06,070 --> 00:40:13,180
I restart the Apache web server i create

00:40:09,100 --> 00:40:14,230
the index.html file so he's created it

00:40:13,180 --> 00:40:15,610
and he's created it in the right

00:40:14,230 --> 00:40:18,580
directory so it's in the it's got the

00:40:15,610 --> 00:40:22,810
right context I fire up the trusty dusty

00:40:18,580 --> 00:40:24,250
browser and boom dog gone it I know that

00:40:22,810 --> 00:40:27,550
I set the permissions correctly i know i

00:40:24,250 --> 00:40:30,730
modified the httpd.conf if i go and i

00:40:27,550 --> 00:40:33,100
look at the httpd access access log I'll

00:40:30,730 --> 00:40:34,870
see well all it really gives me is a 404

00:40:33,100 --> 00:40:38,530
done really oh I'm sorry 403 permission

00:40:34,870 --> 00:40:40,300
denied doesn't really tell me why I go

00:40:38,530 --> 00:40:41,830
look at the error log same thing it's

00:40:40,300 --> 00:40:44,020
just permission denied what in the world

00:40:41,830 --> 00:40:48,160
is going on even if i look in VAR log

00:40:44,020 --> 00:40:51,070
messages ah wait a second and it says

00:40:48,160 --> 00:40:52,930
point blank selinux is denying

00:40:51,070 --> 00:40:57,040
permission now this is why I said you

00:40:52,930 --> 00:40:58,330
want to put the SC alerts and SE

00:40:57,040 --> 00:41:00,640
troubleshoot server up and running

00:40:58,330 --> 00:41:02,740
because it will write human readable log

00:41:00,640 --> 00:41:04,810
file entries into VAR log messages and

00:41:02,740 --> 00:41:07,210
it will even tell you hey if you want to

00:41:04,810 --> 00:41:11,050
see more go run SC alert l and then this

00:41:07,210 --> 00:41:12,370
god-awful uuid but it's a heck of a lot

00:41:11,050 --> 00:41:14,500
more intuitive than the old stuff in the

00:41:12,370 --> 00:41:16,660
real for time frame the nice thing is

00:41:14,500 --> 00:41:19,930
when i run se alert against this i love

00:41:16,660 --> 00:41:21,430
this i love this it says selinux is

00:41:19,930 --> 00:41:24,040
preventing the web server from accessing

00:41:21,430 --> 00:41:25,990
a mislabeled file here's a detailed

00:41:24,040 --> 00:41:27,550
description well selinux is denied

00:41:25,990 --> 00:41:29,980
access to the home directory because

00:41:27,550 --> 00:41:33,510
something is not set up correctly if you

00:41:29,980 --> 00:41:35,740
want to allow access hey look at this

00:41:33,510 --> 00:41:41,310
here's the one-liner that you need to

00:41:35,740 --> 00:41:44,080
run just to allow access so if you used

00:41:41,310 --> 00:41:45,940
selinux in the real for time frame where

00:41:44,080 --> 00:41:48,400
it was just god-awful difficult horribly

00:41:45,940 --> 00:41:50,290
cryptic and not intuitive at all I would

00:41:48,400 --> 00:41:52,000
say you really want to reconsider

00:41:50,290 --> 00:41:53,860
because now the tools will actually come

00:41:52,000 --> 00:41:56,620
back and give you human readable error

00:41:53,860 --> 00:41:58,450
reports and instructions on how to set

00:41:56,620 --> 00:41:59,830
this up one second I'll answer your

00:41:58,450 --> 00:42:02,109
question just like it now having said

00:41:59,830 --> 00:42:06,880
that just because

00:42:02,109 --> 00:42:09,489
does it says you can do a thing doesn't

00:42:06,880 --> 00:42:11,230
necessarily mean that you should do a

00:42:09,489 --> 00:42:12,489
thing make sure you understand the

00:42:11,230 --> 00:42:19,390
implications yes sir what's your

00:42:12,489 --> 00:42:21,130
question I'm sorry actually yes it is

00:42:19,390 --> 00:42:22,450
and I'm getting there in a second if

00:42:21,130 --> 00:42:25,480
assuming that Mike slides haven't been

00:42:22,450 --> 00:42:28,329
completely blown out of order yes the

00:42:25,480 --> 00:42:30,160
dash p argument set se Byul Dash P is

00:42:28,329 --> 00:42:31,749
for permanence so it'll actually write

00:42:30,160 --> 00:42:33,759
it under etsy selinux and i'll talk more

00:42:31,749 --> 00:42:36,130
about that in just a little while so i

00:42:33,759 --> 00:42:38,489
run the command HR actually that's the

00:42:36,130 --> 00:42:40,809
rest of the output so when i get done

00:42:38,489 --> 00:42:42,999
looking at the output if I issue that

00:42:40,809 --> 00:42:47,710
command said se bull Dash P httpd and

00:42:42,999 --> 00:42:49,660
naval home ders equals 1 bada-bing now

00:42:47,710 --> 00:42:54,749
it works yes sir oops hold on oops oops

00:42:49,660 --> 00:42:54,749
oops oops sorry question

00:43:00,330 --> 00:43:10,860
say again with the boolean still stuff

00:43:08,940 --> 00:43:13,160
yes absolutely so the question was if

00:43:10,860 --> 00:43:15,810
I've manually set the context correctly

00:43:13,160 --> 00:43:17,730
for the for the directory within my home

00:43:15,810 --> 00:43:19,980
directory with the boolean still stop me

00:43:17,730 --> 00:43:21,750
yes because they're stacked so what that

00:43:19,980 --> 00:43:23,070
means is even if I've got permissions

00:43:21,750 --> 00:43:25,020
and even if I've got an essay Linux

00:43:23,070 --> 00:43:26,970
context built correctly under my public

00:43:25,020 --> 00:43:28,800
underscore HTML directory but the

00:43:26,970 --> 00:43:31,170
boolean is still turned off for allowing

00:43:28,800 --> 00:43:38,820
the httpd to access home directories you

00:43:31,170 --> 00:43:41,100
will be blocked the there is a well it's

00:43:38,820 --> 00:43:42,720
there is a label there are labels on the

00:43:41,100 --> 00:43:46,200
file system and then there are also

00:43:42,720 --> 00:43:47,640
labels on or there are also boolean set

00:43:46,200 --> 00:43:49,470
within selinux it's two different things

00:43:47,640 --> 00:44:09,360
so I'll show you more about that in a

00:43:49,470 --> 00:44:10,890
second someone else I'm sorry oh oh I

00:44:09,360 --> 00:44:12,210
see your point so the question is if I'm

00:44:10,890 --> 00:44:15,150
using remotes this log if i'm using

00:44:12,210 --> 00:44:17,010
rsyslog are these going to get reported

00:44:15,150 --> 00:44:19,110
to that central logging location is that

00:44:17,010 --> 00:44:20,670
a fair Restatement absolutely yeah

00:44:19,110 --> 00:44:26,690
because this is just this is just using

00:44:20,670 --> 00:44:26,690
syslog messaging yes sir

00:44:40,550 --> 00:44:48,750
yes and no if you're using nfsv4 there

00:44:44,610 --> 00:45:03,060
is limited support for selinux don't do

00:44:48,750 --> 00:45:04,530
it because yeah because well I mean I

00:45:03,060 --> 00:45:07,320
did create the the public underscore

00:45:04,530 --> 00:45:09,120
HTML directory the label on the public

00:45:07,320 --> 00:45:10,380
underscore HTML directory does need to

00:45:09,120 --> 00:45:11,520
be set correctly I'm going to talk a

00:45:10,380 --> 00:45:13,350
little bit more about that in a little

00:45:11,520 --> 00:45:15,600
while but right now this is a general

00:45:13,350 --> 00:45:17,100
this is a global boolean that says can

00:45:15,600 --> 00:45:20,430
the web server access home directories

00:45:17,100 --> 00:45:24,030
in general because we don't necessarily

00:45:20,430 --> 00:45:25,710
want to say thou shalt do it this way

00:45:24,030 --> 00:45:27,210
forever and ever you may want to go back

00:45:25,710 --> 00:45:28,620
and say no no no it's going to be bar

00:45:27,210 --> 00:45:31,350
it's gonna be slash home slash user

00:45:28,620 --> 00:45:34,440
slash dub dub dub or home user web or

00:45:31,350 --> 00:45:38,040
whatever so there's some flexibility

00:45:34,440 --> 00:45:40,860
there to see what selinux bullion's have

00:45:38,040 --> 00:45:42,810
been set and made persistent go look

00:45:40,860 --> 00:45:46,560
under etsy selinux targeted modules

00:45:42,810 --> 00:45:50,940
active bullion's dot local and you can

00:45:46,560 --> 00:45:53,640
see that it'll it this is a log that

00:45:50,940 --> 00:45:56,730
says that we have made httpd enable home

00:45:53,640 --> 00:45:59,310
ders permanent where it says up the top

00:45:56,730 --> 00:46:02,460
this file is auto-generated by lib se

00:45:59,310 --> 00:46:06,960
manage do not edit directly it's serious

00:46:02,460 --> 00:46:07,890
I thought I and just experimenting I

00:46:06,960 --> 00:46:09,330
thought well you know if the boolean

00:46:07,890 --> 00:46:11,220
czar stored there then I can nuke the

00:46:09,330 --> 00:46:12,480
boolean I can Luke this and reboot and

00:46:11,220 --> 00:46:13,290
it'll reset it to factory defaults and

00:46:12,480 --> 00:46:14,730
unfortunately that's not the case

00:46:13,290 --> 00:46:17,490
because we actually do regenerate a

00:46:14,730 --> 00:46:19,290
binary policy file this is here only so

00:46:17,490 --> 00:46:21,240
that you can see what's been done if you

00:46:19,290 --> 00:46:26,010
want to undo it then you need to go and

00:46:21,240 --> 00:46:30,740
reverse this yes sir you're an audit

00:46:26,010 --> 00:46:30,740
trail yes VAR log audit audit log

00:46:31,730 --> 00:46:36,690
alright cool i love this i'm down to

00:46:34,020 --> 00:46:37,830
temporary tattoos so if he if you're

00:46:36,690 --> 00:46:40,770
gonna if you're going to ask a question

00:46:37,830 --> 00:46:43,470
you're getting a temporary tattoo all

00:46:40,770 --> 00:46:46,109
right when in doubt check the label okay

00:46:43,470 --> 00:46:47,910
I when in doubt check the label again

00:46:46,109 --> 00:46:49,170
this is an example i've created a home

00:46:47,910 --> 00:46:52,590
directory under public underscore HTML

00:46:49,170 --> 00:46:55,170
and XHTML by do an LS dash z against

00:46:52,590 --> 00:46:57,210
that you can see I can find my mouse

00:46:55,170 --> 00:47:00,119
there was no no no that's what I want

00:46:57,210 --> 00:47:03,090
you can see that it's actually created

00:47:00,119 --> 00:47:05,340
with user underscore home type so again

00:47:03,090 --> 00:47:08,880
if I've got if I've got a flaky label my

00:47:05,340 --> 00:47:11,520
my first step should probably be restore

00:47:08,880 --> 00:47:13,830
con so I run restore con against it and

00:47:11,520 --> 00:47:20,190
sure enough it changes it from user home

00:47:13,830 --> 00:47:22,800
type 2 HTTP user content type and voila

00:47:20,190 --> 00:47:24,480
it brings it back up now other things to

00:47:22,800 --> 00:47:25,920
check always take a look if you're

00:47:24,480 --> 00:47:26,940
getting something flaky especially if

00:47:25,920 --> 00:47:28,320
you're getting some kind of an error

00:47:26,940 --> 00:47:30,150
that says something like permission

00:47:28,320 --> 00:47:33,180
denied or unable to start or whatever

00:47:30,150 --> 00:47:38,390
look in VAR log audit log and you'll see

00:47:33,180 --> 00:47:42,090
pretty clearly hey there's an ABC denied

00:47:38,390 --> 00:47:44,550
against httpd so that's a real good

00:47:42,090 --> 00:47:51,240
indicator that if you see an ABC that

00:47:44,550 --> 00:47:53,250
it's an selinux issue yes sir this is

00:47:51,240 --> 00:47:54,180
from SE troubleshoot I'm going to tell

00:47:53,250 --> 00:47:55,589
you right now if you're going to use

00:47:54,180 --> 00:47:57,180
selinux and you really should use

00:47:55,589 --> 00:48:02,030
selinux pleased with the SE troubleshoot

00:47:57,180 --> 00:48:04,500
demon oh that's a damn good question

00:48:02,030 --> 00:48:06,140
that is a conversation that I've had

00:48:04,500 --> 00:48:10,530
several times it has been a very

00:48:06,140 --> 00:48:12,690
spirited conversation in fact I put it

00:48:10,530 --> 00:48:15,510
in all my kick-starts it should be there

00:48:12,690 --> 00:48:16,589
period the whole the whole argument is

00:48:15,510 --> 00:48:18,000
we want this to be as minimal as

00:48:16,589 --> 00:48:19,650
possible versus we want this to be as

00:48:18,000 --> 00:48:20,910
functional you know what man as far as

00:48:19,650 --> 00:48:22,530
I'm concerned that is a core

00:48:20,910 --> 00:48:28,560
functionality that should just be there

00:48:22,530 --> 00:48:30,990
I'm with you on it yes sir there are

00:48:28,560 --> 00:48:32,430
always corner cases absolutely but I

00:48:30,990 --> 00:48:33,869
mean on an embedded system I don't even

00:48:32,430 --> 00:48:35,040
know that you would run as he linux I

00:48:33,869 --> 00:48:36,599
would think you should but it depends on

00:48:35,040 --> 00:48:42,450
what the role of the the embedded system

00:48:36,599 --> 00:48:44,640
is all right okay s the alert since the

00:48:42,450 --> 00:48:47,430
log entries themselves are not terribly

00:48:44,640 --> 00:48:49,320
terribly intuitive i like to use SE lurt

00:48:47,430 --> 00:48:51,119
a so in this example i was actually

00:48:49,320 --> 00:48:52,890
setting up squirrelmail on a system and

00:48:51,119 --> 00:48:57,060
i was getting all kinds of weird issues

00:48:52,890 --> 00:49:00,210
so i ran SE alert dash a against VAR

00:48:57,060 --> 00:49:02,610
dog audit audit log and it came back and

00:49:00,210 --> 00:49:06,410
it said I see that there's a problem the

00:49:02,610 --> 00:49:08,550
HTTP demon is not allowed to send mail

00:49:06,410 --> 00:49:09,840
because by default unless you explicitly

00:49:08,550 --> 00:49:12,840
want to grant it's probably a good idea

00:49:09,840 --> 00:49:15,930
to not allow that so I ran the boolean

00:49:12,840 --> 00:49:17,880
httpd can underscore send mail right

00:49:15,930 --> 00:49:22,050
there as it said and sure enough boom

00:49:17,880 --> 00:49:23,520
away it goes now the SE manage command

00:49:22,050 --> 00:49:25,200
this is from the command line can be

00:49:23,520 --> 00:49:28,260
used to do all kinds of stuff akin set

00:49:25,200 --> 00:49:31,470
file context as he managed set f context

00:49:28,260 --> 00:49:32,820
a SE managed port as he managed

00:49:31,470 --> 00:49:35,550
interface for the network interface

00:49:32,820 --> 00:49:38,220
bullion's a lot of other stuff can be

00:49:35,550 --> 00:49:40,080
done note that se manage only changes

00:49:38,220 --> 00:49:41,670
the policy once you have changed the

00:49:40,080 --> 00:49:44,040
policy and again that gets stored under

00:49:41,670 --> 00:49:46,320
etsy selinux you then use need to use to

00:49:44,040 --> 00:49:51,810
CH kon or restore con to change the file

00:49:46,320 --> 00:49:54,210
system so se manage can tell us that the

00:49:51,810 --> 00:49:57,540
context is wrong but the list of options

00:49:54,210 --> 00:50:01,800
is giving us is a bit overwhelming what

00:49:57,540 --> 00:50:05,810
in the world hang on guys I'm back to

00:50:01,800 --> 00:50:12,060
being out of order this is too strange

00:50:05,810 --> 00:50:13,680
hang on just a second yeah but that has

00:50:12,060 --> 00:50:17,460
nothing to do with this no it's like

00:50:13,680 --> 00:50:23,940
it's like my slide deck got hosed huh

00:50:17,460 --> 00:50:25,380
alright so in another example we're

00:50:23,940 --> 00:50:26,820
going to set up the Apache web server to

00:50:25,380 --> 00:50:29,790
serve content out of someplace weird

00:50:26,820 --> 00:50:34,050
like I put it under / foo / bar so I go

00:50:29,790 --> 00:50:37,830
in and I create fubar and I create an

00:50:34,050 --> 00:50:40,680
index dot HTML file under fubar I modify

00:50:37,830 --> 00:50:43,140
a virtualhost directive under httpd.conf

00:50:40,680 --> 00:50:45,330
that's pointing to you / view / bar

00:50:43,140 --> 00:50:48,330
everything looks good my permissions are

00:50:45,330 --> 00:50:52,350
good i've created the index.html file i

00:50:48,330 --> 00:50:55,620
started up though and apache says I'm

00:50:52,350 --> 00:50:57,600
sorry that directory doesn't exist well

00:50:55,620 --> 00:51:00,200
no it does exist we just created it we

00:50:57,600 --> 00:51:00,200
just saw it

00:51:04,440 --> 00:51:09,329
if you are running a graphical login

00:51:06,510 --> 00:51:11,310
you're also going to get a graphical

00:51:09,329 --> 00:51:12,869
warning message you can see the little

00:51:11,310 --> 00:51:13,950
sheriff star thing that shows that our

00:51:12,869 --> 00:51:15,810
except actually does not have a sheriff

00:51:13,950 --> 00:51:17,220
star anymore so it'll come up it'll give

00:51:15,810 --> 00:51:18,839
you an error message and the cool thing

00:51:17,220 --> 00:51:22,890
is that if you click on that it'll bring

00:51:18,839 --> 00:51:25,109
up a graphical tool unfortunately this

00:51:22,890 --> 00:51:26,579
one's a little harder to read this one

00:51:25,109 --> 00:51:30,900
comes back and it does tell you hey

00:51:26,579 --> 00:51:33,510
httpd can't read the the directories in

00:51:30,900 --> 00:51:34,859
that in that directory that we filed our

00:51:33,510 --> 00:51:38,069
can't read the contacts on in the files

00:51:34,859 --> 00:51:39,420
in that directory so since that's kind

00:51:38,069 --> 00:51:41,069
of overwhelming it says you need to

00:51:39,420 --> 00:51:43,050
change the file context to one of any of

00:51:41,069 --> 00:51:45,390
these four thousand file contexts to

00:51:43,050 --> 00:51:50,670
make this work where might we look to go

00:51:45,390 --> 00:51:56,190
see what an appropriate context is bar

00:51:50,670 --> 00:51:59,700
dub dub dub HTML right so I do an LS

00:51:56,190 --> 00:52:02,280
dash Z of our dub dub dub HTML and I see

00:51:59,700 --> 00:52:06,270
what the context is what i can do is i

00:52:02,280 --> 00:52:09,630
can use SE manage f context to set a

00:52:06,270 --> 00:52:11,849
policy that says the content of / food /

00:52:09,630 --> 00:52:15,089
whatever is going to be of HDD be sis

00:52:11,849 --> 00:52:18,420
content type so i use SE manage set the

00:52:15,089 --> 00:52:22,579
file context i'm adding so dash a the

00:52:18,420 --> 00:52:25,140
type HTTP sis content type 2 / foo /

00:52:22,579 --> 00:52:26,400
anything that and anything under it so

00:52:25,140 --> 00:52:28,290
that's just a regular expression if

00:52:26,400 --> 00:52:30,210
you're not good at regular expressions

00:52:28,290 --> 00:52:32,130
don't panic go look under that file

00:52:30,210 --> 00:52:33,810
contexts file and you'll see a great

00:52:32,130 --> 00:52:35,940
example of what the what the regular

00:52:33,810 --> 00:52:37,890
expression should look like now remember

00:52:35,940 --> 00:52:41,280
that we are just updating the definition

00:52:37,890 --> 00:52:43,980
of the file under etsy selinux that way

00:52:41,280 --> 00:52:46,530
if the file system gets relabeled it'll

00:52:43,980 --> 00:52:48,510
automatically get set correctly but we

00:52:46,530 --> 00:52:53,369
then need to manually go and real able

00:52:48,510 --> 00:52:56,609
so I issue the the dog on it as he Linux

00:52:53,369 --> 00:52:58,109
fkrs he managed f context then I restore

00:52:56,609 --> 00:52:59,430
con against it and you see that it

00:52:58,109 --> 00:53:02,609
changes the context of all of those

00:52:59,430 --> 00:53:06,740
files and now I can start the web server

00:53:02,609 --> 00:53:09,510
and I see my dummy host example calm and

00:53:06,740 --> 00:53:10,980
again a hint you can see the syntax for

00:53:09,510 --> 00:53:13,800
that regular expression under the file

00:53:10,980 --> 00:53:16,710
underscore context file and there are

00:53:13,800 --> 00:53:18,330
some examples of it also local changes

00:53:16,710 --> 00:53:22,410
to policy or stored under etsy

00:53:18,330 --> 00:53:24,360
at Etsy selinux if you do a find on etsy

00:53:22,410 --> 00:53:25,860
selinux pipe grip local you can see all

00:53:24,360 --> 00:53:27,720
of the local changes all the things

00:53:25,860 --> 00:53:31,290
you've done specific to your system

00:53:27,720 --> 00:53:35,640
under etsy selinux now creating basic

00:53:31,290 --> 00:53:37,260
policies there are two utilities that

00:53:35,640 --> 00:53:39,750
are going to be really helpful audit 2y

00:53:37,260 --> 00:53:43,740
is somewhat helpful audit to allow is

00:53:39,750 --> 00:53:46,230
very helpful now again I do want to say

00:53:43,740 --> 00:53:49,470
just because audit to allow will create

00:53:46,230 --> 00:53:51,360
a will allow you to create a policy make

00:53:49,470 --> 00:53:54,180
sure you understand the implications of

00:53:51,360 --> 00:53:57,000
applying that policy before you do so so

00:53:54,180 --> 00:53:59,840
in an example X off is leaking file

00:53:57,000 --> 00:54:03,390
descriptors and selinux is blocking it

00:53:59,840 --> 00:54:07,050
actually in the in this example it was

00:54:03,390 --> 00:54:08,220
in permissive type but / mitre leaked

00:54:07,050 --> 00:54:11,700
file descriptors are potentially

00:54:08,220 --> 00:54:13,680
dangerous so i can use audit to Y or se

00:54:11,700 --> 00:54:16,940
alert dash B to see why this was blocked

00:54:13,680 --> 00:54:21,300
and it will give me a relatively

00:54:16,940 --> 00:54:23,550
intuitive explanation if i look at audit

00:54:21,300 --> 00:54:27,240
to our essay alert dash b again this is

00:54:23,550 --> 00:54:28,530
somewhat intuitive but it'll it'll come

00:54:27,240 --> 00:54:31,860
back and i'll say basically you need to

00:54:28,530 --> 00:54:34,080
generate your own policy now you can

00:54:31,860 --> 00:54:36,630
look at this URL that's the selinux back

00:54:34,080 --> 00:54:37,920
for more details essentially what i'm

00:54:36,630 --> 00:54:40,530
going to do though is I'm going to grab

00:54:37,920 --> 00:54:43,860
all the x off entries from audit log and

00:54:40,530 --> 00:54:46,740
pipe them to audit to allow and create a

00:54:43,860 --> 00:54:48,870
local policy called x off local so i

00:54:46,740 --> 00:54:50,910
grep x off from audit to Allah from

00:54:48,870 --> 00:54:53,790
audit log pipe it to audit to allow dash

00:54:50,910 --> 00:54:58,350
M local X off and it's going to generate

00:54:53,790 --> 00:55:00,960
a policy that says for type X off type

00:54:58,350 --> 00:55:02,430
and type console device type for a class

00:55:00,960 --> 00:55:05,100
character device file we're going to

00:55:02,430 --> 00:55:07,380
allow read and write and this is the

00:55:05,100 --> 00:55:10,410
actual policy that gets created allow X

00:55:07,380 --> 00:55:12,240
off type access to a console device as a

00:55:10,410 --> 00:55:14,970
character file and give it readwrite

00:55:12,240 --> 00:55:16,800
access that allows those leaking file

00:55:14,970 --> 00:55:21,690
descriptors to go ahead and go and be

00:55:16,800 --> 00:55:23,640
allowed this is actually a bad thing but

00:55:21,690 --> 00:55:25,800
it does get around the air now what's

00:55:23,640 --> 00:55:29,530
the next step that you need to do after

00:55:25,800 --> 00:55:32,350
you've done this there's a problem with

00:55:29,530 --> 00:55:33,730
file a bug file a bug against X aw let

00:55:32,350 --> 00:55:35,980
them know that they've got a leaking

00:55:33,730 --> 00:55:39,190
file descriptors so you should always

00:55:35,980 --> 00:55:41,500
report things like this as bugs alright

00:55:39,190 --> 00:55:43,540
oh by the way if you are a red hat

00:55:41,500 --> 00:55:45,580
customer please file it through support

00:55:43,540 --> 00:55:46,690
if you're not a red hat customer if

00:55:45,580 --> 00:55:49,270
you're in the community please do it

00:55:46,690 --> 00:55:51,460
through bugzilla just be aware that

00:55:49,270 --> 00:55:53,800
there is no SLA around bugzilla we'll

00:55:51,460 --> 00:55:56,050
get to it as soon as we can selinux is

00:55:53,800 --> 00:55:57,910
enabled or disabled an Etsy sis config

00:55:56,050 --> 00:56:01,570
selinux which is actually just a symlink

00:55:57,910 --> 00:56:03,840
to Etsy selinux config selinux equals

00:56:01,570 --> 00:56:07,660
and then you can be enforcing or

00:56:03,840 --> 00:56:09,280
permissive or disabled to activate

00:56:07,660 --> 00:56:11,680
selinux there are a couple of ways to do

00:56:09,280 --> 00:56:13,900
it set selinux equals permissive touch

00:56:11,680 --> 00:56:17,950
the file called dot auto real able in

00:56:13,900 --> 00:56:20,620
route and reboot do not if you have been

00:56:17,950 --> 00:56:23,410
running your system and disabled mode

00:56:20,620 --> 00:56:24,850
don't set it to enabled and reboot

00:56:23,410 --> 00:56:27,910
because your system will probably not

00:56:24,850 --> 00:56:30,070
boot set it too permissive mode so that

00:56:27,910 --> 00:56:33,130
all of those errors will get logged but

00:56:30,070 --> 00:56:34,600
not addressed when you reboot it will

00:56:33,130 --> 00:56:37,000
run through relabeling the file system

00:56:34,600 --> 00:56:38,530
it's a sum it can be a long process

00:56:37,000 --> 00:56:40,900
depending on how big your file system

00:56:38,530 --> 00:56:42,970
isn't how full it is you can also run

00:56:40,900 --> 00:56:45,520
the command fix files real able and

00:56:42,970 --> 00:56:47,440
reboot don't do that in run level 5

00:56:45,520 --> 00:56:48,940
because it nukes the contents of the

00:56:47,440 --> 00:56:50,620
temp directory and if you get the X font

00:56:48,940 --> 00:56:56,260
server your ex session is going to get

00:56:50,620 --> 00:56:57,970
really really cranky alright so you can

00:56:56,260 --> 00:56:59,830
run selinux and permissive mode where it

00:56:57,970 --> 00:57:01,870
will not wear it will not block anything

00:56:59,830 --> 00:57:03,730
except log at ABC errors do this in a

00:57:01,870 --> 00:57:07,600
development environment and build your

00:57:03,730 --> 00:57:11,620
policy from there there is a graphical

00:57:07,600 --> 00:57:14,230
tool called system config selinux that

00:57:11,620 --> 00:57:15,790
goes through and shows you the modes it

00:57:14,230 --> 00:57:17,200
tells it allows you to change the

00:57:15,790 --> 00:57:19,000
current mode from enforcing to not

00:57:17,200 --> 00:57:21,220
enforcing unless you go through and look

00:57:19,000 --> 00:57:23,110
at all the boolean's lets you go through

00:57:21,220 --> 00:57:25,360
and look at all the file labeling so

00:57:23,110 --> 00:57:26,890
this is a great tool to go and I think

00:57:25,360 --> 00:57:28,390
actually learn because you can go poke

00:57:26,890 --> 00:57:29,950
through it not save any of your changes

00:57:28,390 --> 00:57:33,280
and it's it's a nice graphical tool to

00:57:29,950 --> 00:57:36,850
look at all that so if you run into

00:57:33,280 --> 00:57:39,310
selinux errors fix them please report

00:57:36,850 --> 00:57:43,010
them we can't fix it if we don't know

00:57:39,310 --> 00:57:44,720
about it and hopefully

00:57:43,010 --> 00:57:47,120
now I feel like you've done the Charles

00:57:44,720 --> 00:57:50,450
Atlas thing and it's a little bit less

00:57:47,120 --> 00:57:52,910
scary nothing that we've covered in here

00:57:50,450 --> 00:57:55,670
is rocket science it's new knowledge to

00:57:52,910 --> 00:57:57,860
be sure but it's not rocket science

00:57:55,670 --> 00:58:00,230
we've got tools and tooling available

00:57:57,860 --> 00:58:02,360
that give you intuitive messages not

00:58:00,230 --> 00:58:05,840
only of what the problem is but how to

00:58:02,360 --> 00:58:09,110
fix it so finally please don't turn it

00:58:05,840 --> 00:58:11,930
off it can really save you in the event

00:58:09,110 --> 00:58:13,610
of a breach this can really do a lot to

00:58:11,930 --> 00:58:15,920
keep bad guys out of sensitive areas of

00:58:13,610 --> 00:58:18,440
your file system it is so much easier

00:58:15,920 --> 00:58:21,320
today to use selinux than it was even a

00:58:18,440 --> 00:58:25,130
few years ago and this is again this is

00:58:21,320 --> 00:58:28,820
NSA grade security and it is free so use

00:58:25,130 --> 00:58:30,380
it if you like today's presentation

00:58:28,820 --> 00:58:33,530
please let us know fill out the eval

00:58:30,380 --> 00:58:34,730
form and and say good things if you

00:58:33,530 --> 00:58:38,540
didn't like today's presentation just

00:58:34,730 --> 00:58:40,190
keep dorant opinion to yourself the

00:58:38,540 --> 00:58:42,590
selinux guide is available at these

00:58:40,190 --> 00:58:44,930
websites there are selinux mailing lists

00:58:42,590 --> 00:58:46,790
out there in the Fedora project if you

00:58:44,930 --> 00:58:48,590
have any questions you can follow me on

00:58:46,790 --> 00:58:51,080
twitter at Thomas D Cameron or you can

00:58:48,590 --> 00:59:00,310
reach out to Dan Walsh via his blog at

00:58:51,080 --> 00:59:00,310
Dan Walsh livejournal com ok thank you

00:59:16,770 --> 00:59:20,910
what about this I can help you like it

00:59:19,050 --> 00:59:23,900
we have the same problem what would

00:59:20,910 --> 00:59:23,900
happen a few weeks

00:59:26,760 --> 00:59:31,420
let's put the word out

00:59:29,329 --> 00:59:31,420
you

01:00:39,019 --> 01:00:45,900
as a service leader in cloud computing

01:00:42,749 --> 01:00:47,490
all we do is hosting computing to us the

01:00:45,900 --> 01:00:49,410
cloud is just the next generation of

01:00:47,490 --> 01:00:51,359
hosting and if someone who's been in the

01:00:49,410 --> 01:00:53,309
hosting industry for 12 years we feel

01:00:51,359 --> 01:00:54,509
we're in a unique position to really

01:00:53,309 --> 01:00:56,609
help bring these two worlds together

01:00:54,509 --> 01:00:58,950
these different sets of technologies and

01:00:56,609 --> 01:01:01,289
to help companies embrace this new world

01:00:58,950 --> 01:01:03,299
in this great new tool that allows

01:01:01,289 --> 01:01:05,880
faster innovation not only is it about

01:01:03,299 --> 01:01:11,279
us being responsive and accountable but

01:01:05,880 --> 01:01:14,089
it's about us doing more for you webos

01:01:11,279 --> 01:01:17,640
an OS that works the way that you do

01:01:14,089 --> 01:01:21,799
across all your devices HP Slate and

01:01:17,640 --> 01:01:21,799

YouTube URL: https://www.youtube.com/watch?v=e_dzkYlXggM


