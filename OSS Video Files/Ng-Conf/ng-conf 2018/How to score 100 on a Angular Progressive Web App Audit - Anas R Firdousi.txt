Title: How to score 100 on a Angular Progressive Web App Audit - Anas R Firdousi
Publication date: 2018-11-16
Playlist: ng-conf 2018
Description: 
	ng-conf is a two day, single track conference focused on delivering the highest quality training in the Angular JavaScript framework. 1500+ developers from across the country will converge on beautiful Salt Lake City, UT to participate in training sessions by the Google Angular team, and other Angular experts. In addition to the invaluable training, ng-conf will deliver a premier conference experience for attendees, providing opportunities to network with other developers, relax at social events, and engage in some of the unique entertainment opportunities available in Utah.
Captions: 
	00:00:00,030 --> 00:00:03,810
thank you so much for coming over

00:00:01,500 --> 00:00:06,930
everyone my name is Anna's and I'm a

00:00:03,810 --> 00:00:08,970
Google developer expert for angular you

00:00:06,930 --> 00:00:11,040
can follow me on twitter at announcer

00:00:08,970 --> 00:00:14,299
audacity but I'm warning you it's mostly

00:00:11,040 --> 00:00:16,830
nonsense but so is all of Twitter so

00:00:14,299 --> 00:00:18,869
today I want to talk to you about a

00:00:16,830 --> 00:00:20,850
paradigm that has gained a lot of hype

00:00:18,869 --> 00:00:23,430
in recent years called progressive web

00:00:20,850 --> 00:00:25,470
apps I'm so excited that I finally

00:00:23,430 --> 00:00:27,029
completed preparing for this talk and I

00:00:25,470 --> 00:00:29,480
would like to dedicate this talk to my

00:00:27,029 --> 00:00:31,920
six months old son and my wonderful wife

00:00:29,480 --> 00:00:36,300
without whom this talk would have been

00:00:31,920 --> 00:00:39,510
completed two months ago but I love them

00:00:36,300 --> 00:00:40,770
so starting off by the way we probably

00:00:39,510 --> 00:00:43,920
going to run over time because I've

00:00:40,770 --> 00:00:46,829
never coded with a screen behind me so I

00:00:43,920 --> 00:00:48,719
was expecting something or anyways okay

00:00:46,829 --> 00:00:51,960
so you may have heard of the phrase a

00:00:48,719 --> 00:00:54,960
web is the unitive actually progressive

00:00:51,960 --> 00:00:56,399
web is the new native and it's probably

00:00:54,960 --> 00:00:58,440
useful to remind yourself what a

00:00:56,399 --> 00:01:02,940
progressive web app is and what makes a

00:00:58,440 --> 00:01:05,489
PWA PWA so progressive web app takes a

00:01:02,940 --> 00:01:08,280
traditional web application and make it

00:01:05,489 --> 00:01:10,020
behave like a native mobile app so in

00:01:08,280 --> 00:01:11,939
this talk we'll take a angular 5

00:01:10,020 --> 00:01:14,729
application scaffolded with angular CLI

00:01:11,939 --> 00:01:18,330
and we'll try to make it harder person

00:01:14,729 --> 00:01:20,280
compliant with PW specs but before that

00:01:18,330 --> 00:01:21,720
let's have a quick look at what correct

00:01:20,280 --> 00:01:23,850
has 6 a Peter blue it takes from a

00:01:21,720 --> 00:01:26,490
mobile app and what corrector stick it

00:01:23,850 --> 00:01:27,780
takes from a traditional web app so how

00:01:26,490 --> 00:01:32,100
does the P remove it behaves like a

00:01:27,780 --> 00:01:33,900
mobile app offline support so apps

00:01:32,100 --> 00:01:36,210
install on your mobile phones are

00:01:33,900 --> 00:01:37,500
available to you when you're not

00:01:36,210 --> 00:01:39,720
connected to the Internet right like

00:01:37,500 --> 00:01:41,369
apps that you install on your phone if

00:01:39,720 --> 00:01:44,130
you're not connected to the to the

00:01:41,369 --> 00:01:45,240
network you might have a degraded

00:01:44,130 --> 00:01:47,850
version of the app where you can

00:01:45,240 --> 00:01:50,610
actually not do a lot of stuff but still

00:01:47,850 --> 00:01:52,500
it's kind of useful right but websites

00:01:50,610 --> 00:01:54,960
on the other hand are not so much useful

00:01:52,500 --> 00:01:59,280
when they are offline so progressive web

00:01:54,960 --> 00:02:01,200
apps tell you what if there is a web web

00:01:59,280 --> 00:02:03,149
page which just runs in your browser but

00:02:01,200 --> 00:02:05,759
still works when you're offline so it

00:02:03,149 --> 00:02:06,930
gives you some sort of data to play with

00:02:05,759 --> 00:02:10,770
even when you have no internet

00:02:06,930 --> 00:02:12,980
connection the next thing is we double

00:02:10,770 --> 00:02:15,620
it makes web apps installable

00:02:12,980 --> 00:02:18,650
so native apps are natively installable

00:02:15,620 --> 00:02:21,290
right but now on the web many of you

00:02:18,650 --> 00:02:23,810
might have seen something like this this

00:02:21,290 --> 00:02:25,730
is called install banner on firefox and

00:02:23,810 --> 00:02:29,330
safari and others and it's called

00:02:25,730 --> 00:02:31,730
install banner you click on the call to

00:02:29,330 --> 00:02:33,800
action and then you get an icon on the

00:02:31,730 --> 00:02:36,560
home page we click on the icon you get a

00:02:33,800 --> 00:02:38,810
splash screen yes splash screen for web

00:02:36,560 --> 00:02:41,090
apps so kind of looks like a mobile app

00:02:38,810 --> 00:02:44,019
but still is a completely traditional

00:02:41,090 --> 00:02:46,130
web app the next thing PW gives is

00:02:44,019 --> 00:02:48,950
notification so we all have had these

00:02:46,130 --> 00:02:51,620
beautiful notifications irritating us

00:02:48,950 --> 00:02:54,110
all throughout our day with mobile apps

00:02:51,620 --> 00:02:56,239
but now you can rotate your users more

00:02:54,110 --> 00:02:58,819
by sending these notifications with web

00:02:56,239 --> 00:03:02,269
apps and PWA can help you with that as

00:02:58,819 --> 00:03:06,590
well and you can do notifications on

00:03:02,269 --> 00:03:08,870
mobile phone as well as it stops last

00:03:06,590 --> 00:03:11,780
but not the least so PW advocates the

00:03:08,870 --> 00:03:15,590
idea of a single responsive application

00:03:11,780 --> 00:03:17,840
using a good amount of viewport real

00:03:15,590 --> 00:03:20,180
estate so it actually says you don't

00:03:17,840 --> 00:03:22,639
have to do a separate mobile application

00:03:20,180 --> 00:03:24,739
a native application nor you have to do

00:03:22,639 --> 00:03:27,530
a mobile web you can use the same

00:03:24,739 --> 00:03:31,040
application and make it behave amazing

00:03:27,530 --> 00:03:32,900
on our different landscape and portrait

00:03:31,040 --> 00:03:35,060
sizes if you are a mobile developer

00:03:32,900 --> 00:03:38,090
since forever I know this is painful but

00:03:35,060 --> 00:03:39,739
we don't need like native apps already

00:03:38,090 --> 00:03:44,000
so these are the four things that it

00:03:39,739 --> 00:03:45,709
takes from a traditional native mobile

00:03:44,000 --> 00:03:47,450
application right and there are other

00:03:45,709 --> 00:03:52,519
things as well but these are like kind

00:03:47,450 --> 00:03:56,150
of the bare minimum next let's see what

00:03:52,519 --> 00:03:58,430
APW it takes from a traditional web

00:03:56,150 --> 00:04:00,799
application so technically PW is just a

00:03:58,430 --> 00:04:02,959
fancy word putting everything we already

00:04:00,799 --> 00:04:06,079
knew like responsive and touchable all

00:04:02,959 --> 00:04:07,700
of them together and just call it PWA so

00:04:06,079 --> 00:04:10,730
it's basically simple of a web app the

00:04:07,700 --> 00:04:12,410
client talks to the server but then the

00:04:10,730 --> 00:04:14,780
mayor the bare minimum is you need to

00:04:12,410 --> 00:04:17,109
have a serviceworker in between so

00:04:14,780 --> 00:04:20,060
serviceworker is just a JavaScript file

00:04:17,109 --> 00:04:23,690
it's it has the ability to intercept any

00:04:20,060 --> 00:04:26,490
outgoing HTTP request it's very powerful

00:04:23,690 --> 00:04:28,680
every shape we require that falls in

00:04:26,490 --> 00:04:30,539
the scope of officers for everyone I'm

00:04:28,680 --> 00:04:32,490
not gonna go into details of what's the

00:04:30,539 --> 00:04:34,560
scope of a service worker is but any

00:04:32,490 --> 00:04:35,970
HTTP request that goes out of a page can

00:04:34,560 --> 00:04:37,530
actually be intercepted by server server

00:04:35,970 --> 00:04:39,930
and then you can do a bunch of stuff

00:04:37,530 --> 00:04:41,520
like asking it not to go to the server

00:04:39,930 --> 00:04:43,139
actually and then like picking up a file

00:04:41,520 --> 00:04:46,590
from cache and then disturbing it so

00:04:43,139 --> 00:04:48,539
that makes it more faster so this gives

00:04:46,590 --> 00:04:50,130
the developer a lot of control over how

00:04:48,539 --> 00:04:54,810
the browser should respond to each

00:04:50,130 --> 00:04:58,410
request alrighty and the next thing was

00:04:54,810 --> 00:05:00,509
yes so every traditional web application

00:04:58,410 --> 00:05:03,240
is sharable through a link right mobile

00:05:00,509 --> 00:05:05,490
apps do not have a link to share so this

00:05:03,240 --> 00:05:08,099
is what it takes from progressive Ness

00:05:05,490 --> 00:05:10,020
of a web application so these are like

00:05:08,099 --> 00:05:12,389
some of the bare minimum characteristics

00:05:10,020 --> 00:05:17,940
it takes from mobile as well as web and

00:05:12,389 --> 00:05:19,620
then it works amazing already so now I'm

00:05:17,940 --> 00:05:22,380
gonna talk start off by going over the

00:05:19,620 --> 00:05:25,259
current PWA a development experience and

00:05:22,380 --> 00:05:27,000
some of the key building blocks again as

00:05:25,259 --> 00:05:28,500
I say it's service workers so you have

00:05:27,000 --> 00:05:30,659
to write a service worker to begin with

00:05:28,500 --> 00:05:32,669
although a service worker is just a

00:05:30,659 --> 00:05:34,229
JavaScript file they're slightly

00:05:32,669 --> 00:05:37,469
different from your standard JavaScript

00:05:34,229 --> 00:05:40,289
file so it actually does the following

00:05:37,469 --> 00:05:42,360
it runs in its own global script context

00:05:40,289 --> 00:05:45,300
it's not tied to a particular web page

00:05:42,360 --> 00:05:46,560
but it's actually tied to your domain so

00:05:45,300 --> 00:05:48,810
let's say if you have a server for

00:05:46,560 --> 00:05:50,940
localhost it's tied to that if you have

00:05:48,810 --> 00:05:53,490
a different domain it type it actually

00:05:50,940 --> 00:05:54,750
ties to that for example angular dot IO

00:05:53,490 --> 00:05:56,969
when you go there they have a

00:05:54,750 --> 00:05:58,650
serviceworker so whenever you go to

00:05:56,969 --> 00:06:00,659
anger at i/o for the very first time it

00:05:58,650 --> 00:06:03,960
registers a server server in your new

00:06:00,659 --> 00:06:06,419
browser so it runs in a worker context

00:06:03,960 --> 00:06:07,680
in a different thread from the main

00:06:06,419 --> 00:06:10,710
thread which is also very important you

00:06:07,680 --> 00:06:12,630
know so that it actually does not like

00:06:10,710 --> 00:06:14,219
hold your application it runs in a

00:06:12,630 --> 00:06:17,310
completely different thread from your

00:06:14,219 --> 00:06:18,330
main application and it has no Dom exes

00:06:17,310 --> 00:06:20,969
that's another thing you should be

00:06:18,330 --> 00:06:24,900
knowing about service workers and lastly

00:06:20,969 --> 00:06:26,520
it runs over HTTP so what happens is you

00:06:24,900 --> 00:06:28,979
register this record we download it

00:06:26,520 --> 00:06:30,960
install it and then activate it so this

00:06:28,979 --> 00:06:32,610
is actually the current process and to

00:06:30,960 --> 00:06:34,080
do all of this you have to write a lot

00:06:32,610 --> 00:06:35,370
of code first you have to check if the

00:06:34,080 --> 00:06:38,700
browser supports serviceworker or not

00:06:35,370 --> 00:06:41,280
and then you have to actually go and

00:06:38,700 --> 00:06:42,990
I listen to each of these events which

00:06:41,280 --> 00:06:45,930
are being fired from the browser and

00:06:42,990 --> 00:06:48,090
then handle them on your own and then

00:06:45,930 --> 00:06:50,190
you know files you have to cache and

00:06:48,090 --> 00:06:52,190
things of that nature and then so every

00:06:50,190 --> 00:06:55,680
request that goes out is actually

00:06:52,190 --> 00:06:57,390
intercepted through this fetch event

00:06:55,680 --> 00:07:00,090
handler and then you have to do a lot of

00:06:57,390 --> 00:07:02,970
code for notifications all of that all

00:07:00,090 --> 00:07:05,400
of that all of that right you are

00:07:02,970 --> 00:07:09,780
angular developer right so here's the

00:07:05,400 --> 00:07:12,060
magic so you just throw the NGS Diplo

00:07:09,780 --> 00:07:14,520
config file plus a manifest file to the

00:07:12,060 --> 00:07:17,550
angular and then it creates the

00:07:14,520 --> 00:07:19,170
serviceworker on the fly for you and it

00:07:17,550 --> 00:07:20,760
just works so you don't really have to

00:07:19,170 --> 00:07:23,670
go and write service records on your own

00:07:20,760 --> 00:07:25,710
unless and until you have a very very

00:07:23,670 --> 00:07:27,750
advanced use case and if you have that

00:07:25,710 --> 00:07:30,810
come talk to me after this talk and we

00:07:27,750 --> 00:07:32,370
can talk about that so thinking of this

00:07:30,810 --> 00:07:34,890
you can store a hundred which you will

00:07:32,370 --> 00:07:36,900
try today so just remember this you just

00:07:34,890 --> 00:07:39,210
have to throw something at something and

00:07:36,900 --> 00:07:40,950
some magic happens right so though so

00:07:39,210 --> 00:07:43,620
the closest I found was this this is

00:07:40,950 --> 00:07:47,310
angular you throw something and you have

00:07:43,620 --> 00:07:49,140
something right anyways so let's get

00:07:47,310 --> 00:07:52,530
into the hard part now which is

00:07:49,140 --> 00:07:56,040
obviously trying to start to show you

00:07:52,530 --> 00:07:58,170
something difficult as I said because I

00:07:56,040 --> 00:07:59,730
didn't plan for this at all I thought

00:07:58,170 --> 00:08:04,680
this will be something here so you can

00:07:59,730 --> 00:08:14,960
see many ways we can try so going back

00:08:04,680 --> 00:08:14,960
here let's go let's actually do this

00:08:17,960 --> 00:08:25,710
where's my after hear this so I'll

00:08:21,450 --> 00:08:29,570
actually move this guy over here which

00:08:25,710 --> 00:08:33,170
is very strong you guys might know this

00:08:29,570 --> 00:08:35,280
how many of you use are very strong

00:08:33,170 --> 00:08:36,990
others we don't use it that's fine let's

00:08:35,280 --> 00:08:40,650
we're not going to do anything special

00:08:36,990 --> 00:08:45,150
here all right so first off what do you

00:08:40,650 --> 00:08:51,060
need to do is open your terminal and do

00:08:45,150 --> 00:08:51,300
NPM sorry if not NPM ng new and then the

00:08:51,060 --> 00:08:53,339
name

00:08:51,300 --> 00:08:56,430
your app right whatever app it is and

00:08:53,339 --> 00:08:59,330
then for now up to angular 5 you just

00:08:56,430 --> 00:09:04,170
have to do a digest service worker and

00:08:59,330 --> 00:09:04,950
then you can also pass in - - routing

00:09:04,170 --> 00:09:07,019
right

00:09:04,950 --> 00:09:09,149
this is scaffolds an app you guys know

00:09:07,019 --> 00:09:10,410
that that that social worker is very

00:09:09,149 --> 00:09:13,110
important I've already done that for you

00:09:10,410 --> 00:09:15,420
just to save some time so let's see

00:09:13,110 --> 00:09:18,240
let's examine what that does for you and

00:09:15,420 --> 00:09:21,870
what it actually gives you right so

00:09:18,240 --> 00:09:25,260
let's start with going directly into the

00:09:21,870 --> 00:09:27,029
angle or angle adjacent I hope this is

00:09:25,260 --> 00:09:29,850
visible to all of you if it's not please

00:09:27,029 --> 00:09:34,470
let me know people in the back is it

00:09:29,850 --> 00:09:37,529
good awesome alright so yeah let's do

00:09:34,470 --> 00:09:39,360
this so this is the angular CLI JSON

00:09:37,529 --> 00:09:41,640
file which are I hope you're already

00:09:39,360 --> 00:09:44,640
familiar with and you get this Service

00:09:41,640 --> 00:09:46,769
Worker - true flag out of the box that

00:09:44,640 --> 00:09:50,579
this flag still angular to generate

00:09:46,769 --> 00:09:53,160
service worker at Build time and let's

00:09:50,579 --> 00:09:57,839
go to the app module and see if you have

00:09:53,160 --> 00:10:00,329
something already so here you see

00:09:57,839 --> 00:10:01,709
something service worker module and then

00:10:00,329 --> 00:10:03,540
it's saying to register something this

00:10:01,709 --> 00:10:05,610
is a file which actually is not present

00:10:03,540 --> 00:10:07,860
in your application in development bone

00:10:05,610 --> 00:10:09,510
and it won't be so this is basically the

00:10:07,860 --> 00:10:12,899
magic the dynamic file that gets created

00:10:09,510 --> 00:10:14,640
by angular depending on what configure

00:10:12,899 --> 00:10:16,200
pass to it and then you can say enable

00:10:14,640 --> 00:10:18,750
environment production which actually

00:10:16,200 --> 00:10:21,270
means if you only pass the ng build -

00:10:18,750 --> 00:10:23,010
prod which we will do today only then it

00:10:21,270 --> 00:10:29,459
will go ahead and register the circle

00:10:23,010 --> 00:10:33,060
for you alrighty sorry ok so let me show

00:10:29,459 --> 00:10:37,470
you so the command was I actually ran in

00:10:33,060 --> 00:10:39,540
the morning 5:00 a.m. so ng G oh no

00:10:37,470 --> 00:10:44,370
sorry ng Neil your app and then the

00:10:39,540 --> 00:10:48,449
service worker and then - - routing this

00:10:44,370 --> 00:10:50,430
is what I ran okay so English 6 is just

00:10:48,449 --> 00:10:52,829
around the corner and this is just

00:10:50,430 --> 00:10:54,420
worker might not work and might go away

00:10:52,829 --> 00:10:55,890
because you will have something called

00:10:54,420 --> 00:10:57,990
so you'll have so you'll still do

00:10:55,890 --> 00:10:59,640
something like this ng new - and your

00:10:57,990 --> 00:11:02,070
new app and then you go ahead and say ng

00:10:59,640 --> 00:11:03,920
ad with a blue a this will be this

00:11:02,070 --> 00:11:07,589
exactly the same as

00:11:03,920 --> 00:11:10,860
the digester also has issues the new one

00:11:07,589 --> 00:11:12,149
also has issues so just try to decipher

00:11:10,860 --> 00:11:15,569
now

00:11:12,149 --> 00:11:17,279
alrighty so yeah let's go ahead and run

00:11:15,569 --> 00:11:19,709
this app in fact I am already running

00:11:17,279 --> 00:11:22,649
this app and now I will try to switch to

00:11:19,709 --> 00:11:27,809
a browser oh not this one let's get rid

00:11:22,649 --> 00:11:32,189
of this guy and let's see if we can you

00:11:27,809 --> 00:11:33,689
know alright it's not a hacker news app

00:11:32,189 --> 00:11:36,240
or something it's this very simple app

00:11:33,689 --> 00:11:38,730
by the way this is kind of a clone of if

00:11:36,240 --> 00:11:40,769
you guys are you guys using any I guess

00:11:38,730 --> 00:11:42,600
similar with this app called con snap so

00:11:40,769 --> 00:11:44,730
we did this app for ng Khan this is just

00:11:42,600 --> 00:11:47,399
like all the talks and you can go to any

00:11:44,730 --> 00:11:49,620
of the talks and click on it and you get

00:11:47,399 --> 00:11:53,069
the details all the vlogs links whatever

00:11:49,620 --> 00:11:55,410
being posted by the by the presenter so

00:11:53,069 --> 00:11:57,629
think of this app where you actually

00:11:55,410 --> 00:11:59,759
have two kind of data one is very static

00:11:57,629 --> 00:12:01,529
data it never changes right this is just

00:11:59,759 --> 00:12:04,620
the fixed talks number two talks you

00:12:01,529 --> 00:12:07,019
click on it these are these change over

00:12:04,620 --> 00:12:08,699
time as the presenters share something

00:12:07,019 --> 00:12:10,889
we keep on adding it to this one right

00:12:08,699 --> 00:12:14,009
so these are the two kind of data in you

00:12:10,889 --> 00:12:16,319
know in a wrap right so that was just a

00:12:14,009 --> 00:12:18,449
quick introduction to what we are

00:12:16,319 --> 00:12:20,790
planning to do so this is a very app we

00:12:18,449 --> 00:12:22,559
have a very ugly drop drop down on

00:12:20,790 --> 00:12:24,689
latest as small as longest these are the

00:12:22,559 --> 00:12:27,120
talks you can click on any one of the

00:12:24,689 --> 00:12:29,870
talks so serious PW keynote from shy res

00:12:27,120 --> 00:12:34,620
right so this is all what it is for now

00:12:29,870 --> 00:12:35,809
alright so what we're going to do is

00:12:34,620 --> 00:12:37,680
we're going to use something called

00:12:35,809 --> 00:12:40,110
lighthouse are you guys familiar with

00:12:37,680 --> 00:12:43,259
lighthouse can I skip the slides no I

00:12:40,110 --> 00:12:46,110
cannot okay so lighthouse is basically a

00:12:43,259 --> 00:12:49,889
plugin which helps you our date APW app

00:12:46,110 --> 00:12:52,829
this is built by Google and what you do

00:12:49,889 --> 00:12:57,329
is on your app you can actually go into

00:12:52,829 --> 00:12:59,309
the dev tools go to audit perform audit

00:12:57,329 --> 00:13:00,629
and then you can select regressive ms

00:12:59,309 --> 00:13:04,040
performance and others so it actually

00:13:00,629 --> 00:13:06,600
helps you it actually gives you a lot of

00:13:04,040 --> 00:13:11,189
tooling behind how you should audit your

00:13:06,600 --> 00:13:13,319
apps so lighthouse is open source by the

00:13:11,189 --> 00:13:16,889
way you have automated tools where you

00:13:13,319 --> 00:13:18,070
can actually put it inside of your your

00:13:16,889 --> 00:13:20,140
CLI and you can all

00:13:18,070 --> 00:13:22,060
so run it through terminal but we are

00:13:20,140 --> 00:13:25,600
going to do it on the browser so when

00:13:22,060 --> 00:13:29,350
you hit the run audit button I know that

00:13:25,600 --> 00:13:31,390
this is going to take some time alright

00:13:29,350 --> 00:13:32,470
so when you run it you see something

00:13:31,390 --> 00:13:33,880
like this I've already done it for you

00:13:32,470 --> 00:13:36,100
because this takes some time right so

00:13:33,880 --> 00:13:37,690
with the angular CLI application without

00:13:36,100 --> 00:13:38,770
a real bit of lewis support since you

00:13:37,690 --> 00:13:42,370
haven't done anything yet

00:13:38,770 --> 00:13:43,960
you typically get about 30% or less PW

00:13:42,370 --> 00:13:45,160
compatibility and the other things that

00:13:43,960 --> 00:13:47,110
it's saying is saying you don't have a

00:13:45,160 --> 00:13:49,170
service worker you're not running over

00:13:47,110 --> 00:13:52,210
HTTP and you have other problems right

00:13:49,170 --> 00:13:59,830
so now the first thing that we are going

00:13:52,210 --> 00:14:07,270
to do is all right let's close this guy

00:13:59,830 --> 00:14:09,070
and let's say we need a we need a

00:14:07,270 --> 00:14:15,910
manifest file so we'll just go ahead and

00:14:09,070 --> 00:14:20,500
say manifest decent file yes all right

00:14:15,910 --> 00:14:23,800
so this is our manifest file it's going

00:14:20,500 --> 00:14:25,810
to be super difficult so this is the

00:14:23,800 --> 00:14:27,610
first step you start with a manifest

00:14:25,810 --> 00:14:29,350
file and this will just be a simple

00:14:27,610 --> 00:14:31,720
decent file and there are a few

00:14:29,350 --> 00:14:34,210
properties that you have to type it the

00:14:31,720 --> 00:14:36,430
first thing I PW it needs is a name and

00:14:34,210 --> 00:14:39,010
a short name for your application so

00:14:36,430 --> 00:14:41,530
you'll just go ahead and say ng-conf

00:14:39,010 --> 00:14:43,990
readable a the name should can be longer

00:14:41,530 --> 00:14:46,000
or whatever and then they start URL is

00:14:43,990 --> 00:14:48,340
basically the base URL it's just just

00:14:46,000 --> 00:14:51,010
the slash the app context of your

00:14:48,340 --> 00:14:52,780
application right

00:14:51,010 --> 00:14:54,700
the next properties that you're going to

00:14:52,780 --> 00:14:57,280
do is themes and backgrounds so you

00:14:54,700 --> 00:14:59,320
remember you saw this flat screen these

00:14:57,280 --> 00:15:01,000
properties help you actually create the

00:14:59,320 --> 00:15:03,760
splash screen on the fly so if you run a

00:15:01,000 --> 00:15:06,400
PWA on a browser in a desktop you'll

00:15:03,760 --> 00:15:08,770
actually have to do some extra stuff to

00:15:06,400 --> 00:15:10,990
build a splash screen which we'll try to

00:15:08,770 --> 00:15:14,490
do but if you don't the exact same app

00:15:10,990 --> 00:15:16,750
on a browser in a in on a mobile phone

00:15:14,490 --> 00:15:17,890
these properties you don't have to do

00:15:16,750 --> 00:15:19,870
anything these properties will

00:15:17,890 --> 00:15:23,500
automatically create that splash screen

00:15:19,870 --> 00:15:24,910
for you on the fly alright so if you

00:15:23,500 --> 00:15:26,860
other other properties you're going to

00:15:24,910 --> 00:15:29,420
look at our display so I'll say stand

00:15:26,860 --> 00:15:32,629
alone there are other ones there

00:15:29,420 --> 00:15:36,019
I don't exactly remember the names so

00:15:32,629 --> 00:15:38,779
the display property actually defines

00:15:36,019 --> 00:15:40,519
the developers a preference for the

00:15:38,779 --> 00:15:43,819
display mode of your of your web

00:15:40,519 --> 00:15:46,249
application orientation can be let's say

00:15:43,819 --> 00:15:49,189
I just want to support my application in

00:15:46,249 --> 00:15:50,509
portrait mode again it says it's trying

00:15:49,189 --> 00:15:52,069
to take all the characteristics from

00:15:50,509 --> 00:15:55,999
mobile apps we have to define all these

00:15:52,069 --> 00:15:58,939
all these properties alrighty next what

00:15:55,999 --> 00:16:01,639
you're going to do is define icons icons

00:15:58,939 --> 00:16:04,009
are very important and the bare minimum

00:16:01,639 --> 00:16:07,850
that you have to do is a 5 by 12 by 5 by

00:16:04,009 --> 00:16:10,339
12 icon I already have these icons I'll

00:16:07,850 --> 00:16:13,999
just go ahead and copy paste them over

00:16:10,339 --> 00:16:16,100
to the icons folder you need you

00:16:13,999 --> 00:16:18,799
actually should have an array of icons

00:16:16,100 --> 00:16:20,660
defined in here and the magic that

00:16:18,799 --> 00:16:22,970
browsers do will they actually pick up

00:16:20,660 --> 00:16:24,769
the right icon for the right device like

00:16:22,970 --> 00:16:28,610
depending on the mobile device you

00:16:24,769 --> 00:16:29,839
access your PWA from so I'll just go

00:16:28,610 --> 00:16:31,610
ahead and do all the combinations

00:16:29,839 --> 00:16:34,549
systematic but you guys get the idea

00:16:31,610 --> 00:16:37,069
right each icon object has source where

00:16:34,549 --> 00:16:41,410
available if the size and then the type

00:16:37,069 --> 00:16:45,290
it needs to be PNG as far as I know

00:16:41,410 --> 00:16:46,999
alrighty so let's go ahead and so you're

00:16:45,290 --> 00:16:49,069
actually kind of done with our manifest

00:16:46,999 --> 00:16:50,239
file so this is how it looks it has all

00:16:49,069 --> 00:16:51,679
these properties these are the bare

00:16:50,239 --> 00:16:52,879
minimum by the way we have other very

00:16:51,679 --> 00:16:54,769
important properties but we're going to

00:16:52,879 --> 00:16:56,899
skip that for now because this is the

00:16:54,769 --> 00:17:02,589
bare minimum and you only do bare

00:16:56,899 --> 00:17:02,589
minimum in your 20 minutes talk so

00:17:03,039 --> 00:17:10,519
alrighty so let's go ahead and create a

00:17:05,959 --> 00:17:13,389
directory and the directory is you'll

00:17:10,519 --> 00:17:22,100
have images and then we will have icons

00:17:13,389 --> 00:17:24,589
it already exists so can you guys see ok

00:17:22,100 --> 00:17:27,529
oh I already copied awesome you see all

00:17:24,589 --> 00:17:29,269
the magic that happens that's cool yeah

00:17:27,529 --> 00:17:33,370
this is not part of freedom Louie just a

00:17:29,269 --> 00:17:39,200
heads up already so this is actually

00:17:33,370 --> 00:17:41,690
technically alrighty so we did all of

00:17:39,200 --> 00:17:46,080
this

00:17:41,690 --> 00:17:48,720
let's move and do something more so the

00:17:46,080 --> 00:17:51,720
next thing we're going to do is go back

00:17:48,720 --> 00:17:54,570
to the angular CLI and the dis rubber

00:17:51,720 --> 00:17:59,360
manifest so go to the assets folder and

00:17:54,570 --> 00:18:03,540
then you add your manifest file in here

00:17:59,360 --> 00:18:05,580
manifest Jason alrighty that's all what

00:18:03,540 --> 00:18:08,070
you have to do in here so that's it for

00:18:05,580 --> 00:18:10,260
like the first part of the process you

00:18:08,070 --> 00:18:12,059
generate your icons through app manifest

00:18:10,260 --> 00:18:13,530
generator other than there dozens of

00:18:12,059 --> 00:18:15,750
them online so you see generator all

00:18:13,530 --> 00:18:17,760
your icons and then you create a

00:18:15,750 --> 00:18:20,790
manifest file and then you register it

00:18:17,760 --> 00:18:22,799
in your angular CLI application that's

00:18:20,790 --> 00:18:24,960
it for the very first part so next we

00:18:22,799 --> 00:18:27,210
need to build a serviceworker

00:18:24,960 --> 00:18:30,210
so technically at this point if you are

00:18:27,210 --> 00:18:31,950
not using angular's serviceworker module

00:18:30,210 --> 00:18:34,559
you will have to go ahead and write your

00:18:31,950 --> 00:18:37,049
own service record manually and then

00:18:34,559 --> 00:18:38,640
register it and hold the promise and try

00:18:37,049 --> 00:18:42,330
to see if service repair is supported in

00:18:38,640 --> 00:18:44,309
that browser or not we already saw some

00:18:42,330 --> 00:18:49,140
of the code right so let's go ahead and

00:18:44,309 --> 00:18:52,980
do this let's open the magic file engine

00:18:49,140 --> 00:18:55,260
so you get this file out of hello you

00:18:52,980 --> 00:18:58,200
get this file on the fly when you do a -

00:18:55,260 --> 00:19:01,290
test your flag and this will also be

00:18:58,200 --> 00:19:04,830
present when you will do ng add PWA with

00:19:01,290 --> 00:19:08,429
angular 6 plus alrighty so let's go

00:19:04,830 --> 00:19:13,799
ahead and discuss this file real quick

00:19:08,429 --> 00:19:17,820
and see what it gives us so starting off

00:19:13,799 --> 00:19:19,290
with so it actually defines the base of

00:19:17,820 --> 00:19:21,210
your application from very application

00:19:19,290 --> 00:19:22,740
start this is the index file and then

00:19:21,210 --> 00:19:24,240
you have asset group so you actually

00:19:22,740 --> 00:19:25,830
have two kind of groups you have acid

00:19:24,240 --> 00:19:28,740
groups and data groups acid groups are

00:19:25,830 --> 00:19:30,690
defined by default with angular and what

00:19:28,740 --> 00:19:35,280
they don't define data groups we will

00:19:30,690 --> 00:19:37,679
see in a sec alrighty so let let's look

00:19:35,280 --> 00:19:42,299
at the first asset group what is this

00:19:37,679 --> 00:19:45,480
our tailing app so the apps data group

00:19:42,299 --> 00:19:47,940
is configured with install mode prefetch

00:19:45,480 --> 00:19:49,620
which translates to hey serviceworker go

00:19:47,940 --> 00:19:51,870
ahead and catch these assets right away

00:19:49,620 --> 00:19:53,700
these are the essentials like these are

00:19:51,870 --> 00:19:54,669
essentially going to be all the files

00:19:53,700 --> 00:19:58,720
you need

00:19:54,669 --> 00:20:00,250
the Turin your application offline so

00:19:58,720 --> 00:20:02,110
notice that it also includes all the

00:20:00,250 --> 00:20:04,150
filer and known at bill time like

00:20:02,110 --> 00:20:06,700
indexed or HTML in fact I should go and

00:20:04,150 --> 00:20:09,130
open this one suit includes index.html

00:20:06,700 --> 00:20:10,809
favicon and then the Virgin files all

00:20:09,130 --> 00:20:12,490
yours chunk file and bundles this is

00:20:10,809 --> 00:20:15,039
this is technically your whole

00:20:12,490 --> 00:20:17,140
application code right so you pass it

00:20:15,039 --> 00:20:18,760
there and a service worker will go ahead

00:20:17,140 --> 00:20:20,620
and cash it for you the install mode

00:20:18,760 --> 00:20:24,210
free fetch which actually means I you

00:20:20,620 --> 00:20:26,470
just have to take it from the cache

00:20:24,210 --> 00:20:29,860
there are other important properties

00:20:26,470 --> 00:20:33,760
which I will skip for now the next asset

00:20:29,860 --> 00:20:38,020
group is named assets and with install

00:20:33,760 --> 00:20:40,570
mode lazy what this actually means is

00:20:38,020 --> 00:20:42,399
hey server will go ahead and catch these

00:20:40,570 --> 00:20:44,950
assets only when the assets are actually

00:20:42,399 --> 00:20:47,409
requested by the ABS so everything in

00:20:44,950 --> 00:20:49,630
the assets folder is is actually lazy

00:20:47,409 --> 00:20:51,580
cache right like for example your icons

00:20:49,630 --> 00:20:54,580
or images if you are actually fetching

00:20:51,580 --> 00:20:55,000
an image or a font file things of that

00:20:54,580 --> 00:20:57,909
nature

00:20:55,000 --> 00:21:00,370
all of them will actually go into this

00:20:57,909 --> 00:21:04,419
one I'll go ahead and try to add some

00:21:00,370 --> 00:21:07,779
files right ok so and now at this point

00:21:04,419 --> 00:21:10,090
with both these asset groups our worker

00:21:07,779 --> 00:21:12,940
knows how to cash assets that are known

00:21:10,090 --> 00:21:14,890
at Build time what we can actually argue

00:21:12,940 --> 00:21:18,010
that this is not the only data right

00:21:14,890 --> 00:21:20,140
that we would like to cache so what

00:21:18,010 --> 00:21:20,649
about data that's coming from API is

00:21:20,140 --> 00:21:25,360
right

00:21:20,649 --> 00:21:28,000
so to cache API responses you need to

00:21:25,360 --> 00:21:30,340
provide something called data groups

00:21:28,000 --> 00:21:33,730
which I was talking about earlier so

00:21:30,340 --> 00:21:37,000
let's see where's my magic command for

00:21:33,730 --> 00:21:39,130
this one of data groups awesome

00:21:37,000 --> 00:21:41,200
so we'll actually define two kind of

00:21:39,130 --> 00:21:44,799
data groups because we have two kind of

00:21:41,200 --> 00:21:49,059
API if you remember the app that I

00:21:44,799 --> 00:21:51,309
showed earlier right so we had a list

00:21:49,059 --> 00:21:53,399
page which had some data which won't

00:21:51,309 --> 00:21:56,559
really refresh we had a drop-down and

00:21:53,399 --> 00:21:58,510
that the drop-down is pub also like

00:21:56,559 --> 00:22:00,700
populated with some api's that also

00:21:58,510 --> 00:22:01,720
doesn't really change very often but on

00:22:00,700 --> 00:22:04,330
the other side when you go to the

00:22:01,720 --> 00:22:06,370
details space the data actually changes

00:22:04,330 --> 00:22:08,140
very often right and it can update so

00:22:06,370 --> 00:22:10,330
think about your application

00:22:08,140 --> 00:22:13,210
not this scenario any scenario where you

00:22:10,330 --> 00:22:15,160
actually need some data to be updated on

00:22:13,210 --> 00:22:17,320
the fly every single time you use the

00:22:15,160 --> 00:22:19,960
freshness of strategy which I will show

00:22:17,320 --> 00:22:22,330
right now but if your data stays there

00:22:19,960 --> 00:22:24,790
it doesn't really change a lot and you

00:22:22,330 --> 00:22:27,190
can just cash it for like some hours or

00:22:24,790 --> 00:22:28,570
some days even you can actually use any

00:22:27,190 --> 00:22:31,030
other strategy called the performance

00:22:28,570 --> 00:22:36,070
strategy so we will just go ahead and

00:22:31,030 --> 00:22:39,430
again use our magic commands okay so I

00:22:36,070 --> 00:22:41,650
will go ahead and say this one there we

00:22:39,430 --> 00:22:43,180
go so I named it Network first you can

00:22:41,650 --> 00:22:46,810
name it whatever you like you have to

00:22:43,180 --> 00:22:49,230
pass in a conf cache config the next

00:22:46,810 --> 00:22:52,690
size will be the next size of your

00:22:49,230 --> 00:22:57,390
request max age would be how long would

00:22:52,690 --> 00:23:01,840
you like a service worker to cache this

00:22:57,390 --> 00:23:03,040
data and and then goes to the network to

00:23:01,840 --> 00:23:06,040
make the call so I'll just go ahead and

00:23:03,040 --> 00:23:08,440
say this to 10 seconds in fact then do

00:23:06,040 --> 00:23:10,210
10 seconds 1 hour and then timeout will

00:23:08,440 --> 00:23:13,390
be 10 seconds so timeout actually says

00:23:10,210 --> 00:23:16,540
so it will always make a call to the

00:23:13,390 --> 00:23:19,990
network because it is strategy freshness

00:23:16,540 --> 00:23:22,690
but then if the call times out in 10

00:23:19,990 --> 00:23:24,700
seconds it will actually go ahead and

00:23:22,690 --> 00:23:29,320
take it from the cache that's what the

00:23:24,700 --> 00:23:31,450
timeout or timeout means so in the URL I

00:23:29,320 --> 00:23:35,380
will define the URLs I will say API

00:23:31,450 --> 00:23:37,180
slash talks so this is basically the API

00:23:35,380 --> 00:23:42,610
which gives me a list of all the talks

00:23:37,180 --> 00:23:46,750
right next we will define another data

00:23:42,610 --> 00:23:50,260
group which will be a strategy I

00:23:46,750 --> 00:23:51,580
actually have to they find an object and

00:23:50,260 --> 00:23:53,830
then do this right

00:23:51,580 --> 00:23:55,570
so cache for strategy you can again name

00:23:53,830 --> 00:23:58,920
it whatever you like the strategy's

00:23:55,570 --> 00:24:04,120
performance again you give it some size

00:23:58,920 --> 00:24:06,670
makes age let's say 20 hours and then

00:24:04,120 --> 00:24:12,790
timeout again you can save whatever if

00:24:06,670 --> 00:24:14,800
right oh yeah I didn't expect this thing

00:24:12,790 --> 00:24:16,240
because you're like not even half in the

00:24:14,800 --> 00:24:17,980
top like not in 50 percent of the time

00:24:16,240 --> 00:24:21,060
because I was expecting something here I

00:24:17,980 --> 00:24:25,960
have to like it's very difficult yeah

00:24:21,060 --> 00:24:28,300
okay yeah we'll see give me like a few

00:24:25,960 --> 00:24:32,590
minutes right because this is like even

00:24:28,300 --> 00:24:35,130
doing anything so few minutes yeah yeah

00:24:32,590 --> 00:24:40,780
I understand yeah

00:24:35,130 --> 00:24:44,440
already so so yeah you have to do like a

00:24:40,780 --> 00:24:47,230
bunch of stuff so in fact so this is

00:24:44,440 --> 00:24:50,020
such an amazing stage right here so

00:24:47,230 --> 00:24:53,680
let's do this let's open a different app

00:24:50,020 --> 00:24:55,540
actually in which I've already done all

00:24:53,680 --> 00:25:02,040
of this so I like the deep presentation

00:24:55,540 --> 00:25:03,430
mode and try to open the most recent one

00:25:02,040 --> 00:25:07,990
this one

00:25:03,430 --> 00:25:10,720
alrighty a new window I hope this opens

00:25:07,990 --> 00:25:13,020
up yeah so I'll just show all this stuff

00:25:10,720 --> 00:25:15,450
that I had to do eventually but

00:25:13,020 --> 00:25:18,390
unfortunately I didn't know this set up

00:25:15,450 --> 00:25:20,380
alrighty so once you're done with your

00:25:18,390 --> 00:25:23,710
thing you'll actually go to the index

00:25:20,380 --> 00:25:25,750
file and you will actually add a bunch

00:25:23,710 --> 00:25:28,090
of these meta tags that you have to add

00:25:25,750 --> 00:25:29,560
image actually so this theme color

00:25:28,090 --> 00:25:32,410
should actually match the theme color we

00:25:29,560 --> 00:25:33,550
define in manifest file and then you

00:25:32,410 --> 00:25:35,830
actually go ahead and register your

00:25:33,550 --> 00:25:39,070
manifest file here for this splash

00:25:35,830 --> 00:25:41,980
screen what I did is you just like

00:25:39,070 --> 00:25:45,820
create a davis flash and what I'm doing

00:25:41,980 --> 00:25:47,590
in this style is if the app route where

00:25:45,820 --> 00:25:49,690
your angular application will lie if

00:25:47,590 --> 00:25:53,130
that is empty just show this flash

00:25:49,690 --> 00:25:55,900
otherwise don't show this last screen

00:25:53,130 --> 00:25:58,780
another PWA requirement is you have to

00:25:55,900 --> 00:26:01,720
provided no script tags so Sepideh bill

00:25:58,780 --> 00:26:03,340
expects actually check if there is if

00:26:01,720 --> 00:26:05,170
like you know if you actually handle a

00:26:03,340 --> 00:26:09,130
scenario where your browser does not

00:26:05,170 --> 00:26:11,320
support JavaScript so these are some of

00:26:09,130 --> 00:26:13,300
the basics I'll just go ahead one last

00:26:11,320 --> 00:26:15,540
thing that I want to do is unfortunately

00:26:13,300 --> 00:26:18,670
since we are already ran out of time

00:26:15,540 --> 00:26:25,000
I'll just go ahead and show you a audit

00:26:18,670 --> 00:26:31,500
simple audit and that's it for now how

00:26:25,000 --> 00:26:34,660
do I is the crappiest experience

00:26:31,500 --> 00:26:39,580
alrighty so I'll just say

00:26:34,660 --> 00:26:49,360
fire base and you guys see not this one

00:26:39,580 --> 00:26:53,290
I have a link just a sec my bookmarks

00:26:49,360 --> 00:26:55,210
okay bookmark and then here is something

00:26:53,290 --> 00:26:56,650
that's online so this is basically a

00:26:55,210 --> 00:26:58,900
progressive web app I did all this stuff

00:26:56,650 --> 00:27:03,340
that I told you I'll just go ahead and

00:26:58,900 --> 00:27:06,700
run the audit for you so this is hosted

00:27:03,340 --> 00:27:10,360
on firebase you need to have a server

00:27:06,700 --> 00:27:12,610
which is actually redirects every HTTP

00:27:10,360 --> 00:27:14,500
request to HTTPS this is one of the

00:27:12,610 --> 00:27:16,180
requirements if you see here right so

00:27:14,500 --> 00:27:18,430
that's why I had to do it you can also

00:27:16,180 --> 00:27:22,660
create a node server which actually

00:27:18,430 --> 00:27:26,080
routes all your HTTP requests to HTTPS

00:27:22,660 --> 00:27:27,730
and here you go sorry about all of this

00:27:26,080 --> 00:27:29,260
but this is what you'll get eventually

00:27:27,730 --> 00:27:30,240
when you do all of that steps thank you

00:27:29,260 --> 00:27:34,740
so very much

00:27:30,240 --> 00:27:34,740

YouTube URL: https://www.youtube.com/watch?v=4zUlA-OIsJ0


