Title: Angular Service Workers & Cows â€” a love story - Alyssa Nicoll
Publication date: 2018-11-16
Playlist: ng-conf 2018
Description: 
	ng-conf is a two day, single track conference focused on delivering the highest quality training in the Angular JavaScript framework. 1500+ developers from across the country will converge on beautiful Salt Lake City, UT to participate in training sessions by the Google Angular team, and other Angular experts. In addition to the invaluable training, ng-conf will deliver a premier conference experience for attendees, providing opportunities to network with other developers, relax at social events, and engage in some of the unique entertainment opportunities available in Utah.
Captions: 
	00:00:00,000 --> 00:00:03,659
hello hello hello how are you all oh my

00:00:02,850 --> 00:00:07,440
goodness

00:00:03,659 --> 00:00:07,830
the last talk on the last day you made

00:00:07,440 --> 00:00:09,540
it

00:00:07,830 --> 00:00:12,650
Congrats guys this has been awesome

00:00:09,540 --> 00:00:14,820
hasn't it I know we're here

00:00:12,650 --> 00:00:16,949
this has been fun and I've really been

00:00:14,820 --> 00:00:17,699
enjoying the 80s let me tell you it's

00:00:16,949 --> 00:00:20,730
been a blast

00:00:17,699 --> 00:00:22,350
so my name is Alyssa Nicole and I'm an

00:00:20,730 --> 00:00:24,420
angular developer advocate for kendo UI

00:00:22,350 --> 00:00:26,519
at progress and I'm also a Google

00:00:24,420 --> 00:00:28,439
developer expert for however much that's

00:00:26,519 --> 00:00:30,179
worth there's only a limit to my angular

00:00:28,439 --> 00:00:31,529
knowledge but today I'm actually gonna

00:00:30,179 --> 00:00:32,880
share a small piece of something that I

00:00:31,529 --> 00:00:34,410
recently learned and I'm really

00:00:32,880 --> 00:00:39,300
passionate about and that's service

00:00:34,410 --> 00:00:40,800
workers I think Shai just tried to cheer

00:00:39,300 --> 00:00:44,489
but it came out more of a wheeze but

00:00:40,800 --> 00:00:46,980
thank you yes so service workers and

00:00:44,489 --> 00:00:49,620
cows a love story then I'm gonna start

00:00:46,980 --> 00:00:53,510
this story with the beginning I mean at

00:00:49,620 --> 00:00:56,610
the end excuse me the takeaway so

00:00:53,510 --> 00:00:59,160
service workers I really really hope

00:00:56,610 --> 00:01:01,070
that you take away two things one that

00:00:59,160 --> 00:01:04,110
they're not that difficult to implement

00:01:01,070 --> 00:01:06,360
and but two they can actually make a

00:01:04,110 --> 00:01:10,020
really huge difference to people using

00:01:06,360 --> 00:01:12,390
your apps so recently in January I moved

00:01:10,020 --> 00:01:16,710
to Oklahoma and Oklahoma you might be

00:01:12,390 --> 00:01:17,820
like sooner right what's in Oklahoma you

00:01:16,710 --> 00:01:19,950
might be asking well there's these

00:01:17,820 --> 00:01:22,020
lovely creatures my family has a ranch

00:01:19,950 --> 00:01:25,049
out there and then these lovely

00:01:22,020 --> 00:01:28,049
creatures right so we went to Oklahoma

00:01:25,049 --> 00:01:30,570
to be close to family and as many

00:01:28,049 --> 00:01:33,229
awesome things as Oklahoma has to

00:01:30,570 --> 00:01:37,290
provide you know the cows and the family

00:01:33,229 --> 00:01:40,680
internet didn't seem to be one of them

00:01:37,290 --> 00:01:44,460
the best internet plan that we were

00:01:40,680 --> 00:01:48,329
offered in January was 6 megabits and

00:01:44,460 --> 00:01:50,640
that's not a typo it's a lowercase B and

00:01:48,329 --> 00:01:54,149
as you know if you've ever purchased an

00:01:50,640 --> 00:01:56,189
internet package what is you know the

00:01:54,149 --> 00:01:58,079
speed on the package it's not

00:01:56,189 --> 00:02:00,210
necessarily what you're getting on day

00:01:58,079 --> 00:02:00,630
to day life so I took a speed test for

00:02:00,210 --> 00:02:02,549
everyone

00:02:00,630 --> 00:02:05,909
[Laughter]

00:02:02,549 --> 00:02:09,569
I know right now at times we were

00:02:05,909 --> 00:02:12,629
literally worse than dial-up and I was I

00:02:09,569 --> 00:02:15,840
was like I'm a web developer in the

00:02:12,629 --> 00:02:18,300
middle of America and that's my speed

00:02:15,840 --> 00:02:21,629
like it was such an awakening a huge

00:02:18,300 --> 00:02:23,790
shock and I really hope that if nothing

00:02:21,629 --> 00:02:26,480
else you walk away with this awareness

00:02:23,790 --> 00:02:28,620
that not all of your users have you know

00:02:26,480 --> 00:02:30,900
maybe the network speeds that you're

00:02:28,620 --> 00:02:31,560
blessed with so even you know the middle

00:02:30,900 --> 00:02:35,040
of America

00:02:31,560 --> 00:02:36,900
so this land of Mooers it it really has

00:02:35,040 --> 00:02:39,810
taught me over the last few months how

00:02:36,900 --> 00:02:42,720
incredibly valuable service workers are

00:02:39,810 --> 00:02:44,459
and you might be asking yourself if

00:02:42,720 --> 00:02:46,890
you've never used a service worker or

00:02:44,459 --> 00:02:48,930
heard of the term service worker how the

00:02:46,890 --> 00:02:51,269
heck is that helping us in this

00:02:48,930 --> 00:02:53,970
situation and so in order to answer the

00:02:51,269 --> 00:02:56,940
how how we really should probably answer

00:02:53,970 --> 00:02:58,709
the what so what is a service worker and

00:02:56,940 --> 00:03:01,370
after reading lots of different

00:02:58,709 --> 00:03:05,129
definitions on the web I settled on

00:03:01,370 --> 00:03:07,829
Alyssa's definition it's a JavaScript

00:03:05,129 --> 00:03:09,389
file and it's a JavaScript file that

00:03:07,829 --> 00:03:11,519
allows us to do a couple of really cool

00:03:09,389 --> 00:03:14,549
things it's going to allow us to do

00:03:11,519 --> 00:03:15,989
things like push notifications it'll

00:03:14,549 --> 00:03:19,260
also allow us to do things like

00:03:15,989 --> 00:03:20,850
background sync but main thing that

00:03:19,260 --> 00:03:22,410
we're gonna focus on today and it's the

00:03:20,850 --> 00:03:24,480
thing that honestly made such an

00:03:22,410 --> 00:03:27,630
impression on me and my horrible network

00:03:24,480 --> 00:03:31,889
speeds in the land of cows is to

00:03:27,630 --> 00:03:34,079
intercept and cache Network responses so

00:03:31,889 --> 00:03:37,250
when I was working with these terrible

00:03:34,079 --> 00:03:40,230
network speeds it was literally the

00:03:37,250 --> 00:03:44,220
difference between being able to use a

00:03:40,230 --> 00:03:46,079
site and not like it wasn't oh yeah I

00:03:44,220 --> 00:03:48,630
noticed how fast their site was it was

00:03:46,079 --> 00:03:50,720
it literally wouldn't load or it would

00:03:48,630 --> 00:03:53,400
if they had used a service worker to

00:03:50,720 --> 00:03:57,569
previously cache different assets on

00:03:53,400 --> 00:03:58,859
their site so I have been speaking since

00:03:57,569 --> 00:04:01,590
as long as I've been developing for

00:03:58,859 --> 00:04:04,950
about five years now we've had a

00:04:01,590 --> 00:04:06,510
glorious amount and I started using a

00:04:04,950 --> 00:04:08,549
speaking coach about three years ago and

00:04:06,510 --> 00:04:09,389
we've been doing some exercises and I

00:04:08,549 --> 00:04:11,489
don't know if any of you are interested

00:04:09,389 --> 00:04:13,769
in public speaking but if you're

00:04:11,489 --> 00:04:15,569
interested even in like consolidating

00:04:13,769 --> 00:04:18,090
ideas this can be a really good exercise

00:04:15,569 --> 00:04:19,620
go through and so you take a talk or

00:04:18,090 --> 00:04:22,380
maybe you're going to do a presentation

00:04:19,620 --> 00:04:26,130
for a meeting and this one's a 20-minute

00:04:22,380 --> 00:04:28,440
talk so I took that 20 minute talk and I

00:04:26,130 --> 00:04:31,380
broke it down and it in five minutes and

00:04:28,440 --> 00:04:33,360
then I did in three minutes and then I

00:04:31,380 --> 00:04:35,789
did it in one minute and then in one

00:04:33,360 --> 00:04:37,620
sentence and one word and this can be a

00:04:35,789 --> 00:04:39,030
really really valuable exercise even if

00:04:37,620 --> 00:04:42,150
you're not planning on doing any public

00:04:39,030 --> 00:04:44,460
speaking to just consolidate down ideas

00:04:42,150 --> 00:04:46,470
to get to the meat or the heart of what

00:04:44,460 --> 00:04:49,320
it is and so when I did that for this

00:04:46,470 --> 00:04:51,599
talk I got this sentence service workers

00:04:49,320 --> 00:04:53,940
are the aspirin to the headache that is

00:04:51,599 --> 00:04:57,000
painful network speeds and my one word

00:04:53,940 --> 00:04:57,720
was aspirin so I really think that sums

00:04:57,000 --> 00:05:01,800
up nicely

00:04:57,720 --> 00:05:03,389
um service workers and today I want to

00:05:01,800 --> 00:05:07,080
walk through my journey of actually

00:05:03,389 --> 00:05:09,479
using my first service worker so I work

00:05:07,080 --> 00:05:11,460
on ng doc I don't know if any of you

00:05:09,479 --> 00:05:14,430
know Joe Eames maybe not in this crowd

00:05:11,460 --> 00:05:18,090
anybody yeah we got a couple people so

00:05:14,430 --> 00:05:20,370
Joe last year was like hey can you help

00:05:18,090 --> 00:05:22,020
me with the UI part of my app we kind of

00:05:20,370 --> 00:05:24,020
want to give bootstrap the boot and I

00:05:22,020 --> 00:05:27,659
was like sure I like booting bootstrap

00:05:24,020 --> 00:05:30,870
so we have been working on this app for

00:05:27,659 --> 00:05:33,599
a bit and I do a lot of what I like to

00:05:30,870 --> 00:05:36,449
call the front end of the front end

00:05:33,599 --> 00:05:39,150
I love angular 2 pieces but sometimes

00:05:36,449 --> 00:05:40,770
when people start talking about the back

00:05:39,150 --> 00:05:43,919
end of the front end I start to glaze

00:05:40,770 --> 00:05:45,889
over so I really was excited about doing

00:05:43,919 --> 00:05:48,509
this talk because I believe that I can

00:05:45,889 --> 00:05:51,060
sell it to even those of you out there

00:05:48,509 --> 00:05:52,860
who are like I just do CSS all day I'm

00:05:51,060 --> 00:05:56,460
like I got you I got you

00:05:52,860 --> 00:05:57,750
so we were working on ng doc and all the

00:05:56,460 --> 00:05:59,370
screenshots will be in that and I'm

00:05:57,750 --> 00:06:01,349
gonna walk us through the steps of

00:05:59,370 --> 00:06:02,969
breaking down service workers and

00:06:01,349 --> 00:06:04,889
hopefully they won't be intimidating

00:06:02,969 --> 00:06:07,770
anymore and maybe some of you out there

00:06:04,889 --> 00:06:10,050
like I already got this right on man

00:06:07,770 --> 00:06:11,639
maybe help the guy next to you so the

00:06:10,050 --> 00:06:14,370
first step is going to be install the

00:06:11,639 --> 00:06:16,080
service worker which is said yarn and up

00:06:14,370 --> 00:06:18,449
until this point I'd been using NPM and

00:06:16,080 --> 00:06:20,370
so it's like maybe I could just swap out

00:06:18,449 --> 00:06:24,180
the word yarn friend p.m. totally worked

00:06:20,370 --> 00:06:25,979
my husband was like so hun yarn is built

00:06:24,180 --> 00:06:27,599
on NPM and he started like going into

00:06:25,979 --> 00:06:29,129
this whole thing he's like you can't use

00:06:27,599 --> 00:06:31,319
yarn without using

00:06:29,129 --> 00:06:34,499
p.m. and I was like please oh the world

00:06:31,319 --> 00:06:35,879
is breaking okay so NPM install yarn

00:06:34,499 --> 00:06:38,099
install whatever you've got to do but

00:06:35,879 --> 00:06:41,459
get that angular slash serviceworker

00:06:38,099 --> 00:06:42,989
going so this is in my terminal and it

00:06:41,459 --> 00:06:44,639
was actually a gif of me recording the

00:06:42,989 --> 00:06:46,949
first time installed it and I was

00:06:44,639 --> 00:06:48,300
excited because I'm like oh yeah NPM

00:06:46,949 --> 00:06:50,009
install I got this right and it should

00:06:48,300 --> 00:06:52,349
be super easy step number one nothing

00:06:50,009 --> 00:06:57,209
could go what could possibly go wrong

00:06:52,349 --> 00:07:01,709
right it's so yeah it was just zoom in

00:06:57,209 --> 00:07:02,610
on that the moral of this story I'm not

00:07:01,709 --> 00:07:04,589
going to take you through the rabbit

00:07:02,610 --> 00:07:06,509
hole is make sure your dependencies are

00:07:04,589 --> 00:07:10,249
up to date I don't know my name is

00:07:06,509 --> 00:07:14,759
Alyssa hi I had out of date dependencies

00:07:10,249 --> 00:07:16,830
yeah I know so I know it's a pain but I

00:07:14,759 --> 00:07:18,800
have some good news for you in this a

00:07:16,830 --> 00:07:20,669
dark time of our lives

00:07:18,800 --> 00:07:22,499
right now we have to go through and

00:07:20,669 --> 00:07:26,669
update those dependency numbers one by

00:07:22,499 --> 00:07:27,899
one but I know a guy his name's Mike and

00:07:26,669 --> 00:07:30,360
I don't know if you were here for the

00:07:27,899 --> 00:07:33,029
keynote but he created a little thing he

00:07:30,360 --> 00:07:35,069
likes to call ng update and it's

00:07:33,029 --> 00:07:36,719
literally going to revolutionize our

00:07:35,069 --> 00:07:43,740
update lives so can we all just to be

00:07:36,719 --> 00:07:46,199
like wool for Mike seriously I he might

00:07:43,740 --> 00:07:47,429
do a podcast and so I'll reach out to

00:07:46,199 --> 00:07:49,499
him in the middle of the day for random

00:07:47,429 --> 00:07:51,929
whatever is and I was I was at the

00:07:49,499 --> 00:07:53,610
grocery store I had my earbuds in and I

00:07:51,929 --> 00:07:56,550
was like checking out and I was like

00:07:53,610 --> 00:07:58,259
Mike do I really have to go through and

00:07:56,550 --> 00:07:59,879
update these one by one and he was like

00:07:58,259 --> 00:08:02,009
actually working on this thing right now

00:07:59,879 --> 00:08:04,319
and like went into it and so I was like

00:08:02,009 --> 00:08:06,389
so I can use that he's like well not yet

00:08:04,319 --> 00:08:07,619
we're actually adding all these features

00:08:06,389 --> 00:08:10,169
and I was like why do you always got to

00:08:07,619 --> 00:08:12,300
overkill it Mike so long story short

00:08:10,169 --> 00:08:14,189
we're going to have an incredible update

00:08:12,300 --> 00:08:16,399
but for now we have to suck it up and

00:08:14,189 --> 00:08:20,490
update our dependencies like women so

00:08:16,399 --> 00:08:26,219
what I can only describe as an eternity

00:08:20,490 --> 00:08:27,990
later oh gosh number one because

00:08:26,219 --> 00:08:30,269
apparently I have dyslexia and I can't

00:08:27,990 --> 00:08:32,219
actually read in the terminal like what

00:08:30,269 --> 00:08:35,459
packages it's telling me to update I

00:08:32,219 --> 00:08:37,139
don't know why but eventually I did get

00:08:35,459 --> 00:08:39,089
to go to step number two I got all the

00:08:37,139 --> 00:08:41,279
dependencies up to date and now it's

00:08:39,089 --> 00:08:42,240
time to enable my serviceworker so

00:08:41,279 --> 00:08:45,240
there's these two little

00:08:42,240 --> 00:08:48,630
lines that we run and because the CL is

00:08:45,240 --> 00:08:50,490
so amazing it enables our service burger

00:08:48,630 --> 00:08:52,529
and so we that one was easy it was a

00:08:50,490 --> 00:08:54,390
breeze hoof I got to go on to number

00:08:52,529 --> 00:08:56,190
three and number three is import our

00:08:54,390 --> 00:08:59,040
Service Worker in the route app module

00:08:56,190 --> 00:09:00,870
so that's in our app module TS file we

00:08:59,040 --> 00:09:03,660
do these to import lines import service

00:09:00,870 --> 00:09:05,520
worker import environment and then in

00:09:03,660 --> 00:09:07,260
the imports array we get to do step

00:09:05,520 --> 00:09:08,610
number four which is to register our

00:09:07,260 --> 00:09:10,680
service worker this should all pretty

00:09:08,610 --> 00:09:11,970
much be sounding familiar for me though

00:09:10,680 --> 00:09:14,339
I kind of got a little bit angry because

00:09:11,970 --> 00:09:16,350
up until now everything in our imports

00:09:14,339 --> 00:09:20,640
array which was quite lengthy was like

00:09:16,350 --> 00:09:22,500
one one word and I was like I'm calling

00:09:20,640 --> 00:09:24,209
a register helper inside my imports

00:09:22,500 --> 00:09:25,950
array it took me off took me off on a

00:09:24,209 --> 00:09:27,570
rabbit hole I was like really what the

00:09:25,950 --> 00:09:29,670
what you need to know though what you

00:09:27,570 --> 00:09:31,649
need to know though is that you add this

00:09:29,670 --> 00:09:34,649
your imports array to register your

00:09:31,649 --> 00:09:37,200
service worker and enable it only during

00:09:34,649 --> 00:09:42,600
production mode now if you're anything

00:09:37,200 --> 00:09:44,550
like me you're going but why I I don't I

00:09:42,600 --> 00:09:46,740
was like why production mode why don't

00:09:44,550 --> 00:09:49,050
we just do it for everything and so I

00:09:46,740 --> 00:09:51,990
contacted my friend Steven and I was

00:09:49,050 --> 00:09:53,490
like hey Steven why can't we run it in

00:09:51,990 --> 00:09:56,550
anything about production mode and as

00:09:53,490 --> 00:09:59,399
the Steven do he said it brake developer

00:09:56,550 --> 00:10:00,899
expectations and after working with a

00:09:59,399 --> 00:10:03,570
service worker for like this many

00:10:00,899 --> 00:10:04,860
minutes once I got into it I was

00:10:03,570 --> 00:10:07,070
completely on his side I was like yeah I

00:10:04,860 --> 00:10:09,240
don't really want those around during

00:10:07,070 --> 00:10:10,770
development mode but you know

00:10:09,240 --> 00:10:12,329
so let's enable them but let's enable

00:10:10,770 --> 00:10:14,399
them for production mode is the key

00:10:12,329 --> 00:10:19,250
thing to remember number five create the

00:10:14,399 --> 00:10:22,140
config file Oh big file so this is the

00:10:19,250 --> 00:10:22,740
beating heart of our service worker

00:10:22,140 --> 00:10:27,660
right

00:10:22,740 --> 00:10:29,579
the ng SW - config JSON that's sexy

00:10:27,660 --> 00:10:33,630
style everybody wants one everybody

00:10:29,579 --> 00:10:35,660
wants one and there's no reason to be

00:10:33,630 --> 00:10:38,279
afraid

00:10:35,660 --> 00:10:40,950
it's just JSON i shortened it up there

00:10:38,279 --> 00:10:42,510
for you but essentially the CLI has a

00:10:40,950 --> 00:10:44,520
boilerplate one the angular Doc's have

00:10:42,510 --> 00:10:47,279
one I think my next-door neighbors mom

00:10:44,520 --> 00:10:50,070
has a config file that they swear by and

00:10:47,279 --> 00:10:51,959
if you've ever you've ever googled a

00:10:50,070 --> 00:10:54,270
service worker bug you're gonna find

00:10:51,959 --> 00:10:56,310
some guy on Stack Overflow who's like

00:10:54,270 --> 00:10:58,170
just use my six

00:10:56,310 --> 00:11:00,209
don't worry about it just just swap out

00:10:58,170 --> 00:11:02,250
mine for you yours for mine and then

00:11:00,209 --> 00:11:04,500
you'll be good so really at the end of

00:11:02,250 --> 00:11:06,420
the day like everybody's got one and

00:11:04,500 --> 00:11:08,190
just pick one and slap it in there and

00:11:06,420 --> 00:11:11,310
like let's move on to number six all

00:11:08,190 --> 00:11:14,490
right that's what I did so number six we

00:11:11,310 --> 00:11:19,769
get to build the project ng build - -

00:11:14,490 --> 00:11:21,990
broad at this point I want you to be

00:11:19,769 --> 00:11:23,519
very sure before you run this because

00:11:21,990 --> 00:11:27,269
I've heard rumors that they can be very

00:11:23,519 --> 00:11:29,100
hard to remove remove it's a bit of cow

00:11:27,269 --> 00:11:33,920
humor for you people it's time to wake

00:11:29,100 --> 00:11:33,920
up so you have been warned

00:11:34,250 --> 00:11:40,620
build the project so I actually want to

00:11:36,510 --> 00:11:43,470
ask and how many people out there have

00:11:40,620 --> 00:11:47,790
actually ever ran and she built in an

00:11:43,470 --> 00:11:51,360
angular project whoa I'm gonna say that

00:11:47,790 --> 00:11:55,860
was like between 33 and 50% of the

00:11:51,360 --> 00:11:57,690
audience around there so I had never

00:11:55,860 --> 00:12:00,839
done it before again front end of the

00:11:57,690 --> 00:12:03,720
front end I would be like hey Joe that

00:12:00,839 --> 00:12:05,699
feature you asked me to do it's pushed

00:12:03,720 --> 00:12:07,320
up to github and he'd be like great I'll

00:12:05,699 --> 00:12:09,060
make sure it goes live right it's like I

00:12:07,320 --> 00:12:11,040
never needed this and so as I was going

00:12:09,060 --> 00:12:14,699
through I was like okay I can do this

00:12:11,040 --> 00:12:18,060
right a run build CD into the dist file

00:12:14,699 --> 00:12:21,660
or the folder and try to run in G surf

00:12:18,060 --> 00:12:24,149
right and I literally thought of this

00:12:21,660 --> 00:12:26,220
gift whenever it broke cuz I was like it

00:12:24,149 --> 00:12:28,920
broke like I love I love that Aladdin

00:12:26,220 --> 00:12:30,810
gift and so I went back to the docks and

00:12:28,920 --> 00:12:33,269
immediately you know I hit the next line

00:12:30,810 --> 00:12:35,480
because in G serve does not work with

00:12:33,269 --> 00:12:37,560
service workers and I'm like of course

00:12:35,480 --> 00:12:44,490
just read Elissa

00:12:37,560 --> 00:12:46,649
just read so that's actually from the

00:12:44,490 --> 00:12:51,120
ranch in Oklahoma they don't like when

00:12:46,649 --> 00:12:54,000
you take pictures of them I don't we

00:12:51,120 --> 00:12:55,800
can't use ng surf we're left out in the

00:12:54,000 --> 00:12:57,750
cold like animals maybe some of you are

00:12:55,800 --> 00:13:00,060
okay with that but for me personally it

00:12:57,750 --> 00:13:02,220
was a freak out moment so we need to run

00:13:00,060 --> 00:13:03,750
the project in production mode Doc's

00:13:02,220 --> 00:13:07,380
tell us we need to see the into dis and

00:13:03,750 --> 00:13:09,780
use the HTTP server I'm like okay Doc's

00:13:07,380 --> 00:13:11,720
you're telling me to use the server I'll

00:13:09,780 --> 00:13:15,690
use the server so I go ahead and I run

00:13:11,720 --> 00:13:16,830
HTTP server and then like zsh is all

00:13:15,690 --> 00:13:19,320
like nah brah

00:13:16,830 --> 00:13:21,390
nah and I'm like okay shoutout to zsh

00:13:19,320 --> 00:13:26,160
cuz that thing's killer but command not

00:13:21,390 --> 00:13:27,720
bound I'm like what the Dickens so again

00:13:26,160 --> 00:13:31,110
I'm not gonna take you through that

00:13:27,720 --> 00:13:32,490
rabbit hole but really it's like the

00:13:31,110 --> 00:13:34,800
simplest answer that you would have

00:13:32,490 --> 00:13:37,350
never guessed NPM install it right like

00:13:34,800 --> 00:13:38,670
if you've never used HTTP server because

00:13:37,350 --> 00:13:41,370
you're a front-end of the front end girl

00:13:38,670 --> 00:13:44,400
like me just install it and then you'll

00:13:41,370 --> 00:13:47,730
be good um the route I went which you

00:13:44,400 --> 00:13:48,900
will see in some screenshots back in the

00:13:47,730 --> 00:13:50,730
day I used to work at code school and

00:13:48,900 --> 00:13:53,580
they were a ruby shop and so all my Ruby

00:13:50,730 --> 00:13:55,800
back in but i remember they told me that

00:13:53,580 --> 00:13:57,840
by default we come with its python

00:13:55,800 --> 00:14:00,240
simple server so in my screenshots

00:13:57,840 --> 00:14:02,490
you'll see an alias to that really you

00:14:00,240 --> 00:14:04,500
can choose either one but i went into

00:14:02,490 --> 00:14:08,130
the dist folder I ran that and it was

00:14:04,500 --> 00:14:09,960
working I was like yes it's working so I

00:14:08,130 --> 00:14:13,080
went over to my browser pulled up

00:14:09,960 --> 00:14:16,170
localhost and I mean this was a huge

00:14:13,080 --> 00:14:17,550
moment for me because at this point I've

00:14:16,170 --> 00:14:20,640
literally just been following along I

00:14:17,550 --> 00:14:22,980
didn't write anything custom and this is

00:14:20,640 --> 00:14:25,440
what our app like you can see it's in

00:14:22,980 --> 00:14:28,800
offline mode by default it was caching

00:14:25,440 --> 00:14:30,840
all this stuff and I was just like so

00:14:28,800 --> 00:14:32,700
cool I was I was literally ecstatic at

00:14:30,840 --> 00:14:34,590
this point I was like ok no matter what

00:14:32,700 --> 00:14:38,520
bugs come my way I can conquer them

00:14:34,590 --> 00:14:40,020
because it's working right my next

00:14:38,520 --> 00:14:42,960
thought immediately though was how do I

00:14:40,020 --> 00:14:44,910
update my code and because I'm assuming

00:14:42,960 --> 00:14:47,340
like command shift are like if I go and

00:14:44,910 --> 00:14:49,620
change something won't work and so for a

00:14:47,340 --> 00:14:51,810
real quick test we recently transitioned

00:14:49,620 --> 00:14:55,020
from red to green like the whole theme

00:14:51,810 --> 00:14:57,960
changed and I had yet to update the logo

00:14:55,020 --> 00:15:00,180
so what I did was I grabbed the new logo

00:14:57,960 --> 00:15:02,880
I made I swapped the red one for the

00:15:00,180 --> 00:15:05,190
green one and then I went into incognito

00:15:02,880 --> 00:15:09,110
it was like let's see the change right

00:15:05,190 --> 00:15:11,490
to go to my local host I pull it up and

00:15:09,110 --> 00:15:13,820
no matter how many times I refresh there

00:15:11,490 --> 00:15:16,070
was still a red logo

00:15:13,820 --> 00:15:18,290
of course there was so no panicking it's

00:15:16,070 --> 00:15:20,540
okay it's actually the service worker

00:15:18,290 --> 00:15:22,190
doing its job it's looking at the cache

00:15:20,540 --> 00:15:24,890
version before downloading the new stuff

00:15:22,190 --> 00:15:27,470
so really it hit me I was like maybe we

00:15:24,890 --> 00:15:31,280
should rebuild and restart so as soon as

00:15:27,470 --> 00:15:34,660
I did that rebuild to restart and then I

00:15:31,280 --> 00:15:38,800
went over and I pulled it up again

00:15:34,660 --> 00:15:41,600
mm-hmm refresh green I was like yes okay

00:15:38,800 --> 00:15:43,250
so I at this point I was like I can you

00:15:41,600 --> 00:15:44,510
know I can still do things a service

00:15:43,250 --> 00:15:47,420
worker is not gonna break everything

00:15:44,510 --> 00:15:49,940
Alyssa calm down but if you I don't know

00:15:47,420 --> 00:15:51,710
if you see the red oh it's my next step

00:15:49,940 --> 00:15:53,630
my neck I basically jump from shiny

00:15:51,710 --> 00:15:55,160
thing to shiny thing the logo had been

00:15:53,630 --> 00:15:57,440
bothering me and I'm like okay now this

00:15:55,160 --> 00:16:00,530
red is bothering me and we have our look

00:15:57,440 --> 00:16:01,880
our loader here because everything like

00:16:00,530 --> 00:16:03,410
these default assets are being cached

00:16:01,880 --> 00:16:05,270
but we're not getting our articles or

00:16:03,410 --> 00:16:08,870
our tags or anything really from our

00:16:05,270 --> 00:16:12,050
back end we have errors galore so this

00:16:08,870 --> 00:16:13,580
whole time in my terminal when Alyssa

00:16:12,050 --> 00:16:15,830
wants to go and work on ng docks she

00:16:13,580 --> 00:16:17,240
starts her npm server the back end and

00:16:15,830 --> 00:16:18,920
then I go and I started the front end

00:16:17,240 --> 00:16:20,900
and then I worked so this whole time I

00:16:18,920 --> 00:16:23,720
had the backend running I think I was

00:16:20,900 --> 00:16:26,300
assuming somehow the service worker

00:16:23,720 --> 00:16:29,870
would just know about my back-end like

00:16:26,300 --> 00:16:31,720
and connect it I expect way too much

00:16:29,870 --> 00:16:36,020
magic out of life I think so I

00:16:31,720 --> 00:16:37,790
researched into it a bit and proxies Hey

00:16:36,020 --> 00:16:39,830
oh this was so fun has anybody ever used

00:16:37,790 --> 00:16:41,720
a proxy like this before anybody a

00:16:39,830 --> 00:16:42,620
couple okay okay cool cool cool cool

00:16:41,720 --> 00:16:45,410
cool some of you're gonna learn

00:16:42,620 --> 00:16:47,420
something new so when you run HTTP

00:16:45,410 --> 00:16:50,570
server you can use a flag called dash

00:16:47,420 --> 00:16:53,510
dash proxy or dash p and this proxies

00:16:50,570 --> 00:16:55,790
all requests which cannot be resolved so

00:16:53,510 --> 00:16:57,590
if it fails then it's gonna go look at

00:16:55,790 --> 00:16:59,750
the proxy I was like cool it sounds like

00:16:57,590 --> 00:17:01,670
exactly what I need in my life so I gave

00:16:59,750 --> 00:17:03,350
it the local host 8800 won because

00:17:01,670 --> 00:17:05,240
that's where my NPM server was like

00:17:03,350 --> 00:17:07,310
serving up the stuff and I went and I

00:17:05,240 --> 00:17:09,820
refreshed and I got all the assets and

00:17:07,310 --> 00:17:13,220
tags and I was like I did it a

00:17:09,820 --> 00:17:16,970
serviceworker and so I went like collect

00:17:13,220 --> 00:17:20,630
a little offline mode and of course of

00:17:16,970 --> 00:17:23,840
course right like no it failed miserably

00:17:20,630 --> 00:17:25,760
I look over at my dog at this point he's

00:17:23,840 --> 00:17:27,049
a wiener dog and he he's giving me this

00:17:25,760 --> 00:17:29,299
give up on life

00:17:27,049 --> 00:17:32,869
right and like no no we're gonna do this

00:17:29,299 --> 00:17:35,259
alright we have one final step to

00:17:32,869 --> 00:17:37,429
cashing victory hang in there guys so

00:17:35,259 --> 00:17:40,519
this one is kind of the fun one I think

00:17:37,429 --> 00:17:43,970
it's cashing the custom bits so we go

00:17:40,519 --> 00:17:46,480
back into our sexy mg SW - config JSON

00:17:43,970 --> 00:17:48,830
file and we're gonna create a data group

00:17:46,480 --> 00:17:51,409
do not be intimidated we're gonna give

00:17:48,830 --> 00:17:53,869
that data group a name I named it API -

00:17:51,409 --> 00:17:59,049
performance we will go into that in a

00:17:53,869 --> 00:18:02,840
moment and then I added the URL Alyssa

00:17:59,049 --> 00:18:04,580
how'd you know what URLs to add well the

00:18:02,840 --> 00:18:06,529
front end of the front-end Alyssa just

00:18:04,580 --> 00:18:09,830
looked at what errors she had things

00:18:06,529 --> 00:18:13,879
like can't find / API / tags let's put

00:18:09,830 --> 00:18:16,879
that can't find / API slash art so yeah

00:18:13,879 --> 00:18:19,070
it's super complicated way yeah I put

00:18:16,879 --> 00:18:20,570
all of the routes that I was like not

00:18:19,070 --> 00:18:22,429
getting these let's put those suckers in

00:18:20,570 --> 00:18:24,619
there and then I added a cache config

00:18:22,429 --> 00:18:27,830
and this is where a bit of strategy

00:18:24,619 --> 00:18:30,559
comes in so as before I said we named an

00:18:27,830 --> 00:18:32,859
API - performance we can do performance

00:18:30,559 --> 00:18:35,320
or we can do freshness and so

00:18:32,859 --> 00:18:39,440
performance is essentially saying look

00:18:35,320 --> 00:18:41,059
at the cached goodness first and then

00:18:39,440 --> 00:18:43,340
refer to the newness later

00:18:41,059 --> 00:18:45,950
whereas freshness is like no no I want

00:18:43,340 --> 00:18:47,869
the freshest stuff first fall back on

00:18:45,950 --> 00:18:50,539
the cache stuff so at this point I'm

00:18:47,869 --> 00:18:51,679
like I don't care what strategy we use I

00:18:50,539 --> 00:18:54,320
just want to see something in offline

00:18:51,679 --> 00:18:58,509
mode so I'm put performance on there I

00:18:54,320 --> 00:19:03,789
do a max size of 100 max age of 3 days

00:18:58,509 --> 00:19:03,789
and now you can see the offline glory

00:19:07,539 --> 00:19:13,340
yeah so we're in offline mode we have

00:19:11,690 --> 00:19:14,830
all of the cool assets by default we've

00:19:13,340 --> 00:19:17,330
got our articles we've got our tags

00:19:14,830 --> 00:19:19,249
we're in the happiest place ever and I

00:19:17,330 --> 00:19:21,139
don't think it was too painful I hope

00:19:19,249 --> 00:19:23,600
that's what you get I really really do I

00:19:21,139 --> 00:19:24,950
hope that you take away that it can make

00:19:23,600 --> 00:19:27,200
a difference to people who are just

00:19:24,950 --> 00:19:30,080
everyday devs like you and me or users

00:19:27,200 --> 00:19:32,559
like you and me and I mean some people

00:19:30,080 --> 00:19:34,460
would even say that if not for cows

00:19:32,559 --> 00:19:36,619
service workers would have never been

00:19:34,460 --> 00:19:37,879
invented some people say that I don't

00:19:36,619 --> 00:19:40,080
know who but somebody

00:19:37,879 --> 00:19:41,759
I've really been enjoying this time

00:19:40,080 --> 00:19:43,409
being close to family and working on the

00:19:41,759 --> 00:19:48,090
ranch hanging out with the amazing cow

00:19:43,409 --> 00:19:50,399
critters but without service workers it

00:19:48,090 --> 00:19:53,429
literally would have been crippling and

00:19:50,399 --> 00:19:55,529
it was just so painfully obvious so I

00:19:53,429 --> 00:19:59,009
want you when you're thinking should I

00:19:55,529 --> 00:19:59,869
serviceworker is it worth the 30 minutes

00:19:59,009 --> 00:20:03,980
to set up

00:19:59,869 --> 00:20:06,299
just remember it's for the cow puppies

00:20:03,980 --> 00:20:08,730
that was the first cow that was born on

00:20:06,299 --> 00:20:12,539
the ranch and it literally feels like a

00:20:08,730 --> 00:20:13,139
puppy thank you all so much for your

00:20:12,539 --> 00:20:15,960
time today

00:20:13,139 --> 00:20:19,089
have an amazing travel back thank you

00:20:15,960 --> 00:20:19,089

YouTube URL: https://www.youtube.com/watch?v=K6KJOzLUaEs


