Title: Angular Console â€“ Architecting A Cross Platform Application | Dan Muller
Publication date: 2019-05-02
Playlist: ng-conf 2019
Description: 
	Angular Console is now launched as a standalone electron app as well as a Visual studio code extension. In the future it will also be released as a IDEA extension as well and maybe other platforms in the future. Would you believe it if I told you that the code difference between angular console on two different platforms is 200 lines? And that all platform releases are Angular CLI apps?! How is that even possible?! In this talk I will go over architecture decisions which allows angular console specifically to target multiple platforms with as minimal overhead and code duplication as is possible.

ng-conf is a three-day Angular conference focused on delivering the highest quality training in the Angular JavaScript framework. 1500+ developers from across the globe converge on Salt Lake City, UT every year to attend talks and workshops by the Angular team and community experts.

Follow us on twitter https://twitter.com/ngconf
Official Website: https://www.ng-conf.org/
Captions: 
	00:00:07,920 --> 00:00:11,170
[Music]

00:00:11,929 --> 00:00:16,470
thank you

00:00:14,360 --> 00:00:18,660
today I want to talk to you all about

00:00:16,470 --> 00:00:20,970
how to architect a cross-platform

00:00:18,660 --> 00:00:23,460
application the star of the show today

00:00:20,970 --> 00:00:25,080
is angular console and I don't know if

00:00:23,460 --> 00:00:26,730
all of you know this but a lot of really

00:00:25,080 --> 00:00:29,310
cool people are going around saying

00:00:26,730 --> 00:00:32,340
angular console is Bey like it's out of

00:00:29,310 --> 00:00:35,700
my control but I think we shall do it

00:00:32,340 --> 00:00:39,030
but enough about its that I want to talk

00:00:35,700 --> 00:00:40,649
about me the start of the show I really

00:00:39,030 --> 00:00:42,660
like to go on long walks on the beach

00:00:40,649 --> 00:00:44,820
crisp 60 frames per second web

00:00:42,660 --> 00:00:51,510
animations but let me tell you right now

00:00:44,820 --> 00:00:54,570
I hate celery okay so what does it mean

00:00:51,510 --> 00:00:56,670
to be cross platform at a very very high

00:00:54,570 --> 00:00:59,430
level it means you have a website and it

00:00:56,670 --> 00:01:01,500
release it in a lot of places for

00:00:59,430 --> 00:01:04,680
angular console which is a app I make it

00:01:01,500 --> 00:01:07,140
Narwhal we have an electron up which we

00:01:04,680 --> 00:01:09,600
release on Mac Windows Linux and we also

00:01:07,140 --> 00:01:11,729
target code editors as a different

00:01:09,600 --> 00:01:15,450
platform and right now we have one that

00:01:11,729 --> 00:01:17,909
you can install in BS code and the

00:01:15,450 --> 00:01:20,610
surprising bits about this is it only

00:01:17,909 --> 00:01:22,950
took three hundred lines of code to make

00:01:20,610 --> 00:01:25,950
the entire electron app that targets

00:01:22,950 --> 00:01:28,890
three different operating systems and so

00:01:25,950 --> 00:01:30,450
I know what you're all thinking why is

00:01:28,890 --> 00:01:33,540
this man with a giant horn on his head

00:01:30,450 --> 00:01:37,170
lying to me he's a liar stop lying

00:01:33,540 --> 00:01:39,479
get off the stage but I will say no I'm

00:01:37,170 --> 00:01:43,079
not lying I'm just merely obvious gating

00:01:39,479 --> 00:01:44,759
bits of the truth angular console itself

00:01:43,079 --> 00:01:47,490
is like many many many lines of code but

00:01:44,759 --> 00:01:50,220
by and large all the platforms share

00:01:47,490 --> 00:01:52,320
almost all of the code those 300 lines

00:01:50,220 --> 00:01:55,110
are just the exception and we're able to

00:01:52,320 --> 00:01:57,210
do this because we use a mono repo we

00:01:55,110 --> 00:01:59,759
use NX because that's how you do mano

00:01:57,210 --> 00:02:03,960
repos with angular CLI and they're great

00:01:59,759 --> 00:02:06,299
I think they rule so once you have your

00:02:03,960 --> 00:02:09,289
code co-located let's just take our

00:02:06,299 --> 00:02:12,049
electron app and our vs code app

00:02:09,289 --> 00:02:13,879
basically what we need to do is we have

00:02:12,049 --> 00:02:16,220
our front ends you know the website

00:02:13,879 --> 00:02:19,519
itself and we're gonna build that that's

00:02:16,220 --> 00:02:21,860
step one we might configure it a little

00:02:19,519 --> 00:02:23,689
bit differently per platform on vs code

00:02:21,860 --> 00:02:25,730
we hide some elements and we change some

00:02:23,689 --> 00:02:27,650
colors and so we just swap out the

00:02:25,730 --> 00:02:28,879
environment file and we build the front

00:02:27,650 --> 00:02:31,670
ends just a little bit different for

00:02:28,879 --> 00:02:34,159
each platform that's step one step two

00:02:31,670 --> 00:02:36,319
is we build the server that will serve

00:02:34,159 --> 00:02:39,260
the front-end app for that platform so

00:02:36,319 --> 00:02:40,970
we'll do ng builds vs code or ng builds

00:02:39,260 --> 00:02:43,609
electron platform is just a placeholder

00:02:40,970 --> 00:02:45,500
here and the very last step and only

00:02:43,609 --> 00:02:47,510
takes three steps is you just glue the

00:02:45,500 --> 00:02:49,129
two together and then you ship it call

00:02:47,510 --> 00:02:52,370
it a day sounds easy right

00:02:49,129 --> 00:02:54,440
that's cuz it is spongebob says it is so

00:02:52,370 --> 00:02:56,690
let's just take a look at the dependency

00:02:54,440 --> 00:02:59,840
graph so you guys get a clearer idea of

00:02:56,690 --> 00:03:01,639
what I'm saying so we have a server Lib

00:02:59,840 --> 00:03:04,250
library that means it's a shared piece

00:03:01,639 --> 00:03:08,150
of code both the electron app and the vs

00:03:04,250 --> 00:03:09,829
code app import it and they share it we

00:03:08,150 --> 00:03:14,389
also have our angular console front-end

00:03:09,829 --> 00:03:17,120
and to make an electron app let's say we

00:03:14,389 --> 00:03:19,849
have a platform specific builder in this

00:03:17,120 --> 00:03:22,040
case the electron builder and it outputs

00:03:19,849 --> 00:03:23,750
some installable artifacts that you can

00:03:22,040 --> 00:03:29,109
put on your machine and we post those

00:03:23,750 --> 00:03:32,840
and github and we call it a day that's

00:03:29,109 --> 00:03:34,489
how do we do those 300 lines obviously

00:03:32,840 --> 00:03:37,069
they seem kind of important

00:03:34,489 --> 00:03:39,680
they literally glue everything together

00:03:37,069 --> 00:03:43,280
that's not shared so what does it take

00:03:39,680 --> 00:03:45,799
to implement those and the trick here is

00:03:43,280 --> 00:03:48,980
that we rigidly define what it means to

00:03:45,799 --> 00:03:51,530
be a platform at the maximum extent that

00:03:48,980 --> 00:03:52,790
we can so we want to share as much code

00:03:51,530 --> 00:03:54,889
as we can but there's some things that

00:03:52,790 --> 00:03:56,900
you have to do on a platform by platform

00:03:54,889 --> 00:03:59,569
basis one of those things is to make a

00:03:56,900 --> 00:04:01,849
drop-down menu like on Windows in an

00:03:59,569 --> 00:04:04,340
electron app you have a different API to

00:04:01,849 --> 00:04:06,530
register a menu then in vs code you know

00:04:04,340 --> 00:04:09,079
they're just different but our shared

00:04:06,530 --> 00:04:10,819
code can just expect that you pass it a

00:04:09,079 --> 00:04:13,069
platform that describes to an interface

00:04:10,819 --> 00:04:15,319
it's like a contract and so you just

00:04:13,069 --> 00:04:18,079
call register a menu and assuming the

00:04:15,319 --> 00:04:21,930
platform you know ascribes the contracts

00:04:18,079 --> 00:04:24,210
bingo-bango you got it you got a menu

00:04:21,930 --> 00:04:26,509
and see it wasn't hit that hard at all

00:04:24,210 --> 00:04:28,680
easy peasy lemon squeezy

00:04:26,509 --> 00:04:29,669
and with that I just want to thank you

00:04:28,680 --> 00:04:31,280
all for listening and I'll leave you

00:04:29,669 --> 00:04:34,490
with this great image

00:04:31,280 --> 00:04:34,490
remember the horn

00:04:35,169 --> 00:04:37,229
you

00:04:41,330 --> 00:04:48,059
[Music]

00:04:53,889 --> 00:04:55,949

YouTube URL: https://www.youtube.com/watch?v=YzkMFFkzrls


