Title: Running stateful applications in Kubernetes: Is it worth the risk? - Kris Nova (Heptio)
Publication date: 2018-06-13
Playlist: O'Reilly Velocity Conference 2018 - San Jose, California
Description: 
	Kris Nova explores the current state of running stateful applications in Kubernetes, the tooling gaps you'll want to watch out for, and the four metrics that will help you determine if it's worth the risk.

Join us in person at the O'Reilly Velocity Conference to learn to build and manage performant, distributed, resilient, and highly available websites and applications. Learn more: https://oreil.ly/2LFc8Gw

Subscribe to O'Reilly on YouTube: http://goo.gl/n3QSYi

Follow O'Reilly on: 
Twitter: http://twitter.com/oreillymedia
Facebook: http://facebook.com/OReilly
Instagram: https://www.instagram.com/oreillymedia
LinkedIn: https://www.linkedin.com/company-beta/8459/
Captions: 
	00:00:00,800 --> 00:00:07,020
so let's talk about state in kubernetes

00:00:04,609 --> 00:00:09,540
there's two types of state the first one

00:00:07,020 --> 00:00:11,190
ephemeral it goes away that's what we

00:00:09,540 --> 00:00:12,060
just learned about that's the stateless

00:00:11,190 --> 00:00:14,220
component here

00:00:12,060 --> 00:00:15,930
I started container your application I

00:00:14,220 --> 00:00:17,340
run it and state goes away when that

00:00:15,930 --> 00:00:19,800
application is done in exits and goes

00:00:17,340 --> 00:00:21,510
back to stack this is simple it's easy

00:00:19,800 --> 00:00:22,890
and it gives us powerful guarantees as

00:00:21,510 --> 00:00:25,230
systems engineers that we can destroy

00:00:22,890 --> 00:00:27,030
our application at any time furthermore

00:00:25,230 --> 00:00:28,170
we have persistent state this is the

00:00:27,030 --> 00:00:30,270
type of state you and I grew up with

00:00:28,170 --> 00:00:31,410
this is the state that we learned when

00:00:30,270 --> 00:00:32,909
we started playing with computers when

00:00:31,410 --> 00:00:35,219
we were kids if you unplug your computer

00:00:32,909 --> 00:00:37,829
and plug it back in your state persists

00:00:35,219 --> 00:00:39,059
it comes back imagine living in a world

00:00:37,829 --> 00:00:40,350
where you would restart your computer

00:00:39,059 --> 00:00:43,019
and you would lose everything on your

00:00:40,350 --> 00:00:44,010
hard drive persistent state is important

00:00:43,019 --> 00:00:45,749
because if we're running stateful

00:00:44,010 --> 00:00:47,399
applications we have reasonable

00:00:45,749 --> 00:00:48,749
expectations as software engineers that

00:00:47,399 --> 00:00:50,850
we should be able to save something and

00:00:48,749 --> 00:00:53,989
get it back later regardless of how many

00:00:50,850 --> 00:00:55,859
times we've restarted our applications

00:00:53,989 --> 00:00:58,199
that's a little bit hard to do in

00:00:55,859 --> 00:01:00,089
kubernetes and when I say hard I don't

00:00:58,199 --> 00:01:01,350
want you think it's impossible I just

00:01:00,089 --> 00:01:03,089
want you to understand that it's new I

00:01:01,350 --> 00:01:04,649
remember the first time learning about

00:01:03,089 --> 00:01:06,180
managing disks and Linux in like the

00:01:04,649 --> 00:01:08,369
first time I was like man I really

00:01:06,180 --> 00:01:09,780
knocked out some LVM today like really

00:01:08,369 --> 00:01:11,159
learn that really solid and you know it

00:01:09,780 --> 00:01:12,450
took me a few years to kind of get there

00:01:11,159 --> 00:01:13,829
and learn about how the filesystem

00:01:12,450 --> 00:01:15,600
worked and learn about these different

00:01:13,829 --> 00:01:16,799
types of state kubernetes is no

00:01:15,600 --> 00:01:21,840
different it just takes some time to

00:01:16,799 --> 00:01:23,340
learn it's possible in kubernetes that's

00:01:21,840 --> 00:01:25,320
the point of the keynote I want you guys

00:01:23,340 --> 00:01:26,850
to understand that it is possible to do

00:01:25,320 --> 00:01:28,200
in kubernetes and then it might make

00:01:26,850 --> 00:01:31,530
sense for you and your engineering

00:01:28,200 --> 00:01:33,600
organization to do I get asked this

00:01:31,530 --> 00:01:34,679
question so much in fact I remember is

00:01:33,600 --> 00:01:36,899
just the other day we were at the office

00:01:34,679 --> 00:01:39,390
one of our sales guys came up to me he's

00:01:36,899 --> 00:01:41,759
like Chris this kubernetes ready for

00:01:39,390 --> 00:01:43,320
stateful workloads and I'm like I mean

00:01:41,759 --> 00:01:45,119
yeah I can give you my opinion here I

00:01:43,320 --> 00:01:46,710
think so really it depends on you and

00:01:45,119 --> 00:01:48,329
your team it depends on how much you

00:01:46,710 --> 00:01:50,369
know what your use cases is and more

00:01:48,329 --> 00:01:51,749
importantly than anything else what

00:01:50,369 --> 00:01:52,979
value are you getting out of kubernetes

00:01:51,749 --> 00:01:55,140
why do you want to move there in the

00:01:52,979 --> 00:01:56,549
first place come see my talk later today

00:01:55,140 --> 00:01:58,049
you'll learn all about the great

00:01:56,549 --> 00:01:58,670
wonderful things kubernetes can do for

00:01:58,049 --> 00:02:01,590
you

00:01:58,670 --> 00:02:03,450
there's a lot of people in tech thought

00:02:01,590 --> 00:02:05,729
leaders you might have heard of who say

00:02:03,450 --> 00:02:07,380
that you know what I don't really want

00:02:05,729 --> 00:02:09,960
to run stateful applications in

00:02:07,380 --> 00:02:11,250
kubernetes I think that's great I think

00:02:09,960 --> 00:02:13,319
a lot of people might misunderstand

00:02:11,250 --> 00:02:16,469
what's happening here though

00:02:13,319 --> 00:02:19,290
the question isn't if kubernetes is

00:02:16,469 --> 00:02:21,599
ready for state the question is a viewer

00:02:19,290 --> 00:02:24,109
ready to run stateful applications in

00:02:21,599 --> 00:02:24,109

YouTube URL: https://www.youtube.com/watch?v=H4WBASkEEyA


