Title: Kubernetes at scale: The good, the bad, and the ugly (sponsored by Oracle Cloud Infrastructure)
Publication date: 2019-11-06
Playlist: O'Reilly Velocity Conference 2019 - Berlin, DE
Description: 
	Kubernetes at scale: The good, the bad, and the ugly (sponsored by Oracle Cloud Infrastructure)
Karthik Gaekwad (Oracle Cloud Infrastructure)

Subscribe to O'Reilly on YouTube: http://goo.gl/n3QSYi

Follow O'Reilly on: 
Twitter: http://twitter.com/oreillymedia
Facebook: http://facebook.com/OReilly
Instagram: https://www.instagram.com/oreillymedia
LinkedIn: https://www.linkedin.com/company-beta/8459/
Captions: 
	00:00:00,510 --> 00:00:05,850
I'd like to start by saying I work at

00:00:02,520 --> 00:00:07,349
Oracle but I'm not a database person if

00:00:05,850 --> 00:00:08,549
folks have database questions we have a

00:00:07,349 --> 00:00:11,040
lot of other folks out there I actually

00:00:08,549 --> 00:00:12,629
come from the cloud division today I'm

00:00:11,040 --> 00:00:14,099
going to talk to you specifically about

00:00:12,629 --> 00:00:15,929
kubernetes and some of the learnings

00:00:14,099 --> 00:00:19,080
we've had as a part of the manager cuba

00:00:15,929 --> 00:00:21,060
news platform at oracle and cloud native

00:00:19,080 --> 00:00:23,220
actually means a lot of different things

00:00:21,060 --> 00:00:25,350
to a lot of different companies so for

00:00:23,220 --> 00:00:27,180
us at Oracle it's basically a suite of

00:00:25,350 --> 00:00:29,940
services starting with the registry the

00:00:27,180 --> 00:00:32,610
Oracle kubernetes the container engine

00:00:29,940 --> 00:00:34,500
for Cuban Eddie's functions and a lot of

00:00:32,610 --> 00:00:37,890
supporting services surrounding it like

00:00:34,500 --> 00:00:39,600
notifications monitoring etc etc but the

00:00:37,890 --> 00:00:41,310
foundational pieces of all of this is

00:00:39,600 --> 00:00:43,200
like three specific things the registry

00:00:41,310 --> 00:00:45,840
the container engine for kubernetes and

00:00:43,200 --> 00:00:48,989
the functions platform which is Oracle

00:00:45,840 --> 00:00:50,579
clouds service offering so one of the

00:00:48,989 --> 00:00:52,649
things that I kind of wanted to bring up

00:00:50,579 --> 00:00:54,690
is you know behind the scenes what kind

00:00:52,649 --> 00:00:57,899
of happens when we build large platforms

00:00:54,690 --> 00:01:00,360
like the kubernetes engine I used to be

00:00:57,899 --> 00:01:02,130
a developer on this team and then turned

00:01:00,360 --> 00:01:04,290
out that I like talking to people so

00:01:02,130 --> 00:01:06,569
much in large enterprises if you like

00:01:04,290 --> 00:01:08,759
talking to customers you get put into an

00:01:06,569 --> 00:01:12,240
advocacy role so that's just what

00:01:08,759 --> 00:01:14,520
happens in large enterprises and also we

00:01:12,240 --> 00:01:16,499
we call it Oracle kubernetes Oracle

00:01:14,520 --> 00:01:18,780
container engine for kubernetes but

00:01:16,499 --> 00:01:20,729
Enterprise naming can be complicated

00:01:18,780 --> 00:01:26,039
sometimes so I like to call it oke

00:01:20,729 --> 00:01:28,200
instead so for us surprisingly on Oracle

00:01:26,039 --> 00:01:29,639
cloud the Kuban IDs engine okayyyy is

00:01:28,200 --> 00:01:31,889
one of the most popular platforms we

00:01:29,639 --> 00:01:34,979
have it's not as popular as there are as

00:01:31,889 --> 00:01:36,539
our database or ATP but you know it's

00:01:34,979 --> 00:01:38,969
one other top three things that we use

00:01:36,539 --> 00:01:41,429
and the reason for this popularity is

00:01:38,969 --> 00:01:43,229
threefold first off it's you know it's

00:01:41,429 --> 00:01:44,579
on Oracle cloud so a lot of customers

00:01:43,229 --> 00:01:47,189
like to use kubernetes the managed

00:01:44,579 --> 00:01:48,659
offering it's also used internally by a

00:01:47,189 --> 00:01:50,009
lot of teams to kind of do a lot of

00:01:48,659 --> 00:01:51,869
their work so that you know they don't

00:01:50,009 --> 00:01:54,209
have to manage the specific platform and

00:01:51,869 --> 00:01:56,700
also we're trying to leverage the

00:01:54,209 --> 00:01:58,969
communities engine for folks to actually

00:01:56,700 --> 00:02:01,619
build products on top of Oracle cloud

00:01:58,969 --> 00:02:03,090
and so that way they're using the Kuban

00:02:01,619 --> 00:02:05,279
at ease the menÃ­s cuban at ease data

00:02:03,090 --> 00:02:07,319
plane to build their own products so

00:02:05,279 --> 00:02:08,879
what is some of the issues that we've

00:02:07,319 --> 00:02:11,579
kind of seen when we've been building

00:02:08,879 --> 00:02:14,020
out this platform first off when we

00:02:11,579 --> 00:02:15,730
started the project a couple years ago

00:02:14,020 --> 00:02:18,490
we started with like a full-stack team

00:02:15,730 --> 00:02:21,730
right so developers full-stack we like

00:02:18,490 --> 00:02:23,470
to build things all together so when we

00:02:21,730 --> 00:02:25,990
started like anybody could kind of work

00:02:23,470 --> 00:02:28,150
on any pieces of the code and that was

00:02:25,990 --> 00:02:29,500
the that was the idea that we had and we

00:02:28,150 --> 00:02:32,470
learned a lot when we were building the

00:02:29,500 --> 00:02:34,930
first very first edition but as we all

00:02:32,470 --> 00:02:37,300
know Cuban Eddy's that's really really

00:02:34,930 --> 00:02:39,250
vast the landscape is pretty big

00:02:37,300 --> 00:02:41,260
and it was kind of hard to keep up with

00:02:39,250 --> 00:02:44,110
all the different pieces up and running

00:02:41,260 --> 00:02:45,790
so you know when you were working on

00:02:44,110 --> 00:02:47,230
kubernetes from cuban Annie's

00:02:45,790 --> 00:02:48,670
perspective or from an Oracle

00:02:47,230 --> 00:02:51,100
perspective everything changes over time

00:02:48,670 --> 00:02:52,630
API etc so it's hard to keep up and

00:02:51,100 --> 00:02:54,880
there are also individuals kind of

00:02:52,630 --> 00:02:57,010
started to learn more expertise in

00:02:54,880 --> 00:02:57,970
certain areas so for example for me like

00:02:57,010 --> 00:03:00,280
I was working in the authentication

00:02:57,970 --> 00:03:02,140
portion of Cuban IDs and OCI so I was

00:03:00,280 --> 00:03:04,630
like ok I understand authentication

00:03:02,140 --> 00:03:06,250
authorization a lot more and you know

00:03:04,630 --> 00:03:09,610
you kick are not going in in those

00:03:06,250 --> 00:03:11,650
specific areas and you gain expertise so

00:03:09,610 --> 00:03:13,239
in the end what we ended up doing was we

00:03:11,650 --> 00:03:15,069
actually we are connected our team a

00:03:13,239 --> 00:03:16,959
little bit where we thought you know

00:03:15,069 --> 00:03:18,880
everybody learning everything was a

00:03:16,959 --> 00:03:21,040
little bit challenging so let's break

00:03:18,880 --> 00:03:23,049
this down and you know split our one

00:03:21,040 --> 00:03:24,610
single team into three smaller sub teams

00:03:23,049 --> 00:03:27,070
where we had a control playing team a

00:03:24,610 --> 00:03:30,910
data plane team on a platform team doing

00:03:27,070 --> 00:03:33,730
different tasks the next thing I want to

00:03:30,910 --> 00:03:35,950
talk about is metrics and I put this

00:03:33,730 --> 00:03:38,040
picture up here because regardless of

00:03:35,950 --> 00:03:40,900
what do you ask this guy he says aliens

00:03:38,040 --> 00:03:42,459
and so for me in that same case I was

00:03:40,900 --> 00:03:46,000
like oh yeah meu no metric solves it

00:03:42,459 --> 00:03:47,590
right and so we we started off with we

00:03:46,000 --> 00:03:49,359
were trying to collect as developers

00:03:47,590 --> 00:03:50,590
we're all about we're all pro metrics

00:03:49,359 --> 00:03:52,810
right so we want to collect everything

00:03:50,590 --> 00:03:54,280
we have so we had this like collect

00:03:52,810 --> 00:03:57,549
first and we'll analyze all this stuff

00:03:54,280 --> 00:03:59,650
later in dashboards and as soon as we

00:03:57,549 --> 00:04:01,480
did this it worked great in dev and then

00:03:59,650 --> 00:04:02,829
we pushed out to production and you know

00:04:01,480 --> 00:04:05,980
popular platform everybody's kind of

00:04:02,829 --> 00:04:07,780
using it and we were like oh we actually

00:04:05,980 --> 00:04:09,970
have issues like retaining this and

00:04:07,780 --> 00:04:11,470
storing this and it was hard to

00:04:09,970 --> 00:04:14,170
understand what we were actually looking

00:04:11,470 --> 00:04:15,910
at in terms of our dashboards so pretty

00:04:14,170 --> 00:04:17,289
soon we were like okay you know what

00:04:15,910 --> 00:04:19,359
let's take a step back let's actually

00:04:17,289 --> 00:04:21,160
figure out what's important for us to

00:04:19,359 --> 00:04:22,659
collect so you know we brought in

00:04:21,160 --> 00:04:24,130
management with a product product

00:04:22,659 --> 00:04:25,599
management etc to kind of talk about

00:04:24,130 --> 00:04:27,180
what's important to the service what

00:04:25,599 --> 00:04:30,570
should we be collecting

00:04:27,180 --> 00:04:32,910
and you know we started to figure out a

00:04:30,570 --> 00:04:36,030
lot of those portions you know a side by

00:04:32,910 --> 00:04:37,860
side so in the end we used metrics to

00:04:36,030 --> 00:04:40,710
our advantage rather than you know just

00:04:37,860 --> 00:04:44,010
collecting everything and our dashboards

00:04:40,710 --> 00:04:47,790
were once again useful I want to switch

00:04:44,010 --> 00:04:50,010
to another topic which is burnout so we

00:04:47,790 --> 00:04:52,470
are all engineers and we all really want

00:04:50,010 --> 00:04:54,389
to be working on platforms that are

00:04:52,470 --> 00:04:56,190
really popular we have a lot of users

00:04:54,389 --> 00:04:57,540
etc that's the dream right like we want

00:04:56,190 --> 00:05:00,389
to build things we want people to be

00:04:57,540 --> 00:05:02,280
using stuff one of the drawbacks behind

00:05:00,389 --> 00:05:03,479
that is if you have a small team and

00:05:02,280 --> 00:05:05,250
you're trying to manage something that's

00:05:03,479 --> 00:05:07,530
really popular you know you might get

00:05:05,250 --> 00:05:10,800
paged and you might get you know a lot

00:05:07,530 --> 00:05:13,320
of on-call kind of things etc so teams

00:05:10,800 --> 00:05:15,750
start to struggle when you can't balance

00:05:13,320 --> 00:05:17,190
time between fixing an issue like a you

00:05:15,750 --> 00:05:19,620
know sub one seven zero or seven

00:05:17,190 --> 00:05:21,120
whatever in production versus actually

00:05:19,620 --> 00:05:22,740
fixing the issue from our long-term

00:05:21,120 --> 00:05:25,080
perspective so you start putting a lot

00:05:22,740 --> 00:05:27,539
of band-aids etc and so constant

00:05:25,080 --> 00:05:29,220
firefighting will without actually

00:05:27,539 --> 00:05:31,229
fixing the underlying issue like

00:05:29,220 --> 00:05:32,639
sometimes you know you'll it lead to

00:05:31,229 --> 00:05:34,440
apathy so you'd be like man I don't

00:05:32,639 --> 00:05:37,979
really want to be doing this and then it

00:05:34,440 --> 00:05:40,380
ends up disillusionment or burnout so

00:05:37,979 --> 00:05:41,970
one thing for for us specifically the

00:05:40,380 --> 00:05:44,910
second point here was really important

00:05:41,970 --> 00:05:46,889
we grew our team so we had a team of ten

00:05:44,910 --> 00:05:48,840
initially and then we grew it out to

00:05:46,889 --> 00:05:50,280
forty forty folks and that was really

00:05:48,840 --> 00:05:53,370
helpful for us because we were able to

00:05:50,280 --> 00:05:55,620
not only fix things we had running at

00:05:53,370 --> 00:05:57,360
the sale you know fixing live production

00:05:55,620 --> 00:05:59,310
issues but also going back and fixing

00:05:57,360 --> 00:06:02,760
some of the architectural choices that

00:05:59,310 --> 00:06:04,860
we had also prior to prioritizing bug

00:06:02,760 --> 00:06:06,840
fixes with respect to features was

00:06:04,860 --> 00:06:08,310
really important because product is

00:06:06,840 --> 00:06:09,599
always like hey let's push out features

00:06:08,310 --> 00:06:11,099
but we were like well we have to fix

00:06:09,599 --> 00:06:14,039
this bug otherwise you know we're gonna

00:06:11,099 --> 00:06:16,410
be on call like older all the time and

00:06:14,039 --> 00:06:18,599
also being make sure making sure that we

00:06:16,410 --> 00:06:20,760
could rotate our feature team into

00:06:18,599 --> 00:06:23,190
on-call was really important because

00:06:20,760 --> 00:06:24,720
it's important to be able to write great

00:06:23,190 --> 00:06:26,520
code but if you're not actually

00:06:24,720 --> 00:06:27,900
supporting that code in production you

00:06:26,520 --> 00:06:29,039
don't know how it works so you don't

00:06:27,900 --> 00:06:31,110
know whether the choices you're making

00:06:29,039 --> 00:06:33,050
at development time are the right

00:06:31,110 --> 00:06:36,479
choices when you're actually running it

00:06:33,050 --> 00:06:38,669
I want to switch to something real quick

00:06:36,479 --> 00:06:40,380
so once we've deployed it we have a lot

00:06:38,669 --> 00:06:41,730
of customers kind of using this

00:06:40,380 --> 00:06:45,270
a lot of folks want to use kubernetes

00:06:41,730 --> 00:06:47,520
for some specific use case I do a lot of

00:06:45,270 --> 00:06:49,530
folks a lot of customers etc and they

00:06:47,520 --> 00:06:51,540
were like how do you use kubernetes to

00:06:49,530 --> 00:06:53,880
run oracle database and that you know

00:06:51,540 --> 00:06:56,160
that's a common question but I'm sure it

00:06:53,880 --> 00:06:59,280
resonates to all of you in you know your

00:06:56,160 --> 00:07:01,830
own way and the one thing I want to kind

00:06:59,280 --> 00:07:03,720
of stress on is kubernetes itself it's a

00:07:01,830 --> 00:07:05,610
great generic platform it can do a lot

00:07:03,720 --> 00:07:08,220
of things and you can build a lot of

00:07:05,610 --> 00:07:09,480
platforms etc on it but remember that

00:07:08,220 --> 00:07:11,220
it's not the only thing out there

00:07:09,480 --> 00:07:13,980
there's a lot of other choices as well

00:07:11,220 --> 00:07:15,360
you can you know if you're on cloud you

00:07:13,980 --> 00:07:16,800
can use regardless of what cloud your

00:07:15,360 --> 00:07:18,300
honor if your Oracle cloud Amazon

00:07:16,800 --> 00:07:20,700
whatever there might be a native service

00:07:18,300 --> 00:07:22,020
that you could use or also there might

00:07:20,700 --> 00:07:23,640
be different ways to build the same

00:07:22,020 --> 00:07:26,130
thing so you might be able to use

00:07:23,640 --> 00:07:28,080
infrastructures code terraform etc you

00:07:26,130 --> 00:07:31,620
might be able to use serverless to you

00:07:28,080 --> 00:07:34,470
know solve the same problem so to kind

00:07:31,620 --> 00:07:36,000
of summarize all of this you know we as

00:07:34,470 --> 00:07:38,340
engineers we want to build like the

00:07:36,000 --> 00:07:40,860
coolest stuff building platforms that

00:07:38,340 --> 00:07:42,930
you know a lot of people use so that's

00:07:40,860 --> 00:07:45,390
kind of the dream to be in engineering

00:07:42,930 --> 00:07:47,910
but also you know kind of make sure

00:07:45,390 --> 00:07:49,740
you're being empowered as your team as

00:07:47,910 --> 00:07:52,710
your development team oh sorry sorry

00:07:49,740 --> 00:07:54,600
team etc watch for burnout and then

00:07:52,710 --> 00:07:57,030
don't just randomly collect metrics

00:07:54,600 --> 00:07:58,830
because you're collecting metrics have a

00:07:57,030 --> 00:08:01,050
plan for how are you gonna use use it

00:07:58,830 --> 00:08:04,590
and make sure you're picking the right

00:08:01,050 --> 00:08:06,420
platform so if you like a lot of the

00:08:04,590 --> 00:08:07,620
stuff I've heard talked about come chat

00:08:06,420 --> 00:08:09,420
realists in our boots we're kind of

00:08:07,620 --> 00:08:11,310
doing a lot of demos and stuff with

00:08:09,420 --> 00:08:14,820
respect to cloud native we have a

00:08:11,310 --> 00:08:16,790
session later today at 11:35 and we'll

00:08:14,820 --> 00:08:19,620
be doing a raffle in our booth for

00:08:16,790 --> 00:08:21,000
headphones and a bb-8 droid we're also

00:08:19,620 --> 00:08:23,250
being Lightning talks to the boots so

00:08:21,000 --> 00:08:24,820
come by and hope everybody has a great

00:08:23,250 --> 00:08:28,899
velocity thank you

00:08:24,820 --> 00:08:28,899
[Applause]

00:08:33,310 --> 00:08:35,370

YouTube URL: https://www.youtube.com/watch?v=-_WrsQywhkc


