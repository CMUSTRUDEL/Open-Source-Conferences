Title: Eric Pugh – How to measure Diversity of Search Results
Publication date: 2021-06-23
Playlist: Berlin Buzzwords 2021 #bbuzz
Description: 
	Traditionally search has been all about "how do I find the one (or five) documents that answer my question?". However, what about when I want to encourage serendipity and discovery (common in research use cases)? In those cases, I care about increasing the diversity of my search results, while still ensuring the precision (i.e relevance) is decent. This talk will provide a simple formula for measuring your search results diversity (using Apache Zeppelin as a notebook), and offer some concrete tips on surfacing diverse search results.

Speaker: Eric Pugh – https://2021.berlinbuzzwords.de/member/eric-pugh

More: https://2021.berlinbuzzwords.de/session/how-measure-diversity-search-results
Captions: 
	00:00:08,080 --> 00:00:11,280
yeah so

00:00:08,880 --> 00:00:12,480
super excited to be here i think this is

00:00:11,280 --> 00:00:15,519
my third

00:00:12,480 --> 00:00:17,199
uh berlin buzzwords uh so looking

00:00:15,519 --> 00:00:20,400
forward to seeing everybody

00:00:17,199 --> 00:00:22,800
in person the next time around um

00:00:20,400 --> 00:00:24,320
so today i'm going to talk about how to

00:00:22,800 --> 00:00:27,680
measure diversity

00:00:24,320 --> 00:00:31,599
of your search results so um

00:00:27,680 --> 00:00:33,120
just real quickly um yo i'm

00:00:31,599 --> 00:00:35,280
one of the co-founders of open source

00:00:33,120 --> 00:00:36,559
connections been involved in search for

00:00:35,280 --> 00:00:38,960
a long time

00:00:36,559 --> 00:00:40,800
uh steward a couple of open source

00:00:38,960 --> 00:00:44,399
projects that are around uh

00:00:40,800 --> 00:00:44,960
improving search quality and excited

00:00:44,399 --> 00:00:48,480
that i

00:00:44,960 --> 00:00:48,960
i joined the apache solar pmc this year

00:00:48,480 --> 00:00:54,160
so

00:00:48,960 --> 00:00:57,280
uh that was a life goal so um

00:00:54,160 --> 00:01:00,559
so search

00:00:57,280 --> 00:01:04,479
can be thought of as a struggle

00:01:00,559 --> 00:01:07,840
a battle between precision

00:01:04,479 --> 00:01:09,920
and recall recall

00:01:07,840 --> 00:01:12,240
for those of you who aren't familiar

00:01:09,920 --> 00:01:15,280
with these two terms is

00:01:12,240 --> 00:01:16,240
a measurement of how well you're

00:01:15,280 --> 00:01:19,040
returning

00:01:16,240 --> 00:01:20,560
all the documents that might be about a

00:01:19,040 --> 00:01:23,920
query

00:01:20,560 --> 00:01:25,119
when you focus on recall you're looking

00:01:23,920 --> 00:01:29,119
to return

00:01:25,119 --> 00:01:31,600
more documents about a topic

00:01:29,119 --> 00:01:34,159
and you're really expecting many more

00:01:31,600 --> 00:01:36,720
search results to be returned

00:01:34,159 --> 00:01:39,040
this is really common in sort of

00:01:36,720 --> 00:01:42,399
research use cases

00:01:39,040 --> 00:01:44,399
or discovery use cases when

00:01:42,399 --> 00:01:45,920
you know you don't really know what

00:01:44,399 --> 00:01:48,640
you're looking for

00:01:45,920 --> 00:01:52,000
and you want to kind of see everything

00:01:48,640 --> 00:01:52,000
related to a topic

00:01:52,479 --> 00:01:58,640
in contrast to that we have

00:01:55,600 --> 00:02:02,000
precision precision

00:01:58,640 --> 00:02:05,759
is all about returning

00:02:02,000 --> 00:02:07,520
a specific document that matches a query

00:02:05,759 --> 00:02:09,360
and you want to be really really

00:02:07,520 --> 00:02:12,959
accurate

00:02:09,360 --> 00:02:16,400
and i think siri

00:02:12,959 --> 00:02:19,040
when is the 2021 berlin buzzwords

00:02:16,400 --> 00:02:22,959
conference happening

00:02:19,040 --> 00:02:26,160
i found this on the web

00:02:22,959 --> 00:02:27,360
so i don't know if that audio of siri me

00:02:26,160 --> 00:02:30,560
asking siri

00:02:27,360 --> 00:02:31,360
when berlin buzzwords came through or

00:02:30,560 --> 00:02:34,720
not

00:02:31,360 --> 00:02:37,920
but as you saw real briefly there siri

00:02:34,720 --> 00:02:40,239
actually found the right web page

00:02:37,920 --> 00:02:42,640
that's had the date that berlin

00:02:40,239 --> 00:02:46,319
buzzwords was happening this week

00:02:42,640 --> 00:02:49,599
so like voice search applications

00:02:46,319 --> 00:02:53,040
um a lot of mobile use cases

00:02:49,599 --> 00:02:56,400
you're a lot more interested in looking

00:02:53,040 --> 00:03:01,200
at precision i'm looking for one

00:02:56,400 --> 00:03:05,200
great result and there's a lot of

00:03:01,200 --> 00:03:06,640
metrics that we can use to understand

00:03:05,200 --> 00:03:10,000
our search quality

00:03:06,640 --> 00:03:13,360
on those two axes um

00:03:10,000 --> 00:03:17,840
and tools actually that will help you

00:03:13,360 --> 00:03:21,200
understand them so for example

00:03:17,840 --> 00:03:23,120
i steward cupid you can see a link to

00:03:21,200 --> 00:03:26,640
the github project there

00:03:23,120 --> 00:03:27,040
that is an open source project that lets

00:03:26,640 --> 00:03:29,840
you

00:03:27,040 --> 00:03:31,200
understand the quality of your search

00:03:29,840 --> 00:03:34,319
results

00:03:31,200 --> 00:03:37,440
and then tune them so here in this video

00:03:34,319 --> 00:03:40,560
you can see that i'm reading a set

00:03:37,440 --> 00:03:41,440
of pretty random documents related to a

00:03:40,560 --> 00:03:45,440
movie

00:03:41,440 --> 00:03:48,000
star wars some documentaries etc

00:03:45,440 --> 00:03:48,799
and you know i'm putting a number on it

00:03:48,000 --> 00:03:51,920
i'm saying

00:03:48,799 --> 00:03:55,439
these are not relevant documents

00:03:51,920 --> 00:03:59,040
and tools like cupid let me optimize

00:03:55,439 --> 00:04:00,319
my query here i am tweaking my solar

00:03:59,040 --> 00:04:03,200
query

00:04:00,319 --> 00:04:05,200
and i notice that i have a vote count

00:04:03,200 --> 00:04:05,920
field and so i'm going to go ahead and

00:04:05,200 --> 00:04:09,280
boost

00:04:05,920 --> 00:04:12,480
on my vote count and

00:04:09,280 --> 00:04:15,760
this and then i'm going to do my search

00:04:12,480 --> 00:04:16,720
and there we go i have some better

00:04:15,760 --> 00:04:21,120
search results

00:04:16,720 --> 00:04:23,919
the force awakens the original star wars

00:04:21,120 --> 00:04:27,120
it's not perfect there's the truman show

00:04:23,919 --> 00:04:27,120
but also rogue one

00:04:27,199 --> 00:04:32,160
so um however

00:04:32,199 --> 00:04:37,520
optimizing just for highly rated

00:04:36,000 --> 00:04:42,400
documents

00:04:37,520 --> 00:04:45,440
isn't enough because it focuses too much

00:04:42,400 --> 00:04:48,880
on just rating as you kind of saw

00:04:45,440 --> 00:04:50,479
me doing there just rating individual

00:04:48,880 --> 00:04:54,479
documents

00:04:50,479 --> 00:04:57,280
and it doesn't take into account

00:04:54,479 --> 00:04:58,639
uh the relationships between those

00:04:57,280 --> 00:05:02,320
documents

00:04:58,639 --> 00:05:06,479
in fact we might be doing our users

00:05:02,320 --> 00:05:09,199
a disservice by returning them

00:05:06,479 --> 00:05:10,720
trying to give them exactly what they

00:05:09,199 --> 00:05:15,520
wanted

00:05:10,720 --> 00:05:19,199
instead of maybe what they really want

00:05:15,520 --> 00:05:22,479
so let's take a segway

00:05:19,199 --> 00:05:26,080
over to the world of e-commerce

00:05:22,479 --> 00:05:30,000
search optimization where i feel like

00:05:26,080 --> 00:05:32,160
a lot of really interesting innovations

00:05:30,000 --> 00:05:33,360
in improving search has been taking

00:05:32,160 --> 00:05:35,280
place

00:05:33,360 --> 00:05:37,360
and i think where we can get a lot of

00:05:35,280 --> 00:05:40,400
valuable lessons for those of us who are

00:05:37,360 --> 00:05:43,039
maybe more in the research or discovery

00:05:40,400 --> 00:05:45,520
domains in how to optimize search

00:05:43,039 --> 00:05:45,520
results

00:05:50,000 --> 00:05:56,960
here is a slide courtesy of

00:05:53,280 --> 00:06:00,000
andreas wagner founder and cto

00:05:56,960 --> 00:06:01,360
of commerce experts from his wonderful

00:06:00,000 --> 00:06:04,639
presentation

00:06:01,360 --> 00:06:06,000
measuring e-commerce findability that he

00:06:04,639 --> 00:06:09,199
gave at mises

00:06:06,000 --> 00:06:12,560
a few years ago and he

00:06:09,199 --> 00:06:16,240
presented research that they had done

00:06:12,560 --> 00:06:19,759
on comparing what users

00:06:16,240 --> 00:06:20,319
are actually clicking on versus what you

00:06:19,759 --> 00:06:23,840
might

00:06:20,319 --> 00:06:27,840
predict based on traditional optimized

00:06:23,840 --> 00:06:30,960
techniques like what i just showed you

00:06:27,840 --> 00:06:33,600
cupid uh does

00:06:30,960 --> 00:06:34,000
this was a really important lesson for

00:06:33,600 --> 00:06:36,400
me to

00:06:34,000 --> 00:06:39,280
learn because i am so involved in the

00:06:36,400 --> 00:06:43,919
cupid community

00:06:39,280 --> 00:06:47,199
when you focus on precision

00:06:43,919 --> 00:06:48,080
you would consider the results on the

00:06:47,199 --> 00:06:51,199
left

00:06:48,080 --> 00:06:52,080
as much better than the results on the

00:06:51,199 --> 00:06:55,680
right

00:06:52,080 --> 00:06:57,120
correct that is what uh using cupid and

00:06:55,680 --> 00:07:00,160
rating documents

00:06:57,120 --> 00:07:01,199
would suggest on the left are all

00:07:00,160 --> 00:07:04,720
bicycles

00:07:01,199 --> 00:07:06,880
exactly what the user was asking

00:07:04,720 --> 00:07:08,800
whereas when we look at those nine

00:07:06,880 --> 00:07:11,840
documents on the right

00:07:08,800 --> 00:07:14,880
well it's kind of a mishmash right

00:07:11,840 --> 00:07:19,520
we have bicycles but we

00:07:14,880 --> 00:07:23,680
also have clothing we have accessories

00:07:19,520 --> 00:07:26,720
uh maybe some tools right uh

00:07:23,680 --> 00:07:26,720
you know um

00:07:27,039 --> 00:07:35,680
you know the precision isn't as great

00:07:32,560 --> 00:07:38,240
however looking at data analytics

00:07:35,680 --> 00:07:40,479
thank you for andreas for sharing this

00:07:38,240 --> 00:07:40,479
right

00:07:40,880 --> 00:07:47,680
the results here are the actual

00:07:44,160 --> 00:07:50,879
performance results from real users

00:07:47,680 --> 00:07:53,599
yes the results on the left

00:07:50,879 --> 00:07:55,599
are technically accurate as maybe an

00:07:53,599 --> 00:07:56,240
expert a subject matter expert would

00:07:55,599 --> 00:07:59,360
rate them

00:07:56,240 --> 00:08:00,720
right a zero to five rating and we give

00:07:59,360 --> 00:08:04,160
the ones on the left

00:08:00,720 --> 00:08:07,440
a five they're perfect

00:08:04,160 --> 00:08:08,319
whereas the results on the right we give

00:08:07,440 --> 00:08:12,160
a two

00:08:08,319 --> 00:08:16,000
according to expert rating but when we

00:08:12,160 --> 00:08:19,680
look at user engagement

00:08:16,000 --> 00:08:23,759
the results on the right

00:08:19,680 --> 00:08:28,560
do much better a lot more click through

00:08:23,759 --> 00:08:30,240
a lot more gross mean value of purchases

00:08:28,560 --> 00:08:31,759
and if you take a step back and think

00:08:30,240 --> 00:08:35,440
about it it does

00:08:31,759 --> 00:08:38,640
make intuitive sense to us as humans

00:08:35,440 --> 00:08:41,039
because we value diversity

00:08:38,640 --> 00:08:41,919
we recognize that those results on the

00:08:41,039 --> 00:08:45,360
left

00:08:41,919 --> 00:08:48,240
are a sterile monoculture of results

00:08:45,360 --> 00:08:49,680
and that while technically accurate

00:08:48,240 --> 00:08:51,440
especially if you think the way a

00:08:49,680 --> 00:08:53,920
machine might think

00:08:51,440 --> 00:08:55,040
it's definitely not as good as the ones

00:08:53,920 --> 00:08:58,560
on the right

00:08:55,040 --> 00:09:01,519
the search results on the right not only

00:08:58,560 --> 00:09:02,800
let me understand what bicycles this

00:09:01,519 --> 00:09:04,720
website has

00:09:02,800 --> 00:09:06,560
but also what are all the products

00:09:04,720 --> 00:09:09,440
related to bicycling

00:09:06,560 --> 00:09:11,920
that i might need like a helmet like

00:09:09,440 --> 00:09:13,600
bike pants

00:09:11,920 --> 00:09:15,600
and makes the connection to other

00:09:13,600 --> 00:09:19,680
products i'll need

00:09:15,600 --> 00:09:20,240
now having said that i do also want to

00:09:19,680 --> 00:09:22,959
point

00:09:20,240 --> 00:09:24,160
out that the example on the right shows

00:09:22,959 --> 00:09:27,279
some next level

00:09:24,160 --> 00:09:30,480
search tuning because you notice

00:09:27,279 --> 00:09:34,480
that they made sure that the three

00:09:30,480 --> 00:09:37,600
actual bikes showed up at the top

00:09:34,480 --> 00:09:40,880
followed by the accessories

00:09:37,600 --> 00:09:43,600
of the that are related to bicycling

00:09:40,880 --> 00:09:44,959
and they show a nice diversity of those

00:09:43,600 --> 00:09:48,000
products

00:09:44,959 --> 00:09:49,920
that is not easy to do

00:09:48,000 --> 00:09:52,720
i think the only way they might have

00:09:49,920 --> 00:09:56,160
improved is if those first three

00:09:52,720 --> 00:09:58,480
bikes one had been maybe a mountain bike

00:09:56,160 --> 00:10:01,760
one had been a road bike and maybe one

00:09:58,480 --> 00:10:01,760
had been a hybrid bike

00:10:03,440 --> 00:10:09,920
so i think of this as whole

00:10:06,800 --> 00:10:13,519
page relevancy when you start

00:10:09,920 --> 00:10:16,399
looking at the relationships between

00:10:13,519 --> 00:10:18,240
those individual results and how they

00:10:16,399 --> 00:10:21,200
contribute to the whole

00:10:18,240 --> 00:10:21,680
and you look at this bad results on the

00:10:21,200 --> 00:10:25,200
left

00:10:21,680 --> 00:10:26,320
better results on the right so we have

00:10:25,200 --> 00:10:32,399
an intuitive

00:10:26,320 --> 00:10:36,959
sense based on research

00:10:32,399 --> 00:10:40,640
that diversity in our search results

00:10:36,959 --> 00:10:43,920
is a good thing however

00:10:40,640 --> 00:10:45,519
this begs the question how do we put a

00:10:43,920 --> 00:10:48,880
number on diversity

00:10:45,519 --> 00:10:52,560
of our own search results

00:10:48,880 --> 00:10:53,440
we all know that old saw that you can't

00:10:52,560 --> 00:10:56,560
improve

00:10:53,440 --> 00:10:59,360
what you can't measure so

00:10:56,560 --> 00:11:00,079
the today in this talk i'm going to

00:10:59,360 --> 00:11:03,200
share one

00:11:00,079 --> 00:11:03,839
very practical approach that i've been

00:11:03,200 --> 00:11:06,480
using

00:11:03,839 --> 00:11:09,279
to try and measure the diversity of my

00:11:06,480 --> 00:11:09,279
search results

00:11:10,480 --> 00:11:14,000
first off i need to introduce the idea

00:11:13,680 --> 00:11:17,279
of

00:11:14,000 --> 00:11:21,360
entropy and how we're going to use it

00:11:17,279 --> 00:11:24,560
to understand diversity of search

00:11:21,360 --> 00:11:30,000
in layman's terms we describe

00:11:24,560 --> 00:11:33,440
entropy as a measure of uncertainty

00:11:30,000 --> 00:11:36,640
more specifically i am going to

00:11:33,440 --> 00:11:37,920
show you a variant called shannon's

00:11:36,640 --> 00:11:40,560
entropy

00:11:37,920 --> 00:11:42,320
which is named after that guy there

00:11:40,560 --> 00:11:44,720
claude shannon

00:11:42,320 --> 00:11:46,079
who i recently learned is actually maybe

00:11:44,720 --> 00:11:50,320
considered one of the found

00:11:46,079 --> 00:11:50,320
the founder of information theory

00:11:50,880 --> 00:11:54,160
there's two great links that go very

00:11:53,600 --> 00:11:57,040
deep

00:11:54,160 --> 00:11:57,680
into the underlying thinking and math of

00:11:57,040 --> 00:12:00,480
what is

00:11:57,680 --> 00:12:01,120
entropy however for the purpose of this

00:12:00,480 --> 00:12:04,720
talk

00:12:01,120 --> 00:12:10,399
i'm gonna keep it pretty high level

00:12:04,720 --> 00:12:11,920
and not go into the weeds

00:12:10,399 --> 00:12:14,160
i'm going to take you through the

00:12:11,920 --> 00:12:17,920
process of measuring

00:12:14,160 --> 00:12:21,040
diversity is based on the idea

00:12:17,920 --> 00:12:22,399
that we want our documents that show up

00:12:21,040 --> 00:12:25,519
above the fold

00:12:22,399 --> 00:12:28,560
in our search results to not all

00:12:25,519 --> 00:12:32,240
be from one source

00:12:28,560 --> 00:12:36,000
to all look the same but instead

00:12:32,240 --> 00:12:39,360
that we want our results to be from many

00:12:36,000 --> 00:12:42,160
different sources

00:12:39,360 --> 00:12:43,760
if all of our documents that are showing

00:12:42,160 --> 00:12:46,399
up above the fold

00:12:43,760 --> 00:12:47,839
come from one source then we have an

00:12:46,399 --> 00:12:50,000
entropy of zero

00:12:47,839 --> 00:12:53,120
i.e there's no uncertainty everything

00:12:50,000 --> 00:12:56,240
looks the exact same

00:12:53,120 --> 00:12:56,880
we know that 100 of the results came

00:12:56,240 --> 00:13:00,160
from just

00:12:56,880 --> 00:13:03,360
one source however

00:13:00,160 --> 00:13:05,519
if we have 10 documents from 10

00:13:03,360 --> 00:13:07,040
different sources then we would have an

00:13:05,519 --> 00:13:10,079
entropy of one

00:13:07,040 --> 00:13:12,240
i.e very significant uncertainty

00:13:10,079 --> 00:13:14,240
per document you can't predict each

00:13:12,240 --> 00:13:18,160
document where it came from

00:13:14,240 --> 00:13:20,959
because they're all evenly distributed

00:13:18,160 --> 00:13:22,240
it's sort of i found this sort of a

00:13:20,959 --> 00:13:25,519
little confusing

00:13:22,240 --> 00:13:27,200
and so i tried to write out a little bit

00:13:25,519 --> 00:13:30,720
simpler like

00:13:27,200 --> 00:13:34,079
want more diversity then you want

00:13:30,720 --> 00:13:38,320
more uncertainty than you want more

00:13:34,079 --> 00:13:41,120
entropy like high entropy good

00:13:38,320 --> 00:13:42,320
and then if your search results are very

00:13:41,120 --> 00:13:44,480
similar

00:13:42,320 --> 00:13:46,079
then you know where they're all coming

00:13:44,480 --> 00:13:51,040
from so that's very

00:13:46,079 --> 00:13:53,600
low entropy low entropy bad

00:13:51,040 --> 00:13:55,360
it took me a while to get my head around

00:13:53,600 --> 00:13:55,839
this because i always sort of thought

00:13:55,360 --> 00:13:59,839
like

00:13:55,839 --> 00:14:03,199
entropy noise in the system those are

00:13:59,839 --> 00:14:06,480
bad things yet when it comes here to

00:14:03,199 --> 00:14:08,560
sort of diversity and measuring where

00:14:06,480 --> 00:14:09,760
our search results are from which source

00:14:08,560 --> 00:14:12,399
is providing them

00:14:09,760 --> 00:14:13,760
the idea that there is more noise more

00:14:12,399 --> 00:14:16,240
entropy is good

00:14:13,760 --> 00:14:18,639
uh took me a little bit to get my head

00:14:16,240 --> 00:14:18,639
around

00:14:23,760 --> 00:14:29,279
so let's see if we can look at this

00:14:26,560 --> 00:14:33,680
visually

00:14:29,279 --> 00:14:36,880
by looking at some actual search results

00:14:33,680 --> 00:14:40,079
so um

00:14:36,880 --> 00:14:43,120
i did a query for mark twain

00:14:40,079 --> 00:14:44,480
on the united states library of congress

00:14:43,120 --> 00:14:48,000
website

00:14:44,480 --> 00:14:51,279
and i wanted to understand

00:14:48,000 --> 00:14:52,480
which documents are being shown above

00:14:51,279 --> 00:14:56,240
the fold

00:14:52,480 --> 00:14:58,959
from which formats what are the original

00:14:56,240 --> 00:15:01,040
formats of those documents

00:14:58,959 --> 00:15:02,560
so for those of you who don't know mark

00:15:01,040 --> 00:15:05,120
twain is the pen

00:15:02,560 --> 00:15:05,920
name of samuel clemens who was an

00:15:05,120 --> 00:15:08,959
american

00:15:05,920 --> 00:15:11,040
writer humorist and publisher

00:15:08,959 --> 00:15:13,440
who lived in the second half of the 19th

00:15:11,040 --> 00:15:17,440
century and has been considered

00:15:13,440 --> 00:15:20,800
the father of american literature

00:15:17,440 --> 00:15:23,440
he wrote tom sawyer for example

00:15:20,800 --> 00:15:25,440
so when i look at these documents here

00:15:23,440 --> 00:15:28,399
in the original format

00:15:25,440 --> 00:15:30,320
uh it's interesting to note that mark

00:15:28,399 --> 00:15:32,240
twain was a newspaper man

00:15:30,320 --> 00:15:34,000
so it sort of makes sense right he was

00:15:32,240 --> 00:15:34,959
he worked in newspapers for years

00:15:34,000 --> 00:15:36,560
writing

00:15:34,959 --> 00:15:38,240
so it makes sense that there's a lot of

00:15:36,560 --> 00:15:41,839
artifacts related

00:15:38,240 --> 00:15:44,160
to newspapers but he also wrote books

00:15:41,839 --> 00:15:45,120
so it makes sense that you know he's

00:15:44,160 --> 00:15:48,240
mentioned

00:15:45,120 --> 00:15:50,399
or referenced in various books

00:15:48,240 --> 00:15:52,000
but interestingly in the library

00:15:50,399 --> 00:15:55,680
congress holdings

00:15:52,000 --> 00:15:59,199
there's a lot of other artifacts that

00:15:55,680 --> 00:16:02,480
mark twain is referenced in

00:15:59,199 --> 00:16:05,839
for example uh he

00:16:02,480 --> 00:16:08,560
uh is listed in various maps there's a

00:16:05,839 --> 00:16:11,600
mark twain national forest

00:16:08,560 --> 00:16:12,720
there's a musical called mark twain so

00:16:11,600 --> 00:16:15,440
there's a lot of

00:16:12,720 --> 00:16:19,040
different sources for finding out

00:16:15,440 --> 00:16:19,040
information about mark twain

00:16:20,079 --> 00:16:25,519
the other interesting thing is that this

00:16:22,720 --> 00:16:31,199
website has this strong concept of

00:16:25,519 --> 00:16:33,600
available all online or all items

00:16:31,199 --> 00:16:35,519
but you sort of expect them to pretty

00:16:33,600 --> 00:16:38,959
much return the same things

00:16:35,519 --> 00:16:41,680
because online we have 37 000 documents

00:16:38,959 --> 00:16:42,880
and the total holdings that are related

00:16:41,680 --> 00:16:46,320
to mark twain

00:16:42,880 --> 00:16:49,519
is 40 000. so i sort of expected

00:16:46,320 --> 00:16:52,079
in messing around with this that i would

00:16:49,519 --> 00:16:56,240
get the same results

00:16:52,079 --> 00:16:59,279
by all of the specific formats

00:16:56,240 --> 00:17:00,240
so i went ahead and did a search of what

00:16:59,279 --> 00:17:04,240
was available

00:17:00,240 --> 00:17:07,360
online filtering in

00:17:04,240 --> 00:17:10,240
and here is the long

00:17:07,360 --> 00:17:11,600
search results page chopped up to kind

00:17:10,240 --> 00:17:15,520
of fit in this slide

00:17:11,600 --> 00:17:16,160
here and uh when i look at what's

00:17:15,520 --> 00:17:19,839
available

00:17:16,160 --> 00:17:23,120
online um it there's a broad

00:17:19,839 --> 00:17:24,400
selection of different documents we have

00:17:23,120 --> 00:17:27,839
some web pages

00:17:24,400 --> 00:17:31,919
being returned we have some books

00:17:27,839 --> 00:17:33,360
we have some music so i'm guessing

00:17:31,919 --> 00:17:36,799
pretty high diversity

00:17:33,360 --> 00:17:38,320
of source formats and now i'd like to go

00:17:36,799 --> 00:17:41,200
ahead and put a number on it

00:17:38,320 --> 00:17:41,200
so i can measure

00:17:42,000 --> 00:17:47,280
i then thought okay well let me try the

00:17:44,880 --> 00:17:51,360
other query let me look at the

00:17:47,280 --> 00:17:52,960
all items versus what's available online

00:17:51,360 --> 00:17:55,440
just to kind of get a sense of what's

00:17:52,960 --> 00:17:59,039
the difference sort of an intuitive

00:17:55,440 --> 00:18:02,320
sense and interestingly i was

00:17:59,039 --> 00:18:05,679
really surprised it's all

00:18:02,320 --> 00:18:09,039
books individual books being returned

00:18:05,679 --> 00:18:10,000
where did all the web pages go it's the

00:18:09,039 --> 00:18:12,880
same query

00:18:10,000 --> 00:18:14,720
mark twain and i thought it would be

00:18:12,880 --> 00:18:17,120
more or less the same data set

00:18:14,720 --> 00:18:18,799
since one had thirty seven thousand one

00:18:17,120 --> 00:18:22,799
had forty thousand

00:18:18,799 --> 00:18:25,039
but my results are very different

00:18:22,799 --> 00:18:26,000
i also was a little surprised because if

00:18:25,039 --> 00:18:28,640
anything

00:18:26,000 --> 00:18:29,360
i expected lots of newspapers since that

00:18:28,640 --> 00:18:31,679
was the most

00:18:29,360 --> 00:18:32,799
dominant single source format that they

00:18:31,679 --> 00:18:35,440
had right

00:18:32,799 --> 00:18:37,840
i expected lots of newspapers to show up

00:18:35,440 --> 00:18:40,080
in here

00:18:37,840 --> 00:18:41,280
so we've looked at two different search

00:18:40,080 --> 00:18:44,799
queries

00:18:41,280 --> 00:18:48,000
and let's see if we can use shannon's

00:18:44,799 --> 00:18:51,440
entropy to try and understand

00:18:48,000 --> 00:18:52,240
put a number on how diverse those set of

00:18:51,440 --> 00:18:56,480
documents

00:18:52,240 --> 00:18:59,120
are according to their original format

00:18:56,480 --> 00:19:00,000
here you can see a bitly link you are

00:18:59,120 --> 00:19:03,440
welcome

00:19:00,000 --> 00:19:05,600
to go to bitly slash measure

00:19:03,440 --> 00:19:07,120
dash diversity and you'll get to see the

00:19:05,600 --> 00:19:08,880
same google spreadsheet that i'm going

00:19:07,120 --> 00:19:10,640
to mess around with

00:19:08,880 --> 00:19:13,760
and we're gonna actually look at a

00:19:10,640 --> 00:19:13,760
little bit of math

00:19:18,240 --> 00:19:24,240
so the tab that i'm on

00:19:21,280 --> 00:19:26,480
is the all library of congress mark

00:19:24,240 --> 00:19:30,640
twain's search

00:19:26,480 --> 00:19:34,400
so what i did here is i went through

00:19:30,640 --> 00:19:36,000
the first uh 24 documents that were sort

00:19:34,400 --> 00:19:38,799
of above the fold

00:19:36,000 --> 00:19:39,679
and i classified all of the document

00:19:38,799 --> 00:19:43,280
sources

00:19:39,679 --> 00:19:47,039
so you can see in rank one it was a book

00:19:43,280 --> 00:19:50,160
two it was a photo print drawing

00:19:47,039 --> 00:19:53,440
three it's another book four

00:19:50,160 --> 00:19:55,919
and so on and so forth right and then i

00:19:53,440 --> 00:19:59,440
aggregated those up in here to my

00:19:55,919 --> 00:19:59,440
various categories

00:19:59,520 --> 00:20:07,280
and summed them up we have 24 documents

00:20:04,159 --> 00:20:08,640
term total 24. and then the individual

00:20:07,280 --> 00:20:11,039
counts

00:20:08,640 --> 00:20:12,320
so when you look at this you can see

00:20:11,039 --> 00:20:15,760
that in this first one

00:20:12,320 --> 00:20:18,799
we got back 20 books only

00:20:15,760 --> 00:20:22,080
one web page and three

00:20:18,799 --> 00:20:24,720
photo and print drawings

00:20:22,080 --> 00:20:25,520
column e gives you a little bit of a

00:20:24,720 --> 00:20:28,480
sense

00:20:25,520 --> 00:20:30,880
of what the ratio of documents are you

00:20:28,480 --> 00:20:34,080
can see that we have a preponderance

00:20:30,880 --> 00:20:38,400
83 percent of our documents were booked

00:20:34,080 --> 00:20:38,400
and printed uh material

00:20:38,799 --> 00:20:45,200
13 were photos and everything else

00:20:42,960 --> 00:20:47,760
four percent one web page and everything

00:20:45,200 --> 00:20:50,760
else didn't even show up

00:20:47,760 --> 00:20:52,720
so columns f and g are some

00:20:50,760 --> 00:20:55,760
normalization

00:20:52,720 --> 00:20:58,799
and eventually in column h we produce

00:20:55,760 --> 00:21:02,000
a number shannon's entropy

00:20:58,799 --> 00:21:05,039
that says how diverse the search results

00:21:02,000 --> 00:21:07,919
are with zero being

00:21:05,039 --> 00:21:08,400
no diversity at all and the higher the

00:21:07,919 --> 00:21:11,600
number

00:21:08,400 --> 00:21:14,640
the more diverse the search results are

00:21:11,600 --> 00:21:16,159
and as you can see when we looked at all

00:21:14,640 --> 00:21:20,080
the results

00:21:16,159 --> 00:21:23,360
the calculation is 0.78

00:21:20,080 --> 00:21:27,440
is our entropy number which is not

00:21:23,360 --> 00:21:30,559
very far from zero meaning these results

00:21:27,440 --> 00:21:32,640
have almost no entropy i.e these results

00:21:30,559 --> 00:21:35,200
are not diverse at all

00:21:32,640 --> 00:21:36,080
when you look at your mark twain results

00:21:35,200 --> 00:21:38,159
through the lens

00:21:36,080 --> 00:21:39,840
of the original formats of these

00:21:38,159 --> 00:21:42,640
documents

00:21:39,840 --> 00:21:44,000
so if you're a researcher right and

00:21:42,640 --> 00:21:46,720
you're looking at that first

00:21:44,000 --> 00:21:47,760
10 results you're not really getting a

00:21:46,720 --> 00:21:50,159
sense of

00:21:47,760 --> 00:21:50,960
what are all the holdings at the library

00:21:50,159 --> 00:21:52,799
of congress

00:21:50,960 --> 00:21:54,720
related to mark twain that might be

00:21:52,799 --> 00:21:57,200
interesting

00:21:54,720 --> 00:21:59,679
now let's jump to the second tab

00:21:57,200 --> 00:22:02,480
available online

00:21:59,679 --> 00:22:03,679
the same process looking through the top

00:22:02,480 --> 00:22:06,720
24 results

00:22:03,679 --> 00:22:09,360
categorizing and already we see

00:22:06,720 --> 00:22:10,400
right photo print drawing another photo

00:22:09,360 --> 00:22:13,400
print web page

00:22:10,400 --> 00:22:14,559
photo web more web pages book

00:22:13,400 --> 00:22:16,640
intuitively

00:22:14,559 --> 00:22:18,799
we already know that we're getting a

00:22:16,640 --> 00:22:21,760
more diverse set of search results

00:22:18,799 --> 00:22:22,559
based on the original format same

00:22:21,760 --> 00:22:25,520
process

00:22:22,559 --> 00:22:27,360
as before we look at our accounts and

00:22:25,520 --> 00:22:30,640
you'll notice right again

00:22:27,360 --> 00:22:31,520
we have you know a close tie between web

00:22:30,640 --> 00:22:34,720
pages

00:22:31,520 --> 00:22:38,000
nine results photos 42

00:22:34,720 --> 00:22:41,440
our nine results 38

00:22:38,000 --> 00:22:45,520
photos 10 results 42

00:22:41,440 --> 00:22:48,640
and then even annotated music shows up

00:22:45,520 --> 00:22:50,320
so none of these categories is a

00:22:48,640 --> 00:22:52,640
preponderance the way our other

00:22:50,320 --> 00:22:55,360
algorithm did

00:22:52,640 --> 00:22:55,760
and then if we look further over we see

00:22:55,360 --> 00:22:58,000
that

00:22:55,760 --> 00:22:59,679
our entropy number that we're

00:22:58,000 --> 00:23:03,520
calculating

00:22:59,679 --> 00:23:06,880
is 1.81 which is a

00:23:03,520 --> 00:23:11,520
much higher number it's almost double

00:23:06,880 --> 00:23:11,520
what we had for the other album

00:23:11,919 --> 00:23:17,840
so what this is giving us is a view into

00:23:16,000 --> 00:23:21,280
diversity

00:23:17,840 --> 00:23:24,559
which lets us understand as we maybe do

00:23:21,280 --> 00:23:28,080
other optimizations like with tools like

00:23:24,559 --> 00:23:31,360
cupid are we tilting

00:23:28,080 --> 00:23:32,240
everything to being the exact same

00:23:31,360 --> 00:23:34,000
result

00:23:32,240 --> 00:23:37,520
they all look the same however if you

00:23:34,000 --> 00:23:40,880
want to do your your categorization

00:23:37,520 --> 00:23:43,360
or are we still preserving the diversity

00:23:40,880 --> 00:23:44,000
of different types of results that we

00:23:43,360 --> 00:23:47,200
think

00:23:44,000 --> 00:23:47,600
is important obviously we did it for

00:23:47,200 --> 00:23:50,400
just

00:23:47,600 --> 00:23:52,400
one query here but you could imagine

00:23:50,400 --> 00:23:53,760
doing it for a whole set of queries and

00:23:52,400 --> 00:23:57,600
then summing it up

00:23:53,760 --> 00:23:57,600
to give you that measurement of

00:24:02,840 --> 00:24:07,840
diversity

00:24:05,039 --> 00:24:08,159
so i did want to do one more thing in

00:24:07,840 --> 00:24:11,760
this

00:24:08,159 --> 00:24:15,279
talk which is talk about another really

00:24:11,760 --> 00:24:16,720
useful thing for for understanding the

00:24:15,279 --> 00:24:19,760
diversity of our

00:24:16,720 --> 00:24:21,840
uh diversity of our search results

00:24:19,760 --> 00:24:24,480
which is sometimes called category

00:24:21,840 --> 00:24:28,640
prediction

00:24:24,480 --> 00:24:32,799
which is the idea that sometimes

00:24:28,640 --> 00:24:36,320
you can use your data to predict

00:24:32,799 --> 00:24:39,039
a narrowing facet choice

00:24:36,320 --> 00:24:40,400
so in this screenshot here i've done a

00:24:39,039 --> 00:24:42,640
search for notebooks

00:24:40,400 --> 00:24:44,960
and if you look under the product types

00:24:42,640 --> 00:24:48,080
we got 193

00:24:44,960 --> 00:24:51,039
notebooks and then we

00:24:48,080 --> 00:24:52,640
also matched in the processor category

00:24:51,039 --> 00:24:55,760
10 documents

00:24:52,640 --> 00:24:57,919
the chromebook category 4.

00:24:55,760 --> 00:24:59,440
and you can see that if i choose the

00:24:57,919 --> 00:25:03,120
notebook product type

00:24:59,440 --> 00:25:06,240
catego the notebook product type

00:25:03,120 --> 00:25:09,360
as a category if i fast

00:25:06,240 --> 00:25:12,159
narrow down on it i get much

00:25:09,360 --> 00:25:13,360
better much more robust search results

00:25:12,159 --> 00:25:17,039
compared to

00:25:13,360 --> 00:25:20,799
what i have on the left so this can be

00:25:17,039 --> 00:25:24,000
a really powerful technique but

00:25:20,799 --> 00:25:26,960
you can't take it blindly

00:25:24,000 --> 00:25:28,799
here's another query for coffee maker

00:25:26,960 --> 00:25:31,760
and if you look at this

00:25:28,799 --> 00:25:33,520
can we just blindly choose the drip

00:25:31,760 --> 00:25:34,480
coffee maker because it returned the

00:25:33,520 --> 00:25:36,559
most

00:25:34,480 --> 00:25:38,000
of course not because then we would be

00:25:36,559 --> 00:25:41,279
filtering out

00:25:38,000 --> 00:25:45,200
say pod coffee makers espresso machines

00:25:41,279 --> 00:25:48,240
and all the rest so i want to go

00:25:45,200 --> 00:25:50,880
back to this

00:25:48,240 --> 00:25:51,440
back to the spreadsheet and i want to

00:25:50,880 --> 00:25:54,960
show

00:25:51,440 --> 00:25:58,960
one more tab chorus

00:25:54,960 --> 00:26:02,159
electronics category prediction

00:25:58,960 --> 00:26:04,159
and this is that same algorithm that we

00:26:02,159 --> 00:26:07,360
were just looking at

00:26:04,159 --> 00:26:10,960
but with this introducing this idea

00:26:07,360 --> 00:26:14,880
of a threshold of

00:26:10,960 --> 00:26:17,279
how much entropy or how much certainty

00:26:14,880 --> 00:26:18,400
do i need before i do category

00:26:17,279 --> 00:26:20,880
prediction

00:26:18,400 --> 00:26:22,799
so i've got three queries notebook intel

00:26:20,880 --> 00:26:25,120
chip and coffee maker

00:26:22,799 --> 00:26:26,480
and i can actually play with this

00:26:25,120 --> 00:26:29,520
threshold

00:26:26,480 --> 00:26:33,919
so if my threshold is

00:26:29,520 --> 00:26:36,960
the number needs to be above 0.70

00:26:33,919 --> 00:26:40,559
let's say i make it one

00:26:36,960 --> 00:26:42,640
you can see that the

00:26:40,559 --> 00:26:45,600
facet choice or the category that had

00:26:42,640 --> 00:26:45,600
the most matches

00:26:45,840 --> 00:26:50,320
turns green because it's so above my

00:26:48,799 --> 00:26:52,400
entropy measure

00:26:50,320 --> 00:26:53,520
and maybe i could use that to sort of

00:26:52,400 --> 00:26:58,240
auto pick

00:26:53,520 --> 00:27:00,080
that category well

00:26:58,240 --> 00:27:01,919
let me look at let me increase that

00:27:00,080 --> 00:27:03,760
number maybe i also

00:27:01,919 --> 00:27:05,200
you know here i have an example for

00:27:03,760 --> 00:27:09,360
processor uh

00:27:05,200 --> 00:27:12,559
intel chip query processor 461

00:27:09,360 --> 00:27:15,600
matches in processor 168

00:27:12,559 --> 00:27:18,080
in there so maybe i want to also include

00:27:15,600 --> 00:27:19,600
auto auto do category prediction with

00:27:18,080 --> 00:27:22,000
this

00:27:19,600 --> 00:27:24,720
i need to pick a number my threshold has

00:27:22,000 --> 00:27:28,399
to be higher than my entropy total

00:27:24,720 --> 00:27:28,399
so let's go with 2.5

00:27:29,440 --> 00:27:35,840
but then you can see yes

00:27:32,720 --> 00:27:37,760
it works for the query intel chip but

00:27:35,840 --> 00:27:40,399
there's my coffee maker

00:27:37,760 --> 00:27:41,600
if i go for that aggressive of a

00:27:40,399 --> 00:27:44,960
threshold

00:27:41,600 --> 00:27:48,399
then i'm also going to be narrowing

00:27:44,960 --> 00:27:48,799
odd drip coffee maker so you can use

00:27:48,399 --> 00:27:52,320
this

00:27:48,799 --> 00:27:55,520
threshold to find the right number that

00:27:52,320 --> 00:27:58,320
you know enables the category prediction

00:27:55,520 --> 00:28:01,120
for the most queries that make sense

00:27:58,320 --> 00:28:03,760
but without introducing any you know

00:28:01,120 --> 00:28:07,600
false matches false positives

00:28:03,760 --> 00:28:09,520
um but some may it may not match as well

00:28:07,600 --> 00:28:11,679
so i wanted to go ahead and share this

00:28:09,520 --> 00:28:12,640
as well uh because i think it's a great

00:28:11,679 --> 00:28:15,760
technique

00:28:12,640 --> 00:28:18,150
for if your data supports it

00:28:15,760 --> 00:28:21,229
optimize it

00:28:18,150 --> 00:28:21,229
[Music]

00:28:22,559 --> 00:28:26,880
so thank you very much i really

00:28:25,360 --> 00:28:30,159
appreciate the time

00:28:26,880 --> 00:28:32,640
and i'd love to compare notes um yo

00:28:30,159 --> 00:28:34,880
that's why i shared this google doc i'd

00:28:32,640 --> 00:28:37,279
love to hear what other people are doing

00:28:34,880 --> 00:28:39,279
around measuring diversity and how

00:28:37,279 --> 00:28:42,640
they're using it in different ways

00:28:39,279 --> 00:28:46,080
like category prediction uh i'm

00:28:42,640 --> 00:28:51,200
active on the relevance slack

00:28:46,080 --> 00:28:54,000
group uh and or send me an email

00:28:51,200 --> 00:28:54,000
thank you very much

00:28:57,520 --> 00:29:01,039
awesome thank you eric and um let's see

00:28:59,760 --> 00:29:03,600
if we have any go to the

00:29:01,039 --> 00:29:04,720
chat see if we have any questions what

00:29:03,600 --> 00:29:06,320
is the class

00:29:04,720 --> 00:29:09,760
identification of diversity in search

00:29:06,320 --> 00:29:12,799
results versus screwed up relevancy

00:29:09,760 --> 00:29:15,440
yeah so that's why we need more than one

00:29:12,799 --> 00:29:16,000
measurement right like the diversity you

00:29:15,440 --> 00:29:18,720
could have

00:29:16,000 --> 00:29:19,600
amazingly diverse results right we can

00:29:18,720 --> 00:29:22,880
just have a

00:29:19,600 --> 00:29:24,080
perfect entropy it's all random results

00:29:22,880 --> 00:29:26,880
and it's a mess

00:29:24,080 --> 00:29:27,440
which is why i use tools like cupid to

00:29:26,880 --> 00:29:29,760
be like

00:29:27,440 --> 00:29:31,679
okay these are very diverse but are they

00:29:29,760 --> 00:29:34,080
also just terrible results

00:29:31,679 --> 00:29:36,159
right so i need to make sure that i'm

00:29:34,080 --> 00:29:38,720
still meeting my baseline

00:29:36,159 --> 00:29:41,840
that they are somewhat relevant

00:29:38,720 --> 00:29:43,600
documents or very relevant documents

00:29:41,840 --> 00:29:44,880
and so that's why i wanted to show sort

00:29:43,600 --> 00:29:47,600
of tools like cupid

00:29:44,880 --> 00:29:48,559
to give you a sense of like this is good

00:29:47,600 --> 00:29:52,159
enough

00:29:48,559 --> 00:29:55,840
and then we can focus on diversity or

00:29:52,159 --> 00:29:55,840
maybe vice versa

00:29:56,880 --> 00:30:00,640
cool another popular question is what

00:29:59,520 --> 00:30:02,640
other measurements

00:30:00,640 --> 00:30:04,080
for diversity are out there and what are

00:30:02,640 --> 00:30:04,960
the advantages and disadvantages of

00:30:04,080 --> 00:30:08,080
entropy and

00:30:04,960 --> 00:30:11,120
respect to those yeah so i mean i

00:30:08,080 --> 00:30:14,320
think i would say one advantage of

00:30:11,120 --> 00:30:16,640
entropy is it's pretty darn simple right

00:30:14,320 --> 00:30:18,000
you are you know i was able to put this

00:30:16,640 --> 00:30:21,120
calculation

00:30:18,000 --> 00:30:24,480
in a pretty simple spreadsheet and

00:30:21,120 --> 00:30:27,120
visually have interesting conversations

00:30:24,480 --> 00:30:27,840
about it for example like oh that's

00:30:27,120 --> 00:30:29,679
interesting

00:30:27,840 --> 00:30:32,480
this looks very obvious that we should

00:30:29,679 --> 00:30:36,080
auto you know we should pick a threshold

00:30:32,480 --> 00:30:38,080
where we clearly you know

00:30:36,080 --> 00:30:40,399
if you type in intel chip we're going to

00:30:38,080 --> 00:30:42,799
narrow the processor oh wait but this is

00:30:40,399 --> 00:30:43,760
going to negatively impact our coffee

00:30:42,799 --> 00:30:46,640
maker queer

00:30:43,760 --> 00:30:48,640
right i like this one because it's

00:30:46,640 --> 00:30:51,039
pretty easy to understand

00:30:48,640 --> 00:30:52,799
without sort of next level data science

00:30:51,039 --> 00:30:56,159
capabilities

00:30:52,799 --> 00:30:58,240
there are a lot of other metrics

00:30:56,159 --> 00:30:59,919
and a lot of these should be informed by

00:30:58,240 --> 00:31:00,640
like your click logs and your click

00:30:59,919 --> 00:31:02,880
analytics

00:31:00,640 --> 00:31:04,559
um you know a lot of people building

00:31:02,880 --> 00:31:08,159
interesting classifiers

00:31:04,559 --> 00:31:11,200
to do it um i just find this

00:31:08,159 --> 00:31:14,880
a very approachable technique

00:31:11,200 --> 00:31:19,360
that anyone can do without a lot of data

00:31:14,880 --> 00:31:23,279
and without a lot of tools

00:31:19,360 --> 00:31:24,720
i find it very useful especially in sort

00:31:23,279 --> 00:31:26,799
of the research

00:31:24,720 --> 00:31:27,919
side of things where you might get a

00:31:26,799 --> 00:31:31,039
query that's pretty

00:31:27,919 --> 00:31:32,000
abstract right like someone's name and

00:31:31,039 --> 00:31:34,320
you're like i don't

00:31:32,000 --> 00:31:36,159
really know there isn't one right answer

00:31:34,320 --> 00:31:39,360
you know if i'm returning

00:31:36,159 --> 00:31:42,880
thousands of results for your query

00:31:39,360 --> 00:31:45,200
how do i even pick the top 10 results

00:31:42,880 --> 00:31:47,440
maybe click analytics tells me this is

00:31:45,200 --> 00:31:50,159
the one document everyone wants

00:31:47,440 --> 00:31:51,840
but if i don't know that then what i

00:31:50,159 --> 00:31:54,159
really probably should do

00:31:51,840 --> 00:31:55,200
is aim for a more diverse set of search

00:31:54,159 --> 00:31:56,880
results

00:31:55,200 --> 00:31:58,320
so that the user can then start

00:31:56,880 --> 00:32:01,840
filtering down

00:31:58,320 --> 00:32:01,840
to what they really

00:32:19,279 --> 00:32:21,360

YouTube URL: https://www.youtube.com/watch?v=pnSv2fLC3lU


