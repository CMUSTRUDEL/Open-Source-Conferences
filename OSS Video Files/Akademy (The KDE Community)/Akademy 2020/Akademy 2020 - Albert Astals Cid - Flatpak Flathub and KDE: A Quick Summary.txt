Title: Akademy 2020 - Albert Astals Cid - Flatpak Flathub and KDE: A Quick Summary
Publication date: 2020-11-24
Playlist: Akademy 2020
Description: 
	A quick summary of what is flatpak, what is flathub and how KDE interacts with both of them.
Captions: 
	00:00:01,110 --> 00:00:08,589
[Music]

00:00:10,639 --> 00:00:14,160
hello and welcome

00:00:12,240 --> 00:00:15,759
good morning good afternoon good night

00:00:14,160 --> 00:00:19,760
i'm albert and i'm gonna

00:00:15,759 --> 00:00:23,119
talk about floodpack flat hub and kd

00:00:19,760 --> 00:00:26,480
so let's start quickly what's flat pack

00:00:23,119 --> 00:00:28,480
flatpack.org says flatpack is the future

00:00:26,480 --> 00:00:31,439
of apps on linux which is

00:00:28,480 --> 00:00:32,800
all nice but doesn't really mean

00:00:31,439 --> 00:00:36,079
anything

00:00:32,800 --> 00:00:37,840
the next sentence is flat pack is a next

00:00:36,079 --> 00:00:38,960
generation technology for building and

00:00:37,840 --> 00:00:41,040
distributing

00:00:38,960 --> 00:00:42,559
desktop apps on linux okay so that says

00:00:41,040 --> 00:00:45,760
a bit more right so it says

00:00:42,559 --> 00:00:48,000
it's for desktop apps it's for building

00:00:45,760 --> 00:00:48,879
and distributing them right they also

00:00:48,000 --> 00:00:51,920
have this

00:00:48,879 --> 00:00:53,920
nice cute band with boxes so that's good

00:00:51,920 --> 00:00:57,360
for them

00:00:53,920 --> 00:00:57,360
so the building part right so

00:00:57,520 --> 00:01:01,280
forever in kde we've been used to

00:01:00,399 --> 00:01:03,280
basically build

00:01:01,280 --> 00:01:05,119
a tarball throw it over the fence and

00:01:03,280 --> 00:01:07,600
then somebody

00:01:05,119 --> 00:01:09,280
mainly leads distributions but build it

00:01:07,600 --> 00:01:11,439
send it to users right

00:01:09,280 --> 00:01:12,799
that doesn't exist anymore in flat pack

00:01:11,439 --> 00:01:16,720
in flat pack

00:01:12,799 --> 00:01:18,799
the flat pack author is responsible for

00:01:16,720 --> 00:01:19,759
building everything the application

00:01:18,799 --> 00:01:22,720
needs

00:01:19,759 --> 00:01:23,360
and then basically giving it to the user

00:01:22,720 --> 00:01:25,200
right we're

00:01:23,360 --> 00:01:26,640
cutting kind of cutting the middleman

00:01:25,200 --> 00:01:28,799
here

00:01:26,640 --> 00:01:31,840
so that's a bit annoying right because

00:01:28,799 --> 00:01:31,840
if you have to build everything

00:01:32,479 --> 00:01:36,799
yeah you would have to build that lip

00:01:34,720 --> 00:01:40,320
right so we don't want to do that

00:01:36,799 --> 00:01:43,920
so there's something called

00:01:40,320 --> 00:01:47,680
run times in in flat pack that

00:01:43,920 --> 00:01:51,040
are kind of uh things you can base your

00:01:47,680 --> 00:01:54,640
app on right so for for kde we have the

00:01:51,040 --> 00:01:56,880
kd runtime that basically builds

00:01:54,640 --> 00:01:58,479
all of the kde frameworks and almost all

00:01:56,880 --> 00:01:59,040
of cute i think the only thing not

00:01:58,479 --> 00:02:02,079
included

00:01:59,040 --> 00:02:04,399
is web engine and then your app

00:02:02,079 --> 00:02:06,159
doesn't really have to build the 20

00:02:04,399 --> 00:02:09,280
frameworks it depends on right and then

00:02:06,159 --> 00:02:11,760
the next app has to do the same which is

00:02:09,280 --> 00:02:14,239
always a good thing less things build

00:02:11,760 --> 00:02:14,239
the better

00:02:14,400 --> 00:02:21,120
so as i said in kde we have the

00:02:18,000 --> 00:02:22,879
platform and the sdk right so

00:02:21,120 --> 00:02:24,480
there's the runtime and the sdk the

00:02:22,879 --> 00:02:26,239
runtime is the thing you run

00:02:24,480 --> 00:02:27,440
you use to run the application the sdk

00:02:26,239 --> 00:02:28,879
is the thing you use to compile the

00:02:27,440 --> 00:02:32,480
application

00:02:28,879 --> 00:02:34,239
it's an event in that url listed down

00:02:32,480 --> 00:02:37,599
there

00:02:34,239 --> 00:02:38,879
so the main thing your app needs to be

00:02:37,599 --> 00:02:41,440
built on flat pack

00:02:38,879 --> 00:02:43,519
is a manifest right so in a manifest you

00:02:41,440 --> 00:02:46,800
say hello and calcium

00:02:43,519 --> 00:02:49,280
i'm going to be using the kde

00:02:46,800 --> 00:02:50,800
platform runtime and the kde sdk to

00:02:49,280 --> 00:02:53,280
build

00:02:50,800 --> 00:02:55,120
i'm going to be using the version 514

00:02:53,280 --> 00:02:58,800
right that's

00:02:55,120 --> 00:03:02,560
the versioning we decided for

00:02:58,800 --> 00:03:05,599
the kde runtime it's basically the tight

00:03:02,560 --> 00:03:07,599
to the cute version it uses so

00:03:05,599 --> 00:03:09,680
we every time you we update the queued

00:03:07,599 --> 00:03:12,080
version we give it a new name

00:03:09,680 --> 00:03:13,519
and then we get the command which is the

00:03:12,080 --> 00:03:14,720
like the binary it has to run when

00:03:13,519 --> 00:03:17,920
running calcium right

00:03:14,720 --> 00:03:19,440
so it's the user the thing in user bin

00:03:17,920 --> 00:03:22,319
it's the thing to run

00:03:19,440 --> 00:03:22,959
and then you say please build me with

00:03:22,319 --> 00:03:25,280
cmake

00:03:22,959 --> 00:03:26,159
and with ninja which is a bit faster i'm

00:03:25,280 --> 00:03:28,720
an archive

00:03:26,159 --> 00:03:29,760
please build me from this url right

00:03:28,720 --> 00:03:31,440
there's a

00:03:29,760 --> 00:03:33,360
few things more that didn't fit into the

00:03:31,440 --> 00:03:36,000
slide there's a few hashes

00:03:33,360 --> 00:03:37,200
to make sure the archive is fine and

00:03:36,000 --> 00:03:38,400
there's some other flags you have to

00:03:37,200 --> 00:03:42,239
give to

00:03:38,400 --> 00:03:44,720
flat pack to make sure that acceleration

00:03:42,239 --> 00:03:46,000
and whatnot are available but that's

00:03:44,720 --> 00:03:49,120
that's the main thing right

00:03:46,000 --> 00:03:49,920
you give it a url to build from it

00:03:49,120 --> 00:03:53,280
builds

00:03:49,920 --> 00:03:54,560
done well not really right this is very

00:03:53,280 --> 00:03:56,159
easy for calcium because it

00:03:54,560 --> 00:03:58,000
doesn't really have any dependency

00:03:56,159 --> 00:04:00,319
outside the kde frameworks

00:03:58,000 --> 00:04:02,239
but most of our applications actually do

00:04:00,319 --> 00:04:05,280
have dependencies right

00:04:02,239 --> 00:04:06,959
so something that has a quite some

00:04:05,280 --> 00:04:10,480
dependencies like ocular

00:04:06,959 --> 00:04:11,680
ends up with a file that is 350 lines

00:04:10,480 --> 00:04:14,319
long

00:04:11,680 --> 00:04:15,599
something like contact which doesn't

00:04:14,319 --> 00:04:18,639
really have that many

00:04:15,599 --> 00:04:20,079
outside dependencies but it has to build

00:04:18,639 --> 00:04:23,199
all of kdp right kdp

00:04:20,079 --> 00:04:26,639
is very separated in different libraries

00:04:23,199 --> 00:04:29,919
that contact prints them all right so it

00:04:26,639 --> 00:04:32,240
ends up being 1200 lines which is a lot

00:04:29,919 --> 00:04:35,919
right

00:04:32,240 --> 00:04:38,320
so uh once you've

00:04:35,919 --> 00:04:40,080
written your manifest you want to build

00:04:38,320 --> 00:04:43,280
it install it and run it right

00:04:40,080 --> 00:04:44,560
as a developer so for that you use

00:04:43,280 --> 00:04:47,120
flatback builder

00:04:44,560 --> 00:04:48,000
there's if you if you just give it a

00:04:47,120 --> 00:04:50,960
builder

00:04:48,000 --> 00:04:52,479
and the manifest file it will build it

00:04:50,960 --> 00:04:53,840
but that's not so useful right so you

00:04:52,479 --> 00:04:56,000
want to install it

00:04:53,840 --> 00:04:57,120
as a user so it doesn't bag you for the

00:04:56,000 --> 00:04:59,199
root password

00:04:57,120 --> 00:05:01,039
and then once you have installed it as a

00:04:59,199 --> 00:05:03,039
user you can just run it

00:05:01,039 --> 00:05:05,840
right and that's good and you can

00:05:03,039 --> 00:05:08,080
actually test it works

00:05:05,840 --> 00:05:09,759
but as i said this is for developers

00:05:08,080 --> 00:05:11,360
right for users

00:05:09,759 --> 00:05:12,880
we don't want them to have to build

00:05:11,360 --> 00:05:14,400
everything because

00:05:12,880 --> 00:05:17,120
this is supposed to be the future of

00:05:14,400 --> 00:05:20,240
applications in in linux right so

00:05:17,120 --> 00:05:22,080
building is not the future so

00:05:20,240 --> 00:05:24,000
for that we have the distribution side

00:05:22,080 --> 00:05:27,360
all right the concept of

00:05:24,000 --> 00:05:27,840
remote and remote is just a url with

00:05:27,360 --> 00:05:29,919
lots

00:05:27,840 --> 00:05:30,880
of applications in it or with one right

00:05:29,919 --> 00:05:33,520
it doesn't

00:05:30,880 --> 00:05:33,919
matter right it's it's a url which will

00:05:33,520 --> 00:05:37,280
have

00:05:33,919 --> 00:05:40,000
one or more applications for example if

00:05:37,280 --> 00:05:42,240
we list remotes on my

00:05:40,000 --> 00:05:43,360
computer there's five of them right

00:05:42,240 --> 00:05:46,080
there's flat hub

00:05:43,360 --> 00:05:47,360
there's gnome there's kd apps there's

00:05:46,080 --> 00:05:49,039
gnome knightly

00:05:47,360 --> 00:05:50,400
and then there's a remote for the

00:05:49,039 --> 00:05:53,919
calcium we just built

00:05:50,400 --> 00:05:55,199
right okay so here we introduce the

00:05:53,919 --> 00:05:58,000
other

00:05:55,199 --> 00:05:59,680
thing i wanted to talk in this uh talk

00:05:58,000 --> 00:06:03,280
which is flat hub

00:05:59,680 --> 00:06:05,759
so what is flat hub flat flatpath.org

00:06:03,280 --> 00:06:07,680
says it's the home of hundreds of apps

00:06:05,759 --> 00:06:09,280
which can be easily installed on any

00:06:07,680 --> 00:06:10,880
linux distribution

00:06:09,280 --> 00:06:14,319
okay so it's really nothing special

00:06:10,880 --> 00:06:16,960
right it's just another flatback remote

00:06:14,319 --> 00:06:17,840
yeah but not just another flatback

00:06:16,960 --> 00:06:20,240
remote right

00:06:17,840 --> 00:06:22,479
the thing with flat hub is that it's

00:06:20,240 --> 00:06:25,360
enabled by default in flat pack

00:06:22,479 --> 00:06:27,360
so every single flatback installation

00:06:25,360 --> 00:06:31,199
has flat hub

00:06:27,360 --> 00:06:33,600
enabled so when you do flat pack search

00:06:31,199 --> 00:06:35,680
it will search in there right so we want

00:06:33,600 --> 00:06:39,199
to be in flat hub because otherwise

00:06:35,680 --> 00:06:40,240
well it's harder to find when you're not

00:06:39,199 --> 00:06:43,280
on the default

00:06:40,240 --> 00:06:46,319
find list

00:06:43,280 --> 00:06:50,000
so yeah flat have an kde right we have

00:06:46,319 --> 00:06:53,440
all those apps in flat hub it's

00:06:50,000 --> 00:06:55,919
there's quite a few there's simple ones

00:06:53,440 --> 00:06:57,520
like a few games there's complex ones

00:06:55,919 --> 00:07:00,400
like decan

00:06:57,520 --> 00:07:02,479
and gcompre ocular it's kind of

00:07:00,400 --> 00:07:05,680
complicated krita is also there

00:07:02,479 --> 00:07:06,960
so yeah the code for these apps lives in

00:07:05,680 --> 00:07:08,240
github everything from

00:07:06,960 --> 00:07:10,000
flat habits and github so it's

00:07:08,240 --> 00:07:12,560
github.com slash

00:07:10,000 --> 00:07:15,280
flat hub slash the manifest name right

00:07:12,560 --> 00:07:17,919
so oracle.kde.org for example

00:07:15,280 --> 00:07:19,440
we have a team in event we used to

00:07:17,919 --> 00:07:22,960
discuss things

00:07:19,440 --> 00:07:26,639
you're welcome to join there

00:07:22,960 --> 00:07:27,520
so some stats as you can see the numbers

00:07:26,639 --> 00:07:28,880
are not very big

00:07:27,520 --> 00:07:31,440
right the most installed one is you

00:07:28,880 --> 00:07:34,880
completely with 35 000

00:07:31,440 --> 00:07:37,759
updates since the last sorry 35 000

00:07:34,880 --> 00:07:39,520
downloads since the last update it's not

00:07:37,759 --> 00:07:42,000
a lot but

00:07:39,520 --> 00:07:42,720
it's not too bad either there's some

00:07:42,000 --> 00:07:45,599
apps that are

00:07:42,720 --> 00:07:46,879
almost not installed they're very niche

00:07:45,599 --> 00:07:50,240
development apps so

00:07:46,879 --> 00:07:50,240
that's also understandable

00:07:50,400 --> 00:07:55,120
so there's still lots of things to do

00:07:52,560 --> 00:07:57,919
for flat hub and kd right

00:07:55,120 --> 00:08:00,240
we have around 50 applications now but

00:07:57,919 --> 00:08:02,400
if you go to k.org applications there's

00:08:00,240 --> 00:08:05,199
200 applications right so we're missing

00:08:02,400 --> 00:08:06,160
150 application also some of the

00:08:05,199 --> 00:08:08,960
applications like

00:08:06,160 --> 00:08:09,440
contact need some love like contact as i

00:08:08,960 --> 00:08:13,919
mentioned

00:08:09,440 --> 00:08:17,919
is a big throughout its 1200

00:08:13,919 --> 00:08:21,039
lines we're stuck at 1904 there so

00:08:17,919 --> 00:08:23,199
yeah help more than welcome to make it

00:08:21,039 --> 00:08:26,319
more modern

00:08:23,199 --> 00:08:28,639
so for the apps that are missing we can

00:08:26,319 --> 00:08:32,640
reuse the manifest files that are

00:08:28,639 --> 00:08:35,440
in invent flat pack kd applications

00:08:32,640 --> 00:08:36,320
those are some applications that mostly

00:08:35,440 --> 00:08:39,279
alleged builds

00:08:36,320 --> 00:08:40,080
and other people but mostly those built

00:08:39,279 --> 00:08:42,320
from

00:08:40,080 --> 00:08:43,120
git every night using the binary factory

00:08:42,320 --> 00:08:45,680
and end up

00:08:43,120 --> 00:08:47,279
in this remote right so this is

00:08:45,680 --> 00:08:48,959
something that we don't really want to

00:08:47,279 --> 00:08:50,959
give to users because it's it's

00:08:48,959 --> 00:08:52,720
it's a nightly right it's good for

00:08:50,959 --> 00:08:53,680
testing but it's not really something we

00:08:52,720 --> 00:08:56,240
want to give

00:08:53,680 --> 00:08:56,959
to users as a stable thing so yeah as i

00:08:56,240 --> 00:09:01,279
said

00:08:56,959 --> 00:09:05,200
join the theme now some technical stuff

00:09:01,279 --> 00:09:06,000
flat pack uses os3 os3 is good for

00:09:05,200 --> 00:09:08,480
binaries

00:09:06,000 --> 00:09:09,440
it has atomic updates and duplication so

00:09:08,480 --> 00:09:12,959
even if you build

00:09:09,440 --> 00:09:16,800
web engine twice it's fine it just

00:09:12,959 --> 00:09:19,920
uses the space once our runtime is built

00:09:16,800 --> 00:09:20,240
on top of the free desktop sdk which is

00:09:19,920 --> 00:09:21,760
very

00:09:20,240 --> 00:09:25,120
confusing name but it doesn't really

00:09:21,760 --> 00:09:27,839
have any relation with 3 desktop at all

00:09:25,120 --> 00:09:29,839
and the main issue with flat pack is its

00:09:27,839 --> 00:09:31,519
containerized which is good

00:09:29,839 --> 00:09:33,920
but then sometimes it's not so good

00:09:31,519 --> 00:09:36,640
because we've been writing apps

00:09:33,920 --> 00:09:37,839
for 20 years expecting to be able to

00:09:36,640 --> 00:09:41,040
access everything

00:09:37,839 --> 00:09:44,560
now you can't and that has

00:09:41,040 --> 00:09:48,240
some issues right so

00:09:44,560 --> 00:09:50,720
the the main help needed is there

00:09:48,240 --> 00:09:51,519
so i'm running out of time so i just

00:09:50,720 --> 00:09:54,720
want to remember

00:09:51,519 --> 00:09:58,399
there's above on monday the 7th

00:09:54,720 --> 00:10:00,959
in room 1 at 16 utc building your first

00:09:58,399 --> 00:10:03,040
flight back it's organized by jan

00:10:00,959 --> 00:10:04,480
but i'm going to be there i guess

00:10:03,040 --> 00:10:07,839
validation will also be there

00:10:04,480 --> 00:10:18,640
so any question you have ask him there

00:10:07,839 --> 00:10:18,640

YouTube URL: https://www.youtube.com/watch?v=xW9uTxAoULU


