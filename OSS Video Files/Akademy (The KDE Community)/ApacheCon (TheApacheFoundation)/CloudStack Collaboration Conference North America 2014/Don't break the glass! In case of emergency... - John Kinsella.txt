Title: Don't break the glass! In case of emergency... - John Kinsella
Publication date: 2014-04-28
Playlist: CloudStack Collaboration Conference North America 2014
Description: 
	CloudStack Collaboration Conference North America 2014
Captions: 
	00:00:00,170 --> 00:00:05,339
okay so my name is John it's going to be

00:00:02,939 --> 00:00:06,390
talked about don't break the glass so

00:00:05,339 --> 00:00:08,970
basically go be talking a little bit

00:00:06,390 --> 00:00:12,090
here about a what to do when the dire

00:00:08,970 --> 00:00:13,530
situation hits and how we can sort of

00:00:12,090 --> 00:00:17,369
work around that so as a my name is John

00:00:13,530 --> 00:00:19,730
I'm a member of the cloud sac pmc big

00:00:17,369 --> 00:00:21,630
background security operations internet

00:00:19,730 --> 00:00:24,689
sort of mixture of things plus I have

00:00:21,630 --> 00:00:26,910
the ability to do code as important to

00:00:24,689 --> 00:00:28,230
security shirt today I am a hacker to

00:00:26,910 --> 00:00:30,330
use that phrase here I'm using it in

00:00:28,230 --> 00:00:32,759
from the point of view of a developer so

00:00:30,330 --> 00:00:33,840
not so much ooh bad guy TV hackers but

00:00:32,759 --> 00:00:35,820
someone who actually likes to play with

00:00:33,840 --> 00:00:36,960
code the reason I mentioned that is a

00:00:35,820 --> 00:00:39,540
lot of stuff I'm gonna be talking about

00:00:36,960 --> 00:00:41,250
here is a result of working backwards i

00:00:39,540 --> 00:00:42,719
usually sort of like you know when i see

00:00:41,250 --> 00:00:44,730
a problem it's like how do i actually

00:00:42,719 --> 00:00:46,050
look at that figure out what's going on

00:00:44,730 --> 00:00:48,570
in the database in our examples he

00:00:46,050 --> 00:00:52,320
excuse me here and then work my way back

00:00:48,570 --> 00:00:53,670
up um so first thing I do is I'm curious

00:00:52,320 --> 00:00:54,930
about the mix of people here I wasn't

00:00:53,670 --> 00:00:57,690
sure how much of it I show we're going

00:00:54,930 --> 00:01:00,170
to get so do we have cloud operations

00:00:57,690 --> 00:01:05,880
people here okay we got a few of those

00:01:00,170 --> 00:01:07,950
developers okay some of those um okay

00:01:05,880 --> 00:01:10,260
cool so how about what's your guys

00:01:07,950 --> 00:01:12,689
familiarity on the developer site or its

00:01:10,260 --> 00:01:13,830
a more actual Java development or do we

00:01:12,689 --> 00:01:18,630
have people in here really familiar with

00:01:13,830 --> 00:01:19,710
sequel okay a few okay so that's where

00:01:18,630 --> 00:01:23,549
we'll go be started talking about here a

00:01:19,710 --> 00:01:25,020
little bit is as we go through this my

00:01:23,549 --> 00:01:27,180
goal for this is really did to give

00:01:25,020 --> 00:01:28,979
people this isn't going to be how to

00:01:27,180 --> 00:01:30,329
what I'm really sort of doing is trying

00:01:28,979 --> 00:01:32,130
to drop some clues and some breadcrumbs

00:01:30,329 --> 00:01:33,689
out to you guys to say when when

00:01:32,130 --> 00:01:35,310
something happens when you leave here

00:01:33,689 --> 00:01:37,320
these are some things you can sort of

00:01:35,310 --> 00:01:39,030
check out so if something bad happens in

00:01:37,320 --> 00:01:39,960
the future you'll have some experience

00:01:39,030 --> 00:01:44,369
in this and be able to actually go

00:01:39,960 --> 00:01:45,479
through and hopefully survive so quick

00:01:44,369 --> 00:01:47,130
overview we're going to be talking about

00:01:45,479 --> 00:01:49,649
here this is a really long slide deck

00:01:47,130 --> 00:01:51,420
we've got 20 slides we got these talks

00:01:49,649 --> 00:01:53,009
are sort of short here so we might rip

00:01:51,420 --> 00:01:54,420
through this pretty quickly if you guys

00:01:53,009 --> 00:01:55,799
have any questions as we go along raise

00:01:54,420 --> 00:01:56,850
raise a hand let's sort of talk and make

00:01:55,799 --> 00:02:02,490
this interactive they'll make a lot more

00:01:56,850 --> 00:02:03,390
fun for everyone so before we start we

00:02:02,490 --> 00:02:05,610
have a bunch of people here have

00:02:03,390 --> 00:02:07,140
operational experience but really just

00:02:05,610 --> 00:02:08,640
sort of think about I'm not going to

00:02:07,140 --> 00:02:09,780
spend time on this one but in a

00:02:08,640 --> 00:02:11,400
production cloud what does it look like

00:02:09,780 --> 00:02:13,910
right you're gonna have everything done

00:02:11,400 --> 00:02:16,040
right hopefully so a lot of hey CheY

00:02:13,910 --> 00:02:17,660
things being backed up got rid done in

00:02:16,040 --> 00:02:18,710
storage everything's been sorted test

00:02:17,660 --> 00:02:21,110
and we know everything's good that's

00:02:18,710 --> 00:02:23,540
that's really what we're hopefully doing

00:02:21,110 --> 00:02:25,430
before we go into this so what happened

00:02:23,540 --> 00:02:26,750
to me in one of our production cloud so

00:02:25,430 --> 00:02:30,560
let me talk a little bit about Stratus a

00:02:26,750 --> 00:02:33,140
car company we provide secure cloud

00:02:30,560 --> 00:02:34,430
services for focus right now mainly on

00:02:33,140 --> 00:02:37,520
the financial companies and some

00:02:34,430 --> 00:02:39,170
healthcare so they're coming to us we

00:02:37,520 --> 00:02:41,510
run on top of cloud sac we're actually

00:02:39,170 --> 00:02:43,760
sort of providing a managed service so

00:02:41,510 --> 00:02:45,170
they have the ability to interact with

00:02:43,760 --> 00:02:46,730
cloud stock but usually they actually

00:02:45,170 --> 00:02:48,320
call us and say we need a new vm you

00:02:46,730 --> 00:02:49,760
know this needs to be whatever it is

00:02:48,320 --> 00:02:51,950
they contact us when we do something for

00:02:49,760 --> 00:02:54,760
them so in this particular case we had a

00:02:51,950 --> 00:02:57,860
user who've been with us for a while and

00:02:54,760 --> 00:02:59,870
they decided that they wanted to

00:02:57,860 --> 00:03:02,300
actually have hands-on in the control

00:02:59,870 --> 00:03:04,040
panel which we were using so this was a

00:03:02,300 --> 00:03:05,000
billing platform which sat in front of

00:03:04,040 --> 00:03:08,420
cloud stock I'm not going to mention

00:03:05,000 --> 00:03:09,950
your name yes and not gonna mention

00:03:08,420 --> 00:03:13,310
their name so the reason I'm not going

00:03:09,950 --> 00:03:16,160
to do this is as you guys can see here

00:03:13,310 --> 00:03:18,110
sort of quickly what happened i'm

00:03:16,160 --> 00:03:20,660
ninety-nine percent sure i didn't click

00:03:18,110 --> 00:03:21,950
delete but there's a small chance and we

00:03:20,660 --> 00:03:23,090
haven't been on reproduces so i don't

00:03:21,950 --> 00:03:24,380
wanna start bad-mouthing them and have

00:03:23,090 --> 00:03:25,970
like that come out in the industry of

00:03:24,380 --> 00:03:27,140
what's going on so if we can test this

00:03:25,970 --> 00:03:29,120
if we could either test and get them to

00:03:27,140 --> 00:03:31,280
fix it or you know have some sort of

00:03:29,120 --> 00:03:32,750
little more solid I'd say food is what's

00:03:31,280 --> 00:03:34,370
going on I've mentioned the name of the

00:03:32,750 --> 00:03:36,700
past and the board so it's it's not

00:03:34,370 --> 00:03:39,140
impossible to find but yeah really so

00:03:36,700 --> 00:03:40,220
this customer wanted access so you know

00:03:39,140 --> 00:03:42,890
we have some stuff in there we were

00:03:40,220 --> 00:03:44,720
testing out there were using windows vm

00:03:42,890 --> 00:03:47,630
so we were testing the ability to

00:03:44,720 --> 00:03:48,860
actually bill for the vm and and the OS

00:03:47,630 --> 00:03:50,510
license in there as well but it wasn't

00:03:48,860 --> 00:03:51,560
really working citing the no big deal

00:03:50,510 --> 00:03:53,239
i'm just gonna pull it out for and give

00:03:51,560 --> 00:03:54,440
it to them there go get confused when

00:03:53,239 --> 00:03:56,690
they see this license in there with a

00:03:54,440 --> 00:03:58,700
zero dollar cost so let's remove that

00:03:56,690 --> 00:04:01,459
and the next thing i know and screen

00:03:58,700 --> 00:04:07,430
refreshes and it had actually cleaned

00:04:01,459 --> 00:04:10,910
out the customer so the first lesson

00:04:07,430 --> 00:04:14,570
here we had our expunge values hopefully

00:04:10,910 --> 00:04:16,280
that's readable at the bottom the actual

00:04:14,570 --> 00:04:18,140
value and CloudStack for how often it

00:04:16,280 --> 00:04:20,090
should go through and attempt to clean

00:04:18,140 --> 00:04:22,789
up things which emit marxist deleted was

00:04:20,090 --> 00:04:25,100
set to under 10 minutes and as luck

00:04:22,789 --> 00:04:27,050
happens this decided to be running that

00:04:25,100 --> 00:04:27,880
10-minute mark was about 20 or 30

00:04:27,050 --> 00:04:29,920
seconds after

00:04:27,880 --> 00:04:34,570
I'd clicked or however had decided to

00:04:29,920 --> 00:04:37,780
delete so in my control panel screen

00:04:34,570 --> 00:04:40,630
reloads customers gone up over to hop

00:04:37,780 --> 00:04:41,950
over to CloudStack and I suddenly start

00:04:40,630 --> 00:04:43,810
seeing stopping stopping stopping

00:04:41,950 --> 00:04:46,030
expunging expunging expunging this is a

00:04:43,810 --> 00:04:48,100
customer had 20 BMS probably a few

00:04:46,030 --> 00:04:54,330
terabytes worth of data they're an

00:04:48,100 --> 00:04:56,350
active trading company and yeah this was

00:04:54,330 --> 00:04:59,230
this is sort of what started coming out

00:04:56,350 --> 00:05:00,370
of my mouth very quickly it was my

00:04:59,230 --> 00:05:01,720
girlfriend was working from home today

00:05:00,370 --> 00:05:02,800
and I happen to be working from home and

00:05:01,720 --> 00:05:04,000
she was on a conference call she had

00:05:02,800 --> 00:05:07,060
come in and close the door like I was

00:05:04,000 --> 00:05:12,130
loud and yeah it was it was not a pretty

00:05:07,060 --> 00:05:14,920
picture so um what did we do the first

00:05:12,130 --> 00:05:17,320
thing we realized is this is happening

00:05:14,920 --> 00:05:18,550
cloudstack is deleting things shut that

00:05:17,320 --> 00:05:20,050
bad boy down don't let her do anything

00:05:18,550 --> 00:05:20,890
else worse because if you think through

00:05:20,050 --> 00:05:24,310
and we'll go through here in a few

00:05:20,890 --> 00:05:25,150
minutes certain states uh the VMS go

00:05:24,310 --> 00:05:26,640
through and it was actually a really

00:05:25,150 --> 00:05:28,660
good talk going on next door about a

00:05:26,640 --> 00:05:30,340
state sinking and all that type of

00:05:28,660 --> 00:05:33,250
aspect of classic but basically you know

00:05:30,340 --> 00:05:34,870
what happened is first you stop a BM

00:05:33,250 --> 00:05:36,610
then you mark it destroyed they don't go

00:05:34,870 --> 00:05:37,870
through an expunged so if i can actually

00:05:36,610 --> 00:05:39,640
stop cloud sac waltz in this process

00:05:37,870 --> 00:05:41,830
because it was going through luckily one

00:05:39,640 --> 00:05:42,970
vm at a time it wasn't just being really

00:05:41,830 --> 00:05:45,160
efficient is only being sort of

00:05:42,970 --> 00:05:47,040
efficient but basically you know shut

00:05:45,160 --> 00:05:49,570
down cloud second soon as we could get a

00:05:47,040 --> 00:05:50,920
sequel server up and running and then

00:05:49,570 --> 00:05:52,330
you know start thinking about whatever

00:05:50,920 --> 00:05:53,500
your favorite deities and start praying

00:05:52,330 --> 00:06:03,130
that somehow you can make this thing go

00:05:53,500 --> 00:06:06,700
in the right direction so what I'm going

00:06:03,130 --> 00:06:08,170
to try and do here is talk about some of

00:06:06,700 --> 00:06:09,610
the parts of the database and go ahead

00:06:08,170 --> 00:06:10,720
out some some of the more important

00:06:09,610 --> 00:06:12,600
tables you want to take a peek at and

00:06:10,720 --> 00:06:15,040
the concept of some of the general

00:06:12,600 --> 00:06:16,180
fields you'll see across these database

00:06:15,040 --> 00:06:17,290
tables so you can get an idea of how

00:06:16,180 --> 00:06:21,070
things will lay back and forth to each

00:06:17,290 --> 00:06:23,740
other this is a snapshot of part of the

00:06:21,070 --> 00:06:24,910
vm instance table basically this is what

00:06:23,740 --> 00:06:27,970
we started seeing literally at that

00:06:24,910 --> 00:06:29,530
point in time was you know it's a in

00:06:27,970 --> 00:06:31,060
hindsight absurd it gives me something

00:06:29,530 --> 00:06:32,290
laugh at but when you suddenly see a

00:06:31,060 --> 00:06:33,790
bunch of machines which all these should

00:06:32,290 --> 00:06:34,990
actually say running and you're seeing

00:06:33,790 --> 00:06:37,150
it summer being stopped and some racks

00:06:34,990 --> 00:06:38,560
started just clean out delete it's not a

00:06:37,150 --> 00:06:40,540
good thing but part of it is actually

00:06:38,560 --> 00:06:41,650
understanding ahead of time this is what

00:06:40,540 --> 00:06:42,910
I'm saying where did actually

00:06:41,650 --> 00:06:46,479
look in the database figure this out and

00:06:42,910 --> 00:06:48,370
all those type of things so um if I had

00:06:46,479 --> 00:06:50,470
to give you guys a list of what five

00:06:48,370 --> 00:06:54,400
tables which I think you should you know

00:06:50,470 --> 00:06:58,090
go look at be familiar with this would

00:06:54,400 --> 00:06:59,860
be them one on your left so vm instance

00:06:58,090 --> 00:07:01,780
actually defines that's sort of the main

00:06:59,860 --> 00:07:04,419
place where a vm is defined within

00:07:01,780 --> 00:07:05,800
CloudStack volumes is sort of your main

00:07:04,419 --> 00:07:08,590
place for where your disks are stored

00:07:05,800 --> 00:07:10,419
our disks are defined so some of these

00:07:08,590 --> 00:07:13,150
things I'm go talk through in a few

00:07:10,419 --> 00:07:14,530
slides a little but also my point here

00:07:13,150 --> 00:07:16,720
is to talk about this one point of view

00:07:14,530 --> 00:07:18,160
of knowing so you can do recovery but

00:07:16,720 --> 00:07:20,440
will also show that you know once you

00:07:18,160 --> 00:07:22,060
have this level of familiarity and

00:07:20,440 --> 00:07:24,130
understanding you're able to actually do

00:07:22,060 --> 00:07:25,750
a lot more cloudstack then either what

00:07:24,130 --> 00:07:27,490
was intended or what we've written the

00:07:25,750 --> 00:07:29,080
API is / so far so you're I would

00:07:27,490 --> 00:07:30,430
actually get in and do a lot more that

00:07:29,080 --> 00:07:32,860
the structure in the back end is is nice

00:07:30,430 --> 00:07:36,760
enough to let us do this type thing on

00:07:32,860 --> 00:07:38,229
your rights common fields so account ID

00:07:36,760 --> 00:07:40,449
is instanceid these are all probably

00:07:38,229 --> 00:07:41,590
sort of understandable what they are but

00:07:40,449 --> 00:07:42,610
basically what you'll see is you start

00:07:41,590 --> 00:07:45,550
going through looking at some of these

00:07:42,610 --> 00:07:46,830
tables is you'll see okay I see this one

00:07:45,550 --> 00:07:51,449
thing that's in two different places

00:07:46,830 --> 00:07:54,910
CloudStack is uh not really closely

00:07:51,449 --> 00:07:57,130
linked together to use that phrase so

00:07:54,910 --> 00:07:58,750
there's ad not actual hard joins and

00:07:57,130 --> 00:08:00,310
hard connections between these tables so

00:07:58,750 --> 00:08:01,630
you'll you'll see the same number the

00:08:00,310 --> 00:08:04,060
same place and it gets not going to

00:08:01,630 --> 00:08:05,409
actually be defined so you have to

00:08:04,060 --> 00:08:07,599
actually go through by hand and actually

00:08:05,409 --> 00:08:12,340
look up these numbers um is that making

00:08:07,599 --> 00:08:15,690
sense where I'm saying that okay so this

00:08:12,340 --> 00:08:15,690
is actually a screenshot from that day

00:08:15,720 --> 00:08:19,270
so you can sort of see this process it

00:08:17,889 --> 00:08:21,909
went through actually okay bring up that

00:08:19,270 --> 00:08:24,099
actual vm and so i can track down the vm

00:08:21,909 --> 00:08:25,030
instanceid you guys know what that is if

00:08:24,099 --> 00:08:27,039
you actually when you're looking in

00:08:25,030 --> 00:08:29,860
cloud stuck I don't think I've to run

00:08:27,039 --> 00:08:31,120
now but if you come into your your main

00:08:29,860 --> 00:08:33,490
instances you'll see like this you know

00:08:31,120 --> 00:08:34,779
this number it says like I to something

00:08:33,490 --> 00:08:36,310
like that last number is actually

00:08:34,779 --> 00:08:37,719
literally going back to a database so

00:08:36,310 --> 00:08:38,770
that's where it comes from so once you

00:08:37,719 --> 00:08:39,909
able to actually grab that number you

00:08:38,770 --> 00:08:41,560
can start going through and looking at

00:08:39,909 --> 00:08:43,750
where are my instances in the database

00:08:41,560 --> 00:08:44,650
let's go back and that account that

00:08:43,750 --> 00:08:46,480
someone just said delete that account

00:08:44,650 --> 00:08:47,470
let's go ahead and mark that recovered

00:08:46,480 --> 00:08:49,660
because we don't really want that to

00:08:47,470 --> 00:08:54,360
lead it so by changing that note value

00:08:49,660 --> 00:08:54,360
Baxandall what this is a timestamp

00:08:54,700 --> 00:09:00,100
so if you look at the what third one

00:08:56,650 --> 00:09:02,800
down on your right I've thrown three

00:09:00,100 --> 00:09:04,870
fields there together created updated

00:09:02,800 --> 00:09:06,760
and removed so really what these are

00:09:04,870 --> 00:09:07,870
their intended to be time stamps which

00:09:06,760 --> 00:09:09,130
is actually sort of handy you can go

00:09:07,870 --> 00:09:11,080
back and see when something was creator

00:09:09,130 --> 00:09:12,850
last time something was modified but

00:09:11,080 --> 00:09:14,500
away a lot of logic works in CloudStack

00:09:12,850 --> 00:09:16,360
is once the value has been set to

00:09:14,500 --> 00:09:19,090
something other than all four removed

00:09:16,360 --> 00:09:21,730
clouds data that sort of its concept of

00:09:19,090 --> 00:09:24,820
oh it's actually been deleted so the

00:09:21,730 --> 00:09:26,260
beauty of this is when something gets

00:09:24,820 --> 00:09:27,370
leader in cloud sack you actually have

00:09:26,260 --> 00:09:29,620
the ability to go back and just find

00:09:27,370 --> 00:09:30,880
that record and mark it on delete it and

00:09:29,620 --> 00:09:32,320
seven have to actually create the vm

00:09:30,880 --> 00:09:36,570
record that whole database record from

00:09:32,320 --> 00:09:36,570
scratch which would take a lot more work

00:09:37,320 --> 00:09:43,900
so the one comment i want to make about

00:09:39,280 --> 00:09:46,570
this is a use on that last slide sequel

00:09:43,900 --> 00:09:48,100
and obviously these well six or seven

00:09:46,570 --> 00:09:49,720
lines isn't going to be all that you

00:09:48,100 --> 00:09:51,370
need to restore a database there's a few

00:09:49,720 --> 00:09:54,130
pieces missing here from the screenshot

00:09:51,370 --> 00:09:55,300
and the reason why is in in scroll

00:09:54,130 --> 00:09:57,730
sequel which i use we're able to

00:09:55,300 --> 00:09:58,960
actually go in in the GUI tables and

00:09:57,730 --> 00:10:00,250
right click on something and say make

00:09:58,960 --> 00:10:02,770
this editable so i can actually change

00:10:00,250 --> 00:10:05,170
it without typing sequel which is really

00:10:02,770 --> 00:10:06,700
cool in handy but the bad side of that

00:10:05,170 --> 00:10:07,990
is five minutes later if you're

00:10:06,700 --> 00:10:10,960
distracted or something else you can't

00:10:07,990 --> 00:10:12,730
see what you just updated so i think for

00:10:10,960 --> 00:10:14,140
doing this I mean a last thing I do is

00:10:12,730 --> 00:10:15,760
start recommending you know here's how

00:10:14,140 --> 00:10:16,840
you modify sequel and production but if

00:10:15,760 --> 00:10:18,250
you have to do something like this or

00:10:16,840 --> 00:10:19,890
even it development it from my

00:10:18,250 --> 00:10:21,730
experience if you actually start doing

00:10:19,890 --> 00:10:23,530
modifications in the sequel itself

00:10:21,730 --> 00:10:25,510
you're able to actually go back and

00:10:23,530 --> 00:10:26,380
modify or see what you typed and you

00:10:25,510 --> 00:10:27,520
know if you lose your train of thought

00:10:26,380 --> 00:10:29,620
you can see where you weren't be able to

00:10:27,520 --> 00:10:31,030
get back into that and the one thing I

00:10:29,620 --> 00:10:32,410
didn't mention was on a previous slide

00:10:31,030 --> 00:10:37,000
before we start doing any of this type

00:10:32,410 --> 00:10:41,010
of stuff back up your database any

00:10:37,000 --> 00:10:43,770
questions so far yeah

00:10:41,010 --> 00:10:46,170
do you have good documentation of the

00:10:43,770 --> 00:10:49,740
database layout and what everything is

00:10:46,170 --> 00:10:53,940
so the things so the question was do we

00:10:49,740 --> 00:10:59,190
have a good documentation layout for the

00:10:53,940 --> 00:11:01,590
CloudStack database schema know people

00:10:59,190 --> 00:11:03,740
ask about that occasionally and I think

00:11:01,590 --> 00:11:06,900
I've taken a stab at running a

00:11:03,740 --> 00:11:08,820
commercial program which will go through

00:11:06,900 --> 00:11:10,650
and map it out and generator for you so

00:11:08,820 --> 00:11:12,840
has everyone in here actually seen that

00:11:10,650 --> 00:11:17,780
sort of the cloud stack or have you ever

00:11:12,840 --> 00:11:17,780
seen the database itself at all okay um

00:11:21,680 --> 00:11:30,660
yeah they're not enforced oh hey it's

00:11:25,950 --> 00:11:40,339
not there what do you know um so where's

00:11:30,660 --> 00:11:42,680
my mouse excuse me okay

00:11:40,339 --> 00:11:45,079
so this was sort of me preparing for

00:11:42,680 --> 00:11:49,240
this demo but let me go over and give

00:11:45,079 --> 00:11:53,269
you guys a quick peek around so this is

00:11:49,240 --> 00:11:54,439
the cloudstack database itself and on

00:11:53,269 --> 00:11:58,699
lecture if you guys aren't familiar with

00:11:54,439 --> 00:12:00,499
a squirrel sequel this is sort of listed

00:11:58,699 --> 00:12:04,999
the tables in the database so the first

00:12:00,499 --> 00:12:08,059
thing you see there's a lot of tables in

00:12:04,999 --> 00:12:10,249
here so to generate the GUI of this game

00:12:08,059 --> 00:12:11,870
an actual map you'd need a pretty big

00:12:10,249 --> 00:12:14,029
wall or the PDF when you start looking

00:12:11,870 --> 00:12:15,769
at you have to it's I think it's using

00:12:14,029 --> 00:12:17,149
like a six point font you have to really

00:12:15,769 --> 00:12:19,550
sort of drill down in but still I mean

00:12:17,149 --> 00:12:20,990
I'm sort of similar to you like I to me

00:12:19,550 --> 00:12:22,550
make sense if I can actually visually

00:12:20,990 --> 00:12:23,809
connect things together so I think we

00:12:22,550 --> 00:12:29,899
might take a stab at that again and see

00:12:23,809 --> 00:12:31,100
if we can come up with it but so and I

00:12:29,899 --> 00:12:32,680
need to be careful what I show you guys

00:12:31,100 --> 00:12:37,129
on this because this is one of our

00:12:32,680 --> 00:12:38,809
systems but you can see this is I'm

00:12:37,129 --> 00:12:40,399
still scrolling it there's so many

00:12:38,809 --> 00:12:41,600
tables pairs and that this is why i went

00:12:40,399 --> 00:12:43,009
back and actually gave you guys a list

00:12:41,600 --> 00:12:44,240
of five so that when you're actually

00:12:43,009 --> 00:12:47,029
looking at things instead of actually

00:12:44,240 --> 00:12:49,579
trying to figure out okay it gets one we

00:12:47,029 --> 00:12:51,319
come down to a vm so well here's the vm

00:12:49,579 --> 00:12:53,120
instance want us talking about but also

00:12:51,319 --> 00:12:55,040
okay which one of these if i'm just

00:12:53,120 --> 00:12:57,740
looking at this for a first time has my

00:12:55,040 --> 00:12:58,670
vm defined in it so this is why i'm

00:12:57,740 --> 00:13:01,459
saying go through and get a little

00:12:58,670 --> 00:13:03,259
familiar with this i head of time so in

00:13:01,459 --> 00:13:06,829
the event you you've at least seen it

00:13:03,259 --> 00:13:08,870
before and you can have some familiarity

00:13:06,829 --> 00:13:11,620
with that that's what's you know I want

00:13:08,870 --> 00:13:11,620
to go back to this

00:13:14,180 --> 00:13:21,560
so we've been doing some fun things like

00:13:20,360 --> 00:13:23,810
I said once we got this level of

00:13:21,560 --> 00:13:26,360
familiarity with what's going on we got

00:13:23,810 --> 00:13:27,529
a little more comfortable it's hopefully

00:13:26,360 --> 00:13:28,700
we haven't got ourselves too comfortable

00:13:27,529 --> 00:13:31,010
we've been doing some of these sort of

00:13:28,700 --> 00:13:36,160
modifications so one of our customers

00:13:31,010 --> 00:13:38,600
was a we were moving them from our old

00:13:36,160 --> 00:13:40,610
cloud orchestration platform which i've

00:13:38,600 --> 00:13:41,930
blogged about a we used to use on app we

00:13:40,610 --> 00:13:44,089
were trying to take that vm and bring it

00:13:41,930 --> 00:13:45,560
into cloud stock so we you know we made

00:13:44,089 --> 00:13:47,270
it we made an image of we brought it in

00:13:45,560 --> 00:13:48,620
we hadn't actually I know in the API

00:13:47,270 --> 00:13:50,300
when you're creating an instance you can

00:13:48,620 --> 00:13:51,920
actually specify now the IP address I

00:13:50,300 --> 00:13:53,750
think this was probably a year or two

00:13:51,920 --> 00:13:55,970
ago so we didn't have that ability so we

00:13:53,750 --> 00:13:58,130
literally wanted to give that customer

00:13:55,970 --> 00:14:00,410
back that vm with the same IP would say

00:13:58,130 --> 00:14:02,660
we used to having so how do we do it

00:14:00,410 --> 00:14:09,890
well it's you know about eight or nine

00:14:02,660 --> 00:14:11,930
lines of sequel more recently another

00:14:09,890 --> 00:14:13,520
example of throw up for you guys we had

00:14:11,930 --> 00:14:15,440
a customer who their their VMS were

00:14:13,520 --> 00:14:16,490
split between two accounts and they

00:14:15,440 --> 00:14:18,080
wanted to be able to see all their stuff

00:14:16,490 --> 00:14:19,610
on one screen without you know log out

00:14:18,080 --> 00:14:23,270
log into that one log out log into this

00:14:19,610 --> 00:14:24,380
one so okay we can do that let's go

00:14:23,270 --> 00:14:26,300
ahead move that customer to another

00:14:24,380 --> 00:14:28,750
account so this isn't perfect working

00:14:26,300 --> 00:14:30,709
the way it is right now there's I

00:14:28,750 --> 00:14:32,240
haven't tracked down there's one change

00:14:30,709 --> 00:14:35,270
we had to actually the firewall rules

00:14:32,240 --> 00:14:38,120
don't move cleanly unfortunately yet so

00:14:35,270 --> 00:14:39,380
we've had to we found that we dropped

00:14:38,120 --> 00:14:41,089
the network interface bring it back in

00:14:39,380 --> 00:14:43,370
and then reapply the firewall rules it

00:14:41,089 --> 00:14:45,200
will get it but I mean that's I've still

00:14:43,370 --> 00:14:50,330
saved a ton of work so it's small bit of

00:14:45,200 --> 00:14:52,880
pain first do that so how can you

00:14:50,330 --> 00:14:54,020
prepare this first bullet I've got in

00:14:52,880 --> 00:14:55,370
here I think is sort of interesting for

00:14:54,020 --> 00:14:57,260
folks because I don't think it's

00:14:55,370 --> 00:14:58,910
something this is so as strata sec we

00:14:57,260 --> 00:15:00,320
talked about you'll see us using the

00:14:58,910 --> 00:15:02,120
phrase compliance as a service and

00:15:00,320 --> 00:15:03,800
people always ask me like what what is

00:15:02,120 --> 00:15:05,600
that so what we're actually offering to

00:15:03,800 --> 00:15:07,730
our customers is secured by itself is

00:15:05,600 --> 00:15:09,350
imbued strong me we care about security

00:15:07,730 --> 00:15:10,640
and something that's important to us but

00:15:09,350 --> 00:15:14,180
for enterprises what they really care

00:15:10,640 --> 00:15:15,260
about is compliance so within strata sec

00:15:14,180 --> 00:15:16,700
that the bra always thinking about

00:15:15,260 --> 00:15:20,690
compliance and policy and rules and

00:15:16,700 --> 00:15:22,070
regulations so when I say policy what

00:15:20,690 --> 00:15:25,820
I'm talking about is you know put a

00:15:22,070 --> 00:15:27,020
document together go through again I

00:15:25,820 --> 00:15:27,869
don't have it up but go through there's

00:15:27,020 --> 00:15:30,160
a

00:15:27,869 --> 00:15:31,749
the settings in clouds that can sort of

00:15:30,160 --> 00:15:33,339
understand what's there and what needs

00:15:31,749 --> 00:15:35,739
to be modified and think about how do i

00:15:33,339 --> 00:15:37,509
want to set of my production cloud put

00:15:35,739 --> 00:15:39,279
those into a document so that if you're

00:15:37,509 --> 00:15:40,509
creating a new cloud or if you're

00:15:39,279 --> 00:15:42,069
creating you know a new instance or

00:15:40,509 --> 00:15:43,629
something's changed you can go through

00:15:42,069 --> 00:15:45,339
on either a weekly or monthly basis and

00:15:43,629 --> 00:15:48,220
go is this set the way I think it's set

00:15:45,339 --> 00:15:49,389
or did somehow someone change expunged

00:15:48,220 --> 00:15:50,889
which we should probably have it you

00:15:49,389 --> 00:15:52,629
know once every few hours once every few

00:15:50,889 --> 00:15:54,309
days did someone turn that down to five

00:15:52,629 --> 00:15:55,839
minutes so if you've got some sort of

00:15:54,309 --> 00:15:56,919
way of actually checking this and going

00:15:55,839 --> 00:15:58,779
back and referring to yourself and

00:15:56,919 --> 00:16:01,119
actually having a set list it makes this

00:15:58,779 --> 00:16:02,709
type of thing a lot easier back up

00:16:01,119 --> 00:16:04,809
testing everyone in here backs up their

00:16:02,709 --> 00:16:07,419
stuff right so the second part of that

00:16:04,809 --> 00:16:09,970
is do you encrypt your backups hopefully

00:16:07,419 --> 00:16:12,669
yes the third part is don't store your

00:16:09,970 --> 00:16:13,869
backups in cloud sac so if you're going

00:16:12,669 --> 00:16:15,220
to back this type of stuff up have it

00:16:13,869 --> 00:16:22,809
outside somewhere otherwise you're going

00:16:15,220 --> 00:16:24,429
to really bite yourself so talk a little

00:16:22,809 --> 00:16:26,499
bit about what we're working on now

00:16:24,429 --> 00:16:27,759
we've got this partially working what

00:16:26,499 --> 00:16:29,169
we're trying to do is concepts we've

00:16:27,759 --> 00:16:30,519
talked about this in a devilís a little

00:16:29,169 --> 00:16:34,539
bit but we're coming up with a concept

00:16:30,519 --> 00:16:36,929
of production lock so if a customer like

00:16:34,539 --> 00:16:39,939
I said someone's doing forex trading

00:16:36,929 --> 00:16:41,769
trading financial currencies there's

00:16:39,939 --> 00:16:43,389
pretty much guarantee they don't want

00:16:41,769 --> 00:16:44,980
that thing shut down and reboot anything

00:16:43,389 --> 00:16:46,179
to happen to it right that's Lock and

00:16:44,980 --> 00:16:47,649
Load leave that thing there don't touch

00:16:46,179 --> 00:16:49,779
it don't look at it sideways don't even

00:16:47,649 --> 00:16:51,419
think about patching it so what we're

00:16:49,779 --> 00:16:53,949
actually doing now is it's going into

00:16:51,419 --> 00:16:56,109
cloudstack and putting a flag in so

00:16:53,949 --> 00:16:57,519
that's cloud stock if someone comes in

00:16:56,109 --> 00:16:59,559
either either you know a control panel

00:16:57,519 --> 00:17:00,999
or cloud sac or a customer or some code

00:16:59,559 --> 00:17:03,399
we've written at at the API level and

00:17:00,999 --> 00:17:05,620
says delete reboot o2a these things

00:17:03,399 --> 00:17:07,569
cloud sock will go there's a flag set

00:17:05,620 --> 00:17:09,610
telling me not do this not going to do

00:17:07,569 --> 00:17:13,539
it so we've got it working for the VMS

00:17:09,610 --> 00:17:14,589
right now we really need its we need to

00:17:13,539 --> 00:17:15,880
clean up and make a little bit pretty

00:17:14,589 --> 00:17:17,529
probably going and release out to the

00:17:15,880 --> 00:17:20,500
community but our intention is to have

00:17:17,529 --> 00:17:22,329
it for VMS for storage and for networks

00:17:20,500 --> 00:17:23,500
and i'm open to any other ideas of you

00:17:22,329 --> 00:17:26,039
guys how parts which we could do with

00:17:23,500 --> 00:17:26,039
this for you

00:17:26,959 --> 00:17:33,559
no so this is in strata stack has their

00:17:30,080 --> 00:17:35,299
own internal get tree unfortunately so

00:17:33,559 --> 00:17:37,070
we've pretty much everything we're doing

00:17:35,299 --> 00:17:38,539
we either have pushed out or we intend

00:17:37,070 --> 00:17:41,480
to push out so this is one of the ones

00:17:38,539 --> 00:17:43,130
we've done inside its we talked about on

00:17:41,480 --> 00:17:44,360
the devilís people had some interest but

00:17:43,130 --> 00:17:45,740
basically we needed to get something

00:17:44,360 --> 00:17:48,380
done quickly and in place that's why

00:17:45,740 --> 00:17:50,179
it's ugly and nasty and I tend to try

00:17:48,380 --> 00:17:51,020
and what I give out to general public be

00:17:50,179 --> 00:17:54,500
something a little bit neater and

00:17:51,020 --> 00:17:56,330
cleaner so it is coming on the storage

00:17:54,500 --> 00:17:57,980
side we're looking at locking down so

00:17:56,330 --> 00:17:59,630
you can't change size of storage can't

00:17:57,980 --> 00:18:02,720
make a bigger smaller or deleted or even

00:17:59,630 --> 00:18:04,520
just snapshots so really just sort of no

00:18:02,720 --> 00:18:06,289
changes and then we want to add it into

00:18:04,520 --> 00:18:07,850
the GUI so that you know if someone

00:18:06,289 --> 00:18:13,429
coming in on the web UI can literally

00:18:07,850 --> 00:18:17,690
click something and go we're safe so

00:18:13,429 --> 00:18:19,130
that should be will probably have it out

00:18:17,690 --> 00:18:23,260
to the community i'm guessing six to

00:18:19,130 --> 00:18:23,260
eight weeks yeah

00:18:25,299 --> 00:18:32,440
yeah yeah we looked at that as I thank

00:18:31,210 --> 00:18:33,220
sir I hadn't thought about that for a

00:18:32,440 --> 00:18:34,330
while but yeah when we were actually

00:18:33,220 --> 00:18:37,330
doing this we looked at that as an

00:18:34,330 --> 00:18:39,369
example so the question was does this

00:18:37,330 --> 00:18:41,080
look like Amazon's termination

00:18:39,369 --> 00:18:43,710
protection which they have available so

00:18:41,080 --> 00:18:45,879
in amazon i think it's it stops you from

00:18:43,710 --> 00:18:47,649
it's basically the same thing but it's a

00:18:45,879 --> 00:18:49,299
single flag that says basically don't

00:18:47,649 --> 00:18:52,769
either don't terminate or I don't think

00:18:49,299 --> 00:18:56,889
it says don't delete do you remember

00:18:52,769 --> 00:18:57,970
yeah but yeah so we saw that we thought

00:18:56,889 --> 00:18:59,619
that's that's sort of where we are right

00:18:57,970 --> 00:19:00,639
now that's our starting point but we

00:18:59,619 --> 00:19:02,470
wanted to go ahead and make it more

00:19:00,639 --> 00:19:04,299
granular so we could say you know maybe

00:19:02,470 --> 00:19:05,950
we don't care too much about the vm can

00:19:04,299 --> 00:19:07,869
be just you know rebooted that's really

00:19:05,950 --> 00:19:09,789
not a huge deal right but whatever you

00:19:07,869 --> 00:19:11,350
do please Jesus don't delete the actual

00:19:09,789 --> 00:19:12,700
storage itself so we're trying to go a

00:19:11,350 --> 00:19:17,169
little more granular but that's exactly

00:19:12,700 --> 00:19:18,009
where we're going so what I want to do

00:19:17,169 --> 00:19:23,590
is give you guys a little bit of

00:19:18,009 --> 00:19:24,730
homework and a few things which I think

00:19:23,590 --> 00:19:26,440
if you just need your you know your

00:19:24,730 --> 00:19:28,029
devcloud or a production cloud just sort

00:19:26,440 --> 00:19:29,889
of go through and get a feel for what

00:19:28,029 --> 00:19:33,580
you guys have and sort of get in and

00:19:29,889 --> 00:19:35,590
look at it the one thing I sort of blew

00:19:33,580 --> 00:19:37,929
through pretty quickly is when you're

00:19:35,590 --> 00:19:39,489
doing this in sequel at least for me I'm

00:19:37,929 --> 00:19:42,279
you know command-line guy up in with

00:19:39,489 --> 00:19:45,070
UNIX for I don't know 20 30 years but at

00:19:42,279 --> 00:19:49,059
the same time for something like this I

00:19:45,070 --> 00:19:52,350
want to GUI I mean if you look at like I

00:19:49,059 --> 00:19:56,340
said back to this thing some of these

00:19:52,350 --> 00:19:56,340
let's see i know i can look good volumes

00:19:57,179 --> 00:20:01,210
there's a lot of data in here right so

00:20:00,070 --> 00:20:02,769
if you're at least for me if I'm not

00:20:01,210 --> 00:20:05,470
looking at this in the visual manner if

00:20:02,769 --> 00:20:06,850
this was actually my SQL command line it

00:20:05,470 --> 00:20:08,230
would take me forever to keep track of

00:20:06,850 --> 00:20:09,789
what's going on in actually be able to

00:20:08,230 --> 00:20:11,830
make sense of things so I'm able to move

00:20:09,789 --> 00:20:13,480
around a lot quicker in here and so for

00:20:11,830 --> 00:20:17,320
me personally at least I would say if

00:20:13,480 --> 00:20:19,149
you're gonna stuff use a UI but you know

00:20:17,320 --> 00:20:21,070
go and find create a creative and ma new

00:20:19,149 --> 00:20:22,570
system then go and get the ID off it

00:20:21,070 --> 00:20:24,609
then go back to a database and go okay

00:20:22,570 --> 00:20:26,409
where is that in a database so you find

00:20:24,609 --> 00:20:27,850
the instance of it find where the Knicks

00:20:26,409 --> 00:20:29,730
are how the next row defines look at how

00:20:27,850 --> 00:20:35,049
the far wall stuff has been in there and

00:20:29,730 --> 00:20:36,129
then deleted in in cloud sac and then go

00:20:35,049 --> 00:20:37,929
back and see if you can actually go

00:20:36,129 --> 00:20:38,650
here's why I take that thing and restore

00:20:37,929 --> 00:20:40,300
it I mean it

00:20:38,650 --> 00:20:41,650
it's mostly commands or what I gave you

00:20:40,300 --> 00:20:44,620
before and if people want more detail

00:20:41,650 --> 00:20:49,570
i'm happy to either blog about it or go

00:20:44,620 --> 00:20:50,770
into more detail to wiki but yeah I

00:20:49,570 --> 00:20:52,630
think that'd be sort of fun for you guys

00:20:50,770 --> 00:21:00,700
I hope I mean my definition of fun is

00:20:52,630 --> 00:21:06,820
sort of weird but uh I think that's it

00:21:00,700 --> 00:21:10,630
yeah questions was this something any of

00:21:06,820 --> 00:21:12,550
you guys would see yourself doing either

00:21:10,630 --> 00:21:16,060
for homework or would you consider using

00:21:12,550 --> 00:21:24,300
this in the future for environment yes

00:21:16,060 --> 00:21:24,300
no really cool i'm not the only crazy

00:21:46,700 --> 00:21:49,480
while later

00:21:51,220 --> 00:21:55,250
no that's a physics here here here it

00:21:54,020 --> 00:21:57,460
you're having a good conversation piece

00:21:55,250 --> 00:22:01,630
for the fun catching on to you yes audio

00:21:57,460 --> 00:22:03,860
X me on he is it's on that its own okay

00:22:01,630 --> 00:22:08,060
so actually when you update the state of

00:22:03,860 --> 00:22:09,410
a vm and you actually destroy it outside

00:22:08,060 --> 00:22:11,750
of cloud stick then you're not all day

00:22:09,410 --> 00:22:13,520
updating the nic table for instance so

00:22:11,750 --> 00:22:14,960
in Nick counts not going to decrease and

00:22:13,520 --> 00:22:16,850
then later on we try to destroy a

00:22:14,960 --> 00:22:18,080
network the network is never going to

00:22:16,850 --> 00:22:20,870
get destroyed because they're still on

00:22:18,080 --> 00:22:22,730
Nick plug on it so that those kind of

00:22:20,870 --> 00:22:24,020
issues are actually things that you have

00:22:22,730 --> 00:22:26,660
to take into account when you start

00:22:24,020 --> 00:22:30,350
fiddling around with the database yeah

00:22:26,660 --> 00:22:31,760
it's theirs and if there's a fine line

00:22:30,350 --> 00:22:33,500
which really takes the experience to

00:22:31,760 --> 00:22:35,240
play with the stuff and get a feel for

00:22:33,500 --> 00:22:37,010
it because what will happen is you know

00:22:35,240 --> 00:22:38,300
in the heat in a moment when you're

00:22:37,010 --> 00:22:40,820
going through trying to get that that

00:22:38,300 --> 00:22:42,590
poor database are the vm back up and

00:22:40,820 --> 00:22:44,060
running you're not always looking at

00:22:42,590 --> 00:22:45,620
every single field in there and so like

00:22:44,060 --> 00:22:47,330
yeah when i play with the next to have

00:22:45,620 --> 00:22:48,530
actually ignored the net cows like oh

00:22:47,330 --> 00:22:49,520
it's just a number it doesn't seem to do

00:22:48,530 --> 00:22:51,350
anything i don't have to worry about

00:22:49,520 --> 00:22:52,760
that but it might come back and bite you

00:22:51,350 --> 00:22:56,690
few weeks later when you're trying to

00:22:52,760 --> 00:22:58,820
clean up a question just point out if

00:22:56,690 --> 00:23:01,640
haven't I haven't had to necessarily do

00:22:58,820 --> 00:23:03,260
this in the context of deleting VMs but

00:23:01,640 --> 00:23:05,720
in terms of like I've accidentally

00:23:03,260 --> 00:23:08,210
typo'd the path to an NFS share on a

00:23:05,720 --> 00:23:10,340
sand and things like that and

00:23:08,210 --> 00:23:12,950
unfortunately it's also in some kiss

00:23:10,340 --> 00:23:15,020
signs this is almost a sign of there's

00:23:12,950 --> 00:23:16,790
need for improvement within cloudstack

00:23:15,020 --> 00:23:18,650
to make it easier to modify something

00:23:16,790 --> 00:23:20,480
after you create it if you've made a

00:23:18,650 --> 00:23:25,250
mistake by accident and the resource

00:23:20,480 --> 00:23:28,970
can't come online hmm yeah so any type

00:23:25,250 --> 00:23:30,110
of love the feedback anytime I hear

00:23:28,970 --> 00:23:31,400
something like that I mean it's either

00:23:30,110 --> 00:23:32,720
bring it up on the dev list or bring it

00:23:31,400 --> 00:23:35,120
to us if there's any way we can make

00:23:32,720 --> 00:23:36,920
this stuff better want to talk to head

00:23:35,120 --> 00:23:42,320
in here as you see I always joke about

00:23:36,920 --> 00:23:45,230
the the sequel API you know it's not

00:23:42,320 --> 00:23:48,770
really right but we thought about can we

00:23:45,230 --> 00:23:50,600
make API as for doing this type of

00:23:48,770 --> 00:23:51,860
undelete or something like this and at

00:23:50,600 --> 00:23:53,810
some point we can some of these we can

00:23:51,860 --> 00:23:55,610
probably add in but still also at the

00:23:53,810 --> 00:23:56,680
same time it's like you saw what I said

00:23:55,610 --> 00:23:59,480
the first thing I did is shut down

00:23:56,680 --> 00:24:00,830
CloudStack so I need to be able to at

00:23:59,480 --> 00:24:02,730
least on some of them access outside the

00:24:00,830 --> 00:24:04,200
API but

00:24:02,730 --> 00:24:05,669
for something like if there's ways we

00:24:04,200 --> 00:24:07,200
can improve and make things easier to

00:24:05,669 --> 00:24:09,540
either modify something after the fact

00:24:07,200 --> 00:24:11,610
or give us a little more concrete I mean

00:24:09,540 --> 00:24:15,299
you were talking about resources on a

00:24:11,610 --> 00:24:18,600
was it the sand the case my example I

00:24:15,299 --> 00:24:22,140
couldn't pasted a NFS share last week

00:24:18,600 --> 00:24:24,540
for secondary storage from a GUI which

00:24:22,140 --> 00:24:27,360
added which had the name in quotes i

00:24:24,540 --> 00:24:29,309
ended up pasting a quote and he's

00:24:27,360 --> 00:24:30,840
already mentioned that somewhere i think

00:24:29,309 --> 00:24:33,540
it may have mentioned maybe his last

00:24:30,840 --> 00:24:36,090
name was go ahead so you had I ended up

00:24:33,540 --> 00:24:38,330
trying to find where it was in sequel

00:24:36,090 --> 00:24:41,340
and it up eventually kind of gave up in

00:24:38,330 --> 00:24:43,980
that case I just resorted to deleting it

00:24:41,340 --> 00:24:45,770
deleting it out of the google GUI and

00:24:43,980 --> 00:24:47,850
then creating a new instance and

00:24:45,770 --> 00:24:51,030
although it really doesn't matters as

00:24:47,850 --> 00:24:52,830
much i guess it's great it's nice to

00:24:51,030 --> 00:24:54,990
have a whole record of the history and

00:24:52,830 --> 00:24:57,809
sequel but when I've done logic

00:24:54,990 --> 00:25:00,120
large-scale work it yeah I've had cases

00:24:57,809 --> 00:25:01,980
where I've had 30,000 plus log entries

00:25:00,120 --> 00:25:04,559
and that starts bogging clogged stack

00:25:01,980 --> 00:25:06,870
down so eventually there's going to need

00:25:04,559 --> 00:25:11,340
to be some sort of archiving done or

00:25:06,870 --> 00:25:14,040
move to the secondary table yeah um so

00:25:11,340 --> 00:25:19,200
this well i'm thinking of these slides

00:25:14,040 --> 00:25:21,210
will be online five minutes a good

00:25:19,200 --> 00:25:23,250
question so i put on my stuff on

00:25:21,210 --> 00:25:24,480
SlideShare i believe oh i'll definitely

00:25:23,250 --> 00:25:28,110
sort of send out a link on on twitter

00:25:24,480 --> 00:25:30,030
ones have them up i believe usually at

00:25:28,110 --> 00:25:31,500
the end of these shows Aaron or one of

00:25:30,030 --> 00:25:33,390
us will actually put together like a you

00:25:31,500 --> 00:25:37,710
know a recap of blog post which goes

00:25:33,390 --> 00:25:39,270
over everyone's slide decks but worst

00:25:37,710 --> 00:25:43,380
case if you give me your contact info

00:25:39,270 --> 00:25:46,650
after all make sure I get you yes mind

00:25:43,380 --> 00:25:49,790
sign up there yet I tend to tweak till

00:25:46,650 --> 00:25:52,460
the very last second procrastinator and

00:25:49,790 --> 00:25:54,929
then the other question I had is would

00:25:52,460 --> 00:25:56,160
there be interested I did a blog post on

00:25:54,929 --> 00:25:57,690
this or a series of blog posts to

00:25:56,160 --> 00:26:05,120
actually go in more detail on the sequel

00:25:57,690 --> 00:26:05,120
okay okay yeah

00:26:06,890 --> 00:26:12,929
so along the lines of the the sequel

00:26:10,860 --> 00:26:14,820
statement I'm not as familiar with the

00:26:12,929 --> 00:26:16,140
database itself but I assume that there

00:26:14,820 --> 00:26:18,240
are certain patterns in there do you

00:26:16,140 --> 00:26:21,420
have like some kind of sequel crash kit

00:26:18,240 --> 00:26:22,799
that you can kind of dig into you know

00:26:21,420 --> 00:26:26,280
in these kind of emergency situations

00:26:22,799 --> 00:26:28,950
where you have maybe a common not that

00:26:26,280 --> 00:26:31,590
it's a common occurrence but deleting a

00:26:28,950 --> 00:26:34,140
vm and advertently you know i need to

00:26:31,590 --> 00:26:37,140
get this reverse so shut the server down

00:26:34,140 --> 00:26:39,720
I don't have an API reach into my sequel

00:26:37,140 --> 00:26:41,790
toolkit and you know pick find the users

00:26:39,720 --> 00:26:48,270
ID and then I can execute these series

00:26:41,790 --> 00:26:49,470
of commands and badge i'm not sure if i

00:26:48,270 --> 00:26:52,380
have it i don't have it up right now I

00:26:49,470 --> 00:26:54,360
don't want to our internal uh our

00:26:52,380 --> 00:26:55,440
internal wiki we have those so i can

00:26:54,360 --> 00:26:56,910
probably get some of those little

00:26:55,440 --> 00:26:58,770
Republican that's where when I was

00:26:56,910 --> 00:27:00,120
through these a few these slides up

00:26:58,770 --> 00:27:01,620
that's where they're we've got a

00:27:00,120 --> 00:27:03,480
collection of doing exactly this for I

00:27:01,620 --> 00:27:04,830
mean we do it for we're using stuff on

00:27:03,480 --> 00:27:06,270
the back end so we've got like not

00:27:04,830 --> 00:27:08,370
database stuff but like similar see all

00:27:06,270 --> 00:27:12,320
I think so yeah we that's we entrust

00:27:08,370 --> 00:27:21,090
them like that together other questions

00:27:12,320 --> 00:27:22,470
yeah yeah quite honestly it was probably

00:27:21,090 --> 00:27:26,520
when I was initially setting up the

00:27:22,470 --> 00:27:27,630
cloud this one we spun up less September

00:27:26,520 --> 00:27:30,780
and we're having some issues when we

00:27:27,630 --> 00:27:33,179
built it with a getting cloud stock to

00:27:30,780 --> 00:27:36,240
get stuff to spin up the storage part

00:27:33,179 --> 00:27:38,100
and I'm guessing we justwe're creatively

00:27:36,240 --> 00:27:39,809
creatively create Laden like you know

00:27:38,100 --> 00:27:43,260
keep that low and just get rid of the

00:27:39,809 --> 00:27:46,679
junk quickly and yeah yeah and then the

00:27:43,260 --> 00:27:48,270
other part which should probably worth

00:27:46,679 --> 00:27:49,470
mentioning is when you're doing this

00:27:48,270 --> 00:27:51,270
type of thing from an operation point

00:27:49,470 --> 00:27:53,730
call the customer let them know what's

00:27:51,270 --> 00:27:54,990
going on you know i called the customer

00:27:53,730 --> 00:27:57,660
in this case I'm like oh I guess it's

00:27:54,990 --> 00:27:59,100
time test backups and I'm like okay and

00:27:57,660 --> 00:28:01,140
it turned out this one vm was something

00:27:59,100 --> 00:28:03,390
we'd given them when they were in a demo

00:28:01,140 --> 00:28:04,679
state with us so our demo vm is like you

00:28:03,390 --> 00:28:05,910
know here it is we're not going to be

00:28:04,679 --> 00:28:07,590
managing it as tightly we're not backing

00:28:05,910 --> 00:28:09,360
it up blah blah blah blah and they had

00:28:07,590 --> 00:28:11,340
transitioned that demo vm in a

00:28:09,360 --> 00:28:13,320
production and they weren't really clear

00:28:11,340 --> 00:28:15,240
with us on when that happened so it

00:28:13,320 --> 00:28:17,309
wasn't being backed up so that was that

00:28:15,240 --> 00:28:20,210
was a very tough evening there was a lot

00:28:17,309 --> 00:28:20,210
of drinking down the next day

00:28:20,750 --> 00:28:25,860
well I think and gold you guys good

00:28:22,860 --> 00:28:29,040
lunch was any other questions yeah just

00:28:25,860 --> 00:28:32,940
had one kind of in the context of manual

00:28:29,040 --> 00:28:34,920
database updates and potential new

00:28:32,940 --> 00:28:36,570
features for CloudStack one of the

00:28:34,920 --> 00:28:39,030
things that we've also run into where we

00:28:36,570 --> 00:28:40,380
had to go into the SQL database was when

00:28:39,030 --> 00:28:42,530
have you had problems with the

00:28:40,380 --> 00:28:45,210
management server weird problems where

00:28:42,530 --> 00:28:47,640
suddenly it thinks all the hypervisor

00:28:45,210 --> 00:28:51,120
hosts are offline and then it kicks off

00:28:47,640 --> 00:28:53,100
ha2 every single VM on the cloud and

00:28:51,120 --> 00:28:55,650
we've had to shut it down go into the

00:28:53,100 --> 00:28:57,810
h.a tables change the state so that

00:28:55,650 --> 00:28:59,460
we're not trying to migrate every vm

00:28:57,810 --> 00:29:01,590
from one host to another when it comes

00:28:59,460 --> 00:29:04,500
back up but if there was some sort of H

00:29:01,590 --> 00:29:06,930
a manager within CloudStack that you

00:29:04,500 --> 00:29:08,700
could go in and just cancel migrations

00:29:06,930 --> 00:29:10,440
or manage migrations and these types of

00:29:08,700 --> 00:29:12,090
things yeah that's a good one there's

00:29:10,440 --> 00:29:15,480
another one which has been us will later

00:29:12,090 --> 00:29:20,130
to that when CloudStack is doing its hey

00:29:15,480 --> 00:29:22,530
CheY test if a if a host goes offline

00:29:20,130 --> 00:29:24,360
and then comes back class that goes

00:29:22,530 --> 00:29:25,860
through and starts investigating all the

00:29:24,360 --> 00:29:27,630
VMS to see are they still running what

00:29:25,860 --> 00:29:29,280
really happened over here and part of

00:29:27,630 --> 00:29:32,820
how it does that is it goes to see if

00:29:29,280 --> 00:29:34,680
IBM is alive it SSH into the host I

00:29:32,820 --> 00:29:37,320
think it hops up to the virtual router

00:29:34,680 --> 00:29:38,610
and then tries to ping to vm so what's

00:29:37,320 --> 00:29:39,930
this a security company we've got

00:29:38,610 --> 00:29:41,280
firewalls left and right everything shut

00:29:39,930 --> 00:29:43,860
down pretty tight including paying down

00:29:41,280 --> 00:29:46,320
to general public and so the response

00:29:43,860 --> 00:29:48,000
comes back that oh the no ping the vm is

00:29:46,320 --> 00:29:49,440
dead and then it goes back to the host

00:29:48,000 --> 00:29:50,520
back to cloudstack and clouds that goes

00:29:49,440 --> 00:29:52,590
well i guess i'll delete whatever is

00:29:50,520 --> 00:29:53,970
running instead of some strange state so

00:29:52,590 --> 00:29:55,350
it comes back to the host and deletes

00:29:53,970 --> 00:29:57,870
the vm which was running perfectly fine

00:29:55,350 --> 00:29:58,950
yeah so that's it be interesting to

00:29:57,870 --> 00:30:04,320
expose a little bit more stuff like that

00:29:58,950 --> 00:30:05,520
good good point and what else cool I've

00:30:04,320 --> 00:30:06,830
got one more talk today I'm going to do

00:30:05,520 --> 00:30:09,000
a little advertising here at

00:30:06,830 --> 00:30:11,040
three-fifteen i believe it is we're

00:30:09,000 --> 00:30:13,290
going to be talking next tour about a

00:30:11,040 --> 00:30:15,030
this openssl craziness which happened

00:30:13,290 --> 00:30:16,080
earlier this week so if you guys are

00:30:15,030 --> 00:30:18,270
interested or have any questions about

00:30:16,080 --> 00:30:21,250
that coming that that should be a pretty

00:30:18,270 --> 00:30:23,310
fun talk to thanks guys

00:30:21,250 --> 00:30:23,310

YouTube URL: https://www.youtube.com/watch?v=yQ52JsYMX-0


