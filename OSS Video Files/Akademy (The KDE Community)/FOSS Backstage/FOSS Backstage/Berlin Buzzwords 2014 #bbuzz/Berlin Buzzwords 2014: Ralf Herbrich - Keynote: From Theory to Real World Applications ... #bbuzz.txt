Title: Berlin Buzzwords 2014: Ralf Herbrich - Keynote: From Theory to Real World Applications ... #bbuzz
Publication date: 2014-06-10
Playlist: Berlin Buzzwords 2014 #bbuzz
Description: 
	Ralf Herbrich talking about "From Theory to Real World Applications: Technology Transfer in Practice"

In this talk, I will talk about my experiences of technology transfer over the past decade. Technology transfer - the process of moving promising research topics into a level of maturity that's ready for bulk manufacturing or production - remains one of the largest mysteries. Although each technology transfer was somewhat unique, I found some surprising similarities in the various technology transfers and I will attempt to group and discuss them. During the course of the talk, I will introduce one of the most promising techniques in Machine learning - graphical models and approximate message passing - as well as their application to gamer ranking and computational online advertising.

Read more:
https://2014.berlinbuzzwords.de/session/keynote-theory-real-world-applications-technology-transfer-practice

About Ralf Herbrich:
https://2014.berlinbuzzwords.de/user/366/event/1

Website: https://berlinbuzzwords.de/
Twitter: https://twitter.com/berlinbuzzwords
LinkedIn: https://www.linkedin.com/showcase/berlin-buzzwords/ 
Reddit: https://www.reddit.com/r/berlinbuzzwords/
Captions: 
	                              let's get started a lot of stuff to                               cover good morning everyone                               first as z                                                            and what I want to talk in the next hour                               is is actually tell more of a story and                               in that story it's the story of what                               I've been doing the last                                             the story of technology transfers so my                               I'll start with a bit of I start with a                                bit of background what is technology                                transfer why I'm talking about this                                topic and and then I I want to go                                through two particular technology                                transfers that I've been at a pleasure                                to work with or or to be part of one of                                them concerns a ranking system for for                                people when they play online so how many                                people here have played on Xbox Live not                                that many how many played online on Xbox                                Live halo this is good so I brought a                                video of this game because it seems that                                                                                                       that game so I'm gonna talk about that                                aspect and I'm also going to talk about                                a click-through rate prediction system                                that is that is used now or has been                                used at some of the major search engines                                and major online services but but I want                                to use the opportunity to actually talk                                about and give a little bit of a                                tutorial of of machine learning and of                                methods of machine learning that have                                really risen to prominence over the last                                                                                                        a timeline but it hopefully hopefully                                able to to also shed a bit of light of                                the mathematics and how the mathematics                                translates into into code for state of                                the art machine learning systems and in                                the end what I want to do then is                                summarize those two and talked a little                                bit about the lessons learned both from                                a process point of view lessons for                                technology transfer when you have a                                kick-ass idea and you want to get it out                                to a million or ten million people and                                lessons learned on a technical level                                because machine learning these days is                                extremely popular but it isn't it isn't                                the hammer that solves every problem so                                bit of my background so I'm from Berlin                                actually I'm from Brandenburg but I                                studied here in                                                   actually lift not far from here in                                Karina schlosser and I at the Technion                                Aversa T and what I studied as computer                                science I'm a I've been writing code                                since I was                                                       continued to do and then did my PhD in                                statistics and at the time the field                                machine learning didn't really exist as                                such so it was more the field of                                artificial intelligence                                so then spend                                                         in total at Microsoft Microsoft Research                                in Cambridge where most of what I talk                                about in the story is going to be                                covered from and then spend a year at                                Facebook in Silicon Valley in in Palo                                Alto or Menlo Park and since last year                                September I'm back here in Berlin for                                many years to come working as Amazon on                                the development standards that just                                started here so what is technology                                transfer if you look at a wiki says it's                                the process of moving principle research                                or research topics into a love of                                maturity that it's ready for board                                manufacturing or production now many                                people are super example ticular many                                scientists and the problem is that it                                fails very very often and one of the                                reasons I think it fails is that public                                publishing an idea or making a                                breakthrough in science it's not the                                same as producing producing a product                                building a product has has complete                                different goals and success and exit                                criteria secondly there's really no                                training so you and I could email you                                get good training on a technical level                                that's no training on on what to focus                                on for that process and it is an all                                honesty it is a little hard to                                generalize this process so I'm trying to                                so I'll try to think that I'm actually                                criticizing here but it it isn't a                                magical five-step procedure you follow                                them and your idea will definitely end                                 them in a product um so let's start with                                 the first with the first case study I'm                                 a system called true skill I'm given how                                 how many people play xbox life I guess                                 that name doesn't ring about the                                 official name for the ranking system and                                 so the process started back in                                         in July in June July                                                internal beta test of a game called halo                                                                                                       I'm gonna have a video of a similar game                                 later and a colleague of mine Torah                                 grapple and I we were we were playing                                 this game and as we played it we were                                 actually really into gaming online                                 gaming realize that graphically and from                                 a network is super good but what was                                 really not well is we got matched with                                 who we played with every night and so we                                 thought about it from from a statistical                                 modeling or machine learning point of                                 view what is the problem that we're                                 trying to solve here and so on you when                                 you try to formalize this the problem is                                 that at the end of a match you have the                                 outcome of the match of K teams so                                 here's an example we have two teams the                                 red team and blue team and they have a                                 particular score so in this game they                                 shoot at each other                                 so in this came in this particular case                                 the red team won over the blue team so                                 that's what you know which team had how                                 many points the end of of a game this                                 could be a racing game or a shooting                                 game or game of chess and you know which                                 players are in which teams and one thing                                 that was particulars that there were                                 many different kinds of games so you                                 didn't have just two team games you had                                 to build a system in that game in that                                 particular instance that would also                                 cover eight people playing against each                                 other and then the possibility of some                                 of them drawing because they have the                                 same number of points okay and the chart                                 the challenging thing is that this is                                 the data you have the data is who played                                 in which team which teams played against                                 each other and you needed to associate                                 or find or learn a number for each                                 player a skill number that had the                                 property delivery skill of player is                                 bigger than the skill of player J then                                 the probability that that player will                                 win when they even when it paired up                                 against each other is LA it's larger                                 doesn't mean they went all the time but                                 it means it's it's it's more likely and                                 so why is that important that's                                 important for two reasons                                 it was clear we wanted to know the two                                 of us who's the better but more                                 importantly it's very important when you                                 want to match people against each other                                 and you look at an online universe today                                 there's usually hundreds of thousands of                                 people simultaneously live online being                                 able to play against each other but only                                 know they could not judge what is a good                                 match for them so if you're doing a                                 global scale you need a system that is                                 able to pick the best combination of for                                 six to eight players that play against                                 each other so really what you want to do                                 is you have these match outcomes that's                                 your data who plays against whom and you                                 want to kind of interleave them so you                                 get to a global ordering that somewhat                                 Khan                                 assistant with the local orderings you                                 have the subset of players so that's the                                 mathematical problem and so what we did                                 is then in the in September that that                                 beta test stopped and we started to                                 think okay how can we build a model for                                 this a machine running Marlin but we                                 started with is a probabilistic model so                                 for the next literally next three months                                 only until December of                                               years ago we built that and so that                                 model we had in mind we're thinking well                                 what we suppose we know what my skill is                                 and and tourist skill then there is a                                 probability that each of us has a                                 particular performance in a match so you                                 see the distribution on the right and we                                 know that from that performance we can                                 work out how likely is the blue player                                 to win let's say that's me and the red                                 player because that's nothing more than                                 the area under this curve so that's a                                 particular Gaussian integral you can                                 solve that now we thought well in a game                                 like Xbox that has many modes that's not                                 just two players not like chess so how                                 can we generalize this to two teams and                                 we make the simplest possible assumption                                 which is that the performance of a team                                 is the sum of the performances of its                                 players so you have these performance                                 variables they end up being something in                                 memory and then you have the same the                                 same model given the two performances of                                 team one and Team two the team with the                                 higher performance is more likely to win                                 because you have these Gaussian drops                                 and you get a Gaussian integral for that                                 team performance one being bigger than                                 the performance of team two but again we                                 had teams of we had actually to cover a                                 situation where we had more than two                                 teams so what did we do there well                                 intuitively would do the most natural                                 thing you would say the team's                                 performance is the sum of the skill of                                 the sum of the performances of its                                 players but now you have a very large                                 number of outcomes even with three teams                                 you already have six possible outcomes                                 all permutations of team one wins over                                 team two were with him three team one                                 over team three over team two and so                                 forth so that looked very difficult to                                 solve or two to sample but then we                                 realized we don't have to do this we                                 have the data the one thing that's                                 certain and that's that's interesting                                 the machine learning is you have the                                 data but you don't have is these numbers                                 s so what used to be fixed in our model                                 is not what we sexually fix what's                                 actually fixes the match outcome at the                                 end of a shooting match we know which of                                 the three teams came first came second                                 and came third                                 so when you do that you actually make                                 the skill variable something that you                                 that you don't know that the model has                                 to estimate and you make the outcome one                                 beats two and at the same time team two                                 beats team three                                 the observations and you end up with                                 these very simple trees and so what we                                 implemented is known as a as a Markov                                 sampler as a Monte Carlo sampler so                                 simply assuming at the end of a match                                 this team won over this team this team                                 won over this team we implemented a                                 random sampler that would generate how                                 likely is s                                                              given number provided that we throw all                                 throw away all the samples where the                                 skills are not in the right order                                 according to match outcome so we                                 implemented this but then we realized we                                 had two problems to solve one s we had                                 to solve the the ranking problem and now                                 what we end up with is a distribution                                 over skill something that is not some                                 it's not a number so when you do that we                                 wonder well if we have to decide on a                                 global ordering what kind of mistakes                                 could we do there's two types of                                 mistakes we can do we could either are                                 up because we had too little data match                                 outcome data we could either put a bad                                 player at the top of a leaderboard or we                                 could put a good player a really good                                 player at the bottom of the leaderboard                                 so which one of the two do you think is                                 is the worst of the two mistakes to do a                                 bad player on top or a good player to                                 bottom why that's right that's right                                 but but if I ask you in Formula one                                 who's currently the eighteenth                                 understanding can you name me that but                                 if I ask you who's the currently the top                                 of the leaderboard I'm sure you can name                                 me that most people focus on the top of                                 a leaderboard even those that are not                                 very good so if you want to have a                                 legitimate leaderboard you got to make                                 sure the top is accurate and there's not                                 bad player in there so that's why we                                 decided for an asymmetric loss and what                                 you end up doing is when you sort people                                 you look at their mean skill the                                 variance and you subtract the two it's a                                 very simple equation to implement and                                 then you sort so that was extremely                                 simple to sort the second thing we had                                 to do is we have to do matchmaking which                                 is end players like a hundred players                                 are online at the same time which two                                 are the best match and we use the very                                 intuitive                                 equation that is a closed form a closed                                 form equation that you can work out is                                 basically saying for two players IJ                                 there are currently life and can play                                 online what's the probability that they                                 have the same performance and we                                 normalize this by assuming we had                                 identical players same mean skill saying                                 no more uncertainty about their skill so                                 if you do that then you get something                                 that is that gives for gamers something                                 exciting because it's a it's the kind of                                 match where the outcome isn't determined                                 until the end of the match but also when                                 you look at an information theory it's                                 the most informative outcome it's                                 something is the match that creates that                                 gives the best information so after                                 three months all the work was done so it                                 was merely a question of a few months                                 until this would be out in the hands of                                 gamers well that's not entirely true we                                 can guess that given at the given the                                 arrow it's gonna go on for a little                                 longer so in the next three months we                                 literally wrote the code I just                                 described and incorporate it into the                                 code based off of xbox live which was                                 going to go live in November that year                                 so we knew that the launch date was                                 November                                                           service and the last generation of Xbox                                 but what happened now is the game                                 developers the people who actually make                                 the silicon into something useful they                                 needed to understand what this new                                 ranking system is and how it works and                                 how they can find you in their games so                                 we spent an entire e of six months not                                 writing any code not doing any research                                 but having to go around and talk with                                 all the launch developers how to use                                 this new system how to show skills how                                 to you know how to trade off waiting                                 time in the lobby and match quality                                 because the match quality of this was                                 probabilistic it was pretty accurate but                                 it was unknown it was not something even                                 the api's burn burned the weren't                                 exactly the same as they used to be                                 before so then in November the game                                 launched and something good happen and                                 bad happen the good thing that happened                                 is Xbox that I've became extremely                                 popular more popular we thought we had                                 implemented this sampler and this                                 sampler was very slow I mean we                                 estimated perhaps a million people come                                 online but it was it was growing so fast                                 that it was clear that if we don't speed                                 this up then by three months in we                                 wouldn't have the code wouldn't be able                                 to execute on the matchmaking server                                 anymore on the ranking server so we                                 needed to do something to speed this up                                 and this is when we went back to the                                 drawing board and actually did some                                 research for four                                 of month and it's a methodology that is                                 it's proven extremely powerful so I want                                 to go a little deeper here something                                 that I've been using ever since and and                                 it's it's a it's something that relates                                 nicely to to computation as well and to                                 coding it's a framework called facto                                 graph so you you saw these graphs or at                                 these variables they ended up just being                                 storage you just stored is in memory or                                 in on registers but now in an effective                                 graph you also represent the factorial                                 relation the product relation between                                 two any sets of variables when you have                                 a probability distribution over match                                 outcomes or over skills so a simple                                 thing it's actually just graphical so if                                 you have effect the graph over three                                 variables a b c and it looks like that                                 that really just means that rather than                                 having an arbitrary function p                                 probability of all data you actually                                 have something that effect arises in a                                 factor of a a factor of B and the third                                 factor connects uses all the three                                 variables so it just says how many                                 factors do I have and how many variables                                 does each factor really interact with                                 and whereas that become important it                                 becomes important in our example here                                 because in base law we knew that what we                                 really computed is the probability of                                 the skills given the match outcome and                                 when you look in the textbook that's                                 just the probability of the match                                 outcome given the skill times the                                 probability skills so it's two factors                                 that's the first factor that's the                                 second factor let me realize we don't                                 have an arbitrary relationship between                                 them what we do is we actually assume                                 that all the skills of people are                                 independent so skill one skill two are                                 independent of each other meaning we                                 have a set of factors for each of the                                 for each of the variables we also                                 realize that we have a rather linear                                 flow of forward flow of what we think                                 makes makes a make makes a game end up                                 in a win or a loss for a player which is                                 that each skill is connected to a                                 performance of the team the performances                                 of the team are connected to a                                 difference simply by taking the                                 difference of them and the difference                                 being positive results in one player                                 winning the difference being negative in                                 the other so you have this graph here                                 and the computation that you have to do                                 that was too slow was the computation of                                 summing out the variables team variables                                 and the difference barrels if you know                                 if you don't have these variables then                                 mathematically you have just computed                                 the what a machine can best think about                                 the best skill estimate for a player and                                 turns out that this summation can be                                 done a lot faster than some                                 generating random samples of s                                         then throwing all of them away that                                 don't result in in the data you actually                                 observed the Metro outcome and here's                                 the here's how that works so imagine I                                 just turned this thing on its head                                 imagine we have four factors and five                                 variables V W XY and Z and what we want                                 to compute is what's the what's the                                 distribution over W so all we need to                                 only to do is we sum over V XY and Z so                                 if you do this in a naive way you can                                 see that this is this is non computable                                 it becomes np-hard because this is an                                 exponential number of summands                                 that you have to do so for every value                                 of V that says only two values that                                 would already be                                                                                                                              more variables we have we had over a                                 million gamers and men you know even                                 with                                                                    State to sum over but one thing that's                                 interesting when you look at this at                                 this graph the picture you can see that                                 W is really only involved in                                                                                                                     f                                                                      see that we can take one factor which is                                 the factor of                                                      factor the other set of robots on the                                 right and we just turned a sum of                                 products into a product of sums and if                                 we simply introduce a shorthand notation                                 something that we a temporary storage                                 for for this function so this is still a                                 function of W this is still a function                                 of W after summing out x y&z we now get                                 one of the first relationships is when                                 you want to compute the margin of anak                                 machine wants to compute the margin of a                                 variable it just needs to set to take                                 the product of these neighboring                                 functions em that neighboring to the                                 variable to the factors of this of this                                 variable and how is the equation looking                                 for that message same thing again F                                      a factor has only two variables WN x y&z                                 are not variables of F                                                 we can again use the same trick and make                                 the sum of products into a product of                                 sums here's the product it's just called                                 distributive law but what's nice is if                                 we now introduce a shorthand notation                                 for this term we see that all we need to                                 do in any given factor we just need to                                 do a computation along the edge by                                 summing out the summing out each of the                                 possible variables that is connected to                                 and                                 waiting them by this message and this                                 message we already seen how to convey                                 compose that it's just the product of                                 these incoming messages that we just                                 defined so if you put these three                                 together you saw how I peeled this graph                                 away you see that the number of                                 computations that are actually need to                                 do is only as many as I have edges and                                 these ranking graphs have very few edges                                 overall we may have a million players                                 but at each game has only as many edges                                 of people participating so this actually                                 when you implemented this ever what                                 implement this this would compute the                                 margin of the posterior of this variable                                 in in linear time rather than                                 exponential time the only the only                                 tricky thing is that even these                                 operations are extremely simple to do if                                 if the message if these functions M are                                 known as closed on a product meaning the                                 you take a product you can just reduce                                 it to a parameter updates this message                                 equation doesn't have that property so                                 the only thing we need to do is what can                                 we do in message passing when we have                                 messages like the last one in the bottom                                 you saw where if I win the game then                                 only those only those performance                                 differences which are positive are                                 justified by the data all the others                                 have zero justification so if you                                 multiply these two together and say it                                 was a Gaussian then you don't get a                                 Gaussian anymore but all you're doing is                                 you just approximate that Gaussian by                                 the closest possible Gaussian you can                                 you can store and the nice thing is when                                 you approximation you just store two                                 numbers and mean in a variance and then                                 what you can work out is the thing to                                 solve is what's the best approximation                                 for this red curve here which we need a                                 lot in the ranking it's not actually in                                 any approximation to a to a step                                 function it is just another Gaussian                                 because if you multiply that blue ocean                                 by that right Gaussian which is a                                 horrible approximation when you just                                 look at the pictures you get something                                 that's very close to this approximation                                 so so it's extremely accurate and how                                 did we use that well here's the graph                                 again from before three teams one team                                 has two players they played against each                                 other we know that this player is very                                 good he beat this team of two this team                                 of to beat this single player we turn                                 this into a vector graph so that's just                                 that way                                 and then we perform we see that the                                 product of these factors what we might                                 call a prior the product of these                                 factors summing out the T variables is                                 what we might call a likelihood so we're                                 back to base Bayes rule but if you                                 implement now just the code for these                                 for the updates on the arrows and we've                                 done that so if you go online you can                                 actually download that code as many                                 implementation that's one of them in F                                 sharp it's it's a couple of hundred                                 lines long it's literally just                                 implementing the equations I talked                                 about before that store meaning the                                 variants in each of the in each of these                                 variables and just update the mean and                                 variance is on each of these variables                                 this is known as a schedule but think of                                 it is this is just how the code gets                                 composed you're actually having a                                 machine build a machine learning system                                 that solves for the best possible skill                                 for the best possible skills of the of                                 the gamers now by December we should be                                 finished with that transfer but the                                 reality was is we had to implement that                                 and that took three months the reality                                 was that many many games had a hard time                                 still adopting and knowing how their                                 community looked like so the next thing                                 we needed to do is actually develop a                                 tool that helped game developers to see                                 how is my population of gamers have                                 placed my game how is that actually that                                 population how is that spreading out                                 over the skill skill access that we have                                 and and how how how now how complicated                                 is my game so what we needed to do even                                 though we were kind of more in for                                 research is we need to write a project                                 that would scrape the application the                                 matchmaking servers and reconstruct                                 what's the skill distribution in every                                 single game in every single session at                                 every single hour because what we                                 observed is that people were saying this                                 this doesn't work I'm still playing and                                 people that are much better than me or                                 much much much worse and what we                                 realized and only after we've built this                                 tool so here's how the tool looked saw                                 it in F sharp used at a time used                                 WinForms so it scrapes them and now you                                 could see what's the so what's the                                 popular how many sessions on every hour                                 of the day that we have I think I and                                 from which countries one thing you see                                 is that there were times in the day                                 where are very few gamers online so that                                 simply wasn't a good match available and                                 and that data                                 was invisible before and it wasn't                                 something it was necessarily planned                                 because the math says this is the best                                 possible match but if you have no Kenya                                 to be matched with that self good skill                                 you still get a very very bad                                 matchmaking experience and so as a                                 result of this and realizing that only                                 the very popular games really have                                 enough gamers at any given hour we                                 actually were able to give some advice                                 on what to do to prolong the waiting                                 time in a lobby one other interesting                                 side effect was is that we could measure                                 the complexities of game so when you so                                 we always the the skills were numbers                                 that were scale between                                                  thing we realized is there was a game on                                 the market this was a golf game where                                 people played                                                           lasted for about an hour when you played                                 it online but admit this hour meant that                                 the slightest difference in skill really                                 realizes in the best player winning so                                                                                                      represent the the various chains of                                 skills between players on the other hand                                 we saw a game like uno which arguably                                 has no skill because it's just a game of                                 chance and this real realized himself                                 this is one of the most popular racing                                 games that really it was well designed                                 for that most gamers were fitting on                                 this                                                                   for fitting on the                                                    also a slight bias at zero because most                                 people were new give us a good sense of                                 how many new gamers are coming now what                                 happened is this helped game developers                                 a lot but and we we again went I wasn't                                 met with a lot of them epic games and on                                 boards so we didn't do any research we                                 didn't do any code but by June there was                                 sort of tipping point                                 no major game had been using it and so                                 we had realized that if the major game                                 on the Xbox platform halo                                               use it then we have a hard time for the                                 developer community to see that this is                                 a system that really makes a for a good                                 matchmaking experience when you use it                                 so we started to work with Bungie which                                 started the team started to to build                                 that game for a platform for Xbox Live                                 platform that early on it launched about                                 a year and a half later and so in that                                 what we the first thing we had to do is                                 we simply had to see had to answer the                                 question if we had used halo                                          used to skill in halo                                                what every everyone's skill have been                                 how accurate could we have predicted the                                 matches that happen because by that time                                 hey Lou two came out here right remember                                 this was actually a starting point of                                 the project we had over                                             matches of over six I think at the time                                 six million people so this was a huge I                                 mean this is before Hadoop or just about                                 the birth of Hadoop there wasn't much                                 distributed computer around so it's a                                 huge amount of data we analyzed things                                 in a sequel database still and I've been                                 talking about halo                                                       me just show how the game looks and so                                 you have a sense of what triggered this                                 project so when you start halo that's                                 the Start screen you see two options you                                 can play the Curia or you can play the                                 campaign or you can play much making you                                 choose matchmaking you can choose any of                                 these game modes so here's the ranked                                 list six players against each other                                 teams they are two players of three to                                 four people each team doubles so you                                 choose you have a single level that you                                 see in the games from the game you can                                 actually see the distributions of skills                                 something that we've built before Bungie                                 took this on board and actually made                                 this visible so people saw how many                                 people were around to match with and                                 then when you put a new selected                                 matchmaking it would actually go into a                                 lobby you would wait for at most two                                 minutes                                 besides speed it up a bit so now you're                                 matched against people and one thing you                                 should see is total experience is a                                 number of games played and ranked                                 matches                                 sorry ranked matches number of games                                 played and you always get an experience                                 point if you win look at the ratio                                 that's from a live session okay about                                 one to two let's sort of game this light                                 so you play in teams or alone your your                                 soldier in some alien world for those                                 who haven't played it and the thing that                                 people really like about this game on                                 it's very tech savvy that keeps them                                 coming back is what you see in bottom                                 right this is a score the red in with                                 the score of the blue team okay so what                                 people really like why they come back is                                 if a debts with that tight when you get                                 matched with some random three people                                 against some random other four people                                 and in its ten-minute match they they                                 really are fighting it out and it's                                 extremely tight so you get a sense of                                 why you shoot at each other                                 it's actually really fun I mean I wasted                                 a minimum of the three-month of my whole                                 life just playing this okay so that's                                 that's halo                                                              we needed this this tool that actually                                 first showed demonstrated for us and for                                 the game developer Bungie that that was                                 that was actually it was working it                                 would have given us accurate skill                                 estimates if he had used it so if we                                 wrote this and at the time there was no                                 distributed framework so we had to                                 distribute and had to do all the dotnet                                 remoting distributed computer ourselves                                 we analyzed over                                                        already had happen in different settings                                 of some of the parameters and with                                 respect to drawing and not drawing and                                 how quickly players progress so just the                                 logs produced                                                          looking at them so this was all                                 happening there was no halo                                              something that needed a result viewer                                 and so as the researchers we wrote this                                 so if you send how this looked so you                                 could go in and you could choose the                                 hyper parameters and you could now see                                 over the skill levels sorry over the                                 number of games played how would this                                 level progression have been for the very                                 good players or the not-so-good players                                 had we used it how would their skill                                 levels have progressed and we could see                                 at any given time what's the                                 distribution of skill levels because one                                 thing that was important is that people                                 weren't progressing so fast the system                                 was so accurate this was far too fast                                 something that no one was really happy                                 with if after                                                                                                                                     high level you would be not having this                                 level of experience as a gamer and you                                 wouldn't necessarily trust that you're                                 you didn't start playing because you                                 would worry that if I don't make the                                 fast progression another gonna get there                                 that's not true but you know you                                 wouldn't you wouldn't put those extra                                    games in and so people would not play                                 the online mode again lots of lots of                                 little little side projects to do for                                 example one thing we needed is we needed                                 spline spline for the dampening so one                                 thing one thing that to introduces slow                                 down the inference and we did that by                                 dampening and we needed to do it                                 smoothly so that was an interesting side                                 project so by May                                                       we had another two months of research                                 we're actually able to now incorporate                                 it into a public                                 so before halo                                                        people actually played the game for two                                 reasons I mean one was to test the                                 codebase but the two main reasons was to                                 check the network code so even if you                                 play transatlantic games a mob so                                 latency and did all our simulations that                                 happen here that he actually hold true                                 when we put this into the game so the                                 only thing you could place the online                                 going the online mode so we needed to                                 develop one more tool for for Bungie and                                 that tool was something that allowed                                 them that allowed the game designer                                 online game designer to actually set the                                 curves of dampening as a not as a                                 function of number of games played skill                                 level and match quality so even if you                                 made a bad match he doesn't didn't                                 necessarily want that to affect your                                 skill so you skill estimate so much and                                 then we could see in from the beta what                                 the skill what the attribution I mean                                 you see this graph in a minute how many                                 people that hire on a given skill have                                 lost or won all their games in Nevada so                                 the ultimate test for that this system                                 actually work and the ultimate get go                                 through two and a half years later was                                 actually taking the beta taking this                                     million gamers and then looking at them                                 and saying well if this system works we                                 should see two properties the fact the                                 good gamers should converge to the best                                 skill within roughly a hundred games                                 that was a design parameter and secondly                                 if we look at number of games played so                                 if you played one game half the people                                 lost that game half the people won that                                 game a few of you too a few players drew                                 because the time ran out but one thing                                 that should be true is it should be a                                 good match making it should be a good                                 ranking system so the number of games                                 that people win and lose their age the                                 fraction of games should be                                             I press go on here you see the video and                                 what it does is it looks at all that                                 people that have played in games so so                                 far it is                                                                                                                                   the beta and so forth so in the end                                 we're looking at three thousand people                                 that played three hundred games in these                                 six weeks that the beta was on but                                 what's the and you see a plot you see a                                 dot and the dot is always what's the                                 fraction of games won and what's the                                 skill level of that what's the strength                                 of that player                                 so what what should that graph look like                                 for a good ranking system should be it                                 should be a diagonal line so if this so                                 if this is a diagonal line that would be                                 a random matchmaking system because that                                 means that if you're really bad you lose                                 all your games not an experience you                                 want to create for people that's not fun                                 and if you're really good you win all                                 your games what you want is a bar a bar                                 means a bar at                                                        that means that regardless of your skill                                 level you wouldn't lose half your games                                 perhaps has a stretch where you win some                                 and lose about overall you win and lose                                 half your games so this is the this is                                 actually the real data this is a quite a                                 lot of data in the video this is all of                                 my chart comes from                                                    that played up to                                                       seeing at the hundred games roughly the                                 best people have reached the top level                                 it took a while and now this one is                                 gonna is going to become more and more                                 of a bar                                 it's Flickr's more because there's less                                 and less people have played                                             so forth games so it's it's less it's                                 much more coarse now and the reason it's                                 not at                                                               count like a half win so half lost so                                 that's why it's a bit it's a bit shifted                                 so that meant that was actually good                                 news for us because that meant that this                                 is                                                                  claiming on boards and blogs that you                                 know the sucks I win all the games I                                 lose all the games it's just not true                                 like not this there's not a single dog I                                 left out there's no gamer in this big                                 collection that actually lost more than                                                                                                         of their games so the the service                                 launched in                                                             one and halo                                                            and for the longest time it was one of                                 the most popular online video games on a                                 console I think it's now superseded by                                 others but at peak times the game had                                 had                                                               playing online so when you look at that                                 line it's actually pretty long                                 considering that that we started with                                 this just with a hunch and wanting to                                 build this for ourselves and the lessons                                 learned here was that if you look at the                                 red bar                                 that's the smallest one research takes                                 the smallest time and in this transfer                                 about six months when you when you add                                 them all up and all of the development                                 wasn't necessarily the algorithm was a                                 lot of tools that we needed to develop                                 and one big fraction was evangelization                                 you know a platform only lifts if it has                                 a community this is a platform feature                                 if the developers that need to use this                                 platform feature can't use it because                                 it's not well explained or it's it's                                 it's it has the wrong API it has the                                 wrong parameters to tune it's not going                                 to get adoption and the other thing is                                 for ourselves this idea of the most                                 optimum edge wasn't necessarily                                 something that people wanted there's a                                 hard lesson for us to learn even though                                 this system was information                                 theoretically optimal it learned                                 extremely well we could you could even                                 be even showed that it was close the                                 information theoretic minimum limit                                 meaning you couldn't design a ranking                                 system that given this data can learn                                 more accurate skills that doesn't mean                                 it's fun that might scare you away if                                 you're jumping                                                      first game so then winning it down                                 making it slower was actually really                                 important so mathematical optimality                                 doesn't actually mean fun for a fork for                                 gamer or customer so second example is a                                 bit shorter is on a ranking system which                                 is known as that predictor so the paper                                 was published in                                                        details just kind of touch up on it the                                 it started a little bit pretty much                                 after this one the first one finished                                 and what happened is that in in the                                 first three months we kind of got                                 familiar with the problem we first                                 needed to understand what's the problem                                 the problem was so this is back our                                 today life search was one of the search                                 engines when you type a search clear                                 like Seattle into a search box you get                                 this green block when you get this                                 yellow block of content back and it                                 differ insofar as those are clearly                                 marked the sponsored results and those                                 are non sponsored results what does that                                 mean that means someone's paying for the                                 for the results that are shown in the                                 shown in yellow in fact let's suppose                                 Seattle American Airlines versus America                                 and American Airlines paced this is                                 fictitious figures pace a dollar this                                 the site pays two dollars and this side                                 pays only ten cents so why are they in                                 this order the reason they're in this                                 order is                                 because they only pay when a click                                 happens meaning they get someone to                                 their site and that guy the person                                 potentially buys a trip with with                                 American Airlines so what the platform                                 has to do it has to estimate these                                 scientists these these numbers assess to                                 mate how likely is a person going to                                 click on American Airlines and we show                                 American Airlines now that's gonna make                                  the value of that customer when he gets                                  to American Airlines side is $                                            Airlines said this but life search                                  estimates that that will happen at                                      so the effective value shot for American                                  Airlines are showing this is                                              now that explains why the order is how                                  it is what it doesn't explain is what it                                  doesn't answer yet is if the click                                  happens should be charged shut this                                  platform charge American Airlines $                                   question should he pay the dollar that                                  they put in a bid who thinks yes ok what                                  happens if they go to                                                   changed a bit to                                                     change a bit to                                                           for them they still going to be shown                                  there                                                                     that means they still get the same                                  impression if you get the same number of                                  people                                  the customer can't see this difference                                  so what's really case is that you should                                  when you charge the dollar you in send                                  this this advertiser to actually go and                                  not say how value was the customer but                                  say how value is a customer minus the                                  value of the custom of the second                                  highest bidder so it should really                                  charges                                                                 there where we basically equated                                     cents with                                                              what would that bit have to be for this                                  to be                                                                 would happen if the advertiser is                                  charged is spitting less than                                          they lose their position and they get                                  less clicks okay so probabilities are                                  important because it's important to                                  display so you need to have the bits                                  that are not set by the bits are set by                                  advertisers and you can multiply them                                  with the probability that has to be                                  estimated                                  and for the charge for the charge he                                  basically as we just didn't we just said                                  this bit is too high so what charge                                  Siwon have to be in order for c                                         p                                                                         solve that one it's the second bit times                                  the ratio of probabilities okay                                  so that's how probabilities occur so                                  they if you have better probability                                  estimates makes more happy users because                                  you don't show them ads that you don't                                  want to see makes me happy advertisers                                  we charge them more fairly and overall                                  you can show that's actually increasing                                  the overall revenue so what happened in                                  March is that there was a competition                                  internally launched and so for three                                  three months we actually did a lot of                                  research on what what systems could be                                  used and a lot of the research was                                  actually more focused one lesson we                                  learned is that the quality of the data                                  makes a makes a big difference meaning                                  the how do we represent how does an                                  algorithm see in hat and see the user                                  and see the context the brows and all                                  that                                  oops that's meant to be the search page                                  so the people see the search page this                                  is how the logs it's just raw numbers of                                  which IP you know what time of the day                                  what ads were there what the ID of the                                  advertisers so the first thing we did is                                  we actually needed to translate this                                  into structured objects what was the                                  advertiser what was the campaign but                                  what's the order what was the ad what                                  was the text in the ad what was the time                                  of the day what was the the user so we                                  expected that and spend a lot of time in                                  parsing but also making this fully                                  automated so we validated the data                                  cleaned it and had a very automated way                                  of allowing us to write this code and                                  then use it in production so what we                                  were we actually spend half of the time                                  of the project on is writing a schema                                  generator                                  remember this is we wrote the structured                                  information that we wanted to know so                                  what medium was it give you an idea what                                  was the advertiser ID what was the gent                                  inter-gender of the user what was the                                  query string of the user type so all                                  this was part of this long log so what                                  we did is we wrote these types and then                                  wrote custom parsers for them so as the                                  actual bid the match type exact or not                                  exact and so forth and then we wrote a                                  library that just allowed us to point                                  Ross CSV file do the parsing but then                                  compute simply from the type the entire                                  sequel schema so this is this little                                  command bout build that would point to a                                  server to a table and a sub table name                                  and that schema now allow us to simply                                  insert so this is a F sharp is a bit                                  like Okemo think of it as oh camel just                                  to insert these strongly the strongly                                  typed objects but it did it at such a so                                  we could we could do this in SQL we                                  could actually look at that data but it                                  did it at such a high speed that we                                  could also use it in production the                                  actual in the actual code that ran when                                  it trained from the from the massive                                  amounts of data we didn't have to write                                  two types of code one for data analysis                                  and one for one for visualizing the data                                  and be inserted into a sequel server the                                  model was extremely simple and I'm going                                  to go to D but it's the model is very                                  related to to the model we used for                                  gamers we were basically thinking each                                  of the aspects of an ad and of a user                                  and of the context it's a bit like a                                  player in a team so we have players that                                  are representing the user we have                                  players that represent the match type of                                  the ad if players that represent the                                  position where it was shown and what                                  happens is that the particular value of                                  this player a particular player so it                                  was in the main line the first one and                                  it wasn't a broad match so the the                                  keyword that the advertiser bought                                  wasn't exactly the the the query that                                  was typed by there but a user and the IP                                  there was a particular configuration of                                  players that played together and if the                                  click happened they won the game against                                                                                                        lost the game against                                                   similar mathematics I showed you before                                  which gives you a distribution of a                                  probabilities of click and all you need                                  to store in the model is actually just                                  these skills or these mean variances of                                  in physics that called effects so code                                  was was very similar so by May                                       you'd think Oliver Oliver this all work                                  is done but first of all we need a real                                  evaluation and this one was this time                                  you couldn't avoid so but this time was                                  is literally the fairest possible                                  comparison I can think of in that every                                  research I didn't have to submit some                                  offline results I can Cagle                                  but you had to submit code                                  and that code would now be run in shadow                                  in parallel on data that's only                                  generated in May so this data was                                  actually not available the the actual                                  clicks non clicks generated at the time                                  of the evaluation and so by August of                                  that year it was clear which which was                                  the most accurate and also which was the                                  simplest system that wouldn't run out of                                  memory wouldn't run out of compute so                                  what you see here is the visualization                                  of the accuracy that was the existing                                  system at a time and and to give you a                                  sense how this is generated the way this                                  is generated is that you take each                                  particular ad that was shown or and then                                  I was click or not clicked the system                                  you know you give the ad computes the                                  probability of click there's a real                                  number one zero one percent so you take                                  that number and you discretize in this                                  case in one or thousand buckets okay so                                  it was either                                                      percent                                                                   millions of millions of predictions                                  means that each of these buckets ends up                                  having a lot of examples falling into                                  them and then because it was all                                  happened in the past it's it's for                                  evaluation you know for each bucket                                  what's the actual empirical ratio the                                  actual ratio of clicks so if you have                                  let's say this is an order of tens of                                  millions tens of millions of these lines                                  and you put them in a thousand buckets                                  each of them have enough examples in                                  there that you get a good good sense of                                  how a good estimate of the actual                                  click-through rate and the size of the                                  bubble is proportional to how many                                  things fell on that bucket okay so what                                  you see here is the                                                    what you're after you're after a system                                  that when it says                                                        point five percent of the time that the                                  system says this a click actually                                  happens the customer actually goes for                                  it so it was actually fairly accurate                                  and another nice effect is memories team                                  setting we had these teams of users so                                  at the time IP you could actually see                                  for each player so to speak more                                  statistics each affect how likely what's                                  the mean and what's the variance how                                  likely are they to click lead to a click                                  and not click so those were                                  understandable there's are people they                                  never clicked on ads                                  and there were lots of them so is the                                  bubble plot but then there were also                                  these people very few but there were                                  people that whenever they saw an ad they                                  would click on it always and the reason                                  this is actually an interesting one is                                  because the incentive structure is a bit                                  skewed here if you are if your                                  advertiser runs out of budget because                                  somewhat clicked on all the links on all                                  the ads whenever they appear then you                                  get to pay much less because now there                                  is no wonder you compete with so you can                                  go in with a lower bid so this was                                  actually sort of a false industry of                                  clicking on competitors ads in order to                                  deplete their budget in order for you to                                  not pay as much for net okay so we                                  already already nine months in so                                  happened now I said everything was                                  developed for single machine learning                                  but the stream of data was even bigger                                  than that of online games so now we need                                  to spend a lot of time mapping this                                  bring this whole system onto Map Reduce                                  because we didn't design it for that                                  scare at the beginning and what the way                                  we did that is so we have this                                  mathematical aspecto graph again where                                  we have a probability of the parameters                                  here and then each data think of them as                                  chunks of data is like a factor given                                  the parameters given the for the                                  parameters simply RSD the means and                                  variances of all possible effects you                                  know we the message passing would say                                  you compute those messages send them                                  here you sent this message multiply you                                  have your result but the problem is none                                  of this all of this computation can't                                  happen on a single machine so the way to                                  map this to MapReduce is that in a map                                  stage you actually send those messages                                  which is just the prior to each of the                                  machines that hold a chunk of the data                                  okay and in the reduce step each of them                                  computes the message that the amount of                                  information that's in the data sends                                  this back over the over files into the                                  reducer the reducer would then combine                                  by simply multiplying those messages                                  which is when you look at the code it's                                  just adding two numbers together for                                  each of the possible values which are                                  also feature values that it has seen in                                  a chunk of data it processed and that                                  would give you if everything was                                  accurate inference would actually give                                  you the the posterior in the best                                  possible                                  everything being firebase is not                                  necessarily super fast but at least it                                  scales one of the challenging thing is                                  these are approximate vectors so you                                  need to do some tricks because if you do                                  the approximation then now you do the                                  approximation in parallel and and you                                  can actually show that the approximation                                  gets consecutively bad if you really do                                  have many mappers we want a minimum                                  number of mappers there was some work                                  needed to deal with approximate                                  message-passing and you needed to make                                  sure that why you want the mappers bad a                                  big you do need to have no more                                  parameters and fit in a single machine                                  in order to multiply them together so it                                  was a limit on the size of the data but                                  after about six seven months that was                                  done one thing it was needed now for                                  three months is to assess how much                                  impact will that system actually have on                                  revenue and that was really hard because                                  we could assess how accurate is the                                  click-through rate but what effect that                                  would have on the bits and how would                                  advertise has changed there bits is                                  something where some somewhere in game                                  and game theory was necessary so what we                                  do then and I'm not going to go into                                  details we had to develop for the next                                  six month we had to develop tools that                                  to maintain such a model to be able to                                  roll back to be able to visualize                                  because this would run in a more                                  automated fashion day by day what                                  parameters have changed how much because                                  I never Titus came back and said my                                  campaign didn't show we needed to have                                  an explanation as to why and so by March                                                                                                            went went live I mean life search                                  changed to being that system I described                                  was was so a lot of the system that went                                  live for all the ads on being for the                                  coming years lessons learned here again                                  research is actually the shortest amount                                  of time tool development is hugely                                  underestimated in this particular                                  instance it was important to develop for                                  scale we developed for a single machine                                  setting but what we hadn't anticipated                                  is that the amount of data became so                                  large and today this isn't that isn't                                  the problem that a Microsoft or a                                  Facebook or an Amazon only have I think                                  more and more people are getting getting                                  so much data that the design for scale                                  is is something extremely important so                                  if you put these bars next to each other                                  one thing that you see is problem                                  identification does take some time                                  understanding what the problem is in                                  this case it was simply being passionate                                  and playing also here knowing why                                  we need probabilities isn't just you                                  know it's not a black box that just                                  seems to spit out probabilities but they                                  have value and what can the                                  probabilities be influenced by tool                                  development is usually underestimated so                                  coding is extremely important but the                                  the thing that sort of a surprise does                                  almost the most in true scalar case is                                  how much time this is more than a year                                  of our time going into Evangelization                                  working with the engineers the customers                                  the product managers the developers if                                  it's a platform feature and an                                  understanding what the what the                                  challenge is is in using the interface                                  so lessons learned I think process                                  lessons there's six and and since then                                  or ever since I've been been using them                                  a lot the first one I would say is                                  there's a temptation as a as a                                  researcher to put the technique that the                                  complexity of the technique ahead of the                                  problem and the best way to avoid that                                  is to be your own customer so I didn't                                  want to see many ads I was a customer                                  they're not absolutely love video gaming                                  so that's something that's highly                                  motivating and but also makes you focus                                  on the experience rather than on is this                                  a complex algorithm or is this                                  state-of-the-art or not the second thing                                  and that's I think that's interesting                                  for a lot of lot of researchers is in                                  either of these two cases we studied the                                  existing literature and that actually I                                  think it's a healthy thing I think you                                  shouldn't I mean you're not gonna make a                                  breakthrough by reading what others did                                  in a textbook and re-implementing it if                                  you're if you kind of want to make a                                  difference then it's it's not it's not                                  wrong to be it's not bad to be wrong                                  but but you need to first ignore but                                  then check out with existing literature                                  so it's I remember when we did the                                  ranking system it actually didn't even                                  know what Ehlo stand for and either was                                  kind of a known rankings quite a                                  well-known ranking system the third one                                  is that when you work on a technology                                  transfer you're working on an                                  engineering process not a research                                  process research process is an annual                                  process the conference is run every year                                  so when the deadline comes for the call                                  for papers that's an important milestone                                  products take probably many some some                                  procs takes several years and the and                                  the milestones in the engineering                                  process you know they're there they're                                  for reducing risk you come in with a new                                  unproven technology you introduce risk                                  so understand the engineering process                                  something about                                  extremely important the fourth one                                  something that I can't emphasize                                  strongly enough is write the code don't                                  just write the equations like a lot of                                  the code you saw there wasn't written by                                  someone else it's written by by us two                                  or three that did the work that the both                                  the designs and the and the analysis                                  simplicity I think is very important                                  it's very tempting when you develop                                  let's say something as a shoat to go                                  into tangents and have even more complex                                  nonlinear estimators the systems need to                                  be explainable like it's important that                                  it's not just important that accurate                                  they also need to be easy to understand                                  and then the long run I can't stress                                  this one long enough initially you know                                  it takes about two to three months I                                  would say when you have a good idea to                                  to make a mathematical inside or an                                  called breakthrough but it doesn't I                                  have not seen any major product taking                                  two to three months to go out it's                                  always the long run its years and that's                                  okay there's a you know there's nothing                                  to be gained by by quick win throw over                                  the third offense kind of model so from                                  the machine learning perspective the                                  kind of six steps that that you've                                  always follow and have always followed                                  is you first got your data then you                                  model it and I've kind of went a little                                  through that then you learn a model with                                  a with an implementation over or an                                  implementation of an of an algorithm                                  that you came up with or you you use                                  then you go into a cycle of engineering                                  features meaning the results weren't as                                  accurate as you hoped so you go back and                                  change some of the ways that the                                  algorithm perceives the data probably                                  remove some outliers then you need to go                                  into a mode of measuring how accurate is                                  it you know beta test is an extreme form                                  of measuring but it's a possible one a B                                  test is a more more common one so you                                  you have already a platformer for some                                  parts of your users you can offer some                                  parts of your product you can use a                                  different system B and then you have a                                  compare treatment control group a for a                                  say equally sized group and then you                                  need tools to support it when it                                  actually goes in operation now I think                                  from my experience this is the six                                  essential steps the only mistake in                                  their pictures they look like they take                                  the equal amount of time but my                                  experience is more                                  like this that the machine learning                                  takes about the smallest amount of time                                  and even getting data getting data in                                  from the processes                                  most of the data generating process are                                  not meant to be used as input for an                                  adaptive system takes text among the                                  longest time and and the cycle of                                  engineering the the feature so it                                  actually makes a substantial difference                                  in your accuracy takes an equally                                  equally really similar large large                                  amount of time and the last the last                                  thing I want to just just sort of word                                  of caution of not using machine learning                                  everywhere what is the what is the test                                  questions that I always ask myself when                                  when people say well let's let's let's                                  use machine learning for this I'm sure                                  it's gonna get better                                  um the first question is data do we even                                  have sufficient ongoing data or or not                                  I'll give you an example of a problem                                  where we have and then a problem were                                  but just attacked by machine learning                                  methods but I would say that doesn't                                  make much sense there's no ongoing data                                  and the total amount of instances is in                                  the hundreds so you can do it by hand                                  second is it complexity is perhaps can                                  we can we define a simple rule that we                                  just write down that does the prediction                                  that does the filling in our future                                  values accurate enough and even there is                                  good example where that happens and it                                  gets ignored the third one I always ask                                  is even if he built this adaptive                                  experience is in its the custom acts                                  you're gonna like it or is it just                                  technically cute kind of customer expand                                  it from it and the fourth one is is it                                  economical I think that's something that                                  often gets overlooked is does the cost                                  of doing a prediction outweigh the                                  benefit okay                                  so here's an here's a bunch of examples                                  I'll just talk through everything it                                  makes sense click the read prediction                                  ongoing stream of data this is people                                  constantly getting content they see                                  content and they click or they don't                                  click the buy a product or don't buy a                                  product they go to this web page or they                                  don't they like a Facebook post or you                                  know that keeps on going this is like                                  people living people interacting with                                  living objects a forecasting demand                                  people always another good example                                  there by a simple rule for what's the                                  future going to be how many of these                                  clickers are gonna get bought that's not                                  something very simple you can define a                                  simple rule and there's an economics                                  they're named entity extraction from                                  from texts and from books or from the                                  web it's a big problem because people                                  continue to generate content this can                                  generate language they generated                                  knowledge and that knowledge doesn't                                  stop magically or or fraud prediction                                  it's just incentive trim here's a here's                                  a bad example with that actually happens                                  so one of the prime problems in machine                                  learning that many many PhD theses have                                  been written on is predicting the type                                  of a flower                                  so is this an iris or is this a Petula                                  and now this is cute but honestly the                                  the type of flowers is a limited set I                                  would upper bound it by thousand and                                  classifying them is something that I can                                  get a someone as well trained to do and                                  I don't really see there's an ongoing                                  stream I don't really see the complexity                                  so saying that the iris dataset is one                                  of the as a mushrooms data set as well                                  it's one of the standard data sets we're                                  all all lives of machine learning                                  researchers decide one way or the other                                  by being a little better complexity so                                  one of the common techniques here is                                  when you have a data set and somehow                                  this happens a lot some column of data                                  is missing it's just wasn't logged or it                                  went missing but some people do as a                                  technique is they imputed so what that                                  means is there's a simple rule like                                  let's take the average of the five                                  records above and fill in those values                                  well if I fill in something that's as                                  simple as some of the five numbers that                                  are available above in the table why                                  would I need a machine learning system                                  to learn that rule and I know that rule                                  the rule is the average of the five                                  numbers above so that's not really                                  something where machine learning systems                                  gonna do any better the best thing it                                  can do is it can learn to average to                                  five numbers above customer experience                                  probably biased but predictive menus I                                  don't know how many people know what                                  that is when on a menu like a file menu                                  goes and optimizes the placement of                                  according to the choices you made in the                                  past definitely doable definitely learn                                  about is it a great customer experience                                  when the file open menu changes position                                  depending I did not like that I think                                  it's one an example where ml is doable                                  we have ongoing data but the customer                                  experience dimension hasn't been thought                                  through                                  and economics it's a good example so in                                  online advertising there is the huge                                  huge shifts now and this methods that                                  are much more computation in hard and                                  what I describe like your network                                  methods but one thing not to forget is                                  that in online advertising you're                                  talking about extremely thin small                                  amounts of of small amounts of ads that                                  get clicked yet for everything every ad                                  that might get clicked you need to                                  perform some computation computation                                  costs competition of cost cost in in the                                  distribution in the networking and cost                                  in memory and cost and CPU so if your                                  model gets more costly if your                                  computation of an ad the site showed or                                  not is more costly than what an average                                  you make from an ad you actually have no                                  more business model you have a you might                                  be more accurate but you no longer have                                  a business that will sustain in the long                                  run so it's actually something that is                                  often kind of overlooked when you look                                  at the when you look at the application                                  of machine learning so I hope in the                                  last fifty eight minutes I convinced you                                  somewhat that technology transfer can be                                  of highly rewarding an interesting                                  interesting experience what I found is                                  that the practical problems actually                                  emerge out of this so some of the                                  problems for example the dampening one                                  wasn't easy or even the the smoothing                                  these were these were research                                  directions that I think otherwise I                                  wouldn't wouldn't have ever engaged in                                  and started hopefully I also convinced                                  you a little bit that the pictures you                                  saw so known as graphical models they're                                  powerful as a language because they're                                  good for modeling they're easy to                                  explain they actually lead to an                                  algorithm I basically run throughout the                                  algorithm here and they're highly                                  modular so something that encoding is a                                  good thing so I highly encourage you to                                  look at that code and then you see that                                  literally I wasn't lying                                  I was simply putting the modules                                  together like the red arrows and the                                  last word is a forest machine learning                                  in my view after having done it for                                       years I'd say it's it's the statistics                                  of big data Thanks                                  is there any questions this one up there                                  hi hi what was the impact of using f                                  sharp as your language of choice and                                  also why did you pick it so early in                                                                                                           technology yeah                                  the impact was that it made a lot easier                                  to translate the mathematical models                                  into code that ran at production speed                                  so we we had a shorter time you saw                                  these little blocks of code coding they                                  were they were shorter then I would                                  argue have you used to more traditional                                  language because it really allowed that                                  this ability to not change state I mean                                  that's something that's inherent in                                  mathematics so when you write x equals                                    you can't you know that that fixes the                                  value of x that's not gonna mean a next                                  line I can use X as a place all over                                    that's a property that a camera or a                                  shop have so hope that answers your                                  first question at minimize and the                                  second question might have used it too                                  early in all honesty because we had the                                  architect of F sharp as a colleague down                                  the corridor so if I need a language                                  feature I just went there and asked him                                  I'm serious so one more subsequent                                  question maybe would you recommend big                                  data people to look more into functional                                  programming languages yeah definitely I                                  think in particular when it comes to                                  distributing a computation not having to                                  worry about the changing state as a big                                  Savior so thank you very much yeah so                                  we're playing with Scala these days and                                  so I have a question for you which is                                  versus video ah okay is if you you think                                  iris is an unreasonable data set to use                                  do you have data that you make public to                                  solve that problem yes we do when it's                                  when it's either old enough or not or                                  anonymized enough so you can use it so I                                  give the example of the ranking system                                  here that data the halo                                                 this was                                                              matches it's actually publicly available                                  you just query for Halo                                                 um but I can we can make it why don't we                                  put it on the buzz words page                                  if a link to it the tricky the tricky                                  bit probably just answer one or the                                  tricky bit and it's not I don't have an                                  answer for this but I think when you                                  when you release data about people you                                  can really have to honor their privacy                                  so I'm very I would be you know be very                                  reluctant to release something that                                  identifies any individuals taste or                                  preference or or or a buying pattern                                  power                                  any kind of information identifies an                                  individual that makes it hard so my                                  criticism of iris didn't didn't imply to                                  mean that I have an answer to how to                                  make these huge collections easily                                  available I'm probably one last word                                  there is a lot of there is a lot of data                                  it's anonymized enough also available                                  about the census so the UK the US the                                  census data sets have some very                                  interesting their sets about people on                                  an aggregated level that are that are                                  practically relevant high                                  let me upper right do you see me yeah hi                                  I thought sort of consider myself to be                                  a machine learner although I'm sort of                                  at the beginning of my career I just                                  finished University and now I saw that                                  you do saw its first strange with a                                  feedback I noticed that you do two                                  things that I do as well but I                                  considered mistakes by myself and I                                  thought about changing the way I do                                  things and but now I see that you do                                  actually the same and the one thing is                                  that you first build models and                                  afterwards to they're looking you look                                  into literature and yeah I do the same                                  but I thought it was actually bad style                                  and I consider changing that and the                                  second thing I'm doing as well as first                                  building the model and then thinking                                  about the features that I want to use                                  and I also thought maybe I should first                                  think about the features and then the                                  build the model but it kind of felt                                  natural to do it that way but I thought                                  maybe it's a bad practice but now maybe                                  can you can substantiate why this is                                  actually not just practical but also                                  theoretically useful to do it this                                  supposedly wrong way so so the first                                  question I think it's it's almost                                  self-evident if you want to if you want                                  to come up with a with an algorithm or                                  with the model that it's not known                                  before how can you come up with it if                                  you read the known literature you you're                                  likely going to follow the same for                                  pattern and and thought traps that                                  others did now                                  what's bad practice is not to read the                                  literature at all that's bad practice                                  I encourage you to to go follow your                                  hunch follow your gut try this idea and                                  then see and there's a there's gonna be                                  some surprise sometimes you quite often                                  you find that someone else had a similar                                  idea before so in terms of publication                                  you might not be able to publish but in                                  terms of generating a good customer                                  experience or a product that's that's                                  actually a good thing because you have a                                  deep understanding the second thing                                  doing feature engineering after the                                  modeling the model often what a model                                  often does it encodes relationship                                  between the data items that you know                                  from the data generating process                                  regardless of how you how features are                                  how do is how the audience sees sees                                  your instance your your objects so when                                  I represent you know a user web searcher                                  by client IP I can't learn anything                                  about what males and females do like                                  because that's not the level at which                                  the argument sees it but the model is                                  often for example the model is often                                  encoding up an inherent property or                                  constrain on the data so in the ranking                                  example it's the simple fits a simple                                  fact that there is a ordering so if one                                  there's a transitivity if the winning                                  team is better than the second winning                                  team and that team is better and the                                  third winning team then by transitivity                                  the first winning team is better than                                  the third third winning team right and                                  that's effectively what you encode                                  that's what I would call a model                                  regardless of how you represent the                                  players so to me also the other the                                  other reason why it's hard                                  to engineer features before you do the                                  model is you often you often engineer                                  features with respect to rather still a                                  structure I miss take a residual that                                  has structure in the data after you make                                  a fit but you can no you can't notice                                  unless you have a model from which you                                  can derive a learning algorithm so a                                  very good way of doing feature                                  engineering is to look at you do a run                                  and then you look at all the examples or                                  you still make mistakes or you still                                  read where the algorithm still is really                                  bad really inaccurate and you see if                                  there's anything structurally                                  interesting but that step of studying                                  requires that you first run the                                  algorithm how can you engineer features                                  without being able to run a learning on                                  how can you derive a learning algorithm                                  without having a model of the data does                                  that make sense yeah it's basically you                                  say you need to have a model in order to                                  find out where there are correlations                                  between input and output yep that's                                  right okay I saw someone there yeah kind                                  of hard to see because there's like four                                  big lines hi sorry I had a question                                  which was about the matchmaking example                                  and it was kind of detailed somehow but                                  I was very curious like how you showed                                  it and in the model you of course were                                  assessing in a game people losing and                                  winning and what how did will impact but                                  if you take game sometimes you are also                                  the problem of people leaving or being                                  disconnected by the game and well they                                  get probably a loss but this also                                  impacts game because there are people                                  will probably lose and then if you                                  compare two games maybe they lose they                                  look similar because those people lost                                  there and there but in the first case                                  they played a bad game but impacted game                                  and well this is also a cause of bad                                  matchmaking and the opposite because if                                  I get matched                                  people that I don't like for some reason                                  then I leave and then I will get matched                                  again badly bla bla so I was just                                  wondering whether this was a problem                                  that you faced or not we did and we did                                  several things around that so one of                                  them you can see here it says game                                  quality see that can you read that                                  yep so if the game quality is high than                                  the percentage of information that's                                  taken is high - okay but if the game                                  quality is low meaning someone left the                                  game so now you have three versus four                                  so three versus four is known to be a                                  bad match then we basically gradually                                  start to ignore the game so you play it                                  to the end you have your experience but                                  it's not gonna affect your skill                                  secondly and I was septums relying a                                  little bit in the interest of time the                                  model itself also has a way that you can                                  say partial partial play so the API                                  supports for the developer to submit                                  what fraction of game time was that                                  gamer present in the session and if that                                  was                                                                 participate                                                              doesn't fully address it because some                                  games you know partial participation a                                  game doesn't mean that you're not can                                  that you can't be game deciding so the                                  game Yarber really has to that's that's                                  something where the explanation is                                  necessary we just make the simplifying                                  assumption if you're present one person                                  the game then your skill is exactly one                                  person representing the overall skill of                                  the team some games lend themselves to                                  this for example games where your                                  cumulate points reshoot peoples if                                  you're only there for a first minute you                                  can't shoot that many but a racing game                                  it makes no difference that's how you                                  have team racing and the fastest in the                                  team determines the winning of the team                                  it doesn't matter if like everyone drops                                  out but the fastest player the team is                                  still super strong and then also the                                  assumption of some of the skills is                                  reflective of the some of the of the                                  skill of the team is not true anymore so                                  this assumption is a simplifying                                  assumption for mathematical and                                  practical reasons it's not always the                                  best one for every game type but your                                  experience it work ok like it work                                  particularly ok I would say in games                                  that were you accumulated teams                                  accumulate scores whether it's like                                  territory or killed or                                  or money you know it's like some some                                  form of game of you know you not                                  territory but you you build up the city                                  wealth and together so doses works                                  really well or it doesn't work really                                  well as if a single player can dominate                                  the skill of a team so in a shooting                                  game there's one example one game is                                  called snipers so everyone is never                                  there the best player can even if                                  everyone else around them                                  can actually just one player can decide                                  the whole team match because it's so                                  it's focused on such a small event so                                  for for a games where it scores                                  accumulated works really well look at                                  things                                  hey hey I really liked what you were                                  saying about the operational tooling                                  because I think that's putting the end                                  control of the results back into the                                  hands of a human right rather than the                                  algorithm and I was wondering who is                                  developing and maintaining the                                  operational tooling is that also owned                                  by the researchers or are these                                  different groups in no it's different                                  groups actually that's more engineering                                  operations team with lots of                                  documentation and a deep understanding                                  what's going on so it takes a year I                                  mean takes three I wouldn't say one year                                  but takes a long time for for people to                                  understand also a lot of writing up its                                  effectively now you type through scale                                  into into a web search in your favorite                                  web search engine you get                                               hits and you get several tutorials and                                  there's other people have written very                                  nice expose ace at every level of                                  understanding and that's necessary I                                  think for for other teams new team                                  members that are more in engineering and                                  operations that are also good in offer                                  operations to be able to support such a                                  system so the ultimate tech trends are                                  really means that actually establish the                                  server the base technology and has                                  enough literature around it sort of                                  people can acquire that knowledge that                                  that's even longer that's probably                                  another three to five years                                  not mine in my experience                                  I have a question regarding true skill                                  for me it's kind of concern is it this                                  score transitive I mean that if player a                                  plays better than B it's not and B's                                  better than C it's not always the case I                                  think especially I think for strategic                                  game in on stuff like this it's that's                                  true it's not always the case and it's                                  something that we you can somewhat                                  address but the problem if it's not                                  transitive that's now I'm going back                                  more to information theory your your                                  your a little bit at loss because if                                  it's not transitive it means for example                                  soccer is not transitive                                  that's why every team in the Bundesliga                                  or from your league place against every                                  team twice in a season because you know                                  I don't know like I want to pick teams                                  yeah kinda get into hell if I do that                                  but team yeah yeah sure I'm gonna pick                                  Herto and bio now if team AAA beats team                                  B doesn't and BBC in soccer it doesn't                                  not at all mean that C is now gonna lose                                  against a the problem is that when you                                  have n players in a leak                                  so these did they and they play against                                  end players you need n square numbers                                  that somewhat represent the chance of                                  one winning against the other if if you                                  don't have transitivity you need those                                  numbers so that means in order to get                                  the best matchmaking experience every                                  player has to somewhat play against                                  everyone else you cannot transfer any                                  information the reason why these were                                  learned so fast is that if you have n                                  players and there's transitivity that                                  means you just need to learn an ordering                                  of n players an ordering of n players is                                  one of n factorial many permutations                                  this number sounds pretty big but                                  actually isn't that big when you think                                  of it in bits because I just said as N                                  squared bits so the number of bits of n                                  factorial so log of n factorial is n log                                  n my quicksort quicksort exploits is as                                  well transitivity so that's why it's                                  actually a link between twisting tricks                                  or so that's why on average per player                                  you only need log n games so with the                                  league of a million players that's I                                  you know                                                               ten bits another thousands ten bits the                                  reason why this can learn so fast is the                                  transitivity so if you have a game that                                  is intransitive then the only way to                                  really get get a ranking system that is                                  from information to a point of view that                                  is somewhat fair is the sort of                                  leaderboards that roll up what we do in                                  the World Championship now where we have                                                                                                          of each of the groups is gonna play                                  against the winner so you build a letter                                  rather than a system that relies on                                  transitivity so it's an interesting                                  problem what to do with with almost in                                  transitivity meaning you're a transitive                                  except for a few exceptions but if if                                  you assume if you really drop the                                  assumption you can't design a system                                  that works for millions of people then                                  everyone has to play against a million                                  people and there's not enough time to do                                  that                                  a question on did you measure the                                  satisfactions of the gamers with the                                  system being lounge and how to do that                                  and whether you include it at the end to                                  the design of the system so I would say                                  there is aspects of matchmaking that we                                  absolutely don't do and do bad which is                                  playing with your mates like this system                                  requires that the outcome of the match                                  is a function of the skills so no                                  setting up games or messing around so                                  what it what it drives is very calm very                                  competitive gaming what's missing from                                  from the online gaming experience with                                  this system but it's not covering at all                                  as the social matchmaking has been                                  successful we would say yes simply                                  measured by the uptake and by how many                                  people came back after they finish the                                  campaign and play like you know that                                  number is known how many people came                                  back and played ranked matches versus                                  non ranked matches in the one picture                                  you saw as actually a show it was                                  actually graph you see if I find it                                  quickly yeah so here one thing we could                                  also do is we could select it's hard to                                  read but we could select if we want                                  player match that was social or rank                                  match see that there's an event that the                                  people play a ranked match that was this                                  to scale or did they play but we call                                  player match or social match would be                                  the more modern term today so we we had                                  good sense of how many people pick to                                  play with their friends for the                                  matchmaking was just by what they pulley                                  pick to play with and how many people                                  picked I want to play against the you                                  know for someone of my skill and the                                  simply the uptake by people was a                                  success indicator was an indicator of                                  success                                  hey there uprize                                  oh man you directly in the light know                                  this decide ah okay yeah yeah so my                                  question is more about the                                  organizational point of view because so                                  I'm working also in research transfer at                                  exercise I guess you know because to                                  work with oh no I think the biggest                                  problem that we have in research is that                                  you always have groups of research and                                  group of engineers yeah and sometimes                                  it's very difficult to try to fill that                                  gap so I wanted to know how do you work                                  usually when you are with engineers and                                  researchers                                  I might this is simply this is basically                                  my experience my experience you try to                                  minimize that gap by not shying away                                  from taking a taking a task on unbroke                                  on it like and you know embed yourself                                  like in no case of angeas actually we                                  were actually flying and just worked for                                  a whole week just to get it started                                  in the engineering team set with the                                  engineers take tech bugs and take tasks                                  and and start to fix them even though                                  they weren't any research if aren't                                  necessarily the the code that was                                  driving that feature we would like to                                  get like to get in so that's one social                                  level work together the second one you                                  make code the lingua franca and not                                  mathematics so I've been showing a lot                                  of graphs and mathematics but you when                                  you work with the together you don't                                  sort of provide a research report you                                  provide an implementation of it I'm not                                  a full-blown system and design of it but                                  the core that implements the update of                                  the parameters or the predictions so                                  that's something I think that these two                                  things have personally helped me a great                                  deal                                  Thanks                                  I think we gotta cut it here unless we                                  have time for one more question I would                                  like to have a question well how much                                  time do you spend compared to like                                  developing in breaking the system                                  yourself in breaking I mean it's very                                  important when you work with this                                  tribute of system software and API is                                  that you you know you you do all over                                  something that's hard to break how much                                  time do you think or how much time did                                  you spend into breaking it so it's an                                  interesting question so I take it as how                                  much time do we spend in testing the                                  border cases of it yeah in this in the                                  experiences I have because there were                                  life systems they were easily found by                                  by users and so it was more I think the                                  question is more how much time that we                                  so I take it as how much time do we have                                  to spend on fixing issues that we hadn't                                  thought of before because they were                                  corner cases and they they just surfaced                                  so one good example here is when you do                                  this when you do it when you run this                                  code this update code there is a                                  scenario and it happens rarely it                                  happens one in a million times that you                                  win a game and your skill goes down and                                  that's mathematically correct now you                                  know I thought this is impossible but                                  about three four months in this actually                                  happened to a person and they went to                                  abort so I spent a lot of time looking                                  at the boards of all the problems that                                  people have and and found out so this is                                  a cigar that I friended then on Xbox                                  Live he's genuine I looked at a record                                  this true skill did go down and that                                  costs quite a bit of time to understand                                  why and and it actually so the reason                                  just to explain why that was is a little                                  thing I didn't tell you about that's not                                  a big detail but min matches we assume                                  that the skill can change so we                                  basically in reintroduce dynamics                                  meaning that my skill now and my skill                                  in the next match have the same mean but                                  one has larger variants so that if I                                  really get better I can go up I really                                  get worse I go down otherwise my                                  uncertainty was just the uncertainty in                                  the system would just go down gone down                                  and I would be locked in and never move                                  again so in this case he played a game                                  where it was clear                                  he was going to win so there was no                                  information provided in the game so his                                  mean stayed the same yes he won but it                                  was a like marginally fifth digit change                                  but because of the shifting because of                                  the dynamics the change of uncertainty                                  over time the variance increased so now                                  if you remember equation mean minus                                  three times variance means says the same                                  variance increases so a skill went down                                  visibly so how much time well this cost                                  a fair you know in this big example it's                                  cost a week to fix this but trying to                                  break ourselves it no more than I mean                                  you know in the systems we develop now                                  or here we have unit tests for the                                  individual algorithm where we have input                                  output but then we have also integration                                  tests where we take large collections                                  like the large collection you saw there                                  and run it through and see how many you                                  know how many jobs fail how many jobs                                  but that I wouldn't call this the full                                  user test as you probably allude to I                                  was I was warned to like the whole                                  testing and yes I think we do unit tests                                  we do you know documentation is                                  extremely important particular in the                                  methods are not standard not textbook if                                  the over document in the code even                                  otherwise what is that what is that                                  doing                                  there's not even a reference literature                                  otherwise and then we do integration                                  tests where we have huge collections of                                  inputs or old gain records or old click                                  records and run them through with an                                  integration tests have then                                  probabilistic tests meaning because they                                  you can't guarantee the execution order                                  you can only guarantee that the                                  parameters to compute are within bounds                                  with respect to what you what you've                                  done one so you because the order of                                  execution isn't the same                                  you can't just check for exactly quality                                  of the results thank you thank you I                                  think we're done thank you very much                                  thank you                                  you
YouTube URL: https://www.youtube.com/watch?v=02mx5-ns1Ps


