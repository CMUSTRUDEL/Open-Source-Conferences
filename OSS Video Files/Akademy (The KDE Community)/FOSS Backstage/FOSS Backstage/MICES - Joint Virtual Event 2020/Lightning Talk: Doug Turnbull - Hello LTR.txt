Title: Lightning Talk: Doug Turnbull - Hello LTR
Publication date: 2020-07-02
Playlist: MICES - Joint Virtual Event 2020
Description: 
	Lightning talk from Berlin Buzzwords | MICES | Haystack â€“ Joint Event 2020
Captions: 
	                              I'll introduce our next speaker                               who is some chap you may have heard of                               called Doug Turnbull and he's going to                               be talking about something called hello                               learning to rank which is a set of                               notebooks that help you to quickly                               develop learn to rank solutions on solar                               or elasticsearch so Doug welcome to the                               party                                hello LTR so I am you know part of my                                personal mission is to make a lot of                                this information retrieval stuff really                                accessible to people and not be                                something very mystical and something we                                work on a lot at open source connections                                is learning to rank learning to rent                                training learning to rank all kinds of                                stuff around lunch rank demos and a part                                of that is been a big part of that and I                                think I gave a lightning talk on this                                last year and haystack about a year ago                                is this hello LTR project now with hello                                LTR and this is the github o                                           LTR with hello LTR we had a set of                                Jupiter notebooks that basically go                                through the entire learning Frank                                process from feature logging to model                                training to deploying the model to solar                                elasticsearch index and finally                                searching with that model and part of                                this is a LTR client library which has                                solar and elasticsearch clients and a                                lot of other helpers and things that are                                just kind of annoying to do with                                learning to rank and part of this are                                the notebooks itself themselves which                                have and I'm gonna use solar have a if                                you go to like notebook solar there is a                                little folder for each collection you                                can see we have Epis Marco for example                                you can play with tmdb which is a very                                everyone's you know open source                                connections favorite collection or test                                collection we have a set of under each                                one we have some solar configs for for                                this and what you can do with this is                                I'm going to jump over to a terminal is                                if you're in notebook solar I can say I                                can just turn launch my solar with                                docker compose and it's got a solar with                                a fairly stock configuration and see I                                launched a solar last time less time on                                hello LCR I launched solar and I've                                started you paterno book so not                                particularly the exciting parts of this                                and I'm just gonna walk through I think                                this is really interesting and I want to                                talk like why did I do this and I didn't                                do this necessarily because I think this                                is you know I'm doing anything                                particularly innovative a lot of the                                stuff a lot of people have done learning                                to rank but what is really important is                                to make this stuff reproducible to make                                this stuff accessible to two folks and                                to give people sort of some-some basic                                building blocks on this one very                                important piece of the puzzle and that's                                learning to rank and people have been                                taking the stuff including us and making                                sort of little demos out of them to show                                clients what might be possible a really                                simple learning to rank solution is                                something called SPM Rick SVM rank is a                                algorithm that literally just finds some                                weights for different features so I'm                                going to go through this as a solar demo                                and I'll just walk through these lines                                and this is kind of a fun fun thing to                                walk through so I on what do you mind                                Doug just magnifying a little bit for us                                oh sure I was terrified my screen was                                not sharing that's perfect thank you                                going great thanks                                so you know we're going to import some                                basic things we have a client we have a                                solar elastic land the basic workflow                                and operations of learning to rank is                                the same across both search engines we                                download a corpus and some judgments in                                this case the team DB corpus sub binary                                judgments given some movie titles and                                what movies are relevant and not                                relevant to a data directory and it's                                not gonna hurt anything to run those we                                don't download it again I'm not going to                                run this line - I'm not going to trigger                                reindex but this will basically go and                                to whatever client this is and in case                                 of solar it will do an up config of the                                 tmdb directory so if you go here there                                 is a tmdb directory under notebook solar                                 which has a                                 whoops I was wrong there is somewhere in                                 here a I promise ATO maybe it's a solar                                 config it's going to up config some of                                 the solar config up to solar using the                                 the cloud up to config commands and then                                 it's going to reindex it's gonna iterate                                 over all these movies and we've taken                                 this and we've used it on our blog you                                 shall I had an MS Marko data set                                 available there's all cut you can plug                                 this in with your data sets and people                                 have been using this to build their own                                 learning to rank demos for work of                                 course the next step you do in learning                                 to rank is you want to experiment with                                 some features and features in learning                                 to rank are in elasticsearch for solar                                 are the same queries that we might do                                 manual relevance to the river so in this                                 case we're going to reset ltr' for this                                 index sort of basically clear out                                 everything we're going to set up some                                 features one two and three that beam                                    of the title beam                                                      field and the release year go through                                 that and it's been created at solar so a                                 feature set in learning to rank is just                                 literally this data structure stored in                                 solar and then we've got to do this                                 process where we take a training set we                                 take some judgments and in this case                                 we're going to pull them out of this                                 file data title judgments binary text                                 should I come over here I don't                                 judgments text and you can see there's                                 all these this is kind of a classic                                 learning to rank data set format and                                 we've annotated it with some comments                                 where we have let's say Christmas                                 vacation is a movie and we have one                                 document that's a four meaning it's the                                 most relevant and that is query ID                                       have some marginally relevant documents                                 maybe there are about Christmas or the                                 holidays and we have several documents                                 that are complete                                 so this is a little baby data set we can                                 play with and of course our job is to                                 turn this into something that looks like                                 this where and this is a using semmen                                 features we have feature one which might                                 be the title vm                                                        it's value for this movie feature to the                                 overviews BM                                                           this movie and then maybe the release                                 date and so on and that's basically what                                 this does we we get the judgments from                                 the file and we loop through each                                 queries features we load the judgments                                 each piece is just to iterating for each                                 query get the queries judgments we issue                                 a query to its as a different the query                                 to actually log the query which is                                 confusing                                 to solar to say hey pull back this                                 training set and you can see it's going                                 to loop through here and for each query                                 ID it's gonna populate the training set                                 and I'll actually just dump this you can                                 see what it does at the very end it's                                 going to be a bunch of judgments that                                 now have features this issue with them                                 and you can see some of them of title                                 beam                                                                   movies that where Rambo matches the                                 title and Rambo matches you review and                                 you can see their release year now I'm                                 not going to get in the weeds on how SVM                                 rank works it's basically a                                 transformation before doing a linear SVM                                 there are a number of blog articles but                                 at the end of at the end of the day we                                 run through this and we get we do some                                 transformations and things and we                                 basically train a model that's an SVM                                 model and we get basically a set of                                 weights on this is the title weights                                 these are the body weights and this is                                 their the release year and you can                                 clearly see that you know obviously as                                 you would expect the title of the m                                   Score is very important you know there                                 strong correlation and the model is                                 basically going to be this times a                                 normalized being                                                       Plus this times normalized be M                                          of the ER view Plus this times they                                 normalized release year that's their                                 third feature and when we send this up                                 to solar and here all we're doing here                                 is building up a solar linear model                                 representation we get each we get a                                 normalization for each each each feature                                 so for title we kind of we have to send                                 up with a mean and the standard                                 deviation is we have to do this for the                                 overview be m                                                           score is two point six five the standard                                 deviations four point three four                                 same thing with overview and the same                                 thing was release year there you mean                                 released years                                                       deviation is trying to one and these                                 weights are that we saw up here for this                                 kind of model are relative to this is                                 you get point four if points for title                                 if it's one standard deviation above the                                 title                                 and finally if we have the simple simple                                 model we can then issue a search and we                                 can see some a Rambo query search                                 results to come back and you can see                                 obviously with a simple linear model                                 we're going to be you know it's not that                                 sophisticated we're going to be strongly                                 biased towards the title which might                                 mean we get some irrelevant results here                                 I'm not sure this does anything didn't                                 apparently does have something to a                                   ambo and then finally finally you know                                 first blood which is very much of an                                 overview match this is the overview look                                 down here so this is just a fun little                                 fun little set of notebooks and there's                                 the books that use ranked live for doing                                 gradient boosting all to make the                                 process of you plugging in your data                                 bringing your data to this and                                 experimenting with learning to rank a                                 lot easier than having to stress out                                 about going and writing all this code                                 yourself so with that                                 I will stop sharing and see if there's                                 any questions thanks Doug and let's see                                 if there's anything in that there's                                 nothing in the slack it may well be that                                 we questions later come up and I'm sure                                 Doug would be very happy to answer any                                 of those on slack and do check out the                                 repo                                 you
YouTube URL: https://www.youtube.com/watch?v=ETotUv0dYUA


