Title: #mices: Jesus de los Bueis & Borja Santaolalla - From commercial search to owned search
Publication date: 2020-06-30
Playlist: MICES - Joint Virtual Event 2020
Description: 
	More: https://berlinbuzzwords.de/session/commercial-search-owned-search

Carrefour started the journey of digital transformation 6 years ago, transforming the e-commerce business into an omnichannel business using an “all in one” e-commerce platform where Search was one more piece of the puzzle.

In time, Carrefour technical team realized that through an open and flexible Search solution, the e-commerce platform could be constructed around it, making Search (and Navigation) the core as opposed to an add-on or an element on the periphery.

This approach, at first, implied several challenges, from strategic to technical ones:

What options do we have? Use a SaaS solution, build a search from scratch, Base our search in an existing solution, Look for a partner to help us to build it… 

How can we keep the intellectual property and the know-how inside the company?
 
What experience do we want to offer to our customers?
 
How can we deal with a huge assortment of products from different natures and stores? 

What insights do we expect to take form the search to help our business?
 
How do we know whether the search is performing well?
 
What strategy do we have to follow for replacement the old search engine keeping, at the same time, the rest of the “all in one” e-commerce platform?
 
How do we develop it and deploy it into production?
 
How do we evolve it?
Captions: 
	                              hello everyone my name is especially on                               weights and                               the software development director for                               carat or Spain or the Commerce                               Department and today I will talk to you                               about our experience replacing our                               commercial shirts by our own shirts you                               can control you can control the roadmap                               and we can control the technology behind                                the start so well here is my contact my                                colleagues contact whorfin he's gonna                                talk later                                well you need some information above us                                you can stand our called OCR profiles                                Wow just before get insert I would like                                to talk about a little bit about color                                first thing that I first pin second that                                Bianca is one of the biggest retailer in                                the world it has more than                                             stores in                                                              talking about food ecommerce we have any                                commerce with two sites full side animal                                style the first one has                                            problems                                                              our Larry blood we have a marketplace in                                the food style is                                                       one point five thousand dollars so the                                platform that makes possible this                                business is our e-commerce platform fast                                we are in the middle of a migration                                where we are migrating for this kind of                                all-in-one solution that you can hire                                from traditional vendors to micro                                services architecture built by our                                engineer baikal forest                                so it's this project is a four-year                                project to replace the hot platform what                                we are going to do this or wider what we                                are doing right now is taking different                                pieces of the e-commerce platform this                                is the old one language search the                                catalog the price million the for                                example Mexico and they blow this                                functionality into our metro service                                architecture in the cloud it's hundred                                percent many collaborative so that means                                that it's is over kubernetes with                                kubernetes in mind i'm scholarly the                                lastest scalability deploy in Google                                Cloud and all is based on open source                                technologies because is our philosophy                                and the first side was launched in                                     so far working fine now we don't have                                any major issue amount so talking about                                shirts now this time is the part of this                                racket sector that we've replaced last                                year and it was a really tough challenge                                because we had to replace a converse                                dessert which was included in this kind                                of all one platforms and to the lamb we                                had to face some challenges the first                                one it was I was time to customer                                behaviors so in the old one the metrics                                that we found was very poor                                didn't know what what was happening from                                the side of the customer because we                                don't know what they were looking for if                                the search was very lack rated not so we                                have no idea about what is happening in                                terms of the sets so the second one is                                to build proper sets experience with                                very accurate user experience and while                                we have to define our relevance ranking                                to                                                                    configure manually a lot of rules that                                they are very difficult to maintain over                                the time we were looking for something                                more automatic like a or machine                                learning and we have to get rid a                                catalog data because in this kind of                                platform where holds include you don't                                have to worry about the catalog data                                feeds it's part of distribution so we                                had improperly the kid with Nathan I'm                                very well prepared to index by a                                certainty and we have to integrate the                                Commerce the search engine into our                                e-commerce platform you have to deploy                                it in                                                              table and complete the whole project in                                seven months                                which is why aggressive but finally                                thanks to the teams involved in this in                                this project we need it so at this point                                we don't really know what to do                                but the next question is how you can do                                it so Lance who we went to the market                                and see what officers didn't have and                                the options we had was mainly three the                                 first one it was about to be an                                 Oktoberfest in the furnace rats using                                 our team but the problem is we realize                                 that we haven't got this kind of                                 knowledge this kind of expertise because                                 we have a very good developer very good                                 architects integration engineers but we                                 don't have certain                                 years have taken years so at least it's                                 gonna it's it's gonna take a long time                                 to to build a proper search engine maybe                                 we can add something and then BP maybe                                 in two years so it wasn't a portable or                                 for business so the second option the                                 option being was to hire a service a                                 service solution this is the most                                 attractive option because the only thing                                 that you have to do is to generate                                 little bit of it plug it into integrated                                 into the server service solution and the                                 missed opportunity ends but from our                                 point of view this can work for small                                 catalogue but how to market presence                                 with remote three million of problems                                 very different kind of problems we                                 prefer to control all their volumes                                 inside the search engine I'm integrate                                 the search in unison this way with the                                 data we have in telephone so to extend                                 the search engine this option wasn't the                                 best for us and we had to do all these                                 recipes as well and the option see it                                 was to look for a partner with existing                                 solution which you can take and deploy                                 into your cloud and build your search                                 experience over an existing solution so                                 this is what we did actually but we the                                 technology is not enough we needed a                                 company with culture that fits in our                                 culture so we are a very customer                                 centric company so we were looking for a                                 company like this in customer centric                                 philosophy or given to spine                                 collaborative general dirty course but                                 in the retail industry is we are                                 constantly changing and focused in us                                 because what happiness is not only about                                 the technologies how do you present let                                 technology to your customer how your                                 customer is using new technology and of                                 course a technology knowledge even has                                 to be based on and micro service                                 architecture because we have a micro                                 services architecture so we were looking                                 for a solution where you can select the                                 different components instead the                                 component that you want into your                                 application and use those components so                                 it has to be also based on open source                                 as to present a platform easy to deploy                                 and operate that's very important for us                                 because in the past we saw a lot of pain                                 I'm trying to operate this kind of                                 solution where you have the black bottle                                 you know what's happened inside the box                                 and it has to be approved solution for                                 high demand traffic because we have                                 companies like Black Friday where we we                                 suffer I feel - spikes of traffic and we                                 have to give certain reasoning for spots                                 so when you have                                 the pattern in place you know what to do                                 then you have to do a plan not planning                                 and this is the ferret plan the first                                 stage of the program was to discover                                 what to do what was our solution or                                 solutions embodied a protrusion and                                 overall to discover what this                                 technically this search phonology can do                                 with our data and modify the after may                                 be needed and the second phase the                                 second stage it was to build the proper                                 solution integrated with our tongues                                 button the third one was the hardening                                 to fix those digital forgotten to be the                                 face or you did in a bad manner and the                                 last-born is to tune all the application                                 all the search engine within the                                 e-commerce platform in the Google Cloud                                 so after just a memory the course the                                 kubernetes staff and of course the lxd                                 search because last assesses the core of                                 the of the search engine so this is how                                 it looks all the time mean we start with                                 a pilot not very fancy interface but we                                 demonstrate all the things that we                                 wanted to do from that and we fast                                 repeat them the ether was introduction                                 during three months around and it was                                 almost fully functional and it was                                 leaving starters to do three to three                                 months and the last one is the one that                                 we have now entered a food yes and while                                 is fully functional it's over all the                                 particles that we have forward and                                 forward the global one                                 and so far is working fine and people                                 actually use our power sets list and we                                 go                                 so at this point I'm going to introduce                                 my colleague Barton Barton help us with                                 all the user experience about shirts and                                 well he can tell us all the process done                                 he lived to his ass so hoorah                                 and whenever you born thank you I                                 suppose thank you so much for the                                 invitation of course and you know it's                                 been very personally linked to this                                 project it was an absolute joy to work                                 with you guys especially after the the                                 you know the marvelous results obtained                                 right both from our design in that                                 performance perspective right                                 hello folks my name is Baraka I'm from                                 empathy                                 I was the design lead of these projects                                 which we are still working on but we're                                 gonna present today this very first                                 stage of it and I'm gonna talk for the                                 next five minutes on design okay both on                                 the challenges that we overcame and also                                 the process we followed so before I get                                 into the matter I would like to stress                                 they need to tackle a third project from                                 an experiences side of things as well                                 okay I've been working on for more than                                                                                                         modeling on you know algorithms features                                 and again it does not matter how much                                 time you spend on technology okay you                                 you must have of course relevant results                                 for people to find but the how people                                 experience how people connect with                                 brands the emotions that you're able to                                 evoke through the experiences is                                 as critical or even more than the                                 results on their own                                 okay so always please please spend                                 enough time you know if it's never                                 enough on the experiences because it                                 will be a very very important aspect of                                 your success right so moving into the                                 certs project in Kara for so the first                                 thing we looked at was we have a massive                                 catalog I mean we're talking about three                                 million products and again the diversity                                 and complexity of intent it's brutal                                 I mean it is huge we have people                                 searching for tomatoes in apples as part                                 of the food groceries and as well we                                 have people searching for a mattress or                                 searching for a barbecue or searching                                 for a TV set so again you guys work in                                 inserts you know that the patterns used                                 to access those very different set of                                 items it's very very diverse ok the the                                 the the way you help people find explore                                 and research on those item discoveries                                 is totally opposite so that was a main                                 main challenge the second one it's very                                 it's aligned to this one it's whether                                 from an experience perspective how do we                                 take people from a global search box                                 okay where you can search in the whole                                 of Kara for in two very vertical very                                 specific search vertical search                                 experiences that are highly driven by                                 the characteristics of say ink                                 cartridges for printers or a TV set                                 whether you want a curve or not or the                                 size of the screen so these sort of                                 things really were a big                                 big thing that we needed to coherently                                 bring into the experiences and the                                 journeys of people navigate inserting                                 and exploring care for the third item                                 and as important as well is the                                 diversity in this case of personas and                                 the data behind it we have carofoley                                 fortunate to have very a very loyal                                 customer base and they are very rich                                 data sets to do with the purchase                                 history on and off as well and as other                                 signals that can be used to personalize                                 search on the other end we have people                                 that's not anonymous but there are no                                 track records regarding purchase but we                                 know that they are in a landing page and                                 we know that they have an intent                                 declared so how can we use all those                                 inputs so that's the experience is how                                 good fits for all those personas and                                 lastly this is more to do with a                                 commercial thing as well as as a                                 customer experience but in the on-site                                 sorry offline California's got a catalog                                 and online it is a bigger catalog due to                                 the marketplace so people should be                                 aware that products have been sorted in                                 a different way they should be aware                                 that the logistics the the vendor                                 information has to be surfaced and all                                 these things that also need to be very                                 well entangle into the experience good                                 so how do we go across knowing this how                                 do we go across into the design so the                                 phase one it's always out understanding                                 the context ok so we need to understand                                 how people use search previously so we                                 normally go through the analytics we go                                 of course through the and more                                 importantly through the intended                                 behaviors                                 how do we want people to feel throughout                                 this part of the through of a certain                                 journey when they open the search box                                 before they start typing when they start                                 typing so we'll go through the brand                                 values we go through the design                                 principles the visual language that has                                 to be used and we start working on the                                 user journey mapping okay so we are able                                 to associate emotions to each of those                                 moments of the journey right so now we                                 can move into Phase two now we can start                                 sketching these mobile sketches and                                 diagrams and we can move on into                                 mock-ups wireframes markups animated                                 mock-ups prototypes user testing and as                                 these iterations move on you end up with                                 a very complex diagram with the use of                                 flows that incorporate all these                                 personas all these use cases all this                                 personal data and all this transparency                                 and Trust controls that we always seek                                 to obtain so that consumers really feel                                 bonded and feel connected to the brand                                 through use insert that was my time my                                 time is up guys thank you very much and                                 I'll talk to you after after his                                 finishes in doing the Q&A session all                                 back to you guys thank you okay thank                                 you very much for the plot it was pretty                                 good                                 to listen to you how you did all this                                 for us and what did continue with this I                                 would like to the power so this is an                                 architecture that for us we are the most                                 important one because there is how we                                 integrate actually the empathy solution                                 into our system and we can start with a                                 couple of regeneration because it was                                 very tough very it took me time it was                                 very detailed and                                 what we did is we took all the things                                 that we are really hard in the                                 e-commerce stuff from like the prices                                 throughout the inventory and promotions                                 macro services we synchronized                                 everything from the central systems from                                 the PM from the price engine from the                                 [Music]                                 inventory upload all this information                                 via a capital Q and then what happened                                 is when you have all this information                                 distributed in the mines it's very                                 difficult to get into integrity                                 so the most easy way to do this this is                                 way to do this is to take all this                                 information all the loop that happens                                 within these micro services and then                                 start everything into a single                                     firmly single document per per troubled                                 soul so when you have the whole picture                                 of their travels in a single document                                 you can store this kind of documents in                                 the database I believe every single                                 movement like practice inventory under                                 one and then extract everything                                 Eugenia data per customer as fine job                                 actually he takes everything and                                 transformed this information into a                                 cloud storage so in cloud storage we                                 have several titles with all the                                 information that we need to index in the                                 center the last extraction the head of                                 the solution so what it does the                                 solution takes these files you should                                 make around this and store everything                                 into the grand elastic cluster the other                                 part of the architecture that it's very                                 worried to to to talk about if the                                 enrichment data it what it does actually                                 Richmond it is                                 into customer it takes all the events                                 that comes from the front end store this                                 Evans into packet files                                 thanks to cloud dataflow and then we                                 have a last data per cluster with                                 several spark jobs that takes all the                                 insight from these files and if this is                                 inside we store this information into                                 the elastic cluster and in MongoDB for a                                 statistical problems purpose and for to                                 make the search smarter because thanks                                 to this we have next queries we                                 calculated tax we have outer suggestions                                 we have all the fancy stuff around the                                 search and the last one it's how we                                 integrate the API into our existing                                 e-commerce solution so what we used is                                 the button for instant pattern                                 so with this microservices the search                                 presentation API microservice when does                                 his lunch in parallel several requests                                 to price from Bentley promotion and                                 others and to the Search API and compose                                 a single response that we sent to                                 empathy yes yes an empathy exists is the                                 component from empathy in charge of show                                 the result list in the best way for the                                 customer so with all the user experience                                 and we design in the in the in the                                 previous stage of the of the planet                                 talking about components we want to talk                                 about the components from the                                 perspective of what we do for us what                                 what means for us prepare food                                 so for example the indexing process and                                 the operational                                 TV is it's a very happy because the                                 indexing process always never failed we                                 have a success rate about                                         Richmond Index movie of the one always                                 known apparently and we have the two                                 engine and with the tooling the                                 marketers are pretty hot as well because                                 compared with the other the control is                                 very easy to use the they don't have so                                 many rules Mongoose to maintains so                                 because the the search engine itself can                                 relax to the things of the interests of                                 customers so the only thing is to see if                                 the search is behaving in a proper way                                 and adapt some things on zone just                                 something that the waste of some                                 attributes and post-abortion families                                 and it helps us work with promotional                                 stuff because now they can insert                                 banners into the rasulu list and with                                 this banner they can sell this is space                                 to other providers so well it's                                 something that the marketers do and at                                 the end they do several polish games and                                 the last one is to talk about sets such                                 components and what apart from all the                                 usual speed and that office to our                                 customer where the accuracy of the for                                 the search but really it helped for the                                 colorful engineers because this is                                 something that people don't use the top                                 but well for us it was a big improvement                                 because the productivity of our                                 developers increase a lot because they                                 only thing that they have to do is                                 consume if he has and focus on the users                                 aliens or other information the tasks                                 that we are have that they are they are                                 working on and forget those things of                                 understand the black box                                 about the sets their behavior than                                 unexpected behavior that they all sense                                 had so at this point we would like to                                 share with you a small story about the                                 jerseys were believed with all the cove                                 identity in the staff all the                                 communities in crisis so it was a small                                 story about masks and how the church can                                 react to the demand of our customers so                                 the thing is when people think in masks                                 before the community crisis people were                                 thinking about beauty mask but when all                                 the question happens all the prisoners                                 come up what people want when they look                                 for masks they are they are thinking in                                 some dreamers the once antagonist so we                                 took some information from our search                                 from the search insights and we see that                                 before                                 the commitment in crisis people was                                 waiting for max to find or it must of                                 all kind of it max for sanitary mask it                                 was a few persons looking for sanitary                                 masks but the rest of the people were                                 looking for beauty must                                 but during convenient in crisis                                 apart from increase of the queries with                                 word masks what people were looking for                                 was a sentiments so compared with others                                 during the community faces it's a bit                                 different                                 so what happens in terms of the cells so                                 the cells attack automatically all day                                 out of suggestions and next queries well                                 so here you can see the wood must carry                                 and that means masks and the suggestions                                 is look for malaria some Italian it                                 means some sacraments and apart from                                 that the search automatically suggests                                 loans and sanitary gear as well because                                 there are the people people used to look                                 for masks and then look for those and                                 then look for sanitary oh so the church                                 can realize this thing and add up all                                 the suggestions based on this and that's                                 not seen its how automatically the                                 result list promotes they must the                                 central mass of the youth mask so in                                 this example you can see the difference                                 between the secretary mask and beauty                                 max in terms of promotions the results                                 so one two and three are boosted                                 automatically actually the most boost                                 result is the second one but there are                                 some business rules that promote the                                 first one it's basically because it                                 belongs to the footside and has more                                 priority but if we look for beauty mask                                 we find out that no one of them are                                 boosted because they are this time they                                 are very important for people                                 so the results of all of this but what                                 the results so in the Green Line with is                                 the distant point in the in the time                                 where we launched our empathy search                                 into the public we have the                                 interpersonal for a while but for the                                 for the public for the rest of the                                 customer we launched this the in the end                                 of the January and from the very                                 beginning what you can see is a spike in                                 the number of queries that customers                                 thus against the the search engine and                                 we increased from almost two to almost                                 fourth yes from the very beginning and                                 that means we increase the number of                                 searches per session producer in a forty                                 eight percent so but at the same time                                 what is very important is the wonderful                                 period of customers that use the search                                 decrease in forty nine percent so people                                 stay in our website more time playing                                 with the search navigated Nashua                                 fortunately find something and well of                                 course these two things that you can see                                 in doing maybe the second decision will                                 marks that's because the coronavirus                                 crisis because we face a lot of traffic                                 on my way the search coped with traffic                                 with no major issues                                 well next step                                 let's to finalize that and the talk so                                 we have several things to do in the                                 future in terms of chart we have to                                 still improve in all desserts in terms                                 of performance accuracy the variability                                 and devolution itself of the stress                                 rhenium                                 the second one the second most important                                 thing after this year is the navigation                                 broaching the Catalan ocean we are                                 planning to use the solution for the                                 problem listing pages for example                                 deterioration that'll make it integrated                                 with the shop in and all the things                                 related to catalog we are going to place                                 the research in the middle of the                                 e-commerce platform and use the specs                                 for almost everything related to the                                 catalog and the third one is to still                                 working in going distillation that means                                 we want to get all this information we                                 have in every phase of that house we                                 have a lot of information about our                                 customers and improve the                                 personalization and we can do it one to                                 one that takes a lot of challenge like                                 privacy we need to solve but it's a path                                 that we want to to work well that's all                                 thanks for listens                                 I hope this was really interesting for                                 you and again less less for listen thank                                 you very much thank you here's us Thank                                 You Borja so we don't have much time for                                 questions but we do have a couple of                                 minutes                                 after summarize them here                                 so you mentioned a you mentioned the                                 current situation and copied                                         affected the way the search worked which                                 was great and we had a question from                                 angel that wanted to hear how that                                 impacted some other areas like groceries                                 and staples like goods like food and                                 basic basic needs okay so the first tip                                 I thought we had was we suffer suddenly                                 a big traffic an amazing one we never we                                 never seen such a man traffic in our                                 grocery online grocery and well we have                                 some trouble that the people demand at                                 most                                 for example the floor the paper toilet                                 the market itself that was a change in                                 the behavior of the customers that                                 impact for example to the supply chain a                                 area they had to buy from other                                 providers to see where they had to look                                 for these kind of problems in other                                 countries for example so it was a change                                 and they offer flats because the Hedden                                 man that we had in terms of search well                                 a situation in the slightest it in their                                 behavior a lot in customers so thanks                                 for for this kind of assess that we have                                 right now we can react to the man of the                                 people and offer the probes that they                                 need thank you hisses so the another                                 question is about the data flow so the                                 fact that you showed how the data is                                 ingested was appreciated                                 and the question was                                 so a very specific questions from from                                 Ronnie about the data flow that                                 mentioned the concept of POD and the                                 question was what would be encapsulated                                 in a pod and what's the purpose of the                                 okay well actually a boat is a workload                                 it's something it's a concept from                                 kubernetes it's not something special                                 what we are is a small application we                                 can be blowing into Vanitas so in it                                 that in terms of the search what we are                                 encapsulated in the pod is a small                                 application that he just takes all the                                 air coming from the front end and tap                                 the heaven to add the flow to transform                                 from a specific time window this                                 information into parkade files that's                                 it's a quite simple                                 come take a trunk of any disease it's a                                 technical one so maybe one last question                                 or maybe a two if we have time about the                                 so it seems like a long journey                                 you mentioned sixty-six years in the                                 beginning so there were a lot of                                 challenges to address we had questions                                 about like what was the biggest                                 challenge for for you and especially                                 about Google Google cloud platform was                                 that connected to a cloud or maybe not                                 what was the bloody challenge we we had                                 several big big really big challenge so                                 from the last six since the last last                                 six years we had for example the first                                 one was to to deploy the first old moon                                 solution this kind of platform that you                                 can have from traditional vendors and                                 the second one was where was to realize                                 that the platform wasn't enough for us                                 for our business and to make a plan to                                 platform everything and                                 that but happens maybe in                                              it was a very short time of of life of                                 distant platform so and the challenge                                 here was to how to decouple all the                                 single pieces that this kind of a                                 platform has to chop all the platform                                 into pieces and deployed this kind of                                 functionality from scratch into Google                                 Cloud using modern technology like                                 kubernetes or Malinda no Eli span jobs                                 or Apache being or wherever you are half                                 available on the cloud ok so thank you                                 thank you Jesus Thank You Borja thanks                                 everyone                                 you
YouTube URL: https://www.youtube.com/watch?v=QGQW5XfO5LE


