Title: Berlin Buzzwords 2017: Juan de Dios Santos Rivera - Anti-Spam and Machine learning at LOVOO #bbuzz
Publication date: 2017-06-15
Playlist: Berlin Buzzwords 2017
Description: 
	Spam is defined as the unauthorized use of a platform to send unsolicited content, usually in the form of advertising, to its user base with the purpose of generating views and revenue. LOVOO is a dating platform with over 50 millions registered users, making it attractive to spammers. Due to the nature of the service (a dating platform) many of the spammers disguise themselves as real users, using believable images and genuine descriptions on their profiles to lure our users into believing they are real people. 

To achieve the goal of keeping our platform free of spam, LOVOOâ€™s dedicated anti-spam team relies heavily on machine learning and massive real-time data processing. So far, we are winning this fight. As seen in our latest Fake and Spam Transparency Report, on a daily basis, only 0.3 percent of the active users are spammers, and on average it takes around 2.2 hours to detect them.

In this presentation I will talk about how the anti-spam platform works, and will present some insights and statistics about our findings.

Reda more:
https://2017.berlinbuzzwords.de/17/session/anti-spam-and-machine-learning-lovoo

About Juan de Dios Santos Rivera:
https://2017.berlinbuzzwords.de/users/juan-de-dios-santos-rivera

Website: https://berlinbuzzwords.de/
Twitter: https://twitter.com/berlinbuzzwords
LinkedIn: https://www.linkedin.com/showcase/berlin-buzzwords/ 
Reddit: https://www.reddit.com/r/berlinbuzzwords/
Captions: 
	                              thank you thank you guys ah so good                               afternoon my friends my name is                                       am a software engineer big data at logu                               and today is a really really special day                               I'll be honest with you and the reason                               is because first it is actually my first                               time speaking in a conference um really                               happen excited to be here and second of                               course because I'll be talking about                                machine learning and anti-spam so let's                                begin                                this is the agenda for today first I'll                                be talking about span at Naboo who are                                the spammer how do they behave followed                                by this I'll show how do we detect the                                now how to be blocked and how do we                                fight the spammers and lastly I'll show                                some insights on numbers some graph                                regarding how the system is performing                                however before studying what is love and                                love with a taking up meaning that we                                have a bunch of pretty people that are                                flirting which is order hunting polish                                order and most importantly trying to                                find that sweet love that we all like                                and adore but yeah what is spam well I                                like to define span as the unauthorized                                use of a system or a platform to send                                display or just to communicate also                                elicited and disrupting content that                                usually comes on the way of                                advertisement now the goal of this                                advertisement is of course to generate                                some kind of revenues views or any sort                                of profit but this luck the guide is                                really really bad because we are                                updating up so we have people trying to                                find all the real users who want to                                spend time with them and these two                                participants they are getting on the way                                of that                                because I've used in genuine images in                                their profile they use really good                                description to learn our users into                                believing that they are real I mean for                                example just imagine that is Friday                                night and you are on Netflix doing                                nothing in your house you swipe in                                slightly annoying pin and you get it's                                really good much and they just start                                talking with the match about boom                                spammer                                you're going to get really sad you know                                and it has a lot of negative effects for                                example it damaged the image of the                                product because I want people to think                                of logo as this amazing place to find                                love and adventures also it is truck our                                customer support because the people they                                call customer support live here spammers                                here on                                on and then support they had to take                                care of the ticket they sent emails to                                everyone so it takes time and you know                                what they say time keep cost money and                                lastly it makes our users sad so they                                quit the platform and they I'll be the                                one who's going to get sad okay but how                                the spammer behaved and here I have this                                asterisk because most of the spammers                                they are actually boss otherwise it will                                be kind of easy to touch them and I like                                to define our farmers into one of two                                categories we have the active spammers                                and the passive one and they've all of                                the active spammer is to really really                                try to engage into conversation with you                                and for doing this they use a bunch of                                pretty picture of RTS Instagram and you                                guys have no idea how many Brad Pitt of                                Scala Johansson I have seen on the app                                and when you are in the conversation                                then boom they stand you with on ADD or                                blackmail or even prostitution services                                and I mean answer for some of things                                quite cool but that's something we don't                                allow in the app on the other hand we                                have the passive spammer and this one                                they just write a really simple                                advertisement in their status and that                                they both both both both so when you get                                the both notification you go to the                                profile and you are going to see the                                message and this is an example of a                                Thamud profile okay the picture is                                uploading is really weird but just                                imagine there's a French girl here                                called Roxanne                                                        this is not Roxanne and Jesus Lord and                                 but here you can see that about me and                                 there's a bunch of tags and it basically                                 say that recently I broke up with my                                 boyfriend                                 I'm looking for a friend with benefits                                 to have some fun so if you would like to                                 have sex on camera please email me at                                 this address                                 come on this is fun who is going to do                                 this I'll just write me here for her sex                                 yeah whatever but how do we clean the                                 garbage what are we doing to get rid of                                 all these spammers will say hello to                                 Auntie Stan now at the Spanish our Buick                                 system for detecting and controlling                                 spammers and it is divided into multiple                                 components and we like to call a piston                                 an event-based system because it depends                                 on all the events that are processed in                                 the Attic                                 for example every time you vote for one                                 person or every time you send a message                                 or every time you block someone those                                 are events now every time you perform an                                 event it goes to our back-end which is                                 there on top which is reading in goal                                 and note on PHP and then the back end is                                 going to emit is going to push the                                 content of these events into Casca with                                 functions of our backbone or the heart                                 of an T span on the other hand the skies                                 also facilitate the communication                                 between our component because first it                                 provides the data that we need of course                                 and second it less than communicate                                 between each other                                 so if component a wants to know                                 something about component B instead of                                 asking directly it's going to be like yo                                 Casca do you have had this information                                 about this user sure bro I haven't Incas                                 guys going to provided by keeping the                                 state of the component but now you see                                 here that and Hispanics based on                                 different components however just five                                 of them they're actually used to fight                                 the spammers out of these five two of                                 them are non machine learning based and                                 the rest are machine learning based and                                 well today I'm going to be focusing on                                 the machine learning ones I'll give a                                 really really quick recap of what our                                 than non machine learning models first                                 we have them drool baseless then it's                                 basically a bunch of lists and rules                                 that if they are violated by the user                                 then the user is going to get punished                                 for example we have the IP blacklist                                 if you come from IP X then you are out                                 or we have the terms blackness if you                                 write this random word on the text like                                 but names and such then punished and                                 then we also have the community and the                                 community is the responsible of keeping                                 track of how many reports a profile                                 receives in a short amount of time for                                 example if I receive                                                    one hour I'm sure that I'm doing                                 something really really wrong so we are                                 going to detect that and what going to                                 happen punished yeah we like to punish                                 people here but come on let's move to                                 the good ones the machine learning base                                 and here I'll be talking about three of                                 them activity base report clustering and                                 entity reputation so activity base model                                 this one follows a super busy learning                                 approach and we use a random forest of                                 around                                           give it'll take and it's really simple                                 you know it classifies a user into                                 either a spammer a bad person or a                                 hammer a good person and the model uses                                 over steady features that are related to                                 how the user behaves in other words we                                 do not care of who you are we care about                                 what you do and some of the values of                                 these features are the absolute number                                 of execution of a certain event or the                                 proportion of an event with respect to                                 other events this is an example of my                                 really huge training set got so big and                                 here we have user ABCD and we can see in                                 the first column we have the event                                 called message blog and for user a the                                 value is                                                              use of all the events that this user has                                 performed                                                             message blog but on the last column we                                 have the event today log in and today                                 log in is the absolute number of times                                 that the user has logged in in the last                                 X hours and this is how the system works                                 I'm gonna tell you a little story here                                 and ask with everything's big data it                                 starts with a loop in a do we keep our                                 historical data all our events and then                                 here we execute a bunch of spark jobs to                                 calculate the features and why spark and                                 when so many well because we are                                 calculated on three features and some of                                 them related to the distance of the user                                 so just imagine that if the person moves                                                                                                       take that into consideration so this is                                 really really really heavy load for the                                 system then after we have our data our                                 features we move to our and in our we                                 prototype the model we select feature                                 with the move feature we do a player we                                 remove the outlier we calculate you know                                 everything just prototype in the whole                                 system                                 and after we decide that this model is                                 good enough like it is good then we move                                 to our activity based model we deployed                                 existing into production however however                                 in our and this is in Golan so we need                                 some kind of intermediate steps to                                 convert this from A to D and so we have                                 this kind of model generation that is                                 going to take our our model and it's                                 going to convert                                 that into gold code and the responsible                                 for that is here that guy so any                                 questions go to him and of course we                                 have Kafka but after going to keep                                 updating us of all this of all the                                 updates of the users so every time we                                 receive a new object then we are going                                 to trigger a new prediction then the                                 next one                                 the default clustering and unlike the                                 first one the ripple clustering features                                 a of supervised learning approach and it                                 uses a some kind of hone made online                                 version of k-means and maybe some of you                                 here know what it K means but the main                                 difference between the traditional                                 k-means and ours is that it's online                                 while always learning on the go so we                                 learn we predict we learn we predict                                 it's like dancing you know                                 tatata so then after we have that after                                 we have the system the the purpose of it                                 is to detect and to combat span wave but                                 how do we do this well we create dynamic                                 rules for the root system that I                                 mentioned previously and this rules are                                 based on content type that is being                                 reported by the user a bit confusing                                 right but yeah and here once again                                 another story but this time the story                                 does not start with Hadoop this time is                                 start with a report so let's say that if                                 you look like a spammer and I'm running                                 to you and then you write me hey sexy                                 please visit me a hot steamy sex calm                                 I'll be like bro no you are a spammer so                                 I'm going to report you boom after I'll                                 report you then I'm going to create I'm                                 going to trigger something called the                                 report created event and attach to this                                 report created event we will have the                                 last message sent but the person that                                 was reported so I'm going to receive                                 this new event with this string the next                                 step is going to convert the string into                                 a numerical vector after this to use the                                 official Russian or Russian TF whatever                                 you want to call it and then we cluster                                 we closer this into our system and once                                 we know to wish closer it belongs we                                 calculate the average tf-idf of this                                 content here and for those of you who                                 are not so clear tf-idf stands for turn                                 frequently inverts document frequency                                 and it's basically a score that tells                                 you how important a turn is to a talk                                 moment that belong to a set of documents                                 and this guy my one document is one                                 closer on my corpus my set of documents                                 going to be the whole system but what                                 happened now up to this page I have a                                 bunch of tf-idf of all the content of                                 the cluster and I want to know is this                                 the SIDS                                                                 it is an outlier so for this I created                                 or me on my own equation which I like to                                 call one just like me and one stands for                                 ones or supervised anomaly number and                                 this score is uses all the tf-idf and                                 it's going to tell me if this number is                                 indeed are not linear so if it is an                                 outlier if my psi D F is greater than                                   then this content is going to be                                 converted into a rule for the rule                                 system so the next time someone funny                                 decide to write this again we're going                                 to know that whoa this looks really                                 similar to this other message that I                                 have in the root system so what's going                                 to happen punished next one the entity                                 reputation and this one is quite similar                                 to the first one because it also follows                                 a stupor besides learning approach it                                 uses a random forest and I can't tell                                 you how many trees we have because this                                 thing is built kind of on development                                 and it classifies the user into a                                 spammer but person or hammer good person                                 but here here instead of looking at how                                 the person behaves we have something                                 called the entities and we call the                                 entities or we define an entity as the                                 resources or system that a user uses to                                 communicate to the platform for example                                 IP from which IP do you come from device                                 which device are you using                                 is it Android is it where is it iPhone                                 and the conflicts from which country you                                 are participating in the app and then                                 for each one of this entity for each one                                 we have a set of counters that we call                                 this course for example the users how                                 many users come from IP X the punishment                                 how many punishment has have been                                 received in country Y and the default                                 but we even go further than that are                                 using a combination of                                 discourse we calculate ratios and we                                 call all these ratios dip the reputation                                 and this is what we are going to use for                                 predict and an example of one of the                                 ratios is the ratio of punishment                                 meaning that for example of all the                                 people that come from I P                                             many of them has been punished of all                                 the people that are using Android what                                 is the ratio of report so if we take all                                 this course and we add them up if                                 something is going to be like the                                 likelihood of how spammy and entity is                                 because our assumption is that if there                                 isn't kind of spank wave or some kind of                                 attack all the spammers are going to                                 come from the same place so next time we                                 receive an event from IP whatever and                                 device whatever then we are going to                                 know like hmm                                 this is fishy I figured a spammer so                                 what's going to happen punishment but                                 now come on                                 but now inside how is the system                                 performing how does it look well here we                                 have some draft and this one is called                                 the reported users across month and on                                 my white axis I have the percentage from                                 the eleatic user in other words all the                                 users that are active including one day                                 and on the x                                                             beginning of the year until a couple of                                 days ago and all those pretty colors                                 they are countries Germany France and so                                 on but a really cool thing here is that                                 first the average value is around the                                 same                                                               really good number but booty Marsh I                                 think the spammers they got a bit cocky                                 or something like that and they decide                                 to increase their activity and that's                                 why we see that the trend is kind of                                 increasing whoop-whoop however                                 unfortunately for them we have plans to                                 deploy aware new activity based model on                                 April understand why everything is going                                 down down down the next one quite                                 similar to the first one once again here                                 we have the percentage from telly a                                 diffuser and here all the basic the                                 beginning of the year and the really                                 cool thing here in the blue lines that                                 we see the huge spike in April because                                 that's when we deploy the new activity                                 base model and after that the performer                                 was really really good we're really                                 surprised and a bunch of points on a                                 bunch of people they got blocked                                 and then now everything is going of it                                 is kind of a stabilizing then we have                                 the intuitive reputation we know have                                 enough data about it because he's the                                 new kid in town so we're still trying to                                 get familiar with it and on the last so                                 on the last place we have the dynamic                                 rules or the report clustering which is                                 being all wasted we get one but is                                 really two what it's supposed to do                                 then the spammers by country and here we                                 can see that around                                                    to France is your money or USA and this                                 is really really really good because we                                 know who they are you know we are like                                 path you know you like your Spanish                                 what's up                                 so in some sense like we're kind of                                 controlling them because we know from                                 where they come from I mean for example                                 is one day so that if we decide we see a                                 bunch of spammers from country eggs then                                 we're going to be like whoa what's going                                 on here                                 so this is really really nice and the                                 last one and this one is completely                                 different from the others if this                                 involves more machine learning base is                                 an historian with the confidence value                                 of the activity based model because when                                 our activity based model it says that                                 your spanner or hammer instead of doing                                 that actually it give me the confidence                                 value how confident I am that you are a                                 spammer so we use that that score and                                 some kind of post-processing just to                                 make sure that you are really a spammer                                 just to make the final decision but the                                 really cool thing here is that either                                 the value is like I'm not so sure or I'm                                 really really really sure so I'm                                 guessing that we are doing quite of the                                 right thing so I think my friends are                                 really okay yeah yeah whatever yeah                                 [Laughter]                                 but-but-but any question feel free to                                 spam me haha at any of our Twitter and                                 yes they know to spam because Tom Sox                                 yeah                                 Spanish accent is any questions Jesus                                 okay oh God                                 about the machine learning part how do                                 you handle SKU data great is your false                                 positive they're false positive or I                                 mean we have false positive I really am                                 not sure if I can say name but we have                                 around like two of them per hour you                                 know for example and how do we handle                                 them well when okay I didn't explain but                                 when I say punish we do not block the                                 person we ask for a verification either                                 by using XML verification or picture and                                 when we are really sure that you are a                                 spammer then we ask for a picture so the                                 person has to take one picture one says                                 we haha and then we verified if the                                 person is indeed the real user otherwise                                 not so that's how we handle them so we                                 own it there are some cases maybe we're                                 deaf person is like I don't want to                                 verify myself and bla but you know this                                 yeah that's something that happened so                                 this data are I mean ah whatever is the                                 fact if equation how do I handle that oh                                 yeah of course I mean yeah I mean okay                                 sorry yeah but soon for everyone else                                 basically spammers are less than normal                                 the ayah uses so we have a skew in our                                 training dataset yeah so you do use                                 graduating or do you yeah                                 manufacture I mean like like we used all                                 the classes but the thing is with one                                 during training we actually our main                                 focus is to reduce the number of false                                 positive so for this we kind of tweaked                                 a lot the training set just to make sure                                 that we are not jumped we're going to                                 avoid that so we kind of balance we try                                 to balance the amount of spammers on                                 hammer because otherwise this that the                                 model is going to no because it'll be                                 very smart about the hammers but in a                                 lot of these farmers so we cannot try to                                 kind of balance them at least like like                                                                                                  like yeah yeah yeah hey thanks for your                                 talk                                 I was curious like you have a lot of                                 text there who do think like                                 incorporating some girls NLP features                                 would really help you a lot yeah can you                                 please repeat like incorporating some                                 kind of NLP features like not just look                                 into the popularity of a city or like                                 over where you have the ratio yeah I                                 mean like because for a call stud thing                                 it might be a problem like the first                                 spammer and you have no spam report                                 you'd say like yeah it's very good comes                                 up but do me for the entity one yes like                                 for a text so kind of looking into like                                 how does the spam structure looks like                                 what are the words which are kind of                                 kind of blacklisted I mean yeah for the                                 entity one like we don't do any sort of                                 NLP that is the question we basically we                                 just use like I say here or the                                 reputation scores both things                                 yeah like the entities are mostly this                                 so we don't really we already take into                                 consideration what the person is                                 actually saying be in the only Eastern                                 well we kind of know what when we take                                 into consideration the content of the                                 message is when we use the report                                 clustering because we received the last                                 message but other than that we haven't                                 explored that waste so much indeed first                                 of all you have a very cool style                                 presenting cool thank you yeah two                                 questions I guess the first question so                                 you have to do give stuff in hdfs then                                 you use Park and you put it into R then                                 you put that into go yeah so it already                                 feels like a using a bunch of languages                                 how do you communicate this part to our                                 bit okay good question yeah so do you                                 spark we are or our yeah not all so we                                 have this spark here and then after we                                 finished our work in spark we actually                                 we just don't we just load all the data                                 into Impala and then in our we read from                                 Impala and then we load all the data                                 yeah so it's not so automated and that's                                 mostly because of my decision because I                                 cannot like to get my hands dirty in the                                 process and select features and so on                                 like kind of like to play around so if I                                 do it automatically is going to be like                                 pressed button and go to sleep                                 antara and nah that sucks fair enough                                 one that one other question is I can                                 imagine one of the hard parts here is                                 sort of getting the ground too right                                 because if some people file a report                                 these guys actually spamming that's a                                 good signal definitely spammer and you                                 have certainty in your label                                 yeah it might be that someone's actually                                 spamming but no one has reported it yet                                 I mean yeah yeah like that's what sort                                 of your trade off there that's also I                                 mean that does yeah that's indeed one                                 issue like we have someone that is                                 plumber and we do not know them but I                                 mean yeah in some cases we just have to                                 close our eyes and do cogeco save this                                 time but I mean even if the person is                                 not reported on and that if the person                                 keeps moving in the person keeps doing                                 event eventually the first model is                                 going to catch them because we know the                                 activity of the users so if the person                                 is never reported then eventually yeah                                 eventually so we don't have time for                                 more questions but solutions to think                                 one after the talk yeah Swami yeah thank                                 you thank you guys                                 [Applause]
YouTube URL: https://www.youtube.com/watch?v=LKjQyDEzF7E


