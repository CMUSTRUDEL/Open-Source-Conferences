Title: Giles Sirett: Building Clouds with Apache Cloudstack
Publication date: 2018-12-05
Playlist: Apache EU Roadshow 2018
Description: 
	Apache CloudStack is open source software designed to deploy and manage large networks of virtual machines, as a highly available, highly scalable Infrastructure as a Service (IaaS) cloud computing platform. This talk will give an introduction to the technology, its history and its architecture
Captions: 
	                              okay good morning everybody welcome to                               the second talk of the day of me                               following the Kino my name is Giles I'm                               talking about patchy cloud stack                               introduction to building clouds with a                               patchy cloud stack this isn't the                               biggest audience I've ever spoken to but                               I guess the fact that it's like walking                               up the North Face of the Eiger or Mont                                Blanc or something to get here maybe                                there's                                                                something like that                                okay so just about me I'm a longtime                                committer and PMC member of a patchy                                cloud stack this is really my first sort                                of open source experience I've been                                involved in the project now for seven                                years my day job is I run a company                                called chez blue and we provide services                                around Apache cloud stack but we are an                                open-source first company we believe                                                                                                      and spend a lot of our lives working in                                in that project I run also the European                                user group around class cloud stack I'm                                just going to get this out here now even                                though I'm a committer and PMC member I                                spend my day running a business okay I                                don't spend my day architecting                                solutions or writing code I used to do                                that a long time ago                                so this talk today is going to sort of                                reflect that I'm going to talk about the                                history of the project I'm going to talk                                about using the use cases around cloud                                stack gonna demo it to you and give you                                an idea about how you'd go and build                                your first or even your your second                                cloud stack environment long time ago I                                was a physicist a software engineer I've                                got married with a couple of kids do a                                bit of running coach rugby and you'll be                                pleased to know I'm British and European                                or I consider myself British and                                European read into that way you like                                okay so we're here to talk about a                                patchy cloud stack a quick show of hands                                who has used deployed played with a                                patchy cloud stack okay then getting                                that about                                                              of a patchy cloud step before this talk                                okay that's interesting so some people                                are turning up to this talk and actually                                haven't heard anything about this                                project and that's really what we're                                trying to do during this talk is                                actually just get you familiar with the                                technology                                understand it's use-cases CloudStack is                                I'm gonna read this info a scalable                                multi-tenant open source purpose-built                                cloud orchestration platform that's the                                key piece is a cloud orchestration                                platform it's for building                                infrastructure as a service                                clouds okay over the years we've had                                different sort of definitions of what                                this type of technology does cloud                                management platforms infrastructure                                automation platforms but basically what                                it's doing is taking a load of                                infrastructure bits and delivering it                                out                                through an API through a GUI for a                                command line to allow you to access that                                infrastructure as code or as a user in                                terms of the building blocks of clouds                                that you need to just sort of think back                                think of Amazon AWS think of ec                                       has been around for what                                            something like that now and this this                                slide was I saw this at an Amazon Meetup                                about                                                              explaining what ec                                                     they were saying okay we've got some                                infrastructure components and networks                                and storage compute we're going to put                                on top of that a hypervisor what Amazon                                did ten years ago is they took a                                modified a fork of Zen server                                we're going to build a CMP or an                                orchestration layer on top Amazon built                                their own okay that's going to present                                an API and of course they were selling                                instances Amazon so that was their use                                case they put an e-commerce platform on                                top and they already had an e-commerce                                platform because they were selling books                                and CDs and everything and really cloud                                 stack is there to allow us to recreate                                 those ec                                                                assumption that an organization has got                                 some computes and network and some                                 storage we pop a hypervisor on top all                                 with clouds that one of the key points                                 is we can pop different multiple                                 hypervisors on top we have we say we're                                 hypervisor agnostic which read into that                                 is we support a whole load of different                                 hypervisors cloud stack then sits on top                                 it presents an api and that can then be                                 accessed by whatever the tooling is                                 you've got on top of that ok we have a                                 command line tool called cloud monkey                                 which will sit on top of the REST API                                 but then it just                                 depends what you're then doing or what                                 the use case is for Klaus if you are                                 using it to provide public cloud                                 services and a lot of people do that you                                 might put that ecommerce platform on top                                 people increasingly underpinning a Cuban                                 eighties environment for example with                                 with cloud stack or another container                                 offering whatever it is who whatever                                 whatever it is you're actually use cases                                 on top what cloud stack is doing                                 underneath is automating the                                 infrastructure and it's something worth                                 talking about is you know this is a                                 project that's been around I'll explain                                 the history in a second for about                                    years and people increasingly say well                                 isn't that sort of old news you know                                 that's orchestrating a virtualized                                 infrastructure layer that we're going to                                 be doing this with containers in the                                 next few years it's probably true but                                 what we're seeing is increasing demand                                 for people who just want to abstract                                 away the physical bit of the                                 infrastructure ok the value to the                                 organization these days isn't at the                                 cloud stat layer the value is above that                                 but they just want to fire and forget                                 when it comes to infrastructure and                                 that's where cloud stack is is seeing a                                 lot of success at the moment in terms of                                 headline features broad and deep                                 hypervisor support that's key we support                                 all of those different hypervisor                                 including anybody seen XC PNG yet it's                                 effectively a fork of Zen server so some                                 guys based in where they list somewhere                                 in France have taken to market a new                                 open-source version of Zen so we we                                 support whole range of hypervisors and                                 we can mix and match those you know in                                 our cloud stack environment                                 Klaus site also has its own virtualized                                 networking model cloud networking model                                 I'm going to talk about that in a bit                                 more detail in it in a second it's very                                 very scalable by design largest known in                                 deployment of cloud stacks SATA about                                                                                                  underneath it it provides high                                 availability functionality and then we                                 access                                 through a UI of a REST API or a command                                 command line I'm going to do some demos                                 in it in a second I'm just going to use                                 the UI so you can see what's what's                                 going on in terms of its history as of                                 today cloud stack is a as an Apache                                 project and it has been in a top-level                                 project since                                                          quite interesting because it came                                 originally from a start-up a Silicon                                 Valley startup called VM ops and they                                 were called cloud comm they got acquired                                 by Citrix who wanted to get hold of this                                 thing and saw a sort of commercial model                                 around it and quite quickly realize with                                 other things that we're going on in the                                 space that open-source was the way                                 forward so they took the code the                                 intellectual property the trademark and                                 everything and donated it into the ASF                                 and that's when people like us got                                 involved once it became an open-source                                 project                                 Citrix have since exited the project                                 there's still a few people hanging                                 around who are involved sort of legacy                                 they exited the project                                               project it continues it continues in a                                 steady state I can't say we're gaining                                 massive momentum we have a reasonable                                 amount of mint momentum already and that                                 continues to be pretty constant we do as                                 a community three to four releases a                                 year just depending on how quickly we                                 can get the releases out and how long it                                 takes us to vote on them we have a lot                                 of very large organizations depend on                                 clouds that and we see that adoption                                 increasing that's that's the the really                                 health healthy news in terms of the use                                 cases it this fall into two camps so we                                 have a lot of public cloud providers who                                 are delivering their ec                                                 underpinned by cloud stack ok and you                                 could argue that's cloud stacks                                 heartland but increasingly we're seeing                                 non service providers that's the rest of                                 the work you know the rest of the world                                 would traditionally called enterprise                                 organizations deploying cloud stack to                                 underpin other things in their their                                 their organization we have a to release                                 cycles we have a stand                                 release icon we also have an LTS release                                 cycle a lot of people are looking for                                 stability in terms of long-term support                                 where we as a community commit to sort                                 of supporting that release for about two                                 years and key thing about our community                                 it's user driven we don't have any big                                 vendors we don't have a dominant vendor                                 in the Apache CloudStack community which                                 I think it's reasonably unusual for for                                 a significant open-source project                                 most of our contributors come from user                                 organizations in terms of the sort of                                 metrics around the projects we've got                                                                                                       diverse PMC from all sorts of different                                 organizations and just to sort of give                                 you an idea scale wise I just pulled the                                 figures the other day in four weeks four                                 hundred mailing list messages of                                    different people contributing                                                                                                                   locations to download our packages and                                 we're averaging around                                               okay so we're getting a lot of people                                 pulling our software we're getting new                                 users popping up all of the time okay                                 lots of stuff going on community wise                                 there's meetups happen in London there's                                 meetups happen in Berlin                                 Dresden there's there's meetups focus                                 around klaus app we have this whole                                 thing with cloud site we have a lot of                                 people who are using the technology that                                 we don't really know her using the                                 technology like any other open source                                 project particularly apache projects                                 where we don't track usage these people                                 pop up at meetups and we've never heard                                 of them before and suddenly you've been                                 using cloud stack for five years and we                                 also run our own conference every year                                 cloud stack collab that's going to be                                 happening in we're doing it on the back                                 of Apache Con in Montreal in September                                 okay so I mention the use cases private                                 calcloud public cloud obviously hybrid                                 cloud sits in the middle just to give                                 you an idea of the users this isn't a                                 customer slide for the organization I                                 work with this is people who are using                                 Apache cloud stack okay notice in there                                 solve big service providers Korea                                 telecom British Telecom KDDI who are                                 Japan's biggest telco service provider                                 and I tend to think of them as the the                                 tier                                                                   hyper scalars they're not the they're                                 not Google Amazon Microsoft they're the                                 next level down ok and then lots of                                 other organizers anybody from any of                                 these organizations in the room know ok                                 and then lots of other organizations                                 some of them aren't service providers                                 and we traditionally as a project we've                                 been really really bad at tracking our                                 usage this this is a sort of organic                                 open source set of logos that's been                                 compiled in the community over the years                                 as people have sort of said hey we're                                 using cloud stack but we're not very                                 good at that whole marketing and                                 engagement side as a project the other                                 thing we do have is and I know this                                 through some of the commercial work I do                                 is we do have a whole bunch of really                                 interesting users who just refuse to                                 talk about their use of color and in                                 fact refuse to talk about the use of any                                 software ok we have some massive                                 organizations and if you hang out in our                                 community long enough you quickly work                                 out who some of these organizations are                                 but we're not allowed to put their logos                                 on slides and things they get very upset                                 ok so in terms of what you can do with                                 cloud stack it's basically a                                 self-service platform for all of those                                 infrastructure components ok idea                                 creating virtual machines all of the                                 virtual machine lifestyle operations                                 networking operations because it has its                                 own virtual networking model we've got a                                 number of different types of networking                                 models yours obviously manage things                                 like firewall port forwarding rules low                                 balancing etc all done through a GUI or                                 through the API or the command line so                                 again quick show our hands in the room                                 who is see who has actually seen clouds                                 that before so I asked a similar                                 question earlier ok so there's enough of                                 you interested in having a quick look at                                 cloud so sign of my age I'm afraid I                                 have to put these on to to do a demo                                 these days                                 okay                                 okay so just to explain here I'm VP                                 ending to our lab at work so I'm not                                 using a public facing address there this                                 is the cloud stack GUI we only have one                                 GUI it's used for both administration                                 purposes and then a reduced version of                                 that GUI is used for users of the                                 environment okay                                 I'm logged on as a domain admin here so                                 I can show you lots of different things                                 as a user I would get just a slightly                                 restricted version of this okay let's                                 just start with some basics in terms of                                 I can go and look at all of my instances                                 these are my virtual machines these                                 could be based on any number any                                 different type of hypervisor depends                                 what the administration the                                 administrators got configured in the                                 environment and I can click into those                                 machines and do some quick lifestyle                                 operations on it starts stop it I can                                 view its console I can reset its                                 password etc etc I can take a snapshot                                 of that machine for example if I want to                                 add an instance we have a wizard to walk                                 us through we have a concept of zones in                                 in cloud site a zone is very similar to                                 a region in in Amazon it's basically                                 maps to a data center I've only got one                                 here because it's just a small lab                                 environment but you might see a London                                 zone and Amsterdam zone and a Berlin                                 zone it's where I want to deploy that                                 machine to okay I choose a template that                                 I want to I want to base the machine on                                 again here I've only got a small select                                 number cuz I cuz I'm in the lab so I am                                 finding this is the first time as I'm                                 getting older where I've had to wear                                 glasses to do a presentation and I have                                 to you have to keep taking them on and                                 off okay so I'm just going to choose to                                 build a small census machine I choose                                 that the the service offering I want the                                 the which is basically how many virtual                                 CPUs how much memory how much root disk                                 space I I want for that for that machine                                 very similar to an instance size in in                                 Amazon and again all of this has bisque                                 its configured when you configure the                                 cloud stack environment in terms of                                 those choices I'm just going to choose                                 small                                 okay what disc offering if I want                                 additional storage with it I can have                                 affinity groups to make sure it goes on                                 to the same physical host or stays away                                 from the same physical physical host                                 actually just go back there I now choose                                 what network I want to put that machine                                 on I've got one here called when I was                                 using called root net there's nothing                                 special about that name it's just the                                 name I've given it or I could choose                                 multiple networks in fact that's my                                 default now okay or I could go and                                 create a new network and depending on                                 the networking model we have deployed in                                 clouds that Klaus that's gonna go off                                 and orchestrate the virtual networking                                 components required to build a new                                 network configure all the interfaces get                                 this machine on it and I can then manage                                 that as well through through the GUI                                 okay I think my SSH key pairs give it a                                 test and off we go                                 Klaus that's going off talking sending                                 commands down to the hypervisor to go                                 and create those since building the                                 storage required for it getting it on                                 the network building any new networking                                 components we need to actually make that                                 happen                                 which isn't an instant thing depends on                                 the size of the machine where your zone                                 is etc etc there you go twenty to twenty                                 seconds or something like that and I can                                 now go and handle lifecycle operations                                 in fact if I'm quick and I look at the                                 console here we'll see that machine                                 actually booting now the instances being                                 created was that CentOS yep so you can                                 see the instance actually booting so                                 it's all about abstracting that the                                 control of that infrastructure out                                 through the user interface of the API                                 just very quickly if I drill down into                                 for example Network I can then look at                                 my networks what was that one on                                 not what I think                                 okay see what IP addresses I've got on                                 my network and then I can go and                                 configure my firewall load-balancing                                 port forwarding rules into that network                                 so for example I could take an instance                                 open up certain ports out to the the                                 public Internet for example in fact I've                                 got a web server somewhere have a look                                 yeah I've got a web server called                                 Charles's web server and if I want to                                 port forward to that okay                                 where I want to forward to there's my                                 web server bang and this is cloud stat                                 now orchestrating its virtual networking                                 model which is multi-tenant networking                                 model to allow me as a user to actually                                 go and build ultimately quite a complex                                 network environment if I want to I don't                                 know what the IP address                                           somebody remind me                                       yeah okay so as a user very simply I've                                 create a virtual machine I've created                                 some port forwarding firewall rules to                                 let traffic in on a certain port for                                 that and that's as a consumer a user of                                 classic this isn't an administrator                                 function okay the other thing I                                 mentioned we have an API and a command                                 line okay so just a couple of examples                                 there from our from our REST API so                                 first command there is lists all the                                 virtual machines that's been performed                                 as a as an administrator I could list                                 all my templates create a new network                                 create a new virtual machine and just to                                 be clear most people who are using cloud                                 stack are accessing it through the API                                 and the command line okay                                 the the GUI tends to be for the                                 configuration and management of cloud                                 stack but most people are in teams who                                 want to provision bits of infrastructure                                 and they will have these API commands                                 embedded in whatever scripting they're                                 using for their tooling on top that's                                 the normal use case for cloud stack and                                 there's just a screenshot there we have                                 a command line tool called cloud monkey                                 which calls that REST API so that's                                 doing the same commands there through                                 through the command line that can                                 obviously be embedded in in scripts etc                                 etc okay one of the big problems we have                                 with cloud stack is we have a real                                 perception problem with cloud stack you                                 know I've showed you all those logos at                                 some very very big organization they're                                 just the ones we know about right we                                 know there's lots of other people                                 running cloud stack who never tell us                                 about it okay and this is a real quote                                 from somebody we were doing some work                                 with a few years ago at a very large                                 company in Britain who were doing an                                 assessment of what they were going to                                 use for their internal cloud their                                 private cloud and we had a chat with                                 them and said okay we think Klaus stacks                                 the right thing for you and he said I've                                 never heard of cloud set                                 literally never heard of it                                 we like do not have heard of this thing                                 we have this perception problem okay                                 it's worth that's the Invisible Man                                 because some people often used to                                 describe it as cloud sight is the                                 invisible man of cloud computing okay                                 it's the best-kept secret in the cloud                                 it's this thing being used by lots of                                 lots of people but nobody ever you know                                 we don't have this general awareness of                                 it and I just wanted to explain the                                 reasons or the way I see it the reasons                                 for that if we we look at the hype curve                                 back in                                                                 was about private cloud and cloud                                 computing it was the the thing that it                                 was on it you know if this every                                 conference was called a cloud something                                 cloud something else okay and that's                                 when cloud stack was emerging through                                 his startup and Citrix and becoming an                                 Apache project around that time and the                                 problem we had is that does that                                 translate that's from google translate                                 desert yeah we were in the wrong place                                 at the wrong time because we got this                                 brilliant technology that's being                                 adopted and ultimately that was us stood                                 there and there were all these Bulls                                 charging in the other direction who were                                 all obsessing around another project or                                 collection of projects which was in the                                 same space as Apache Cloud sir anybody                                 like to tell me what that OpenStack                                 right and this was the problem and                                 everybody because it's all hype to                                 everybody particularly analysts also oh                                 let's have a big debate about cloud                                 stack versus open and it really was is                                 this competitive thing but those of us                                 working in Klaus that weren't these                                 aren't the same things they're two quite                                 different things but the industry wanted                                 to perceive that this was a two horse                                 race and that was really frustrating for                                 us as a project because in terms of                                 mindshare commercial interest in cloud                                 stack around vendors etc nobody wanted                                 to look at us okay we knew things were                                 going well but we really suffered from                                 that from that perception and a lot of                                 that touching on you know what was                                 mentioned in the keynote this morning                                 you look at the mission of the ASF is to                                 provide software further for the for the                                 greater good right and you look at the                                 mission of                                 she was talking this morning about the                                 Linux Foundation here I'm talking about                                 the OpenStack foundation the mission has                                 words like promoting ubiquitous growing                                 the ecosystem okay pay to play                                 getting the commercial interest apache                                 just doesn't do that okay and i agree i                                 think that's the correct model because                                 you build more organic software that                                 lasts longer because it's not getting                                 pulled around by vendors okay                                 but sometimes it makes it very difficult                                 when you're in a project that happens to                                 be in a space with one of these other                                 projects around at the same time but                                 just finishing up on that the reason                                 cloud stack has still had a reasonable                                 amount of success despite that is that's                                 the dependency diagram as a few years                                 old now from various OpenStack projects                                 that's you know just go over the idea of                                 the complexity of building an OpenStack                                 environment cloud stack is I would                                 describe it as integrated but I'm quite                                 diplomatic with these things some people                                 would describe it as monolithic okay it                                 does all of those bits in one management                                 platform okay                                 there's no linking up of                                              api's and having that upgrade nightmare                                 when you've got a distribute of purely                                 distributed sir properly distributed                                 system it gets easier and that's why                                 people are actually using cloud stack                                 it's integrated it's easy to install                                 it's proven at scale it just works                                 relatively low cost to run and operates                                 it's led by the user community so it's                                 not jumping off in different directions                                 and that's really something that's quite                                 interesting a lot of the people we work                                 with commercially the reason they like                                 cloud well one of the reasons they                                 choose cloud stack is if they need to                                 start working on a feature set somewhere                                 a community of a few hundred people is a                                 lot easier to deal with with the                                 community of                                                           the world's software vendors in it ok so                                 they like that level the fact we have a                                 quite a tightly defined scope and we                                 often say in the project with it from                                 our viewpoint class that works it just                                 works it's a relatively simple techno                                 Lachie okay in fact I have a teacher                                 here that says cloud state well it's in                                 fact we've got a load of t-shirts over                                 there you must take at the end of this                                 talk okay                                 so in terms of it very very flexible                                 platform we're tightly integrated                                 tightly defined scope in terms of your                                 hypervisor will support anything okay                                 in terms of your compute pretty much I                                 sorry your your storage we will pretty                                 much support anything again anything                                 that the hypervisor will supports and                                 secondary storage is slightly more more                                 limited we have two networking models                                 that you can configure on a what we call                                 a per zone environment in in cloud stack                                 advanced networking allows me the full                                 functionality that I just just described                                 there in terms of it it's sitting at                                 layer two creating virtual networking                                 appliances that the user can can then                                 manage we also have a basic networking                                 model which just uses security groups at                                 the hypervisor level similar to Amazon                                 ec                                                                       with multiple combinations of those and                                 then in terms of the services that our                                 networking model provides it's all of                                 this the stuff you would actually expect                                 we've got a set of constructs in cloud                                 stack top level one being a region which                                 is it's not it's a super set up from an                                 Amazon region okay so it's a loosely                                 coupled clout to cloud stack environment                                 so you might have a region which is                                 North America and one that's Europe                                 zones then map normally to a data center                                 but I could have multiple zones on one                                 laptop if if I wanted to within a zone                                 you have a pod and a pod construct is                                 normally a rack so it's some top iraq                                 switching some compute hosts and and                                 some storage in a pod we have a cluster                                 and that's the point at where we define                                 what hypervisor it's going to be and                                 then obviously in clusters we have hosts                                 so you                                 how common is it to have yeah how how                                 common is it to have several clusters in                                 one house I don't think particularly                                 common he looks to call who builds these                                 things every day                                 oh yeah yeah you could have yeah one of                                 each of these if you wanted to or you                                 could have hundreds of them                                 okay in terms of the deployment model of                                 CloudStack so you've got those                                 constructs we're talking about before                                 I've got here a number of pods number of                                 hosts each with their own primary                                 storage primary storages where the                                 hardware that is the hypervisor storage                                 okay so it normally needs to be a                                 reasonable performance level we also                                 have a concept called secondary storage                                 which is where we put our static                                 artifacts snapshots templates those sort                                 of things and that can generally be                                 lower grade storage the key thing from                                 that from this diagram to realize is                                 that cloud stack itself is effectively a                                 thing called a management server whether                                 my sequel database sat underneath it                                 that management server is the control                                 plane what that is doing is sending                                 hypervisor commands it's talking to                                 storage and some organizer some vendors                                 we have some very deep storage                                 integration and it's also creating                                 virtualized networking components okay                                 it sits there as a control plane okay                                 it's not in the critical path of the                                 actual virtual machines the virtualized                                 environments themselves okay which is a                                 key design principle of cloud state we                                 can take all of this out of the picture                                 literally switch off our management                                 server that infrastructure doesn't stop                                 working okay it's just there as an                                 automation can control plane just                                 something that may be of interest we've                                 recently done some integration we have a                                 thing called the clouds that container                                 service classic container service it is                                 basically cloud sack kubernetes                                 integration and it got driven from                                 service providers wanting to do a                                 container as assert or a Cuban ATS as a                                 service offering in their existing                                 virtualized environments and what this                                 is doing is going and spinning up a load                                 of instances bringing down the                                 Kuban eighties images and spinning up or                                 cuban eighties cluster at that level and                                 then allowing pass-through access into                                 the cuban                                                               the title of this talk is building                                 clouds with the patchy clouds that I'm                                 gonna just talk through a couple of                                 recipes first one is almost like my                                 first POC my first cloud stack build if                                 anybody's interested in fact I have a                                 very pretty bit of imagery there so that                                 first recipe so you walk away from this                                 talk you think this is interesting we                                 might be using this might have a look at                                 this in our organization you want to go                                 and play right you want to go and have a                                 have a look at this technology okay so                                 that first recipe is completely ignore                                 any of the stuff I've talked about in                                 terms of the separate management server                                 etc you want quick and easy what you                                 need is a hypervisor house in theory you                                 can do this on one all of this on one                                 host but that will get won't really give                                 you what you want to do a POC you would                                 need a hypervisor host you need some n                                 NFS storage a cloud state management                                 server and a my sequel server go about                                 that first thing is do go to our Docs                                 repository have a look look at the                                 getting started guide at the beginning                                 just so you understand the basic setup                                 and deployment model there's you see                                 some of it on these diagrams here read                                 up on our networking models okay                                 I only need the introduction at this                                 stage yeah do it though because one of                                 the first questions you're going to get                                 asked when you add a zone is what                                 networking model do you want to use and                                 unless you know what those two things                                 mean you're going to get that wrong                                 you'll have a whole load of questions                                 about does tail stack support this does                                 it support this does it support this                                 sort of storage generally the answer is                                 where it depends what the hypervisor                                 supports you know we talked to those                                 hypervisors when it comes to then what                                 they support that's where the the                                 mapping is okay do not try to do this in                                 a existing virtualized environment like                                 a WSU cloud stack is there to talk                                 directly to hi provide you                                 our lab runs with nested virtualization                                 in fact we have cloud stack inside cloud                                 stack in in our lab but that is not an                                 easy thing to do and it will not give                                 you a true representation of what the                                 technology is about so start cloud X I                                 don't think I finished off ok method                                 install my my sequel install cloud stack                                 from one of the repos I'll I'll share                                 with you in a second started services                                 and then followed the GUI yeah so it has                                 a first run GUI which will ask you about                                 adding infrastructure adding house                                 building zones etc which is pretty                                 intuitive ok what you end up with that                                 first build is effectively two hosts one                                 which is your management server that's                                 running your NFS storage and my sequel                                 all on the same box and then some sort                                 of hypervisor ok also a switch that will                                 give you VLAN support if you want to use                                 our advanced networking our layer to                                 isolation model because we need VLANs to                                 be able to do that ok that's normally                                 well it would take paul or me you know                                 an hour to do that if you're new to                                 cloud stack realistically by the time                                 you've done the reading and everything                                 you'll lose a day getting that to a                                 working situation what that will do is                                 let you play with most of the                                 functionality in cloud certain things                                 will be missing now the other thing not                                 to underestimate is learning the                                 features of clouds like for example how                                 its virtual private cloud its VPC                                 mechanism works which one of the                                 networking types we have ok you don't                                 have to build your own environment to do                                 that because as I said there's loads of                                 service providers who are running cloud                                 stack to deliver their services fact we                                 have some of them in there in the room                                 today                                 these are people I can recommending them                                 commercially I'm recommending them                                 because they've their UI which is that                                 that's their own UI that's not the cloud                                 site UI but it's very similar in terms                                 of functionality and they've used the                                 same terminology as cloud stack and you                                 could sit get a trial account with these                                 guys                                 and sit an experiment for example with                                 networking to see how these things were                                 and that is a guessing a node.js based                                 UI which just sits on top of the cloud                                 stack REST API okay                                 so trial account and you can then you                                 let somebody else do the hard work                                 another one EXO scale in Switzerland                                 there their services will run on cloud                                 site there's this slightly more                                 abstracted but again you'll get the same                                 ideas over okay so you've got to where                                 you what you've where you want to go in                                 terms of you've proved the concept                                 you've got it installed you like what                                 you see you now want to start to work up                                 some some further ideas and get towards                                 putting this into some sort of devil or                                 production environment second recipe                                 would be to actually really start to                                 explore how cloud site is going to work                                 in in your environment okay so first                                 thing I do there is put in some more                                 realistic storage I'm going to say more                                 realistic something aligned to what you                                 would end up using in your production                                 environment instead of just NFS sat on                                 one of your two hosts that you've                                 created split that out into primary and                                 secondary storage because you want to                                 see how the performance of those those                                 two types of storage is get into going                                 to affect your environment add at least                                 one more host okay at least one more the                                 reason for that is some of the really                                 clever stuff the cloud stack does is                                 deploy workloads into the correct place                                 it has a very complicated and open                                 deployment algorithm model so in very                                 large environment we want to get virtual                                 machines running in particular places                                 and you may well want to test that and                                 you can't test that if you only got one                                 host very easily and you obviously can't                                 test                                 h:a start to think about pods and                                 clusters maybe start to think about                                 almost artificially putting in a second                                 cluster or a second pod and maybe                                 introduce a second hypervisor and one of                                 the reasons I say that often in an                                 organization the hypervisor choices are                                 made at the beginning that's what we use                                 we are a KVM shop that's what we're                                 going to do                                 we support a subset of all hypervisor                                 functionality but that has to be a core                                 subset okay so you will see some                                 slightly different behaviors across                                 different hypervisors in terms of what                                 we are able to support okay                                 you may want to explore that so you                                 might want to look at how KVM stands up                                 against vmware etc and the other thing                                 with that is that we talked to different                                 hypervisors different ways because the                                 point is clouds like abstracts that you                                 just see an api but with KVM for example                                 we have an agent on the host ok with                                 vmware we don't have an agent we talked                                 to it through vCenter okay so we're                                 using different communication techniques                                 you might want to get comfortable with                                 how that that all hangs together split                                 your environment out into a management                                 farm with ideally multiple multiple my                                 sequel servers master slave and                                 redundant management server this is sort                                 of production style stuff but this is                                 the sort of stuff you want to be                                 experimenting with you want to                                 understand how the management management                                 service failover before you start                                 building your production environment and                                 cloud sites got four different types of                                 network I'm not going to go through all                                 of those now that I'd take a an hour or                                 two on its own but there's four                                 different types of network best                                 practices we split the traffic out okay                                 so public versus its management network                                 because we don't want people to be sat                                 on that same network and with the first                                 recipe you wouldn't you just be lumping                                 it all together start to think about                                 splitting that traffic out so you can                                 see how what what effect that has and                                 you're by the end of that recipe getting                                 towards a very very small production                                 looking environment and that's the stage                                 people are normally getting to by the                                 time they then work up there their                                 production designs for CloudStack I'm                                 not going to take you through a whole                                 design session on designing a production                                 environment I think I got slightly out                                 of date version of my presentation when                                 look at that some picture about                                 restaurant quality                                 which I meant about a picture about                                 restaurant quality okay so the things to                                 then get that to the stage in terms of                                 designing it for production look at your                                 workloads look at what sort of                                 requirements are going to be there for                                 your workloads that has design                                 considerations in terms of the required                                 storage performance the the capacity you                                 need in terms of CPU in terms of memory                                 what's of hosts you need and ultimately                                 how you configure cloud stack to                                 orchestrate all of those okay sometimes                                 it's difficult to think about your                                 workloads because if you're a public                                 cloud provider you have no idea what                                 those workloads are going to be but most                                 organizations can see a pattern around                                 those workloads in terms of their size                                 their operating system the i/o intensity                                 they have that sort of thing okay                                 think about some capacity planning                                 around storage and memory I'll need to                                 think about what version of cloud stack                                 you're going to take out into a                                 production build so you need to look at                                 our release cycle we would always say go                                 with one of their LTS unless you're                                 feeling very very brave because means                                 you're going to have to two years of                                 community action around it choose what                                 networking model you want to use basic                                 or advanced bill get to a management                                 farm management firm nor normally and                                 often sits in a virtualized environment                                 itself but certainly not under the                                 control of cloud set sits in a separate                                 virtualized environment                                 choosing your hypervisor again by                                 looking at your your workloads really                                 think about the network design there's                                 some great pull who's my colleague here                                 is written some brilliant articles on                                 cloud sucks networking model there's a                                 lot in the documentation etc but really                                 think about how those four separate                                 networks are going to sit together                                 choose your scale points so we're                                 talking earlier how you know we designed                                 this thing to think everybody starts                                 building these environments it's going                                 to be massive eventually particularly                                 the public cloud providers because                                 they're there they're going to hype it                                 they all think they're going to hyper                                 scale but nobody wants to build that                                 massive environment from the beginning                                 so you have to design for an environment                                 that is going to scale nicely                                 horizontally but                                 you want to start with a very small                                 actual infrastructure and that's pretty                                 much the same with anybody who's doing                                 this okay so find your scale point are                                 you going to scale the environment by                                 cluster to adding new hypervisor                                 clusters or are you going to scale by a                                 pod design where you're taking the                                  switching and the cluster acceptor and                                  that's what most organizations do so we                                  have a design of a pod that we can just                                  drop in more and more and more pods as                                  the environment grows then some some                                  sort of preparation and planning getting                                  your templates right so all of those                                  templates I was choosing from to build                                  an instance you have to plan what what                                  templates are going to have the service                                  offerings which is the size of the the                                  offerings that people can have disk                                  offerings Klaussner has a very rich                                  tagging model which lets us tag                                  particular house particular storage                                  types anything by giving it a tag so for                                  example I could have a high-performance                                  storage tier and I could tag that as a                                  high-performance storage tier and then I                                  can associate different service                                  offerings different things to say go and                                  use that storage tier okay or particular                                  hosts which are you know very very                                  powerful for high performance computing                                  then the user doesn't have to choose                                  that which just means if we get one of                                  these service offering types one of                                  these requests to build one of these                                  things we go and put it into that sort                                  of environment and we can tag to put                                  things in physical different locations                                  as well okay the other thing that a lot                                  of organizations forget about is cloud                                  stack will has some very detailed usage                                  data how it creates a usage database of                                  everything that everybody has ever                                  consumed in terms of infrastructure so                                  you know virtual machines and storage                                  and network usage etc and most                                  organizations want to then analyze that                                  whether it's for because they're a                                  public cloud provider they want to                                  charge money for it or internal                                  chargeback and there's you know Klauss                                  that basically just gives you a very                                  basic set of data to work with this                                  third party products out there which                                  will which will analyze it for you and                                  present it out through a you are a lot                                  of people just write their own                                  Alyce's tools around that okay so                                  hopefully that's given you an insight in                                  terms of building your first cloud stack                                  environment if you're interested in                                  doing so the steps to take in terms of                                  you know a basic POC evolving that                                  slightly and then some of the design                                  considerations that's a very very brief                                  summary there's a lot out there                                  published a lot more detail than this                                  okay                                  in terms of where to go next                                  there's a link observe shared this this                                  slide that there's a link to our                                  documents Docs clouds that patchy org                                  join our mailing list if you want to do                                  some work with Klaus that I use as                                  mailing list it's a very very friendly                                  place to new users hey I listen to this                                  guy called Giles who said it was all                                  going to be easy and it's not that easy                                  somebody will help you in that mailing                                  list very very friendly to new people                                  and there's lots of events and meetups                                  going on from a European viewpoint                                  there's a LinkedIn group which is                                  effectively the membership database for                                  further for the European guys and                                  website therefore the collaboration                                  conferences as with any other open                                  source projects you know get into the                                  community come and say hello and you'll                                  you'll you'll get some help if you're                                  getting stuck okay there are my contact                                  details if anybody wants to get in touch                                  has anybody got any questions                                  we've got a microphone for the questions                                  oh okay I will have to repeat the                                  question                                  yeah there's there's an active German                                  user group who have had meetups here in                                  Berlin a lot                                  yeah                                  so to repeat that for the recording                                  there's lots of meetups going on in                                  Germany all over the place the the                                  LinkedIn group I think works very well                                  in terms and there is actually also a                                  meetup group as well with exactly the                                  same name for the class a European group                                  have you got your your own but if you                                  give me the link to anything you've got                                  I can put that in the slide so for the                                  benefit of any anybody wants to go and                                  find those any other questions                                  have we built a centaur seven system                                  with KVM yes as I'm looking over to the                                  man who does this for a living                                  yes as in CloudStack on CentOS                                          orchestrating yeah yeah any other                                  questions                                  is there a preference on type of                                  hypervisor yeah yeah in in terms of that                                  my first build recipe would normally be                                  Zen or KVM yeah because we talked to the                                  VMware vCenter so instantly that's going                                  to get a lot more more complicated and                                  it's worth notes                                  just worth noticing you know we support                                  all those different hypervisors                                  different organizations have different                                  interests because they tend to run one                                  hypervisor or another so we almost get                                  this thing within our community we try                                  and police it and make sure we maintain                                  similar support for all the hypervisors                                  but for example our ovm support is not                                  particularly loved because there's only                                  a few people who are really interested                                  in that there's a lot of people                                  interested in our KVM support in our                                  VMware support and it just depends on                                  who is working those different                                  hypervisor                                  areas                                  yeah yeah okay                                  I think we're out of time yeah cool                                  thank you and there are CloudStack                                  t-shirts over there please take one                                  otherwise we'll have to take them back                                  to London with us thank you                                  [Applause]
YouTube URL: https://www.youtube.com/watch?v=4qFFwyK9hos


