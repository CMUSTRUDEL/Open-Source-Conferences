Title: Mixing and Matching - Part 3 - Felipe Besson - Diversifying Autocomplete
Publication date: 2020-07-02
Playlist: Haystack - Joint Virtual Event 2020
Description: 
	More: https://berlinbuzzwords.de/session/mixing-and-matching-diversifying-search-results

Imagine a shopper searches for "coffee". The search results mindlessly repeat brand name, ground coffee over and over. Technically relevant. But not very useful. Not mixed in are results appealing to a different kind of "coffee" searcher:  organic coffee, whole bean, espresso, or related coffee equipment. 

Beyond relevant results is Result Set Diversity: providing not just technically correct answers, but a diverse (though still relevant) view of what's possible in the search system. Showing our grocery searcher that we might, after all, have something they want.

In this panel, we'll discuss Result Set Diversity in search. We'll hear from teams working to summarize for users the diverse array of options available to them given their query. An ideal search experience helps provide next steps, broaden the user's understanding of the content related to keywords, and cover the user's possible, unspoken intent.

Join host Doug Turnbull and search practitioners, Andreas Wagner, Felipe Besson, and Lev Gershenzon, as we hear experiences measuring & solving Results Diversity, with a panel discussion on the Result Search Diversity problem.
Captions: 
	                              I'll be talking about diverse                               I might go issue go through discuss some                               techniques to diversify search results                               well bring them in early stage in the                               ultimate I also be sharing a real-life                               project that I had a chance to work and                               apply those techniques and also be                               sharing some results alive straight talk                               about flex group to the company work we                                are big group like more than                                          classified brains world wild the numbers                                think so by themselves and I work                                particularly in this brand                                OLX which one that brains inside group                                and the online classifieds                                some people calls also adds platform in                                more than                                                           start my my talk I'd like to share about                                like how is the OLX rope discovery cycle                                how do we do it hope user in the                                discovery cycle we start everything some                                a times with a homepage and have a                                search box where you can head out                                complete can pick or not to suggest                                offer up the outcome please go to a                                search page and you have like listings                                with this in our case they are ads if                                you click on an ad to go to our add page                                we have some recommendations of bar of                                the page and all those steps are its                                interactions and then you can use                                doesn't actually push content to the                                user for example in the home feed on the                                home page all those steps are very                                interconnected                                right but users has different things                                it's not a problem problem only for OLX                                but in commerce feature arrow and what                                would break this dialogue with the user                                if it is a conversation that are heavy                                what can break its conversation and                                broad queries can break the out complete                                and search as well explained in his talk                                big which can burn understand bad                                interactions can break recommendations                                and one of the things we believe and we                                will discuss the panels that diverse                                fine search results can                                strength the dialogue with refuser when                                dealing with blood Claire is not                                competent search when you have like a                                shock a showcase you will show your                                items you need for new and Explorer                                users also to guaran capturing more                                information for improved recommendations                                and my talk about a focus on this                                problem of dealing with rod Pettis in                                the autumn plate so that's the agenda                                that's one a big cover it we are going                                to discuss later beats the broad class                                problem in the out complete balanced                                custom techniques to promote                                diversification and this is the core of                                the talk we can say and we are going to                                have support for this use case they                                autocomplete at OLX Europe so let's get                                started                                I think everybody knows on what is the                                not complete type-ahead feature but I                                would like to highlight that I consider                                there are only tattoo to talk directly                                to the user and sometimes is the first                                point of contact the user has of our                                search express and what is important                                because the guide users who good queries                                it help the quite understand through                                quiz list and better it helps this like                                face responsive reaction and if you do                                these three things very well I think you                                help you tackling search relevance early                                early as possible let's see and what is                                the autocomplete                                at how is that completed Oleg's our use                                case that are going to be using to                                explain everything so we suggest popular                                search queries with catechist only we                                kind of have a popularity her recipe                                similar to the one that Peter showing                                his nice talk today with covers we are                                not only suggest the popular points but                                also category filter if someone a user                                pick that that's that category                                suggestion that go to a search page                                trained by that category filter we are                                we also receive more than                                               requests per day so it's a very                                impressive number with over                                             search and the ranks just palpable                                narrowness narrowness here is that                                 have the chance to push for a more                                 precise category we do it sometimes most                                 of the case looks good but we have this                                 traditional but well-known Road query                                 problem right let's say let us think                                 about a Vespa ice puter motorcycle                                 notice her changing and I voted out                                 completely I have this universe of                                 scooters in my mind and what actually                                 what is my intent when it happens what                                 if I have of this power and wants an                                 accessory but I can help it                                 what if I don't know anything about like                                 anything about models am I ready for                                 clicking one of these models another                                 Broadway effect so this is an example                                 the user close and search for Gucci                                 fashion brand it's very common in out                                 complete we receive requests to for                                 brands and if I get all the results that                                 they can return when I go through Alex                                 and type of Gucci                                 I wanna get and I get the categories of                                 those results I'm gonna get this                                 category hierarchy key I have a level                                 one category fashion a level two                                 category with default opt and I have a                                 level three with more specific stuff                                 like sunglasses wallets handbags order                                 bags and accessories ma'am and food were                                 and what if suggested a is like what is                                 inside this box which is very relevant                                 but look at how many things we could                                 have suggested should you consider this                                 both examples we have some breaks in our                                 dialogue with user maybe we jump a to                                 premature conclusions show very specific                                 popular suggestions in case of Vespa                                 models maybe we could have asked more                                 maybe shows more possibilities to to                                 autocomplete like accessories we could                                 like but as the problem may be we never                                 have the chest rest more because you                                 have this popularity feedback loop we                                 suggest things that are popular new                                 content or                                 that are not too popular we don't                                 suggest so these things never get                                 popular right so is the famous rich get                                 richer and diversify Alton pleat we                                 believe that can improve the user                                 experience on those broad queries                                 because with that we can minimize the                                 over over specialization of some                                 suggestions like give an overview of                                 different available item categories                                 break this feedback loop and we find the                                 user query may be showing all user I                                 think that possible will happens refine                                 the query so let's have a bet in mind                                 let's formalize our or Bowl in this                                 experiment it is like a real-life                                 project what I wanted is diversify out                                 complete category suggestions for broad                                 place abroad query is like what level                                 explain something that can explain it I                                 can have me mud or minis multiplications                                 when our case is something that's also                                 popular want you want to expand out                                 completely we want you also a change                                 where is that like the head quality they                                 have interaction did brings traffic to                                 our website and those queries has two                                 content categories many search results                                 we don't want to put a new suggestion                                 with a kettlebell that maybe shows like                                 one percent of the room set and those                                 categories are not yet suggested okay so                                 how to apply diversification I think it                                 is like one of the fifth at disappearing                                 is about my goal here is not like go                                 through this question answer this                                 question only share some with purchase                                 some techniques that they I use it in                                 this user case and inspired from web                                 search information retrieval there was a                                 nice paper from professor sense about                                 this that was talking called explicit                                 diversification in web search it happens                                 when you have a I avoid a query or also                                 know as the information needs and the                                 squares has moto interpretations and you                                 explicit diversify                                 you your voice to increase the coverage                                 cover as many as possible                                 interpretations left mini that we can do                                 this is very good for broad                                 but the next question is how can we                                 measure coverage again it's like not an                                 answer is like a metal polish that I see                                 that's very common why buy based on the                                 blog post isn't research today I                                 followed and the choose Pat methodology                                 before I start very simple but if you                                 clear your documents into topics right                                 tops here can we face these aggregations                                 category scholars who are doing bad news                                 vectors and the moment you do that you                                 have something like on the left here you                                 have the top then you put the top                                 undecided topic I'm assuming here that I                                 don't have overlapping like you want                                 document it locked me to belong so only                                 through one talk but when you do that                                 the moment you have this you can also                                 derive our distribution you when you do                                 they have visit it of like you in this                                 case you are more likely to return your                                 result set a blue topic it in a great                                 opera so the quote the second step is                                 like measure dispersion of the stop                                 distribution because you can have                                 multiple solutions if you have something                                 on the left                                 you know what's return but if you have                                 something more on the right you have a                                 better chance to return like a different                                 talks but how do you if you were in the                                 left or in the right that was tools for                                 doing that like Gini coefficient for                                 example that program he but a dog has a                                 nice heart bodies for e-commerce                                 Shanno entropy which today was very well                                 introduced attorneys they're amazing                                 talk like from yet row and Byron and I                                 wanna only reveal the top Shanno entropy                                 most of you guys know measures the level                                 of information in a probability                                 distribution so we have a distribution                                 random variable distributions here three                                 distributions and let's say that the                                 event is like peak of a sweet fruit from                                 distribution so in this portion way if                                 you randomly pick any any many times you                                 want a fruit from the distribution you                                 always get lettuce                                 that limo is not sweet you have high                                 knowledge about that you never get like                                 a sweet fruit distribution a so you can                                 say that have no super nice but if you                                 go should be you have                                                   picking lemon and                                                  beating orange it's better right and see                                 you have                                                              lemon                                                                sweet strawberry so you can say that in                                 C you have hi hi hi surprised or higher                                 uncertainty and some people as some                                 people say but the question is how to                                 quantify how to put a number on this                                 like suprise and that when aware hello                                 entropy comes to play this is the                                 formula for a mood class channel entropy                                 it's very simple we have this P of Y was                                 the probability of event that will                                 happen for example in C if you do that                                 apply this formula we have like this                                    percent of chance of picking strawberry                                 and then you do the calculation for all                                 the events that happen and I have                                 entropy of                                                           higher this level of uncertainty or                                 diversity in the distribution and how to                                 do that for e-commerce ease this is like                                 exactly what like a a Trotter mission in                                 barroom in there talk about methodology                                 you can have some category probability                                 so as the moment you cross the road of                                 me it's in any criteria here let's                                 assume that the clustering categories                                 you can have a category probability                                 which like basically get all the results                                 that you have in your result set and                                 then you get like how many results falls                                 in in certain category and you have the                                 probit of having that category for                                 example if I both show OLX answers for                                 blues I can have disks I can have cars                                 this like the probability of having each                                 of this category you can you can                                 interpret this as bike while so bullets                                 often return intention and and the                                 intention is that like his video is cars                                 computers and you have entropy but                                 absolute number it makes sense if you                                 compared to our distributions for                                 example like if I search for blue Vespa                                 on hundred twenty twenty five I have a                                 lower entropy it was most likely my                                 intent that when a cover is like a                                 motorcycle return a product a net energy                                 that's a motorcycle or maybe some parts                                 and accessories okay but we can take                                 okhane view entropy from another                                 perspective this example is a straight                                 from this paper is very nice let's                                 assume that now the exercises to have                                 pockets and have letters and have three                                 pockets and you know how to copulate now                                 the entropy off the bucket and let's say                                 that you randomly pick a letter from the                                 bucket and the question is how many                                 questions do any to ask to find out what                                 error is a luxurious exploration here                                 this game akinator I don't know how many                                 of you guys know this game is very nice                                 you think about a character of your life                                 character or not and this Genie is gonna                                 find out we were think about it in I                                 don't know ten questions and he was like                                 the seasons entropy to prune the trees                                 and find out the answer                                 so here the question is simpler is like                                 how many questions you have to ask and                                 Buckett one it's very clear we don't                                 need to ask any questions a zero                                 questions because you can always get a                                 well Alexis let's take a look at pocket                                 three so this is our distribution and                                 you can organize a decision tree as                                 follow to minimize the number of                                 questions you can make make so we can                                 say is a or b and and and it's a you ask                                 more questions be another question the                                 same way for C or D so take a look you                                 have two questions and never wish for                                 here but it letter has like a different                                 probability of happening so if you isn't                                 it to two questions for it later okay                                 multiplied by the probability and you                                 arrive in these two questions this                                 the most diverse like distribution but                                 buckets to still as diverse you can do                                 better than two questions because we                                 have a chance of like returning a so you                                 can even eyes a decision tree based on                                 this effect so we can write already ask                                 is a one question if it's not a you can                                 ask is be okay for picture questions and                                 see you need NCR do need a third                                 question by organizing our decision tree                                 like this and multiply by the                                 probability having it letter we have                                                                                                         that this number of questions exactly                                 the value of the nature P so if we can't                                 repay like this how many effort had to                                 put to know more about than my                                 distribution tray but let's come back to                                 the autocomplete so the question is on                                 average how many questions can you ask                                 to make sure you cover all user intents                                 and that's assume that it's suggesting                                 we give it out complete is a question                                 chemic is like we have a conversation                                 the user is like you'd ruin this or                                 these are bet                                 so it suggestions on a question so if                                 you have a very specific query maybe you                                 don't even have a suggestion to make                                 because it's low entropy like it only to                                 ask the user wants that well four broad                                 ways we can ask any questions but how                                 many is any how can you define those                                 questions only to have a picture and                                 talk about it like is the autocomplete                                 like it suggests a possible query we're                                 going to calculate the entropy or fit                                 category in that suggestions and any if                                 you sum the entropy of each suggestions                                 are going to have the total entropy                                 which measures that they first of all                                 complete with in our example how many                                 different questions can make but how to                                 pick its suggestion that's a challenge                                 let's watch it extreme first to try to                                 understand this and extremely we can                                 have ten different suggestions that have                                 ten slots in this extremely scenario I                                 have each category may be divides like                                 my result set                                 equally uniformly so it's it category                                 does                                 our product has the and it scattered                                 we're a heliport of                                               uniform and then you have a disease                                 rupee                                                              entropy behaves so here in this chart                                 displayed we have on axis axis like the                                 probability of that or each category                                 like and then why we have the entropy                                 right so let's take a look at the                                 stretch hose                                                            this means this means that I have a                                 category and the scatter it covers                                     of my result set maybe to go to the left                                 we don't want to include maybe decently                                 in the autocomplete because it's too few                                 results if you do user pick that                                 suggestions unless is very important but                                 is very important so editor you want to                                 explain the route complete on the other                                 hand something very very very specific                                 verbally can be inserted warning one for                                 one tenth one one category so we are                                 talking about here narrow queries so                                 maybe we don't want this so the key here                                 is to pick something this area it's like                                 when it's a ball                                                     so this is the example booty right so as                                 I had this that three with letters I can                                 have this with my category tree as well                                 here I went on to level two and but it                                 works like this I got like the                                 Washington surely and this covers fixed                                                                                                     query coochie and the entropy is pretty                                 high so if I add this in the Ottoman pit                                 row but I wanna increase the first time                                 I maximize the rest and give more                                 opportunity for users to find out                                    percent of my ability set like on the                                 other hand like notions                                 it's very more probability probably than                                 won't include and                                 talk about implementation with the                                 experiment by plane so the goal is to                                 expand the suggestion for both players                                 so first we've got all the autocomplete                                 suggestions that things that are very                                 suggesting we trigger that query without                                 any filter we've got the result set the                                 entire result set and you calculate the                                 level true category distribution                                 we'll calculate the entropy of each of                                 this category distributions and your                                 measured entropy when was above this                                 threshold we elected this as a new                                 suggestion and you add in the                                 autocomplete if he's not there yet so                                 for example Gucci                                 this was before the in mind that we want                                 to this at least in this experiment we                                 want to keep the query Alice's we want                                 to maximize like if someone searched for                                 good we want suggest categories on booty                                 not we want to minimize the chance of                                 had put would men put bags good for                                 women as if the user want that probably                                 you can he can tap that so by doing this                                 running this pipeline we introduce these                                 new suggestions but the question is like                                 artificially introduced it those                                 suggestions there was the popularity and                                 this in this first iteration we invited                                 apart from the parent so we got the                                 parent to the popularity of fashion and                                 we uses the this popularity for these                                 expansions I couldn't miss the that the                                 opportunity to show the example that all                                 the search tops helped like if the most                                 search for iPhone if our summer search                                 for iPhone today we have only phones and                                 tablets with this we're gonna start                                 suggesting accessories because                                 accessories has a bunch of accessories                                 in our inventory and they cover a lot of                                 the religion so we expanded to                                 accessories as well ok so this is the                                 left part of my top we have like we run                                 this in two countries country one                                 country one and country to and to expand                                 it less than five percent offers or                                 suggesting queries because we only touch                                 this broad queries that didn't have                                 enough power yet but this covers over                                 twenty twenty six percent of total                                 search                                 for the first country and                                              sales for the second country and the                                 experiment was to compare the                                 performance of both groups those that                                 we've had abroad twice those that have                                 expanded against those that we didn't                                 expect and after doing that about some                                 results                                 the fourth metric that I wanted to                                 collect was a metric it to measure to                                 make sure that I was affecting the                                 outcome with behavior I didn't want to                                 maybe throw do something there and then                                 like I want to know if he ever actually                                 pick that suggestion I want you to do                                 something that that nobody picks so the                                 first metric I calculate was the out                                 completed users should suggest search                                 rate which is basically the number the                                 the share of just search across total                                 surgeries total service likes to just                                 search keyword search filtered search                                 and then what is there to share like and                                 I increase the share in the first                                 country by                                                          country was flat this number was it was                                 not significant another metric that I                                 tried as I'm I'm suggesting a search                                 with category filters I want to measure                                 this filter rate so yes I user pick a                                 suggestion and go to the search page and                                 if is not right the filters out right                                 probably the user has to redefine the                                 future and in the in the search page and                                 once you measure this rate like how many                                 was the rate like if you user has refute                                 or less it is better and some of                                 servation diversification back to user                                 behavior not complete as you can see see                                 one users tracking more apparently but                                 it's true users speak less suggestion                                 but better ones because the filter which                                 was better and to try to solve this                                 question also asked some business                                 metrics it's very hard to calculate                                 business metrics for outcome page                                 because that completes the beginning                                 funnel and then I have the search page                                 the filters and then go through the add                                 page in that page a user can send a                                 reply if he like it the that is the                                 conversion rate for OLX and i measure                                 two groups of features like quiet                                 metrics                                 so here I measure the publicity are in                                 the reply rate of that party that                                 explained it doesn't matter if the user                                 B cannot my suggestions suggestion and I                                 water lifting in first country and not                                 at all lift in the second country in                                 flat results for reply rate and I also                                 calculated the performance of those                                 things that I actually spent the                                 category and turns out that I could good                                 results for both in both countries                                 so this says promising is like a                                 research like Putin production database                                 to research phases promised for c                                      c                                                                     suggested I put every place or the the                                 rink is the problem here in both                                 countries new suggests cut a Tangra look                                 relevant at least I I suggest categories                                 that like user interactive engage it and                                 comfort okay to finish my my talk design                                 stage experiment so for the first and                                 simple interaction I want to extend this                                 to effect more countries and McRae's and                                 also an interesting study now the impact                                 in short and long term and also true to                                 that I can maybe consider ranking not                                 the entire result set but top end                                 results explore more cluster dimensions                                 and also define a better entropy and                                 proper thresholds because I had called                                 the entropy and the popularity and then                                 this is like eBay my estimated likely                                 prior but over time and when I get more                                 observations maybe I can refine this and                                 have my complete self                                 diversify fine let's see and that's it                                 thanks guys                                 you
YouTube URL: https://www.youtube.com/watch?v=mAYP1UpCNT4


