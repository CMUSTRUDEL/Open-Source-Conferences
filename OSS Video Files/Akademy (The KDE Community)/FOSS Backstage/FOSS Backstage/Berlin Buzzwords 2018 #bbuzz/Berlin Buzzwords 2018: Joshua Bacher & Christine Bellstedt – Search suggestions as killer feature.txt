Title: Berlin Buzzwords 2018: Joshua Bacher & Christine Bellstedt – Search suggestions as killer feature
Publication date: 2018-06-14
Playlist: Berlin Buzzwords 2018 #bbuzz
Description: 
	Joshua Bacher and Christine Bellstedt talking about "Search Suggestions – the underestimated killer feature of your online shop".

Nearly everybody once faced this situation: you visit an online shopping site, head over to the search box and start typing. Next, you'll get a dropdown list of search suggestions – but many times these suggestions are of poor quality. On the other hand, search suggestions are a helpful feature and add value to the search user experience. In addition, they can also increase your shop performance w.r.t. indicators such as 'add to basket' and 'order value'. But what most people don’t expect: bad suggestions can potentially harm your shop performance. 

We've observed during A/B tests on our top tier e-commerce site that poor search suggestions may have a negative impact on our business performance indicators. Based on this observation we decided to start a project to iteratively improve the quality of our search suggestion engine. 

In this talk, we will share our iterative methodology and our approach to solving the suggestion problem using Elasticsearch, Lucene and machine learning techniques.

Read more:
https://2018.berlinbuzzwords.de/18/session/search-suggestions-underestimated-killer-feature-your-online-shop

About Joshua Bacher:
https://2018.berlinbuzzwords.de/users/joshua-bacher

About Christine Bellstedt:
https://2018.berlinbuzzwords.de/users/christine-bellstedt

Website: https://berlinbuzzwords.de/
Twitter: https://twitter.com/berlinbuzzwords
LinkedIn: https://www.linkedin.com/showcase/berlin-buzzwords/ 
Reddit: https://www.reddit.com/r/berlinbuzzwords/
Captions: 
	                              so welcome guys to a short talk about                               such suggestions the underestimated                               killer feature of your online shop and                               we are Joshua and Christine and Joshua's                               where are you a technical designer with                               Auto and I'm the business designer in                               search and so my first question is who                               of you know auto no that's quite a lot I                               was not sure so I bought some short                                information so autos the second largest                                online retailer in Germany and we were                                in retail business for about                                                                                                                 million visits per day in our online                                shop and like about up to                                              second now you might wonder why I'm                                telling you this so I'm from my business                                perspective this means that there's a                                lot of risk but also lots of potential                                when implementing new stuff so we really                                need approach good methodology when                                implementing new stuff and implement a                                new stuff that's what we did with the                                octo completion and system and I think                                just Josh can tell you why we did it and                                how I did it yeah Thank You Christine hi                                what I really find is mostly hardly                                distracting is if you're on a                                professional company website and you see                                bad implemented core features of this                                website I think most of you know what I                                mean I think if you just imagine you go                                on a website and you just head over to                                the search box and you type something in                                and you see the first suggestions of the                                autocomplete and you just seek oh crap                                whoever face this ends up I think most                                of us I would say everyone faced it I                                think the other one that's maybe                                snoozing nah no just joking okay                                yeah it's distracting it's like opening                                and parantesis and never ending it it's                                make me crying makes me crying in the                                night yeah                                so why I'm telling you all that all that                                we decided to use go to change our                                search the system that we used before                                was search party implemented solution                                that we used for years and this is a                                decision to change the search system                                unless also involved that we had to                                reimplemented suggestion and while doing                                that we just covered some wheel yeah                                interesting things that we want to share                                with you why did we change or that why                                did we choose to change this is why I                                just put those three words on the                                webpage on the slide we decided to                                change the search system because we said                                if the core feature if there is a                                feature on our webpage that is core then                                we will build it ourselves                                yeah and four problems Christine will                                now talk more about why and how maybe                                yeah okay so we started into                                implementing our new auto computing                                system                                and we did our first step we went online                                we launched it and we said oh wow some                                suggestions really performed quite well                                others really really didn't so um we                                said okay we have to find out what's the                                problem and and we did like an                                assessment of potential so this was our                                approach we tried to find out what was                                the difference between the high and low                                performing suggestions we try to                                categorize so to find out which which of                                the differences have the biggest effect                                on the performance the business                                performance of our suggestions and to                                find out how big is the potential if we                                change those differences differences                                yeah what can we do with the suggests so                                um what we did is we found out that some                                suggestions just seemed absolutely wrong                                to us so we didn't understand why we                                would suggest anything like that and                                some others were just similar to others                                I think probably every one of you has                                has seen that also before and we found                                out that the suggestion the position of                                the suggestion has an effect on how                                often it is used I think we are all                                familiar with that effect and also one                                thing we found out while analyzing the                                data was that the relevance of a                                suggestion changes quite frequently so                                if a suggestion is relevant today it                                 doesn't mean it's relevant tomorrow for                                 us so what we did basically is analyzing                                 analyzing analyzing analyzing analyzing                                 our data and going through trying to                                 find out those differences and trying to                                 find out how they're using interacting                                 with that so the next step was we set a                                 new goal for us so we said okay based on                                 those differences or these these                                 observations we made our new goal is to                                 set up an automated mechanism for really                                 good forming frequently and contain                                 delivered suggestions but we also said                                 as I told you before from business                                 perspective there's kind of a lot of                                 risk and also lots of potential with the                                 the you traffic we've got on auto and we                                 said okay we have to do it like                                 iteratively we have to discover and                                 implement fitting solutions for each                                 thing or difference we found out we have                                 to test the new version of the search                                 suggests against the the old version so                                 we can find out was there really the                                 potential we assumed to be there so and                                 so on and after that again observing new                                 potentials and increase our potential                                 and the relevance of our suggestions                                 based on the experiment and now just                                 we'll give you a short overview on the                                 implementations we did yeah okay as we                                 learned from Christine thank you from                                 there for that Christine we saw that                                 there are some really bad suggestions                                 that were just wrong spelled and what                                 you can do about wrong spell spelling in                                 in such words is you can use the                                 dictionary dictionary I think everybody                                 is yeah it's not a big magic to do so                                 but where can you go get get the                                 dictionary from that was the first thing                                 that we tried to solve and I think it's                                 quite obvious but I just mentioned it we                                 just took our product data the product                                 data has all words in there that we need                                 to use maybe there are some missing                                 probably synonyms or something like that                                 but I don't think that we want to                                 suggest synonyms but normal search                                 phrases well yes so this is our base                                 this is our dictionary we are taking                                 just everything that is a product data                                 and use it in our suggestions in                                 delivering or calculating the                                 suggestions we need we want to                                 delivered by the out completion tone yes                                 and what is the other point of truce                                 that we use we just saw okay we don't                                 need only we don't just need the                                 suggestions or the words in the                                 dictionaries but we also need some                                 information about how frequent users                                 tried to search for that word so the                                 next quite obvious source to look in was                                 the click stream the click stream is                                 it's a mechanism that we use and it just                                 made some name dropping there Kafka and                                 spark we just track every movement of                                 the user and write it to a database                                 database it's not a database it's Kafka                                 in a stream we aggregate the data there                                 and we are able after that to use it for                                 calculations for example to calculate                                 the search frequencies and we use this                                 information together with was the                                 product data that we have so you see                                 something like we have search that was                                 executed by a certified by a user he was                                 searching for trousers and we also see                                 that this search was an exit sect hit in                                 our product data so we are carrying our                                 zola do a search engine it's based on                                 Zula and we see if it's an exact match                                 of it somehow fuzzy or something like                                 that and we write it out to the kick                                 stream and that's the source where we                                 can read from afterwards and decide okay                                 is this something that is an exit or not                                 and then we can use this information and                                 deliver spell correct results with a                                 frequency I think it's easy right got it                                 cool                                 okay the next little trick that we had                                 to solve is removal of public eighths                                 just imagine you have something like one                                 user searches for trousers girls and the                                 next one for girls trousers and the next                                 one for girl trousers the seed point so                                 you're just having some slight                                 differences in what does what user is                                 searching but you want to somehow ensure                                 that your search suggest is not spammed                                 by all those very close suggestions and                                 this is why we just had to spend another                                 thought on that problem how to solve                                 that and this is why how we solved it                                 you see on the right side is what I                                 mentioned you have suggestions that are                                 quite equal but they are not and we                                 implemented some something that we call                                 fingerprinting to be more technical it's                                 something like equal equivalence                                 relation so you are trying to find a                                 signature to match your queries against                                 and group them by that so what we did is                                 if we have this example Charles of girls                                 we just I don't don't know how how many                                 people ever used to see okay so the                                 scene has some standard mechanisms to                                 work on we're concerned and so our words                                 or something like that on text better                                 and those standard mechanisms can be                                 used to process text and that is what we                                 what we have done here we used something                                 that is called analyzers and then in an                                 analyzer pipeline which is quite easy to                                 do and which doesn't need much                                 professional insight about it it was                                 cool it was easy and yeah the result was                                 quite intimidating for us so the first                                 thing what this analyze the pipeline is                                 doing it just tokenized us the sentence                                 in in the words we are doing on the                                 words on the tokens we just make it                                 lower case we extract stop words from                                 that after that we do some stemming                                 stemming is a standard procedure on the                                 scene where you try to match words                                 against their I don't know how to                                 describe this perfectly it's just                                 procedure stemming maybe I can talk                                 about it later a bit more or yeah                                 whatever after that after the stabbing                                 part where you have have you'd use it to                                 the base                                 you just sort it and you could get this                                 fingerprint that is that is up there you                                 take the first letter of the of the                                 afterwards for the sorting and you get                                 something like arouser                                 and if you apply this on the list on the                                 right side you are able to find all                                 similar words suggestions and in the end                                 are able to filter them out whoops this                                 is the wrong slide right and this is                                 somehow how this would be visualized in                                 elasticsearch index so we've used                                 elasticsearch in the backend to store                                 all this information and to query also                                 for the suggestions that we deliver in                                 the front end and you see here you have                                 all those different spellings in one                                 group and only one of those will be                                 delivered in the front end and it is the                                 one was the most frequent or always the                                 highest number over there so we can                                 delete or we just get rid of all those                                 unimportant wrong spellings and are able                                 to just deliver better results in this                                 list of suggestions yes the next thing                                 is delivering frequent suggestions you                                 want to deliver all the suggestions that                                 you want to deliver relevant suggestions                                 that it was that that was was Christine                                 was talking about                                 what we are doing there is or what what                                 mentioned is by that is that you don't                                 want to give suggestions that do not                                 have any results so just think you don't                                 have any products for treasure for                                 travel those girls so why give the user                                 a suggestion for that it would just lead                                 to something where he sings oh what the                                  is going on yeah well and that's                                 the reason why we just take another look                                 in a click stream where we also track we                                 are where we are also tracking the                                 number of results that we get and by                                 that just filtering out where we have                                 zero results we are able to filter out                                 out all the irrelevant spellings which                                 leads to whoops to the fact that we get                                 more relevant suggestions in this list                                 yes so this was the first iteration                                 where we were able to get some really                                 good results but in the end we decided                                 to not stop there because we said we can                                 do better and why I will tell you                                 Christine yeah so um maybe some of you                                 heard the talk of the deal yesterday                                 about query understanding so I mean                                 there was one thing he said and I think                                 that's quite important and that's what                                 we did right here is you have to decide                                 for yourself what is relevance in your                                 perspective so we try to define what                                 what is business relevance for us and so                                 the next step the next iteration we did                                 after implementing spell correction                                 removing of duplicate and so on which                                 was quite good but we thought there's                                 still lots of potential and we took the                                 next step and we started using key                                 performance indicators like a Tabasco                                 order value or click through a to detail                                 view so not just using a search                                 frequency and well yes just explained                                 for sorting and suggestions but also                                 combining those KPIs to make sure it's                                 really business relevance we                                 looking for so what we basically did is                                 we built something like suggestion                                 scorer which is just a scoring model and                                 using those KPIs and with different                                 weights and combining them and this was                                 a really really big step for us because                                 we had to move on                                 using that clickstream Josh was telling                                 about maybe you can give to some                                 implementation details so basically what                                 we did there was if you have to click                                 stream we are also writing data entry in                                 a tracking tracking stream that we have                                 about all the values and about so you                                 can track did the user order something                                 while searching afterwards for that and                                 was it somehow connected to the search                                 so this the autovalue the other way is                                 to click through rate did the user click                                 through the products of the search this                                 is important information for us and what                                 you can do then is after you have those                                 informations you can just take them put                                 them together in a formula so                                 click-through rate plus search frequency                                 plus order value and then calculate                                 somehow what is important what is not                                 and since you want to somehow influence                                 how important this information should be                                 in the result                                 you also take weights in there I think                                 this is standard procedure everyone                                 knows that so you have click-through                                 rate times a plus or a value times B                                 plus search frequency hopefully I get a                                 right time see I I think this is quite                                 clear it's this fine for you so um after                                 the first iteration when we did a spell                                 correction removing up duplicates we had                                 quite good results but when we did that                                 we had like really really really good                                 from a business perspective so what I                                 can tell you today is that really works                                 just fine                                 but we believe that there's even more                                 potential so the test results were that                                 the features we implemented with that                                 scoring model for scoring those                                 suggestions are absolutely worth it so                                 we have really good uplift in revenues                                 and also we believe that there's even                                 more potential if we tune the parameters                                 we use in the scoring model so right now                                 we also did some some more iterations on                                 tuning of those parameters and there's                                 still some way to go so I still believe                                 that there's lots of potential there and                                 the third point I think that's also                                 important for us or also from business                                 perspective is the idea and the method                                 we can use it for other use cases for                                 example we used it for ranking of our                                 facets right now and it's working as                                 well really really really good yeah                                 that's it maybe just some words to a                                 future prospect well there are some                                 things that we can do for now to improve                                 this also again and again so yesterday                                 we had to talk about personalization I                                 personally liked it and I think we could                                 also apply and some personalization                                 features here so maybe just try to                                 deliver only the suggestions that are                                 relevant for users in this in this                                 specific scope the other one would be to                                 just genera phi the weighting of the the                                 business kpi's did we have and try to                                 use something that is more yeah self                                 learning which is two options that we                                 could do but I don't think that we have                                 any plan yet because it looks like that                                 we are really good and improvement would                                 be not that order expectation is not                                 that good for that                                 so one final word for me I think there                                 there is no any proof if this is the                                 best solution of a now to completion                                 route and I won't won't say that this is                                 the best what you can do but what I can                                 promise is if you just try to apply the                                 simple first iteration steps on your                                 suggestions you will indeed improve your                                 search by Terps it will really be great                                 and I think you will be much much                                 satisfied by that and you use this also                                 okay so thank you                                 if any questions about that                                 yeah will you want questions we are                                 running out of time thank you very                                 interesting talk if I use facets on the                                 side and have used it already you have                                 some filters set yeah will you filter                                 your auto suggestions by the filters I                                 have set like I'm looking for man's suit                                 will I still get the girls drawers us no                                 we don't right now because what we know                                 about user users at ATO is they might                                 change the thing they are looking for in                                 one session so if you've been looking                                 for                                 trousers before it could be that they're                                 like looking for washing machine after                                 that so if we filter it we don't give                                 them the option to find it so no thank                                 you                                 okay the last you said that as source                                 for this autocomplete you'd used your                                 product data it looks for me that you                                 have phrases already clear like women's                                 back or what it was so how did you                                 identify phrases for this autocomplete                                 well you don't you don't really detect                                 phrases but your phrases also tokenized                                 and it is sir only against the search                                 engine so the search engine is                                 tokenizing your phrases into tokens and                                 the searching searching the index and at                                 this point you are deciding whether this                                 is an exit or in fuzzy search a result I                                 think no you're proposing phrases in the                                 autocomplete so where do they come from                                 that that you propose faces and not only                                 single words those come from the                                 clickstream we're using so this is what                                 user what users have been searching                                 before and we use that data are out of                                 the click stream so you remember that                                 fingerprinting step so we've got all the                                 search                                 yeah queries our user typed in and we                                 just take one of them to suggest yeah                                 okay thank you                                 [Applause]
YouTube URL: https://www.youtube.com/watch?v=JkJErvrzAu0


