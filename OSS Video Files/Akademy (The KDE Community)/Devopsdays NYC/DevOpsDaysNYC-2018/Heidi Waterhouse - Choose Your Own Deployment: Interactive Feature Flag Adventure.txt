Title: Heidi Waterhouse - Choose Your Own Deployment: Interactive Feature Flag Adventure
Publication date: 2018-02-01
Playlist: DevOpsDaysNYC-2018
Description: 
	Welcome, bold adventurer! Are you ready to work with me to explore the multiple paths of deployment, activation, and feature flags? The audience drives the talk by choosing different deployment and activation options in real time and we’ll see how the story ends.

We’ll use this format to explore how feature flags can work with CI/CD or other rapid deployment models, and how we can work to make deployments safer and faster incrementally.

Audiences will get a fun, fast-paced exploration of forking deployments. They’ll walk away with an understanding of how to reduce the risk of major changes, how to follow multiple streams of deployment, and how to evaluate the best way to speed deployment in their environments.

This really is a dynamic, audience driven presentation. They’ll select branching options, and I’ll create the talk on the fly based on pre-determined options. As such, it’s going to be hard to show you the outline. Topics I intend to cover include feature flags, scaled deployments, and kill switches.

https://www.devopsdays.org/events/2018-new-york-city/program/heidi-waterhouse/
Captions: 
	00:00:00,000 --> 00:00:21,869
I wrote this game in twine because I

00:00:20,130 --> 00:00:23,580
want you to have a little

00:00:21,869 --> 00:00:26,789
self-determination about how this talk

00:00:23,580 --> 00:00:28,590
goes so what we're gonna do is you are

00:00:26,789 --> 00:00:31,109
actually going to choose the adventure

00:00:28,590 --> 00:00:33,600
my name is Heidi Waterhouse I'm here

00:00:31,109 --> 00:00:35,760
from launch darkly we do feature flags

00:00:33,600 --> 00:00:38,160
as a service and the more I think about

00:00:35,760 --> 00:00:39,450
feature flags the bigger they get it's

00:00:38,160 --> 00:00:43,440
so exciting

00:00:39,450 --> 00:00:45,270
so I want to give you a chance to learn

00:00:43,440 --> 00:00:46,320
about it I'm going to show you how this

00:00:45,270 --> 00:00:50,940
works so we're going to start with

00:00:46,320 --> 00:00:53,640
launch time so this is toggle in space

00:00:50,940 --> 00:00:56,219
there is no orientation toggle is our

00:00:53,640 --> 00:00:58,199
non binary space Explorer and I love

00:00:56,219 --> 00:01:01,410
them and we're gonna pack everything

00:00:58,199 --> 00:01:08,070
that toggle needs for a trip so here we

00:01:01,410 --> 00:01:09,860
need some rocket fuel I want to make

00:01:08,070 --> 00:01:12,420
sure you don't get that going too early

00:01:09,860 --> 00:01:14,880
it's very time-sensitive this is not

00:01:12,420 --> 00:01:17,340
much different than you know the rocket

00:01:14,880 --> 00:01:19,490
fuel that we actually use except Mentos

00:01:17,340 --> 00:01:24,000
won't kill you

00:01:19,490 --> 00:01:27,000
so toggles job is to fly through space

00:01:24,000 --> 00:01:30,210
and put markers on planets so that the

00:01:27,000 --> 00:01:31,979
space Lane space liner is nowhere to go

00:01:30,210 --> 00:01:34,200
because it turns out there are a lot of

00:01:31,979 --> 00:01:35,970
different ways to get through space and

00:01:34,200 --> 00:01:38,610
you want to find the most efficient way

00:01:35,970 --> 00:01:40,470
or the most scenic way or the way that

00:01:38,610 --> 00:01:42,960
makes the most sense for your needs

00:01:40,470 --> 00:01:45,000
so toggles going to go through and Mark

00:01:42,960 --> 00:01:48,030
all of these planets and then the home

00:01:45,000 --> 00:01:52,829
office is going to use these markers to

00:01:48,030 --> 00:01:59,280
guide the space miners and because I'm a

00:01:52,829 --> 00:02:02,610
giant nerd these are heliographs all

00:01:59,280 --> 00:02:04,140
right toggle has an amazing crew but

00:02:02,610 --> 00:02:06,899
they have their support system back home

00:02:04,140 --> 00:02:07,510
and I want you to think about how it is

00:02:06,899 --> 00:02:09,970
you

00:02:07,510 --> 00:02:11,710
can use feature flags to support both

00:02:09,970 --> 00:02:14,320
your users and the people who are making

00:02:11,710 --> 00:02:15,990
things happen and then here's the one

00:02:14,320 --> 00:02:18,400
you really want to take picture of I

00:02:15,990 --> 00:02:21,250
have a team that makes navigating

00:02:18,400 --> 00:02:23,140
deployments safer and easier and if you

00:02:21,250 --> 00:02:25,540
would like to ask some questions or get

00:02:23,140 --> 00:02:28,720
a free t-shirt you can go to this URL

00:02:25,540 --> 00:02:34,390
and we will send you a t-shirt and some

00:02:28,720 --> 00:02:38,460
stickers all right so what do we want

00:02:34,390 --> 00:02:44,860
team adventure choices or case study

00:02:38,460 --> 00:02:48,730
adventure okay so oh I know I had way

00:02:44,860 --> 00:02:50,670
too much fun with this so what do you

00:02:48,730 --> 00:02:55,810
want to want to go do first

00:02:50,670 --> 00:03:02,400
oops there we go it's it's like ops but

00:02:55,810 --> 00:03:09,520
with sadness all right what do you think

00:03:02,400 --> 00:03:11,860
Killswitch all right so something has

00:03:09,520 --> 00:03:13,870
gone wrong with that that feature you

00:03:11,860 --> 00:03:17,470
just pushed to production it is causing

00:03:13,870 --> 00:03:19,270
some kind of cascade failure it is going

00:03:17,470 --> 00:03:21,940
sideways in a way that's taking down

00:03:19,270 --> 00:03:23,709
servers as if they were dominoes I would

00:03:21,940 --> 00:03:26,500
like to turn that off how fast can you

00:03:23,709 --> 00:03:28,510
turn something off in production two

00:03:26,500 --> 00:03:28,989
hours two hours oh my god that's

00:03:28,510 --> 00:03:31,320
terrible

00:03:28,989 --> 00:03:31,320
oh wait

00:03:32,070 --> 00:03:39,310
about 200 milliseconds if you have it

00:03:36,850 --> 00:03:40,810
wrapped in a feature toggle all you have

00:03:39,310 --> 00:03:43,690
to do is turn it off you're not

00:03:40,810 --> 00:03:45,460
redeploying you're not sending out new

00:03:43,690 --> 00:03:49,300
code you're just sending out an

00:03:45,460 --> 00:03:52,390
instruction that says yo shit's broken

00:03:49,300 --> 00:03:54,520
let's stop and if you have it

00:03:52,390 --> 00:03:56,890
distributed out on your edge it can be

00:03:54,520 --> 00:03:59,970
really really fast so that's pretty

00:03:56,890 --> 00:03:59,970
awesome what are we going to do next

00:04:00,810 --> 00:04:08,290
back to UPS or definitely the albatross

00:04:05,470 --> 00:04:10,660
okay so albatross launches are the

00:04:08,290 --> 00:04:12,280
opposite of a canary launch lots of you

00:04:10,660 --> 00:04:14,140
know about canary and launches where

00:04:12,280 --> 00:04:16,630
you're like I'm gonna try this new

00:04:14,140 --> 00:04:19,660
feature with like 5% of my people to

00:04:16,630 --> 00:04:21,640
make sure it doesn't go sideways so you

00:04:19,660 --> 00:04:25,180
ever have that client where they're like

00:04:21,640 --> 00:04:27,360
I'm never leaving Java for and you're

00:04:25,180 --> 00:04:27,360
like

00:04:28,100 --> 00:04:34,139
you know what century this is right and

00:04:31,860 --> 00:04:36,150
they're like no it's a deal breaker if

00:04:34,139 --> 00:04:41,040
it is mission-critical

00:04:36,150 --> 00:04:42,930
it runs the you know janky mainframe in

00:04:41,040 --> 00:04:45,570
the basement that is the core of our

00:04:42,930 --> 00:04:47,669
entire business so we're never leaving

00:04:45,570 --> 00:04:50,250
Java for your like but I want to upgrade

00:04:47,669 --> 00:04:52,949
everybody else and I can't keep you back

00:04:50,250 --> 00:04:55,470
here if I'm up here with them so what

00:04:52,949 --> 00:04:57,570
you do is you wrap their stuff in a flag

00:04:55,470 --> 00:04:59,910
and deliver it only to them nobody else

00:04:57,570 --> 00:05:02,880
gets to see that you have Java for but

00:04:59,910 --> 00:05:04,770
if they are paying you enough money you

00:05:02,880 --> 00:05:07,530
can have an albatross launch and drag

00:05:04,770 --> 00:05:11,700
them along behind you for as long as

00:05:07,530 --> 00:05:18,870
they make it worthwhile all right

00:05:11,700 --> 00:05:20,610
but next about deployment deployment is

00:05:18,870 --> 00:05:23,340
not the same thing as activation let me

00:05:20,610 --> 00:05:25,979
just say this when you deploy code you

00:05:23,340 --> 00:05:27,830
are pushing it out right we all agree

00:05:25,979 --> 00:05:30,660
that that's pretty much what's happening

00:05:27,830 --> 00:05:33,060
it's not the same as activation it's not

00:05:30,660 --> 00:05:36,180
the same as turning it off you ever have

00:05:33,060 --> 00:05:40,380
that thing where you get a box shipped

00:05:36,180 --> 00:05:41,940
to you and you don't know exactly what's

00:05:40,380 --> 00:05:44,760
in it I mean Amazon has told you what's

00:05:41,940 --> 00:05:47,280
in it but you don't know until you open

00:05:44,760 --> 00:05:49,349
it what's in it that's what we're doing

00:05:47,280 --> 00:05:51,120
we're saying here's your box are you

00:05:49,349 --> 00:05:53,849
interested in what's in it do you want

00:05:51,120 --> 00:05:56,310
to open it up and activate it so as

00:05:53,849 --> 00:05:58,620
people who are serving software we can

00:05:56,310 --> 00:06:01,590
push everything out that doesn't mean we

00:05:58,620 --> 00:06:05,690
have to show people everything what's

00:06:01,590 --> 00:06:11,099
not all right anything here you want

00:06:05,690 --> 00:06:14,130
testing so dog food is for developers

00:06:11,099 --> 00:06:16,110
right but there comes a time when you

00:06:14,130 --> 00:06:18,660
want to test something internally with

00:06:16,110 --> 00:06:21,810
people who are not developers but still

00:06:18,660 --> 00:06:25,139
are not customers that that middle state

00:06:21,810 --> 00:06:26,760
of humans so we say why don't you just

00:06:25,139 --> 00:06:29,190
turn this on for people inside the

00:06:26,760 --> 00:06:31,200
company you have a new feature you're

00:06:29,190 --> 00:06:32,639
excited about getting it out but you

00:06:31,200 --> 00:06:36,479
only want to turn it on for people who

00:06:32,639 --> 00:06:38,880
are going to not fire you if it turns

00:06:36,479 --> 00:06:40,320
out to be terrible so in addition to dog

00:06:38,880 --> 00:06:41,000
food which lots of people can do by

00:06:40,320 --> 00:06:42,800
running their own

00:06:41,000 --> 00:06:44,510
sort of internal under their desk

00:06:42,800 --> 00:06:48,920
servers I mean we don't do that anymore

00:06:44,510 --> 00:06:50,450
we have AWS now but emotionally they are

00:06:48,920 --> 00:06:53,210
the server that sits under our desk and

00:06:50,450 --> 00:06:55,250
keeps our feet warm instead of that

00:06:53,210 --> 00:06:59,420
let's just serve to everybody inside our

00:06:55,250 --> 00:07:00,340
company that it'd be exciting right all

00:06:59,420 --> 00:07:05,030
right

00:07:00,340 --> 00:07:07,220
where we going dog food all right so we

00:07:05,030 --> 00:07:08,840
just talked about internal testing now

00:07:07,220 --> 00:07:10,520
we're gonna show my picture is missing

00:07:08,840 --> 00:07:13,310
we're going to talk about dog food dog

00:07:10,520 --> 00:07:14,990
food is like I said that thing that you

00:07:13,310 --> 00:07:17,990
want to be able to test yourself you

00:07:14,990 --> 00:07:20,570
build something but you can only test it

00:07:17,990 --> 00:07:24,169
in production because so many of us are

00:07:20,570 --> 00:07:26,600
working at scales and complexity levels

00:07:24,169 --> 00:07:29,900
that cannot be replicated by our

00:07:26,600 --> 00:07:32,620
internal system we're talking dozens of

00:07:29,900 --> 00:07:36,740
micro services and hobbes and and

00:07:32,620 --> 00:07:38,870
message volume that we can't do any

00:07:36,740 --> 00:07:41,390
testing on other than in production but

00:07:38,870 --> 00:07:43,250
we don't want production users to see it

00:07:41,390 --> 00:07:45,590
god forbid so what you want to be able

00:07:43,250 --> 00:07:48,200
to do is put something on production and

00:07:45,590 --> 00:07:50,390
then only show it to yourself that would

00:07:48,200 --> 00:07:52,250
be the best solution so wrap it in a

00:07:50,390 --> 00:07:54,380
feature flag and then point it just

00:07:52,250 --> 00:07:56,600
internally or just you you can literally

00:07:54,380 --> 00:07:58,880
use feature flags to test something just

00:07:56,600 --> 00:08:06,380
on yourself but it's still testing in

00:07:58,880 --> 00:08:12,560
production what do you think merging so

00:08:06,380 --> 00:08:15,860
a lot of us came up in a branch based

00:08:12,560 --> 00:08:18,040
world and the way this works is I'm

00:08:15,860 --> 00:08:21,020
going to explain as if I knew this is

00:08:18,040 --> 00:08:24,110
you check out something you're gonna

00:08:21,020 --> 00:08:26,180
make a feature and you work on it for a

00:08:24,110 --> 00:08:28,430
little while and theoretically a little

00:08:26,180 --> 00:08:30,890
while it's like a few hours to a day and

00:08:28,430 --> 00:08:33,140
in effect a little while can be as much

00:08:30,890 --> 00:08:35,330
as like three weeks and then you go to

00:08:33,140 --> 00:08:37,130
put it back in the main and it turns out

00:08:35,330 --> 00:08:41,510
your buddy has also been working on that

00:08:37,130 --> 00:08:43,789
same section of code and and there's a

00:08:41,510 --> 00:08:45,290
problem wherein you have both made

00:08:43,789 --> 00:08:47,150
changes to the same place without

00:08:45,290 --> 00:08:49,550
knowing the other person was working in

00:08:47,150 --> 00:08:52,250
it changes may be compatible the changes

00:08:49,550 --> 00:08:52,740
may not be compatible but you're going

00:08:52,250 --> 00:08:54,899
to have

00:08:52,740 --> 00:08:56,940
have that discussion that moment where

00:08:54,899 --> 00:09:01,470
you're like well let's cherry-pick these

00:08:56,940 --> 00:09:03,450
let's let's squat it I have a lot of get

00:09:01,470 --> 00:09:05,910
trauma I keep saying that my career

00:09:03,450 --> 00:09:09,690
after this is going to be mental health

00:09:05,910 --> 00:09:11,370
therapist specializing in get and I

00:09:09,690 --> 00:09:11,730
think I will make money at it I'm just

00:09:11,370 --> 00:09:13,770
saying

00:09:11,730 --> 00:09:15,390
so anyway here you have this terrible

00:09:13,770 --> 00:09:18,360
merge problem where you have all of this

00:09:15,390 --> 00:09:20,550
stuff that you have to reunite and it's

00:09:18,360 --> 00:09:23,000
it's problematic because you don't know

00:09:20,550 --> 00:09:27,779
what the other person is doing or why

00:09:23,000 --> 00:09:32,370
all right so that's let's go look at

00:09:27,779 --> 00:09:35,820
adventure choices again but a well user

00:09:32,370 --> 00:09:37,700
fun users are great users experience our

00:09:35,820 --> 00:09:41,490
software in a lot of ways that we don't

00:09:37,700 --> 00:09:43,500
so whatever users goal is we want to

00:09:41,490 --> 00:09:46,260
make sure they get it because I keep

00:09:43,500 --> 00:09:48,270
saying this nobody wants to be using

00:09:46,260 --> 00:09:50,880
software they want to catch a Pokemon

00:09:48,270 --> 00:09:52,709
and want to find an ATM they want to

00:09:50,880 --> 00:09:55,260
continue getting paid so they can live

00:09:52,709 --> 00:09:56,880
indoors and eat food but nobody says to

00:09:55,260 --> 00:10:00,660
themselves you know what I'd like to do

00:09:56,880 --> 00:10:03,149
I'd like to use some software today it's

00:10:00,660 --> 00:10:06,540
just not a thing so we have to remember

00:10:03,149 --> 00:10:08,640
that users are not here to enjoy our

00:10:06,540 --> 00:10:11,850
tool they're here to get something done

00:10:08,640 --> 00:10:14,180
so we need to give them whatever it is

00:10:11,850 --> 00:10:21,720
they're looking for so pick one

00:10:14,180 --> 00:10:26,130
accessibility so this is a react menu

00:10:21,720 --> 00:10:28,440
and it's great if your fingers are sort

00:10:26,130 --> 00:10:31,620
of normal human finger sized and you're

00:10:28,440 --> 00:10:33,570
touching something it is less great if

00:10:31,620 --> 00:10:36,540
you're trying to use tab control or

00:10:33,570 --> 00:10:39,990
voice control it turns out that

00:10:36,540 --> 00:10:42,600
accessibility isn't like one Universal

00:10:39,990 --> 00:10:43,649
thing we'd like to be we'd like it to be

00:10:42,600 --> 00:10:46,709
possible to do

00:10:43,649 --> 00:10:49,680
Universal Design Universal Design is a

00:10:46,709 --> 00:10:51,870
beautiful dream it is a goal but it

00:10:49,680 --> 00:10:54,149
turns out that different people have

00:10:51,870 --> 00:10:57,570
different disabilities and therefore

00:10:54,149 --> 00:11:01,020
needs different accessibility so I want

00:10:57,570 --> 00:11:03,810
us to be able to design software that

00:11:01,020 --> 00:11:06,110
lets us give people the accessibility

00:11:03,810 --> 00:11:08,649
they need some people have visual

00:11:06,110 --> 00:11:12,350
parents and needs screen readers for and

00:11:08,649 --> 00:11:14,480
some people have audio impairments and

00:11:12,350 --> 00:11:16,640
need to never have something talk to

00:11:14,480 --> 00:11:20,810
them as an essential part of interaction

00:11:16,640 --> 00:11:24,019
so when if we could say here are all our

00:11:20,810 --> 00:11:27,350
accessibility options pick the ones that

00:11:24,019 --> 00:11:29,870
you need because we are all only

00:11:27,350 --> 00:11:31,760
temporarily able-bodied we're all

00:11:29,870 --> 00:11:34,060
sitting here and maybe we have some

00:11:31,760 --> 00:11:36,910
adaptive devices but I tell you

00:11:34,060 --> 00:11:38,720
disability is coming for us all I

00:11:36,910 --> 00:11:40,339
started thinking about this when I

00:11:38,720 --> 00:11:44,089
finally got to the reading glasses stage

00:11:40,339 --> 00:11:46,399
I'm like what what it turns out I am NOT

00:11:44,089 --> 00:11:50,149
a magical human who will forever remain

00:11:46,399 --> 00:11:52,730
25 and in the prime of my life no no

00:11:50,149 --> 00:11:55,130
we're still doing pretty well but there

00:11:52,730 --> 00:11:57,560
are people who have trouble and they are

00:11:55,130 --> 00:11:58,760
sitting with us and next to us and we

00:11:57,560 --> 00:12:03,740
need to be thinking about how to make

00:11:58,760 --> 00:12:07,300
accessibility not just a rote thing but

00:12:03,740 --> 00:12:11,990
a choice all right what do we want

00:12:07,300 --> 00:12:16,910
colors users have a lot of feelings

00:12:11,990 --> 00:12:19,070
about their interfaces colors is also

00:12:16,910 --> 00:12:21,529
part of accessibility like some of us

00:12:19,070 --> 00:12:23,149
need higher contrast text and some of us

00:12:21,529 --> 00:12:25,940
need larger text and some of us

00:12:23,149 --> 00:12:32,360
deliberately set our windows machines to

00:12:25,940 --> 00:12:34,670
hot dog stand so whatever it is that

00:12:32,360 --> 00:12:37,630
users want we need to be able to give

00:12:34,670 --> 00:12:40,430
them their customized experience like I

00:12:37,630 --> 00:12:42,320
think it's really interesting how many

00:12:40,430 --> 00:12:45,589
people change their default desktop

00:12:42,320 --> 00:12:47,019
colors like does it really matter no are

00:12:45,589 --> 00:12:49,579
the default desktop colors

00:12:47,019 --> 00:12:52,279
scientifically and professionally chosen

00:12:49,579 --> 00:12:55,010
by color experts yes did you change the

00:12:52,279 --> 00:12:55,910
color that your highlight is how many of

00:12:55,010 --> 00:12:59,899
you change to the color of your

00:12:55,910 --> 00:13:01,640
highlights yeah see some people care so

00:12:59,899 --> 00:13:03,290
most people don't care but the people

00:13:01,640 --> 00:13:06,910
who care care enough to go in and figure

00:13:03,290 --> 00:13:08,120
what's with it so let's think about that

00:13:06,910 --> 00:13:11,959
all right

00:13:08,120 --> 00:13:15,260
SSO customization single sign-on is

00:13:11,959 --> 00:13:18,440
awesome it says here's Who I am here's

00:13:15,260 --> 00:13:19,850
what I want what we want to be able to

00:13:18,440 --> 00:13:23,029
provide people

00:13:19,850 --> 00:13:25,670
is the ability to say here is my desktop

00:13:23,029 --> 00:13:27,769
experience with my accessibility with my

00:13:25,670 --> 00:13:30,589
colors with my preferred language with

00:13:27,769 --> 00:13:32,839
my preferred time zone like I had given

00:13:30,589 --> 00:13:38,420
up on all time zones and I relate only

00:13:32,839 --> 00:13:40,399
to UTC like sure why not why can't we

00:13:38,420 --> 00:13:43,940
use people single sign-on to give them

00:13:40,399 --> 00:13:47,000
that customized experience before we ask

00:13:43,940 --> 00:13:50,029
them to do anything else like it should

00:13:47,000 --> 00:13:51,980
follow you around your experience of a

00:13:50,029 --> 00:13:54,850
software should follow you around

00:13:51,980 --> 00:13:54,850
wherever you go

00:13:59,529 --> 00:14:05,230
alright adventure choice is what do what

00:14:05,259 --> 00:14:09,069
security and compliance I just added

00:14:07,370 --> 00:14:11,779
this one I'm very excited about it so

00:14:09,069 --> 00:14:13,970
we're talking about dev sec ops right

00:14:11,779 --> 00:14:17,540
it's kind of important that we make sure

00:14:13,970 --> 00:14:19,759
bad actors or accidental actors don't

00:14:17,540 --> 00:14:21,740
get our information so when you're

00:14:19,759 --> 00:14:24,050
sending flags back and forth one of the

00:14:21,740 --> 00:14:28,269
problems is they have a label that says

00:14:24,050 --> 00:14:30,410
things like if user password equals

00:14:28,269 --> 00:14:33,500
reject it because it has special

00:14:30,410 --> 00:14:37,310
characters we maybe don't want to label

00:14:33,500 --> 00:14:39,620
that as user password like even if

00:14:37,310 --> 00:14:41,240
you're sending it encrypted there's some

00:14:39,620 --> 00:14:43,639
points where that has to be unencrypted

00:14:41,240 --> 00:14:45,380
so if you're sending flags that have

00:14:43,639 --> 00:14:48,079
revealing names you want to be able to

00:14:45,380 --> 00:14:50,389
wrap them in a user attributes this

00:14:48,079 --> 00:14:53,000
private that's like some kind of hashed

00:14:50,389 --> 00:14:55,009
codes that only decrypts at certain

00:14:53,000 --> 00:14:56,990
known places because I don't know about

00:14:55,009 --> 00:14:58,880
you but I think there's a lot of

00:14:56,990 --> 00:15:05,630
information hidden in the metadata of

00:14:58,880 --> 00:15:11,569
the way we describe software where we're

00:15:05,630 --> 00:15:14,480
going our back so if you have the

00:15:11,569 --> 00:15:17,089
ability to hit a kill switch and turn

00:15:14,480 --> 00:15:19,279
off a significant portion of your code

00:15:17,089 --> 00:15:23,930
do you want everybody to be able to do

00:15:19,279 --> 00:15:24,620
that no that seems like it might end

00:15:23,930 --> 00:15:27,050
badly

00:15:24,620 --> 00:15:29,240
as a person who sometimes hits the wrong

00:15:27,050 --> 00:15:31,020
button I just like to say don't let me

00:15:29,240 --> 00:15:33,570
do that

00:15:31,020 --> 00:15:36,540
but you want rule based access control

00:15:33,570 --> 00:15:39,030
that says this person has permission to

00:15:36,540 --> 00:15:42,320
change these feature flags and you want

00:15:39,030 --> 00:15:44,910
to not say this person particularly like

00:15:42,320 --> 00:15:48,330
bridget has the ability to turn these

00:15:44,910 --> 00:15:50,820
things on because Bridget might leave or

00:15:48,330 --> 00:15:53,250
go on vacation and we don't want a pager

00:15:50,820 --> 00:15:55,260
we rather want to say system

00:15:53,250 --> 00:15:57,210
administrators of at least this level

00:15:55,260 --> 00:16:00,270
have the ability to turn things on and

00:15:57,210 --> 00:16:02,040
off or only marketing has the right to

00:16:00,270 --> 00:16:04,410
change flags that deal with marketing

00:16:02,040 --> 00:16:05,850
that'd be a better idea so we want to

00:16:04,410 --> 00:16:08,640
make sure that when we're building

00:16:05,850 --> 00:16:10,980
feature flags we're doing role based

00:16:08,640 --> 00:16:14,040
access control we're taking care of how

00:16:10,980 --> 00:16:14,850
that works because otherwise it's kind

00:16:14,040 --> 00:16:17,280
of a free-for-all

00:16:14,850 --> 00:16:19,080
the other advantage is you shouldn't be

00:16:17,280 --> 00:16:21,570
able to see flags that you can't affect

00:16:19,080 --> 00:16:24,300
and that'll really significantly cut

00:16:21,570 --> 00:16:26,820
down on the sort of mental overhead of

00:16:24,300 --> 00:16:35,250
looking at all the flags so that seems

00:16:26,820 --> 00:16:38,100
good all right auditing all right so

00:16:35,250 --> 00:16:41,970
auditing has two main features one of

00:16:38,100 --> 00:16:45,720
them is yeah one of them is auditors

00:16:41,970 --> 00:16:46,770
show up and we just finished our sock

00:16:45,720 --> 00:16:51,090
two level two

00:16:46,770 --> 00:16:54,240
yeah and it was a lot of like here here

00:16:51,090 --> 00:16:56,910
you are auditor please don't hate us and

00:16:54,240 --> 00:17:00,570
it really it is a stack like this right

00:16:56,910 --> 00:17:03,150
and what you want to be able to do is

00:17:00,570 --> 00:17:05,459
say this is every person who has touched

00:17:03,150 --> 00:17:09,120
this flag this is every person who has

00:17:05,459 --> 00:17:11,310
access to it this is every what you can

00:17:09,120 --> 00:17:14,940
get down to like this is every time this

00:17:11,310 --> 00:17:16,740
flag has been used like we've swapped

00:17:14,940 --> 00:17:19,230
all of these users with unique

00:17:16,740 --> 00:17:21,510
identifiers into this category you want

00:17:19,230 --> 00:17:24,570
to be able to audit it in a tamper-proof

00:17:21,510 --> 00:17:28,230
way to make sure that nobody is you know

00:17:24,570 --> 00:17:31,680
accidentally diverting one penny per

00:17:28,230 --> 00:17:35,610
transaction right so auditing is

00:17:31,680 --> 00:17:38,850
important and also it helps you a lot

00:17:35,610 --> 00:17:41,250
when you're doing troubleshooting

00:17:38,850 --> 00:17:45,360
because you're like I did

00:17:41,250 --> 00:17:48,900
a thing it was it was uh mm I don't know

00:17:45,360 --> 00:17:50,550
what happened it's that if you're doing

00:17:48,900 --> 00:17:52,650
a murder mystery you'd like to have some

00:17:50,550 --> 00:17:55,140
clues your audit log is going to be that

00:17:52,650 --> 00:18:03,660
kind of clue all right how am i doing on

00:17:55,140 --> 00:18:05,730
time I'm good okay what do we want sales

00:18:03,660 --> 00:18:08,730
and marketing lots of people don't think

00:18:05,730 --> 00:18:10,170
about feature flags as a sales and

00:18:08,730 --> 00:18:11,880
marketing thing we think about it as an

00:18:10,170 --> 00:18:14,280
Operations thing we think about it as a

00:18:11,880 --> 00:18:16,770
testing thing but if you can affect

00:18:14,280 --> 00:18:18,720
whether or not a feature appears that's

00:18:16,770 --> 00:18:22,730
a big sales and marketing thing so which

00:18:18,720 --> 00:18:29,190
which one do you want hmm

00:18:22,730 --> 00:18:31,380
currency so it turns out that dollar

00:18:29,190 --> 00:18:33,260
doesn't necessarily mean dollar I

00:18:31,380 --> 00:18:37,230
noticed this when I was using Expensify

00:18:33,260 --> 00:18:42,180
and I went to Canada and things cost you

00:18:37,230 --> 00:18:44,850
know $78 well which which dollar if only

00:18:42,180 --> 00:18:48,060
I had some kind of you know location

00:18:44,850 --> 00:18:49,770
fencing geo fencing that would say you

00:18:48,060 --> 00:18:52,950
spent that money in Canada's it's

00:18:49,770 --> 00:18:57,390
probably Canadian dollars that would be

00:18:52,950 --> 00:18:58,950
super useful to me or say your hotel in

00:18:57,390 --> 00:19:01,020
Australia that actually handled this

00:18:58,950 --> 00:19:03,090
really well they're like okay so here's

00:19:01,020 --> 00:19:04,680
how much it costs in American dollars

00:19:03,090 --> 00:19:07,230
because we see that you're coming from

00:19:04,680 --> 00:19:09,750
America and we're going to charge you

00:19:07,230 --> 00:19:12,420
this in Australian dollars because

00:19:09,750 --> 00:19:15,150
that's how our money works here okay

00:19:12,420 --> 00:19:17,250
that seems great so if you're using any

00:19:15,150 --> 00:19:19,560
kind of international software you want

00:19:17,250 --> 00:19:21,660
to be able to say this is the currency

00:19:19,560 --> 00:19:24,900
for people making purchases in this

00:19:21,660 --> 00:19:29,510
location charge their credit card in

00:19:24,900 --> 00:19:36,440
this currency or that currency all right

00:19:29,510 --> 00:19:39,420
so what else feature tiers all right so

00:19:36,440 --> 00:19:43,410
you know that thing where LinkedIn has

00:19:39,420 --> 00:19:45,150
two states and one state is you have

00:19:43,410 --> 00:19:46,680
upgraded to the pro plan and the other

00:19:45,150 --> 00:19:47,410
state is they are pestering you

00:19:46,680 --> 00:19:51,430
incessant

00:19:47,410 --> 00:19:55,000
to upgrade to the pro plan I've done

00:19:51,430 --> 00:19:58,710
both and I have to say it's almost worth

00:19:55,000 --> 00:20:01,900
the pro plan just to not get past her

00:19:58,710 --> 00:20:04,180
and what they're doing there is using

00:20:01,900 --> 00:20:05,170
feature flags to say hey this person has

00:20:04,180 --> 00:20:09,010
given us money

00:20:05,170 --> 00:20:11,020
turn off the pester Matic and I would

00:20:09,010 --> 00:20:13,510
like you to not build up s dramatic

00:20:11,020 --> 00:20:15,250
because it's really aggravating but I

00:20:13,510 --> 00:20:19,060
also want you to think about how it is

00:20:15,250 --> 00:20:22,030
possible for us to use feature tearing

00:20:19,060 --> 00:20:24,010
ears used hearing with feature flags to

00:20:22,030 --> 00:20:29,350
separate people out without having to

00:20:24,010 --> 00:20:30,880
say like log in right sometimes you just

00:20:29,350 --> 00:20:32,590
want to say hey you're coming from this

00:20:30,880 --> 00:20:36,100
domain your company's paying for it

00:20:32,590 --> 00:20:40,960
that's great go like I would love it if

00:20:36,100 --> 00:20:45,850
Trello realized that but I'm like your

00:20:40,960 --> 00:20:48,640
Atlassian now right not yet so I really

00:20:45,850 --> 00:20:51,850
think feature tearing and price tearing

00:20:48,640 --> 00:20:54,310
is a way to use feature flags to you in

00:20:51,850 --> 00:20:56,380
sales and marketing and there's a bunch

00:20:54,310 --> 00:20:59,170
of other stuff in this presentation but

00:20:56,380 --> 00:21:03,750
I'm going to move on because we have

00:20:59,170 --> 00:21:07,380
finite time and there are like a hundred

00:21:03,750 --> 00:21:11,760
opportunities and and things in here so

00:21:07,380 --> 00:21:11,760
we're gonna move on to the case study so

00:21:12,300 --> 00:21:18,280
toggles hypothetical space line company

00:21:15,720 --> 00:21:21,160
wants to add feature management using

00:21:18,280 --> 00:21:23,350
flags and there's a few ways they can

00:21:21,160 --> 00:21:26,790
approach this problem so what do you

00:21:23,350 --> 00:21:31,020
think they choose to start with

00:21:26,790 --> 00:21:33,730
terraforming so these are existing

00:21:31,020 --> 00:21:36,340
planets or the planets that already have

00:21:33,730 --> 00:21:39,100
space lag flags on them but they're

00:21:36,340 --> 00:21:40,300
outdated and we need to like pull them

00:21:39,100 --> 00:21:45,190
together and make them part of the

00:21:40,300 --> 00:21:46,090
system so there's nothing magical about

00:21:45,190 --> 00:21:47,740
what you're going to do there's only

00:21:46,090 --> 00:21:52,210
three ways you can upgrade an existing

00:21:47,740 --> 00:21:56,610
system what do you think rip off the

00:21:52,210 --> 00:22:00,150
band-aid it's gonna hurt

00:21:56,610 --> 00:22:02,340
it is super painful to stop what you're

00:22:00,150 --> 00:22:04,559
doing for a couple weeks and go through

00:22:02,340 --> 00:22:07,740
and wrap every feature you have in a

00:22:04,559 --> 00:22:08,940
flag but the advantages because you're

00:22:07,740 --> 00:22:11,070
doing it all at once you can do

00:22:08,940 --> 00:22:13,950
consistent naming and you can think

00:22:11,070 --> 00:22:15,960
about like the groups of flags and you

00:22:13,950 --> 00:22:18,870
can nest them and you can say like all

00:22:15,960 --> 00:22:20,309
of these are dependent on this flag if

00:22:18,870 --> 00:22:23,070
this then that

00:22:20,309 --> 00:22:24,780
like multivariate flag application it so

00:22:23,070 --> 00:22:28,140
much easier to do if you're doing it

00:22:24,780 --> 00:22:31,080
once in one giant push so there's that

00:22:28,140 --> 00:22:34,140
but I I will say there is no way to make

00:22:31,080 --> 00:22:40,520
it not suck because ripping off the

00:22:34,140 --> 00:22:43,320
band-aid hurts alright training is hard

00:22:40,520 --> 00:22:47,640
teaching people to change the way they

00:22:43,320 --> 00:22:50,630
work is hard adding a new muscle memory

00:22:47,640 --> 00:22:53,040
for I am going to create a new feature

00:22:50,630 --> 00:22:56,120
instead of creating a new branch I'm

00:22:53,040 --> 00:22:58,799
going to put a feature flag around this

00:22:56,120 --> 00:23:00,390
muscle memory is hard to retrain and a

00:22:58,799 --> 00:23:04,200
lot of us have been working in branch

00:23:00,390 --> 00:23:05,730
based systems for a long time so it's

00:23:04,200 --> 00:23:08,130
gonna be hard and people are going to

00:23:05,730 --> 00:23:10,010
resist you and they're not gonna do it

00:23:08,130 --> 00:23:14,790
right but it's gonna be worthwhile

00:23:10,010 --> 00:23:18,150
because eventually you learn to read

00:23:14,790 --> 00:23:20,549
learn to do it right so when I was in

00:23:18,150 --> 00:23:22,260
college my mom and my sister both came

00:23:20,549 --> 00:23:24,630
down with carpal tunnel and I read

00:23:22,260 --> 00:23:26,820
taught myself to to touch type from

00:23:24,630 --> 00:23:30,390
cornea to Dvorak because I'm a giant

00:23:26,820 --> 00:23:32,250
nerd and it was really agonizing cuz I

00:23:30,390 --> 00:23:35,669
went from like 85 words a minute down to

00:23:32,250 --> 00:23:37,620
like 15 words a minute and I was like

00:23:35,669 --> 00:23:38,250
this sucks why did I do this this is

00:23:37,620 --> 00:23:40,080
terrible

00:23:38,250 --> 00:23:41,960
oh wait I can't go back to QWERTY

00:23:40,080 --> 00:23:46,230
because now I've unlearned everything

00:23:41,960 --> 00:23:48,330
but it turns out that now I type 85

00:23:46,230 --> 00:23:50,480
words a minute and I still don't have

00:23:48,330 --> 00:23:52,770
carpal tunnel so I think we're gonna say

00:23:50,480 --> 00:23:56,070
training sucks and it's hard but it's

00:23:52,770 --> 00:23:58,650
worthwhile so eventually you get to the

00:23:56,070 --> 00:24:00,480
point where everything works great

00:23:58,650 --> 00:24:03,830
Tuggle loves everyone in this space

00:24:00,480 --> 00:24:03,830
cantina yeah

00:24:04,970 --> 00:24:14,040
so let's go look at unexplored planets

00:24:09,080 --> 00:24:17,850
greenfield construction right which one

00:24:14,040 --> 00:24:20,520
are we going to do get in branches lots

00:24:17,850 --> 00:24:25,280
of you work in this right now what

00:24:20,520 --> 00:24:31,590
planet do you want plant it to merge

00:24:25,280 --> 00:24:35,280
conflict sad for you I hope you like

00:24:31,590 --> 00:24:39,840
cherry picking all right we're gonna try

00:24:35,280 --> 00:24:42,179
left planet Oh everything goes fine it

00:24:39,840 --> 00:24:43,980
works fine because it has been working

00:24:42,179 --> 00:24:46,440
fine and you've been doing fine with

00:24:43,980 --> 00:24:49,410
this system right you know how this

00:24:46,440 --> 00:24:51,780
works you have work arounds and systems

00:24:49,410 --> 00:24:54,059
and procedures for this I'm not going to

00:24:51,780 --> 00:24:57,350
say that feature flags are the only way

00:24:54,059 --> 00:24:59,850
to develop get in branches works fine

00:24:57,350 --> 00:25:01,380
it's just you don't have some of the

00:24:59,850 --> 00:25:06,299
opportunities that you have other ways

00:25:01,380 --> 00:25:16,710
so you know have a space flag or a space

00:25:06,299 --> 00:25:18,809
cake alright flags and main line it's

00:25:16,710 --> 00:25:21,419
really interesting to me to talk to

00:25:18,809 --> 00:25:24,720
people who are coming out of a few big

00:25:21,419 --> 00:25:26,880
companies Google and Facebook are the

00:25:24,720 --> 00:25:31,260
ones that I think of right now where

00:25:26,880 --> 00:25:33,270
they're like every time they leave the

00:25:31,260 --> 00:25:34,950
mothership and they go out and develop

00:25:33,270 --> 00:25:37,049
someplace else and they're like this

00:25:34,950 --> 00:25:39,630
feels so weird because we have all these

00:25:37,049 --> 00:25:42,480
branches I'm used to working in trunks

00:25:39,630 --> 00:25:45,559
and that seems terrifying to us like are

00:25:42,480 --> 00:25:48,929
you serious you only have like the code

00:25:45,559 --> 00:25:50,700
that's all you have is the code what if

00:25:48,929 --> 00:25:53,520
something goes wrong well if something

00:25:50,700 --> 00:25:57,900
goes wrong you turn it off or you you

00:25:53,520 --> 00:26:00,480
know shunted aside or you don't commit

00:25:57,900 --> 00:26:03,120
it because you tested it but it turns

00:26:00,480 --> 00:26:06,240
out it's not really inherently more

00:26:03,120 --> 00:26:10,820
dangerous as long as you're doing proper

00:26:06,240 --> 00:26:13,110
access control and auditing and it's a

00:26:10,820 --> 00:26:14,040
really freeing and different way to

00:26:13,110 --> 00:26:16,530
think

00:26:14,040 --> 00:26:18,630
to say we all know what everyone is

00:26:16,530 --> 00:26:21,150
doing we can see all the code that is

00:26:18,630 --> 00:26:22,560
happening all the time it's a little

00:26:21,150 --> 00:26:24,750
terrifying when you're talking about

00:26:22,560 --> 00:26:30,540
that kind of scale but it's still a

00:26:24,750 --> 00:26:36,150
really empowering way to work so what

00:26:30,540 --> 00:26:38,910
planet do we want plant it up so you

00:26:36,150 --> 00:26:42,450
want to deploy and test quietly before

00:26:38,910 --> 00:26:46,140
the class the crowd you push the deploy

00:26:42,450 --> 00:26:48,720
you test it as dog food it works fine

00:26:46,140 --> 00:26:51,660
you test it internally it works fine you

00:26:48,720 --> 00:26:53,700
canary tested it works fine you roll it

00:26:51,660 --> 00:26:55,740
out to Australia because they are the

00:26:53,700 --> 00:26:58,160
slowest internet and if it works fine

00:26:55,740 --> 00:27:02,610
there it's gonna work everywhere else

00:26:58,160 --> 00:27:04,830
we're souls and and then you can rule it

00:27:02,610 --> 00:27:06,570
out to everybody else and so there's

00:27:04,830 --> 00:27:08,310
there's a lot of testing in there

00:27:06,570 --> 00:27:09,840
there's a lot of checks there's a lot of

00:27:08,310 --> 00:27:12,870
places that you can catch things going

00:27:09,840 --> 00:27:16,080
wrong it's pretty exciting to be able to

00:27:12,870 --> 00:27:19,170
do dark launching to be able to say this

00:27:16,080 --> 00:27:22,340
is how we rolled it out and nobody ever

00:27:19,170 --> 00:27:22,340
had liches

00:27:28,770 --> 00:27:35,920
alright planet charmed what if on the

00:27:33,790 --> 00:27:38,830
other hand your feature fails fast

00:27:35,920 --> 00:27:41,680
you're like you Doug foo did it it

00:27:38,830 --> 00:27:44,200
seemed fine you rolled it out internally

00:27:41,680 --> 00:27:47,140
it seemed fine you rolled it out to your

00:27:44,200 --> 00:27:50,040
canary and it turns out that this whole

00:27:47,140 --> 00:27:54,130
thing requires internet speeds that

00:27:50,040 --> 00:27:57,430
people in rural areas don't have well

00:27:54,130 --> 00:27:59,710
okay that failed and now you know

00:27:57,430 --> 00:28:02,470
something without having exposed it to

00:27:59,710 --> 00:28:04,570
everybody it's still only exposed it to

00:28:02,470 --> 00:28:07,240
you know 5% of your users or something

00:28:04,570 --> 00:28:11,220
and you can go back and fix it without

00:28:07,240 --> 00:28:13,450
having to do an entire redeploy and and

00:28:11,220 --> 00:28:14,830
recovery and pull things back you're

00:28:13,450 --> 00:28:17,160
just like okay we're turning that off

00:28:14,830 --> 00:28:20,610
for now we're fixing it we'll try again

00:28:17,160 --> 00:28:20,610
seems pretty good

00:28:21,720 --> 00:28:29,760
okay so a few years ago there was a

00:28:26,710 --> 00:28:34,300
problem with the Best Buy website on

00:28:29,760 --> 00:28:35,200
Black Friday in that it fell over and

00:28:34,300 --> 00:28:37,840
caught on fire

00:28:35,200 --> 00:28:38,710
metaphorically and that was a problem

00:28:37,840 --> 00:28:41,530
but that's fine

00:28:38,710 --> 00:28:43,090
they stood it back up but it couldn't

00:28:41,530 --> 00:28:44,560
stay up because the first thing that

00:28:43,090 --> 00:28:47,020
happened was everybody who wanted to buy

00:28:44,560 --> 00:28:49,240
something from Best Buy on Friday hit

00:28:47,020 --> 00:28:52,180
the site at once and although the site

00:28:49,240 --> 00:28:55,180
could have sustained like intermittent

00:28:52,180 --> 00:28:56,530
load of that nature it couldn't load

00:28:55,180 --> 00:28:59,290
every page

00:28:56,530 --> 00:29:00,910
I knew all at the same time and then the

00:28:59,290 --> 00:29:04,120
servers fell over and caught on fire

00:29:00,910 --> 00:29:06,850
again and so they needed some way to be

00:29:04,120 --> 00:29:10,930
able to throttle the access of people

00:29:06,850 --> 00:29:13,360
like it's down for 90% of people okay we

00:29:10,930 --> 00:29:17,500
got the 10% established it's down for

00:29:13,360 --> 00:29:20,350
80% of people ok ramp it up slow down

00:29:17,500 --> 00:29:23,530
your your deployment give it a little

00:29:20,350 --> 00:29:27,190
time to work effectively so I am out of

00:29:23,530 --> 00:29:29,650
time but two reminders if you would like

00:29:27,190 --> 00:29:31,540
to learn three reminders if you'd like

00:29:29,650 --> 00:29:32,500
to learn more about launch Darkly I am

00:29:31,540 --> 00:29:36,100
here to talk to you

00:29:32,500 --> 00:29:38,440
I have stickers at lunch and I'm going

00:29:36,100 --> 00:29:39,760
to do an open space on weird ways to use

00:29:38,440 --> 00:29:43,300
feature flags that aren't

00:29:39,760 --> 00:29:45,320
like production on/off so thank you all

00:29:43,300 --> 00:29:52,609
for your attention

00:29:45,320 --> 00:29:52,609

YouTube URL: https://www.youtube.com/watch?v=E8tztryHTRE


