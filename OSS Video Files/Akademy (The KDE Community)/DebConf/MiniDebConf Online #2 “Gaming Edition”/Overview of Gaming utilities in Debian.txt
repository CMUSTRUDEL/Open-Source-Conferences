Title: Overview of Gaming utilities in Debian
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Stephan Lachnit

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/1-overview-of-gaming-utilities-in-debian/

In this talk I want to give a short overview of several Linux gaming utilities, and their state inside and outside of Debian. The tools I will cover are Lutris, Piper, MangoHud, gamemode, vkBasalt, GOverlay, vkdevicechooser, OpenRGB, Oversteer, GameHub and possibly more.

Room: Main
Scheduled start: 2020-11-21 13:30:00
Captions: 
	                              hello everyone                               so the next talk is overview of the                               gaming utils in debian                               by stefan ranchet so it's a pre-recorded                               talk                               and we'll have some time for the q a so                               please feel free to use the ether pad                               for the question                               so let's begin                                hi and welcome to my talk about gaming                                utilities and debian                                in this talk i want to talk about a                                couple of gaming utilities                                and their state upstream as well as in                                debian                                so a little bit about myself i'm                                contributing to debian for about a year                                and i'm also co-maintaining the game                                mode package                                and i recently got approved as                                dm so here are the utilities i want to                                talk about                                so on the left side um you see packages                                which are yeah hopefully coming soon to                                debian                                or are already inside so there will be                                lupus mango bk bazaar geovla                                piper and gamemode and on the right side                                a couple of projects i find interesting                                but i haven't done any serious packaging                                yet i also                                want to talk about some other topics                                which are related so                                one of the more important ones is the                                vulcan layer library location problem                                which actually affects                                um yeah quite a lot of these utilities                                then the game section and debian as well                                as the games category in the desktop                                menu                                specification from free desktop                                so the first package i want to talk                                about is probably the most prominent one                                is lutress                                so it's an open source gaming platform                                or basically a library for all your                                games                                um linux natives                                buying games um dos games just                                yeah everything the development is                                pretty                                steady i would say there are a couple of                                outside contributors                                so yeah in a healthy state and it's                                quite easy to help                                so um it's possible to write                                translations                                and it's also possible to                                contribute installers so basically                                so a one-click installation of the game                                which maybe requires a bit more yeah                                complicated setup                                debbie instead of lutress is actually                                a long story so the first itp was                                um in                                                           to new but it actually got rejected and                                there was no new effort                                and yeah it was some copyright problem                                and                                i gave it another shot                                about a year ago i made the rather big                                pr                                to update the entire copyright                                file look just as a ubuntu native                                package                                so it already had one but it was not                                used                                all the um lucas                                bundles a lot of icons and                                for for certain runners and                                there was a separate copy for write file                                for all these icons but it wasn't really                                up to date                                and i yeah um put it all to                                together in a debian copyright file but                                it still got rejected because one icon                                had a non-dfsg compliant license                                so yeah that was actually                                quite a big problem and the current                                solution                                from upstream is to get the package                                inside even is to                                not ship these icons by default                                but now they are part of the runtime                                which will roots download in your home                                directory                                um yeah it's a bit                                of a workaround so i'm not entirely sure                                if                                 lucrez can go into main                                 because yeah it still downloads these by                                 defaults without asking                                 but else                                 everything is out of the way to                                 get the upcoming zero five eight release                                 into debian                                 so let me give you a quick overview of                                 lutris here you see                                 the main window which lists all your                                 installed games                                 you can also do it in a proper list if                                 you want and here on the left side                                 we have different sources so for example                                 just general lucious runners games from                                 gog from humble bundle and from steam                                 you can connect your accounts to them so                                 for example                                 on humble bundle i don't currently have                                 any games installed                                 and if i press ctrl h i can see                                 all the programs on my account i can                                 install same for steam                                 and now i want to want to show you an                                 example how to add a                                 steam game you already have installed so                                 for example among us i already have it                                 installed                                 so i click on the mongoast and add                                 installed game                                 now you have to select the runner so                                 here we select just steam                                 and then we're going on game options we                                 need to insert the application id                                 which is a little bit odd but we just go                                 to store page on steam                                 and this little number here                                 is the steam app id                                 just kind of paste it in here and we                                 click on save                                 and now we have here among us and we can                                 play it                                 if you don't have a game installed and                                 you want to install a new game                                 and you can also do that so for example                                 soft                                 just click install and you have                                 different options                                 um and here we just click steam for                                 conversion                                 install okay now it says installation                                 complete                                 it's not actually entirely correct when                                 we now click on play                                 what will happen is just a normal steam                                 installation will pop up and                                 just going to remove it                                 the nice thing about lucas is you can                                 configure your game so for example                                 i can stop steam after the game exits                                 if you don't want steam to run in the                                 background                                 or just tons of other things so for                                 example                                 enable mango hood aco game mode                                 nvidia prime render offload so you don't                                 you can really easily set it here                                 instead of um                                 editing the launch command on steam                                 and the icons i talked about earlier                                 just to show you them these are these                                 icons here for the runners                                 next up is mangohood so it's a                                 performance overlay                                 for opengl and vulcan so you can see                                 fps frame times and gpu cpu load                                 the development is pretty active                                 mainly by two people but there are also                                 a couple of outside                                 contributors the only thing is that                                 upstream is sometimes                                 messy so they include a lot of headers                                 um sometimes the installers                                 do weird things so for example at the                                 beginning                                 the architecture was hard coded but                                 it's pretty nice to work with them so                                 yeah it's actually not that big of a                                 problem                                 um yeah the debian status i have a                                 working arch independent package                                 now why arch independent is important                                 here as we will discuss it later but                                 um it's                                 basically done the package but there's                                 some                                 problems and with the copyright file                                 um yeah i haven't um taken a deep look                                 at it                                 i'll probably try to resolve that um                                 soon                                 but um yeah else it's basically ready                                 it has the the vulcan layer library                                 location problem which i'll talk about                                 later                                 so let's take a look at manga hood on                                 vulcan you can enable it with an                                 environment variable                                 so mango head equals one                                 ukq for example yeah for some reason my                                 gpu doesn't work here                                 i guess because it's too old but um                                 yeah it works just fine on opengl you                                 need to launch your script                                 so for example with glx gears                                 just call mango glx gears                                 and it should work well it doesn't work                                 always if we do the same thing with                                 supertux card                                 you will see that it doesn't work                                 and in those cases where it doesn't work                                 you um can add minus minus dl                                 sum and then it                                 should work in most scenarios                                 yeah and as you can see                                 there's a lot of information so you can                                 also customize                                 but you want to see                                 okay result is a vulcan                                 post processing layer so you can apply                                 some graphic post-processing effects to                                 your vulcan application                                 their development is not very active so                                 it's almost done by one person um he's                                 still active though so he responds to                                 issues                                 and so on but yeah not a lot of                                 development currently upstream bundles                                 all vulcan headers                                 but yeah i'm already working to resolve                                 that                                 and the debian state is pretty much                                 like manga hood but just without the                                 copyright problem so if you're working                                 arch independent package despite vulcan                                 library location problem and yeah i'm                                 only really looking for a sponsor                                 so if you happen to have some free                                 review time                                 give it a go so let me now                                 showcase vk bazalt so                                 we start off with                                 [Music]                                 um taking a look at the config so you                                 want to have um reshade installed                                 or at some location for all the shaders                                 um                                 and yeah you have to give the location                                 to the shaders and then                                 right here you can say the effects you                                 want                                 uh right now i just took some to make it                                 um pretty visible the difference                                 and you can also give a shot                                 a hotkey to enable or disable it so yeah                                 here's                                 just um vk cube                                 and as you can see yeah it looks a                                 little bit different but                                 yeah it's not really a good showcase                                 application so                                 i want to showcase it with satisfactory                                 so first we need to do                                 on the properties                                 we need to set the launch options so                                 yeah we just                                 put the environment variable here and                                 also                                 if you're using a proton game again with                                 proton                                 don't use                                                              because it uses the steam linux runtime                                 so yeah we'll use                                       so this is how it looks by default                                 actually pretty decent looking game and                                 if i now press the home key                                 i can enable it and as you can see it                                 really changes                                 the visuals of the game i mean yeah this                                 effect is a little bit                                 too much but um yeah i think if you                                 tweak around with it you can get some                                 pretty decent results                                 and as you can see if you look at the                                 fps counter                                 there's not a huge impact um                                 between enable or disabling it it's a                                 couple of fps                                 but if you have a decent enough graphics                                 card cards                                 yeah and cpu shouldn't be that much of a                                 problem also depending on the game of                                 course                                 so                                 so now that we talked about manga hood                                 and                                 vk basalt it's worth mentioning g                                 overlay                                 so that's a graphical configuration                                 utility                                 um for manga nvk results and also                                 reaper a sorcery which i won't talk                                 about in this talk it's written in                                 pascal                                 with lazarus so that's very uncommon                                 yeah which makes it a little bit hard to                                 contribute even though i actually                                 learned pascal                                 um it's not the most common language and                                 currently there are two                                 [Music]                                 yeah issues upstream at least from a                                 debian point of view so we kind of don't                                 get it                                 to output and position independent                                 executable even though                                 all the flags are actually set and i                                 also don't get it to                                 have fortified ellipses functions                                 also it currently still uses gtk                                  however um there's a pr                                 to get it to qt                                               that's going to be fixed soon                                 yeah today being said is that there is a                                 working package                                 yeah if someone knows pascal and wants                                 to help                                 to fix the pia problem                                 [Music]                                 yeah you're welcome to help else linton                                 will complain                                 also replay sorcery is not packaged                                 um which isn't that big of a problem but                                 yeah                                 the current version                                                   and                                 i'm looking for a sponsor                                 so here's the mangahood window in the                                 overlay                                 so in the middle you see a small preview                                 it isn't actually                                 a proper preview as you can see but it                                 does a job good enough so                                 for example if i add                                 and click on the option here you will                                 see them appear and disappear                                 and yeah                                 we can also change the position so for                                 example if i would                                 put in the bottom left we can save it                                 here we can run it                                 and it will run                                 to demos                                 to see so you can see how it looks in                                 real life                                 let's revert that and here's the vk                                 result page                                 so here when you press sync you will                                 sync your git repository with reshade                                 and you can add certain effects so for                                 example if i want bloom                                 and now                                 the good old vignette can add it                                 save it run it                                 and you will see it actually changes the                                 config                                 appropriately                                 he would be the window for replay                                 sorcery                                 but yeah i currently haven't looked into                                 packaging it                                 and uh one note um                                 i wouldn't recommend using the global                                 enable                                 um at least for mango and vk result                                 because they set the                                 environment variable um into your basher                                 c                                 and that can mess around with system                                 applications as well                                 so better don't do it                                 next up piper that's a graphical                                 configuration                                 utility for peripherals                                 mainly mice but we also recently                                 included support for keyboards                                 and yeah it uses the breadback breadbank                                 daemon so yeah both the project                                 are maintained by the same team                                 the option state is i'm actually in the                                 in the team but we only do basic                                 maintenance                                 um and yeah we                                 don't really the problem in piper                                 especially in piper is that there is                                 like                                 of knowledge about the code base so the                                 person who created it                                 left the project and there is only one                                 other person who                                 really knows the code and he doesn't                                 have that much time                                 so hops wanted especially to                                 review prs in the breadback                                 because that's the major uh blocker for                                 new functionality in piper as well                                 also especially for piper                                 we need um svgs                                 for supported devices supported devices                                 in the breadback so                                 that we can display them in the ui and                                 it feels more natural                                 so they can say this that there is                                 already a package                                 for about a year it was my first package                                 and it has about                                     popcorn users as of yesterday                                 so here you see the resolutions page of                                 piper                                 you can change the usb report rate                                 in case your mouse supports it and you                                 can also change the dpi                                 so here my mouse supports five                                 resolutions um                                 but i'll only have one enabled                                 um if we click on it you have a slider                                 with which you can change it                                 to any value your mouse supports or                                 almost any value                                 um yeah these zero dpis means                                 that it is not enabled is actually                                 not supported yet in piper dashley                                 bradback                                 there is a pending pr for me but yeah                                 that needs to be reviewed                                 so if you're bored take a look at it and                                 it's mostly                                 systemd stuff that needs to be figured                                 out                                 if we look at the buttons page                                 you can see here the buttons                                 it looks a little bit like the logitech                                 software so                                 if we want to edit this button you will                                 have a list of buttons                                 and clicks more like so your typical                                 mouse clicks some                                 special clicks like wheel up and down                                 and you can also send the keystroke                                 now false and let's say                                 just h um it will work                                 let's see it right now so you have to                                 hit apply to send                                 it actually to the mouse and if i press                                 this it will send an h                                 just if you would press it on the                                 keyboard but                                 sometimes it doesn't work so if we would                                 do                                 something like hi                                 yeah and it won't work because uh my                                 mouse                                 kind of doesn't support it just                                 set this back and here's the led page i                                 only have                                 one led on my mouse i can change it                                 to let's say cycling with effect                                 duration brightness                                 the same with breathing i can also                                 disable the led                                 yeah the next project i want to talk                                 about is game mode it's a                                 program or project to optimize the                                 performance of games on demand                                 it's basically a background demand                                 bundled with the library so you preload                                 the library into your game                                 and the library will call the daemon the                                 daemon will                                 switch the cpu governor                                 change the process priority and some                                 other                                 minor performance tweaks                                 and it's actually developed for                                 fairly interactive and they are known                                 for                                 linux ports of games so for example the                                 life is strange                                 franchise upstream                                 is basically dead it is one guy                                 from a federal who still                                 answers to prs and issues but there are                                 um basically no new code contributions                                 not from feral and also not from                                 outsiders                                 yeah there are two                                 notable upstream                                 issues or improvement ideas                                 so one is the that there is a special                                 mode for igpus                                 which are in laptops to not unlock the                                 full power                                 because that maybe throttle is the                                 internal gpu                                 if you let the cpu suck as much power as                                 it wants                                 and there's some performance problem and                                 the other one is                                 to use nasty events instead of threads                                 to make it a little bit more streamlined                                 the debian states is that it is already                                 in debian                                 since about two years it has                                             users the only thing that's really um                                 worth mentioning here is that ubuntu is                                 still on an old version and                                 um yet actually have custom patches                                 supplied because of any age                                 um any game mode is in um                                 yeah in main and ubuntu but                                 any age is not then actually there's a                                 reason for it                                 this i believe because on debian in edge                                 is                                 heavily vendorized i actually disagree                                 with the maintainer but                                 yeah that's not the topic of this talk                                 so now we are at the point where um                                 the doing side of the project is way                                 worse so um one                                 um interesting project i found was wiki                                 device chooser                                 so it basically forces um                                 to use a specific physical device for                                 any                                 uh vulcan application                                 so yeah that's pretty useful if you have                                 let's say a laptop with an                                 igpu and an external gpu or you have                                 multiple gpus and your pc so let's say                                 you have an um intel cpu of an igpu and                                 an additional graphics card and you want                                 to use both of them                                 upstream is basically that which isn't                                 really a problem                                 i mean it it works and there's it                                 doesn't really need any more features                                 uh however it um likes the welcome                                 later every location work around i'll                                 talk about it later                                 uh actually for the daemon package                                 it's pretty much um easy to do                                 i just didn't have the time yet that's                                 not a complicated project doesn't have a                                 lot of dependencies                                 uh but yeah i actually need to write up                                 the workaround um yeah                                 probably implement it upstream but yeah                                 i i just didn't have the time it's                                 not a high priority for me right now                                 and next up is open rgb so open rgb is                                 actually                                 a cool project i think so it's an um                                 open source rgb lightning                                 control software um                                 graphical ui it's course platform for                                 both                                 linux and windows and vendor independent                                 so everyone can write a driver for any                                 vendor without                                 using their software so it needs to be                                 fully open source                                 um i haven't really actually haven't                                 taken a proper look at the development                                 um mainly because it is cross-platform                                 and here we come to the damien state                                 um it bundles a lot of lips upstream                                 because it also builds for windows there                                 actually                                 is a debian d already that d slash                                 copyright is empty and                                 i guess because it's rather complicated                                 to write one up                                 so yeah if i                                 will ever tackle this then it's probably                                 the best to                                 write up a script to create a separate                                 source                                 table for building                                 it's on deviant or linux in general                                 next project i found                                 randomly kind of is oversteer                                 it's a graphical                                 utility to configure steering wheels for                                 racing games                                 the development looks kind of active                                 again i haven't taken a deep look                                 yeah it looks pretty cool but i didn't                                 have the time to package this yet and                                 also i don't have a                                 steering wheel to test it actually um                                 so yeah not a high priority on my to-do                                 list but                                 in case you have a steering wheel and                                 you think it's a cool project                                 yeah but check it out                                 then the next project is game hub                                 so game hub to really short it's it's                                 basically                                 like lutherus but different um                                 it has the same purpose so one                                 program for library for all your games                                 um and an easy way to install them                                 um it was very active when                                 um i actually wanted to package it but                                 now it doesn't look that active                                 um yeah i actually wanted to do it at                                 some point but i noticed that it                                 bundles the flat pack um                                 some flat back libraries on in the                                 source table                                 so yeah that would require a separate                                 source level also                                 when i checked it out yesterday again                                 did also bundles some questionable icons                                 for example for discord for youtube                                 so we kind of have the same problem like                                 with lucrez                                 and yeah right now i don't have a lot of                                 motivation um to package it                                 but um yeah if you                                 some people actually prefer to lucas um                                 so yeah in case you're interesting                                 interested in the project uh                                 uh also a project                                 which i think is pretty cool                                 um at least from the idea is noise                                 storage                                 so basically it aims to be a clone of                                 rtx voice                                 which uses ai to                                 reduce background noises and                                 not just like your yellow quality                                 audio noise but also stuff like                                 keyboard sounds for example or                                 when you are outside in a noisy                                 environment with                                 people talking say at a train station um                                 just filters all this out and so                                 that you can just hear the voice so                                 basically for gamers or streamers                                 whatever                                 um yeah upstream looks rather active but                                 it's written in go                                 and i basically don't have any go                                 experience                                 so i will probably not                                 try to package it at least for now                                 also it bundles r and noise were                                 basically a wrapper for our noise our                                 noise                                 is from mozilla                                 and that's the library behind the                                 suppression                                 and the last utility i want to cover in                                 this talk is vkmark                                 so it's a vulcan benchmark suite                                 just from looking at the combat history                                 it doesn't do                                 that active um                                 but yeah i can't really talk much about                                 it because                                 i just because covered it actually                                 yesterday                                 uh but yeah i'll probably try to package                                 it                                 it looks quite cool                                 so let me now explain the vulcan layer                                 library                                 location problem i talked about before                                 so on vulcan you can                                 have vulcan layers so basically                                 extensions they go in a                                 shared folder and they're basically json                                 files                                 and you can specify in the                                 specific library which basically is your                                 layer                                 and either you do it by inserting the                                 full path to the library                                 or by library file name inside the                                 shared library folder                                 so for example for mangahood this                                 library is called labmango.so                                 so these these layers they                                 they don't have a um                                 so version because essentially they work                                 like a private like the only use case is                                 to reload it from these json files                                 but they also kind of need to be public                                 for the                                 vulcan loader so it's                                 kind of a conflict with the deviant                                 policy                                 so the current demand policy for private                                 libraries                                 recommends placing them into user                                 lib and then subdirectory for example                                 manga hood dash mangahot.daso                                 so this actually is two problems so for                                 one that's not multi-arch capable at all                                 and also the second problem is that um                                 when you now would insert this into                                 your um into your json file                                 that it would only work for one arch                                 persist specifically and                                 for vulcan overlays we definitely don't                                 want it especially when you want to use                                 them in games                                 because um what you want is that                                 when i'm on amd                                                       game                                 um and i want to enable my vulcan layer                                 then i want the layer to                                 choose the correct library                                 and which usually would work if we would                                 not specify the part                                 the path explicitly and just put it                                 inside the shared library folder                                 so i came up with a workaround                                 so i put the                                 libraries just in the normal shed                                 library                                 folder with an additional directory                                 before it                                 so yeah so for example user lib amd                                   mango hood slash livemangood.so and                                 in the json file we can do what um you                                 can see here                                 in the presentation that's the backslash                                 dollar lib                                 and this is an undocumented                                 kind of undocumented workaround because                                 the library will be pre-loaded                                 with ld and ld will replace the                                 backslash dollar lib                                 with exactly the arch of the program so                                 it works but i actually                                 read up the wilkins back at some point                                 to check if there's                                 yeah some proper solution but um yeah                                 not really it says like either                                 um an explicit path or just a library                                 name                                 so yeah what's the solution to this i                                 don't know                                 um yeah the current workaround works                                 it's                                 yeah not really that beautiful                                 um yeah probably all                                 they're basically two options one is                                 changing the demand policy                                 to yeah make exceptions to these looking                                 layers                                 and let them be let them live in the                                 shared library folders without lynching                                 going completely crazy or                                 um yeah change the                                 the vulcan loader so you have to create                                 a special folder                                 so for example here's our lib arch and                                 slash vulcan and then we put in all                                 libraries in there and                                 the vulcan loader will add a                                 um we'll add appropriate ld preload path                                 that would be one solution                                 another problem for gaming utilities is                                 the game section and they mean                                 so the it really suggests that                                 in this section they are really only                                 games and not gaming utilities                                 so if you do anything                                 um which is not in yours or slash                                 anything in there which doesn't have the                                 binary in use r slash games                                 uh lynching will give annoying warnings                                 so for example                                 um for g overlay if i would put it on                                 the game section i actually have to                                 move the binary to use uh slash games                                 but                                 yeah geovalerie is not really a game it                                 kind of doesn't belong there so                                 to fix these lynchian warnings you                                 either um                                 yeah overwrite them you um                                 patch the installation                                 to to put it into a different folder                                 where you have to change the section to                                 misc                                 all three of which are in my opinion                                 pretty accurately so                                 i propose to add a new section um a                                 gaming section                                 which basically just allows binaries in                                 user slash bin                                 and is for gaming tools so for example                                 also steam has the same problem for                                 example steam is in                                 especially with air slash games um if i                                 remember correctly                                 um yeah to work around but steam yeah                                 it isn't really a game                                 the other problem                                 is the games category in dot desktop                                 files                                 so the desktop menu um specification                                 from                                 fresa.org and specifies categories for                                 desktop files and yeah they are really                                 only                                 targeted towards games so there is a                                 category called games but in that                                 category of subcategories but                                 they only are yeah some game genres                                 which are                                 yeah um all not fitting for utilities                                 and                                 there also there isn't really a space                                 for gaming utilities                                 elsewhere in these categories so                                 yeah my proposal is to add a new gaming                                 um category and yeah just get rid of the                                 games category and                                 do it as a sub category                                 or at least add to the games um category                                 sub                                 category for utilities                                 but problems i don't really have time to                                 um yeah discuss this or                                 really get involved into it and it's                                 yeah                                 it's it's not really that important                                 after all but yeah it's                                 um yeah it's just worth mentioning that                                 um these days i have the feeling that                                 there are more and more gaming utilities                                 for people that game on linux but                                 traditionally when all these standards                                 for categories were made                                 that the only thing considered back then                                 were games and                                 not utilities for gaming                                 so yeah and just wanted to say that as                                 this was my talk                                 in case you have any questions about the                                 packages                                 or want to help out you can always                                 contact me                                 with my email and also i want to give a                                 quick attribution to the background                                 um it's from a deviant                                            proposal                                 it's the gradient motion team alex                                 marcus                                 gpl v                                                                   font is public domain                                 oh thank you stefan                                 for the talk and                                 now it's time for the q a                                 i see that most of the questions from                                 the irc and the etherpad are                                 already been answered so like if you                                 have                                 a few questions which haven't been                                 answered yet                                 please feel free to write them on the                                 irc or the etherpad                                 and we'll let                                 stefan answer them                                 um                                 okay i see most of the questions are                                 answered                                 and uh                                 let's end this talk uh any parting words                                 or anything you want to add where to                                 contact you                                 for any further                                 talk or confirmation so yeah you can                                 just uh write me an email i think that's                                 the easiest um                                 yeah stefan                                 dot com or you can just you know search                                 any of the packages                                 um on zalza and you will you will find                                 my email eventually                                 cool so thank you stefan for the                                 amazing talk and all the works with the                                 debian gaming utils                                 as well as jaden for directing this talk                                 so thank you and see you around
YouTube URL: https://www.youtube.com/watch?v=o9lbazFCGcY


