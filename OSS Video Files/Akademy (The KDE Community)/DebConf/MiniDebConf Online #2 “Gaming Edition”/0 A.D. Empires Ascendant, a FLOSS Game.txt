Title: 0 A.D. Empires Ascendant, a FLOSS Game
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Stanislas DOLCINI

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/16-0-ad-empires-ascendant-a-floss-game/

This talk will cover the basics about 0 A.D: Empires Ascendant, the game itself, the number of users, the team behind, the biggest mods, then we'll dive more into the things we use under the hood, from C++ libraries to the contributing platform and CI, hosting. 

Then I'll answer questions during the remaining time, and I can go more in depth about specific topics.

Room: Main
Scheduled start: 2020-11-21 18:30:00
Captions: 
	                              welcome again everybody                               and this time we have stanislas dolce                               with his talk                                                     a floss game please enjoy it                               all right so hello everyone                               so today i'm going to talk about the                               ready                               so we're gonna cover a few things                               uh i'm gonna start with the general                                presentation                                of the project for those of you that                                don't know the game                                uh then i'm gonna talk quickly about the                                engine behind                                                                                                 then we're gonna cover the tools we use                                um how we're hosted by like                                on the web and everything uh some lego                                matters                                uh then we'll talk about like                                recruitment and communication                                and we'll finish on funding and then i                                have like some other slides depending on                                the time we have to cover                                like the future and stuff like this so i                                really hope you                                enjoyed this presentation and let's get                                started                                uh so yeah we're going to start like                                with the project presentation as i said                                before                                so what is the ready s                                          users the team and the progress report                                um so                                                               based real-time strategy game                                which is kind of like hard to say                                so the idea is like you start with a                                simple military base                                and you expand and you grow and evolve                                to beat your enemies                                um it's free it's liber                                and it's open source um the game is                                already playable                                it should be available on most                                distributions although it's starting to                                be deprecated for                                because of python um so yeah it's                                available                                on mac linux windows and                                bsd                                the project started like                                             by it was made by players                                and modules from uh have buyers age of                                kings                                at the beginning they started this mod                                you can see on the on the right                                uh which is uh called romatoir um                                the idea is they just wanted like to add                                new functionality to the                                vampires game but after a while they                                just                                felt limited and they wanted to try                                something else                                so they started a project                                and they started everything from scratch                                in the hopes of making a game that would                                be                                like a japan bios um a lot of things                                happened between that time                                and                                                              much any more fuel to keep the project                                running so they decided to make it open                                source                                which is thanks to what i'm speaking to                                you all                                right now um the latest version is                                alpha                                               kenwood was one of the founders of zero                                eddy                                um so this game has like uh                                five combinables uh game modes so you                                can combine like conquest concave                                structures and everything                                so you can create different types of                                play depending on this                                like if you for instance you're not into                                much fighting you can just use the                                the wonder mode where you can just like                                build a wonder and the first one to                                build it                                wins um you can                                just so you have like single player                                against the ai                                um you don't have campaigns yet but                                we hope to be able to get this feature                                in the future                                um so you can also play uh in lan                                with your friends like if they are at                                your place you can like connect to them                                 uh and you can play uh in one if you                                 have their ips                                 or um through a multiplayer lobby                                 using uh stun and everything so you can                                 connect to them and                                 chat in a more modern fashion way                                 the game also features a random pressure                                 dural map                                 so you got the basic sets with like                                 uh i think like                                               and then there are maps that are                                 completely random and change everything                                 they just keep the beam                                 of the original one so let's say you                                 have like a desert map it will always be                                 a desert not but like                                 everything will change places um                                 when you play on the multiplayer lobby                                 in which you have to register you can                                 have a                                     rating it's a hello system so                                 just like chess                                 we also feature a map editor so you can                                 create your own maps                                 in the game we have like                                 some anonymous opting feedback so you                                 can give us uh                                 statistics about your computer and the                                 hardware it runs                                 so we can make better assumptions in                                 order to increase performance                                 uh                                 like we have like some kind of high                                 quality graphics as you can see                                 for an open source game um                                 it's something like we're really proud                                 of like we had a lot of artists uh                                 coming along                                 during the past years um and finally                                 the engine is completely modable so if                                 you don't like the setting of zero radio                                 and you think it should be                                 a medieval game or it should be in a                                 futuristic                                 time frame like starcraft you can                                 totally create your own game                                 um so yeah so the team since                                           we had over                                     staff members we have over                                                                                                    translators                                 currently there are officially                                    members                                 with the                                                                 the right                                 um so not all it might seem like a big                                 number but we are actually not that much                                 uh i actually would say i'd say we are                                 like                                 five or six at the same time                                 it's rare that all the members are                                 gathered in the same place and then                                 there are external contributors                                 which i mentioned before we have a lot                                 of motors who create their own modes                                 they have like different gameplay or                                 they add factions                                 uh for instance the chinese or um                                 some medieval factions                                 um so our users um                                 registered in the database we have like                                                                     k multiplayer accounts                                 around                                                            during the the uh                                 lockdown in the beginning of the year we                                 are at most like                                                         time                                 in the lobby generally it's                                 between                                             um so yeah there had been like uh                                                                                                 uh                                                                  and we can't track which is good                                 the downloads from the linux package                                 manager so they could be like                                 a lot more those are only the direct                                 downloads or the torrent downloads                                 as you can see on the top right uh we                                 have like                                                                                                        the opt-in feedback which are on linux                                                                    on mac and                                               so i'd say windows and linux are kind of                                 even so it's important for us to                                 continue supporting                                 both platforms as well as we can                                 um so yeah so for those of you that                                 don't know the game                                 um the last release was in                                      we're still working on a new one like                                 it's it's been the longest release since                                 longest time between the releases since                                 uh at least                                 uh ten years uh we had like some                                 some trouble so during that release um                                 there were like new three models we                                 added new maps                                 uh we added the support for mod io which                                 is                                 um a platform by the creators of moddb                                 which allows you to                                 upload and manage your modes so you can                                 download them directly                                 from the game um                                 you can now see like building ranges we                                 added diplomacy colors                                 we became jdpa gdpr compliant                                 by adding all of those terms and stuff                                 and we added a new function                                 the kushits which is basically ethiopia                                 since then we haven't stopped working on                                 the game                                 so on the programming hand we                                 we improve pathfinding and performance                                 uh it's still not                                 that drastic but it gets better we                                 improved water reflections                                 we added like uh msaa and fxaa                                 filters which allows you to remove the                                 jack lines on                                 on the object which was one of the                                 biggest downs of                                 our graphics engine uh we added support                                 for wayland                                 uh which was kind of uh broken in the                                                                                                         we added a lot of things to be able to                                 test on multiple platforms                                 um we finally                                 duplicated the render the fixed function                                 pipeline so if you have like a very old                                 hardware you might not be supported in                                 the next version                                 this will allow us to improve the lock                                 the look of the game and the performance                                 because we are going to be able to                                 support more                                 opengl extensions                                 finally we managed to um                                 update spidermonkey which is the                                 the library we used to to do                                 gs passing because we used js as a                                 as a scripting language which is kind of                                 uh uncommon                                 uh in game engines um those were big                                 upgrades                                 um because there had been a lot of                                 changes and a lot of breaking changes in                                 those versions                                 and um it's basically                                 that the library is basically bigger                                 than our code so                                 there are a lot of changes from our                                 stuff                                 we also fixed uh some problems with                                 memory leaks there were like some                                 problems on late games where the                                 game would just start eating your memory                                 on the outside uh we worked on new flora                                 and new fauna so you see probably new                                 animals on the maps                                 we also added a few new buildings as you                                 can see on the right                                 some for the ptolemies which are the                                 egyptians                                 around                                      we had a new maps we improved the unique                                 textures                                 uh we added more voice from for the                                 units so                                 um the voices are like um                                 as historical as we can make them                                 because they are their languages and                                 nobody speak them anymore                                 for instance the kushits uh speaking a                                 pattern                                 which is a dead language uh so we had to                                 do like some research in order to be                                 able to reproduce the voices                                 um we also added like new buildings for                                 all factions like                                 arsenal's which is the equivalent of the                                 workshop                                 um ranges and stables we improved the                                 icons                                 and we improved a lot of the units                                 equipment like new helmets and stuff                                 um so yeah now i'm going to talk a bit                                 about the engine                                 uh uh so we say i'm going right                                 ng we are not using godot we're not                                 using unity we're not using unreal so                                 everything is done is custom made                                 for us um so it's in c plus plus                                 uh and the scripting language is                                 javascript                                 uh all our assets are like xml or json                                 we use a lot of python and perl which                                 will be important in the future because                                 they are duplicating python too                                 um we use premac for bl system                                 a multiplayer shot is based on xmpp                                 so we have like a room and everything                                 you can enjoy all translation                                 are handled on chance effects through po                                 files we have a script that uploads them                                 daily and the graphics engine is on                                 opengl                                                                                                    shaders for older hardware                                 i'm not going to list them all but we                                 have like quite a few                                 third-party libraries um the most                                 important                                 was being spider-monkey as i mentioned                                 before                                 uh so now i'm going to talk about a bit                                 about the contribution management                                 um like how we                                 work with people and stuff um                                 so most of our work is now done on                                 fabricator                                 for those of you that didn't hear about                                 it because it's quite new                                 i think blender uses it too so basically                                 it's just a platform like gitlab or                                 github                                 which allows you to review post comments                                 and stuff                                 but you can also that the important part                                 here is the                                 the usage of the tool called arcanist                                 which is important in our case because                                 we're using svm                                 and we're using git mirrors so arcane                                 stores you                                 are to be                                 worsening system agnostic you can use                                 arcanist on both svn                                 and github and git to                                 submit your patches which is practical                                 because we                                 can't understand um undergo the                                 migration for now                                 um yeah so                                 so as i said like we're using svn we                                 have about                                 eight gigabytes of files um so yeah                                 um it's for historical reasons uh git                                 wasn't out in                                       um also it allows                                 you to clone like one of the specific                                 um directory while get you have to clone                                 the whole repository                                 which is practical because we have some                                 uh people who just wants to copy one                                 part of the code                                 um the biggest part the biggest reason                                 we're sticking with this vm right now                                 is the binary highs because git                                 quickly grits very big and we                                 want to be able to keep self-hosting our                                 solution                                 but we still offer to get mirrors on                                 gitlab and github                                 in case you prefer to use this                                 for backtracking we use track uh which                                 is made by                                 a company called edward um                                 so yeah it's a basically it's a basic                                 ticketing system you can just report                                 bugs there                                 uh we have about like                                          tickets open uh most of them are like                                 uh things we need to most of them are                                 blogs                                 um but there are also feature requests                                 and                                 stuff we use to keep track on the                                 missing task                                 on there there are like three pet peeves                                 sticker                                 type of tickets um mostly are like                                 graphic works on specific hardware                                 random freezes and permission bugs where                                 you just have an antivirus                                 preventing you from using the game's fly                                 it just happened                                 to me today                                 so yeah on track you also find the wiki                                 which will contains all the information                                 about how to build the game                                 and how the game is structure and                                 everything                                 um you also find the                                 initial game documents and                                 it's uh it's open so everybody can fix                                 stuff there like you can edit it                                 directly                                 and the advantage is to change our                                 version so we can like just roll back                                 and everything if there is a problem                                 or just be able to track what changed                                 over the time                                 um there are many guides about like                                 modding                                 map making um how to handle art files                                 and everything um                                 so now i'm going to talk about more                                 about the ci the continuous integration                                 um so all our patches uh runs through                                 koala which is a tool in python that                                 allows you to                                 well call all the tools like uh slint or                                 cpp check to check                                 for um well for linting errors                                 uh so for instance uh incorrect usage or                                 missing space is stuff like this this                                 way you don't have to report this                                 because it's automatically                                 posted on the differential um which is                                 the                                 uh the window we saw before on                                 fabricator where you can post your code                                 so yeah we just passed everything every                                 time a patch is submitted like                                 the wall content of the file is uh                                 checked for errors                                 for continuous integration we use                                 jenkins                                 um so jenkins for the suit of you that                                 don't know it is a                                 is an open source automation server                                 written in java                                 uh for those who don't know much about                                 this it's basically something that                                 will run bills of the game so you just                                 make a patch and he will try it and say                                 oh                                 it doesn't build so he will pass the                                 comment on fabricators and there is a                                 problem                                 or there were warnings about stuff                                 um so now i'm going to talk about                                 hosting a bit                                 so we only have one server uh everything                                 is done in virtual machines                                 um so among the virtual machines there                                 are like stuff like this                                 the ci machines which runs the build uh                                 we also                                 the server for the forum we asked the                                 lobby                                 uh the multiplayer xmpp lobby is also                                 on one of those virtual machines and                                 a lot of other stuff so as you can see                                 it's a                                 pretty strong machine um it's our                                 biggest                                 expense at the moment but so far we are                                 quite satisfied with that                                 um so now i'm gonna turn to more about                                 the legal stuff                                 so in                                                  came into place and we had to                                 review all the things we were doing and                                 most importantly all the things we were                                 doing wrong                                 uh so the first thing we wanted to know                                 was                                 whether we were gdpr compliant uh                                 so we had to like um look at all the                                 process data                                 we had uh on the lobby on the servers                                 and everything                                 to make sure like we had                                 the minimum data personal                                 relating to people which is the article                                 for                                 um and also that we                                 we had purpose uh trying to use that                                 data                                 because you could just like gather                                 everything which was                                 what most companies were doing at the                                 time just like take all the data i                                 don't care about it um                                 so we we we added a lot of stuff in the                                 game to be able to                                 um yeah so show you how your data is                                 processed                                 and everything so you can know like for                                 instance if you start the                                 the user report the thing that sends                                 hardware data to                                 us you will see a nice window that                                 explains                                 how the data is processed where is it                                 sent and what is it                                 what it is used for uh you can also                                 uh if you're unhappy or want to delete                                 your accounts larger company                                 asking for uh data election                                 in case you need it and then there was                                 like um                                 this american law because we are like                                 cross-platform but also cross-countries                                 and we had to make sure like um                                 there were no uses on the multiplayer                                 lobby under                                                                                                       parental guidance                                 so that's part of like all the uh the                                 things you have to look at before be                                 able to join the lobby                                 as you can see that's the lovely login                                 page                                 so as you can see you can't log in                                 before you have like                                 entered all the data and looked at the                                 term of service term of using the                                 privacy policy                                 so it's important like you know what                                 we are processing with your data there                                 isn't that much                                 but it's still your data so you have the                                 right to know                                 um so now i'm going to cover like um                                 recruitment and communication so                                 uh for uh we are most                                 social media so we're on twitter i'm a                                 student                                 instagram facebook reddit                                 but also on logged in although there                                 aren't much activity there                                 we also have a bandcamp which is                                 which is used for the music because um                                 our compositor omri lahat has like                                 uh some place where you can buy his                                 music                                 um and finally we you can find us and                                 talk to us                                 on craignet you can probably reach me on                                 discord as well but we have no official                                 channel there because of gdpr we don't                                 want to                                 force you to have your data processed so                                 you can                                 talk to us um and then we use envy                                 envision for                                 forum software which is like a                                 proprietary solution                                 um so yeah that's about it um i'll make                                 sure to be                                 to to make the presentation available so                                 you can click on all the links                                 um so yeah for for the recruitment                                 process we're not                                 um we just like look at how many                                 contribution                                 people make uh how far in time they stay                                 so we don't give commit access uh that                                 easily                                 but generally if you stick around for a                                 while and                                 how you are helpful and nice you should                                 get an invitation to the team                                 uh for us it's a bit different because                                 like um                                 well it's it's completely                                 it's different from from programmers you                                 you can't like                                 judge contribution value because it's                                 it's different                                 um you have a bunch of legal waivers to                                 sign                                 especially if you're an artist so that                                 we know                                 all the contributions you make are under                                 creative commons lessons                                 in order to not have problems in the                                 future                                 um before we used to have like uh                                 interviews uh now we just like do it on                                 a                                 on a contribution basis                                 um so we're still looking for people as                                 i said like                                 even if there are                                                    actually                                 in the team not all of them are                                 programmers and we're always looking for                                 new people to help us well deal with                                 things                                 we can't because we don't have the time                                 uh so                                 in the air height department they always                                 progress to be made                                 so we have um a bot called                                 uh scripted in javascript so                                 that's the default ai you can face                                 it's pretty strong if you not used to                                 the game                                 but it has a but a bit of caveats                                 so you can like pro trick it pretty                                 easily                                 recently somebody came and created a                                 patch for                                 machine learning and clustering so you                                 can plug a python script                                 to the game so you're able to                                 send comments to the game and well try                                 stuff out                                 um that's something we'd be interested                                 in expanding                                 so you can have like something more than                                 a proof of concept                                 then there is the engine stuff                                 pathfinding graphics networking                                 we we have a lot of things that aren't                                 threaded                                 at the moment like the pathfinder and                                 that's not the biggest bottleneck but                                 that's the big bottleneck at the end of                                 the game when                                 many units are moving um well the game                                 starts to lag so that's something                                 we should fix uh we could really use                                 some more unique testing                                 uh we already have some but it's not                                 complete                                 um there is a lot of work to be done                                 since we have                                 kind of quite a lot of legacy codes so                                 there is a lot of duplicated code                                 uh before like i don't know the recent                                 cpus plus                                 standards and everything so they                                 recorded like                                 all the functions that are now available                                 in the standard library                                 for devops we're looking for people to                                 help us like improve                                 like the continuous integration scripts                                 and everything                                 and we're also looking for reviewers                                 because we have um                                 quite of a stack of patches and                                 we're not able to review them all and                                 there are a lot of                                 things to check and everything and we                                 could use like people                                 uh well looking at the code and telling                                 us this is bad this is gonna break                                 or something                                 um so yeah finally uh on                                 funding um                                 so all our friends are managed by spi                                 which is a non-profit                                 organization that also supports debian                                 i think                                 so when you donate money it's                                 for us it's used to like mostly cover                                 the expenses of hosting                                 uh we might use it in the futures to pay                                 contractors                                 uh there hasn't been anyone yet but it's                                 something we                                 might consider in the future if we have                                 a lot more of money                                 and then we use it to reimburse a part                                 of                                 uh contributors going to heavens like                                 the fosdem                                 uh and all the other events we mostly do                                 events in france                                 because we're mostly a lot of us are                                 are french and can move the only                                 international events we do it's the                                 first time                                 so yeah as of                                                        like                                 it's very accurate we have uh                                     euros in the account                                 um yeah so about it                                 we considered doing a crowdfunding and                                 there was one that was done in                                       however it's like kind of failed um                                 we we still have the money but we don't                                 we didn't reach                                 any of the goals so we couldn't hire a                                 full-time programmer to                                 help us deal with well programming                                 matters                                 uh it took us like two years                                 to send all the perks to all the                                 the people um because that's something                                 you usually                                 don't think about when you start a                                 crowdfunding you just like                                 send a lot of books and then you realize                                 that                                 it's gonna take a lot of time to                                 process everything                                 so thank you for your time um                                 well i couldn't cancel answering                                 questions now i think                                 yeah thanks a lot stanislas                                 so we have the first question                                 is there a split screen in                                     um i'm not sure                                 uh split screen so you can see what                                 other people are doing or you can play                                 two at the same                                 time i'm not sure                                 yeah let's see if the person                                 is more specific                                 okay                                 yeah we we only have that yeah about the                                 split screen                                 but maybe it's related to                                 the screen mode playing the game i i                                 don't think we have                                 any kind of split screen so yeah i think                                 it's just um                                 well you have to play if you want to                                 play two people you would have to play                                 on two different computers                                 uh it's not um maybe i should have                                 specified this but it's not a turn-based                                 uh computer a tom tom based uh game so                                 you                                 like it's it's real time it's a                                 real-time strategy so you don't have                                 like                                 to wait for people and stuff                                 okay can you say something about the                                 python                                   situation okay uh i think i know who                                 asked that question um so i'm just gonna                                 cover                                 it so for the python migration um                                 we have like two uh main problems                                 um so first of all like spider monkey                                 is uh relying on python to build                                 and on python                                       uh as of now like for for the released                                 version we are at                                 spidermonkey                                                         uh we finally reached                                    but all of those like until                                    depends on python                                       we need to upgrade that library and                                 there was like a big                                 leap in code                                                            and the now that we                                 we press test it should get easier                                 the problem is we can't release any new                                 version on                                 any linux because of this because                                 like for instance on gen                                               question                                 popped for debian                                   if the if your package depends on iphone                                                                                                         it for the official repositories                                 so yeah we we have to to fix this                                 um then there is uh we have a few                                 screw-ups                                 uh most of them are like not really                                 useful                                 uh i mean like they can run python too                                 but at some point we'll have to migrate                                 them anyway                                 uh the most important one we have is the                                 translation checker which is this thing                                 that sends                                 po                                               and the the libraries we use to do this                                 are not supported in python                                        haven't been updated and everything                                 so we had to switch and                                 well there are probably some uh hidden                                 problems with this                                 and we need to make sure like everything                                 is okay but so far like we                                 the spider monkey thing took us like one                                 uh even two years to get a ride                                 so yeah that was one of the the biggest                                 loops                                 and we're still not done                                 [Music]                                 and related to the split screen in                                                                                                no no no uh i just would like to add                                 that                                 the person is saying that is related to                                 two players at the same time on the same                                 machine                                 yeah yeah so but yeah it's not it's not                                 possible                                 okay let's see if we have more questions                                 [Music]                                 well we have a comment thanks a lot for                                 your great work with                                                                     um so yeah                                 i can cover more stuff until we get new                                 questions                                 um so yeah a lot of great people asked                                 us                                 why we're not on uh on steam or well                                 whatever so                                 there is um there is a lot of                                 problems with like uh gpl v                                  uh we can't you can provide binaries                                 that work with team                                 so you can do a standalone thing but you                                 kind of like remove all the advantage                                 from being on steam because we can't use                                 anything from them um there is also a                                 big thing                                 from the reputation of the game um                                 unlike uh commercial games like we have                                 been around for a long time                                 uh                                                                    and the project is not done and going on                                 stuff like steam and microsoft store and                                 apple store would just like                                 if there was negative comments and stuff                                 uh plummet like all our reputation and                                 it would be                                 nearly impossible in the future to uh                                 revert back                                 to whatever we might however                                 uh consider like each dot io which has                                 become quite                                 popular these days so yeah we                                 might go there after a                                                  when that happens                                 um so yeah i think i covered this                                 we also have like um so the linux                                 problem was by then                                 the macros problem is well it's mac os                                 which is one problem                                 um but also like they have a lot of um                                 well idpi support we really need this we                                 don't have this in                                     we currently use pre-rendered fonts                                 which                                 might look very bad on high resolution                                 screens                                 and also like micros has been                                 threatening and                                 well it hasn't ever supported opengl but                                 now that's waiting to remove whatever                                 they supported                                 so we might have to resort to something                                 else                                 to be able to still well reach our                                 players there                                 i've heard of link which is a library                                 that translates                                 gl code to webgl calls to                                 vulcan which might be a solution else we                                 might have to write a complete                                 new renderer in order to be able to                                 support those platforms                                 um i think that's about it yeah i don't                                 have any                                 more states                                 okay and someone is asking if can you                                 share                                 yeah sure likes afterwards please                                 so let's wait if we have more questions                                 okay i think this is everything thank                                 you very much
YouTube URL: https://www.youtube.com/watch?v=9QcDZvpAM5Q


