Title: CppCon 2017: Walter E. Brown “Whitespace ≤ Comments ＜＜ Code”
Publication date: 2017-10-27
Playlist: CppCon 2017 Lightning Talks
Description: 
	http://CppCon.org
—
Presentation Slides, PDFs, Source Code and other presenter materials are available at: https://github.com/CppCon/CppCon2017
—
Lightning Talk
— 
Videos Filmed & Edited by Bash Films: http://www.BashFilms.com
Captions: 
	00:00:00,949 --> 00:00:09,599
my hope for this talk is that this will

00:00:04,650 --> 00:00:11,700
be the postdoctoral equivalent of the

00:00:09,599 --> 00:00:16,400
obligatory talk that all beginning

00:00:11,700 --> 00:00:18,900
programmers get on how to write comments

00:00:16,400 --> 00:00:22,470
maybe this will be a talk on how not to

00:00:18,900 --> 00:00:24,449
write comments you decide but over my as

00:00:22,470 --> 00:00:28,349
I say 50 years of programming I've

00:00:24,449 --> 00:00:32,210
occasionally often asked professional

00:00:28,349 --> 00:00:38,399
programmers how important are comments

00:00:32,210 --> 00:00:41,520
to you to your boss to your company to

00:00:38,399 --> 00:00:45,539
the industry and as you can perhaps tell

00:00:41,520 --> 00:00:48,030
from my title I have a huge spectrum of

00:00:45,539 --> 00:00:49,879
responses there is some consistency

00:00:48,030 --> 00:00:52,230
pretty much everybody agrees that

00:00:49,879 --> 00:00:56,579
comments are much less important than

00:00:52,230 --> 00:00:58,710
the code but where on the spectrum it

00:00:56,579 --> 00:01:01,440
falls you know some people think it's on

00:00:58,710 --> 00:01:03,149
a par with white space some people think

00:01:01,440 --> 00:01:09,630
it's a little more important than white

00:01:03,149 --> 00:01:11,580
space so I'd like to explore this just a

00:01:09,630 --> 00:01:15,200
little bit and and perhaps tell a war

00:01:11,580 --> 00:01:15,200
story or two or three along the way

00:01:15,799 --> 00:01:21,119
one of these topics that's briefly

00:01:18,780 --> 00:01:23,610
mentioned in an introductory course and

00:01:21,119 --> 00:01:26,100
rarely or never again discussed in any

00:01:23,610 --> 00:01:28,400
later class somebody should really bring

00:01:26,100 --> 00:01:31,350
it up with experienced programmers

00:01:28,400 --> 00:01:34,470
somebody said that to me but wanted not

00:01:31,350 --> 00:01:36,350
to be attributed and I said well seems

00:01:34,470 --> 00:01:39,810
it worth of lightning talk somewhere

00:01:36,350 --> 00:01:41,460
this seemed like a good place here's a

00:01:39,810 --> 00:01:43,649
classic I think we've pretty much

00:01:41,460 --> 00:01:49,140
everywhere seen this famously bad

00:01:43,649 --> 00:01:51,170
comment style there are worse ways to do

00:01:49,140 --> 00:01:51,170
it

00:01:58,890 --> 00:02:03,930
don't laugh now wait till you see it in

00:02:01,660 --> 00:02:03,930
real life

00:02:06,869 --> 00:02:13,510
Rob Pike wrote that in the I think late

00:02:09,970 --> 00:02:16,030
1980s if I remember correctly of course

00:02:13,510 --> 00:02:18,519
he was talking about see but you get the

00:02:16,030 --> 00:02:20,319
point I think it still stands you know I

00:02:18,519 --> 00:02:22,750
mean what are the excuses that we've

00:02:20,319 --> 00:02:25,269
heard or that we have given about

00:02:22,750 --> 00:02:29,290
comments I don't have time now to think

00:02:25,269 --> 00:02:31,180
about them I'll put them in later we

00:02:29,290 --> 00:02:33,489
don't have time for code reviews here

00:02:31,180 --> 00:02:36,220
like comments or you know only for code

00:02:33,489 --> 00:02:38,160
reviews programmers you know we

00:02:36,220 --> 00:02:40,690
programmers are always in a hurry right

00:02:38,160 --> 00:02:44,410
no time for planning no time for

00:02:40,690 --> 00:02:44,799
thinking let's start coding now all

00:02:44,410 --> 00:02:47,530
right

00:02:44,799 --> 00:02:49,120
so imagine a builder who says I don't

00:02:47,530 --> 00:02:50,560
have time for blueprints we're just

00:02:49,120 --> 00:02:55,299
gonna start nailing lumber for your

00:02:50,560 --> 00:02:58,209
house Wow that's the analogy is pretty

00:02:55,299 --> 00:03:01,239
close I think this is important so how

00:02:58,209 --> 00:03:03,430
do we make things better you know

00:03:01,239 --> 00:03:05,310
there's an oath that physicians take

00:03:03,430 --> 00:03:09,250
when they get their MDS

00:03:05,310 --> 00:03:11,980
first do no harm this is a paraphrase of

00:03:09,250 --> 00:03:15,519
the Hippocratic oath pretty mom nan na

00:03:11,980 --> 00:03:17,950
ka so I've discovered that much of the

00:03:15,519 --> 00:03:21,180
skill in writing good comments is in

00:03:17,950 --> 00:03:24,519
knowing when we shouldn't write them

00:03:21,180 --> 00:03:26,590
because a comment has no value and

00:03:24,519 --> 00:03:29,709
perhaps even negative value if it's

00:03:26,590 --> 00:03:31,930
wrong why because you know it's

00:03:29,709 --> 00:03:34,900
misinformation and it really affects our

00:03:31,930 --> 00:03:37,720
thinking about a piece of code and if

00:03:34,900 --> 00:03:43,150
it's wrong it's it's always wrong it

00:03:37,720 --> 00:03:47,590
just nags at us it distracts us but bad

00:03:43,150 --> 00:03:53,680
comments survive over time in a way that

00:03:47,590 --> 00:03:55,540
you know code just couldn't and it turns

00:03:53,680 --> 00:03:57,549
out that even a correct comment that I'm

00:03:55,540 --> 00:04:00,970
sure you all know this even the correct

00:03:57,549 --> 00:04:03,519
comment can be useless or distracting

00:04:00,970 --> 00:04:06,280
you know if it's if it duplicates what

00:04:03,519 --> 00:04:10,720
the code says if it's outdated stale we

00:04:06,280 --> 00:04:12,970
say sometimes and even bad grammar can

00:04:10,720 --> 00:04:14,400
affect our perception of the code it's

00:04:12,970 --> 00:04:17,970
supposed to comment

00:04:14,400 --> 00:04:22,570
so a comment that adds no value is waste

00:04:17,970 --> 00:04:24,729
so remove it or rewrite it pretty much

00:04:22,570 --> 00:04:32,370
my opinion those are your choices our

00:04:24,729 --> 00:04:32,370
choices come on

00:04:35,400 --> 00:04:43,419
this delay brought to you by PowerPoint

00:04:39,479 --> 00:04:47,139
so does that really help yes it does and

00:04:43,419 --> 00:04:49,150
much more than seems obvious I love this

00:04:47,139 --> 00:04:51,490
quote the code is clear enough that I

00:04:49,150 --> 00:04:53,830
don't need comments but the comments are

00:04:51,490 --> 00:04:58,930
so unclear I'm glad the code is there to

00:04:53,830 --> 00:05:01,690
help explain them you're laughing

00:04:58,930 --> 00:05:03,900
because it's happened to you right you

00:05:01,690 --> 00:05:03,900
betcha

00:05:04,240 --> 00:05:09,880
our family has a favorite author of

00:05:06,970 --> 00:05:12,130
fantasy the late David Eddings who wrote

00:05:09,880 --> 00:05:15,789
about his craft he says don't be afraid

00:05:12,130 --> 00:05:21,699
to throw away stuff that you know isn't

00:05:15,789 --> 00:05:24,190
good don't save junk just because it

00:05:21,699 --> 00:05:27,430
took you a long time to write it it's

00:05:24,190 --> 00:05:30,490
still junk and my response is do the

00:05:27,430 --> 00:05:31,990
math if you throw away the crap up a

00:05:30,490 --> 00:05:34,780
pardon me did I say that out loud the

00:05:31,990 --> 00:05:39,340
junk the average quality has just gone

00:05:34,780 --> 00:05:43,330
up right the low outliers are gone so

00:05:39,340 --> 00:05:47,139
the average has gone up instantly okay

00:05:43,330 --> 00:05:52,330
so then what well we would prefer to

00:05:47,139 --> 00:05:54,729
every comment adds value but first say

00:05:52,330 --> 00:05:59,409
everything as much as you can in the

00:05:54,729 --> 00:06:01,389
code and after that if there's something

00:05:59,409 --> 00:06:03,820
you still want to say that's probably a

00:06:01,389 --> 00:06:07,960
reasonable candidate at least for a

00:06:03,820 --> 00:06:11,169
comment for a useful comment but first

00:06:07,960 --> 00:06:15,070
among other things try to name it rather

00:06:11,169 --> 00:06:18,010
than explaining it right instead of

00:06:15,070 --> 00:06:21,370
explaining a poor name

00:06:18,010 --> 00:06:24,340
give it a better name one that's better

00:06:21,370 --> 00:06:26,650
self-describing for example put in

00:06:24,340 --> 00:06:27,720
assertions instead of commenting your

00:06:26,650 --> 00:06:32,590
assumptions

00:06:27,720 --> 00:06:36,580
that's Coke right if you have a big

00:06:32,590 --> 00:06:38,410
function don't comment sections chop it

00:06:36,580 --> 00:06:42,760
up into little functions with better

00:06:38,410 --> 00:06:45,550
names and call them alright so here are

00:06:42,760 --> 00:06:48,370
some ideas oh by the way did you catch

00:06:45,550 --> 00:06:51,510
that last one rewrite bad code somebody

00:06:48,370 --> 00:06:55,780
actually commented this is bad I know

00:06:51,510 --> 00:06:57,370
that's not helpful sorry but I also love

00:06:55,780 --> 00:07:01,270
what Kevin henny has to say on the

00:06:57,370 --> 00:07:02,920
subject a common fallacy especially on

00:07:01,270 --> 00:07:06,310
the part of managers in my opinion in my

00:07:02,920 --> 00:07:08,770
experience ah is to assume that authors

00:07:06,310 --> 00:07:11,410
of incomprehensible code and we all have

00:07:08,770 --> 00:07:13,690
colleagues like that right will somehow

00:07:11,410 --> 00:07:17,140
be able to express themselves lucidly

00:07:13,690 --> 00:07:19,600
and clearly in comments can't write code

00:07:17,140 --> 00:07:21,670
but can write comments what a wonderful

00:07:19,600 --> 00:07:25,900
what a wonderful piece of feedback right

00:07:21,670 --> 00:07:30,330
so when does a comment add value well

00:07:25,900 --> 00:07:33,580
when it says something that code cannot

00:07:30,330 --> 00:07:39,340
that's probably a very useful comment

00:07:33,580 --> 00:07:44,700
but please let's avoid prayers please

00:07:39,340 --> 00:07:48,270
God let this be enough this is for real

00:07:44,700 --> 00:07:52,620
these are not made-up examples and

00:07:48,270 --> 00:07:52,620
please also avoid apologies

00:07:56,840 --> 00:08:06,110
let's please avoid laments not made up

00:08:04,139 --> 00:08:17,270
for real

00:08:06,110 --> 00:08:20,070
artwork poetry especially Seussian

00:08:17,270 --> 00:08:23,780
replaces with spaces the braces in cases

00:08:20,070 --> 00:08:23,780
where braces in places cost faces

00:08:28,340 --> 00:08:32,419
comments that are useful once you know

00:08:30,780 --> 00:08:39,000
every three-quarters of a century

00:08:32,419 --> 00:08:45,409
Halley's Comet didn't make it up didn't

00:08:39,000 --> 00:08:45,409
make it up pop-culture references

00:08:55,140 --> 00:09:02,440
and then there's this one this is an old

00:08:58,029 --> 00:09:05,410
old old one and I gave you a clue

00:09:02,440 --> 00:09:07,899
it's from the era of punch cards imagine

00:09:05,410 --> 00:09:11,970
this on a punch card you pick it up

00:09:07,899 --> 00:09:13,810
rotate it and put it back in the deck

00:09:11,970 --> 00:09:16,709
suddenly you've turned off or on

00:09:13,810 --> 00:09:16,709
debugging

00:09:20,120 --> 00:09:28,650
Hey s sloth equals GU bed didn't

00:09:23,610 --> 00:09:32,310
everybody know that I used that in as an

00:09:28,650 --> 00:09:37,290
example in a course I taught 30 or 40

00:09:32,310 --> 00:09:39,090
years ago two freshmen basically and I

00:09:37,290 --> 00:09:43,440
gave that example I gave that

00:09:39,090 --> 00:09:45,690
explanation and almost instantaneously

00:09:43,440 --> 00:09:48,630
when the last word was out of my mouth a

00:09:45,690 --> 00:09:50,310
student in the front row her hand just

00:09:48,630 --> 00:09:53,520
shot up I thought her shoulder was gonna

00:09:50,310 --> 00:09:55,020
disk this list okay and she said wait

00:09:53,520 --> 00:09:56,730
wait wait a minute I said what what's

00:09:55,020 --> 00:09:58,200
the problem with that she says but if

00:09:56,730 --> 00:10:06,330
you turn the cart around the slashes

00:09:58,200 --> 00:10:07,530
will be backwards true story if you

00:10:06,330 --> 00:10:12,480
don't get it you haven't been

00:10:07,530 --> 00:10:14,580
programming long enough sorry so so the

00:10:12,480 --> 00:10:17,280
point of all this really is that we are

00:10:14,580 --> 00:10:19,470
the first right we are the first

00:10:17,280 --> 00:10:21,240
beneficiaries of our good comments we

00:10:19,470 --> 00:10:24,570
are the first victims of our bad

00:10:21,240 --> 00:10:26,430
comments if the code in the comments

00:10:24,570 --> 00:10:29,940
disagreed then both are probably wrong

00:10:26,430 --> 00:10:32,010
that's a fairly well-known saying the

00:10:29,940 --> 00:10:33,660
most useful comment is the one that

00:10:32,010 --> 00:10:34,260
isn't there that doesn't have to be

00:10:33,660 --> 00:10:36,180
written

00:10:34,260 --> 00:10:39,780
you know don't put your name in the damn

00:10:36,180 --> 00:10:42,090
code we have we have repositories we

00:10:39,780 --> 00:10:44,820
have source code control these days like

00:10:42,090 --> 00:10:46,890
for the last how many decades this isn't

00:10:44,820 --> 00:10:50,850
school you're not going to be graded per

00:10:46,890 --> 00:10:53,520
se right and I like this you should only

00:10:50,850 --> 00:10:58,410
need comments when you need to warn

00:10:53,520 --> 00:11:01,020
readers about some kludge Cluj just as

00:10:58,410 --> 00:11:07,650
on a road there are only arrows on parts

00:11:01,020 --> 00:11:09,270
with unexpectedly sharp curves think

00:11:07,650 --> 00:11:12,900
about driving when there's a road sign

00:11:09,270 --> 00:11:15,290
every five yards or meters if you drive

00:11:12,900 --> 00:11:15,290
in Europe

00:11:15,600 --> 00:11:20,550
so here are some things that you know

00:11:18,360 --> 00:11:22,200
one of the benefits of being retired is

00:11:20,550 --> 00:11:25,650
I get to read stuff I've always wanted

00:11:22,200 --> 00:11:28,830
to read so here are some sources that I

00:11:25,650 --> 00:11:31,230
recommend to you the one article that is

00:11:28,830 --> 00:11:33,480
in Spanish has since been translated I

00:11:31,230 --> 00:11:37,610
don't have the link to it but I'm sure

00:11:33,480 --> 00:11:41,570
you can find it and finally there's this

00:11:37,610 --> 00:11:41,570
just savor this one

00:11:52,690 --> 00:11:59,510
thank you all very much

00:11:54,780 --> 00:11:59,510

YouTube URL: https://www.youtube.com/watch?v=NLebZ3XT92E


