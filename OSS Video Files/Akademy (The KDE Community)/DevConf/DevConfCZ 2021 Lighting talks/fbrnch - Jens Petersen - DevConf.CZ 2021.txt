Title: fbrnch - Jens Petersen - DevConf.CZ 2021
Publication date: 2021-02-17
Playlist: DevConfCZ 2021 Lighting talks
Description: 
	
Captions: 
	00:00:08,480 --> 00:00:12,559
hello

00:00:09,519 --> 00:00:13,200
this is jens peterson in this lightning

00:00:12,559 --> 00:00:16,400
talk

00:00:13,200 --> 00:00:18,480
i'll show you f branch a command line

00:00:16,400 --> 00:00:21,760
tool

00:00:18,480 --> 00:00:25,760
that makes common workflows for

00:00:21,760 --> 00:00:25,760
fedora packages easier

00:00:25,840 --> 00:00:32,719
so i think i'll be demoing mostly

00:00:29,439 --> 00:00:38,800
creating a package review and also

00:00:32,719 --> 00:00:38,800
the parallel building of koji packages

00:00:43,120 --> 00:00:49,680
yeah so over here

00:00:46,480 --> 00:00:52,640
i'm actually packaging f branch um

00:00:49,680 --> 00:00:53,680
so i have a directory which really just

00:00:52,640 --> 00:00:56,480
contained the

00:00:53,680 --> 00:00:58,320
spec file on the table and i tried to

00:00:56,480 --> 00:01:02,160
prep it

00:00:58,320 --> 00:01:03,840
and then here i

00:01:02,160 --> 00:01:06,159
made a scratch build which was

00:01:03,840 --> 00:01:08,640
successful so now

00:01:06,159 --> 00:01:10,640
i'm ready to uh i think create the

00:01:08,640 --> 00:01:12,650
review

00:01:10,640 --> 00:01:15,739
so let's do that um

00:01:12,650 --> 00:01:15,739
[Music]

00:01:16,880 --> 00:01:20,000
i think it will uh

00:01:20,400 --> 00:01:27,280
do a few checks on the yeah it just runs

00:01:24,000 --> 00:01:30,560
rpm lint on the package and

00:01:27,280 --> 00:01:34,479
if that's good then we'll go ahead and

00:01:30,560 --> 00:01:34,960
upload it to koji and do a scratch build

00:01:34,479 --> 00:01:37,950
there

00:01:34,960 --> 00:01:39,200
which will then be successful get

00:01:37,950 --> 00:01:42,399
[Music]

00:01:39,200 --> 00:01:46,079
it to mozilla as a

00:01:42,399 --> 00:01:46,079
review request

00:01:47,600 --> 00:01:51,759
all right we'll leave that to run um

00:01:52,640 --> 00:01:56,799
over here um i have a directory with

00:01:56,079 --> 00:01:59,759
some

00:01:56,799 --> 00:02:00,240
ground packages in it and for some

00:01:59,759 --> 00:02:04,880
reason

00:02:00,240 --> 00:02:08,080
say i want to rebuild a few of these um

00:02:04,880 --> 00:02:12,640
so i'm gonna um just bump

00:02:08,080 --> 00:02:15,920
a few so i've decided i want to build um

00:02:12,640 --> 00:02:21,440
uh glomshow and glum terminal and

00:02:15,920 --> 00:02:25,760
gjs and vte291

00:02:21,440 --> 00:02:30,879
um so in rawhide i'm going to

00:02:25,760 --> 00:02:36,400
take shell on terminal

00:02:30,879 --> 00:02:41,040
well vte and gts

00:02:36,400 --> 00:02:50,720
okay um let's

00:02:41,040 --> 00:02:55,599
bump those um

00:02:50,720 --> 00:02:59,200
updates and

00:02:55,599 --> 00:02:59,200
for the other packages

00:03:03,760 --> 00:03:10,879
okay you can see this um commit to

00:03:07,440 --> 00:03:12,080
where it's actually bumped the package

00:03:10,879 --> 00:03:16,720
in here

00:03:12,080 --> 00:03:20,080
all right so now we'll try to um

00:03:16,720 --> 00:03:22,720
do a parallel build um i will just do a

00:03:20,080 --> 00:03:26,000
drag run this is just for

00:03:22,720 --> 00:03:26,959
demo purposes and uh we'll do it for

00:03:26,000 --> 00:03:30,000
rawhide

00:03:26,959 --> 00:03:33,280
and then we'll do the gnome shell

00:03:30,000 --> 00:03:36,799
uh terminal oops

00:03:33,280 --> 00:03:40,319
um uh ggs

00:03:36,799 --> 00:03:42,159
um dte291 all right and notice i

00:03:40,319 --> 00:03:44,799
may notice i put these deliberately in

00:03:42,159 --> 00:03:46,640
the reverse dependency order so let's

00:03:44,799 --> 00:03:51,599
see what uh

00:03:46,640 --> 00:03:53,920
if punch makes of this um

00:03:51,599 --> 00:03:55,840
so yeah it's not looking so starting the

00:03:53,920 --> 00:03:58,159
first dependency layer

00:03:55,840 --> 00:03:59,439
and it's building as we hoped uh it's

00:03:58,159 --> 00:04:03,840
building the

00:03:59,439 --> 00:04:06,879
lower dependencies of the travel ship

00:04:03,840 --> 00:04:10,239
gjs javascript runtime

00:04:06,879 --> 00:04:12,640
and vte

00:04:10,239 --> 00:04:14,640
and well this is a dry run so they don't

00:04:12,640 --> 00:04:16,799
have to build but anyway it's

00:04:14,640 --> 00:04:17,680
just giving the driver an output to

00:04:16,799 --> 00:04:20,560
those completed

00:04:17,680 --> 00:04:22,079
and they would normally wait for those

00:04:20,560 --> 00:04:26,840
to get into the builder

00:04:22,079 --> 00:04:29,199
and then proceed to build the other

00:04:26,840 --> 00:04:32,880
packages

00:04:29,199 --> 00:04:36,080
yeah and that was it

00:04:32,880 --> 00:04:40,720
um and over here the uh

00:04:36,080 --> 00:04:40,720
yeah the scratch ball is still running

00:04:40,840 --> 00:04:47,520
so yeah flora

00:04:44,000 --> 00:04:49,120
f branch should be in federal 34

00:04:47,520 --> 00:04:51,040
there's a good wrapper you can look at

00:04:49,120 --> 00:04:55,280
if you're interested

00:04:51,040 --> 00:04:58,320
it's under the gpl version 2

00:04:55,280 --> 00:05:01,360
license and yeah let me know how it

00:04:58,320 --> 00:05:11,840
works for you welcome feedback thank you

00:05:01,360 --> 00:05:11,840

YouTube URL: https://www.youtube.com/watch?v=O2-6rDuPMRA


