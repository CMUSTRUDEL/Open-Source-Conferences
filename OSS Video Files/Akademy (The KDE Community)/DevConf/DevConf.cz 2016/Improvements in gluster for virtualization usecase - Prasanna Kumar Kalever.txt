Title: Improvements in gluster for virtualization usecase - Prasanna Kumar Kalever
Publication date: 2016-02-11
Playlist: DevConf.cz 2016
Description: 
	Brief Abstract:

Gluster is a popular distributed scale-out filesystem, and KVM is the de-facto hypervisor on linux.
We will talk about setting-up hyper-converged environment using Gluster and KVM.
This will also cover improvements done in Gluster for virtualization use case in general and hyper-converged use case in particular.

Some of the improvements include:

- Enabling Qemu's Gluster block backend for multiple storage servers
- Enhance the network disk support for gluster in libvirt
- Bug fixes for the virtualization use case

- Introduce transport over Unix domain Socket for hyper-converged setup
- Bug fixes In RDMA transport
- Improvements for dynamic authentication

Talk will end with demo showcasing hyperconvergence with gluster.

Presentation: http://bit.ly/1RwJXFP
Captions: 
	00:05:44,759 --> 00:05:52,079
all right hello everybody I am present

00:05:48,489 --> 00:06:00,209
up tomorrow a liver how are you doing

00:05:52,079 --> 00:06:03,549
good yeah so so i'm here to introduce

00:06:00,209 --> 00:06:04,809
cluster and we have done some

00:06:03,549 --> 00:06:08,729
improvements in Leicester /

00:06:04,809 --> 00:06:11,879
virtualization use case and here we go i

00:06:08,729 --> 00:06:15,159
am going to give a basic introduction of

00:06:11,879 --> 00:06:17,649
glasser my colleague ramesh have

00:06:15,159 --> 00:06:21,459
introduced almost most of the bats but i

00:06:17,649 --> 00:06:24,789
am going to recap for some of you have

00:06:21,459 --> 00:06:30,809
came to the room new so I'll introduce

00:06:24,789 --> 00:06:34,529
to hyper convergence and why Jeff API is

00:06:30,809 --> 00:06:37,149
you know performs better done fuse and

00:06:34,529 --> 00:06:40,809
the glass of Q mu je fais pay

00:06:37,149 --> 00:06:44,649
integration that gives the high

00:06:40,809 --> 00:06:47,619
availability of servers and unix domain

00:06:44,649 --> 00:06:49,779
sockets rival so you brought recently

00:06:47,619 --> 00:06:53,800
some of the shouting futures that gear

00:06:49,779 --> 00:06:55,899
and boost the performance and yeah

00:06:53,800 --> 00:06:58,749
finally the dynamic authentication have

00:06:55,899 --> 00:07:01,389
few demos over here so I'm going to go a

00:06:58,749 --> 00:07:06,039
little faster please interrupt me if you

00:07:01,389 --> 00:07:08,349
feel anything is missing ok this is a

00:07:06,039 --> 00:07:11,639
glass surface so the basic building

00:07:08,349 --> 00:07:16,029
blocks of Gloucester is blocks it's not

00:07:11,639 --> 00:07:19,029
yep so we'll be having few nodes they

00:07:16,029 --> 00:07:21,489
say each of the node will have blocks in

00:07:19,029 --> 00:07:26,550
it we combine all these nodes to form a

00:07:21,489 --> 00:07:30,159
volume and yeah volume can be of

00:07:26,550 --> 00:07:31,989
replicate distribute and previously it

00:07:30,159 --> 00:07:35,319
was stripe and now we are not

00:07:31,989 --> 00:07:41,789
encouraging that here glasser can be

00:07:35,319 --> 00:07:45,399
accessed with the fuse if Jeff API and

00:07:41,789 --> 00:07:46,989
no yeah this is all about the

00:07:45,399 --> 00:07:48,579
introduction about cluster and this is

00:07:46,989 --> 00:07:53,980
hyper convergence hyper convergence is a

00:07:48,579 --> 00:07:56,380
box that has a compute storage net

00:07:53,980 --> 00:07:59,140
work and the virtualization pieces all

00:07:56,380 --> 00:08:01,990
put together a cipher conversions we

00:07:59,140 --> 00:08:06,630
have some management or on top of it we

00:08:01,990 --> 00:08:06,630
can with which we can manage the box

00:08:06,780 --> 00:08:17,920
okay the GF API and the fuse fuse so

00:08:15,310 --> 00:08:22,060
here is a key mu my application which

00:08:17,920 --> 00:08:24,400
stops to the colonel fuse layer and from

00:08:22,060 --> 00:08:26,440
there the fuse layer will talk to the

00:08:24,400 --> 00:08:30,820
middle send some information to the fuse

00:08:26,440 --> 00:08:33,040
diffuse and from diffuse its talk to the

00:08:30,820 --> 00:08:35,890
fuse library and from there from the

00:08:33,040 --> 00:08:38,620
client side it goes to the brick side

00:08:35,890 --> 00:08:40,900
and from the brick side it will finally

00:08:38,620 --> 00:08:48,070
reach to the file system that is XFS or

00:08:40,900 --> 00:08:51,550
whatever and leave Jeff API it's an API

00:08:48,070 --> 00:08:55,180
that applications can directly use like

00:08:51,550 --> 00:09:00,970
secure mu-um you can directly use it to

00:08:55,180 --> 00:09:02,500
communicate with the direct blocks so we

00:09:00,970 --> 00:09:07,200
have seen the performance numbers of

00:09:02,500 --> 00:09:11,920
flip Jeff API is almost sixty percent

00:09:07,200 --> 00:09:19,420
performs better than the fuse here is a

00:09:11,920 --> 00:09:22,870
graph and numbers okay now I'll tell you

00:09:19,420 --> 00:09:27,030
the the multi vol file server that we

00:09:22,870 --> 00:09:30,460
have recently solved now over what is a

00:09:27,030 --> 00:09:34,210
manager on on top of everything it's a

00:09:30,460 --> 00:09:36,160
GUI kind of thing it will send some

00:09:34,210 --> 00:09:39,640
information so using that we can add

00:09:36,160 --> 00:09:41,920
some information and like which volume

00:09:39,640 --> 00:09:45,190
to select what kind of volume to select

00:09:41,920 --> 00:09:47,620
and how many bricks what nodes and all

00:09:45,190 --> 00:09:50,500
that information can be passed to the VD

00:09:47,620 --> 00:09:53,410
sm mediation will convert it to an XML

00:09:50,500 --> 00:09:57,910
file and that will be given to the liver

00:09:53,410 --> 00:10:00,340
liberally libert converts this XML file

00:09:57,910 --> 00:10:03,190
that then here it has got from BDSM and

00:10:00,340 --> 00:10:05,050
it gives to the QM you as a command line

00:10:03,190 --> 00:10:06,920
arguments and these common level

00:10:05,050 --> 00:10:10,399
arguments are taken

00:10:06,920 --> 00:10:13,490
like multiple wall files or whatever the

00:10:10,399 --> 00:10:17,240
volume information and all will be given

00:10:13,490 --> 00:10:23,870
to will be will be used by the PM you to

00:10:17,240 --> 00:10:26,199
access the Lester okay so multi multi

00:10:23,870 --> 00:10:29,660
ball fell suffer so if i have a qm you

00:10:26,199 --> 00:10:32,570
command argument say like this and i

00:10:29,660 --> 00:10:37,250
have a uri syntax over there with the IP

00:10:32,570 --> 00:10:40,940
of 1070 some IP so I have an under node

00:10:37,250 --> 00:10:45,230
cluster glasser glass of pool from which

00:10:40,940 --> 00:10:48,670
I am just using this IP picking this IP

00:10:45,230 --> 00:10:53,899
and I am trying to load my application

00:10:48,670 --> 00:10:57,260
load the vm say so if say if this node

00:10:53,899 --> 00:10:59,089
goes down what's up no even we are

00:10:57,260 --> 00:11:00,560
having nodes of 100 under nodes and

00:10:59,089 --> 00:11:05,420
what's the point in having hundred notes

00:11:00,560 --> 00:11:09,529
over there so so the solution for this

00:11:05,420 --> 00:11:13,279
we need to we need to give their need to

00:11:09,529 --> 00:11:15,529
be like too many of high piece or the

00:11:13,279 --> 00:11:18,589
nodes information here that we pass to

00:11:15,529 --> 00:11:20,980
the qm you so that if one goal one note

00:11:18,589 --> 00:11:24,290
goes down it can access the other node

00:11:20,980 --> 00:11:29,990
so we have started fixing it from the

00:11:24,290 --> 00:11:31,279
lip JP PSI as I told you so from the

00:11:29,990 --> 00:11:36,019
glass aside I am coming from this side

00:11:31,279 --> 00:11:39,050
of it glass surface with Jeff API and we

00:11:36,019 --> 00:11:42,769
have fixed how to initialize the

00:11:39,050 --> 00:11:48,410
multiple servers in it and then we have

00:11:42,769 --> 00:11:50,660
come with the TM u so in the PM you we

00:11:48,410 --> 00:11:53,329
pass some arguments i am going to show a

00:11:50,660 --> 00:11:55,579
small demo of how to create a dust

00:11:53,329 --> 00:12:00,019
trusted pool and create a replica

00:11:55,579 --> 00:12:01,519
three-volume and then give me shut up

00:12:00,019 --> 00:12:03,760
with glass surface and Lewbert set up

00:12:01,519 --> 00:12:03,760
over here

00:12:16,480 --> 00:12:27,430
okay so i am taking 43 notes cluster

00:12:23,680 --> 00:12:34,000
node 3 cluster nodes and i am trying to

00:12:27,430 --> 00:12:44,440
create a trusted pool out of it so I p 1

00:12:34,000 --> 00:12:46,120
IP 2 3 there we go it's a glacier food

00:12:44,440 --> 00:12:48,519
now I am trying to create a glass of

00:12:46,120 --> 00:12:52,680
volume named sample with replica

00:12:48,519 --> 00:12:52,680
three-year configuration

00:13:04,480 --> 00:13:07,920
I'm going to start the volume

00:13:15,300 --> 00:13:18,170
mounted

00:13:21,050 --> 00:13:40,040
it's mounted mommy yes yes okay this

00:13:38,140 --> 00:13:43,820
previously what we have done is we have

00:13:40,040 --> 00:13:46,430
set up a glass of pool with the replica

00:13:43,820 --> 00:13:52,550
three years later now i am trying to

00:13:46,430 --> 00:13:55,730
configure the qm you so here are the

00:13:52,550 --> 00:14:03,709
patches that send for GMU for

00:13:55,730 --> 00:14:06,339
availability of multiple servers you can

00:14:03,709 --> 00:14:06,339
find them easily

00:14:09,570 --> 00:14:21,300
conjugating it for the x86 enabling with

00:14:16,450 --> 00:14:21,300
the glass surface and some debug options

00:14:21,779 --> 00:14:28,810
and in the lipid side so that is all

00:14:26,980 --> 00:14:32,290
about configuration configuring the Q mu

00:14:28,810 --> 00:14:34,740
and the lipid side we have a few patches

00:14:32,290 --> 00:14:38,529
I'm going to tell what they are doing

00:14:34,740 --> 00:14:46,320
before that let us configure the live

00:14:38,529 --> 00:14:51,390
bird with glass surface storage driver

00:14:46,320 --> 00:14:51,390
and we installed

00:14:52,370 --> 00:14:57,740
now I am going to tell you show you a

00:14:54,950 --> 00:15:03,520
small demo how it's going to be useful

00:14:57,740 --> 00:15:03,520
to have a multiple of all servers

00:15:12,630 --> 00:15:15,620
able to see

00:15:16,990 --> 00:15:27,610
basically I have recorded with the high

00:15:21,580 --> 00:15:31,500
resolution sorry for that so basically

00:15:27,610 --> 00:15:35,050
what I am trying to do here is trying to

00:15:31,500 --> 00:15:37,779
invoke it with the URL syntax and yeah

00:15:35,050 --> 00:15:49,270
since the server is available here it's

00:15:37,779 --> 00:15:51,930
time to boot properly yeah it has booted

00:15:49,270 --> 00:15:51,930
successfully

00:16:05,779 --> 00:16:15,779
Here I am trying to kill one of the node

00:16:09,529 --> 00:16:18,509
in the glass of volume so if it was

00:16:15,779 --> 00:16:20,910
Eurasian tax that we have used it

00:16:18,509 --> 00:16:23,910
previously the same command so here I

00:16:20,910 --> 00:16:25,499
this this node is disconnected now I am

00:16:23,910 --> 00:16:28,939
executing the same command here and I

00:16:25,499 --> 00:16:32,609
get a transport endpoint not connected

00:16:28,939 --> 00:16:35,699
so even though we have a big replica

00:16:32,609 --> 00:16:38,999
three set up and it's it's unable to

00:16:35,699 --> 00:16:42,179
find us our over them now this is a new

00:16:38,999 --> 00:16:45,720
Jason syntax introduced in kmu the

00:16:42,179 --> 00:16:48,480
patches are not yet merged it has all

00:16:45,720 --> 00:16:50,569
the information about the next slide

00:16:48,480 --> 00:16:54,089
shows you the detailed information about

00:16:50,569 --> 00:16:59,119
all the options that it was using here

00:16:54,089 --> 00:17:01,199
and yeah the the first the first IP got

00:16:59,119 --> 00:17:02,850
it was not connected so it got a

00:17:01,199 --> 00:17:06,240
transport endpoint not connected and it

00:17:02,850 --> 00:17:09,289
goes to the next second node address and

00:17:06,240 --> 00:17:09,289
in then it puts

00:17:16,540 --> 00:17:23,000
okay what do you have seen is we observe

00:17:20,000 --> 00:17:26,209
the holder you're a shindig and its

00:17:23,000 --> 00:17:40,790
demerits and then we went by event for a

00:17:26,209 --> 00:17:45,800
new Jason syntax ok ok here is here is a

00:17:40,790 --> 00:17:49,460
Jason actually the liver converts the

00:17:45,800 --> 00:17:52,340
URLs the xml information that will be

00:17:49,460 --> 00:17:55,730
given by the radiation to this kind of

00:17:52,340 --> 00:17:58,490
commands and here we see previously we

00:17:55,730 --> 00:18:01,429
have seen the Jason syntax that is given

00:17:58,490 --> 00:18:03,020
as an input for the Q mu and we have all

00:18:01,429 --> 00:18:06,260
the information about where is the

00:18:03,020 --> 00:18:08,450
various your image and how many servers

00:18:06,260 --> 00:18:11,360
we are using in the node and we can put

00:18:08,450 --> 00:18:12,770
as many servers as you want and you can

00:18:11,360 --> 00:18:14,600
use their what transport type you are

00:18:12,770 --> 00:18:19,070
going to use there and you can use a

00:18:14,600 --> 00:18:21,920
image path and volume name and all now

00:18:19,070 --> 00:18:25,220
in the lib verte the path the recent

00:18:21,920 --> 00:18:27,530
patches that you have seen libvirt has

00:18:25,220 --> 00:18:34,790
the badges for the formatter that

00:18:27,530 --> 00:18:38,350
exactly formats the information ok this

00:18:34,790 --> 00:18:38,350
this came from yep

00:18:58,650 --> 00:19:04,810
it's like a you have AG Lester volume

00:19:02,080 --> 00:19:09,100
with so-and-so needle and you have an

00:19:04,810 --> 00:19:13,770
address to it I mean it's an IP or so

00:19:09,100 --> 00:19:13,770
you have is the ability of the

00:19:37,380 --> 00:19:45,370
correction anyway when you see that so I

00:19:43,510 --> 00:19:50,800
I will answer your question the next

00:19:45,370 --> 00:19:53,560
slide so you you got a formatter and a

00:19:50,800 --> 00:19:57,850
parser it's not just the demo will

00:19:53,560 --> 00:19:59,650
answer your question me so yeah in

00:19:57,850 --> 00:20:04,300
libert will say we have a parser and

00:19:59,650 --> 00:20:06,850
formatter that that passes and formats

00:20:04,300 --> 00:20:09,190
this kind of information when it is like

00:20:06,850 --> 00:20:10,990
more like when we take snapshots and all

00:20:09,190 --> 00:20:16,080
back in from baton file information will

00:20:10,990 --> 00:20:19,180
be stored yeah so you're from VD sm side

00:20:16,080 --> 00:20:21,390
yeah this kind of xml will be generated

00:20:19,180 --> 00:20:25,350
and you have the more number of

00:20:21,390 --> 00:20:25,350
available servers over here

00:20:27,850 --> 00:20:35,289
okay i am going to show a demo which

00:20:31,450 --> 00:20:38,490
demonstrates using libert worse to start

00:20:35,289 --> 00:20:42,220
a vm and domain xml understanding and

00:20:38,490 --> 00:20:45,660
when we create and snapshot how it back

00:20:42,220 --> 00:20:45,660
stores all the information

00:21:10,030 --> 00:21:13,030
nope

00:21:18,529 --> 00:21:21,529
sorry

00:21:30,480 --> 00:21:35,690
sorry for the interruption you have slow

00:21:33,299 --> 00:21:35,690
network

00:21:42,750 --> 00:21:48,180
so previously we have configured the

00:21:45,060 --> 00:21:55,620
libvirt the same one I am trying to show

00:21:48,180 --> 00:22:03,870
it here so the one which is installed in

00:21:55,620 --> 00:22:09,630
the local machine with the patches so we

00:22:03,870 --> 00:22:14,340
have absolutely no vm running I'm going

00:22:09,630 --> 00:22:16,590
to use this XML with all the knob back

00:22:14,340 --> 00:22:21,890
room walls and servers here with the

00:22:16,590 --> 00:22:21,890
transport and the volume information

00:22:30,840 --> 00:22:38,510
let's start the vm with let's define

00:22:34,920 --> 00:22:38,510
this xml and start the vm

00:22:49,389 --> 00:22:58,589
okay so i'm typing the XML which which

00:22:53,979 --> 00:23:02,469
got actually loaded so here are the same

00:22:58,589 --> 00:23:05,369
server information so the blesser server

00:23:02,469 --> 00:23:10,479
information so we are using the

00:23:05,369 --> 00:23:14,679
gloucester lib gfap I wait so and so

00:23:10,479 --> 00:23:17,349
image and with the this is a node

00:23:14,679 --> 00:23:19,989
information with IP and you can also

00:23:17,349 --> 00:23:26,320
have the transport type it may be an

00:23:19,989 --> 00:23:31,359
RDMA uniques or TCP so I put into the

00:23:26,320 --> 00:23:41,649
TCP side all of them so now i am trying

00:23:31,359 --> 00:23:44,919
to create a backer backing fight so this

00:23:41,649 --> 00:23:47,339
is my image so this is the original

00:23:44,919 --> 00:23:47,339
image

00:24:10,620 --> 00:24:19,410
okay here i am trying to create this

00:24:13,820 --> 00:24:23,760
image name the new snap cukup do with

00:24:19,410 --> 00:24:26,970
the Jason way so if one one of these

00:24:23,760 --> 00:24:28,920
service goes down so initially we have

00:24:26,970 --> 00:24:33,720
canceled this we have killed the glass

00:24:28,920 --> 00:24:50,760
study here so it tries to take from here

00:24:33,720 --> 00:24:54,770
and it will create a back inside there

00:24:50,760 --> 00:24:54,770
we are we have this new file created

00:25:02,580 --> 00:25:11,909
okay so so this image has a so this is

00:25:08,250 --> 00:25:14,669
an image with the baton fight this is a

00:25:11,909 --> 00:25:19,070
baton five use here the federer 23 to

00:25:14,669 --> 00:25:22,549
count 2 and the with that the new snap

00:25:19,070 --> 00:25:22,549
was created

00:25:27,789 --> 00:25:32,879
it is the same information of federal 23

00:25:44,810 --> 00:25:58,350
sorry can you repeat the question yeah

00:25:55,410 --> 00:26:00,060
it goes and checks and whichever node

00:25:58,350 --> 00:26:02,910
it's available it's try to go for the

00:26:00,060 --> 00:26:05,400
first service is available and if that

00:26:02,910 --> 00:26:22,610
fails and goes to the next and goes on

00:26:05,400 --> 00:26:26,190
under that that we need to do from the

00:26:22,610 --> 00:26:29,490
oversight over side the actually this

00:26:26,190 --> 00:26:32,220
information was created from the XML if

00:26:29,490 --> 00:26:34,140
if it the XML has that information the

00:26:32,220 --> 00:26:36,720
patches are able to create the Jason

00:26:34,140 --> 00:26:38,880
syntax and it will have as number of you

00:26:36,720 --> 00:26:43,820
know addresses of the all the nodes and

00:26:38,880 --> 00:26:43,820
it will try to rope yes

00:27:03,740 --> 00:27:20,370
yeah yeah actually a queue jameelah of

00:27:15,620 --> 00:27:22,290
initializes the lead Jeff API the glf se

00:27:20,370 --> 00:27:25,800
need with all the service that you have

00:27:22,290 --> 00:27:28,650
given here so if you don't provide the

00:27:25,800 --> 00:27:31,080
information for the PM you if you don't

00:27:28,650 --> 00:27:32,580
input the information to further GMU the

00:27:31,080 --> 00:27:34,560
lib gfap i will not be initialized with

00:27:32,580 --> 00:27:50,810
those of the those addresses of the

00:27:34,560 --> 00:27:50,810
notes yes

00:28:18,130 --> 00:28:27,080
basically larrya so from my observation

00:28:23,360 --> 00:28:29,750
like jpp I has don't have that

00:28:27,080 --> 00:28:33,380
intelligence to get all the service

00:28:29,750 --> 00:28:36,679
information so we need to provide it

00:28:33,380 --> 00:28:39,500
with all the volumes externally the way

00:28:36,679 --> 00:28:43,059
maybe the qm you command and then it

00:28:39,500 --> 00:28:43,059
gets initialized with those IDs

00:28:53,380 --> 00:29:02,160
okay so i am going to create a snapshot

00:28:55,980 --> 00:29:02,160
with the these three IPS as you know

00:29:03,090 --> 00:29:10,270
information for that external for taking

00:29:07,000 --> 00:29:12,580
the external snapshot so here is my snap

00:29:10,270 --> 00:29:15,070
xml that i am going to use when I am

00:29:12,580 --> 00:29:17,550
trying to create an XML trying to create

00:29:15,070 --> 00:29:17,550
a snapshot

00:29:28,450 --> 00:29:34,030
this is how i create a snapshot i use

00:29:31,870 --> 00:29:42,190
the xml file that i have shown you

00:29:34,030 --> 00:29:46,120
before and there we go we have a

00:29:42,190 --> 00:29:49,480
snapshot there and this snapshot

00:29:46,120 --> 00:29:54,450
information all the baton change

00:29:49,480 --> 00:30:01,570
information will be loaded into the xml

00:29:54,450 --> 00:30:05,910
if you dump the xml here we have all the

00:30:01,570 --> 00:30:08,410
information so this is our new image and

00:30:05,910 --> 00:30:11,680
the backing store for that image is our

00:30:08,410 --> 00:30:13,180
old federal 23 so we have all the

00:30:11,680 --> 00:30:15,660
information about the service for each

00:30:13,180 --> 00:30:15,660
given

00:30:22,720 --> 00:30:25,870
that's what

00:30:29,360 --> 00:30:38,570
so we have seen how to create a or start

00:30:33,470 --> 00:30:42,380
a vm using bush and we understand some

00:30:38,570 --> 00:30:44,090
parts of domain xml how the glass of

00:30:42,380 --> 00:30:47,690
information is put into it and we

00:30:44,090 --> 00:30:53,660
created a snapshot with the battle store

00:30:47,690 --> 00:30:57,760
be a minute so what are the improvements

00:30:53,660 --> 00:31:00,890
that we found is we we have done is like

00:30:57,760 --> 00:31:05,120
so since we have used leather whip Jeff

00:31:00,890 --> 00:31:06,710
API and it's like parts through number

00:31:05,120 --> 00:31:11,150
of servers and connect to the first

00:31:06,710 --> 00:31:13,640
available so we have so truly jtapi we

00:31:11,150 --> 00:31:16,220
have a less context switches and the

00:31:13,640 --> 00:31:18,559
less copying of information from user

00:31:16,220 --> 00:31:21,350
space to colonel and then to the day of

00:31:18,559 --> 00:31:25,370
use and then going back to the brick and

00:31:21,350 --> 00:31:29,030
now we have a better availability so I'm

00:31:25,370 --> 00:31:30,830
going to cover the third point next so

00:31:29,030 --> 00:31:33,890
we have introduced the unique domain

00:31:30,830 --> 00:31:37,030
sockets so it goes like this so this is

00:31:33,890 --> 00:31:39,950
the client side of glass surface and

00:31:37,030 --> 00:31:43,400
there we have the blaster d running it's

00:31:39,950 --> 00:31:45,530
a brick brick process sorry glass city

00:31:43,400 --> 00:31:47,540
is a man management process and here we

00:31:45,530 --> 00:31:50,360
have a glass roof SD which is a brick

00:31:47,540 --> 00:31:52,880
process now all the volume related

00:31:50,360 --> 00:31:57,140
information will be sent from will be

00:31:52,880 --> 00:31:59,150
shade will be taken care by the glass

00:31:57,140 --> 00:32:00,799
ready generally the glass sturdy and

00:31:59,150 --> 00:32:03,679
glass surface d will be in the same

00:32:00,799 --> 00:32:05,480
machine so in all the notes Lester d

00:32:03,679 --> 00:32:09,290
will be running and in the nodes which

00:32:05,480 --> 00:32:11,840
have the bricks plus r f st villa so

00:32:09,290 --> 00:32:15,679
then a management information that that

00:32:11,840 --> 00:32:18,140
that will be happening frequently will

00:32:15,679 --> 00:32:20,450
be through like glass sturdy and glass

00:32:18,140 --> 00:32:23,870
surface communication this bridge that

00:32:20,450 --> 00:32:26,960
is a management and the brick process

00:32:23,870 --> 00:32:29,059
all the data like if you have a mount

00:32:26,960 --> 00:32:31,360
here if you write something go here so

00:32:29,059 --> 00:32:34,850
all the data will be same through this

00:32:31,360 --> 00:32:35,980
this you know communication bridge to

00:32:34,850 --> 00:32:43,100
the glass glass

00:32:35,980 --> 00:32:45,710
now in case of say hi / convergence now

00:32:43,100 --> 00:32:49,550
everything is in the same box the client

00:32:45,710 --> 00:32:52,820
and the brick is on the same point that

00:32:49,550 --> 00:32:55,520
means basically your your BM image and

00:32:52,820 --> 00:32:57,590
from where you want to run the QM you

00:32:55,520 --> 00:33:00,440
the application will be resetting on the

00:32:57,590 --> 00:33:02,540
same same side so instead of having

00:33:00,440 --> 00:33:05,030
generally the TCP connection between

00:33:02,540 --> 00:33:06,890
these two where the real data will get

00:33:05,030 --> 00:33:08,330
transferred it's better to have a I'm

00:33:06,890 --> 00:33:13,250
exhuming sockets which will boost our

00:33:08,330 --> 00:33:15,980
performance and here we have seen the

00:33:13,250 --> 00:33:21,800
performance and an average of thirteen

00:33:15,980 --> 00:33:26,330
percent with this change you can see

00:33:21,800 --> 00:33:28,940
more information over here like the

00:33:26,330 --> 00:33:32,390
right performance at 128 bytes which is

00:33:28,940 --> 00:33:33,740
a normal case if you see this we have an

00:33:32,390 --> 00:33:36,920
almost of thirteen percent of

00:33:33,740 --> 00:33:39,140
improvement in though right you have

00:33:36,920 --> 00:33:47,780
improvements in other areas like read

00:33:39,140 --> 00:33:49,760
really I know let's see some demo which

00:33:47,780 --> 00:33:52,670
shows the unique Stroman sockets in

00:33:49,760 --> 00:33:55,070
action so we will try to start a volume

00:33:52,670 --> 00:33:57,470
here we mount the volume in a node where

00:33:55,070 --> 00:34:00,730
the brick is in local and we observe the

00:33:57,470 --> 00:34:00,730
UDS in action

00:34:11,510 --> 00:34:18,740
so we have a pool lesser pull up for two

00:34:14,690 --> 00:34:26,690
nodes so there are no volumes in a

00:34:18,740 --> 00:34:31,690
cluster trying to create a volume the

00:34:26,690 --> 00:34:31,690
UDS with the two nodes

00:34:38,030 --> 00:34:41,409
starting the volume

00:34:46,050 --> 00:34:50,300
so you see the volume information

00:34:56,440 --> 00:35:01,390
so the second side I'm in the node to

00:34:58,780 --> 00:35:03,400
the the one which was doing I was doing

00:35:01,390 --> 00:35:08,849
previously is an old one and this is an

00:35:03,400 --> 00:35:11,800
ode to where I see the same information

00:35:08,849 --> 00:35:15,730
and switching to the node 1 and see the

00:35:11,800 --> 00:35:17,470
lesser fsj running here it's running

00:35:15,730 --> 00:35:28,450
here because i am using the two bricks

00:35:17,470 --> 00:35:34,450
one from each so so this is so yeah so

00:35:28,450 --> 00:35:39,250
okay so this node the one dot 86 has a

00:35:34,450 --> 00:35:44,160
as a brick be one can see that

00:35:39,250 --> 00:35:44,160
information here and this has a brick to

00:35:51,050 --> 00:35:59,030
I am just checking the unix demand

00:35:53,300 --> 00:36:03,350
sockets connections now continuously in

00:35:59,030 --> 00:36:05,360
the same node I am trying to mount the

00:36:03,350 --> 00:36:07,940
volume so that the brick two will be

00:36:05,360 --> 00:36:10,390
local to it and there we go we got it

00:36:07,940 --> 00:36:10,390
connected

00:36:17,390 --> 00:36:21,830
what we have seen is we mounted a volume

00:36:20,060 --> 00:36:29,750
in a node where the brick is local and

00:36:21,830 --> 00:36:32,900
observe you dias okay now the the third

00:36:29,750 --> 00:36:37,430
part is improvements done with the UNIX

00:36:32,900 --> 00:36:41,030
domain sockets that's not all we are

00:36:37,430 --> 00:36:44,630
also trying to use the same unique

00:36:41,030 --> 00:36:49,730
swimmin sockets like for the DHT if the

00:36:44,630 --> 00:36:52,940
brickies it has some real sticks that it

00:36:49,730 --> 00:36:55,550
can find it cannot automatically find

00:36:52,940 --> 00:36:59,410
that the brick is local and it's going

00:36:55,550 --> 00:37:03,020
to do them going to switch with UDS and

00:36:59,410 --> 00:37:05,420
hear the shouting shouting is like we

00:37:03,020 --> 00:37:09,050
have a considered we have a file of 84

00:37:05,420 --> 00:37:11,000
mb and it it will get splitted into each

00:37:09,050 --> 00:37:13,850
like whatever configure blog says that

00:37:11,000 --> 00:37:15,890
we have given now this 16 mb is a basic

00:37:13,850 --> 00:37:19,300
block size i am going to go show you a

00:37:15,890 --> 00:37:23,090
demo of it so now 84 mb is splitted into

00:37:19,300 --> 00:37:30,290
16 mb files now 16 plus 16 plus 16 plus

00:37:23,090 --> 00:37:33,380
16 plus 4 and this file is a main file

00:37:30,290 --> 00:37:35,300
and still it will be 16 mb and that's

00:37:33,380 --> 00:37:37,580
what you can see it from the mount point

00:37:35,300 --> 00:37:40,760
and the other files will be in the dot

00:37:37,580 --> 00:37:43,370
chart which are ignore i mean which will

00:37:40,760 --> 00:37:47,560
be hidden files with the GF ID and it

00:37:43,370 --> 00:37:51,590
its index so we have the index like

00:37:47,560 --> 00:37:54,110
starts from a the GFI TJ faerie is a

00:37:51,590 --> 00:37:58,730
unique for every file and we have index

00:37:54,110 --> 00:38:04,040
1 2 3 4 5 and since this is for mb and

00:37:58,730 --> 00:38:07,160
we have them so shouting splits the file

00:38:04,040 --> 00:38:10,460
and this splitted file each file will be

00:38:07,160 --> 00:38:13,460
actor normally for the DHT and its tries

00:38:10,460 --> 00:38:16,700
to split the files everywhere and so

00:38:13,460 --> 00:38:19,220
that we can use the bricks in an

00:38:16,700 --> 00:38:21,470
efficient way all the bricks so we have

00:38:19,220 --> 00:38:21,890
lot of problems that gets all I am going

00:38:21,470 --> 00:38:33,220
to explain

00:38:21,890 --> 00:38:33,220
you next so this is a demo of it

00:38:47,720 --> 00:38:54,940
so I'm going to create a volume with

00:38:51,140 --> 00:38:54,940
only brick only one brick

00:38:59,880 --> 00:39:06,420
so we need to the body for this future

00:39:02,460 --> 00:39:09,480
is off we need to turn it on and by

00:39:06,420 --> 00:39:12,980
default the shark's eyes is 4 mb and i

00:39:09,480 --> 00:39:12,980
am setting it to 16 mb

00:39:22,579 --> 00:39:32,509
we have time to mount it we have not

00:39:27,869 --> 00:39:32,509
started the volume it

00:39:43,079 --> 00:39:47,579
so forth from the brick side we have

00:39:45,930 --> 00:39:50,670
this end from the mount side we don't

00:39:47,579 --> 00:39:55,229
see ok I am trying to create a file here

00:39:50,670 --> 00:39:59,789
from the mount side so this file is of

00:39:55,229 --> 00:40:02,579
size 84 mb name 51 and from mount mount

00:39:59,789 --> 00:40:05,700
side we you still see the only 51 there

00:40:02,579 --> 00:40:07,890
are no shots shots that we can see from

00:40:05,700 --> 00:40:15,769
the mount side if you see the size of

00:40:07,890 --> 00:40:24,979
the file it's 84 mb from the bricks I'd

00:40:15,769 --> 00:40:24,979
just still the main file is 16 mb and

00:40:27,589 --> 00:40:37,890
see the GF ID is here so the files f5f

00:40:33,749 --> 00:40:40,859
ones J Phi D is this so with that I can

00:40:37,890 --> 00:40:47,279
see the Sharks created and with the

00:40:40,859 --> 00:40:54,029
respective indexes so I see this shards

00:40:47,279 --> 00:40:56,279
over here five shots the last 14 mb I'm

00:40:54,029 --> 00:40:59,039
saying changing the shot size 24 mb

00:40:56,279 --> 00:41:00,569
again and I am trying to upend the same

00:40:59,039 --> 00:41:07,440
information some more information into

00:41:00,569 --> 00:41:09,900
the same five say 120 mb I still see the

00:41:07,440 --> 00:41:12,449
shark sizes 6 mm beads configured for

00:41:09,900 --> 00:41:17,099
the file at only ones and can't be

00:41:12,449 --> 00:41:19,890
changed so if i try to create a

00:41:17,099 --> 00:41:22,410
different file since not now the shot

00:41:19,890 --> 00:41:27,779
size is four mb now the new file is

00:41:22,410 --> 00:41:30,650
created with the it its own GF ID this

00:41:27,779 --> 00:41:30,650
is a GFI d of it

00:41:41,920 --> 00:41:49,690
just it will be the in the root of the

00:41:45,230 --> 00:41:59,950
volume yeah so these are the shots

00:41:49,690 --> 00:42:03,170
created yeah with charts we have sorry

00:41:59,950 --> 00:42:07,370
which ok shouting robots better

00:42:03,170 --> 00:42:13,010
utilization of the disks how it provides

00:42:07,370 --> 00:42:14,690
how it does does is we distribute all

00:42:13,010 --> 00:42:19,580
the charge charge into the different

00:42:14,690 --> 00:42:22,250
bricks so it uses in you know better

00:42:19,580 --> 00:42:25,520
efficient way size of the file is not

00:42:22,250 --> 00:42:27,980
restricted to the brink because now it

00:42:25,520 --> 00:42:29,870
can be if the VM image is supposed to

00:42:27,980 --> 00:42:34,060
say we initially when we created it is

00:42:29,870 --> 00:42:37,040
2gb and it grows on to 20 gb at the one

00:42:34,060 --> 00:42:39,620
the one which it got inserted into his

00:42:37,040 --> 00:42:44,000
only having 10 GB of a no space in the

00:42:39,620 --> 00:42:45,830
brick now with the sharding we since we

00:42:44,000 --> 00:42:49,130
shared all the blocks in two different

00:42:45,830 --> 00:42:51,740
we distribute the blocks this problem

00:42:49,130 --> 00:42:55,130
can be solved data blocks are

00:42:51,740 --> 00:42:57,530
distributed by DHT in a normal way which

00:42:55,130 --> 00:43:01,880
blocks the Shamrocks he'll at a

00:42:57,530 --> 00:43:04,940
granularity of sharks yes all the here

00:43:01,880 --> 00:43:07,580
all the files are now is charted they

00:43:04,940 --> 00:43:10,550
can be healed in to heal like a granular

00:43:07,580 --> 00:43:13,730
level of charm and this is more like a I

00:43:10,550 --> 00:43:15,920
think we don't have time it's like it's

00:43:13,730 --> 00:43:20,000
a manilla use case suppose we have a

00:43:15,920 --> 00:43:23,390
volume or here which is mounted to some

00:43:20,000 --> 00:43:26,570
IP have not used any ssl schema here i

00:43:23,390 --> 00:43:29,330
am going to tell you it's very simple so

00:43:26,570 --> 00:43:31,780
we have a glass or volume of this got

00:43:29,330 --> 00:43:37,640
some IP say IP and i am trying to

00:43:31,780 --> 00:43:40,340
previously if i try to reject some IP on

00:43:37,640 --> 00:43:43,910
a volume say so lesser volume is not

00:43:40,340 --> 00:43:46,880
going to take care of it previously it's

00:43:43,910 --> 00:43:49,110
lazy until unless it gets a removed it

00:43:46,880 --> 00:43:51,060
won't see what are the IP

00:43:49,110 --> 00:43:53,820
it's got rejected and the customer is

00:43:51,060 --> 00:43:57,990
going to enjoy the services until a very

00:43:53,820 --> 00:44:03,120
what we wanted okay I think we don't

00:43:57,990 --> 00:44:05,720
have a time for this demo I these are

00:44:03,120 --> 00:44:09,480
guys who helped me coming here

00:44:05,720 --> 00:44:12,150
raghvendra salud he takes care of gfap I

00:44:09,480 --> 00:44:15,860
write his nepali and most of the

00:44:12,150 --> 00:44:19,070
starting work is done by critical so

00:44:15,860 --> 00:44:19,070
open for questions

00:44:33,749 --> 00:44:38,200
yeah yeah that's a good question

00:44:36,670 --> 00:44:40,569
actually I think I missed that point

00:44:38,200 --> 00:44:43,509
there so how it's going to if you have

00:44:40,569 --> 00:44:46,420
three breaks the shard shard since these

00:44:43,509 --> 00:44:50,619
fatties shut the future is sitting on

00:44:46,420 --> 00:44:53,829
top of the DHT so all the shots now the

00:44:50,619 --> 00:44:56,769
file is a 69 be 84 mb 5 got splitted

00:44:53,829 --> 00:45:04,059
into 16 mb now if you have to okay he'll

00:44:56,769 --> 00:45:07,390
explain from it from here so that ok

00:45:04,059 --> 00:45:11,309
this one so now you got a file from here

00:45:07,390 --> 00:45:14,349
and the shad access like the first first

00:45:11,309 --> 00:45:16,869
16 mb of the file of the or the block

00:45:14,349 --> 00:45:19,960
size of yours that you configured here

00:45:16,869 --> 00:45:22,749
that will be as a normal file and the

00:45:19,960 --> 00:45:25,180
extra data when it's appended that the

00:45:22,749 --> 00:45:27,339
file but will get fitted into the block

00:45:25,180 --> 00:45:30,130
size that you have configured and that

00:45:27,339 --> 00:45:32,710
chart will be given to the DHT in a

00:45:30,130 --> 00:45:35,049
normal way and that it will distribute

00:45:32,710 --> 00:45:44,710
to any of the blocks it can distribute

00:45:35,049 --> 00:45:47,099
to any of the blocks yes yes any other

00:45:44,710 --> 00:45:47,099
questions

00:45:47,440 --> 00:46:02,050
what about directory huge number of

00:45:58,510 --> 00:46:05,830
charts days actually each file has a

00:46:02,050 --> 00:46:08,380
unique GF ID so with that GF ID is going

00:46:05,830 --> 00:46:10,900
to store in the root of the volume so

00:46:08,380 --> 00:46:12,760
since the GF Jeff ID is unique so you

00:46:10,900 --> 00:46:15,640
have created a column even though there

00:46:12,760 --> 00:46:23,550
are million number of files each has a

00:46:15,640 --> 00:46:23,550
got a unique and will be appended index

00:46:41,550 --> 00:46:48,160
well actually shutting translator itself

00:46:45,010 --> 00:46:50,400
has some futures to address those kind

00:46:48,160 --> 00:46:50,400
of things

00:46:54,140 --> 00:47:05,920
yeah thank you yes

00:47:07,660 --> 00:47:14,369
yeah either so here are you

00:47:28,790 --> 00:47:30,820
I

00:49:08,349 --> 00:49:11,309
especially

00:49:39,350 --> 00:49:41,410
you

00:50:12,680 --> 00:50:15,280
route

00:50:19,320 --> 00:50:25,500

YouTube URL: https://www.youtube.com/watch?v=TczVVCbm8NE


