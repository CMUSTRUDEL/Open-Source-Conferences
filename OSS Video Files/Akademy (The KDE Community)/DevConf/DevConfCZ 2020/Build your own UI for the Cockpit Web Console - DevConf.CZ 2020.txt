Title: Build your own UI for the Cockpit Web Console - DevConf.CZ 2020
Publication date: 2020-03-27
Playlist: DevConfCZ 2020
Description: 
	Speakers: Lars Karlitski, Andreas Nilsson

The Cockpit Web Console provides a graphical, browser-based interface for managing your Fedora Server or Red Hat Enterprise Linux system. It gives less experienced Linux users the ability to perform common OS tasks on local, remote, and virtual machines without using the command line. But in some cases, the built-in tools is not enough for tasks that are specific to your organization.

In this talk, we’ll show you how you can build a custom UI as a plugin for the Web Console, to make your common system management tasks accessible to less experienced colleagues. This can free up some of your time and allow you to focus on other things.

We’ll go through writing a simple page which interacts with a custom script, packaging it up, and distributing it across your organization. Only basic knowledge of HTML and JavaScript is required.

[ https://sched.co/YOvv ]

--
Recordings of talks at DevConf are a community effort. Unfortunately not everything works perfectly every time. If you're interested in helping us improve, let us know.
Captions: 
	00:00:04,509 --> 00:00:12,559
alright so the reactive thing so this is

00:00:09,469 --> 00:00:18,019
what you get in this case I have a roll

00:00:12,559 --> 00:00:20,869
system here running a row 8.1 and if I

00:00:18,019 --> 00:00:22,820
ssh into it i get a little message that

00:00:20,869 --> 00:00:26,089
well this is here where you can access

00:00:22,820 --> 00:00:28,490
the web console over HTTP and the

00:00:26,089 --> 00:00:31,039
address of the system and fork 9090 and

00:00:28,490 --> 00:00:33,560
if i put this in the web browser I get

00:00:31,039 --> 00:00:36,260
this which then exposes all the things

00:00:33,560 --> 00:00:44,020
that are able to administer on the

00:00:36,260 --> 00:00:46,670
system so and yeah this is the regular

00:00:44,020 --> 00:00:51,190
operating system it's you know it uses

00:00:46,670 --> 00:00:54,859
system the network manager this is HD

00:00:51,190 --> 00:00:59,629
live bird all of this and all of this is

00:00:54,859 --> 00:01:03,980
documented on this URL here and the QR

00:00:59,629 --> 00:01:08,150
code goes through the same URL and this

00:01:03,980 --> 00:01:10,939
actually allows you to to to grow as an

00:01:08,150 --> 00:01:14,150
onion because you can then do some tasks

00:01:10,939 --> 00:01:16,490
in the UI another cast in the CLI and

00:01:14,150 --> 00:01:18,380
you can sure it's like with the help of

00:01:16,490 --> 00:01:21,439
this documentation you can then see like

00:01:18,380 --> 00:01:24,560
oh but this this piece of the UI it uses

00:01:21,439 --> 00:01:29,479
these commands so then you can start to

00:01:24,560 --> 00:01:33,200
learn how to to grow as an admin and how

00:01:29,479 --> 00:01:36,140
to start automating things by just

00:01:33,200 --> 00:01:38,149
trying it out side by side types and

00:01:36,140 --> 00:01:40,970
stuff on the terminal it directly

00:01:38,149 --> 00:01:42,619
reflects in the UI which then like oh

00:01:40,970 --> 00:01:50,079
this is how this commands work this is

00:01:42,619 --> 00:01:52,579
the output of it so but since we ship

00:01:50,079 --> 00:01:56,479
different Linux distributions I mean we

00:01:52,579 --> 00:02:01,219
ship fedora we shipped out Debian Ubuntu

00:01:56,479 --> 00:02:04,000
Arch Red Hat Enterprise Linux all of

00:02:01,219 --> 00:02:06,770
these like they have slightly different

00:02:04,000 --> 00:02:13,250
things about them they have different

00:02:06,770 --> 00:02:14,600
default package sets here on fedora and

00:02:13,250 --> 00:02:15,770
I think this is still the case it might

00:02:14,600 --> 00:02:17,990
not be still

00:02:15,770 --> 00:02:20,660
but it still has docker containers you

00:02:17,990 --> 00:02:24,710
can't it's like there is no longer in

00:02:20,660 --> 00:02:27,350
the docker containers in rel so we we

00:02:24,710 --> 00:02:29,090
quickly figured out that's okay we

00:02:27,350 --> 00:02:32,870
actually need to make this system

00:02:29,090 --> 00:02:37,730
pluggable so that you can you know like

00:02:32,870 --> 00:02:41,150
all all other things here are done in

00:02:37,730 --> 00:02:45,200
different packages internally and then

00:02:41,150 --> 00:02:48,110
they they populate the sidebar here so

00:02:45,200 --> 00:02:51,590
for example if we look at rel we don't

00:02:48,110 --> 00:02:53,570
have a extremely critical part that is

00:02:51,590 --> 00:02:55,880
the subscriptions page you wouldn't have

00:02:53,570 --> 00:02:57,830
this on fedora of course but on rel this

00:02:55,880 --> 00:02:59,330
is you need to subscribe your system to

00:02:57,830 --> 00:03:02,780
connect your system to write out so you

00:02:59,330 --> 00:03:04,820
can get the updates and and this is not

00:03:02,780 --> 00:03:10,280
an add-on it's something that we put in

00:03:04,820 --> 00:03:12,230
the the base installation of course so

00:03:10,280 --> 00:03:15,980
yeah then we figure it out okay we need

00:03:12,230 --> 00:03:18,920
we need a pluggable system we can add in

00:03:15,980 --> 00:03:26,900
like and have several packages that that

00:03:18,920 --> 00:03:28,430
builds up the UI and this is also true

00:03:26,900 --> 00:03:34,030
for the things we're going to talk about

00:03:28,430 --> 00:03:38,840
today because it does allows others to

00:03:34,030 --> 00:03:41,780
build their own new ice let's see yeah

00:03:38,840 --> 00:03:44,600
so this is like I mean our regular git

00:03:41,780 --> 00:03:49,220
repository these are the things that are

00:03:44,600 --> 00:03:51,620
in the cockpits get your all satori and

00:03:49,220 --> 00:03:53,750
these other things our things that are

00:03:51,620 --> 00:03:56,840
internal repositories and a lot of these

00:03:53,750 --> 00:03:59,050
are not developed by our team like the

00:03:56,840 --> 00:04:01,760
substitution matter team is able to

00:03:59,050 --> 00:04:03,370
build their own UI and they are able to

00:04:01,760 --> 00:04:07,460
maintain that because they have that

00:04:03,370 --> 00:04:09,140
domain-specific knowledge and also just

00:04:07,460 --> 00:04:11,510
the other day I accidentally stumbled

00:04:09,140 --> 00:04:13,730
upon a very critical plug-in that is

00:04:11,510 --> 00:04:16,760
like the Samba plug-in I had never seen

00:04:13,730 --> 00:04:19,880
this before so things are like happening

00:04:16,760 --> 00:04:24,169
outside of you know my immediate control

00:04:19,880 --> 00:04:25,220
and knowledge so in another case which

00:04:24,169 --> 00:04:27,620
we're going to talk about a little bit

00:04:25,220 --> 00:04:28,370
today is how can you start building your

00:04:27,620 --> 00:04:30,199
own plugin

00:04:28,370 --> 00:04:34,010
because another piece of feedback we

00:04:30,199 --> 00:04:36,290
received a lot is that we have a lot of

00:04:34,010 --> 00:04:39,710
people out there that they don't they

00:04:36,290 --> 00:04:42,340
want to build plugins specifically for

00:04:39,710 --> 00:04:44,900
their company for their organization

00:04:42,340 --> 00:04:46,970
which then allows you know they have a

00:04:44,900 --> 00:04:49,850
very specific need and they quickly need

00:04:46,970 --> 00:04:52,490
to get something together to ease things

00:04:49,850 --> 00:04:56,210
a very specific workflow for their

00:04:52,490 --> 00:05:01,150
customers and this is what the girls

00:04:56,210 --> 00:05:03,560
show today yeah so we will have no no

00:05:01,150 --> 00:05:05,300
demo for but can you talk a little bit

00:05:03,560 --> 00:05:10,190
about how how the whole thing is

00:05:05,300 --> 00:05:13,550
structured maybe all right so right so

00:05:10,190 --> 00:05:15,320
the idea was now that I like live coded

00:05:13,550 --> 00:05:17,330
demo for you it's not like quitting you

00:05:15,320 --> 00:05:21,560
know like showing how they work on how

00:05:17,330 --> 00:05:23,660
easy and I wonder if I can unplug this I

00:05:21,560 --> 00:05:24,919
could have done this before and copy it

00:05:23,660 --> 00:05:27,919
over to that at least I can show you in

00:05:24,919 --> 00:05:29,630
a text editor but the idea is like all

00:05:27,919 --> 00:05:37,430
of this is of course can you go to a

00:05:29,630 --> 00:05:38,570
screenshot of it this me yeah yeah

00:05:37,430 --> 00:05:41,090
perfect

00:05:38,570 --> 00:05:43,550
so all the pages you see here on the

00:05:41,090 --> 00:05:45,590
left side like this is like the chrome

00:05:43,550 --> 00:05:47,180
that corporate puts around it and

00:05:45,590 --> 00:05:49,070
everything inside here is one of those

00:05:47,180 --> 00:05:51,950
packages or comes from one of those

00:05:49,070 --> 00:05:53,240
packages that undress just show you and

00:05:51,950 --> 00:05:54,680
these packages you can put anywhere

00:05:53,240 --> 00:05:57,530
right you can just write your own one

00:05:54,680 --> 00:05:59,210
and put it in local share cockpit and

00:05:57,530 --> 00:06:00,949
then it gets that if you log in as that

00:05:59,210 --> 00:06:05,870
user but you can also insert a

00:06:00,949 --> 00:06:07,720
system-wide of course and let me copy

00:06:05,870 --> 00:06:12,110
those over and see if that works on

00:06:07,720 --> 00:06:21,979
Windows all we need is a text editor

00:06:12,110 --> 00:06:24,800
this is all HTML and good too yeah your

00:06:21,979 --> 00:06:27,940
windows professional let me see if I can

00:06:24,800 --> 00:06:27,940
bring this

00:06:29,449 --> 00:06:43,729
this is a we're pod yeah yeah we're

00:06:33,270 --> 00:06:43,729
really winging this we're not gonna make

00:06:47,509 --> 00:06:51,949
how long does this operating system work

00:06:54,150 --> 00:06:59,940
like I said this all it's all HTML and

00:06:57,690 --> 00:07:01,229
JavaScript so like this is the most

00:06:59,940 --> 00:07:03,120
minimal plugin that you can make you

00:07:01,229 --> 00:07:05,880
need the HTML file which is you know

00:07:03,120 --> 00:07:07,770
like your basic UI you need a JavaScript

00:07:05,880 --> 00:07:09,479
file which you know adds some

00:07:07,770 --> 00:07:11,880
interactivity because we don't allow by

00:07:09,479 --> 00:07:14,699
default we don't allow JavaScript in the

00:07:11,880 --> 00:07:16,410
HTML just because we are very very much

00:07:14,699 --> 00:07:18,990
about locking as much down as possible

00:07:16,410 --> 00:07:23,940
so you can can't like inject cotton

00:07:18,990 --> 00:07:26,250
itself Jason which if I can open this

00:07:23,940 --> 00:07:44,970
where's well that it's behind this how

00:07:26,250 --> 00:07:46,680
Windows works - nice yes you a little

00:07:44,970 --> 00:07:48,599
bit about your project right about that

00:07:46,680 --> 00:07:50,039
package so we just say what version it

00:07:48,599 --> 00:07:51,780
is which version of carpet it requires

00:07:50,039 --> 00:07:54,889
because carpet has an ID I that you can

00:07:51,780 --> 00:07:57,810
talk to like all kinds of low-level UNIX

00:07:54,889 --> 00:08:02,340
you know API it's like the bus and files

00:07:57,810 --> 00:08:03,840
and and also you can say right where in

00:08:02,340 --> 00:08:05,789
the menu you want to put that it but I

00:08:03,840 --> 00:08:08,699
knew was the on the left side so in this

00:08:05,789 --> 00:08:10,530
case if I could show this to you we

00:08:08,699 --> 00:08:12,900
would copy that that fold it over and

00:08:10,530 --> 00:08:15,659
then we would see the the DEF CON label

00:08:12,900 --> 00:08:16,849
over here and then I would click on it

00:08:15,659 --> 00:08:21,380
and then you with me would love that

00:08:16,849 --> 00:08:21,380
index.html let me show that to you

00:08:24,599 --> 00:08:39,240
that's that's exactly what I wanted

00:08:30,089 --> 00:08:42,509
thank you yes thank you so much for all

00:08:39,240 --> 00:08:47,430
your look at this we crowd source the as

00:08:42,509 --> 00:08:53,790
a control you here as well yes this is

00:08:47,430 --> 00:08:56,100
how we develop in 90s so you know ahead

00:08:53,790 --> 00:08:57,420
where you you let me load in the cockpit

00:08:56,100 --> 00:09:02,550
yes I would should make it speaker no

00:08:57,420 --> 00:09:10,410
sorry about that I don't think it I make

00:09:02,550 --> 00:09:12,750
this bigger text size digest so so I

00:09:10,410 --> 00:09:16,279
look the index yes that you saw in my

00:09:12,750 --> 00:09:19,170
plugin and I also got the the cockpit

00:09:16,279 --> 00:09:21,329
the cockpit bass API and then all I use

00:09:19,170 --> 00:09:26,040
I have a little you know headline and

00:09:21,329 --> 00:09:27,449
and an input field and a I think yeah

00:09:26,040 --> 00:09:28,860
this is empty now because it is not

00:09:27,449 --> 00:09:31,019
running in cockpit if this were running

00:09:28,860 --> 00:09:34,769
in cockpit then we would see the list of

00:09:31,019 --> 00:09:40,290
NFS exports that I have because and now

00:09:34,769 --> 00:09:46,589
comes the interesting bits do I open

00:09:40,290 --> 00:09:49,819
this in WordPad now don't say yay okay

00:09:46,589 --> 00:09:52,560
that's zoom in zoom in a little bit yeah

00:09:49,819 --> 00:09:55,380
if I could now make the pitch okay

00:09:52,560 --> 00:09:58,250
whatever so this is javascript in word

00:09:55,380 --> 00:09:58,250
processing document

00:09:58,930 --> 00:10:04,070
because we loaded copyright there is a a

00:10:02,240 --> 00:10:06,260
couple of object a big conflict object

00:10:04,070 --> 00:10:08,570
that has access to all the api's and

00:10:06,260 --> 00:10:10,100
this is opening this file as super user

00:10:08,570 --> 00:10:11,570
because you know I'm hoping at the

00:10:10,100 --> 00:10:14,930
exports and we want to write it as well

00:10:11,570 --> 00:10:17,210
so we need to be super user and then we

00:10:14,930 --> 00:10:18,380
we watch the file so every time the file

00:10:17,210 --> 00:10:20,660
changes and also once at the very

00:10:18,380 --> 00:10:24,380
beginning it calls this function that I

00:10:20,660 --> 00:10:27,560
pass here and then that although does is

00:10:24,380 --> 00:10:29,210
it writes all of these things between

00:10:27,560 --> 00:10:38,840
here right like everything that it reads

00:10:29,210 --> 00:10:41,690
this is so much that it's very reactive

00:10:38,840 --> 00:10:43,430
so whenever that's what was referring to

00:10:41,690 --> 00:10:45,140
before whenever something on the system

00:10:43,430 --> 00:10:51,920
changes we also want that to change on

00:10:45,140 --> 00:10:53,630
in cockpit so whenever I hit ctrl W : W

00:10:51,920 --> 00:10:55,880
and in VI or something about if I write

00:10:53,630 --> 00:10:57,620
the file then this function trigger so

00:10:55,880 --> 00:11:01,280
that the UI is always updated in real

00:10:57,620 --> 00:11:03,920
time and then we have this little button

00:11:01,280 --> 00:11:07,970
here with a checkbox I don't need to

00:11:03,920 --> 00:11:09,830
explain how this code works so you click

00:11:07,970 --> 00:11:11,720
the button and then we write the content

00:11:09,830 --> 00:11:15,410
of the file by appending that one that

00:11:11,720 --> 00:11:16,910
one line to it yeah like I say this is

00:11:15,410 --> 00:11:19,640
how we did it with an IDs right and I

00:11:16,910 --> 00:11:21,290
think you already saw and it's like

00:11:19,640 --> 00:11:25,390
sneak site because this is not how

00:11:21,290 --> 00:11:25,390
morondava developed understand anymore

00:11:26,320 --> 00:11:35,710
no I think it's better if you I can talk

00:11:28,880 --> 00:11:37,460
about so in the project getup

00:11:35,710 --> 00:11:39,670
organization we have something called

00:11:37,460 --> 00:11:44,090
the starter kit which is a template for

00:11:39,670 --> 00:11:47,720
you know a modern or how we use modern

00:11:44,090 --> 00:11:52,280
web development to make circuits which

00:11:47,720 --> 00:11:53,750
uses web pack which is this but

00:11:52,280 --> 00:11:54,950
definitely uses backup so you can use

00:11:53,750 --> 00:11:56,930
like all the JavaScript libraries from

00:11:54,950 --> 00:12:00,030
everywhere mostly we use it for react

00:11:56,930 --> 00:12:01,830
because most of comfits development

00:12:00,030 --> 00:12:03,900
and we have pieces but we also have a

00:12:01,830 --> 00:12:06,660
lot of other things in there that we use

00:12:03,900 --> 00:12:08,520
to make successful open source projects

00:12:06,660 --> 00:12:10,560
right we can make off the ends we have

00:12:08,520 --> 00:12:12,420
least release scripts in there we have

00:12:10,560 --> 00:12:14,790
hookups for with the very extensive

00:12:12,420 --> 00:12:16,410
corporate test suite which spins up VMs

00:12:14,790 --> 00:12:19,860
for you so that you can actually like

00:12:16,410 --> 00:12:20,730
test that and translation helpers and

00:12:19,860 --> 00:12:27,210
stuff like this

00:12:20,730 --> 00:12:29,640
the idea is pick and choose also if you

00:12:27,210 --> 00:12:31,470
for your product has no need to build

00:12:29,640 --> 00:12:35,160
our camp packages you can opt out of

00:12:31,470 --> 00:12:38,880
that right and then the other piece are

00:12:35,160 --> 00:12:42,120
on a critical piece and how we are able

00:12:38,880 --> 00:12:45,920
to build the beautiful looking and well

00:12:42,120 --> 00:12:48,540
functional and accessible widgets and

00:12:45,920 --> 00:12:52,350
interfaces is that we make use of

00:12:48,540 --> 00:12:54,150
pattern file which is a what do you call

00:12:52,350 --> 00:12:59,510
it like a toolkit library more or less

00:12:54,150 --> 00:13:03,380
and a set of design guidelines and react

00:12:59,510 --> 00:13:03,380
templates or what I call it

00:13:03,900 --> 00:13:17,340
yeah components let's see can I even I

00:13:07,520 --> 00:13:19,230
will yeah so yeah and here you can find

00:13:17,340 --> 00:13:27,690
all the documentation and it will allow

00:13:19,230 --> 00:13:29,870
you to then quickly build amazing let's

00:13:27,690 --> 00:13:29,870
see

00:13:32,110 --> 00:13:40,400
do I see ah never mind but you can get

00:13:37,970 --> 00:13:42,440
access to like all the the proper source

00:13:40,400 --> 00:13:45,620
code and this will then be able to guide

00:13:42,440 --> 00:13:49,660
you if you use these classes and and all

00:13:45,620 --> 00:13:54,170
of that you are able to build amazing

00:13:49,660 --> 00:13:55,640
interfaces very useful outer-box yes so

00:13:54,170 --> 00:14:03,680
now we can open for questions

00:13:55,640 --> 00:14:05,000
this demo pushes the start of the only 5

00:14:03,680 --> 00:14:09,820
minutes that we actually want to talk

00:14:05,000 --> 00:14:09,820
about professor oh that was amazing

00:14:32,589 --> 00:14:37,370
yeah definitely we have a a breeze if we

00:14:35,630 --> 00:14:40,399
were helpful and friendly I think in

00:14:37,370 --> 00:14:42,110
hash pocket and IOC but also we have on

00:14:40,399 --> 00:14:43,790
the conflict wiki tons of feature pages

00:14:42,110 --> 00:14:45,830
about things that we would like to add

00:14:43,790 --> 00:14:49,220
at some point and also things that you

00:14:45,830 --> 00:15:04,070
know could be developed further in in

00:14:49,220 --> 00:15:09,620
existing pages that we don't do unless

00:15:04,070 --> 00:15:13,600
you have the idea only certificate a cup

00:15:09,620 --> 00:15:13,600
it doesn't make any decisions for you -

00:15:14,020 --> 00:15:21,380
yeah but you need your spot I mean it's

00:15:20,060 --> 00:15:23,480
not meant for local abstract it's meant

00:15:21,380 --> 00:15:27,290
for a remote access in your server and

00:15:23,480 --> 00:15:29,779
hopefully your server has this like the

00:15:27,290 --> 00:15:31,370
idea being that is easier than SSH right

00:15:29,779 --> 00:15:32,990
like your station somewhere and you like

00:15:31,370 --> 00:15:34,430
do stuff in the terminal this is the

00:15:32,990 --> 00:15:36,470
like a little bit more modern because

00:15:34,430 --> 00:15:38,630
you know we have the full fidelity of

00:15:36,470 --> 00:15:40,640
web pages and you can do so much more as

00:15:38,630 --> 00:15:43,670
we act if you see much more on the on

00:15:40,640 --> 00:15:46,399
the same page its colors it's different

00:15:43,670 --> 00:15:49,970
size fonts you know things you can do

00:15:46,399 --> 00:15:52,100
since a long time now yeah at the same

00:15:49,970 --> 00:15:54,110
time like for for a lot of people who

00:15:52,100 --> 00:15:56,480
are unfamiliar with Linux I mean like we

00:15:54,110 --> 00:15:58,850
all know and love our terminals but for

00:15:56,480 --> 00:16:00,589
a lot of people who would like to start

00:15:58,850 --> 00:16:03,290
dipping their toes in Linux system

00:16:00,589 --> 00:16:07,720
administration like the terminal is a

00:16:03,290 --> 00:16:07,720
bit scary it's just a big blah

00:16:16,490 --> 00:16:20,519
we couldn't make a video

00:16:18,930 --> 00:16:22,410
there's tons of videos already on the

00:16:20,519 --> 00:16:24,569
concrete Genova that do stuff like this

00:16:22,410 --> 00:16:26,129
but we could also yeah I can record it

00:16:24,569 --> 00:16:29,000
and upload it there is a competition

00:16:26,129 --> 00:16:29,000
Alicia good houses

00:16:36,740 --> 00:16:39,889
thank you

00:16:41,610 --> 00:16:47,070

YouTube URL: https://www.youtube.com/watch?v=pRnEiQqEM5Y


