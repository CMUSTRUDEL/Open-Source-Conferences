Title: PromCon 2018: Explore Your Prometheus Data in Grafana
Publication date: 2018-11-10
Playlist: PromCon 2018
Description: 
	Speaker: David Kaltschmidt

Grafana is the de-facto dashboarding solution for Prometheus. Now imagine you received a page. Grafana is often the starting point for your incident response. You look at a time series panel, form a hypothesis, and would like to dive deeper. We've built a whole new section that allows you to do just that by iterating quickly through Prometheus queries while leaving your dashboards intact. I'll show-case our new Explore UI and how it can fit into your workflows for both troubleshooting and data exploration.
Captions: 
	00:00:10,460 --> 00:00:16,820
yeah I'm not call called cars usually

00:00:13,549 --> 00:00:20,779
here he is on parental leave right now

00:00:16,820 --> 00:00:23,599
which is funny because last year he just

00:00:20,779 --> 00:00:26,539
got back from parental leave and but

00:00:23,599 --> 00:00:31,730
this year he has twins or he's getting

00:00:26,539 --> 00:00:33,830
twins so big applause for Carl because I

00:00:31,730 --> 00:00:37,820
think he's gonna have a lot of a lot of

00:00:33,830 --> 00:00:39,019
work on his hands and but also on a more

00:00:37,820 --> 00:00:40,610
serious and I really want to encourage

00:00:39,019 --> 00:00:42,769
people to go on parental leave I

00:00:40,610 --> 00:00:45,470
personally regret that I haven't gone on

00:00:42,769 --> 00:00:47,629
leave when my son was born so I think

00:00:45,470 --> 00:00:51,710
it's important that people in tech like

00:00:47,629 --> 00:00:54,559
take yes take advantage of this yeah all

00:00:51,710 --> 00:00:59,239
right so I guess you're stuck with me

00:00:54,559 --> 00:01:01,040
now I am responsible for UX things but

00:00:59,239 --> 00:01:03,320
speaking of stuck if you click somewhere

00:01:01,040 --> 00:01:06,229
in Gravano and don't get any further

00:01:03,320 --> 00:01:10,159
then you just reach out to me David

00:01:06,229 --> 00:01:13,369
Geffen or calm or on Twitter so what is

00:01:10,159 --> 00:01:15,259
Cortana fun as a currently on a journey

00:01:13,369 --> 00:01:18,789
on a transition from dashboarding

00:01:15,259 --> 00:01:22,579
solution to observability platform and

00:01:18,789 --> 00:01:27,320
I'll show a bit later how that what that

00:01:22,579 --> 00:01:28,429
looks like and as big so first we're

00:01:27,320 --> 00:01:31,100
gonna do a quick overview on what

00:01:28,429 --> 00:01:34,280
happened between the last prom Kong a

00:01:31,100 --> 00:01:37,189
year ago to now and the most obvious is

00:01:34,280 --> 00:01:39,380
the light theme that you see there which

00:01:37,189 --> 00:01:42,340
personally I think is more is easy on

00:01:39,380 --> 00:01:46,219
eyes it's also more sellable to

00:01:42,340 --> 00:01:48,499
enterprise which is nice but I've had

00:01:46,219 --> 00:01:51,679
someone come up to me and say it can you

00:01:48,499 --> 00:01:53,359
make the light just a bit so because I

00:01:51,679 --> 00:01:55,780
really want people to stick to the dark

00:01:53,359 --> 00:01:58,670
to dark on so I'm not sure if we can

00:01:55,780 --> 00:02:00,710
like accommodate this bear let's see so

00:01:58,670 --> 00:02:03,799
on the on the on the on the back there

00:02:00,710 --> 00:02:07,330
you also see the the folders that's also

00:02:03,799 --> 00:02:09,860
new so you can group your your your

00:02:07,330 --> 00:02:11,540
dashboards by folders and folders can

00:02:09,860 --> 00:02:14,590
also have permissions so I think that's

00:02:11,540 --> 00:02:17,360
quite neat and then also lo and behold

00:02:14,590 --> 00:02:19,040
people were probably using this now for

00:02:17,360 --> 00:02:21,170
quite a while but that was also

00:02:19,040 --> 00:02:23,750
introduced in the last year which is the

00:02:21,170 --> 00:02:26,540
instant query which allows you to

00:02:23,750 --> 00:02:28,610
only query the last data point and that

00:02:26,540 --> 00:02:30,260
is quite nice if especially if the

00:02:28,610 --> 00:02:32,630
queries are quite expensive and you only

00:02:30,260 --> 00:02:36,110
really want to see the the last value

00:02:32,630 --> 00:02:38,810
and it's also best displayed in a table

00:02:36,110 --> 00:02:41,570
panel there also speaking of table

00:02:38,810 --> 00:02:44,090
panels we implemented another thing

00:02:41,570 --> 00:02:46,520
there basically if if you have multiple

00:02:44,090 --> 00:02:50,030
queries you can still render them in a

00:02:46,520 --> 00:02:54,530
table and it's trying to match the rows

00:02:50,030 --> 00:02:57,410
that have the same the same label value

00:02:54,530 --> 00:03:00,230
so in this case there's a breakdown by

00:02:57,410 --> 00:03:02,540
namespace and all of these values will

00:03:00,230 --> 00:03:05,180
end up in the same or the values that

00:03:02,540 --> 00:03:07,340
are the responses that have the same

00:03:05,180 --> 00:03:11,380
namespace will end up in the same roast

00:03:07,340 --> 00:03:11,380
and I think it's quite neat to compare

00:03:11,470 --> 00:03:20,270
to compare it's a completely to compare

00:03:16,930 --> 00:03:21,950
for example resources that you requested

00:03:20,270 --> 00:03:27,250
versus resources that are actually being

00:03:21,950 --> 00:03:29,390
used that is what's being done there so

00:03:27,250 --> 00:03:32,049
this isn't there's another fun one that

00:03:29,390 --> 00:03:34,010
was introduced this year which is

00:03:32,049 --> 00:03:38,299
basically we heard we heard of people

00:03:34,010 --> 00:03:40,489
saying saying we've been trying to like

00:03:38,299 --> 00:03:42,530
convince our manager to use prometheus

00:03:40,489 --> 00:03:44,870
but if I click in a raker if I click

00:03:42,530 --> 00:03:46,190
refresh really quickly then like these

00:03:44,870 --> 00:03:49,010
graphs always look slightly different

00:03:46,190 --> 00:03:50,720
you know you can sort of see it right

00:03:49,010 --> 00:03:52,400
basically if I click 10 seconds later

00:03:50,720 --> 00:03:55,970
the graph shows just looked the same

00:03:52,400 --> 00:03:57,620
shifted by 10 seconds so like but then

00:03:55,970 --> 00:03:59,540
people were or divers like starting to

00:03:57,620 --> 00:04:01,549
explain well it screws when like the

00:03:59,540 --> 00:04:02,570
step hits interpolation you know like

00:04:01,549 --> 00:04:05,750
things are just being calculated

00:04:02,570 --> 00:04:11,780
slightly differently but then the said

00:04:05,750 --> 00:04:15,910
like yeah but so so yeah so we had to do

00:04:11,780 --> 00:04:18,979
something and we ended up doing in it

00:04:15,910 --> 00:04:22,160
and we ended up aligning the request

00:04:18,979 --> 00:04:25,100
start an end with with the step so now

00:04:22,160 --> 00:04:28,460
every time you query like the parameters

00:04:25,100 --> 00:04:30,590
first on end will be aligned or like

00:04:28,460 --> 00:04:36,169
Moodle will be land like Moodle or the

00:04:30,590 --> 00:04:37,729
step anyway so yeah so hopefully it's

00:04:36,169 --> 00:04:40,849
more like prometheus

00:04:37,729 --> 00:04:42,680
is easy to sell now so another cool

00:04:40,849 --> 00:04:47,509
thing heat my panel is anyone using this

00:04:42,680 --> 00:04:49,219
already yep cool there was a little

00:04:47,509 --> 00:04:50,749
confusion in the beginning what kind of

00:04:49,219 --> 00:04:53,599
queries to be used like could we use the

00:04:50,749 --> 00:04:54,919
histogram query actually no you just you

00:04:53,599 --> 00:04:58,749
just need to use the rate query because

00:04:54,919 --> 00:05:02,659
we need to interpret all the old ele

00:04:58,749 --> 00:05:04,580
values and this is an example on how

00:05:02,659 --> 00:05:06,379
it's done and then you just need to use

00:05:04,580 --> 00:05:10,370
format as heat map and then you end up

00:05:06,379 --> 00:05:12,259
with a nice heat map yeah so another

00:05:10,370 --> 00:05:14,240
cool thing we did this year we had a

00:05:12,259 --> 00:05:16,419
summer intern project yeah we're taking

00:05:14,240 --> 00:05:20,449
on summer insurance if you're interested

00:05:16,419 --> 00:05:24,139
this year was to be a so really grateful

00:05:20,449 --> 00:05:26,809
they did this well he was actually I

00:05:24,139 --> 00:05:29,960
brought on board to do a really boring

00:05:26,809 --> 00:05:31,969
task which was converting comma test to

00:05:29,960 --> 00:05:33,649
jest for like three months and we

00:05:31,969 --> 00:05:35,809
thought well maybe this is a bit like

00:05:33,649 --> 00:05:38,449
too boring so we gave him like a real

00:05:35,809 --> 00:05:40,099
task which was variable expansion in

00:05:38,449 --> 00:05:41,300
tempo variables this sounds a bit

00:05:40,099 --> 00:05:41,749
complicated but it's actually really

00:05:41,300 --> 00:05:43,490
cool

00:05:41,749 --> 00:05:45,169
you also edit in you are built in

00:05:43,490 --> 00:05:48,610
variable which is which represents the

00:05:45,169 --> 00:05:53,050
range of the dashboard that you see and

00:05:48,610 --> 00:05:56,300
this allows you to do variables based on

00:05:53,050 --> 00:06:00,649
based on the dashboard range and I'm

00:05:56,300 --> 00:06:02,539
going to show you so basically first

00:06:00,649 --> 00:06:04,939
look at the query field there what we're

00:06:02,539 --> 00:06:06,949
doing there is we're doing a query for

00:06:04,939 --> 00:06:09,319
the top three jobs with the highest

00:06:06,949 --> 00:06:11,539
average go routine count in the time

00:06:09,319 --> 00:06:13,669
range that the dashboard shows so that's

00:06:11,539 --> 00:06:16,789
pretty cool because that gives you a

00:06:13,669 --> 00:06:20,270
list of the the jobs that are yeah like

00:06:16,789 --> 00:06:23,839
I guess go routine intensive just make

00:06:20,270 --> 00:06:25,969
sure to use refresh on time change on

00:06:23,839 --> 00:06:27,740
time range change because every time you

00:06:25,969 --> 00:06:30,259
look at a new dashboard time lock or

00:06:27,740 --> 00:06:31,669
like in the morning right your time will

00:06:30,259 --> 00:06:34,009
obviously have changed but the good news

00:06:31,669 --> 00:06:37,069
then is you actually get this new list

00:06:34,009 --> 00:06:39,529
up there in the top left and then you

00:06:37,069 --> 00:06:41,779
can use that variable in the query so

00:06:39,529 --> 00:06:45,680
like for that morning you can use you

00:06:41,779 --> 00:06:49,310
can use that big routine drop variable

00:06:45,680 --> 00:06:50,790
to look at your like requests or

00:06:49,310 --> 00:06:54,480
something

00:06:50,790 --> 00:06:56,160
cool another thing we added is the

00:06:54,480 --> 00:06:59,010
provisioning API which basically allows

00:06:56,160 --> 00:07:00,690
you to define data sources and dashboard

00:06:59,010 --> 00:07:03,750
and files and when they when they change

00:07:00,690 --> 00:07:07,800
like the definition change then you can

00:07:03,750 --> 00:07:10,020
basically just it just reloads and all

00:07:07,800 --> 00:07:12,660
this is done or annular can take it

00:07:10,020 --> 00:07:14,220
immediately take advantage of this this

00:07:12,660 --> 00:07:16,350
is quite nice because you can also down

00:07:14,220 --> 00:07:21,000
version control your data source

00:07:16,350 --> 00:07:22,740
definitions and another cool thing that

00:07:21,000 --> 00:07:25,110
Tom we didn't get it

00:07:22,740 --> 00:07:26,970
was that a fan has no felici height so

00:07:25,110 --> 00:07:29,400
that means every change it goes into

00:07:26,970 --> 00:07:31,410
master will be built into a docker image

00:07:29,400 --> 00:07:35,190
and then if you use graph on a latest

00:07:31,410 --> 00:07:38,220
you can you can test also the new staff

00:07:35,190 --> 00:07:42,240
that I'm going to show later yeah so

00:07:38,220 --> 00:07:44,250
this is also a cards favorite section is

00:07:42,240 --> 00:07:48,450
adoption so let's go a bit back in

00:07:44,250 --> 00:07:51,660
history this was just written numbers

00:07:48,450 --> 00:07:54,360
for 2016 basically Cortana pings home

00:07:51,660 --> 00:07:57,600
once a day to report data source usage

00:07:54,360 --> 00:08:02,010
usage and those were the numbers for

00:07:57,600 --> 00:08:04,830
2016 and then 2017 was quite a bump and

00:08:02,010 --> 00:08:06,060
then not a big question is I guess what

00:08:04,830 --> 00:08:11,160
what happened this year

00:08:06,060 --> 00:08:16,760
and yes pretty big so we basically saw a

00:08:11,160 --> 00:08:19,110
triple in size over one year and 54,000

00:08:16,760 --> 00:08:21,560
Prometheus data sources I think it's I

00:08:19,110 --> 00:08:21,560
think it's quite good

00:08:27,860 --> 00:08:36,690
alright so on to the new stuff so this

00:08:32,550 --> 00:08:43,740
is all of it alpha and I'm gonna walk

00:08:36,690 --> 00:08:48,000
you through this - did too - so first a

00:08:43,740 --> 00:08:49,830
bit of I guess some theory we we

00:08:48,000 --> 00:08:53,100
basically were motivated by people

00:08:49,830 --> 00:08:56,220
saying the dashboard is great and we

00:08:53,100 --> 00:08:58,320
also we also want to get maybe take grow

00:08:56,220 --> 00:09:00,600
fond of it off the wall and use a bit

00:08:58,320 --> 00:09:02,880
more for incident response or another

00:09:00,600 --> 00:09:04,350
thing was people were oh I just want to

00:09:02,880 --> 00:09:05,670
quickly grab something but I have to

00:09:04,350 --> 00:09:07,980
rated dashboard and I have to create a

00:09:05,670 --> 00:09:10,350
panel and have to find the matrix entry

00:09:07,980 --> 00:09:11,940
fuel and it was all super annoying so we

00:09:10,350 --> 00:09:15,180
it so that that was I guess a big

00:09:11,940 --> 00:09:16,920
motivator then also we have once we end

00:09:15,180 --> 00:09:18,960
up there there's like all these options

00:09:16,920 --> 00:09:21,750
click me click me I don't know I really

00:09:18,960 --> 00:09:23,250
know what they're doing but they're all

00:09:21,750 --> 00:09:26,850
basically in the way of the career field

00:09:23,250 --> 00:09:28,740
that is between these two red areas

00:09:26,850 --> 00:09:30,990
there and then where people end up doing

00:09:28,740 --> 00:09:35,240
anyway was just clicking this little sad

00:09:30,990 --> 00:09:38,630
I can there with the is also encircled

00:09:35,240 --> 00:09:41,930
which basically just takes them to the

00:09:38,630 --> 00:09:46,230
standard for me to kiss you I and then

00:09:41,930 --> 00:09:48,270
okay anyway we wanted to change this and

00:09:46,230 --> 00:09:54,510
bring a lot more interactivity around

00:09:48,270 --> 00:09:56,130
queries to to to grow fauna and we like

00:09:54,510 --> 00:09:59,820
iterate iterate a little bit in over

00:09:56,130 --> 00:10:03,690
designs and came up with this more query

00:09:59,820 --> 00:10:05,940
centric view as opposed to Agra fauna or

00:10:03,690 --> 00:10:11,010
the classic coroner dashboards which are

00:10:05,940 --> 00:10:19,110
more about the visualizations and yeah

00:10:11,010 --> 00:10:22,100
so I can quickly show only I could

00:10:19,110 --> 00:10:22,100
change the tab now

00:10:39,790 --> 00:10:55,839
it looks like this alright fishings

00:10:44,000 --> 00:10:57,110
first we have to change this right oh

00:10:55,839 --> 00:11:02,990
yeah

00:10:57,110 --> 00:11:15,050
oh yeah okay that's better so let me

00:11:02,990 --> 00:11:16,579
make that full screen okay here we go so

00:11:15,050 --> 00:11:24,079
I guess I have to make that a bit bigger

00:11:16,579 --> 00:11:27,319
oh so can people see this okay so we

00:11:24,079 --> 00:11:29,600
start quickly by integrations there

00:11:27,319 --> 00:11:32,839
basically if you have if you have

00:11:29,600 --> 00:11:37,250
dashboards already you do this there's

00:11:32,839 --> 00:11:40,850
now a new field here in the in the panel

00:11:37,250 --> 00:11:43,399
menu which is Explorer which leads you

00:11:40,850 --> 00:11:45,920
to this extreme Explorer section you can

00:11:43,399 --> 00:11:52,550
also get there by just clicking here

00:11:45,920 --> 00:11:53,839
Explorer right and then okay aha it

00:11:52,550 --> 00:11:58,660
already tells me I can't connect to the

00:11:53,839 --> 00:12:07,189
local database local yes that's fine

00:11:58,660 --> 00:12:09,800
because we're just gonna start it so but

00:12:07,189 --> 00:12:12,160
I could like to demo stuff one like the

00:12:09,800 --> 00:12:15,980
robust perception

00:12:12,160 --> 00:12:18,079
Thank You Bryan yeah so what we have

00:12:15,980 --> 00:12:21,980
here is a completely new section around

00:12:18,079 --> 00:12:24,439
in with Ingo fauna which focuses a lot

00:12:21,980 --> 00:12:27,399
about where focus is the queries

00:12:24,439 --> 00:12:31,009
themselves and for Prometheus

00:12:27,399 --> 00:12:33,589
specifically we want to make the easy

00:12:31,009 --> 00:12:34,970
things or the things that should be easy

00:12:33,589 --> 00:12:36,980
we want to make move in and make those a

00:12:34,970 --> 00:12:38,449
bit more easier so for example there's a

00:12:36,980 --> 00:12:41,809
little metrics Explorer here which

00:12:38,449 --> 00:12:44,500
groups the available metrics by prefix

00:12:41,809 --> 00:12:49,970
so you can have your alert manager

00:12:44,500 --> 00:12:51,860
related metrics here and then you just

00:12:49,970 --> 00:12:54,380
against click one

00:12:51,860 --> 00:12:56,930
and it fills us out so that's pretty

00:12:54,380 --> 00:12:58,880
cool and then and then it's like hmm

00:12:56,930 --> 00:13:00,890
this is a time serious that's monotonous

00:12:58,880 --> 00:13:02,330
ly increasing maybe you should apply a

00:13:00,890 --> 00:13:05,650
write function right so then you just

00:13:02,330 --> 00:13:10,420
click this and then boom that works okay

00:13:05,650 --> 00:13:17,090
so same thing for same thing for

00:13:10,420 --> 00:13:18,410
anything with buckets mm-hmm all right a

00:13:17,090 --> 00:13:20,960
little there's a little buckets here

00:13:18,410 --> 00:13:24,470
maybe we should be assuming this okay so

00:13:20,960 --> 00:13:26,920
and then this like fills out what we

00:13:24,470 --> 00:13:31,510
hope is like a like a good default

00:13:26,920 --> 00:13:35,540
function function call for your for your

00:13:31,510 --> 00:13:36,950
buckets basically but this is this is

00:13:35,540 --> 00:13:38,240
these are just Mendez like quick

00:13:36,950 --> 00:13:41,650
starting points because then you can

00:13:38,240 --> 00:13:41,650
then you can start iterating through

00:13:41,980 --> 00:13:46,490
these great through these grades here

00:13:44,720 --> 00:13:49,640
and for example you can break this down

00:13:46,490 --> 00:13:54,470
by I guess Joe Blow it's only the alert

00:13:49,640 --> 00:13:55,360
manager job okay no surprise anyway yeah

00:13:54,470 --> 00:13:58,430
so we have those

00:13:55,360 --> 00:14:00,050
another thing we added was history so

00:13:58,430 --> 00:14:01,940
the last things you queried it also

00:14:00,050 --> 00:14:04,430
tells you how often they've been created

00:14:01,940 --> 00:14:07,100
in the last 24 hours also like how long

00:14:04,430 --> 00:14:09,530
ago someone did this so I think that's

00:14:07,100 --> 00:14:12,830
quite helpful and then we also a

00:14:09,530 --> 00:14:14,230
function helpers they also tell you what

00:14:12,830 --> 00:14:17,690
the function does

00:14:14,230 --> 00:14:21,650
maybe there's another nice one cold

00:14:17,690 --> 00:14:28,490
winters everyone's favorite it's good to

00:14:21,650 --> 00:14:33,650
tell you what it does yeah so what else

00:14:28,490 --> 00:14:37,160
do we have here we also have oh that's a

00:14:33,650 --> 00:14:41,930
good one let's go back to go routines

00:14:37,160 --> 00:14:43,970
again so it always career is all it

00:14:41,930 --> 00:14:45,410
always executes it's two queries one for

00:14:43,970 --> 00:14:47,180
one instant query for the table down

00:14:45,410 --> 00:14:48,890
here and one photograph so if you have a

00:14:47,180 --> 00:14:52,460
bigger screen it's actually more easy to

00:14:48,890 --> 00:14:54,110
see all of this you can also undo the

00:14:52,460 --> 00:14:56,000
the graph thing and then you just see

00:14:54,110 --> 00:14:59,330
the table you want to iterate more more

00:14:56,000 --> 00:15:01,580
quickly and here then we also have like

00:14:59,330 --> 00:15:04,769
click to filter so if I just click on

00:15:01,580 --> 00:15:07,800
push gateway this thing gets edit

00:15:04,769 --> 00:15:10,139
nice and then this also works works

00:15:07,800 --> 00:15:13,439
across so it was curry doesn't make any

00:15:10,139 --> 00:15:17,009
sense but I could click on this again

00:15:13,439 --> 00:15:19,679
and then these are added to both I think

00:15:17,009 --> 00:15:23,189
that's quite cool so let's quickly

00:15:19,679 --> 00:15:25,829
change the data source to my local one

00:15:23,189 --> 00:15:29,009
because there was a really cool feature

00:15:25,829 --> 00:15:33,389
added to Prometheus in the last couple

00:15:29,009 --> 00:15:35,369
weeks by max which is the roots are now

00:15:33,389 --> 00:15:39,779
being exposed by API so that's pretty

00:15:35,369 --> 00:15:43,259
cool which means I can also get

00:15:39,779 --> 00:15:49,649
recording worlds here so I can do this

00:15:43,259 --> 00:15:56,970
and then alright well that worked

00:15:49,649 --> 00:15:59,519
I need a graph query also so because

00:15:56,970 --> 00:16:01,230
then it's as its as oh well this is a

00:15:59,519 --> 00:16:03,420
recording rule if you want to start

00:16:01,230 --> 00:16:05,579
debugging a query that also contains

00:16:03,420 --> 00:16:08,850
recording rules you can expand the rules

00:16:05,579 --> 00:16:10,019
and then like this does this for all for

00:16:08,850 --> 00:16:13,230
all the recording the rule server in

00:16:10,019 --> 00:16:15,899
your query in case you've forgotten what

00:16:13,230 --> 00:16:22,470
you've written there oh yeah

00:16:15,899 --> 00:16:25,639
so let's find query that is cool

00:16:22,470 --> 00:16:28,110
routines again just common across

00:16:25,639 --> 00:16:29,429
multiple Prometheus instances because

00:16:28,110 --> 00:16:31,829
now there's another cool thing which is

00:16:29,429 --> 00:16:36,329
the split view which allows you to

00:16:31,829 --> 00:16:39,540
basically compare different instances so

00:16:36,329 --> 00:16:42,480
so for example my local one doesn't

00:16:39,540 --> 00:16:44,339
really do much on the left but robust

00:16:42,480 --> 00:16:46,769
perception one does a lot so this is

00:16:44,339 --> 00:16:49,290
good also to compare death versus prod

00:16:46,769 --> 00:16:55,350
for example because it basically copies

00:16:49,290 --> 00:16:58,889
also the add a query and I think we're

00:16:55,350 --> 00:17:02,369
almost through the demo so the last cool

00:16:58,889 --> 00:17:08,459
thing we've got some sort of faceting

00:17:02,369 --> 00:17:11,270
here so if I start actually this that

00:17:08,459 --> 00:17:11,270
just go to this one

00:17:16,930 --> 00:17:22,030
so it gives you some jobs oh yeah that

00:17:20,290 --> 00:17:25,630
is that looks like a lot of jobs with

00:17:22,030 --> 00:17:28,210
some sort of eddy in here mmm let's just

00:17:25,630 --> 00:17:29,890
choose this one so know that this

00:17:28,210 --> 00:17:32,890
basically helps you to find out what

00:17:29,890 --> 00:17:36,880
like actual queries are available by the

00:17:32,890 --> 00:17:40,240
alert manager job and then I can look

00:17:36,880 --> 00:17:47,040
for a metric here so I just take this

00:17:40,240 --> 00:17:49,900
one and then it totally zones in on the

00:17:47,040 --> 00:17:52,450
labels that are available based on the

00:17:49,900 --> 00:17:54,880
previous real based on the previous

00:17:52,450 --> 00:17:57,220
selectors right and so you only end up

00:17:54,880 --> 00:18:00,850
with suggestions that make sense to

00:17:57,220 --> 00:18:08,770
everything that came before yeah and I

00:18:00,850 --> 00:18:12,790
think that was the last thing yeah cool

00:18:08,770 --> 00:18:18,580
yeah oh one more thing multiple queries

00:18:12,790 --> 00:18:21,310
in the same graph so that's also cool go

00:18:18,580 --> 00:18:25,080
routines again cool doesn't make any

00:18:21,310 --> 00:18:28,780
sense compared to but we just did anyway

00:18:25,080 --> 00:18:33,370
alright so that was what we came up with

00:18:28,780 --> 00:18:36,040
so far it's still super alpha but it's

00:18:33,370 --> 00:18:39,580
behind a feature flag if you paid

00:18:36,040 --> 00:18:42,340
attention to the two DCI slide you can

00:18:39,580 --> 00:18:45,060
get this basically right now with just

00:18:42,340 --> 00:18:48,160
using the latest the latest docker image

00:18:45,060 --> 00:18:52,720
we're thinking of releasing this in 6/3

00:18:48,160 --> 00:18:57,400
oh maybe sooner I gotta talk to my boss

00:18:52,720 --> 00:18:58,240
basically about this yeah so just to

00:18:57,400 --> 00:19:02,250
show you a bit more what we're working

00:18:58,240 --> 00:19:06,180
on yeah okay so yeah

00:19:02,250 --> 00:19:08,440
- okay yeah this is Bruce Lewis so the

00:19:06,180 --> 00:19:10,300
support for the completion needs a bit

00:19:08,440 --> 00:19:12,010
more work there's some Julia's been

00:19:10,300 --> 00:19:14,350
bugging me about this like we just need

00:19:12,010 --> 00:19:16,210
completion for on and group left but

00:19:14,350 --> 00:19:20,050
it's a bit more tricky because we need

00:19:16,210 --> 00:19:21,660
to like execute other the queries around

00:19:20,050 --> 00:19:25,780
there but we can do this that's cool

00:19:21,660 --> 00:19:30,160
then the Prometheus exposition format

00:19:25,780 --> 00:19:30,430
has this help text outline around what

00:19:30,160 --> 00:19:32,920
occur

00:19:30,430 --> 00:19:34,090
and when the right ahead lot it was my

00:19:32,920 --> 00:19:37,540
understanding when Israeli headlock

00:19:34,090 --> 00:19:39,460
stuff is implemented we can we can

00:19:37,540 --> 00:19:43,890
possibly show these kaveri metadata as

00:19:39,460 --> 00:19:47,110
like time yeah time series metadata on

00:19:43,890 --> 00:19:47,890
also in the UI I think that's been that

00:19:47,110 --> 00:19:50,950
will be pretty cool

00:19:47,890 --> 00:19:55,810
so then another cool thing that's coming

00:19:50,950 --> 00:19:57,730
is the multi step panel and I've seen a

00:19:55,810 --> 00:19:59,260
couple of uses of the single sample but

00:19:57,730 --> 00:20:01,780
this is really cool to come just show a

00:19:59,260 --> 00:20:03,820
bunch of related ones in like a single

00:20:01,780 --> 00:20:05,980
fashion and what you see there is this

00:20:03,820 --> 00:20:08,020
is like the same or it's like these are

00:20:05,980 --> 00:20:10,240
multiple instances of the multi-step

00:20:08,020 --> 00:20:11,910
panel in just like different modes of

00:20:10,240 --> 00:20:15,190
how things couldn't be displayed and

00:20:11,910 --> 00:20:17,500
yeah just like in a single cell panel

00:20:15,190 --> 00:20:19,630
allows you to set various thresholds so

00:20:17,500 --> 00:20:24,070
you get like quickly view on what's

00:20:19,630 --> 00:20:27,700
happening then the export management big

00:20:24,070 --> 00:20:30,250
topic we hear lots about it and we

00:20:27,700 --> 00:20:31,030
working a bit more about integrations

00:20:30,250 --> 00:20:33,250
with the mix-ins

00:20:31,030 --> 00:20:35,310
see also tumblr keys talk then we're

00:20:33,250 --> 00:20:37,990
thinking really hard on how to do

00:20:35,310 --> 00:20:40,390
basically how do how to save the changes

00:20:37,990 --> 00:20:44,110
back into get if you manage your -

00:20:40,390 --> 00:20:46,420
posting it and then also really good or

00:20:44,110 --> 00:20:49,180
really useful for people who like my

00:20:46,420 --> 00:20:52,570
friend peter at fastly work a lot with

00:20:49,180 --> 00:20:58,150
or like have to migrate thousands of

00:20:52,570 --> 00:21:00,730
dashboards or like hundred reports panel

00:20:58,150 --> 00:21:02,860
convicts because or like defaults for

00:21:00,730 --> 00:21:05,980
panel conflicts because he just needs to

00:21:02,860 --> 00:21:09,040
click all the time like remove the fill

00:21:05,980 --> 00:21:12,150
from the stat graph because who needs a

00:21:09,040 --> 00:21:15,340
fill anyway so one more thing

00:21:12,150 --> 00:21:20,080
logging is coming to agra fauna this

00:21:15,340 --> 00:21:25,350
works what do you see there since they

00:21:20,080 --> 00:21:25,350
have 30 seconds oh just couple timeout

00:21:28,150 --> 00:21:38,500
cool thing here we can basically use

00:21:31,200 --> 00:21:43,300
prometheus style selectors to son always

00:21:38,500 --> 00:21:44,320
a fun one to query logs or like krei

00:21:43,300 --> 00:21:48,789
locks in our lock

00:21:44,320 --> 00:21:50,350
system and then use I guess garbage

00:21:48,789 --> 00:21:52,690
collection is always good yeah

00:21:50,350 --> 00:21:55,779
so you like look fool arcs so is it

00:21:52,690 --> 00:21:58,720
really simplified locks solution talk to

00:21:55,779 --> 00:22:04,929
Tom bulky or myself about this and I

00:21:58,720 --> 00:22:06,320
think that is it yeah so thanks for

00:22:04,929 --> 00:22:10,160
listening

00:22:06,320 --> 00:22:10,160
[Applause]

00:22:12,720 --> 00:22:15,370
thank you David

00:22:14,080 --> 00:22:19,690
okay we've got like three or four

00:22:15,370 --> 00:22:22,330
minutes for questions yeah great doc and

00:22:19,690 --> 00:22:23,919
thanks of which it's great to see the

00:22:22,330 --> 00:22:27,639
future the Rehana how do you look like

00:22:23,919 --> 00:22:29,139
my question is how you can tell which is

00:22:27,639 --> 00:22:31,600
recording grow which is not in the

00:22:29,139 --> 00:22:36,610
explore mode and how you can tell what's

00:22:31,600 --> 00:22:39,610
the query behind that rule so I guess

00:22:36,610 --> 00:22:42,340
like visually you can identify them by

00:22:39,610 --> 00:22:44,529
the colons if people follow the like

00:22:42,340 --> 00:22:48,129
name right so I think that's a pretty

00:22:44,529 --> 00:22:50,289
good thing to do we could probably also

00:22:48,129 --> 00:22:52,360
do because we because we get all the

00:22:50,289 --> 00:22:54,039
rules we could do string matching to

00:22:52,360 --> 00:22:56,289
basically tell you like this is a

00:22:54,039 --> 00:22:58,629
recording rule and possibly also just

00:22:56,289 --> 00:23:01,570
put it in a little tooltip that you can

00:22:58,629 --> 00:23:05,320
just hover over to see the to see what

00:23:01,570 --> 00:23:07,480
the underlying query is yeah okay and

00:23:05,320 --> 00:23:11,500
next question what is the source of

00:23:07,480 --> 00:23:14,320
those locks you have shown us so girl

00:23:11,500 --> 00:23:16,509
fauna is here secretly being developing

00:23:14,320 --> 00:23:18,340
a log aggregation system that you're

00:23:16,509 --> 00:23:21,940
gonna hear a lot about in the future

00:23:18,340 --> 00:23:25,090
yeah thank you were you allowed to

00:23:21,940 --> 00:23:28,389
announce that today yeah I'm not sure if

00:23:25,090 --> 00:23:31,629
I was allowed to but anyway thanks for

00:23:28,389 --> 00:23:37,539
the talk and the log aggregation you

00:23:31,629 --> 00:23:40,629
just presented Oh last slide is this

00:23:37,539 --> 00:23:43,269
something comparable to Cabana

00:23:40,629 --> 00:23:49,419
so Cabana does a lot a lot more but we

00:23:43,269 --> 00:23:50,789
want you oh I'm not allowed my my boss

00:23:49,419 --> 00:23:54,309
has spoken

00:23:50,789 --> 00:23:55,480
yeah it'll be lightning talk about it we

00:23:54,309 --> 00:23:57,570
just hear from the other corner of the

00:23:55,480 --> 00:23:57,570
room

00:24:00,690 --> 00:24:04,870
okay more questions there's one in the

00:24:03,070 --> 00:24:16,210
middle here if you could pass that

00:24:04,870 --> 00:24:18,630
through hi good talk by the way I have a

00:24:16,210 --> 00:24:21,520
question regarding the organizations and

00:24:18,630 --> 00:24:26,590
multi-tenancy you have multi-tenancy

00:24:21,520 --> 00:24:30,400
enabled and what I'm was curious about

00:24:26,590 --> 00:24:33,039
if you guys are planning on elaborating

00:24:30,400 --> 00:24:36,250
all support in regards to multi

00:24:33,039 --> 00:24:39,760
tendencies since the support I believe

00:24:36,250 --> 00:24:42,429
it's currently limited hmm

00:24:39,760 --> 00:24:45,130
I think we should talk afterwards

00:24:42,429 --> 00:24:48,039
because that is a very detailed topic

00:24:45,130 --> 00:24:55,570
also based on basically what all systems

00:24:48,039 --> 00:24:57,250
you rely on so yeah so hi I mean um I've

00:24:55,570 --> 00:24:59,100
got a question about log aggregation no

00:24:57,250 --> 00:25:01,960
just just kidding

00:24:59,100 --> 00:25:03,400
so what I've noticed is that when you

00:25:01,960 --> 00:25:05,350
have a whole bunch of people making

00:25:03,400 --> 00:25:08,320
dashboards they all come up with

00:25:05,350 --> 00:25:10,720
different like Luc's of fields what they

00:25:08,320 --> 00:25:12,700
end up looking like yeah so for example

00:25:10,720 --> 00:25:14,710
I'm a graph purist if I'm making a stack

00:25:12,700 --> 00:25:16,150
rough I'm always using a fill if I'm not

00:25:14,710 --> 00:25:18,789
making you stack rough I'm not using a

00:25:16,150 --> 00:25:20,679
fill not everybody gets that rule are

00:25:18,789 --> 00:25:22,960
there any plans on maybe coming up with

00:25:20,679 --> 00:25:24,990
like a graph on ax best practices

00:25:22,960 --> 00:25:29,140
document just like we have a Prometheus

00:25:24,990 --> 00:25:30,789
best practices so yeah a couple of point

00:25:29,140 --> 00:25:33,549
students to this question

00:25:30,789 --> 00:25:36,909
first one is the the defaults should

00:25:33,549 --> 00:25:38,919
really help with this because then you

00:25:36,909 --> 00:25:40,929
just have them in your provisioning API

00:25:38,919 --> 00:25:42,990
or wherever and it's just like set

00:25:40,929 --> 00:25:45,460
company-wide or like installation wide

00:25:42,990 --> 00:25:47,909
another thing is that we really don't

00:25:45,460 --> 00:25:50,919
want to prescribe how you do your things

00:25:47,909 --> 00:25:52,780
so it's kind of hard to deliver best

00:25:50,919 --> 00:25:54,520
practices around this but there's a

00:25:52,780 --> 00:25:57,400
second thing or a third thing which is

00:25:54,520 --> 00:26:00,490
around that mix-ins because where people

00:25:57,400 --> 00:26:03,250
basically can define dashboards on how

00:26:00,490 --> 00:26:06,820
they should look like for a certain

00:26:03,250 --> 00:26:09,430
service for example and and then that

00:26:06,820 --> 00:26:13,510
decision has been made for you basically

00:26:09,430 --> 00:26:15,000
and you not to worry about it thank you

00:26:13,510 --> 00:26:20,890
David

00:26:15,000 --> 00:26:20,890

YouTube URL: https://www.youtube.com/watch?v=mIfjBcjAEyE


