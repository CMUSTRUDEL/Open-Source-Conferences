Title: PromCon 2017: Lightning Talk - Running and Monitoring Your Own Mail Server - Jonas Große Sundrup
Publication date: 2017-09-04
Playlist: PromCon 2017
Description: 
	* Abstract:

Lightning Talk

* Speaker:

Jonas Große Sundrup

* Slides:

https://promcon.io/2017-munich/slides/lightning-talks-day1-08.pdf

* PromCon website:

https://promcon.io/
Captions: 
	00:00:00,380 --> 00:00:17,520
[Music]

00:00:13,429 --> 00:00:19,380
hi I'm Eunice I I'm running my own mail

00:00:17,520 --> 00:00:22,710
server and as I'm running my own mail

00:00:19,380 --> 00:00:24,150
server I would like to get informed when

00:00:22,710 --> 00:00:25,769
it breaks down because if my master

00:00:24,150 --> 00:00:28,470
bersama cannot receive any mail which is

00:00:25,769 --> 00:00:31,109
not good for that I've implemented this

00:00:28,470 --> 00:00:44,670
little thing the mail exporter which

00:00:31,109 --> 00:00:45,530
basically what it does is okay just

00:00:44,670 --> 00:00:48,360
start again

00:00:45,530 --> 00:00:49,980
hi I'm Eunice and I'm running my own

00:00:48,360 --> 00:00:51,180
mail server that's why I want to get

00:00:49,980 --> 00:00:52,739
notified when it breaks down because

00:00:51,180 --> 00:00:54,090
then I kind of receive an email which is

00:00:52,739 --> 00:00:55,920
not good

00:00:54,090 --> 00:00:57,809
and therefore I implemented the medic

00:00:55,920 --> 00:01:00,359
supporter what the mail exporter does is

00:00:57,809 --> 00:01:02,609
basically I give it just lists of

00:01:00,359 --> 00:01:04,850
external SMTP servers and then it

00:01:02,609 --> 00:01:08,340
periodically just sends email over those

00:01:04,850 --> 00:01:10,409
SMTP servers to myself and then just

00:01:08,340 --> 00:01:12,420
sees the mail arrives in time in a

00:01:10,409 --> 00:01:17,040
timeout that I can specify you can see

00:01:12,420 --> 00:01:18,900
that on the here on the top left that is

00:01:17,040 --> 00:01:21,450
the deliverer success that looks for the

00:01:18,900 --> 00:01:24,119
five service I haven't placed quite good

00:01:21,450 --> 00:01:26,490
and if that is if one of the Mail's

00:01:24,119 --> 00:01:28,680
doesn't doesn't arrive at time then that

00:01:26,490 --> 00:01:30,960
just goes from one to zero and I can see

00:01:28,680 --> 00:01:33,360
there is a problem the nice thing about

00:01:30,960 --> 00:01:35,520
that is I can kind of distinguish how

00:01:33,360 --> 00:01:37,740
severe things are because when one of

00:01:35,520 --> 00:01:40,079
the external SMTP servers is not able to

00:01:37,740 --> 00:01:43,159
deliver then this might be a problem on

00:01:40,079 --> 00:01:45,930
the other side if zero of my five

00:01:43,159 --> 00:01:47,369
external SMTP servers are able to

00:01:45,930 --> 00:01:50,939
deliver then the problem might be more

00:01:47,369 --> 00:01:52,950
on my site I also when a male runs into

00:01:50,939 --> 00:01:56,310
timeout I also track if it comes

00:01:52,950 --> 00:01:58,829
anywhere after so if I see that a mail

00:01:56,310 --> 00:02:01,020
that the mail delivery in time failed

00:01:58,829 --> 00:02:03,000
but there is a late mail on that server

00:02:01,020 --> 00:02:05,250
afterwards I can guess that it was

00:02:03,000 --> 00:02:08,190
probably a male that was just late what

00:02:05,250 --> 00:02:11,580
it also does is it measures to the times

00:02:08,190 --> 00:02:13,830
the round-trip times that the male the

00:02:11,580 --> 00:02:15,480
male takes for example the entire

00:02:13,830 --> 00:02:17,730
the duration from sending until

00:02:15,480 --> 00:02:19,140
receiving which is a little bit spiky at

00:02:17,730 --> 00:02:23,610
the moment or at least in that

00:02:19,140 --> 00:02:25,620
screenshot and it also it also tracks

00:02:23,610 --> 00:02:29,190
the center durations which is basically

00:02:25,620 --> 00:02:31,170
the time of the handshake that the time

00:02:29,190 --> 00:02:34,410
it takes to hand off the mail to the

00:02:31,170 --> 00:02:36,390
external SMTP server so that I can see

00:02:34,410 --> 00:02:37,740
if the if the sender ation if the

00:02:36,390 --> 00:02:39,180
handshake take took longer if they

00:02:37,740 --> 00:02:42,750
actually deliver it of long and how long

00:02:39,180 --> 00:02:44,760
they took and yeah that's basically how

00:02:42,750 --> 00:02:46,620
I can sleep at night because I know when

00:02:44,760 --> 00:02:48,210
something breaks down then I get

00:02:46,620 --> 00:02:50,550
notified because I have my metrics there

00:02:48,210 --> 00:02:52,380
in the at the bottom you'll also see a

00:02:50,550 --> 00:02:55,190
different metric which is similar to the

00:02:52,380 --> 00:02:58,260
overall delivery success which is the

00:02:55,190 --> 00:03:01,050
basically the success of sending or the

00:02:58,260 --> 00:03:04,260
fails of off sense because when the

00:03:01,050 --> 00:03:05,520
other mail server does not or I cannot

00:03:04,260 --> 00:03:07,140
connect to the other mail server for

00:03:05,520 --> 00:03:08,940
some reason that is not technically

00:03:07,140 --> 00:03:11,280
delivery failure because I couldn't even

00:03:08,940 --> 00:03:14,520
hand something over to deliver but you

00:03:11,280 --> 00:03:16,860
would also want to alert on that because

00:03:14,520 --> 00:03:19,110
if that happens for a long time then

00:03:16,860 --> 00:03:23,459
there might also be a problem are there

00:03:19,110 --> 00:03:24,780
any questions if not there is the there

00:03:23,459 --> 00:03:26,489
is the URL if you want to take a look at

00:03:24,780 --> 00:03:28,380
the software and otherwise thank you for

00:03:26,489 --> 00:03:40,880
your attention

00:03:28,380 --> 00:03:41,080
[Music]

00:03:40,880 --> 00:03:44,219
you

00:03:41,080 --> 00:03:44,219

YouTube URL: https://www.youtube.com/watch?v=AWUytyzwPyE


