Title: PromCon 2016: Deploying Prometheus at DigitalOcean - Carlos Amedee
Publication date: 2016-09-04
Playlist: PromCon 2016
Description: 
	* Abstract:

This talk focuses on how we use configuration management at DigitalOcean to deploy and maintain many instances of Prometheus. We will discuss the benefits and challenges of deploying Prometheus at a large scale.

* Speaker biography:

Carlos Amedee is a software engineer at DigitalOcean. He is currently pursuing a master's degree at Georgia Tech. He is passionate about distributed systems and orchestration.

* Slides:

https://speakerdeck.com/exobit/the-care-and-feeding-of-prometheus

* PromCon website:

https://promcon.io/
Captions: 
	00:00:00,720 --> 00:00:05,490
we have Kalos Amanda here he's working

00:00:03,270 --> 00:00:07,529
at digitalocean currently still getting

00:00:05,490 --> 00:00:09,629
master's degree at Georgia Tech and he

00:00:07,529 --> 00:00:12,299
really loves distributed systems and

00:00:09,629 --> 00:00:14,639
he's going to tell you about deploying

00:00:12,299 --> 00:00:16,259
prometheus at digitalocean another

00:00:14,639 --> 00:00:23,250
digitalocean talk but i think it's going

00:00:16,259 --> 00:00:24,900
to focus on something else can everybody

00:00:23,250 --> 00:00:27,359
hear me yeah

00:00:24,900 --> 00:00:29,099
so yes I'm the third person to talk from

00:00:27,359 --> 00:00:32,700
digit ocean this weekend or this

00:00:29,099 --> 00:00:34,950
conference so instead of being a

00:00:32,700 --> 00:00:38,520
technical talk I'm going to lean towards

00:00:34,950 --> 00:00:41,040
being a social talk so this is deploying

00:00:38,520 --> 00:00:44,250
prometheus at digitalocean the the care

00:00:41,040 --> 00:00:46,530
and feeding of Prometheus digital ocean

00:00:44,250 --> 00:00:48,840
for the third time you hear this this

00:00:46,530 --> 00:00:50,940
weekend or this this conference is a

00:00:48,840 --> 00:00:53,910
cloud services provider we focus on

00:00:50,940 --> 00:00:56,550
simplicity we have a virtual machine

00:00:53,910 --> 00:01:00,050
offering which we call droplets we also

00:00:56,550 --> 00:01:02,700
have block storage we have virtual IPS

00:01:00,050 --> 00:01:05,010
and many things coming in the future so

00:01:02,700 --> 00:01:08,610
if you haven't tried us give us a try or

00:01:05,010 --> 00:01:09,000
a decent company Who am I I'm a software

00:01:08,610 --> 00:01:13,500
engineer

00:01:09,000 --> 00:01:14,310
I was I was in the metrics team at

00:01:13,500 --> 00:01:16,230
digitalocean

00:01:14,310 --> 00:01:17,760
I am now in a team called the agent team

00:01:16,230 --> 00:01:20,250
some people call it the secret agent

00:01:17,760 --> 00:01:23,750
team which means I probably won't talk

00:01:20,250 --> 00:01:26,400
about what I'm currently working on but

00:01:23,750 --> 00:01:30,450
as mentioned I'm a master's in computer

00:01:26,400 --> 00:01:33,780
science candidate at Georgia Tech I am a

00:01:30,450 --> 00:01:37,590
lover of fine metrics and you see my

00:01:33,780 --> 00:01:40,050
Twitter handle here so I'll give you

00:01:37,590 --> 00:01:42,870
some stats about Prometheus at

00:01:40,050 --> 00:01:46,710
digitalocean from a very lightweight

00:01:42,870 --> 00:01:48,720
check earlier today or yesterday we have

00:01:46,710 --> 00:01:52,610
more than 80 instances of Prometheus

00:01:48,720 --> 00:01:56,940
running in our infrastructure we have

00:01:52,610 --> 00:02:02,540
more than 15 types of exporters deployed

00:01:56,940 --> 00:02:04,290
internally we have more than five

00:02:02,540 --> 00:02:06,240
exporters that have were written

00:02:04,290 --> 00:02:08,069
in-house that are not open-source

00:02:06,240 --> 00:02:10,139
they're sort of custom exporters for our

00:02:08,069 --> 00:02:13,560
infrastructure and we have six of

00:02:10,139 --> 00:02:17,000
open-source exporters which were written

00:02:13,560 --> 00:02:21,720
you know by employees of the company and

00:02:17,000 --> 00:02:24,270
open sourced our internal encourage the

00:02:21,720 --> 00:02:25,620
the relevant internal architecture or

00:02:24,270 --> 00:02:27,360
the relative relevant internal

00:02:25,620 --> 00:02:30,300
architectural components for this

00:02:27,360 --> 00:02:33,180
particular talk are like our rails apps

00:02:30,300 --> 00:02:35,730
we have a couple of fairly large rails

00:02:33,180 --> 00:02:39,630
apps and we have a lot of grown

00:02:35,730 --> 00:02:44,099
micro-services means a lot of complexity

00:02:39,630 --> 00:02:45,780
so that the I want I want to discuss or

00:02:44,099 --> 00:02:49,230
trying to touch on the social aspect of

00:02:45,780 --> 00:02:52,260
deploying software or deploying an

00:02:49,230 --> 00:02:55,260
open-source ecosystem and encouraging

00:02:52,260 --> 00:02:57,090
people within the company to use it one

00:02:55,260 --> 00:02:58,440
thing we did not do add to the ocean is

00:02:57,090 --> 00:03:02,030
force people to use it it's not a

00:02:58,440 --> 00:03:04,049
mandate to use Prometheus someone

00:03:02,030 --> 00:03:06,870
started working with it and eventually

00:03:04,049 --> 00:03:11,010
it just became the the new hotness that

00:03:06,870 --> 00:03:13,080
everybody fell in love with the social

00:03:11,010 --> 00:03:16,190
aspect is often often ignored but

00:03:13,080 --> 00:03:19,019
ultimately as impactful as the software

00:03:16,190 --> 00:03:22,769
decisions that are made so a lot of

00:03:19,019 --> 00:03:24,600
times we sort of ignore the social part

00:03:22,769 --> 00:03:26,640
of trying to get people to use software

00:03:24,600 --> 00:03:28,590
we sort of just force we were like this

00:03:26,640 --> 00:03:31,109
is clearly better this is architectural

00:03:28,590 --> 00:03:33,690
e better thus you must use it and it's

00:03:31,109 --> 00:03:35,220
just not that simple we are people and

00:03:33,690 --> 00:03:38,370
we are the the consumers of this

00:03:35,220 --> 00:03:39,630
software so that means that you have to

00:03:38,370 --> 00:03:42,180
deal with feelings and you have to deal

00:03:39,630 --> 00:03:45,359
with things that you have to observe

00:03:42,180 --> 00:03:47,519
feelings and observe why those feelings

00:03:45,359 --> 00:03:51,150
are held in order to really promote like

00:03:47,519 --> 00:03:53,040
a peace ecosystem like Prometheus into

00:03:51,150 --> 00:03:55,400
you know it's being deployed at a

00:03:53,040 --> 00:03:55,400
company

00:03:56,030 --> 00:03:59,570
so we want to talk about some of the

00:03:57,680 --> 00:04:03,440
general challenges that we've seen or

00:03:59,570 --> 00:04:06,590
that we've experienced um how do you

00:04:03,440 --> 00:04:10,070
promote Prometheus at a fast growing

00:04:06,590 --> 00:04:12,830
organization when I when Prometheus was

00:04:10,070 --> 00:04:15,820
introduced into digital ocean there were

00:04:12,830 --> 00:04:19,609
about 50 employees there are currently

00:04:15,820 --> 00:04:22,250
250 employees which is a very large

00:04:19,609 --> 00:04:27,020
scale of growth in a very short period

00:04:22,250 --> 00:04:29,480
of time how do you convince developers

00:04:27,020 --> 00:04:32,120
developers familiar with graphite and

00:04:29,480 --> 00:04:33,680
similar services that they should use

00:04:32,120 --> 00:04:38,450
Prometheus and we'll get into that a

00:04:33,680 --> 00:04:41,270
little later on as I mentioned technical

00:04:38,450 --> 00:04:42,620
sound this isn't isn't enough humans

00:04:41,270 --> 00:04:46,060
have to be convinced that software

00:04:42,620 --> 00:04:49,850
should be adopted and how do you promote

00:04:46,060 --> 00:04:51,350
organic adoption something weird you're

00:04:49,850 --> 00:04:53,030
you're sort of lighting a little fire

00:04:51,350 --> 00:04:57,620
and saying hey you know go off and and

00:04:53,030 --> 00:04:59,990
build something within the company so

00:04:57,620 --> 00:05:02,840
first we're gonna talk about 2014 the

00:04:59,990 --> 00:05:08,030
dark year is pre-pre Prometheus at

00:05:02,840 --> 00:05:10,690
digital ssin that no not trying to say

00:05:08,030 --> 00:05:12,890
that open T is DB isn't a great product

00:05:10,690 --> 00:05:15,710
I've never personally worked with it

00:05:12,890 --> 00:05:19,640
this is before I joined the company but

00:05:15,710 --> 00:05:24,260
Ian can tell you some war stories we had

00:05:19,640 --> 00:05:28,669
a open TS DB cluster of 60 nodes which

00:05:24,260 --> 00:05:32,450
sounds fairly large we were using

00:05:28,669 --> 00:05:34,370
collect DB to collect for primary you

00:05:32,450 --> 00:05:35,690
know metrics collection from you know a

00:05:34,370 --> 00:05:38,710
lot of the infrastructure and we also

00:05:35,690 --> 00:05:42,800
had graphite and stats D deployed

00:05:38,710 --> 00:05:44,720
throughout the infrastructure so the

00:05:42,800 --> 00:05:46,820
first thing that everyone has to deal

00:05:44,720 --> 00:05:49,580
with when you're trying to encourage

00:05:46,820 --> 00:05:56,330
people to use Prometheus as the they

00:05:49,580 --> 00:05:59,810
push versus pull debate this was a

00:05:56,330 --> 00:06:01,640
little and again that this is pre pre me

00:05:59,810 --> 00:06:04,409
joining digital ocean so this is all

00:06:01,640 --> 00:06:08,039
coming from Ian back there

00:06:04,409 --> 00:06:09,479
this seemed really simple and it sort of

00:06:08,039 --> 00:06:13,619
answered itself because there was a

00:06:09,479 --> 00:06:16,739
frustrating moment where ian was in

00:06:13,619 --> 00:06:21,089
charge of this hoping DST stb cluster

00:06:16,739 --> 00:06:24,929
and one amazing thing happened and that

00:06:21,089 --> 00:06:27,419
was that he was he would stand up this

00:06:24,929 --> 00:06:29,219
cluster he would support it he would you

00:06:27,419 --> 00:06:31,589
know keep it nice and running and then

00:06:29,219 --> 00:06:34,080
all of a sudden some random group in

00:06:31,589 --> 00:06:36,269
some other department would decide that

00:06:34,080 --> 00:06:39,569
they need to record metrics at some

00:06:36,269 --> 00:06:41,249
ridiculous granularity and not inform

00:06:39,569 --> 00:06:43,889
anybody because that's that sort of a

00:06:41,249 --> 00:06:45,449
people process like going across the bow

00:06:43,889 --> 00:06:47,819
going across the room and saying hey I'm

00:06:45,449 --> 00:06:49,229
gonna go do this that doesn't always get

00:06:47,819 --> 00:06:52,050
enforced so that they would just stand

00:06:49,229 --> 00:06:55,860
up this new service send a ton of

00:06:52,050 --> 00:06:56,819
metrics over to the cluster and it sort

00:06:55,860 --> 00:06:59,339
of made him cry

00:06:56,819 --> 00:07:06,300
so yeah I think he referred to it as

00:06:59,339 --> 00:07:08,729
seeing a flame graph of sadness it's it

00:07:06,300 --> 00:07:11,459
became very clear that with a pull over

00:07:08,729 --> 00:07:15,029
a pull model there's less of a people

00:07:11,459 --> 00:07:16,289
there's less of a need to have like that

00:07:15,029 --> 00:07:18,240
people communication that

00:07:16,289 --> 00:07:20,789
person-to-person communication you

00:07:18,240 --> 00:07:23,610
manage the pole you manage how much data

00:07:20,789 --> 00:07:25,740
is coming in from one point not from a

00:07:23,610 --> 00:07:27,619
bunch of various groups that just decide

00:07:25,740 --> 00:07:30,629
to randomly send whatever information

00:07:27,619 --> 00:07:33,779
and it sort of forces you to have that

00:07:30,629 --> 00:07:35,879
discussion about granularity hey maybe

00:07:33,779 --> 00:07:38,669
you don't need you know to record this

00:07:35,879 --> 00:07:39,300
every five seconds maybe you just need a

00:07:38,669 --> 00:07:43,610
minute

00:07:39,300 --> 00:07:43,610
a minute of polling of the information

00:07:44,539 --> 00:07:49,379
and one thing that was observed at the

00:07:47,699 --> 00:07:53,449
time is that open DB had sort of a

00:07:49,379 --> 00:07:57,800
lacking visualization and querying

00:07:53,449 --> 00:08:02,329
semantics functionality so that made

00:07:57,800 --> 00:08:02,329
Prometheus really really nice and shiny

00:08:02,560 --> 00:08:09,169
so we come into early 2015 where we have

00:08:06,199 --> 00:08:11,030
like the initial Prometheus period some

00:08:09,169 --> 00:08:14,410
of the challenges at this period or that

00:08:11,030 --> 00:08:16,880
this period brought was determining the

00:08:14,410 --> 00:08:18,889
trying to determine the reaction to the

00:08:16,880 --> 00:08:20,990
introduction of Prometheus it was sort

00:08:18,889 --> 00:08:22,490
of done by one or a very small group of

00:08:20,990 --> 00:08:26,750
people that brought Prometheus into the

00:08:22,490 --> 00:08:28,669
company and once you know what that

00:08:26,750 --> 00:08:33,529
reaction is and it's good then you can

00:08:28,669 --> 00:08:35,419
also encourage the adoption within the

00:08:33,529 --> 00:08:39,430
company without you know being

00:08:35,419 --> 00:08:39,430
heavy-handed and forcing people to do it

00:08:39,849 --> 00:08:45,830
so Ian rolled out note exporter people

00:08:43,700 --> 00:08:47,959
really liked it they really liked

00:08:45,830 --> 00:08:49,209
Prometheus they liked the visualization

00:08:47,959 --> 00:08:53,899
tools that came with it

00:08:49,209 --> 00:08:56,620
and at this point the the the very very

00:08:53,899 --> 00:08:59,390
small metrics team that he was running

00:08:56,620 --> 00:09:02,570
sort of started getting slammed with a

00:08:59,390 --> 00:09:04,910
request once they saw that there was a

00:09:02,570 --> 00:09:07,130
system that they really enjoyed looking

00:09:04,910 --> 00:09:10,370
at visualizations for and report and

00:09:07,130 --> 00:09:13,310
using they decided to ask him for the

00:09:10,370 --> 00:09:16,940
world so the metrics team was Ricky was

00:09:13,310 --> 00:09:18,800
I remember I was I came in at the tail

00:09:16,940 --> 00:09:25,160
end of this but I remember there being a

00:09:18,800 --> 00:09:28,459
a vicious vicious JIRA ticket queue of

00:09:25,160 --> 00:09:33,440
things that we had to sort of instrument

00:09:28,459 --> 00:09:36,890
and collect information from so

00:09:33,440 --> 00:09:38,959
encouraging Prometheus users encouraging

00:09:36,890 --> 00:09:41,899
people to use Prometheus without forcing

00:09:38,959 --> 00:09:44,540
them was an interesting task and the

00:09:41,899 --> 00:09:49,670
route that that was taken at the time

00:09:44,540 --> 00:09:51,980
was to create a one cluster or you know

00:09:49,670 --> 00:09:56,360
a pair of Prometheus instances that

00:09:51,980 --> 00:09:58,279
would that your average engineer didn't

00:09:56,360 --> 00:09:59,570
have to support no one else had to stand

00:09:58,279 --> 00:10:01,279
up they didn't have to do anything

00:09:59,570 --> 00:10:03,860
everything was provided for you was

00:10:01,279 --> 00:10:05,779
automagically the only people that had

00:10:03,860 --> 00:10:08,240
to sort of deal with the upkeep of that

00:10:05,779 --> 00:10:13,699
server and that service was the metrics

00:10:08,240 --> 00:10:15,250
team they also there was also a

00:10:13,699 --> 00:10:18,550
deployment of

00:10:15,250 --> 00:10:21,910
of prom - along with it which which was

00:10:18,550 --> 00:10:23,830
great we had this conversation last

00:10:21,910 --> 00:10:27,220
night he's just like oh I apologize for

00:10:23,830 --> 00:10:28,980
pomegranate prom - no this is pretty

00:10:27,220 --> 00:10:36,040
awesome and thank you for the the work

00:10:28,980 --> 00:10:38,500
it was appreciated so entering late 2015

00:10:36,040 --> 00:10:42,190
prometheus hit like critical what I call

00:10:38,500 --> 00:10:43,330
critical mass at digitalocean and some

00:10:42,190 --> 00:10:45,760
of the challenges that came with that

00:10:43,330 --> 00:10:47,590
was determining the the barriers that

00:10:45,760 --> 00:10:51,160
existed for engineers to learn how to

00:10:47,590 --> 00:10:54,040
enable metrics collection so generally

00:10:51,160 --> 00:10:56,920
like telemetry Prometheus instance

00:10:54,040 --> 00:10:58,240
deployed we had Prometheus instances

00:10:56,920 --> 00:11:01,510
that were deployed with degraded

00:10:58,240 --> 00:11:05,140
performance and we needed to investigate

00:11:01,510 --> 00:11:07,290
why the we had to combat I definitely

00:11:05,140 --> 00:11:10,300
had to combat some institutional fear

00:11:07,290 --> 00:11:12,400
and I'll get into that in a second

00:11:10,300 --> 00:11:14,320
and there was also the determining the

00:11:12,400 --> 00:11:16,960
barriers that existed for our individual

00:11:14,320 --> 00:11:18,490
engineers to learn about Prometheus to

00:11:16,960 --> 00:11:22,300
learn how to query Prometheus to learn

00:11:18,490 --> 00:11:24,690
how to instrument their software and to

00:11:22,300 --> 00:11:28,500
learn how to think in the Prometheus way

00:11:24,690 --> 00:11:28,500
and we'll talk about that

00:11:31,730 --> 00:11:40,500
so when Pandora was deployed you had to

00:11:38,090 --> 00:11:44,010
was initially deployed you had to do

00:11:40,500 --> 00:11:45,690
some the easiest way to add your your

00:11:44,010 --> 00:11:48,810
end points to add whatever service you

00:11:45,690 --> 00:11:50,640
want scraped to Pandora which was

00:11:48,810 --> 00:11:57,420
something that was already deployed and

00:11:50,640 --> 00:12:00,900
easily usable was to do some magic in in

00:11:57,420 --> 00:12:03,300
chef right so people that have you chef

00:12:00,900 --> 00:12:05,610
there there are many lovers of chef and

00:12:03,300 --> 00:12:07,500
there are many haters of Chef but it's a

00:12:05,610 --> 00:12:11,100
necessary evil that we sort of deal with

00:12:07,500 --> 00:12:12,960
nowadays but one thing that we

00:12:11,100 --> 00:12:14,910
experienced and we learned is that you

00:12:12,960 --> 00:12:16,260
know it wasn't easy enough like even

00:12:14,910 --> 00:12:17,580
though we provided a server that

00:12:16,260 --> 00:12:19,980
provided a service for you

00:12:17,580 --> 00:12:23,940
it wasn't easy enough for developers to

00:12:19,980 --> 00:12:28,710
sort of get to add their service to that

00:12:23,940 --> 00:12:32,070
service to the Pandora we also learned

00:12:28,710 --> 00:12:33,570
that and that was because of service

00:12:32,070 --> 00:12:35,610
discovery which we'll talk about in a

00:12:33,570 --> 00:12:37,470
second we also learned that it's the

00:12:35,610 --> 00:12:42,660
exporter deployment was a high barrier

00:12:37,470 --> 00:12:44,160
of entry so with chef I mean simply with

00:12:42,660 --> 00:12:46,830
a simple deployment right you can go to

00:12:44,160 --> 00:12:48,960
a server you can sort of stand up an

00:12:46,830 --> 00:12:50,280
exporter you know right like a shell

00:12:48,960 --> 00:12:51,720
script and everything's happy but that

00:12:50,280 --> 00:12:54,210
that's not going to work inside of a

00:12:51,720 --> 00:12:56,640
large infrastructure so for every single

00:12:54,210 --> 00:12:59,880
exporter that you wanted to deploy you

00:12:56,640 --> 00:13:01,620
have to create a cookbook and again you

00:12:59,880 --> 00:13:04,440
can love chef or you can hate chef and

00:13:01,620 --> 00:13:06,840
if you are a busy engineer and the last

00:13:04,440 --> 00:13:10,200
thing that you have time for is to

00:13:06,840 --> 00:13:12,090
create a cookbook just to deploy some

00:13:10,200 --> 00:13:18,300
exporter then that's gonna be a barrier

00:13:12,090 --> 00:13:21,000
of entry there was also there's also a

00:13:18,300 --> 00:13:22,950
desire to make sure that teams

00:13:21,000 --> 00:13:26,190
understood that there was no speed limit

00:13:22,950 --> 00:13:28,590
and by that I mean yes we have Pandora

00:13:26,190 --> 00:13:30,300
here we have this for me this supported

00:13:28,590 --> 00:13:33,090
Prometheus instance that's running

00:13:30,300 --> 00:13:34,740
within our infrastructure but if you

00:13:33,090 --> 00:13:37,170
went out and you learned all this stuff

00:13:34,740 --> 00:13:39,170
about Prometheus please have our

00:13:37,170 --> 00:13:41,370
blessings to go out and deploy your own

00:13:39,170 --> 00:13:44,490
instance of Prometheus if you

00:13:41,370 --> 00:13:47,089
to deploy if you want to support it so

00:13:44,490 --> 00:13:51,510
we made sure that we didn't slow down

00:13:47,089 --> 00:13:56,670
any progress in terms of metrics

00:13:51,510 --> 00:13:58,830
deployment so our chef repo is

00:13:56,670 --> 00:14:01,830
especially the pet the Prometheus and

00:13:58,830 --> 00:14:03,690
the Prometheus related cookbooks are

00:14:01,830 --> 00:14:05,610
fairly simple they're just general

00:14:03,690 --> 00:14:08,670
cookbooks that we use lightweight I'll

00:14:05,610 --> 00:14:10,710
wrap slight wing resource providers they

00:14:08,670 --> 00:14:17,310
have to be region aware since we have I

00:14:10,710 --> 00:14:19,440
think 13 regions initially and this is

00:14:17,310 --> 00:14:22,770
the tough one we were doing service

00:14:19,440 --> 00:14:25,110
discovery by chef searches right so we

00:14:22,770 --> 00:14:27,360
will do a search a chef search to search

00:14:25,110 --> 00:14:30,600
for the particular cookbooks that have

00:14:27,360 --> 00:14:32,430
like the exporters and then we would the

00:14:30,600 --> 00:14:35,400
particular nodes that have the exporters

00:14:32,430 --> 00:14:38,029
and then we would create the Prometheus

00:14:35,400 --> 00:14:43,680
like configuration file with those

00:14:38,029 --> 00:14:45,240
instances in it I think it was a little

00:14:43,680 --> 00:14:47,339
cumbersome it was a little confusing for

00:14:45,240 --> 00:14:51,900
people that weren't necessarily experts

00:14:47,339 --> 00:14:54,360
in chef and it was sort of a barrier to

00:14:51,900 --> 00:14:57,089
entry that we had to acknowledge exists

00:14:54,360 --> 00:14:59,550
and then move on to something which was

00:14:57,089 --> 00:15:02,760
better service records or SRV records we

00:14:59,550 --> 00:15:05,100
were like yeah this is simple right you

00:15:02,760 --> 00:15:07,709
could just add an entry into a DNS and

00:15:05,100 --> 00:15:08,370
it would be scraped and the world would

00:15:07,709 --> 00:15:10,020
be happy again

00:15:08,370 --> 00:15:13,290
and your service would be scraped your

00:15:10,020 --> 00:15:15,740
exported be spam but we found that

00:15:13,290 --> 00:15:20,610
people weren't generally interested in

00:15:15,740 --> 00:15:23,220
using chef to create DNS entries and the

00:15:20,610 --> 00:15:24,779
cleanup is also problematic so once you

00:15:23,220 --> 00:15:28,140
remove something or you move something

00:15:24,779 --> 00:15:30,420
it sort of became a bit of a mess I

00:15:28,140 --> 00:15:33,959
experienced this personally so

00:15:30,420 --> 00:15:38,959
eventually we ended up using console and

00:15:33,959 --> 00:15:41,550
it was way simpler to get to get your

00:15:38,959 --> 00:15:43,050
your endpoints great to get your your

00:15:41,550 --> 00:15:45,270
whether it was something that you would

00:15:43,050 --> 00:15:49,589
share anything yourself or it was an

00:15:45,270 --> 00:15:52,329
exporter there were a significant reduce

00:15:49,589 --> 00:15:53,829
reduction in the amount of code or

00:15:52,329 --> 00:15:59,139
on our cheffing you had to do in order

00:15:53,829 --> 00:16:03,129
to get that code out so part of this led

00:15:59,139 --> 00:16:05,139
into a discovery that since everybody

00:16:03,129 --> 00:16:08,049
doesn't want to create like books for

00:16:05,139 --> 00:16:10,449
all the exporters then we're going to

00:16:08,049 --> 00:16:12,220
make the cookbooks for them and make it

00:16:10,449 --> 00:16:14,589
really really easy for people to

00:16:12,220 --> 00:16:18,610
actually get chef's to to get exporters

00:16:14,589 --> 00:16:21,069
deployed this was hardly one of my

00:16:18,610 --> 00:16:23,139
duties so I feel very strong that's why

00:16:21,069 --> 00:16:26,199
I had to use Oprah I feel very strongly

00:16:23,139 --> 00:16:30,239
about how many cookbooks I had to write

00:16:26,199 --> 00:16:32,799
in a short amount of time for exporters

00:16:30,239 --> 00:16:35,829
we created a chef cookbook for each at

00:16:32,799 --> 00:16:38,679
Florida that we were using or that we

00:16:35,829 --> 00:16:41,439
wanted to use and we made sure that

00:16:38,679 --> 00:16:43,360
deployment was fairly simple this

00:16:41,439 --> 00:16:47,350
process involves creating 13 Mex border

00:16:43,360 --> 00:16:51,480
cookbooks internally so eventually

00:16:47,350 --> 00:16:54,910
you're in in order to add your service

00:16:51,480 --> 00:16:57,009
to Pandora or to one of our Prometheus

00:16:54,910 --> 00:16:59,319
instances it was as simple as writing

00:16:57,009 --> 00:17:02,110
like this model code which is like 12

00:16:59,319 --> 00:17:06,970
lines or something which is if you've

00:17:02,110 --> 00:17:09,909
ever seen chef fairly simple that's

00:17:06,970 --> 00:17:12,939
creating a node exporter and deploying

00:17:09,909 --> 00:17:15,279
it on tool box and that's creating a

00:17:12,939 --> 00:17:19,000
related console service with a name

00:17:15,279 --> 00:17:21,669
that's going to be picked up by the

00:17:19,000 --> 00:17:25,230
Prometheus instance there's a health

00:17:21,669 --> 00:17:25,230
check it's fairly you know

00:17:27,339 --> 00:17:32,200
as more and more engineers learned about

00:17:35,950 --> 00:17:41,240
as more and more engineers learned about

00:17:38,299 --> 00:17:43,299
Prometheus they started to begin

00:17:41,240 --> 00:17:45,289
instrumenting their code on their own

00:17:43,299 --> 00:17:47,179
one of the things that we learned was

00:17:45,289 --> 00:17:49,730
that people did not require much

00:17:47,179 --> 00:17:51,740
guidance in using the goaline client

00:17:49,730 --> 00:17:54,049
which is a testament to the golden

00:17:51,740 --> 00:17:58,399
client it was well done well documented

00:17:54,049 --> 00:18:01,340
it was just easy to get easy easy to

00:17:58,399 --> 00:18:03,200
work with and we never received meant

00:18:01,340 --> 00:18:06,169
well we've rarely received questions

00:18:03,200 --> 00:18:08,659
about how to instrument your code in

00:18:06,169 --> 00:18:09,919
going there were there were there were

00:18:08,659 --> 00:18:13,429
recently there were some Python

00:18:09,919 --> 00:18:17,179
questions which I was very happy to hear

00:18:13,429 --> 00:18:18,289
about one of our challenges was that I

00:18:17,179 --> 00:18:20,480
mentioned degraded prometheus

00:18:18,289 --> 00:18:22,820
performance right so in this effort to

00:18:20,480 --> 00:18:24,799
create like these general cookbooks that

00:18:22,820 --> 00:18:26,950
we're easy to use and great and fanciful

00:18:24,799 --> 00:18:30,220
and they had brambles coming out of them

00:18:26,950 --> 00:18:33,500
whenever someone would use them and have

00:18:30,220 --> 00:18:35,960
sort of an edge case or scrape a lot of

00:18:33,500 --> 00:18:38,890
machines for a lot of time series or a

00:18:35,960 --> 00:18:43,309
lot of metrics they would experience

00:18:38,890 --> 00:18:45,679
degraded performance we had to we had to

00:18:43,309 --> 00:18:47,539
take some time I think that this is one

00:18:45,679 --> 00:18:50,450
of the points where we had some of the

00:18:47,539 --> 00:18:52,789
Prometheus core developers actually

00:18:50,450 --> 00:18:55,909
visit the office and say hey look these

00:18:52,789 --> 00:18:58,059
flags exist and you should optimize so

00:18:55,909 --> 00:19:01,490
it took us a while to actually optimize

00:18:58,059 --> 00:19:03,980
our cookbooks to really take into

00:19:01,490 --> 00:19:06,919
account the amount of RAM hard disk

00:19:03,980 --> 00:19:12,520
space and that exists on the boxes that

00:19:06,919 --> 00:19:15,770
were being deployed so this caused a

00:19:12,520 --> 00:19:17,510
sort of negative reaction users that

00:19:15,770 --> 00:19:19,340
were deploying Prometheus were or

00:19:17,510 --> 00:19:21,380
engineers we're finding out that they

00:19:19,340 --> 00:19:23,899
were having like to actually manage the

00:19:21,380 --> 00:19:27,679
primitive citizens and they were finding

00:19:23,899 --> 00:19:30,230
out that they were having problems so we

00:19:27,679 --> 00:19:32,809
it was it was in our best interest to

00:19:30,230 --> 00:19:35,710
make it easier for them and that's

00:19:32,809 --> 00:19:35,710
exactly what we did

00:19:37,530 --> 00:19:42,690
one of the things in this process one of

00:19:40,740 --> 00:19:45,720
the ways to sort of get us Oh get us to

00:19:42,690 --> 00:19:49,680
that critical mass was not just creating

00:19:45,720 --> 00:19:52,470
a bunch of cookbooks for the exporters

00:19:49,680 --> 00:19:53,910
but actually deploying a lot of the

00:19:52,470 --> 00:19:58,410
exporters throughout our infrastructure

00:19:53,910 --> 00:20:01,950
so again this was Matt Matt and I spent

00:19:58,410 --> 00:20:04,590
a good amount of time deploying and you

00:20:01,950 --> 00:20:06,570
know the deploying exporters into a lot

00:20:04,590 --> 00:20:10,110
of different parts of our infrastructure

00:20:06,570 --> 00:20:15,110
a lot of sensitive parts one of the

00:20:10,110 --> 00:20:18,000
experiences that I that I ran into was

00:20:15,110 --> 00:20:19,980
trying to touch like one of some of the

00:20:18,000 --> 00:20:22,140
very some of the most sensitive

00:20:19,980 --> 00:20:25,410
databases within our organization or

00:20:22,140 --> 00:20:27,480
within our infrastructure and I'm saying

00:20:25,410 --> 00:20:31,070
hey I'm gonna add like my sequel Dax

00:20:27,480 --> 00:20:33,720
Porter to these sets of servers and

00:20:31,070 --> 00:20:35,250
everyone was just like no no one no one

00:20:33,720 --> 00:20:37,110
don't touch this you you can't go

00:20:35,250 --> 00:20:39,930
anywhere near it and I was just like why

00:20:37,110 --> 00:20:41,940
and they were like oh I feel like they

00:20:39,930 --> 00:20:45,420
made up things they were like the last

00:20:41,940 --> 00:20:46,890
time and this is being completely honest

00:20:45,420 --> 00:20:49,230
over the last time we looked at the my

00:20:46,890 --> 00:20:52,260
sequel Dax Porter code it wasn't up to

00:20:49,230 --> 00:20:57,270
snuff and I was just like I don't really

00:20:52,260 --> 00:20:59,250
believe that so it's funny it's it was

00:20:57,270 --> 00:21:02,160
not funny at the time it was painful but

00:20:59,250 --> 00:21:04,260
I spent like a day or a day and a half

00:21:02,160 --> 00:21:06,150
and I just sat down and I've read

00:21:04,260 --> 00:21:09,210
through my sequel Dee cookbook the

00:21:06,150 --> 00:21:10,590
source code there's nothing crazy in

00:21:09,210 --> 00:21:12,420
here like there's nothing there's

00:21:10,590 --> 00:21:16,950
there's nothing bad like there's this is

00:21:12,420 --> 00:21:19,230
good code and then I went back and I

00:21:16,950 --> 00:21:21,060
told the you know the committee of

00:21:19,230 --> 00:21:26,400
people that we're sort of saying this

00:21:21,060 --> 00:21:29,370
and they were just like oh okay so yes

00:21:26,400 --> 00:21:34,290
one of the things you will combat is a

00:21:29,370 --> 00:21:36,030
lot of institution fear because of if

00:21:34,290 --> 00:21:37,440
you don't have things instrument 8 if

00:21:36,030 --> 00:21:38,910
you're not collecting enough metrics for

00:21:37,440 --> 00:21:41,280
your infrastructure then you're afraid

00:21:38,910 --> 00:21:43,050
to touch everything so it's kind of

00:21:41,280 --> 00:21:44,880
cyclical in if you want to add something

00:21:43,050 --> 00:21:45,810
that's going to collect metrics from the

00:21:44,880 --> 00:21:47,770
things that you're afraid to touch

00:21:45,810 --> 00:21:50,290
you're gonna be afraid into

00:21:47,770 --> 00:21:52,180
you actually just go out and do it so

00:21:50,290 --> 00:22:00,100
it's it's the cycle of life it's like

00:21:52,180 --> 00:22:02,440
Simba with the Lion King anyway this is

00:22:00,100 --> 00:22:04,390
an interesting one and I I was able to

00:22:02,440 --> 00:22:07,230
appreciate this because I had to face

00:22:04,390 --> 00:22:09,310
this myself we had to figure out what

00:22:07,230 --> 00:22:11,020
what were the barriers that people were

00:22:09,310 --> 00:22:14,260
experiencing when they were trying to

00:22:11,020 --> 00:22:16,210
learn Prometheus at Aenon like you know

00:22:14,260 --> 00:22:19,270
surface level when they actually had to

00:22:16,210 --> 00:22:21,130
query for something or when they had to

00:22:19,270 --> 00:22:22,840
when they had to instrument they service

00:22:21,130 --> 00:22:27,130
and then they had to deal with labels

00:22:22,840 --> 00:22:29,800
and I call them I call each step in this

00:22:27,130 --> 00:22:31,840
learning process the aha moment because

00:22:29,800 --> 00:22:33,130
this is exactly what I said when I was

00:22:31,840 --> 00:22:37,840
going through these steps and I'm like

00:22:33,130 --> 00:22:40,150
oh aha why should I learn prom q Oh

00:22:37,840 --> 00:22:43,750
like why why the heck do I have to learn

00:22:40,150 --> 00:22:45,430
another query language no one wants to

00:22:43,750 --> 00:22:46,600
learn another query language or very few

00:22:45,430 --> 00:22:48,310
of us want to learn another query

00:22:46,600 --> 00:22:49,210
language that you think is going to

00:22:48,310 --> 00:22:51,310
disappear

00:22:49,210 --> 00:22:57,460
six months from now and it's just wasted

00:22:51,310 --> 00:23:00,340
time but once we once we had some some

00:22:57,460 --> 00:23:02,320
sessions where we sort of taught people

00:23:00,340 --> 00:23:04,000
or showed people some very simple

00:23:02,320 --> 00:23:06,550
queries and some of the very simple

00:23:04,000 --> 00:23:08,440
things that you can do they started to

00:23:06,550 --> 00:23:11,230
buy in they started to understand how

00:23:08,440 --> 00:23:13,390
powerful was and this is especially when

00:23:11,230 --> 00:23:15,430
you consider that most people especially

00:23:13,390 --> 00:23:16,810
at the time that I was joining digital

00:23:15,430 --> 00:23:18,820
ssin I didn't know about Prometheus at

00:23:16,810 --> 00:23:20,680
all I was just saying hey here learn

00:23:18,820 --> 00:23:23,500
from me Thea's and I'm like this isn't

00:23:20,680 --> 00:23:25,630
graphite like this is where's my string

00:23:23,500 --> 00:23:29,650
with the periods and the destory it's

00:23:25,630 --> 00:23:34,030
like what happened and I had to I had to

00:23:29,650 --> 00:23:37,360
learn that labels are amazing and that

00:23:34,030 --> 00:23:40,060
you can have multi-dimensional metric

00:23:37,360 --> 00:23:42,220
series it was it was great it was

00:23:40,060 --> 00:23:44,140
amazing but I had to experience I had to

00:23:42,220 --> 00:23:45,490
go through that to really learn that and

00:23:44,140 --> 00:23:48,010
it was a real barrier like it was

00:23:45,490 --> 00:23:50,350
sometimes when you're so accustomed to

00:23:48,010 --> 00:23:52,570
one particular type of of way of doing

00:23:50,350 --> 00:23:54,190
something and someone just sort of like

00:23:52,570 --> 00:23:56,620
turns on the light or flips the script

00:23:54,190 --> 00:23:58,720
you sort of it takes it takes a bit of

00:23:56,620 --> 00:24:01,380
time to understand what's happening and

00:23:58,720 --> 00:24:03,590
the benefits to it but when you do

00:24:01,380 --> 00:24:05,430
it's like you're you know I don't know

00:24:03,590 --> 00:24:07,800
you're really happy

00:24:05,430 --> 00:24:12,990
it's like Oprah giving you all this

00:24:07,800 --> 00:24:14,940
stuff and occasionally there's the push

00:24:12,990 --> 00:24:19,290
versus pull debate that you have to go

00:24:14,940 --> 00:24:21,320
through with people but it's it's solved

00:24:19,290 --> 00:24:23,790
when you when you discuss like scale and

00:24:21,320 --> 00:24:25,740
control over how many times you

00:24:23,790 --> 00:24:28,560
shouldn't be pulling information from

00:24:25,740 --> 00:24:34,860
your um your machine and because it

00:24:28,560 --> 00:24:37,620
involves less cheffing so things that

00:24:34,860 --> 00:24:40,950
you may take back with you and fight or

00:24:37,620 --> 00:24:43,250
use those weapons other things that we

00:24:40,950 --> 00:24:45,750
did to facilitate Prometheus learning

00:24:43,250 --> 00:24:49,440
were being readily available to answer

00:24:45,750 --> 00:24:53,030
questions so most people have a slack or

00:24:49,440 --> 00:24:57,930
it's not like thing at their company

00:24:53,030 --> 00:24:59,520
that's really cool most people have

00:24:57,930 --> 00:25:01,890
slack or cyclic thing at their company

00:24:59,520 --> 00:25:03,420
where you can just be there and say hey

00:25:01,890 --> 00:25:04,980
you know if you have any Prometheus

00:25:03,420 --> 00:25:08,310
questions if you have anything at all

00:25:04,980 --> 00:25:10,470
just come and ask me one interesting

00:25:08,310 --> 00:25:13,560
thing that happened what were there

00:25:10,470 --> 00:25:15,240
screencasts were created and I thought

00:25:13,560 --> 00:25:17,850
that were crazy in the beginning but I

00:25:15,240 --> 00:25:19,770
really began to appreciate them because

00:25:17,850 --> 00:25:22,920
you could go and watch them at your own

00:25:19,770 --> 00:25:24,630
time and they're especially catered

00:25:22,920 --> 00:25:28,050
towards you and your organization so

00:25:24,630 --> 00:25:29,610
people can come in you know you would

00:25:28,050 --> 00:25:31,350
you would it would be easier for you to

00:25:29,610 --> 00:25:35,280
pick something up because it'd be in the

00:25:31,350 --> 00:25:38,040
right context we had tutorial sessions

00:25:35,280 --> 00:25:40,020
every two weeks every month I would go

00:25:38,040 --> 00:25:41,640
to ian's and say hey you know can I

00:25:40,020 --> 00:25:43,530
teach a bunch of people stuff but he'd

00:25:41,640 --> 00:25:44,720
be like yeah that's like the best idea

00:25:43,530 --> 00:25:48,120
ever

00:25:44,720 --> 00:25:50,850
that was great we invited Prometheus

00:25:48,120 --> 00:25:54,030
core developers to come and and speak at

00:25:50,850 --> 00:25:55,880
the company they were happy to do so we

00:25:54,030 --> 00:25:59,790
really really enjoyed having them there

00:25:55,880 --> 00:26:02,070
and we thank you for that and we created

00:25:59,790 --> 00:26:04,680
an environment for people to just play

00:26:02,070 --> 00:26:09,150
around one of the one of the things that

00:26:04,680 --> 00:26:10,650
we forget is as engineers is that people

00:26:09,150 --> 00:26:12,210
a lot of times engineers are afraid to

00:26:10,650 --> 00:26:14,040
go try something because you can break

00:26:12,210 --> 00:26:15,690
something so

00:26:14,040 --> 00:26:18,660
if you create like a little playground

00:26:15,690 --> 00:26:22,320
if you create an instance of Pandora

00:26:18,660 --> 00:26:24,660
that is it in production or that you

00:26:22,320 --> 00:26:28,410
know is pretty reliable and you say hey

00:26:24,660 --> 00:26:29,550
go query it do whatever you want don't

00:26:28,410 --> 00:26:32,040
worry about it you're not gonna break

00:26:29,550 --> 00:26:38,070
anything that's actually really helpful

00:26:32,040 --> 00:26:40,140
for engineers some of the results of

00:26:38,070 --> 00:26:43,110
this worker you know we created a

00:26:40,140 --> 00:26:45,150
vibrant internal community which I'm

00:26:43,110 --> 00:26:46,830
really proud of

00:26:45,150 --> 00:26:49,740
it's kind of amazing I came from a place

00:26:46,830 --> 00:26:52,230
where you didn't have where I would push

00:26:49,740 --> 00:26:55,680
ideas which were clearly technically

00:26:52,230 --> 00:26:58,020
sound and superior and projects and

00:26:55,680 --> 00:26:59,370
software and they just died because I

00:26:58,020 --> 00:27:03,120
couldn't get by him

00:26:59,370 --> 00:27:06,120
so this experience with with this group

00:27:03,120 --> 00:27:09,660
really taught me how to pitch like pitch

00:27:06,120 --> 00:27:11,700
an idea and to to push sort of an

00:27:09,660 --> 00:27:15,060
ecosystem upon like a large group of

00:27:11,700 --> 00:27:18,060
people that's a very powerful and

00:27:15,060 --> 00:27:25,110
interesting concept that a lot of us as

00:27:18,060 --> 00:27:27,720
engineers have to learn it still it may

00:27:25,110 --> 00:27:30,900
be a technical requirement on for some

00:27:27,720 --> 00:27:33,990
of the some part of the organization to

00:27:30,900 --> 00:27:35,520
use prometheus but it's not for the

00:27:33,990 --> 00:27:36,960
majority of the organization it's mostly

00:27:35,520 --> 00:27:39,690
a social requirement everybody just

00:27:36,960 --> 00:27:44,310
suspects you to instrument your whatever

00:27:39,690 --> 00:27:46,050
service you're working with we have a

00:27:44,310 --> 00:27:48,240
lot of Prometheus related projects that

00:27:46,050 --> 00:27:50,100
have popped up and are in development

00:27:48,240 --> 00:27:53,130
that did not originate from the metrics

00:27:50,100 --> 00:27:55,800
group that's amazing that's a really

00:27:53,130 --> 00:27:58,470
powerful thing and there was even a

00:27:55,800 --> 00:28:01,080
period called that I called exporter

00:27:58,470 --> 00:28:03,960
madness where people just went off and

00:28:01,080 --> 00:28:05,190
started creating a bunch of exporters so

00:28:03,960 --> 00:28:08,100
these are some of the open source ones

00:28:05,190 --> 00:28:10,440
that I think most of the open source

00:28:08,100 --> 00:28:12,420
ones that were created some are fairly

00:28:10,440 --> 00:28:14,280
useful like by the exporter which

00:28:12,420 --> 00:28:17,760
there's a pull request in from somebody

00:28:14,280 --> 00:28:20,160
I think suffix border are syslog

00:28:17,760 --> 00:28:22,170
exporter which I don't think is I think

00:28:20,160 --> 00:28:25,130
it's been like torn down but it was

00:28:22,170 --> 00:28:27,879
actually a really nice thing to see

00:28:25,130 --> 00:28:32,999
unify exporter are torn export and

00:28:27,879 --> 00:28:32,999
Matros Porter these are like personal

00:28:33,659 --> 00:28:41,139
projects that people just put out there

00:28:38,519 --> 00:28:42,159
2016 Prometheus flourishes and I'll rush

00:28:41,139 --> 00:28:45,879
through this because I'm running out of

00:28:42,159 --> 00:28:50,799
time things that we need to overcome at

00:28:45,879 --> 00:28:52,049
this point is scaling problems just make

00:28:50,799 --> 00:28:56,099
sure that we continue to foster

00:28:52,049 --> 00:28:59,379
Prometheus projects do better graphing

00:28:56,099 --> 00:29:01,719
for our scaling problems okay this is a

00:28:59,379 --> 00:29:06,339
double-edged sword we created Prometheus

00:29:01,719 --> 00:29:08,649
proxy which was mentioned yesterday part

00:29:06,339 --> 00:29:10,149
of our scaling problems is also do I

00:29:08,649 --> 00:29:12,339
think the majority of our scaling

00:29:10,149 --> 00:29:14,289
problems are due to the fact that we are

00:29:12,339 --> 00:29:16,089
not as knowledgeable as we should be

00:29:14,289 --> 00:29:19,899
about some of the tuning options of

00:29:16,089 --> 00:29:21,519
Prometheus so we're trying to get better

00:29:19,899 --> 00:29:23,469
with it

00:29:21,519 --> 00:29:25,719
there's kubernetes integration again

00:29:23,469 --> 00:29:31,329
this started with a completely different

00:29:25,719 --> 00:29:33,789
group and it's not just kubernetes being

00:29:31,329 --> 00:29:36,909
aware of like your containers this

00:29:33,789 --> 00:29:40,269
there's an actual push for kubernetes

00:29:36,909 --> 00:29:42,099
being as soon as you push you create

00:29:40,269 --> 00:29:45,659
like a you know I think they're called

00:29:42,099 --> 00:29:49,779
pod let's I am NOT a kubernetes person

00:29:45,659 --> 00:29:51,639
your your your software or your your

00:29:49,779 --> 00:29:54,699
whatever you pushed is automatically

00:29:51,639 --> 00:29:56,559
instrumented and available so it's it's

00:29:54,699 --> 00:29:58,929
like clean integration from the

00:29:56,559 --> 00:30:01,059
beginning to the end there's something

00:29:58,929 --> 00:30:04,989
called prom alerts which I just learned

00:30:01,059 --> 00:30:06,789
about before flying out here which is a

00:30:04,989 --> 00:30:11,759
project that somebody's working on in

00:30:06,789 --> 00:30:14,229
our storage team that synchronizes the

00:30:11,759 --> 00:30:16,149
and you could do this in chef but I'm

00:30:14,229 --> 00:30:17,949
pretty sure it's it's a little deeper

00:30:16,149 --> 00:30:19,839
than than what I'm about to explain it

00:30:17,949 --> 00:30:22,359
synchronizes the alerts files amongst

00:30:19,839 --> 00:30:23,679
your Prometheus instances so any of the

00:30:22,359 --> 00:30:26,679
alert queries that you create that are

00:30:23,679 --> 00:30:28,359
being sent off to alert alert manager it

00:30:26,679 --> 00:30:30,059
synchronizes that amongst your

00:30:28,359 --> 00:30:33,869
Prometheus instances and it also

00:30:30,059 --> 00:30:37,269
provides a health check for icinga

00:30:33,869 --> 00:30:39,509
Nagios to make sure that your services

00:30:37,269 --> 00:30:39,509
are out

00:30:39,630 --> 00:30:43,680
there's Vulcan which was mentioned

00:30:41,640 --> 00:30:49,140
yesterday and it's awesome and I want to

00:30:43,680 --> 00:30:51,180
hug it and hug the the creators and

00:30:49,140 --> 00:30:55,530
instead of prom - we're using Griffin a

00:30:51,180 --> 00:31:01,800
now piece out to prom - we pour a little

00:30:55,530 --> 00:31:04,620
liquor for you what we learned the

00:31:01,800 --> 00:31:07,680
deployment of open source pod of an open

00:31:04,620 --> 00:31:10,110
source platform is a much more as much

00:31:07,680 --> 00:31:13,530
as much of a people issue as it is a

00:31:10,110 --> 00:31:17,100
technical issue so just keep that in

00:31:13,530 --> 00:31:18,900
mind I've I've definitely grown through

00:31:17,100 --> 00:31:22,890
this process and I appreciate like this

00:31:18,900 --> 00:31:25,530
experience we need to teach engineers

00:31:22,890 --> 00:31:27,510
how to get to the aha moments we need to

00:31:25,530 --> 00:31:30,450
continue to engage the open source

00:31:27,510 --> 00:31:33,150
community which is always worth willing

00:31:30,450 --> 00:31:35,160
to help especially an increase usage and

00:31:33,150 --> 00:31:39,750
become more knowledgeable about the

00:31:35,160 --> 00:31:41,340
software that's being developed like I

00:31:39,750 --> 00:31:43,200
said we created an environment that was

00:31:41,340 --> 00:31:46,500
in current that that encouraged everyone

00:31:43,200 --> 00:31:50,370
to learn and growing we scaled our

00:31:46,500 --> 00:31:53,160
company Wow while using Prometheus from

00:31:50,370 --> 00:31:56,000
50 to 250 employees and we didn't like

00:31:53,160 --> 00:32:01,470
choke each other and in the process

00:31:56,000 --> 00:32:03,480
although it may have come down I am

00:32:01,470 --> 00:32:06,059
particularly interested in hearing like

00:32:03,480 --> 00:32:08,250
what some of the experiences are of

00:32:06,059 --> 00:32:10,710
other folks in the room and even outside

00:32:08,250 --> 00:32:12,720
the room that face the same type of

00:32:10,710 --> 00:32:14,880
issues and may be able to contribute

00:32:12,720 --> 00:32:15,540
issues or ideas that we haven't thought

00:32:14,880 --> 00:32:18,390
of ourselves

00:32:15,540 --> 00:32:20,640
and I'm gonna finish with this this

00:32:18,390 --> 00:32:22,260
can't be one one of the best ways to

00:32:20,640 --> 00:32:24,120
turbocharged Prometheus in your

00:32:22,260 --> 00:32:27,210
organization is to grab the from easiest

00:32:24,120 --> 00:32:32,270
torch and spread that fire create other

00:32:27,210 --> 00:32:32,270
torch bearers thanks

00:32:38,870 --> 00:32:43,620
thank you so much I can so relate to the

00:32:41,490 --> 00:32:48,240
human issues when trying to introduce a

00:32:43,620 --> 00:32:55,700
new system somewhere yes there is ample

00:32:48,240 --> 00:32:55,700
time for questions yeah any questions

00:32:57,159 --> 00:33:03,500
I'm so being quite familiar was prom QL

00:33:00,559 --> 00:33:05,210
I sort of sometimes on at the inside

00:33:03,500 --> 00:33:07,190
when people have fundamental issues with

00:33:05,210 --> 00:33:09,350
certain concept in the covering of data

00:33:07,190 --> 00:33:12,049
model from from onboarding many people

00:33:09,350 --> 00:33:14,059
to Prometheus your opinion what's the

00:33:12,049 --> 00:33:17,659
most frequent issue that people just

00:33:14,059 --> 00:33:21,139
don't get quite from the beginning like

00:33:17,659 --> 00:33:23,149
what's the main aha moment for me for

00:33:21,139 --> 00:33:26,000
from what I've observed the the

00:33:23,149 --> 00:33:28,580
transition from again from graphite to a

00:33:26,000 --> 00:33:30,889
multi-dimensional like it's a real query

00:33:28,580 --> 00:33:32,779
language they're just not expecting a

00:33:30,889 --> 00:33:35,509
real query language they're expecting

00:33:32,779 --> 00:33:38,539
some jenkki string with like asteroids

00:33:35,509 --> 00:33:40,250
and other characters in it once they

00:33:38,539 --> 00:33:42,919
once they understand that there's a real

00:33:40,250 --> 00:33:46,370
query language they begin to sort of

00:33:42,919 --> 00:33:48,559
play around and dive deeper and it

00:33:46,370 --> 00:33:52,940
becomes a lot clearer for me do you have

00:33:48,559 --> 00:33:55,100
a do you have yeah maybe just you know

00:33:52,940 --> 00:33:58,960
any like example query that sort of just

00:33:55,100 --> 00:33:58,960
makes it clear to people really quickly

00:34:01,090 --> 00:34:08,030
honestly the ups and the raid anything

00:34:05,600 --> 00:34:11,060
with a rate that's that's usually the

00:34:08,030 --> 00:34:14,450
the first thing that we lead with and up

00:34:11,060 --> 00:34:16,040
up is the most valuable one so that it

00:34:14,450 --> 00:34:18,919
helps ease them into understanding

00:34:16,040 --> 00:34:23,050
what's happening Thanks I don't know if

00:34:18,919 --> 00:34:25,520
anybody has well I I always like this

00:34:23,050 --> 00:34:28,129
example that I showed maybe in my intro

00:34:25,520 --> 00:34:30,500
talk where you just divide whole vectors

00:34:28,129 --> 00:34:32,839
of time series by each other or do any

00:34:30,500 --> 00:34:34,700
kind of binary operations that do this

00:34:32,839 --> 00:34:41,990
automatic level matching this is really

00:34:34,700 --> 00:34:43,720
kind of unique to prom QL I think you

00:34:41,990 --> 00:34:46,369
seem to have a lot of experience

00:34:43,720 --> 00:34:59,030
introducing new systems I have a lot of

00:34:46,369 --> 00:34:59,720
problems deleting the old we wait so

00:34:59,030 --> 00:35:03,670
what was the question

00:34:59,720 --> 00:35:09,430
like do we have any no other than like

00:35:03,670 --> 00:35:11,869
you stats D exporter and these people in

00:35:09,430 --> 00:35:14,089
anything that can sort of bridge I think

00:35:11,869 --> 00:35:16,040
we had collect the exporter anything

00:35:14,089 --> 00:35:19,490
that can bridge the old systems to the

00:35:16,040 --> 00:35:23,710
new systems temporarily is usually a

00:35:19,490 --> 00:35:23,710
good thing I don't have a better way of

00:35:23,980 --> 00:35:34,069
in do you have a better way I just

00:35:32,630 --> 00:35:35,660
wanted to relate on your like human

00:35:34,069 --> 00:35:37,460
effort there I think you can nearly

00:35:35,660 --> 00:35:39,530
split you're talking to because really

00:35:37,460 --> 00:35:40,910
addresses the whole problem with you

00:35:39,530 --> 00:35:43,460
know introducing new technologies and

00:35:40,910 --> 00:35:46,790
companies and getting developer buy-in

00:35:43,460 --> 00:35:49,609
and maybe you know we cool to collect

00:35:46,790 --> 00:35:51,079
gather those toughts types it has the

00:35:49,609 --> 00:35:53,210
same issue with the play for America and

00:35:51,079 --> 00:35:56,300
Scala and they had this like article

00:35:53,210 --> 00:36:00,319
convince my boss it was literally go

00:35:56,300 --> 00:36:01,760
type live calm like that's a good idea

00:36:00,319 --> 00:36:05,630
I'm the king of double negatives for

00:36:01,760 --> 00:36:08,839
some reason that's a good idea I have a

00:36:05,630 --> 00:36:12,710
question about sort of a enforcing

00:36:08,839 --> 00:36:15,680
opinions in like exporters for example

00:36:12,710 --> 00:36:17,329
so when you have that many exporters did

00:36:15,680 --> 00:36:19,670
you do anything to kind of ensure

00:36:17,329 --> 00:36:23,869
consistency in their configuration that

00:36:19,670 --> 00:36:27,200
kind of thing and similarly like the go

00:36:23,869 --> 00:36:30,740
client library for example I'm thinking

00:36:27,200 --> 00:36:32,540
within my organization maybe wrapping it

00:36:30,740 --> 00:36:34,880
for example to enforce some some

00:36:32,540 --> 00:36:36,740
opinions basically to ensure consistency

00:36:34,880 --> 00:36:39,890
between services is that something that

00:36:36,740 --> 00:36:41,089
you dealt with that's happening with the

00:36:39,890 --> 00:36:45,049
go client library that's happening right

00:36:41,089 --> 00:36:46,670
now inside of our our main repository

00:36:45,049 --> 00:36:50,150
I'm gonna get into that

00:36:46,670 --> 00:36:52,970
and as for like consistency with the the

00:36:50,150 --> 00:36:54,710
cookbooks the fact that one person or

00:36:52,970 --> 00:36:56,329
two people worked on developed like

00:36:54,710 --> 00:36:59,599
writing all of them that sort of helped

00:36:56,329 --> 00:37:02,930
with the consistency and also we have

00:36:59,599 --> 00:37:07,190
like our own in that same vein we have

00:37:02,930 --> 00:37:09,380
our own list of default like ports for

00:37:07,190 --> 00:37:11,809
each of the exporters so it's not

00:37:09,380 --> 00:37:13,230
necessarily what like what's publicly

00:37:11,809 --> 00:37:16,260
available because that might

00:37:13,230 --> 00:37:18,060
collide with what's happening in with

00:37:16,260 --> 00:37:22,070
some product or something that's been

00:37:18,060 --> 00:37:25,170
deployed internally so that type of idea

00:37:22,070 --> 00:37:28,830
usually helps but like we have one way

00:37:25,170 --> 00:37:30,830
of and I sort of foggy and on this in

00:37:28,830 --> 00:37:33,359
the beginning but then I I saw the light

00:37:30,830 --> 00:37:35,369
we have one way to deploy like our

00:37:33,359 --> 00:37:38,220
exporter cookbooks and everybody's just

00:37:35,369 --> 00:37:39,839
accustomed to it so there's very little

00:37:38,220 --> 00:37:42,000
work that you have to do other than add

00:37:39,839 --> 00:37:44,280
like required configuration information

00:37:42,000 --> 00:37:46,560
but the ports are already set for you

00:37:44,280 --> 00:37:48,000
the names are already set for you if you

00:37:46,560 --> 00:37:51,599
want to do something super special then

00:37:48,000 --> 00:37:54,000
you you can add something but generally

00:37:51,599 --> 00:37:55,619
if you make it as simple as possible to

00:37:54,000 --> 00:37:57,060
deploy then people are just not going to

00:37:55,619 --> 00:37:58,050
make they're not going to they're not

00:37:57,060 --> 00:38:00,720
going to touch it they're not going to

00:37:58,050 --> 00:38:04,940
go out of their way to change like a

00:38:00,720 --> 00:38:04,940
chef cookbook thank you

00:38:05,300 --> 00:38:08,839
any more questions

00:38:10,630 --> 00:38:16,349

YouTube URL: https://www.youtube.com/watch?v=ieo3lGBHcy8


