Title: PromCon 2016: The History of Prometheus at SoundCloud - Tobias Schmidt
Publication date: 2016-09-04
Playlist: PromCon 2016
Description: 
	* Abstract:

The way SoundCloud monitors its services and infrastructure has dramatically changed over the last couple of years. Monitoring, alerting, and being on-call is now deeply ingrained in every engineering team and we have learned a lot on the way.

This talk will describe our transition from an ops team to a "you build it, you own it" approach, why we needed something like Prometheus, as well as how Prometheus helped us to achieve that and highlight a few success and failure stories.

* Speaker biography:

Tobias Schmidt is a production engineer at SoundCloud and an active contributor to the Prometheus ecosystem. Over the last few years he has helped to integrate Prometheus in SoundCloud's infrastructure and worked with product teams to gain more insight into their services.

* Slides:

http://www.slideshare.net/grobie/the-history-of-prometheus-at-soundcloud

* PromCon website:

https://promcon.io/
Captions: 
	00:00:00,000 --> 00:00:05,040
Thanks fine uh uh yeah my name is wise

00:00:02,669 --> 00:00:06,990
or yes better known as well be

00:00:05,040 --> 00:00:10,530
everywhere pretty much and the internet

00:00:06,990 --> 00:00:14,269
besides Twitter unfortunately yeah a

00:00:10,530 --> 00:00:17,420
couple of months ago actually I Julius

00:00:14,269 --> 00:00:20,250
talk to me and announced there will be a

00:00:17,420 --> 00:00:22,109
permissive conference and afterwards he

00:00:20,250 --> 00:00:23,789
kind of talked me into flying over from

00:00:22,109 --> 00:00:26,130
New York to Berlin and to give it to

00:00:23,789 --> 00:00:29,250
work and I thought about okay what could

00:00:26,130 --> 00:00:31,260
I talk about and I came up with see

00:00:29,250 --> 00:00:33,390
history of promises because I thought

00:00:31,260 --> 00:00:34,829
like valve want would be a good point to

00:00:33,390 --> 00:00:35,880
give like that kind of torque it

00:00:34,829 --> 00:00:38,610
probably like the first conference

00:00:35,880 --> 00:00:42,120
afterwards it's known to everyone and

00:00:38,610 --> 00:00:43,530
you might ask BK why am I the guy to

00:00:42,120 --> 00:00:45,629
like talk about the history of

00:00:43,530 --> 00:00:47,879
committees so they are like obviously

00:00:45,629 --> 00:00:49,680
the founders Julius and Matt of

00:00:47,879 --> 00:00:51,629
committees and then they're like to be

00:00:49,680 --> 00:00:54,210
very active core contributors like beer

00:00:51,629 --> 00:00:55,949
and wine and fabian and i guess i would

00:00:54,210 --> 00:01:00,359
describe myself as kind of like the

00:00:55,949 --> 00:01:03,570
companion of parameters i happen to be

00:01:00,359 --> 00:01:05,010
the third one on his third one who

00:01:03,570 --> 00:01:06,420
committed to prometheus the third one

00:01:05,010 --> 00:01:09,750
was on the mailing list and the third

00:01:06,420 --> 00:01:12,119
one who joined the ISE channel I so I

00:01:09,750 --> 00:01:14,460
was like I kind of always like new

00:01:12,119 --> 00:01:16,530
primitives I you might have seen I both

00:01:14,460 --> 00:01:18,659
will be client export it will be client

00:01:16,530 --> 00:01:20,759
library and a couple of exporters but

00:01:18,659 --> 00:01:23,880
mostly just glued from easiest together

00:01:20,759 --> 00:01:28,200
at SoundCloud and let the other people

00:01:23,880 --> 00:01:30,119
like do the actual hot work but yeah

00:01:28,200 --> 00:01:33,659
that gave me like a pretty good inside

00:01:30,119 --> 00:01:36,540
and like actually healthy honored to

00:01:33,659 --> 00:01:38,939
like work together was like all the core

00:01:36,540 --> 00:01:40,439
contributors except wine as you said

00:01:38,939 --> 00:01:43,979
because he was never actually at some

00:01:40,439 --> 00:01:46,770
cloud I so without further ado let's

00:01:43,979 --> 00:01:52,350
talk about the history of committees so

00:01:46,770 --> 00:01:55,920
November 24 2012 comedians were started

00:01:52,350 --> 00:02:00,320
at soundcloud that's actually completely

00:01:55,920 --> 00:02:03,990
1i soundcloud did not start promises

00:02:00,320 --> 00:02:07,920
actually a verse in the beginnings Matt

00:02:03,990 --> 00:02:10,649
proud tour started to work on permissive

00:02:07,920 --> 00:02:12,430
to think about time series data bases to

00:02:10,649 --> 00:02:17,710
think about like the problem of

00:02:12,430 --> 00:02:21,530
monitoring he told me like even in 2011

00:02:17,710 --> 00:02:24,620
in for real and with real experiments he

00:02:21,530 --> 00:02:26,510
started plan in February 2012 so like

00:02:24,620 --> 00:02:30,050
way before he actually joined soundcloud

00:02:26,510 --> 00:02:32,120
he saw a huge need for like great open

00:02:30,050 --> 00:02:36,230
source type series monitoring and

00:02:32,120 --> 00:02:38,570
actually he his vision or his go did not

00:02:36,230 --> 00:02:40,970
limit it to just infrastructure

00:02:38,570 --> 00:02:42,650
monitoring as we now camisas like mostly

00:02:40,970 --> 00:02:44,450
these days the like application

00:02:42,650 --> 00:02:46,730
monitoring network monitoring and like

00:02:44,450 --> 00:02:48,800
all this OP stuff he actually envisioned

00:02:46,730 --> 00:02:52,160
something way bigger and i guess we have

00:02:48,800 --> 00:02:54,230
like some use cases for that as well he

00:02:52,160 --> 00:02:57,800
has like friends and like talk to other

00:02:54,230 --> 00:03:00,290
people in biology in chamak and

00:02:57,800 --> 00:03:02,540
chemicals I had like worked on one

00:03:00,290 --> 00:03:04,910
project where they put sensors out in

00:03:02,540 --> 00:03:07,220
the bay area to like measure the water

00:03:04,910 --> 00:03:08,960
pollution and he needed like a time

00:03:07,220 --> 00:03:10,520
series data base for that so he wanted

00:03:08,960 --> 00:03:13,940
to like collect a lot more data than

00:03:10,520 --> 00:03:16,520
just software um I guess it's good that

00:03:13,940 --> 00:03:18,530
we focused on one part but it's actually

00:03:16,520 --> 00:03:20,800
was very pretty interesting to me to

00:03:18,530 --> 00:03:23,480
hear how big he had envisioned that and

00:03:20,800 --> 00:03:25,520
yeah what he found for like these

00:03:23,480 --> 00:03:29,300
problems were like pretty much open th

00:03:25,520 --> 00:03:31,220
DB which was nice and probably fit a lot

00:03:29,300 --> 00:03:33,470
of these use cases that was pretty

00:03:31,220 --> 00:03:35,630
complex to set up and yeah he didn't

00:03:33,470 --> 00:03:37,490
want to like bother with HBase are like

00:03:35,630 --> 00:03:40,970
other of the any of the other problems

00:03:37,490 --> 00:03:43,010
and the rest was least then our detour

00:03:40,970 --> 00:03:45,440
based which where I are pretty

00:03:43,010 --> 00:03:48,880
insufficient and like don't provide any

00:03:45,440 --> 00:03:51,830
of the problems he wanted to have I

00:03:48,880 --> 00:03:53,780
features he want to have so yeah he

00:03:51,830 --> 00:03:55,880
started the research in 2012 he looked

00:03:53,780 --> 00:03:57,500
at actually a lot of other languages and

00:03:55,880 --> 00:04:00,230
go in the beginning go was like kind of

00:03:57,500 --> 00:04:02,270
the last choice he looked a lot of

00:04:00,230 --> 00:04:05,709
Cassandra but then in the end decided

00:04:02,270 --> 00:04:08,120
against it for perplexity reasons and

00:04:05,709 --> 00:04:10,190
yeah the oldest repository will actually

00:04:08,120 --> 00:04:11,959
find is the client Gollum library that's

00:04:10,190 --> 00:04:13,670
for march two thousand twelve that still

00:04:11,959 --> 00:04:16,340
he was still at Google at that point and

00:04:13,670 --> 00:04:18,620
the permittee server as we now at these

00:04:16,340 --> 00:04:20,630
days were started in August and a

00:04:18,620 --> 00:04:24,500
private repository and then actually

00:04:20,630 --> 00:04:26,510
November he did like a clean cutting do

00:04:24,500 --> 00:04:28,040
commit in a new composite Ori

00:04:26,510 --> 00:04:29,840
it was not a firm uses permitted at that

00:04:28,040 --> 00:04:31,460
point but that's kind of like the

00:04:29,840 --> 00:04:35,690
inception of the service we know today

00:04:31,460 --> 00:04:38,230
as he stays then in September 2012 he

00:04:35,690 --> 00:04:42,680
joined SoundCloud and then a month later

00:04:38,230 --> 00:04:44,630
Julius joint so the gold I won't really

00:04:42,680 --> 00:04:46,610
talk too much about that you all know

00:04:44,630 --> 00:04:48,590
the goals of Prometheus was like and we

00:04:46,610 --> 00:04:51,520
all love them as like two great label

00:04:48,590 --> 00:04:54,020
them engine see powerful very language I

00:04:51,520 --> 00:04:56,630
you have the operational simplicity that

00:04:54,020 --> 00:04:58,550
was like one of these huge goals he

00:04:56,630 --> 00:05:01,160
wanted to achieve and I'm pretty sure as

00:04:58,550 --> 00:05:03,650
soon as he joined SoundCloud and sore if

00:05:01,160 --> 00:05:06,740
something fall then it fall like in all

00:05:03,650 --> 00:05:09,920
crazy bass I'm very sure that part

00:05:06,740 --> 00:05:11,570
became like a lot more important so yeah

00:05:09,920 --> 00:05:14,150
he didn't won't have like rely on any

00:05:11,570 --> 00:05:16,750
orchestration system or and don't have

00:05:14,150 --> 00:05:19,190
like any dependencies on databases or

00:05:16,750 --> 00:05:23,240
shouting systems or any of these

00:05:19,190 --> 00:05:26,000
problems another one which actually came

00:05:23,240 --> 00:05:29,710
then also more from Julia site where do

00:05:26,000 --> 00:05:32,840
you have like very strong interfaces for

00:05:29,710 --> 00:05:35,720
all the definitions especially its

00:05:32,840 --> 00:05:38,390
ingestion format which was like at like

00:05:35,720 --> 00:05:41,600
previous systems which existed in the

00:05:38,390 --> 00:05:44,920
space not always like as well defined so

00:05:41,600 --> 00:05:48,140
it was like important to have very clear

00:05:44,920 --> 00:05:50,090
and defined standards for that it's the

00:05:48,140 --> 00:05:53,030
same for like having a type tralee

00:05:50,090 --> 00:05:55,040
language and you should not secondly to

00:05:53,030 --> 00:05:58,700
second guess what's happening or like

00:05:55,040 --> 00:06:00,440
have like some I don't know the hope

00:05:58,700 --> 00:06:01,790
that it might be something else what

00:06:00,440 --> 00:06:03,050
you're typing there everything is a

00:06:01,790 --> 00:06:04,610
query language should be completely

00:06:03,050 --> 00:06:08,600
understandable and clear to everyone

00:06:04,610 --> 00:06:10,190
else equally language and yeah the same

00:06:08,600 --> 00:06:11,780
if light and of course for like world

00:06:10,190 --> 00:06:14,240
storage in pre-ap I like strong

00:06:11,780 --> 00:06:18,140
interfaces or like a strong go for all

00:06:14,240 --> 00:06:21,110
of these and yeah actually using proven

00:06:18,140 --> 00:06:23,270
and major technologies um which is

00:06:21,110 --> 00:06:25,730
interesting okay there's like two parts

00:06:23,270 --> 00:06:27,080
he looked at the part at that point

00:06:25,730 --> 00:06:29,570
they're like protocol buffers and let

00:06:27,080 --> 00:06:31,340
ovb he had like great experience was

00:06:29,570 --> 00:06:34,040
both of them and the early versions of

00:06:31,340 --> 00:06:35,480
kameez is all used leather DB and we

00:06:34,040 --> 00:06:37,700
still have protocol buffers and I

00:06:35,480 --> 00:06:39,950
actually really happy with that part 1

00:06:37,700 --> 00:06:41,720
part which was kind of

00:06:39,950 --> 00:06:45,350
campbell in the beginning for him vorse

00:06:41,720 --> 00:06:48,710
go when he started working on prometheus

00:06:45,350 --> 00:06:50,240
go just hit like 10 I think the one of

00:06:48,710 --> 00:06:52,430
the first version where I'm compiled was

00:06:50,240 --> 00:06:55,700
go on one but go were still a pretty

00:06:52,430 --> 00:06:57,110
young language as a garbage collection

00:06:55,700 --> 00:06:59,570
has like improved a lot over time

00:06:57,110 --> 00:07:01,760
actually every time go releases a new

00:06:59,570 --> 00:07:04,520
version are we see like huge performance

00:07:01,760 --> 00:07:06,680
increases with Prometheus which is great

00:07:04,520 --> 00:07:08,030
but also means that go wart on the

00:07:06,680 --> 00:07:10,040
beginning not as efficient as it could

00:07:08,030 --> 00:07:11,960
have been or like and include to

00:07:10,040 --> 00:07:15,140
implementation and C++ or maybe even

00:07:11,960 --> 00:07:17,030
your Java might have been so there was

00:07:15,140 --> 00:07:18,320
kind of a gamble and like beat

00:07:17,030 --> 00:07:20,090
contradicts improvement major

00:07:18,320 --> 00:07:21,620
technologies but yeah we'll come back

00:07:20,090 --> 00:07:25,970
later to that I think it wasn't pretty

00:07:21,620 --> 00:07:28,220
good choice ah yes or as i said at

00:07:25,970 --> 00:07:30,290
julius joint like a month later um i

00:07:28,220 --> 00:07:34,910
think he did not know each other before

00:07:30,290 --> 00:07:38,630
wait yeah so um julius maps is a guy

00:07:34,910 --> 00:07:41,330
matt and maxed out of talking about

00:07:38,630 --> 00:07:46,340
permits and like this huge vision as i

00:07:41,330 --> 00:07:48,380
said then even baby on software and if I

00:07:46,340 --> 00:07:51,770
may quote Julius reaction was pretty

00:07:48,380 --> 00:07:53,630
much like that it's way too big this

00:07:51,770 --> 00:07:55,820
problem of like fighting the computer

00:07:53,630 --> 00:07:59,210
complete monitoring system for stellar

00:07:55,820 --> 00:08:02,000
ting and graph graphing and may be

00:07:59,210 --> 00:08:04,900
modeled a bit of like some system both

00:08:02,000 --> 00:08:08,180
of them knew from some previous employer

00:08:04,900 --> 00:08:11,900
seem to be like way too big tars to like

00:08:08,180 --> 00:08:14,590
tackle but as I understood Matt was

00:08:11,900 --> 00:08:17,810
really convincing and really really um

00:08:14,590 --> 00:08:19,430
sure that this is possible and that this

00:08:17,810 --> 00:08:20,840
is necessary in the open source space

00:08:19,430 --> 00:08:23,120
and that someone has to tackle the

00:08:20,840 --> 00:08:27,380
problem and the Julius and Matt are

00:08:23,120 --> 00:08:29,540
these someone I saw at the end of 2012

00:08:27,380 --> 00:08:31,550
still nothing at soundcloud no one

00:08:29,540 --> 00:08:33,560
actually new example of that these two

00:08:31,550 --> 00:08:35,750
guys very and their free time like

00:08:33,560 --> 00:08:39,310
talking about that and starting hacking

00:08:35,750 --> 00:08:45,460
on this prototype they SAT together and

00:08:39,310 --> 00:08:47,660
started working on canisius so how did

00:08:45,460 --> 00:08:49,790
how did the sample of infrastructure

00:08:47,660 --> 00:08:52,810
look like in 2012 or what what was

00:08:49,790 --> 00:08:56,560
appointed eye exam plot

00:08:52,810 --> 00:08:59,260
so on the one side paraphrasing here

00:08:56,560 --> 00:09:01,300
Julius again I for like an outsider

00:08:59,260 --> 00:09:03,010
coming into the company Sam plot was

00:09:01,300 --> 00:09:05,350
pretty advanced already so we had like

00:09:03,010 --> 00:09:07,570
we wrote our own container orchestration

00:09:05,350 --> 00:09:11,320
system mind you this was like way before

00:09:07,570 --> 00:09:13,839
toca came out but yeah I mean we also

00:09:11,320 --> 00:09:16,150
inspired by googling like some papers

00:09:13,839 --> 00:09:18,460
which way out be found out okay we need

00:09:16,150 --> 00:09:21,520
something which makes it easy to like

00:09:18,460 --> 00:09:24,730
deploy a new service somewhere and like

00:09:21,520 --> 00:09:26,650
not let our developers go to a

00:09:24,730 --> 00:09:28,480
configuration management via chef and

00:09:26,650 --> 00:09:30,250
yet still you chef and like set up

00:09:28,480 --> 00:09:32,050
cookbooks and recipes to deploy

00:09:30,250 --> 00:09:33,580
something on a single machine they

00:09:32,050 --> 00:09:36,160
should just be able to like builtin

00:09:33,580 --> 00:09:37,690
image and acai like okay one the summer

00:09:36,160 --> 00:09:39,370
I'm the developer I don't really care

00:09:37,690 --> 00:09:42,070
about like we're at once I just need

00:09:39,370 --> 00:09:43,870
some cpu cycles and some memory make it

00:09:42,070 --> 00:09:46,589
happen so we built us and this was

00:09:43,870 --> 00:09:49,240
already available at the end of 2012 um

00:09:46,589 --> 00:09:51,160
yeah it's called bazooka it's pretty

00:09:49,240 --> 00:09:52,750
similar to cabanas or like you will find

00:09:51,160 --> 00:09:54,279
like a lot of the concepts again we

00:09:52,750 --> 00:09:56,140
still use I feel like it's a moment in

00:09:54,279 --> 00:09:57,970
the big in the middle of the migration

00:09:56,140 --> 00:10:00,190
to Cooper Nettie's but it has served us

00:09:57,970 --> 00:10:02,710
really really well similar to Google net

00:10:00,190 --> 00:10:04,920
is there is like some agent or like

00:10:02,710 --> 00:10:07,990
asome Mars combine the middle be used

00:10:04,920 --> 00:10:10,750
yeah consensus door which like keeps all

00:10:07,990 --> 00:10:13,900
the store data and then on every single

00:10:10,750 --> 00:10:17,080
machine we call it a process manager is

00:10:13,900 --> 00:10:20,800
running him yeah they thing which then

00:10:17,080 --> 00:10:22,420
actually schedules container there that

00:10:20,800 --> 00:10:26,020
enabled really first deployment of new

00:10:22,420 --> 00:10:27,790
services people just needed to like it

00:10:26,020 --> 00:10:29,440
was like kind of modeled also after you

00:10:27,790 --> 00:10:30,880
woke you say it's at like bazooka in it

00:10:29,440 --> 00:10:33,490
and you had like a new application after

00:10:30,880 --> 00:10:35,530
your repository name and then you said

00:10:33,490 --> 00:10:37,660
like bazooka built and pack up your kit

00:10:35,530 --> 00:10:39,520
we posit Orion to an image and the new

00:10:37,660 --> 00:10:41,020
satellite bazooka scale and it scaled up

00:10:39,520 --> 00:10:44,350
some images in the we're done there's

00:10:41,020 --> 00:10:46,180
false like I don't know a couple of like

00:10:44,350 --> 00:10:47,560
order of magnitudes faster than what we

00:10:46,180 --> 00:10:49,150
had previously the chef where people

00:10:47,560 --> 00:10:50,500
were like working up to like weeks to

00:10:49,150 --> 00:10:54,490
like get their service up and running

00:10:50,500 --> 00:10:56,650
this was awesome it provided I mean it's

00:10:54,490 --> 00:10:58,209
like kind of an artifact of that eep

00:10:56,650 --> 00:11:01,060
lorries became like really dynamic no

00:10:58,209 --> 00:11:03,070
one cared anymore so before everything

00:11:01,060 --> 00:11:04,990
was like scheduled of like okay this

00:11:03,070 --> 00:11:06,190
machine will like one this wall and it's

00:11:04,990 --> 00:11:07,840
like an app server and

00:11:06,190 --> 00:11:09,610
okay take another machine and does it

00:11:07,840 --> 00:11:12,610
like a cache server so we always like a

00:11:09,610 --> 00:11:14,680
human assigned a job to a machine and

00:11:12,610 --> 00:11:16,240
now it was like a machine just saying

00:11:14,680 --> 00:11:18,370
like hey there's some free space i will

00:11:16,240 --> 00:11:19,420
like wonders container there but it's

00:11:18,370 --> 00:11:21,010
made like the whole infrastructure

00:11:19,420 --> 00:11:23,190
pretty dynamic it i will come back to

00:11:21,010 --> 00:11:26,860
that why that became the new problem on

00:11:23,190 --> 00:11:29,650
the other side has the ugly part we were

00:11:26,860 --> 00:11:32,290
not really advanced at all we had like a

00:11:29,650 --> 00:11:34,210
huge and we actually still have a huge

00:11:32,290 --> 00:11:35,860
monolithic rails application it's still

00:11:34,210 --> 00:11:38,530
running we call it the mothership

00:11:35,860 --> 00:11:40,000
Twitter call to the monorail um I think

00:11:38,530 --> 00:11:44,560
these are the things which will never

00:11:40,000 --> 00:11:47,980
die we're working on it and yeah most of

00:11:44,560 --> 00:11:49,930
the other services we built like bazooka

00:11:47,980 --> 00:11:52,000
for they actually not really into

00:11:49,930 --> 00:11:54,490
critical parts at that point so we have

00:11:52,000 --> 00:11:56,260
like mostly I think it was searched and

00:11:54,490 --> 00:11:58,240
some payment services though the velux

00:11:56,260 --> 00:11:59,560
the first teams which that like okay we

00:11:58,240 --> 00:12:00,910
don't want to have our stuff in the

00:11:59,560 --> 00:12:02,920
mothership anymore we really need to

00:12:00,910 --> 00:12:05,920
fill our own services and then lots of

00:12:02,920 --> 00:12:08,800
analytics jobs I actually looked up at

00:12:05,920 --> 00:12:11,170
get up and counted all the repositories

00:12:08,800 --> 00:12:12,520
which existed at the end of 2012 and we

00:12:11,170 --> 00:12:14,590
had at that point already 200 rapada

00:12:12,520 --> 00:12:16,450
toys um which still exists today

00:12:14,590 --> 00:12:18,880
otherwise I couldn't count them so it

00:12:16,450 --> 00:12:21,070
might be even like I don't know 250 or

00:12:18,880 --> 00:12:23,890
something so we had like a lot of

00:12:21,070 --> 00:12:25,660
services but she use the interfacing

00:12:23,890 --> 00:12:27,040
part or the what you see if you go to

00:12:25,660 --> 00:12:29,080
soundcloud this was pretty much all

00:12:27,040 --> 00:12:30,850
handled by the rails application and

00:12:29,080 --> 00:12:33,070
specifically we were just like preparing

00:12:30,850 --> 00:12:36,490
for a shift to a micro service

00:12:33,070 --> 00:12:38,020
architecture and beside that our

00:12:36,490 --> 00:12:40,420
infrastructure was like very common are

00:12:38,020 --> 00:12:41,950
as it looked like the space and on the

00:12:40,420 --> 00:12:43,380
top read some load balancer then the

00:12:41,950 --> 00:12:45,490
traffic went down to the applica

00:12:43,380 --> 00:12:46,900
application servers are like before via

00:12:45,490 --> 00:12:48,370
some caches then came the application

00:12:46,900 --> 00:12:50,410
server then came some other caches and

00:12:48,370 --> 00:12:52,150
then eventually you hit the database but

00:12:50,410 --> 00:12:56,440
it was exit pretty standard top-down

00:12:52,150 --> 00:12:58,900
approach on the monitoring site it was

00:12:56,440 --> 00:13:01,180
even uglier well okay for one we had

00:12:58,900 --> 00:13:04,960
like I guess pretty much all of the

00:13:01,180 --> 00:13:07,030
available open source tools in use but

00:13:04,960 --> 00:13:10,930
yeah nagios prophytes that's a ganglia

00:13:07,030 --> 00:13:14,320
kakdi Moonen a fun fact we still have

00:13:10,930 --> 00:13:16,180
all of them in use except muninn lesson

00:13:14,320 --> 00:13:18,339
learned i guess it's really yeah you

00:13:16,180 --> 00:13:18,830
just don't you can't simply like shut

00:13:18,339 --> 00:13:21,110
down

00:13:18,830 --> 00:13:23,480
and monitoring system you always have

00:13:21,110 --> 00:13:25,940
like some old service still writing out

00:13:23,480 --> 00:13:27,110
to that and no one has time to shut that

00:13:25,940 --> 00:13:30,230
down so you can't shut down the

00:13:27,110 --> 00:13:33,050
monitoring service fortunately none of

00:13:30,230 --> 00:13:34,990
these is really a new so I some obscure

00:13:33,050 --> 00:13:37,190
service might still vie to graphite but

00:13:34,990 --> 00:13:39,170
the traffic is so low that we actually

00:13:37,190 --> 00:13:40,940
don't touch this graphite so any more so

00:13:39,170 --> 00:13:42,170
like by now we don't really use them

00:13:40,940 --> 00:13:45,800
anymore but we still can't shut them

00:13:42,170 --> 00:13:48,110
down yeah and besides like these

00:13:45,800 --> 00:13:50,710
standard open source tools it we're like

00:13:48,110 --> 00:13:52,880
the typical real software service

00:13:50,710 --> 00:13:55,730
applications available at these days and

00:13:52,880 --> 00:13:57,020
you've elegant a break I've hidden don't

00:13:55,730 --> 00:13:58,580
have heard of that your neck is like

00:13:57,020 --> 00:13:59,990
pretty much if you have in rails

00:13:58,580 --> 00:14:01,580
application it does everything for you

00:13:59,990 --> 00:14:03,410
just like deploy there and they provide

00:14:01,580 --> 00:14:05,540
you people dashboard and everything it

00:14:03,410 --> 00:14:06,830
was pretty good deal very expensive you

00:14:05,540 --> 00:14:08,720
want to run it on all your servers that

00:14:06,830 --> 00:14:11,840
doesn't really work and a break is just

00:14:08,720 --> 00:14:15,260
for logging errors so it's not they're

00:14:11,840 --> 00:14:18,290
not all the same space of monitoring on

00:14:15,260 --> 00:14:19,880
call at that point worse we had the also

00:14:18,290 --> 00:14:22,100
this old-school model we had like one

00:14:19,880 --> 00:14:26,210
ops team and that had pretty much the

00:14:22,100 --> 00:14:27,890
pager and we were just about to

00:14:26,210 --> 00:14:30,080
transition to put like the first

00:14:27,890 --> 00:14:31,550
infrastructure teams on call exactly

00:14:30,080 --> 00:14:33,380
four per suka because paducah became an

00:14:31,550 --> 00:14:35,480
exception critical service that we

00:14:33,380 --> 00:14:38,660
needed someone to be on call for that 24

00:14:35,480 --> 00:14:40,640
hours but yeah beside that VA at this

00:14:38,660 --> 00:14:43,070
point was I mean think some Claudette

00:14:40,640 --> 00:14:45,430
maybe like 40 developers at that point

00:14:43,070 --> 00:14:48,350
it was still pretty small maybe like 50

00:14:45,430 --> 00:14:51,620
so we were over the years we have like

00:14:48,350 --> 00:14:54,040
transition to a different model and yeah

00:14:51,620 --> 00:14:56,180
our monitoring was actually almost

00:14:54,040 --> 00:14:57,830
exclusive black box alerting so there

00:14:56,180 --> 00:15:00,860
were like nagios which like does these

00:14:57,830 --> 00:15:03,770
famous Czechs everywhere and like goes

00:15:00,860 --> 00:15:05,330
to some note and ask what this space is

00:15:03,770 --> 00:15:07,130
and then it's like either over the

00:15:05,330 --> 00:15:09,380
specials or not and it sends out an

00:15:07,130 --> 00:15:11,720
alert or not but there is no we're we're

00:15:09,380 --> 00:15:14,690
like white box monitoring via like or

00:15:11,720 --> 00:15:16,280
yeah actually tell them a time sees

00:15:14,690 --> 00:15:17,840
database involved at this point I think

00:15:16,280 --> 00:15:20,300
we don't we didn't check like any

00:15:17,840 --> 00:15:23,270
graphite graphs for like hours it was

00:15:20,300 --> 00:15:25,880
like yeah pretty limited at that point

00:15:23,270 --> 00:15:27,170
and we still have like problems even

00:15:25,880 --> 00:15:29,110
though we didn't even use monitoring

00:15:27,170 --> 00:15:30,980
that much or as much as we should have

00:15:29,110 --> 00:15:32,120
yeah so we had like very little

00:15:30,980 --> 00:15:33,710
instrumentation is like one

00:15:32,120 --> 00:15:36,800
the biggest problem we had back at this

00:15:33,710 --> 00:15:39,560
place we had no / instant application

00:15:36,800 --> 00:15:43,339
matrix at also like the services which

00:15:39,560 --> 00:15:45,290
use that ski and graphite I mean this

00:15:43,339 --> 00:15:47,000
graphite is like a limiting source you

00:15:45,290 --> 00:15:51,740
can't really put like an instance name

00:15:47,000 --> 00:15:53,930
in your graphite part if you have like

00:15:51,740 --> 00:15:55,760
in such high dynamic deploy as we have

00:15:53,930 --> 00:15:57,830
some bits bazooka or coo benetti's or

00:15:55,760 --> 00:15:59,690
docker we're like basically which we ate

00:15:57,830 --> 00:16:01,339
like new time see you liked you too if

00:15:59,690 --> 00:16:05,360
you create hundreds of new time series

00:16:01,339 --> 00:16:07,339
per hour or over the day um you will

00:16:05,360 --> 00:16:08,839
need to scale graphite and yeah we

00:16:07,339 --> 00:16:10,190
didn't have like put any effort into

00:16:08,839 --> 00:16:11,960
scaling graphite so we couldn't really

00:16:10,190 --> 00:16:18,920
do that so we had like no per instance

00:16:11,960 --> 00:16:21,290
matrix at all and yeah okay and the

00:16:18,920 --> 00:16:23,029
large part is like a dead ste just

00:16:21,290 --> 00:16:24,470
started to fall apart as well so like

00:16:23,029 --> 00:16:27,890
this was actually one of Julia's first

00:16:24,470 --> 00:16:29,600
jobs at soundcloud i was like hey we are

00:16:27,890 --> 00:16:31,160
missing some metrics here so we are not

00:16:29,600 --> 00:16:33,290
really sure that should be really more

00:16:31,160 --> 00:16:35,390
metrics or like more requests for this

00:16:33,290 --> 00:16:37,120
application and you really started to

00:16:35,390 --> 00:16:39,110
look into it and then realized okay

00:16:37,120 --> 00:16:40,730
actually with that Stevie we're like

00:16:39,110 --> 00:16:43,430
dropping UDP package left and white

00:16:40,730 --> 00:16:45,740
because sets d originally is written an

00:16:43,430 --> 00:16:48,440
oj s which can only utilize a single

00:16:45,740 --> 00:16:51,140
core all the the score was completely

00:16:48,440 --> 00:16:55,970
packed at 10 percent and then yeah it

00:16:51,140 --> 00:16:57,500
was a lot of bactrim push the CDP

00:16:55,970 --> 00:16:59,630
packages actually never made it to the

00:16:57,500 --> 00:17:01,820
stack steve server so Julius one of the

00:16:59,630 --> 00:17:04,730
first task was them to or what he built

00:17:01,820 --> 00:17:06,829
was like kind of like a hierarchy so

00:17:04,730 --> 00:17:08,689
we're like first suspect our

00:17:06,829 --> 00:17:10,309
applications pushed to a local steps d

00:17:08,689 --> 00:17:11,660
server and then the local steps deserve

00:17:10,309 --> 00:17:14,360
a patched it up and send it to the next

00:17:11,660 --> 00:17:19,250
sixty server which borders some time but

00:17:14,360 --> 00:17:23,870
I think it also made Julius realized

00:17:19,250 --> 00:17:27,770
that for me CEA's is the great to go so

00:17:23,870 --> 00:17:29,570
um we still end up 2012 and yes I said

00:17:27,770 --> 00:17:31,309
Julius and Matt started hacking in their

00:17:29,570 --> 00:17:33,980
free time in like kind of a secret

00:17:31,309 --> 00:17:35,900
project so mad at build likes the first

00:17:33,980 --> 00:17:38,120
prototypes and like the real it was like

00:17:35,900 --> 00:17:39,559
some motive a label but as I think

00:17:38,120 --> 00:17:44,179
nothing was really running at that point

00:17:39,559 --> 00:17:45,860
so they both started to begin working in

00:17:44,179 --> 00:17:49,040
isolation that's actually something I

00:17:45,860 --> 00:17:52,010
find really interesting so net started

00:17:49,040 --> 00:17:54,110
to work on the storage part and the at

00:17:52,010 --> 00:17:57,140
this moment was the only client library

00:17:54,110 --> 00:17:58,370
available box for Golan and Julius on

00:17:57,140 --> 00:18:00,440
the other side started to work on the

00:17:58,370 --> 00:18:01,850
configuration of the server the gravy

00:18:00,440 --> 00:18:04,940
language and the web interface and asked

00:18:01,850 --> 00:18:06,590
Julius so actually he did not have

00:18:04,940 --> 00:18:08,120
anything to test to any votes equivalent

00:18:06,590 --> 00:18:11,150
which because the storage was not ready

00:18:08,120 --> 00:18:14,809
yet so like they probably built stuff up

00:18:11,150 --> 00:18:17,450
and I I'm making this awkward and I met

00:18:14,809 --> 00:18:20,240
at one day and like merge their code

00:18:17,450 --> 00:18:23,750
together and it worked so they have like

00:18:20,240 --> 00:18:25,850
the first running for mrs. server and we

00:18:23,750 --> 00:18:29,450
move that yeah so they had like a first

00:18:25,850 --> 00:18:33,549
one in Commission server end of 2012 so

00:18:29,450 --> 00:18:38,360
we're jumping 2013 absolute I'm home uh

00:18:33,549 --> 00:18:41,059
and yeah now things became interesting

00:18:38,360 --> 00:18:43,760
so in January spill it was still a side

00:18:41,059 --> 00:18:46,870
project ah the premises developers

00:18:43,760 --> 00:18:50,650
mailing list you all know was created

00:18:46,870 --> 00:18:53,360
the promises I all domain for sport and

00:18:50,650 --> 00:18:56,750
one test instance was already constantly

00:18:53,360 --> 00:18:58,700
running and yeah for test purposes and

00:18:56,750 --> 00:19:00,650
like ingesting stuff and they were like

00:18:58,700 --> 00:19:04,940
constantly constantly tweaking on that

00:19:00,650 --> 00:19:06,350
and at that point Matt realized okay the

00:19:04,940 --> 00:19:08,960
situation had soundcloud of having

00:19:06,350 --> 00:19:11,390
actually no match weeks he was working

00:19:08,960 --> 00:19:12,860
on the mothership and had like 20 he

00:19:11,390 --> 00:19:14,929
told me yeah one of his first project

00:19:12,860 --> 00:19:16,850
was like to work on rabbitmq and he like

00:19:14,929 --> 00:19:19,700
completely v-world so RabbitMQ client

00:19:16,850 --> 00:19:24,230
and she put like one canary instance and

00:19:19,700 --> 00:19:27,110
then yeah he came to her might even have

00:19:24,230 --> 00:19:28,790
been me I came to like developers of the

00:19:27,110 --> 00:19:30,350
mothership and side like okay how can i

00:19:28,790 --> 00:19:33,530
get like metrics for this instance and

00:19:30,350 --> 00:19:35,840
weather like that's not possible I look

00:19:33,530 --> 00:19:37,850
at the locks or like look at those

00:19:35,840 --> 00:19:41,330
exceptions otherwise it's good and go

00:19:37,850 --> 00:19:43,280
out so yeah we really I wanted format

00:19:41,330 --> 00:19:45,350
coming from google coming from like a

00:19:43,280 --> 00:19:47,570
pretty more scientific background where

00:19:45,350 --> 00:19:51,410
like data first world always like a

00:19:47,570 --> 00:19:53,720
principal was like um yet at this point

00:19:51,410 --> 00:19:56,000
like he hit it hit him of like okay I

00:19:53,720 --> 00:19:57,559
really need to change that and he

00:19:56,000 --> 00:19:59,450
started to work to talk to the other

00:19:57,559 --> 00:20:00,950
managers or like engineering manager

00:19:59,450 --> 00:20:03,500
out and that like I guys actually

00:20:00,950 --> 00:20:05,539
started working on this thing and I

00:20:03,500 --> 00:20:07,760
believe it could really help us and only

00:20:05,539 --> 00:20:11,570
at that point it started to become a

00:20:07,760 --> 00:20:15,549
sampler project oh yeah actually before

00:20:11,570 --> 00:20:17,539
it was really announced he already added

00:20:15,549 --> 00:20:19,730
instrumentation to bazooka so bazooka

00:20:17,539 --> 00:20:22,190
also itself the latest container system

00:20:19,730 --> 00:20:25,159
we built had no metrics so like didn't

00:20:22,190 --> 00:20:27,500
export anything I mean be newer / nag us

00:20:25,159 --> 00:20:29,750
like how much they feel the whole note

00:20:27,500 --> 00:20:31,429
was using but otherwise people they're

00:20:29,750 --> 00:20:34,940
just like SS aging into the Machine and

00:20:31,429 --> 00:20:37,490
like doing H top and whatever yeah

00:20:34,940 --> 00:20:38,990
solved a job for them I mean it was yeah

00:20:37,490 --> 00:20:40,850
baby it was a small company and we

00:20:38,990 --> 00:20:43,250
needed to move forward but yeah from an

00:20:40,850 --> 00:20:45,710
tha's was obviously now in hindsight for

00:20:43,250 --> 00:20:47,210
all of us something which was not

00:20:45,710 --> 00:20:48,799
possible and yeah we had actually

00:20:47,210 --> 00:20:52,070
learned the first instrumented service

00:20:48,799 --> 00:20:54,889
with the guy client program then came

00:20:52,070 --> 00:20:57,350
favorably and Julius and Matt gave an

00:20:54,889 --> 00:20:59,929
Tech Talk and internally on internal

00:20:57,350 --> 00:21:01,940
tech talk at SoundCloud and showed what

00:20:59,929 --> 00:21:05,899
they had built and what they had in mind

00:21:01,940 --> 00:21:08,029
and started to convince people that

00:21:05,899 --> 00:21:10,190
labels are really a thing I mean none of

00:21:08,029 --> 00:21:13,429
us had ever I mean none of the people at

00:21:10,190 --> 00:21:14,600
and didn't work at Google before I yeah

00:21:13,429 --> 00:21:16,100
I'm pretty sure i have like actually

00:21:14,600 --> 00:21:18,980
seen a metric system is labeled so the

00:21:16,100 --> 00:21:21,559
ball pretty newer and I definitely

00:21:18,980 --> 00:21:23,240
remember that I needed like some ID on

00:21:21,559 --> 00:21:26,240
or lunches to like understand really the

00:21:23,240 --> 00:21:27,830
beauty of labels because I was just like

00:21:26,240 --> 00:21:30,440
yeah whatever would get the job done I

00:21:27,830 --> 00:21:31,549
mean dots or labeled what's a big

00:21:30,440 --> 00:21:34,850
difference I mean there is a big

00:21:31,549 --> 00:21:37,490
difference as I know these days and yeah

00:21:34,850 --> 00:21:39,559
also in February then they started to

00:21:37,490 --> 00:21:41,330
allocate actual work time during some

00:21:39,559 --> 00:21:43,850
thought work time to work on promises to

00:21:41,330 --> 00:21:46,159
build a system that can help us to like

00:21:43,850 --> 00:21:48,260
actually have all these metrics as I

00:21:46,159 --> 00:21:52,159
convinced that we convinced us we will

00:21:48,260 --> 00:21:55,789
need to like further grow and keep our

00:21:52,159 --> 00:21:58,070
systems manageable and also in February

00:21:55,789 --> 00:21:59,690
that wasn't the time it when the Java

00:21:58,070 --> 00:22:01,820
client was born because soundcloud

00:21:59,690 --> 00:22:03,559
slowly at this point started to

00:22:01,820 --> 00:22:05,899
transition from like a ruby shop to like

00:22:03,559 --> 00:22:08,870
a Java shop so I like actually we use

00:22:05,899 --> 00:22:10,850
scholar mostly but yeah we needed some

00:22:08,870 --> 00:22:12,309
job if you had like Java than most of

00:22:10,850 --> 00:22:17,870
the other jpn problems result

00:22:12,309 --> 00:22:20,120
and yeah actually pretty shortly after i

00:22:17,870 --> 00:22:24,020
think in april are the first expedition

00:22:20,120 --> 00:22:26,929
formats very clearly defined um if you

00:22:24,020 --> 00:22:29,690
know Matt he is really good at defining

00:22:26,929 --> 00:22:32,420
things and really clear and

00:22:29,690 --> 00:22:34,820
understandable way but it gets a bit

00:22:32,420 --> 00:22:36,410
long at times and see first two

00:22:34,820 --> 00:22:38,390
expedition formats were actually Jays in

00:22:36,410 --> 00:22:39,980
a padova which yeah might be a fun fact

00:22:38,390 --> 00:22:42,140
for some people so we did not have a

00:22:39,980 --> 00:22:44,960
text for a format in the beginning it

00:22:42,140 --> 00:22:49,820
was Jasmine protobuf I think your entire

00:22:44,960 --> 00:22:53,120
Julius touch this briefly yesterday yeah

00:22:49,820 --> 00:22:55,250
and then a bit forward we did not have

00:22:53,120 --> 00:22:57,380
any services kavya that point as well so

00:22:55,250 --> 00:22:59,600
question who started to implement

00:22:57,380 --> 00:23:02,540
service discovery after they sought for

00:22:59,600 --> 00:23:07,190
meteors and felt okay i need a services

00:23:02,540 --> 00:23:10,100
covino okay few people and who started

00:23:07,190 --> 00:23:15,340
to use it use dns for that because that

00:23:10,100 --> 00:23:19,280
was what from easy has offered okay uh

00:23:15,340 --> 00:23:20,929
yeah I guess Matt would uh yeah I'd like

00:23:19,280 --> 00:23:22,640
to see that because he actually also

00:23:20,929 --> 00:23:24,770
came up with a deal like implementing a

00:23:22,640 --> 00:23:27,230
services coffee and it was also than his

00:23:24,770 --> 00:23:30,320
idea to use DNS for that what we did so

00:23:27,230 --> 00:23:32,480
far until this point yeah we statically

00:23:30,320 --> 00:23:34,940
configured DNS names so as I said we use

00:23:32,480 --> 00:23:36,410
chef chef for lakers a configuration

00:23:34,940 --> 00:23:38,780
management or someone when they're

00:23:36,410 --> 00:23:43,370
edited the data back added like some new

00:23:38,780 --> 00:23:45,049
a record or seen a cname ah and like

00:23:43,370 --> 00:23:47,120
side like okay this name point like

00:23:45,049 --> 00:23:48,799
Jesus IP and that's audit and then you

00:23:47,120 --> 00:23:50,720
rated like 50 minute so I think it's a

00:23:48,799 --> 00:23:53,410
contact 30 minutes and at some point it

00:23:50,720 --> 00:23:55,580
appeared but it was definitely not nice

00:23:53,410 --> 00:23:57,020
yeah the whole thing was like as I said

00:23:55,580 --> 00:23:58,669
proven by chef so you always have to

00:23:57,020 --> 00:24:01,160
wait for like our chef client interval

00:23:58,669 --> 00:24:03,410
and it was also really coupled to chef

00:24:01,160 --> 00:24:05,870
because we used all the shaft all names

00:24:03,410 --> 00:24:10,490
as in our service I mean it wasn't a

00:24:05,870 --> 00:24:11,390
service copy in our discovery yeah and

00:24:10,490 --> 00:24:12,740
all our service the service

00:24:11,390 --> 00:24:15,200
communication we had at that point

00:24:12,740 --> 00:24:17,090
actually went over HTTP local answers

00:24:15,200 --> 00:24:19,250
and there was that we'll all we have and

00:24:17,090 --> 00:24:20,870
I mean it worked where the March we

00:24:19,250 --> 00:24:24,640
started shortly after we started to see

00:24:20,870 --> 00:24:24,640
like bottlenecks this

00:24:25,460 --> 00:24:32,720
yea Raj proxies there was no consistency

00:24:30,140 --> 00:24:35,750
and the naming at all we had like these

00:24:32,720 --> 00:24:37,520
funny names and I guess it might not be

00:24:35,750 --> 00:24:40,970
clear but actually talking to one

00:24:37,520 --> 00:24:42,919
service at the port 80 thousand 43 I

00:24:40,970 --> 00:24:45,740
can't tell you anymore what services

00:24:42,919 --> 00:24:48,770
worse but as I said we had like maybe I

00:24:45,740 --> 00:24:51,230
don't know 100 services maybe each of

00:24:48,770 --> 00:24:53,000
them had their own port you needed to

00:24:51,230 --> 00:24:56,330
look up for divorce but that was how we

00:24:53,000 --> 00:24:59,029
talked to another service and yeah

00:24:56,330 --> 00:25:01,039
Johannes he's actually here I might know

00:24:59,029 --> 00:25:03,320
him as fish from the Irish Sea then

00:25:01,039 --> 00:25:06,679
started to work on our first E&S pay

00:25:03,320 --> 00:25:08,090
services cover it were supposed to be

00:25:06,679 --> 00:25:09,799
like one system where you could like

00:25:08,090 --> 00:25:11,809
this cover both bazooka deployed

00:25:09,799 --> 00:25:14,840
services as well as like old-school chef

00:25:11,809 --> 00:25:17,570
deployed services it had like this kind

00:25:14,840 --> 00:25:19,789
of naming scheme which matt envisioned

00:25:17,570 --> 00:25:22,159
as well I mean it put like some great

00:25:19,789 --> 00:25:24,289
structure in there the reason for that

00:25:22,159 --> 00:25:26,029
was like kind of every every new

00:25:24,289 --> 00:25:28,760
engineer came like Tucson taught at that

00:25:26,029 --> 00:25:31,250
point started to Lake dwarven huge

00:25:28,760 --> 00:25:33,020
diagram to like try to like understand

00:25:31,250 --> 00:25:35,029
like this huge infrastructure which was

00:25:33,020 --> 00:25:36,490
like splat all over the part so this was

00:25:35,029 --> 00:25:39,500
actually more or less just another

00:25:36,490 --> 00:25:44,510
attempt to like put some structure on

00:25:39,500 --> 00:25:46,730
our services and yeah we had like

00:25:44,510 --> 00:25:48,649
committee support now or we at that

00:25:46,730 --> 00:25:50,990
point we also developed like DNS

00:25:48,649 --> 00:25:54,529
services copy support in prometheus to

00:25:50,990 --> 00:25:56,299
like now uses news 13s services kv2 not

00:25:54,529 --> 00:25:59,510
longer have the need to Like You chef to

00:25:56,299 --> 00:26:03,429
let generate I yeah statically

00:25:59,510 --> 00:26:06,890
configured targets in our mrs. config uh

00:26:03,429 --> 00:26:08,240
one lesson learned here I want yeah talk

00:26:06,890 --> 00:26:11,600
to me afterwards we find it interesting

00:26:08,240 --> 00:26:14,149
don't do that don't put like team or a

00:26:11,600 --> 00:26:16,190
product or like any meteor information

00:26:14,149 --> 00:26:17,929
into your welding these things change

00:26:16,190 --> 00:26:19,880
and you don't want to update your

00:26:17,929 --> 00:26:23,270
service configuration just to tell it

00:26:19,880 --> 00:26:25,399
hey actually the product was V name

00:26:23,270 --> 00:26:27,169
because some product manager thought

00:26:25,399 --> 00:26:28,399
okay or like there was some reason to be

00:26:27,169 --> 00:26:30,500
named the product and now we have to

00:26:28,399 --> 00:26:33,350
change all our services don't do that we

00:26:30,500 --> 00:26:35,210
move that please yeah and then

00:26:33,350 --> 00:26:37,370
unfortunately also in 2013 it was like

00:26:35,210 --> 00:26:39,320
the first very very sad moment because

00:26:37,370 --> 00:26:42,680
Matt left some thought again after just

00:26:39,320 --> 00:26:45,830
one year he uh in just like 12 months he

00:26:42,680 --> 00:26:47,690
definitely left like a huge what made

00:26:45,830 --> 00:26:48,830
like a huge impact I mean he kicked off

00:26:47,690 --> 00:26:50,690
parameters he kicked off our

00:26:48,830 --> 00:26:52,280
understanding of like we need metrics

00:26:50,690 --> 00:26:53,990
and metrics important we can't scale

00:26:52,280 --> 00:26:55,670
without that he kicked off service

00:26:53,990 --> 00:27:00,530
discovery he actually worked a lot also

00:26:55,670 --> 00:27:03,320
on the on-call schedules and lex

00:27:00,530 --> 00:27:04,520
introduction of on-call teams but yeah

00:27:03,320 --> 00:27:07,340
there were like lots of reasons why you

00:27:04,520 --> 00:27:09,110
had to leave but it meant that Julius

00:27:07,340 --> 00:27:11,720
had like kind of a hard time because now

00:27:09,110 --> 00:27:13,460
after being skeptical just like one year

00:27:11,720 --> 00:27:15,620
before if it's like possible to build

00:27:13,460 --> 00:27:17,840
like such a huge system suddenly was

00:27:15,620 --> 00:27:21,290
alone and was like I had to like solve

00:27:17,840 --> 00:27:23,690
the thing on his own so I yeah I know it

00:27:21,290 --> 00:27:27,410
was like a part time for like both of

00:27:23,690 --> 00:27:29,540
them at that moment and guaranteed to

00:27:27,410 --> 00:27:31,309
speed up a little bit um some other

00:27:29,540 --> 00:27:34,520
highlights from 2013 so we have like

00:27:31,309 --> 00:27:36,440
service discovery at soundcloud we in

00:27:34,520 --> 00:27:38,480
this year also thanks to Matt we

00:27:36,440 --> 00:27:40,520
transition to model of like you build it

00:27:38,480 --> 00:27:45,020
you own it and you on call for it I'm

00:27:40,520 --> 00:27:46,880
similar to out pain we the first team

00:27:45,020 --> 00:27:49,880
started to build a vibe like one books

00:27:46,880 --> 00:27:51,050
um yeah there might be other talk

00:27:49,880 --> 00:27:53,090
talking about one books and everything

00:27:51,050 --> 00:27:55,370
but definitely helped a lot to like

00:27:53,090 --> 00:27:58,550
understand okay if I get a page what is

00:27:55,370 --> 00:28:01,309
what I'm supposed to do and you have

00:27:58,550 --> 00:28:03,710
your joined awesome 2013 but at that

00:28:01,309 --> 00:28:05,150
point he was not working on premises yet

00:28:03,710 --> 00:28:08,240
he would like for the scientists like

00:28:05,150 --> 00:28:12,140
some other project but we started to get

00:28:08,240 --> 00:28:14,720
like our soon-to-be next call

00:28:12,140 --> 00:28:17,390
contributor of promises and at super

00:28:14,720 --> 00:28:19,670
media site so at the end of 2013 we had

00:28:17,390 --> 00:28:22,700
them on a girl Java and they will be

00:28:19,670 --> 00:28:24,890
client libraries which pretty much

00:28:22,700 --> 00:28:27,470
covered all the services or likes main

00:28:24,890 --> 00:28:29,240
languages we use that soundcloud the

00:28:27,470 --> 00:28:32,929
alert manager was already born in July

00:28:29,240 --> 00:28:35,030
also 2013 and yeah the were confirmed

00:28:32,929 --> 00:28:37,070
ish started so as I misunderstood so I

00:28:35,030 --> 00:28:38,600
fine i did not exist exist at that point

00:28:37,070 --> 00:28:42,559
where farna were started like in early

00:28:38,600 --> 00:28:44,480
2014 and julius all the neat okay we

00:28:42,559 --> 00:28:46,220
need like something to make it easy for

00:28:44,480 --> 00:28:48,440
people to like put all these graphs

00:28:46,220 --> 00:28:50,330
together because as we all now / graph

00:28:48,440 --> 00:28:50,640
is nice for exploration but doesn't

00:28:50,330 --> 00:28:52,740
really

00:28:50,640 --> 00:28:55,020
and that was actually than the point

00:28:52,740 --> 00:28:57,360
when we've got our first hire over

00:28:55,020 --> 00:29:00,570
prometheus so Stuart was it's also in

00:28:57,360 --> 00:29:03,960
the first world style looked at like

00:29:00,570 --> 00:29:06,420
famous github people to for like new

00:29:03,960 --> 00:29:08,250
opportunities to work on and came of

00:29:06,420 --> 00:29:10,410
course the premises project and came

00:29:08,250 --> 00:29:12,030
across pond ish and thought like hey

00:29:10,410 --> 00:29:14,610
actually guys what you do there is

00:29:12,030 --> 00:29:16,260
pretty ugly um let me help you and yeah

00:29:14,610 --> 00:29:17,910
then he pretty much wrote from the SH

00:29:16,260 --> 00:29:19,440
from that point on oh yeah I think it's

00:29:17,910 --> 00:29:21,420
like ninety percent is like Stewart

00:29:19,440 --> 00:29:22,950
sculpt and they're actually most of the

00:29:21,420 --> 00:29:24,270
time I think he worked on that without

00:29:22,950 --> 00:29:26,730
actually ever having a firm easiest

00:29:24,270 --> 00:29:28,620
server so he just like built a great

00:29:26,730 --> 00:29:30,180
your eye without actually being able to

00:29:28,620 --> 00:29:33,090
try all to queries which I also find

00:29:30,180 --> 00:29:34,920
like pretty impressive and yeah we had

00:29:33,090 --> 00:29:37,260
like eight teams already using promises

00:29:34,920 --> 00:29:41,160
and I think it was like I can't count

00:29:37,260 --> 00:29:42,870
anymore because retention we don't i

00:29:41,160 --> 00:29:46,620
think we had like around ten for me to

00:29:42,870 --> 00:29:47,850
server but um production kind of wanting

00:29:46,620 --> 00:29:51,840
our infrastructure for like these

00:29:47,850 --> 00:29:53,280
different teams grating director uh yeah

00:29:51,840 --> 00:29:55,860
/ mrs. did not have any point releases

00:29:53,280 --> 00:29:58,950
at that point it was just like it as a

00:29:55,860 --> 00:30:00,660
shower based and they I think pretty

00:29:58,950 --> 00:30:03,590
much continuously deployed every time

00:30:00,660 --> 00:30:07,590
there was something worse putting out

00:30:03,590 --> 00:30:11,100
jumping 2000-2014 oh okay i think i

00:30:07,590 --> 00:30:14,360
will need to cut the questions and

00:30:11,100 --> 00:30:17,540
they'll try to make it until you live in

00:30:14,360 --> 00:30:21,120
the bush gate they were started in the

00:30:17,540 --> 00:30:23,880
yeah beginning of 2014 i won't go into

00:30:21,120 --> 00:30:27,480
this topic as we all know it's very

00:30:23,880 --> 00:30:30,090
religious but we had to need to like

00:30:27,480 --> 00:30:33,360
also get metrics at that point for our

00:30:30,090 --> 00:30:35,490
for female jobs mostly MapReduce jobs

00:30:33,360 --> 00:30:37,310
running on Hadoop or then also the shaft

00:30:35,490 --> 00:30:39,150
client itself so all the stuff which

00:30:37,310 --> 00:30:41,100
disappears after like a couple of

00:30:39,150 --> 00:30:44,070
seconds in our services copy at that

00:30:41,100 --> 00:30:45,750
point wasn't even able to like put them

00:30:44,070 --> 00:30:47,250
up already in the time so there was no

00:30:45,750 --> 00:30:49,710
point that permeate Scott likes gray

00:30:47,250 --> 00:30:51,690
please we had to drop the need for like

00:30:49,710 --> 00:30:55,440
scrapings easy female jobs and I looked

00:30:51,690 --> 00:30:57,290
so this was in january 2014 and the very

00:30:55,440 --> 00:31:02,760
very first commit of the push gateway

00:30:57,290 --> 00:31:04,650
hat um that pardon tweet me which i

00:31:02,760 --> 00:31:06,750
found is still worse

00:31:04,650 --> 00:31:08,790
putting out so the push gateway was not

00:31:06,750 --> 00:31:11,610
intended of led to be like us that's the

00:31:08,790 --> 00:31:13,350
thing it was really just like a cash so

00:31:11,610 --> 00:31:15,810
that camisas had some time to like

00:31:13,350 --> 00:31:19,500
actually get these metrics as the target

00:31:15,810 --> 00:31:22,440
we already come and yeah also in the

00:31:19,500 --> 00:31:24,570
beginning of 2014 the premises you

00:31:22,440 --> 00:31:26,400
should usage outside of Santos started

00:31:24,570 --> 00:31:28,770
so as I said fished he brought Lakes the

00:31:26,400 --> 00:31:30,570
first for services Covey implementation

00:31:28,770 --> 00:31:32,760
at soundcloud and did also a lot of the

00:31:30,570 --> 00:31:35,640
operation and like put up it also chef

00:31:32,760 --> 00:31:39,270
part for prometheus he had left i think

00:31:35,640 --> 00:31:43,410
at the end of two thousand i'm 13 and he

00:31:39,270 --> 00:31:45,780
happened to join pucker ah and i was

00:31:43,410 --> 00:31:48,570
jumping ahead so yeah he was joining

00:31:45,780 --> 00:31:51,240
tucker and then he knew sunk at me she

00:31:48,570 --> 00:31:53,040
stole from SoundCloud and came to julius

00:31:51,240 --> 00:31:54,270
i guess and said like hey dude i would

00:31:53,040 --> 00:31:55,800
like to use for me tease and i would

00:31:54,270 --> 00:31:58,770
like actually to still collaborators

00:31:55,800 --> 00:32:01,020
here so we used at some thoughts at that

00:31:58,770 --> 00:32:03,600
point still IRC saw the parameters is

00:32:01,020 --> 00:32:05,220
each channel was born just for the point

00:32:03,600 --> 00:32:07,530
of like still being able to talk to leg

00:32:05,220 --> 00:32:09,660
or ex-colleague and yet again then i was

00:32:07,530 --> 00:32:12,510
like the third person joining that after

00:32:09,660 --> 00:32:15,030
like an invitation and third that was

00:32:12,510 --> 00:32:17,220
like our first external user then an ex

00:32:15,030 --> 00:32:20,670
soundcloud ur so maybe it's a great area

00:32:17,220 --> 00:32:22,680
of like external user I who started that

00:32:20,670 --> 00:32:27,180
stalker and introduced / mrs. a Tucker

00:32:22,680 --> 00:32:30,960
and I think in May as pure and salad

00:32:27,180 --> 00:32:33,600
yesterday wine former colleague of urine

00:32:30,960 --> 00:32:36,360
I fit at Google or like beginning of

00:32:33,600 --> 00:32:39,840
2014 I guess and like join box ever and

00:32:36,360 --> 00:32:41,490
at like also the neat similar to Matt

00:32:39,840 --> 00:32:45,240
and Julius of like a I need like a great

00:32:41,490 --> 00:32:47,100
mana ya monitoring system and he are

00:32:45,240 --> 00:32:49,320
Spearin and Buren was like yeah maybe

00:32:47,100 --> 00:32:52,560
look at this for mrs. organization and

00:32:49,320 --> 00:32:56,040
that more than our second external user

00:32:52,560 --> 00:32:57,510
ah with buying Russell and yeah we're

00:32:56,040 --> 00:33:01,440
happy to have like a huge core

00:32:57,510 --> 00:33:03,720
contributor now and yeah as wine likes

00:33:01,440 --> 00:33:06,510
to say if it didn't exist I would have

00:33:03,720 --> 00:33:08,640
created it so I guess we were lucky to

00:33:06,510 --> 00:33:10,290
head like or like you be lucky to like

00:33:08,640 --> 00:33:12,420
had like a head start with that but

00:33:10,290 --> 00:33:16,410
since then a huge collaboration started

00:33:12,420 --> 00:33:17,200
and yeah he is now our diamond sponsor

00:33:16,410 --> 00:33:21,899
and

00:33:17,200 --> 00:33:25,029
I guess it worked out for all of us and

00:33:21,899 --> 00:33:27,760
sad part in the story of Prometheus was

00:33:25,029 --> 00:33:32,380
actually when Prometheus bored a bit too

00:33:27,760 --> 00:33:35,169
much fire too suncloud so yeah this was

00:33:32,380 --> 00:33:38,289
the first and i believe to that point

00:33:35,169 --> 00:33:41,909
the only outage or like real huge outage

00:33:38,289 --> 00:33:44,440
from easiest course that sound loud so

00:33:41,909 --> 00:33:46,240
we all now pull this great and Paul

00:33:44,440 --> 00:33:48,429
makes it actually super easy to just

00:33:46,240 --> 00:33:50,200
like put up another server and you can

00:33:48,429 --> 00:33:52,539
just like puts us up everywhere and like

00:33:50,200 --> 00:33:54,909
do whatever with that so Julian buren

00:33:52,539 --> 00:33:57,340
use that extensively to like put up a

00:33:54,909 --> 00:33:59,139
test server somewhere which like they

00:33:57,340 --> 00:34:01,570
could liked SQ implementation or like

00:33:59,139 --> 00:34:03,100
new performance improvements and they

00:34:01,570 --> 00:34:04,539
just want to describe as many metric

00:34:03,100 --> 00:34:06,279
that's possible too late yeah one

00:34:04,539 --> 00:34:08,200
listing hot to see like where where the

00:34:06,279 --> 00:34:09,970
bottlenecks are so there was just like

00:34:08,200 --> 00:34:12,480
some test service service we're always

00:34:09,970 --> 00:34:15,790
running somewhere which was totally fine

00:34:12,480 --> 00:34:18,280
another interesting point at that time

00:34:15,790 --> 00:34:19,480
was we switched so previously at while

00:34:18,280 --> 00:34:21,970
at the beginning of whom users we had

00:34:19,480 --> 00:34:24,490
like / Matt fixed or Jason because yeah

00:34:21,970 --> 00:34:26,589
we had likes us met jason or jason

00:34:24,490 --> 00:34:29,169
exposition format and supporter buff and

00:34:26,589 --> 00:34:30,940
in the beginning there was not HTTP come

00:34:29,169 --> 00:34:33,760
to negotiation it was just like you're

00:34:30,940 --> 00:34:35,230
either hit like doc chey's or something

00:34:33,760 --> 00:34:36,460
else and then we decided actually it

00:34:35,230 --> 00:34:38,379
makes way more sense to just like every

00:34:36,460 --> 00:34:40,179
one endpoint and use the HT people to

00:34:38,379 --> 00:34:41,889
call for that and at that point we just

00:34:40,179 --> 00:34:44,169
switch to like from one to the other and

00:34:41,889 --> 00:34:45,550
then ever like some services which

00:34:44,169 --> 00:34:49,030
already had updated to a client

00:34:45,550 --> 00:34:50,379
libraries or their config switch like so

00:34:49,030 --> 00:34:51,879
like there was an example a smidge of

00:34:50,379 --> 00:34:53,829
like the community server still thought

00:34:51,879 --> 00:34:55,569
like I need to scrape metrics to Jason

00:34:53,829 --> 00:34:59,290
but the service is already only opened

00:34:55,569 --> 00:35:03,339
up / metrics so there was like one very

00:34:59,290 --> 00:35:06,160
um it looks pretty cute actually commit

00:35:03,339 --> 00:35:08,109
edit to Prometheus to like there was the

00:35:06,160 --> 00:35:10,089
first time we actually happen like our

00:35:08,109 --> 00:35:12,700
pages coming back from the client

00:35:10,089 --> 00:35:16,720
library because there was like 10 244 so

00:35:12,700 --> 00:35:18,460
the some server spit and not provide yet

00:35:16,720 --> 00:35:20,470
the other one does anyone see the

00:35:18,460 --> 00:35:23,260
problem was like these five lines of

00:35:20,470 --> 00:35:26,010
code okay except legacy core or let go

00:35:23,260 --> 00:35:26,010
contributors

00:35:26,680 --> 00:35:33,859
exactly um so the defer happens after

00:35:31,100 --> 00:35:36,890
this so like it's a indicates that super

00:35:33,859 --> 00:35:38,510
media server um are some target for like

00:35:36,890 --> 00:35:41,869
Matt fixed up Jason and that server

00:35:38,510 --> 00:35:44,510
already provided / Matt fix it we turn

00:35:41,869 --> 00:35:46,190
to for for this commit words added to

00:35:44,510 --> 00:35:47,540
like catch that and not probably there

00:35:46,190 --> 00:35:49,910
was lady more problems without that

00:35:47,540 --> 00:35:52,640
permit so we turned an error and the

00:35:49,910 --> 00:35:54,490
server was happy kind of because it

00:35:52,640 --> 00:35:56,930
never really close the connection that

00:35:54,490 --> 00:35:58,250
was like not really a problem for the

00:35:56,930 --> 00:36:01,340
test so we've got it was a test server

00:35:58,250 --> 00:36:02,540
and whatever the problem force it also

00:36:01,340 --> 00:36:04,700
didn't close the connection on the other

00:36:02,540 --> 00:36:07,340
part and the other part happened to be

00:36:04,700 --> 00:36:12,800
our bazooka process managers and how

00:36:07,340 --> 00:36:14,240
brazuca was implemented so I we had like

00:36:12,800 --> 00:36:16,070
this process managers and they were like

00:36:14,240 --> 00:36:18,140
some rappers around two containers which

00:36:16,070 --> 00:36:19,670
sent like continuously heartbeats to the

00:36:18,140 --> 00:36:23,180
process manager to tell it like hey I'm

00:36:19,670 --> 00:36:25,460
still here and the poses managers had

00:36:23,180 --> 00:36:29,450
just likes a default file descriptor

00:36:25,460 --> 00:36:31,790
limit of 12 1024 which after some

00:36:29,450 --> 00:36:35,359
scrapes where hit so they didn't accept

00:36:31,790 --> 00:36:37,430
any new connections and then the pursue

00:36:35,359 --> 00:36:39,650
these managers couldn't also accept

00:36:37,430 --> 00:36:42,260
these heartbeats anymore and we had like

00:36:39,650 --> 00:36:44,030
then a time loop in there after like

00:36:42,260 --> 00:36:47,330
okay if I don't get a heartbeat for

00:36:44,030 --> 00:36:49,490
whatever 30 seconds I have to assume

00:36:47,330 --> 00:36:53,660
that is containers that and I have to

00:36:49,490 --> 00:36:57,260
market that in the store so after I

00:36:53,660 --> 00:36:59,510
don't have 15 minutes all our containers

00:36:57,260 --> 00:37:02,660
be marked as that and sound plot was

00:36:59,510 --> 00:37:04,400
completely down and we had like lot

00:37:02,660 --> 00:37:06,350
obviously lots of lessons learned all

00:37:04,400 --> 00:37:09,890
that I mean beside that I mean I find I

00:37:06,350 --> 00:37:12,619
not you have like seen many such severe

00:37:09,890 --> 00:37:16,820
outages caused by like one line which

00:37:12,619 --> 00:37:18,590
needs to be moved up but some other

00:37:16,820 --> 00:37:20,480
lessons learned from that availability

00:37:18,590 --> 00:37:23,660
checking or Health's checking his heart

00:37:20,480 --> 00:37:26,540
I we did not really think this through

00:37:23,660 --> 00:37:29,840
in bazooka I mean it worked in the good

00:37:26,540 --> 00:37:30,830
part that like yeah we actually we

00:37:29,840 --> 00:37:32,420
started to look at the code base

00:37:30,830 --> 00:37:34,460
afterwards and I found lay looked at

00:37:32,420 --> 00:37:35,990
aecom it's like the next two days they

00:37:34,460 --> 00:37:38,750
were like two completely unrelated bucks

00:37:35,990 --> 00:37:40,100
found in the same part so they were like

00:37:38,750 --> 00:37:42,710
actually quite a few problems

00:37:40,100 --> 00:37:47,030
so if you implement something like that

00:37:42,710 --> 00:37:49,610
take your time it is not easy another

00:37:47,030 --> 00:37:53,380
part was like yeah there was actually

00:37:49,610 --> 00:37:57,170
not enough instrumentation at all so I

00:37:53,380 --> 00:37:59,270
after we found that problem and like I

00:37:57,170 --> 00:38:00,740
maybe could have detected it if we had

00:37:59,270 --> 00:38:03,500
known that we will one out of five

00:38:00,740 --> 00:38:05,660
descriptors IV implemented the process

00:38:03,500 --> 00:38:08,600
collector you might know from client go

00:38:05,660 --> 00:38:10,850
and client server which naw always like

00:38:08,600 --> 00:38:13,700
exports process opam fds and process max

00:38:10,850 --> 00:38:16,910
ft so you can like v8 and alert / like

00:38:13,700 --> 00:38:18,140
all your jobs and like yeah you I mean

00:38:16,910 --> 00:38:19,490
from my experience should do that I mean

00:38:18,140 --> 00:38:22,970
since then we have like these alerts and

00:38:19,490 --> 00:38:24,830
that thing won't happen again we also

00:38:22,970 --> 00:38:26,630
had another problem of like the person

00:38:24,830 --> 00:38:28,130
who was on call just act see page

00:38:26,630 --> 00:38:29,780
because it was very similar to all the

00:38:28,130 --> 00:38:32,630
other pages which came like in the weeks

00:38:29,780 --> 00:38:34,850
before and it was actually one day after

00:38:32,630 --> 00:38:36,680
our summer parties or everyone was a bit

00:38:34,850 --> 00:38:38,090
hungover and it was 7am the mornings it

00:38:36,680 --> 00:38:41,360
was like yeah whatever I will fix that

00:38:38,090 --> 00:38:43,910
in an hour previa you really need to

00:38:41,360 --> 00:38:45,440
prevent alerting fatigue for that who

00:38:43,910 --> 00:38:46,970
misses had like the allotment endeavors

00:38:45,440 --> 00:38:50,300
have like lots of features which like

00:38:46,970 --> 00:38:52,940
help in that space yeah you really want

00:38:50,300 --> 00:38:54,920
to make sure your developers down I can

00:38:52,940 --> 00:38:59,390
page because it looks so similar to the

00:38:54,920 --> 00:39:01,970
other noise I really need to speed up so

00:38:59,390 --> 00:39:03,590
it's on cloud at the end of 2014 we wear

00:39:01,970 --> 00:39:06,440
like an oven full transition to a micro

00:39:03,590 --> 00:39:07,880
service architecture um because of that

00:39:06,440 --> 00:39:10,340
unfortunately we had like lots of

00:39:07,880 --> 00:39:11,840
instabilities and we understood more and

00:39:10,340 --> 00:39:15,110
more that we really need like a lot of

00:39:11,840 --> 00:39:16,160
metrics all new services were kind of

00:39:15,110 --> 00:39:17,630
acquired to have to miss his

00:39:16,160 --> 00:39:19,310
instrumentation so it was not possible

00:39:17,630 --> 00:39:22,370
anymore to put like a new servers out

00:39:19,310 --> 00:39:25,430
which out instrumentation and on the

00:39:22,370 --> 00:39:27,050
community site we implemented a new text

00:39:25,430 --> 00:39:29,630
exposition format and the Jason was

00:39:27,050 --> 00:39:31,490
deprecated and was like 10 you can't

00:39:29,630 --> 00:39:35,360
also use it anymore i think until then

00:39:31,490 --> 00:39:37,520
we carried it over I buren and Julia

00:39:35,360 --> 00:39:38,840
started like a huge storage revived you

00:39:37,520 --> 00:39:41,120
don't talked about that later so like

00:39:38,840 --> 00:39:44,270
foam leather db2 the new chunk file

00:39:41,120 --> 00:39:46,010
system based they were like the first

00:39:44,270 --> 00:39:49,510
commits in the exploration of long-term

00:39:46,010 --> 00:39:51,210
storage was open to us DB and lots of

00:39:49,510 --> 00:39:53,369
performance improvements

00:39:51,210 --> 00:39:55,859
like everyone who'd started using for me

00:39:53,369 --> 00:39:58,950
she's like after the public release or

00:39:55,859 --> 00:40:00,660
only in 2016 you're lucky I was kind of

00:39:58,950 --> 00:40:02,670
like an operation sky of like keeping

00:40:00,660 --> 00:40:04,710
our promises server I mean helping

00:40:02,670 --> 00:40:07,170
everyone and like I was be on call for

00:40:04,710 --> 00:40:09,000
prometheus servers it was not always fun

00:40:07,170 --> 00:40:11,390
to say it like that I mean it was like

00:40:09,000 --> 00:40:14,099
still early in the development and a

00:40:11,390 --> 00:40:16,589
restart could easily take an hour so I

00:40:14,099 --> 00:40:17,910
remember more than one night where was

00:40:16,589 --> 00:40:20,040
waiting to the computer server to come

00:40:17,910 --> 00:40:22,740
up again it's like day and night

00:40:20,040 --> 00:40:24,720
compared to what like the new storage

00:40:22,740 --> 00:40:26,310
can do and like all the performance

00:40:24,720 --> 00:40:29,609
improvements which have come and gone

00:40:26,310 --> 00:40:31,109
into premises and then yeah and we

00:40:29,609 --> 00:40:34,260
started with the first point releases or

00:40:31,109 --> 00:40:40,099
in 2014 we released the euro top 10

00:40:34,260 --> 00:40:44,430
until 0 8 2015 4 meters grows really big

00:40:40,099 --> 00:40:48,900
so yes only many of you now in January

00:40:44,430 --> 00:40:50,910
26 we publicly announced premises as I

00:40:48,900 --> 00:40:53,280
said earlier we had already likes the

00:40:50,910 --> 00:40:54,810
first external users but yeah no one it

00:40:53,280 --> 00:40:56,099
was always open source app was always on

00:40:54,810 --> 00:40:58,349
Kitab everyone could have found it but

00:40:56,099 --> 00:41:01,170
we never really talked about it and then

00:40:58,349 --> 00:41:04,560
end of December and beginning of January

00:41:01,170 --> 00:41:06,869
Julius and Buren and vine we're like

00:41:04,560 --> 00:41:08,190
working lots and lots on the parameters

00:41:06,869 --> 00:41:10,020
I out page and like writing

00:41:08,190 --> 00:41:11,940
documentation because before they devote

00:41:10,020 --> 00:41:13,410
all to no documentation so they accept

00:41:11,940 --> 00:41:15,540
why no one could really understand how

00:41:13,410 --> 00:41:16,980
that worked I mean why needed like 45

00:41:15,540 --> 00:41:18,869
minutes and then what clear what was

00:41:16,980 --> 00:41:20,910
going on but for everyone else it was

00:41:18,869 --> 00:41:27,599
like oh there's a lot of cocotte some

00:41:20,910 --> 00:41:28,950
project whatever yeah and at that point

00:41:27,599 --> 00:41:31,650
I think we also made it really clear

00:41:28,950 --> 00:41:35,550
premisses standalone project and not

00:41:31,650 --> 00:41:37,500
part of any company so it was actually

00:41:35,550 --> 00:41:39,839
not started at SoundCloud and SoundCloud

00:41:37,500 --> 00:41:42,030
was also just like I guess a picha

00:41:39,839 --> 00:41:45,089
sponsor of development time and one of

00:41:42,030 --> 00:41:50,520
the eager users but we had just like one

00:41:45,089 --> 00:41:54,030
of many summer highlights in 2015 so the

00:41:50,520 --> 00:41:56,310
sound apart fabian joint actually I

00:41:54,030 --> 00:41:59,130
think Matt Julius and Buren exactly in

00:41:56,310 --> 00:42:01,349
this room on the beginning of 2015 was

00:41:59,130 --> 00:42:03,000
completely hooked had like some bad

00:42:01,349 --> 00:42:04,109
experience that the companies before and

00:42:03,000 --> 00:42:04,710
thought like hey that looks like a cool

00:42:04,109 --> 00:42:08,099
project

00:42:04,710 --> 00:42:09,660
and yeah I I mean as i said like i was

00:42:08,099 --> 00:42:11,720
like height of these i followed the

00:42:09,660 --> 00:42:14,940
development always of whom easiest and

00:42:11,720 --> 00:42:16,530
shortly after Julius told me about like

00:42:14,940 --> 00:42:18,089
hey we met this guy and far beyond

00:42:16,530 --> 00:42:21,060
turned up in the IRC channel they were

00:42:18,089 --> 00:42:24,690
like huge public VES of like yeah it's

00:42:21,060 --> 00:42:26,790
Francis target or Lexus discovery part I

00:42:24,690 --> 00:42:29,099
will just completely rewrite it um so

00:42:26,790 --> 00:42:32,310
yeah it was like lots of traction thanks

00:42:29,099 --> 00:42:33,690
to far beyond joining the team all our

00:42:32,310 --> 00:42:36,589
servers pretty much had like promises

00:42:33,690 --> 00:42:38,430
instrumentation and alerts at that point

00:42:36,589 --> 00:42:40,109
Prometheus force became like really

00:42:38,430 --> 00:42:41,730
really indispensable for like our

00:42:40,109 --> 00:42:43,260
operations because we still had

00:42:41,730 --> 00:42:45,180
unfortunately lots of problems with our

00:42:43,260 --> 00:42:47,400
micro servers architecture they've like

00:42:45,180 --> 00:42:49,200
one services at an like an outage like

00:42:47,400 --> 00:42:51,720
every it was like like at this map thing

00:42:49,200 --> 00:42:54,210
and like you ditched like one part like

00:42:51,720 --> 00:42:56,910
everything wobbled and without super

00:42:54,210 --> 00:42:58,290
mrs. metrics we would have we didn't

00:42:56,910 --> 00:43:01,200
have like any chance to like understand

00:42:58,290 --> 00:43:03,690
what's going on and on the Fermi to side

00:43:01,200 --> 00:43:05,400
yeah we had like I guess all of us did

00:43:03,690 --> 00:43:07,650
not really expect that kind of growth

00:43:05,400 --> 00:43:10,650
and that kind of reduction and the users

00:43:07,650 --> 00:43:12,750
we started or we added histograms

00:43:10,650 --> 00:43:16,160
actually fun fact we did have histograms

00:43:12,750 --> 00:43:18,720
in the beginning so the first three

00:43:16,160 --> 00:43:20,460
metrics where counters gauges and

00:43:18,720 --> 00:43:22,680
histograms but histograms had like fixed

00:43:20,460 --> 00:43:25,200
buckets and they did not work at all so

00:43:22,680 --> 00:43:26,580
he threw them away um Matt actually did

00:43:25,200 --> 00:43:28,740
that still those were like one of the

00:43:26,580 --> 00:43:30,660
large parts method implemented summaries

00:43:28,740 --> 00:43:32,310
which we are like nice and shiny because

00:43:30,660 --> 00:43:34,109
like everything is done on the client

00:43:32,310 --> 00:43:35,910
until we found out okay that's actually

00:43:34,109 --> 00:43:38,280
pretty expensive and you can't aggregate

00:43:35,910 --> 00:43:39,599
them so we had to introduce histograms

00:43:38,280 --> 00:43:41,310
back if you want to learn more about

00:43:39,599 --> 00:43:43,619
that they're like kind of a few blog

00:43:41,310 --> 00:43:48,210
posts boson wines and on the premises

00:43:43,619 --> 00:43:49,770
page about that topic lots and lots of

00:43:48,210 --> 00:43:51,300
new services covered to edit I was

00:43:49,770 --> 00:43:55,050
really rare but for it's a public

00:43:51,300 --> 00:43:56,490
release we only had like dns and static

00:43:55,050 --> 00:43:58,859
targets and you're in your file there

00:43:56,490 --> 00:44:00,210
was nothing else so lost ya all Sontag

00:43:58,859 --> 00:44:02,730
needed pretty much was only in the

00:44:00,210 --> 00:44:04,170
server and at the end of 2015 we

00:44:02,730 --> 00:44:07,560
happened already eight different

00:44:04,170 --> 00:44:09,270
services covery implementations yea

00:44:07,560 --> 00:44:12,839
enable pretty much by the V work from

00:44:09,270 --> 00:44:15,900
Fabian double Delta encoding horse born

00:44:12,839 --> 00:44:17,070
in 2015 and we have to serve releases

00:44:15,900 --> 00:44:20,490
nine point even

00:44:17,070 --> 00:44:22,800
until 961 we did not follow them were at

00:44:20,490 --> 00:44:24,090
all they were like the 916 believers

00:44:22,800 --> 00:44:27,090
were kind of funny they were like huge

00:44:24,090 --> 00:44:29,490
916 to it has like I think the longest

00:44:27,090 --> 00:44:35,100
list of features and changes of very

00:44:29,490 --> 00:44:38,460
much all our releases but yeah 2016

00:44:35,100 --> 00:44:41,310
we're coming close so the latest

00:44:38,460 --> 00:44:44,580
development at soundcloud we migrated to

00:44:41,310 --> 00:44:46,260
graph honor and dashboard templating

00:44:44,580 --> 00:44:48,570
which we did not really haven't prom

00:44:46,260 --> 00:44:51,060
dash and labeled together I like a dream

00:44:48,570 --> 00:44:53,400
team as you probably all know and see

00:44:51,060 --> 00:44:56,370
the possibilities that open up for us to

00:44:53,400 --> 00:44:59,160
like generalize our metrics and like

00:44:56,370 --> 00:45:00,600
have one team building a dashboard and

00:44:59,160 --> 00:45:03,360
it works just out of the box for

00:45:00,600 --> 00:45:07,050
everyone I have like it mentally helped

00:45:03,360 --> 00:45:08,520
us um we kind of have like now if you

00:45:07,050 --> 00:45:09,990
create a new servers it's kind of like

00:45:08,520 --> 00:45:11,490
monitoring batteries included you don't

00:45:09,990 --> 00:45:13,560
need to do anything anymore you just

00:45:11,490 --> 00:45:15,690
like if you use our so we have like a

00:45:13,560 --> 00:45:17,670
library which has evolved our JVM

00:45:15,690 --> 00:45:19,200
applications and if you create a new

00:45:17,670 --> 00:45:20,610
application you immediately have like a

00:45:19,200 --> 00:45:22,380
dashboard where you can go to and see

00:45:20,610 --> 00:45:24,990
the most important metrics and you have

00:45:22,380 --> 00:45:27,210
like alerts for that so compared to like

00:45:24,990 --> 00:45:29,520
four years ago I'd like 2012 you didn't

00:45:27,210 --> 00:45:32,190
have like any monitoring it's it's

00:45:29,520 --> 00:45:34,140
impressive to see like where we ended up

00:45:32,190 --> 00:45:36,060
yeah we have pretty much noise free

00:45:34,140 --> 00:45:37,920
editing Mouse thanks to a lot manager

00:45:36,060 --> 00:45:40,440
actually we changed we are unchanged

00:45:37,920 --> 00:45:43,020
last week our select format and always

00:45:40,440 --> 00:45:45,030
waiting fully two days until I could see

00:45:43,020 --> 00:45:49,140
this new format in my slack line because

00:45:45,030 --> 00:45:51,630
we just didn't have any warnings sound

00:45:49,140 --> 00:45:54,180
lot is very very stable now and I

00:45:51,630 --> 00:45:55,530
attributed hugely two parameters and the

00:45:54,180 --> 00:45:57,480
ability to have like metrics for

00:45:55,530 --> 00:46:01,500
everything so actually this year we

00:45:57,480 --> 00:46:04,710
reached so our goal is like 99.9 and we

00:46:01,500 --> 00:46:07,980
reach that yeah every month which is the

00:46:04,710 --> 00:46:12,030
first so like last year in 2014 little

00:46:07,980 --> 00:46:15,030
talk about effort on the comedy side the

00:46:12,030 --> 00:46:17,820
biggest highlights barbat as parent or

00:46:15,030 --> 00:46:23,520
yesterday about it if we joined the cnc

00:46:17,820 --> 00:46:25,410
f we reached 10 and closing the circle

00:46:23,520 --> 00:46:29,790
we came together for the first for mrs.

00:46:25,410 --> 00:46:30,990
conference yeah that's what I wanted to

00:46:29,790 --> 00:46:32,670
shout like as an example

00:46:30,990 --> 00:46:34,890
that's where we are no verse on cloud so

00:46:32,670 --> 00:46:39,090
you see they you select your primito

00:46:34,890 --> 00:46:42,450
server we have like I don't know 10 20

00:46:39,090 --> 00:46:44,640
teams all building applications on JVM

00:46:42,450 --> 00:46:46,410
they all have like a cow in the same

00:46:44,640 --> 00:46:48,210
client library and say you have like

00:46:46,410 --> 00:46:50,070
some standard set of metrics which get

00:46:48,210 --> 00:46:52,280
exported so they just selected their

00:46:50,070 --> 00:46:54,360
servers i select their system

00:46:52,280 --> 00:46:56,160
fortunately none no one of you will know

00:46:54,360 --> 00:46:57,810
what okie dokie is so i just put up

00:46:56,160 --> 00:47:00,210
these are like our metrics from this

00:46:57,810 --> 00:47:02,520
morning as you see we have like it's

00:47:00,210 --> 00:47:04,700
stable and we have like weight matrix

00:47:02,520 --> 00:47:07,560
for that so like compared to like 2012

00:47:04,700 --> 00:47:10,320
I'm really really pleased where we came

00:47:07,560 --> 00:47:13,710
out this some things we have learned on

00:47:10,320 --> 00:47:18,119
the way is the second to last slide as

00:47:13,710 --> 00:47:19,680
Julia said hard work pays off so he I

00:47:18,119 --> 00:47:22,650
think he didn't really imagine that this

00:47:19,680 --> 00:47:25,080
would be possible and the end of 2012

00:47:22,650 --> 00:47:27,630
and met came up to the ideas it worked

00:47:25,080 --> 00:47:30,000
and yeah especially if you don't think

00:47:27,630 --> 00:47:31,760
you can make it I think it works yet

00:47:30,000 --> 00:47:34,520
like a really hard time and Matt left

00:47:31,760 --> 00:47:37,619
you can push yourself through um

00:47:34,520 --> 00:47:39,300
permeated like a great example that yeah

00:47:37,619 --> 00:47:42,030
even if something looks like way to bake

00:47:39,300 --> 00:47:44,580
you can do it go was actually perfect

00:47:42,030 --> 00:47:47,130
choice I believe there's a huge

00:47:44,580 --> 00:47:48,390
community it fits like natively bazooka

00:47:47,130 --> 00:47:49,859
was actually also written and go sort

00:47:48,390 --> 00:47:51,510
like fitna tively in there I mean that

00:47:49,859 --> 00:47:53,400
Matt was able like it the first months

00:47:51,510 --> 00:47:54,480
to like put instrumentation all it was

00:47:53,400 --> 00:47:56,220
just like because those are words of

00:47:54,480 --> 00:47:57,750
everything and go could an editor's go

00:47:56,220 --> 00:47:59,010
at tedious go come to let's go there's

00:47:57,750 --> 00:48:00,359
so many great services and

00:47:59,010 --> 00:48:01,650
infrastructure world which I can go

00:48:00,359 --> 00:48:04,080
either leaves a supposed to like

00:48:01,650 --> 00:48:08,400
definitely the right choice and yeah

00:48:04,080 --> 00:48:10,020
test great language features um don't

00:48:08,400 --> 00:48:11,280
deliver features as a compromise of your

00:48:10,020 --> 00:48:13,410
gold so I think point will really like

00:48:11,280 --> 00:48:16,470
that so that's like one part math

00:48:13,410 --> 00:48:17,850
actually told me as like one thing yet

00:48:16,470 --> 00:48:21,180
learned so he could also like a lot of

00:48:17,850 --> 00:48:23,040
pressure um I am personally to be honest

00:48:21,180 --> 00:48:24,780
more like on this practical side I'm a

00:48:23,040 --> 00:48:27,390
problem solver like I see someone as a

00:48:24,780 --> 00:48:30,030
problem and I've see a solution to that

00:48:27,390 --> 00:48:33,420
so like I cool let's do that it's not

00:48:30,030 --> 00:48:36,780
always a wide choice and yeah I actually

00:48:33,420 --> 00:48:38,940
I want to thank Brian for like keeping

00:48:36,780 --> 00:48:41,369
us on track today and saying like no

00:48:38,940 --> 00:48:42,869
even though I I mean more often also

00:48:41,369 --> 00:48:43,650
think like I hate why I even eat that

00:48:42,869 --> 00:48:45,270
and then

00:48:43,650 --> 00:48:47,480
I don't know a couple of months later

00:48:45,270 --> 00:48:50,520
like here actually it was probably good

00:48:47,480 --> 00:48:52,590
so um yeah that's definitely one thing I

00:48:50,520 --> 00:48:54,390
learned or like yeah others learned as

00:48:52,590 --> 00:48:55,740
well and yeah provide clear

00:48:54,390 --> 00:49:00,690
documentation about your vision because

00:48:55,740 --> 00:49:04,290
otherwise no one can follow it yet one

00:49:00,690 --> 00:49:06,660
thing he might have we could have been

00:49:04,290 --> 00:49:08,400
better I guess or like maybe was like

00:49:06,660 --> 00:49:11,010
coming up as a governance structure

00:49:08,400 --> 00:49:14,310
earlier um they were like some

00:49:11,010 --> 00:49:15,540
behind-the-scenes thing and I mean

00:49:14,310 --> 00:49:16,830
they're like lots of companies involved

00:49:15,540 --> 00:49:19,020
you always said like hey there's not a

00:49:16,830 --> 00:49:22,590
single one but you can't just say that

00:49:19,020 --> 00:49:25,140
and hope that it works but I guess so

00:49:22,590 --> 00:49:26,850
far we came like pretty far and like ya

00:49:25,140 --> 00:49:30,840
know with the cATF I guess that part is

00:49:26,850 --> 00:49:32,550
like autumn or less soft last slide some

00:49:30,840 --> 00:49:35,760
acknowledgement so unfortunately Matt

00:49:32,550 --> 00:49:38,940
couldn't make it but yeah as a father of

00:49:35,760 --> 00:49:41,460
committees yeah I'm one thing for before

00:49:38,940 --> 00:49:42,750
that his acknowledgement that you I only

00:49:41,460 --> 00:49:44,700
can do it wrong I mean there will always

00:49:42,750 --> 00:49:47,130
be someone who said like why am I not on

00:49:44,700 --> 00:49:48,780
that list I'm sorry in advance but yeah

00:49:47,130 --> 00:49:51,570
I picked someone in photo logical order

00:49:48,780 --> 00:49:54,210
so like mad unfortunately not here um I

00:49:51,570 --> 00:49:56,130
used to title like father of camisas

00:49:54,210 --> 00:50:04,320
because it came up with it I'm guest

00:49:56,130 --> 00:50:05,940
from Julia's won't like that but I if so

00:50:04,320 --> 00:50:09,330
yeah I would I mean they're like way too

00:50:05,940 --> 00:50:11,310
many things um I would need a check

00:50:09,330 --> 00:50:12,990
knowledge Julius for but like yeah one

00:50:11,310 --> 00:50:14,580
thing is actually for me that he liked

00:50:12,990 --> 00:50:17,340
capped likes this community together and

00:50:14,580 --> 00:50:19,890
like started to like organizes prom Kong

00:50:17,340 --> 00:50:21,660
and I don't want to have asked for like

00:50:19,890 --> 00:50:23,400
a flowers for like everyone but I think

00:50:21,660 --> 00:50:24,810
for like all this hard work Julius put

00:50:23,400 --> 00:50:26,430
on this project and like pushed it

00:50:24,810 --> 00:50:30,020
through I would ask her like a huge

00:50:26,430 --> 00:50:30,020
round of applause for Julia

00:50:31,820 --> 00:50:39,560
uh yeah Bernette Schafer you probably

00:50:37,790 --> 00:50:41,270
now don't know him you started he

00:50:39,560 --> 00:50:42,590
created to push gateway he did like a

00:50:41,270 --> 00:50:44,960
lot of work in the beginning of the

00:50:42,590 --> 00:50:48,620
server but yeah also definitely helpful

00:50:44,960 --> 00:50:50,930
and like necessary uh yeah for sure

00:50:48,620 --> 00:50:53,990
Johannes as I said working on services

00:50:50,930 --> 00:50:58,190
Covey and so operation I Stewart then

00:50:53,990 --> 00:50:59,870
helping out was from dish I buren I just

00:50:58,190 --> 00:51:01,070
I mean all of them have like contributed

00:50:59,870 --> 00:51:03,050
way more than these things these are

00:51:01,070 --> 00:51:04,730
just like the most notable ones the

00:51:03,050 --> 00:51:07,490
storage here you know you're on for as

00:51:04,730 --> 00:51:09,650
like kind of the father of the storage

00:51:07,490 --> 00:51:14,210
or like owner of the storage these days

00:51:09,650 --> 00:51:16,550
and the Golan library Bryan again blind

00:51:14,210 --> 00:51:19,940
us way too many thing to like put out

00:51:16,550 --> 00:51:21,380
any anything in particular I'm pretty

00:51:19,940 --> 00:51:23,240
sure yeah but I'll bind and Julius we

00:51:21,380 --> 00:51:26,690
would not be where we are and here for

00:51:23,240 --> 00:51:28,130
me actually personally I what stands out

00:51:26,690 --> 00:51:30,680
a little bit is like keeping us on track

00:51:28,130 --> 00:51:32,810
even if it's like painful at times of

00:51:30,680 --> 00:51:35,870
like hearing alike note we can't do that

00:51:32,810 --> 00:51:38,150
um but in the end I think it pays off

00:51:35,870 --> 00:51:42,260
like to keep on yeah keep on track for

00:51:38,150 --> 00:51:44,180
your vision yeah Fabian Fabian does also

00:51:42,260 --> 00:51:46,100
way too many things like to pull out one

00:51:44,180 --> 00:51:47,660
thing but what I find really impressive

00:51:46,100 --> 00:51:50,030
is like how much co-developed like

00:51:47,660 --> 00:51:53,480
especially in 2015 so like I hope you'll

00:51:50,030 --> 00:51:55,610
find would like that attribution yeah

00:51:53,480 --> 00:51:56,990
there are many many more I can't really

00:51:55,610 --> 00:51:59,660
list here and we have like hundreds of

00:51:56,990 --> 00:52:01,520
contributors um but yeah these were like

00:51:59,660 --> 00:52:02,960
the first ones and like ones also who

00:52:01,520 --> 00:52:05,150
worked at soundcloud i wanted to put out

00:52:02,960 --> 00:52:07,580
here I really apologize for like

00:52:05,150 --> 00:52:10,270
completely talking way too long but

00:52:07,580 --> 00:52:10,270
thank you

00:52:14,609 --> 00:52:16,670

YouTube URL: https://www.youtube.com/watch?v=cdKc8ePbj4A


