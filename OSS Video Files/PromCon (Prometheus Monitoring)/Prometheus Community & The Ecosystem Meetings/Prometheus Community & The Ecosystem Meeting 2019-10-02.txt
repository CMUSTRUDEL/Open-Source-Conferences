Title: Prometheus Community & The Ecosystem Meeting 2019-10-02
Publication date: 2019-10-04
Playlist: Prometheus Community & The Ecosystem Meetings
Description: 
	Meeting Information:  https://bit.ly/prom-community 
Agenda: http://bit.ly/prometheus-community-agenda
Captions: 
	00:00:00,030 --> 00:00:05,940
all right everybody welcome to this

00:00:03,290 --> 00:00:11,190
month's edition of the Prometheus

00:00:05,940 --> 00:00:14,730
community and ecosystem eating so yeah

00:00:11,190 --> 00:00:17,910
first up prompt I'm expecting anyone

00:00:14,730 --> 00:00:19,590
so that's pretty exciting but give to

00:00:17,910 --> 00:00:22,650
them just right away I want to announce

00:00:19,590 --> 00:00:26,099
that we won't have this meeting in

00:00:22,650 --> 00:00:28,949
November because it's right the same

00:00:26,099 --> 00:00:36,020
time when we when we have prompt on so I

00:00:28,949 --> 00:00:40,140
don't think anyone from us and

00:00:36,020 --> 00:00:42,300
Prometheus 2.13 was released as a

00:00:40,140 --> 00:00:44,760
release candidate and as out for testing

00:00:42,300 --> 00:00:47,670
so please go ahead and update all your

00:00:44,760 --> 00:00:50,879
staging testers together some some data

00:00:47,670 --> 00:00:54,329
around that and any issues that you

00:00:50,879 --> 00:00:56,399
encounter and the biggest most

00:00:54,329 --> 00:00:58,800
remarkable feature that I just quickly

00:00:56,399 --> 00:01:01,789
want to point out this added support for

00:00:58,800 --> 00:01:07,049
remote read streaming which is going to

00:01:01,789 --> 00:01:11,130
be shipped in 2.30 so yeah be on the

00:01:07,049 --> 00:01:12,930
lookout for a blog post by Bartek he

00:01:11,130 --> 00:01:14,939
apparently is already writing one he

00:01:12,930 --> 00:01:17,850
couldn't attend so he won't be able to

00:01:14,939 --> 00:01:19,950
talk about this right now but there

00:01:17,850 --> 00:01:24,390
should be a blog post about the syndrome

00:01:19,950 --> 00:01:27,540
from them is there anything that we need

00:01:24,390 --> 00:01:31,890
to announce regarding prompt on in a

00:01:27,540 --> 00:01:34,799
month maybe Brian yeah yeah one like the

00:01:31,890 --> 00:01:37,229
schedule was up as it was last month the

00:01:34,799 --> 00:01:39,060
likely talk speakers are about there are

00:01:37,229 --> 00:01:41,460
the ones have been pre accepted but

00:01:39,060 --> 00:01:43,530
write them down before we get there you

00:01:41,460 --> 00:01:45,030
know who you are and of course Eve me on

00:01:43,530 --> 00:01:47,820
to sign up on the day for lighting folks

00:01:45,030 --> 00:01:51,840
as well the one thing to be aware of is

00:01:47,820 --> 00:01:54,689
that there are extremely few tickets if

00:01:51,840 --> 00:01:56,040
any left so if you don't have one you're

00:01:54,689 --> 00:01:59,119
probably not getting one I don't know

00:01:56,040 --> 00:02:02,850
the exact numbers but it's small like

00:01:59,119 --> 00:02:04,890
there might be one or two miserly and I

00:02:02,850 --> 00:02:06,719
think also sponsorships are open to the

00:02:04,890 --> 00:02:08,250
end of this week or something if you

00:02:06,719 --> 00:02:11,750
don't want to sponsor I believe there

00:02:08,250 --> 00:02:11,750
are so some tickets set aside for that

00:02:14,629 --> 00:02:20,720
awesome any questions from from people

00:02:22,250 --> 00:02:28,709
cool I think we can one yeah so David

00:02:26,730 --> 00:02:40,849
you wanted to talk about what's new your

00:02:28,709 --> 00:02:40,849
final 6.4 sure let's do share my screen

00:02:48,210 --> 00:02:51,419
[Music]

00:02:54,530 --> 00:03:01,519
all right can everyone see my browser

00:02:57,239 --> 00:03:05,609
yes excellent so obviously we published

00:03:01,519 --> 00:03:08,370
also a little bit new article on just

00:03:05,609 --> 00:03:10,230
the general Docs and so just a quick

00:03:08,370 --> 00:03:14,280
overview here we have some view things

00:03:10,230 --> 00:03:15,989
and explore where you can go back to to

00:03:14,280 --> 00:03:18,209
the original dashboard if you came from

00:03:15,989 --> 00:03:22,769
that one and then a couple of local

00:03:18,209 --> 00:03:24,930
related things and then quite exciting

00:03:22,769 --> 00:03:31,109
serious overrides to turn a constant

00:03:24,930 --> 00:03:33,449
into a point now to turn a point into a

00:03:31,109 --> 00:03:35,430
constant line okay let me just demo with

00:03:33,449 --> 00:03:39,510
these things really quickly so I created

00:03:35,430 --> 00:03:42,780
a couple of dashboards to do this so the

00:03:39,510 --> 00:03:44,040
first one is the back to dashboard story

00:03:42,780 --> 00:03:49,199
which is basically you have your

00:03:44,040 --> 00:03:52,230
dashboard with your panel and you want

00:03:49,199 --> 00:03:55,109
to do some deep dive and you jump to

00:03:52,230 --> 00:03:58,319
explore which is this thing here which

00:03:55,109 --> 00:04:02,250
brings you to this other area where you

00:03:58,319 --> 00:04:04,970
have a bit more more of a graph and a

00:04:02,250 --> 00:04:08,010
table to correct kind of like quickly

00:04:04,970 --> 00:04:09,599
dive into the queries here and let's say

00:04:08,010 --> 00:04:11,879
you figured out okay well this query

00:04:09,599 --> 00:04:12,419
wasn't optimal I need some something

00:04:11,879 --> 00:04:15,930
else here

00:04:12,419 --> 00:04:18,389
maybe the handler for example and then

00:04:15,930 --> 00:04:23,430
let's just issue this all right so now

00:04:18,389 --> 00:04:25,260
obviously change the query and now I can

00:04:23,430 --> 00:04:26,840
either just go back to the original

00:04:25,260 --> 00:04:29,300
panel or I can also

00:04:26,840 --> 00:04:31,520
I really like to change that I've done

00:04:29,300 --> 00:04:33,080
maybe I want to keep this also in the

00:04:31,520 --> 00:04:35,540
panel because I figured out that this

00:04:33,080 --> 00:04:40,419
this changed query now represents better

00:04:35,540 --> 00:04:43,100
what I wanted to represent in the in the

00:04:40,419 --> 00:04:45,440
panel so and I can just click this and

00:04:43,100 --> 00:04:48,320
now I'm back here and it maintained my

00:04:45,440 --> 00:04:51,350
edit so that's kind of cool and here now

00:04:48,320 --> 00:04:54,169
I can just save it and then you can you

00:04:51,350 --> 00:04:56,120
query is back here so and then I guess I

00:04:54,169 --> 00:05:01,430
can also just do this thing here real

00:04:56,120 --> 00:05:03,290
quick to make this a tiny bit neater so

00:05:01,430 --> 00:05:05,060
now I really only have to hand the name

00:05:03,290 --> 00:05:09,620
of names dear house so I save this as

00:05:05,060 --> 00:05:14,680
well so that was one thing then what

00:05:09,620 --> 00:05:20,180
else is new we have the constant series

00:05:14,680 --> 00:05:23,990
which is something that been talked me

00:05:20,180 --> 00:05:26,750
through that seems really exciting where

00:05:23,990 --> 00:05:29,150
you basically have a normal query here

00:05:26,750 --> 00:05:33,470
let me just say this one for a second

00:05:29,150 --> 00:05:37,039
you have a normal career over time about

00:05:33,470 --> 00:05:40,160
that just gives you the rate of the

00:05:37,039 --> 00:05:43,880
requests and then at some point you want

00:05:40,160 --> 00:05:48,590
to you want to compare this to let's say

00:05:43,880 --> 00:05:50,780
the 95th percentile over not just a

00:05:48,590 --> 00:05:52,490
small interval but the whole range that

00:05:50,780 --> 00:05:56,300
is being displayed and you can do this

00:05:52,490 --> 00:05:58,010
now with this kind of fairy here that is

00:05:56,300 --> 00:05:59,990
an instant query as you can see that

00:05:58,010 --> 00:06:03,050
this thing you selected so and if I

00:05:59,990 --> 00:06:05,419
don't have the overrides it just renders

00:06:03,050 --> 00:06:06,979
one small little point here in the

00:06:05,419 --> 00:06:08,960
beginning and you can sort of see okay

00:06:06,979 --> 00:06:13,220
well this was the 95th percentile or

00:06:08,960 --> 00:06:16,430
with this whole range but now with the

00:06:13,220 --> 00:06:18,139
series overrides we can actually draw

00:06:16,430 --> 00:06:21,169
just like a complete line there and the

00:06:18,139 --> 00:06:24,200
way that is done is in the visualization

00:06:21,169 --> 00:06:28,880
options we have this serious override

00:06:24,200 --> 00:06:31,729
here saying transform content so if I

00:06:28,880 --> 00:06:34,310
remove this you won't even really see

00:06:31,729 --> 00:06:37,150
the point where just bit sad and so you

00:06:34,310 --> 00:06:40,460
can do this and able it again transform

00:06:37,150 --> 00:06:43,700
constant and it's there

00:06:40,460 --> 00:06:51,020
so this is a way to turn in stickers

00:06:43,700 --> 00:06:58,370
into a line so let's continue what else

00:06:51,020 --> 00:07:00,230
is new we have shared query results so

00:06:58,370 --> 00:07:02,870
this is kind of cool

00:07:00,230 --> 00:07:05,600
we've changed a lot of plumbing in how

00:07:02,870 --> 00:07:08,090
the panel like the panel data handling

00:07:05,600 --> 00:07:10,700
is being done and now penalty can

00:07:08,090 --> 00:07:14,000
reference each other's data so I can now

00:07:10,700 --> 00:07:16,130
just create a second panel saying you

00:07:14,000 --> 00:07:16,700
know I also want a nice graph that's

00:07:16,130 --> 00:07:23,630
cool

00:07:16,700 --> 00:07:25,100
and I want I want to choose from I'm not

00:07:23,630 --> 00:07:26,960
a query but I want a different

00:07:25,100 --> 00:07:28,460
dashboards I want to import the data

00:07:26,960 --> 00:07:30,260
from a different dashboard so I can do

00:07:28,460 --> 00:07:32,320
this one here I've named this panel

00:07:30,260 --> 00:07:34,850
source panel and so if I had more panels

00:07:32,320 --> 00:07:36,410
in this dashboard they would appear you

00:07:34,850 --> 00:07:38,240
too and I just click this one and then

00:07:36,410 --> 00:07:40,520
the same query appears and here's a

00:07:38,240 --> 00:07:44,360
summary of what's happening in that

00:07:40,520 --> 00:07:48,050
dashboard and then I go back and boom I

00:07:44,360 --> 00:07:52,760
have sort of a target panel and a source

00:07:48,050 --> 00:07:54,050
panel and so the the the intended

00:07:52,760 --> 00:07:56,240
purpose for this is that some of the

00:07:54,050 --> 00:07:57,560
queries might be really expensive and so

00:07:56,240 --> 00:08:00,700
you don't need to run them once

00:07:57,560 --> 00:08:04,670
basically and the data is being shared

00:08:00,700 --> 00:08:07,700
so that was one thing then let's see

00:08:04,670 --> 00:08:10,160
what else we got now we're sort of

00:08:07,700 --> 00:08:12,320
crossing a bit into low key space

00:08:10,160 --> 00:08:15,830
because a lot of things are the new

00:08:12,320 --> 00:08:19,220
there as well and I just quickly go

00:08:15,830 --> 00:08:23,750
through this so I have let's say I have

00:08:19,220 --> 00:08:27,200
a dashboard that shows me something for

00:08:23,750 --> 00:08:29,450
a like a particular job on particular

00:08:27,200 --> 00:08:32,600
cluster so metrics but now I also want

00:08:29,450 --> 00:08:35,630
to see logs and this is possible now so

00:08:32,600 --> 00:08:39,170
we just I just need to remember this

00:08:35,630 --> 00:08:43,730
thing here Slavin selector so now I can

00:08:39,170 --> 00:08:48,350
go and add a logs panel so I do this

00:08:43,730 --> 00:08:53,329
logs this is new and then I as a query

00:08:48,350 --> 00:08:58,309
I want no key data source and

00:08:53,329 --> 00:09:01,549
then I can just put in my label set set

00:08:58,309 --> 00:09:04,100
here because since we have this all sort

00:09:01,549 --> 00:09:06,470
of zoomed up with the label rules

00:09:04,100 --> 00:09:08,720
between Prometheus and Loki we really

00:09:06,470 --> 00:09:12,230
get this tight integration between

00:09:08,720 --> 00:09:14,509
getting the locks for the metrics so now

00:09:12,230 --> 00:09:17,629
I can go back and so now I've created a

00:09:14,509 --> 00:09:20,269
dashboard where I see logs there is

00:09:17,629 --> 00:09:23,389
somehow related to this Prometheus

00:09:20,269 --> 00:09:28,279
process in this cluster so that's cool

00:09:23,389 --> 00:09:30,739
and if that's not enough I can also I

00:09:28,279 --> 00:09:38,170
can also have now annotations based on

00:09:30,739 --> 00:09:40,999
Loki as well so I've created a an errors

00:09:38,170 --> 00:09:44,839
annotation based on the Loki data source

00:09:40,999 --> 00:09:51,230
and I've given it again the default

00:09:44,839 --> 00:09:53,989
Prometheus job and I'm sorting here or

00:09:51,230 --> 00:09:56,540
i'm also filtering for arrow streams and

00:09:53,989 --> 00:09:57,980
I don't want 400 bad request cuz they

00:09:56,540 --> 00:10:01,160
seem to be littered all over this place

00:09:57,980 --> 00:10:04,220
I've filtered that out as well and then

00:10:01,160 --> 00:10:09,850
if I go back to this dashboard and I

00:10:04,220 --> 00:10:12,649
enable the annotation I should be seeing

00:10:09,850 --> 00:10:14,689
the results here so and then as the

00:10:12,649 --> 00:10:20,299
annotation text you will see the the

00:10:14,689 --> 00:10:27,860
actual message so and the last thing I

00:10:20,299 --> 00:10:30,350
want to show is remove this here now I'm

00:10:27,860 --> 00:10:32,329
back and explore we did some

00:10:30,350 --> 00:10:35,899
improvements on life tailing so I can I

00:10:32,329 --> 00:10:39,319
go to the Prometheus logs for example

00:10:35,899 --> 00:10:42,470
and let's see there's a new button here

00:10:39,319 --> 00:10:46,459
this used to be in 603 it's used to be

00:10:42,470 --> 00:10:47,779
part of the time refresher not a

00:10:46,459 --> 00:10:52,189
separate button here so I can switch

00:10:47,779 --> 00:10:55,269
into a live mode and then I get sort of

00:10:52,189 --> 00:11:00,470
life tailing to whatever came through

00:10:55,269 --> 00:11:03,259
the locks from the default Prometheus

00:11:00,470 --> 00:11:07,299
process I can also pause this and resume

00:11:03,259 --> 00:11:13,490
and leave this again

00:11:07,299 --> 00:11:15,230
and that is the end of 6.4 let me just

00:11:13,490 --> 00:11:18,100
leave this slide on here for a bit

00:11:15,230 --> 00:11:20,509
longer so in case anyone wants to know

00:11:18,100 --> 00:11:23,059
in case anyone had some questions about

00:11:20,509 --> 00:11:32,809
the other features as well but that's

00:11:23,059 --> 00:11:37,819
all I wanted to show thank you if you

00:11:32,809 --> 00:11:39,769
change the shirt the shirt dashboard

00:11:37,819 --> 00:11:47,600
thing if you change the first graph will

00:11:39,769 --> 00:11:49,249
it be reflected in the comment yeah so

00:11:47,600 --> 00:11:53,569
if you change if I change the query in

00:11:49,249 --> 00:11:55,489
this sauce graph so this is the shared

00:11:53,569 --> 00:11:56,149
career results feature right are you

00:11:55,489 --> 00:11:59,480
talking about

00:11:56,149 --> 00:12:02,209
yep correct yeah so I have to go to the

00:11:59,480 --> 00:12:05,869
I have to go to the source graph at the

00:12:02,209 --> 00:12:09,949
source graph to have the editor and if I

00:12:05,869 --> 00:12:12,429
change a query there then the targeted

00:12:09,949 --> 00:12:18,139
panels will also be updated correctly

00:12:12,429 --> 00:12:22,399
awesome thank you the panel that you

00:12:18,139 --> 00:12:25,429
showed that where you could have a lock

00:12:22,399 --> 00:12:28,489
panel and metrics panel if you had

00:12:25,429 --> 00:12:30,230
zoomed in the metrics panel would that

00:12:28,489 --> 00:12:32,779
have also reduced the logs that you

00:12:30,230 --> 00:12:34,610
would have seen yes

00:12:32,779 --> 00:12:37,299
because they are yeah because they're

00:12:34,610 --> 00:12:41,059
assumed the queries are based on the

00:12:37,299 --> 00:12:46,579
data source know that the dashboards

00:12:41,059 --> 00:12:49,789
time here time range neat Thanks cool oh

00:12:46,579 --> 00:12:52,059
one more thing I've forgotten for Thanos

00:12:49,789 --> 00:12:57,879
folks let me just do this real quick

00:12:52,059 --> 00:12:57,879
suppose the thing I added later which is

00:12:58,629 --> 00:13:05,809
here we have a new in the data source

00:13:01,759 --> 00:13:07,730
settings of any Prometheus data source

00:13:05,809 --> 00:13:09,980
we have a new field down here called

00:13:07,730 --> 00:13:13,220
miscellaneous and then custom query

00:13:09,980 --> 00:13:18,289
parameters and here you can enter any

00:13:13,220 --> 00:13:19,800
sort of like query parameter header that

00:13:18,289 --> 00:13:21,450
will no it's not

00:13:19,800 --> 00:13:23,430
it's a query parameter that will be

00:13:21,450 --> 00:13:25,649
attached to all the instant queries and

00:13:23,430 --> 00:13:31,010
the range queries so you can have

00:13:25,649 --> 00:13:33,720
something like the maximum the maximum

00:13:31,010 --> 00:13:36,540
source resolution or things like this or

00:13:33,720 --> 00:13:40,200
timeout or whatever fana supports and

00:13:36,540 --> 00:13:46,110
then you can basically have different

00:13:40,200 --> 00:13:48,959
kind of what's the word roll-up data

00:13:46,110 --> 00:13:53,550
sources and sort of separate your data

00:13:48,959 --> 00:13:55,829
as data via these data sources is that

00:13:53,550 --> 00:13:57,510
only for querying for your range or is

00:13:55,829 --> 00:13:59,399
it for the other end points too

00:13:57,510 --> 00:14:03,060
I'm taking some people might want to try

00:13:59,399 --> 00:14:06,779
to use this for authentication so this

00:14:03,060 --> 00:14:11,100
is only for queries so for query and

00:14:06,779 --> 00:14:14,880
query range yeah so for the

00:14:11,100 --> 00:14:19,050
authentication I think we want to we

00:14:14,880 --> 00:14:22,860
want to keep using the mechanisms that

00:14:19,050 --> 00:14:27,480
are above here but I I'm not really sure

00:14:22,860 --> 00:14:30,660
if we have any means there to add custom

00:14:27,480 --> 00:14:32,820
headers let's just like an imagine

00:14:30,660 --> 00:14:33,500
passing down like a 10 name or something

00:14:32,820 --> 00:14:42,930
there

00:14:33,500 --> 00:14:49,770
yeah yeah just at all okay cool let me

00:14:42,930 --> 00:14:51,800
stop sharing one all right over to you

00:14:49,770 --> 00:14:51,800
guys

00:14:52,190 --> 00:14:57,419
[Music]

00:15:02,870 --> 00:15:12,480
yeah yeah so hey guys fabulous I'm

00:15:07,470 --> 00:15:22,079
maintainer of panelist so yeah can you

00:15:12,480 --> 00:15:29,180
see my screen yeah somehow everything

00:15:22,079 --> 00:15:29,180
stopped working for me cool sorry guys

00:15:31,730 --> 00:15:37,140
try to figure it out if you want we can

00:15:34,530 --> 00:15:40,710
do some PMA if anyone has any questions

00:15:37,140 --> 00:15:44,790
about anything from meteors are related

00:15:40,710 --> 00:15:47,880
to the postern and go ahead sorry go

00:15:44,790 --> 00:16:02,160
ahead and stop asking can somebody will

00:15:47,880 --> 00:16:03,900
pick it up no questions

00:16:02,160 --> 00:16:26,430
everybody's got their muttering figured

00:16:03,900 --> 00:16:28,560
out that's very cool all right

00:16:26,430 --> 00:16:40,860
pop do you want to fix it or do you want

00:16:28,560 --> 00:16:42,980
to so feel free to hours then ask

00:16:40,860 --> 00:16:42,980
questions

00:17:51,430 --> 00:18:05,930
pop you want to give it another time my

00:18:03,920 --> 00:18:12,110
computer is still a bit low I think it

00:18:05,930 --> 00:18:14,600
should be be up in a second yeah okay I

00:18:12,110 --> 00:18:19,550
have my slides ready now let me try to

00:18:14,600 --> 00:18:26,300
share my screen again nope it goes black

00:18:19,550 --> 00:18:30,380
I guess okay you can also just walk us

00:18:26,300 --> 00:18:35,060
like present but you can also do it at

00:18:30,380 --> 00:18:36,740
the next time next time because yeah I

00:18:35,060 --> 00:18:44,240
have some like slides with images and

00:18:36,740 --> 00:18:46,010
things like that so yeah okay there's

00:18:44,240 --> 00:18:48,440
also lightning talks at rom-com which

00:18:46,010 --> 00:18:58,730
should be recorded considering the next

00:18:48,440 --> 00:19:06,410
meeting is two months away yeah cool

00:18:58,730 --> 00:19:11,680
cool yeah somehow okay yeah wait what

00:19:06,410 --> 00:19:15,440
happened oh I'm not sharing my screen

00:19:11,680 --> 00:19:20,120
like Ubuntu just does not leave me okay

00:19:15,440 --> 00:19:25,880
sorry yeah it's probably a Weiland thing

00:19:20,120 --> 00:19:28,960
or something maybe just all right then

00:19:25,880 --> 00:19:59,120
any other questions before we close

00:19:28,960 --> 00:20:02,009
today's meeting - okay thanks everyone

00:19:59,120 --> 00:20:09,629
for joining and

00:20:02,009 --> 00:20:09,629

YouTube URL: https://www.youtube.com/watch?v=HmLPZ9-heqU


