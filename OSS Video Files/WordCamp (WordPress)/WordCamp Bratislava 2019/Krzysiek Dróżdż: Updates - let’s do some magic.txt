Title: Krzysiek Dróżdż: Updates - let’s do some magic
Publication date: 2020-02-07
Playlist: WordCamp Bratislava 2019
Description: 
	Updates – we all know that they exists and how to do them. But do we know how they really work? Let’s check. And then… We’ll think how we can use this knowledge.

Presentation slides: http://wpmagus.pl/pliki/prezentacje/updates-let-s-do-some-magic/#/
WPTV link: https://wordpress.tv/2019/12/27/krzysiek-drozdz-updates-lets-do-some-magic/
Captions: 
	00:00:01,629 --> 00:00:09,710
okay my name is Krisha crushed and I

00:00:04,970 --> 00:00:13,519
will be speaking today about update it

00:00:09,710 --> 00:00:16,250
will be rather hard presentation with a

00:00:13,519 --> 00:00:18,470
lot of lot of technical stuff so don't

00:00:16,250 --> 00:00:21,859
worry you don't have to remember

00:00:18,470 --> 00:00:24,259
everything that you will see today the

00:00:21,859 --> 00:00:28,249
slides will be online so you can always

00:00:24,259 --> 00:00:32,360
go to go through them later on or You

00:00:28,249 --> 00:00:34,280
Know Who am I

00:00:32,360 --> 00:00:36,820
my name is critic Drew's not the

00:00:34,280 --> 00:00:36,820
animilitia

00:00:36,949 --> 00:00:43,760
I'm the owner of WP Magos it's a

00:00:40,640 --> 00:00:48,920
software house where I develop websites

00:00:43,760 --> 00:00:52,250
and so on I'm also working doing some

00:00:48,920 --> 00:00:56,390
stuff for work WordPress itself for

00:00:52,250 --> 00:00:59,989
example a core contributor I'm also a

00:00:56,390 --> 00:01:03,309
translation contributor I've organized

00:00:59,989 --> 00:01:06,830
to work camps in Poland

00:01:03,309 --> 00:01:09,080
I'm also speaker at work camps for

00:01:06,830 --> 00:01:11,440
example something like seven or eight

00:01:09,080 --> 00:01:14,810
for now

00:01:11,440 --> 00:01:19,370
I'm organizing were dubbed rows of it's

00:01:14,810 --> 00:01:23,630
a local event for local community of

00:01:19,370 --> 00:01:25,430
WordPress you may know me if you use

00:01:23,630 --> 00:01:28,880
WordPress Stack Exchange

00:01:25,430 --> 00:01:32,030
I'm a moderator in there and I've done

00:01:28,880 --> 00:01:38,120
some work for progeny Commodore Polish

00:01:32,030 --> 00:01:43,370
Ministry of Education so yeah update we

00:01:38,120 --> 00:01:46,280
all know this screen right you okay so

00:01:43,370 --> 00:01:49,160
one question for the for you are you

00:01:46,280 --> 00:01:49,690
developers bloggers how do you use

00:01:49,160 --> 00:01:55,100
WordPress

00:01:49,690 --> 00:01:58,880
do you use WordPress at all okay so

00:01:55,100 --> 00:02:03,730
maybe this way if you are a developer

00:01:58,880 --> 00:02:07,989
hand in the air yeah okay let's wake up

00:02:03,730 --> 00:02:12,560
great so we all know this screen but

00:02:07,989 --> 00:02:13,849
have you ever think about where does it

00:02:12,560 --> 00:02:19,370
come from

00:02:13,849 --> 00:02:24,889
I mean not the the screen but this part

00:02:19,370 --> 00:02:27,969
right this yellow part that says that

00:02:24,889 --> 00:02:34,189
there is a new version of of a plugin

00:02:27,969 --> 00:02:38,060
well from my experience not many people

00:02:34,189 --> 00:02:46,010
asked this question it just is that is

00:02:38,060 --> 00:02:50,629
it it is right so first thing WordPress

00:02:46,010 --> 00:02:54,579
sends a request to a server which server

00:02:50,629 --> 00:02:57,739
it is WordPress server which holds

00:02:54,579 --> 00:03:00,290
WordPress plug-in repository right this

00:02:57,739 --> 00:03:03,889
is the server that is storing the info

00:03:00,290 --> 00:03:08,409
able to update how does it how how does

00:03:03,889 --> 00:03:11,449
it send this request using krong krong

00:03:08,409 --> 00:03:13,730
when I'm when I'm saying cron I mean of

00:03:11,449 --> 00:03:20,090
course the WordPress called WordPress

00:03:13,730 --> 00:03:22,250
cron so WP scheduler right the same the

00:03:20,090 --> 00:03:28,750
same tool that is used for publishing

00:03:22,250 --> 00:03:35,000
future posts and so on and so on okay so

00:03:28,750 --> 00:03:37,579
how does it send it and how often so

00:03:35,000 --> 00:03:44,599
first of all what percent when I mean

00:03:37,579 --> 00:03:48,949
sense it it uses HTTP API right so WP

00:03:44,599 --> 00:03:53,599
remote post and so on and it it's sent

00:03:48,949 --> 00:03:56,659
every 12 hours so twice a day right so

00:03:53,599 --> 00:04:02,180
if there is a new update and you will

00:03:56,659 --> 00:04:08,139
know about it after 12 hours at the

00:04:02,180 --> 00:04:13,310
worst case right and these are the

00:04:08,139 --> 00:04:19,639
events event names that are used for a

00:04:13,310 --> 00:04:23,210
wordpress cron right so WP version check

00:04:19,639 --> 00:04:27,710
this is the event for checking the

00:04:23,210 --> 00:04:32,009
version of WordPress itself core version

00:04:27,710 --> 00:04:34,740
WP update plugins this is the event for

00:04:32,009 --> 00:04:38,749
checking if there are new versions for

00:04:34,740 --> 00:04:41,669
plugins and WP update teams this is the

00:04:38,749 --> 00:04:51,749
event for checking if there are new

00:04:41,669 --> 00:05:02,370
version of teams ok and how what next

00:04:51,749 --> 00:05:08,400
right so there are three functions in WP

00:05:02,370 --> 00:05:11,729
includes - update / update right the

00:05:08,400 --> 00:05:14,580
first the first function is WP version

00:05:11,729 --> 00:05:18,270
check the name is the same as the event

00:05:14,580 --> 00:05:22,589
right so it's easy to find WP update

00:05:18,270 --> 00:05:25,740
plugins and WP update teams these are

00:05:22,589 --> 00:05:29,749
the three functions that are used for

00:05:25,740 --> 00:05:32,750
checking the gain for about update write

00:05:29,749 --> 00:05:36,020
all of the all of these functions are

00:05:32,750 --> 00:05:39,599
documented so you can read more about

00:05:36,020 --> 00:05:47,639
more about those verse those functions

00:05:39,599 --> 00:05:50,699
and here are the URLs that are sent by

00:05:47,639 --> 00:05:55,860
those functions right so WP version

00:05:50,699 --> 00:06:00,029
check uses asks API WordPress org slash

00:05:55,860 --> 00:06:02,639
course large version check / 1.7 right

00:06:00,029 --> 00:06:05,490
so if you want to know the newest

00:06:02,639 --> 00:06:07,979
version of WordPress you can always go

00:06:05,490 --> 00:06:11,250
there and there's their information

00:06:07,979 --> 00:06:15,000
about the newest version if you want to

00:06:11,250 --> 00:06:18,089
know newest version for plugins you can

00:06:15,000 --> 00:06:23,689
ask this endpoint of course you have to

00:06:18,089 --> 00:06:27,449
send some data to DES to it right okay

00:06:23,689 --> 00:06:31,349
notice and it's important these

00:06:27,449 --> 00:06:33,949
functions have some plug have some hooks

00:06:31,349 --> 00:06:38,729
in there in their code right

00:06:33,949 --> 00:06:40,889
because mmm all of these requests are

00:06:38,729 --> 00:06:47,580
sent with HTTP

00:06:40,889 --> 00:06:52,800
happy it means that we can use this this

00:06:47,580 --> 00:06:56,250
and this filter right so HTTP request

00:06:52,800 --> 00:07:00,919
arcs this filter we can use to modify

00:06:56,250 --> 00:07:04,169
the arts that are sent to the server and

00:07:00,919 --> 00:07:07,620
HTTP response this is the filter that is

00:07:04,169 --> 00:07:13,229
run just before returning the response

00:07:07,620 --> 00:07:17,490
right so we get the response then fire

00:07:13,229 --> 00:07:19,939
this hook and then do something with the

00:07:17,490 --> 00:07:23,430
response right so for example we can

00:07:19,939 --> 00:07:26,759
delete all the response content right so

00:07:23,430 --> 00:07:32,490
no updates will be sent and of course

00:07:26,759 --> 00:07:39,240
there's an action HTTP API debug so we

00:07:32,490 --> 00:07:41,669
can dip back and lock and so on okay and

00:07:39,240 --> 00:07:45,150
then what we have the info about the

00:07:41,669 --> 00:07:47,909
newest version what then we have to

00:07:45,150 --> 00:07:52,440
display it in the in the dashboard right

00:07:47,909 --> 00:07:56,699
so the response is stored into as a

00:07:52,440 --> 00:07:57,150
transient do you know transient yeah of

00:07:56,699 --> 00:08:00,900
course

00:07:57,150 --> 00:08:04,379
great the transients are some options

00:08:00,900 --> 00:08:07,020
that are why it only for some time okay

00:08:04,379 --> 00:08:09,419
so for example we say that this option

00:08:07,020 --> 00:08:12,800
should be stored only for should be

00:08:09,419 --> 00:08:17,580
vitally for one day after that one day

00:08:12,800 --> 00:08:21,599
we won't get the value okay it's invalid

00:08:17,580 --> 00:08:24,599
so we have to get it one more time okay

00:08:21,599 --> 00:08:28,289
so the response from the server is told

00:08:24,599 --> 00:08:33,050
as transient so it can be displayed

00:08:28,289 --> 00:08:36,419
without sending the request all the time

00:08:33,050 --> 00:08:40,560
and these are the names of the

00:08:36,419 --> 00:08:44,880
transients update call this is the info

00:08:40,560 --> 00:08:49,740
about curl update plugins and update

00:08:44,880 --> 00:08:52,920
teams and once again this part is boring

00:08:49,740 --> 00:08:54,530
right because okay those are the names

00:08:52,920 --> 00:08:58,370
and so what

00:08:54,530 --> 00:09:02,570
well it's not so boring because if there

00:08:58,370 --> 00:09:07,400
are if these are transient and we know

00:09:02,570 --> 00:09:10,790
their name we again can use some filters

00:09:07,400 --> 00:09:12,830
to modify it okay and these are the

00:09:10,790 --> 00:09:16,880
filters press the transient and

00:09:12,830 --> 00:09:20,060
transient name this filter allows us to

00:09:16,880 --> 00:09:22,460
modify the transient the value of the

00:09:20,060 --> 00:09:26,060
transient just before it is stored in

00:09:22,460 --> 00:09:28,640
the database okay so we get the answer

00:09:26,060 --> 00:09:32,420
from the server response from the server

00:09:28,640 --> 00:09:38,320
we can modify it and store in database

00:09:32,420 --> 00:09:41,930
the modified version okay and transient

00:09:38,320 --> 00:09:45,740
under Scott transient name this is the

00:09:41,930 --> 00:09:49,190
filter that is fired every time the

00:09:45,740 --> 00:09:51,230
transient is checked so every time when

00:09:49,190 --> 00:09:54,740
you check what's the value of the

00:09:51,230 --> 00:09:57,890
transient this this filter will be fired

00:09:54,740 --> 00:10:01,370
and returned return the value right so

00:09:57,890 --> 00:10:04,640
we can modify we can store original

00:10:01,370 --> 00:10:11,230
value but modify every time we want to

00:10:04,640 --> 00:10:15,920
right okay this is the boring part

00:10:11,230 --> 00:10:20,570
because now I will show you some parts

00:10:15,920 --> 00:10:23,870
of WordPress code itself how does it

00:10:20,570 --> 00:10:24,980
look you know the story that I've told

00:10:23,870 --> 00:10:28,339
you already

00:10:24,980 --> 00:10:31,250
how does it look in the code you don't

00:10:28,339 --> 00:10:34,670
have to remember it so just you know you

00:10:31,250 --> 00:10:40,580
may go to sleep for 5 minutes 5 minutes

00:10:34,670 --> 00:10:42,710
or so okay so this is the function WP

00:10:40,580 --> 00:10:46,370
version check I've already told you

00:10:42,710 --> 00:10:51,140
about this function as you can see it's

00:10:46,370 --> 00:10:55,480
it takes some parameters but they are

00:10:51,140 --> 00:10:59,440
not important for us and what does it do

00:10:55,480 --> 00:11:03,680
well first of first of all it takes

00:10:59,440 --> 00:11:07,610
current knowledge about updates right it

00:11:03,680 --> 00:11:08,180
checks the transient it checks some

00:11:07,610 --> 00:11:17,510
translation

00:11:08,180 --> 00:11:22,010
and so on and so on and so on then it

00:11:17,510 --> 00:11:25,580
checks is if the track is if it's a

00:11:22,010 --> 00:11:29,170
fourth track right if if it is then it

00:11:25,580 --> 00:11:32,170
always will be checked and not ignored

00:11:29,170 --> 00:11:32,170
mmm

00:11:32,260 --> 00:11:40,070
here are the locales for your side

00:11:36,610 --> 00:11:44,260
here's checking if when it was not

00:11:40,070 --> 00:11:44,260
checked and so on and so on and so on

00:11:44,709 --> 00:11:53,360
some checking if it's a multi-site or

00:11:47,890 --> 00:11:55,970
normal side right here is the query so

00:11:53,360 --> 00:11:59,360
as you can see there is a version PHP

00:11:55,970 --> 00:12:02,390
locale a MySQL local package blocks

00:11:59,360 --> 00:12:05,660
users multi-site enabled initial DB

00:12:02,390 --> 00:12:09,010
version what does it mean all those

00:12:05,660 --> 00:12:12,740
value values will be sent to the server

00:12:09,010 --> 00:12:14,270
WordPress server so these are the usage

00:12:12,740 --> 00:12:18,260
statistics of your site

00:12:14,270 --> 00:12:26,209
okay they are sent to the server so

00:12:18,260 --> 00:12:30,589
WordPress knows it here is the filter

00:12:26,209 --> 00:12:36,760
that allows you to modify the parameters

00:12:30,589 --> 00:12:40,550
that will be sent yeah

00:12:36,760 --> 00:12:44,990
here is the URL I've already showed you

00:12:40,550 --> 00:12:51,310
this URL right this is the address that

00:12:44,990 --> 00:12:54,440
will be response response to our our

00:12:51,310 --> 00:13:02,600
request here is tracking if we're using

00:12:54,440 --> 00:13:06,560
SSL and so on and here is the WP remote

00:13:02,600 --> 00:13:09,589
post right so this is the function use

00:13:06,560 --> 00:13:14,589
that is sending the request to the

00:13:09,589 --> 00:13:17,270
server waiting for the response yeah

00:13:14,589 --> 00:13:19,720
here we're tracking some errors and so

00:13:17,270 --> 00:13:19,720
on and so on

00:13:20,360 --> 00:13:27,290
then are some a lot of info more

00:13:33,730 --> 00:13:39,609
and as you can see here's the set side

00:13:36,999 --> 00:13:43,179
transient update core updates up this is

00:13:39,609 --> 00:13:46,720
the object that contains all the data

00:13:43,179 --> 00:13:53,529
above new new version right and there

00:13:46,720 --> 00:13:56,769
are some more stuff done later here's

00:13:53,529 --> 00:14:01,410
the WP update plugins and it's more or

00:13:56,769 --> 00:14:04,419
less the same code so I won't go through

00:14:01,410 --> 00:14:07,449
this this part as you can see it's

00:14:04,419 --> 00:14:14,230
almost the same it just goes and goes

00:14:07,449 --> 00:14:14,739
and goes ok and there is also WP up the

00:14:14,230 --> 00:14:19,149
teams

00:14:14,739 --> 00:14:24,209
again the same code request

00:14:19,149 --> 00:14:28,480
so what data is sent to the server and

00:14:24,209 --> 00:14:30,220
how does the response look like ok this

00:14:28,480 --> 00:14:35,859
is the this is the important thing

00:14:30,220 --> 00:14:40,119
because this describes what WordPress

00:14:35,859 --> 00:14:44,410
server knows about our side and what we

00:14:40,119 --> 00:14:49,329
can learn from the server this is the

00:14:44,410 --> 00:14:53,679
request the content of the request that

00:14:49,329 --> 00:14:56,410
is sent to Dragon's update check ok so

00:14:53,679 --> 00:14:59,859
this is the data that is sent to the

00:14:56,410 --> 00:15:02,350
plug-in repository just to check what

00:14:59,859 --> 00:15:08,019
are the newest newest versions for our

00:15:02,350 --> 00:15:13,329
site and as you can see here is the body

00:15:08,019 --> 00:15:16,149
of the request plugins and here is here

00:15:13,329 --> 00:15:20,109
goes the list of plugins that is used on

00:15:16,149 --> 00:15:23,589
our side what is important is that as

00:15:20,109 --> 00:15:27,309
you can see contact form 7 is the plugin

00:15:23,589 --> 00:15:31,959
you all know I guess right but WP make

00:15:27,309 --> 00:15:37,749
goes mmm it's not a plug-in from

00:15:31,959 --> 00:15:40,569
repository it's my custom plugin but my

00:15:37,749 --> 00:15:42,579
WordPress sends info about this plug-in

00:15:40,569 --> 00:15:44,949
to the plug-in repository just to check

00:15:42,579 --> 00:15:46,150
if there's a new version for that plugin

00:15:44,949 --> 00:15:49,120
ok

00:15:46,150 --> 00:15:52,750
and all the info is sent so you know

00:15:49,120 --> 00:15:57,700
name plugging URI version description

00:15:52,750 --> 00:16:00,490
and so on and so on and so on okay

00:15:57,700 --> 00:16:03,310
there's also information about which

00:16:00,490 --> 00:16:06,450
plugins are active so we've if you go to

00:16:03,310 --> 00:16:10,930
the plug-in repository and there is an

00:16:06,450 --> 00:16:14,380
info that saying how many active

00:16:10,930 --> 00:16:16,630
installations given plug-in has right so

00:16:14,380 --> 00:16:18,670
for example contact form 7 has

00:16:16,630 --> 00:16:22,540
I don't know 1 million installations

00:16:18,670 --> 00:16:27,279
active right so this is where WordPress

00:16:22,540 --> 00:16:30,270
knows how many because your site twice a

00:16:27,279 --> 00:16:35,140
day notices WordPress plug-in repository

00:16:30,270 --> 00:16:38,920
which plugins are you using ok and also

00:16:35,140 --> 00:16:44,529
there's info about translations that

00:16:38,920 --> 00:16:49,150
your site is using ok here's the

00:16:44,529 --> 00:16:51,370
response and as you can see again there

00:16:49,150 --> 00:16:53,890
is a plugins right

00:16:51,370 --> 00:16:56,920
alright that is that contains

00:16:53,890 --> 00:17:01,660
information about newest version of of

00:16:56,920 --> 00:17:05,740
plugins right so WordPress SEO here is

00:17:01,660 --> 00:17:08,230
the ID of the plug-in slack plug-in new

00:17:05,740 --> 00:17:13,089
version so you know that the newest

00:17:08,230 --> 00:17:16,600
version is 11.3 here's the package this

00:17:13,089 --> 00:17:20,170
this is the URL to the package package

00:17:16,600 --> 00:17:22,480
with new new version of the plugin right

00:17:20,170 --> 00:17:26,500
so if you go to that link you will get

00:17:22,480 --> 00:17:30,240
the zip package for the plug-in here are

00:17:26,500 --> 00:17:37,390
the icons banners and so on and so on

00:17:30,240 --> 00:17:40,570
and there is also translations right and

00:17:37,390 --> 00:17:44,020
no update this is the list of plugins

00:17:40,570 --> 00:17:46,030
that doesn't have newest version so

00:17:44,020 --> 00:17:49,950
there is no are days for them for now

00:17:46,030 --> 00:17:55,870
right ok

00:17:49,950 --> 00:17:59,890
again teams almost the same a case right

00:17:55,870 --> 00:18:07,210
so there's an area with teams 2017

00:17:59,890 --> 00:18:13,330
20:19 activist 2017 right and again the

00:18:07,210 --> 00:18:14,950
response team 2017 there's new new

00:18:13,330 --> 00:18:23,740
version and so on and so on

00:18:14,950 --> 00:18:26,260
right so okay this was the part that we

00:18:23,740 --> 00:18:29,470
were checking how WordPress checks the

00:18:26,260 --> 00:18:31,630
newer new versions and what data is sent

00:18:29,470 --> 00:18:34,990
and what data is get from the server

00:18:31,630 --> 00:18:37,920
right so if we're already wiretapping

00:18:34,990 --> 00:18:41,320
and listening and checking our WordPress

00:18:37,920 --> 00:18:44,950
do you know where these come from you

00:18:41,320 --> 00:18:47,190
know all that information you know when

00:18:44,950 --> 00:18:51,160
you're on the plugins screen you click

00:18:47,190 --> 00:18:54,490
more more info about the plug-in right

00:18:51,160 --> 00:18:57,240
and there's the screen yourself the

00:18:54,490 --> 00:19:05,020
banner the description and so on and so

00:18:57,240 --> 00:19:11,890
anybody yeah yeah it's from WordPress

00:19:05,020 --> 00:19:14,620
repository here's the response you get

00:19:11,890 --> 00:19:17,200
from the WordPress repository and here

00:19:14,620 --> 00:19:19,720
is the request you're sending right so

00:19:17,200 --> 00:19:22,570
if you want to track the newest version

00:19:19,720 --> 00:19:25,000
and get the data about I don't know

00:19:22,570 --> 00:19:28,810
contact from seven then you have to go

00:19:25,000 --> 00:19:34,570
to API WordPress or slash plugins / info

00:19:28,810 --> 00:19:37,030
/ 1.2 this is the IP version / action

00:19:34,570 --> 00:19:40,330
plug-in information request blah blah

00:19:37,030 --> 00:19:43,600
blah slack WordPress SEO so for example

00:19:40,330 --> 00:19:46,360
slack contact form seven right locale

00:19:43,600 --> 00:19:50,170
plpl because I was checking for Polish

00:19:46,360 --> 00:19:52,420
version of the description and here's

00:19:50,170 --> 00:19:54,880
the response right so we were getting

00:19:52,420 --> 00:19:57,810
the name of the plug-in and so on and so

00:19:54,880 --> 00:20:00,720
on you can always get you can also get

00:19:57,810 --> 00:20:03,760
rating of the plug-in

00:20:00,720 --> 00:20:08,110
how many support threads are on the

00:20:03,760 --> 00:20:11,650
forum what else active installs the

00:20:08,110 --> 00:20:13,389
number of active installs last updated

00:20:11,650 --> 00:20:16,599
and so on so it's

00:20:13,389 --> 00:20:22,570
nice info right and you get it in JSON

00:20:16,599 --> 00:20:26,789
format so it's easy to parse okay there

00:20:22,570 --> 00:20:30,879
are also as you can see links to all

00:20:26,789 --> 00:20:33,719
well not all but to all the versions of

00:20:30,879 --> 00:20:35,769
the plug-in so for example if you

00:20:33,719 --> 00:20:39,219
updated some plug-in and you have

00:20:35,769 --> 00:20:42,339
problems you can also downgrade by going

00:20:39,219 --> 00:20:47,589
to the link like that download the

00:20:42,339 --> 00:20:49,929
plug-in and replacing the files okay so

00:20:47,589 --> 00:20:52,179
what happens when we click update we

00:20:49,929 --> 00:20:56,320
have all the info we have seen the

00:20:52,179 --> 00:20:58,899
notice we put update well an instance of

00:20:56,320 --> 00:21:02,289
one of these classes in is constructed

00:20:58,899 --> 00:21:05,169
this there are three classes four

00:21:02,289 --> 00:21:09,399
classes that WordPress uses corrupt

00:21:05,169 --> 00:21:13,869
grader blogging upgrader team up grader

00:21:09,399 --> 00:21:16,379
and language backup grader again all of

00:21:13,869 --> 00:21:19,839
these classes are well documented in the

00:21:16,379 --> 00:21:22,899
Codex so we can check it later on the

00:21:19,839 --> 00:21:26,109
important thing for us for now is that

00:21:22,899 --> 00:21:29,019
all of these classes are using prayer

00:21:26,109 --> 00:21:31,629
outer update and upgrade their prayer

00:21:29,019 --> 00:21:35,200
download and upgrade their process

00:21:31,629 --> 00:21:38,549
completed filters and much much more

00:21:35,200 --> 00:21:44,049
okay so we can hook our code in there

00:21:38,549 --> 00:21:47,019
okay so this was the boring part so how

00:21:44,049 --> 00:21:50,169
can we use this knowledge okay so we

00:21:47,019 --> 00:21:52,719
spent around fifteen minutes listening

00:21:50,169 --> 00:21:58,440
some boring boring technical stuff about

00:21:52,719 --> 00:22:03,129
how WordPress does it but what now well

00:21:58,440 --> 00:22:07,059
this wasn't useless okay you can really

00:22:03,129 --> 00:22:12,339
use this for your pro projects for

00:22:07,059 --> 00:22:17,829
example one of the applications is you

00:22:12,339 --> 00:22:22,899
can hide some or all update notices okay

00:22:17,829 --> 00:22:25,869
how well as I've shown you can modify

00:22:22,899 --> 00:22:27,040
the response from the plug-in repository

00:22:25,869 --> 00:22:30,730
right

00:22:27,040 --> 00:22:34,410
so we've you write some code use the

00:22:30,730 --> 00:22:38,290
hook for example press a transient

00:22:34,410 --> 00:22:41,320
compress transient set right then you

00:22:38,290 --> 00:22:45,000
can modify the response so you can empty

00:22:41,320 --> 00:22:50,130
the response so no updates will be shown

00:22:45,000 --> 00:22:54,660
this is one use it I don't recommend it

00:22:50,130 --> 00:22:57,700
this is the part I might recommend

00:22:54,660 --> 00:23:01,840
notify users but prevent them from doing

00:22:57,700 --> 00:23:04,660
updates so if you go to the dashboard

00:23:01,840 --> 00:23:08,620
you will see there is a new version of

00:23:04,660 --> 00:23:12,100
contact form of contact form seven but

00:23:08,620 --> 00:23:15,940
you won't be able to click update why

00:23:12,100 --> 00:23:19,120
because for example I'm doing

00:23:15,940 --> 00:23:21,610
maintenance for the side and the the

00:23:19,120 --> 00:23:26,290
side has many users that are just using

00:23:21,610 --> 00:23:28,780
this site right and there is some guy or

00:23:26,290 --> 00:23:32,350
Carol in the you know office that always

00:23:28,780 --> 00:23:35,590
wants to click everything right so this

00:23:32,350 --> 00:23:38,290
is the way she will see he will know

00:23:35,590 --> 00:23:40,930
that there is new version you can call

00:23:38,290 --> 00:23:43,810
me and say hey we have to update this

00:23:40,930 --> 00:23:47,950
plugin but you won't be able to click it

00:23:43,810 --> 00:23:54,660
himself how well it's pretty easy all

00:23:47,950 --> 00:23:58,210
you have to do is to use again the

00:23:54,660 --> 00:24:00,520
filter - setting transient and delete

00:23:58,210 --> 00:24:04,900
the information about the URL of the

00:24:00,520 --> 00:24:08,080
packet if the plug-in info won't have

00:24:04,900 --> 00:24:10,750
that URL it will show that there is a

00:24:08,080 --> 00:24:12,970
new version but it won't show the update

00:24:10,750 --> 00:24:21,240
plugin because it's in able to update

00:24:12,970 --> 00:24:26,250
right and we we can use preset transient

00:24:21,240 --> 00:24:30,790
filter this will allow us to modify the

00:24:26,250 --> 00:24:33,580
information in the database right but we

00:24:30,790 --> 00:24:37,510
can use also transient transient name

00:24:33,580 --> 00:24:40,930
filter this will allow us to modify this

00:24:37,510 --> 00:24:44,860
value every time it's read right

00:24:40,930 --> 00:24:48,490
so for example we can check who which

00:24:44,860 --> 00:24:53,020
user is logged in so for example we can

00:24:48,490 --> 00:24:56,800
show if I am logged in the button will

00:24:53,020 --> 00:24:59,830
be shown but for example if Peter is

00:24:56,800 --> 00:25:04,420
logged in the information won't be shown

00:24:59,830 --> 00:25:06,750
he won't see the button right another

00:25:04,420 --> 00:25:06,750
user

00:25:06,870 --> 00:25:15,990
hello updates for custom plugins teams

00:25:10,650 --> 00:25:21,790
how well you can also hook to the

00:25:15,990 --> 00:25:25,300
present transient send your request to

00:25:21,790 --> 00:25:27,250
your own server get the same response

00:25:25,300 --> 00:25:30,640
that WordPress plug-in repository

00:25:27,250 --> 00:25:32,770
sending and show that there is a new

00:25:30,640 --> 00:25:37,290
version of your custom plug-in that is

00:25:32,770 --> 00:25:40,179
not in the WordPress repository right

00:25:37,290 --> 00:25:43,690
well another use it

00:25:40,179 --> 00:25:47,010
look who updates what and when so for

00:25:43,690 --> 00:25:50,230
example if if Peter is clicking update

00:25:47,010 --> 00:25:53,260
then we know that Peter is the person

00:25:50,230 --> 00:25:57,600
who who we have to blame for the not

00:25:53,260 --> 00:26:03,670
work inside right ok

00:25:57,600 --> 00:26:07,450
any other ideas come on what else would

00:26:03,670 --> 00:26:11,670
you like to do with ablating with the

00:26:07,450 --> 00:26:11,670
knowledge you get today you've got today

00:26:13,500 --> 00:26:16,710
come on

00:26:21,289 --> 00:26:29,369
okay maybe later that's part problems

00:26:26,489 --> 00:26:35,730
treats and so on anything we should be

00:26:29,369 --> 00:26:43,200
careful about may this cause any this

00:26:35,730 --> 00:26:45,090
way of doing it cause any problems can

00:26:43,200 --> 00:26:50,149
you think of some problems that may

00:26:45,090 --> 00:26:50,149
occur during the update and how it works

00:26:51,139 --> 00:27:02,519
the main problem is name conflicts

00:26:55,730 --> 00:27:05,489
because as you've seen earlier on even

00:27:02,519 --> 00:27:09,989
custom plugins are sent to the plug-in

00:27:05,489 --> 00:27:13,919
repository right so for example let let

00:27:09,989 --> 00:27:16,830
me say it this way let's say I've wrote

00:27:13,919 --> 00:27:22,679
a custom plug-in that's called Hello

00:27:16,830 --> 00:27:25,379
Dolly what will happen WordPress will

00:27:22,679 --> 00:27:26,749
send the request to the plug-in

00:27:25,379 --> 00:27:29,549
repository hey

00:27:26,749 --> 00:27:32,279
but this site is using Hello Dolly

00:27:29,549 --> 00:27:36,539
plugin what's the newest version of this

00:27:32,279 --> 00:27:40,980
plugin wordpress repository knows a

00:27:36,539 --> 00:27:43,470
plugin that's called Hello Dolly so it

00:27:40,980 --> 00:27:49,200
will respond well the newest version is

00:27:43,470 --> 00:27:54,929
10 point 10.1 workers will say okay I

00:27:49,200 --> 00:27:57,809
have version 1.0 so I have to update if

00:27:54,929 --> 00:27:59,519
you click update what will happen your

00:27:57,809 --> 00:28:01,529
custom plugin will be deleted and

00:27:59,519 --> 00:28:06,210
replaced with the plug-in from

00:28:01,529 --> 00:28:09,149
repository right so you have to be very

00:28:06,210 --> 00:28:12,210
careful when you write your own plugins

00:28:09,149 --> 00:28:15,359
and teams you have to be very careful

00:28:12,210 --> 00:28:18,239
careful how do you name them right

00:28:15,359 --> 00:28:22,850
because the name conflicts is is pretty

00:28:18,239 --> 00:28:26,009
dangerous because it may be overwritten

00:28:22,850 --> 00:28:31,499
but of course you can prevent it from

00:28:26,009 --> 00:28:33,149
happening how again you can check you

00:28:31,499 --> 00:28:34,509
know you know that this site is using

00:28:33,149 --> 00:28:36,699
this plugin

00:28:34,509 --> 00:28:39,969
right and it's a custom plugin so you

00:28:36,699 --> 00:28:41,559
can you use all the filters and so on to

00:28:39,969 --> 00:28:45,609
make sure that WordPress repository

00:28:41,559 --> 00:28:48,159
won't know won't get the request for the

00:28:45,609 --> 00:28:51,279
newest version for the your custom

00:28:48,159 --> 00:28:54,099
plugin and even if WordPress repository

00:28:51,279 --> 00:28:57,669
will send any information about that

00:28:54,099 --> 00:28:59,289
just plug-in you can ignore it right so

00:28:57,669 --> 00:29:05,549
no update will happen

00:28:59,289 --> 00:29:05,549
right okay so that's all thanks

00:29:06,920 --> 00:29:11,660
[Applause]

00:29:18,990 --> 00:29:29,720
Nick Daman Yokota school any questions

00:29:22,740 --> 00:29:29,720
please yeah don't be afraid I don't bite

00:29:31,880 --> 00:29:39,090
yeah yeah it will be it will be

00:29:35,550 --> 00:29:41,760
published online I will send it to well

00:29:39,090 --> 00:29:45,390
I've already done so you you may publish

00:29:41,760 --> 00:29:48,690
it the link to the to it on the Facebook

00:29:45,390 --> 00:30:09,810
fan page yeah and the video it will be

00:29:48,690 --> 00:30:13,230
on WordPress TV yes always I always try

00:30:09,810 --> 00:30:16,650
to write because the worst thing in the

00:30:13,230 --> 00:30:20,100
world is that you do update the site

00:30:16,650 --> 00:30:22,950
crashes and then you have it's Friday

00:30:20,100 --> 00:30:25,740
evening and then you know the owner of

00:30:22,950 --> 00:30:28,080
the site is calling and he's calling you

00:30:25,740 --> 00:30:32,990
names and he's angry and you don't want

00:30:28,080 --> 00:30:32,990
it right so yeah

00:30:46,360 --> 00:30:55,360
well I always check the code differences

00:30:51,130 --> 00:30:58,720
between versions so I have all the sides

00:30:55,360 --> 00:31:01,350
in the git repository so when I do

00:30:58,720 --> 00:31:04,299
update I can always check what are the

00:31:01,350 --> 00:31:07,390
differences between those two versions

00:31:04,299 --> 00:31:19,350
and try to check what they do

00:31:07,390 --> 00:31:19,350
okay so oh yeah yeah yeah it's not easy

00:31:20,590 --> 00:31:28,809
some time ago there was some software

00:31:24,220 --> 00:31:32,289
called perfect dashboard they've been

00:31:28,809 --> 00:31:35,380
sold this year I guess so I'm afraid

00:31:32,289 --> 00:31:39,820
they they are not available for now but

00:31:35,380 --> 00:31:43,480
it allowed you to do the update for the

00:31:39,820 --> 00:31:47,350
remote side something like WP manager

00:31:43,480 --> 00:31:50,950
something like that and it was doing

00:31:47,350 --> 00:31:54,610
some automatic checks how the site looks

00:31:50,950 --> 00:31:59,080
looked before and how it looks after the

00:31:54,610 --> 00:32:01,870
update so you had image before after and

00:31:59,080 --> 00:32:03,970
if the images were different then you

00:32:01,870 --> 00:32:08,529
could check what's the difference right

00:32:03,970 --> 00:32:11,279
so we know that this button is deleted

00:32:08,529 --> 00:32:11,279
or something like that

00:32:17,010 --> 00:32:21,580
okay I'm okay

00:32:18,850 --> 00:32:23,970
no more crash questions oh thank you

00:32:21,580 --> 00:32:29,190
thank you very much

00:32:23,970 --> 00:32:29,190

YouTube URL: https://www.youtube.com/watch?v=EDXDlfsCOFo


