Title: Tim Nash: Using Security Headers to help secure your site
Publication date: 2019-05-10
Playlist: WordCamp Edinburgh 2018
Description: 
	From HSTS through to CSP and almost every acronym in between security headers, are simple HTTP Headers, sent with requests from your server to the browser but they can be a valuable piece in hardening sites if implemented correctly what’s more for most of them it’s simple to do. In this talk Tim going to go through various security headers explaining how and when to use them and some of the pitfalls. It’s a journey that will take us through HTTPS and into a world where we need to consider carefully what third party content is being used.

WPTV link: https://wordpress.tv/2019/04/11/tim-nash-using-security-headers-to-help-secure-your-site/
Captions: 
	00:00:04,840 --> 00:00:12,440
you can waiter hello everybody obvious

00:00:09,410 --> 00:00:16,430
I'm not that whether anybody likes how

00:00:12,440 --> 00:00:17,990
we buy those headers are from now it's a

00:00:16,430 --> 00:00:19,160
random Honda ones but I've been really

00:00:17,990 --> 00:00:21,320
cool if someone just yelled out of

00:00:19,160 --> 00:00:33,710
making model because I have gone yes and

00:00:21,320 --> 00:00:35,539
agree with you where they often lots of

00:00:33,710 --> 00:00:38,420
credit card details hands in the air

00:00:35,539 --> 00:00:39,020
anything here actually affected it's

00:00:38,420 --> 00:00:40,460
amazing

00:00:39,020 --> 00:00:41,930
I've doing this talk four times and no

00:00:40,460 --> 00:00:44,450
one's been affecting it's almost like it

00:00:41,930 --> 00:00:52,460
doesn't exist but quite a few people

00:00:44,450 --> 00:00:54,710
have and it really sucks but what do you

00:00:52,460 --> 00:00:56,630
do anything to do with security what

00:00:54,710 --> 00:00:58,520
really sucks is when you realize that

00:00:56,630 --> 00:01:02,660
they took one a second them one line of

00:00:58,520 --> 00:01:04,159
code to prevent the whole thing now you

00:01:02,660 --> 00:01:06,920
could argue the backs down to pure

00:01:04,159 --> 00:01:08,689
laziness you could argue the massive

00:01:06,920 --> 00:01:10,459
corporations with big government

00:01:08,689 --> 00:01:13,759
structures and things getting one line

00:01:10,459 --> 00:01:15,979
of code for it's actually but still

00:01:13,759 --> 00:01:18,079
we're in a scenario where just one line

00:01:15,979 --> 00:01:20,060
of code could have saved them and

00:01:18,079 --> 00:01:22,700
preventive at least their end users

00:01:20,060 --> 00:01:25,009
having any problems can use a bit of

00:01:22,700 --> 00:01:33,709
show you how to do that today and this

00:01:25,009 --> 00:01:35,959
is not a scary talk this is this is not

00:01:33,709 --> 00:01:37,969
scary talkative this is a very just a

00:01:35,959 --> 00:01:40,219
very practical talk if you want to scary

00:01:37,969 --> 00:01:42,319
talk come talk to me that schedule ever

00:01:40,219 --> 00:01:43,429
but I appreciate what some people don't

00:01:42,319 --> 00:01:44,829
want to be scared to definitely just

00:01:43,429 --> 00:01:48,409
want to learn something

00:01:44,829 --> 00:01:50,209
so my name's Steve Nash I'm the wolfish

00:01:48,409 --> 00:01:51,469
backing leader for speed at home I'm a

00:01:50,209 --> 00:01:53,149
foreman pays Esther

00:01:51,469 --> 00:01:55,579
okay run whimpers please I used to run a

00:01:53,149 --> 00:01:59,119
small donation see okay don't run

00:01:55,579 --> 00:02:01,429
countries speaking about security I have

00:01:59,119 --> 00:02:03,950
many accolades of disasters and doom and

00:02:01,429 --> 00:02:05,509
gloom to my name I have once almost

00:02:03,950 --> 00:02:08,840
destroyed produced overwatch please come

00:02:05,509 --> 00:02:10,720
and ask me about that anybody once a

00:02:08,840 --> 00:02:16,150
hint it's called catching and it comes

00:02:10,720 --> 00:02:18,010
having this talk so please don't do this

00:02:16,150 --> 00:02:19,240
stuff without further reading some of

00:02:18,010 --> 00:02:21,120
the headers I'm going to show you and

00:02:19,240 --> 00:02:23,680
even just the idea of how heavens work

00:02:21,120 --> 00:02:27,880
can cause you to fundamentally as you

00:02:23,680 --> 00:02:29,290
destroy your site forever I think you

00:02:27,880 --> 00:02:31,690
can get into a scenario where your

00:02:29,290 --> 00:02:34,390
domain name is almost unusable if you're

00:02:31,690 --> 00:02:35,920
not careful because so your users move

00:02:34,390 --> 00:02:38,170
in and up in a scenario where they just

00:02:35,920 --> 00:02:41,050
don't you also security and this can be

00:02:38,170 --> 00:02:42,850
used for evil which is not bad at all

00:02:41,050 --> 00:02:44,740
but again feel free to come ask me about

00:02:42,850 --> 00:02:46,810
really evil using some security headers

00:02:44,740 --> 00:02:48,970
oh yeah please please please read stuff

00:02:46,810 --> 00:02:50,970
whenever something gives you the option

00:02:48,970 --> 00:02:57,130
of specifying a time

00:02:50,970 --> 00:03:00,700
wait you're testing then go to the

00:02:57,130 --> 00:03:03,610
hundred years really small sixty Seconds

00:03:00,700 --> 00:03:05,650
hundred years there are interviews in

00:03:03,610 --> 00:03:07,570
between you can use as well but do you

00:03:05,650 --> 00:03:08,950
make sure that you don't just throw

00:03:07,570 --> 00:03:12,790
yourself into this because it will go

00:03:08,950 --> 00:03:14,320
horribly wrong and I have screwed up the

00:03:12,790 --> 00:03:17,320
domain and I've had to throw it away

00:03:14,320 --> 00:03:18,750
because I didn't and I thought I knew

00:03:17,320 --> 00:03:22,050
what that was doing and you know

00:03:18,750 --> 00:03:25,810
arrogance is the best of everybody so

00:03:22,050 --> 00:03:28,690
what is the security header this is a

00:03:25,810 --> 00:03:31,000
normal normal page TV packet this is the

00:03:28,690 --> 00:03:32,110
HTML page to my body in my HTML head

00:03:31,000 --> 00:03:34,239
that's the content that gets delivered

00:03:32,110 --> 00:03:37,380
the screws normal corners all this

00:03:34,239 --> 00:03:40,630
content and here is response headers

00:03:37,380 --> 00:03:42,400
these are sent separately so they're not

00:03:40,630 --> 00:03:44,380
part the HTML they're things that go a

00:03:42,400 --> 00:03:49,900
lot outside the HTML that tells you a

00:03:44,380 --> 00:03:53,260
bunch of information so this is just me

00:03:49,900 --> 00:03:55,870
making a request to my own site and - I

00:03:53,260 --> 00:03:58,060
because curl works that way you get to

00:03:55,870 --> 00:03:59,560
me turns me just the headers and these

00:03:58,060 --> 00:04:01,090
are the hammers that are sent with any

00:03:59,560 --> 00:04:04,930
Content that's requested so if you go to

00:04:01,090 --> 00:04:06,390
indicate ask from my side in OPP you're

00:04:04,930 --> 00:04:09,070
getting sent back headers little

00:04:06,390 --> 00:04:10,989
something like that but most of these

00:04:09,070 --> 00:04:14,019
we're going to be talking about but

00:04:10,989 --> 00:04:16,989
things that you are in your HTTP headers

00:04:14,019 --> 00:04:18,280
arm stuff like status codes as most

00:04:16,989 --> 00:04:19,930
people in the room will be familiar with

00:04:18,280 --> 00:04:20,910
we've all come across the idea of the

00:04:19,930 --> 00:04:22,920
status code 200

00:04:20,910 --> 00:04:26,760
meaning okay everything is good for our

00:04:22,920 --> 00:04:30,750
fours missing 500 yeah we're going into

00:04:26,760 --> 00:04:32,100
really bad territory that's that how the

00:04:30,750 --> 00:04:35,190
server responds and tells you that

00:04:32,100 --> 00:04:37,490
information is done for a host B now

00:04:35,190 --> 00:04:40,380
once you can do that for things like hey

00:04:37,490 --> 00:04:42,300
and yeah I asked for what content type

00:04:40,380 --> 00:04:46,770
this is today's dinner

00:04:42,300 --> 00:04:50,700
can I ask what the server is in Jeanette

00:04:46,770 --> 00:04:53,570
I need to know what the servers can I

00:04:50,700 --> 00:04:57,800
ask for a bunch of other stuff through

00:04:53,570 --> 00:05:00,090
HTTP headers are very standardized

00:04:57,800 --> 00:05:04,350
though you can put whatever you like in

00:05:00,090 --> 00:05:06,360
there you will find for example if you

00:05:04,350 --> 00:05:08,250
look at some people sites headers you

00:05:06,360 --> 00:05:14,580
will find things saying what a job with

00:05:08,250 --> 00:05:17,340
us click this link or if their territory

00:05:14,580 --> 00:05:19,740
fans though you might find a Hagan is

00:05:17,340 --> 00:05:23,670
very Padgett header looking around in

00:05:19,740 --> 00:05:27,660
their clients headers so there are lots

00:05:23,670 --> 00:05:30,090
of users not just security users now

00:05:27,660 --> 00:05:32,850
Heather can be sent fine both the web

00:05:30,090 --> 00:05:35,340
servers like nginx or the application

00:05:32,850 --> 00:05:38,220
I'm ok in WordPress now if you're using

00:05:35,340 --> 00:05:40,410
a PHP or WordPress through send headers

00:05:38,220 --> 00:05:43,290
they have to be sent to the specific

00:05:40,410 --> 00:05:46,169
point they have to be set before you

00:05:43,290 --> 00:05:49,620
start generating the HTML body because

00:05:46,169 --> 00:05:51,120
if you don't well then you get that fun

00:05:49,620 --> 00:05:52,230
error message that comes up saying I've

00:05:51,120 --> 00:05:52,650
already said my head is what you're

00:05:52,230 --> 00:05:56,970
doing

00:05:52,650 --> 00:05:59,240
your mother's so um which one you choose

00:05:56,970 --> 00:06:01,230
will depend on what head one month

00:05:59,240 --> 00:06:03,000
normally sending the headed by the web

00:06:01,230 --> 00:06:05,520
server is faster because obviously it's

00:06:03,000 --> 00:06:08,520
not doing any work but they normally

00:06:05,520 --> 00:06:09,780
fixed unlikely the only dynamically

00:06:08,520 --> 00:06:11,760
generates in your headers in the web

00:06:09,780 --> 00:06:14,100
server if you need to dynamically

00:06:11,760 --> 00:06:15,780
generate the header you probably want to

00:06:14,100 --> 00:06:18,660
put it in the application right ok

00:06:15,780 --> 00:06:21,000
WordPress as a general rule will fund

00:06:18,660 --> 00:06:23,610
things like a hedges yes header I would

00:06:21,000 --> 00:06:25,169
probably put it in a web server a CSP

00:06:23,610 --> 00:06:26,870
which we'll talk about later I probably

00:06:25,169 --> 00:06:29,010
put in an application

00:06:26,870 --> 00:06:30,600
determinate because I might be

00:06:29,010 --> 00:06:33,510
dynamically generating it depending on

00:06:30,600 --> 00:06:37,590
what pages that comes with its own set

00:06:33,510 --> 00:06:42,000
of risks in issues but it's generally

00:06:37,590 --> 00:06:44,790
probably much more flexible now if I can

00:06:42,000 --> 00:06:46,650
set a header in the application that

00:06:44,790 --> 00:06:48,180
means anything that's got control the

00:06:46,650 --> 00:06:49,860
application layer basically eating the

00:06:48,180 --> 00:06:52,920
contingent wrapped with haste of being

00:06:49,860 --> 00:06:53,550
happy can set headers you win that big

00:06:52,920 --> 00:06:56,460
where I told you

00:06:53,550 --> 00:06:59,580
headers are dangerous this means that

00:06:56,460 --> 00:07:02,960
Nik any WordPress plug-in for example

00:06:59,580 --> 00:07:05,300
could set a header that just says HSTs

00:07:02,960 --> 00:07:06,690
okay if you don't have SSL enabled

00:07:05,300 --> 00:07:11,760
forever

00:07:06,690 --> 00:07:13,500
pretty loaded we're screwed also if Bob

00:07:11,760 --> 00:07:16,020
who's not a system administrator decides

00:07:13,500 --> 00:07:17,730
he wants to put a header on he can put

00:07:16,020 --> 00:07:20,840
it on and could potentially put it on a

00:07:17,730 --> 00:07:24,740
subdomain and affect the main domain

00:07:20,840 --> 00:07:27,330
it's all good fun this is why some

00:07:24,740 --> 00:07:33,240
setups will actually prevent application

00:07:27,330 --> 00:07:37,740
level from setting headers so let's

00:07:33,240 --> 00:07:39,690
start with some pairs first one HTTP

00:07:37,740 --> 00:07:41,370
strict Transport Security for HSTs

00:07:39,690 --> 00:07:45,360
headers this is probably one of the

00:07:41,370 --> 00:07:48,540
older ones that you come across it the

00:07:45,360 --> 00:07:52,440
idea is most people cite rows over HTTP

00:07:48,540 --> 00:07:56,130
that goes oh yes hello

00:07:52,440 --> 00:07:58,410
now if we want to say actually under no

00:07:56,130 --> 00:08:01,950
circumstances do we ever want the person

00:07:58,410 --> 00:08:04,590
to go over HTTP we can say set the

00:08:01,950 --> 00:08:07,110
header with a max age in this case than

00:08:04,590 --> 00:08:08,700
300 seconds and say whenever you

00:08:07,110 --> 00:08:10,650
whenever you as the browsers or when the

00:08:08,700 --> 00:08:12,570
browser makes a connection we say hey we

00:08:10,650 --> 00:08:15,000
want this browser connection to always

00:08:12,570 --> 00:08:16,620
go over HTTP next time the site cut

00:08:15,000 --> 00:08:17,160
person to the site even if they put in

00:08:16,620 --> 00:08:20,220
the URL

00:08:17,160 --> 00:08:23,370
hey TDP Tim match.com okay if the

00:08:20,220 --> 00:08:27,390
browser will go no the site told me I

00:08:23,370 --> 00:08:28,550
must load over HTTP and that is what I

00:08:27,390 --> 00:08:31,009
will do

00:08:28,550 --> 00:08:34,339
and there is no way for the site to

00:08:31,009 --> 00:08:37,010
overwrite that again up until the max

00:08:34,339 --> 00:08:38,810
age I will not ask for it I will not

00:08:37,010 --> 00:08:42,020
request it again I will just assume I

00:08:38,810 --> 00:08:43,729
must go over HTTP until I get past this

00:08:42,020 --> 00:08:44,589
map Teja I will replace the information

00:08:43,729 --> 00:08:47,240
again

00:08:44,589 --> 00:08:50,300
awesome we now know that our connections

00:08:47,240 --> 00:08:56,540
will be always over HTTP to our so this

00:08:50,300 --> 00:08:58,040
is a good thing generally we can we've

00:08:56,540 --> 00:09:00,920
now increased our max age you'll notice

00:08:58,040 --> 00:09:05,240
here I'm going with Raven we can also

00:09:00,920 --> 00:09:08,630
say England subdomains so now anything

00:09:05,240 --> 00:09:13,520
over Tim matchbook photos UK messes up

00:09:08,630 --> 00:09:15,470
too much Coby ke dev team fw k local

00:09:13,520 --> 00:09:18,770
doctor mask okay

00:09:15,470 --> 00:09:20,930
Oh must be going over hipster yes

00:09:18,770 --> 00:09:24,140
so even de means I've never thought of

00:09:20,930 --> 00:09:25,370
the mum I create them they must be going

00:09:24,140 --> 00:09:27,620
over here yes

00:09:25,370 --> 00:09:31,760
oh my browser will say I'm not

00:09:27,620 --> 00:09:34,790
connecting now here's a real fun one

00:09:31,760 --> 00:09:39,820
some browsers if you're on the subdomain

00:09:34,790 --> 00:09:42,440
you include this parent so you can own

00:09:39,820 --> 00:09:45,140
blah blah WordPress comment if you

00:09:42,440 --> 00:09:47,750
manage to get at Pastis header on you

00:09:45,140 --> 00:09:49,339
can force it for the entire wordpress

00:09:47,750 --> 00:09:55,480
calm even though you are actually own

00:09:49,339 --> 00:09:58,700
control of the subdomain on the whole

00:09:55,480 --> 00:10:00,230
HSTs is a good thing but you need to

00:09:58,700 --> 00:10:03,200
think about implementation if you have

00:10:00,230 --> 00:10:05,480
local dev environments that you wouldn't

00:10:03,200 --> 00:10:07,840
naturally have a library so you now have

00:10:05,480 --> 00:10:10,000
to have them over SSL if you want

00:10:07,840 --> 00:10:13,510
suddenly you might be all thinking I

00:10:10,000 --> 00:10:15,790
know I'll change my little dev

00:10:13,510 --> 00:10:19,270
environment to being I don't know Tim

00:10:15,790 --> 00:10:21,550
Nash code Tim left death yeah I wouldn't

00:10:19,270 --> 00:10:23,950
do that particular one given the Google

00:10:21,550 --> 00:10:26,830
only doc dev domains and they've specify

00:10:23,950 --> 00:10:31,360
the HSTs is preloaded so you're back in

00:10:26,830 --> 00:10:33,430
the same problem anyway hey just yes it

00:10:31,360 --> 00:10:34,870
is usefully trip will the prevent

00:10:33,430 --> 00:10:37,420
man-in-the-middle attacks so the idea is

00:10:34,870 --> 00:10:40,930
that I go hello I I would like to talk

00:10:37,420 --> 00:10:43,270
to somebody the middle grace oh yes

00:10:40,930 --> 00:10:45,010
that's me just giving you the

00:10:43,270 --> 00:10:46,390
information by the way I'm just going to

00:10:45,010 --> 00:10:48,040
give you the wrong information and pass

00:10:46,390 --> 00:10:50,770
it through all right so he does have a

00:10:48,040 --> 00:10:52,330
use a easy important to music just be

00:10:50,770 --> 00:10:55,300
aware that this what is in one of those

00:10:52,330 --> 00:10:57,730
potential one can totally screw you make

00:10:55,300 --> 00:11:00,280
sure you're fully aware before you leave

00:10:57,730 --> 00:11:03,640
subdomains that you're all your

00:11:00,280 --> 00:11:08,320
subdomains actually are over HTTPS we

00:11:03,640 --> 00:11:10,480
can also save reload the idea here is

00:11:08,320 --> 00:11:12,250
that if once we safe reload browsers

00:11:10,480 --> 00:11:14,890
will start to go around and find these

00:11:12,250 --> 00:11:16,830
preloads and put them in preload lists

00:11:14,890 --> 00:11:20,590
you can also submit it to something like

00:11:16,830 --> 00:11:23,500
hate sets PS preload up organ now you

00:11:20,590 --> 00:11:27,190
have to have a certain length expiry

00:11:23,500 --> 00:11:28,990
time it is over a year but you can then

00:11:27,190 --> 00:11:31,450
take and you must conclude subdomain

00:11:28,990 --> 00:11:33,210
that I think I'll take that we're pretty

00:11:31,450 --> 00:11:35,520
sure it has to include subdomains

00:11:33,210 --> 00:11:37,440
you can then ask these browsers to

00:11:35,520 --> 00:11:40,380
preload this now this means that the

00:11:37,440 --> 00:11:43,470
browser's never have to make the initial

00:11:40,380 --> 00:11:45,480
connection to get the header so for

00:11:43,470 --> 00:11:48,510
example Chrome if you come into my site

00:11:45,480 --> 00:11:50,400
in Chrome it never asks where both ago

00:11:48,510 --> 00:11:53,100
just check the HTTP header because it's

00:11:50,400 --> 00:11:55,430
already preloaded in so it knows that it

00:11:53,100 --> 00:11:58,050
should only be loaded over HTTP

00:11:55,430 --> 00:12:04,320
this is something comes a really useful

00:11:58,050 --> 00:12:07,890
feature until we don't yes we have a bad

00:12:04,320 --> 00:12:11,190
day we let's encrypt certificate and

00:12:07,890 --> 00:12:13,200
renew now your site can't be like that's

00:12:11,190 --> 00:12:15,900
all the browser will be confused all

00:12:13,200 --> 00:12:20,060
workers will try and load anyway and it

00:12:15,900 --> 00:12:22,560
will just get stuck in the link back set

00:12:20,060 --> 00:12:26,760
everything you should I didn't be pretty

00:12:22,560 --> 00:12:30,360
lazy movie on cross-site scripting

00:12:26,760 --> 00:12:32,610
protection that very simple header in

00:12:30,360 --> 00:12:34,080
this place it says zero the browser most

00:12:32,610 --> 00:12:35,550
browsers have some built-in cross-site

00:12:34,080 --> 00:12:38,840
scripting protection I think basically

00:12:35,550 --> 00:12:42,060
they look at the URL and go do you know

00:12:38,840 --> 00:12:44,340
script a script and then a bunch of

00:12:42,060 --> 00:12:47,760
JavaScript in the URL encoded is pretty

00:12:44,340 --> 00:12:50,280
weird it shouldn't be there we'll try to

00:12:47,760 --> 00:12:54,480
strip that out so you even turn it on

00:12:50,280 --> 00:12:56,490
and in this state you just you could

00:12:54,480 --> 00:12:57,630
just turn it on and it will just see

00:12:56,490 --> 00:13:00,690
they're going on well I know that I

00:12:57,630 --> 00:13:03,180
fastened that's not right I'll put a

00:13:00,690 --> 00:13:09,360
message in console we can also use this

00:13:03,180 --> 00:13:12,240
report report so the report allows us to

00:13:09,360 --> 00:13:17,610
go to this URL and if the browser will

00:13:12,240 --> 00:13:19,020
send to that URL a JSON payload it makes

00:13:17,610 --> 00:13:21,330
a post request for the URL that you

00:13:19,020 --> 00:13:23,670
specified saying hey tell me about any

00:13:21,330 --> 00:13:26,580
issues that you come across a cross-site

00:13:23,670 --> 00:13:29,220
scripting so I can say hey what yet and

00:13:26,580 --> 00:13:32,580
he says all up here this was the request

00:13:29,220 --> 00:13:35,910
URL and I didn't from a body here's the

00:13:32,580 --> 00:13:37,650
information about it this is bad so the

00:13:35,910 --> 00:13:39,180
browser's are now telling us when things

00:13:37,650 --> 00:13:41,700
are bad and broken

00:13:39,180 --> 00:13:44,340
this is really cool because obviously as

00:13:41,700 --> 00:13:45,860
developers we can now go something's

00:13:44,340 --> 00:13:49,890
wrong here we can go and fix this

00:13:45,860 --> 00:13:54,180
now a couple of ideas if you are using

00:13:49,890 --> 00:13:55,530
things like this one you probably don't

00:13:54,180 --> 00:13:59,070
want it reporting to the same domain

00:13:55,530 --> 00:14:00,570
that's got the problem because there's a

00:13:59,070 --> 00:14:02,340
reasonable chance that if there is a

00:14:00,570 --> 00:14:05,510
problem that they've probably got your

00:14:02,340 --> 00:14:09,060
reporting as well too

00:14:05,510 --> 00:14:10,380
if you have a problem every request to

00:14:09,060 --> 00:14:13,380
their free browser is going to start

00:14:10,380 --> 00:14:17,040
with wanting stuff to you you can end up

00:14:13,380 --> 00:14:19,920
quite easily DDoS in yourself and it's

00:14:17,040 --> 00:14:25,740
very hard to stop because you've told

00:14:19,920 --> 00:14:28,110
the browser to go into it oh so even if

00:14:25,740 --> 00:14:28,350
you took the header off for a little

00:14:28,110 --> 00:14:30,270
while

00:14:28,350 --> 00:14:33,270
browsers are still going to do it if

00:14:30,270 --> 00:14:36,840
you've been to the site previously um a

00:14:33,270 --> 00:14:39,180
good services report you're on it

00:14:36,840 --> 00:14:41,570
basically is designed to provide a

00:14:39,180 --> 00:14:44,970
reporting services for its gears headers

00:14:41,570 --> 00:14:46,740
they're based in the UK they've got

00:14:44,970 --> 00:14:48,180
their servers are based both in the EU

00:14:46,740 --> 00:14:52,380
and the states you can specify

00:14:48,180 --> 00:14:54,570
specifically through some really cool

00:14:52,380 --> 00:14:56,430
features so if you are look is it

00:14:54,570 --> 00:14:59,760
setting up reporting I would recommend

00:14:56,430 --> 00:15:02,490
the report Drive so up until now we've

00:14:59,760 --> 00:15:04,470
just reported stuff we've mode equals

00:15:02,490 --> 00:15:08,070
block will now say do not want you to

00:15:04,470 --> 00:15:10,170
load that resource I've decided that I'm

00:15:08,070 --> 00:15:12,120
pretty sure I don't have any crop side

00:15:10,170 --> 00:15:12,960
scripting issue things that would look

00:15:12,120 --> 00:15:16,020
like cosplayers

00:15:12,960 --> 00:15:19,410
quick cuts site scripting attacks so I'm

00:15:16,020 --> 00:15:23,610
willing to put mode block now sensible

00:15:19,410 --> 00:15:25,050
people we start with this we get it

00:15:23,610 --> 00:15:29,040
reporting when we're happy that there's

00:15:25,050 --> 00:15:30,630
no reports coming in we go to this do

00:15:29,040 --> 00:15:32,850
not jump to this because your page might

00:15:30,630 --> 00:15:33,720
not drive because just as you think

00:15:32,850 --> 00:15:35,910
something's in the cross site scripting

00:15:33,720 --> 00:15:37,620
attack doesn't mean the browser does

00:15:35,910 --> 00:15:41,970
trust me there we're all set

00:15:37,620 --> 00:15:43,580
pretty basic I mean pretty pretty basic

00:15:41,970 --> 00:15:47,160
in what they felt there anymore

00:15:43,580 --> 00:15:48,840
literally one of the browsers except if

00:15:47,160 --> 00:15:51,600
you have the word Union anywhere in your

00:15:48,840 --> 00:15:55,140
URL locked it is a cross-site scripting

00:15:51,600 --> 00:15:57,680
attack this is sucks if you run Union

00:15:55,140 --> 00:15:57,680
Jack stock

00:15:59,460 --> 00:16:03,720
we can also set it up so that we both

00:16:01,500 --> 00:16:06,720
have been posting my blog which would be

00:16:03,720 --> 00:16:10,850
our ultimate goal move it up next time

00:16:06,720 --> 00:16:14,280
is again there so in this case is just

00:16:10,850 --> 00:16:16,140
2x normally bzees outside would standard

00:16:14,280 --> 00:16:17,700
specification even though these are

00:16:16,140 --> 00:16:20,160
standards that most browsers adopt

00:16:17,700 --> 00:16:21,570
they're not formalized and intensity

00:16:20,160 --> 00:16:24,620
it's in the front its content type

00:16:21,570 --> 00:16:30,450
options no snip now this basically says

00:16:24,620 --> 00:16:32,730
if I'd like a point in some body I just

00:16:30,450 --> 00:16:34,550
got style and then star she oh it's just

00:16:32,730 --> 00:16:37,350
got scripted it's just got JavaScript

00:16:34,550 --> 00:16:40,410
then do not try and guess what it is

00:16:37,350 --> 00:16:41,910
because it's told you so if the money

00:16:40,410 --> 00:16:45,150
type is not text hat

00:16:41,910 --> 00:16:48,210
text slash CSS then that's it stuff

00:16:45,150 --> 00:16:51,480
inside there we don't trust likewise if

00:16:48,210 --> 00:16:52,350
the my plan isn't JavaScript or one of

00:16:51,480 --> 00:16:54,660
these there's about three different

00:16:52,350 --> 00:17:01,560
JavaScript ones do not trust it and do

00:16:54,660 --> 00:17:04,080
not load it policy this is for giving

00:17:01,560 --> 00:17:07,140
information and going forwards and

00:17:04,080 --> 00:17:09,690
backwards so the most hard version is

00:17:07,140 --> 00:17:12,480
going to be furrow so don't pass to the

00:17:09,690 --> 00:17:15,570
next URL any information about the URL

00:17:12,480 --> 00:17:17,130
you've just been no referral we're down

00:17:15,570 --> 00:17:22,470
rating that's going from page two yes to

00:17:17,130 --> 00:17:25,440
HTTP or HTTPS only do you refer to my

00:17:22,470 --> 00:17:27,510
own domain because we've no referrer the

00:17:25,440 --> 00:17:30,960
paint even pages on your same site will

00:17:27,510 --> 00:17:34,950
not share refer information the other

00:17:30,960 --> 00:17:37,310
origin your staff how do you going down

00:17:34,950 --> 00:17:37,310
go now

00:17:42,490 --> 00:17:47,800
now once the rugby mates up until now

00:17:46,480 --> 00:17:49,840
these are just been one of Heather's

00:17:47,800 --> 00:17:51,790
content security policy is a single

00:17:49,840 --> 00:17:55,180
headed with more lots of information in

00:17:51,790 --> 00:17:56,320
it and in many ways CSP is subsumed a

00:17:55,180 --> 00:17:59,740
lot of the stuff we just talked about

00:17:56,320 --> 00:18:01,900
cross-ice protein protection can be done

00:17:59,740 --> 00:18:03,430
with purely with a CSP they work hand in

00:18:01,900 --> 00:18:05,890
hand those and the county because you

00:18:03,430 --> 00:18:07,330
the CSP will not based on what you tell

00:18:05,890 --> 00:18:09,580
it whereas the cross site scripting

00:18:07,330 --> 00:18:12,420
protection blocks on what they browse

00:18:09,580 --> 00:18:16,990
always thinking about so at CSP policy

00:18:12,420 --> 00:18:20,500
will stop saying simple was it a default

00:18:16,990 --> 00:18:23,950
source so set wife psyched we can say

00:18:20,500 --> 00:18:25,540
that lettuce I tell you otherwise the

00:18:23,950 --> 00:18:32,670
default source for everything should be

00:18:25,540 --> 00:18:35,530
yourself self and everything in print

00:18:32,670 --> 00:18:36,940
because you know by default solves

00:18:35,530 --> 00:18:42,580
everything she about to come from self

00:18:36,940 --> 00:18:45,730
for my friend calm so default you if you

00:18:42,580 --> 00:18:48,070
rather than using self if I don't want

00:18:45,730 --> 00:18:49,780
to specify if I want you to only be

00:18:48,070 --> 00:18:51,100
loading over here so I don't want to put

00:18:49,780 --> 00:18:53,140
subdomain I don't want any I want to

00:18:51,100 --> 00:18:57,820
make sure it's a protocol specific I can

00:18:53,140 --> 00:19:01,180
put my actual first domain in there we

00:18:57,820 --> 00:19:06,220
can then say okay so for images I want

00:19:01,180 --> 00:19:07,780
to load from anywhere and for our script

00:19:06,220 --> 00:19:10,030
so for JavaScript I want to load from

00:19:07,780 --> 00:19:12,520
self and friend calm so my default

00:19:10,030 --> 00:19:13,840
source for most things is myself but I'm

00:19:12,520 --> 00:19:15,930
being overwrite so each time we add

00:19:13,840 --> 00:19:18,910
these steps were overriding the default

00:19:15,930 --> 00:19:20,890
for images I'm not load them from

00:19:18,910 --> 00:19:22,690
anywhere on the web I don't care the

00:19:20,890 --> 00:19:27,910
scripts must come from self or friend

00:19:22,690 --> 00:19:28,810
calm which would report stuff this is

00:19:27,910 --> 00:19:31,570
good because now I'm gonna get

00:19:28,810 --> 00:19:35,230
information back and he does not selves

00:19:31,570 --> 00:19:36,910
when we get this all horribly wrong so a

00:19:35,230 --> 00:19:39,160
report coming back will look something

00:19:36,910 --> 00:19:40,810
like this again it's a JSON payload has

00:19:39,160 --> 00:19:43,030
it now the amount of information that's

00:19:40,810 --> 00:19:45,310
given to you and code to lead append on

00:19:43,030 --> 00:19:46,930
the browser because what Firefox gives

00:19:45,310 --> 00:19:49,080
you is different to what Chrome gives

00:19:46,930 --> 00:19:49,080
you

00:19:50,649 --> 00:19:57,559
no thank you ah yeah so what's in there

00:19:55,610 --> 00:19:59,929
will change depending on things and if

00:19:57,559 --> 00:20:01,820
you've got your however you have you

00:19:59,929 --> 00:20:06,289
certainly refer policy obviously affects

00:20:01,820 --> 00:20:08,240
this as well proof so we can also set

00:20:06,289 --> 00:20:11,570
our content security policy to be report

00:20:08,240 --> 00:20:14,419
only when setting up your CSP it says it

00:20:11,570 --> 00:20:17,990
to report only because if something

00:20:14,419 --> 00:20:20,720
violates your CSP the browser will block

00:20:17,990 --> 00:20:22,370
it immediately your questions asked

00:20:20,720 --> 00:20:24,230
that's what it does it will tell you in

00:20:22,370 --> 00:20:26,769
the console and it will report it to the

00:20:24,230 --> 00:20:30,409
report your eyes but it will block it

00:20:26,769 --> 00:20:35,210
let's go back through scripts we could

00:20:30,409 --> 00:20:37,610
do our self and by default just because

00:20:35,210 --> 00:20:41,389
something's in self if we unless we

00:20:37,610 --> 00:20:44,210
specify unsafe inline any script that is

00:20:41,389 --> 00:20:46,460
in line or any style it's inline will be

00:20:44,210 --> 00:20:50,029
said no because it's not being loaded as

00:20:46,460 --> 00:20:52,370
a remote resource from self so we could

00:20:50,029 --> 00:20:58,279
specify in our script source unsafe

00:20:52,370 --> 00:21:01,250
inline that would be bad because we

00:20:58,279 --> 00:21:03,409
don't want and say in fact it's got the

00:21:01,250 --> 00:21:05,269
word unsafe in unsafe there but it gives

00:21:03,409 --> 00:21:06,350
you a hint this is bad but this

00:21:05,269 --> 00:21:08,240
basically means we're going to load

00:21:06,350 --> 00:21:12,649
scripts and say anything that's on the

00:21:08,240 --> 00:21:15,500
page arbitrarily just letting obviously

00:21:12,649 --> 00:21:16,850
if somebody can get a inline script on

00:21:15,500 --> 00:21:20,240
the page maybe they've managed to get

00:21:16,850 --> 00:21:22,940
any injection on into your posts into a

00:21:20,240 --> 00:21:23,570
post that will just process we don't

00:21:22,940 --> 00:21:28,220
want that

00:21:23,570 --> 00:21:32,350
no we can use either Knox absolute our

00:21:28,220 --> 00:21:35,500
man random not and then we can say ok

00:21:32,350 --> 00:21:38,740
for this knots here my rendering

00:21:35,500 --> 00:21:41,389
anything there's got that nonce as well

00:21:38,740 --> 00:21:44,059
we'll let that run but we won't let it

00:21:41,389 --> 00:21:46,279
run unless that's their sirisha specify

00:21:44,059 --> 00:21:49,610
these notice that really that makes life

00:21:46,279 --> 00:21:51,380
so much simpler so then we can say

00:21:49,610 --> 00:21:53,240
actually you can specify even that

00:21:51,380 --> 00:21:55,190
remote script so my trusty description

00:21:53,240 --> 00:21:57,590
it's got a nonce so we can specify for

00:21:55,190 --> 00:21:58,940
whether it's in line or Excel it's got

00:21:57,590 --> 00:22:01,389
the nonce if you haven't gotten on we're

00:21:58,940 --> 00:22:01,389
not going to load

00:22:03,400 --> 00:22:09,020
you see Nazis only work if they randomly

00:22:07,220 --> 00:22:10,670
generated on each page load and that

00:22:09,020 --> 00:22:15,380
they're actually random and that we

00:22:10,670 --> 00:22:17,540
kidnap used once hence the name if we

00:22:15,380 --> 00:22:21,020
cash the page we've captured the

00:22:17,540 --> 00:22:23,330
nonsense now we can't break out to the

00:22:21,020 --> 00:22:26,960
caching well then we've broken out of

00:22:23,330 --> 00:22:29,240
our caching suddenly if you want to have

00:22:26,960 --> 00:22:31,640
a high-performance site and you want to

00:22:29,240 --> 00:22:33,320
use monsters you won't have to lose just

00:22:31,640 --> 00:22:35,710
a month Aspen's and security or you have

00:22:33,320 --> 00:22:42,310
to lose sense with performance or

00:22:35,710 --> 00:22:42,310
pounding down these I perform at all so

00:22:43,420 --> 00:22:48,110
instead of using a nonce

00:22:45,470 --> 00:22:50,900
well it's hash the results so if we go

00:22:48,110 --> 00:22:52,850
back here we've got our scripts we put

00:22:50,900 --> 00:22:56,810
we go to our script and we actually put

00:22:52,850 --> 00:22:59,810
make a hash so sha-256 hash of the whole

00:22:56,810 --> 00:23:02,180
content that's everything from this

00:22:59,810 --> 00:23:03,920
point here to this point here we hash

00:23:02,180 --> 00:23:06,110
that we hash that everything all the

00:23:03,920 --> 00:23:07,700
content inside of it and then we can

00:23:06,110 --> 00:23:11,180
specify back in our content security

00:23:07,700 --> 00:23:12,440
policy so now there is obviously a

00:23:11,180 --> 00:23:15,470
miniscule chance

00:23:12,440 --> 00:23:19,280
two identical blocks of code could have

00:23:15,470 --> 00:23:21,950
the same hash but if that happens to you

00:23:19,280 --> 00:23:23,540
run to the nearest place by a single

00:23:21,950 --> 00:23:28,280
lottery to get in them by your airline

00:23:23,540 --> 00:23:30,470
ticket because you've won there's no so

00:23:28,280 --> 00:23:32,360
but I'm home this is a pretty safe way

00:23:30,470 --> 00:23:35,390
of putting in that now we just need to

00:23:32,360 --> 00:23:38,240
hash each time great because code never

00:23:35,390 --> 00:23:39,980
changes we never put out new builds and

00:23:38,240 --> 00:23:41,660
stuff so this should work 100% of the

00:23:39,980 --> 00:23:43,640
time very efficiently actually for

00:23:41,660 --> 00:23:47,120
static sites or sites very rarely

00:23:43,640 --> 00:23:48,680
changing this is quite a consistent if

00:23:47,120 --> 00:23:50,240
you've got anything that's going to be

00:23:48,680 --> 00:23:51,590
dynamic and changing regularly you're

00:23:50,240 --> 00:23:52,910
gonna have something about build scripts

00:23:51,590 --> 00:23:57,160
and how you want to modify your build

00:23:52,910 --> 00:24:00,200
scripts to generate out sha-256 hashes

00:23:57,160 --> 00:24:03,180
are you going to me

00:24:00,200 --> 00:24:04,740
seriously you think if you have to play

00:24:03,180 --> 00:24:06,150
with caching and you think that's pretty

00:24:04,740 --> 00:24:08,970
you can never try to check selling

00:24:06,150 --> 00:24:10,830
something because it's amazing you think

00:24:08,970 --> 00:24:13,410
the whole point of a checksum is they

00:24:10,830 --> 00:24:16,260
should be identical there is no way that

00:24:13,410 --> 00:24:19,170
that checksum could possibly change yep

00:24:16,260 --> 00:24:20,700
they do on all sorts of things whether

00:24:19,170 --> 00:24:22,050
you use the Windows machine to do the

00:24:20,700 --> 00:24:24,660
checksum where do you use the Linux

00:24:22,050 --> 00:24:26,010
machine to use the checksum can make a

00:24:24,660 --> 00:24:28,440
difference to what the result of the

00:24:26,010 --> 00:24:31,320
checksum is depending on my name use all

00:24:28,440 --> 00:24:32,790
sorts of fun in games you can have check

00:24:31,320 --> 00:24:35,340
some of these never as easily it comes

00:24:32,790 --> 00:24:36,560
across which leads us on to something

00:24:35,340 --> 00:24:39,170
else

00:24:36,560 --> 00:24:42,270
that's all right cell resource integrity

00:24:39,170 --> 00:24:44,460
this is basically hashing again but

00:24:42,270 --> 00:24:47,340
instead of putting the hash in the

00:24:44,460 --> 00:24:49,530
header we can actually specify integrity

00:24:47,340 --> 00:24:51,210
here is this so now we can say hey this

00:24:49,530 --> 00:24:54,300
this scripts which is a remote script I

00:24:51,210 --> 00:24:56,550
know about this script I know the hash

00:24:54,300 --> 00:24:58,050
for the script and usually only load is

00:24:56,550 --> 00:24:59,580
this script a key you don't use you use

00:24:58,050 --> 00:25:03,810
a secured a header for this few years on

00:24:59,580 --> 00:25:05,280
a trip now so we can say I know about my

00:25:03,810 --> 00:25:07,610
scripts and I know what the hash is

00:25:05,280 --> 00:25:07,610
going to be

00:25:08,290 --> 00:25:17,920
now we can also then specify in our CSV

00:25:13,050 --> 00:25:20,830
you must have an SR i4 script and style

00:25:17,920 --> 00:25:24,010
so every moment of every script that is

00:25:20,830 --> 00:25:26,290
loaded every style those sheets is

00:25:24,010 --> 00:25:29,650
loaded every inline script that is done

00:25:26,290 --> 00:25:34,060
every inline style is done must have an

00:25:29,650 --> 00:25:37,060
SR I brilliant this is a really good

00:25:34,060 --> 00:25:39,520
world because now you cannot change

00:25:37,060 --> 00:25:42,010
anything on my side without there being

00:25:39,520 --> 00:25:43,390
an SRO and you have to generate an SR I

00:25:42,010 --> 00:25:45,400
if you won't hack me

00:25:43,390 --> 00:25:46,990
hackers don't tend to go around I must

00:25:45,400 --> 00:25:49,240
have some integrity check just to be on

00:25:46,990 --> 00:25:52,150
the safe side into the system it happens

00:25:49,240 --> 00:25:55,870
though but we can also make sure that we

00:25:52,150 --> 00:25:59,250
use the same hashes in our CSP to saying

00:25:55,870 --> 00:25:59,250
I've learned me though these hazards

00:26:00,480 --> 00:26:09,120
really it's wonderful isn't it it's not

00:26:06,030 --> 00:26:11,930
it should be it should be a lovely

00:26:09,120 --> 00:26:17,520
future up until you realize that you

00:26:11,930 --> 00:26:20,640
load Google Analytics because who misses

00:26:17,520 --> 00:26:25,860
you can do an integrity check on that

00:26:20,640 --> 00:26:28,770
particular file is we it's controlled by

00:26:25,860 --> 00:26:30,890
somebody else it will change its dynamic

00:26:28,770 --> 00:26:34,080
in its nature it changes on very page

00:26:30,890 --> 00:26:37,880
JavaScript they deliver back didn't just

00:26:34,080 --> 00:26:41,490
to be more fun you remember when we said

00:26:37,880 --> 00:26:44,130
require us our eyes rips that includes

00:26:41,490 --> 00:26:45,690
scripts that scripts like which means we

00:26:44,130 --> 00:26:47,670
basically happy they didn't know all the

00:26:45,690 --> 00:26:49,980
SSRIs and habits our eyes set up but

00:26:47,670 --> 00:26:53,910
every single page script that Google

00:26:49,980 --> 00:26:56,070
Analytics loads or YouTube banners they

00:26:53,910 --> 00:26:57,930
load a lot of extra scripts who lots of

00:26:56,070 --> 00:26:59,880
extras I mean just right this ESP policy

00:26:57,930 --> 00:27:03,090
people to manage to get you to balloon

00:26:59,880 --> 00:27:08,720
problem is masses of extra commands in

00:27:03,090 --> 00:27:12,240
there if you have a small static site

00:27:08,720 --> 00:27:15,360
using SRA works really well if you have

00:27:12,240 --> 00:27:19,230
a site that is on the front end is very

00:27:15,360 --> 00:27:23,850
likely trying to build early even just a

00:27:19,230 --> 00:27:26,520
basic CSP for WordPress admin areas that

00:27:23,850 --> 00:27:31,070
you don't try not to use the words

00:27:26,520 --> 00:27:33,930
unsafe in line is the nigh on impossible

00:27:31,070 --> 00:27:35,460
because every single plug-in loads in

00:27:33,930 --> 00:27:37,320
and some of them will in q3 that's

00:27:35,460 --> 00:27:44,040
beautifully cut we can grab anything

00:27:37,320 --> 00:27:45,600
humanly flat they do a neat line action

00:27:44,040 --> 00:27:48,420
we might be able to find the action hook

00:27:45,600 --> 00:27:51,270
and find it we can buffer the output and

00:27:48,420 --> 00:27:51,690
hash all of that but then we might have

00:27:51,270 --> 00:27:56,010
just

00:27:51,690 --> 00:27:57,930
buffered the bad stuff as well we don't

00:27:56,010 --> 00:28:00,690
have any standardized way for just

00:27:57,930 --> 00:28:01,920
adding styles on the admin area that is

00:28:00,690 --> 00:28:05,580
used

00:28:01,920 --> 00:28:07,020
we have hooks and options but at the end

00:28:05,580 --> 00:28:09,050
of the day someone will go yeah but I'm

00:28:07,020 --> 00:28:11,040
just gonna step my scripts in the footer

00:28:09,050 --> 00:28:12,300
we have no way of grabbing that

00:28:11,040 --> 00:28:15,660
information and knowing which ones that

00:28:12,300 --> 00:28:16,160
legitimate ones arms if anybody has

00:28:15,660 --> 00:28:19,040
success

00:28:16,160 --> 00:28:23,240
managed to create a CSP that is actually

00:28:19,040 --> 00:28:24,680
not baby safely in the admin area I'd

00:28:23,240 --> 00:28:26,150
love to talk to you because I've been

00:28:24,680 --> 00:28:28,850
trying for about two years to come up

00:28:26,150 --> 00:28:30,650
with various ways to do this and barring

00:28:28,850 --> 00:28:33,710
be incredibly selecting with my plugins

00:28:30,650 --> 00:28:35,690
choice which is how I succeed so I can

00:28:33,710 --> 00:28:38,060
do it from my own personal site that's

00:28:35,690 --> 00:28:39,500
fairly easy but then I only have half a

00:28:38,060 --> 00:28:40,910
dozen plugins and life wrote most of

00:28:39,500 --> 00:28:43,280
them and I know what's being cubed an

00:28:40,910 --> 00:28:45,770
icon for each page carefully decided

00:28:43,280 --> 00:28:50,630
this isn't a good space and I'm very

00:28:45,770 --> 00:28:55,660
passionate if your clients and they have

00:28:50,630 --> 00:28:55,660
a tendency to go I know I'm over there

00:28:56,230 --> 00:28:59,030
and changing everything then you are

00:28:58,760 --> 00:29:01,070
screwed

00:28:59,030 --> 00:29:04,820
no your admin area always never you know

00:29:01,070 --> 00:29:08,240
nice date but you can work on this stuff

00:29:04,820 --> 00:29:10,070
on the front and so as much as see ESPYs

00:29:08,240 --> 00:29:12,710
are really designed for both ends of the

00:29:10,070 --> 00:29:14,690
site using a CSP using all of these

00:29:12,710 --> 00:29:18,440
headers they're here to protect your

00:29:14,690 --> 00:29:20,540
users in many ways they are here to

00:29:18,440 --> 00:29:23,780
provide the protection for your users

00:29:20,540 --> 00:29:25,670
not for you because if you need to

00:29:23,780 --> 00:29:29,570
trigger a bunch of this stuff you've

00:29:25,670 --> 00:29:32,210
probably been hacked that's probably bad

00:29:29,570 --> 00:29:33,740
for you now we're trying to prevent

00:29:32,210 --> 00:29:35,570
malware beings predator we're trying to

00:29:33,740 --> 00:29:37,970
prevent people using your site for

00:29:35,570 --> 00:29:39,680
detoxing other things so this is all

00:29:37,970 --> 00:29:42,710
about protecting your users and our subs

00:29:39,680 --> 00:29:45,650
the front end is a good place to go how

00:29:42,710 --> 00:29:47,600
would I be the VA has been solved well

00:29:45,650 --> 00:29:49,700
if they had a content security policy

00:29:47,600 --> 00:29:51,410
that just specified which domains they

00:29:49,700 --> 00:29:53,630
were going to use and just set it to

00:29:51,410 --> 00:29:55,820
themselves and a couple of trusted

00:29:53,630 --> 00:29:57,890
partners that would have blocked it they

00:29:55,820 --> 00:29:59,510
use that awry that would have worked

00:29:57,890 --> 00:30:02,500
better ways they just use any form of

00:29:59,510 --> 00:30:08,740
caching on that value it's interesting

00:30:02,500 --> 00:30:08,740
yeah now have a CSP policy in place

00:30:10,039 --> 00:30:16,460
well they have one that improvements

00:30:16,730 --> 00:30:21,149
there's just one more header this is a

00:30:18,960 --> 00:30:23,100
headers are being added all the time but

00:30:21,149 --> 00:30:24,419
this is a really cool head of a German

00:30:23,100 --> 00:30:26,129
implements almost like that by working

00:30:24,419 --> 00:30:30,570
and that's speech policy you can

00:30:26,129 --> 00:30:32,820
actually say hey browser I am I like you

00:30:30,570 --> 00:30:35,490
to specify that is you don't need to use

00:30:32,820 --> 00:30:38,519
the accelerometer today I don't need to

00:30:35,490 --> 00:30:41,519
make payments I don't need to use the

00:30:38,519 --> 00:30:44,009
gyroscope I'm not a nice to your to your

00:30:41,519 --> 00:30:47,070
location and any of that in fact I don't

00:30:44,009 --> 00:30:48,809
want to use the USB I just want to just

00:30:47,070 --> 00:30:50,669
be left aligned and you say you can

00:30:48,809 --> 00:30:55,399
specify which features should be on and

00:30:50,669 --> 00:30:59,210
off this is actually is really because

00:30:55,399 --> 00:31:01,409
things like push notifications and

00:30:59,210 --> 00:31:02,850
penguins and all these interesting

00:31:01,409 --> 00:31:05,340
little things that you can trigger to

00:31:02,850 --> 00:31:06,539
get the site start using we can turn off

00:31:05,340 --> 00:31:09,389
and make sure that they're just not

00:31:06,539 --> 00:31:11,249
going to be able used in any way it also

00:31:09,389 --> 00:31:13,440
stops your developers from if you're

00:31:11,249 --> 00:31:15,509
this happening and you really don't want

00:31:13,440 --> 00:31:17,759
them to put up little things that says

00:31:15,509 --> 00:31:19,110
please share our location because you

00:31:17,759 --> 00:31:20,759
just hate them when you think that the

00:31:19,110 --> 00:31:22,499
UX designer doesn't understand it yet

00:31:20,759 --> 00:31:24,299
you just turn it off prevent them

00:31:22,499 --> 00:31:28,889
forever accessing it and then claim you

00:31:24,299 --> 00:31:30,480
don't understand how it's not working if

00:31:28,889 --> 00:31:33,179
you want to go check out how your site's

00:31:30,480 --> 00:31:36,029
doing currently you can get headers comp

00:31:33,179 --> 00:31:38,100
and you can put in your scan click there

00:31:36,029 --> 00:31:39,809
put in stamp it will bring back all the

00:31:38,100 --> 00:31:44,730
information it will also link to how to

00:31:39,809 --> 00:31:47,879
implement them in various ways before

00:31:44,730 --> 00:31:51,149
alright which I'm all he talks about and

00:31:47,879 --> 00:31:53,450
observe the treetop mozilla.org which is

00:31:51,149 --> 00:31:56,779
basically the same thing again but

00:31:53,450 --> 00:31:56,779
through Mozilla

00:31:57,580 --> 00:32:30,430
I told you this wasn't scary how you do

00:32:23,380 --> 00:32:31,240
so problem if you can't so what can you

00:32:30,430 --> 00:32:35,020
do

00:32:31,240 --> 00:32:35,410
okay so you can't eat for cashing we go

00:32:35,020 --> 00:32:42,910
back

00:32:35,410 --> 00:32:48,070
so using Knox's yeah yeah so to get

00:32:42,910 --> 00:32:49,570
around that we hash the actual contents

00:32:48,070 --> 00:32:52,750
itself so we've got the hash which we

00:32:49,570 --> 00:32:54,490
know doesn't change and we just we put

00:32:52,750 --> 00:32:55,810
the hash for each one in there so we

00:32:54,490 --> 00:32:58,360
wouldn't have just point out we'd have

00:32:55,810 --> 00:32:59,890
we have ten scripts running we'd have

00:32:58,360 --> 00:33:03,610
ten hashes inside our box

00:32:59,890 --> 00:33:16,960
so so you're built with will have to

00:33:03,610 --> 00:33:24,430
generate those hashes yeah waiting but I

00:33:16,960 --> 00:33:29,260
you'll notice that in life but it is for

00:33:24,430 --> 00:33:31,900
style not but that also gives you an

00:33:29,260 --> 00:33:34,210
idea of just how many various Twitter's

00:33:31,900 --> 00:33:38,980
within YouTube video you'll find lots of

00:33:34,210 --> 00:33:42,420
that Whipple to load YouTube you need it

00:33:38,980 --> 00:33:46,660
to be in your image your source your

00:33:42,420 --> 00:33:48,880
frame source your media source and

00:33:46,660 --> 00:33:50,770
actually to get it working with some of

00:33:48,880 --> 00:33:54,160
the older browsers you've also needed

00:33:50,770 --> 00:33:56,470
embed source not just YouTube you also

00:33:54,160 --> 00:33:58,530
need UI whatever it is accounting them

00:33:56,470 --> 00:34:01,720
or they there's sub ones for that is

00:33:58,530 --> 00:34:05,550
it's a pain use video press they they

00:34:01,720 --> 00:34:05,550
only only need in one line

00:34:06,560 --> 00:34:10,260
PSO you use an S alright you have been

00:34:08,940 --> 00:34:20,250
to have to generate that your builds

00:34:10,260 --> 00:34:23,280
greater anybody else is that limited to

00:34:20,250 --> 00:34:25,590
just the website or any plugins that use

00:34:23,280 --> 00:34:27,570
external resources know if they use

00:34:25,590 --> 00:34:29,159
external resources if it's lonely this

00:34:27,570 --> 00:34:31,950
little resource is being alerted by the

00:34:29,159 --> 00:34:34,050
browser that it considers not self okay

00:34:31,950 --> 00:34:36,480
if the website was making a cool request

00:34:34,050 --> 00:34:38,010
and then returning it itself that would

00:34:36,480 --> 00:34:39,210
have constant self so one of the options

00:34:38,010 --> 00:34:40,830
for getting around some of the stuff

00:34:39,210 --> 00:34:43,169
with Google Analytics for example in

00:34:40,830 --> 00:34:45,090
fact quite a lot of people who like to

00:34:43,169 --> 00:34:46,860
get a hundred percent on Google

00:34:45,090 --> 00:34:49,110
PageSpeed they like proxy in Google

00:34:46,860 --> 00:34:51,750
Analytics that additional analytics

00:34:49,110 --> 00:34:54,270
sauce if it was proxy would be itself

00:34:51,750 --> 00:35:12,630
but if you were just doing a good one in

00:34:54,270 --> 00:35:14,220
the 60s okay well let's do that one and

00:35:12,630 --> 00:35:20,280
then doing Tom Cruise laid out going to

00:35:14,220 --> 00:35:24,860
do a comments wrong with my question you

00:35:20,280 --> 00:35:28,860
mentioned that new headers yes who is it

00:35:24,860 --> 00:35:31,470
Frances browser so a combination the

00:35:28,860 --> 00:35:34,560
impose that community is at all and

00:35:31,470 --> 00:35:37,800
there are mechanisms to allow them to

00:35:34,560 --> 00:35:40,050
communicate with other companies and but

00:35:37,800 --> 00:35:42,210
yeah it's the browser zoom and like just

00:35:40,050 --> 00:35:43,590
like anything to do with browsers some

00:35:42,210 --> 00:35:45,300
browsers implement stuff quicker than

00:35:43,590 --> 00:35:48,120
others and some done implement step at

00:35:45,300 --> 00:35:50,760
all so there is a little bit of can I

00:35:48,120 --> 00:35:54,090
use this spell setup in fact you every

00:35:50,760 --> 00:35:57,060
use can I use anything to doing

00:35:54,090 --> 00:36:00,390
JavaScript and CSS and stuff most of the

00:35:57,060 --> 00:36:01,930
security is all wrong they're actually

00:36:00,390 --> 00:36:08,050
planning on separating yes

00:36:01,930 --> 00:36:12,099
a section on that so hopefully Berks

00:36:08,050 --> 00:36:16,780
browser so CSP is every major browsers

00:36:12,099 --> 00:36:18,400
Awards with the only the only one that's

00:36:16,780 --> 00:36:24,819
not supported by every major browser but

00:36:18,400 --> 00:36:27,480
I've shown you today is policy which but

00:36:24,819 --> 00:36:30,430
it might be in Safari as well

00:36:27,480 --> 00:36:32,470
surprisingly Safari are pretty good at

00:36:30,430 --> 00:36:40,180
implementing security campus which is

00:36:32,470 --> 00:36:44,170
weird told you have a question on where

00:36:40,180 --> 00:36:47,650
people have long as stated so I think

00:36:44,170 --> 00:36:50,260
China a while ago I found skinheads calm

00:36:47,650 --> 00:36:52,180
I tried setting up my own content policy

00:36:50,260 --> 00:36:54,040
I don't know if you had as I wasn't

00:36:52,180 --> 00:36:56,140
aware of that but there was he talked

00:36:54,040 --> 00:37:01,270
about one thing in line I tried to

00:36:56,140 --> 00:37:03,490
eliminate on say eval I think it is and

00:37:01,270 --> 00:37:05,440
ended up breaking half WTF in the media

00:37:03,490 --> 00:37:08,049
manager wouldn't work yes wouldn't work

00:37:05,440 --> 00:37:11,520
do we know anything workarounds that's

00:37:08,049 --> 00:37:16,270
trying to change the faces yes so

00:37:11,520 --> 00:37:19,230
managed to get after about a year and a

00:37:16,270 --> 00:37:22,859
half of swearing I did manage to get

00:37:19,230 --> 00:37:26,170
most of the media so media stuff working

00:37:22,859 --> 00:37:29,980
anything that isn't cubed properly

00:37:26,170 --> 00:37:31,960
include using workers hooks is fairly

00:37:29,980 --> 00:37:34,329
easy to do because we now know what

00:37:31,960 --> 00:37:37,510
we're getting in the payload and so we

00:37:34,329 --> 00:37:42,460
can create a hash for that and we can

00:37:37,510 --> 00:37:46,140
normally modify the ad where it falls

00:37:42,460 --> 00:37:48,780
down the moment of plug-in gets involved

00:37:46,140 --> 00:37:52,359
you're a fighting for control over who

00:37:48,780 --> 00:37:54,549
who's it modifying that action first but

00:37:52,359 --> 00:37:56,319
also you end up in a scenario where you

00:37:54,549 --> 00:37:58,299
don't know what that cons it should be

00:37:56,319 --> 00:38:00,869
or shouldn't be so you know you have to

00:37:58,299 --> 00:38:03,640
treat it an untrusted and that's where

00:38:00,869 --> 00:38:05,530
so it is possible to it from Mosul to me

00:38:03,640 --> 00:38:09,309
a couple of places I couldn't get it to

00:38:05,530 --> 00:38:10,300
work properly because in book you just

00:38:09,309 --> 00:38:14,500
can't get into word

00:38:10,300 --> 00:38:15,730
but that's that's not go back oh yeah it

00:38:14,500 --> 00:38:17,650
could have only targets work just

00:38:15,730 --> 00:38:19,240
because nature of Howard wasn't bird

00:38:17,650 --> 00:38:21,190
works I probably could if I spend in the

00:38:19,240 --> 00:38:23,950
next two years trying to do it

00:38:21,190 --> 00:38:26,320
I haven't haven't ever working with me

00:38:23,950 --> 00:38:28,450
on with the classic editor 11:00 fin set

00:38:26,320 --> 00:38:31,840
up with media working

00:38:28,450 --> 00:38:32,920
oddly enough the dashboard itself has a

00:38:31,840 --> 00:38:35,620
bunch of scripts that are adequately

00:38:32,920 --> 00:38:39,640
aren't in queue properly and they just

00:38:35,620 --> 00:38:42,550
generate in the foot just reasons and

00:38:39,640 --> 00:38:45,820
the assessments page again has some save

00:38:42,550 --> 00:38:47,560
bits that aren't improperly just and

00:38:45,820 --> 00:38:48,580
once anything's not being you probably

00:38:47,560 --> 00:38:53,590
it's basically where you're gonna fall

00:38:48,580 --> 00:38:55,210
down there isn't any particular will

00:38:53,590 --> 00:38:57,450
amongst people as far as I'm aware to

00:38:55,210 --> 00:39:00,700
try and make this better over

00:38:57,450 --> 00:39:03,310
that's shame but because it is quick

00:39:00,700 --> 00:39:04,780
wins but the problem with that is a

00:39:03,310 --> 00:39:07,000
quick windy for the world WordPress core

00:39:04,780 --> 00:39:09,790
but as we can't actually set this to

00:39:07,000 --> 00:39:11,230
enforce because no we'd have to get

00:39:09,790 --> 00:39:14,920
every single plug-in to do this as well

00:39:11,230 --> 00:39:16,360
it becomes an academic issue really

00:39:14,920 --> 00:39:18,100
because until we can work out we're

00:39:16,360 --> 00:39:20,470
making for enforcing that for plugins

00:39:18,100 --> 00:39:23,460
and even if we could get these one for

00:39:20,470 --> 00:39:26,020
both plugins we might be then

00:39:23,460 --> 00:39:27,610
whitelisting scripts that we definitely

00:39:26,020 --> 00:39:29,170
don't want to wait this anyway because

00:39:27,610 --> 00:39:32,440
the plug-in that's been hacked and eat

00:39:29,170 --> 00:39:36,040
if we automate the ability to whitelist

00:39:32,440 --> 00:39:38,530
things it won't take too long before

00:39:36,040 --> 00:39:41,050
some other bad acts it goes out oh I

00:39:38,530 --> 00:39:45,610
just think you must go properly then job

00:39:41,050 --> 00:39:49,220
done so this isn't the wrote east of

00:39:45,610 --> 00:39:50,750
talks but it's a better than normal

00:39:49,220 --> 00:40:00,859
well that was an excellent talk there's

00:39:50,750 --> 00:40:03,140
so much you have questions I am around

00:40:00,859 --> 00:40:04,339
for the rest of the weekend please do

00:40:03,140 --> 00:40:05,569
come on a freshman if you just want to

00:40:04,339 --> 00:40:07,670
come and chat about sketchy stuff and

00:40:05,569 --> 00:40:11,319
things do come and talk to me I always

00:40:07,670 --> 00:40:11,319

YouTube URL: https://www.youtube.com/watch?v=v7XBk-IP4XA


