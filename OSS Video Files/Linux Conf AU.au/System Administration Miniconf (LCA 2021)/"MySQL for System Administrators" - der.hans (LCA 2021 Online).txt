Title: "MySQL for System Administrators" - der.hans (LCA 2021 Online)
Publication date: 2021-02-18
Playlist: System Administration Miniconf (LCA 2021)
Description: 
	der.hans

https://lca2021.linux.org.au/schedule/presentation/85/

System administrators often need to help maintain MySQL instances. Sometimes they have databases with little or no DBA support. Learn some basic skills for maintaining MySQL databases. The same skills will help balance roles between sysadmin and DBA.

MySQL is ubiquitous and will be for many years. A little knowledge will go a long way to having a good MySQL setup. Sysadmins can leverage their command line skills when interacting with MySQL.

The presentation will cover *NIX and MySQL changes for good practices. Those skills will help sysadmins use and administer MySQL without needing to become a DBA.

Topics:
  
* leveraging shell skills for MySQL
* shell environment for MySQL
* authentication
* custom MySQL prompts
* MySQL backups and restorals
* choosing a database engine
* MySQL logs
* monitoring

linux.conf.au is a conference about the Linux operating system, and all aspects of the thriving ecosystem of Free and Open Source Software that has grown up around it. Run since 1999, in a different Australian or New Zealand city each year, by a team of local volunteers, LCA invites more than 500 people to learn from the people who shape the future of Open Source. For more information on the conference see https://linux.conf.au/

Produced by NDV: https://youtube.com/channel/UCQ7dFBzZGlBvtU2hCecsBBg?sub_confirmation=1

#linux.conf.au #linux #foss #opensource

Sat Jan 23 12:10:00 2021 at Blemings Labs
Captions: 
	00:00:10,820 --> 00:00:14,060
[Music]

00:00:15,360 --> 00:00:20,560
administration mini conf

00:00:17,039 --> 00:00:22,560
um for our fourth presentation in this

00:00:20,560 --> 00:00:24,160
morning session if you're in our time

00:00:22,560 --> 00:00:26,480
zone or afternoon or

00:00:24,160 --> 00:00:27,680
evening session and we have dirhams

00:00:26,480 --> 00:00:30,320
talking to us

00:00:27,680 --> 00:00:30,880
about what system administrators need to

00:00:30,320 --> 00:00:34,160
know about

00:00:30,880 --> 00:00:36,719
mysql over to you your hands

00:00:34,160 --> 00:00:38,800
all right thank you very much thanks to

00:00:36,719 --> 00:00:39,280
everybody for uh showing up for lca this

00:00:38,800 --> 00:00:41,040
year

00:00:39,280 --> 00:00:43,200
and thanks especially to the organizers

00:00:41,040 --> 00:00:45,680
who are doing a lot of work to put this

00:00:43,200 --> 00:00:48,320
on and make this available for us

00:00:45,680 --> 00:00:49,440
i have been a system administrator for

00:00:48,320 --> 00:00:50,960
just a few years

00:00:49,440 --> 00:00:52,719
i've done a lot of other things as well

00:00:50,960 --> 00:00:54,719
but always kind of from a system and

00:00:52,719 --> 00:00:56,239
administrator's perspective

00:00:54,719 --> 00:00:58,399
currently working as a customer data

00:00:56,239 --> 00:01:00,480
engineer working with databases

00:00:58,399 --> 00:01:02,239
but again i'm looking at as a lot as a

00:01:00,480 --> 00:01:03,440
system in and trying to do automation

00:01:02,239 --> 00:01:06,320
and things like that

00:01:03,440 --> 00:01:08,400
uh and i have previously been a mysql

00:01:06,320 --> 00:01:11,520
dba

00:01:08,400 --> 00:01:13,119
and whoops wrong advice so i usually

00:01:11,520 --> 00:01:14,479
have some upcoming presentations

00:01:13,119 --> 00:01:15,920
here's some ways to get a hold of me

00:01:14,479 --> 00:01:16,880
i'll try to remember to come back to

00:01:15,920 --> 00:01:18,880
this later on

00:01:16,880 --> 00:01:20,320
or you can ask and chat and get a hold

00:01:18,880 --> 00:01:22,400
of me

00:01:20,320 --> 00:01:24,799
all right so one of the things with

00:01:22,400 --> 00:01:26,640
mysql is it starts with a default prompt

00:01:24,799 --> 00:01:27,759
that just says mysql

00:01:26,640 --> 00:01:29,759
doesn't tell you where you are what

00:01:27,759 --> 00:01:30,880
you're doing and for system

00:01:29,759 --> 00:01:32,079
administrators we're on different

00:01:30,880 --> 00:01:33,360
systems all the time

00:01:32,079 --> 00:01:36,240
it's really handy to be able to know

00:01:33,360 --> 00:01:38,479
that we we're used to that in our shell

00:01:36,240 --> 00:01:40,479
and this is just really monotonous for

00:01:38,479 --> 00:01:42,560
us just a lot of the same so

00:01:40,479 --> 00:01:44,079
we have a way of fixing that though we

00:01:42,560 --> 00:01:47,520
can set mysql

00:01:44,079 --> 00:01:50,320
under one similar to how we use

00:01:47,520 --> 00:01:51,759
at the shell and here are a couple of

00:01:50,320 --> 00:01:53,759
things for that

00:01:51,759 --> 00:01:55,200
um so we can set user hosts and what

00:01:53,759 --> 00:01:57,119
database you're talking to

00:01:55,200 --> 00:01:58,960
the second example i have there is just

00:01:57,119 --> 00:02:01,280
showing using shell expansion

00:01:58,960 --> 00:02:02,000
to go through i had a place i worked at

00:02:01,280 --> 00:02:04,640
that

00:02:02,000 --> 00:02:05,759
um you had this machines and data

00:02:04,640 --> 00:02:07,759
centers all over the world

00:02:05,759 --> 00:02:09,599
know which one you were on and this is

00:02:07,759 --> 00:02:12,879
what i was using to tell me which pop

00:02:09,599 --> 00:02:14,879
so which was i in sydney was i in san

00:02:12,879 --> 00:02:19,520
jose was i in in hong kong

00:02:14,879 --> 00:02:22,959
uh this was a way for me to to see that

00:02:19,520 --> 00:02:26,720
uh and then now uh on these examples

00:02:22,959 --> 00:02:28,000
i can see that not only i'm in this case

00:02:26,720 --> 00:02:29,040
it's all root but i can see which

00:02:28,000 --> 00:02:30,720
machine i'm in

00:02:29,040 --> 00:02:33,599
and which database i'm talking to is the

00:02:30,720 --> 00:02:35,120
first example i'm on the lca machine

00:02:33,599 --> 00:02:37,440
and i'm not in a database yet i haven't

00:02:35,120 --> 00:02:38,959
done uses uh so i have

00:02:37,440 --> 00:02:40,959
on the second one i'm on the sonic tools

00:02:38,959 --> 00:02:44,800
machine i'm in the 13th database

00:02:40,959 --> 00:02:46,879
uh and then finally on myscroll.mel

00:02:44,800 --> 00:02:48,080
and i'm in the lca database so by

00:02:46,879 --> 00:02:50,239
changing that prompt it gives me a

00:02:48,080 --> 00:02:51,360
chance to see where i'm at it's kind of

00:02:50,239 --> 00:02:53,440
really important when you're

00:02:51,360 --> 00:02:55,120
you're shutting down uh dev to do

00:02:53,440 --> 00:02:56,879
something it kind of

00:02:55,120 --> 00:02:58,319
sucks to find out oops that was prod

00:02:56,879 --> 00:03:01,040
right or you're in the wrong

00:02:58,319 --> 00:03:01,680
wrong time zone and so forth um so i

00:03:01,040 --> 00:03:03,840
think this is

00:03:01,680 --> 00:03:05,680
for system in perspective like you say

00:03:03,840 --> 00:03:08,879
we're in and out of stuff all the time

00:03:05,680 --> 00:03:09,440
it's handy to have that um but that's

00:03:08,879 --> 00:03:11,840
cluster

00:03:09,440 --> 00:03:13,760
ssh hitting three boxes in parallel you

00:03:11,840 --> 00:03:14,480
still need two passwords in order to get

00:03:13,760 --> 00:03:17,840
in

00:03:14,480 --> 00:03:20,000
um through normal to setup but we know

00:03:17,840 --> 00:03:23,120
how to fix that we're system ins so i'll

00:03:20,000 --> 00:03:24,400
let the the open ss or the ssh to you uh

00:03:23,120 --> 00:03:25,120
because we're that's something we use

00:03:24,400 --> 00:03:28,400
all the time

00:03:25,120 --> 00:03:30,560
let's talk about mysql authentication

00:03:28,400 --> 00:03:32,879
now mysql from the command line you can

00:03:30,560 --> 00:03:34,560
give it a username and a password

00:03:32,879 --> 00:03:36,400
but the problem is if the password is on

00:03:34,560 --> 00:03:37,280
the command line it can show up in your

00:03:36,400 --> 00:03:39,120
process list

00:03:37,280 --> 00:03:41,200
it can show up in your shell history i

00:03:39,120 --> 00:03:41,840
can show up in the mysql history file as

00:03:41,200 --> 00:03:44,000
well

00:03:41,840 --> 00:03:45,040
and you've got a chance of copying and

00:03:44,000 --> 00:03:47,040
pasting it so if you're

00:03:45,040 --> 00:03:48,879
working with customer tickets or working

00:03:47,040 --> 00:03:49,680
with dev right you don't want to give

00:03:48,879 --> 00:03:51,120
dev

00:03:49,680 --> 00:03:53,599
the root password for your mysql

00:03:51,120 --> 00:03:55,519
instance um so we don't want to have

00:03:53,599 --> 00:03:55,920
that on the command line and have a risk

00:03:55,519 --> 00:03:59,360
of

00:03:55,920 --> 00:04:01,360
accidentally copying and pasting that

00:03:59,360 --> 00:04:02,879
um what we can do is just leave the

00:04:01,360 --> 00:04:06,080
password off and then

00:04:02,879 --> 00:04:08,400
mysql prompt us right active so you give

00:04:06,080 --> 00:04:09,760
it the username and say dash p

00:04:08,400 --> 00:04:11,280
and it'll then prompt you for the

00:04:09,760 --> 00:04:12,480
password but that doesn't give us

00:04:11,280 --> 00:04:14,480
automagic

00:04:12,480 --> 00:04:15,680
authentication uh if we're trying to do

00:04:14,480 --> 00:04:16,880
cron jobs or scripts or

00:04:15,680 --> 00:04:19,040
we're doing something where we're going

00:04:16,880 --> 00:04:20,400
in over and over again um you don't want

00:04:19,040 --> 00:04:21,680
to type the password every time you have

00:04:20,400 --> 00:04:25,120
to do a new command

00:04:21,680 --> 00:04:28,160
um so what we can do is set the

00:04:25,120 --> 00:04:30,639
uh credentials in a text file

00:04:28,160 --> 00:04:33,360
that mysql that will then check by

00:04:30,639 --> 00:04:36,240
default it'll check the dot my.cnf

00:04:33,360 --> 00:04:36,479
in your home directory uh if you're got

00:04:36,240 --> 00:04:38,080
a

00:04:36,479 --> 00:04:39,520
a environment where you need to worry

00:04:38,080 --> 00:04:40,639
about things like we all do because of

00:04:39,520 --> 00:04:42,960
security

00:04:40,639 --> 00:04:44,479
remember to check roots my conf as well

00:04:42,960 --> 00:04:46,560
because you'll find things in there

00:04:44,479 --> 00:04:47,759
especially if devs ever got access to

00:04:46,560 --> 00:04:49,280
root to uh

00:04:47,759 --> 00:04:50,960
to root on that machine you'll find all

00:04:49,280 --> 00:04:54,720
kinds of things swirled away in there

00:04:50,960 --> 00:04:56,320
um also on debian um for ease of

00:04:54,720 --> 00:04:56,560
upgrades it's a really nice system but

00:04:56,320 --> 00:04:59,680
in

00:04:56,560 --> 00:05:01,600
etsy my mysql debian.cnf

00:04:59,680 --> 00:05:03,120
they will have some credentials in there

00:05:01,600 --> 00:05:04,320
again if you're wanting to secure stuff

00:05:03,120 --> 00:05:05,680
you might want to take those out you

00:05:04,320 --> 00:05:06,800
always put them back in when you do the

00:05:05,680 --> 00:05:07,440
upgrade if you're using package

00:05:06,800 --> 00:05:08,800
management

00:05:07,440 --> 00:05:12,160
but you can take them out so they're not

00:05:08,800 --> 00:05:14,639
there under normal conditions

00:05:12,160 --> 00:05:15,840
and then finally you can use mysql under

00:05:14,639 --> 00:05:17,600
bar pwd

00:05:15,840 --> 00:05:19,840
so this is a variable you can set with

00:05:17,600 --> 00:05:23,199
the password in it and mysql will then

00:05:19,840 --> 00:05:25,520
use that when you try to authenticate

00:05:23,199 --> 00:05:26,639
so similar to my.cnf you can stick this

00:05:25,520 --> 00:05:29,520
in a text file and then

00:05:26,639 --> 00:05:31,039
and source it uh as a config file but

00:05:29,520 --> 00:05:31,919
it's not just that one file you can put

00:05:31,039 --> 00:05:34,240
it in any file

00:05:31,919 --> 00:05:35,520
so you can create an rc file or config

00:05:34,240 --> 00:05:37,360
file specific

00:05:35,520 --> 00:05:39,520
for the command that you're trying to

00:05:37,360 --> 00:05:41,600
run right now

00:05:39,520 --> 00:05:43,199
all right for authorization and

00:05:41,600 --> 00:05:45,759
privileges mysql uses the

00:05:43,199 --> 00:05:47,919
terms grant and revoke to give

00:05:45,759 --> 00:05:49,600
privileges or to take them away

00:05:47,919 --> 00:05:51,360
if you're needing to give somebody read

00:05:49,600 --> 00:05:52,080
access to read only access to your

00:05:51,360 --> 00:05:53,759
database

00:05:52,080 --> 00:05:55,360
then you'll want to give them select

00:05:53,759 --> 00:05:56,319
that's all they need for for normal

00:05:55,360 --> 00:05:57,840
reads

00:05:56,319 --> 00:05:59,199
but if you want to give them read write

00:05:57,840 --> 00:06:00,080
you actually need to give them four

00:05:59,199 --> 00:06:03,360
different

00:06:00,080 --> 00:06:06,639
permission sets so select delete

00:06:03,360 --> 00:06:08,080
uh insert and update and you might be

00:06:06,639 --> 00:06:08,800
able to get away without all four but

00:06:08,080 --> 00:06:10,000
generally

00:06:08,800 --> 00:06:11,280
if you're wanting them to be able to

00:06:10,000 --> 00:06:13,199
make changes to your database they'll

00:06:11,280 --> 00:06:17,840
need all four of those

00:06:13,199 --> 00:06:20,639
permissions now stored procedures are

00:06:17,840 --> 00:06:22,319
sql version of shell scripts that run

00:06:20,639 --> 00:06:25,520
inside the database

00:06:22,319 --> 00:06:26,560
there is a parameter the sql security

00:06:25,520 --> 00:06:27,840
that you can set

00:06:26,560 --> 00:06:30,479
and you can set that to be either

00:06:27,840 --> 00:06:34,000
definer or invoker

00:06:30,479 --> 00:06:36,560
and by definer it means who created the

00:06:34,000 --> 00:06:37,440
the story procedure uh an invoker is who

00:06:36,560 --> 00:06:40,479
is it running as

00:06:37,440 --> 00:06:41,600
so definer is kind of like a set uid so

00:06:40,479 --> 00:06:44,000
when it runs it runs

00:06:41,600 --> 00:06:44,720
the person who owns it whereas invoker

00:06:44,000 --> 00:06:46,160
it's normal

00:06:44,720 --> 00:06:48,160
process it's running as the person

00:06:46,160 --> 00:06:49,599
that's running it or that

00:06:48,160 --> 00:06:51,440
not necessarily person because it should

00:06:49,599 --> 00:06:56,000
be a system but you know

00:06:51,440 --> 00:06:56,000
you get what i'm saying all right

00:06:56,319 --> 00:06:59,599
mysql dump has been around well for a

00:06:58,000 --> 00:07:02,080
long time it's rock solid

00:06:59,599 --> 00:07:02,720
doing regular backups of mysql dump is

00:07:02,080 --> 00:07:05,120
is good

00:07:02,720 --> 00:07:05,759
it takes a while restoring from mysql

00:07:05,120 --> 00:07:08,880
dump

00:07:05,759 --> 00:07:11,599
data can take a long time on a big uh

00:07:08,880 --> 00:07:12,000
i had to drop a story because of time

00:07:11,599 --> 00:07:15,199
but

00:07:12,000 --> 00:07:16,639
it just can take forever however even if

00:07:15,199 --> 00:07:19,039
you're not doing backups with my

00:07:16,639 --> 00:07:20,960
sql dump of data you might want to still

00:07:19,039 --> 00:07:23,360
get actually highly recommend

00:07:20,960 --> 00:07:24,560
still getting uh using that for schema

00:07:23,360 --> 00:07:27,440
dumps

00:07:24,560 --> 00:07:28,960
uh and if you're about uh runtime

00:07:27,440 --> 00:07:31,039
creation timestamps on your

00:07:28,960 --> 00:07:33,440
stored procedures then also make sure

00:07:31,039 --> 00:07:35,440
you're getting the mysql.proc

00:07:33,440 --> 00:07:37,599
table as well we're system is we like

00:07:35,440 --> 00:07:39,360
timestamps so i recommend it

00:07:37,599 --> 00:07:41,360
um but you want to get your schema dumps

00:07:39,360 --> 00:07:42,479
in the schema is uh the information

00:07:41,360 --> 00:07:45,280
about the databases

00:07:42,479 --> 00:07:47,280
the the uh levels and the columns that

00:07:45,280 --> 00:07:50,479
are in those tables

00:07:47,280 --> 00:07:51,919
all right uh percona extra backup is a

00:07:50,479 --> 00:07:52,639
great tool i don't have time to talk

00:07:51,919 --> 00:07:54,400
about it

00:07:52,639 --> 00:07:55,759
uh but if you're if you're finding the

00:07:54,400 --> 00:07:58,240
things i'm recommending aren't working

00:07:55,759 --> 00:08:00,400
you might want to look into that

00:07:58,240 --> 00:08:02,240
all right so snapshots this is the way

00:08:00,400 --> 00:08:06,000
that we basically recommend doing

00:08:02,240 --> 00:08:07,680
uh backups at this point if you're using

00:08:06,000 --> 00:08:09,120
virtual machines or containers you can

00:08:07,680 --> 00:08:11,599
use the snapshots on those and

00:08:09,120 --> 00:08:14,000
grab that if you're needing to do

00:08:11,599 --> 00:08:16,800
backups from the operating system level

00:08:14,000 --> 00:08:19,039
then you can put mysql on a

00:08:16,800 --> 00:08:20,800
snapshottable file system

00:08:19,039 --> 00:08:22,879
and then use a script to go through and

00:08:20,800 --> 00:08:25,440
do that if your snapshottable file

00:08:22,879 --> 00:08:27,440
system happens to be lvm2 v2

00:08:25,440 --> 00:08:28,879
then you can use my lvm backup in order

00:08:27,440 --> 00:08:31,680
to get that

00:08:28,879 --> 00:08:33,279
um but if you're using something else

00:08:31,680 --> 00:08:34,880
it's really not that complex you can you

00:08:33,279 --> 00:08:35,919
can create a shell script pretty quick

00:08:34,880 --> 00:08:37,919
and easy

00:08:35,919 --> 00:08:40,719
uh and probably use examples from my

00:08:37,919 --> 00:08:42,320
lvm2 or port that forward to it

00:08:40,719 --> 00:08:44,000
if snapshots aren't available to you

00:08:42,320 --> 00:08:44,720
like for instance you have a large file

00:08:44,000 --> 00:08:47,200
system

00:08:44,720 --> 00:08:47,839
that you didn't leave room for snapshots

00:08:47,200 --> 00:08:49,600
then go

00:08:47,839 --> 00:08:51,600
go back and look at the percona extra

00:08:49,600 --> 00:08:54,320
backup

00:08:51,600 --> 00:08:56,080
the log files these are you know for

00:08:54,320 --> 00:08:59,120
system is obviously really important

00:08:56,080 --> 00:09:00,880
mysql puts them in var log mysql

00:08:59,120 --> 00:09:02,720
the error log if you're having trouble

00:09:00,880 --> 00:09:04,160
getting mysql to start up go through and

00:09:02,720 --> 00:09:07,680
go look at that

00:09:04,160 --> 00:09:09,360
a slow query log you can set how long

00:09:07,680 --> 00:09:11,200
a slow query log or how much time you

00:09:09,360 --> 00:09:13,440
have for that but it will also log

00:09:11,200 --> 00:09:14,240
uh queries that don't have indexes on

00:09:13,440 --> 00:09:15,360
them as well

00:09:14,240 --> 00:09:17,360
so if you're having database

00:09:15,360 --> 00:09:17,680
performances that's something to go look

00:09:17,360 --> 00:09:20,000
at

00:09:17,680 --> 00:09:23,200
uh to figure out what is what is causing

00:09:20,000 --> 00:09:25,519
uh a large load on your on your database

00:09:23,200 --> 00:09:26,320
the general log is very verbose i mean

00:09:25,519 --> 00:09:28,640
talk about

00:09:26,320 --> 00:09:29,920
send mail style vervos right uh so you

00:09:28,640 --> 00:09:32,160
don't want to leave it on all the time

00:09:29,920 --> 00:09:33,600
especially on a busy database

00:09:32,160 --> 00:09:36,160
what you would normally do if you want

00:09:33,600 --> 00:09:38,560
to test something is is design your test

00:09:36,160 --> 00:09:39,440
get it set up turn on general log you

00:09:38,560 --> 00:09:41,360
don't need to restart

00:09:39,440 --> 00:09:43,760
mysql to do that you can do that live

00:09:41,360 --> 00:09:46,000
turn on general log run your test

00:09:43,760 --> 00:09:47,519
make it for a short period of time then

00:09:46,000 --> 00:09:48,480
when you finish the test turn general

00:09:47,519 --> 00:09:50,399
log back off

00:09:48,480 --> 00:09:52,080
and then go back through the locks but

00:09:50,399 --> 00:09:53,760
don't leave those on

00:09:52,080 --> 00:09:55,120
permanent you will write a space in var

00:09:53,760 --> 00:09:56,640
log

00:09:55,120 --> 00:09:58,880
if you're if you're using file system

00:09:56,640 --> 00:10:01,519
for logs

00:09:58,880 --> 00:10:03,440
now for querying data we can use the

00:10:01,519 --> 00:10:04,640
tools we know yes you can write stuff in

00:10:03,440 --> 00:10:06,480
sql

00:10:04,640 --> 00:10:08,560
i know sql there's just some things that

00:10:06,480 --> 00:10:11,360
are so much easier on the command line

00:10:08,560 --> 00:10:12,880
so we can build our own pipeline with

00:10:11,360 --> 00:10:14,240
the tools that we're already familiar

00:10:12,880 --> 00:10:17,839
with

00:10:14,240 --> 00:10:19,040
so said grab awk etc here's a couple of

00:10:17,839 --> 00:10:21,760
examples

00:10:19,040 --> 00:10:22,640
uh so here i've got i'm selecting album

00:10:21,760 --> 00:10:24,560
from music

00:10:22,640 --> 00:10:26,160
and i just pipe that out to grep and go

00:10:24,560 --> 00:10:26,800
look for for things that have horse in

00:10:26,160 --> 00:10:29,279
them

00:10:26,800 --> 00:10:31,040
uh the next one i'm selecting out the

00:10:29,279 --> 00:10:32,560
username and host for people or for

00:10:31,040 --> 00:10:33,680
accounts that are allowed to talk to my

00:10:32,560 --> 00:10:35,440
database

00:10:33,680 --> 00:10:37,440
and then i'm saying show me the ones

00:10:35,440 --> 00:10:38,959
that are roots but aren't coming from

00:10:37,440 --> 00:10:40,800
some version of localhost

00:10:38,959 --> 00:10:44,560
so i can see what root is being allowed

00:10:40,800 --> 00:10:46,959
to connect to remotely to my database

00:10:44,560 --> 00:10:48,480
uh the next one is show my show replica

00:10:46,959 --> 00:10:48,920
status it was called something else up

00:10:48,480 --> 00:10:52,959
until

00:10:48,920 --> 00:10:54,320
8022 um and that will show me how my my

00:10:52,959 --> 00:10:55,839
replicas are doing

00:10:54,320 --> 00:10:57,680
if you've got data in a database you

00:10:55,839 --> 00:10:59,279
want to have replicas of it so that if

00:10:57,680 --> 00:11:01,440
you have a problem with your primary

00:10:59,279 --> 00:11:02,640
you can fail over to the replicas uh so

00:11:01,440 --> 00:11:04,959
you also want to make sure that your

00:11:02,640 --> 00:11:06,320
replica isn't an hour behind

00:11:04,959 --> 00:11:08,399
because then you just lose an hour worth

00:11:06,320 --> 00:11:10,240
of data which is you know a bad feature

00:11:08,399 --> 00:11:11,600
um so this will show you some things

00:11:10,240 --> 00:11:14,079
that your status

00:11:11,600 --> 00:11:15,120
show you the last errors and uh and how

00:11:14,079 --> 00:11:18,560
you're doing with your

00:11:15,120 --> 00:11:20,560
your uh replicas uh in addition

00:11:18,560 --> 00:11:21,920
you've got we've got lib readline

00:11:20,560 --> 00:11:26,560
available for

00:11:21,920 --> 00:11:29,680
um uh so you can use either mysql

00:11:26,560 --> 00:11:30,320
you can use either vi or emacs bindings

00:11:29,680 --> 00:11:33,360
for

00:11:30,320 --> 00:11:35,120
uh your command line

00:11:33,360 --> 00:11:37,279
for database things doing things as a

00:11:35,120 --> 00:11:38,320
database if you don't have a specific

00:11:37,279 --> 00:11:40,560
reason for something else

00:11:38,320 --> 00:11:42,000
use an odb just that's the thing to use

00:11:40,560 --> 00:11:43,600
for mysql

00:11:42,000 --> 00:11:45,920
don't change the internal databases that

00:11:43,600 --> 00:11:48,160
are already there do whatever mysql is

00:11:45,920 --> 00:11:50,560
doing with those by default

00:11:48,160 --> 00:11:52,079
also use per table you don't have to use

00:11:50,560 --> 00:11:54,800
per table for anodb

00:11:52,079 --> 00:11:56,320
but it is a pain to convert later on

00:11:54,800 --> 00:11:58,480
which just immense we don't like pain we

00:11:56,320 --> 00:12:01,440
like easy we like automation

00:11:58,480 --> 00:12:01,839
use person just use file per table and

00:12:01,440 --> 00:12:04,399
and

00:12:01,839 --> 00:12:05,440
uh and be done with it and then for

00:12:04,399 --> 00:12:08,320
faster shutdowns

00:12:05,440 --> 00:12:10,000
do some some research on this but this

00:12:08,320 --> 00:12:12,959
will try to get the cash

00:12:10,000 --> 00:12:13,760
down low so that uh because mysql can't

00:12:12,959 --> 00:12:15,600
stop

00:12:13,760 --> 00:12:16,959
when you tell it to shut down can't stop

00:12:15,600 --> 00:12:18,639
until uh

00:12:16,959 --> 00:12:20,320
it's written doubt out all the cash to

00:12:18,639 --> 00:12:22,399
disk so you lose data

00:12:20,320 --> 00:12:23,360
so by using this ahead of time ahead of

00:12:22,399 --> 00:12:25,200
your maintenance window

00:12:23,360 --> 00:12:27,360
you can get quicker shutdowns uh with

00:12:25,200 --> 00:12:29,839
mysql

00:12:27,360 --> 00:12:31,600
uh character sets this was this was a

00:12:29,839 --> 00:12:33,600
fun lesson uh several times

00:12:31,600 --> 00:12:35,519
uh always specify the character set when

00:12:33,600 --> 00:12:38,959
creating a database or table

00:12:35,519 --> 00:12:42,560
or just get used to swedish

00:12:38,959 --> 00:12:45,839
now for the community um we have

00:12:42,560 --> 00:12:46,480
uh uh different com companies that are

00:12:45,839 --> 00:12:48,480
doing things

00:12:46,480 --> 00:12:49,600
we've got the mysql main branch that

00:12:48,480 --> 00:12:52,720
oracle has

00:12:49,600 --> 00:12:53,920
but also procona and mariadb as somebody

00:12:52,720 --> 00:12:55,920
who's not really

00:12:53,920 --> 00:12:57,519
into it they get along just fine i'm

00:12:55,920 --> 00:12:59,760
certain we can find other examples

00:12:57,519 --> 00:13:00,800
but my experience they do do well they

00:12:59,760 --> 00:13:03,600
work well

00:13:00,800 --> 00:13:05,360
as somebody using them for jobs and for

00:13:03,600 --> 00:13:07,600
consulting i've used all three

00:13:05,360 --> 00:13:08,399
and and the skills work from one one to

00:13:07,600 --> 00:13:10,720
the other

00:13:08,399 --> 00:13:12,000
um i will say that that competition i

00:13:10,720 --> 00:13:12,880
think has helped oracle with the

00:13:12,000 --> 00:13:14,800
stewardship

00:13:12,880 --> 00:13:16,320
and overall oracle's done a really good

00:13:14,800 --> 00:13:18,880
job they've done a lot of

00:13:16,320 --> 00:13:19,519
added a lot of features uh to mysql over

00:13:18,880 --> 00:13:21,519
the years

00:13:19,519 --> 00:13:23,360
uh and i really really appreciate what

00:13:21,519 --> 00:13:24,880
they've been doing um but we have that

00:13:23,360 --> 00:13:26,560
competition

00:13:24,880 --> 00:13:28,320
and we have cooperative competition

00:13:26,560 --> 00:13:31,040
where they they if somebody

00:13:28,320 --> 00:13:32,560
one group adds something then another

00:13:31,040 --> 00:13:33,360
group can take that same feature and add

00:13:32,560 --> 00:13:34,880
it as well

00:13:33,360 --> 00:13:37,040
we're free software we're allowed to do

00:13:34,880 --> 00:13:40,320
that all right

00:13:37,040 --> 00:13:43,440
and i think okay

00:13:40,320 --> 00:13:44,480
oops wrong button again all right some

00:13:43,440 --> 00:13:46,320
resources

00:13:44,480 --> 00:13:48,079
uh so there's a lot of different places

00:13:46,320 --> 00:13:50,959
to get mysql mysql

00:13:48,079 --> 00:13:52,000
documentation is actually pretty good uh

00:13:50,959 --> 00:13:54,560
procona is my

00:13:52,000 --> 00:13:56,639
mysql performance blog is awesome um

00:13:54,560 --> 00:13:57,120
tokudb you might not have ever heard of

00:13:56,639 --> 00:14:00,800
it

00:13:57,120 --> 00:14:02,959
and um they uh but

00:14:00,800 --> 00:14:04,560
reading about that really taught me a

00:14:02,959 --> 00:14:06,560
lot about innodb if you're going that

00:14:04,560 --> 00:14:08,240
direction

00:14:06,560 --> 00:14:09,920
and then i want to wrap up with a thank

00:14:08,240 --> 00:14:10,639
you to everybody for attending and

00:14:09,920 --> 00:14:12,880
everybody that's

00:14:10,639 --> 00:14:14,720
helping with this uh and i want to thank

00:14:12,880 --> 00:14:16,560
so the organizers and volunteers that

00:14:14,720 --> 00:14:18,880
are making lca happen

00:14:16,560 --> 00:14:20,079
the the database community that we have

00:14:18,880 --> 00:14:22,399
these awesome tools

00:14:20,079 --> 00:14:23,279
uh of course uh uh my friend for open

00:14:22,399 --> 00:14:25,600
ssh

00:14:23,279 --> 00:14:26,720
uh and then uh finally i wanna thank

00:14:25,600 --> 00:14:28,240
hugo weaving

00:14:26,720 --> 00:14:30,399
uh for i gotta i gotta read this i

00:14:28,240 --> 00:14:33,440
didn't i didn't memorize it uh i left it

00:14:30,399 --> 00:14:36,000
for for showing us the dangers of uh

00:14:33,440 --> 00:14:37,600
a centralized virtual environment uh

00:14:36,000 --> 00:14:40,480
saving us from the walled

00:14:37,600 --> 00:14:40,720
garden of mordor and touring the outback

00:14:40,480 --> 00:14:44,800
of

00:14:40,720 --> 00:14:48,240
uh australia in style all right

00:14:44,800 --> 00:14:50,560
thank you very much your hands that's it

00:14:48,240 --> 00:14:51,360
thank you very much for the great talk

00:14:50,560 --> 00:14:53,519
um i

00:14:51,360 --> 00:14:54,959
picked up a few things on mysql and

00:14:53,519 --> 00:14:56,800
particularly being able to set a

00:14:54,959 --> 00:14:58,240
a prompt actually inside mysql will be

00:14:56,800 --> 00:15:01,360
extremely handy

00:14:58,240 --> 00:15:03,680
keeping track of where we are um

00:15:01,360 --> 00:15:06,160
if you send us our your slides we will

00:15:03,680 --> 00:15:08,240
put them up on the systemin.miniconf.org

00:15:06,160 --> 00:15:09,440
site and people are able to grab them

00:15:08,240 --> 00:15:10,560
there um

00:15:09,440 --> 00:15:13,279
i see there's been a little bit of

00:15:10,560 --> 00:15:15,760
discussion in the chat in venulis

00:15:13,279 --> 00:15:16,720
um so if you want to pop along there and

00:15:15,760 --> 00:15:18,399
answer any questions

00:15:16,720 --> 00:15:26,079
it would be great thank you very much

00:15:18,399 --> 00:15:26,079

YouTube URL: https://www.youtube.com/watch?v=3Pf9-2PF1ZM


