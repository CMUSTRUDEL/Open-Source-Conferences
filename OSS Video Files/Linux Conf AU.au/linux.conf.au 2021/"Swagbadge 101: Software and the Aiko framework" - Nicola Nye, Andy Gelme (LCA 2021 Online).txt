Title: "Swagbadge 101: Software and the Aiko framework" - Nicola Nye, Andy Gelme (LCA 2021 Online)
Publication date: 2021-01-31
Playlist: linux.conf.au 2021
Description: 
	Nicola Nye, Andy Gelme

https://lca2021.linux.org.au/schedule/presentation/113/

If youâ€™re not a badge expert and you want to make the most out of your Swagbadge, this talk is for you!

Nicola will talk through getting started, from the moment you opened the packet and the stickers fell out, to the time the badge is up and running and displaying information on the screens, and give some pointers on what to do next to make it your own and how to get help on it during LCA2021 and beyond. Andy will discuss the Aiko framework that powers a lot of the badge hardware. Why do we need a framework on top of MicroPython? What services it provides and how you can use it to extend your badgeâ€™s functionality.

linux.conf.au is a conference about the Linux operating system, and all aspects of the thriving ecosystem of Free and Open Source Software that has grown up around it. Run since 1999, in a different Australian or New Zealand city each year, by a team of local volunteers, LCA invites more than 500 people to learn from the people who shape the future of Open Source. For more information on the conference see https://linux.conf.au/

Produced by Next Day Video Australia: https://nextdayvideo.com.au

#linux.conf.au #linux #foss #opensource

Sat Jan 23 10:45:00 2021 at Rusty R. Hall
Captions: 
	00:00:10,820 --> 00:00:14,060
[Music]

00:00:15,200 --> 00:00:18,800
good morning lca

00:00:16,960 --> 00:00:23,039
it's so cool to be here on the first day

00:00:18,800 --> 00:00:25,039
of the first ever online linux conf

00:00:23,039 --> 00:00:27,359
and you've caught me needing to cough

00:00:25,039 --> 00:00:29,840
right at the wrong moment

00:00:27,359 --> 00:00:31,840
so thank you for coming along and i'm

00:00:29,840 --> 00:00:33,920
sure there are many people coming

00:00:31,840 --> 00:00:35,280
to the open hardware mini conf this year

00:00:33,920 --> 00:00:36,640
that wouldn't normally come because of

00:00:35,280 --> 00:00:38,559
the swag badge

00:00:36,640 --> 00:00:40,480
so a lot of our content today is going

00:00:38,559 --> 00:00:42,559
to be talking about the swag badge

00:00:40,480 --> 00:00:44,480
what it how it was made what it can do

00:00:42,559 --> 00:00:45,120
what you can do with it to customize it

00:00:44,480 --> 00:00:49,120
to

00:00:45,120 --> 00:00:51,440
suit yourself so our first session

00:00:49,120 --> 00:00:52,559
is nicola and i and andy yami who are

00:00:51,440 --> 00:00:54,800
going to be talking about an

00:00:52,559 --> 00:00:57,680
introduction to the swag badge

00:00:54,800 --> 00:00:58,079
and we're doing a little bit strangely

00:00:57,680 --> 00:01:00,480
today

00:00:58,079 --> 00:01:01,520
because we have a few people here in my

00:01:00,480 --> 00:01:02,640
office

00:01:01,520 --> 00:01:04,559
and we're just going to be switching

00:01:02,640 --> 00:01:05,600
around and it's going to be very casual

00:01:04,559 --> 00:01:07,439
but

00:01:05,600 --> 00:01:09,360
if you have questions please put them

00:01:07,439 --> 00:01:12,080
into the chat in venulis

00:01:09,360 --> 00:01:14,000
and then once we get towards the end of

00:01:12,080 --> 00:01:15,680
this session

00:01:14,000 --> 00:01:17,040
nicola and andy can answer those

00:01:15,680 --> 00:01:19,920
questions so

00:01:17,040 --> 00:01:20,560
thank you very much and nicola is going

00:01:19,920 --> 00:01:23,200
to start off

00:01:20,560 --> 00:01:24,880
with the introduction to the swag badge

00:01:23,200 --> 00:01:27,840
so could we please have

00:01:24,880 --> 00:01:27,840
the slides

00:01:28,320 --> 00:01:30,799
there you go

00:01:32,240 --> 00:01:36,720
good morning lca so lovely to be here

00:01:36,240 --> 00:01:39,040
and

00:01:36,720 --> 00:01:40,400
hanging out with you all very excited to

00:01:39,040 --> 00:01:43,920
show you fabulous

00:01:40,400 --> 00:01:46,880
swag badge uh

00:01:43,920 --> 00:01:47,840
now i'm just gonna bring those up

00:01:46,880 --> 00:01:50,640
awesome

00:01:47,840 --> 00:01:51,200
so uh you know people have come in and

00:01:50,640 --> 00:01:52,640
getting

00:01:51,200 --> 00:01:54,320
the hang of swag badge for the first

00:01:52,640 --> 00:01:58,000
time ever and

00:01:54,320 --> 00:02:02,159
uh just gonna find out how to drive this

00:01:58,000 --> 00:02:05,439
thing because we're doing technology

00:02:02,159 --> 00:02:08,800
how do i do a thing this one

00:02:05,439 --> 00:02:09,840
and then so the aim of this presentation

00:02:08,800 --> 00:02:12,000
today

00:02:09,840 --> 00:02:13,760
is to for all those people who were

00:02:12,000 --> 00:02:16,560
shipped their swag badgers

00:02:13,760 --> 00:02:17,440
who went this looks really cool but what

00:02:16,560 --> 00:02:20,720
even is

00:02:17,440 --> 00:02:21,440
it to take you today to the point of i

00:02:20,720 --> 00:02:25,280
know what it is

00:02:21,440 --> 00:02:27,200
and i love it so

00:02:25,280 --> 00:02:28,319
do you have questions because i have the

00:02:27,200 --> 00:02:30,640
answers

00:02:28,319 --> 00:02:32,720
we sent out just a casual few hundred

00:02:30,640 --> 00:02:34,480
packets we're very excited about it

00:02:32,720 --> 00:02:36,239
and we think you're going to be excited

00:02:34,480 --> 00:02:38,239
about it too so today

00:02:36,239 --> 00:02:40,080
uh it's not gonna be a full-on workshop

00:02:38,239 --> 00:02:41,599
it's not uh you know hand-holding you to

00:02:40,080 --> 00:02:43,360
get it all through today it's just a

00:02:41,599 --> 00:02:44,959
familiarization session

00:02:43,360 --> 00:02:46,480
uh taking you from the sort of that

00:02:44,959 --> 00:02:48,239
getting started moment you've opened the

00:02:46,480 --> 00:02:50,000
packet and a whole bunch of little bits

00:02:48,239 --> 00:02:51,920
of stuff fell out what did you what did

00:02:50,000 --> 00:02:53,440
you even sign yourself up for

00:02:51,920 --> 00:02:55,200
we're going to be talking about getting

00:02:53,440 --> 00:02:57,440
you to the point where you can

00:02:55,200 --> 00:02:59,280
run your inbuilt application and then

00:02:57,440 --> 00:03:01,200
we'll have a bit of a look at the sneak

00:02:59,280 --> 00:03:02,640
peek of the next steps

00:03:01,200 --> 00:03:04,400
how do you actually go about updating

00:03:02,640 --> 00:03:06,159
the firmware because let me tell you we

00:03:04,400 --> 00:03:06,879
have been burning the midnight oil and

00:03:06,159 --> 00:03:09,280
we have

00:03:06,879 --> 00:03:10,560
quite the update for you today uh

00:03:09,280 --> 00:03:12,239
talking about how you can swap

00:03:10,560 --> 00:03:12,959
applications on the batch because it's

00:03:12,239 --> 00:03:15,120
not just stuck

00:03:12,959 --> 00:03:16,480
running the one how you can go about

00:03:15,120 --> 00:03:17,599
building and extending your own

00:03:16,480 --> 00:03:19,840
applications and

00:03:17,599 --> 00:03:21,120
and also extending the hardware and

00:03:19,840 --> 00:03:22,400
there's a number of talks throughout

00:03:21,120 --> 00:03:23,840
today that'll have a look at

00:03:22,400 --> 00:03:26,080
what's going on behind the scenes with

00:03:23,840 --> 00:03:28,239
the badge but most of all we'll also be

00:03:26,080 --> 00:03:30,080
looking at some of the resources so that

00:03:28,239 --> 00:03:31,840
when you've stopped live streaming and

00:03:30,080 --> 00:03:33,440
you're left at home staring at the badge

00:03:31,840 --> 00:03:34,480
wanting to still participate in the joy

00:03:33,440 --> 00:03:37,920
that is lca

00:03:34,480 --> 00:03:37,920
your badge can bring that to you

00:03:39,040 --> 00:03:43,840
so first some context why does this

00:03:41,840 --> 00:03:45,519
badge even exist

00:03:43,840 --> 00:03:47,920
now if you need another conference

00:03:45,519 --> 00:03:49,280
t-shirt or a keep cup or a notebook or a

00:03:47,920 --> 00:03:50,879
pen

00:03:49,280 --> 00:03:52,879
you can order that kind of personalized

00:03:50,879 --> 00:03:56,720
swag from the redbubble store

00:03:52,879 --> 00:03:58,080
but you lucky people have a swag badge

00:03:56,720 --> 00:04:01,760
and it is the best

00:03:58,080 --> 00:04:04,080
swag ever

00:04:01,760 --> 00:04:05,920
back in uh sort of september october

00:04:04,080 --> 00:04:08,000
last year the lovely folks at linux

00:04:05,920 --> 00:04:10,640
australia and lca contacted

00:04:08,000 --> 00:04:11,920
the open hardware team and said hi we've

00:04:10,640 --> 00:04:13,519
got a bit of money we'd like you to

00:04:11,920 --> 00:04:15,519
produce the best swag ever

00:04:13,519 --> 00:04:17,199
are you up for this challenge of

00:04:15,519 --> 00:04:19,680
shenanigans and mischief

00:04:17,199 --> 00:04:20,959
well john andy and john sat there put

00:04:19,680 --> 00:04:22,960
their heads together and said

00:04:20,959 --> 00:04:25,199
totally we can meet your budget we can

00:04:22,960 --> 00:04:26,800
ship out a number of 100 badges that

00:04:25,199 --> 00:04:28,960
will fit inside

00:04:26,800 --> 00:04:31,199
an envelope to be able to be posted to

00:04:28,960 --> 00:04:33,040
all the linux conf attendees

00:04:31,199 --> 00:04:34,560
and make this online event a little bit

00:04:33,040 --> 00:04:36,400
more special

00:04:34,560 --> 00:04:38,000
the aim was to be able to have a badge

00:04:36,400 --> 00:04:38,960
that you could connect to the internet

00:04:38,000 --> 00:04:40,400
that would

00:04:38,960 --> 00:04:42,400
make it so that even though we're

00:04:40,400 --> 00:04:45,520
geographically distributed

00:04:42,400 --> 00:04:48,560
electronically we can be connected

00:04:45,520 --> 00:04:51,040
but of course you know no awesome swag

00:04:48,560 --> 00:04:51,840
is going to be any good if it's not fun

00:04:51,040 --> 00:04:54,320
and also

00:04:51,840 --> 00:04:54,320
hackable

00:04:55,759 --> 00:04:59,520
now electronic badges have got quite a

00:04:58,320 --> 00:05:03,440
history behind them

00:04:59,520 --> 00:05:06,639
it's not a new concept back in 2006

00:05:03,440 --> 00:05:08,720
in las vegas defcon 14

00:05:06,639 --> 00:05:10,000
was the first electronic badge and it

00:05:08,720 --> 00:05:11,919
was just a little board that had some

00:05:10,000 --> 00:05:15,440
blinky lights because everybody knows

00:05:11,919 --> 00:05:18,720
electronics is better with blinky lights

00:05:15,440 --> 00:05:22,639
now a badge contains

00:05:18,720 --> 00:05:26,160
a tiny computer in our case we can even

00:05:22,639 --> 00:05:29,280
hang it around your neck uh and it'll do

00:05:26,160 --> 00:05:30,320
things now our particular badge is wi-fi

00:05:29,280 --> 00:05:34,000
enabled

00:05:30,320 --> 00:05:36,000
uh it can talk uh mqtt which is a

00:05:34,000 --> 00:05:38,560
lightweight queuing protocol

00:05:36,000 --> 00:05:40,639
uh it's got screens it got buttons it's

00:05:38,560 --> 00:05:42,160
got touch sliders you can use it for

00:05:40,639 --> 00:05:43,919
interacting with others you can use it

00:05:42,160 --> 00:05:47,120
just for doing your own thing

00:05:43,919 --> 00:05:49,120
uh john one of the pres people here

00:05:47,120 --> 00:05:50,639
at the open hardware core team he's

00:05:49,120 --> 00:05:53,600
actually even set up his

00:05:50,639 --> 00:05:54,240
proto to control his electronic lights

00:05:53,600 --> 00:05:57,759
and

00:05:54,240 --> 00:06:01,039
run it as a dimmer switch you can even

00:05:57,759 --> 00:06:02,880
add on some standard standard add-ons

00:06:01,039 --> 00:06:04,479
you can purchase these off tindy

00:06:02,880 --> 00:06:06,080
and add them to your badge power them on

00:06:04,479 --> 00:06:08,240
your badge and have other people's

00:06:06,080 --> 00:06:09,840
hardware added to your badge

00:06:08,240 --> 00:06:11,360
so we had a budget we knew we had to

00:06:09,840 --> 00:06:12,880
post it we had to get them built and

00:06:11,360 --> 00:06:15,600
assembled in time for

00:06:12,880 --> 00:06:17,039
pandemically slow postal service over

00:06:15,600 --> 00:06:18,639
christmas

00:06:17,039 --> 00:06:20,720
and able to be extended with common

00:06:18,639 --> 00:06:22,319
tooling and we wanted it to be fun

00:06:20,720 --> 00:06:24,800
for us so that we could share it with

00:06:22,319 --> 00:06:24,800
all of you

00:06:25,600 --> 00:06:28,720
so what is what are all the bits on the

00:06:28,240 --> 00:06:31,840
badge

00:06:28,720 --> 00:06:33,840
let's have a look at the anatomy

00:06:31,840 --> 00:06:35,360
so at the top you've got the lanyard

00:06:33,840 --> 00:06:39,039
hole that you can put your

00:06:35,360 --> 00:06:41,600
awesome custom blinky lanyard on

00:06:39,039 --> 00:06:43,280
this bit is not electronic at all uh

00:06:41,600 --> 00:06:45,680
there are screens

00:06:43,280 --> 00:06:47,520
two of them you can peel off the little

00:06:45,680 --> 00:06:49,599
sticky screen protector that goes on top

00:06:47,520 --> 00:06:51,360
of it that is awesome fun

00:06:49,599 --> 00:06:53,360
underneath the screens are actually

00:06:51,360 --> 00:06:55,280
buttons so you can push on those screens

00:06:53,360 --> 00:06:56,720
and the badge will know what's going on

00:06:55,280 --> 00:06:58,720
some of them are more tactile than

00:06:56,720 --> 00:07:00,240
others but do be gentle because you know

00:06:58,720 --> 00:07:01,520
the oled screens you don't want to smash

00:07:00,240 --> 00:07:03,280
them make sure when you're pushing them

00:07:01,520 --> 00:07:06,000
you're pushing the center of the screen

00:07:03,280 --> 00:07:07,520
not towards the edge down the below

00:07:06,000 --> 00:07:09,039
there is a computer this is the

00:07:07,520 --> 00:07:12,000
controller the brains of the whole

00:07:09,039 --> 00:07:13,599
operation it's a lollan light esp32

00:07:12,000 --> 00:07:15,520
you'll hear more about the specifics of

00:07:13,599 --> 00:07:16,960
the hardware later on when john and john

00:07:15,520 --> 00:07:19,199
give you the lowdown

00:07:16,960 --> 00:07:21,120
we've got two sliders on either side

00:07:19,199 --> 00:07:21,840
these act both as buttons at top and

00:07:21,120 --> 00:07:24,400
bottom

00:07:21,840 --> 00:07:26,080
but they're capacitive touch so it the

00:07:24,400 --> 00:07:27,599
computer can actually detect where your

00:07:26,080 --> 00:07:30,960
finger is along that

00:07:27,599 --> 00:07:31,520
slidey thing it's super cool uh you've

00:07:30,960 --> 00:07:34,880
got

00:07:31,520 --> 00:07:36,240
um fancy logo and there are four points

00:07:34,880 --> 00:07:38,720
at which you can connect

00:07:36,240 --> 00:07:39,360
additional hardware things and they're

00:07:38,720 --> 00:07:43,360
called

00:07:39,360 --> 00:07:44,160
simple add-ons if we turn it over on the

00:07:43,360 --> 00:07:47,199
back

00:07:44,160 --> 00:07:50,240
you can see once again fancy logo

00:07:47,199 --> 00:07:54,240
very stylish um and

00:07:50,240 --> 00:07:56,080
there is the very important reset button

00:07:54,240 --> 00:07:58,160
so that if you're doing software

00:07:56,080 --> 00:08:01,360
development on the badge you can

00:07:58,160 --> 00:08:03,199
uh give it a kickstart and it'll

00:08:01,360 --> 00:08:05,199
re restart and bring up your new

00:08:03,199 --> 00:08:06,160
software now do note that there is

00:08:05,199 --> 00:08:08,800
copper construct

00:08:06,160 --> 00:08:10,840
conductive stuff on the back don't put

00:08:08,800 --> 00:08:12,160
the badge onto an electrically charged

00:08:10,840 --> 00:08:13,919
service and

00:08:12,160 --> 00:08:16,400
the other thing to note is that these

00:08:13,919 --> 00:08:18,240
sliders

00:08:16,400 --> 00:08:19,919
while the graphic is on the front it

00:08:18,240 --> 00:08:21,280
actually will detect front and rear so

00:08:19,919 --> 00:08:24,479
if you're trying to use the sliders you

00:08:21,280 --> 00:08:24,479
might want to hold the badge by the

00:08:24,840 --> 00:08:29,440
edges how do you power the badge you

00:08:27,199 --> 00:08:30,479
will need a micro usb cable it goes in

00:08:29,440 --> 00:08:32,000
the slot on the left

00:08:30,479 --> 00:08:34,479
i know people have been talking about a

00:08:32,000 --> 00:08:36,959
battery uh that you can power it with we

00:08:34,479 --> 00:08:38,479
weren't able to ship this to you but you

00:08:36,959 --> 00:08:39,839
can hook it up so that it will run

00:08:38,479 --> 00:08:41,440
independently and there is more

00:08:39,839 --> 00:08:42,320
information on the wiki on the kind of

00:08:41,440 --> 00:08:44,320
badger

00:08:42,320 --> 00:08:47,120
battery it needs where to get one from

00:08:44,320 --> 00:08:47,120
and how to hook it up

00:08:47,519 --> 00:08:52,000
but all this delightful hardware doesn't

00:08:50,399 --> 00:08:54,800
work without the software

00:08:52,000 --> 00:08:56,480
so what is part of the stack so we've

00:08:54,800 --> 00:08:58,080
got the hardware at the bottom

00:08:56,480 --> 00:09:00,560
on top of that we're running micro

00:08:58,080 --> 00:09:02,880
python which is developed right here by

00:09:00,560 --> 00:09:04,080
damien george who is now back in

00:09:02,880 --> 00:09:07,600
melbourne

00:09:04,080 --> 00:09:10,320
um andy gellmey of uh hardware team

00:09:07,600 --> 00:09:11,360
has also built this amazing framework

00:09:10,320 --> 00:09:13,279
for the badge

00:09:11,360 --> 00:09:15,120
uh and it works not just on this badge

00:09:13,279 --> 00:09:16,080
but we've also used it in other hardware

00:09:15,120 --> 00:09:18,000
applications

00:09:16,080 --> 00:09:19,600
and it's called ico and it's got heaps

00:09:18,000 --> 00:09:22,000
of convenience functions

00:09:19,600 --> 00:09:24,000
so it will help handle your screen

00:09:22,000 --> 00:09:25,200
updates it's got event handlers for all

00:09:24,000 --> 00:09:28,720
the buttons and

00:09:25,200 --> 00:09:31,040
and switches and dials and gizmos

00:09:28,720 --> 00:09:32,720
and you'll hear about all of that coming

00:09:31,040 --> 00:09:34,959
up next

00:09:32,720 --> 00:09:36,880
uh it's got things to keep your badge

00:09:34,959 --> 00:09:38,160
online and detect if it falls off and

00:09:36,880 --> 00:09:39,440
reconnect you

00:09:38,160 --> 00:09:41,040
and then obviously we've got

00:09:39,440 --> 00:09:43,760
applications that run on top of this

00:09:41,040 --> 00:09:47,200
entire stack

00:09:43,760 --> 00:09:50,320
so i've mentioned mqtt a few times

00:09:47,200 --> 00:09:52,959
what even is it

00:09:50,320 --> 00:09:54,640
the concept of a queueing based

00:09:52,959 --> 00:09:55,519
messaging system has been around for a

00:09:54,640 --> 00:09:59,440
really long time

00:09:55,519 --> 00:10:01,600
mqtt though is a lightweight version

00:09:59,440 --> 00:10:03,519
that's designed for internet of things

00:10:01,600 --> 00:10:05,680
devices

00:10:03,519 --> 00:10:06,720
now we've used a we've set up a

00:10:05,680 --> 00:10:09,120
dedicated

00:10:06,720 --> 00:10:11,040
mqtt server in australia so we've got

00:10:09,120 --> 00:10:14,560
nice fast ping times for a change

00:10:11,040 --> 00:10:17,680
um and it's being hosted by andy

00:10:14,560 --> 00:10:19,360
uh it's got some special features on it

00:10:17,680 --> 00:10:21,519
security tooling to make sure that

00:10:19,360 --> 00:10:23,279
people can't misuse it or accidentally

00:10:21,519 --> 00:10:25,920
ddoses

00:10:23,279 --> 00:10:27,600
and your badge talks to this server in

00:10:25,920 --> 00:10:30,880
order to figure out if there is an

00:10:27,600 --> 00:10:33,360
update for it and we're going to have an

00:10:30,880 --> 00:10:35,839
update for you today and it's super cool

00:10:33,360 --> 00:10:38,160
uh and your badges are all just gonna

00:10:35,839 --> 00:10:40,079
detect this and automatically update

00:10:38,160 --> 00:10:41,200
um you can control your badge also by

00:10:40,079 --> 00:10:44,240
sending messages it

00:10:41,200 --> 00:10:46,079
to it from an mqtt client and uh

00:10:44,240 --> 00:10:47,839
i saw on twitter that someone's already

00:10:46,079 --> 00:10:50,640
written a web console

00:10:47,839 --> 00:10:51,440
so you can use that to send messages to

00:10:50,640 --> 00:10:54,560
your badge

00:10:51,440 --> 00:10:57,120
from from his web console super cool

00:10:54,560 --> 00:10:57,920
um we're planning on building a whole

00:10:57,120 --> 00:10:59,680
bunch of other stuff

00:10:57,920 --> 00:11:01,519
so many ideas being able to send

00:10:59,680 --> 00:11:03,040
encrypted messages from one badge

00:11:01,519 --> 00:11:05,200
to another badge so you can talk to

00:11:03,040 --> 00:11:06,560
another attendee

00:11:05,200 --> 00:11:07,920
but what i'm really looking forward to

00:11:06,560 --> 00:11:09,200
is seeing what all of you guys are going

00:11:07,920 --> 00:11:11,200
to get up to

00:11:09,200 --> 00:11:12,800
so hopefully we'll uh we why we're not

00:11:11,200 --> 00:11:14,240
going to be able to do lightning talks

00:11:12,800 --> 00:11:15,920
i'm hoping that we'll be able to have it

00:11:14,240 --> 00:11:19,760
hang out and have a chat in the

00:11:15,920 --> 00:11:21,600
hardware buff channel and you can show

00:11:19,760 --> 00:11:23,279
us what you've been getting up to

00:11:21,600 --> 00:11:24,720
now if you don't want your badge talking

00:11:23,279 --> 00:11:28,720
mqtt

00:11:24,720 --> 00:11:29,839
you can also disable it

00:11:28,720 --> 00:11:31,839
all right that's enough of the

00:11:29,839 --> 00:11:35,120
background on what we're building

00:11:31,839 --> 00:11:36,640
time to power it up so can be a bit

00:11:35,120 --> 00:11:38,560
scary if you've never really used

00:11:36,640 --> 00:11:40,720
hardware before i know i'm only new to

00:11:38,560 --> 00:11:42,399
it uh last couple of years

00:11:40,720 --> 00:11:43,760
these fine folks of the hardware team

00:11:42,399 --> 00:11:44,320
have been bringing me up to speed and

00:11:43,760 --> 00:11:45,760
being

00:11:44,320 --> 00:11:47,839
very patient while i ask them all the

00:11:45,760 --> 00:11:50,160
questions and i've asked them all the

00:11:47,839 --> 00:11:53,440
questions so now i can teach you

00:11:50,160 --> 00:11:54,639
now we're uh going to give you enough

00:11:53,440 --> 00:11:57,200
information so that you can

00:11:54,639 --> 00:11:57,920
comfortably can and confidently turn it

00:11:57,200 --> 00:12:00,240
on

00:11:57,920 --> 00:12:01,920
so when you badge first fires up after

00:12:00,240 --> 00:12:03,120
you've plugged it into the micro usb

00:12:01,920 --> 00:12:05,760
port

00:12:03,120 --> 00:12:07,519
it will have no network it doesn't know

00:12:05,760 --> 00:12:08,880
what your wi-fi password is

00:12:07,519 --> 00:12:12,160
and so it's going to come up and it's

00:12:08,880 --> 00:12:14,880
going to say configure me

00:12:12,160 --> 00:12:15,680
what you do is then you grab your phone

00:12:14,880 --> 00:12:17,600
and you

00:12:15,680 --> 00:12:19,120
have a look at the wi-fi networks that

00:12:17,600 --> 00:12:20,399
are available and you connect to your

00:12:19,120 --> 00:12:22,160
badge and your badge

00:12:20,399 --> 00:12:24,880
stands up a temporary network point and

00:12:22,160 --> 00:12:27,519
it'll start with ico

00:12:24,880 --> 00:12:28,959
once your phone is connected to the to

00:12:27,519 --> 00:12:31,360
the badges wi-fi

00:12:28,959 --> 00:12:34,000
you can go to its web server address

00:12:31,360 --> 00:12:35,920
that's displayed on the badges screen

00:12:34,000 --> 00:12:37,760
it'll prompt you for your wi-fi network

00:12:35,920 --> 00:12:40,560
and password

00:12:37,760 --> 00:12:42,800
once you've saved that the badge reboots

00:12:40,560 --> 00:12:44,240
so it's temporary wi-fi point drops off

00:12:42,800 --> 00:12:46,079
so your phone will go back to connecting

00:12:44,240 --> 00:12:48,320
to whatever network it was on

00:12:46,079 --> 00:12:50,320
the badge reboots it then will sit up

00:12:48,320 --> 00:12:50,720
and talk to your network again and it'll

00:12:50,320 --> 00:12:54,480
say

00:12:50,720 --> 00:12:57,040
i am connected awesome

00:12:54,480 --> 00:12:59,360
your bed is connected i'm sure it'll be

00:12:57,040 --> 00:12:59,360
fine

00:13:01,600 --> 00:13:06,800
now the ico software that framework that

00:13:04,480 --> 00:13:09,279
we've got running on here has got

00:13:06,800 --> 00:13:10,720
a bunch of help assistance functions

00:13:09,279 --> 00:13:12,959
taking place

00:13:10,720 --> 00:13:15,839
and you can see some data that will tend

00:13:12,959 --> 00:13:17,120
to show up in the title bar

00:13:15,839 --> 00:13:19,040
some of the things that i've mentioned

00:13:17,120 --> 00:13:21,440
in this slide don't exist in

00:13:19,040 --> 00:13:22,639
your version yet but it's coming soon so

00:13:21,440 --> 00:13:24,560
i want to talk to you about it so you

00:13:22,639 --> 00:13:27,760
know what it is when it appears

00:13:24,560 --> 00:13:29,040
um it'll start up by saying you will see

00:13:27,760 --> 00:13:30,480
c and that means that something's

00:13:29,040 --> 00:13:31,440
connecting and so that's that's it

00:13:30,480 --> 00:13:34,240
trying to talk to

00:13:31,440 --> 00:13:34,639
your wifi network w means your wi-fi is

00:13:34,240 --> 00:13:37,120
on

00:13:34,639 --> 00:13:39,040
m is the mqtt is connected l means

00:13:37,120 --> 00:13:40,000
system log messages are available and

00:13:39,040 --> 00:13:42,000
soon there's going to be

00:13:40,000 --> 00:13:44,480
f which means firmware upgrade is

00:13:42,000 --> 00:13:44,480
available

00:13:46,560 --> 00:13:49,760
uh then we get into the actual software

00:13:49,360 --> 00:13:52,880
that we

00:13:49,760 --> 00:13:56,160
ship with so out of the box

00:13:52,880 --> 00:13:58,079
the app will notify you soon about

00:13:56,160 --> 00:14:00,480
upcoming talk sessions people who have

00:13:58,079 --> 00:14:01,920
been monitoring the mqtt server can see

00:14:00,480 --> 00:14:02,399
the messages that i've been sending

00:14:01,920 --> 00:14:03,680
through

00:14:02,399 --> 00:14:06,000
soon your badge will tell you about

00:14:03,680 --> 00:14:08,240
those so you'll never miss another talk

00:14:06,000 --> 00:14:09,839
isn't that cool uh and you'll be able to

00:14:08,240 --> 00:14:11,839
configure which streams interest you in

00:14:09,839 --> 00:14:13,360
its configuration file but that requires

00:14:11,839 --> 00:14:14,720
that you put a development environment

00:14:13,360 --> 00:14:17,040
set up for that

00:14:14,720 --> 00:14:18,560
not trivial but we do have step-by-step

00:14:17,040 --> 00:14:21,839
instructions in the wiki for major

00:14:18,560 --> 00:14:21,839
operating systems to do that

00:14:23,760 --> 00:14:27,120
but what would it be if it didn't do

00:14:25,920 --> 00:14:29,600
other stuff as well

00:14:27,120 --> 00:14:31,360
so it also ships with a demo of that

00:14:29,600 --> 00:14:33,519
classic game snake

00:14:31,360 --> 00:14:36,079
uh there's you know when you're only

00:14:33,519 --> 00:14:38,959
stuck with a teeny tiny screen

00:14:36,079 --> 00:14:39,760
building like an mmo is maybe out of the

00:14:38,959 --> 00:14:41,199
question

00:14:39,760 --> 00:14:43,360
but it does have a choose your own

00:14:41,199 --> 00:14:45,279
adventure game engine complete with a

00:14:43,360 --> 00:14:47,040
choose your own adventure

00:14:45,279 --> 00:14:49,040
about a cat that wants to learn how to

00:14:47,040 --> 00:14:50,000
fly and it has to talk to a dragon to do

00:14:49,040 --> 00:14:52,000
it

00:14:50,000 --> 00:14:53,839
uh we've shipped every badge with an

00:14:52,000 --> 00:14:56,240
encryption key so that we'll be able to

00:14:53,839 --> 00:14:57,120
do securely encrypted messages so nobody

00:14:56,240 --> 00:14:58,560
can see

00:14:57,120 --> 00:15:00,320
the messages that you're sending to one

00:14:58,560 --> 00:15:01,600
another about how much cake you'd like

00:15:00,320 --> 00:15:05,360
to eat

00:15:01,600 --> 00:15:05,360
and obviously it's mqtt capable

00:15:06,720 --> 00:15:10,560
now we don't want you to let out the

00:15:08,160 --> 00:15:11,040
magic smoke or brick your brand new

00:15:10,560 --> 00:15:13,120
badge

00:15:11,040 --> 00:15:14,079
or electrocute yourself or others or set

00:15:13,120 --> 00:15:16,720
fire to things

00:15:14,079 --> 00:15:20,160
so there's a few provisos a couple of

00:15:16,720 --> 00:15:20,160
quid pro quo's

00:15:20,880 --> 00:15:24,800
your badge is electrical water and

00:15:22,800 --> 00:15:26,320
electricity don't mix

00:15:24,800 --> 00:15:28,880
don't bath with your badge or take it to

00:15:26,320 --> 00:15:32,560
the pool you'll short it out

00:15:28,880 --> 00:15:34,639
and that's bad so water's no good

00:15:32,560 --> 00:15:36,560
this scenario is right out but i will

00:15:34,639 --> 00:15:41,839
say don't put it in your mouth either

00:15:36,560 --> 00:15:41,839
you'll short it out and that's bad

00:15:43,440 --> 00:15:47,199
look at this terrifying beast trying to

00:15:46,079 --> 00:15:50,720
look

00:15:47,199 --> 00:15:52,000
cool with its ice maker don't pin your

00:15:50,720 --> 00:15:53,839
badge to the fridge

00:15:52,000 --> 00:15:56,160
don't use magnets to pin your bed to the

00:15:53,839 --> 00:15:58,639
fridge the badge conductive and if it's

00:15:56,160 --> 00:16:02,000
powered you'll short it out

00:15:58,639 --> 00:16:02,000
and that's bad

00:16:02,320 --> 00:16:06,000
got a messy bench lots of electrical

00:16:04,000 --> 00:16:07,279
components on it and you just

00:16:06,000 --> 00:16:09,199
put your badge down there while you're

00:16:07,279 --> 00:16:14,800
messing with it you might short it out

00:16:09,199 --> 00:16:18,720
and say it with me that's bad

00:16:14,800 --> 00:16:18,720
so what i'm saying is

00:16:18,880 --> 00:16:25,040
there is

00:16:22,160 --> 00:16:25,759
no spoon or any other conductive

00:16:25,040 --> 00:16:29,600
implement

00:16:25,759 --> 00:16:29,600
that's safe around a circuit board

00:16:29,920 --> 00:16:33,440
so how do you keep your badge safe from

00:16:32,560 --> 00:16:37,360
shorts

00:16:33,440 --> 00:16:40,880
i mean shorting out um

00:16:37,360 --> 00:16:42,399
well you can shoot it with a glue gun

00:16:40,880 --> 00:16:44,959
we what we were aiming to do is put

00:16:42,399 --> 00:16:46,240
little feet on the corners so that if

00:16:44,959 --> 00:16:48,399
you put your badge down on something

00:16:46,240 --> 00:16:50,240
it's not going to accidentally short out

00:16:48,399 --> 00:16:52,320
you can use blue tack give it some blob

00:16:50,240 --> 00:16:53,759
feet or in fact any other kind of feet

00:16:52,320 --> 00:16:54,320
that come to mind whether that's rubber

00:16:53,759 --> 00:16:56,399
washers

00:16:54,320 --> 00:16:57,600
bits of lego or those little sticky

00:16:56,399 --> 00:16:59,360
furniture protectors

00:16:57,600 --> 00:17:00,800
doesn't really matter but having some

00:16:59,360 --> 00:17:01,839
feet so that it's not going to rest on

00:17:00,800 --> 00:17:05,919
something accidentally

00:17:01,839 --> 00:17:08,959
good idea but i know you want more

00:17:05,919 --> 00:17:11,280
so the bench that we ship with you

00:17:08,959 --> 00:17:13,120
it's got opt-in automatic firmware

00:17:11,280 --> 00:17:15,199
updates so it will not automatically

00:17:13,120 --> 00:17:18,000
update unless you push a magic button

00:17:15,199 --> 00:17:21,039
combination which is

00:17:18,000 --> 00:17:22,799
two fingers on the lower sliders it will

00:17:21,039 --> 00:17:24,400
pull the lattice down from github and

00:17:22,799 --> 00:17:26,240
install it for you

00:17:24,400 --> 00:17:27,839
no fancy environment required on your

00:17:26,240 --> 00:17:30,240
desktop if you don't need it

00:17:27,839 --> 00:17:32,000
and want it we can have multiple

00:17:30,240 --> 00:17:34,799
applications going on

00:17:32,000 --> 00:17:36,720
uh but this is a tech conference we like

00:17:34,799 --> 00:17:37,440
hacking we want hacking we actively

00:17:36,720 --> 00:17:40,240
encourage

00:17:37,440 --> 00:17:41,760
hacking the good kind anyway so the

00:17:40,240 --> 00:17:42,559
software is extensible and we want you

00:17:41,760 --> 00:17:45,440
to write your own

00:17:42,559 --> 00:17:47,039
and the hardware is extensible and if

00:17:45,440 --> 00:17:48,720
you'd like some more details about that

00:17:47,039 --> 00:17:50,799
check out john and john after the break

00:17:48,720 --> 00:17:53,840
and they'll be talking about the add-ons

00:17:50,799 --> 00:17:56,240
and the hardware that made up the badge

00:17:53,840 --> 00:17:58,640
right now imagining you guys all at home

00:17:56,240 --> 00:18:00,960
right now hacking away on your badge

00:17:58,640 --> 00:18:03,200
girls getting out your badges all of the

00:18:00,960 --> 00:18:06,080
people

00:18:03,200 --> 00:18:07,600
alright so who put this thing together

00:18:06,080 --> 00:18:10,080
these are amazing people

00:18:07,600 --> 00:18:10,880
and uh i mentioned that we started off

00:18:10,080 --> 00:18:13,919
back in

00:18:10,880 --> 00:18:15,200
september october last year our lives

00:18:13,919 --> 00:18:16,720
have been on hold while we've been

00:18:15,200 --> 00:18:17,600
putting this together it's the scope and

00:18:16,720 --> 00:18:20,720
size

00:18:17,600 --> 00:18:22,799
of a decent kickstarter as in fact our

00:18:20,720 --> 00:18:24,400
projects are every year

00:18:22,799 --> 00:18:26,080
but this time we had to deliver before

00:18:24,400 --> 00:18:28,880
christmas very weird

00:18:26,080 --> 00:18:29,360
kind of great uh if you're looking for

00:18:28,880 --> 00:18:30,640
help

00:18:29,360 --> 00:18:32,080
these are the key people who will be

00:18:30,640 --> 00:18:32,960
able to help you out over the course of

00:18:32,080 --> 00:18:35,360
the conference

00:18:32,960 --> 00:18:37,200
you'll be able to find us uh in the chat

00:18:35,360 --> 00:18:39,200
rooms in the open hardware buff session

00:18:37,200 --> 00:18:41,200
which we'll be running at lunchtime

00:18:39,200 --> 00:18:42,880
uh and probably other times we'll be

00:18:41,200 --> 00:18:44,320
hanging around as well or come and talk

00:18:42,880 --> 00:18:46,240
to us on spectrum

00:18:44,320 --> 00:18:48,240
so the link to a lot of this is in the

00:18:46,240 --> 00:18:50,559
piece of paper that came with your swag

00:18:48,240 --> 00:18:50,559
patch

00:18:54,240 --> 00:19:00,880
so if you need more help where do you go

00:18:57,840 --> 00:19:04,000
there's the wiki openhardwareconf

00:19:00,880 --> 00:19:06,080
dot org i think uh

00:19:04,000 --> 00:19:07,200
hey it was yes i've even got the url

00:19:06,080 --> 00:19:08,000
there i could have just read it off the

00:19:07,200 --> 00:19:10,559
screen

00:19:08,000 --> 00:19:12,160
um so there's this getting started guide

00:19:10,559 --> 00:19:13,760
in there there's information about

00:19:12,160 --> 00:19:15,120
the software it ships with and how to

00:19:13,760 --> 00:19:16,960
write your own there's information about

00:19:15,120 --> 00:19:18,880
the hardware it ships with and what

00:19:16,960 --> 00:19:21,280
where to write your own

00:19:18,880 --> 00:19:23,039
sorry people who aren't in australia and

00:19:21,280 --> 00:19:24,160
want one of these and want a dag badge

00:19:23,039 --> 00:19:26,559
there is information

00:19:24,160 --> 00:19:28,480
on the components to build your own dag

00:19:26,559 --> 00:19:29,919
badge but the information about hooking

00:19:28,480 --> 00:19:30,880
it up is still a little bit lightweight

00:19:29,919 --> 00:19:33,520
we've been

00:19:30,880 --> 00:19:34,960
so furiously focused on lca that we

00:19:33,520 --> 00:19:35,600
haven't quite caught up with our dag

00:19:34,960 --> 00:19:38,080
badge

00:19:35,600 --> 00:19:39,919
hopes and dreams but they're coming soon

00:19:38,080 --> 00:19:42,080
and being a wiki if you get

00:19:39,919 --> 00:19:43,520
get to it ahead of us we'd love to have

00:19:42,080 --> 00:19:45,600
your contribution

00:19:43,520 --> 00:19:47,280
uh so we've got spectrum set up that's

00:19:45,600 --> 00:19:50,640
attached to our github

00:19:47,280 --> 00:19:51,280
we are featured in diode issue 41. super

00:19:50,640 --> 00:19:53,840
cool

00:19:51,280 --> 00:19:54,400
so you can check that out uh a sponsor

00:19:53,840 --> 00:19:58,400
of the

00:19:54,400 --> 00:20:00,640
conference um and you can catch me on

00:19:58,400 --> 00:20:04,000
twitter at swagbadge2021

00:20:00,640 --> 00:20:06,240
for all your delightful mimi needs

00:20:04,000 --> 00:20:08,159
uh that's it from me so now we're gonna

00:20:06,240 --> 00:20:08,400
follow up with andy and he's gonna come

00:20:08,159 --> 00:20:09,919
in

00:20:08,400 --> 00:20:11,919
and tell you more about the ico

00:20:09,919 --> 00:20:12,799
framework and the ways in which you can

00:20:11,919 --> 00:20:16,240
use it to

00:20:12,799 --> 00:20:16,240
help build your own applications

00:20:16,960 --> 00:20:21,840
sure thanks

00:20:30,559 --> 00:20:35,760
it's only the slides hey everyone we're

00:20:34,240 --> 00:20:36,720
just doing a speaker changeover right

00:20:35,760 --> 00:20:39,840
now

00:20:36,720 --> 00:20:43,679
so uh

00:20:39,840 --> 00:20:45,039
you just want the terminal

00:20:43,679 --> 00:20:49,120
do you have any slides in here or just

00:20:45,039 --> 00:20:52,559
terminal yes just switch to the terminal

00:20:49,120 --> 00:21:02,480
yep got it good to go

00:20:52,559 --> 00:21:05,919
and overhead camera yep

00:21:02,480 --> 00:21:08,000
that's it okay well good morning so

00:21:05,919 --> 00:21:09,360
i'm using uh all john's uh gear which is

00:21:08,000 --> 00:21:10,640
lots of monitors and keyboards and

00:21:09,360 --> 00:21:12,000
things so it's um

00:21:10,640 --> 00:21:14,320
all unfamiliar so hopefully this all

00:21:12,000 --> 00:21:15,039
works out okay so um this morning i'd

00:21:14,320 --> 00:21:17,760
just like to

00:21:15,039 --> 00:21:18,159
introduce you to the firmware um this is

00:21:17,760 --> 00:21:20,240
a

00:21:18,159 --> 00:21:21,360
the software that's running on the esp32

00:21:20,240 --> 00:21:23,360
microcontroller

00:21:21,360 --> 00:21:25,039
uh on top of micropython uh we

00:21:23,360 --> 00:21:26,240
specifically chose micropython because

00:21:25,039 --> 00:21:28,080
we're hoping to uh

00:21:26,240 --> 00:21:30,000
i guess reach the largest audience

00:21:28,080 --> 00:21:32,559
possible so hopefully everyone uh

00:21:30,000 --> 00:21:34,720
attending lca is um feels brave enough

00:21:32,559 --> 00:21:36,320
to jump in and play with python

00:21:34,720 --> 00:21:37,919
and i'm happy to give you a bit of a

00:21:36,320 --> 00:21:39,280
tour of the code so rather than using

00:21:37,919 --> 00:21:40,559
slides i'll be basically taking through

00:21:39,280 --> 00:21:42,159
source code and also looking at the

00:21:40,559 --> 00:21:44,480
console log on the uh

00:21:42,159 --> 00:21:45,679
on the swag badge so what i'm having to

00:21:44,480 --> 00:21:48,400
cover is to um

00:21:45,679 --> 00:21:49,280
how we connect to the esp32 and uh and

00:21:48,400 --> 00:21:51,280
work with the uh

00:21:49,280 --> 00:21:54,320
the micropython replica which is just uh

00:21:51,280 --> 00:21:57,440
the interpreter um

00:21:54,320 --> 00:21:58,960
command and evaluation uh check out some

00:21:57,440 --> 00:22:00,159
of the low level functions how we

00:21:58,960 --> 00:22:01,520
interact with the hardware peripherals

00:22:00,159 --> 00:22:04,880
the uh the pins and the

00:22:01,520 --> 00:22:07,039
touch sliders the uh the oled screens

00:22:04,880 --> 00:22:08,159
and uh then the two of the high level

00:22:07,039 --> 00:22:09,280
framework and then

00:22:08,159 --> 00:22:12,559
just to quickly chat about the

00:22:09,280 --> 00:22:14,640
applications so uh our project goals

00:22:12,559 --> 00:22:16,159
were twofold at least from the firmware

00:22:14,640 --> 00:22:17,360
perspective the first was um when the

00:22:16,159 --> 00:22:20,559
hardware shipped

00:22:17,360 --> 00:22:22,400
um we knew we had a we're mostly going

00:22:20,559 --> 00:22:24,400
to be focused on developing the hardware

00:22:22,400 --> 00:22:25,919
and uh the firmware would come second we

00:22:24,400 --> 00:22:27,440
did have to ship with um something that

00:22:25,919 --> 00:22:29,200
could um connect to your wi-fi

00:22:27,440 --> 00:22:30,320
and then upgrade itself because uh we

00:22:29,200 --> 00:22:31,520
you're gonna have about another sort of

00:22:30,320 --> 00:22:33,120
four weeks to

00:22:31,520 --> 00:22:34,559
develop code afterwards ship the

00:22:33,120 --> 00:22:37,120
hardware and

00:22:34,559 --> 00:22:37,760
uh and the other the other goal was um

00:22:37,120 --> 00:22:39,039
once once

00:22:37,760 --> 00:22:41,120
we got the batch to rca that we're gonna

00:22:39,039 --> 00:22:42,320
have to um i guess address

00:22:41,120 --> 00:22:44,159
i think roughly three different types of

00:22:42,320 --> 00:22:46,080
audience there'd be those people who are

00:22:44,159 --> 00:22:47,600
new to microcontrollers so maybe they're

00:22:46,080 --> 00:22:49,360
familiar with python and they probably

00:22:47,600 --> 00:22:50,880
maybe just use the framework to have a

00:22:49,360 --> 00:22:53,679
creating application

00:22:50,880 --> 00:22:54,000
uh second type of uh audience to be the

00:22:53,679 --> 00:22:55,440
uh

00:22:54,000 --> 00:22:57,039
people who are experienced of hardware

00:22:55,440 --> 00:22:58,080
so they probably want to get right into

00:22:57,039 --> 00:23:00,000
it and um

00:22:58,080 --> 00:23:01,520
if you uh you mark well we'll be talking

00:23:00,000 --> 00:23:02,880
a little bit later today and um

00:23:01,520 --> 00:23:04,320
maybe we'll be able to show you some of

00:23:02,880 --> 00:23:05,120
the crazy hacks he's done he's been

00:23:04,320 --> 00:23:06,480
basically

00:23:05,120 --> 00:23:08,240
took out his drawings he's drilled into

00:23:06,480 --> 00:23:08,720
his swag badge he's added more screens

00:23:08,240 --> 00:23:11,039
he's got

00:23:08,720 --> 00:23:11,919
he's already gone for it uh and the now

00:23:11,039 --> 00:23:13,200
the third

00:23:11,919 --> 00:23:14,400
audience the person about somebody's

00:23:13,200 --> 00:23:15,679
probably he's just having a badge but

00:23:14,400 --> 00:23:18,400
not necessarily programming it

00:23:15,679 --> 00:23:20,480
and so choosing mqtt means that um you

00:23:18,400 --> 00:23:22,320
can send messages to and from the badge

00:23:20,480 --> 00:23:23,520
without without having to do any um any

00:23:22,320 --> 00:23:25,120
programming and sort of interact with

00:23:23,520 --> 00:23:28,240
the hardware that way

00:23:25,120 --> 00:23:29,760
so um so we didn't want to uh

00:23:28,240 --> 00:23:31,679
give you give it keep something to

00:23:29,760 --> 00:23:34,000
complete um with uh

00:23:31,679 --> 00:23:35,039
over the years the mini conf has always

00:23:34,000 --> 00:23:36,880
been about assembly

00:23:35,039 --> 00:23:38,960
so unfortunately we have to um fully

00:23:36,880 --> 00:23:40,799
assemble assemble it for you so um

00:23:38,960 --> 00:23:42,159
that was a lot of work that was um 300

00:23:40,799 --> 00:23:44,799
badges to make

00:23:42,159 --> 00:23:45,840
normally we normally uh provide the

00:23:44,799 --> 00:23:49,039
parts to make

00:23:45,840 --> 00:23:51,679
50 kits so it's a huge assembly job

00:23:49,039 --> 00:23:52,640
but and but we still want to be like

00:23:51,679 --> 00:23:54,000
like lego where

00:23:52,640 --> 00:23:56,000
you take it out of the box you have to

00:23:54,000 --> 00:23:57,360
um build some stuff up yourself and so

00:23:56,000 --> 00:23:59,039
it'll be like that from the firmware the

00:23:57,360 --> 00:24:02,960
firmware perspective

00:23:59,039 --> 00:24:06,559
uh right so um let's see so

00:24:02,960 --> 00:24:09,360
micropython on there on an esp32

00:24:06,559 --> 00:24:11,520
is pretty much full python 3. um roughly

00:24:09,360 --> 00:24:13,520
version 3.4 so um

00:24:11,520 --> 00:24:15,039
what's different is mostly the modules

00:24:13,520 --> 00:24:17,440
you're not going to be doing um

00:24:15,039 --> 00:24:18,480
you know large i guess database web

00:24:17,440 --> 00:24:20,080
applications and this you're

00:24:18,480 --> 00:24:21,440
going to be doing using modules um that

00:24:20,080 --> 00:24:22,720
interact with with the hardware the

00:24:21,440 --> 00:24:24,240
screens and the pins

00:24:22,720 --> 00:24:25,440
so that's that's going to be i guess the

00:24:24,240 --> 00:24:27,039
major difference if you're familiar with

00:24:25,440 --> 00:24:28,240
python is the the choice of modules that

00:24:27,039 --> 00:24:29,679
you use

00:24:28,240 --> 00:24:33,039
um but some of the modules some of the

00:24:29,679 --> 00:24:34,320
modules like um os and cis

00:24:33,039 --> 00:24:36,080
there's cut down version that you might

00:24:34,320 --> 00:24:37,440
be quite familiar with

00:24:36,080 --> 00:24:39,120
okay so let's um let's have a look at

00:24:37,440 --> 00:24:41,520
the um the machine

00:24:39,120 --> 00:24:42,400
so i'll just bring up the terminal now

00:24:41,520 --> 00:24:45,760
so

00:24:42,400 --> 00:24:48,880
what i've got on the left here is just

00:24:45,760 --> 00:24:50,159
just uploads the uh the fastest uh john

00:24:48,880 --> 00:24:53,440
have you got this in um

00:24:50,159 --> 00:24:56,480
uh the work mode john john

00:24:53,440 --> 00:24:58,799
does not use um us or

00:24:56,480 --> 00:25:00,240
english layer to use davorak so um i've

00:24:58,799 --> 00:25:03,039
got no idea how to use it

00:25:00,240 --> 00:25:04,400
fixed there we go i can type again

00:25:03,039 --> 00:25:07,360
fantastic

00:25:04,400 --> 00:25:08,720
uh so if on this is just a clone of the

00:25:07,360 --> 00:25:11,200
github repository

00:25:08,720 --> 00:25:13,039
and probably the three main areas to

00:25:11,200 --> 00:25:14,720
look at is um

00:25:13,039 --> 00:25:16,480
under applications we've got some

00:25:14,720 --> 00:25:17,919
example applications there the main the

00:25:16,480 --> 00:25:21,279
main one we'll be looking at is

00:25:17,919 --> 00:25:24,320
applications uh swag badge um

00:25:21,279 --> 00:25:28,240
and also um applications uh

00:25:24,320 --> 00:25:30,320
schedules uh the scheduler is um the

00:25:28,240 --> 00:25:31,440
application that nicola wrote that um

00:25:30,320 --> 00:25:32,720
knows how to um

00:25:31,440 --> 00:25:34,400
listen to mqtt messages around the

00:25:32,720 --> 00:25:35,760
schedule and display those on the screen

00:25:34,400 --> 00:25:36,640
so that's that's in the applications

00:25:35,760 --> 00:25:39,279
area

00:25:36,640 --> 00:25:40,559
um the other directory is configuration

00:25:39,279 --> 00:25:42,480
um

00:25:40,559 --> 00:25:44,240
and for each each of the modules in the

00:25:42,480 --> 00:25:45,760
framework there's a configuration file

00:25:44,240 --> 00:25:48,240
so there's a file there for like

00:25:45,760 --> 00:25:50,400
configuration mqtt from know how to

00:25:48,240 --> 00:25:53,360
configure mqtt

00:25:50,400 --> 00:25:54,799
um and the other the other areas are the

00:25:53,360 --> 00:25:57,919
library area so

00:25:54,799 --> 00:25:59,679
uh in under library that's um library

00:25:57,919 --> 00:26:01,840
ico that's all the all the framework

00:25:59,679 --> 00:26:03,440
framework elements and so there's um uh

00:26:01,840 --> 00:26:04,400
code there for dealing with buttons and

00:26:03,440 --> 00:26:07,919
the uh

00:26:04,400 --> 00:26:09,840
mqt the networking the oleds um

00:26:07,919 --> 00:26:11,520
doing up upgrades is even a web server

00:26:09,840 --> 00:26:13,919
and a web client so that's all there so

00:26:11,520 --> 00:26:15,919
that's the three main three main areas

00:26:13,919 --> 00:26:18,240
we'll go we'll do a tour on

00:26:15,919 --> 00:26:19,200
and um the the other thing i've got on

00:26:18,240 --> 00:26:23,360
the right hand side

00:26:19,200 --> 00:26:26,559
is um that's actually um joins machine

00:26:23,360 --> 00:26:29,520
is uh this is a the uh tool

00:26:26,559 --> 00:26:31,760
for um interacting with the uh device so

00:26:29,520 --> 00:26:31,760
um

00:26:32,320 --> 00:26:35,840
so i'm just uh holding down these two

00:26:33,919 --> 00:26:37,279
buttons that um i mean

00:26:35,840 --> 00:26:39,919
the framework doesn't run so it should

00:26:37,279 --> 00:26:42,480
uh boot up a bit faster okay cool

00:26:39,919 --> 00:26:43,360
so this this talk which is um called mpf

00:26:42,480 --> 00:26:44,799
shell

00:26:43,360 --> 00:26:46,400
uh which you just uh just do a pip

00:26:44,799 --> 00:26:49,440
installing mpf

00:26:46,400 --> 00:26:50,960
shoulder to get it allows you to um have

00:26:49,440 --> 00:26:52,720
a bunch of commands to interact with the

00:26:50,960 --> 00:26:54,720
the device then go

00:26:52,720 --> 00:26:55,760
a bit like the old school ftp servers we

00:26:54,720 --> 00:26:57,360
can basically go

00:26:55,760 --> 00:26:59,760
lls for looking at your local file

00:26:57,360 --> 00:27:00,320
system we can go ls for looking at the

00:26:59,760 --> 00:27:03,120
uh

00:27:00,320 --> 00:27:04,960
the micro controller file system so um

00:27:03,120 --> 00:27:06,720
so you've got ls you can cd

00:27:04,960 --> 00:27:09,039
into into directories like apps right

00:27:06,720 --> 00:27:12,960
there's no file completion

00:27:09,039 --> 00:27:16,000
so cd into uh applications

00:27:12,960 --> 00:27:16,480
and do analysts there um so you guys you

00:27:16,000 --> 00:27:18,159
can

00:27:16,480 --> 00:27:20,960
look at the the file system on the usb

00:27:18,159 --> 00:27:21,279
32 and you can also um put files there

00:27:20,960 --> 00:27:25,520
so

00:27:21,279 --> 00:27:28,799
if i want to make a change um oops

00:27:25,520 --> 00:27:31,600
next one so so say so

00:27:28,799 --> 00:27:33,120
to make a change i could edit a file on

00:27:31,600 --> 00:27:35,360
the um

00:27:33,120 --> 00:27:36,320
here so i basically could edit edit main

00:27:35,360 --> 00:27:39,120
um

00:27:36,320 --> 00:27:39,520
and uh let's put a change in here so i'm

00:27:39,120 --> 00:27:43,440
going to

00:27:39,520 --> 00:27:46,799
put a print statement in print hello

00:27:43,440 --> 00:27:49,600
lca 2021

00:27:46,799 --> 00:27:50,960
opposite john's john's is doing

00:27:49,600 --> 00:27:54,080
completion for me

00:27:50,960 --> 00:27:57,360
i can then i can then go and uh put

00:27:54,080 --> 00:27:57,360
put main onto the

00:27:57,440 --> 00:28:01,279
onto the device and now now when i go

00:28:00,559 --> 00:28:04,799
into the

00:28:01,279 --> 00:28:08,000
into the repo if i um if i

00:28:04,799 --> 00:28:11,919
now reboot the device

00:28:08,000 --> 00:28:12,480
just see this it says said hello lca21

00:28:11,919 --> 00:28:14,480
so i just

00:28:12,480 --> 00:28:15,919
headed on the fly so so that's that's

00:28:14,480 --> 00:28:16,480
pretty much the way you develop on the

00:28:15,919 --> 00:28:18,799
machine you

00:28:16,480 --> 00:28:19,919
you edit the file on the host use um mpf

00:28:18,799 --> 00:28:21,279
shell to do a put and

00:28:19,919 --> 00:28:22,720
there you go now we're just watching the

00:28:21,279 --> 00:28:23,520
rest of the machine come up so um we can

00:28:22,720 --> 00:28:25,760
see it's bringing up

00:28:23,520 --> 00:28:26,640
bringing up wi-fi linking to tron's

00:28:25,760 --> 00:28:28,480
router

00:28:26,640 --> 00:28:30,640
it's now connected to mqt and we can now

00:28:28,480 --> 00:28:33,679
we can now talk to that device

00:28:30,640 --> 00:28:35,039
so so i've got a standard mic uh python

00:28:33,679 --> 00:28:38,640
replica so we can um

00:28:35,039 --> 00:28:41,200
you know add add numbers and print

00:28:38,640 --> 00:28:42,320
printello so it's um it's really it's

00:28:41,200 --> 00:28:44,000
really quite a lot of fun to be able to

00:28:42,320 --> 00:28:47,360
interact directly with a microcontroller

00:28:44,000 --> 00:28:47,360
only i could type whilst talking

00:28:47,919 --> 00:28:51,760
and you can in and you can even you know

00:28:51,039 --> 00:28:55,200
so you can get

00:28:51,760 --> 00:28:56,799
get help so um that's that's um

00:28:55,200 --> 00:28:58,640
help is pretty useful because that shows

00:28:56,799 --> 00:29:00,559
us how to use all the all the rest

00:28:58,640 --> 00:29:01,440
all the various um python commands so

00:29:00,559 --> 00:29:01,679
especially if you do something like we

00:29:01,440 --> 00:29:05,039
go

00:29:01,679 --> 00:29:07,440
import machine which is a module for um

00:29:05,039 --> 00:29:08,720
interacting with the hardware you can

00:29:07,440 --> 00:29:10,799
just go help help machine

00:29:08,720 --> 00:29:12,399
and find out all the all things you can

00:29:10,799 --> 00:29:13,120
do through the machine so for example we

00:29:12,399 --> 00:29:16,159
can um

00:29:13,120 --> 00:29:21,039
we can create a gpu pin we go like pin

00:29:16,159 --> 00:29:24,399
uh pin equals uh pin pin number 12.

00:29:21,039 --> 00:29:27,840
oops that's right um that should be

00:29:24,399 --> 00:29:27,840
machine dot pin

00:29:28,640 --> 00:29:31,919
and uh and then we could do something

00:29:30,399 --> 00:29:33,679
like pin pin dot value and read the

00:29:31,919 --> 00:29:33,919
value of that of that hardware pin power

00:29:33,679 --> 00:29:36,080
it's

00:29:33,919 --> 00:29:37,679
kind of zero so i just want to give you

00:29:36,080 --> 00:29:40,559
a quick sense of what it's like to

00:29:37,679 --> 00:29:43,919
interact with it with the device

00:29:40,559 --> 00:29:46,000
now um once

00:29:43,919 --> 00:29:47,440
so once we do that once now we know how

00:29:46,000 --> 00:29:48,799
to interact device now it's a matter of

00:29:47,440 --> 00:29:50,080
having put some of the um some of the

00:29:48,799 --> 00:29:52,159
functions so

00:29:50,080 --> 00:29:54,080
um for example if i want to um look at

00:29:52,159 --> 00:29:57,279
the touch pin i can basically go

00:29:54,080 --> 00:30:02,080
um pin equals uh touch

00:29:57,279 --> 00:30:05,440
uh pin uh i think 12 is the touchpad

00:30:02,080 --> 00:30:05,919
like that oops sorry i've got to

00:30:05,440 --> 00:30:09,840
actually

00:30:05,919 --> 00:30:09,840
put machine on all these

00:30:12,240 --> 00:30:16,399
up so touchpad doing this all from

00:30:14,960 --> 00:30:19,440
memory

00:30:16,399 --> 00:30:20,080
right and we can go pin dot read and

00:30:19,440 --> 00:30:22,399
it's currently

00:30:20,080 --> 00:30:24,640
310 now if i touch that touch pad i

00:30:22,399 --> 00:30:26,720
think you think this is the right one

00:30:24,640 --> 00:30:27,760
yeah see if i take my finger away it's

00:30:26,720 --> 00:30:32,159
about 300.

00:30:27,760 --> 00:30:32,720
if i put my finger on it it's 120 so

00:30:32,159 --> 00:30:34,559
that shows

00:30:32,720 --> 00:30:36,080
you you're touching it and the and if

00:30:34,559 --> 00:30:39,600
you look at this slider

00:30:36,080 --> 00:30:41,200
if i move my finger along the slider

00:30:39,600 --> 00:30:43,840
you can see how the value is increasing

00:30:41,200 --> 00:30:45,360
as as my finger as my finger moves

00:30:43,840 --> 00:30:46,880
so this is this is a really cool thing

00:30:45,360 --> 00:30:48,480
about micropython microcontrollers you

00:30:46,880 --> 00:30:49,760
can just just interactively play

00:30:48,480 --> 00:30:52,480
uh to get a feel for how you want to

00:30:49,760 --> 00:30:54,799
write your code um

00:30:52,480 --> 00:30:56,080
so one one thing i mentioned is that um

00:30:54,799 --> 00:30:57,440
microprice is sitting on top of free

00:30:56,080 --> 00:31:00,720
rtos which is a

00:30:57,440 --> 00:31:01,039
fairly sophisticated um operating system

00:31:00,720 --> 00:31:03,120
for

00:31:01,039 --> 00:31:04,480
for microcontrollers so um which is also

00:31:03,120 --> 00:31:05,600
open source so it's actually actually

00:31:04,480 --> 00:31:07,679
quite a lot of um

00:31:05,600 --> 00:31:09,200
interesting things going on here okay so

00:31:07,679 --> 00:31:13,360
now another bit of a

00:31:09,200 --> 00:31:14,720
tour of the code so um

00:31:13,360 --> 00:31:17,039
the start the starting point is when the

00:31:14,720 --> 00:31:20,399
machine boots it effectively runs a

00:31:17,039 --> 00:31:22,640
piece of code called main.pi and uh

00:31:20,399 --> 00:31:23,919
often you would uh you would just uh

00:31:22,640 --> 00:31:24,799
start by putting your application

00:31:23,919 --> 00:31:27,120
directly into this

00:31:24,799 --> 00:31:28,159
uh filemaker.pie so you might want to um

00:31:27,120 --> 00:31:30,640
read a button

00:31:28,159 --> 00:31:32,720
write to the screen and uh maybe send a

00:31:30,640 --> 00:31:33,840
message you can do all that in main.pi

00:31:32,720 --> 00:31:36,080
but instead what we've done for this

00:31:33,840 --> 00:31:38,320
framework is we've basically

00:31:36,080 --> 00:31:39,120
put all the initialization of the system

00:31:38,320 --> 00:31:41,279
into this in

00:31:39,120 --> 00:31:42,559
in here so you can see we're um on line

00:31:41,279 --> 00:31:44,480
25 we're importing

00:31:42,559 --> 00:31:46,080
uh the event mechanism so obviously it

00:31:44,480 --> 00:31:47,200
gives us timers event times things of

00:31:46,080 --> 00:31:50,480
that

00:31:47,200 --> 00:31:52,000
networking for wi-fi mqt the system ui

00:31:50,480 --> 00:31:55,840
that allows us to um

00:31:52,000 --> 00:31:58,399
do firmware upgrades and so on and um

00:31:55,840 --> 00:31:59,200
we have leds if you like um rgb led

00:31:58,399 --> 00:32:02,159
streams

00:31:59,200 --> 00:32:04,240
as mark mullen does uh we can uh if

00:32:02,159 --> 00:32:06,880
we've got oled screens we enable those

00:32:04,240 --> 00:32:08,880
we've got the uh upgrade process and uh

00:32:06,880 --> 00:32:11,039
and then finally it's most interesting

00:32:08,880 --> 00:32:12,000
for for writing applications is we look

00:32:11,039 --> 00:32:14,159
and see if there's a

00:32:12,000 --> 00:32:16,000
an application defined we run that and

00:32:14,159 --> 00:32:18,399
then we then we run the event loop

00:32:16,000 --> 00:32:20,399
so that's what our framework is put into

00:32:18,399 --> 00:32:23,039
into um this main loop

00:32:20,399 --> 00:32:24,320
and if and uh and so one thing uh one

00:32:23,039 --> 00:32:25,760
things we want to do is uh run

00:32:24,320 --> 00:32:26,640
application so if we look in that

00:32:25,760 --> 00:32:29,840
configuration

00:32:26,640 --> 00:32:29,840
for main

00:32:30,720 --> 00:32:34,880
you'll see that um line eight that's

00:32:33,519 --> 00:32:35,760
that's where we change the application

00:32:34,880 --> 00:32:37,679
so

00:32:35,760 --> 00:32:39,200
so we said we want an application which

00:32:37,679 --> 00:32:41,600
is um nicholas scheduler

00:32:39,200 --> 00:32:42,559
and that's it and you can see we've got

00:32:41,600 --> 00:32:44,159
a whole bunch of

00:32:42,559 --> 00:32:46,480
other development applications as well

00:32:44,159 --> 00:32:49,279
so so that's

00:32:46,480 --> 00:32:51,679
where we use configuration to um uh make

00:32:49,279 --> 00:32:55,519
changes in the framework so that's main

00:32:51,679 --> 00:32:56,960
so that's the main code and

00:32:55,519 --> 00:32:58,399
and that's pretty much uh calling

00:32:56,960 --> 00:33:00,000
calling all these low-level functions in

00:32:58,399 --> 00:33:02,880
the in the framework so

00:33:00,000 --> 00:33:03,840
to um have a have a look at those like

00:33:02,880 --> 00:33:05,519
if we um

00:33:03,840 --> 00:33:06,960
the first one intentional has is

00:33:05,519 --> 00:33:09,760
networking so just

00:33:06,960 --> 00:33:11,360
down to the library down to ico look at

00:33:09,760 --> 00:33:13,440
networking

00:33:11,360 --> 00:33:14,960
we'll see that the very bottom has an

00:33:13,440 --> 00:33:17,200
initialized method

00:33:14,960 --> 00:33:19,039
this initialized method starts off a

00:33:17,200 --> 00:33:20,640
background thread to keep the keep wi-fi

00:33:19,039 --> 00:33:22,240
going

00:33:20,640 --> 00:33:24,080
and the other thing we do is we also

00:33:22,240 --> 00:33:26,720
start in qdt so

00:33:24,080 --> 00:33:27,679
um so that's that's what the what

00:33:26,720 --> 00:33:30,000
network is mostly

00:33:27,679 --> 00:33:31,840
looking after for you and uh if we just

00:33:30,000 --> 00:33:34,399
look at what the the loop is doing

00:33:31,840 --> 00:33:35,840
that loop is basically going to um

00:33:34,399 --> 00:33:37,200
change this little enunciator which

00:33:35,840 --> 00:33:38,159
basically says hey what's the state of

00:33:37,200 --> 00:33:41,440
wi-fi

00:33:38,159 --> 00:33:44,720
we try and make a connection to wi-fi um

00:33:41,440 --> 00:33:45,440
and then if our uh wi-fi is uh connected

00:33:44,720 --> 00:33:47,360
that's fine

00:33:45,440 --> 00:33:48,799
and then if we need to connect and we

00:33:47,360 --> 00:33:49,760
start we start again this is basically a

00:33:48,799 --> 00:33:51,039
loop that will um

00:33:49,760 --> 00:33:53,519
continue to loop around trying to

00:33:51,039 --> 00:33:55,200
connect connect to the wi-fi um

00:33:53,519 --> 00:33:56,880
uh keep it alive and then disconnect if

00:33:55,200 --> 00:33:58,320
it needs to and then

00:33:56,880 --> 00:34:00,159
after a period of time if we can't

00:33:58,320 --> 00:34:01,679
connect to wi-fi what it does is

00:34:00,159 --> 00:34:04,640
actually

00:34:01,679 --> 00:34:06,000
down the bottom here we'll start a wi-fi

00:34:04,640 --> 00:34:08,639
configuration process which

00:34:06,000 --> 00:34:10,000
um what happens is when you first get

00:34:08,639 --> 00:34:11,679
get your badge home

00:34:10,000 --> 00:34:13,040
uh it doesn't know your wi-fi

00:34:11,679 --> 00:34:14,720
credentials it tries to connect

00:34:13,040 --> 00:34:16,879
can't do it so then it brings up a web

00:34:14,720 --> 00:34:19,200
server which allows you to then um

00:34:16,879 --> 00:34:20,320
uh configure your wi-fi nexus id

00:34:19,200 --> 00:34:21,760
password through you know using your

00:34:20,320 --> 00:34:23,040
phone to talk to badge

00:34:21,760 --> 00:34:24,879
and then after that it'll have the

00:34:23,040 --> 00:34:25,760
credentials so yeah

00:34:24,879 --> 00:34:26,960
i realized i'm running through this a

00:34:25,760 --> 00:34:28,480
bit quickly just wanted to give you a

00:34:26,960 --> 00:34:30,560
bit of flavor so then

00:34:28,480 --> 00:34:32,399
that's that's networking so some of the

00:34:30,560 --> 00:34:36,480
other main things we've got is um button

00:34:32,399 --> 00:34:38,320
buttons so a little so buttons

00:34:36,480 --> 00:34:40,320
so the top of every every source file

00:34:38,320 --> 00:34:43,599
there's some uh examples so if you

00:34:40,320 --> 00:34:45,520
if you want to um uh

00:34:43,599 --> 00:34:47,359
look after buttons you um got to use

00:34:45,520 --> 00:34:48,879
your creator handler

00:34:47,359 --> 00:34:50,720
so um this hand will basically be given

00:34:48,879 --> 00:34:51,359
the the button number and the state of

00:34:50,720 --> 00:34:54,800
the button

00:34:51,359 --> 00:34:55,919
true or false and uh you then just add

00:34:54,800 --> 00:34:58,560
that button handler

00:34:55,919 --> 00:34:59,520
and um we support both uh regular

00:34:58,560 --> 00:35:00,800
buttons which are the

00:34:59,520 --> 00:35:02,960
these the buttons under your screen

00:35:00,800 --> 00:35:05,440
these are just two little gpu buttons

00:35:02,960 --> 00:35:08,640
and also we support the touch sliders so

00:35:05,440 --> 00:35:10,960
let's um let's just try this so um

00:35:08,640 --> 00:35:12,400
we can basically just uh see if i can

00:35:10,960 --> 00:35:13,599
cut and see if we can still see if cut

00:35:12,400 --> 00:35:16,720
and paste works

00:35:13,599 --> 00:35:18,000
maybe if i get lucky i haven't used i

00:35:16,720 --> 00:35:18,560
haven't used john's machine before so i

00:35:18,000 --> 00:35:21,680
don't know

00:35:18,560 --> 00:35:23,599
how how lucky i'll get this so

00:35:21,680 --> 00:35:25,040
no i might just have to type this in

00:35:23,599 --> 00:35:26,000
that's going to be a bit slow so define

00:35:25,040 --> 00:35:29,200
handler

00:35:26,000 --> 00:35:32,240
um number state

00:35:29,200 --> 00:35:32,240
ah sick

00:35:33,680 --> 00:35:38,880
uh john uh there's any reason why cut

00:35:36,400 --> 00:35:42,240
and paste is not working uh easily

00:35:38,880 --> 00:35:44,320
uh sure yeah he doesn't

00:35:42,240 --> 00:35:45,680
like working out of him for some reason

00:35:44,320 --> 00:35:48,720
oh really oh that's good

00:35:45,680 --> 00:35:50,320
okay let's see if i can i'll just go

00:35:48,720 --> 00:35:52,240
i think if you cut the file you should

00:35:50,320 --> 00:35:54,560
then be able to copy oh okay let's do it

00:35:52,240 --> 00:35:58,400
that way

00:35:54,560 --> 00:36:00,320
um more more button sorry stop

00:35:58,400 --> 00:36:03,599
figuring this out on the fly oh that's

00:36:00,320 --> 00:36:03,599
much better okay great

00:36:03,760 --> 00:36:13,839
so it's defined define handler

00:36:07,200 --> 00:36:13,839
we're going to print print the button

00:36:15,119 --> 00:36:18,720
about 10 minutes now yeah thanks and i'm

00:36:18,000 --> 00:36:27,440
just going to add that

00:36:18,720 --> 00:36:31,119
add that button handler um

00:36:27,440 --> 00:36:34,320
now um whenever we um press the screen

00:36:31,119 --> 00:36:35,839
um there we go that's um i've just

00:36:34,320 --> 00:36:38,079
pressed at left screen released the

00:36:35,839 --> 00:36:41,599
screen press the right screen

00:36:38,079 --> 00:36:42,960
and released it so that's that's the um

00:36:41,599 --> 00:36:44,640
the sort of outcome we're trying to get

00:36:42,960 --> 00:36:46,480
uh with this with the framework is yeah

00:36:44,640 --> 00:36:48,800
you can just add a few lines of code

00:36:46,480 --> 00:36:50,560
and uh just it just works we can also do

00:36:48,800 --> 00:36:53,760
the same thing for the uh

00:36:50,560 --> 00:36:55,680
for the touch slider so that's basically

00:36:53,760 --> 00:36:58,160
going to um

00:36:55,680 --> 00:37:00,480
uh enable all those buttons on the touch

00:36:58,160 --> 00:37:03,760
slider so now if i press that

00:37:00,480 --> 00:37:03,760
press and lose that bottom button there

00:37:07,760 --> 00:37:11,680
and uh where this gets a little more

00:37:10,240 --> 00:37:12,480
complicated we can do things like um

00:37:11,680 --> 00:37:14,320
also define

00:37:12,480 --> 00:37:16,240
a multi multiple button handle as well

00:37:14,320 --> 00:37:18,079
so it's like for pressing holding two

00:37:16,240 --> 00:37:20,880
buttons so if we

00:37:18,079 --> 00:37:23,839
um just find that oops what went wrong

00:37:20,880 --> 00:37:23,839
there

00:37:23,920 --> 00:37:26,720
cut and pasteur

00:37:29,119 --> 00:37:39,280
multi button

00:37:37,839 --> 00:37:40,880
and uh what i'm going to do here is

00:37:39,280 --> 00:37:41,920
actually uh if we press the top two

00:37:40,880 --> 00:37:43,280
buttons

00:37:41,920 --> 00:37:46,560
and hold the top two buttons we should

00:37:43,280 --> 00:37:46,560
get a handbook thing called

00:37:47,520 --> 00:37:52,079
so if i press and hold these top two

00:37:49,520 --> 00:37:55,040
buttons for three seconds

00:37:52,079 --> 00:37:55,760
that should call the um there we go

00:37:55,040 --> 00:37:58,160
multi button

00:37:55,760 --> 00:37:59,680
on on 15 28 so that's how we can do

00:37:58,160 --> 00:38:01,280
that's how we do buttons

00:37:59,680 --> 00:38:04,800
um certainly there's a whole functions

00:38:01,280 --> 00:38:04,800
for the oled um

00:38:06,000 --> 00:38:10,160
and uh so what we can do here is uh

00:38:10,320 --> 00:38:13,359
so there's this point documentation

00:38:11,599 --> 00:38:14,240
there what what we can simply do there

00:38:13,359 --> 00:38:19,760
is things like we can go

00:38:14,240 --> 00:38:22,720
i'll let uh michael.oled

00:38:19,760 --> 00:38:24,079
clear and hit that that should actually

00:38:22,720 --> 00:38:26,400
clear the screen

00:38:24,079 --> 00:38:27,599
um we can do things like uh do some text

00:38:26,400 --> 00:38:30,880
i think okay so we go

00:38:27,599 --> 00:38:34,320
text um actually

00:38:30,880 --> 00:38:35,359
go hello that was that should just

00:38:34,320 --> 00:38:38,800
scroll up from the bot

00:38:35,359 --> 00:38:41,200
that work um four parameters oh sorry

00:38:38,800 --> 00:38:41,200
the um

00:38:41,920 --> 00:38:47,839
text scroll um

00:38:44,960 --> 00:38:47,839
well it's text

00:38:50,400 --> 00:38:55,440
oh i just like that song i was looking

00:38:52,160 --> 00:38:55,440
for at least vlog sorry

00:38:59,440 --> 00:39:02,320
and then you can see this message is

00:39:00,960 --> 00:39:03,040
coming up from the bottom and that's

00:39:02,320 --> 00:39:06,960
scrolling

00:39:03,040 --> 00:39:10,000
and that also um uh i'll do a long line

00:39:06,960 --> 00:39:11,119
it's a long line and it's and it's

00:39:10,000 --> 00:39:15,200
basically writing that across

00:39:11,119 --> 00:39:17,359
both by screens so that's the outlets um

00:39:15,200 --> 00:39:19,200
there's um also there's also a web

00:39:17,359 --> 00:39:21,920
server if um

00:39:19,200 --> 00:39:23,280
if you want to do web servings that's a

00:39:21,920 --> 00:39:26,400
little web server

00:39:23,280 --> 00:39:28,320
that we um provide for um so from the

00:39:26,400 --> 00:39:31,680
phone you can configure the device

00:39:28,320 --> 00:39:33,599
so um it does all the url decoding

00:39:31,680 --> 00:39:35,119
um that's that's for doing configuring

00:39:33,599 --> 00:39:38,240
wi-fi

00:39:35,119 --> 00:39:39,760
um and there's a web client so it just

00:39:38,240 --> 00:39:41,920
allows us to um

00:39:39,760 --> 00:39:42,960
you can use that to basically uh get it

00:39:41,920 --> 00:39:45,359
get a

00:39:42,960 --> 00:39:47,280
uh just do a get on a url and that'll

00:39:45,359 --> 00:39:49,040
they'll load that down as a file

00:39:47,280 --> 00:39:50,720
that's also available and we where we

00:39:49,040 --> 00:39:55,040
mostly use that for is is in

00:39:50,720 --> 00:39:58,079
in the upgrade process so how that

00:39:55,040 --> 00:40:00,400
so how that works is um there's a name

00:39:58,079 --> 00:40:02,000
we listen to an mqtt topic um which

00:40:00,400 --> 00:40:03,359
which then tells us the the web server

00:40:02,000 --> 00:40:04,960
to go to them to then

00:40:03,359 --> 00:40:08,079
bring down the manifest which then uh

00:40:04,960 --> 00:40:12,160
brings out all the files so um

00:40:08,079 --> 00:40:12,160
let's see if we can um make that work

00:40:13,760 --> 00:40:18,240
so i lost um let's see

00:40:18,880 --> 00:40:24,319
so what else is worth showing um

00:40:21,920 --> 00:40:25,440
so just so all right so i've only got a

00:40:24,319 --> 00:40:26,720
few minutes left so to show you so it

00:40:25,440 --> 00:40:28,800
all comes together

00:40:26,720 --> 00:40:31,040
um let's have a look at an application

00:40:28,800 --> 00:40:31,040
um

00:40:31,920 --> 00:40:35,359
so you go to applications so if we look

00:40:34,079 --> 00:40:38,960
at the um

00:40:35,359 --> 00:40:40,880
the swag bag application what

00:40:38,960 --> 00:40:42,160
uh what what you'll do is you'll fill in

00:40:40,880 --> 00:40:43,440
an initialize method

00:40:42,160 --> 00:40:44,560
and in the initialize method is where

00:40:43,440 --> 00:40:45,599
you put all your handlers so you can see

00:40:44,560 --> 00:40:47,359
i've got a

00:40:45,599 --> 00:40:49,200
handler called the swag batch handler

00:40:47,359 --> 00:40:50,720
which is going to get called every um

00:40:49,200 --> 00:40:53,200
every 100 millisecond every thousand

00:40:50,720 --> 00:40:57,040
milliseconds and that swag badge handler

00:40:53,200 --> 00:40:59,680
is going to uh uh has a

00:40:57,040 --> 00:41:00,720
timer and uh every time that time

00:40:59,680 --> 00:41:04,079
increments it's uh

00:41:00,720 --> 00:41:06,240
getting the um the time and it's uh

00:41:04,079 --> 00:41:07,920
then um writing that to the writing that

00:41:06,240 --> 00:41:09,599
to the screen so it writes uh

00:41:07,920 --> 00:41:11,839
writes that to the screen notes if it

00:41:09,599 --> 00:41:13,280
fills the um a rectangle that black

00:41:11,839 --> 00:41:14,800
blank has an air on the screen writes

00:41:13,280 --> 00:41:16,560
the text and does a show

00:41:14,800 --> 00:41:18,839
so to make that to show you how to make

00:41:16,560 --> 00:41:20,160
that run what we do is we let it um

00:41:18,839 --> 00:41:24,240
configuration

00:41:20,160 --> 00:41:27,760
application sorry

00:41:24,240 --> 00:41:30,480
configuration main

00:41:27,760 --> 00:41:31,280
we'll stop running nicholas application

00:41:30,480 --> 00:41:34,720
and now we're on

00:41:31,280 --> 00:41:36,480
swag badge

00:41:34,720 --> 00:41:39,440
we'll put that put that configuration

00:41:36,480 --> 00:41:39,440
file on to uh

00:41:40,000 --> 00:41:45,440
operation main dot pi

00:41:46,160 --> 00:41:54,480
can't spell

00:41:49,560 --> 00:41:54,480
configuration that's main.pie

00:41:54,640 --> 00:41:59,359
ripple now i'm not going to reboot the

00:42:00,839 --> 00:42:03,839
machine

00:42:05,040 --> 00:42:08,240
and instead of running a nicholas

00:42:07,200 --> 00:42:10,560
scheduling it's now you can see it's

00:42:08,240 --> 00:42:13,599
running running a little timer there

00:42:10,560 --> 00:42:15,440
so um in so

00:42:13,599 --> 00:42:17,119
uh in a few in a few hours we're going

00:42:15,440 --> 00:42:18,160
to release a new version of the firmware

00:42:17,119 --> 00:42:19,760
which um

00:42:18,160 --> 00:42:21,520
provides all this functionality shown

00:42:19,760 --> 00:42:24,560
today and so

00:42:21,520 --> 00:42:26,079
how that'll um so how that works is uh

00:42:24,560 --> 00:42:28,079
uh we'll make an announcement saying the

00:42:26,079 --> 00:42:29,359
firm was released uh you'll be able to

00:42:28,079 --> 00:42:31,119
go through that process nicola showed

00:42:29,359 --> 00:42:32,720
you where you know you can um press the

00:42:31,119 --> 00:42:35,839
let's say your firmware you press the

00:42:32,720 --> 00:42:36,960
button buttons and uh

00:42:35,839 --> 00:42:39,119
then you'll get this swimmer now this

00:42:36,960 --> 00:42:40,240
film is a bit different in what happens

00:42:39,119 --> 00:42:41,359
when you press the bottom two buttons

00:42:40,240 --> 00:42:42,319
rather than upgrading the firmware it

00:42:41,359 --> 00:42:45,680
actually takes you to

00:42:42,319 --> 00:42:47,200
a um a local system user interface where

00:42:45,680 --> 00:42:49,200
we can do things like we can

00:42:47,200 --> 00:42:51,119
uh look at the console log we can also

00:42:49,200 --> 00:42:53,359
select firmware firmware upgrade

00:42:51,119 --> 00:42:54,800
and then you can if there's a new form

00:42:53,359 --> 00:42:56,800
we can upgrade it so that's

00:42:54,800 --> 00:42:58,240
uh we'll be talking this is a new

00:42:56,800 --> 00:42:59,200
functionality we will be documenting

00:42:58,240 --> 00:43:00,800
soon

00:42:59,200 --> 00:43:02,640
so i think that's about all i have time

00:43:00,800 --> 00:43:03,920
to cover so we're going to do some

00:43:02,640 --> 00:43:06,480
questions john

00:43:03,920 --> 00:43:08,480
yeah so that was a lot to try and cover

00:43:06,480 --> 00:43:09,920
very quickly hopefully that made sense

00:43:08,480 --> 00:43:13,760
all right i'll just switch the camera

00:43:09,920 --> 00:43:18,480
back and

00:43:13,760 --> 00:43:18,480
yeah that's fine uh switch back to here

00:43:19,680 --> 00:43:23,839
okay so we're back in the room now the

00:43:22,240 --> 00:43:24,720
the most important question that was

00:43:23,839 --> 00:43:27,280
asked

00:43:24,720 --> 00:43:28,240
was adam he wanted to say hello to astra

00:43:27,280 --> 00:43:30,319
oh okay

00:43:28,240 --> 00:43:31,440
tell me a little girl yeah she's

00:43:30,319 --> 00:43:35,280
actually been

00:43:31,440 --> 00:43:35,760
very uh yes has been our mascot through

00:43:35,280 --> 00:43:38,880
the whole

00:43:35,760 --> 00:43:40,000
whole project so um uh once we

00:43:38,880 --> 00:43:41,200
once we're allowed to travel more than

00:43:40,000 --> 00:43:42,960
five kilometers i was down here quite

00:43:41,200 --> 00:43:44,880
often down john's place um

00:43:42,960 --> 00:43:46,160
uh we're working hard distributing the

00:43:44,880 --> 00:43:47,359
hardware out of the team there's a lot

00:43:46,160 --> 00:43:48,880
of um

00:43:47,359 --> 00:43:50,400
a lot of hardware work and so every time

00:43:48,880 --> 00:43:54,160
i actually come down and play john's dog

00:43:50,400 --> 00:43:55,839
bonnie um yeah so

00:43:54,160 --> 00:43:58,560
there were a couple of other questions

00:43:55,839 --> 00:44:00,079
um uh spidey asked whether the software

00:43:58,560 --> 00:44:02,560
update in the stock version

00:44:00,079 --> 00:44:05,040
so version four works the same way with

00:44:02,560 --> 00:44:07,040
two fingers on the lower sliders

00:44:05,040 --> 00:44:08,560
and um andy partly answered that right

00:44:07,040 --> 00:44:11,119
towards the end of the talk

00:44:08,560 --> 00:44:12,800
so it does the update but the new

00:44:11,119 --> 00:44:15,440
version of the firmware gives you more

00:44:12,800 --> 00:44:16,720
functionality with the two-finger

00:44:15,440 --> 00:44:18,319
connection at the bottom it gives you a

00:44:16,720 --> 00:44:19,359
menu where you can select from multiple

00:44:18,319 --> 00:44:22,240
things to do

00:44:19,359 --> 00:44:23,680
not just do the update so we call that

00:44:22,240 --> 00:44:25,599
we're calling those system features so

00:44:23,680 --> 00:44:26,400
in um the framework that uh lib ico

00:44:25,599 --> 00:44:28,400
there's a

00:44:26,400 --> 00:44:29,359
file called system underscore ui and

00:44:28,400 --> 00:44:30,880
that's actually probably a pretty good

00:44:29,359 --> 00:44:33,280
file to look at because that's um

00:44:30,880 --> 00:44:34,560
that uses all of the um all the library

00:44:33,280 --> 00:44:36,400
calls for doing um handling

00:44:34,560 --> 00:44:37,599
a multi a multi-finger button to get

00:44:36,400 --> 00:44:40,319
into the ui

00:44:37,599 --> 00:44:42,079
um a slider to basically uh scroll

00:44:40,319 --> 00:44:43,839
through the menu so it displays the menu

00:44:42,079 --> 00:44:45,760
highlights the selected one there's a

00:44:43,839 --> 00:44:48,160
button then select what you want to do

00:44:45,760 --> 00:44:50,079
uh and yeah so it's actually system

00:44:48,160 --> 00:44:51,920
underscore ui is probably the best place

00:44:50,079 --> 00:44:54,400
look for examples of how to work

00:44:51,920 --> 00:44:55,839
okay and one final thing so we're pretty

00:44:54,400 --> 00:44:57,440
much at the end of our time but what i'm

00:44:55,839 --> 00:45:00,560
going to do is drop a link

00:44:57,440 --> 00:45:04,240
in the chat to

00:45:00,560 --> 00:45:05,760
spectrum this is an online chat system

00:45:04,240 --> 00:45:07,520
that has been set up specifically for

00:45:05,760 --> 00:45:09,520
support for the badge

00:45:07,520 --> 00:45:11,200
so if you have technical questions

00:45:09,520 --> 00:45:11,920
problems connecting to it or anything

00:45:11,200 --> 00:45:14,079
like that

00:45:11,920 --> 00:45:15,520
go along to spectrum and you can put

00:45:14,079 --> 00:45:17,200
questions there so there'll be people

00:45:15,520 --> 00:45:19,359
there to help answer

00:45:17,200 --> 00:45:20,640
whatever comes up yeah yeah so for the

00:45:19,359 --> 00:45:21,920
next three days we'll try and hang out

00:45:20,640 --> 00:45:23,040
on all the channels we'll hang out on

00:45:21,920 --> 00:45:25,760
the um

00:45:23,040 --> 00:45:27,280
on the conference um teleconferencing uh

00:45:25,760 --> 00:45:29,280
what's the name of the software again

00:45:27,280 --> 00:45:30,640
uh vanilla venus yeah so we'll hang out

00:45:29,280 --> 00:45:32,160
in venice and so there's the hardware

00:45:30,640 --> 00:45:33,520
buff so we'll be in there all the time

00:45:32,160 --> 00:45:35,440
so if you want to um

00:45:33,520 --> 00:45:37,040
chat you know do a video chat to solve

00:45:35,440 --> 00:45:39,520
problems or have you do that or just

00:45:37,040 --> 00:45:40,480
uh whatever this spectrum is as john

00:45:39,520 --> 00:45:42,640
said um

00:45:40,480 --> 00:45:43,599
is there any worse for hanging out um

00:45:42,640 --> 00:45:47,119
that's the main place

00:45:43,599 --> 00:45:48,560
there is also a both area in venulis

00:45:47,119 --> 00:45:50,319
you'll notice on the left hand menu

00:45:48,560 --> 00:45:53,359
there is an open hardware mini conf

00:45:50,319 --> 00:45:54,319
buff and that is a text and audio and

00:45:53,359 --> 00:45:56,000
video channel

00:45:54,319 --> 00:45:57,200
so over the course of the weekend we're

00:45:56,000 --> 00:45:59,359
probably going to spend a fair bit of

00:45:57,200 --> 00:46:02,560
time in there as well

00:45:59,359 --> 00:46:04,480
yeah so um this the project um

00:46:02,560 --> 00:46:05,920
doesn't end today um you know this is

00:46:04,480 --> 00:46:08,720
really the beginning it's um

00:46:05,920 --> 00:46:09,839
it's sort of like uh the very start it's

00:46:08,720 --> 00:46:10,880
gonna say something like ground zero but

00:46:09,839 --> 00:46:14,560
maybe that's not the best

00:46:10,880 --> 00:46:14,560
the best way to describe our project

00:46:14,720 --> 00:46:18,960
this is the beginning so um possibility

00:46:17,599 --> 00:46:20,560
that maybe there'll be another

00:46:18,960 --> 00:46:22,240
another badge project in the future and

00:46:20,560 --> 00:46:23,520
this this one will be the basis for that

00:46:22,240 --> 00:46:27,440
so um

00:46:23,520 --> 00:46:28,880
uh yeah so um if any time you any time

00:46:27,440 --> 00:46:30,240
we couldn't do it over the next few days

00:46:28,880 --> 00:46:31,200
hopefully we'll be the beginning of a

00:46:30,240 --> 00:46:33,200
long-term project

00:46:31,200 --> 00:46:34,480
yeah there's plenty more to come so we

00:46:33,200 --> 00:46:35,839
are wrapping up this session now there

00:46:34,480 --> 00:46:38,000
is going to be a short break

00:46:35,839 --> 00:46:39,440
and then our next speaker will be on in

00:46:38,000 --> 00:46:41,119
about 10 minutes which is

00:46:39,440 --> 00:46:43,280
uh who is mark merlin he's going to be

00:46:41,119 --> 00:46:45,839
talking about his usual favorite topic

00:46:43,280 --> 00:46:48,319
leds so thanks for coming along and

00:46:45,839 --> 00:46:50,960
we'll see you all again in a few minutes

00:46:48,319 --> 00:46:53,280
oh nichola is waving goodbye see you

00:46:50,960 --> 00:46:53,280
soon

00:46:54,839 --> 00:46:58,960
bye

00:46:56,880 --> 00:46:58,960

YouTube URL: https://www.youtube.com/watch?v=SASfy1gpDas


