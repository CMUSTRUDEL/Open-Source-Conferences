Title: Melanie Richards - The Tailored Web: Effectively Honoring Visual Preferences - View Source 2019
Publication date: 2019-11-21
Playlist: View Source 2019 - Amsterdam
Description: 
	#@somelaniesaid #melanierichards #accessibility #a11y #viewsourceconf
The web platform is evolving to support more native capabilities, including integration with a user's OS-level settings. By using new CSS standards to honor a user's preferences around contrast and color scheme, we can craft more inclusive and accessible websites. In this talk, Melanie covers the difference between these emerging standards, considerations that shaped their design and application, and strategies for effectively supporting your usersâ€”while maintaining a design point-of-view.
Captions: 
	00:00:00,040 --> 00:00:02,450
[Applause]

00:00:04,400 --> 00:00:07,529
thanks honoree for getting us kicked off

00:00:06,960 --> 00:00:09,540
today

00:00:07,529 --> 00:00:11,429
speaking of accessibility I love how

00:00:09,540 --> 00:00:13,610
much space there is for captions at this

00:00:11,429 --> 00:00:16,650
event this is amazing

00:00:13,610 --> 00:00:18,720
so as you heard I'm Melanie Richards I'm

00:00:16,650 --> 00:00:21,119
a member of the web platform team on

00:00:18,720 --> 00:00:23,369
Microsoft edge and I also participate in

00:00:21,119 --> 00:00:26,250
standards communities such as the CSS

00:00:23,369 --> 00:00:29,250
working group so the CSS working group

00:00:26,250 --> 00:00:31,740
has been developing integrations for web

00:00:29,250 --> 00:00:33,899
developers styling with user system

00:00:31,740 --> 00:00:36,300
settings such as when it's high contrast

00:00:33,899 --> 00:00:38,070
and if you're unfamiliar with Windows

00:00:36,300 --> 00:00:40,140
high contrasts this is an accessibility

00:00:38,070 --> 00:00:42,360
feature that is designed to increase

00:00:40,140 --> 00:00:45,300
legibility while decreasing cognitive

00:00:42,360 --> 00:00:48,329
load so the future works by enabling the

00:00:45,300 --> 00:00:51,210
user to set colors for a scoped number

00:00:48,329 --> 00:00:54,329
of semantic elements and then these

00:00:51,210 --> 00:00:56,430
colors are applied to digital UI so this

00:00:54,329 --> 00:00:58,949
essentially pairs down the UI while

00:00:56,430 --> 00:01:01,980
guaranteeing the users chosen contrast

00:00:58,949 --> 00:01:04,799
level and so here we have Windows high

00:01:01,980 --> 00:01:06,240
contrast black rendered and you can see

00:01:04,799 --> 00:01:09,110
that everything's pared down and it's

00:01:06,240 --> 00:01:12,689
white text on a black background so

00:01:09,110 --> 00:01:15,000
browsers can also like other apps make

00:01:12,689 --> 00:01:18,600
sure that their UI is rendered in high

00:01:15,000 --> 00:01:20,189
contrast as well as web content and so

00:01:18,600 --> 00:01:22,259
in parallel to the standardization

00:01:20,189 --> 00:01:24,659
effort I was also part of a usability

00:01:22,259 --> 00:01:26,040
study to determine how well high

00:01:24,659 --> 00:01:29,400
contrast is working on the web for

00:01:26,040 --> 00:01:31,380
people so we had some folks who identify

00:01:29,400 --> 00:01:33,030
as having low vision go through some

00:01:31,380 --> 00:01:35,549
sites with and without high contrast and

00:01:33,030 --> 00:01:37,590
abled and this one individual when

00:01:35,549 --> 00:01:39,659
looking at a site in its original colors

00:01:37,590 --> 00:01:42,600
remarked the text on the blue background

00:01:39,659 --> 00:01:45,509
is kind of hard to read now you might

00:01:42,600 --> 00:01:46,890
hear this and think okay maybe this is

00:01:45,509 --> 00:01:48,600
some kind of shenanigans for the

00:01:46,890 --> 00:01:50,430
designer you know wants the text to be

00:01:48,600 --> 00:01:52,880
really subtle like maybe in in a footer

00:01:50,430 --> 00:01:56,040
they have dark text on a dark background

00:01:52,880 --> 00:01:58,610
but actually the person was referring to

00:01:56,040 --> 00:02:01,380
black text on a white background you

00:01:58,610 --> 00:02:03,899
cannot have a higher contrast ratio than

00:02:01,380 --> 00:02:05,579
this and still this individuals eyes

00:02:03,899 --> 00:02:07,140
were picking up on the blue light in the

00:02:05,579 --> 00:02:10,830
screen they still found that a little

00:02:07,140 --> 00:02:12,400
bit tricky to read so we then turn on

00:02:10,830 --> 00:02:14,530
you know a dark high contrast

00:02:12,400 --> 00:02:16,959
and the same person said that's much

00:02:14,530 --> 00:02:18,819
better so this is actually the same

00:02:16,959 --> 00:02:21,519
exact contrast ratio as a previous slide

00:02:18,819 --> 00:02:24,209
it's just in a particular color scheme

00:02:21,519 --> 00:02:27,340
that was easier for this person can read

00:02:24,209 --> 00:02:29,709
so in web design and development we put

00:02:27,340 --> 00:02:33,010
a lot of energy into making some one

00:02:29,709 --> 00:02:34,720
true design as beautiful and useful and

00:02:33,010 --> 00:02:37,900
pleasant for as many people as possible

00:02:34,720 --> 00:02:39,790
as often our goal but the truth is our

00:02:37,900 --> 00:02:41,170
users bring with them highly

00:02:39,790 --> 00:02:43,390
individualized needs for color and

00:02:41,170 --> 00:02:46,060
contrast and these can change by the day

00:02:43,390 --> 00:02:47,470
or even the hour so maybe someone had a

00:02:46,060 --> 00:02:49,359
recent injury that makes it really hard

00:02:47,470 --> 00:02:51,910
to look at screens especially certain

00:02:49,359 --> 00:02:54,190
colors or they find that lower contrast

00:02:51,910 --> 00:02:55,540
actually helps them focus better or

00:02:54,190 --> 00:02:57,549
maybe they're up in the middle of the

00:02:55,540 --> 00:02:59,409
night like trying to jam on a major

00:02:57,549 --> 00:03:02,440
project without keeping their partner up

00:02:59,409 --> 00:03:04,720
with the light from their screen so how

00:03:02,440 --> 00:03:06,790
are we supposed to manage all these

00:03:04,720 --> 00:03:08,340
needs and preferences at once with just

00:03:06,790 --> 00:03:10,810
one color scheme

00:03:08,340 --> 00:03:13,359
well why we should provide reasonable

00:03:10,810 --> 00:03:15,549
defaults within our base theme the truth

00:03:13,359 --> 00:03:17,470
is that we can take a layered approach

00:03:15,549 --> 00:03:20,769
to inclusive color and contrast on the

00:03:17,470 --> 00:03:23,079
web using emerging media queries and CSS

00:03:20,769 --> 00:03:25,750
properties we can respond to preferences

00:03:23,079 --> 00:03:28,000
such as preferred color scheme preferred

00:03:25,750 --> 00:03:31,660
contrast level and the presence of

00:03:28,000 --> 00:03:33,489
course color modes like high contrast so

00:03:31,660 --> 00:03:35,470
we can use these new standards to

00:03:33,489 --> 00:03:38,590
efficiently tailor our websites to our

00:03:35,470 --> 00:03:41,829
users needs while also maintaining a

00:03:38,590 --> 00:03:43,480
design point of view and so let's

00:03:41,829 --> 00:03:46,120
suppose that we are working on a

00:03:43,480 --> 00:03:48,010
marketing page for a service that sends

00:03:46,120 --> 00:03:49,989
you clothing tailored to your individual

00:03:48,010 --> 00:03:52,359
preferences we want to create like

00:03:49,989 --> 00:03:54,400
variations on our theme for our users

00:03:52,359 --> 00:03:57,940
benefit so I'm going to zoom in here

00:03:54,400 --> 00:04:00,280
real fast and we essentially have here a

00:03:57,940 --> 00:04:03,250
light theme that has dark cool accent

00:04:00,280 --> 00:04:05,859
colors we've got some mixed content here

00:04:03,250 --> 00:04:07,500
including a sample color palette in this

00:04:05,859 --> 00:04:10,449
style profile

00:04:07,500 --> 00:04:14,280
we've got gradients layered on top of

00:04:10,449 --> 00:04:17,609
photography some decorative borders and

00:04:14,280 --> 00:04:20,079
form fields at the bottom of the page so

00:04:17,609 --> 00:04:21,909
there are a few related media queries

00:04:20,079 --> 00:04:24,260
that we will use in order to create the

00:04:21,909 --> 00:04:27,320
variations on this theme

00:04:24,260 --> 00:04:30,470
and these are preferred color scheme for

00:04:27,320 --> 00:04:32,380
first contrast and forest colors so

00:04:30,470 --> 00:04:34,880
prefers color scheme is a hint to

00:04:32,380 --> 00:04:37,760
provide a particular color scheme to the

00:04:34,880 --> 00:04:41,090
user so this is highly correlated today

00:04:37,760 --> 00:04:43,310
with supporting dark mode and prefers

00:04:41,090 --> 00:04:46,190
contrast is a hint to either increase or

00:04:43,310 --> 00:04:47,930
decrease the contrast of course colors

00:04:46,190 --> 00:04:49,760
is a hint that the rendering engine has

00:04:47,930 --> 00:04:53,810
already applied the user system colors

00:04:49,760 --> 00:04:56,470
to the web content and this can occur

00:04:53,810 --> 00:04:58,640
when windows high contrast is active so

00:04:56,470 --> 00:05:00,650
there's a couple different expectations

00:04:58,640 --> 00:05:02,030
on the web developer here for a

00:05:00,650 --> 00:05:04,400
preferred color scheme and prefers

00:05:02,030 --> 00:05:05,990
contrast the expectation is that the

00:05:04,400 --> 00:05:08,480
website will fully manage the color

00:05:05,990 --> 00:05:12,410
scheme as well as any contrast levels

00:05:08,480 --> 00:05:13,760
and for first colors the expectation is

00:05:12,410 --> 00:05:15,950
that these have already been applied by

00:05:13,760 --> 00:05:20,120
the browser and the website might just

00:05:15,950 --> 00:05:22,100
want to optimize its design so let's

00:05:20,120 --> 00:05:27,320
start here by adding an additional color

00:05:22,100 --> 00:05:29,870
scheme so as mentioned prefers color

00:05:27,320 --> 00:05:32,000
scheme allows the web developer to

00:05:29,870 --> 00:05:34,730
respond to hints from the user as to

00:05:32,000 --> 00:05:36,680
which color scheme they might like so

00:05:34,730 --> 00:05:38,540
this could be provided on the OS level

00:05:36,680 --> 00:05:40,790
you know checkboxes for light mode or

00:05:38,540 --> 00:05:42,290
dark mode or the browser itself could

00:05:40,790 --> 00:05:44,390
actually support its own color schemes

00:05:42,290 --> 00:05:46,250
for example if the browser is available

00:05:44,390 --> 00:05:48,230
on an OS that doesn't support dark mode

00:05:46,250 --> 00:05:51,470
but wants to make this available for its

00:05:48,230 --> 00:05:59,900
users so let's suppose that we want to

00:05:51,470 --> 00:06:03,470
support dark mode here all right cool on

00:05:59,900 --> 00:06:06,410
with clickers so one strategy that

00:06:03,470 --> 00:06:08,960
actually makes this way easier is to use

00:06:06,410 --> 00:06:12,230
CSS custom properties or known in the

00:06:08,960 --> 00:06:14,810
common parlance as variables so well

00:06:12,230 --> 00:06:17,150
basically set instead of setting static

00:06:14,810 --> 00:06:20,060
colors all over our pattern library or

00:06:17,150 --> 00:06:22,040
wherever we have our style sheets we're

00:06:20,060 --> 00:06:24,350
actually going to set some color

00:06:22,040 --> 00:06:26,660
variables on the root node here so for

00:06:24,350 --> 00:06:30,110
example we have eg color main set to

00:06:26,660 --> 00:06:32,120
white and so then we can use these

00:06:30,110 --> 00:06:34,340
throughout our styles and

00:06:32,120 --> 00:06:36,949
set of or in addition to the static

00:06:34,340 --> 00:06:41,590
colors so we'll set our body background

00:06:36,949 --> 00:06:43,910
to BG color main using the bar syntax

00:06:41,590 --> 00:06:46,580
and then what we want to do is we want

00:06:43,910 --> 00:06:48,680
to update these variables for dark mode

00:06:46,580 --> 00:06:51,080
so what we're going to do is we're first

00:06:48,680 --> 00:06:53,210
going to query for prefers color scheme

00:06:51,080 --> 00:06:57,470
dark and then we'll set our styles from

00:06:53,210 --> 00:07:00,410
within so there's actually nothing that

00:06:57,470 --> 00:07:02,600
says thou shalt remove all color in dark

00:07:00,410 --> 00:07:06,050
mode although it is heavily associated

00:07:02,600 --> 00:07:07,820
with shades of grey but in our example

00:07:06,050 --> 00:07:10,070
we actually think that the blue color is

00:07:07,820 --> 00:07:11,270
really important to our brand so we want

00:07:10,070 --> 00:07:13,039
to make sure that we're gonna do this up

00:07:11,270 --> 00:07:14,660
in you know shades of blue with the

00:07:13,039 --> 00:07:17,389
saturation turned down a little bit just

00:07:14,660 --> 00:07:18,889
make it easier to read in dark mode so

00:07:17,389 --> 00:07:20,570
all we're gonna do here within our

00:07:18,889 --> 00:07:23,720
preferred color scheme dark mediu gray

00:07:20,570 --> 00:07:26,060
is reset the values of these color

00:07:23,720 --> 00:07:28,100
variables and so BG color man is now a

00:07:26,060 --> 00:07:29,449
dark blue color and this is all we're

00:07:28,100 --> 00:07:32,360
gonna do we're not going to touch any

00:07:29,449 --> 00:07:33,710
other lines of code but these these

00:07:32,360 --> 00:07:37,400
values are going to propagate to

00:07:33,710 --> 00:07:40,510
wherever that we've used them so now we

00:07:37,400 --> 00:07:43,550
have our page rendered in dark blue and

00:07:40,510 --> 00:07:45,889
so just by changing the color variable

00:07:43,550 --> 00:07:47,930
values we've actually got most of our

00:07:45,889 --> 00:07:51,139
page styled in a matter of I think this

00:07:47,930 --> 00:07:52,280
took me like 10 minutes so there are

00:07:51,139 --> 00:07:54,110
some things that we want to manually

00:07:52,280 --> 00:07:56,150
change so we didn't use color variables

00:07:54,110 --> 00:07:58,460
for these gradient images so you know

00:07:56,150 --> 00:08:02,479
we'll just manually change our CSS that

00:07:58,460 --> 00:08:05,060
way and after the simple variable swap

00:08:02,479 --> 00:08:07,039
we actually think maybe this box is like

00:08:05,060 --> 00:08:10,610
too brights it will you know change that

00:08:07,039 --> 00:08:12,320
manually as well and our logo doesn't

00:08:10,610 --> 00:08:14,090
look that great either so it's still

00:08:12,320 --> 00:08:17,090
being rendered and you know the dark

00:08:14,090 --> 00:08:19,400
color and this is an SVG logo so one of

00:08:17,090 --> 00:08:20,990
the things that we could do to make sure

00:08:19,400 --> 00:08:22,760
that this color this logo is always

00:08:20,990 --> 00:08:24,199
rendered in the correct color is use

00:08:22,760 --> 00:08:26,360
current color in the fills and the

00:08:24,199 --> 00:08:28,729
Strokes of the logo and so basically

00:08:26,360 --> 00:08:30,889
this will inherit the color from the

00:08:28,729 --> 00:08:33,650
surrounding context so it'll get the

00:08:30,889 --> 00:08:35,209
color that link and we're actually going

00:08:33,650 --> 00:08:37,490
to do this inside of our base theme

00:08:35,209 --> 00:08:39,500
instead of inside the media query so

00:08:37,490 --> 00:08:41,890
that way the color is inherited no

00:08:39,500 --> 00:08:46,089
matter what color scheme we're in and

00:08:41,890 --> 00:08:46,089
that'll pick up the color correctly

00:08:48,040 --> 00:08:54,020
so after doing this work to support

00:08:50,330 --> 00:08:55,460
dark-themed across our page here big

00:08:54,020 --> 00:08:58,520
bright images might actually end up

00:08:55,460 --> 00:09:00,980
detracting from what we have so we might

00:08:58,520 --> 00:09:04,010
choose to swap out imagery using source

00:09:00,980 --> 00:09:06,320
set media conditions but in our case

00:09:04,010 --> 00:09:08,000
we've decided no actually like the

00:09:06,320 --> 00:09:09,770
photography that we have here already is

00:09:08,000 --> 00:09:10,910
really important to our content so we're

00:09:09,770 --> 00:09:13,340
just going to like tweak it a little bit

00:09:10,910 --> 00:09:15,950
so what you could do is you could use

00:09:13,340 --> 00:09:18,020
the CSS filter property on your images

00:09:15,950 --> 00:09:20,210
to turn down the brightness a little bit

00:09:18,020 --> 00:09:21,650
turn up the contrast a little bit to

00:09:20,210 --> 00:09:23,840
kind of make sure the colors don't get

00:09:21,650 --> 00:09:26,750
muddy and this is a very subtle change

00:09:23,840 --> 00:09:29,150
but it does kind of help blend the

00:09:26,750 --> 00:09:35,120
photography a little bit with the rest

00:09:29,150 --> 00:09:36,920
of the page so well notice that you know

00:09:35,120 --> 00:09:38,690
some of our form fields here are

00:09:36,920 --> 00:09:41,570
actually still rendered in the light

00:09:38,690 --> 00:09:43,730
mode theme so in order to fix this we

00:09:41,570 --> 00:09:45,860
can use the CSS color scheme property

00:09:43,730 --> 00:09:47,600
and we can set that to light dark and

00:09:45,860 --> 00:09:50,210
that basically tells the rendering

00:09:47,600 --> 00:09:52,310
engine that it's safe to render user

00:09:50,210 --> 00:09:55,010
interactive controls and scroll bars and

00:09:52,310 --> 00:09:56,570
the dark theme and we're going to do

00:09:55,010 --> 00:09:58,100
this on our root node so that it just

00:09:56,570 --> 00:09:59,390
propagates to our entire document

00:09:58,100 --> 00:10:01,790
because we want to support across the

00:09:59,390 --> 00:10:03,560
document but actually if you wanted to

00:10:01,790 --> 00:10:05,630
you could do this on individual elements

00:10:03,560 --> 00:10:06,890
for example if you have a use case where

00:10:05,630 --> 00:10:08,780
you're like okay I have some

00:10:06,890 --> 00:10:10,430
user-generated content and like part of

00:10:08,780 --> 00:10:11,960
my document I don't want to color shift

00:10:10,430 --> 00:10:13,820
that but I want to color shift the rest

00:10:11,960 --> 00:10:15,170
of the UI so that's kind of like a

00:10:13,820 --> 00:10:17,840
little bit of flexibility that you have

00:10:15,170 --> 00:10:20,210
there and so by making this change now

00:10:17,840 --> 00:10:24,050
we can have our controls render in dark

00:10:20,210 --> 00:10:25,820
mode so we should also pair this with a

00:10:24,050 --> 00:10:28,010
meta tag that tell that gives the

00:10:25,820 --> 00:10:32,150
browser rendering engine and early hint

00:10:28,010 --> 00:10:33,800
as to how it can render a page and so

00:10:32,150 --> 00:10:37,100
this can actually help prevent like a

00:10:33,800 --> 00:10:39,410
flash of white or it can help male apps

00:10:37,100 --> 00:10:42,170
kind of do some auto darkening if they

00:10:39,410 --> 00:10:43,760
so choose to do so and so the syntax for

00:10:42,170 --> 00:10:46,100
this is actually still under discussion

00:10:43,760 --> 00:10:47,720
and standards and you can find a

00:10:46,100 --> 00:10:51,050
reference to that at the short length

00:10:47,720 --> 00:10:53,839
that I've provided here so aka OMS slash

00:10:51,050 --> 00:10:55,970
color dash scheme - meta and all these

00:10:53,839 --> 00:10:58,509
short links just send you over to

00:10:55,970 --> 00:11:01,149
standards environments

00:10:58,509 --> 00:11:03,999
so basically we've been able to support

00:11:01,149 --> 00:11:06,249
dark mode on our page using 20 lines of

00:11:03,999 --> 00:11:09,189
code and in that number I include

00:11:06,249 --> 00:11:12,220
selectors and any changes to the

00:11:09,189 --> 00:11:13,680
variables that we have here and we've

00:11:12,220 --> 00:11:17,410
also changed one line of code

00:11:13,680 --> 00:11:19,569
so in additional considerations you

00:11:17,410 --> 00:11:21,009
could consider a site level override as

00:11:19,569 --> 00:11:23,589
long as possible but someone prefers

00:11:21,009 --> 00:11:25,360
dark scheme for you know the rest of

00:11:23,589 --> 00:11:27,730
their ecosystem it actually prefers your

00:11:25,360 --> 00:11:29,290
site in a light color mode and so I

00:11:27,730 --> 00:11:32,259
would consider this going the extra mile

00:11:29,290 --> 00:11:33,970
but you could have a you know site

00:11:32,259 --> 00:11:36,689
setting that allows them to toggle this

00:11:33,970 --> 00:11:39,160
and you could have that connected to a

00:11:36,689 --> 00:11:43,870
CSS selector that basically manages your

00:11:39,160 --> 00:11:46,569
dark mode styles so there is a pretty

00:11:43,870 --> 00:11:48,370
good browser support for first color

00:11:46,569 --> 00:11:50,800
scheme media query across modern

00:11:48,370 --> 00:11:53,410
rendering engines and the color scheme

00:11:50,800 --> 00:11:56,949
property and the current medicine tax is

00:11:53,410 --> 00:12:04,839
available in Safari 12.1 and above and

00:11:56,949 --> 00:12:06,100
these metrics are all for desktop so now

00:12:04,839 --> 00:12:07,629
that we've got dark mode up and running

00:12:06,100 --> 00:12:10,689
on our site let's talk about praying for

00:12:07,629 --> 00:12:13,660
contrast so this is a hint that can

00:12:10,689 --> 00:12:16,480
likewise come from these are settings on

00:12:13,660 --> 00:12:18,610
the OS or otherwise so for example if

00:12:16,480 --> 00:12:20,439
you're on Mac OS and you click increase

00:12:18,610 --> 00:12:22,329
contrast and you're in light mode you'll

00:12:20,439 --> 00:12:24,670
notice that the text gets darker and the

00:12:22,329 --> 00:12:26,860
borders get darker in order to stand out

00:12:24,670 --> 00:12:28,899
more from the background so this is

00:12:26,860 --> 00:12:32,319
something that we could pick up in our

00:12:28,899 --> 00:12:35,649
web styles so the proposed syntax here

00:12:32,319 --> 00:12:37,870
is prefers contrast and the current

00:12:35,649 --> 00:12:40,420
values for this are no preference high

00:12:37,870 --> 00:12:42,579
and low but these values are actually

00:12:40,420 --> 00:12:44,170
still under discussion because some

00:12:42,579 --> 00:12:46,360
folks in the CSS working group we're

00:12:44,170 --> 00:12:49,300
like does this really align with how OS

00:12:46,360 --> 00:12:50,620
level settings work today so we might

00:12:49,300 --> 00:12:53,259
you know change to a different set of

00:12:50,620 --> 00:12:56,319
keyword values or maybe we can consider

00:12:53,259 --> 00:12:57,189
a numeric value so for this reason we're

00:12:56,319 --> 00:12:59,559
not going to talk too much about

00:12:57,189 --> 00:13:02,529
contrast today because the guidance to

00:12:59,559 --> 00:13:03,970
you as web developers might change but

00:13:02,529 --> 00:13:05,110
whenever this is available there is a

00:13:03,970 --> 00:13:08,550
few things that you might want to focus

00:13:05,110 --> 00:13:11,910
on adjusting so this is things like text

00:13:08,550 --> 00:13:13,900
non decorative icons and imagery

00:13:11,910 --> 00:13:16,870
backgrounds and decorations on

00:13:13,900 --> 00:13:18,400
interactive elements and other design

00:13:16,870 --> 00:13:22,680
elements that are important to

00:13:18,400 --> 00:13:22,680
understanding relationships or content

00:13:25,350 --> 00:13:30,940
so for some folks a slight adjustment to

00:13:28,180 --> 00:13:33,040
contrast or an art directed color scheme

00:13:30,940 --> 00:13:35,080
doesn't quite meet their needs for

00:13:33,040 --> 00:13:37,780
legibility on the web and this is where

00:13:35,080 --> 00:13:39,250
force color moats come in so the new

00:13:37,780 --> 00:13:40,780
standards for first color modes are

00:13:39,250 --> 00:13:43,360
actually heavily influenced by the

00:13:40,780 --> 00:13:46,150
windows high contrast feature as well as

00:13:43,360 --> 00:13:49,330
higher art for styling in this in IE and

00:13:46,150 --> 00:13:51,250
Microsoft edge so it should be noted

00:13:49,330 --> 00:13:53,860
that windows high contrast is actually

00:13:51,250 --> 00:13:55,270
somewhat of a misnomer so while the in

00:13:53,860 --> 00:13:57,340
box things are certainly the most

00:13:55,270 --> 00:13:59,650
popular and they do guarantee high

00:13:57,340 --> 00:14:02,350
contrast users can actually change these

00:13:59,650 --> 00:14:04,000
colors to anything that they want so

00:14:02,350 --> 00:14:05,650
this can be really helpful if you need

00:14:04,000 --> 00:14:08,190
colors that are more differentiated from

00:14:05,650 --> 00:14:12,280
each other or if actually you want the

00:14:08,190 --> 00:14:13,960
UI to render in softer contrast so no

00:14:12,280 --> 00:14:17,110
matter the reason for choosing windows

00:14:13,960 --> 00:14:19,000
high contrast this is actually what far

00:14:17,110 --> 00:14:21,670
and away one of the most popular ease of

00:14:19,000 --> 00:14:23,320
access settings on Windows last time we

00:14:21,670 --> 00:14:25,360
checked it was used on like 4 percent of

00:14:23,320 --> 00:14:28,740
active devices and that actually

00:14:25,360 --> 00:14:31,840
represents millions of people worldwide

00:14:28,740 --> 00:14:39,850
so let's explore how this works under

00:14:31,840 --> 00:14:43,990
the hood so we've yeah so ok excuse me

00:14:39,850 --> 00:14:46,600
so we've set the the OS into a high

00:14:43,990 --> 00:14:49,060
contrast black scene and without doing

00:14:46,600 --> 00:14:52,150
any work on the web development and we

00:14:49,060 --> 00:14:55,030
have our page running pretty well in

00:14:52,150 --> 00:14:57,310
high contrast so we're getting the white

00:14:55,030 --> 00:14:59,890
text in the foreground we're getting a

00:14:57,310 --> 00:15:02,080
different color for the links and we

00:14:59,890 --> 00:15:03,760
have this black background as well and

00:15:02,080 --> 00:15:07,860
these colors are shifted throughout the

00:15:03,760 --> 00:15:10,630
page including native form controls and

00:15:07,860 --> 00:15:13,570
so let's explore how this works under

00:15:10,630 --> 00:15:15,610
the hood so first the rendering engine

00:15:13,570 --> 00:15:17,800
rupert's the values of some properties

00:15:15,610 --> 00:15:20,670
and this includes any properties that

00:15:17,800 --> 00:15:23,130
are related to color as well as

00:15:20,670 --> 00:15:25,230
that might interfere with text

00:15:23,130 --> 00:15:27,930
legibility so for example black shadow

00:15:25,230 --> 00:15:30,540
and text shadow could make it hard to

00:15:27,930 --> 00:15:33,330
read edges or they might overlap on top

00:15:30,540 --> 00:15:36,330
of other elements so after this

00:15:33,330 --> 00:15:38,850
reverting of values then the rendering

00:15:36,330 --> 00:15:40,950
engine applies the users colors and so

00:15:38,850 --> 00:15:43,200
basically has its own user user agent

00:15:40,950 --> 00:15:45,420
style sheet where the colors are applied

00:15:43,200 --> 00:15:49,500
semantically so link color to link color

00:15:45,420 --> 00:15:51,600
and all that good stuff so if we return

00:15:49,500 --> 00:15:53,790
to our reverted properties what's

00:15:51,600 --> 00:15:56,070
important to note here as developers is

00:15:53,790 --> 00:15:58,860
that if you use a reverted property to

00:15:56,070 --> 00:16:00,900
denote state you might want to make some

00:15:58,860 --> 00:16:02,700
adjustments enforce color modes so for

00:16:00,900 --> 00:16:06,600
example if you're using black shadow to

00:16:02,700 --> 00:16:08,430
denote a focus state and another

00:16:06,600 --> 00:16:10,860
interesting point to call out here is

00:16:08,430 --> 00:16:13,380
that background image is only reverted

00:16:10,860 --> 00:16:17,640
and user interactive controls with the

00:16:13,380 --> 00:16:19,490
exception of buttons and so we not just

00:16:17,640 --> 00:16:21,870
like globally or per background image

00:16:19,490 --> 00:16:23,550
well it turns out and historical

00:16:21,870 --> 00:16:26,340
implementations that did do this we

00:16:23,550 --> 00:16:28,560
found that this causes problems when the

00:16:26,340 --> 00:16:31,530
web developer uses CSS to render content

00:16:28,560 --> 00:16:36,180
images so for example here is a feed of

00:16:31,530 --> 00:16:37,620
photography let the record show there

00:16:36,180 --> 00:16:40,290
are no visible images on the screen

00:16:37,620 --> 00:16:42,660
right now so there's many different

00:16:40,290 --> 00:16:44,370
reasons why people do this this in

00:16:42,660 --> 00:16:47,250
particular was a historical performance

00:16:44,370 --> 00:16:49,080
hack so we as rendering engines need to

00:16:47,250 --> 00:16:52,880
make sure that this content is available

00:16:49,080 --> 00:16:55,410
to people and so how do we actually

00:16:52,880 --> 00:16:58,200
guarantee that text legibility while

00:16:55,410 --> 00:16:59,700
also showing background images and the

00:16:58,200 --> 00:17:01,440
solution that we came up with an edge

00:16:59,700 --> 00:17:04,050
HTML and which will now be part of

00:17:01,440 --> 00:17:06,540
standard implementations is to render

00:17:04,050 --> 00:17:10,550
tax backplates behind the text when

00:17:06,540 --> 00:17:13,770
enforce color modes and so basically

00:17:10,550 --> 00:17:16,950
this helps you no guarantee that the

00:17:13,770 --> 00:17:18,870
user has a part colors and this can be

00:17:16,950 --> 00:17:22,350
seen on top of you know anything that

00:17:18,870 --> 00:17:25,110
the text is layered on top of so a new

00:17:22,350 --> 00:17:27,660
detail and standard implementations is

00:17:25,110 --> 00:17:29,320
that force color modes are preferred

00:17:27,660 --> 00:17:31,179
color scheme evaluates

00:17:29,320 --> 00:17:34,360
appropriately so what the rendering

00:17:31,179 --> 00:17:36,610
engine does is it looks at the page

00:17:34,360 --> 00:17:38,139
background color or the canvas color to

00:17:36,610 --> 00:17:41,049
determine if the forest color mode is

00:17:38,139 --> 00:17:42,399
light or dark and then it uses this to

00:17:41,049 --> 00:17:44,919
evaluate preferred color scheme

00:17:42,399 --> 00:17:47,139
correctly so in this case we're actually

00:17:44,919 --> 00:17:49,630
picking up in our gradient images here

00:17:47,139 --> 00:17:51,880
the colors that we set within our dark

00:17:49,630 --> 00:17:53,230
mode styles because we're currently in a

00:17:51,880 --> 00:17:57,759
forest color scheme that has a black

00:17:53,230 --> 00:17:59,980
background so SVG's are for the most

00:17:57,759 --> 00:18:02,710
part not modified in standard

00:17:59,980 --> 00:18:04,419
implementations this is because we as

00:18:02,710 --> 00:18:07,179
rendering engines don't really always

00:18:04,419 --> 00:18:09,340
know how these should be shifted for

00:18:07,179 --> 00:18:13,240
these colors because sugs can be very

00:18:09,340 --> 00:18:16,450
complex documents so the only pieces of

00:18:13,240 --> 00:18:18,990
SVG that are color shifted our SVG text

00:18:16,450 --> 00:18:22,179
as well as foreign object which

00:18:18,990 --> 00:18:25,120
essentially embeds HTML inside of SVG

00:18:22,179 --> 00:18:27,820
and so actually funnily enough this is

00:18:25,120 --> 00:18:30,039
why our logo is in the correct color

00:18:27,820 --> 00:18:32,679
because in our base styles we used

00:18:30,039 --> 00:18:36,940
current color for distorts in the fills

00:18:32,679 --> 00:18:38,440
and so it's actually in proprietary from

00:18:36,940 --> 00:18:43,000
the system link color that's been

00:18:38,440 --> 00:18:44,470
provided here so both rendering engines

00:18:43,000 --> 00:18:46,750
can get most of the way there by

00:18:44,470 --> 00:18:50,139
applying reasonable defaults to semantic

00:18:46,750 --> 00:18:52,480
content web developers another content

00:18:50,139 --> 00:18:54,340
best and can apply that content specific

00:18:52,480 --> 00:18:56,379
knowledge to tailor the four colors

00:18:54,340 --> 00:18:59,590
experience so let's go through how to do

00:18:56,379 --> 00:19:01,750
that so you may have noticed when we

00:18:59,590 --> 00:19:03,730
kind of scroll through our fourth color

00:19:01,750 --> 00:19:06,669
page here that we actually lost some

00:19:03,730 --> 00:19:10,360
details and the palette of the style

00:19:06,669 --> 00:19:12,190
profile and so we this is because we're

00:19:10,360 --> 00:19:15,580
using background image or a background

00:19:12,190 --> 00:19:17,529
color to render the color palettes so we

00:19:15,580 --> 00:19:19,240
could change using images as a strategy

00:19:17,529 --> 00:19:20,559
or we could decide let's just manage

00:19:19,240 --> 00:19:23,220
this component enforce color modes

00:19:20,559 --> 00:19:26,230
ourselves so let's go ahead and do that

00:19:23,220 --> 00:19:29,799
we have a couple of requirements for our

00:19:26,230 --> 00:19:32,620
palette and force color modes so we want

00:19:29,799 --> 00:19:34,600
to retain the color swatch we want to

00:19:32,620 --> 00:19:36,070
make sure that we're always rendering

00:19:34,600 --> 00:19:38,289
the color swatch on top of black or

00:19:36,070 --> 00:19:40,179
white we're doing this because the user

00:19:38,289 --> 00:19:40,720
can set any color enforce color modes

00:19:40,179 --> 00:19:41,830
and we

00:19:40,720 --> 00:19:43,840
to make sure that the color doesn't look

00:19:41,830 --> 00:19:46,390
muddy on top of whatever the user might

00:19:43,840 --> 00:19:48,880
have set and we also want to preserve

00:19:46,390 --> 00:19:51,970
the users color scheme for text

00:19:48,880 --> 00:19:54,730
legibility all right so let's start with

00:19:51,970 --> 00:19:57,909
our media query so the prior art for

00:19:54,730 --> 00:20:00,610
this is the MS high contrast media query

00:19:57,909 --> 00:20:02,530
button standards this has been renamed

00:20:00,610 --> 00:20:05,710
to four colors and we'll check for the

00:20:02,530 --> 00:20:08,350
active value so the reason why we named

00:20:05,710 --> 00:20:11,260
it this in the CSS working group is to

00:20:08,350 --> 00:20:13,299
essentially future-proof the future we

00:20:11,260 --> 00:20:15,220
want web developers to be able to very

00:20:13,299 --> 00:20:20,110
efficiently style for any force color

00:20:15,220 --> 00:20:22,030
mode not just high contrast so then

00:20:20,110 --> 00:20:23,830
we'll want to opt out of force colors

00:20:22,030 --> 00:20:27,159
for the path of the component that we're

00:20:23,830 --> 00:20:30,610
managing so this comes from the prior

00:20:27,159 --> 00:20:33,400
art of msi contra and ms high contrast

00:20:30,610 --> 00:20:36,100
adjust none and so in standards this is

00:20:33,400 --> 00:20:38,320
fourth color just none and what this

00:20:36,100 --> 00:20:41,110
will do is remove all of the force

00:20:38,320 --> 00:20:43,390
colors that the rendering engine has set

00:20:41,110 --> 00:20:46,330
it'll basically retain all our colors

00:20:43,390 --> 00:20:49,720
for the component its children and any

00:20:46,330 --> 00:20:51,730
text back plates that are involved so

00:20:49,720 --> 00:20:55,510
you'll notice that our component now

00:20:51,730 --> 00:20:57,909
looks as I did in dark mode and so next

00:20:55,510 --> 00:20:59,409
we want to earner the background of this

00:20:57,909 --> 00:21:01,659
component in black because we're in a

00:20:59,409 --> 00:21:04,090
dark forest color scheme so I'll just

00:21:01,659 --> 00:21:05,799
set that to black but we actually want

00:21:04,090 --> 00:21:08,770
to be really careful with static values

00:21:05,799 --> 00:21:11,440
and of course color modes and the reason

00:21:08,770 --> 00:21:14,260
for this is not so obvious when we are

00:21:11,440 --> 00:21:16,360
using black and a black color scheme but

00:21:14,260 --> 00:21:18,700
if we switch this into say a purple user

00:21:16,360 --> 00:21:21,610
color scheme then this static color

00:21:18,700 --> 00:21:24,280
isn't aware of the change that the user

00:21:21,610 --> 00:21:27,190
made and it's not rendering things in

00:21:24,280 --> 00:21:28,870
the user's correct colors so in order to

00:21:27,190 --> 00:21:32,020
make sure that the text on top of this

00:21:28,870 --> 00:21:34,360
is rendering in the users colors we're

00:21:32,020 --> 00:21:36,640
going to use system colors to guarantee

00:21:34,360 --> 00:21:39,039
legibility so we're going to essentially

00:21:36,640 --> 00:21:41,950
create our own back plate here we'll set

00:21:39,039 --> 00:21:44,110
the background color of this span here

00:21:41,950 --> 00:21:47,530
to canvas and then we'll set the

00:21:44,110 --> 00:21:49,330
foreground to text and this way we are

00:21:47,530 --> 00:21:51,700
guaranteeing that we're using exactly

00:21:49,330 --> 00:21:53,559
the colors that the user chose

00:21:51,700 --> 00:21:55,980
and now our component is completed as

00:21:53,559 --> 00:21:59,080
far as dark forest colors are involved

00:21:55,980 --> 00:22:00,610
so there are a few CSS system colors

00:21:59,080 --> 00:22:03,010
that are relevant when windows high

00:22:00,610 --> 00:22:04,360
contrast is active so in addition to

00:22:03,010 --> 00:22:08,289
text in canvas

00:22:04,360 --> 00:22:10,960
there is also linked text for links

00:22:08,289 --> 00:22:12,549
there is gray text for disabled text and

00:22:10,960 --> 00:22:15,519
there's a couple additional keyboard

00:22:12,549 --> 00:22:18,220
values for highlights and for buttons

00:22:15,519 --> 00:22:22,090
and these are all up to date standards

00:22:18,220 --> 00:22:24,940
CSS system colors you can find the full

00:22:22,090 --> 00:22:27,220
list of CSS system colors on the CSS

00:22:24,940 --> 00:22:31,149
color editors draft and the short link

00:22:27,220 --> 00:22:33,340
for this is a kms / system - colors -

00:22:31,149 --> 00:22:35,110
draft and you'll notice that there's

00:22:33,340 --> 00:22:37,630
actually a longer list on here then on

00:22:35,110 --> 00:22:39,700
the previous slide that I showed so not

00:22:37,630 --> 00:22:42,010
every OS will be able to support every

00:22:39,700 --> 00:22:43,750
single system color so it's important

00:22:42,010 --> 00:22:48,309
that whenever you use these values that

00:22:43,750 --> 00:22:51,850
you you know test your your content so

00:22:48,309 --> 00:22:53,620
as we mentioned we want to either always

00:22:51,850 --> 00:22:55,870
render the background of our component

00:22:53,620 --> 00:22:58,419
in black or white and so we see that

00:22:55,870 --> 00:23:00,250
when we put the first color mode in a

00:22:58,419 --> 00:23:03,399
light color scheme we get the correct

00:23:00,250 --> 00:23:05,529
colors again for our text but the black

00:23:03,399 --> 00:23:07,149
background in the component is actually

00:23:05,529 --> 00:23:09,519
it's a little too much in this mode

00:23:07,149 --> 00:23:12,220
right so we want to change this to white

00:23:09,519 --> 00:23:14,289
in this case so what we can do is take a

00:23:12,220 --> 00:23:18,159
combinatorial approach in the new

00:23:14,289 --> 00:23:20,919
standards to modifying this so we can

00:23:18,159 --> 00:23:22,450
pray for forest colors active and prefer

00:23:20,919 --> 00:23:25,120
its color scheme light because that

00:23:22,450 --> 00:23:26,769
media core gets evaluated appropriately

00:23:25,120 --> 00:23:31,149
and then we just set our colors within

00:23:26,769 --> 00:23:33,669
this combinatorial media query so

00:23:31,149 --> 00:23:36,730
elsewhere in our page we are actually

00:23:33,669 --> 00:23:39,370
missing a little bit of detail here so

00:23:36,730 --> 00:23:42,190
enter base styles we set the style of

00:23:39,370 --> 00:23:43,990
the button to border zero because and

00:23:42,190 --> 00:23:46,480
we're using background color to display

00:23:43,990 --> 00:23:48,639
this but this causes problems enforce

00:23:46,480 --> 00:23:50,649
color modes for example where the

00:23:48,639 --> 00:23:52,779
background color and the page background

00:23:50,649 --> 00:23:54,190
color are actually the same you can't

00:23:52,779 --> 00:23:56,139
see the bounds of this buttons the user

00:23:54,190 --> 00:23:59,260
doesn't know exactly where to click or

00:23:56,139 --> 00:24:01,480
even if it is button so in order to fix

00:23:59,260 --> 00:24:02,590
this we can just change in our base

00:24:01,480 --> 00:24:05,350
styles

00:24:02,590 --> 00:24:06,760
the border to 1px solid transparent so

00:24:05,350 --> 00:24:08,710
essentially here we're guaranteeing that

00:24:06,760 --> 00:24:11,049
we get the design that we wanted in our

00:24:08,710 --> 00:24:13,120
base theme so the border is invisible

00:24:11,049 --> 00:24:15,750
but in this force color mode we are

00:24:13,120 --> 00:24:19,870
appropriately getting the border drawn

00:24:15,750 --> 00:24:22,860
so in additional considerations browsers

00:24:19,870 --> 00:24:26,230
aren't really in the business today of

00:24:22,860 --> 00:24:29,049
changing styling by default based on

00:24:26,230 --> 00:24:31,120
Aria roles and properties so expectation

00:24:29,049 --> 00:24:33,789
is that if you're using aria to provide

00:24:31,120 --> 00:24:35,980
your own semantics on a component then

00:24:33,789 --> 00:24:38,860
you are also managing keyboard

00:24:35,980 --> 00:24:40,870
accessibility and styling as well and so

00:24:38,860 --> 00:24:42,669
this actually applies today enforce

00:24:40,870 --> 00:24:45,279
color modes as it does in default

00:24:42,669 --> 00:24:47,440
context so you might want to test if

00:24:45,279 --> 00:24:50,830
you're using any styling that's

00:24:47,440 --> 00:24:53,380
connected to Aria so unless you do a

00:24:50,830 --> 00:24:54,880
whole lot of creating your own semantics

00:24:53,380 --> 00:24:57,370
and States and your own custom

00:24:54,880 --> 00:24:59,429
components we actually expect that the

00:24:57,370 --> 00:25:01,929
work that you'll have to do with

00:24:59,429 --> 00:25:04,120
optimizing for for color modes is like

00:25:01,929 --> 00:25:05,919
pretty minimal so I actually just

00:25:04,120 --> 00:25:08,289
through a time that we've information at

00:25:05,919 --> 00:25:10,630
you but it's worth noting that we only

00:25:08,289 --> 00:25:13,120
wrote 12 lines of code for the new

00:25:10,630 --> 00:25:15,659
standards over these past slides and I'm

00:25:13,120 --> 00:25:19,149
including selectors in that number of

00:25:15,659 --> 00:25:22,029
lines and we've got you know our page

00:25:19,149 --> 00:25:26,590
set up we also changed one line in the

00:25:22,029 --> 00:25:28,779
base theme as well so as far as browser

00:25:26,590 --> 00:25:31,899
support goes for force color modes the

00:25:28,779 --> 00:25:35,049
prefixed values are still supported in

00:25:31,899 --> 00:25:37,029
IE and Microsoft edge today and that's

00:25:35,049 --> 00:25:39,820
versions of Microsoft edge that are

00:25:37,029 --> 00:25:42,580
based on edge HTML and I make that

00:25:39,820 --> 00:25:45,399
distinction because the new standards

00:25:42,580 --> 00:25:47,409
are in development in chromium for you

00:25:45,399 --> 00:25:50,380
know new versions of Microsoft edge as

00:25:47,409 --> 00:25:51,909
well as the entire browser community

00:25:50,380 --> 00:25:54,429
that is based on this particular

00:25:51,909 --> 00:25:55,809
rendering engine and we hope that we

00:25:54,429 --> 00:25:57,630
will be you know joined by other

00:25:55,809 --> 00:25:59,799
rendering and just as well in the future

00:25:57,630 --> 00:26:02,559
so it is worth noting that these

00:25:59,799 --> 00:26:05,380
standards are super super new we've been

00:26:02,559 --> 00:26:07,059
working on them in 2019 but we think

00:26:05,380 --> 00:26:09,220
that you know they'll be imminently

00:26:07,059 --> 00:26:10,010
ready for folks to start playing around

00:26:09,220 --> 00:26:14,000
with

00:26:10,010 --> 00:26:17,000
FLAC soon so if you're testing without a

00:26:14,000 --> 00:26:20,180
Windows machine you can find free

00:26:17,000 --> 00:26:24,020
virtual machines at akms slash web - VMs

00:26:20,180 --> 00:26:26,630
and in the future platform browsers may

00:26:24,020 --> 00:26:28,880
consider possibly having some dev tools

00:26:26,630 --> 00:26:31,070
that could spoof force color modes from

00:26:28,880 --> 00:26:32,120
directly within the browser and this

00:26:31,070 --> 00:26:34,580
would mean that you wouldn't need a

00:26:32,120 --> 00:26:36,590
Windows machine at all or you wouldn't

00:26:34,580 --> 00:26:38,780
have to push your entire machine into

00:26:36,590 --> 00:26:42,920
high contrast mode in order to test

00:26:38,780 --> 00:26:44,750
these values so I just show of hands

00:26:42,920 --> 00:26:46,870
like would anybody be interested in such

00:26:44,750 --> 00:26:48,890
a dev tool feature

00:26:46,870 --> 00:26:51,890
all right cool we got some hands

00:26:48,890 --> 00:26:53,900
throughout I hope you do get to test

00:26:51,890 --> 00:26:56,150
your content in a fourth color modes

00:26:53,900 --> 00:26:57,650
such as high contrast because while we

00:26:56,150 --> 00:26:59,960
as browsers can get most of the way

00:26:57,650 --> 00:27:02,180
there you are the expert on your content

00:26:59,960 --> 00:27:05,980
and can deliver a truly well tailor

00:27:02,180 --> 00:27:10,190
experience on top of the web platform so

00:27:05,980 --> 00:27:12,830
these emerging CSS media queries and CSS

00:27:10,190 --> 00:27:15,380
properties can allow us to meet our

00:27:12,830 --> 00:27:17,510
users where they are whether they find

00:27:15,380 --> 00:27:20,290
that dark mode helps them cut down on

00:27:17,510 --> 00:27:22,790
eyestrain or they need a very specific

00:27:20,290 --> 00:27:25,660
color scheme in order to stay productive

00:27:22,790 --> 00:27:29,360
on the web we can really give them a

00:27:25,660 --> 00:27:31,250
inclusive and delightful experience so

00:27:29,360 --> 00:27:32,840
with these new standards in hand let's

00:27:31,250 --> 00:27:36,560
design a more inclusive and accessible

00:27:32,840 --> 00:27:38,480
web together you can find my slides my

00:27:36,560 --> 00:27:41,600
demo and you know other resources at

00:27:38,480 --> 00:27:44,710
AKMs slash view source desk color and

00:27:41,600 --> 00:27:44,710
thank you very much

00:27:46,669 --> 00:27:48,730

YouTube URL: https://www.youtube.com/watch?v=Z_QZhoBrWPc


