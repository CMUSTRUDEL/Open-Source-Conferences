Title: 7th Edition Unix at 40 by Warner Losh
Publication date: 2019-10-21
Playlist: EuroBSDCon 2019, Norway
Description: 
	7th Edition Unix at 40

This year marks the 40th anniversary of the 7th Edition of Unix and 50 years since Thompson and Ritchie started writing Unix. In honor of these milestones, the author set about to recreate a historic commercial port of Unix to 8088 (Venix/86). This talk explores how V7 Unix has many children; how Unix has changed since the 7th Edition days; chronicles the creation of a V7 emulator needed to run the original compiler on fast hardware; and explores how to recreate sources to systems that have diverted from the now-public sources to recreate many of the binaries from the Venix/86 distribution. A better understanding of Unix’s past helps with understanding BSD systems today.

Ken and Dennis started to create Unix 50 years ago, about the time the United States was landing on the moon. It grew inside of Bell Labs for a decade, culminating in the 7th Edition of Unix, which spawned many children including System V, BSD, and many commercial Unixes. From this base, Unix was ported to many machines. One of these ports was Venix/86 which ran on 8086 and 8088 machines (and later 80286). The author’s first computer was the DEC Rainbow 100, a now-obscure also-ran released about the same time as the IBM-PC. The author searched for many years to find a copy of Venix/86R for the Rainbow, only to be disappointed until recently when a copy resurfaced which he helped recover. Noting the system was a commercial derivative of V7, the author set about to reconstruct the sources, as far as possible. The old hardware ran hundreds of times slower than modern hardware, so the author created a Venix/86 emulator to run the old compiler on modern hardware. The emulator is fairly advanced, and many of the sources have so-far been recovered. This talk will explore a number of topics: a history of Unix; the surprising things that were in V7 unix; the things we take for granted today that were missing; a discussion about creating a Venix/86 emulator and reverse engineering ABIs; and early results from the recreation efforts. Come for the history, stay for the riveting discussions of syscalls, calling conventions and binary emulation! This will be the perfect opportunity to understand where BSD came from; the debt we owe to Bell Labs; and learn from a simpler system to better understand today’s BSD systems.

More Info:
https://2019.eurobsdcon.org/talk-speakers/#unix
Captions: 
	00:00:03,560 --> 00:00:11,269
hello okay I'll start over

00:00:07,430 --> 00:00:13,719
so UNIX turns 50 this year it's been 40

00:00:11,269 --> 00:00:16,340
years since the seventh edition of UNIX

00:00:13,719 --> 00:00:18,800
was released which was kind of a pivotal

00:00:16,340 --> 00:00:20,180
release in the history of UNIX and I

00:00:18,800 --> 00:00:23,680
thought I'd talk a little bit about the

00:00:20,180 --> 00:00:25,640
first 10 years of UNIX today as well as

00:00:23,680 --> 00:00:27,560
talk to you about how I got interested

00:00:25,640 --> 00:00:30,890
in this towards the end I have a couple

00:00:27,560 --> 00:00:32,059
of interesting projects as well so I

00:00:30,890 --> 00:00:40,730
thought that it would be a good

00:00:32,059 --> 00:00:44,149
anniversary talk this year so this man

00:00:40,730 --> 00:00:46,339
is Ken Thompson his love of video games

00:00:44,149 --> 00:00:49,819
and gaming in general was one of the

00:00:46,339 --> 00:00:57,109
primary driving forces behind Unix

00:00:49,819 --> 00:01:00,829
and he teamed up with Dennis Ritchie on

00:00:57,109 --> 00:01:02,809
the iconic pdp-11 to produce the early

00:01:00,829 --> 00:01:07,460
versions of Unix I'll talk a little bit

00:01:02,809 --> 00:01:11,119
about how all of that happened and how

00:01:07,460 --> 00:01:15,140
it led to the complicated family tree of

00:01:11,119 --> 00:01:17,240
Unix that we have today as well as some

00:01:15,140 --> 00:01:22,670
presidential awards for the UNIX team

00:01:17,240 --> 00:01:24,860
and how some incarnation of UNIX wounded

00:01:22,670 --> 00:01:26,960
up in probably everybody's phone in here

00:01:24,860 --> 00:01:31,700
today now that there are no more windows

00:01:26,960 --> 00:01:36,680
phones so the history of unix actually

00:01:31,700 --> 00:01:41,509
begins in the 1950s in the 1950s Bell

00:01:36,680 --> 00:01:43,820
Labs was the belt producing operating

00:01:41,509 --> 00:01:46,340
systems for computers that were handling

00:01:43,820 --> 00:01:47,869
switched data switched data is the

00:01:46,340 --> 00:01:50,420
calling data so that they could build

00:01:47,869 --> 00:01:53,840
long distance and make money and they

00:01:50,420 --> 00:01:57,259
standardized on a system called visas

00:01:53,840 --> 00:01:59,299
for bail system and that met their needs

00:01:57,259 --> 00:02:01,189
for a number of years and then they

00:01:59,299 --> 00:02:03,170
realized that it's kind of difficult to

00:02:01,189 --> 00:02:07,310
have your own OS and they were looking

00:02:03,170 --> 00:02:11,030
to get out of the support business in in

00:02:07,310 --> 00:02:13,430
the early 60s so in 1964 they joined the

00:02:11,030 --> 00:02:19,640
effort to produce something called

00:02:13,430 --> 00:02:21,349
multics now multix was a system that ran

00:02:19,640 --> 00:02:24,099
on large mainframes some of these

00:02:21,349 --> 00:02:28,670
pictures here are some of the

00:02:24,099 --> 00:02:30,739
incarnations of the GE 645 mainframe

00:02:28,670 --> 00:02:32,680
that it was initially targeting and

00:02:30,739 --> 00:02:36,879
there were a number of very innovative

00:02:32,680 --> 00:02:39,290
features in this in multics a

00:02:36,879 --> 00:02:41,120
hierarchical file system virtual memory

00:02:39,290 --> 00:02:43,099
the kernel was implemented in a

00:02:41,120 --> 00:02:44,930
higher-level language a couple others

00:02:43,099 --> 00:02:48,489
that I have listed here and these are

00:02:44,930 --> 00:02:51,709
for the time in the early 1960s very

00:02:48,489 --> 00:02:54,769
very aggressive goals so it comes as no

00:02:51,709 --> 00:02:58,909
surprise that a couple of years in built

00:02:54,769 --> 00:03:05,590
labs becomes rather I don't know the

00:02:58,909 --> 00:03:07,549
right word for it but they became they

00:03:05,590 --> 00:03:09,260
didn't like the efforts things were

00:03:07,549 --> 00:03:13,310
going to slow it would require too much

00:03:09,260 --> 00:03:17,409
hardware and so in 1969 Bell Labs

00:03:13,310 --> 00:03:17,409
withdrew from the multics project and

00:03:17,830 --> 00:03:23,750
Ken Thompson and Dennis Ritchie and a

00:03:20,540 --> 00:03:27,470
couple other people who you may notice

00:03:23,750 --> 00:03:29,329
from early unix history were the last to

00:03:27,470 --> 00:03:31,310
leave the multics project and they

00:03:29,329 --> 00:03:33,650
really rather enjoyed the multics

00:03:31,310 --> 00:03:34,830
environment that it provided but they

00:03:33,650 --> 00:03:44,280
didn't like the

00:03:34,830 --> 00:03:47,370
pace that it was going in so as

00:03:44,280 --> 00:03:48,960
multix broke up ken needed to do

00:03:47,370 --> 00:03:51,060
something with his time so he played a

00:03:48,960 --> 00:03:54,930
game called space travel which is a

00:03:51,060 --> 00:03:56,550
simulation that lets you fly around the

00:03:54,930 --> 00:04:00,120
solar system and land on different

00:03:56,550 --> 00:04:03,270
planets it's similar to other games of

00:04:00,120 --> 00:04:04,860
its sort and unfortunately I wanted to

00:04:03,270 --> 00:04:06,960
put a nice screenshot on but this is the

00:04:04,860 --> 00:04:10,560
only known screenshot of it and I don't

00:04:06,960 --> 00:04:12,780
know what it even means but I had to

00:04:10,560 --> 00:04:18,180
include the screenshot because that's a

00:04:12,780 --> 00:04:21,510
bit of history here so ken was looking

00:04:18,180 --> 00:04:22,890
around to find some way to run this game

00:04:21,510 --> 00:04:25,290
because it was pretty expensive for him

00:04:22,890 --> 00:04:27,600
it you know it's 50 or $75 per game you

00:04:25,290 --> 00:04:29,280
run a bunch of ghost games in a day you

00:04:27,600 --> 00:04:31,100
run into some real money well real

00:04:29,280 --> 00:04:33,510
phony-baloney accounting money but

00:04:31,100 --> 00:04:35,850
management notices when you run up big

00:04:33,510 --> 00:04:38,730
bills like that so he was able to

00:04:35,850 --> 00:04:42,300
scrounge up and just used pdp-7 from the

00:04:38,730 --> 00:04:47,070
visual and acoustics department and the

00:04:42,300 --> 00:04:49,820
visual and acoustics department had this

00:04:47,070 --> 00:04:57,590
pdp-7 oh come on

00:04:49,820 --> 00:05:00,240
had a pdp-7 no this is supposed to start

00:04:57,590 --> 00:05:03,260
so they had a pdp-7

00:05:00,240 --> 00:05:08,730
hanging around and so ken was able to

00:05:03,260 --> 00:05:10,980
write PDP s7 assembler on there GE 634

00:05:08,730 --> 00:05:14,910
Mane or 635 mainframe put it on paper

00:05:10,980 --> 00:05:18,300
tape and take it to a PDP 7 this is a

00:05:14,910 --> 00:05:21,360
PDP 7 that's in a film called the

00:05:18,300 --> 00:05:24,090
incredible machine that talks about Bell

00:05:21,360 --> 00:05:26,460
Labs early music you'll see why I

00:05:24,090 --> 00:05:28,800
included it here in a second but he was

00:05:26,460 --> 00:05:31,380
able to take these tapes and put them on

00:05:28,800 --> 00:05:33,390
the machine and well that was fun he

00:05:31,380 --> 00:05:35,940
could play his game but he wanted to

00:05:33,390 --> 00:05:37,560
enhance the game and to do that he

00:05:35,940 --> 00:05:40,500
needed to compelled and compiled and

00:05:37,560 --> 00:05:43,080
he's wanted he decided well this would

00:05:40,500 --> 00:05:47,710
be a good system to implement a file

00:05:43,080 --> 00:05:52,100
system on and a kernel on that he and

00:05:47,710 --> 00:05:55,270
Dennis Ritchie and John Kennedy had

00:05:52,100 --> 00:05:58,729
designed as part of the multix effort

00:05:55,270 --> 00:06:02,570
and also about this time he started on

00:05:58,729 --> 00:06:05,900
Fortran compiler but he kind of got

00:06:02,570 --> 00:06:09,889
tired of that and wound up working with

00:06:05,900 --> 00:06:13,570
Dennis Ritchie to create a compiler into

00:06:09,889 --> 00:06:16,610
what eventually became the B language

00:06:13,570 --> 00:06:19,190
now what's a PDP 7 most people today

00:06:16,610 --> 00:06:21,770
don't know what a PDP 11 is well what a

00:06:19,190 --> 00:06:23,990
PDP 7 is but it was part of a number of

00:06:21,770 --> 00:06:28,130
computers that Dec Digital Equipment

00:06:23,990 --> 00:06:30,590
Corporation produced from the 1960s into

00:06:28,130 --> 00:06:32,870
the 70s and they were all 8-bit and

00:06:30,590 --> 00:06:35,630
there was a certain amount of binary

00:06:32,870 --> 00:06:40,180
compatibility from one to the next but

00:06:35,630 --> 00:06:46,490
it wasn't exact and you'll notice here

00:06:40,180 --> 00:06:49,250
1964 is when the pdp-11 was in or PDV 7

00:06:46,490 --> 00:06:51,770
was introduced but it was in 1969 that

00:06:49,250 --> 00:06:53,539
they withdrew from the multics project

00:06:51,770 --> 00:06:55,610
and ken started playing around so it was

00:06:53,539 --> 00:06:59,389
5 years old and the acoustics department

00:06:55,610 --> 00:07:01,039
got all the money and budget and at Bell

00:06:59,389 --> 00:07:03,289
Labs they had all kinds of new shiny

00:07:01,039 --> 00:07:06,500
computers and ken was able to get this

00:07:03,289 --> 00:07:08,240
one but even at the time it was

00:07:06,500 --> 00:07:10,750
considered to be an obsolete computer

00:07:08,240 --> 00:07:14,810
but it was the computer that they had

00:07:10,750 --> 00:07:16,810
now PDP 7's I have a little montage here

00:07:14,810 --> 00:07:20,419
that's just a number of different

00:07:16,810 --> 00:07:21,620
historic photographs of PDP sevens show

00:07:20,419 --> 00:07:23,060
the different environments there and

00:07:21,620 --> 00:07:25,009
some of these are in machine rooms some

00:07:23,060 --> 00:07:31,099
of them are in labs some of them are

00:07:25,009 --> 00:07:33,289
museum pieces now and so there's a kind

00:07:31,099 --> 00:07:35,360
of a large number of configurations that

00:07:33,289 --> 00:07:37,610
these machines came in dec offered

00:07:35,360 --> 00:07:39,169
probably 30 different options and

00:07:37,610 --> 00:07:41,150
everybody mixed and matched to make

00:07:39,169 --> 00:07:43,669
their own machine this is the picture

00:07:41,150 --> 00:07:45,740
you'll see most often in history of UNIX

00:07:43,669 --> 00:07:48,440
talks although it's not very

00:07:45,740 --> 00:07:51,139
representative of the machine that Ken

00:07:48,440 --> 00:07:52,669
had it's the prettiest picture that that

00:07:51,139 --> 00:07:57,770
people have

00:07:52,669 --> 00:08:03,379
though this is more like the machine

00:07:57,770 --> 00:08:05,240
that Ken would have there were no duct

00:08:03,379 --> 00:08:07,029
tape drive so it looks more like this

00:08:05,240 --> 00:08:11,029
there was a display with a light pen

00:08:07,029 --> 00:08:15,889
paper output and different control

00:08:11,029 --> 00:08:18,319
panels and a paper tape reader in the

00:08:15,889 --> 00:08:21,310
clip that I shared it's actually a clip

00:08:18,319 --> 00:08:25,610
of one of these reading and the tape in

00:08:21,310 --> 00:08:27,620
unfortunately the pdp-7 original sources

00:08:25,610 --> 00:08:29,689
were believed lost to time somewhere

00:08:27,620 --> 00:08:32,300
along the way they didn't keep him

00:08:29,689 --> 00:08:36,620
around systems are upgraded and they

00:08:32,300 --> 00:08:39,469
were lost so up till very recently the

00:08:36,620 --> 00:08:42,560
exact configuration of Ken's machine was

00:08:39,469 --> 00:08:46,130
unknown one of the interesting things

00:08:42,560 --> 00:08:48,380
though was because the computer was

00:08:46,130 --> 00:08:50,329
binary compatible there were some PDP

00:08:48,380 --> 00:08:53,300
nines inside of bell labs had also ran

00:08:50,329 --> 00:08:56,980
it so it wasn't just this one machine so

00:08:53,300 --> 00:08:56,980
a number of people were able to use that

00:08:57,640 --> 00:09:07,360
and then it was lost to history but not

00:09:03,350 --> 00:09:09,860
really Robert Morris senior he's a

00:09:07,360 --> 00:09:12,470
researcher at Bell Labs did a number of

00:09:09,860 --> 00:09:15,769
things in security including coming up

00:09:12,470 --> 00:09:18,440
with crypt and Etsy password he passed

00:09:15,769 --> 00:09:20,149
away in 2011 and left a large collection

00:09:18,440 --> 00:09:22,910
of papers that took a while to go

00:09:20,149 --> 00:09:25,130
through and Doug McElroy another person

00:09:22,910 --> 00:09:29,720
from Bell Labs from way back went

00:09:25,130 --> 00:09:33,440
through his papers and found in 2015 the

00:09:29,720 --> 00:09:36,649
PDP 7 UNIX manual that had been produced

00:09:33,440 --> 00:09:38,660
at the time and he scanned it in and

00:09:36,649 --> 00:09:41,810
send it sent it to a group called twos

00:09:38,660 --> 00:09:44,420
which stands for the UNIX historic

00:09:41,810 --> 00:09:50,690
society and they're a group that

00:09:44,420 --> 00:09:52,070
collects old UNIX artifacts and this

00:09:50,690 --> 00:09:56,260
will become important here in a minute

00:09:52,070 --> 00:10:00,980
but there was no source in dr. Morris's

00:09:56,260 --> 00:10:02,440
collection of papers unfortunately but

00:10:00,980 --> 00:10:04,480
the next year

00:10:02,440 --> 00:10:07,930
Norman Wilson was rooting around his

00:10:04,480 --> 00:10:11,079
garage and found a box of printouts that

00:10:07,930 --> 00:10:14,199
he had made while he was at Bell Labs in

00:10:11,079 --> 00:10:18,399
the 1980s and found that they wore the

00:10:14,199 --> 00:10:20,829
PDP 7 sources I've included a little bit

00:10:18,399 --> 00:10:25,420
of the sources here for set UID renamed

00:10:20,829 --> 00:10:26,800
in time this is in pdp-7 source I'm not

00:10:25,420 --> 00:10:31,689
going to do a Code walkthrough don't

00:10:26,800 --> 00:10:34,839
worry but when they found these again

00:10:31,689 --> 00:10:40,300
they were posted to the twos group who

00:10:34,839 --> 00:10:43,660
created a version 0 UNIX working group

00:10:40,300 --> 00:10:46,209
and they ocr'd the code in made sure

00:10:43,660 --> 00:10:48,579
that the code once it was ocr'd matched

00:10:46,209 --> 00:10:51,189
what you know they thought it said and

00:10:48,579 --> 00:10:53,769
there weren't any errors and then they

00:10:51,189 --> 00:10:55,120
wrote the PDP 7 tool chain so that they

00:10:53,769 --> 00:10:56,680
could run this and a user remote

00:10:55,120 --> 00:10:59,699
simulation so they could run the

00:10:56,680 --> 00:11:02,649
userland programs while the sim h

00:10:59,699 --> 00:11:05,079
simulator it's a simulator that most

00:11:02,649 --> 00:11:07,630
people use to run PDP 11 serve axes but

00:11:05,079 --> 00:11:13,600
it had it knew how to run a PDP 7 so

00:11:07,630 --> 00:11:16,149
they enhanced the bat to run the sources

00:11:13,600 --> 00:11:18,550
that they had found now we had the full

00:11:16,149 --> 00:11:22,120
kernel in these sources but only a few

00:11:18,550 --> 00:11:23,980
of the user land sources all of these up

00:11:22,120 --> 00:11:27,699
here I'm not going to read through them

00:11:23,980 --> 00:11:29,920
all but suffice to say that tear-off is

00:11:27,699 --> 00:11:33,490
not in this there was a version of in

00:11:29,920 --> 00:11:35,889
Roth or Roth on this early unix but it

00:11:33,490 --> 00:11:39,670
wasn't one of the sources that were are

00:11:35,889 --> 00:11:44,439
preserved now they didn't have an init

00:11:39,670 --> 00:11:47,079
or a couple of common programs including

00:11:44,439 --> 00:11:50,490
a shell not a bourne shell but just a

00:11:47,079 --> 00:11:54,880
simple shell so the restoration project

00:11:50,490 --> 00:11:56,949
created those and I've included a URL

00:11:54,880 --> 00:11:59,079
for a github entry you can go and grab

00:11:56,949 --> 00:12:05,920
this and they have instructions if you'd

00:11:59,079 --> 00:12:09,160
like to run it so one of the interesting

00:12:05,920 --> 00:12:10,600
things is now that we have version 7

00:12:09,160 --> 00:12:12,190
running we know what all the devices on

00:12:10,600 --> 00:12:15,340
it were

00:12:12,190 --> 00:12:17,470
and it also so happens that we have the

00:12:15,340 --> 00:12:19,810
deck field service logs for all the 18

00:12:17,470 --> 00:12:21,850
bit machines that another different

00:12:19,810 --> 00:12:24,580
packrat squirreled away in his garage

00:12:21,850 --> 00:12:28,840
and scanned in probably seven or eight

00:12:24,580 --> 00:12:32,260
years ago and from these two sources we

00:12:28,840 --> 00:12:35,980
know that there was a TTY and a white

00:12:32,260 --> 00:12:38,230
pin and a deck 3040 display driver which

00:12:35,980 --> 00:12:41,230
by the way was the display that had the

00:12:38,230 --> 00:12:44,140
music on it in my video is that display

00:12:41,230 --> 00:12:45,670
and a display driver which is a custom

00:12:44,140 --> 00:12:49,000
piece of hardware that I've not been

00:12:45,670 --> 00:12:53,650
able to find any pictures of that Bell

00:12:49,000 --> 00:12:59,320
Labs built for acoustics and visual

00:12:53,650 --> 00:13:01,900
processing and it also had a RBE o.9

00:12:59,320 --> 00:13:04,540
disk nobody knows what an RPO 9 disc is

00:13:01,900 --> 00:13:06,730
I had to go look it up when I found it

00:13:04,540 --> 00:13:09,070
in the sim Age sources but it was a

00:13:06,730 --> 00:13:10,540
retrofit from the PDP nines since they

00:13:09,070 --> 00:13:15,460
were binary compatible they could do

00:13:10,540 --> 00:13:17,410
this but the upshot is there was no

00:13:15,460 --> 00:13:19,930
other pp7 on the planet that could run

00:13:17,410 --> 00:13:25,060
it there was only one that listed in our

00:13:19,930 --> 00:13:28,990
vo9 in its manifest and there were three

00:13:25,060 --> 00:13:30,190
PDP 9s and two PDP 15s that ran PDP 7

00:13:28,990 --> 00:13:33,670
unix at Bell Labs

00:13:30,190 --> 00:13:36,310
I checked with Ken Thompson who was

00:13:33,670 --> 00:13:40,690
gracious enough to tell me that that's

00:13:36,310 --> 00:13:43,330
what they were running and this bizarre

00:13:40,690 --> 00:13:47,560
setup the restored version 0 UNIX

00:13:43,330 --> 00:13:49,270
somebody wrote a PDP 7 emulator for the

00:13:47,560 --> 00:13:52,480
office gated C contest which is a

00:13:49,270 --> 00:13:55,690
contest held every year to see how crazy

00:13:52,480 --> 00:13:57,610
and bizarre of C you can produce that is

00:13:55,690 --> 00:13:59,440
just completely illegible unreadable and

00:13:57,610 --> 00:14:02,020
yet does something useful well the

00:13:59,440 --> 00:14:04,720
useful thing that this did and it was in

00:14:02,020 --> 00:14:09,400
honor of Denis Ritchie's passing was

00:14:04,720 --> 00:14:13,000
that it ran version 0 UNIX on this pdp-7

00:14:09,400 --> 00:14:16,390
emulator there's more to that contest as

00:14:13,000 --> 00:14:19,480
well and I don't have time to go through

00:14:16,390 --> 00:14:22,840
all of the details analysis but we

00:14:19,480 --> 00:14:24,800
actually know which PDP southern serial

00:14:22,840 --> 00:14:26,720
number it actually was by looking

00:14:24,800 --> 00:14:29,089
this list and I have a blog entry there

00:14:26,720 --> 00:14:32,209
if people want to look at the slides

00:14:29,089 --> 00:14:35,540
later this is the from the printout that

00:14:32,209 --> 00:14:39,980
the packrat saved and it shows that

00:14:35,540 --> 00:14:43,459
pdp-11 gnomes number 34 is the one that

00:14:39,980 --> 00:14:46,940
ken thompson used to develop unix we see

00:14:43,459 --> 00:14:50,570
in our CEO 9 which is an RB o 9 and

00:14:46,940 --> 00:14:53,660
controller combination and this custom

00:14:50,570 --> 00:14:55,610
hardware thing which is the custom

00:14:53,660 --> 00:14:59,839
display that I talked about earlier and

00:14:55,610 --> 00:15:02,209
in terms of how much money this was for

00:14:59,839 --> 00:15:03,769
this configuration near this would have

00:15:02,209 --> 00:15:07,880
been about a quarter of million dollars

00:15:03,769 --> 00:15:09,980
in 1965 prices so I didn't do the math

00:15:07,880 --> 00:15:13,430
that's about a million and a half or two

00:15:09,980 --> 00:15:15,829
million dollars today so a fairly

00:15:13,430 --> 00:15:18,190
expensive machine not as expensive as

00:15:15,829 --> 00:15:20,690
the two million or three million dollar

00:15:18,190 --> 00:15:25,760
machines that multics were targeting but

00:15:20,690 --> 00:15:28,519
still an expensive machine and remember

00:15:25,760 --> 00:15:31,360
thus the the show that I this is a

00:15:28,519 --> 00:15:36,410
screen grab from the the video The

00:15:31,360 --> 00:15:40,040
Incredible Machine and if you look you

00:15:36,410 --> 00:15:42,589
can see the control panel and the paper

00:15:40,040 --> 00:15:47,000
tape and the other status registered

00:15:42,589 --> 00:15:50,450
lights that were on a PDP 7 so since

00:15:47,000 --> 00:15:54,410
this was made at Bell Labs this could be

00:15:50,450 --> 00:15:59,950
the machine that ultimately Ken was able

00:15:54,410 --> 00:16:04,250
to scrounge and use as the thing or

00:15:59,950 --> 00:16:05,420
maybe not there's a there's a second one

00:16:04,250 --> 00:16:07,490
it could be and I haven't done the

00:16:05,420 --> 00:16:14,540
detailed analysis to know if I'm right

00:16:07,490 --> 00:16:16,910
or just half right so so this is the PDP

00:16:14,540 --> 00:16:20,420
7 part of the clip that I was wanting to

00:16:16,910 --> 00:16:21,980
show you so this lets you see them pan

00:16:20,420 --> 00:16:24,140
around the machine and see how big it is

00:16:21,980 --> 00:16:25,940
it's you know if it was on the stage it

00:16:24,140 --> 00:16:33,040
would take up half of the stage is very

00:16:25,940 --> 00:16:37,220
massive computer so all of these things

00:16:33,040 --> 00:16:40,290
with the PDP 7 allowed

00:16:37,220 --> 00:16:42,870
the UNIX group at Bell Labs to give some

00:16:40,290 --> 00:16:46,970
credibility so when it came time to buy

00:16:42,870 --> 00:16:51,570
a new machine they were able to buy

00:16:46,970 --> 00:16:54,420
pdp-11 for $65,000

00:16:51,570 --> 00:16:56,550
now they had tried to buy a pdp-10 to

00:16:54,420 --> 00:16:58,530
run a multi like saying and the

00:16:56,550 --> 00:17:00,600
management were still gun-shy from the

00:16:58,530 --> 00:17:03,030
whole multix fiasco so they said no and

00:17:00,600 --> 00:17:05,790
they came back with the bargain basement

00:17:03,030 --> 00:17:08,700
price of a sixty-five thousand dollar

00:17:05,790 --> 00:17:10,380
machine while they were waiting for this

00:17:08,700 --> 00:17:14,460
machine to be delivered ken wrote a

00:17:10,380 --> 00:17:16,950
pdp-11 assembler in be on the PDP 7 and

00:17:14,460 --> 00:17:21,470
Dennis started to retarget the B

00:17:16,950 --> 00:17:26,510
compiler to produce pdp-11

00:17:21,470 --> 00:17:28,890
opcode this is an early PDP 11 s 20

00:17:26,510 --> 00:17:33,000
didn't have an MMU as a very simple

00:17:28,890 --> 00:17:38,730
machine just had eight killer words of

00:17:33,000 --> 00:17:44,640
memory a very basic machine so once the

00:17:38,730 --> 00:17:48,750
system was delivered they ported in in

00:17:44,640 --> 00:17:51,630
earnest to this machine kids family went

00:17:48,750 --> 00:17:53,760
on vacation to visit in LA his in-laws

00:17:51,630 --> 00:17:56,910
for three weeks and during those three

00:17:53,760 --> 00:18:01,640
weeks he spent a week each rewriting the

00:17:56,910 --> 00:18:04,290
kernel the assembler and the B compiler

00:18:01,640 --> 00:18:06,420
to get them going on the machine so

00:18:04,290 --> 00:18:09,960
everyone is here they could start using

00:18:06,420 --> 00:18:11,210
it this eventually became the first

00:18:09,960 --> 00:18:14,190
edition of Unix

00:18:11,210 --> 00:18:15,930
when bell labs were producing editions

00:18:14,190 --> 00:18:18,660
of unix it sounds like something really

00:18:15,930 --> 00:18:21,150
fancy that means oh we printed the

00:18:18,660 --> 00:18:22,890
manual a bunch of times and we have a

00:18:21,150 --> 00:18:24,510
stack of them and this is the first

00:18:22,890 --> 00:18:28,620
edition manual because that's the day

00:18:24,510 --> 00:18:32,880
that we printed it which also means

00:18:28,620 --> 00:18:36,990
there's not a good configuration

00:18:32,880 --> 00:18:40,410
management for the system they had they

00:18:36,990 --> 00:18:43,440
didn't have CVS or SC see us or get or

00:18:40,410 --> 00:18:45,360
anything like that back then so all that

00:18:43,440 --> 00:18:47,940
we have that survives from the first

00:18:45,360 --> 00:18:49,440
edition is the kernel and in it sources

00:18:47,940 --> 00:18:53,759
that's all that

00:18:49,440 --> 00:18:56,519
survives there are a number of binary

00:18:53,759 --> 00:18:58,500
images of first-edition eunuchs you can

00:18:56,519 --> 00:19:02,070
download but the provenance isn't very

00:18:58,500 --> 00:19:04,799
clear because in the early days time T

00:19:02,070 --> 00:19:07,169
was in a count of second since 1970 it

00:19:04,799 --> 00:19:09,750
was a number of sixty seven sixty Hertz

00:19:07,169 --> 00:19:12,029
ticks since night since the epoch year

00:19:09,750 --> 00:19:14,000
and if you're good at math or I have a

00:19:12,029 --> 00:19:16,919
calculator handy you'll see that that

00:19:14,000 --> 00:19:19,860
overflows every two point to four years

00:19:16,919 --> 00:19:22,529
and so every year there was a crisis

00:19:19,860 --> 00:19:26,820
it's a new year we have to change the

00:19:22,529 --> 00:19:28,409
epoch date and so they found a number of

00:19:26,820 --> 00:19:33,120
tapes but they're unsure is this tape

00:19:28,409 --> 00:19:35,370
from 1971 or 72 or 73 if it's 473 it's

00:19:33,120 --> 00:19:37,350
really version four but if it's 471 it's

00:19:35,370 --> 00:19:39,750
really cool because it's version 1 they

00:19:37,350 --> 00:19:44,340
don't know so some of the images that

00:19:39,750 --> 00:19:47,549
are produced online are from this period

00:19:44,340 --> 00:19:51,899
but maybe is aren't exactly version 1

00:19:47,549 --> 00:19:54,210
unix-like they're advertised in the next

00:19:51,899 --> 00:19:56,580
couple of years there were another a

00:19:54,210 --> 00:19:59,279
number of additional versions of UNIX

00:19:56,580 --> 00:20:02,039
that were produced the second third and

00:19:59,279 --> 00:20:04,320
fourth edition we have manuals from the

00:20:02,039 --> 00:20:07,860
second and third edition and we have a

00:20:04,320 --> 00:20:10,289
sea kernel from a late fourth edition

00:20:07,860 --> 00:20:12,029
but no other artifacts survived from the

00:20:10,289 --> 00:20:14,100
time apart from the tapes that I

00:20:12,029 --> 00:20:17,909
mentioned is earlier which is probably

00:20:14,100 --> 00:20:22,379
from about this time so on the fourth

00:20:17,909 --> 00:20:24,600
the fourth edition Dennis Ritchie and

00:20:22,379 --> 00:20:27,659
Ken Thompson Purdue wrote a paper for

00:20:24,600 --> 00:20:30,809
the bell systems technical journal that

00:20:27,659 --> 00:20:34,019
was published in 1974 and it describes

00:20:30,809 --> 00:20:35,399
the fourth edition of Unix and one of

00:20:34,019 --> 00:20:38,460
the interesting things that I found when

00:20:35,399 --> 00:20:41,039
I started digging into this was in my

00:20:38,460 --> 00:20:43,169
mind Oh additions one two three four

00:20:41,039 --> 00:20:43,769
five six seven and then it exploded into

00:20:43,169 --> 00:20:46,139
the world

00:20:43,769 --> 00:20:48,679
well the story turns out to be a lot

00:20:46,139 --> 00:20:51,299
more complicated inside of Bell Labs

00:20:48,679 --> 00:20:54,570
this fourth edition is where the

00:20:51,299 --> 00:20:54,899
programmers workbench started to take

00:20:54,570 --> 00:20:57,450
shape

00:20:54,899 --> 00:21:00,029
they took unix and made it a front-end

00:20:57,450 --> 00:21:01,540
for IBM machines where at the time you

00:21:00,029 --> 00:21:04,030
would have to take a big deck of car

00:21:01,540 --> 00:21:07,300
and put it in and the big deck of cards

00:21:04,030 --> 00:21:09,010
was a real pain to deal with a few it

00:21:07,300 --> 00:21:09,910
was literally individual cards and if

00:21:09,010 --> 00:21:11,440
you were walking down the hall and

00:21:09,910 --> 00:21:12,910
tripped and they went everywhere you'd

00:21:11,440 --> 00:21:16,000
have to sort them back into the exact

00:21:12,910 --> 00:21:19,860
right order and using a UNIX machine

00:21:16,000 --> 00:21:22,960
with source code control was much easier

00:21:19,860 --> 00:21:25,690
so a second line with something called

00:21:22,960 --> 00:21:28,420
CP UNIX which is actually a rather

00:21:25,690 --> 00:21:29,830
important strain of UNIX inside a bill

00:21:28,420 --> 00:21:33,150
valves but nobody outside of Bell Labs

00:21:29,830 --> 00:21:37,330
knows about it in Columbus they took a

00:21:33,150 --> 00:21:40,270
port of the first edition or second

00:21:37,330 --> 00:21:44,950
edition UNIX that they use to run a

00:21:40,270 --> 00:21:46,630
switch and wound up maintaining that for

00:21:44,950 --> 00:21:47,950
years bringing in new code from time to

00:21:46,630 --> 00:21:50,500
time and I'll I'll talk about its

00:21:47,950 --> 00:21:54,820
evolution in a second and the UNIX

00:21:50,500 --> 00:21:57,250
support group also started in 73 because

00:21:54,820 --> 00:21:59,860
when you got a tape from read the

00:21:57,250 --> 00:22:01,360
research guys you got a tape that's it

00:21:59,860 --> 00:22:02,470
they didn't want to hear from you didn't

00:22:01,360 --> 00:22:04,210
want talking did won't answer any

00:22:02,470 --> 00:22:06,760
questions here's the tape have a nice

00:22:04,210 --> 00:22:09,610
day if you can use it great go for it if

00:22:06,760 --> 00:22:14,260
you can't study maybe you'll be able to

00:22:09,610 --> 00:22:15,340
use it and you know that's okay some

00:22:14,260 --> 00:22:16,870
universities actually got a lot of

00:22:15,340 --> 00:22:20,350
mileage out of studying the source code

00:22:16,870 --> 00:22:24,100
for some time but the internal groups

00:22:20,350 --> 00:22:26,860
inside of a TMT velvet systems that

00:22:24,100 --> 00:22:27,840
wanted to use it needed support so this

00:22:26,860 --> 00:22:31,150
group started

00:22:27,840 --> 00:22:35,410
also there was a real-time version of

00:22:31,150 --> 00:22:37,450
UNIX called Merton that started in 73

00:22:35,410 --> 00:22:40,780
and they took the fourth edition kernel

00:22:37,450 --> 00:22:43,630
and ported it to a pdp-11

00:22:40,780 --> 00:22:46,690
hypervisor to run under a pdp-11

00:22:43,630 --> 00:22:48,400
hypervisor so you would have a real time

00:22:46,690 --> 00:22:50,410
task and you'd have your unix task and

00:22:48,400 --> 00:22:51,910
the unix wouldn't get you know with all

00:22:50,410 --> 00:22:53,650
the processing it was doing wouldn't get

00:22:51,910 --> 00:22:56,490
in a way if you're the real time tasks

00:22:53,650 --> 00:23:00,970
of turning switches on and off to make

00:22:56,490 --> 00:23:02,740
circuits for phone calls this was the

00:23:00,970 --> 00:23:04,210
first edition also fourth edition was

00:23:02,740 --> 00:23:06,880
the first edition that went out to

00:23:04,210 --> 00:23:10,990
universities Berkeley got a copy at this

00:23:06,880 --> 00:23:14,560
time Columbia did as well Lou Katz was

00:23:10,990 --> 00:23:16,720
the first person to get a tape and the

00:23:14,560 --> 00:23:19,690
labs culture of sharing that we would

00:23:16,720 --> 00:23:21,430
today call open source actually started

00:23:19,690 --> 00:23:23,470
at this time anybody could get the

00:23:21,430 --> 00:23:26,560
source to UNIX and learn how it was done

00:23:23,470 --> 00:23:29,170
and make improvements and it was also

00:23:26,560 --> 00:23:31,690
about this time that an informal UNIX

00:23:29,170 --> 00:23:33,450
users group started they would later

00:23:31,690 --> 00:23:39,610
become USENIX

00:23:33,450 --> 00:23:44,890
so I have I have kind of a visual

00:23:39,610 --> 00:23:46,810
diagram here the New Jersey Bell as CCS

00:23:44,890 --> 00:23:51,540
as CCS is not the source code control

00:23:46,810 --> 00:23:55,000
system it is is initials for a switch

00:23:51,540 --> 00:23:57,790
telephone switch in the SS switch that

00:23:55,000 --> 00:24:00,940
an early version ran on so you see even

00:23:57,790 --> 00:24:04,210
at a very early time these UNIX there

00:24:00,940 --> 00:24:06,580
were four lines of UNIX within Bell and

00:24:04,210 --> 00:24:08,530
each of them liked to say close to

00:24:06,580 --> 00:24:12,880
research unix which is this row up at

00:24:08,530 --> 00:24:15,790
the top the green is just different in

00:24:12,880 --> 00:24:19,060
things inside of Bell Labs or the Bell

00:24:15,790 --> 00:24:21,310
System and so already things are getting

00:24:19,060 --> 00:24:22,870
complicated it's not just four or five

00:24:21,310 --> 00:24:27,100
it's four and all these other things

00:24:22,870 --> 00:24:29,230
that are competing in some ways those

00:24:27,100 --> 00:24:31,740
were the first distros if you might say

00:24:29,230 --> 00:24:34,720
if we were talking having a Linux top

00:24:31,740 --> 00:24:38,770
the physician came in June the following

00:24:34,720 --> 00:24:42,190
year and had more universities got it it

00:24:38,770 --> 00:24:44,980
was still a PDP 11 only but the kernel

00:24:42,190 --> 00:24:48,160
was rewritten in C by this time the user

00:24:44,980 --> 00:24:50,170
land was mostly assembler and I can say

00:24:48,160 --> 00:24:53,080
all of these things because we have a

00:24:50,170 --> 00:24:55,230
surviving system that I can go look at

00:24:53,080 --> 00:25:05,020
the sources in assembler that the twos

00:24:55,230 --> 00:25:07,510
group archived and the different groups

00:25:05,020 --> 00:25:11,110
inside of Bell Labs pulled from this as

00:25:07,510 --> 00:25:13,000
well and then we have the sixth edition

00:25:11,110 --> 00:25:14,650
which is the first one to receive

00:25:13,000 --> 00:25:16,810
widespread distribution there are maybe

00:25:14,650 --> 00:25:19,380
a hundred or 200 sites that we're

00:25:16,810 --> 00:25:21,720
running it outside of

00:25:19,380 --> 00:25:23,880
the bail system there were a bunch of

00:25:21,720 --> 00:25:27,060
new system calls a bunch of new hardware

00:25:23,880 --> 00:25:29,420
support we're starting to get something

00:25:27,060 --> 00:25:32,850
that looks kind of a little bit like

00:25:29,420 --> 00:25:35,820
stud IO but not really but that's the

00:25:32,850 --> 00:25:36,960
first system that that was on I mean

00:25:35,820 --> 00:25:38,700
this was the first system you can

00:25:36,960 --> 00:25:44,370
install from tape instead of having to

00:25:38,700 --> 00:25:47,370
have a RKO five discs handed to you and

00:25:44,370 --> 00:25:49,110
say here run this on your system this

00:25:47,370 --> 00:25:51,020
was also the first version of UNIX that

00:25:49,110 --> 00:25:53,640
was ported to nan pdp-11

00:25:51,020 --> 00:25:57,540
systems University of Wollongong in

00:25:53,640 --> 00:26:00,780
Australia ported to the inner data 7:32

00:25:57,540 --> 00:26:03,690
and that's where John Lyons was well he

00:26:00,780 --> 00:26:09,300
was overseeing this port he wrote the

00:26:03,690 --> 00:26:11,310
book on the v6 commentary which for the

00:26:09,300 --> 00:26:13,100
Greybeards here was the holy grail of

00:26:11,310 --> 00:26:16,170
books you wanted to try to get because

00:26:13,100 --> 00:26:17,430
until the mid 2000s the only way you

00:26:16,170 --> 00:26:20,040
could get it was an intergenerational

00:26:17,430 --> 00:26:22,380
photocopy that people surreptitiously

00:26:20,040 --> 00:26:23,430
made and handed to you and don't tell

00:26:22,380 --> 00:26:25,100
you don't tell me where you got this

00:26:23,430 --> 00:26:29,760
I'll get in trouble

00:26:25,100 --> 00:26:33,740
and the first PW the programmer

00:26:29,760 --> 00:26:36,450
workbench release was based on this and

00:26:33,740 --> 00:26:38,820
Rand had the first commercial use

00:26:36,450 --> 00:26:41,730
license they couldn't redistribute but

00:26:38,820 --> 00:26:43,290
they made a number of enhancements to

00:26:41,730 --> 00:26:48,240
Unix because they were able to run it

00:26:43,290 --> 00:26:49,350
internally and I have a very long list

00:26:48,240 --> 00:26:53,630
of things I'm not going to read

00:26:49,350 --> 00:26:56,580
individually but these are the other

00:26:53,630 --> 00:27:00,330
things that were either based directly

00:26:56,580 --> 00:27:02,940
on the v6 sources or were closed of v6

00:27:00,330 --> 00:27:04,530
some of the soviet-era stuff it was

00:27:02,940 --> 00:27:06,420
unclear some sources say oh it was a

00:27:04,530 --> 00:27:09,450
clone that was enhanced and other

00:27:06,420 --> 00:27:12,800
sources say they got out of somehow got

00:27:09,450 --> 00:27:15,060
the sources and then heavily modified it

00:27:12,800 --> 00:27:18,840
different universities start to teach

00:27:15,060 --> 00:27:22,880
using the system you snicks incorporates

00:27:18,840 --> 00:27:24,930
and this awesome

00:27:22,880 --> 00:27:26,550
in Australia a couple of the

00:27:24,930 --> 00:27:28,500
universities got together and produce

00:27:26,550 --> 00:27:30,480
their own v6 distribution

00:27:28,500 --> 00:27:32,790
they added a number of time sharing

00:27:30,480 --> 00:27:34,920
features to it so that they

00:27:32,790 --> 00:27:37,590
run it on the universities with all

00:27:34,920 --> 00:27:39,660
kinds of university students mocking the

00:27:37,590 --> 00:27:42,630
the system's up and there would be

00:27:39,660 --> 00:27:45,390
protections against crashing that unix

00:27:42,630 --> 00:27:46,830
from the research folks didn't have

00:27:45,390 --> 00:27:48,900
because they didn't have so many people

00:27:46,830 --> 00:27:50,490
using the systems and the people using

00:27:48,900 --> 00:27:54,240
it were a little bit more trusted not to

00:27:50,490 --> 00:27:55,950
be disruptive and I have a visual

00:27:54,240 --> 00:28:00,600
diagram of that it's starting to get

00:27:55,950 --> 00:28:04,650
complicated the this is the first

00:28:00,600 --> 00:28:07,760
appearance of VSD the first bsd

00:28:04,650 --> 00:28:10,200
distribution started here based on UNIX

00:28:07,760 --> 00:28:11,640
version six but it wasn't a full

00:28:10,200 --> 00:28:13,920
operating system like it would later

00:28:11,640 --> 00:28:17,910
become it was a Pascal compiler and a

00:28:13,920 --> 00:28:21,930
few other cool programs and all these

00:28:17,910 --> 00:28:23,670
groups that got it and reporting it fed

00:28:21,930 --> 00:28:25,740
back different bug fixes and portability

00:28:23,670 --> 00:28:30,320
fixes into what would become the seventh

00:28:25,740 --> 00:28:35,940
edition and the other thing to note is

00:28:30,320 --> 00:28:39,650
AT&T licensed Wallen Gong UNIX as the

00:28:35,940 --> 00:28:44,910
first commercial redistribution of UNIX

00:28:39,650 --> 00:28:48,090
and iousy incorporated at this time and

00:28:44,910 --> 00:28:51,030
had a port as well that came out shortly

00:28:48,090 --> 00:28:57,180
after they'll become important here in a

00:28:51,030 --> 00:28:59,880
minute between version 7 and the version

00:28:57,180 --> 00:29:04,770
6 and version 7 a new compiler dropped

00:28:59,880 --> 00:29:08,760
and about the same time the whole AT&T

00:29:04,770 --> 00:29:11,520
antitrust thing happened and so all of a

00:29:08,760 --> 00:29:13,050
sudden AT&T couldn't produce support for

00:29:11,520 --> 00:29:17,820
software because of the consent decree

00:29:13,050 --> 00:29:20,010
that they signed and so all these people

00:29:17,820 --> 00:29:22,680
were clamoring for an update to Unix so

00:29:20,010 --> 00:29:24,570
Dennis Ritchie came up with a number of

00:29:22,680 --> 00:29:26,970
patches that he distributed to all these

00:29:24,570 --> 00:29:29,610
internal groups that were doing things

00:29:26,970 --> 00:29:31,200
and happened to accidentally leave it on

00:29:29,610 --> 00:29:33,060
a tape that he sent to the University of

00:29:31,200 --> 00:29:37,800
Delaware and from there week tout

00:29:33,060 --> 00:29:39,030
virally to all the other sites you know

00:29:37,800 --> 00:29:42,480
was one of the first you know first

00:29:39,030 --> 00:29:44,559
viral first viral video if you will even

00:29:42,480 --> 00:29:46,240
though it wasn't a video

00:29:44,559 --> 00:29:51,999
again the other groups inside of AT&T

00:29:46,240 --> 00:29:54,399
are continuing to pull in the support

00:29:51,999 --> 00:29:59,080
some of them pulled this in for interim

00:29:54,399 --> 00:30:00,929
releases that they had in the seventh

00:29:59,080 --> 00:30:04,899
edition came out and it was ported to

00:30:00,929 --> 00:30:07,860
everything um again I not going to read

00:30:04,899 --> 00:30:12,279
the whole list probably the key one is

00:30:07,860 --> 00:30:17,340
another key to is the VAX port which

00:30:12,279 --> 00:30:20,049
would become the basis for BSD and the

00:30:17,340 --> 00:30:24,340
Phoenix port which was the first port to

00:30:20,049 --> 00:30:25,210
the 8086 of Unix that was released there

00:30:24,340 --> 00:30:28,860
were others that were more successful

00:30:25,210 --> 00:30:32,080
more popular but that one was the first

00:30:28,860 --> 00:30:35,470
so a bunch of stuff was added in system

00:30:32,080 --> 00:30:38,230
5 or in some of the edition UNIX and we

00:30:35,470 --> 00:30:40,539
have this massive tree here

00:30:38,230 --> 00:30:45,850
I've extended it a little bit beyond the

00:30:40,539 --> 00:30:50,590
end with stuff that happened system 3

00:30:45,850 --> 00:30:53,529
and system 5 and there's some these two

00:30:50,590 --> 00:30:55,029
boxes might actually be the same it's we

00:30:53,529 --> 00:30:56,649
don't have enough historic artifacts to

00:30:55,029 --> 00:30:58,749
know are they the same or are they just

00:30:56,649 --> 00:31:00,850
very very similar and we have

00:30:58,749 --> 00:31:03,340
conflicting people's memory on what it

00:31:00,850 --> 00:31:06,039
actually was was this really PWB 3.0

00:31:03,340 --> 00:31:09,309
that somebody slapped a system 3 label

00:31:06,039 --> 00:31:13,749
on or was system 3 a few changes on top

00:31:09,309 --> 00:31:15,490
of that we just don't know it's again

00:31:13,749 --> 00:31:18,279
it's a complicated chart the key

00:31:15,490 --> 00:31:22,210
takeaways here though are that long-gone

00:31:18,279 --> 00:31:25,149
unix continued and this is just too

00:31:22,210 --> 00:31:27,909
weird not to mention Wollongong created

00:31:25,149 --> 00:31:30,789
something called unis which was also

00:31:27,909 --> 00:31:33,129
aided by some folks at SSRI which lets

00:31:30,789 --> 00:31:36,429
you run UNIX binaries and applications

00:31:33,129 --> 00:31:39,820
on VMs and that's one of the more

00:31:36,429 --> 00:31:42,100
perverse uses that the UNIX kernel wound

00:31:39,820 --> 00:31:46,210
up in and it also provided the basis

00:31:42,100 --> 00:31:47,379
later for their tcp/ip offering for VMs

00:31:46,210 --> 00:31:53,289
and a bunch of other machines that

00:31:47,379 --> 00:31:55,000
weren't Unix so and the other thing to

00:31:53,289 --> 00:31:58,060
note is that there were a number of

00:31:55,000 --> 00:32:01,090
early ports like Phoenix had

00:31:58,060 --> 00:32:02,680
the 7th edition stuff in it

00:32:01,090 --> 00:32:04,030
and I have this arrow here just to

00:32:02,680 --> 00:32:05,380
simplify the chart this arrow really

00:32:04,030 --> 00:32:10,270
should go down here but then the chart

00:32:05,380 --> 00:32:13,180
looks ugly or but a lot of people ported

00:32:10,270 --> 00:32:15,970
version 7 and then later pulled stuff in

00:32:13,180 --> 00:32:17,800
from system 3 and system 5 as those

00:32:15,970 --> 00:32:21,610
systems became available and the reason

00:32:17,800 --> 00:32:26,260
they did that was for licensing this is

00:32:21,610 --> 00:32:28,810
also the time when the UNIX fans start

00:32:26,260 --> 00:32:31,180
doing crazy things we have the first

00:32:28,810 --> 00:32:32,650
unix license plate this is the live free

00:32:31,180 --> 00:32:36,250
or die in New Hampshire license plate

00:32:32,650 --> 00:32:37,630
which Dec marketing would give out when

00:32:36,250 --> 00:32:39,580
people would ask them I want a UNIX

00:32:37,630 --> 00:32:41,230
license directly from you they would

00:32:39,580 --> 00:32:43,840
give them the slice ins plate instead of

00:32:41,230 --> 00:32:46,900
that an actual AT&T UNIX license because

00:32:43,840 --> 00:32:48,880
they couldn't sell that yet though the

00:32:46,900 --> 00:32:50,200
licensing is kind of screwed up at this

00:32:48,880 --> 00:32:53,110
point but people are having fun with

00:32:50,200 --> 00:32:55,270
this one of the people that helped me

00:32:53,110 --> 00:32:58,540
with this talk has the Massachusetts

00:32:55,270 --> 00:33:00,100
UNIX plate on his Tesla today this is a

00:32:58,540 --> 00:33:02,230
picture he went outside and took for me

00:33:00,100 --> 00:33:04,390
said put this in your talk to show that

00:33:02,230 --> 00:33:10,660
the craziness wasn't confined to version

00:33:04,390 --> 00:33:14,260
7 so we get some fanart this is from dr.

00:33:10,660 --> 00:33:18,130
mcusic's website one of the t-shirts

00:33:14,260 --> 00:33:21,340
that they gave out and the folks at dec

00:33:18,130 --> 00:33:24,250
marketing liked it so much liked it so

00:33:21,340 --> 00:33:26,080
much they made a poster of it which took

00:33:24,250 --> 00:33:27,790
kind of that old thing and piped it all

00:33:26,080 --> 00:33:31,240
over to the new shiny stuff for

00:33:27,790 --> 00:33:34,500
marketing purposes the photo credit on

00:33:31,240 --> 00:33:37,750
this goes to me because I found this in

00:33:34,500 --> 00:33:40,750
I'd moved a lot and I put all my posters

00:33:37,750 --> 00:33:43,030
from college into a tube and I found

00:33:40,750 --> 00:33:45,040
that too in the back behind a seat in my

00:33:43,030 --> 00:33:46,390
pickup truck that I'd moved from place

00:33:45,040 --> 00:33:47,440
to place to place I've had the pickup

00:33:46,390 --> 00:33:49,960
truck for a long time and this was

00:33:47,440 --> 00:33:51,550
inside there and so I'm happy to have

00:33:49,960 --> 00:33:54,730
that because I tried to find an image of

00:33:51,550 --> 00:33:56,290
this online and I couldn't it's like it

00:33:54,730 --> 00:33:58,210
was everywhere when I was in college you

00:33:56,290 --> 00:33:59,980
know everywhere on campus you know they

00:33:58,210 --> 00:34:02,620
must have brought 50 copies of this and

00:33:59,980 --> 00:34:04,870
plastered it all over the different labs

00:34:02,620 --> 00:34:06,790
and stuff and now I can't find it so I

00:34:04,870 --> 00:34:08,560
thought people would get a kick out of

00:34:06,790 --> 00:34:11,200
this and you know you see the deck

00:34:08,560 --> 00:34:12,940
arrogance you know the the original

00:34:11,200 --> 00:34:15,070
UNIX software run on digital computers

00:34:12,940 --> 00:34:17,380
and the best still does now

00:34:15,070 --> 00:34:19,300
that's totally Dec and that was the

00:34:17,380 --> 00:34:23,500
hubris that would lead unfortunately it

00:34:19,300 --> 00:34:24,820
so their downfall years later so I have

00:34:23,500 --> 00:34:27,210
a little game if you've looked at my

00:34:24,820 --> 00:34:30,610
slides and seen the answers don't answer

00:34:27,210 --> 00:34:32,980
but one of these was in version 7 head

00:34:30,610 --> 00:34:37,330
or tail which one do you think was in

00:34:32,980 --> 00:34:40,900
version 7 hands up everybody who thinks

00:34:37,330 --> 00:34:43,330
head ok hands up everybody who thinks

00:34:40,900 --> 00:34:49,240
tail ok

00:34:43,330 --> 00:34:51,250
it was tail the head command was

00:34:49,240 --> 00:34:54,930
invented at Berkeley because evident way

00:34:51,250 --> 00:34:57,790
they didn't know how to do said 10-q

00:34:54,930 --> 00:35:05,170
that was a comment from Rob Pike by the

00:34:57,790 --> 00:35:07,300
way Kirk recognizes it I see so job

00:35:05,170 --> 00:35:09,130
control was job control in version 7

00:35:07,300 --> 00:35:12,460
where all you stated control T and ctrl

00:35:09,130 --> 00:35:14,500
Z to send things into the background no

00:35:12,460 --> 00:35:16,840
you're right it was at Berkeley

00:35:14,500 --> 00:35:19,540
oh no way it wasn't at Berkeley it was

00:35:16,840 --> 00:35:21,730
done in Europe and then redone at MIT by

00:35:19,540 --> 00:35:24,990
Jim Colt and built joint took that work

00:35:21,730 --> 00:35:27,730
and added it into the Berkeley release

00:35:24,990 --> 00:35:30,940
so the last one is in here I could do

00:35:27,730 --> 00:35:33,370
this all day I have 10 minutes left and

00:35:30,940 --> 00:35:34,650
harridan environment variables something

00:35:33,370 --> 00:35:37,960
you take for granted today

00:35:34,650 --> 00:35:38,800
well that was new in version 7 it wasn't

00:35:37,960 --> 00:35:40,240
in version 6

00:35:38,800 --> 00:35:42,610
but the bourne shell was new in version

00:35:40,240 --> 00:35:43,930
7 and they enhanced the kernel to have

00:35:42,610 --> 00:35:47,590
an area that they would copy from

00:35:43,930 --> 00:35:51,430
process to process to manage the

00:35:47,590 --> 00:35:55,210
environment variables or would be copied

00:35:51,430 --> 00:35:57,760
with the exec VP command I haven't

00:35:55,210 --> 00:35:59,320
worked in exact detail I might have it's

00:35:57,760 --> 00:36:01,570
not that might not be exactly correct

00:35:59,320 --> 00:36:02,950
but it's close enough I mean it's one of

00:36:01,570 --> 00:36:06,040
the many cool features of bourne shell

00:36:02,950 --> 00:36:08,110
the other was that the old shell

00:36:06,040 --> 00:36:09,490
standard input was the shell script so

00:36:08,110 --> 00:36:12,250
you couldn't put them in pipelines and

00:36:09,490 --> 00:36:14,350
now with bourne shell you could put them

00:36:12,250 --> 00:36:20,320
in pipeline sink we take absolutely for

00:36:14,350 --> 00:36:22,210
granted were invented in the 70s there

00:36:20,320 --> 00:36:25,500
is a big long list of new features I'm

00:36:22,210 --> 00:36:25,500
running a little short on time

00:36:27,770 --> 00:36:34,580
but the portable C compiler people

00:36:32,900 --> 00:36:36,650
migrated from kids compiled works with a

00:36:34,580 --> 00:36:39,170
portable C compiler at this time to

00:36:36,650 --> 00:36:41,060
support all the ports now UNIX version

00:36:39,170 --> 00:36:43,040
seven was portable to the big long list

00:36:41,060 --> 00:36:45,740
of machines that I talked about but if

00:36:43,040 --> 00:36:48,380
you got the tape from Bell Labs it was

00:36:45,740 --> 00:36:50,570
just the pdp-11 there were some

00:36:48,380 --> 00:36:53,540
networking supports a bunch of new

00:36:50,570 --> 00:36:55,220
system calls on a bunch of stuff to deal

00:36:53,540 --> 00:37:00,800
with discs that might be larger than a

00:36:55,220 --> 00:37:04,970
gigabyte and the terminal interface we

00:37:00,800 --> 00:37:12,680
all loved was in there and some IPC

00:37:04,970 --> 00:37:15,560
methods weren't so I could do an entire

00:37:12,680 --> 00:37:19,760
talk on AT&T licensing and how screwed

00:37:15,560 --> 00:37:21,860
up it was but AT&T licensed it and let

00:37:19,760 --> 00:37:24,110
people redistribute it finally with

00:37:21,860 --> 00:37:27,170
version 7 with a license though it

00:37:24,110 --> 00:37:29,750
wasn't too terrible it was just good

00:37:27,170 --> 00:37:32,360
enough that people started to be able to

00:37:29,750 --> 00:37:35,390
produce a number of UNIX clones I had

00:37:32,360 --> 00:37:38,210
our number of UNIX ports I had a number

00:37:35,390 --> 00:37:41,660
on the full of spaghetti that I put on

00:37:38,210 --> 00:37:44,510
the screen earlier but they were geared

00:37:41,660 --> 00:37:48,800
to huge systems there are $1,000 per CPU

00:37:44,510 --> 00:37:50,990
and this meant that it was very

00:37:48,800 --> 00:37:54,590
expensive for them to come to

00:37:50,990 --> 00:37:55,820
microcomputers pcs because on a big

00:37:54,590 --> 00:37:57,500
system that cost hundred thousand

00:37:55,820 --> 00:38:01,640
dollars what's another thousand bucks on

00:37:57,500 --> 00:38:04,030
a system that's maybe two thousand

00:38:01,640 --> 00:38:06,410
dollars a thousand bucks is a lot so

00:38:04,030 --> 00:38:12,200
they kind of shut themselves in the foot

00:38:06,410 --> 00:38:13,700
on this a little bit and don't worry as

00:38:12,200 --> 00:38:18,340
I mentioned this is I'm about to get

00:38:13,700 --> 00:38:20,870
into Venus which was the first

00:38:18,340 --> 00:38:24,710
commercially available port for the 8086

00:38:20,870 --> 00:38:29,870
and later versions pulled in from the

00:38:24,710 --> 00:38:32,150
different UNIX lines and it was unique

00:38:29,870 --> 00:38:35,360
most of the other

00:38:32,150 --> 00:38:37,340
8086 ports were only for the IBM PC this

00:38:35,360 --> 00:38:39,110
one targeted the dozens of different

00:38:37,340 --> 00:38:42,380
incompatible machines that came out

00:38:39,110 --> 00:38:43,910
about the same time as the IBM PC and it

00:38:42,380 --> 00:38:46,910
was the only game in town for a Dec

00:38:43,910 --> 00:38:48,680
rainbow now what's a Dec rainbow maybe

00:38:46,910 --> 00:38:50,780
three people in this room I'm guessing

00:38:48,680 --> 00:38:54,770
no before this talk but it was a really

00:38:50,780 --> 00:38:57,200
cool machine that had a z80 and an 1886

00:38:54,770 --> 00:38:59,840
in it so it could run all the available

00:38:57,200 --> 00:39:01,550
software at the time and it's largely

00:38:59,840 --> 00:39:04,730
forgotten by history because it wasn't

00:39:01,550 --> 00:39:12,230
IBM compatible and it has keys between

00:39:04,730 --> 00:39:14,600
the control key and the a just crazy but

00:39:12,230 --> 00:39:16,910
it was my first computer and at the time

00:39:14,600 --> 00:39:19,160
I wanted Phoenix because I wanted to run

00:39:16,910 --> 00:39:23,810
it but I couldn't afford the $500 price

00:39:19,160 --> 00:39:25,880
tag and then when I got a job I couldn't

00:39:23,810 --> 00:39:27,320
find it nobody was selling it anymore

00:39:25,880 --> 00:39:32,000
I had the money to buy it but I couldn't

00:39:27,320 --> 00:39:35,000
and so that's where it stood for several

00:39:32,000 --> 00:39:38,810
decades and then a few years ago a copy

00:39:35,000 --> 00:39:40,790
popped up and I wound up imaging it and

00:39:38,810 --> 00:39:44,450
I started wondering I installed it on my

00:39:40,790 --> 00:39:47,000
rainbow and I started wondering how

00:39:44,450 --> 00:39:49,220
close was it to UNIX version 7 could I

00:39:47,000 --> 00:39:51,020
take the version 7 sources that had been

00:39:49,220 --> 00:39:54,110
released compile it with a compiler and

00:39:51,020 --> 00:39:55,460
and get the sources and maybe create a

00:39:54,110 --> 00:39:55,990
distribution or something crazy like

00:39:55,460 --> 00:39:58,100
that

00:39:55,990 --> 00:40:00,650
so I started the v-necks source

00:39:58,100 --> 00:40:01,910
restoration project which I'm running a

00:40:00,650 --> 00:40:04,040
little short on time I won't go through

00:40:01,910 --> 00:40:06,730
all the details the important parts were

00:40:04,040 --> 00:40:11,210
the step rainbow was from the 80s it was

00:40:06,730 --> 00:40:12,770
super slow and also had become very

00:40:11,210 --> 00:40:16,430
flaky so it would take a long time to

00:40:12,770 --> 00:40:19,160
build and this impeded my progress so I

00:40:16,430 --> 00:40:21,020
thought why don't I write a emulator a

00:40:19,160 --> 00:40:24,190
userland emulator so that I could run

00:40:21,020 --> 00:40:29,570
the by the compiler on modern hardware

00:40:24,190 --> 00:40:30,950
through emulation and this gets into

00:40:29,570 --> 00:40:34,130
some of the details I'm running a little

00:40:30,950 --> 00:40:36,050
short on time but you basically had

00:40:34,130 --> 00:40:38,660
old-school a dot out or you've got the

00:40:36,050 --> 00:40:40,880
text and the stack and the data and then

00:40:38,660 --> 00:40:42,620
the BSS section and so the emulator

00:40:40,880 --> 00:40:44,540
would need to look at the different

00:40:42,620 --> 00:40:45,349
types of image see if it's a split IND

00:40:44,540 --> 00:40:48,229
space

00:40:45,349 --> 00:40:51,259
set up the Intel segment registers

00:40:48,229 --> 00:40:53,660
appropriately and there were a number of

00:40:51,259 --> 00:40:55,880
different emulators I picked one it

00:40:53,660 --> 00:40:59,449
probably was the wrong one at the time

00:40:55,880 --> 00:41:01,430
QAM you had significant bugs in the

00:40:59,449 --> 00:41:06,829
16-bit support I might go back to it

00:41:01,430 --> 00:41:07,609
because I want floating-point so putting

00:41:06,829 --> 00:41:09,469
the pieces together

00:41:07,609 --> 00:41:15,640
I had to reverse engineer the system

00:41:09,469 --> 00:41:18,380
calls and then when an int f1

00:41:15,640 --> 00:41:20,089
instruction was executed I would decode

00:41:18,380 --> 00:41:25,039
all the registers and do the system

00:41:20,089 --> 00:41:26,719
calls it's fairly standard stuff and

00:41:25,039 --> 00:41:30,109
again this just walk through the steps

00:41:26,719 --> 00:41:33,499
of loading it in a little short on time

00:41:30,109 --> 00:41:37,670
so I'll not go through it in too much

00:41:33,499 --> 00:41:40,519
detail but the current status about

00:41:37,670 --> 00:41:43,699
three-fourths of the commands work so I

00:41:40,519 --> 00:41:46,099
can do LS and CP and those sorts of

00:41:43,699 --> 00:41:47,989
things anything that requires fork an

00:41:46,099 --> 00:41:49,549
exact doesn't because I got all the way

00:41:47,989 --> 00:41:51,410
implemented fork I'm home in at all

00:41:49,549 --> 00:41:53,299
read/write open all the calls then

00:41:51,410 --> 00:41:55,549
what's a bloom at exec and it's like oh

00:41:53,299 --> 00:41:57,079
this is exactly like the loader part

00:41:55,549 --> 00:41:58,940
that I wrote so I need to refactor and

00:41:57,079 --> 00:42:03,469
then I had to set it aside there so

00:41:58,940 --> 00:42:06,769
that's kind of where it is now and so

00:42:03,469 --> 00:42:09,440
that's I working for a better x86

00:42:06,769 --> 00:42:12,739
emulation because I'd like to support

00:42:09,440 --> 00:42:15,349
floating-point which is why I'm thinking

00:42:12,739 --> 00:42:17,719
the qemu userland stuff has evolved

00:42:15,349 --> 00:42:24,619
enough that I might try to pour my stuff

00:42:17,719 --> 00:42:27,289
over to that and this is some future

00:42:24,619 --> 00:42:29,859
work which if you're interested come see

00:42:27,289 --> 00:42:29,859
me afterwards

00:42:31,600 --> 00:42:37,580
I'd like to some special thanks Clem

00:42:35,690 --> 00:42:41,900
Cole he's the guy that sent me the car

00:42:37,580 --> 00:42:45,620
picture had very strong firm opinions on

00:42:41,900 --> 00:42:48,080
how things happened as did a few other

00:42:45,620 --> 00:42:49,580
people in the twos mailing list and they

00:42:48,080 --> 00:42:50,750
pushed me really hard no it didn't

00:42:49,580 --> 00:42:52,310
happen that way well what about this

00:42:50,750 --> 00:42:55,600
Bell technical Journal that says it did

00:42:52,310 --> 00:42:58,790
oh that's different

00:42:55,600 --> 00:43:00,560
so I was able to test their remembrance

00:42:58,790 --> 00:43:03,350
some were very good and some more less

00:43:00,560 --> 00:43:05,030
good like you'd expect from people

00:43:03,350 --> 00:43:08,360
remembering things that happened thirty

00:43:05,030 --> 00:43:10,580
or forty or fifty years ago and again

00:43:08,360 --> 00:43:12,380
another plug for two's I wouldn't be

00:43:10,580 --> 00:43:17,300
able to have put together this talk

00:43:12,380 --> 00:43:21,290
without it and then I have the slides in

00:43:17,300 --> 00:43:23,710
PDF form up here and this is another

00:43:21,290 --> 00:43:26,870
poster I found in the my pickup truck

00:43:23,710 --> 00:43:29,030
from the time of the UNIX wars when BSD

00:43:26,870 --> 00:43:30,770
and system 5 were fighting and so I

00:43:29,030 --> 00:43:37,700
marked myself safe from the UNIX wars I

00:43:30,770 --> 00:43:42,430
didn't die their questions we have a

00:43:37,700 --> 00:43:42,430
microphone right for questions

00:43:46,830 --> 00:43:53,730
David Kistner our own article two years

00:43:49,710 --> 00:43:56,370
ago it's called see is not a low-level

00:43:53,730 --> 00:43:59,610
language your computer is not a fast

00:43:56,370 --> 00:44:01,950
pdp-11 which kind of overturns

00:43:59,610 --> 00:44:04,050
everything we all I at least believed

00:44:01,950 --> 00:44:06,390
when I learned C first time not many

00:44:04,050 --> 00:44:10,220
years ago do you think it's the time for

00:44:06,390 --> 00:44:12,780
a new C and new completely new thinking

00:44:10,220 --> 00:44:15,330
looking at modern machines I don't know

00:44:12,780 --> 00:44:18,270
there are a number of different problems

00:44:15,330 --> 00:44:20,250
that C solves are effectively even today

00:44:18,270 --> 00:44:23,760
even with the lie that it's a pdp-11

00:44:20,250 --> 00:44:27,150
underneath Brooks will tell us no it's

00:44:23,760 --> 00:44:32,130
not Forex does several related talks

00:44:27,150 --> 00:44:34,140
about that but even so it for some

00:44:32,130 --> 00:44:35,520
problems it's fairly good there are a

00:44:34,140 --> 00:44:37,680
number of other problems that it's

00:44:35,520 --> 00:44:39,090
terrible at garbage collection there's

00:44:37,680 --> 00:44:40,980
no garbage collection memory leaks

00:44:39,090 --> 00:44:44,280
buffer overflows all kinds of security

00:44:40,980 --> 00:44:52,680
nightmare a better language might be

00:44:44,280 --> 00:44:58,350
rust it might be go might be C++ you

00:44:52,680 --> 00:45:00,540
guys stole my next line so sieves had a

00:44:58,350 --> 00:45:02,160
very long run I think they'll still be

00:45:00,540 --> 00:45:04,620
some use for it but I think you'll see

00:45:02,160 --> 00:45:07,470
some more specialization going forward

00:45:04,620 --> 00:45:11,010
particularly as things like LLVM make it

00:45:07,470 --> 00:45:13,800
easy to have additional language front

00:45:11,010 --> 00:45:15,830
ends more cheaply than GCC did or the

00:45:13,800 --> 00:45:19,310
portable c compiler did before that

00:45:15,830 --> 00:45:19,310
other questions

00:45:21,070 --> 00:45:25,240
really okay enjoy the rest of your

00:45:23,990 --> 00:45:29,040
conference thank you very much

00:45:25,240 --> 00:45:29,040
[Applause]

00:45:31,320 --> 00:45:33,380
you

00:45:41,329 --> 00:45:43,390

YouTube URL: https://www.youtube.com/watch?v=FTlzaDgzPY8


