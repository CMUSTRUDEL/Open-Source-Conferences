Title: Lessons Learned from Sendmail
Publication date: 2019-10-27
Playlist: EuroBSDCon 2019, Norway
Description: 
	Eric Allman presents.
Captions: 
	00:00:03,740 --> 00:00:08,100
so today's talk is not Dave talking

00:00:06,270 --> 00:00:11,520
about credential sharing because he had

00:00:08,100 --> 00:00:14,790
an unfortunate medical problem so we all

00:00:11,520 --> 00:00:19,439
wish Davis a speedy recovery instead we

00:00:14,790 --> 00:00:20,759
have a mr. eric allman and he'll be

00:00:19,439 --> 00:00:34,079
talking about lessons learned from

00:00:20,759 --> 00:00:35,940
sendmail okay hi all i'm back at UC

00:00:34,079 --> 00:00:38,330
berkeley and that's about all i have to

00:00:35,940 --> 00:00:42,150
say here but i do have a few disclaimers

00:00:38,330 --> 00:00:44,550
first of all please be kind to me i

00:00:42,150 --> 00:00:47,130
started writing this talk at 6:00 this

00:00:44,550 --> 00:00:48,840
morning and i finished it about well i'm

00:00:47,130 --> 00:00:51,090
not even sure i finished it a couple

00:00:48,840 --> 00:00:53,910
minutes ago

00:00:51,090 --> 00:00:55,560
I also apologize this is a BSD

00:00:53,910 --> 00:00:59,100
conference there's nothing specifically

00:00:55,560 --> 00:01:01,170
BSD ish about this although there were

00:00:59,100 --> 00:01:06,210
some other platforms that sendmail ran

00:01:01,170 --> 00:01:08,700
on and I haven't worked on send mail in

00:01:06,210 --> 00:01:12,270
years you know sometimes it's time to

00:01:08,700 --> 00:01:15,360
move on and I have moved on so a lot of

00:01:12,270 --> 00:01:19,680
this is from memory so just some

00:01:15,360 --> 00:01:21,570
background send send mail or actually

00:01:19,680 --> 00:01:26,610
deliver mail before it originated on

00:01:21,570 --> 00:01:28,500
unix 6th edition on pdp-11 64-bit

00:01:26,610 --> 00:01:30,090
address space I was working on the

00:01:28,500 --> 00:01:34,320
ingress relational database management

00:01:30,090 --> 00:01:36,600
system it was one of the two first

00:01:34,320 --> 00:01:39,510
relational databases ever implemented so

00:01:36,600 --> 00:01:43,350
you know pre Oracle pre SQL pre

00:01:39,510 --> 00:01:46,159
everything but to our blessing and curse

00:01:43,350 --> 00:01:48,510
we got an ARPANET connection and

00:01:46,159 --> 00:01:52,189
everyone in the department wanted access

00:01:48,510 --> 00:01:52,189
to the ARPANET and that was a problem

00:01:52,290 --> 00:01:58,200
so these are the days of network wars

00:01:56,250 --> 00:01:59,790
there was of course the ARPANET there

00:01:58,200 --> 00:02:02,119
was Burke net which was a local network

00:01:59,790 --> 00:02:05,580
at Berkeley

00:02:02,119 --> 00:02:07,350
there was the UCP network which you may

00:02:05,580 --> 00:02:08,849
well have heard of there was CS net

00:02:07,350 --> 00:02:14,370
which you probably haven't heard of

00:02:08,849 --> 00:02:16,460
Purdue net deck net etc etc it was very

00:02:14,370 --> 00:02:21,790
ad hoc and

00:02:16,460 --> 00:02:24,680
highly heterogeneous deliver mail was

00:02:21,790 --> 00:02:27,380
the very first instance of the mail

00:02:24,680 --> 00:02:29,480
routing some people have claimed any

00:02:27,380 --> 00:02:33,530
wherever I'm not sure that that's true

00:02:29,480 --> 00:02:36,400
but I might have a valid claim to have

00:02:33,530 --> 00:02:42,170
invented the concept of Internet mail or

00:02:36,400 --> 00:02:45,380
lowercase I internet mail it was routing

00:02:42,170 --> 00:02:47,720
only there was no header rewriting there

00:02:45,380 --> 00:02:49,640
was no queue because everything I was

00:02:47,720 --> 00:02:52,490
using already had its own queue there

00:02:49,640 --> 00:02:54,830
was no state there was no TSN's delivery

00:02:52,490 --> 00:02:56,660
status notifications these are the

00:02:54,830 --> 00:02:57,650
messages saying oh I sorry I couldn't

00:02:56,660 --> 00:03:00,200
deliver the mail

00:02:57,650 --> 00:03:03,050
so you either got an immediate status or

00:03:00,200 --> 00:03:06,890
none at all and the configuration was

00:03:03,050 --> 00:03:13,130
compiled in etc he was very very basic

00:03:06,890 --> 00:03:15,020
but yeah it was quick to do now I ask

00:03:13,130 --> 00:03:18,500
you now what do you do with an address

00:03:15,020 --> 00:03:23,060
like UCB VAX : research bang deck FAQs

00:03:18,500 --> 00:03:26,750
bang world : : foo at Berkeley this was

00:03:23,060 --> 00:03:29,990
a real address at the time in fact an

00:03:26,750 --> 00:03:32,600
entire book was put out that had nothing

00:03:29,990 --> 00:03:37,250
except if you are here and want to get

00:03:32,600 --> 00:03:42,860
the mail there look to page 386 and will

00:03:37,250 --> 00:03:44,780
tell you how ah I will point out by the

00:03:42,860 --> 00:03:48,740
way this was the origin of the success

00:03:44,780 --> 00:03:50,870
exits dot H file because deliver mail

00:03:48,740 --> 00:03:54,709
wanted to get at least a few bits of

00:03:50,870 --> 00:03:57,140
status and syslog which a lot of people

00:03:54,709 --> 00:04:01,220
don't realize was written as a part of

00:03:57,140 --> 00:04:03,770
the send mail project also a Warner

00:04:01,220 --> 00:04:05,810
yesterday mentioned MPX files have just

00:04:03,770 --> 00:04:07,700
thought I'd point out that at least one

00:04:05,810 --> 00:04:09,830
person outside of Bell Labs used

00:04:07,700 --> 00:04:12,020
MPX files that would be me and it was

00:04:09,830 --> 00:04:13,940
for syslog because there were no

00:04:12,020 --> 00:04:15,260
concepts of named pipes or anything like

00:04:13,940 --> 00:04:18,049
that it was the only way I could get

00:04:15,260 --> 00:04:23,480
multiple programs to flow into one or at

00:04:18,049 --> 00:04:25,669
least that I figured out so 4.2 BSD

00:04:23,480 --> 00:04:29,780
comes along or actually csr g comes

00:04:25,669 --> 00:04:32,270
along and for PS 4.2 bsd came out

00:04:29,780 --> 00:04:34,730
and the Internet Berkeley got a DARPA

00:04:32,270 --> 00:04:38,000
contract to produce the platform for the

00:04:34,730 --> 00:04:40,040
Internet and that led to sockets and all

00:04:38,000 --> 00:04:42,980
the other stuff that you know about but

00:04:40,040 --> 00:04:45,440
one of the things they needed was a mail

00:04:42,980 --> 00:04:51,260
transfer agent that you know get the

00:04:45,440 --> 00:04:53,930
mail from here to there and when Bill

00:04:51,260 --> 00:04:55,970
joy came to me and said you know more

00:04:53,930 --> 00:05:00,650
about email than anyone else here so why

00:04:55,970 --> 00:05:02,330
don't you do this and except he said you

00:05:00,650 --> 00:05:04,100
can't use the name deliver mail it

00:05:02,330 --> 00:05:05,720
doesn't actually deliver any mail and he

00:05:04,100 --> 00:05:07,610
was right about that he didn't like send

00:05:05,720 --> 00:05:10,070
mail either but I got that through and

00:05:07,610 --> 00:05:12,640
so you know I went okay you know need

00:05:10,070 --> 00:05:17,380
some new protocols how hard can this be

00:05:12,640 --> 00:05:20,290
answer is way way harder than I thought

00:05:17,380 --> 00:05:24,040
it required stuff like persistent State

00:05:20,290 --> 00:05:25,250
notably cused but not merely Q's

00:05:24,040 --> 00:05:28,160
long-lived

00:05:25,250 --> 00:05:32,060
daemon header rewriting so you could

00:05:28,160 --> 00:05:36,320
avoid those nasty formats that you saw

00:05:32,060 --> 00:05:41,030
before delivery status notifications etc

00:05:36,320 --> 00:05:44,170
it's an ongoing list mistake number one

00:05:41,030 --> 00:05:46,370
was I tried to maintain the pdp-11

00:05:44,170 --> 00:05:49,280
compatibility because pdp-11 weren't

00:05:46,370 --> 00:05:50,840
going to go away anytime soon and in

00:05:49,280 --> 00:05:53,690
retrospect I probably should have just

00:05:50,840 --> 00:05:55,640
said you know deliver mail will survive

00:05:53,690 --> 00:05:57,380
on PDP 11s they're going to go away

00:05:55,640 --> 00:06:00,590
eventually and whatnot but at that point

00:05:57,380 --> 00:06:02,540
32 bits was like we couldn't even figure

00:06:00,590 --> 00:06:08,690
out what to do with 32 bits of address

00:06:02,540 --> 00:06:11,780
space if you can believe that so it

00:06:08,690 --> 00:06:15,940
seemed like whoa this is way off in the

00:06:11,780 --> 00:06:21,190
future yet the top priority was reliable

00:06:15,940 --> 00:06:25,310
delivery deliver mail did pretty well

00:06:21,190 --> 00:06:28,010
given what it had to work with but some

00:06:25,310 --> 00:06:30,650
of the other programs that it used like

00:06:28,010 --> 00:06:34,520
the ECP agents in the burke net agent

00:06:30,650 --> 00:06:36,350
and so forth and so on weren't always as

00:06:34,520 --> 00:06:39,530
reliable as they might want to be and I

00:06:36,350 --> 00:06:41,690
can assure you hell hath no fury like a

00:06:39,530 --> 00:06:44,630
professor whose grant

00:06:41,690 --> 00:06:49,760
proposal was lost in the mail yes this

00:06:44,630 --> 00:06:51,650
has happened and by the way did I

00:06:49,760 --> 00:06:54,620
mention by the way send mail was not my

00:06:51,650 --> 00:06:56,570
job I was working on the ingress project

00:06:54,620 --> 00:06:58,820
I'm just doing database systems not mail

00:06:56,570 --> 00:07:01,910
systems so this is a nights and weekends

00:06:58,820 --> 00:07:04,910
project part of the effect of this by

00:07:01,910 --> 00:07:07,100
the way was I had to like reuse

00:07:04,910 --> 00:07:08,120
absolutely everything I possibly could

00:07:07,100 --> 00:07:10,310
because there was no way I could

00:07:08,120 --> 00:07:13,420
implement everything in the mail system

00:07:10,310 --> 00:07:16,070
there's a place called M MDF out of or a

00:07:13,420 --> 00:07:20,330
system called M MDF out of Delaware that

00:07:16,070 --> 00:07:22,040
did try to implement everything they

00:07:20,330 --> 00:07:24,620
probably did a cleaner design than send

00:07:22,040 --> 00:07:27,020
mail they got a million dollars to do

00:07:24,620 --> 00:07:29,510
that send mail one with a guy working

00:07:27,020 --> 00:07:33,800
nights and weekends I think there's a

00:07:29,510 --> 00:07:35,420
lesson there so a brief history as I

00:07:33,800 --> 00:07:39,920
said I wrote send mail when I was a

00:07:35,420 --> 00:07:42,740
student and staff at Berkeley that was

00:07:39,920 --> 00:07:44,840
send mail version five I went to a

00:07:42,740 --> 00:07:46,640
startup another database company called

00:07:44,840 --> 00:07:48,740
britain lee and walked away from send

00:07:46,640 --> 00:07:50,870
mail I figured you know it's an

00:07:48,740 --> 00:07:54,650
adolescent now it needs to go learn how

00:07:50,870 --> 00:07:56,540
to grow up in the world that analogy had

00:07:54,650 --> 00:08:01,130
been way more accurate I thought at the

00:07:56,540 --> 00:08:04,190
time send mail splintered every vendor

00:08:01,130 --> 00:08:07,150
had their own version slightly different

00:08:04,190 --> 00:08:12,470
syntaxes slightly different semantics

00:08:07,150 --> 00:08:15,590
and plus there was ID a out of Sweden I

00:08:12,470 --> 00:08:18,470
can't remember exactly where and Paul

00:08:15,590 --> 00:08:21,080
vixie who I saw sitting around here did

00:08:18,470 --> 00:08:28,400
KJ asked King James send mails and

00:08:21,080 --> 00:08:30,050
attempt to unify them all what well Paul

00:08:28,400 --> 00:08:34,070
Paul did some great job there were

00:08:30,050 --> 00:08:35,900
several others I returned to Berkley on

00:08:34,070 --> 00:08:38,260
the mammoth project at this point doing

00:08:35,900 --> 00:08:40,640
infrastructure to support research and

00:08:38,260 --> 00:08:42,650
one of the things was centralizing

00:08:40,640 --> 00:08:44,480
things because at that point every

00:08:42,650 --> 00:08:47,300
research project was running their own

00:08:44,480 --> 00:08:48,590
system their own mail server of their

00:08:47,300 --> 00:08:51,650
own doing their own system

00:08:48,590 --> 00:08:53,440
administration most of it badly so we're

00:08:51,650 --> 00:08:55,750
trying to fix that problem

00:08:53,440 --> 00:08:58,089
and in particular instead of having

00:08:55,750 --> 00:09:00,639
everyone's email go specifically to

00:08:58,089 --> 00:09:03,910
their workstation we wanted them to go

00:09:00,639 --> 00:09:06,279
to a centralized mail server and I had

00:09:03,910 --> 00:09:09,220
to get in to send mail and as when I

00:09:06,279 --> 00:09:10,990
started doing that I quickly found

00:09:09,220 --> 00:09:14,350
myself drawn back in and I started

00:09:10,990 --> 00:09:18,029
merging versions using ideas here and

00:09:14,350 --> 00:09:23,350
there and that ended up being version 8

00:09:18,029 --> 00:09:25,509
I left Berkeley again I had a totally

00:09:23,350 --> 00:09:27,250
disastrous job I went off and I licked

00:09:25,509 --> 00:09:30,699
my wounds for a while and then I

00:09:27,250 --> 00:09:32,740
co-founded send mail Inc and so I can't

00:09:30,699 --> 00:09:35,800
seem to get away from send mail maybe

00:09:32,740 --> 00:09:37,689
this time I left there after 13 years

00:09:35,800 --> 00:09:44,370
and ultimately I've ended up back at

00:09:37,689 --> 00:09:50,009
Berkeley where I am now so about

00:09:44,370 --> 00:09:52,449
standards one of my favorite topics not

00:09:50,009 --> 00:09:57,310
the standards at the time were

00:09:52,449 --> 00:09:59,620
rudimentary at best as in I tried to

00:09:57,310 --> 00:10:02,920
find out how email was sent on the

00:09:59,620 --> 00:10:08,170
ARPANET and it was not written down it

00:10:02,920 --> 00:10:10,089
was all word of mouth or you could look

00:10:08,170 --> 00:10:12,459
at the code which took a while it turns

00:10:10,089 --> 00:10:17,500
out it was part of FTP nobody bothered

00:10:12,459 --> 00:10:19,149
wasn't looking at FTP but what standards

00:10:17,500 --> 00:10:22,389
were there we're still in development

00:10:19,149 --> 00:10:24,819
they were often in fact more often than

00:10:22,389 --> 00:10:27,399
not they were ambiguous in a lot of

00:10:24,819 --> 00:10:29,769
cases I got yelled at for not following

00:10:27,399 --> 00:10:31,930
the standards and it turns out I had

00:10:29,769 --> 00:10:33,850
just misinterpreted them because there

00:10:31,930 --> 00:10:36,699
were multiple ways to interpret the same

00:10:33,850 --> 00:10:38,800
standard and the standards were

00:10:36,699 --> 00:10:42,000
undergoing a lot of revision for the

00:10:38,800 --> 00:10:48,130
Internet in many cases they changed

00:10:42,000 --> 00:10:50,920
literally overnight and so one of my

00:10:48,130 --> 00:10:53,110
successes I think was rewriting rules at

00:10:50,920 --> 00:10:56,199
least as a concept which people have

00:10:53,110 --> 00:10:57,879
said oh you know that's absurd but when

00:10:56,199 --> 00:10:59,680
these changes in standards came out I

00:10:57,879 --> 00:11:02,500
could usually have them implemented by

00:10:59,680 --> 00:11:05,709
the next morning so I would literally go

00:11:02,500 --> 00:11:06,670
home do the latest round of revisions

00:11:05,709 --> 00:11:13,050
and

00:11:06,670 --> 00:11:18,550
out that night it one of my philosophies

00:11:13,050 --> 00:11:20,020
has been still is sort of mostly that

00:11:18,550 --> 00:11:22,450
sometimes is easier to solve a general

00:11:20,020 --> 00:11:25,830
problem than a specific problem and this

00:11:22,450 --> 00:11:30,220
was an example of that

00:11:25,830 --> 00:11:35,740
the syntax on the other hand I probably

00:11:30,220 --> 00:11:38,860
could have done a better job you know I

00:11:35,740 --> 00:11:42,240
was fine when config files were you know

00:11:38,860 --> 00:11:45,460
a dozen or so lines long and whatnot but

00:11:42,240 --> 00:11:50,220
when they got to you know tens hundreds

00:11:45,460 --> 00:11:53,320
of lines I'll talk more about this later

00:11:50,220 --> 00:11:55,270
by the way the the thing of this though

00:11:53,320 --> 00:11:57,070
surely the standard stabilized the

00:11:55,270 --> 00:12:00,430
internet was up and running and so forth

00:11:57,070 --> 00:12:03,310
now a few years later the drums working

00:12:00,430 --> 00:12:06,220
group came along to revise all of it and

00:12:03,310 --> 00:12:10,710
I went back to my thing of you know

00:12:06,220 --> 00:12:16,270
doing stuff nightly and so forth so

00:12:10,710 --> 00:12:19,350
standards change they're mutable and I

00:12:16,270 --> 00:12:22,270
will say the IETF process around

00:12:19,350 --> 00:12:25,870
messaging standards in particular leaves

00:12:22,270 --> 00:12:28,480
a little something to be desired

00:12:25,870 --> 00:12:30,580
I stopped going to the IETF after I

00:12:28,480 --> 00:12:33,000
walked out of a meeting one time and

00:12:30,580 --> 00:12:36,930
discovered I had a knife in my back and

00:12:33,000 --> 00:12:41,920
that was the last meeting I ever went to

00:12:36,930 --> 00:12:44,190
so rewriting rules well some mistakes

00:12:41,920 --> 00:12:44,190
were made

00:12:45,720 --> 00:12:58,860
tabs get so much about tabs so I

00:12:53,320 --> 00:12:58,860
stole the idea from make Stu Feldman

00:13:00,100 --> 00:13:04,819
you know I said well if it's good enough

00:13:02,689 --> 00:13:08,139
for make and you know Stu's obviously

00:13:04,819 --> 00:13:10,639
smarter than I am and so forth and so on

00:13:08,139 --> 00:13:12,439
then surely it's good enough for send

00:13:10,639 --> 00:13:15,889
mail he said it was the biggest mistake

00:13:12,439 --> 00:13:21,019
he made in make even worse than dollar

00:13:15,889 --> 00:13:23,809
less than dollar at the the totally non

00:13:21,019 --> 00:13:26,149
mnemonic things Stu explained to me that

00:13:23,809 --> 00:13:29,029
he there were some things that make

00:13:26,149 --> 00:13:30,499
wouldn't do and he went in one night he

00:13:29,029 --> 00:13:32,449
was one of these people who came in at

00:13:30,499 --> 00:13:33,949
you know six o'clock and worked all

00:13:32,449 --> 00:13:35,779
through the night and then went home at

00:13:33,949 --> 00:13:38,420
you know 4:00 in the morning kind of

00:13:35,779 --> 00:13:39,829
thing and he did this and he threw this

00:13:38,420 --> 00:13:41,569
stuff in and he didn't have time to

00:13:39,829 --> 00:13:45,920
think about something rational so he

00:13:41,569 --> 00:13:47,660
just put it in and picked random

00:13:45,920 --> 00:13:51,559
characters I'll go back and he'll fix it

00:13:47,660 --> 00:13:54,470
tomorrow and by the time he got back ken

00:13:51,559 --> 00:13:58,069
had done a distribution of eunuchs which

00:13:54,470 --> 00:14:01,069
as you heard from Warner was a casual

00:13:58,069 --> 00:14:09,619
thing at best and so Stu said oh it's

00:14:01,069 --> 00:14:16,459
too late to change it no sorry I could

00:14:09,619 --> 00:14:23,299
ask Stu he might remember so lesson here

00:14:16,459 --> 00:14:26,449
don't blindly follow the pack it was a

00:14:23,299 --> 00:14:28,339
pretty obscure syntax once again it was

00:14:26,449 --> 00:14:30,619
okay when they were small but it got

00:14:28,339 --> 00:14:33,290
more obscure with time I mean what are

00:14:30,619 --> 00:14:35,600
you going to do with that I mean I can

00:14:33,290 --> 00:14:40,100
tell you what that does now imagine a

00:14:35,600 --> 00:14:42,319
hundred lines of that and you know I

00:14:40,100 --> 00:14:48,230
look at config files now and I go

00:14:42,319 --> 00:14:51,049
cross-eyed one of the things was part of

00:14:48,230 --> 00:14:53,209
it that was the 16-bit legacy didn't

00:14:51,049 --> 00:14:58,040
have a lot of extra memory for parsing

00:14:53,209 --> 00:15:00,319
and things and partially just laziness

00:14:58,040 --> 00:15:04,669
simplicity so everything was single

00:15:00,319 --> 00:15:07,309
letter macro names Option names so forth

00:15:04,669 --> 00:15:09,350
that ultimately did get fixed but it was

00:15:07,309 --> 00:15:11,919
a painful process and it could have been

00:15:09,350 --> 00:15:11,919
avoided

00:15:12,300 --> 00:15:19,740
at one point I actually literally looked

00:15:14,610 --> 00:15:21,600
at the config file real I think I

00:15:19,740 --> 00:15:23,400
actually printed it out on paper which

00:15:21,600 --> 00:15:27,720
was the first time I'd seen more than 24

00:15:23,400 --> 00:15:31,410
lines of it at any one time and was

00:15:27,720 --> 00:15:34,140
fairly horrified but it was running on a

00:15:31,410 --> 00:15:35,640
whole bunch of machines on campus some

00:15:34,140 --> 00:15:37,830
of which were in the computer center and

00:15:35,640 --> 00:15:39,960
getting them to do anything was a pain

00:15:37,830 --> 00:15:45,990
and so I just said fine I'm stuck with

00:15:39,960 --> 00:15:47,940
it I could have done better you know

00:15:45,990 --> 00:15:59,400
support would be so much easier without

00:15:47,940 --> 00:16:02,460
the users one of my mistakes was letting

00:15:59,400 --> 00:16:07,080
my installed base crippled name compare

00:16:02,460 --> 00:16:10,200
this to for example the C language I

00:16:07,080 --> 00:16:12,270
first started using C right around

00:16:10,200 --> 00:16:14,910
during the transition from version 4 to

00:16:12,270 --> 00:16:19,020
version 5 so I used version 4 a little

00:16:14,910 --> 00:16:21,240
teeny bit didn't get to when I got to

00:16:19,020 --> 00:16:22,890
angrist I started using version 5 but

00:16:21,240 --> 00:16:26,190
the language changed between those two

00:16:22,890 --> 00:16:28,290
versions because Dennis you know looked

00:16:26,190 --> 00:16:31,440
at it and said you know we can do this

00:16:28,290 --> 00:16:34,050
better and then I remember very

00:16:31,440 --> 00:16:35,640
distinctly the version 5 diversion 6

00:16:34,050 --> 00:16:36,960
transition for ingress where we

00:16:35,640 --> 00:16:39,450
basically had to go through the entire

00:16:36,960 --> 00:16:43,200
code base which was fairly significant

00:16:39,450 --> 00:16:45,150
at that point and moved to a subtly new

00:16:43,200 --> 00:16:46,020
language and then guess what we got to

00:16:45,150 --> 00:16:50,310
do it again

00:16:46,020 --> 00:16:53,310
when version 7 came out and you know at

00:16:50,310 --> 00:16:55,800
the time I was like is this really

00:16:53,310 --> 00:16:57,570
necessary and so forth but I think part

00:16:55,800 --> 00:16:59,730
of the reason C is such a beautifully

00:16:57,570 --> 00:17:02,610
clean language is precisely because

00:16:59,730 --> 00:17:08,220
Dennis came along and said no that's

00:17:02,610 --> 00:17:13,140
wrong I'm going to fix it and people get

00:17:08,220 --> 00:17:16,900
used to it you know I was concerned

00:17:13,140 --> 00:17:20,439
about a dozen sites even a hundred site

00:17:16,900 --> 00:17:22,179
pick tens of millions of sites I had no

00:17:20,439 --> 00:17:27,669
idea it was going to be anything like

00:17:22,179 --> 00:17:29,200
that and I probably should have should

00:17:27,669 --> 00:17:34,210
have shot a little higher than I

00:17:29,200 --> 00:17:36,070
actually did I should have been willing

00:17:34,210 --> 00:17:39,250
to change more things one of my great

00:17:36,070 --> 00:17:42,429
regrets is that in the view that I

00:17:39,250 --> 00:17:44,679
didn't want to screw up existing users I

00:17:42,429 --> 00:17:46,870
would not change defaults in the

00:17:44,679 --> 00:17:48,400
configuration file because then it might

00:17:46,870 --> 00:17:49,600
change the be you know they get a new

00:17:48,400 --> 00:17:52,929
release and it would start to behave

00:17:49,600 --> 00:17:54,970
differently and I didn't want that the

00:17:52,929 --> 00:17:56,950
effect was that anyone installing

00:17:54,970 --> 00:17:59,020
something new in order to get reasonable

00:17:56,950 --> 00:18:00,700
defaults had to go in and manually put

00:17:59,020 --> 00:18:02,919
in all this stuff in the configuration

00:18:00,700 --> 00:18:05,799
file and looking back on I can only kick

00:18:02,919 --> 00:18:08,409
myself it was an incredibly stupid idea

00:18:05,799 --> 00:18:10,990
I did it with the best of intentions but

00:18:08,409 --> 00:18:14,049
it was wrong and I should have just

00:18:10,990 --> 00:18:18,279
taken you know the Dennises approach and

00:18:14,049 --> 00:18:23,799
said they'll get used to it do the right

00:18:18,279 --> 00:18:26,740
thing but I do want to warn you you know

00:18:23,799 --> 00:18:29,770
be careful of blindly following you know

00:18:26,740 --> 00:18:31,899
new trends legacy really does matter you

00:18:29,770 --> 00:18:37,740
don't want it like arbitrarily leave

00:18:31,899 --> 00:18:40,330
your users out hanging in the wind and

00:18:37,740 --> 00:18:43,919
you know those shiny things they look so

00:18:40,330 --> 00:18:47,200
shiny right now but they corrode and the

00:18:43,919 --> 00:18:54,039
shiny bits start to flake off and you

00:18:47,200 --> 00:18:55,960
know so forth oh oh squirrel starting a

00:18:54,039 --> 00:18:57,190
company this isn't really relevant to

00:18:55,960 --> 00:19:00,220
the whole thing but I thought I'd throw

00:18:57,190 --> 00:19:05,559
it in I started send mail in an attempt

00:19:00,220 --> 00:19:07,720
to get back to coding because I was

00:19:05,559 --> 00:19:10,149
spending all of my time basically doing

00:19:07,720 --> 00:19:13,210
support most of which was reading email

00:19:10,149 --> 00:19:16,899
saying look at the fact question number

00:19:13,210 --> 00:19:18,909
you know 17 da-da-dah and that was

00:19:16,899 --> 00:19:21,580
taking literally all of the time I had

00:19:18,909 --> 00:19:24,429
force in mail and I wanted to move send

00:19:21,580 --> 00:19:27,429
mail forward so I thought I had a

00:19:24,429 --> 00:19:29,350
company you know I can hire some support

00:19:27,429 --> 00:19:30,669
people they can deal with all of this

00:19:29,350 --> 00:19:36,340
stuff and I'll get to go to

00:19:30,669 --> 00:19:39,279
the fun stuff I am glad I did that I

00:19:36,340 --> 00:19:41,759
learned a lot sendmail was one of the

00:19:39,279 --> 00:19:47,019
very first sort of hybrid open

00:19:41,759 --> 00:19:49,210
proprietary source companies it was

00:19:47,019 --> 00:19:53,080
totally new ground we made some mistakes

00:19:49,210 --> 00:19:54,970
but a lot of what we did is still the

00:19:53,080 --> 00:19:58,210
basis for the way these companies work

00:19:54,970 --> 00:20:01,779
today were the ones with the arrows in

00:19:58,210 --> 00:20:04,859
our back you know it was quite a roller

00:20:01,779 --> 00:20:09,489
coaster ride very exciting at some times

00:20:04,859 --> 00:20:12,389
very sad at other times we I got to ride

00:20:09,489 --> 00:20:16,989
the heady part of the internet bubble

00:20:12,389 --> 00:20:20,470
rising up we went from two people to 200

00:20:16,989 --> 00:20:24,309
people in about two years something like

00:20:20,470 --> 00:20:26,230
that three years maybe but on the other

00:20:24,309 --> 00:20:28,059
hand we also got to ride the other end

00:20:26,230 --> 00:20:30,749
of the bubble down and that was no

00:20:28,059 --> 00:20:34,389
Sutton we went from 200 people to 80

00:20:30,749 --> 00:20:37,029
even more quickly than we went up but we

00:20:34,389 --> 00:20:40,239
did survive and which made us better

00:20:37,029 --> 00:20:42,600
than a lot of the folks out there yeah

00:20:40,239 --> 00:20:46,059
sorry we had offices all over the US and

00:20:42,600 --> 00:20:49,179
you know the UK I got a lot of frequent

00:20:46,059 --> 00:20:49,690
flyer miles back then frequent flyer

00:20:49,179 --> 00:20:51,399
miles

00:20:49,690 --> 00:20:54,669
you may notice you don't get a lot of

00:20:51,399 --> 00:20:57,580
coding done on airplanes I was a

00:20:54,669 --> 00:20:59,769
complete failure on my goal I never did

00:20:57,580 --> 00:21:02,350
really get back to coding I didn't

00:20:59,769 --> 00:21:04,450
realize that my role was going to be you

00:21:02,350 --> 00:21:07,149
know the trained monkey being taken into

00:21:04,450 --> 00:21:09,309
customer sites you know you're so

00:21:07,149 --> 00:21:12,820
special we've got eric allman himself

00:21:09,309 --> 00:21:15,080
for you to visit with

00:21:12,820 --> 00:21:17,650
I'm sitting there trying to remember not

00:21:15,080 --> 00:21:17,650
to pick my nose

00:21:17,890 --> 00:21:22,460
so I basically didn't do any coding for

00:21:20,720 --> 00:21:25,580
a decade it was hard to get back to it I

00:21:22,460 --> 00:21:28,880
have to admit the other thing is it

00:21:25,580 --> 00:21:31,010
really tied my hands regarding technical

00:21:28,880 --> 00:21:34,010
decisions at times companies talk a lot

00:21:31,010 --> 00:21:35,720
about innovation but at the same time

00:21:34,010 --> 00:21:38,270
companies are very risk-averse

00:21:35,720 --> 00:21:42,890
and getting the balance between those

00:21:38,270 --> 00:21:44,270
things is really really hard and there

00:21:42,890 --> 00:21:46,160
were definitely some things I wanted to

00:21:44,270 --> 00:21:52,010
do with sendmail and I was told that did

00:21:46,160 --> 00:21:54,530
not fit into the product schedule I do

00:21:52,010 --> 00:21:56,180
have an entire talk it's a little old

00:21:54,530 --> 00:21:58,190
right now I'd have to update it but you

00:21:56,180 --> 00:22:00,730
know I think it's called so you want to

00:21:58,190 --> 00:22:00,730
start a company

00:22:01,120 --> 00:22:12,400
so some random other observations how am

00:22:04,760 --> 00:22:15,380
i doing on time Oh tons of time okay

00:22:12,400 --> 00:22:20,690
some other random observations this is

00:22:15,380 --> 00:22:24,740
about code both good and bad people have

00:22:20,690 --> 00:22:27,140
said why did he use em for well you know

00:22:24,740 --> 00:22:31,460
answer number one is because it was

00:22:27,140 --> 00:22:33,290
there and actually people m4 has a bad

00:22:31,460 --> 00:22:35,030
rep but it's actually a really pretty

00:22:33,290 --> 00:22:38,120
cool language you can do an awful lot

00:22:35,030 --> 00:22:41,960
with it it's a little confusing at times

00:22:38,120 --> 00:22:44,600
I admit but the first attempt to do it

00:22:41,960 --> 00:22:47,300
was essentially a procedural thing just

00:22:44,600 --> 00:22:49,550
okay take this snippet of code and plug

00:22:47,300 --> 00:22:53,450
it in here and so forth so it's just a

00:22:49,550 --> 00:22:55,850
very simple macro language that failed

00:22:53,450 --> 00:22:59,720
miserably because ultimately it was just

00:22:55,850 --> 00:23:03,050
syntactic sugar then I made a second

00:22:59,720 --> 00:23:05,390
attempt with a more declarative style I

00:23:03,050 --> 00:23:07,220
want this feature in add whatever bits

00:23:05,390 --> 00:23:13,910
of code you need in order to make that

00:23:07,220 --> 00:23:19,160
feature work that was mixed success I

00:23:13,910 --> 00:23:21,110
think I would say most it was certainly

00:23:19,160 --> 00:23:23,680
better than what we had before and it

00:23:21,110 --> 00:23:27,160
was better than raw config files

00:23:23,680 --> 00:23:33,640
and beyond that I really have never

00:23:27,160 --> 00:23:36,760
quite decided on my own I was a little

00:23:33,640 --> 00:23:41,980
OCD back then I'm actually still a

00:23:36,760 --> 00:23:46,000
little OCD and I spent way too much time

00:23:41,980 --> 00:23:50,860
trying to tweak the m4 so the output of

00:23:46,000 --> 00:23:54,550
m4 was pretty and I should have realized

00:23:50,860 --> 00:23:57,910
that now if the m4 was successful the

00:23:54,550 --> 00:24:03,790
output was assembly language maybe even

00:23:57,910 --> 00:24:07,180
behind Harry code and it was not worth

00:24:03,790 --> 00:24:10,960
it and I literally I can't imagine how

00:24:07,180 --> 00:24:15,160
much time I wasted doing that it's I'm

00:24:10,960 --> 00:24:16,990
sorry putting out all the functionality

00:24:15,160 --> 00:24:18,460
into one binary there was a time when

00:24:16,990 --> 00:24:19,660
that was really convenient because I

00:24:18,460 --> 00:24:21,670
didn't have to worry about breaking

00:24:19,660 --> 00:24:22,360
stuff out in the libraries and so forth

00:24:21,670 --> 00:24:27,850
there would have been a lot of

00:24:22,360 --> 00:24:28,300
replication but no that was that was a

00:24:27,850 --> 00:24:30,400
mistake

00:24:28,300 --> 00:24:36,880
I got some stuff out of it but not that

00:24:30,400 --> 00:24:40,420
much I did pretty extensive wrapping you

00:24:36,880 --> 00:24:42,850
know between ingress and sendmail I

00:24:40,420 --> 00:24:48,040
learned a lot about portability more in

00:24:42,850 --> 00:24:52,570
San Melvin and ingress and to this day I

00:24:48,040 --> 00:24:55,270
still write portable code for everything

00:24:52,570 --> 00:24:57,220
even stuff that I never anticipate to

00:24:55,270 --> 00:25:01,570
run on more than you know a Raspberry Pi

00:24:57,220 --> 00:25:05,050
in my basement but one of the things I

00:25:01,570 --> 00:25:08,440
did was I wrapped a lot of things inside

00:25:05,050 --> 00:25:11,500
other code so that I could come back and

00:25:08,440 --> 00:25:12,880
tweak the code later the project I'm

00:25:11,500 --> 00:25:16,810
working on right now at Berkeley for

00:25:12,880 --> 00:25:22,090
example I've got a library that among

00:25:16,810 --> 00:25:24,250
other things all of the threading

00:25:22,090 --> 00:25:27,190
primitives you know mutexes and so forth

00:25:24,250 --> 00:25:29,170
are I don't use P threads directly I

00:25:27,190 --> 00:25:31,060
call a routine which calls P threads

00:25:29,170 --> 00:25:34,030
that has allowed me to do things like

00:25:31,060 --> 00:25:36,160
add debugging in when I really needed it

00:25:34,030 --> 00:25:37,750
which you can't get out of P threads and

00:25:36,160 --> 00:25:39,880
so forth so I tend to

00:25:37,750 --> 00:25:44,710
put a layer around just about everything

00:25:39,880 --> 00:25:47,730
I use in the standard library you know

00:25:44,710 --> 00:25:54,970
that that does make my code very

00:25:47,730 --> 00:25:57,040
idiomatic but so be it one of the things

00:25:54,970 --> 00:25:58,600
that sendmail does I don't know how many

00:25:57,040 --> 00:26:02,430
of you have actually looked at the code

00:25:58,600 --> 00:26:05,710
but internally it uses fork without exec

00:26:02,430 --> 00:26:09,310
to do memory management so it was

00:26:05,710 --> 00:26:10,450
basically poor-man's threads not quite

00:26:09,310 --> 00:26:15,370
threads because you're running in a

00:26:10,450 --> 00:26:17,430
separate address space you know together

00:26:15,370 --> 00:26:20,050
with a memory management thing we had a

00:26:17,430 --> 00:26:24,460
great way of backing out the stack it

00:26:20,050 --> 00:26:28,450
was called exit and you know that

00:26:24,460 --> 00:26:30,040
actually worked pretty well fork exact I

00:26:28,450 --> 00:26:32,770
mean the obvious thing to do it is you

00:26:30,040 --> 00:26:34,540
invoke a new something or other and so

00:26:32,770 --> 00:26:36,280
forth but then I would had had to reread

00:26:34,540 --> 00:26:38,740
the configuration file I would have had

00:26:36,280 --> 00:26:40,630
to reread all the state and so forth I

00:26:38,740 --> 00:26:42,940
would say on the whole even though that

00:26:40,630 --> 00:26:45,460
was very weird and did create some

00:26:42,940 --> 00:26:48,760
problems at times particularly when

00:26:45,460 --> 00:26:51,760
other people other operating systems

00:26:48,760 --> 00:26:54,150
that called themselves eunuchs decided

00:26:51,760 --> 00:26:56,590
to change the semantics of fork and that

00:26:54,150 --> 00:26:58,270
got me into trouble a few times but I

00:26:56,590 --> 00:27:03,460
thought of that as their problem not

00:26:58,270 --> 00:27:05,790
mine so mostly I think that was a good

00:27:03,460 --> 00:27:05,790
idea

00:27:07,620 --> 00:27:15,580
moving to the design space I as I

00:27:13,720 --> 00:27:17,740
mentioned before I leveraged everything

00:27:15,580 --> 00:27:23,680
I possibly could there was no way that I

00:27:17,740 --> 00:27:26,440
could reimplemented that one thing I

00:27:23,680 --> 00:27:32,860
didn't mention earlier but in the early

00:27:26,440 --> 00:27:36,270
days particularly in version six people

00:27:32,860 --> 00:27:39,070
had a way of customizing their sites and

00:27:36,270 --> 00:27:41,680
customizing their sites included such

00:27:39,070 --> 00:27:47,079
things as changing the format of etc

00:27:41,680 --> 00:27:49,449
password and so

00:27:47,079 --> 00:27:52,479
if when you and remember this was before

00:27:49,449 --> 00:27:54,339
get pw name so you had no wraparound it

00:27:52,479 --> 00:27:58,779
the way you read the password file was

00:27:54,339 --> 00:28:02,739
you said open etc password read and you

00:27:58,779 --> 00:28:05,379
parsed from there by leveraging

00:28:02,739 --> 00:28:07,709
everything if some site went in and said

00:28:05,379 --> 00:28:09,879
ok I'm going to change etc password

00:28:07,709 --> 00:28:12,729
anything that had to actually read the

00:28:09,879 --> 00:28:15,039
password file was localized into bin

00:28:12,729 --> 00:28:18,909
mail and I didn't have to worry about

00:28:15,039 --> 00:28:23,559
that and I can't tell you how much pain

00:28:18,909 --> 00:28:25,419
that saved me with ingress we actually

00:28:23,559 --> 00:28:29,619
did get into this thing which is why I

00:28:25,419 --> 00:28:33,699
didn't do it in send mail steal from the

00:28:29,619 --> 00:28:36,940
best you know there's no shame in using

00:28:33,699 --> 00:28:43,959
other people's ideas the work that was

00:28:36,940 --> 00:28:45,549
done in ID a and KJ s were was you know

00:28:43,959 --> 00:28:47,579
instrumental son offs

00:28:45,549 --> 00:28:52,779
believe it or not did some good stuff

00:28:47,579 --> 00:28:55,959
although I did tend to take any ideas

00:28:52,779 --> 00:28:59,159
and generalize them so I da had the

00:28:55,959 --> 00:29:03,190
concept of database maps using the DB

00:28:59,159 --> 00:29:05,769
sorry DBM software I turned that into a

00:29:03,190 --> 00:29:08,139
generic mapping thing where you could

00:29:05,769 --> 00:29:12,819
define new types and used that for a

00:29:08,139 --> 00:29:18,009
whole bunch of things yeah okay that's

00:29:12,819 --> 00:29:21,449
the same thing you know encourage

00:29:18,009 --> 00:29:23,879
outside innovation whenever possible I

00:29:21,449 --> 00:29:28,749
did not do this as well as I should have

00:29:23,879 --> 00:29:30,489
we did at sendmail Inc we added the Milt

00:29:28,749 --> 00:29:34,479
er interface which is a way for people

00:29:30,489 --> 00:29:39,190
to do mail filtering outside the actual

00:29:34,479 --> 00:29:40,989
MTA which created a lot of innovation

00:29:39,190 --> 00:29:44,529
right there and I mentioned earlier that

00:29:40,989 --> 00:29:46,629
the priority number one on mail was

00:29:44,529 --> 00:29:49,989
reliable delivery and that's where it

00:29:46,629 --> 00:29:53,019
started and by the time I left send mail

00:29:49,989 --> 00:29:55,930
the priority was throwing away as much

00:29:53,019 --> 00:30:00,220
email as absolutely possible

00:29:55,930 --> 00:30:04,600
and frankly I find that kind of

00:30:00,220 --> 00:30:06,550
discouraging but there it is and by the

00:30:04,600 --> 00:30:08,800
way I don't hate threading even if I

00:30:06,550 --> 00:30:11,440
didn't use it in send mailed the mill

00:30:08,800 --> 00:30:13,810
ters could be threaded if they wanted to

00:30:11,440 --> 00:30:18,850
be they could you know run event-driven

00:30:13,810 --> 00:30:22,120
or threaded don't let yourself get too

00:30:18,850 --> 00:30:24,520
caught in the past you know I definitely

00:30:22,120 --> 00:30:26,050
failed on that in a few places there

00:30:24,520 --> 00:30:29,080
were times when I should have gone in

00:30:26,050 --> 00:30:32,230
and said you know this really sucks

00:30:29,080 --> 00:30:35,050
I should just reimplemented and part of

00:30:32,230 --> 00:30:37,330
it was I didn't have enough time but I

00:30:35,050 --> 00:30:39,070
probably wasted more time maintaining

00:30:37,330 --> 00:30:42,400
the old stuff than I would have spent if

00:30:39,070 --> 00:30:43,930
I had just gone back and done it over of

00:30:42,400 --> 00:30:47,410
course those are value judgments you

00:30:43,930 --> 00:30:52,240
never know in advance and that's what

00:30:47,410 --> 00:30:53,680
I've got any questions oh and I think

00:30:52,240 --> 00:30:56,290
I'm supposed to ask you to use the mic

00:30:53,680 --> 00:31:04,860
and I see Paul is going to come up and

00:30:56,290 --> 00:31:07,870
harass me they're applauding you Paul

00:31:04,860 --> 00:31:11,140
close to the mic okay

00:31:07,870 --> 00:31:14,920
that was great I knew most of that from

00:31:11,140 --> 00:31:17,020
living it with you but there are two

00:31:14,920 --> 00:31:27,400
things I'd love to hear your perspective

00:31:17,020 --> 00:31:31,570
on frozen config files and I'll sit down

00:31:27,400 --> 00:31:35,590
for this but I want to say we just

00:31:31,570 --> 00:31:38,590
edited the binary output of m4 and

00:31:35,590 --> 00:31:40,240
stopped using it immediately and by we I

00:31:38,590 --> 00:31:43,720
mean most of the people who used

00:31:40,240 --> 00:31:46,570
sendmail we're not able to change the m4

00:31:43,720 --> 00:31:48,120
source stuff to do what we wanted so we

00:31:46,570 --> 00:31:51,850
ended up hacking the config and then

00:31:48,120 --> 00:31:55,390
deleting the m4 now I now realize that

00:31:51,850 --> 00:31:57,490
if you had used P open called m4 in real

00:31:55,390 --> 00:31:59,410
time when reading the config file so

00:31:57,490 --> 00:32:03,210
there we could not see the binary code

00:31:59,410 --> 00:32:03,210
we would have had to do what you wanted

00:32:04,110 --> 00:32:15,580
bastard you waited all this time to tell

00:32:08,110 --> 00:32:18,220
me this okay

00:32:15,580 --> 00:32:22,870
um enough of that one frozen config

00:32:18,220 --> 00:32:29,139
files that was a technique that was used

00:32:22,870 --> 00:32:31,509
by some places so frozen config files I

00:32:29,139 --> 00:32:35,139
should explain

00:32:31,509 --> 00:32:37,210
since it was fairly difficult to read in

00:32:35,139 --> 00:32:39,070
the configuration files and parse all of

00:32:37,210 --> 00:32:41,620
them and build the internal memory

00:32:39,070 --> 00:32:43,690
structure and you wanted to start up to

00:32:41,620 --> 00:32:44,980
be as fast as possible when running in

00:32:43,690 --> 00:32:47,409
kind of interactive mode because you

00:32:44,980 --> 00:32:51,250
could just pipe things to send mail and

00:32:47,409 --> 00:32:55,990
it would deliver it off into you know

00:32:51,250 --> 00:32:58,480
wherever so a couple of programs back

00:32:55,990 --> 00:33:00,279
then used this idea of you reading your

00:32:58,480 --> 00:33:03,610
configuration file and then you write

00:33:00,279 --> 00:33:05,950
out data space to another file called

00:33:03,610 --> 00:33:08,169
the frozen configuration and when you

00:33:05,950 --> 00:33:10,289
start up you just read data space over

00:33:08,169 --> 00:33:12,700
on top so you've got all the same

00:33:10,289 --> 00:33:16,570
information of course if the binary

00:33:12,700 --> 00:33:18,279
changes even a tiny bit then things like

00:33:16,570 --> 00:33:23,590
pointers now point off into never-never

00:33:18,279 --> 00:33:28,179
land and you know at some point became

00:33:23,590 --> 00:33:30,240
pretty clear that was way more causing

00:33:28,179 --> 00:33:34,539
way more trouble than it was solving and

00:33:30,240 --> 00:33:36,610
so they got dumped entirely certainly if

00:33:34,539 --> 00:33:38,590
I understood the implications of it I

00:33:36,610 --> 00:33:40,120
never would have wasted the time putting

00:33:38,590 --> 00:33:42,789
it in in the first place I mean it was

00:33:40,120 --> 00:33:44,769
actually kind of fun to do and you know

00:33:42,789 --> 00:33:50,590
neat concept oh my god this actually

00:33:44,769 --> 00:33:56,129
works except of course it didn't so

00:33:50,590 --> 00:33:56,129
other than that any other questions

00:34:00,970 --> 00:34:04,900
as someone that's been fortunate enough

00:34:02,530 --> 00:34:06,880
to avoid sendmail I was wondering if you

00:34:04,900 --> 00:34:08,920
could go back to the slide where you had

00:34:06,880 --> 00:34:10,210
that configuration of characters and

00:34:08,920 --> 00:34:27,030
just explain a little bit about what

00:34:10,210 --> 00:34:29,110
each of them is doing probably somewhere

00:34:27,030 --> 00:34:33,130
okay this is we need a trigger warning

00:34:29,110 --> 00:34:39,760
here yes this may cause some people

00:34:33,130 --> 00:34:41,830
undue distress so the first letter of

00:34:39,760 --> 00:34:46,810
the line told you what the semantics of

00:34:41,830 --> 00:34:52,090
the line were are was rewrite so it's a

00:34:46,810 --> 00:34:55,240
rewriting rule it still is dollar-plus

00:34:52,090 --> 00:34:56,910
matches so sendmail first takes the

00:34:55,240 --> 00:34:59,890
address it breaks it up into tokens

00:34:56,910 --> 00:35:04,480
standard compiling technique I'd taken a

00:34:59,890 --> 00:35:06,910
compiler class too and by the way that

00:35:04,480 --> 00:35:10,210
the the whole rule set thing it's just a

00:35:06,910 --> 00:35:12,310
simple production system comes straight

00:35:10,210 --> 00:35:16,900
out of expert systems I had taken an AI

00:35:12,310 --> 00:35:20,050
class and you know a friend of mine who

00:35:16,900 --> 00:35:22,030
was a mathematician who said she really

00:35:20,050 --> 00:35:24,100
avoided sendmail because she'd heard all

00:35:22,030 --> 00:35:25,900
these terrible things about it and she

00:35:24,100 --> 00:35:27,880
finally couldn't we put it off anymore

00:35:25,900 --> 00:35:29,770
and she ended up taking the manual home

00:35:27,880 --> 00:35:31,540
and she reads it and she goes what's

00:35:29,770 --> 00:35:34,630
everyone so upset about it's just a

00:35:31,540 --> 00:35:36,400
simple production system so it turns out

00:35:34,630 --> 00:35:37,140
if you're a mathematician it's no

00:35:36,400 --> 00:35:41,170
problem

00:35:37,140 --> 00:35:45,690
so dollar plus matches one or more

00:35:41,170 --> 00:35:49,870
tokens dollar star matches zero or more

00:35:45,690 --> 00:35:54,370
that sign matches an add Sun dollar

00:35:49,870 --> 00:35:59,650
equal W matches any single word in the

00:35:54,370 --> 00:36:03,130
class equal in Class W which later got

00:35:59,650 --> 00:36:05,500
changed into any sequence of words in

00:36:03,130 --> 00:36:08,170
the class W because that semantics

00:36:05,500 --> 00:36:10,600
turned out to be a little wrong and if

00:36:08,170 --> 00:36:12,200
you do match that then replace it by

00:36:10,600 --> 00:36:15,140
dollar one which is

00:36:12,200 --> 00:36:17,780
the dollar plus an @ sign which is an at

00:36:15,140 --> 00:36:20,690
sign and dollar D which is a macro which

00:36:17,780 --> 00:36:22,370
happens to be the local domain name so

00:36:20,690 --> 00:36:26,450
this is a way you take arbitrary things

00:36:22,370 --> 00:36:28,970
that might match your local domain and

00:36:26,450 --> 00:36:46,480
turn it into a canonical form at all it

00:36:28,970 --> 00:36:46,480
is oh good

00:36:48,160 --> 00:36:57,500
hostess was it a blessing or you know I

00:36:53,500 --> 00:37:02,120
really like Visa and when he was working

00:36:57,500 --> 00:37:05,480
on postfix he spent a lot of time he

00:37:02,120 --> 00:37:07,790
looked through sendmail code a lot it's

00:37:05,480 --> 00:37:09,800
been a fair amount of time interacting

00:37:07,790 --> 00:37:14,630
with him means you know why did you do

00:37:09,800 --> 00:37:17,480
it this way you know I would justify it

00:37:14,630 --> 00:37:20,050
as best I could a couple times he found

00:37:17,480 --> 00:37:23,570
bugs and fed them back to me

00:37:20,050 --> 00:37:25,310
postfix took a long time to write and I

00:37:23,570 --> 00:37:28,100
remember I was at a conference at one

00:37:25,310 --> 00:37:29,720
point and there was some talk was one of

00:37:28,100 --> 00:37:31,220
these things with you know a massive

00:37:29,720 --> 00:37:33,470
room so he could actually sit in back

00:37:31,220 --> 00:37:35,600
and beets that was sitting back there

00:37:33,470 --> 00:37:39,590
and in the dark and I sat down next to

00:37:35,600 --> 00:37:43,280
him sort of leaned over and I said so

00:37:39,590 --> 00:37:45,770
how's the mailer going and he looked at

00:37:43,280 --> 00:37:54,050
me and he went it's an exercise in

00:37:45,770 --> 00:37:56,840
humility pizza like me discovered it's a

00:37:54,050 --> 00:38:00,470
lot harder than it looks

00:37:56,840 --> 00:38:04,180
that said he didn't start with a 16-bit

00:38:00,470 --> 00:38:10,910
legacy he had a lot more to work with

00:38:04,180 --> 00:38:12,770
the that mishmash of random special

00:38:10,910 --> 00:38:15,020
characters pretty much doesn't work

00:38:12,770 --> 00:38:18,800
anymore we the whole world is pretty

00:38:15,020 --> 00:38:21,890
much decided that user at domaine he is

00:38:18,800 --> 00:38:23,480
good enough for everyone which was most

00:38:21,890 --> 00:38:24,150
emphatically not the case when I was

00:38:23,480 --> 00:38:26,370
doing

00:38:24,150 --> 00:38:29,070
roles rewriting rules were specifically

00:38:26,370 --> 00:38:33,650
because everyone wanted a different way

00:38:29,070 --> 00:38:35,820
of interpreting email addresses and now

00:38:33,650 --> 00:38:38,490
you know he did not have to deal with

00:38:35,820 --> 00:38:40,260
that legacy I'm actually people go well

00:38:38,490 --> 00:38:42,690
you know aren't you ashamed of send mail

00:38:40,260 --> 00:38:45,420
you know no I'm proud of send mail it

00:38:42,690 --> 00:38:48,290
was born into a specific niche in the

00:38:45,420 --> 00:38:53,070
world it did a really really good job of

00:38:48,290 --> 00:38:55,410
filling out that niche it's really

00:38:53,070 --> 00:38:58,410
really good that the world isn't like

00:38:55,410 --> 00:39:00,570
that anymore and that we have some sense

00:38:58,410 --> 00:39:05,190
of sanity and that makes a lot of things

00:39:00,570 --> 00:39:09,720
easier notably parsing of addresses the

00:39:05,190 --> 00:39:14,070
other thing was you know again partially

00:39:09,720 --> 00:39:16,760
because of the legacy you know started

00:39:14,070 --> 00:39:20,580
send mail in the day before sockets were

00:39:16,760 --> 00:39:22,620
existed certainly named pipes and so the

00:39:20,580 --> 00:39:23,940
idea of having arbitrary processes

00:39:22,620 --> 00:39:26,010
starting up communicating with each

00:39:23,940 --> 00:39:28,590
other could be done but it was really

00:39:26,010 --> 00:39:34,770
hard to do and so pretty much everything

00:39:28,590 --> 00:39:36,870
had to have a common antecedent so you

00:39:34,770 --> 00:39:40,610
could create an unnamed pipe and then

00:39:36,870 --> 00:39:44,190
pass the file descriptors down the tree

00:39:40,610 --> 00:39:48,990
and that limited a lot of what you could

00:39:44,190 --> 00:39:51,000
do so visa had a lot of advantages but

00:39:48,990 --> 00:39:55,140
you know he did an exceptionally good

00:39:51,000 --> 00:39:56,640
job I think you know it's good work what

00:39:55,140 --> 00:39:58,170
can I say the one I cannot quite

00:39:56,640 --> 00:40:02,430
understand and maybe I shouldn't say

00:39:58,170 --> 00:40:04,680
this on tape is why Exim has continued

00:40:02,430 --> 00:40:06,690
to be so successful when it has all the

00:40:04,680 --> 00:40:10,740
architectural flaws that sendmail does

00:40:06,690 --> 00:40:13,320
the only thing is it it's easier to

00:40:10,740 --> 00:40:17,640
configure because it attempts to do less

00:40:13,320 --> 00:40:20,720
and you know I totally get why somebody

00:40:17,640 --> 00:40:24,680
might want to post fix like architecture

00:40:20,720 --> 00:40:24,680
that makes total sense to me

00:40:25,410 --> 00:40:31,650
hi Eric hi the first time we met in 2011

00:40:28,890 --> 00:40:33,960
I pretty I walked up to you and I said

00:40:31,650 --> 00:40:35,880
hi my name is Dez I used to use

00:40:33,960 --> 00:40:37,680
sentimental that I got better and I

00:40:35,880 --> 00:40:55,200
would like to publicly apologize for

00:40:37,680 --> 00:40:59,279
that hi there I'm plus sign in the local

00:40:55,200 --> 00:41:05,190
part curse or blessing o plus sign in

00:40:59,279 --> 00:41:08,549
the local part and so this actually came

00:41:05,190 --> 00:41:13,229
out of the Andrew project at CMU the

00:41:08,549 --> 00:41:17,999
idea was that if I my login name is Eric

00:41:13,229 --> 00:41:20,690
which it is you could have a arbitrary

00:41:17,999 --> 00:41:23,759
number of addresses that were Eric plus

00:41:20,690 --> 00:41:25,829
some other tag and you could use that

00:41:23,759 --> 00:41:28,529
for things like mail sorting and so

00:41:25,829 --> 00:41:33,509
forth I still use this I actually don't

00:41:28,529 --> 00:41:36,479
use the same syntax now because you know

00:41:33,509 --> 00:41:39,420
because I wrote my own mail server I can

00:41:36,479 --> 00:41:45,950
just say everything at something in this

00:41:39,420 --> 00:41:49,079
domain is effectively Eric at the the

00:41:45,950 --> 00:41:50,880
original name I do that because there's

00:41:49,079 --> 00:41:53,849
a surprising number of sites that think

00:41:50,880 --> 00:41:57,779
that plus is not a legal you know valid

00:41:53,849 --> 00:42:00,869
character in a username which it is and

00:41:57,779 --> 00:42:03,829
I just got tired of dealing with those a

00:42:00,869 --> 00:42:03,829
pox on them

00:42:03,950 --> 00:42:07,920
generally speaking you know I for

00:42:06,719 --> 00:42:10,049
example have a different email address

00:42:07,920 --> 00:42:12,930
for pretty much everyone I give my

00:42:10,049 --> 00:42:15,420
address out to so if I get something

00:42:12,930 --> 00:42:18,329
that claims to be from my bank which is

00:42:15,420 --> 00:42:22,979
not to the address that I know my bank

00:42:18,329 --> 00:42:27,210
has I know a priori that it is a fake

00:42:22,979 --> 00:42:29,160
and this happens surprisingly often now

00:42:27,210 --> 00:42:30,779
most of the time the fakes are so bad

00:42:29,160 --> 00:42:32,069
that you would never believe that they

00:42:30,779 --> 00:42:34,019
were actually from your bank but

00:42:32,069 --> 00:42:37,859
occasionally you know you get one where

00:42:34,019 --> 00:42:39,010
it's like huh looks plausible but it's

00:42:37,859 --> 00:42:43,780
to the wrong address

00:42:39,010 --> 00:42:45,670
so I'm done I you know I don't know if

00:42:43,780 --> 00:42:50,470
plus is the right syntax but I think the

00:42:45,670 --> 00:42:53,230
concept is a great one and once again I

00:42:50,470 --> 00:42:55,350
just stole the syntax not my creation at

00:42:53,230 --> 00:42:55,350
all

00:42:55,830 --> 00:43:06,670
any other questions what kind of user

00:43:04,090 --> 00:43:13,770
agent you are using right now user

00:43:06,670 --> 00:43:13,770
agents I am currently using Thunderbird

00:43:15,720 --> 00:43:22,780
there are days I curse it I was cursing

00:43:20,140 --> 00:43:24,400
it day before yesterday when it suddenly

00:43:22,780 --> 00:43:27,040
decided that it needed to take up a

00:43:24,400 --> 00:43:28,840
hundred percent of my CPU and after an

00:43:27,040 --> 00:43:31,030
hour it was still using up a hundred

00:43:28,840 --> 00:43:33,100
percent of my CPU and my fan was running

00:43:31,030 --> 00:43:38,320
crazy and it was sitting on my lap and I

00:43:33,100 --> 00:43:41,170
was getting burns on my legs and you

00:43:38,320 --> 00:43:43,840
know I have absolutely no idea why no

00:43:41,170 --> 00:43:47,530
clue apparently Thunderbird just likes

00:43:43,840 --> 00:43:49,630
to do that occasionally but you know

00:43:47,530 --> 00:43:51,670
I've got it you know my fingers are

00:43:49,630 --> 00:43:53,680
programmed with all the hotkeys and so

00:43:51,670 --> 00:43:55,390
forth so it's really kind of hard to

00:43:53,680 --> 00:43:57,010
convince myself to go to something else

00:43:55,390 --> 00:44:00,670
I've looked at other things including

00:43:57,010 --> 00:44:05,340
commercial products and basically

00:44:00,670 --> 00:44:05,340
everything out there's bad though

00:44:09,190 --> 00:44:14,809
okay I guess that's it

00:44:11,670 --> 00:44:14,809
[Applause]

00:44:19,200 --> 00:44:25,140
so thank you very much for stepping in

00:44:21,490 --> 00:44:25,140
at the last moment we have a small token

00:44:33,119 --> 00:44:35,180

YouTube URL: https://www.youtube.com/watch?v=Re1MAO6jOLE


