Title: Lessons Learned Operating Cloud Foundry Using BOSH and SoftLayer
Publication date: 2016-05-30
Playlist: BOSH Day - Cloud Foundry Summit NA 2016
Description: 
	Lessons Learned Operating Cloud Foundry Using BOSH and SoftLayer - Dr. Max and Matt (Xue Xiang Cui), IBM
Captions: 
	00:00:00,060 --> 00:00:08,220
okay thank you your Colin it's always

00:00:03,240 --> 00:00:11,599
difficult to follow Maria she by the way

00:00:08,220 --> 00:00:21,260
has more commits on Bosch than anybody

00:00:11,599 --> 00:00:21,260
including you or or Dmitri and YouTube

00:00:25,120 --> 00:00:30,220
[Laughter]

00:00:33,320 --> 00:00:45,960
come over here yeah so I hope not to

00:00:42,510 --> 00:00:49,079
disappoint Colin but we were certainly

00:00:45,960 --> 00:00:51,030
gonna talk about something different let

00:00:49,079 --> 00:00:56,010
me first say that you know some of this

00:00:51,030 --> 00:00:59,190
is our experience you know at IBM I'll

00:00:56,010 --> 00:01:01,410
be honest some of it is pretty dumb some

00:00:59,190 --> 00:01:03,899
of it is difficult right things that we

00:01:01,410 --> 00:01:05,489
learn in in you know as we operated in

00:01:03,899 --> 00:01:10,590
production and when I say dumb meaning

00:01:05,489 --> 00:01:15,170
like we were learning so hopefully some

00:01:10,590 --> 00:01:15,170
will resonate with you Yes Doctor

00:01:21,750 --> 00:01:24,810
[Music]

00:01:26,900 --> 00:01:32,590
[Music]

00:01:29,730 --> 00:01:39,440
[Applause]

00:01:32,590 --> 00:01:41,770
okay so we have 30 minutes lots of cover

00:01:39,440 --> 00:01:44,350
and hopefully there are some questions

00:01:41,770 --> 00:01:49,000
so let me first introduce my colleague

00:01:44,350 --> 00:01:52,070
zhu shi that's my best chinese mandarin

00:01:49,000 --> 00:01:55,580
he goes by matt so he's not gonna fall I

00:01:52,070 --> 00:01:58,430
hope let's taste it and he is part of

00:01:55,580 --> 00:01:59,360
the development team in China that we

00:01:58,430 --> 00:02:01,970
work with

00:01:59,360 --> 00:02:03,650
obviously the I and IBM you know what it

00:02:01,970 --> 00:02:06,170
stands for so that means that we have

00:02:03,650 --> 00:02:08,619
people all over the world and the China

00:02:06,170 --> 00:02:11,500
team is huge and he's part of the team

00:02:08,619 --> 00:02:13,880
so he's gonna help me with this and

00:02:11,500 --> 00:02:17,030
let's get started we have one intro

00:02:13,880 --> 00:02:19,910
slide that may be boring to you guys and

00:02:17,030 --> 00:02:21,590
then we'll get into the meat of it okay

00:02:19,910 --> 00:02:23,810
so the intro slide is what is bluemix

00:02:21,590 --> 00:02:25,070
you probably already know but let me be

00:02:23,810 --> 00:02:30,740
clear about this so first thing is a

00:02:25,070 --> 00:02:32,930
certified cloud foundry pass it is the

00:02:30,740 --> 00:02:36,320
largest installation of cloud foundry

00:02:32,930 --> 00:02:38,570
right now the public version but we also

00:02:36,320 --> 00:02:40,970
have private and also a dedicated

00:02:38,570 --> 00:02:44,450
version the dedicated is sort of you get

00:02:40,970 --> 00:02:46,400
a slice of the ayahs which we use called

00:02:44,450 --> 00:02:48,140
software and then you get your own

00:02:46,400 --> 00:02:49,940
bluemix for your enterprise and then of

00:02:48,140 --> 00:02:54,500
course the private means that you get

00:02:49,940 --> 00:02:56,630
some insulation inside your own company

00:02:54,500 --> 00:02:58,310
and verse companies have similar things

00:02:56,630 --> 00:03:02,390
like pivotal has their own and offering

00:02:58,310 --> 00:03:06,110
similarly we announce that we have 1

00:03:02,390 --> 00:03:09,170
million registered users does it mean

00:03:06,110 --> 00:03:11,180
that there was 1 million or actually

00:03:09,170 --> 00:03:14,989
developing right now on blue eggs I

00:03:11,180 --> 00:03:17,090
don't know maybe I hope but we're

00:03:14,989 --> 00:03:19,910
certainly adding about 20 thousand per

00:03:17,090 --> 00:03:23,720
month or more that's the public data

00:03:19,910 --> 00:03:25,370
that we announce there's over 100

00:03:23,720 --> 00:03:30,530
thousands of apps running right now

00:03:25,370 --> 00:03:35,230
hopefully all hello world and one thing

00:03:30,530 --> 00:03:37,880
I know for sure is we have more than 500

00:03:35,230 --> 00:03:41,060
services in our catalog and easily beats

00:03:37,880 --> 00:03:43,040
anybody else I'll challenge anybody

00:03:41,060 --> 00:03:45,590
you know compared the services that we

00:03:43,040 --> 00:03:49,630
have so we have a huge amount of

00:03:45,590 --> 00:03:49,630
services and some of it is pretty unique

00:03:51,640 --> 00:04:03,980
yeah I know we gotta fix that you can

00:04:00,170 --> 00:04:07,310
keep interrupting me dr. Nick anytime it

00:04:03,980 --> 00:04:08,780
runs on software it's a challenge I'll

00:04:07,310 --> 00:04:13,400
tell you so a lot of the problem you'll

00:04:08,780 --> 00:04:15,620
see or challenging it's it's it's really

00:04:13,400 --> 00:04:17,269
good to have you know the resource that

00:04:15,620 --> 00:04:19,940
we haven't wash people like maybe

00:04:17,269 --> 00:04:24,050
especially Dmitri for instance that help

00:04:19,940 --> 00:04:27,200
me fix problem there that you know even

00:04:24,050 --> 00:04:29,620
inside IBM very few people know so it's

00:04:27,200 --> 00:04:32,510
a challenge it's also also a very good

00:04:29,620 --> 00:04:34,280
alternative I as to AWS if you're

00:04:32,510 --> 00:04:35,960
considering it there are some issues but

00:04:34,280 --> 00:04:38,990
if you if you if you're looking at that

00:04:35,960 --> 00:04:42,470
let me know OpenStack certainly is also

00:04:38,990 --> 00:04:43,970
part of what we use right now and then

00:04:42,470 --> 00:04:46,970
finally as I mentioned worldwide

00:04:43,970 --> 00:04:48,530
development team and then we'll get into

00:04:46,970 --> 00:04:52,600
the meat of it so the meat of it is

00:04:48,530 --> 00:04:55,310
we'll do a top ten list so sort of like

00:04:52,600 --> 00:04:55,669
you know David Letterman when he was

00:04:55,310 --> 00:04:59,080
there

00:04:55,669 --> 00:05:03,050
okay so we'll calm down so to help me

00:04:59,080 --> 00:05:05,180
Matt will announce each one of those and

00:05:03,050 --> 00:05:07,520
kind of like a synopsis and I get into

00:05:05,180 --> 00:05:09,430
the details and he doesn't speak a lot

00:05:07,520 --> 00:05:15,080
of English so you'll do it in Chinese

00:05:09,430 --> 00:05:18,950
okay number ten change digital guy via

00:05:15,080 --> 00:05:23,360
so someone's no Chinese here oh great a

00:05:18,950 --> 00:05:26,450
lot so you can check it okay all right

00:05:23,360 --> 00:05:29,000
so what we found is there's a need for

00:05:26,450 --> 00:05:31,970
tightly controlled change request

00:05:29,000 --> 00:05:34,100
process and the reason we do need that

00:05:31,970 --> 00:05:35,510
is because we have such a large team

00:05:34,100 --> 00:05:37,970
right all over the world

00:05:35,510 --> 00:05:40,430
so when Dmitri releases our new stem

00:05:37,970 --> 00:05:43,190
cell and you update and we have to get

00:05:40,430 --> 00:05:45,080
it in there or the press of Cloud

00:05:43,190 --> 00:05:47,960
Foundry for instance how do you get

00:05:45,080 --> 00:05:49,970
those fixes and the changes and well

00:05:47,960 --> 00:05:52,909
change requests process we found is

00:05:49,970 --> 00:05:54,470
important of course it has the bads so

00:05:52,909 --> 00:05:56,990
it's true

00:05:54,470 --> 00:05:58,340
you know from the time we know that

00:05:56,990 --> 00:06:01,100
there's a chance that we need to apply

00:05:58,340 --> 00:06:04,580
to actually executing it that's a

00:06:01,100 --> 00:06:06,530
problem sometimes it requires meetings

00:06:04,580 --> 00:06:10,010
very late at night because we gotta get

00:06:06,530 --> 00:06:11,330
everybody on the team if you work with

00:06:10,010 --> 00:06:13,670
teams in China and all over the world

00:06:11,330 --> 00:06:15,230
sometimes you got to have either very

00:06:13,670 --> 00:06:18,440
early in the morning especially for us

00:06:15,230 --> 00:06:21,260
West Coasters or late at night so pretty

00:06:18,440 --> 00:06:23,180
much I have two shifts of work you know

00:06:21,260 --> 00:06:27,140
10:00 p.m. pretty much I talk to these

00:06:23,180 --> 00:06:30,020
guys because it's their midday the good

00:06:27,140 --> 00:06:32,690
thing is that it will limit propagation

00:06:30,020 --> 00:06:34,640
of somewhat of your changes right so if

00:06:32,690 --> 00:06:37,340
you have problematic changes it will

00:06:34,640 --> 00:06:39,560
limit it so the lessons learned is to

00:06:37,340 --> 00:06:41,750
essentially use some kind of a tool to

00:06:39,560 --> 00:06:44,060
alleviate you know the fact that you're

00:06:41,750 --> 00:06:46,370
gonna have you know time zone

00:06:44,060 --> 00:06:48,770
differences for very large operations

00:06:46,370 --> 00:06:51,290
and then making sure that you still

00:06:48,770 --> 00:06:53,240
coordinate with a change with course

00:06:51,290 --> 00:06:54,650
process most people will probably be

00:06:53,240 --> 00:06:59,350
doing this but if you're not you should

00:06:54,650 --> 00:07:05,780
probably consider that number 9 added

00:06:59,350 --> 00:07:09,380
digital shanku so what we found is there

00:07:05,780 --> 00:07:12,169
you have some level of audit for the

00:07:09,380 --> 00:07:14,419
health of the system because as you know

00:07:12,169 --> 00:07:16,340
the system goes in steady state you you

00:07:14,419 --> 00:07:18,950
might want to check so the problem of

00:07:16,340 --> 00:07:22,100
course is that those audits can be very

00:07:18,950 --> 00:07:25,400
manual right and how do you automate

00:07:22,100 --> 00:07:28,780
some of those can be difficult the good

00:07:25,400 --> 00:07:31,340
thing is and if you guys don't know Tony

00:07:28,780 --> 00:07:33,680
from pivotal you should talk to it

00:07:31,340 --> 00:07:36,740
anybody here is here somewhere I don't

00:07:33,680 --> 00:07:38,570
know Tony yeah okay he's here somewhere

00:07:36,740 --> 00:07:40,340
I saw him you should talk to him the

00:07:38,570 --> 00:07:43,070
reason is because you'll teach you a lot

00:07:40,340 --> 00:07:45,500
about how to operate Bosch and one of

00:07:43,070 --> 00:07:48,919
the things already on about two years

00:07:45,500 --> 00:07:51,260
ago when I started looking at you know

00:07:48,919 --> 00:07:52,880
participating in Bosch is to understand

00:07:51,260 --> 00:07:54,280
cannery based deployment so if you don't

00:07:52,880 --> 00:07:57,169
understand that you should talk to them

00:07:54,280 --> 00:07:59,390
and that sort of gives you a sense of

00:07:57,169 --> 00:08:02,000
audits you know early on in your

00:07:59,390 --> 00:08:04,160
deployment but as the system goes into

00:08:02,000 --> 00:08:06,650
steady-state that's the kind of audits

00:08:04,160 --> 00:08:07,729
I'm talking about so the lessons learn

00:08:06,650 --> 00:08:11,930
is too

00:08:07,729 --> 00:08:14,659
have potentially some tools like what we

00:08:11,930 --> 00:08:15,710
did it's called IBM doctor and I'm not

00:08:14,659 --> 00:08:18,770
trying to sell it to you I don't think

00:08:15,710 --> 00:08:21,349
we have a you know that tool available

00:08:18,770 --> 00:08:22,909
for people to use but we use it

00:08:21,349 --> 00:08:25,550
internally and what it does is it allows

00:08:22,909 --> 00:08:27,349
us to have one entry point where we can

00:08:25,550 --> 00:08:28,999
see all of the different deployments so

00:08:27,349 --> 00:08:30,889
there are hundreds of bluemix

00:08:28,999 --> 00:08:32,539
deployments and with this tool you can

00:08:30,889 --> 00:08:35,269
kind of like oversee everything sort of

00:08:32,539 --> 00:08:37,750
like an uber right so you can see

00:08:35,269 --> 00:08:42,079
everything and it allows you also to

00:08:37,750 --> 00:08:45,290
look at the logs and then even apply

00:08:42,079 --> 00:08:46,940
some what it rules if you need to so are

00:08:45,290 --> 00:08:49,910
checking to see if people did update

00:08:46,940 --> 00:08:52,519
their stem cell for instance not an

00:08:49,910 --> 00:08:55,670
example now if you're doing single

00:08:52,519 --> 00:08:57,410
deployment small deployments the Bosch

00:08:55,670 --> 00:08:59,810
toolset is probably good enough for you

00:08:57,410 --> 00:09:03,769
but if you're not that's where you need

00:08:59,810 --> 00:09:09,230
something more number eight

00:09:03,769 --> 00:09:11,180
logging the battle so one of the things

00:09:09,230 --> 00:09:13,579
that I found out as I started working

00:09:11,180 --> 00:09:16,970
with the team and and I guess it's not

00:09:13,579 --> 00:09:19,639
new maybe is the fact that you know you

00:09:16,970 --> 00:09:21,740
have to have access to logs the problem

00:09:19,639 --> 00:09:25,639
of course is that with large deployments

00:09:21,740 --> 00:09:27,170
you get log rotation so you lose logs so

00:09:25,639 --> 00:09:29,540
you could try to say okay well let me

00:09:27,170 --> 00:09:31,579
increase the size of disk and stuff like

00:09:29,540 --> 00:09:33,980
that right it's not always easy when

00:09:31,579 --> 00:09:38,000
you're talking at scale of hundreds of

00:09:33,980 --> 00:09:40,459
deployments so having a strategy that

00:09:38,000 --> 00:09:43,819
allows you as you scale that propagates

00:09:40,459 --> 00:09:47,449
those logs into one place and and have

00:09:43,819 --> 00:09:49,579
access to them is important the other

00:09:47,449 --> 00:09:52,069
thing is keeping all this log is

00:09:49,579 --> 00:09:54,910
expensive and it takes time and planning

00:09:52,069 --> 00:09:57,139
so you got a you got to do it though and

00:09:54,910 --> 00:09:59,510
separating certain logs is also very

00:09:57,139 --> 00:10:02,000
important so one of the things we found

00:09:59,510 --> 00:10:04,699
out as we started doing your new CPI is

00:10:02,000 --> 00:10:07,699
being able to identify the CPI log

00:10:04,699 --> 00:10:10,550
versus the whole rest can be problematic

00:10:07,699 --> 00:10:13,130
so making sure that you have ways to to

00:10:10,550 --> 00:10:15,579
do this early on is important before it

00:10:13,130 --> 00:10:17,779
starts going and then it becomes a issue

00:10:15,579 --> 00:10:20,390
the good thing is there is vlogger

00:10:17,779 --> 00:10:21,620
creator that allows you to stream all

00:10:20,390 --> 00:10:24,080
the logs but you still

00:10:21,620 --> 00:10:25,700
don't have a way to save it so you can

00:10:24,080 --> 00:10:28,040
just access the log and you'll have to

00:10:25,700 --> 00:10:30,350
save it so important for you I guess

00:10:28,040 --> 00:10:34,100
lessons learn is to introduce some kind

00:10:30,350 --> 00:10:36,160
of a tooling early to deal with the fact

00:10:34,100 --> 00:10:39,110
that you're gonna have a lot of log

00:10:36,160 --> 00:10:41,390
certainiy we don't work we don't have

00:10:39,110 --> 00:10:43,550
any X I don't even have a stock account

00:10:41,390 --> 00:10:45,380
but I've used it when I was working at

00:10:43,550 --> 00:10:47,690
pivotal with them it's actually a pretty

00:10:45,380 --> 00:10:49,730
good tool at IBM we have our own groom

00:10:47,690 --> 00:10:50,930
solution as well which is pretty good

00:10:49,730 --> 00:10:53,830
too but I don't know

00:10:50,930 --> 00:10:56,510
again if it's being sold so you can talk

00:10:53,830 --> 00:10:58,700
there are other tools too yes definitely

00:10:56,510 --> 00:11:01,700
thank you dr. Nick but it's important to

00:10:58,700 --> 00:11:04,760
start thinking about that because when

00:11:01,700 --> 00:11:06,440
the house starts burning you know it's

00:11:04,760 --> 00:11:08,080
not the time to start introducing tools

00:11:06,440 --> 00:11:12,080
like that so make sure you have it

00:11:08,080 --> 00:11:16,430
number seven number seven complain eg

00:11:12,080 --> 00:11:19,250
tarp oh yeah all right so I I search

00:11:16,430 --> 00:11:21,440
lose and then Drake came up I actually

00:11:19,250 --> 00:11:24,700
like Drake a lot but he does complain a

00:11:21,440 --> 00:11:24,700
bit so maybe that's what it is

00:11:25,130 --> 00:11:29,959
so I worked on washing it I actually

00:11:27,430 --> 00:11:32,720
some of the first commits in washing it

00:11:29,959 --> 00:11:34,940
I was part of but there are some

00:11:32,720 --> 00:11:37,339
problems and I think a lot of it is

00:11:34,940 --> 00:11:39,709
being addressed but the bads and I think

00:11:37,339 --> 00:11:41,330
Matt would make may be able to explain

00:11:39,709 --> 00:11:43,130
this if you have question but there are

00:11:41,330 --> 00:11:45,320
issues like if you're trying to recreate

00:11:43,130 --> 00:11:48,470
a director you know using washing it

00:11:45,320 --> 00:11:49,850
like an existing director right sorry

00:11:48,470 --> 00:11:53,209
there has been a lot of frequent updates

00:11:49,850 --> 00:11:56,360
as the tool got release and sort of goo

00:11:53,209 --> 00:11:58,610
and that caused problem for us

00:11:56,360 --> 00:12:00,860
the good thing is it certainly a single

00:11:58,610 --> 00:12:04,730
binary or go binary and it's in general

00:12:00,860 --> 00:12:07,010
pretty easy to use and it also

00:12:04,730 --> 00:12:09,230
introduced external CPI so if you know

00:12:07,010 --> 00:12:10,970
the history of Bosch as washing it got

00:12:09,230 --> 00:12:13,640
introduced that was part of also the

00:12:10,970 --> 00:12:15,560
change to external CPI's so the good

00:12:13,640 --> 00:12:18,020
thing here is that you know because the

00:12:15,560 --> 00:12:20,990
tool is an activity development I spend

00:12:18,020 --> 00:12:22,940
a lot of time with the team doesn't seem

00:12:20,990 --> 00:12:25,390
like you've spent one week a pivotal

00:12:22,940 --> 00:12:28,160
working with Dmitri and the rest you

00:12:25,390 --> 00:12:30,050
kind of see things are moving store it

00:12:28,160 --> 00:12:32,480
actually moves extremely fast within a

00:12:30,050 --> 00:12:34,240
month the add features so sometimes I go

00:12:32,480 --> 00:12:36,250
like I visited China

00:12:34,240 --> 00:12:39,070
last year I would go back and come back

00:12:36,250 --> 00:12:40,750
and it's as if I never talked to DK at

00:12:39,070 --> 00:12:42,640
all because there were so many new

00:12:40,750 --> 00:12:44,589
features and it's sort of the process

00:12:42,640 --> 00:12:46,690
that goes on right now so you have to be

00:12:44,589 --> 00:12:48,910
sort of plan for the fact that things

00:12:46,690 --> 00:12:50,440
are moving very very quickly so like

00:12:48,910 --> 00:12:53,640
Bosch did Auto for instance right and

00:12:50,440 --> 00:12:56,880
pretty soon Bosch 2.1 and 2.2 it's a

00:12:53,640 --> 00:12:56,880
plan for that

00:12:58,230 --> 00:13:05,920
number six customer release delayed how

00:13:02,140 --> 00:13:07,630
abundant Ingram so this fits quite well

00:13:05,920 --> 00:13:10,360
with what Maria was talking about right

00:13:07,630 --> 00:13:12,459
so she showed you essentially had to

00:13:10,360 --> 00:13:15,190
build a release and so on it can be

00:13:12,459 --> 00:13:17,290
difficult so don't you know she has a

00:13:15,190 --> 00:13:19,540
lot of expertise so it looked easy but

00:13:17,290 --> 00:13:21,459
it can be a bit difficult I'm not trying

00:13:19,540 --> 00:13:22,600
to say that you shouldn't do your own

00:13:21,459 --> 00:13:24,310
release actor I'm telling you you should

00:13:22,600 --> 00:13:27,820
do your own with this and this is

00:13:24,310 --> 00:13:31,450
something that I used my experience in

00:13:27,820 --> 00:13:34,779
Bosch and certainly advice from Demetri

00:13:31,450 --> 00:13:38,649
to essentially migrate all our custom

00:13:34,779 --> 00:13:41,829
software to custom releases so what

00:13:38,649 --> 00:13:44,110
ended up happening is whether you like

00:13:41,829 --> 00:13:47,290
it or not big companies such as IBM will

00:13:44,110 --> 00:13:50,260
have custom software and good luck

00:13:47,290 --> 00:13:52,720
trying to convince you know Joe Schmoe

00:13:50,260 --> 00:13:54,360
somewhere that's building this custom

00:13:52,720 --> 00:13:56,470
software that they shouldn't be doing it

00:13:54,360 --> 00:13:57,940
because that's their livelihood right

00:13:56,470 --> 00:13:59,350
they're part of the corporation they've

00:13:57,940 --> 00:14:01,690
been using it they sell it to customers

00:13:59,350 --> 00:14:03,459
so you can't convince them so I don't

00:14:01,690 --> 00:14:05,500
think you should try to I think you

00:14:03,459 --> 00:14:09,250
should just give them a path to add that

00:14:05,500 --> 00:14:12,459
custom software the bad thing is to bake

00:14:09,250 --> 00:14:16,060
it into your stem cell really bad idea

00:14:12,459 --> 00:14:21,850
so we did do that for a long time yeah

00:14:16,060 --> 00:14:24,700
yeah I saw you move but we fixed that

00:14:21,850 --> 00:14:27,430
but it was a was a tedious process it

00:14:24,700 --> 00:14:30,370
was very hard so certainly using

00:14:27,430 --> 00:14:33,070
co-located releases was excellent

00:14:30,370 --> 00:14:36,070
feature for us and allowed us to sort of

00:14:33,070 --> 00:14:39,820
move out of this notion of creating our

00:14:36,070 --> 00:14:41,440
own stem cell with custom software so we

00:14:39,820 --> 00:14:44,130
ended up you know creating our own

00:14:41,440 --> 00:14:44,130
releases

00:14:44,430 --> 00:14:52,170
so basic lessons learned you should

00:14:48,750 --> 00:14:53,640
trust the Bosch team and just use the

00:14:52,170 --> 00:14:55,560
stem cell that they do now if you have

00:14:53,640 --> 00:14:57,840
your own irons like in our case stuff

00:14:55,560 --> 00:15:02,640
there we're gonna create we create our

00:14:57,840 --> 00:15:04,200
own stem cell so because of that you

00:15:02,640 --> 00:15:06,810
know we can kind of control the speed of

00:15:04,200 --> 00:15:09,960
it but one thing that we work very hard

00:15:06,810 --> 00:15:13,440
and again using the Bosch team's advice

00:15:09,960 --> 00:15:16,020
is not to add anything else so our stem

00:15:13,440 --> 00:15:18,300
cell is pretty much done for software

00:15:16,020 --> 00:15:21,690
when our pipeline which is public but

00:15:18,300 --> 00:15:24,000
it's essentially just adding one file

00:15:21,690 --> 00:15:26,400
that's different because we configure

00:15:24,000 --> 00:15:30,000
the agents differently than everybody

00:15:26,400 --> 00:15:31,920
else that's it we have absolutely no

00:15:30,000 --> 00:15:35,310
additional bits that are different

00:15:31,920 --> 00:15:38,490
everything else gets added that caused

00:15:35,310 --> 00:15:41,340
that that significantly solve things for

00:15:38,490 --> 00:15:44,430
us but it was a long process to move to

00:15:41,340 --> 00:15:46,670
that so if you're in that same boat make

00:15:44,430 --> 00:15:48,990
sure that you do not add anything else

00:15:46,670 --> 00:15:56,220
trust the Russian he'll give you good

00:15:48,990 --> 00:15:58,950
software number five no party has deal

00:15:56,220 --> 00:16:01,550
with her to to hardly ask sorry

00:15:58,950 --> 00:16:04,490
contrasted party is

00:16:01,550 --> 00:16:06,440
so this is this is number five it's

00:16:04,490 --> 00:16:10,520
actually not for power dentist it's

00:16:06,440 --> 00:16:13,490
against it so here's the thing when you

00:16:10,520 --> 00:16:15,710
are running Bosch at scale

00:16:13,490 --> 00:16:18,820
you can't really have IPS for every

00:16:15,710 --> 00:16:21,230
single note I mean like fixed IPS right

00:16:18,820 --> 00:16:23,030
maybe you could but it will be expensive

00:16:21,230 --> 00:16:25,790
and it's also not a good strategy so

00:16:23,030 --> 00:16:29,210
dynamic IP solution works and it's

00:16:25,790 --> 00:16:30,770
important for you to consider it but of

00:16:29,210 --> 00:16:34,490
course if you're starting to add dynamic

00:16:30,770 --> 00:16:38,050
IP you get the problem you need a DNS

00:16:34,490 --> 00:16:39,710
now if the ayahs that you have provides

00:16:38,050 --> 00:16:41,540
DNS that's great

00:16:39,710 --> 00:16:43,850
otherwise you use something like power

00:16:41,540 --> 00:16:45,890
DNS but that's a problem because it's a

00:16:43,850 --> 00:16:49,670
swath right so a single point of failure

00:16:45,890 --> 00:16:51,290
and it will go down and when it goes

00:16:49,670 --> 00:16:53,240
down your whole deployment is dead

00:16:51,290 --> 00:16:55,730
pretty much until you revive it all you

00:16:53,240 --> 00:16:59,270
fix it or something like that so that's

00:16:55,730 --> 00:17:03,020
a big problem and it's not very easy to

00:16:59,270 --> 00:17:05,420
make power DNS H a so I think there were

00:17:03,020 --> 00:17:07,100
some teams in IBM that try that and if

00:17:05,420 --> 00:17:10,430
you look through the web you might see

00:17:07,100 --> 00:17:11,930
people trying that I think it's I mean

00:17:10,430 --> 00:17:13,940
you could try it if you if you have some

00:17:11,930 --> 00:17:15,680
solution I'd love to hear it and I'm

00:17:13,940 --> 00:17:19,580
sure other people might as well but

00:17:15,680 --> 00:17:22,459
definitely you know just get rid of it

00:17:19,580 --> 00:17:26,420
now how do you get rid of it some I

00:17:22,459 --> 00:17:29,390
asked like I think AWS provides some

00:17:26,420 --> 00:17:32,500
level of DNS that's AJ so if you if you

00:17:29,390 --> 00:17:36,380
use those then that's great in our case

00:17:32,500 --> 00:17:38,480
we don't have a good power detail DNS

00:17:36,380 --> 00:17:40,850
resolution that's AJ so what we've been

00:17:38,480 --> 00:17:42,500
doing and I'm actually working right now

00:17:40,850 --> 00:17:46,340
with the Bosch team with Tyler and the

00:17:42,500 --> 00:17:47,990
team to add a solution for power DNS to

00:17:46,340 --> 00:17:49,730
get rid of poverty and so essentially a

00:17:47,990 --> 00:17:51,800
solution for DNS so if you're interested

00:17:49,730 --> 00:17:53,660
in this we should chat but basically

00:17:51,800 --> 00:17:55,820
that's that's the lessons learned I

00:17:53,660 --> 00:17:59,360
guess is that think long and hard in

00:17:55,820 --> 00:18:02,930
general not to have any known 88th jobs

00:17:59,360 --> 00:18:06,590
or nodes because as much as you think

00:18:02,930 --> 00:18:10,070
well you know I'll protect it I'll you

00:18:06,590 --> 00:18:11,510
know somehow you know have somebody so

00:18:10,070 --> 00:18:13,850
you can pay somebody to just like

00:18:11,510 --> 00:18:15,050
monitor this one it will fail and when

00:18:13,850 --> 00:18:17,450
it fails you're gonna

00:18:15,050 --> 00:18:20,450
have to deal with the consequence and in

00:18:17,450 --> 00:18:26,870
this case irony would power DNS it will

00:18:20,450 --> 00:18:29,210
be a bad consequence so we can talk

00:18:26,870 --> 00:18:30,740
after or maybe in the Q&A I can tell you

00:18:29,210 --> 00:18:35,060
a little bit more details of the

00:18:30,740 --> 00:18:38,390
solution that we're working right number

00:18:35,060 --> 00:18:43,970
four security update the sutra hundra

00:18:38,390 --> 00:18:47,060
and John bouttÃ© so one of the things

00:18:43,970 --> 00:18:50,300
that you should all know unlike a

00:18:47,060 --> 00:18:53,480
certain presidential candidate is that

00:18:50,300 --> 00:18:56,210
the Internet has a lot of evildoers so

00:18:53,480 --> 00:18:56,750
do not trust anything anything on the

00:18:56,210 --> 00:18:58,310
Internet

00:18:56,750 --> 00:19:00,950
pretty much I mean you should question

00:18:58,310 --> 00:19:05,330
everything so what does that mean that

00:19:00,950 --> 00:19:08,990
means that there are TVs all the time

00:19:05,330 --> 00:19:11,060
all right pretty much everyday like you

00:19:08,990 --> 00:19:14,480
know security vulnerabilities all the

00:19:11,060 --> 00:19:17,180
time that you gotta fix and the good

00:19:14,480 --> 00:19:18,950
news is well the other bad news I guess

00:19:17,180 --> 00:19:20,630
is that you willing those security

00:19:18,950 --> 00:19:23,960
updates can be very costly especially

00:19:20,630 --> 00:19:27,920
when you have thousands of nodes right

00:19:23,960 --> 00:19:31,430
takes time in you know effort and things

00:19:27,920 --> 00:19:34,160
fail right so how do you deal with

00:19:31,430 --> 00:19:37,280
security well there's a good news here

00:19:34,160 --> 00:19:39,170
the good news is the Bosch team and I've

00:19:37,280 --> 00:19:41,090
seen them have been part of the team you

00:19:39,170 --> 00:19:44,330
come to Vivat all you'll see it they now

00:19:41,090 --> 00:19:46,160
have a security czar and essentially

00:19:44,330 --> 00:19:48,050
every time there's a CV you'll see tons

00:19:46,160 --> 00:19:49,670
of discussion if you're in the private

00:19:48,050 --> 00:19:52,370
mailing this you'll see some of those

00:19:49,670 --> 00:19:53,690
discussion very already so any chip gets

00:19:52,370 --> 00:19:55,700
involved in that as well so the

00:19:53,690 --> 00:19:58,520
foundation knows and then all the

00:19:55,700 --> 00:20:01,220
different you know people involved get

00:19:58,520 --> 00:20:04,490
you know know about those and then the

00:20:01,220 --> 00:20:07,040
Bosh team essentially dedicates a pair

00:20:04,490 --> 00:20:08,870
or even I don't know if they have more

00:20:07,040 --> 00:20:11,420
than a pair you can talk to Tyler he's

00:20:08,870 --> 00:20:13,310
the lead of the team to essentially

00:20:11,420 --> 00:20:15,500
address the CV and typically that

00:20:13,310 --> 00:20:17,450
results in your new stem cell and what

00:20:15,500 --> 00:20:19,720
I'm seeing now and I don't want to could

00:20:17,450 --> 00:20:23,360
anybody but I'm seeing about about a

00:20:19,720 --> 00:20:24,860
weekly new stem cell almost maybe not

00:20:23,360 --> 00:20:26,390
new stem cell but new updates that

00:20:24,860 --> 00:20:28,370
should you have to address now if you're

00:20:26,390 --> 00:20:29,630
paranoid about security the

00:20:28,370 --> 00:20:31,790
you're thinking okay well I need to

00:20:29,630 --> 00:20:33,800
update very frequently but if your

00:20:31,790 --> 00:20:35,210
update takes you your day what takes you

00:20:33,800 --> 00:20:38,180
a significant amount of time or effort

00:20:35,210 --> 00:20:42,559
then it's a problem so what do you do

00:20:38,180 --> 00:20:47,030
about that so what we found is working

00:20:42,559 --> 00:20:50,059
with the ions can be a very good thing

00:20:47,030 --> 00:20:51,530
so we we do two things but some one of

00:20:50,059 --> 00:20:55,190
which I kind of learn a little bit more

00:20:51,530 --> 00:20:59,780
detail yesterday talking to our bluemix

00:20:55,190 --> 00:21:01,370
manager Fabio is that he uses a IBM

00:20:59,780 --> 00:21:03,559
software called civilly endpoint

00:21:01,370 --> 00:21:05,660
management to essentially push patches

00:21:03,559 --> 00:21:08,420
to the different stem cells or the

00:21:05,660 --> 00:21:11,540
different nodes certainly you could use

00:21:08,420 --> 00:21:18,710
Bosh also to update and that's certainly

00:21:11,540 --> 00:21:21,350
a way to also do it for a small well we

00:21:18,710 --> 00:21:23,210
do that but we since we own the ass

00:21:21,350 --> 00:21:25,400
that's part of how we were able to do

00:21:23,210 --> 00:21:27,800
this I don't know if you can I mean

00:21:25,400 --> 00:21:31,420
Ernie you know if you're running on top

00:21:27,800 --> 00:21:33,860
of Amazon you can't really do that well

00:21:31,420 --> 00:21:35,720
well so what I'm suggesting is that

00:21:33,860 --> 00:21:39,380
second piece is the reloading of os so

00:21:35,720 --> 00:21:42,050
this guy and a few other at IBM came up

00:21:39,380 --> 00:21:44,990
with a way and we had to do it to

00:21:42,050 --> 00:21:46,730
essentially apply stem cells with

00:21:44,990 --> 00:21:48,110
instead of recreating the machine you

00:21:46,730 --> 00:21:50,660
saved the machine and reload the

00:21:48,110 --> 00:21:53,120
operating system with a new operating

00:21:50,660 --> 00:21:56,360
system and that allows you to

00:21:53,120 --> 00:21:59,720
essentially update all your nodes much

00:21:56,360 --> 00:22:02,620
faster so of course it means that you

00:21:59,720 --> 00:22:07,100
have to change your CPI and it's this

00:22:02,620 --> 00:22:09,440
specific you know addition to the CPI at

00:22:07,100 --> 00:22:12,470
first this looked like a bad idea

00:22:09,440 --> 00:22:16,790
lots of this question with our Russian

00:22:12,470 --> 00:22:18,890
friend in other people and now it looks

00:22:16,790 --> 00:22:21,260
like maybe it's a good idea and there's

00:22:18,890 --> 00:22:23,270
other reason for it also because if you

00:22:21,260 --> 00:22:25,550
add disk with a lot of data you can

00:22:23,270 --> 00:22:27,410
actually keep that data you don't have

00:22:25,550 --> 00:22:30,380
to reload it so it has some advantages

00:22:27,410 --> 00:22:32,480
from that perspective so there is a

00:22:30,380 --> 00:22:35,330
track actually right now when Dimitri's

00:22:32,480 --> 00:22:37,160
backlog to essentially allow this have

00:22:35,330 --> 00:22:38,750
that as a first-class feature to

00:22:37,160 --> 00:22:41,360
essentially allow reloading over the OS

00:22:38,750 --> 00:22:42,260
and that helps us significantly now we

00:22:41,360 --> 00:22:44,420
do it

00:22:42,260 --> 00:22:46,550
independently of that feature because we

00:22:44,420 --> 00:22:49,220
do it in the CPI but hopefully it will

00:22:46,550 --> 00:22:50,870
be more of a broad feature and hopefully

00:22:49,220 --> 00:22:52,520
it will help with that but definitely

00:22:50,870 --> 00:22:57,950
helped us without that we probably

00:22:52,520 --> 00:23:01,730
wouldn't be able to scale bloomix number

00:22:57,950 --> 00:23:05,930
three much port deployment de Santiago

00:23:01,730 --> 00:23:08,090
Peru so this is one that I'm sort of new

00:23:05,930 --> 00:23:09,890
to and we haven't applied this but I

00:23:08,090 --> 00:23:12,980
figured it's a lessons learned because

00:23:09,890 --> 00:23:16,520
we need it and essentially so the issue

00:23:12,980 --> 00:23:19,040
is that you can start with one boss

00:23:16,520 --> 00:23:20,990
director one deployment and then go it

00:23:19,040 --> 00:23:23,090
keep getting it bigger and bigger and

00:23:20,990 --> 00:23:26,210
bigger and bigger right and that works

00:23:23,090 --> 00:23:31,400
but obviously it leads to some level of

00:23:26,210 --> 00:23:34,880
bottleneck and while it's easy it is

00:23:31,400 --> 00:23:39,970
going to slow your growth so one of the

00:23:34,880 --> 00:23:43,490
things that I found out and I'll credit

00:23:39,970 --> 00:23:46,000
decay again is that you can do multiple

00:23:43,490 --> 00:23:48,200
deployment and actually even a single

00:23:46,000 --> 00:23:51,230
environment you can divide it into

00:23:48,200 --> 00:23:54,110
smaller pieces so in our case for

00:23:51,230 --> 00:23:56,120
instance we have thousands of you know

00:23:54,110 --> 00:23:58,730
nodes that are just running the apps the

00:23:56,120 --> 00:24:00,920
DA's or when you know you're looking at

00:23:58,730 --> 00:24:03,200
Diego the cell reps so if you have

00:24:00,920 --> 00:24:06,110
thousands of those and you want to kind

00:24:03,200 --> 00:24:09,230
of divide them into smaller pieces so

00:24:06,110 --> 00:24:11,660
that way you can try new updates on

00:24:09,230 --> 00:24:13,760
those independently of the whole and

00:24:11,660 --> 00:24:15,320
that helps you significantly because

00:24:13,760 --> 00:24:17,900
that way when you're doing a Bosch

00:24:15,320 --> 00:24:20,300
update you can kind of piecemeal update

00:24:17,900 --> 00:24:23,750
it now obviously it's not gonna slow

00:24:20,300 --> 00:24:26,480
it's not gonna require less time than

00:24:23,750 --> 00:24:29,120
the overall Bosch update that you would

00:24:26,480 --> 00:24:30,740
normally do but you can be it would be

00:24:29,120 --> 00:24:34,580
more manageable now I'm pretty much

00:24:30,740 --> 00:24:37,730
repeating what Dimitri and I and Fabio

00:24:34,580 --> 00:24:39,950
discussed yesterday but that's certainly

00:24:37,730 --> 00:24:42,220
something that we're considering so

00:24:39,950 --> 00:24:42,220
didn't

00:24:43,609 --> 00:24:48,979
I'm not sure we haven't applied that so

00:24:45,889 --> 00:24:50,809
let's be fair about this I'm mentioning

00:24:48,979 --> 00:24:54,439
it because I feel like it's something we

00:24:50,809 --> 00:24:55,999
should have done early on but from a

00:24:54,439 --> 00:24:57,919
computer science perspective is simple I

00:24:55,999 --> 00:25:00,499
this divide and conquer you know don't

00:24:57,919 --> 00:25:02,689
let something go so big that you know it

00:25:00,499 --> 00:25:04,849
becomes difficult to manage break it

00:25:02,689 --> 00:25:20,059
into small pieces and Bosch has that and

00:25:04,849 --> 00:25:22,309
that's the important right right it's

00:25:20,059 --> 00:25:25,339
definitely breaking down your deployment

00:25:22,309 --> 00:25:27,019
into multiple so using what I call multi

00:25:25,339 --> 00:25:29,239
Bosch deployment but maybe there's a

00:25:27,019 --> 00:25:31,909
better term for it like multi like

00:25:29,239 --> 00:25:33,619
release deployment or multi manifest

00:25:31,909 --> 00:25:35,989
deployment I don't know but breaking

00:25:33,619 --> 00:25:40,369
down your release your deployment into

00:25:35,989 --> 00:25:43,459
smaller chunks because even if you are

00:25:40,369 --> 00:25:45,589
as is fast right let's say Amazon and

00:25:43,459 --> 00:25:47,599
you're doing one minute deployment you

00:25:45,589 --> 00:25:50,479
know like in terms of one node rolling

00:25:47,599 --> 00:25:52,849
you probably can't do more than 10 or 20

00:25:50,479 --> 00:25:54,409
at a time right you want to do a walling

00:25:52,849 --> 00:25:56,089
deployment and then you start

00:25:54,409 --> 00:25:58,099
multiplying that by the fact that things

00:25:56,089 --> 00:26:00,049
will fail probably so what do you do

00:25:58,099 --> 00:26:02,389
about that and then the fact that you're

00:26:00,049 --> 00:26:04,639
trying and your customers so you don't

00:26:02,389 --> 00:26:07,189
want to you don't want to you know break

00:26:04,639 --> 00:26:09,679
everything at once so you can see

00:26:07,189 --> 00:26:11,479
already that having smaller deployments

00:26:09,679 --> 00:26:13,789
where you can kind of like control it

00:26:11,479 --> 00:26:16,029
even if you've already tested it in a

00:26:13,789 --> 00:26:18,529
test environment helps you because it

00:26:16,029 --> 00:26:20,209
essentially reduces the risk and makes

00:26:18,529 --> 00:26:24,529
it a little bit easier to manage when

00:26:20,209 --> 00:26:26,779
there are problems exactly that's

00:26:24,529 --> 00:26:27,349
exactly right so that's why it's an idea

00:26:26,779 --> 00:26:29,119
right now

00:26:27,349 --> 00:26:31,069
in terms of the fact that we haven't

00:26:29,119 --> 00:26:33,469
done this we're in the process of

00:26:31,069 --> 00:26:35,859
looking at it but I'm sure they order

00:26:33,469 --> 00:26:40,269
people maybe if you talk to Tony outside

00:26:35,859 --> 00:26:40,269
maybe pivotal already is doing that

00:26:41,349 --> 00:26:48,289
number two 100 percent success the art

00:26:44,959 --> 00:26:50,079
health 500 back tumble all right so if I

00:26:48,289 --> 00:26:53,899
say 100 percent success you should be

00:26:50,079 --> 00:26:54,410
worried how is he able to do 100 percent

00:26:53,899 --> 00:26:57,920
success

00:26:54,410 --> 00:27:02,200
so the point is that there is never 100%

00:26:57,920 --> 00:27:04,910
sex so the reason I say this is because

00:27:02,200 --> 00:27:07,820
talking to the team especially the team

00:27:04,910 --> 00:27:09,380
from Rome and in the US and so on it

00:27:07,820 --> 00:27:11,510
becomes a cultural thing this is one

00:27:09,380 --> 00:27:14,000
probably one of the more fun ones is

00:27:11,510 --> 00:27:17,300
that it turns out that every single

00:27:14,000 --> 00:27:19,400
deploy every single update never fully

00:27:17,300 --> 00:27:21,410
success so that is never a case where

00:27:19,400 --> 00:27:24,020
you do a deploy and then you know as the

00:27:21,410 --> 00:27:28,850
system got large that at the end it went

00:27:24,020 --> 00:27:33,760
through an OU success 100% never there's

00:27:28,850 --> 00:27:39,460
always some failure somewhere so what we

00:27:33,760 --> 00:27:44,270
essentially realize is that it's okay

00:27:39,460 --> 00:27:46,760
it's okay that it fails don't feel like

00:27:44,270 --> 00:27:48,590
because it's not 100% sexual you did

00:27:46,760 --> 00:27:50,660
watch deploy in and it went through all

00:27:48,590 --> 00:27:54,680
the way to the end and everything is

00:27:50,660 --> 00:27:59,660
good it's not gonna happen when it gets

00:27:54,680 --> 00:28:01,700
big so just deal with it be happy so and

00:27:59,660 --> 00:28:04,160
the other good thing is it's still

00:28:01,700 --> 00:28:06,410
usable most of the time the deployment

00:28:04,160 --> 00:28:08,510
is actually quite usable so even though

00:28:06,410 --> 00:28:10,850
there's a failure job field the EM field

00:28:08,510 --> 00:28:13,400
created you can still continue and then

00:28:10,850 --> 00:28:16,760
we can pick it up from where we left it

00:28:13,400 --> 00:28:19,820
so the tool essentially has that

00:28:16,760 --> 00:28:23,150
built-in take advantage of it don't feel

00:28:19,820 --> 00:28:24,650
bad don't panic that's just a fact of

00:28:23,150 --> 00:28:26,480
life it's sort of like the fact of life

00:28:24,650 --> 00:28:28,490
that you know something in the cloud

00:28:26,480 --> 00:28:32,090
will fail and you just have to deal with

00:28:28,490 --> 00:28:33,830
it so design for failure right so the

00:28:32,090 --> 00:28:37,490
lessons learn is trust a tool in many

00:28:33,830 --> 00:28:41,000
ways right things will fail it never

00:28:37,490 --> 00:28:43,430
works 100% all the time at least one

00:28:41,000 --> 00:28:45,500
software now I don't know about Amazon

00:28:43,430 --> 00:28:47,210
maybe it's better but my guess is no

00:28:45,500 --> 00:28:49,580
because I've I've used Amazon in the

00:28:47,210 --> 00:28:52,790
past and I know they fail too so anyways

00:28:49,580 --> 00:28:55,300
but maybe they were better I don't is

00:28:52,790 --> 00:28:55,300
this being recorded

00:28:57,490 --> 00:29:04,310
okay number one backup detail paper

00:29:01,720 --> 00:29:07,700
alright so I left this one last as

00:29:04,310 --> 00:29:10,580
number one but it's one where most

00:29:07,700 --> 00:29:14,270
people would say obviously dummy you

00:29:10,580 --> 00:29:16,670
should back up well you know the reality

00:29:14,270 --> 00:29:19,190
is sometimes you know backups take

00:29:16,670 --> 00:29:20,750
search a long time that things fail in

00:29:19,190 --> 00:29:21,170
between those backups and what do you do

00:29:20,750 --> 00:29:25,070
about that

00:29:21,170 --> 00:29:26,600
right so this is a real case scenario

00:29:25,070 --> 00:29:30,110
that happened that involved me so I'm

00:29:26,600 --> 00:29:33,020
planning my vacation I think it was when

00:29:30,110 --> 00:29:36,350
was it last year yeah last year or on

00:29:33,020 --> 00:29:38,680
October in the middle of the night Chris

00:29:36,350 --> 00:29:42,770
Ferris calls me we need you buddy

00:29:38,680 --> 00:29:45,230
like I'm going on vacation yeah but I

00:29:42,770 --> 00:29:47,690
think it was wise II was one of the

00:29:45,230 --> 00:29:49,370
environments completely failed and then

00:29:47,690 --> 00:29:50,090
of course get on the phone before my

00:29:49,370 --> 00:29:53,440
flight

00:29:50,090 --> 00:29:54,650
turns out the director database is dead

00:29:53,440 --> 00:29:59,420
okay

00:29:54,650 --> 00:30:01,610
oh cool so more calls but I'm getting my

00:29:59,420 --> 00:30:05,090
flight so I'm on my flight Alex gets

00:30:01,610 --> 00:30:07,370
involved is here my manager then okay

00:30:05,090 --> 00:30:09,800
more calls and then they give me some

00:30:07,370 --> 00:30:12,470
synopsis of what it is so I got some log

00:30:09,800 --> 00:30:15,290
trace now of course I make sure I have

00:30:12,470 --> 00:30:18,410
my laptop all the Bush code and entering

00:30:15,290 --> 00:30:19,880
my flight I'm furiously looking to the

00:30:18,410 --> 00:30:22,460
boss code to figure out what happens and

00:30:19,880 --> 00:30:23,600
then I see in the bush agent there is a

00:30:22,460 --> 00:30:31,190
place where it

00:30:23,600 --> 00:30:33,530
formats the disks yeah and pretty clear

00:30:31,190 --> 00:30:35,510
that what's happening and I can see kind

00:30:33,530 --> 00:30:38,180
of the logic you know maybe something

00:30:35,510 --> 00:30:40,310
went wrong okay so get on the phone when

00:30:38,180 --> 00:30:43,040
I reach my midpoint I think in Dallas

00:30:40,310 --> 00:30:44,870
and you know get on the phone with a

00:30:43,040 --> 00:30:46,340
bunch of people tell them okay I see I

00:30:44,870 --> 00:30:47,960
think I know what it is

00:30:46,340 --> 00:30:49,970
I feel kind of confident that I know

00:30:47,960 --> 00:30:51,520
what it is and of course what do you do

00:30:49,970 --> 00:30:55,550
you call Demetri

00:30:51,520 --> 00:30:57,770
it's Saturday and we do it or not he's

00:30:55,550 --> 00:31:00,650
amazing like this he will pretty much

00:30:57,770 --> 00:31:02,710
help everybody so I got on the phone

00:31:00,650 --> 00:31:06,020
with him and then we go through the code

00:31:02,710 --> 00:31:08,960
and he agrees with me but he's better

00:31:06,020 --> 00:31:11,600
because he identifies the reason why

00:31:08,960 --> 00:31:14,360
it got into this code and then of course

00:31:11,600 --> 00:31:16,429
it turns out that there's some special

00:31:14,360 --> 00:31:20,779
condition where if the boss agent thinks

00:31:16,429 --> 00:31:22,990
your disk is is not properly set up it

00:31:20,779 --> 00:31:25,549
will set it up so it will just basically

00:31:22,990 --> 00:31:28,039
format it and reconfigure it and so on

00:31:25,549 --> 00:31:30,440
so that was the cause of the issue and

00:31:28,039 --> 00:31:34,610
then we found out you know going back

00:31:30,440 --> 00:31:36,260
why that that happened but the reality

00:31:34,610 --> 00:31:38,480
doesn't change right like you can

00:31:36,260 --> 00:31:39,649
identify the issue but the the patient

00:31:38,480 --> 00:31:41,510
is dead right what do you do

00:31:39,649 --> 00:31:48,980
you got to revive it that was it your

00:31:41,510 --> 00:31:50,360
case though you're good so alright I've

00:31:48,980 --> 00:31:53,120
got only a few minutes but I'll tell you

00:31:50,360 --> 00:31:55,279
the the gist of this story so I get to

00:31:53,120 --> 00:31:58,820
my vacation one week and pretty much

00:31:55,279 --> 00:32:02,149
every day we have calls and this is like

00:31:58,820 --> 00:32:04,789
you know calls with all level of the

00:32:02,149 --> 00:32:06,919
cooperation right and then even a VP

00:32:04,789 --> 00:32:08,270
you know jumps into calls every now and

00:32:06,919 --> 00:32:11,179
then to check you know what's going on

00:32:08,270 --> 00:32:13,190
anyway so every day you know we're

00:32:11,179 --> 00:32:14,690
trying to work so these guys of course

00:32:13,190 --> 00:32:17,029
you know they're working overtime

00:32:14,690 --> 00:32:19,549
because they're working at odd hours

00:32:17,029 --> 00:32:20,630
right twelve hours from well is it

00:32:19,549 --> 00:32:24,649
twelve hours something like this from

00:32:20,630 --> 00:32:26,299
here so it turns out what ended up

00:32:24,649 --> 00:32:29,000
happening is we lost the disk where the

00:32:26,299 --> 00:32:31,970
director databases we have zero backup

00:32:29,000 --> 00:32:33,860
and the deployment is live customers are

00:32:31,970 --> 00:32:36,080
using it but we don't have a budget

00:32:33,860 --> 00:32:37,490
director talking to it so and we can't

00:32:36,080 --> 00:32:39,470
do anything to that deployment is just

00:32:37,490 --> 00:32:42,470
alive but anything happens to it we

00:32:39,470 --> 00:32:44,929
can't use boss so we have to figure out

00:32:42,470 --> 00:32:51,470
a way to recreate the director right and

00:32:44,929 --> 00:32:53,120
recreate the database yeah so I told you

00:32:51,470 --> 00:32:56,510
all the bad things there's a good thing

00:32:53,120 --> 00:32:58,549
in there so good thing and I'll tell you

00:32:56,510 --> 00:33:00,440
what we did because it's sort of lessons

00:32:58,549 --> 00:33:03,950
learned but a good thing here is there

00:33:00,440 --> 00:33:07,010
is a backup it existed even at the time

00:33:03,950 --> 00:33:09,950
when we did when this happened but it

00:33:07,010 --> 00:33:13,669
wasn't very fast so that prevented us

00:33:09,950 --> 00:33:15,620
from using it so we've sense and I think

00:33:13,669 --> 00:33:17,779
the Bosch team in general since improved

00:33:15,620 --> 00:33:19,490
it so now if you use a bunch backup it

00:33:17,779 --> 00:33:21,860
would actually do a backup and it's much

00:33:19,490 --> 00:33:22,880
faster because I think it does it avoids

00:33:21,860 --> 00:33:27,620
doing the blobstore

00:33:22,880 --> 00:33:29,960
which kind of slowed it down before the

00:33:27,620 --> 00:33:31,430
other thing is a lot of I have snapshots

00:33:29,960 --> 00:33:33,290
of discs so you should definitely

00:33:31,430 --> 00:33:34,940
consider that in talking to Tony for

00:33:33,290 --> 00:33:37,550
instance I know that pivotal does

00:33:34,940 --> 00:33:39,080
snapshots because they use a lot AWS and

00:33:37,550 --> 00:33:41,030
that has really good snapshots so you

00:33:39,080 --> 00:33:43,010
want to consider using whatever the eye

00:33:41,030 --> 00:33:44,570
has provides if there's a way to do

00:33:43,010 --> 00:33:47,630
backup so that could be additional in

00:33:44,570 --> 00:33:49,220
from additional backup that track but

00:33:47,630 --> 00:33:52,070
the lessons learn is in addition to

00:33:49,220 --> 00:33:54,200
backup which you should always do

00:33:52,070 --> 00:33:56,060
including your phone and everything else

00:33:54,200 --> 00:34:00,110
that you have right all the data job you

00:33:56,060 --> 00:34:02,990
should back it up is the notion of a

00:34:00,110 --> 00:34:05,780
dummy CPI so the guy in China the guys

00:34:02,990 --> 00:34:08,180
in China and the team we figured out the

00:34:05,780 --> 00:34:12,440
way we can reconstruct the database is

00:34:08,180 --> 00:34:15,050
to replay a deployment and then instead

00:34:12,440 --> 00:34:16,910
of replaying a real deployment where

00:34:15,050 --> 00:34:18,830
we're creating VMs anew and we're

00:34:16,910 --> 00:34:21,350
creating discs on you we're just really

00:34:18,830 --> 00:34:24,680
populating your database and that's what

00:34:21,350 --> 00:34:27,200
we did so we reconstructed the director

00:34:24,680 --> 00:34:29,540
database that way so I would highly

00:34:27,200 --> 00:34:32,000
recommend this at some point to be I

00:34:29,540 --> 00:34:34,910
don't know I have to talk to Dmitri and

00:34:32,000 --> 00:34:37,520
see if it's interesting enough for us to

00:34:34,910 --> 00:34:41,180
contribute that and certainly it's not

00:34:37,520 --> 00:34:43,310
it maybe I have specific also so maybe

00:34:41,180 --> 00:34:47,270
it doesn't make sense but that's our

00:34:43,310 --> 00:34:49,850
only an idea an approach that works for

00:34:47,270 --> 00:34:51,590
us as I said I put it as number one

00:34:49,850 --> 00:34:54,670
because it's the most catastrophic and

00:34:51,590 --> 00:34:57,410
it's only impacted me directly to most

00:34:54,670 --> 00:34:58,940
but hopefully some it's one that you'd

00:34:57,410 --> 00:35:00,680
never have to do because you should all

00:34:58,940 --> 00:35:04,550
be backing up all right like everybody

00:35:00,680 --> 00:35:06,440
shake your heads all right with that I

00:35:04,550 --> 00:35:08,430
want to thank you and then we'll may

00:35:06,440 --> 00:35:13,900
have sometimes some questions

00:35:08,430 --> 00:35:13,900
[Applause]

00:35:14,990 --> 00:35:18,630
we have time for questions

00:35:17,010 --> 00:35:20,940
here's where we have to work as a team

00:35:18,630 --> 00:35:28,320
we need sufficient questions to cover

00:35:20,940 --> 00:35:35,100
until I can find the next speaker plenty

00:35:28,320 --> 00:35:36,390
of questions please we can do Matt may

00:35:35,100 --> 00:35:37,410
finish with the lightning talks later on

00:35:36,390 --> 00:35:46,370
that's our plan

00:35:37,410 --> 00:35:46,370
Google any questions ah

00:36:00,660 --> 00:36:05,890
well yeah you'd probably want to have

00:36:03,400 --> 00:36:08,650
one part of it that's deploying the CCE

00:36:05,890 --> 00:36:10,270
and all the different pieces that are

00:36:08,650 --> 00:36:12,580
important and the things that you have

00:36:10,270 --> 00:36:14,590
to have multiple versions of like things

00:36:12,580 --> 00:36:17,860
like the workers essentially and you

00:36:14,590 --> 00:36:20,260
know yeah because I can uh when we look

00:36:17,860 --> 00:36:24,310
at you know bluemix and i say we have

00:36:20,260 --> 00:36:29,970
thousand nodes I mean nine hundred odd

00:36:24,310 --> 00:36:29,970
is just da nodes or Diego Natori

00:36:41,580 --> 00:36:58,270
the deployment that's right and that's I

00:36:53,620 --> 00:37:00,850
guess part of it also is is strategizing

00:36:58,270 --> 00:37:03,070
for that right because what ends up

00:37:00,850 --> 00:37:05,830
happening is you feel very confident

00:37:03,070 --> 00:37:07,030
with one big file with your entire

00:37:05,830 --> 00:37:08,560
deployment they keep doing it and you

00:37:07,030 --> 00:37:09,940
kept going and it equal as it goes

00:37:08,560 --> 00:37:11,290
because it's easy right you just

00:37:09,940 --> 00:37:13,660
increase the number and then you're

00:37:11,290 --> 00:37:17,020
happy but that leads you into a state

00:37:13,660 --> 00:37:19,030
where you know like we we are right now

00:37:17,020 --> 00:37:20,590
with some of our deployments where we

00:37:19,030 --> 00:37:24,450
definitely have to break it down because

00:37:20,590 --> 00:37:30,640
it's not it's not manageable anymore oh

00:37:24,450 --> 00:37:34,330
by the way yeah you can't do anything

00:37:30,640 --> 00:37:37,180
that's right yeah well we should

00:37:34,330 --> 00:37:40,180
definitely raise that where is Demetri

00:37:37,180 --> 00:37:42,040
is he here somewhere all right I saw him

00:37:40,180 --> 00:37:43,570
outside but we should definitely raise

00:37:42,040 --> 00:37:46,030
that because I think part of the issue

00:37:43,570 --> 00:37:48,040
is that you essentially when you're

00:37:46,030 --> 00:37:49,840
doing an update for instance you can't

00:37:48,040 --> 00:37:53,680
do anything else now you could stop it

00:37:49,840 --> 00:37:56,650
and then you know resume but you know

00:37:53,680 --> 00:38:00,300
that's that's the reality and for and I

00:37:56,650 --> 00:38:02,530
guess for I as that or super super fast

00:38:00,300 --> 00:38:04,990
maybe that's not an issue but for us

00:38:02,530 --> 00:38:07,860
it's an issue definitely because it

00:38:04,990 --> 00:38:11,440
takes like we did an update to London

00:38:07,860 --> 00:38:13,900
deployment and it took more than 18

00:38:11,440 --> 00:38:15,310
hours to go to it now it's a large

00:38:13,900 --> 00:38:20,740
deployment like I said I mean we have

00:38:15,310 --> 00:38:23,520
the largest deployments I think so yeah

00:38:20,740 --> 00:38:23,520
Amit

00:38:26,960 --> 00:38:37,130
I think part of it is to deal with what

00:38:34,880 --> 00:38:39,290
you know I think what dr. Nick mentioned

00:38:37,130 --> 00:38:41,900
which is like you do Canary deployments

00:38:39,290 --> 00:38:44,030
for single deployments to make sure that

00:38:41,900 --> 00:38:45,859
when you're applying something there's a

00:38:44,030 --> 00:38:47,750
canary in the coal mine that will tell

00:38:45,859 --> 00:38:49,790
you something goes wrong and I think

00:38:47,750 --> 00:38:52,520
when you have such large you know like

00:38:49,790 --> 00:38:53,960
so if each one of your node our

00:38:52,520 --> 00:38:55,490
deployments much bigger than that so

00:38:53,960 --> 00:38:58,369
imagine if I have to give a secret to

00:38:55,490 --> 00:39:00,200
each one of you right the challenge of

00:38:58,369 --> 00:39:02,210
making sure that you got the secret

00:39:00,200 --> 00:39:05,150
correctly so if I divide you into

00:39:02,210 --> 00:39:08,060
smaller teams then I can give that seam

00:39:05,150 --> 00:39:09,890
the secret and then I can put entity in

00:39:08,060 --> 00:39:11,270
parallel have Matt give the team the

00:39:09,890 --> 00:39:23,270
other team a secret and we can kind of

00:39:11,270 --> 00:39:25,790
roll it out so it's not the network

00:39:23,270 --> 00:39:28,040
election no network connection is not

00:39:25,790 --> 00:39:31,040
the impact here just it takes time to

00:39:28,040 --> 00:39:33,200
take each one of them put them down go

00:39:31,040 --> 00:39:35,930
to the process we creating reloading

00:39:33,200 --> 00:39:37,940
applying stem cell restarting jobs

00:39:35,930 --> 00:39:40,250
everything you've ever done a botched

00:39:37,940 --> 00:39:42,230
deployment that is non-trivial it takes

00:39:40,250 --> 00:39:44,300
time I mean it you know you could see

00:39:42,230 --> 00:39:46,220
right Maria I was doing a relatively

00:39:44,300 --> 00:39:49,550
simple one it took some time now if you

00:39:46,220 --> 00:39:52,400
apply if you increase it right by

00:39:49,550 --> 00:39:55,089
typical CF deployment and in a live

00:39:52,400 --> 00:39:57,530
production deployment it just takes time

00:39:55,089 --> 00:39:59,690
the good thing is the tool works by the

00:39:57,530 --> 00:40:02,089
way so Bosch will keep doing it stuff

00:39:59,690 --> 00:40:04,510
and you know just need to kind of

00:40:02,089 --> 00:40:04,510
monitor it

00:40:09,890 --> 00:40:17,130
of course we you see I even use

00:40:12,920 --> 00:40:19,470
concourse a lot I think

00:40:17,130 --> 00:40:23,250
the frequency of updates for us is a

00:40:19,470 --> 00:40:24,570
little bit slower than pivotal I because

00:40:23,250 --> 00:40:27,720
I those are the two environments that I

00:40:24,570 --> 00:40:30,030
know I mean not that I know

00:40:27,720 --> 00:40:32,220
pivotal details but since I spend a lot

00:40:30,030 --> 00:40:38,190
of time there you know public

00:40:32,220 --> 00:40:43,860
information I know I would say we try to

00:40:38,190 --> 00:40:47,880
deploy as frequently as we can based on

00:40:43,860 --> 00:40:50,430
you know making sure that whatever got

00:40:47,880 --> 00:40:52,560
released so I know CF gets release every

00:40:50,430 --> 00:40:54,900
week and then Bosh has some kind of a

00:40:52,560 --> 00:40:57,480
cycle we don't we're not in the bleeding

00:40:54,900 --> 00:40:59,220
edge but there are other environments

00:40:57,480 --> 00:41:01,800
inside IBM that are in the bleeding edge

00:40:59,220 --> 00:41:04,290
and then those are typically test

00:41:01,800 --> 00:41:05,730
environments and then those depending on

00:41:04,290 --> 00:41:07,410
what happened there then we migrate

00:41:05,730 --> 00:41:09,150
because as I mentioned to you we have

00:41:07,410 --> 00:41:10,920
lots of different custom software so we

00:41:09,150 --> 00:41:13,170
have additional releases that we have to

00:41:10,920 --> 00:41:19,350
test so making sure that those work well

00:41:13,170 --> 00:41:19,860
and so on maybe one more yeah okay one

00:41:19,350 --> 00:41:23,210
more question

00:41:19,860 --> 00:41:23,210
make it good yeah

00:41:28,810 --> 00:41:34,310
that's a good question I think at first

00:41:31,520 --> 00:41:37,100
we made the mistake of not necessarily

00:41:34,310 --> 00:41:39,830
requiring and now it's a huge mistake

00:41:37,100 --> 00:41:41,900
because now we are stuck with lots of

00:41:39,830 --> 00:41:43,910
release not lots of services that are

00:41:41,900 --> 00:41:45,680
not Russia fide and we're going to the

00:41:43,910 --> 00:41:51,320
process of but you find them now because

00:41:45,680 --> 00:41:53,900
we have so many 500 I think it's fair to

00:41:51,320 --> 00:41:55,820
say that there's a there's a significant

00:41:53,900 --> 00:41:57,680
number that already basha fide and we're

00:41:55,820 --> 00:41:59,600
doing quite well but some that or not

00:41:57,680 --> 00:42:02,210
and we have to go to the process so I

00:41:59,600 --> 00:42:18,440
would say we got work to do from that

00:42:02,210 --> 00:42:21,290
perspective nothing that I can talk

00:42:18,440 --> 00:42:23,420
about I mean I don't want to make this a

00:42:21,290 --> 00:42:24,560
sales pitch I'm like a doctor Nick was

00:42:23,420 --> 00:42:26,810
mentioning there's tons of different

00:42:24,560 --> 00:42:28,490
tools I mean certainly if you're an IBM

00:42:26,810 --> 00:42:31,670
customer then you should just ask about

00:42:28,490 --> 00:42:34,910
that but generally you're right you know

00:42:31,670 --> 00:42:37,040
that you start feeling it very quickly

00:42:34,910 --> 00:42:39,650
and then figuring out what the solution

00:42:37,040 --> 00:42:41,690
is you know it can be difficult it would

00:42:39,650 --> 00:42:43,880
be better to use a solution that already

00:42:41,690 --> 00:42:47,119
people are using and maintaining and

00:42:43,880 --> 00:42:49,280
works with CF and so on but as far as I

00:42:47,119 --> 00:42:52,700
know I'm not sure if it's you could say

00:42:49,280 --> 00:42:53,960
offering at this point thank you

00:42:52,700 --> 00:42:58,749
everybody very much

00:42:53,960 --> 00:42:58,749

YouTube URL: https://www.youtube.com/watch?v=S-Rr4UlnPvU


