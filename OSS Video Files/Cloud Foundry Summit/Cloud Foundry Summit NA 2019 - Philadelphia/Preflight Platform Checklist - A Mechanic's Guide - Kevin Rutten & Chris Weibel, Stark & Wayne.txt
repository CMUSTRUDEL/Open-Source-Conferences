Title: Preflight Platform Checklist - A Mechanic's Guide - Kevin Rutten & Chris Weibel, Stark & Wayne
Publication date: 2019-04-11
Playlist: Cloud Foundry Summit NA 2019 - Philadelphia
Description: 
	Preflight Platform Checklist - A Mechanic's Guide - Kevin Rutten & Chris Weibel, Stark & Wayne

Before you can deploy BOSH and Cloud Foundry to let your company fly, there are still many little steps to take. Do you have the credentials to your IaaS yet? Do you even know what resources you can use? Firewall rules, datastores, architectures. Kevin and Chris will help guide you through the preflight checklist you need to let Cloud Foundry deploy and take off. Build the painless Future for deploying.

About Kevin Rutten
Kevin Rutten is an Electrical Engineering Technologist and Cloud Engineer in Canada. He has worked with everything from 8-bit microprocessors to setting up new Data Centers. He is currently working at Stark & Wayne developing the tools to streamline the deployment and maintenance of BOSH and Cloud Foundry components. Kevin has worked with large companies on their deployment pipelines and backup solutions. Kevin also works on OSS projects such as SHIELD, Codex, and Genesis.

About Chris Weibel
Chris Weibel is a Engineer Team Lead at Stark & Wayne and has worked on several projects including SHIELD & RDPG. The last five years have been spent helping deploy and maintain Cloud Foundry. A former DBA, SAN administrator, and developer in the regulated banking, utilities and healthcare industries, he has focused on discovering what DevOps needs to make their lives easier from several perspectives. He is a regular meetup speaker at Buffalo Lab's Database Seminars.

https://www.cloudfoundry.org/
Captions: 
	00:00:00,060 --> 00:00:04,950
ladies and gentlemen it is now 335 p.m.

00:00:03,110 --> 00:00:06,720
fortunately this year we don't have any

00:00:04,950 --> 00:00:08,700
exit' instructions but in case you do

00:00:06,720 --> 00:00:10,530
it's the same door you came in on

00:00:08,700 --> 00:00:12,269
so welcome ladies gentlemen of the

00:00:10,530 --> 00:00:14,040
pre-flight platform checklist

00:00:12,269 --> 00:00:15,660
presentation you're here for the

00:00:14,040 --> 00:00:18,770
Doomsday presentation that's next door

00:00:15,660 --> 00:00:23,730
go see that one

00:00:18,770 --> 00:00:24,240
hey don't exhale so myself I'm Chris

00:00:23,730 --> 00:00:26,490
Bible

00:00:24,240 --> 00:00:27,689
this is mr. Kavon rotten both work for a

00:00:26,490 --> 00:00:29,250
local company called Stark and Wayne

00:00:27,689 --> 00:00:34,230
where all the idiots running around the

00:00:29,250 --> 00:00:37,140
blue shirts and the main what is that

00:00:34,230 --> 00:00:39,540
thing called the hub the foundry thank

00:00:37,140 --> 00:00:42,149
you it's down there come visit us got

00:00:39,540 --> 00:00:44,969
any questions after this so I want to

00:00:42,149 --> 00:00:47,550
start out by again introducing myself

00:00:44,969 --> 00:00:49,710
Chris Weibull our talk today is

00:00:47,550 --> 00:00:52,649
primarily about the lessons learned from

00:00:49,710 --> 00:00:56,610
deploying Bosch and cloud foundry

00:00:52,649 --> 00:01:00,660
this is my sixth CF summit talk not talk

00:00:56,610 --> 00:01:03,629
six time I've come to CF summit so in

00:01:00,660 --> 00:01:06,080
that time we have seen a lot of ways of

00:01:03,629 --> 00:01:10,560
breaking Bosch breaking cloud foundry

00:01:06,080 --> 00:01:16,740
fixing breaking fixing breaking usually

00:01:10,560 --> 00:01:18,270
in production so back when we started

00:01:16,740 --> 00:01:21,000
all of this the documentation around

00:01:18,270 --> 00:01:22,590
cloud foundry and getting Bosh going

00:01:21,000 --> 00:01:24,720
it's not exactly the most thorough thing

00:01:22,590 --> 00:01:28,920
in the world there's a small treasure

00:01:24,720 --> 00:01:30,840
trove of carefully curated manifests to

00:01:28,920 --> 00:01:33,600
get cloud foundry going there's some

00:01:30,840 --> 00:01:35,549
Google Docs that even until recently

00:01:33,600 --> 00:01:37,880
didn't having a lot of additions to and

00:01:35,549 --> 00:01:40,890
there were read means that quickly

00:01:37,880 --> 00:01:42,210
became outdated with every new version

00:01:40,890 --> 00:01:45,570
of cloud foundry and bars that came out

00:01:42,210 --> 00:01:47,520
there let's face it it was a small

00:01:45,570 --> 00:01:50,060
miracle back then just to get cloud

00:01:47,520 --> 00:01:53,210
foundry runyan for the very first time

00:01:50,060 --> 00:01:53,210
yes sir

00:01:54,840 --> 00:01:59,380
this is me trying to go through my

00:01:57,280 --> 00:02:01,390
speaker notes that are a little longer

00:01:59,380 --> 00:02:07,930
than I was hoping they were I'm getting

00:02:01,390 --> 00:02:10,090
to this I price so you know in this in

00:02:07,930 --> 00:02:11,980
the subsequent years there have been a

00:02:10,090 --> 00:02:13,390
great number of resources that are now

00:02:11,980 --> 00:02:16,810
available to us that weren't always

00:02:13,390 --> 00:02:18,970
there I want to put out a special thank

00:02:16,810 --> 00:02:21,940
you to the docks at Cloud Foundry org

00:02:18,970 --> 00:02:24,760
folks done a phenomenal job so anybody

00:02:21,940 --> 00:02:28,030
that has contributed you to that I thank

00:02:24,760 --> 00:02:31,420
you now open some of you are here if not

00:02:28,030 --> 00:02:37,150
that's been a great value to us Kevin

00:02:31,420 --> 00:02:38,560
please click the next slide so which

00:02:37,150 --> 00:02:41,019
brings us to the talk that we have here

00:02:38,560 --> 00:02:42,850
today the docks out there are great but

00:02:41,019 --> 00:02:45,850
there are still a lot of sharp edge

00:02:42,850 --> 00:02:47,380
cases that are out there so for all of

00:02:45,850 --> 00:02:49,870
the bits and pieces that may have fallen

00:02:47,380 --> 00:02:52,950
off the end give you mr. Kevin rotten

00:02:49,870 --> 00:02:55,780
thank you very much thank you Chris so

00:02:52,950 --> 00:02:57,940
we're gonna break this into three

00:02:55,780 --> 00:03:00,750
sections we're going to start with the

00:02:57,940 --> 00:03:04,180
people and then move on to the ayahs and

00:03:00,750 --> 00:03:06,850
save the fun networking for last and in

00:03:04,180 --> 00:03:08,500
all of them there are a lot of big

00:03:06,850 --> 00:03:09,690
gacho's that we're going to be going

00:03:08,500 --> 00:03:11,470
through

00:03:09,690 --> 00:03:13,959
hopefully we'll highlight to come

00:03:11,470 --> 00:03:16,480
pitfalls that you may stall that may

00:03:13,959 --> 00:03:20,350
stall your project so actually why

00:03:16,480 --> 00:03:22,450
people first the first draft we wrote of

00:03:20,350 --> 00:03:24,850
this talk we had you know ayahs and

00:03:22,450 --> 00:03:28,320
networking first because that's the

00:03:24,850 --> 00:03:31,150
obvious thing but there's a lot of

00:03:28,320 --> 00:03:33,579
conversations in real life you're going

00:03:31,150 --> 00:03:36,790
to be talking to the people on your team

00:03:33,579 --> 00:03:37,810
and making these decisions and that's

00:03:36,790 --> 00:03:48,390
actually where we're going to start our

00:03:37,810 --> 00:03:51,400
story so you need to set expectations

00:03:48,390 --> 00:03:54,220
early on so we're going to start with

00:03:51,400 --> 00:03:56,769
just one that seems to be avoided in

00:03:54,220 --> 00:04:00,220
every conversation that that we talked

00:03:56,769 --> 00:04:02,099
to when where and how are you going to

00:04:00,220 --> 00:04:04,980
maintain cloud foundry

00:04:02,099 --> 00:04:06,870
once it's up and running and so when

00:04:04,980 --> 00:04:09,650
you're basically talking to the

00:04:06,870 --> 00:04:12,799
stakeholders and managers all the teams

00:04:09,650 --> 00:04:14,670
please have this talk and figure out

00:04:12,799 --> 00:04:16,859
when can you have a maintenance window

00:04:14,670 --> 00:04:19,829
when can we do the rolling stem-cell

00:04:16,859 --> 00:04:23,419
upgrades if you don't have this talk

00:04:19,829 --> 00:04:29,120
early and have buying and agreement your

00:04:23,419 --> 00:04:31,770
foundations going to be Jurassic and

00:04:29,120 --> 00:04:34,500
sometimes you just need to make sure you

00:04:31,770 --> 00:04:37,340
have some quiet time most of the rolling

00:04:34,500 --> 00:04:40,169
restarts are painless and unnoticed

00:04:37,340 --> 00:04:45,560
so that might give them a little bit of

00:04:40,169 --> 00:04:50,370
a 1:30 feeling but have this talk so

00:04:45,560 --> 00:04:52,620
unlike the photo backups are good you

00:04:50,370 --> 00:04:56,280
need to decide what you want to back up

00:04:52,620 --> 00:04:57,570
and you know normally things like you

00:04:56,280 --> 00:04:58,500
backing up the database and you're

00:04:57,570 --> 00:05:01,289
backing up the blobstore

00:04:58,500 --> 00:05:03,270
doesn't have to be that complicated for

00:05:01,289 --> 00:05:07,349
some foundations you can simply use the

00:05:03,270 --> 00:05:10,560
API to scrape all the users or spaces

00:05:07,349 --> 00:05:13,470
and quotas and if you have proper

00:05:10,560 --> 00:05:16,349
pipelining all us good developers do

00:05:13,470 --> 00:05:19,349
that right then if you have to store

00:05:16,349 --> 00:05:22,620
Cloud Foundry boo the backup again

00:05:19,349 --> 00:05:26,310
deploy it create all the orcs and spaces

00:05:22,620 --> 00:05:28,259
push all your apps again but without a

00:05:26,310 --> 00:05:31,530
back-up plan your production environment

00:05:28,259 --> 00:05:34,860
is basically a proof-of-concept first

00:05:31,530 --> 00:05:37,320
time you run into trouble you're kind of

00:05:34,860 --> 00:05:40,110
hosed you don't have any history or

00:05:37,320 --> 00:05:42,780
audit someone's gonna ask hey what was

00:05:40,110 --> 00:05:45,630
it app that was deployed before it went

00:05:42,780 --> 00:05:48,419
down or where the assets you're kind of

00:05:45,630 --> 00:05:52,039
stuck so decide what you want to backup

00:05:48,419 --> 00:05:54,509
and where and how long and this is

00:05:52,039 --> 00:05:57,479
immuno have these discussions before you

00:05:54,509 --> 00:05:58,979
even start once you're deployed it you

00:05:57,479 --> 00:06:00,599
may not have a place to do the backups

00:05:58,979 --> 00:06:02,699
and you're not doing backups and then

00:06:00,599 --> 00:06:06,270
you're gonna run to problems get your

00:06:02,699 --> 00:06:08,729
backups running day one you deploy it do

00:06:06,270 --> 00:06:10,949
a backup on an empty foundation it is

00:06:08,729 --> 00:06:13,469
really fast once you've got the backup

00:06:10,949 --> 00:06:15,569
started then as you start adding stuff

00:06:13,469 --> 00:06:17,520
you don't have to worry about you know

00:06:15,569 --> 00:06:20,309
months down the road oh geez we have to

00:06:17,520 --> 00:06:24,449
get backups going we have you know other

00:06:20,309 --> 00:06:26,699
talks going on the shield project the

00:06:24,449 --> 00:06:32,309
boss backup and restore there's lots of

00:06:26,699 --> 00:06:35,339
ways into it and well I said get your

00:06:32,309 --> 00:06:38,339
backups done day one that's also a good

00:06:35,339 --> 00:06:41,249
time to consider doing a restore you do

00:06:38,339 --> 00:06:44,999
a backup push a few apps in do restore

00:06:41,249 --> 00:06:47,490
if you've never tested your backups you

00:06:44,999 --> 00:06:53,879
have binary data you might not actually

00:06:47,490 --> 00:06:55,529
have backups so when you're deploying

00:06:53,879 --> 00:06:57,599
your Cloud Foundry you've got some

00:06:55,529 --> 00:06:59,189
choices you can make all right do you

00:06:57,599 --> 00:07:01,229
have an internal or external DB do you

00:06:59,189 --> 00:07:04,520
have an internal or external blobstore

00:07:01,229 --> 00:07:08,999
and there are some pros and cons to each

00:07:04,520 --> 00:07:11,999
the internal blob storing database built

00:07:08,999 --> 00:07:14,580
into Cloud Foundry very well tested very

00:07:11,999 --> 00:07:17,069
well integrated when you are tearing

00:07:14,580 --> 00:07:19,110
down Cloud Foundry everything is deleted

00:07:17,069 --> 00:07:22,229
persistent disk are gone everything's

00:07:19,110 --> 00:07:23,759
cleaned up but the external ones a

00:07:22,229 --> 00:07:27,449
little bit more work you've got some

00:07:23,759 --> 00:07:29,669
huge advantages if all your data stored

00:07:27,449 --> 00:07:31,259
in external blob stores and I can old

00:07:29,669 --> 00:07:33,629
databases you can actually tear down

00:07:31,259 --> 00:07:36,089
your Cloud Foundry and deploy back up

00:07:33,629 --> 00:07:37,829
again database is still intact blob

00:07:36,089 --> 00:07:40,379
store is still intact everything will

00:07:37,829 --> 00:07:41,990
come back up again so that makes a big

00:07:40,379 --> 00:07:45,509
difference in your backup story is

00:07:41,990 --> 00:07:48,479
whether or not when you're doing any

00:07:45,509 --> 00:07:50,819
maintenance or you know disaster

00:07:48,479 --> 00:07:52,469
recovery did you have to backup your

00:07:50,819 --> 00:07:54,629
blob store manually if you're using I

00:07:52,469 --> 00:07:58,050
say f3 and it's replicated across

00:07:54,629 --> 00:07:59,369
regions well then you may not have to

00:07:58,050 --> 00:08:05,969
back up your blob door which could be

00:07:59,369 --> 00:08:08,369
gigabytes of data terabytes of data so

00:08:05,969 --> 00:08:09,269
one of the things to also remember and

00:08:08,369 --> 00:08:11,969
it's gonna be a little bit different

00:08:09,269 --> 00:08:16,169
backup your credential store your credit

00:08:11,969 --> 00:08:17,219
out of your vault backing it up is is

00:08:16,169 --> 00:08:18,599
something you have to talk to your

00:08:17,219 --> 00:08:20,999
security team about because it's gonna

00:08:18,599 --> 00:08:23,610
be done a little bit differently but I

00:08:20,999 --> 00:08:26,579
like to actually back it up and take

00:08:23,610 --> 00:08:28,199
incrementals because sometimes when

00:08:26,579 --> 00:08:29,490
you're doing restore and you need the

00:08:28,199 --> 00:08:32,849
credentials point

00:08:29,490 --> 00:08:35,099
and you can go to your backup list and

00:08:32,849 --> 00:08:37,740
we store that backup and boom you have a

00:08:35,099 --> 00:08:41,339
state to time to know which credentials

00:08:37,740 --> 00:08:43,140
you are using you have in real quick one

00:08:41,339 --> 00:08:44,339
thing I want to point out is forget it's

00:08:43,140 --> 00:08:48,420
either you AAA or the credit hub

00:08:44,339 --> 00:08:51,510
database sorry you AAA or CCD be the

00:08:48,420 --> 00:08:53,250
encryption for that particular database

00:08:51,510 --> 00:08:54,899
is stored in cred hub so if you're

00:08:53,250 --> 00:08:57,089
backing up your your cloud controller

00:08:54,899 --> 00:08:58,709
new a databases and you go to restore

00:08:57,089 --> 00:09:00,870
them to a new environment

00:08:58,709 --> 00:09:02,730
but you regenerated your cred hub

00:09:00,870 --> 00:09:05,670
variables you're not gonna be able to

00:09:02,730 --> 00:09:07,260
read that old data so make sure you're

00:09:05,670 --> 00:09:07,950
backing up all of the databases that

00:09:07,260 --> 00:09:12,390
you've got there

00:09:07,950 --> 00:09:13,950
thank you you basically you know the

00:09:12,390 --> 00:09:18,480
common practice is you try and backup

00:09:13,950 --> 00:09:20,850
everything at points in time so don't

00:09:18,480 --> 00:09:22,110
backup your credential databases you

00:09:20,850 --> 00:09:25,320
know once a month but your

00:09:22,110 --> 00:09:28,170
infrastructure once a day because you're

00:09:25,320 --> 00:09:31,470
gonna mint to that problem so now we're

00:09:28,170 --> 00:09:33,089
saying do backups do backups one of the

00:09:31,470 --> 00:09:35,730
ones that you can run into is never

00:09:33,089 --> 00:09:38,250
backup the lock of database or actually

00:09:35,730 --> 00:09:41,339
you can back it up just never restore it

00:09:38,250 --> 00:09:43,290
the database gets put back in the locks

00:09:41,339 --> 00:09:45,480
are put back into place but now there's

00:09:43,290 --> 00:09:47,360
nothing to release the lock so those

00:09:45,480 --> 00:09:52,339
locks will never be released and that

00:09:47,360 --> 00:09:52,339
will cause you lots of fun in the future

00:09:55,490 --> 00:09:58,600
[Music]

00:10:00,350 --> 00:10:05,339
so with the people you are gonna have a

00:10:03,540 --> 00:10:07,950
firewall team a security team and

00:10:05,339 --> 00:10:10,920
infrastructure team weeks ahead of time

00:10:07,950 --> 00:10:13,200
get to know them like you know maybe

00:10:10,920 --> 00:10:14,750
take them out for a lunch maybe make

00:10:13,200 --> 00:10:17,010
sure they are working in the same area

00:10:14,750 --> 00:10:18,540
because when you're doing any sort of

00:10:17,010 --> 00:10:21,060
deploys you're gonna be talking to the

00:10:18,540 --> 00:10:22,920
often the day before you're deploying is

00:10:21,060 --> 00:10:23,940
not the day to talk to them I mean

00:10:22,920 --> 00:10:25,709
that's the day you're gonna find out

00:10:23,940 --> 00:10:29,640
that the team is going on vacation the

00:10:25,709 --> 00:10:31,829
next day and you're like so you're gonna

00:10:29,640 --> 00:10:33,570
be talking with some make sure you're

00:10:31,829 --> 00:10:35,910
talking to them often make sure that

00:10:33,570 --> 00:10:39,529
you're including them in the

00:10:35,910 --> 00:10:39,529
conversations keeping them in the loop

00:10:40,870 --> 00:10:47,500
so you also want to test the assets

00:10:45,910 --> 00:10:50,470
these teams are going to give you stuff

00:10:47,500 --> 00:10:53,080
like SSL Certificates which I'm going to

00:10:50,470 --> 00:10:55,990
pick on because they're fun

00:10:53,080 --> 00:11:00,180
do you have SSL certificates and do they

00:10:55,990 --> 00:11:02,620
have the correct dns wildcards aliases

00:11:00,180 --> 00:11:06,880
did they give you the intermediate certs

00:11:02,620 --> 00:11:08,590
have you checked that they match do you

00:11:06,880 --> 00:11:11,050
have the DNS setup and do they match

00:11:08,590 --> 00:11:13,210
these certificates I've been a few

00:11:11,050 --> 00:11:15,510
places where the certificate showed up

00:11:13,210 --> 00:11:18,400
and they have the wrong domain name and

00:11:15,510 --> 00:11:19,990
now you got that two week who I gotta be

00:11:18,400 --> 00:11:23,100
provision I gotta order it has to go

00:11:19,990 --> 00:11:26,950
through purchasing fun to go through and

00:11:23,100 --> 00:11:28,930
finally install doomsday so I'm in a

00:11:26,950 --> 00:11:31,030
joke a little earlier about hey there's

00:11:28,930 --> 00:11:32,980
a doomsday talk going on right now so

00:11:31,030 --> 00:11:34,930
star can wind is also given a talk about

00:11:32,980 --> 00:11:36,220
doomsday which is a great little

00:11:34,930 --> 00:11:38,860
application that goes out there and

00:11:36,220 --> 00:11:41,440
looks at the certificates when they

00:11:38,860 --> 00:11:45,130
expire you don't want to know that your

00:11:41,440 --> 00:11:46,540
certificates if expired after they have

00:11:45,130 --> 00:11:48,780
it makes cleaning up your production

00:11:46,540 --> 00:11:52,120
environment a whole heck of a lot harder

00:11:48,780 --> 00:11:53,500
so I encourage you to when you get back

00:11:52,120 --> 00:11:55,180
home I'm assuming these are being

00:11:53,500 --> 00:11:58,780
recorded go back and check out that

00:11:55,180 --> 00:12:01,690
particular presentation it turns out

00:11:58,780 --> 00:12:04,870
that if you let your nats certificate

00:12:01,690 --> 00:12:08,110
expire then when you do deploy and Bosh

00:12:04,870 --> 00:12:10,690
tries to talk to the agents to update

00:12:08,110 --> 00:12:12,610
those certificates the certificates have

00:12:10,690 --> 00:12:14,080
expired and they don't want to talk and

00:12:12,610 --> 00:12:16,570
then you have to go through all the fun

00:12:14,080 --> 00:12:19,390
of manually trying to fix all the

00:12:16,570 --> 00:12:23,980
instances which can be kind of scripted

00:12:19,390 --> 00:12:26,290
but still is very very painful so tools

00:12:23,980 --> 00:12:29,020
like doomsday will give you a bit of a

00:12:26,290 --> 00:12:33,190
heads up guess so what's on the screen

00:12:29,020 --> 00:12:34,690
here is actually a screenshot of the CLI

00:12:33,190 --> 00:12:36,430
version of the tool there will be a GUI

00:12:34,690 --> 00:12:38,560
version that you can just employ

00:12:36,430 --> 00:12:40,930
straight to Cloud Foundry but in this

00:12:38,560 --> 00:12:43,780
case you can see that hey whatever our

00:12:40,930 --> 00:12:46,300
cool site comm site is here within the

00:12:43,780 --> 00:12:47,470
next two weeks if nobody makes any

00:12:46,300 --> 00:12:50,110
changes we're going to have a production

00:12:47,470 --> 00:12:52,050
issue because that certificate is going

00:12:50,110 --> 00:12:54,519
to expire that's bad

00:12:52,050 --> 00:12:56,079
yeah this is actually set up in my

00:12:54,519 --> 00:13:00,910
profile so every time I log into the

00:12:56,079 --> 00:13:02,800
jump box I get the list so one of the

00:13:00,910 --> 00:13:05,920
other things very critical when you get

00:13:02,800 --> 00:13:08,500
the SSL Certificates check that the key

00:13:05,920 --> 00:13:12,459
and the certificate match check the

00:13:08,500 --> 00:13:15,699
modulus if they don't match when you go

00:13:12,459 --> 00:13:17,379
to the deploy h a proxy or whatever

00:13:15,699 --> 00:13:21,639
little balance you are using is going to

00:13:17,379 --> 00:13:22,930
complain and possibly blow up and then

00:13:21,639 --> 00:13:24,819
you have to go to your security

00:13:22,930 --> 00:13:28,889
department and start to requisition and

00:13:24,819 --> 00:13:28,889
wait two weeks and so on and so on so

00:13:33,600 --> 00:13:41,199
this is also something that you should

00:13:36,120 --> 00:13:43,810
try and set up is to pair with someone

00:13:41,199 --> 00:13:46,420
on your deploy you know we are very big

00:13:43,810 --> 00:13:48,850
proponents of pairing the knowledge

00:13:46,420 --> 00:13:50,350
transfer I work at an amazing company

00:13:48,850 --> 00:13:54,100
all the people I work with are amazing

00:13:50,350 --> 00:13:56,730
my copilot here is fantastically funny

00:13:54,100 --> 00:14:02,319
and you know moderately smart guy so

00:13:56,730 --> 00:14:04,300
pairing is quite critical because it

00:14:02,319 --> 00:14:06,160
helps save you from fat fingers it's a

00:14:04,300 --> 00:14:07,930
knowledge transfer it's making sure that

00:14:06,160 --> 00:14:10,300
you're not the only person who knows how

00:14:07,930 --> 00:14:13,480
the foundation is set up so you get the

00:14:10,300 --> 00:14:16,269
phone call Sunday night saying hey can

00:14:13,480 --> 00:14:22,750
you come in now there's a 50/50 chance

00:14:16,269 --> 00:14:25,540
that he'll get called so all of you guys

00:14:22,750 --> 00:14:27,250
have been in rooms together and meetings

00:14:25,540 --> 00:14:29,050
together and knocked out all the

00:14:27,250 --> 00:14:31,839
discussions and you're gonna make your

00:14:29,050 --> 00:14:35,079
choice of infrastructure and you've got

00:14:31,839 --> 00:14:37,149
a couple choices you've got the the

00:14:35,079 --> 00:14:40,809
classic vSphere and you're going to need

00:14:37,149 --> 00:14:41,980
the vCenter IP username password choose

00:14:40,809 --> 00:14:44,259
whether you're using the internal or

00:14:41,980 --> 00:14:48,250
external database are you gonna be using

00:14:44,259 --> 00:14:52,120
web dev nass Mineo some other blobstore

00:14:48,250 --> 00:14:55,180
h a proxy another load balancer where

00:14:52,120 --> 00:14:57,790
you're going to terminate the SSL you've

00:14:55,180 --> 00:15:00,220
got the grandfather of the cloud AWS

00:14:57,790 --> 00:15:03,699
you've got your access keys and secrets

00:15:00,220 --> 00:15:05,440
internal database r DB RDS databases

00:15:03,699 --> 00:15:08,649
WebDAV s3

00:15:05,440 --> 00:15:10,569
now their data store a chai proxy elby's

00:15:08,649 --> 00:15:14,050
and a little balancer where you're gonna

00:15:10,569 --> 00:15:16,690
terminate the as cell connections you've

00:15:14,050 --> 00:15:20,079
got as your subscriptions resources

00:15:16,690 --> 00:15:23,709
tenants internal or as your SQL WebDAV

00:15:20,079 --> 00:15:24,699
or as your object store HHI proxy or as

00:15:23,709 --> 00:15:28,389
your load balancer

00:15:24,699 --> 00:15:31,180
where will the ssl be terminated Google

00:15:28,389 --> 00:15:33,970
compute platform server the count key

00:15:31,180 --> 00:15:36,819
internal or cloud SQL web dev or cloud

00:15:33,970 --> 00:15:39,730
storage or other H a proxy cloud load

00:15:36,819 --> 00:15:42,269
balancers or another load balancer where

00:15:39,730 --> 00:15:46,420
will the SSL termination be and

00:15:42,269 --> 00:15:49,240
OpenStack account details internal

00:15:46,420 --> 00:15:52,389
external SQL web dab Swift another

00:15:49,240 --> 00:15:55,269
object store a check Roxie Octavia the

00:15:52,389 --> 00:15:59,560
load balancer where will the SSL

00:15:55,269 --> 00:16:01,269
termination be so on the last five

00:15:59,560 --> 00:16:02,709
slides recover five different

00:16:01,269 --> 00:16:05,319
infrastructures and we had five

00:16:02,709 --> 00:16:07,810
different questions on there it's very

00:16:05,319 --> 00:16:09,519
important to know the answers to those

00:16:07,810 --> 00:16:11,110
five questions we bring them up because

00:16:09,519 --> 00:16:14,500
we see those are not necessarily

00:16:11,110 --> 00:16:15,910
answered when we go on site you need

00:16:14,500 --> 00:16:17,769
answers to those five questions and

00:16:15,910 --> 00:16:20,170
depending on how you answer them there

00:16:17,769 --> 00:16:21,759
are severe implications but where you've

00:16:20,170 --> 00:16:24,130
put your databases where you put your

00:16:21,759 --> 00:16:25,810
blob stores that can result in outages

00:16:24,130 --> 00:16:27,370
just prefer on the way that you've

00:16:25,810 --> 00:16:29,889
designed your system from these five

00:16:27,370 --> 00:16:31,329
decisions alone so while we kind of

00:16:29,889 --> 00:16:33,579
glossed over those maybe just a little

00:16:31,329 --> 00:16:40,209
bit you need answers to those five

00:16:33,579 --> 00:16:44,139
questions so most of the is is except B

00:16:40,209 --> 00:16:46,000
sphere or mostly is and they look pretty

00:16:44,139 --> 00:16:48,069
much the same but there are subtle

00:16:46,000 --> 00:16:50,529
differences actually some big

00:16:48,069 --> 00:16:53,709
differences so when you're looking at

00:16:50,529 --> 00:16:55,779
documentation most of the is is except

00:16:53,709 --> 00:16:57,730
for vSphere need a boss registry

00:16:55,779 --> 00:17:00,880
depending on the documentation you look

00:16:57,730 --> 00:17:03,939
at port two five seven seven seven is

00:17:00,880 --> 00:17:06,069
often not listed every is has its own

00:17:03,939 --> 00:17:09,220
branding its own flavors and features

00:17:06,069 --> 00:17:12,579
not all features are available in all

00:17:09,220 --> 00:17:14,470
regions either so you have to be careful

00:17:12,579 --> 00:17:16,899
of that and when you're following the

00:17:14,470 --> 00:17:17,350
docs which is important you also have to

00:17:16,899 --> 00:17:19,839
be very

00:17:17,350 --> 00:17:22,299
aware of which infrastructure the docks

00:17:19,839 --> 00:17:24,189
were written for because they will

00:17:22,299 --> 00:17:26,110
probably be skipping steps from other

00:17:24,189 --> 00:17:32,280
infrastructures that you're going to

00:17:26,110 --> 00:17:37,000
need so yeah definitely

00:17:32,280 --> 00:17:38,320
keep in mind that the differences

00:17:37,000 --> 00:17:41,620
between them there's a lot of difference

00:17:38,320 --> 00:17:43,840
in terminology the pricing tiers you're

00:17:41,620 --> 00:17:47,440
going to find that even though you know

00:17:43,840 --> 00:17:49,960
they have the you know VMs per hour

00:17:47,440 --> 00:17:51,909
price when you start adding in access to

00:17:49,960 --> 00:17:54,510
the the network traffic very different

00:17:51,909 --> 00:18:00,580
pricing and the feature parity between

00:17:54,510 --> 00:18:05,159
platforms and so once you get your is

00:18:00,580 --> 00:18:08,620
keys take a few minutes do some testing

00:18:05,159 --> 00:18:10,419
do your credential to you I am I am keys

00:18:08,620 --> 00:18:13,750
allow you to create and delete buckets

00:18:10,419 --> 00:18:15,250
create and delete files most of these

00:18:13,750 --> 00:18:16,570
things you know am alone have the tool

00:18:15,250 --> 00:18:19,299
you can download as your how the tool

00:18:16,570 --> 00:18:21,490
Mineo has a tool download those user

00:18:19,299 --> 00:18:24,460
credentials just take five minutes

00:18:21,490 --> 00:18:28,049
trying to exercise it make sure that you

00:18:24,460 --> 00:18:31,000
can actually create or destroy something

00:18:28,049 --> 00:18:33,070
yeah all four six on my last production

00:18:31,000 --> 00:18:34,590
deploys on the set of credentials that I

00:18:33,070 --> 00:18:37,510
get for the underlying infrastructure

00:18:34,590 --> 00:18:39,039
actually do all of the things that I

00:18:37,510 --> 00:18:42,340
need them to do whether it's create a VM

00:18:39,039 --> 00:18:44,770
create a bucket key one I had was I can

00:18:42,340 --> 00:18:47,740
write to the bucket but I can't read the

00:18:44,770 --> 00:18:49,240
bucket that was cute so yeah go ahead

00:18:47,740 --> 00:18:51,070
just because you got a set of

00:18:49,240 --> 00:18:52,600
credentials don't make any sort of

00:18:51,070 --> 00:18:55,240
assumptions that the permissions that

00:18:52,600 --> 00:18:56,620
you've gotten will actually work and try

00:18:55,240 --> 00:18:57,820
to chess those out before you trying to

00:18:56,620 --> 00:18:59,740
do a Bosch deploy and then trying to

00:18:57,820 --> 00:19:02,830
debug that some real simple tools out

00:18:59,740 --> 00:19:06,580
there go ahead and use them also realize

00:19:02,830 --> 00:19:08,380
that your security team they are going

00:19:06,580 --> 00:19:10,030
to try very hard to minimize the tax if

00:19:08,380 --> 00:19:12,429
it says give you the least permissions

00:19:10,030 --> 00:19:13,980
possible so the keys you're gonna get

00:19:12,429 --> 00:19:16,150
are probably going to be missing stuff

00:19:13,980 --> 00:19:17,230
you may actually want to consider

00:19:16,150 --> 00:19:20,919
talking to them about getting your own

00:19:17,230 --> 00:19:24,070
private account and basically doing only

00:19:20,919 --> 00:19:26,440
deploys air so that your infrastructure

00:19:24,070 --> 00:19:29,710
is separate from everyone else's might

00:19:26,440 --> 00:19:30,870
makes it a bit easier now when you're

00:19:29,710 --> 00:19:33,090
talking to them up

00:19:30,870 --> 00:19:35,070
getting your on the count make sure

00:19:33,090 --> 00:19:36,690
you're not the person with the credit

00:19:35,070 --> 00:19:39,000
card doesn't matter if you have a

00:19:36,690 --> 00:19:41,550
corporate card from the company don't

00:19:39,000 --> 00:19:43,350
use it don't fall into the trap when the

00:19:41,550 --> 00:19:45,450
credit card screen comes up find

00:19:43,350 --> 00:19:47,340
somebody whose job it is to have the

00:19:45,450 --> 00:19:51,000
credit card number have them put it in

00:19:47,340 --> 00:19:53,610
because what happens is you're deploying

00:19:51,000 --> 00:19:55,740
everything's going great the card

00:19:53,610 --> 00:19:58,980
expires the infrastructure gets turned

00:19:55,740 --> 00:20:01,710
off and then the guy look whose card was

00:19:58,980 --> 00:20:04,170
it oh it was your card how come you

00:20:01,710 --> 00:20:06,990
didn't update it all right so there are

00:20:04,170 --> 00:20:08,280
people who's basically the job is to

00:20:06,990 --> 00:20:10,530
make sure that the card to paid the

00:20:08,280 --> 00:20:14,160
cards are active if the cards are stolen

00:20:10,530 --> 00:20:16,440
addresses change all handle right amazon

00:20:14,160 --> 00:20:19,710
has umbrella accounts set your account

00:20:16,440 --> 00:20:23,760
up put it under the umbrella right I've

00:20:19,710 --> 00:20:25,890
had you know an issue where the credit

00:20:23,760 --> 00:20:29,809
card got declined infrastructure just

00:20:25,890 --> 00:20:31,679
disappeared on that vein with all these

00:20:29,809 --> 00:20:32,460
infrastructures you can usually get an

00:20:31,679 --> 00:20:33,780
account manager

00:20:32,460 --> 00:20:36,929
get to know them talk to them

00:20:33,780 --> 00:20:38,220
periodically sometimes if the credit

00:20:36,929 --> 00:20:39,900
card gets declined instead of turning

00:20:38,220 --> 00:20:41,540
off the instructure they might give you

00:20:39,900 --> 00:20:43,910
a phone call first to let you update it

00:20:41,540 --> 00:20:47,030
all right but so get to know your

00:20:43,910 --> 00:20:47,030
account manager

00:20:47,240 --> 00:20:52,440
so we talked a few minutes ago about the

00:20:50,580 --> 00:20:54,510
fact that when your search expire you're

00:20:52,440 --> 00:20:56,429
gonna have a problem when your credit

00:20:54,510 --> 00:21:02,910
card expires you're gonna have every

00:20:56,429 --> 00:21:06,809
problem so networking is a bit kind of

00:21:02,910 --> 00:21:08,820
boring to talk about and we've already

00:21:06,809 --> 00:21:12,420
been talking a little bit about TCP

00:21:08,820 --> 00:21:15,440
ports you're gonna have to basically go

00:21:12,420 --> 00:21:19,080
through the documentation and SSL

00:21:15,440 --> 00:21:22,110
bootstrapping director naps that's gonna

00:21:19,080 --> 00:21:25,530
be in one document and then credit hub

00:21:22,110 --> 00:21:29,760
you AAA application SSH shield registry

00:21:25,530 --> 00:21:32,880
this is not a complete list nowhere will

00:21:29,760 --> 00:21:34,230
you find a complete list you are going

00:21:32,880 --> 00:21:35,280
to basically have to go through

00:21:34,230 --> 00:21:37,290
everything you're installing everything

00:21:35,280 --> 00:21:40,710
you're working with find that list and

00:21:37,290 --> 00:21:41,880
build it and I recommend you do

00:21:40,710 --> 00:21:43,650
something like this where you actually

00:21:41,880 --> 00:21:44,130
label what the ports are for because

00:21:43,650 --> 00:21:46,470
you're sick

00:21:44,130 --> 00:21:49,280
Department is going to say you gave me

00:21:46,470 --> 00:21:55,440
these IP addresses what are they for

00:21:49,280 --> 00:21:58,230
so if your company has a corporate

00:21:55,440 --> 00:22:01,230
firewall factor in a couple days to

00:21:58,230 --> 00:22:04,040
debug them every time as you'll have

00:22:01,230 --> 00:22:06,570
problems with them every time if your

00:22:04,040 --> 00:22:07,110
company has a proxy to access the

00:22:06,570 --> 00:22:09,900
Internet

00:22:07,110 --> 00:22:11,430
factor in a few days to debug them every

00:22:09,900 --> 00:22:14,040
time as you have problems with them

00:22:11,430 --> 00:22:16,500
every time new rules get added

00:22:14,040 --> 00:22:19,200
definitions get updated you may need to

00:22:16,500 --> 00:22:22,140
disable or they may decide to disable

00:22:19,200 --> 00:22:25,440
pings for a CV or something stuff

00:22:22,140 --> 00:22:28,290
changes and you want to have your

00:22:25,440 --> 00:22:30,540
security team on speed dial

00:22:28,290 --> 00:22:31,680
ok if they have any of this stuff and

00:22:30,540 --> 00:22:37,260
you are going to be on the phone with

00:22:31,680 --> 00:22:40,170
them also be careful of home or other

00:22:37,260 --> 00:22:43,250
ranges so when you're saying up your

00:22:40,170 --> 00:22:46,830
network avoid the common you know

00:22:43,250 --> 00:22:50,130
192.168.0 the 10.0 the one so I was

00:22:46,830 --> 00:22:52,620
working with a customer months ago BP

00:22:50,130 --> 00:22:55,710
and into their network tried to log in

00:22:52,620 --> 00:22:57,150
to their jump box time out try to log

00:22:55,710 --> 00:22:59,880
into the jump box again timed out

00:22:57,150 --> 00:23:05,070
looking at it why am I trying to SSH

00:22:59,880 --> 00:23:07,260
into my printer their network and mine

00:23:05,070 --> 00:23:10,680
network has the same IP range

00:23:07,260 --> 00:23:12,390
it won't wrote you're going to be

00:23:10,680 --> 00:23:15,990
causing a world of headache if you use

00:23:12,390 --> 00:23:18,600
these IP ranges for your network because

00:23:15,990 --> 00:23:21,420
any time you have a VPN there's gonna be

00:23:18,600 --> 00:23:24,120
somebody on your team who's gonna have a

00:23:21,420 --> 00:23:26,040
problem now in my case I found a

00:23:24,120 --> 00:23:29,070
workaround I went onto the guest network

00:23:26,040 --> 00:23:32,880
which was on a different IP range but

00:23:29,070 --> 00:23:35,430
that's kind of annoying so isolation

00:23:32,880 --> 00:23:37,140
segment those are a little bit easier to

00:23:35,430 --> 00:23:39,570
deal with if you booting up multiple

00:23:37,140 --> 00:23:41,160
foundations you can use the same IP

00:23:39,570 --> 00:23:43,650
ranges for all of them because they're

00:23:41,160 --> 00:23:46,050
isolated but you do have to work with

00:23:43,650 --> 00:23:48,690
your services team make sure that your

00:23:46,050 --> 00:23:51,150
isolation segment and their services IPS

00:23:48,690 --> 00:23:52,920
don't overlap otherwise the containers

00:23:51,150 --> 00:23:55,590
can't talk to your database your Redis

00:23:52,920 --> 00:23:57,540
any of that sort of stuff

00:23:55,590 --> 00:23:59,280
and easy that needs to flow downhill

00:23:57,540 --> 00:24:07,920
I believe that's completely self

00:23:59,280 --> 00:24:09,660
explanatory so there's you know lots of

00:24:07,920 --> 00:24:12,270
things you have to check out if you have

00:24:09,660 --> 00:24:14,910
a DNS setup double check is to turn in

00:24:12,270 --> 00:24:17,130
the correct private IP addresses instead

00:24:14,910 --> 00:24:18,930
public ones if you're on AWS for

00:24:17,130 --> 00:24:20,940
instance and it's returning the public

00:24:18,930 --> 00:24:22,620
IP addresses for f3

00:24:20,940 --> 00:24:24,210
you could build a slightly different

00:24:22,620 --> 00:24:27,120
rate to then if you're using the private

00:24:24,210 --> 00:24:28,920
IP addresses inside gets a traffic goes

00:24:27,120 --> 00:24:32,630
out and comes back in again and it's a

00:24:28,920 --> 00:24:35,760
different tier check your VM sizing and

00:24:32,630 --> 00:24:38,220
disk sizing make your disks bigger than

00:24:35,760 --> 00:24:40,680
you think you're going to need them so

00:24:38,220 --> 00:24:43,110
remember you can run out of resources so

00:24:40,680 --> 00:24:52,970
try and you know plan ahead that you're

00:24:43,110 --> 00:24:58,100
not going to fill up so any questions

00:24:52,970 --> 00:24:58,100
see I helped with a few of the slides so

00:25:01,160 --> 00:25:07,260
like coming said if there's any

00:25:04,590 --> 00:25:11,160
questions cool we'll answer them now if

00:25:07,260 --> 00:25:12,350
not you can come see us down at the what

00:25:11,160 --> 00:25:18,770
is it called again

00:25:12,350 --> 00:25:20,760
the foundry will be the people b4 b4

00:25:18,770 --> 00:25:22,500
will be the people that are standing

00:25:20,760 --> 00:25:24,240
there and kind of chilling out because

00:25:22,500 --> 00:25:25,970
our talk is done with feel free to ask

00:25:24,240 --> 00:25:27,840
us any questions you've got but

00:25:25,970 --> 00:25:30,870
otherwise I want to thank you folks for

00:25:27,840 --> 00:25:32,460
showing up today and enjoy the rest of

00:25:30,870 --> 00:25:38,759
conference thank you

00:25:32,460 --> 00:25:38,759

YouTube URL: https://www.youtube.com/watch?v=A8lSOnRb8Ps


