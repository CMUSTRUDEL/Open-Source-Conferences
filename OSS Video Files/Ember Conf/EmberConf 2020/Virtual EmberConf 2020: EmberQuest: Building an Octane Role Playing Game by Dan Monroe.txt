Title: Virtual EmberConf 2020: EmberQuest: Building an Octane Role Playing Game by Dan Monroe
Publication date: 2020-03-26
Playlist: EmberConf 2020
Description: 
	EmberQuest: Building an Octane Role Playing Game by Dan Monroe

Journey with me as I discuss how Ember Octane made building an RPG easier. There are many challenges to make a playable game; rendering maps, moving the player and monsters, player inventory, combat. Never fear, we have magic on our side!

We'll use a Glimmering component for the main viewport, mini world map, Path Finding, and Fog of War. The magic of Ember-Concurrency will help drive moving and combat. The wizardry of Ember-Auto-Import will allow the use of Konva to draw on our HTML5 canvas.

Together, with the magic Octane sword I've named Tracked, we'll level-up and complete our EmberQuest!
Captions: 
	                              [Music]                               good morning welcome to Ambur quest                               during this session I'm going to show                               you how you can build the next fortnight                               and make a million dollars okay maybe                               not fortnight and a million dollars is                               up to you I will show you how I wrote a                               game with ember octane then I'll provide                               you with some tools so you can - my name                                is Dan Munroe I'm a full-stack developer                                at Cardinal Health in Dublin Ohio before                                cardinal health I worked for Walt Disney                                copy sir                                AOL and Netscape I've been using                                javascript for a very long time over two                                decades I've seen the good parts and a                                lot of the bad out written a lot of the                                bad I'm sorry I wrote JavaScript four                                years before the first version of jQuery                                was ever released                                it was tedious when jQuery came out I                                thought it was magic having the right                                tools empowered me to write better code                                thank you john Rezac I've been using                                I've seen a lot of the JavaScript                                frameworks come and go of course                                ember is my favorite before I get into                                the game portion of this talk I want to                                tell you why I wanted to build a game                                why did I decide that not sleeping was a                                good idea I had numerous hobbies in my                                life some of them were my inspiration my                                family training in Taekwondo a scare                                actor at the blood prison haunted house                                during Halloween the prison where they                                shot the movie Shawshank Redemption                                turns into a haunted house called blood                                prison I'm one of the actors this is me                                as a sharpshooter last year surprised hi                                writing good i also contribute to a few                                open-source projects you can too it                                sounds scary as a haunted house you                                should try it I also like geocaching                                because that's my geocaching name right                                there                                teaming Rose can you guess which two of                                these were my inspiration to write a                                game coding of course and geocaching now                                some of you may have already be familiar                                with geocaching while others are                                probably wondering what it is geocaching                                is the world's largest treasure hunt he                                was the main inspiration for me to write                                a game let me give a brief description                                of what it is so we can get into how it                                ties into ember handwriting a game                                geocaching is an Emmy day any time                                adventure they can't take you to amazing                                and beautiful places or even just to a                                place in your town that you have never                                been to before there are millions of                                geocaches worldwide the way it works is                                simple just go to geocaching.com choose                                the view cache you want to find like                                this one just outside the Oregon                                Convention Center then navigate to its                                GPS location what you're looking for                                Barry's geocache has come in different                                shapes sizes and difficulties I learned                                to ascend tall trees and rappel all                                because of jus caching the highest tree                                I ever climbed was over                                               fun after you find it you sign a logbook                                inside when you're done put the cache                                back where you found it for the next                                person to find when you then you post                                your fight online so far I have found                                almost                                                                states and                                                              two new ones in the Bahamas on our buy                                one get two for free cruise now I know                                what some of you were thinking what does                                this have to do with running a game well                                sometimes the cash does not give you the                                exact coordinates these are called                                puzzle caches the qu cache player has to                                decrypt a cipher or solve a puzzle just                                to get the real coordinates I have a I                                have hidden a few of these myself my                                first one was an interactive fiction                                game similar to Zork or enchanter from                                the early                                                          called geo quest I started to write it                                in Java and soon discovered that it was                                hard then I found a tool called inform                                inform I love this plugins or add-ons                                made it easy and fun to write it took                                care of all the natural language parsing                                for me having the tools the right tools                                 empowered me to build the game I                                 envisioned without having to worry about                                 details however I still wanted to do a                                 back graphics based game but the tools                                 were not easily available to me at the                                 time now for ember                                 how was introduced to ever after joining                                 my current team about four years ago I                                 think it was amber one thirteen one                                 twelve I had never heard of it I was                                 like okay whatever it had to be better                                 than my current JavaScript framework                                 well how'd your using it a short time it                                 was like magic                                 yes I'm having fun again the community                                 was awesome codes fun the everyone and                                 everyone is a year to help me when I                                 have questions                                 fast forward or I guess backwards                                 Emperor octane is in Canary release I                                 tried it out and thought to myself this                                 new version is pretty cool immediately I                                 wondered how could finally write the RPG                                 geocaching puzzle game that I've always                                 wanted to write but what should I call                                 it                                 Gaea quest - nah amber request cool                                 let's begin well                                 mber new and request don't worry I'm on                                 my home Wi-Fi it's pretty fast okay done                                 now open our browser congratulations you                                 made it nice now what                                 let's see I want to make a game a Jew                                 catcher will play online it's going to                                 be a role-playing game where the virtual                                 player goes exploring solves puzzles                                 fights monsters all on a journey to find                                 chests hidden throughout the game when                                 they find it and open a chest they'll be                                 given the real physical coordinates of                                 caches they can find in real life okay                                 what will I mean hmm well I need a                                 player all right I'll need some way to                                 interact with the game I'll need a world                                 for the player to explore now should I                                 use hexagons or squares to draw the                                 matter I'm gonna need a lot of things                                 graphics dialogues sounds inventory fog                                 of war pathfinding monsters combat                                 saving the game enemy AI makes my brain                                 hurt too many things to think about okay                                 well let's just start with a simple                                 proof of concept will use hexagons for                                 our map and seeing if we can get fog of                                 war or what the player can see and                                 pathfinding implemented this is pretty                                 far along in my proof of concept it                                 demonstrates fog of war field of view                                 and Pat finding a code did all the math                                 to draw and place the hexagons on a                                 canvas the light colored X's are the                                 ones that the player ship can see while                                 the little island is blocking the                                 players view in this debug view when the                                 player moves around the island the field                                 of view is updated it shows me the path                                 following results in purple for each hex                                 I move over with the mouse                                 at the same time I use trigonometry to                                 draw the green and red dots that                                 represent which Texas the player can see                                 in his line of sight and which ones are                                 blocked the path finding uses the a-star                                 algorithm it's pretty fast and then I'll                                 find a path to a target axe way across                                 this big board in about                                                or less okay time to stop working on the                                 real game will add some better graphics                                 and a few months we find our hero on the                                 shore of the same of the same Island our                                 ship is docked waiting for a duel board                                 and take a look around the sea there's a                                 pirate galleon on patrol he Lord is a                                 group I've lowered his aggression so he                                 shouldn't bother us he has several                                 assigned x coordinates to patrol at                                 random since he has the same path                                 fighting code for my proof-of-concept he                                 finds the path to his next coordinate                                 all by himself I'd I could do anything                                 let's believe the pirate patrol and                                 continue our tour there's nothing                                 another dock we'll go ashore and explore                                 leaving the path and into the forest we                                 can get a glimpse at the some of the fog                                 of war the tall thick trees have                                 impaired our vision restricting our view                                 in some directions normally we could see                                 up to three X's away as you can see in                                 the clearing you've probably noticed                                 that as he moves hexes that were                                 previously seen become slightly opaque                                 we will you also you only see objects                                 and creatures within our within our                                 sight range i've removed most of the                                 enemies for this demo but keep our enemy                                 keep your eyes open for any surprises                                 now look a castle                                 go in our hero is thought a cave the                                 field of vision is even easier to see in                                 a spy Crime vines of the narrow                                 passageways now you probably noticed the                                 two bars above our head the green bar is                                 the current health of our hero the blue                                 bar represents his current power or                                 energy some activities like walking                                 through rough terrain or fighting will                                 drain his energy both the health bar and                                 power bar will replenish over time I'll                                 talk about how ember helps with that in                                 a moment I'm going to speed up our                                 cavern tour so we can get to the point                                 where I can begin to show you how ember                                 is helping me with some of the game                                 mechanics whoa don't fall in the lava                                 hmmm I think I hear something around the                                 corner oh no it's the monster look out                                 oh it appears that we have died let's                                 try again                                 before we go around that corner again                                 what do we have in our package.json                                 I mean inventory that could help in our                                 battle we have a few different                                 categories for weapons we already own a                                 crossbar whoa and it's simple sword but                                 I guess they aren't very powerful we're                                 wearing some boots for hat pops your                                 glasses                                 they're pretty cool what's another hmm                                 look like we have a bevel fish                                 interesting well that's about it however                                 there appears to be a few things we can                                 buy or install that might help our hero                                 in our fight and with our development we                                 need to develop faster ember CLI Mirage                                 is a terrific add-on that has always                                 been there for me when I want to do a                                 quick demo without having a back-end                                 markup a component and to provide data                                 for my tests let's add that I use Mirage                                 to create a quick list of inventory                                 items to display it's what's driving                                 this an inventory demo how about a                                 better weapon hammer katana Oh tracked                                 definitely gonna use that now you've                                 already heard my other speakers how                                 wonderful is it truly has made life a                                 lot easier here are a few track                                 properties within the game there are                                 many others but these are specific to                                 the player's health we'll see them used                                 shortly what's this wand of wishing hi                                 amber auto import another outstanding                                 add-on that saved me and probably some                                 of you a lot of time we're trying to use                                 third-party packages I'm using I'm using                                 it to pull in a special package but                                 that's a secret for now                                 one last magic item I want to talk about                                 before I would divulge my secret weapon                                 is the ring of concurrency better known                                 as Erica Guernsey Henry quest uses it in                                 many places here are some of the concur                                 key tasks within the game this is a                                 closer look at the reload health task                                 this is in a base class                                 so each interactive object in the game                                 has this task all the properties it uses                                 our track whenever the player or enemy                                 takes damage this task will heal it over                                 time as it heals the green health bar                                 above their heads will automatically                                 update pretty simple code that keeps our                                 hero healthy some are things that we                                 have that have been very helpful to me                                 are the different resources of resources                                 available when I needed help the amber                                 blog ever times we're always very                                 informative in timely discord is there                                 when it's                                                              now                                 and finally amber guides with all the                                 different versions available to me                                 whenever I need it                                 thank you all to keep him up to date now                                 it's time to reveal my secret weapon                                 it's been a long there has a lot been                                 going on behind the scenes of this demo                                 WebGL canvas web audio level changes                                 sprite collisions etc I wish I could                                 take credit for mending all that on my                                 own but it's hard by myself                                 and I'd like to see my family at least a                                 few minutes a day my secret weapon is                                 there's a game framework wrapped up with                                 a member quest                                 it's called phaser I have written an                                 add-on that will easily inject phaser                                 into your amber application this is                                 available right now for you to use to                                 make your own games for those who that                                 may never heard of it phaser is a                                 desktop and mobile html                                                 a lot of the stuff I was managing on my                                 own in my peripheral concept major now                                 takes care of it for me                                 forever quest cake takes care of all the                                 physics sprite collisions sounds and                                 camera movements I was able to copy all                                 my fog of war and pathfinding code for                                 my perfect concept and plug it into my                                 phaser add-on and it still worked great                                 phaser is not new it's been around for a                                 while but this talk isn't about phaser                                 you can go to phaser guy oh if you want                                 to learn more it's a good source of                                 documentation and examples when you are                                 ready to build your own game now let's                                 take a break remember quest and do just                                 that let's make a small game together                                 we'll go back to our and new ember                                 application we started with earlier and                                 install amber phaser this will give us a                                 new generate phaser scene blueprint a                                 scene is similar to a component within                                 amber let's generate a tote racine calm                                 surging and an Amber service to put our                                 game logic in and finally the component                                 to display the game board all we need in                                 the component is the amber game service                                 in the HPS will place the amber phaser                                 component passing in the phaser                                 configuration in our amber service the                                 game configuration is a simple JSON                                 object a type of phaser Auto is the                                 rendering context it will automatically                                 try WebGL but if the browser or device                                 doesn't support it it will fall back                                 into canvas for this game we're going to                                 need some physics objects will fall                                 downwards toward the ground at a                                 moderate rate and finally we have to                                 tell which seemed to render when the                                 game loads this will be the scene we                                 generated earlier for any scene in                                 phaser there are a number of light side                                 lifecycle hooks available for you to                                 override in most cases you only need to                                 use three preload create update preload                                 is where you load your game assets such                                 as images sprites sounds music                                 create is where of the game objects are                                 created and update runs every game dick                                 this is typically where you will handle                                 player movement in sprite collisions to                                 make sure we have everything wired up                                 correctly I'll have a sky image as our                                 background                                 I'll run ember serve and open our                                 browser not much to look at but at least                                 we know it's running the console reports                                 we are using WebGL and Web Audio nice                                 and we're running a full                                               second time to add our hero refresh your                                 browser there is                                 oops and there he goes now we know that                                 our physics are working but we haven't                                 defined anything anything for him to                                 land on so he just falls through the                                 bottom of the screen before we get much                                 further let's refactor our scene and                                 move the code or Amber service here in                                 our service we are loading the game                                 assets training a ground and the player                                 the ground will be part of a static                                 group where the group is in a physics                                 object so we just we can continue can't                                 detect collisions later now we have some                                 ground but he's still falling through                                 the bottom we need to detect when the                                 player hits the ground by adding a                                 physics collider we ensure that our                                 player and the ground will not overlap                                 each other now he'll land on the ground                                 B first we need a way to move around it                                 this is actually pretty easy phaser will                                 try to run the update lifecycle once per                                 tick this is where we add player                                 movement before we can move we'll set up                                 which keyboard keys will move the player                                 will step the typical a and D for left                                 and right and let the player decide to                                 use the either the W or the spacebar to                                 jump when ap is down move the player to                                 the left when a beep leikee is down move                                 right otherwise stop the left and right                                 movement also we can only drop                                 when our feet are touching the ground                                 although feel free to let them do that                                 and make your own floppy bird or fly                                 back on sir in your case it's your game                                 we just need to take care of up since                                 the physics engine will bring us back                                 down okay we're getting there let's                                 quickly add more thing to jump on we'll                                 add three platforms to jump on we                                 already had the ground image loaded so                                 we're just reusing that image we'll just                                 you place the new platforms at different                                 locations on the screen since the                                 platforms are part of the ground group                                 the collision detector does not allow                                 them to fall through now I need a goal                                 for our player we'll create some stars                                 the player can collect we'll be sure to                                 add another Collider between the stars                                 and the platforms so the Stars will also                                 land on the ground when they appear on                                 the screen still have a slight bounce                                 when the player sprite touches a star it                                 will call the collect star callback                                 function this is our hook into letting                                 us control more of the game interaction                                 with our Amber service in this case the                                 function will increase the player score                                 and check to see if all stars stars have                                 been collected if so it will recreate                                 all the stars and move to the next level                                 after the first level we'll add a bomb                                 that the player will need to avoid when                                 the player collides with a bomb the game                                 is over the collect star callback is in                                 our Amber service we can do anything we                                 want here call other Amber services                                 transition to another route hey anything                                 you might do in other amber applications                                 then you may have done in the past you                                 have control that's it we now have a                                 fully functioning game the complete                                 source code for this game can be found                                 as demo                                                            forever phaser online okay great but                                 wait stop                                 not much time yet what about EverQuest I                                 think we have some unfinished business                                 to attend there when we left our hero he                                 had just lost a fight with that nasty                                 villain but we powered up his inventory                                 to better prepare him for battle                                 we used a mirage to make us more nimble                                 ampere concurrency tasks to help regain                                 his health and power we armed him with                                 ember track properties we used ember                                 auto import to use third-party libraries                                 we gave him ember phaser so he can                                 concentrate on the game of his game                                 mechanics and finally kept him informed                                 with ember guides now time for a rematch                                 yes sweet victory hey now that he's out                                 of the way let's take a peek around the                                 corner there's a chest congratulations                                 our player found a chest the game will                                 tell him the actual coordinates of the                                 geocache he can go out and find it in                                 real life and us as developers are                                 empowered with the tools we need to make                                 the game we envisioned with our in our                                 minds using our favorite JavaScript                                 framework Ember thank you
YouTube URL: https://www.youtube.com/watch?v=Ld1xnQWkqPU


