Title: Open Source Lightning Talk: Gatsby
Publication date: 2016-11-02
Playlist: GraphQL Summit 2016
Description: 
	Kyle Mathews, Gatsby

Gatsby lets you transform plain text into dynamic blogs and websites using React.js and GraphQL: https://github.com/gatsbyjs/gatsby

Learn more about GraphQL Summit:
http://graphqlsummit.com

Join our GraphQL SF meetup to hear more about GraphQL best practices and implementations: 
http://meetup.com/GraphQL-SF/
Captions: 
	00:00:03,750 --> 00:00:11,190
my talk today is on graph Keo and Gatsby

00:00:06,890 --> 00:00:13,289
ventures and ecosystem building so like

00:00:11,190 --> 00:00:15,150
you're saying in Kyle Matthews working

00:00:13,289 --> 00:00:17,550
full-time on this and consulting

00:00:15,150 --> 00:00:19,920
different companies on got to be another

00:00:17,550 --> 00:00:21,600
project mind typography Jas a quick

00:00:19,920 --> 00:00:24,750
question who here is of hand has heard

00:00:21,600 --> 00:00:28,110
of Gatsby before okay

00:00:24,750 --> 00:00:29,850
decent percentage that's cool yes so I

00:00:28,110 --> 00:00:32,489
want to tell this story real quick in my

00:00:29,850 --> 00:00:35,999
lot of events about how I decided to use

00:00:32,489 --> 00:00:37,679
graph QL for the next version of Gatsby

00:00:35,999 --> 00:00:40,530
which I'm working on right now should be

00:00:37,679 --> 00:00:43,949
out in a few months so yeah it's the

00:00:40,530 --> 00:00:46,649
first quick history of Gatsby so about a

00:00:43,949 --> 00:00:48,749
year ago or so I was working on a

00:00:46,649 --> 00:00:51,390
start-up and it got to the point where

00:00:48,749 --> 00:00:53,850
we needed a website and I was like how

00:00:51,390 --> 00:00:54,870
can i only use reactant hood pack

00:00:53,850 --> 00:00:56,729
because i've been using for about a year

00:00:54,870 --> 00:00:58,350
at that point and then i loved it more

00:00:56,729 --> 00:01:01,379
than anything else I'd ever used for the

00:00:58,350 --> 00:01:03,359
web so did not want to use some crap the

00:01:01,379 --> 00:01:05,460
other thing anyway so I was like huh

00:01:03,359 --> 00:01:07,260
maybe be possible to build a static site

00:01:05,460 --> 00:01:09,000
thingy with the reactive web pack

00:01:07,260 --> 00:01:11,880
obsessed with the idea and then finally

00:01:09,000 --> 00:01:14,880
took a week off of project work and it

00:01:11,880 --> 00:01:19,140
worked so I was pretty happy with myself

00:01:14,880 --> 00:01:20,880
I had a you know way of taking markdown

00:01:19,140 --> 00:01:22,290
and like react components running in

00:01:20,880 --> 00:01:24,540
through this Gatsby thing and that would

00:01:22,290 --> 00:01:29,520
pop a really fast website and that was

00:01:24,540 --> 00:01:33,270
cool but there's trouble I was starting

00:01:29,520 --> 00:01:35,540
to get oh yes so it's like I was

00:01:33,270 --> 00:01:38,760
treating data files like markdown as

00:01:35,540 --> 00:01:40,170
modules like web pack modules so

00:01:38,760 --> 00:01:43,590
markdown file would become a day objects

00:01:40,170 --> 00:01:45,870
but I was getting others I was getting

00:01:43,590 --> 00:01:48,090
more and more feature requests for

00:01:45,870 --> 00:01:50,550
things that this I guess we couldn't do

00:01:48,090 --> 00:01:53,340
so I stuff like pagination category

00:01:50,550 --> 00:01:55,650
pages people like oh I wanna do like

00:01:53,340 --> 00:01:58,050
custom processing in a markdown and it's

00:01:55,650 --> 00:02:00,450
hard to do that you know what if you

00:01:58,050 --> 00:02:04,560
just wanted one you know slices of data

00:02:00,450 --> 00:02:05,850
from a big file because markdown or web

00:02:04,560 --> 00:02:08,729
pack was just like pulling the whole

00:02:05,850 --> 00:02:10,979
file also what if you wanted to like

00:02:08,729 --> 00:02:15,000
take data from different sources and

00:02:10,979 --> 00:02:16,710
like put on lots of pages supporting

00:02:15,000 --> 00:02:17,250
custom file types pulling in data from

00:02:16,710 --> 00:02:20,160
external

00:02:17,250 --> 00:02:22,430
databases all these things that kind of

00:02:20,160 --> 00:02:28,790
the web like treating data as modules

00:02:22,430 --> 00:02:33,300
paradigm generally support yeah because

00:02:28,790 --> 00:02:35,550
yeah yeah so basically I finally decided

00:02:33,300 --> 00:02:37,670
okay like I have the wrong abstraction

00:02:35,550 --> 00:02:43,110
here but wasn't really sure what to do

00:02:37,670 --> 00:02:44,540
and you know let's get this and I also

00:02:43,110 --> 00:02:47,280
started thinking about kind of like

00:02:44,540 --> 00:02:49,170
static sites versus database driven

00:02:47,280 --> 00:02:51,060
sites or static sites generally work

00:02:49,170 --> 00:02:52,290
where you have a file and it just kind

00:02:51,060 --> 00:02:55,709
of like gets pushed through a template

00:02:52,290 --> 00:02:57,180
and outcomes like an HTML file where a

00:02:55,709 --> 00:02:58,920
database-driven site on the other hand

00:02:57,180 --> 00:03:02,430
it's like there's like hey here's all

00:02:58,920 --> 00:03:03,959
your data in your templates or elsewhere

00:03:02,430 --> 00:03:06,200
you know like pull out the data you want

00:03:03,959 --> 00:03:08,520
into each page and so we have a lot more

00:03:06,200 --> 00:03:11,040
flexibility and so I was thinking like

00:03:08,520 --> 00:03:13,020
okay like pulling pulling data into

00:03:11,040 --> 00:03:15,360
pages is a lot more powerful and

00:03:13,020 --> 00:03:17,610
flexible than like pushing data and

00:03:15,360 --> 00:03:20,040
through templates so I was like okay let

00:03:17,610 --> 00:03:21,239
me like switch paradigms somehow but the

00:03:20,040 --> 00:03:21,870
question was like how to do that and I

00:03:21,239 --> 00:03:26,130
was working through all these different

00:03:21,870 --> 00:03:29,519
ideas I was like I was kind of sad

00:03:26,130 --> 00:03:31,260
because not as useful as I so and then a

00:03:29,519 --> 00:03:34,350
friend mentioned he was building a

00:03:31,260 --> 00:03:36,150
reactor ESXi generator on graph QL and I

00:03:34,350 --> 00:03:37,950
was like oh cool

00:03:36,150 --> 00:03:39,209
of course I'm actually been building

00:03:37,950 --> 00:03:42,660
something with graphical and relays so I

00:03:39,209 --> 00:03:44,310
was like I love this idea and graph kill

00:03:42,660 --> 00:03:45,930
that gatsby cheat the file system is

00:03:44,310 --> 00:03:49,200
kind of a PR database you know like like

00:03:45,930 --> 00:03:51,630
I want to get Poland data and like all

00:03:49,200 --> 00:03:53,579
your data sources whether it's like file

00:03:51,630 --> 00:03:56,900
system or like external sources would be

00:03:53,579 --> 00:03:59,489
part of one big graphical state tree

00:03:56,900 --> 00:04:01,049
yeah I really like this quote by Linus

00:03:59,489 --> 00:04:02,489
that bad programmers worried about code

00:04:01,049 --> 00:04:03,750
or good programs worried about dads

00:04:02,489 --> 00:04:05,280
charts or in the relationships and

00:04:03,750 --> 00:04:07,950
wanting to be a good programmer I was

00:04:05,280 --> 00:04:10,019
like I want to focus on data structures

00:04:07,950 --> 00:04:12,570
in graphical lets me do this so let's

00:04:10,019 --> 00:04:15,150
just look like in Gatsby so this is like

00:04:12,570 --> 00:04:16,709
a simple sample query imagine you have

00:04:15,150 --> 00:04:18,600
like a directory images and then you

00:04:16,709 --> 00:04:20,250
kind of like go down and then you select

00:04:18,600 --> 00:04:22,560
a file and then you get back the size

00:04:20,250 --> 00:04:25,470
and the caption extending that you know

00:04:22,560 --> 00:04:26,820
you can add further processing of stuff

00:04:25,470 --> 00:04:28,470
you could say like image give me an

00:04:26,820 --> 00:04:29,730
image that's a width of 500

00:04:28,470 --> 00:04:31,590
and then the image would be created and

00:04:29,730 --> 00:04:32,460
like a source think of you turn back to

00:04:31,590 --> 00:04:35,520
you

00:04:32,460 --> 00:04:37,590
here's like you know a connection of

00:04:35,520 --> 00:04:39,660
markdown files and so you can like pull

00:04:37,590 --> 00:04:43,140
out the path and the title like saying

00:04:39,660 --> 00:04:45,930
you're on an index page so quick demo

00:04:43,140 --> 00:04:53,490
very quick demo goes in for no time so I

00:04:45,930 --> 00:04:56,250
built a a image gallery I'm using this

00:04:53,490 --> 00:04:58,080
stuff and it's really simple you know

00:04:56,250 --> 00:05:00,840
it's images you click through and see

00:04:58,080 --> 00:05:02,280
full-size ones or fourth but what's

00:05:00,840 --> 00:05:04,650
super cool is that this is all built

00:05:02,280 --> 00:05:09,680
with just two react components one for

00:05:04,650 --> 00:05:14,610
the index page one for the detail page

00:05:09,680 --> 00:05:15,660
and it's like 110 lines of code you can

00:05:14,610 --> 00:05:21,120
read that I guess let me get a bit

00:05:15,660 --> 00:05:22,350
bigger it's only 110 lines of code and

00:05:21,120 --> 00:05:23,880
so you can like kind of see through it

00:05:22,350 --> 00:05:25,890
that's like it's just normal react comp

00:05:23,880 --> 00:05:28,190
one at the top that down here kind of

00:05:25,890 --> 00:05:30,390
relay style has that co-located query

00:05:28,190 --> 00:05:33,840
where on the index page you know I'm

00:05:30,390 --> 00:05:36,930
just selecting each image and then like

00:05:33,840 --> 00:05:40,140
regular regular version then a retina

00:05:36,930 --> 00:05:43,260
version then over here on the detailed

00:05:40,140 --> 00:05:46,650
page the query actually pulls out a

00:05:43,260 --> 00:05:47,340
micro version of it it's just like 20

00:05:46,650 --> 00:05:51,030
pixels wide

00:05:47,340 --> 00:05:54,990
it's a base64 which is cool technique

00:05:51,030 --> 00:05:57,060
for optimizing the initial load we can

00:05:54,990 --> 00:06:00,570
see here where it loads that it'd be a

00:05:57,060 --> 00:06:01,740
64 thing and then pops in anyways and

00:06:00,570 --> 00:06:03,000
that was like all the sort of stuff was

00:06:01,740 --> 00:06:05,640
like super easy to do super easy to

00:06:03,000 --> 00:06:07,890
express with graph QL handling the data

00:06:05,640 --> 00:06:09,360
processing and declaring in the

00:06:07,890 --> 00:06:12,350
component exactly what you want

00:06:09,360 --> 00:06:15,090
like actually that that base64 stuff I

00:06:12,350 --> 00:06:17,160
added the code for base64 encoding and

00:06:15,090 --> 00:06:17,640
like change the component in like a half

00:06:17,160 --> 00:06:21,930
hour

00:06:17,640 --> 00:06:24,240
like Monday night yeah so I'm really

00:06:21,930 --> 00:06:27,060
inspired by a lot of like big data data

00:06:24,240 --> 00:06:28,860
processing data pipeline tools we can

00:06:27,060 --> 00:06:31,110
kind of like string together different

00:06:28,860 --> 00:06:32,610
kind of data processing primitives and

00:06:31,110 --> 00:06:35,370
like build something that's like pretty

00:06:32,610 --> 00:06:37,979
complex but still maintainable and

00:06:35,370 --> 00:06:40,260
understandable and so the plan is that

00:06:37,979 --> 00:06:41,729
like with Gottesman graph go like

00:06:40,260 --> 00:06:44,520
dynamically build

00:06:41,729 --> 00:06:47,370
Chema's from base data so you point you

00:06:44,520 --> 00:06:49,469
know Gatsby at a directory of files and

00:06:47,370 --> 00:06:51,300
it this comes up with a schema so you

00:06:49,469 --> 00:06:53,129
can have like plugins for this that like

00:06:51,300 --> 00:06:55,680
say like a date-date plugin would go

00:06:53,129 --> 00:06:57,120
look for dates and add like argument for

00:06:55,680 --> 00:06:59,059
that an image plug-in you like what like

00:06:57,120 --> 00:07:01,169
you saw what add image processing

00:06:59,059 --> 00:07:02,789
markdown plug-in you look for markdown

00:07:01,169 --> 00:07:03,839
files and add different ways of

00:07:02,789 --> 00:07:06,479
rendering and extracting information

00:07:03,839 --> 00:07:10,219
from that so all these will just be like

00:07:06,479 --> 00:07:10,219
NPM packages that you add to a project

00:07:10,939 --> 00:07:15,449
yeah and so it's just like this really

00:07:12,960 --> 00:07:17,879
easy experience where who fed up and you

00:07:15,449 --> 00:07:20,969
instantly have a huge schema to query

00:07:17,879 --> 00:07:23,069
against do stuff with and this will

00:07:20,969 --> 00:07:25,710
allow for a higher level tools such as

00:07:23,069 --> 00:07:28,379
like it gets the image component that

00:07:25,710 --> 00:07:30,089
exports a query and then does all the

00:07:28,379 --> 00:07:31,469
like really nice optimizations that you

00:07:30,089 --> 00:07:35,819
want to do for images but that are hard

00:07:31,469 --> 00:07:37,199
to do if you don't know you're doing but

00:07:35,819 --> 00:07:43,080
anyways it be all straightforward to do

00:07:37,199 --> 00:07:44,610
this and yeah so I think this is perfect

00:07:43,080 --> 00:07:46,589
for Gatsby might be perfect for other

00:07:44,610 --> 00:07:47,219
people if it is come talk to me I'd like

00:07:46,589 --> 00:07:50,399
help of course

00:07:47,219 --> 00:07:52,110
and so forth so open source and I'm

00:07:50,399 --> 00:07:53,939
full-time consultant on this thing so if

00:07:52,110 --> 00:07:55,199
Gatsby plus this project seemed like a

00:07:53,939 --> 00:07:57,149
good fit for some sort of internal

00:07:55,199 --> 00:08:03,499
external project I'd love for you to

00:07:57,149 --> 00:08:03,499

YouTube URL: https://www.youtube.com/watch?v=y588qNiCZZo


