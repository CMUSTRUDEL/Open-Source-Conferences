Title: Brian Douglas - The Sane Approach for Getting GraphQL Working in a Complicated API
Publication date: 2017-11-08
Playlist: GraphQL Summit 2017
Description: 
	Brian Douglas, Software Developer at Netlify, gave this talk at GraphQL Summit 2017. Learn more: summit.graphql.com

Convincing your team to change up technologies can be challenging. Convincing my team to use GraphQL was not, mainly due to simplicity in getting a GraphQL prototype up and running using Apollo's Launchpad and our existing REST API.
Captions: 
	00:00:03,240 --> 00:00:08,830
hey everybody so second light and talk I

00:00:07,210 --> 00:00:11,020
know Lee was looking for the word for

00:00:08,830 --> 00:00:14,560
lightning my talk / gonna be a hot fire

00:00:11,020 --> 00:00:16,209
so it's gonna be that good so I'm

00:00:14,560 --> 00:00:19,750
talking about setting up Gretch well of

00:00:16,209 --> 00:00:21,970
complicated api's and a year ago I came

00:00:19,750 --> 00:00:23,230
to this conference this summit and I got

00:00:21,970 --> 00:00:24,490
really excited about graph QL I think a

00:00:23,230 --> 00:00:27,340
lot of us who were here last year

00:00:24,490 --> 00:00:28,930
weren't using it so I had a lot of so I

00:00:27,340 --> 00:00:31,090
came up ILECs

00:00:28,930 --> 00:00:33,539
eventually got those to work and then I

00:00:31,090 --> 00:00:36,579
wanted to bring graph kill to work and

00:00:33,539 --> 00:00:38,469
so my main goal was I had a react native

00:00:36,579 --> 00:00:40,390
app that I built and I started porting

00:00:38,469 --> 00:00:42,839
over all the Redux actions but I was

00:00:40,390 --> 00:00:45,339
really into co-locating all my data and

00:00:42,839 --> 00:00:48,579
Redux so that made sense I wanted to use

00:00:45,339 --> 00:00:50,260
stuff like Apollo or Apollo or relay to

00:00:48,579 --> 00:00:53,199
build this app the problem is that we

00:00:50,260 --> 00:00:54,190
didn't grab q all for my work app so I

00:00:53,199 --> 00:00:56,769
made sure real quickly I worked for a

00:00:54,190 --> 00:00:58,539
company called neckla Phi we are a

00:00:56,769 --> 00:01:00,989
solution for the modern developer to

00:00:58,539 --> 00:01:03,219
deploy and manage to their site and

00:01:00,989 --> 00:01:05,340
we're built on top of the jam stack so

00:01:03,219 --> 00:01:07,570
Jacob sack JavaScript API is at markup

00:01:05,340 --> 00:01:09,760
you guys obviously already know what I'm

00:01:07,570 --> 00:01:11,620
gonna let this but if you if you aren't

00:01:09,760 --> 00:01:13,960
familiar model lift is exactly what this

00:01:11,620 --> 00:01:16,770
picture is it's having all your junk in

00:01:13,960 --> 00:01:19,150
the one jar anybody have this as a kid

00:01:16,770 --> 00:01:21,270
yeah this was great my mom got it once

00:01:19,150 --> 00:01:23,440
and then she made the mistake once

00:01:21,270 --> 00:01:24,880
because the problem is once you get to

00:01:23,440 --> 00:01:26,890
the bottom of jar you just get a bunch

00:01:24,880 --> 00:01:29,650
of peanut butter and what you really

00:01:26,890 --> 00:01:32,830
want is more jelly so the jam sex really

00:01:29,650 --> 00:01:34,330
separating those two concerns and this

00:01:32,830 --> 00:01:36,430
is exactly what I was hired at nullified

00:01:34,330 --> 00:01:39,760
to do which was changed our angular app

00:01:36,430 --> 00:01:41,560
to react so because we separated those

00:01:39,760 --> 00:01:43,660
concerns that X actually is much easier

00:01:41,560 --> 00:01:45,360
and the cool thing about this because

00:01:43,660 --> 00:01:47,680
this is how our architecture is set up

00:01:45,360 --> 00:01:49,870
graph QL really fits really well in

00:01:47,680 --> 00:01:53,500
between the two so it's like that jam

00:01:49,870 --> 00:01:55,900
sandwich you want the only problem is

00:01:53,500 --> 00:01:58,420
though I'm like whatever a full stack

00:01:55,900 --> 00:02:00,640
developer is see today I don't own the

00:01:58,420 --> 00:02:02,560
API so for me to add graph QL to our API

00:02:00,640 --> 00:02:04,810
I have to get a lot of permissions from

00:02:02,560 --> 00:02:07,630
one person and he's not a big JavaScript

00:02:04,810 --> 00:02:09,099
fan so anyway a lot of back-and-forth so

00:02:07,630 --> 00:02:11,439
I didn't know in the API but I wanted to

00:02:09,099 --> 00:02:13,329
have graph cueball at night laughs I so

00:02:11,439 --> 00:02:15,849
I mention I was going to talk about fire

00:02:13,329 --> 00:02:17,799
there's like a mixtape

00:02:15,849 --> 00:02:19,420
so I need something really simple

00:02:17,799 --> 00:02:20,590
because this begin was this was a side

00:02:19,420 --> 00:02:21,430
project I didn't I don't know if I

00:02:20,590 --> 00:02:23,170
mentioned that it was like a hack day

00:02:21,430 --> 00:02:25,810
project that turned in like a hack day

00:02:23,170 --> 00:02:27,639
project for six months building react

00:02:25,810 --> 00:02:29,530
native and then I attached graph QL on

00:02:27,639 --> 00:02:31,150
top of that so took a lot of time so I

00:02:29,530 --> 00:02:33,099
wanted like the most simple solution

00:02:31,150 --> 00:02:35,889
that I can do like after lunch and a few

00:02:33,099 --> 00:02:38,049
hours and there were a couple of them

00:02:35,889 --> 00:02:40,359
but the problem that we have identify is

00:02:38,049 --> 00:02:41,799
that our back end is not node it's not

00:02:40,359 --> 00:02:44,739
one thing it's actually a lot of things

00:02:41,799 --> 00:02:46,900
it's a rails it's go in its and if

00:02:44,739 --> 00:02:48,939
anybody I don't know this rails around

00:02:46,900 --> 00:02:50,260
this days but you know rails is really

00:02:48,939 --> 00:02:52,239
built on top of sequel and if you're

00:02:50,260 --> 00:02:53,650
like on the rails train everything works

00:02:52,239 --> 00:02:54,699
but as soon as you get off that train

00:02:53,650 --> 00:02:59,650
nothing works

00:02:54,699 --> 00:03:01,540
so my first like github had to get up

00:02:59,650 --> 00:03:03,639
they announced their graph kill API and

00:03:01,540 --> 00:03:05,919
beta last year now it's out and for

00:03:03,639 --> 00:03:07,719
public usage they had the graphical ruby

00:03:05,919 --> 00:03:09,129
gem that they're using I originally

00:03:07,719 --> 00:03:11,769
started with this but the problem is

00:03:09,129 --> 00:03:12,819
with the ruby gem it in first sequel and

00:03:11,769 --> 00:03:15,310
we're not using sequel we're actually

00:03:12,819 --> 00:03:17,049
using so big big Walker they're

00:03:15,310 --> 00:03:19,599
not a huge blocker because I could

00:03:17,049 --> 00:03:21,579
actually I could have put some time in

00:03:19,599 --> 00:03:22,629
to make it work but I didn't really I

00:03:21,579 --> 00:03:23,829
didn't really have a lot of time because

00:03:22,629 --> 00:03:26,979
just like a couple hours after lunch

00:03:23,829 --> 00:03:28,780
every day or mainly once a week so I had

00:03:26,979 --> 00:03:30,370
to back out of that really quickly so

00:03:28,780 --> 00:03:32,620
then I thought oh what if I did built

00:03:30,370 --> 00:03:34,150
like a thing that was built on node

00:03:32,620 --> 00:03:36,579
because at the time we're thinking like

00:03:34,150 --> 00:03:37,930
six actually more like nine months ago a

00:03:36,579 --> 00:03:40,389
lot of the tools out there were built on

00:03:37,930 --> 00:03:42,310
node so my god all these like things I

00:03:40,389 --> 00:03:43,389
could inject to my API or built to know

00:03:42,310 --> 00:03:46,389
all this figured out how to make this

00:03:43,389 --> 00:03:47,439
work so I did that quite a few times so

00:03:46,389 --> 00:03:49,840
he's like every single one of these

00:03:47,439 --> 00:03:52,180
things and like I took my database

00:03:49,840 --> 00:03:53,889
and then I inspected it with another

00:03:52,180 --> 00:03:55,359
tool what are these tools I forgot which

00:03:53,889 --> 00:03:56,979
one it was to build out an entire

00:03:55,359 --> 00:03:59,889
schemer for me which was great it just

00:03:56,979 --> 00:04:01,870
didn't work so it took more work I use a

00:03:59,889 --> 00:04:03,280
couple other things as well but it just

00:04:01,870 --> 00:04:05,199
got really complicated really fast and

00:04:03,280 --> 00:04:08,680
if you remember I don't only API and my

00:04:05,199 --> 00:04:12,120
API developer is a big go fanatic so for

00:04:08,680 --> 00:04:14,500
me to introduce sorry to me to introduce

00:04:12,120 --> 00:04:16,539
I'll talk about rappers in a sec for me

00:04:14,500 --> 00:04:18,880
to introduce node to our database which

00:04:16,539 --> 00:04:20,349
I put on the first line this is one more

00:04:18,880 --> 00:04:22,180
thing of complication that we're adding

00:04:20,349 --> 00:04:24,940
to your API so I that was a big blocker

00:04:22,180 --> 00:04:26,710
and he made me know he'd noted to me

00:04:24,940 --> 00:04:29,169
that I would be a blocker so let's talk

00:04:26,710 --> 00:04:31,509
about rappers rap

00:04:29,169 --> 00:04:34,900
cool really big in the 90s they're

00:04:31,509 --> 00:04:36,759
really big now today but so I want what

00:04:34,900 --> 00:04:38,289
the whole rapper deal because I found

00:04:36,759 --> 00:04:40,779
that it was an easy way for me to inject

00:04:38,289 --> 00:04:43,120
graph chill into my API without ruffling

00:04:40,779 --> 00:04:44,229
feathers and I really got this idea

00:04:43,120 --> 00:04:46,539
after I went through all those other

00:04:44,229 --> 00:04:48,279
solutions I had to talk with my API the

00:04:46,539 --> 00:04:49,479
owner of the API and he said why don't

00:04:48,279 --> 00:04:51,189
you just build like a graph kiyul

00:04:49,479 --> 00:04:53,259
gateway I'm sure someone's done this

00:04:51,189 --> 00:04:54,580
before I was like I don't know it sounds

00:04:53,259 --> 00:04:57,759
like a great idea but no one's done it

00:04:54,580 --> 00:04:59,650
and then I went to the graph QL blog and

00:04:57,759 --> 00:05:00,879
it's right right there they're just

00:04:59,650 --> 00:05:02,319
talking about it so I'm like oh I could

00:05:00,879 --> 00:05:04,870
build a rapper s that makes a lot of

00:05:02,319 --> 00:05:09,009
sense I love rap so I took a chance on

00:05:04,870 --> 00:05:10,659
rappers and this is what it looks like

00:05:09,009 --> 00:05:12,279
this is what I did I hadn't ended up

00:05:10,659 --> 00:05:13,479
building a couple versions of this like

00:05:12,279 --> 00:05:15,400
on server lists and all this other

00:05:13,479 --> 00:05:18,999
things and land the functions and I kind

00:05:15,400 --> 00:05:20,169
of around like May July actually June I

00:05:18,999 --> 00:05:21,699
don't know the apollo team knows when

00:05:20,169 --> 00:05:22,870
this came out but this thing came out

00:05:21,699 --> 00:05:24,189
and it was like at the perfect time i

00:05:22,870 --> 00:05:26,020
needed it it was called Apollo launch

00:05:24,189 --> 00:05:27,159
pad and I think it was mentioned earlier

00:05:26,020 --> 00:05:28,990
today and it's pocketed mentioned a

00:05:27,159 --> 00:05:32,020
couple times during the sexual summit

00:05:28,990 --> 00:05:33,789
but as I will take my my REST API that

00:05:32,020 --> 00:05:35,560
was spitting out JSON put it into pala

00:05:33,789 --> 00:05:37,389
launch pad and then spit it to my

00:05:35,560 --> 00:05:41,529
clients which was my react native app

00:05:37,389 --> 00:05:42,819
and it worked out really great and I did

00:05:41,529 --> 00:05:44,680
tweet out my slide so I know I don't

00:05:42,819 --> 00:05:45,939
have a linked with my slides but this is

00:05:44,680 --> 00:05:47,409
my launch pad you can play around with

00:05:45,939 --> 00:05:49,240
it if you have it to be identify user

00:05:47,409 --> 00:05:51,399
there's also a Spotify clone out there

00:05:49,240 --> 00:05:52,389
so if you have a Spotify account you can

00:05:51,399 --> 00:05:54,569
kind of test this out and see how it

00:05:52,389 --> 00:05:56,979
works but this is really how it works

00:05:54,569 --> 00:05:57,909
there is a there's a lot of resolvers in

00:05:56,979 --> 00:06:00,219
there or you can create your own

00:05:57,909 --> 00:06:02,860
resolvers to take your existing API and

00:06:00,219 --> 00:06:05,589
then build your schema all within this

00:06:02,860 --> 00:06:07,360
like it's like a graph cute it's like if

00:06:05,589 --> 00:06:09,460
code pin and graph kill made like a baby

00:06:07,360 --> 00:06:10,749
this is what a launch pad is and it's

00:06:09,460 --> 00:06:12,550
great because I didn't have to bother

00:06:10,749 --> 00:06:15,819
anybody I was able to have graph QL and

00:06:12,550 --> 00:06:19,479
what I really could do is build up my

00:06:15,819 --> 00:06:22,749
rap game and then sell it to my team so

00:06:19,479 --> 00:06:25,810
I want to say that I understand that

00:06:22,749 --> 00:06:27,279
like I'm not owning all the code so I'm

00:06:25,810 --> 00:06:28,389
not ready winning any awards on

00:06:27,279 --> 00:06:30,509
performance I think the performance

00:06:28,389 --> 00:06:32,830
actually just some par with our REST API

00:06:30,509 --> 00:06:34,120
as far as like the way the code looks it

00:06:32,830 --> 00:06:36,339
looks great but it happens to be a node

00:06:34,120 --> 00:06:39,099
so I'm not really selling it that hard

00:06:36,339 --> 00:06:41,139
to my team but it works and I'm able to

00:06:39,099 --> 00:06:42,340
use it without complaining or doing

00:06:41,139 --> 00:06:46,630
throwing up long live

00:06:42,340 --> 00:06:48,310
PRS which I still have on our API but

00:06:46,630 --> 00:06:49,540
the good thing is that rapping sells and

00:06:48,310 --> 00:06:53,740
we all know this because everybody lose

00:06:49,540 --> 00:06:56,139
rap so I do want to this point that take

00:06:53,740 --> 00:06:57,460
a chance on a rap because if you do have

00:06:56,139 --> 00:06:59,350
a complicated a P I and there's not a

00:06:57,460 --> 00:07:00,790
tool out there for you this is a good

00:06:59,350 --> 00:07:03,310
way for you to sell your team internally

00:07:00,790 --> 00:07:05,740
which I did and as of September we've

00:07:03,310 --> 00:07:06,940
got the the green light on graph QL so

00:07:05,740 --> 00:07:08,919
we have a branch that works it's not

00:07:06,940 --> 00:07:12,130
public well probably about one out to

00:07:08,919 --> 00:07:13,990
eventually someday but uh I'll be using

00:07:12,130 --> 00:07:17,440
it for sure and I'll eventually ship

00:07:13,990 --> 00:07:19,180
that react native app one more thing I

00:07:17,440 --> 00:07:21,729
was able to actually go back to the ruby

00:07:19,180 --> 00:07:24,160
gem so again we sequel didn't work for

00:07:21,729 --> 00:07:25,060
us we since we have but we

00:07:24,160 --> 00:07:27,100
actually have it working now so

00:07:25,060 --> 00:07:29,080
hopefully I know the guy who wrote this

00:07:27,100 --> 00:07:31,510
is probably here today so we might have

00:07:29,080 --> 00:07:34,450
a PR I might need to talk to him and ask

00:07:31,510 --> 00:07:36,130
him some questions one more just one

00:07:34,450 --> 00:07:37,419
plug I do a podcast called Jam stack

00:07:36,130 --> 00:07:38,919
radio we talk about a lot of things like

00:07:37,419 --> 00:07:40,090
this so if you have a story that you

00:07:38,919 --> 00:07:41,560
want to share with us about graph you'll

00:07:40,090 --> 00:07:43,600
I'd love to hear it

00:07:41,560 --> 00:07:44,610
last thing word to your mother and I'm B

00:07:43,600 --> 00:07:45,020
dougie

00:07:44,610 --> 00:07:48,100
[Applause]

00:07:45,020 --> 00:07:48,100

YouTube URL: https://www.youtube.com/watch?v=H96AO5QiKk4


