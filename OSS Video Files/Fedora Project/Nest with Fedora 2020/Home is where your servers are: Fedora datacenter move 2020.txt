Title: Home is where your servers are: Fedora datacenter move 2020
Publication date: 2020-09-16
Playlist: Nest with Fedora 2020
Description: 
	This talk will be a short presentation on our datacenter move: planning such a move, implementing it, and fallout after.

Presented at Nest With Fedora 2020.
Captions: 
	00:00:04,960 --> 00:00:07,919
i will zip through the the first couple

00:00:07,120 --> 00:00:10,720
of slides

00:00:07,919 --> 00:00:10,720
very quickly

00:00:12,240 --> 00:00:17,920
while we start up the the rest of the

00:00:14,920 --> 00:00:17,920
stuff

00:00:22,640 --> 00:00:28,160
many of you probably know that

00:00:26,400 --> 00:00:30,800
are thinking to yourselves didn't fedora

00:00:28,160 --> 00:00:34,320
just move and yes fedora has done

00:00:30,800 --> 00:00:37,920
several moves in the past um

00:00:34,320 --> 00:00:40,000
we have had um our first data center

00:00:37,920 --> 00:00:40,960
that i was aware of there was ones

00:00:40,000 --> 00:00:43,600
before this

00:00:40,960 --> 00:00:44,239
back when fedoros really started but the

00:00:43,600 --> 00:00:47,440
one that i

00:00:44,239 --> 00:00:47,760
i became aware of was phoenix one it was

00:00:47,440 --> 00:00:52,719
a

00:00:47,760 --> 00:00:56,160
set of four racks in a small data center

00:00:52,719 --> 00:01:00,079
uh which was a actually a

00:00:56,160 --> 00:01:03,120
milli ex-military hardened data center

00:01:00,079 --> 00:01:03,120
for um

00:01:05,680 --> 00:01:13,280
in case of nuclear war type thing um

00:01:09,600 --> 00:01:15,040
very nice location uh completely locked

00:01:13,280 --> 00:01:16,640
down you had to go through cattle gates

00:01:15,040 --> 00:01:18,560
to get into the building you had to go

00:01:16,640 --> 00:01:22,159
through cattle gates several times to go

00:01:18,560 --> 00:01:22,159
to section to section on it

00:01:23,200 --> 00:01:30,000
we're moved time um it had no ipv6 and

00:01:27,280 --> 00:01:32,320
that was something we were looking at

00:01:30,000 --> 00:01:33,840
and my favorite thing was the old man

00:01:32,320 --> 00:01:37,040
behind the screen

00:01:33,840 --> 00:01:38,320
uh which you know standard i mean like a

00:01:37,040 --> 00:01:41,280
full bullet

00:01:38,320 --> 00:01:43,600
foot glass he was an old man there who

00:01:41,280 --> 00:01:45,520
had a sawed-off shotgun

00:01:43,600 --> 00:01:47,680
so i always felt like this when i walked

00:01:45,520 --> 00:01:47,680
in

00:01:49,920 --> 00:01:56,079
um we moved into phoenix 2 which is

00:01:53,280 --> 00:01:58,719
actually the first fiend is in mesa

00:01:56,079 --> 00:02:01,680
which is a suburb of um

00:01:58,719 --> 00:02:02,560
and we moved from mesa to chandler this

00:02:01,680 --> 00:02:06,880
was done in

00:02:02,560 --> 00:02:09,679
about late 2009 uh we

00:02:06,880 --> 00:02:10,319
started we had three or four racks we

00:02:09,679 --> 00:02:12,319
would grow

00:02:10,319 --> 00:02:14,959
and we would shrink openshift took a

00:02:12,319 --> 00:02:17,360
couple of racks for a bit

00:02:14,959 --> 00:02:17,360
um

00:02:19,120 --> 00:02:22,239
it was a really nice data center at the

00:02:21,280 --> 00:02:26,400
beginning

00:02:22,239 --> 00:02:29,840
it had an automated vacuum powered

00:02:26,400 --> 00:02:32,239
ice cream machine it had

00:02:29,840 --> 00:02:35,200
[Music]

00:02:32,239 --> 00:02:36,400
an automated coffee cup thing that would

00:02:35,200 --> 00:02:38,239
serve you a

00:02:36,400 --> 00:02:40,319
different types of coffee depending on

00:02:38,239 --> 00:02:43,760
what you're doing

00:02:40,319 --> 00:02:44,640
and this was kevin's i always think of

00:02:43,760 --> 00:02:46,879
kevin when i

00:02:44,640 --> 00:02:48,239
see this cartoon because when the coffee

00:02:46,879 --> 00:02:53,200
machine went away

00:02:48,239 --> 00:02:53,200
that was the major uh crying point

00:02:54,640 --> 00:02:57,920
uh do you want to say anything kevin

00:02:59,920 --> 00:03:03,840
i don't know can i say anything yes you

00:03:02,080 --> 00:03:05,840
can say something so the next i will

00:03:03,840 --> 00:03:10,480
start the slideshow

00:03:05,840 --> 00:03:10,480
all right start from current slide

00:03:15,120 --> 00:03:22,480
all right i think

00:03:19,360 --> 00:03:23,680
yes i had exchanged the wrong slide give

00:03:22,480 --> 00:03:26,720
me one second while

00:03:23,680 --> 00:03:27,519
libreoffice does its thing all right so

00:03:26,720 --> 00:03:31,120
yes

00:03:27,519 --> 00:03:34,159
um after

00:03:31,120 --> 00:03:37,599
the machine went away we had a very

00:03:34,159 --> 00:03:39,280
hard used uh mr coffee that usually had

00:03:37,599 --> 00:03:41,280
what your way of making coffee was

00:03:39,280 --> 00:03:42,560
pouring water over the dry grounds at

00:03:41,280 --> 00:03:47,840
the bottom

00:03:42,560 --> 00:03:47,840
and uh drinking whatever was out of that

00:03:55,360 --> 00:04:02,480
am i sharing still yes yes

00:03:59,360 --> 00:04:05,920
is this my uh yes yeah you have the

00:04:02,480 --> 00:04:08,239
uh go ahead you have uh

00:04:05,920 --> 00:04:10,959
i have one two you have four all right

00:04:08,239 --> 00:04:14,400
two three you have four five

00:04:10,959 --> 00:04:17,680
got it um so uh why move

00:04:14,400 --> 00:04:20,079
uh since we were in phoenix um

00:04:17,680 --> 00:04:21,759
the space was coming up for renewal uh

00:04:20,079 --> 00:04:25,280
also our space

00:04:21,759 --> 00:04:28,080
was kind of uh glommed on to the edge

00:04:25,280 --> 00:04:29,120
of the rest of uh red hat space in that

00:04:28,080 --> 00:04:31,440
data center

00:04:29,120 --> 00:04:32,240
so it was kind of part of another big

00:04:31,440 --> 00:04:33,680
area

00:04:32,240 --> 00:04:36,400
so they wanted to kind of cut off that

00:04:33,680 --> 00:04:40,479
little area also

00:04:36,400 --> 00:04:42,400
there was no ipv6 i can't sorry i can't

00:04:40,479 --> 00:04:43,919
raise the microphone anymore it's

00:04:42,400 --> 00:04:46,880
cranked and

00:04:43,919 --> 00:04:47,830
if i mess with it it goes away so i'll

00:04:46,880 --> 00:04:49,360
try and shout

00:04:47,830 --> 00:04:53,040
[Music]

00:04:49,360 --> 00:04:56,080
sorry about that there's no ipv6

00:04:53,040 --> 00:04:59,680
available there or any plans to do

00:04:56,080 --> 00:05:02,160
it and we had bottlenecks with both

00:04:59,680 --> 00:05:04,720
storage and networking there

00:05:02,160 --> 00:05:05,600
our storage was shared with several

00:05:04,720 --> 00:05:08,639
other groups

00:05:05,600 --> 00:05:10,000
and you know that sometimes caused

00:05:08,639 --> 00:05:12,720
problems for us and sometimes

00:05:10,000 --> 00:05:13,759
for them and it was just all kind of

00:05:12,720 --> 00:05:16,880
mixed in

00:05:13,759 --> 00:05:18,080
and the one gig networking most of the

00:05:16,880 --> 00:05:22,160
time was fine but

00:05:18,080 --> 00:05:22,160
occasionally caused us bottlenecks

00:05:23,440 --> 00:05:29,120
the hardware overhaul

00:05:26,639 --> 00:05:31,039
affected too many services at once so if

00:05:29,120 --> 00:05:33,120
we tried to overhaul stuff

00:05:31,039 --> 00:05:34,720
uh we ended up affecting more than we

00:05:33,120 --> 00:05:37,120
intended

00:05:34,720 --> 00:05:38,880
and yes the last point phoenix in summer

00:05:37,120 --> 00:05:41,600
is very hot

00:05:38,880 --> 00:05:43,199
i recall a couple of times working there

00:05:41,600 --> 00:05:45,039
and you're in the data center and it's

00:05:43,199 --> 00:05:47,360
60 degrees fahrenheit

00:05:45,039 --> 00:05:49,759
and it's dark and you walk outside and

00:05:47,360 --> 00:05:53,039
you open those doors and it's 120

00:05:49,759 --> 00:05:56,560
degrees and very bright

00:05:53,039 --> 00:05:56,960
that's always fun or at 11 o'clock at

00:05:56,560 --> 00:06:00,560
night

00:05:56,960 --> 00:06:02,560
it would be still 120 degrees

00:06:00,560 --> 00:06:04,720
there there were a couple times i walked

00:06:02,560 --> 00:06:07,440
out where i thought it was night

00:06:04,720 --> 00:06:08,639
because of the kabobs that would uh

00:06:07,440 --> 00:06:11,120
float in

00:06:08,639 --> 00:06:11,120
and so

00:06:11,840 --> 00:06:15,280
yes that picture there is one of those

00:06:14,160 --> 00:06:18,319
lovely ones

00:06:15,280 --> 00:06:20,160
yep anyway so our goals uh for moving to

00:06:18,319 --> 00:06:22,639
the new data center

00:06:20,160 --> 00:06:24,720
we were going to deploy 10 gig

00:06:22,639 --> 00:06:26,400
networking wherever we could

00:06:24,720 --> 00:06:27,840
uh we don't have it completely

00:06:26,400 --> 00:06:30,960
everywhere but we uh

00:06:27,840 --> 00:06:33,440
we plan to put it on a lot of the

00:06:30,960 --> 00:06:34,000
bigger used systems actually every

00:06:33,440 --> 00:06:36,720
system now

00:06:34,000 --> 00:06:38,080
has 10 gig oh it does okay i thought

00:06:36,720 --> 00:06:41,680
there were still a few holdings

00:06:38,080 --> 00:06:45,759
nope that was matt's uh present to us

00:06:41,680 --> 00:06:46,160
cool excellent so uh ipv6 is available

00:06:45,759 --> 00:06:48,560
there

00:06:46,160 --> 00:06:50,720
although right now you may notice it's

00:06:48,560 --> 00:06:52,319
not enabled uh we ran into a problem

00:06:50,720 --> 00:06:55,120
with the deployment

00:06:52,319 --> 00:06:56,960
and we decided to disable it for now and

00:06:55,120 --> 00:06:58,080
wait until things stabilize and then

00:06:56,960 --> 00:07:00,960
re-enable it

00:06:58,080 --> 00:07:02,080
later in the month or maybe next month

00:07:00,960 --> 00:07:04,479
but we should have

00:07:02,080 --> 00:07:06,400
good ibv6 connectivity there for

00:07:04,479 --> 00:07:08,960
whatever we want

00:07:06,400 --> 00:07:10,000
uh we have dedicated storage there so we

00:07:08,960 --> 00:07:12,880
got a rack

00:07:10,000 --> 00:07:13,199
of uh storage hardware planned out from

00:07:12,880 --> 00:07:16,240
uh

00:07:13,199 --> 00:07:18,560
from the red hat it storage guys

00:07:16,240 --> 00:07:19,919
we're not sharing that with anyone and

00:07:18,560 --> 00:07:22,960
it's sized for us

00:07:19,919 --> 00:07:25,039
and it has room for growth and

00:07:22,960 --> 00:07:26,560
it's in general just a lot faster and

00:07:25,039 --> 00:07:28,240
better

00:07:26,560 --> 00:07:30,080
there's much better appearing at the new

00:07:28,240 --> 00:07:34,240
data center with all the cloud

00:07:30,080 --> 00:07:36,319
providers aws google cloud ibm cloud

00:07:34,240 --> 00:07:37,680
you name it they have point of presence

00:07:36,319 --> 00:07:40,560
there so

00:07:37,680 --> 00:07:43,199
doing a networking to them is very very

00:07:40,560 --> 00:07:45,840
easy and very fast

00:07:43,199 --> 00:07:47,759
and this was an opportunity for us to

00:07:45,840 --> 00:07:49,360
clean house consolidate we had a whole

00:07:47,759 --> 00:07:50,160
bunch of stuff that was spread out

00:07:49,360 --> 00:07:52,800
everywhere

00:07:50,160 --> 00:07:53,599
or not together with things that were

00:07:52,800 --> 00:07:56,639
like it

00:07:53,599 --> 00:07:58,639
or cables running across four net

00:07:56,639 --> 00:08:00,800
four racks to get over to the switch

00:07:58,639 --> 00:08:03,199
that had a port and that kind of thing

00:08:00,800 --> 00:08:04,800
uh also it let us remove a bunch of the

00:08:03,199 --> 00:08:07,120
outdated hardware that we were planning

00:08:04,800 --> 00:08:09,680
to get rid of at some point anyway

00:08:07,120 --> 00:08:12,879
but this gave us a good refresh cycle to

00:08:09,680 --> 00:08:15,919
get on new hardware

00:08:12,879 --> 00:08:19,199
from the get-go so

00:08:15,919 --> 00:08:22,400
next slide so how do you do

00:08:19,199 --> 00:08:24,319
a move it's a long journey but

00:08:22,400 --> 00:08:25,840
the first thing you need to do is be

00:08:24,319 --> 00:08:29,599
prepared for

00:08:25,840 --> 00:08:32,319
meetings lots and lots

00:08:29,599 --> 00:08:32,319
of meetings

00:08:34,000 --> 00:08:37,360
you think to yourself well it's just a

00:08:35,839 --> 00:08:38,000
bunch of service you just put them in a

00:08:37,360 --> 00:08:40,320
box

00:08:38,000 --> 00:08:41,919
you send them over to the other site

00:08:40,320 --> 00:08:44,560
they'll undo it

00:08:41,919 --> 00:08:46,160
it'll all be done in a weekend i i had

00:08:44,560 --> 00:08:49,839
multiple people tell me this

00:08:46,160 --> 00:08:52,320
and uh i was pretty aware that this

00:08:49,839 --> 00:08:55,440
wasn't going to be occurred but

00:08:52,320 --> 00:08:57,760
it got to the point where because there

00:08:55,440 --> 00:09:01,279
were so many groups involved

00:08:57,760 --> 00:09:04,720
uh inside of red hat outside of redhead

00:09:01,279 --> 00:09:08,240
at the data location um

00:09:04,720 --> 00:09:11,600
i had there were several times

00:09:08,240 --> 00:09:14,000
i had an irc meeting going

00:09:11,600 --> 00:09:15,040
i had another meeting here and i had on

00:09:14,000 --> 00:09:17,040
my phone

00:09:15,040 --> 00:09:19,360
with a earplug to the other ear the

00:09:17,040 --> 00:09:23,839
third meeting

00:09:19,360 --> 00:09:23,839
um uh

00:09:26,240 --> 00:09:32,160
it can be very it was a lot

00:09:29,440 --> 00:09:33,120
but one of the things i found out and

00:09:32,160 --> 00:09:35,040
it's clear

00:09:33,120 --> 00:09:36,160
why we had so many meetings is the fact

00:09:35,040 --> 00:09:37,839
that

00:09:36,160 --> 00:09:40,320
you get so many people going into a

00:09:37,839 --> 00:09:41,760
meeting they have a lot of other things

00:09:40,320 --> 00:09:42,959
going on in their lives they

00:09:41,760 --> 00:09:46,240
they come out of the meeting with

00:09:42,959 --> 00:09:48,800
something that they thought they heard

00:09:46,240 --> 00:09:51,360
and by the next week you have a

00:09:48,800 --> 00:09:53,120
completely different plan

00:09:51,360 --> 00:09:56,320
you have 20 different plans going on

00:09:53,120 --> 00:09:56,320
when you need to have one

00:09:56,480 --> 00:10:00,560
we had a huge number of meetings in the

00:09:58,560 --> 00:10:02,160
middle and by the end of it we had

00:10:00,560 --> 00:10:04,079
a lot fewer meetings because everybody

00:10:02,160 --> 00:10:07,440
had gotten aware

00:10:04,079 --> 00:10:09,040
of the fact that this everybody was on

00:10:07,440 --> 00:10:11,120
step with everything it took a while to

00:10:09,040 --> 00:10:12,959
get everybody together on things

00:10:11,120 --> 00:10:14,399
and every time you get in somebody knew

00:10:12,959 --> 00:10:15,680
you had to have a bunch of meetings to

00:10:14,399 --> 00:10:18,959
get them back

00:10:15,680 --> 00:10:21,839
you know it was like hurting cats

00:10:18,959 --> 00:10:21,839
a lot of cats

00:10:24,000 --> 00:10:28,959
the plan for doing this

00:10:29,040 --> 00:10:36,240
turned into a very large large

00:10:32,640 --> 00:10:38,720
thing kevin came up with a minimum

00:10:36,240 --> 00:10:40,560
viable fedora

00:10:38,720 --> 00:10:41,920
we worked on what needed to be done

00:10:40,560 --> 00:10:45,120
there

00:10:41,920 --> 00:10:48,480
we built out a lot of

00:10:45,120 --> 00:10:51,040
the um we took down communa shift

00:10:48,480 --> 00:10:52,399
sent it to one center once one point we

00:10:51,040 --> 00:10:53,200
thought we'd have everything at one

00:10:52,399 --> 00:10:57,200
center

00:10:53,200 --> 00:11:00,320
but then we realized we had fewer racks

00:10:57,200 --> 00:11:04,160
than um

00:11:00,320 --> 00:11:07,680
we were uh expecting

00:11:04,160 --> 00:11:08,560
and that meant those things had to go

00:11:07,680 --> 00:11:13,120
somewhere else

00:11:08,560 --> 00:11:15,040
so uh moved to rdu

00:11:13,120 --> 00:11:16,560
at the same time as the minimum viable

00:11:15,040 --> 00:11:20,000
fedora systems got moved

00:11:16,560 --> 00:11:24,320
from um uh

00:11:20,000 --> 00:11:28,640
phoenix to um we then set up the

00:11:24,320 --> 00:11:30,399
the basics over a weekend and a half

00:11:28,640 --> 00:11:32,079
week and a half sorry and then got the

00:11:30,399 --> 00:11:34,399
systems going

00:11:32,079 --> 00:11:34,399
uh

00:11:35,120 --> 00:11:40,160
middle of march uh so

00:11:38,399 --> 00:11:42,720
originally we we thought we were going

00:11:40,160 --> 00:11:43,040
to be doing this in march and it ended

00:11:42,720 --> 00:11:46,079
up

00:11:43,040 --> 00:11:47,920
moving to may and then we finally got

00:11:46,079 --> 00:11:49,279
everything just pushed out the door in

00:11:47,920 --> 00:11:51,279
june

00:11:49,279 --> 00:11:55,200
most of that was due to the fact as

00:11:51,279 --> 00:11:58,320
everyone else is that covet 19

00:11:55,200 --> 00:12:00,240
uh removed a lot of mobility and such

00:11:58,320 --> 00:12:02,880
that we could

00:12:00,240 --> 00:12:04,480
travel to data centers and do things so

00:12:02,880 --> 00:12:08,399
instead we had to then

00:12:04,480 --> 00:12:10,800
um engage on hands help which also meant

00:12:08,399 --> 00:12:13,200
more meetings

00:12:10,800 --> 00:12:24,320
to get them up on speed and what needed

00:12:13,200 --> 00:12:28,880
to be done at each site

00:12:24,320 --> 00:12:32,079
next week yes sir

00:12:28,880 --> 00:12:35,279
uh so uh id2 which as

00:12:32,079 --> 00:12:38,160
misc is noting is the airport code of

00:12:35,279 --> 00:12:40,240
the nearest airport to the data center

00:12:38,160 --> 00:12:41,519
i guess red hat already has an iad-1

00:12:40,240 --> 00:12:44,800
that's an office

00:12:41,519 --> 00:12:48,160
somewhere so this became ied2

00:12:44,800 --> 00:12:49,760
we've got six racks which is

00:12:48,160 --> 00:12:51,839
much less than we had in phoenix but

00:12:49,760 --> 00:12:54,959
they're they're taller they're 52 u

00:12:51,839 --> 00:12:55,680
racks um five of them are for our

00:12:54,959 --> 00:12:58,160
machines

00:12:55,680 --> 00:12:59,519
and one of them is dedicated to storage

00:12:58,160 --> 00:13:03,200
so it has all the

00:12:59,519 --> 00:13:05,200
storage stuff in it um

00:13:03,200 --> 00:13:06,560
it has ipv6 as i mentioned we're going

00:13:05,200 --> 00:13:07,040
to probably be turning that on in the

00:13:06,560 --> 00:13:10,720
next

00:13:07,040 --> 00:13:14,000
month or so um we replaced

00:13:10,720 --> 00:13:17,600
a whole bunch of old dell r520s with

00:13:14,000 --> 00:13:19,600
fewer uh r4 640s

00:13:17,600 --> 00:13:21,920
and they're really nice they're they

00:13:19,600 --> 00:13:24,240
have a lot of a lot of resources and we

00:13:21,920 --> 00:13:25,120
can really densely pack vms on those

00:13:24,240 --> 00:13:29,440
things

00:13:25,120 --> 00:13:31,760
uh so it's been really great um

00:13:29,440 --> 00:13:34,160
so we have less room to grow there but

00:13:31,760 --> 00:13:36,000
we have a lot higher density there

00:13:34,160 --> 00:13:38,639
so we're using the space much more

00:13:36,000 --> 00:13:40,240
efficiently i think

00:13:38,639 --> 00:13:41,680
again the very fast interconnects and

00:13:40,240 --> 00:13:44,000
peering

00:13:41,680 --> 00:13:45,120
and 10 gig networking for pretty much

00:13:44,000 --> 00:13:47,760
everything

00:13:45,120 --> 00:13:49,360
so that's really improved things like

00:13:47,760 --> 00:13:52,720
schlepping images around

00:13:49,360 --> 00:13:54,399
or syncing uh data

00:13:52,720 --> 00:13:56,480
from one place to another et cetera et

00:13:54,399 --> 00:13:59,279
cetera

00:13:56,480 --> 00:14:00,720
um another thing was is i remember the

00:13:59,279 --> 00:14:02,800
first while we were under the minimum

00:14:00,720 --> 00:14:04,720
viable fedora and we had we were

00:14:02,800 --> 00:14:07,440
expecting we would not be able to run as

00:14:04,720 --> 00:14:10,240
many services as we had

00:14:07,440 --> 00:14:10,800
um we were able to run more services

00:14:10,240 --> 00:14:12,800
than

00:14:10,800 --> 00:14:14,399
because of the new servers have a lot

00:14:12,800 --> 00:14:18,480
more memory than we

00:14:14,399 --> 00:14:20,720
uh usually get but they also the 10 gig

00:14:18,480 --> 00:14:23,680
networks

00:14:20,720 --> 00:14:25,839
allowed uh seemed to even though we

00:14:23,680 --> 00:14:28,639
never saturated a one gig

00:14:25,839 --> 00:14:30,320
the latency and such between the two on

00:14:28,639 --> 00:14:33,920
the one gigs was enough to

00:14:30,320 --> 00:14:36,480
um cause things to be slower

00:14:33,920 --> 00:14:37,360
overall and builds seemed to have been

00:14:36,480 --> 00:14:40,399
improved

00:14:37,360 --> 00:14:43,839
under uh the 10 gig yeah one little

00:14:40,399 --> 00:14:44,480
tidbit here is that the updates pushes

00:14:43,839 --> 00:14:47,440
we push

00:14:44,480 --> 00:14:48,480
updates for all fedora all active

00:14:47,440 --> 00:14:51,199
fedoras

00:14:48,480 --> 00:14:53,120
and all of active apples and flat packs

00:14:51,199 --> 00:14:55,360
and containers and all those

00:14:53,120 --> 00:14:57,519
every day and now they're taking all of

00:14:55,360 --> 00:15:00,399
them about an hour and a half

00:14:57,519 --> 00:15:01,040
which is significantly less than it took

00:15:00,399 --> 00:15:04,079
in phoenix

00:15:01,040 --> 00:15:07,120
for that same pile of things

00:15:04,079 --> 00:15:07,920
yeah it was like a day at one point it

00:15:07,120 --> 00:15:13,839
was bad

00:15:07,920 --> 00:15:13,839
so uh next slide yes sir

00:15:15,120 --> 00:15:19,839
so uh what's left undone and there are

00:15:17,920 --> 00:15:22,720
still things that are undone

00:15:19,839 --> 00:15:23,680
uh rdu2 where we moved some amount of

00:15:22,720 --> 00:15:26,320
things as smooth

00:15:23,680 --> 00:15:27,600
mentioned we didn't have enough space or

00:15:26,320 --> 00:15:30,480
there were various other

00:15:27,600 --> 00:15:31,680
logistical issues so we moved some

00:15:30,480 --> 00:15:34,720
things to rdu-2

00:15:31,680 --> 00:15:36,560
and we thought at the time you know

00:15:34,720 --> 00:15:38,880
these these things are going to arrive

00:15:36,560 --> 00:15:40,959
uh that's local to smooch he can go

00:15:38,880 --> 00:15:42,560
there and work on it

00:15:40,959 --> 00:15:45,279
and it should be pretty easy to get

00:15:42,560 --> 00:15:48,639
things back up unfortunately

00:15:45,279 --> 00:15:51,440
uh covet 19 hit so there's very

00:15:48,639 --> 00:15:52,480
good restrictions on that data center

00:15:51,440 --> 00:15:54,800
and

00:15:52,480 --> 00:15:56,800
uh we're still trying to finish i82

00:15:54,800 --> 00:15:58,079
which is the higher priority so

00:15:56,800 --> 00:16:00,160
smooch can't really go down there

00:15:58,079 --> 00:16:02,720
because he's working on i82

00:16:00,160 --> 00:16:04,399
and we turns out we need to re-architect

00:16:02,720 --> 00:16:04,800
the way the network is set up because

00:16:04,399 --> 00:16:08,880
they're

00:16:04,800 --> 00:16:12,079
in a rack so there's all kinds of

00:16:08,880 --> 00:16:13,680
logistical issues around the rd2 stuff

00:16:12,079 --> 00:16:15,279
and we have been working to try and

00:16:13,680 --> 00:16:17,360
bring some of that online

00:16:15,279 --> 00:16:18,560
um some of it's obviously more important

00:16:17,360 --> 00:16:21,920
than others

00:16:18,560 --> 00:16:22,240
uh retrace instances there uh the copper

00:16:21,920 --> 00:16:25,120
uh

00:16:22,240 --> 00:16:25,600
ppc 64 le builders the arm maintainer

00:16:25,120 --> 00:16:29,360
test

00:16:25,600 --> 00:16:31,199
instances and um it's just going to take

00:16:29,360 --> 00:16:32,720
more time and it's going to be kind of

00:16:31,199 --> 00:16:34,800
its own project

00:16:32,720 --> 00:16:37,360
it kind of was part of this project but

00:16:34,800 --> 00:16:40,320
it's not had focus because

00:16:37,360 --> 00:16:40,720
everything has been trying to finish i82

00:16:40,320 --> 00:16:43,199
so

00:16:40,720 --> 00:16:44,399
we're we're going to try and concentrate

00:16:43,199 --> 00:16:47,360
on that as soon as we

00:16:44,399 --> 00:16:48,880
uh finish up the i82 stuff and hopefully

00:16:47,360 --> 00:16:50,959
get some of that stuff online

00:16:48,880 --> 00:16:52,000
but it's it's just been a lot harder

00:16:50,959 --> 00:16:55,120
than we

00:16:52,000 --> 00:16:55,839
anticipated uh staging is still being

00:16:55,120 --> 00:16:58,320
brought up

00:16:55,839 --> 00:16:59,759
um this has been complicated a little

00:16:58,320 --> 00:17:01,199
bit by the fact that we're

00:16:59,759 --> 00:17:03,839
building up our new authentication

00:17:01,199 --> 00:17:06,640
system in staging

00:17:03,839 --> 00:17:08,000
so we want uh to get that all set up so

00:17:06,640 --> 00:17:09,280
that we can deploy that later in

00:17:08,000 --> 00:17:10,720
production

00:17:09,280 --> 00:17:12,720
that's going to take over the next few

00:17:10,720 --> 00:17:14,959
weeks or so to finish

00:17:12,720 --> 00:17:15,919
bringing that stuff up and there's some

00:17:14,959 --> 00:17:18,480
open qa

00:17:15,919 --> 00:17:20,240
resources uh the secondary or sorry

00:17:18,480 --> 00:17:24,640
alternative architecture stuff

00:17:20,240 --> 00:17:25,919
uh arm bpc64 and some more workers for

00:17:24,640 --> 00:17:27,360
x86

00:17:25,919 --> 00:17:29,280
and those will probably come online the

00:17:27,360 --> 00:17:30,880
next month also

00:17:29,280 --> 00:17:32,799
they're there they're they're ready to

00:17:30,880 --> 00:17:34,640
go we just need to get them installed

00:17:32,799 --> 00:17:37,120
and set up on the right networking

00:17:34,640 --> 00:17:37,120
etc

00:17:39,679 --> 00:17:47,679
okay this move

00:17:43,440 --> 00:17:48,480
really needed a lot of help from a lot

00:17:47,679 --> 00:17:52,160
of people

00:17:48,480 --> 00:17:54,400
and there are not enough

00:17:52,160 --> 00:17:56,480
thank yous to everybody who has put up

00:17:54,400 --> 00:18:00,400
with this

00:17:56,480 --> 00:18:03,679
from family members to

00:18:00,400 --> 00:18:05,360
co-workers who dropped other projects

00:18:03,679 --> 00:18:07,280
to a lot of patients from a lot of

00:18:05,360 --> 00:18:10,160
people who

00:18:07,280 --> 00:18:10,799
had things they needed done right away

00:18:10,160 --> 00:18:13,360
but had

00:18:10,799 --> 00:18:15,760
realized that they could not until

00:18:13,360 --> 00:18:19,440
sometime in the future

00:18:15,760 --> 00:18:24,160
um i

00:18:19,440 --> 00:18:24,160
this is not a complete list um

00:18:25,440 --> 00:18:32,400
thank you all i'll add a shout out to

00:18:29,039 --> 00:18:34,880
uh isa for all of her organizational and

00:18:32,400 --> 00:18:36,000
helping herd all the various groups that

00:18:34,880 --> 00:18:38,080
we needed to meet with

00:18:36,000 --> 00:18:39,520
and setting things up and making sure

00:18:38,080 --> 00:18:42,400
things worked

00:18:39,520 --> 00:18:44,640
that was very very nice yes yes this

00:18:42,400 --> 00:18:48,160
project would not have gotten completed

00:18:44,640 --> 00:18:50,000
without ifa's uh amount of putting

00:18:48,160 --> 00:18:53,840
things together and keeping us on track

00:18:50,000 --> 00:18:57,840
and taking a lot of crap from people

00:18:53,840 --> 00:18:57,840
so thank you

00:18:58,000 --> 00:19:01,760
guys uh you did all the work

00:19:03,039 --> 00:19:06,400
all right we're down to the questions

00:19:04,880 --> 00:19:11,679
section i will

00:19:06,400 --> 00:19:16,640
uh on screen on uh to the full screen

00:19:11,679 --> 00:19:16,640
um i

00:19:17,280 --> 00:19:21,919
go back to the question picture because

00:19:18,880 --> 00:19:24,160
i like that picture

00:19:21,919 --> 00:19:25,919
i was actually going to be the only

00:19:24,160 --> 00:19:28,240
image i was going to use for this entire

00:19:25,919 --> 00:19:28,240
talk

00:19:28,480 --> 00:19:34,880
just variations of that one meme

00:19:32,640 --> 00:19:34,880
but

00:19:36,320 --> 00:19:42,080
so i am here to answer questions do we

00:19:39,679 --> 00:19:42,080
have any

00:19:50,160 --> 00:19:57,280
um in general i think that the

00:19:53,919 --> 00:20:00,559
um it'll take about

00:19:57,280 --> 00:20:03,600
a month of planning to

00:20:00,559 --> 00:20:06,640
figure out all the vlans and such uh

00:20:03,600 --> 00:20:09,360
how that's going to be done and where

00:20:06,640 --> 00:20:09,360
they're going to be

00:20:10,240 --> 00:20:14,080
and then we can look at implementing the

00:20:13,120 --> 00:20:20,480
plan

00:20:14,080 --> 00:20:22,720
for the rdu stand up so

00:20:20,480 --> 00:20:23,520
it's not even going to be as big as this

00:20:22,720 --> 00:20:26,240
i hope

00:20:23,520 --> 00:20:27,440
but because it's taken a while and a lot

00:20:26,240 --> 00:20:31,919
of other plans have been

00:20:27,440 --> 00:20:31,919
waiting it may hello

00:20:32,480 --> 00:20:36,640
it's okay it's all right

00:20:44,159 --> 00:20:51,440
uh we are not using ceph

00:20:47,440 --> 00:20:51,440
it is just not going to

00:20:51,520 --> 00:20:58,720
we do not have the physical hardware

00:20:54,960 --> 00:21:03,840
seth basically uh ceph and gluster

00:20:58,720 --> 00:21:03,840
and the other things basically trade

00:21:08,640 --> 00:21:16,080
the smarts of a net app to a smart civic

00:21:13,919 --> 00:21:17,360
i'd have to take the netapp down and

00:21:16,080 --> 00:21:20,880
fill it up with

00:21:17,360 --> 00:21:24,960
equivalent number of storage disks

00:21:20,880 --> 00:21:27,039
um of dells or

00:21:24,960 --> 00:21:29,760
super micros or whatever and i just

00:21:27,039 --> 00:21:32,159
don't have the space for it

00:21:29,760 --> 00:21:34,559
and so to go to it i'd have to drop a

00:21:32,159 --> 00:21:35,679
rack of other equipment which is then a

00:21:34,559 --> 00:21:38,960
sign of

00:21:35,679 --> 00:21:38,960
something else that's going to be done

00:21:40,240 --> 00:21:44,960
um yeah so the storage as smooth

00:21:43,360 --> 00:21:48,000
mentioned the storage is netapp

00:21:44,960 --> 00:21:48,400
right now because the red hat it folks

00:21:48,000 --> 00:21:51,919
are

00:21:48,400 --> 00:21:51,919
managing that for us and

00:21:52,240 --> 00:21:55,440
we have some rather large needs at the

00:21:54,159 --> 00:21:56,960
moment

00:21:55,440 --> 00:22:00,000
we've looked at some other things but

00:21:56,960 --> 00:22:03,360
yeah as smoosh mentioned we just have to

00:22:00,000 --> 00:22:07,039
expand so much in disks and managing

00:22:03,360 --> 00:22:07,760
and we just we don't have the staff to

00:22:07,039 --> 00:22:11,440
manage it

00:22:07,760 --> 00:22:11,440
we don't have the time to manage it

00:22:11,679 --> 00:22:16,159
it's everybody always thinks

00:22:14,720 --> 00:22:17,760
you know i've got this small thing and

00:22:16,159 --> 00:22:20,000
i've done it and it shouldn't take that

00:22:17,760 --> 00:22:22,480
long and all right my set us

00:22:20,000 --> 00:22:23,840
but we have to mirror our stuff through

00:22:22,480 --> 00:22:26,720
out the company

00:22:23,840 --> 00:22:26,720
we have to

00:22:29,120 --> 00:22:32,480
transfer the data around there is a

00:22:31,440 --> 00:22:35,679
large amount

00:22:32,480 --> 00:22:40,240
of things that require that want zero

00:22:35,679 --> 00:22:43,360
expect zero latency um

00:22:40,240 --> 00:22:47,120
and this

00:22:43,360 --> 00:22:50,159
setup of a ceph cluster

00:22:47,120 --> 00:22:53,600
or a and such is usually something it

00:22:50,159 --> 00:22:57,520
is asking for you know n

00:22:53,600 --> 00:23:01,919
front nodes y brick nodes

00:22:57,520 --> 00:23:04,559
k um and then

00:23:01,919 --> 00:23:05,600
they also want to have some control over

00:23:04,559 --> 00:23:09,039
the switch

00:23:05,600 --> 00:23:09,919
switches which we don't have and some

00:23:09,039 --> 00:23:12,400
other things

00:23:09,919 --> 00:23:12,400
it's

00:23:13,039 --> 00:23:16,640
setting up the stuff thing is going to

00:23:14,480 --> 00:23:18,640
be a as big a

00:23:16,640 --> 00:23:21,120
would be as big a project as moving us

00:23:18,640 --> 00:23:23,919
across the country

00:23:21,120 --> 00:23:26,000
as as misk asks about the uh mirroring

00:23:23,919 --> 00:23:27,919
feature of the netapp yes we are

00:23:26,000 --> 00:23:29,760
they are replicating all of our data

00:23:27,919 --> 00:23:33,039
over to rdu2

00:23:29,760 --> 00:23:36,240
uh to another netapp cluster there

00:23:33,039 --> 00:23:37,600
disaster recovery etc and then that data

00:23:36,240 --> 00:23:40,240
gets replicated

00:23:37,600 --> 00:23:41,679
on a different set of networks to uh

00:23:40,240 --> 00:23:46,480
throughout the engineering

00:23:41,679 --> 00:23:50,320
so it's there's not there's multiple

00:23:46,480 --> 00:23:53,360
snapping going on

00:23:50,320 --> 00:23:55,200
um we also are

00:23:53,360 --> 00:23:57,120
being able to use some of the features

00:23:55,200 --> 00:23:59,760
now because we have aws so

00:23:57,120 --> 00:24:01,679
uh some of the stuff we have backed up

00:23:59,760 --> 00:24:02,400
that we're probably we have to keep but

00:24:01,679 --> 00:24:05,039
we can't

00:24:02,400 --> 00:24:08,000
we don't ever want to look at like old

00:24:05,039 --> 00:24:11,919
builds for the s390

00:24:08,000 --> 00:24:16,080
and the ppc are being uh

00:24:11,919 --> 00:24:19,600
snap mirrored off to aws in glacier

00:24:16,080 --> 00:24:22,000
so allows us to do some things

00:24:19,600 --> 00:24:25,120
i expect we could do it all in ceph or

00:24:22,000 --> 00:24:29,120
some other storage thing it's just

00:24:25,120 --> 00:24:29,120
you know time

00:24:29,520 --> 00:24:34,080
and uh you either get bit you can either

00:24:32,559 --> 00:24:36,480
we can either set this up or we can do

00:24:34,080 --> 00:24:36,480
builds

00:24:37,200 --> 00:24:44,240
and i think everybody wants the builds

00:24:40,720 --> 00:24:44,240
as much as they want something else

00:24:44,400 --> 00:24:49,840
all right uh um

00:24:55,760 --> 00:24:58,559
there was one question earlier i don't

00:24:57,039 --> 00:24:59,279
know where they got you because i've

00:24:58,559 --> 00:25:01,760
talked about

00:24:59,279 --> 00:25:03,039
um zach wanted to know what the oldest

00:25:01,760 --> 00:25:06,159
box in

00:25:03,039 --> 00:25:06,400
uh center was and also with everything

00:25:06,159 --> 00:25:10,159
on

00:25:06,400 --> 00:25:11,520
a one gig network so on the old network

00:25:10,159 --> 00:25:11,760
oh that was the other thing we got rid

00:25:11,520 --> 00:25:16,120
of

00:25:11,760 --> 00:25:20,720
uh we got rid of some ibm um

00:25:16,120 --> 00:25:22,159
x-3550s uh that i'd gotten in 2009 and

00:25:20,720 --> 00:25:25,360
had been using

00:25:22,159 --> 00:25:28,400
for various services until

00:25:25,360 --> 00:25:30,320
uh we

00:25:28,400 --> 00:25:34,360
that was part of it was not just the

00:25:30,320 --> 00:25:37,279
r520s which we got into

00:25:34,360 --> 00:25:41,520
2012 i think there were several

00:25:37,279 --> 00:25:42,960
um back before ibm sold these to lenovo

00:25:41,520 --> 00:25:47,520
so this is

00:25:42,960 --> 00:25:52,159
um they were the um x series

00:25:47,520 --> 00:25:55,679
system x uh systems that we had gotten

00:25:52,159 --> 00:25:58,799
and um

00:25:55,679 --> 00:26:02,240
our data analysis backups

00:25:58,799 --> 00:26:02,799
law some log analysis and some other

00:26:02,240 --> 00:26:07,279
things

00:26:02,799 --> 00:26:10,559
uh and all of that cloud hardware

00:26:07,279 --> 00:26:14,080
was on that then we had

00:26:10,559 --> 00:26:15,200
um currently the oldest equipment i

00:26:14,080 --> 00:26:20,240
think we have

00:26:15,200 --> 00:26:23,760
is we have some six-year-old dell r630s

00:26:20,240 --> 00:26:27,120
and a couple of us

00:26:23,760 --> 00:26:27,760
loaner equipment that ibm grace uh loans

00:26:27,120 --> 00:26:30,799
us which

00:26:27,760 --> 00:26:32,480
are um for the power systems

00:26:30,799 --> 00:26:34,000
there's a couple of power eights that

00:26:32,480 --> 00:26:39,039
are probably of the same

00:26:34,000 --> 00:26:41,279
error as the uh six years or older

00:26:39,039 --> 00:26:41,279
um

00:26:45,120 --> 00:26:51,120
no it does not we we jokingly asked that

00:26:49,279 --> 00:26:53,840
question a number of times but

00:26:51,120 --> 00:26:53,840
yes yes

00:26:54,880 --> 00:27:00,720
thank you misk thank you i'll have

00:26:56,799 --> 00:27:00,720
flashbacks now for the next three hours

00:27:03,600 --> 00:27:08,159
for anyone who doesn't understand that

00:27:05,360 --> 00:27:09,760
it's a running joke because there's

00:27:08,159 --> 00:27:11,520
uh certain people who are very

00:27:09,760 --> 00:27:14,480
interested in internet too

00:27:11,520 --> 00:27:16,880
but most for the most part it's not very

00:27:14,480 --> 00:27:16,880
relevant

00:27:18,320 --> 00:27:23,440
uh we had um um

00:27:21,440 --> 00:27:25,600
so the final question i think we'll call

00:27:23,440 --> 00:27:28,880
this quits um

00:27:25,600 --> 00:27:31,679
uh we our management software

00:27:28,880 --> 00:27:32,720
uh was split across multiple things i

00:27:31,679 --> 00:27:35,200
had

00:27:32,720 --> 00:27:37,679
for the dell for the ibm systems i keep

00:27:35,200 --> 00:27:40,000
a uh

00:27:37,679 --> 00:27:41,760
windows xp box so i can get into the

00:27:40,000 --> 00:27:44,720
management systems of the old

00:27:41,760 --> 00:27:46,480
ibm's i can finally retire that so that

00:27:44,720 --> 00:27:50,159
uh

00:27:46,480 --> 00:27:53,679
i don't have to do that uh currently

00:27:50,159 --> 00:27:56,960
the and the dell 520s

00:27:53,679 --> 00:28:00,159
and the 20 series were all idrac 7's

00:27:56,960 --> 00:28:04,320
and i found that uh

00:28:00,159 --> 00:28:04,320
java 10 does not work well with it

00:28:04,720 --> 00:28:09,600
so we're now able to use html

00:28:10,080 --> 00:28:13,600
consoles for most of everything which is

00:28:12,559 --> 00:28:16,799
okay except

00:28:13,600 --> 00:28:18,159
i'm an emacs user and so my hands use a

00:28:16,799 --> 00:28:22,080
lot of control keys

00:28:18,159 --> 00:28:25,520
and that causes the browser to

00:28:22,080 --> 00:28:25,520
print things to my printer

00:28:26,000 --> 00:28:29,919
another challenge that we're going to

00:28:27,520 --> 00:28:30,880
hit very very very soon is that firefox

00:28:29,919 --> 00:28:33,919
just turned off

00:28:30,880 --> 00:28:37,279
tls 1.1 and 1.2

00:28:33,919 --> 00:28:38,640
so um that's going to break vast

00:28:37,279 --> 00:28:40,320
quantities of these things so we're

00:28:38,640 --> 00:28:41,760
going to have to keep an old vm around

00:28:40,320 --> 00:28:44,880
or something

00:28:41,760 --> 00:28:47,200
yeah i'm thinking yep i think we'll be

00:28:44,880 --> 00:28:48,799
setting up a squid proxy as the thing is

00:28:47,200 --> 00:28:50,640
what people have been saying

00:28:48,799 --> 00:28:54,000
because it's all those systems are on a

00:28:50,640 --> 00:28:54,000
locked down network anyway

00:28:54,399 --> 00:28:59,840
uh that's about it for us

00:29:04,960 --> 00:29:12,960
and i hope you all have enjoyed this

00:29:08,000 --> 00:29:15,760
move as much as i have

00:29:12,960 --> 00:29:16,880
let's never do it again uh we'll be

00:29:15,760 --> 00:29:21,919
doing another move

00:29:16,880 --> 00:29:21,919
in three years thank you see us again

00:29:22,120 --> 00:29:25,120

YouTube URL: https://www.youtube.com/watch?v=w0MO-uDgBEI


