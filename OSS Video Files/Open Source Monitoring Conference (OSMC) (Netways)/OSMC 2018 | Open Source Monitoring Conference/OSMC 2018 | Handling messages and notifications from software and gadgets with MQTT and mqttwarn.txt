Title: OSMC 2018 | Handling messages and notifications from software and gadgets with MQTT and mqttwarn
Publication date: 2018-11-20
Playlist: OSMC 2018 | Open Source Monitoring Conference
Description: 
	... by Jan-Piet Mens

MQTT is a simple, lightweight, TCP-based protocol which can be used for having “things” such as sensors report data, but it can also be used in your software projects as a flexible method of distributing messages and notifications. In this talk we will show you what MQTT is, what its Last Wills and Testaments can do for monitoring your long-running processes, and how you can route MQTT messages through brokers. We will show you some examples of real-world MQTT use, and we discuss the mqttwarn utility which allows you to decouple MQTT message notifications from your systems. Be warned: there will be blinkenlights!

NETWAYS
Konferenzen: https://www.netways.de/events
Schulungen: https://www.netways.de/schulungen
Shop: https://shop.netways.de/
Blog: http://blog.netways.de/
NWS: https://nws.netways.de

Webinare
Archiv Link: https://www.netways.de/webinare/archi...
Aktuell: https://www.netways.de/wb

Social Media
SlideShare: http://de.slideshare.net/netways
YouTube: https://www.netways.de/youtube
Facebook: https://www.facebook.com/netways
Twitter: https://twitter.com/netways
Instagram: https://www.instagram.com/netwaysgmbh/

www.musicfox.com
Captions: 
	00:00:01,940 --> 00:00:16,740
[Music]

00:00:12,139 --> 00:00:18,150
good afternoon and congratulations to

00:00:16,740 --> 00:00:21,750
Christian for having said it without

00:00:18,150 --> 00:00:24,060
stumbling that's yeah very good so good

00:00:21,750 --> 00:00:25,920
afternoon I'm JP or JP meant many of you

00:00:24,060 --> 00:00:27,930
know me I'm a consultant I do all sorts

00:00:25,920 --> 00:00:30,060
of things particularly I do a lot with

00:00:27,930 --> 00:00:32,130
DNS at on quite a bit of things with

00:00:30,060 --> 00:00:33,420
ansible quite a bit of contribution

00:00:32,130 --> 00:00:35,250
contribution so ansible

00:00:33,420 --> 00:00:36,540
and I do sort of little bits and things

00:00:35,250 --> 00:00:38,940
and one of the little bits and things

00:00:36,540 --> 00:00:42,540
I've been doing over the last year some

00:00:38,940 --> 00:00:44,070
of you may or may not know is been

00:00:42,540 --> 00:00:47,280
working with the protocol which is

00:00:44,070 --> 00:00:51,660
called MQTT who may see hands who's

00:00:47,280 --> 00:00:53,850
heard of MQTT ok for the camera I'll see

00:00:51,660 --> 00:00:57,600
a proximately 50% who's actually worked

00:00:53,850 --> 00:01:02,280
with MQTT Oh quite quite a few that's

00:00:57,600 --> 00:01:04,830
32.7% very good can you tell me please

00:01:02,280 --> 00:01:08,970
all those who have worked with MQTT why

00:01:04,830 --> 00:01:13,409
I show this bottle of Ananas or

00:01:08,970 --> 00:01:16,950
pineapple liqueur you have not worked

00:01:13,409 --> 00:01:19,470
with MQTT otherwise you would know that

00:01:16,950 --> 00:01:20,100
now it's not the pineapple it's the

00:01:19,470 --> 00:01:25,170
brand

00:01:20,100 --> 00:01:30,390
it's called 1883 and 1883 is the IANA

00:01:25,170 --> 00:01:30,600
allocated TCP port number 4 ah there we

00:01:30,390 --> 00:01:33,090
go

00:01:30,600 --> 00:01:35,630
right ok so they also make chocolate

00:01:33,090 --> 00:01:35,630
sauce anyway

00:01:35,640 --> 00:01:38,880
just a very short I'm not going to tell

00:01:37,560 --> 00:01:40,770
you a lot about in beauty I'm going to

00:01:38,880 --> 00:01:42,240
tell you about a lot of of use-cases

00:01:40,770 --> 00:01:44,130
foreign qtt which i think is more

00:01:42,240 --> 00:01:47,909
important a bit you can read about the

00:01:44,130 --> 00:01:49,310
protocol other places MQTT is a very

00:01:47,909 --> 00:01:51,479
lightweight protocol it's a

00:01:49,310 --> 00:01:55,590
publish/subscribe standard it is

00:01:51,479 --> 00:01:57,450
tcp-based not you repeaters tcp-based it

00:01:55,590 --> 00:01:59,970
is designed for unreliable networks

00:01:57,450 --> 00:02:02,670
unreliable networks is for example what

00:01:59,970 --> 00:02:05,369
you have in your in your most of you

00:02:02,670 --> 00:02:07,110
anyway in your purses or in your pockets

00:02:05,369 --> 00:02:09,300
and the smartphone so it's horrendous ly

00:02:07,110 --> 00:02:11,220
unreliable here we have Wi-Fi which is

00:02:09,300 --> 00:02:14,010
terribly unreliable then we go out and

00:02:11,220 --> 00:02:16,680
we have 4g and then we have 3g and then

00:02:14,010 --> 00:02:18,420
we have o to Ori plus which is a German

00:02:16,680 --> 00:02:20,489
that sense or offline okay and then we

00:02:18,420 --> 00:02:21,540
come back then we come back to the

00:02:20,489 --> 00:02:24,090
Holiday Inn and then we're completely

00:02:21,540 --> 00:02:25,620
offline so that's for very unreliable

00:02:24,090 --> 00:02:28,769
networks and we have quite a bit of

00:02:25,620 --> 00:02:30,959
experience with MQTT on mobile devices

00:02:28,769 --> 00:02:32,970
because we create a reproach it called

00:02:30,959 --> 00:02:34,290
own tracks which does location tracking

00:02:32,970 --> 00:02:37,200
I'll tell you I'll show you a screenshot

00:02:34,290 --> 00:02:39,630
and a location tracking based on MQTT

00:02:37,200 --> 00:02:41,160
for smartphones so if you ever want to

00:02:39,630 --> 00:02:43,079
do something that's really horror that

00:02:41,160 --> 00:02:46,190
is anything else to do with mobile and

00:02:43,079 --> 00:02:47,820
mobile communication anyway so MQTT is a

00:02:46,190 --> 00:02:50,190
publish/subscribe thought to call it's

00:02:47,820 --> 00:02:54,090
lightweight it can carry binary payloads

00:02:50,190 --> 00:02:56,370
of in in theory up to 256 megabyte

00:02:54,090 --> 00:02:59,880
I say in theory because I have here for

00:02:56,370 --> 00:03:01,650
example little esp8266 microcontroller

00:02:59,880 --> 00:03:04,860
which costs a fortune they're very very

00:03:01,650 --> 00:03:05,910
expensive and it also does MQTT and i'll

00:03:04,860 --> 00:03:07,950
prove that to you in a moment

00:03:05,910 --> 00:03:09,750
now a little microcontroller has a few

00:03:07,950 --> 00:03:13,079
kilobytes of RAM can of course not

00:03:09,750 --> 00:03:17,610
handle 256 megabytes of payload so this

00:03:13,079 --> 00:03:19,860
is more of a theoretical amount based on

00:03:17,610 --> 00:03:22,470
on large clients on fat cards okay but

00:03:19,860 --> 00:03:25,860
not necessarily for for thin or very

00:03:22,470 --> 00:03:27,930
small clients MQTT does TLS transport

00:03:25,860 --> 00:03:29,579
layer security none of you know what

00:03:27,930 --> 00:03:31,769
that is you'll call it by the wrong name

00:03:29,579 --> 00:03:33,150
called SSL it hasn't been called as a

00:03:31,769 --> 00:03:36,209
cell for the last 20 years it's called

00:03:33,150 --> 00:03:38,750
TLS transport layer security anyway we

00:03:36,209 --> 00:03:41,880
do authentication we can do payload

00:03:38,750 --> 00:03:44,550
encryption of course in mqtt also the

00:03:41,880 --> 00:03:45,900
very nice things and what else we have

00:03:44,550 --> 00:03:47,319
we have something which is called a last

00:03:45,900 --> 00:03:49,719
will and testament

00:03:47,319 --> 00:03:52,060
and last will and testament is what you

00:03:49,719 --> 00:03:53,739
and I if we are sensible people we we

00:03:52,060 --> 00:03:54,969
fill one in just before we died not

00:03:53,739 --> 00:03:56,019
actually a long time before we die

00:03:54,969 --> 00:03:58,420
because we don't know when we're gonna

00:03:56,019 --> 00:04:01,359
die and that is exactly the same thing

00:03:58,420 --> 00:04:02,049
in mqtt I'm going to show you that in a

00:04:01,359 --> 00:04:06,219
moment

00:04:02,049 --> 00:04:08,500
and MQTT clients speak to each other via

00:04:06,219 --> 00:04:10,480
a server and the server is called

00:04:08,500 --> 00:04:12,849
a broker this broker there's nothing

00:04:10,480 --> 00:04:16,449
else it's a very fancy name for a server

00:04:12,849 --> 00:04:18,489
and this brokers here centralizing them

00:04:16,449 --> 00:04:20,229
in the in the center here and we have

00:04:18,489 --> 00:04:21,509
the clients around this broker we have

00:04:20,229 --> 00:04:23,830
on the left here a few publishers

00:04:21,509 --> 00:04:25,870
publisher is something something or or

00:04:23,830 --> 00:04:27,900
an application or a program or a sensor

00:04:25,870 --> 00:04:30,430
or an actuator which actually creates

00:04:27,900 --> 00:04:32,289
messages and these messages are

00:04:30,430 --> 00:04:34,599
transferred and transported to the

00:04:32,289 --> 00:04:37,330
broker the broker then on the certain

00:04:34,599 --> 00:04:40,360
certain circumstances transfers these to

00:04:37,330 --> 00:04:44,139
a waiting subscriber if the subscriber

00:04:40,360 --> 00:04:45,820
is subscribed to a so called topic what

00:04:44,139 --> 00:04:48,280
it is I'll tell you in a moment so a so

00:04:45,820 --> 00:04:50,020
called topic which is the same topic to

00:04:48,280 --> 00:04:52,449
which a publisher is publishing if the

00:04:50,020 --> 00:04:54,940
publisher publishes to a topic and there

00:04:52,449 --> 00:04:57,430
is at least one subscriber to that topic

00:04:54,940 --> 00:05:00,270
then a message is transferred via the

00:04:57,430 --> 00:05:03,340
broker a publisher can also publish

00:05:00,270 --> 00:05:05,710
messages to a broker if there are no

00:05:03,340 --> 00:05:08,099
subscribers listening then those

00:05:05,710 --> 00:05:11,500
messages die they just disappear okay

00:05:08,099 --> 00:05:14,530
topics also generally speaking do not

00:05:11,500 --> 00:05:18,070
need to be pre allocated or a predefined

00:05:14,530 --> 00:05:20,680
the fact that a very publisher publishes

00:05:18,070 --> 00:05:23,009
to a particular topic means that topic

00:05:20,680 --> 00:05:25,780
is created and suddenly then available

00:05:23,009 --> 00:05:27,280
what we can have is our of course

00:05:25,780 --> 00:05:29,770
clients here at the bottom we have one

00:05:27,280 --> 00:05:32,889
for example which do publish and

00:05:29,770 --> 00:05:34,570
subscribe so as an example for something

00:05:32,889 --> 00:05:35,650
like that I'll be showing your practical

00:05:34,570 --> 00:05:37,870
example in a moment and there's an

00:05:35,650 --> 00:05:39,849
example something like that assume you

00:05:37,870 --> 00:05:41,800
have maybe a small sensor which you

00:05:39,849 --> 00:05:42,940
bought in the United States that's one

00:05:41,800 --> 00:05:44,469
of the three countries in the world that

00:05:42,940 --> 00:05:45,810
doesn't know anything about metric the

00:05:44,469 --> 00:05:49,180
metric system

00:05:45,810 --> 00:05:53,530
apropos United States any news

00:05:49,180 --> 00:05:56,650
anyway that's a different topic and the

00:05:53,530 --> 00:05:58,210
the that temperature sensor would

00:05:56,650 --> 00:06:00,159
publish in something called Fahrenheit

00:05:58,210 --> 00:06:01,009
now we don't understand for our night so

00:06:00,159 --> 00:06:05,330
what we would probably

00:06:01,009 --> 00:06:07,550
is to write a small client just quite

00:06:05,330 --> 00:06:10,219
regularly done just a few lines of for

00:06:07,550 --> 00:06:12,559
example Python or any of your preferred

00:06:10,219 --> 00:06:14,569
languages write a small client which

00:06:12,559 --> 00:06:16,039
subscribes to that Fahrenheit

00:06:14,569 --> 00:06:17,419
temperature converts it to Celsius

00:06:16,039 --> 00:06:20,029
andrey publishes it

00:06:17,419 --> 00:06:22,849
for example under different topic ok so

00:06:20,029 --> 00:06:25,159
clients which subscribe and publish

00:06:22,849 --> 00:06:28,659
which can subscribe and for Islam pre

00:06:25,159 --> 00:06:32,270
publish or something that's quite quite

00:06:28,659 --> 00:06:34,460
frequently done so these brokers in the

00:06:32,270 --> 00:06:36,050
center those are our servers there are a

00:06:34,460 --> 00:06:38,300
number of different kinds of broker

00:06:36,050 --> 00:06:40,069
there's a broker called mosquito for

00:06:38,300 --> 00:06:43,729
example written in the C language

00:06:40,069 --> 00:06:46,279
written by a man called Roger a light by

00:06:43,729 --> 00:06:48,770
the way the the English flies spelt with

00:06:46,279 --> 00:06:52,099
one T Roger was looking for a word that

00:06:48,770 --> 00:06:55,189
contains MQTT that's why the mosquito is

00:06:52,099 --> 00:07:00,979
incorrectly spelled a very popular

00:06:55,189 --> 00:07:03,129
broker open source it supports basically

00:07:00,979 --> 00:07:06,349
all features that mqtt has and some more

00:07:03,129 --> 00:07:09,909
including TLS peace PSK pre-shared keys

00:07:06,349 --> 00:07:13,219
for example and yes very popular

00:07:09,909 --> 00:07:15,860
available in all decent repositories are

00:07:13,219 --> 00:07:20,779
apt-get or whatever yum install is that

00:07:15,860 --> 00:07:22,939
so-called yum anyway right another

00:07:20,779 --> 00:07:24,620
broker which is extremely capable is

00:07:22,939 --> 00:07:26,719
written in error Lang er Lang is this

00:07:24,620 --> 00:07:28,249
language that is in German you say in

00:07:26,719 --> 00:07:31,519
caputo it doesn't it doesn't go

00:07:28,249 --> 00:07:34,430
it doesn't go it doesn't go kaput in

00:07:31,519 --> 00:07:39,469
theory anyway Vernon Q very very popular

00:07:34,430 --> 00:07:40,879
also highly capable it country to

00:07:39,469 --> 00:07:42,889
mosquito for example also allows

00:07:40,879 --> 00:07:47,300
clustering which is very interesting for

00:07:42,889 --> 00:07:48,559
high-volume scenarios other than that it

00:07:47,300 --> 00:07:50,990
also has a lot of features and there a

00:07:48,559 --> 00:07:53,870
number of other broker system written in

00:07:50,990 --> 00:07:55,279
Java if you absolutely must as hive mq

00:07:53,870 --> 00:07:58,699
for example which is commercial product

00:07:55,279 --> 00:08:01,669
this rabbitmq which is not per se a and

00:07:58,699 --> 00:08:07,189
QT t broker it's an AMQP broker but it

00:08:01,669 --> 00:08:09,310
has also a a QT t connector today so I

00:08:07,189 --> 00:08:11,870
spoke about topics topics are a

00:08:09,310 --> 00:08:15,440
hierarchical name

00:08:11,870 --> 00:08:19,610
or hierarchical names separated a topic

00:08:15,440 --> 00:08:21,230
can be 64 kilobyte utf-8 characters that

00:08:19,610 --> 00:08:25,670
should be enough for most applications

00:08:21,230 --> 00:08:27,800
the the definition of the topic or what

00:08:25,670 --> 00:08:29,930
a topic looks like that is up to you

00:08:27,800 --> 00:08:31,640
there's the up to the the application

00:08:29,930 --> 00:08:34,460
creator here are a number of examples so

00:08:31,640 --> 00:08:36,050
we have for example a apparently a

00:08:34,460 --> 00:08:38,120
kettle I don't know why you would want a

00:08:36,050 --> 00:08:40,100
couple that speaks MQTT but if you do

00:08:38,120 --> 00:08:42,620
then you you might have a couple that

00:08:40,100 --> 00:08:44,990
listens to or publishes to a topic

00:08:42,620 --> 00:08:47,630
called home ground-floor kitchens left

00:08:44,990 --> 00:08:50,090
kettle then you might have some sort of

00:08:47,630 --> 00:08:53,330
financial system that publishes rates on

00:08:50,090 --> 00:08:55,640
the finance / currency / rate and the

00:08:53,330 --> 00:08:57,560
topics with the with a in blue here

00:08:55,640 --> 00:08:59,210
those are typically topics know

00:08:57,560 --> 00:09:01,580
exclusively sorry topics that a

00:08:59,210 --> 00:09:04,670
subscriber would use so for example

00:09:01,580 --> 00:09:06,860
finance / + / rate that + stands for a

00:09:04,670 --> 00:09:10,250
single topic branch a single topic level

00:09:06,860 --> 00:09:13,070
but a wild card but just one level so we

00:09:10,250 --> 00:09:16,370
would find your finance yen rate or

00:09:13,070 --> 00:09:18,320
finance about a Thai Baht rate etc okay

00:09:16,370 --> 00:09:21,590
and here at the bottom where for example

00:09:18,320 --> 00:09:24,230
own track / JP m / hash the hash it's a

00:09:21,590 --> 00:09:26,900
little bit comparable to a UNIX asterisk

00:09:24,230 --> 00:09:33,160
and in filename globbing that would send

00:09:26,900 --> 00:09:37,610
for a any amount of levels in any depth

00:09:33,160 --> 00:09:39,530
whatsoever okay topics can become as I

00:09:37,610 --> 00:09:41,540
say quite long quite complicated here we

00:09:39,530 --> 00:09:42,980
have one open have searched home open

00:09:41,540 --> 00:09:46,070
have you heard who was here this morning

00:09:42,980 --> 00:09:50,180
was openhab okay what I'm telling you by

00:09:46,070 --> 00:09:52,940
the way is one of the well maybe mariana

00:09:50,180 --> 00:09:55,880
won't agree with me but for me it is one

00:09:52,940 --> 00:09:58,400
of the main controllers for open hat so

00:09:55,880 --> 00:10:02,270
I do I do a lot with our hab and almost

00:09:58,400 --> 00:10:05,240
exclusively with MQTT so open haps left

00:10:02,270 --> 00:10:07,100
home e / then the strange-looking serial

00:10:05,240 --> 00:10:09,470
number / Dalisay - slash of time so

00:10:07,100 --> 00:10:13,010
these topics can can get very long and

00:10:09,470 --> 00:10:14,960
unwieldy what brokers and then I've

00:10:13,010 --> 00:10:16,760
finished with the blue the whole sort of

00:10:14,960 --> 00:10:18,950
server architecture the what brokers can

00:10:16,760 --> 00:10:22,490
typically also do not necessarily but

00:10:18,950 --> 00:10:25,130
typically also do is bridging we use

00:10:22,490 --> 00:10:27,730
this a lot

00:10:25,130 --> 00:10:33,470
when I say we I mean well we that's

00:10:27,730 --> 00:10:35,750
other people and I I didn't want to go

00:10:33,470 --> 00:10:39,440
into details right now we use this a lot

00:10:35,750 --> 00:10:41,570
in order to transfer data for example at

00:10:39,440 --> 00:10:42,950
one data center into another now when I

00:10:41,570 --> 00:10:45,050
say data I don't necessarily mean a

00:10:42,950 --> 00:10:46,100
temperature sensor because I don't

00:10:45,050 --> 00:10:47,960
really care what the temperature is

00:10:46,100 --> 00:10:49,670
outside of the data center but when I

00:10:47,960 --> 00:10:52,700
say date I mean all sorts of data so for

00:10:49,670 --> 00:10:55,760
example we do monitoring we do also the

00:10:52,700 --> 00:10:58,610
things we collect data in one data

00:10:55,760 --> 00:11:00,710
center and we collected and pump it in

00:10:58,610 --> 00:11:03,740
turn and qtt broker and we can bridge

00:11:00,710 --> 00:11:07,280
then out a topic a number of topics

00:11:03,740 --> 00:11:09,080
whole bunch of topics out to a second

00:11:07,280 --> 00:11:10,460
broker for example either in a different

00:11:09,080 --> 00:11:13,130
data center or in a different location

00:11:10,460 --> 00:11:15,440
for example backups and the the great

00:11:13,130 --> 00:11:17,600
advantage of this is we have then one

00:11:15,440 --> 00:11:19,580
outgoing respectively incoming depending

00:11:17,600 --> 00:11:23,200
on how we configure it one outgoing one

00:11:19,580 --> 00:11:25,550
incoming a TCP connection which is

00:11:23,200 --> 00:11:27,170
optionally of course encrypted with TLS

00:11:25,550 --> 00:11:28,340
so it's a it's a wonderful way of

00:11:27,170 --> 00:11:31,460
getting a whole bunch of different

00:11:28,340 --> 00:11:34,190
different data out of a center and as I

00:11:31,460 --> 00:11:36,230
say irrespective of of sensors know what

00:11:34,190 --> 00:11:37,790
I'm telling you here is a little bit

00:11:36,230 --> 00:11:39,830
about sensors but also about all sort of

00:11:37,790 --> 00:11:44,710
other things the other things you'll

00:11:39,830 --> 00:11:48,230
have to imagine a bit ok right we have

00:11:44,710 --> 00:11:50,000
two main client utilities which are also

00:11:48,230 --> 00:11:52,070
provided by the mosquito project and

00:11:50,000 --> 00:11:54,190
that is mosquito sub which has about

00:11:52,070 --> 00:11:56,750
five thousand seven or seven ninety two

00:11:54,190 --> 00:11:58,250
options there are Rutter light is

00:11:56,750 --> 00:12:02,360
currently working on another option

00:11:58,250 --> 00:12:05,540
called - Y which will allow MQTT version

00:12:02,360 --> 00:12:07,820
5 parameters we set so we have mosquito

00:12:05,540 --> 00:12:09,830
sub - V is verbose and you can specify

00:12:07,820 --> 00:12:11,690
house and port and whether you have TLS

00:12:09,830 --> 00:12:14,390
or certificates etc it's just a few

00:12:11,690 --> 00:12:16,040
options here and - t topic here for

00:12:14,390 --> 00:12:18,080
example topics there's hash for just a

00:12:16,040 --> 00:12:20,930
hash whatever and we have mosquito pub

00:12:18,080 --> 00:12:22,700
which is a publishing side optionally

00:12:20,930 --> 00:12:24,200
with the retain message if we have a bit

00:12:22,700 --> 00:12:25,760
of time I'll tell you what this and

00:12:24,200 --> 00:12:28,970
otherwise I'm sorry is the topic missing

00:12:25,760 --> 00:12:34,670
- tea topic and - M would then be the

00:12:28,970 --> 00:12:35,459
payload language bindings for MQTT exist

00:12:34,670 --> 00:12:37,679
in

00:12:35,459 --> 00:12:39,720
I think all languages the only one I

00:12:37,679 --> 00:12:43,050
haven't found that was COBOL that didn't

00:12:39,720 --> 00:12:47,279
have one but the good news is there is a

00:12:43,050 --> 00:12:51,509
cobalt bridge for no GS so your

00:12:47,279 --> 00:12:52,529
afternoon is is yeah you often say if

00:12:51,509 --> 00:12:58,410
you don't want to go to the party

00:12:52,529 --> 00:13:01,619
tonight you know what to do right okay

00:12:58,410 --> 00:13:03,360
so practical solutions why why mqtt why

00:13:01,619 --> 00:13:05,579
why do we do why do why do people do

00:13:03,360 --> 00:13:08,579
mqtt MKT by the way is now almost twenty

00:13:05,579 --> 00:13:10,819
years old and has been used in the past

00:13:08,579 --> 00:13:11,999
and still continues being used for

00:13:10,819 --> 00:13:17,069
alerting

00:13:11,999 --> 00:13:18,869
alerting monitoring alerting metering so

00:13:17,069 --> 00:13:21,119
for example there are electricity

00:13:18,869 --> 00:13:24,149
metering products which come out of the

00:13:21,119 --> 00:13:25,230
box configurable with MQTT more in the

00:13:24,149 --> 00:13:27,059
commercial area

00:13:25,230 --> 00:13:31,399
there's even an espresso machine made by

00:13:27,059 --> 00:13:33,119
Italians which uses MQTT for pushing out

00:13:31,399 --> 00:13:34,949
statistics how many cups of espresso

00:13:33,119 --> 00:13:38,300
were made how many beans were used etc

00:13:34,949 --> 00:13:41,399
I'm not kidding you by the way no

00:13:38,300 --> 00:13:43,439
amputee is used a lot for logging MQTT

00:13:41,399 --> 00:13:45,319
is used for location awareness one of

00:13:43,439 --> 00:13:47,819
the products that you have you have is

00:13:45,319 --> 00:13:52,199
own tracks here you have two screenshots

00:13:47,819 --> 00:13:54,179
on the left is a screenshot of Android

00:13:52,199 --> 00:13:59,369
on the right of a dip slightly different

00:13:54,179 --> 00:14:02,939
view in in iOS it's an open-source MQTT

00:13:59,369 --> 00:14:05,670
based application we use mqtt for

00:14:02,939 --> 00:14:07,529
automation was saying openhab earlier

00:14:05,670 --> 00:14:11,569
for controlling fall so two things so

00:14:07,529 --> 00:14:14,519
all sorts of things speak MQTT you have

00:14:11,569 --> 00:14:16,110
simple devices and you have complicated

00:14:14,519 --> 00:14:18,990
device and of course in software we do a

00:14:16,110 --> 00:14:23,189
lot of MQTT so for example you have all

00:14:18,990 --> 00:14:28,829
sorts of yeah Internet of toilets is the

00:14:23,189 --> 00:14:30,509
word I think okay so let's let's see a

00:14:28,829 --> 00:14:32,309
little bit of nqt I'm good now I'm going

00:14:30,509 --> 00:14:35,970
to show you two things now I'm going to

00:14:32,309 --> 00:14:39,480
hand this over this is live okay so

00:14:35,970 --> 00:14:42,059
don't don't kaput it don't break it yeah

00:14:39,480 --> 00:14:44,309
don't pull the plug if you pull the plug

00:14:42,059 --> 00:14:46,740
my demo dies and be very pissed off if

00:14:44,309 --> 00:14:48,520
you do that so I hand this around now

00:14:46,740 --> 00:14:50,650
this is an open wrt

00:14:48,520 --> 00:14:53,830
many Reuters quarter pocket Rooter they

00:14:50,650 --> 00:14:57,970
cost some around 22 euro 24 year or

00:14:53,830 --> 00:14:59,740
something there's an SSA luminous

00:14:57,970 --> 00:15:05,410
distribution in at open wrt and

00:14:59,740 --> 00:15:07,420
obviously there is a what am I looking

00:15:05,410 --> 00:15:09,280
for the broker on it there's a mosquito

00:15:07,420 --> 00:15:12,430
Braco running out and the thing has a

00:15:09,280 --> 00:15:14,290
wireless access point and this wireless

00:15:12,430 --> 00:15:16,660
access point is currently active and my

00:15:14,290 --> 00:15:17,890
Mac and all the other toys that you see

00:15:16,660 --> 00:15:20,140
here I connect you to this wireless

00:15:17,890 --> 00:15:21,580
access point it might be then I'm gonna

00:15:20,140 --> 00:15:24,310
ask you to bring it back quickly because

00:15:21,580 --> 00:15:27,430
I don't know how far how far the the the

00:15:24,310 --> 00:15:29,350
the what you call the the range is

00:15:27,430 --> 00:15:36,940
without an antenna okay so as I say

00:15:29,350 --> 00:15:38,440
please don't pull the plug yeah the

00:15:36,940 --> 00:15:41,500
first thing you did is pull the plug or

00:15:38,440 --> 00:15:43,630
what okay what I'm also gonna hand over

00:15:41,500 --> 00:15:44,890
but I want all the stuff back okay this

00:15:43,630 --> 00:15:46,540
all comes back here nobody leaves the

00:15:44,890 --> 00:15:47,920
room without it right and what I'm also

00:15:46,540 --> 00:15:50,860
going to hand out here is a little

00:15:47,920 --> 00:15:53,830
esp8266 which is a micro controller who

00:15:50,860 --> 00:15:57,520
has heard of Arduino okay for the camera

00:15:53,830 --> 00:15:59,560
it's about 30 percent Arduino it was a

00:15:57,520 --> 00:16:01,090
product created by Italians and

00:15:59,560 --> 00:16:04,450
absolutely fantastic product books that

00:16:01,090 --> 00:16:05,830
allowed people like what like myself who

00:16:04,450 --> 00:16:09,250
had nothing to do with I look for it and

00:16:05,830 --> 00:16:11,230
also develop people to certainly sort of

00:16:09,250 --> 00:16:12,610
deep dive into the world of electronics

00:16:11,230 --> 00:16:13,990
and getting the lights going and so on

00:16:12,610 --> 00:16:17,320
without really having a lot of know-how

00:16:13,990 --> 00:16:19,180
now the Chinese improved a little bit on

00:16:17,320 --> 00:16:20,590
the Arduino let's say maybe not improve

00:16:19,180 --> 00:16:20,830
but they modified the design a little

00:16:20,590 --> 00:16:22,990
bit

00:16:20,830 --> 00:16:27,160
first of all from cigarette package size

00:16:22,990 --> 00:16:30,340
to just stamp size the actually the

00:16:27,160 --> 00:16:31,840
actual esp8266 is the is that single

00:16:30,340 --> 00:16:34,090
slice at the bottom the thing on the top

00:16:31,840 --> 00:16:35,980
is just a button okay and this single

00:16:34,090 --> 00:16:38,910
slice at the bottom the Arduino cost

00:16:35,980 --> 00:16:42,310
somewhere around let's say 25 to 35 euro

00:16:38,910 --> 00:16:44,990
that has no connectivity with added

00:16:42,310 --> 00:16:47,690
Wi-Fi or Ethernet cause even more

00:16:44,990 --> 00:16:50,589
this has an onboard wireless access

00:16:47,690 --> 00:16:52,580
point and then a wireless access client

00:16:50,589 --> 00:16:54,560
so of course the price is going to be

00:16:52,580 --> 00:16:57,589
tremendously different that's why I want

00:16:54,560 --> 00:17:00,290
it back it's very very valuable it costs

00:16:57,589 --> 00:17:04,699
including first-class registered mail

00:17:00,290 --> 00:17:08,920
shipping from China about 300 no three

00:17:04,699 --> 00:17:08,920
hundred and fifty cents so Oh

00:17:09,189 --> 00:17:17,240
what I actually want you to do and would

00:17:12,949 --> 00:17:22,970
you please click press the button it

00:17:17,240 --> 00:17:26,679
won't bite so so once who's who said

00:17:22,970 --> 00:17:29,150
click twice you broke it

00:17:26,679 --> 00:17:31,210
now it says two there it said one there

00:17:29,150 --> 00:17:33,620
now hand it over

00:17:31,210 --> 00:17:36,830
thank you only once

00:17:33,620 --> 00:17:38,150
yeah now if you pressed white from now

00:17:36,830 --> 00:17:43,640
on if you press twice across the gin

00:17:38,150 --> 00:17:49,370
tonic okay three four yeah of course I

00:17:43,640 --> 00:17:53,570
will hand it over just plays on four six

00:17:49,370 --> 00:17:59,960
that's one gen tonic if you pay

00:17:53,570 --> 00:18:02,210
attention its modulo five okay right so

00:17:59,960 --> 00:18:03,800
and what what you what you should be

00:18:02,210 --> 00:18:04,940
seeing is every time you press I don't

00:18:03,800 --> 00:18:08,540
know what if you notice every time you

00:18:04,940 --> 00:18:10,040
press there's a topic being published

00:18:08,540 --> 00:18:12,170
here so that thing is actually talking

00:18:10,040 --> 00:18:13,730
that thing has has an IP address okay we

00:18:12,170 --> 00:18:15,620
can ping it that thing is connected to

00:18:13,730 --> 00:18:21,679
an MQTT broker where's the broker at

00:18:15,620 --> 00:18:23,510
amount okay so we're still in range it's

00:18:21,679 --> 00:18:24,770
connected to an MQTT broker would

00:18:23,510 --> 00:18:29,480
somebody whoever has it at the moment

00:18:24,770 --> 00:18:31,429
would you please click it click it okay

00:18:29,480 --> 00:18:34,940
there go the true-false every time you

00:18:31,429 --> 00:18:37,220
press it the button is open false and

00:18:34,940 --> 00:18:39,890
when you let go again it's open true

00:18:37,220 --> 00:18:42,770
okay let's see the logic behind it

00:18:39,890 --> 00:18:48,590
okay now while you're pressing and so on

00:18:42,770 --> 00:18:51,920
I will continue so carry on don't pull

00:18:48,590 --> 00:18:54,140
any plugs okay so why you when you press

00:18:51,920 --> 00:18:56,390
we will continue so we do we do all

00:18:54,140 --> 00:18:58,580
sorts of things with mqtt and one of the

00:18:56,390 --> 00:19:00,320
first things that we started doing

00:18:58,580 --> 00:19:02,540
all of us anybody who did anything with

00:19:00,320 --> 00:19:05,120
MQTT we started writing writing programs

00:19:02,540 --> 00:19:08,330
so we started writing I don't know my

00:19:05,120 --> 00:19:11,000
toilet flush to mqtt and mqtt to Twitter

00:19:08,330 --> 00:19:13,610
and mqtt to IRC and so on and so forth

00:19:11,000 --> 00:19:16,430
and this got out of hand and after what

00:19:13,610 --> 00:19:18,830
feels like about 1517 of these programs

00:19:16,430 --> 00:19:21,140
most of which still exist somewhere I

00:19:18,830 --> 00:19:23,720
said no this can't be it we must be able

00:19:21,140 --> 00:19:26,030
to do this better and what we did was to

00:19:23,720 --> 00:19:28,550
then create something is called mqtt

00:19:26,030 --> 00:19:29,900
Warren the name is a bit strange but all

00:19:28,550 --> 00:19:31,700
of all the good names were taken like a

00:19:29,900 --> 00:19:38,150
singer and we all take it

00:19:31,700 --> 00:19:40,700
so what MQTT Warren is is a system which

00:19:38,150 --> 00:19:42,260
is written in Python it's an open source

00:19:40,700 --> 00:19:44,630
project of course is written in Pisan

00:19:42,260 --> 00:19:46,130
and what it basically does is subscribe

00:19:44,630 --> 00:19:48,260
to any number of topics that you want

00:19:46,130 --> 00:19:50,300
okay so it connects Urban Katee Broker

00:19:48,260 --> 00:19:54,440
subscribes to any number of topics that

00:19:50,300 --> 00:19:56,570
you want and will then take a payload

00:19:54,440 --> 00:19:58,610
that is produced by a subscription to

00:19:56,570 --> 00:20:00,740
one of these topics and then distribute

00:19:58,610 --> 00:20:02,240
to to a service so for example we could

00:20:00,740 --> 00:20:04,310
have something like home slash alerts

00:20:02,240 --> 00:20:07,130
that is the topic we could have that for

00:20:04,310 --> 00:20:11,030
example distributed to XBMC which is now

00:20:07,130 --> 00:20:13,460
called Cody I think yep Cody or we could

00:20:11,030 --> 00:20:15,350
have it taken to pushover or we could

00:20:13,460 --> 00:20:17,030
for example have topics that are

00:20:15,350 --> 00:20:19,220
published to monitoring slash whatever

00:20:17,030 --> 00:20:21,940
so you're you're a singer you're not

00:20:19,220 --> 00:20:24,380
years whatever it all called a big one

00:20:21,940 --> 00:20:25,760
they they would publish to monitor

00:20:24,380 --> 00:20:28,400
instead something and that would go to

00:20:25,760 --> 00:20:30,290
Twitter and we'll go to SMTP so we have

00:20:28,400 --> 00:20:32,390
a whole bunch of certain what we call

00:20:30,290 --> 00:20:35,270
services or plugins that you can plug

00:20:32,390 --> 00:20:39,770
into MQTT one and I'll show you listen a

00:20:35,270 --> 00:20:42,680
moment and these will then cause the

00:20:39,770 --> 00:20:45,610
payload sometimes transformed or or

00:20:42,680 --> 00:20:47,690
naked or however you like to be

00:20:45,610 --> 00:20:50,120
distributed to the appropriate service

00:20:47,690 --> 00:20:52,670
so in theory what we can have is for

00:20:50,120 --> 00:20:53,210
example a your your house Bell your

00:20:52,670 --> 00:20:55,820
doorbell

00:20:53,210 --> 00:20:59,570
which would if you press it would create

00:20:55,820 --> 00:21:04,420
and publish with maybe the word ding on

00:20:59,570 --> 00:21:07,040
it you could have that suddenly pop up a

00:21:04,420 --> 00:21:08,870
pop up here with doorbell dingdong a

00:21:07,040 --> 00:21:09,470
little logo or while you're watching

00:21:08,870 --> 00:21:14,000
your

00:21:09,470 --> 00:21:18,020
the poor your movie in the evening so

00:21:14,000 --> 00:21:20,030
what does MQTT one today do we have over

00:21:18,020 --> 00:21:22,190
60 plugins I think the 64 at the moment

00:21:20,030 --> 00:21:24,830
and they all sort of different plugins

00:21:22,190 --> 00:21:27,260
we can do a Redis publish and we can

00:21:24,830 --> 00:21:30,500
transfer to zabbix and enter XMPP and we

00:21:27,260 --> 00:21:33,530
do carbon and Linux inotify and log and

00:21:30,500 --> 00:21:35,270
metro most and I think slack is also

00:21:33,530 --> 00:21:36,940
they're all sort of all sort of

00:21:35,270 --> 00:21:40,159
different plugins we in the WebSockets

00:21:36,940 --> 00:21:42,500
posted Twitter etc etc etc now that the

00:21:40,159 --> 00:21:44,030
use is relatively simple I'm not going

00:21:42,500 --> 00:21:47,150
to bore you with a lot of details here

00:21:44,030 --> 00:21:49,190
we have a configuration file which

00:21:47,150 --> 00:21:51,530
contains a number of defaults and then

00:21:49,190 --> 00:21:52,880
we launched the or you launch the

00:21:51,530 --> 00:21:54,830
services that you want so here for

00:21:52,880 --> 00:21:57,950
example just launching the file service

00:21:54,830 --> 00:22:00,409
and each service has a configuration

00:21:57,950 --> 00:22:04,340
here we have a file service which I'm

00:22:00,409 --> 00:22:05,870
calling record and we can have a whole

00:22:04,340 --> 00:22:07,070
number of different file services and

00:22:05,870 --> 00:22:10,010
you can have a whole number of different

00:22:07,070 --> 00:22:11,659
a single services and Twitter services

00:22:10,010 --> 00:22:14,630
etc for example for different accounts

00:22:11,659 --> 00:22:16,309
I'm calling record and this will go into

00:22:14,630 --> 00:22:18,230
a file called slash temp slash couscous

00:22:16,309 --> 00:22:20,539
and what we do here is we configure a

00:22:18,230 --> 00:22:22,820
subscription topic hello slash plus we

00:22:20,539 --> 00:22:26,450
know already plus stands for one level

00:22:22,820 --> 00:22:29,419
wildcard so any message that will be

00:22:26,450 --> 00:22:32,030
published to the topic hello slash ABC

00:22:29,419 --> 00:22:34,640
will be picked up by and qtt one and

00:22:32,030 --> 00:22:37,760
we'll go to target file colon record

00:22:34,640 --> 00:22:39,830
file call and record is this file target

00:22:37,760 --> 00:22:41,840
with the sub element record in other

00:22:39,830 --> 00:22:44,419
words whatever we publish will go into

00:22:41,840 --> 00:22:45,110
the file slash temp slash couscous let's

00:22:44,419 --> 00:22:48,860
see if that works

00:22:45,110 --> 00:22:51,620
mosquito publish - topic hello / a - M

00:22:48,860 --> 00:22:54,799
is the message or the payload and I'm

00:22:51,620 --> 00:22:57,320
sending here a JSON blob a JSON object

00:22:54,799 --> 00:22:59,659
object and if I look at / template

00:22:57,320 --> 00:23:01,340
couscous and it contains exactly what

00:22:59,659 --> 00:23:05,510
was transferred we didn't modify it in

00:23:01,340 --> 00:23:08,659
any way okay so that's as sort of boring

00:23:05,510 --> 00:23:12,169
as it can get and what we then of course

00:23:08,659 --> 00:23:15,230
can do is we automatically decode jason

00:23:12,169 --> 00:23:17,299
so for example if this is exactly the

00:23:15,230 --> 00:23:19,370
same configuration we had earlier we say

00:23:17,299 --> 00:23:22,370
you know the output format should be

00:23:19,370 --> 00:23:25,430
welcome comma dear and then the

00:23:22,370 --> 00:23:27,320
element name and what happens is MQTT

00:23:25,430 --> 00:23:29,720
one automatically attempts to decode

00:23:27,320 --> 00:23:32,090
incoming messages decoded into payload

00:23:29,720 --> 00:23:33,770
and then of course gives us the elements

00:23:32,090 --> 00:23:36,050
we publish exactly the same thing

00:23:33,770 --> 00:23:37,880
however to a different topic the topic

00:23:36,050 --> 00:23:39,920
doesn't matter look at the last line of

00:23:37,880 --> 00:23:42,140
/t attempt search couscous and here we

00:23:39,920 --> 00:23:43,970
see the message welcome dear Jane

00:23:42,140 --> 00:23:47,780
country to what we saw earlier and they

00:23:43,970 --> 00:23:54,590
will see the actual the actual JSON

00:23:47,780 --> 00:23:59,059
object okay so with a few lines of code

00:23:54,590 --> 00:24:02,059
we can then add for example a target of

00:23:59,059 --> 00:24:05,059
type XBMC which will ensure that our

00:24:02,059 --> 00:24:07,640
doorbell is then transferred to the

00:24:05,059 --> 00:24:10,340
bedroom component of XBMC and bedroom

00:24:07,640 --> 00:24:12,020
component XBMC is the XBMC or kodi

00:24:10,340 --> 00:24:13,100
player at that address with that

00:24:12,020 --> 00:24:18,260
password and my username

00:24:13,100 --> 00:24:21,140
okay hmm one of you then might say well

00:24:18,260 --> 00:24:23,630
I don't I'm maybe not watching TV when

00:24:21,140 --> 00:24:25,550
the doorbell is pressed how about can we

00:24:23,630 --> 00:24:28,070
have that over SMTP so can I get an

00:24:25,550 --> 00:24:29,630
alert via mail the example of the

00:24:28,070 --> 00:24:31,460
doorbell is of course idiotic but I'm

00:24:29,630 --> 00:24:33,500
just trying to prove a point and that is

00:24:31,460 --> 00:24:35,600
yeah sure of course we can we add a

00:24:33,500 --> 00:24:38,059
configuration for a local SMTP server

00:24:35,600 --> 00:24:41,630
with username sender blah blah blah

00:24:38,059 --> 00:24:44,090
subject etc and we add to this thing we

00:24:41,630 --> 00:24:46,790
add a target so we went earlier from let

00:24:44,090 --> 00:24:48,770
me go back a second to XBMC bedroom that

00:24:46,790 --> 00:24:52,280
was our target and now go forward again

00:24:48,770 --> 00:24:54,559
we add XBMC bedroom coma SMTP and local

00:24:52,280 --> 00:24:56,570
JP that's my target here same

00:24:54,559 --> 00:25:01,940
configuration otherwise and the result

00:24:56,570 --> 00:25:03,830
is then a a an email whenever the

00:25:01,940 --> 00:25:08,510
doorbell goes okay you

00:25:03,830 --> 00:25:12,559
I'm sure get the get the point so what

00:25:08,510 --> 00:25:16,960
we can use this for is also for I'm

00:25:12,559 --> 00:25:21,500
sorry we're known that right

00:25:16,960 --> 00:25:23,090
that's wrong static and let me fix that

00:25:21,500 --> 00:25:25,770
right so we can also use this for

00:25:23,090 --> 00:25:28,270
monitoring

00:25:25,770 --> 00:25:29,830
we can also use this for monitoring and

00:25:28,270 --> 00:25:32,290
what I'm going to show you is a small

00:25:29,830 --> 00:25:37,270
example using zabbix as a monetary

00:25:32,290 --> 00:25:38,230
system and MQTT so what we're doing I'm

00:25:37,270 --> 00:25:40,960
going to skip over this very quickly

00:25:38,230 --> 00:25:42,850
because my time's running short and I

00:25:40,960 --> 00:25:45,730
can talk to you about this for hours and

00:25:42,850 --> 00:25:47,530
hours and hours my times are a bit short

00:25:45,730 --> 00:25:51,370
we have I have in that box I have

00:25:47,530 --> 00:25:53,590
configured an item this item has a

00:25:51,370 --> 00:25:54,700
trigger connected to it and will alert

00:25:53,590 --> 00:25:58,480
us whenever the temperature is greater

00:25:54,700 --> 00:26:00,190
than 25 degrees Celsius when that

00:25:58,480 --> 00:26:02,830
happens what is going to happen is the

00:26:00,190 --> 00:26:04,929
script is launched in a so-called zabbix

00:26:02,830 --> 00:26:07,600
media type and this script is going to

00:26:04,929 --> 00:26:09,580
just start a shell script which I'll

00:26:07,600 --> 00:26:11,710
show you in a second and we'll just send

00:26:09,580 --> 00:26:13,960
over a subject name containing a bit of

00:26:11,710 --> 00:26:15,580
a bit of JSON on it you can look at this

00:26:13,960 --> 00:26:18,700
a little bit more in detail later on and

00:26:15,580 --> 00:26:20,080
what we then do is to actually invoke

00:26:18,700 --> 00:26:21,850
this shell script what the second shell

00:26:20,080 --> 00:26:24,340
script actually does it's just a user

00:26:21,850 --> 00:26:26,020
bin mosquito pub connects to a broker on

00:26:24,340 --> 00:26:28,840
a particular port here's an example

00:26:26,020 --> 00:26:31,690
where we want to ensure that we're

00:26:28,840 --> 00:26:33,910
protecting our payloads here with the

00:26:31,690 --> 00:26:37,210
PSK in other words with a TLS PSK will

00:26:33,910 --> 00:26:41,380
appreciate pre shared key what we could

00:26:37,210 --> 00:26:44,049
also do is configure with TLS

00:26:41,380 --> 00:26:45,669
certificates etc he'll appreciate key we

00:26:44,049 --> 00:26:48,760
sent to a particular topic and the

00:26:45,669 --> 00:26:52,330
payload as a the appropriate message and

00:26:48,760 --> 00:26:54,580
in or within MQTT warned I have the

00:26:52,330 --> 00:26:56,919
following configuration what you've seen

00:26:54,580 --> 00:26:59,620
this already at least very similar we

00:26:56,919 --> 00:27:01,679
have a zabbix configuration with a

00:26:59,620 --> 00:27:04,630
so-called trapper address so we have a

00:27:01,679 --> 00:27:07,540
trapper configuration that is trappers

00:27:04,630 --> 00:27:09,340
and in zabbix an endpoint onto which and

00:27:07,540 --> 00:27:11,919
you probably know this much better than

00:27:09,340 --> 00:27:14,200
I do that anyway exactly in that except

00:27:11,919 --> 00:27:17,380
wrappers an endpoint onto which I can

00:27:14,200 --> 00:27:22,090
publish I can I can I can write data and

00:27:17,380 --> 00:27:24,730
we have in mqtt one we have of course as

00:27:22,090 --> 00:27:27,549
I've explained which allows us this and

00:27:24,730 --> 00:27:29,380
what we have also here is a small Python

00:27:27,549 --> 00:27:32,400
function this Python function is loaded

00:27:29,380 --> 00:27:35,010
in sorry let me show you back here in

00:27:32,400 --> 00:27:38,250
amputee one we have

00:27:35,010 --> 00:27:40,560
Python functions which get the data can

00:27:38,250 --> 00:27:42,440
transform it in any way you want can do

00:27:40,560 --> 00:27:43,890
whatever you want with this data and

00:27:42,440 --> 00:27:46,200
pass it on

00:27:43,890 --> 00:27:48,770
so what we're having what we're going to

00:27:46,200 --> 00:27:51,390
have here now is where's my broker

00:27:48,770 --> 00:27:53,970
that's here no that's a that's a button

00:27:51,390 --> 00:27:55,200
it's a broker somewhere okay this is

00:27:53,970 --> 00:27:57,360
what this is what we're going to be

00:27:55,200 --> 00:27:59,850
doing okay so we have our mqtt broker

00:27:57,360 --> 00:28:02,610
running on this little thing here we

00:27:59,850 --> 00:28:04,320
have a temperature monitor I'll show you

00:28:02,610 --> 00:28:05,730
in a moment what it does we have a temp

00:28:04,320 --> 00:28:07,380
now I'll tell you now what it does what

00:28:05,730 --> 00:28:08,910
I'll show you what it does a temperature

00:28:07,380 --> 00:28:09,960
monitor and this temperature monitor is

00:28:08,910 --> 00:28:13,590
going to do following it's going to

00:28:09,960 --> 00:28:16,920
verify the published temperature and it

00:28:13,590 --> 00:28:20,130
will alert us in by flashing light or by

00:28:16,920 --> 00:28:22,980
by switching on and an alarm light when

00:28:20,130 --> 00:28:26,700
the temperature rises above I forgotten

00:28:22,980 --> 00:28:28,110
I think above 20 degrees Celsius then we

00:28:26,700 --> 00:28:30,270
have all you have the button that you've

00:28:28,110 --> 00:28:32,280
been playing around with already okay

00:28:30,270 --> 00:28:34,020
and we have here our zabbix monitoring

00:28:32,280 --> 00:28:36,060
on the right and here on the top we have

00:28:34,020 --> 00:28:39,570
a seven segment display which we've also

00:28:36,060 --> 00:28:43,910
been playing with and let me get rid of

00:28:39,570 --> 00:28:46,320
the slides here on the top you see the

00:28:43,910 --> 00:28:47,700
the information that's being published

00:28:46,320 --> 00:28:50,340
so you see everything that is being

00:28:47,700 --> 00:28:52,260
published on to the broker on to the

00:28:50,340 --> 00:28:54,750
little blue broker that went around so

00:28:52,260 --> 00:28:57,060
for example you see that that switch has

00:28:54,750 --> 00:28:59,790
been publishing an uptime has been up

00:28:57,060 --> 00:29:02,550
for 2486 seconds and has a Wi-Fi signal

00:28:59,790 --> 00:29:03,990
currently of 88 respect read 92 and so

00:29:02,550 --> 00:29:07,500
on okay so that is that is being

00:29:03,990 --> 00:29:13,530
published by the by the is that ten

00:29:07,500 --> 00:29:16,320
minutes or 15 minutes 15 thank you and

00:29:13,530 --> 00:29:17,790
on the bottom left you have we have our

00:29:16,320 --> 00:29:21,150
temperature monitor okay and in the

00:29:17,790 --> 00:29:24,270
background here we have we have zabbix

00:29:21,150 --> 00:29:26,940
now the difficulty with monitor or with

00:29:24,270 --> 00:29:29,280
doing things with temperature is the

00:29:26,940 --> 00:29:33,360
reproducibility so what I have here is

00:29:29,280 --> 00:29:35,220
another esp8266 with same thing as a

00:29:33,360 --> 00:29:37,740
little blue one that you that you had

00:29:35,220 --> 00:29:39,420
around with a potential meter on it and

00:29:37,740 --> 00:29:41,970
once this potentiometer I'm going to be

00:29:39,420 --> 00:29:45,400
manipulating the temperature if all goes

00:29:41,970 --> 00:29:47,530
right it does

00:29:45,400 --> 00:29:49,570
the temperature that it currently has is

00:29:47,530 --> 00:29:52,330
being displayed on the LED okay so this

00:29:49,570 --> 00:29:56,440
thing is also publishing via MQTT you

00:29:52,330 --> 00:30:09,430
can see it you can't you should be able

00:29:56,440 --> 00:30:11,440
to see it let's try that not perfect but

00:30:09,430 --> 00:30:16,150
anyway you should be able to see it on

00:30:11,440 --> 00:30:18,760
the 7-segment display and you'll be able

00:30:16,150 --> 00:30:20,800
to see it down here so the temperature

00:30:18,760 --> 00:30:23,050
here as being as being is being

00:30:20,800 --> 00:30:24,670
published okay it's now on thirteen and

00:30:23,050 --> 00:30:26,170
this temperature you also see at the

00:30:24,670 --> 00:30:27,460
bottom here this here so is the

00:30:26,170 --> 00:30:30,640
temperature monitor okay

00:30:27,460 --> 00:30:31,930
this temperature monitor is it's just

00:30:30,640 --> 00:30:33,730
monitoring to see whether the

00:30:31,930 --> 00:30:36,790
temperature and I'm twirling it up and

00:30:33,730 --> 00:30:38,470
done it's just monitoring to see whether

00:30:36,790 --> 00:30:40,630
the temperature rises above 20 degrees

00:30:38,470 --> 00:30:43,090
Celsius so this thing at the bottom is

00:30:40,630 --> 00:30:44,680
actually subscriber but it is also a

00:30:43,090 --> 00:30:46,750
publisher you also see that our

00:30:44,680 --> 00:30:49,780
temperature is now being graphed by

00:30:46,750 --> 00:30:51,940
zabbix okay nothing particularly special

00:30:49,780 --> 00:30:54,640
there and what I'm not going to do is to

00:30:51,940 --> 00:30:56,890
bring the temperature above 20 now when

00:30:54,640 --> 00:31:00,040
I bring this both 20 will see the

00:30:56,890 --> 00:31:02,620
temperature monitor what temperature

00:31:00,040 --> 00:31:04,540
monitor detects is above 20 this plays

00:31:02,620 --> 00:31:05,560
there true just to show you on the

00:31:04,540 --> 00:31:07,630
screen because I don't know whether you

00:31:05,560 --> 00:31:10,060
can see this and this little red LED

00:31:07,630 --> 00:31:14,290
went on how did this little red LED go

00:31:10,060 --> 00:31:15,310
on if you notice this line here for a

00:31:14,290 --> 00:31:17,470
third

00:31:15,310 --> 00:31:19,810
sorry fourth from the bottom it's

00:31:17,470 --> 00:31:22,180
there's a mosquito publish sorry there's

00:31:19,810 --> 00:31:25,900
an MQTT publish on to a topic called red

00:31:22,180 --> 00:31:28,660
LED on set with the command true and the

00:31:25,900 --> 00:31:31,480
device returns back and says thank you I

00:31:28,660 --> 00:31:34,290
have switched it now on I've now switch

00:31:31,480 --> 00:31:38,140
around and the status is now true okay

00:31:34,290 --> 00:31:40,000
so the LED is on let's increase the

00:31:38,140 --> 00:31:42,160
temperature and what we're going to do

00:31:40,000 --> 00:31:45,400
is we're going to go above above thirty

00:31:42,160 --> 00:31:48,550
and then we immediately get sent by MQTT

00:31:45,400 --> 00:31:50,610
warn zabbix slash alert type problem and

00:31:48,550 --> 00:31:53,710
you see at the top zabbix is now

00:31:50,610 --> 00:31:55,840
complaining the trigger has fired the

00:31:53,710 --> 00:31:56,590
temperature is now above whatever it is

00:31:55,840 --> 00:32:05,470
thirty

00:31:56,590 --> 00:32:06,909
30 degrees 31 degrees okay right and we

00:32:05,470 --> 00:32:08,350
can bring this back down again and of

00:32:06,909 --> 00:32:10,120
course everything will quiet down after

00:32:08,350 --> 00:32:14,970
said after a while the red light has

00:32:10,120 --> 00:32:18,429
gone off and zabbix has now published a

00:32:14,970 --> 00:32:20,250
payload type resolution value is now 19

00:32:18,429 --> 00:32:24,159
so in other words everything's okay

00:32:20,250 --> 00:32:27,250
false alarm we can we can do away with

00:32:24,159 --> 00:32:29,110
the the monitor has returned to normal

00:32:27,250 --> 00:32:31,539
where the sensor has returned to normal

00:32:29,110 --> 00:32:33,159
everything's fine okay so that is that

00:32:31,539 --> 00:32:36,100
is what's been happening here and here's

00:32:33,159 --> 00:32:38,409
a screenshot of what we saw there now

00:32:36,100 --> 00:32:43,500
what I have what I would have liked to

00:32:38,409 --> 00:32:43,500
show you life and I can't because of the

00:32:44,220 --> 00:32:52,179
environmental situation that's euphemism

00:32:48,309 --> 00:32:56,700
for shitty Wi-Fi them is that by adding

00:32:52,179 --> 00:32:59,289
just a statement or two to our mqtt warn

00:32:56,700 --> 00:33:02,919
initialization file to our MQTT one dot

00:32:59,289 --> 00:33:07,960
ini' i configure pushover and then i can

00:33:02,919 --> 00:33:10,149
transfer the same this exact same alert

00:33:07,960 --> 00:33:12,399
to a completely different service for

00:33:10,149 --> 00:33:14,590
example pushover pushover as a very nice

00:33:12,399 --> 00:33:16,000
little service and this is what the

00:33:14,590 --> 00:33:17,529
result looks like on my phone you can

00:33:16,000 --> 00:33:21,669
look at it later on if you like here it

00:33:17,529 --> 00:33:23,710
says temperature is at 28 Celsius or smc

00:33:21,669 --> 00:33:27,220
2018 that's the title that we have here

00:33:23,710 --> 00:33:30,100
and thereby by just adding something to

00:33:27,220 --> 00:33:31,779
MQTT warned to the indecision and to the

00:33:30,100 --> 00:33:33,250
init file and without touching the

00:33:31,779 --> 00:33:34,690
source application that's the important

00:33:33,250 --> 00:33:36,789
bit without touching the source

00:33:34,690 --> 00:33:40,480
application we suddenly fan out two

00:33:36,789 --> 00:33:44,409
different services one last thing and

00:33:40,480 --> 00:33:47,260
that is LWT last will and testament last

00:33:44,409 --> 00:33:53,080
will and testament is a feature by which

00:33:47,260 --> 00:33:56,350
a client can indicate to a to an amputee

00:33:53,080 --> 00:33:59,590
broker that in the case of its demise in

00:33:56,350 --> 00:34:02,409
the case it dies then the broker should

00:33:59,590 --> 00:34:05,950
on behalf of that dead client publish

00:34:02,409 --> 00:34:08,800
out a value okay the client which is

00:34:05,950 --> 00:34:09,679
connecting will indicate what the value

00:34:08,800 --> 00:34:11,179
is the

00:34:09,679 --> 00:34:12,619
which should be published and will also

00:34:11,179 --> 00:34:14,450
indicate on which topic it should be

00:34:12,619 --> 00:34:16,190
published so in other words this

00:34:14,450 --> 00:34:18,230
temperature monitor has been running

00:34:16,190 --> 00:34:21,139
when it started his bit of Python code

00:34:18,230 --> 00:34:25,339
when it started it indicated that on the

00:34:21,139 --> 00:34:28,329
topic mqtt / client / temp monitor with

00:34:25,339 --> 00:34:31,490
will set last will and testament set

00:34:28,329 --> 00:34:33,349
that payload string 0 should be

00:34:31,490 --> 00:34:35,119
published in other words the client then

00:34:33,349 --> 00:34:37,339
connected to the broker that's the

00:34:35,119 --> 00:34:39,230
broker the little blue broker connected

00:34:37,339 --> 00:34:41,089
to the broker and started doing things

00:34:39,230 --> 00:34:44,569
and listening and publishing whatever

00:34:41,089 --> 00:34:47,750
and they will come the moment when this

00:34:44,569 --> 00:34:53,059
client then dies and when this client

00:34:47,750 --> 00:34:55,609
dies the broker will then in on behalf

00:34:53,059 --> 00:34:58,510
of the dead client publish this

00:34:55,609 --> 00:35:01,250
information so we see at amount

00:34:58,510 --> 00:35:04,099
currently the zabbix status at the top

00:35:01,250 --> 00:35:06,020
resolved so the the problem with the

00:35:04,099 --> 00:35:09,290
temperature was resolved and what I'm

00:35:06,020 --> 00:35:11,450
now going to do is to abort this client

00:35:09,290 --> 00:35:13,160
control C is an abort okay I could kill

00:35:11,450 --> 00:35:14,480
it off I could if it were a piece of

00:35:13,160 --> 00:35:16,190
hardware I could pull the plug

00:35:14,480 --> 00:35:20,900
I'm now going to just abort this client

00:35:16,190 --> 00:35:24,160
and when I do that then we see a second

00:35:20,900 --> 00:35:27,109
later monitor client is that that is the

00:35:24,160 --> 00:35:30,200
publish that was produced by the broker

00:35:27,109 --> 00:35:32,780
by the mqtt broker because the mqtt

00:35:30,200 --> 00:35:35,059
broker realized that the client had

00:35:32,780 --> 00:35:38,349
disappeared gone away was network was

00:35:35,059 --> 00:35:41,869
was no longer reachable network wise and

00:35:38,349 --> 00:35:46,099
then published this information on

00:35:41,869 --> 00:35:51,799
behalf of the broker you said i had 10

00:35:46,099 --> 00:35:52,730
minutes but now i have 10 minutes oh but

00:35:51,799 --> 00:35:55,750
you don't have any questions I've

00:35:52,730 --> 00:35:55,750
explained everything so well

00:35:58,790 --> 00:36:06,150
that's far too complicated for me okay

00:36:01,200 --> 00:36:08,460
right so basically what you what I would

00:36:06,150 --> 00:36:13,170
like you very much to take away is mqtt

00:36:08,460 --> 00:36:15,150
a very very lightweight simple protocol

00:36:13,170 --> 00:36:17,790
much more lightweight for example than

00:36:15,150 --> 00:36:19,350
HTTP which is quite expensive if you

00:36:17,790 --> 00:36:21,930
think of all the headers that HTTP

00:36:19,350 --> 00:36:24,450
carries along with it content type and

00:36:21,930 --> 00:36:25,020
content size etc etc like a host and

00:36:24,450 --> 00:36:28,380
blah blah blah

00:36:25,020 --> 00:36:30,450
very very very lightweight with MQTT it

00:36:28,380 --> 00:36:33,120
we can construct systems where we

00:36:30,450 --> 00:36:35,520
literally decouple the producer of a

00:36:33,120 --> 00:36:37,380
message from the consumer of a message

00:36:35,520 --> 00:36:38,820
and that makes it very interesting it is

00:36:37,380 --> 00:36:41,880
very interesting for certain

00:36:38,820 --> 00:36:43,890
applications in other words what sort of

00:36:41,880 --> 00:36:47,070
an hour speak an hour in our monitoring

00:36:43,890 --> 00:36:49,200
speak we would with MQTT and with

00:36:47,070 --> 00:36:50,940
something like mqtt warned or custom

00:36:49,200 --> 00:36:54,600
made clients which are also very simple

00:36:50,940 --> 00:36:56,370
to build we substitute smtp by yeah

00:36:54,600 --> 00:36:57,330
basically whatever whatever kind of

00:36:56,370 --> 00:36:59,340
service you want and whatever

00:36:57,330 --> 00:37:01,080
combination of services you want and

00:36:59,340 --> 00:37:05,220
that's what makes it actually quite

00:37:01,080 --> 00:37:07,620
interesting so MQTT sorry and ktt warned

00:37:05,220 --> 00:37:10,860
is as I say an open-source project which

00:37:07,620 --> 00:37:13,290
we created I think the idea was mine but

00:37:10,860 --> 00:37:15,780
my friend Ben Jones and Andreas model

00:37:13,290 --> 00:37:18,810
have taken over they're doing a lot with

00:37:15,780 --> 00:37:21,810
it Andreas is now bringing MQTT warned

00:37:18,810 --> 00:37:24,270
into a pipe I installable state we

00:37:21,810 --> 00:37:27,810
already have a first version and you're

00:37:24,270 --> 00:37:31,880
welcome to to experiment and have a look

00:37:27,810 --> 00:37:31,880
at it that's it

00:37:33,560 --> 00:37:40,850
I I believe I now have six or you have

00:37:39,170 --> 00:37:43,220
now six and a half minutes for questions

00:37:40,850 --> 00:37:45,050
if I've been counting eight minutes

00:37:43,220 --> 00:37:48,800
eight minutes or yeah you speed it quite

00:37:45,050 --> 00:37:51,560
up so do we have some questions loud and

00:37:48,800 --> 00:37:57,020
clearly please I'm deaf well hard of

00:37:51,560 --> 00:37:58,580
hearing and nobody leaves the room

00:37:57,020 --> 00:38:01,250
without that ruler where's that Rooter

00:37:58,580 --> 00:38:06,230
there it is okay fine right carry on can

00:38:01,250 --> 00:38:08,030
I also configure like like the opposing

00:38:06,230 --> 00:38:09,980
thing of a last bill Testament for

00:38:08,030 --> 00:38:11,540
example to undo my last bill Testament

00:38:09,980 --> 00:38:13,340
if the client becomes a life again yes

00:38:11,540 --> 00:38:17,720
of course you can I didn't tell you that

00:38:13,340 --> 00:38:19,160
because that costs extra the opposing

00:38:17,720 --> 00:38:21,440
thing is not really an opposing thing

00:38:19,160 --> 00:38:23,660
what we have is I mentioned it shortly

00:38:21,440 --> 00:38:26,840
with one letter minus R with a mosquito

00:38:23,660 --> 00:38:30,590
pub there is a retained message what we

00:38:26,840 --> 00:38:32,540
can do in MQTT is to have so-called

00:38:30,590 --> 00:38:36,170
retained messages and with retained

00:38:32,540 --> 00:38:38,030
messages or broker sorry a client

00:38:36,170 --> 00:38:39,890
publishes a message and indicates who

00:38:38,030 --> 00:38:42,500
the broker please retain the last value

00:38:39,890 --> 00:38:45,020
and it's really only the last value that

00:38:42,500 --> 00:38:47,270
is retained and that means that when a

00:38:45,020 --> 00:38:49,460
new client comes up and subscribes to

00:38:47,270 --> 00:38:51,320
that same topic the broker will

00:38:49,460 --> 00:38:54,200
immediately give it that last retained

00:38:51,320 --> 00:38:55,580
value so for example typical use case

00:38:54,200 --> 00:38:57,410
temperature sensor yeah you have a

00:38:55,580 --> 00:38:59,240
temperature sensor or something similar

00:38:57,410 --> 00:39:01,250
which publishes temperature every 10

00:38:59,240 --> 00:39:03,800
minutes now if your client comes up at

00:39:01,250 --> 00:39:05,600
minute zero one it will have to normally

00:39:03,800 --> 00:39:08,300
wait another nine minutes for the next

00:39:05,600 --> 00:39:09,470
temperature to come up now in this

00:39:08,300 --> 00:39:11,870
particular case with this particular

00:39:09,470 --> 00:39:14,570
application it doesn't matter you can

00:39:11,870 --> 00:39:16,940
give it to the old temperature that was

00:39:14,570 --> 00:39:20,180
at minutes zero zero and that would be a

00:39:16,940 --> 00:39:21,410
retained retained message so I have not

00:39:20,180 --> 00:39:23,990
yet answered your question but I now

00:39:21,410 --> 00:39:27,830
will what we do with this retain message

00:39:23,990 --> 00:39:29,270
is to do exactly this so the when my

00:39:27,830 --> 00:39:31,070
client comes up with my temperature

00:39:29,270 --> 00:39:33,590
temperature sensor comes up what it'll

00:39:31,070 --> 00:39:37,520
do is publish a retained message saying

00:39:33,590 --> 00:39:39,530
I am there status 1 I am online yeah and

00:39:37,520 --> 00:39:41,300
it will then set the last will and

00:39:39,530 --> 00:39:43,400
testament to when it dies

00:39:41,300 --> 00:39:45,819
tell the broker turns to publish a

00:39:43,400 --> 00:39:47,380
retain 0 instructing or telling

00:39:45,819 --> 00:39:51,459
all the clients that is now offline and

00:39:47,380 --> 00:39:57,009
so we can do that with via the via the

00:39:51,459 --> 00:40:02,859
retain messages yeah thank you any more

00:39:57,009 --> 00:40:05,979
questions earlier talked about hardware

00:40:02,859 --> 00:40:10,109
already being able to speak and qtt yes

00:40:05,979 --> 00:40:13,989
what kind of hardware will you these are

00:40:10,109 --> 00:40:17,289
these are electricity meters created by

00:40:13,989 --> 00:40:21,549
a I was hoping you wouldn't ask created

00:40:17,289 --> 00:40:24,459
by a Swedish company driven by Carl

00:40:21,549 --> 00:40:26,949
can't remember surname I was very active

00:40:24,459 --> 00:40:30,009
in the mqtt area and the company is

00:40:26,949 --> 00:40:31,269
called something electric I'm sorry I'll

00:40:30,009 --> 00:40:35,229
have to look it up for you General

00:40:31,269 --> 00:40:37,569
Electric General Electric no no no no

00:40:35,229 --> 00:40:43,269
not so general it's a sweetie maybe not

00:40:37,569 --> 00:40:44,829
yet that's a Swedish company no no the

00:40:43,269 --> 00:40:46,479
IKEA thought three lamps for example

00:40:44,829 --> 00:40:52,089
they don't speak MQTT they speak they

00:40:46,479 --> 00:40:54,130
speak coop coop is if you like UDP sorry

00:40:52,089 --> 00:40:54,459
HTTP over UDP is something completely

00:40:54,130 --> 00:40:57,160
different

00:40:54,459 --> 00:41:00,249
ok so unfortunately they do not speak in

00:40:57,160 --> 00:41:02,410
PTT but coop is standardized

00:41:00,249 --> 00:41:04,180
it's an RFC or request for comment so

00:41:02,410 --> 00:41:06,579
it's standard and qtt is also standard

00:41:04,180 --> 00:41:14,729
it's not an RFC but it's an oasis

00:41:06,579 --> 00:41:14,729
standard anything anyone else

00:41:16,140 --> 00:41:22,569
and we see the execution line of YouTube

00:41:19,630 --> 00:41:25,420
Bosch consoles you show them to us oh

00:41:22,569 --> 00:41:29,670
that's highly secret yeah yes I guess so

00:41:25,420 --> 00:41:29,670
yeah do you have a support contract

00:41:30,809 --> 00:41:36,030
that's a good one yes certainly you just

00:41:33,700 --> 00:41:39,180
want to see the the script what it does

00:41:36,030 --> 00:41:39,180
yes sir

00:41:39,390 --> 00:41:47,140
it's just mosquito subscribe so what did

00:41:45,099 --> 00:41:49,210
what we do and what I'm doing here is I

00:41:47,140 --> 00:41:50,349
create and Tomic and team a double

00:41:49,210 --> 00:41:53,530
session so you can see it both that

00:41:50,349 --> 00:41:56,440
Center and the the top part was just a

00:41:53,530 --> 00:41:59,500
mosquito sub which I'll do a moment and

00:41:56,440 --> 00:42:01,990
the bottom part is temp monitor Tyson

00:41:59,500 --> 00:42:04,960
there's a small small Python script so

00:42:01,990 --> 00:42:08,849
what we're actually doing am i mr. pink

00:42:04,960 --> 00:42:14,250
mouse key to underscore sub - host 1

00:42:08,849 --> 00:42:18,760
9268 dot 8.1 - verbose I see the topic

00:42:14,250 --> 00:42:22,660
name - topic hash any mistakes in there

00:42:18,760 --> 00:42:26,049
no looks ok so we have here look for

00:42:22,660 --> 00:42:29,829
example the last will and testament and

00:42:26,049 --> 00:42:31,390
qtt clients temp only to 0 that is peter

00:42:29,829 --> 00:42:33,010
hollens isn't listening anymore

00:42:31,390 --> 00:42:35,289
unfortunately but this is a retained

00:42:33,010 --> 00:42:38,230
message ok just like this is a retained

00:42:35,289 --> 00:42:40,660
message that last that last device was

00:42:38,230 --> 00:42:42,549
online ok so this is just the the

00:42:40,660 --> 00:42:46,690
mosquito sub we're just subscribing to

00:42:42,549 --> 00:42:51,970
all all all messages I will now publish

00:42:46,690 --> 00:42:58,750
a a message myself mosquito you can see

00:42:51,970 --> 00:43:10,650
it pop - host 192 168 1 6 thank goodness

00:42:58,750 --> 00:43:16,829
not ipv6 dot 8.1 - t OS MC talk at 14:30

00:43:10,650 --> 00:43:16,829
- V M I did it

00:43:17,349 --> 00:43:24,130
okay so anything that is being published

00:43:21,609 --> 00:43:27,369
to this broker I can see now the reason

00:43:24,130 --> 00:43:29,109
I can see it is and for stalling the

00:43:27,369 --> 00:43:30,549
next question the reason I can see it is

00:43:29,109 --> 00:43:31,930
because in this particular case the

00:43:30,549 --> 00:43:35,349
broker has no access control list

00:43:31,930 --> 00:43:37,029
configured so anybody can who who can

00:43:35,349 --> 00:43:38,739
physically connect to the broker can

00:43:37,029 --> 00:43:41,440
actually publish something on any topic

00:43:38,739 --> 00:43:42,880
and anybody can also subscribe that is

00:43:41,440 --> 00:43:45,369
something that we typically don't do so

00:43:42,880 --> 00:43:47,559
we are very careful with access control

00:43:45,369 --> 00:43:49,209
lists so that you can only see what

00:43:47,559 --> 00:43:55,269
you're allowed what you're permitted to

00:43:49,209 --> 00:43:59,140
see obviously so we have time for one

00:43:55,269 --> 00:44:00,579
more question one more question no more

00:43:59,140 --> 00:44:02,090
question

00:44:00,579 --> 00:44:07,710
thank you very much thank you very much

00:44:02,090 --> 00:44:19,559
[Applause]

00:44:07,710 --> 00:44:19,559

YouTube URL: https://www.youtube.com/watch?v=Wxq96zE0mWc


