Title: OSMC 2016 | Small Things for Monitoring (EN) by Jan-Piet Mens
Publication date: 2016-12-12
Playlist: OSMC 2016 | Open Source Monitoring Conference
Description: 
	Whether you want to monitor a bunch of temperatures or check for open doors in your data center, the ESP8266 microcontroller is a very inexpensive and easy thing to get started with. In this talk we show  you a few of these tiny WiFi-enabled devices, look at a few use-cases, and we'll also demo some things with MQTT and discuss integration into your monitoring environment.
Captions: 
	00:00:09,530 --> 00:00:14,719
so welcome back everyone this is Yun

00:00:12,080 --> 00:00:18,169
Pittman's he calls himself the old fart

00:00:14,719 --> 00:00:21,590
on the internet said right sometimes

00:00:18,169 --> 00:00:24,950
sometimes okay he brought some nice

00:00:21,590 --> 00:00:27,500
legal and embedded electronics and will

00:00:24,950 --> 00:00:30,770
tell us how to monitor small electronic

00:00:27,500 --> 00:00:34,820
things give him a warm welcome thank you

00:00:30,770 --> 00:00:37,239
very much my name is Jim to eat mints

00:00:34,820 --> 00:00:39,500
and welcome web I've called this talk

00:00:37,239 --> 00:00:41,539
something with monitoring because this

00:00:39,500 --> 00:00:43,670
is monitoring conference so you need a

00:00:41,539 --> 00:00:45,140
good excuse to be here and but we're not

00:00:43,670 --> 00:00:48,739
well we're also going to talk about

00:00:45,140 --> 00:00:50,510
monitoring that sort of as a as a as an

00:00:48,739 --> 00:00:52,100
aside what we're going to talk about

00:00:50,510 --> 00:00:55,280
what I would like to tell you about a

00:00:52,100 --> 00:00:57,469
look at the today is a short recap of

00:00:55,280 --> 00:00:59,749
MQTT some of you know what it is already

00:00:57,469 --> 00:01:02,030
but we'll just go through it relatively

00:00:59,749 --> 00:01:05,059
quickly in for a particular reason and I

00:01:02,030 --> 00:01:07,820
want to talk about esp8266 which is a

00:01:05,059 --> 00:01:11,780
small microprocessor and I've brought

00:01:07,820 --> 00:01:13,790
one along and this is one model and I'm

00:01:11,780 --> 00:01:15,049
going to give it a round to you Pabst

00:01:13,790 --> 00:01:16,969
handed from person to person you can

00:01:15,049 --> 00:01:18,439
have a look at it I want it back okay so

00:01:16,969 --> 00:01:21,079
I expected in the front row at the end

00:01:18,439 --> 00:01:23,600
of this I'll be handing quite a bit of

00:01:21,079 --> 00:01:27,049
stuff around so i went to roll back I've

00:01:23,600 --> 00:01:28,340
got an inventory okay um so I'll be

00:01:27,049 --> 00:01:29,329
telling you a bit more about this but

00:01:28,340 --> 00:01:32,899
it's going to take while that's what I'm

00:01:29,329 --> 00:01:35,329
giving it to you now already so what we

00:01:32,899 --> 00:01:39,680
want to do is to couple these things

00:01:35,329 --> 00:01:42,259
with MQTT the MQTT protocol for doing

00:01:39,680 --> 00:01:44,570
monitoring and I'll explain why in a

00:01:42,259 --> 00:01:46,789
moment now MQTT first of all is a

00:01:44,570 --> 00:01:49,280
standard sorry I'm already know losing

00:01:46,789 --> 00:01:51,170
my headset is a standard as a transport

00:01:49,280 --> 00:01:54,049
is a pub sub published subscribe

00:01:51,170 --> 00:01:56,149
protocol which was designed originally

00:01:54,049 --> 00:01:59,299
designed for unreliable networks

00:01:56,149 --> 00:02:01,880
networks with high latency low bandwidth

00:01:59,299 --> 00:02:04,310
now if you consider any smartphone for

00:02:01,880 --> 00:02:07,179
example in your pocket whatever the make

00:02:04,310 --> 00:02:11,270
or brand this is the epitome of

00:02:07,179 --> 00:02:12,440
unreliable ok we have Wi-Fi in this room

00:02:11,270 --> 00:02:15,500
we go to the next room we have a

00:02:12,440 --> 00:02:16,850
different Wi-Fi where 4G we have 3g then

00:02:15,500 --> 00:02:18,680
there's this edge thing which means

00:02:16,850 --> 00:02:20,569
offline that's where the e shows up in

00:02:18,680 --> 00:02:23,060
your display and then you go back to

00:02:20,569 --> 00:02:28,220
Wi-Fi etc mmm cutie is ID

00:02:23,060 --> 00:02:33,800
suited for this kind of network MQTT has

00:02:28,220 --> 00:02:36,830
up to 256 megabytes of payload this for

00:02:33,800 --> 00:02:39,800
a number of use cases is of course

00:02:36,830 --> 00:02:42,099
purely theoretical that little

00:02:39,800 --> 00:02:44,900
microprocessor is going around now has

00:02:42,099 --> 00:02:47,599
if I remember correctly four kilobytes

00:02:44,900 --> 00:02:50,780
of RAM or 64 kilobytes of RAM nobody is

00:02:47,599 --> 00:02:52,730
ever going to be able to manage a 256

00:02:50,780 --> 00:02:59,330
megabytes payload or the thing like that

00:02:52,730 --> 00:03:01,910
but the protocol allows it m and MQTT is

00:02:59,330 --> 00:03:06,100
fast MQTT has a number of built-in

00:03:01,910 --> 00:03:09,500
security measures in principle these are

00:03:06,100 --> 00:03:11,930
transport layer security TLS then of

00:03:09,500 --> 00:03:14,780
course authentication a client can

00:03:11,930 --> 00:03:16,580
authenticate towards the server and say

00:03:14,780 --> 00:03:18,049
I am this client please allow me to do

00:03:16,580 --> 00:03:20,480
something talk a little bit more about

00:03:18,049 --> 00:03:22,819
this then we have access control lists

00:03:20,480 --> 00:03:24,440
and MQTT on the server side and these

00:03:22,819 --> 00:03:26,930
access control lists allow or disallow

00:03:24,440 --> 00:03:29,840
particular operations in other words

00:03:26,930 --> 00:03:32,060
allow will allow a particular client to

00:03:29,840 --> 00:03:35,870
do a publish and or particularly trying

00:03:32,060 --> 00:03:38,840
to do subscribe on two messages that

00:03:35,870 --> 00:03:43,250
it's interested in of course at any

00:03:38,840 --> 00:03:46,549
point in time you can additionally or

00:03:43,250 --> 00:03:49,100
exclusively encrypt your payload here

00:03:46,549 --> 00:03:50,989
again very strongly dependent on the

00:03:49,100 --> 00:03:52,370
kind of device you're using a little

00:03:50,989 --> 00:03:54,620
microprocessor like the thing that's

00:03:52,370 --> 00:03:56,480
going around or an Arduino it's just not

00:03:54,620 --> 00:03:58,670
capable of doing or basically not

00:03:56,480 --> 00:04:00,440
capable of doing encryption because it

00:03:58,670 --> 00:04:02,959
just doesn't have the CPU but of course

00:04:00,440 --> 00:04:05,660
MQTT on a on a Mac on your workstation

00:04:02,959 --> 00:04:07,250
etc is certainly would be able to do and

00:04:05,660 --> 00:04:10,790
there's something quite interesting

00:04:07,250 --> 00:04:12,980
called TLS psk which is available in

00:04:10,790 --> 00:04:15,079
certain implementations and there is TLS

00:04:12,980 --> 00:04:17,600
with the pre-shared key this allows us

00:04:15,079 --> 00:04:20,090
to do transport layer security without

00:04:17,600 --> 00:04:26,360
having the hassle of certificates which

00:04:20,090 --> 00:04:29,570
expire etc MQTT has three different

00:04:26,360 --> 00:04:32,360
so-called levels with which it can

00:04:29,570 --> 00:04:35,419
transport a message these levels are

00:04:32,360 --> 00:04:36,740
called quality of service qos and they

00:04:35,419 --> 00:04:40,340
are numbered 0

00:04:36,740 --> 00:04:42,050
one and two and the little yellow arrows

00:04:40,340 --> 00:04:44,470
on the right hand side of the slide show

00:04:42,050 --> 00:04:49,520
you basically how much communication

00:04:44,470 --> 00:04:52,160
occurs so quality of service 0q s0 means

00:04:49,520 --> 00:04:55,430
at most once and this is basically like

00:04:52,160 --> 00:04:59,509
a UDP Datagram although MQTT runs over

00:04:55,430 --> 00:05:01,370
TCP like a UDP Datagram it's sort of

00:04:59,509 --> 00:05:02,900
fire and forget we fire it off and we

00:05:01,370 --> 00:05:05,539
hope that gets here it typically does

00:05:02,900 --> 00:05:07,490
get there but it might not get there I

00:05:05,539 --> 00:05:10,400
forgot to mention something very

00:05:07,490 --> 00:05:13,699
important this is a bottle of white

00:05:10,400 --> 00:05:15,650
chocolate sauce chocolate blown and is

00:05:13,699 --> 00:05:19,009
made by a company called 1883 and I

00:05:15,650 --> 00:05:24,289
chose this because 1883 is the TCP port

00:05:19,009 --> 00:05:26,120
number which is reserved to MQTT don't

00:05:24,289 --> 00:05:27,349
worry if you ever hear another MQTT talk

00:05:26,120 --> 00:05:28,789
of mine you will see a different bottle

00:05:27,349 --> 00:05:32,900
they make different all sorts of

00:05:28,789 --> 00:05:35,180
different things so at most once quality

00:05:32,900 --> 00:05:38,150
of service zero assured delivery queue

00:05:35,180 --> 00:05:40,370
is one that means that a message is

00:05:38,150 --> 00:05:43,400
published and it will it is guarantee

00:05:40,370 --> 00:05:47,330
that it will arrive it could though

00:05:43,400 --> 00:05:51,800
arrive more than once and qs2 is once

00:05:47,330 --> 00:05:53,570
only there the protocol describes that

00:05:51,800 --> 00:05:56,690
the interaction between client and

00:05:53,570 --> 00:05:59,570
server is such that a message published

00:05:56,690 --> 00:06:05,750
by a client will arrive exactly once at

00:05:59,570 --> 00:06:08,180
a server messages in MQTT are addressed

00:06:05,750 --> 00:06:11,990
by so called topic names of topic

00:06:08,180 --> 00:06:16,300
branches a topic name has a limitation

00:06:11,990 --> 00:06:20,289
of 600 sorry 65 kilobyte 64 kilobyte

00:06:16,300 --> 00:06:23,509
utf-8 which ought to be more than enough

00:06:20,289 --> 00:06:28,099
in terms of length topic names are

00:06:23,509 --> 00:06:30,349
hierarchical and they allow on the

00:06:28,099 --> 00:06:33,409
subscribing end they allow us to use

00:06:30,349 --> 00:06:35,710
wildcards so assume we have for example

00:06:33,409 --> 00:06:38,180
a small temperature sensor which

00:06:35,710 --> 00:06:41,000
publishes to a topic called temperature

00:06:38,180 --> 00:06:43,330
/ room / living that would be a fully

00:06:41,000 --> 00:06:47,120
qualified topic name and we can have a

00:06:43,330 --> 00:06:49,400
subscriber which is interested in all

00:06:47,120 --> 00:06:50,510
topics all messages that come to the

00:06:49,400 --> 00:06:53,750
topic finance

00:06:50,510 --> 00:06:56,510
Plus this is the sense for one level /

00:06:53,750 --> 00:07:00,020
euro / irate so this would hit for

00:06:56,510 --> 00:07:03,530
example finance yahoo euro rate finance

00:07:00,020 --> 00:07:07,040
whatever msft dot 0 dot rate etc and we

00:07:03,530 --> 00:07:09,830
have the wild card hash symbol which is

00:07:07,040 --> 00:07:11,900
a little project the asterisk in a in a

00:07:09,830 --> 00:07:14,540
shell in a unix shell which means any

00:07:11,900 --> 00:07:18,020
amount of topic branches after this at

00:07:14,540 --> 00:07:22,430
any length any depth so anything devices

00:07:18,020 --> 00:07:29,890
/ temperature / / them anything below

00:07:22,430 --> 00:07:32,420
that below that level messages are

00:07:29,890 --> 00:07:35,240
coupled loosely or clients and servers

00:07:32,420 --> 00:07:39,320
are loosely coupled to each other by

00:07:35,240 --> 00:07:41,840
being able to publish into what I like

00:07:39,320 --> 00:07:44,780
to think of as a large quarter large

00:07:41,840 --> 00:07:48,170
boiling pot where we have publishers

00:07:44,780 --> 00:07:49,550
with dropping in messages / MQTT on

00:07:48,170 --> 00:07:51,050
particular topics and we have on the

00:07:49,550 --> 00:07:54,200
other hand we have subscribers picking

00:07:51,050 --> 00:07:57,350
them out and this quadrant this busts

00:07:54,200 --> 00:08:01,820
this this this huge pot allows us to for

00:07:57,350 --> 00:08:03,740
example very very easily with basically

00:08:01,820 --> 00:08:08,030
very frequently very few lines of code

00:08:03,740 --> 00:08:09,710
show you a few an amount for example

00:08:08,030 --> 00:08:11,840
pick out messages if we're allowed to do

00:08:09,710 --> 00:08:14,090
so if we have authorization to do some

00:08:11,840 --> 00:08:15,620
pick out messages transform them and

00:08:14,090 --> 00:08:18,380
drop them back in for a different

00:08:15,620 --> 00:08:21,020
subscriber so assume we have for example

00:08:18,380 --> 00:08:22,490
are ubiquitous temperature sensor which

00:08:21,020 --> 00:08:24,650
we bought in the United States and

00:08:22,490 --> 00:08:26,720
idiotically it is publishing in

00:08:24,650 --> 00:08:28,040
Fahrenheit nobody in the rest of the

00:08:26,720 --> 00:08:29,810
world gives a damn about Fahrenheit and

00:08:28,040 --> 00:08:31,580
I certainly don't so we would have the

00:08:29,810 --> 00:08:34,130
temperature sensor publishing Fahrenheit

00:08:31,580 --> 00:08:36,410
payloads into this quadrant and we can

00:08:34,130 --> 00:08:39,440
very easily create a subscriber which

00:08:36,410 --> 00:08:41,570
picks out this topic picks out the

00:08:39,440 --> 00:08:43,160
payloads for the Fahrenheit converts the

00:08:41,570 --> 00:08:46,010
Celsius and dumps them back in for other

00:08:43,160 --> 00:08:48,830
subscribers to to pick up loosely

00:08:46,010 --> 00:08:51,410
coupled means that at any moment this

00:08:48,830 --> 00:08:54,220
server the squadron at any moment this

00:08:51,410 --> 00:08:58,010
MQTT server can have any number of

00:08:54,220 --> 00:09:00,590
publishers can have any number of

00:08:58,010 --> 00:09:02,720
subscribers and these these two

00:09:00,590 --> 00:09:04,350
publishers and subscribers are loosely

00:09:02,720 --> 00:09:07,350
coupled a

00:09:04,350 --> 00:09:09,000
a message is transferred if there is a

00:09:07,350 --> 00:09:11,880
publisher publishing on a particular

00:09:09,000 --> 00:09:14,340
topic and simultaneously a subscriber

00:09:11,880 --> 00:09:17,370
subscribe to that particular topic if

00:09:14,340 --> 00:09:19,080
there is no subscriber then a publisher

00:09:17,370 --> 00:09:20,970
is a little bit like going into the

00:09:19,080 --> 00:09:22,710
woods deep into the woods and yelling

00:09:20,970 --> 00:09:31,260
nobody hears you okay nobody's there

00:09:22,710 --> 00:09:38,240
nobody can hear em one important thing

00:09:31,260 --> 00:09:41,550
is called a last will and testament a

00:09:38,240 --> 00:09:44,190
it's a special type of message a client

00:09:41,550 --> 00:09:46,650
that is going to connect to an n QT

00:09:44,190 --> 00:09:48,420
server the service called brokers I'm

00:09:46,650 --> 00:09:49,620
going to use that word from now on it

00:09:48,420 --> 00:09:55,320
aligned that is going to connect to an

00:09:49,620 --> 00:09:58,950
MQTT broker can tell this broker in the

00:09:55,320 --> 00:10:01,590
case of my demise in the case I die for

00:09:58,950 --> 00:10:03,690
example power cut my application crashes

00:10:01,590 --> 00:10:07,050
whatever in the case you don't hear from

00:10:03,690 --> 00:10:10,020
me in a particular time frame please

00:10:07,050 --> 00:10:13,500
publish this to any subscriber of this

00:10:10,020 --> 00:10:15,960
particular topic on my behalf so a

00:10:13,500 --> 00:10:18,450
client connects to a broker sends air

00:10:15,960 --> 00:10:20,400
off a last will and testament and if

00:10:18,450 --> 00:10:23,130
that client dies for whichever reason

00:10:20,400 --> 00:10:27,060
network power any any reason the broker

00:10:23,130 --> 00:10:29,490
will then on its behalf publish the fact

00:10:27,060 --> 00:10:32,430
that this client has died monitoring

00:10:29,490 --> 00:10:35,430
okay monitoring you can very very easily

00:10:32,430 --> 00:10:40,200
for example monitor MQTT clients that

00:10:35,430 --> 00:10:42,830
have just gone away okay broker we have

00:10:40,200 --> 00:10:45,450
this term I'm going a little bit faster

00:10:42,830 --> 00:10:48,330
we have the term broker this is the sort

00:10:45,450 --> 00:10:50,250
if you like the server side of MQTT and

00:10:48,330 --> 00:10:52,290
a broker is a little bit I think of it a

00:10:50,250 --> 00:10:54,260
little bit not only the quadrant that as

00:10:52,290 --> 00:10:57,960
a sort of Buster sort of message bus and

00:10:54,260 --> 00:11:00,330
there are a number of brokers one very

00:10:57,960 --> 00:11:04,170
popular open-source broker was created

00:11:00,330 --> 00:11:06,750
by men called Roger light and it's

00:11:04,170 --> 00:11:08,310
called mosquito it's called mosquito

00:11:06,750 --> 00:11:12,030
with a TT which is actually a spelling

00:11:08,310 --> 00:11:14,520
mistake but I believe Roger was looking

00:11:12,030 --> 00:11:18,420
through a dictionary looking for words

00:11:14,520 --> 00:11:18,750
that contained em cutie and he didn't

00:11:18,420 --> 00:11:22,500
find

00:11:18,750 --> 00:11:23,670
so created mosquito okay it's a program

00:11:22,500 --> 00:11:30,300
which is written and see it's available

00:11:23,670 --> 00:11:32,820
for all distributions it is tiny very

00:11:30,300 --> 00:11:34,590
lightweight it supports almost

00:11:32,820 --> 00:11:36,840
everything that has ever been published

00:11:34,590 --> 00:11:40,530
in the MQTT protocol and kaytee tee has

00:11:36,840 --> 00:11:43,350
been standardized it's not an RFC though

00:11:40,530 --> 00:11:44,850
and for stolen Stefan dr. Maya is going

00:11:43,350 --> 00:11:51,090
to ask what's the iris enum it's not an

00:11:44,850 --> 00:11:53,640
RFC and mosquito supports websockets it

00:11:51,090 --> 00:11:56,460
supports TLS it supports access control

00:11:53,640 --> 00:11:57,900
lists also with plugins supports TLS psk

00:11:56,460 --> 00:11:59,580
which is excellent bridging and talked

00:11:57,900 --> 00:12:02,630
about in a second and it's of course

00:11:59,580 --> 00:12:06,240
open source there are a number of other

00:12:02,630 --> 00:12:08,490
brokers for example Verne mq which is

00:12:06,240 --> 00:12:10,620
written in arilinn very powerful hive mq

00:12:08,490 --> 00:12:12,870
it's written in Java which also for

00:12:10,620 --> 00:12:15,330
example supports clustering and things

00:12:12,870 --> 00:12:17,490
like that so it's worth looking at

00:12:15,330 --> 00:12:20,190
different products if you're into nodejs

00:12:17,490 --> 00:12:22,140
there's a this one which was created

00:12:20,190 --> 00:12:24,600
called mosca which has a number of

00:12:22,140 --> 00:12:27,750
backends quite quite interesting and but

00:12:24,600 --> 00:12:29,760
mosquito is a is a really small small

00:12:27,750 --> 00:12:32,280
capable broker and this small capable

00:12:29,760 --> 00:12:33,720
broker runs on equipment even the size

00:12:32,280 --> 00:12:38,040
or smaller I'm going to pass this around

00:12:33,720 --> 00:12:40,920
this is my newest love it's a GL I net a

00:12:38,040 --> 00:12:45,000
are 152 talk about this in a second it's

00:12:40,920 --> 00:12:46,260
so sweet anyway it is wait till you hold

00:12:45,000 --> 00:12:49,980
of in your head but that I really went

00:12:46,260 --> 00:12:52,800
back and all that's not really very

00:12:49,980 --> 00:12:54,450
expensive across 22 years of me um so

00:12:52,800 --> 00:12:56,760
spoke about bridging bridging is the

00:12:54,450 --> 00:13:00,450
possibility to couple to brokers in such

00:12:56,760 --> 00:13:02,190
a way that messages for example from

00:13:00,450 --> 00:13:04,910
this publisher which actually go to this

00:13:02,190 --> 00:13:07,470
broker well in addition be lets say

00:13:04,910 --> 00:13:09,810
mirrored or translate it over to a

00:13:07,470 --> 00:13:12,060
second broker for example in a second

00:13:09,810 --> 00:13:13,920
data center or in some friends house or

00:13:12,060 --> 00:13:15,660
whatever but not all messages that

00:13:13,920 --> 00:13:19,290
arrive at this broker but just those and

00:13:15,660 --> 00:13:21,390
these messages can then be coupled by

00:13:19,290 --> 00:13:23,339
these two brokers here game quality of

00:13:21,390 --> 00:13:25,950
service we can set we can define a

00:13:23,339 --> 00:13:28,320
profit quality of services to ensure

00:13:25,950 --> 00:13:30,900
that these messages actually arrive at

00:13:28,320 --> 00:13:32,400
the second book the advantage also of

00:13:30,900 --> 00:13:35,670
doing something like this in

00:13:32,400 --> 00:13:37,590
terms of firewall we can decide whether

00:13:35,670 --> 00:13:39,360
this broker will initiate the connection

00:13:37,590 --> 00:13:40,860
or whether the second broker will

00:13:39,360 --> 00:13:46,110
initiate the connection which is of

00:13:40,860 --> 00:13:48,030
course important for for firewalls to

00:13:46,110 --> 00:13:50,130
command line utilities must get a sub

00:13:48,030 --> 00:13:53,340
which I'll show you in a second mosquito

00:13:50,130 --> 00:13:55,950
sub mosquito underscore pub subscribe

00:13:53,340 --> 00:13:57,720
and publish they have a daunting number

00:13:55,950 --> 00:13:59,790
of options but the only ones that are

00:13:57,720 --> 00:14:02,070
sort of really interesting are those

00:13:59,790 --> 00:14:04,980
that have shown here we specify which

00:14:02,070 --> 00:14:06,330
topic we want to subscribe to with minus

00:14:04,980 --> 00:14:08,220
T and then of course with the

00:14:06,330 --> 00:14:12,000
appropriate topic here with the wild

00:14:08,220 --> 00:14:15,450
card and mosquito pub we specify a topic

00:14:12,000 --> 00:14:18,990
and a payload and optionally a retained

00:14:15,450 --> 00:14:20,850
flag this is another feature of MQTT we

00:14:18,990 --> 00:14:23,430
can publish a message with a retained

00:14:20,850 --> 00:14:26,430
flag and this is an indication to the

00:14:23,430 --> 00:14:30,660
broker would you please store this

00:14:26,430 --> 00:14:32,310
message when a client and initially

00:14:30,660 --> 00:14:34,800
connects to this program subscribes to

00:14:32,310 --> 00:14:37,140
this particular topic the broker will

00:14:34,800 --> 00:14:40,020
immediately send out this last known

00:14:37,140 --> 00:14:46,550
good value this last known retained

00:14:40,020 --> 00:14:49,980
message ok MQTT is available in I think

00:14:46,550 --> 00:14:51,270
any language the only language that

00:14:49,980 --> 00:14:53,070
occurs to me that doesn't have MQTT

00:14:51,270 --> 00:14:57,090
supporters cobol but i think the rest

00:14:53,070 --> 00:14:59,370
all have it and of course luap eyes and

00:14:57,090 --> 00:15:03,480
see javascript java in is anything yep

00:14:59,370 --> 00:15:05,250
and just two short examples in python

00:15:03,480 --> 00:15:06,930
because it's a relatively readable

00:15:05,250 --> 00:15:09,960
language i hope you can sort of follow

00:15:06,930 --> 00:15:12,260
along we have an import statement this

00:15:09,960 --> 00:15:14,670
is poway MQTT library published by

00:15:12,260 --> 00:15:17,430
eclipse actually originally also written

00:15:14,670 --> 00:15:20,870
by roger light who created mosquito and

00:15:17,430 --> 00:15:25,590
then we have an MQTT single which is a

00:15:20,870 --> 00:15:28,320
function which uses publishes a payload

00:15:25,590 --> 00:15:30,870
on a particular topic had I had a

00:15:28,320 --> 00:15:33,900
subscription running for this particular

00:15:30,870 --> 00:15:36,690
topic I would then see this payload okay

00:15:33,900 --> 00:15:38,790
here's the this minus V shows me the

00:15:36,690 --> 00:15:44,010
topic name and this is just the payload

00:15:38,790 --> 00:15:45,600
that we see here on the other hand the

00:15:44,010 --> 00:15:47,430
Python can also

00:15:45,600 --> 00:15:49,319
of course subscribe and this is a little

00:15:47,430 --> 00:15:51,660
bit more work because with subscriptions

00:15:49,319 --> 00:15:54,620
we can have messages sort of arriving in

00:15:51,660 --> 00:15:58,560
the background what we do is we set up

00:15:54,620 --> 00:16:00,329
callbacks and then perform a connecting

00:15:58,560 --> 00:16:03,360
for example going into an endless loop

00:16:00,329 --> 00:16:06,089
and this endless loop will fire our own

00:16:03,360 --> 00:16:09,269
message call back as soon as a message

00:16:06,089 --> 00:16:11,220
is arrives to which we have subscribed

00:16:09,269 --> 00:16:13,259
and then this message will simply be

00:16:11,220 --> 00:16:15,449
printed out just a small trivial example

00:16:13,259 --> 00:16:17,600
to show here this would be your typical

00:16:15,449 --> 00:16:20,220
our typical little program which

00:16:17,600 --> 00:16:23,610
subscribes to the Fahrenheit sensor and

00:16:20,220 --> 00:16:26,370
translates that into sorry I'm very

00:16:23,610 --> 00:16:27,899
unhappy with my ears well actually I

00:16:26,370 --> 00:16:38,610
wasn't until I had this thing put on

00:16:27,899 --> 00:16:42,269
them um right yeah Thank You Marcus I'll

00:16:38,610 --> 00:16:44,699
carry on anyway M would we run our

00:16:42,269 --> 00:16:47,160
subscriber at the bottom thank you would

00:16:44,699 --> 00:16:50,790
we run our subscriber at as here at the

00:16:47,160 --> 00:16:54,089
bottom of them of the page and then

00:16:50,790 --> 00:16:56,550
publish to consider thirsty and calm /

00:16:54,089 --> 00:17:00,630
catering recall I'm going back here we

00:16:56,550 --> 00:17:02,750
subscribe to complex or one level then

00:17:00,630 --> 00:17:06,959
we would get the appropriate payloads

00:17:02,750 --> 00:17:12,919
shown us if you have any questions

00:17:06,959 --> 00:17:15,120
please shout in between okay right so

00:17:12,919 --> 00:17:17,069
that's just sort of a little bit of

00:17:15,120 --> 00:17:19,650
basics of MQTT and the reason I'm

00:17:17,069 --> 00:17:21,000
telling you this is that we can let's

00:17:19,650 --> 00:17:23,909
look at a little bit of hardware and

00:17:21,000 --> 00:17:28,079
this hardware will use MQTT for

00:17:23,909 --> 00:17:30,710
communication so um who's got my little

00:17:28,079 --> 00:17:36,870
Rooter where is it oh it's only there

00:17:30,710 --> 00:17:38,760
are you okay carry on so what you're

00:17:36,870 --> 00:17:43,350
what you're seeing there is a little

00:17:38,760 --> 00:17:46,140
Rooter called a GL inet AR 150 it costs

00:17:43,350 --> 00:17:49,860
the unbelievable amount of 22 euro 83 at

00:17:46,140 --> 00:17:52,620
amazon.de including free postage of

00:17:49,860 --> 00:17:57,059
course just to my mind is mind-boggling

00:17:52,620 --> 00:18:00,679
but anyway um it runs open wrt runs a

00:17:57,059 --> 00:18:00,679
linux distribution open wrt

00:18:01,190 --> 00:18:08,790
you might know open wrt from the tp-link

00:18:05,390 --> 00:18:11,280
mr 30 20 which is used as ripe Atlas

00:18:08,790 --> 00:18:13,230
probes Stefan who's sitting here will be

00:18:11,280 --> 00:18:16,170
telling you but let tell us a little bit

00:18:13,230 --> 00:18:19,680
about this tomorrow or the use of those

00:18:16,170 --> 00:18:21,660
tomorrow and so this is very similar in

00:18:19,680 --> 00:18:23,640
Hardware it has a little bit more RAM

00:18:21,660 --> 00:18:25,680
and it has a little bit more flash flash

00:18:23,640 --> 00:18:28,560
is what we need on the file system it

00:18:25,680 --> 00:18:31,470
has two USB ports a lan and wan port and

00:18:28,560 --> 00:18:33,510
built in Wi-Fi now one of those things

00:18:31,470 --> 00:18:37,050
that you see there i have here in light

00:18:33,510 --> 00:18:38,640
blue pardon my fumbling around I've here

00:18:37,050 --> 00:18:39,930
and I blew this is basically exactly the

00:18:38,640 --> 00:18:42,510
same thing it just has a little bit more

00:18:39,930 --> 00:18:45,090
RAM not that I need it it's just I had

00:18:42,510 --> 00:18:47,010
this one before I order does ok so this

00:18:45,090 --> 00:18:50,100
thing here is now just power simply

00:18:47,010 --> 00:18:53,960
powered by USB and it provides a Wi-Fi

00:18:50,100 --> 00:18:58,770
network and this Wi-Fi network provides

00:18:53,960 --> 00:19:06,030
the network for this thing now this

00:18:58,770 --> 00:19:08,640
thing is a esp8266 the most d1 which is

00:19:06,030 --> 00:19:13,110
what you've already seen connected to an

00:19:08,640 --> 00:19:17,160
LCD panel or liquid whatever 7 7 segment

00:19:13,110 --> 00:19:19,920
display panel now while while I'm

00:19:17,160 --> 00:19:22,830
talking I'll hand you we can carry on

00:19:19,920 --> 00:19:25,110
I'll hand you an another of these things

00:19:22,830 --> 00:19:26,580
now this looks as though there's a lot

00:19:25,110 --> 00:19:28,500
on it there is a lot on it is just a

00:19:26,580 --> 00:19:31,830
little boards soldered on to hold it and

00:19:28,500 --> 00:19:33,540
at the top there's a button ok so every

00:19:31,830 --> 00:19:35,250
one of you press the button please and

00:19:33,540 --> 00:19:36,480
as soon as you press the button oh sorry

00:19:35,250 --> 00:19:40,320
I forgot to mention this is of course

00:19:36,480 --> 00:19:41,460
also connected to this Wi-Fi and it's

00:19:40,320 --> 00:19:45,930
going to do when you press the button

00:19:41,460 --> 00:19:53,580
it's going to send off an MQTT message

00:19:45,930 --> 00:19:55,140
and just retract it's going to send off

00:19:53,580 --> 00:19:58,860
an MQTT message and if you successfully

00:19:55,140 --> 00:20:02,340
press the button that display will

00:19:58,860 --> 00:20:05,430
change ok now please only press it once

00:20:02,340 --> 00:20:08,760
if you press it twice you buy me a gin

00:20:05,430 --> 00:20:11,520
tonic ok that's the deal I made with my

00:20:08,760 --> 00:20:13,830
daughter so you go ahead

00:20:11,520 --> 00:20:15,180
you press it once if you have a rings on

00:20:13,830 --> 00:20:16,680
your fingers would you please be added

00:20:15,180 --> 00:20:18,780
but careful not to short it otherwise my

00:20:16,680 --> 00:20:21,480
demos immediately over yeah be careful

00:20:18,780 --> 00:20:23,910
please that you don't short it so he's

00:20:21,480 --> 00:20:27,210
press it once goes it to you press it

00:20:23,910 --> 00:20:38,610
once please goes to three you press it

00:20:27,210 --> 00:20:40,950
once goes to for you probably ha 60 we

00:20:38,610 --> 00:20:44,250
developed this at home I had my lego

00:20:40,950 --> 00:20:46,560
assistant build this and to make it to

00:20:44,250 --> 00:20:48,960
make it interesting and I said well

00:20:46,560 --> 00:20:51,090
let's let's let's build this gin tonic

00:20:48,960 --> 00:20:52,710
singing it don't be afraid it sets now

00:20:51,090 --> 00:20:53,880
it was supposed to be just one but I

00:20:52,710 --> 00:20:56,550
didn't know how many people were coming

00:20:53,880 --> 00:21:03,540
and so now we do it modulo 5 yeah you

00:20:56,550 --> 00:21:11,700
had a question I'm sorry could you

00:21:03,540 --> 00:21:20,160
repeat that there is I'm expecting 25

00:21:11,700 --> 00:21:21,750
gin tonics by lunchtime ok em so we have

00:21:20,160 --> 00:21:23,340
on one hand sort of a little server

00:21:21,750 --> 00:21:26,760
little this this little Rooter this

00:21:23,340 --> 00:21:28,890
little linux box which runs an MQTT

00:21:26,760 --> 00:21:30,390
broken on the other end we have here

00:21:28,890 --> 00:21:31,200
system I'll show you I'll join you in a

00:21:30,390 --> 00:21:32,780
moment what's happening in the

00:21:31,200 --> 00:21:35,940
background but let's let's just continue

00:21:32,780 --> 00:21:39,030
we have little little devices which can

00:21:35,940 --> 00:21:42,990
speak MQTT of the wire or over over

00:21:39,030 --> 00:21:44,820
wireless now one such example is an

00:21:42,990 --> 00:21:47,220
Intel Edison for example the Intel

00:21:44,820 --> 00:21:48,870
Edison this chip that you see this is

00:21:47,220 --> 00:21:51,150
terrible this chip that you see on the

00:21:48,870 --> 00:21:54,000
top right here is about the size of a

00:21:51,150 --> 00:21:55,830
small postage stamp and this thing has

00:21:54,000 --> 00:21:58,680
somewhere around four megabytes of ram

00:21:55,830 --> 00:22:01,020
it runs a full linux machine in it and

00:21:58,680 --> 00:22:03,150
it is also in addition or do we knew it

00:22:01,020 --> 00:22:05,460
has an arduino bridge now i don't know

00:22:03,150 --> 00:22:09,180
about you but this here down here is a

00:22:05,460 --> 00:22:10,890
74 I think it was 74 pins my fingers are

00:22:09,180 --> 00:22:12,480
not what they used to be and I certainly

00:22:10,890 --> 00:22:14,730
wouldn't be able to solder anything on

00:22:12,480 --> 00:22:16,890
there so with Intel Edison you can buy

00:22:14,730 --> 00:22:19,140
an additional you can buy boards where

00:22:16,890 --> 00:22:21,450
you plug in this Edison and then you

00:22:19,140 --> 00:22:23,070
have sort of breakout boards but this is

00:22:21,450 --> 00:22:25,200
not the kind of thing that you install

00:22:23,070 --> 00:22:27,299
in every temperature sensor 10 /

00:22:25,200 --> 00:22:28,529
boom if you look at the price said we're

00:22:27,299 --> 00:22:31,679
talking about somewhere around the order

00:22:28,529 --> 00:22:33,960
of let's say 70 to 90 euro which is

00:22:31,679 --> 00:22:35,789
quite expensive quite aside from the

00:22:33,960 --> 00:22:37,980
fact that you have here relatively high

00:22:35,789 --> 00:22:40,980
power consumption but this is a gorgeous

00:22:37,980 --> 00:22:43,470
little thing if you don't know it so one

00:22:40,980 --> 00:22:46,190
thing that is very interesting is for

00:22:43,470 --> 00:22:50,570
example Arduino who's heard of Arduino

00:22:46,190 --> 00:22:50,570
okay many people most of you actually

00:22:50,610 --> 00:22:55,509
which was to be expected Arduino was was

00:22:53,289 --> 00:22:58,090
absolutely grandin and still is

00:22:55,509 --> 00:23:01,210
absolutely grant are doing it though

00:22:58,090 --> 00:23:03,220
certainly the first models had one

00:23:01,210 --> 00:23:04,809
deficiency it was very difficult to

00:23:03,220 --> 00:23:07,210
communicate with the outside world from

00:23:04,809 --> 00:23:08,769
this Arduino except via serial and then

00:23:07,210 --> 00:23:11,320
came the Arduino with an Ethernet shield

00:23:08,769 --> 00:23:13,480
and I came Wi-Fi shield and then came

00:23:11,320 --> 00:23:15,429
Arduino you know anybody know Arduino

00:23:13,480 --> 00:23:17,919
yunnan that's the one with the Linux

00:23:15,429 --> 00:23:19,600
computer on board also open wrt crossed

00:23:17,919 --> 00:23:22,299
somewhere around 70 euro I thought it

00:23:19,600 --> 00:23:25,450
was very very disappointing actually

00:23:22,299 --> 00:23:27,399
because it was quite expensive in the

00:23:25,450 --> 00:23:28,990
communication wasn't very nice and then

00:23:27,399 --> 00:23:30,879
came a Chinese manufacturer called

00:23:28,990 --> 00:23:34,899
expressive and they created something

00:23:30,879 --> 00:23:36,580
called an esp8266 that's the actual chip

00:23:34,899 --> 00:23:40,419
and this is a low-cost microcontroller

00:23:36,580 --> 00:23:42,279
which runs a full tcp/ip stack all of us

00:23:40,419 --> 00:23:44,080
know what that means so it's a little

00:23:42,279 --> 00:23:45,909
bit like an Arduino it can be programmed

00:23:44,080 --> 00:23:48,580
like an Arduino although it can also be

00:23:45,909 --> 00:23:50,350
programmed if you prefer in basic it can

00:23:48,580 --> 00:23:55,840
also be programmed in Lua if you prefer

00:23:50,350 --> 00:23:58,120
the lure interpreters for esp8266 if I

00:23:55,840 --> 00:24:00,460
remember correctly there's micro pizen

00:23:58,120 --> 00:24:02,409
for esp8266 so quite a number of

00:24:00,460 --> 00:24:04,120
different platforms depending on your

00:24:02,409 --> 00:24:09,360
taste and depending on your on your

00:24:04,120 --> 00:24:15,100
preference now what makes this esp8266

00:24:09,360 --> 00:24:18,429
absolutely incredible I almost never use

00:24:15,100 --> 00:24:21,070
the a word what makes it really amazing

00:24:18,429 --> 00:24:24,639
that's another a word is the fact that

00:24:21,070 --> 00:24:26,769
it has onboard Wi-Fi and this

00:24:24,639 --> 00:24:29,919
amazingness I will show you in a moment

00:24:26,769 --> 00:24:31,240
what this all costs is really quite

00:24:29,919 --> 00:24:35,950
interesting but it's very very very

00:24:31,240 --> 00:24:38,440
inexpensive and the esp8266 comes in a

00:24:35,950 --> 00:24:42,330
number of different form factors now we

00:24:38,440 --> 00:24:45,250
have here 343 photos of different

00:24:42,330 --> 00:24:47,230
esp8266 models this is sort of the first

00:24:45,250 --> 00:24:49,779
the first chip that came out today you

00:24:47,230 --> 00:24:52,299
can get these for when you're 50 don't

00:24:49,779 --> 00:24:54,490
because it's just not worth it this is

00:24:52,299 --> 00:24:56,679
the ESP 12 I think it's called a 12 f

00:24:54,490 --> 00:24:58,870
now we see it's a little bit different

00:24:56,679 --> 00:25:01,779
form factor you will probably recognize

00:24:58,870 --> 00:25:03,820
this as being the thing that is going

00:25:01,779 --> 00:25:06,250
around or that you saw this morning

00:25:03,820 --> 00:25:08,350
that you saw earlier this is what it's

00:25:06,250 --> 00:25:13,080
called a node MCU it costs about two

00:25:08,350 --> 00:25:16,930
euro 60 first class registered mail from

00:25:13,080 --> 00:25:18,960
China obviously we know Dempsey you

00:25:16,930 --> 00:25:22,300
which has quite a number of eye opens it

00:25:18,960 --> 00:25:25,240
has a USB connector for power and also

00:25:22,300 --> 00:25:27,160
for communication has reset buttons and

00:25:25,240 --> 00:25:30,130
so on and here again you recognize sort

00:25:27,160 --> 00:25:32,920
of this this thing here on top that is

00:25:30,130 --> 00:25:38,230
the actual esp8266 chip this cost about

00:25:32,920 --> 00:25:41,860
to you or 60 okay now my no period now

00:25:38,230 --> 00:25:43,990
this esp8266 really of the course of the

00:25:41,860 --> 00:25:46,780
last year year and a half has totally

00:25:43,990 --> 00:25:48,820
swamped the world everybody's using them

00:25:46,780 --> 00:25:51,010
because they are so cheap just look at

00:25:48,820 --> 00:25:53,350
these prices now here again here we have

00:25:51,010 --> 00:25:56,770
for you a year of 50 we have an 8266

00:25:53,350 --> 00:25:58,450
with tiny little connectors and this we

00:25:56,770 --> 00:25:59,620
must be one which will show you in a

00:25:58,450 --> 00:26:01,630
moment which you saw this morning just

00:25:59,620 --> 00:26:03,430
has sort of broken them out a little bit

00:26:01,630 --> 00:26:05,110
more to make it more comfortable this

00:26:03,430 --> 00:26:08,620
here what I'm going to show you know is

00:26:05,110 --> 00:26:10,630
a is an electro dragon board which costs

00:26:08,620 --> 00:26:13,030
five year 50 here a game including

00:26:10,630 --> 00:26:14,650
postage it comes with a cover it comes

00:26:13,030 --> 00:26:16,480
with a case I only brought the bottom

00:26:14,650 --> 00:26:18,310
part so what you're going to see now is

00:26:16,480 --> 00:26:22,210
this thing here comes to the cover and

00:26:18,310 --> 00:26:25,540
you can connect 220 volts to it and out

00:26:22,210 --> 00:26:27,400
come over two relays 21 different

00:26:25,540 --> 00:26:32,230
channel so you can connect for example

00:26:27,400 --> 00:26:33,790
to whatever 2222 clients sue lamps to

00:26:32,230 --> 00:26:37,840
motor soup washing machines whatever you

00:26:33,790 --> 00:26:41,890
like in theory I think these do this

00:26:37,840 --> 00:26:43,360
thing here does 10 amp ere if you show

00:26:41,890 --> 00:26:47,110
this to the German tiff they would

00:26:43,360 --> 00:26:51,910
probably get instant heart attacks but

00:26:47,110 --> 00:26:54,870
it works and our house is still well was

00:26:51,910 --> 00:26:57,430
yesterday when I left still ok um

00:26:54,870 --> 00:26:59,710
haven't burned down yet haven't heard

00:26:57,430 --> 00:27:01,630
anything low this morning right so

00:26:59,710 --> 00:27:05,230
really very interesting and that also

00:27:01,630 --> 00:27:08,560
contains this esp8266 which we can

00:27:05,230 --> 00:27:10,930
program ok this thing comes from China

00:27:08,560 --> 00:27:12,940
with an onboard software and on the with

00:27:10,930 --> 00:27:15,100
an iphone and android app which of

00:27:12,940 --> 00:27:17,080
course phones home now obviously goes to

00:27:15,100 --> 00:27:17,740
some chinese cloud now I don't want

00:27:17,080 --> 00:27:19,570
chinese cards

00:27:17,740 --> 00:27:21,000
we would reflash that without software

00:27:19,570 --> 00:27:24,190
now i'll show you how in a moment

00:27:21,000 --> 00:27:26,290
another very popular thing which is a

00:27:24,190 --> 00:27:30,220
little bit cheaper at the moment the son

00:27:26,290 --> 00:27:32,200
of this only has one output here again

00:27:30,220 --> 00:27:34,059
also 10 amp ere same kind of thing head

00:27:32,200 --> 00:27:36,040
on the additional it has a little switch

00:27:34,059 --> 00:27:43,809
here which is quite interesting you plug

00:27:36,040 --> 00:27:46,240
your load in an odd manually so the we

00:27:43,809 --> 00:27:50,530
mostly one is that switch still going

00:27:46,240 --> 00:28:00,010
somewhere let's let's just let me show

00:27:50,530 --> 00:28:01,900
you please let me try and show you who's

00:28:00,010 --> 00:28:06,280
got the switch at the mound who's got

00:28:01,900 --> 00:28:08,470
the little button okay would you not not

00:28:06,280 --> 00:28:12,700
flick it just keep it in your hand don't

00:28:08,470 --> 00:28:16,300
don't click a place yet now what we're

00:28:12,700 --> 00:28:20,370
seeing here are MQTT messages sorry let

00:28:16,300 --> 00:28:20,370
me let me redo that so you see rendering

00:28:22,470 --> 00:28:28,990
so i'm using mosquito sub connecting to

00:28:26,500 --> 00:28:32,670
a house called a tot one there is a

00:28:28,990 --> 00:28:34,750
little GLI net rotor and i'm going to

00:28:32,670 --> 00:28:38,260
subscribe to all topics would you please

00:28:34,750 --> 00:28:41,380
at the moment not click now

00:28:38,260 --> 00:28:43,240
interestingly when I subscribe I me

00:28:41,380 --> 00:28:45,640
immediately while not swamped but I need

00:28:43,240 --> 00:28:49,410
to get a certain amount of topics and

00:28:45,640 --> 00:28:52,000
these topics that I see for example

00:28:49,410 --> 00:28:53,170
sorry escape sequences now come out

00:28:52,000 --> 00:28:55,120
because I'm pressing the laser okay

00:28:53,170 --> 00:28:57,760
these topics that I see are called

00:28:55,120 --> 00:28:59,679
sensors home in a certain set number and

00:28:57,760 --> 00:29:01,000
for example dollar on the line true and

00:28:59,679 --> 00:29:02,920
they have a name and the local IP

00:29:01,000 --> 00:29:05,770
address this IP address by the way dot a

00:29:02,920 --> 00:29:07,210
tot 151 is the IP address of that we

00:29:05,770 --> 00:29:08,500
must be one button that you're pressing

00:29:07,210 --> 00:29:11,410
or that you're going to present moment

00:29:08,500 --> 00:29:14,140
it has a firmware it has Wi-Fi signal

00:29:11,410 --> 00:29:16,780
sixty-eight percent and it's showing me

00:29:14,140 --> 00:29:18,460
that open true now these messages came

00:29:16,780 --> 00:29:20,170
from the broker I subscribed to the

00:29:18,460 --> 00:29:22,360
broker all topics and these messages

00:29:20,170 --> 00:29:26,200
came from the broker immediately the

00:29:22,360 --> 00:29:27,790
reason the broker had those retained the

00:29:26,200 --> 00:29:29,710
client which is raining on that button

00:29:27,790 --> 00:29:31,470
that said when it would publish would

00:29:29,710 --> 00:29:38,260
you please retain those message

00:29:31,470 --> 00:29:40,870
now just pressing enter 2 and press

00:29:38,260 --> 00:29:43,060
enter again to show you now would you

00:29:40,870 --> 00:29:49,540
please whoever is holding it once click

00:29:43,060 --> 00:29:55,300
and let go now the button when it's

00:29:49,540 --> 00:29:58,240
pressed it in it publishes a can you

00:29:55,300 --> 00:30:02,230
still hear me the button wins press

00:29:58,240 --> 00:30:05,500
publishes a to a topic called button

00:30:02,230 --> 00:30:09,010
open with a payload false and when the

00:30:05,500 --> 00:30:12,370
button is released it re publishes to a

00:30:09,010 --> 00:30:15,970
topic called itself button open with the

00:30:12,370 --> 00:30:17,590
payload true ok because it's open so if

00:30:15,970 --> 00:30:19,750
you click this now please a couple times

00:30:17,590 --> 00:30:22,960
clip clip carry on it won't cost you gin

00:30:19,750 --> 00:30:26,440
tonics now we're in demo mode yeah you

00:30:22,960 --> 00:30:28,090
see how this is happening now let's do

00:30:26,440 --> 00:30:31,420
one more thing who's got the who's got

00:30:28,090 --> 00:30:36,370
the button now ok would you please pull

00:30:31,420 --> 00:30:38,650
the plug careful the plug I mean removal

00:30:36,370 --> 00:30:44,560
from power ok now that client is going

00:30:38,650 --> 00:30:54,150
to die because it's powerless if it's

00:30:44,560 --> 00:31:02,200
not oh sure um have you pulled the plug

00:30:54,150 --> 00:31:06,520
thank you suck this message device

00:31:02,200 --> 00:31:09,970
device ID online false this message was

00:31:06,520 --> 00:31:11,710
obviously not i repeat not published by

00:31:09,970 --> 00:31:13,570
the device because without power yeah

00:31:11,710 --> 00:31:16,630
doesn't have a battery on board this was

00:31:13,570 --> 00:31:21,460
this is a last will and testament that

00:31:16,630 --> 00:31:22,870
the client originally published sorry

00:31:21,460 --> 00:31:24,580
the client originally set when it

00:31:22,870 --> 00:31:28,060
originally connected to the broker it

00:31:24,580 --> 00:31:30,360
said if i die yeah if my friend pulled

00:31:28,060 --> 00:31:33,400
the plug would you please on my behalf

00:31:30,360 --> 00:31:37,300
transmit this message to any subscriber

00:31:33,400 --> 00:31:39,100
so for example our icing a monitoring

00:31:37,300 --> 00:31:41,530
system could now immediately pick up

00:31:39,100 --> 00:31:44,590
this if you pick this up and say oh our

00:31:41,530 --> 00:31:45,190
sensor in tons o has died yeah somebody

00:31:44,590 --> 00:31:47,380
else it has to go

00:31:45,190 --> 00:31:51,070
have a look at it now do not plug it in

00:31:47,380 --> 00:31:56,230
yet please let me now show you the

00:31:51,070 --> 00:31:59,950
reason for retained messages i am now

00:31:56,230 --> 00:32:02,260
once again going to subscribe to the

00:31:59,950 --> 00:32:04,390
broker so i'm a new client i'm competing

00:32:02,260 --> 00:32:06,700
new client and I subscribe to the broker

00:32:04,390 --> 00:32:10,330
and I get to retained messages from the

00:32:06,700 --> 00:32:12,220
broker and these retained messages just

00:32:10,330 --> 00:32:15,790
a second please retain messages show me

00:32:12,220 --> 00:32:18,280
the last retained publishers and one of

00:32:15,790 --> 00:32:22,420
the last retained publishers was that

00:32:18,280 --> 00:32:36,730
our device dollar online is false okay

00:32:22,420 --> 00:32:40,960
yes if I subscribe to the wild card yes

00:32:36,730 --> 00:32:43,450
so depending on how we want devices to

00:32:40,960 --> 00:32:45,940
communicate with me with our client we

00:32:43,450 --> 00:32:47,590
would subscribe either all for example a

00:32:45,940 --> 00:32:51,040
monitoring system which probably

00:32:47,590 --> 00:32:54,910
subscribe to sensors however we sensors

00:32:51,040 --> 00:32:57,820
homie + dollar online yeah then it would

00:32:54,910 --> 00:33:00,400
get just the online messages and here

00:32:57,820 --> 00:33:03,010
again depending on whether the client is

00:33:00,400 --> 00:33:05,620
actually allowed to see those messages

00:33:03,010 --> 00:33:07,630
we have to also see what the broker

00:33:05,620 --> 00:33:09,610
access control lists allow us to see ya

00:33:07,630 --> 00:33:10,900
but if we subscribe to a wild card then

00:33:09,610 --> 00:33:17,350
we will see everything that we are

00:33:10,900 --> 00:33:19,170
allowed or permitted to see correct um

00:33:17,350 --> 00:33:22,000
[Music]

00:33:19,170 --> 00:33:28,600
electric would you please currently plug

00:33:22,000 --> 00:33:30,970
it in again and we will see when the

00:33:28,600 --> 00:33:32,800
device goes online one of the first

00:33:30,970 --> 00:33:34,870
things that it'll do it will publish

00:33:32,800 --> 00:33:37,570
information about itself and will also

00:33:34,870 --> 00:33:41,260
probably hopefully anyway say yeah okay

00:33:37,570 --> 00:33:42,970
i'm online now online true i have this

00:33:41,260 --> 00:33:44,380
IP address i have this firewall the

00:33:42,970 --> 00:33:46,510
signal and sec i'll tell you where this

00:33:44,380 --> 00:33:48,940
comes from in a moment and we see button

00:33:46,510 --> 00:33:52,800
is open no please carry on hand it over

00:33:48,940 --> 00:33:52,800
and people can continue clicking

00:33:55,670 --> 00:34:06,920
okay it clicks em so this little device

00:34:02,780 --> 00:34:10,220
that is click now is this we most d1

00:34:06,920 --> 00:34:12,919
mini as it is called it costs really

00:34:10,220 --> 00:34:15,850
very few you across for euro it has four

00:34:12,919 --> 00:34:19,100
megabytes of flash 64 kilobytes of RAM

00:34:15,850 --> 00:34:21,320
it runs on 3.3 volt careful if you're an

00:34:19,100 --> 00:34:31,850
Arduino fan you're probably used to 5

00:34:21,320 --> 00:34:35,230
volt this will fruit this thing it's not

00:34:31,850 --> 00:34:35,230
the first time I've worn one of these

00:34:36,040 --> 00:34:43,220
thank you it has 11 iol of digital i/os

00:34:41,000 --> 00:34:44,870
it has one analog I own it comes like

00:34:43,220 --> 00:34:46,940
this and packaged with little headers

00:34:44,870 --> 00:34:50,090
which you can you must not you can

00:34:46,940 --> 00:34:53,450
solder on it's a really nice package and

00:34:50,090 --> 00:34:55,040
this is this esp8266 the nice thing

00:34:53,450 --> 00:34:57,020
about this we must first was very small

00:34:55,040 --> 00:35:00,500
and relatively inexpensive but so are

00:34:57,020 --> 00:35:02,450
the others and the other nice thing is

00:35:00,500 --> 00:35:04,610
if you're not like I've you're not

00:35:02,450 --> 00:35:08,420
particularly into soldering stuff they

00:35:04,610 --> 00:35:10,400
also have a bunch of so-called shields

00:35:08,420 --> 00:35:13,450
so for example there's a real a shield

00:35:10,400 --> 00:35:17,570
where you can switch 220 volts for this

00:35:13,450 --> 00:35:19,730
if you do please be careful that's 220

00:35:17,570 --> 00:35:21,200
volts okay and they also have a

00:35:19,730 --> 00:35:25,760
knowledge shield which is a little

00:35:21,200 --> 00:35:28,520
display which is yeah very disappointing

00:35:25,760 --> 00:35:32,000
actually they have a temperature sensor

00:35:28,520 --> 00:35:33,950
this is tiny no this is I don't know

00:35:32,000 --> 00:35:36,320
half a square centimeter something's

00:35:33,950 --> 00:35:38,030
tiny they have a temperature sensor see

00:35:36,320 --> 00:35:41,000
a shield they have for example in SD

00:35:38,030 --> 00:35:42,500
card shield SD card she'll do we really

00:35:41,000 --> 00:35:45,020
need that yeah you could for example

00:35:42,500 --> 00:35:47,090
take the we Mo's build a little

00:35:45,020 --> 00:35:49,280
contraption that for example collects

00:35:47,090 --> 00:35:53,090
GPS a turn you write it into the into

00:35:49,280 --> 00:35:55,160
the SD card shield ok so there's just

00:35:53,090 --> 00:35:57,320
certain examples of these little devices

00:35:55,160 --> 00:36:00,050
in the different packaging's they come

00:35:57,320 --> 00:36:02,630
in and the different qualities of the

00:36:00,050 --> 00:36:06,080
different capabilities they have and one

00:36:02,630 --> 00:36:08,660
a bit of software that i would really if

00:36:06,080 --> 00:36:09,440
you are interested in this and i would

00:36:08,660 --> 00:36:11,480
highly recommend

00:36:09,440 --> 00:36:13,910
is really good fun one piece of software

00:36:11,480 --> 00:36:18,440
i would highly recommend is called homeo

00:36:13,910 --> 00:36:20,660
me esp8266 was originally written and

00:36:18,440 --> 00:36:21,980
still is maintained very intensively

00:36:20,660 --> 00:36:25,369
maintained by a french shop called

00:36:21,980 --> 00:36:28,760
maharaja was a student and he's created

00:36:25,369 --> 00:36:32,930
absolutely yeah gorgeous bit of kit a

00:36:28,760 --> 00:36:34,640
bit of software and this here with just

00:36:32,930 --> 00:36:38,510
a little bit missing here this here is

00:36:34,640 --> 00:36:40,790
the full software of the code running on

00:36:38,510 --> 00:36:47,119
that button that you're pressing now ok

00:36:40,790 --> 00:36:50,109
so this framework which also runs an

00:36:47,119 --> 00:36:53,180
arduino but it's mainly for 82 esp8266

00:36:50,109 --> 00:36:55,119
provides this whole thing with retained

00:36:53,180 --> 00:36:59,660
messages we connection to Wi-Fi

00:36:55,119 --> 00:37:07,270
automatically yeah dollar online showing

00:36:59,660 --> 00:37:10,369
signal etc ok how does one program these

00:37:07,270 --> 00:37:12,500
esp8266 if you're interested in c then

00:37:10,369 --> 00:37:15,290
you would for example use the arduino

00:37:12,500 --> 00:37:18,050
ide some of you will recognize this this

00:37:15,290 --> 00:37:19,970
is a green arduino ide which is probably

00:37:18,050 --> 00:37:22,640
seen if you've done arduino work it's

00:37:19,970 --> 00:37:25,280
the same language to see same C C++

00:37:22,640 --> 00:37:26,900
language you can also use something

00:37:25,280 --> 00:37:28,609
which I've only very recently discovered

00:37:26,900 --> 00:37:31,010
which is called platform io which allows

00:37:28,609 --> 00:37:33,020
you to use VI or emacs and then from the

00:37:31,010 --> 00:37:35,569
command line flash your devices also

00:37:33,020 --> 00:37:37,609
very very nice but if you're comfortable

00:37:35,569 --> 00:37:39,380
with the arduino ide and this is

00:37:37,609 --> 00:37:43,400
something that is certainly worth

00:37:39,380 --> 00:37:46,369
looking at and once again just to show

00:37:43,400 --> 00:37:49,990
you the messages that are being emitted

00:37:46,369 --> 00:37:53,359
by these little devices by this homie

00:37:49,990 --> 00:37:55,490
this homie framework has this convention

00:37:53,359 --> 00:37:58,040
that it has so called nodes sort of with

00:37:55,490 --> 00:38:00,410
capabilities which have a name you can

00:37:58,040 --> 00:38:05,450
specify anything for example temperature

00:38:00,410 --> 00:38:09,380
sensor or movement sensor in master

00:38:05,450 --> 00:38:12,589
bedroom or whatever um local IP the

00:38:09,380 --> 00:38:16,099
firmware name for more version a Wi-Fi

00:38:12,589 --> 00:38:18,440
signal etc etc etc okay and because this

00:38:16,099 --> 00:38:22,950
was so great we created something that

00:38:18,440 --> 00:38:26,970
we call homie OTA because homie

00:38:22,950 --> 00:38:29,430
because esp8266 this little two dollar

00:38:26,970 --> 00:38:32,550
things and have a capability of doing

00:38:29,430 --> 00:38:34,410
over-the-air updates of the air updates

00:38:32,550 --> 00:38:35,970
means you've created a little device

00:38:34,410 --> 00:38:38,700
you've created a little sensor look at

00:38:35,970 --> 00:38:41,460
something and you've installed it behind

00:38:38,700 --> 00:38:44,760
the paneling in your living room and it

00:38:41,460 --> 00:38:47,579
dies or you decide to not die sorry you

00:38:44,760 --> 00:38:48,750
decide to to add something to the

00:38:47,579 --> 00:38:51,030
firmware to add something to the

00:38:48,750 --> 00:38:53,040
software that means because you found a

00:38:51,030 --> 00:38:54,570
bug that means you have to go get them

00:38:53,040 --> 00:38:56,160
all out unscrew them get them all all

00:38:54,570 --> 00:38:58,650
bring them back to your desk and reflash

00:38:56,160 --> 00:39:01,079
them with over-the-air updates you are

00:38:58,650 --> 00:39:06,020
able to do this over the air over the

00:39:01,079 --> 00:39:09,660
Wi-Fi okay and the homie framework uses

00:39:06,020 --> 00:39:13,230
this capability that is built into the

00:39:09,660 --> 00:39:15,750
esp8266 to reflash itself over the air

00:39:13,230 --> 00:39:18,119
and because we were so comments on this

00:39:15,750 --> 00:39:20,700
we created homie OTA which is small

00:39:18,119 --> 00:39:22,950
python package which or program which

00:39:20,700 --> 00:39:27,510
does this okay so you can upload

00:39:22,950 --> 00:39:31,400
firmwares and schedule updates etc now

00:39:27,510 --> 00:39:33,720
what is probably horrendous for you but

00:39:31,400 --> 00:39:37,560
look at me I mean I'm not the youngest

00:39:33,720 --> 00:39:46,319
anymore is the retro vintage style optic

00:39:37,560 --> 00:39:49,380
of this it's just gorgeous right so what

00:39:46,319 --> 00:39:50,910
can you do with all this we can do a

00:39:49,380 --> 00:39:53,130
whole bunch of monitoring we can use

00:39:50,910 --> 00:39:55,530
these devices these small devices for

00:39:53,130 --> 00:39:57,180
monitoring for example yeah your typical

00:39:55,530 --> 00:40:00,720
temperature monitoring movement

00:39:57,180 --> 00:40:03,300
monitoring in a with a PIR sensor

00:40:00,720 --> 00:40:07,260
movement was entered your data center

00:40:03,300 --> 00:40:09,900
for example ok you can have or you can

00:40:07,260 --> 00:40:11,970
use inexpensive don't don't go too cheap

00:40:09,900 --> 00:40:15,270
because cheap is not always nice

00:40:11,970 --> 00:40:18,089
inexpensive sensors there are tons and

00:40:15,270 --> 00:40:20,369
tons and tons of examples that you can

00:40:18,089 --> 00:40:23,190
look at monitoring is interesting

00:40:20,369 --> 00:40:28,410
because of the because of the last will

00:40:23,190 --> 00:40:30,619
and testament official hate for this

00:40:28,410 --> 00:40:30,619
thing

00:40:30,940 --> 00:40:34,150
thank you as I say it's not the first

00:40:32,680 --> 00:40:38,589
time I wear them but my head has changed

00:40:34,150 --> 00:40:41,109
um because of the last will and

00:40:38,589 --> 00:40:44,819
testament Thank You Marcus which allows

00:40:41,109 --> 00:40:50,440
us to catch which allows us to catch

00:40:44,819 --> 00:40:52,900
dead devices and and alert of these debt

00:40:50,440 --> 00:40:55,030
devices and and and do things with it

00:40:52,900 --> 00:40:57,280
another thing that I would like to

00:40:55,030 --> 00:40:59,319
warmly recommend is either no dread

00:40:57,280 --> 00:41:02,410
which was created by a couple gentlemen

00:40:59,319 --> 00:41:04,569
at IBM very nice platform for

00:41:02,410 --> 00:41:08,170
integration MQTT and other things or

00:41:04,569 --> 00:41:11,740
MQTT warned MQTT one was created by

00:41:08,170 --> 00:41:14,680
myself together with Ben MQTT one is

00:41:11,740 --> 00:41:17,710
Python system which subscribes to any

00:41:14,680 --> 00:41:18,970
number of topics and has a whole bunch

00:41:17,710 --> 00:41:22,810
of plugins at the moment I think they're

00:41:18,970 --> 00:41:25,690
50 which can then where you couple a

00:41:22,810 --> 00:41:28,510
particular topic and of course its

00:41:25,690 --> 00:41:31,060
payload to a an alerting system push

00:41:28,510 --> 00:41:37,000
over twitter or smtp or nntp whatever

00:41:31,060 --> 00:41:39,880
you like ok so and in terms of practical

00:41:37,000 --> 00:41:41,950
solutions MQTT has been in use now for

00:41:39,880 --> 00:41:44,500
or quite a number of years for all the

00:41:41,950 --> 00:41:47,230
things as I say alerting metering

00:41:44,500 --> 00:41:49,270
logging for example is the pipeline with

00:41:47,230 --> 00:41:51,040
something around 30,000 an oil pipeline

00:41:49,270 --> 00:41:54,250
with which is being monitored with

00:41:51,040 --> 00:41:56,680
30,000 sensors on it location awareness

00:41:54,250 --> 00:41:58,329
tracking for example our own very own

00:41:56,680 --> 00:42:00,940
own tracks project as that the

00:41:58,329 --> 00:42:03,460
open-source tracking project automation

00:42:00,940 --> 00:42:07,630
of course home automation is James here

00:42:03,460 --> 00:42:10,900
yes James to use MQTT at home yep very

00:42:07,630 --> 00:42:13,660
good for controlling for monitoring as

00:42:10,900 --> 00:42:15,730
we've discussed already and so this MQTT

00:42:13,660 --> 00:42:18,130
and all sorts of things Greylock for

00:42:15,730 --> 00:42:22,200
example is an MQTT plug-in to where you

00:42:18,130 --> 00:42:22,200
can pump messages directly into gray log

00:42:22,800 --> 00:42:28,119
ansible has the ansible configuration

00:42:25,630 --> 00:42:30,490
management system has MQTT alert us to

00:42:28,119 --> 00:42:31,569
for example indicator that something's

00:42:30,490 --> 00:42:36,819
happened or blade book has finished

00:42:31,569 --> 00:42:39,700
guess who wrote that rabbitmq the amqp

00:42:36,819 --> 00:42:43,930
server software has an MQTT plugin

00:42:39,700 --> 00:42:44,239
collect d speaks MQTT opha be the home

00:42:43,930 --> 00:42:47,919
modem

00:42:44,239 --> 00:42:51,649
broker is very very strong an amputee to

00:42:47,919 --> 00:42:56,299
to talk to other devices that you may

00:42:51,649 --> 00:43:03,109
have in your environment github uses

00:42:56,299 --> 00:43:05,959
MQTT anybody know where I forget what

00:43:03,109 --> 00:43:07,639
it's called and github you can set you

00:43:05,959 --> 00:43:11,089
can set up your github account or github

00:43:07,639 --> 00:43:13,609
repository to issue for example web

00:43:11,089 --> 00:43:15,709
hooks or issue males when a particular

00:43:13,609 --> 00:43:18,169
event occurs for example commit arrives

00:43:15,709 --> 00:43:19,519
and there's a whole number of

00:43:18,169 --> 00:43:20,989
integrations there on the right hand

00:43:19,519 --> 00:43:25,989
side I forget what this chapter school

00:43:20,989 --> 00:43:25,989
in there is also MQTT publish ok

00:43:26,049 --> 00:43:30,709
Wireshark has support for m50d fluke so

00:43:28,579 --> 00:43:32,479
our electricity meters or we make

00:43:30,709 --> 00:43:35,119
electric they make also electricity

00:43:32,479 --> 00:43:37,599
metering systems is a swedish firm very

00:43:35,119 --> 00:43:41,179
very strong with nqg also an open wrt

00:43:37,599 --> 00:43:47,629
devices Jenkins has supportive MQTT etc

00:43:41,179 --> 00:43:53,739
etc etc the whole plethora of of systems

00:43:47,629 --> 00:43:53,739
that have support for MQTT and use MQTT

00:43:55,959 --> 00:44:04,609
and a good starting point for all things

00:43:59,149 --> 00:44:11,149
MQTT is MQTT org with a whole number of

00:44:04,609 --> 00:44:18,039
links on etc right so much earlier than

00:44:11,149 --> 00:44:18,039
expected any questions yes

00:44:23,540 --> 00:44:27,960
the homie platform you can connect the

00:44:26,340 --> 00:44:31,890
sensors like temperature and stuff like

00:44:27,960 --> 00:44:34,020
that so it does MQTT publishing to the

00:44:31,890 --> 00:44:36,930
broker but can can it also work the

00:44:34,020 --> 00:44:41,760
other way like you can it can subscribe

00:44:36,930 --> 00:44:43,380
to certain messages and then like I

00:44:41,760 --> 00:44:45,960
don't know switch something on or

00:44:43,380 --> 00:44:47,910
absolutely sorry I absolutely very good

00:44:45,960 --> 00:44:51,180
question and I forgot to to mention that

00:44:47,910 --> 00:44:55,020
earlier this if you look at this later

00:44:51,180 --> 00:44:58,020
on in there you will see we mostly one

00:44:55,020 --> 00:45:00,870
mini with an esp8266 that is also

00:44:58,020 --> 00:45:02,730
running homie okay so that is also a

00:45:00,870 --> 00:45:04,470
client is running army let's subscribe

00:45:02,730 --> 00:45:07,410
to a particular topic and that is what

00:45:04,470 --> 00:45:14,730
then fix the the LED yeah yes of course

00:45:07,410 --> 00:45:16,980
it counts of crime the network you use

00:45:14,730 --> 00:45:20,070
for the demo is not the same as all

00:45:16,980 --> 00:45:22,710
network it's a different Wi-Fi network

00:45:20,070 --> 00:45:26,730
because I was trying to connect the ball

00:45:22,710 --> 00:45:30,870
girl but failed you know it's a it's a

00:45:26,730 --> 00:45:34,440
private Wi-Fi it's it's it's a private

00:45:30,870 --> 00:45:39,000
Wi-Fi to the SSID is JPM 308 or

00:45:34,440 --> 00:45:40,560
something like that and I demos are bad

00:45:39,000 --> 00:45:42,240
enough because also the crap can go

00:45:40,560 --> 00:45:45,180
wrong I mean we are at t' people we know

00:45:42,240 --> 00:45:46,680
that so I never I try to never rely on

00:45:45,180 --> 00:45:48,390
anything that exists so I bring

00:45:46,680 --> 00:45:51,560
everything along no but I will gladly

00:45:48,390 --> 00:45:51,560
give you access to it

00:46:00,150 --> 00:46:05,050
at the beginning I also try to implement

00:46:02,860 --> 00:46:08,230
this MQTT and that was not really

00:46:05,050 --> 00:46:11,590
straightforward for me so now I found

00:46:08,230 --> 00:46:14,140
really nice remember called divides hive

00:46:11,590 --> 00:46:18,700
if you know about that what's it called

00:46:14,140 --> 00:46:22,060
play device hive device type hive it has

00:46:18,700 --> 00:46:24,960
already implemented HTTP server so you

00:46:22,060 --> 00:46:28,330
can go directly to IP address it has

00:46:24,960 --> 00:46:31,270
multicast DNS inside it has a lot of

00:46:28,330 --> 00:46:33,880
features yeah you can go for that it's a

00:46:31,270 --> 00:46:36,580
really nice as a starting point okay

00:46:33,880 --> 00:46:39,970
it's much nicer than working with the

00:46:36,580 --> 00:46:43,570
MQTT brokers okay I'll have a look at it

00:46:39,970 --> 00:46:47,370
I not quite sure what you mean by it's

00:46:43,570 --> 00:46:47,370
nicer than working with an MQTT broker

00:46:51,420 --> 00:46:59,780
documentation and I once install it the

00:46:55,980 --> 00:47:02,430
MGD brokered a mosquito

00:46:59,780 --> 00:47:06,240
that was not really straightforward to

00:47:02,430 --> 00:47:08,580
implement so the first thing that you

00:47:06,240 --> 00:47:10,890
can do it's to buy this it has man pages

00:47:08,580 --> 00:47:14,220
yes I know the first thing that you have

00:47:10,890 --> 00:47:16,859
to do it's to buy this device then you

00:47:14,220 --> 00:47:19,740
have to find out how to flash it find

00:47:16,859 --> 00:47:21,510
the correct further for that yeah hang

00:47:19,740 --> 00:47:22,950
on hang on hang on but that is not

00:47:21,510 --> 00:47:24,990
mosquito mosquito the broker that you

00:47:22,950 --> 00:47:29,540
would install one on your linux box or

00:47:24,990 --> 00:47:33,810
on your yes yes main frame or whatever

00:47:29,540 --> 00:47:35,760
so just I want to advise how to

00:47:33,810 --> 00:47:37,560
everybody to look into the this project

00:47:35,760 --> 00:47:43,200
okay this device hive thank you very

00:47:37,560 --> 00:47:45,270
much hey James talk to me about the most

00:47:43,200 --> 00:47:47,970
complex thing you do today with MQTT at

00:47:45,270 --> 00:47:52,260
your house or work or whatever the most

00:47:47,970 --> 00:47:54,869
complex thing yeah the framework the

00:47:52,260 --> 00:47:57,330
reason I ask is is I'm I'm still trying

00:47:54,869 --> 00:48:00,180
to understand the orchestration piece

00:47:57,330 --> 00:48:02,609
you know I use this and I'm interested

00:48:00,180 --> 00:48:05,480
in how you do sort of you know message

00:48:02,609 --> 00:48:08,609
passing or or build things using MQTT

00:48:05,480 --> 00:48:11,400
okay maybe the most complex thing or the

00:48:08,609 --> 00:48:13,500
most let's say the thing that that

00:48:11,400 --> 00:48:15,420
requires most getting used in a lot of

00:48:13,500 --> 00:48:17,970
systems particularly if you do things

00:48:15,420 --> 00:48:20,330
with HTTP HTTP and M cutie are

00:48:17,970 --> 00:48:23,540
frequently compared in this comparison

00:48:20,330 --> 00:48:26,310
basically sucks that it fails https is

00:48:23,540 --> 00:48:27,510
generally very high volume so you have a

00:48:26,310 --> 00:48:29,849
lot of data because you have all the

00:48:27,510 --> 00:48:32,190
headers that our paths HTTP is generally

00:48:29,849 --> 00:48:34,260
almost always appalling system you have

00:48:32,190 --> 00:48:37,140
to Paul for information that's those are

00:48:34,260 --> 00:48:38,910
some of the advantages of MQTT but of

00:48:37,140 --> 00:48:40,320
course some of the advantages of a chore

00:48:38,910 --> 00:48:42,510
one of the advantages of HTTP is

00:48:40,320 --> 00:48:45,060
relatively trivial to do things like

00:48:42,510 --> 00:48:47,670
remote procedure calls or that is also

00:48:45,060 --> 00:48:50,670
relatively traffic well relatively easy

00:48:47,670 --> 00:48:52,349
to do with co app which is also

00:48:50,670 --> 00:48:54,210
standardized protocol also for the

00:48:52,349 --> 00:48:56,369
Internet of Things it's a completely

00:48:54,210 --> 00:48:58,890
different sort of completely different

00:48:56,369 --> 00:49:01,410
view now if you want to do anything that

00:48:58,890 --> 00:49:03,839
is sort of remote procedure called based

00:49:01,410 --> 00:49:05,369
I want to send to a device I want to I

00:49:03,839 --> 00:49:06,960
want to ask it how are you you know

00:49:05,369 --> 00:49:10,140
what's your battery level I I want to

00:49:06,960 --> 00:49:12,300
actively ask this that is relatively

00:49:10,140 --> 00:49:13,080
hard to do because there is basically

00:49:12,300 --> 00:49:15,000
impossible to do

00:49:13,080 --> 00:49:17,760
I'm Katie to you so what what what you

00:49:15,000 --> 00:49:19,850
then do is you the client who's

00:49:17,760 --> 00:49:22,440
interested interested in its information

00:49:19,850 --> 00:49:24,390
publishes a message hoping that the

00:49:22,440 --> 00:49:26,120
client will pick it up we'll use it will

00:49:24,390 --> 00:49:29,910
do something with it and then respond

00:49:26,120 --> 00:49:31,950
that is i would say sort of the most

00:49:29,910 --> 00:49:33,540
complex thing to do because you have to

00:49:31,950 --> 00:49:38,360
wrap your head about around topics and

00:49:33,540 --> 00:49:38,360
who gets water and who answers how and

00:49:38,570 --> 00:49:44,760
yeah i think that would be it it is

00:49:42,420 --> 00:49:47,760
possible we do we actually do we have

00:49:44,760 --> 00:49:49,800
devices tracking devices and vehicles

00:49:47,760 --> 00:49:54,000
and we actually talked to these devices

00:49:49,800 --> 00:49:55,790
in the field over m qg t / gsm networks

00:49:54,000 --> 00:50:00,870
them so i mean this is really hardcore

00:49:55,790 --> 00:50:03,780
and if you if you can live with the

00:50:00,870 --> 00:50:05,850
system in which you basically asked a

00:50:03,780 --> 00:50:08,850
question and the answer can come back an

00:50:05,850 --> 00:50:10,560
hour later then that's fine if you need

00:50:08,850 --> 00:50:12,480
to immediately know then you're probably

00:50:10,560 --> 00:50:14,850
using the totally wrong equipment

00:50:12,480 --> 00:50:16,530
because then also gsm networks are the

00:50:14,850 --> 00:50:18,000
wrong the wrong way to do it if the

00:50:16,530 --> 00:50:20,010
thing is offline because there is no

00:50:18,000 --> 00:50:22,020
reception no gsm reception in that

00:50:20,010 --> 00:50:25,860
particular location then you can't talk

00:50:22,020 --> 00:50:27,510
to it okay so i think yeah remote

00:50:25,860 --> 00:50:30,420
something remote procedure call like is

00:50:27,510 --> 00:50:36,240
probably the most the most complex thing

00:50:30,420 --> 00:50:42,090
to do did I answer your question one

00:50:36,240 --> 00:50:43,880
more question okay I will wait for you

00:50:42,090 --> 00:50:46,410
at the door for those gin tonics and

00:50:43,880 --> 00:50:48,180
other than that thank you very much for

00:50:46,410 --> 00:50:50,130
your attention I hope it was interesting

00:50:48,180 --> 00:50:52,470
for you and thank you thank you young

00:50:50,130 --> 00:50:54,530
people where where's my son

00:50:52,470 --> 00:50:54,530

YouTube URL: https://www.youtube.com/watch?v=LutBvKBMG8c


