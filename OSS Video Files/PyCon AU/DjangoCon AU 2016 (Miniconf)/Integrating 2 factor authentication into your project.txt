Title: Integrating 2 factor authentication into your project
Publication date: 2016-08-16
Playlist: DjangoCon AU 2016 (Miniconf)
Description: 
	Markus Holtermann
https://2016.pycon-au.org/schedule/31/view_talk
Most websites these days require some kind of authentication. User name + password is the most common one. OAuth with Facebook / Github / Google / Twitter is also common. But sometimes you can't rely on 3rd party services and user name + password is not enough. In those cases 2 Factor Authentication is a nice, additional security layer. Use e.g. a phone to ensure a more secure authentication.
Captions: 
	00:00:01,460 --> 00:00:07,859
all right ladies and gentleman will get

00:00:03,510 --> 00:00:11,400
going again our next speaker is our

00:00:07,859 --> 00:00:14,250
first core contributor for today isn't

00:00:11,400 --> 00:00:17,699
it yes it is Marcus Halterman joined the

00:00:14,250 --> 00:00:20,100
core team or year and change ago mostly

00:00:17,699 --> 00:00:23,910
to clean up all the mess with migrations

00:00:20,100 --> 00:00:25,170
at Android left he's here today to talk

00:00:23,910 --> 00:00:26,730
to us about two factor authentication

00:00:25,170 --> 00:00:47,550
and integrating it into your django

00:00:26,730 --> 00:00:51,570
project Thank You Marcus probably should

00:00:47,550 --> 00:00:53,309
switch on my microphone and my more

00:00:51,570 --> 00:00:55,379
regular contribution to jangle started

00:00:53,309 --> 00:00:58,620
in beginning of fourteen and twenty

00:00:55,379 --> 00:01:01,469
fourteen and then well with the upcoming

00:00:58,620 --> 00:01:04,710
release of tango migrations 01 dragon

00:01:01,469 --> 00:01:07,500
1.7 I cleaned up a bunch of things in

00:01:04,710 --> 00:01:09,840
migrations open lots of poor request and

00:01:07,500 --> 00:01:13,700
the court him back then was too lazy to

00:01:09,840 --> 00:01:16,650
merge them so they made me do it myself

00:01:13,700 --> 00:01:18,470
so in turn that was 2015 when I

00:01:16,650 --> 00:01:21,479
eventually became a core developer in

00:01:18,470 --> 00:01:23,549
well these days I work at a as a senior

00:01:21,479 --> 00:01:25,740
developer at a company called later pay

00:01:23,549 --> 00:01:27,810
in Germany where we do mobile

00:01:25,740 --> 00:01:29,610
micropayment or micro pavement in

00:01:27,810 --> 00:01:32,610
general I would be tried to make it

00:01:29,610 --> 00:01:34,619
smarter and easier to use for this part

00:01:32,610 --> 00:01:37,950
that's selling digital goods and the

00:01:34,619 --> 00:01:41,070
part that's purchasing and in a way that

00:01:37,950 --> 00:01:43,110
we try to make it as simple as going out

00:01:41,070 --> 00:01:48,360
for dinner you order you get your food

00:01:43,110 --> 00:01:50,159
and when you're done you pay about this

00:01:48,360 --> 00:01:53,189
talk I need to give you a short

00:01:50,159 --> 00:01:55,799
disclaimer this talk is about security

00:01:53,189 --> 00:01:58,500
in cryptography I'm not a security or

00:01:55,799 --> 00:02:00,000
cryptographer so keep all those please

00:01:58,500 --> 00:02:01,680
in want this is to the best of my

00:02:00,000 --> 00:02:03,719
knowledge to the best of the knowledge

00:02:01,680 --> 00:02:07,259
of people at first and ask when I was

00:02:03,719 --> 00:02:08,910
not sure myself if there's anything in

00:02:07,259 --> 00:02:11,459
this talk that when you know this is

00:02:08,910 --> 00:02:13,230
wrong what I tell what I told you here

00:02:11,459 --> 00:02:13,810
please find me afterwards so I can

00:02:13,230 --> 00:02:17,860
address

00:02:13,810 --> 00:02:20,590
for a publish my slides let's get a bit

00:02:17,860 --> 00:02:24,099
in the history of authentication in

00:02:20,590 --> 00:02:25,360
general and authentication is to be

00:02:24,099 --> 00:02:28,120
actually something that we are

00:02:25,360 --> 00:02:30,970
confronted with every single day you get

00:02:28,120 --> 00:02:32,980
up in the morning most of you a lot of

00:02:30,970 --> 00:02:35,349
you probably have the first thing they

00:02:32,980 --> 00:02:36,849
do is have a look at their phone at the

00:02:35,349 --> 00:02:38,680
news reader or whether or what not and

00:02:36,849 --> 00:02:40,390
what they have to do what you have to do

00:02:38,680 --> 00:02:42,190
before you actually see something is

00:02:40,390 --> 00:02:43,720
unlock the screen there you go you

00:02:42,190 --> 00:02:45,130
authenticated yourself against your

00:02:43,720 --> 00:02:46,569
phone that you're actually the person

00:02:45,130 --> 00:02:50,230
who is able to but allowed to use the

00:02:46,569 --> 00:02:52,390
phone but that's today what was there

00:02:50,230 --> 00:02:56,410
before maybe a decade ago centuries ago

00:02:52,390 --> 00:03:00,610
and interestingly passwords are fairly

00:02:56,410 --> 00:03:04,030
old about 300 BC the Romans past

00:03:00,610 --> 00:03:07,870
so-called watchwords between different

00:03:04,030 --> 00:03:11,290
parts of their military and in their

00:03:07,870 --> 00:03:15,000
military structures so that certain key

00:03:11,290 --> 00:03:18,730
people knew which of those parts were

00:03:15,000 --> 00:03:20,950
well not providing any or not forwarding

00:03:18,730 --> 00:03:26,530
information to others and then could

00:03:20,950 --> 00:03:29,880
deal with that fact but time evolved and

00:03:26,530 --> 00:03:33,370
so did passwords and eventually in 1944

00:03:29,880 --> 00:03:35,500
paratroopers from the US had what words

00:03:33,370 --> 00:03:38,290
or what was then already called the

00:03:35,500 --> 00:03:42,069
challenge which response at the Battle

00:03:38,290 --> 00:03:44,530
of Normandy and they've had a challenge

00:03:42,069 --> 00:03:49,480
what which was flesh and were expecting

00:03:44,530 --> 00:03:53,489
a response Thunder that is also history

00:03:49,480 --> 00:03:56,950
but and these are both word based or

00:03:53,489 --> 00:04:01,810
language based in this sense when you go

00:03:56,950 --> 00:04:04,500
even further back in about 700 BC the

00:04:01,810 --> 00:04:08,950
Greek and Spartans had a thing called

00:04:04,500 --> 00:04:11,380
Scytale skytel which is a cylinder with

00:04:08,950 --> 00:04:13,329
parchment 14 hundred and only if you had

00:04:11,380 --> 00:04:15,459
the cylinder with a certain Diamont here

00:04:13,329 --> 00:04:18,120
you could either decrypt the message or

00:04:15,459 --> 00:04:22,810
when you got a message and wanted to

00:04:18,120 --> 00:04:25,659
make sure that it's the the owner or the

00:04:22,810 --> 00:04:27,190
right health is message is the one who

00:04:25,659 --> 00:04:29,590
pretended to be the

00:04:27,190 --> 00:04:32,050
you had to take the cylinder with a

00:04:29,590 --> 00:04:35,290
certain diameter and only if those added

00:04:32,050 --> 00:04:37,570
up then everything was fine so this was

00:04:35,290 --> 00:04:40,260
kind of another part of authentication

00:04:37,570 --> 00:04:44,620
where you had something to make sure

00:04:40,260 --> 00:04:47,670
something wedged up now in terms of two

00:04:44,620 --> 00:04:51,550
factor authentication or two FA as its

00:04:47,670 --> 00:04:53,410
abbreviated in many places what is it

00:04:51,550 --> 00:04:55,650
actually and well two factor

00:04:53,410 --> 00:04:58,120
authentication is a particular part of

00:04:55,650 --> 00:05:01,450
multi-factor authentication and somewhat

00:04:58,120 --> 00:05:04,840
related to universal factor Universal

00:05:01,450 --> 00:05:07,300
two-factor authentication or UTF and in

00:05:04,840 --> 00:05:09,340
general a general it consists of two

00:05:07,300 --> 00:05:13,440
things one thing you possess or user

00:05:09,340 --> 00:05:16,900
processes and something user knows and

00:05:13,440 --> 00:05:18,700
looking at our daily life well gets

00:05:16,900 --> 00:05:20,230
credit cards and the pin only when you

00:05:18,700 --> 00:05:22,360
have the pin and the credit card you can

00:05:20,230 --> 00:05:28,780
actually get money out of these stupid

00:05:22,360 --> 00:05:31,690
mmm ATMs you have logins for Google

00:05:28,780 --> 00:05:33,760
github or not and you can only log in

00:05:31,690 --> 00:05:36,340
when you have your password and some

00:05:33,760 --> 00:05:37,750
kind of token generator for example on

00:05:36,340 --> 00:05:40,120
your phone if you don't have your phone

00:05:37,750 --> 00:05:43,140
well yeah all of like you can't log in

00:05:40,120 --> 00:05:45,790
unless you have access to backup keys

00:05:43,140 --> 00:05:48,340
which is also something you possess you

00:05:45,790 --> 00:05:52,600
possess a copy or printed out probably

00:05:48,340 --> 00:05:53,740
of those static keys but there's also

00:05:52,600 --> 00:05:56,890
different things that are not

00:05:53,740 --> 00:05:59,500
necessarily IT related think about

00:05:56,890 --> 00:06:02,710
fingerprints they are pretty much unique

00:05:59,500 --> 00:06:06,810
to everybody about the iris of your eyes

00:06:02,710 --> 00:06:09,370
or the voice to be fair enough the voice

00:06:06,810 --> 00:06:12,400
their computer programs these days that

00:06:09,370 --> 00:06:14,530
manage to simulate voices of other

00:06:12,400 --> 00:06:16,330
people so I wouldn't rely on voice

00:06:14,530 --> 00:06:20,590
recognition or voice identification

00:06:16,330 --> 00:06:23,770
probably but it's still more advanced

00:06:20,590 --> 00:06:25,870
than for example SMS which is a common

00:06:23,770 --> 00:06:30,390
thing used by banks at least back at

00:06:25,870 --> 00:06:32,590
northern Germany but looking at the NIST

00:06:30,390 --> 00:06:34,870
which is the national institute of

00:06:32,590 --> 00:06:38,770
standards and technology you should not

00:06:34,870 --> 00:06:40,720
use SMS or any kind of this out-of-band

00:06:38,770 --> 00:06:43,660
authentication in that area

00:06:40,720 --> 00:06:45,730
and they recently released or published

00:06:43,660 --> 00:06:48,610
a draft on digital authentication

00:06:45,730 --> 00:06:51,190
guidelines rigid head says due to the

00:06:48,610 --> 00:06:53,320
risk of SMS messages may be intercepted

00:06:51,190 --> 00:06:55,000
or redirected implementers of new

00:06:53,320 --> 00:06:59,260
systems should carefully consider

00:06:55,000 --> 00:07:01,120
alternatives authentications well yes do

00:06:59,260 --> 00:07:03,580
not use SMS if you even think about

00:07:01,120 --> 00:07:05,830
doing two-factor authentication there

00:07:03,580 --> 00:07:08,830
are other features I mentioned before

00:07:05,830 --> 00:07:12,130
I'm going going to go into details in

00:07:08,830 --> 00:07:15,460
the rest of the talk make sure you

00:07:12,130 --> 00:07:16,870
follow common standards in terms of what

00:07:15,460 --> 00:07:21,250
you should do not what everybody is

00:07:16,870 --> 00:07:26,500
doing and what they are saying is

00:07:21,250 --> 00:07:29,440
essentially do not use SMS yes now for

00:07:26,500 --> 00:07:32,530
today and for this talk and today as in

00:07:29,440 --> 00:07:34,150
the current time we are living in what

00:07:32,530 --> 00:07:37,600
is out there and what should you

00:07:34,150 --> 00:07:41,169
probably be using and let's start with

00:07:37,600 --> 00:07:43,480
the basis of probably the most two most

00:07:41,169 --> 00:07:46,960
commonly used authentication or two

00:07:43,480 --> 00:07:50,169
factor authentication and algorithms one

00:07:46,960 --> 00:07:53,230
is h-o-t p which stands for HTML based

00:07:50,169 --> 00:07:56,169
one-time passwords and it's not really

00:07:53,230 --> 00:07:59,320
magic what's happening there it's a H

00:07:56,169 --> 00:08:02,140
make sure one sha-1 itself is not secure

00:07:59,320 --> 00:08:05,220
anymore but in combination with with H

00:08:02,140 --> 00:08:09,820
make this the insecurities of sha-1 are

00:08:05,220 --> 00:08:12,970
not there and what H make does they take

00:08:09,820 --> 00:08:15,460
a counter a key and do a bit of

00:08:12,970 --> 00:08:19,330
cryptography and a bit of bit shifting

00:08:15,460 --> 00:08:22,120
by shifting and truncation and this is

00:08:19,330 --> 00:08:23,979
what your six digit pin is you get from

00:08:22,120 --> 00:08:27,760
your whatever google authenticator app

00:08:23,979 --> 00:08:29,590
on your phone for example and when you

00:08:27,760 --> 00:08:33,789
want to look at the code this is what

00:08:29,590 --> 00:08:37,030
the jingle OTP package does it's a bit

00:08:33,789 --> 00:08:42,099
reformatted but this is all you need to

00:08:37,030 --> 00:08:45,220
have encouraged to get a hig p token

00:08:42,099 --> 00:08:49,480
based on the key and the counter now

00:08:45,220 --> 00:08:52,240
HTTP is while it works it's also kind of

00:08:49,480 --> 00:08:54,460
a mess when you accidentally press the

00:08:52,240 --> 00:08:56,530
button for get please get me a new Tok

00:08:54,460 --> 00:08:58,990
because then server and client us on the

00:08:56,530 --> 00:09:03,700
auto sync so somebody came up with a

00:08:58,990 --> 00:09:07,150
smart idea which is totp and this is no

00:09:03,700 --> 00:09:11,170
magic at all either it is based on h OT

00:09:07,150 --> 00:09:13,750
p and instead of taking a counter as in

00:09:11,170 --> 00:09:15,550
one two three going up it takes the

00:09:13,750 --> 00:09:19,750
current time which is why it's called

00:09:15,550 --> 00:09:21,990
time-based one-time pads and taking the

00:09:19,750 --> 00:09:26,230
current time is kind of a bit annoying

00:09:21,990 --> 00:09:28,420
when you need to only have like a second

00:09:26,230 --> 00:09:30,850
or so to enter the number because this

00:09:28,420 --> 00:09:33,670
is probably not going to work so smart

00:09:30,850 --> 00:09:39,240
people came up when writing the LC 2

00:09:33,670 --> 00:09:44,470
let's take a certain time span t 0 to t

00:09:39,240 --> 00:09:46,810
/ by a certain time span and let's take

00:09:44,470 --> 00:09:48,910
this this is a counter time only moving

00:09:46,810 --> 00:09:52,240
forward this is a perfectly valid

00:09:48,910 --> 00:09:54,700
counter it's not continues but that

00:09:52,240 --> 00:09:56,350
doesn't really matter the culture here

00:09:54,700 --> 00:09:59,350
is that you may only need to make sure

00:09:56,350 --> 00:10:01,690
that you when you validate it a token

00:09:59,350 --> 00:10:03,670
you need to make sure that you are not

00:10:01,690 --> 00:10:06,340
going to use the token that has been

00:10:03,670 --> 00:10:08,830
used before so only all this door or

00:10:06,340 --> 00:10:13,710
always remember the last time you had a

00:10:08,830 --> 00:10:17,200
valid toten and you'll be fine so

00:10:13,710 --> 00:10:19,990
expressing this encode Python time

00:10:17,200 --> 00:10:22,450
persons time no time returns floats so

00:10:19,990 --> 00:10:26,290
you need to be do a bit of casting two

00:10:22,450 --> 00:10:30,730
integers than the integer division there

00:10:26,290 --> 00:10:34,150
and then you call a tow TP with what you

00:10:30,730 --> 00:10:36,400
have there as a counter in Turkey these

00:10:34,150 --> 00:10:39,520
are software implementations there are

00:10:36,400 --> 00:10:44,380
things like Yubikey and nitro key which

00:10:39,520 --> 00:10:46,780
is the low brand you wiki from from

00:10:44,380 --> 00:10:50,350
Germany so I think you Vicky Yubikey is

00:10:46,780 --> 00:10:53,710
based in the US and so if you're scared

00:10:50,350 --> 00:10:54,970
of NSA or things then you might want to

00:10:53,710 --> 00:11:01,420
go for something else not that this

00:10:54,970 --> 00:11:03,520
probably matter but well maybe these are

00:11:01,420 --> 00:11:07,430
hardware-based implementations of

00:11:03,520 --> 00:11:10,760
one-time pads in various forms

00:11:07,430 --> 00:11:12,950
and and features some of them just

00:11:10,760 --> 00:11:16,010
provide you with one time pad some of

00:11:12,950 --> 00:11:20,510
them do encrypted storage as an

00:11:16,010 --> 00:11:23,690
untouched USB stick in look at their

00:11:20,510 --> 00:11:25,399
products or product maps and ya figure

00:11:23,690 --> 00:11:28,940
out what if and what you want to use

00:11:25,399 --> 00:11:32,589
them I don't have one not true of I want

00:11:28,940 --> 00:11:36,880
to have one in the upcoming future but

00:11:32,589 --> 00:11:38,720
yeah now given these basics about

00:11:36,880 --> 00:11:40,520
one-time pads or two factor

00:11:38,720 --> 00:11:44,240
authentication how do we actually get

00:11:40,520 --> 00:11:45,980
this into Django because that's Django

00:11:44,240 --> 00:11:47,690
con if we want to have this in Django

00:11:45,980 --> 00:11:52,640
because that's also the title of the

00:11:47,690 --> 00:11:55,459
talk and the next five slides are going

00:11:52,640 --> 00:11:57,200
to be a bunch of source code I got I

00:11:55,459 --> 00:11:59,029
will dump that on you you don't need to

00:11:57,200 --> 00:12:01,580
understand all of that like looking at

00:11:59,029 --> 00:12:03,709
it in understand what it's doing Cano

00:12:01,580 --> 00:12:06,260
goes through the important part bits and

00:12:03,709 --> 00:12:09,110
pieces I will point out a couple of

00:12:06,260 --> 00:12:12,020
things that are gotchas these slides

00:12:09,110 --> 00:12:14,120
will be online later you can have a look

00:12:12,020 --> 00:12:15,830
there when you want to don't need to

00:12:14,120 --> 00:12:20,029
take necessarily take pictures of all

00:12:15,830 --> 00:12:22,310
the slides yeah what I'm going to do is

00:12:20,029 --> 00:12:24,080
implement the totp device because that's

00:12:22,310 --> 00:12:28,520
what you probably going to use these

00:12:24,080 --> 00:12:30,620
days and then have a valid data or

00:12:28,520 --> 00:12:33,260
decorator for view that make sure only

00:12:30,620 --> 00:12:36,890
if when you provided valid totp do come

00:12:33,260 --> 00:12:39,440
you can actually access with you let's

00:12:36,890 --> 00:12:44,060
start off with the model so we need to

00:12:39,440 --> 00:12:46,550
have a key we need to have the the this

00:12:44,060 --> 00:12:48,560
device designed to a user and we accept

00:12:46,550 --> 00:12:51,760
before we want to store the last time it

00:12:48,560 --> 00:12:54,740
was used as well as the first when this

00:12:51,760 --> 00:12:58,579
counter should start and how long one of

00:12:54,740 --> 00:13:00,860
those intervals should be we also have

00:12:58,579 --> 00:13:03,649
this verified talking thing that makes

00:13:00,860 --> 00:13:05,600
sure that the last time or the current

00:13:03,649 --> 00:13:08,209
I'm met is greater than last time it was

00:13:05,600 --> 00:13:10,640
used and that well both talking actually

00:13:08,209 --> 00:13:14,120
add up then well you want to update the

00:13:10,640 --> 00:13:16,270
current instance and return true or

00:13:14,120 --> 00:13:16,270
false

00:13:17,520 --> 00:13:24,880
the form or the view we eventually use

00:13:21,400 --> 00:13:27,160
for validating in token the userform

00:13:24,880 --> 00:13:29,950
because it's an user important when you

00:13:27,160 --> 00:13:32,050
have user input you use forms it's

00:13:29,950 --> 00:13:36,490
pretty simple form takes one feared an

00:13:32,050 --> 00:13:38,830
integer that's well validates if the

00:13:36,490 --> 00:13:42,840
token adds up to what the should be on

00:13:38,830 --> 00:13:47,620
the for the user then you're all set

00:13:42,840 --> 00:13:51,670
this is a view it's checks if you have a

00:13:47,620 --> 00:13:54,550
if the current session is verified which

00:13:51,670 --> 00:13:56,830
is a key i defined kind of come up there

00:13:54,550 --> 00:13:58,240
with whatever you want if the current

00:13:56,830 --> 00:14:00,850
session is verified which means the user

00:13:58,240 --> 00:14:04,650
had provided a valid TOTP talking then

00:14:00,850 --> 00:14:07,360
well let's redirect to whatever the

00:14:04,650 --> 00:14:09,340
wherever you want so you this is like a

00:14:07,360 --> 00:14:12,280
really basic implementation so we

00:14:09,340 --> 00:14:17,560
redirect to the lock the view after

00:14:12,280 --> 00:14:20,380
logging the rest of the review is plain

00:14:17,560 --> 00:14:22,900
post use function based person to post

00:14:20,380 --> 00:14:24,580
request views in Django you construct

00:14:22,900 --> 00:14:27,670
the form if it's valid you do things if

00:14:24,580 --> 00:14:29,620
not you return the form to the template

00:14:27,670 --> 00:14:35,760
or if it's not a post request to create

00:14:29,620 --> 00:14:38,230
form now comes the interesting part the

00:14:35,760 --> 00:14:42,220
decorators or mixings you can put on

00:14:38,230 --> 00:14:44,350
your views when you check foreign itself

00:14:42,220 --> 00:14:46,240
if the user is authenticated you

00:14:44,350 --> 00:14:48,640
redirect to the login URL or either

00:14:46,240 --> 00:14:50,620
sorry the user is not authenticated you

00:14:48,640 --> 00:14:53,680
don't even have a user instance that has

00:14:50,620 --> 00:14:57,010
an assigned well you have anonymous user

00:14:53,680 --> 00:15:01,150
but that doesn't have a token or totp

00:14:57,010 --> 00:15:03,790
device so let's make sure the user

00:15:01,150 --> 00:15:08,650
actually looks in first if the user is

00:15:03,790 --> 00:15:11,680
logged in and is verified then let's

00:15:08,650 --> 00:15:15,450
just process of you if not redirect to

00:15:11,680 --> 00:15:17,740
the view where we provide you token and

00:15:15,450 --> 00:15:19,810
the pretty much the same code you have

00:15:17,740 --> 00:15:24,850
up here you have in the in the mixing

00:15:19,810 --> 00:15:27,490
here gotcha this is a general 110

00:15:24,850 --> 00:15:29,200
example you don't have necessarily have

00:15:27,490 --> 00:15:30,279
the function quality anymore this was

00:15:29,200 --> 00:15:32,560
something in one part

00:15:30,279 --> 00:15:37,050
one point n these are is authenticated

00:15:32,560 --> 00:15:37,050
and it's anonymous are now properties

00:15:38,610 --> 00:15:44,079
well and this is how you actually

00:15:41,110 --> 00:15:45,790
implement it or use these decorators you

00:15:44,079 --> 00:15:47,889
have a view that returns something or

00:15:45,790 --> 00:15:54,699
you have and either the function based

00:15:47,889 --> 00:15:58,480
view or class place view now this is a

00:15:54,699 --> 00:16:01,149
lot of boilerplate and while this works

00:15:58,480 --> 00:16:03,790
and you might be able to use the admin

00:16:01,149 --> 00:16:05,850
to create a key and then set it up

00:16:03,790 --> 00:16:08,230
generally this is probably not

00:16:05,850 --> 00:16:10,689
everything you want to have there are a

00:16:08,230 --> 00:16:13,240
couple of things you want to have to

00:16:10,689 --> 00:16:15,519
automate the process for users that want

00:16:13,240 --> 00:16:18,670
to use two-factor authentication you

00:16:15,519 --> 00:16:21,220
don't have a nice key set up and that

00:16:18,670 --> 00:16:23,439
includes a thing where you use your

00:16:21,220 --> 00:16:25,720
phone you scanner for example QR code to

00:16:23,439 --> 00:16:29,350
them have this in for example Google

00:16:25,720 --> 00:16:32,350
Authenticator you don't have back have

00:16:29,350 --> 00:16:34,180
backups codes which means that oh I lost

00:16:32,350 --> 00:16:37,480
my phone hmm I can't login because I

00:16:34,180 --> 00:16:42,399
don't have any way to authenticate me

00:16:37,480 --> 00:16:43,990
myself with a second token and you

00:16:42,399 --> 00:16:47,680
certainly don't have any Django admin

00:16:43,990 --> 00:16:49,870
integration yet and imagine to write

00:16:47,680 --> 00:16:51,819
this every single time you start a new

00:16:49,870 --> 00:16:52,899
project where you have requirements or

00:16:51,819 --> 00:16:54,309
you want to where you want to make sure

00:16:52,899 --> 00:16:56,350
that you integrate two-factor

00:16:54,309 --> 00:16:59,860
authentication this is something that's

00:16:56,350 --> 00:17:01,360
not going to be too Pleasant and well

00:16:59,860 --> 00:17:03,370
there have been people out there who

00:17:01,360 --> 00:17:07,120
started or who thought of that before

00:17:03,370 --> 00:17:09,069
and came up with projects one of them

00:17:07,120 --> 00:17:12,929
I've already mentioned is tango OTP

00:17:09,069 --> 00:17:16,179
which does all the cryptographic and

00:17:12,929 --> 00:17:19,329
fundamental underlying magic so to say

00:17:16,179 --> 00:17:21,159
so it does provide an egg totp device it

00:17:19,329 --> 00:17:23,649
provides you with an H OTP device it

00:17:21,159 --> 00:17:27,220
provides you with service for Yubikey

00:17:23,649 --> 00:17:30,429
and I think there's a twilio integration

00:17:27,220 --> 00:17:32,710
for SMS and there's plenty of other

00:17:30,429 --> 00:17:38,510
things that you can just use because

00:17:32,710 --> 00:17:42,590
it's there that's

00:17:38,510 --> 00:17:45,730
fine it has generated integration which

00:17:42,590 --> 00:17:49,100
is very basic from my perspective and

00:17:45,730 --> 00:17:51,260
from four projects where I would want to

00:17:49,100 --> 00:17:52,760
use totp or wood two-factor

00:17:51,260 --> 00:17:55,010
authentication in general I probably

00:17:52,760 --> 00:17:56,990
would not rely on this string weapon

00:17:55,010 --> 00:17:59,930
integration because it does not cover

00:17:56,990 --> 00:18:02,810
enough things I want to have in when I

00:17:59,930 --> 00:18:05,300
use the Django admin in product so

00:18:02,810 --> 00:18:06,500
there's another project which i started

00:18:05,300 --> 00:18:10,370
co maintaining a couple of weeks ago

00:18:06,500 --> 00:18:13,730
which is called Jango two factor auth it

00:18:10,370 --> 00:18:16,040
heavily reuses jangle OTP so it uses the

00:18:13,730 --> 00:18:19,940
underlying models and the underlying

00:18:16,040 --> 00:18:21,890
cryptography implementation it currently

00:18:19,940 --> 00:18:27,560
does have a more advanced Django admin

00:18:21,890 --> 00:18:31,640
integration as its it does a bit of more

00:18:27,560 --> 00:18:33,860
magic to make things work there's a key

00:18:31,640 --> 00:18:37,730
set up in Turkey setup process included

00:18:33,860 --> 00:18:41,150
including QR code view and all kinds of

00:18:37,730 --> 00:18:43,580
fancy things phone validation SMS

00:18:41,150 --> 00:18:46,640
validation all these things you don't

00:18:43,580 --> 00:18:49,700
want to do yourself it's there you can

00:18:46,640 --> 00:18:52,220
just use that the admin integration

00:18:49,700 --> 00:18:56,120
while being there is still a bit limited

00:18:52,220 --> 00:18:58,210
and I know that a lot of people actually

00:18:56,120 --> 00:19:00,370
use the jungle event out there for their

00:18:58,210 --> 00:19:05,330
production development or production

00:19:00,370 --> 00:19:08,510
sites which is I guess I think it's fine

00:19:05,330 --> 00:19:12,410
if you don't use abuse it for too many

00:19:08,510 --> 00:19:14,030
things so we do use it at work as well

00:19:12,410 --> 00:19:16,460
and I'm currently starting and

00:19:14,030 --> 00:19:19,220
introducing or trying to look into what

00:19:16,460 --> 00:19:22,220
we need to have to do to get two factor

00:19:19,220 --> 00:19:25,190
authentication in our projects and well

00:19:22,220 --> 00:19:28,850
I started writing on advanced ring or

00:19:25,190 --> 00:19:31,520
admin integration and well the lock in

00:19:28,850 --> 00:19:35,120
view well after you log into the admin

00:19:31,520 --> 00:19:38,060
you prepare presented with a well you

00:19:35,120 --> 00:19:40,160
need to factor to log into the admin so

00:19:38,060 --> 00:19:43,370
let's get started and do this and

00:19:40,160 --> 00:19:46,070
activate this and while you go through

00:19:43,370 --> 00:19:47,900
the process you get your QR code feel

00:19:46,070 --> 00:19:49,910
free to scan that if you want this is

00:19:47,900 --> 00:19:52,480
local development system this key is not

00:19:49,910 --> 00:19:52,480
nowhere else

00:19:52,590 --> 00:19:58,620
you enter the key and well voila they

00:19:56,320 --> 00:20:01,480
are you set up two factor authentication

00:19:58,620 --> 00:20:04,419
well now you as mentioned before you

00:20:01,480 --> 00:20:09,549
probably want to have backup codes great

00:20:04,419 --> 00:20:12,279
let's create them and voila un de Django

00:20:09,549 --> 00:20:13,840
admin and when you make sure make sure

00:20:12,279 --> 00:20:16,629
that you installed everything in the

00:20:13,840 --> 00:20:18,249
right order you even get a let's go to

00:20:16,629 --> 00:20:22,120
my django 20 my two-factor

00:20:18,249 --> 00:20:24,879
authentication settings what do you need

00:20:22,120 --> 00:20:26,799
to do to actually get this working first

00:20:24,879 --> 00:20:28,210
of all need to check out the development

00:20:26,799 --> 00:20:32,740
branch or pull request I'm currently

00:20:28,210 --> 00:20:35,379
writing it and then you add like bit of

00:20:32,740 --> 00:20:37,779
Django to pee and to factor to install

00:20:35,379 --> 00:20:40,090
apps you get have a middleware which

00:20:37,779 --> 00:20:41,769
does some caching on the is verified

00:20:40,090 --> 00:20:46,119
things to not create the database too

00:20:41,769 --> 00:20:48,759
often and you can optionally force to

00:20:46,119 --> 00:20:51,309
factor for the admin or you can set it

00:20:48,759 --> 00:20:52,990
in a way that if you have two factor

00:20:51,309 --> 00:20:55,450
authentication set up for your account

00:20:52,990 --> 00:20:59,710
you have to provide it if you don't well

00:20:55,450 --> 00:21:02,110
I let you in without I'm not sure if

00:20:59,710 --> 00:21:06,129
this is a good idea but it's what's

00:21:02,110 --> 00:21:08,139
there and you need to include one URL

00:21:06,129 --> 00:21:11,889
into your your ad patterns to make sure

00:21:08,139 --> 00:21:13,720
this Q I could stuff works and that's

00:21:11,889 --> 00:21:16,299
about it looking at boilerplate we had

00:21:13,720 --> 00:21:19,090
before looking at this this is much more

00:21:16,299 --> 00:21:24,090
what I prefer as somebody who just wants

00:21:19,090 --> 00:21:26,649
to use two-factor now let's get into I

00:21:24,090 --> 00:21:29,399
had a bit ahead of ourselves or live in

00:21:26,649 --> 00:21:35,919
the conference what you can do once you

00:21:29,399 --> 00:21:37,509
get back home or get back to work in my

00:21:35,919 --> 00:21:39,399
opinion when you deal with something

00:21:37,509 --> 00:21:41,200
with sensitive personal information in

00:21:39,399 --> 00:21:44,830
your projects you probably want to

00:21:41,200 --> 00:21:46,659
factor authentication and when you deal

00:21:44,830 --> 00:21:49,320
with other people's money you probably

00:21:46,659 --> 00:21:50,950
want to factor a certification as well

00:21:49,320 --> 00:21:53,679
when you deal with sensitive

00:21:50,950 --> 00:21:55,539
infrastructure so for example amazon and

00:21:53,679 --> 00:21:57,700
you are one of those people who is

00:21:55,539 --> 00:21:59,350
access to all the things you probably

00:21:57,700 --> 00:22:02,529
want to affect authentication for these

00:21:59,350 --> 00:22:04,419
accounts as well when you deal with

00:22:02,529 --> 00:22:05,090
anything that you think might be worth

00:22:04,419 --> 00:22:08,480
it

00:22:05,090 --> 00:22:10,070
sure why not enable to or implement

00:22:08,480 --> 00:22:12,560
two-factor authentication there's no

00:22:10,070 --> 00:22:16,190
harm in doing so when you deal with

00:22:12,560 --> 00:22:18,680
anything else why not still provide

00:22:16,190 --> 00:22:20,600
users the option to have two factor

00:22:18,680 --> 00:22:26,510
authentication if it's if they think

00:22:20,600 --> 00:22:29,150
it's worth their security and well how

00:22:26,510 --> 00:22:32,110
you get there is a bit of your choice if

00:22:29,150 --> 00:22:35,720
you feel like writing the stuff yourself

00:22:32,110 --> 00:22:38,030
there's a Python OTP or HTTP

00:22:35,720 --> 00:22:41,270
implementation out there which does the

00:22:38,030 --> 00:22:43,010
underlying crypto implementation pretty

00:22:41,270 --> 00:22:46,610
much this one function i showed earlier

00:22:43,010 --> 00:22:49,240
if you feel like okay I going to use

00:22:46,610 --> 00:22:52,180
something like that does all the things

00:22:49,240 --> 00:22:55,010
should i use once lose things like that

00:22:52,180 --> 00:22:59,710
it's literally who depends on what you

00:22:55,010 --> 00:23:03,830
prefer to use and I want to close with a

00:22:59,710 --> 00:23:07,970
article by Canaries from a day or two

00:23:03,830 --> 00:23:10,970
ago where he laid out how to factor

00:23:07,970 --> 00:23:13,760
authentication saved a couple saved him

00:23:10,970 --> 00:23:17,120
his github account from being hacked and

00:23:13,760 --> 00:23:20,620
it's a really good read and if you work

00:23:17,120 --> 00:23:23,570
on a if you have a good app account

00:23:20,620 --> 00:23:25,220
probably want to activate two-factor

00:23:23,570 --> 00:23:28,790
authentication if you work for a company

00:23:25,220 --> 00:23:30,830
that uses github if maybe even make the

00:23:28,790 --> 00:23:33,620
company to enforce two-factor

00:23:30,830 --> 00:23:35,600
authentication it's not going to harm

00:23:33,620 --> 00:23:38,630
you it's going to make sure that

00:23:35,600 --> 00:23:41,800
somebody who guesses or who correct your

00:23:38,630 --> 00:23:45,230
password because of whatever reason

00:23:41,800 --> 00:23:48,260
social engineering or whatnot manages to

00:23:45,230 --> 00:23:49,880
get into your account sure that sucks

00:23:48,260 --> 00:23:51,410
but when you have two factor

00:23:49,880 --> 00:23:53,300
authentication there's they still have

00:23:51,410 --> 00:23:56,540
to provide this one thing they don't

00:23:53,300 --> 00:24:01,210
have hopefully they don't go to your

00:23:56,540 --> 00:24:01,210
phone thanks

00:24:08,260 --> 00:24:11,480
thank you very much Marcus again if

00:24:10,220 --> 00:24:13,520
you've got any questions please come up

00:24:11,480 --> 00:24:16,010
and form a line I'm just getting started

00:24:13,520 --> 00:24:18,170
the this a lot of this stuff was based

00:24:16,010 --> 00:24:20,030
around having a Yubikey or a mock

00:24:18,170 --> 00:24:23,510
remember the other one you mentioned at

00:24:20,030 --> 00:24:25,490
Wrigley yeah yes so and SMS is obviously

00:24:23,510 --> 00:24:26,600
not being recommended at the moment yeah

00:24:25,490 --> 00:24:28,160
we were sort of in this interesting

00:24:26,600 --> 00:24:29,960
space where everyone has a phone but

00:24:28,160 --> 00:24:33,140
it's a bad option and very few people

00:24:29,960 --> 00:24:35,600
have a Yubikey so it's not the so it's

00:24:33,140 --> 00:24:37,820
not the sm it's not the phone being a

00:24:35,600 --> 00:24:40,190
better bad idea the out-of-band

00:24:37,820 --> 00:24:42,320
authentication out of penn communication

00:24:40,190 --> 00:24:44,060
with your phone and the server because

00:24:42,320 --> 00:24:48,500
the mobile phone network is generally

00:24:44,060 --> 00:24:50,780
insecure or well SMS is insecure so when

00:24:48,500 --> 00:24:57,800
I I can go back to the slides and I have

00:24:50,780 --> 00:24:59,870
the full quote quote here where is it so

00:24:57,800 --> 00:25:01,880
due to the risk that SMS messages may be

00:24:59,870 --> 00:25:03,410
intercepted or redirected implementers

00:25:01,880 --> 00:25:05,480
of new system system should carefully

00:25:03,410 --> 00:25:07,880
consider alternative authenticators if

00:25:05,480 --> 00:25:10,190
the out-of-band verification is to be

00:25:07,880 --> 00:25:12,500
made using an SMS message on a public

00:25:10,190 --> 00:25:14,750
mobile phone network the verifier shall

00:25:12,500 --> 00:25:16,910
verify that previous that telephone

00:25:14,750 --> 00:25:18,740
numbers being used is actually

00:25:16,910 --> 00:25:24,050
associated with the mobile phone network

00:25:18,740 --> 00:25:26,720
as in you can with faked and sims or

00:25:24,050 --> 00:25:30,770
that's beyond my level of experience but

00:25:26,720 --> 00:25:32,900
you can apparently like fake your mobile

00:25:30,770 --> 00:25:35,690
faker mobile phone device which then

00:25:32,900 --> 00:25:38,120
would get the ISM as earlier than the

00:25:35,690 --> 00:25:40,010
other one then you can nap sure is that

00:25:38,120 --> 00:25:41,480
what something that's likely to be safer

00:25:40,010 --> 00:25:43,660
if it was handles a push notification or

00:25:41,480 --> 00:25:48,860
a nap or something like that well I

00:25:43,660 --> 00:25:50,750
guess I'm not really but okay it was a

00:25:48,860 --> 00:25:52,010
question was that I really if you want

00:25:50,750 --> 00:25:53,990
if you're sitting if you think about

00:25:52,010 --> 00:25:55,340
implement or integrating two-factor

00:25:53,990 --> 00:25:56,960
authentication or you want to read more

00:25:55,340 --> 00:26:01,340
about general authentication principles

00:25:56,960 --> 00:26:03,050
read this dem draft this is I came to it

00:26:01,340 --> 00:26:05,210
in what's good and then I finally I

00:26:03,050 --> 00:26:08,300
eventually read it entirely in those wow

00:26:05,210 --> 00:26:10,220
this is great generally terms of what

00:26:08,300 --> 00:26:14,480
and how to do authentication or how to

00:26:10,220 --> 00:26:18,160
not do it there are any other questions

00:26:14,480 --> 00:26:18,160

YouTube URL: https://www.youtube.com/watch?v=7Z8cDOCH5fM


