Title: "How to lose a container in 10 minutes" - Sarah Young (PyCon AU 2019)
Publication date: 2019-08-03
Playlist: PyCon Australia 2019
Description: 
	Sarah Young

Moving to the cloud and deploying containers? In this talk I discuss both the mindset shift and tech challenges, with some common mistakes made in real-life deployments with some real life. We'll also be looking at my ongoing research about how easy it is to get a container or k8s cluster pwned.

https://2019.pycon-au.org/talks/how-to-lose-a-container-in-10-minutes

PyCon AU, the national Python Language conference, is on again this August in Sydney, at the International Convention Centre, Sydney, August 2 - 6 2019.

Video licence: CC BY-NC-SA 4.0 - https://creativecommons.org/licenses/by-nc-sa/4.0/

Python, PyCon, PyConAU

Fri Aug  2 14:50:00 2019 at C3.6
Captions: 
	00:00:00,380 --> 00:00:05,759
and welcome back we're gonna start a

00:00:02,970 --> 00:00:07,890
little bit early on this talk just so we

00:00:05,759 --> 00:00:09,420
can try and fit in a few questions so

00:00:07,890 --> 00:00:10,769
this is Sarah young and she's going to

00:00:09,420 --> 00:00:14,969
be telling you how to lose your

00:00:10,769 --> 00:00:20,270
container in ten minutes minutes minutes

00:00:14,969 --> 00:00:24,119
sorry I not hip with the references okay

00:00:20,270 --> 00:00:25,800
cool I've turned on my turned on my mic

00:00:24,119 --> 00:00:28,460
pack thing so that's a good start

00:00:25,800 --> 00:00:34,020
so hello everyone thank you for coming

00:00:28,460 --> 00:00:35,790
yep as I said my name is so young as you

00:00:34,020 --> 00:00:37,860
can see I'm a queen of photoshopping or

00:00:35,790 --> 00:00:40,860
as someone asked me just then it's not

00:00:37,860 --> 00:00:43,320
actually Photoshop it's paint right yeah

00:00:40,860 --> 00:00:45,870
I know it's great isn't it yeah

00:00:43,320 --> 00:00:47,399
if you haven't by the way no prior

00:00:45,870 --> 00:00:48,719
knowledge of this movie is required for

00:00:47,399 --> 00:00:51,149
this talk it's just me trying to be

00:00:48,719 --> 00:00:53,910
clever and not really that clever but

00:00:51,149 --> 00:00:57,329
hey and yeah if you don't know the

00:00:53,910 --> 00:00:59,579
premise of the movie just just in case

00:00:57,329 --> 00:01:03,930
you want to basically Kate Hudson I

00:00:59,579 --> 00:01:05,580
forget her name in the movie she decides

00:01:03,930 --> 00:01:06,570
she's a journalist and she decides that

00:01:05,580 --> 00:01:08,970
she's going to try and make all the

00:01:06,570 --> 00:01:10,619
coming dating mistakes and women make to

00:01:08,970 --> 00:01:14,520
see if she can get rid of a guy in ten

00:01:10,619 --> 00:01:16,590
days so I thought that for my talk and

00:01:14,520 --> 00:01:18,330
for my experiment I would see how

00:01:16,590 --> 00:01:20,549
quickly I could lose container and do

00:01:18,330 --> 00:01:22,380
all the mistakes that people make when

00:01:20,549 --> 00:01:24,540
security-based mistakes that people make

00:01:22,380 --> 00:01:25,860
when configuring containers so yeah

00:01:24,540 --> 00:01:28,259
that's what I'm going to talk about so

00:01:25,860 --> 00:01:29,729
and Who am I I work for this small

00:01:28,259 --> 00:01:31,650
company you might have heard of them I

00:01:29,729 --> 00:01:33,630
don't know they're a small start-up

00:01:31,650 --> 00:01:35,490
if you like stickers I've got loads at

00:01:33,630 --> 00:01:36,630
the end so come see me unless you're a

00:01:35,490 --> 00:01:40,950
Microsoft hater

00:01:36,630 --> 00:01:42,600
then don't know or unless you want to

00:01:40,950 --> 00:01:44,579
wind people up so I get that a lot you

00:01:42,600 --> 00:01:47,060
know hey every colleague hates Microsoft

00:01:44,579 --> 00:01:50,250
can have a sticker it's okay with me

00:01:47,060 --> 00:01:53,009
yeah I my name is Sarah young I actually

00:01:50,250 --> 00:01:54,840
live in Melbourne I am originally from

00:01:53,009 --> 00:01:58,320
the UK I've worked in Europe and New

00:01:54,840 --> 00:01:59,490
Zealand and all over the place I don't

00:01:58,320 --> 00:02:01,619
spend a lot of time in Melbourne I

00:01:59,490 --> 00:02:03,960
travel a lot I worked in tech for last

00:02:01,619 --> 00:02:07,979
ten years or so and I overused memes and

00:02:03,960 --> 00:02:10,379
gifts or gifs in my presentations we

00:02:07,979 --> 00:02:12,090
won't go there but whether or not you

00:02:10,379 --> 00:02:12,770
think it's filler or you think it's

00:02:12,090 --> 00:02:14,450
meaningful

00:02:12,770 --> 00:02:16,510
let you decide usually people seem to

00:02:14,450 --> 00:02:20,120
think they're okay but we'll go with it

00:02:16,510 --> 00:02:21,800
just this slide is out of date so this

00:02:20,120 --> 00:02:23,480
is actually my job title it is Azure

00:02:21,800 --> 00:02:25,970
cloud security and compliance global

00:02:23,480 --> 00:02:27,560
black belt in fact so yeah you know I

00:02:25,970 --> 00:02:29,500
don't know like I literally tell people

00:02:27,560 --> 00:02:32,660
I fight hackers cuz it's funny I don't

00:02:29,500 --> 00:02:34,550
I'm full on blue team er and and in fact

00:02:32,660 --> 00:02:38,660
my job title changed at the beginning of

00:02:34,550 --> 00:02:41,360
the month I'm now hang on advanced

00:02:38,660 --> 00:02:43,220
security architecture global black belt

00:02:41,360 --> 00:02:47,090
basically my job hasn't changed just my

00:02:43,220 --> 00:02:47,720
job title so I don't know yeah last word

00:02:47,090 --> 00:02:49,850
of caution

00:02:47,720 --> 00:02:52,700
please don't Google me or Google me with

00:02:49,850 --> 00:02:54,710
caution I should say because Sarah Sarah

00:02:52,700 --> 00:02:56,990
Young is a fairly common name you'll get

00:02:54,710 --> 00:02:58,760
sarah Young the Christian author not so

00:02:56,990 --> 00:03:01,550
bad actually found one of her books when

00:02:58,760 --> 00:03:03,710
I was in Hawaii last year but there's

00:03:01,550 --> 00:03:04,790
also seryeong the late 80s porn star I'm

00:03:03,710 --> 00:03:06,860
not joking

00:03:04,790 --> 00:03:09,320
so like really do Google that with

00:03:06,860 --> 00:03:12,080
caution especially if you're using work

00:03:09,320 --> 00:03:13,100
machine so I kind of said what I was

00:03:12,080 --> 00:03:14,960
going to talk about today we're gonna

00:03:13,100 --> 00:03:16,340
talk about container security and a bit

00:03:14,960 --> 00:03:18,050
of orchestrators security as well

00:03:16,340 --> 00:03:19,400
largely I'm going to talk about when I

00:03:18,050 --> 00:03:21,140
talk about orchestrators I'm going to

00:03:19,400 --> 00:03:23,240
talk about kubernetes because I like

00:03:21,140 --> 00:03:23,840
cuban eddies and in my opinion it will

00:03:23,240 --> 00:03:26,540
become

00:03:23,840 --> 00:03:33,080
soon enough the de facto orchestration

00:03:26,540 --> 00:03:34,580
tool so that was it so we're going to

00:03:33,080 --> 00:03:36,500
talk about good security practices for

00:03:34,580 --> 00:03:40,820
containers in cuba Nettie's and some of

00:03:36,500 --> 00:03:43,850
the related tools oh there's my screen

00:03:40,820 --> 00:03:45,440
gun that's okay I can keep talking it's

00:03:43,850 --> 00:03:50,959
all good is it coming back

00:03:45,440 --> 00:03:55,240
is it coming back oh it's acting

00:03:50,959 --> 00:03:55,240
appropriate right like this

00:03:58,320 --> 00:04:06,360
let's try that again ah cool sweet

00:04:03,630 --> 00:04:10,410
additional challenge achievement a

00:04:06,360 --> 00:04:11,880
lottery fix laptop during talk so I'm

00:04:10,410 --> 00:04:13,050
going to talk about to start with all

00:04:11,880 --> 00:04:14,850
the good things you should do with

00:04:13,050 --> 00:04:17,070
containers from orchestrators from a

00:04:14,850 --> 00:04:18,360
security perspective and then we'll talk

00:04:17,070 --> 00:04:20,220
about my little experiment where I

00:04:18,360 --> 00:04:21,570
genuinely thought before I wrote this

00:04:20,220 --> 00:04:23,550
talk that I could actually get

00:04:21,570 --> 00:04:25,620
containers owned within like 10 minutes

00:04:23,550 --> 00:04:28,500
I thought that is really easy turns out

00:04:25,620 --> 00:04:29,610
it's not now my other idea was that I

00:04:28,500 --> 00:04:31,890
would actually spin off a container

00:04:29,610 --> 00:04:34,350
before a talk and then give everyone the

00:04:31,890 --> 00:04:36,030
details and then they could bash it but

00:04:34,350 --> 00:04:37,860
and and by the end of the talk it would

00:04:36,030 --> 00:04:40,440
definitely be owned but I also felt that

00:04:37,860 --> 00:04:41,760
was kind of unfair and defeated the

00:04:40,440 --> 00:04:42,300
object to the experiments so we're not

00:04:41,760 --> 00:04:43,740
doing that

00:04:42,300 --> 00:04:45,150
but I've broken this down into a couple

00:04:43,740 --> 00:04:47,310
of sections we're going to talk about

00:04:45,150 --> 00:04:48,270
protecting your data caring for your OS

00:04:47,310 --> 00:04:50,550
and your Orchestrator

00:04:48,270 --> 00:04:52,050
checking privilege shifting left with

00:04:50,550 --> 00:04:54,510
containers and then at the end I'll talk

00:04:52,050 --> 00:04:56,610
about getting my containers owned and so

00:04:54,510 --> 00:04:59,190
this pretty much sums up container and

00:04:56,610 --> 00:05:01,800
Cuban Eddie's security for me so it's

00:04:59,190 --> 00:05:03,720
not just emojis well it is emojis but

00:05:01,800 --> 00:05:07,380
and it's not monkeys it is see no evil

00:05:03,720 --> 00:05:09,630
hear no evil speak no evil so what I see

00:05:07,380 --> 00:05:11,790
a lot with container and orchestrated

00:05:09,630 --> 00:05:13,680
security is people are like hey this is

00:05:11,790 --> 00:05:17,130
just security we will just do it the

00:05:13,680 --> 00:05:18,810
same way we we do our own we do

00:05:17,130 --> 00:05:21,990
application security at the moment and

00:05:18,810 --> 00:05:24,600
our traditional monolithic stack no no

00:05:21,990 --> 00:05:25,680
very bad but people think hey we've got

00:05:24,600 --> 00:05:27,720
a tool that's been working for the last

00:05:25,680 --> 00:05:29,370
10 years to monitor applications well

00:05:27,720 --> 00:05:33,120
just keep using it what could go wrong

00:05:29,370 --> 00:05:34,470
many things actually many things so

00:05:33,120 --> 00:05:36,300
let's talk about good data protection

00:05:34,470 --> 00:05:37,500
practices now this is something you're

00:05:36,300 --> 00:05:39,810
gonna have heard from every single

00:05:37,500 --> 00:05:41,340
security person in the planet ever so I

00:05:39,810 --> 00:05:42,960
apologize that I should be telling you

00:05:41,340 --> 00:05:45,090
stuff you've heard before and should be

00:05:42,960 --> 00:05:47,850
common sense but you'd be surprised how

00:05:45,090 --> 00:05:49,410
many times people don't do it but this

00:05:47,850 --> 00:05:53,130
is something that's really really

00:05:49,410 --> 00:05:54,690
important which is a hygiene so in the

00:05:53,130 --> 00:05:56,550
words of Mary Poppins and I think it

00:05:54,690 --> 00:05:59,610
comes from something else but well begun

00:05:56,550 --> 00:06:01,590
is half done like you need to do your

00:05:59,610 --> 00:06:02,449
application right to start with you need

00:06:01,590 --> 00:06:05,029
to make it

00:06:02,449 --> 00:06:06,949
of high quality and good security things

00:06:05,029 --> 00:06:08,719
because what we find is usually when

00:06:06,949 --> 00:06:10,039
you're doing containers and you're

00:06:08,719 --> 00:06:12,680
deciding to Walker straight things

00:06:10,039 --> 00:06:14,449
you're often moving to the cloud at the

00:06:12,680 --> 00:06:18,710
same time now I don't care which cloud

00:06:14,449 --> 00:06:20,029
you move to Microsoft but and like like

00:06:18,710 --> 00:06:21,409
I don't care which cloud you move to

00:06:20,029 --> 00:06:24,860
those principles remain the same

00:06:21,409 --> 00:06:26,120
genuinely they do but so I'm what I will

00:06:24,860 --> 00:06:27,589
end up talking quite a bit about cloud

00:06:26,120 --> 00:06:28,789
as well because generally these things

00:06:27,589 --> 00:06:31,580
go hand in hand

00:06:28,789 --> 00:06:33,710
now I know that it is possible to run

00:06:31,580 --> 00:06:35,539
containers in an on-prem environment but

00:06:33,710 --> 00:06:38,060
I think this usually goes with the shift

00:06:35,539 --> 00:06:38,900
to the cloud at the moment so if you're

00:06:38,060 --> 00:06:42,469
making the move to the cloud

00:06:38,900 --> 00:06:47,120
please tidy up your application if it's

00:06:42,469 --> 00:06:49,759
using like telnet if it's using SS SSL

00:06:47,120 --> 00:06:52,219
please fix that stuff before you move it

00:06:49,759 --> 00:06:55,669
up because if you have crap on Prem I

00:06:52,219 --> 00:06:58,069
don't know then you move it into the

00:06:55,669 --> 00:07:00,349
cloud it's just as bad there it's it's

00:06:58,069 --> 00:07:02,120
not actually improving that those layers

00:07:00,349 --> 00:07:03,800
of your stack and so it's really

00:07:02,120 --> 00:07:05,059
important to do this and I know that

00:07:03,800 --> 00:07:08,029
often when you're doing migration

00:07:05,059 --> 00:07:09,289
projects people will say ah but we don't

00:07:08,029 --> 00:07:11,870
have the bandwidth to do that is not

00:07:09,289 --> 00:07:13,699
part of our budget bla bla bla bla it's

00:07:11,870 --> 00:07:15,349
not in scope but someone's got to do it

00:07:13,699 --> 00:07:16,580
at some point and if you're actually

00:07:15,349 --> 00:07:18,589
making this massive shift to

00:07:16,580 --> 00:07:21,709
containerize things make put things at

00:07:18,589 --> 00:07:23,300
microservices and move into the cloud

00:07:21,709 --> 00:07:26,899
this is a really good time to do it so

00:07:23,300 --> 00:07:27,709
please do moving on from that we're

00:07:26,899 --> 00:07:29,449
going to talk about the shared

00:07:27,709 --> 00:07:32,479
responsibility model because this really

00:07:29,449 --> 00:07:33,889
goes into the moving to the cloud anyone

00:07:32,479 --> 00:07:37,569
heard of shared responsibility model

00:07:33,889 --> 00:07:39,529
from any cloud provider oh good good

00:07:37,569 --> 00:07:46,249
everyone reckon they understand it

00:07:39,529 --> 00:07:48,949
properly cool that's what most people

00:07:46,249 --> 00:07:50,330
say no shame in that and so when we move

00:07:48,949 --> 00:07:52,240
to the cloud something that's really

00:07:50,330 --> 00:07:53,689
important from a security perspective is

00:07:52,240 --> 00:07:56,300
understanding the shared responsibility

00:07:53,689 --> 00:07:57,740
model what that is is understanding

00:07:56,300 --> 00:07:59,959
which security controls your cloud

00:07:57,740 --> 00:08:03,080
provider provides and which security

00:07:59,959 --> 00:08:04,610
controls you need to do and depending on

00:08:03,080 --> 00:08:08,300
precisely what you're doing in the cloud

00:08:04,610 --> 00:08:10,279
actually changes what security controls

00:08:08,300 --> 00:08:11,959
are done by whom so this is a cool

00:08:10,279 --> 00:08:13,969
analogy that one of my colleagues did I

00:08:11,959 --> 00:08:14,680
have to give credit to him because I'm

00:08:13,969 --> 00:08:16,539
not smart

00:08:14,680 --> 00:08:17,710
to think of that stuff but if we take a

00:08:16,539 --> 00:08:19,389
software-as-a-service that's like a

00:08:17,710 --> 00:08:22,240
hotel room everything's done for you

00:08:19,389 --> 00:08:23,289
gets clean once a day etc etc and all

00:08:22,240 --> 00:08:25,720
you do is bring in your clothes and

00:08:23,289 --> 00:08:27,220
sleep there platform-as-a-service is

00:08:25,720 --> 00:08:29,620
more like a furnished apartment so

00:08:27,220 --> 00:08:31,300
you're getting your you're getting your

00:08:29,620 --> 00:08:33,039
furniture your you're getting the

00:08:31,300 --> 00:08:34,779
apartment and it might get cleaned once

00:08:33,039 --> 00:08:36,510
a week but you need to bring in the food

00:08:34,779 --> 00:08:38,409
etc and do all of those things

00:08:36,510 --> 00:08:39,760
infrastructure as a service is more like

00:08:38,409 --> 00:08:41,560
a rental apartment so you're just

00:08:39,760 --> 00:08:43,120
getting the bare apartment you need to

00:08:41,560 --> 00:08:46,060
furnish it you need to pay the bills etc

00:08:43,120 --> 00:08:48,160
a private clouds like a house as in you

00:08:46,060 --> 00:08:50,380
do everything everything is your problem

00:08:48,160 --> 00:08:53,830
I like that analogy there are other ones

00:08:50,380 --> 00:08:55,120
out there there's like a pizza one but I

00:08:53,830 --> 00:08:56,880
can't remember that one off the top of

00:08:55,120 --> 00:08:59,470
my head but this is important because

00:08:56,880 --> 00:09:02,290
we're moving away from this traditional

00:08:59,470 --> 00:09:04,600
security model it's a castle I know

00:09:02,290 --> 00:09:06,010
everyone uses a castle do do is do

00:09:04,600 --> 00:09:07,870
people know what I mean when we say

00:09:06,010 --> 00:09:09,910
traditional security model and then we

00:09:07,870 --> 00:09:11,649
have a big perimeter with lots of

00:09:09,910 --> 00:09:13,810
firewalls and it's all in our data

00:09:11,649 --> 00:09:15,730
center that's a traditional security

00:09:13,810 --> 00:09:17,920
model but now I'm moving when we do

00:09:15,730 --> 00:09:20,709
cloud and we containerize things into

00:09:17,920 --> 00:09:21,790
zero trust zero trust was it was

00:09:20,709 --> 00:09:23,380
something that was put out by some

00:09:21,790 --> 00:09:25,150
Forrester analyst a while ago and it

00:09:23,380 --> 00:09:28,029
means verify the person verify the

00:09:25,150 --> 00:09:29,709
device and verify your your access

00:09:28,029 --> 00:09:31,570
scenarios so it doesn't mean that we

00:09:29,709 --> 00:09:33,100
just use firewalls and this big big

00:09:31,570 --> 00:09:36,430
program as a wall to protect everything

00:09:33,100 --> 00:09:38,620
because now we have BYOD we have IOT we

00:09:36,430 --> 00:09:40,630
have all of those different things that

00:09:38,620 --> 00:09:42,100
mean we're not containing our assets

00:09:40,630 --> 00:09:44,709
within the data center anymore

00:09:42,100 --> 00:09:46,630
I wanted to find like a quote on

00:09:44,709 --> 00:09:49,120
isolation and this is the only thing I

00:09:46,630 --> 00:09:51,430
could find obviously clearly Jimmy Page

00:09:49,120 --> 00:09:54,070
was talking about cloud security when he

00:09:51,430 --> 00:09:55,420
made this quote but when we move into

00:09:54,070 --> 00:09:57,190
the cloud it's important that everything

00:09:55,420 --> 00:09:59,529
just doesn't trust everything else and

00:09:57,190 --> 00:10:01,360
that's zero trust so inherently this

00:09:59,529 --> 00:10:03,579
machine cannot talk to this machine you

00:10:01,360 --> 00:10:05,380
have to explicitly allow everything so

00:10:03,579 --> 00:10:07,450
it means that if someone breached your

00:10:05,380 --> 00:10:09,100
external perimeter which is still there

00:10:07,450 --> 00:10:10,360
it's still going to make it really

00:10:09,100 --> 00:10:12,610
difficult for them to move between

00:10:10,360 --> 00:10:15,399
things really important that you

00:10:12,610 --> 00:10:17,350
understand this it's even for a cloud

00:10:15,399 --> 00:10:19,000
infrastructure perspective but also from

00:10:17,350 --> 00:10:20,560
an application perspective because it

00:10:19,000 --> 00:10:21,880
also applies some when we containerize

00:10:20,560 --> 00:10:25,140
things and when we break things up into

00:10:21,880 --> 00:10:25,140
micro services

00:10:25,300 --> 00:10:29,740
so caring for your OS and Orchestrator

00:10:28,030 --> 00:10:30,400
now as I said I'm gonna talk a lot about

00:10:29,740 --> 00:10:32,470
kubernetes

00:10:30,400 --> 00:10:34,300
but you can replace the word kubernetes

00:10:32,470 --> 00:10:36,670
with pretty much any other Orchestrator

00:10:34,300 --> 00:10:39,280
as well first and foremost and if

00:10:36,670 --> 00:10:41,770
there's one thing one thing that you

00:10:39,280 --> 00:10:42,970
should care about when you're doing a

00:10:41,770 --> 00:10:44,890
container if there's one security

00:10:42,970 --> 00:10:47,500
control you can do can you please make

00:10:44,890 --> 00:10:50,170
sure it is make sure you know where your

00:10:47,500 --> 00:10:51,700
container images come from we know you

00:10:50,170 --> 00:10:53,020
can get container images all over the

00:10:51,700 --> 00:10:55,480
place you can get them github you can

00:10:53,020 --> 00:10:57,460
get them from the docker hub etc but

00:10:55,480 --> 00:10:59,200
make sure you know where they come from

00:10:57,460 --> 00:11:01,720
and you've checked them from rubbish

00:10:59,200 --> 00:11:03,130
because there was a there's some

00:11:01,720 --> 00:11:04,930
compromised images on the docker hub

00:11:03,130 --> 00:11:07,120
website and they got downloaded

00:11:04,930 --> 00:11:08,830
something like 350,000 times before they

00:11:07,120 --> 00:11:10,690
got removed and they had Bitcoin miner

00:11:08,830 --> 00:11:11,860
in them I think might have been Bitcoin

00:11:10,690 --> 00:11:14,560
money there was some kind of malware

00:11:11,860 --> 00:11:16,630
anyway and and if you you know if you're

00:11:14,560 --> 00:11:18,280
using a container image that's got some

00:11:16,630 --> 00:11:20,140
kind of malware or something nasty in it

00:11:18,280 --> 00:11:22,420
like it's game over before you've even

00:11:20,140 --> 00:11:23,920
looked at any other security controls so

00:11:22,420 --> 00:11:26,830
it's important that you pull the base

00:11:23,920 --> 00:11:28,840
image sanitize it make sure it's it's

00:11:26,830 --> 00:11:30,700
got all your security tooling in it that

00:11:28,840 --> 00:11:32,260
it's not got any rubbish in it and then

00:11:30,700 --> 00:11:34,480
store it in a private image repository

00:11:32,260 --> 00:11:36,030
so there's clear there's no tree all the

00:11:34,480 --> 00:11:38,170
big cloud platforms have their own

00:11:36,030 --> 00:11:39,490
container image repository as well that

00:11:38,170 --> 00:11:41,890
you can use all of those things are

00:11:39,490 --> 00:11:45,670
important because you don't want a nasty

00:11:41,890 --> 00:11:47,800
surprises right so yeah so once a lady

00:11:45,670 --> 00:11:50,650
told me when I gave this talk that she

00:11:47,800 --> 00:11:52,750
found this gif upsetting so I'm not sure

00:11:50,650 --> 00:11:55,450
why I thought it was funny but if anyone

00:11:52,750 --> 00:11:56,680
does find it upsetting I apologize you

00:11:55,450 --> 00:12:00,670
can see I haven't actually changed the

00:11:56,680 --> 00:12:03,700
picture since then so the fault in

00:12:00,670 --> 00:12:05,140
default so I'm gonna pick on Cuban

00:12:03,700 --> 00:12:06,970
Eddie's here but I can totally pick on

00:12:05,140 --> 00:12:08,590
Rancher as well if I felt like it so

00:12:06,970 --> 00:12:10,330
community default conflicts aren't too

00:12:08,590 --> 00:12:13,030
secure it is getting better I think

00:12:10,330 --> 00:12:14,890
we're on version 1.15 now but some of

00:12:13,030 --> 00:12:17,080
the earlier versions which you may well

00:12:14,890 --> 00:12:18,790
be using had some terrible defaults like

00:12:17,080 --> 00:12:20,620
so some notable interesting ones were

00:12:18,790 --> 00:12:22,210
that the API server used to listen on

00:12:20,620 --> 00:12:23,890
port 8080 and there was literally no

00:12:22,210 --> 00:12:27,340
authorization it could just chat to

00:12:23,890 --> 00:12:32,050
anything and the seek secrets punishment

00:12:27,340 --> 00:12:33,400
was done in a CD interesting the center

00:12:32,050 --> 00:12:34,810
for internet security which if you

00:12:33,400 --> 00:12:37,480
haven't heard of it is a nonprofit

00:12:34,810 --> 00:12:38,410
organization that releases a lot of

00:12:37,480 --> 00:12:40,720
different benchmark

00:12:38,410 --> 00:12:43,600
not just for kubernetes for different

00:12:40,720 --> 00:12:45,430
os's and other products it gives you a

00:12:43,600 --> 00:12:47,230
benchmark of how you can configure

00:12:45,430 --> 00:12:48,820
things securely so if it's something

00:12:47,230 --> 00:12:50,160
that's new to your organization you

00:12:48,820 --> 00:12:52,540
should use those because they are free

00:12:50,160 --> 00:12:54,550
the first time I ever did this talk was

00:12:52,540 --> 00:12:56,290
in Seattle and I like frasier so I put

00:12:54,550 --> 00:12:57,960
Frazer in there okay sometimes I feel I

00:12:56,290 --> 00:13:00,160
need to explain some of these because

00:12:57,960 --> 00:13:02,050
people probably don't think the same way

00:13:00,160 --> 00:13:04,470
I do which you can only be grateful for

00:13:02,050 --> 00:13:04,470
I promise

00:13:04,480 --> 00:13:08,470
yeah if you result of fun you may not

00:13:06,070 --> 00:13:10,000
understand that one right don't bake

00:13:08,470 --> 00:13:12,010
your creds and secrets into containers

00:13:10,000 --> 00:13:14,020
this is the modern equivalent of having

00:13:12,010 --> 00:13:15,640
a config file on your desktop or

00:13:14,020 --> 00:13:18,160
whatever they should be passed into

00:13:15,640 --> 00:13:19,660
containers as environment variables as I

00:13:18,160 --> 00:13:22,060
said before cuba Nettie's some of the

00:13:19,660 --> 00:13:26,350
older versions anyway store secrets by

00:13:22,060 --> 00:13:29,230
default a net CD encoded in base64 yeah

00:13:26,350 --> 00:13:31,150
I know like it's just I know this is

00:13:29,230 --> 00:13:33,610
really old now but this was the favorite

00:13:31,150 --> 00:13:35,860
this was the this was my favorite

00:13:33,610 --> 00:13:38,770
version of this meme I ever saw and I

00:13:35,860 --> 00:13:40,600
will use it in this talk until I die and

00:13:38,770 --> 00:13:42,040
so all the major cloud providers have

00:13:40,600 --> 00:13:44,650
secrets management platforms that you

00:13:42,040 --> 00:13:46,200
can use I would if you're using one of

00:13:44,650 --> 00:13:50,290
the big cloud providers and they have a

00:13:46,200 --> 00:13:52,540
native secrets key management solution

00:13:50,290 --> 00:13:53,620
just use that for ease of use I know

00:13:52,540 --> 00:13:55,420
that there are some particular

00:13:53,620 --> 00:13:57,700
circumstances where that won't be a

00:13:55,420 --> 00:13:59,620
where that won't work if that's the case

00:13:57,700 --> 00:14:01,330
then sure go look at a third-party one

00:13:59,620 --> 00:14:03,610
and something that we don't talk about

00:14:01,330 --> 00:14:06,640
enough is rotating your keys regularly

00:14:03,610 --> 00:14:08,380
okay okey you should be rotated in the

00:14:06,640 --> 00:14:10,810
cloud now how regularly you want to

00:14:08,380 --> 00:14:12,880
rotate them will depend on your wrist

00:14:10,810 --> 00:14:14,380
posture and all that kind of stuff I'd

00:14:12,880 --> 00:14:16,330
leave that to some risk people to work

00:14:14,380 --> 00:14:17,860
out how regularly they want to do it but

00:14:16,330 --> 00:14:19,390
please please please make sure that you

00:14:17,860 --> 00:14:21,550
build in the capability to do that

00:14:19,390 --> 00:14:22,990
because even if you decide not to rotate

00:14:21,550 --> 00:14:25,240
them regularly which I don't recommend

00:14:22,990 --> 00:14:27,190
if you have an emergency situation where

00:14:25,240 --> 00:14:28,540
your keys get leaked you want to already

00:14:27,190 --> 00:14:31,360
have a system to try and do that

00:14:28,540 --> 00:14:32,830
automatically and quickly I'm going to

00:14:31,360 --> 00:14:35,590
move on to more horror stories I have

00:14:32,830 --> 00:14:37,420
three I have to be very vague they they

00:14:35,590 --> 00:14:40,060
come from a previous employer and I

00:14:37,420 --> 00:14:42,040
can't reveal precisely what organization

00:14:40,060 --> 00:14:43,900
it was but I said but these are all real

00:14:42,040 --> 00:14:45,370
things I have seen in real life there's

00:14:43,900 --> 00:14:47,200
a dev who wanted a slightly different

00:14:45,370 --> 00:14:48,370
container image so they just decided

00:14:47,200 --> 00:14:50,450
they pull it from a public repository

00:14:48,370 --> 00:14:58,160
any and

00:14:50,450 --> 00:15:00,520
guest is what happened next yes yet did

00:14:58,160 --> 00:15:04,360
like the horror story thing is just

00:15:00,520 --> 00:15:08,900
that's that that was just yeah

00:15:04,360 --> 00:15:10,340
Bitcoin miner obviously there's a lot of

00:15:08,900 --> 00:15:12,260
Bitcoin miner out there we know it's

00:15:10,340 --> 00:15:13,730
like a it's a nice easy one to do but I

00:15:12,260 --> 00:15:15,920
mean luckily it was picked up in about

00:15:13,730 --> 00:15:18,320
twelve hours so they didn't find out via

00:15:15,920 --> 00:15:19,820
a bill which is probably the worst way

00:15:18,320 --> 00:15:23,360
to find out you've got Bitcoin miner in

00:15:19,820 --> 00:15:24,830
your environment but yeah so checking

00:15:23,360 --> 00:15:26,360
your privilege again something you'll

00:15:24,830 --> 00:15:30,410
have heard I know I think I'm clever

00:15:26,360 --> 00:15:32,210
mice for containers he'll have heard

00:15:30,410 --> 00:15:34,520
this many times I'm sure don't run as we

00:15:32,210 --> 00:15:36,830
don't run as brew please don't run as

00:15:34,520 --> 00:15:39,950
root I couldn't think of anything for

00:15:36,830 --> 00:15:43,220
root so I was like grouped I know I know

00:15:39,950 --> 00:15:45,020
I know bad jokes but if you there are I

00:15:43,220 --> 00:15:46,370
know there are some still some specific

00:15:45,020 --> 00:15:48,560
circumstances where you need to run as

00:15:46,370 --> 00:15:51,110
root but in general now you do not need

00:15:48,560 --> 00:15:53,210
to run containers as root please do not

00:15:51,110 --> 00:15:54,770
do it I know that sometimes it makes the

00:15:53,210 --> 00:15:58,250
development a little bit harder but

00:15:54,770 --> 00:16:00,320
really there's about five circumstances

00:15:58,250 --> 00:16:01,880
in which it is necessary and if it is

00:16:00,320 --> 00:16:04,130
not one of those you should not be doing

00:16:01,880 --> 00:16:06,110
it also you should be looking if you are

00:16:04,130 --> 00:16:07,430
running as root using run time security

00:16:06,110 --> 00:16:09,410
tools now there's a ton of them out

00:16:07,430 --> 00:16:12,470
there so some honorable mentions go to

00:16:09,410 --> 00:16:15,320
aqua enforcer there's selinux Palmer and

00:16:12,470 --> 00:16:16,640
SATCOM I'm not sort of telling you which

00:16:15,320 --> 00:16:19,000
one you should use just go and have a

00:16:16,640 --> 00:16:21,170
look at them and see which one works

00:16:19,000 --> 00:16:24,500
ideally you should be using run time

00:16:21,170 --> 00:16:26,030
security tools also on your non running

00:16:24,500 --> 00:16:29,240
as root containers the ones that aren't

00:16:26,030 --> 00:16:31,040
running is privilege but you know if you

00:16:29,240 --> 00:16:32,690
if you can only do it in a limited

00:16:31,040 --> 00:16:34,100
fashion then please at least start with

00:16:32,690 --> 00:16:34,670
your ones where your containers are

00:16:34,100 --> 00:16:36,860
running as root

00:16:34,670 --> 00:16:38,840
it really does mitigate your risk of

00:16:36,860 --> 00:16:42,530
lower that blast radius if someone did

00:16:38,840 --> 00:16:44,480
compromise a container then talking

00:16:42,530 --> 00:16:47,300
about wookie Streeters um I had

00:16:44,480 --> 00:16:51,020
absolutely nothing to put on this side

00:16:47,300 --> 00:16:53,650
so I went with Clippy I've stickers of

00:16:51,020 --> 00:16:58,700
him if anyone wants one at the end I

00:16:53,650 --> 00:16:59,750
know totally hurting yeh so as I said

00:16:58,700 --> 00:17:01,470
before Cuban Eddie's has got some

00:16:59,750 --> 00:17:03,420
terrible defaults and

00:17:01,470 --> 00:17:05,460
the older versions like the dashboard

00:17:03,420 --> 00:17:07,650
had full admin privileges literally the

00:17:05,460 --> 00:17:08,910
web interface to it it had no are back

00:17:07,650 --> 00:17:11,220
if you're not familiar with the acronym

00:17:08,910 --> 00:17:13,290
that's role based access control before

00:17:11,220 --> 00:17:14,940
version 1.8 if this all sounds too

00:17:13,290 --> 00:17:16,650
ownerÃ­s to do yourself especially if

00:17:14,940 --> 00:17:18,330
you're just coming up with you know

00:17:16,650 --> 00:17:19,980
coming up to doing March services and

00:17:18,330 --> 00:17:22,170
containers and it's fairly neutral

00:17:19,980 --> 00:17:23,850
organization there's no shame in looking

00:17:22,170 --> 00:17:25,590
at using manage cuban Eddie's cluster

00:17:23,850 --> 00:17:27,600
again all the big cloud providers have

00:17:25,590 --> 00:17:29,870
them just go and have a look at them

00:17:27,600 --> 00:17:32,280
I've often found that a lot of

00:17:29,870 --> 00:17:34,860
engineering teams want to build their

00:17:32,280 --> 00:17:38,280
own clusters just because they want to

00:17:34,860 --> 00:17:40,140
say they did and it's an kubernetes is

00:17:38,280 --> 00:17:42,120
really easy to spin up but really

00:17:40,140 --> 00:17:43,770
difficult to get right not just from a

00:17:42,120 --> 00:17:45,720
security perspective so I would really

00:17:43,770 --> 00:17:49,440
recommend looking at manage cuban eddies

00:17:45,720 --> 00:17:51,420
clusters and Horror Story number two is

00:17:49,440 --> 00:17:54,240
I've sold Cuban aids cluster that was

00:17:51,420 --> 00:17:57,420
spun up just for a play around with some

00:17:54,240 --> 00:17:59,700
bad defaults it was left exposed to the

00:17:57,420 --> 00:18:05,190
internet and it guesses what happened

00:17:59,700 --> 00:18:06,720
next yes yes it was Bitcoin Mona I I

00:18:05,190 --> 00:18:08,190
realized that when I tell these stories

00:18:06,720 --> 00:18:09,930
it's basically Bitcoin miner Bitcoin

00:18:08,190 --> 00:18:11,340
mining Bitcoin miner and we know that

00:18:09,930 --> 00:18:12,690
there are other terrible things that can

00:18:11,340 --> 00:18:15,240
happen this is actually probably the

00:18:12,690 --> 00:18:16,470
this is the least impactful thing I mean

00:18:15,240 --> 00:18:21,570
you should be glad if you just get a

00:18:16,470 --> 00:18:23,340
Bitcoin miner but hey so um last but not

00:18:21,570 --> 00:18:25,260
least we will talk about and containing

00:18:23,340 --> 00:18:27,570
your enthusiasm for shifting left so

00:18:25,260 --> 00:18:28,710
we've all had the buzzwords let's shift

00:18:27,570 --> 00:18:32,550
left

00:18:28,710 --> 00:18:34,890
let's do DevOps let's be agile etc now

00:18:32,550 --> 00:18:36,210
it's really important that you like I

00:18:34,890 --> 00:18:37,410
hate buzzwords but it is important to

00:18:36,210 --> 00:18:39,510
think about these things because when

00:18:37,410 --> 00:18:41,100
we're when you start to container those

00:18:39,510 --> 00:18:42,720
things when you're using orchestrators

00:18:41,100 --> 00:18:46,410
remember that your traditional

00:18:42,720 --> 00:18:48,540
application security toolset may not be

00:18:46,410 --> 00:18:50,070
appropriate anymore because a lot of

00:18:48,540 --> 00:18:51,600
things need to be specifically container

00:18:50,070 --> 00:18:53,550
aware otherwise they don't see anything

00:18:51,600 --> 00:18:55,080
so what I'm talking about security tools

00:18:53,550 --> 00:18:57,950
I'm talking about things like IDs and

00:18:55,080 --> 00:19:00,060
heuristics for mobility scanning seam

00:18:57,950 --> 00:19:01,230
runtime security which we've already

00:19:00,060 --> 00:19:03,510
talked about and if you've got any

00:19:01,230 --> 00:19:04,710
auditing tools so you know it's really

00:19:03,510 --> 00:19:06,060
important that you actually have a look

00:19:04,710 --> 00:19:08,940
to see if your tools are still going to

00:19:06,060 --> 00:19:10,740
work if you're creating a CI CD pipeline

00:19:08,940 --> 00:19:12,480
at the same time which is great if

00:19:10,740 --> 00:19:14,010
you're going from scratch you also need

00:19:12,480 --> 00:19:15,419
to look at altering your tools to work

00:19:14,010 --> 00:19:17,429
in the pipeline and you may

00:19:15,419 --> 00:19:18,959
to replace them entirely if you're going

00:19:17,429 --> 00:19:20,909
from scratch this is probably a lot

00:19:18,959 --> 00:19:22,589
easier because you can just yeah do your

00:19:20,909 --> 00:19:24,359
research and see what works your

00:19:22,589 --> 00:19:26,190
organization but you do need to spend

00:19:24,359 --> 00:19:28,589
some time thinking about this because

00:19:26,190 --> 00:19:31,200
you can't just you absolutely cannot

00:19:28,589 --> 00:19:33,809
assume that what you worked in your

00:19:31,200 --> 00:19:35,729
monolithic application stack is going to

00:19:33,809 --> 00:19:37,079
work in cloud native and containerized

00:19:35,729 --> 00:19:39,450
environments because it's probably not

00:19:37,079 --> 00:19:41,729
at least not without some modifications

00:19:39,450 --> 00:19:44,129
and then finally actually go and

00:19:41,729 --> 00:19:45,629
benchmark your tools like really you

00:19:44,129 --> 00:19:47,070
should have developers and security

00:19:45,629 --> 00:19:48,599
involved in this process because if

00:19:47,070 --> 00:19:50,399
security just pick at all and the devs

00:19:48,599 --> 00:19:52,799
don't like it they won't use it and vice

00:19:50,399 --> 00:19:55,409
versa I know like we've got to be

00:19:52,799 --> 00:19:58,919
working together here I know like this I

00:19:55,409 --> 00:20:01,109
know it's beautiful I know and I know

00:19:58,919 --> 00:20:02,579
and it does all align in with this whole

00:20:01,109 --> 00:20:03,690
shifting left and people working

00:20:02,579 --> 00:20:05,789
together and there being more of an

00:20:03,690 --> 00:20:07,589
amalgamation of you know devs doing a

00:20:05,789 --> 00:20:08,999
bit more security security understanding

00:20:07,589 --> 00:20:11,459
more about devs and I know it's cheesy

00:20:08,999 --> 00:20:13,289
but like it really does work a lot

00:20:11,459 --> 00:20:15,899
better if we do it this way I promise

00:20:13,289 --> 00:20:17,190
and then last but not least my Horry

00:20:15,899 --> 00:20:18,809
number three is that I saw an

00:20:17,190 --> 00:20:20,429
organization try to use an old-school

00:20:18,809 --> 00:20:22,529
vulnerability scanner on their

00:20:20,429 --> 00:20:24,450
containers so unsurprisingly those

00:20:22,529 --> 00:20:26,129
results weren't very useful they told me

00:20:24,450 --> 00:20:29,940
that the vulnerability scanner found

00:20:26,129 --> 00:20:33,119
nothing and everything was fine yeah no

00:20:29,940 --> 00:20:35,789
no don't think it could see anything but

00:20:33,119 --> 00:20:37,619
I actually replaced this with this and

00:20:35,789 --> 00:20:38,999
the trunk shut down and all the

00:20:37,619 --> 00:20:40,799
MacDonalds picture because I thought

00:20:38,999 --> 00:20:42,320
that was an even better fail picture but

00:20:40,799 --> 00:20:47,249
there you go

00:20:42,320 --> 00:20:49,349
and finally my little experiment that I

00:20:47,249 --> 00:20:50,669
did I wanted to see if I could get

00:20:49,349 --> 00:20:52,379
things owned because I thought this

00:20:50,669 --> 00:20:54,059
could be really really easy so what I've

00:20:52,379 --> 00:20:55,619
been doing is I've been spinning up

00:20:54,059 --> 00:20:57,149
containers and Cuban Eddie's clusters

00:20:55,619 --> 00:20:59,879
and leaving them open to the internet

00:20:57,149 --> 00:21:04,940
for quite a while now and it's costing

00:20:59,879 --> 00:21:07,889
me quite a lot of money and this is her

00:21:04,940 --> 00:21:11,820
I've been I spun them off on a cloud

00:21:07,889 --> 00:21:14,179
hosting provider not out here and it's

00:21:11,820 --> 00:21:16,739
actually not I won't say here it was I

00:21:14,179 --> 00:21:18,509
used one where I could pay a few PayPal

00:21:16,739 --> 00:21:21,329
so I didn't have to give them my credit

00:21:18,509 --> 00:21:22,469
card because I was too scared and I

00:21:21,329 --> 00:21:24,419
tried to do the opposite of everything

00:21:22,469 --> 00:21:27,350
I've just encourage you to do so you

00:21:24,419 --> 00:21:30,300
know I wanted to get the hackers in

00:21:27,350 --> 00:21:32,750
feel free to use this in your like

00:21:30,300 --> 00:21:34,050
security presentation that's amazing

00:21:32,750 --> 00:21:36,180
yeah

00:21:34,050 --> 00:21:38,640
so anybody want to guess what kind of

00:21:36,180 --> 00:21:40,110
containers would be good to spin up that

00:21:38,640 --> 00:21:41,280
would definitely get owned if I left

00:21:40,110 --> 00:21:48,680
them over to the Internet

00:21:41,280 --> 00:21:50,880
any guesses Jenkins nice yes any others

00:21:48,680 --> 00:21:52,130
confluence oh I didn't do that one

00:21:50,880 --> 00:21:55,650
mm-hmm

00:21:52,130 --> 00:21:57,420
yeah yeah they're good well my main ones

00:21:55,650 --> 00:21:59,880
my favorite will WordPress in a bun too

00:21:57,420 --> 00:22:01,610
but specifically a bunch of 1404 because

00:21:59,880 --> 00:22:03,810
that one's full of holes

00:22:01,610 --> 00:22:05,520
yeah I also tried some Cuban Eddie's

00:22:03,810 --> 00:22:07,350
clusters as well so yeah it was

00:22:05,520 --> 00:22:10,980
interesting and but what actually

00:22:07,350 --> 00:22:13,320
happened well sadly not as much as I

00:22:10,980 --> 00:22:15,150
would have expected now definitely not

00:22:13,320 --> 00:22:17,820
in ten minutes

00:22:15,150 --> 00:22:19,710
and I think this was because I was using

00:22:17,820 --> 00:22:22,260
a cloud hosting provider and although i

00:22:19,710 --> 00:22:24,630
reverse-engineered a lot of the firewall

00:22:22,260 --> 00:22:28,080
rules that opened everything up I still

00:22:24,630 --> 00:22:29,610
think that possibly there was some other

00:22:28,080 --> 00:22:31,610
protection in there that I couldn't see

00:22:29,610 --> 00:22:34,560
on the cloud hosting provider but hey

00:22:31,610 --> 00:22:37,590
but interestingly the wonderful Atticus

00:22:34,560 --> 00:22:39,690
who is of course the HF icon a you did

00:22:37,590 --> 00:22:41,370
tweet this a while ago saying that she

00:22:39,690 --> 00:22:46,530
it took a month before a wordpress site

00:22:41,370 --> 00:22:48,540
that she had spun up she had a sustained

00:22:46,530 --> 00:22:50,190
hacking attempt and said that made me

00:22:48,540 --> 00:22:52,230
feel a whole lot better that I couldn't

00:22:50,190 --> 00:22:54,450
manage to get something hacked although

00:22:52,230 --> 00:22:57,960
I am a security person and maybe I don't

00:22:54,450 --> 00:23:00,270
know um anyway so that made me feel

00:22:57,960 --> 00:23:01,950
slightly better but what I did do was as

00:23:00,270 --> 00:23:03,900
I said it was very interesting and very

00:23:01,950 --> 00:23:05,730
strange as a security person to have to

00:23:03,900 --> 00:23:08,280
reverse-engineer all these firewall

00:23:05,730 --> 00:23:11,670
rules and open them up very strange

00:23:08,280 --> 00:23:13,410
feels weird let me tell you but it was

00:23:11,670 --> 00:23:14,730
an interesting experiment I also used a

00:23:13,410 --> 00:23:17,700
tool called I don't know if you

00:23:14,730 --> 00:23:19,170
pronounce it PS ad or piece and it's an

00:23:17,700 --> 00:23:22,380
open-source tool that basically runs on

00:23:19,170 --> 00:23:24,270
IP tables and Linux and it looks at any

00:23:22,380 --> 00:23:25,650
kind of port scans that happened so I

00:23:24,270 --> 00:23:27,420
was having a look at this because I was

00:23:25,650 --> 00:23:28,890
doing this on the cheap it's actually

00:23:27,420 --> 00:23:30,390
cost quite a lot of money in the end but

00:23:28,890 --> 00:23:31,920
in theory I was doing it on the cheap

00:23:30,390 --> 00:23:34,650
and there are some interesting things

00:23:31,920 --> 00:23:37,070
that come up what was interesting is all

00:23:34,650 --> 00:23:38,750
these looker the Whois

00:23:37,070 --> 00:23:41,360
things are apparently being used for

00:23:38,750 --> 00:23:43,639
adverts did people know this so we have

00:23:41,360 --> 00:23:48,019
obviously some scans from China we've

00:23:43,639 --> 00:23:49,940
got black host networks yeah take

00:23:48,019 --> 00:23:51,769
advantage of loads of bandwidth and I

00:23:49,940 --> 00:23:54,950
was like okay cool and that's clearly

00:23:51,769 --> 00:23:56,870
being used for bad things this was my

00:23:54,950 --> 00:24:01,370
favorite one security trouble from

00:23:56,870 --> 00:24:02,690
Alibaba this is real God knows and yeah

00:24:01,370 --> 00:24:04,130
so it was interesting and we saw

00:24:02,690 --> 00:24:06,799
something like attempts at sequel

00:24:04,130 --> 00:24:08,389
injection and etc so although maybe I

00:24:06,799 --> 00:24:11,029
didn't get everything totally owned and

00:24:08,389 --> 00:24:12,500
possibly I don't like to admit it but

00:24:11,029 --> 00:24:15,220
maybe they had been owned and I just

00:24:12,500 --> 00:24:19,070
couldn't tell obviously that wasn't it

00:24:15,220 --> 00:24:21,500
who knows but in conclusion please tell

00:24:19,070 --> 00:24:23,750
your application before you do your

00:24:21,500 --> 00:24:26,210
cloud migration or you containerize

00:24:23,750 --> 00:24:28,700
things please please do that security

00:24:26,210 --> 00:24:29,929
hygiene is so important and it's all

00:24:28,700 --> 00:24:32,539
well and good talking about all these

00:24:29,929 --> 00:24:34,669
extra tools and firewalls and seams and

00:24:32,539 --> 00:24:37,669
scanners but then people don't patch

00:24:34,669 --> 00:24:39,110
it's the things like that and you know

00:24:37,669 --> 00:24:42,490
we've got to get the basics right and

00:24:39,110 --> 00:24:44,330
people overlook it so often it's painful

00:24:42,490 --> 00:24:46,370
orchestrated defaults are terrible so

00:24:44,330 --> 00:24:48,049
change them or even better if you don't

00:24:46,370 --> 00:24:49,159
understand orchestrators or it's still

00:24:48,049 --> 00:24:52,580
something you're getting up to speed on

00:24:49,159 --> 00:24:54,799
just use something managed please please

00:24:52,580 --> 00:24:56,629
please please make sure you know where

00:24:54,799 --> 00:25:00,799
your container images come from just

00:24:56,629 --> 00:25:02,330
please don't run as root I'll actually

00:25:00,799 --> 00:25:04,509
have like really good reasons one of

00:25:02,330 --> 00:25:07,429
those like five reasons for doing so

00:25:04,509 --> 00:25:08,870
keep your secrets secret like do you

00:25:07,429 --> 00:25:11,269
actually put them in a proper secret

00:25:08,870 --> 00:25:13,600
storage place make sure that people only

00:25:11,269 --> 00:25:16,009
have the access they should to it etc

00:25:13,600 --> 00:25:17,659
shift laughs but make sure you've got

00:25:16,009 --> 00:25:20,210
the right tools to support doing this

00:25:17,659 --> 00:25:22,159
and then last but not least and this is

00:25:20,210 --> 00:25:24,440
probably the wrong note to end on but

00:25:22,159 --> 00:25:26,539
purposely try to get containers that is

00:25:24,440 --> 00:25:28,669
apparently harder than one would expect

00:25:26,539 --> 00:25:30,769
that's not official that's not counting

00:25:28,669 --> 00:25:31,879
please never quote me on that despite

00:25:30,769 --> 00:25:33,679
the fact I've just put it off on a

00:25:31,879 --> 00:25:36,289
screen and there's a couple of useful

00:25:33,679 --> 00:25:37,730
links here there's the Center for

00:25:36,289 --> 00:25:38,360
Internet Security kubernetes security

00:25:37,730 --> 00:25:40,039
benchmark

00:25:38,360 --> 00:25:43,009
there's the docker security benchmark

00:25:40,039 --> 00:25:46,090
from Center for Internet Security also

00:25:43,009 --> 00:25:46,090
there's the nist special publication

00:25:49,190 --> 00:25:53,960
credibly long and usually mind-numbingly

00:25:50,960 --> 00:25:55,670
boring this one is about ten pages long

00:25:53,960 --> 00:25:57,380
and it's about container security it's

00:25:55,670 --> 00:25:58,340
really quite accessible so I recommend

00:25:57,380 --> 00:26:01,010
having a read of it

00:25:58,340 --> 00:26:02,480
Liz writing work for aqua security and

00:26:01,010 --> 00:26:05,990
Michael house and glass who works for

00:26:02,480 --> 00:26:07,970
now AWS they wrote a book on cabinet

00:26:05,990 --> 00:26:09,860
security it's less than a year old so

00:26:07,970 --> 00:26:11,360
it's pretty up to date and they pretty

00:26:09,860 --> 00:26:13,570
much walk you through step by step how

00:26:11,360 --> 00:26:16,010
you can configure a Cuban eight across

00:26:13,570 --> 00:26:18,260
securely you can get it for free as a

00:26:16,010 --> 00:26:18,830
PDF on online so definitely have a look

00:26:18,260 --> 00:26:20,450
at that

00:26:18,830 --> 00:26:22,370
of course Microsoft have got some stuff

00:26:20,450 --> 00:26:24,080
on Cuban ID security we talked a lot

00:26:22,370 --> 00:26:25,520
about how's your on there and aks but to

00:26:24,080 --> 00:26:27,290
be honest with you the principles are

00:26:25,520 --> 00:26:28,820
the same for most things so it's worth

00:26:27,290 --> 00:26:30,950
looking at and then that cool tool

00:26:28,820 --> 00:26:32,930
called PSA D or piece odd however it's

00:26:30,950 --> 00:26:35,000
pronounced is created by a guy called

00:26:32,930 --> 00:26:38,360
Michael rash and you can download it

00:26:35,000 --> 00:26:39,470
there yeah and that is me done I didn't

00:26:38,360 --> 00:26:43,130
click the final clicker

00:26:39,470 --> 00:26:46,430
but yeah happy to take any questions or

00:26:43,130 --> 00:26:48,050
you can just tweet me whatever and thank

00:26:46,430 --> 00:26:49,510
you very much for listening to me this

00:26:48,050 --> 00:26:54,220
afternoon

00:26:49,510 --> 00:26:59,000
[Applause]

00:26:54,220 --> 00:27:00,980
awesome awesome now that works so we've

00:26:59,000 --> 00:27:03,290
got some time for a couple of questions

00:27:00,980 --> 00:27:10,400
it does anyone have any burning

00:27:03,290 --> 00:27:12,770
questions yeah hi

00:27:10,400 --> 00:27:15,040
so kubernetes you're saying that the

00:27:12,770 --> 00:27:21,590
defaults are really bad security wise

00:27:15,040 --> 00:27:23,840
since this is quite well known why good

00:27:21,590 --> 00:27:26,180
question I think the thing is because

00:27:23,840 --> 00:27:27,290
obviously I'm sure she just in case

00:27:26,180 --> 00:27:29,090
anybody in here doesn't know the

00:27:27,290 --> 00:27:30,560
background of kubernetes it was a google

00:27:29,090 --> 00:27:32,480
project and then it won't open source

00:27:30,560 --> 00:27:34,850
and now anyone can contribute to it I

00:27:32,480 --> 00:27:35,780
think that with a lot of open source

00:27:34,850 --> 00:27:37,700
projects and I think they've

00:27:35,780 --> 00:27:39,530
acknowledged quite recently only

00:27:37,700 --> 00:27:41,300
recently is that this is a problem is

00:27:39,530 --> 00:27:42,710
that generally people who contribute to

00:27:41,300 --> 00:27:44,540
open source projects are very more

00:27:42,710 --> 00:27:47,420
development focus and they just don't

00:27:44,540 --> 00:27:49,580
think about it's not it's not a good

00:27:47,420 --> 00:27:53,270
reason but I think that's what it is I

00:27:49,580 --> 00:27:55,640
know that literally in the last months

00:27:53,270 --> 00:27:58,010
the cloud native computing foundation

00:27:55,640 --> 00:28:00,559
who now oversee all the kind of

00:27:58,010 --> 00:28:04,009
kubernetes and kubernetes

00:28:00,559 --> 00:28:06,350
related projects they are they've now

00:28:04,009 --> 00:28:08,230
created like a security focus group and

00:28:06,350 --> 00:28:10,519
they're going to be doing actual

00:28:08,230 --> 00:28:12,019
conferences and making sure there's more

00:28:10,519 --> 00:28:15,259
work done on that so I think it will

00:28:12,019 --> 00:28:17,539
change but I think at the beginning with

00:28:15,259 --> 00:28:18,710
these these open source projects it's

00:28:17,539 --> 00:28:21,169
just feature feature feature

00:28:18,710 --> 00:28:26,029
functionality and security is definitely

00:28:21,169 --> 00:28:27,889
not at the top of the agenda I know I

00:28:26,029 --> 00:28:30,230
worked for a company once who thought if

00:28:27,889 --> 00:28:35,450
we set stupid values people will change

00:28:30,230 --> 00:28:38,419
them that obviously not real well any

00:28:35,450 --> 00:28:44,899
other questions well why are on the

00:28:38,419 --> 00:28:46,220
opposite side of the room to me hi what

00:28:44,899 --> 00:28:48,049
are your feelings on configuration

00:28:46,220 --> 00:28:51,440
management within containers to speed up

00:28:48,049 --> 00:28:52,549
response to security issues what by

00:28:51,440 --> 00:28:55,519
configuration management within

00:28:52,549 --> 00:28:56,389
containers AJ good question we we do

00:28:55,519 --> 00:28:58,220
that

00:28:56,389 --> 00:28:59,419
my company does that we have

00:28:58,220 --> 00:29:00,980
configuration management within

00:28:59,419 --> 00:29:02,720
containers to allow us to do things like

00:29:00,980 --> 00:29:06,289
and you talked we was a talking here

00:29:02,720 --> 00:29:09,289
earlier using a TD to distribute keys is

00:29:06,289 --> 00:29:10,850
there is is there an expectation that

00:29:09,289 --> 00:29:12,230
for example you might want to change

00:29:10,850 --> 00:29:15,110
some configuration without restarting

00:29:12,230 --> 00:29:17,710
containers do do anything like that I

00:29:15,110 --> 00:29:19,759
don't in general and I mean obviously

00:29:17,710 --> 00:29:22,129
there's so many things you can put in a

00:29:19,759 --> 00:29:23,210
container I am of the opinion that if

00:29:22,129 --> 00:29:24,740
you need to change something in the

00:29:23,210 --> 00:29:26,059
container they should be ephemeral and

00:29:24,740 --> 00:29:29,210
you should blow it away and redeploy it

00:29:26,059 --> 00:29:31,610
but the you you shouldn't it sort of

00:29:29,210 --> 00:29:34,039
breaks the whole concept of containers

00:29:31,610 --> 00:29:36,259
and the cloud native type computing

00:29:34,039 --> 00:29:39,379
thing I have heard of a couple of

00:29:36,259 --> 00:29:41,059
examples of when it's necessary I often

00:29:39,379 --> 00:29:44,029
find it's normally when people have

00:29:41,059 --> 00:29:46,610
tried to shoehorn a very old application

00:29:44,029 --> 00:29:48,889
into into a container where it doesn't

00:29:46,610 --> 00:29:50,419
really it just won't really tolerate

00:29:48,889 --> 00:29:52,850
being blown away and built back up but I

00:29:50,419 --> 00:29:56,210
think that's I don't think we should be

00:29:52,850 --> 00:29:58,369
I don't envision envisage that being

00:29:56,210 --> 00:30:00,070
developed massively because it kind of

00:29:58,369 --> 00:30:02,720
goes against the grain for what

00:30:00,070 --> 00:30:05,450
containerization is but I'm not saying

00:30:02,720 --> 00:30:07,070
that people don't do it I just don't

00:30:05,450 --> 00:30:09,110
think we'll see much development and

00:30:07,070 --> 00:30:10,879
kind of tooling but I realized that

00:30:09,110 --> 00:30:11,210
there will be people who have that in

00:30:10,879 --> 00:30:17,450
there

00:30:11,210 --> 00:30:20,020
it's down old applications right we have

00:30:17,450 --> 00:30:20,020
time for one more

00:30:23,110 --> 00:30:29,240
hi just building on that if I made that

00:30:27,140 --> 00:30:30,590
question a little bit more concrete okay

00:30:29,240 --> 00:30:32,870
I talked about something like imagine

00:30:30,590 --> 00:30:34,220
you have a very large fleet of like web

00:30:32,870 --> 00:30:35,780
servers maybe like hundred thousand or

00:30:34,220 --> 00:30:38,510
some some very very very large number

00:30:35,780 --> 00:30:40,220
and there's some kind of security issue

00:30:38,510 --> 00:30:41,570
and you might be using something like

00:30:40,220 --> 00:30:43,040
chef or ansible something like that

00:30:41,570 --> 00:30:44,390
within your containers or controls so

00:30:43,040 --> 00:30:45,740
some certain things and allow some

00:30:44,390 --> 00:30:48,440
limited amount of like updating or

00:30:45,740 --> 00:30:54,560
something like that it might be faster

00:30:48,440 --> 00:30:56,270
to update or patch something in line

00:30:54,560 --> 00:30:58,640
rather than having to kind of like

00:30:56,270 --> 00:31:00,140
redeploy I'm just curious what are your

00:30:58,640 --> 00:31:03,680
thoughts on the tensions between those

00:31:00,140 --> 00:31:05,180
two things I think it's it is a it's a

00:31:03,680 --> 00:31:08,660
good question I think it's very

00:31:05,180 --> 00:31:10,880
context-specific in general I would

00:31:08,660 --> 00:31:12,950
still always advocate blowing away but

00:31:10,880 --> 00:31:14,480
if you were orchestrating stuff I think

00:31:12,950 --> 00:31:16,400
you might do more like a schedule

00:31:14,480 --> 00:31:19,340
blowing away as and you wouldn't like go

00:31:16,400 --> 00:31:20,900
kill the lot you do it in in batches

00:31:19,340 --> 00:31:22,730
because kubernetes and orchestrate is

00:31:20,900 --> 00:31:24,170
good for doing things like that but

00:31:22,730 --> 00:31:26,660
right then you've also got the problem

00:31:24,170 --> 00:31:28,250
if it's a security incident like do you

00:31:26,660 --> 00:31:30,230
have time to wait to do it in that

00:31:28,250 --> 00:31:32,090
manner and there's also a question

00:31:30,230 --> 00:31:33,740
around the whole ephemeral nature of

00:31:32,090 --> 00:31:35,420
containers if you want to use security

00:31:33,740 --> 00:31:38,420
forensics how does that work if your

00:31:35,420 --> 00:31:40,670
answer is just to blow it away I don't

00:31:38,420 --> 00:31:43,130
have answers to that I think it's still

00:31:40,670 --> 00:31:44,570
very much in its infancy they're kind of

00:31:43,130 --> 00:31:47,030
best practice and thinking around that

00:31:44,570 --> 00:31:48,560
and yeah I don't know particularly

00:31:47,030 --> 00:31:52,250
around the forensics bit because yeah if

00:31:48,560 --> 00:31:54,650
your answer is blow it away and yeah I I

00:31:52,250 --> 00:31:56,270
don't have I think at the moment because

00:31:54,650 --> 00:31:58,700
we have no accepted best practices I

00:31:56,270 --> 00:32:01,280
think I hate this phrase but you do you

00:31:58,700 --> 00:32:02,810
like if like you couldn't have to

00:32:01,280 --> 00:32:04,580
probably work it out for yourself as a

00:32:02,810 --> 00:32:06,230
business I think in a few years we'll

00:32:04,580 --> 00:32:07,520
get more concrete thinking on what's

00:32:06,230 --> 00:32:13,780
best to do there we're just not there

00:32:07,520 --> 00:32:17,260
yet right thanks thanks again to Sarah

00:32:13,780 --> 00:32:17,260
you're allowed to clap

00:32:21,110 --> 00:32:25,070

YouTube URL: https://www.youtube.com/watch?v=cZgAGt8CCio


