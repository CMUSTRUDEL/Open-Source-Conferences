Title: "Building a Sustainable Python Package Index" - Dustin Ingram (PyCon AU 2019)
Publication date: 2019-08-03
Playlist: PyCon Australia 2019
Description: 
	Dustin Ingram

Most of us have installed a Python package, but do we know what it takes to make that work in a consistent, reliable way?

https://2019.pycon-au.org/talks/building-a-sustainable-python-package-index

PyCon AU, the national Python Language conference, is on again this August in Sydney, at the International Convention Centre, Sydney, August 2 - 6 2019.

Video licence: CC BY-NC-SA 4.0 - https://creativecommons.org/licenses/by-nc-sa/4.0/

Python, PyCon, PyConAU

Sat Aug  3 10:30:00 2019 at Cockle Bay
Captions: 
	00:00:01,010 --> 00:00:04,650
welcome everybody thank you very much

00:00:03,149 --> 00:00:07,020
for coming we are delighted to have you

00:00:04,650 --> 00:00:07,500
it's my pleasure to introduce our first

00:00:07,020 --> 00:00:09,660
speaker

00:00:07,500 --> 00:00:10,830
Dustin Ingram who is going to talk to us

00:00:09,660 --> 00:00:13,469
today about building a sustainable

00:00:10,830 --> 00:00:21,900
Python package index make a speaker

00:00:13,469 --> 00:00:23,130
welcome please hey everybody it's really

00:00:21,900 --> 00:00:24,869
great to be here I haven't been to

00:00:23,130 --> 00:00:27,480
Australia before so I'm excited to be at

00:00:24,869 --> 00:00:28,949
PyCon Australia for the first time so

00:00:27,480 --> 00:00:31,529
yeah I'm here to talk to you today about

00:00:28,949 --> 00:00:35,100
building a sustainable Python package

00:00:31,529 --> 00:00:37,890
index so I'm Dustin I am a developer

00:00:35,100 --> 00:00:39,510
advocate at Google I'm the organizer for

00:00:37,890 --> 00:00:41,309
pied Texas which is a conference in the

00:00:39,510 --> 00:00:43,739
States and I'm also one of the

00:00:41,309 --> 00:00:46,590
maintainer of the Python package index

00:00:43,739 --> 00:00:48,600
and I'm here today to answer the most

00:00:46,590 --> 00:00:50,850
important question about the Python

00:00:48,600 --> 00:00:53,570
package index which is how do you

00:00:50,850 --> 00:00:53,570
pronounce that

00:00:53,579 --> 00:00:59,170
answer is PI P I and I made this handy

00:00:57,640 --> 00:01:02,140
graphic for all of you just so you can

00:00:59,170 --> 00:01:02,829
remember all right so not pi PI not

00:01:02,140 --> 00:01:06,190
anything else

00:01:02,829 --> 00:01:09,159
pi PI so today all right I'll go back

00:01:06,190 --> 00:01:10,420
you know wants to tweet that ridiculous

00:01:09,159 --> 00:01:13,450
photo I don't know why that costume

00:01:10,420 --> 00:01:16,240
exists so today I'm going to talk to you

00:01:13,450 --> 00:01:18,880
a little bit about what pi PI is and

00:01:16,240 --> 00:01:20,860
what pi PI is not and I'll talk to you a

00:01:18,880 --> 00:01:23,110
little bit also about how pi PI works so

00:01:20,860 --> 00:01:25,119
both from a technical perspective as an

00:01:23,110 --> 00:01:27,789
organization and financially like what

00:01:25,119 --> 00:01:29,860
keeps pi PI running and I'll talk to you

00:01:27,789 --> 00:01:31,330
a little bit about how we can improve pi

00:01:29,860 --> 00:01:35,039
PI or what we're doing to improve it

00:01:31,330 --> 00:01:39,039
right now so some things that pi PI is

00:01:35,039 --> 00:01:41,560
PI is the canonical repository for

00:01:39,039 --> 00:01:46,210
Python software it is the place to put

00:01:41,560 --> 00:01:47,500
third-party Python software ice anyone

00:01:46,210 --> 00:01:48,670
ever been asked this question in an

00:01:47,500 --> 00:01:50,229
interview what happens when you take

00:01:48,670 --> 00:01:52,600
Google calm and your browser and press

00:01:50,229 --> 00:01:54,640
Enter all right it's kind of classic

00:01:52,600 --> 00:01:56,380
media interview question pi p is part of

00:01:54,640 --> 00:01:58,360
the answer to the question what happens

00:01:56,380 --> 00:02:00,459
when you type it install Jing go into

00:01:58,360 --> 00:02:03,550
your terminal and press Enter right so

00:02:00,459 --> 00:02:04,899
you type install Jango and pip you know

00:02:03,550 --> 00:02:06,489
does a little bit of behind the scenes

00:02:04,899 --> 00:02:08,440
work figures out that the software that

00:02:06,489 --> 00:02:10,599
you want doesn't exist on your local

00:02:08,440 --> 00:02:13,780
machine and then it reaches out to pi PI

00:02:10,599 --> 00:02:15,940
pi PI except this is not what PI P yeah

00:02:13,780 --> 00:02:19,080
it looks like when pip talks to it it

00:02:15,940 --> 00:02:20,980
looks kind of like this which is a mess

00:02:19,080 --> 00:02:23,319
so if you look at the source to this

00:02:20,980 --> 00:02:26,410
this is every single package name on PI

00:02:23,319 --> 00:02:28,360
P I as a link to a package page if you

00:02:26,410 --> 00:02:31,900
follow those links for Jango you get

00:02:28,360 --> 00:02:34,390
this list of file names Jango on version

00:02:31,900 --> 00:02:35,920
numbers and if you follow those links

00:02:34,390 --> 00:02:39,690
it'll take you to an actual distribution

00:02:35,920 --> 00:02:43,120
file that's on Python hosted dot org so

00:02:39,690 --> 00:02:45,340
pi PI is basically just this huge list

00:02:43,120 --> 00:02:47,019
of links with very very very specific

00:02:45,340 --> 00:02:48,489
file names that's it there's some other

00:02:47,019 --> 00:02:51,390
stuff on top too but that's really at

00:02:48,489 --> 00:02:54,940
the core what the package index is

00:02:51,390 --> 00:02:57,970
another thing that PI P I is PI P I is

00:02:54,940 --> 00:03:00,250
old it's been around for quite a while

00:02:57,970 --> 00:03:04,630
the first commit to the PI P I was in

00:03:00,250 --> 00:03:07,510
2002 this is what it looked like in 2003

00:03:04,630 --> 00:03:10,060
so pythons created a little

00:03:07,510 --> 00:03:12,760
before this in the 90s and so piping I

00:03:10,060 --> 00:03:14,799
didn't actually even exist when Python

00:03:12,760 --> 00:03:16,269
was first created so hence we we call

00:03:14,799 --> 00:03:17,980
Python like a batteries included

00:03:16,269 --> 00:03:19,569
language we have a lot of stuff in a

00:03:17,980 --> 00:03:22,030
standard library because papi I didn't

00:03:19,569 --> 00:03:23,530
exist back then however even though it

00:03:22,030 --> 00:03:26,650
didn't exist when Python is created it

00:03:23,530 --> 00:03:30,250
still is pretty old and predates a lot

00:03:26,650 --> 00:03:32,980
of other package repositories for other

00:03:30,250 --> 00:03:34,239
languages so it's it's sort of one of

00:03:32,980 --> 00:03:38,349
the first and it's been around for quite

00:03:34,239 --> 00:03:40,390
a while pi PI isn't a number of things

00:03:38,349 --> 00:03:42,190
as well so one thing that people

00:03:40,390 --> 00:03:45,879
sometimes get confused about with pi pi

00:03:42,190 --> 00:03:49,239
pi pi is not a collection of audited

00:03:45,879 --> 00:03:51,609
software happy.i is basically the Wild

00:03:49,239 --> 00:03:53,709
West anybody can publish anything on pi

00:03:51,609 --> 00:03:55,629
PI that they want with no verification

00:03:53,709 --> 00:03:57,069
right like you and I could upload

00:03:55,629 --> 00:03:59,440
something today that does literally

00:03:57,069 --> 00:04:01,120
anything that I want and you should be

00:03:59,440 --> 00:04:03,190
aware that when you install package it

00:04:01,120 --> 00:04:05,799
can do literally anything that it wants

00:04:03,190 --> 00:04:07,120
so it's this open package repository

00:04:05,799 --> 00:04:10,569
that anyone can submit anything to it's

00:04:07,120 --> 00:04:13,569
kind of like github but pi PI also is

00:04:10,569 --> 00:04:17,200
not literally github so some languages

00:04:13,569 --> 00:04:18,299
and ecosystems such as go they just use

00:04:17,200 --> 00:04:21,639
third-party

00:04:18,299 --> 00:04:24,340
package or source mod revision control

00:04:21,639 --> 00:04:26,139
systems as their package ecosystem so if

00:04:24,340 --> 00:04:28,000
you install go module you're gonna tell

00:04:26,139 --> 00:04:30,370
it to go to github and get this source

00:04:28,000 --> 00:04:31,840
from there and this is sort of unlike

00:04:30,370 --> 00:04:36,099
pipe yet where we have this central

00:04:31,840 --> 00:04:39,550
repository for packaged API also isn't a

00:04:36,099 --> 00:04:42,310
for-profit organization so some other

00:04:39,550 --> 00:04:45,010
language communities such as the

00:04:42,310 --> 00:04:47,380
JavaScript ecosystem their central

00:04:45,010 --> 00:04:50,560
package manager and PM is a for-profit

00:04:47,380 --> 00:04:52,870
company the company has like more than

00:04:50,560 --> 00:04:57,160
ten million dollars and ICI funding has

00:04:52,870 --> 00:04:58,660
like 60 employees and this is the

00:04:57,160 --> 00:05:00,550
equivalent for pipe guy in that

00:04:58,660 --> 00:05:03,849
ecosystem we don't have that pipe guys

00:05:00,550 --> 00:05:05,590
not like that it's a non-profit ok so

00:05:03,849 --> 00:05:07,479
I'm going to tell you how to build a

00:05:05,590 --> 00:05:09,789
pipe eaj in five easy steps

00:05:07,479 --> 00:05:12,789
ok so the first thing is you're going to

00:05:09,789 --> 00:05:14,470
define some api's so that list of giant

00:05:12,789 --> 00:05:16,450
links I showed you before that's what we

00:05:14,470 --> 00:05:19,120
call the simple API it's really like the

00:05:16,450 --> 00:05:21,020
simplest thing possible the way to build

00:05:19,120 --> 00:05:22,520
this decision tree for

00:05:21,020 --> 00:05:24,949
a package what version and where is the

00:05:22,520 --> 00:05:27,590
file there's an upload API this is how

00:05:24,949 --> 00:05:31,039
you get code and packages on the PI pi

00:05:27,590 --> 00:05:32,659
there's some JSON XML RPC API is for

00:05:31,039 --> 00:05:35,300
interacting the pi PI programmatically

00:05:32,659 --> 00:05:36,560
and then we also have a web UI for doing

00:05:35,300 --> 00:05:37,060
like a count management and stuff like

00:05:36,560 --> 00:05:39,319
that

00:05:37,060 --> 00:05:42,500
step two is you're gonna implement all

00:05:39,319 --> 00:05:45,259
these api's so the way we did this it's

00:05:42,500 --> 00:05:47,389
Python 3 superior web framework we use

00:05:45,259 --> 00:05:49,460
some pretty standard Postgres Redis some

00:05:47,389 --> 00:05:52,099
kubernetes just a little sprinkle of

00:05:49,460 --> 00:05:53,960
javascript and CSS because we're Python

00:05:52,099 --> 00:05:56,080
developers we don't really know how to

00:05:53,960 --> 00:05:59,210
do j/s and CSS that well

00:05:56,080 --> 00:06:01,729
step three is put all that behind a big

00:05:59,210 --> 00:06:03,590
honkin CDN which is a content

00:06:01,729 --> 00:06:05,150
distribution network and the reason for

00:06:03,590 --> 00:06:08,080
this is a super important part of

00:06:05,150 --> 00:06:10,580
building a pie pie is because pi pi is

00:06:08,080 --> 00:06:13,069
extremely popular it is the canonical

00:06:10,580 --> 00:06:15,409
repository for Python code so this is a

00:06:13,069 --> 00:06:16,009
screen shot took yesterday of our

00:06:15,409 --> 00:06:18,650
back-end

00:06:16,009 --> 00:06:22,190
of our CDN and in the last year papaya

00:06:18,650 --> 00:06:24,409
has served 160 billion requests and it's

00:06:22,190 --> 00:06:26,080
transferred almost to petabytes of data

00:06:24,409 --> 00:06:29,750
in the last year

00:06:26,080 --> 00:06:30,979
that's a lot is huge and then if you

00:06:29,750 --> 00:06:34,009
looked at the like sort of real-time

00:06:30,979 --> 00:06:36,289
statistics for our CDN right now you'd

00:06:34,009 --> 00:06:39,800
see that ipi is receiving something like

00:06:36,289 --> 00:06:41,330
6 to 7,000 requests per second a lot of

00:06:39,800 --> 00:06:42,770
people are installing a lot of packages

00:06:41,330 --> 00:06:45,710
and transferring a lot of data from pi

00:06:42,770 --> 00:06:47,840
PI at any given moment and the other

00:06:45,710 --> 00:06:49,669
thing is pipe guys growing as well all

00:06:47,840 --> 00:06:51,590
these are trending upward including the

00:06:49,669 --> 00:06:53,479
size of pockets off the size of all the

00:06:51,590 --> 00:06:55,039
files uploaded to it nothing really ever

00:06:53,479 --> 00:06:56,389
gets deleted from PI P I so it's only

00:06:55,039 --> 00:06:58,610
ever gonna grow

00:06:56,389 --> 00:07:01,840
so the mirror size is now at like almost

00:06:58,610 --> 00:07:05,090
7 terabytes of software it's like a huge

00:07:01,840 --> 00:07:08,509
ok so step 4 is I don't know in step 5

00:07:05,090 --> 00:07:10,940
is profit but really actually step 4 is

00:07:08,509 --> 00:07:13,400
like try to make all that sustainable

00:07:10,940 --> 00:07:16,219
and step 5 is hope that you break even

00:07:13,400 --> 00:07:17,599
in the end so that's sort of where we're

00:07:16,219 --> 00:07:19,669
at today so I'm gonna talk to you a

00:07:17,599 --> 00:07:20,810
little about how we can make pi PI

00:07:19,669 --> 00:07:21,529
sustainable from a couple of

00:07:20,810 --> 00:07:24,229
perspectives

00:07:21,529 --> 00:07:26,449
the first is technically so like I said

00:07:24,229 --> 00:07:27,949
ipi is this critical piece of

00:07:26,449 --> 00:07:31,610
infrastructure for the Python community

00:07:27,949 --> 00:07:33,620
it absolutely has to exists it's in the

00:07:31,610 --> 00:07:34,400
dependency chain for basically every

00:07:33,620 --> 00:07:36,530
Python

00:07:34,400 --> 00:07:38,840
every software on the world for every

00:07:36,530 --> 00:07:40,699
fortune in whatever company so it's

00:07:38,840 --> 00:07:43,160
super important that not only that it

00:07:40,699 --> 00:07:44,690
works but it continues to work and will

00:07:43,160 --> 00:07:47,660
continue to work with foreseeable future

00:07:44,690 --> 00:07:50,060
so there's a couple like guiding

00:07:47,660 --> 00:07:53,360
principles that I use when I'm designing

00:07:50,060 --> 00:07:54,979
software to last a long time and they're

00:07:53,360 --> 00:07:56,479
these and we can apply these all

00:07:54,979 --> 00:07:58,850
directly to pi PI so the first is

00:07:56,479 --> 00:08:00,680
longevity it has to be around it has to

00:07:58,850 --> 00:08:03,080
exist in a certain way that it will

00:08:00,680 --> 00:08:05,660
continue to exist that's be maintainable

00:08:03,080 --> 00:08:07,100
so as an open-source project it has to

00:08:05,660 --> 00:08:10,070
you have to be able to come in and work

00:08:07,100 --> 00:08:11,810
on it change it adapt it to the growing

00:08:10,070 --> 00:08:13,699
needs of the future it needs to be

00:08:11,810 --> 00:08:15,199
transparent so this is basically why

00:08:13,699 --> 00:08:18,229
it's an open-source project we need

00:08:15,199 --> 00:08:19,760
anyone be able to see what pi PI is

00:08:18,229 --> 00:08:21,919
doing how it works and be able to come

00:08:19,760 --> 00:08:24,530
and work on it it needs to be evolvable

00:08:21,919 --> 00:08:27,260
so it needs to meet new demands and

00:08:24,530 --> 00:08:29,380
change as time comes along and it needs

00:08:27,260 --> 00:08:32,089
to be scalable so like I said ipi is

00:08:29,380 --> 00:08:34,190
growing and it is not going to slow down

00:08:32,089 --> 00:08:36,589
so pipet needs to be able to address the

00:08:34,190 --> 00:08:41,000
the growing amount of demand that it's

00:08:36,589 --> 00:08:43,190
gonna have on it so a couple things we

00:08:41,000 --> 00:08:45,890
do here to build a sustainable pi PI

00:08:43,190 --> 00:08:48,589
technically first using the latest and

00:08:45,890 --> 00:08:51,740
greatest so this means that PI P is

00:08:48,589 --> 00:08:53,720
built with Python 3 we generally have

00:08:51,740 --> 00:08:55,310
the latest dependencies so papaya has a

00:08:53,720 --> 00:08:56,660
lot of dependencies we try to upgrade

00:08:55,310 --> 00:08:58,520
them as quickly as possible we don't

00:08:56,660 --> 00:09:00,350
want it to get to turn into the stale

00:08:58,520 --> 00:09:03,020
code base that has an old version of

00:09:00,350 --> 00:09:04,760
Python old version of this dependency

00:09:03,020 --> 00:09:06,529
male version that dependency and get so

00:09:04,760 --> 00:09:11,630
out of date but no one wants to bring it

00:09:06,529 --> 00:09:13,310
back up today another is while we're

00:09:11,630 --> 00:09:14,810
using the latest and greatest we're not

00:09:13,310 --> 00:09:16,910
using anything super weird

00:09:14,810 --> 00:09:18,470
basically everything that we use to

00:09:16,910 --> 00:09:21,320
build pi PI R every dependency that we

00:09:18,470 --> 00:09:23,870
have is more or less the status quo what

00:09:21,320 --> 00:09:25,760
the community has just decided to be you

00:09:23,870 --> 00:09:27,410
know a good web framework or a good

00:09:25,760 --> 00:09:29,180
database and we're not going to use

00:09:27,410 --> 00:09:30,740
anything super esoteric or something

00:09:29,180 --> 00:09:32,900
bizarre just because it seems

00:09:30,740 --> 00:09:34,459
interesting and this lends towards

00:09:32,900 --> 00:09:36,380
maintainability right if it's stuff that

00:09:34,459 --> 00:09:38,810
the community is already familiar with

00:09:36,380 --> 00:09:39,980
and and used to building then it makes

00:09:38,810 --> 00:09:43,100
it easier for people to come and work on

00:09:39,980 --> 00:09:44,300
it again everything is open source for

00:09:43,100 --> 00:09:47,290
pi PI and this makes it sustainable

00:09:44,300 --> 00:09:50,530
because anyone can come and work on it

00:09:47,290 --> 00:09:53,820
it's you know transparent - exactly

00:09:50,530 --> 00:09:53,820
everyone that wants to work on it

00:09:53,860 --> 00:09:57,940
a lot of lines of maintainability Popie

00:09:55,990 --> 00:09:59,560
we focus on having a really strong local

00:09:57,940 --> 00:10:01,870
development experience as well so if

00:09:59,560 --> 00:10:04,090
you're a pipe guy contributor I can get

00:10:01,870 --> 00:10:04,750
ipi a version of it running up on your

00:10:04,090 --> 00:10:06,790
computer

00:10:04,750 --> 00:10:08,680
with docker installed almost instantly

00:10:06,790 --> 00:10:11,980
it requires very little configuration

00:10:08,680 --> 00:10:13,510
and that lowers the the barrier for new

00:10:11,980 --> 00:10:17,320
contributors and for insurance people

00:10:13,510 --> 00:10:18,760
that want to work on another thing that

00:10:17,320 --> 00:10:21,340
helps with technical sustainability is

00:10:18,760 --> 00:10:23,260
tests there are a lot of tests tests

00:10:21,340 --> 00:10:26,230
prevent us from breaking things going

00:10:23,260 --> 00:10:28,660
forward creating breaking changes and

00:10:26,230 --> 00:10:31,240
actually pipe I has a lot of tests it

00:10:28,660 --> 00:10:33,250
has like actually 100% test coverage

00:10:31,240 --> 00:10:35,680
which when I talk to people about

00:10:33,250 --> 00:10:37,390
pypy ID they're like that's insane why

00:10:35,680 --> 00:10:40,810
why would you even bother to have 100%

00:10:37,390 --> 00:10:43,180
test coverage 100 cent test coverage is

00:10:40,810 --> 00:10:44,920
kind of like not an always guaranteed to

00:10:43,180 --> 00:10:46,150
fix all the bugs right just because you

00:10:44,920 --> 00:10:47,910
cover all the code passes I mean

00:10:46,150 --> 00:10:50,890
everything is technically correct

00:10:47,910 --> 00:10:52,540
however there is additional advantage to

00:10:50,890 --> 00:10:57,070
just having a lot of code coverage and

00:10:52,540 --> 00:10:58,510
that's we can really easily make changes

00:10:57,070 --> 00:11:01,300
and be sure that they're not going to

00:10:58,510 --> 00:11:03,910
break existing behavior and it also

00:11:01,300 --> 00:11:05,830
requires new features to have a certain

00:11:03,910 --> 00:11:08,290
level of investment so you can't just

00:11:05,830 --> 00:11:10,090
sort of a code cowboy into pi PI and

00:11:08,290 --> 00:11:11,230
write a feature and make a PR and say

00:11:10,090 --> 00:11:13,000
it's ready to go you actually have to

00:11:11,230 --> 00:11:15,160
write tests a hundred percent coverage

00:11:13,000 --> 00:11:18,010
tests for that feature to ensure that

00:11:15,160 --> 00:11:20,140
it's working as you expected before it

00:11:18,010 --> 00:11:21,820
gets merged so while that does sort of

00:11:20,140 --> 00:11:23,260
slow down how quickly we can build

00:11:21,820 --> 00:11:24,490
features that also make sure that we're

00:11:23,260 --> 00:11:26,380
only really building the features that

00:11:24,490 --> 00:11:29,590
are absolutely necessary and require the

00:11:26,380 --> 00:11:31,150
right amount of investment as far as

00:11:29,590 --> 00:11:33,370
scalability we designed pipe yet to be

00:11:31,150 --> 00:11:36,670
really really heavy in cashable so this

00:11:33,370 --> 00:11:38,920
allows us to offload a lot of like hard

00:11:36,670 --> 00:11:42,250
work the pipe I has to do onto our CDN

00:11:38,920 --> 00:11:45,070
so this means also that pipe is really

00:11:42,250 --> 00:11:47,350
resilient to downtime I could take pi PI

00:11:45,070 --> 00:11:49,730
down right now and I have before

00:11:47,350 --> 00:11:51,320
accidentally and

00:11:49,730 --> 00:11:53,870
and you probably wouldn't notice because

00:11:51,320 --> 00:11:56,900
almost like if you saw this that's the

00:11:53,870 --> 00:11:58,490
graphs before like 99% of our requests

00:11:56,900 --> 00:12:00,140
actually hit the CDN and don't actually

00:11:58,490 --> 00:12:02,390
make it to our back-end so it's really

00:12:00,140 --> 00:12:05,240
resilient and that means that us as

00:12:02,390 --> 00:12:07,520
maintainer x' can sort of step back and

00:12:05,240 --> 00:12:08,840
not have to carry a pager necessarily

00:12:07,520 --> 00:12:10,400
it's probably going to continue to work

00:12:08,840 --> 00:12:13,070
just fine even if there's a slight

00:12:10,400 --> 00:12:14,930
problem let's talk about maintainer x'

00:12:13,070 --> 00:12:17,060
so let's talk about organizational

00:12:14,930 --> 00:12:19,010
stability or sustainability and so I

00:12:17,060 --> 00:12:21,230
said before that we are not a non-profit

00:12:19,010 --> 00:12:23,780
so or we're not-for-profit what are we

00:12:21,230 --> 00:12:25,750
well we're nonprofit so IP is a project

00:12:23,780 --> 00:12:28,280
of the Python Software Foundation

00:12:25,750 --> 00:12:31,670
because we all know how sustainable that

00:12:28,280 --> 00:12:32,900
nonprofits are right so this is actually

00:12:31,670 --> 00:12:34,850
great for us because that means that we

00:12:32,900 --> 00:12:36,410
exist under this umbrella of the Python

00:12:34,850 --> 00:12:38,630
Software Foundation whose mission is to

00:12:36,410 --> 00:12:41,570
further advance Python and pypy I is

00:12:38,630 --> 00:12:43,880
definitely part of that I pays also run

00:12:41,570 --> 00:12:45,440
almost entirely by volunteers because we

00:12:43,880 --> 00:12:49,760
know how sustainable volunteers are as

00:12:45,440 --> 00:12:51,110
well so there's a sort of a cadre of

00:12:49,760 --> 00:12:52,640
people that work on pi PI

00:12:51,110 --> 00:12:55,520
so there's a few administrators down

00:12:52,640 --> 00:12:57,530
stuffed earnest and I all get part of

00:12:55,520 --> 00:12:59,690
our time as our day-to-day jobs to work

00:12:57,530 --> 00:13:01,460
on pi PI we also have some other

00:12:59,690 --> 00:13:03,200
maintainer x' who occasionally also get

00:13:01,460 --> 00:13:05,930
paid to work on PI P I so Nicole as our

00:13:03,200 --> 00:13:08,480
UI UX Suman as our project manager I'll

00:13:05,930 --> 00:13:09,920
talk more about that in a second we also

00:13:08,480 --> 00:13:11,870
have some moderators so these people are

00:13:09,920 --> 00:13:13,820
just totally volunteers but they help

00:13:11,870 --> 00:13:18,650
respond to user requests triage issues

00:13:13,820 --> 00:13:21,380
and handle other things like other other

00:13:18,650 --> 00:13:23,540
administrative issues on pipey I and we

00:13:21,380 --> 00:13:25,310
also have like 200 individuals that have

00:13:23,540 --> 00:13:26,870
actually committed changes to 5k as well

00:13:25,310 --> 00:13:29,230
and all these people are part of this

00:13:26,870 --> 00:13:32,810
group of volunteers that makes it run

00:13:29,230 --> 00:13:34,010
the thing about volunteers is for all

00:13:32,810 --> 00:13:36,350
these people there's basically three

00:13:34,010 --> 00:13:38,780
things that mean that they can work on

00:13:36,350 --> 00:13:40,370
pi PI either someone's company is paying

00:13:38,780 --> 00:13:41,930
them to work on open source and we've

00:13:40,370 --> 00:13:44,930
gotten lucky and they've decided to work

00:13:41,930 --> 00:13:46,670
on pi pi someone's unemployed and

00:13:44,930 --> 00:13:49,280
they're just bored and so they've come

00:13:46,670 --> 00:13:50,630
to PI P I had to spend some time or

00:13:49,280 --> 00:13:54,710
someone is not getting enough sleep they

00:13:50,630 --> 00:13:56,240
both have a job and they don't want to

00:13:54,710 --> 00:13:57,890
work on pi PI anyway and they're not

00:13:56,240 --> 00:14:00,920
getting paid to do it I've been all

00:13:57,890 --> 00:14:02,760
three of these so yet this is not

00:14:00,920 --> 00:14:03,960
exactly sustainable but so

00:14:02,760 --> 00:14:06,230
the best that we have right now and

00:14:03,960 --> 00:14:08,460
there's some other things that we can do

00:14:06,230 --> 00:14:09,180
financially to make this a little bit

00:14:08,460 --> 00:14:11,090
better as well

00:14:09,180 --> 00:14:16,680
let's talk about financial stability

00:14:11,090 --> 00:14:19,020
sustainability so pi PI exists almost

00:14:16,680 --> 00:14:21,690
entirely on in-kind donations from its

00:14:19,020 --> 00:14:24,030
sponsors so for things like metrics

00:14:21,690 --> 00:14:25,920
alerting search we get donations from

00:14:24,030 --> 00:14:29,850
companies like dad dog century elastic

00:14:25,920 --> 00:14:33,270
for compute this is AWS mgcp and for our

00:14:29,850 --> 00:14:34,620
CDN this is fastly and we depend a lot

00:14:33,270 --> 00:14:38,160
on all these sponsors but we especially

00:14:34,620 --> 00:14:39,390
depend a lot on fastly and I just want

00:14:38,160 --> 00:14:42,330
to take a quick moment to shout out to

00:14:39,390 --> 00:14:44,550
fastly right here fastly are like bill

00:14:42,330 --> 00:14:46,170
that we don't pay too fast every month

00:14:44,550 --> 00:14:48,240
is like two hundred thousand dollars

00:14:46,170 --> 00:14:50,910
almost two point five million dollars a

00:14:48,240 --> 00:14:52,800
year fastly donates this and has done in

00:14:50,910 --> 00:14:54,840
this for years now as an in-kind

00:14:52,800 --> 00:14:57,900
donation so fastly is awesome thank you

00:14:54,840 --> 00:15:00,000
fascinating and that's especially

00:14:57,900 --> 00:15:04,260
poignant in comparison to the way that

00:15:00,000 --> 00:15:06,030
idea makes cash so we have individual

00:15:04,260 --> 00:15:07,650
donors this totals about we just add

00:15:06,030 --> 00:15:10,110
this administering actually two hundred

00:15:07,650 --> 00:15:11,610
fifty dollars a month not two hundred

00:15:10,110 --> 00:15:14,490
fifty thousand dollars a month two

00:15:11,610 --> 00:15:16,110
hundred fifty dollars a month so this is

00:15:14,490 --> 00:15:18,570
not what's this name IPA what's the

00:15:16,110 --> 00:15:20,610
staining pipe i and and well these to be

00:15:18,570 --> 00:15:23,040
said these individual donors and we

00:15:20,610 --> 00:15:24,920
appreciate every dollar and having some

00:15:23,040 --> 00:15:27,630
income for pipe a is really important

00:15:24,920 --> 00:15:28,920
but pipe k exists almost entirely on the

00:15:27,630 --> 00:15:33,690
backs of all the sponsors that have

00:15:28,920 --> 00:15:37,350
donated services to us and so we also

00:15:33,690 --> 00:15:39,420
sort of need a way to work on pypy i and

00:15:37,350 --> 00:15:41,220
not just have services donated to us so

00:15:39,420 --> 00:15:43,290
when we add new features like these

00:15:41,220 --> 00:15:44,760
sponsors aren't donating new features to

00:15:43,290 --> 00:15:46,590
us they're not paying anyone to work on

00:15:44,760 --> 00:15:48,210
pypy i we need another way to do that

00:15:46,590 --> 00:15:51,510
and that way to do that is our grants

00:15:48,210 --> 00:15:53,100
and awards so just this is something

00:15:51,510 --> 00:15:54,570
that you know a year ago we weren't

00:15:53,100 --> 00:15:56,760
really doing the pipeline and we just

00:15:54,570 --> 00:15:58,740
sort of started doing it so one example

00:15:56,760 --> 00:16:04,260
is i showed you the screenshot this is

00:15:58,740 --> 00:16:07,250
by p i in 2003 this is pi p i in 2007

00:16:04,260 --> 00:16:10,170
and then this is it ten years later in

00:16:07,250 --> 00:16:11,280
2018 these are like almost like they

00:16:10,170 --> 00:16:13,140
look exactly the same

00:16:11,280 --> 00:16:15,529
hasn't changed much in those last ten

00:16:13,140 --> 00:16:17,149
years and it's not really fair to say

00:16:15,529 --> 00:16:18,620
like okay I didn't change in ten years

00:16:17,149 --> 00:16:20,689
because one thing that actually you

00:16:18,620 --> 00:16:23,990
can't tell from these screenshots is if

00:16:20,689 --> 00:16:26,480
I pee I went from about 2,000 projects

00:16:23,990 --> 00:16:28,399
to more than 50,000 projects in that

00:16:26,480 --> 00:16:31,279
time period it really grew almost

00:16:28,399 --> 00:16:33,079
exponentially but basically we decided

00:16:31,279 --> 00:16:35,629
that Popeye the code base that we had

00:16:33,079 --> 00:16:36,920
written for Pike I was no longer serving

00:16:35,629 --> 00:16:39,319
the best needs of the community and we

00:16:36,920 --> 00:16:41,329
needed to to rewrite in we started a

00:16:39,319 --> 00:16:42,980
total full stack rewrite this is a

00:16:41,329 --> 00:16:44,509
warehouse if you guys have ever heard of

00:16:42,980 --> 00:16:47,899
the sort of code name for what pipe he

00:16:44,509 --> 00:16:50,839
is now but this effort stalled basically

00:16:47,899 --> 00:16:52,430
because of the fact that we were all

00:16:50,839 --> 00:16:54,499
volunteers didn't have a lot of people

00:16:52,430 --> 00:16:55,550
don't work on a full-time basically you

00:16:54,499 --> 00:16:57,050
know we could slowly chip away his

00:16:55,550 --> 00:16:59,269
features but the more can I get to the

00:16:57,050 --> 00:17:01,540
point where is ready to release so we

00:16:59,269 --> 00:17:04,459
did is we went to Mozilla Mozilla has

00:17:01,540 --> 00:17:06,679
their open-source support awards and we

00:17:04,459 --> 00:17:08,839
applied for an award and we got the

00:17:06,679 --> 00:17:11,510
award Mozilla gave us this award they

00:17:08,839 --> 00:17:14,929
gave us $170,000 and that let us hire

00:17:11,510 --> 00:17:18,589
full-time to developers ui/ux contractor

00:17:14,929 --> 00:17:20,919
and a project manager and we launched a

00:17:18,589 --> 00:17:23,419
new pie pie in a couple months with that

00:17:20,919 --> 00:17:25,189
amount of funding we were able to finish

00:17:23,419 --> 00:17:27,829
the new code base and launch and release

00:17:25,189 --> 00:17:29,929
it and now that is the pie pad that we

00:17:27,829 --> 00:17:32,270
all know and love so this is a huge

00:17:29,929 --> 00:17:34,399
success for us we got certain amount of

00:17:32,270 --> 00:17:36,620
money we had a goal and we finished it

00:17:34,399 --> 00:17:40,610
and actually finished in April of last

00:17:36,620 --> 00:17:41,899
year we're going to keep doing this so

00:17:40,610 --> 00:17:45,799
right now we're in the process of

00:17:41,899 --> 00:17:48,370
working on the open technology Finn open

00:17:45,799 --> 00:17:50,330
Technology Fund grant that we received

00:17:48,370 --> 00:17:52,130
we did the same thing we applied for

00:17:50,330 --> 00:17:54,230
some improvements for pi pi and they

00:17:52,130 --> 00:17:57,289
gave us some money and we're in progress

00:17:54,230 --> 00:17:59,600
on shipping this right now so open

00:17:57,289 --> 00:18:01,100
Technology Fund Aggie was $80,000 with

00:17:59,600 --> 00:18:04,460
the goal of building more secure

00:18:01,100 --> 00:18:05,899
features and accessibility for for pi pi

00:18:04,460 --> 00:18:08,510
and it's almost finished so actually

00:18:05,899 --> 00:18:10,250
just recently we launched support for

00:18:08,510 --> 00:18:13,010
two factor authentication for pi PI

00:18:10,250 --> 00:18:15,230
thanks to this work and we also just

00:18:13,010 --> 00:18:17,330
recently like last week merge support

00:18:15,230 --> 00:18:18,470
for API tokens so you instead of using

00:18:17,330 --> 00:18:20,440
your username and password you can

00:18:18,470 --> 00:18:23,090
upload packages with API keys instead

00:18:20,440 --> 00:18:24,530
and we're gonna keep doing this so we

00:18:23,090 --> 00:18:26,240
got our award from Facebook hasn't

00:18:24,530 --> 00:18:28,720
started yet five thousand dollars to do

00:18:26,240 --> 00:18:31,120
cryptographic package signing and launch

00:18:28,720 --> 00:18:33,070
and again gonna keep doing it so maybe

00:18:31,120 --> 00:18:36,460
you want more sustainability and you

00:18:33,070 --> 00:18:38,230
want like a for-profit ipi which could

00:18:36,460 --> 00:18:39,970
have things like private posterize this

00:18:38,230 --> 00:18:40,420
is a question that I get over and over

00:18:39,970 --> 00:18:42,610
again

00:18:40,420 --> 00:18:43,780
now if popul I said these sustainability

00:18:42,610 --> 00:18:45,460
problems why don't we just turn into a

00:18:43,780 --> 00:18:47,800
for-profit organization you have all

00:18:45,460 --> 00:18:49,720
these great features so there's some

00:18:47,800 --> 00:18:51,720
challenges here one is a challenge to

00:18:49,720 --> 00:18:54,880
our nonprofit status we start doing

00:18:51,720 --> 00:18:56,560
for-profit things and we might lose our

00:18:54,880 --> 00:18:58,090
nonprofit status with the US government

00:18:56,560 --> 00:19:00,520
and that would be not good for a Python

00:18:58,090 --> 00:19:03,820
in general second is our donated

00:19:00,520 --> 00:19:05,500
services so we rely on a lot of donated

00:19:03,820 --> 00:19:08,260
services we start making money they

00:19:05,500 --> 00:19:09,760
might step away there's also a current

00:19:08,260 --> 00:19:12,280
ecosystem of tools and packages to

00:19:09,760 --> 00:19:13,870
depend on pi PI sort of filling the gaps

00:19:12,280 --> 00:19:15,370
in these features that we don't have so

00:19:13,870 --> 00:19:18,190
we started fulfilling them they might

00:19:15,370 --> 00:19:19,510
suffer as well and our volunteers can't

00:19:18,190 --> 00:19:20,620
really expect volunteers to start

00:19:19,510 --> 00:19:22,770
working for a company that's making

00:19:20,620 --> 00:19:24,940
money if we're not paying them the

00:19:22,770 --> 00:19:25,300
transition itself would be a challenging

00:19:24,940 --> 00:19:27,370
as well

00:19:25,300 --> 00:19:29,110
turning a something that exists as a

00:19:27,370 --> 00:19:31,330
non-profit into for profit would be

00:19:29,110 --> 00:19:32,740
really hard and actually like maybe this

00:19:31,330 --> 00:19:35,130
isn't even a good idea for a package

00:19:32,740 --> 00:19:38,920
registry so NPM right now is suffering

00:19:35,130 --> 00:19:41,800
and it maybe not succeeding maybe due to

00:19:38,920 --> 00:19:43,000
its its organizational structure so NPM

00:19:41,800 --> 00:19:46,570
is having a lot of layoffs and actually

00:19:43,000 --> 00:19:49,210
it's this type of funny but its CEO just

00:19:46,570 --> 00:19:50,770
just left recently ok so if you want

00:19:49,210 --> 00:19:53,140
more sustainability for pi PI this as

00:19:50,770 --> 00:19:55,420
what suggestion do donate we don't go a

00:19:53,140 --> 00:19:58,720
lot of donations but they do count you

00:19:55,420 --> 00:20:00,820
donate your money to Python org slash be

00:19:58,720 --> 00:20:02,410
SF / donations but more important that

00:20:00,820 --> 00:20:04,390
you can donate your time as well and

00:20:02,410 --> 00:20:05,470
that's arguably more valuable so you

00:20:04,390 --> 00:20:08,080
could go to warehouse and make

00:20:05,470 --> 00:20:09,730
contributions you can become a moderator

00:20:08,080 --> 00:20:11,560
and eventually maybe become a maintainer

00:20:09,730 --> 00:20:13,900
and move along and we'd really

00:20:11,560 --> 00:20:15,250
appreciate all that as well if you want

00:20:13,900 --> 00:20:17,110
to work on pipe I have these stickers

00:20:15,250 --> 00:20:19,570
they're really fun contributor stickers

00:20:17,110 --> 00:20:22,810
you can merge pull request and I'll give

00:20:19,570 --> 00:20:24,990
you one and yeah that's all thanks

00:20:22,810 --> 00:20:24,990
everybody

00:20:30,720 --> 00:20:34,749
so we have time maybe for one or two

00:20:33,789 --> 00:20:37,450
quick questions

00:20:34,749 --> 00:20:40,539
anybody in the audience whatever here

00:20:37,450 --> 00:20:42,269
okay you can stand up and come to the

00:20:40,539 --> 00:20:45,119
aisle it's a really big room we might

00:20:42,269 --> 00:20:49,629
give you more time for an answer

00:20:45,119 --> 00:20:51,759
thank you so that you listed the

00:20:49,629 --> 00:20:57,940
challenges of going from nonprofit to

00:20:51,759 --> 00:21:00,600
for-profit presumably NPM had the same

00:20:57,940 --> 00:21:05,200
sort of challenges

00:21:00,600 --> 00:21:08,139
what's different between pi PI and NPM

00:21:05,200 --> 00:21:08,350
that can't solve it the same way they

00:21:08,139 --> 00:21:10,690
did

00:21:08,350 --> 00:21:12,309
I don't believe NPM ever transition from

00:21:10,690 --> 00:21:14,649
one nonprofit to a for-profit I think

00:21:12,309 --> 00:21:17,350
the company started as a as a for-profit

00:21:14,649 --> 00:21:18,899
startup the goal was to be the package

00:21:17,350 --> 00:21:21,340
manager for the JavaScript ecosystem

00:21:18,899 --> 00:21:23,769
yeah I kind of breezed through it but I

00:21:21,340 --> 00:21:26,230
mean it's this is really challenging to

00:21:23,769 --> 00:21:27,730
figure out the structure and flow for

00:21:26,230 --> 00:21:30,029
money for you know the change from a

00:21:27,730 --> 00:21:33,789
non-profit to a for-profit organization

00:21:30,029 --> 00:21:36,879
yeah I don't know how relevant that this

00:21:33,789 --> 00:21:39,820
will be but I have been thinking of

00:21:36,879 --> 00:21:43,869
putting a pipe pipe package into PI pi

00:21:39,820 --> 00:21:45,970
and I don't have any code but I wear

00:21:43,869 --> 00:21:49,149
names are hard and I picked two names

00:21:45,970 --> 00:21:52,960
and they are empty packages right now I

00:21:49,149 --> 00:21:56,559
just got the two tapes reserved for you

00:21:52,960 --> 00:21:58,720
know whatever I'm only going to use one

00:21:56,559 --> 00:22:00,879
of them though right the other very good

00:21:58,720 --> 00:22:10,230
name will be unused and I don't know how

00:22:00,879 --> 00:22:12,609
to give up donate the money to PI Bay no

00:22:10,230 --> 00:22:15,220
there's a process for that I can I can

00:22:12,609 --> 00:22:17,230
talk you through but basically yeah and

00:22:15,220 --> 00:22:19,419
that's one of the issues with PI P I

00:22:17,230 --> 00:22:21,429
being sold and having a flat namespace

00:22:19,419 --> 00:22:23,649
is that yet package names are are

00:22:21,429 --> 00:22:25,059
getting you know sorta eaten up but yeah

00:22:23,649 --> 00:22:28,359
we do have a process for releasing

00:22:25,059 --> 00:22:32,889
unused and default package names one

00:22:28,359 --> 00:22:35,279
last very quick question is it a

00:22:32,889 --> 00:22:38,080
priority at all cleaning up all

00:22:35,279 --> 00:22:41,260
abandoned projects on

00:22:38,080 --> 00:22:45,220
PII or getting rid of projects for

00:22:41,260 --> 00:22:47,470
whatever other reason or is it just a

00:22:45,220 --> 00:22:50,080
case well the whole thing's going to

00:22:47,470 --> 00:22:53,800
keep growing and we're gonna keep having

00:22:50,080 --> 00:22:56,640
enough space and yeah we don't care

00:22:53,800 --> 00:22:59,110
about his project yeah so like I said

00:22:56,640 --> 00:23:01,390
the package names is a problem because

00:22:59,110 --> 00:23:02,710
there's a finite amount of those and

00:23:01,390 --> 00:23:06,040
actually the way Popeye works is you

00:23:02,710 --> 00:23:07,630
can't really say certain version of a

00:23:06,040 --> 00:23:09,550
package with a certain distribution type

00:23:07,630 --> 00:23:12,160
it's once you do it it can never be

00:23:09,550 --> 00:23:13,780
released again so even if we release

00:23:12,160 --> 00:23:16,900
package names that won't fix that

00:23:13,780 --> 00:23:18,790
problem so yeah I think generally the

00:23:16,900 --> 00:23:20,440
way that we approach it is someone is

00:23:18,790 --> 00:23:21,550
maybe depending on that software even if

00:23:20,440 --> 00:23:23,470
that project looks abandoned and

00:23:21,550 --> 00:23:24,700
actually if you're sort of following

00:23:23,470 --> 00:23:26,860
along on the Python community a

00:23:24,700 --> 00:23:28,720
permanent maintainer recently deleted a

00:23:26,860 --> 00:23:30,670
bunch of his packages that he thought

00:23:28,720 --> 00:23:32,800
were totally unused and he had

00:23:30,670 --> 00:23:33,910
deprecated for several years and a bunch

00:23:32,800 --> 00:23:35,350
of people came out a little work and

00:23:33,910 --> 00:23:37,000
said hey we need those little

00:23:35,350 --> 00:23:37,900
dependencies for our projects please put

00:23:37,000 --> 00:23:40,600
them back

00:23:37,900 --> 00:23:42,160
so yeah it's unlikely that SS maintainer

00:23:40,600 --> 00:23:45,160
is gonna go through and sort of call the

00:23:42,160 --> 00:23:46,480
croft but what we might do is find make

00:23:45,160 --> 00:23:47,830
it easier for people to determine what

00:23:46,480 --> 00:23:49,930
is and isn't abandoned and what's

00:23:47,830 --> 00:23:51,910
actually generally being continued to

00:23:49,930 --> 00:23:53,890
being supported and what's the community

00:23:51,910 --> 00:23:55,720
is using so that those packages that are

00:23:53,890 --> 00:23:57,960
been inserted you know they don't

00:23:55,720 --> 00:24:00,310
disappear but they become less prominent

00:23:57,960 --> 00:24:02,820
all right thank you let's thank Dustin

00:24:00,310 --> 00:24:02,820
one more time

00:24:05,260 --> 00:24:07,320

YouTube URL: https://www.youtube.com/watch?v=gcbNT3tLgUg


