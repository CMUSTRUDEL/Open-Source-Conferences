Title: OpenStack Lightning Talks
Publication date: 2015-08-06
Playlist: Pycon Australia 2015 OpenStack Minconf
Description: 
	PyCon Australia is the national conference for users of the Python Programming Language. In 2015, we're heading to Brisbane to bring together students, enthusiasts, and professionals with a love of Python from around Australia, and all around the World. 

July 31-August 4, Brisbane, Queensland, Australia
Captions: 
	00:00:09,640 --> 00:00:16,060
this was really follow up from so Simon

00:00:13,700 --> 00:00:18,470
summons talk earlier today where he was

00:00:16,060 --> 00:00:19,730
mentioning that if you're associating

00:00:18,470 --> 00:00:23,060
into your docker container you're doing

00:00:19,730 --> 00:00:24,770
it wrong I similarly was frustrated that

00:00:23,060 --> 00:00:27,350
you know I'm deploying a go binary and

00:00:24,770 --> 00:00:30,830
pilot point of goes it statically linked

00:00:27,350 --> 00:00:35,239
why am i bringing along an entire Ubuntu

00:00:30,830 --> 00:00:36,830
distro into my docker image when really

00:00:35,239 --> 00:00:39,019
all I want is you know this this five

00:00:36,830 --> 00:00:42,860
Meg binary and maybe gia lipsy and

00:00:39,019 --> 00:00:44,450
that's about it so i invented this thing

00:00:42,860 --> 00:00:45,829
it's a terrible name I should have

00:00:44,450 --> 00:00:47,540
called it just enough operating system

00:00:45,829 --> 00:00:49,579
but that acronym is already taken but

00:00:47,540 --> 00:00:51,320
that would have been much cooler this is

00:00:49,579 --> 00:00:52,940
an image builder designed to build

00:00:51,320 --> 00:00:54,739
docker images so it builds very minimal

00:00:52,940 --> 00:00:57,039
it's a minimal distro it doesn't even

00:00:54,739 --> 00:00:59,180
include a colonel it can't possibly boot

00:00:57,039 --> 00:01:02,180
it's just what you want to have in your

00:00:59,180 --> 00:01:06,009
docker image the bare minimum is 20

00:01:02,180 --> 00:01:10,640
megabytes which is glibc busybox shell

00:01:06,009 --> 00:01:12,350
and the opkg tool which is enough to

00:01:10,640 --> 00:01:18,290
pull in other bits of the distro if you

00:01:12,350 --> 00:01:23,090
want to in your thing but it has files

00:01:18,290 --> 00:01:25,430
in the turret yes yes yes so it's and

00:01:23,090 --> 00:01:27,380
that's it so yeah if you go to try it

00:01:25,430 --> 00:01:30,080
out I haven't done much work on it other

00:01:27,380 --> 00:01:32,509
than get it going but there's a Python

00:01:30,080 --> 00:01:33,950
pip and things you can install those

00:01:32,509 --> 00:01:35,840
packages already in there and there's a

00:01:33,950 --> 00:01:37,040
ruby one and the python 3 and apply some

00:01:35,840 --> 00:01:38,810
too and a couple others and do whatever

00:01:37,040 --> 00:01:39,710
you like if there's any other packages

00:01:38,810 --> 00:01:43,040
you'd like to see in there they pretty

00:01:39,710 --> 00:01:45,350
easy for me to add yeah I should mention

00:01:43,040 --> 00:01:46,909
that so it's really I'm just claiming

00:01:45,350 --> 00:01:49,729
credit for all the work openembedded did

00:01:46,909 --> 00:01:53,420
so rewinding a bit you want to build an

00:01:49,729 --> 00:01:54,470
image it's a little bit silly that if

00:01:53,420 --> 00:01:55,880
you look at disk image builder for

00:01:54,470 --> 00:01:57,530
example it starts by getting a

00:01:55,880 --> 00:02:01,340
general-purpose distro and then removes

00:01:57,530 --> 00:02:02,750
pieces I instead wanted to just start

00:02:01,340 --> 00:02:07,640
from nothing and then add pieces till I

00:02:02,750 --> 00:02:10,250
got what I wanted does it have a colonel

00:02:07,640 --> 00:02:12,579
in it does have a colonel in it that's

00:02:10,250 --> 00:02:12,579
too much

00:02:13,859 --> 00:02:21,159
right so this is I looked at what the

00:02:18,870 --> 00:02:23,049
embedded world was using because they're

00:02:21,159 --> 00:02:24,700
used to doing minimal customized distros

00:02:23,049 --> 00:02:28,889
and they used to cross compiling so

00:02:24,700 --> 00:02:31,780
there's no need to boot the resulting

00:02:28,889 --> 00:02:33,099
destro as part of building the distro so

00:02:31,780 --> 00:02:34,840
this is built on top of open embedded

00:02:33,099 --> 00:02:36,939
it's a pretty straightforward open

00:02:34,840 --> 00:02:39,849
embedded application useful open about

00:02:36,939 --> 00:02:41,379
it they're just builds the hotel chain

00:02:39,849 --> 00:02:42,730
and destroyed and the instructions on

00:02:41,379 --> 00:02:45,340
how to rebuild it if you want to are all

00:02:42,730 --> 00:02:46,299
at that URL and how to use it if you

00:02:45,340 --> 00:02:48,219
don't want to build it but just want to

00:02:46,299 --> 00:02:54,659
use it put salsa de you know it was just

00:02:48,219 --> 00:02:54,659
a FYI think you went over time

00:03:16,300 --> 00:03:22,040
handheld mics and go all right this is

00:03:20,420 --> 00:03:23,870
pretty quick it's something Eddie than

00:03:22,040 --> 00:03:25,880
like two minutes so I'm pretty sure all

00:03:23,870 --> 00:03:29,570
the syntax is wrong and but it's a

00:03:25,880 --> 00:03:31,640
fairly good idea all the clients got

00:03:29,570 --> 00:03:32,840
forks from Nova client and then decided

00:03:31,640 --> 00:03:35,150
what they wanted to do in their own

00:03:32,840 --> 00:03:36,770
little world therefore everything is

00:03:35,150 --> 00:03:39,980
different so if you do Swift you make

00:03:36,770 --> 00:03:42,890
connection it's got a user and a key key

00:03:39,980 --> 00:03:45,830
stone has a lot of stuff which is at

00:03:42,890 --> 00:03:47,180
least correct for v3 glance doesn't

00:03:45,830 --> 00:03:48,740
accept user name password at all you

00:03:47,180 --> 00:03:52,280
need to do that already and then get a

00:03:48,740 --> 00:03:54,470
token the names are all different so in

00:03:52,280 --> 00:03:56,300
Swift it's caught a key I think in

00:03:54,470 --> 00:03:58,400
syndra it's called an API key to pass

00:03:56,300 --> 00:04:00,020
through a password now we've got to go

00:03:58,400 --> 00:04:01,940
through all the problems of like dealing

00:04:00,020 --> 00:04:04,670
with putting Federation and kerberos and

00:04:01,940 --> 00:04:07,070
stuff into all these clients stop it

00:04:04,670 --> 00:04:08,960
like seriously I've been banging this

00:04:07,070 --> 00:04:10,580
drum since Hong Kong enough I'm sick of

00:04:08,960 --> 00:04:12,910
it lay still having to explain to people

00:04:10,580 --> 00:04:15,650
that there's a better way of doing it so

00:04:12,910 --> 00:04:18,200
we've done session objects in keystone

00:04:15,650 --> 00:04:21,020
client since I said I think I started

00:04:18,200 --> 00:04:22,640
them in Hong Kong the idea is you make a

00:04:21,020 --> 00:04:24,590
session that's got your transport

00:04:22,640 --> 00:04:26,840
parameters so you know things like CA

00:04:24,590 --> 00:04:28,550
certificates and stuff go in there you

00:04:26,840 --> 00:04:30,560
create North plug-in and the earth

00:04:28,550 --> 00:04:33,410
plugin can be anything so there's v3

00:04:30,560 --> 00:04:35,360
password there's v2 Federation is all

00:04:33,410 --> 00:04:37,090
going into these off play goons Kerberos

00:04:35,360 --> 00:04:39,710
is going into all these auth plugins

00:04:37,090 --> 00:04:41,780
create at once and reuse it everywhere

00:04:39,710 --> 00:04:43,820
it looks the same in all the clients the

00:04:41,780 --> 00:04:46,370
only one I'm aware of that doesn't

00:04:43,820 --> 00:04:52,310
support session is Swift because it's

00:04:46,370 --> 00:04:54,110
just a nightmare it means that you get

00:04:52,310 --> 00:04:56,300
token reuse so you create the earth

00:04:54,110 --> 00:04:58,370
plugin once all of them all of the

00:04:56,300 --> 00:05:00,919
clients use the same plug in to try and

00:04:58,370 --> 00:05:03,410
do that otherwise is a whole bunch of

00:05:00,919 --> 00:05:05,930
new you know parameter names to pass

00:05:03,410 --> 00:05:07,550
things through stops each client dealing

00:05:05,930 --> 00:05:09,890
with its own auth because you know

00:05:07,550 --> 00:05:11,510
seriously between Federation and all

00:05:09,890 --> 00:05:13,310
these other things we just cannot hack

00:05:11,510 --> 00:05:15,580
all of these options into each of the

00:05:13,310 --> 00:05:18,020
clients to make this stuff work

00:05:15,580 --> 00:05:19,810
consistently authentication if the token

00:05:18,020 --> 00:05:21,880
expires the session will get you

00:05:19,810 --> 00:05:25,419
new one and the client never has to deal

00:05:21,880 --> 00:05:27,070
with it the formatting is better there's

00:05:25,419 --> 00:05:30,520
a loading mechanism in there for CLI and

00:05:27,070 --> 00:05:34,150
config files so if you are writing and

00:05:30,520 --> 00:05:36,160
also config file you need to talk to a

00:05:34,150 --> 00:05:38,260
different service there is a standard

00:05:36,160 --> 00:05:41,050
way of loading all of these options from

00:05:38,260 --> 00:05:43,630
config file that is like two lines of

00:05:41,050 --> 00:05:46,450
Keystone client helper and that way you

00:05:43,630 --> 00:05:48,550
will be guaranteed to be compatible with

00:05:46,450 --> 00:05:50,080
it which ever new way of doing

00:05:48,550 --> 00:05:52,180
authentication the Keystone comes up

00:05:50,080 --> 00:05:54,460
with so we stopped having to come in and

00:05:52,180 --> 00:05:56,740
hound people about you know v3 orth and

00:05:54,460 --> 00:05:58,870
this is incompatible with kerberos and

00:05:56,740 --> 00:06:03,340
all sorts of other stuff I'm still

00:05:58,870 --> 00:06:05,770
having to deal with so that's it stop it

00:06:03,340 --> 00:06:07,630
seriously if you've got anywhere that's

00:06:05,770 --> 00:06:09,639
using a username and password directly

00:06:07,630 --> 00:06:19,240
into a client rip it out and if you

00:06:09,639 --> 00:06:21,729
don't know how find me on IRC yep Tony's

00:06:19,240 --> 00:06:24,430
right we are done so find some friends

00:06:21,729 --> 00:06:25,900
find some BFI some food find some people

00:06:24,430 --> 00:06:27,820
from other mini comps tell them about

00:06:25,900 --> 00:06:28,810
the awesomeness of OpenStack maybe

00:06:27,820 --> 00:06:34,169
you'll learn some good things without

00:06:28,810 --> 00:06:34,169
science thank you for coming

00:06:39,540 --> 00:06:41,600

YouTube URL: https://www.youtube.com/watch?v=eox2gqRlqZU


