Title: Agloe - What the map makers of the 1930s can teach us about protecting our data in 2018.
Publication date: 2018-08-24
Playlist: PyCon Australia 2018
Description: 
	errbufferoverfl

https://2018.pycon-au.org/talks/41799-agloe-what-the-map-makers-of-the-1930s-can-teach-us-about-protecting-our-data-in-2018/

In this talk we are going to do the time warp back to the 1930's and see what the General Drafting Co. can teach us about securing data and breach notification and how to apply them in the modern day. Using free and OSS I show you that security isn't all about expensive 3rd-party products and SOCs.

Python, PyCon, PyConAU, australia, programming, sydney

This video is licensed under CC BY 3.0 AU (https://creativecommons.org/licenses/by/3.0/au/).

PyCon Australia (“PyCon AU”) is the national conference for the Python Programming Community, bringing together professional, student and enthusiast developers with a love for developing with Python.

PyCon AU, the national Python Language conference, is on again this August in Sydney, at the International Convention Centre, Sydney, August 24 - 28 2018.

Python, PyCon, PyConAU
Captions: 
	00:00:00,000 --> 00:00:05,910
our first speaker of the day its Rebecca

00:00:02,939 --> 00:00:10,860
from assurance I will let her introduce

00:00:05,910 --> 00:00:13,259
her talk but she is an amazing security

00:00:10,860 --> 00:00:15,030
operations and developer who's been

00:00:13,259 --> 00:00:23,279
making the rounds recently with this

00:00:15,030 --> 00:00:24,359
talk so let's give her a warm welcome hi

00:00:23,279 --> 00:00:27,830
everyone

00:00:24,359 --> 00:00:31,969
I Rebecca today I'll be talking about

00:00:27,830 --> 00:00:35,370
canary tokens and the history of agloe

00:00:31,969 --> 00:00:36,989
and what map makers of the 1930s can

00:00:35,370 --> 00:00:38,640
teach us a little bit about protecting

00:00:36,989 --> 00:00:42,000
our data and our infrastructure in the

00:00:38,640 --> 00:00:43,890
modern day if you want you can scan the

00:00:42,000 --> 00:00:46,920
QR code it's just gonna send

00:00:43,890 --> 00:00:49,289
notifications to slack it's a good

00:00:46,920 --> 00:00:52,230
demonstration of what canary tokens can

00:00:49,289 --> 00:01:01,379
do but I'll be talking in more detail

00:00:52,230 --> 00:01:05,189
about it so a little bit about me I'm a

00:01:01,379 --> 00:01:08,670
pentest off that's me at work some

00:01:05,189 --> 00:01:13,380
important facts I'm a cyber which I'm

00:01:08,670 --> 00:01:15,180
Python developer there's a small caveat

00:01:13,380 --> 00:01:18,299
but that's actually not a Python it's a

00:01:15,180 --> 00:01:28,590
green coiled snake but we'll skip that

00:01:18,299 --> 00:01:30,630
and I like my ducks up right so just a

00:01:28,590 --> 00:01:32,220
quick note the stuff that we're going to

00:01:30,630 --> 00:01:34,290
talk about today might not be applicable

00:01:32,220 --> 00:01:37,189
for your business organization or

00:01:34,290 --> 00:01:40,909
infrastructure and that's totally ok

00:01:37,189 --> 00:01:42,780
security isn't a one-size-fits-all thing

00:01:40,909 --> 00:01:45,470
sometimes you need to tweak things

00:01:42,780 --> 00:01:49,049
sometimes the solution just doesn't work

00:01:45,470 --> 00:01:51,540
but I do encourage everyone to go ahead

00:01:49,049 --> 00:01:57,630
and at least give it a try you might be

00:01:51,540 --> 00:02:01,020
surprised by the results so paper towns

00:01:57,630 --> 00:02:04,350
are towns or places that don't actually

00:02:01,020 --> 00:02:06,600
exist they simply exist on paper

00:02:04,350 --> 00:02:10,940
they've been employed by map makers for

00:02:06,600 --> 00:02:13,970
many many years to cap to catch out map

00:02:10,940 --> 00:02:18,330
thieves and things like that

00:02:13,970 --> 00:02:23,460
agloe was one of those places it's a

00:02:18,330 --> 00:02:27,540
small hamlet in New York so a brief

00:02:23,460 --> 00:02:31,320
history about aglow in 1909 it was found

00:02:27,540 --> 00:02:35,700
the general drafting company was founded

00:02:31,320 --> 00:02:42,030
by a Auto G Lindenberg he was an

00:02:35,700 --> 00:02:42,540
immigrant to the US in 1930 him and his

00:02:42,030 --> 00:02:46,200
partner

00:02:42,540 --> 00:02:48,720
Ernest Alpers design decided to create a

00:02:46,200 --> 00:02:51,000
small town based off the initials of

00:02:48,720 --> 00:02:55,380
their names and that's where you get the

00:02:51,000 --> 00:02:56,010
name a glow from if you have a look

00:02:55,380 --> 00:02:58,020
there

00:02:56,010 --> 00:03:01,170
does it have a laser pointer I don't

00:02:58,020 --> 00:03:03,270
think it does I have circled it it's not

00:03:01,170 --> 00:03:04,950
too far from Rockland from anyone who

00:03:03,270 --> 00:03:11,370
knows the New York area

00:03:04,950 --> 00:03:13,560
I don't so what happened was in 1950 a

00:03:11,370 --> 00:03:16,200
general store was built at the

00:03:13,560 --> 00:03:18,690
intersection of the map and that was

00:03:16,200 --> 00:03:21,840
because the store appeared on an Esso

00:03:18,690 --> 00:03:24,030
map Esso at the time was being provided

00:03:21,840 --> 00:03:27,780
all of their maps by the general

00:03:24,030 --> 00:03:31,530
drafting company so what happened was

00:03:27,780 --> 00:03:34,980
that in some unknown year rand mcnally a

00:03:31,530 --> 00:03:40,459
competing map maker had the town a go

00:03:34,980 --> 00:03:43,739
appear on their maps and Esso who was

00:03:40,459 --> 00:03:45,330
providing the maps said haha you've been

00:03:43,739 --> 00:03:49,380
caught you've been stealing it on maps

00:03:45,330 --> 00:03:52,850
how dare you the only problem was was at

00:03:49,380 --> 00:03:56,100
the time because there was a store there

00:03:52,850 --> 00:03:58,620
the Delaware what was that the delaware

00:03:56,100 --> 00:04:01,790
the delaware county administration had

00:03:58,620 --> 00:04:04,709
an entry saying that a glow existed and

00:04:01,790 --> 00:04:07,230
because maps are a funny thing maps

00:04:04,709 --> 00:04:11,550
aren't really like software maps

00:04:07,230 --> 00:04:13,250
describe what is so it's very hard to

00:04:11,550 --> 00:04:15,690
prove piracy because it's like well

00:04:13,250 --> 00:04:18,540
that's technically what it looks like

00:04:15,690 --> 00:04:21,049
proved to me that you that you copied my

00:04:18,540 --> 00:04:23,610
map and that's exactly what happened

00:04:21,049 --> 00:04:25,140
ESO called out Rand McNally but Rand

00:04:23,610 --> 00:04:27,000
McNally was like no no no we get our

00:04:25,140 --> 00:04:30,090
information from the Delaware

00:04:27,000 --> 00:04:33,120
any administration

00:04:30,090 --> 00:04:37,100
so basically no litigation or copyright

00:04:33,120 --> 00:04:39,810
infringement could be proven and that

00:04:37,100 --> 00:04:45,390
sort of where the story ends it's very

00:04:39,810 --> 00:04:48,540
anticlimactic I know in 2014 someone

00:04:45,390 --> 00:04:51,390
noticed a glow on Google Maps as well

00:04:48,540 --> 00:04:53,850
and when Google became aware of this

00:04:51,390 --> 00:04:55,560
they silently removed it so you got a

00:04:53,850 --> 00:04:57,060
lot of a lot of questions there about

00:04:55,560 --> 00:05:00,830
what Google's doing with their maps as

00:04:57,060 --> 00:05:05,310
well but that's a story for another time

00:05:00,830 --> 00:05:07,050
so what does a glow have in common with

00:05:05,310 --> 00:05:10,890
modern-day data and infrastructure

00:05:07,050 --> 00:05:14,400
protection typically we see a lot of

00:05:10,890 --> 00:05:17,970
organizations put a lot of effort into

00:05:14,400 --> 00:05:20,160
their perimeter security good firewalls

00:05:17,970 --> 00:05:22,470
in web apps you know they're doing their

00:05:20,160 --> 00:05:24,980
passwords and their 2fa and all of that

00:05:22,470 --> 00:05:24,980
sort of thing

00:05:25,370 --> 00:05:31,919
but what happened when you break through

00:05:28,590 --> 00:05:36,360
the hard crunchy outside and get into

00:05:31,919 --> 00:05:40,910
the soft gooey inside if you haven't

00:05:36,360 --> 00:05:44,580
seen when a stranger calls I look away

00:05:40,910 --> 00:05:47,220
or what happens when the threat isn't an

00:05:44,580 --> 00:05:49,200
external hacker but it's a malicious

00:05:47,220 --> 00:05:51,540
user with your own within your own

00:05:49,200 --> 00:05:53,640
network what happens if it's someone

00:05:51,540 --> 00:05:55,470
who's really really annoyed at you and

00:05:53,640 --> 00:05:57,510
they want to take all of your

00:05:55,470 --> 00:05:59,660
intellectual property and then release

00:05:57,510 --> 00:06:04,710
it to the world

00:05:59,660 --> 00:06:07,830
it's where canary tokens come in so like

00:06:04,710 --> 00:06:11,220
a glow canary tokens are little bits of

00:06:07,830 --> 00:06:14,010
information that you can put throughout

00:06:11,220 --> 00:06:17,880
your systems and when an unsuspecting

00:06:14,010 --> 00:06:20,550
hacker or malicious user come along and

00:06:17,880 --> 00:06:22,620
they're unaware of what it is it allows

00:06:20,550 --> 00:06:26,190
you to send a notification saying hey

00:06:22,620 --> 00:06:27,810
something's going on of course there are

00:06:26,190 --> 00:06:32,040
some terms and conditions applied to

00:06:27,810 --> 00:06:34,080
this for canary tokens to be meaningful

00:06:32,040 --> 00:06:38,550
and actually usable they need to have

00:06:34,080 --> 00:06:39,810
three qualities one of them is that they

00:06:38,550 --> 00:06:40,319
shouldn't actually give you access to

00:06:39,810 --> 00:06:43,050
anything

00:06:40,319 --> 00:06:45,270
if you put a canary token there and

00:06:43,050 --> 00:06:49,099
someone can take in and actually access

00:06:45,270 --> 00:06:52,259
your AWS it's game over guys

00:06:49,099 --> 00:06:54,300
additionally you need to be able to log

00:06:52,259 --> 00:06:57,629
and monitor these things if you can't do

00:06:54,300 --> 00:07:00,059
that then there's no point if if you

00:06:57,629 --> 00:07:03,349
can't watch what's going on you're never

00:07:00,059 --> 00:07:03,349
going to know that these things go off

00:07:05,960 --> 00:07:11,339
the last thing and this is the most

00:07:08,249 --> 00:07:13,919
important part and it's probably one of

00:07:11,339 --> 00:07:15,990
the hardest things to do is you need to

00:07:13,919 --> 00:07:19,800
make sure that they look enticing to the

00:07:15,990 --> 00:07:24,959
bad guys or bad women either off bad

00:07:19,800 --> 00:07:26,849
people if they don't look in Tison then

00:07:24,959 --> 00:07:28,649
no one's gonna activate them trip over

00:07:26,849 --> 00:07:30,689
them whatever you want to say and you're

00:07:28,649 --> 00:07:32,339
never going to know and there are a few

00:07:30,689 --> 00:07:36,869
ways that you can do that which we'll

00:07:32,339 --> 00:07:38,759
get into a little bit later on so today

00:07:36,869 --> 00:07:40,949
I'll be talking primarily about the

00:07:38,759 --> 00:07:43,949
canary tokens provided by think'st

00:07:40,949 --> 00:07:46,110
Applied Research I don't work for them

00:07:43,949 --> 00:07:49,050
I'm not being paid to do this talk

00:07:46,110 --> 00:07:52,949
they're just a really easy free to use

00:07:49,050 --> 00:07:54,599
token it's relatively easy to deploy it

00:07:52,949 --> 00:07:56,930
comes in a docker container we'll talk

00:07:54,599 --> 00:07:59,279
about the pros and cons of that later

00:07:56,930 --> 00:08:01,379
but there are heaps of solutions

00:07:59,279 --> 00:08:05,249
available and canary tokens aren't

00:08:01,379 --> 00:08:07,649
actually a new concept they've been

00:08:05,249 --> 00:08:11,009
discussed a lot in academia for a while

00:08:07,649 --> 00:08:13,259
they also known as tripwires or honey

00:08:11,009 --> 00:08:15,360
tokens because they're sort of a

00:08:13,259 --> 00:08:16,229
spin-off of the traditional honey pot

00:08:15,360 --> 00:08:20,519
that you would put in your

00:08:16,229 --> 00:08:24,089
infrastructure normally so that's where

00:08:20,519 --> 00:08:26,669
you can grab some canary tokens from it

00:08:24,089 --> 00:08:28,559
allows you to you know create a few try

00:08:26,669 --> 00:08:30,300
it out for yourself but the

00:08:28,559 --> 00:08:31,740
infrastructure is also super easy to

00:08:30,300 --> 00:08:34,589
spin up on digital ocean or something

00:08:31,740 --> 00:08:38,940
like that as long as you're not using

00:08:34,589 --> 00:08:41,640
DNS okay

00:08:38,940 --> 00:08:44,850
so I will show you what some of these

00:08:41,640 --> 00:08:49,080
tokens look like so as I said I spun up

00:08:44,850 --> 00:08:51,360
an instance on digital ocean and then I

00:08:49,080 --> 00:08:55,920
use pager duty to pipe all of that to

00:08:51,360 --> 00:09:01,680
slack so as you can see we've had three

00:08:55,920 --> 00:09:03,090
people scan them canary tokens are

00:09:01,680 --> 00:09:05,220
really hard to demo because it's like

00:09:03,090 --> 00:09:16,980
look you got an alert congratulations

00:09:05,220 --> 00:09:19,230
there are bad people doing stuff so what

00:09:16,980 --> 00:09:26,370
sort of tokens are actually supported by

00:09:19,230 --> 00:09:29,790
think'st web bugs and urls they can look

00:09:26,370 --> 00:09:33,810
a little bit like this you know you send

00:09:29,790 --> 00:09:35,700
you CEO or whoever an email going hey

00:09:33,810 --> 00:09:38,520
look at this super secret information

00:09:35,700 --> 00:09:40,440
here's a link with no authentication and

00:09:38,520 --> 00:09:43,050
then you tell them to leave it unread in

00:09:40,440 --> 00:09:46,530
their mailbox and then when you know

00:09:43,050 --> 00:09:49,080
that email is eventually hacked into the

00:09:46,530 --> 00:09:50,400
the bad guy a bad person will come along

00:09:49,080 --> 00:09:54,660
and they'll be like ah look at this

00:09:50,400 --> 00:09:56,970
email it has information for a business

00:09:54,660 --> 00:09:58,470
name how exciting I'm gonna click on

00:09:56,970 --> 00:10:00,120
that link and then suddenly you get a

00:09:58,470 --> 00:10:02,460
slack notification you're like haha

00:10:00,120 --> 00:10:05,940
there's a bad person in the email CEO

00:10:02,460 --> 00:10:07,440
change your password now and also enable

00:10:05,940 --> 00:10:14,520
to FA this is what I was telling you

00:10:07,440 --> 00:10:17,100
about technology it's the worst you can

00:10:14,520 --> 00:10:20,370
also do email addresses for a similar

00:10:17,100 --> 00:10:21,450
effect so you have your users SQL you

00:10:20,370 --> 00:10:24,330
probably don't want it in your real

00:10:21,450 --> 00:10:27,300
users SQL you might want to live live

00:10:24,330 --> 00:10:31,290
life in the fast lane so what would

00:10:27,300 --> 00:10:33,540
happen is a user comes along a hacker

00:10:31,290 --> 00:10:35,040
comes along and they dump this database

00:10:33,540 --> 00:10:37,500
and then they start sending out all

00:10:35,040 --> 00:10:40,440
those spammy emails or whatever bad guys

00:10:37,500 --> 00:10:42,300
bad people do and then you'll get a

00:10:40,440 --> 00:10:45,780
notification when this email address is

00:10:42,300 --> 00:10:47,610
hit someone has been in my database so

00:10:45,780 --> 00:10:50,940
you know that something bad has happened

00:10:47,610 --> 00:10:52,380
but you should have other things in the

00:10:50,940 --> 00:10:54,090
way before they can actually get

00:10:52,380 --> 00:10:58,910
your databases because defense-in-depth

00:10:54,090 --> 00:11:03,000
of people this is also a really good one

00:10:58,910 --> 00:11:05,310
AWS credentials so you put in your

00:11:03,000 --> 00:11:07,950
canary credentials in your AWS

00:11:05,310 --> 00:11:12,570
credentials file if you're on Linux or

00:11:07,950 --> 00:11:14,400
OSX and basically if a bad person comes

00:11:12,570 --> 00:11:16,110
and compromises your computer that'll

00:11:14,400 --> 00:11:19,050
probably go sniffing around this area

00:11:16,110 --> 00:11:22,290
first they'll take those credentials and

00:11:19,050 --> 00:11:23,280
then they'll try and hit AWS of course

00:11:22,290 --> 00:11:25,050
they're not gonna get anywhere because

00:11:23,280 --> 00:11:27,630
what was one of our qualities of a

00:11:25,050 --> 00:11:33,630
canary token don't give them access to

00:11:27,630 --> 00:11:38,130
anything there is also another tool that

00:11:33,630 --> 00:11:41,040
does AWS tokens in on math and it's

00:11:38,130 --> 00:11:43,740
called space crowd space crab is great

00:11:41,040 --> 00:11:48,630
there's a little crab and colored like

00:11:43,740 --> 00:11:51,480
space if you if you need to deploy AWS

00:11:48,630 --> 00:11:55,650
tokens at scale and you have a lot of

00:11:51,480 --> 00:11:57,570
developers who are using AWS space crabs

00:11:55,650 --> 00:11:59,130
is a much better way of doing that

00:11:57,570 --> 00:12:01,170
things canary because you need to

00:11:59,130 --> 00:12:04,320
generate each of them one by one it can

00:12:01,170 --> 00:12:09,540
be a bit more tedious so services like

00:12:04,320 --> 00:12:12,450
that are also open source and then you

00:12:09,540 --> 00:12:14,400
can also do something like this where

00:12:12,450 --> 00:12:18,240
you put in an entry into your host

00:12:14,400 --> 00:12:21,660
config so basically I have the enticing

00:12:18,240 --> 00:12:22,980
staging DC internal hopefully they

00:12:21,660 --> 00:12:26,940
haven't noticed that there's no domain

00:12:22,980 --> 00:12:29,490
controller in the network normally you

00:12:26,940 --> 00:12:31,710
would deploy this with a DNS entry so

00:12:29,490 --> 00:12:33,120
then you have your really fancy internal

00:12:31,710 --> 00:12:35,460
looking domain name

00:12:33,120 --> 00:12:37,470
I was really lazy and battled for a good

00:12:35,460 --> 00:12:41,160
two days with DNS so mine's just an IP

00:12:37,470 --> 00:12:43,770
address you can also create an identity

00:12:41,160 --> 00:12:46,260
file just to sort of make it look even

00:12:43,770 --> 00:12:50,730
more enticing and you know get them to

00:12:46,260 --> 00:12:53,040
try and use that entry also virtual host

00:12:50,730 --> 00:12:54,690
keys are amazing if you haven't tried

00:12:53,040 --> 00:12:57,230
using visual host keys I would highly

00:12:54,690 --> 00:12:57,230
recommend it

00:12:59,470 --> 00:13:06,610
and as we saw at the start we had the QR

00:13:02,380 --> 00:13:09,340
code so if you have a large corporate

00:13:06,610 --> 00:13:12,850
office and when guests sign in they get

00:13:09,340 --> 00:13:15,790
a Wi-Fi credentials from like the person

00:13:12,850 --> 00:13:19,630
who signs people in this is a really

00:13:15,790 --> 00:13:22,530
good way to catch out malicious users

00:13:19,630 --> 00:13:26,140
who have infiltrated your business

00:13:22,530 --> 00:13:28,210
office area because they'll see

00:13:26,140 --> 00:13:30,580
something like this nothing sweet free

00:13:28,210 --> 00:13:34,840
Wi-Fi credentials I'm gonna hack all the

00:13:30,580 --> 00:13:51,310
things but bow you are not because we

00:13:34,840 --> 00:13:53,320
thought of that okay so canary token

00:13:51,310 --> 00:13:54,700
they're all well and good but let's talk

00:13:53,320 --> 00:13:56,820
about some of the benefits and

00:13:54,700 --> 00:13:59,350
inconveniences because not every

00:13:56,820 --> 00:14:02,950
solution is going to solve all of your

00:13:59,350 --> 00:14:05,110
problems they have a low signal-to-noise

00:14:02,950 --> 00:14:07,630
ratio meaning that you're not gonna have

00:14:05,110 --> 00:14:10,810
to sit there monitoring logs all day how

00:14:07,630 --> 00:14:13,720
fantastic is that when the canary goes

00:14:10,810 --> 00:14:15,400
off you know things are getting real so

00:14:13,720 --> 00:14:18,220
you don't have to worry about your guess

00:14:15,400 --> 00:14:21,340
black ops or anything just when you hear

00:14:18,220 --> 00:14:26,710
it you know something is about to go

00:14:21,340 --> 00:14:29,190
down or has gone down in established

00:14:26,710 --> 00:14:32,530
systems it can be a little bit harder to

00:14:29,190 --> 00:14:34,150
deploy I'm not gonna lie because you do

00:14:32,530 --> 00:14:35,920
sort of need to work out where it's

00:14:34,150 --> 00:14:38,200
gonna sit how it's going to interact

00:14:35,920 --> 00:14:40,830
with everything else and things like

00:14:38,200 --> 00:14:44,020
that especially if you've got a lot of

00:14:40,830 --> 00:14:46,510
inbound firewall rules I know that while

00:14:44,020 --> 00:14:48,130
I was demoing this myself internally I

00:14:46,510 --> 00:14:49,630
kept messing that up I kept putting

00:14:48,130 --> 00:14:57,430
these really strict firewalls and going

00:14:49,630 --> 00:14:59,530
where are my notifications but but once

00:14:57,430 --> 00:15:03,040
you do get it integrated it integrates

00:14:59,530 --> 00:15:05,080
quite well so if you can do the hard

00:15:03,040 --> 00:15:07,480
work at the start and get something like

00:15:05,080 --> 00:15:09,850
this deployed it will pay off well

00:15:07,480 --> 00:15:12,780
because once it's there it will be very

00:15:09,850 --> 00:15:12,780
easy to scale

00:15:17,209 --> 00:15:22,800
the downside of course is that canary

00:15:20,399 --> 00:15:25,320
tokens only give you very limited

00:15:22,800 --> 00:15:27,330
visibility of what's going on you put

00:15:25,320 --> 00:15:30,000
them on a particular server you put them

00:15:27,330 --> 00:15:31,589
on a particular person's laptop or

00:15:30,000 --> 00:15:34,740
desktop but that doesn't give you the

00:15:31,589 --> 00:15:36,930
overall picture of what malicious users

00:15:34,740 --> 00:15:39,570
or hackers are doing once they're in and

00:15:36,930 --> 00:15:42,930
so because of that you do need to make

00:15:39,570 --> 00:15:44,670
sure that you have extra logging and

00:15:42,930 --> 00:15:47,670
monitoring because canary tokens aren't

00:15:44,670 --> 00:15:48,990
gonna save your whole infrastructure you

00:15:47,670 --> 00:15:53,520
can't just roll these things out and be

00:15:48,990 --> 00:15:58,770
like we're secure now supplied as a

00:15:53,520 --> 00:16:00,480
docker container it's really good it's

00:15:58,770 --> 00:16:02,480
also supplied as a docker container it's

00:16:00,480 --> 00:16:06,839
a downside

00:16:02,480 --> 00:16:08,550
you do need to that their excuse was we

00:16:06,839 --> 00:16:11,190
haven't had any people complain about

00:16:08,550 --> 00:16:16,529
the docker container yet that's not not

00:16:11,190 --> 00:16:18,360
good so if you don't use docker or it's

00:16:16,529 --> 00:16:20,190
going to be hard to deploy things as

00:16:18,360 --> 00:16:22,200
docker this is going to be one of the

00:16:20,190 --> 00:16:25,890
things that you probably battle with the

00:16:22,200 --> 00:16:27,450
most it is really really easy to deploy

00:16:25,890 --> 00:16:30,029
in a docker container but of course

00:16:27,450 --> 00:16:32,370
docker comes with its own downsides

00:16:30,029 --> 00:16:33,300
which I am NOT well versed in because I

00:16:32,370 --> 00:16:40,290
don't like docker

00:16:33,300 --> 00:16:44,220
sorry any docker fans the solution is

00:16:40,290 --> 00:16:46,380
free which is really good and some of

00:16:44,220 --> 00:16:49,620
their research is open source not all of

00:16:46,380 --> 00:16:52,940
it yes there's some proprietary stuff

00:16:49,620 --> 00:16:56,540
going on and they haven't released the

00:16:52,940 --> 00:17:01,950
information around that unfortunately

00:16:56,540 --> 00:17:03,899
there isn't much else to say there's

00:17:01,950 --> 00:17:05,699
currently no support so the Canary

00:17:03,899 --> 00:17:09,000
tokens don't actually support git

00:17:05,699 --> 00:17:12,030
repositories yet but they support SVM so

00:17:09,000 --> 00:17:14,730
like I don't know so don't ask me the

00:17:12,030 --> 00:17:16,949
questions about why that was a decision

00:17:14,730 --> 00:17:20,100
that was made so you might want to like

00:17:16,949 --> 00:17:22,530
spin up a canary SVN instance and just

00:17:20,100 --> 00:17:24,060
replicate everything there that way you

00:17:22,530 --> 00:17:29,160
can deploy the SVM

00:17:24,060 --> 00:17:32,190
Nerys also supports physical tokens as

00:17:29,160 --> 00:17:34,080
we saw the physical tokens are also

00:17:32,190 --> 00:17:36,990
really good for those of you crossing

00:17:34,080 --> 00:17:40,110
international borders and are concerned

00:17:36,990 --> 00:17:41,760
about TSA looking into your phones and

00:17:40,110 --> 00:17:44,130
things like that if you just print one

00:17:41,760 --> 00:17:45,660
out slap it on the inside cover of your

00:17:44,130 --> 00:17:46,680
phone or on the back of your phone

00:17:45,660 --> 00:17:49,080
because you can't break them open

00:17:46,680 --> 00:17:50,670
anymore or on your laptop they're

00:17:49,080 --> 00:17:52,560
obviously gonna look at that and go huh

00:17:50,670 --> 00:17:53,580
I wonder what that is and they'll scan

00:17:52,560 --> 00:17:56,640
it and then you'll get a notification

00:17:53,580 --> 00:17:59,840
you're like burn everything TSA have

00:17:56,640 --> 00:17:59,840
been looking at my stuff

00:18:02,000 --> 00:18:06,450
one of the biggest downsides that I

00:18:04,410 --> 00:18:08,760
noticed was that not all tokens can be

00:18:06,450 --> 00:18:12,180
meaningfully renamed and so sometimes

00:18:08,760 --> 00:18:14,400
they can stand out a little bit because

00:18:12,180 --> 00:18:18,660
obviously they need like little hash

00:18:14,400 --> 00:18:20,360
value that gets reported back and it's

00:18:18,660 --> 00:18:23,130
like hey this is the token that went off

00:18:20,360 --> 00:18:26,460
so in some cases that can be a really

00:18:23,130 --> 00:18:28,680
really big downside especially for the

00:18:26,460 --> 00:18:30,390
word documents and things like that but

00:18:28,680 --> 00:18:32,730
there are other ways of getting around

00:18:30,390 --> 00:18:37,080
that by using those embedded links and

00:18:32,730 --> 00:18:40,800
things like that and of course it

00:18:37,080 --> 00:18:44,700
supports HTTP we've let's encrypt so you

00:18:40,800 --> 00:18:49,020
can roll it out with TLS internally

00:18:44,700 --> 00:18:50,970
which you should be doing so as I've

00:18:49,020 --> 00:18:55,370
said a few times canary tokens aren't

00:18:50,970 --> 00:18:55,370
going to keep you secure by themselves

00:18:55,400 --> 00:19:00,600
they're meant to be used in conjunction

00:18:57,300 --> 00:19:03,680
with other methodologies to help you

00:19:00,600 --> 00:19:07,860
improve your overall security posture

00:19:03,680 --> 00:19:11,340
this can be you know your firewalls your

00:19:07,860 --> 00:19:14,850
logging your monitoring your segregation

00:19:11,340 --> 00:19:17,910
and things like that like canary tokens

00:19:14,850 --> 00:19:20,670
are a little bit like a V in that they

00:19:17,910 --> 00:19:23,160
are sort of the last line of defense if

00:19:20,670 --> 00:19:24,600
something is tripped you know that

00:19:23,160 --> 00:19:26,130
you've got a really big problem or

00:19:24,600 --> 00:19:28,620
someone has forgotten their security

00:19:26,130 --> 00:19:30,270
training either oh you really want to

00:19:28,620 --> 00:19:31,980
hurt that it's the person has forgotten

00:19:30,270 --> 00:19:34,410
their security training and not you have

00:19:31,980 --> 00:19:35,400
hackers in your network because you're

00:19:34,410 --> 00:19:37,550
not going to get rid of them they're

00:19:35,400 --> 00:19:37,550
like

00:19:39,730 --> 00:19:43,750
yeah you you can't use canary tokens

00:19:42,580 --> 00:19:46,390
unless you're logging and monitoring

00:19:43,750 --> 00:19:50,529
because it's logging basically and

00:19:46,390 --> 00:19:52,510
monitoring and those logs will also give

00:19:50,529 --> 00:19:54,130
you a better overview of what is going

00:19:52,510 --> 00:19:55,950
on you can probably see where they're

00:19:54,130 --> 00:19:59,309
going if they're exfiltrating data

00:19:55,950 --> 00:19:59,309
things like that

00:19:59,789 --> 00:20:06,429
slack ups don't do slack ops people

00:20:02,880 --> 00:20:10,570
black ops slack is not a logging or

00:20:06,429 --> 00:20:13,299
monitoring tool I know it's cheap I know

00:20:10,570 --> 00:20:18,399
it's easy but you are going to give your

00:20:13,299 --> 00:20:24,309
ops people and your developers forgot

00:20:18,399 --> 00:20:27,070
the word for it now you're going to give

00:20:24,309 --> 00:20:29,440
them log exhaustion I'm pretty sure I

00:20:27,070 --> 00:20:34,809
wrote the word on the next slide as well

00:20:29,440 --> 00:20:36,190
and so troubling patterns and troubling

00:20:34,809 --> 00:20:38,139
events are gonna go unnoticed because

00:20:36,190 --> 00:20:40,149
they're so sick of looking at the logs

00:20:38,139 --> 00:20:41,440
because you're just piping them through

00:20:40,149 --> 00:20:44,350
slack and they're getting Bing Bing Bing

00:20:41,440 --> 00:20:47,230
Bing every minute I had to uninstall

00:20:44,350 --> 00:20:49,990
slack on my computer we don't even do

00:20:47,230 --> 00:20:51,580
monitoring like for my job I don't

00:20:49,990 --> 00:20:53,799
actually need to look at monitoring or

00:20:51,580 --> 00:20:59,320
logging but people just annoy me on

00:20:53,799 --> 00:21:01,750
slack log fatigue that's the word people

00:20:59,320 --> 00:21:04,149
will mute your channels people will just

00:21:01,750 --> 00:21:06,700
stop looking altogether and then they're

00:21:04,149 --> 00:21:08,679
going to ignore what's going on just

00:21:06,700 --> 00:21:10,120
because you're logging and monitoring it

00:21:08,679 --> 00:21:12,429
doesn't mean you're logging and

00:21:10,120 --> 00:21:18,250
monitoring the important things this

00:21:12,429 --> 00:21:20,649
could be a whole nother talk finally if

00:21:18,250 --> 00:21:23,440
you don't have an incident response plan

00:21:20,649 --> 00:21:26,889
it's important to consider one this

00:21:23,440 --> 00:21:29,080
doesn't need to be a formal you know 70

00:21:26,889 --> 00:21:33,279
page document of what happens when

00:21:29,080 --> 00:21:36,340
things go wrong all it needs to be is a

00:21:33,279 --> 00:21:38,019
little bit of table topping you know can

00:21:36,340 --> 00:21:40,870
have your orcs they can be the hackers

00:21:38,019 --> 00:21:43,649
can have your elves they can be the ops

00:21:40,870 --> 00:21:47,649
team what are some other classes

00:21:43,649 --> 00:21:49,580
Bard's is that right can have your buds

00:21:47,649 --> 00:21:52,669
is like your developers

00:21:49,580 --> 00:21:53,899
and basically you sit down with everyone

00:21:52,669 --> 00:21:57,529
you don't just sit down with your

00:21:53,899 --> 00:21:58,999
operations and your developers you can

00:21:57,529 --> 00:22:02,119
also sit down with your finance team

00:21:58,999 --> 00:22:03,590
because guess what finance team also has

00:22:02,119 --> 00:22:05,360
this stuff to deal with they have to

00:22:03,590 --> 00:22:07,999
deal with spam and what happens if one

00:22:05,360 --> 00:22:11,600
of their interns clicks the PDF you need

00:22:07,999 --> 00:22:13,759
to know what's gonna happen then and it

00:22:11,600 --> 00:22:17,419
just it helps get everyone thinking

00:22:13,759 --> 00:22:18,769
about what could happen and what to do

00:22:17,419 --> 00:22:20,809
in that case that way you're not all

00:22:18,769 --> 00:22:23,509
like scrambling when one of the tokens

00:22:20,809 --> 00:22:25,129
does go off because it can be really

00:22:23,509 --> 00:22:27,980
scary if you're not expecting it and

00:22:25,129 --> 00:22:32,080
then suddenly find out owner there are

00:22:27,980 --> 00:22:36,320
hackers you're gonna panic a little bit

00:22:32,080 --> 00:22:40,639
so I guess the TLDR of this is that

00:22:36,320 --> 00:22:42,499
Canaries alone are useless and to

00:22:40,639 --> 00:22:43,850
actually be beneficial they need to be

00:22:42,499 --> 00:22:48,340
you need to take a multi-faceted

00:22:43,850 --> 00:22:52,159
approach you need to implement other

00:22:48,340 --> 00:22:54,799
security things to really make them

00:22:52,159 --> 00:22:56,629
meaningful the things canary solution is

00:22:54,799 --> 00:22:58,399
really really good it's relatively easy

00:22:56,629 --> 00:22:59,929
to deploy especially if you know what

00:22:58,399 --> 00:23:07,609
you're doing

00:22:59,929 --> 00:23:11,720
I didn't yeah I have really secure

00:23:07,609 --> 00:23:13,399
passwords yeah so no Canaries were

00:23:11,720 --> 00:23:16,669
actually harmed in the making of this

00:23:13,399 --> 00:23:18,799
slide deck there are a lot of servers

00:23:16,669 --> 00:23:23,960
involved there's a lot of crying and

00:23:18,799 --> 00:23:30,710
screaming you can contact me on Twitter

00:23:23,960 --> 00:23:33,289
or on github I'm also on Mastodon and I

00:23:30,710 --> 00:23:35,539
have a wild card like catch all on my

00:23:33,289 --> 00:23:37,970
email so you can like literally send me

00:23:35,539 --> 00:23:42,519
email at anything as long as it conforms

00:23:37,970 --> 00:23:46,090
to the rfcs not the fancy RFC's though

00:23:42,519 --> 00:23:46,090
do we have questions

00:24:01,390 --> 00:24:14,900
do one up do we have a microphone yeah

00:24:05,420 --> 00:24:17,120
let's do that dude okay um yeah thanks

00:24:14,900 --> 00:24:19,580
just it's just because we I mean we're

00:24:17,120 --> 00:24:21,080
heavy users of docker and as a security

00:24:19,580 --> 00:24:22,670
person on the stage saying you don't

00:24:21,080 --> 00:24:24,470
like talking could I just ask not to get

00:24:22,670 --> 00:24:26,390
into a general thing about docker but is

00:24:24,470 --> 00:24:28,340
there a particular security issues that

00:24:26,390 --> 00:24:31,430
you have with docker thank you

00:24:28,340 --> 00:24:35,150
so my concerns with docker primarily

00:24:31,430 --> 00:24:37,790
come from the same reasons that the

00:24:35,150 --> 00:24:41,200
sandbox was removed from jQuery a lot of

00:24:37,790 --> 00:24:43,880
people see docker containers as proper

00:24:41,200 --> 00:24:45,500
like virtual machines or proper

00:24:43,880 --> 00:24:47,240
segregation between your operating

00:24:45,500 --> 00:24:50,360
system in your docker instance and it's

00:24:47,240 --> 00:24:52,100
just not that I also personally just

00:24:50,360 --> 00:24:54,020
don't work with docker so when I have to

00:24:52,100 --> 00:24:56,990
do docker things I get really frustrated

00:24:54,020 --> 00:24:58,880
with it but yeah my main concern as a

00:24:56,990 --> 00:25:02,470
security person with docker is that

00:24:58,880 --> 00:25:06,830
there are a lot of developers who think

00:25:02,470 --> 00:25:09,140
docker is like a secure container and

00:25:06,830 --> 00:25:10,700
you know if a hacker gets into our

00:25:09,140 --> 00:25:12,140
docker container that's it it's fine

00:25:10,700 --> 00:25:14,180
it's all contained when that's really

00:25:12,140 --> 00:25:18,080
not the case especially if you're not

00:25:14,180 --> 00:25:22,570
hardening your docker containers so yeah

00:25:18,080 --> 00:25:22,570
that that's my main concern with them

00:25:31,220 --> 00:25:37,020
so humans seem to be one of the weakest

00:25:34,530 --> 00:25:39,840
points in security so why are we relying

00:25:37,020 --> 00:25:41,790
on humans monitoring this rather than

00:25:39,840 --> 00:25:44,310
just being a triple-a that's you saying

00:25:41,790 --> 00:25:46,740
burn everything once the TSA sees it why

00:25:44,310 --> 00:25:50,220
isn't the canary triggering a tripwire

00:25:46,740 --> 00:25:54,210
and burning everything for you because

00:25:50,220 --> 00:25:56,760
they're like it's a lot of potential for

00:25:54,210 --> 00:25:58,740
false positives like if you haven't set

00:25:56,760 --> 00:26:00,540
them up correctly if you've done it

00:25:58,740 --> 00:26:02,730
right you're not really going to have

00:26:00,540 --> 00:26:08,160
that problem but that's a very extreme

00:26:02,730 --> 00:26:12,710
reaction also humans aren't necessarily

00:26:08,160 --> 00:26:15,510
the weakest point it really sort of

00:26:12,710 --> 00:26:19,770
depends on how you as an organization

00:26:15,510 --> 00:26:21,930
are dealing with your humans a lot of

00:26:19,770 --> 00:26:23,790
training should be done you can't just

00:26:21,930 --> 00:26:26,160
sort of say humans are terrible at this

00:26:23,790 --> 00:26:28,080
stuff the reality is is that you need to

00:26:26,160 --> 00:26:29,970
be investing in all of your users

00:26:28,080 --> 00:26:33,960
because they are your first line of

00:26:29,970 --> 00:26:36,450
defense in reality you know when finance

00:26:33,960 --> 00:26:38,760
get that spam email that's like hey the

00:26:36,450 --> 00:26:40,560
CEO has authorized all of this money if

00:26:38,760 --> 00:26:44,610
they click delete that's a win for

00:26:40,560 --> 00:26:46,580
security so if you if you're like under

00:26:44,610 --> 00:26:49,890
the impression that your users are

00:26:46,580 --> 00:26:51,270
useless or anything like that you may

00:26:49,890 --> 00:26:53,730
need to consider that you need to be

00:26:51,270 --> 00:26:55,760
doing more training and working with

00:26:53,730 --> 00:26:59,270
them a bit better for them to understand

00:26:55,760 --> 00:26:59,270
security in general

00:27:11,020 --> 00:27:15,310
just making sure our volunteers get lots

00:27:13,370 --> 00:27:17,930
of exercise running around with the mind

00:27:15,310 --> 00:27:19,880
so if you're just like an individual

00:27:17,930 --> 00:27:21,350
admitting your own machine you know

00:27:19,880 --> 00:27:22,190
you've got your own personal dev box or

00:27:21,350 --> 00:27:25,070
personal machine

00:27:22,190 --> 00:27:26,780
do you use any ideas on how to say

00:27:25,070 --> 00:27:29,720
something like this up helping protect

00:27:26,780 --> 00:27:31,760
yourself yeah um so basically after I

00:27:29,720 --> 00:27:34,310
set it up in digitalocean I was like hey

00:27:31,760 --> 00:27:36,260
this would be great for my own stuff I

00:27:34,310 --> 00:27:37,460
guess it depends on what you're

00:27:36,260 --> 00:27:39,320
comfortable with

00:27:37,460 --> 00:27:41,780
I had heaps of trouble with digitalocean

00:27:39,320 --> 00:27:44,900
and I would need to allow this instance

00:27:41,780 --> 00:27:48,260
to be publicly accessible to generate

00:27:44,900 --> 00:27:50,060
tokens and fork to get alerts so now I'm

00:27:48,260 --> 00:27:52,990
considering rolling it out at home on my

00:27:50,060 --> 00:27:56,000
own infrastructure so it can be internal

00:27:52,990 --> 00:27:58,790
but yeah like the if you're using AWS

00:27:56,000 --> 00:28:01,400
the AWS tokens are really good they also

00:27:58,790 --> 00:28:03,980
provide a lot of Windows folders so if

00:28:01,400 --> 00:28:05,930
you're a Windows user you can deploy

00:28:03,980 --> 00:28:10,280
some of those with you know credentials

00:28:05,930 --> 00:28:11,930
as the name you can also do it with the

00:28:10,280 --> 00:28:15,290
embedded images so they're good if

00:28:11,930 --> 00:28:16,970
you're using not office like word but if

00:28:15,290 --> 00:28:20,080
you want to do PowerPoint or Excel you

00:28:16,970 --> 00:28:22,790
can just embed that image or that link

00:28:20,080 --> 00:28:25,220
but yet like the solution is easy enough

00:28:22,790 --> 00:28:28,790
that you could deploy it in your own

00:28:25,220 --> 00:28:30,830
internal network with minimal hassle of

00:28:28,790 --> 00:28:32,810
course that comes with the caveats of it

00:28:30,830 --> 00:28:35,050
depends on what your internal network is

00:28:32,810 --> 00:28:37,790
like and what your own infrastructure

00:28:35,050 --> 00:28:39,350
how that works and things like that it's

00:28:37,790 --> 00:28:41,450
very easy when you've got your own

00:28:39,350 --> 00:28:44,270
internal flat network where there's no

00:28:41,450 --> 00:28:46,610
segregation or ingress or egress rules

00:28:44,270 --> 00:28:49,430
because everything is just fleet free

00:28:46,610 --> 00:28:53,290
flowing but yeah I would highly

00:28:49,430 --> 00:28:53,290
recommend at least giving it a try

00:29:03,120 --> 00:29:10,990
and I have the baton once you've got a

00:29:08,559 --> 00:29:14,649
loading in place there's many things

00:29:10,990 --> 00:29:18,159
that you're now getting channels of

00:29:14,649 --> 00:29:20,049
information coming in I guess the focus

00:29:18,159 --> 00:29:21,070
for the hackers then if they know that

00:29:20,049 --> 00:29:24,190
this sort of thing is going to be a

00:29:21,070 --> 00:29:25,360
focus would be to isolate your system

00:29:24,190 --> 00:29:27,429
administrators so they don't get the

00:29:25,360 --> 00:29:29,110
alerts how do you combat something like

00:29:27,429 --> 00:29:34,450
that that's a really really hard

00:29:29,110 --> 00:29:38,110
question because you really are sort of

00:29:34,450 --> 00:29:39,580
relying on hackers coming in and not

00:29:38,110 --> 00:29:42,129
knowing that this infrastructure is in

00:29:39,580 --> 00:29:44,649
place and that's why it's really

00:29:42,129 --> 00:29:47,110
important to try and ensure that when

00:29:44,649 --> 00:29:48,220
you're naming the actual box that these

00:29:47,110 --> 00:29:52,539
Canaries are going to it looks

00:29:48,220 --> 00:29:55,960
legitimate you can always deploy

00:29:52,539 --> 00:29:57,669
multiple instances but the reality is is

00:29:55,960 --> 00:30:02,919
that it is very easy to just sort of do

00:29:57,669 --> 00:30:04,889
all of those notifications out yeah it's

00:30:02,919 --> 00:30:07,750
a hard question and depending on how

00:30:04,889 --> 00:30:10,539
you're it's a very system dependent

00:30:07,750 --> 00:30:12,129
question like what are you doing how are

00:30:10,539 --> 00:30:15,340
you managing your internal routing

00:30:12,129 --> 00:30:16,600
things like that so it's not a really

00:30:15,340 --> 00:30:19,899
easy question that I can just be like

00:30:16,600 --> 00:30:21,429
this is how you do it it really would

00:30:19,899 --> 00:30:23,409
take a lot of time to sit down with your

00:30:21,429 --> 00:30:26,879
ops people your developers anyone who

00:30:23,409 --> 00:30:29,279
manages that and have a chat to them

00:30:26,879 --> 00:30:31,600
because yeah the reality is is that

00:30:29,279 --> 00:30:33,549
you're talking about actual hackers

00:30:31,600 --> 00:30:35,200
rather than like pen testers coming in

00:30:33,549 --> 00:30:37,179
because if pen testers come in they trip

00:30:35,200 --> 00:30:39,220
these things it's fine they're meant to

00:30:37,179 --> 00:30:41,169
be there but it's the bad guys who have

00:30:39,220 --> 00:30:42,970
no idea what they're doing as they

00:30:41,169 --> 00:30:46,419
bumble their way through your system

00:30:42,970 --> 00:30:48,009
that you're going to pick up I guess one

00:30:46,419 --> 00:30:50,080
possible solution to that would to be

00:30:48,009 --> 00:30:51,970
use a snitch like service that

00:30:50,080 --> 00:30:54,159
constantly says hey I'm still here I'm

00:30:51,970 --> 00:30:55,720
okay I'm still here I'm okay and if that

00:30:54,159 --> 00:30:59,340
disappears then it's like well hang on

00:30:55,720 --> 00:31:03,600
something's taking out my alerting yeah

00:30:59,340 --> 00:31:03,600
yeah that that would be a good solution

00:31:07,340 --> 00:31:14,190
why do I feel like you're gonna troll me

00:31:10,250 --> 00:31:15,510
because I am so at the side of your talk

00:31:14,190 --> 00:31:17,520
you mentioned that you're a fan of

00:31:15,510 --> 00:31:20,640
upright ducks

00:31:17,520 --> 00:31:23,820
I can see that the shirt you're wearing

00:31:20,640 --> 00:31:28,140
seems to have flat ducks on it could you

00:31:23,820 --> 00:31:30,780
explain why you're wearing a potentially

00:31:28,140 --> 00:31:33,750
traitorous shirt because we're gonna

00:31:30,780 --> 00:31:36,510
take that as a comment because we don't

00:31:33,750 --> 00:31:39,980
trust flaps so is there any more

00:31:36,510 --> 00:31:39,980
technical comments or questions

00:31:45,310 --> 00:31:52,839

YouTube URL: https://www.youtube.com/watch?v=dA_rwYoy81U


