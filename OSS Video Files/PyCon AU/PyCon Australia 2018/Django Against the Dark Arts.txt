Title: Django Against the Dark Arts
Publication date: 2018-08-25
Playlist: PyCon Australia 2018
Description: 
	Lilly Ryan

https://2018.pycon-au.org/talks/45196-django-against-the-dark-arts/

Django is a robust framework by design, and embodies many good security practices. But why and how do Django sites get hacked anyway? What can we do about it? And why are wizards involved?

Python, PyCon, PyConAU, australia, programming, sydney

This video is licensed under CC BY 3.0 AU ‹https://creativecommons.org/licenses/by/3.0/au/›.

PyCon Australia (“PyCon AU”) is the national conference for the Python Programming Community, bringing together professional, student and enthusiast developers with a love for developing with Python.

PyCon AU, the national Python Language conference, is on again this August in Sydney, at the International Convention Centre, Sydney, August 24 - 28 2018.

Python, PyCon, PyConAU
Captions: 
	00:00:06,500 --> 00:00:12,240
for our last talk of the day we have

00:00:09,510 --> 00:00:13,650
Lily Ryan our final invited speaker with

00:00:12,240 --> 00:00:16,219
a magical presentation please make we

00:00:13,650 --> 00:00:16,219
feel welcome

00:00:20,869 --> 00:00:29,670
welcome to Django against the dark arts

00:00:25,130 --> 00:00:31,489
are there any Gryffindor's here okay

00:00:29,670 --> 00:00:36,000
there's one up the back just one

00:00:31,489 --> 00:00:41,820
Ravenclaw's this includes me I'm any

00:00:36,000 --> 00:00:42,030
hufflepuffs okay slow that's cool all

00:00:41,820 --> 00:00:44,730
right

00:00:42,030 --> 00:00:45,899
um I'm not gonna wear this the whole

00:00:44,730 --> 00:00:49,710
time because it's gonna get really

00:00:45,899 --> 00:00:52,710
distracting for me but we'll deal with

00:00:49,710 --> 00:00:54,930
that okay so today's curriculum is an

00:00:52,710 --> 00:00:56,940
introductory class into getting into the

00:00:54,930 --> 00:00:59,340
mindset of Lord Voldemort so that we can

00:00:56,940 --> 00:01:01,289
write better web applications this is a

00:00:59,340 --> 00:01:02,190
topic which I think we will agree makes

00:01:01,289 --> 00:01:07,860
perfect sense

00:01:02,190 --> 00:01:09,570
yes okay good so I'm Lilly I'm also

00:01:07,860 --> 00:01:13,080
known as Atticus you can find me on

00:01:09,570 --> 00:01:14,790
Twitter at Atticus underscore au and I'm

00:01:13,080 --> 00:01:17,220
a penetration tester from Melbourne

00:01:14,790 --> 00:01:18,840
working for a security company called

00:01:17,220 --> 00:01:20,520
assurance they were kind enough to help

00:01:18,840 --> 00:01:22,380
me get here today and if you want to

00:01:20,520 --> 00:01:25,409
know more about us and what we do you

00:01:22,380 --> 00:01:27,659
can come and find me afterwards I'm also

00:01:25,409 --> 00:01:29,310
someone who enjoys a good analogy so as

00:01:27,659 --> 00:01:31,439
a former historian I've spoken about

00:01:29,310 --> 00:01:34,170
software and tech related topics and

00:01:31,439 --> 00:01:36,720
concepts by telling stories about things

00:01:34,170 --> 00:01:39,090
like undersea Telegraph cables horror

00:01:36,720 --> 00:01:41,070
movies from the 1920s stage magic and

00:01:39,090 --> 00:01:44,610
poison again all things that make

00:01:41,070 --> 00:01:46,140
perfect sense so today I'm going to use

00:01:44,610 --> 00:01:47,759
the story of Harry Potter to talk about

00:01:46,140 --> 00:01:50,100
web application security because it

00:01:47,759 --> 00:01:52,229
seemed like a fun thing to do and I have

00:01:50,100 --> 00:01:56,329
always wanted an excuse to wear robes on

00:01:52,229 --> 00:01:56,329
stage dammit like look ropes

00:01:58,820 --> 00:02:06,780
okay it's a pen testers job to think as

00:02:03,450 --> 00:02:08,940
malicious Internet users do talks on how

00:02:06,780 --> 00:02:10,890
security vulnerabilities work and how to

00:02:08,940 --> 00:02:12,840
mitigate them often pack in a lot of

00:02:10,890 --> 00:02:15,000
technical detail but understanding

00:02:12,840 --> 00:02:16,560
security concepts doesn't have to start

00:02:15,000 --> 00:02:18,870
there doesn't even have to be about

00:02:16,560 --> 00:02:20,970
software we can learn a lot about app

00:02:18,870 --> 00:02:22,950
security by imagining that we're

00:02:20,970 --> 00:02:25,220
fighting evil wizards because the basic

00:02:22,950 --> 00:02:27,420
concepts are almost exactly the same

00:02:25,220 --> 00:02:29,640
we're going to look at this by analyzing

00:02:27,420 --> 00:02:31,739
how Professor Albus Dumbledore the

00:02:29,640 --> 00:02:33,630
headmaster of Hogwarts school and widely

00:02:31,739 --> 00:02:36,030
recognized as pretty good at magic

00:02:33,630 --> 00:02:37,860
thought about and constructed defences

00:02:36,030 --> 00:02:40,200
around various important places and

00:02:37,860 --> 00:02:42,290
objects in the books then we'll look at

00:02:40,200 --> 00:02:45,120
how Lord Voldemort aka the bad guy

00:02:42,290 --> 00:02:46,560
approaches his own security and examined

00:02:45,120 --> 00:02:48,120
the difference between the two Wizards

00:02:46,560 --> 00:02:49,110
security practices and see what we can

00:02:48,120 --> 00:02:52,709
learn from both of them

00:02:49,110 --> 00:02:54,150
when it comes to Django if you're not

00:02:52,709 --> 00:02:55,980
familiar with the Harry Potter books I

00:02:54,150 --> 00:02:57,959
will do my best to explain things as I

00:02:55,980 --> 00:03:00,980
go along but you are also welcome to

00:02:57,959 --> 00:03:04,950
step out of the talk and read the books

00:03:00,980 --> 00:03:07,049
and come back to this recording later if

00:03:04,950 --> 00:03:09,720
you like we don't all read the same

00:03:07,049 --> 00:03:11,730
books it's fine please be warned though

00:03:09,720 --> 00:03:16,590
that this talk will contain spoilers for

00:03:11,730 --> 00:03:18,360
all of the books I've chosen 3 security

00:03:16,590 --> 00:03:19,920
case studies for us to look at in order

00:03:18,360 --> 00:03:22,110
to pick apart Dumbledore's defense

00:03:19,920 --> 00:03:23,700
methods these are the guarding of the

00:03:22,110 --> 00:03:25,310
philosopher's stone and the first book

00:03:23,700 --> 00:03:27,630
Harry Potter in the Philosopher's Stone

00:03:25,310 --> 00:03:29,970
the security mechanisms around the

00:03:27,630 --> 00:03:33,030
Goblet of Fire in the fourth book Harry

00:03:29,970 --> 00:03:34,709
Potter and the Goblet of Fire and the

00:03:33,030 --> 00:03:36,930
defences around the house located at

00:03:34,709 --> 00:03:39,530
number 12 Grimmauld place London in the

00:03:36,930 --> 00:03:42,420
fifth to seventh books of the series

00:03:39,530 --> 00:03:45,989
let's start with an analysis of how the

00:03:42,420 --> 00:03:48,120
Philosopher's Stone was defended the

00:03:45,989 --> 00:03:49,500
Philosopher's Stone is a shiny stone

00:03:48,120 --> 00:03:51,720
with magic powers that the good guys

00:03:49,500 --> 00:03:53,579
have Lord Voldemort wants the stone

00:03:51,720 --> 00:03:56,250
because it will help him kick his evil

00:03:53,579 --> 00:03:58,079
goals Dumbledore is de tasked with

00:03:56,250 --> 00:04:00,900
protecting the stone from Lord Voldemort

00:03:58,079 --> 00:04:02,670
because he is very good at magic he

00:04:00,900 --> 00:04:04,829
decides to do this by getting a bunch of

00:04:02,670 --> 00:04:07,049
his staff members to set up a series of

00:04:04,829 --> 00:04:08,709
seven defences in front of the stone in

00:04:07,049 --> 00:04:10,120
sequential chambers

00:04:08,709 --> 00:04:13,480
behind a classroom door and a

00:04:10,120 --> 00:04:15,159
third-floor corridor at Hogwarts the

00:04:13,480 --> 00:04:16,660
seven defenses are in the order that

00:04:15,159 --> 00:04:19,299
they're encountered by anyone trying to

00:04:16,660 --> 00:04:22,150
reach the stone a three-headed dog

00:04:19,299 --> 00:04:24,580
guarding a trapdoor a murderous plant

00:04:22,150 --> 00:04:27,490
called a Devil's snare a room full of

00:04:24,580 --> 00:04:32,080
flying Keys a giant enchanted chess

00:04:27,490 --> 00:04:34,330
board a literal troll a table with seven

00:04:32,080 --> 00:04:35,860
potions and a logic puzzle on it and a

00:04:34,330 --> 00:04:39,190
magical mirror called the mirror of

00:04:35,860 --> 00:04:40,630
Erised said so by layering a bunch of

00:04:39,190 --> 00:04:42,460
different defenses on top of each other

00:04:40,630 --> 00:04:43,990
to protect his sensitive content in this

00:04:42,460 --> 00:04:45,820
case the stone

00:04:43,990 --> 00:04:47,650
Dumbledore's using the strategy of

00:04:45,820 --> 00:04:49,900
defense in depth which is multi-layered

00:04:47,650 --> 00:04:52,660
defense strategies that work together to

00:04:49,900 --> 00:04:54,669
protect sensitive information Liam Oh

00:04:52,660 --> 00:04:56,229
gave a talk on this in the security

00:04:54,669 --> 00:04:58,210
track earlier today which goes into more

00:04:56,229 --> 00:05:01,199
detail on this topic and I would

00:04:58,210 --> 00:05:02,320
recommend that you watch it so anyway

00:05:01,199 --> 00:05:05,080
defense-in-depth

00:05:02,320 --> 00:05:06,699
is an established security pattern but

00:05:05,080 --> 00:05:07,750
how well was this pattern implemented

00:05:06,699 --> 00:05:11,650
when it came to protecting the

00:05:07,750 --> 00:05:13,000
philosopher's stone firstly a few of

00:05:11,650 --> 00:05:16,270
these defenses are things that are

00:05:13,000 --> 00:05:17,590
broadly class as physical defenses these

00:05:16,270 --> 00:05:19,860
are the three-headed dog

00:05:17,590 --> 00:05:22,900
The Devil's snare plant and the troll

00:05:19,860 --> 00:05:24,729
they act just like locked doors and

00:05:22,900 --> 00:05:27,070
giant walls with spikes on top of them

00:05:24,729 --> 00:05:28,889
they're meant to put off opportunistic

00:05:27,070 --> 00:05:31,810
attacks and by the defenders of time

00:05:28,889 --> 00:05:34,090
however they're also supposed to be

00:05:31,810 --> 00:05:36,430
difficult to penetrate this is not the

00:05:34,090 --> 00:05:37,630
case for any of the defenses to use here

00:05:36,430 --> 00:05:41,169
which all have widely known

00:05:37,630 --> 00:05:44,770
vulnerabilities and bypasses the

00:05:41,169 --> 00:05:46,150
three-headed dog is fierce and scary but

00:05:44,770 --> 00:05:48,639
it also goes to sleep whenever it is

00:05:46,150 --> 00:05:50,470
music this is common knowledge because

00:05:48,639 --> 00:05:54,419
the dog's owner Hagrid has terrible

00:05:50,470 --> 00:05:54,419
OPSEC and he told pretty much everybody

00:05:55,750 --> 00:06:00,050
The Devil's snare is a plant that will

00:05:58,370 --> 00:06:02,150
bind you tightly to stop you from going

00:06:00,050 --> 00:06:03,770
anywhere but it also requires in the

00:06:02,150 --> 00:06:05,930
presence of light which is a common fact

00:06:03,770 --> 00:06:08,450
that you can read in wizard textbooks

00:06:05,930 --> 00:06:09,830
for 11-year olds so if you bring a

00:06:08,450 --> 00:06:15,020
zipper or wand with you you're pretty

00:06:09,830 --> 00:06:16,820
set the troll is a troll it doesn't

00:06:15,020 --> 00:06:18,080
bathe it isn't very intelligent it

00:06:16,820 --> 00:06:21,260
probably says hurtful things on the

00:06:18,080 --> 00:06:22,730
Internet it's also vulnerable to

00:06:21,260 --> 00:06:25,940
becoming unconscious if it's hit on the

00:06:22,730 --> 00:06:28,100
head really hard also if it's not doubt

00:06:25,940 --> 00:06:29,480
if the troll doesn't reset itself or get

00:06:28,100 --> 00:06:32,360
replaced with a fresh troll

00:06:29,480 --> 00:06:34,430
so after Voldemort and his henchmen

00:06:32,360 --> 00:06:36,860
knock it out when Harry Ron and Hermione

00:06:34,430 --> 00:06:38,150
find it it is still knocked out and they

00:06:36,860 --> 00:06:40,520
can just walk around it

00:06:38,150 --> 00:06:42,530
your defenses should not ideally be one

00:06:40,520 --> 00:06:45,460
use only especially if there's nothing

00:06:42,530 --> 00:06:48,560
else reinforcing them at the same time

00:06:45,460 --> 00:06:50,360
finally before you even get to this set

00:06:48,560 --> 00:06:52,910
of chambers full of allegedly dark

00:06:50,360 --> 00:06:55,220
wizard grade magical defenses the whole

00:06:52,910 --> 00:06:57,139
thing is protected by a wooden door in a

00:06:55,220 --> 00:06:58,820
frequently used corridor and it opens

00:06:57,139 --> 00:07:00,590
with a very basic unlocking spell which

00:06:58,820 --> 00:07:03,650
they also teach in class to 11 year old

00:07:00,590 --> 00:07:05,180
Wizards it's so simple that our

00:07:03,650 --> 00:07:07,820
protagonist actually end up in this room

00:07:05,180 --> 00:07:09,350
by accident once you don't want to

00:07:07,820 --> 00:07:13,490
implement defenses that can be breached

00:07:09,350 --> 00:07:14,870
because an 11 year old panicked also the

00:07:13,490 --> 00:07:16,789
books are filled with portraits that

00:07:14,870 --> 00:07:18,350
enforce magical passwords why one of

00:07:16,789 --> 00:07:23,300
these wasn't used here is completely

00:07:18,350 --> 00:07:24,770
beyond me anyway next we run into a

00:07:23,300 --> 00:07:26,810
common pattern that's designed to stop

00:07:24,770 --> 00:07:28,940
attackers by being just annoying enough

00:07:26,810 --> 00:07:31,760
that most people will give up and go

00:07:28,940 --> 00:07:33,500
away this is done by treating sensitive

00:07:31,760 --> 00:07:36,050
information like a needle in a haystack

00:07:33,500 --> 00:07:38,479
it's also known as security through

00:07:36,050 --> 00:07:39,590
obscurity the info is right there but it

00:07:38,479 --> 00:07:42,050
will take patience to go through

00:07:39,590 --> 00:07:43,250
everything to find it you see this kind

00:07:42,050 --> 00:07:44,750
of thing a lot on the web where apps

00:07:43,250 --> 00:07:48,050
will make sensitive information or

00:07:44,750 --> 00:07:49,910
documents endpoints public but think of

00:07:48,050 --> 00:07:51,289
them weird names and hope that nobody

00:07:49,910 --> 00:07:53,720
will spend the time to try lots of

00:07:51,289 --> 00:07:55,669
different combinations to find them this

00:07:53,720 --> 00:07:57,260
is a commonly used method for hiding

00:07:55,669 --> 00:07:59,479
sensitive information because it's cheap

00:07:57,260 --> 00:08:01,280
and easy to implement but it's also not

00:07:59,479 --> 00:08:04,030
a very strong defense and it has some

00:08:01,280 --> 00:08:06,650
easy bypasses as you are about to hear

00:08:04,030 --> 00:08:07,470
we can see this pattern used in the case

00:08:06,650 --> 00:08:09,210
of the

00:08:07,470 --> 00:08:11,130
full of flying keys and also in the case

00:08:09,210 --> 00:08:14,460
of the final defense the mirror of

00:08:11,130 --> 00:08:17,280
Erised said Harry Ron and Hermione are

00:08:14,460 --> 00:08:19,500
able to access the flying key that opens

00:08:17,280 --> 00:08:20,640
the door to the next chamber by spotting

00:08:19,500 --> 00:08:22,140
it amongst the other keys that are

00:08:20,640 --> 00:08:25,230
flying around and then using a

00:08:22,140 --> 00:08:27,870
broomstick to grab it I know they fly up

00:08:25,230 --> 00:08:29,460
and grab it and because the room

00:08:27,870 --> 00:08:31,230
contains multiple broomsticks it allows

00:08:29,460 --> 00:08:33,390
for multiple threads of attack to run at

00:08:31,230 --> 00:08:35,039
the same time because more than one

00:08:33,390 --> 00:08:36,870
person could be in the air looking for

00:08:35,039 --> 00:08:40,289
the key at any point there's no

00:08:36,870 --> 00:08:41,849
rate-limiting in place here at all like

00:08:40,289 --> 00:08:44,159
in fact you know multiple simultaneous

00:08:41,849 --> 00:08:45,750
attempts are explicitly supported

00:08:44,159 --> 00:08:48,570
because the room has a bunch of extra

00:08:45,750 --> 00:08:51,350
broomsticks just lying around as a

00:08:48,570 --> 00:08:53,580
defender this doesn't make much sense

00:08:51,350 --> 00:08:56,160
it's the same thing with the mirror of

00:08:53,580 --> 00:08:58,230
Erised said the mirror contains the

00:08:56,160 --> 00:09:00,420
philosopher's stone the big MacGuffin

00:08:58,230 --> 00:09:02,190
that everybody wants but it will only

00:09:00,420 --> 00:09:05,330
release the stone to somebody who wants

00:09:02,190 --> 00:09:07,770
to find it but not use its powers

00:09:05,330 --> 00:09:10,170
Voldemort and his henchmen can't get the

00:09:07,770 --> 00:09:12,990
stone out of the mirror because they

00:09:10,170 --> 00:09:14,339
want to use it but Harry can't get the

00:09:12,990 --> 00:09:15,930
stone out of the mirror because he just

00:09:14,339 --> 00:09:17,360
wants to find it in order to stop

00:09:15,930 --> 00:09:19,440
Voldemort

00:09:17,360 --> 00:09:20,970
ironically Harry would have achieved his

00:09:19,440 --> 00:09:23,400
goal much more easily if he hadn't gone

00:09:20,970 --> 00:09:24,690
after the stone at all because it was

00:09:23,400 --> 00:09:26,360
his presence in the room that allowed

00:09:24,690 --> 00:09:28,800
the stone to be released from the mirror

00:09:26,360 --> 00:09:30,839
and once it was out the bad guys tried

00:09:28,800 --> 00:09:32,160
to grab it from him it was only

00:09:30,839 --> 00:09:34,800
Dumbledore turning up at the last minute

00:09:32,160 --> 00:09:36,330
that you know stopped anything like his

00:09:34,800 --> 00:09:39,410
server admin SSH again to do a

00:09:36,330 --> 00:09:42,149
last-minute patch and prod kind of thing

00:09:39,410 --> 00:09:43,519
and in the same way there wasn't any

00:09:42,149 --> 00:09:45,930
rate looming on this mirror

00:09:43,519 --> 00:09:48,029
theoretically Voldemort could have

00:09:45,930 --> 00:09:50,250
grabbed a mirror taking it out of the

00:09:48,029 --> 00:09:51,600
chambers and then set it up I mean maybe

00:09:50,250 --> 00:09:53,070
in Diagon Alley or something I don't

00:09:51,600 --> 00:09:55,019
know and then have a whole bunch of

00:09:53,070 --> 00:09:56,640
people look into it until one of them

00:09:55,019 --> 00:09:58,620
fulfilled its conditions so you know

00:09:56,640 --> 00:10:00,390
they wanted to find the stone but not

00:09:58,620 --> 00:10:04,050
use it and then he could have hit them

00:10:00,390 --> 00:10:08,579
over the head with a brick taking the

00:10:04,050 --> 00:10:09,959
stone just saying our last type of

00:10:08,579 --> 00:10:11,730
defense in front of the Philosopher's

00:10:09,959 --> 00:10:14,670
Stone is what amounts to a couple of

00:10:11,730 --> 00:10:17,700
CAPTCHA tests so capture stands for

00:10:14,670 --> 00:10:19,620
completely automated public Turing test

00:10:17,700 --> 00:10:21,660
to tell computers and humans apart and

00:10:19,620 --> 00:10:23,010
it usually looks like a bunch of warped

00:10:21,660 --> 00:10:26,730
text or more recently it gets you to

00:10:23,010 --> 00:10:28,740
Train self-driving cars it's supposed to

00:10:26,730 --> 00:10:30,480
be a task that only an attentive human

00:10:28,740 --> 00:10:32,190
would be able to complete in order to

00:10:30,480 --> 00:10:34,860
stop a bot or a script from using the

00:10:32,190 --> 00:10:36,839
feature that it's protecting these

00:10:34,860 --> 00:10:38,940
CAPTCHA style defenses are the enchanted

00:10:36,839 --> 00:10:42,600
chess game and the logic puzzle with the

00:10:38,940 --> 00:10:44,339
potions the enchanted chess game is just

00:10:42,600 --> 00:10:46,320
a game with chess except all the chess

00:10:44,339 --> 00:10:47,820
pieces are animate and will knock you

00:10:46,320 --> 00:10:50,339
out if you're standing in through the

00:10:47,820 --> 00:10:52,410
piece that gets taken knowledge of how

00:10:50,339 --> 00:10:54,180
to play chess is not secret it's just a

00:10:52,410 --> 00:10:56,730
task that they takes time and it takes

00:10:54,180 --> 00:10:57,959
concentration to complete it slows you

00:10:56,730 --> 00:10:59,190
down a little bit but it doesn't

00:10:57,959 --> 00:11:01,560
guarantee that you'll be stopped from

00:10:59,190 --> 00:11:03,899
getting to the other side in the same

00:11:01,560 --> 00:11:05,490
way the logic puzzle with the seven

00:11:03,899 --> 00:11:07,560
potions isn't something that can be

00:11:05,490 --> 00:11:09,270
brute forced easily first you have to

00:11:07,560 --> 00:11:10,770
solve the logic puzzle to determine the

00:11:09,270 --> 00:11:13,529
contents of each of the bottles of

00:11:10,770 --> 00:11:14,940
potions you get one chance to drink the

00:11:13,529 --> 00:11:16,740
potion out of the lineup that allow you

00:11:14,940 --> 00:11:19,140
to either go forward to the next chamber

00:11:16,740 --> 00:11:20,459
or back to the previous one so you need

00:11:19,140 --> 00:11:22,380
to make sure that you've made the right

00:11:20,459 --> 00:11:23,730
choice and if you're thinking you could

00:11:22,380 --> 00:11:26,190
just drink them all and Yolo your way

00:11:23,730 --> 00:11:27,930
through one of the bottles contains a

00:11:26,190 --> 00:11:31,320
poison that will kill you so it's not a

00:11:27,930 --> 00:11:33,000
good strategy this task like the chess

00:11:31,320 --> 00:11:34,800
game is designed to make sure that the

00:11:33,000 --> 00:11:37,890
person thinks about it but it isn't

00:11:34,800 --> 00:11:39,480
designed to be all that difficult both

00:11:37,890 --> 00:11:42,060
of these things are also designed to

00:11:39,480 --> 00:11:43,800
take time you can't just run through the

00:11:42,060 --> 00:11:45,990
room to the next thing you were forced

00:11:43,800 --> 00:11:48,779
to stop and engage on an intellectual

00:11:45,990 --> 00:11:50,370
level with what's going on obviously if

00:11:48,779 --> 00:11:52,199
you implement a defense that takes time

00:11:50,370 --> 00:11:52,720
to bypass you give yourself more time to

00:11:52,199 --> 00:11:55,569
respond

00:11:52,720 --> 00:11:57,100
to an attacker on the other hand these

00:11:55,569 --> 00:11:59,920
defenses aren't all that difficult to

00:11:57,100 --> 00:12:01,420
bypass all the information that's needed

00:11:59,920 --> 00:12:02,680
to get past them is either common

00:12:01,420 --> 00:12:04,269
knowledge in the case of how to play

00:12:02,680 --> 00:12:06,759
chess or it's right there in front of

00:12:04,269 --> 00:12:08,649
you in the case of the logic puzzle and

00:12:06,759 --> 00:12:10,930
much like real captures these things are

00:12:08,649 --> 00:12:12,220
incredibly annoying especially when you

00:12:10,930 --> 00:12:15,879
have to deal with them on your way in

00:12:12,220 --> 00:12:18,100
and you're a legitimate user the main

00:12:15,879 --> 00:12:20,589
point of employing defense-in-depth is

00:12:18,100 --> 00:12:23,019
to ensure that you have some time you

00:12:20,589 --> 00:12:25,300
buy time to respond to an attack if

00:12:23,019 --> 00:12:27,939
you're a defender the main downfall of

00:12:25,300 --> 00:12:29,769
all of the above mechanisms is that you

00:12:27,939 --> 00:12:31,089
can't buy time to respond to an attack

00:12:29,769 --> 00:12:32,949
if you don't even know the attack is

00:12:31,089 --> 00:12:34,110
happening which is exactly the case with

00:12:32,949 --> 00:12:36,519
the philosopher's stone

00:12:34,110 --> 00:12:38,709
there's no useful logging monitoring or

00:12:36,519 --> 00:12:41,230
alerting going on here at all none of

00:12:38,709 --> 00:12:43,209
these things no ghosts running around

00:12:41,230 --> 00:12:44,139
the hole screaming that someone broke

00:12:43,209 --> 00:12:46,360
into the room on the third floor

00:12:44,139 --> 00:12:47,889
corridor there's no owls showing up to

00:12:46,360 --> 00:12:50,250
deliver messages to the Wizards that are

00:12:47,889 --> 00:12:52,500
on call

00:12:50,250 --> 00:12:54,240
the ridiculous thing about this is that

00:12:52,500 --> 00:12:56,520
we know that the Wizarding World has

00:12:54,240 --> 00:12:58,440
access to spooky levels of monitoring

00:12:56,520 --> 00:13:00,000
and alerting because any time an

00:12:58,440 --> 00:13:01,560
underage wizard does magic outside of

00:13:00,000 --> 00:13:04,320
Hogwarts they get an owl with a letter

00:13:01,560 --> 00:13:05,880
about it immediately like right down to

00:13:04,320 --> 00:13:08,520
the timestamp in the name of the spell

00:13:05,880 --> 00:13:09,840
that was performed this happens to Harry

00:13:08,520 --> 00:13:11,670
Potter at the start of the Chamber of

00:13:09,840 --> 00:13:13,500
Secrets at the start of the Prisoner of

00:13:11,670 --> 00:13:15,420
Azkaban and at the start of the order of

00:13:13,500 --> 00:13:17,310
a Phoenix later in the books

00:13:15,420 --> 00:13:18,810
Voldemort also gets alerts every time

00:13:17,310 --> 00:13:20,250
somebody says his name which I'm

00:13:18,810 --> 00:13:25,320
guessing is where Google Alerts got the

00:13:20,250 --> 00:13:26,880
idea for Dumbledore not to have

00:13:25,320 --> 00:13:29,220
implemented anything like this is a

00:13:26,880 --> 00:13:31,110
serious oversight in the protection of

00:13:29,220 --> 00:13:33,810
the philosopher's stone just because he

00:13:31,110 --> 00:13:35,670
turned up right at the end to save Harry

00:13:33,810 --> 00:13:37,530
from being killed by Lord Voldemort it

00:13:35,670 --> 00:13:39,510
doesn't make him a hero just makes him

00:13:37,530 --> 00:13:41,720
kind of a negligent ops engineer who got

00:13:39,510 --> 00:13:41,720
lucky

00:13:42,860 --> 00:13:47,280
Dumbledore should have been waiting for

00:13:45,240 --> 00:13:49,770
Voldemort before he even got past the

00:13:47,280 --> 00:13:52,980
first room not to mention that because

00:13:49,770 --> 00:13:55,710
of this design the design we had before

00:13:52,980 --> 00:13:58,470
he had to fight past all his own

00:13:55,710 --> 00:14:00,300
defenses in the same way in order to get

00:13:58,470 --> 00:14:01,740
to the stone just like any old attacker

00:14:00,300 --> 00:14:03,860
which doesn't seem like the most

00:14:01,740 --> 00:14:06,690
efficient way to do things

00:14:03,860 --> 00:14:09,360
so scorecard for the defenses on the

00:14:06,690 --> 00:14:11,580
Philosopher's Stone may be a 4 out of 10

00:14:09,360 --> 00:14:14,010
okay attempt at using defense and depth

00:14:11,580 --> 00:14:16,020
but it uses multiple known vulnerable

00:14:14,010 --> 00:14:19,350
defenses and it's severely let down by a

00:14:16,020 --> 00:14:22,460
lack of monitoring and alerting let's

00:14:19,350 --> 00:14:22,460
move on to look at the Goblet of Fire

00:14:25,340 --> 00:14:33,180
yeah it's a got little water the Goblet

00:14:30,720 --> 00:14:35,340
of Fire is a magical cup with the job of

00:14:33,180 --> 00:14:37,320
deciding which students will compete in

00:14:35,340 --> 00:14:39,390
the Triwizard Tournament which is an

00:14:37,320 --> 00:14:41,160
inter-school magical competition it

00:14:39,390 --> 00:14:43,770
appears in the book Harry Potter in a

00:14:41,160 --> 00:14:45,660
Goblet of Fire students can write their

00:14:43,770 --> 00:14:47,550
name and this school on a slip of paper

00:14:45,660 --> 00:14:49,320
that goes into the cup and the

00:14:47,550 --> 00:14:51,000
submissions are open for 24 hours and

00:14:49,320 --> 00:14:53,220
then there's a ceremony where the cup

00:14:51,000 --> 00:14:55,500
will return the names of one candidate

00:14:53,220 --> 00:14:56,670
per school and then these candidates are

00:14:55,500 --> 00:15:00,930
bound to compete in the Triwizard

00:14:56,670 --> 00:15:02,610
Tournament it was decided that only

00:15:00,930 --> 00:15:03,490
students the only students who could

00:15:02,610 --> 00:15:06,240
compete in the tribe

00:15:03,490 --> 00:15:09,300
the tournament had to be aged 17 or over

00:15:06,240 --> 00:15:11,500
because the competition was so dangerous

00:15:09,300 --> 00:15:13,089
the only other rule for selection of the

00:15:11,500 --> 00:15:14,740
candidates of the goblet was that there

00:15:13,089 --> 00:15:15,339
should be only one candidate chosen per

00:15:14,740 --> 00:15:17,830
school

00:15:15,339 --> 00:15:19,330
so traditionally three schools compete

00:15:17,830 --> 00:15:21,940
in the Triwizard Tournament hence the

00:15:19,330 --> 00:15:23,920
name three candidates the plot of the

00:15:21,940 --> 00:15:26,050
Goblet of Fire revolves around the fact

00:15:23,920 --> 00:15:27,940
that 14-year old Harry Potter is

00:15:26,050 --> 00:15:30,790
mysteriously chosen to be the fourth

00:15:27,940 --> 00:15:33,040
tribe as a champion how this happened

00:15:30,790 --> 00:15:34,360
when Harry was under the age of 17 and a

00:15:33,040 --> 00:15:36,670
champion from his school had already

00:15:34,360 --> 00:15:38,380
been selected is revealed at the end of

00:15:36,670 --> 00:15:39,760
the story and I'll dig into the

00:15:38,380 --> 00:15:40,690
vulnerabilities they're exploited there

00:15:39,760 --> 00:15:43,240
in just a second

00:15:40,690 --> 00:15:48,310
firstly let's have a look at the goblets

00:15:43,240 --> 00:15:49,839
configuration and security settings we

00:15:48,310 --> 00:15:51,250
aren't given much information about how

00:15:49,839 --> 00:15:53,440
the Goblet makes its decisions about

00:15:51,250 --> 00:15:54,880
tribes and candidates but we do know

00:15:53,440 --> 00:15:57,520
that Dumbledore put one defense

00:15:54,880 --> 00:16:00,430
mechanism in place around the Goblet an

00:15:57,520 --> 00:16:02,800
age line this was supposed to stop

00:16:00,430 --> 00:16:04,899
anybody under the age of 17 from

00:16:02,800 --> 00:16:07,540
entering the space and putting the paper

00:16:04,899 --> 00:16:10,329
with their name into the Goblet the age

00:16:07,540 --> 00:16:12,430
line is a literal line on the ground can

00:16:10,329 --> 00:16:14,320
only be crossed by people aged 17 and

00:16:12,430 --> 00:16:15,610
over otherwise there's nothing to stop

00:16:14,320 --> 00:16:17,529
anybody at all from approaching the

00:16:15,610 --> 00:16:18,790
Goblet which is left unguarded for 24

00:16:17,529 --> 00:16:21,130
hours in the middle of the Great Hall at

00:16:18,790 --> 00:16:22,770
Hogwarts no monitoring and alerting it's

00:16:21,130 --> 00:16:25,630
fine

00:16:22,770 --> 00:16:27,970
Dumbledore said he did this to ensure

00:16:25,630 --> 00:16:32,020
that no underage student yields to

00:16:27,970 --> 00:16:34,630
temptation but people try to bypass this

00:16:32,020 --> 00:16:37,000
control mechanism almost immediately in

00:16:34,630 --> 00:16:39,010
the 24 hours it's open we learned that

00:16:37,000 --> 00:16:40,540
for students try to trick the age line

00:16:39,010 --> 00:16:42,520
by taking an aging potion to make

00:16:40,540 --> 00:16:44,110
themselves several months older this

00:16:42,520 --> 00:16:47,020
doesn't work and the spell throws them

00:16:44,110 --> 00:16:49,089
out of the ring immediately a successful

00:16:47,020 --> 00:16:51,550
age line bypass is made on behalf of

00:16:49,089 --> 00:16:53,770
Lord Voldemort by Barty Crouch jr.

00:16:51,550 --> 00:16:55,540
in disguise as mad-eye moody it makes

00:16:53,770 --> 00:16:58,089
sense if you've read the book anyway

00:16:55,540 --> 00:16:59,770
that's one of the Hogwarts teaches he

00:16:58,089 --> 00:17:02,079
enters Harry Potter's name into the

00:16:59,770 --> 00:17:03,550
Goblet and is successful at having Harry

00:17:02,079 --> 00:17:05,380
chosen as the fourth Triwizard champion

00:17:03,550 --> 00:17:08,850
which is part of Voldemort Eagle plan

00:17:05,380 --> 00:17:08,850
for that year

00:17:12,549 --> 00:17:18,559
so crouched so convinced the protections

00:17:15,949 --> 00:17:21,110
on the goblet in two ways firstly

00:17:18,559 --> 00:17:23,120
crouched himself is over the age of 17

00:17:21,110 --> 00:17:24,919
there's nothing in the books to say that

00:17:23,120 --> 00:17:26,689
a person over the age of 17 couldn't

00:17:24,919 --> 00:17:28,339
enter someone else's name into the

00:17:26,689 --> 00:17:29,809
Goblet it's not clear if any of the

00:17:28,339 --> 00:17:31,190
other students tried this but if they

00:17:29,809 --> 00:17:34,190
did we what they weren't chosen so we

00:17:31,190 --> 00:17:36,679
don't know about it going on what we do

00:17:34,190 --> 00:17:38,870
know about crouches hack the age line

00:17:36,679 --> 00:17:40,669
was only checking if the person who

00:17:38,870 --> 00:17:42,019
crossed it was over the age of 17 it

00:17:40,669 --> 00:17:44,029
didn't check if that person was adding

00:17:42,019 --> 00:17:47,090
their own name to the Goblet or someone

00:17:44,029 --> 00:17:50,120
else's the authorization of app requests

00:17:47,090 --> 00:17:51,559
is important especially when those

00:17:50,120 --> 00:17:55,669
requests are making changes to a

00:17:51,559 --> 00:17:58,070
database the Goblet didn't have any kind

00:17:55,669 --> 00:17:59,750
of authorization or authentication

00:17:58,070 --> 00:18:04,429
protections whatsoever which is a

00:17:59,750 --> 00:18:06,379
serious oversight secondly Crouch uses a

00:18:04,429 --> 00:18:07,940
confundus charm on the Goblet to trick

00:18:06,379 --> 00:18:10,009
it into thinking that there is a fourth

00:18:07,940 --> 00:18:12,250
competing school in the competition and

00:18:10,009 --> 00:18:14,629
that Harry Potter belongs in that school

00:18:12,250 --> 00:18:16,940
because Harry Potter is the only

00:18:14,629 --> 00:18:18,759
candidate for the 4th school he's chosen

00:18:16,940 --> 00:18:21,289
to compete in the Triwizard Tournament

00:18:18,759 --> 00:18:23,539
there also don't appear to be any data

00:18:21,289 --> 00:18:25,820
injection defenses on the Goblet at all

00:18:23,539 --> 00:18:26,379
or if there are they're not very strong

00:18:25,820 --> 00:18:29,570
ones

00:18:26,379 --> 00:18:30,950
if the Goblet had validated the names of

00:18:29,570 --> 00:18:33,529
the schools that was submitted against

00:18:30,950 --> 00:18:35,299
his own long list of schools it may have

00:18:33,529 --> 00:18:36,590
been more likely to reject the presence

00:18:35,299 --> 00:18:37,909
of the fourth school and then how he

00:18:36,590 --> 00:18:41,269
wouldn't have been guaranteed to be

00:18:37,909 --> 00:18:42,620
chosen also the data that was entered

00:18:41,269 --> 00:18:45,649
into the Goblet should have been

00:18:42,620 --> 00:18:47,809
sanitized before it was at it by the

00:18:45,649 --> 00:18:49,850
Goblet and then again for bad data

00:18:47,809 --> 00:18:52,009
before the final vote was rung this

00:18:49,850 --> 00:18:54,169
could include stripping out data with

00:18:52,009 --> 00:18:56,149
the names of bogus schools as well as

00:18:54,169 --> 00:18:57,379
matching and removing names that come

00:18:56,149 --> 00:19:00,529
corresponding to students that were

00:18:57,379 --> 00:19:02,389
under the age of 17 so the long and

00:19:00,529 --> 00:19:04,580
short of this is that you should never

00:19:02,389 --> 00:19:07,429
trust user input into your app or your

00:19:04,580 --> 00:19:08,690
Goblet of Fire your user might be legit

00:19:07,429 --> 00:19:11,919
or they could be submitting post

00:19:08,690 --> 00:19:11,919
requests on behalf of Lord Voldemort

00:19:12,060 --> 00:19:16,570
scorecard for the defense's on the

00:19:14,080 --> 00:19:18,190
Goblet of Fire two out of ten the age

00:19:16,570 --> 00:19:19,570
line worked against some basic attacks

00:19:18,190 --> 00:19:21,460
but without authorization and

00:19:19,570 --> 00:19:23,170
authentication and without validating

00:19:21,460 --> 00:19:24,790
user input it was vulnerable to data

00:19:23,170 --> 00:19:29,980
injection and to the plots of evil

00:19:24,790 --> 00:19:31,450
wizards for our last case study we will

00:19:29,980 --> 00:19:33,100
examine the protections that Dumbledore

00:19:31,450 --> 00:19:37,750
placed around number 12 Grimmauld place

00:19:33,100 --> 00:19:39,970
in London this address is the house of

00:19:37,750 --> 00:19:41,770
Harry Potter's godfather Sirius Black

00:19:39,970 --> 00:19:43,450
for a few years it acted as the

00:19:41,770 --> 00:19:46,110
headquarters of the anti Voldemort

00:19:43,450 --> 00:19:49,510
activist group the order of the Phoenix

00:19:46,110 --> 00:19:51,070
because of its status is order HQ the

00:19:49,510 --> 00:19:53,440
house became a target for dark wizards

00:19:51,070 --> 00:19:54,640
pretty much immediately lots of

00:19:53,440 --> 00:19:56,710
prominent members of the order that

00:19:54,640 --> 00:19:58,450
included Dumbledore and Severus Snape

00:19:56,710 --> 00:20:00,610
and Harry Potter were known to spend

00:19:58,450 --> 00:20:02,170
time there it's made it pretty important

00:20:00,610 --> 00:20:03,790
to defend properly so the order looked

00:20:02,170 --> 00:20:05,500
to its leader Dumbledore

00:20:03,790 --> 00:20:08,110
to get to harden the configuration of

00:20:05,500 --> 00:20:10,420
the house as much as possible the main

00:20:08,110 --> 00:20:12,880
defense that number-12 had going for it

00:20:10,420 --> 00:20:14,860
was the fidelia's charm in the words of

00:20:12,880 --> 00:20:17,110
one of the Hogwarts teaches the

00:20:14,860 --> 00:20:19,390
fidelia's charm is an immensely complex

00:20:17,110 --> 00:20:21,910
spell involving the magical concealment

00:20:19,390 --> 00:20:24,730
of a secret inside a single living the

00:20:21,910 --> 00:20:27,040
soul the information is hidden inside

00:20:24,730 --> 00:20:30,130
the chosen person or secret keeper and

00:20:27,040 --> 00:20:31,840
is henceforth impossible to find unless

00:20:30,130 --> 00:20:35,080
of course the secret keeper chooses to

00:20:31,840 --> 00:20:36,730
divulge it the secret in this case was

00:20:35,080 --> 00:20:39,280
the location of the headquarters of the

00:20:36,730 --> 00:20:41,080
order of the Phoenix Dumbledore was the

00:20:39,280 --> 00:20:43,240
secret keeper for this particular spell

00:20:41,080 --> 00:20:45,010
which effectively meant he was the only

00:20:43,240 --> 00:20:47,740
one who could tell someone where the

00:20:45,010 --> 00:20:49,630
headquarters was once someone else knew

00:20:47,740 --> 00:20:51,280
about it they were unable to pass that

00:20:49,630 --> 00:20:53,890
knowledge on even if they were tortured

00:20:51,280 --> 00:20:55,690
or coerced the main problem with this

00:20:53,890 --> 00:20:57,670
protection is that the fidelia's charm

00:20:55,690 --> 00:21:00,280
has a single point of failure

00:20:57,670 --> 00:21:02,290
it's the secret keeper that person has

00:21:00,280 --> 00:21:05,740
to be the one to tell everybody who

00:21:02,290 --> 00:21:07,630
needs to know the secret however Harry

00:21:05,740 --> 00:21:09,760
Potter learns about number 12 Grimmauld

00:21:07,630 --> 00:21:11,770
place because Dumbledore writes the

00:21:09,760 --> 00:21:13,540
secret down on a piece of paper and

00:21:11,770 --> 00:21:16,150
hands it to someone else

00:21:13,540 --> 00:21:18,610
who then passes it to Harry

00:21:16,150 --> 00:21:22,150
this is an extremely insecure method of

00:21:18,610 --> 00:21:23,980
transport this note could have been

00:21:22,150 --> 00:21:28,750
accidentally dropped unread by anyone it

00:21:23,980 --> 00:21:30,250
was in plain text the information is the

00:21:28,750 --> 00:21:32,050
information on it's only cat secured

00:21:30,250 --> 00:21:33,850
after Harry reads it because their notes

00:21:32,050 --> 00:21:35,860
set on fire by the person who gave it to

00:21:33,850 --> 00:21:37,300
him if they hadn't done that presumably

00:21:35,860 --> 00:21:39,220
the note could have been handed around

00:21:37,300 --> 00:21:40,890
any number of people and the secret

00:21:39,220 --> 00:21:42,970
could have been shared multiple times

00:21:40,890 --> 00:21:46,330
Dumbledore clearly had not heard about

00:21:42,970 --> 00:21:47,890
transport encryption the other problem

00:21:46,330 --> 00:21:50,020
with the secret keeper method of keeping

00:21:47,890 --> 00:21:52,360
number-12 safe is that when the secret

00:21:50,020 --> 00:21:54,700
keeper dies anybody who was told the

00:21:52,360 --> 00:21:57,400
secret automatically becomes the secret

00:21:54,700 --> 00:21:58,990
keeper themselves the order of the

00:21:57,400 --> 00:22:01,180
Phoenix runs into this problem after

00:21:58,990 --> 00:22:02,640
Dumbledore dies in Harry Potter and the

00:22:01,180 --> 00:22:04,660
Deathly Hallows the protagonist

00:22:02,640 --> 00:22:07,660
explicitly have to deal with the fallout

00:22:04,660 --> 00:22:09,340
from this mr. Weasley had explained that

00:22:07,660 --> 00:22:11,530
after the death of Dumbledore their

00:22:09,340 --> 00:22:13,300
secret keeper each of the people to whom

00:22:11,530 --> 00:22:15,670
Dumbledore had confided grim old places

00:22:13,300 --> 00:22:18,220
location had become a secret keeper in

00:22:15,670 --> 00:22:20,410
turn and as there are around 20 of us

00:22:18,220 --> 00:22:26,700
that greatly dilutes the power of the

00:22:20,410 --> 00:22:26,700
fidelia's charm this is not entirely

00:22:34,480 --> 00:22:39,320
this is not entirely unlike somebody

00:22:37,039 --> 00:22:41,690
quitting their job and checking the AWS

00:22:39,320 --> 00:22:45,950
Keys in to get at 5 p.m. on their last

00:22:41,690 --> 00:22:47,659
day shed keys are weak keys because the

00:22:45,950 --> 00:22:49,639
more people who know the secret and the

00:22:47,659 --> 00:22:51,200
more machines that store it the more

00:22:49,639 --> 00:22:52,909
likely it is that someone on authorized

00:22:51,200 --> 00:22:55,399
is going to obtain the secret and use it

00:22:52,909 --> 00:22:57,200
to mess up your whole operation in the

00:22:55,399 --> 00:22:58,639
worst case if this happened to a

00:22:57,200 --> 00:23:00,200
software key we could revoke the

00:22:58,639 --> 00:23:02,360
original key and rotate it to a new

00:23:00,200 --> 00:23:03,710
secret value however the fidelia's charm

00:23:02,360 --> 00:23:07,909
doesn't appear to have the concept of

00:23:03,710 --> 00:23:09,799
key rotation there's no way to undo the

00:23:07,909 --> 00:23:12,139
secret keeper spell unless everybody who

00:23:09,799 --> 00:23:13,940
knows it dies or the house that it

00:23:12,139 --> 00:23:15,169
applies to gets knocked down this is

00:23:13,940 --> 00:23:16,970
pretty much the equivalent of getting

00:23:15,169 --> 00:23:18,409
hacked and throwing your hands up and

00:23:16,970 --> 00:23:23,509
buying a new domain name and starting

00:23:18,409 --> 00:23:24,919
over also we learn over the course of

00:23:23,509 --> 00:23:27,320
the last few books that Dumbledore

00:23:24,919 --> 00:23:30,350
strongly suspected that he was going to

00:23:27,320 --> 00:23:31,970
die soon knowing this he still set

00:23:30,350 --> 00:23:33,889
himself up as a single point of failure

00:23:31,970 --> 00:23:36,740
for the safety of the headquarters of

00:23:33,889 --> 00:23:41,570
the anti Voldemort movement this is a

00:23:36,740 --> 00:23:42,710
jerk move no points to Gryffindor if you

00:23:41,570 --> 00:23:44,899
know that you're going to leave a

00:23:42,710 --> 00:23:46,759
project under a decent person you don't

00:23:44,899 --> 00:23:48,379
make everything depend on your keys and

00:23:46,759 --> 00:23:50,059
then weaken them all with no

00:23:48,379 --> 00:23:52,820
alternatives and no backups you do

00:23:50,059 --> 00:23:55,129
handovers you plan for disaster recovery

00:23:52,820 --> 00:23:57,440
scenarios and if you're actively at war

00:23:55,129 --> 00:23:59,090
with literally Lord Voldemort you don't

00:23:57,440 --> 00:24:00,980
just leave everybody to scramble to find

00:23:59,090 --> 00:24:02,960
a new headquarters if you die unless

00:24:00,980 --> 00:24:04,950
you're a jerk yeah I'm calling

00:24:02,960 --> 00:24:10,380
Dumbledore a jerk

00:24:04,950 --> 00:24:12,210
I give this message zero out of ten no

00:24:10,380 --> 00:24:13,770
disaster recovery options secrets can

00:24:12,210 --> 00:24:17,150
only be transmitted in securely keys

00:24:13,770 --> 00:24:20,640
can't be revoked nonsense

00:24:17,150 --> 00:24:22,620
all right so if Dumbledore thinking like

00:24:20,640 --> 00:24:24,690
a good wizard was unable to get into the

00:24:22,620 --> 00:24:26,310
mindset of a Dark Wizard how do they

00:24:24,690 --> 00:24:28,560
think and how does that help us do

00:24:26,310 --> 00:24:33,110
better let's compare the previous case

00:24:28,560 --> 00:24:33,110
studies to Voldemort security model

00:24:36,440 --> 00:24:40,920
before the start of the Harry Potter

00:24:38,490 --> 00:24:42,090
books even before his death eaters start

00:24:40,920 --> 00:24:45,600
up really got off the ground

00:24:42,090 --> 00:24:47,760
Voldemort Voldemort decided that he

00:24:45,600 --> 00:24:49,050
needed to make backups so that he could

00:24:47,760 --> 00:24:51,990
recover himself if something bad

00:24:49,050 --> 00:24:53,520
happened and so that he could survive

00:24:51,990 --> 00:24:55,640
attempts by all the Wizards to knock him

00:24:53,520 --> 00:24:58,890
off line he did this by creating

00:24:55,640 --> 00:25:00,600
Horcruxes here's how one Hogwarts

00:24:58,890 --> 00:25:02,250
professor describes Horcruxes

00:25:00,600 --> 00:25:04,170
well you split your soul you see and

00:25:02,250 --> 00:25:06,540
hide part of it in an object outside the

00:25:04,170 --> 00:25:08,880
body then even if one's body is attacked

00:25:06,540 --> 00:25:10,530
or destroyed one cannot die if a part of

00:25:08,880 --> 00:25:12,470
the soul remains earthbound and

00:25:10,530 --> 00:25:14,940
undamaged

00:25:12,470 --> 00:25:16,380
Voldemort decided to create seven

00:25:14,940 --> 00:25:17,910
Horcruxes because he knew that if

00:25:16,380 --> 00:25:19,650
someone tried to murder him and knock

00:25:17,910 --> 00:25:22,380
one of his availability zones offline

00:25:19,650 --> 00:25:23,550
he could just failover to any of the

00:25:22,380 --> 00:25:27,870
other ones while he resolved the

00:25:23,550 --> 00:25:29,340
incident he also decided that these

00:25:27,870 --> 00:25:31,590
Horcruxes needed to be stored in

00:25:29,340 --> 00:25:32,880
geographically different places would

00:25:31,590 --> 00:25:35,460
make it more difficult to take all of

00:25:32,880 --> 00:25:37,110
them out at once so he went to a lot of

00:25:35,460 --> 00:25:38,970
effort to ensure that they were placed

00:25:37,110 --> 00:25:42,450
safely out of the way in a wide range of

00:25:38,970 --> 00:25:44,040
locations the main witness in the

00:25:42,450 --> 00:25:45,930
Horcrux method which was the thing

00:25:44,040 --> 00:25:47,940
ultimately used to destroy Voldemort in

00:25:45,930 --> 00:25:49,470
the end is that he used personally

00:25:47,940 --> 00:25:51,440
relevant information when he created

00:25:49,470 --> 00:25:53,870
them

00:25:51,440 --> 00:25:55,309
he chose artifacts for the Horcruxes

00:25:53,870 --> 00:25:56,899
that were significant to him and could

00:25:55,309 --> 00:25:57,919
be identified with some strategic

00:25:56,899 --> 00:25:59,990
intelligence gathering

00:25:57,919 --> 00:26:02,179
this meant that Dumbledore was able to

00:25:59,990 --> 00:26:04,279
deduce the existence of the Horcruxes

00:26:02,179 --> 00:26:06,080
and what they were likely to be and then

00:26:04,279 --> 00:26:08,720
pass that information on to Harry so he

00:26:06,080 --> 00:26:10,460
could carry on destroying them the other

00:26:08,720 --> 00:26:12,049
problem with Voldemort system was that

00:26:10,460 --> 00:26:13,279
despite having mastered the art of

00:26:12,049 --> 00:26:15,409
monitoring and alerting in his

00:26:13,279 --> 00:26:19,309
day-to-day operations he had no alerting

00:26:15,409 --> 00:26:21,200
on the Horcrux infrastructure he set up

00:26:19,309 --> 00:26:22,519
a lot of defenses around the Horcruxes

00:26:21,200 --> 00:26:24,830
and just assumed that they would defend

00:26:22,519 --> 00:26:28,190
themselves this is not a good security

00:26:24,830 --> 00:26:29,539
posture so this lack of monitoring and

00:26:28,190 --> 00:26:31,340
alerting meant that it was easy for

00:26:29,539 --> 00:26:33,350
Harry and Dumbledore to systematically

00:26:31,340 --> 00:26:35,389
hunt all the Horcruxes down and destroy

00:26:33,350 --> 00:26:36,740
them without Voldemort noticing even

00:26:35,389 --> 00:26:39,769
though he had alerts going on for all

00:26:36,740 --> 00:26:41,899
other kinds of important things but

00:26:39,769 --> 00:26:43,909
overall the Horcrux plan worked pretty

00:26:41,899 --> 00:26:45,950
damn well it took a team of dedicated

00:26:43,909 --> 00:26:48,129
opponents a lot of time and effort to

00:26:45,950 --> 00:26:50,929
find them and destroy them all

00:26:48,129 --> 00:26:52,970
ultimately the time that Voldemort spent

00:26:50,929 --> 00:26:55,009
drawing up a disaster recovery plan and

00:26:52,970 --> 00:26:56,750
creating backups and segregating storage

00:26:55,009 --> 00:26:58,970
meant that he managed to keep the bare

00:26:56,750 --> 00:27:00,710
minimum alive and running for 14 years

00:26:58,970 --> 00:27:02,120
even after the massive outage he

00:27:00,710 --> 00:27:05,059
experienced when he tried to kill baby

00:27:02,120 --> 00:27:06,590
Harry and eventually he was able to

00:27:05,059 --> 00:27:11,659
fully restore from backup at the end of

00:27:06,590 --> 00:27:13,429
the Goblet of Fire so my score huh seven

00:27:11,659 --> 00:27:15,259
and a half points out of ten good use of

00:27:13,429 --> 00:27:16,909
disaster recovery a redundancy planning

00:27:15,259 --> 00:27:18,860
infrastructure segment segregation

00:27:16,909 --> 00:27:21,500
monitoring and alerting needs some work

00:27:18,860 --> 00:27:25,389
and personal details should not be used

00:27:21,500 --> 00:27:25,389
as keys to secure important information

00:27:28,290 --> 00:27:34,650
all right so why is Voldemort more

00:27:32,400 --> 00:27:38,550
thorough at planning defenses than

00:27:34,650 --> 00:27:40,320
Dumbledore in the end Harry Potter and

00:27:38,550 --> 00:27:41,940
the good guys end up winning against him

00:27:40,320 --> 00:27:44,400
but the cost is huge

00:27:41,940 --> 00:27:46,620
and the losses are great part of why

00:27:44,400 --> 00:27:48,780
this happens is because Voldemort and

00:27:46,620 --> 00:27:50,760
his followers are driven by extremely

00:27:48,780 --> 00:27:51,840
different motivations and they have

00:27:50,760 --> 00:27:54,480
different standards of right and wrong

00:27:51,840 --> 00:27:55,830
than most wizards do Dumbledore

00:27:54,480 --> 00:27:58,080
generally just wants to eat sherbet

00:27:55,830 --> 00:28:00,330
lemons and hang out with his pet Phoenix

00:27:58,080 --> 00:28:02,090
and help young witches and wizards

00:28:00,330 --> 00:28:04,710
become their best selves

00:28:02,090 --> 00:28:08,100
Voldemort wants to start a race war and

00:28:04,710 --> 00:28:09,840
literally take over the world he's got

00:28:08,100 --> 00:28:12,270
goals that most Wizards quite reasonably

00:28:09,840 --> 00:28:14,370
don't so he's going to consider use

00:28:12,270 --> 00:28:16,640
cases and methods that most Wizards

00:28:14,370 --> 00:28:19,560
wouldn't in order to get that stuff done

00:28:16,640 --> 00:28:21,210
with regard to attacking things

00:28:19,560 --> 00:28:22,920
Voldemort tries all kinds of weird

00:28:21,210 --> 00:28:26,040
out-of-the-box often unethical methods

00:28:22,920 --> 00:28:27,870
for achieving his ends if you're a

00:28:26,040 --> 00:28:29,220
wizard who generally wants to do good

00:28:27,870 --> 00:28:30,960
and make other people happy

00:28:29,220 --> 00:28:32,250
getting into the frame of mind of

00:28:30,960 --> 00:28:34,590
somebody who wants to try to murder a

00:28:32,250 --> 00:28:39,000
baby in cold blood it's gonna take a bit

00:28:34,590 --> 00:28:40,920
of work but it is worth that mental

00:28:39,000 --> 00:28:42,180
exercise if you want to plan defenses

00:28:40,920 --> 00:28:43,770
against the kinds of strange and

00:28:42,180 --> 00:28:45,390
disturbing things that an opponent might

00:28:43,770 --> 00:28:47,160
actually try to do to get the

00:28:45,390 --> 00:28:48,330
information that you have and if you

00:28:47,160 --> 00:28:51,540
want to understand the things that

00:28:48,330 --> 00:28:54,150
motivate them the other reason that

00:28:51,540 --> 00:28:55,830
Voldemort's defenses are more thorough

00:28:54,150 --> 00:28:57,690
than double-doors is because Voldemort

00:28:55,830 --> 00:29:00,200
is a paranoid person who trusts nobody

00:28:57,690 --> 00:29:02,840
and has no friends

00:29:00,200 --> 00:29:04,760
he knows most people are against his

00:29:02,840 --> 00:29:06,500
plans and the only person who's going to

00:29:04,760 --> 00:29:08,059
help him out is himself which is why he

00:29:06,500 --> 00:29:10,630
starts thinking about making Horcruxes

00:29:08,059 --> 00:29:13,519
while he is still at school

00:29:10,630 --> 00:29:15,289
conversely Dumbledore leans towards

00:29:13,519 --> 00:29:17,570
creating groups have confidence and

00:29:15,289 --> 00:29:19,610
building teams and trusting others with

00:29:17,570 --> 00:29:20,740
important tasks there's nothing wrong

00:29:19,610 --> 00:29:23,000
with wanting to do any of these things

00:29:20,740 --> 00:29:24,289
the best places I've ever worked have

00:29:23,000 --> 00:29:25,460
been on strong teams that trust each

00:29:24,289 --> 00:29:27,110
other to do the right thing and give

00:29:25,460 --> 00:29:29,899
each other mutual support that makes

00:29:27,110 --> 00:29:32,419
sense but for your apps outward-facing

00:29:29,899 --> 00:29:33,889
defenses you will develop very strong

00:29:32,419 --> 00:29:36,289
ones if you think that everybody is out

00:29:33,889 --> 00:29:37,760
to get you you'll plant even better

00:29:36,289 --> 00:29:39,200
defenses if you can think of the types

00:29:37,760 --> 00:29:41,240
of groups that might be out to get you

00:29:39,200 --> 00:29:43,789
and what might motivate them to try and

00:29:41,240 --> 00:29:45,500
attack you you'll do even even better if

00:29:43,789 --> 00:29:46,490
you then assign likelihoods to each of

00:29:45,500 --> 00:29:48,610
these risks and then prioritize

00:29:46,490 --> 00:29:50,929
defending against them accordingly

00:29:48,610 --> 00:29:53,419
failovers backups disaster recovery

00:29:50,929 --> 00:29:55,549
plans are all the products of worst-case

00:29:53,419 --> 00:29:57,350
thinking and we always hope we won't

00:29:55,549 --> 00:29:59,120
need them but when we do we're glad to

00:29:57,350 --> 00:30:00,289
have them am I glad we took the time to

00:29:59,120 --> 00:30:08,389
think about what to do in a horrible

00:30:00,289 --> 00:30:11,090
situation so what about django app

00:30:08,389 --> 00:30:12,769
security is a tricky space and those of

00:30:11,090 --> 00:30:14,809
you tasked with defending your apps have

00:30:12,769 --> 00:30:17,480
an extra hard job trying to anticipate

00:30:14,809 --> 00:30:18,799
the work of attackers luckily for you

00:30:17,480 --> 00:30:20,539
because you are now at a django

00:30:18,799 --> 00:30:21,799
conference you already know that there's

00:30:20,539 --> 00:30:24,110
a framework that helps you get a lot of

00:30:21,799 --> 00:30:25,789
this stuff right out of the box it

00:30:24,110 --> 00:30:27,110
doesn't take away the need to plan for

00:30:25,789 --> 00:30:28,789
failure though and it doesn't take away

00:30:27,110 --> 00:30:30,980
the need to think like an attacker but

00:30:28,789 --> 00:30:34,220
it gives you most of the right tools to

00:30:30,980 --> 00:30:37,700
build strong defenses my expertise is

00:30:34,220 --> 00:30:41,510
mostly in paranoia and literature about

00:30:37,700 --> 00:30:43,220
wizards but for the Django stuff there

00:30:41,510 --> 00:30:46,580
are a few places that I want to refer

00:30:43,220 --> 00:30:48,529
you James Bennett of the Django security

00:30:46,580 --> 00:30:50,720
team gave a three-hour long tutorial on

00:30:48,529 --> 00:30:52,760
secure web dev at gent with Django at

00:30:50,720 --> 00:30:54,350
PyCon North America last year which

00:30:52,760 --> 00:30:56,690
covers off a huge amount of very useful

00:30:54,350 --> 00:30:59,230
practical Django stuff you can find it

00:30:56,690 --> 00:31:01,340
on YouTube I would highly recommend it

00:30:59,230 --> 00:31:03,289
Celso Gilmore Innes gave a great talk

00:31:01,340 --> 00:31:06,549
about threat modeling at Django Kanye

00:31:03,289 --> 00:31:09,139
West in 2015 which is also on YouTube

00:31:06,549 --> 00:31:11,149
Sascha romaine built an excellent tool

00:31:09,139 --> 00:31:13,190
called Sasha's Pony checkup that helps

00:31:11,149 --> 00:31:14,269
you check your Django app for common

00:31:13,190 --> 00:31:15,979
security related can

00:31:14,269 --> 00:31:17,749
figuration issues and it's a really good

00:31:15,979 --> 00:31:19,999
place to start you can visit her site at

00:31:17,749 --> 00:31:24,349
Pony checkup calm and start auditing

00:31:19,999 --> 00:31:25,940
your own stuff if you're looking for

00:31:24,349 --> 00:31:28,249
technical inflamation tips from some

00:31:25,940 --> 00:31:30,950
django wizards these ones will set you

00:31:28,249 --> 00:31:32,779
on a good path this is the part in the

00:31:30,950 --> 00:31:36,080
story where the credits start rolling by

00:31:32,779 --> 00:31:37,700
the way before I wrap up I want to thank

00:31:36,080 --> 00:31:39,979
a few folks for the help in making this

00:31:37,700 --> 00:31:42,739
talk happen firstly from Marcus

00:31:39,979 --> 00:31:43,940
Halterman for is advice on Django

00:31:42,739 --> 00:31:47,029
security measures and for suggesting

00:31:43,940 --> 00:31:48,889
some good places for research secondly

00:31:47,029 --> 00:31:50,479
Russell Keith Magee for developing

00:31:48,889 --> 00:31:52,459
podium which is the software that I'm

00:31:50,479 --> 00:31:53,959
using to run this presentation podium is

00:31:52,459 --> 00:31:56,989
entirely open source and it is a

00:31:53,959 --> 00:31:58,789
python-based third I want to thank two

00:31:56,989 --> 00:32:00,499
excellent women who've brought Harry

00:31:58,789 --> 00:32:02,899
Potter in to technical conference

00:32:00,499 --> 00:32:05,599
presentations before Lacey Williams

00:32:02,899 --> 00:32:07,249
Henschel presented an intro to docker

00:32:05,599 --> 00:32:09,739
for django notes at django con europe

00:32:07,249 --> 00:32:11,690
earlier this year for example this talk

00:32:09,739 --> 00:32:13,070
gives you a stack of advice about docker

00:32:11,690 --> 00:32:15,279
which and it all dressed up like a

00:32:13,070 --> 00:32:18,349
Hogwarts charms class is really good

00:32:15,279 --> 00:32:20,359
Meegan's spear presented an analysis of

00:32:18,349 --> 00:32:23,299
the password strength of Hogwarts common

00:32:20,359 --> 00:32:25,339
room passwords Pike on North America

00:32:23,299 --> 00:32:27,349
last year I haven't been able to find

00:32:25,339 --> 00:32:28,729
this one on loan it was a poster but it

00:32:27,349 --> 00:32:32,419
was also a great source of inspiration

00:32:28,729 --> 00:32:34,099
for this and lastly I want to thank all

00:32:32,419 --> 00:32:35,419
of you for coming to my talk

00:32:34,099 --> 00:32:37,399
and for being part of django con

00:32:35,419 --> 00:32:38,779
Australia this year it was a lot of fun

00:32:37,399 --> 00:32:41,839
to present this talk for you I got to

00:32:38,779 --> 00:32:44,089
wear robes but if you take one thing out

00:32:41,839 --> 00:32:45,379
of this talk just remember to think like

00:32:44,089 --> 00:32:48,999
Voldemort when you're defending your

00:32:45,379 --> 00:32:48,999
apps have a good evening

00:33:03,590 --> 00:33:08,250
so Lily will be taking curated questions

00:33:06,690 --> 00:33:09,600
for this session which means that you

00:33:08,250 --> 00:33:12,180
lovely people get to run around instead

00:33:09,600 --> 00:33:14,490
of me so if you'd like to ask a question

00:33:12,180 --> 00:33:17,309
please queue in this aisle here on the

00:33:14,490 --> 00:33:19,950
right hand side as you're doing that

00:33:17,309 --> 00:33:21,809
just a reminder that questions should be

00:33:19,950 --> 00:33:23,490
in the form of questions which are to

00:33:21,809 --> 00:33:24,840
ask for information from the speaker if

00:33:23,490 --> 00:33:26,610
you would like to share information with

00:33:24,840 --> 00:33:28,050
the rest of us the best place for that

00:33:26,610 --> 00:33:30,870
is probably either at dinner this

00:33:28,050 --> 00:33:33,540
evening or at the call for proposals for

00:33:30,870 --> 00:33:37,320
Piper than au 2019 so if there's any

00:33:33,540 --> 00:33:42,780
questions any questions feel free to

00:33:37,320 --> 00:33:46,170
head up to the aisle here how did you

00:33:42,780 --> 00:33:50,190
manage to actually pronounce the name of

00:33:46,170 --> 00:33:54,590
you-know-who how did you get this oh my

00:33:50,190 --> 00:33:54,590
god this isn't a seed but he's dead now

00:33:57,830 --> 00:34:05,850
is there any more people heading up the

00:33:59,880 --> 00:34:10,220
questions every month everyone sinner

00:34:05,850 --> 00:34:10,220

YouTube URL: https://www.youtube.com/watch?v=vbwb6zqjZ7o


