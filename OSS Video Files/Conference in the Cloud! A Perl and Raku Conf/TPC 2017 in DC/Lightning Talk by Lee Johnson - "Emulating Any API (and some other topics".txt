Title: Lightning Talk by Lee Johnson - "Emulating Any API (and some other topics"
Publication date: 2017-06-21
Playlist: TPC 2017 in DC
Description: 
	
Captions: 
	00:00:00,000 --> 00:00:03,480
okay I have to lightning talks and a

00:00:01,949 --> 00:00:06,750
lightning advert so let's see how Alice

00:00:03,480 --> 00:00:08,970
goes okay last year I gave a lightning

00:00:06,750 --> 00:00:11,730
talk on my approach to developing

00:00:08,970 --> 00:00:14,670
against RESTful API and the conclusion

00:00:11,730 --> 00:00:16,080
was right and emulator but my conclusion

00:00:14,670 --> 00:00:17,369
was also I'm too lazy to write an

00:00:16,080 --> 00:00:19,170
emulator cuz I don't to write the code

00:00:17,369 --> 00:00:21,990
and the documentation I'm the test on an

00:00:19,170 --> 00:00:26,609
emulator so I thought how can we make

00:00:21,990 --> 00:00:28,380
that easier emulating any API when I

00:00:26,609 --> 00:00:30,720
when I say that I mean any API that has

00:00:28,380 --> 00:00:32,579
a an open API or a swagger specification

00:00:30,720 --> 00:00:36,149
so it's not really any API so that's the

00:00:32,579 --> 00:00:38,520
first caveat what we have in those

00:00:36,149 --> 00:00:41,129
swagger specifications are JSON schema

00:00:38,520 --> 00:00:42,510
which define the jason that we expect to

00:00:41,129 --> 00:00:44,700
receive so I thought maybe we can use

00:00:42,510 --> 00:00:49,020
that to construct the JSON that we get

00:00:44,700 --> 00:00:50,879
back and if if the API doesn't have a

00:00:49,020 --> 00:00:54,390
specification you can actually go on to

00:00:50,879 --> 00:00:57,719
github and find user contributed open

00:00:54,390 --> 00:00:59,129
API specs so I wrote this module which

00:00:57,719 --> 00:01:00,719
has a really really bad name but I

00:00:59,129 --> 00:01:02,520
couldn't think what else to name it cuz

00:01:00,719 --> 00:01:05,220
it takes a JSON schema and makes jason

00:01:02,520 --> 00:01:07,860
so jason schema to Jason and as you can

00:01:05,220 --> 00:01:11,840
see what we do here is we we pass in a

00:01:07,860 --> 00:01:15,540
JSON schema object and we basically

00:01:11,840 --> 00:01:18,119
output some emulated data now you can

00:01:15,540 --> 00:01:20,280
see it it's giving you an example it's

00:01:18,119 --> 00:01:22,860
giving you a representative structure

00:01:20,280 --> 00:01:24,930
but the data is generating it's nonsense

00:01:22,860 --> 00:01:26,820
so if I run that again I get different

00:01:24,930 --> 00:01:30,119
data and again I get different data

00:01:26,820 --> 00:01:33,450
again so how can we use that to actually

00:01:30,119 --> 00:01:37,979
emulate an API we can actually plug it

00:01:33,450 --> 00:01:39,540
into module Isha's plug-in open API the

00:01:37,979 --> 00:01:41,820
important bit here is we're passing a

00:01:39,540 --> 00:01:45,240
callback to the plug-in which basically

00:01:41,820 --> 00:01:47,430
just calls my modules so when it gets

00:01:45,240 --> 00:01:48,720
the response - its Caesar oh it's a 501

00:01:47,430 --> 00:01:50,159
therefore not implemented it not

00:01:48,720 --> 00:01:53,280
implemented so what we'll do is we'll

00:01:50,159 --> 00:01:55,439
check our spec do we have an example

00:01:53,280 --> 00:01:57,630
response we'll stuff it into my module

00:01:55,439 --> 00:02:01,680
I'm Lourdes returned that as a response

00:01:57,630 --> 00:02:03,090
so what I'm doing here is just those

00:02:01,680 --> 00:02:05,729
lines of code you see there and that

00:02:03,090 --> 00:02:08,670
callback I can generate using one of

00:02:05,729 --> 00:02:10,920
those user provided specifications I can

00:02:08,670 --> 00:02:12,040
emulate the Instagram API here so if I

00:02:10,920 --> 00:02:16,870
run that

00:02:12,040 --> 00:02:18,670
I get this back with about 30 lines of

00:02:16,870 --> 00:02:20,890
code so that makes testing and to end

00:02:18,670 --> 00:02:21,689
testing much much easier and there are a

00:02:20,890 --> 00:02:24,129
few caveats

00:02:21,689 --> 00:02:26,739
yeah because Jason's scheme it can be

00:02:24,129 --> 00:02:29,439
quite handily in parts so I will go into

00:02:26,739 --> 00:02:32,829
them very interesting so that's the

00:02:29,439 --> 00:02:38,709
first line you talk my lightning my

00:02:32,829 --> 00:02:40,359
lightning advert my lining other is that

00:02:38,709 --> 00:02:43,870
I was at the Pearl til change summit

00:02:40,359 --> 00:02:45,670
about months ago and Sawyer had created

00:02:43,870 --> 00:02:48,310
a Instagram account and he kind of

00:02:45,670 --> 00:02:50,739
handed me the keys so I've been up

00:02:48,310 --> 00:02:52,569
lately uploading some photos of

00:02:50,739 --> 00:02:55,510
Parliament's I've been to so I went to

00:02:52,569 --> 00:02:56,709
the French pearl like shop and obviously

00:02:55,510 --> 00:02:57,879
there's some from the Pell toolchain

00:02:56,709 --> 00:03:00,099
summer there and I've been uploading

00:02:57,879 --> 00:03:03,280
some ones I got from last year's the

00:03:00,099 --> 00:03:04,870
Pell conference obviously I can't get

00:03:03,280 --> 00:03:07,930
all Appel events so it'd be nice if you

00:03:04,870 --> 00:03:09,730
could contribute photos because I found

00:03:07,930 --> 00:03:12,310
we've all we're almost a hundred

00:03:09,730 --> 00:03:14,019
followers are yet already and this is

00:03:12,310 --> 00:03:16,329
purely few use it's through using

00:03:14,019 --> 00:03:19,659
hashtags and location dates our own

00:03:16,329 --> 00:03:21,849
descriptions and it seems that a good

00:03:19,659 --> 00:03:23,769
half of these are not stomach amps which

00:03:21,849 --> 00:03:24,699
is really really good they're actually

00:03:23,769 --> 00:03:27,040
people that are following the the

00:03:24,699 --> 00:03:28,810
Instagram account and it's a good way to

00:03:27,040 --> 00:03:30,729
get the fact that there are elements

00:03:28,810 --> 00:03:32,290
running all the time out there it

00:03:30,729 --> 00:03:34,409
doesn't matter how big or how small your

00:03:32,290 --> 00:03:36,849
element is if it's just a local

00:03:34,409 --> 00:03:39,609
filmmakers group send a couple of photos

00:03:36,849 --> 00:03:41,620
in and I'll upload them I did add a blog

00:03:39,609 --> 00:03:43,000
post to blogs up Hilda talked about how

00:03:41,620 --> 00:03:44,799
to do this is a Dropbox folder and

00:03:43,000 --> 00:03:49,030
everything so if you want to contribute

00:03:44,799 --> 00:03:51,310
photos that's really really great okay

00:03:49,030 --> 00:03:53,769
the last thing we talk is about the

00:03:51,310 --> 00:03:54,970
Swiss pearl workshop this year there are

00:03:53,769 --> 00:03:57,449
two deliberate mistakes in this

00:03:54,970 --> 00:04:00,010
lightning talk the first one is that one

00:03:57,449 --> 00:04:01,720
the flag is not a rectangle it's a

00:04:00,010 --> 00:04:04,470
square so hopefully that won't have any

00:04:01,720 --> 00:04:06,849
impact on your getting a permit but it's

00:04:04,470 --> 00:04:08,409
so bringing youth from Switzerland of is

00:04:06,849 --> 00:04:10,389
obviously of the Swiss pail workshop and

00:04:08,409 --> 00:04:13,599
if you didn't know there's a Swiss pearl

00:04:10,389 --> 00:04:15,340
workshop for the last five years and

00:04:13,599 --> 00:04:21,130
it's not in the obvious places like

00:04:15,340 --> 00:04:25,140
Geneva asura k-- it's been in the

00:04:21,130 --> 00:04:27,700
capital state burn a Knowlton

00:04:25,140 --> 00:04:29,890
the reason why that's a picture a train

00:04:27,700 --> 00:04:33,190
yard is Alton is at the north-south

00:04:29,890 --> 00:04:36,010
east-west the way the train tracks so

00:04:33,190 --> 00:04:37,390
you get this huge where you get lots of

00:04:36,010 --> 00:04:42,570
people think fellas our trains basically

00:04:37,390 --> 00:04:44,440
so and it was also an instruct which is

00:04:42,570 --> 00:04:48,000
especially sprouting because since

00:04:44,440 --> 00:04:48,000
Brooke is not in Switzerland so David

00:04:48,420 --> 00:04:53,560
and this year it's individual so long

00:04:50,680 --> 00:04:55,330
which is in the outboard wire just you

00:04:53,560 --> 00:04:57,310
can just about see Lake Geneva there and

00:04:55,330 --> 00:05:00,160
it's the home of the company I work for

00:04:57,310 --> 00:05:01,660
given gain which is perhaps maybe their

00:05:00,160 --> 00:05:06,040
highest altitude coal shop in the world

00:05:01,660 --> 00:05:08,050
I'm not sure and well what can we offer

00:05:06,040 --> 00:05:09,940
you we can obviously offer you uses a

00:05:08,050 --> 00:05:14,200
famous mountain but not that not that

00:05:09,940 --> 00:05:15,370
one this one don't immediately and don't

00:05:14,200 --> 00:05:17,290
worry it's an August so there won't be

00:05:15,370 --> 00:05:19,720
any snow unless you pop over the valley

00:05:17,290 --> 00:05:21,760
to the glacier and obviously we have

00:05:19,720 --> 00:05:25,480
cheese of course and we have chocolate

00:05:21,760 --> 00:05:27,100
and we have wine actually does quite

00:05:25,480 --> 00:05:28,750
surprising both lots of wine in

00:05:27,100 --> 00:05:30,580
Switzerland and whisky as well and

00:05:28,750 --> 00:05:33,370
unfortunately you can't ask Wendy

00:05:30,580 --> 00:05:36,660
because she's not here but we have beer

00:05:33,370 --> 00:05:41,110
of course and rusty which is basically

00:05:36,660 --> 00:05:44,860
really big hash browns and of course we

00:05:41,110 --> 00:05:51,400
have pearl lots of pearl we have talks

00:05:44,860 --> 00:05:53,350
and we have workshops we have Damien so

00:05:51,400 --> 00:05:55,090
come to the laughs if you are in Europe

00:05:53,350 --> 00:05:56,880
or maybe if you're not in Europe that's

00:05:55,090 --> 00:05:59,920
where we are just at the end of the lake

00:05:56,880 --> 00:06:00,910
and if you really really want to you

00:05:59,920 --> 00:06:04,090
could sponsor us as well

00:06:00,910 --> 00:06:04,750
so thank you very much

00:06:04,090 --> 00:06:07,529
[Music]

00:06:04,750 --> 00:06:07,529

YouTube URL: https://www.youtube.com/watch?v=cNlMIa-YOnM


