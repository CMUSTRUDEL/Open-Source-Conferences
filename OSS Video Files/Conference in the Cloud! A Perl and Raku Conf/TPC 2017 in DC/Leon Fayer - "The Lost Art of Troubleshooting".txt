Title: Leon Fayer - "The Lost Art of Troubleshooting"
Publication date: 2017-06-23
Playlist: TPC 2017 in DC
Description: 
	There are a lot of great things about the cloud, but the "destroy and rebuild" philosophy which is really good for building a continuous delivery pipeline, really sucks when applied to troubleshooting production problems. When your application goes haywire, the most valuable engineering skill is not the the ability to bring up a copy of your system or even the knowledge of a your technology stack (although it doesn't hurt). It is the skill of understanding and solving problems.

Finding the root cause of the issue and mitigating it with minimal disruption in production is a must-have skill for engineers responsible for managing and maintaining production systems. In this talk I will discuss the skills required to troubleshoot complex systems, traits that prevent engineers from being successful at troubleshooting and discuss some techniques and tips and trick for troubleshooting complex systems in production.

Leon's two decades of expertise were concentrated on architecting and operating complex, web-based systems to withstand crushing traffic (often unexpectedly). Over the years, he's had a somewhat unique opportunity to design and build systems that run some of the most visited websites in the world. While his core expertise is in Perl and application development in general, he works his way around the whole technology stack from system architecture to databases design and code optimization. He's considered a professional naysayer by peers and has the opinion that nothing really works until it works for at least a million people.
Captions: 
	00:00:00,060 --> 00:00:08,580
all right yes everybody made it through

00:00:02,580 --> 00:00:10,860
security it's good okay so my name is

00:00:08,580 --> 00:00:13,110
Leon and I'm actually welcome boy I

00:00:10,860 --> 00:00:16,170
started my career like in the early 90s

00:00:13,110 --> 00:00:18,449
around this area work for government in

00:00:16,170 --> 00:00:20,880
beginning and quickly realized working

00:00:18,449 --> 00:00:23,730
for government boring so work for all

00:00:20,880 --> 00:00:25,439
the other companies and for the good 15

00:00:23,730 --> 00:00:28,080
years I've been working with them UTI

00:00:25,439 --> 00:00:29,160
where we build and operate some of the

00:00:28,080 --> 00:00:31,260
larger sites in the world

00:00:29,160 --> 00:00:33,239
which just means which means I get to

00:00:31,260 --> 00:00:35,360
put my hands into my code of national

00:00:33,239 --> 00:00:37,860
Geographics and Wikipedia's of the world

00:00:35,360 --> 00:00:40,469
but what made me realize oh that means

00:00:37,860 --> 00:00:42,600
is that for the better part of the last

00:00:40,469 --> 00:00:45,270
two centuries I got to fix other people

00:00:42,600 --> 00:00:47,190
crap which kind of made me believe that

00:00:45,270 --> 00:00:49,829
that's what led me to this whole

00:00:47,190 --> 00:00:51,360
troubleshooting right but I think what

00:00:49,829 --> 00:00:59,760
was the straw that broke the camel's

00:00:51,360 --> 00:01:02,190
back was the cloud cloud problem with

00:00:59,760 --> 00:01:04,290
the cloud is it brings a whole new

00:01:02,190 --> 00:01:06,360
destroying of the drone mentality right

00:01:04,290 --> 00:01:08,040
where you can try you know whenever you

00:01:06,360 --> 00:01:10,080
want to just bring up a new one which

00:01:08,040 --> 00:01:11,610
sounds exactly like when in doubt reboot

00:01:10,080 --> 00:01:14,939
which was very popular in the night

00:01:11,610 --> 00:01:17,700
right is everybody familiar with the

00:01:14,939 --> 00:01:21,900
whole pets versus keto analogy anybody

00:01:17,700 --> 00:01:25,170
and so guess versus a bad person scatter

00:01:21,900 --> 00:01:26,729
analogy it's basically before we took

00:01:25,170 --> 00:01:28,590
care of our servers as we would a pet

00:01:26,729 --> 00:01:31,350
right we carry for their what had their

00:01:28,590 --> 00:01:34,020
way with the god sake we nourish on the

00:01:31,350 --> 00:01:34,979
health the whole cloud mentality right

00:01:34,020 --> 00:01:36,810
for my camera

00:01:34,979 --> 00:01:40,170
it's one of one of the cows get sick

00:01:36,810 --> 00:01:42,479
before tourism by ánewá problem with

00:01:40,170 --> 00:01:47,399
that is if one of the crowd gets mad cow

00:01:42,479 --> 00:01:48,869
disease it can infect everybody else and

00:01:47,399 --> 00:01:50,520
outside and all McDonald's going to have

00:01:48,869 --> 00:01:54,329
no farm and a huge that on the part

00:01:50,520 --> 00:01:56,670
because you know so troubleshooting

00:01:54,329 --> 00:01:59,100
troubleshooting is a form of problem

00:01:56,670 --> 00:02:00,990
solving and problem solving in my own

00:01:59,100 --> 00:02:04,710
words is an ability to take things that

00:02:00,990 --> 00:02:06,869
you know absolutely nothing about so why

00:02:04,710 --> 00:02:09,929
why why troubleshoot problems holding on

00:02:06,869 --> 00:02:11,940
for well because now the systems become

00:02:09,929 --> 00:02:13,800
more and more complex right before we

00:02:11,940 --> 00:02:17,010
ran a website that Brian wants

00:02:13,800 --> 00:02:19,410
javascript now it's a complex set of

00:02:17,010 --> 00:02:20,970
nodes runs for the database behind it

00:02:19,410 --> 00:02:24,180
with a low dose or the whole bunches

00:02:20,970 --> 00:02:28,320
happen between and because things break

00:02:24,180 --> 00:02:30,420
at the worst possible moment like I

00:02:28,320 --> 00:02:32,250
don't know about you guys I've never had

00:02:30,420 --> 00:02:37,260
a system that broke in a time that was

00:02:32,250 --> 00:02:38,820
convenient and I don't know if anybody

00:02:37,260 --> 00:02:40,650
in this room is lucky enough for their

00:02:38,820 --> 00:02:42,660
work not being immediately seen by other

00:02:40,650 --> 00:02:45,090
people but I don't know the main people

00:02:42,660 --> 00:02:47,400
right because everything now works on a

00:02:45,090 --> 00:02:49,230
more of a platform basis what everything

00:02:47,400 --> 00:02:50,970
you do is immediate of the elbows of

00:02:49,230 --> 00:02:52,680
coins which means every one of your

00:02:50,970 --> 00:02:54,500
message is immediate available to

00:02:52,680 --> 00:02:57,900
thousands if not millions of people

00:02:54,500 --> 00:02:59,760
which is not great but if I had to

00:02:57,900 --> 00:03:04,080
summarize it in one sentence I would

00:02:59,760 --> 00:03:05,730
probably just plagiarized charity you

00:03:04,080 --> 00:03:06,150
don't get to code whatever you want

00:03:05,730 --> 00:03:10,020
anymore

00:03:06,150 --> 00:03:12,180
most of your workday is done by fixing

00:03:10,020 --> 00:03:14,090
or working with somebody else's code or

00:03:12,180 --> 00:03:18,540
architecture or relying on somebody else

00:03:14,090 --> 00:03:20,610
by the way just so we're clear when I'm

00:03:18,540 --> 00:03:22,500
in troubleshooting I don't mean like oh

00:03:20,610 --> 00:03:25,050
I have a bug let me open this file and

00:03:22,500 --> 00:03:26,430
Texas right I mean I know in ideal

00:03:25,050 --> 00:03:27,660
situation you're sitting there in the

00:03:26,430 --> 00:03:29,760
middle of the day with a ladder in your

00:03:27,660 --> 00:03:30,930
hand and trying to figure out well if I

00:03:29,760 --> 00:03:32,790
change this character that's going to

00:03:30,930 --> 00:03:34,590
fill me I'm talking about 3:00 in the

00:03:32,790 --> 00:03:36,450
morning when everything is on fire your

00:03:34,590 --> 00:03:38,400
entire like in a water bucket containing

00:03:36,450 --> 00:03:40,920
gas hose you kinda troubleshooting right

00:03:38,400 --> 00:03:43,739
everything is broken so in things that

00:03:40,920 --> 00:03:45,600
happened what do you do right I mean the

00:03:43,739 --> 00:03:49,230
first step is to replicate the problem

00:03:45,600 --> 00:03:50,930
and you think that's the common sense

00:03:49,230 --> 00:03:53,790
right to go over applicate the problem

00:03:50,930 --> 00:03:56,220
but she don't imagine how many times I

00:03:53,790 --> 00:03:58,830
was talking to a developer I said hey I

00:03:56,220 --> 00:04:00,239
fixed the problem I was like cool how do

00:03:58,830 --> 00:04:02,459
you know it's fixed of the koala ran the

00:04:00,239 --> 00:04:04,320
script afterwards in 4th I was like

00:04:02,459 --> 00:04:06,239
great did it work did you run it

00:04:04,320 --> 00:04:10,739
beforehand to see if it's work but well

00:04:06,239 --> 00:04:12,900
no but it works now well how do I

00:04:10,739 --> 00:04:14,640
explain this to you

00:04:12,900 --> 00:04:16,739
so the next thing you do is isolate the

00:04:14,640 --> 00:04:20,609
problem right like I said the systems

00:04:16,739 --> 00:04:22,200
are more and more complex and if you

00:04:20,609 --> 00:04:24,000
heard Damien so chaos today right you

00:04:22,200 --> 00:04:25,870
can go down the rabbit hole it's really

00:04:24,000 --> 00:04:28,670
easier to figure out what the problem is

00:04:25,870 --> 00:04:31,340
and the next thing is fix the proper

00:04:28,670 --> 00:04:34,040
height oh it was that easy with the

00:04:31,340 --> 00:04:35,270
village show well because at that point

00:04:34,040 --> 00:04:37,790
we're still faced with a problem

00:04:35,270 --> 00:04:39,590
we know we know it's broken but nobody's

00:04:37,790 --> 00:04:43,190
broken but the tool doesn't exactly know

00:04:39,590 --> 00:04:45,110
what the problem is and what if so a lot

00:04:43,190 --> 00:04:46,790
of this stuff I'll be talking about the

00:04:45,110 --> 00:04:48,080
world understand right we need to

00:04:46,790 --> 00:04:51,440
understand a lot of the stuff that's

00:04:48,080 --> 00:04:53,510
happening so first of all we need to

00:04:51,440 --> 00:04:57,110
understand the problem going back to

00:04:53,510 --> 00:04:58,790
what I protect so I don't know how many

00:04:57,110 --> 00:05:00,230
times did you hear somebody say hey we

00:04:58,790 --> 00:05:03,050
can't support hundreds of requests

00:05:00,230 --> 00:05:06,460
second we get so many more visitors

00:05:03,050 --> 00:05:08,600
coming to our site we need to scale that

00:05:06,460 --> 00:05:11,000
general is coming from like managers

00:05:08,600 --> 00:05:13,400
executives right that that's a lot of

00:05:11,000 --> 00:05:15,920
buzz word for the day Oh problem with

00:05:13,400 --> 00:05:17,780
that if you can support hundreds of

00:05:15,920 --> 00:05:19,100
requests per minute you don't need to

00:05:17,780 --> 00:05:21,350
scale better you need to improve the

00:05:19,100 --> 00:05:22,850
performance right so all in the hardware

00:05:21,350 --> 00:05:25,100
the problem where you can eat those

00:05:22,850 --> 00:05:27,640
always it's not a proper solution you're

00:05:25,100 --> 00:05:29,990
not solving the right problem right it's

00:05:27,640 --> 00:05:31,730
example with the doors right you don't

00:05:29,990 --> 00:05:33,260
need more doors you just need to make

00:05:31,730 --> 00:05:35,840
sure your doors are wider to let more

00:05:33,260 --> 00:05:42,530
people in give you an exam a real

00:05:35,840 --> 00:05:46,220
example can anybody spot a problem right

00:05:42,530 --> 00:05:48,560
I mean that's pretty simple right except

00:05:46,220 --> 00:05:51,770
that's not the problem it's a problem

00:05:48,560 --> 00:05:55,160
clearly but the problem is that the

00:05:51,770 --> 00:05:57,080
performance continue to degrade right

00:05:55,160 --> 00:05:57,560
the jump from if you look at actual the

00:05:57,080 --> 00:06:01,130
numbers

00:05:57,560 --> 00:06:04,880
the performance dip was between from 200

00:06:01,130 --> 00:06:07,700
milliseconds to $400 which is I mean so

00:06:04,880 --> 00:06:10,100
what if your manageable but since then

00:06:07,700 --> 00:06:14,240
it Kherson grows almost at second and

00:06:10,100 --> 00:06:15,350
continues growing so at some point your

00:06:14,240 --> 00:06:16,960
senses will become completely

00:06:15,350 --> 00:06:19,580
unresponsive

00:06:16,960 --> 00:06:21,260
to solve initial problem is that always

00:06:19,580 --> 00:06:24,380
going to help you if you don't solve the

00:06:21,260 --> 00:06:26,570
actual problem which brings me to the

00:06:24,380 --> 00:06:29,390
next point you need to understand the

00:06:26,570 --> 00:06:30,830
bit because what phases every technical

00:06:29,390 --> 00:06:34,700
solution is doing is supporting

00:06:30,830 --> 00:06:37,910
something in a bit right this is the

00:06:34,700 --> 00:06:42,530
best quote I've ever heard from a

00:06:37,910 --> 00:06:44,620
customer and this is so true

00:06:42,530 --> 00:06:47,210
right because generally business people

00:06:44,620 --> 00:06:48,770
don't care whether you're on profiler

00:06:47,210 --> 00:06:50,270
process they don't care about any

00:06:48,770 --> 00:06:52,130
document a code they don't care what

00:06:50,270 --> 00:06:54,520
they're called it's cleaner now all they

00:06:52,130 --> 00:06:57,140
care is it is still making money right

00:06:54,520 --> 00:06:59,030
and that making money can be direct

00:06:57,140 --> 00:07:01,880
making money can be exposure I can do

00:06:59,030 --> 00:07:04,040
whatever it is right it's something that

00:07:01,880 --> 00:07:09,140
a business metric that they care about

00:07:04,040 --> 00:07:11,210
and technology engineer what's nobody so

00:07:09,140 --> 00:07:14,240
the most simple thing right 404 on the

00:07:11,210 --> 00:07:15,350
webpage right paging that time but it

00:07:14,240 --> 00:07:17,180
means different things to different

00:07:15,350 --> 00:07:19,010
people right so in the middle of the

00:07:17,180 --> 00:07:21,350
night if you get caught or take oh my

00:07:19,010 --> 00:07:23,450
god the website is out can you fix it

00:07:21,350 --> 00:07:29,000
what is the first thing you fix right

00:07:23,450 --> 00:07:32,300
what does Amazon care about the mouse so

00:07:29,000 --> 00:07:33,890
right so as an example there you know

00:07:32,300 --> 00:07:35,720
when you go to Amazon everybody else

00:07:33,890 --> 00:07:37,700
amateur when you go to Amazon the

00:07:35,720 --> 00:07:39,800
related products on the homepage is

00:07:37,700 --> 00:07:43,100
responsible for like 30 percent of the

00:07:39,800 --> 00:07:44,990
sale so make sure with homepage of

00:07:43,100 --> 00:07:47,090
Amazon goes down that's like will be the

00:07:44,990 --> 00:07:48,860
first thing to fix if the image is

00:07:47,090 --> 00:07:51,140
downloadable scro that we can still make

00:07:48,860 --> 00:07:52,460
something right now for something a

00:07:51,140 --> 00:07:55,190
little more complicated

00:07:52,460 --> 00:07:56,630
whilst most return what's the first

00:07:55,190 --> 00:08:00,740
things that you care about from the side

00:07:56,630 --> 00:08:02,090
of town that's all right it's not the

00:08:00,740 --> 00:08:04,580
content like a lot of people would think

00:08:02,090 --> 00:08:09,250
it is the ad they serve

00:08:04,580 --> 00:08:12,980
I think 32 ads on a home page alone I

00:08:09,250 --> 00:08:15,290
know it's awful it's horrible but that's

00:08:12,980 --> 00:08:17,480
amazing they care about so realistically

00:08:15,290 --> 00:08:18,980
if you have shot yourself from oh it's

00:08:17,480 --> 00:08:21,320
had to go into a homepage of Wall Street

00:08:18,980 --> 00:08:24,380
Journal just team edge from a business

00:08:21,320 --> 00:08:26,390
perspective if the users just go to the

00:08:24,380 --> 00:08:31,280
homepage and see all over there to know

00:08:26,390 --> 00:08:34,669
content that's fine it sounds awful but

00:08:31,280 --> 00:08:36,650
it is fine right initial goes the other

00:08:34,669 --> 00:08:37,640
way around what does 200 Newton right

00:08:36,650 --> 00:08:39,620
when everything is fine

00:08:37,640 --> 00:08:41,990
like we're everybody is a sweater net

00:08:39,620 --> 00:08:44,780
but Twitter recently had that's whole

00:08:41,990 --> 00:08:46,820
thing where everything was fine the site

00:08:44,780 --> 00:08:48,350
was up like you can talk in your suite

00:08:46,820 --> 00:08:49,970
for us and it's like awesome thank you

00:08:48,350 --> 00:08:50,780
for 10 years with and that suite will go

00:08:49,970 --> 00:08:54,050
nowhere

00:08:50,780 --> 00:08:55,660
like is everything okay and everybody go

00:08:54,050 --> 00:08:58,670
have a beer because nothing's broken

00:08:55,660 --> 00:09:01,880
right so keep in mind that every

00:08:58,670 --> 00:09:04,190
technical decision power some sort of a

00:09:01,880 --> 00:09:06,710
distance right whether it's sticking a

00:09:04,190 --> 00:09:09,440
technology where there is prioritizing

00:09:06,710 --> 00:09:11,440
what you want to fix whether it's

00:09:09,440 --> 00:09:13,490
anything else right which brings me to

00:09:11,440 --> 00:09:15,140
next understand important you gotta

00:09:13,490 --> 00:09:16,460
understand the impact of the things

00:09:15,140 --> 00:09:18,320
you're trying to do whether it's the

00:09:16,460 --> 00:09:21,890
impacts of the tailor or impact of the

00:09:18,320 --> 00:09:23,150
success right so how many times you

00:09:21,890 --> 00:09:28,180
attach something in the system and

00:09:23,150 --> 00:09:31,580
everything fell apart I mean really and

00:09:28,180 --> 00:09:33,860
really the problem size doesn't really

00:09:31,580 --> 00:09:37,010
matter right we sometimes prioritize

00:09:33,860 --> 00:09:39,410
itself by what in our head the most

00:09:37,010 --> 00:09:41,720
glorious problem right giving example I

00:09:39,410 --> 00:09:43,670
had I had one of those days from

00:09:41,720 --> 00:09:45,170
everything right so I'm doing like a

00:09:43,670 --> 00:09:48,170
developers comma so trying out with a

00:09:45,170 --> 00:09:50,690
solo now I can RC and like a 15 terminal

00:09:48,170 --> 00:09:52,130
windows trying to fix like a credit card

00:09:50,690 --> 00:09:54,380
system on it mail or system like

00:09:52,130 --> 00:09:57,440
everything's broke like I'm really in a

00:09:54,380 --> 00:10:01,550
fire mode and CEO of the company codes

00:09:57,440 --> 00:10:07,280
and those we have a huge problem like no

00:10:01,550 --> 00:10:08,930
 I am fully aware in like a I'm

00:10:07,280 --> 00:10:10,610
fixing its Winnie along with it

00:10:08,930 --> 00:10:17,690
yeah we have at iPhone now returns the

00:10:10,610 --> 00:10:20,089
conditions page I'm like okay like we

00:10:17,690 --> 00:10:22,310
need to drop everything in fix it like

00:10:20,089 --> 00:10:23,870
are you kidding me I'm actually I know

00:10:22,310 --> 00:10:25,940
what your business needs right in this

00:10:23,870 --> 00:10:28,070
particular case I know which our

00:10:25,940 --> 00:10:31,730
business meet I am trying to make sure

00:10:28,070 --> 00:10:33,350
you making money right it's like no this

00:10:31,730 --> 00:10:36,980
is a priority number one drop everything

00:10:33,350 --> 00:10:38,450
in six as it turns out he had a

00:10:36,980 --> 00:10:40,400
compliance officer sitting in his office

00:10:38,450 --> 00:10:41,510
and that's the only thing that stopped

00:10:40,400 --> 00:10:42,770
them from getting some sort of a

00:10:41,510 --> 00:10:44,300
compliance which was self

00:10:42,770 --> 00:10:48,770
save them like a millions of dollars of

00:10:44,300 --> 00:10:52,820
our next performer a type versus a

00:10:48,770 --> 00:10:54,620
broken credit card job right so you

00:10:52,820 --> 00:10:56,570
gotta you gotta pick your battles in

00:10:54,620 --> 00:10:58,190
some ways again going back to trying to

00:10:56,570 --> 00:11:01,250
understand the business problems but

00:10:58,190 --> 00:11:03,260
realizing that most obviously seeming

00:11:01,250 --> 00:11:05,120
problem is not necessarily from

00:11:03,260 --> 00:11:07,760
which brings the next question like is

00:11:05,120 --> 00:11:10,040
that a left of Toledo right is well now

00:11:07,760 --> 00:11:11,720
desktops with thousands of people more a

00:11:10,040 --> 00:11:19,400
chance that they're not going to pull up

00:11:11,720 --> 00:11:21,500
another planet and sometimes breaking

00:11:19,400 --> 00:11:25,130
means fixing right sometimes especially

00:11:21,500 --> 00:11:27,080
when you crisis mode breaking may

00:11:25,130 --> 00:11:29,090
provide you a short-term fix all right

00:11:27,080 --> 00:11:31,370
so this again it's an example that

00:11:29,090 --> 00:11:33,470
thinks I broke I've been working on

00:11:31,370 --> 00:11:35,570
something and again performance went out

00:11:33,470 --> 00:11:38,060
or went down rather and all of a sudden

00:11:35,570 --> 00:11:42,560
has got a spiky and availability started

00:11:38,060 --> 00:11:48,650
dropping and turning you know SSL I know

00:11:42,560 --> 00:11:50,540
the section Sodapop Georgia right but

00:11:48,650 --> 00:11:52,160
that's the felt that everything horrible

00:11:50,540 --> 00:11:55,990
right is its ecommerce site that's is

00:11:52,160 --> 00:11:58,820
horrible so about 10 percent of the

00:11:55,990 --> 00:12:00,290
application will use an SSL right the

00:11:58,820 --> 00:12:02,780
effective altering of those features

00:12:00,290 --> 00:12:06,130
would disable 10% of the revenue on the

00:12:02,780 --> 00:12:08,570
visitor authority which means that 90%

00:12:06,130 --> 00:12:12,020
would still get access to all they are

00:12:08,570 --> 00:12:13,790
the features right marketers know this

00:12:12,020 --> 00:12:16,040
comes the concept of all around right

00:12:13,790 --> 00:12:18,440
for them eighty percent now it's much

00:12:16,040 --> 00:12:20,930
better than 100 percent tomorrow which I

00:12:18,440 --> 00:12:23,090
found a really difficult for developers

00:12:20,930 --> 00:12:24,320
like us to grasp that country right we

00:12:23,090 --> 00:12:26,480
don't want to push out the broken color

00:12:24,320 --> 00:12:28,100
right which one of us wants to push out

00:12:26,480 --> 00:12:30,680
the code that we know will guarantee

00:12:28,100 --> 00:12:33,350
break for 20 percent with people like

00:12:30,680 --> 00:12:36,800
nobody we're rather wait till tomorrow

00:12:33,350 --> 00:12:38,600
takes 100% for sure no problem is for a

00:12:36,800 --> 00:12:41,420
marketing perspective set means for was

00:12:38,600 --> 00:12:43,670
an 80% of the revenue today right we're

00:12:41,420 --> 00:12:45,500
here 910 red running it tomorrow anyways

00:12:43,670 --> 00:12:46,160
but what was it eighty percent of

00:12:45,500 --> 00:12:52,700
revenue today

00:12:46,160 --> 00:12:54,740
so time is literally money like I had a

00:12:52,700 --> 00:12:56,420
project where we throw every new

00:12:54,740 --> 00:12:59,870
developer that I was all bored to the

00:12:56,420 --> 00:13:03,560
projects I would run a query to show how

00:12:59,870 --> 00:13:07,010
much money aside would lose if it was

00:13:03,560 --> 00:13:09,170
down for 10 minutes and it was intensive

00:13:07,010 --> 00:13:12,170
thousands of dollars so basically if you

00:13:09,170 --> 00:13:14,540
bring one page registration page this is

00:13:12,170 --> 00:13:16,160
how much actual monies not theoretical

00:13:14,540 --> 00:13:18,949
it's not exposure this is

00:13:16,160 --> 00:13:22,819
much actual money though which does

00:13:18,949 --> 00:13:23,750
scare a few people but which means if

00:13:22,819 --> 00:13:27,079
time is money

00:13:23,750 --> 00:13:28,579
you wanna especially when everything is

00:13:27,079 --> 00:13:30,879
broken you want to incremental approach

00:13:28,579 --> 00:13:32,870
the system right you don't have to wait

00:13:30,879 --> 00:13:34,730
for everything to be done hundred

00:13:32,870 --> 00:13:38,029
percent you can put short-term fixes

00:13:34,730 --> 00:13:40,879
solve the problem so let's look at a

00:13:38,029 --> 00:13:44,209
classical problem everything was fine

00:13:40,879 --> 00:13:47,899
right there was a problem and then every

00:13:44,209 --> 00:13:49,730
people finding it right by cut off what

00:13:47,899 --> 00:13:52,009
was done and explained and all day sleep

00:13:49,730 --> 00:13:58,670
or salaries but like that's a pretty

00:13:52,009 --> 00:14:00,860
normal visualization problem except not

00:13:58,670 --> 00:14:03,920
a lot of people think that that's an

00:14:00,860 --> 00:14:07,430
acceptable level right you don't have to

00:14:03,920 --> 00:14:10,519
be as norm to continue generated revenue

00:14:07,430 --> 00:14:11,779
or traffic or whatever the KPI right you

00:14:10,519 --> 00:14:14,360
just have to get to that acceptable

00:14:11,779 --> 00:14:16,579
level to solve the immediate crisis and

00:14:14,360 --> 00:14:18,860
then you continue fixing everything else

00:14:16,579 --> 00:14:20,240
right so in this particular case there

00:14:18,860 --> 00:14:23,870
were four different fixes to one

00:14:20,240 --> 00:14:26,060
integral but each one incrementally

00:14:23,870 --> 00:14:28,819
improve the state of the system until we

00:14:26,060 --> 00:14:31,069
got back to the norm right but after the

00:14:28,819 --> 00:14:33,410
first one the system became usable which

00:14:31,069 --> 00:14:35,540
was the most important part of that time

00:14:33,410 --> 00:14:37,519
so if something breaks in the middle of

00:14:35,540 --> 00:14:39,319
the night you put an immediate sticks in

00:14:37,519 --> 00:14:40,730
and maybe direct you can deal with in

00:14:39,319 --> 00:14:45,350
the morning if I have to spend your

00:14:40,730 --> 00:14:48,560
whole Nigel so to quickly recap what we

00:14:45,350 --> 00:14:50,600
learned so far so understanding what's

00:14:48,560 --> 00:14:52,880
important understand of course in fact

00:14:50,600 --> 00:14:54,769
at the center of the larger insights and

00:14:52,880 --> 00:14:56,779
acceptable risk right oh that is

00:14:54,769 --> 00:14:59,149
important when you troubleshoot stuff in

00:14:56,779 --> 00:15:01,730
the middle and then I will talk about

00:14:59,149 --> 00:15:03,740
something more interesting what not to

00:15:01,730 --> 00:15:05,059
do when you're troubleshooting things in

00:15:03,740 --> 00:15:08,750
a middle of the night when everything is

00:15:05,059 --> 00:15:11,720
broken so first of all I want to recap

00:15:08,750 --> 00:15:15,350
don't assume that you know with the

00:15:11,720 --> 00:15:17,059
problem I don't know how to stress this

00:15:15,350 --> 00:15:20,209
enough

00:15:17,059 --> 00:15:22,730
so Obamacare was one of the greatest

00:15:20,209 --> 00:15:24,800
failures of our decades and I don't care

00:15:22,730 --> 00:15:26,899
how you what you think about the program

00:15:24,800 --> 00:15:29,059
but technically it was a complete

00:15:26,899 --> 00:15:30,060
traitor right I mean this point MPs

00:15:29,059 --> 00:15:32,550
millions of dollars

00:15:30,060 --> 00:15:34,350
to build the system that didn't work and

00:15:32,550 --> 00:15:38,580
not only they had been scale for the

00:15:34,350 --> 00:15:40,530
predetermined number of people I can

00:15:38,580 --> 00:15:42,000
rent about it for much longer but since

00:15:40,530 --> 00:15:45,540
that but I happened to know few people

00:15:42,000 --> 00:15:47,880
who worked on a team they took over the

00:15:45,540 --> 00:15:49,890
project after its launch in the first

00:15:47,880 --> 00:15:52,290
failure and then we responsive remaining

00:15:49,890 --> 00:15:53,880
fix it so we're seeing a number deer is

00:15:52,290 --> 00:15:55,860
one day and I was basically given the

00:15:53,880 --> 00:15:57,120
same range like how is that possible

00:15:55,860 --> 00:15:59,060
like that you had such a performance

00:15:57,120 --> 00:16:02,370
issues with the predetermined user sir

00:15:59,060 --> 00:16:03,630
and he's like oh yeah totally but we

00:16:02,370 --> 00:16:07,110
already solving this problem we just

00:16:03,630 --> 00:16:07,950
ordered whole new Oracle RAC and I was

00:16:07,110 --> 00:16:10,620
like oh cool

00:16:07,950 --> 00:16:16,560
so what was the problem is like what

00:16:10,620 --> 00:16:18,450
what do you mean I was like you just

00:16:16,560 --> 00:16:24,570
ordered a normal correct what's the

00:16:18,450 --> 00:16:29,070
problem database is like I why it had to

00:16:24,570 --> 00:16:30,960
be it did not have to be it could be

00:16:29,070 --> 00:16:34,520
like I feel like what you're telling me

00:16:30,960 --> 00:16:37,560
is that you ordered a really expensive

00:16:34,520 --> 00:16:41,730
solution for a problem that you're not

00:16:37,560 --> 00:16:46,410
sure exists right

00:16:41,730 --> 00:16:49,830
could be is not a justification second

00:16:46,410 --> 00:16:51,360
though is don't whine right general

00:16:49,830 --> 00:16:53,820
troubleshooting is one of a team effort

00:16:51,360 --> 00:16:56,520
or anything else and nobody wants to

00:16:53,820 --> 00:17:01,530
hear people whining better people

00:16:56,520 --> 00:17:03,870
practice it is like we all have to deal

00:17:01,530 --> 00:17:06,360
with it right there's so many excuses

00:17:03,870 --> 00:17:07,860
that people give and honestly when it's

00:17:06,360 --> 00:17:09,510
3:00 in the morning and I'm have to try

00:17:07,860 --> 00:17:11,760
to troubleshoot something and people

00:17:09,510 --> 00:17:13,290
give me an excuse it's like oh it's not

00:17:11,760 --> 00:17:15,660
documented I don't know what could be

00:17:13,290 --> 00:17:18,570
broken I'm like actually it is

00:17:15,660 --> 00:17:22,770
documented it's written in college like

00:17:18,570 --> 00:17:27,540
really like the other thing is like oh I

00:17:22,770 --> 00:17:31,110
didn't build it I it's not my problem no

00:17:27,540 --> 00:17:33,000
it is now so like that's not a good it

00:17:31,110 --> 00:17:34,620
is your job to make sure everything is

00:17:33,000 --> 00:17:36,570
running so saying that you then build it

00:17:34,620 --> 00:17:37,830
all that slow stuff you can complain

00:17:36,570 --> 00:17:41,610
about tomorrow morning and I think

00:17:37,830 --> 00:17:43,850
everything probably one of my favorite

00:17:41,610 --> 00:17:43,850
ones

00:17:45,380 --> 00:17:49,740
it's like oh if I hold the test we push

00:17:48,360 --> 00:17:53,270
it to production and work great I was

00:17:49,740 --> 00:17:56,370
like well again nobody cares

00:17:53,270 --> 00:18:00,030
right it is equivalent of saying it

00:17:56,370 --> 00:18:02,160
worked on my laptop literal right and I

00:18:00,030 --> 00:18:04,710
can rant about this the whole time that

00:18:02,160 --> 00:18:06,870
tests are woefully insufficient and you

00:18:04,710 --> 00:18:09,870
gotta check stuff in production but like

00:18:06,870 --> 00:18:14,460
clearly even either your Tesla didn't

00:18:09,870 --> 00:18:16,830
complete or some al-haqq like and the

00:18:14,460 --> 00:18:19,530
best one by far is oh everything looks

00:18:16,830 --> 00:18:20,460
right like that right it's almost right

00:18:19,530 --> 00:18:20,790
we'll run the app and 3:00 in the

00:18:20,460 --> 00:18:25,830
morning

00:18:20,790 --> 00:18:27,690
ah but a lot like specificall about

00:18:25,830 --> 00:18:32,880
everything else right coming in from

00:18:27,690 --> 00:18:34,560
people who tend to clear mistake and

00:18:32,880 --> 00:18:35,940
whether it's mistake is because the

00:18:34,560 --> 00:18:37,800
Dodie code themselves and they don't

00:18:35,940 --> 00:18:39,360
want admit that their code is broken by

00:18:37,800 --> 00:18:41,190
coming if you have that problem dealing

00:18:39,360 --> 00:18:42,930
with people that somebody wrote the code

00:18:41,190 --> 00:18:43,500
and they're like oh it couldn't be my

00:18:42,930 --> 00:18:47,430
code

00:18:43,500 --> 00:18:49,920
oh yeah yeah it's also my code 100% of

00:18:47,430 --> 00:18:51,480
the time all the time or if you're

00:18:49,920 --> 00:18:52,890
sitting there trouble sure it's

00:18:51,480 --> 00:18:54,630
something and you're going down the

00:18:52,890 --> 00:18:57,270
wrong path a lot of people are too

00:18:54,630 --> 00:18:58,560
stubborn to back out back up and say no

00:18:57,270 --> 00:18:59,760
no no I think I know what the problem is

00:18:58,560 --> 00:19:03,290
I just need a little bit more time to

00:18:59,760 --> 00:19:05,760
try to get it to like full solution

00:19:03,290 --> 00:19:08,250
that's okay to fail even when you

00:19:05,760 --> 00:19:11,550
troubleshooting just accept it admit it

00:19:08,250 --> 00:19:14,490
and go on with your life on the other

00:19:11,550 --> 00:19:16,830
hand don't give up don't try one thing

00:19:14,490 --> 00:19:22,800
and I'm like look I tried nothing and

00:19:16,830 --> 00:19:24,540
nothing in did work like come on in

00:19:22,800 --> 00:19:26,280
I don't know about you but there was a

00:19:24,540 --> 00:19:30,480
few people who have worked with who felt

00:19:26,280 --> 00:19:32,520
like a solution or a problem is a

00:19:30,480 --> 00:19:34,740
personal insult and their ability to do

00:19:32,520 --> 00:19:37,140
whether it's because of the code or

00:19:34,740 --> 00:19:40,320
whether is because while I know better

00:19:37,140 --> 00:19:43,290
to do this like this is not the time

00:19:40,320 --> 00:19:47,370
like really and on the other side foot

00:19:43,290 --> 00:19:49,260
side of this don't be here don't don't

00:19:47,370 --> 00:19:51,480
assume that if you're trouble sure in it

00:19:49,260 --> 00:19:54,690
its own urine you're the only one

00:19:51,480 --> 00:19:56,550
responsible right and for help like

00:19:54,690 --> 00:19:59,580
there is other people your work on icky

00:19:56,550 --> 00:20:01,260
for weeks estimates for help if maybe

00:19:59,580 --> 00:20:02,910
somebody has a different skill set it

00:20:01,260 --> 00:20:04,890
maybe is just a different perspective

00:20:02,910 --> 00:20:11,670
and you were just staring at it for like

00:20:04,890 --> 00:20:15,690
one period of time so now let's talk

00:20:11,670 --> 00:20:16,920
about something different let's talk

00:20:15,690 --> 00:20:21,500
about some of the tools that would help

00:20:16,920 --> 00:20:27,510
you to charge and I get a drink not

00:20:21,500 --> 00:20:29,460
black so I'm not going to talk about

00:20:27,510 --> 00:20:32,310
specific tools that you choose but just

00:20:29,460 --> 00:20:32,700
rather a category and there are three of

00:20:32,310 --> 00:20:35,190
them

00:20:32,700 --> 00:20:40,290
there is logging there is monitoring and

00:20:35,190 --> 00:20:42,390
this profile so logging actually

00:20:40,290 --> 00:20:44,430
yesterday dog gave us really good talk

00:20:42,390 --> 00:20:46,560
here about logging if you haven't seen

00:20:44,430 --> 00:20:49,140
it I recommend like when it's gonna be

00:20:46,560 --> 00:20:52,800
available online or watching it a really

00:20:49,140 --> 00:20:55,290
good dog but in essence logging should

00:20:52,800 --> 00:20:59,430
be actionable it should be concise and

00:20:55,290 --> 00:21:01,020
issued apart so how many be heard of

00:20:59,430 --> 00:21:03,570
different log levels that you implement

00:21:01,020 --> 00:21:05,210
a system how many actually action of

00:21:03,570 --> 00:21:07,020
doing it

00:21:05,210 --> 00:21:12,960
how many of you are doing in the

00:21:07,020 --> 00:21:14,790
production don't please so the only

00:21:12,960 --> 00:21:17,850
thing that you should do log in the

00:21:14,790 --> 00:21:22,020
production is the errors that you can

00:21:17,850 --> 00:21:24,900
read and parse out Ito so again I'll

00:21:22,020 --> 00:21:26,340
give you an example so this you don't

00:21:24,900 --> 00:21:31,080
have to read the whole thing out walk

00:21:26,340 --> 00:21:34,080
through this this is a walk for a single

00:21:31,080 --> 00:21:35,880
request and it's actually really nice

00:21:34,080 --> 00:21:38,430
right it's over but the developer feel

00:21:35,880 --> 00:21:40,620
it is the real good job because it shows

00:21:38,430 --> 00:21:42,930
you cue and particularly you are indeed

00:21:40,620 --> 00:21:45,120
giving information some process and it's

00:21:42,930 --> 00:21:47,010
going through all the steps like it will

00:21:45,120 --> 00:21:48,720
further explain that in this process

00:21:47,010 --> 00:21:52,770
finishing the process everything is

00:21:48,720 --> 00:21:54,240
first so giving me nice dump of API data

00:21:52,770 --> 00:21:56,090
that it's got in bags and say it's

00:21:54,240 --> 00:22:01,740
completed in four hundred twenty seconds

00:21:56,090 --> 00:22:03,570
finishing really nice data except again

00:22:01,740 --> 00:22:05,310
when I'm a 3:00 in the morning I don't

00:22:03,570 --> 00:22:08,970
want to read that data I don't care

00:22:05,310 --> 00:22:10,179
about it all I care about is this I care

00:22:08,970 --> 00:22:12,069
about you UID

00:22:10,179 --> 00:22:14,619
and I care about that it's failed with

00:22:12,069 --> 00:22:17,139
the error code right everything else I

00:22:14,619 --> 00:22:18,639
can derive from other sources this is

00:22:17,139 --> 00:22:21,849
the only thing that will help you

00:22:18,639 --> 00:22:23,849
troubleshoot keep in mind that sense

00:22:21,849 --> 00:22:26,349
you've been able to find information

00:22:23,849 --> 00:22:27,849
rebuttal is really really extensive

00:22:26,349 --> 00:22:30,129
all right people don't think about it a

00:22:27,849 --> 00:22:32,129
lot but that request is like to cake

00:22:30,129 --> 00:22:34,329
which is not right

00:22:32,129 --> 00:22:36,669
multiply it by a thousand request effect

00:22:34,329 --> 00:22:38,619
which is not unreasonably to hide show

00:22:36,669 --> 00:22:41,019
big of trust right I mean I have systems

00:22:38,619 --> 00:22:43,599
that serve 100 successful well take a

00:22:41,019 --> 00:22:45,459
thousand requests multiplied by 60

00:22:43,599 --> 00:22:47,049
seconds right into web service which is

00:22:45,459 --> 00:22:47,409
a pre-sentence at Apple or dogs web

00:22:47,049 --> 00:22:55,089
server

00:22:47,409 --> 00:22:58,749
you're now collecting watching gig in

00:22:55,089 --> 00:23:03,399
minutes with my methods right something

00:22:58,749 --> 00:23:07,319
like that a minute so if you were to run

00:23:03,399 --> 00:23:09,189
in production for a day multiply that by

00:23:07,319 --> 00:23:11,169
24 times 60

00:23:09,189 --> 00:23:12,939
that's a lot bigger right that's a lot

00:23:11,169 --> 00:23:16,679
of data that you don't necessarily have

00:23:12,939 --> 00:23:19,929
to the store on the flip side of this

00:23:16,679 --> 00:23:24,159
monitoring should be owned closer you

00:23:19,929 --> 00:23:27,069
should monitor everything in anything it

00:23:24,159 --> 00:23:28,809
should be business first because really

00:23:27,069 --> 00:23:30,099
you're monitoring the health health of

00:23:28,809 --> 00:23:31,779
business like to talk about there's some

00:23:30,099 --> 00:23:33,519
in the business problem so all the

00:23:31,779 --> 00:23:35,079
technical metrics and CPU metrics or

00:23:33,519 --> 00:23:37,929
whatnot are just supported what you're

00:23:35,079 --> 00:23:39,729
trying to do and more important it

00:23:37,929 --> 00:23:42,339
should be correlated oh I don't know if

00:23:39,729 --> 00:23:44,619
that's actually award but you should be

00:23:42,339 --> 00:23:46,329
able to correlate your technical metrics

00:23:44,619 --> 00:23:47,769
to your business metrics and technical

00:23:46,329 --> 00:23:50,639
metrics to each other right understand

00:23:47,769 --> 00:23:53,939
what the problem so how many of you

00:23:50,639 --> 00:23:55,439
developers responsible for monitoring

00:23:53,939 --> 00:23:59,009
Wow

00:23:55,439 --> 00:23:59,009
we got to have a talk

00:23:59,350 --> 00:24:05,120
okay then so for from a certain

00:24:03,559 --> 00:24:07,610
perspective we should mind our

00:24:05,120 --> 00:24:09,740
everything right I mean from developers

00:24:07,610 --> 00:24:11,870
perspective especially since the system

00:24:09,740 --> 00:24:14,720
the systems civil right become more and

00:24:11,870 --> 00:24:16,570
more user facing and more and more

00:24:14,720 --> 00:24:19,039
integrated with the systems themselves

00:24:16,570 --> 00:24:20,870
you need to be able to understand what's

00:24:19,039 --> 00:24:24,470
happening system in production versus

00:24:20,870 --> 00:24:26,360
your friends so why mine isn't right we

00:24:24,470 --> 00:24:28,070
have all the tests and all the logs and

00:24:26,360 --> 00:24:29,480
everything else right that's the

00:24:28,070 --> 00:24:31,610
mentality of the lot of people right

00:24:29,480 --> 00:24:33,890
whenever they're sweet we help it works

00:24:31,610 --> 00:24:37,429
also we talked about why Google Finance

00:24:33,890 --> 00:24:39,500
or SMS so all the things change right so

00:24:37,429 --> 00:24:42,169
like I just talked about and when things

00:24:39,500 --> 00:24:43,429
change a change in production change on

00:24:42,169 --> 00:24:47,090
your laptop that aren't change your

00:24:43,429 --> 00:24:50,210
development environment and more likely

00:24:47,090 --> 00:24:52,909
than not things to change are things

00:24:50,210 --> 00:24:56,690
that are outside of your control right

00:24:52,909 --> 00:24:58,250
so here an example I had a project that

00:24:56,690 --> 00:25:00,789
was working on it was a marketing

00:24:58,250 --> 00:25:03,140
company with about 100 million users

00:25:00,789 --> 00:25:05,750
they sent about 1 billion emails a month

00:25:03,140 --> 00:25:09,500
but 300,000 hearts of pearl quads I have

00:25:05,750 --> 00:25:14,659
my other languages they have 5600

00:25:09,500 --> 00:25:16,850
metrics collective that included also so

00:25:14,659 --> 00:25:18,250
mentioned across the board and as always

00:25:16,850 --> 00:25:20,360
it starts with a phone call right

00:25:18,250 --> 00:25:22,940
customer calls effect everything is

00:25:20,360 --> 00:25:25,429
broken my site is down except this time

00:25:22,940 --> 00:25:29,260
Keiko's it goes Remy's down something is

00:25:25,429 --> 00:25:31,549
wrong that's okay

00:25:29,260 --> 00:25:33,650
so okay the grass because we were

00:25:31,549 --> 00:25:36,409
growing there - around everything yeah

00:25:33,650 --> 00:25:38,450
it is clearly as if I can remember right

00:25:36,409 --> 00:25:40,940
I mean it's not a little bit in the

00:25:38,450 --> 00:25:42,320
picture but and 15 percent dip in the

00:25:40,940 --> 00:25:47,059
revenue is pretty significant for a

00:25:42,320 --> 00:25:49,630
business right and I'm like okay like

00:25:47,059 --> 00:25:52,880
why do you think something's wrong right

00:25:49,630 --> 00:25:54,230
but let's take a look so we'll look at

00:25:52,880 --> 00:25:57,020
the user perceived performance right

00:25:54,230 --> 00:25:58,820
maybe something was pushed they decide

00:25:57,020 --> 00:26:01,880
for let people come to the site

00:25:58,820 --> 00:26:03,380
no performance history fun well could

00:26:01,880 --> 00:26:07,340
they database load because that's

00:26:03,380 --> 00:26:09,710
general performance bottleneck and at

00:26:07,340 --> 00:26:11,179
that point I'm talking to them I was

00:26:09,710 --> 00:26:12,980
like well maybe you should be doing your

00:26:11,179 --> 00:26:17,150
job better right maybe

00:26:12,980 --> 00:26:19,490
have yourself people go and sell but

00:26:17,150 --> 00:26:21,650
we'll continue digging and luckily we

00:26:19,490 --> 00:26:26,840
had the metrics of the email balance and

00:26:21,650 --> 00:26:28,760
email donor ability so apparently one of

00:26:26,840 --> 00:26:31,549
the major high speeds accidental

00:26:28,760 --> 00:26:33,590
blacklisted them and again I go back

00:26:31,549 --> 00:26:35,270
they send about Dylan and emails per

00:26:33,590 --> 00:26:37,460
month promotional email

00:26:35,270 --> 00:26:39,260
this is one of the major I forget what

00:26:37,460 --> 00:26:41,480
it was Yahoo or whether it was Google or

00:26:39,260 --> 00:26:44,419
whoever else but they're blacklisted it

00:26:41,480 --> 00:26:46,160
the deliverability dropped which means

00:26:44,419 --> 00:26:48,200
less people got emails less people

00:26:46,160 --> 00:26:55,010
quotes on a promotion less people bought

00:26:48,200 --> 00:26:57,230
something reading it yeah actually I had

00:26:55,010 --> 00:27:01,220
a very similar problem with a very

00:26:57,230 --> 00:27:04,220
similar symptoms where we didn't have a

00:27:01,220 --> 00:27:06,250
metric right so exactly same situation

00:27:04,220 --> 00:27:08,960
won't throw the metrics revenues down

00:27:06,250 --> 00:27:09,799
everything is fine it's just a decline

00:27:08,960 --> 00:27:11,360
rate too high

00:27:09,799 --> 00:27:12,740
all right that's a only thing we could

00:27:11,360 --> 00:27:14,630
figure out like your clients ready for

00:27:12,740 --> 00:27:15,890
it and I'm like I don't know I don't

00:27:14,630 --> 00:27:17,690
know what's happened maybe in getting

00:27:15,890 --> 00:27:19,580
hit like from one of those countries

00:27:17,690 --> 00:27:22,280
where they get some crazy currents like

00:27:19,580 --> 00:27:24,049
India is famous for that I think a

00:27:22,280 --> 00:27:26,809
genius famous of that object I don't

00:27:24,049 --> 00:27:28,970
know the coin rates are higher the next

00:27:26,809 --> 00:27:31,340
and which spans must have been employees

00:27:28,970 --> 00:27:33,679
five six hours or going for everything

00:27:31,340 --> 00:27:36,590
metrics database trying to find

00:27:33,679 --> 00:27:38,780
correlations enough and I'm talking

00:27:36,590 --> 00:27:41,870
about 5600 metrics like I'm not talking

00:27:38,780 --> 00:27:43,429
about like man to the next day I'm

00:27:41,870 --> 00:27:45,350
sitting there still haven't sort of

00:27:43,429 --> 00:27:47,870
probably have no idea what it is same

00:27:45,350 --> 00:27:50,450
customer calls it goes oh by the way can

00:27:47,870 --> 00:27:54,230
you take out the American Express logo

00:27:50,450 --> 00:27:55,490
from the website like why look oh we're

00:27:54,230 --> 00:27:59,260
having some distance with them so when

00:27:55,490 --> 00:27:59,260
I'm gonna accept them for a few weeks

00:27:59,410 --> 00:28:03,760
like again that information could have

00:28:01,880 --> 00:28:06,320
been brought to my attention yesterday

00:28:03,760 --> 00:28:07,700
but in no way would you bonnet or like

00:28:06,320 --> 00:28:10,040
you're quite right on individual credit

00:28:07,700 --> 00:28:12,910
right nobody's great enough to but after

00:28:10,040 --> 00:28:15,799
that I'm sure so later - - absolutely

00:28:12,910 --> 00:28:17,630
because don't estimate correlation

00:28:15,799 --> 00:28:19,820
applicants right so if I had the

00:28:17,630 --> 00:28:21,500
business metrics like the revenue and in

00:28:19,820 --> 00:28:24,269
one side and vulnerability in another

00:28:21,500 --> 00:28:26,729
side and like

00:28:24,269 --> 00:28:28,799
what L is a market initiative the third

00:28:26,729 --> 00:28:31,499
side now wouldn't be able to see at

00:28:28,799 --> 00:28:33,419
least imagine what's happening so when

00:28:31,499 --> 00:28:36,269
they say everything else would monitor

00:28:33,419 --> 00:28:37,469
by everything I mean and I mean systems

00:28:36,269 --> 00:28:40,289
I mean business logic

00:28:37,469 --> 00:28:42,570
I mean code I mean performance anything

00:28:40,289 --> 00:28:44,570
can think up should be monitor and put

00:28:42,570 --> 00:28:46,739
together

00:28:44,570 --> 00:28:49,619
yeah mindset I can talk about for a

00:28:46,739 --> 00:28:51,929
while so doctor we have to focus if

00:28:49,619 --> 00:28:54,989
you're interested in but now I want to

00:28:51,929 --> 00:28:57,599
move on to profile and profile is

00:28:54,989 --> 00:28:59,159
basically when you know what it's broken

00:28:57,599 --> 00:29:03,269
but you still have episode two no idea

00:28:59,159 --> 00:29:05,219
life right that's your all your system

00:29:03,269 --> 00:29:08,700
commands all your profile and tools or

00:29:05,219 --> 00:29:10,709
your tracing tools everything so again I

00:29:08,700 --> 00:29:12,839
have a lot of examples from my own when

00:29:10,709 --> 00:29:16,259
things get broken some of them I break

00:29:12,839 --> 00:29:18,629
myself but we had an issue where again

00:29:16,259 --> 00:29:23,219
it was horrible performance you're in a

00:29:18,629 --> 00:29:25,079
business season for foresight to deal

00:29:23,219 --> 00:29:27,659
with press like Christmas and whatnot

00:29:25,079 --> 00:29:29,129
and we couldn't figure out why the only

00:29:27,659 --> 00:29:30,509
thing we could figure out for one of the

00:29:29,129 --> 00:29:34,529
miners are symmetric that we had is a

00:29:30,509 --> 00:29:36,149
CPU load guy rang I have no idea why so

00:29:34,529 --> 00:29:38,579
here colleagues we pop a little D

00:29:36,149 --> 00:29:42,690
transcript how many view here what would

00:29:38,579 --> 00:29:43,950
you choice before in units each X is

00:29:42,690 --> 00:29:47,940
wonderful by the way

00:29:43,950 --> 00:29:48,570
awesome can say negative you see good

00:29:47,940 --> 00:29:51,299
things about it

00:29:48,570 --> 00:29:55,019
so basically gave me a really nice list

00:29:51,299 --> 00:29:57,269
of every URL hit and CPU used by that

00:29:55,019 --> 00:29:59,099
URL within like a minute period which is

00:29:57,269 --> 00:30:02,359
excellent because it gives me an

00:29:59,099 --> 00:30:07,799
aggregate value and it shows me that all

00:30:02,359 --> 00:30:09,749
they get all API calls or taking way too

00:30:07,799 --> 00:30:11,729
long an explicit I'll get all that right

00:30:09,749 --> 00:30:14,759
if you organize it was effective

00:30:11,729 --> 00:30:18,989
effective magnet magnet like there

00:30:14,759 --> 00:30:21,329
anything else so clearly it gives a good

00:30:18,989 --> 00:30:24,570
starting point to troubleshoot let's

00:30:21,329 --> 00:30:26,309
also show the one item was on the top 10

00:30:24,570 --> 00:30:29,519
list and none of the other items which

00:30:26,309 --> 00:30:31,649
is a whole different problem but it just

00:30:29,519 --> 00:30:33,419
shows you that doing a profile on the

00:30:31,649 --> 00:30:34,529
trying to figure out what's going on you

00:30:33,419 --> 00:30:35,780
can uncover things that you never

00:30:34,529 --> 00:30:37,340
thought about

00:30:35,780 --> 00:30:39,350
and then once you're covered those

00:30:37,340 --> 00:30:45,260
things you continue going down the

00:30:39,350 --> 00:30:47,270
rabbit hole we have done so let me talk

00:30:45,260 --> 00:30:49,490
to you talk through an anecdotal story

00:30:47,270 --> 00:30:51,890
because Olaf PHP this one is gonna

00:30:49,490 --> 00:30:58,400
involve PHP and PHP develop how long do

00:30:51,890 --> 00:31:00,560
i code so having you familiar with the

00:30:58,400 --> 00:31:03,410
cash Brian types of souls

00:31:00,560 --> 00:31:05,630
valgrind k growing in the profile and

00:31:03,410 --> 00:31:06,800
tools code asan basically what it does

00:31:05,630 --> 00:31:09,920
is gives you a really nice

00:31:06,800 --> 00:31:13,760
representation of where your code spends

00:31:09,920 --> 00:31:15,950
the most time processing so again had a

00:31:13,760 --> 00:31:19,460
performance issues and got something

00:31:15,950 --> 00:31:22,010
like that back which shows me that worth

00:31:19,460 --> 00:31:25,070
it worth the time step so looking at it

00:31:22,010 --> 00:31:29,810
it was unreserved at PHP they took 81%

00:31:25,070 --> 00:31:32,990
of the process which are rocket and with

00:31:29,810 --> 00:31:37,370
in bed so that unreserved PHP was called

00:31:32,990 --> 00:31:39,740
from header that Inc LM dying as you can

00:31:37,370 --> 00:31:42,080
imagine was a header file which was

00:31:39,740 --> 00:31:43,610
called on every single page okay so I

00:31:42,080 --> 00:31:44,990
can see it if something takes a long

00:31:43,610 --> 00:31:48,580
time and it's in every single page it

00:31:44,990 --> 00:31:50,960
starts to bring with it so this is what

00:31:48,580 --> 00:31:53,600
headed a ankles like you know only few

00:31:50,960 --> 00:31:55,820
file and I want to walk through them

00:31:53,600 --> 00:31:57,890
just to like I had to walk through a

00:31:55,820 --> 00:32:02,540
couple of times just to fully understand

00:31:57,890 --> 00:32:06,950
the beauty of this episode so in general

00:32:02,540 --> 00:32:08,870
what this function does is there is a

00:32:06,950 --> 00:32:11,210
shopping cart it's an e-commerce site so

00:32:08,870 --> 00:32:14,300
what the function there is to make sure

00:32:11,210 --> 00:32:16,070
the inventory is if the item ocean

00:32:14,300 --> 00:32:18,980
bought from shopping cart in X number of

00:32:16,070 --> 00:32:20,390
minutes hours days whatever beads it

00:32:18,980 --> 00:32:22,280
would call it traffic right basically

00:32:20,390 --> 00:32:24,800
put the items back on a reserved for me

00:32:22,280 --> 00:32:27,080
so what it will do it will go to the

00:32:24,800 --> 00:32:29,240
database and select all the items from

00:32:27,080 --> 00:32:33,800
everybody's shopping cart within that

00:32:29,240 --> 00:32:36,370
category right then for every item

00:32:33,800 --> 00:32:39,830
returned and I can't stress that enough

00:32:36,370 --> 00:32:42,440
it would go to the database and figure

00:32:39,830 --> 00:32:47,170
out how many items were the same ID or

00:32:42,440 --> 00:32:48,360
in order table that's n plus one problem

00:32:47,170 --> 00:32:49,559
so

00:32:48,360 --> 00:32:52,860
if there's certain items in the shopping

00:32:49,559 --> 00:32:54,150
cart you would run 11 queries even

00:32:52,860 --> 00:32:54,780
though there's a hundred items in the

00:32:54,150 --> 00:32:58,260
shopping cart

00:32:54,780 --> 00:33:00,870
it was 100 in one time in this 10,000

00:32:58,260 --> 00:33:04,679
items check the shopping cart you get

00:33:00,870 --> 00:33:11,700
the idea I would like to remind you this

00:33:04,679 --> 00:33:17,580
is included in header that Inc so after

00:33:11,700 --> 00:33:20,419
that it updates the item table to say

00:33:17,580 --> 00:33:23,760
the reserve to know I don't know why

00:33:20,419 --> 00:33:26,460
because the very next line it deletes

00:33:23,760 --> 00:33:30,540
from the items table with exactly the

00:33:26,460 --> 00:33:34,140
same ID so now we're looking at 3m plus

00:33:30,540 --> 00:33:36,950
one so when you have seven rows it's a

00:33:34,140 --> 00:33:41,190
31 queries if you have thousand rows

00:33:36,950 --> 00:33:44,340
it's a three thousand and one query the

00:33:41,190 --> 00:33:49,790
local finishes all that it sends them an

00:33:44,340 --> 00:33:49,790
email out that says crime has finished

00:33:50,540 --> 00:34:01,970
and after that that is not all that is

00:33:56,970 --> 00:34:07,350
not all after that it loads it to a file

00:34:01,970 --> 00:34:09,840
synchronously saying when and then it

00:34:07,350 --> 00:34:13,859
ran successfully again I would like to

00:34:09,840 --> 00:34:21,990
reiterate it runs on every single page

00:34:13,859 --> 00:34:25,409
request so you can find interesting

00:34:21,990 --> 00:34:27,780
things in a code when you do that so but

00:34:25,409 --> 00:34:29,840
troubleshoot is very educational as you

00:34:27,780 --> 00:34:34,169
can see you can find and cover really

00:34:29,840 --> 00:34:37,050
really really beautiful gems in there it

00:34:34,169 --> 00:34:38,190
is iterative right because frankly

00:34:37,050 --> 00:34:39,270
you're just going through that don't

00:34:38,190 --> 00:34:42,690
think oh I found the problem

00:34:39,270 --> 00:34:45,929
now that's worse than it though it is

00:34:42,690 --> 00:34:47,310
extremely frustrated and unalloyed it's

00:34:45,929 --> 00:34:49,379
not only freshening to troubleshoot

00:34:47,310 --> 00:34:51,350
somebody else's code it is also it's

00:34:49,379 --> 00:34:53,310
fresher and troubleshoot your own code

00:34:51,350 --> 00:34:55,649
because you look in the code was like

00:34:53,310 --> 00:35:00,890
who could possibly write this crap and

00:34:55,649 --> 00:35:03,480
you need to get blame as like oh yeah

00:35:00,890 --> 00:35:06,450
but it is rewarding right it is

00:35:03,480 --> 00:35:08,280
rewarding because at the end of the day

00:35:06,450 --> 00:35:13,109
you can solve the problem and Hawaii is

00:35:08,280 --> 00:35:15,599
one way or another that's actually it

00:35:13,109 --> 00:35:20,119
for me I'm all kind of time-lapse down

00:35:15,599 --> 00:35:20,119
for questions all right

00:35:26,320 --> 00:35:31,920
Oh No

00:35:44,940 --> 00:35:49,290
so important

00:35:58,130 --> 00:36:02,730
right so the question was like about

00:36:00,660 --> 00:36:04,980
debugging and production like we have no

00:36:02,730 --> 00:36:07,500
choice right different errors and fatal

00:36:04,980 --> 00:36:10,730
laws are not enough is there acceptable

00:36:07,500 --> 00:36:13,290
to enable like more debugging or traces

00:36:10,730 --> 00:36:16,290
right so yes the question is absolutely

00:36:13,290 --> 00:36:18,720
right I mean your goal your going at

00:36:16,290 --> 00:36:20,130
your doing it intentionally right it's

00:36:18,720 --> 00:36:22,050
not like you're building out terabytes

00:36:20,130 --> 00:36:24,210
of log files just because you forgot to

00:36:22,050 --> 00:36:27,150
disable the flag you're intentional

00:36:24,210 --> 00:36:31,650
going through through the risks through

00:36:27,150 --> 00:36:33,780
the performance hit through the by my

00:36:31,650 --> 00:36:35,280
station out on the sward through the

00:36:33,780 --> 00:36:36,630
capacity aggregation right you're

00:36:35,280 --> 00:36:38,190
intentional going further in order to

00:36:36,630 --> 00:36:40,890
get some information of course like none

00:36:38,190 --> 00:36:42,030
of this is like a rule set it so every

00:36:40,890 --> 00:36:43,830
one of those rules meant to be broken

00:36:42,030 --> 00:36:45,480
for one reason or another and that's a

00:36:43,830 --> 00:36:48,780
great rule if you need more debuggers i

00:36:45,480 --> 00:36:50,820
so many times i went in and enable debug

00:36:48,780 --> 00:36:52,650
and play or edit initial and justin

00:36:50,820 --> 00:36:55,650
production just remove them get even put

00:36:52,650 --> 00:36:57,810
them in version control it's not the

00:36:55,650 --> 00:36:59,250
best practice but again and 3:00 in the

00:36:57,810 --> 00:37:02,540
morning you do what's possible and then

00:36:59,250 --> 00:37:02,540
back to isil in syria go

00:37:13,610 --> 00:37:16,210
yeah

00:37:16,330 --> 00:37:21,280
so this is metric there is a couple of

00:37:18,760 --> 00:37:23,080
ways ability a lot of to success right

00:37:21,280 --> 00:37:25,750
the measures to be aggressive showed you

00:37:23,080 --> 00:37:27,550
what folks are gonna the community

00:37:25,750 --> 00:37:29,800
either escaped on board whatever be and

00:37:27,550 --> 00:37:33,370
basically they accept any type of

00:37:29,800 --> 00:37:34,780
numeric or text metric the to attempt so

00:37:33,370 --> 00:37:36,730
you will it really doesn't care whether

00:37:34,780 --> 00:37:40,560
you name it you four ways and then you

00:37:36,730 --> 00:37:40,560
for the definition I guess wherever be

00:37:41,040 --> 00:37:46,270
you can send some of that to graphite if

00:37:43,930 --> 00:37:47,800
using that free partner open-source on

00:37:46,270 --> 00:37:49,600
use for fun on top of this it displays

00:37:47,800 --> 00:37:51,130
there's a lot of mines and solution so

00:37:49,600 --> 00:37:52,390
they're dated of some of that some of

00:37:51,130 --> 00:37:55,030
that although they have skill and

00:37:52,390 --> 00:37:59,410
problems but the way you send those the

00:37:55,030 --> 00:38:01,570
information so general you get those

00:37:59,410 --> 00:38:02,860
metrics from something so one of the

00:38:01,570 --> 00:38:05,290
challenges of course is getting the

00:38:02,860 --> 00:38:07,900
business because this is nothing like

00:38:05,290 --> 00:38:10,390
sharing metric like what's be honest

00:38:07,900 --> 00:38:11,980
like I had situation where I was sitting

00:38:10,390 --> 00:38:15,490
there staring the graph when all of a

00:38:11,980 --> 00:38:16,840
sudden I see like swarm of people just

00:38:15,490 --> 00:38:18,520
come to the side and then just shuffle

00:38:16,840 --> 00:38:20,140
I'm like what is happening like didn't

00:38:18,520 --> 00:38:22,990
if anything these performances increase

00:38:20,140 --> 00:38:24,640
just because something happened like one

00:38:22,990 --> 00:38:26,650
floor above marketing stop in Champaign

00:38:24,640 --> 00:38:28,120
because their promotion was a difficult

00:38:26,650 --> 00:38:31,630
more successful than the third right

00:38:28,120 --> 00:38:33,520
which we had no idea so the other

00:38:31,630 --> 00:38:35,440
information for from business people is

00:38:33,520 --> 00:38:36,640
challenge but there is sort information

00:38:35,440 --> 00:38:38,410
that you already have right if you have

00:38:36,640 --> 00:38:41,710
access to the database you can get the

00:38:38,410 --> 00:38:43,060
revenue right you can get this done

00:38:41,710 --> 00:38:45,040
further if you have access to Google

00:38:43,060 --> 00:38:47,560
Analytics you have business information

00:38:45,040 --> 00:38:50,020
that you can pop it so you can get all

00:38:47,560 --> 00:38:51,340
of that in and the rest is you have to

00:38:50,020 --> 00:38:55,540
work for the business unfortunate for

00:38:51,340 --> 00:38:57,790
now the way you do is the result there

00:38:55,540 --> 00:39:01,900
is a job there is a program called

00:38:57,790 --> 00:39:04,690
Redmond it's basically allows you it

00:39:01,900 --> 00:39:06,250
runs like a mini diamond they should

00:39:04,690 --> 00:39:08,200
compile the data so they can send it to

00:39:06,250 --> 00:39:09,760
the monitor associative choice I think

00:39:08,200 --> 00:39:12,490
it's probably so you can write a lot of

00:39:09,760 --> 00:39:14,800
modules or exercise

00:39:12,490 --> 00:39:16,990
yeah and generally like the best way of

00:39:14,800 --> 00:39:18,610
doing it is to fight a whole bunch of

00:39:16,990 --> 00:39:20,890
queries a whole bunch of system noise

00:39:18,610 --> 00:39:23,550
request you organize it in what's good

00:39:20,890 --> 00:39:23,550
what's not and

00:39:25,490 --> 00:39:32,420
have a question yes

00:39:43,430 --> 00:39:46,000
yeah

00:39:46,800 --> 00:39:51,480
yeah yeah yeah it's very very actually

00:39:49,050 --> 00:39:53,460
if you're interested at so they're going

00:39:51,480 --> 00:39:56,630
to be monitoring pathetically monitor

00:39:53,460 --> 00:39:58,680
emits a great with it

00:39:56,630 --> 00:40:03,860
phenomenal pearl people anywhere

00:39:58,680 --> 00:40:03,860
everyone yeah yeah yeah yep

00:40:06,230 --> 00:40:16,229
oh thank you

00:40:09,340 --> 00:40:16,229

YouTube URL: https://www.youtube.com/watch?v=sNjm3ul5WYo


