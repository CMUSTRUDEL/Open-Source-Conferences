Title: LIGHTNING TALK: Henry Van Styn - "dockup.sh â€“ plackup via docker"
Publication date: 2018-06-21
Playlist: TPC 2018 in SLC
Description: 
	
Captions: 
	00:00:00,060 --> 00:00:04,890
my name is Henry van stein some of you

00:00:02,520 --> 00:00:06,420
may know me as the rapid app guy but

00:00:04,890 --> 00:00:08,639
today I'm going to be talking about a

00:00:06,420 --> 00:00:13,080
simpler more general purpose tool that I

00:00:08,639 --> 00:00:15,809
wrote called doc up sh this is a bash

00:00:13,080 --> 00:00:19,260
script for running plaque PS GI web apps

00:00:15,809 --> 00:00:22,350
with docker it's designed as a mostly

00:00:19,260 --> 00:00:24,869
drop-in replacement for plaque up which

00:00:22,350 --> 00:00:27,090
means that just like with plaque up you

00:00:24,869 --> 00:00:29,640
run it in a directory that contains a

00:00:27,090 --> 00:00:33,510
valid plaque app which means a a PS GI

00:00:29,640 --> 00:00:35,430
file it will start the app this is the

00:00:33,510 --> 00:00:38,160
synopsis of the script but you can get

00:00:35,430 --> 00:00:43,350
with - - help but let's actually take a

00:00:38,160 --> 00:00:46,920
look at it I'm in a directory here that

00:00:43,350 --> 00:00:49,289
has a plaque app my LS we see there's an

00:00:46,920 --> 00:00:51,660
app top PS G I so I can do

00:00:49,289 --> 00:00:55,230
good old normal plaque up accepting

00:00:51,660 --> 00:01:00,539
connections on port 5,000 and I can come

00:00:55,230 --> 00:01:03,270
in localhost 5,000 and the site loads

00:01:00,539 --> 00:01:05,700
and this is this is the slideshow that I

00:01:03,270 --> 00:01:08,820
use the last time we were here in Salt

00:01:05,700 --> 00:01:11,990
Lake City so come back cancel that

00:01:08,820 --> 00:01:16,619
instead of typing plaque up we can type

00:01:11,990 --> 00:01:18,060
doc up and it will do its thing and do

00:01:16,619 --> 00:01:21,170
the same thing it gets default port

00:01:18,060 --> 00:01:21,170
though is 5200

00:01:23,390 --> 00:01:29,730
localhost 40 50 200 you see that it's

00:01:27,690 --> 00:01:36,780
the same thing but now it's running

00:01:29,730 --> 00:01:39,600
through docker so this script actually

00:01:36,780 --> 00:01:42,000
uses the docker hub image rappy PS GI

00:01:39,600 --> 00:01:44,010
which does the actual heavy lifting the

00:01:42,000 --> 00:01:46,710
dock up script just generates the

00:01:44,010 --> 00:01:48,600
appropriate docker run commands this was

00:01:46,710 --> 00:01:51,570
originally written for rapid app but it

00:01:48,600 --> 00:01:52,140
works with any PS gif so how is this

00:01:51,570 --> 00:01:54,600
useful

00:01:52,140 --> 00:01:56,880
well main thing portability it runs

00:01:54,600 --> 00:01:58,710
anyplace with docker and bash you don't

00:01:56,880 --> 00:02:01,740
even need to have Perl that means it

00:01:58,710 --> 00:02:03,720
runs on Mac it runs on Linux runs on

00:02:01,740 --> 00:02:06,390
Windows and yes it runs on your buddy

00:02:03,720 --> 00:02:08,280
pot your buddies Python computer who

00:02:06,390 --> 00:02:11,250
refuses to install Perl to check out

00:02:08,280 --> 00:02:12,930
your app the first run will

00:02:11,250 --> 00:02:14,520
automatically pull the required images

00:02:12,930 --> 00:02:16,800
from docker hub so you really don't need

00:02:14,520 --> 00:02:18,540
anything except the standard install of

00:02:16,800 --> 00:02:20,370
docker and run the command and it'll

00:02:18,540 --> 00:02:22,200
just work this also gives you a

00:02:20,370 --> 00:02:23,880
consistent environment with a modern

00:02:22,200 --> 00:02:25,800
Perl which is currently based on 5:00 to

00:02:23,880 --> 00:02:27,870
6:00 and then it's easy to maintain

00:02:25,800 --> 00:02:29,880
consistency between Devon production

00:02:27,870 --> 00:02:32,640
when you use docker in general when you

00:02:29,880 --> 00:02:34,890
then deploy with docker you have this

00:02:32,640 --> 00:02:37,080
exactly the same stack exactly the same

00:02:34,890 --> 00:02:39,650
versions of everything so you may be

00:02:37,080 --> 00:02:43,010
asking is what about Sipan modules so

00:02:39,650 --> 00:02:44,970
because it is a docker hub image

00:02:43,010 --> 00:02:47,940
everything is already baked in there's

00:02:44,970 --> 00:02:50,850
already a complete stack installed that

00:02:47,940 --> 00:02:53,430
you use and again the stack for this is

00:02:50,850 --> 00:02:55,680
based on rapid app wrap it up pulls in

00:02:53,430 --> 00:03:00,540
catalyst and catalyst already installs

00:02:55,680 --> 00:03:02,670
most of Sipan so chances are chances are

00:03:00,540 --> 00:03:04,500
the module you need is already in there

00:03:02,670 --> 00:03:07,500
however if it isn't if it isn't you have

00:03:04,500 --> 00:03:10,110
two simple options one you can include a

00:03:07,500 --> 00:03:12,480
Sipan file in your app directory and any

00:03:10,110 --> 00:03:14,610
any missing dependencies are

00:03:12,480 --> 00:03:16,260
automatically installed at runtime now

00:03:14,610 --> 00:03:17,459
that's a little slow or it depends on

00:03:16,260 --> 00:03:19,140
what you're installing some things won't

00:03:17,459 --> 00:03:21,390
install very quickly but if you don't

00:03:19,140 --> 00:03:24,060
want to have that slow startup time you

00:03:21,390 --> 00:03:26,160
can also simply extend the wrap-ups gie

00:03:24,060 --> 00:03:27,780
docker hub image into your own image to

00:03:26,160 --> 00:03:30,030
roll in whatever you want and this is

00:03:27,780 --> 00:03:33,150
actually very very simple you write a

00:03:30,030 --> 00:03:34,920
docker file in this case this is all

00:03:33,150 --> 00:03:36,000
that would be necessary to do that in

00:03:34,920 --> 00:03:38,760
this case I'm adding

00:03:36,000 --> 00:03:40,320
I owe all and keyword declare as an

00:03:38,760 --> 00:03:42,690
example and you can bake in anything

00:03:40,320 --> 00:03:44,550
that you want and then you just build

00:03:42,690 --> 00:03:47,520
your own image with docker build and

00:03:44,550 --> 00:03:49,650
then when you run the doc up command you

00:03:47,520 --> 00:03:53,610
just use the - I my image option and

00:03:49,650 --> 00:03:55,380
it'll now run your image also to make

00:03:53,610 --> 00:03:57,810
this super quick and out of the box and

00:03:55,380 --> 00:04:00,990
this is also inspired by pearl brew I

00:03:57,810 --> 00:04:04,650
added a quick installer where you can

00:04:00,990 --> 00:04:07,560
just copy and paste this right to any

00:04:04,650 --> 00:04:10,940
system and it'll download and install

00:04:07,560 --> 00:04:12,959
the script for you and it'll just work

00:04:10,940 --> 00:04:15,330
so here are some links and resources

00:04:12,959 --> 00:04:18,150
everything you can find everything

00:04:15,330 --> 00:04:20,040
through rapido slash doc up that'll

00:04:18,150 --> 00:04:21,959
actually take you to the git repo and

00:04:20,040 --> 00:04:24,680
then these other links here which are

00:04:21,959 --> 00:04:27,660
the the repo link and the docker hub

00:04:24,680 --> 00:04:31,800
link are can be found through there so

00:04:27,660 --> 00:04:33,990
if we pull that up here's the git repo

00:04:31,800 --> 00:04:35,520
and the readme that has plenty of

00:04:33,990 --> 00:04:39,630
information in here including here's the

00:04:35,520 --> 00:04:43,820
links to the to the slides rapido at TPC

00:04:39,630 --> 00:04:47,640
2018 and other information links to the

00:04:43,820 --> 00:04:48,960
wrap-ups GI on docker hub which again

00:04:47,640 --> 00:04:51,210
it's the thing that does the heavy

00:04:48,960 --> 00:04:53,490
lifting and it has lots of features and

00:04:51,210 --> 00:04:55,410
capabilities to be able to let you do

00:04:53,490 --> 00:04:58,460
all sorts of things so check it out

00:04:55,410 --> 00:04:58,460
that's all I have thank you

00:05:00,240 --> 00:05:03,699

YouTube URL: https://www.youtube.com/watch?v=dvPOyzR1F_w


