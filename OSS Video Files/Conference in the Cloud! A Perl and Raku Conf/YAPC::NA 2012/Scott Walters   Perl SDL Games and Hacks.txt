Title: Scott Walters   Perl SDL Games and Hacks
Publication date: 2013-08-20
Playlist: YAPC::NA 2012
Description: 
	
Captions: 
	00:00:00,000 --> 00:00:05,100
why location and then a bite indicating

00:00:02,879 --> 00:00:08,910
what type of thing to draw and then one

00:00:05,100 --> 00:00:10,800
or two zero or one bites of arguments

00:00:08,910 --> 00:00:13,049
for that and then it uses that bite into

00:00:10,800 --> 00:00:15,000
as a offset into a jump table and calls

00:00:13,049 --> 00:00:17,580
a function to draw something on the

00:00:15,000 --> 00:00:19,109
screen representing whatever it is so

00:00:17,580 --> 00:00:22,640
there's a function for drawing hills and

00:00:19,109 --> 00:00:29,160
a function for drawing clouds so explain

00:00:22,640 --> 00:00:30,420
that would be some more work yes let's

00:00:29,160 --> 00:00:38,000
try and get back on the network right

00:00:30,420 --> 00:00:38,000
here pick the next will never end

00:01:01,320 --> 00:01:05,850
okay finite state automata enemies I

00:01:03,930 --> 00:01:08,420
promise you guys finally say to someone

00:01:05,850 --> 00:01:08,420
enemies um

00:01:15,060 --> 00:01:22,680
everything in the boulder dash universe

00:01:16,920 --> 00:01:24,060
is the enemies and the objects in there

00:01:22,680 --> 00:01:26,520
which are subject to his little physics

00:01:24,060 --> 00:01:27,960
system don't exist outside of the tiles

00:01:26,520 --> 00:01:29,670
on the screen memory every bit of

00:01:27,960 --> 00:01:33,960
intelligence contained in the enemies

00:01:29,670 --> 00:01:36,450
and and all of the behaviors all of the

00:01:33,960 --> 00:01:37,860
memory related to the state the

00:01:36,450 --> 00:01:43,220
behaviors are in or what they're doing

00:01:37,860 --> 00:01:43,220
is contained in the tiles on the screen

00:01:44,720 --> 00:01:51,899
I've got I've got this buffer of tiles

00:01:49,409 --> 00:01:55,020
that I enter eight through which is the

00:01:51,899 --> 00:01:57,000
same world that Mario exists in and I go

00:01:55,020 --> 00:01:59,819
from the bottom of the screen up and

00:01:57,000 --> 00:02:01,709
from the left to the right bunny and I

00:01:59,819 --> 00:02:06,750
find out which tile is currently in the

00:02:01,709 --> 00:02:09,590
map and what you've seen the Firefly is

00:02:06,750 --> 00:02:09,590
in a bullet

00:02:17,150 --> 00:02:30,860
we're actually doing levels now that

00:02:20,060 --> 00:02:32,329
wasn't cheese grater yeah these the of

00:02:30,860 --> 00:02:35,000
these get copied right into a two

00:02:32,329 --> 00:02:39,680
dimensional array just verbatim well

00:02:35,000 --> 00:02:42,170
almost verbatim w and there corresponds

00:02:39,680 --> 00:02:45,349
to the w that this thing's looking for

00:02:42,170 --> 00:02:46,879
there okay fireflies so the Firefly

00:02:45,349 --> 00:02:48,769
likes to cruise around the edge of the

00:02:46,879 --> 00:02:52,099
thing and what runs certain things that

00:02:48,769 --> 00:02:53,840
blows up so but there's actually four

00:02:52,099 --> 00:02:55,690
different icons that are the Firefly

00:02:53,840 --> 00:02:58,730
they look identical to each other

00:02:55,690 --> 00:03:00,470
graphics but they're four of them one of

00:02:58,730 --> 00:03:02,180
them is the first one is the one that's

00:03:00,470 --> 00:03:05,359
moving left the second one is the one

00:03:02,180 --> 00:03:06,799
moving up then right and down I think

00:03:05,359 --> 00:03:14,599
we'll continue in the direction it's

00:03:06,799 --> 00:03:19,459
going first if it runs into me hood was

00:03:14,599 --> 00:03:22,040
actually jacked from some JavaScript but

00:03:19,459 --> 00:03:29,139
then I'm up down left or right of him

00:03:22,040 --> 00:03:32,169
and then it explodes with rusev on of

00:03:29,139 --> 00:03:34,849
rocks falling in fireflies for example

00:03:32,169 --> 00:03:37,720
Rock handling logical it's for fireflies

00:03:34,849 --> 00:03:37,720
or other things are you

00:03:43,990 --> 00:03:46,050
you

00:03:46,120 --> 00:03:50,580
oh well the first thing that does is it

00:03:48,010 --> 00:03:59,230
tries to turn left and then computes it

00:03:50,580 --> 00:04:00,909
left its current direction otherwise if

00:03:59,230 --> 00:04:06,310
this direction that it's currently going

00:04:00,909 --> 00:04:09,730
the space there but when it goes

00:04:06,310 --> 00:04:13,989
somewhere I'm replacing buzz with a

00:04:09,730 --> 00:04:21,549
space but which Firefly goes there is

00:04:13,989 --> 00:04:27,310
computed our flight is going right and

00:04:21,549 --> 00:04:29,320
there's a of annual turns to fire that

00:04:27,310 --> 00:04:31,630
it needs to continue circling around the

00:04:29,320 --> 00:04:34,539
edge of the level all the enemies in

00:04:31,630 --> 00:04:36,280
Super Mario Brothers 3 are similar know

00:04:34,539 --> 00:04:37,870
that some other kind of similar they're

00:04:36,280 --> 00:04:39,639
not entirely contained in memory but

00:04:37,870 --> 00:04:42,370
each of them only has a bite or two of

00:04:39,639 --> 00:04:44,289
state data in addition to the location

00:04:42,370 --> 00:04:45,760
on the screen that keeps track of what

00:04:44,289 --> 00:04:48,400
they're doing is there a timer counting

00:04:45,760 --> 00:04:51,820
down before the para Goomba starts

00:04:48,400 --> 00:04:53,680
flying again whatever is it heading

00:04:51,820 --> 00:04:56,260
towards you right now is it heading left

00:04:53,680 --> 00:04:58,479
or is it heading right in each case

00:04:56,260 --> 00:05:00,550
other things can act on it and it can

00:04:58,479 --> 00:05:02,500
change its state or it can run into

00:05:00,550 --> 00:05:05,260
different conditions change its own

00:05:02,500 --> 00:05:07,870
state but the simulation of enemies is

00:05:05,260 --> 00:05:10,120
is just a simple rules machine where you

00:05:07,870 --> 00:05:12,039
have your currently executing one rule

00:05:10,120 --> 00:05:15,240
and maybe under certain conditions you

00:05:12,039 --> 00:05:15,240
start executing other rules

00:05:21,400 --> 00:05:30,910
no love you might have to one of the

00:05:27,530 --> 00:05:30,910
home built one of these I

00:06:08,810 --> 00:06:17,540
hey let's look at some joystick open

00:06:10,700 --> 00:06:18,770
code that doesn't work Oh of interest of

00:06:17,540 --> 00:06:22,160
the state machine there's a table here

00:06:18,770 --> 00:06:25,250
of rather the first two are concerned

00:06:22,160 --> 00:06:26,840
with Mario I ripped out the 6502 that

00:06:25,250 --> 00:06:28,070
does the same thing doctors look up in

00:06:26,840 --> 00:06:30,410
here instead rather you can enter it

00:06:28,070 --> 00:06:32,120
from the bottom and sides and rather you

00:06:30,410 --> 00:06:34,460
can enter it from the top the top solid

00:06:32,120 --> 00:06:37,100
and then you land on ground it affects

00:06:34,460 --> 00:06:41,030
how boulders roll off explodable means

00:06:37,100 --> 00:06:45,130
that if a firefly hits it up consumable

00:06:41,030 --> 00:06:45,130
means it gets used up in an explosion

00:06:47,080 --> 00:06:51,220
sprite sheet sets

00:07:03,510 --> 00:07:10,610
this happens when I start writing pearl

00:07:05,220 --> 00:07:14,750
but I've got 3,400 lines in one file

00:07:10,610 --> 00:07:14,750
what happens when you don't hear

00:07:39,930 --> 00:07:44,639
I know this problem with this laptop

00:07:42,539 --> 00:07:45,990
it's going to touch screen so when it

00:07:44,639 --> 00:07:49,669
tries open the first choice think it's

00:07:45,990 --> 00:07:49,669
actually opening the touchscreen a

00:07:50,389 --> 00:08:12,720
little hacking their train worth around

00:07:52,500 --> 00:08:13,800
that oh my god let scare me this is what

00:08:12,720 --> 00:08:15,150
I really wanted to do I didn't actually

00:08:13,800 --> 00:08:16,620
want to talk to you about games just

00:08:15,150 --> 00:08:19,590
wanted to sit here and play my hacked up

00:08:16,620 --> 00:08:27,599
Mario will you chat it on I don't know

00:08:19,590 --> 00:08:29,009
what I made this level eat I spent about

00:08:27,599 --> 00:08:33,810
two hours last night making this level

00:08:29,009 --> 00:08:44,120
easier and easier and easier no too late

00:08:33,810 --> 00:08:47,970
way too late get it get it oh no well

00:08:44,120 --> 00:08:49,320
what I want to do is that's the exit you

00:08:47,970 --> 00:08:51,330
can't see every well so how do you drop

00:08:49,320 --> 00:08:52,980
boulders on it well he's on top of the

00:08:51,330 --> 00:09:01,920
bricks there I can blow a hole through

00:08:52,980 --> 00:09:03,720
the bricks and get to the exit and also

00:09:01,920 --> 00:09:05,930
that's not the ideal block to try and

00:09:03,720 --> 00:09:05,930
hit

00:09:06,660 --> 00:09:11,080
and apparently i need the select button

00:09:09,190 --> 00:09:22,390
to restart the level because right now

00:09:11,080 --> 00:09:27,520
control sees i'm doomed kill yourself so

00:09:22,390 --> 00:09:38,910
i have the wrong one time to destroy

00:09:27,520 --> 00:09:38,910
boulders whoops whoops well

00:09:43,620 --> 00:10:07,140
oh but that's gonna get me yeah Brock's

00:10:05,370 --> 00:10:22,380
the levels are less obnoxious I might

00:10:07,140 --> 00:10:32,010
have to dying was effective life I like

00:10:22,380 --> 00:10:36,510
to try that there there are hundreds of

00:10:32,010 --> 00:10:38,670
mario clones but Kate the cores was the

00:10:36,510 --> 00:10:40,170
only one that I saw for Pearl it gets

00:10:38,670 --> 00:10:42,300
away unless I really land on his head

00:10:40,170 --> 00:10:46,070
the way I think I'm think I'm being

00:10:42,300 --> 00:10:46,070
premature i think i need to chill a bit

00:10:54,670 --> 00:11:01,840
oh that's no good all right well if we

00:10:59,860 --> 00:11:07,210
have some time left over I'll come back

00:11:01,840 --> 00:11:09,580
to this in the the finite state automata

00:11:07,210 --> 00:11:11,080
rocks if they're on top of something

00:11:09,580 --> 00:11:15,420
else that is marked rounded they'll roll

00:11:11,080 --> 00:11:15,420
off the side there's sand that

00:11:34,540 --> 00:11:42,889
the sand works kind of like rock except

00:11:41,269 --> 00:11:49,329
it spreads out more it doesn't kill you

00:11:42,889 --> 00:11:53,779
when you land on it and scratched on

00:11:49,329 --> 00:11:55,490
dirt itself it finds them the body of it

00:11:53,779 --> 00:11:57,470
and if any part of the body of the dirt

00:11:55,490 --> 00:11:59,240
if any of the connected or touching

00:11:57,470 --> 00:12:01,610
tiles are supported by anything it stays

00:11:59,240 --> 00:12:04,009
up there the wood blocks you have to

00:12:01,610 --> 00:12:08,629
there has to be something on piled up on

00:12:04,009 --> 00:12:13,490
one of the sides of them so as long as

00:12:08,629 --> 00:12:15,709
there's something above or below

00:12:13,490 --> 00:12:23,540
directly below below left blow right

00:12:15,709 --> 00:12:25,399
they will stay up you can dig in the

00:12:23,540 --> 00:12:32,990
dirt if I could take that out and

00:12:25,399 --> 00:12:36,259
managed to escape but all of these all

00:12:32,990 --> 00:12:39,170
of these different behaviors were just

00:12:36,259 --> 00:12:40,730
coated with keeping some stake in and

00:12:39,170 --> 00:12:45,230
then a rock falls under you die if I do

00:12:40,730 --> 00:12:47,029
that just keeping track of the state the

00:12:45,230 --> 00:12:48,019
boulders go from a stationary boulder to

00:12:47,029 --> 00:12:49,459
a falling boulder when they're

00:12:48,019 --> 00:12:50,600
stationary boulders they don't kill you

00:12:49,459 --> 00:12:52,550
in your blow them and they're falling

00:12:50,600 --> 00:12:54,019
boulder they do they only turn into a

00:12:52,550 --> 00:12:56,660
falling boulder when they notice there's

00:12:54,019 --> 00:12:58,579
nothing below but they both both of them

00:12:56,660 --> 00:12:59,720
have the same icon on the map but

00:12:58,579 --> 00:13:01,550
there's actually two different things

00:12:59,720 --> 00:13:04,069
and just that one bit of data which

00:13:01,550 --> 00:13:07,490
boulder they are is encapsulate the

00:13:04,069 --> 00:13:13,240
dynamic part of their behavior will

00:13:07,490 --> 00:13:13,240
simplify now

00:13:38,170 --> 00:13:40,829
good

00:13:50,630 --> 00:13:54,050
looks like it

00:14:25,190 --> 00:14:40,390
yep I'm dead die you only see the

00:14:30,620 --> 00:14:40,390
asteroid switch loads I die before it

00:14:41,920 --> 00:14:47,150
okay well if you tell it if you have a

00:14:44,150 --> 00:14:55,820
real ex terminal and you oh god i'm

00:14:47,150 --> 00:14:58,550
alive help um you Oh shaggy well

00:14:55,820 --> 00:15:04,520
everything moves relative around me so

00:14:58,550 --> 00:15:08,120
my main hope is so you're probably

00:15:04,520 --> 00:15:12,950
familiar with the deck vt100 or VT 220

00:15:08,120 --> 00:15:20,030
terminal which what 2003 Celeste net

00:15:12,950 --> 00:15:22,510
2003 this is company tektronix it's no

00:15:20,030 --> 00:15:22,510
14 there

00:15:30,800 --> 00:15:37,700
yeah that's kind of pretty so well deck

00:15:36,320 --> 00:15:39,740
was making these terminals at display

00:15:37,700 --> 00:15:45,830
text tektronix was making these journals

00:15:39,740 --> 00:15:48,290
graphing for cad-cam and whatever it's a

00:15:45,830 --> 00:15:56,680
company that's me Phyllis scopes I'm

00:15:48,290 --> 00:16:00,019
gonna um okay that makes oh there's a

00:15:56,680 --> 00:16:04,760
I'll never to port tuna 2003 on slow ass

00:16:00,019 --> 00:16:11,450
done men real ex terminal r XV t doesn't

00:16:04,760 --> 00:16:12,649
work up its logic out they had digital

00:16:11,450 --> 00:16:14,329
of transpiration making this thing

00:16:12,649 --> 00:16:16,370
displace texture make nests and displays

00:16:14,329 --> 00:16:20,560
graphics but X terminal becomes with

00:16:16,370 --> 00:16:27,890
UNIX as an emulation mode for tektronix

00:16:20,560 --> 00:16:29,649
in one player it then if you want to

00:16:27,890 --> 00:16:40,850
respawn you have to disconnect with

00:16:29,649 --> 00:16:42,380
right bracket and then um so with the

00:16:40,850 --> 00:16:44,839
tektronix turmoil which thing emulates

00:16:42,380 --> 00:16:48,140
you can draw a vector graphics / telnet

00:16:44,839 --> 00:16:50,209
and read mouse position and it's just

00:16:48,140 --> 00:16:54,850
beast from the seventies it's a it's a

00:16:50,209 --> 00:16:58,610
fridge ish okay it's a large dorm fridge

00:16:54,850 --> 00:17:01,240
pedestal terminal it doesn't have

00:16:58,610 --> 00:17:01,240
computer in it

00:17:04,860 --> 00:17:13,470
and Max emulate this thing too that's

00:17:10,860 --> 00:17:15,299
not a CL but if you make vectorgames if

00:17:13,470 --> 00:17:18,799
you make line drawing games put them on

00:17:15,299 --> 00:17:18,799
the internet and no one will play them

00:17:19,280 --> 00:17:26,689
they're a cooperative multiplayer on so

00:17:22,380 --> 00:17:26,689
asteroids sinus is big

00:17:34,300 --> 00:17:38,910
um one of them is random asteroids

00:17:43,080 --> 00:17:48,730
Ashley this was the draw routine part of

00:17:46,420 --> 00:17:53,740
one of the methods object knows how to

00:17:48,730 --> 00:17:58,870
draw all over the shape of the finish

00:17:53,740 --> 00:18:04,060
her leaved in art a length of distance

00:17:58,870 --> 00:18:06,430
along a radius so large radius and then

00:18:04,060 --> 00:18:08,680
art to a smaller radius and then I'll

00:18:06,430 --> 00:18:13,990
have an apart it is and then an art

00:18:08,680 --> 00:18:16,990
color asteroid shape and it's really

00:18:13,990 --> 00:18:19,510
easy to rotate because all i have to do

00:18:16,990 --> 00:18:28,180
when i started is pre add some to the

00:18:19,510 --> 00:18:35,770
arc so well I i increment lee had the

00:18:28,180 --> 00:18:48,760
article together also got a hard nose x

00:18:35,770 --> 00:18:50,590
and y and from eating the mark have two

00:18:48,760 --> 00:18:56,440
dimensional rotated shape that I've

00:18:50,590 --> 00:18:59,980
rotated myself asteroids have a momentum

00:18:56,440 --> 00:19:01,530
for x and y and they also have momentum

00:18:59,980 --> 00:19:03,390
for spinning and

00:19:01,530 --> 00:19:07,350
that momentum just gets added to the

00:19:03,390 --> 00:19:10,770
dirty part each time this is computing

00:19:07,350 --> 00:19:24,090
the random shape of the ass let's lock

00:19:10,770 --> 00:19:28,020
that goes back on it Holly the toll

00:19:24,090 --> 00:19:37,130
radius and whatever's left is stuck on

00:19:28,020 --> 00:19:41,610
and have an art that tends you call it

00:19:37,130 --> 00:19:43,560
just a bump in distribution and I just

00:19:41,610 --> 00:19:45,300
keep adding those the alternative rate

00:19:43,560 --> 00:19:48,030
is radius and art to the thing until I'm

00:19:45,300 --> 00:19:52,710
done on when I animates stuff in this

00:19:48,030 --> 00:19:56,900
universe ah cities are rent plus

00:19:52,710 --> 00:19:59,370
something on the way so I just had my

00:19:56,900 --> 00:20:05,790
velocity to the x and y I promise you

00:19:59,370 --> 00:20:11,070
gravity two but just good rotation and

00:20:05,790 --> 00:20:14,010
rotation in and that again effects where

00:20:11,070 --> 00:20:16,830
I start drawing the thing my ship is

00:20:14,010 --> 00:20:21,960
where he shakes too it's a not randomly

00:20:16,830 --> 00:20:26,240
drawn is my hose is out the top of the

00:20:21,960 --> 00:20:26,240
back in is

00:20:29,280 --> 00:20:33,000
back and then eight

00:20:35,860 --> 00:20:45,820
r 2 140 back man and so forth on the

00:20:44,170 --> 00:20:52,799
same function that draws the asteroids

00:20:45,820 --> 00:20:52,799
throws the ship an asteroid breaks up

00:21:00,680 --> 00:21:11,520
from the projects by the way just so

00:21:08,780 --> 00:21:12,900
probably have syringes and they might as

00:21:11,520 --> 00:21:17,750
well because I just probably coated one

00:21:12,900 --> 00:21:20,340
big file goes on forever is it yeah oh

00:21:17,750 --> 00:21:24,000
yeah I kind of figured but I don't think

00:21:20,340 --> 00:21:26,220
you actually told me adding thrust

00:21:24,000 --> 00:21:27,960
similar we're just kind of separating

00:21:26,220 --> 00:21:30,120
out the x and y parts and tallying a

00:21:27,960 --> 00:21:32,760
month Oh collision detection we didn't

00:21:30,120 --> 00:21:37,680
talk about this at all okay you

00:21:32,760 --> 00:21:42,380
guys got ripped off okay well code games

00:21:37,680 --> 00:21:42,380

YouTube URL: https://www.youtube.com/watch?v=HYFNEDDRyhc


