Title: 2016 - Everyone's a Critic: A Constructive Look at perlcriticâ€Ž - D. Ruth Bavousett
Publication date: 2016-06-27
Playlist: YAPC::NA 2016
Description: 
	
Captions: 
	00:00:02,120 --> 00:00:16,379
we good we're good okay I can stand for

00:00:14,790 --> 00:00:19,650
a little bit but not for very long and

00:00:16,379 --> 00:00:21,410
certainly not for a whole hour those of

00:00:19,650 --> 00:00:23,730
you that were in Salt Lake last year

00:00:21,410 --> 00:00:25,199
remember that i SAT up there right next

00:00:23,730 --> 00:00:26,699
to the lectern the whole time on two

00:00:25,199 --> 00:00:32,700
little chairs it worked very good this

00:00:26,699 --> 00:00:43,879
looks so much better this is gonna work

00:00:32,700 --> 00:00:43,879
so much better all right there we go Wow

00:00:44,750 --> 00:00:50,480
John I get the I get the hangover slot

00:00:47,340 --> 00:00:52,680
but look I got a full room almost I

00:00:50,480 --> 00:00:57,360
appreciate you being here I really do

00:00:52,680 --> 00:01:01,320
i'm ruth babba set I work for cpanel now

00:00:57,360 --> 00:01:03,120
just as we kind of get started how many

00:01:01,320 --> 00:01:06,570
of you have never used pro critic don't

00:01:03,120 --> 00:01:09,030
know what it is or curious about it okay

00:01:06,570 --> 00:01:10,290
good a couple of hands that's good those

00:01:09,030 --> 00:01:11,400
of you that had your hands up just now

00:01:10,290 --> 00:01:15,750
how many of you have been programming

00:01:11,400 --> 00:01:19,560
pearl for six months or less a year or

00:01:15,750 --> 00:01:22,710
less okay good that's kind of what I

00:01:19,560 --> 00:01:24,710
expected so most of you know what I'm

00:01:22,710 --> 00:01:29,040
talking about when I say pro critic and

00:01:24,710 --> 00:01:33,090
you probably many of you have some firm

00:01:29,040 --> 00:01:35,759
opinions about it all right let's do a

00:01:33,090 --> 00:01:37,140
little introduction first i've been

00:01:35,759 --> 00:01:38,840
using Perl professionally since about

00:01:37,140 --> 00:01:41,490
two thousand one i was working on a

00:01:38,840 --> 00:01:44,310
solaris box that had a library

00:01:41,490 --> 00:01:47,189
automation system on it and the api was

00:01:44,310 --> 00:01:49,049
all pearl accessible and so I was using

00:01:47,189 --> 00:01:50,579
Perl for that and so that's when I

00:01:49,049 --> 00:01:53,130
picked up pearl and I really enjoyed

00:01:50,579 --> 00:01:56,460
working with it and so that's when I

00:01:53,130 --> 00:01:57,990
kind of got my start went three years

00:01:56,460 --> 00:02:00,030
ago I went to cpanel started working

00:01:57,990 --> 00:02:04,399
there I am by no means any sort of an

00:02:00,030 --> 00:02:07,530
expert and I do not attempt to imitate 1

00:02:04,399 --> 00:02:10,020
i'm a poor actor and a worse liar so i

00:02:07,530 --> 00:02:13,020
do not even attempt to impersonate an

00:02:10,020 --> 00:02:14,020
expert in anything however i like many

00:02:13,020 --> 00:02:17,710
of you have some for

00:02:14,020 --> 00:02:21,940
opinions about pro critic and I'm a

00:02:17,710 --> 00:02:25,870
little bit of a detail net I worked in

00:02:21,940 --> 00:02:27,820
libraries for most of 20 years I've long

00:02:25,870 --> 00:02:29,740
held that librarianship is a great place

00:02:27,820 --> 00:02:36,910
to put obsessive-compulsive disorder to

00:02:29,740 --> 00:02:38,560
work catalogers and so I kind of get

00:02:36,910 --> 00:02:41,670
their mindset I understand where they're

00:02:38,560 --> 00:02:45,370
coming from and I appreciate that a lot

00:02:41,670 --> 00:02:47,170
okay so why why am I here besides the

00:02:45,370 --> 00:02:49,870
fact that you know gene hack scheduled

00:02:47,170 --> 00:02:52,390
me for this lot well I enjoy doing this

00:02:49,870 --> 00:02:54,370
kind of thing I really do and I'll

00:02:52,390 --> 00:02:56,080
haiyan in kvetch about it and afterwards

00:02:54,370 --> 00:02:57,640
I'll complain about how terrible it went

00:02:56,080 --> 00:02:59,620
but I really do enjoy doing this kind of

00:02:57,640 --> 00:03:00,640
thing and and I keep getting told I'm

00:02:59,620 --> 00:03:04,320
pretty good at it I don't actually

00:03:00,640 --> 00:03:08,800
believe them I get that for some people

00:03:04,320 --> 00:03:10,810
this is kind of a contentious topic I've

00:03:08,800 --> 00:03:12,130
learned at cpanel in my time there that

00:03:10,810 --> 00:03:14,320
all you have to do to start a flame war

00:03:12,130 --> 00:03:17,980
on the dev list is say the word pro

00:03:14,320 --> 00:03:20,020
critic and immediate flames erupt and

00:03:17,980 --> 00:03:22,420
you know the fires and commuters go off

00:03:20,020 --> 00:03:26,080
in the building and howling and carrying

00:03:22,420 --> 00:03:29,709
on both ways but pro critic is really

00:03:26,080 --> 00:03:32,500
not any big deal to me and I'll explain

00:03:29,709 --> 00:03:35,050
why and hopefully it'll be no big pain

00:03:32,500 --> 00:03:38,230
to you either at the end of our time

00:03:35,050 --> 00:03:39,670
together now because it is kind of a

00:03:38,230 --> 00:03:43,300
contentious little topic i'm going to

00:03:39,670 --> 00:03:47,110
set some rules i know i shouldn't have

00:03:43,300 --> 00:03:49,240
to but yeah do i really need to say this

00:03:47,110 --> 00:03:52,480
in the 21st century at a professional

00:03:49,240 --> 00:03:54,540
conference is it an indictment of the

00:03:52,480 --> 00:03:59,980
community that i feel like i need to

00:03:54,540 --> 00:04:01,990
thank you we have some people who have

00:03:59,980 --> 00:04:04,380
been at this so long that they are

00:04:01,990 --> 00:04:06,640
certain they can no longer be wrong i

00:04:04,380 --> 00:04:09,220
have bumped into some of these in my

00:04:06,640 --> 00:04:12,520
professional career with pearl realize

00:04:09,220 --> 00:04:14,800
I've been doing pearl for 15 years when

00:04:12,520 --> 00:04:17,320
i started doing pearl this person

00:04:14,800 --> 00:04:20,950
sitting right down here was eight my

00:04:17,320 --> 00:04:24,520
daughter so and she's now a member of

00:04:20,950 --> 00:04:26,260
this professional community so you know

00:04:24,520 --> 00:04:27,330
I've been doing this a long time and I'm

00:04:26,260 --> 00:04:32,250
not immune

00:04:27,330 --> 00:04:33,449
to wrong yes there is a time i'm going

00:04:32,250 --> 00:04:35,099
to hold some time for questions and

00:04:33,449 --> 00:04:36,990
comments and discussion and i look

00:04:35,099 --> 00:04:38,460
forward to some lively ones we've got a

00:04:36,990 --> 00:04:41,849
timekeeper down here to keep us on track

00:04:38,460 --> 00:04:43,919
but i think we'll do fine there is

00:04:41,849 --> 00:04:46,129
however no time plan for attacking each

00:04:43,919 --> 00:04:48,389
other personally or vitriol of any sort

00:04:46,129 --> 00:04:51,330
and you will be ejected from the room if

00:04:48,389 --> 00:04:52,680
that happens remember the standards of

00:04:51,330 --> 00:04:58,530
conduct committee I can make it stick

00:04:52,680 --> 00:05:02,039
trust me ok so it kind of started with

00:04:58,530 --> 00:05:04,550
this book right Pro critic and pro best

00:05:02,039 --> 00:05:06,659
practices tend to be kind of immutably

00:05:04,550 --> 00:05:11,009
connected to each other in people's

00:05:06,659 --> 00:05:13,409
heads and and you know Damien Conway

00:05:11,009 --> 00:05:16,520
writes this book and says here's a set

00:05:13,409 --> 00:05:18,659
of best practices these are good ideas

00:05:16,520 --> 00:05:21,300
how many of you have actually read the

00:05:18,659 --> 00:05:22,409
first chapter of the book but how many

00:05:21,300 --> 00:05:25,289
of you have read the rest without

00:05:22,409 --> 00:05:28,620
reading the first chapter ah guilty

00:05:25,289 --> 00:05:31,940
katja all right the first chapter

00:05:28,620 --> 00:05:35,279
actually tells you this is not a Bible

00:05:31,940 --> 00:05:37,919
it tells you this is a group of

00:05:35,279 --> 00:05:39,779
suggestions things that people have

00:05:37,919 --> 00:05:44,460
found that make their code more readable

00:05:39,779 --> 00:05:47,339
more maintainable and so they're good

00:05:44,460 --> 00:05:49,529
ideas pick and choose and take the ones

00:05:47,339 --> 00:05:51,900
you want the ones that make sense for

00:05:49,529 --> 00:05:55,800
you your coding style in your project

00:05:51,900 --> 00:06:01,319
and use them we'll talk about why that's

00:05:55,800 --> 00:06:05,370
a problematic thing here shortly so why

00:06:01,319 --> 00:06:08,729
use it quote from the book most all of

00:06:05,370 --> 00:06:12,060
us can quote this pretty much right okay

00:06:08,729 --> 00:06:13,500
a corollary to this you know it maintain

00:06:12,060 --> 00:06:15,539
the coat write the code is if the guy

00:06:13,500 --> 00:06:17,430
who's going to maintain it is a

00:06:15,539 --> 00:06:19,949
murderous psychopath who knows where you

00:06:17,430 --> 00:06:23,159
live the corollary to this is that every

00:06:19,949 --> 00:06:25,639
project has two coders you and use six

00:06:23,159 --> 00:06:25,639
months from now

00:06:28,169 --> 00:06:35,710
that murderous psychopath six months

00:06:30,790 --> 00:06:39,220
from now knows where you live right so

00:06:35,710 --> 00:06:41,740
yeah write your code as if your life

00:06:39,220 --> 00:06:44,080
depends on good code maintainable code

00:06:41,740 --> 00:06:47,410
because you irritate that person and who

00:06:44,080 --> 00:06:48,690
knows what will happen and there's

00:06:47,410 --> 00:06:51,910
always more than one way to do things

00:06:48,690 --> 00:06:54,130
Tim totti is is the mantra of this

00:06:51,910 --> 00:06:55,900
community but yet if you're working in a

00:06:54,130 --> 00:06:58,270
team on a large project and you've got

00:06:55,900 --> 00:07:00,400
20 or 30 or 100 developers working on

00:06:58,270 --> 00:07:01,960
something it's kind of a good idea to be

00:07:00,400 --> 00:07:06,100
doing some things more or less

00:07:01,960 --> 00:07:07,810
consistently it makes sense if a more

00:07:06,100 --> 00:07:09,760
junior person is going to have to be

00:07:07,810 --> 00:07:12,160
maintaining the code of a more senior

00:07:09,760 --> 00:07:15,490
individual that that code is readable to

00:07:12,160 --> 00:07:17,440
them is understandable to them so i'm

00:07:15,490 --> 00:07:20,919
not saying right to the lowest common

00:07:17,440 --> 00:07:22,949
denominator I'm saying right

00:07:20,919 --> 00:07:25,870
consistently define what your

00:07:22,949 --> 00:07:27,520
consistency is and go with it and that's

00:07:25,870 --> 00:07:29,830
what we're going to cover how to do here

00:07:27,520 --> 00:07:31,210
in pro critic now for those of you that

00:07:29,830 --> 00:07:32,979
have never touched pro critic before

00:07:31,210 --> 00:07:34,330
let's talk about / critic itself the

00:07:32,979 --> 00:07:37,660
rest of you please be patient just a

00:07:34,330 --> 00:07:40,990
moment all right it is a script and a

00:07:37,660 --> 00:07:43,740
related set of pearl libraries and it

00:07:40,990 --> 00:07:47,139
has a bunch of rules programmed into it

00:07:43,740 --> 00:07:49,000
and you can define which rules are

00:07:47,139 --> 00:07:51,639
enforced and how hard they're enforced

00:07:49,000 --> 00:07:53,380
and how they're implemented and you can

00:07:51,639 --> 00:08:00,580
even implement new rules this thing's

00:07:53,380 --> 00:08:03,340
loose that's better you can define your

00:08:00,580 --> 00:08:05,710
own rules you can define groups of rules

00:08:03,340 --> 00:08:07,510
that are important to you you get all

00:08:05,710 --> 00:08:09,760
kinds of configuration for this thing

00:08:07,510 --> 00:08:14,289
but it defines a set of rules it does

00:08:09,760 --> 00:08:16,210
not it does not edit your code it

00:08:14,289 --> 00:08:20,530
doesn't make you write code in any

00:08:16,210 --> 00:08:22,330
specific way it is a tool for seeing if

00:08:20,530 --> 00:08:25,690
your code is consistent with that set of

00:08:22,330 --> 00:08:27,490
rules whether or not you have to be in

00:08:25,690 --> 00:08:31,750
compliance with that is a matter of

00:08:27,490 --> 00:08:33,729
policy not a matter of pro critic now at

00:08:31,750 --> 00:08:37,469
cpanel we have a pearl critic profile

00:08:33,729 --> 00:08:39,789
and it dates back Oh longer than me and

00:08:37,469 --> 00:08:40,430
before a piece of code is committed to

00:08:39,789 --> 00:08:45,950
master

00:08:40,430 --> 00:08:48,140
it must pass that and if it doesn't

00:08:45,950 --> 00:08:50,810
release team kick it back at you doesn't

00:08:48,140 --> 00:08:52,700
a Spurl critic and if we change the

00:08:50,810 --> 00:08:55,820
rules we don't have to go in and retro

00:08:52,700 --> 00:08:58,130
actively modify millions of lines of

00:08:55,820 --> 00:09:01,029
code no we just as you touch that file

00:08:58,130 --> 00:09:04,010
every time a file is touched it must

00:09:01,029 --> 00:09:08,660
adhere to the pro critic profile at that

00:09:04,010 --> 00:09:12,470
time that's policy not code it in no way

00:09:08,660 --> 00:09:15,050
dictates how you code you can define

00:09:12,470 --> 00:09:18,290
your own sets of rules but pearl best

00:09:15,050 --> 00:09:20,060
practices stuff comes installed there's

00:09:18,290 --> 00:09:22,100
a whole raft of things that are defined

00:09:20,060 --> 00:09:24,470
by pearl best practices and that's why

00:09:22,100 --> 00:09:26,600
the book in the program kind of get tied

00:09:24,470 --> 00:09:28,730
together people's minds because there's

00:09:26,600 --> 00:09:30,170
a whole bunch of PBP rules built into

00:09:28,730 --> 00:09:31,760
pearl critic it's got a bunch of

00:09:30,170 --> 00:09:34,730
command-line options these are the kinds

00:09:31,760 --> 00:09:38,240
of things you use you can say how tough

00:09:34,730 --> 00:09:40,130
you want to be and when I first bumped

00:09:38,240 --> 00:09:41,600
into it it was 5 4 3 2 1 the default is

00:09:40,130 --> 00:09:44,779
five if you just say pearl critic in a

00:09:41,600 --> 00:09:46,730
file name it's going to run gently but

00:09:44,779 --> 00:09:49,640
you can be as as evil as you want to be

00:09:46,730 --> 00:09:50,839
against your code and there's a whole

00:09:49,640 --> 00:09:53,180
bunch of other things you can that you

00:09:50,839 --> 00:09:54,860
can tell it only use this one rule use a

00:09:53,180 --> 00:09:57,170
different profile use a different theme

00:09:54,860 --> 00:09:58,760
you can define specific rules for just

00:09:57,170 --> 00:09:59,990
this run there's all kinds of things you

00:09:58,760 --> 00:10:02,690
can do with this these are the common

00:09:59,990 --> 00:10:05,870
stuff most of the time you're going to

00:10:02,690 --> 00:10:12,740
say Pro critic dash dash some level and

00:10:05,870 --> 00:10:16,400
a filename I wrote a little module this

00:10:12,740 --> 00:10:18,950
module flunks pro critic badly this is

00:10:16,400 --> 00:10:21,140
default installed pro critic no special

00:10:18,950 --> 00:10:25,750
themes no special stuff but there's a

00:10:21,140 --> 00:10:28,130
whole bunch of problems here okay

00:10:25,750 --> 00:10:34,040
anybody see something specific they want

00:10:28,130 --> 00:10:36,760
to point out our pumpkin Sawyer thank

00:10:34,040 --> 00:10:39,529
you that's in the first subroutine there

00:10:36,760 --> 00:10:47,139
right

00:10:39,529 --> 00:10:54,740
thank you yes it was a hand back here

00:10:47,139 --> 00:11:00,259
thank you galen null string somebody got

00:10:54,740 --> 00:11:02,300
me thank you that was called without

00:11:00,259 --> 00:11:04,430
return all right good so y'all are

00:11:02,300 --> 00:11:05,930
seeing some of this now are you are you

00:11:04,430 --> 00:11:08,540
realizing that because you've been bit

00:11:05,930 --> 00:11:11,149
by that by pro critic before no okay

00:11:08,540 --> 00:11:12,589
thought so that's all right because

00:11:11,149 --> 00:11:14,870
you've been bitten by somebody's pro

00:11:12,589 --> 00:11:17,300
critic profile that's fine so let's see

00:11:14,870 --> 00:11:20,449
what pearl critic brutal says about this

00:11:17,300 --> 00:11:22,730
the code is not tidy inconsistent

00:11:20,449 --> 00:11:24,319
indentation thank you that's a severity

00:11:22,730 --> 00:11:27,110
one item you have to go to brutal to get

00:11:24,319 --> 00:11:28,370
that you can also get that separately by

00:11:27,110 --> 00:11:29,629
running pearl tidy but that's the

00:11:28,370 --> 00:11:33,860
subject of somebody else's conversation

00:11:29,629 --> 00:11:37,279
not mine no package scope version Sawyer

00:11:33,860 --> 00:11:39,259
I'm surprised at you you let me down if

00:11:37,279 --> 00:11:40,579
you're going to release this to see pan

00:11:39,259 --> 00:11:42,949
it's got to have a package scrub dollar

00:11:40,579 --> 00:11:46,850
version or else it will get thrown back

00:11:42,949 --> 00:11:48,829
at you hard so you know now that for

00:11:46,850 --> 00:11:51,769
something as trivial as this probably

00:11:48,829 --> 00:11:52,790
not necessary but for any package you're

00:11:51,769 --> 00:11:56,480
actually going to release its a good

00:11:52,790 --> 00:11:58,100
idea always unpack that under in the

00:11:56,480 --> 00:11:59,899
first one we directly reference one of

00:11:58,100 --> 00:12:04,339
the parameters rather than unpacking it

00:11:59,899 --> 00:12:08,809
into its own variable using shift or add

00:12:04,339 --> 00:12:10,699
under and pro best practices doesn't

00:12:08,809 --> 00:12:14,269
care if you use shift or if you use an

00:12:10,699 --> 00:12:16,699
array at under either way will satisfy

00:12:14,269 --> 00:12:21,290
the rule okay which I did in the second

00:12:16,699 --> 00:12:24,019
one subroutine fuss about some stuff

00:12:21,290 --> 00:12:27,290
does not end with returned thank you why

00:12:24,019 --> 00:12:29,809
is it important to do that just second

00:12:27,290 --> 00:12:32,059
new folks who from programming pearl a

00:12:29,809 --> 00:12:39,259
short time what is the return from fuss

00:12:32,059 --> 00:12:42,679
about from stuff thank you the value of

00:12:39,259 --> 00:12:43,970
dollar egg Lindsey you haven't been

00:12:42,679 --> 00:12:47,959
coding for very long did you figure that

00:12:43,970 --> 00:12:51,040
out did you know that it's the last

00:12:47,959 --> 00:12:53,839
operation that happened but it's kind of

00:12:51,040 --> 00:13:00,559
being explicit in your returns makes it

00:12:53,839 --> 00:13:02,239
clearer and costs you nothing that's one

00:13:00,559 --> 00:13:04,759
that I harp on like crazy and we have

00:13:02,239 --> 00:13:07,160
thousands of such Bugaboos in our code

00:13:04,759 --> 00:13:12,230
and it makes me cry every time I see one

00:13:07,160 --> 00:13:16,670
and every time I find one I fix it okay

00:13:12,230 --> 00:13:20,899
but there was plenty more you strict and

00:13:16,670 --> 00:13:24,559
use warning aren't there I used a static

00:13:20,899 --> 00:13:27,980
number 3.14 in my assignment for dollar

00:13:24,559 --> 00:13:30,769
a and fuss about some stuff pearl critic

00:13:27,980 --> 00:13:32,720
doesn't like that 0 1 and 2 are allowed

00:13:30,769 --> 00:13:35,600
but anything else assign it to a

00:13:32,720 --> 00:13:37,670
variable if you uppercase the full name

00:13:35,600 --> 00:13:39,529
of it by convention that means it's

00:13:37,670 --> 00:13:41,660
probably used as a constant although it

00:13:39,529 --> 00:13:45,079
doesn't have to be but if you use read

00:13:41,660 --> 00:13:47,269
only or you use const then you can

00:13:45,079 --> 00:13:48,949
assign these static things to use as

00:13:47,269 --> 00:13:51,589
constants and then if you need to change

00:13:48,949 --> 00:13:54,319
it later like if you wanted to increase

00:13:51,589 --> 00:13:55,850
the precision of this by some digits you

00:13:54,319 --> 00:14:03,019
change it one place and then everywhere

00:13:55,850 --> 00:14:04,459
it's used it's changed quotes with an

00:14:03,019 --> 00:14:05,899
empty string no non whitespace

00:14:04,459 --> 00:14:07,939
characters in the quote null string

00:14:05,899 --> 00:14:11,480
there are other ways to do that that are

00:14:07,939 --> 00:14:15,529
slightly less easy to look over and

00:14:11,480 --> 00:14:17,989
postfix control s unless using unless at

00:14:15,529 --> 00:14:21,410
all is suggested in PvP but it is not a

00:14:17,989 --> 00:14:24,799
pro critic rule you can use unless

00:14:21,410 --> 00:14:30,069
however post fixing your your control

00:14:24,799 --> 00:14:30,069
statements is handled in pro critic

00:14:30,730 --> 00:14:37,029
myself I don't mind it unless that's

00:14:33,230 --> 00:14:37,029
postfix unless you're saying unless not

00:14:38,509 --> 00:14:43,679
it's too early in the morning i have not

00:14:40,920 --> 00:14:47,910
had enough caffeine for unless not all

00:14:43,679 --> 00:14:50,009
right so yeah or a very complicated

00:14:47,910 --> 00:14:52,199
statement and then a post fix and less

00:14:50,009 --> 00:14:53,519
with a really complicated statement ya

00:14:52,199 --> 00:14:57,480
know if you're just doing something

00:14:53,519 --> 00:15:00,689
simple like I did here then that's kind

00:14:57,480 --> 00:15:05,189
of okay I can I will bite my lip and

00:15:00,689 --> 00:15:07,160
deal with that one but a post fix if can

00:15:05,189 --> 00:15:09,269
mislead someone about program flow

00:15:07,160 --> 00:15:12,540
because they're going to go ahead and do

00:15:09,269 --> 00:15:16,499
the thing and then go if oh I wasn't

00:15:12,540 --> 00:15:17,910
supposed to do that all right it's all

00:15:16,499 --> 00:15:22,619
yours laughing that means he's done that

00:15:17,910 --> 00:15:23,669
right yeah you you've done that you go

00:15:22,619 --> 00:15:25,829
ahead you walk through a whole sub

00:15:23,669 --> 00:15:28,919
routine you get back your crap I didn't

00:15:25,829 --> 00:15:32,429
need to do that yeah so post fix well

00:15:28,919 --> 00:15:34,709
okay so how do you fix these things well

00:15:32,429 --> 00:15:37,350
you edit your code for one thing don't

00:15:34,709 --> 00:15:39,119
do that or you can modify your pro

00:15:37,350 --> 00:15:40,859
critic RC so that pro critic doesn't

00:15:39,119 --> 00:15:44,040
care about those things anymore wait

00:15:40,859 --> 00:15:46,589
what new folks what is the pro criticar

00:15:44,040 --> 00:15:50,790
see it is a file where you can configure

00:15:46,589 --> 00:15:52,819
the behavior of pro critic all right in

00:15:50,790 --> 00:15:55,350
the first stanza here I've decided that

00:15:52,819 --> 00:15:57,779
using warnings is much more important

00:15:55,350 --> 00:16:00,389
than dash for I wanted to show up

00:15:57,779 --> 00:16:03,329
regardless of what level I've set so

00:16:00,389 --> 00:16:07,799
I've set the severity on that 45 that

00:16:03,329 --> 00:16:09,629
fires on gentle rather than on Stern so

00:16:07,799 --> 00:16:12,540
you can change the priority of a rule

00:16:09,629 --> 00:16:16,110
how severe a problem is this you can

00:16:12,540 --> 00:16:18,239
change that and the second stanza there

00:16:16,110 --> 00:16:20,009
the prohibit fo six controls has a

00:16:18,239 --> 00:16:23,309
parameter for what things you want to

00:16:20,009 --> 00:16:27,169
allow or disallow you can say you know a

00:16:23,309 --> 00:16:27,169
postfix unless don't complain about that

00:16:27,559 --> 00:16:31,649
which is what I've said here and in the

00:16:29,970 --> 00:16:34,829
the third one that require constant

00:16:31,649 --> 00:16:38,189
dollar version thing that that Sawyer

00:16:34,829 --> 00:16:39,929
didn't catch I just think that's a silly

00:16:38,189 --> 00:16:41,129
rule for what I'm doing in this project

00:16:39,929 --> 00:16:44,639
so i'm just going to disable that

00:16:41,129 --> 00:16:47,549
completely so i do this dash thing in

00:16:44,639 --> 00:16:49,350
the rule name your pro critic RC lets

00:16:47,549 --> 00:16:49,790
you configure the behavior of pro critic

00:16:49,350 --> 00:16:52,040
to a

00:16:49,790 --> 00:16:53,810
very fine level you can do all kinds of

00:16:52,040 --> 00:16:56,480
crazy things and individual rules may

00:16:53,810 --> 00:16:59,270
have parameters you can set and you can

00:16:56,480 --> 00:17:02,600
pearl doc the rule generally and and

00:16:59,270 --> 00:17:04,430
find what things you can set but you can

00:17:02,600 --> 00:17:07,520
always set severity and you can always

00:17:04,430 --> 00:17:14,270
disable or enable a rule for every rule

00:17:07,520 --> 00:17:15,890
I make it sound so easy don't I I make

00:17:14,270 --> 00:17:18,710
it sound so straightforward and obvious

00:17:15,890 --> 00:17:21,170
and good don't I well that's because I

00:17:18,710 --> 00:17:22,850
think it is so why all of this carrying

00:17:21,170 --> 00:17:25,870
on and why is it that all you have to do

00:17:22,850 --> 00:17:29,990
is mention that word to get a flame war

00:17:25,870 --> 00:17:33,650
well there's the thing newer coders see

00:17:29,990 --> 00:17:37,040
pro best practices and they go ooh this

00:17:33,650 --> 00:17:40,490
is the way to write good code and they

00:17:37,040 --> 00:17:42,620
start following it religiously and they

00:17:40,490 --> 00:17:44,420
go oh pearl critic is a great way to

00:17:42,620 --> 00:17:46,160
enforce those things i can check i don't

00:17:44,420 --> 00:17:48,350
have to manually reread the book on

00:17:46,160 --> 00:17:51,980
every piece of code cool and they use

00:17:48,350 --> 00:17:54,500
pro critic without any modifications and

00:17:51,980 --> 00:17:56,540
without a pro critic RC and so they

00:17:54,500 --> 00:18:02,240
enforce this as Holy Writ upon their

00:17:56,540 --> 00:18:05,000
code well it's a common embryonic

00:18:02,240 --> 00:18:07,970
behavior I did it for a while too ok it

00:18:05,000 --> 00:18:10,340
it's ok just know those people are newer

00:18:07,970 --> 00:18:11,690
coders and be kind to them because we

00:18:10,340 --> 00:18:15,380
want them to stick around and eventually

00:18:11,690 --> 00:18:17,960
you know get past that don't be tacky

00:18:15,380 --> 00:18:19,580
and rude to them it's not helpful ok

00:18:17,960 --> 00:18:22,070
more experienced coders find that very

00:18:19,580 --> 00:18:26,330
annoying because they know that Tim

00:18:22,070 --> 00:18:28,070
toady they know that pro critic is not

00:18:26,330 --> 00:18:30,020
always right they know that pro critic

00:18:28,070 --> 00:18:32,900
has some rules in it that might not make

00:18:30,020 --> 00:18:34,040
sense for a specific project and they

00:18:32,900 --> 00:18:38,960
have their own style and they're rather

00:18:34,040 --> 00:18:40,640
attached to it so I was noodling around

00:18:38,960 --> 00:18:43,610
trying to figure out how do we reframe

00:18:40,640 --> 00:18:46,280
this problem how do we reframe the

00:18:43,610 --> 00:18:49,100
question in a way that is more useful

00:18:46,280 --> 00:18:51,920
and in the pearl doc for pro critic I

00:18:49,100 --> 00:18:54,410
came up with this this is quoted from

00:18:51,920 --> 00:18:56,350
the pearl drop coding standards are

00:18:54,410 --> 00:18:58,670
deeply personal and highly subjective

00:18:56,350 --> 00:19:01,070
the goal of pro critic is to help you

00:18:58,670 --> 00:19:02,029
write code that conforms with a set of

00:19:01,070 --> 00:19:04,129
best practices

00:19:02,029 --> 00:19:05,659
our primary goal is not to dictate what

00:19:04,129 --> 00:19:07,249
those practices are but to implement the

00:19:05,659 --> 00:19:10,249
practice is discovered by others

00:19:07,249 --> 00:19:12,739
ultimately you make the rules pro critic

00:19:10,249 --> 00:19:16,129
is merely a tool for encouraging that

00:19:12,739 --> 00:19:18,950
consistency remember I said it doesn't

00:19:16,129 --> 00:19:21,109
edit your code it still doesn't it's

00:19:18,950 --> 00:19:23,179
merely a tool for encouraging consistent

00:19:21,109 --> 00:19:26,509
behavior when you're coding so let's

00:19:23,179 --> 00:19:28,700
reframe the problem New York utters

00:19:26,509 --> 00:19:32,019
conflate a set of best practices with

00:19:28,700 --> 00:19:34,609
these set of best practices sound fair

00:19:32,019 --> 00:19:36,349
they see this set of best practices in

00:19:34,609 --> 00:19:37,820
the set that is embodied in pro critic

00:19:36,349 --> 00:19:41,929
and they say that's the right way to

00:19:37,820 --> 00:19:43,129
write code more experienced coders

00:19:41,929 --> 00:19:46,759
forget that no one's actually going to

00:19:43,129 --> 00:19:52,089
force them to conform to that set as be

00:19:46,759 --> 00:19:52,089
set outside of the bounds of a project

00:19:52,450 --> 00:19:57,249
best practices best practices sounds

00:19:55,279 --> 00:19:59,809
like a buzzword bingo thing doesn't it

00:19:57,249 --> 00:20:02,659
well what are best practices what is the

00:19:59,809 --> 00:20:04,129
best pearl practices God if we ask ok

00:20:02,659 --> 00:20:08,749
how many of you been coding pearl for 10

00:20:04,129 --> 00:20:11,960
years or more ok if we ask all of you

00:20:08,749 --> 00:20:14,539
folks what is your best practice we

00:20:11,960 --> 00:20:19,099
might get 15 or 20 different answers you

00:20:14,539 --> 00:20:24,169
think and that's ok because Tim Cody

00:20:19,099 --> 00:20:26,989
right so they said it deeply personal

00:20:24,169 --> 00:20:28,789
highly subjective subjective you know

00:20:26,989 --> 00:20:30,619
the coding practices for cpanel and the

00:20:28,789 --> 00:20:33,190
coding practices for the coho project

00:20:30,619 --> 00:20:36,200
which I have committed to for years are

00:20:33,190 --> 00:20:39,919
completely different they use a

00:20:36,200 --> 00:20:41,629
completely different bro critic RC go as

00:20:39,919 --> 00:20:44,389
far as I know still doesn't use one at

00:20:41,629 --> 00:20:49,609
all but you don't see Turner e ifs in

00:20:44,389 --> 00:20:53,119
coho very awesome why is that well

00:20:49,609 --> 00:20:54,409
nobody's picked that up if you happened

00:20:53,119 --> 00:20:59,989
to look at the cPanel code you see them

00:20:54,409 --> 00:21:01,909
all over it is everywhere you see

00:20:59,989 --> 00:21:04,549
postfix and les's in C panels go to all

00:21:01,909 --> 00:21:08,719
the time you see postfix ifs

00:21:04,549 --> 00:21:09,830
occasionally and I just cringe but you

00:21:08,719 --> 00:21:12,139
don't see those kinds of things in

00:21:09,830 --> 00:21:14,359
Quahog nearly so often why is that well

00:21:12,139 --> 00:21:15,570
the coop project deals with a lot of

00:21:14,359 --> 00:21:17,790
coders who are not as

00:21:15,570 --> 00:21:20,490
perienced and so as a community they

00:21:17,790 --> 00:21:24,180
have kind of gone to a slightly lower

00:21:20,490 --> 00:21:26,940
level of code brilliance and code

00:21:24,180 --> 00:21:29,450
cleverness in order to enable those

00:21:26,940 --> 00:21:31,890
newer coders to be able to participate

00:21:29,450 --> 00:21:35,250
cpanel only hires people who are pretty

00:21:31,890 --> 00:21:37,980
darn good at it already and so they

00:21:35,250 --> 00:21:42,020
expect a little higher standard of of

00:21:37,980 --> 00:21:46,560
elegance in their code highly subjective

00:21:42,020 --> 00:21:48,240
it could be as short as does it run you

00:21:46,560 --> 00:21:56,850
don't use per critic at all does it work

00:21:48,240 --> 00:21:58,110
yep good enough Julian you laugh huh how

00:21:56,850 --> 00:22:01,230
many of us have written a module where

00:21:58,110 --> 00:22:05,370
that's the standard we put it to does it

00:22:01,230 --> 00:22:11,970
work yep done release it how many of

00:22:05,370 --> 00:22:13,980
those you have on Sipan Sawyer I died

00:22:11,970 --> 00:22:17,490
sorry I'm not deliberately picking on

00:22:13,980 --> 00:22:19,140
you but you are an easy target and we

00:22:17,490 --> 00:22:22,710
love you Sawyer I'm not going to bag on

00:22:19,140 --> 00:22:24,450
Sawyer mwah yes it could be as simple as

00:22:22,710 --> 00:22:26,910
does it run or it could be as complex as

00:22:24,450 --> 00:22:29,100
you like how much time are you willing

00:22:26,910 --> 00:22:30,990
to spend on that well you know how big a

00:22:29,100 --> 00:22:32,820
deal is it do you expect to be running

00:22:30,990 --> 00:22:35,040
the same piece of code 15 years from now

00:22:32,820 --> 00:22:37,140
after it's been maintained by hundreds

00:22:35,040 --> 00:22:38,910
of people yeah then you probably need a

00:22:37,140 --> 00:22:40,290
little tighter set of rules on what it

00:22:38,910 --> 00:22:41,760
looks like because you're going to have

00:22:40,290 --> 00:22:48,360
people who haven't even been born yet

00:22:41,760 --> 00:22:50,070
hacking on this code right I mean the

00:22:48,360 --> 00:22:53,520
first version of cpanel was written by a

00:22:50,070 --> 00:22:59,820
teenager who's still our most prolific

00:22:53,520 --> 00:23:02,250
developer mm-hmm some of his code you

00:22:59,820 --> 00:23:04,080
can tell was written by a teenager it

00:23:02,250 --> 00:23:05,670
might involve efficiency hacks if you

00:23:04,080 --> 00:23:08,340
found something that is particularly

00:23:05,670 --> 00:23:11,490
efficient you might write a Perl critic

00:23:08,340 --> 00:23:13,440
module a pro critic rule that enforces

00:23:11,490 --> 00:23:16,590
that efficient behavior over something

00:23:13,440 --> 00:23:18,180
less efficient you can totally do that

00:23:16,590 --> 00:23:21,420
and in fact I think there's a few rules

00:23:18,180 --> 00:23:23,880
that do that I already built right in if

00:23:21,420 --> 00:23:25,980
you here's pro critic at all remember

00:23:23,880 --> 00:23:28,770
it's a tool for encouraging consistency

00:23:25,980 --> 00:23:29,070
it is not the policy that deems that you

00:23:28,770 --> 00:23:34,309
must

00:23:29,070 --> 00:23:36,480
use it that's a separate negotiation so

00:23:34,309 --> 00:23:38,610
you're working on a project at work

00:23:36,480 --> 00:23:40,380
you're working on a big project in the

00:23:38,610 --> 00:23:44,220
open source space how are you going to

00:23:40,380 --> 00:23:46,259
use it you want to do it because reasons

00:23:44,220 --> 00:23:47,940
and you think consistency is a good idea

00:23:46,259 --> 00:23:50,669
and you've bought what I've said for the

00:23:47,940 --> 00:23:53,519
last 25 minutes and you you think that

00:23:50,669 --> 00:23:55,019
that's okay that we need to to be

00:23:53,519 --> 00:23:59,460
consistent so how you going to go about

00:23:55,019 --> 00:24:02,220
it without causing flame wars well got a

00:23:59,460 --> 00:24:04,110
secret for you you're not there's going

00:24:02,220 --> 00:24:06,269
to be some but the first step is to make

00:24:04,110 --> 00:24:10,649
sure that everybody on the team actually

00:24:06,269 --> 00:24:12,149
understands the problem hey you know

00:24:10,649 --> 00:24:14,610
conveniently the committee is going to

00:24:12,149 --> 00:24:17,129
put this video on afterwards maybe you

00:24:14,610 --> 00:24:18,419
can sell them with my presentation as

00:24:17,129 --> 00:24:21,360
effectively as you've been sold on it

00:24:18,419 --> 00:24:23,190
right try that they need to understand

00:24:21,360 --> 00:24:26,340
what the purpose is it's not to enforce

00:24:23,190 --> 00:24:28,409
a set of laws and rules and regulations

00:24:26,340 --> 00:24:30,509
in a Bible and what's bible-thump right

00:24:28,409 --> 00:24:32,490
it's not like that it's about

00:24:30,509 --> 00:24:34,769
consistency and it's about so the person

00:24:32,490 --> 00:24:36,899
who's seeing your code five years ten

00:24:34,769 --> 00:24:40,470
years from now can maintain it without

00:24:36,899 --> 00:24:42,539
losing their marbles once you can kind

00:24:40,470 --> 00:24:45,240
of get that in their head then you say

00:24:42,539 --> 00:24:48,269
let's customize this make it do the

00:24:45,240 --> 00:24:51,529
things that we think are important to

00:24:48,269 --> 00:24:54,539
give us better advice on how to do our

00:24:51,529 --> 00:24:57,120
code so you start with the existing

00:24:54,539 --> 00:24:59,279
pearl critic modules and it's not hard

00:24:57,120 --> 00:25:00,750
to get a list of them pro critic dash l

00:24:59,279 --> 00:25:03,539
will give you a list of all rules that

00:25:00,750 --> 00:25:06,419
are currently installed and creative

00:25:03,539 --> 00:25:08,309
consensus pro critic RC which might be

00:25:06,419 --> 00:25:10,470
configuring some of them and changing

00:25:08,309 --> 00:25:12,629
the severity or it might be removing

00:25:10,470 --> 00:25:15,149
rules completely or whatever makes sense

00:25:12,629 --> 00:25:17,940
do that with your team this is easier

00:25:15,149 --> 00:25:19,200
when your team is small if your team is

00:25:17,940 --> 00:25:20,909
like booking calm and you have a

00:25:19,200 --> 00:25:25,049
thousand developers this process could

00:25:20,909 --> 00:25:26,549
be a little painful it's it's reached a

00:25:25,049 --> 00:25:28,110
point at cpanel because we have you know

00:25:26,549 --> 00:25:30,990
50 or 60 people hacking on this thing

00:25:28,110 --> 00:25:33,870
that changes to pro critic RC happen

00:25:30,990 --> 00:25:36,720
very slowly it's easier to do this early

00:25:33,870 --> 00:25:37,660
in the life cycle of a project if you

00:25:36,720 --> 00:25:40,870
can

00:25:37,660 --> 00:25:42,310
and then changes then become

00:25:40,870 --> 00:25:44,980
incrementally and it's it's a lot easier

00:25:42,310 --> 00:25:46,840
you know to say you know I think we need

00:25:44,980 --> 00:25:48,190
to remove the rule about using warnings

00:25:46,840 --> 00:25:51,040
we don't care if we have warning safe

00:25:48,190 --> 00:25:53,860
code or not so can we change that one

00:25:51,040 --> 00:25:56,200
thing that becomes much more easy to do

00:25:53,860 --> 00:26:01,990
although why you do that one is quite

00:25:56,200 --> 00:26:03,610
beyond me okay create new modules now I

00:26:01,990 --> 00:26:04,810
told you in the abstract that was going

00:26:03,610 --> 00:26:06,550
to talk to you a little about how to do

00:26:04,810 --> 00:26:09,790
that so let's do that this good time to

00:26:06,550 --> 00:26:11,620
do it creating new modules is not very

00:26:09,790 --> 00:26:14,890
hard you have to define a few variables

00:26:11,620 --> 00:26:17,920
the description statements and when it

00:26:14,890 --> 00:26:20,440
applies and how it applies what sorts of

00:26:17,920 --> 00:26:23,920
tokens it applies to and then you write

00:26:20,440 --> 00:26:25,420
a subroutine called violates and that's

00:26:23,920 --> 00:26:29,350
where the action is that's where you

00:26:25,420 --> 00:26:32,350
define what violates your rule and you

00:26:29,350 --> 00:26:35,200
can tell okay I'm looking at words so

00:26:32,350 --> 00:26:37,570
I'm looking at tokens and if the token

00:26:35,200 --> 00:26:39,610
is currently not grep then skip on we

00:26:37,570 --> 00:26:42,250
don't violate anything if its grip then

00:26:39,610 --> 00:26:43,780
what comes after grep is important and

00:26:42,250 --> 00:26:46,510
if you grab a block well that's not

00:26:43,780 --> 00:26:50,520
allowed or whatever you've decided among

00:26:46,510 --> 00:26:53,230
yourselves as a team is cool or not cool

00:26:50,520 --> 00:26:56,560
there's not a rule in Perl critic for

00:26:53,230 --> 00:27:00,430
don't use Turner ii-if but it would be

00:26:56,560 --> 00:27:04,530
trivially easy to write one if a project

00:27:00,430 --> 00:27:07,660
wanted to not use that particular idiom

00:27:04,530 --> 00:27:10,270
because of complexity or whatever right

00:27:07,660 --> 00:27:11,800
so you can create new modules and all

00:27:10,270 --> 00:27:14,730
you got to do is is a handful of

00:27:11,800 --> 00:27:17,050
variables that are well known and then

00:27:14,730 --> 00:27:18,640
define if you want to have parameters

00:27:17,050 --> 00:27:20,200
that you can feed into it that's not

00:27:18,640 --> 00:27:21,880
already there there's a setting for that

00:27:20,200 --> 00:27:25,960
and then you define the violate

00:27:21,880 --> 00:27:27,550
subroutine and that's it install it and

00:27:25,960 --> 00:27:30,610
pro critic will see it and you're good

00:27:27,550 --> 00:27:32,650
to go ok so create new modules whatever

00:27:30,610 --> 00:27:34,210
your team has decided is important do

00:27:32,650 --> 00:27:38,830
that after you've done this previous

00:27:34,210 --> 00:27:40,960
step go through all the existing modules

00:27:38,830 --> 00:27:42,130
and say is this important nope toss it

00:27:40,960 --> 00:27:43,420
if this important yeah but let's

00:27:42,130 --> 00:27:45,370
configure it is this important yeah

00:27:43,420 --> 00:27:47,530
let's take it get it out all the way

00:27:45,370 --> 00:27:48,730
done and then say is there anything else

00:27:47,530 --> 00:27:51,549
that you think is really bad

00:27:48,730 --> 00:27:54,760
idea or is a really good idea that we

00:27:51,549 --> 00:27:58,330
want to enforce that's going to take

00:27:54,760 --> 00:27:59,410
possibly longer I mean and then you need

00:27:58,330 --> 00:28:01,299
to implement it and then you need to

00:27:59,410 --> 00:28:05,530
test it please test your code please

00:28:01,299 --> 00:28:07,390
write test unit tests plus plus and make

00:28:05,530 --> 00:28:10,410
sure that it actually works how do you

00:28:07,390 --> 00:28:14,340
do that write code that should break it

00:28:10,410 --> 00:28:17,919
run it clude that in your test package

00:28:14,340 --> 00:28:20,710
and then commit it and then put policy

00:28:17,919 --> 00:28:23,559
in place to enforce it does your release

00:28:20,710 --> 00:28:28,000
manager always run pearl critic on your

00:28:23,559 --> 00:28:32,200
code before they commit it that's that's

00:28:28,000 --> 00:28:33,640
where policy comes in all right when I

00:28:32,200 --> 00:28:37,630
was working with by water solutions

00:28:33,640 --> 00:28:39,610
before I had my current gig when I

00:28:37,630 --> 00:28:41,919
started that job I was the 6th employee

00:28:39,610 --> 00:28:45,070
of the company and I took over as the

00:28:41,919 --> 00:28:47,950
migrations person and so I was leading

00:28:45,070 --> 00:28:51,130
all migrations and they really didn't

00:28:47,950 --> 00:28:52,929
have a coherent system for doing

00:28:51,130 --> 00:28:54,549
migrations there's a whole bunch of

00:28:52,929 --> 00:28:56,470
different library automation systems on

00:28:54,549 --> 00:28:58,990
the market and converting from this one

00:28:56,470 --> 00:29:01,720
to the one we were using and supporting

00:28:58,990 --> 00:29:04,210
which is koha it was a little different

00:29:01,720 --> 00:29:05,470
every time but the overall process was

00:29:04,210 --> 00:29:06,880
pretty consistent you're going to need

00:29:05,470 --> 00:29:09,160
to extract data from the current system

00:29:06,880 --> 00:29:10,570
and you need some formatted information

00:29:09,160 --> 00:29:12,070
about the bibliographic records and the

00:29:10,570 --> 00:29:13,900
patrons and the items and the current

00:29:12,070 --> 00:29:15,970
checkouts and all that stuff and then

00:29:13,900 --> 00:29:17,410
you can import it into koha and so I

00:29:15,970 --> 00:29:20,140
started writing these scripts to do

00:29:17,410 --> 00:29:22,330
those extracts and output the data in a

00:29:20,140 --> 00:29:26,820
fairly standard way which then koha

00:29:22,330 --> 00:29:29,110
could eat so in time I had this huge

00:29:26,820 --> 00:29:30,910
repository of all these scripts and some

00:29:29,110 --> 00:29:32,740
of them were deeply custom and some of

00:29:30,910 --> 00:29:36,000
them had lots of command line switches

00:29:32,740 --> 00:29:38,770
you could use to tweak their behavior

00:29:36,000 --> 00:29:40,450
that repository is still out i have it

00:29:38,770 --> 00:29:41,590
on my github account and it's messy as

00:29:40,450 --> 00:29:44,080
heck i need to get in there when these

00:29:41,590 --> 00:29:46,809
days and curate it but it's it was just

00:29:44,080 --> 00:29:49,330
this pile of scripts that i wrote well

00:29:46,809 --> 00:29:52,500
after I'd been added about 90 year and a

00:29:49,330 --> 00:29:54,880
half we got a second migrations person

00:29:52,500 --> 00:29:57,370
so I have this bundle of code in a big

00:29:54,880 --> 00:30:01,460
bucket that I put out there on our

00:29:57,370 --> 00:30:03,140
guitar git repo so that she could see it

00:30:01,460 --> 00:30:06,460
and she started looking over the code

00:30:03,140 --> 00:30:09,080
and wow this is amazing no my cat well

00:30:06,460 --> 00:30:11,539
you're gonna write more one so you're

00:30:09,080 --> 00:30:14,690
going to put it in there so as the head

00:30:11,539 --> 00:30:16,220
of migrations at that time I imposed the

00:30:14,690 --> 00:30:20,960
rule that it needed to pass pro critic

00:30:16,220 --> 00:30:26,779
for it needed a pass turn pro Critic as

00:30:20,960 --> 00:30:29,059
installed three was nice we didn't get

00:30:26,779 --> 00:30:31,429
to the process of doing a custom pro

00:30:29,059 --> 00:30:33,429
critic RC for that repository because

00:30:31,429 --> 00:30:35,120
our customers never ever saw it and

00:30:33,429 --> 00:30:37,690
generally once the script was written

00:30:35,120 --> 00:30:43,130
you didn't need to change it much if

00:30:37,690 --> 00:30:44,960
ever so we could be a little sloppy

00:30:43,130 --> 00:30:46,880
about it and it was just the two of us

00:30:44,960 --> 00:30:50,600
anyway and she and I shared a brain for

00:30:46,880 --> 00:30:52,970
more than a year so it was really a kind

00:30:50,600 --> 00:30:56,299
of a lacks process but we went through a

00:30:52,970 --> 00:30:58,610
version of this process in Pro Creek

00:30:56,299 --> 00:31:00,110
dash for gave you pretty good

00:30:58,610 --> 00:31:02,270
readability that somebody that had good

00:31:00,110 --> 00:31:05,299
sense could read the code and do things

00:31:02,270 --> 00:31:06,770
with it if they needed to you may find

00:31:05,299 --> 00:31:08,149
that you don't need to customize your

00:31:06,770 --> 00:31:10,070
pro criticar see much if you have a

00:31:08,149 --> 00:31:11,929
small project two or three devs talk

00:31:10,070 --> 00:31:13,730
about it and say pro critic for pro

00:31:11,929 --> 00:31:18,529
critic five is plenty if you can match

00:31:13,730 --> 00:31:20,870
that we're good so it could be that

00:31:18,529 --> 00:31:24,260
enforcing that rules lawyer in as

00:31:20,870 --> 00:31:26,500
installed works for you but that's up to

00:31:24,260 --> 00:31:31,190
you and your team highly subjective

00:31:26,500 --> 00:31:32,990
right deeply personal so once you commit

00:31:31,190 --> 00:31:39,140
it then put policies in place to enforce

00:31:32,990 --> 00:31:43,330
it alright we have almost 20 minutes

00:31:39,140 --> 00:31:46,120
left not complaining

00:31:43,330 --> 00:31:57,250
so let's talk about pro critic questions

00:31:46,120 --> 00:31:58,660
comments thoughts Julia yeah yeah you

00:31:57,250 --> 00:32:01,120
can put it in the root of the repo and

00:31:58,660 --> 00:32:04,330
then you can you you know in your bash

00:32:01,120 --> 00:32:06,220
profile you can set up aliases that use

00:32:04,330 --> 00:32:13,420
that theme or use that prophetic RC

00:32:06,220 --> 00:32:15,430
whatever community yeah yep it does you

00:32:13,420 --> 00:32:17,740
can there's a theme you can define

00:32:15,430 --> 00:32:20,800
multiple themes even within the same Pro

00:32:17,740 --> 00:32:24,610
critic RC so you could define a theme

00:32:20,800 --> 00:32:28,680
that says this is for my deep internal

00:32:24,610 --> 00:32:32,560
code and this is for my user layer stuff

00:32:28,680 --> 00:32:35,410
or this is for my database code or this

00:32:32,560 --> 00:32:38,500
is for my UI code you can define themes

00:32:35,410 --> 00:32:39,940
within the same Pro critic RC and then

00:32:38,500 --> 00:32:42,040
you say Pro critic dash dash theme

00:32:39,940 --> 00:32:55,720
whatever and trigger your pearl critic

00:32:42,040 --> 00:33:00,310
RC and you're done oh you are so clever

00:32:55,720 --> 00:33:04,780
thank you sometimes you got to break the

00:33:00,310 --> 00:33:06,100
rules sometimes the rule just doesn't

00:33:04,780 --> 00:33:09,820
make sense and you got to break the

00:33:06,100 --> 00:33:12,730
rules inside your code you can do

00:33:09,820 --> 00:33:16,120
hashtag hashtag no critic and name a

00:33:12,730 --> 00:33:19,450
rule and that rule will not be enforced

00:33:16,120 --> 00:33:21,270
on that line now if you do it against

00:33:19,450 --> 00:33:26,170
the left margin it will not be an

00:33:21,270 --> 00:33:28,060
enforced in that lexical scope so it is

00:33:26,170 --> 00:33:30,430
lexically scoped if you're against the

00:33:28,060 --> 00:33:32,050
left left edge it'll be for that entire

00:33:30,430 --> 00:33:33,760
lexical scope so it could be packaged

00:33:32,050 --> 00:33:35,980
wide or it could be subroutine wine or

00:33:33,760 --> 00:33:39,280
whatever you need or you can do it line

00:33:35,980 --> 00:33:41,530
by line now if you just say no critic

00:33:39,280 --> 00:33:45,550
the note pearl critic rule is enforced

00:33:41,530 --> 00:33:48,790
on that line and there's actually a pro

00:33:45,550 --> 00:33:54,340
critic rule about not doing that

00:33:48,790 --> 00:33:57,580
whoo-hoo-hoo unscored unskilled no

00:33:54,340 --> 00:33:59,980
critic it will complain about unspoken

00:33:57,580 --> 00:34:01,450
critics don't it really doesn't think

00:33:59,980 --> 00:34:04,330
you ought to turn the whole thing off it

00:34:01,450 --> 00:34:06,340
will fuss about that very thing there's

00:34:04,330 --> 00:34:09,910
also a rule for meaningless no critic if

00:34:06,340 --> 00:34:11,590
you're doing something and saying no

00:34:09,910 --> 00:34:13,240
critic for this and that's not the rule

00:34:11,590 --> 00:34:14,710
that applies there's actually a pro

00:34:13,240 --> 00:34:16,840
critic rule that will pick that off and

00:34:14,710 --> 00:34:18,550
say you're saying no critic here but

00:34:16,840 --> 00:34:25,270
that doesn't make sense useless no

00:34:18,550 --> 00:34:28,720
critic is a valid rule okay so yes you

00:34:25,270 --> 00:34:31,320
absolutely can break the rules but

00:34:28,720 --> 00:34:35,730
everybody who comes behind you will know

00:34:31,320 --> 00:34:35,730
that you have broken the rules edwin

00:34:41,880 --> 00:34:47,800
what you can do there is create a copy

00:34:44,590 --> 00:34:52,600
of the rule set the you can't overload

00:34:47,800 --> 00:34:54,370
well you know you might be good you

00:34:52,600 --> 00:34:57,640
could maybe overload the violates

00:34:54,370 --> 00:34:59,260
function I think that would be

00:34:57,640 --> 00:35:04,090
non-trivial it might be easier to make

00:34:59,260 --> 00:35:05,950
copy and enforce that one instead it

00:35:04,090 --> 00:35:08,530
doesn't it doesn't sound terribly

00:35:05,950 --> 00:35:09,760
user-friendly it could confuse users of

00:35:08,530 --> 00:35:13,660
pro critic that come behind you because

00:35:09,760 --> 00:35:15,340
you've overloaded part of a module but

00:35:13,660 --> 00:35:17,260
you could you know create a different

00:35:15,340 --> 00:35:19,900
module say don't enforce this regular

00:35:17,260 --> 00:35:22,200
rule enforce my changed copy of the rule

00:35:19,900 --> 00:35:27,190
instead the guy you could do that

00:35:22,200 --> 00:35:28,450
everybody else y'all are thinking hey

00:35:27,190 --> 00:35:32,430
you know she's gonna let us out here

00:35:28,450 --> 00:35:32,430
when get more coffee Kahlan

00:35:47,010 --> 00:35:53,800
but

00:35:49,990 --> 00:35:56,200
for hopes to go for whatever reason once

00:35:53,800 --> 00:35:58,350
you accept that as a starting point you

00:35:56,200 --> 00:35:58,350
know

00:36:04,520 --> 00:36:13,340
a number of projects procredit garces

00:36:09,060 --> 00:36:15,690
are publicly available in open source I

00:36:13,340 --> 00:36:17,820
did some googling around and I found a

00:36:15,690 --> 00:36:18,990
few that were that were out there where

00:36:17,820 --> 00:36:21,450
they've said you know for this project

00:36:18,990 --> 00:36:24,320
here's our pro critic RC and you can

00:36:21,450 --> 00:36:27,510
certainly use those starting points

00:36:24,320 --> 00:36:29,250
deeply subjective still applies now you

00:36:27,510 --> 00:36:31,260
might try to find projects similar to

00:36:29,250 --> 00:36:33,990
your own project or you might find you

00:36:31,260 --> 00:36:37,860
know projects in the same problem domain

00:36:33,990 --> 00:36:40,710
space for that kind of activity just if

00:36:37,860 --> 00:36:46,500
you don't want to start from the whole

00:36:40,710 --> 00:36:48,690
big set of stuff that's installed Damien

00:36:46,500 --> 00:36:57,120
actually publishes his pro critic RC

00:36:48,690 --> 00:37:01,940
it's available online you know I don't

00:36:57,120 --> 00:37:01,940
know it does anybody else now yes yeah

00:37:02,960 --> 00:37:11,480
yeah you can set up syntactic rules for

00:37:05,580 --> 00:37:11,480
for them to holler at you John

00:37:14,369 --> 00:37:18,390
thank you yeah here

00:37:27,380 --> 00:37:35,319
that's clever I am so gonna do that I've

00:37:30,859 --> 00:37:35,319
never done that that is at this genius

00:37:37,539 --> 00:37:52,819
yeah now tidy that's neat I like that

00:37:43,970 --> 00:37:56,539
does he yeah I haven't written any new

00:37:52,819 --> 00:37:57,769
rules cpanel has I don't know probably

00:37:56,539 --> 00:38:02,500
20 or 30 rules that we've written

00:37:57,769 --> 00:38:06,789
internally for our specific needs that

00:38:02,500 --> 00:38:11,809
are enhancements of others in many cases

00:38:06,789 --> 00:38:13,910
I think some of our rules about no

00:38:11,809 --> 00:38:17,000
critic behavior are cpanel specific I

00:38:13,910 --> 00:38:18,289
have not written any of them I spent

00:38:17,000 --> 00:38:21,109
some time looking at over last night and

00:38:18,289 --> 00:38:23,059
and kind of sketched out a draft one

00:38:21,109 --> 00:38:27,400
just to play with it but it was it was a

00:38:23,059 --> 00:38:27,400
meaningless rule here

00:38:35,300 --> 00:38:39,130
well I know that we don't

00:38:49,780 --> 00:38:53,950
question why

00:38:52,090 --> 00:38:55,480
is there any circumstance where you

00:38:53,950 --> 00:38:57,460
wouldn't want to have explicit returns

00:38:55,480 --> 00:38:59,860
from a subroutine yeah let's talk about

00:38:57,460 --> 00:39:01,240
specific rule and over here with up just

00:38:59,860 --> 00:39:07,420
will come back to you in just a moment

00:39:01,240 --> 00:39:09,660
okay haven't lost you okay bring it all

00:39:07,420 --> 00:39:09,660
right

00:39:27,020 --> 00:39:30,020
liners

00:39:47,470 --> 00:39:52,490
right by writing your violates function

00:39:50,060 --> 00:39:55,390
specifically for that behavior sorry

00:39:52,490 --> 00:39:55,390
look good

00:40:32,940 --> 00:40:35,940
mhm

00:40:40,170 --> 00:40:52,119
sure we actually have one at that cpanel

00:40:44,170 --> 00:40:53,890
that watches for use of acne and it will

00:40:52,119 --> 00:40:56,650
it will complain if you use anything in

00:40:53,890 --> 00:40:59,200
Acme and and I did I was completely

00:40:56,650 --> 00:41:03,310
unaware of this rule until my teammate

00:40:59,200 --> 00:41:05,619
triggered it and I walked around the

00:41:03,310 --> 00:41:10,990
corner to his office and I said ricas

00:41:05,619 --> 00:41:13,300
why are you using Acme crap here and the

00:41:10,990 --> 00:41:19,060
people who left know what Acme crap does

00:41:13,300 --> 00:41:21,490
and he wit just you know okay those two

00:41:19,060 --> 00:41:25,930
ways to do that I'm like that's clever

00:41:21,490 --> 00:41:27,609
but no and there was another time he did

00:41:25,930 --> 00:41:30,369
one of them that it's it's a syntactic

00:41:27,609 --> 00:41:34,690
sugar kind of Acme module and he and and

00:41:30,369 --> 00:41:36,640
I went okay oh I'll no critic bad that's

00:41:34,690 --> 00:41:38,380
a pretty good use of that all this no

00:41:36,640 --> 00:41:40,240
critic that it actually makes sense it

00:41:38,380 --> 00:41:41,830
was some syntactic sugar thing that was

00:41:40,240 --> 00:41:46,119
tiny little thing and it was in our

00:41:41,830 --> 00:41:56,440
tests it's not shipped so that was okay

00:41:46,119 --> 00:41:58,119
with that one yes right in it and

00:41:56,440 --> 00:41:59,830
depending on how you're doing version

00:41:58,119 --> 00:42:02,560
control and how your how you're

00:41:59,830 --> 00:42:04,600
uploading things and there there's some

00:42:02,560 --> 00:42:07,450
interaction between that and your policy

00:42:04,600 --> 00:42:09,070
your behavior of your developers you

00:42:07,450 --> 00:42:11,650
release team and how they how they

00:42:09,070 --> 00:42:13,690
interact with the version control system

00:42:11,650 --> 00:42:16,930
that may determine whether you use a

00:42:13,690 --> 00:42:18,369
hook or you use when i run this i'm

00:42:16,930 --> 00:42:21,190
going to run pro critic we have at

00:42:18,369 --> 00:42:23,710
cpanel a script called CP lint that runs

00:42:21,190 --> 00:42:26,619
pro critic it runs pearl tidy it looks

00:42:23,710 --> 00:42:28,630
for new locale strings it looks for if

00:42:26,619 --> 00:42:31,480
you touch any file all the tests that

00:42:28,630 --> 00:42:33,400
touch that file get rerun if you touch a

00:42:31,480 --> 00:42:35,260
test it gets rerun and all the other

00:42:33,400 --> 00:42:39,070
tests that touch the files it touches

00:42:35,260 --> 00:42:41,800
get rerun so it takes care of kind of

00:42:39,070 --> 00:42:45,369
some some things for you and and it's

00:42:41,800 --> 00:42:47,940
funny how CP lint and and poor critic

00:42:45,369 --> 00:42:51,930
get the same kind of flame are sometimes

00:42:47,940 --> 00:42:56,940
it's really fascinating but it's it's a

00:42:51,930 --> 00:42:59,430
useful tool for finding Bugaboos in the

00:42:56,940 --> 00:43:11,190
code before the release team does and

00:42:59,430 --> 00:43:16,130
sneers at you for them Edwin I think so

00:43:11,190 --> 00:43:16,130
I think so

00:43:21,310 --> 00:43:31,970
yep I think so I think there's a couple

00:43:29,780 --> 00:43:34,010
of rules related to comment behavior and

00:43:31,970 --> 00:43:36,080
one of them you could certainly right

00:43:34,010 --> 00:43:38,600
one because you can define when you're

00:43:36,080 --> 00:43:40,340
doing your ppi you can say I'm looking

00:43:38,600 --> 00:43:42,140
at words i'm looking at lines i'm

00:43:40,340 --> 00:43:44,240
looking at subroutines i'm looking at so

00:43:42,140 --> 00:43:45,800
you can kind of figure out what you're

00:43:44,240 --> 00:43:49,820
looking at so you could look for lines

00:43:45,800 --> 00:43:51,200
and then you know tokenize the lines and

00:43:49,820 --> 00:43:53,270
figure out you know is there a comment

00:43:51,200 --> 00:43:54,710
here then you can look at the comment

00:43:53,270 --> 00:43:57,100
and say well on it does it have this

00:43:54,710 --> 00:43:59,630
thing in there that i want scream about

00:43:57,100 --> 00:44:04,430
so you could look for misuses of there

00:43:59,630 --> 00:44:06,590
there and there you your and your right

00:44:04,430 --> 00:44:10,610
you could actually be a grammar nazi

00:44:06,590 --> 00:44:17,300
that way if you wanted to I mm-hmm it's

00:44:10,610 --> 00:44:28,670
an it's Julian you had to end up 44 we

00:44:17,300 --> 00:44:36,920
got six minutes left that is one

00:44:28,670 --> 00:44:40,370
weakness of the system yeah yeah that

00:44:36,920 --> 00:44:43,100
that is one bugaboo of pro critic visit

00:44:40,370 --> 00:44:45,620
list page numbers in this book which if

00:44:43,100 --> 00:44:48,130
you have the PDF is fine because the

00:44:45,620 --> 00:44:53,600
page numbers are mostly corrected that

00:44:48,130 --> 00:44:55,250
but or if you have this this book you

00:44:53,600 --> 00:44:59,420
know god help us if a second edition

00:44:55,250 --> 00:45:04,130
ever comes out you know then pro critic

00:44:59,420 --> 00:45:06,620
will be wrong but and we'll have we'll

00:45:04,130 --> 00:45:08,240
have to start all over and okay pro

00:45:06,620 --> 00:45:10,630
critic dash dash theme equals first

00:45:08,240 --> 00:45:10,630
edition

00:45:10,950 --> 00:45:16,720
right pv p 1 and p be p 2 because you

00:45:14,590 --> 00:45:20,440
can disable all of the PBP rules by

00:45:16,720 --> 00:45:23,940
saying theme no pvp so all of the PvP

00:45:20,440 --> 00:45:23,940
specific ones aren't a theme together

00:45:32,310 --> 00:45:37,109
yeah yeah first time I saw it referring

00:45:35,560 --> 00:45:39,250
to a page number i went by that silly

00:45:37,109 --> 00:45:42,430
having men in library business i know

00:45:39,250 --> 00:45:44,170
about you know additions multiple

00:45:42,430 --> 00:45:46,000
printings and page numbers don't always

00:45:44,170 --> 00:45:47,920
come out even insane multiple printings

00:45:46,000 --> 00:45:50,020
of the same edition so you're depending

00:45:47,920 --> 00:45:52,359
on a page number is kind of it's a

00:45:50,020 --> 00:45:55,470
little Shady all right we got time for

00:45:52,359 --> 00:45:55,470
about one more anybody else

00:46:01,300 --> 00:46:08,290
good luck mmm God love you for no one

00:46:05,900 --> 00:46:08,290
else does

00:46:15,970 --> 00:46:23,960
well right and that's what our CP lint

00:46:21,349 --> 00:46:26,089
script does is it looks at the commit

00:46:23,960 --> 00:46:29,420
and says only the files that changed are

00:46:26,089 --> 00:46:31,280
fed into pro critic so you could pretty

00:46:29,420 --> 00:46:32,690
easily you could do that through a hook

00:46:31,280 --> 00:46:37,299
in your version control without too much

00:46:32,690 --> 00:46:37,299
trouble Brian I think I see your hand up

00:47:09,060 --> 00:47:12,580
right if your pro critic a whole bunch

00:47:11,350 --> 00:47:14,260
of files a whole directory full of

00:47:12,580 --> 00:47:16,750
things it's going to use one theme for

00:47:14,260 --> 00:47:18,040
everything but you could do you know

00:47:16,750 --> 00:47:20,230
hooks and your version controlled say

00:47:18,040 --> 00:47:21,700
only the files that changed do we want

00:47:20,230 --> 00:47:23,859
to check against this theme or that

00:47:21,700 --> 00:47:26,170
theme you could you could do some things

00:47:23,859 --> 00:47:46,660
with that but you'd have to write some

00:47:26,170 --> 00:47:49,109
rappers right so if your code is getting

00:47:46,660 --> 00:47:52,119
worse it'll tell you about it yeah

00:47:49,109 --> 00:47:54,250
uh-huh all right we are out of time I

00:47:52,119 --> 00:47:55,660
want to thank you all for being here I

00:47:54,250 --> 00:47:56,650
realize this is kind of early in the

00:47:55,660 --> 00:47:59,980
morning and some of your a little

00:47:56,650 --> 00:48:04,600
hungover tomorrow will be worse i assure

00:47:59,980 --> 00:48:06,460
you i really appreciate all the input

00:48:04,600 --> 00:48:09,970
all the discussion i think we had some

00:48:06,460 --> 00:48:13,510
lively talk without a lot of rancor and

00:48:09,970 --> 00:48:16,210
that means a lot to me as a speaker so

00:48:13,510 --> 00:48:19,170
thank you very much enjoy the rest of

00:48:16,210 --> 00:48:19,170
the conference we'll see

00:48:23,060 --> 00:48:25,120

YouTube URL: https://www.youtube.com/watch?v=EXPElOT2fRE


