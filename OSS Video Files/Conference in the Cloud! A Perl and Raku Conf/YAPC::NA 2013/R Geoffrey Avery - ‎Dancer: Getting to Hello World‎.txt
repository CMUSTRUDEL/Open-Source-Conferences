Title: R Geoffrey Avery - ‎Dancer: Getting to Hello World‎
Publication date: 2013-08-20
Playlist: YAPC::NA 2013
Description: 
	slides: http://platypiventures.com/perl/present

When attempting to learn Dancer I ran into the problem that all the documentation started from "Here is a 'Hello World' script". But that was assuming many things were set up and configured and that just was not true, at least not on my server.

This is a collection of what I learned.

Plus a few comments of what would be different if you wanted to use Mojolicious rather than Dancer.
Captions: 
	00:00:00,260 --> 00:00:05,190
so as we get started now before I go

00:00:03,629 --> 00:00:07,379
into the slides I just want to point out

00:00:05,190 --> 00:00:10,280
I am not actually going to show much in

00:00:07,379 --> 00:00:13,650
the way of actual dancer this is not

00:00:10,280 --> 00:00:15,540
introduction to dancer this is dancer

00:00:13,650 --> 00:00:18,090
getting to hello world this is just

00:00:15,540 --> 00:00:19,859
getting to the starting line setting up

00:00:18,090 --> 00:00:21,320
all those things you need so that you

00:00:19,859 --> 00:00:24,869
can actually do something useful like

00:00:21,320 --> 00:00:26,220
create hello world I ran into some

00:00:24,869 --> 00:00:28,769
trouble when I first tried to figure

00:00:26,220 --> 00:00:30,689
that out so that's where the slide set

00:00:28,769 --> 00:00:33,989
of slides come from another thing I'd

00:00:30,689 --> 00:00:36,600
like to point out is I actually do eat

00:00:33,989 --> 00:00:39,090
my own dog food I gave a similar talk

00:00:36,600 --> 00:00:41,219
last season and after being away from

00:00:39,090 --> 00:00:43,590
these slides for six months I took the

00:00:41,219 --> 00:00:45,840
instructions in the slides and followed

00:00:43,590 --> 00:00:48,480
them on a fresh machine and actually

00:00:45,840 --> 00:00:50,879
made these and something that works so

00:00:48,480 --> 00:00:52,199
if you follow these steps you should be

00:00:50,879 --> 00:00:56,579
able to get to something that actually

00:00:52,199 --> 00:00:58,609
works for you so now we'll get started

00:00:56,579 --> 00:01:03,210
I'm Geoff Avery I'm here to talk about

00:00:58,609 --> 00:01:05,189
dancer sort of getting to hello world so

00:01:03,210 --> 00:01:07,320
what is the answer it's one of those web

00:01:05,189 --> 00:01:10,460
frameworks there's many of them now

00:01:07,320 --> 00:01:10,460
they're all over the place and

00:01:11,090 --> 00:01:15,900
mojolicious is the other popular one

00:01:14,189 --> 00:01:17,970
these days I do have a couple points in

00:01:15,900 --> 00:01:19,470
the slides where I will discuss what you

00:01:17,970 --> 00:01:22,259
want to do if you want to do that one

00:01:19,470 --> 00:01:24,540
instead of this one but as they both run

00:01:22,259 --> 00:01:27,780
on top of plaque they're kind of the

00:01:24,540 --> 00:01:29,610
same even if different and they claim

00:01:27,780 --> 00:01:32,659
the dancer is dead simple intuitive

00:01:29,610 --> 00:01:36,360
minimalist very expressive syntax and

00:01:32,659 --> 00:01:42,270
that is built on inspired by Ruby

00:01:36,360 --> 00:01:44,310
Sinatra but what is plaque it's that

00:01:42,270 --> 00:01:46,680
middle layer that goes in between where

00:01:44,310 --> 00:01:49,170
cg I used to live and as we all know CGI

00:01:46,680 --> 00:01:50,700
is on its way out we get a third

00:01:49,170 --> 00:01:55,140
lightning talk today telling us

00:01:50,700 --> 00:01:56,939
something about CGI yes there's yet a

00:01:55,140 --> 00:01:58,680
third it's sort of the good the bad and

00:01:56,939 --> 00:02:01,909
the ugly i am not going to make any

00:01:58,680 --> 00:02:06,090
comment on which of the three is which

00:02:01,909 --> 00:02:08,429
so psg I n plaque or that super glue

00:02:06,090 --> 00:02:10,490
that holds your stuff that you write to

00:02:08,429 --> 00:02:12,290
actually make the site together

00:02:10,490 --> 00:02:15,110
and apache or nginx or something out

00:02:12,290 --> 00:02:20,600
front and it helps get things moving in

00:02:15,110 --> 00:02:22,520
between if you were going to go pick up

00:02:20,600 --> 00:02:24,860
dancer and you decided let me go google

00:02:22,520 --> 00:02:28,460
it you'd get to a site and say do these

00:02:24,860 --> 00:02:30,290
four things collect dancer run the

00:02:28,460 --> 00:02:34,850
command script to get you a hello world

00:02:30,290 --> 00:02:37,280
site CD into it run plaque up to start

00:02:34,850 --> 00:02:40,520
at on port 3000 point your browser there

00:02:37,280 --> 00:02:42,380
and well that assumes a whole lot it

00:02:40,520 --> 00:02:45,110
assumes you have a pearl modern enough

00:02:42,380 --> 00:02:49,520
that you can actually do that that you

00:02:45,110 --> 00:02:51,740
have dancer available where you can get

00:02:49,520 --> 00:02:54,200
at it that you have a front end web

00:02:51,740 --> 00:02:55,910
server and something to run them behind

00:02:54,200 --> 00:02:58,100
it so that they can talk with the proxy

00:02:55,910 --> 00:03:01,850
pneus going on and I didn't have any of

00:02:58,100 --> 00:03:03,170
that so that's where we're going to go

00:03:01,850 --> 00:03:05,840
we're going to try to get all that stuff

00:03:03,170 --> 00:03:09,350
taken care of we're going to start with

00:03:05,840 --> 00:03:11,000
a brand new boom boom to machine running

00:03:09,350 --> 00:03:13,250
on linode that's where i tested it all

00:03:11,000 --> 00:03:17,420
so it's straight out of the box we're

00:03:13,250 --> 00:03:19,070
going to add cgg GCC because i've

00:03:17,420 --> 00:03:23,120
discovered that when you try to install

00:03:19,070 --> 00:03:25,040
some things into pearl like dbi 2pm if

00:03:23,120 --> 00:03:27,740
the pearl that you have from the package

00:03:25,040 --> 00:03:29,990
manager isn't matching up with the c

00:03:27,740 --> 00:03:32,210
compiler you have now well it gets very

00:03:29,990 --> 00:03:34,700
cranky so we're going to just remove all

00:03:32,210 --> 00:03:36,710
doubt we're going to install all the new

00:03:34,700 --> 00:03:38,780
things we need for pearl we're going to

00:03:36,710 --> 00:03:41,750
put engine next to be out front starman

00:03:38,780 --> 00:03:44,030
to be in back create a hello world

00:03:41,750 --> 00:03:48,920
script and every once in a while will

00:03:44,030 --> 00:03:51,380
mention mojolicious a couple assumptions

00:03:48,920 --> 00:03:53,600
i do have a fresh of them to that i'm

00:03:51,380 --> 00:03:55,640
working on these directions should work

00:03:53,600 --> 00:03:57,980
pretty much straight up on any version

00:03:55,640 --> 00:03:59,840
of unix if you want to step further

00:03:57,980 --> 00:04:02,270
afield you may have to translate some

00:03:59,840 --> 00:04:06,110
but that's left as an exercise for the

00:04:02,270 --> 00:04:08,180
reader i also assume that you have your

00:04:06,110 --> 00:04:11,690
dns set up for whatever domain you're

00:04:08,180 --> 00:04:16,670
going to use i'm using sample dine dns

00:04:11,690 --> 00:04:19,040
dine elias org which i got free but any

00:04:16,670 --> 00:04:20,989
other thing can fit in that spot it's

00:04:19,040 --> 00:04:21,829
one of the there's a slide later that

00:04:20,989 --> 00:04:23,270
shows this in a few

00:04:21,829 --> 00:04:25,009
things that are the assumptions I've

00:04:23,270 --> 00:04:27,259
made those are the ones you want to

00:04:25,009 --> 00:04:30,259
change when you're configuring and all

00:04:27,259 --> 00:04:32,659
the code samples you see in here run as

00:04:30,259 --> 00:04:34,069
a couple of different users some of them

00:04:32,659 --> 00:04:37,039
are done by root which is sort of

00:04:34,069 --> 00:04:39,729
orangish me my developer who's going to

00:04:37,039 --> 00:04:42,830
be developing the website it's purplish

00:04:39,729 --> 00:04:45,229
mr. prod he were not gonna see much of

00:04:42,830 --> 00:04:47,569
him in these slides there are some extra

00:04:45,229 --> 00:04:49,250
slides there in last year's talk and a

00:04:47,569 --> 00:04:50,539
second slide pack that will come after

00:04:49,250 --> 00:04:53,509
this one that shows you how to use get

00:04:50,539 --> 00:04:56,870
to get things from me over to mr. prod

00:04:53,509 --> 00:04:59,330
and share things around and mr. pearl is

00:04:56,870 --> 00:05:01,219
going to install a new version of pearl

00:04:59,330 --> 00:05:03,530
for us it's not going to be owned by me

00:05:01,219 --> 00:05:04,610
or by root it'll be some special user

00:05:03,530 --> 00:05:05,960
that's going to take care of all the

00:05:04,610 --> 00:05:09,949
Pearl for us so we never have to worry

00:05:05,960 --> 00:05:13,370
about it or permissions when you're

00:05:09,949 --> 00:05:14,960
starting out on a new linux box your

00:05:13,370 --> 00:05:16,729
unless you got the distribution right

00:05:14,960 --> 00:05:18,710
after it was released it's not up to

00:05:16,729 --> 00:05:20,300
date anymore and since we're going to

00:05:18,710 --> 00:05:22,520
install some things we don't want to

00:05:20,300 --> 00:05:26,930
install things right away without

00:05:22,520 --> 00:05:29,870
updating so apt-get update after apt-get

00:05:26,930 --> 00:05:36,710
upgrade we'll get the box up to snuff

00:05:29,870 --> 00:05:38,029
where it should be now last year in the

00:05:36,710 --> 00:05:40,639
version of these slides i had a very

00:05:38,029 --> 00:05:42,589
long list of things to install here GCC

00:05:40,639 --> 00:05:45,969
and all its friends and somebody said

00:05:42,589 --> 00:05:48,379
just use build essentials so we do and

00:05:45,969 --> 00:05:50,539
when you install build-essential that's

00:05:48,379 --> 00:05:53,029
going to install a lot of things for you

00:05:50,539 --> 00:05:54,830
and suggest a few more packages I didn't

00:05:53,029 --> 00:05:56,629
bother to install them but you're

00:05:54,830 --> 00:05:58,610
looking at the list now if you see that

00:05:56,629 --> 00:06:00,889
you need something that would be a good

00:05:58,610 --> 00:06:04,490
time to go ahead and add it so this will

00:06:00,889 --> 00:06:07,870
take care of having see we're going to

00:06:04,490 --> 00:06:09,919
put in engine X you could do a patchy or

00:06:07,870 --> 00:06:15,759
Cherokee or one of the others at this

00:06:09,919 --> 00:06:18,589
point whatever floats your boat it and i

00:06:15,759 --> 00:06:20,300
showed you four people earlier so we

00:06:18,589 --> 00:06:21,529
need to create them i'm not going to

00:06:20,300 --> 00:06:24,409
dwell on this we're gonna have two

00:06:21,529 --> 00:06:27,349
groups people in almost root and then

00:06:24,409 --> 00:06:29,839
we're going to put me mr. prod in people

00:06:27,349 --> 00:06:31,699
and mr. pearl in almost route so that

00:06:29,839 --> 00:06:33,470
later we can share them with other

00:06:31,699 --> 00:06:39,200
developers that you have

00:06:33,470 --> 00:06:41,240
want to give real privileges too so when

00:06:39,200 --> 00:06:43,940
we get these things running we're going

00:06:41,240 --> 00:06:45,890
to have some logs to write plaque is

00:06:43,940 --> 00:06:47,600
going to be writing the logs on the back

00:06:45,890 --> 00:06:49,220
end of things that when you're running

00:06:47,600 --> 00:06:51,050
your site and engine X will be running

00:06:49,220 --> 00:06:53,480
them out front so we're going to put

00:06:51,050 --> 00:06:56,240
them in VAR log and we're going to

00:06:53,480 --> 00:06:58,340
change the permissions so that everyone

00:06:56,240 --> 00:07:00,260
can read write and execute that's

00:06:58,340 --> 00:07:02,180
probably not the way you want to go I

00:07:00,260 --> 00:07:04,070
decided after I made the slide maybe

00:07:02,180 --> 00:07:05,390
we'd be better to shown it and give it

00:07:04,070 --> 00:07:08,300
the ownership to the right place but

00:07:05,390 --> 00:07:11,270
these things the files in there will be

00:07:08,300 --> 00:07:13,550
owned by me and mr. prod and any other

00:07:11,270 --> 00:07:15,500
user on the system so give them to the

00:07:13,550 --> 00:07:18,440
user who's going to actually be writing

00:07:15,500 --> 00:07:22,190
into it engine X on the other hand it

00:07:18,440 --> 00:07:24,860
runs in my case as wwd in the group

00:07:22,190 --> 00:07:27,800
admin so you could give it to them or

00:07:24,860 --> 00:07:29,540
just open it up almost no one else is on

00:07:27,800 --> 00:07:30,740
my boxes so I really don't care but if

00:07:29,540 --> 00:07:35,230
you're in a bigger environment you do

00:07:30,740 --> 00:07:37,730
need to worry about such things and

00:07:35,230 --> 00:07:40,760
before I started working on all this I

00:07:37,730 --> 00:07:43,850
didn't realize that the trick to kill

00:07:40,760 --> 00:07:46,280
off processes later is to write a file

00:07:43,850 --> 00:07:47,840
somewhere with your process ID because

00:07:46,280 --> 00:07:49,100
you know the name of that file because

00:07:47,840 --> 00:07:51,560
you always use the same name for the

00:07:49,100 --> 00:07:53,900
file and then you can use it to kill off

00:07:51,560 --> 00:07:55,490
your process so we're going to make sure

00:07:53,900 --> 00:07:59,300
that our plaque up has a place to write

00:07:55,490 --> 00:08:01,460
it unfortunately being in the run

00:07:59,300 --> 00:08:04,280
directory everything gets blown away

00:08:01,460 --> 00:08:06,530
when you restart the machine so either

00:08:04,280 --> 00:08:09,440
you have to make sure that this

00:08:06,530 --> 00:08:13,760
directory ends up here again or instead

00:08:09,440 --> 00:08:16,940
of making your files VAR run plaque up /

00:08:13,760 --> 00:08:19,580
some name its VAR run black up dot

00:08:16,940 --> 00:08:20,990
whatever and then you don't have to

00:08:19,580 --> 00:08:27,260
worry about the directory disappearing

00:08:20,990 --> 00:08:30,500
out from under you when I had two

00:08:27,260 --> 00:08:32,770
aliases for route since root is the one

00:08:30,500 --> 00:08:35,419
we're going to be when we restart the

00:08:32,770 --> 00:08:38,539
engine X we will give an alias for that

00:08:35,419 --> 00:08:40,360
and every time I see things like this in

00:08:38,539 --> 00:08:43,539
print it always gives you the back

00:08:40,360 --> 00:08:45,100
version of things i like the t shell so

00:08:43,539 --> 00:08:47,800
I'm giving it to you both ways so you

00:08:45,100 --> 00:08:49,540
don't have to translate y other authors

00:08:47,800 --> 00:08:51,820
can't do that I have never figured out

00:08:49,540 --> 00:08:53,880
and then we're going to set an

00:08:51,820 --> 00:08:56,529
environment variable for pearl brew

00:08:53,880 --> 00:08:58,360
pearl brew is that thing that lets you

00:08:56,529 --> 00:09:00,820
install as many pearls as you want and

00:08:58,360 --> 00:09:03,720
if you use it the way it's designed to

00:09:00,820 --> 00:09:06,459
be used they go in your home directory

00:09:03,720 --> 00:09:08,620
in a place in a subdirectory in there

00:09:06,459 --> 00:09:10,570
but I'm not doing it that way I'm doing

00:09:08,620 --> 00:09:12,310
it all as mr. pearl we're going to put

00:09:10,570 --> 00:09:14,380
it in one place all the users will use

00:09:12,310 --> 00:09:16,420
it and we don't have to worry about

00:09:14,380 --> 00:09:20,380
which version we're using and we can

00:09:16,420 --> 00:09:23,649
stay consistent next we're going to

00:09:20,380 --> 00:09:25,720
install pearl brew we're doing this as

00:09:23,649 --> 00:09:27,550
root remember the pearl that came with

00:09:25,720 --> 00:09:29,589
the system belongs to root so he's the

00:09:27,550 --> 00:09:32,470
one who needs to do it and when I went

00:09:29,589 --> 00:09:34,779
to do it it asks me at the bottom of the

00:09:32,470 --> 00:09:37,899
page which way do you want to do it

00:09:34,779 --> 00:09:40,360
local lib to do or manual and it likes

00:09:37,899 --> 00:09:42,790
local lib so I figured why not nothing

00:09:40,360 --> 00:09:45,449
else is on the box but I don't have a

00:09:42,790 --> 00:09:47,920
local lib so we have to install it first

00:09:45,449 --> 00:09:49,690
if someone can tell me a reason why I

00:09:47,920 --> 00:09:51,579
should do one of the others I can change

00:09:49,690 --> 00:09:56,050
the slides but i think it's the way to

00:09:51,579 --> 00:09:58,839
go then we're going to make a place

00:09:56,050 --> 00:10:00,640
where we're going to put our pearl not

00:09:58,839 --> 00:10:02,260
in your home directory that would be a

00:10:00,640 --> 00:10:04,089
little silly so we're going to put it in

00:10:02,260 --> 00:10:05,350
opt pearl blue because off seems to be

00:10:04,089 --> 00:10:07,480
the place you put that sort of thing

00:10:05,350 --> 00:10:09,310
that you want to share and we're going

00:10:07,480 --> 00:10:13,720
to change the owner over to mr. pearl so

00:10:09,310 --> 00:10:17,170
he can take the rest of the steps and

00:10:13,720 --> 00:10:19,180
now we're going to give him also an

00:10:17,170 --> 00:10:24,220
environment variable so he doesn't put

00:10:19,180 --> 00:10:27,880
it in his home directory and now it's

00:10:24,220 --> 00:10:31,630
time to start brewing so pull bruin it

00:10:27,880 --> 00:10:35,680
as mr. pearl will go and put stuff there

00:10:31,630 --> 00:10:38,079
and it says here that it gives you a

00:10:35,680 --> 00:10:39,730
sort something you can source and it

00:10:38,079 --> 00:10:41,829
comes in two flavors it comes in a

00:10:39,730 --> 00:10:43,690
seashell and a bash version we don't

00:10:41,829 --> 00:10:46,089
actually need to source that because all

00:10:43,690 --> 00:10:47,290
we really need is the name of the

00:10:46,089 --> 00:10:48,550
directory where we're gonna have it our

00:10:47,290 --> 00:10:52,540
current pearl and we'll take care of

00:10:48,550 --> 00:10:54,209
that in a few slides now its time which

00:10:52,540 --> 00:10:57,209
pearl do we want to install

00:10:54,209 --> 00:11:00,179
I did this a week or two ago the newest

00:10:57,209 --> 00:11:02,100
version is out 5 18 0 so you can see the

00:11:00,179 --> 00:11:03,990
list of available pearls is the latest

00:11:02,100 --> 00:11:08,429
and greatest in each of the releases

00:11:03,990 --> 00:11:10,559
since 5003 and the newest oh well

00:11:08,429 --> 00:11:14,899
current one on the development path with

00:11:10,559 --> 00:11:23,009
just the this year is 5 19 I went 5 18 0

00:11:14,899 --> 00:11:24,899
so just use pearl brew install 5 18 0

00:11:23,009 --> 00:11:27,029
and it says here this could take a while

00:11:24,899 --> 00:11:29,009
they're not kidding on my machine that

00:11:27,029 --> 00:11:32,129
has absolutely nothing on it it took 21

00:11:29,009 --> 00:11:33,749
minutes so go get a snack come back you

00:11:32,129 --> 00:11:41,850
can watch the tail of the log as you

00:11:33,749 --> 00:11:44,490
goes along next we're going to make an

00:11:41,850 --> 00:11:46,499
alias so that we could always just point

00:11:44,490 --> 00:11:48,240
out pearl Baruch ruint current and be

00:11:46,499 --> 00:11:49,860
done with it and we'll look in there and

00:11:48,240 --> 00:11:53,759
see what's there and then we have our

00:11:49,860 --> 00:11:57,209
alias now it's time to install a few

00:11:53,759 --> 00:11:58,980
modules i started with dbi if you're

00:11:57,209 --> 00:12:00,480
really doing modern / 0 everyone knows

00:11:58,980 --> 00:12:03,299
you use something more modern than that

00:12:00,480 --> 00:12:05,910
but the point is dbi has a/c component

00:12:03,299 --> 00:12:07,589
and I could make sure that GCC is

00:12:05,910 --> 00:12:09,420
playing along this is where i usually

00:12:07,589 --> 00:12:12,439
get in trouble if I'm when trying to

00:12:09,420 --> 00:12:15,360
install things on the system pearl and

00:12:12,439 --> 00:12:17,999
then we have to install llamo ourselves

00:12:15,360 --> 00:12:20,519
it's optional with dancer but it's

00:12:17,999 --> 00:12:22,410
terribly useful and it doesn't remind

00:12:20,519 --> 00:12:26,790
you to do it so go ahead and get it and

00:12:22,410 --> 00:12:29,009
then plaque task black star man which

00:12:26,790 --> 00:12:31,649
are that stuff that runs in the middle

00:12:29,009 --> 00:12:33,990
and dancer dancer template template

00:12:31,649 --> 00:12:37,559
toolkit for these things we need for

00:12:33,990 --> 00:12:39,119
dancer and after I had everything up and

00:12:37,559 --> 00:12:41,089
running i went back and just added

00:12:39,119 --> 00:12:44,490
mojolicious too and that was enough I'm

00:12:41,089 --> 00:12:46,499
expect you need plaque task black and

00:12:44,490 --> 00:12:53,069
star man probably if you're just going

00:12:46,499 --> 00:12:55,439
down the mo delicious path install last

00:12:53,069 --> 00:12:57,029
year I the slides from last year if you

00:12:55,439 --> 00:13:01,740
go back and find them they use Sipan

00:12:57,029 --> 00:13:06,649
plus but as a 518 Sipan plus is now out

00:13:01,740 --> 00:13:06,649
of favor so I switched over to minus

00:13:06,650 --> 00:13:11,310
now we're going to switch over to being

00:13:08,790 --> 00:13:15,030
an actual user and set up something for

00:13:11,310 --> 00:13:16,650
dancer and we need to add where the new

00:13:15,030 --> 00:13:18,840
pearl is so we're going to change our

00:13:16,650 --> 00:13:20,580
path and I just always have this alias

00:13:18,840 --> 00:13:23,370
for directory which you saw me use

00:13:20,580 --> 00:13:25,860
earlier so throw it in any way go into

00:13:23,370 --> 00:13:31,140
your home directory and make a web sites

00:13:25,860 --> 00:13:35,100
and then go in there and now we are up

00:13:31,140 --> 00:13:39,210
to the second step of four from the

00:13:35,100 --> 00:13:41,280
original instructions dancer minus a to

00:13:39,210 --> 00:13:44,370
build a website and it makes these files

00:13:41,280 --> 00:13:45,930
it actually the list you will see when

00:13:44,370 --> 00:13:52,410
you run it is slightly longer because it

00:13:45,930 --> 00:13:54,240
lists the directories to now it's there

00:13:52,410 --> 00:13:57,120
and ready to go if you want to run it

00:13:54,240 --> 00:14:00,240
from the command line you just run this

00:13:57,120 --> 00:14:02,190
plaque up it defaults support 3000 i

00:14:00,240 --> 00:14:03,900
figure i have more than one thing

00:14:02,190 --> 00:14:06,860
running i don't want to put on 3000 so i

00:14:03,900 --> 00:14:10,260
picked another port number and then a

00:14:06,860 --> 00:14:12,720
the script in there that needs to run if

00:14:10,260 --> 00:14:14,460
you want mojolicious the equivalent of

00:14:12,720 --> 00:14:16,530
plaque up is morbo that they give you

00:14:14,460 --> 00:14:22,680
and you also point it to the script

00:14:16,530 --> 00:14:25,410
that's out front to the site now we're

00:14:22,680 --> 00:14:28,140
going to go and configure engine X to be

00:14:25,410 --> 00:14:29,520
out front at Starman to be behind so

00:14:28,140 --> 00:14:31,500
that you don't have to run this from the

00:14:29,520 --> 00:14:33,540
command line when you run it with plaque

00:14:31,500 --> 00:14:35,040
up it's there on the command line and

00:14:33,540 --> 00:14:37,200
the logs are right there in your screen

00:14:35,040 --> 00:14:39,540
and that's not terribly useful if you

00:14:37,200 --> 00:14:41,580
want this thing to be up all the time so

00:14:39,540 --> 00:14:44,070
these are the assumptions I've made and

00:14:41,580 --> 00:14:45,600
anytime you see these values and they're

00:14:44,070 --> 00:14:48,090
coming slides that's the things you're

00:14:45,600 --> 00:14:52,530
going need to change to make it work on

00:14:48,090 --> 00:14:54,510
your machine so I have a domain and the

00:14:52,530 --> 00:14:56,250
me copy of its going to put me die dev

00:14:54,510 --> 00:15:01,770
in front of it so it's me die dev that

00:14:56,250 --> 00:15:03,690
web my web that sample and since there's

00:15:01,770 --> 00:15:05,790
more than one user all mine are going in

00:15:03,690 --> 00:15:09,810
the 18,000 range port whys and the

00:15:05,790 --> 00:15:12,060
site's 21 the slide the site i actually

00:15:09,810 --> 00:15:14,550
used as a sample to originally build

00:15:12,060 --> 00:15:16,890
this is my stuff and i have 14 domains

00:15:14,550 --> 00:15:17,730
by 3 users so this is a system that

00:15:16,890 --> 00:15:19,680
worked

00:15:17,730 --> 00:15:24,120
things out of colliding with each other

00:15:19,680 --> 00:15:26,540
for engine X which is the website that

00:15:24,120 --> 00:15:28,800
sits out front like Apache it uses

00:15:26,540 --> 00:15:32,970
configuration files they go in etc

00:15:28,800 --> 00:15:36,029
engine X sites available and need to

00:15:32,970 --> 00:15:37,889
know these things you'll notice a lot of

00:15:36,029 --> 00:15:40,019
the values from that last page are in

00:15:37,889 --> 00:15:42,480
here including at the very bottom that

00:15:40,019 --> 00:15:44,790
there's a proxy so it can go through to

00:15:42,480 --> 00:15:46,709
something running behind if we had set

00:15:44,790 --> 00:15:48,510
it up with plaque up earlier on the

00:15:46,709 --> 00:15:50,910
command line that would already be

00:15:48,510 --> 00:15:53,579
running and then we this would just go

00:15:50,910 --> 00:15:55,920
straight through to 18 21 when someone

00:15:53,579 --> 00:15:57,630
came in with a real server name notice

00:15:55,920 --> 00:16:01,070
that the access logs are here and the

00:15:57,630 --> 00:16:04,860
other logs and all that good stuff so

00:16:01,070 --> 00:16:06,600
this goes in sites available and just

00:16:04,860 --> 00:16:09,300
like apache engine X has a second

00:16:06,600 --> 00:16:11,790
directory slight sites enabled so that

00:16:09,300 --> 00:16:14,570
you don't have things getting lost you

00:16:11,790 --> 00:16:17,089
just put everything in sites in abled

00:16:14,570 --> 00:16:19,370
available sorry sites available and

00:16:17,089 --> 00:16:21,510
occasionally make connections from

00:16:19,370 --> 00:16:27,690
enabled to the ones that you're actually

00:16:21,510 --> 00:16:31,440
one on right now now earlier we started

00:16:27,690 --> 00:16:33,660
the back end as us with plaque up and

00:16:31,440 --> 00:16:35,069
had our logs right here in front of us

00:16:33,660 --> 00:16:37,139
we don't really want to do that we want

00:16:35,069 --> 00:16:40,139
them to be somewhere else so we can use

00:16:37,139 --> 00:16:42,329
star man which it takes care of that for

00:16:40,139 --> 00:16:43,920
us we use the demonized version we tell

00:16:42,329 --> 00:16:49,019
which port to listen on where to write

00:16:43,920 --> 00:16:50,760
its logs where to put its process ID

00:16:49,019 --> 00:16:53,899
number so that later we can kill it off

00:16:50,760 --> 00:16:57,149
and how many workers it defaults to five

00:16:53,899 --> 00:16:59,010
if you are just doing stuff in your

00:16:57,149 --> 00:17:01,649
sandbox and it's only you hitting it

00:16:59,010 --> 00:17:03,690
there's no need to tax the server so I'd

00:17:01,649 --> 00:17:05,640
knocked it down to one but you can set

00:17:03,690 --> 00:17:08,579
that for whatever and then the last line

00:17:05,640 --> 00:17:10,530
in here is the thing that we fed the

00:17:08,579 --> 00:17:12,000
plaque up in the first place where's the

00:17:10,530 --> 00:17:15,660
script it's the front door to make the

00:17:12,000 --> 00:17:22,709
website work and now would be a good

00:17:15,660 --> 00:17:25,620
time to go look at the site oops there

00:17:22,709 --> 00:17:29,569
it is so this is a HelloWorld script as

00:17:25,620 --> 00:17:29,569
given to us by dancer

00:17:30,090 --> 00:17:34,260
yay so if you're following the

00:17:32,610 --> 00:17:36,570
directions that they originally gave you

00:17:34,260 --> 00:17:38,340
this is what you would get and about the

00:17:36,570 --> 00:17:41,429
only thing it shows you is that it has

00:17:38,340 --> 00:17:43,350
some environment variables set but

00:17:41,429 --> 00:17:45,539
that's still useful things and from

00:17:43,350 --> 00:17:50,309
there dancers not too difficult to get

00:17:45,539 --> 00:17:52,679
started to stop the backend server you

00:17:50,309 --> 00:17:55,380
can use kill and you give it the name of

00:17:52,679 --> 00:17:57,450
the file where it has written its PID

00:17:55,380 --> 00:18:01,650
when they got started it's the whole

00:17:57,450 --> 00:18:03,480
point of having them there and now I

00:18:01,650 --> 00:18:05,870
have about two minutes left which is

00:18:03,480 --> 00:18:08,669
just enough time for the bonus slides

00:18:05,870 --> 00:18:13,140
how to avoid one of the biggest errors

00:18:08,669 --> 00:18:15,330
and if you look back at last year slides

00:18:13,140 --> 00:18:17,700
or some other ones that will be

00:18:15,330 --> 00:18:21,390
available after these you can find out

00:18:17,700 --> 00:18:25,140
how to install git check everything in

00:18:21,390 --> 00:18:27,270
where you are is me and still get ptosis

00:18:25,140 --> 00:18:29,490
which instead of using github you can

00:18:27,270 --> 00:18:31,409
have your own private repository to get

00:18:29,490 --> 00:18:33,419
things across to another user to check

00:18:31,409 --> 00:18:35,429
them out and then continue along with

00:18:33,419 --> 00:18:41,340
the same pattern we use for getting the

00:18:35,429 --> 00:18:43,380
site setup so with a dancer site you get

00:18:41,340 --> 00:18:45,149
a configuration file which is in yamo

00:18:43,380 --> 00:18:47,549
another reason that we wanted to install

00:18:45,149 --> 00:18:50,159
it in the first place and this is the

00:18:47,549 --> 00:18:52,860
actual file as it comes to us with

00:18:50,159 --> 00:18:54,419
everything commented out and I decided I

00:18:52,860 --> 00:18:56,640
would like to use the template toolkit

00:18:54,419 --> 00:18:59,760
and bring some of it in and I

00:18:56,640 --> 00:19:01,740
uncommented a few of these lines notice

00:18:59,760 --> 00:19:04,230
that here the start tagging in tag use

00:19:01,740 --> 00:19:07,409
square braces template toolkit often

00:19:04,230 --> 00:19:12,840
uses angle braces for historical reasons

00:19:07,409 --> 00:19:14,730
they have both and you can dancer uses

00:19:12,840 --> 00:19:16,500
the angle but if you're going to if you

00:19:14,730 --> 00:19:18,750
have existing code that used it the

00:19:16,500 --> 00:19:20,730
other way you can flip it here so it

00:19:18,750 --> 00:19:22,409
remembers it knows the old way and uses

00:19:20,730 --> 00:19:25,730
the square braces so this is what we

00:19:22,409 --> 00:19:30,289
were given this is what I switched to

00:19:25,730 --> 00:19:30,289
could anybody see what I did wrong

00:19:33,219 --> 00:19:40,279
yes I made a bit of a mistake with

00:19:37,759 --> 00:19:43,399
template and engines and did not get it

00:19:40,279 --> 00:19:47,090
right when I did this something went

00:19:43,399 --> 00:19:52,309
wrong and I it ended up in my log file

00:19:47,090 --> 00:19:55,129
Oh help if I could actually push the

00:19:52,309 --> 00:20:03,259
left button and this is what ended up in

00:19:55,129 --> 00:20:10,299
my log file over and over and over again

00:20:03,259 --> 00:20:13,369
until I ran out of disk space there were

00:20:10,299 --> 00:20:15,080
no messages of any kind given to me to

00:20:13,369 --> 00:20:18,289
tell me something had gone wrong other

00:20:15,080 --> 00:20:22,399
than that file just kept getting bigger

00:20:18,289 --> 00:20:24,109
and then eventually ran out and I only

00:20:22,399 --> 00:20:26,779
figured it out when I was trying to do

00:20:24,109 --> 00:20:28,609
something else and it wouldn't work so i

00:20:26,779 --> 00:20:30,169
decided to make a tarball of it move it

00:20:28,609 --> 00:20:32,029
to a machine where it might work and

00:20:30,169 --> 00:20:33,739
even that wouldn't work and that's when

00:20:32,029 --> 00:20:37,549
I got a message that I was out of space

00:20:33,739 --> 00:20:43,029
and went looking so do not do your file

00:20:37,549 --> 00:20:45,349
I do not forget your spaces make sure

00:20:43,029 --> 00:20:47,570
that you remember that yeah more white

00:20:45,349 --> 00:20:49,099
space counts and the template and

00:20:47,570 --> 00:20:51,379
engines needs to be all the way out on

00:20:49,099 --> 00:20:55,570
the edge and you can avoid filling the

00:20:51,379 --> 00:20:59,149
log file and having a very bad day and

00:20:55,570 --> 00:21:00,769
that's all I got so I just about used up

00:20:59,149 --> 00:21:04,419
my time but we have time for a question

00:21:00,769 --> 00:21:19,999
or two as people get ready to wander so

00:21:04,419 --> 00:21:21,440
anything yep so you've given up on the

00:21:19,999 --> 00:21:23,220
pit files and switch the process

00:21:21,440 --> 00:21:26,070
managers

00:21:23,220 --> 00:21:27,510
or dangles is original and there's like

00:21:26,070 --> 00:21:31,500
several derivatives that are all

00:21:27,510 --> 00:21:36,360
generally better than what what's the

00:21:31,500 --> 00:21:38,940
best thing to google for run it are you

00:21:36,360 --> 00:21:49,520
NIT is what to look for in play civ for

00:21:38,940 --> 00:21:49,520
something to replace the pit file okay

00:21:52,820 --> 00:22:15,510
good to know anything else so which one

00:22:11,400 --> 00:22:46,650
is that template alloy to replace

00:22:15,510 --> 00:22:48,929
template toolkit yeah okay okay yeah the

00:22:46,650 --> 00:22:52,679
Starman poured in a public court got

00:22:48,929 --> 00:22:58,650
Maps back when we told engine X where

00:22:52,679 --> 00:23:00,450
things lived tale engine yeah engine X

00:22:58,650 --> 00:23:04,590
here at the top it's listening on a tee

00:23:00,450 --> 00:23:07,530
on the proper domain of the server name

00:23:04,590 --> 00:23:10,020
and at the very bottom here it's

00:23:07,530 --> 00:23:12,150
deciding where to send out on in the

00:23:10,020 --> 00:23:14,640
proxy settings which is back on the

00:23:12,150 --> 00:23:16,940
server it's already on on the funny port

00:23:14,640 --> 00:23:16,940
number

00:23:27,280 --> 00:23:33,140
yes the the way I got around having

00:23:30,740 --> 00:23:36,230
multiple sites because I had 14 domains

00:23:33,140 --> 00:23:39,590
and I had me although on my machine i'm

00:23:36,230 --> 00:23:41,809
jeff and then mr. prod owns a dev copy

00:23:39,590 --> 00:23:43,070
and a production copy so that that's

00:23:41,809 --> 00:23:47,539
where everything would be collected

00:23:43,070 --> 00:23:49,370
together and my solution is my stuff

00:23:47,539 --> 00:23:52,250
runs in the eighth thousands for the

00:23:49,370 --> 00:23:54,789
ports devs in the 7000 the productions

00:23:52,250 --> 00:23:57,289
in the six thousands and i have a list

00:23:54,789 --> 00:24:02,210
what number everything goes with so this

00:23:57,289 --> 00:24:04,640
site would be site 21 8021 7020 6021 and

00:24:02,210 --> 00:24:07,460
i have a configuration script that knows

00:24:04,640 --> 00:24:09,650
all the users on the machine all the

00:24:07,460 --> 00:24:13,100
domains on the machine and where all the

00:24:09,650 --> 00:24:14,720
directory roots are for log files and i

00:24:13,100 --> 00:24:17,059
have a script that I can configure that

00:24:14,720 --> 00:24:19,970
turns things on and off and mixes and

00:24:17,059 --> 00:24:24,320
matches it also builds this file right

00:24:19,970 --> 00:24:25,850
here so I don't have to so you can have

00:24:24,320 --> 00:24:31,190
as many things as you want as long as

00:24:25,850 --> 00:24:33,470
you don't collide on the port number yes

00:24:31,190 --> 00:24:36,289
and on the public end of things for the

00:24:33,470 --> 00:24:40,070
server name you use a different domain

00:24:36,289 --> 00:24:42,919
name for each site and in my case for me

00:24:40,070 --> 00:24:44,990
I put need I dev out front the dev sites

00:24:42,919 --> 00:24:47,299
i put that dev out front production side

00:24:44,990 --> 00:24:54,320
i put nothing out front and that solves

00:24:47,299 --> 00:24:57,049
the problem anything else well then

00:24:54,320 --> 00:24:59,590
thank you very much and we have a 14

00:24:57,049 --> 00:24:59,590

YouTube URL: https://www.youtube.com/watch?v=RRKAQs4__6Y


