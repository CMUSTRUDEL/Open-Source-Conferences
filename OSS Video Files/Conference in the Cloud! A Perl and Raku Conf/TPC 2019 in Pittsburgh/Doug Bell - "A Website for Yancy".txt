Title: Doug Bell - "A Website for Yancy"
Publication date: 2019-06-18
Playlist: TPC 2019 in Pittsburgh
Description: 
	This talk is about how I created a documentation website for my Yancy CMS project. This talk includes:
How to create a basic, Markdown-based website with Mojolicious and Yancy
How to render Perl module documentation (POD) in a Mojolicious website
How to export a dynamic Mojolicious website to a set of static files using Mojolicious::Command::export
Other tips and tricks for building content-based websites with Mojolicious
No previous experience with Mojolicious is necessary to understand this talk, but some basic familiarity with Perl syntax is recommended.
Captions: 
	00:00:00,000 --> 00:00:06,240
I've been working on what became my my

00:00:03,810 --> 00:00:08,160
ANSI content management system that I

00:00:06,240 --> 00:00:10,040
didn't realize I was building a content

00:00:08,160 --> 00:00:15,120
management system when I wrote it but

00:00:10,040 --> 00:00:17,369
well time makes fools of us all working

00:00:15,120 --> 00:00:20,880
on it for a couple years now mostly

00:00:17,369 --> 00:00:24,269
during the the mojolicious advent

00:00:20,880 --> 00:00:27,480
calendar as a thing and I decided that

00:00:24,269 --> 00:00:29,340
it needed its own website not I'm not a

00:00:27,480 --> 00:00:33,360
big deal just need something to you know

00:00:29,340 --> 00:00:36,290
like introduce the project like links to

00:00:33,360 --> 00:00:41,579
like the github page the meta Sipan page

00:00:36,290 --> 00:00:44,850
documentation and last to make it easy

00:00:41,579 --> 00:00:46,920
to maintain I definitely wanted to make

00:00:44,850 --> 00:00:49,370
sure that I could export it as a static

00:00:46,920 --> 00:00:52,590
set of HTML files and just upload that

00:00:49,370 --> 00:00:54,690
to my server so I didn't have to like

00:00:52,590 --> 00:00:56,940
keep a daemon running and and maintain

00:00:54,690 --> 00:00:58,440
and have to like put monitoring so I

00:00:56,940 --> 00:01:00,739
have to wake myself up in the middle of

00:00:58,440 --> 00:01:03,270
the night to restart a web server I

00:01:00,739 --> 00:01:04,290
don't even like get paid for that at

00:01:03,270 --> 00:01:07,530
work anymore

00:01:04,290 --> 00:01:09,810
so I could use one of those like fancy

00:01:07,530 --> 00:01:11,939
dancy static site generators that let

00:01:09,810 --> 00:01:14,520
you like write markdown files and then

00:01:11,939 --> 00:01:17,939
like processes them into HTML and

00:01:14,520 --> 00:01:21,689
uploads them for you I even wrote one

00:01:17,939 --> 00:01:23,280
called static Lee is but I really kind

00:01:21,689 --> 00:01:25,530
of felt that it'd be nice for Yancey to

00:01:23,280 --> 00:01:27,180
be able to host its own website so I can

00:01:25,530 --> 00:01:30,150
say that hey the the content management

00:01:27,180 --> 00:01:33,990
system is good enough to run its own

00:01:30,150 --> 00:01:35,579
website and by the time I was done it

00:01:33,990 --> 00:01:39,360
was interesting and how easy the process

00:01:35,579 --> 00:01:40,950
was and how how well it kind of

00:01:39,360 --> 00:01:42,899
integrates with mojolicious so I get to

00:01:40,950 --> 00:01:43,560
I get to basically explain how to do

00:01:42,899 --> 00:01:47,100
mojolicious

00:01:43,560 --> 00:01:50,520
while also ancillary saying here here's

00:01:47,100 --> 00:01:54,390
this cool thing that I did so I decided

00:01:50,520 --> 00:01:55,680
to make then Nancy markdown site so

00:01:54,390 --> 00:01:57,930
before I can get started with this I

00:01:55,680 --> 00:01:59,990
need to install some modules obviously

00:01:57,930 --> 00:02:03,210
I'm gonna need to use mojolicious

00:01:59,990 --> 00:02:05,579
and then I'm gonna have to use Nancy for

00:02:03,210 --> 00:02:07,079
the content management Nancy comes with

00:02:05,579 --> 00:02:10,349
bootstrap so I wanted to install that

00:02:07,079 --> 00:02:11,940
myself forget the UI library I'll use

00:02:10,349 --> 00:02:13,470
that for styling

00:02:11,940 --> 00:02:15,630
and I want to keep this really really

00:02:13,470 --> 00:02:18,420
simple so I'm gonna use sequel lights as

00:02:15,630 --> 00:02:22,140
a database I can assault all this from

00:02:18,420 --> 00:02:24,840
Sipan quite easily with these installed

00:02:22,140 --> 00:02:27,990
then I can start building a malicious

00:02:24,840 --> 00:02:30,000
light application first thing I need to

00:02:27,990 --> 00:02:32,180
do to start using mojolicious is just

00:02:30,000 --> 00:02:34,890
import the module Isha's light module

00:02:32,180 --> 00:02:38,070
this is the easiest way to get started

00:02:34,890 --> 00:02:40,170
with mojolicious but if later I decide

00:02:38,070 --> 00:02:41,850
that my application is grown there's

00:02:40,170 --> 00:02:43,770
actually a command that will take this

00:02:41,850 --> 00:02:46,770
mojolicious light script and turn it

00:02:43,770 --> 00:02:47,160
into a mojolicious module which is kind

00:02:46,770 --> 00:02:50,450
of nice

00:02:47,160 --> 00:02:52,950
oops I didn't turn off my notifications

00:02:50,450 --> 00:02:54,630
after that the next thing I really want

00:02:52,950 --> 00:02:56,370
to do is start building up my database

00:02:54,630 --> 00:02:58,320
schema the first like the first thing

00:02:56,370 --> 00:02:59,640
about any website is what does my data

00:02:58,320 --> 00:03:02,430
look like and then I can start

00:02:59,640 --> 00:03:05,190
displaying it before that I need to be

00:03:02,430 --> 00:03:08,910
able to connect to a modular SRM sequel

00:03:05,190 --> 00:03:10,530
like database so I'm gonna write a

00:03:08,910 --> 00:03:12,770
little helper that will get me a

00:03:10,530 --> 00:03:15,690
connection to a sequel ID database

00:03:12,770 --> 00:03:17,459
helpers are little utility functions

00:03:15,690 --> 00:03:20,130
that are available throughout your

00:03:17,459 --> 00:03:21,030
mojolicious site so anywhere you are if

00:03:20,130 --> 00:03:22,590
you're when you're handling your

00:03:21,030 --> 00:03:25,800
requests you can get access to these

00:03:22,590 --> 00:03:28,440
little helpers so I have to import the

00:03:25,800 --> 00:03:30,810
module and then I'll say that I'm gonna

00:03:28,440 --> 00:03:34,470
build a helper called DB and that's

00:03:30,810 --> 00:03:37,170
going to be a subroutine reference and

00:03:34,470 --> 00:03:40,590
then I get to use the state keyword of

00:03:37,170 --> 00:03:43,260
pro 510 which is nice but I'm gonna

00:03:40,590 --> 00:03:45,830
create a variable that will hold my my

00:03:43,260 --> 00:03:50,310
sequel or sorry my sequel egg connection

00:03:45,830 --> 00:03:52,560
and I'm just gonna call it Docs DB and

00:03:50,310 --> 00:03:54,660
then I'm gonna return that so every time

00:03:52,560 --> 00:03:56,370
I call this helper the first time I call

00:03:54,660 --> 00:03:57,840
it it's going to instantiate this this

00:03:56,370 --> 00:03:59,670
object and every time I call it

00:03:57,840 --> 00:04:05,610
afterwards it's going to return to me

00:03:59,670 --> 00:04:08,760
that same database object then I can

00:04:05,610 --> 00:04:12,090
write my schema and mojo sequel Lite has

00:04:08,760 --> 00:04:15,060
this fun thing called migrations where

00:04:12,090 --> 00:04:17,790
you can write a sequel statement that

00:04:15,060 --> 00:04:20,090
will create your database and as you

00:04:17,790 --> 00:04:23,100
change your database you can write new

00:04:20,090 --> 00:04:25,540
new migrations that will upgrade it

00:04:23,100 --> 00:04:28,450
through different versions

00:04:25,540 --> 00:04:32,140
so for to start out I'm gonna create

00:04:28,450 --> 00:04:34,570
version one and I say in order to go to

00:04:32,140 --> 00:04:36,700
version one up to version one what I

00:04:34,570 --> 00:04:39,280
need to do is I need to create table

00:04:36,700 --> 00:04:42,550
pages my pages table is gonna have a

00:04:39,280 --> 00:04:45,700
path and it's gonna have some markdown

00:04:42,550 --> 00:04:50,710
and then it's going to have the results

00:04:45,700 --> 00:04:55,990
of that markdown as HTML so here then is

00:04:50,710 --> 00:04:59,860
the SQL I need to do to create my my

00:04:55,990 --> 00:05:04,090
pages table then all I have to do is I

00:04:59,860 --> 00:05:07,720
tell my database object to migrate so

00:05:04,090 --> 00:05:09,820
app is the mojolicious application DB is

00:05:07,720 --> 00:05:11,560
my helper and then auto migrate is

00:05:09,820 --> 00:05:14,620
basically saying look for all the

00:05:11,560 --> 00:05:16,450
migrations you can find and look in the

00:05:14,620 --> 00:05:21,640
database and compare the two if you've

00:05:16,450 --> 00:05:23,920
got new migrations run them so now then

00:05:21,640 --> 00:05:25,750
if I were at a to up I could create a

00:05:23,920 --> 00:05:29,650
new table or I could alter my table or I

00:05:25,750 --> 00:05:37,300
can even add data so these these kind of

00:05:29,650 --> 00:05:39,580
help organize my my database upgrades so

00:05:37,300 --> 00:05:41,230
now that I have database schema I can

00:05:39,580 --> 00:05:44,110
configure my content management system

00:05:41,230 --> 00:05:46,810
to be able to edit all this data so yet

00:05:44,110 --> 00:05:49,020
C is just going to provide the the UI to

00:05:46,810 --> 00:05:53,380
allowing me to edit data in that table

00:05:49,020 --> 00:05:55,540
so yancy is a plug-in for mojolicious so

00:05:53,380 --> 00:05:59,140
i I tell more delicious I want to load

00:05:55,540 --> 00:06:01,780
the ANSI plugin I have to give it my

00:05:59,140 --> 00:06:04,360
database connection Yancy supports

00:06:01,780 --> 00:06:06,280
multiple backends so I just have to tell

00:06:04,360 --> 00:06:10,390
it this is a sequel Lite database and

00:06:06,280 --> 00:06:14,560
here's my mojo sequel Lite object to to

00:06:10,390 --> 00:06:17,110
use and then I tell it to read my schema

00:06:14,560 --> 00:06:20,050
and so what Yancy will do then is it

00:06:17,110 --> 00:06:23,470
will look at the sequel Lite schema and

00:06:20,050 --> 00:06:26,470
build a JSON schema and kind of figure

00:06:23,470 --> 00:06:29,440
out okay these these columns exist here

00:06:26,470 --> 00:06:31,890
are the types and this is how I edit

00:06:29,440 --> 00:06:31,890
them

00:06:32,090 --> 00:06:36,500
this is this this this this feature took

00:06:34,730 --> 00:06:39,620
me a while and I don't recommend anybody

00:06:36,500 --> 00:06:42,830
doing this but I'm into it now so I got

00:06:39,620 --> 00:06:44,240
to keep doing it but reading reading a

00:06:42,830 --> 00:06:47,210
secret light schema you can't really get

00:06:44,240 --> 00:06:49,760
everything so I do have to kind of tell

00:06:47,210 --> 00:06:51,980
it a couple more things here so I'm

00:06:49,760 --> 00:06:54,650
gonna tell it that in the pages table

00:06:51,980 --> 00:06:57,320
the pages table consists of a bunch of

00:06:54,650 --> 00:06:59,840
properties one of those columns is

00:06:57,320 --> 00:07:03,440
markdown and I'm gonna tell you an see

00:06:59,840 --> 00:07:05,090
that this is a holding markdown and then

00:07:03,440 --> 00:07:07,130
I'm going to tell it that when you

00:07:05,090 --> 00:07:10,550
render the markdown you're going to

00:07:07,130 --> 00:07:12,620
store it in an HTML field called HTML so

00:07:10,550 --> 00:07:14,690
this this is what I did to be able to be

00:07:12,620 --> 00:07:18,200
able to write markdown in yancey and

00:07:14,690 --> 00:07:19,910
then have it save HTML without so it

00:07:18,200 --> 00:07:27,890
actually uses a JavaScript markdown

00:07:19,910 --> 00:07:30,310
renderer to save it as HTML so last I

00:07:27,890 --> 00:07:32,600
need a way to display all of this data

00:07:30,310 --> 00:07:35,900
to display content mojolicious

00:07:32,600 --> 00:07:37,700
I create a route specifically I want to

00:07:35,900 --> 00:07:40,850
create a get route that means if someone

00:07:37,700 --> 00:07:44,300
makes a get request to my server that

00:07:40,850 --> 00:07:47,120
this route can match to find any page in

00:07:44,300 --> 00:07:50,600
the database what I want to do is I use

00:07:47,120 --> 00:07:53,930
this placeholder thing here so this the

00:07:50,600 --> 00:07:56,360
slash star ID star ID means match

00:07:53,930 --> 00:07:59,750
everything after the slash and store

00:07:56,360 --> 00:08:02,120
that in the ID field and then later what

00:07:59,750 --> 00:08:04,910
I can do is I can look up that ID as the

00:08:02,120 --> 00:08:06,860
path of my page so remember I had that

00:08:04,910 --> 00:08:08,420
path column and then the ID gets

00:08:06,860 --> 00:08:11,180
compared to the path and then shows my

00:08:08,420 --> 00:08:16,730
page we'll talk a little bit more about

00:08:11,180 --> 00:08:19,250
stash later after I configure the URL I

00:08:16,730 --> 00:08:21,350
got to give it a destination and there's

00:08:19,250 --> 00:08:23,360
a lot of ways to configure destinations

00:08:21,350 --> 00:08:25,820
and mojolicious if I wanted to I could

00:08:23,360 --> 00:08:29,660
just give it a name and then this would

00:08:25,820 --> 00:08:32,300
try to render a index.html template if

00:08:29,660 --> 00:08:34,880
it can find it I could also give it a

00:08:32,300 --> 00:08:36,590
subroutine and a subroutine would then

00:08:34,880 --> 00:08:39,260
allow me to use any kind of Perl code to

00:08:36,590 --> 00:08:43,180
write whatever I want this is going to

00:08:39,260 --> 00:08:43,180
render some text just say hello

00:08:43,500 --> 00:08:49,920
but I can also write a controller class

00:08:46,730 --> 00:08:53,310
a controller is the C in the Model View

00:08:49,920 --> 00:08:55,410
controller pattern NBC pattern and the

00:08:53,310 --> 00:08:57,870
controller lets me move that that

00:08:55,410 --> 00:09:02,279
subroutine that rendering code into a

00:08:57,870 --> 00:09:04,800
package and then if I move all if I move

00:09:02,279 --> 00:09:07,440
this code into another class I can reuse

00:09:04,800 --> 00:09:08,790
that so I can rather than saying you

00:09:07,440 --> 00:09:10,980
know here's the subroutine that you have

00:09:08,790 --> 00:09:12,750
to call here instead is the controller

00:09:10,980 --> 00:09:15,779
class and then the method in that class

00:09:12,750 --> 00:09:17,850
that you get to call and indeed if I

00:09:15,779 --> 00:09:20,279
want to even say that even shorter I can

00:09:17,850 --> 00:09:22,139
just say my controller hash hello and

00:09:20,279 --> 00:09:25,190
mojolicious will take that as the

00:09:22,139 --> 00:09:27,949
controller class and the method to call

00:09:25,190 --> 00:09:30,959
so this would then allow me to write

00:09:27,949 --> 00:09:33,199
reusable controller methods to be able

00:09:30,959 --> 00:09:36,300
to display any kind of data that I want

00:09:33,199 --> 00:09:41,029
and indeed Yancey actually comes with

00:09:36,300 --> 00:09:44,820
one so if I want to just display

00:09:41,029 --> 00:09:48,240
anything from my pages table I can say

00:09:44,820 --> 00:09:52,110
use the ANSI controller use the get

00:09:48,240 --> 00:09:54,540
action because I'm trying to get one and

00:09:52,110 --> 00:09:59,070
I'm gonna use the pages schema again see

00:09:54,540 --> 00:10:01,079
calls tables schemas and then I'm gonna

00:09:59,070 --> 00:10:02,430
use the pages template so I haven't

00:10:01,079 --> 00:10:06,899
created this yet but I'll create this

00:10:02,430 --> 00:10:09,480
soon and then I want it to ID error to

00:10:06,899 --> 00:10:13,170
default to the index page so if someone

00:10:09,480 --> 00:10:15,540
types in slash and there's no ID we're

00:10:13,170 --> 00:10:21,899
gonna say ID is index and then we'll

00:10:15,540 --> 00:10:23,550
show the index page so I need to write

00:10:21,899 --> 00:10:26,010
the template but before I can do that I

00:10:23,550 --> 00:10:27,750
need to finish the app the last line of

00:10:26,010 --> 00:10:30,779
every more delicious light application

00:10:27,750 --> 00:10:32,610
needs to be this app start this

00:10:30,779 --> 00:10:37,019
basically takes over control and

00:10:32,610 --> 00:10:39,510
actually runs the application and then I

00:10:37,019 --> 00:10:42,660
can add a template mojolicious lets me

00:10:39,510 --> 00:10:44,760
actually put templates inside my

00:10:42,660 --> 00:10:47,910
mojolicious application under the data

00:10:44,760 --> 00:10:50,399
key this is actually this is a built-in

00:10:47,910 --> 00:10:53,040
perl feature where it's this is the data

00:10:50,399 --> 00:10:54,529
file handle and what mojolicious does is

00:10:53,040 --> 00:10:58,699
it reads this file handle and

00:10:54,529 --> 00:11:00,889
for these little attacked symbols and

00:10:58,699 --> 00:11:06,199
then it uses that to say that this is

00:11:00,889 --> 00:11:08,779
the pages HTML Danny P file and so it's

00:11:06,199 --> 00:11:11,779
called pages dot HTML DP because this is

00:11:08,779 --> 00:11:13,939
an HTML file and EP stands for embedded

00:11:11,779 --> 00:11:16,610
pearl which is the template language

00:11:13,939 --> 00:11:19,279
that mojolicious uses so for this

00:11:16,610 --> 00:11:21,939
template since I'm just showing HTML

00:11:19,279 --> 00:11:25,100
that I already have all I have to do is

00:11:21,939 --> 00:11:27,139
show the HTML so the controller provides

00:11:25,100 --> 00:11:30,559
this dollar sign item variable for me

00:11:27,139 --> 00:11:33,110
and then I show its HTML column and

00:11:30,559 --> 00:11:36,230
you'll notice I have percent equals

00:11:33,110 --> 00:11:38,990
equals so this is a template directive

00:11:36,230 --> 00:11:42,559
for mojolicious the two equals means do

00:11:38,990 --> 00:11:43,819
not escape HTML by default modules just

00:11:42,559 --> 00:11:46,610
really really tries to prevent you from

00:11:43,819 --> 00:11:49,579
hurting yourself so it escapes HTML by

00:11:46,610 --> 00:11:51,829
default there's a oh right there's a lot

00:11:49,579 --> 00:11:54,559
of ways I can do that too so I can do

00:11:51,829 --> 00:11:56,300
this with tags if so this one's just a

00:11:54,559 --> 00:12:00,680
line the one on top is a line and the

00:11:56,300 --> 00:12:02,839
bottom one is a tag I can if I want to I

00:12:00,680 --> 00:12:04,850
can run any Perl code that I want so I

00:12:02,839 --> 00:12:08,569
can save it off to a variable and then

00:12:04,850 --> 00:12:12,139
display that variable or I could even

00:12:08,569 --> 00:12:15,350
write conditionals so the the percent

00:12:12,139 --> 00:12:16,939
introduces a line but then inside after

00:12:15,350 --> 00:12:19,069
that line I can write any other template

00:12:16,939 --> 00:12:22,100
code that I want and then I can close it

00:12:19,069 --> 00:12:24,319
and if I want to for example show the

00:12:22,100 --> 00:12:29,000
path right above the the page I can do

00:12:24,319 --> 00:12:30,860
that too yeah so module is embedded

00:12:29,000 --> 00:12:33,230
pearl templates are my favorite template

00:12:30,860 --> 00:12:38,629
ever and I started using templates back

00:12:33,230 --> 00:12:40,220
in HTML template back in the 90s so this

00:12:38,629 --> 00:12:43,639
this this is really nice it's a lot

00:12:40,220 --> 00:12:46,579
easier to use so that's it that's my

00:12:43,639 --> 00:12:50,809
application it's 99 lines I believe is

00:12:46,579 --> 00:12:53,449
the as the full no way yeah 99 lines was

00:12:50,809 --> 00:12:57,019
the full size of this application so I

00:12:53,449 --> 00:12:58,129
can start it up just by running the my

00:12:57,019 --> 00:12:59,749
app Perl script

00:12:58,129 --> 00:13:01,999
and then giving it the daemon arguments

00:12:59,749 --> 00:13:05,509
to run the daemon and then mojolicious

00:13:01,999 --> 00:13:08,120
tells me it's running on port 3000 and I

00:13:05,509 --> 00:13:10,970
can visit it oh right

00:13:08,120 --> 00:13:14,900
so I haven't actually created an index

00:13:10,970 --> 00:13:18,590
page yet so I can go do that using the

00:13:14,900 --> 00:13:21,680
NC editor so if I go just to slash ENC

00:13:18,590 --> 00:13:24,010
in my sights I get to see this and then

00:13:21,680 --> 00:13:26,660
I can add an item and it shows me a

00:13:24,010 --> 00:13:32,030
generated form that lets me type in a

00:13:26,660 --> 00:13:35,030
path type in some markdown and then

00:13:32,030 --> 00:13:41,950
after I add my item I can go back to my

00:13:35,030 --> 00:13:45,920
site and here is my my website yeah so

00:13:41,950 --> 00:13:49,240
so that's kind of the basic Yancey

00:13:45,920 --> 00:13:52,460
website mojolicious lights kind of thing

00:13:49,240 --> 00:13:55,520
but I remember I said I wanted to add

00:13:52,460 --> 00:13:57,430
documentation it did not look very

00:13:55,520 --> 00:14:00,140
pretty I want to make it look pretty and

00:13:57,430 --> 00:14:05,260
then I have to be able to deploy it to

00:14:00,140 --> 00:14:08,600
my server so first documentation

00:14:05,260 --> 00:14:12,260
mojolicious used to come with a plug-in

00:14:08,600 --> 00:14:15,020
called pod renderer but Sebastian

00:14:12,260 --> 00:14:17,660
deprecated it a while back and so

00:14:15,020 --> 00:14:20,750
allowed me to fork it to mojolicious

00:14:17,660 --> 00:14:23,270
plug-in pod viewer so this will render

00:14:20,750 --> 00:14:26,510
any Perl doc documentation that you tell

00:14:23,270 --> 00:14:28,760
it to so like the Ganci module I'm gonna

00:14:26,510 --> 00:14:32,180
add a plug-in this plug-in is the pod

00:14:28,760 --> 00:14:34,010
viewer plug-in and I want it to by

00:14:32,180 --> 00:14:37,730
default display the main Yancy

00:14:34,010 --> 00:14:40,250
documentation and any other

00:14:37,730 --> 00:14:43,520
documentation that it finds I want only

00:14:40,250 --> 00:14:45,590
to provide the ANSI documentation or the

00:14:43,520 --> 00:14:47,660
mojolicious plugin Yancy documentation I

00:14:45,590 --> 00:14:51,560
don't want it doing like Perl pod or

00:14:47,660 --> 00:14:53,300
Perl funk or even mojolicious displaying

00:14:51,560 --> 00:14:55,760
all that not only displaying that

00:14:53,300 --> 00:14:58,810
documentation is kind of inappropriate

00:14:55,760 --> 00:15:01,160
for me but it also kind of reduces the

00:14:58,810 --> 00:15:03,380
search engine optimization of other

00:15:01,160 --> 00:15:06,080
sites so it's it's it's friendly to do

00:15:03,380 --> 00:15:07,730
that to any other module that's not in

00:15:06,080 --> 00:15:13,670
this list of allowed modules will get

00:15:07,730 --> 00:15:15,860
linked to medicine BAM so by defaults we

00:15:13,670 --> 00:15:18,290
go to slash Perl doc and it looks like

00:15:15,860 --> 00:15:20,750
that

00:15:18,290 --> 00:15:25,250
so that brings us to our next issue

00:15:20,750 --> 00:15:28,790
which is making this look acceptable and

00:15:25,250 --> 00:15:30,860
so for style I like mostly to use the

00:15:28,790 --> 00:15:33,620
bootstrap UI library so I'm going to

00:15:30,860 --> 00:15:35,149
create a layout for bootstrap and then

00:15:33,620 --> 00:15:38,600
it's really nice to kind of have a

00:15:35,149 --> 00:15:41,300
navigation bar to get all my links and I

00:15:38,600 --> 00:15:44,000
definitely need to make the the embedded

00:15:41,300 --> 00:15:46,970
code look a little nicer

00:15:44,000 --> 00:15:49,930
so layout templates are mojolicious is

00:15:46,970 --> 00:15:53,930
way of sharing a bunch of like a common

00:15:49,930 --> 00:15:55,040
frame for all of your pages so this this

00:15:53,930 --> 00:15:58,660
is where you put things like site

00:15:55,040 --> 00:16:00,980
headers footers navigation sidebars

00:15:58,660 --> 00:16:03,440
layout templates also allow you to have

00:16:00,980 --> 00:16:05,540
extra hooks to put things into the head

00:16:03,440 --> 00:16:07,339
like for example if you've got a single

00:16:05,540 --> 00:16:12,370
template that needs a special JavaScript

00:16:07,339 --> 00:16:14,810
you can add that to your to your layout

00:16:12,370 --> 00:16:16,490
so we're gonna create a layout called

00:16:14,810 --> 00:16:21,860
default so I'm back here in my data

00:16:16,490 --> 00:16:23,089
section and the layouts directory is a

00:16:21,860 --> 00:16:25,940
special directory where mojolicious

00:16:23,089 --> 00:16:27,890
finds layouts and interestingly enough

00:16:25,940 --> 00:16:30,829
you can have directories in your data

00:16:27,890 --> 00:16:32,899
section down here and then since it's

00:16:30,829 --> 00:16:35,110
called default I'll call it default HTML

00:16:32,899 --> 00:16:36,800
thatp

00:16:35,110 --> 00:16:40,010
unfortunately I don't have time to

00:16:36,800 --> 00:16:42,589
introduce all of how bootstrap works but

00:16:40,010 --> 00:16:46,040
I can show you that I'm going to use

00:16:42,589 --> 00:16:47,839
html5 here so I got a doctype and the

00:16:46,040 --> 00:16:51,170
layout template provides me the HTML

00:16:47,839 --> 00:16:54,649
tags the head tags and here I provide a

00:16:51,170 --> 00:16:57,949
title tag that shows the title of the

00:16:54,649 --> 00:17:02,690
page and I can show you how to do that a

00:16:57,949 --> 00:17:05,689
little later here and then one other

00:17:02,690 --> 00:17:08,569
thing is I always use the stylesheet and

00:17:05,689 --> 00:17:13,339
the JavaScript template helpers because

00:17:08,569 --> 00:17:16,280
these allow me to when when URLs have to

00:17:13,339 --> 00:17:18,919
be rewritten or if I'm behind a reverse

00:17:16,280 --> 00:17:20,780
proxy the stylesheet or these these

00:17:18,919 --> 00:17:22,030
helpers will actually rewrite the path

00:17:20,780 --> 00:17:24,520
so that it's correct

00:17:22,030 --> 00:17:27,709
so here I'm just importing a stylesheet

00:17:24,520 --> 00:17:31,400
that's Yancy's bootstrap embedded

00:17:27,709 --> 00:17:32,090
bootstrap CSS so it's not a common

00:17:31,400 --> 00:17:34,630
scenario to be

00:17:32,090 --> 00:17:38,120
behind a reverse proxy with a path but

00:17:34,630 --> 00:17:42,230
it's still kind of good practice to to

00:17:38,120 --> 00:17:44,210
use these helpers in case it's difficult

00:17:42,230 --> 00:17:47,210
to diagnose the problem when you have it

00:17:44,210 --> 00:17:49,880
I guess is the main concern so the main

00:17:47,210 --> 00:17:53,030
part of a kind of a layout is displaying

00:17:49,880 --> 00:17:55,640
the content so I'm going to build a main

00:17:53,030 --> 00:17:57,860
tag I'm gonna use the bootstrap

00:17:55,640 --> 00:18:01,820
container class and then I'm gonna say

00:17:57,860 --> 00:18:03,830
to put my content in the main tag so

00:18:01,820 --> 00:18:05,750
this is where the internal template that

00:18:03,830 --> 00:18:11,150
pages template I wrote before will get

00:18:05,750 --> 00:18:13,550
put in my layout template so if you want

00:18:11,150 --> 00:18:17,720
to have other places like I said to put

00:18:13,550 --> 00:18:21,290
additional content I can use so for in

00:18:17,720 --> 00:18:24,140
my pages I can use content for content

00:18:21,290 --> 00:18:28,250
for head and the the begin tag is really

00:18:24,140 --> 00:18:30,890
fun in that it allows you to like bundle

00:18:28,250 --> 00:18:32,390
up a bunch of template contents so I'm

00:18:30,890 --> 00:18:35,420
gonna add some JavaScript so I'm gonna

00:18:32,390 --> 00:18:38,960
add VJ s and then this will go in the

00:18:35,420 --> 00:18:42,290
name section head and then later in my

00:18:38,960 --> 00:18:48,110
in my layout here I can say in head puts

00:18:42,290 --> 00:18:51,470
the head content and of course in the

00:18:48,110 --> 00:18:53,300
body put the regular content so now all

00:18:51,470 --> 00:18:55,700
of my templates have this kind of hook

00:18:53,300 --> 00:18:57,830
where I can say here this this content

00:18:55,700 --> 00:18:59,960
goes in the head if I wanted to I could

00:18:57,830 --> 00:19:02,450
add a sidebar so that I could put like a

00:18:59,960 --> 00:19:05,030
sides or I can have like author

00:19:02,450 --> 00:19:07,790
information at the bottom of page and

00:19:05,030 --> 00:19:10,670
this really helps to to make a flexible

00:19:07,790 --> 00:19:12,860
layout when you have to you know talk

00:19:10,670 --> 00:19:19,760
back and forth between the template and

00:19:12,860 --> 00:19:22,940
the layout so last I wanted to create a

00:19:19,760 --> 00:19:24,620
little bit better of a code style so I'm

00:19:22,940 --> 00:19:27,380
gonna write a little bit of CSS that'll

00:19:24,620 --> 00:19:30,110
take the pre tag add a border or some

00:19:27,380 --> 00:19:32,900
background a little bit of padding if

00:19:30,110 --> 00:19:34,940
your markup is good you can write just a

00:19:32,900 --> 00:19:37,280
little bit of CSS and make it look

00:19:34,940 --> 00:19:41,270
however you want so be sure to write

00:19:37,280 --> 00:19:43,730
good semantic meaning full markup and

00:19:41,270 --> 00:19:45,309
then oh I've got a crumb trail too and I

00:19:43,730 --> 00:19:49,990
want to make that a little bit smaller

00:19:45,309 --> 00:19:51,460
doesn't need to be as prominent so next

00:19:49,990 --> 00:19:54,159
all I have to do is use that layout that

00:19:51,460 --> 00:19:56,799
I just created so in the plug-in and in

00:19:54,159 --> 00:20:00,940
my can in my route I just have to say

00:19:56,799 --> 00:20:03,220
here use the default layout also if I

00:20:00,940 --> 00:20:06,970
want to I can set the default layout for

00:20:03,220 --> 00:20:09,700
all defaults so if I don't specify a

00:20:06,970 --> 00:20:16,559
layout otherwise it will get the default

00:20:09,700 --> 00:20:19,929
layout and this is how it changes so my

00:20:16,559 --> 00:20:23,499
my main page looks well a little bit

00:20:19,929 --> 00:20:26,649
better but my pro lock looks quite a bit

00:20:23,499 --> 00:20:29,379
better and the code snippets are

00:20:26,649 --> 00:20:36,159
actually visible and they they stand out

00:20:29,379 --> 00:20:38,289
from the rest of the page so that's how

00:20:36,159 --> 00:20:42,190
my site looks and then now if I want to

00:20:38,289 --> 00:20:45,190
export that I need to write it as HTML

00:20:42,190 --> 00:20:49,929
there's a lot of ways to do that I could

00:20:45,190 --> 00:20:52,240
just use W get mirror and then you know

00:20:49,929 --> 00:20:54,369
basically scrape my own websites and

00:20:52,240 --> 00:20:57,730
then upload that but I have some

00:20:54,369 --> 00:21:02,049
specific means unfortunately for me any

00:20:57,730 --> 00:21:04,779
links that I have need to be rewritten

00:21:02,049 --> 00:21:07,330
so any any redirects that my site might

00:21:04,779 --> 00:21:09,879
make needs to be rewritten to the

00:21:07,330 --> 00:21:12,789
destination so if I had a malicious

00:21:09,879 --> 00:21:15,070
redirect I want that to resolve into the

00:21:12,789 --> 00:21:18,369
actual page because the static sites

00:21:15,070 --> 00:21:21,429
can't redirect it doesn't have the

00:21:18,369 --> 00:21:23,769
dynamic features that way also since

00:21:21,429 --> 00:21:26,139
I'll be deploying this to my website

00:21:23,769 --> 00:21:28,450
under the slash Gansey folder I need to

00:21:26,139 --> 00:21:31,990
rewrite all the links to have that in

00:21:28,450 --> 00:21:35,289
front of it it's a little bit more than

00:21:31,990 --> 00:21:37,450
W get mirror can handle and I really

00:21:35,289 --> 00:21:40,600
don't want to build like an HTML parser

00:21:37,450 --> 00:21:43,419
and do all that that just sounds bad but

00:21:40,600 --> 00:21:49,360
mojolicious comes with an amazing Dom

00:21:43,419 --> 00:21:52,119
library that makes this trivial and as

00:21:49,360 --> 00:21:54,940
luck was habit someone me I guess

00:21:52,119 --> 00:21:56,320
wrote a mojolicious command that will

00:21:54,940 --> 00:21:59,200
allow you to take

00:21:56,320 --> 00:22:03,759
delicious app and export it as a set of

00:21:59,200 --> 00:22:05,049
mojolicious I'm sorry HTML files so now

00:22:03,759 --> 00:22:07,409
in addition to the daemon command that I

00:22:05,049 --> 00:22:11,799
had before I can run the export command

00:22:07,409 --> 00:22:15,190
so I do purl my app export I tell it

00:22:11,799 --> 00:22:16,450
where what the base URL is that's that

00:22:15,190 --> 00:22:19,620
slash can see where I'm going to deploy

00:22:16,450 --> 00:22:22,509
it later and I tell it where it wants to

00:22:19,620 --> 00:22:24,279
output all of the files to so I'm going

00:22:22,509 --> 00:22:27,789
to create a directory called deploy and

00:22:24,279 --> 00:22:29,830
write all those files there so if all

00:22:27,789 --> 00:22:31,659
you've got in your mojolicious site is

00:22:29,830 --> 00:22:34,000
just a static kind of informational

00:22:31,659 --> 00:22:36,100
website you're not using forms you don't

00:22:34,000 --> 00:22:38,860
have logins this is a really nice tool

00:22:36,100 --> 00:22:41,679
to be able to just export all that so

00:22:38,860 --> 00:22:45,149
you can upload it to somewhere else and

00:22:41,679 --> 00:22:50,350
so to deploy it I like using our sink

00:22:45,149 --> 00:22:55,000
our sink is an incredibly complex useful

00:22:50,350 --> 00:22:57,090
tool for using SSH or other protocols to

00:22:55,000 --> 00:23:00,909
sync files from one server to another

00:22:57,090 --> 00:23:05,289
for this purpose I do it recursively for

00:23:00,909 --> 00:23:07,990
mostly i exhibit to save some traffic

00:23:05,289 --> 00:23:10,480
over the wire and I upload the modified

00:23:07,990 --> 00:23:13,929
dates so that my caching works right I

00:23:10,480 --> 00:23:16,090
delete any files that aren't local on

00:23:13,929 --> 00:23:18,210
the remote so if I delete a local file

00:23:16,090 --> 00:23:20,379
it'll also be deleted on the remote host

00:23:18,210 --> 00:23:22,330
and then I'm taking the local deploy

00:23:20,379 --> 00:23:27,549
directory and I'm uploading that to my

00:23:22,330 --> 00:23:29,620
document root on my website so I highly

00:23:27,549 --> 00:23:32,289
recommend if you haven't experienced our

00:23:29,620 --> 00:23:33,610
sink to find a book on it there's

00:23:32,289 --> 00:23:35,529
probably a three or four hundred page

00:23:33,610 --> 00:23:38,309
book on it by now

00:23:35,529 --> 00:23:40,629
and I used to use it for backups

00:23:38,309 --> 00:23:43,629
incremental backups it will actually

00:23:40,629 --> 00:23:45,460
like create hard links and and help you

00:23:43,629 --> 00:23:47,500
make incremental backups while saving as

00:23:45,460 --> 00:23:51,279
much disk space as possible it's really

00:23:47,500 --> 00:23:54,250
incredible but I unfortunately cannot

00:23:51,279 --> 00:23:56,559
talk about that here so this is what it

00:23:54,250 --> 00:23:57,389
looks like this is what the low say

00:23:56,559 --> 00:24:01,269
looks like right now

00:23:57,389 --> 00:24:03,970
I added some some images there in my

00:24:01,269 --> 00:24:06,340
public folder and markdown for images is

00:24:03,970 --> 00:24:08,610
kind of annoying but eventually I made

00:24:06,340 --> 00:24:08,610
it work

00:24:09,120 --> 00:24:37,270
and that's it

00:24:11,320 --> 00:24:39,370
so are any questions yes maybe there may

00:24:37,270 --> 00:24:41,860
be limited support so yeah the question

00:24:39,370 --> 00:24:47,320
is the sequel I'd support ultra table

00:24:41,860 --> 00:24:48,820
and I I believe I've used it it's it's

00:24:47,320 --> 00:24:50,830
quite possible that maybe maybe it

00:24:48,820 --> 00:24:53,230
doesn't but in then what you could do in

00:24:50,830 --> 00:24:56,260
the migration is you could create a new

00:24:53,230 --> 00:24:59,410
temporary table load all your you know

00:24:56,260 --> 00:25:01,120
insert from select from you know

00:24:59,410 --> 00:25:05,530
basically build your new table and then

00:25:01,120 --> 00:25:06,790
rename it or yeah yeah it's basically

00:25:05,530 --> 00:25:09,280
it's just a sequel script those are just

00:25:06,790 --> 00:25:11,980
essentially saved sequel snippets and

00:25:09,280 --> 00:25:14,799
you can say yeah to up is copy the data

00:25:11,980 --> 00:25:16,480
somewhere else create the new table and

00:25:14,799 --> 00:25:19,590
load the table data back and then delete

00:25:16,480 --> 00:25:19,590
the old table

00:25:27,860 --> 00:25:30,750
yeah

00:25:29,130 --> 00:25:35,090
so yeah basically I like like the sequel

00:25:30,750 --> 00:25:38,640
syntax is essentially shorthand for that

00:25:35,090 --> 00:25:40,230
yeah well so that's it's a feature of

00:25:38,640 --> 00:25:42,590
all the mojolicious drivers

00:25:40,230 --> 00:25:48,470
so yeah mojo sequel light is a driver

00:25:42,590 --> 00:25:52,200
mojo my sequel mojo mojo PG for Postgres

00:25:48,470 --> 00:25:53,880
sequel light doesn't the DVD the DB I

00:25:52,200 --> 00:25:56,690
module for sequel light doesn't support

00:25:53,880 --> 00:25:58,860
a sync so mojo sequel late isn't as

00:25:56,690 --> 00:26:00,270
amazing as mojo my sequel and mojo

00:25:58,860 --> 00:26:02,669
Postgres because those support

00:26:00,270 --> 00:26:04,890
asynchronous operations and you can get

00:26:02,669 --> 00:26:06,690
a little more efficiency out of that so

00:26:04,890 --> 00:26:11,570
that's that's why you might use the Mojo

00:26:06,690 --> 00:26:14,690
module over you know dbi or DB x class

00:26:11,570 --> 00:26:19,380
any other questions comments concerns

00:26:14,690 --> 00:26:22,980
scathing rebuttal bombastic praise all

00:26:19,380 --> 00:26:25,350
right so since I wrote this talk a year

00:26:22,980 --> 00:26:29,400
ago I've got a couple minutes here at

00:26:25,350 --> 00:26:32,640
least oh that did not take as long as I

00:26:29,400 --> 00:26:36,360
thought last so last time I gave this

00:26:32,640 --> 00:26:39,090
talk was yeah six or eight months ago at

00:26:36,360 --> 00:26:42,570
the Chicago pro mongers and apparently

00:26:39,090 --> 00:26:45,929
we had a lot more digression so since I

00:26:42,570 --> 00:26:47,730
wrote this talk however I decided that

00:26:45,929 --> 00:26:49,980
you know what actually it'd be kind of

00:26:47,730 --> 00:26:54,090
nice if I could write my website as a

00:26:49,980 --> 00:26:55,799
bunch of markdown files on the file

00:26:54,090 --> 00:27:00,870
system like you know all the kids are

00:26:55,799 --> 00:27:03,270
doing and so I created a database for

00:27:00,870 --> 00:27:04,620
Yancey which is which ends ups being you

00:27:03,270 --> 00:27:07,080
know one of those flat-file databases

00:27:04,620 --> 00:27:10,049
that everyone likes creating I'm called

00:27:07,080 --> 00:27:13,410
Yancey backend static and so rather than

00:27:10,049 --> 00:27:17,940
loading rows into a sequel Lite database

00:27:13,410 --> 00:27:20,010
I get to create markdown files with the

00:27:17,940 --> 00:27:23,940
the the front matter the the Yamal

00:27:20,010 --> 00:27:27,070
frontmatter like like Hugo and what's

00:27:23,940 --> 00:27:32,000
the other one Ruby

00:27:27,070 --> 00:27:34,040
Jekel yes Jekel yeah I mean yeah jackal

00:27:32,000 --> 00:27:36,440
I guess invented this as far as I know

00:27:34,040 --> 00:27:38,570
but so you put all your all your

00:27:36,440 --> 00:27:39,860
metadata up on the top here and then you

00:27:38,570 --> 00:27:43,190
put your your mark down in the middle

00:27:39,860 --> 00:27:45,020
there on the bottom and then the the

00:27:43,190 --> 00:27:47,300
static back-end will render that mark

00:27:45,020 --> 00:27:50,360
down into HTML and present that to

00:27:47,300 --> 00:27:52,040
Yancey so that I tell it to use the

00:27:50,360 --> 00:27:55,970
static back-end I give it the home

00:27:52,040 --> 00:27:58,970
directory of the application and it just

00:27:55,970 --> 00:28:01,610
kind of works indeed I can then run my

00:27:58,970 --> 00:28:04,490
app I can go into UNC I can edit the

00:28:01,610 --> 00:28:05,270
markdown and then it gets updated on the

00:28:04,490 --> 00:28:08,179
file system

00:28:05,270 --> 00:28:10,610
so essentially what I've built then is a

00:28:08,179 --> 00:28:14,510
static site generator that also allows

00:28:10,610 --> 00:28:17,780
me to edit it from inside the daemon and

00:28:14,510 --> 00:28:19,429
this is I mentioned that I wrote a

00:28:17,780 --> 00:28:22,790
static site generator before this this

00:28:19,429 --> 00:28:24,920
is kind of the next step in that I'm

00:28:22,790 --> 00:28:26,690
going to rebuild it so that uses this

00:28:24,920 --> 00:28:31,640
under the hood which ought to be pretty

00:28:26,690 --> 00:28:36,190
interesting if I ever get it to work so

00:28:31,640 --> 00:28:39,190
that's all I have thank you very much

00:28:36,190 --> 00:28:39,190
yeah

00:28:41,790 --> 00:28:44,980
[Music]

00:28:45,920 --> 00:28:51,670
also dancer don't forget dancer but yeah

00:28:49,160 --> 00:28:51,670
sorry

00:29:01,530 --> 00:29:06,490
yeah so is there is there any value in

00:29:03,790 --> 00:29:10,420
making Yancy for something like this for

00:29:06,490 --> 00:29:12,610
for another web framework I could see

00:29:10,420 --> 00:29:16,990
the value to those other web frameworks

00:29:12,610 --> 00:29:22,060
I believe catalyst I believe has rapid

00:29:16,990 --> 00:29:24,760
app or rather rapid app uses catalyst so

00:29:22,060 --> 00:29:28,330
that's kind of a similar I guess I

00:29:24,760 --> 00:29:30,160
noticed a lot of parallels after the

00:29:28,330 --> 00:29:32,380
fact I noticed a lot of parallels

00:29:30,160 --> 00:29:34,800
between what I was doing and what rapid

00:29:32,380 --> 00:29:39,610
app has been doing for a long time

00:29:34,800 --> 00:29:43,710
dancer I don't know it well enough like

00:29:39,610 --> 00:29:48,130
it'd be possible but mojolicious

00:29:43,710 --> 00:29:51,310
especially is so motor delicious is

00:29:48,130 --> 00:29:53,950
asynchronous like from the core so it

00:29:51,310 --> 00:29:57,880
allows me to do like WebSockets very

00:29:53,950 --> 00:30:00,130
easily always so I that's that's

00:29:57,880 --> 00:30:04,570
generally why I kind of started using

00:30:00,130 --> 00:30:06,130
mojolicious and then yeah and that's

00:30:04,570 --> 00:30:09,880
that's kind of why I why I built it

00:30:06,130 --> 00:30:13,000
using mojolicious I don't know dancer

00:30:09,880 --> 00:30:15,190
well enough to say whether or not it'd

00:30:13,000 --> 00:30:19,180
be trivial or non-trivial to be able to

00:30:15,190 --> 00:30:21,640
port something like this it probably

00:30:19,180 --> 00:30:25,930
wouldn't be too bad the JavaScript app

00:30:21,640 --> 00:30:30,640
that I wrote the editor mostly uses an

00:30:25,930 --> 00:30:33,370
open API API so actually the the

00:30:30,640 --> 00:30:37,720
JavaScript apps build like a schema spec

00:30:33,370 --> 00:30:39,370
that it then uses to know you know these

00:30:37,720 --> 00:30:41,320
are you know these are these are the

00:30:39,370 --> 00:30:44,590
rows or these are the the fields in this

00:30:41,320 --> 00:30:47,800
table so the JavaScript part of it could

00:30:44,590 --> 00:30:51,880
probably be ported to a different web

00:30:47,800 --> 00:30:54,850
framework and you just have to basically

00:30:51,880 --> 00:30:59,080
build that API layer that those routes

00:30:54,850 --> 00:31:02,610
in that other web framework yeah it

00:30:59,080 --> 00:31:04,560
wouldn't be I guess to owner us

00:31:02,610 --> 00:31:07,740
I don't know if you'd get all the fun

00:31:04,560 --> 00:31:12,360
interesting features like configurable

00:31:07,740 --> 00:31:14,580
controllers and indeed like the next the

00:31:12,360 --> 00:31:17,070
next steps of Yancey is where you can

00:31:14,580 --> 00:31:20,580
you can create a controller that allows

00:31:17,070 --> 00:31:23,520
you to do multi-tenancy so you as part

00:31:20,580 --> 00:31:25,950
of your path you add a username and then

00:31:23,520 --> 00:31:29,130
Nancy sees that ok this is the username

00:31:25,950 --> 00:31:31,200
and this is the ID we look for this row

00:31:29,130 --> 00:31:33,240
with this username and this ID and if it

00:31:31,200 --> 00:31:35,460
doesn't exist under that username well

00:31:33,240 --> 00:31:37,050
then it's not that users content and so

00:31:35,460 --> 00:31:39,900
you can allow a user just to edit their

00:31:37,050 --> 00:31:41,910
own content by building a new controller

00:31:39,900 --> 00:31:46,050
that you say here's where the username

00:31:41,910 --> 00:31:49,350
is in the half and like I want to build

00:31:46,050 --> 00:31:52,140
a calendar controller that says here's

00:31:49,350 --> 00:31:54,420
here's the date and then provide to me

00:31:52,140 --> 00:31:57,300
the the list of you know the list of

00:31:54,420 --> 00:31:59,310
weeks the list of days you probably can

00:31:57,300 --> 00:32:01,410
do all that stuff I believe I don't know

00:31:59,310 --> 00:32:03,060
if dancer is dancer NBC or sorry

00:32:01,410 --> 00:32:06,030
catalyst is NBC you could definitely do

00:32:03,060 --> 00:32:08,760
it they're migrating this to catalyst

00:32:06,030 --> 00:32:11,630
wouldn't be terrible but I couldn't tell

00:32:08,760 --> 00:32:11,630
you about dancer sorry

00:32:16,190 --> 00:32:22,370
or logic to render that generated HTML

00:32:19,730 --> 00:32:25,190
into the HTML field we mentioned that

00:32:22,370 --> 00:32:26,750
you're using javascript to do that so

00:32:25,190 --> 00:32:29,030
what are you doing that are you doing

00:32:26,750 --> 00:32:38,060
that on the fly on the front end when

00:32:29,030 --> 00:32:40,070
the pages alright so yeah so the

00:32:38,060 --> 00:32:41,540
question is how do I in JavaScript how

00:32:40,070 --> 00:32:46,400
do I take the markdown and make it into

00:32:41,540 --> 00:32:49,820
HTML and actually that is handled by so

00:32:46,400 --> 00:32:54,050
I use view the view j/s JavaScript app

00:32:49,820 --> 00:32:55,910
framework and so ya view sees the text

00:32:54,050 --> 00:33:00,830
area for the markdown change and then

00:32:55,910 --> 00:33:02,720
yeah it runs marked mm er ke D is the

00:33:00,830 --> 00:33:05,240
markdown library that I'm using it runs

00:33:02,720 --> 00:33:07,160
the marked markdown and and renders it

00:33:05,240 --> 00:33:10,160
right to the HTML so essentially it's

00:33:07,160 --> 00:33:15,980
per keystroke every every time you touch

00:33:10,160 --> 00:33:19,670
his keister to the not not to the back

00:33:15,980 --> 00:33:21,250
end but in like basically the the HTML

00:33:19,670 --> 00:33:23,180
in the markdown are updating

00:33:21,250 --> 00:33:25,250
simultaneously as you're typing it and

00:33:23,180 --> 00:33:28,100
then when you hit save then it goes back

00:33:25,250 --> 00:33:29,180
to the database so yeah basically

00:33:28,100 --> 00:33:36,050
everything happens at the front end

00:33:29,180 --> 00:33:38,540
until you hit save it pulls from the

00:33:36,050 --> 00:33:42,490
HTML so that's that's so you don't have

00:33:38,540 --> 00:33:42,490
to load a markdown library

00:33:46,270 --> 00:33:51,550
no that's yeah if you if you change the

00:33:50,230 --> 00:33:53,080
markdown not through the editor you'd

00:33:51,550 --> 00:33:56,650
have to update that yourself

00:33:53,080 --> 00:33:58,780
and that's it's a limitation yeah

00:33:56,650 --> 00:34:01,540
and that's well that's well that's also

00:33:58,780 --> 00:34:03,640
why the the NC back-end static it needs

00:34:01,540 --> 00:34:06,220
a markdown render itself so that will

00:34:03,640 --> 00:34:09,250
actually install text markdown and it's

00:34:06,220 --> 00:34:13,210
not the best markdown library but it's

00:34:09,250 --> 00:34:15,159
the best one for Perl like you the there

00:34:13,210 --> 00:34:18,220
is a common mark library for Perl

00:34:15,159 --> 00:34:19,510
but it uses the Lib common mark which

00:34:18,220 --> 00:34:20,800
means you need to see compiler and

00:34:19,510 --> 00:34:25,090
that's annoying

00:34:20,800 --> 00:34:28,360
I did try to start building a mojo

00:34:25,090 --> 00:34:30,220
dom-based common mark parser but I

00:34:28,360 --> 00:34:31,480
haven't got to finish it yet and that'd

00:34:30,220 --> 00:34:40,679
be it but that'd be really nice to have

00:34:31,480 --> 00:34:40,679
a pure Perl common mark yeah

00:34:45,300 --> 00:34:51,540
yeah yeah

00:34:49,590 --> 00:34:53,760
text text markdown is not bad that's

00:34:51,540 --> 00:35:00,480
what I've been using for statically is

00:34:53,760 --> 00:35:03,450
it's a little bit slow but right yeah

00:35:00,480 --> 00:35:05,220
text market doesn't support the modern I

00:35:03,450 --> 00:35:08,220
guess changes to markdown it's it's

00:35:05,220 --> 00:35:16,020
definitely the original the original

00:35:08,220 --> 00:35:20,430
markdown the other questions about

00:35:16,020 --> 00:35:22,880
mojolicious in general even all right

00:35:20,430 --> 00:35:22,880

YouTube URL: https://www.youtube.com/watch?v=rAFn8AxCL1w


