Title: Subsystem Update: The 2019 Smack Update - Casey Schaufler, Intel
Publication date: 2019-08-28
Playlist: Linux Security Summit NA 2019 - San Diego
Description: 
	Subsystem Update: The 2019 Smack Update - Casey Schaufler, Intel

This is the annual Smack update.
Captions: 
	00:00:00,000 --> 00:00:09,300
Security's right okay yeah so I will

00:00:07,620 --> 00:00:12,269
move on to the smack update and we'll

00:00:09,300 --> 00:00:14,340
just do all the questions at the end so

00:00:12,269 --> 00:00:19,560
the smack update yay

00:00:14,340 --> 00:00:24,480
smack stickers anybody wants them I've

00:00:19,560 --> 00:00:29,609
got the red ones and the green ones so

00:00:24,480 --> 00:00:31,199
what's new and smack this year most of

00:00:29,609 --> 00:00:35,219
what's gone on in smack has actually

00:00:31,199 --> 00:00:38,969
been done to it as opposed to for it

00:00:35,219 --> 00:00:41,790
in particular Paul mentioned this

00:00:38,969 --> 00:00:45,059
earlier the amount and LSM

00:00:41,790 --> 00:00:51,180
infrastructures have been rather

00:00:45,059 --> 00:00:53,070
thoroughly revised and as the results of

00:00:51,180 --> 00:00:58,980
this had been a lot of work a lot of

00:00:53,070 --> 00:01:03,030
things have gone on inside inside smack

00:00:58,980 --> 00:01:07,950
in order to accommodate that we added a

00:01:03,030 --> 00:01:10,439
rule km cash for for the the smack rule

00:01:07,950 --> 00:01:12,570
lists got significant performance

00:01:10,439 --> 00:01:14,520
improvement by doing that that was a

00:01:12,570 --> 00:01:19,830
very obvious change that one of the

00:01:14,520 --> 00:01:27,119
people at Samsung working on Tyson added

00:01:19,830 --> 00:01:30,090
also there was this in order to list out

00:01:27,119 --> 00:01:32,970
the the labels that are known to the

00:01:30,090 --> 00:01:37,530
system there was this kind of funky

00:01:32,970 --> 00:01:39,329
global label list associated so threaded

00:01:37,530 --> 00:01:41,490
through everything and somebody

00:01:39,329 --> 00:01:43,439
recognized that there was an easier way

00:01:41,490 --> 00:01:47,930
to do it that you didn't need that list

00:01:43,439 --> 00:01:51,659
after all and so we just took that out

00:01:47,930 --> 00:01:55,259
again making making it more performant

00:01:51,659 --> 00:02:00,630
and less memory consumptive especially

00:01:55,259 --> 00:02:02,130
on small systems and there were some

00:02:00,630 --> 00:02:07,229
bugs in the way

00:02:02,130 --> 00:02:10,319
ipv6 ICMP was handled that led to led

00:02:07,229 --> 00:02:11,670
the things the bad neighbor syndrome

00:02:10,319 --> 00:02:13,230
that Paul was talking about earlier

00:02:11,670 --> 00:02:18,590
today

00:02:13,230 --> 00:02:21,840
and just by actually taking care of that

00:02:18,590 --> 00:02:24,150
performed a lot of cases where it was

00:02:21,840 --> 00:02:28,170
hanging before where you would get a

00:02:24,150 --> 00:02:31,739
timeout or immediately rejected so big

00:02:28,170 --> 00:02:36,470
kind of a big win there especially for

00:02:31,739 --> 00:02:39,500
those those people who are using ipv6 so

00:02:36,470 --> 00:02:42,569
there hasn't been a lot of change but

00:02:39,500 --> 00:02:46,530
just to give you an idea of this of how

00:02:42,569 --> 00:02:50,849
many time changes have gone we had 44

00:02:46,530 --> 00:02:56,510
total total changes most most of them

00:02:50,849 --> 00:02:59,340
were in the the stacking infrastructure

00:02:56,510 --> 00:03:01,370
by far the next most was the the mount

00:02:59,340 --> 00:03:04,019
or the mountains for structure changes

00:03:01,370 --> 00:03:06,420
and actually there's some overlap in

00:03:04,019 --> 00:03:09,660
there because their mount their mount

00:03:06,420 --> 00:03:13,410
infrastructure changes for stacking as

00:03:09,660 --> 00:03:17,700
well as for for the mount infrastructure

00:03:13,410 --> 00:03:20,519
a bunch of the cleanup that's been going

00:03:17,700 --> 00:03:22,290
on throughout those throughout the the

00:03:20,519 --> 00:03:26,639
Linux kernel shows up showed up here as

00:03:22,290 --> 00:03:28,380
well so again everybody who's here who

00:03:26,639 --> 00:03:29,880
had had a hand in this thank you very

00:03:28,380 --> 00:03:34,349
much if there's nobody here

00:03:29,880 --> 00:03:37,049
well oh well so what are we gonna do

00:03:34,349 --> 00:03:40,169
next what's on the to-do list by the way

00:03:37,049 --> 00:03:42,120
this the amount of work that I've been

00:03:40,169 --> 00:03:44,160
able to do person that has been taken up

00:03:42,120 --> 00:03:48,030
by some other things that we talked

00:03:44,160 --> 00:03:51,870
about earlier what are we gonna do next

00:03:48,030 --> 00:03:54,660
well one of the things that came up in

00:03:51,870 --> 00:03:56,970
the process of actually doing the

00:03:54,660 --> 00:04:04,010
stacking was that the networking code

00:03:56,970 --> 00:04:06,900
really has got some cruft it's got some

00:04:04,010 --> 00:04:10,260
some bad ideas in it and they're all

00:04:06,900 --> 00:04:12,870
mine I will own up to that those are all

00:04:10,260 --> 00:04:14,930
mine but that was done before we had

00:04:12,870 --> 00:04:17,639
Calypso now that we have Calypso the

00:04:14,930 --> 00:04:20,539
ipv6 code can be done a whole lot

00:04:17,639 --> 00:04:23,070
cleaner than it was initially so

00:04:20,539 --> 00:04:26,610
probably probably the biggest task there

00:04:23,070 --> 00:04:32,340
is is to replace the current ipv6

00:04:26,610 --> 00:04:35,879
court had port bastes controls with

00:04:32,340 --> 00:04:38,569
Calypso and the other project that the

00:04:35,879 --> 00:04:41,909
real I thought was really interesting is

00:04:38,569 --> 00:04:45,569
we've got somebody who really wanted to

00:04:41,909 --> 00:04:48,719
do this and so he's he's writing a

00:04:45,569 --> 00:04:51,150
translator for SELinux policy to

00:04:48,719 --> 00:04:56,789
translate SELinux policy into smack

00:04:51,150 --> 00:04:58,740
rules that's going to be very

00:04:56,789 --> 00:05:02,039
interesting to see what the actual

00:04:58,740 --> 00:05:03,509
outcome of that is I think we're going

00:05:02,039 --> 00:05:09,419
to find that there are a lot of things

00:05:03,509 --> 00:05:11,729
where we have conceptual issues that are

00:05:09,419 --> 00:05:15,210
going to make that something you can't

00:05:11,729 --> 00:05:18,150
really do automatically but it's it will

00:05:15,210 --> 00:05:20,430
be an interesting interesting thing to

00:05:18,150 --> 00:05:25,710
see how it comes out and I hope to hope

00:05:20,430 --> 00:05:27,210
to talk about that next year and there's

00:05:25,710 --> 00:05:29,819
just one other thing I want to do it's

00:05:27,210 --> 00:05:31,949
like it's the last presenter here I just

00:05:29,819 --> 00:05:33,810
want to call out James and we should

00:05:31,949 --> 00:05:34,889
give him a round of applause for putting

00:05:33,810 --> 00:05:36,960
these together and running the the

00:05:34,889 --> 00:05:41,860
conference for us

00:05:36,960 --> 00:05:41,860

YouTube URL: https://www.youtube.com/watch?v=hhnXqIRPKbE


