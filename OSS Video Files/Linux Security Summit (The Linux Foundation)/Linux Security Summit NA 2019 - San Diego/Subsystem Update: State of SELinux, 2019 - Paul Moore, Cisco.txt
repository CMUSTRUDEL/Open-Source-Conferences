Title: Subsystem Update: State of SELinux, 2019 - Paul Moore, Cisco
Publication date: 2019-08-28
Playlist: Linux Security Summit NA 2019 - San Diego
Description: 
	Subsystem Update: State of SELinux, 2019 - Paul Moore, Cisco

This presentation will discuss the current state of SELinux, including a review of the past year and a brief discussion of current work in progress.
Captions: 
	00:00:00,240 --> 00:00:04,140
I'm a schedule that shows each one of

00:00:01,860 --> 00:00:06,180
these updates at scheduled for 10

00:00:04,140 --> 00:00:07,890
minutes but really this is just meant to

00:00:06,180 --> 00:00:09,870
be an hour where people who are

00:00:07,890 --> 00:00:12,450
maintaining subsystems get up give a

00:00:09,870 --> 00:00:13,620
brief overview so some can be shorter

00:00:12,450 --> 00:00:15,839
some of the bit longer

00:00:13,620 --> 00:00:19,520
that current scheduling software doesn't

00:00:15,839 --> 00:00:22,859
really allow us to do that and

00:00:19,520 --> 00:00:25,650
interestingly IP at the early Linux

00:00:22,859 --> 00:00:27,660
security summits the subsystem updates

00:00:25,650 --> 00:00:30,390
were a much more prominent and longer

00:00:27,660 --> 00:00:32,730
part of the the conference because these

00:00:30,390 --> 00:00:34,890
subsystems that the core security

00:00:32,730 --> 00:00:37,980
subsystems was still being actively

00:00:34,890 --> 00:00:40,890
developed so I think now that's changed

00:00:37,980 --> 00:00:43,079
and most of these are fairly mature so

00:00:40,890 --> 00:00:46,950
there they can be you typically briefed

00:00:43,079 --> 00:00:49,170
up so and we had now have a lot of

00:00:46,950 --> 00:00:51,270
people building on top of those

00:00:49,170 --> 00:00:52,980
subsystems and doing presentations of

00:00:51,270 --> 00:00:57,239
systems they're building at higher

00:00:52,980 --> 00:00:59,969
layers so with that I'll introduce Paul

00:00:57,239 --> 00:01:04,220
Moore who is the SE Linux kernel

00:00:59,969 --> 00:01:06,720
maintainer and awed it retail everybody

00:01:04,220 --> 00:01:08,280
so you guys stare at me again they

00:01:06,720 --> 00:01:10,470
promise me if I got up here four times

00:01:08,280 --> 00:01:12,180
I'd get a free sticker so you can

00:01:10,470 --> 00:01:13,380
imagine how disappointed I was when I

00:01:12,180 --> 00:01:15,479
actually got here and they were giving

00:01:13,380 --> 00:01:20,460
away for free so it was the big letdown

00:01:15,479 --> 00:01:23,310
but anyway see and here's here's my

00:01:20,460 --> 00:01:24,780
payment so yeah we're all set you'll

00:01:23,310 --> 00:01:26,400
notice he didn't give it to me earlier I

00:01:24,780 --> 00:01:27,119
had to actually wait til I got up here

00:01:26,400 --> 00:01:30,960
the fourth time

00:01:27,119 --> 00:01:31,979
so anyway state of s he likes everything

00:01:30,960 --> 00:01:35,430
I'm going to talk about here is

00:01:31,979 --> 00:01:36,990
basically from the time of you know LS s

00:01:35,430 --> 00:01:38,670
last year when I gave this talk so we're

00:01:36,990 --> 00:01:41,159
looking at the past year in the life of

00:01:38,670 --> 00:01:44,240
selinux and I'm gonna have to go kind of

00:01:41,159 --> 00:01:47,009
quickly so start off with the kernel

00:01:44,240 --> 00:01:48,450
probably the the big highlights and

00:01:47,009 --> 00:01:50,600
especially the biggest ones that you're

00:01:48,450 --> 00:01:52,799
most likely to see from user space is

00:01:50,600 --> 00:01:55,470
that now whenever there's a file

00:01:52,799 --> 00:01:58,290
operation that gets denied because of an

00:01:55,470 --> 00:02:00,540
invalid invalid file label will actually

00:01:58,290 --> 00:02:03,780
print that invalid file label using the

00:02:00,540 --> 00:02:06,750
T rockenfield in the in the audit record

00:02:03,780 --> 00:02:10,770
so that can be a nice debugging and

00:02:06,750 --> 00:02:12,120
diagnostics tool we also have proper C

00:02:10,770 --> 00:02:14,920
group two

00:02:12,120 --> 00:02:17,230
labeling which is built on top of carne

00:02:14,920 --> 00:02:19,480
FS which presented some interesting

00:02:17,230 --> 00:02:22,810
challenges but that's that's done and

00:02:19,480 --> 00:02:25,989
working now we also allow filesystem sub

00:02:22,810 --> 00:02:28,390
mounts before these were you know part

00:02:25,989 --> 00:02:30,700
of the SC Linux access controls weed

00:02:28,390 --> 00:02:33,430
policy for that but that was causing

00:02:30,700 --> 00:02:34,870
problems and honestly we were the only

00:02:33,430 --> 00:02:36,940
ones in the kernel that seemed to care

00:02:34,870 --> 00:02:39,310
all the DAC checks just allowed it and

00:02:36,940 --> 00:02:42,069
if you're familiar with kind of how sub

00:02:39,310 --> 00:02:44,220
fount works it kind of made sense just

00:02:42,069 --> 00:02:46,390
to allow those so we made that change

00:02:44,220 --> 00:02:48,220
there's also a number of internal

00:02:46,390 --> 00:02:49,629
improvements I would say the majority of

00:02:48,220 --> 00:02:52,900
the time that's where most of the SC

00:02:49,629 --> 00:02:54,519
Linux changes are these days but one in

00:02:52,900 --> 00:02:57,069
particular I wanted to call out is that

00:02:54,519 --> 00:02:59,170
we had a number of changes to the our

00:02:57,069 --> 00:03:02,319
internal mapping tables what we call the

00:02:59,170 --> 00:03:04,420
SID tab just to really improve that so

00:03:02,319 --> 00:03:08,019
that that was a nice change a nice

00:03:04,420 --> 00:03:10,659
improvement we also modernize the the

00:03:08,019 --> 00:03:12,190
make dummy policy or the MDP tool if you

00:03:10,659 --> 00:03:14,590
looked at the kernel sources you know

00:03:12,190 --> 00:03:16,930
scripts SELinux you've seen the MDP tool

00:03:14,590 --> 00:03:20,109
in there probably never run it probably

00:03:16,930 --> 00:03:22,959
don't care but this kind of serves as a

00:03:20,109 --> 00:03:24,790
nice little demonstrator of SELinux

00:03:22,959 --> 00:03:26,859
policy you know what what would be the

00:03:24,790 --> 00:03:29,530
smallest SELinux policy for a given

00:03:26,859 --> 00:03:32,470
kernel build so it's kind of an

00:03:29,530 --> 00:03:34,510
interesting little tool I would still at

00:03:32,470 --> 00:03:37,389
some point in time like to add still

00:03:34,510 --> 00:03:37,840
support to that where'd he go there he

00:03:37,389 --> 00:03:41,980
is

00:03:37,840 --> 00:03:44,139
so yeah you want to do it anyway

00:03:41,980 --> 00:03:47,560
so that's there and then of course the

00:03:44,139 --> 00:03:51,099
usual you know bug fixes we had a number

00:03:47,560 --> 00:03:52,629
of changes to the LSM framework she

00:03:51,099 --> 00:03:55,599
probably heard was stacking there was

00:03:52,629 --> 00:03:57,970
some changes for the the mounting api so

00:03:55,599 --> 00:04:00,609
that of course has follow on changes in

00:03:57,970 --> 00:04:03,459
SE linux but not really all that

00:04:00,609 --> 00:04:05,500
interesting and also a few years ago i

00:04:03,459 --> 00:04:07,629
started you know kind of just taking

00:04:05,500 --> 00:04:09,970
tabs and and running some statistics

00:04:07,629 --> 00:04:11,560
about who's contributed and so these are

00:04:09,970 --> 00:04:14,769
the top ten contributors by lines

00:04:11,560 --> 00:04:16,329
changed over the past year so normally

00:04:14,769 --> 00:04:18,190
when we had more time I would ask you to

00:04:16,329 --> 00:04:20,169
all stand up and we'd give you a round

00:04:18,190 --> 00:04:23,710
of applause but I've got ten minutes so

00:04:20,169 --> 00:04:25,330
I can't do that now but anyway consider

00:04:23,710 --> 00:04:27,849
this a thank you from me

00:04:25,330 --> 00:04:30,819
and basically everybody else that works

00:04:27,849 --> 00:04:32,800
and relies on SELinux this really is a

00:04:30,819 --> 00:04:35,860
community project and without people

00:04:32,800 --> 00:04:40,150
like this SELinux wouldn't be the tool

00:04:35,860 --> 00:04:42,490
that is today so thank you all right on

00:04:40,150 --> 00:04:44,080
to user space so the big thing is we had

00:04:42,490 --> 00:04:47,650
a new release of the past year version

00:04:44,080 --> 00:04:49,659
2.9 probably one of the more substantial

00:04:47,650 --> 00:04:53,500
things I think is that Python 3 is the

00:04:49,659 --> 00:04:56,940
new default now reportedly you can still

00:04:53,500 --> 00:04:58,960
use Python 2 but it's not by default

00:04:56,940 --> 00:05:04,270
there's been improvement started to

00:04:58,960 --> 00:05:08,139
allow all the two Y set files se managed

00:05:04,270 --> 00:05:09,460
se policy we had InfiniBand support the

00:05:08,139 --> 00:05:12,280
kernel support was there they just

00:05:09,460 --> 00:05:14,110
testing managed needed the the

00:05:12,280 --> 00:05:17,979
necessarily user space understanding of

00:05:14,110 --> 00:05:20,169
that so yeah the usual and of course bug

00:05:17,979 --> 00:05:22,779
fixes and under the hood improvements

00:05:20,169 --> 00:05:26,909
and all that good stuff so just like

00:05:22,779 --> 00:05:29,979
before these are the top 10 contributors

00:05:26,909 --> 00:05:31,690
once again if you're here in the room if

00:05:29,979 --> 00:05:35,110
you're watching the video thank you very

00:05:31,690 --> 00:05:39,210
much it really wouldn't be wouldn't be

00:05:35,110 --> 00:05:39,210
the same without you guys so thank you

00:05:39,520 --> 00:05:44,469
se Tools se tools if you're not aware of

00:05:42,310 --> 00:05:48,129
what they are they're they're not part

00:05:44,469 --> 00:05:50,319
of the main st Linux user space but

00:05:48,129 --> 00:05:52,089
they're a great little thing for doing

00:05:50,319 --> 00:05:55,750
analysis and other various things with

00:05:52,089 --> 00:05:57,819
the policy had multiple new releases the

00:05:55,750 --> 00:06:01,139
4.2 was the the big release and they

00:05:57,819 --> 00:06:03,430
were follow on updates dot one bet to

00:06:01,139 --> 00:06:06,460
this is kind of leading the way now you

00:06:03,430 --> 00:06:10,839
actually have to have Python 3 to build

00:06:06,460 --> 00:06:12,490
se tools so however the that change is

00:06:10,839 --> 00:06:14,710
also coming to us he likes user space

00:06:12,490 --> 00:06:17,500
pretty soon because what January or

00:06:14,710 --> 00:06:20,680
February Python 2 dies I forget the

00:06:17,500 --> 00:06:23,050
exact date so as he tools they've moved

00:06:20,680 --> 00:06:27,659
over to a site on based policy

00:06:23,050 --> 00:06:29,620
representation added support for SCTP

00:06:27,659 --> 00:06:32,020
policy names are available is that

00:06:29,620 --> 00:06:33,310
tributes now in the language which the

00:06:32,020 --> 00:06:35,800
big thing for that is that you no longer

00:06:33,310 --> 00:06:38,050
need a static build of Lib se pol so

00:06:35,800 --> 00:06:39,280
that was nice and now of course the

00:06:38,050 --> 00:06:40,810
usual update

00:06:39,280 --> 00:06:44,820
for the permission mapping object

00:06:40,810 --> 00:06:48,430
classes and whatnot so once again

00:06:44,820 --> 00:06:51,820
contributors and it's worth noting Chris

00:06:48,430 --> 00:06:53,889
is actually here so this is noteworthy

00:06:51,820 --> 00:06:56,139
chris hasn't been here and like i don't

00:06:53,889 --> 00:06:58,210
know forever so this is why i'm making

00:06:56,139 --> 00:07:00,790
it a big deal chris is also the person

00:06:58,210 --> 00:07:02,620
responsible for maintaining reference

00:07:00,790 --> 00:07:04,750
policy for all these years which if you

00:07:02,620 --> 00:07:07,960
use SELinux you know how important the

00:07:04,750 --> 00:07:10,030
policy is so if you see chris in the

00:07:07,960 --> 00:07:13,110
hallway tell him thanks he definitely

00:07:10,030 --> 00:07:13,110
deserves it

00:07:13,360 --> 00:07:17,800
which leads well into the SELinux

00:07:15,220 --> 00:07:19,900
reference policy highlights this is kind

00:07:17,800 --> 00:07:22,330
of short but we did have new releases in

00:07:19,900 --> 00:07:25,690
February and June add support for new

00:07:22,330 --> 00:07:29,950
modules as well as system D improvements

00:07:25,690 --> 00:07:31,870
to the policy and here's the top ten

00:07:29,950 --> 00:07:33,910
contributors byline changed and you can

00:07:31,870 --> 00:07:35,380
kind of see why it's a big deal that you

00:07:33,910 --> 00:07:39,070
thank Chris because you can see is right

00:07:35,380 --> 00:07:41,169
up there near the top so that's that

00:07:39,070 --> 00:07:44,350
this is kind of a quick slide for

00:07:41,169 --> 00:07:46,150
work-in-progress and this is not

00:07:44,350 --> 00:07:48,700
necessarily always going to be

00:07:46,150 --> 00:07:50,020
everything that's going on these are the

00:07:48,700 --> 00:07:53,110
things that I'm aware of that are going

00:07:50,020 --> 00:07:54,729
on or that we've got queued up a lot of

00:07:53,110 --> 00:07:56,530
times people might have something in

00:07:54,729 --> 00:07:59,260
their private you know repo and they

00:07:56,530 --> 00:08:01,150
just haven't posted it yet but perhaps

00:07:59,260 --> 00:08:03,789
maybe the biggest thing on here is that

00:08:01,150 --> 00:08:06,130
one on top reviving the se lakes

00:08:03,789 --> 00:08:08,140
namespace work a few years back there

00:08:06,130 --> 00:08:10,210
was some initial patches that Steven

00:08:08,140 --> 00:08:13,360
posted and I think James posted one or

00:08:10,210 --> 00:08:15,070
two patches as well those are obviously

00:08:13,360 --> 00:08:17,620
don't really apply anymore cuz it's been

00:08:15,070 --> 00:08:19,990
a year or two I'm in the process of

00:08:17,620 --> 00:08:23,229
forward porting those patches and I'm

00:08:19,990 --> 00:08:25,300
going to make a note to the SQL annex

00:08:23,229 --> 00:08:28,479
mailing list pretty soon once I get

00:08:25,300 --> 00:08:31,450
those forward potent forward ported to

00:08:28,479 --> 00:08:32,950
the current kernel I'll put those in

00:08:31,450 --> 00:08:35,110
kind of a working branch off the main

00:08:32,950 --> 00:08:36,969
selinux repo much like there's a next

00:08:35,110 --> 00:08:38,620
and all the stable branches will have

00:08:36,969 --> 00:08:41,080
like a working namespaces branch

00:08:38,620 --> 00:08:44,260
something like that and I'll keep that

00:08:41,080 --> 00:08:47,020
current as we have current as the kernel

00:08:44,260 --> 00:08:48,670
progresses so my goal is we'll kind of

00:08:47,020 --> 00:08:50,410
we can use that as a base for doing

00:08:48,670 --> 00:08:52,960
namespace development so if you're

00:08:50,410 --> 00:08:54,790
interested in contributing to this work

00:08:52,960 --> 00:08:56,770
keep your eye on the SELinux mailing

00:08:54,790 --> 00:09:00,880
list that'll be a place to kind of focus

00:08:56,770 --> 00:09:02,440
your efforts we also have file system

00:09:00,880 --> 00:09:05,230
notification controls you know that's

00:09:02,440 --> 00:09:07,750
like FA notify and all of its all of its

00:09:05,230 --> 00:09:09,370
friends gonna add those controls and

00:09:07,750 --> 00:09:12,280
SELinux you may have already seen the

00:09:09,370 --> 00:09:13,660
patches on the mailing list SELinux user

00:09:12,280 --> 00:09:15,790
space I kind of mentioned this already

00:09:13,660 --> 00:09:17,950
they're gonna drop Python to support

00:09:15,790 --> 00:09:21,150
because you kind of have to at this

00:09:17,950 --> 00:09:23,650
point it'd be irresponsible not to

00:09:21,150 --> 00:09:25,660
various improvements to the policy tool

00:09:23,650 --> 00:09:28,930
chain more than I can mention in the

00:09:25,660 --> 00:09:31,570
well Marty over time I guess code

00:09:28,930 --> 00:09:34,330
quality improvements and more so anyway

00:09:31,570 --> 00:09:37,180
that's our that's it this is a little

00:09:34,330 --> 00:09:40,030
bit of a a chart and I apologize but the

00:09:37,180 --> 00:09:43,450
slides are in the in the sched tool so

00:09:40,030 --> 00:09:46,420
you can pull this up and I'm guessing if

00:09:43,450 --> 00:09:48,670
you were to type you know github SELinux

00:09:46,420 --> 00:09:50,080
into your favorite search engine I'm

00:09:48,670 --> 00:09:53,290
sure you would find these links pretty

00:09:50,080 --> 00:09:54,970
quickly so anyway with the minute or two

00:09:53,290 --> 00:09:57,330
that I don't have doesn't anybody many

00:09:54,970 --> 00:09:57,330
questions

00:10:08,580 --> 00:10:13,080
I would say almost all of our

00:10:11,459 --> 00:10:14,959
development happens over the mailing

00:10:13,080 --> 00:10:17,160
list or like any good open source

00:10:14,959 --> 00:10:19,080
project that started off with kernel

00:10:17,160 --> 00:10:21,240
development subscribe to the mailing

00:10:19,080 --> 00:10:23,790
list we have an archive up there you can

00:10:21,240 --> 00:10:24,959
search through and if you're interested

00:10:23,790 --> 00:10:27,269
in getting involved I would encourage

00:10:24,959 --> 00:10:28,470
you to start there if you go onto the

00:10:27,269 --> 00:10:29,820
github you'll notice some of the

00:10:28,470 --> 00:10:31,980
projects like the kernel we have a

00:10:29,820 --> 00:10:35,730
number of open issues I believe user

00:10:31,980 --> 00:10:37,200
space does as well but definitely feel

00:10:35,730 --> 00:10:39,690
free to come in and talk to me

00:10:37,200 --> 00:10:41,459
I'm here for the rest of the day there's

00:10:39,690 --> 00:10:44,190
a number of other SELinux people here as

00:10:41,459 --> 00:10:46,079
well we can help you out if it's after

00:10:44,190 --> 00:10:51,690
the fact hit the mailing lists we're

00:10:46,079 --> 00:10:54,500
always happy to have people involved all

00:10:51,690 --> 00:10:54,500

YouTube URL: https://www.youtube.com/watch?v=spepTDfYeBQ


