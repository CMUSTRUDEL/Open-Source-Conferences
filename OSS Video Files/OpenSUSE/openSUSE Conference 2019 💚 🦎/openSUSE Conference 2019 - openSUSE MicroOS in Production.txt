Title: openSUSE Conference 2019 - openSUSE MicroOS in Production
Publication date: 2019-05-24
Playlist: openSUSE Conference 2019 ðŸ’š ðŸ¦Ž
Description: 
	https://media.ccc.de/v/2444-opensuse-microos-in-production

Deploying apps using Podman

This talk will be about deploying comment business applications on openSUSE MicroOS It will have a 15 mins presentation about the challenges that we face at our company La Sentinelle, Mauritius (https://www.lasentinelle.mu) and how we used openSUSE MicroOS to address those. The presentation will follow by a 30 mins technical demo deploying a business application on MicroOSp. Finally, there will be 15 mins to address questions pertaining to the technical demo and any other business.

This talk will be about deploying comment business applications on openSUSE MicroOS It will have a 15 mins presentation about the challenges that we face at our company La Sentinelle, Mauritius (https://www.lasentinelle.mu) and how we used openSUSE MicroOS to address those. The presentation will follow by a 30 mins technical demo deploying a business application on MicroOSp. Finally, there will be 15 mins to address questions pertaining to the technical demo and any other business.

Ish Sookun
Captions: 
	00:00:05,700 --> 00:00:15,879
good afternoon everyone so I suppose I

00:00:10,059 --> 00:00:18,340
can start me just go to the next slide

00:00:15,879 --> 00:00:21,759
and I can start talking about myself for

00:00:18,340 --> 00:00:25,449
just a few seconds so my name is sue con

00:00:21,759 --> 00:00:27,279
I work for a company called internal

00:00:25,449 --> 00:00:29,199
limited which is in Mauritius and I work

00:00:27,279 --> 00:00:32,380
more specifically in the

00:00:29,199 --> 00:00:35,440
LSL digital division and I'm also in

00:00:32,380 --> 00:00:35,950
opensuse member so very briefly what we

00:00:35,440 --> 00:00:39,010
do

00:00:35,950 --> 00:00:42,220
last one Chanel is a media company that

00:00:39,010 --> 00:00:45,100
publishes newspapers magazines manuals

00:00:42,220 --> 00:00:47,470
and school textbooks for not just for

00:00:45,100 --> 00:00:49,090
more issues with Madagascar and a couple

00:00:47,470 --> 00:00:51,880
of other countries in the African

00:00:49,090 --> 00:00:53,950
continent and then my division Alisal

00:00:51,880 --> 00:00:55,690
digital that's mainly what we do we do

00:00:53,950 --> 00:00:58,330
advertising video production software

00:00:55,690 --> 00:01:00,640
development money services for the

00:00:58,330 --> 00:01:03,490
company and we do have a couple few

00:01:00,640 --> 00:01:06,600
external customers and we also do

00:01:03,490 --> 00:01:11,080
training it's not an exhaustive list but

00:01:06,600 --> 00:01:13,390
that's it a little bit so again very

00:01:11,080 --> 00:01:16,720
quickly my journey we've opened Suzie

00:01:13,390 --> 00:01:19,840
started a couple of years ago well give

00:01:16,720 --> 00:01:22,030
a precise somewhere around 2009 with the

00:01:19,840 --> 00:01:26,140
opens with the ambassador's program I've

00:01:22,030 --> 00:01:28,990
been talking every now and then but

00:01:26,140 --> 00:01:31,420
mostly only in Mauritius and this is my

00:01:28,990 --> 00:01:33,640
first time at OSC my first time in

00:01:31,420 --> 00:01:36,130
numbered my first time in Germany and my

00:01:33,640 --> 00:01:38,549
first time in Europe so please be gentle

00:01:36,130 --> 00:01:38,549
be kind

00:01:40,120 --> 00:01:44,990
[Applause]

00:01:41,840 --> 00:01:48,679
all right so what I'm gonna talk about

00:01:44,990 --> 00:01:50,450
is openSUSE micro s and most of the time

00:01:48,679 --> 00:01:53,569
this is the question that pops when I

00:01:50,450 --> 00:01:59,750
tell people that I'm using microwaves in

00:01:53,569 --> 00:02:02,780
production so why micro s the next few

00:01:59,750 --> 00:02:06,469
things so might be a repetition of what

00:02:02,780 --> 00:02:10,099
others have already spoken about as in

00:02:06,469 --> 00:02:12,560
advantages of micro s maybe this line is

00:02:10,099 --> 00:02:14,660
not correct I should have said a micro s

00:02:12,560 --> 00:02:17,510
of The Container horse because micro s

00:02:14,660 --> 00:02:21,049
the way Richard has been presenting in

00:02:17,510 --> 00:02:23,390
the presentation earlier it's not just

00:02:21,049 --> 00:02:27,290
for containers he's aiming for desktops

00:02:23,390 --> 00:02:30,590
so yeah the continuous first of all it's

00:02:27,290 --> 00:02:33,950
designed for containers so what can I do

00:02:30,590 --> 00:02:37,190
with that obviously something like this

00:02:33,950 --> 00:02:38,720
right from the moment of install it

00:02:37,190 --> 00:02:41,030
right from the moment of the

00:02:38,720 --> 00:02:43,819
installation I can already start

00:02:41,030 --> 00:02:46,310
managing continues I can create my

00:02:43,819 --> 00:02:49,489
continues I can deploy my applications

00:02:46,310 --> 00:02:51,560
and that's it I do not have to go around

00:02:49,489 --> 00:02:58,430
it's starting equal of tools to be able

00:02:51,560 --> 00:03:00,799
to start deploying next a slight weight

00:02:58,430 --> 00:03:03,530
it does not come with unneeded packages

00:03:00,799 --> 00:03:06,950
for example if I would take a generic

00:03:03,530 --> 00:03:09,139
Linux distribution for a server and I

00:03:06,950 --> 00:03:11,810
would like to do to run containers on

00:03:09,139 --> 00:03:13,400
those yes I would install a container

00:03:11,810 --> 00:03:15,500
engine and do that but at the same time

00:03:13,400 --> 00:03:19,069
I would get tons of packages which I

00:03:15,500 --> 00:03:23,109
don't need and it will be pain to remove

00:03:19,069 --> 00:03:26,120
those packages so yeah and next

00:03:23,109 --> 00:03:28,519
transactional updates which Richard and

00:03:26,120 --> 00:03:30,859
others have I suppose have already

00:03:28,519 --> 00:03:32,780
spoken about if something is messed up

00:03:30,859 --> 00:03:37,700
with an update you just roll back so I

00:03:32,780 --> 00:03:39,530
really like that the last one is based

00:03:37,700 --> 00:03:44,060
on tumbleweeds so you're always on

00:03:39,530 --> 00:03:46,340
cutting-edge so how to obtain microwaves

00:03:44,060 --> 00:03:48,650
until a few weeks ago this was how you

00:03:46,340 --> 00:03:51,590
would get it you would go on cubicle

00:03:48,650 --> 00:03:53,090
openSUSE dog and you would download the

00:03:51,590 --> 00:03:54,829
installation media and during

00:03:53,090 --> 00:03:55,370
installation you're gonna select the

00:03:54,829 --> 00:03:59,510
opens whoo

00:03:55,370 --> 00:04:02,480
micro s system roll but like I said that

00:03:59,510 --> 00:04:06,349
was until a few weeks ago now it's no

00:04:02,480 --> 00:04:08,000
more so now we do not have a fancy page

00:04:06,349 --> 00:04:11,810
right now while you could just go and

00:04:08,000 --> 00:04:13,819
download the installation media but at

00:04:11,810 --> 00:04:15,709
least for me this is what I do I go to

00:04:13,819 --> 00:04:19,040
mirrors that opens with the dog find the

00:04:15,709 --> 00:04:20,389
closest mirror because I leave in the

00:04:19,040 --> 00:04:23,540
middle of the Indian Ocean

00:04:20,389 --> 00:04:26,090
Mauritius everything is far away from us

00:04:23,540 --> 00:04:29,320
Europe is for us is for Australia's for

00:04:26,090 --> 00:04:33,229
and the closest that I get could be

00:04:29,320 --> 00:04:36,680
South Africa with 75 milliseconds of you

00:04:33,229 --> 00:04:38,660
know downloading things so yes I will

00:04:36,680 --> 00:04:43,370
find it and I will go on to the

00:04:38,660 --> 00:04:46,690
tumbleweed so you are there and I will

00:04:43,370 --> 00:04:50,030
find the openSUSE microSD either image

00:04:46,690 --> 00:04:52,490
all right we have our image which puts

00:04:50,030 --> 00:04:55,160
it on pen drive or maybe we're gonna try

00:04:52,490 --> 00:04:58,190
it on a VM and this is what is going to

00:04:55,160 --> 00:05:00,200
happen you get this until this step of

00:04:58,190 --> 00:05:01,669
the installation where you need to

00:05:00,200 --> 00:05:04,940
select a system role and you're gonna

00:05:01,669 --> 00:05:07,190
select micro s continue host because if

00:05:04,940 --> 00:05:10,520
you select the first one it's not for

00:05:07,190 --> 00:05:12,229
containers it's like you just have the

00:05:10,520 --> 00:05:13,610
microwave and you do whatever you want

00:05:12,229 --> 00:05:20,210
with that with a very stripped-down

00:05:13,610 --> 00:05:22,310
version of openSUSE tumbleweed so the

00:05:20,210 --> 00:05:26,570
next thing this is not about microwaves

00:05:22,310 --> 00:05:28,250
but I have the micro OS container who's

00:05:26,570 --> 00:05:30,229
running now I need to create my

00:05:28,250 --> 00:05:30,889
containers so this is what I'm using on

00:05:30,229 --> 00:05:38,690
my machine

00:05:30,889 --> 00:05:39,760
and build up so sorry I think I messed

00:05:38,690 --> 00:05:43,580
up yeah

00:05:39,760 --> 00:05:46,580
so with builder the first thing that I'm

00:05:43,580 --> 00:05:49,699
gonna do is run this thing which is just

00:05:46,580 --> 00:05:52,970
free voids build up from openSUSE and by

00:05:49,699 --> 00:05:56,289
doing this I get a working container

00:05:52,970 --> 00:06:00,010
into which I can package my application

00:05:56,289 --> 00:06:03,159
let's say it's dots that could be just a

00:06:00,010 --> 00:06:07,189
binary from a go application that my

00:06:03,159 --> 00:06:09,379
developers just wrote and the next step

00:06:07,189 --> 00:06:11,809
would be like this I do builder images

00:06:09,379 --> 00:06:16,089
and I could see that openSUSE working

00:06:11,809 --> 00:06:19,249
containers running and next like I said

00:06:16,089 --> 00:06:22,639
in this slide you can I would just give

00:06:19,249 --> 00:06:25,959
you a quick explanation of that LSL -

00:06:22,639 --> 00:06:28,969
app is actually a folder that contains

00:06:25,959 --> 00:06:31,550
my application files a binary a couple

00:06:28,969 --> 00:06:34,429
of images most probably a configuration

00:06:31,550 --> 00:06:36,559
file something like it dot env with

00:06:34,429 --> 00:06:39,439
environment variables for my program and

00:06:36,559 --> 00:06:42,349
all I would do is copy all these into

00:06:39,439 --> 00:06:45,229
dust working container alright the next

00:06:42,349 --> 00:06:46,879
thing that I need is an entry point so

00:06:45,229 --> 00:06:49,249
like you would know that when you have a

00:06:46,879 --> 00:06:52,399
container when you spin the container

00:06:49,249 --> 00:06:53,929
and make it run using any container

00:06:52,399 --> 00:06:57,769
engine the first thing that is going to

00:06:53,929 --> 00:07:00,199
run is what has been is specified at the

00:06:57,769 --> 00:07:02,539
entry point otherwise you could still

00:07:00,199 --> 00:07:05,059
run your container and specify what

00:07:02,539 --> 00:07:07,489
you're gonna run in this case I'm

00:07:05,059 --> 00:07:10,099
specifying that in the folder called up

00:07:07,489 --> 00:07:12,379
there's a script code entry point and

00:07:10,099 --> 00:07:14,869
within that script I'm gonna obviously

00:07:12,379 --> 00:07:17,569
say okay you know there's this binary

00:07:14,869 --> 00:07:19,339
here you can run it but before running

00:07:17,569 --> 00:07:22,479
this there's a couple of few things that

00:07:19,339 --> 00:07:26,509
you need to do in this container so

00:07:22,479 --> 00:07:31,610
alright that's it for creating my

00:07:26,509 --> 00:07:34,009
container with a it's an application

00:07:31,610 --> 00:07:36,259
that my developers have to block now

00:07:34,009 --> 00:07:38,119
after doing those first two steps did

00:07:36,259 --> 00:07:40,759
one last thing that I need to do I need

00:07:38,119 --> 00:07:42,709
to commit this and as you can see it's

00:07:40,759 --> 00:07:44,599
very simple build a commit obviously

00:07:42,709 --> 00:07:49,369
working container and I'm gonna give it

00:07:44,599 --> 00:07:52,369
a name and a tag so this application has

00:07:49,369 --> 00:07:55,249
been developed by lysogeny by my

00:07:52,369 --> 00:07:58,639
developer colleagues as a micro service

00:07:55,249 --> 00:08:00,319
for single sign-on service that is we

00:07:58,639 --> 00:08:01,899
have different tools and this one is

00:08:00,319 --> 00:08:04,759
going to be the single sign-on where

00:08:01,899 --> 00:08:06,229
employees just come in sign in and they

00:08:04,759 --> 00:08:08,509
can make requests for transport make

00:08:06,229 --> 00:08:11,719
requests uhm it requests for maybe the

00:08:08,509 --> 00:08:14,569
canteen something like that and we call

00:08:11,719 --> 00:08:15,810
it Passport so that is why in the name

00:08:14,569 --> 00:08:19,530
there

00:08:15,810 --> 00:08:21,570
all right now actually what I was

00:08:19,530 --> 00:08:24,690
showing you earlier I think I messed up

00:08:21,570 --> 00:08:26,520
with these lights the first tool I was

00:08:24,690 --> 00:08:30,120
talking about with builder and the

00:08:26,520 --> 00:08:33,870
second tool which is present into the

00:08:30,120 --> 00:08:36,260
micro s container hose is bad man but

00:08:33,870 --> 00:08:39,930
again last minute slides you know it

00:08:36,260 --> 00:08:42,539
happens to be mastered so after I've

00:08:39,930 --> 00:08:45,600
used build out you to create a container

00:08:42,539 --> 00:08:47,790
and put the application that I do put

00:08:45,600 --> 00:08:50,640
moneymakers just like you would use

00:08:47,790 --> 00:08:53,339
another container engine and so maybe

00:08:50,640 --> 00:08:57,270
you do docker images you usually find

00:08:53,339 --> 00:08:58,710
your images but on images the same you

00:08:57,270 --> 00:09:00,750
will see that the repository and this

00:08:58,710 --> 00:09:03,030
and this one is local who is possible

00:09:00,750 --> 00:09:04,800
because I'm still creating that in my

00:09:03,030 --> 00:09:08,190
machine I haven't published it on a

00:09:04,800 --> 00:09:11,460
repository somewhere it's just for tests

00:09:08,190 --> 00:09:14,610
so now that I have my image my image

00:09:11,460 --> 00:09:17,820
available here my next step is you just

00:09:14,610 --> 00:09:22,260
run it and test it so very simple these

00:09:17,820 --> 00:09:24,180
are the same options flags the way you

00:09:22,260 --> 00:09:27,030
want to call it that you might have been

00:09:24,180 --> 00:09:29,040
using with docker like docker own blah

00:09:27,030 --> 00:09:31,320
blah blah blah blah and it happens so

00:09:29,040 --> 00:09:34,050
the same advice to pod man so I have pod

00:09:31,320 --> 00:09:37,140
man run I'm running that in the - mode

00:09:34,050 --> 00:09:41,400
I'm exposing the the poet my application

00:09:37,140 --> 00:09:44,670
in the continuance and over port 1704

00:09:41,400 --> 00:09:47,160
mapping that with 88 on my host machine

00:09:44,670 --> 00:09:49,560
I'm giving the container a name called

00:09:47,160 --> 00:09:53,370
passport and obviously the last part of

00:09:49,560 --> 00:09:56,520
that is telling which container to run

00:09:53,370 --> 00:09:58,950
and I'm putting the tag version 1 notice

00:09:56,520 --> 00:10:01,050
that I haven't specified a command after

00:09:58,950 --> 00:10:03,630
that because I already have an entry

00:10:01,050 --> 00:10:06,300
point which was the entry point of a

00:10:03,630 --> 00:10:08,640
search script in which I'm telling the

00:10:06,300 --> 00:10:12,720
container when you're spinning you just

00:10:08,640 --> 00:10:16,160
have to run the binary so that's it

00:10:12,720 --> 00:10:18,900
oh yeah that's the second way to do it

00:10:16,160 --> 00:10:21,650
in the previous slide I said ok I'm just

00:10:18,900 --> 00:10:24,180
mapping the port all you could specify a

00:10:21,650 --> 00:10:26,910
how do you call that a fixed IP address

00:10:24,180 --> 00:10:29,899
if you just testing that so it's - - IP

00:10:26,910 --> 00:10:35,070
and you specify it and it's gonna work

00:10:29,899 --> 00:10:39,839
almost the same all right I put man PS

00:10:35,070 --> 00:10:42,240
this time and my container passport with

00:10:39,839 --> 00:10:44,279
the Czech v1 is running and in the

00:10:42,240 --> 00:10:47,190
command you might see that it's been a

00:10:44,279 --> 00:10:49,550
surge slash up /e for the entry point

00:10:47,190 --> 00:10:52,500
and goes on there

00:10:49,550 --> 00:10:53,850
actually this particular application

00:10:52,500 --> 00:10:56,250
also needs

00:10:53,850 --> 00:10:58,200
Postgres and Redis and that's something

00:10:56,250 --> 00:11:02,399
that I had already run on the machine

00:10:58,200 --> 00:11:05,610
and to finish I just have to put the

00:11:02,399 --> 00:11:15,750
localhost 8080 there and it's working so

00:11:05,610 --> 00:11:22,800
I don't know about okay I will try to do

00:11:15,750 --> 00:11:27,450
this it's a bit not something that I had

00:11:22,800 --> 00:11:29,670
planned it's not working but anyway

00:11:27,450 --> 00:11:33,750
let's do it like this I have to look at

00:11:29,670 --> 00:11:37,860
two screens at the same time but one yes

00:11:33,750 --> 00:11:40,200
like I said so this one is where I've

00:11:37,860 --> 00:11:42,180
mapped the port as you can see in the

00:11:40,200 --> 00:11:46,250
lost last row there

00:11:42,180 --> 00:11:53,530
it's mapping my host systems 8080 over

00:11:46,250 --> 00:11:55,070
container 7204 so at this time I have to

00:11:53,530 --> 00:12:00,870
[Music]

00:11:55,070 --> 00:12:03,290
all right I have to do it like this okay

00:12:00,870 --> 00:12:03,290
my

00:12:03,999 --> 00:12:06,999
nevermind

00:12:13,779 --> 00:12:30,139
nevermind let's go until the last slide

00:12:25,220 --> 00:12:34,279
maybe alright yeah this one and here it

00:12:30,139 --> 00:12:39,079
is so anyone has a question about this

00:12:34,279 --> 00:12:42,170
of why we are doing it and anything

00:12:39,079 --> 00:12:43,089
specific to put man builder or micro s

00:12:42,170 --> 00:12:46,699
in general

00:12:43,089 --> 00:12:49,879
sorry I was trying to do to just run the

00:12:46,699 --> 00:12:52,399
same thing again in the terminal but the

00:12:49,879 --> 00:12:59,499
mirroring of the laptops is not working

00:12:52,399 --> 00:12:59,499
so anyone go Matt's questions possibly

00:12:59,649 --> 00:13:05,709
no one that's cool awesome

00:13:02,449 --> 00:13:05,709
all right you have something okay

00:13:15,210 --> 00:13:21,060
oh thank you for the presentation is

00:13:18,780 --> 00:13:23,910
there a way for you to run multiple

00:13:21,060 --> 00:13:27,900
container at the same time with pot man

00:13:23,910 --> 00:13:30,630
or in micro s I mean you've shown that

00:13:27,900 --> 00:13:33,120
you're using Postgres and radius as well

00:13:30,630 --> 00:13:35,520
if you want to deploy all them at the

00:13:33,120 --> 00:13:39,510
same time in the core detail coordinate

00:13:35,520 --> 00:13:40,530
fashion I don't think I got your

00:13:39,510 --> 00:13:43,400
question clear

00:13:40,530 --> 00:13:46,800
oh yeah is there for you a way to

00:13:43,400 --> 00:13:50,370
reproduce the behavior of docker compose

00:13:46,800 --> 00:13:56,510
for example docker compose for example

00:13:50,370 --> 00:14:24,840
so not exactly that way but everything

00:13:56,510 --> 00:14:27,960
okay I think so I was in command Eddie's

00:14:24,840 --> 00:14:30,870
man you put them in another different

00:14:27,960 --> 00:14:35,840
kind of yellow for pod pod man supports

00:14:30,870 --> 00:14:35,840
not to use yeah

00:14:41,210 --> 00:14:45,890
you don't have to keep entities so you

00:14:43,640 --> 00:14:48,170
can yeah you can use hot man

00:14:45,890 --> 00:14:49,070
with powders without Cuba nothing and

00:14:48,170 --> 00:14:51,500
then if you grow with the equipment

00:14:49,070 --> 00:14:58,220
isn't it it's even more efficient than

00:14:51,500 --> 00:14:59,840
using yes he reach other already

00:14:58,220 --> 00:15:02,840
explained that you could still use pod

00:14:59,840 --> 00:15:04,550
man to create your pods and when you're

00:15:02,840 --> 00:15:07,640
running each of those containers you

00:15:04,550 --> 00:15:11,930
could just put just like in the previous

00:15:07,640 --> 00:15:14,270
slides I've put where is it I think it

00:15:11,930 --> 00:15:17,210
was in this one - - IP address to

00:15:14,270 --> 00:15:20,180
specify the ID IP I would just have to

00:15:17,210 --> 00:15:21,950
put - - a pod to put the pod name that I

00:15:20,180 --> 00:15:23,750
created and all those containers that

00:15:21,950 --> 00:15:27,100
I'm spinning will go in a specific part

00:15:23,750 --> 00:15:29,810
and that's very simple if those are

00:15:27,100 --> 00:15:34,670
different then in this case in this

00:15:29,810 --> 00:15:36,910
particular case exactly the application

00:15:34,670 --> 00:15:39,680
the grooc application on the first line

00:15:36,910 --> 00:15:44,150
the readies and Postgres

00:15:39,680 --> 00:15:46,220
would all communicate over once 27001

00:15:44,150 --> 00:15:48,740
because they are on the same pod so

00:15:46,220 --> 00:15:50,390
sharing the same network namespace and

00:15:48,740 --> 00:15:52,400
then of course you can have a second

00:15:50,390 --> 00:15:55,210
part we have tons of applications and

00:15:52,400 --> 00:15:57,380
all those will be communicating over

00:15:55,210 --> 00:15:58,970
that loopback interface and not

00:15:57,380 --> 00:16:02,530
communicating there won't be the

00:15:58,970 --> 00:16:03,800
communication between the two pots yeah

00:16:02,530 --> 00:16:09,110
somebody else

00:16:03,800 --> 00:16:11,870
comment question maybe all right cool

00:16:09,110 --> 00:16:14,320
that was a short and sweet presentation

00:16:11,870 --> 00:16:17,340
thank you people

00:16:14,320 --> 00:16:19,400
[Applause]

00:16:17,340 --> 00:16:19,400

YouTube URL: https://www.youtube.com/watch?v=8gGjcKdOWIc


