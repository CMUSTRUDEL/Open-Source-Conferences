Title: LinuxTag2012: How to Test Enterprise Java Applications
Publication date: 2012-05-23
Playlist: LinuxTag 2012
Description: 
	Alex Soto Bueno (Diagnostic Grifols)
Captions: 
	                              the wall is changing so fast and so does                               technology if we look back                                            we will see that jab Enterprise editions                               have suffered many changes for example                                                                                             developed using HTML and we try to avoid                               using javascript we send to the browser                               only HTML code or server side was                               implemented my java using the typo call                                pattern servlet + GSP maybe using a GPS                                and the persistent liar was implemented                                using the rational database management                                system but now this is changing html                                    reality new CSS specification and new                                JavaScript PP also with the glow                                popularity of gquery almost all client                                site is being implemented using                                javascript also we are using rest                                architecture so we send this on to the                                browser also Ajax sending XML                                server-side also have changed with Java                                Enterprise Edition                                                    are implemented within the container                                like GTA or GPA but also personally I                                have changed no squirrel solutions are                                gaining terrain to the typical SQL                                systems management so the Doublemint                                site is changing but testing frameworks                                are changing too how my name is Alec                                Soto I'm a computer engineer i work in                                an international pharmaceutical company                                developing and bachelor devices also i                                describe myself an active blogger and a                                speaker today i'm going to talk about                                how to write tests concurrently how to                                write unit tests which is the eighty                                percent of your test code also intuition                                test i'm finally accepting                                test so let's start unit test is a                                method by which the smallest stable part                                of an application is validated and you                                need test gives you more advantages some                                of them are confidence to change give                                you quick feedback about the correctness                                of the software you have the blood you                                can write your production code and then                                you can run this and see that it runs as                                you expected without waiting to stay to                                detect an issue and pollution code and                                also you need test access documentation                                I really hate writing documentation in                                Java doc basically because they can                                mislead you but the code will always try                                will always send you the true so to                                write unit tests effectively you must                                follow the first row this is your test                                must run fast if they are fast you will                                run more often so you will receive the                                feedback more often and your test will                                be fast if you resist the temptation to                                access database network or file system                                the other one is I solution your test                                must be isolated from from themselves                                because and one test method cannot                                modify the result of another does method                                but also the test I'm sorry the source                                code under test must be related you                                cannot have cause to external components                                like other classes or other subsystems                                like databases your tests must be                                repeatable education should return the                                same result if not you are you don't                                know who are telling you the truth also                                your tests must be self pollinating as                                we said test access the documentation so                                everyone with a quick overview to                                test must know exactly what is the                                reason what is the purpose of this test                                and last timely you must write first the                                test and then your production code                                because if you run if you write first                                the test the production code will be                                designed to be stable so we have seen                                that we've got three different layers                                with different approaches client-side                                service items inside so we need                                different frameworks to write unitus the                                first one the client side in fact we can                                say that we are going to see how to test                                javascript in to test your script there                                are many frameworks like unit or just                                mine orgy as you need but one that I                                really feel comfortable is GS test                                driver because GS test driver aims us to                                write service JavaScript test code like                                we are already done with g-unit so to                                write a test with GS test driver it's as                                easy as write your test code optional                                files that are features a feature is a                                 HTML code that is embedded into the test                                 and can be used during the test                                 execution this is really he'll this is                                 really helpful when you are writing                                 JavaScript code that modifies the Dhamma                                 structure finally a configuration file                                 this is like a class but in Java where                                 you indicate to the GSI driver where are                                 the test code and where are the                                 production code so we've got JavaScript                                 digital script must be run into a                                 browser browser understands about HTML                                 so it seems that we will need to write                                 HTML files but yes test drive does not                                 no Raquel this because and comes with a                                 server you start the server this server                                 will create HTML file for you and then                                 you choose which browser you want to                                 test                                 to run the test and then you connect to                                 the others provided for the Justice                                 driver server also see that we have seen                                 that your test must be insulated can be                                 some parts of your JavaScript code that                                 executes sorry not execute requires a                                 server response but you cannot talk to                                 an external system so sign on is a                                 mocking library for JavaScript that can                                 help you to create fake server response                                 for example to create a fake jisan                                 response is as easy as create calling                                 the step method in this case we are                                 stopping the agita method of jQuery and                                 simple return this JSON structure see                                 how it works in this project you've got                                 a jeep ID plugin that's simple it gets                                 data from a server and then print it                                 into the HTML structure if you look the                                 test that you could this here in this in                                 this line we are setting the picture                                 because he query plug-in requires an                                 HTML structure to month to be modified                                 this is the fake HTML here is sign on                                 stopping the response in this case we                                 are returning a book silmarillion and                                 then we call the jeep we applied with                                 this element is the same define it as                                 feature and then we are certain that the                                 response is equals of this part of and                                 in this case because yesterday I also                                 have a really nice integration with                                 maven and eclipse I've created upon                                 which will run automatically the GS                                 test-drive server and also will open the                                 browser in this case I've concluded to                                 run chrome so I'm going to run                                 a cure is opening the server                                 and yes Hobbit have colored the the                                 coming are educated the JavaScript code                                 and then if you look here the tests have                                 pass it without any problem so                                 okay we have seen how to test the                                 JavaScript code if you are not using any                                 if you're only using jabbing your server                                 side you are not using a polyglot                                 approach I'm sure that most of us will                                 agree that g unit is the de facto test                                 framework I think that does not require                                 many presentation butter I would like to                                 talk about two libraries the first one                                 is impressed with always said that our                                 unit test must act as a documentation                                 and a good point to start is naming the                                 test correctly without creating names                                 that implies the the implementation                                 details but only the behavior we are                                 testing but also is important to test I                                 saw it too and described correctly the                                 assertion and hampers is a library of                                 matters for building ham crease in I                                 hampers amateurs in a in a more natural                                 language see for example using the                                 typical ascetical ops unit here we see                                 that we are testing that s r equals true                                 range contains officer Ryan it's a                                 strange to to see to not to see but to                                 read this sentence but with impress the                                 same assertion is as easy as a sir that                                 officer rank is one of captain and                                 Commander also we can read more easily                                 answer that H is ten or book oh whoa                                 well we've got a problem well you must                                 trust me that here is saying as after                                 that oh yes                                 mm okay let's                                 what i will paste here now it's a                                 regresar thank you this is the BET                                 example as I equals true range contains                                 officer rank and the good one is here                                 well so you can compare what answer that                                 officer rank is one of capital and                                 commander it's more related lists this                                 sentence than the first one I remove                                 this                                 it's not really well sorry but the                                 Anchoress will help you to make it                                 readable your test and the other library                                 that I want to present you is mojito um                                 code under test must be isolated doesn't                                 have to make calls to external                                 components but code code signature is to                                 have external component so mojito helps                                 you to create mock objects mock objects                                 are similarly objects that mimic the                                 behavior of the real objects whatever                                 you like about mojito is that mojito is                                 thought in terms of the specifics you                                 read the sentence onion                                              what you are mocking and this is not                                 right I suppose                                 trying to wait                                 see that in this case we are telling                                 that officer doubt that is a typical                                 doll pattern that access to data base                                 when we call final feature by eight with                                 a                                                                      an instance that is created on the test                                 so we are not accessing the database                                 so mockito help us to not connect to                                 external components and finally to close                                 the unit testing part is the persistent                                 site its strings to think about Java                                 Enterprise Edition application without                                 persistent liar but we said that if                                 you're Joe cannot access file system or                                 network so how we can write gene test                                 that implies a database connection this                                 was the pan of if you are using an SQL                                 approach on Noah scholar approach let us                                 start with SQL approach or the typical                                 rational Ataris management system you                                 must in your unit as you must avoid                                 hitting the database because it's an                                 slowly operation but if you are using an                                 in-memory database this operation will                                 be fast and in Java there are many                                 memorable at a basis for example Derby I                                 Pasquale or h                                                          database and your tests were run fast                                 the other problem is the isolation now                                 said that previous education of the test                                 cannot modify the result of the of the                                 another test so if one test inserts one                                 registry to the data race next test                                 execution will see that change toward                                 this problem exists the unit exists the                                 beginning is a g-unit extension which is                                 the responsible of maintaining the state                                 of the database before execution so you                                 simple define a data set that is the non                                 state and then this seems to be more                                 readable maybe and then you simple call                                 cleaning some method and with the finite                                 database so before execs                                 shin and DV unit will clean your                                 database and insert and the known state                                 of of the of data so your test method                                 will run correctly the problem is with                                 no squirrel because it's a terrorist in                                 the terrorists system and we've got a                                 document approach called no protocol of                                 approach and there is no general                                 solution for this kind of systems for                                 example I've analyzed MongoDB manga we                                 have no in memory mode in fact exists                                 nice ville that someday will implement                                 MongoDB in memory mode and also there is                                 no isolation framework like D be unique                                 for new for Java is quite better we've                                 got an embedded mode so we can write                                 tests but also is is not a full support                                 like de unit with rational Tetris                                 management systems but it's not all lost                                 because I'm reading no SQL unit this is                                 a framework g-unit extension that works                                 more or less like DB unit mad for no                                 squirrel systems for now i'm only a                                 supporting MongoDB but in next month i                                 will implement new                                                       let's see how it worked                                 simple is a we are going to test book                                 manager that returns an object from                                 MongoDB see that what hath said that the                                 test is not called boom manager test                                 it's called when you final book your                                 exactly knows what are you testing what                                 is the behavior you're testing sorry and                                 then I'm here you are configuring the                                  DB connection using monkey DVD                                 rule this is the part of no SQL unit                                 then you define and a strategy and this                                 case what in                                 well in this case you are you're                                 pointing to the server that you want to                                 clean mongodb wait not now here you are                                 telling to the NoSQL unit that must                                 clean the database and then insert the                                 data define it in initial data ji-sun                                 this data is a JSON document that is a                                 simple book and then when i call final                                 this book will be returnin see that here                                 we were using hamcrest the rating that                                 assert that the books has the expected                                 book so if we run that test                                 it went okay because no SQL unit delete                                 mongodb and create the data that we want                                 to be returned                                 okay we have finished to writing unit                                 tests now it's time for intuition test                                 integration tests are the counterpart of                                 unit tests in with intelligent test you                                 are validating the collaboration between                                 components so in this test you can                                 access database you can access to the                                 file system or network and also you can                                 compute during buurman with special                                 requirements this is not a problem but                                 the problem arises when you want to test                                 all right integration tests of                                 enterprise job applications because with                                 Java EE                                                            functionalities are being implemented                                 within the container so for example we                                 can cite a TV i Agee Agee bees are                                 configured with annotations GPA is                                 computed inside the container so to                                 write this intuition test we need a                                 container and this plane a new kind of                                 Roland human ash the container lifecycle                                 someone must start and stop the server                                 and who create the deployment file                                 because at least your container requires                                 a diploma file and please do not mock we                                 are writing intuition test an                                 integration test you must not mock any                                 component hopefully devos folks have                                 clicked or clean our kaleyam brings the                                 test to the fronton basically are clean                                 manoj the lifecycle container you don't                                 know how but it starts and stops server                                 also gives you the dream wrap IP to                                 create your deployed file exactly you                                 can create a deploy file or a micro                                 deploying file because if you are                                 testing free classes you don't have to                                 package all your application and send to                                 the server you can package three classes                                 and send it to the server and they will                                 execute can you reach your test classes                                 lately and our Killian and gives to a                                 test to be executed inside the container                                 if you are using any container future                                 for example injection annotation or                                 against a container and as a client I'm                                 finally it's IDF friendly so we need no                                 more mugs to write integration tests                                 with our Killian is as easy as choose a                                 container to execute your test glassfish                                 Tom cut or divorce arquillian start the                                 server make the package and send to the                                 server execute the test collects all the                                 results and sand and finally sent to the                                 for example to Jenkins or to your IDE                                 and stops the server let's see here is a                                 rest application a simple recipe                                 occasion that simple is returned all the                                 box inserted when you access the butcher                                 source and trust me that I have no                                 divorce started and if you see here the                                 test you are simply annotating test to                                 be use arquillian runner in this case                                 because we are testing a rest connection                                 we want that all test runs as a client                                 not within the container here is where                                 we are creating our deployment file                                 simple we are creating we are inserting                                 all the classes that are booked package                                 and the jack serious application that is                                 the configuration of rest application                                 then see the name server sure at all our                                 boobs in jisan format that's not good                                 because its retina teen XML but well                                 it's misleading me so here we are                                 connecting to the server and we return                                 all the books and we are asserting that                                 all books is just this                                 that result so we are going to run                                 the tires are being executed this also                                 could be done directly from eclipse but                                 here is the starting the cheapest server                                 it runs the test and final collects the                                 result he does the build success see how                                 here the jivas is started arquillian                                 deploy the test world execute the test                                 I'm finally under ploy test so and you                                 don't have to start and stop Manali the                                 server and then your test run perfectly                                 your intuition tension partially into                                 the container                                 on the phone apart exceptin test                                 acceptance tests are high-level test                                 that validate that business logic and                                 user interface meets your requirements                                 specified by the stakeholders to write                                 correctly except on test the first thing                                 to write is user stories history is a                                 one or two sentence expressing in                                 everyday language from the point of view                                 of end user that gives an business value                                 to the to the product normally the user                                 story sentences have looked like as I                                 one so it's as an administrator I want                                 to add new books to a collection so                                 users can borrow them and this is a user                                 story but then you should write                                 acceptance criteria accepted cute area                                 is a set of conditions that must be meet                                 to consider a user story complete                                 complete for example the previous                                 history can have this acceptance                                 criteria that the administrator can a                                 new books and mrs. you can categories                                 books or users can borrow books added by                                 administrator and this is a only three                                 but it will be more and more and more                                 sentences of this kind but also                                 stakeholder must provide concrete                                 examples these concrete examples must be                                 in the step-by-step form only with sorry                                 with exact data without technical                                 language or without impersonal phrases                                 for some real Lord of the Rings book a                                 scene tokina south or that this is step                                 by step that is curry understood where                                 by anyone and test writer will use it to                                 write the test so in interpretive                                 applications we have a problem is that                                 we need user interface access                                 and in this and typically Enterprise                                 your application juices web so we need a                                 framework that can access web elements                                 also can open different kind of                                 processors and also can categorize the                                 user stories you have seen that we've                                 got user stories accepting criterias                                 examples and all this information must                                 be Manoj in in a better way than only as                                 a document unless to list to see do this                                 to see this is a tool that makes us                                 writing acceptance and revision test                                 easier to see this is a ceiling to                                 extension to use web driver ap to access                                 web Parliament also helps you to                                 organize thousand stories recurrent                                 reports the test execution we see that                                 creates a really beautiful reports and                                 also and it so important measure the                                 functional cover so your stakeholders                                 will know every time how is advancing                                 the project so to write except on tests                                 with to see this simple choose a story                                 implement which object adopted is a                                 pattern with models web elements user of                                 the user interface as object so you can                                 access them problem only implement at                                 the slide test step library and finally                                 you create the test following the                                 acceptance criteria so if this test                                 passes you can see that user story is                                 complete let's see an example                                 it's a typical book example that we have                                 seen before in this case we've got an                                 HTML file it's an input form with title                                 the number of pages and a button that is                                 the will be click when you want to                                 insert this book and when you insert a                                 message telling if the book has been                                 inserted coral unit is provided to the                                 user so let's see how to test in this                                 application the first thing to do is                                 write a page object see that PG page                                 objects simple models the HTML file as                                 an object which here we can see that we                                 are killing a capella mean for the title                                 input form another for the number of                                 pages and another for the button and                                 another for the message that will be                                 prior to the user and gives some                                 operations for example enter title and                                 number of pages when we call this method                                 we are similarly in that user are typing                                 into this Phil insert book we are                                 simulating that user are clicking this                                 book and finally getting the text that                                 we are simulating that the user are                                 reading this message next thing to do is                                 just creating a step library for example                                 if you want to insert a new book you                                 must call on insert book page insert                                 book this is a method that is here sorry                                 that I can see that                                 here and then the enters its called so a                                 stability is a list of steps that user                                 will will execute in a normal way and                                 finally the test that must run to see                                 this runner but also here we are using                                 arquillian so I have no problems for                                 starting and stopping the server this is                                 the default page we are testing this                                 HTML and the test what we are doing in                                 the test is opening the insert book page                                 insert this book here we are using the                                 step library that at the same time are                                 using page object and then we are                                 asserting that this message is shown to                                 the user so                                 this is the same Arcadium will open the                                 server in this case we are testing                                 application in firefox browser and was                                 you will see how the firefox is open it                                 and how someone mystically are writing                                 on the on the forum see the name of the                                 method also its to it                                 the build success and then you can watch                                 the the report                                 to test one is spending the other it has                                 password you can access oh sorry one is                                 the an overview then here is the test                                 all the data step by step in is in                                 certain book pages is that the page is                                 open at you enter all the information                                 and insert the book and you should                                 obtain this message and here is a                                 screenshot on why you haven't recorded                                 so the quality department can see that                                 are executed as requirements are saying                                 okay we are today we talked about you                                 need test insertion test an extended                                 test but exist different kinds of tests                                 like performance test duration test                                 smoke test and who runs of this kind of                                 test developers must only run unit tests                                 so intrusion test acceptance tests will                                 be run by your continuous integration                                 system the most used open-source                                 continuous integration system is Jenkins                                 a core concept of Jenkins is built jobs                                 bill jobs are tasked that are executed                                 during the application built and in both                                 task like compiling running unit testing                                 running darshan test or even deploying                                 your application to a server typically                                 your applications will contain more than                                 one bill job chain it together so if the                                 application compels then we'll run the                                 unit test and if the wrong tense pass                                 can run into some tests and and so on so                                 to manage all this chain of Bill jobs                                 bill Pamela plugin exists this point                                 simple helps you to create a chain of                                 Bill jobs and visualize the state of the                                 of the of the education of your                                 application so for example here you can                                 see that we are creating a budget that                                 runs fast as another ones that exceptin                                 test and so on and the district and                                 Jenkins will run first of us test if                                 passes then deck certain tests and until                                 they're built over the shop on the                                 project as a las note so work culture                                 treat test as a residual code and if                                 there is no time do not know right test                                 and this leads you that when you find an                                 issue at pollution stage you will waste                                 a lot of                                 time to fix it so please try to a right                                 test and not to treat them as a song as                                 something external to the application                                 house of you are applying to use                                 continuous delivery the only way to                                 assure that your application is running                                 correctly is with test I would like to                                 set thank you to the Lunik stack false                                 to let me stay here today also my wife                                 that I here and of course you that will                                 use all this material any question hello                                 my name is Amir I'd like to ask if you                                 can put the selenium and what is the                                 condition to do that yes in fact to see                                 this is a selenium plugin so I always                                 used to see this I I have never used                                 selenium in the as a as a alone I was                                 I've used to see this and of course yes                                 if you run them in Jenkins you need to                                 install firefox or chrome and also and                                 with to see this you have an annotation                                 of your testing they are you can specify                                 which were so you want to execute the                                 test already you can also configure it                                 as a system environment or in in your                                 palm just many possibilities to                                 configure it                                 well um this is my blog and my twitter                                 if you have any questions you can send                                 me an email I will try to help you as                                 much as I can also have personal cars if                                 anyone wants one I can give him one                                 thank you
YouTube URL: https://www.youtube.com/watch?v=Xxpk2YGa6Do


