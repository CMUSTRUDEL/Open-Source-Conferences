Title: APT-PBO (Paulo Trezentos)
Publication date: 2011-02-07
Playlist: FOSDEM 2011
Description: 
	a Linux meta-installer with enhanced dependency-solvingAs a Linux distribution we face a huge number of reports of users unable to install packages due to APT limited solving capabilityIn the scope of a EU research project (MANCOOSI) we had enhanced the solving capabilities of APT using pseudo-Boolean optimization. In this talk we propose to share the results and discuss with the community how this work can help other distributions.
Captions: 
	                              hi everybody my name is all finished                               good afternoon and i will present apt                               vimeo and i am from cash america                               approach is williamson solutions and                               colleagues ray and other people that can                               represent the Duvall's some of the                               projects which we are involved and apt                               ppl and is a proof of concept in                               asthmatics taller and twist all packages                                in a linux distribution and it was the                                walk in scope of my PhD and inclusive                                projects and i will start by introducing                                problems the package installation                                problem it's very briefly because we                                have talked about during the afternoon                                and i will then present i'm taking video                                and some experimental results we got                                under the problem there is wonderful                                XKCD cartoon about a timetable from                                different courses where there is is kind                                of course in computer science which is                                ancient the course is intermediated                                compiler design with the focus on                                dependences resolution and if you look                                carefully the Prairie requirements are                                the same the course itself so it depends                                of itself somehow expressing the                                nightmare that could be dependency                                resolution and in of course installing                                software packages is a critical process                                in operating systems and little singing                                linux distributions and in cash america                                is a distribution and i believe that its                                comment water leaves and solutions we                                have a lot of reports of packages that                                are broken and dependencies are broken                                the dependency said that states that it                                depends from another package and that is                                not present or it is present but the                                Installer cannot solve the dependency                                cannot find the package that is                                necessary and then the solution that we                                worked out since                                                      first year in husband in                                               such or bear to use instead of suds will                                use syllable in optimization to choose                                my first to find the solution and then                                to choose from different solutions it                                was more or less inclined there of some                                questions of                                well to the limbs ed and today                                fortunately there are a lot of projects                                and a lot of his dollars that already                                incorporates are sad or other solar                                capabilities adidas was a green project                                which more or less started the                                development on this area in cuisine that                                it was already told here today of you a                                paper presented in is CSC or ice ice it                                was a nice conference Suzy eclipse                                pebble p                                                           somehow represents a very simple problem                                of dependencies and conflicts but                                somehow it's very useful to understand                                what what is really the problem and so                                imagine it you want to install car and                                imagine that your favorite met installer                                will try to install the more updated                                versions of each package so if you look                                carefully if we driving style time to                                and plus                                                               packages you have a conflict so you                                backtrack installed not also updated                                version of one of them voices installing                                tired version                                                     package is represented and in the in the                                box in heaven give the versions in this                                graph                                and this is what to the net installers                                should be able to solve and it was                                presented before also that this kind of                                problem is an np-complete problem so                                what does IDK ppl introduces that is new                                and this problem first of all the                                pipeline the architecture so tickety                                pivotal it's a perm and rapper and                                networks above apt yet it's not the                                regular apt-get it is a change in apt                                yet that has a special function that is                                p vo installed the special function                                expected the special option would                                include the problem is a silver bullion                                optimization problem and then the output                                of this first step is a faculty solution                                included problem the attacking package                                installation encoded problem in                                cognitive video would be fitted to the                                PBO sober could be it's in a standard                                format its OPP so it can be fitted to or                                 me some mini Santa Claus or the video or                                 any other females over so what is the                                 focus of ATP bo is not the solar itself                                 but the way we encode the problem in the                                 kind of solution and interaction with                                 the user for each solution that we find                                 after this over returns and a solution                                 we then process that solution if it is                                 needed near more iterations three four                                 or five iterations or if you find it is                                 the final                                 illusion we will again pass to apt                                 getting harder to proceed with                                 installation of the packages jpg gif                                 that could be RPM since we don't use                                 apt-get in the end to solve the                                 dependencies we just use it to install                                 packages or to retrieve it from the                                 server this is basically the                                 architecture of PB take                                                 said it's pluggable we can use once / or                                 another solar as it supports OPP format                                 viene does anyone it's the reserve wall                                 is for parsing and processing and for                                 walkies please call the packages this is                                 a petite other apt PBO algorithm and we                                 have a cycle from the repeat language                                 until the line can and in the first step                                 of the of the cycle we call the ppl                                 install option in apt get the one that                                 I've said to you that it would think out                                 the problem in ppl and we pass several                                 things to to that function first we                                 thought we pass the package that we                                 won't twist all they are represented as                                 p                                                                      package and involves then we'll pass the                                 policy what we plan to do with the final                                 solution if you plant where packages                                 very updated if                                 planned not to remove any kind of                                 packaging and the enemy class and our                                 NPI our is the universe of packages that                                 is available the different people trees                                 mvi are the packages they are already                                 installed on the system the return of                                 the PBO in style is as exam PPR encoded                                 problem follow you to the PPO encoders                                 and it basically have two things first                                 the constraints and second the cost                                 function the function that says what                                 kind of solution are we expecting this                                 function is and it depends of course in                                 the policy if you want more data                                 packages or we want not to remove some                                 package then with the included problem                                 we fastened to the gold is over the                                 previous offer and we reach a solution                                 now these the different part it is we                                 for each package in the solution with                                 which shift which package will be                                 removed from the system and then we will                                 check the reverse dependencies for the                                 packages that are proposed to be removed                                 Justin art of course not way of some                                 packaging decision that would depend of                                 the one that will be removed and we do                                 it the same for packages that will be                                 installed Croesus if PG will be                                 installed them we check if there is any                                 reversed off leads on their package                                 imagine yes there is there will be                                 remove sub package but without any                                 reverse dependencies on the system and                                 it will be installer two or three                                 packages that does not have any reverse                                 course which on the system                                 then in holywell interation in average                                 we have three to four iterations of this                                 and finally we and we reach the set of                                 packages that you propose to install or                                 remove and in procedure and installation                                 and the big difference decrease this                                 approach or leaves if or other soldiers                                 in my Susie and competition II we have a                                 lot of things in common like using a                                 solvers and so on but in this case we                                 are not using a lexicographical order to                                 define which solution will be proposed                                 to the user we are using a                                 multi-criteria decision management                                 problem set multiplexing multi-criteria                                 decision making problem and we integrate                                 different objective functions and                                 encoding it as a multi-objective problem                                 in this for me transforming into a                                 single objective problem using wicked                                 cells colorization so try to to explain                                 a little bit further these imaginary we                                 have three core sanctions represented                                 here as f                                                          function f                                                           want to eat expresses and the wheel not                                 to remove any pictures if to we explain                                 or we express and the updated value of                                 the packages and f                                                  could say that is the size of the                                 packages                                 we provide a weight in our a PhD and                                 that way it's of course depending on how                                 we are using these windows in solution                                 as a critical server is our bleeding                                 edge desktop and depending on their                                 three ways of course the solution will                                 be different some experimental results                                 well this was a specific color                                 installation sent it was and trying out                                 its praises installing kappa supplies on                                 the system we do different versions of                                 packages from different versions of the                                 distribution well apt gets settled in                                                                                                        of the packages that would allow to                                 proceed with installation ap TVP bo was                                 able to find all the possible solutions                                 as MTT                                                            probably and what comes next if this is                                 sometimes some benchmarks AAP ki video                                 is and in this case slower than any                                 other any of the others and what is more                                 interesting is I believe not with not                                 reaching the solution because today we                                 are going toward that the solders are                                 our danette installers are able to reach                                 the solution is which solution will be                                 proposed to the user I think the                                 question will start to go into that                                 point this is more or less straight to                                 run                                 these table characterizes the installed                                 packages objected package remove                                 packages and upgraded packages when in                                 base system we try to install                                      package with thousand packages from the                                 Debian popular contest and freezes                                 apt-get proposes to install                                      packages updated                                                         all burn anyone and yet aptitude opposes                                 a different different scenario of                                 installing packages that dated any moves                                 and smart proposes a different scenario                                 we have not one but three lines for it                                 for four ppl depending on the ways that                                 we provide for each scenario so in                                 freshness I had given more weight to                                 having updated packages in the ppl                                 removal profile I give more weight not                                 to remove packages and in the number of                                 the total number of packages I tried not                                 give ways not give way to the we used to                                 number the total install a number of                                 packages on the system so depending on                                 their choices in freshness is expected                                 we have a lot of packages that they are                                 updated and while they are only a few                                 that are removed and his draft expresses                                 the same numbers but is to see dance                                 with colors death in the different ppl                                 profiles we have a lot of different                                 results from the number of updated                                 packages removing packages install                                 packages or downgrade and now I will go                                 to                                 a specific example for reasons in the                                 same experiment and for package a TSP I                                 it was one of the                                                        frightened out and we tried two                                 different profiles in this case and a                                 more aggressive senator profile in                                 trying to F freshness in a more                                 conservative profile in a more                                 conservative profile not to remove                                 packages we tune up the ways in order                                 not to remove packages would be more                                 conservative while in the aggressive we                                 want to have updated packages and in the                                 end the number of his taller packages                                 was a lot more in the conservative the                                 number of different days were the same                                 and the number of remove packages were                                 of course lower in the conservative                                 scenario and the non-graded packages                                 were and higher in the conservative                                 scenario i think this example is                                 interesting because imagine if you use a                                 lexicographer lexicographical order for                                 saying that first we don't want to                                 remove any package so we I this second                                 scenario conservative and the trade-off                                 of not removing packages is that we have                                 to install a lot of packages and try to                                 to see why so this case was because in                                 in the most most more recent version                                 fell road-roller was in conflict we live                                 now to the extension one so leave now                                 too                                 hey extension one would write file                                 roller below some certain version so                                 while in one scenario apt ppl was able                                 to say to you them okay if you were if                                 you don't if you don't if you are able                                 to remove fun roller I can choose a                                 solution of packages like in the second                                 column aggressive if you don't really                                 tend to remove some water I just have to                                 freeze all that set of packages and and                                 why because if Arastoo to maintain file                                 roller but any DSP install a lot of                                 packages that the newer version of                                 Hollywood in stone and to summarize and                                 I'm not saying that there is one                                 scenario death is better than the other                                 what I'm saying it is there between                                 different linux users and Saturn might                                 prefer some updated and others and I                                 prefer not removing a package because it                                 breaks something in the system and what                                 I believe it is in the future maybe the                                 progress on metrics dollars would go                                 further than just finding a version                                 would go more toward try to give the                                 user the possibility to customize and to                                 tune what kind of scenario does it want                                 England                                 the final solution and this is the more                                 aggressive scenario to finalize with                                 some conclusions so the mindset is not                                 complete again sleep seed or other                                 solvers we are not so focused myself a                                 developer and raising also develop a lot                                 for apt ppl we are not so focusing put                                 it as the as the production-ready tool                                 but more and proof of concept and more                                 away for trying to see what kind of                                 solutions the users might like and but                                 anyway it is available as the code you                                 see PL and yet can be tested because                                 there are packages available for David                                 man driven cosmological and I believe if                                 video encoding and would prove to be                                 suitable for the problem and provides                                 extra flexibility compared for instance                                 with some tools that is just reach a                                 solution maybe are not so able to to                                 wait what is the what are the user                                 preferences and using multi criteria                                 approaches might be also desirable and                                 can achieve an option and performance is                                 still an issue we add the mish                                 competition it was talked about we have                                 been present in the last additions of                                 the mission competition and we find it                                 besides some syntax problems that we                                 were not supporting but we are almost                                 ready there there are also a performance                                 issue and jerrys of course there's a                                 cause of trying to airing the cost                                 function with multiple                                 weighted functions and so I think the                                 next steps will be also toured airing                                 our performance cost function and more                                 performant encoding and as I said we are                                 trying to incur to improve the                                 performance we are working with PBS                                 overs with lush linking from in yes that                                 is it develops PBF over but more than                                 that we are trying to see how include                                 the problem using multi criteria but                                 without losing performance and there                                 were a lot of things that were in which                                 competition deputy not support like                                 multiple requests like Oh strains the                                 version version of the package                                 constraint and so on that we are trying                                 to give long just to also to to be able                                 to compare a guy against other other                                 matching stallers we recognize that the                                 large the most of the participants on                                 niche competition our more focus on                                 having good soldiers because they are                                 from research teams in soldiers that he                                 flops overs and such as steep legs or                                 mini subs or wherever and you are more                                 focused in encoding the problem and                                 trying to understand what to linux user                                 expects from the methods taller in terms                                 of the solution so our focus is not so                                 much the performance and the soldier                                 itself but more the kind of solution and                                 if that solution is really useful for                                 users or not we are also i started with                                 sufi fruits and interactive knows we                                 where we can ever                                 bc                                                                    installed or you can say there's a                                 package message must not be removed so                                 some interactive mode with the user                                 which is very interesting because the                                 user then can say okay I want the second                                 run of the apt ppl but just walking this                                 package I don't want to remove this                                 package which for us is very easy these                                 interactive mode is already developed                                 but we are trying to get better I was                                 very fast on y'all doing and about the                                 basics of the apt ppl but i suggest you                                 to or if you want to just drop me an                                 email and i will send to you i suggest                                 you to read our paper that was published                                 in pace automated software engineer                                 conference and gives somehow detail a                                 little bit further their algorithm in                                 the weighted of the cost functions and                                 we are also i don't i'm not sure if it                                 is a protected but we did it at least                                 recently but we have also decided ABT                                 ppl God Cashin lash conduct PT where we                                 are there resources and so any links for                                 papers and so on and I would like to                                 thank you thank you                                 can you get back to you into the ideas                                 in peace each one first one you showed                                 us the very few                                 yeah yes this one this one okay so I did                                 not understand why you need this                                 attractive groups in order to launch                                 again dissolver when you remove or when                                 you install packages because i was                                 expecting that you are encoding the                                 complete dependency graph with                                 dependencies and conflicts into the                                 popular logical problem that i send it                                 over to the video saga and i understand                                 this is happening this is it for                                 instance when you translate click                                 assault and here it seems that you're                                 not doing that because you have to                                 iterate whether you are solve our                                 proposes to install something you are in                                 with something something you can be                                 explained why what is necessary this                                 price and it are not including all the                                 new fantasies in public stream so we are                                 only in Cody and the count that is                                 direct below the package that we want to                                 install and these colored packages I see                                 why slicer and inserting first we expect                                 that in large repositories and and for                                 instance if we have a small set of fixed                                 or small cell compared with the total                                 repository small set of installing                                 packages and the package of room to                                 install and the cost of encoding the                                 entire tree could be a big worse so we                                 average of runs in the difference                                 I know that we tried is three or four                                 and not much so that's the trade-off                                 that we have children if you measured                                 how much you lose when you import                                 complete depends if you are into a PPO                                 in the beginning ears and but it depends                                 a lot of course in the in the scenario                                 where you are testing for instance if                                 you are testing in the small we posit                                 free and of course encoding everything                                 is not so every as at multiple                                 interactions but what we found is there                                 a number of iterations does not grow                                 fast so it's always steady because you                                 start to include the packages part of me                                 yet every verse dependencies with the                                 tree and so summarizing and we have done                                 some measures and we wish then this                                 approach for our case it would be there                                 but I needed that it depends on some                                 conditions as the ratio between our                                 account dependency count and the size of                                 the repository so it's not a silver                                 bullet and I believe within fits or no                                 problems and it could be interesting try                                 to have some experiments on precise                                 alone dance on different repositories                                 problems try to see this approach                                 Akane's encoding all the repository ESPO                                 strains                                 I would that question of that this is a                                 domestic guarantees tool to terminate                                 yes because okay I would answer yet but                                 let me just say well think before and                                 that is I want to emphasize that the                                 approach of encoding all the repository                                 is not only on the constraints we have                                 to put it also in the cost function                                 because in the cost function who you                                 have the packages that are already                                 installer not is taller the difference                                 between the versions so it would be only                                 the constraints I guess would not be so                                 or even nothing every but I think also                                 in the cost function the number of the                                 variables in ppl grows very fast the                                 question you were saying and in the                                 worst case and we ever imagined get the                                 number of packages in report our eggs in                                 worst case he where X minus P the number                                 of or the packages that you want to                                 install iterations because you don't if                                 you just aims the new packages to the                                 problem but then you start solving it so                                 that will be the worst case but in                                 practice we have a very steady with a                                 low standard deviation number of                                 iterations                                 doing the other profession                                 okay thank you
YouTube URL: https://www.youtube.com/watch?v=29lIhaPP4WU


