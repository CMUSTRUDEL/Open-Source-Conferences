Title: Debian on ARM (Hector Oron)
Publication date: 2011-02-09
Playlist: FOSDEM 2011
Description: 
	ARM chips are changing - faster, multicore, with FPUs and GPUs, changed instruction set.Debian arm is changing to keep up. This talk will cover recent developments in the ARM port to support modern arm devices like tablets and netbooks.
Captions: 
	                              okay well I can shout for Abby it was                               okay so yes video people we're here to                               find out about new buffs I'm afraid of                               this poorly so will be bored or possibly                               fascinated so we're Armstead's think                               happening and it's confusing and this is                               useful easy to explain it all to you so                               start off from his hearings isn't                               particularly arm specific audience so                                we'll explain a bit about all the names                                meeting                                that way wow those applause                                now I see why so glum you do it all                                right ok so in future people will throw                                off and love is that you in this talk                                talk about on b                                                         other and it's a little bit in dealing                                whether we're talking about cpu names or                                architecture numbers because they're not                                same for left-wing similar so I thought                                I just explain to our cpu cores I've                                gone from                                                               arm one but that wasn't any computers                                same thing ignore that and recently they                                got water cause of that and the                                marketing department so it should be                                called cortex a cortex our vortex same                                instead it's cute and they wanted to                                rather than have                                                      arm                                                          they've got three classes of CPU am                                Amy's microcontroller cause is middle                                sized real-time sort of stuff and a is                                property features for the next and we                                mostly only care about cortex area so                                meanwhile there's the ice and names                                which is the instruction set                                architecture specification that CPU                                implements start with this is the same                                implemented on v                                                       army to as well so it's going on so the                                current cortex series multiple                                processors are all armed version                                  architecture so insolence is on second                                then finding a really old arm CPU from                                about five years ago or their money in                                the current architecture specification                                that's what foods with me                                poynton and so does the ark instruction                                set there's a whole little extensions to                                it because I'm only specify the core                                stuff other people actually make chips                                with that stuff in adds up to those                                people which of the best you could buy                                that they put in cpu still costs money                                you know I'm judge record a jug of extra                                 work in it                                third extensions and so so you tend to                                get different shapes different bits of                                the specification affirmative we've had                                lots of over the years the original                                floating point unit long time gisele                                which was a subset of the Java Virtual                                Machine implemented in thousands of FG                                                                                                       set mom voted point for VAP and neon                                which is a symptom for doing creating                                kinds of things so like MX emanates                                instructions on x                                                 between thumb thumb to thumb was an                                extension to the architecture which let                                you run most of the stuff in                                            couldn't do everything after switchback                                too long some of things some to                                everything so it's actually a                                replacement for the art line and these                                days in fact is encouraged because it's                                smaller and faster so there's not much                                about using the older instruction safety                                stuff so all this stuff about Debbie                                lamport's has to do with api's and                                changes between api's so the strength of                                the reason they've taken over the world                                is that they make everything you know                                because they just put the call on the                                other people decide which chips and in                                which markets and which options they                                should have a high passage blah blah                                blah there's all this stuff but the                                problem that outside of all that is the                                heterogeneity of it all it's all                                different you will make it very there's                                a lot of different flavors of our and                                that's a pain for us a software                                developers so one of the variations you                                have is the ABI no harm specify an ad I                                think should be using for this quad lot                                of options within the ABI so it depends                                exactly which again we should choose the                                 embedding world it didn't matter because                                 you always feel everything for your                                 particular target and you pick some                                 options and that was fine but you know                                 in our world where we distribute sup                                 with people we have to decide in advance                                 which players to use and thus people                                 like that you have to pick an option and                                 building the thing for that so the API                                 is the Indian nurses if again you little                                 endian machine basic architecture arm                                 Intel spa and the sea might be cool                                 dmz signs of taking the convention for                                 calling functions you see Lucy to find a                                 different one and so                                 the same instructions use is not                                 strictly speaking part of the avi so                                 again my x                                                               you there's a whole load of instruction                                 set extensions like mms but suppose you                                 don't use those it'll run on the older                                 machines as well so that doesn't change                                 the API but we do need to make sure you                                 don't use instructions that are                                 implemented on computer you're running                                 on so it's kind of a bih it's a little                                 bit awkward and again cpu optimizations                                 you can order your instructions                                 optimally for a particular CPA depending                                 on how its bug line works it's just a                                 seven XX of clubs it is an arm you know                                 you do things differently on our                                                                                                                and you do on arm v                                                 doesn't change the API it just changes                                 how fast that particular code goes on                                 the GOG and if you don't know which if                                 it's going to be running on an advance                                 then you pick an option which isn't                                 particularly terrible in the orphan and                                 what the point doesn't give instructions                                 some of them haven't got that's really                                 slow                                 particularly matters in the                                 floating-point area so the original arm                                 CPUs did spectacle a collection point                                 unit will FPA a long long time ago                                 circle around three probably other than                                 ninety six days ago but practically                                 nobody ever use it so there was this you                                 know there were                                                        but it almost every chip made for the                                 next ten years those instructions were                                 not implemented so they were always end                                 related and we'll get on to the effects                                 back in a bit in the meantime other                                 people who bore our potential licensees                                 like Intel but their own stuff in so                                 intelligent i wnat which is a bit like                                 in MX implemented on the arm                                 architecture seriously the strange                                 maverick crunch thing which basically is                                 subscriptions for playing mp                                            I think it's very specific stuff since                                 version                                                       we've had VAP as an option but of all                                 people putting their CPUs but they                                 didn't always tend to be seven you                                 always have the FP so pretty much after                                                                                                         CP is a floating point is in them and                                 you can expect to be able to use them                                 it's like a normal computer neon is the                                 other thing which is current which is                                 this sim unit and again that's that's                                 usually present in a modern CPU but all                                 of them specifically not Tegra                                         is one of the things you can actually                                 get right now so because of all this the                                 deflecting point to use arm has been                                 interesting so normally you just put                                 floating point instructions in                                 instruction stream like any other                                 instructions and they get used that's                                 kind of the way especially x                                          expect the world to work but as I say                                 and that is the way it was done start                                 with the old original on port the                                 problem was because there never was a                                 floating point unit those instructions                                 are always trapped                                 you can't execute and then you emulate                                 it in software and obviously software                                 emulation floating point is slow the it                                 turned out the trapping in the kernel of                                 a construction of port jumping off over                                 here and late again jumping back again                                 is even slower all those hundreds of                                 instructions every time and you excluded                                 an instruction oh so that's not I do                                 there's also soft light which is where                                 did this problem so rather than just put                                 interest in the stream you                                 you can part the stuff so that you use                                 the emulation directly so the compiler                                 goes what's going to happen is this                                 instructional get trapped and emulated                                 so let's just put the emulations reg                                 away and not actually run any floating                                 point instructions it works much better                                 if you know you're not going to have a                                 floating point unit anyway our flow is                                 basically all you just run the                                 instructions if those are you put a                                 point unit and there's the top deck Pete                                 variation on this which is use the                                 calling convention for the we haven't                                 got to play the point unit but still                                 pass them on to the real war because                                 it's very happy for one thing that                                 that's compatible with the motorway no                                 you haven't so the viola provides all                                 these options and they're incompatible                                 you can't mix them together without                                 taking in all this care so big making                                 distributions have to pick they're going                                 to do this if she even more complicated                                 than that but you don't really want to                                 know this anything with any second                                 architecture specification there are do                                 weight training ways of calling well                                 there's two ways of calling a Hankin                                 the details so via the pink version one                                 version to an hour                                                                                                                             two functions or there's two registers                                 and there's a half precision mode as                                 well being quite short that makes no                                 fortunately the neon unit uses the                                 pledging point registers so that doesn't                                 add incompatibility in the court                                 intervention it's just that you don't                                 want to use it if it's not present I                                 hope that made sense so fuses knees fast                                 and the other aspects important aspect                                 of the ABI is Indian this so the arms                                 for long time if it's vegetable make see                                 when you start it up you can choose                                 really big endian mode little endian                                 mode they were simply stood up that's                                 the way the architects working really                                 tribute just set a little bit and                                 holdings which ramen but in fact in                                 which they never done it because it just                                 caused aggravation very few people use                                 the big endian noggin arms almost always                                 little endian the only people process of                                 people making Reuters and there's a                                 specific ship series maybe until I today                                 which was designed for that and it is a                                 bit quicker if all you ever do is shift                                 the internet packets if you learn the                                 whole thing in begin your motor keep                                 walking around                                 other numbers but this is a fairly minor                                 performance again especially on Bundy                                 view they've got a swap instruction to                                 do just that so it's a single cycle                                 anyway so mostly people will tell you                                 not to do that these days don't believe                                 any significant distributions or                                 operating systems are really big endian                                 any more so on to the actual horse                                 implement all these various things so                                 the architecture was first releasing                                 clicquot vintage she's never one time go                                 that's about when I got involved in this                                 stuff I've been doing on the response                                 before that and it's just about to be                                 finished so nobody cares about old are                                 many more set for people with incredibly                                 old hardware like net winders which goes                                 still working it's a bit unfortunate but                                 it's alright it's breaking already                                 because it's not interesting I'll                                 release the the new version                                 about six years ago so this really is                                 old hat implements the what we now call                                 the old API which was originally called                                 the apts forearm procedure called                                 standard which basically came riscos and                                 it slightly front of things and assuming                                 that you have all these FP use that                                 never existed pretty much so it was                                 always very slowly and foolishly tried                                 to run any floating point code so back                                 in Lenny we did the army airport which                                 is essentially the new API the arm                                 specified for everybody so that's little                                 eagle windows big Lansing be knows                                 people as it was at the time and                                 improved API for you see news at the way                                 the world works these days and all the                                 speed with a pleasant point problem and                                 stuff like that so I meow is one                                 certainly what you're currently using                                 think we're still using so that's I get                                 it back as far as on v                                                quite old there are still on v four cpus                                 about most notably strong arms so dis                                 lamented shirt by the way so the way i'm                                 used to specify the options that you can                                 include letters on the end of the                                 architecture name to you get a v                                         minutes before but it supports the thumb                                 mode user tr                                                          with the thumb Giselle and something                                 else and something else which is why                                 they changed the call center naming                                 because it's getting our hand so on our                                 me L oh we picked the soft float option                                 because at the time there were no cpu's                                 with FPS is incredibly efficient running                                 with the emulation mode but if you have                                 a floating-point unit it's still                                 reasonably efficient to run that so this                                 Court will work on pretty much anything                                 that you can still buy but obviously on                                 you cpus it there's nothing like as fast                                 as it could be anything any of the shiny                                 new stuff just a little bit of confusion                                 the volatile army al is not the same                                 that you can go forward to v                                             the soft AP option which slightly                                 different so if you stick a good                                       binaries on the DVR long she probably                                 breaks it was an army be port so that                                 was a big endian are based on the old                                 lady I on                                                            pretty much done because the NSL you two                                 had a proprietary ethernet driver in it                                 the only way to get to running was in                                 the beginning mode it have been supplied                                 with to guess that's nice peachy                                 so you know only way the best way to get                                 debian running i was to rebuild the                                 whole damn thing for the other end doing                                 this sure then we have doing pretty much                                 so good scary man but this we don't care                                 anymore there was any candy all day vit                                 way computing their thoughts which is                                 better i'm indeed within their army l                                 but in fact it's not and that's so there                                 are two modern times and compassion will                                 do something to talk about this so                                 obviously you can get history to me                                 Oh                                 well we have to get the Bisons in the                                 market like this netbook which has an                                 ARM processor we have mobile phones and                                 we have cpu's with floating point unit                                 so we want to be able to run an                                 operating system and fairly optimized so                                 we based on Vivian well doesnot you but                                 we've got his life oops and that stuff                                 sorry was a safe out here but I don't                                 think while anybody but basically there                                 was this company interested to run heart                                 flows are bored so they started to watch                                 from the cultural sports from Vivian we                                 have been doing this world lately                                 you said ND                                 so the nabi shortfalls a little                                 intermission and install volume ii boot                                 I've never seen that before halfway to a                                 Tory Peter explodes because you change                                 presenters baby's gender what doesn't                                 like you                                 needs me to do faster                                 big                                 look in my opinion Nicholas rather than                                 this day                                 ya know                                 ok                                 so basically we are proposing a new                                 architecture which we call our mission                                                                                                         something which is faster a flow which                                 is fast as well and it's are visiting                                 optimized which is the red box of all                                 devices we think that I connectivity are                                 shipping nowadays the more information                                 you can see the wiki and there were some                                 some tests done performance my kingdoms                                 and basically it's a four piece game                                 test and we can see running the tests on                                 the army harm ears which is soft fraud                                 versus ubuntu debian softer fake we got                                 this performance improvement which is                                 encoding mp                                                         minutes apollo                                                         form while you get                                 about                                                                army air vs army Jeff Libyan you can                                 call him it's                                                           heart from taking benefit of the                                 floating-point unit he goes on around                                 seven minutes almost eight there was a                                 Constantine of maladies he's been doing                                 a lot of the world regarding Jeff fort                                 and he he got a benchmark several                                 benchmark since he won and GX years                                 which is just the students uses a lot of                                 floating-point and you can see this                                 awesome and improvement                                         summarizing might be something which can                                 be interesting now which you can gain                                 around forty percent on for a technical                                 are omitting two children sent potpourri                                 or something or something else                                 so there are exceptional cases where                                 you've got enormous amounts of                                 collective point and lots of function                                 calls go enormously faster things that                                 are just some floating point go some                                 more fast what is indefensible integer                                 performance integra firm against year                                 yeah good have it here oh yeah when the                                 public says if you want their more                                 complete missing this mail address so                                 you can have a look the four Santino's                                 tests are published on this side and he                                 won this benchmark so we basically froak                                 that it's thirty to forty percent better                                 performance on how are already using                                 floating point whether you using tear                                 that you get one one percenter formats                                 so it's going around for half percent                                 which is very few we go that was just a                                 shipping no difference in non Fletcher                                                                                                        should any purely on your CPA there                                 should be                                 I'm sorry yes that's true there should                                 be some changes and potentially there's                                 obviously you optimized to be certain                                 love you expect some full games there I                                 guess we could build for b                                              on the cortex a                                                       you optimize the i'm quite sure there                                 was a little probably though okay                                 generally we should think about any of                                 this to be slower with each of the each                                 of the aspects makes it a bit faster                                 some of the floating-point differences                                 make an enormous difference and                                 increasingly that matters on desktops                                 they're using opengl is shiny SVG                                 squirts and stuff that we have to have                                 these days once keep in mind that if                                 you're building one thing for any                                 measuring that is that what you're using                                 cool benchmarks like the embassy of the                                 space benchmark sing like that because                                 I'm monolithic application c compiler                                 actually use half throat even if you say                                 softly so when you're comparing soft                                 close with half load the compiler which                                 is actually same code in most cases so                                 ben fox looks almost identical it will                                 only use the hot fluid clinic                                 conventions with your lady are in shell                                 library and using call something like                                 that that the only kid will you save                                 difference and it's something which harm                                 the adjournment of the performance                                 relative you could recover common share                                 for long time disability                                 edge wise which would be built as like a                                 molarity executive of all trust calling                                 into its own functions and what not                                 visible what kind of ability to produce                                 when using it on those systems you get                                 library calls across many many different                                 types of hundreds the only field is lots                                 of comments                                 okay we started to bootstrap army                                 Japanese are very important is the                                 straight line here so the god of                                 eighty-five percent of Daniels I feel                                 pretty much useful in usable now they                                 still want to do you can find on the                                 week address and then we're going to do                                 a mass back feeling today Liam tragedy                                 upload packages for supporting this                                 architecture and there is a couple                                 concert of the strains to do this in                                 favoring Cambridge we're meeting in arm                                 holdings and then the dead wrong with                                 making a Genesee in San Antonio Texas                                 too heavy for young on on the hungry                                 spot one thing that's as useful benefit                                 of this work is that effectively ubuntu                                 debian me go at least we'll be doing the                                 same compatible stuff which should                                 improve our lives generally pretty much                                 everyone is now                                 two feet seven or later all there so in                                 debian is important that we keep the                                 army airport around for everything else                                 that isn't new I've for once                                 some of those people with me to be                                 running optimized code but by and large                                 that will work everywhere else so those                                 two ports should cover all our machines                                 for some while until we have to move on                                 hold again I hope you'll agree with that                                 it's one of the things that will get                                 discussed at the sprint is happening a                                 couple weeks time it doesn't know about                                 that as interesting arm stuff that's the                                 place to come obviously mon now if you                                 have a machine that you feel is being                                 ignored and ropes transported by what's                                 going on yes oh yeah allegan so young                                 another aspect of this that's a bit                                 complicated is as well as the ABR I we                                 to think practical changes so no harm                                 yell now hmm Oh different and you can't                                 mix fineries packages from those                                 distributions there's all sorts of stuff                                 you can do within an avi that's still                                 different and optimized so                                 and in what cpu and what functional                                 units you've actually got so and we have                                 this problem other architectures as well                                 so and by and large we deal with it with                                 in debian by digging in specific                                 packages by making multiple very soon                                 and player builds and play our                                         then play AOE                                                     obscene                                                                 bit company really but it works and it                                 works because there aren't family                                 packages where you really care enough to                                 do the optimized version so you can do                                 it specifically in those packages but                                 you know one day we we have this vision                                 of the world where may be possible to                                 just optimize the stuff you need to                                 optimize but just for the packets in a                                 packages in an extra repo for the bigger                                 than to rebuild the whole thing the                                 whole                                                                    change some minor aspects of your                                 optimizations but you could still make                                 packages put in the repository and have                                 at do the right thing I'm running on a                                 search on search and these optimize                                 package is available the you to neon so                                 let's install those and run them but if                                 they are present you'll get this kind of                                 stuff so there has been some work on how                                 this might be done it's jumping referred                                 to its flavors so it's which cpu Ashley                                 optimized for which extra bits were                                 included but professionally at the                                 moment there isn't an easy way of doing                                 this it's one of the things that                                 let's see how many over things couple of                                 years so hopefully Laura Microsoft theft                                 we'll see and so yeah it has bright                                 ideas about how to put that metadata                                 into packages and what exactly should                                 happen we have a mechanism of the low                                 level in GCC and a linker to basically                                 do this right we already have it fall                                 back from more specialized directories                                 to the default architect think so if                                 you've installed some of optimized                                 binary they'll get run if the novel just                                 run the base stuff so we can make                                 hackage is the foot files in the right                                 places and it just works but we don't                                 have mechanism if d package and out for                                 finding how it be done which packages                                 should get when how you so much wants to                                 get a glass of the thing and there's a                                 whole load up here back as it works at                                 the GCC link the level one cares it's my                                 scary stuff and right yes that's pretty                                 much all we have to say I think there                                 any questions oh yes look like                                 when this false restorative to the NSE                                 and iron and ice pond springs and some                                 something                                 people working on this is employed by                                 these companies and also dinero is                                 involved and canonical so we want to                                 thank constantly goes moderate a Swiss                                 engineers employ he put in common each                                 he should be doing this stuff actually                                 they're armed and lots in the lots of                                 individuals which are around regardez                                 ici touching people which is the one we                                 used to push up there on each apart                                 because we use this is thing                                         doesn't have hands float support unless                                 you use because patches if you want to                                 send any comments you just use the                                 Delian our mailing list just remember to                                 the farm so you got any questions or                                 comments                                 that should already be working here I                                 think basically you have EG lipsy                                 brother Jacob see for the multi-core                                 stuff to work and that's a big done                                 while ago I hope it's all in and working                                 Louisa yet the Tilbury support in the                                 bar which is drunk or products a knife                                 and quite possibly slices same thing                                 just for the ducal our support for your                                 board the user space general purpose of                                 this page is mostly ready that some                                 libraries are liking might be                                 inefficient on SMP or might be lacking                                 some some proper safeguards and notably                                 in non linux you going on desktop user                                 space nikon right a lot of very sweet                                 innocent issues that's all the attendees                                 in talks with nothing yeah to know the                                 sweeties fixing that a lot so yes this                                 is being done while they've now actual                                 chips are coming out people actually is                                 it all find out what still that this                                 broke by large here it's just words                                 CR I couldn't possibly tell you it's top                                 secret not too long I hope the else that                                 they should you should expect it's empty                                 by default in the future I can should be                                 Cobbins to to a blah blah blah for                                 something else you like I mean we have                                 all laptops you get knowledge on other                                 simply use one I was using our the arm                                 on on msn le                                                           chant to our miele with squeeze should I                                 expected that break with the hf years                                 unfortunately upgrading between our                                 exchanges we do very well it's there is                                 a nice way saying chose to something                                 incompatible nikon was my gosh yes                                 that's true i guess when we have                                 volunteers that's working would be a lot                                 easier to implement something that                                 actually do this it's very difficult to                                 suddenly change because you've got to                                 it's going to be moment when you stop                                 running anything like that and start                                 putting everything like this                                 don't accidentally jump back into some                                 old code because I'll just blow up what                                 was that smoosh they expect the same                                 thing today because the squeezed us and                                 there's been no more so the above the                                 elbow will stay around for some long                                 time until there's no more armed me five                                 cpus in use so if you can carry on using                                 our meal for quite a few years yet I                                 don't know how many you know six maybe                                 when you're slipping we really very slow                                 but then you probably want something                                 better so they do make the parameter did                                 you so that the wonders or falls off a                                 boss of your own port yes because it's                                 for and saying that you can run envi on                                 it before but you can't have them into                                 working from into working them couldn't                                 in fact the GCC fixes haven't haven't                                 been done so you can build a TCC which                                 supports be                                       but the problem is that puts an overhead                                 in every function call for everybody so                                 that was where the cutoff where you look                                 so so there isn't anything just it's not                                 that is it possible from damage down                                 exactly is that it wasn't a sensible                                 choice debian which is a pity because                                 there are still at winding machine                                 people i have on the words exactly but                                 yeah basically says lots of white                                 they're still strong enough stuff you                                 know being so listen to the bear year                                 ago that's not what days we like to get                                 the language in fact is worse than that                                 because as a chinese outfit we produced                                 a new of seven core which is before not                                 be                                                                    than NASA machines you can get this                                 thing in which people boy                                                before                                 you know if anybody wants to support the                                 v                                                                  bazooka one better it's not what we're                                 having you respectfully the requirement                                 of the army on upon to something                                 recommend                                 how much me fault either is the awful                                 lot it's mostly it's not very much of is                                 running the next would be difficult                                 being definitely never actually knew                                 what they will run our stuff very hard                                 to move people left and we got there is                                 the very useful if popularity cops                                 report into machine architectures well                                 this when they have some vector oh no it                                 sounds like a music in there yeah it is                                 you think it's a good idea but I don't                                 think about it but may take a ham and so                                 getting right some point the move to be                                 folly that way guess we haven't just                                 done it now so probably queasy ruckus                                 they will pray more thank you very much
YouTube URL: https://www.youtube.com/watch?v=xEQZL5Donz0


