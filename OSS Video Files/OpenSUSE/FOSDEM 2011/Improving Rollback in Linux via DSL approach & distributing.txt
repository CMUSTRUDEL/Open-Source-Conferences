Title: Improving Rollback in Linux via DSL approach & distributing
Publication date: 2011-02-10
Playlist: FOSDEM 2011
Description: 
	Following on from the Distribution Talk at FOSDEM last year the subject of this presentation focuses on Rollback within Linux.Rollback has been around in various forms for many years within GNU/Linux Systems. This talk looks at the current mechanism proposed by Caixa Mágica Software in collaboration with the Mancoosi Project and how it improves the existing mechanisms. A Domain Specific Language (DSL) that has been specified is being used to describe the way in which package evolution occurs to feed a three-tiered rollback approach. This DSL information, the binary and configuration data of the packages can then be transmitted and stored away from the local machine using various techniques to help record the state of the machine. This distributed information can then be recalled in the event of catastrophe and help restore the state of the system back in terms of packages and configurations to a previous working state using simple interfaces.
Captions: 
	                              okay thank you very much for the kind                               introduction and I'm going to explain a                               little bit about the road back to                               mechanism and how that works what we are                               going to do is have an open attendance                               discussion at the end where people with                               some ideas might be able to come forward                               with some suggestions see what my then                               useful discuss so without spending too                                much time going to give an introduction                                into what cash match peers who I am what                                makers you project is for those who                                don't know that's just also to give some                                people the kind of attention so that the                                topic of probably roll back as a main                                specific language implementation                                generated and also distribution we're                                transmitting data where externally and                                when seeing through p                                                 said transmit update and submit that                                they are mechanisms ensure roll                                backwards consistently so a bit of an                                overview of how the project now how this                                presentation a quick discussion dr.                                crusher match for incidents from the                                become a cozy then I will go back into                                the core of the subject talking about                                Robert what we define roll back has the                                types of rollback mechanisms that are                                available soon since the art systems we                                found and then talking this is referring                                back to repetition of last year looking                                at transaction                                package management looking at are                                specific to meet specific language                                giving a bit of a definition of that an                                example show how our approach works our                                implementation works and then too since                                I so add to that we put a bit of                                sidewalk which is about the distribution                                and data and then I wrapped up and we                                can discuss everything okay for those of                                you who don't know what Magic is                                were Portuguese linux distribution and                                we have now released version                                           america it's a basin listen Lana the                                distribution of work based on mandriva                                and what we did give a Portuguese                                specific distribution we work with                                national companies we work with European                                projects we work with the government in                                Portugal for providing East halls and we                                Maggie IT project so the flooding was                                here yes sir they give a lecture on how                                we disseminate of that and some talking                                in terms of number of pure numbers of                                systems we're talking about                                        either single group of machines we've                                got register now the for those of you                                who are keen on what you'll see is that                                we are a man during the basis and rtn                                base and we're moving to see m                                       moving to a debian base unfortunate out                                that's Jetson submission but it provides                                technical challenges now the                                european-based projects there's a                                question people here yesterday                                presented by the minus Z I'm going to                                very quickly through it it's an fp                                 project it's the successor to the evos                                project that you see down the bottom row                                                                                                     including project and just do a package                                mountain looking at that the class                                solvers looking the upgrade problem                                providing Rob batter mechanism and                                that's that's my work on this we're also                                now working on the EULA project and it                                was user centric networking to those of                                you saw devotedly because these features                                yesterday saying suggesting about having                                having a network in grenoble with                                looking implementing one internet time                                this project is also one about                                virtualization okay and my koozie                                specifically about the sort of a pattern                                management problem for some talked                                yesterday the obviously partner talking                                about the tools we provide and also in                                terms of other presentations we have to                                talk that could be late today on                                actually the solvers and also reckon                                visualization of the dependency problems                                and visualization fact management so on                                very giving that presentation bit later                                so and for those of you who are here                                last year I had a semblance of the                                graphic in terms of looking at so                                how can you explain your backs people                                 traversing in terms of states it's a                                 complex system you can you have your                                 normally progressing onto package                                 management and have new releases of                                 packages so what are we doing them as we                                 go through so the important things                                 definition and then in the art                                 definition are looking at the robust                                 process and inverting changes to the                                 system by a package up a package                                 upgrades back to ability to the systems                                 they so this means that we're looking at                                 getting a package for a reversion to                                 that i have installed today but i                                 actually found that well yesterday                                      i realized i actually what i've just                                 installed the mixer system on stating                                 something loyalty about to go to war                                 what power tools are looking at is                                 saying can we actually provide certain                                 to teachers to make this make this work                                 and can we guarantee that are some crap                                 so this is Miss mechanisms one part of                                 the transaction today package management                                 this is a continuation of lecture that                                 JFK drives last year and this is the                                 continuation work now state-of-the-art                                 systems facility comes here and the mix                                 toss it was a very good talkin that                                 yesterday Connery second pack and                                 second-generation a commander which is                                 configuration manager said affairs for                                 those of an SD user space looking at a                                 copy on write system and as I set the                                 neck sauce which is looking in                                 fundamentally a new evolutionary with                                 improving this and then there's some                                 other configuration                                 muttering fest so the drawbacks are the                                 various approaches now the picture of                                 the missile and the flyer using it tools                                 that are too big for the drill we're                                 looking at specifically package rollback                                 going to assist in state of the pump in                                 particular package if we use file system                                 methods and we try and catch all that                                 into what happens is that we actually                                 roll back applications and also possible                                 files that we have in particular system                                 state nuts what we're trying to avoid                                 we're just trying to focus purely on                                 packages package based system thus we                                 have an implementation in our the cm                                   system that we've released has a basic                                 Rob back what you're doing in preserving                                 configurations making sure the packages                                 you can retrieve this is a I also                                 mechanism that man Barry Brunetti used                                 were looking at which is assisting court                                 based directly looking in finding                                 mechanisms to try and actually see what                                 state system before sailing system after                                 and then use the differences are a is to                                 combine to try to provide all the best                                 features of it difficult is a roll back                                 the problem we throw back when you come                                 to some of these lectures is people                                 attending ok I have released a package                                 it's working I proved but there's one                                 bug I fix that bug so when we go on the                                 progress time graph you normally think                                 that this next package is the best and                                 then breakfast sometimes however there                                 might be something that only works with                                 a particular version I the truth then                                 see the                                 about something however it's very                                 counterintuitive so I I visualize this                                 with the toys like you think was instead                                 it's very difficult for people to think                                 of it going back up so when you think                                 your progress on the forwards so it's                                 downgrades counterintuitive robot as                                 lonely scenes going back through this                                 package legends also it's also seen as                                 only something for fixing errors                                 something that actually this is because                                 I want to fix particular part but it                                 might also because someone is relying a                                 particular license set some GPL feature                                 and someone has to go back for our                                 virtualization project on bus this is a                                 very important case there are some cases                                 however where rollback will be                                 impossible I'm sure if I'm sorry to the                                 clip to the bottom but what it wouldn't                                 just hi my things and there are times                                 where the upgrade plan would be                                 impossible so this is all part of a                                 bigger picture this is parts of                                 transaction protected package management                                 the what we're doing here is we're                                 saying that when you install the sense                                 packages it's all nothing so when you                                 when you filter the upgrade path you're                                 saying that here's here's the packages                                 and if I fail I want to get my system by                                 the bats and state that was before or on                                 the system mountains and so what we did                                 was we looked at some of the previous                                 self as some of the previous units that                                 were available declan rpn Harper looking                                 and seeing what tools                                 and some TV p.m. is a lot of data of                                 what you're working so the advantages                                 and benefits of row back and from such a                                 protective factor by having this                                 framework we can capture the elders                                 we're looking at looking at containment                                 aims fruits looking at providing                                 formalism for that that would be other                                 the screw the matrix if lame jokes or                                 something the other thing is that when                                 you do a package upgrade or just upgrade                                 you might have                                                          upgrading now what we're proposing is                                 that with our mechanism simulates have                                 been generated when you actually rather                                 simulator you'll be able to say using a                                 model of the system when the Swede                                 possible or not so this will mean that                                 you can say actually when you install                                 this it won't work because you've got                                 missing file dependencies or something                                 like that the in terms of the roadmap                                 we're very magnet present the driving                                 mechanism would providing more                                 information that allows us to go through                                 and provide more information to better                                 things which are currently not right and                                 we can identify which packages are not                                 okay in uris method so that the matrix a                                 big language is clear to the actual crux                                 of what we've done Nick sauce yesterday                                 was talking about ensuring specific                                 charity                                 we generated this domain specific not to                                 be too incomplete we're looking at                                 identifying a particular safe or                                 maintaining spirits looking at just the                                 identifying with experience how can we                                 capture those states having me as a                                 person make sure that they're they're                                 consistent now this is an evolutionary                                 language we're looking at them keeping                                 keep web as we find within spirits that                                 don't adhere to what we have in the                                 midst of surprised at and a lot of                                 helpers to our friends from modeling                                 so traditional installation of the wrong                                 transaction you do- will be lots of pre                                 solvers that will eventually you get to                                 the wrong transaction so what we are                                 doing what for changing for the                                 mechanisms have model simulator so we                                 can so simulators                                                       then we're doing instead of having                                 prince or a personal approach to move                                 and promote having this idea of the                                 assault dsl brought pre and post and we                                 have an ordering mechanism that try to                                 make sure the things will happen and                                 regularly so here's a quick example this                                 is available printing framework and                                 looking at saying what about is what do                                 the templates look like okay and so                                 what's what's happening is that when                                 you're going through you'll have to                                 insert some tags at the moment this is a                                 man you mechanism with generating                                 automatic tools to actually detect a                                 template that considers the model so                                 we're putting these elements and so                                 there's a staffing stops and when one of                                 these meeting scripts fails once                                 something that we're going through is                                 not consistent what we can say is that                                 okay actually we got                                                     so this is what's captured you've got                                 the same data that's been into a sequel                                 like DB and then we can then get the                                 history of the packages and that's                                 already working we can see which                                 packages you saw which days what's                                 what's going on and what type of                                 operation so transactions what's happens                                 if it phones based on previous example                                 you see that there's four elements are                                 start matching stuff here what we can                                 see is that you've got start stop start                                 nothin so we failed inside will impact                                 installations maintain script didn't                                 work so what we can say is okay looking                                 at this something failing this let's try                                 and roll this back and then sometimes I                                 don't wear how far we go in that now                                 another part of this is actually                                 performing the robot we've identify                                 these templates these parts of the model                                 then we we actually find some elements                                 when you when you're going back you                                 won't actually need them in the robots                                 you'll be initializing service which                                 doesn't make sense in the wrong pack so                                 this is just a bit of a diagram to give                                 you a bit more of an overview of the                                 architectural explain a bit more we're                                 injecting dsl something to be tools at n                                 into those templates of you seeing in                                 the dsl stop stop template into the spec                                 file these will then be generating down                                 and packages that are do so now and Amy                                 these can then be tested by the the                                 simulator pass through laptop en all the                                 the installation is locked as we're                                 going through the installation and then                                 we can wait to provide a rollback and go                                 between the various system States with                                 ESO is Farkle                                 yes in terms of the d so how it's rated                                 it is if the the package maintains that                                 it isn't an appropriate looking into                                 putting my consummate if you make them                                 feel written scripts not in what will                                 happen is that it won't fail to maintain                                 script only if you have the support                                 thread macro expansion yeah we yes but                                 there's been another part on thank ya                                 shopping anymore finally though it's                                 it's it's a high an abstraction level so                                 it's not something at the level guardian                                 what are we looking at because this is                                 also most of Debian distribution and so                                 we've inserted it into deddington that                                 Debian packages as well yeah looking at                                 the control flow I'll answer this                                 question Damon a bit more in the few so                                 this is a flow of looking at seeing what                                 four tackles stay from where we are in                                 terms of we analyze the whole to                                 meet in scripts chosen was having most                                 common features that can be conveyed                                 great first version then we want to                                 modify the mint in scripts we're making                                 sure that for our distribution that's                                 all could hear it so we were doing                                 automatic tools to make sure it's                                 inspector would go bot what that in                                 and still something else who worked on                                 in terms of the multiple package                                 transaction and then we have the other                                 animals that I want to skip quickly over                                 this it's saying that it's okay if you                                 have the state time if you have your                                 packages and then you even saw what                                 where where is everything going in if                                 you wanted to roll back you have like                                 the time you're unhappy you want to put                                 forward or back you perform a roll back                                 by tucking out there it's a brought back                                 a particular tit and then transaction ID                                 and then you can roll back those actors                                 to previous systems activate so coming                                 up to the end of the talk so I just want                                 to talk about the the the last elements                                 of this which is that it's up to trans                                 actually protected packed arrangement                                 what what's important is that if you                                 have a system configuration state the                                 best you can do with Rob back is if you                                 have consistent data in the databases                                 you have the how your monitor systems                                 they modified and you ply that closed                                 system state multiplications on to the                                 original system state you'll hopefully                                 be able to get back to the final systems                                 they think what you have saved so part                                 of this is actually looking at                                 distributing this row back information                                 and how are we doing is this is a bit of                                 side work with doing                                 université catholique de Mervan looking                                 at actually the logs we have over all                                 the transaction IDs making sure that                                 those are those are captured so you'd                                 have an initial system state where you                                 have have many package that information                                 can capture they're looking at saying                                 well actually laughs in terms of                                 modifications this is what I did the                                 weather because she did to my system and                                 then sending that information out but                                 making sure that use of data is kept                                 secure and that's officially important                                 for configuration data which is a few if                                 you saw your settings a sequel of a                                 server it's going to be different than                                 how I've sent about and how do you make                                 sure that it's all unique the old parts                                 of this is actually storing the RPMs in                                 a distributed manner it's spent acted                                 before but we're looking at saying why                                 library curtains yeah if we're going to                                 do a rollback mechanism we're also going                                 after a lot of previous package versions                                 a lot more than before because we'll be                                 looking at a package version from two                                 years ago suddenly become relevant again                                 which before these tools possibly wasn't                                 so irrelevant okay so that the to do was                                 to find out the final elements we have a                                 single package for other back working                                 yourself so it's working so we have the                                 the sporting framework tool to generate                                 incident now they're the elements that                                 are still being worked on                                 the integration simulation faded data                                 the errors that come back from this                                 working in a manner that we can pull the                                 Java data lecture classes and then                                 automatic generation sauce sweets what                                 we'll have is we have some provisioning                                 tools for footpath generating these                                 these packages that is a protocol web in                                 space where we can actually modify how                                 these maintain scripts are how these                                 tags in them okay that's the time up so                                 conclusion and that's mine they can such                                 as quickly and making sure that we                                 release it and get the testing what's                                 the documentation because we want this                                 front of TT not only for our                                 distribution but for others looking to                                 take a gun and integrated into their                                 build system conclusion the Nicaragua                                 the packages yesterday ruff was talking                                 and another member of my cozy project                                 was talking about dating system Evan                                                                                                      packages you having more and more                                 problems and dependency into packages                                 into library version and growing so it's                                 something that it's not trivial there                                 are complex upgrade paths we have to                                 consider some of that happen by the                                 solvers some of the temp whale tools and                                 by having the model generation love this                                 we're looking to improve this                                 okay so that's that summarizes my talk                                 and hopefully yeah yes how is it we did                                 it by one okay this is about the                                 definition of the D somehow its designs                                 and half hour now we generated I went                                 quite quickly over over that part we                                 work with University kila generating                                 this language where we make those fruits                                 whatever on live in of you what what                                 we're doing is pulling that data to                                 generate find a higher arm of the most                                 views talents with within the transient                                 experience from that that's where we                                 start a formal analysis of the the                                 maintenance of flame so those elements                                 are represented in the model of the                                 system of the package of so we have a                                 very basic system view model where we                                 can say what this is actually the file                                 system the store this is how the how we                                 all be affecting system and we have                                 models of dependency data there is a                                 definition of all the men kou Zi webpage                                 that's that's                                 then download the definition and stop                                 writing semantics for it yeah that's all                                 for families                                 yes so if you wanted to start                                 contributing what what we have P                                 orbitals are simulated very second there                                 up there up on through probate code but                                 they are quite finish the bailiff                                 attendant mechanism so that's that's why                                 they're not actively promoting that part                                 of the language in terms of the talks                                 generation making sure that we have                                 everything here and consistent what                                 we're doing is making sure that we                                 provide you two generations of stuff                                 that we provide in the next couple of                                 months so the Dead abrel can then blue                                 and see how we're generating it and then                                 from there also we will have a weapon                                 space where you can look at safe if I'm                                 if I'm a maintainer I want to modify the                                 script session one flies how that's done                                 is this something bastardly not zombie                                 and technically the idea of rum row back                                 full of the men specifically it's not                                 our work is based on the knees put a                                 third but the the actual fundamental                                 ideas of place of any package effects                                 system so if you had it sealed something                                 where it's a catchment that could be                                 still travel across having tools for                                 generating are for                                 and taking silence and sunday okay thank                                 you very much thank you
YouTube URL: https://www.youtube.com/watch?v=TOG_jfYdgqc


