Title: Deployments We Can Believe In
Publication date: 2015-05-12
Playlist: Cloud Foundry Summit 2015
Description: 
	Deployments We Can Believe In - 01 Diego Lapiduz 720p
Captions: 
	00:00:00,030 --> 00:00:06,120
the government we are part of the United

00:00:03,419 --> 00:00:09,389
States digital service which is a family

00:00:06,120 --> 00:00:14,490
of different digital services inside

00:00:09,389 --> 00:00:18,500
agencies and the hnf group which we

00:00:14,490 --> 00:00:22,380
focus mostly in doing project work for

00:00:18,500 --> 00:00:25,230
all these agencies we are an open source

00:00:22,380 --> 00:00:30,570
team so everything that we do is out in

00:00:25,230 --> 00:00:34,980
the open and we are here to talk a bit

00:00:30,570 --> 00:00:38,600
about DevOps DevOps is hard I mean

00:00:34,980 --> 00:00:38,600
there's no way around it

00:00:39,970 --> 00:00:47,310
in government is a pain you might say

00:00:45,220 --> 00:00:52,150
well I mean I work at an enterprise and

00:00:47,310 --> 00:00:53,790
it's not easy either but trust me it is

00:00:52,150 --> 00:00:58,680
worse

00:00:53,790 --> 00:01:01,210
we have loss we have regulations we have

00:00:58,680 --> 00:01:04,059
security teams that go in and take a

00:01:01,210 --> 00:01:08,080
look at what we do and you know

00:01:04,059 --> 00:01:10,090
procuring people is usually really

00:01:08,080 --> 00:01:14,770
interesting to try to deploy something

00:01:10,090 --> 00:01:18,640
in the or so in the past if you wanted

00:01:14,770 --> 00:01:22,000
to deploy something the way that it will

00:01:18,640 --> 00:01:23,470
work is that you know you have your

00:01:22,000 --> 00:01:25,210
application you'd be applications there

00:01:23,470 --> 00:01:26,680
or you know it's mostly there and you

00:01:25,210 --> 00:01:29,590
say I want to publish it I want the

00:01:26,680 --> 00:01:34,180
public do you have access to this so you

00:01:29,590 --> 00:01:35,800
document what you have you presented to

00:01:34,180 --> 00:01:39,700
a change management board because yeah

00:01:35,800 --> 00:01:43,660
of course we have those you procure the

00:01:39,700 --> 00:01:47,259
service you know get bare metal and you

00:01:43,660 --> 00:01:49,899
set them up he computer damned if you're

00:01:47,259 --> 00:01:52,899
lucky there's some sort of utilization

00:01:49,899 --> 00:01:56,289
in there that you can run you apply your

00:01:52,899 --> 00:02:00,820
app configuration probably shell scripts

00:01:56,289 --> 00:02:04,240
or chef or something your deploy your

00:02:00,820 --> 00:02:06,310
application code you run a lot of

00:02:04,240 --> 00:02:08,490
security scans which can take a very

00:02:06,310 --> 00:02:08,490
long

00:02:09,550 --> 00:02:13,240
whole process hasn't submitted again for

00:02:11,530 --> 00:02:16,180
another some other people through you

00:02:13,240 --> 00:02:20,020
and finally you get an approval to

00:02:16,180 --> 00:02:24,910
launch this process this whole thing can

00:02:20,020 --> 00:02:29,410
take 14 months so good luck being agile

00:02:24,910 --> 00:02:31,810
there if you want to deploy a change to

00:02:29,410 --> 00:02:34,300
the application you still have to run

00:02:31,810 --> 00:02:38,220
through a lot of Hoops and you still

00:02:34,300 --> 00:02:40,660
have to get that approval which you know

00:02:38,220 --> 00:02:43,000
still prevents you from doing other work

00:02:40,660 --> 00:02:47,440
and be iterative and that kind of stuff

00:02:43,000 --> 00:02:50,620
so a lot of agencies are following the

00:02:47,440 --> 00:02:54,090
trends today and say there's this cloud

00:02:50,620 --> 00:02:57,520
thing going on we should get some cloud

00:02:54,090 --> 00:03:02,020
so we have this thing and it's just

00:02:57,520 --> 00:03:05,840
cloudier we instead of procuring servers

00:03:02,020 --> 00:03:07,849
which takes you know a couple weeks we

00:03:05,840 --> 00:03:10,280
nice turn somewhere but the whole

00:03:07,849 --> 00:03:14,330
process you know still in touch still

00:03:10,280 --> 00:03:15,950
takes a very long time so at 18f we'd

00:03:14,330 --> 00:03:20,290
like to change things we like to break

00:03:15,950 --> 00:03:23,569
the mold and they hate us but you know

00:03:20,290 --> 00:03:27,769
um so one of the things that we said

00:03:23,569 --> 00:03:29,030
okay we have these things that we do for

00:03:27,769 --> 00:03:30,800
every application that they look the

00:03:29,030 --> 00:03:32,480
same I mean when you're deploying an

00:03:30,800 --> 00:03:34,880
application pretty much it's the same

00:03:32,480 --> 00:03:37,400
thing every time the only thing that

00:03:34,880 --> 00:03:41,060
changes is the application so we said

00:03:37,400 --> 00:03:44,960
okay let's package

00:03:41,060 --> 00:03:47,510
they're only once and then your

00:03:44,960 --> 00:03:51,050
application needs to you know can be

00:03:47,510 --> 00:03:53,330
defined on top of that so it would carry

00:03:51,050 --> 00:03:55,730
a common architecture basically Big Ten

00:03:53,330 --> 00:03:59,900
am I documented everything that had died

00:03:55,730 --> 00:04:04,810
that am I and when the developers wanted

00:03:59,900 --> 00:04:04,810
to deploy a new app the issues

00:04:09,340 --> 00:04:14,060
there were some issues with this

00:04:12,140 --> 00:04:18,080
approach

00:04:14,060 --> 00:04:19,700
one of the biggest problems was that we

00:04:18,080 --> 00:04:25,490
didn't know what was going on so if you

00:04:19,700 --> 00:04:29,300
wanted to update leave a Simic who is

00:04:25,490 --> 00:04:33,310
using what where there was no inventory

00:04:29,300 --> 00:04:33,310
service of what we were running

00:04:38,620 --> 00:04:48,490
that so why do they have to write that

00:04:44,850 --> 00:04:51,820
billing we we can't give away stuff for

00:04:48,490 --> 00:04:55,360
free so it's a pretty big issue if we do

00:04:51,820 --> 00:04:58,360
so we actually create some billing

00:04:55,360 --> 00:05:02,050
options within the infrastructure that

00:04:58,360 --> 00:05:06,660
we had and that involved a lot of manual

00:05:02,050 --> 00:05:08,650
tagging and stuff that was really and

00:05:06,660 --> 00:05:11,800
developer productivity with all this

00:05:08,650 --> 00:05:15,039
took a pretty big hit because again

00:05:11,800 --> 00:05:17,169
they're writing manifests or recipes or

00:05:15,039 --> 00:05:21,370
whatever when they want to write their

00:05:17,169 --> 00:05:23,620
applications so we took that back and

00:05:21,370 --> 00:05:28,030
said this is not really working this

00:05:23,620 --> 00:05:30,760
kind of sucks let's try to figure out

00:05:28,030 --> 00:05:34,240
what's the best way of doing that and

00:05:30,760 --> 00:05:36,550
that brings us to a present it was

00:05:34,240 --> 00:05:40,530
pretty obvious at least for me and our

00:05:36,550 --> 00:05:40,530
group that path is

00:05:40,810 --> 00:05:46,630
price DevOps if you have multiple

00:05:44,400 --> 00:05:49,000
intelligence projects you probably want

00:05:46,630 --> 00:05:51,990
to pass so we said okay let's take a

00:05:49,000 --> 00:05:56,050
look at the passage that out there and

00:05:51,990 --> 00:05:58,960
see what we can deploy so we had a

00:05:56,050 --> 00:06:01,180
pretty big set of constraints one was

00:05:58,960 --> 00:06:04,090
that it was open source they had

00:06:01,180 --> 00:06:08,740
multiple language support that was deaf

00:06:04,090 --> 00:06:10,540
friendly and ops friendly and that it

00:06:08,740 --> 00:06:11,800
supporting multiple infrastructures we

00:06:10,540 --> 00:06:14,500
didn't want to have been door locking

00:06:11,800 --> 00:06:17,380
one of the big things in government is

00:06:14,500 --> 00:06:22,660
that we don't want to have our software

00:06:17,380 --> 00:06:24,010
be tied to one provider so these are the

00:06:22,660 --> 00:06:26,890
ones that are you know meet this

00:06:24,010 --> 00:06:33,460
criteria at least of the time that we

00:06:26,890 --> 00:06:36,090
were looking at them and you know we had

00:06:33,460 --> 00:06:36,090
a very funny

00:06:39,370 --> 00:06:45,340
you might have guessed which one so

00:06:43,630 --> 00:06:48,430
cloud foundry 4s it was you know again

00:06:45,340 --> 00:06:52,930
pretty clear that it was the platform

00:06:48,430 --> 00:06:54,250
that we wanted to go with basically you

00:06:52,930 --> 00:06:56,320
know it's just being production ready

00:06:54,250 --> 00:06:58,900
you know you will be amazed if you go

00:06:56,320 --> 00:07:01,870
talk to one of these other platforms

00:06:58,900 --> 00:07:04,300
they're like wow I'm not sure if you

00:07:01,870 --> 00:07:07,120
didn't shoot before this stuff we redid

00:07:04,300 --> 00:07:11,199
our platform wake up and it was like

00:07:07,120 --> 00:07:13,050
yeah Colleen it is multi-tenant it is

00:07:11,199 --> 00:07:15,250
enterprise friendly so like you know

00:07:13,050 --> 00:07:17,320
some people don't think that much were

00:07:15,250 --> 00:07:19,600
they you know youäôre spaces or

00:07:17,320 --> 00:07:25,389
organizations but for us it's amazing

00:07:19,600 --> 00:07:27,370
it's all baked in it has a you know the

00:07:25,389 --> 00:07:31,630
community and the foundation those are

00:07:27,370 --> 00:07:35,410
you know fantastic and there's one thing

00:07:31,630 --> 00:07:37,979
that has enough person you know I got 12

00:07:35,410 --> 00:07:37,979
and that's Paul

00:07:39,139 --> 00:07:43,300
what Boston is you know go check it out

00:07:44,620 --> 00:07:49,969
go boss

00:07:46,749 --> 00:07:52,009
it bosses the thing that it's allowing

00:07:49,969 --> 00:07:54,439
us to have open source manifests we have

00:07:52,009 --> 00:07:59,689
the description of our all our stack in

00:07:54,439 --> 00:08:01,610
our github repo we have everything that

00:07:59,689 --> 00:08:04,819
is going on I mean it's even if it's

00:08:01,610 --> 00:08:07,550
small it is there it allows us to do

00:08:04,819 --> 00:08:09,529
that multi deployment stuff that we

00:08:07,550 --> 00:08:11,330
wanted so like if you want to have a

00:08:09,529 --> 00:08:13,310
staging and the pressure environment we

00:08:11,330 --> 00:08:17,719
can do that but also it will let us do

00:08:13,310 --> 00:08:19,580
stuff like agency a can have its own

00:08:17,719 --> 00:08:23,330
cloud and it just be and have a separate

00:08:19,580 --> 00:08:26,539
one it has its own audit logs so we know

00:08:23,330 --> 00:08:29,300
what everyone is doing and there's this

00:08:26,539 --> 00:08:32,899
thing that if you if you use boss you

00:08:29,300 --> 00:08:35,120
know but it feels safe when you're

00:08:32,899 --> 00:08:37,959
running boss it tells you hey you're

00:08:35,120 --> 00:08:37,959
about to do this

00:08:38,570 --> 00:08:43,039
buying something in ålesund it tells you

00:08:41,029 --> 00:08:44,660
you won't buy buy no are you sure about

00:08:43,039 --> 00:08:46,519
that and you click yes all the time

00:08:44,660 --> 00:08:48,380
whatever but when you're deploying a

00:08:46,519 --> 00:08:50,389
platform you want to know exactly what

00:08:48,380 --> 00:08:52,010
are you doing and what is usually pretty

00:08:50,389 --> 00:08:54,440
safe I mean you know when something

00:08:52,010 --> 00:08:58,399
breaks it tells you about it and you can

00:08:54,440 --> 00:08:59,870
fix it and lastly it let's just do this

00:08:58,399 --> 00:09:02,510
layering thing that we were doing before

00:08:59,870 --> 00:09:05,540
so we have the stem cell that we can

00:09:02,510 --> 00:09:09,860
review and we can review jobs on a

00:09:05,540 --> 00:09:12,709
case-by-case basis so we decided okay

00:09:09,860 --> 00:09:17,019
let's have a real full-fledged pilot for

00:09:12,709 --> 00:09:20,870
cloud foundry and see how it works

00:09:17,019 --> 00:09:23,029
it would be an internal platform we

00:09:20,870 --> 00:09:24,860
would have to have multiple languages

00:09:23,029 --> 00:09:28,279
and multiple frameworks deployed in this

00:09:24,860 --> 00:09:32,480
platform we have to leverage AWS because

00:09:28,279 --> 00:09:34,070
that's where we were using before we

00:09:32,480 --> 00:09:37,959
have to create some small services

00:09:34,070 --> 00:09:37,959
inside it to see how the framework

00:09:38,570 --> 00:09:45,620
and it has to be able to deploy

00:09:41,810 --> 00:09:47,150
production ups so within this Python

00:09:45,620 --> 00:09:49,670
even though we knew it was going to be a

00:09:47,150 --> 00:09:51,620
pilot we wanted to have applications

00:09:49,670 --> 00:09:55,730
that are gonna have real traffic on it

00:09:51,620 --> 00:09:59,300
and lastly we have a very small team for

00:09:55,730 --> 00:10:01,730
those it's just three people and we we

00:09:59,300 --> 00:10:04,400
had to say to reduce the load on the

00:10:01,730 --> 00:10:06,620
team we were hammered before we were

00:10:04,400 --> 00:10:08,240
doing this pilot and it didn't make

00:10:06,620 --> 00:10:12,490
sense before something that would have

00:10:08,240 --> 00:10:16,130
more load on the team so has it been

00:10:12,490 --> 00:10:19,280
awesome we have been running this

00:10:16,130 --> 00:10:21,350
platform for five months we have about a

00:10:19,280 --> 00:10:27,620
hundred app instances which is not a lot

00:10:21,350 --> 00:10:29,690
but it's something about 50 users oh and

00:10:27,620 --> 00:10:34,430
this is our internal stuff I mean only

00:10:29,690 --> 00:10:36,110
18f we have some production ups that I

00:10:34,430 --> 00:10:40,160
can't really talk too much about but

00:10:36,110 --> 00:10:43,550
there's they're there the user

00:10:40,160 --> 00:10:45,230
management that we have today is a

00:10:43,550 --> 00:10:48,380
hundred times better than what we had

00:10:45,230 --> 00:10:51,590
before basically when someone left the

00:10:48,380 --> 00:10:56,210
company on the company the agency before

00:10:51,590 --> 00:10:59,650
it was a pain to get rid of someone but

00:10:56,210 --> 00:11:03,199
now it's just you know UAC the lead user

00:10:59,650 --> 00:11:08,089
and we have

00:11:03,199 --> 00:11:11,029
we are able to say hey

00:11:08,089 --> 00:11:16,189
what should we build this agency and

00:11:11,029 --> 00:11:16,970
it's just right there developers love

00:11:16,189 --> 00:11:20,029
how hungry

00:11:16,970 --> 00:11:23,959
our team of the element just loves it I

00:11:20,029 --> 00:11:27,290
asked him around for quotes about it but

00:11:23,959 --> 00:11:29,889
um they were asking developers for

00:11:27,290 --> 00:11:32,629
quotes it's tricky

00:11:29,889 --> 00:11:37,370
there was one serious one which is you

00:11:32,629 --> 00:11:39,879
know about how faster we're doing ATS

00:11:37,370 --> 00:11:42,829
now a theosis the authority to operate

00:11:39,879 --> 00:11:46,149
basically the approval stamp to get a

00:11:42,829 --> 00:11:49,910
project out in the open

00:11:46,149 --> 00:11:52,040
some projects before - dree and a lot of

00:11:49,910 --> 00:11:54,379
other bureaucratic hacks this is no

00:11:52,040 --> 00:11:56,569
Jessica friendly would take about a year

00:11:54,379 --> 00:12:00,079
and now it dirty know what two or three

00:11:56,569 --> 00:12:07,149
days and that's pretty cool and then do

00:12:00,079 --> 00:12:07,149
we have some random other quotes but

00:12:09,750 --> 00:12:15,880
so you know if you take the club on your

00:12:13,089 --> 00:12:17,920
way from us we will hurt you or we Cloud

00:12:15,880 --> 00:12:19,779
Foundry I went from punching myself in

00:12:17,920 --> 00:12:28,570
the face to punching other people in the

00:12:19,779 --> 00:12:32,470
face so what did we learn so far

00:12:28,570 --> 00:12:35,280
we learned that developer happiness and

00:12:32,470 --> 00:12:40,420
productivity can be pretty

00:12:35,280 --> 00:12:43,000
deploy stuff so if their deployment

00:12:40,420 --> 00:12:45,610
environment it's awful and it takes a

00:12:43,000 --> 00:12:48,180
lot of work then they are not gonna be

00:12:45,610 --> 00:12:48,180
happy about it

00:12:48,240 --> 00:12:51,790
how many common architecture is a big

00:12:51,190 --> 00:12:54,220
plus

00:12:51,790 --> 00:12:56,410
co-founder has its own mutations you can

00:12:54,220 --> 00:12:59,110
only 412 factor apps right now with

00:12:56,410 --> 00:13:03,820
Diego no with me we're gonna be able to

00:12:59,110 --> 00:13:06,820
deploy other things but these 12 factors

00:13:03,820 --> 00:13:09,700
limitation is great because all our apps

00:13:06,820 --> 00:13:12,460
now look the same they look pretty

00:13:09,700 --> 00:13:15,040
similar we have a much better

00:13:12,460 --> 00:13:17,230
utilization rate on our servers before

00:13:15,040 --> 00:13:20,560
we were a spinning you know redundant

00:13:17,230 --> 00:13:23,170
stacks or whatever that had no usage

00:13:20,560 --> 00:13:27,610
chart at all and we Club foundry they

00:13:23,170 --> 00:13:29,260
are a lot better one of the important

00:13:27,610 --> 00:13:31,900
things that when you're deploying how

00:13:29,260 --> 00:13:35,280
hungry is said you should spit for your

00:13:31,900 --> 00:13:35,280
manifests we learned this

00:13:35,890 --> 00:13:40,790
it was awful maintaining like you know

00:13:38,930 --> 00:13:42,680
that huge Yama file if you don't know

00:13:40,790 --> 00:13:45,260
what Spearfish is basically a tool to

00:13:42,680 --> 00:13:50,540
wrangle Yama files the configuration for

00:13:45,260 --> 00:13:53,120
foundry it is what CF release uses and

00:13:50,540 --> 00:13:56,870
it you know you need you just need it if

00:13:53,120 --> 00:13:58,010
you're running a foundry and there are

00:13:56,870 --> 00:13:59,750
some other things that we learn it's

00:13:58,010 --> 00:14:02,150
like you need to document everything as

00:13:59,750 --> 00:14:05,660
you go because some stuff you don't know

00:14:02,150 --> 00:14:07,550
how to do it again if you don't and it's

00:14:05,660 --> 00:14:08,870
also very important for your team for

00:14:07,550 --> 00:14:11,090
your development team for your

00:14:08,870 --> 00:14:14,590
operations team to see how to do things

00:14:11,090 --> 00:14:17,090
and how you're how you were doing them

00:14:14,590 --> 00:14:19,070
it's also a very important go to back I

00:14:17,090 --> 00:14:20,510
mean whatever you're doing we're in an

00:14:19,070 --> 00:14:25,070
open-source community it's very

00:14:20,510 --> 00:14:26,390
important to contribute back and you

00:14:25,070 --> 00:14:28,120
know communicate communicate with your

00:14:26,390 --> 00:14:31,370
team communicate with the community and

00:14:28,120 --> 00:14:32,210
don't be afraid I mean this is a very

00:14:31,370 --> 00:14:35,450
welcoming community

00:14:32,210 --> 00:14:37,570
I made thousands of dumb questions about

00:14:35,450 --> 00:14:37,570
it

00:14:37,920 --> 00:14:41,970
the other thing is that don't be afraid

00:14:39,990 --> 00:14:44,279
of going in the source code taking a

00:14:41,970 --> 00:14:47,670
look at things there's no magic going on

00:14:44,279 --> 00:14:50,700
I mean I I found it again the hard way

00:14:47,670 --> 00:14:54,899
deeply I'm like the hello I'm not here

00:14:50,700 --> 00:14:58,500
and you know it's all there so this is

00:14:54,899 --> 00:15:02,579
all great and we do want to take it

00:14:58,500 --> 00:15:05,970
further from here we want to see what

00:15:02,579 --> 00:15:09,839
goes on with foundry and our platform

00:15:05,970 --> 00:15:11,040
but we do want to expand in it we have a

00:15:09,839 --> 00:15:13,260
couple things in progress right now

00:15:11,040 --> 00:15:18,589
which are you know a lot of CLI plugins

00:15:13,260 --> 00:15:21,029
for the ECF CLI so you know to improve

00:15:18,589 --> 00:15:24,060
productivity for developers they're

00:15:21,029 --> 00:15:26,100
pretty simple we want to improve our

00:15:24,060 --> 00:15:30,480
monitoring right now it kind of sucks

00:15:26,100 --> 00:15:31,980
but it's gonna be better one of the

00:15:30,480 --> 00:15:33,750
things that I mentioned before was that

00:15:31,980 --> 00:15:36,589
we are in Amazon and we want to leverage

00:15:33,750 --> 00:15:36,589
their services

00:15:38,640 --> 00:15:45,090
spoker so we can have databases created

00:15:42,050 --> 00:15:47,270
from the platform for our developers and

00:15:45,090 --> 00:15:47,270

YouTube URL: https://www.youtube.com/watch?v=es-gyjMEU1g


