Title: Conversation with Matthew Curry, Director of Cloud Engineering, Allstate Insurance Co.
Publication date: 2018-04-19
Playlist: Cloud Foundry Summit NA 2018
Description: 
	Conversation with Matthew Curry, Director of Cloud Engineering, Allstate Insurance Co.

About Matthew Curry
Director of Cloud Engineering, Allstate Insurance Co.
Matt is a director of Infrastructure Products at Allstate. He maintains a regular presence on multiple podcasts and is an avid Twitter freak.

https://www.cloudfoundry.org/
Captions: 
	00:00:00,740 --> 00:00:05,580
so next up we have although we're

00:00:04,770 --> 00:00:07,560
running a little bit of ahead of

00:00:05,580 --> 00:00:10,469
schedule Matt so it's not at the time

00:00:07,560 --> 00:00:11,910
that you post it on Twitter but Matt

00:00:10,469 --> 00:00:13,740
Curry's going to join me the director of

00:00:11,910 --> 00:00:26,130
cloud engineering at Allstate to talk a

00:00:13,740 --> 00:00:27,779
little bit about safety first that's a

00:00:26,130 --> 00:00:30,840
good song if you're all wondering what

00:00:27,779 --> 00:00:31,800
the joke is this is a oh you changed it

00:00:30,840 --> 00:00:34,530
sorry

00:00:31,800 --> 00:00:35,390
yeah we had to change the slide last

00:00:34,530 --> 00:00:37,620
minute change

00:00:35,390 --> 00:00:40,469
apparently is a comp steam did not

00:00:37,620 --> 00:00:42,480
approve the first one yeah so I had a

00:00:40,469 --> 00:00:43,829
picture of my daughter standing next to

00:00:42,480 --> 00:00:47,910
a giant pile of fireworks and they

00:00:43,829 --> 00:00:50,280
weren't like so excited about that which

00:00:47,910 --> 00:00:52,309
is fine because we're all about you know

00:00:50,280 --> 00:00:56,160
type feedback loops and testing

00:00:52,309 --> 00:00:58,800
adjusting on the fly but I I wanted to

00:00:56,160 --> 00:01:01,649
talk about this idea of deploying with

00:00:58,800 --> 00:01:03,899
safety and the parallel of kind of

00:01:01,649 --> 00:01:06,659
firing off fireworks right so we have a

00:01:03,899 --> 00:01:07,680
number of occasions throughout the year

00:01:06,659 --> 00:01:10,040
depending on the country that you're

00:01:07,680 --> 00:01:13,170
from where we enjoy fireworks and

00:01:10,040 --> 00:01:15,689
they're beautiful and if done by

00:01:13,170 --> 00:01:19,560
professionals they can be well

00:01:15,689 --> 00:01:23,310
choreographed and they we all enjoy them

00:01:19,560 --> 00:01:25,080
right and if you watch like YouTube

00:01:23,310 --> 00:01:28,259
channels you can also see that they can

00:01:25,080 --> 00:01:29,970
go terribly wrong and so it's important

00:01:28,259 --> 00:01:33,420
that we have the right precautions in

00:01:29,970 --> 00:01:36,930
place in order to ensure that we enjoy

00:01:33,420 --> 00:01:39,060
these things with with safety and using

00:01:36,930 --> 00:01:42,570
the structured platform like cloud

00:01:39,060 --> 00:01:44,250
foundry we at allstate have created an

00:01:42,570 --> 00:01:45,780
environment where our developers can

00:01:44,250 --> 00:01:48,000
move quickly but they do so with safety

00:01:45,780 --> 00:01:51,390
and so when you think about this

00:01:48,000 --> 00:01:53,670
metaphor of your workload to like

00:01:51,390 --> 00:01:55,920
different types of fireworks you have

00:01:53,670 --> 00:01:58,040
like the sparklers I might let my kids

00:01:55,920 --> 00:02:01,950
play with the sparklers then you have

00:01:58,040 --> 00:02:03,390
like the Box you get from Costco which

00:02:01,950 --> 00:02:05,009
like my neighbor was really excited

00:02:03,390 --> 00:02:06,509
about this year so he's like and that

00:02:05,009 --> 00:02:09,000
was actually the picture was the used

00:02:06,509 --> 00:02:10,050
box with like everything in it it was

00:02:09,000 --> 00:02:13,310
bigger than his child

00:02:10,050 --> 00:02:15,530
it was taller than her which is fine

00:02:13,310 --> 00:02:16,819
I mean and we shoot them off in the

00:02:15,530 --> 00:02:18,080
street and like that's a little more

00:02:16,819 --> 00:02:19,970
dangerous probably not gonna let the

00:02:18,080 --> 00:02:22,520
kids like light the fireworks right that

00:02:19,970 --> 00:02:26,060
would be bad and you're responsible but

00:02:22,520 --> 00:02:27,770
and then you have you know the crazy

00:02:26,060 --> 00:02:29,989
like everybody has the crazy neighbor

00:02:27,770 --> 00:02:32,420
like everybody's got one right and and

00:02:29,989 --> 00:02:34,880
this is the person that invariably ends

00:02:32,420 --> 00:02:37,459
up on YouTube like goes to the back of

00:02:34,880 --> 00:02:40,099
the house and like pulls out this giant

00:02:37,459 --> 00:02:41,630
pipe and it's like it says mortar shell

00:02:40,099 --> 00:02:45,500
on it and you're like that sounds like a

00:02:41,630 --> 00:02:47,150
weapon not like like something to that

00:02:45,500 --> 00:02:49,370
I'm gonna enjoy in my backyard so please

00:02:47,150 --> 00:02:51,769
like keep that away from my children my

00:02:49,370 --> 00:02:54,110
house like all things on it down the

00:02:51,769 --> 00:02:56,090
street yeah and we all run like

00:02:54,110 --> 00:02:58,280
workloads like that like usually it's

00:02:56,090 --> 00:02:59,690
like innovation or something to that

00:02:58,280 --> 00:03:02,209
nature where it's like we just want to

00:02:59,690 --> 00:03:04,819
do the craziest thing you could possibly

00:03:02,209 --> 00:03:06,799
think of in the name of innovation and

00:03:04,819 --> 00:03:10,640
it will be fine and we have to have

00:03:06,799 --> 00:03:16,370
these environments that provide safety

00:03:10,640 --> 00:03:17,989
mechanisms to our developers and to our

00:03:16,370 --> 00:03:20,600
enterprises so that we can be sure like

00:03:17,989 --> 00:03:24,230
the crazy person doesn't ruin it for

00:03:20,600 --> 00:03:25,160
everyone or maybe just a moderately less

00:03:24,230 --> 00:03:27,230
than sane person

00:03:25,160 --> 00:03:29,000
yeah with a really great idea that might

00:03:27,230 --> 00:03:31,069
work and it might not might work and

00:03:29,000 --> 00:03:33,019
might not but you know the point kind of

00:03:31,069 --> 00:03:34,100
being is you know like the fireworks the

00:03:33,019 --> 00:03:37,040
different workloads carry different

00:03:34,100 --> 00:03:38,840
levels of risk so if things go wrong the

00:03:37,040 --> 00:03:41,750
impact to customers might be different

00:03:38,840 --> 00:03:43,489
depending on what it is and so what

00:03:41,750 --> 00:03:45,109
we've done at Allstate is we've

00:03:43,489 --> 00:03:47,630
open-sourced a piece of software called

00:03:45,109 --> 00:03:49,250
deploy a dactyl which is really hard to

00:03:47,630 --> 00:03:50,930
pronounce tell me a little bit about

00:03:49,250 --> 00:03:52,940
that name because I'm I keep getting

00:03:50,930 --> 00:03:54,530
hung up on the name yeah me too I

00:03:52,940 --> 00:03:57,590
haven't figured out how to spell it yet

00:03:54,530 --> 00:03:59,600
still I really state like a year ago but

00:03:57,590 --> 00:04:01,400
it was about the only thing like we went

00:03:59,600 --> 00:04:05,000
through about a hundred names with legal

00:04:01,400 --> 00:04:07,430
and it was just like used used like too

00:04:05,000 --> 00:04:10,010
close to this and so finally we were

00:04:07,430 --> 00:04:12,380
like okay what are what is the craziest

00:04:10,010 --> 00:04:14,480
off-the-wall name we can possibly come

00:04:12,380 --> 00:04:15,799
up with to get through approval so that

00:04:14,480 --> 00:04:18,639
we can open-source it because nobody

00:04:15,799 --> 00:04:23,270
here has ever done that never I'm sure

00:04:18,639 --> 00:04:24,260
and so so that that's the name and Andy

00:04:23,270 --> 00:04:26,870
is going to be talking about that on

00:04:24,260 --> 00:04:27,370
Friday so if you want more detail on how

00:04:26,870 --> 00:04:32,000
we're

00:04:27,370 --> 00:04:34,190
doing this this safe environment then

00:04:32,000 --> 00:04:35,600
you can go check out the details of his

00:04:34,190 --> 00:04:39,230
sessions and he's going to talk about

00:04:35,600 --> 00:04:41,870
deploy dactyl but the the core thing is

00:04:39,230 --> 00:04:44,660
there are certain pieces that need to be

00:04:41,870 --> 00:04:47,240
in place when our developers deploy to

00:04:44,660 --> 00:04:49,310
enter enterprise cloud right so for

00:04:47,240 --> 00:04:51,440
example we don't want developers making

00:04:49,310 --> 00:04:52,760
changes in production or anyone making

00:04:51,440 --> 00:04:55,460
changes in production for that matter

00:04:52,760 --> 00:05:01,880
without a change record that you talked

00:04:55,460 --> 00:05:04,130
about exploding things in the air mixed

00:05:01,880 --> 00:05:06,590
with alcohol that sounds bad like who

00:05:04,130 --> 00:05:07,970
needs gravity it sounds bad what could

00:05:06,590 --> 00:05:09,950
possibly go wrong what could go wrong

00:05:07,970 --> 00:05:11,600
you talked about making changes in

00:05:09,950 --> 00:05:14,660
production without change control also

00:05:11,600 --> 00:05:18,110
sounds bad turns out people do both so

00:05:14,660 --> 00:05:20,120
we want to ensure that in our

00:05:18,110 --> 00:05:23,470
environment we have safeguards to make

00:05:20,120 --> 00:05:26,060
sure that our teams are acting

00:05:23,470 --> 00:05:29,030
fulfilling their obligations in terms of

00:05:26,060 --> 00:05:31,250
what we require of them whether it be

00:05:29,030 --> 00:05:34,910
audit compliance regulatory compliance

00:05:31,250 --> 00:05:37,670
having artifacts traceability and so

00:05:34,910 --> 00:05:40,760
we've used deploy dactyl basically as

00:05:37,670 --> 00:05:42,920
this eventing system that emits events

00:05:40,760 --> 00:05:45,770
as we deploy to our different Cloud

00:05:42,920 --> 00:05:48,920
Foundry environments and what it enables

00:05:45,770 --> 00:05:50,360
our developers to do is think about I

00:05:48,920 --> 00:05:51,920
want to deploy to production I want to

00:05:50,360 --> 00:05:54,770
deploy to UAT I want to deploy to

00:05:51,920 --> 00:05:56,000
pre-production and each of those can

00:05:54,770 --> 00:05:58,100
actually be multiple Cloud Foundry

00:05:56,000 --> 00:06:00,530
environments so for example production

00:05:58,100 --> 00:06:02,300
runs across multiple regions we don't

00:06:00,530 --> 00:06:05,470
really want our developers to have to

00:06:02,300 --> 00:06:08,780
think about like I want to deploy to

00:06:05,470 --> 00:06:10,550
region a and region B and region C

00:06:08,780 --> 00:06:12,530
because I need that level of redundancy

00:06:10,550 --> 00:06:16,000
we just want them to think about I want

00:06:12,530 --> 00:06:18,650
to push to prod and and enable them to

00:06:16,000 --> 00:06:21,980
deal with that at that level of

00:06:18,650 --> 00:06:24,350
abstraction and one of the challenges we

00:06:21,980 --> 00:06:26,000
had when we first created it is as the

00:06:24,350 --> 00:06:28,100
platform operators and infrastructure

00:06:26,000 --> 00:06:31,480
folks we were like this is great

00:06:28,100 --> 00:06:34,940
people will totally want to use this and

00:06:31,480 --> 00:06:37,520
our developers were like I have like 400

00:06:34,940 --> 00:06:40,969
lines of groovy in like a Gradle script

00:06:37,520 --> 00:06:45,379
it's fine it's really fine totally fine

00:06:40,969 --> 00:06:47,089
like it's not fine to us and so we had

00:06:45,379 --> 00:06:49,069
to create an incentive for them to

00:06:47,089 --> 00:06:51,679
actually use to play dactyl and so what

00:06:49,069 --> 00:06:55,009
we did is using the event system we were

00:06:51,679 --> 00:06:58,219
able to basically take the change record

00:06:55,009 --> 00:07:00,110
and automate that as a part of

00:06:58,219 --> 00:07:01,399
production deploys so that the

00:07:00,110 --> 00:07:04,189
developers could just deploy through the

00:07:01,399 --> 00:07:06,439
CI pipeline and the change record is all

00:07:04,189 --> 00:07:07,789
automatically cut validated like all the

00:07:06,439 --> 00:07:09,709
cloud foundry logs from the different

00:07:07,789 --> 00:07:11,419
environments get sucked into it and we

00:07:09,709 --> 00:07:14,719
mark the change as successful or and

00:07:11,419 --> 00:07:16,639
unsuccessful and developers were like

00:07:14,719 --> 00:07:18,499
wait if I use this I don't have to cut

00:07:16,639 --> 00:07:20,089
change records as it turns out they

00:07:18,499 --> 00:07:25,159
don't really like to change records who

00:07:20,089 --> 00:07:26,419
knew and so that's how we got people to

00:07:25,159 --> 00:07:28,729
start using it and then we started

00:07:26,419 --> 00:07:31,819
attaching additional functions onto that

00:07:28,729 --> 00:07:34,459
so now we're using it to test things

00:07:31,819 --> 00:07:36,169
like did you deploy this into a lower

00:07:34,459 --> 00:07:39,709
environment before deploying it to prod

00:07:36,169 --> 00:07:42,199
or have you had a vulnerability scan so

00:07:39,709 --> 00:07:44,149
we're using it to you know tying in to

00:07:42,199 --> 00:07:47,059
what Molly just talked about shift

00:07:44,149 --> 00:07:49,429
security to the left and now making sure

00:07:47,059 --> 00:07:51,349
that those vulnerability scans like the

00:07:49,429 --> 00:07:54,349
developers no longer have to worry about

00:07:51,349 --> 00:07:56,360
going into those tools configuring them

00:07:54,349 --> 00:07:59,779
configuring their access setting all of

00:07:56,360 --> 00:08:01,699
that up instead they deploy and all of

00:07:59,779 --> 00:08:04,550
that stuff happens and then they get a

00:08:01,699 --> 00:08:07,069
nice little message after the deploy

00:08:04,550 --> 00:08:08,539
that says hey we've submitted this

00:08:07,069 --> 00:08:09,919
workload for a vulnerability scan like

00:08:08,539 --> 00:08:12,949
if you want to look at the results then

00:08:09,919 --> 00:08:15,199
here's where you will find them and it

00:08:12,949 --> 00:08:17,779
really kind of takes a lot of this toil

00:08:15,199 --> 00:08:20,629
out of their hands and enables them to

00:08:17,779 --> 00:08:24,199
move with speed and safety safety first

00:08:20,629 --> 00:08:26,169
yeah so you know at all-state we protect

00:08:24,199 --> 00:08:28,339
our customers from life's uncertainties

00:08:26,169 --> 00:08:30,379
the way that we can think about this is

00:08:28,339 --> 00:08:32,599
we're trying to protect our developers

00:08:30,379 --> 00:08:35,719
from deployment uncertainties or life's

00:08:32,599 --> 00:08:37,519
uncertainties the company brand I like

00:08:35,719 --> 00:08:38,439
that hey you know that's what we're here

00:08:37,519 --> 00:08:41,209
for

00:08:38,439 --> 00:08:42,649
well that is so awesome and so we're

00:08:41,209 --> 00:08:44,420
gonna talk about it later this week to

00:08:42,649 --> 00:08:48,529
show how to use it is it available and

00:08:44,420 --> 00:08:51,439
open source it is it's on github the

00:08:48,529 --> 00:08:53,059
will post the link and andy has a

00:08:51,439 --> 00:08:54,769
reference to the link in his talk as

00:08:53,059 --> 00:08:57,619
well but yes you

00:08:54,769 --> 00:09:00,499
download it and play with it we'd love

00:08:57,619 --> 00:09:03,170
the feedback definitely start if you get

00:09:00,499 --> 00:09:04,519
an opportunity we love to try and get

00:09:03,170 --> 00:09:06,350
the community more and more engaged with

00:09:04,519 --> 00:09:08,300
that we think it's a problem that not

00:09:06,350 --> 00:09:10,639
just we have but others would benefit

00:09:08,300 --> 00:09:12,980
from our solution so a lot more that we

00:09:10,639 --> 00:09:14,540
can share the better that's awesome

00:09:12,980 --> 00:09:15,890
thank you so much Matt for coming and

00:09:14,540 --> 00:09:23,049
sharing this with us today

00:09:15,890 --> 00:09:23,049

YouTube URL: https://www.youtube.com/watch?v=Q_nA5GN6F0c


