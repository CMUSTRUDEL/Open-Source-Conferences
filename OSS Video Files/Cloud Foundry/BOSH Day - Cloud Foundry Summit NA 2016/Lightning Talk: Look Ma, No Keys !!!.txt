Title: Lightning Talk: Look Ma, No Keys !!!
Publication date: 2016-05-30
Playlist: BOSH Day - Cloud Foundry Summit NA 2016
Description: 
	Sean Keery, Solutions Architect at Pivotal shares his Lightning Talk: Look Ma, No Keys !!!Â 

Sean Keery began hacking obscure video game systems at the age of 13. Sean then developed interpersonal skills while teaching snowboarding. Nowadays we've got Cloud Foundry, choreography, containers and plenty of io.
Captions: 
	00:00:00,060 --> 00:00:10,559
hi I'm Shaun kiri I'm a enterprise yeah

00:00:04,620 --> 00:00:12,059
mall architect at pivotal how many guys

00:00:10,559 --> 00:00:15,450
out there keep your manifest in source

00:00:12,059 --> 00:00:18,570
control or parts of your manifests okay

00:00:15,450 --> 00:00:20,100
how many keep them on github who's ever

00:00:18,570 --> 00:00:23,070
pushed a manifest to github with the

00:00:20,100 --> 00:00:24,810
keys in it yeah you do a quick search

00:00:23,070 --> 00:00:31,380
out on github you'll find all kinds of

00:00:24,810 --> 00:00:33,059
AWS access keys ok it was an accident

00:00:31,380 --> 00:00:37,140
right we had an accident

00:00:33,059 --> 00:00:40,500
we had a six-figure bill from Amazon we

00:00:37,140 --> 00:00:43,050
don't want to do this ever right so

00:00:40,500 --> 00:00:44,760
Amazon wants to help us with this they

00:00:43,050 --> 00:00:49,489
have this great tool called I am who's a

00:00:44,760 --> 00:00:57,329
Amazon user out here who uses I am

00:00:49,489 --> 00:01:00,420
instance profiles ok I'm telling you you

00:00:57,329 --> 00:01:05,909
need to Nick ok what instance profiles

00:01:00,420 --> 00:01:07,920
do what instance profiles let us do is

00:01:05,909 --> 00:01:11,729
take that high level key right that we

00:01:07,920 --> 00:01:15,630
want no one to have right assign it to

00:01:11,729 --> 00:01:16,830
an instance with the role ok that role

00:01:15,630 --> 00:01:20,670
is going to give that instance certain

00:01:16,830 --> 00:01:23,610
permissions right then that instance can

00:01:20,670 --> 00:01:25,830
create this short term key called an STS

00:01:23,610 --> 00:01:28,740
key right that's just valid for the

00:01:25,830 --> 00:01:30,650
single action that you want it to do

00:01:28,740 --> 00:01:33,930
right so if I want to scale with Bosch

00:01:30,650 --> 00:01:36,810
my instance has permission to do that ok

00:01:33,930 --> 00:01:38,159
if you want a cloud controller right

00:01:36,810 --> 00:01:41,040
that has permission to write to an s3

00:01:38,159 --> 00:01:42,600
bucket you can do that right if you have

00:01:41,040 --> 00:01:45,570
a go router that wants to register with

00:01:42,600 --> 00:01:48,240
your ELB you can have dedicated instance

00:01:45,570 --> 00:01:53,159
role permissions for those things by

00:01:48,240 --> 00:01:56,310
signing them through AWS I am ok so SDS

00:01:53,159 --> 00:01:58,320
stands for security token services it's

00:01:56,310 --> 00:02:00,119
a temporary security credential right

00:01:58,320 --> 00:02:02,369
your security guys you tell them you're

00:02:00,119 --> 00:02:03,840
using a least privileged model they're

00:02:02,369 --> 00:02:06,719
going to be super happy with that and

00:02:03,840 --> 00:02:09,810
they expire right we have an audit

00:02:06,719 --> 00:02:11,489
record of the key we used we can go back

00:02:09,810 --> 00:02:13,680
and say ok this key got generated from

00:02:11,489 --> 00:02:15,659
that key we know where everything came

00:02:13,680 --> 00:02:16,709
from but you can't reuse that key we

00:02:15,659 --> 00:02:19,739
don't have to worry about taking it out

00:02:16,709 --> 00:02:23,189
of our logs awesome because taking

00:02:19,739 --> 00:02:25,200
outta logs sucks oh they can went too

00:02:23,189 --> 00:02:28,319
far there okay so this is how we would a

00:02:25,200 --> 00:02:30,269
basic workflow here it would deploy a

00:02:28,319 --> 00:02:32,969
jump box or a bastion host whatever you

00:02:30,269 --> 00:02:35,310
guys want to call that from AWS with

00:02:32,969 --> 00:02:38,939
that roll from there we do our mash in

00:02:35,310 --> 00:02:42,689
it to create our boss and our instance

00:02:38,939 --> 00:02:45,180
profiles into the instance groups and

00:02:42,689 --> 00:02:46,709
deploy or we could just inherit that

00:02:45,180 --> 00:02:48,359
bosh key if that's something you want to

00:02:46,709 --> 00:02:50,849
use right for me that's a little too

00:02:48,359 --> 00:02:53,269
much on the permissions side I'd rather

00:02:50,849 --> 00:02:55,500
have fewer permissions than that

00:02:53,269 --> 00:02:58,769
Amazon also gives us some other features

00:02:55,500 --> 00:03:01,260
that allow us to leverage Justin Smith's

00:02:58,769 --> 00:03:02,510
model here and then the nice circle do

00:03:01,260 --> 00:03:08,040
you guys remember what that was called

00:03:02,510 --> 00:03:10,500
that Sam Sam circle I thought I'd throw

00:03:08,040 --> 00:03:13,409
all that stuff in there right we can

00:03:10,500 --> 00:03:15,780
quickly swap out all our keys using

00:03:13,409 --> 00:03:18,150
Amazon mechanisms right we can rotate

00:03:15,780 --> 00:03:20,609
those keys quickly we can repay our

00:03:18,150 --> 00:03:24,120
whole thing and get new keys and then we

00:03:20,609 --> 00:03:25,949
can record that in the Amazon CloudWatch

00:03:24,120 --> 00:03:27,329
log send it out through your salon

00:03:25,949 --> 00:03:29,299
server whatever you guys want to do with

00:03:27,329 --> 00:03:31,680
that

00:03:29,299 --> 00:03:33,930
alright that's some references for the

00:03:31,680 --> 00:03:38,250
documentation this I don't know if this

00:03:33,930 --> 00:03:40,409
is a Bosch 2.0 feature actually it's

00:03:38,250 --> 00:03:43,049
been out for a while you can find some

00:03:40,409 --> 00:03:44,459
more information about it out there and

00:03:43,049 --> 00:03:47,150
then there's some information if you

00:03:44,459 --> 00:03:47,150
want to contact me

00:03:47,570 --> 00:03:51,300

YouTube URL: https://www.youtube.com/watch?v=x8d2umsXaYc


