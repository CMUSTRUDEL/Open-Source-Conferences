Title: OSDC 2014: Jonathan Clarke - Rudder
Publication date: 2015-01-05
Playlist: OSDC 2014 | Open Source Data Center Conference
Description: 
	As a Configuration Management [CM] "champion", trying to gain traction in your environment can be challenging when the level of expertise necessary is in short supply. We built Rudder so that the CM champion would not need to clone themselves. Instead, he or she is able to use a tool to manage configuration data, expose key parameters to the rest of their team, reduce complexity of configuration changes, and put in place role-based workflow for change control.

Rudder is an open source configuration management solution, using lightweight agents (based on CFEngine) controlled via a central management point. Using Rudder, I will show how this approach enables the team to fully participate in the practice of Configuration Management, keep track of changes and history, exploit change access / control, and facilitate knowledge sharing (sharing intentions in design via desired configuration state, maintaining a record of preferred configurations) without intervention of CM champion.

Find the full program and all slides here: 
http://www.netways.de/osdc/osdc2014/programm
Captions: 
	00:00:13,600 --> 00:00:17,500
our next speaker is jonathan clarke and

00:00:15,760 --> 00:00:20,460
he's giving a talk about rudder i hope i

00:00:17,500 --> 00:00:23,740
pronounced it right yep okay great enjoy

00:00:20,460 --> 00:00:26,740
thank you hi everyone um so my name is

00:00:23,740 --> 00:00:29,050
Jonathan Clark like he just said I know

00:00:26,740 --> 00:00:30,940
that at the same time as my talk there's

00:00:29,050 --> 00:00:32,800
a really interesting sounding talk about

00:00:30,940 --> 00:00:34,960
how they do supported github in the next

00:00:32,800 --> 00:00:39,840
room so if you do want to go and see it

00:00:34,960 --> 00:00:44,949
I do feel free it looks pretty awesome

00:00:39,840 --> 00:00:49,839
last chance okay um so Who am I to be

00:00:44,949 --> 00:00:51,190
talking about Radha um I currently work

00:00:49,839 --> 00:00:53,970
at no mission which is a company i

00:00:51,190 --> 00:00:56,559
co-founded in Paris five years ago and

00:00:53,970 --> 00:00:58,479
i'm the product lead which basically

00:00:56,559 --> 00:01:01,180
means I decide what happens what doesn't

00:00:58,479 --> 00:01:03,610
happen inverter I used to be a sysadmin

00:01:01,180 --> 00:01:06,280
I kind of still AM if you are one day

00:01:03,610 --> 00:01:08,560
you stay it I just don't do that much

00:01:06,280 --> 00:01:12,520
this admin day today anymore I do a lot

00:01:08,560 --> 00:01:15,010
more running a company type stuff I've

00:01:12,520 --> 00:01:17,829
always worked in free software pretty

00:01:15,010 --> 00:01:19,930
much my whole working life in particular

00:01:17,829 --> 00:01:22,630
apart from whether there was CF engine

00:01:19,930 --> 00:01:25,090
of course which we use openldap and some

00:01:22,630 --> 00:01:27,939
various other health app tools LSC for

00:01:25,090 --> 00:01:30,430
example and in what I'm not doing

00:01:27,939 --> 00:01:32,409
software I organize events particular

00:01:30,430 --> 00:01:34,600
DevOps days in Paris if any of you get

00:01:32,409 --> 00:01:36,219
the chance to come over in end of

00:01:34,600 --> 00:01:37,930
november or beginning of december this

00:01:36,219 --> 00:01:39,850
year we're going to have a great DevOps

00:01:37,930 --> 00:01:44,859
days event there and it would be great

00:01:39,850 --> 00:01:48,189
if if some some of you guys came and a

00:01:44,859 --> 00:01:49,270
lot con in another world so what are we

00:01:48,189 --> 00:01:51,340
going to be talking about we're gonna be

00:01:49,270 --> 00:01:52,780
talking about Lego absolutely not

00:01:51,340 --> 00:01:54,869
configuration management I'm sorry it

00:01:52,780 --> 00:01:58,600
was a lie definitely not going to happen

00:01:54,869 --> 00:02:00,429
but actually about Lego um just a quick

00:01:58,600 --> 00:02:02,740
reminder for those who haven't done any

00:02:00,429 --> 00:02:04,659
Lego for years the idea is that you

00:02:02,740 --> 00:02:07,329
start with the blocks on the left that

00:02:04,659 --> 00:02:09,600
look like building blocks and you end up

00:02:07,329 --> 00:02:12,370
with something like that on the right

00:02:09,600 --> 00:02:14,590
it's kind of a kinder config management

00:02:12,370 --> 00:02:16,390
in a way you start with some very small

00:02:14,590 --> 00:02:20,530
building blocks and then you achieve a

00:02:16,390 --> 00:02:22,690
huge infrastructure that does stuff if

00:02:20,530 --> 00:02:25,030
you sell stuff on a website maybe you

00:02:22,690 --> 00:02:26,950
run internal IT and keep desktop going

00:02:25,030 --> 00:02:30,550
whatever you achieve stuff using

00:02:26,950 --> 00:02:33,190
basic building blocks so how did we come

00:02:30,550 --> 00:02:35,680
to build whether we're a bunch of

00:02:33,190 --> 00:02:38,920
consultants doing operations is admin

00:02:35,680 --> 00:02:41,290
stuff a lot of basic infrastructure

00:02:38,920 --> 00:02:43,319
stuff you know central ldap servers web

00:02:41,290 --> 00:02:47,260
servers mail servers that kind of thing

00:02:43,319 --> 00:02:49,720
and I've worked in small companies to

00:02:47,260 --> 00:02:51,700
people large companies under the people

00:02:49,720 --> 00:02:53,860
thousands of people and huge companies I

00:02:51,700 --> 00:02:55,989
made a separate section there because

00:02:53,860 --> 00:02:58,390
one of the companies that I did some

00:02:55,989 --> 00:03:00,640
consulting aunt had 120 sis admins

00:02:58,390 --> 00:03:03,130
writing CF engine code all day long full

00:03:00,640 --> 00:03:04,720
time so they go in this huge category

00:03:03,130 --> 00:03:08,260
and the others just go in a large

00:03:04,720 --> 00:03:11,380
gathering we've been doing that for five

00:03:08,260 --> 00:03:13,750
ten years and we always got the same

00:03:11,380 --> 00:03:15,160
feedback the same final conclusion of

00:03:13,750 --> 00:03:16,870
going in and saying yeah we should do

00:03:15,160 --> 00:03:19,420
some automation we should do some config

00:03:16,870 --> 00:03:23,400
management and what people said two

00:03:19,420 --> 00:03:26,470
things first thing is automation Vox

00:03:23,400 --> 00:03:29,530
configuration madam is the way to go I

00:03:26,470 --> 00:03:31,780
think we all know why here um actually

00:03:29,530 --> 00:03:33,579
quick question who here is already doing

00:03:31,780 --> 00:03:35,970
some kind of conflict management in

00:03:33,579 --> 00:03:40,660
their company or personal time whatever

00:03:35,970 --> 00:03:43,660
okay so a majority great and the

00:03:40,660 --> 00:03:45,340
traditional reasons behind this are you

00:03:43,660 --> 00:03:48,220
want to save time you want to install

00:03:45,340 --> 00:03:50,470
that second third fourth box a lot more

00:03:48,220 --> 00:03:53,019
quickly than you would if you would

00:03:50,470 --> 00:03:54,340
doing it manually okay make sense you

00:03:53,019 --> 00:03:56,170
also want to be more responsive to

00:03:54,340 --> 00:03:58,600
changes someone comes along and says hey

00:03:56,170 --> 00:04:00,790
can you change the dns server on all of

00:03:58,600 --> 00:04:02,440
the machines yeah using configuration

00:04:00,790 --> 00:04:05,829
management you can do that very quickly

00:04:02,440 --> 00:04:08,400
it's easy you also want to improve

00:04:05,829 --> 00:04:10,540
reliability so save people making errors

00:04:08,400 --> 00:04:12,819
make sure the configs are the same

00:04:10,540 --> 00:04:14,709
across all the servers okay nothing you

00:04:12,819 --> 00:04:16,510
and you want to be able to manage one

00:04:14,709 --> 00:04:20,289
server or hundreds of thousands of

00:04:16,510 --> 00:04:24,669
servers in the same way great so far you

00:04:20,289 --> 00:04:27,400
knew this but um configuration

00:04:24,669 --> 00:04:32,289
management is not easy to get everyone

00:04:27,400 --> 00:04:33,940
convinced by what we often see is that

00:04:32,289 --> 00:04:35,919
there's going to be one person or two

00:04:33,940 --> 00:04:38,349
people probably some of you in this room

00:04:35,919 --> 00:04:38,740
here pushing configuration management

00:04:38,349 --> 00:04:41,620
saying

00:04:38,740 --> 00:04:43,150
yes we should do this but actually

00:04:41,620 --> 00:04:45,039
getting the whole of the rest of the

00:04:43,150 --> 00:04:49,720
team or the company if it's an IT

00:04:45,039 --> 00:04:52,470
company on board is quite hard some of

00:04:49,720 --> 00:04:54,460
the reasons that I've seen is that

00:04:52,470 --> 00:04:56,919
learning any kind of configure

00:04:54,460 --> 00:04:59,590
management tool is pretty hard it's a

00:04:56,919 --> 00:05:02,199
steep learning curve there's lots of new

00:04:59,590 --> 00:05:06,490
concepts like desired state convergence

00:05:02,199 --> 00:05:08,380
um item Putin's and try and tell someone

00:05:06,490 --> 00:05:09,759
who doesn't want to learn your tool that

00:05:08,380 --> 00:05:12,250
they need to understand what I important

00:05:09,759 --> 00:05:13,990
is then learn a language then start

00:05:12,250 --> 00:05:15,639
doing some stuff and then they can go

00:05:13,990 --> 00:05:18,340
and configure the ssh server that they

00:05:15,639 --> 00:05:22,150
already know how to configure not not

00:05:18,340 --> 00:05:23,500
usually a very good welcome so one of

00:05:22,150 --> 00:05:25,840
the second points here is actually the

00:05:23,500 --> 00:05:28,539
lack of motivation people say well okay

00:05:25,840 --> 00:05:31,150
sure your tool sounds great I get all

00:05:28,539 --> 00:05:35,319
these benefits but why would I do it why

00:05:31,150 --> 00:05:38,139
why is this my problem um maybe I didn't

00:05:35,319 --> 00:05:40,780
really care um I think we've all seen

00:05:38,139 --> 00:05:44,020
these people maybe their co-workers who

00:05:40,780 --> 00:05:45,370
are just angry that happens maybe

00:05:44,020 --> 00:05:48,310
they're people who really good something

00:05:45,370 --> 00:05:51,039
else you know take the security guy or

00:05:48,310 --> 00:05:54,099
the DBA guy if he's really really good

00:05:51,039 --> 00:05:55,599
at optimizing his database I'm gonna say

00:05:54,099 --> 00:05:57,400
postgresql because this is an open

00:05:55,599 --> 00:06:00,880
source conference but maybe it's Oracle

00:05:57,400 --> 00:06:02,440
who knows then he's good at that should

00:06:00,880 --> 00:06:04,060
he have to go and learn a config

00:06:02,440 --> 00:06:06,370
management language syntax like CF

00:06:04,060 --> 00:06:10,419
engine public chef I don't know anything

00:06:06,370 --> 00:06:12,789
sir knee Bobby doesn't think so and last

00:06:10,419 --> 00:06:15,159
but not least this frustration like okay

00:06:12,789 --> 00:06:17,199
I agree I'm gonna go and learn your tool

00:06:15,159 --> 00:06:19,270
I'm gonna jump through the hoops I'm

00:06:17,199 --> 00:06:24,210
gonna figure out idempotent all these

00:06:19,270 --> 00:06:26,530
things but actually it takes so long ah

00:06:24,210 --> 00:06:28,840
gotta learn language you gotta write

00:06:26,530 --> 00:06:31,300
these things out he'd do it and then I

00:06:28,840 --> 00:06:33,219
could have just ssh into the Machine and

00:06:31,300 --> 00:06:36,310
changed the private I wanted to change I

00:06:33,219 --> 00:06:37,810
would mean so much easier do you kind of

00:06:36,310 --> 00:06:40,050
end up like this kid in the middle of

00:06:37,810 --> 00:06:43,659
the Lego he's trying to build a house

00:06:40,050 --> 00:06:47,500
but there's a lot of Lego around him

00:06:43,659 --> 00:06:49,120
here's no idea why to stop is that a

00:06:47,500 --> 00:06:51,430
feeling that you have ever recognized

00:06:49,120 --> 00:06:53,589
those of you who have set up config

00:06:51,430 --> 00:06:55,389
management in your company recognized in

00:06:53,589 --> 00:06:57,159
your co-workers in someone's saying yeah

00:06:55,389 --> 00:07:00,159
I'd like to help but I just don't

00:06:57,159 --> 00:07:05,469
figured out anyone here yeah I thought

00:07:00,159 --> 00:07:07,599
so yeah okay so who I am saying it's

00:07:05,469 --> 00:07:10,870
really hard for the people to do it but

00:07:07,599 --> 00:07:12,430
still it works right lots of us a using

00:07:10,870 --> 00:07:15,070
config management every day lots of us

00:07:12,430 --> 00:07:16,870
have automation and the whole world is

00:07:15,070 --> 00:07:19,570
out there shouting let's do automation

00:07:16,870 --> 00:07:21,669
this is the way to do it there's a whole

00:07:19,570 --> 00:07:23,349
movement and the DevOps movements not

00:07:21,669 --> 00:07:24,789
just about automations a lot of other

00:07:23,349 --> 00:07:27,880
things in their culture and measuring

00:07:24,789 --> 00:07:29,830
sharing but automation is one of the key

00:07:27,880 --> 00:07:32,620
points in there like the whole world is

00:07:29,830 --> 00:07:34,750
saying let's do automation but it's

00:07:32,620 --> 00:07:38,770
difficult so how come sometimes it works

00:07:34,750 --> 00:07:40,899
I think the answer is this guy there's

00:07:38,770 --> 00:07:44,020
usually some kind of a hero in the

00:07:40,899 --> 00:07:46,690
company that guy who is willing to work

00:07:44,020 --> 00:07:48,969
extra hours who's willing to work around

00:07:46,690 --> 00:07:50,979
the bugs and the latest development

00:07:48,969 --> 00:07:52,719
version of whatever config management

00:07:50,979 --> 00:07:54,310
tool you're using that guy who doesn't

00:07:52,719 --> 00:07:55,899
mind if he gets called up in the middle

00:07:54,310 --> 00:07:58,300
of the night because it means that he

00:07:55,899 --> 00:08:00,219
solved the problem and therefore the

00:07:58,300 --> 00:08:02,649
config metric told something I had he's

00:08:00,219 --> 00:08:05,919
a hero he is and we've all been there um

00:08:02,649 --> 00:08:07,779
well if we go half but we've all been

00:08:05,919 --> 00:08:11,560
woken up at 5am and we didn't want to be

00:08:07,779 --> 00:08:14,110
that's social but he's actually in a

00:08:11,560 --> 00:08:16,000
pretty hard position right he's the guy

00:08:14,110 --> 00:08:18,580
he gets this call that says hey you know

00:08:16,000 --> 00:08:20,320
I'm trying to set up this SSH postgres

00:08:18,580 --> 00:08:22,180
whatever in config management but I

00:08:20,320 --> 00:08:24,310
can't do it can you help me of course I

00:08:22,180 --> 00:08:26,409
can yeah sure i'm not going to say no to

00:08:24,310 --> 00:08:29,909
help you with something i introduce an

00:08:26,409 --> 00:08:32,680
iron the expert on RI yeah of course um

00:08:29,909 --> 00:08:33,909
get a less fun when you get that call in

00:08:32,680 --> 00:08:36,279
the middle of the night and the guys

00:08:33,909 --> 00:08:38,949
just doing the monitoring checks like oh

00:08:36,279 --> 00:08:41,199
this came up bread ah probably related

00:08:38,949 --> 00:08:42,820
to conflict management right yeah yeah

00:08:41,199 --> 00:08:45,640
let's blame it on that guy and swing him

00:08:42,820 --> 00:08:47,260
up it's 5am you know it's swimming up

00:08:45,640 --> 00:08:48,850
he's not going to care can you help me

00:08:47,260 --> 00:08:51,490
and of course you're going to say yes

00:08:48,850 --> 00:08:55,630
because well it's 5am you've been awoken

00:08:51,490 --> 00:08:58,030
why not why not fix it so basically you

00:08:55,630 --> 00:09:00,529
end up in this situation that the xkcd

00:08:58,030 --> 00:09:02,600
comic describes pretty well

00:09:00,529 --> 00:09:04,040
which is obviously a scientific proof of

00:09:02,600 --> 00:09:07,069
what I just said because it's got graphs

00:09:04,040 --> 00:09:08,810
which means its scientific what's

00:09:07,069 --> 00:09:11,029
supposed to happen when you automate is

00:09:08,810 --> 00:09:14,209
that you work and then you do extra work

00:09:11,029 --> 00:09:15,649
to automate and then in the end the

00:09:14,209 --> 00:09:16,970
automation tool does it all for you you

00:09:15,649 --> 00:09:19,209
have free time you can go and drink

00:09:16,970 --> 00:09:22,279
beers because the conference is whatever

00:09:19,209 --> 00:09:24,740
what really happens is that you do

00:09:22,279 --> 00:09:25,819
actually work to write the code and then

00:09:24,740 --> 00:09:27,410
it doesn't actually work the way you

00:09:25,819 --> 00:09:28,939
thought it should work so you debug and

00:09:27,410 --> 00:09:33,079
you should do even more extra work and

00:09:28,939 --> 00:09:35,269
then you think I didn't do it right how

00:09:33,079 --> 00:09:37,459
about I do it again and just going to

00:09:35,269 --> 00:09:39,740
change the whole thing so you do even

00:09:37,459 --> 00:09:41,509
more extra work and then you have to

00:09:39,740 --> 00:09:42,920
change other things with the work is

00:09:41,509 --> 00:09:44,240
piling up during the times you have to

00:09:42,920 --> 00:09:46,370
integrate them into your code as well

00:09:44,240 --> 00:09:48,379
and then basically you end up just

00:09:46,370 --> 00:09:50,930
developing your contact management tool

00:09:48,379 --> 00:09:52,490
your automation tool forever and you

00:09:50,930 --> 00:09:56,269
never get that free time that whoever

00:09:52,490 --> 00:09:58,879
promised that to you promised you so you

00:09:56,269 --> 00:10:01,360
can't get frustrated which just goes to

00:09:58,879 --> 00:10:04,339
show that the guy who is doing this

00:10:01,360 --> 00:10:06,009
configuration management hero is indeed

00:10:04,339 --> 00:10:09,529
the hero he's got a full-time job

00:10:06,009 --> 00:10:11,769
keeping up the automation tool who here

00:10:09,529 --> 00:10:16,129
has actually got a full-time job running

00:10:11,769 --> 00:10:19,819
automation in a company okay it's not

00:10:16,129 --> 00:10:21,559
too many but there were some highs my

00:10:19,819 --> 00:10:24,079
hand but then I actually work on making

00:10:21,559 --> 00:10:31,069
automation tool so maybe that doesn't

00:10:24,079 --> 00:10:35,269
recount so um I think this is a problem

00:10:31,069 --> 00:10:37,370
I think it's a problem in that it's

00:10:35,269 --> 00:10:40,189
definitely something we need to do we

00:10:37,370 --> 00:10:43,399
need to automate things in the current

00:10:40,189 --> 00:10:45,470
day and age where you can spin up 100

00:10:43,399 --> 00:10:47,360
cloud instances in two minutes if you

00:10:45,470 --> 00:10:50,300
want to yeah you need automation

00:10:47,360 --> 00:10:53,779
definitely nakhon day and age where

00:10:50,300 --> 00:10:57,079
security threats happen ssl problems

00:10:53,779 --> 00:10:58,610
just random example you know you need to

00:10:57,079 --> 00:11:01,509
be able to patch things quickly you need

00:10:58,610 --> 00:11:03,740
that reactivity so we need to be doing

00:11:01,509 --> 00:11:07,459
automation we need to be doing config

00:11:03,740 --> 00:11:10,059
management but it's hard it's hard to

00:11:07,459 --> 00:11:10,059
get everyone involved

00:11:13,660 --> 00:11:20,510
sorry so how can we help this going back

00:11:17,810 --> 00:11:22,250
to the issues that i mentioned earlier

00:11:20,510 --> 00:11:25,310
that said it's hard for our co-workers

00:11:22,250 --> 00:11:26,480
to actually get involved first thing we

00:11:25,310 --> 00:11:28,690
said is there's a steep learning curve

00:11:26,480 --> 00:11:32,630
what can we do about that to help them

00:11:28,690 --> 00:11:33,950
I'll see we could train them what we

00:11:32,630 --> 00:11:36,110
want to do is get rid of the steep

00:11:33,950 --> 00:11:37,970
learning curve I think yeah we need

00:11:36,110 --> 00:11:39,560
training I'm this puppet training

00:11:37,970 --> 00:11:42,740
happening right next door at the moment

00:11:39,560 --> 00:11:44,570
jump in there if that's gonna help and

00:11:42,740 --> 00:11:48,290
if you're allowed to do that but you

00:11:44,570 --> 00:11:52,100
could try I think that we should be

00:11:48,290 --> 00:11:54,020
separating how we do things and what

00:11:52,100 --> 00:11:56,780
content there should be in there we

00:11:54,020 --> 00:11:59,180
think back to a database admin our DBA

00:11:56,780 --> 00:12:02,210
person what he needs to be doing is

00:11:59,180 --> 00:12:05,210
setting up the right cache sizes or the

00:12:02,210 --> 00:12:06,920
white postgres configs in Postgres he

00:12:05,210 --> 00:12:09,080
doesn't need to be writing puppet code

00:12:06,920 --> 00:12:10,580
or CF engine code or whatever to do that

00:12:09,080 --> 00:12:14,120
he just needs to be able to say hey

00:12:10,580 --> 00:12:17,450
change the cache size from 256 megs to 1

00:12:14,120 --> 00:12:19,790
gigabyte something so it's exactly what

00:12:17,450 --> 00:12:22,310
people started doing in websites what is

00:12:19,790 --> 00:12:26,960
it 15 20 years ago now using a MVC

00:12:22,310 --> 00:12:29,600
control of you model thing you have the

00:12:26,960 --> 00:12:31,910
content that's an author you know an

00:12:29,600 --> 00:12:33,800
editor a communications person writes

00:12:31,910 --> 00:12:36,680
the content and the way the website

00:12:33,800 --> 00:12:38,470
works the PHP code or the Java code of

00:12:36,680 --> 00:12:41,240
the Python code whatever we use is

00:12:38,470 --> 00:12:44,390
completely set but you don't want the

00:12:41,240 --> 00:12:46,340
person who writes you yo your blog to be

00:12:44,390 --> 00:12:50,720
writing PHP code to write a blog post to

00:12:46,340 --> 00:12:52,940
you then there's no sense so it should

00:12:50,720 --> 00:12:55,760
be the same in config management why are

00:12:52,940 --> 00:12:58,100
we mixing together the values and the

00:12:55,760 --> 00:12:59,600
code we shouldn't be I mean if anyone

00:12:58,100 --> 00:13:02,120
here attended the talk those in this

00:12:59,600 --> 00:13:04,520
room yesterday which is about solid

00:13:02,120 --> 00:13:05,810
solid principles in config management

00:13:04,520 --> 00:13:08,870
it's exactly what they're saying

00:13:05,810 --> 00:13:11,990
separate the content from the way you do

00:13:08,870 --> 00:13:15,250
it so that's the first approach the

00:13:11,990 --> 00:13:15,250
first thing that I think we should be I

00:13:15,480 --> 00:13:21,730
the second is the problem is lack of

00:13:18,399 --> 00:13:23,620
motivation why should anyone who is not

00:13:21,730 --> 00:13:27,010
you know really into conflict management

00:13:23,620 --> 00:13:28,570
since I've been in the company be caring

00:13:27,010 --> 00:13:30,810
about this why should they be learning

00:13:28,570 --> 00:13:34,260
um what do they have to gain from that

00:13:30,810 --> 00:13:37,120
well let's give them something to gain

00:13:34,260 --> 00:13:38,110
they don't have a benefit from using it

00:13:37,120 --> 00:13:40,089
of course they're not going to use it

00:13:38,110 --> 00:13:42,459
let's give them something I think that

00:13:40,089 --> 00:13:45,220
we should be showing the users what

00:13:42,459 --> 00:13:48,310
they're achieving we know that when we

00:13:45,220 --> 00:13:50,950
write a puppet recipe or tie a puppet

00:13:48,310 --> 00:13:54,250
module chef recipe or whatever we're

00:13:50,950 --> 00:13:56,440
gonna change a conf a across 10 servers

00:13:54,250 --> 00:13:58,570
100 servers a thousand service that's

00:13:56,440 --> 00:14:01,180
amazing you know it's really powerful

00:13:58,570 --> 00:14:03,490
let's show them how amazing it is let's

00:14:01,180 --> 00:14:04,810
show them what actually happens when you

00:14:03,490 --> 00:14:07,029
change the config let's give them some

00:14:04,810 --> 00:14:08,770
simple reports some graphs show them

00:14:07,029 --> 00:14:11,860
what's happening and when they change

00:14:08,770 --> 00:14:13,870
something and the third one was

00:14:11,860 --> 00:14:15,490
frustration saying yeah i've got all

00:14:13,870 --> 00:14:17,470
these LEGO building blocks and not

00:14:15,490 --> 00:14:20,380
actually achieving anything quickly it's

00:14:17,470 --> 00:14:23,200
slow I'm fed up let's get rid of that

00:14:20,380 --> 00:14:26,920
one and this gives them an easy in a

00:14:23,200 --> 00:14:30,910
quick way to achieve success ready to

00:14:26,920 --> 00:14:32,500
use config techniques and your own ones

00:14:30,910 --> 00:14:34,779
your in-house one so it's give them to

00:14:32,500 --> 00:14:36,970
these users so they can just add in the

00:14:34,779 --> 00:14:40,000
values adding the content and we didn't

00:14:36,970 --> 00:14:44,020
have it okay so I know well that sounds

00:14:40,000 --> 00:14:46,480
well abstract for now I just wanted to

00:14:44,020 --> 00:14:50,470
make sure we on the same page the

00:14:46,480 --> 00:14:51,430
understanding here but it sounds like at

00:14:50,470 --> 00:14:53,200
least a few of you have already

00:14:51,430 --> 00:14:57,370
encountered these problems i guess i

00:14:53,200 --> 00:14:59,230
guess you you identify with them so what

00:14:57,370 --> 00:15:01,480
have we done leaving this is the topic

00:14:59,230 --> 00:15:03,399
of my talk right it's rather what is

00:15:01,480 --> 00:15:05,770
whether and how are we trying to solve

00:15:03,399 --> 00:15:08,560
that problem what we're trying to do is

00:15:05,770 --> 00:15:10,839
make config management more easy and

00:15:08,560 --> 00:15:13,060
increase the amount of people that use

00:15:10,839 --> 00:15:15,070
it the amount of people as in new

00:15:13,060 --> 00:15:16,870
companies start using it show but also

00:15:15,070 --> 00:15:20,290
the amount of people in one company that

00:15:16,870 --> 00:15:22,390
are using it I so often see teams of two

00:15:20,290 --> 00:15:25,240
sermons maybe it's a team of six seven

00:15:22,390 --> 00:15:25,910
seas admins and only one or two or three

00:15:25,240 --> 00:15:27,740
of them

00:15:25,910 --> 00:15:31,640
actually writing the conflict management

00:15:27,740 --> 00:15:33,350
good actually using the tool it should

00:15:31,640 --> 00:15:35,930
be the whole team it should be the whole

00:15:33,350 --> 00:15:38,900
IT department in a company that is

00:15:35,930 --> 00:15:40,820
benefiting and using that tool so what

00:15:38,900 --> 00:15:42,560
we decided to at least try and achieve

00:15:40,820 --> 00:15:46,340
you can tell me at the end of the talk

00:15:42,560 --> 00:15:48,110
whether we succeeded is to lower the

00:15:46,340 --> 00:15:49,580
entry barrier into doing conflict

00:15:48,110 --> 00:15:53,290
management make it easier to get started

00:15:49,580 --> 00:15:56,090
make it easier to use day to day and

00:15:53,290 --> 00:15:57,920
still keep it just as powerful as before

00:15:56,090 --> 00:15:59,780
we have the power now we don't wanna go

00:15:57,920 --> 00:16:02,930
and lose the power doing that would be

00:15:59,780 --> 00:16:05,750
crazy and we also want to extend the

00:16:02,930 --> 00:16:08,600
benefits of config management to a wider

00:16:05,750 --> 00:16:10,910
population so currently people who use

00:16:08,600 --> 00:16:13,610
config management are experienced

00:16:10,910 --> 00:16:15,200
assignments senior sis head mins maybe

00:16:13,610 --> 00:16:16,730
junior season means on paper that have

00:16:15,200 --> 00:16:18,470
actually gone unspent loads of time to

00:16:16,730 --> 00:16:20,600
learn config management so actually know

00:16:18,470 --> 00:16:22,100
that junior right what about the real

00:16:20,600 --> 00:16:23,750
junior sis admins the guy who just

00:16:22,100 --> 00:16:25,430
joined the company it's like yeah you

00:16:23,750 --> 00:16:27,290
should go and change the config on that

00:16:25,430 --> 00:16:28,940
server oh but by the way you have to

00:16:27,290 --> 00:16:31,310
edit the config management thing check

00:16:28,940 --> 00:16:36,620
it in to get apply the walls the tests

00:16:31,310 --> 00:16:39,040
and what whoa I can't do that we need to

00:16:36,620 --> 00:16:41,210
help him and I guess management as well

00:16:39,040 --> 00:16:44,120
they need to be able to see what we're

00:16:41,210 --> 00:16:48,110
doing with that how many times have we

00:16:44,120 --> 00:16:50,150
ever seen management in a company decide

00:16:48,110 --> 00:16:52,250
to invest in a tool because it's gonna

00:16:50,150 --> 00:16:56,600
make the system in life sis admins life

00:16:52,250 --> 00:16:59,120
easier not a good criteria really not a

00:16:56,600 --> 00:17:02,330
good criteria making this a sad man's

00:16:59,120 --> 00:17:06,380
life easier and cheaper definitely a

00:17:02,330 --> 00:17:07,970
good criteria yeah so when we build

00:17:06,380 --> 00:17:10,100
rather we tried to follow some core

00:17:07,970 --> 00:17:14,750
principles that I care about a lot is

00:17:10,100 --> 00:17:17,540
that making things easy and smart but

00:17:14,750 --> 00:17:19,220
still extensible and customizable so

00:17:17,540 --> 00:17:22,130
basically we're talking about same

00:17:19,220 --> 00:17:24,500
default when you install whether you can

00:17:22,130 --> 00:17:26,600
have it set up in running in two to

00:17:24,500 --> 00:17:29,090
three minutes hopefully this is the case

00:17:26,600 --> 00:17:31,730
because my demo vm crashed just before

00:17:29,090 --> 00:17:33,290
the session started so it's reinstalling

00:17:31,730 --> 00:17:35,870
at the moment and hopefully in five

00:17:33,290 --> 00:17:38,210
minutes ill be working if not then I

00:17:35,870 --> 00:17:39,520
lied and we have no demo but hopefully

00:17:38,210 --> 00:17:41,780
we do

00:17:39,520 --> 00:17:43,790
so yeah these core principles making

00:17:41,780 --> 00:17:46,070
things easy you should be able to get to

00:17:43,790 --> 00:17:48,860
changing a config parameter in a really

00:17:46,070 --> 00:17:50,480
simple manage not be complicated should

00:17:48,860 --> 00:17:52,220
all be plug-and-play you need to edit a

00:17:50,480 --> 00:17:54,679
new kind of config file sure just

00:17:52,220 --> 00:17:56,540
connect it in everything is open source

00:17:54,679 --> 00:17:59,240
of course we care a lot about open

00:17:56,540 --> 00:18:00,790
source and I know this may sound weird

00:17:59,240 --> 00:18:03,470
in an open source conference but

00:18:00,790 --> 00:18:05,179
everyone in our company and everyone in

00:18:03,470 --> 00:18:06,950
the development team behind verda has

00:18:05,179 --> 00:18:09,080
always worked in open source we really

00:18:06,950 --> 00:18:11,419
care about open source we have all of

00:18:09,080 --> 00:18:14,000
our development is open we talk on

00:18:11,419 --> 00:18:17,179
public mailing lists we everything is

00:18:14,000 --> 00:18:19,130
GPL we contribute to other projects we

00:18:17,179 --> 00:18:21,080
give yeah I think we're pretty good

00:18:19,130 --> 00:18:24,169
open-source citizen so I'm trying to say

00:18:21,080 --> 00:18:25,790
we're not a public company with a

00:18:24,169 --> 00:18:32,090
product that happens to be open doors

00:18:25,790 --> 00:18:36,020
it's the other way around so um what is

00:18:32,090 --> 00:18:37,460
actually verda today it's a tool that

00:18:36,020 --> 00:18:40,580
it's specifically designed for

00:18:37,460 --> 00:18:43,220
automation but also compliance um i

00:18:40,580 --> 00:18:45,230
haven't mentioned compliance yet but one

00:18:43,220 --> 00:18:47,929
of the things that we have added in to

00:18:45,230 --> 00:18:50,360
your basic config management tool is the

00:18:47,929 --> 00:18:53,150
possibility to find out how the config

00:18:50,360 --> 00:18:55,100
was applied you know how often do you

00:18:53,150 --> 00:18:59,770
write a wool and you send it out to your

00:18:55,100 --> 00:19:03,500
150 servers yeah okay you hope it works

00:18:59,770 --> 00:19:05,299
yeah so what we've done is integrated a

00:19:03,500 --> 00:19:08,240
feedback loop so that every action that

00:19:05,299 --> 00:19:10,400
is checked on a server comes back up to

00:19:08,240 --> 00:19:12,470
the central point of control and you can

00:19:10,400 --> 00:19:17,179
tell whether the config is correct on

00:19:12,470 --> 00:19:19,130
its compliance to us it's probably not

00:19:17,179 --> 00:19:20,990
as important as the larger corporations

00:19:19,130 --> 00:19:22,340
that actually need compliance and I'm

00:19:20,990 --> 00:19:24,740
not talking sarbanes-oxley compliance

00:19:22,340 --> 00:19:27,230
here you can do Simon's ugly compliance

00:19:24,740 --> 00:19:29,179
here but just compliance as in I set up

00:19:27,230 --> 00:19:34,010
some rules about SSH have they been

00:19:29,179 --> 00:19:36,350
applied we have a web interface to make

00:19:34,010 --> 00:19:38,510
easy experience for the users it's not

00:19:36,350 --> 00:19:40,490
necessary to use it but the whole point

00:19:38,510 --> 00:19:43,280
here was to make this easier for

00:19:40,490 --> 00:19:47,030
newcomers so a web interface is usually

00:19:43,280 --> 00:19:50,450
easier we have chosen to use the CF

00:19:47,030 --> 00:19:51,840
Engine 3 agent as the actual config

00:19:50,450 --> 00:19:54,809
management tool underneath

00:19:51,840 --> 00:19:56,909
heard I'll come back later to why we

00:19:54,809 --> 00:19:59,610
chose CF engine over a puppet and chef

00:19:56,909 --> 00:20:01,470
which were choices at the time but

00:19:59,610 --> 00:20:03,360
basically we did not want to reinvent

00:20:01,470 --> 00:20:04,890
the wheel we're not trying to build a

00:20:03,360 --> 00:20:06,260
new config management tool I think

00:20:04,890 --> 00:20:10,230
enough people are doing that already

00:20:06,260 --> 00:20:11,549
thank you so we're trying to use

00:20:10,230 --> 00:20:12,870
something that exists we're trying to

00:20:11,549 --> 00:20:14,990
contribute to that tool will make it

00:20:12,870 --> 00:20:17,460
better as well what we have been doing

00:20:14,990 --> 00:20:19,260
we've added in some level of graphical

00:20:17,460 --> 00:20:20,669
reporting so that people can see well

00:20:19,260 --> 00:20:23,400
compliance what I was just saying see

00:20:20,669 --> 00:20:25,770
what's happening and to make it easy

00:20:23,400 --> 00:20:28,320
once again all of this is packaged on

00:20:25,770 --> 00:20:31,770
the OSS we support which are various

00:20:28,320 --> 00:20:36,510
flavors of Linux some ax and Solaris

00:20:31,770 --> 00:20:38,460
Windows Android yeah we use config meant

00:20:36,510 --> 00:20:42,450
when I Android which is pretty

00:20:38,460 --> 00:20:44,640
interesting experience as well yeah and

00:20:42,450 --> 00:20:47,990
it's all open to us like I said anyway

00:20:44,640 --> 00:20:50,610
and I've talking um time to actually see

00:20:47,990 --> 00:20:53,429
how this works I'm gonna start with some

00:20:50,610 --> 00:20:56,399
screenshots because my demo broke this

00:20:53,429 --> 00:20:58,470
is the safe version of a Down this is

00:20:56,399 --> 00:21:03,270
what a simple screen in well it looks

00:20:58,470 --> 00:21:06,990
like this is configuring an SSH service

00:21:03,270 --> 00:21:09,899
and all of these variables come up and

00:21:06,990 --> 00:21:12,210
you can edit the parameters in your ssh

00:21:09,899 --> 00:21:14,100
service just through a web interface you

00:21:12,210 --> 00:21:15,570
don't need to know how CF engine how

00:21:14,100 --> 00:21:18,450
water works and the easiest thing to

00:21:15,570 --> 00:21:20,640
decide that you know should we have

00:21:18,450 --> 00:21:22,620
password authentication yes on there

00:21:20,640 --> 00:21:25,730
simple as that click yes could now

00:21:22,620 --> 00:21:28,860
should root be able to log in using ssh

00:21:25,730 --> 00:21:30,539
probably now you could change that all

00:21:28,860 --> 00:21:32,520
of these settings are exposed because

00:21:30,539 --> 00:21:34,470
someone at some point chose to expose

00:21:32,520 --> 00:21:36,480
them here and said these are the

00:21:34,470 --> 00:21:38,640
settings that i want to give to my users

00:21:36,480 --> 00:21:40,890
so that they can change them obviously

00:21:38,640 --> 00:21:42,779
you probably don't want to give this to

00:21:40,890 --> 00:21:44,279
every single sysadmin in the company you

00:21:42,779 --> 00:21:46,980
probably want someone to have a kind of

00:21:44,279 --> 00:21:50,909
top-down choice about who says yes

00:21:46,980 --> 00:21:53,669
access is allowed or not once you've set

00:21:50,909 --> 00:21:56,909
up these walls you get some built-in

00:21:53,669 --> 00:21:58,970
reporting so here we have two samples

00:21:56,909 --> 00:22:00,809
called web database and web front and

00:21:58,970 --> 00:22:02,520
they've come back with two different

00:22:00,809 --> 00:22:03,549
compliance levels one is zero-percent

00:22:02,520 --> 00:22:05,529
that

00:22:03,549 --> 00:22:07,659
very well and one is a hundred percent

00:22:05,529 --> 00:22:10,480
so what we're doing here is we're

00:22:07,659 --> 00:22:12,909
setting up target parameters this is a

00:22:10,480 --> 00:22:16,419
desired state exactly the same as in pub

00:22:12,909 --> 00:22:17,889
it chef CF engine so on but instead of

00:22:16,419 --> 00:22:19,659
writing the code to do it the code was

00:22:17,889 --> 00:22:21,999
already written we just injecting the

00:22:19,659 --> 00:22:23,499
parameters sending them out to the hosts

00:22:21,999 --> 00:22:25,779
that are going to try and apply them and

00:22:23,499 --> 00:22:29,049
come back and say yeah everything was ok

00:22:25,779 --> 00:22:33,090
or actually on the web database there

00:22:29,049 --> 00:22:36,279
was an error if we then zoom in on that

00:22:33,090 --> 00:22:38,049
database section we can see that there

00:22:36,279 --> 00:22:41,919
were several components making up that

00:22:38,049 --> 00:22:43,899
wall all of these these last five lines

00:22:41,919 --> 00:22:46,090
here but actually one of them had a

00:22:43,899 --> 00:22:48,879
problem it says it's repaired here

00:22:46,090 --> 00:22:50,950
repaired means that it found a problem

00:22:48,879 --> 00:22:52,299
changed the file and fixed it but from a

00:22:50,950 --> 00:22:54,580
compliance point of view we have to

00:22:52,299 --> 00:22:56,019
count that as a 0% compliance it means

00:22:54,580 --> 00:22:58,659
that there was a problem in the past

00:22:56,019 --> 00:23:03,190
next time the agent runs it's going to

00:22:58,659 --> 00:23:05,049
be one hundred percent hopefully since

00:23:03,190 --> 00:23:07,629
all of the changes we're doing are

00:23:05,049 --> 00:23:09,009
happening in one central place it's the

00:23:07,629 --> 00:23:10,389
weather server it could be the what a

00:23:09,009 --> 00:23:12,960
web interface it could be through the

00:23:10,389 --> 00:23:16,600
API to could be through the CLI

00:23:12,960 --> 00:23:18,549
everything we do is traced exactly in

00:23:16,600 --> 00:23:20,139
the same way if you're doing puppet or

00:23:18,549 --> 00:23:22,480
chef for CF engine you're going to

00:23:20,139 --> 00:23:24,850
commit your GF engine code or whatever

00:23:22,480 --> 00:23:26,529
into a git repository and as we enter

00:23:24,850 --> 00:23:29,230
apposite or e it's exactly the same

00:23:26,529 --> 00:23:31,239
thing here use the web interface and if

00:23:29,230 --> 00:23:33,399
we change will become a git commit and

00:23:31,239 --> 00:23:36,809
get repository and you can even see the

00:23:33,399 --> 00:23:39,489
differences and the one commits changed

00:23:36,809 --> 00:23:41,320
when when the change was made so

00:23:39,489 --> 00:23:45,820
remember the example I showed you first

00:23:41,320 --> 00:23:47,619
with the ssh config here we change the

00:23:45,820 --> 00:23:52,570
password authentication from yes to no

00:23:47,619 --> 00:23:54,549
and then you see in the logs this is a

00:23:52,570 --> 00:23:55,659
kind of pseudo XML format which is kind

00:23:54,549 --> 00:23:57,759
of weird but it's pretty easy to read

00:23:55,659 --> 00:24:00,460
that the open ssh server password

00:23:57,759 --> 00:24:04,539
authentication went from yes to no it's

00:24:00,460 --> 00:24:06,340
a basic diff format which is to us the

00:24:04,539 --> 00:24:09,070
system ends are used to reading through

00:24:06,340 --> 00:24:10,659
police info courtesy edmonds used to

00:24:09,070 --> 00:24:13,240
reading to get deaths as we end this

00:24:10,659 --> 00:24:15,009
it's pretty standard formats but to

00:24:13,240 --> 00:24:16,450
users that are not used to that kind of

00:24:15,009 --> 00:24:18,130
thing it's still pretty

00:24:16,450 --> 00:24:19,870
format to read you can see all the

00:24:18,130 --> 00:24:25,960
settings where it means it's gone green

00:24:19,870 --> 00:24:27,640
means it's new pretty simple so I

00:24:25,960 --> 00:24:29,830
mentioned I was going to talk a bit

00:24:27,640 --> 00:24:32,110
about why we chose CF engine I'm going

00:24:29,830 --> 00:24:36,030
to talk a bit about four different

00:24:32,110 --> 00:24:36,030
design choices we made here actually

00:24:43,560 --> 00:24:51,310
there's any CF engine users here by the

00:24:46,480 --> 00:24:56,680
way what yeah it's all two of us in the

00:24:51,310 --> 00:25:02,310
room great um ok any people who used to

00:24:56,680 --> 00:25:06,550
be CF engine users but no longer aa-23

00:25:02,310 --> 00:25:09,400
ok not bad so CF engine is not a common

00:25:06,550 --> 00:25:11,740
choice it hasn't been at least over the

00:25:09,400 --> 00:25:14,260
past five years there's a few reasons

00:25:11,740 --> 00:25:19,120
for that um I think one of the first

00:25:14,260 --> 00:25:23,620
reasons was CF engine to Hodges pretty

00:25:19,120 --> 00:25:25,120
bad at least by today's standards um we

00:25:23,620 --> 00:25:28,480
should know before we get into this is

00:25:25,120 --> 00:25:31,420
that CF engine one came out in 1993 so

00:25:28,480 --> 00:25:33,610
that was 21 years ago now mark burgess

00:25:31,420 --> 00:25:36,100
the guy who wrote it was a teacher in a

00:25:33,610 --> 00:25:37,720
university in Oslo and he invented the

00:25:36,100 --> 00:25:39,310
whole idea of contact management he's

00:25:37,720 --> 00:25:41,260
great guy to talk to her she would get

00:25:39,310 --> 00:25:42,550
to see one of his talks i really

00:25:41,260 --> 00:25:44,740
recommend listening to him it kind of

00:25:42,550 --> 00:25:47,140
blows your mind he's unlike the next

00:25:44,740 --> 00:25:51,280
stage of ten years after today like wow

00:25:47,140 --> 00:25:52,900
okay so he did CF engine one being

00:25:51,280 --> 00:25:54,520
university teacher he put in an open

00:25:52,900 --> 00:25:56,830
source I gave a thing that happened back

00:25:54,520 --> 00:26:00,040
then and universities and people started

00:25:56,830 --> 00:26:01,960
using it and then came CF engine to CF

00:26:00,040 --> 00:26:04,360
engine to built on CF engine one made

00:26:01,960 --> 00:26:06,580
things a bit better so on loads of

00:26:04,360 --> 00:26:08,230
people started using it lots and lots of

00:26:06,580 --> 00:26:10,480
unix and linux shops around the world

00:26:08,230 --> 00:26:13,090
were using CF engine too and it draw a

00:26:10,480 --> 00:26:15,850
lot of contributors lots of code went

00:26:13,090 --> 00:26:17,790
into CF engine to one of those

00:26:15,850 --> 00:26:20,470
contributors was called Luke kaneez and

00:26:17,790 --> 00:26:23,170
those of you who use or have used puppet

00:26:20,470 --> 00:26:24,970
will probably recognize the name and he

00:26:23,170 --> 00:26:27,040
was contributing to CF engine and then

00:26:24,970 --> 00:26:28,360
one day he got fed up with lego his GF

00:26:27,040 --> 00:26:29,820
engine to thing it's just not good

00:26:28,360 --> 00:26:32,940
enough I can do better

00:26:29,820 --> 00:26:36,120
and he went to create puppet a few years

00:26:32,940 --> 00:26:39,060
later an open source world has a way of

00:26:36,120 --> 00:26:40,680
repeating itself that's beautiful puppet

00:26:39,060 --> 00:26:42,420
was attracting lots of users a lot of

00:26:40,680 --> 00:26:45,120
the CF engine to users move over to

00:26:42,420 --> 00:26:47,040
puppet and there was one of the guys

00:26:45,120 --> 00:26:49,170
there who was contributing to puppet has

00:26:47,040 --> 00:26:51,690
called Adam Jacobs you may have heard of

00:26:49,170 --> 00:26:54,030
him if you use chef um he got fed up

00:26:51,690 --> 00:26:57,410
again with puppet and he said I can do

00:26:54,030 --> 00:27:00,870
better and he went and created chef in

00:26:57,410 --> 00:27:03,150
2009 if I'm not much mistaken and at the

00:27:00,870 --> 00:27:05,640
same time as he created chef mark

00:27:03,150 --> 00:27:07,890
burgess also said well ok CF engine do

00:27:05,640 --> 00:27:09,570
was not that great um we can do a lot

00:27:07,890 --> 00:27:11,610
better now let's learn from the lessons

00:27:09,570 --> 00:27:14,070
that we failed the first time and create

00:27:11,610 --> 00:27:15,690
CF engine 3 so when I talk about CF

00:27:14,070 --> 00:27:18,570
engine from now on witham let's seeif

00:27:15,690 --> 00:27:21,180
engine 3 which is a completely rewritten

00:27:18,570 --> 00:27:23,940
version of CF engine has to be honest

00:27:21,180 --> 00:27:26,310
not much in common with CF engine too it

00:27:23,940 --> 00:27:28,950
came out on the first January 2009 so

00:27:26,310 --> 00:27:31,260
pretty much the same ages chef quite

00:27:28,950 --> 00:27:35,010
quite recent therefore by um standard

00:27:31,260 --> 00:27:38,160
software terms why do we think CF engine

00:27:35,010 --> 00:27:40,980
works um CFN inbox because it has a tiny

00:27:38,160 --> 00:27:43,290
tiny tiny footprint it means it's very

00:27:40,980 --> 00:27:46,470
highly scalable when i run a CF engine

00:27:43,290 --> 00:27:49,380
agent it takes like four five megabytes

00:27:46,470 --> 00:27:51,540
of ram on my system and that's including

00:27:49,380 --> 00:27:53,160
any shared libraries it has to load

00:27:51,540 --> 00:27:55,350
who's the only shared libraries it

00:27:53,160 --> 00:27:57,210
depends upon our lab ssl everyone has

00:27:55,350 --> 00:28:01,830
that now you have a more recent version

00:27:57,210 --> 00:28:03,420
it's cool let pcre perl-compatible red

00:28:01,830 --> 00:28:07,470
goose versions everyone has that as well

00:28:03,420 --> 00:28:09,540
and a small database NoSQL database like

00:28:07,470 --> 00:28:11,250
tokyo cabinet or LMT be your berkeley DB

00:28:09,540 --> 00:28:12,810
and usually you'd have one of these

00:28:11,250 --> 00:28:16,020
things already if not it's pretty small

00:28:12,810 --> 00:28:17,940
as well so you can run this it's written

00:28:16,020 --> 00:28:19,560
in c so you can run this on pretty much

00:28:17,940 --> 00:28:22,440
any platform where you have a/c compiler

00:28:19,560 --> 00:28:24,090
which is pretty much any platform like I

00:28:22,440 --> 00:28:26,610
said it works on Android it works on

00:28:24,090 --> 00:28:30,090
linux so what's on the bsd s it works on

00:28:26,610 --> 00:28:33,030
really old air systems all hp-ux systems

00:28:30,090 --> 00:28:35,520
also direct systems oh no sir just

00:28:33,030 --> 00:28:36,979
normal windows systems as well um got

00:28:35,520 --> 00:28:39,899
carried away there

00:28:36,979 --> 00:28:42,090
and yes it's very fast really

00:28:39,899 --> 00:28:44,580
lightweight it uses an agent that's

00:28:42,090 --> 00:28:47,070
installed on the machine and in a pretty

00:28:44,580 --> 00:28:50,429
different way to the least a puppy agent

00:28:47,070 --> 00:28:53,309
by default all of the intelligence is on

00:28:50,429 --> 00:28:55,109
the agent side so in puppet what happens

00:28:53,309 --> 00:28:56,909
usually is you start the puppet agent it

00:28:55,109 --> 00:28:58,799
looks at what's on the Machine sends

00:28:56,909 --> 00:29:00,509
that to the server the server analyzes

00:28:58,799 --> 00:29:02,070
that it says okay what needs to be

00:29:00,509 --> 00:29:03,840
changed is you should install this

00:29:02,070 --> 00:29:07,349
package or you to edit this file or

00:29:03,840 --> 00:29:09,539
whatever on CF engine once it's got the

00:29:07,349 --> 00:29:11,399
policy what it's supposed to do it does

00:29:09,539 --> 00:29:13,320
never contact the server again it just

00:29:11,399 --> 00:29:14,669
looks at it locally and says that the

00:29:13,320 --> 00:29:16,229
package missing I'm going to do that

00:29:14,669 --> 00:29:18,659
this makes it a lot more scalable

00:29:16,229 --> 00:29:20,909
because there's no impact at all on the

00:29:18,659 --> 00:29:22,889
server compared to the number of nodes

00:29:20,909 --> 00:29:24,989
the only thing you do is copy the policy

00:29:22,889 --> 00:29:27,499
once and once they have the policy it's

00:29:24,989 --> 00:29:29,789
copied there's no extra extra load them

00:29:27,499 --> 00:29:33,359
CF engines also designed to be very

00:29:29,789 --> 00:29:36,299
resilient to errors um this may not seem

00:29:33,359 --> 00:29:39,599
important as a general case but lots of

00:29:36,299 --> 00:29:41,039
things don't work pretty often um I know

00:29:39,599 --> 00:29:42,479
that the github guys are probably in the

00:29:41,039 --> 00:29:45,659
other room so I'm going to go ahead and

00:29:42,479 --> 00:29:47,609
say this github is down more often than

00:29:45,659 --> 00:29:49,769
we'd like right you know how many times

00:29:47,609 --> 00:29:53,039
you try to get clone or git pull and

00:29:49,769 --> 00:29:54,509
like I get abs down yeah well that

00:29:53,039 --> 00:29:55,739
doesn't mean your config management

00:29:54,509 --> 00:29:57,359
shouldn't be applying doesn't mean you

00:29:55,739 --> 00:29:59,340
shouldn't be applying security rules on

00:29:57,359 --> 00:30:01,049
your system it's the same for the Debian

00:29:59,340 --> 00:30:03,330
repos there are a lot less often

00:30:01,049 --> 00:30:05,159
unavailable but it happens as well you

00:30:03,330 --> 00:30:06,690
need to install a package the Debian

00:30:05,159 --> 00:30:08,129
Reapers not available you can't do it

00:30:06,690 --> 00:30:10,529
that doesn't mean you shouldn't be

00:30:08,129 --> 00:30:12,690
checking your config file course you

00:30:10,529 --> 00:30:15,619
should be checking a config file so

00:30:12,690 --> 00:30:18,809
that's a simple case a more complex case

00:30:15,619 --> 00:30:22,320
is a submarine there's at least two

00:30:18,809 --> 00:30:23,789
different marines in the world does she

00:30:22,320 --> 00:30:26,239
have CF engine running on their

00:30:23,789 --> 00:30:29,070
submarines so what a submarine does is

00:30:26,239 --> 00:30:31,049
you put soldiers inside and it goes off

00:30:29,070 --> 00:30:32,639
under the sea for about nine months well

00:30:31,049 --> 00:30:35,460
up to nine months is a maximum duration

00:30:32,639 --> 00:30:37,919
of a submarine mission during those nine

00:30:35,460 --> 00:30:40,409
months that submarine has no network

00:30:37,919 --> 00:30:42,539
contact with the earth well he's not for

00:30:40,409 --> 00:30:44,549
CF engine it has Network contact for

00:30:42,539 --> 00:30:47,640
other reasons I would don't want to go

00:30:44,549 --> 00:30:50,130
into any because they're not very fun

00:30:47,640 --> 00:30:52,500
and it keeps on applying CF engine

00:30:50,130 --> 00:30:54,840
policy for nine months and then when it

00:30:52,500 --> 00:30:58,620
comes back to land they basically plug

00:30:54,840 --> 00:31:00,390
in a network cable roughly yeah and it

00:30:58,620 --> 00:31:02,220
goes okay I'm back in connected to my

00:31:00,390 --> 00:31:05,700
server here's the report from the last

00:31:02,220 --> 00:31:07,110
nine months oh and here's the new policy

00:31:05,700 --> 00:31:09,690
and then you can apply that for the next

00:31:07,110 --> 00:31:12,030
nine months that kind of thing as

00:31:09,690 --> 00:31:15,240
possible thanks to this this arrow as

00:31:12,030 --> 00:31:16,650
aliens here anyway um CF engine walks

00:31:15,240 --> 00:31:18,150
basically it's what i'm trying to say

00:31:16,650 --> 00:31:21,780
with this slide you can do a lot of

00:31:18,150 --> 00:31:23,670
things within the attention is also

00:31:21,780 --> 00:31:26,520
pretty hard to learn if you're not used

00:31:23,670 --> 00:31:30,030
to it um maybe one so many people use it

00:31:26,520 --> 00:31:32,610
that is getting better why we chose CF

00:31:30,030 --> 00:31:34,740
engine it was obviously for the

00:31:32,610 --> 00:31:35,970
lightweight pneus one of the things we

00:31:34,740 --> 00:31:38,190
wanted to do I mentioned that it was

00:31:35,970 --> 00:31:41,900
compliance reporting so be able to check

00:31:38,190 --> 00:31:46,290
that your security policy for example is

00:31:41,900 --> 00:31:48,330
indeed applied on all your service how

00:31:46,290 --> 00:31:49,710
many people here have defined a security

00:31:48,330 --> 00:31:51,510
policy in their company when i say

00:31:49,710 --> 00:31:55,080
security policy i just mean it settings

00:31:51,510 --> 00:31:56,940
you put in sshd config or whatever okay

00:31:55,080 --> 00:31:59,340
and how many of you can tell me right

00:31:56,940 --> 00:32:02,640
now Oh at least this evening when you go

00:31:59,340 --> 00:32:05,060
back which number or percentage of your

00:32:02,640 --> 00:32:09,360
servers actually have that exact convey

00:32:05,060 --> 00:32:14,310
okay okay a few it's good I'd love to

00:32:09,360 --> 00:32:16,170
hear how so yeah that's why compliance

00:32:14,310 --> 00:32:17,220
is important basically get your security

00:32:16,170 --> 00:32:19,860
policy you want to know what's happening

00:32:17,220 --> 00:32:22,230
using CF engine by default we won every

00:32:19,860 --> 00:32:24,120
five minutes you can change that so you

00:32:22,230 --> 00:32:27,030
get a very high frequency reporting

00:32:24,120 --> 00:32:28,950
about what's actually happening the way

00:32:27,030 --> 00:32:31,230
CF engine code is written makes it very

00:32:28,950 --> 00:32:33,210
easy for us to do this separation of

00:32:31,230 --> 00:32:34,650
config from implementation I was talking

00:32:33,210 --> 00:32:37,440
about originally you know so reading the

00:32:34,650 --> 00:32:40,290
data and the content now separating the

00:32:37,440 --> 00:32:42,180
content and the the code basically so

00:32:40,290 --> 00:32:44,790
easy to do in CF engine because they

00:32:42,180 --> 00:32:46,170
have a kind of functional approach to

00:32:44,790 --> 00:32:48,000
things so you can write functions that

00:32:46,170 --> 00:32:50,550
take parameters and do whatever they

00:32:48,000 --> 00:32:52,440
have to do it's multi-platform like you

00:32:50,550 --> 00:32:54,990
said already and it can send back

00:32:52,440 --> 00:32:58,550
reports and to say what what happened

00:32:54,990 --> 00:33:02,070
this is what we chose the avenging

00:32:58,550 --> 00:33:06,150
moving on the network architecture in

00:33:02,070 --> 00:33:08,100
weather looks something like this it's

00:33:06,150 --> 00:33:11,400
pretty similar to any other network

00:33:08,100 --> 00:33:12,960
architecture you've seen for config

00:33:11,400 --> 00:33:15,630
management tools there's a red a server

00:33:12,960 --> 00:33:17,309
at the top it's running CF engine all of

00:33:15,630 --> 00:33:19,559
the nodes that you're running actually

00:33:17,309 --> 00:33:22,559
only one CF engine so if you use whether

00:33:19,559 --> 00:33:25,020
there is no rudder specific code running

00:33:22,559 --> 00:33:28,800
on the nodes we're just relying on CF

00:33:25,020 --> 00:33:30,870
engine to do that bit we have added a

00:33:28,800 --> 00:33:33,570
couple of extra things here the black

00:33:30,870 --> 00:33:36,840
arrow is here indicate the CF engine

00:33:33,570 --> 00:33:39,240
protocol and then we've added to other

00:33:36,840 --> 00:33:41,760
protocols so HTTP which is used to send

00:33:39,240 --> 00:33:43,620
some inventory data and syslog which is

00:33:41,760 --> 00:33:46,590
used to send the reports so basically

00:33:43,620 --> 00:33:48,870
every time a node ones CF engine it's

00:33:46,590 --> 00:33:50,340
going to output some reports saying how

00:33:48,870 --> 00:33:52,200
did this work and they're going to be

00:33:50,340 --> 00:33:54,960
sent to syslog why syslog because it's

00:33:52,200 --> 00:33:57,059
great every single system has it it's

00:33:54,960 --> 00:33:59,970
really standard no one gets scared by

00:33:57,059 --> 00:34:02,100
syslog too easy to set up because it's

00:33:59,970 --> 00:34:05,520
already there and that kind of just

00:34:02,100 --> 00:34:08,460
works you can also build a separate part

00:34:05,520 --> 00:34:11,669
of your network hit over here in such a

00:34:08,460 --> 00:34:14,070
way that if you have network

00:34:11,669 --> 00:34:16,109
restrictions for example you and is not

00:34:14,070 --> 00:34:17,909
an ISP a hosting company and you have

00:34:16,109 --> 00:34:19,980
several different customers in isolated

00:34:17,909 --> 00:34:21,929
network areas you can separate their

00:34:19,980 --> 00:34:24,000
conflicts so that only they are behind

00:34:21,929 --> 00:34:29,700
the firewall and it's it's all separated

00:34:24,000 --> 00:34:33,060
out so what is the typical usage and for

00:34:29,700 --> 00:34:34,919
what I look like what will happen this

00:34:33,060 --> 00:34:37,080
is a work further we defined with one of

00:34:34,919 --> 00:34:39,270
our customers was actually for a

00:34:37,080 --> 00:34:41,609
security policy there is that the

00:34:39,270 --> 00:34:44,159
management the guy at the top wearing

00:34:41,609 --> 00:34:46,560
the tie would define policy he would say

00:34:44,159 --> 00:34:48,419
something like all of our passwords

00:34:46,560 --> 00:34:50,100
should be at least 15 characters long

00:34:48,419 --> 00:34:53,940
and they should be changed every few

00:34:50,100 --> 00:34:55,950
months okay and he would pass this down

00:34:53,940 --> 00:34:58,140
to his team of sis and mins and say do

00:34:55,950 --> 00:35:00,000
it okay just just want it done does

00:34:58,140 --> 00:35:03,210
matter how it happens that is the policy

00:35:00,000 --> 00:35:05,910
it needs to be happening so what happens

00:35:03,210 --> 00:35:06,960
the first time you do this inverter is

00:35:05,910 --> 00:35:07,450
you're going to have to do some kind of

00:35:06,960 --> 00:35:10,060
technic

00:35:07,450 --> 00:35:12,640
abstraction that technical abstraction

00:35:10,060 --> 00:35:17,020
is the how I've been talking about it's

00:35:12,640 --> 00:35:18,910
how do I apply a password policy on line

00:35:17,020 --> 00:35:21,190
next wed at six how do i apply it on

00:35:18,910 --> 00:35:22,690
debian seven how do we play it on AIX

00:35:21,190 --> 00:35:25,900
how do i apply it all of these systems

00:35:22,690 --> 00:35:27,400
how do we apply it on windows and once

00:35:25,900 --> 00:35:29,770
you've done that technical abstraction

00:35:27,400 --> 00:35:31,510
that's the how this is basically CF

00:35:29,770 --> 00:35:34,089
engine code that can go and look at a

00:35:31,510 --> 00:35:35,859
system and say wow this is the file that

00:35:34,089 --> 00:35:37,750
the settings should be in after I've

00:35:35,859 --> 00:35:40,800
edited the file I should restart the

00:35:37,750 --> 00:35:43,150
service or we load it or whatever and

00:35:40,800 --> 00:35:45,760
then you want to expose some parameters

00:35:43,150 --> 00:35:47,589
from that that set of settings the

00:35:45,760 --> 00:35:50,200
parameters here very simple their number

00:35:47,589 --> 00:35:53,410
of days and number of characters the

00:35:50,200 --> 00:35:57,160
length once you've done that the seaside

00:35:53,410 --> 00:35:58,839
mins or whoever basically can go and

00:35:57,160 --> 00:36:02,109
configure those parameters using a web

00:35:58,839 --> 00:36:04,329
interface or using an API or using a CLI

00:36:02,109 --> 00:36:08,020
whatever they want to use and just

00:36:04,329 --> 00:36:11,410
change 15 characters three months in the

00:36:08,020 --> 00:36:15,010
settings rotor will then go and generate

00:36:11,410 --> 00:36:16,690
CF engine config which will be applied

00:36:15,010 --> 00:36:18,730
once on a server and then continuously

00:36:16,690 --> 00:36:21,609
checked every five minutes by default or

00:36:18,730 --> 00:36:23,829
less frequently if you prefer and send

00:36:21,609 --> 00:36:26,230
backup reports reports foot dude who

00:36:23,829 --> 00:36:29,109
just changed it say yep you changed it

00:36:26,230 --> 00:36:30,730
worked and a report for management that

00:36:29,109 --> 00:36:32,560
has a nice pie chart in it that says

00:36:30,730 --> 00:36:34,510
your security policy is correctly

00:36:32,560 --> 00:36:40,210
applied across one hundred percent of

00:36:34,510 --> 00:36:43,720
your IT systems and this in effect is

00:36:40,210 --> 00:36:46,060
where the separation of code and content

00:36:43,720 --> 00:36:47,859
happens is by this technical abstraction

00:36:46,060 --> 00:36:49,540
but you only have to do that once and

00:36:47,859 --> 00:36:51,280
the nice thing is that a lot of these

00:36:49,540 --> 00:36:57,220
technol abstractions have already been

00:36:51,280 --> 00:37:00,520
done inverter the final benefit and that

00:36:57,220 --> 00:37:02,680
that guy wearing a tie just saw it

00:37:00,520 --> 00:37:04,780
really likes but I also really like is

00:37:02,680 --> 00:37:06,819
that since everything is going through a

00:37:04,780 --> 00:37:09,369
central point you can have a validation

00:37:06,819 --> 00:37:11,470
workflow so every time you change the

00:37:09,369 --> 00:37:13,900
config instead of you just saying okay I

00:37:11,470 --> 00:37:16,270
changed it it's committed not change its

00:37:13,900 --> 00:37:18,760
happened you can have some kind of peer

00:37:16,270 --> 00:37:19,410
review just like a pull request on

00:37:18,760 --> 00:37:20,849
github

00:37:19,410 --> 00:37:23,970
you can say this is what I would like to

00:37:20,849 --> 00:37:26,069
change this is how it comes up and then

00:37:23,970 --> 00:37:28,079
you get either a co-worker or your boss

00:37:26,069 --> 00:37:29,910
or whatever to come and validate that

00:37:28,079 --> 00:37:33,030
and say yes this is actually how it's

00:37:29,910 --> 00:37:35,220
going to work this is a basic overview

00:37:33,030 --> 00:37:37,289
of how these things would work in

00:37:35,220 --> 00:37:39,059
whether you have a pending validation

00:37:37,289 --> 00:37:40,440
state someone validates it it's pending

00:37:39,059 --> 00:37:42,990
deployment doesn't have to be deployed

00:37:40,440 --> 00:37:48,930
immediately and then finally it gets

00:37:42,990 --> 00:37:56,309
deployed so um hopefully I'm going to be

00:37:48,930 --> 00:37:58,109
able to show you a demo maybe not this

00:37:56,309 --> 00:38:01,349
is what my screen is looking like right

00:37:58,109 --> 00:38:05,579
now this indicates to me that the Wi-Fi

00:38:01,349 --> 00:38:10,440
is not working very well so yeah like I

00:38:05,579 --> 00:38:13,950
said I set up a demo this morning and it

00:38:10,440 --> 00:38:17,160
crashed just before lunch and I'm

00:38:13,950 --> 00:38:19,440
suspecting that this is the cause of the

00:38:17,160 --> 00:38:22,770
error less than one bytes transferred in

00:38:19,440 --> 00:38:25,049
30 seconds usually means we have no

00:38:22,770 --> 00:38:29,670
network connectivity so I'm going to try

00:38:25,049 --> 00:38:33,210
and do the demo online if it's slow

00:38:29,670 --> 00:38:36,420
please bear with me okay so this is a

00:38:33,210 --> 00:38:39,660
weather interface it's one of the test

00:38:36,420 --> 00:38:42,059
environments we use in my company you

00:38:39,660 --> 00:38:44,220
basically have two big parts in the

00:38:42,059 --> 00:38:46,529
inverter one is node management which

00:38:44,220 --> 00:38:48,390
allows us to see information about the

00:38:46,529 --> 00:38:50,579
machines we're running and the other one

00:38:48,390 --> 00:38:52,500
is config policy which is yeah

00:38:50,579 --> 00:38:55,710
configuration management and then the

00:38:52,500 --> 00:38:57,569
other two are administering letter so in

00:38:55,710 --> 00:38:59,730
this particular case we have six nodes

00:38:57,569 --> 00:39:02,490
that are waiting to be managed by this

00:38:59,730 --> 00:39:04,410
server these are machines that have got

00:39:02,490 --> 00:39:06,569
the right of agent installed and have

00:39:04,410 --> 00:39:08,670
won an inventory and said hey please i

00:39:06,569 --> 00:39:11,279
want to be managed please manage me give

00:39:08,670 --> 00:39:15,299
me some configs the first thing you can

00:39:11,279 --> 00:39:17,460
see is that these machines have sent a

00:39:15,299 --> 00:39:18,569
very detailed inventory of everything we

00:39:17,460 --> 00:39:20,250
know about them we know this is a

00:39:18,569 --> 00:39:23,369
physical machine it's got three point

00:39:20,250 --> 00:39:26,960
seven gigs of RAM some swap it's an air

00:39:23,369 --> 00:39:30,210
x 5.3 machine maybe not the best example

00:39:26,960 --> 00:39:31,790
there are still lots of them around and

00:39:30,210 --> 00:39:34,280
we can go and look at its hardware we

00:39:31,790 --> 00:39:36,200
find out the version of its firmware we

00:39:34,280 --> 00:39:38,330
can see which kind of processor it's

00:39:36,200 --> 00:39:43,430
using we can actually see the serial

00:39:38,330 --> 00:39:45,800
numbers of each and every Ram card

00:39:43,430 --> 00:39:47,780
inside that machine so we get a whole

00:39:45,800 --> 00:39:49,280
hardware inventory that includes file

00:39:47,780 --> 00:39:51,560
systems the amount of space that's

00:39:49,280 --> 00:39:54,230
available it includes network interfaces

00:39:51,560 --> 00:39:56,840
MAC addresses IP addresses everything

00:39:54,230 --> 00:40:00,050
basically you would go and look at on

00:39:56,840 --> 00:40:01,880
its server just comes up this is pretty

00:40:00,050 --> 00:40:05,000
much the same wall as stuff like facto

00:40:01,880 --> 00:40:06,980
in puppet or oh hi and chef we use a

00:40:05,000 --> 00:40:09,980
tool called fusion inventory to do this

00:40:06,980 --> 00:40:12,980
which is a pearl small pearl agent that

00:40:09,980 --> 00:40:14,300
does that it's pretty nice it also

00:40:12,980 --> 00:40:18,470
brings up a list of all the software

00:40:14,300 --> 00:40:21,310
that's installed this being an IX system

00:40:18,470 --> 00:40:24,560
uses rpm so they have three rpm packages

00:40:21,310 --> 00:40:26,630
great lovely world any environment

00:40:24,560 --> 00:40:30,080
variables that are on the system come up

00:40:26,630 --> 00:40:31,400
here as well processes at the time the

00:40:30,080 --> 00:40:33,170
inventor II was well obviously this is

00:40:31,400 --> 00:40:35,750
not real time it's a lot of contacting

00:40:33,170 --> 00:40:37,040
the node to find out and any virtual

00:40:35,750 --> 00:40:38,330
machines in this case there are no

00:40:37,040 --> 00:40:40,640
virtual machines but if this was a

00:40:38,330 --> 00:40:43,970
virtualization host it would find any

00:40:40,640 --> 00:40:46,580
lightweight containers lxc docker openvz

00:40:43,970 --> 00:40:49,280
would find any hard like heavyweight

00:40:46,580 --> 00:40:53,480
virtualization like virtual box VMware a

00:40:49,280 --> 00:40:55,010
kind of thing KPM and once I've looked

00:40:53,480 --> 00:40:56,990
tues machines I can say okay I'm

00:40:55,010 --> 00:41:00,110
actually going to decide that I want to

00:40:56,990 --> 00:41:02,510
manage these centers and Debian machines

00:41:00,110 --> 00:41:04,220
here and I'm going to accept them into

00:41:02,510 --> 00:41:07,010
whether it's gonna ask me to confirm

00:41:04,220 --> 00:41:10,220
yeah I'm pretty sure cool do I have a

00:41:07,010 --> 00:41:13,400
list of all of the machines that I'm

00:41:10,220 --> 00:41:19,280
managing inverter over here and I can go

00:41:13,400 --> 00:41:21,350
and search yep I can go and search

00:41:19,280 --> 00:41:23,600
through all my machines using different

00:41:21,350 --> 00:41:25,940
criteria I can find out any that have a

00:41:23,600 --> 00:41:28,100
line X operating system type cool Santos

00:41:25,940 --> 00:41:30,230
and Debian I could go deeper and

00:41:28,100 --> 00:41:34,760
actually say i want to say the operating

00:41:30,230 --> 00:41:37,610
system name should be debian okay that

00:41:34,760 --> 00:41:39,470
brings it down to one how about i

00:41:37,610 --> 00:41:41,900
actually add in another criteria that is

00:41:39,470 --> 00:41:53,710
the amount of ram

00:41:41,900 --> 00:41:53,710
is less okay bigger than 120 MX yeah

00:41:54,910 --> 00:42:03,980
hundred twenty eight megabytes yes and

00:41:59,960 --> 00:42:07,460
it's not yeah okay it's a tiny tiny vm

00:42:03,980 --> 00:42:10,160
and once I've put all these criteria n I

00:42:07,460 --> 00:42:11,510
can this is currently there's only one

00:42:10,160 --> 00:42:14,450
machine in there but I can create a

00:42:11,510 --> 00:42:16,940
dynamic group from this criteria by

00:42:14,450 --> 00:42:20,750
clicking quick reply this dynamic saying

00:42:16,940 --> 00:42:24,290
all debian machines with less than 128

00:42:20,750 --> 00:42:27,140
megabytes of ram and once I've saved

00:42:24,290 --> 00:42:29,270
this every time any new machines get

00:42:27,140 --> 00:42:31,190
added to this photo server they will

00:42:29,270 --> 00:42:32,810
automatically go into that group so if

00:42:31,190 --> 00:42:35,510
you apply any conflicts to it obviously

00:42:32,810 --> 00:42:39,110
they're all going to get the configs

00:42:35,510 --> 00:42:41,120
just based on that so this example is

00:42:39,110 --> 00:42:42,140
kind of stupid debian machines that have

00:42:41,120 --> 00:42:43,940
less than hundred and twenty eight

00:42:42,140 --> 00:42:45,560
megabytes of ram why would we configure

00:42:43,940 --> 00:42:47,930
something special on them maybe there's

00:42:45,560 --> 00:42:50,060
a reason it's a lot more useful if you

00:42:47,930 --> 00:42:51,980
want to look for let's say your HP

00:42:50,060 --> 00:42:53,870
hardware machines that have an old

00:42:51,980 --> 00:42:56,180
firmware version then you can run a

00:42:53,870 --> 00:42:59,270
firmware upgrade or if you wanted to

00:42:56,180 --> 00:43:01,010
look for I don't know all the machines

00:42:59,270 --> 00:43:03,050
in data center a because you need to

00:43:01,010 --> 00:43:05,390
change the dns setup because data center

00:43:03,050 --> 00:43:07,340
a has different dns setup and so on and

00:43:05,390 --> 00:43:12,290
so on all the production machines all

00:43:07,340 --> 00:43:13,880
the production machines right so this is

00:43:12,290 --> 00:43:15,650
the inventory side of things a node

00:43:13,880 --> 00:43:17,750
management side of things let's move

00:43:15,650 --> 00:43:23,360
over now to the config management side

00:43:17,750 --> 00:43:25,700
of things we have a list of available

00:43:23,360 --> 00:43:27,350
directives here so in rudder we have

00:43:25,700 --> 00:43:29,330
techniques techniques of the equivalent

00:43:27,350 --> 00:43:32,090
of cookbooks in chef modules in puppet

00:43:29,330 --> 00:43:35,420
sketches in CF engine that enable us to

00:43:32,090 --> 00:43:37,640
do stuff and there are two kinds there's

00:43:35,420 --> 00:43:39,860
what I call generic techniques you can

00:43:37,640 --> 00:43:41,270
go and edit a file any file doesn't have

00:43:39,860 --> 00:43:42,800
to be a father but it knows about just

00:43:41,270 --> 00:43:46,930
give it a file name and you'll edit it

00:43:42,800 --> 00:43:49,370
you can manage processes in the same way

00:43:46,930 --> 00:43:51,650
all these genetic things and then we

00:43:49,370 --> 00:43:54,589
have more application specific ones that

00:43:51,650 --> 00:43:56,749
are let's do an Apache reverse proxy

00:43:54,589 --> 00:43:58,609
let's do an apache HTTP server let's

00:43:56,749 --> 00:44:01,339
manage an openvpn client all of these

00:43:58,609 --> 00:44:03,769
more specific things so we have about I

00:44:01,339 --> 00:44:06,049
think 45 techniques that are available

00:44:03,769 --> 00:44:08,690
currently to do all sorts of these

00:44:06,049 --> 00:44:12,529
things I'm just going to show you the

00:44:08,690 --> 00:44:17,599
open ssh server example for now so let's

00:44:12,529 --> 00:44:20,509
make a production SSH config based on

00:44:17,599 --> 00:44:22,489
this you can look through all the

00:44:20,509 --> 00:44:24,979
parameters that we saw earlier in the

00:44:22,489 --> 00:44:27,890
screenshot and say okay I'm going to

00:44:24,979 --> 00:44:29,809
force this to ipv4 only there might be

00:44:27,890 --> 00:44:31,130
bugs in the ipv6 implementation we don't

00:44:29,809 --> 00:44:35,119
want that on our production systems do

00:44:31,130 --> 00:44:37,789
it Oh crazy let's not use the port tiny

00:44:35,119 --> 00:44:43,700
to security by obscurity we're going to

00:44:37,789 --> 00:44:45,349
use 6666 much more dangerous all of

00:44:43,700 --> 00:44:46,819
these settings you can change I'm just

00:44:45,349 --> 00:44:48,739
putting in random nonsense here in case

00:44:46,819 --> 00:44:53,660
you hadn't noticed by the way but don't

00:44:48,739 --> 00:44:55,819
want password authentication we do want

00:44:53,660 --> 00:44:57,739
public key authentication and I'm going

00:44:55,819 --> 00:44:59,930
to say that route can log in but not

00:44:57,739 --> 00:45:03,319
using a password so if he's using an ssh

00:44:59,930 --> 00:45:05,749
key pecan log in okay once I've saved

00:45:03,319 --> 00:45:07,400
this it's going to ask me for change

00:45:05,749 --> 00:45:12,680
message so I'm going to say I'm creating

00:45:07,400 --> 00:45:14,539
the production SSH config and that

00:45:12,680 --> 00:45:16,819
message i just typed in you know i said

00:45:14,539 --> 00:45:18,680
earlier any changes we make a sent to a

00:45:16,819 --> 00:45:20,630
git repository so that was actually the

00:45:18,680 --> 00:45:25,279
commit message that is in the git

00:45:20,630 --> 00:45:28,700
repository now I have that I can

00:45:25,279 --> 00:45:32,259
actually apply this rule so this

00:45:28,700 --> 00:45:32,259
directive to a wall to all nodes

00:45:36,630 --> 00:45:50,740
now of course it's one the network

00:45:38,500 --> 00:45:54,940
doesn't work hello mm-hmm let's try this

00:45:50,740 --> 00:45:58,330
way okay so this is a default wall that

00:45:54,940 --> 00:46:00,010
was delivered in water this is a list of

00:45:58,330 --> 00:46:03,690
all the directives we've created so a

00:46:00,010 --> 00:46:06,670
directive is a specific config the we

00:46:03,690 --> 00:46:09,250
created it's obviously using the code

00:46:06,670 --> 00:46:11,320
how do we set up ssh on all of these

00:46:09,250 --> 00:46:14,200
different operating systems and our

00:46:11,320 --> 00:46:16,030
specific values so this is me in my

00:46:14,200 --> 00:46:18,220
company having said this is how I want

00:46:16,030 --> 00:46:19,930
SSH set up on production boxes but it's

00:46:18,220 --> 00:46:22,210
not yet applied to anything it's just an

00:46:19,930 --> 00:46:24,430
abstract comfy so I'm going to choose to

00:46:22,210 --> 00:46:27,520
apply that and I'm going to apply it to

00:46:24,430 --> 00:46:29,410
all nodes here which is a magic group

00:46:27,520 --> 00:46:30,820
system group that automatically happens

00:46:29,410 --> 00:46:32,590
contains all the machines managed by

00:46:30,820 --> 00:46:35,320
water i'm going to say all of them

00:46:32,590 --> 00:46:37,780
except the debian machines with less

00:46:35,320 --> 00:46:39,910
than 128 megs of ram so i'm actually

00:46:37,780 --> 00:46:44,050
excluding i'm saying all of the machines

00:46:39,910 --> 00:46:45,430
except some others once again I have a

00:46:44,050 --> 00:46:49,270
change message but I can't be bothered

00:46:45,430 --> 00:46:51,640
to type anything in and that has been

00:46:49,270 --> 00:46:53,310
saved so what is happening now is that

00:46:51,640 --> 00:46:56,110
as I quick so I'm going to do it again

00:46:53,310 --> 00:46:58,540
what a generated CF engine policy and

00:46:56,110 --> 00:47:00,250
all of the agents to do installed on

00:46:58,540 --> 00:47:03,400
these servers are going to come and

00:47:00,250 --> 00:47:06,490
check in and pull that configuration

00:47:03,400 --> 00:47:08,640
code as it were down apply it to the

00:47:06,490 --> 00:47:11,200
machines and then send us back a report

00:47:08,640 --> 00:47:14,310
right now the report is going to be very

00:47:11,200 --> 00:47:17,020
boring it's just going to say applying

00:47:14,310 --> 00:47:19,330
see up here it says applying that means

00:47:17,020 --> 00:47:21,250
I've just changed the config but I

00:47:19,330 --> 00:47:24,460
haven't heard back from the hosts yet I

00:47:21,250 --> 00:47:26,350
don't know what they're saying the

00:47:24,460 --> 00:47:28,300
reason for that is that the agent ones

00:47:26,350 --> 00:47:30,580
by default every five minutes so for the

00:47:28,300 --> 00:47:33,460
first five minutes that there might be a

00:47:30,580 --> 00:47:37,600
delay of time before they can get their

00:47:33,460 --> 00:47:39,430
configs so will we wait let me just show

00:47:37,600 --> 00:47:42,220
you the administration section there's a

00:47:39,430 --> 00:47:46,080
lot of settings here that you can change

00:47:42,220 --> 00:47:49,690
in particular the network settings

00:47:46,080 --> 00:47:51,760
there's just a global network mask that

00:47:49,690 --> 00:47:53,410
authorizes machines to contact you any

00:47:51,760 --> 00:47:55,180
machines not in this network mouse will

00:47:53,410 --> 00:47:56,619
just be completely ignored that means

00:47:55,180 --> 00:47:58,030
not everyone can come and check in and

00:47:56,619 --> 00:48:00,609
say hey I want to be managed by your

00:47:58,030 --> 00:48:02,859
server you can change the agent run

00:48:00,609 --> 00:48:04,450
schedule like I said it's better for

00:48:02,859 --> 00:48:07,240
every five minutes we could change that

00:48:04,450 --> 00:48:10,000
to be a lot less frequent you can choose

00:48:07,240 --> 00:48:12,099
the exact time when that happens I was

00:48:10,000 --> 00:48:15,130
like every hour I can say it would be

00:48:12,099 --> 00:48:18,930
like 10 past so 10 bars midnight there

00:48:15,130 --> 00:48:21,609
must one so on you've been seeing these

00:48:18,930 --> 00:48:23,440
messages that I've been typing every

00:48:21,609 --> 00:48:25,450
time I make a change it says what is the

00:48:23,440 --> 00:48:27,310
message to associate to that change if

00:48:25,450 --> 00:48:29,260
you use some kind of ticket tracking

00:48:27,310 --> 00:48:30,790
system this is where you could put a

00:48:29,260 --> 00:48:32,470
reference to your ticket tracking system

00:48:30,790 --> 00:48:35,170
saying actually this is fixing issue

00:48:32,470 --> 00:48:37,750
number one two three and you can disable

00:48:35,170 --> 00:48:39,970
that or you can actually enable change

00:48:37,750 --> 00:48:44,230
requests so the validation workflow I

00:48:39,970 --> 00:48:49,050
was showing you are you and there's are

00:48:44,230 --> 00:48:49,050
the various settings I won't go into yep

00:48:54,650 --> 00:49:01,050
yeah yeah that's the third setting that

00:48:58,200 --> 00:49:03,780
I didn't show actually so let's say

00:49:01,050 --> 00:49:06,120
you're running every hour at ten past

00:49:03,780 --> 00:49:08,970
and then you can add a random interval

00:49:06,120 --> 00:49:15,180
here that says for example you have it a

00:49:08,970 --> 00:49:17,010
random interval 15 minutes yeah sir it's

00:49:15,180 --> 00:49:19,770
okay it's a good feature actually so

00:49:17,010 --> 00:49:21,660
this means that if every agent is

00:49:19,770 --> 00:49:22,680
supposed to wake up at ten past midnight

00:49:21,660 --> 00:49:24,420
they're actually going to wake up

00:49:22,680 --> 00:49:26,280
somewhere between ten past midnight and

00:49:24,420 --> 00:49:29,250
25 past midnight because we have this

00:49:26,280 --> 00:49:30,810
15-minute it's called splay time in NC

00:49:29,250 --> 00:49:33,090
of engine which is very useful for

00:49:30,810 --> 00:49:34,530
spreading the load because let you say

00:49:33,090 --> 00:49:36,600
if you have a thousand machines that

00:49:34,530 --> 00:49:38,460
wake up and then in the same second or

00:49:36,600 --> 00:49:40,110
try and use the network to contact the

00:49:38,460 --> 00:49:44,310
server and send up the walls it goes

00:49:40,110 --> 00:49:48,320
crazy it's the last thing I wanted to

00:49:44,310 --> 00:49:50,790
show you before I run out of time is the

00:49:48,320 --> 00:49:53,450
change logs so like I said every single

00:49:50,790 --> 00:49:56,670
thing that we change is recorded here

00:49:53,450 --> 00:50:00,630
like earlier I added this production SSH

00:49:56,670 --> 00:50:02,660
config directive and it's done I clicked

00:50:00,630 --> 00:50:05,370
on it i shouldn't've so clicked here

00:50:02,660 --> 00:50:07,740
it's been recorded here with all the

00:50:05,370 --> 00:50:09,720
details this was a creation so there was

00:50:07,740 --> 00:50:11,280
no diff to display and stick the whole

00:50:09,720 --> 00:50:13,590
diff we can see the diff if you want

00:50:11,280 --> 00:50:15,780
it's down here it's going to suit our

00:50:13,590 --> 00:50:19,290
XML format that contains all of the

00:50:15,780 --> 00:50:21,810
settings and then here you see that

00:50:19,290 --> 00:50:23,130
there is the message that i typed in so

00:50:21,810 --> 00:50:27,420
what i typed in if you typed in some

00:50:23,130 --> 00:50:29,040
kind of ticket number you would see that

00:50:27,420 --> 00:50:31,050
too and if i go and look at the server

00:50:29,040 --> 00:50:38,570
now oh I can't look at the server

00:50:31,050 --> 00:50:38,570
because it's not yeah I can yeah

00:50:42,160 --> 00:50:48,910
it's very long way away it's like 600

00:50:45,490 --> 00:50:54,240
kilometers away it takes a long time for

00:50:48,910 --> 00:50:54,240
TCP packets to travel that way about me

00:50:54,840 --> 00:51:07,000
that must be it right yeah could you go

00:50:57,700 --> 00:51:11,560
on yeah yeah it's interesting because i

00:51:07,000 --> 00:51:24,070
am connected to that machine yeah yeah

00:51:11,560 --> 00:51:27,340
okay here we go great right so do I just

00:51:24,070 --> 00:51:29,770
wanted to show you was the configuration

00:51:27,340 --> 00:51:33,070
that we just changed is going to be in

00:51:29,770 --> 00:51:35,710
the get log here you see here I said

00:51:33,070 --> 00:51:38,980
creating the production SSH config we

00:51:35,710 --> 00:51:40,870
added that and this is a git commit in

00:51:38,980 --> 00:51:42,160
the git repository that is underneath

00:51:40,870 --> 00:51:43,630
butter so you could have this

00:51:42,160 --> 00:51:45,730
synchronize to github you could have the

00:51:43,630 --> 00:51:46,750
synchronized to a backup server if you

00:51:45,730 --> 00:51:48,490
don't want to use the web interface

00:51:46,750 --> 00:51:50,110
because you're that kind of person

00:51:48,490 --> 00:51:53,740
you're a geek and you don't need the web

00:51:50,110 --> 00:51:55,690
interface I'm I'm it's okay you can just

00:51:53,740 --> 00:51:58,140
use the git interface can get log you

00:51:55,690 --> 00:52:03,430
can get show if I get show that commits

00:51:58,140 --> 00:52:06,850
it's going to show me what did i do well

00:52:03,430 --> 00:52:08,830
I didn't do anything maybe that's the

00:52:06,850 --> 00:52:11,830
problem yeah it's going to show me the

00:52:08,830 --> 00:52:13,960
exact file that was changed this one

00:52:11,830 --> 00:52:16,090
again is the same way of both one we

00:52:13,960 --> 00:52:18,610
just saw any interface but if I look at

00:52:16,090 --> 00:52:21,190
a change this was time I keep putting in

00:52:18,610 --> 00:52:23,620
the wrong thing this is a change over

00:52:21,190 --> 00:52:26,200
here what happened is that we changed

00:52:23,620 --> 00:52:28,450
the group target from all nodes to all

00:52:26,200 --> 00:52:31,720
nodes except debian machines and we

00:52:28,450 --> 00:52:33,880
added a directive I didn't enter any

00:52:31,720 --> 00:52:38,920
message in that one but we can still see

00:52:33,880 --> 00:52:45,090
it in a get log here which would be here

00:52:38,920 --> 00:52:45,090
so if we look at that commit

00:52:46,680 --> 00:52:51,590
we can see maybe you can have some color

00:52:52,850 --> 00:53:04,350
yeah I always do that one yes so we can

00:53:01,800 --> 00:53:07,140
see the Deaf saying the target was

00:53:04,350 --> 00:53:08,460
changed from this thing whoo to that

00:53:07,140 --> 00:53:10,770
thing which is going to hard to read and

00:53:08,460 --> 00:53:13,410
the directives will change to add this

00:53:10,770 --> 00:53:15,030
one in this this is technical logs

00:53:13,410 --> 00:53:17,100
obviously at this stage you've got IDs

00:53:15,030 --> 00:53:18,540
in there the pretty opaque which is why

00:53:17,100 --> 00:53:21,090
we have a web interface but so

00:53:18,540 --> 00:53:27,300
everything is hackable as it were if I

00:53:21,090 --> 00:53:31,470
get okay I think I've showed you what i

00:53:27,300 --> 00:53:36,330
wanted to show that i just wanted to say

00:53:31,470 --> 00:53:39,270
a few final words about extending butter

00:53:36,330 --> 00:53:43,050
because I presented this to quite a few

00:53:39,270 --> 00:53:44,490
sis admins people usually say yeah

00:53:43,050 --> 00:53:47,430
that's pretty cool i could see that my

00:53:44,490 --> 00:53:49,020
co-workers would need that but uh i'm

00:53:47,430 --> 00:53:53,430
not going to be in control anymore I

00:53:49,020 --> 00:53:57,600
mean okay um how do I actually change a

00:53:53,430 --> 00:53:59,900
config using what if I don't want to use

00:53:57,600 --> 00:54:02,130
the ones you provided only these do mine

00:53:59,900 --> 00:54:04,920
so let's just take a quick look at this

00:54:02,130 --> 00:54:07,680
graph here we should looked at the nodes

00:54:04,920 --> 00:54:09,840
on the right-hand side earlier we make

00:54:07,680 --> 00:54:11,550
groups out of them and we have

00:54:09,840 --> 00:54:13,650
techniques which are these abstract

00:54:11,550 --> 00:54:16,310
modules such a how you configure stuff

00:54:13,650 --> 00:54:18,780
it's a code part of the content and code

00:54:16,310 --> 00:54:20,970
we should like puppet modules chef

00:54:18,780 --> 00:54:23,820
cookbook so on we make directives and

00:54:20,970 --> 00:54:26,280
and we apply the directives by walls two

00:54:23,820 --> 00:54:27,900
groups okay so what we would need to do

00:54:26,280 --> 00:54:30,480
let's say you don't like the way we

00:54:27,900 --> 00:54:32,280
implemented our ssh server config and so

00:54:30,480 --> 00:54:34,950
you want to do your own you would change

00:54:32,280 --> 00:54:36,240
the technique that isn't behind that you

00:54:34,950 --> 00:54:38,280
want to look at this techniques block

00:54:36,240 --> 00:54:40,920
here and you can actually write any

00:54:38,280 --> 00:54:42,660
configuration you want in a technique if

00:54:40,920 --> 00:54:44,660
you are that configuration management

00:54:42,660 --> 00:54:48,600
hero we saw earlier with the Superman

00:54:44,660 --> 00:54:51,030
and lego guy you can go and write CF

00:54:48,600 --> 00:54:53,790
engine code to do whatever it is you

00:54:51,030 --> 00:54:56,340
want and expose just the parameters to

00:54:53,790 --> 00:54:58,770
your coworkers you can choose exactly

00:54:56,340 --> 00:54:59,650
what web interface you want to design

00:54:58,770 --> 00:55:01,630
using

00:54:59,650 --> 00:55:03,880
simple language that probably sounds

00:55:01,630 --> 00:55:05,860
scary and I told you earlier that CF any

00:55:03,880 --> 00:55:07,300
language was a bit scary so I just want

00:55:05,860 --> 00:55:09,130
to show you an example of what this

00:55:07,300 --> 00:55:10,600
actually looks like using this this

00:55:09,130 --> 00:55:14,410
framework called ncf that we also

00:55:10,600 --> 00:55:17,680
created this is a very simple technique

00:55:14,410 --> 00:55:19,630
just install the package crappies what

00:55:17,680 --> 00:55:22,270
uses a template to create a config file

00:55:19,630 --> 00:55:25,720
and restarts the service if it is

00:55:22,270 --> 00:55:35,550
changed the config file it's just these

00:55:25,720 --> 00:55:39,280
five lines it's very simple to write um

00:55:35,550 --> 00:55:41,200
final word the current status of the

00:55:39,280 --> 00:55:43,720
project the question I get a lot i'm

00:55:41,200 --> 00:55:46,240
just taking a bit of advance here we

00:55:43,720 --> 00:55:47,920
started this five years ago in 2009 I

00:55:46,240 --> 00:55:50,740
know that makes me feel really old now

00:55:47,920 --> 00:55:54,070
but it's not that long in software

00:55:50,740 --> 00:55:56,230
history and now it's come pretty

00:55:54,070 --> 00:55:58,840
reliable we've got lots of big users

00:55:56,230 --> 00:56:01,810
running weather we have user that

00:55:58,840 --> 00:56:04,030
recently pushed usage up to 15,000 nodes

00:56:01,810 --> 00:56:06,850
in parallel I did not think was going to

00:56:04,030 --> 00:56:09,910
work but he made it work and contributed

00:56:06,850 --> 00:56:12,040
to nice bug fixes this is what olo has

00:56:09,910 --> 00:56:15,870
to say about but if you know if although

00:56:12,040 --> 00:56:18,940
it's a code analysis tool 1 x black duck

00:56:15,870 --> 00:56:23,220
so they say that we have 28 different

00:56:18,940 --> 00:56:26,170
contributors 192,000 lines of code I am

00:56:23,220 --> 00:56:28,900
quite astonished but I suspect it counts

00:56:26,170 --> 00:56:30,880
different branches separately well

00:56:28,900 --> 00:56:32,560
commented source code youngwood

00:56:30,880 --> 00:56:35,260
established codebase large development

00:56:32,560 --> 00:56:36,790
team and apparently it took us 49 years

00:56:35,260 --> 00:56:39,190
of effort it did not like i said it's me

00:56:36,790 --> 00:56:46,500
five years but anyway that's what other

00:56:39,190 --> 00:56:46,500
has to say any questions yeah

00:56:54,650 --> 00:56:58,830
so I'll repeat the question for the

00:56:57,120 --> 00:57:00,990
recording it was apparently we're tied

00:56:58,830 --> 00:57:04,800
to fusion inventory inventory tool could

00:57:00,990 --> 00:57:07,620
we use OCS instead probably yeah I've

00:57:04,800 --> 00:57:09,930
never tried but the way the inventory

00:57:07,620 --> 00:57:11,820
gets into the web app is it uses a small

00:57:09,930 --> 00:57:13,920
application called an endpoint that

00:57:11,820 --> 00:57:15,980
takes the file that fusion inventory

00:57:13,920 --> 00:57:18,240
generates which is an XML file and

00:57:15,980 --> 00:57:21,330
converts it into writers internal

00:57:18,240 --> 00:57:23,640
storage so it may well work with OCS

00:57:21,330 --> 00:57:25,740
format should work fine it's a good the

00:57:23,640 --> 00:57:28,050
format is almost the same for OCS and

00:57:25,740 --> 00:57:31,440
fusion great you might have to patch one

00:57:28,050 --> 00:57:40,380
or two lines but okay cool there was

00:57:31,440 --> 00:57:42,150
another question here yeah so question

00:57:40,380 --> 00:57:43,920
was do I have to configure everything in

00:57:42,150 --> 00:57:46,260
a web interface so can I use the command

00:57:43,920 --> 00:57:49,070
line you can use the command line to do

00:57:46,260 --> 00:57:50,760
all these things either via the git

00:57:49,070 --> 00:57:53,520
repository that I was just showing you

00:57:50,760 --> 00:57:55,140
all via an API there's a full rest api

00:57:53,520 --> 00:57:57,960
anything you can do in the web interface

00:57:55,140 --> 00:58:00,590
you can do via the rest api as well so

00:57:57,960 --> 00:58:05,720
you can script this you can automate it

00:58:00,590 --> 00:58:05,720
with the API or just command lines

00:58:07,330 --> 00:58:11,650
there are some basic shell commands

00:58:09,390 --> 00:58:14,260
there's nothing as complete as the web

00:58:11,650 --> 00:58:17,410
interface on the command line but you

00:58:14,260 --> 00:58:26,380
could do most things using simple shell

00:58:17,410 --> 00:58:28,780
commands pretty simple things how do you

00:58:26,380 --> 00:58:31,030
do service orchestration like first

00:58:28,780 --> 00:58:33,700
which of the three web servers but keep

00:58:31,030 --> 00:58:36,520
the other three running then switch off

00:58:33,700 --> 00:58:38,220
the first database server updated to put

00:58:36,520 --> 00:58:42,580
it up again and then do the other junk

00:58:38,220 --> 00:58:45,340
so the right good question the annoying

00:58:42,580 --> 00:58:46,930
case but happens frequently what we

00:58:45,340 --> 00:58:49,630
would do in this case is that we would

00:58:46,930 --> 00:58:51,490
just implement that in CF engine because

00:58:49,630 --> 00:58:53,890
every everything that runs on the host

00:58:51,490 --> 00:58:55,510
is CF engine code so we would write CF

00:58:53,890 --> 00:58:58,150
engine code that includes the signaling

00:58:55,510 --> 00:59:00,460
mechanism or the detection too so the

00:58:58,150 --> 00:59:03,670
one host one talks to host two or three

00:59:00,460 --> 00:59:05,740
and detect it like that this this

00:59:03,670 --> 00:59:08,800
theoretical or practical what you just

00:59:05,740 --> 00:59:10,960
said and should I understand the quest

00:59:08,800 --> 00:59:14,320
if you write such a solution or would

00:59:10,960 --> 00:59:17,730
that be an idea to do it it's both we

00:59:14,320 --> 00:59:20,140
have written such solutions yeah yeah

00:59:17,730 --> 00:59:22,480
that we don't have anything that is

00:59:20,140 --> 00:59:23,740
built-in to take a generic technique

00:59:22,480 --> 00:59:25,990
like the ones I showed you to do that

00:59:23,740 --> 00:59:27,880
because usually these situations very

00:59:25,990 --> 00:59:29,920
specific to one company or one

00:59:27,880 --> 00:59:31,420
infrastructure so I usually suggest the

00:59:29,920 --> 00:59:38,770
people who actually have to write your

00:59:31,420 --> 00:59:41,830
own to do except coming one and what

00:59:38,770 --> 00:59:44,020
else do you need for synchronization or

00:59:41,830 --> 00:59:46,840
other the other question other other

00:59:44,020 --> 00:59:51,520
question it could use ink to rather

00:59:46,840 --> 00:59:53,080
service using get so could you yes yeah

00:59:51,520 --> 00:59:55,090
a lot of our customers do that actually

00:59:53,080 --> 00:59:56,560
they have a water server in dev over a

00:59:55,090 --> 00:59:58,480
server in pre-production add about a

00:59:56,560 --> 01:00:00,640
server in production and they do a git

00:59:58,480 --> 01:00:03,490
pull from one and a git push on the

01:00:00,640 --> 01:00:06,400
other to migrate the configs up but the

01:00:03,490 --> 01:00:08,230
users and such is the users are not in

01:00:06,400 --> 01:00:10,510
the get that separate the nodes are not

01:00:08,230 --> 01:00:13,840
in the kit as well all of the config

01:00:10,510 --> 01:00:15,730
configs as in your SSH settings and so

01:00:13,840 --> 01:00:17,160
on are in the gate okay and then the

01:00:15,730 --> 01:00:19,319
users are in

01:00:17,160 --> 01:00:21,630
data structures inside of the rudder

01:00:19,319 --> 01:00:23,700
code or is it a database that you could

01:00:21,630 --> 01:00:25,289
share or that you could replicate to the

01:00:23,700 --> 01:00:27,750
others so there's there's several ways

01:00:25,289 --> 01:00:29,280
one is to use this over to use this file

01:00:27,750 --> 01:00:31,200
that you can declare users in with

01:00:29,280 --> 01:00:34,500
passwords or you can connect it to an

01:00:31,200 --> 01:00:37,349
ldap database well I'll app server and

01:00:34,500 --> 01:00:39,260
query and you map the get commits names

01:00:37,349 --> 01:00:42,569
so the user name doesn't come up with

01:00:39,260 --> 01:00:44,400
you have to have a name in the LDAP or

01:00:42,569 --> 01:00:46,109
whatever you do yes be the same name

01:00:44,400 --> 01:00:48,890
let's say yeah otherwise you just use

01:00:46,109 --> 01:00:55,859
the username the login name okay cool

01:00:48,890 --> 01:00:58,079
thanks thank you son our company we have

01:00:55,859 --> 01:01:00,780
the limitation to not run config

01:00:58,079 --> 01:01:03,660
management agents unless explicitly

01:01:00,780 --> 01:01:10,910
triggered mm-hmm could you do that with

01:01:03,660 --> 01:01:13,829
rudder like go and it runs mmm it's not

01:01:10,910 --> 01:01:15,420
configurable directly today but you

01:01:13,829 --> 01:01:18,119
could change that so it never runs

01:01:15,420 --> 01:01:23,099
automatically and just have a remote

01:01:18,119 --> 01:01:25,470
trigger to do it yeah it would be for me

01:01:23,099 --> 01:01:27,029
it would be like 10 minutes work because

01:01:25,470 --> 01:01:28,410
I know the software quite well if for

01:01:27,029 --> 01:01:31,260
someone who's never done it it might be

01:01:28,410 --> 01:01:33,930
a bit longer of a seat to set it up okay

01:01:31,260 --> 01:01:35,910
so but if we would do this the the what

01:01:33,930 --> 01:01:37,740
was it called the compliant and yeah the

01:01:35,910 --> 01:01:39,660
compliance would be terrible I would say

01:01:37,740 --> 01:01:42,359
they were % the whole time you're right

01:01:39,660 --> 01:01:45,240
yeah but you would see the moment it

01:01:42,359 --> 01:01:49,260
would be would be done right yeah change

01:01:45,240 --> 01:01:50,940
to 100 yeah but if you have a frequency

01:01:49,260 --> 01:01:52,349
of one hour for example it will stay at

01:01:50,940 --> 01:01:54,329
one hundred percent for one hour and

01:01:52,349 --> 01:01:57,390
after one hours ahead and no it's not

01:01:54,329 --> 01:01:58,410
responding anymore yokay you had to

01:01:57,390 --> 01:02:00,270
change that of course that it yeah

01:01:58,410 --> 01:02:02,099
didn't wait for one hour and then right

01:02:00,270 --> 01:02:03,750
now I'm actually working on that this is

01:02:02,099 --> 01:02:05,130
what a two point 10 which was released

01:02:03,750 --> 01:02:06,630
last week and I just showed you we're

01:02:05,130 --> 01:02:08,730
working on for this for what a two point

01:02:06,630 --> 01:02:12,299
11 which is going to come out at the end

01:02:08,730 --> 01:02:13,950
of may so in one half months now we're

01:02:12,299 --> 01:02:15,990
going to be able to disable the

01:02:13,950 --> 01:02:18,119
compliance mode so if you wanted to do

01:02:15,990 --> 01:02:19,950
that you could say I just want the nodes

01:02:18,119 --> 01:02:21,809
to send me a heartbeat saying yep I'm

01:02:19,950 --> 01:02:24,089
alive yep I'm alive and it would just

01:02:21,809 --> 01:02:28,579
say the node is alive last time it

01:02:24,089 --> 01:02:41,640
checked the configs they were okay good

01:02:28,579 --> 01:02:44,189
thank you any more questions yeah it's

01:02:41,640 --> 01:02:47,309
google's full those bounty one with 1 2

01:02:44,189 --> 01:02:53,549
3 4 5 36 Google's 6 o's on Google and

01:02:47,309 --> 01:02:58,109
they chose one with seven yeah it's not

01:02:53,549 --> 01:03:01,920
the easiest to remember so well no more

01:02:58,109 --> 01:03:05,719
questions okay well thank you very much

01:03:01,920 --> 01:03:05,719
for for listening and for your questions

01:03:16,740 --> 01:03:18,800

YouTube URL: https://www.youtube.com/watch?v=cmkH-e_nmH8


