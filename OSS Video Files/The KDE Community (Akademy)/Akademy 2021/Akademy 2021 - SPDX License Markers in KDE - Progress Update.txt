Title: Akademy 2021 - SPDX License Markers in KDE - Progress Update
Publication date: 2021-06-29
Playlist: Akademy 2021
Description: 
	By Andreas Cord-Landwehr
SPDX is standard to add license information to source code files in a machine readable way. This is important because:
* it allows automatic checking
* it enables super cool new features that were not possible before
* it prevents ourselves from accidentally providing software that has an unusable/conflicting license
In KDE Frameworks all non-deprecated parts already contain these markers, Plasma also did major work in this direction and similar efforts happened at further places in KDE. This talk will highlight what was achieved, where we are and it gives some ideas what people now can do with having license markers available.
Captions: 
	00:00:01,110 --> 00:00:08,580
[Music]

00:00:11,599 --> 00:00:14,960
hi

00:00:12,719 --> 00:00:17,039
can you hear me yes i can hear you

00:00:14,960 --> 00:00:20,080
finally are you ready to go

00:00:17,039 --> 00:00:22,640
i think so okay then i think there's

00:00:20,080 --> 00:00:25,840
nothing stopping us then go ahead

00:00:22,640 --> 00:00:29,119
okay welcome to my talk and well

00:00:25,840 --> 00:00:32,160
let's see how statistics also look in

00:00:29,119 --> 00:00:32,719
in this field i want to talk a little

00:00:32,160 --> 00:00:36,000
bit about

00:00:32,719 --> 00:00:37,920
spdx license markers and reuse

00:00:36,000 --> 00:00:39,360
statements and before i show you

00:00:37,920 --> 00:00:43,120
statistics

00:00:39,360 --> 00:00:46,800
i will recall what they are

00:00:43,120 --> 00:00:49,520
let's start with uh what is a license um

00:00:46,800 --> 00:00:50,079
whenever you contribute anything to kde

00:00:49,520 --> 00:00:53,280
you

00:00:50,079 --> 00:00:56,640
do some creative work you um

00:00:53,280 --> 00:00:59,840
own the right that this is only yours

00:00:56,640 --> 00:01:02,160
um that is good and fine but in

00:00:59,840 --> 00:01:04,159
open source software we say it's good

00:01:02,160 --> 00:01:05,199
that other people have the right to use

00:01:04,159 --> 00:01:08,400
it to study it

00:01:05,199 --> 00:01:10,400
to share it to improve it and

00:01:08,400 --> 00:01:12,799
by default they are not allowed to do

00:01:10,400 --> 00:01:14,720
that and to allow those people

00:01:12,799 --> 00:01:16,880
those other people to do something like

00:01:14,720 --> 00:01:19,439
that we have to grant

00:01:16,880 --> 00:01:19,920
them licenses and they are different

00:01:19,439 --> 00:01:23,200
free

00:01:19,920 --> 00:01:24,840
open source uh licenses most prominently

00:01:23,200 --> 00:01:29,360
in kdes it's a gpl

00:01:24,840 --> 00:01:32,799
lgpl mit or bsd and some more

00:01:29,360 --> 00:01:35,920
and you have to grant them in a legal

00:01:32,799 --> 00:01:38,159
correct way such

00:01:35,920 --> 00:01:40,880
to ensure that others are able to to use

00:01:38,159 --> 00:01:43,600
what we are doing

00:01:40,880 --> 00:01:44,720
when you are doing that you usually have

00:01:43,600 --> 00:01:47,280
something like that

00:01:44,720 --> 00:01:50,320
this is some arbitrary license header i

00:01:47,280 --> 00:01:52,840
took from our code base

00:01:50,320 --> 00:01:54,560
it's typically a command at the head of

00:01:52,840 --> 00:01:57,280
file at the top

00:01:54,560 --> 00:01:58,079
you will see a list of the copyright

00:01:57,280 --> 00:02:01,439
holders

00:01:58,079 --> 00:02:04,880
so the people who own the creative right

00:02:01,439 --> 00:02:06,640
to to that contribution and then we have

00:02:04,880 --> 00:02:09,599
a lengthy text

00:02:06,640 --> 00:02:11,599
this one is about three paragraphs and

00:02:09,599 --> 00:02:15,280
simply explains

00:02:11,599 --> 00:02:19,200
this code is under the gpl

00:02:15,280 --> 00:02:22,239
2.0 or any later version

00:02:19,200 --> 00:02:22,640
and the problem with these long texts if

00:02:22,239 --> 00:02:24,879
you

00:02:22,640 --> 00:02:26,400
create another source code file and copy

00:02:24,879 --> 00:02:28,640
the license header because

00:02:26,400 --> 00:02:29,920
it's already there and then you decide

00:02:28,640 --> 00:02:33,280
well it's maybe not

00:02:29,920 --> 00:02:35,120
the gpl but the lgpl and you start to

00:02:33,280 --> 00:02:38,480
modifying a little bit and

00:02:35,120 --> 00:02:41,360
replace the general by by a lesser

00:02:38,480 --> 00:02:42,160
and then maybe forget also replacing

00:02:41,360 --> 00:02:44,160
that one

00:02:42,160 --> 00:02:45,680
then we already have a problem to see

00:02:44,160 --> 00:02:48,800
well what is meant is it

00:02:45,680 --> 00:02:51,680
gpl or lg and

00:02:48,800 --> 00:02:52,560
such problems occur often really really

00:02:51,680 --> 00:02:54,720
often

00:02:52,560 --> 00:02:56,000
and it's um hard to figure out by

00:02:54,720 --> 00:02:59,280
automatic tooling

00:02:56,000 --> 00:03:01,840
what do we have for licenses

00:02:59,280 --> 00:03:03,440
and that's the reason why we discussed

00:03:01,840 --> 00:03:05,680
one and a half years ago

00:03:03,440 --> 00:03:06,959
to go with reuse compatible license

00:03:05,680 --> 00:03:10,159
statements

00:03:06,959 --> 00:03:13,599
this is mostly the same at the top

00:03:10,159 --> 00:03:16,640
we simply replace copyright by this

00:03:13,599 --> 00:03:19,360
spd-x file copyright text and

00:03:16,640 --> 00:03:20,400
the important part is that we replace

00:03:19,360 --> 00:03:22,800
the long

00:03:20,400 --> 00:03:25,040
license header text by a machine

00:03:22,800 --> 00:03:27,280
readable identifier

00:03:25,040 --> 00:03:28,959
and that's easier to read it's easy it's

00:03:27,280 --> 00:03:32,159
harder to make errors

00:03:28,959 --> 00:03:34,640
and it allows to make automatic tests

00:03:32,159 --> 00:03:35,920
and also create statistics of what we

00:03:34,640 --> 00:03:38,400
have here

00:03:35,920 --> 00:03:38,959
and during that time a lot of things

00:03:38,400 --> 00:03:43,040
happened

00:03:38,959 --> 00:03:43,040
and many many people helped

00:03:44,560 --> 00:03:48,560
before i show that um if you want to

00:03:48,080 --> 00:03:51,760
read

00:03:48,560 --> 00:03:53,920
more and know more know more about um

00:03:51,760 --> 00:03:55,599
how these framework is working this

00:03:53,920 --> 00:03:57,519
spd-x framework

00:03:55,599 --> 00:03:58,959
there's a really good website the reuse

00:03:57,519 --> 00:04:02,000
dot software website

00:03:58,959 --> 00:04:02,959
even with a small three-minute video

00:04:02,000 --> 00:04:06,080
that explains

00:04:02,959 --> 00:04:07,120
everything to you there's all the legal

00:04:06,080 --> 00:04:10,239
documentation

00:04:07,120 --> 00:04:11,439
if you want to go into that and of

00:04:10,239 --> 00:04:13,680
course we have our

00:04:11,439 --> 00:04:15,760
wiki page with how to's and guidelines

00:04:13,680 --> 00:04:19,199
how we are doing that in kde

00:04:15,760 --> 00:04:22,000
in a nutshell it's quite simple if you

00:04:19,199 --> 00:04:23,759
create a new new file you have to add a

00:04:22,000 --> 00:04:26,960
license identifier tag

00:04:23,759 --> 00:04:28,720
you have to add a copyright tag and

00:04:26,960 --> 00:04:30,639
for the license that you are using you

00:04:28,720 --> 00:04:33,360
have to add the license ads

00:04:30,639 --> 00:04:34,479
into a specific subfolder it's all

00:04:33,360 --> 00:04:37,440
documented here and

00:04:34,479 --> 00:04:38,639
it's actually really hard to do it wrong

00:04:37,440 --> 00:04:41,759
and they're even tools that

00:04:38,639 --> 00:04:44,320
check for you that you are doing it

00:04:41,759 --> 00:04:46,080
and during the last one and a half years

00:04:44,320 --> 00:04:49,440
we started to replacing

00:04:46,080 --> 00:04:51,840
the old existing license headers by well

00:04:49,440 --> 00:04:53,120
these shorter expressions and that's not

00:04:51,840 --> 00:04:56,479
always that simple

00:04:53,120 --> 00:04:58,880
um we have automatic tooling for that

00:04:56,479 --> 00:05:00,479
it's also documented at the wiki page if

00:04:58,880 --> 00:05:03,520
you want to convert it

00:05:00,479 --> 00:05:04,080
because um we have to match exactly what

00:05:03,520 --> 00:05:06,880
license

00:05:04,080 --> 00:05:07,759
we have we must not change the license

00:05:06,880 --> 00:05:10,479
by doing that

00:05:07,759 --> 00:05:11,280
because we only want to make it machine

00:05:10,479 --> 00:05:14,720
readable

00:05:11,280 --> 00:05:14,720
but we must not change it

00:05:15,199 --> 00:05:20,080
and i will look in some areas where a

00:05:18,400 --> 00:05:23,120
lot of progress happened

00:05:20,080 --> 00:05:27,120
this is frameworks for example

00:05:23,120 --> 00:05:29,360
and there we are actually done um

00:05:27,120 --> 00:05:31,680
here you can see the number of files we

00:05:29,360 --> 00:05:34,639
have that are about

00:05:31,680 --> 00:05:35,440
um yeah close to 9000 files we have at

00:05:34,639 --> 00:05:37,199
the moment

00:05:35,440 --> 00:05:40,240
and there's a small gap between the

00:05:37,199 --> 00:05:42,080
files that are converted to spd-x

00:05:40,240 --> 00:05:43,440
and those are not and those are the

00:05:42,080 --> 00:05:46,880
files that are duplicated

00:05:43,440 --> 00:05:50,160
these are modules that will be gone with

00:05:46,880 --> 00:05:55,120
kf6 and so we didn't spend time for it

00:05:50,160 --> 00:05:57,199
so at that point with about kf573

00:05:55,120 --> 00:05:58,479
we were done with the whole progress and

00:05:57,199 --> 00:06:00,880
you see nicely that

00:05:58,479 --> 00:06:02,000
for all new files there's a small upward

00:06:00,880 --> 00:06:05,360
trend

00:06:02,000 --> 00:06:07,039
so people are still well

00:06:05,360 --> 00:06:10,080
are using it for new files which is

00:06:07,039 --> 00:06:12,800
really good and important

00:06:10,080 --> 00:06:14,800
another area where we currently can see

00:06:12,800 --> 00:06:17,120
a lot of progress is plasma

00:06:14,800 --> 00:06:18,400
and that's extremely nice because i

00:06:17,120 --> 00:06:20,240
didn't do anything and

00:06:18,400 --> 00:06:21,520
people started doing the conversions

00:06:20,240 --> 00:06:24,720
here and

00:06:21,520 --> 00:06:27,280
occasionally added me to the prerequests

00:06:24,720 --> 00:06:28,639
um so you see i did some statistics

00:06:27,280 --> 00:06:32,000
about two weeks ago

00:06:28,639 --> 00:06:34,880
before the release but um it's

00:06:32,000 --> 00:06:35,919
well it's on a really good track and

00:06:34,880 --> 00:06:39,280
with the

00:06:35,919 --> 00:06:42,800
i just didn't um did a review on a

00:06:39,280 --> 00:06:45,680
full request so we are probably

00:06:42,800 --> 00:06:46,319
right here at the moment in one or two

00:06:45,680 --> 00:06:49,840
one

00:06:46,319 --> 00:06:49,840
or two days

00:06:50,560 --> 00:06:57,360
and if we look at the overall

00:06:53,759 --> 00:07:00,960
list um it looks actually not that bad

00:06:57,360 --> 00:07:02,880
um let's start at the top i did a small

00:07:00,960 --> 00:07:05,199
calculation of all the source codes

00:07:02,880 --> 00:07:06,000
files i could check out with kde source

00:07:05,199 --> 00:07:09,360
build

00:07:06,000 --> 00:07:11,039
and simply looked at the cpp and header

00:07:09,360 --> 00:07:13,120
files which is

00:07:11,039 --> 00:07:14,720
not not completely accurate but girl is

00:07:13,120 --> 00:07:16,319
a really good impression and it's easy

00:07:14,720 --> 00:07:20,080
to calculate

00:07:16,319 --> 00:07:23,120
and we have about well closely to 7000

00:07:20,080 --> 00:07:24,000
files and close to 40 000 files we have

00:07:23,120 --> 00:07:27,120
converted

00:07:24,000 --> 00:07:30,479
which is really cool um

00:07:27,120 --> 00:07:32,800
and you see frameworks that are done or

00:07:30,479 --> 00:07:33,520
mostly done well pim i completely forgot

00:07:32,800 --> 00:07:35,680
they are

00:07:33,520 --> 00:07:38,000
simply done they did an impressive job

00:07:35,680 --> 00:07:41,120
and it's all converted

00:07:38,000 --> 00:07:44,240
from works are done essentially

00:07:41,120 --> 00:07:46,960
plasma will be done soon

00:07:44,240 --> 00:07:47,520
we have a full a few smaller modules

00:07:46,960 --> 00:07:50,800
that

00:07:47,520 --> 00:07:53,360
probably will not that hard to convert

00:07:50,800 --> 00:07:54,240
and there i think that's the area where

00:07:53,360 --> 00:07:56,639
we have um

00:07:54,240 --> 00:07:57,280
some work to do but it's looking really

00:07:56,639 --> 00:07:59,199
good

00:07:57,280 --> 00:08:02,879
and it's so nice to see a lot of

00:07:59,199 --> 00:08:06,080
different people doing the work

00:08:02,879 --> 00:08:09,440
and if we do something like um

00:08:06,080 --> 00:08:11,840
adding such markers to the files we can

00:08:09,440 --> 00:08:14,639
do a lot of tooling and that's something

00:08:11,840 --> 00:08:17,440
i just tried out yesterday

00:08:14,639 --> 00:08:18,960
i did a check out of all the source code

00:08:17,440 --> 00:08:22,960
i could get

00:08:18,960 --> 00:08:24,000
and well i grabbed for our license

00:08:22,960 --> 00:08:26,000
markers and

00:08:24,000 --> 00:08:27,120
did some statistics which license

00:08:26,000 --> 00:08:30,879
statements do we

00:08:27,120 --> 00:08:33,039
have in our code base so we can see

00:08:30,879 --> 00:08:34,479
and i must go to closer because it's

00:08:33,039 --> 00:08:38,159
really small for me

00:08:34,479 --> 00:08:41,360
um we have uh the majority it was

00:08:38,159 --> 00:08:46,320
gpl2 or later then we have the

00:08:41,360 --> 00:08:49,839
really big area with um lg pl 2 or later

00:08:46,320 --> 00:08:52,080
and this is these combination of 2 or 3

00:08:49,839 --> 00:08:52,080
or

00:08:53,600 --> 00:08:58,640
accepted by the kdev and so on

00:08:56,640 --> 00:09:00,480
you see uh it's a good trend i think

00:08:58,640 --> 00:09:01,680
that's the that's expected to be the

00:09:00,480 --> 00:09:04,640
majority

00:09:01,680 --> 00:09:05,519
what we probably should look into in the

00:09:04,640 --> 00:09:08,160
future is

00:09:05,519 --> 00:09:09,440
um well we have a lot of different

00:09:08,160 --> 00:09:12,560
statements

00:09:09,440 --> 00:09:14,640
i made it cut at all statements that

00:09:12,560 --> 00:09:17,680
were used at most 10 times and

00:09:14,640 --> 00:09:20,880
there are a lot of different interesting

00:09:17,680 --> 00:09:23,519
licenses we have at few occasions

00:09:20,880 --> 00:09:24,720
but we can audit later now we have an

00:09:23,519 --> 00:09:27,760
overview

00:09:24,720 --> 00:09:30,480
what we have here and and

00:09:27,760 --> 00:09:31,839
that's actually it um if you are

00:09:30,480 --> 00:09:34,080
interested

00:09:31,839 --> 00:09:35,360
go to the to the website go to to the

00:09:34,080 --> 00:09:37,760
wiki it's

00:09:35,360 --> 00:09:38,720
easy to to do conversions um just ping

00:09:37,760 --> 00:09:42,640
me on rc

00:09:38,720 --> 00:09:44,640
or matrix and many many thanks to other

00:09:42,640 --> 00:09:46,240
people who are involved and making this

00:09:44,640 --> 00:09:49,519
work

00:09:46,240 --> 00:09:53,040
okay thanks a lot i think time is

00:09:49,519 --> 00:09:54,959
mostly done just ping me on matrix

00:09:53,040 --> 00:09:56,399
yeah thank you very much andreas for

00:09:54,959 --> 00:10:00,000
that as you said

00:09:56,399 --> 00:10:03,120
questions for the lightning tags we

00:10:00,000 --> 00:10:06,399
refer to the matrix chat so catch on the

00:10:03,120 --> 00:10:15,680
there and i'm sure he'll be happy to

00:10:06,399 --> 00:10:15,680

YouTube URL: https://www.youtube.com/watch?v=vFfVjasP3Wo


