Title: OpenBSD as house alarm system Openbsd is not only good for network related projects
Publication date: 2018-02-03
Playlist: FOSDEM 2018
Description: 
	by Vincent Delft

At: FOSDEM 2018
Room: K.3.401
Scheduled start: 2018-02-03 15:35:00+01
Captions: 
	00:00:04,610 --> 00:00:12,740
okay thank you welcome to this talk I

00:00:08,840 --> 00:00:15,860
will share with you my my little expect

00:00:12,740 --> 00:00:18,650
is regarding a project I did to - let's

00:00:15,860 --> 00:00:21,529
say control my my house my home

00:00:18,650 --> 00:00:23,150
it's a project started long ago and

00:00:21,529 --> 00:00:26,119
finally hitch

00:00:23,150 --> 00:00:31,279
OpenBSD this is via this project that I

00:00:26,119 --> 00:00:37,190
I meet the the OpenBSD and I will

00:00:31,279 --> 00:00:40,909
explain all my project so first of all

00:00:37,190 --> 00:00:44,839
my name van son Delft you see my block

00:00:40,909 --> 00:00:50,119
website my company website and if you

00:00:44,839 --> 00:00:53,390
want to reach me you have my email so I

00:00:50,119 --> 00:00:56,629
will explain which component I've used

00:00:53,390 --> 00:01:02,110
to monitor my home the land since 11

00:00:56,629 --> 00:01:04,970
since 1988 so it's quite a long time and

00:01:02,110 --> 00:01:07,790
the problem I had with Linux because

00:01:04,970 --> 00:01:11,360
I've started with Linux and why I choose

00:01:07,790 --> 00:01:16,340
open BSD and then the the next topics

00:01:11,360 --> 00:01:19,850
are quite recent if we have time I will

00:01:16,340 --> 00:01:24,440
go through them so first of all the

00:01:19,850 --> 00:01:27,260
components and the objective so it's a

00:01:24,440 --> 00:01:30,440
monitor of my my home my house and I'm

00:01:27,260 --> 00:01:33,650
using infrared cap talks in different

00:01:30,440 --> 00:01:36,350
homes I have the concept of zone so you

00:01:33,650 --> 00:01:39,320
can activate the zone and deactivate the

00:01:36,350 --> 00:01:42,470
zone like for example the garage if you

00:01:39,320 --> 00:01:44,090
have animals put them in the garage and

00:01:42,470 --> 00:01:48,170
you activate the rest of the of the arm

00:01:44,090 --> 00:01:51,909
I would like to have a system which send

00:01:48,170 --> 00:01:55,430
SMS and also received SMS so I can

00:01:51,909 --> 00:01:58,220
activate the activate zone by sending

00:01:55,430 --> 00:02:03,170
SMS from my from my mobile and I

00:01:58,220 --> 00:02:07,220
received events on my own my GSM - I

00:02:03,170 --> 00:02:10,009
have Syrians I have a small web

00:02:07,220 --> 00:02:13,010
interface when I can look at the the log

00:02:10,009 --> 00:02:17,480
files some details regarding the

00:02:13,010 --> 00:02:18,620
different events and have webcams so I

00:02:17,480 --> 00:02:22,280
would like also to

00:02:18,620 --> 00:02:26,090
see from from my from any device what's

00:02:22,280 --> 00:02:29,840
going on around the house and for sure

00:02:26,090 --> 00:02:35,530
I have also an objective to have a cheap

00:02:29,840 --> 00:02:40,250
solution budget is not is not unlimited

00:02:35,530 --> 00:02:43,970
so let me share with you the outcome and

00:02:40,250 --> 00:02:47,540
then I will explain all I came to this

00:02:43,970 --> 00:02:52,030
outcome so first of all open busy for me

00:02:47,540 --> 00:02:55,430
for this project was the best system

00:02:52,030 --> 00:02:59,359
amongst the different I've tested very

00:02:55,430 --> 00:03:03,079
flexible it turns on a very different

00:02:59,359 --> 00:03:04,579
kind of hardware and I've implemented

00:03:03,079 --> 00:03:07,519
recently a hiddenly

00:03:04,579 --> 00:03:10,750
file system which is really great I will

00:03:07,519 --> 00:03:16,159
explain or I did that and wired added at

00:03:10,750 --> 00:03:18,769
the main page very complete awesome

00:03:16,159 --> 00:03:23,180
big thanks to the OpenBSD developers

00:03:18,769 --> 00:03:26,030
it's helped a lot having a feature but

00:03:23,180 --> 00:03:32,540
explain how to use the feature is really

00:03:26,030 --> 00:03:34,250
great the the upgrade system so every

00:03:32,540 --> 00:03:38,629
two years you have a new release you

00:03:34,250 --> 00:03:41,599
have a very simple system to to upgrade

00:03:38,629 --> 00:03:43,849
your your machine we have also the SIS

00:03:41,599 --> 00:03:46,750
pod which allowed to keep your machine

00:03:43,849 --> 00:03:49,750
safe and up-to-date in terms of security

00:03:46,750 --> 00:03:53,449
disability is very is very

00:03:49,750 --> 00:03:57,440
straightforward and first time right you

00:03:53,449 --> 00:04:00,379
really can apply it once never I never

00:03:57,440 --> 00:04:02,389
had any issue with that it takes a

00:04:00,379 --> 00:04:04,220
little bit time but it's mainly because

00:04:02,389 --> 00:04:08,359
of my internet connection

00:04:04,220 --> 00:04:12,829
not only with the process itself I've

00:04:08,359 --> 00:04:15,650
talked about this patch and III he and I

00:04:12,829 --> 00:04:18,289
read some remarks regarding base dis

00:04:15,650 --> 00:04:21,739
dying is no more an option for today

00:04:18,289 --> 00:04:25,130
don't listen those guys try open busy

00:04:21,739 --> 00:04:28,219
yourself make your own evaluation of the

00:04:25,130 --> 00:04:30,660
system it's it's really a great a great

00:04:28,219 --> 00:04:34,770
system a great operating system

00:04:30,660 --> 00:04:36,330
then at the end I keep it it's for me

00:04:34,770 --> 00:04:39,270
from for my point of view the best

00:04:36,330 --> 00:04:43,410
system for so this projects two minutes

00:04:39,270 --> 00:04:46,950
of my house so if I go a little bit into

00:04:43,410 --> 00:04:50,970
the details at the beginning I was using

00:04:46,950 --> 00:04:53,760
this this card it's a card from a

00:04:50,970 --> 00:05:01,280
company called well man it's no more

00:04:53,760 --> 00:05:08,010
produced it was in 1998 basically I have

00:05:01,280 --> 00:05:10,890
1600 product so on and off and I connect

00:05:08,010 --> 00:05:16,380
this card to my system via a parallel

00:05:10,890 --> 00:05:19,740
port then I have a small GSM device to

00:05:16,380 --> 00:05:25,080
send and receive the SMS I have a small

00:05:19,740 --> 00:05:28,290
a small boat currently I'm using a not

00:05:25,080 --> 00:05:31,710
own boat is just because of power

00:05:28,290 --> 00:05:33,780
consumption cheap and low power

00:05:31,710 --> 00:05:36,510
consumption so it's it's perfect for

00:05:33,780 --> 00:05:37,980
this kind of usage for gigabyte of ham

00:05:36,510 --> 00:05:43,740
is fair enough

00:05:37,980 --> 00:05:47,370
a small cpu and not using disk for the

00:05:43,740 --> 00:05:51,480
moment I will explain why I'm using a

00:05:47,370 --> 00:05:52,230
small axis camera I've bought them on

00:05:51,480 --> 00:05:53,970
eBay

00:05:52,230 --> 00:06:00,570
they are cheap and they are working

00:05:53,970 --> 00:06:03,650
quite quite nicely and for sure a

00:06:00,570 --> 00:06:07,410
valuable operating system to make this

00:06:03,650 --> 00:06:11,010
system running 24 hours a day thirty

00:06:07,410 --> 00:06:13,920
five thirty hundred sixty five days per

00:06:11,010 --> 00:06:20,250
year so you have to have something which

00:06:13,920 --> 00:06:24,230
is reliable on the software side I was

00:06:20,250 --> 00:06:29,520
forced to use the the I the I 386

00:06:24,230 --> 00:06:33,870
systems until OpenBSD 6.0 I will explain

00:06:29,520 --> 00:06:38,090
why I've changed I'm using an httpd

00:06:33,870 --> 00:06:40,550
server for the the the web the lock

00:06:38,090 --> 00:06:43,580
the the log file I'm presenting via web

00:06:40,550 --> 00:06:47,660
interface also to display the image of

00:06:43,580 --> 00:06:50,900
the camera the camera is as the the axis

00:06:47,660 --> 00:06:53,150
Camejo as a motion detector so it sent a

00:06:50,900 --> 00:06:57,320
picture when there is something changing

00:06:53,150 --> 00:07:01,310
in his in his idea and send those

00:06:57,320 --> 00:07:03,800
pictures on an ftp d demon that runs on

00:07:01,310 --> 00:07:06,650
the on the operating system

00:07:03,800 --> 00:07:13,330
I need the C compiler and I have a bunch

00:07:06,650 --> 00:07:17,780
of Python script I will explain so

00:07:13,330 --> 00:07:21,860
basically i've developed on the bellman

00:07:17,780 --> 00:07:25,850
bolt a c program to loop around in in

00:07:21,860 --> 00:07:32,830
bay and all the api and to look at those

00:07:25,850 --> 00:07:38,030
io if they are open or closed this was a

00:07:32,830 --> 00:07:41,479
easy to develop very very simple to

00:07:38,030 --> 00:07:45,530
build and in fact it's it's a big group

00:07:41,479 --> 00:07:48,860
which look at all those io and and check

00:07:45,530 --> 00:07:52,240
their status and read them or set them

00:07:48,860 --> 00:07:56,360
if you want for example activate silence

00:07:52,240 --> 00:07:59,660
this was nice but there is a rabbit then

00:07:56,360 --> 00:08:03,560
i will explain a little bit later why

00:07:59,660 --> 00:08:08,389
why put the but if there is also another

00:08:03,560 --> 00:08:12,440
package which allow you to manage the

00:08:08,389 --> 00:08:16,039
SNS on OpenBSD you just have to to type

00:08:12,440 --> 00:08:18,620
package at SMS tools tree and you have

00:08:16,039 --> 00:08:22,940
all what you need there is a

00:08:18,620 --> 00:08:26,360
configuration file you just have few

00:08:22,940 --> 00:08:29,930
parameters to update the device on which

00:08:26,360 --> 00:08:34,060
your SMS device is connected to the

00:08:29,930 --> 00:08:38,919
serial port if you want to do incoming

00:08:34,060 --> 00:08:42,950
the cs converges for the character set

00:08:38,919 --> 00:08:47,240
then the initial command the RT please

00:08:42,950 --> 00:08:48,920
CH u P is just to hang up on current

00:08:47,240 --> 00:08:51,470
connection if they are

00:08:48,920 --> 00:08:53,569
and then you have to develop a small

00:08:51,470 --> 00:08:56,329
event and laughs so a small script which

00:08:53,569 --> 00:08:59,149
will be triggered when the system

00:08:56,329 --> 00:09:01,779
received an SMS I will explain that a

00:08:59,149 --> 00:09:06,079
little bit so this small program

00:09:01,779 --> 00:09:08,720
received two parameters they received

00:09:06,079 --> 00:09:12,619
saying that you have received an SMS and

00:09:08,720 --> 00:09:15,019
the part where the SMS resides an

00:09:12,619 --> 00:09:17,119
example of SMS is this one so you have

00:09:15,019 --> 00:09:20,059
lot of information coming from your

00:09:17,119 --> 00:09:21,980
providers and the most important is the

00:09:20,059 --> 00:09:25,100
last the last element so you have the

00:09:21,980 --> 00:09:27,799
length of the text blank line and then

00:09:25,100 --> 00:09:30,589
the the texts you have received in this

00:09:27,799 --> 00:09:34,399
case I have received an SMS with the the

00:09:30,589 --> 00:09:38,299
world status if you want to send an SMS

00:09:34,399 --> 00:09:41,449
you just have to to put a file in this

00:09:38,299 --> 00:09:43,279
directory whatever the name you can

00:09:41,449 --> 00:09:46,220
choose the name of the file just put the

00:09:43,279 --> 00:09:49,129
file there it will taken by the SMS

00:09:46,220 --> 00:09:52,790
daemon you have to respect this template

00:09:49,129 --> 00:09:55,699
at least you can have more element but

00:09:52,790 --> 00:09:58,369
you have to at least expect this so the

00:09:55,699 --> 00:10:02,269
destination which is SM device you would

00:09:58,369 --> 00:10:06,290
like to reach a blank line and then the

00:10:02,269 --> 00:10:13,249
text and you have to limit to the 120

00:10:06,290 --> 00:10:15,170
character writing for the web server at

00:10:13,249 --> 00:10:17,869
the beginning I was using a small

00:10:15,170 --> 00:10:22,579
program called FAP we S which is a

00:10:17,869 --> 00:10:25,399
Python a kind of Python library which

00:10:22,579 --> 00:10:30,769
allow me to easily display some element

00:10:25,399 --> 00:10:35,569
I'm now using the HDD BD provided by

00:10:30,769 --> 00:10:37,639
OpenBSD it's it's light one of the key

00:10:35,569 --> 00:10:39,169
element all in all this project is to

00:10:37,639 --> 00:10:42,199
have something which is light because

00:10:39,169 --> 00:10:46,459
the box is quite small but HD BD is

00:10:42,199 --> 00:10:49,040
perfect for this and I'm running I'm

00:10:46,459 --> 00:10:52,189
running it in the shoot environment so

00:10:49,040 --> 00:10:58,189
even if someone find my machine he

00:10:52,189 --> 00:10:59,480
cannot break it this interface does not

00:10:58,189 --> 00:11:02,380
allow

00:10:59,480 --> 00:11:06,380
you for me to configure the alarm so

00:11:02,380 --> 00:11:12,110
security wise well it's not possible via

00:11:06,380 --> 00:11:15,230
via this httpd to break the system if

00:11:12,110 --> 00:11:17,959
your provider does not allow you to have

00:11:15,230 --> 00:11:22,130
a fixed IP address you have to to make

00:11:17,959 --> 00:11:26,269
solution with dynamic DNS like for

00:11:22,130 --> 00:11:29,209
example fee DNS you have to install a

00:11:26,269 --> 00:11:33,079
small skipped for example every five

00:11:29,209 --> 00:11:34,240
minute which will update the free DNS

00:11:33,079 --> 00:11:36,589
website

00:11:34,240 --> 00:11:44,420
concerning your IP address so you can

00:11:36,589 --> 00:11:47,660
always hit your web interface oops so

00:11:44,420 --> 00:11:50,240
far for the camera is just a normal

00:11:47,660 --> 00:11:53,389
situation you just have to configure the

00:11:50,240 --> 00:11:55,459
the camera that they sent a picture to

00:11:53,389 --> 00:11:59,019
your FTP server so you just have to

00:11:55,459 --> 00:12:04,760
provide the IP address you just have to

00:11:59,019 --> 00:12:07,630
also provide the user ID that the camera

00:12:04,760 --> 00:12:10,720
can use to to put those files on your

00:12:07,630 --> 00:12:16,040
OpenBSD machine so a couple of commands

00:12:10,720 --> 00:12:19,430
like i've presented there you can have

00:12:16,040 --> 00:12:23,350
multiple camera hive 2 camera but you

00:12:19,430 --> 00:12:28,660
can have as many as you want

00:12:23,350 --> 00:12:33,850
so my lessons learned since 1988 the

00:12:28,660 --> 00:12:36,319
time i spent before each upgrades is

00:12:33,850 --> 00:12:39,110
should not be underestimated

00:12:36,319 --> 00:12:44,720
in fact it's one of the one of the

00:12:39,110 --> 00:12:47,540
biggest pain in this system you always

00:12:44,720 --> 00:12:51,430
have a package which which abrogate and

00:12:47,540 --> 00:12:55,970
break your system alive he we change

00:12:51,430 --> 00:12:56,959
this position it's no more is no more in

00:12:55,970 --> 00:13:03,290
the same place

00:12:56,959 --> 00:13:05,990
I had a few problem with the board after

00:13:03,290 --> 00:13:09,460
six seven years so such kind of cheap

00:13:05,990 --> 00:13:12,899
machine turning 24 a day the full year

00:13:09,460 --> 00:13:16,810
well it's not perfect it's not ideal so

00:13:12,899 --> 00:13:22,270
be prepared to replace both of he six

00:13:16,810 --> 00:13:24,670
seven years the weakness parked in this

00:13:22,270 --> 00:13:27,760
system is the power supply so the small

00:13:24,670 --> 00:13:31,540
device will transform your your current

00:13:27,760 --> 00:13:32,020
in in five volt three volt something

00:13:31,540 --> 00:13:35,680
like that

00:13:32,020 --> 00:13:40,750
this element is very if the week maybe

00:13:35,680 --> 00:13:43,209
because the both are cheap and this

00:13:40,750 --> 00:13:45,100
weakness is most probably the

00:13:43,209 --> 00:13:50,440
consequence of the

00:13:45,100 --> 00:13:52,990
other element I don't know maybe it's

00:13:50,440 --> 00:13:56,640
specific to me but I add and I still

00:13:52,990 --> 00:14:00,850
have a lot of power cut a strong

00:13:56,640 --> 00:14:04,510
technician on the streets doing stuff

00:14:00,850 --> 00:14:08,290
and interrupt the the power for few

00:14:04,510 --> 00:14:11,529
seconds one minute but it's enough to to

00:14:08,290 --> 00:14:14,950
kill the machine except you Avenue PS I

00:14:11,529 --> 00:14:19,000
had any PS in the beginning but I remove

00:14:14,950 --> 00:14:21,220
it so every small power cut kill the

00:14:19,000 --> 00:14:23,589
Machine and then the Machine reboot

00:14:21,220 --> 00:14:27,430
immediately when the power back and

00:14:23,589 --> 00:14:29,529
maybe this effect the power supply every

00:14:27,430 --> 00:14:34,779
two weeks I have to replace the power

00:14:29,529 --> 00:14:40,959
supply then you have also the infrared

00:14:34,779 --> 00:14:43,240
cap talks it's also an element to look

00:14:40,959 --> 00:14:47,860
at carefully because you have to clean

00:14:43,240 --> 00:14:50,860
them at least one year of yes once once

00:14:47,860 --> 00:14:55,089
a year you have to to perform a good

00:14:50,860 --> 00:14:58,300
cleaning and in the big loop I've

00:14:55,089 --> 00:15:01,779
explained to to capture the i/o of the

00:14:58,300 --> 00:15:04,120
different cap talks you have to be smart

00:15:01,779 --> 00:15:07,570
enough and take into account the false

00:15:04,120 --> 00:15:12,310
alarm this is a quite difficult element

00:15:07,570 --> 00:15:17,610
because UF may be animals which trigger

00:15:12,310 --> 00:15:19,910
a capture and you don't want to generate

00:15:17,610 --> 00:15:22,730
an alarm in

00:15:19,910 --> 00:15:27,170
activate the silence maybe you have sown

00:15:22,730 --> 00:15:31,420
small insects also if your camera if

00:15:27,170 --> 00:15:33,950
your capital is pointing to a radiator

00:15:31,420 --> 00:15:38,030
the fact that they hate the Hagia Tok

00:15:33,950 --> 00:15:40,580
start it could also trigger the capital

00:15:38,030 --> 00:15:44,450
and engineer hate false alarm so the

00:15:40,580 --> 00:15:47,750
loop must be clever enough to avoid such

00:15:44,450 --> 00:15:51,980
kind of alarms in the beginning my

00:15:47,750 --> 00:15:55,280
netbooks were were quite annoyed by the

00:15:51,980 --> 00:15:58,610
science which stucked in the middle of

00:15:55,280 --> 00:16:03,440
the night and when always when I was in

00:15:58,610 --> 00:16:06,110
in on holidays so quite difficult so

00:16:03,440 --> 00:16:07,940
this is why do not forget to have the

00:16:06,110 --> 00:16:12,350
possibility to manage your system from

00:16:07,940 --> 00:16:16,100
Hammoud having SSH it's it's it's the

00:16:12,350 --> 00:16:17,990
best option via smartphone you have

00:16:16,100 --> 00:16:20,170
application you can you can connect to

00:16:17,990 --> 00:16:23,900
your machine and you can manage it from

00:16:20,170 --> 00:16:27,800
directly from from the mobile or via SMS

00:16:23,900 --> 00:16:29,810
you can send as SMS command to restart

00:16:27,800 --> 00:16:34,250
the process to Hebrew the machine to

00:16:29,810 --> 00:16:38,770
whatever he won't generate exclude ozone

00:16:34,250 --> 00:16:44,480
for example from from the monitoring and

00:16:38,770 --> 00:16:48,590
also an observation it's not it's not

00:16:44,480 --> 00:16:52,130
always a good idea to use old machine

00:16:48,590 --> 00:16:55,250
for such kind of system old machine will

00:16:52,130 --> 00:16:57,380
use old technology which consume a

00:16:55,250 --> 00:17:00,620
little bit more power than the new one

00:16:57,380 --> 00:17:05,630
so if you want to keep your electricity

00:17:00,620 --> 00:17:09,650
bill low it's better to to buy new books

00:17:05,630 --> 00:17:14,199
like like the atom for example which is

00:17:09,650 --> 00:17:14,199
optimized in terms of power consumption

00:17:15,790 --> 00:17:22,730
so my story is this one at the beginning

00:17:19,400 --> 00:17:27,800
I've start with slack way for about 4

00:17:22,730 --> 00:17:30,860
years so as from 1988 at that time I was

00:17:27,800 --> 00:17:31,740
playing with such kind of device it was

00:17:30,860 --> 00:17:35,670
a pay

00:17:31,740 --> 00:17:38,550
to install Linux about 20 disk to

00:17:35,670 --> 00:17:42,679
install the Linux system but it was

00:17:38,550 --> 00:17:45,840
working quite well quite fillable and

00:17:42,679 --> 00:17:48,559
update the blade at that time upgrade of

00:17:45,840 --> 00:17:52,500
like we were was a little bit difficult

00:17:48,559 --> 00:17:55,770
and required loved lot of effort so I

00:17:52,500 --> 00:17:59,910
immigrated to head that I keep it about

00:17:55,770 --> 00:18:01,860
three years but then I had also some

00:17:59,910 --> 00:18:05,690
difficulties with the package and the

00:18:01,860 --> 00:18:09,450
Archaean package which generates some

00:18:05,690 --> 00:18:12,420
some situation where I'm forced to

00:18:09,450 --> 00:18:15,179
update my programs the libera libera he

00:18:12,420 --> 00:18:21,030
moved home from one place to another one

00:18:15,179 --> 00:18:23,940
it was not it was not perfect so it is

00:18:21,030 --> 00:18:27,600
in the time of 2010 so maybe they found

00:18:23,940 --> 00:18:31,170
solution today and then I've used gen 2

00:18:27,600 --> 00:18:37,410
which was for me one of the best system

00:18:31,170 --> 00:18:41,910
so quite reliable upgrade not so

00:18:37,410 --> 00:18:43,770
difficult quite predictable the biggest

00:18:41,910 --> 00:18:47,970
problem was that you have to build from

00:18:43,770 --> 00:18:53,340
source and this bolt was the only one

00:18:47,970 --> 00:18:57,780
with the i386 so when you have to a gate

00:18:53,340 --> 00:19:03,600
it takes one day but it once it runs

00:18:57,780 --> 00:19:08,610
quite quite nicely I also observed that

00:19:03,600 --> 00:19:13,920
doing this about 10 years I had to disk

00:19:08,610 --> 00:19:17,640
cache 2 times I don't know I've never

00:19:13,920 --> 00:19:21,450
understood why maybe the the

00:19:17,640 --> 00:19:24,750
manufacturer of the disk is not good

00:19:21,450 --> 00:19:31,410
enough at that time I don't know is just

00:19:24,750 --> 00:19:33,780
an observation then in 2009 there is a

00:19:31,410 --> 00:19:37,290
small gap of 2 years if you look

00:19:33,780 --> 00:19:44,519
carefully but in 2009 I have tried the

00:19:37,290 --> 00:19:51,419
open busy it was quite easy to install

00:19:44,519 --> 00:19:55,850
the grades are fantastic really easy all

00:19:51,419 --> 00:19:55,850
the features there is no so much

00:19:56,990 --> 00:20:03,419
variation within the system when you

00:20:00,360 --> 00:20:07,559
have a feature it stays more or less

00:20:03,419 --> 00:20:11,340
always it stay as it is small upgrades

00:20:07,559 --> 00:20:14,279
more advanced in terms of feature but

00:20:11,340 --> 00:20:17,730
the main aspect remains so for that kind

00:20:14,279 --> 00:20:21,600
of project is really really great

00:20:17,730 --> 00:20:26,490
OpenBSD secure by default and as I said

00:20:21,600 --> 00:20:32,779
the main page is very very useful so it

00:20:26,490 --> 00:20:37,619
was kind of an ideal situation but in

00:20:32,779 --> 00:20:41,730
2013 I see in the I seen the mailing

00:20:37,619 --> 00:20:47,100
list that it was said that the IOM in be

00:20:41,730 --> 00:20:51,779
out be damned I'm was using was not

00:20:47,100 --> 00:20:55,429
focusing to be implemented on the 64-bit

00:20:51,779 --> 00:21:00,769
system so I am say okay I have to

00:20:55,429 --> 00:21:05,779
continue with the 32-bit but then in

00:21:00,769 --> 00:21:11,129
2016 they decide to remove that also so

00:21:05,779 --> 00:21:13,740
open BSD 6.0 was a decision for me to

00:21:11,129 --> 00:21:19,649
move away from this old box and to buy a

00:21:13,740 --> 00:21:21,929
new one so since I do not have any more

00:21:19,649 --> 00:21:27,119
of the possibility to interact with my

00:21:21,929 --> 00:21:31,169
board via this this API in b.o.b I was

00:21:27,119 --> 00:21:35,279
forced to buy a new one I bought this

00:21:31,169 --> 00:21:37,590
from a vendor called then coffee it's a

00:21:35,279 --> 00:21:41,129
very small box if you look at the size

00:21:37,590 --> 00:21:46,139
of the of the internet box is very small

00:21:41,129 --> 00:21:51,440
and I have 2400 on the system it's not

00:21:46,139 --> 00:21:56,220
the cost is quite acceptable and I've

00:21:51,440 --> 00:21:58,050
used the system but not directly so I'm

00:21:56,220 --> 00:22:01,230
using what we call

00:21:58,050 --> 00:22:04,080
Kubler it's a small device which allow

00:22:01,230 --> 00:22:09,240
you to connect a system like a sirens

00:22:04,080 --> 00:22:11,640
like a infrared captors and if you have

00:22:09,240 --> 00:22:13,650
an electrical problem on this device it

00:22:11,640 --> 00:22:16,830
will not break the box you will break

00:22:13,650 --> 00:22:19,410
the opto coupler so it is the kind of

00:22:16,830 --> 00:22:20,180
protection electrical protection for the

00:22:19,410 --> 00:22:28,170
boat

00:22:20,180 --> 00:22:33,120
so I've built a new a new loop I did it

00:22:28,170 --> 00:22:37,740
in Python to look at all those do all

00:22:33,120 --> 00:22:40,500
those ports all those iOS via SNM SNMP

00:22:37,740 --> 00:22:43,530
Get Command and UK you can interact with

00:22:40,500 --> 00:22:46,640
the board via SNMP set command so it's

00:22:43,530 --> 00:22:50,250
quite really really simple to implement

00:22:46,640 --> 00:22:56,310
the same logic to avoid the false alarm

00:22:50,250 --> 00:22:59,520
so quite simple the SMS tools is the

00:22:56,310 --> 00:23:04,080
same FTP demon is the same HTTP daemon

00:22:59,520 --> 00:23:11,160
is the same so really one one component

00:23:04,080 --> 00:23:13,140
of the solution was rebuilt and now to

00:23:11,160 --> 00:23:16,440
tackle the system the the problematic

00:23:13,140 --> 00:23:20,690
regarding the power cut and the

00:23:16,440 --> 00:23:24,480
possibility that when the machine boots

00:23:20,690 --> 00:23:27,660
automatically when the when the power is

00:23:24,480 --> 00:23:30,360
back is that you have a filesystem check

00:23:27,660 --> 00:23:34,320
and in some cases this file system check

00:23:30,360 --> 00:23:37,260
ask you question which is a problem for

00:23:34,320 --> 00:23:40,200
such kind of of machines and the only

00:23:37,260 --> 00:23:42,360
possibility is to have a direct

00:23:40,200 --> 00:23:47,790
connection to the machine to answer the

00:23:42,360 --> 00:23:51,780
question so my idea was to to remove to

00:23:47,790 --> 00:23:55,170
remove the right option on the disk so

00:23:51,780 --> 00:23:58,410
build as a system read-only there is a

00:23:55,170 --> 00:24:03,200
very good project code called flash FD

00:23:58,410 --> 00:24:06,780
which tackled this problematic but

00:24:03,200 --> 00:24:08,900
instead of using flash ID I've built it

00:24:06,780 --> 00:24:17,720
myself

00:24:08,900 --> 00:24:21,200
and to build okay to build such kind of

00:24:17,720 --> 00:24:24,950
system with OpenBSD is quite simple in

00:24:21,200 --> 00:24:28,130
fact what I did I I did a normal

00:24:24,950 --> 00:24:31,250
installation so you start your bsd FD so

00:24:28,130 --> 00:24:34,630
the the the the process which allow you

00:24:31,250 --> 00:24:39,260
to install open BSD I plugged in a USB

00:24:34,630 --> 00:24:43,220
stick and I asked OpenBSD to install

00:24:39,260 --> 00:24:45,770
everything on this USB drive and have

00:24:43,220 --> 00:24:48,080
the same folder under the same file

00:24:45,770 --> 00:24:52,790
system so everything is installed under

00:24:48,080 --> 00:24:55,309
slash so I skipped the the

00:24:52,790 --> 00:24:59,690
recommendation the default provided by

00:24:55,309 --> 00:25:02,929
open BSD then once the installation is

00:24:59,690 --> 00:25:06,590
performed I boot from this USB Drive and

00:25:02,929 --> 00:25:09,830
I'll change FS tab like this I don't

00:25:06,590 --> 00:25:13,490
know why the color so what what I change

00:25:09,830 --> 00:25:17,270
I change the parameter which is that

00:25:13,490 --> 00:25:20,710
this file system is hiddenly the rest

00:25:17,270 --> 00:25:24,500
remain the same and I had three lines

00:25:20,710 --> 00:25:29,570
for VAR slash back slash def a /tmp

00:25:24,500 --> 00:25:35,270
so there will be there will be a memory

00:25:29,570 --> 00:25:39,200
file system so MF s I provide a link to

00:25:35,270 --> 00:25:44,660
a folder where the system can find the

00:25:39,200 --> 00:25:47,840
different files and I allocate a certain

00:25:44,660 --> 00:25:49,400
amount of memory for this file system so

00:25:47,840 --> 00:25:53,570
the file system will become

00:25:49,400 --> 00:25:57,980
hid right but in memory there is no link

00:25:53,570 --> 00:26:01,610
with your with your disk so then you

00:25:57,980 --> 00:26:04,520
have to provide information in those two

00:26:01,610 --> 00:26:08,840
folders so just copy what you have in

00:26:04,520 --> 00:26:11,690
/wa in into the into the new folder the

00:26:08,840 --> 00:26:16,340
same for Def and 40 MPA

00:26:11,690 --> 00:26:20,690
I don't need files so it means that when

00:26:16,340 --> 00:26:22,520
the machine will boot those / - / def

00:26:20,690 --> 00:26:24,710
will be seen by the

00:26:22,520 --> 00:26:27,830
like the colonel as normal file system

00:26:24,710 --> 00:26:34,700
but there in memory with the information

00:26:27,830 --> 00:26:39,650
you can find is CFG /var so very simple

00:26:34,700 --> 00:26:42,110
to setup the only recommendation I have

00:26:39,650 --> 00:26:47,810
is just to have at least four full

00:26:42,110 --> 00:26:51,290
gigabyte of ham for for this I'm able to

00:26:47,810 --> 00:26:56,000
boot from USB 2 port on a lot of

00:26:51,290 --> 00:27:00,620
different ports but I don't know why for

00:26:56,000 --> 00:27:01,100
USB 3 it doesn't boot maybe it's my

00:27:00,620 --> 00:27:04,310
fault

00:27:01,100 --> 00:27:07,430
I don't know why OpenBSD

00:27:04,310 --> 00:27:10,630
is not booting from from those USB I

00:27:07,430 --> 00:27:10,630
have to check that

00:27:11,800 --> 00:27:19,250
so there are few elements to take into

00:27:15,260 --> 00:27:22,880
account if you want to make some changes

00:27:19,250 --> 00:27:24,830
on your system you have to put back the

00:27:22,880 --> 00:27:28,280
system heat height if you had a mount

00:27:24,830 --> 00:27:31,610
command then you do your change and then

00:27:28,280 --> 00:27:36,820
you put back in hidden livia amount -

00:27:31,610 --> 00:27:40,420
you are if you would like to add some

00:27:36,820 --> 00:27:43,610
files for example via the picot PKG add

00:27:40,420 --> 00:27:48,980
command then you have to update your

00:27:43,610 --> 00:27:52,160
Flash CFG folder i'm doing it via acting

00:27:48,980 --> 00:27:55,910
you can do what you want and if you want

00:27:52,160 --> 00:27:59,320
if you want to keep your log files maybe

00:27:55,910 --> 00:28:04,700
you have to execute this command 1 once

00:27:59,320 --> 00:28:07,460
every hour if you want everyday for my

00:28:04,700 --> 00:28:11,600
for my own for this project

00:28:07,460 --> 00:28:12,050
I'm just doing a sync every day and for

00:28:11,600 --> 00:28:15,580
the rest

00:28:12,050 --> 00:28:18,830
OpenBSD see see is the different folders

00:28:15,580 --> 00:28:24,470
exactly like like a normal open BSD

00:28:18,830 --> 00:28:27,740
system so which is quite easy and we are

00:28:24,470 --> 00:28:32,900
this system you can really shut down the

00:28:27,740 --> 00:28:35,840
machine you can kill it you can plug out

00:28:32,900 --> 00:28:38,570
the power cable the machine will go down

00:28:35,840 --> 00:28:41,000
you plugged in if you have confer

00:28:38,570 --> 00:28:44,179
configure the BIOS it will boot up

00:28:41,000 --> 00:28:49,820
immediately no file system check-in

00:28:44,179 --> 00:28:52,630
nothing it just boot normally so for me

00:28:49,820 --> 00:28:58,010
it's really the perfect situation and

00:28:52,630 --> 00:29:01,190
for sure I have a disk attached to the

00:28:58,010 --> 00:29:05,029
board where I put the the picture from

00:29:01,190 --> 00:29:08,179
the camera and for this system okay

00:29:05,029 --> 00:29:08,659
I could have issues when the machine

00:29:08,179 --> 00:29:12,799
boots

00:29:08,659 --> 00:29:15,940
I could have file system issues but okay

00:29:12,799 --> 00:29:21,169
it's just the picture from the camera I

00:29:15,940 --> 00:29:25,539
prefer to have that damaged and in my

00:29:21,169 --> 00:29:25,539
house is still monitored and controlled

00:29:27,159 --> 00:29:34,970
and I'm using this system since about

00:29:30,649 --> 00:29:39,799
three years without a new problem

00:29:34,970 --> 00:29:44,899
anymore an observation since 2009 I'm

00:29:39,799 --> 00:29:50,270
using open BSD so I never had a

00:29:44,899 --> 00:29:53,980
discussion why no idea maybe the the

00:29:50,270 --> 00:29:58,539
manufacturer are doing better disk now

00:29:53,980 --> 00:30:03,679
maybe it's coming from OpenBSD no idea

00:29:58,539 --> 00:30:06,490
it's just an observation and the future

00:30:03,679 --> 00:30:11,750
idea is to have some

00:30:06,490 --> 00:30:15,919
Ethernet devices so my different camera

00:30:11,750 --> 00:30:18,020
will have just one cables today they'd F

00:30:15,919 --> 00:30:21,980
two one for the power one for the

00:30:18,020 --> 00:30:25,610
network so this will facilitate the the

00:30:21,980 --> 00:30:28,450
the the possibilities in the in the

00:30:25,610 --> 00:30:28,450
setup of the camera

00:30:29,520 --> 00:30:35,700
so voila this is the conclusion this is

00:30:32,429 --> 00:30:38,750
the same slide I showed before so for me

00:30:35,700 --> 00:30:41,700
open busy is by far the the best system

00:30:38,750 --> 00:30:44,760
for this project it's really simple

00:30:41,700 --> 00:30:49,830
light it can hang on many different

00:30:44,760 --> 00:30:54,530
boards easy to tune easy to adapt easy

00:30:49,830 --> 00:30:58,260
to upgrade which was one of the pain and

00:30:54,530 --> 00:31:01,500
it's secure by default so for such kind

00:30:58,260 --> 00:31:09,510
of project this is really a good field

00:31:01,500 --> 00:31:12,050
to follow and that's it so if you have

00:31:09,510 --> 00:31:17,079
questions

00:31:12,050 --> 00:31:17,079
[Applause]

00:31:17,460 --> 00:31:40,899
yes before okay okay so the question is

00:31:39,070 --> 00:31:45,130
did I heard about beans

00:31:40,899 --> 00:31:48,789
OpenBSD before this project yes I heard

00:31:45,130 --> 00:31:51,250
about about OpenBSD I was aware it's a

00:31:48,789 --> 00:31:54,970
system existing since long long ago but

00:31:51,250 --> 00:31:57,580
I never try it before so this was this

00:31:54,970 --> 00:32:01,510
project was a trigger for me to to to

00:31:57,580 --> 00:32:04,690
have a look at openbsd and when I've

00:32:01,510 --> 00:32:08,350
tried to configure them to setup it for

00:32:04,690 --> 00:32:12,250
for this I was amazed or simple it is so

00:32:08,350 --> 00:32:16,029
no I'm using open busy foreign ass for

00:32:12,250 --> 00:32:20,799
her laptops at all all machine OpenBSD

00:32:16,029 --> 00:32:23,110
my kids are using open busy it's just my

00:32:20,799 --> 00:32:25,320
wife we stay with Linux but all the rest

00:32:23,110 --> 00:32:25,320
are

00:32:31,020 --> 00:32:44,559
and the second question no it's really

00:32:39,299 --> 00:32:47,890
honestly if if you want to make your own

00:32:44,559 --> 00:32:49,929
judgment your own evaluation try it it's

00:32:47,890 --> 00:32:54,580
the best the best thing you have to do

00:32:49,929 --> 00:32:57,010
it's it's quite simple just use an old

00:32:54,580 --> 00:32:59,200
machine and perform the standard

00:32:57,010 --> 00:33:02,320
installation the standard installation

00:32:59,200 --> 00:33:04,990
will use the wall disk so don't imagine

00:33:02,320 --> 00:33:08,529
to have dual boot at the beginning you

00:33:04,990 --> 00:33:11,200
can but it requires a little little bit

00:33:08,529 --> 00:33:13,870
of configuration aspect but if you want

00:33:11,200 --> 00:33:16,240
to keep it simple dedicate a disk do

00:33:13,870 --> 00:33:18,850
your installation and then you have to

00:33:16,240 --> 00:33:25,380
the package add command you can add what

00:33:18,850 --> 00:33:40,899
you want it's very simple other question

00:33:25,380 --> 00:33:44,700
yes yes

00:33:40,899 --> 00:33:44,700
so they exist

00:33:45,549 --> 00:33:52,419
so the question is this are mine am I

00:33:49,539 --> 00:33:57,159
using the SNMP trap feature on the on

00:33:52,419 --> 00:34:02,350
the smaller than Kavi borked I've looked

00:33:57,159 --> 00:34:05,350
at it the problem is that you receive

00:34:02,350 --> 00:34:08,909
different kind of message more than what

00:34:05,350 --> 00:34:12,909
I expect so you have to filter them and

00:34:08,909 --> 00:34:17,159
I was not I was a little bit surprised

00:34:12,909 --> 00:34:21,129
that some event have a small delay and

00:34:17,159 --> 00:34:25,720
this is a problem for me as I explained

00:34:21,129 --> 00:34:30,099
I have to be quite smart to detect the

00:34:25,720 --> 00:34:33,190
false alarm and the time is really a key

00:34:30,099 --> 00:34:36,099
element for example if I have an alarm

00:34:33,190 --> 00:34:38,679
on what capture and let's say within

00:34:36,099 --> 00:34:42,069
that's 10 seconds another

00:34:38,679 --> 00:34:45,129
another event honored on lenders of

00:34:42,069 --> 00:34:48,099
device it means that someone is working

00:34:45,129 --> 00:34:52,990
inside house this is not a false alarm

00:34:48,099 --> 00:34:57,760
if I have one one signal and then 15

00:34:52,990 --> 00:35:00,549
second principle and another signal it's

00:34:57,760 --> 00:35:04,119
something like a false alarm so the

00:35:00,549 --> 00:35:07,599
timing is quite important SNMP trap was

00:35:04,119 --> 00:35:10,900
not the best way to have such control on

00:35:07,599 --> 00:35:16,260
the timing so I prefer to pull them

00:35:10,900 --> 00:35:16,260
manually by manually within the loop

00:35:17,400 --> 00:35:28,420
other question did I convince someone to

00:35:22,779 --> 00:35:30,720
to give a try to open BSD it's a

00:35:28,420 --> 00:35:30,720
question

00:35:47,120 --> 00:35:55,260
yes I'm not a developer so yes I can

00:35:51,900 --> 00:35:58,950
share it but I I don't know yes hey

00:35:55,260 --> 00:36:03,950
sorry I hippie the question does the the

00:35:58,950 --> 00:36:08,700
the code I did is available somewhere

00:36:03,950 --> 00:36:12,600
down swear his know maybe I could but

00:36:08,700 --> 00:36:16,200
I'm not a developer so it's it's not

00:36:12,600 --> 00:36:21,000
clean for sure but maybe someone else

00:36:16,200 --> 00:36:23,100
can improve it so yes I could I could do

00:36:21,000 --> 00:36:26,060
it I don't know if there are other

00:36:23,100 --> 00:36:31,650
person interested in such kind of

00:36:26,060 --> 00:36:33,840
project no idea but why not I couldn't I

00:36:31,650 --> 00:36:38,030
could think about that and maybe in the

00:36:33,840 --> 00:36:46,110
future I can push the the code on github

00:36:38,030 --> 00:36:52,470
repository I'm not a developer so I'm

00:36:46,110 --> 00:36:55,380
not using CVS yes they are much more

00:36:52,470 --> 00:36:57,900
happy now the two the two three first

00:36:55,380 --> 00:37:02,610
year was a little bit difficult with

00:36:57,900 --> 00:37:08,800
them no they are much happy the logic is

00:37:02,610 --> 00:37:15,760
much better okay thank you

00:37:08,800 --> 00:37:15,760

YouTube URL: https://www.youtube.com/watch?v=M7yzABO8PyY


