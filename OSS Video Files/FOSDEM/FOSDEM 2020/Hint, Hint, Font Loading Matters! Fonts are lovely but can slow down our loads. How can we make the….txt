Title: Hint, Hint, Font Loading Matters! Fonts are lovely but can slow down our loads. How can we make theâ€¦
Publication date: 2020-07-12
Playlist: FOSDEM 2020
Description: 
	Hint, Hint, Font Loading Matters! Fonts are lovely but can slow down our loads. How can we make them faster?
by Sia Karamalegos

At: FOSDEM 2020
https://video.fosdem.org/2020/H.1309/webperf_font_loading.webm

We all love fonts. From Google Fonts to Typekit, Hoefler&amp;Co and more, they give character and tone to our websites. The down side of fonts is that they can really slow down our loads. In this talk we'll learn about common pitfalls like critical requests depth and how to use resource hints to play tricks with latency to load web applications faster. We'll walk through a network profile to understand what's going on in the browser and how to make it faster.

Room: H.1309 (Van Rijn)
Scheduled start: 2020-02-01 15:20:00
Captions: 
	00:00:05,120 --> 00:00:07,520
are more

00:00:05,839 --> 00:00:09,280
coming from the performance side and now

00:00:07,520 --> 00:00:10,960
we have a developer coming into

00:00:09,280 --> 00:00:12,559
performance so that's it's super

00:00:10,960 --> 00:00:14,160
interesting i think and she will talk

00:00:12,559 --> 00:00:17,199
about fonts

00:00:14,160 --> 00:00:19,680
yeah so go away

00:00:17,199 --> 00:00:21,520
carry away i'm sorry you want me to go

00:00:19,680 --> 00:00:24,390
away

00:00:21,520 --> 00:00:27,279
no go ahead i'm sorry

00:00:24,390 --> 00:00:29,519
[Applause]

00:00:27,279 --> 00:00:31,359
hello everyone how are you doing are you

00:00:29,519 --> 00:00:32,800
excited to be here i'm excited to talk

00:00:31,359 --> 00:00:36,320
to you about fonts

00:00:32,800 --> 00:00:37,920
my name is sia caramelagos it's a very

00:00:36,320 --> 00:00:39,840
long greek name actually that's not even

00:00:37,920 --> 00:00:42,000
all of my name but um

00:00:39,840 --> 00:00:43,200
i am a web developer and performance

00:00:42,000 --> 00:00:45,360
engineer i

00:00:43,200 --> 00:00:47,440
like front end i end up still having to

00:00:45,360 --> 00:00:50,079
do full stack sadly but

00:00:47,440 --> 00:00:52,079
um it's all right i live in new orleans

00:00:50,079 --> 00:00:53,440
this is me at mardi gras so

00:00:52,079 --> 00:00:55,600
but that's enough about me you're not

00:00:53,440 --> 00:00:57,120
here for me i'm also a

00:00:55,600 --> 00:00:58,800
google developer expert in web

00:00:57,120 --> 00:01:00,079
technologies and i come more from the

00:00:58,800 --> 00:01:03,199
industry side

00:01:00,079 --> 00:01:04,960
so i um i

00:01:03,199 --> 00:01:08,400
teach at conferences i teach workshops

00:01:04,960 --> 00:01:11,200
on performance but i also actually build

00:01:08,400 --> 00:01:12,400
web applications and web really is my

00:01:11,200 --> 00:01:14,960
bread and butter

00:01:12,400 --> 00:01:16,799
these are the slides um at bitly font

00:01:14,960 --> 00:01:18,159
dash perf lower case

00:01:16,799 --> 00:01:20,799
you can find these slides so you don't

00:01:18,159 --> 00:01:24,400
have to scramble to copy anything down

00:01:20,799 --> 00:01:26,640
or take screenshots they are deployed in

00:01:24,400 --> 00:01:31,200
the web so all these links are clickable

00:01:26,640 --> 00:01:32,799
um yeah you ready to get started

00:01:31,200 --> 00:01:34,400
so i want to pull the audience really

00:01:32,799 --> 00:01:36,479
quick um

00:01:34,400 --> 00:01:38,159
how many of you are super passionate

00:01:36,479 --> 00:01:39,920
about web performance and you're like a

00:01:38,159 --> 00:01:42,560
wonk you're like really into like this

00:01:39,920 --> 00:01:45,040
the weeds and the tech

00:01:42,560 --> 00:01:45,680
there's a lot of you here um how many of

00:01:45,040 --> 00:01:48,000
you

00:01:45,680 --> 00:01:48,720
are you think performance is great and

00:01:48,000 --> 00:01:50,399
you love it

00:01:48,720 --> 00:01:51,439
um but you're you know a developer and

00:01:50,399 --> 00:01:53,119
you're still learning and you're in that

00:01:51,439 --> 00:01:56,560
process

00:01:53,119 --> 00:01:58,560
yay there's lots of you and um

00:01:56,560 --> 00:02:02,079
how many of you are curious but not yet

00:01:58,560 --> 00:02:06,399
convinced that performance is important

00:02:02,079 --> 00:02:08,120
okay and then the rest of you

00:02:06,399 --> 00:02:11,840
why are you here

00:02:08,120 --> 00:02:13,200
[Laughter]

00:02:11,840 --> 00:02:14,720
but it's good to know i like to know my

00:02:13,200 --> 00:02:15,840
audience because i'm going to adjust

00:02:14,720 --> 00:02:18,080
this a little bit

00:02:15,840 --> 00:02:19,920
um i don't think we need this section

00:02:18,080 --> 00:02:20,879
because i think most of you care about

00:02:19,920 --> 00:02:22,959
performance

00:02:20,879 --> 00:02:24,239
so we're just going to jump right in but

00:02:22,959 --> 00:02:25,760
what about typography because i'm

00:02:24,239 --> 00:02:26,720
talking about fonts here so i'm just

00:02:25,760 --> 00:02:28,959
going to take a

00:02:26,720 --> 00:02:30,160
super quick side thing and talk about

00:02:28,959 --> 00:02:32,560
typography

00:02:30,160 --> 00:02:33,680
so typography is what language looks

00:02:32,560 --> 00:02:36,319
like

00:02:33,680 --> 00:02:38,000
it communicates content is king like the

00:02:36,319 --> 00:02:40,319
words are king

00:02:38,000 --> 00:02:41,840
but typography still makes a difference

00:02:40,319 --> 00:02:44,319
and if you don't understand that let's

00:02:41,840 --> 00:02:46,800
look at these few slides

00:02:44,319 --> 00:02:48,239
so think to yourself what does this

00:02:46,800 --> 00:02:50,640
evoke in you

00:02:48,239 --> 00:02:53,360
i'm going to go back and forth that's

00:02:50,640 --> 00:02:56,239
just one word hello

00:02:53,360 --> 00:02:56,239
oops wrong way

00:02:57,200 --> 00:03:01,920
versus this what are these do these

00:03:00,080 --> 00:03:05,599
things evoke different feelings

00:03:01,920 --> 00:03:07,440
in you maybe this one's like

00:03:05,599 --> 00:03:11,840
it's more out there it's friendlier it's

00:03:07,440 --> 00:03:11,840
open it's trustworthy as a slab font

00:03:12,560 --> 00:03:17,760
the next one is maybe a little quieter

00:03:16,319 --> 00:03:19,599
but it's also all cats so it's a little

00:03:17,760 --> 00:03:22,159
confusing is it yelling at me but it's

00:03:19,599 --> 00:03:24,879
italicized so

00:03:22,159 --> 00:03:25,840
um i know most of you are not americans

00:03:24,879 --> 00:03:28,080
um

00:03:25,840 --> 00:03:29,120
but these fonts this is all the same

00:03:28,080 --> 00:03:32,080
word right new york

00:03:29,120 --> 00:03:33,360
new york new york i feel like i should

00:03:32,080 --> 00:03:36,319
have started singing the song

00:03:33,360 --> 00:03:38,959
but um but each of these evokes a

00:03:36,319 --> 00:03:40,879
different feeling in me

00:03:38,959 --> 00:03:42,159
because i'm also it's like brand

00:03:40,879 --> 00:03:43,680
recognition so it's like

00:03:42,159 --> 00:03:46,400
associated with the publications that

00:03:43,680 --> 00:03:48,400
they are from or the sports teams they

00:03:46,400 --> 00:03:51,760
are used for

00:03:48,400 --> 00:03:54,640
so typography is still important

00:03:51,760 --> 00:03:55,680
but what like when we talk about fonts

00:03:54,640 --> 00:03:57,599
in action

00:03:55,680 --> 00:03:59,360
in the web and typography what annoys

00:03:57,599 --> 00:04:00,799
you i like to be interactive so i want

00:03:59,360 --> 00:04:02,239
you to shout things at me

00:04:00,799 --> 00:04:05,599
what is something that annoys you about

00:04:02,239 --> 00:04:05,599
fonts and performance in the web

00:04:05,760 --> 00:04:10,239
they are slow when they're slow right

00:04:07,840 --> 00:04:10,239
what else

00:04:10,640 --> 00:04:15,840
special characters yes

00:04:23,440 --> 00:04:28,479
and like what else about swapping fonts

00:04:25,680 --> 00:04:31,680
there's something that really annoys me

00:04:28,479 --> 00:04:32,960
what oh the flash but also like

00:04:31,680 --> 00:04:34,639
especially when it like

00:04:32,960 --> 00:04:36,160
moves everything and you're like oh my

00:04:34,639 --> 00:04:38,080
god i was halfway down this article and

00:04:36,160 --> 00:04:39,520
i have no idea where i am anymore right

00:04:38,080 --> 00:04:41,280
like that's annoying

00:04:39,520 --> 00:04:43,199
so i'm a web developer but i'm also very

00:04:41,280 --> 00:04:43,600
concerned about user experience which is

00:04:43,199 --> 00:04:46,000
why

00:04:43,600 --> 00:04:48,160
i love performance because i want the

00:04:46,000 --> 00:04:49,280
users to be happy when they visit a page

00:04:48,160 --> 00:04:52,160
and not feel like

00:04:49,280 --> 00:04:53,520
it's annoying so let's jump right into

00:04:52,160 --> 00:04:54,880
case studies

00:04:53,520 --> 00:04:56,960
first i'm going to talk about web fonts

00:04:54,880 --> 00:04:59,680
so like google fonts how many of you use

00:04:56,960 --> 00:05:02,080
google fonts or something similar yeah

00:04:59,680 --> 00:05:05,199
we all love them yay

00:05:02,080 --> 00:05:08,720
um so web fonts um

00:05:05,199 --> 00:05:10,160
they're hosted on fast and reliable cdns

00:05:08,720 --> 00:05:11,360
they also have optimized variants i

00:05:10,160 --> 00:05:13,039
don't know if you know this but for

00:05:11,360 --> 00:05:14,479
example with google fonts i think open

00:05:13,039 --> 00:05:15,440
sounds has at least 30 something

00:05:14,479 --> 00:05:17,840
different variants

00:05:15,440 --> 00:05:18,880
that optimize based on um a user's

00:05:17,840 --> 00:05:22,560
browser

00:05:18,880 --> 00:05:24,479
so because i don't know if you know but

00:05:22,560 --> 00:05:26,080
this is the joy of web development

00:05:24,479 --> 00:05:28,320
browser differences right

00:05:26,080 --> 00:05:29,919
so like safari is not going to render

00:05:28,320 --> 00:05:31,440
fonts in the same way that

00:05:29,919 --> 00:05:33,680
chrome does so this can be a little

00:05:31,440 --> 00:05:35,520
annoying so it's nice when you use these

00:05:33,680 --> 00:05:38,000
cdn's because they can you know

00:05:35,520 --> 00:05:41,360
they can actually serve a more optimized

00:05:38,000 --> 00:05:44,560
font for that user's browser

00:05:41,360 --> 00:05:47,600
this this should be an air quote

00:05:44,560 --> 00:05:50,960
opportunity for shared caching

00:05:47,600 --> 00:05:50,960
we'll get back to that in a little bit

00:05:51,199 --> 00:05:56,639
but we now have control over um foot and

00:05:54,000 --> 00:05:58,319
fight a flash of unstylotex and flash of

00:05:56,639 --> 00:05:59,360
invisible text and we'll talk about that

00:05:58,319 --> 00:06:01,520
a little later

00:05:59,360 --> 00:06:03,039
what are the downsides there's a minimum

00:06:01,520 --> 00:06:04,720
of two separate requests

00:06:03,039 --> 00:06:06,160
i'll talk about why we're going to jump

00:06:04,720 --> 00:06:08,000
right into that

00:06:06,160 --> 00:06:09,039
you can't use resource hints if you

00:06:08,000 --> 00:06:11,440
don't know what those are it's all right

00:06:09,039 --> 00:06:14,120
i'll tell you what they are

00:06:11,440 --> 00:06:16,080
and it can't take advantage of h2

00:06:14,120 --> 00:06:18,319
multiplexing

00:06:16,080 --> 00:06:20,639
if the server can even prioritize it

00:06:18,319 --> 00:06:23,759
right and luckily right after my talk

00:06:20,639 --> 00:06:26,800
robin's going to dive deep into a lot of

00:06:23,759 --> 00:06:28,880
h2 issues and other things

00:06:26,800 --> 00:06:31,199
so i know the font's a little small on

00:06:28,880 --> 00:06:33,039
this our screen's a little small

00:06:31,199 --> 00:06:35,120
but this is a network profile i'm

00:06:33,039 --> 00:06:36,639
assuming most of you have seen a network

00:06:35,120 --> 00:06:38,160
profile

00:06:36,639 --> 00:06:40,479
and if not you know it's okay we'll

00:06:38,160 --> 00:06:42,160
learn here um

00:06:40,479 --> 00:06:44,720
so what's in this first line what's the

00:06:42,160 --> 00:06:47,120
first line always anyways

00:06:44,720 --> 00:06:48,319
what what file is that it's like the

00:06:47,120 --> 00:06:51,599
page right

00:06:48,319 --> 00:06:53,080
um the second file uh you can't read it

00:06:51,599 --> 00:06:54,240
i'll just read it to you it says

00:06:53,080 --> 00:06:57,520
style.css

00:06:54,240 --> 00:07:00,639
right so what do you think that is

00:06:57,520 --> 00:07:01,199
stylesheet yeah i know it's a trick

00:07:00,639 --> 00:07:04,960
question

00:07:01,199 --> 00:07:08,000
not um the third line

00:07:04,960 --> 00:07:11,280
it says fonts.googleapis.com

00:07:08,000 --> 00:07:11,280
css what is that

00:07:14,880 --> 00:07:18,319
it's that call it's that it's what you

00:07:16,479 --> 00:07:21,440
copy paste from google fonts

00:07:18,319 --> 00:07:22,639
into either the head or into your style

00:07:21,440 --> 00:07:25,919
sheet right

00:07:22,639 --> 00:07:25,919
but what kind of file is that

00:07:26,479 --> 00:07:29,680
it's a css file right it's not the

00:07:28,400 --> 00:07:31,759
actual font

00:07:29,680 --> 00:07:33,199
the css file does have you ever opened

00:07:31,759 --> 00:07:34,720
it and looked at it it does all the font

00:07:33,199 --> 00:07:37,280
face decorations

00:07:34,720 --> 00:07:38,880
and then after that it calls out to

00:07:37,280 --> 00:07:41,840
fetch the fonts

00:07:38,880 --> 00:07:43,440
um so what do you think those last two

00:07:41,840 --> 00:07:45,919
lines are

00:07:43,440 --> 00:07:48,080
the fonts does this look efficient to

00:07:45,919 --> 00:07:48,080
you

00:07:48,560 --> 00:07:53,520
what's going on here why what does

00:07:51,199 --> 00:07:57,520
anyone notice like a big glaring

00:07:53,520 --> 00:07:59,840
issue of um what's going on here and

00:07:57,520 --> 00:08:02,319
why i might have made this slower than

00:07:59,840 --> 00:08:05,520
it needs to be

00:08:02,319 --> 00:08:06,960
so we have remember index the css my

00:08:05,520 --> 00:08:08,879
font css

00:08:06,960 --> 00:08:13,840
and then the fonts that's the order so

00:08:08,879 --> 00:08:13,840
what's going on there

00:08:17,360 --> 00:08:23,199
yeah sorry sorry camera

00:08:20,400 --> 00:08:27,840
what's why is this starting here after

00:08:23,199 --> 00:08:27,840
the css

00:08:27,919 --> 00:08:32,719
because i called it from my css have you

00:08:30,800 --> 00:08:33,599
ever actually i'm going to break all

00:08:32,719 --> 00:08:37,519
these rules

00:08:33,599 --> 00:08:40,320
about the video sorry um

00:08:37,519 --> 00:08:41,440
i am calling the font from your style

00:08:40,320 --> 00:08:43,519
sheet because you know it gives you

00:08:41,440 --> 00:08:45,839
those two options

00:08:43,519 --> 00:08:47,360
um sometimes it's easier to do this like

00:08:45,839 --> 00:08:49,120
maybe you're working with a framework or

00:08:47,360 --> 00:08:50,399
a tool and it's easier to drop your font

00:08:49,120 --> 00:08:53,519
call in your css

00:08:50,399 --> 00:08:55,200
but you're paying a performance price

00:08:53,519 --> 00:08:57,360
so what's one way we can fix that what's

00:08:55,200 --> 00:09:00,800
one way that we can

00:08:57,360 --> 00:09:00,800
make it start loading right away

00:09:02,000 --> 00:09:06,399
put it in the head of the html um

00:09:05,120 --> 00:09:08,240
so when we put it in the head of the

00:09:06,399 --> 00:09:10,000
html this is what happens so we've

00:09:08,240 --> 00:09:12,399
we scooched it over some we don't have

00:09:10,000 --> 00:09:15,839
to wait for the the css to be

00:09:12,399 --> 00:09:19,440
downloaded and the csm css some created

00:09:15,839 --> 00:09:22,399
and um then call our

00:09:19,440 --> 00:09:24,160
finally our css for our fonts we can put

00:09:22,399 --> 00:09:27,279
it in the head and it will start

00:09:24,160 --> 00:09:28,720
downloading that font css style sheet

00:09:27,279 --> 00:09:31,040
right away

00:09:28,720 --> 00:09:33,600
but what but there's more things we can

00:09:31,040 --> 00:09:35,760
do here to make this faster right

00:09:33,600 --> 00:09:37,279
what do you notice about you can't read

00:09:35,760 --> 00:09:41,040
this but

00:09:37,279 --> 00:09:44,160
it says fonts.googleapis.com and then

00:09:41,040 --> 00:09:46,080
the actual font lines say fonts.g

00:09:44,160 --> 00:09:47,680
static you can't see the rest of this

00:09:46,080 --> 00:09:50,800
but it's dot com and then there's a long

00:09:47,680 --> 00:09:56,000
hash for the font

00:09:50,800 --> 00:09:56,000
so what's happening here

00:09:56,880 --> 00:10:04,160
yeah but didn't we just make a call to

00:10:00,880 --> 00:10:06,000
to google they're on two different

00:10:04,160 --> 00:10:07,839
domains

00:10:06,000 --> 00:10:09,680
so the style sheet and the fonts are on

00:10:07,839 --> 00:10:12,800
two different domains

00:10:09,680 --> 00:10:12,800
so what do we have to do

00:10:12,959 --> 00:10:16,079
yeah oh yeah we'll talk about the font

00:10:14,560 --> 00:10:19,040
hints but um

00:10:16,079 --> 00:10:20,720
so the browser has to start up a

00:10:19,040 --> 00:10:22,160
connection to that separate domain but

00:10:20,720 --> 00:10:24,959
it won't do that until it knows that it

00:10:22,160 --> 00:10:28,640
has to reach out to that domain

00:10:24,959 --> 00:10:30,079
um so we have this wasted time again

00:10:28,640 --> 00:10:31,760
from doing this connection we know we're

00:10:30,079 --> 00:10:32,000
going to do this connection but we don't

00:10:31,760 --> 00:10:35,120
know

00:10:32,000 --> 00:10:37,040
until after that style sheet is

00:10:35,120 --> 00:10:39,120
downloaded and the css song is created

00:10:37,040 --> 00:10:43,040
so that it knows

00:10:39,120 --> 00:10:43,040
so resource hints are our friends um

00:10:44,079 --> 00:10:48,320
we're going to focus on these middle

00:10:45,360 --> 00:10:51,040
three um this is a nice little handy

00:10:48,320 --> 00:10:52,800
thing i got from um one of addy awesome

00:10:51,040 --> 00:10:55,120
andy's tweets he's a

00:10:52,800 --> 00:10:56,720
he was a performance engineer at google

00:10:55,120 --> 00:11:00,399
i think he's on a different team now

00:10:56,720 --> 00:11:02,240
but he has some great stuff um so

00:11:00,399 --> 00:11:03,760
pre-connect preload and prefetch are

00:11:02,240 --> 00:11:06,000
really fun um

00:11:03,760 --> 00:11:07,839
resource hints uh we'll talk about dns

00:11:06,000 --> 00:11:08,640
prefetch also but first we'll talk about

00:11:07,839 --> 00:11:12,000
the others

00:11:08,640 --> 00:11:14,800
so what pre-connect does is it can

00:11:12,000 --> 00:11:15,920
warm up a connection for you it can do

00:11:14,800 --> 00:11:16,880
all the steps of warming up that

00:11:15,920 --> 00:11:18,720
connection for you

00:11:16,880 --> 00:11:20,320
and just have it waiting for you in the

00:11:18,720 --> 00:11:22,000
background but there's a time limit on

00:11:20,320 --> 00:11:24,160
it

00:11:22,000 --> 00:11:25,200
so if you don't think that you're going

00:11:24,160 --> 00:11:27,360
to access

00:11:25,200 --> 00:11:29,279
a domain until later what you can do is

00:11:27,360 --> 00:11:31,360
instead do dns prefetch and it just does

00:11:29,279 --> 00:11:32,160
a dns part so at least it negotiates

00:11:31,360 --> 00:11:33,440
that time

00:11:32,160 --> 00:11:35,600
but a pre-connect will do the rest of

00:11:33,440 --> 00:11:38,720
the connection as well but it has

00:11:35,600 --> 00:11:42,480
it's time sensitive um preload

00:11:38,720 --> 00:11:45,920
what preload does is um

00:11:42,480 --> 00:11:47,680
it tells the browser oh hey i know i'm

00:11:45,920 --> 00:11:51,120
going to need this file

00:11:47,680 --> 00:11:52,639
soon download it now so normally

00:11:51,120 --> 00:11:54,079
browsers are smart they're not going to

00:11:52,639 --> 00:11:56,000
download a file until they know it's

00:11:54,079 --> 00:11:56,880
necessary when we're talking about fonts

00:11:56,000 --> 00:11:58,800
and similar

00:11:56,880 --> 00:12:00,079
so it's not going to pull it down until

00:11:58,800 --> 00:12:00,880
it knows that you have the matching

00:12:00,079 --> 00:12:02,639
characters

00:12:00,880 --> 00:12:04,560
and that you're using the font on that

00:12:02,639 --> 00:12:06,720
page based on the css

00:12:04,560 --> 00:12:08,639
but preload says hey i'm going to just

00:12:06,720 --> 00:12:09,600
go ahead and download it now

00:12:08,639 --> 00:12:11,600
because i know i'm going to need it

00:12:09,600 --> 00:12:12,880
later even though you don't know it yet

00:12:11,600 --> 00:12:14,560
prefetch lets you uh

00:12:12,880 --> 00:12:15,760
put things in your cache for future use

00:12:14,560 --> 00:12:16,480
we're not going to talk about that in

00:12:15,760 --> 00:12:19,040
here but just

00:12:16,480 --> 00:12:19,040
so you know

00:12:19,519 --> 00:12:23,440
so what can we do actually conveniently

00:12:21,839 --> 00:12:25,680
on this slide

00:12:23,440 --> 00:12:27,760
that code snippet is exactly what you

00:12:25,680 --> 00:12:31,200
would use with google fonts

00:12:27,760 --> 00:12:32,680
so what it says that is i want you to

00:12:31,200 --> 00:12:33,839
warm up the connection to

00:12:32,680 --> 00:12:36,560
fonts.gststatic.com

00:12:33,839 --> 00:12:38,639
now and so if we just put that in on the

00:12:36,560 --> 00:12:39,839
head of our html with our call to our

00:12:38,639 --> 00:12:41,519
style sheet

00:12:39,839 --> 00:12:43,920
then that connection will start to warm

00:12:41,519 --> 00:12:45,360
up and you can see it down here

00:12:43,920 --> 00:12:46,959
you know it's kind of just like on its

00:12:45,360 --> 00:12:52,399
own hanging out here

00:12:46,959 --> 00:12:54,000
before the actual fonts are downloaded

00:12:52,399 --> 00:12:55,839
so you just copy that line directly in

00:12:54,000 --> 00:12:59,360
there and that does a pre-connect

00:12:55,839 --> 00:13:00,720
and so now we've made our site faster

00:12:59,360 --> 00:13:03,600
by just doing these little kind of

00:13:00,720 --> 00:13:05,519
tricks like the code isn't significantly

00:13:03,600 --> 00:13:08,480
different but you can actually

00:13:05,519 --> 00:13:10,880
make a pretty good chunk of savings just

00:13:08,480 --> 00:13:10,880
right there

00:13:12,079 --> 00:13:15,920
let's talk about self-hosted fonts so

00:13:14,320 --> 00:13:20,800
these are fonts that you host

00:13:15,920 --> 00:13:22,399
you know on your domain

00:13:20,800 --> 00:13:25,680
so you might call them in your head like

00:13:22,399 --> 00:13:25,680
this um

00:13:25,760 --> 00:13:28,320
preferably in your head because then you

00:13:27,120 --> 00:13:30,720
know you don't have the same problem as

00:13:28,320 --> 00:13:33,519
before when we call it from our css

00:13:30,720 --> 00:13:35,680
so this is my waterfall what's on the

00:13:33,519 --> 00:13:38,519
first line

00:13:35,680 --> 00:13:40,240
the page itself right the second line is

00:13:38,519 --> 00:13:41,839
mystal.css

00:13:40,240 --> 00:13:43,680
that's also where i have my font face

00:13:41,839 --> 00:13:45,360
declarations

00:13:43,680 --> 00:13:50,000
and then what's going on with those last

00:13:45,360 --> 00:13:52,000
two lines it's the fonts right

00:13:50,000 --> 00:13:53,680
but like what was one of those hints do

00:13:52,000 --> 00:13:56,959
you remember what i said earlier

00:13:53,680 --> 00:14:00,800
there's a hint that can say oh hey

00:13:56,959 --> 00:14:01,519
hey browser preconnect is for the

00:14:00,800 --> 00:14:02,880
connection

00:14:01,519 --> 00:14:05,040
we've already this is our domain so we

00:14:02,880 --> 00:14:07,360
don't need to do any extra connections

00:14:05,040 --> 00:14:09,519
preload so what we oh sorry forgot the

00:14:07,360 --> 00:14:12,399
mic was there

00:14:09,519 --> 00:14:13,519
so what we can do is we can say hey

00:14:12,399 --> 00:14:16,160
browser

00:14:13,519 --> 00:14:18,079
i'm definitely going to use this font i

00:14:16,160 --> 00:14:19,920
want you to

00:14:18,079 --> 00:14:22,240
download it earlier so i don't have this

00:14:19,920 --> 00:14:23,680
longer time of waiting

00:14:22,240 --> 00:14:25,519
um because you know what else is

00:14:23,680 --> 00:14:27,360
happening what happens

00:14:25,519 --> 00:14:28,720
while that font is downloading but it's

00:14:27,360 --> 00:14:31,839
not yet loaded

00:14:28,720 --> 00:14:31,839
what does the page look like

00:14:32,240 --> 00:14:35,680
it depends on your font display settings

00:14:34,079 --> 00:14:37,440
but it's either going to be

00:14:35,680 --> 00:14:39,040
invisible or it's going to be a

00:14:37,440 --> 00:14:43,279
different font

00:14:39,040 --> 00:14:46,780
until that loads yeah

00:14:43,279 --> 00:14:50,480
i call it food but other people say fout

00:14:46,780 --> 00:14:52,959
[Laughter]

00:14:50,480 --> 00:14:53,920
good thing we're not talking about uh

00:14:52,959 --> 00:14:56,000
content

00:14:53,920 --> 00:14:57,519
um so what we can do is we can preload

00:14:56,000 --> 00:14:58,320
and the only thing i've added to these

00:14:57,519 --> 00:15:01,920
lines here

00:14:58,320 --> 00:15:03,680
is this rel equals preload

00:15:01,920 --> 00:15:05,360
and then what can happen now on

00:15:03,680 --> 00:15:08,800
supported browsers

00:15:05,360 --> 00:15:09,440
is that those files will be downloaded

00:15:08,800 --> 00:15:11,279
right away

00:15:09,440 --> 00:15:12,800
any file i put link rail preload on

00:15:11,279 --> 00:15:16,959
there so

00:15:12,800 --> 00:15:16,959
with great power comes what

00:15:17,120 --> 00:15:21,120
great responsibility if you watched any

00:15:19,600 --> 00:15:23,839
superhero movie

00:15:21,120 --> 00:15:25,440
um and so we don't want to abuse this

00:15:23,839 --> 00:15:27,199
right

00:15:25,440 --> 00:15:28,880
we only want to do this when we're

00:15:27,199 --> 00:15:30,399
actually going to use they're definitely

00:15:28,880 --> 00:15:32,399
going to use the file on that page

00:15:30,399 --> 00:15:36,160
because we don't want to abuse

00:15:32,399 --> 00:15:38,880
our users data plans and also i suspect

00:15:36,160 --> 00:15:40,560
is it the next slide i suspect that's

00:15:38,880 --> 00:15:42,720
why this has happened i don't know does

00:15:40,560 --> 00:15:44,560
anyone know anyone on the firefox team

00:15:42,720 --> 00:15:46,560
so on firefox preload used to be

00:15:44,560 --> 00:15:49,839
supported and now it's not supported

00:15:46,560 --> 00:15:50,320
it's like behind a flag so um i would

00:15:49,839 --> 00:15:52,079
really

00:15:50,320 --> 00:15:53,680
be curious if anyone on the firefox name

00:15:52,079 --> 00:15:56,560
please uh oh my

00:15:53,680 --> 00:15:57,600
twitter handle is the green greek um

00:15:56,560 --> 00:15:59,839
please

00:15:57,600 --> 00:16:00,959
let me know what happened there um my

00:15:59,839 --> 00:16:02,720
guess is because

00:16:00,959 --> 00:16:04,079
maybe they are concerned about the users

00:16:02,720 --> 00:16:05,519
and kind of people abusing these

00:16:04,079 --> 00:16:07,680
privileges

00:16:05,519 --> 00:16:09,279
so um make sure that you don't abuse

00:16:07,680 --> 00:16:12,480
this privilege but it will work in all

00:16:09,279 --> 00:16:12,480
the other modern browsers

00:16:13,199 --> 00:16:17,519
so um remember when i said when i said

00:16:16,480 --> 00:16:19,360
uh

00:16:17,519 --> 00:16:20,399
shared caching of popular fonts they

00:16:19,360 --> 00:16:22,320
used to say like you know if you're

00:16:20,399 --> 00:16:25,600
using open sans or roboto don't

00:16:22,320 --> 00:16:27,440
uh just

00:16:25,600 --> 00:16:29,519
do it directly from google fonts oh

00:16:27,440 --> 00:16:32,480
don't ever try to just copy the hash

00:16:29,519 --> 00:16:32,880
of the um of the font itself there's a

00:16:32,480 --> 00:16:34,560
hash

00:16:32,880 --> 00:16:36,000
so don't try to copy that whole url

00:16:34,560 --> 00:16:37,920
because those are changed often and

00:16:36,000 --> 00:16:40,079
they'll just disappear so you never want

00:16:37,920 --> 00:16:40,639
to do that but shared cache is going

00:16:40,079 --> 00:16:42,160
away

00:16:40,639 --> 00:16:43,839
so now you can contemplate whether it

00:16:42,160 --> 00:16:45,759
might be a good idea to download the

00:16:43,839 --> 00:16:47,440
font and serve it locally even if it is

00:16:45,759 --> 00:16:49,440
a google font you'll lose some of the

00:16:47,440 --> 00:16:51,279
other benefits like the variants and

00:16:49,440 --> 00:16:53,680
stuff like that

00:16:51,279 --> 00:16:54,560
but um because of double key caching and

00:16:53,680 --> 00:16:55,759
i don't know if anyone's going to talk

00:16:54,560 --> 00:17:00,320
about this later

00:16:55,759 --> 00:17:03,360
but shared cash is not really

00:17:00,320 --> 00:17:05,839
a benefit anymore let's talk about font

00:17:03,360 --> 00:17:05,839
rendering

00:17:06,959 --> 00:17:14,000
so remember when i said white and fruit

00:17:10,240 --> 00:17:15,199
or fout um floyd is on this page i know

00:17:14,000 --> 00:17:19,120
it's a little hard to see

00:17:15,199 --> 00:17:20,640
um this is i have a screenshot of

00:17:19,120 --> 00:17:23,120
performance happening

00:17:20,640 --> 00:17:24,160
that's what's over here on the right

00:17:23,120 --> 00:17:25,679
hand side

00:17:24,160 --> 00:17:27,199
and this is the page itself if you look

00:17:25,679 --> 00:17:29,600
at the page itself you can see there are

00:17:27,199 --> 00:17:32,880
actual words in my navbar

00:17:29,600 --> 00:17:36,559
but if you could see this

00:17:32,880 --> 00:17:39,919
screenshot better the

00:17:36,559 --> 00:17:40,400
projector's a little bit dark there's no

00:17:39,919 --> 00:17:43,840
words

00:17:40,400 --> 00:17:45,520
in my nav bar there's no words in my

00:17:43,840 --> 00:17:47,280
button

00:17:45,520 --> 00:17:49,120
it's annoying right that's a flash of

00:17:47,280 --> 00:17:50,559
invisible text does anyone know why

00:17:49,120 --> 00:17:53,280
that's happening

00:17:50,559 --> 00:17:54,160
this is this was using google fonts does

00:17:53,280 --> 00:17:57,120
anyone know why

00:17:54,160 --> 00:17:57,120
that was happening

00:17:58,240 --> 00:18:03,440
yeah yeah so the default for

00:18:01,280 --> 00:18:05,760
google fonts on their font display

00:18:03,440 --> 00:18:07,919
property was display swap

00:18:05,760 --> 00:18:09,679
so that means that it's going to show

00:18:07,919 --> 00:18:11,440
the fallback font

00:18:09,679 --> 00:18:13,280
for up to three seconds and then it

00:18:11,440 --> 00:18:17,200
finally will switch to the web font

00:18:13,280 --> 00:18:19,280
um so

00:18:17,200 --> 00:18:20,480
it won't i'm sorry it will block it it

00:18:19,280 --> 00:18:23,039
won't show anything at

00:18:20,480 --> 00:18:24,480
all and um for three seconds and then it

00:18:23,039 --> 00:18:26,160
will show the fallback and then it will

00:18:24,480 --> 00:18:28,000
show the web font

00:18:26,160 --> 00:18:29,600
and so this was annoying right like you

00:18:28,000 --> 00:18:31,919
couldn't you had no control over this

00:18:29,600 --> 00:18:35,360
before but now you have control

00:18:31,919 --> 00:18:38,000
um with the google fonts api and now by

00:18:35,360 --> 00:18:38,480
default it has this part of the url in

00:18:38,000 --> 00:18:41,760
it

00:18:38,480 --> 00:18:43,840
if you just add and display equal swap

00:18:41,760 --> 00:18:45,760
you will get um display swap and what

00:18:43,840 --> 00:18:48,799
display swap does is instead

00:18:45,760 --> 00:18:50,320
of um making it invisible

00:18:48,799 --> 00:18:52,559
it will show the fallback font until the

00:18:50,320 --> 00:18:53,840
font web font is loaded

00:18:52,559 --> 00:18:56,559
and we're going to kind of see a little

00:18:53,840 --> 00:18:59,360
bit of this in action in a minute

00:18:56,559 --> 00:19:01,280
so that's really cool if you have legacy

00:18:59,360 --> 00:19:03,200
apps that use google fonts

00:19:01,280 --> 00:19:04,720
you can make you can make them use

00:19:03,200 --> 00:19:06,640
display swap if you want all you have to

00:19:04,720 --> 00:19:08,320
do is add that last part of the url

00:19:06,640 --> 00:19:11,360
you don't have to like go in and like

00:19:08,320 --> 00:19:15,360
re-copy your urls you just add the

00:19:11,360 --> 00:19:15,360
um the query at the end

00:19:17,360 --> 00:19:29,360
so that's not playing

00:19:25,440 --> 00:19:31,919
so flash of unstyled text right

00:19:29,360 --> 00:19:32,480
that's this change here that's annoying

00:19:31,919 --> 00:19:34,559
right

00:19:32,480 --> 00:19:38,240
um some i mean sometimes it's more

00:19:34,559 --> 00:19:40,320
annoying than others

00:19:38,240 --> 00:19:42,240
if we think about what's happening here

00:19:40,320 --> 00:19:45,520
i mean this might vary by user

00:19:42,240 --> 00:19:46,080
i feel like we used to match fonts based

00:19:45,520 --> 00:19:49,520
more on

00:19:46,080 --> 00:19:51,679
style but if i'm for example reading

00:19:49,520 --> 00:19:53,360
a blog post or an article the thing

00:19:51,679 --> 00:19:54,160
that's going to annoy me more is layout

00:19:53,360 --> 00:19:56,000
shift

00:19:54,160 --> 00:19:57,280
so once that font comes in if i'm on a

00:19:56,000 --> 00:19:58,640
totally different paragraph when it

00:19:57,280 --> 00:20:00,400
comes in

00:19:58,640 --> 00:20:01,919
for me as a user that's going to annoy

00:20:00,400 --> 00:20:05,440
me so for me

00:20:01,919 --> 00:20:08,159
i reckon i um i guess

00:20:05,440 --> 00:20:09,679
recognize the intent of this quote the

00:20:08,159 --> 00:20:12,000
style doesn't matter so much

00:20:09,679 --> 00:20:14,480
as it has to flow the same way and so

00:20:12,000 --> 00:20:17,120
there's some great tools that we can use

00:20:14,480 --> 00:20:18,840
like um font style matcher uh and i'm

00:20:17,120 --> 00:20:21,600
gonna actually go to

00:20:18,840 --> 00:20:23,600
this um and so what you can do

00:20:21,600 --> 00:20:26,480
is you let me zoom in so you can see

00:20:23,600 --> 00:20:26,480
this a little bit better

00:20:26,559 --> 00:20:31,520
um you can put it automatically has

00:20:29,679 --> 00:20:33,039
google fonts available here but you can

00:20:31,520 --> 00:20:34,559
also upload your own font so i've

00:20:33,039 --> 00:20:36,000
uploaded this font and i'm going to tell

00:20:34,559 --> 00:20:38,159
you more about that font

00:20:36,000 --> 00:20:39,360
and what my fallback font used to be was

00:20:38,159 --> 00:20:42,080
ariel

00:20:39,360 --> 00:20:43,200
so if i go down here you can see them

00:20:42,080 --> 00:20:44,640
overlapped

00:20:43,200 --> 00:20:46,559
we can use a different color for each

00:20:44,640 --> 00:20:48,240
font so ariel's red now

00:20:46,559 --> 00:20:49,760
and then you can see an action like the

00:20:48,240 --> 00:20:53,360
shift that happens

00:20:49,760 --> 00:20:54,720
um so i have this this is actually a

00:20:53,360 --> 00:20:55,840
variable font i'm going to talk about

00:20:54,720 --> 00:20:57,440
that in a minute

00:20:55,840 --> 00:20:59,360
so we can see what happens and what we

00:20:57,440 --> 00:21:02,000
can do is we can adjust properties

00:20:59,360 --> 00:21:03,520
for example like font size arial if you

00:21:02,000 --> 00:21:05,039
look here it just it's a little bit

00:21:03,520 --> 00:21:06,559
smaller so i could like bump up the font

00:21:05,039 --> 00:21:08,400
size and i could basically provide an

00:21:06,559 --> 00:21:12,080
entire fallback font

00:21:08,400 --> 00:21:12,880
and change things um change which one is

00:21:12,080 --> 00:21:14,960
used based

00:21:12,880 --> 00:21:16,559
use on javascript i prefer not to do

00:21:14,960 --> 00:21:18,320
javascript so what i did is

00:21:16,559 --> 00:21:21,520
i put in some other website fonts in

00:21:18,320 --> 00:21:24,480
here and i found that

00:21:21,520 --> 00:21:27,520
um verdana i actually don't know how to

00:21:24,480 --> 00:21:27,520
pronounce that for donna

00:21:29,280 --> 00:21:32,880
i put that one in and it matched a lot

00:21:32,000 --> 00:21:35,200
faster

00:21:32,880 --> 00:21:36,799
but you can actually get super close on

00:21:35,200 --> 00:21:38,320
some fonts and then maybe you realize

00:21:36,799 --> 00:21:41,840
you don't actually need

00:21:38,320 --> 00:21:44,720
your web font but um but at least here

00:21:41,840 --> 00:21:45,200
my um the size of the font the line

00:21:44,720 --> 00:21:47,520
height

00:21:45,200 --> 00:21:49,360
and the wet the letter spacing really

00:21:47,520 --> 00:21:50,880
closely matches so it makes a really

00:21:49,360 --> 00:21:52,400
great fallback font for me because i

00:21:50,880 --> 00:21:54,080
don't want the extra javascript on the

00:21:52,400 --> 00:21:58,320
page just to load a separate

00:21:54,080 --> 00:22:00,240
um font style as well

00:21:58,320 --> 00:22:02,720
so that's a great tool to keep in your

00:22:00,240 --> 00:22:07,200
back pocket for

00:22:02,720 --> 00:22:08,799
having to deal with the swapping fonts

00:22:07,200 --> 00:22:11,360
how many of you have used variable fonts

00:22:08,799 --> 00:22:13,120
before i figured i would go into this a

00:22:11,360 --> 00:22:15,120
little bit because they're fun and new

00:22:13,120 --> 00:22:16,720
and so um and they also present some

00:22:15,120 --> 00:22:18,480
challenges for performance

00:22:16,720 --> 00:22:20,240
so we are going to we don't have slides

00:22:18,480 --> 00:22:22,080
for this we're just going to do this

00:22:20,240 --> 00:22:23,520
i started playing with this variable

00:22:22,080 --> 00:22:25,440
font called recursive they have a really

00:22:23,520 --> 00:22:28,559
cool website

00:22:25,440 --> 00:22:30,320
um and it's a highly flexible new

00:22:28,559 --> 00:22:32,559
variable font what i should do

00:22:30,320 --> 00:22:35,840
is go to firefox when was the last time

00:22:32,559 --> 00:22:35,840
you used firefox devtools

00:22:36,080 --> 00:22:39,760
yesterday okay somebody actually hears

00:22:38,320 --> 00:22:43,280
me so um

00:22:39,760 --> 00:22:45,679
i do use okay that's fine

00:22:43,280 --> 00:22:46,720
um i do use chrome mostly for

00:22:45,679 --> 00:22:51,039
performance

00:22:46,720 --> 00:22:51,039
but um firefox has

00:22:51,360 --> 00:22:55,840
you know what helps what to do before

00:22:53,360 --> 00:22:55,840
your talk

00:22:56,799 --> 00:23:02,400
get on the wi-fi

00:23:00,000 --> 00:23:04,240
it helps actually i think it might be

00:23:02,400 --> 00:23:08,000
hold on

00:23:04,240 --> 00:23:11,120
yay all right um so if i go

00:23:08,000 --> 00:23:12,720
into then

00:23:11,120 --> 00:23:14,320
inspect my element actually did i

00:23:12,720 --> 00:23:16,320
inspect that one

00:23:14,320 --> 00:23:18,000
i was just doing it randomly let me

00:23:16,320 --> 00:23:20,000
inspect

00:23:18,000 --> 00:23:22,000
what's really cool about firefox

00:23:20,000 --> 00:23:25,120
devtools is they have this whole

00:23:22,000 --> 00:23:29,200
fonts panel over here i wonder if i can

00:23:25,120 --> 00:23:30,559
zoom in that so if you look here

00:23:29,200 --> 00:23:32,720
we're going to play this is so you can

00:23:30,559 --> 00:23:34,480
see what this particular

00:23:32,720 --> 00:23:36,720
variable font will do i mean you can

00:23:34,480 --> 00:23:39,600
play with standard things like size

00:23:36,720 --> 00:23:40,080
and uh line height which is kind of cool

00:23:39,600 --> 00:23:44,000
and

00:23:40,080 --> 00:23:46,799
letter spacing oh that's terrible

00:23:44,000 --> 00:23:48,080
but it also has all these special things

00:23:46,799 --> 00:23:48,799
that are just for this particular

00:23:48,080 --> 00:23:51,120
variable font

00:23:48,799 --> 00:23:51,840
so what does this variable font do right

00:23:51,120 --> 00:23:55,520
now it's

00:23:51,840 --> 00:23:58,080
on um not monospace but this font

00:23:55,520 --> 00:23:59,440
actually can be mono space as well

00:23:58,080 --> 00:24:00,799
so i like to use my blog as my

00:23:59,440 --> 00:24:02,559
playground and so i'm using this

00:24:00,799 --> 00:24:03,760
variable font so i can use oh this is my

00:24:02,559 --> 00:24:06,320
coding font too

00:24:03,760 --> 00:24:06,880
and then you know and my body text is

00:24:06,320 --> 00:24:09,919
going to be

00:24:06,880 --> 00:24:11,919
that and then um it's called casual but

00:24:09,919 --> 00:24:13,360
i call it sassy versus not sassy

00:24:11,919 --> 00:24:15,120
right now that i think that's sassy

00:24:13,360 --> 00:24:18,240
here's not sassy

00:24:15,120 --> 00:24:20,960
and then here's sassy aka casual

00:24:18,240 --> 00:24:22,159
um weight so look at that it's like a

00:24:20,960 --> 00:24:24,559
smooth transition

00:24:22,159 --> 00:24:26,000
i can like choose any weight in there

00:24:24,559 --> 00:24:27,120
that's pretty cool so instead of like

00:24:26,000 --> 00:24:29,120
downloading you know you have to

00:24:27,120 --> 00:24:30,400
download your 700 weight your 800 weight

00:24:29,120 --> 00:24:33,200
like if you want heavy bold

00:24:30,400 --> 00:24:34,960
or you're lightweight um you could

00:24:33,200 --> 00:24:36,559
theoretically just have all your weights

00:24:34,960 --> 00:24:38,559
in one variable font

00:24:36,559 --> 00:24:40,000
and then slant like italics there's

00:24:38,559 --> 00:24:40,799
actually slant and italic are two

00:24:40,000 --> 00:24:44,000
different things

00:24:40,799 --> 00:24:47,200
um italic actually changes um

00:24:44,000 --> 00:24:48,000
slant features as well so firefox that's

00:24:47,200 --> 00:24:51,279
one lesson from

00:24:48,000 --> 00:24:52,640
this firefox infecting inspecting fonts

00:24:51,279 --> 00:24:55,200
are really great actually

00:24:52,640 --> 00:24:56,960
css grid and other inspect element

00:24:55,200 --> 00:24:59,679
things are really cool there

00:24:56,960 --> 00:25:01,919
um so that's a variable font an intro to

00:24:59,679 --> 00:25:04,480
a variable font um

00:25:01,919 --> 00:25:04,480
but um

00:25:05,600 --> 00:25:09,120
how how many how many kilobytes do you

00:25:07,440 --> 00:25:10,720
think are loaded when you do like a

00:25:09,120 --> 00:25:12,000
regular font

00:25:10,720 --> 00:25:15,120
has anyone like looked at that how many

00:25:12,000 --> 00:25:18,640
kilobytes you use

00:25:15,120 --> 00:25:20,880
yeah so i feel like um you know like per

00:25:18,640 --> 00:25:22,640
per style that you use because it might

00:25:20,880 --> 00:25:24,880
be like it's like 400 weight

00:25:22,640 --> 00:25:25,919
regular would be maybe 15 to 20

00:25:24,880 --> 00:25:27,679
kilobytes or

00:25:25,919 --> 00:25:29,840
up to 30 it depends on really the font

00:25:27,679 --> 00:25:30,559
or in uh what subsets you're using like

00:25:29,840 --> 00:25:33,919
is this just

00:25:30,559 --> 00:25:38,000
you know latin text or is it others um

00:25:33,919 --> 00:25:39,600
and so so maybe you have like

00:25:38,000 --> 00:25:40,880
maybe let's say you have four of those

00:25:39,600 --> 00:25:42,000
because you're doing maybe you have two

00:25:40,880 --> 00:25:42,720
different fonts and you have two

00:25:42,000 --> 00:25:44,080
different ways

00:25:42,720 --> 00:25:47,039
that's conservative that's like 80

00:25:44,080 --> 00:25:50,720
kilobytes maybe so

00:25:47,039 --> 00:25:51,679
my basic english subset was 130

00:25:50,720 --> 00:25:53,360
kilobytes

00:25:51,679 --> 00:25:54,720
because it's a variable font like i said

00:25:53,360 --> 00:25:56,159
this is my blog so i get to play with

00:25:54,720 --> 00:25:57,200
things it's okay if they're a little bit

00:25:56,159 --> 00:25:59,279
bigger

00:25:57,200 --> 00:26:00,880
so what happened was the designer came

00:25:59,279 --> 00:26:02,159
out with a new version the font designer

00:26:00,880 --> 00:26:04,159
came out with a new version and he

00:26:02,159 --> 00:26:06,159
wanted me to deploy it but it was like

00:26:04,159 --> 00:26:08,320
400 kilobytes and i was like

00:26:06,159 --> 00:26:10,080
are you a performance engineer i don't

00:26:08,320 --> 00:26:11,679
think i should do that

00:26:10,080 --> 00:26:13,600
so we started playing with performance

00:26:11,679 --> 00:26:14,960
more so if we have things like variable

00:26:13,600 --> 00:26:15,520
fonts what are some other things we

00:26:14,960 --> 00:26:18,400
could do

00:26:15,520 --> 00:26:19,600
perhaps do you have any ideas i mean i

00:26:18,400 --> 00:26:20,400
don't know if we have this all correct

00:26:19,600 --> 00:26:21,520
but

00:26:20,400 --> 00:26:22,960
what do you think we can do there's

00:26:21,520 --> 00:26:23,520
another thing i haven't spoken about

00:26:22,960 --> 00:26:28,640
here

00:26:23,520 --> 00:26:28,640
with fonts that you can do yeah

00:26:31,039 --> 00:26:35,039
yeah so subsetting well we can subset

00:26:33,120 --> 00:26:35,760
based on character codes um do you know

00:26:35,039 --> 00:26:37,360
about this

00:26:35,760 --> 00:26:39,279
inside your font i don't know if you've

00:26:37,360 --> 00:26:41,200
played in font display properties

00:26:39,279 --> 00:26:43,360
we're all developers most of us are

00:26:41,200 --> 00:26:45,840
developers in here right so it's like

00:26:43,360 --> 00:26:48,480
we don't often play or learn all the css

00:26:45,840 --> 00:26:51,200
things that maybe we should

00:26:48,480 --> 00:26:53,279
um but uh let me zoom in a little i was

00:26:51,200 --> 00:26:55,039
going to show you the difference with um

00:26:53,279 --> 00:26:57,360
for donna but it's fine so what we did

00:26:55,039 --> 00:27:00,000
is we made more subsets

00:26:57,360 --> 00:27:01,520
and so most of my website is in basic

00:27:00,000 --> 00:27:05,919
english characters

00:27:01,520 --> 00:27:06,400
and so um you can put a unicode range in

00:27:05,919 --> 00:27:09,760
your

00:27:06,400 --> 00:27:11,840
um font face declarations and it knows

00:27:09,760 --> 00:27:13,520
to use this font for this unicode range

00:27:11,840 --> 00:27:14,400
and this is the only one that i preload

00:27:13,520 --> 00:27:16,159
now

00:27:14,400 --> 00:27:17,840
i don't preload the rest and then the

00:27:16,159 --> 00:27:19,279
others will only ever load if they're

00:27:17,840 --> 00:27:23,120
used on a page

00:27:19,279 --> 00:27:25,200
so um like i have um

00:27:23,120 --> 00:27:26,799
yeah so like some diacritics and some

00:27:25,200 --> 00:27:30,159
other things some symbols

00:27:26,799 --> 00:27:31,520
and extended fonts and then a special

00:27:30,159 --> 00:27:34,399
font just for my first name because i

00:27:31,520 --> 00:27:37,120
made it the super heavyweight

00:27:34,399 --> 00:27:37,840
so um that's that's the path we chose

00:27:37,120 --> 00:27:39,520
there's also

00:27:37,840 --> 00:27:42,000
tools you can do to subset your fonts if

00:27:39,520 --> 00:27:44,480
you want really aggressive subsetting um

00:27:42,000 --> 00:27:46,000
it's actually called sub font i think i

00:27:44,480 --> 00:27:47,679
have a link to it in the back of this

00:27:46,000 --> 00:27:49,039
but if you want to look at sub fonting

00:27:47,679 --> 00:27:50,399
not just for variable fonts for any

00:27:49,039 --> 00:27:51,840
fonts you can look at this tool called

00:27:50,399 --> 00:27:53,760
cell font

00:27:51,840 --> 00:27:55,600
i forgot the developer who wrote it but

00:27:53,760 --> 00:27:59,200
it kind of gives you a whole

00:27:55,600 --> 00:28:01,760
set of tools for setting up your fonts

00:27:59,200 --> 00:28:04,080
in a more performant way

00:28:01,760 --> 00:28:05,279
so yeah what's really cool about preload

00:28:04,080 --> 00:28:08,240
which i forgot to mention because i

00:28:05,279 --> 00:28:11,440
wanted to show it to you live

00:28:08,240 --> 00:28:14,080
is that often what

00:28:11,440 --> 00:28:16,480
happens is we can beat the rendering

00:28:14,080 --> 00:28:18,960
path remember what preload does

00:28:16,480 --> 00:28:19,919
it auto it automatically we put in our

00:28:18,960 --> 00:28:21,200
head that we're going to

00:28:19,919 --> 00:28:22,960
use this font and i want you to pre-load

00:28:21,200 --> 00:28:23,840
it i want you to load it now so what we

00:28:22,960 --> 00:28:27,360
can often do

00:28:23,840 --> 00:28:30,559
is the only what happened there when i

00:28:27,360 --> 00:28:33,760
reload it did you see that

00:28:30,559 --> 00:28:34,960
i should slow it down there's only

00:28:33,760 --> 00:28:44,320
one thing that happened there that you

00:28:34,960 --> 00:28:47,440
could visually see right oh

00:28:44,320 --> 00:28:49,919
not slow orbic so it did that but on a

00:28:47,440 --> 00:28:52,000
faster connection

00:28:49,919 --> 00:28:55,360
what can often happen is we actually

00:28:52,000 --> 00:28:55,360
skip that fallback time

00:28:55,600 --> 00:28:58,720
i do have a display swap on my name

00:28:57,600 --> 00:29:02,159
because it's

00:28:58,720 --> 00:29:03,440
brand it's branded so like branded

00:29:02,159 --> 00:29:04,799
things you might want to keep swap

00:29:03,440 --> 00:29:09,600
because you don't want to see the

00:29:04,799 --> 00:29:12,399
ugly font on your brand um but yeah

00:29:09,600 --> 00:29:14,960
so if i go to firefox right which

00:29:12,399 --> 00:29:14,960
doesn't do

00:29:15,120 --> 00:29:17,600
preload

00:29:19,200 --> 00:29:27,840
i need to disable the cache

00:29:36,000 --> 00:29:41,840
this one has a much bigger layout shift

00:29:45,440 --> 00:29:47,840
all right

00:29:52,080 --> 00:29:55,919
so more more resources mentioned i do

00:29:54,240 --> 00:29:57,760
have a short article it's a little bit

00:29:55,919 --> 00:29:59,360
data now but it still works if you want

00:29:57,760 --> 00:30:01,279
to learn how to

00:29:59,360 --> 00:30:02,960
self-host your google fonts there's a

00:30:01,279 --> 00:30:04,159
little tool you can use in there and the

00:30:02,960 --> 00:30:07,279
steps involved

00:30:04,159 --> 00:30:08,799
um also when you're looking at things

00:30:07,279 --> 00:30:10,159
like um

00:30:08,799 --> 00:30:12,159
i didn't mention this in this talk

00:30:10,159 --> 00:30:14,080
specifically but you can

00:30:12,159 --> 00:30:15,600
pull your data into can i use like if

00:30:14,080 --> 00:30:16,320
you use google analytics you can pull in

00:30:15,600 --> 00:30:18,559
that data

00:30:16,320 --> 00:30:20,320
and you can see like you know for my

00:30:18,559 --> 00:30:21,120
particular users is this feature going

00:30:20,320 --> 00:30:24,159
to be supported

00:30:21,120 --> 00:30:27,279
like for example preload um

00:30:24,159 --> 00:30:30,960
most of my users for one um client

00:30:27,279 --> 00:30:33,600
are on um safari so it's supported

00:30:30,960 --> 00:30:34,720
thank goodness um and then subfont that

00:30:33,600 --> 00:30:37,679
tool i mentioned

00:30:34,720 --> 00:30:38,480
which you can use for any type of font

00:30:37,679 --> 00:30:40,640
so thanks

00:30:38,480 --> 00:30:42,640
thanks for coming to my talk again the

00:30:40,640 --> 00:30:46,159
slides are at bitly font perf

00:30:42,640 --> 00:30:48,320
and um writing resources more

00:30:46,159 --> 00:30:49,440
co.codes you can get find me at the

00:30:48,320 --> 00:30:52,320
green greek

00:30:49,440 --> 00:30:52,320
we will um

00:30:52,640 --> 00:30:56,080
i guess we'll take a few questions i

00:30:54,559 --> 00:30:57,919
prefer offline questions though

00:30:56,080 --> 00:30:59,679
so feel free to come up to me later i'll

00:30:57,919 --> 00:31:01,760
be in this room for the rest of the

00:30:59,679 --> 00:31:03,519
web thing so in the breaks and then also

00:31:01,760 --> 00:31:04,880
afterwards if you want to you know reach

00:31:03,519 --> 00:31:06,320
out to me and go out there you can also

00:31:04,880 --> 00:31:09,600
dm me on twitter

00:31:06,320 --> 00:31:11,440
um or just us or at me

00:31:09,600 --> 00:31:19,840
it's up to you but thanks for thanks for

00:31:11,440 --> 00:31:19,840
coming to my talk thank you

00:31:24,559 --> 00:31:26,640

YouTube URL: https://www.youtube.com/watch?v=Qq0WuTSk6Do


