Title: RPM packaging collaboration
Publication date: 2011-12-22
Playlist: FOSDEM 2010
Description: 
	FOSDEM (Free and Open Source Development European Meeting) is a European event centered around Free and Open Source software development. It is aimed at developers and all interested in the Free and Open Source news in the world. Its goals are to enable developers to meet and to promote the awareness and use of free and open source software. More info at http://fosdem.org
Captions: 
	00:00:00,560 --> 00:00:06,569
to be great to get more across some

00:00:03,090 --> 00:00:08,820
distribution cooperation and perhaps

00:00:06,569 --> 00:00:11,280
that was this close dress so without

00:00:08,820 --> 00:00:15,179
further ado let me present you Pablo

00:00:11,280 --> 00:00:46,829
stuck it's my best nut work here I think

00:00:15,179 --> 00:00:49,010
it's not working so before I start I

00:00:46,829 --> 00:00:52,500
would like to ask you several questions

00:00:49,010 --> 00:00:57,809
who of you is using non RPM based

00:00:52,500 --> 00:01:03,860
distribution all right and we exist

00:00:57,809 --> 00:01:08,090
fedora and who use this man driven and

00:01:03,860 --> 00:01:14,010
what about the things you say all right

00:01:08,090 --> 00:01:20,640
so great we have nrel any realm Red Hat

00:01:14,010 --> 00:01:25,830
Enterprise Linux yeah and enterprise all

00:01:20,640 --> 00:01:31,200
right so we have people from all all

00:01:25,830 --> 00:01:34,650
pans and that's great so what will our

00:01:31,200 --> 00:01:39,299
told me about so at first i will tell

00:01:34,650 --> 00:01:41,520
you introduction then we take a look at

00:01:39,299 --> 00:01:44,729
some problems that we had but they are

00:01:41,520 --> 00:01:46,770
focused all that doesn't mean that they

00:01:44,729 --> 00:01:49,590
are already effective but we know how to

00:01:46,770 --> 00:01:52,619
solve them and we are just waiting to

00:01:49,590 --> 00:01:55,860
face them out because you cannot switch

00:01:52,619 --> 00:01:58,320
immediately to the new value we do

00:01:55,860 --> 00:02:01,799
things let me take on some muscle

00:01:58,320 --> 00:02:03,650
problems and then we will talk about the

00:02:01,799 --> 00:02:10,860
future

00:02:03,650 --> 00:02:14,310
so introduction who uses RPM so we have

00:02:10,860 --> 00:02:17,310
three large open distributions fedora

00:02:14,310 --> 00:02:20,640
manjeera and opensuse then we have

00:02:17,310 --> 00:02:24,390
Enterprise versions so random redhead

00:02:20,640 --> 00:02:27,600
and suse linux enterprise and then he'll

00:02:24,390 --> 00:02:30,210
we have a lot of forks for example said

00:02:27,600 --> 00:02:35,610
joe s is for gopher added enterprise

00:02:30,210 --> 00:02:37,460
there's a pc linux OS Linux and I don't

00:02:35,610 --> 00:02:41,310
know how to pronounce that but is a

00:02:37,460 --> 00:02:44,250
blood book magic box 6 Portuguese and

00:02:41,310 --> 00:02:46,740
these three are Forks of Manila and then

00:02:44,250 --> 00:02:50,160
we have a yellow dog linux and two

00:02:46,740 --> 00:02:53,130
volumes and are pleased so these all

00:02:50,160 --> 00:02:57,410
distributions utopian there are probably

00:02:53,130 --> 00:03:00,630
some more but these are the most visible

00:02:57,410 --> 00:03:05,190
so what's causing problems one of the

00:03:00,630 --> 00:03:08,010
problem is macro mess for example module

00:03:05,190 --> 00:03:12,420
is these these macros in their spec

00:03:08,010 --> 00:03:14,670
files and open to say to this side there

00:03:12,420 --> 00:03:17,520
you can see the dots and then some the

00:03:14,670 --> 00:03:20,070
list is far from complete it just to

00:03:17,520 --> 00:03:22,560
give an idea fedora uses only one

00:03:20,070 --> 00:03:25,320
Mottram in their spec files and it's

00:03:22,560 --> 00:03:28,920
this they have a policy not to say any

00:03:25,320 --> 00:03:36,000
macros that are not a part of RPM

00:03:28,920 --> 00:03:39,630
package itself so we take a look at

00:03:36,000 --> 00:03:43,800
solve problems one of the problem it's

00:03:39,630 --> 00:03:48,810
thing salt is a bill root problem we had

00:03:43,800 --> 00:03:53,700
to to be a different hand link in east

00:03:48,810 --> 00:03:56,760
of faith and in Queen face fedora didn't

00:03:53,700 --> 00:04:01,080
have the safe new route feature all I

00:03:56,760 --> 00:04:04,140
authenticity so in fedora I had to

00:04:01,080 --> 00:04:05,950
remove the build route in instil face

00:04:04,140 --> 00:04:08,770
and

00:04:05,950 --> 00:04:12,190
also remove it in clean face and also

00:04:08,770 --> 00:04:14,019
check whether it's it's a simulink or

00:04:12,190 --> 00:04:16,810
not because the tiger could insert the

00:04:14,019 --> 00:04:20,590
sim link and then rebuilding the package

00:04:16,810 --> 00:04:23,169
would remove something else the down to

00:04:20,590 --> 00:04:25,870
builders in opensuse we had a safe

00:04:23,169 --> 00:04:29,620
creation of the route so it wasn't

00:04:25,870 --> 00:04:32,320
necessary to clean the road route during

00:04:29,620 --> 00:04:34,240
the install face but it still was

00:04:32,320 --> 00:04:37,990
necessary to clean it during the green

00:04:34,240 --> 00:04:41,200
face security issues i already mentioned

00:04:37,990 --> 00:04:46,270
sickness and negative how was that

00:04:41,200 --> 00:04:49,660
solved now in RPM for that seven blue

00:04:46,270 --> 00:04:51,250
route is safely created and the path for

00:04:49,660 --> 00:04:54,550
build road which is in this pack is

00:04:51,250 --> 00:04:59,080
ignored that's why yogurt shape is not

00:04:54,550 --> 00:05:01,600
mandatory anymore inspector and the

00:04:59,080 --> 00:05:04,780
change is that you don't need to remove

00:05:01,600 --> 00:05:07,270
it on in style and even the clean face

00:05:04,780 --> 00:05:09,430
could be omitted completely because now

00:05:07,270 --> 00:05:12,669
it defaults to removal of the build

00:05:09,430 --> 00:05:15,160
roads still override the clean face but

00:05:12,669 --> 00:05:21,460
if if it is not mentioned in the spec

00:05:15,160 --> 00:05:25,200
file it will remove the guru let's take

00:05:21,460 --> 00:05:28,539
a look at Python packaging fedora

00:05:25,200 --> 00:05:31,330
defines these macros in every spec file

00:05:28,539 --> 00:05:33,639
which leaves if fight in the kitchen so

00:05:31,330 --> 00:05:36,700
basically they run the Python

00:05:33,639 --> 00:05:42,430
interpreter and ask using some Python

00:05:36,700 --> 00:05:46,330
call to do for side mission side arc in

00:05:42,430 --> 00:05:49,990
opensuse we had I could say more

00:05:46,330 --> 00:05:53,020
primitive way we asked Python for the

00:05:49,990 --> 00:05:56,169
version and then we use these hard-coded

00:05:53,020 --> 00:05:59,139
paths or the modules this will head one

00:05:56,169 --> 00:06:02,800
disadvantage because every package used

00:05:59,139 --> 00:06:05,910
this linear macro so it wasn't possible

00:06:02,800 --> 00:06:12,520
to build no art patent packages or on

00:06:05,910 --> 00:06:15,930
opensuse we sorted by adopting reservoir

00:06:12,520 --> 00:06:18,330
markers in upstream with the exact

00:06:15,930 --> 00:06:21,780
definitions of as we have seen on

00:06:18,330 --> 00:06:24,660
previous slide so opensuse is using

00:06:21,780 --> 00:06:26,940
these matters too and this brought the

00:06:24,660 --> 00:06:29,340
benefits are loving know our patent

00:06:26,940 --> 00:06:33,960
packages this has happened in the last

00:06:29,340 --> 00:06:37,139
opensuse want to release but as we still

00:06:33,960 --> 00:06:39,960
support or use the same spec fans for

00:06:37,139 --> 00:06:43,470
older distributions in good service it

00:06:39,960 --> 00:06:46,910
will take some time until every spec

00:06:43,470 --> 00:06:46,910
five is everything to the new way

00:06:47,990 --> 00:06:55,349
another problem is meg install RPM

00:06:52,410 --> 00:07:00,300
upstream defines my keys to macro like

00:06:55,349 --> 00:07:03,630
this it's for the old and now we can say

00:07:00,300 --> 00:07:07,470
broken packages that didn't have des

00:07:03,630 --> 00:07:12,120
deal support opensuse we find this macro

00:07:07,470 --> 00:07:16,289
in this fashion so we we didn't have to

00:07:12,120 --> 00:07:19,410
always specify this this this this

00:07:16,289 --> 00:07:22,080
parameter inspect file we use only this

00:07:19,410 --> 00:07:24,990
macro Mangia i used the makings

00:07:22,080 --> 00:07:28,169
downloads where is TD macro notes to

00:07:24,990 --> 00:07:34,580
config with this one and fedora didn't

00:07:28,169 --> 00:07:38,479
use any macro they always specify this

00:07:34,580 --> 00:07:42,599
this full string this was solved by

00:07:38,479 --> 00:07:45,330
creating a new macro make underscore

00:07:42,599 --> 00:07:50,009
install which is basically the same

00:07:45,330 --> 00:07:53,669
definitions in previous slide and if the

00:07:50,009 --> 00:07:55,949
new macro was introduced so we can save

00:07:53,669 --> 00:07:59,400
the make instrument for compatibility

00:07:55,949 --> 00:08:04,590
big old broken packages that are still

00:07:59,400 --> 00:08:11,460
part of slag at Susanna's enterprise and

00:08:04,590 --> 00:08:14,039
read whole enterprise linux so i was

00:08:11,460 --> 00:08:17,610
prompt that being a salt in the past and

00:08:14,039 --> 00:08:23,150
now for the more funny part they have

00:08:17,610 --> 00:08:26,069
also problems so let's look files

00:08:23,150 --> 00:08:29,249
hello I'm on geo after handles and we'll

00:08:26,069 --> 00:08:31,379
the desktop file in the same fashion so

00:08:29,249 --> 00:08:33,690
they have a package desktop file details

00:08:31,379 --> 00:08:36,659
which is required during the build and

00:08:33,690 --> 00:08:39,300
install face they call this could

00:08:36,659 --> 00:08:42,089
finally de binary or this book 14 spell

00:08:39,300 --> 00:08:45,510
binary the first one just checks the

00:08:42,089 --> 00:08:50,610
install spell installed file the second

00:08:45,510 --> 00:08:53,850
one installs it and then validate in

00:08:50,610 --> 00:08:57,089
opensuse we have different epic name so

00:08:53,850 --> 00:09:00,569
we will require update list of files and

00:08:57,089 --> 00:09:04,019
in east ave views this souza on the

00:09:00,569 --> 00:09:07,529
desktop file macro which is some kind of

00:09:04,019 --> 00:09:09,930
Swiss Army knife which is able to create

00:09:07,529 --> 00:09:13,579
this to file install the stuff on

00:09:09,930 --> 00:09:16,490
validated silence lots of more

00:09:13,579 --> 00:09:20,880
personally I don't like it because it's

00:09:16,490 --> 00:09:25,290
good not very easy to just grasp it and

00:09:20,880 --> 00:09:30,810
documentation is not very good and how

00:09:25,290 --> 00:09:33,389
can we solve the situation so the best

00:09:30,810 --> 00:09:37,199
way would be to try to unify this

00:09:33,389 --> 00:09:40,079
procedure and if somehow pro is still

00:09:37,199 --> 00:09:44,220
needed we could try to bridge it to RPM

00:09:40,079 --> 00:09:47,519
upstream probably we would also need to

00:09:44,220 --> 00:09:51,779
rename the open source a package so we

00:09:47,519 --> 00:09:55,019
it it would need to do require the same

00:09:51,779 --> 00:09:59,279
package name or we could also also on

00:09:55,019 --> 00:10:01,350
the ad provides in our package of it

00:09:59,279 --> 00:10:04,949
would get installed when do require

00:10:01,350 --> 00:10:10,199
desktop file this stuff file includes

00:10:04,949 --> 00:10:13,560
package now the problem is Ruby

00:10:10,199 --> 00:10:17,459
packaging it's similarly issue then we

00:10:13,560 --> 00:10:20,639
have a fight on fedora defines in a

00:10:17,459 --> 00:10:24,839
respect file these three markers and

00:10:20,639 --> 00:10:27,939
maybe some extra they run the Ruby

00:10:24,839 --> 00:10:31,599
interpreter and also ask for some

00:10:27,939 --> 00:10:34,479
internal internal stuff I mean in

00:10:31,599 --> 00:10:37,539
opensuse we use the similar approaches

00:10:34,479 --> 00:10:39,489
in videos in Python we statically

00:10:37,539 --> 00:10:42,309
defined ruby version and Ruby

00:10:39,489 --> 00:10:47,799
architecture and then we use this this

00:10:42,309 --> 00:10:50,519
path when these macros are expanded and

00:10:47,799 --> 00:10:53,949
this macros are only they fortunately

00:10:50,519 --> 00:10:58,779
expect the same value but there is one

00:10:53,949 --> 00:11:01,899
on small difference in opensuse we use

00:10:58,779 --> 00:11:07,869
this vendors underscore Robbie and in

00:11:01,899 --> 00:11:12,239
fedora it gets expanded to site I think

00:11:07,869 --> 00:11:16,959
its side underscore Robbie yeah yep

00:11:12,239 --> 00:11:20,139
sarabhai vs has a rabbit in opensuse we

00:11:16,959 --> 00:11:23,859
have one extra macro which is called gem

00:11:20,139 --> 00:11:28,029
install this macro is used when the

00:11:23,859 --> 00:11:30,729
package is already jellified so we don't

00:11:28,029 --> 00:11:35,199
do nothing but only in install phase we

00:11:30,729 --> 00:11:38,789
call gem install macro on the source gen

00:11:35,199 --> 00:11:42,429
package it is very useful and it's

00:11:38,789 --> 00:11:45,629
ignites spec files for Ruby package is

00:11:42,429 --> 00:11:48,399
very compact and they only contain

00:11:45,629 --> 00:11:58,419
effectively effectively only one only

00:11:48,399 --> 00:12:00,879
one one line so solution we could try to

00:11:58,419 --> 00:12:04,329
create common macros in upstream and

00:12:00,879 --> 00:12:07,899
using consistently in distributions the

00:12:04,329 --> 00:12:10,599
solutions are not only the same but

00:12:07,899 --> 00:12:13,419
they're great they require a lot of

00:12:10,599 --> 00:12:16,649
discussions whether the solution is good

00:12:13,419 --> 00:12:20,679
enough for for fedora and reva and

00:12:16,649 --> 00:12:24,099
opensuse that there this distribution

00:12:20,679 --> 00:12:27,209
have different mindset different goals

00:12:24,099 --> 00:12:30,849
and different requirements so is not not

00:12:27,209 --> 00:12:34,259
sometimes it's not easy to to find one

00:12:30,849 --> 00:12:34,259
common solution

00:12:35,250 --> 00:12:45,360
another thing is parallel bill Federer's

00:12:40,830 --> 00:12:49,630
SMP underscore n flight macro which is

00:12:45,360 --> 00:12:53,800
usually minus J num number of processors

00:12:49,630 --> 00:12:57,310
so when we build a package it it

00:12:53,800 --> 00:13:04,899
utilizes all course we have on the

00:12:57,310 --> 00:13:09,250
computer on opensuse we leave this this

00:13:04,899 --> 00:13:13,480
line so if if the jobs the microbe is

00:13:09,250 --> 00:13:17,170
defined via high n minus J jobs to the

00:13:13,480 --> 00:13:19,770
make monetary values is only magma

00:13:17,170 --> 00:13:23,680
pravachol already includes this

00:13:19,770 --> 00:13:28,270
incentive like needed for the parallel

00:13:23,680 --> 00:13:31,839
built so possible solutions there are

00:13:28,270 --> 00:13:34,930
actually two we can refine notation for

00:13:31,839 --> 00:13:38,320
example this SNP and flex pedrali also

00:13:34,930 --> 00:13:41,440
works in open air already but this is

00:13:38,320 --> 00:13:44,560
unusable for example in parallel to make

00:13:41,440 --> 00:13:48,160
because as far as I know ultimate

00:13:44,560 --> 00:13:53,650
doesn't use minus J something but minus

00:13:48,160 --> 00:13:56,800
L something so in opensuse weekend we

00:13:53,650 --> 00:14:00,400
can use out to make if jobs undefined

00:13:56,800 --> 00:14:02,770
then use miles l jobs but as SMP

00:14:00,400 --> 00:14:05,830
influence already includes managing it

00:14:02,770 --> 00:14:09,520
would require some decorating to remove

00:14:05,830 --> 00:14:13,990
this lambda J and replace it with minus

00:14:09,520 --> 00:14:18,670
L and the other way we could add the

00:14:13,990 --> 00:14:21,579
definition to rpm upstream so four

00:14:18,670 --> 00:14:25,060
percent make will do borel built and

00:14:21,579 --> 00:14:27,010
person make single will do a single bill

00:14:25,060 --> 00:14:31,260
single blood is stealing it for some

00:14:27,010 --> 00:14:33,940
packages that are not not to properly

00:14:31,260 --> 00:14:37,930
prepared in upstream for the parallel

00:14:33,940 --> 00:14:40,870
bills or or we can go the other way so

00:14:37,930 --> 00:14:44,110
we have we would have a person make for

00:14:40,870 --> 00:14:45,180
single build and person make underscored

00:14:44,110 --> 00:14:49,900
papa

00:14:45,180 --> 00:14:56,200
but as the power build is most common i

00:14:49,900 --> 00:15:02,320
would suggest this solution another one

00:14:56,200 --> 00:15:04,930
big problem is a scripts in fedora LSB

00:15:02,320 --> 00:15:07,270
headers are not required but if we are

00:15:04,930 --> 00:15:12,400
present in this in the net file they are

00:15:07,270 --> 00:15:17,170
honored in Mantua they just encourage

00:15:12,400 --> 00:15:22,570
using its life sorry all right so then

00:15:17,170 --> 00:15:27,250
one device to fix the Ricky and opensuse

00:15:22,570 --> 00:15:33,400
we require LSB headers otherwise peckish

00:15:27,250 --> 00:15:36,670
one built then means special functions

00:15:33,400 --> 00:15:39,040
in the same scripts and these functions

00:15:36,670 --> 00:15:41,830
are defined in these free files as you

00:15:39,040 --> 00:15:44,110
can see in fedora and mangia they use

00:15:41,830 --> 00:15:49,210
the same location unfortunately in

00:15:44,110 --> 00:15:52,300
opensuse it's a TC RC studies so it

00:15:49,210 --> 00:15:57,220
would be necessary to handle directly in

00:15:52,300 --> 00:16:00,430
its grapes or or just creating these

00:15:57,220 --> 00:16:04,210
evenings so they would point to put the

00:16:00,430 --> 00:16:07,840
same file what is even worse that these

00:16:04,210 --> 00:16:10,900
files define another functions so even

00:16:07,840 --> 00:16:17,080
the contents of the file would be needed

00:16:10,900 --> 00:16:21,460
to somehow unify and the last point it's

00:16:17,080 --> 00:16:24,760
a little bit funny name location / atc

00:16:21,460 --> 00:16:29,170
our cds which in HD or in opensuse is /

00:16:24,760 --> 00:16:32,680
atc without this part / in ed is defined

00:16:29,170 --> 00:16:36,970
as a macro in RPM but unfortunately

00:16:32,680 --> 00:16:40,630
there is a typo so we r pn four dots six

00:16:36,970 --> 00:16:43,990
and older there is in it our DD r so

00:16:40,630 --> 00:16:49,390
there is extra air and in the new rpm

00:16:43,990 --> 00:16:51,400
it's into the correct way so I don't

00:16:49,390 --> 00:16:52,190
know where exactly when exactly was

00:16:51,400 --> 00:17:00,580
using sure

00:16:52,190 --> 00:17:02,750
but I am I found this as a problem

00:17:00,580 --> 00:17:07,189
adopting detective is between the

00:17:02,750 --> 00:17:13,430
solutions so test let's take a look at

00:17:07,189 --> 00:17:17,030
for a spec file that installs service we

00:17:13,430 --> 00:17:20,300
require these two packages check config

00:17:17,030 --> 00:17:27,310
and in strips they are required for post

00:17:20,300 --> 00:17:31,340
post on the post on pre-owned bars and

00:17:27,310 --> 00:17:36,320
in pubs we call Jake config which is

00:17:31,340 --> 00:17:40,850
service in fremont uninstall face we if

00:17:36,320 --> 00:17:42,890
it's a deep least one actually checks

00:17:40,850 --> 00:17:45,620
whether we are updating the package or

00:17:42,890 --> 00:17:47,810
uninstalling it completely and if it's

00:17:45,620 --> 00:17:51,280
uninstallation we stop the service and

00:17:47,810 --> 00:17:55,760
remove the service from the system and

00:17:51,280 --> 00:17:59,710
this is run on the update so we check

00:17:55,760 --> 00:18:03,980
whether it's an update and then we

00:17:59,710 --> 00:18:06,620
conditionally restore the service as we

00:18:03,980 --> 00:18:11,140
see the speck of val is is rather large

00:18:06,620 --> 00:18:15,800
because federer doesn't use use macros

00:18:11,140 --> 00:18:18,170
opensuse we use macros show me only call

00:18:15,800 --> 00:18:23,600
if you have an insert with which

00:18:18,170 --> 00:18:26,630
basically install some files and you

00:18:23,600 --> 00:18:30,410
know registered mysteries it is a nice

00:18:26,630 --> 00:18:33,470
time we reap restore the service using

00:18:30,410 --> 00:18:38,120
pepper and honest all week we stopped

00:18:33,470 --> 00:18:40,610
removed the service and importantly we

00:18:38,120 --> 00:18:43,910
clean up some internal structures

00:18:40,610 --> 00:18:47,000
regarding to the services we also need

00:18:43,910 --> 00:18:52,400
to require some packages but they have

00:18:47,000 --> 00:18:57,490
you done behind his macrosse1 dream I

00:18:52,400 --> 00:18:57,490
uses sorry your microphone

00:19:02,570 --> 00:19:11,080
well I think the battery went out do you

00:19:06,620 --> 00:19:11,080
hear me be done microphone yeah

00:19:19,049 --> 00:19:27,570
yeah so that was opensuse madhurima it

00:19:24,480 --> 00:19:30,989
has helpers in this package are payin

00:19:27,570 --> 00:19:34,230
helper and uses just in these two mar

00:19:30,989 --> 00:19:43,139
close to install and uninstall the

00:19:34,230 --> 00:19:45,480
service so what do we do it's as you

00:19:43,139 --> 00:19:52,190
have seen that this task is pretty

00:19:45,480 --> 00:19:55,669
complicated we need to somehow unify the

00:19:52,190 --> 00:19:59,220
respective in which are required so now

00:19:55,669 --> 00:20:02,879
so the requires in the suze a Madrigal

00:19:59,220 --> 00:20:05,249
speck of rum row 0 pre and you also have

00:20:02,879 --> 00:20:09,509
clothes ripped so RPM kun removed and

00:20:05,249 --> 00:20:11,720
programming clothes so just use of

00:20:09,509 --> 00:20:11,720
robots

00:20:28,610 --> 00:20:36,270
yeah we can discuss after the dog or in

00:20:32,429 --> 00:20:44,220
the hallway both what's the great idea

00:20:36,270 --> 00:20:46,890
see that about unifying this mess so

00:20:44,220 --> 00:20:50,309
future development I will talk something

00:20:46,890 --> 00:20:55,380
about future development directly in rpm

00:20:50,309 --> 00:20:57,900
and we discussed this with fun imagina

00:20:55,380 --> 00:21:01,530
Martin I don't know maybe guys from

00:20:57,900 --> 00:21:06,480
fedora can pronounce your name correctly

00:21:01,530 --> 00:21:10,350
is the RPN maintainer from redhead so

00:21:06,480 --> 00:21:14,880
it's panel then we discussed the Florian

00:21:10,350 --> 00:21:19,169
feste which also read and maintain RPM

00:21:14,880 --> 00:21:23,130
and we shall shrewder with our payment

00:21:19,169 --> 00:21:26,669
dinner for our version we make a number

00:21:23,130 --> 00:21:28,980
in September 2009 and we discussed what

00:21:26,669 --> 00:21:32,280
are the current problems of RPM

00:21:28,980 --> 00:21:37,730
implementation and how to overcome them

00:21:32,280 --> 00:21:41,309
and have to help the packages to create

00:21:37,730 --> 00:21:45,720
clean suspect files we have any heads we

00:21:41,309 --> 00:21:47,779
have see before and how to make cross

00:21:45,720 --> 00:21:53,359
platform across this

00:21:47,779 --> 00:21:57,219
even more easier so one of the features

00:21:53,359 --> 00:22:00,229
the dark line our fellow 35 triggers

00:21:57,219 --> 00:22:02,929
this would actually help to get rid of a

00:22:00,229 --> 00:22:05,749
large number of sweet whites for example

00:22:02,929 --> 00:22:09,200
LD config GDP of a bike on cash in

00:22:05,749 --> 00:22:12,979
ceremony for file are already

00:22:09,200 --> 00:22:15,559
implemented in my driven but yeah the

00:22:12,979 --> 00:22:17,659
name and multi line is working on

00:22:15,559 --> 00:22:20,649
implementation which will be different

00:22:17,659 --> 00:22:25,029
from module one because he is also

00:22:20,649 --> 00:22:30,889
reworking another triggers so he went to

00:22:25,029 --> 00:22:34,039
to behave consistently logical and he

00:22:30,889 --> 00:22:38,019
also wants to avoid any side effects in

00:22:34,039 --> 00:22:43,279
the transaction and I can show you how

00:22:38,019 --> 00:22:46,729
Patrick is working on Treva so they have

00:22:43,279 --> 00:22:49,309
created a special path called / we're

00:22:46,729 --> 00:22:51,589
late RP advanced readers and every

00:22:49,309 --> 00:22:57,549
package is allowed to installs and files

00:22:51,589 --> 00:23:02,029
there for example i think it's acacia

00:22:57,549 --> 00:23:04,690
GCC that installs LD config filter this

00:23:02,029 --> 00:23:11,210
filter contains a regular expression

00:23:04,690 --> 00:23:14,929
which specifies the files on which we

00:23:11,210 --> 00:23:18,469
sure this trigger should be run and the

00:23:14,929 --> 00:23:21,109
same name but except the extension

00:23:18,469 --> 00:23:24,229
filter is the exception scrape is a

00:23:21,109 --> 00:23:27,070
script that is run so when this trigger

00:23:24,229 --> 00:23:30,950
is installed and another package

00:23:27,070 --> 00:23:34,159
installs file which is matched to this

00:23:30,950 --> 00:23:36,529
regular expression this script is run so

00:23:34,159 --> 00:23:39,950
we then don't have to specify in every

00:23:36,529 --> 00:23:46,429
spec file that installs shared libraries

00:23:39,950 --> 00:23:49,909
both percentage post run LD config

00:23:46,429 --> 00:23:55,399
the similar is for GTA icon cash hi

00:23:49,909 --> 00:23:57,799
color that's that's installed in the

00:23:55,399 --> 00:24:00,919
package that provides new binary GTA

00:23:57,799 --> 00:24:03,679
update icon cash and it specifies the

00:24:00,919 --> 00:24:05,990
ever every time when the file is

00:24:03,679 --> 00:24:10,399
installed in use AllShare icon high to

00:24:05,990 --> 00:24:13,399
low round this update icon cash on the

00:24:10,399 --> 00:24:17,059
previous slide I mentioned install

00:24:13,399 --> 00:24:21,559
remove in 45 so that's similar to

00:24:17,059 --> 00:24:26,330
something like this so every time file

00:24:21,559 --> 00:24:31,570
is installed in user share info I think

00:24:26,330 --> 00:24:37,720
then run some tools that are needed for

00:24:31,570 --> 00:24:37,720
updating the database info database

00:24:39,129 --> 00:24:45,980
another change is update request we

00:24:43,490 --> 00:24:49,129
decided to introduce a pair of lips with

00:24:45,980 --> 00:24:53,019
place these are called bring up and post

00:24:49,129 --> 00:24:56,179
up and these are called on Peggy today

00:24:53,019 --> 00:25:00,350
the existing ones like pre and post on

00:24:56,179 --> 00:25:02,450
pre and post we won't be run and this

00:25:00,350 --> 00:25:04,129
whole asked to fix broken high school

00:25:02,450 --> 00:25:06,980
scriptlets because when we have a

00:25:04,129 --> 00:25:09,950
package in the system that has broken

00:25:06,980 --> 00:25:12,379
uninstalled we play there is absolutely

00:25:09,950 --> 00:25:18,289
no way how to fix it because it will be

00:25:12,379 --> 00:25:21,230
run anyway introducing these newspapers

00:25:18,289 --> 00:25:23,330
will solve this situation Oliver as we

00:25:21,230 --> 00:25:26,330
have seen on previous slide it would

00:25:23,330 --> 00:25:28,639
remove the need for web stuff like this

00:25:26,330 --> 00:25:31,970
because we you needed we know whether

00:25:28,639 --> 00:25:35,140
the package is being installed and I'm

00:25:31,970 --> 00:25:43,450
stopped completely or uninstalled

00:25:35,140 --> 00:25:46,030
version update another improvement is

00:25:43,450 --> 00:25:48,370
stripped what are humans when we are in

00:25:46,030 --> 00:25:52,570
scriptlet there is absolutely no very

00:25:48,370 --> 00:25:55,030
how to detect for example the version of

00:25:52,570 --> 00:25:58,150
the package which is being updated we

00:25:55,030 --> 00:26:00,490
could call RPM in this triplet but this

00:25:58,150 --> 00:26:02,410
would call did was cause deadlock

00:26:00,490 --> 00:26:04,090
because we are already in a running

00:26:02,410 --> 00:26:08,890
transaction and the database is locked

00:26:04,090 --> 00:26:11,830
so when other our fear would fail and

00:26:08,890 --> 00:26:16,840
that there are no there are several ways

00:26:11,830 --> 00:26:19,900
have to do it we put the fetch or push

00:26:16,840 --> 00:26:24,400
some info through standard input into

00:26:19,900 --> 00:26:26,440
positive life or a sweet life but that

00:26:24,400 --> 00:26:30,010
wouldn't be very good because we would

00:26:26,440 --> 00:26:34,510
have to parse the input so we decided to

00:26:30,010 --> 00:26:37,540
lose environment variables to it so we

00:26:34,510 --> 00:26:42,400
would have for example variable

00:26:37,540 --> 00:26:46,690
which includes name epic version really

00:26:42,400 --> 00:26:49,300
release and architecture we could have

00:26:46,690 --> 00:26:52,540
for example only era without the name

00:26:49,300 --> 00:26:57,040
and so on some degree we can read these

00:26:52,540 --> 00:26:58,960
variables and what's this for we can

00:26:57,040 --> 00:27:03,280
detect more precisely what is happening

00:26:58,960 --> 00:27:06,100
and we can handle special situation for

00:27:03,280 --> 00:27:10,630
example when we are installing a pitch

00:27:06,100 --> 00:27:13,570
to that X package we can check whether

00:27:10,630 --> 00:27:17,080
the old package was bonded X or to the

00:27:13,570 --> 00:27:19,510
pics and when it was cooler pigs middle

00:27:17,080 --> 00:27:20,039
nothing and when the older version was

00:27:19,510 --> 00:27:23,100
one

00:27:20,039 --> 00:27:27,570
we will call some scripts that will

00:27:23,100 --> 00:27:30,169
convert the Latics configuration to the

00:27:27,570 --> 00:27:30,169
new one

00:27:34,220 --> 00:27:41,480
another thing is still the inversion you

00:27:37,820 --> 00:27:43,370
might recognize this from debian we

00:27:41,480 --> 00:27:44,840
decided to use special character

00:27:43,370 --> 00:27:48,110
children to represent the negative

00:27:44,840 --> 00:27:50,240
version token and this would get rid of

00:27:48,110 --> 00:27:53,120
complicated rules which abuse the

00:27:50,240 --> 00:27:57,380
version and the release text and there

00:27:53,120 --> 00:28:01,070
is one example for example we have

00:27:57,380 --> 00:28:05,620
Python 2006 alpha one Pikachu and RC

00:28:01,070 --> 00:28:09,380
three packages and now we had to use the

00:28:05,620 --> 00:28:12,700
scheme so the Python 2 degrees of Allah

00:28:09,380 --> 00:28:17,330
at this version which is just made up

00:28:12,700 --> 00:28:22,100
never has been released so we in

00:28:17,330 --> 00:28:24,580
opensuse use 84 alpha versions 94 later

00:28:22,100 --> 00:28:29,539
versions and for our series 99

00:28:24,580 --> 00:28:34,429
technocracy have fedora busted a suspect

00:28:29,539 --> 00:28:38,179
to UNICEF oh no no no that we just we

00:28:34,429 --> 00:28:39,860
just used to not set starting from 1 but

00:28:38,179 --> 00:28:45,110
we start with a release of serum and

00:28:39,860 --> 00:28:47,179
then we put in zero point alpha bar or

00:28:45,110 --> 00:28:49,669
whatever and if we get an altitude which

00:28:47,179 --> 00:28:51,770
is or what form so we start with zero

00:28:49,669 --> 00:28:55,039
point one point alpha 1 and would come

00:28:51,770 --> 00:28:56,840
0.2 palapa to 0.3 point yeah I remember

00:28:55,039 --> 00:29:00,980
what's the version of this final version

00:28:56,840 --> 00:29:03,559
dinner then the religion comes from so

00:29:00,980 --> 00:29:06,500
for pre-releases we do a zero top

00:29:03,559 --> 00:29:09,409
something so what's the version for

00:29:06,500 --> 00:29:12,470
Python 2006's command for 2006 after 10

00:29:09,409 --> 00:29:17,030
really this version would be 26 to the

00:29:12,470 --> 00:29:18,770
release hood p 0.14 in alpha 10 and for

00:29:17,030 --> 00:29:21,750
the second alpha or foreign other

00:29:18,770 --> 00:29:25,769
release of alpha body will be 0.2

00:29:21,750 --> 00:29:28,600
that's much better I know but this is

00:29:25,769 --> 00:29:31,570
because of the technical constraint we

00:29:28,600 --> 00:29:34,139
update or increase release release

00:29:31,570 --> 00:29:38,230
number on every check in it's automated

00:29:34,139 --> 00:29:40,179
don't do that unfortunately i'm not the

00:29:38,230 --> 00:29:43,779
one comes user to decide with me go

00:29:40,179 --> 00:29:48,490
ahead I mean it is hoped able to use the

00:29:43,779 --> 00:29:51,850
horrible hair well I can give you some

00:29:48,490 --> 00:29:53,679
context for people whom to talk but I

00:29:51,850 --> 00:29:57,309
mean you are assuming now with the civil

00:29:53,679 --> 00:29:59,049
thing that actually there will be an

00:29:57,309 --> 00:30:01,779
alpha and beta what if they decide to

00:29:59,049 --> 00:30:03,669
get the dope names open yourself a

00:30:01,779 --> 00:30:07,960
reason Nelson in the second alpha

00:30:03,669 --> 00:30:10,269
release Betty there is no longer going

00:30:07,960 --> 00:30:15,000
to work yeah and so anything with yours

00:30:10,269 --> 00:30:15,000
too bad one Nelson till that too

00:30:32,740 --> 00:30:38,850
yes

00:30:34,820 --> 00:30:42,960
yeah so obviously there is no way how to

00:30:38,850 --> 00:30:46,350
do it do it universally for all kind of

00:30:42,960 --> 00:30:48,480
extreme the only question is which field

00:30:46,350 --> 00:30:52,500
are we abusing whether it's the realest

00:30:48,480 --> 00:30:55,620
realest field or emerging field or

00:30:52,500 --> 00:30:59,510
something else I I can understand your

00:30:55,620 --> 00:31:13,850
point and it seems to rally but it also

00:30:59,510 --> 00:31:13,850
might be considered in some other sorry

00:31:47,640 --> 00:32:04,860
well we don't use respects the way the

00:31:51,570 --> 00:32:07,220
federal does sir could you please come

00:32:04,860 --> 00:32:07,220
to the front

00:32:23,919 --> 00:32:26,919
yes

00:32:37,140 --> 00:32:42,820
we can discuss this after the tall the

00:32:40,570 --> 00:32:45,220
point is that the other is probably

00:32:42,820 --> 00:32:47,560
getting into RPM and it's up to

00:32:45,220 --> 00:32:54,310
distribution whether they will use it or

00:32:47,560 --> 00:32:56,980
not so but this was pleased would call

00:32:54,310 --> 00:33:00,580
cause rather differences between this

00:32:56,980 --> 00:33:05,100
room there really a room to improve and

00:33:00,580 --> 00:33:09,250
reemployment and for discussion well

00:33:05,100 --> 00:33:11,830
another problem we are after generated

00:33:09,250 --> 00:33:14,200
dependencies are pnp generate

00:33:11,830 --> 00:33:17,440
dependencies automatically but the

00:33:14,200 --> 00:33:19,990
results are follow is okay and this is

00:33:17,440 --> 00:33:23,070
handled by work around this by

00:33:19,990 --> 00:33:28,480
redefining the nine-person spec file so

00:33:23,070 --> 00:33:37,330
for example this is this is a line from

00:33:28,480 --> 00:33:40,150
virtual box package I think we're out of

00:33:37,330 --> 00:33:43,840
the generated dependencies included this

00:33:40,150 --> 00:33:48,460
simple pci i think that's a pc idea of

00:33:43,840 --> 00:33:54,060
some network card which is emulated by

00:33:48,460 --> 00:33:58,240
virtual box so it gets tendencies but

00:33:54,060 --> 00:34:02,370
these card is unfortunately from some

00:33:58,240 --> 00:34:07,110
AMD so that means that when

00:34:02,370 --> 00:34:10,320
ND physical card we will get virtual box

00:34:07,110 --> 00:34:14,399
on this installation even if you don't

00:34:10,320 --> 00:34:16,649
have a good even the even if that

00:34:14,399 --> 00:34:21,450
installation is not visualized on

00:34:16,649 --> 00:34:25,710
physical so you have to be this ugly hey

00:34:21,450 --> 00:34:29,220
you replace the fines opponents macro

00:34:25,710 --> 00:34:32,280
which is basically only on this part but

00:34:29,220 --> 00:34:36,200
then you will break out the value you

00:34:32,280 --> 00:34:40,919
don't have to do not want to appear in

00:34:36,200 --> 00:34:45,570
dependencies yeah so I think that

00:34:40,919 --> 00:34:48,740
mandria already has some macros which

00:34:45,570 --> 00:34:51,810
are able to manipulate these

00:34:48,740 --> 00:34:56,700
dependencies like provides requires but

00:34:51,810 --> 00:34:58,740
these are not in rpm upstream so we

00:34:56,700 --> 00:35:03,300
should also discuss how to handle this

00:34:58,740 --> 00:35:05,910
properly and then how to persuade the

00:35:03,300 --> 00:35:12,330
RPM upstream to include its overall

00:35:05,910 --> 00:35:17,160
distribution can benefit from it and now

00:35:12,330 --> 00:35:22,080
links this is our p.m. org wiki where

00:35:17,160 --> 00:35:25,710
these problems I mentions are listed you

00:35:22,080 --> 00:35:27,930
can look at them but there's I think

00:35:25,710 --> 00:35:31,650
this already has been covered in slides

00:35:27,930 --> 00:35:35,400
you can edit the wiki and your ideas we

00:35:31,650 --> 00:35:39,120
can we also open it at the hash RP and

00:35:35,400 --> 00:35:42,660
the torque channel on freenode we can

00:35:39,120 --> 00:35:45,260
also discuss their RPM Devvarman this is

00:35:42,660 --> 00:35:48,620
also a good way up to

00:35:45,260 --> 00:35:52,010
discussions then there is my blog where

00:35:48,620 --> 00:35:56,270
every RPM relative article is tagged

00:35:52,010 --> 00:35:58,550
with RPM there are also some notes from

00:35:56,270 --> 00:36:04,100
the opensuse conference I mentioned

00:35:58,550 --> 00:36:06,200
before but not all of all results were

00:36:04,100 --> 00:36:09,650
connected to the dressen distribution

00:36:06,200 --> 00:36:12,440
packaging so they were no major and last

00:36:09,650 --> 00:36:16,820
three weeks are teaching guideline for

00:36:12,440 --> 00:36:18,470
figure out when to say non Viva actually

00:36:16,820 --> 00:36:21,020
the first two links are very similar

00:36:18,470 --> 00:36:24,500
because our packaging guidelines are

00:36:21,020 --> 00:36:29,360
being how to put it catastrophic estate

00:36:24,500 --> 00:36:33,890
so we discussed with tomcat away from

00:36:29,360 --> 00:36:36,200
redhead which is the main offer of the

00:36:33,890 --> 00:36:39,320
packaging guidelines if we could adopt

00:36:36,200 --> 00:36:43,550
them and now we are in the process that

00:36:39,320 --> 00:36:46,010
we are slowly rewriting the federal

00:36:43,550 --> 00:36:49,760
packaging guidelines to mesh our way and

00:36:46,010 --> 00:36:54,230
in the process we also know which parts

00:36:49,760 --> 00:36:59,530
are different so we can really see the

00:36:54,230 --> 00:37:03,020
differences I think of starting over a

00:36:59,530 --> 00:37:06,890
year and a half ago I am so proud

00:37:03,020 --> 00:37:09,880
manjula but no one from the people i

00:37:06,890 --> 00:37:18,610
talk to we are not interested in this

00:37:09,880 --> 00:37:18,610
this this process sorry i don't know

00:37:32,730 --> 00:37:40,150
if we would love to have manjula also on

00:37:37,210 --> 00:37:43,000
the ship so if you have enthusiasm in

00:37:40,150 --> 00:37:48,599
this time I'm glad and we should really

00:37:43,000 --> 00:37:54,460
try to engage most its high number of

00:37:48,599 --> 00:37:57,970
RPM distribution as possible so we have

00:37:54,460 --> 00:38:03,130
five minutes left so if there are any

00:37:57,970 --> 00:38:05,140
questions like you to come in the front

00:38:03,130 --> 00:38:09,099
because I really don't hear your friend

00:38:05,140 --> 00:38:11,289
outside has there been any talk about

00:38:09,099 --> 00:38:13,660
putting a version instead of a spec file

00:38:11,289 --> 00:38:18,309
to say this spec file is designed for

00:38:13,660 --> 00:38:19,869
RPM 4.6 and above or 4.7 and above if

00:38:18,309 --> 00:38:21,910
you get an old spec file or you're

00:38:19,869 --> 00:38:25,089
trying to build a new source RPM on an

00:38:21,910 --> 00:38:27,250
older an older district with an older

00:38:25,089 --> 00:38:29,289
version of RPM it'll warn you and say

00:38:27,250 --> 00:38:32,200
this macro is not available this year

00:38:29,289 --> 00:38:34,720
central feature and I see the bomb

00:38:32,200 --> 00:38:36,849
crater this hasn't been discussed and I

00:38:34,720 --> 00:38:38,770
think it's very good one to discuss i

00:38:36,849 --> 00:38:41,170
will put

00:38:38,770 --> 00:38:43,240
it's a problem that it one of the ice

00:38:41,170 --> 00:38:45,760
keys that I'll speak to all the times

00:38:43,240 --> 00:38:46,840
they're finding these problems for

00:38:45,760 --> 00:38:49,120
themselves because they're trying to

00:38:46,840 --> 00:38:50,560
work with all sorts of one-off custom

00:38:49,120 --> 00:38:52,930
solutions of difference we have our

00:38:50,560 --> 00:38:54,790
example in Idaho if you are familiar

00:38:52,930 --> 00:38:56,770
opensuse Blood Service its

00:38:54,790 --> 00:38:59,920
infrastructure which allows to build

00:38:56,770 --> 00:39:01,750
packages Adama for opensuse but also for

00:38:59,920 --> 00:39:03,970
fedora and Rio and other resolution as

00:39:01,750 --> 00:39:07,440
well and we have a special mark Ross

00:39:03,970 --> 00:39:09,670
called susa under sport version which

00:39:07,440 --> 00:39:12,540
represents the version of sue said the

00:39:09,670 --> 00:39:15,880
same for fame and Reba so we can do

00:39:12,540 --> 00:39:18,010
version branching based on the version

00:39:15,880 --> 00:39:22,450
and it's something similar like you

00:39:18,010 --> 00:39:24,400
mentioned but it's not it's not the RPM

00:39:22,450 --> 00:39:26,200
version that is taken into account but

00:39:24,400 --> 00:39:28,570
but that sounds like a bit of a hack

00:39:26,200 --> 00:39:29,890
when when you get if you say you really

00:39:28,570 --> 00:39:32,350
just want to say use this particular

00:39:29,890 --> 00:39:35,890
version of art here yeah in his head but

00:39:32,350 --> 00:39:38,020
it's very how you mention is we are

00:39:35,890 --> 00:39:41,620
building packages yes we have these

00:39:38,020 --> 00:39:43,690
vertices and they have to use this code

00:39:41,620 --> 00:39:46,210
snippet for fedora this form and Rio and

00:39:43,690 --> 00:39:47,770
these four pencils about this thing you

00:39:46,210 --> 00:39:50,680
mentioned would definitely an excellent

00:39:47,770 --> 00:39:54,120
disguise for peace and upstairs so one

00:39:50,680 --> 00:39:54,120
of the surgical service a block

00:39:58,320 --> 00:40:04,359
yes could you please come to the back

00:40:02,070 --> 00:40:08,410
could you please come come to the front

00:40:04,359 --> 00:40:11,460
sorry because I don't understand yeah

00:40:08,410 --> 00:40:11,460
please do so

00:41:03,090 --> 00:41:09,130
involved in ogden open so I just said I

00:41:06,760 --> 00:41:15,900
just hang around the eyes a cello and I

00:41:09,130 --> 00:41:19,050
know the people that are without ball I

00:41:15,900 --> 00:41:22,720
don't know what's the current

00:41:19,050 --> 00:41:26,410
implementation studies teachers and yeah

00:41:22,720 --> 00:41:31,720
you get to make clear this is about RPM

00:41:26,410 --> 00:41:34,140
for the none of these estimations the

00:41:31,720 --> 00:41:34,140
new

00:42:17,960 --> 00:42:24,060
Reba and turn around guess ill talk

00:42:21,090 --> 00:42:28,710
about completely peeled Indians polish

00:42:24,060 --> 00:43:09,690
successful which one PLT here news / 5

00:42:28,710 --> 00:43:14,060
yeah yeah I think I tried using the cuts

00:43:09,690 --> 00:43:14,060
America is probation

00:43:57,080 --> 00:44:02,360
I I

00:44:19,050 --> 00:44:30,240
no no what we do or where na na na boo

00:44:24,130 --> 00:44:34,270
is gay porn is very creamy white fedora

00:44:30,240 --> 00:44:38,910
well the only people that are working on

00:44:34,270 --> 00:44:46,770
RPM and are paid for working on our PNR

00:44:38,910 --> 00:44:46,770
so it's kind of yeah

00:45:02,890 --> 00:45:13,610
what what is trying to look at what RPM

00:45:07,670 --> 00:45:18,080
others as well and yeah I wanted to

00:45:13,610 --> 00:45:21,080
raise awareness around RPM and I i

00:45:18,080 --> 00:45:23,090
joined to be key I go to write access to

00:45:21,080 --> 00:45:26,590
the wiki almost immediately the people

00:45:23,090 --> 00:45:30,710
are on IRC channel I haven't written to

00:45:26,590 --> 00:45:33,830
medalist that's true but I don't think

00:45:30,710 --> 00:45:35,360
it's problem that the development is

00:45:33,830 --> 00:45:38,330
closed or something like that I think

00:45:35,360 --> 00:45:43,370
the more serious problem is that people

00:45:38,330 --> 00:45:46,460
are not interested III am I think this

00:45:43,370 --> 00:45:48,740
may be with another opinion but I I know

00:45:46,460 --> 00:45:51,440
that the situation during the last year

00:45:48,740 --> 00:45:53,800
or two is much much better very much

00:45:51,440 --> 00:45:53,800
before

00:46:18,170 --> 00:46:26,970
okay so we can continue in the hallway

00:46:23,190 --> 00:46:33,780
or whatever room we will find thank you

00:46:26,970 --> 00:46:38,180
for attention I hope we will see some of

00:46:33,780 --> 00:46:38,180

YouTube URL: https://www.youtube.com/watch?v=u5vMaYyYw2I


