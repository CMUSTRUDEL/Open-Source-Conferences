Title: fosdem2012  paul bakker polarssl part2
Publication date: 2013-02-05
Playlist: FOSDEM 2012
Description: 
	FOSDEM (Free and Open Source Development European Meeting) is a European event centered around Free and Open Source software development. It is aimed at developers and all interested in the Free and Open Source news in the world. Its goals are to enable developers to meet and to promote the awareness and use of free and open source software. More info at http://fosdem.org
Captions: 
	00:00:00,000 --> 00:00:05,040
so if you run mobil be threatened you

00:00:02,460 --> 00:00:08,670
have to do your own new texting across

00:00:05,040 --> 00:00:10,110
your press requests so in the past year

00:00:08,670 --> 00:00:13,790
there were a lot of code improvements

00:00:10,110 --> 00:00:17,430
there were two security advisories and

00:00:13,790 --> 00:00:19,650
we had to open the VN accreditation from

00:00:17,430 --> 00:00:22,560
the code perspective there was a lot

00:00:19,650 --> 00:00:24,750
change to support the openvpn

00:00:22,560 --> 00:00:26,519
integration because over VPN was a

00:00:24,750 --> 00:00:29,400
totally separate product they used

00:00:26,519 --> 00:00:31,980
openssl they were fully hooked into open

00:00:29,400 --> 00:00:37,579
itself for doing the cryptography on

00:00:31,980 --> 00:00:41,370
their part so there was a great guy and

00:00:37,579 --> 00:00:45,200
who's called a vm de gallo which did a

00:00:41,370 --> 00:00:47,579
large number of changes for making

00:00:45,200 --> 00:00:51,960
openvpn being able to have a generic

00:00:47,579 --> 00:00:54,660
crypto layer where pull yourself into he

00:00:51,960 --> 00:00:56,699
is 11 sport was added so for the people

00:00:54,660 --> 00:01:01,199
that do open a seat smartcard workship

00:00:56,699 --> 00:01:03,420
after this you can use it you can use

00:01:01,199 --> 00:01:06,270
polar cell visit with the same becca

00:01:03,420 --> 00:01:11,159
back end because this is the openness

00:01:06,270 --> 00:01:13,380
seat back end there was some new pcs one

00:01:11,159 --> 00:01:16,070
changes which are not that important but

00:01:13,380 --> 00:01:19,530
the latter two are important improvement

00:01:16,070 --> 00:01:22,740
namely there was a new random generator

00:01:19,530 --> 00:01:26,850
added the counter mode deterministic

00:01:22,740 --> 00:01:28,920
random bike generator that was named by

00:01:26,850 --> 00:01:31,350
NIST because of one of the security

00:01:28,920 --> 00:01:37,290
advisories that was some added namely

00:01:31,350 --> 00:01:41,070
the top one there was a well-designed

00:01:37,290 --> 00:01:43,380
French number generator in polar cells

00:01:41,070 --> 00:01:45,210
the default was called have age and I've

00:01:43,380 --> 00:01:50,159
age was very cool because it only needed

00:01:45,210 --> 00:01:51,930
timing to make proper remin five years

00:01:50,159 --> 00:01:54,689
ago it was still good ten years ago it

00:01:51,930 --> 00:01:57,600
was really great nowadays with cloud

00:01:54,689 --> 00:01:59,670
computing it just started to fail

00:01:57,600 --> 00:02:02,880
horribly because there are some cloud

00:01:59,670 --> 00:02:05,230
environments that don't actually allow

00:02:02,880 --> 00:02:07,960
the RT DSC

00:02:05,230 --> 00:02:10,420
they call to actually get a group true

00:02:07,960 --> 00:02:12,430
time so you probably get 0 back every

00:02:10,420 --> 00:02:14,080
time you call it and it's normally it

00:02:12,430 --> 00:02:17,170
supposed to give back to the red the

00:02:14,080 --> 00:02:21,130
real time clock and that gives really

00:02:17,170 --> 00:02:22,810
regretting so we made a major change

00:02:21,130 --> 00:02:24,640
with some with some people on the

00:02:22,810 --> 00:02:27,720
internet we implemented within a week

00:02:24,640 --> 00:02:29,770
the full moon random generator and

00:02:27,720 --> 00:02:32,380
second advisor at the start of the year

00:02:29,770 --> 00:02:35,320
was there was a man of middle possible

00:02:32,380 --> 00:02:37,960
with difficulty can make predictable

00:02:35,320 --> 00:02:41,580
diffie-hellman results there was not

00:02:37,960 --> 00:02:45,070
really a good party what are the seeds

00:02:41,580 --> 00:02:47,410
sorry what are the seeds for the new one

00:02:45,070 --> 00:02:50,740
and you have what's called the entropy

00:02:47,410 --> 00:02:53,980
accumulator that you can feed by default

00:02:50,740 --> 00:02:56,440
it uses dead random if it's available on

00:02:53,980 --> 00:03:02,140
their linux unix environment or the

00:02:56,440 --> 00:03:06,730
crypto API random as a c4 for windows it

00:03:02,140 --> 00:03:08,620
uses time-based parts juices have aged

00:03:06,730 --> 00:03:11,410
to mix the time if it has the

00:03:08,620 --> 00:03:13,000
possibility to actually add extra and it

00:03:11,410 --> 00:03:16,120
has moving functions so you can add new

00:03:13,000 --> 00:03:18,760
functions if you want so it follows the

00:03:16,120 --> 00:03:21,250
nest standard as closely as possible so

00:03:18,760 --> 00:03:24,430
you also have the ability to customize

00:03:21,250 --> 00:03:26,620
the starting seeds so that even if you

00:03:24,430 --> 00:03:30,480
have the same seeds that they're still

00:03:26,620 --> 00:03:33,310
different running flowing out at the end

00:03:30,480 --> 00:03:37,290
so then at the start of last year we

00:03:33,310 --> 00:03:40,330
start with the openvpn NL accreditation

00:03:37,290 --> 00:03:43,060
that will sketch a bit about how it

00:03:40,330 --> 00:03:45,850
works in the netherlands and we have

00:03:43,060 --> 00:03:52,720
something called the ver b which is a

00:03:45,850 --> 00:03:55,200
regulation that well forces all

00:03:52,720 --> 00:03:58,410
government agencies to use approved

00:03:55,200 --> 00:04:00,730
products for government information and

00:03:58,410 --> 00:04:02,709
restricted information which the lowest

00:04:00,730 --> 00:04:05,440
level of government information is also

00:04:02,709 --> 00:04:07,390
the most broadly used it's almost all

00:04:05,440 --> 00:04:09,790
the government officials

00:04:07,390 --> 00:04:13,630
news when they do their meal and do

00:04:09,790 --> 00:04:14,709
internal documents and the regulation

00:04:13,630 --> 00:04:18,220
says you have to have an approved

00:04:14,709 --> 00:04:23,010
product and up till now that meant cisco

00:04:18,220 --> 00:04:26,890
and or juniper network products which

00:04:23,010 --> 00:04:29,919
was of course not really budget-friendly

00:04:26,890 --> 00:04:32,320
the dutch government isn't is trying to

00:04:29,919 --> 00:04:37,120
force the open source through in system

00:04:32,320 --> 00:04:38,710
so it becomes cheaper and but it

00:04:37,120 --> 00:04:41,680
requires some help and that's from the

00:04:38,710 --> 00:04:43,750
MTV and nav is nameless Bureau of

00:04:41,680 --> 00:04:46,840
innings with a living in Dutch but it's

00:04:43,750 --> 00:04:49,330
the it's a subsidiary of the secret

00:04:46,840 --> 00:04:52,870
tourism Netherlands and it has the power

00:04:49,330 --> 00:04:57,580
to evaluate and accredit products for

00:04:52,870 --> 00:05:00,820
use under the furby regulation I have a

00:04:57,580 --> 00:05:04,270
really long history with these guys I've

00:05:00,820 --> 00:05:07,300
used them for accrediting the products

00:05:04,270 --> 00:05:10,570
for for embassies and stuff like that so

00:05:07,300 --> 00:05:14,410
I know the flow and the hard part is

00:05:10,570 --> 00:05:16,030
that an evaluation targets a lot of

00:05:14,410 --> 00:05:18,460
different areas and they don't always

00:05:16,030 --> 00:05:24,040
mix very well with open source and open

00:05:18,460 --> 00:05:26,200
source mentality so part of the

00:05:24,040 --> 00:05:29,640
evaluation is case was the cryptography

00:05:26,200 --> 00:05:32,169
doesn't actually do what it says will do

00:05:29,640 --> 00:05:33,640
what security features are present how

00:05:32,169 --> 00:05:37,180
does the work if they want to use

00:05:33,640 --> 00:05:39,760
openvpn it should add VPN in such a way

00:05:37,180 --> 00:05:42,280
that people actually have a no-hassle

00:05:39,760 --> 00:05:44,560
secure communication with the government

00:05:42,280 --> 00:05:49,330
networks it has to have security line

00:05:44,560 --> 00:05:51,370
source code is inspected and the supply

00:05:49,330 --> 00:05:53,520
chain has to be controlled in one way or

00:05:51,370 --> 00:05:53,520
another

00:05:54,000 --> 00:05:58,960
so if you look at the stock version of

00:05:57,640 --> 00:06:01,660
out with VPN that's available in the

00:05:58,960 --> 00:06:04,300
internet it has some issues from the

00:06:01,660 --> 00:06:06,430
government perspective namely first it's

00:06:04,300 --> 00:06:07,660
very easy to enable no encryption you

00:06:06,430 --> 00:06:10,240
can just do command line you have

00:06:07,660 --> 00:06:12,730
nonfiction and although you students

00:06:10,240 --> 00:06:15,100
they don't want to allow people to

00:06:12,730 --> 00:06:17,440
actually make that mistake so you can't

00:06:15,100 --> 00:06:19,660
be know if you want to do a secure

00:06:17,440 --> 00:06:22,360
government version it uses a lot of

00:06:19,660 --> 00:06:26,650
outdated cryptographic functions or low

00:06:22,360 --> 00:06:30,660
bytes bit sizes which isn't really

00:06:26,650 --> 00:06:33,670
something the government gets happy from

00:06:30,660 --> 00:06:36,550
then there's the burgeoning discussion I

00:06:33,670 --> 00:06:38,260
had earlier he already is open source

00:06:36,550 --> 00:06:41,160
project normally don't have a very

00:06:38,260 --> 00:06:43,270
strict versioning with release dates and

00:06:41,160 --> 00:06:45,930
after that they move on to the next

00:06:43,270 --> 00:06:50,170
version and they don't necessarily

00:06:45,930 --> 00:06:51,940
maintain the old version on all aspects

00:06:50,170 --> 00:06:56,470
and that's something that a government

00:06:51,940 --> 00:06:59,410
gets really iffy about especially if

00:06:56,470 --> 00:07:01,450
also dates are moving around for

00:06:59,410 --> 00:07:03,880
evaluation the government wants know at

00:07:01,450 --> 00:07:06,310
what day can we plan our officials to

00:07:03,880 --> 00:07:09,070
start inspecting your source code if you

00:07:06,310 --> 00:07:10,570
say to march first and a march first you

00:07:09,070 --> 00:07:13,590
say well it's going to take two more

00:07:10,570 --> 00:07:17,740
weeks we had a little shift in our

00:07:13,590 --> 00:07:19,960
development that's something they don't

00:07:17,740 --> 00:07:21,250
get happy about and commercial companies

00:07:19,960 --> 00:07:23,560
know that already but the open source

00:07:21,250 --> 00:07:26,710
community they they don't have to say

00:07:23,560 --> 00:07:30,070
deadlines normally as companies have for

00:07:26,710 --> 00:07:33,940
this kind of development from a supply

00:07:30,070 --> 00:07:35,800
chain perspective of VPN is disputed

00:07:33,940 --> 00:07:38,770
from the website about Libya and source

00:07:35,800 --> 00:07:41,050
code and binary virgin but also by all

00:07:38,770 --> 00:07:43,480
the distributions worldwide how do you

00:07:41,050 --> 00:07:46,090
know that if you have open VPN in your

00:07:43,480 --> 00:07:49,570
system by a deviant or whatever that

00:07:46,090 --> 00:07:51,550
that's actually a correct version of the

00:07:49,570 --> 00:07:53,620
source code as was meant to be and

00:07:51,550 --> 00:07:56,620
published from the website vote you

00:07:53,620 --> 00:07:58,840
don't there's too many steps in the

00:07:56,620 --> 00:08:02,940
middle there's no single verification of

00:07:58,840 --> 00:08:04,780
the source code and signature on it so

00:08:02,940 --> 00:08:07,920
that's an issue

00:08:04,780 --> 00:08:11,250
the government sees there and from the

00:08:07,920 --> 00:08:14,980
documentation perspective of VPN was

00:08:11,250 --> 00:08:18,490
very very limited there was some

00:08:14,980 --> 00:08:21,760
usability documentation but not on the

00:08:18,490 --> 00:08:24,100
actual design of the code and the people

00:08:21,760 --> 00:08:26,590
that were in the group on the magnetic

00:08:24,100 --> 00:08:28,510
vote didn't actually know all the ins

00:08:26,590 --> 00:08:30,100
and outs from some ports because because

00:08:28,510 --> 00:08:32,650
they were they were just core

00:08:30,100 --> 00:08:34,900
functionality it used to work and it

00:08:32,650 --> 00:08:37,089
works like this so let's keep it that

00:08:34,900 --> 00:08:39,490
way but the government actually wants to

00:08:37,089 --> 00:08:44,950
know why it works like it's supposed to

00:08:39,490 --> 00:08:48,370
do now so a company called Fox IT which

00:08:44,950 --> 00:08:51,550
is a major security IT security company

00:08:48,370 --> 00:08:55,270
in the Netherlands took it on itself to

00:08:51,550 --> 00:08:58,180
make a government-approved version so

00:08:55,270 --> 00:09:00,670
there's a few changes where the true

00:08:58,180 --> 00:09:03,100
code is taken from openvpn some

00:09:00,670 --> 00:09:06,250
hardening patches are applied as some

00:09:03,100 --> 00:09:09,370
the building the building of the code is

00:09:06,250 --> 00:09:11,410
actually done within Fox IT and they

00:09:09,370 --> 00:09:13,420
make available the packages for all the

00:09:11,410 --> 00:09:15,339
different systems with signatures

00:09:13,420 --> 00:09:17,290
everything and they guarantee that those

00:09:15,339 --> 00:09:19,960
versions are the same versions as the

00:09:17,290 --> 00:09:21,910
government wants you to get so it's

00:09:19,960 --> 00:09:25,930
available on the set on the site it has

00:09:21,910 --> 00:09:28,450
dutch government criteria approval for

00:09:25,930 --> 00:09:31,540
restricted level in dutch it's called

00:09:28,450 --> 00:09:33,670
department avocado and it doesn't mean

00:09:31,540 --> 00:09:35,820
it has less functionality than the

00:09:33,670 --> 00:09:38,950
actual open it does all the basic stuff

00:09:35,820 --> 00:09:44,370
but all the insecure functions insecure

00:09:38,950 --> 00:09:49,600
options have been removed and some

00:09:44,370 --> 00:09:52,360
options you had were really gone one of

00:09:49,600 --> 00:09:55,570
the major changes for over the pn and

00:09:52,360 --> 00:09:58,240
one of the major enablers 40 ppl was

00:09:55,570 --> 00:10:00,700
polarizes up the judge government

00:09:58,240 --> 00:10:03,460
started out with saying openvpn can

00:10:00,700 --> 00:10:06,339
never be evaluated because we are never

00:10:03,460 --> 00:10:09,550
gonna approve something like openness

00:10:06,339 --> 00:10:11,059
itself for government use but nobody

00:10:09,550 --> 00:10:12,229
knows how it works and we're

00:10:11,059 --> 00:10:17,179
never going to prove that it actually

00:10:12,229 --> 00:10:19,909
does with sugar that was when potes I

00:10:17,179 --> 00:10:22,039
was chosen to be put in there because

00:10:19,909 --> 00:10:25,879
it's feature compatible on this front

00:10:22,039 --> 00:10:28,249
with openness Iselle and was used to

00:10:25,879 --> 00:10:30,379
actually make the entire openvpn core

00:10:28,249 --> 00:10:34,639
just use polar so and no external

00:10:30,379 --> 00:10:36,499
dependencies and openness on that

00:10:34,639 --> 00:10:40,609
doesn't mean that for instance by

00:10:36,499 --> 00:10:44,479
default you are forced to have a s 256

00:10:40,609 --> 00:10:46,969
and sha256 as your crypto parameters no

00:10:44,479 --> 00:10:48,649
choices you can't downgrade them or

00:10:46,969 --> 00:10:55,099
whatsoever if you use the government

00:10:48,649 --> 00:10:58,339
version you get these crypto settings so

00:10:55,099 --> 00:11:00,289
as I already mentioned for the process

00:10:58,339 --> 00:11:03,049
there were a lot of patches for polar's

00:11:00,289 --> 00:11:08,209
l and openvpn mostly done by adam young

00:11:03,049 --> 00:11:10,069
which works at fox IT they did part

00:11:08,209 --> 00:11:13,519
hardening of the source code for openvpn

00:11:10,069 --> 00:11:15,919
so remove the options of integration

00:11:13,519 --> 00:11:19,189
allowing integration to open plan which

00:11:15,919 --> 00:11:21,379
required a lot of effort also with the

00:11:19,189 --> 00:11:25,729
community of openvpn to actually make

00:11:21,379 --> 00:11:28,489
them understand why they had to switch

00:11:25,729 --> 00:11:31,399
for from openssl as their base library

00:11:28,489 --> 00:11:34,729
which he used for the past seven six

00:11:31,399 --> 00:11:37,099
years to boaters as L which most of them

00:11:34,729 --> 00:11:39,979
never knew when some of the core people

00:11:37,099 --> 00:11:42,289
luckily already had experience with and

00:11:39,979 --> 00:11:44,689
actually did it and because of that they

00:11:42,289 --> 00:11:47,599
got into the government flow for

00:11:44,689 --> 00:11:50,059
benevolence and there was a lot of

00:11:47,599 --> 00:11:55,579
documentation added to openvpn by other

00:11:50,059 --> 00:11:59,419
young and to polar zone to actually help

00:11:55,579 --> 00:12:01,219
the government do the evaluation so the

00:11:59,419 --> 00:12:05,479
evaluation document is actually the most

00:12:01,219 --> 00:12:07,279
critical for doing an accreditation the

00:12:05,479 --> 00:12:09,259
stupid part is its documentation we

00:12:07,279 --> 00:12:12,289
normally would not right because it

00:12:09,259 --> 00:12:14,329
doesn't help the user it does help you

00:12:12,289 --> 00:12:16,159
as developers but if you are the core

00:12:14,329 --> 00:12:20,749
developer if you already know why you

00:12:16,159 --> 00:12:23,540
get some some parts as you did but it

00:12:20,749 --> 00:12:25,730
focuses fully on the security aspects of

00:12:23,540 --> 00:12:28,190
choice it's not under design aspects of

00:12:25,730 --> 00:12:31,009
your choices and that's normally not

00:12:28,190 --> 00:12:37,940
something any open source project would

00:12:31,009 --> 00:12:41,779
write on and then the the hard part was

00:12:37,940 --> 00:12:43,670
actually getting lost final versions

00:12:41,779 --> 00:12:47,060
that could be approved as i said earlier

00:12:43,670 --> 00:12:51,170
with openvpn community for instance the

00:12:47,060 --> 00:12:53,329
timeline shifts over over time so when

00:12:51,170 --> 00:12:56,810
they said it was march first march

00:12:53,329 --> 00:12:58,639
forward 15 and that tends to get hard

00:12:56,810 --> 00:13:00,529
and if you also get something like the

00:12:58,639 --> 00:13:03,380
security adviser me to describe the

00:13:00,529 --> 00:13:06,670
earlier with the red generator where we

00:13:03,380 --> 00:13:10,130
had kind of a floating target of how the

00:13:06,670 --> 00:13:12,050
random generator would work Oh would

00:13:10,130 --> 00:13:13,910
work by producing random but actually

00:13:12,050 --> 00:13:18,339
how the internals would work and the

00:13:13,910 --> 00:13:20,660
entropy pool would work we change that I

00:13:18,339 --> 00:13:22,490
think three times in the last week

00:13:20,660 --> 00:13:25,970
because of discussions we've had with a

00:13:22,490 --> 00:13:29,149
number of cryptographers and experts on

00:13:25,970 --> 00:13:31,459
the field and every time we change the

00:13:29,149 --> 00:13:33,350
government came back to us crying why

00:13:31,459 --> 00:13:35,089
have you changed it we were just looking

00:13:33,350 --> 00:13:38,389
into it and we were just trying to

00:13:35,089 --> 00:13:42,230
actually get disapproved so in the end

00:13:38,389 --> 00:13:44,480
we got to the point where it actually

00:13:42,230 --> 00:13:49,370
got approved but my first fleshed out

00:13:44,480 --> 00:13:53,180
front page post ever which was cool to

00:13:49,370 --> 00:13:56,389
to notice but I was at least very happy

00:13:53,180 --> 00:13:57,949
for having open PNNL now in a point

00:13:56,389 --> 00:14:00,050
where the Dutch government can actually

00:13:57,949 --> 00:14:03,139
use it where they are using open source

00:14:00,050 --> 00:14:04,760
now and I know the ministry of defense

00:14:03,139 --> 00:14:07,880
is trying to roll it out to all their

00:14:04,760 --> 00:14:11,959
employees which are 16 thousands of them

00:14:07,880 --> 00:14:15,829
in the Netherlands and it's because it's

00:14:11,959 --> 00:14:18,290
becoming the basic mode for DPM in the

00:14:15,829 --> 00:14:20,800
Dutch government which might be an ugly

00:14:18,290 --> 00:14:20,800
good thing

00:14:21,100 --> 00:14:28,930
so that was the part I plan to talk to

00:14:25,330 --> 00:14:32,290
you about but I'm open for questions on

00:14:28,930 --> 00:14:37,530
all aspects of polar cell cryptography

00:14:32,290 --> 00:14:37,530

YouTube URL: https://www.youtube.com/watch?v=mA4omLUWLZU


