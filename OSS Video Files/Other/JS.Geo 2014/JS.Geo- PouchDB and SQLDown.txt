Title: JS.Geo- PouchDB and SQLDown
Publication date: 2020-01-23
Playlist: JS.Geo 2014
Description: 
	By, Calvin Metcalf

Help us caption & translate this video!

http://amara.org/v/FS0z/
Captions: 
	00:00:16,410 --> 00:00:22,470
galvin um I wrote the works whatever

00:00:19,380 --> 00:00:24,660
you're talking about back I'm kind of go

00:00:22,470 --> 00:00:30,540
before kind of pointless if you don't

00:00:24,660 --> 00:00:46,170
have access to the if you can actually

00:00:30,540 --> 00:00:48,750
work in in explore but uh so if you want

00:00:46,170 --> 00:00:52,140
to follow out at home this is the URL

00:00:48,750 --> 00:00:54,960
there's quite a few links in here that

00:00:52,140 --> 00:00:58,440
on that page to help you follow along I

00:00:54,960 --> 00:01:02,100
make wet-naps primarily I mean we be

00:00:58,440 --> 00:01:04,739
backing stuff and node um so I think my

00:01:02,100 --> 00:01:07,649
talk title ended up just being because

00:01:04,739 --> 00:01:08,970
helm looking at my github like history

00:01:07,649 --> 00:01:12,149
and like picking two things that I've

00:01:08,970 --> 00:01:20,759
recently done so it's called pouch PDF

00:01:12,149 --> 00:01:23,520
drill down yes chua yeah so or when post

00:01:20,759 --> 00:01:26,970
chris is too much so postgres is hands

00:01:23,520 --> 00:01:30,630
down the best database it's better to l1

00:01:26,970 --> 00:01:33,149
and it's the best JSON database if you

00:01:30,630 --> 00:01:35,670
have to do queries like it is head and

00:01:33,149 --> 00:01:39,119
shoulders faster better in every awful

00:01:35,670 --> 00:01:40,950
way than and you know pouch is

00:01:39,119 --> 00:01:43,200
good on the couch TV as good person very

00:01:40,950 --> 00:01:45,300
specific stuff to postgres if you have

00:01:43,200 --> 00:01:48,899
to do complex queries don't involve just

00:01:45,300 --> 00:01:51,000
use post Chris but sometimes post chris

00:01:48,899 --> 00:01:53,369
is you know a little much if you just

00:01:51,000 --> 00:01:56,810
want to do you know store stuff locally

00:01:53,369 --> 00:02:00,569
you know do something use the browser

00:01:56,810 --> 00:02:06,770
and something that really really helpful

00:02:00,569 --> 00:02:09,929
is level up which is a wrapper around

00:02:06,770 --> 00:02:13,560
thing called level DV which is a simple

00:02:09,929 --> 00:02:16,550
key value database with just lexically

00:02:13,560 --> 00:02:20,250
lex old it alphabetically-ordered

00:02:16,550 --> 00:02:25,700
strings for the keys and it's just super

00:02:20,250 --> 00:02:27,910
simple um you can build something so

00:02:25,700 --> 00:02:32,530
index TV in chrome

00:02:27,910 --> 00:02:36,640
is built with level TV package TV which

00:02:32,530 --> 00:02:40,120
is a JavaScript port of CouchDB its

00:02:36,640 --> 00:02:43,630
built-in unknown with leveldb so is dat

00:02:40,120 --> 00:02:48,790
which I max Ogden he's gentle of juiced

00:02:43,630 --> 00:02:51,400
up it's his um get for data thing which

00:02:48,790 --> 00:02:56,050
is pretty exciting that's all at those

00:02:51,400 --> 00:02:59,080
levels baby and you can't have a back

00:02:56,050 --> 00:03:01,090
entrance besides level the give all

00:02:59,080 --> 00:03:04,240
wonderful little down which is just the

00:03:01,090 --> 00:03:07,450
sea level DD library you can sub in

00:03:04,240 --> 00:03:10,660
other back-end like or own called SQL

00:03:07,450 --> 00:03:14,350
about which you can use postgres 4sq

00:03:10,660 --> 00:03:18,190
life for my school or wed SQL in the

00:03:14,350 --> 00:03:19,750
browser as a back-end and some when you

00:03:18,190 --> 00:03:22,330
wrote that saga and actually not to

00:03:19,750 --> 00:03:23,740
somebody wrote one for index TV which

00:03:22,330 --> 00:03:27,100
means that you can browse it by code

00:03:23,740 --> 00:03:30,640
with level TV and use it in the browser

00:03:27,100 --> 00:03:32,800
and use it a note use it both places

00:03:30,640 --> 00:03:36,760
with the exact same code if you need to

00:03:32,800 --> 00:03:39,160
store data locally which is just really

00:03:36,760 --> 00:03:42,100
helpful when you have you know large

00:03:39,160 --> 00:03:46,180
amounts of did you know I know somebody

00:03:42,100 --> 00:03:48,100
is doing tiles and you can do tiles what

00:03:46,180 --> 00:03:49,780
you know the download to couch and do a

00:03:48,100 --> 00:03:53,920
lot of really cool stuff in the browser

00:03:49,780 --> 00:03:56,920
that so it is gif gear so got some geo

00:03:53,920 --> 00:04:00,400
stuff with it so the first thing people

00:03:56,920 --> 00:04:03,700
did to try and store do Geo stuff with

00:04:00,400 --> 00:04:06,280
leveled up is geo hashes anybody doesn't

00:04:03,700 --> 00:04:09,220
know what geocaches is our it sort of

00:04:06,280 --> 00:04:14,680
divides up the world in the quadrants so

00:04:09,220 --> 00:04:19,359
as we said a vcd inside of an ABCD and

00:04:14,680 --> 00:04:23,860
just so that a you have found a a that's

00:04:19,359 --> 00:04:29,290
a V so that sort of turning your tile

00:04:23,860 --> 00:04:33,000
URLs in just a string of letters if

00:04:29,290 --> 00:04:33,000
people are giving me black stairs

00:04:47,900 --> 00:04:51,410
it's the other troops

00:04:52,870 --> 00:04:56,380
I cannot actually anything on either

00:04:54,820 --> 00:05:00,340
screens we'll just pretend that you

00:04:56,380 --> 00:05:02,980
understood grow saying and just so it's

00:05:00,340 --> 00:05:04,770
fish it really works well with a leveldb

00:05:02,980 --> 00:05:07,090
because it basically means that um

00:05:04,770 --> 00:05:09,790
adjacent tiles are alphabetically next

00:05:07,090 --> 00:05:14,920
to each other so you could just do

00:05:09,790 --> 00:05:16,330
ranges of them so but one of the big

00:05:14,920 --> 00:05:21,090
things about them is what's called a

00:05:16,330 --> 00:05:21,090
Hilbert curve which is fancy talk for

00:05:25,860 --> 00:05:30,120
this one I do have a link somewhere

00:05:38,480 --> 00:05:46,170
so it's basically saying making sure

00:05:43,200 --> 00:05:51,800
that all adjacent things are next to

00:05:46,170 --> 00:05:51,800
each other so in a jailhouse basically

00:05:53,660 --> 00:06:03,420
ABCD a a baby hcad but with a Hilbert

00:06:01,110 --> 00:06:07,470
curve to basically go instead of over

00:06:03,420 --> 00:06:10,560
here you go you know like that so that

00:06:07,470 --> 00:06:13,910
they're all next to each other so the

00:06:10,560 --> 00:06:15,690
next the tile that is adjacent in

00:06:13,910 --> 00:06:17,940
industry naming scheme is always

00:06:15,690 --> 00:06:20,310
adjacent in real life and it means that

00:06:17,940 --> 00:06:24,540
you can just do queries on the ranges

00:06:20,310 --> 00:06:27,060
really easily um so that was the first

00:06:24,540 --> 00:06:31,410
way people are going to do it there are

00:06:27,060 --> 00:06:32,730
like several plugin for level up for

00:06:31,410 --> 00:06:35,990
level DV the people of Britain without

00:06:32,730 --> 00:06:38,970
quadtrees though without filter curves

00:06:35,990 --> 00:06:42,350
and then I decided to talk by doing a

00:06:38,970 --> 00:06:46,530
ternary one with the hill British curb

00:06:42,350 --> 00:06:50,070
and that one actually called no entry I

00:06:46,530 --> 00:06:52,920
just published it I just pulled it out

00:06:50,070 --> 00:06:55,530
and published it about a couple weeks

00:06:52,920 --> 00:06:58,470
ago but that one if you want for some

00:06:55,530 --> 00:07:00,900
reason to do that kind of thing that

00:06:58,470 --> 00:07:03,330
one's pretty good the main problem with

00:07:00,900 --> 00:07:05,580
a Geo hashes of any sort is it a

00:07:03,330 --> 00:07:07,820
geocache is really good for finding

00:07:05,580 --> 00:07:10,590
things that are smaller so if you have a

00:07:07,820 --> 00:07:12,780
batting box you can find things that are

00:07:10,590 --> 00:07:16,190
totally inside the bounding box so

00:07:12,780 --> 00:07:18,210
finding points if you know doing big

00:07:16,190 --> 00:07:21,300
bottom finding the points inside a very

00:07:18,210 --> 00:07:23,970
small all your other stuff it does not

00:07:21,300 --> 00:07:25,020
work at all if you need to find you know

00:07:23,970 --> 00:07:28,230
if you have a point and want to find

00:07:25,020 --> 00:07:30,660
what's katies it does not work you well

00:07:28,230 --> 00:07:32,520
you can make it work but it does not is

00:07:30,660 --> 00:07:35,430
not actually efficient in any way you

00:07:32,520 --> 00:07:38,900
should not do that so you do something

00:07:35,430 --> 00:07:42,840
like that you need a artery of some sort

00:07:38,900 --> 00:07:45,180
so what air has one called our bush

00:07:42,840 --> 00:07:47,060
there's one with somebody else wrote

00:07:45,180 --> 00:07:53,600
called are two that I know mane

00:07:47,060 --> 00:07:56,960
um don't use our tree like I I started

00:07:53,600 --> 00:07:59,540
getting up before our bush and you need

00:07:56,960 --> 00:08:02,360
to serialize and deserialized it your

00:07:59,540 --> 00:08:04,820
tree that's the only time our tree is

00:08:02,360 --> 00:08:08,350
somewhat better than our bush because

00:08:04,820 --> 00:08:11,690
our bush just does a valued by reference

00:08:08,350 --> 00:08:20,990
but unless you have that very specific

00:08:11,690 --> 00:08:23,150
thing so I wrote a but they're all

00:08:20,990 --> 00:08:25,160
cigarettes so they're great if you just

00:08:23,150 --> 00:08:26,389
memory but if you need to serialize you

00:08:25,160 --> 00:08:28,370
know it's a bit and don't want it

00:08:26,389 --> 00:08:31,970
entirely in memory they're not going to

00:08:28,370 --> 00:08:35,860
work so alright acing artery it is

00:08:31,970 --> 00:08:38,270
pretty much just a part of our bush but

00:08:35,860 --> 00:08:40,159
acing which actually makes it somewhat

00:08:38,270 --> 00:08:42,140
easier to ride because when things are

00:08:40,159 --> 00:08:43,700
asynchronous in JavaScript you don't

00:08:42,140 --> 00:08:46,190
have to care about the kurjan or

00:08:43,700 --> 00:08:48,860
anything because the only thing that's

00:08:46,190 --> 00:08:50,630
wrong for cursing javascript is that the

00:08:48,860 --> 00:08:54,200
staff can get so big is running out of

00:08:50,630 --> 00:08:57,350
memory but if things are async they do

00:08:54,200 --> 00:09:03,380
not capture their staff so you can be

00:08:57,350 --> 00:09:06,740
totally just recursive so see I wrote in

00:09:03,380 --> 00:09:09,020
a sink art recommendation um the other

00:09:06,740 --> 00:09:11,660
thing is that there you have to optimize

00:09:09,020 --> 00:09:13,010
it somewhat differently because it will

00:09:11,660 --> 00:09:16,100
be optimizing and somewhat different

00:09:13,010 --> 00:09:18,950
because the things actually takes a lot

00:09:16,100 --> 00:09:22,550
of time is up all the data lookups so

00:09:18,950 --> 00:09:26,140
even if wanting very broad shallow trees

00:09:22,550 --> 00:09:32,300
instead of a lot like deep trees that uh

00:09:26,140 --> 00:09:35,060
you know the in-memory ones but uh yeah

00:09:32,300 --> 00:09:38,510
wrote that and then went to do stuff a

00:09:35,060 --> 00:09:42,110
bit then so I don't you see with you my

00:09:38,510 --> 00:09:47,089
address oh definitely Audrey and got

00:09:42,110 --> 00:09:49,070
Foster's up because all our trees care

00:09:47,089 --> 00:09:51,110
about is down involved and you know it

00:09:49,070 --> 00:09:53,050
i'm inside of the Boston bounding box

00:09:51,110 --> 00:09:57,339
position a dot-com

00:09:53,050 --> 00:10:03,130
convex polygon so that autumn all the

00:09:57,339 --> 00:10:05,170
way there so that is like god damn it so

00:10:03,130 --> 00:10:07,450
I derive a library for be bak something

00:10:05,170 --> 00:10:09,399
it's basically the because it turns out

00:10:07,450 --> 00:10:12,779
there is not really any good loggers for

00:10:09,399 --> 00:10:18,760
does this be boxed intercept this uh

00:10:12,779 --> 00:10:22,750
Judaism and do it well and have another

00:10:18,760 --> 00:10:24,930
slot here did I forget to publish to

00:10:22,750 --> 00:10:24,930
push

00:10:27,850 --> 00:10:33,280
battery

00:10:30,150 --> 00:10:35,170
so an open the weird corner case you

00:10:33,280 --> 00:10:37,600
have to hit to like this one is not

00:10:35,170 --> 00:10:43,150
actually hitting any of the points and

00:10:37,600 --> 00:10:44,860
that was raining that you know okay and

00:10:43,150 --> 00:10:48,550
all this stuff is own dimensionally

00:10:44,860 --> 00:10:50,530
agnostic so it'll work on my 40 I'm

00:10:48,550 --> 00:10:52,630
really tested that as much as I'd like

00:10:50,530 --> 00:10:57,660
but yeah what's going on down here

00:10:52,630 --> 00:11:01,210
that's it just redoing it I dria

00:10:57,660 --> 00:11:03,340
retaliate you should have gotten used to

00:11:01,210 --> 00:11:06,090
this I'm be but each person is used as a

00:11:03,340 --> 00:11:08,530
this is a presentation library today

00:11:06,090 --> 00:11:10,060
yeah so and then I wrapped it all

00:11:08,530 --> 00:11:13,060
together with level up to make level

00:11:10,060 --> 00:11:18,400
tree which is just an hour 3 and level

00:11:13,060 --> 00:11:22,660
so that you can do you know there's sort

00:11:18,400 --> 00:11:25,060
of geo queries and then also how much TV

00:11:22,660 --> 00:11:31,810
so you can do sinker so that's sort of

00:11:25,060 --> 00:11:33,630
it I can show some Oh is there like a

00:11:31,810 --> 00:11:42,220
trick for getting it to not look like

00:11:33,630 --> 00:11:48,940
weirdness anybody know this is steve

00:11:42,220 --> 00:11:50,710
linux laptop command how was it not

00:11:48,940 --> 00:11:53,580
stretch up is like the stretching thingy

00:11:50,710 --> 00:11:56,580
that people were doing dealing with ah

00:11:53,580 --> 00:11:56,580
what

00:11:59,180 --> 00:12:11,130
so we can what kind of scenarios are you

00:12:06,770 --> 00:12:13,650
are you have attained towards with with

00:12:11,130 --> 00:12:17,040
this time that are you disconnected

00:12:13,650 --> 00:12:19,680
scenario yeah so if you're deaf he was

00:12:17,040 --> 00:12:21,720
he was still here not to me about what's

00:12:19,680 --> 00:12:27,420
the next big thing it's gonna be offline

00:12:21,720 --> 00:12:30,270
come on first and so saving data and

00:12:27,420 --> 00:12:33,690
then I think wearing the vbox of what

00:12:30,270 --> 00:12:36,210
large amounts of data that when you

00:12:33,690 --> 00:12:39,050
aren't don't have connections some big

00:12:36,210 --> 00:12:42,120
fancy server that's like the Google

00:12:39,050 --> 00:12:46,740
presentation deputy a web back when the

00:12:42,120 --> 00:12:48,779
website yeah yeah so um so I'm making

00:12:46,740 --> 00:12:50,820
pouch earlier i'm going to talk about my

00:12:48,779 --> 00:12:52,890
point about that in my presentation

00:12:50,820 --> 00:12:57,450
tomorrow z you are all invited to not

00:12:52,890 --> 00:12:58,980
jazz no jazz but that's about syncing

00:12:57,450 --> 00:13:02,180
and then using an offline and it's

00:12:58,980 --> 00:13:05,550
syncing when you get it data again and

00:13:02,180 --> 00:13:07,530
said that i'm going to need some of it

00:13:05,550 --> 00:13:09,720
probably gonna do a lot more of our

00:13:07,530 --> 00:13:15,300
people like okay I almost working my

00:13:09,720 --> 00:13:16,950
phone when I'm in the subway or you know

00:13:15,300 --> 00:13:20,510
I want you to my laptop but I don't

00:13:16,950 --> 00:13:24,800
actually have you know wife i had the

00:13:20,510 --> 00:13:27,690
construction woods or whatever so that

00:13:24,800 --> 00:13:30,030
the that's going to be the thing to keep

00:13:27,690 --> 00:13:32,339
your plans are going to be following you

00:13:30,030 --> 00:13:40,110
about going forward they already are

00:13:32,339 --> 00:13:44,030
yeah yeah my show kids who's doing kind

00:13:40,110 --> 00:13:46,300
of home-cooked home brewed by offline

00:13:44,030 --> 00:13:49,090
all fine data collection

00:13:46,300 --> 00:13:54,250
with some sort of synchronization once

00:13:49,090 --> 00:13:58,950
the connection hits yeah so what's out

00:13:54,250 --> 00:14:03,150
there I get requests all the time it's

00:13:58,950 --> 00:14:05,950
difficult I know somebody is doing

00:14:03,150 --> 00:14:07,840
sterling tiles and pouch right so they

00:14:05,950 --> 00:14:10,960
can sing it over he's also doing that in

00:14:07,840 --> 00:14:15,640
like I eat tenure so binary did a 9010

00:14:10,960 --> 00:14:17,980
in index TV like the offline storage and

00:14:15,640 --> 00:14:20,650
web browsers are terrible why you have

00:14:17,980 --> 00:14:21,850
two databases and they both sort of

00:14:20,650 --> 00:14:23,890
competing with each other which can have

00:14:21,850 --> 00:14:29,800
a weird API and like the worst

00:14:23,890 --> 00:14:31,780
documentation so yep so it is not a very

00:14:29,800 --> 00:14:35,110
fun thing to have to deal with of like I

00:14:31,780 --> 00:14:38,170
need indexdb except when I'm on safari

00:14:35,110 --> 00:14:40,780
or old Android we're going to use a

00:14:38,170 --> 00:14:43,660
weird port of web SQL that has really

00:14:40,780 --> 00:14:45,880
nothing nothing documented about a deal

00:14:43,660 --> 00:14:46,750
with JavaScript objects so because who

00:14:45,880 --> 00:14:55,080
would want to know about that in

00:14:46,750 --> 00:15:01,360
JavaScript des front of time oh yeah so

00:14:55,080 --> 00:15:03,340
that's state of that there's a index td2

00:15:01,360 --> 00:15:07,630
coming out soon it does can even more

00:15:03,340 --> 00:15:11,710
complex and less usable if trends hold

00:15:07,630 --> 00:15:15,420
okay to employ yeah um watching get

00:15:11,710 --> 00:15:15,420
questions the audience

00:15:22,620 --> 00:15:41,190
yes yeah so it sounds like I mean couch

00:15:38,560 --> 00:16:01,920
certainly has very specific yes very

00:15:41,190 --> 00:16:06,750
Jesus a minute with using couch so yeah

00:16:01,920 --> 00:16:08,860
so polish Chris no I mean it's got it

00:16:06,750 --> 00:16:14,590
you could write some sort of client that

00:16:08,860 --> 00:16:15,910
doesn't that would do that but you sort

00:16:14,590 --> 00:16:20,290
of store your data in a very specific

00:16:15,910 --> 00:16:22,140
way and couch so that you can do because

00:16:20,290 --> 00:16:25,000
Cashin pouch can deal with you know

00:16:22,140 --> 00:16:27,040
multiple people editing it the document

00:16:25,000 --> 00:16:28,720
when they're offline or when they're

00:16:27,040 --> 00:16:31,620
both online instead of dealing with that

00:16:28,720 --> 00:16:36,010
so you end up having to sort of store

00:16:31,620 --> 00:16:37,900
revisions so it's you not syncing up

00:16:36,010 --> 00:16:42,010
with outpost crispy what you could do is

00:16:37,900 --> 00:16:44,710
there's um you can run you can sync up

00:16:42,010 --> 00:16:47,050
with dispatch TV and note and I had to

00:16:44,710 --> 00:16:49,330
be in the browser and then you know use

00:16:47,050 --> 00:16:53,410
that then update a Postgres database if

00:16:49,330 --> 00:16:56,770
you wanted you know if I'm using host

00:16:53,410 --> 00:16:59,040
Chris there's off it like yeah that's

00:16:56,770 --> 00:17:00,790
not something you do but it's long it

00:16:59,040 --> 00:17:08,940
somebody has the time to actually bother

00:17:00,790 --> 00:17:08,940
to do it my possible Fred yeah the

00:17:10,569 --> 00:17:23,179
watch it out actually first looking just

00:17:16,730 --> 00:17:27,459
to steal we've got up called offline

00:17:23,179 --> 00:17:30,650
editor jf just looking at here and

00:17:27,459 --> 00:17:33,410
browser cache but has a whole model

00:17:30,650 --> 00:17:35,690
being able to go online and also does

00:17:33,410 --> 00:17:38,920
tile fetching too so they basically

00:17:35,690 --> 00:17:42,140
cookie cuts your vectors and your tiles

00:17:38,920 --> 00:17:44,510
put some in your browser store then go

00:17:42,140 --> 00:17:47,390
on make some edits and then go back

00:17:44,510 --> 00:17:54,309
online so you may not be dressed in all

00:17:47,390 --> 00:17:54,309
the code but you can either use yeah

00:18:08,260 --> 00:18:14,510
just right great yeah the one of the it

00:18:12,980 --> 00:18:16,280
turns out one thing that's really hard

00:18:14,510 --> 00:18:18,470
to do in a browser is figure out if

00:18:16,280 --> 00:18:21,440
you're online or not is that there's

00:18:18,470 --> 00:18:22,880
it's there's no there's online and

00:18:21,440 --> 00:18:26,630
offline events and they just they just

00:18:22,880 --> 00:18:29,330
they do nothing it's you have to it's

00:18:26,630 --> 00:18:32,270
far harder than it should be so any code

00:18:29,330 --> 00:18:36,850
that feel it's already written that take

00:18:32,270 --> 00:18:39,410
it like run with it um care for yeah

00:18:36,850 --> 00:18:42,400
because that's and you're gonna find

00:18:39,410 --> 00:18:42,400
yourself doing that a lot more

00:18:45,720 --> 00:18:57,760
questions / browser sword stuff ruh-roh

00:18:51,330 --> 00:19:03,070
launcher yes which is a way where sequel

00:18:57,760 --> 00:19:06,039
is it is here please come back to the

00:19:03,070 --> 00:19:11,340
whole lawn chair yeah lawn chair yeah

00:19:06,039 --> 00:19:13,809
just like say i have this long yeah so

00:19:11,340 --> 00:19:16,510
there has actually been to talk about

00:19:13,809 --> 00:19:19,620
using that pouch the problem with that

00:19:16,510 --> 00:19:23,620
about really any abstraction is that

00:19:19,620 --> 00:19:27,159
when you have when you then need to like

00:19:23,620 --> 00:19:30,159
do ask questions and do queries on it

00:19:27,159 --> 00:19:33,220
you you end up having a giant

00:19:30,159 --> 00:19:35,919
performances so that so pouch TV has

00:19:33,220 --> 00:19:40,510
built-in adapters for index TV web SQL

00:19:35,919 --> 00:19:42,190
and level level up each of them has

00:19:40,510 --> 00:19:45,120
totally different ways of like iterating

00:19:42,190 --> 00:19:47,830
totally different ways of of you know

00:19:45,120 --> 00:19:52,240
getting blend stuff and you just ended

00:19:47,830 --> 00:19:55,200
up you know it was just too slow because

00:19:52,240 --> 00:19:59,019
and see it sort of had to work with the

00:19:55,200 --> 00:20:00,940
sort of bear stuff database table is a

00:19:59,019 --> 00:20:05,230
guy Nolan you did all this work on up

00:20:00,940 --> 00:20:07,029
what SQL index to be I see if my life

00:20:05,230 --> 00:20:10,450
depended on having to put some data in

00:20:07,029 --> 00:20:13,830
xdd I might not be able to do it because

00:20:10,450 --> 00:20:16,149
it's like folks them all the other parts

00:20:13,830 --> 00:20:18,309
but yeah if you have to do something

00:20:16,149 --> 00:20:20,350
less complex and just storing key value

00:20:18,309 --> 00:20:22,630
stuff lawn chair is great one who's also

00:20:20,350 --> 00:20:24,700
in called local Forge it's sort of like

00:20:22,630 --> 00:20:26,860
little storage but it's not as bad as

00:20:24,700 --> 00:20:34,360
little storage because you know it's a

00:20:26,860 --> 00:20:36,340
sink and well local storage is really

00:20:34,360 --> 00:20:39,190
slow so index TV and whether I still on

00:20:36,340 --> 00:20:41,649
much faster ironically even the wettest

00:20:39,190 --> 00:20:43,299
grill is depreciated and probably taken

00:20:41,649 --> 00:20:46,269
out of chrome at some point no really

00:20:43,299 --> 00:20:50,260
probably distant future is a lot faster

00:20:46,269 --> 00:20:52,539
than index TV because it's just s to

00:20:50,260 --> 00:20:54,640
light three with a small tiny little

00:20:52,539 --> 00:21:24,490
wrapper around it so

00:20:54,640 --> 00:21:29,410
you can get some more so transferable

00:21:24,490 --> 00:21:30,550
objects refers to you can do a there's a

00:21:29,410 --> 00:21:33,580
thing in workers where you can just sort

00:21:30,550 --> 00:21:36,520
of like coffee in a ray buffer over and

00:21:33,580 --> 00:21:38,200
then you are not able to use it so you

00:21:36,520 --> 00:21:39,880
basically send it from the one side to

00:21:38,200 --> 00:21:42,420
the other and you after you send it you

00:21:39,880 --> 00:21:46,120
then can't touch it it's gone from the

00:21:42,420 --> 00:21:48,370
from the status sent it the thing that's

00:21:46,120 --> 00:21:49,990
never really documented anywhere is it

00:21:48,370 --> 00:21:53,110
it's not just a rate buffers that you

00:21:49,990 --> 00:21:55,540
can do that with it's also port objects

00:21:53,110 --> 00:21:59,590
so that you can actually send a message

00:21:55,540 --> 00:22:01,060
port over to a worker so even so a

00:21:59,590 --> 00:22:02,800
message part is something space if you

00:22:01,060 --> 00:22:04,270
like and I got a telephone and that you

00:22:02,800 --> 00:22:06,310
put stuff into one end and it comes out

00:22:04,270 --> 00:22:10,030
of events come out in the other end so

00:22:06,310 --> 00:22:14,050
you can send that to a worker and that's

00:22:10,030 --> 00:22:17,950
the thing that so that IE you can have a

00:22:14,050 --> 00:22:20,980
message port in this sort of the second

00:22:17,950 --> 00:22:24,310
in the second position to a transfer

00:22:20,980 --> 00:22:26,890
over ah but if you give it an array

00:22:24,310 --> 00:22:29,710
which is what everything else takes did

00:22:26,890 --> 00:22:32,020
they take an array of array buffers it

00:22:29,710 --> 00:22:34,660
will just explode and throw an air

00:22:32,020 --> 00:22:38,230
because why would they be helpful or

00:22:34,660 --> 00:22:43,690
anything so that that's what you can do

00:22:38,230 --> 00:22:45,930
in IE is just transfer a port message

00:22:43,690 --> 00:22:45,930
port

00:22:46,360 --> 00:22:53,810
it means that you it's not very useful

00:22:50,330 --> 00:22:57,560
because the main way that that is useful

00:22:53,810 --> 00:23:01,640
is in in places that don't have sub

00:22:57,560 --> 00:23:03,230
workers you could you can take since you

00:23:01,640 --> 00:23:05,450
can't basically create a worker from

00:23:03,230 --> 00:23:07,550
inside another worker you could sort of

00:23:05,450 --> 00:23:10,520
simulate that by creating a 2nd worker

00:23:07,550 --> 00:23:11,870
then just transferring a port objects

00:23:10,520 --> 00:23:13,820
both of them so that you can sir to

00:23:11,870 --> 00:23:15,080
pretend that this worker created this

00:23:13,820 --> 00:23:17,780
one even though it's just in a different

00:23:15,080 --> 00:23:20,600
one I have no idea why you want to use

00:23:17,780 --> 00:23:36,560
that otherwise it just seems not very

00:23:20,600 --> 00:23:43,750
helpful very buffer and it all the only

00:23:36,560 --> 00:23:43,750
things yes it's not not well so

00:23:44,830 --> 00:23:53,480
everything else but it doesn't mean a

00:23:47,720 --> 00:23:56,450
break what was so know it you get you

00:23:53,480 --> 00:24:01,240
can you can pass a regular first and you

00:23:56,450 --> 00:24:01,240
can transfer them and then

00:24:02,890 --> 00:24:07,640
earlier but yeah it works just like it

00:24:05,420 --> 00:24:11,780
says in Indian and then on the main

00:24:07,640 --> 00:24:14,840
thread or transfer the object that that

00:24:11,780 --> 00:24:18,890
object is no longer useful at all it's

00:24:14,840 --> 00:24:21,170
so instead of having to copy you

00:24:18,890 --> 00:24:23,660
structure cloning it just takes it and

00:24:21,170 --> 00:24:26,600
takes the pointer and gives it to the

00:24:23,660 --> 00:24:28,400
other thread but I evanna the one on the

00:24:26,600 --> 00:24:33,560
threat of plastic that pointer

00:24:28,400 --> 00:24:36,110
substitutes point to know yeah you have

00:24:33,560 --> 00:24:39,140
to pass a message you just pass yeah but

00:24:36,110 --> 00:24:41,150
and but that doesn't work in IE it you

00:24:39,140 --> 00:24:42,560
can do a diff you can put a different

00:24:41,150 --> 00:24:43,940
thing there because you can also

00:24:42,560 --> 00:24:46,850
transfer that porch so that's where it's

00:24:43,940 --> 00:24:48,590
all very confusing if anybody wants to

00:24:46,850 --> 00:24:50,870
just edit that mdn article like right

00:24:48,590 --> 00:25:01,320
now and make it more clear that'd be

00:24:50,870 --> 00:25:07,929
cool trick

00:25:01,320 --> 00:25:18,149
those are searching phone is the one

00:25:07,929 --> 00:25:20,859
where you don't transfer yeah yeah that

00:25:18,149 --> 00:25:23,529
well they you don't that you don't clone

00:25:20,859 --> 00:25:25,029
it right start your climb yeah Star Trek

00:25:23,529 --> 00:25:28,359
cloning is the technical term for the

00:25:25,029 --> 00:25:31,960
way you pass JSON because JSON JSON like

00:25:28,359 --> 00:25:33,399
things because you can't actually string

00:25:31,960 --> 00:25:35,139
a fly with JSON something that it's got

00:25:33,399 --> 00:25:36,599
circular references or anything so they

00:25:35,139 --> 00:25:38,830
used something called structured clone

00:25:36,599 --> 00:25:42,070
which it turned out if you had issue in

00:25:38,830 --> 00:25:45,029
pax tibi recently that there that's a

00:25:42,070 --> 00:25:48,129
recursive algorithm both of them both

00:25:45,029 --> 00:25:52,499
json.stringify and started cologne are

00:25:48,129 --> 00:25:55,330
both recursive in most browsers and will

00:25:52,499 --> 00:25:59,700
robot call stack exceeded air if you

00:25:55,330 --> 00:25:59,700
have something that's too deeply nested

00:26:13,840 --> 00:26:15,900

YouTube URL: https://www.youtube.com/watch?v=PsXkYFMnRFI


