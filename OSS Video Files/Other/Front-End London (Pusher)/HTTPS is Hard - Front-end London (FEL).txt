Title: HTTPS is Hard - Front-end London (FEL)
Publication date: 2016-07-14
Playlist: Front-End London
Description: 
	Making a site work on HTTPS should be easy, but it's not. The older your website, the harder it is to make the transition—but why? Steve Workman takes you through a 9 month journey, of how we moved Yell.com to HTTPS; overcoming a 20-year-old website and its many tiers to get that green padlock, and what actually happens when you make such a breaking change.

▼ Links mentioned in the talk ▼

https://mozilla.github.io/server-side-tls/ssl-config-generator/
https://www.yell.com/
http://www.iab.com/news/lean
http://www.lstlsfastyet.com
https://moz.com/search-ranking-factors/correlations
https://youtu.be/nBoPHDe7d2k
https://github.com/mozilla/http-observatory
https://blog.yell.com/2016/03/https-is-hard

▼ Slides ▼

https://speakerdeck.com/steveworkman/https-is-hard

▼ Speaker ▼

Steve Workman (https://twitter.com/steveworkman).

▼ Event ▼

This talk was filmed at Front-end London in March (http://www.frontendlondon.co.uk/archive).

▼ Transcript ▼

http://bit.ly/2amXO1D

▼ Video by Pusher ▼

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications.

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure.

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more.

Getting started takes just a few seconds: simply go to https://pusher.com and create a free account. Happy hacking!

▼ More from Pusher ▼

Subscribe to Pusher: https://www.youtube.com/c/pusherrealtime?sub_confirmation=1
Front-end London playlist: https://www.youtube.com/playlist?list=PL8xuokhAnn4pZ6tAyFobOcUrLI2MNKZbU
Captions: 
	00:00:06,169 --> 00:00:11,879
my name is steve i'm the head of web

00:00:08,879 --> 00:00:14,219
engineering yell or y'all calm you may

00:00:11,879 --> 00:00:16,920
have seen we've dumped some piece of

00:00:14,219 --> 00:00:21,949
paper on your doorstep recently do you

00:00:16,920 --> 00:00:26,039
read them they're wonderful but I

00:00:21,949 --> 00:00:27,810
imagined Ultraman girl calm and over the

00:00:26,039 --> 00:00:30,480
last few years we've had a horrible such

00:00:27,810 --> 00:00:32,250
kind of time with changing names and

00:00:30,480 --> 00:00:33,329
identities and stuff but we're we're

00:00:32,250 --> 00:00:35,370
getting better and one of the things

00:00:33,329 --> 00:00:36,930
about getting better as we get a time to

00:00:35,370 --> 00:00:39,390
come occasionally reinvent ourselves and

00:00:36,930 --> 00:00:42,180
over the last year or so we've I think

00:00:39,390 --> 00:00:44,840
we've managed to do that anyway this is

00:00:42,180 --> 00:00:48,980
about HTTPS something that should be

00:00:44,840 --> 00:00:53,220
incredibly easy but really really isn't

00:00:48,980 --> 00:00:55,140
so I start the story at London web

00:00:53,220 --> 00:00:58,170
standards that event that myself and

00:00:55,140 --> 00:00:59,910
Dave in the front help to run and walk

00:00:58,170 --> 00:01:02,070
people running this for years now but I

00:00:59,910 --> 00:01:04,290
was talking to Dan Apple quest who's the

00:01:02,070 --> 00:01:07,170
co hair of the tag their tech

00:01:04,290 --> 00:01:09,990
architecture group of the w3c and he

00:01:07,170 --> 00:01:12,510
just given a talk on web security

00:01:09,990 --> 00:01:13,890
privileged features HTTPS and we were in

00:01:12,510 --> 00:01:15,780
the pub and not saying what we'll put on

00:01:13,890 --> 00:01:17,159
the other calm is a directory service we

00:01:15,780 --> 00:01:19,890
literally we mail you all of this

00:01:17,159 --> 00:01:24,770
information why do we actually need to

00:01:19,890 --> 00:01:27,240
be on HTTPS and Dan basically told me

00:01:24,770 --> 00:01:28,500
think about all the queries that your

00:01:27,240 --> 00:01:30,540
users actually putting through this

00:01:28,500 --> 00:01:33,270
website they're searching for legal

00:01:30,540 --> 00:01:35,280
counsel family planning clinics as well

00:01:33,270 --> 00:01:39,020
as regular plumbers hairdressers schools

00:01:35,280 --> 00:01:42,510
anything all sorts of private and local

00:01:39,020 --> 00:01:44,130
identifiable information if I was kind

00:01:42,510 --> 00:01:46,200
of a hacker interested in intercepting

00:01:44,130 --> 00:01:49,920
your traffic I could find out an awful

00:01:46,200 --> 00:01:52,020
lot of stuff about and that's scary

00:01:49,920 --> 00:01:53,490
that's really scary that that's what

00:01:52,020 --> 00:01:55,350
absolutely got it got me here so I'm

00:01:53,490 --> 00:01:57,540
thinking yeah you're right that all this

00:01:55,350 --> 00:01:59,340
stuff is stuff that we shouldn't you

00:01:57,540 --> 00:02:03,689
know it should be secure the whole web

00:01:59,340 --> 00:02:05,040
should be secure and these said carried

00:02:03,689 --> 00:02:06,450
on saying Google is really pushing on

00:02:05,040 --> 00:02:08,939
this it's now a search engine ranking

00:02:06,450 --> 00:02:10,890
factor and if I'm selling it to my boss

00:02:08,939 --> 00:02:13,680
which I then the next morning go went

00:02:10,890 --> 00:02:17,010
and did this is what your major on

00:02:13,680 --> 00:02:19,480
because obviously so eighty-five percent

00:02:17,010 --> 00:02:24,409
yells traffic comes from google

00:02:19,480 --> 00:02:27,349
ridiculously high like that so if any

00:02:24,409 --> 00:02:28,670
sort of google SEO ranking is really

00:02:27,349 --> 00:02:34,159
really important to us so who's his

00:02:28,670 --> 00:02:36,290
website is on https two hands that's not

00:02:34,159 --> 00:02:38,659
that's not too bad actually how many are

00:02:36,290 --> 00:02:43,639
they moving or in the process of a

00:02:38,659 --> 00:02:45,290
transition half one half okay and how

00:02:43,639 --> 00:02:47,239
many are just going to stay stolidly on

00:02:45,290 --> 00:02:50,389
HTTP because it's good and everyone

00:02:47,239 --> 00:02:59,599
still can use it says some people

00:02:50,389 --> 00:03:01,700
missing I mean how hard can this be so

00:02:59,599 --> 00:03:03,919
this is how I started thinking yeah

00:03:01,700 --> 00:03:05,870
right I'm in engineering I'm going to

00:03:03,919 --> 00:03:08,510
talk to my product people what's my part

00:03:05,870 --> 00:03:10,250
of people they're very lovely people I'm

00:03:08,510 --> 00:03:11,450
going to talk to security and I'm going

00:03:10,250 --> 00:03:13,239
to talk to operations and you'll notice

00:03:11,450 --> 00:03:16,639
at the bottom here there was a bar

00:03:13,239 --> 00:03:23,000
starting January it goes on a long way

00:03:16,639 --> 00:03:25,159
this is 2015 so okay so we had to start

00:03:23,000 --> 00:03:27,889
so I so you start what you normally

00:03:25,159 --> 00:03:30,079
think you do you take a we have a so

00:03:27,889 --> 00:03:33,199
yellow comes an application is 20 years

00:03:30,079 --> 00:03:35,030
old it is ever so slightly older than

00:03:33,199 --> 00:03:38,060
The Guardian its first domain name was

00:03:35,030 --> 00:03:40,400
iyp the internet yellow pages so I eyp

00:03:38,060 --> 00:03:44,449
the end electronic killer pages which

00:03:40,400 --> 00:03:46,180
switch to yell comp in the year 2000 so

00:03:44,449 --> 00:03:48,259
yes it's older than The Guardian and

00:03:46,180 --> 00:03:49,970
because i was talking about Raquel only

00:03:48,259 --> 00:03:52,069
the public as well it was always very

00:03:49,970 --> 00:03:55,400
nice to say that we got to https before

00:03:52,069 --> 00:03:59,419
the Guardian even though he moved on so

00:03:55,400 --> 00:04:01,879
we it's a very very very old website and

00:03:59,419 --> 00:04:05,060
it's very that there are layers and

00:04:01,879 --> 00:04:08,359
layers and layers of applications you

00:04:05,060 --> 00:04:09,979
eyes your eyes servers load balancers

00:04:08,359 --> 00:04:12,319
all sorts of things that you find on a

00:04:09,979 --> 00:04:16,639
very large product and production

00:04:12,319 --> 00:04:19,940
website so when you're moving to HTTPS

00:04:16,639 --> 00:04:21,829
you start local you start at home you

00:04:19,940 --> 00:04:23,750
take your development environment that's

00:04:21,829 --> 00:04:26,810
sat on my laptop that very laptop there

00:04:23,750 --> 00:04:30,139
and I go okay I'm going to make a

00:04:26,810 --> 00:04:32,210
certificate so i start up open i started

00:04:30,139 --> 00:04:33,200
over the cell and i started generate

00:04:32,210 --> 00:04:36,230
myself as self

00:04:33,200 --> 00:04:37,460
signed certificate okay that's not that

00:04:36,230 --> 00:04:39,170
hard there's loads of guides on the

00:04:37,460 --> 00:04:41,870
internet there's some very very useful

00:04:39,170 --> 00:04:45,590
ones about getting the green padlock on

00:04:41,870 --> 00:04:47,150
OSX about actually taking some

00:04:45,590 --> 00:04:48,800
properties and putting it into a

00:04:47,150 --> 00:04:50,300
pleasure cell and generating that and

00:04:48,800 --> 00:04:53,480
installing it on apache and what the

00:04:50,300 --> 00:04:55,340
best ones is the mozilla a cell

00:04:53,480 --> 00:05:00,230
configuration data you quite literally

00:04:55,340 --> 00:05:01,700
you put in patchy it's kind of old and I

00:05:00,230 --> 00:05:03,110
want all these things and it literally

00:05:01,700 --> 00:05:06,800
generates you all the different things

00:05:03,110 --> 00:05:09,740
you will need in order to be on in order

00:05:06,800 --> 00:05:12,380
to get that green padlock and then later

00:05:09,740 --> 00:05:19,040
that day hooray it's working and when

00:05:12,380 --> 00:05:21,770
HTTPS it took me a day not quite so yes

00:05:19,040 --> 00:05:25,670
it's running locally on HTTPS and it's

00:05:21,770 --> 00:05:30,770
secure wonderful does it work no of

00:05:25,670 --> 00:05:32,120
course it doesn't so you then just kind

00:05:30,770 --> 00:05:33,980
of go through and look at what breaks

00:05:32,120 --> 00:05:37,040
you want HTTPS you look at what breaks

00:05:33,980 --> 00:05:39,170
so the first things we looked at adobe

00:05:37,040 --> 00:05:40,160
analytics which is some of the analytics

00:05:39,170 --> 00:05:42,290
provider you may have heard a bomb

00:05:40,160 --> 00:05:44,000
mature older version of that it's there

00:05:42,290 --> 00:05:47,960
are alternatives google analytics this

00:05:44,000 --> 00:05:50,570
is one of them all of our efforts they

00:05:47,960 --> 00:05:53,420
broke no great loss though people did

00:05:50,570 --> 00:05:57,080
complain our entire review section that

00:05:53,420 --> 00:05:59,390
broke and finally a lot of URLs can

00:05:57,080 --> 00:06:01,730
alter URLs and everything else so

00:05:59,390 --> 00:06:04,370
basically you have a website that

00:06:01,730 --> 00:06:06,860
doesn't work but it's on HTTPS you've

00:06:04,370 --> 00:06:08,200
got to make sure it's my HTTPS it's not

00:06:06,860 --> 00:06:11,480
really as easy as just kind of

00:06:08,200 --> 00:06:13,070
shoehorning the s into the URLs there

00:06:11,480 --> 00:06:15,920
strangely there she solved most of the

00:06:13,070 --> 00:06:19,010
problems if you then I went through the

00:06:15,920 --> 00:06:20,750
entirety of the the website and put an s

00:06:19,010 --> 00:06:22,910
into most most of the URLs and they've

00:06:20,750 --> 00:06:25,370
worked because it's all on the same

00:06:22,910 --> 00:06:28,010
domain and there's no awkward subdomains

00:06:25,370 --> 00:06:30,740
for a lot of things and he just worked

00:06:28,010 --> 00:06:34,220
and that was great except for the

00:06:30,740 --> 00:06:37,010
following exception our advertising

00:06:34,220 --> 00:06:42,230
network so arrived network we use our

00:06:37,010 --> 00:06:43,870
tech aol's ad tech service they can

00:06:42,230 --> 00:06:46,249
easily serve their scripts over https

00:06:43,870 --> 00:06:48,109
one of my eye

00:06:46,249 --> 00:06:50,719
and talk to our advertising manager he

00:06:48,109 --> 00:06:52,189
was in the building very nice guy and he

00:06:50,719 --> 00:06:53,599
gave me access to the documentation

00:06:52,189 --> 00:06:58,639
which of course is behind the username

00:06:53,599 --> 00:07:01,159
password don't know why and that then I

00:06:58,639 --> 00:07:03,199
dug through that found that ok you just

00:07:01,159 --> 00:07:05,959
change this bit of the request script

00:07:03,199 --> 00:07:08,539
and then it comes over HTTPS yeah great

00:07:05,959 --> 00:07:11,059
so hey at Tech is being served over

00:07:08,539 --> 00:07:17,209
HTTPS our example it's being served over

00:07:11,059 --> 00:07:19,069
HTTPS no course they're not yeah so

00:07:17,209 --> 00:07:24,789
there's this problem with the

00:07:19,069 --> 00:07:27,110
advertising industry and the IAB notice

00:07:24,789 --> 00:07:29,119
so apparently eighty percent of it

00:07:27,110 --> 00:07:32,839
sports https so the major players

00:07:29,119 --> 00:07:34,689
double-click Ad Tech and a lot of a lot

00:07:32,839 --> 00:07:37,610
of the Earth's they do support it

00:07:34,689 --> 00:07:41,929
however they they realize they mess up

00:07:37,610 --> 00:07:45,139
when in iOS 9 when it introduced ad

00:07:41,929 --> 00:07:47,449
blocking they they quickly issued a

00:07:45,139 --> 00:07:50,029
statement which is basically guys you

00:07:47,449 --> 00:07:51,289
don't like these adverts we get it they

00:07:50,029 --> 00:07:54,529
are terrible for your web performance

00:07:51,289 --> 00:07:57,079
and so we're going to do better we are

00:07:54,529 --> 00:07:59,899
going to serve lean advert light

00:07:57,079 --> 00:08:03,889
encrypted actually supported meaning

00:07:59,899 --> 00:08:06,529
that they do follow they can follow you

00:08:03,889 --> 00:08:08,539
around that you can tell them not to and

00:08:06,529 --> 00:08:11,679
non-invasive so all these modular

00:08:08,539 --> 00:08:16,459
popovers these things these will go away

00:08:11,679 --> 00:08:18,769
and that's a really really big thing so

00:08:16,459 --> 00:08:22,179
when we actually first launched https

00:08:18,769 --> 00:08:25,879
occasionally you get a blank 300 by 250

00:08:22,179 --> 00:08:27,649
block box because didn't work because

00:08:25,879 --> 00:08:31,669
that particular that was not served over

00:08:27,649 --> 00:08:34,759
https luckily for us yells yells revenue

00:08:31,669 --> 00:08:37,129
is not from that take major publishers

00:08:34,759 --> 00:08:39,289
guardian and such this is a much bigger

00:08:37,129 --> 00:08:40,519
problem for them because that's where

00:08:39,289 --> 00:08:43,909
the revenue comes from and they can't

00:08:40,519 --> 00:08:46,309
just shut even twenty percent out so

00:08:43,909 --> 00:08:48,160
lucky for us we could continue however I

00:08:46,309 --> 00:08:53,509
have had to talk to all of these people

00:08:48,160 --> 00:08:57,379
this is growing it is now middle of

00:08:53,509 --> 00:08:59,690
februari so the next one I talked to

00:08:57,379 --> 00:09:01,880
adobe analytics now Google Analytics

00:08:59,690 --> 00:09:05,480
just works they've supports https for a

00:09:01,880 --> 00:09:06,890
very long time so of adobe of course but

00:09:05,480 --> 00:09:09,320
obviously we didn't have it configured

00:09:06,890 --> 00:09:11,510
that way why would we we're on HTTP so

00:09:09,320 --> 00:09:14,870
me we made it work with HTTP so we had

00:09:11,510 --> 00:09:16,880
to contact Adobe and to do that I had to

00:09:14,870 --> 00:09:18,980
find out who in the company was in Adobe

00:09:16,880 --> 00:09:22,010
administrator it wasn't me or anyone in

00:09:18,980 --> 00:09:24,860
my department when everyone in this

00:09:22,010 --> 00:09:27,950
country actually at find who they were

00:09:24,860 --> 00:09:30,350
and I had to get onto Adobe support and

00:09:27,950 --> 00:09:33,380
then I had to send him an email they

00:09:30,350 --> 00:09:35,900
sent me back a request and they enabled

00:09:33,380 --> 00:09:38,810
first-party domains for us after we'd

00:09:35,900 --> 00:09:44,810
sent them a certificate which was very

00:09:38,810 --> 00:09:46,910
nice of them and we also at the same

00:09:44,810 --> 00:09:49,700
time very very cautiously updated to the

00:09:46,910 --> 00:09:52,070
latest version of their tracking script

00:09:49,700 --> 00:09:54,740
and now people who have google analytics

00:09:52,070 --> 00:09:58,460
this is not a problem for them but um

00:09:54,740 --> 00:10:02,240
i'm sure adobe analytics at you host the

00:09:58,460 --> 00:10:05,690
script and therefore ye are responsible

00:10:02,240 --> 00:10:08,060
for updating it ours was 23 years out of

00:10:05,690 --> 00:10:10,730
date and considering that this is where

00:10:08,060 --> 00:10:12,560
all of the value actually is because

00:10:10,730 --> 00:10:15,830
they yell does is we supply at the time

00:10:12,560 --> 00:10:17,480
advert and we tell the small businesses

00:10:15,830 --> 00:10:21,470
of this world how well that Abbott is

00:10:17,480 --> 00:10:24,140
doing this is the the call so it

00:10:21,470 --> 00:10:27,500
actually took me until just start of

00:10:24,140 --> 00:10:29,420
April to get this through after very

00:10:27,500 --> 00:10:34,010
cautiously as I said updating to the

00:10:29,420 --> 00:10:35,390
latest version of vomit sure but also we

00:10:34,010 --> 00:10:37,070
had a few other little benefits out of

00:10:35,390 --> 00:10:39,410
that I shouldn't think I shaved about

00:10:37,070 --> 00:10:44,420
100 milliseconds off each request that

00:10:39,410 --> 00:10:47,000
was a lot of Rama nice but once again

00:10:44,420 --> 00:10:50,960
time has eaten it has just gone I

00:10:47,000 --> 00:10:52,460
started out over here and I'm still not

00:10:50,960 --> 00:10:55,010
finished I've not even got through that

00:10:52,460 --> 00:10:56,600
the majority of the problems yet and

00:10:55,010 --> 00:11:00,050
it's now equal and time is just

00:10:56,600 --> 00:11:02,839
disappeared and then of course well

00:11:00,050 --> 00:11:04,720
there's this other system in 2010 we

00:11:02,839 --> 00:11:08,710
bought a company called trusted places

00:11:04,720 --> 00:11:08,710
anyone ever heard of trusted places

00:11:09,199 --> 00:11:19,459
used to use it decl reviewthe there

00:11:13,229 --> 00:11:19,459
there we go don't worry no one else does

00:11:20,179 --> 00:11:25,799
the review system we have a Java stack

00:11:23,819 --> 00:11:27,629
the review system was written in PHP we

00:11:25,799 --> 00:11:30,179
don't have any PHP developers how does

00:11:27,629 --> 00:11:33,149
that work um in 2010 we we replaced

00:11:30,179 --> 00:11:35,339
sorry not in 2010 in December we

00:11:33,149 --> 00:11:36,989
actually replace the entire system with

00:11:35,339 --> 00:11:38,939
a fast one that means you reviews I

00:11:36,989 --> 00:11:43,439
should got published in 30 minutes sorry

00:11:38,939 --> 00:11:46,259
no in 30 seconds not 30 minutes so

00:11:43,439 --> 00:11:49,429
there's a we replaced a lot of legacy I

00:11:46,259 --> 00:11:51,269
had to do a lot of duplication there a

00:11:49,429 --> 00:11:53,249
duplication of effort it's one of those

00:11:51,269 --> 00:11:56,309
things every system is going to have one

00:11:53,249 --> 00:11:59,609
of those things this one component that

00:11:56,309 --> 00:12:02,249
is completely unloved and that you just

00:11:59,609 --> 00:12:04,049
can't update or you don't know how to

00:12:02,249 --> 00:12:06,269
update or that hasn't been deployed for

00:12:04,049 --> 00:12:10,919
years no I don't have a deployment

00:12:06,269 --> 00:12:13,859
script for it OnEarth happens so every

00:12:10,919 --> 00:12:15,539
everyone has one of those you have to

00:12:13,859 --> 00:12:18,839
live with it there's there's no easy way

00:12:15,539 --> 00:12:22,949
I mean there is no easy way to do https

00:12:18,839 --> 00:12:24,959
with such a large website it accepts

00:12:22,949 --> 00:12:27,209
unless you keep going so I kept going

00:12:24,959 --> 00:12:28,979
and then of course so I've only

00:12:27,209 --> 00:12:31,409
currently got a local certificate which

00:12:28,979 --> 00:12:33,689
is a self-signed certificate if you try

00:12:31,409 --> 00:12:37,679
and visit that in a web browser you

00:12:33,689 --> 00:12:39,449
basically get bad and that of course is

00:12:37,679 --> 00:12:41,749
no good don't one's going to trust that

00:12:39,449 --> 00:12:43,769
you get a big message in your screen

00:12:41,749 --> 00:12:45,720
there are plenty of other types of

00:12:43,769 --> 00:12:48,769
certificates so there is a what's called

00:12:45,720 --> 00:12:53,339
a DB certificate or domain validated

00:12:48,769 --> 00:12:56,279
they look like that which is on that's a

00:12:53,339 --> 00:12:58,759
message the that's just the padlock or

00:12:56,279 --> 00:13:01,350
its green padlock on other browsers

00:12:58,759 --> 00:13:03,809
these are certificates we can get which

00:13:01,350 --> 00:13:07,739
you can get relatively cheaply let's

00:13:03,809 --> 00:13:10,289
encrypt they do free DD certificates

00:13:07,739 --> 00:13:12,720
start ssl they also do free DV

00:13:10,289 --> 00:13:14,489
certificates the let's encrypt ones on

00:13:12,720 --> 00:13:19,289
much easier to get there you have to

00:13:14,489 --> 00:13:21,939
renew them every four months the the

00:13:19,289 --> 00:13:23,679
thing with the TV sets is

00:13:21,939 --> 00:13:25,359
okay actually there's nothing wrong with

00:13:23,679 --> 00:13:27,369
them there actually isn't anything wrong

00:13:25,359 --> 00:13:30,189
with them but you can go a level higher

00:13:27,369 --> 00:13:33,339
which is extended validation certificate

00:13:30,189 --> 00:13:36,459
now if you have a fuse in chrome firefox

00:13:33,339 --> 00:13:40,479
and you see a browser with one of these

00:13:36,459 --> 00:13:42,579
in it you will see okay that isn't easy

00:13:40,479 --> 00:13:44,199
certificate basically you've gone

00:13:42,579 --> 00:13:47,859
through a whole nother level of

00:13:44,199 --> 00:13:49,839
validation to actually just say yes this

00:13:47,859 --> 00:13:52,389
is definitely me this is the kind of

00:13:49,839 --> 00:13:54,909
market trust you'll notice this is our

00:13:52,389 --> 00:13:56,589
old company name actually but it's the

00:13:54,909 --> 00:13:59,349
name of the company that we used to

00:13:56,589 --> 00:14:02,649
trade under so this one actually that

00:13:59,349 --> 00:14:05,919
this but in order to get our eb

00:14:02,649 --> 00:14:08,199
certificate we had to actually talk to I

00:14:05,919 --> 00:14:10,449
had to talk to my security team again

00:14:08,199 --> 00:14:12,999
who then talked to our legal team had to

00:14:10,449 --> 00:14:16,839
talk to Companies House and adjust the

00:14:12,999 --> 00:14:19,689
names about our DNS registrar so our

00:14:16,839 --> 00:14:21,759
domain name registrar records to then

00:14:19,689 --> 00:14:23,169
make sure that a yell.com one match

00:14:21,759 --> 00:14:27,339
exactly what was in companies house

00:14:23,169 --> 00:14:30,009
otherwise EV suits don't work thankfully

00:14:27,339 --> 00:14:31,299
I didn't have to do this but that's of

00:14:30,009 --> 00:14:33,579
what the kind of stiff Achatz look like

00:14:31,299 --> 00:14:35,229
so you see what said what certificate is

00:14:33,579 --> 00:14:38,019
there that's kind of what it looks like

00:14:35,229 --> 00:14:40,659
it's just a whole bunch of stuff it's

00:14:38,019 --> 00:14:42,369
just there it's so that's actually

00:14:40,659 --> 00:14:47,979
myself sorry one which is why it's up on

00:14:42,369 --> 00:14:50,379
this screen obviously but yeah it

00:14:47,979 --> 00:14:52,720
doesn't it isn't hard it just takes time

00:14:50,379 --> 00:14:56,049
the only reason why it's actually worth

00:14:52,720 --> 00:14:58,329
it is on edge it's the only one that did

00:14:56,049 --> 00:15:01,239
she makes a browser bar go green other

00:14:58,329 --> 00:15:04,539
on edge it it's still it's not actually

00:15:01,239 --> 00:15:07,319
a green yes on exactly how I say it is

00:15:04,539 --> 00:15:09,609
so we spend any extra time doing it and

00:15:07,319 --> 00:15:12,459
now I've talked to all these people and

00:15:09,609 --> 00:15:15,669
it is the middle of May Tom obviously

00:15:12,459 --> 00:15:18,039
keeps passing there are other third

00:15:15,669 --> 00:15:19,689
parties which I'm going to briefly skim

00:15:18,039 --> 00:15:21,459
over though I'll probably come back to

00:15:19,689 --> 00:15:24,729
one of them we have an anti scraping

00:15:21,459 --> 00:15:27,429
tool so yells about using its data we

00:15:24,729 --> 00:15:30,729
have a 2.7 million businesses that

00:15:27,429 --> 00:15:32,289
you're in the UK listed so we get

00:15:30,729 --> 00:15:33,750
scraped all the time so we have an X

00:15:32,289 --> 00:15:38,110
scraping tool

00:15:33,750 --> 00:15:41,440
they sit in front of us and to actually

00:15:38,110 --> 00:15:43,959
do to get an EV suit re be set for them

00:15:41,440 --> 00:15:47,110
we had spent some money for a private IP

00:15:43,959 --> 00:15:48,910
address it's worth it it's just one of

00:15:47,110 --> 00:15:51,370
the things we had to do but also it

00:15:48,910 --> 00:15:54,220
again more people to talk to we also had

00:15:51,370 --> 00:15:55,990
a we have a CDN for hosting videos if

00:15:54,220 --> 00:15:57,670
you've ever looked really closely yellow

00:15:55,990 --> 00:15:59,589
chrome isn't actually host on our CDN or

00:15:57,670 --> 00:16:02,200
in the cloud it's actually a lot of data

00:15:59,589 --> 00:16:08,350
center imagine those you haven't got a

00:16:02,200 --> 00:16:10,660
data center these days and the because

00:16:08,350 --> 00:16:13,510
of because of that that data center

00:16:10,660 --> 00:16:15,630
sorry the CDN is of course Swanson and a

00:16:13,510 --> 00:16:17,500
global contract which we don't control

00:16:15,630 --> 00:16:20,320
therefore we haven't actually been able

00:16:17,500 --> 00:16:23,829
to update it it costs money so have to

00:16:20,320 --> 00:16:26,589
rate to make change requests and we took

00:16:23,829 --> 00:16:30,490
because it's actually run by the US we

00:16:26,589 --> 00:16:32,380
still haven't got there if you look at

00:16:30,490 --> 00:16:36,570
CD any other comp it does not want to

00:16:32,380 --> 00:16:39,450
https we still have not got there nearly

00:16:36,570 --> 00:16:42,610
what 16 months after I've started this

00:16:39,450 --> 00:16:46,570
we're nearly there this one nearly but

00:16:42,610 --> 00:16:49,620
not quite but also that particular house

00:16:46,570 --> 00:16:52,390
doesn't support SNI so s nice technology

00:16:49,620 --> 00:16:55,839
that is Staz the server name

00:16:52,390 --> 00:16:58,600
identification means that on you don't

00:16:55,839 --> 00:17:01,480
have to have a unique IP address for a

00:16:58,600 --> 00:17:06,309
certificate in order to actually use

00:17:01,480 --> 00:17:14,290
HTTPS if you use XP at windows XP he

00:17:06,309 --> 00:17:18,429
uses windows XP awesome no at work okay

00:17:14,290 --> 00:17:20,620
fine I'll let you off you would not be

00:17:18,429 --> 00:17:23,410
able to see this website because it's on

00:17:20,620 --> 00:17:25,480
HTTPS and windows XP does not do this

00:17:23,410 --> 00:17:28,929
that was a surprise i do really didn't

00:17:25,480 --> 00:17:30,460
think anyone would say yes but not

00:17:28,929 --> 00:17:32,530
everyone supports it even though this

00:17:30,460 --> 00:17:36,790
SNI is a technology which is almost a

00:17:32,530 --> 00:17:41,590
decade or so i've talked to quite a few

00:17:36,790 --> 00:17:43,540
people now and it's now gene but of

00:17:41,590 --> 00:17:45,669
course to actually get the money for all

00:17:43,540 --> 00:17:47,320
of this because on this last slide I've

00:17:45,669 --> 00:17:48,789
now spent some money

00:17:47,320 --> 00:17:50,529
my title is head of weather engineering

00:17:48,789 --> 00:17:52,360
at this actually by title have had the

00:17:50,529 --> 00:17:54,940
hello Erin had a web engineering changed

00:17:52,360 --> 00:17:56,320
here nothing really happens until here

00:17:54,940 --> 00:17:58,630
so I didn't I don't have any sort of

00:17:56,320 --> 00:18:00,639
budget or anything like that so I have

00:17:58,630 --> 00:18:03,909
to write a business case whom he says

00:18:00,639 --> 00:18:06,250
has written the business case that's a

00:18:03,909 --> 00:18:08,950
small number of people mostly that all

00:18:06,250 --> 00:18:12,130
the people in the audience as well that

00:18:08,950 --> 00:18:13,690
I mean it's not easy who knows how to

00:18:12,130 --> 00:18:18,580
write a business case or even where to

00:18:13,690 --> 00:18:21,429
start Google yeah they're honestly

00:18:18,580 --> 00:18:23,320
there is no really good stuff about how

00:18:21,429 --> 00:18:24,789
to write business case um well my

00:18:23,320 --> 00:18:27,490
friends from a management consultancy I

00:18:24,789 --> 00:18:28,750
used to work at literally had to he dug

00:18:27,490 --> 00:18:31,179
around and find me some really old

00:18:28,750 --> 00:18:33,250
government guidelines on how to write a

00:18:31,179 --> 00:18:34,779
business case there's really not much

00:18:33,250 --> 00:18:37,509
out there and certainly nothing for

00:18:34,779 --> 00:18:40,000
software devs or for these kind of

00:18:37,509 --> 00:18:41,139
projects this is quite hard a lot of

00:18:40,000 --> 00:18:43,269
people say oh I've got to spend some

00:18:41,139 --> 00:18:45,340
money or I'll have to ask my boss is it

00:18:43,269 --> 00:18:46,539
important for your boss if it's not that

00:18:45,340 --> 00:18:49,929
probably won't waste their time and

00:18:46,539 --> 00:18:53,740
that's where you get stuck this took

00:18:49,929 --> 00:18:56,710
months I won't just leave it at that it

00:18:53,740 --> 00:18:59,039
took months had to get signed off you

00:18:56,710 --> 00:19:03,429
had to go to the investors all things

00:18:59,039 --> 00:19:05,409
madness absolute madness but we're now

00:19:03,429 --> 00:19:08,169
with nearly life okay with nearly there

00:19:05,409 --> 00:19:09,580
it is a middle of July and now people

00:19:08,169 --> 00:19:11,529
have suddenly thought old on this is

00:19:09,580 --> 00:19:13,600
actually going to happen see if not just

00:19:11,529 --> 00:19:15,460
mad it's not just kind of on this little

00:19:13,600 --> 00:19:19,570
crusade on his own he's actually going

00:19:15,460 --> 00:19:21,250
to do this and so people said okay well

00:19:19,570 --> 00:19:25,000
we have some concerns about performance

00:19:21,250 --> 00:19:28,919
is TLS fast yet yeah course is it is

00:19:25,000 --> 00:19:31,750
fast it is this entire website about it

00:19:28,919 --> 00:19:36,250
going me that if you need any kind of

00:19:31,750 --> 00:19:37,809
evidence about it we agreed to terminate

00:19:36,250 --> 00:19:40,090
the connection as close to the edge of

00:19:37,809 --> 00:19:42,639
the network as possible now I've already

00:19:40,090 --> 00:19:44,169
described RIT scraping that's a man in

00:19:42,639 --> 00:19:49,240
the middle if literally it sits in front

00:19:44,169 --> 00:19:51,039
of us now I wasn't willing to say okay

00:19:49,240 --> 00:19:52,000
we have data center we have men the

00:19:51,039 --> 00:19:54,429
middle which is in a different data

00:19:52,000 --> 00:19:56,830
center the traffic between those two

00:19:54,429 --> 00:20:00,159
would have to go over a public network

00:19:56,830 --> 00:20:02,529
that wasn't something I wanted to do so

00:20:00,159 --> 00:20:05,860
we terminate the network connection

00:20:02,529 --> 00:20:07,929
twice once at our antics great and then

00:20:05,860 --> 00:20:09,690
it rien crypts it and then it comes back

00:20:07,929 --> 00:20:11,769
to us and then we you decrypt it again

00:20:09,690 --> 00:20:13,559
there's a performance penalty for that

00:20:11,769 --> 00:20:15,370
and I'll show you exactly what that is

00:20:13,559 --> 00:20:19,029
but there is a performance penalty

00:20:15,370 --> 00:20:20,350
anyway and get to it but of course we

00:20:19,029 --> 00:20:22,390
have our load balancer so we had to make

00:20:20,350 --> 00:20:26,380
sure that was up to date this actually

00:20:22,390 --> 00:20:30,250
happened in March we flip switch to put

00:20:26,380 --> 00:20:32,529
that live in the early July because our

00:20:30,250 --> 00:20:34,419
load balancer being you know 20 years

00:20:32,529 --> 00:20:38,710
old it says Citrix and citrix netscaler

00:20:34,419 --> 00:20:42,070
if you're really interested the we were

00:20:38,710 --> 00:20:43,299
on to 19.5 we updates 10.5 I thought oh

00:20:42,070 --> 00:20:48,190
look there's a button though that's a

00:20:43,299 --> 00:20:51,850
speedy ticket everything fails on ticket

00:20:48,190 --> 00:20:55,210
quite quickly so we made sure everything

00:20:51,850 --> 00:20:56,950
was up to date and the modern stuff if

00:20:55,210 --> 00:20:59,799
you are doing actually two Bs you've got

00:20:56,950 --> 00:21:01,419
to be on monster openssl and its

00:20:59,799 --> 00:21:04,409
performance for decrypting especially

00:21:01,419 --> 00:21:06,789
they're stronger elliptical curve

00:21:04,409 --> 00:21:10,389
ciphers you've really got to have a

00:21:06,789 --> 00:21:12,909
modern version 101 or 102 in order to

00:21:10,389 --> 00:21:16,510
actually get enough performance for it

00:21:12,909 --> 00:21:18,490
to not actually be a problem for you but

00:21:16,510 --> 00:21:20,110
of course people said well we'll have to

00:21:18,490 --> 00:21:22,720
wait and see so okay we'll see we'll

00:21:20,110 --> 00:21:25,059
exactly see we use associate samples

00:21:22,720 --> 00:21:27,370
tool to martyr be of use of measurement

00:21:25,059 --> 00:21:29,440
at real use of measurement timings and

00:21:27,370 --> 00:21:30,970
we said okay one monitor it and we'll

00:21:29,440 --> 00:21:34,179
see and we'll make performs two weeks

00:21:30,970 --> 00:21:37,659
afterwards so before the button push

00:21:34,179 --> 00:21:41,740
I've talked to all of these people and

00:21:37,659 --> 00:21:46,299
it's July and we finally reach the big

00:21:41,740 --> 00:21:48,159
day 31st of july 2015 you press the

00:21:46,299 --> 00:21:49,510
button but on that big day we had to do

00:21:48,159 --> 00:21:52,600
all the following things because they

00:21:49,510 --> 00:21:58,090
don't work on HTTPS and HTTP we have to

00:21:52,600 --> 00:22:01,210
update our site map 10 million links our

00:21:58,090 --> 00:22:02,980
robots.txt file much smaller google

00:22:01,210 --> 00:22:04,960
search console console or webmaster

00:22:02,980 --> 00:22:06,279
tools are used to be better make sure

00:22:04,960 --> 00:22:07,480
you register the property and that

00:22:06,279 --> 00:22:08,679
you're tracking everything otherwise

00:22:07,480 --> 00:22:09,639
Helmuth you know what's actually going

00:22:08,679 --> 00:22:11,829
on

00:22:09,639 --> 00:22:13,899
then actually set up our redirects so if

00:22:11,829 --> 00:22:15,369
you have actually tpn https when we did

00:22:13,899 --> 00:22:18,399
actually have them running side by side

00:22:15,369 --> 00:22:20,829
for a couple of weeks unless you're

00:22:18,399 --> 00:22:24,729
actually be directing people to https no

00:22:20,829 --> 00:22:26,799
one's going to go there google has you

00:22:24,729 --> 00:22:31,809
will have 18 million search results for

00:22:26,799 --> 00:22:35,229
us and those are all HTTP so we had top

00:22:31,809 --> 00:22:38,429
dataman somehow and Google will will get

00:22:35,229 --> 00:22:41,709
there I'll show you a graph in a minute

00:22:38,429 --> 00:22:44,700
so you have to redirect and you have to

00:22:41,709 --> 00:22:46,989
do what's known as a HTTP 301 redirect

00:22:44,700 --> 00:22:50,049
which is a permanent redirect literally

00:22:46,989 --> 00:22:51,909
we have gone from HTTP to HTTPS and you

00:22:50,049 --> 00:22:55,299
have to do this for every URL and every

00:22:51,909 --> 00:22:56,799
single one of them if you do a three or

00:22:55,299 --> 00:22:58,269
two which is a normal kind of redirect

00:22:56,799 --> 00:23:00,369
if you're doing a PHP like service I'd

00:22:58,269 --> 00:23:01,659
redirect or any of that that will

00:23:00,369 --> 00:23:03,940
normally do a temporary redirect which

00:23:01,659 --> 00:23:05,349
the 302 that isn't good enough you have

00:23:03,940 --> 00:23:06,969
two or three or one which you have to

00:23:05,349 --> 00:23:09,459
configure the netscaler so I had to

00:23:06,969 --> 00:23:13,079
learn all the netscaler rules anyway I

00:23:09,459 --> 00:23:19,899
press the button and no one died

00:23:13,079 --> 00:23:24,009
thankfully no one died so after I'd so

00:23:19,899 --> 00:23:29,019
it's that August now what do you think

00:23:24,009 --> 00:23:33,009
was the actual benefits of doing this so

00:23:29,019 --> 00:23:34,950
what did we actually gain any bets in

00:23:33,009 --> 00:23:42,309
kind of search engine kind of average

00:23:34,950 --> 00:23:46,929
placement ranking any bets no no one's

00:23:42,309 --> 00:23:49,589
even wants to hazard a guess no no not

00:23:46,929 --> 00:24:00,539
further down there's some decadent

00:23:49,589 --> 00:24:00,539
naught point two places so worth it we

00:24:01,680 --> 00:24:07,330
nor point two places over so there was

00:24:05,650 --> 00:24:09,430
this crazy thing my google updates their

00:24:07,330 --> 00:24:11,770
algorithm then we did a massive relaunch

00:24:09,430 --> 00:24:13,960
literally 14 days later we only have

00:24:11,770 --> 00:24:15,520
like two weeks at two maybe a week's

00:24:13,960 --> 00:24:18,400
worth of data we can actually say this

00:24:15,520 --> 00:24:21,150
is exactly what HTTPS did and so it was

00:24:18,400 --> 00:24:26,460
only for only nor plenty places for the

00:24:21,150 --> 00:24:26,460
URLs that got updated during that week

00:24:26,580 --> 00:24:33,880
which are our most popular URL so that's

00:24:28,900 --> 00:24:36,820
okay anyway so that trunk into less than

00:24:33,880 --> 00:24:41,170
2% click through but deeper sense

00:24:36,820 --> 00:24:44,290
actually quite good I mean that's the

00:24:41,170 --> 00:24:46,420
thing right this HTTPS from ranking

00:24:44,290 --> 00:24:51,010
google has made so much about this SEO

00:24:46,420 --> 00:24:53,440
ranking that it's got blown out of all

00:24:51,010 --> 00:24:57,700
proportion it's described as a tie break

00:24:53,440 --> 00:25:01,630
a tie break so what this means is if all

00:24:57,700 --> 00:25:03,190
else is equal age to be on HTTPS and the

00:25:01,630 --> 00:25:07,230
other guy isn't we'll put you above it

00:25:03,190 --> 00:25:11,590
that's it the correlation factor between

00:25:07,230 --> 00:25:13,300
ranking and ranking and HTTPS is naught

00:25:11,590 --> 00:25:17,170
point naught for friend if anyone who

00:25:13,300 --> 00:25:18,490
does math that's like a that maybe maybe

00:25:17,170 --> 00:25:21,660
it's not exactly a direct correlation

00:25:18,490 --> 00:25:25,060
which is one nor it's about there ah

00:25:21,660 --> 00:25:29,410
nothing absolutely nothing we did it

00:25:25,060 --> 00:25:32,440
anyway so this is over time how google

00:25:29,410 --> 00:25:35,830
indexed us as a percentage of the total

00:25:32,440 --> 00:25:39,310
number of pages that is the seventh of

00:25:35,830 --> 00:25:42,880
februari this year 2016 and that is when

00:25:39,310 --> 00:25:45,850
we launched a first week of august it is

00:25:42,880 --> 00:25:49,870
google is still indexing us after all

00:25:45,850 --> 00:25:53,080
this time still going because there's so

00:25:49,870 --> 00:25:55,150
much and honor to take a large site over

00:25:53,080 --> 00:25:57,640
this journey it does take a very long

00:25:55,150 --> 00:26:00,340
time so that not point to is literally

00:25:57,640 --> 00:26:03,240
there aren't that many pages that was

00:26:00,340 --> 00:26:03,240
the ranking booster

00:26:04,270 --> 00:26:12,650
am i over yet no cool thanks so what

00:26:10,640 --> 00:26:16,550
else went wrong I suppose is the

00:26:12,650 --> 00:26:19,160
question as I said earlier our java is

00:26:16,550 --> 00:26:21,280
our stack now we have a slightly older

00:26:19,160 --> 00:26:23,990
version of Java than we'd like to have

00:26:21,280 --> 00:26:26,990
and it occasionally just stopped sending

00:26:23,990 --> 00:26:28,690
requests the next monday i got ins and

00:26:26,990 --> 00:26:30,980
someone said Steve no one can make a

00:26:28,690 --> 00:26:34,570
make this protocol premium listings

00:26:30,980 --> 00:26:36,530
anymore it just doesn't work ok great

00:26:34,570 --> 00:26:40,280
how's how's that my problem because

00:26:36,530 --> 00:26:43,550
there's a request to http in Java Java

00:26:40,280 --> 00:26:45,260
doesn't have Trustwave who is the is our

00:26:43,550 --> 00:26:47,060
certificate provider it doesn't have

00:26:45,260 --> 00:26:50,690
trust wait its root certificate in its

00:26:47,060 --> 00:26:55,070
key store this these words mean nothing

00:26:50,690 --> 00:26:58,460
to most of you but literally the request

00:26:55,070 --> 00:27:00,080
just failed completely silently until

00:26:58,460 --> 00:27:06,320
someone noticed because they couldn't do

00:27:00,080 --> 00:27:10,580
stuff we java did include this in

00:27:06,320 --> 00:27:13,490
version 7 ish but you upgrading java

00:27:10,580 --> 00:27:14,960
wholesale will take us just as long as

00:27:13,490 --> 00:27:17,000
this project if not more and we'll take

00:27:14,960 --> 00:27:20,840
the entire engineering team to do it not

00:27:17,000 --> 00:27:23,180
just me so it's basically simpler to

00:27:20,840 --> 00:27:28,300
install the missing cas however a

00:27:23,180 --> 00:27:32,630
massive pro tip always keep an on https

00:27:28,300 --> 00:27:34,640
internal virtual IP always keep one

00:27:32,630 --> 00:27:36,830
around because someone or something

00:27:34,640 --> 00:27:41,720
we'll need it something will just say no

00:27:36,830 --> 00:27:44,690
I don't do HTTPS and it will fail so

00:27:41,720 --> 00:27:47,060
always keep one around and make sure you

00:27:44,690 --> 00:27:49,550
can do something with it and now on to

00:27:47,060 --> 00:27:52,880
performance so we could measure this

00:27:49,550 --> 00:27:56,450
instantly right we can measure exactly

00:27:52,880 --> 00:28:00,380
how long the TCP request and the SSL

00:27:56,450 --> 00:28:02,570
handshake take then the navigation time

00:28:00,380 --> 00:28:05,090
the API version 2 which is supported by

00:28:02,570 --> 00:28:08,570
basically chrome and a few others now

00:28:05,090 --> 00:28:10,430
since this actually gives you this at a

00:28:08,570 --> 00:28:14,930
network level and reports it back to our

00:28:10,430 --> 00:28:16,610
rom tool any guesses on how much time at

00:28:14,930 --> 00:28:20,210
at the median

00:28:16,610 --> 00:28:25,250
so for fifty percent of our traffic how

00:28:20,210 --> 00:28:32,270
much time it added 200 any further

00:28:25,250 --> 00:28:34,850
advance on 202 thank you no in fact it

00:28:32,270 --> 00:28:37,490
was only a hundred milliseconds at

00:28:34,850 --> 00:28:39,799
median but this is the graph this is the

00:28:37,490 --> 00:28:41,840
50 median this is the ninety-five

00:28:39,799 --> 00:28:43,820
percent so five percent of our users

00:28:41,840 --> 00:28:47,330
that the spell slowest five percent are

00:28:43,820 --> 00:28:48,620
there and that's on desktop browsers

00:28:47,330 --> 00:28:50,990
because we are able to at least a

00:28:48,620 --> 00:28:52,130
segment them what about smartphones I'm

00:28:50,990 --> 00:28:58,280
not going to let you guess on this one

00:28:52,130 --> 00:29:01,100
it's awful two seconds two

00:28:58,280 --> 00:29:02,840
seconds at the 95th percentile and a

00:29:01,100 --> 00:29:05,270
good two hundred fifty seconds at the

00:29:02,840 --> 00:29:07,190
fifty percent and I bet that's pretty

00:29:05,270 --> 00:29:12,799
much everyone on Wi-Fi rather than on

00:29:07,190 --> 00:29:19,040
mobile networks HTTPS is fast it is not

00:29:12,799 --> 00:29:21,500
free it can add a lot to your initial

00:29:19,040 --> 00:29:25,549
render time now I made the post

00:29:21,500 --> 00:29:26,600
yesterday and Ilya Grigori who's who

00:29:25,549 --> 00:29:29,000
wrote high-performance browser

00:29:26,600 --> 00:29:30,470
networking which is what I then actually

00:29:29,000 --> 00:29:32,600
went away it took the book off my shelf

00:29:30,470 --> 00:29:35,390
and I sat down with the netscaler

00:29:32,600 --> 00:29:37,460
documentation and I went through it and

00:29:35,390 --> 00:29:41,000
I tried to update it and try to get

00:29:37,460 --> 00:29:43,480
things right he then basically in 10

00:29:41,000 --> 00:29:47,990
minutes posted a forensic examination of

00:29:43,480 --> 00:29:49,010
yokum's tcp infrastructure and pointed

00:29:47,990 --> 00:29:52,400
out all the different things we were

00:29:49,010 --> 00:29:55,730
doing wrong I hope it's made the blog

00:29:52,400 --> 00:29:59,540
post is incredible unfortunately our

00:29:55,730 --> 00:30:01,429
problem here actually is the ant escape

00:29:59,540 --> 00:30:03,880
because we're because we're behind them

00:30:01,429 --> 00:30:06,679
we are beholden to what they are doing

00:30:03,880 --> 00:30:08,990
we're working on this directly with them

00:30:06,679 --> 00:30:11,990
I've got a call tomorrow talking with

00:30:08,990 --> 00:30:15,140
them about this so we're trying to

00:30:11,990 --> 00:30:16,880
improve it but things like a CSP

00:30:15,140 --> 00:30:20,870
stapling which also once again means

00:30:16,880 --> 00:30:22,820
nothing two people that allows with EV

00:30:20,870 --> 00:30:25,610
certificates you to staple a couple of

00:30:22,820 --> 00:30:27,770
requests together so there's only one

00:30:25,610 --> 00:30:30,770
round trip to the server rather than two

00:30:27,770 --> 00:30:33,940
and when that is that really matters

00:30:30,770 --> 00:30:33,940
especially if you're doing too hot

00:30:34,240 --> 00:30:37,400
there's a lot more detail in the blog

00:30:36,230 --> 00:30:41,060
post someone going to any more than that

00:30:37,400 --> 00:30:45,680
it is not free absolutely guaranteed not

00:30:41,060 --> 00:30:48,800
free and this is not the biggest problem

00:30:45,680 --> 00:30:52,220
I face so it's taking me an eternity to

00:30:48,800 --> 00:30:54,460
get here end of august one of my sales

00:30:52,220 --> 00:30:56,810
managers comes over to me it says Steve

00:30:54,460 --> 00:31:01,640
our customers traffic has dropped off

00:30:56,810 --> 00:31:05,600
the face of the earth at about the time

00:31:01,640 --> 00:31:13,430
you did that flip to https anything

00:31:05,600 --> 00:31:18,950
you'd like to tell me I'm gonna do

00:31:13,430 --> 00:31:21,530
it's like literally so we have many

00:31:18,950 --> 00:31:23,750
larger customers and obviously they use

00:31:21,530 --> 00:31:25,250
google analytics to they don't use all

00:31:23,750 --> 00:31:28,100
the data that we give them though I

00:31:25,250 --> 00:31:30,620
spend ages getting on to work to make to

00:31:28,100 --> 00:31:31,970
make sure we gave them they use google

00:31:30,620 --> 00:31:35,750
analytics cuz we're not their only

00:31:31,970 --> 00:31:38,000
supplier advertising obviously and so

00:31:35,750 --> 00:31:39,170
yell is a referrer dropped off now

00:31:38,000 --> 00:31:42,770
there's a very good reason why this

00:31:39,170 --> 00:31:45,560
happened so never studied HGV virus so

00:31:42,770 --> 00:31:47,720
where if you're from HTTP and you go to

00:31:45,560 --> 00:31:49,400
another HTTP web site you pass a

00:31:47,720 --> 00:31:51,620
referrer the where you basically came

00:31:49,400 --> 00:31:56,240
from if you go to https you pass it

00:31:51,620 --> 00:31:58,400
again but if you the source or https you

00:31:56,240 --> 00:32:05,480
do not pass it to HTTP web sites because

00:31:58,400 --> 00:32:06,620
you are secure and they are not yet not

00:32:05,480 --> 00:32:08,810
only nine percent of our customers

00:32:06,620 --> 00:32:10,730
websites are served over HTTP and all of

00:32:08,810 --> 00:32:14,450
that one percent a quarter of facebook

00:32:10,730 --> 00:32:16,760
pages i haven't actually gone back and

00:32:14,450 --> 00:32:22,130
looked at what that stuff is now i don't

00:32:16,760 --> 00:32:25,610
really want to know right how the

00:32:22,130 --> 00:32:27,770
 did i do this so oh there are

00:32:25,610 --> 00:32:30,860
options that w3c obviously has options

00:32:27,770 --> 00:32:34,280
about how to solve this there is a

00:32:30,860 --> 00:32:36,080
referral policy spec we're basically in

00:32:34,280 --> 00:32:37,520
a meta tag on every page which would be

00:32:36,080 --> 00:32:40,490
very easy for us to do you can add a

00:32:37,520 --> 00:32:43,340
rello firmer and set content to unsafe

00:32:40,490 --> 00:32:45,650
and it will pass the referrer to

00:32:43,340 --> 00:32:49,790
wherever the hell you wanted to go the

00:32:45,650 --> 00:32:53,330
browser support for this is that which

00:32:49,790 --> 00:32:55,640
and this is a this is one of can I use

00:32:53,330 --> 00:32:57,820
his great feature works which put it

00:32:55,640 --> 00:33:00,950
down to our traffic is seventy percent

00:32:57,820 --> 00:33:05,090
so we could send seventy percent of it

00:33:00,950 --> 00:33:07,730
back doesn't know that's that's not it

00:33:05,090 --> 00:33:10,010
so suddenly hey you've said that he will

00:33:07,730 --> 00:33:12,559
do it imagine the sales call next year

00:33:10,010 --> 00:33:14,110
hey about middle of June we dropped at

00:33:12,559 --> 00:33:17,630
thirty percent traffic I'm not renewing

00:33:14,110 --> 00:33:19,760
 okay right so we can't do that what

00:33:17,630 --> 00:33:23,480
else can we do so content security

00:33:19,760 --> 00:33:25,160
policy level 2 also has this however

00:33:23,480 --> 00:33:27,920
that browser support is approximately

00:33:25,160 --> 00:33:31,640
forty percent this is at in fact how

00:33:27,920 --> 00:33:33,950
Twitter Steidle CEO service passes

00:33:31,640 --> 00:33:36,140
referrer information because that's on

00:33:33,950 --> 00:33:39,260
HTTPS and obviously that's passionate

00:33:36,140 --> 00:33:42,800
besides all the time so that sets a

00:33:39,260 --> 00:33:43,850
condenser content security policy so

00:33:42,800 --> 00:33:46,360
instead we went did things the

00:33:43,850 --> 00:33:50,200
old-fashioned way now I made a video I

00:33:46,360 --> 00:33:54,080
literally I went and I made a feature

00:33:50,200 --> 00:33:55,940
which taught that which helped users use

00:33:54,080 --> 00:33:57,590
Google Analytics campaign tags and

00:33:55,940 --> 00:34:00,220
that's the best thing we came up with

00:33:57,590 --> 00:34:02,780
and then we applied it to everyone

00:34:00,220 --> 00:34:05,150
literally we send more campaign tags and

00:34:02,780 --> 00:34:08,629
everything else to our website the video

00:34:05,150 --> 00:34:11,600
is there if you want to cringe and

00:34:08,629 --> 00:34:13,940
that's it that is how many people I

00:34:11,600 --> 00:34:18,230
actually had to talk to in order to make

00:34:13,940 --> 00:34:19,929
this happen and I finally stopped

00:34:18,230 --> 00:34:22,879
talking to people about this about

00:34:19,929 --> 00:34:27,740
December after I've written this article

00:34:22,879 --> 00:34:31,040
this article has changed a lot and yeah

00:34:27,740 --> 00:34:35,869
it's a massive amount of time four point

00:34:31,040 --> 00:34:38,480
two places in SEO for security the

00:34:35,869 --> 00:34:40,580
problem with HTTPS is not technology we

00:34:38,480 --> 00:34:43,220
can overcome them the problem is the

00:34:40,580 --> 00:34:45,710
incentives previously that said

00:34:43,220 --> 00:34:48,290
perseverance but the problem is actually

00:34:45,710 --> 00:34:52,359
incentives is there any incentive to

00:34:48,290 --> 00:34:52,359
carry on and do this

00:34:53,210 --> 00:35:02,220
maybe maybe we can make things easier

00:35:00,150 --> 00:35:05,760
but there's no real incentive at the

00:35:02,220 --> 00:35:07,290
moment if we can get rid of the cost of

00:35:05,760 --> 00:35:09,840
DV stiff achatz let's encrypt is

00:35:07,290 --> 00:35:11,520
fantastic I absolutely love it do use it

00:35:09,840 --> 00:35:13,170
if you want to freeze tificate you do to

00:35:11,520 --> 00:35:16,500
just have to have renew every four

00:35:13,170 --> 00:35:18,390
months but otherwise it's fine cdns

00:35:16,500 --> 00:35:20,220
software as a service providers they

00:35:18,390 --> 00:35:22,200
need to be HTTPS by default they need to

00:35:20,220 --> 00:35:24,630
encourage that this is the way that this

00:35:22,200 --> 00:35:27,510
is the only way we need to provide more

00:35:24,630 --> 00:35:28,800
incentive people as a spec call used to

00:35:27,510 --> 00:35:32,660
be called powerful features it's now

00:35:28,800 --> 00:35:36,740
called privileged contacts like which

00:35:32,660 --> 00:35:41,580
means that features like serviceworker

00:35:36,740 --> 00:35:46,130
geolocation camera usage that kind of

00:35:41,580 --> 00:35:49,370
thing will only run on https domains

00:35:46,130 --> 00:35:53,160
serviceworker already does already does

00:35:49,370 --> 00:35:55,320
but geolocation that's happening soon so

00:35:53,160 --> 00:35:57,270
it had been deprecated as of chrome 43

00:35:55,320 --> 00:35:58,890
for you to your location on a HTTP web

00:35:57,270 --> 00:36:02,100
site you'll get a warning in your

00:35:58,890 --> 00:36:03,480
browser console i saw last a couple of

00:36:02,100 --> 00:36:05,160
nights ago when i was looking into a bit

00:36:03,480 --> 00:36:07,470
further the commits have been made to

00:36:05,160 --> 00:36:10,560
completely remove it from insecure

00:36:07,470 --> 00:36:12,870
domains things are happening here chrome

00:36:10,560 --> 00:36:15,990
is being the aggressor great brilliant

00:36:12,870 --> 00:36:20,870
well done Firefox is for it is not far

00:36:15,990 --> 00:36:23,790
behind it it needs this kind of a

00:36:20,870 --> 00:36:26,100
neatest push from just from not just

00:36:23,790 --> 00:36:28,500
from develop up to developers to say

00:36:26,100 --> 00:36:30,450
okay we need to do this now you can't do

00:36:28,500 --> 00:36:32,070
this unless you have this now there are

00:36:30,450 --> 00:36:35,190
actually some really good reasons why

00:36:32,070 --> 00:36:36,840
service worker has to be HTTPS as a

00:36:35,190 --> 00:36:38,490
massively long thread on get help about

00:36:36,840 --> 00:36:41,820
it if you're really interested which I

00:36:38,490 --> 00:36:45,480
linked to from the article you can't do

00:36:41,820 --> 00:36:46,740
HTTP to without it we can't do HTTP to

00:36:45,480 --> 00:36:48,630
because I'm man-in-the-middle doesn't so

00:36:46,740 --> 00:36:50,520
I can support it nor does on it together

00:36:48,630 --> 00:36:52,350
right now but it will do if we upgrade

00:36:50,520 --> 00:36:55,010
it again since it has of course over

00:36:52,350 --> 00:36:58,050
this period of time had a major relaunch

00:36:55,010 --> 00:36:59,520
HTTP two is fantastic the performance

00:36:58,050 --> 00:37:01,619
gains you glad that we're protecting

00:36:59,520 --> 00:37:03,559
about of

00:37:01,619 --> 00:37:06,359
thirty percent performance improvement

00:37:03,559 --> 00:37:10,829
which will take us from a median of

00:37:06,359 --> 00:37:12,779
about two seconds to 1.6 that kind of

00:37:10,829 --> 00:37:16,200
improvement just from HTTP to is

00:37:12,779 --> 00:37:19,019
fantastic and if that if you look at

00:37:16,200 --> 00:37:21,240
performance that's the killer however it

00:37:19,019 --> 00:37:24,930
does need more support cdns don't all

00:37:21,240 --> 00:37:29,609
support it right now it's it's coming

00:37:24,930 --> 00:37:30,749
but it's not quite there yet search

00:37:29,609 --> 00:37:34,829
engines need to make it a stronger

00:37:30,749 --> 00:37:35,849
signal business people don't some

00:37:34,829 --> 00:37:37,589
business people get the performance

00:37:35,849 --> 00:37:39,710
argument some piece of people get the

00:37:37,589 --> 00:37:41,849
security argument but they don't really

00:37:39,710 --> 00:37:43,380
what they get is hey you'll get more

00:37:41,849 --> 00:37:47,099
business from it because Google will

00:37:43,380 --> 00:37:49,019
send more people your way that needs to

00:37:47,099 --> 00:37:54,599
be stronger point two places is

00:37:49,019 --> 00:37:57,869
it needs to go up and browsers need to

00:37:54,599 --> 00:38:01,109
warn against HTTP if you're at the

00:37:57,869 --> 00:38:03,359
chrome dev summit last in the last year

00:38:01,109 --> 00:38:06,720
emily stark stood up in front of

00:38:03,359 --> 00:38:12,690
everyone in front of everyone and said

00:38:06,720 --> 00:38:16,609
in 2016 we intend to basically put that

00:38:12,690 --> 00:38:21,359
red cross through HTTP at some point

00:38:16,609 --> 00:38:24,210
that is going to be amazing it's scary

00:38:21,359 --> 00:38:25,440
ass yeah that's because firefox is going

00:38:24,210 --> 00:38:26,549
to do it as well no one else has said

00:38:25,440 --> 00:38:28,799
anything about it in browser

00:38:26,549 --> 00:38:30,660
manufacturers but they say they're going

00:38:28,799 --> 00:38:34,079
to do it this year it's going to take a

00:38:30,660 --> 00:38:35,430
lot of sir of I'm going it's going to

00:38:34,079 --> 00:38:38,670
take a lot of time everyone's going to

00:38:35,430 --> 00:38:41,009
be warned but it is they want it to

00:38:38,670 --> 00:38:42,660
happen it needs to be a massive

00:38:41,009 --> 00:38:44,999
incentive because if you went to an

00:38:42,660 --> 00:38:47,160
https website and you saw the red cross

00:38:44,999 --> 00:38:50,609
through it that's going to send you

00:38:47,160 --> 00:38:55,769
running a scheduling HTTP web site and

00:38:50,609 --> 00:38:57,599
send your money and people need to be

00:38:55,769 --> 00:39:01,319
educated about this google have just

00:38:57,599 --> 00:39:05,099
launched a migrating to https guide the

00:39:01,319 --> 00:39:07,380
Matt gaunt help to write and hopefully

00:39:05,099 --> 00:39:09,079
through kind of talks like this everyone

00:39:07,380 --> 00:39:11,819
call kind of more understand what a

00:39:09,079 --> 00:39:14,369
gorg's have to go through in order to do

00:39:11,819 --> 00:39:15,300
this and why the Lord the internet isn't

00:39:14,369 --> 00:39:17,460
on it

00:39:15,300 --> 00:39:19,500
smaller augs great puts it on your

00:39:17,460 --> 00:39:22,380
server do lights and crepes done at the

00:39:19,500 --> 00:39:23,730
blog the yellow block that we wrote in

00:39:22,380 --> 00:39:25,530
order to do this I did a let's encrypt

00:39:23,730 --> 00:39:29,150
cert it took five minutes that's how it

00:39:25,530 --> 00:39:32,940
should be it isn't and that's the web

00:39:29,150 --> 00:39:35,610
there is a tag documentation document on

00:39:32,940 --> 00:39:38,670
moving to HTTPS as well so finally

00:39:35,610 --> 00:39:40,620
what's next we're going to improve

00:39:38,670 --> 00:39:44,850
deities people we're going to get a wage

00:39:40,620 --> 00:39:46,920
too we will then take be able to take a

00:39:44,850 --> 00:39:49,560
look at HTTP strict Transport Security

00:39:46,920 --> 00:39:51,570
which is another way of doing the 30

00:39:49,560 --> 00:39:54,660
ones basically the browser if it knows

00:39:51,570 --> 00:39:59,850
about it will attempt to automatically

00:39:54,660 --> 00:40:02,570
upgrade HTTP connection to https if if

00:39:59,850 --> 00:40:05,070
it can and if it knows about the header

00:40:02,570 --> 00:40:06,930
which is a really useful way of catching

00:40:05,070 --> 00:40:07,950
the remainder we can't do it at the

00:40:06,930 --> 00:40:09,600
moment because I see the end doesn't

00:40:07,950 --> 00:40:12,720
work and then all videos on your comment

00:40:09,600 --> 00:40:15,630
break and then we'll do content security

00:40:12,720 --> 00:40:19,350
policy and you can also set cookies be

00:40:15,630 --> 00:40:21,510
HTTPS only whereas at the moment of said

00:40:19,350 --> 00:40:23,640
to be HTTP only so some of the cookies

00:40:21,510 --> 00:40:26,580
don't quite work I only found out about

00:40:23,640 --> 00:40:30,830
that yesterday still learn telling you

00:40:26,580 --> 00:40:39,390
every day and we'll get our CDN done so

00:40:30,830 --> 00:40:42,510
thank you I hope you've learnt I hope

00:40:39,390 --> 00:40:47,820
you learned that HTTPS is hard it is and

00:40:42,510 --> 00:40:49,980
the it is worth it in the end it is

00:40:47,820 --> 00:40:51,420
absolutely it is absolutely worth it and

00:40:49,980 --> 00:40:52,860
it certainly will be more worth it by

00:40:51,420 --> 00:40:55,130
the end of the year if you wanna do

00:40:52,860 --> 00:40:59,670
service work you've got to go for it

00:40:55,130 --> 00:41:04,230
that there is a there are barriers they

00:40:59,670 --> 00:41:05,670
can be overcome all of them and doing so

00:41:04,230 --> 00:41:09,050
you will probably be in a much better

00:41:05,670 --> 00:41:12,690
place for it thank you for listening

00:41:09,050 --> 00:41:15,240
thank you i'm on twitter twitter the

00:41:12,690 --> 00:41:19,400
slides are up and there is an epic blog

00:41:15,240 --> 00:41:19,400
blog post there if you do want to

00:41:19,730 --> 00:41:21,790

YouTube URL: https://www.youtube.com/watch?v=9PpzVA3U-lw


