Title: Chain React 2019 - Trevor Brindle - LT - End Your Development Nightmares with envinfo and Solidarity
Publication date: 2019-08-06
Playlist: Chain React 2019
Description: 
	In a world where perpetually confused developers canâ€™t quite get their React Native development environments working, new libraries emerge from the ashes of lost productivity: envinfo and Solidarity. Escape the complexity and be part of the wave of teams embracing change to save their projects from themselves.

https://speakerdeck.com/tabrindle/end-your-development-environment-nightmares-with-envinfo-and-solidarity
Captions: 
	00:00:10,519 --> 00:00:14,130
all right so I'm gonna talk to you about

00:00:12,809 --> 00:00:17,130
ending your development environment

00:00:14,130 --> 00:00:19,210
nightmares with n VIN foe and solidarity

00:00:17,130 --> 00:00:22,400
so my name is Trevor brindle and

00:00:19,210 --> 00:00:24,930
[Music]

00:00:22,400 --> 00:00:27,689
basically everything you use when you're

00:00:24,930 --> 00:00:29,010
developing software is your environment

00:00:27,689 --> 00:00:31,109
it's the sum of all the tools and

00:00:29,010 --> 00:00:33,989
processes that you that you use your

00:00:31,109 --> 00:00:37,290
files your tools your processes

00:00:33,989 --> 00:00:39,660
variables everything and especially with

00:00:37,290 --> 00:00:41,579
things like react native it's definitely

00:00:39,660 --> 00:00:43,110
growing in complexity if you think back

00:00:41,579 --> 00:00:45,570
you know ten years maybe you've been

00:00:43,110 --> 00:00:48,210
doing this as long we didn't have quite

00:00:45,570 --> 00:00:52,289
as many tools think about it you have

00:00:48,210 --> 00:00:54,539
your shell your operating system you

00:00:52,289 --> 00:00:56,489
also have Objective C and Swift

00:00:54,539 --> 00:00:58,230
in Java and Kotlin in all these

00:00:56,489 --> 00:01:00,480
different languages that go into your

00:00:58,230 --> 00:01:04,229
application and so with this growing

00:01:00,480 --> 00:01:06,689
complexity you get more bugs and so the

00:01:04,229 --> 00:01:09,600
problem by a quick show of hands how

00:01:06,689 --> 00:01:12,689
many of you actually know exactly what

00:01:09,600 --> 00:01:15,810
is on your computer don't put your hands

00:01:12,689 --> 00:01:18,780
up if you don't know so so that's the

00:01:15,810 --> 00:01:22,619
problem the classic is it works on my

00:01:18,780 --> 00:01:24,479
computer don't ever say that command not

00:01:22,619 --> 00:01:26,880
found it's maddening don't throw

00:01:24,479 --> 00:01:29,880
computers over that what version do you

00:01:26,880 --> 00:01:32,759
have what version do I need and every

00:01:29,880 --> 00:01:34,650
issue template ever on github please

00:01:32,759 --> 00:01:37,890
mention other relevant information such

00:01:34,650 --> 00:01:40,369
as operating system nodejs yarn and NPM

00:01:37,890 --> 00:01:43,340
versions how many have you seen that

00:01:40,369 --> 00:01:45,899
everyone put your hands up

00:01:43,340 --> 00:01:50,490
all right let's further illustrate the

00:01:45,899 --> 00:01:52,500
problem the worst quiz ever when was

00:01:50,490 --> 00:01:54,630
async/await added to node you probably

00:01:52,500 --> 00:01:57,990
know this one when did Ruby add the safe

00:01:54,630 --> 00:02:01,200
navigation operator when did bash add

00:01:57,990 --> 00:02:03,540
glob star when did npm install start

00:02:01,200 --> 00:02:05,399
updating the package lock json and when

00:02:03,540 --> 00:02:07,200
was overflow changed removed from chrome

00:02:05,399 --> 00:02:08,670
now I know the answers all of these

00:02:07,200 --> 00:02:11,099
because they were all particularly

00:02:08,670 --> 00:02:13,680
painful for me but chances are you

00:02:11,099 --> 00:02:15,989
probably don't know all of these

00:02:13,680 --> 00:02:17,430
and so really you think oh well semantic

00:02:15,989 --> 00:02:18,780
versioning will helps it helps us with

00:02:17,430 --> 00:02:19,680
this we know exactly when all these

00:02:18,780 --> 00:02:21,480
things were added

00:02:19,680 --> 00:02:23,280
but the problem is semantic versioning

00:02:21,480 --> 00:02:25,379
well not everyone uses it right and

00:02:23,280 --> 00:02:27,299
every time you go backwards in a version

00:02:25,379 --> 00:02:30,090
doesn't matter whether it was a hotfix

00:02:27,299 --> 00:02:32,579
or a minor version it's breaking every

00:02:30,090 --> 00:02:35,459
time you go backwards all right more

00:02:32,579 --> 00:02:36,090
problems how do I find this do you know

00:02:35,459 --> 00:02:37,920
what this is

00:02:36,090 --> 00:02:40,709
I'll see Android SDK versions and

00:02:37,920 --> 00:02:42,150
there's a lot of them they're always in

00:02:40,709 --> 00:02:44,879
a strange order they're hard to read I

00:02:42,150 --> 00:02:47,239
don't remember where to find this and I

00:02:44,879 --> 00:02:49,200
wrote a library that gets it for you so

00:02:47,239 --> 00:02:52,139
alright so this is the part of the

00:02:49,200 --> 00:02:53,489
infomercial where we smash cabbages into

00:02:52,139 --> 00:02:56,720
blenders

00:02:53,489 --> 00:02:58,980
there's got to be a better way right

00:02:56,720 --> 00:03:02,040
I've watched developers struggle with

00:02:58,980 --> 00:03:04,439
this for years and so we clearly have a

00:03:02,040 --> 00:03:05,879
problem and there really isn't just one

00:03:04,439 --> 00:03:09,209
solution to it it's not really a

00:03:05,879 --> 00:03:10,980
one-size-fits-all really it's a series

00:03:09,209 --> 00:03:14,549
of steps you have to know what you have

00:03:10,980 --> 00:03:16,500
and enforce what you need the goal is to

00:03:14,549 --> 00:03:19,139
find a solution that is the easiest and

00:03:16,500 --> 00:03:20,970
least intrusive for your workflow and

00:03:19,139 --> 00:03:24,810
gets you the environment safety that you

00:03:20,970 --> 00:03:26,819
need so the first one is knowing what

00:03:24,810 --> 00:03:28,319
you have easily find the fingerprint of

00:03:26,819 --> 00:03:29,849
everything that makes up your in your

00:03:28,319 --> 00:03:31,470
development environment so your

00:03:29,849 --> 00:03:34,229
operating system version the path of

00:03:31,470 --> 00:03:37,199
your node binary and this is what we use

00:03:34,229 --> 00:03:39,419
end info for and the next one is enforce

00:03:37,199 --> 00:03:41,519
what you use enforcing and correcting

00:03:39,419 --> 00:03:43,349
mismatched versions for environments on

00:03:41,519 --> 00:03:46,259
a per project basis so this is what we

00:03:43,349 --> 00:03:48,150
use solidarity for so I'm gonna

00:03:46,259 --> 00:03:49,739
introduce you and VIN fill which is a

00:03:48,150 --> 00:03:51,569
little weird because I can probably

00:03:49,739 --> 00:03:53,189
guarantee that every single one of you

00:03:51,569 --> 00:03:57,329
have it on your computer already and you

00:03:53,189 --> 00:03:59,790
don't know it so imagine getting five

00:03:57,329 --> 00:04:02,849
new developers together and starting a

00:03:59,790 --> 00:04:05,549
react native project in 2017 all of you

00:04:02,849 --> 00:04:07,409
have different setups and so all of you

00:04:05,549 --> 00:04:10,470
kind of just do command - V until

00:04:07,409 --> 00:04:15,180
someone flips a table literally it

00:04:10,470 --> 00:04:17,220
happened on video so now I actually

00:04:15,180 --> 00:04:18,900
wrote a shell script at the time that

00:04:17,220 --> 00:04:21,419
combined getting your operating system

00:04:18,900 --> 00:04:24,090
Xcode node NPM versions all in one thing

00:04:21,419 --> 00:04:26,280
and the developers could curl it and you

00:04:24,090 --> 00:04:28,140
know pipe it out and in

00:04:26,280 --> 00:04:30,090
send it through a DIF to see what was

00:04:28,140 --> 00:04:32,790
different between between computers and

00:04:30,090 --> 00:04:33,780
so this was cool but you know it didn't

00:04:32,790 --> 00:04:34,770
really help out the rest of the

00:04:33,780 --> 00:04:36,660
community because I knew they were

00:04:34,770 --> 00:04:38,160
having this problem too so I made a PR

00:04:36,660 --> 00:04:40,380
to react native and you can read all

00:04:38,160 --> 00:04:42,960
about the rest of this story on my blog

00:04:40,380 --> 00:04:48,660
Trevor brindle calm trust me it's kind

00:04:42,960 --> 00:04:50,130
of interesting so this is n VIN foe it's

00:04:48,660 --> 00:04:52,320
actually a little anticlimactic when you

00:04:50,130 --> 00:04:54,330
look at it but it's really useful I

00:04:52,320 --> 00:04:56,130
promise and it turns out no one's really

00:04:54,330 --> 00:04:59,340
done this before which is baffling

00:04:56,130 --> 00:05:00,990
because well I mean it's a really boring

00:04:59,340 --> 00:05:03,510
idea the library doesn't do anything

00:05:00,990 --> 00:05:05,430
interesting but it does call just in

00:05:03,510 --> 00:05:06,870
this picture 17 different system

00:05:05,430 --> 00:05:09,540
binaries to get this information

00:05:06,870 --> 00:05:13,410
you're not going to type out command - V

00:05:09,540 --> 00:05:14,790
17 times I promise you so there are a

00:05:13,410 --> 00:05:17,520
lot of different ways to use n VIN fo

00:05:14,790 --> 00:05:18,990
and my favorite is via NP X another

00:05:17,520 --> 00:05:21,300
binary that you may not know about that

00:05:18,990 --> 00:05:23,520
I guarantee is on your computer it's a

00:05:21,300 --> 00:05:26,040
way to run any node module without

00:05:23,520 --> 00:05:27,360
actually directly installing it first n

00:05:26,040 --> 00:05:29,100
VIN foes great at this because it's a

00:05:27,360 --> 00:05:31,710
super small package and it's very fast

00:05:29,100 --> 00:05:35,669
maybe one or two seconds of course you

00:05:31,710 --> 00:05:37,850
can also install it globally or in your

00:05:35,669 --> 00:05:41,400
project as you would if anything else

00:05:37,850 --> 00:05:43,979
you can also with the binaries that I

00:05:41,400 --> 00:05:45,330
compile look ma no node dependency you

00:05:43,979 --> 00:05:49,050
can download it directly and just

00:05:45,330 --> 00:05:51,960
execute it like any other binary with a

00:05:49,050 --> 00:05:53,490
sister project that I wrote in shell you

00:05:51,960 --> 00:05:54,990
can actually curl through this

00:05:53,490 --> 00:05:56,729
convenient little domain that I have

00:05:54,990 --> 00:06:00,660
directly into your bash if you're brave

00:05:56,729 --> 00:06:04,860
and you can also add it directly to your

00:06:00,660 --> 00:06:07,020
project as an adult dependency to use

00:06:04,860 --> 00:06:08,790
any of the helpers in particular that

00:06:07,020 --> 00:06:10,680
you want from n VIN foe because it

00:06:08,790 --> 00:06:14,280
exports all of them so you can import

00:06:10,680 --> 00:06:15,960
your helpers and get your OS info or

00:06:14,280 --> 00:06:19,050
your docker info and just console all

00:06:15,960 --> 00:06:21,990
get out and you might say so what well

00:06:19,050 --> 00:06:24,120
all of these projects actually use n VIN

00:06:21,990 --> 00:06:25,169
fo today whether you know it or not some

00:06:24,120 --> 00:06:27,060
of them are white labeled and they're

00:06:25,169 --> 00:06:28,440
command-line tools some of them are part

00:06:27,060 --> 00:06:30,810
of their issue template using some

00:06:28,440 --> 00:06:34,200
presets so you call NP x and VIN foe

00:06:30,810 --> 00:06:36,030
with a preset of say just or styled

00:06:34,200 --> 00:06:38,190
components and it'll get you all the

00:06:36,030 --> 00:06:39,920
information that the maintainer z' of

00:06:38,190 --> 00:06:44,540
that project have prescribed

00:06:39,920 --> 00:06:45,290
as necessary for debugging so where do

00:06:44,540 --> 00:06:46,610
we go from here

00:06:45,290 --> 00:06:49,160
I laughably only have twenty two hundred

00:06:46,610 --> 00:06:50,810
and sixty stars on github considering

00:06:49,160 --> 00:06:52,910
this projects been out for about two

00:06:50,810 --> 00:06:53,990
years it's really just that no one knows

00:06:52,910 --> 00:06:56,000
about it even though they're already

00:06:53,990 --> 00:06:58,700
using it very few people use it directly

00:06:56,000 --> 00:07:01,010
whether they know it or not yet it has

00:06:58,700 --> 00:07:02,990
three million downloads a month so feel

00:07:01,010 --> 00:07:05,450
free to contribute I especially need

00:07:02,990 --> 00:07:10,880
people who like Windows I don't know why

00:07:05,450 --> 00:07:12,470
you would so the next tool I'm gonna

00:07:10,880 --> 00:07:16,130
talk about is solidarity so this is

00:07:12,470 --> 00:07:17,540
actually an infinite red product and

00:07:16,130 --> 00:07:19,730
it's really when you need a little bit

00:07:17,540 --> 00:07:22,550
more control than just a you know info

00:07:19,730 --> 00:07:24,650
output on a per project basis you can

00:07:22,550 --> 00:07:26,240
enforce a certain environment and stop

00:07:24,650 --> 00:07:26,720
the constant comparing of engine for

00:07:26,240 --> 00:07:29,900
outputs

00:07:26,720 --> 00:07:31,190
interestingly solidarity was actually

00:07:29,900 --> 00:07:33,560
written it more or less the same times

00:07:31,190 --> 00:07:35,900
than VIN foe and now currently uses end

00:07:33,560 --> 00:07:38,270
info under the hood it was actually a

00:07:35,900 --> 00:07:39,650
brainchild of Gantt Laborde and he asked

00:07:38,270 --> 00:07:44,480
me to pronounce his name dusk Rubin

00:07:39,650 --> 00:07:46,130
Hakan for whatever reason couldn't tell

00:07:44,480 --> 00:07:48,919
you but it's basically the same idea

00:07:46,130 --> 00:07:50,570
just enforcement it's really great

00:07:48,919 --> 00:07:53,419
because it's cross-platform actually

00:07:50,570 --> 00:07:55,520
works on Windows and not invasive at all

00:07:53,419 --> 00:07:57,500
unlike a VM or a container it really

00:07:55,520 --> 00:08:00,350
doesn't have any type of overhead and

00:07:57,500 --> 00:08:02,570
it's very much time-saving you can check

00:08:00,350 --> 00:08:05,080
files variables anything you can type

00:08:02,570 --> 00:08:08,419
into shell or even any type of custom

00:08:05,080 --> 00:08:10,810
plugin you can create solidarity plugins

00:08:08,419 --> 00:08:13,070
and check for anything anything you want

00:08:10,810 --> 00:08:15,050
so getting started with solidarity is

00:08:13,070 --> 00:08:18,140
super easy you npm install it either

00:08:15,050 --> 00:08:23,440
globally or in your project create a

00:08:18,140 --> 00:08:26,270
solidarity file and run solidarity and

00:08:23,440 --> 00:08:29,780
all you have to do in your configuration

00:08:26,270 --> 00:08:31,610
file is add requirements so say yarn you

00:08:29,780 --> 00:08:33,770
tell it CLI rule you tell it which

00:08:31,610 --> 00:08:36,289
binary to call and what's a semantic

00:08:33,770 --> 00:08:37,580
version number you're looking for the

00:08:36,289 --> 00:08:39,950
best part about it is you can also

00:08:37,580 --> 00:08:42,020
configure the error message so when

00:08:39,950 --> 00:08:43,430
inevitably one of your developers does

00:08:42,020 --> 00:08:44,990
not have the right version you can

00:08:43,430 --> 00:08:46,520
actually tell it you have this version

00:08:44,990 --> 00:08:49,610
you really should have this version

00:08:46,520 --> 00:08:52,150
here's a script to fix it so solidarity

00:08:49,610 --> 00:08:53,600
and inaction here's a screenshot of

00:08:52,150 --> 00:08:55,519
terminal running

00:08:53,600 --> 00:08:57,560
solidarity just checking for node NPM

00:08:55,519 --> 00:08:59,300
and yarn and it tells you hey you have

00:08:57,560 --> 00:09:04,160
one six oh you should have one five one

00:08:59,300 --> 00:09:06,110
stop upgrading things and so here's the

00:09:04,160 --> 00:09:07,970
script to fix it so you copy and paste

00:09:06,110 --> 00:09:10,610
that in and you run it again and you're

00:09:07,970 --> 00:09:11,750
good so let's say you're the lead on the

00:09:10,610 --> 00:09:14,449
team and you actually know what you're

00:09:11,750 --> 00:09:15,680
doing and yes I do in fact want to

00:09:14,449 --> 00:09:19,430
upgrade this so you can call a

00:09:15,680 --> 00:09:22,970
solidarity snapshot and upgrade your

00:09:19,430 --> 00:09:24,259
solidarity file automatically so some

00:09:22,970 --> 00:09:26,540
neat tricks you can do with solidarity

00:09:24,259 --> 00:09:28,399
you can use unterminated scape codes

00:09:26,540 --> 00:09:30,709
which if you're not a total dork like me

00:09:28,399 --> 00:09:33,319
you may not know that you can actually

00:09:30,709 --> 00:09:35,180
color and create backgrounds on your

00:09:33,319 --> 00:09:36,649
terminal output so if you don't

00:09:35,180 --> 00:09:38,269
terminate those it'll just leave your

00:09:36,649 --> 00:09:41,509
background color bright red which you

00:09:38,269 --> 00:09:43,459
know developers will notice you can use

00:09:41,509 --> 00:09:44,750
it in NPM pre-hook so if you want to

00:09:43,459 --> 00:09:49,310
check your environment before you

00:09:44,750 --> 00:09:50,600
actually build it'll automatically run

00:09:49,310 --> 00:09:53,930
it for them whether they know it's not

00:09:50,600 --> 00:09:55,459
or not and inevitably when they have the

00:09:53,930 --> 00:09:57,589
wrong versions you can inject the

00:09:55,459 --> 00:10:00,160
versions into the error output the

00:09:57,589 --> 00:10:02,630
wanted version and the actual version

00:10:00,160 --> 00:10:04,339
you can update your snapshots on your CI

00:10:02,630 --> 00:10:07,130
build so say you run in a docker

00:10:04,339 --> 00:10:08,839
container on your CI you can actually

00:10:07,130 --> 00:10:10,880
update those snapshots every time your

00:10:08,839 --> 00:10:12,889
docker image updates automatically so

00:10:10,880 --> 00:10:15,560
when you merge that into master someone

00:10:12,889 --> 00:10:17,839
Forks off a master they pull down they

00:10:15,560 --> 00:10:19,699
run build and then immediately there's

00:10:17,839 --> 00:10:22,279
something wrong they always have the

00:10:19,699 --> 00:10:24,439
same environment in production and your

00:10:22,279 --> 00:10:27,410
release as they will developing your

00:10:24,439 --> 00:10:28,910
product and you can also do neat things

00:10:27,410 --> 00:10:30,430
like checking to make sure people

00:10:28,910 --> 00:10:35,779
actually commit with the right email

00:10:30,430 --> 00:10:37,490
don't use your last company's email all

00:10:35,779 --> 00:10:38,899
right so here's an example of a whole

00:10:37,490 --> 00:10:40,759
bunch of things that solidarity can do

00:10:38,899 --> 00:10:42,529
here's the the error output with the

00:10:40,759 --> 00:10:45,100
script automatically injected and then

00:10:42,529 --> 00:10:48,139
hey look salary checks failed and

00:10:45,100 --> 00:10:48,800
project requirements not met proceed at

00:10:48,139 --> 00:10:50,959
your own risk

00:10:48,800 --> 00:10:52,610
so this is actually not going to stop

00:10:50,959 --> 00:10:56,120
you from building but it will make it

00:10:52,610 --> 00:10:58,339
noticeable so next I know as you're all

00:10:56,120 --> 00:11:01,850
thinking why don't you just use a

00:10:58,339 --> 00:11:02,990
container or a VM well you may be saying

00:11:01,850 --> 00:11:05,990
that just because you haven't tried

00:11:02,990 --> 00:11:08,870
doing that before it's kind of a pain

00:11:05,990 --> 00:11:10,279
it's our stack in particular react

00:11:08,870 --> 00:11:11,330
native is already very

00:11:10,279 --> 00:11:13,550
resource-intensive

00:11:11,330 --> 00:11:14,990
really try not to add the overhead if

00:11:13,550 --> 00:11:17,290
you don't have to always try something

00:11:14,990 --> 00:11:20,529
lighter weight first and less intrusive

00:11:17,290 --> 00:11:22,490
so that's solidarity and then fin foe

00:11:20,529 --> 00:11:23,810
you're never going to lock down your

00:11:22,490 --> 00:11:25,790
environment perfectly but using your

00:11:23,810 --> 00:11:28,520
tools you'll at least wake up some from

00:11:25,790 --> 00:11:32,200
some of these nightmares I'm Trevor

00:11:28,520 --> 00:11:35,180
brindle feel free to star in VIN foe

00:11:32,200 --> 00:11:37,570
follow me on Twitter and I will post

00:11:35,180 --> 00:11:39,100
those pictures later thanks everyone

00:11:37,570 --> 00:11:52,480
[Applause]

00:11:39,100 --> 00:11:52,480

YouTube URL: https://www.youtube.com/watch?v=oGwBv2GIZGE


