Title: Azure Friday | Cloud Foundry on Azure
Publication date: 2017-08-29
Playlist: Microsoft Open Source Summit
Description: 
	Sean McKenna drops by Azure Friday to discuss and demo Cloud Foundry, an open-source cloud application platform following the recent announcement that Microsoft has joined the Cloud Foundry Foundation. Pivotal Cloud Foundry is available in the Azure Marketplace: https://azuremarketplace.microsoft.com/en-us/marketplace/apps/pivotal.pivotal-cloud-foundry

Learn to build the right developer playground: http://aka.ms/OSSITleader
Captions: 
	00:00:00,000 --> 00:00:02,103
Hi, I'm Scott Hanson, and it's Azure Friday.

00:00:02,104 --> 00:00:05,023
We're here with Sean McKenna talking about Cloud Foundry

00:00:05,024 --> 00:00:06,113
on Microsoft Azure.

00:00:06,114 --> 00:00:07,183
So what is Cloud Foundry?

00:00:07,184 --> 00:00:08,643
This is a partner product?

00:00:08,644 --> 00:00:11,353
>> So Cloud Foundry is a popular open source

00:00:11,354 --> 00:00:14,293
cloud application platform that we support on Azure.

00:00:14,294 --> 00:00:15,833
You can run it in a bunch of different environments,

00:00:15,834 --> 00:00:18,593
but we have really great support for it on Azure.

00:00:18,594 --> 00:00:19,827
>> Okay, so it's open source.

00:00:19,828 --> 00:00:20,953
Is it supported by a company or

00:00:20,954 --> 00:00:22,263
there's something we're involved in?

00:00:22,264 --> 00:00:24,623
>> Yeah, so there's an open source community and an open

00:00:24,624 --> 00:00:27,078
source version of Cloud Foundry that you can run on Azure.

00:00:27,079 --> 00:00:30,225
But we've also got a bunch of partners that produce enterprise

00:00:30,226 --> 00:00:32,521
distributions is kind of the standard open source playbook

00:00:32,522 --> 00:00:34,533
where there's the open source version and then the enterprise

00:00:34,534 --> 00:00:37,283
distribution that comes with support and additional tools.

00:00:37,284 --> 00:00:40,573
So one of the partners that we work with is Pivotal.

00:00:40,574 --> 00:00:42,923
And so Pivotal produces Pivotal Cloud Foundry,

00:00:42,924 --> 00:00:44,853
where they basically take the open source version,

00:00:44,854 --> 00:00:47,313
package it up and let you run that.

00:00:47,314 --> 00:00:49,109
Okay, and what is Cloud Foundry?

00:00:49,110 --> 00:00:50,093
What does it do?

00:00:50,094 --> 00:00:52,455
>> Yeah, so it's a cloud application platform.

00:00:52,456 --> 00:00:54,697
You can think of it as sort of a distributive middleware that

00:00:54,698 --> 00:01:00,333
sits on top of a bunch of IaaS resources and provides a way for

00:01:00,334 --> 00:01:04,613
developers to deploy applications really easily, for

00:01:04,614 --> 00:01:07,093
operators to manage those applications, and

00:01:07,094 --> 00:01:09,343
provide that abstraction over the underlying VM.

00:01:09,344 --> 00:01:11,963
So you're not actually spinning up VMs yourself and

00:01:11,964 --> 00:01:13,683
deploying software directly to it.

00:01:13,684 --> 00:01:15,323
You're working at a higher level of abstraction.

00:01:15,324 --> 00:01:18,533
>> Okay, so it's an open source platform as a service.

00:01:18,534 --> 00:01:19,513
I deploy my app to it,

00:01:19,514 --> 00:01:23,023
my app buys into the things that Cloud Foundry offers, and

00:01:23,024 --> 00:01:25,153
then doesn't think about any of the underlying resources.

00:01:25,154 --> 00:01:26,343
>> That's right, exactly right, yeah.

00:01:26,344 --> 00:01:27,103
>> Okay.

00:01:27,104 --> 00:01:29,063
>> So obviously,

00:01:29,064 --> 00:01:32,003
as is often the case with some of these distributed platforms,

00:01:32,004 --> 00:01:33,893
it's pretty hard to get it set up yourself.

00:01:33,894 --> 00:01:36,273
So we provide an easy way to get started.

00:01:36,274 --> 00:01:37,563
So I mentioned Pivotal Cloud Foundry is

00:01:37,564 --> 00:01:39,603
one of the distributions that we support.

00:01:39,604 --> 00:01:42,253
And so we have an offer in the Azure marketplace that makes it

00:01:42,254 --> 00:01:44,183
really easy to get up and running and

00:01:44,184 --> 00:01:46,263
spin up a full environment.

00:01:47,343 --> 00:01:50,453
Once you've done that, what you'll end up with is this huge

00:01:50,454 --> 00:01:55,363
number of resources inside of a resource group that you specify.

00:01:55,364 --> 00:01:59,993
And so I will warn people here, it is not a small deployment.

00:01:59,994 --> 00:02:03,573
So you're gonna get something on the order of 25 to 30 VMs

00:02:03,574 --> 00:02:06,523
in a standard deployment from the Azure marketplace.

00:02:06,524 --> 00:02:09,103
>> Will people who are familiar with Cloud Foundry be surprised

00:02:09,104 --> 00:02:10,173
by that or is that- >> No.

00:02:10,174 --> 00:02:11,273
>> That's the standard thing.

00:02:11,274 --> 00:02:11,933
>> Pretty standard.

00:02:11,934 --> 00:02:15,483
So we actually see it's quite popular with large enterprises,

00:02:15,484 --> 00:02:18,783
because there was a bunch of features that make it

00:02:18,784 --> 00:02:20,773
easy to work with for large organizations, but

00:02:20,774 --> 00:02:23,023
also because of the size of the deployments and

00:02:23,024 --> 00:02:24,873
some of the cost that comes alongside it.

00:02:24,874 --> 00:02:26,853
>> I see, but it's all about the complexity, right?

00:02:26,854 --> 00:02:28,783
If I had to do this myself- >> Exactly.

00:02:28,784 --> 00:02:30,363
>> No matter what cloud I decided to pick,

00:02:30,364 --> 00:02:33,673
it would be a lot of manual work and a lot of wiring up.

00:02:33,674 --> 00:02:35,139
>> That's right. >> Here, I get to go and

00:02:35,140 --> 00:02:38,102
take my company's preferred platform as a service system,

00:02:38,103 --> 00:02:40,263
Cloud Foundry, and install it into Azure.

00:02:40,264 --> 00:02:42,731
And I presume I would not do Hello World on 25 VMs?

00:02:42,732 --> 00:02:45,376
This is about installing all of my Cloud Foundry apps

00:02:45,377 --> 00:02:46,263
into Azure.

00:02:46,264 --> 00:02:47,393
>> Correct, yeah, and so

00:02:47,394 --> 00:02:50,333
typically, those large enterprises will deploy a large

00:02:50,334 --> 00:02:51,273
number of applications.

00:02:51,274 --> 00:02:53,913
And what they find is yeah, there's some cost associated

00:02:53,914 --> 00:02:57,203
with it with the number of resources that you're spinning

00:02:57,204 --> 00:03:00,293
up, but it makes them much more productive in deploying and

00:03:00,294 --> 00:03:02,613
managing those applications.

00:03:02,614 --> 00:03:05,459
So you mentioned you wouldn't do Hello World, but I think in this

00:03:05,460 --> 00:03:08,149
case we will actually do maybe a quick Hello World to see what it

00:03:08,150 --> 00:03:08,743
looks like.

00:03:08,744 --> 00:03:09,413
>> Let's do it.

00:03:09,414 --> 00:03:13,197
>> I'd like to understand, do those virtual machines go up and

00:03:13,198 --> 00:03:15,954
down in size, do they scale in and out in size

00:03:15,955 --> 00:03:16,523
>> Yeah, so

00:03:16,524 --> 00:03:19,731
you get set up with a sort of standard deployment, but

00:03:19,732 --> 00:03:22,243
then you can change the size of those VMs.

00:03:22,244 --> 00:03:25,713
You can add more and take some away, so all of that standard

00:03:25,714 --> 00:03:28,713
kind of horizontal and vertical scaling is available.

00:03:28,714 --> 00:03:30,473
>> Okay, cool.

00:03:30,474 --> 00:03:35,520
>> So what I have here is a, Tree,

00:03:35,521 --> 00:03:39,843
just a Java application using the Spring framework.

00:03:39,844 --> 00:03:41,523
I'm not sure if you're familiar with Spring.

00:03:41,524 --> 00:03:43,583
>> Yeah, I did Java actually for many years at Nike and

00:03:43,584 --> 00:03:44,823
used Spring for string framework.

00:03:44,824 --> 00:03:47,588
>> Yeah, so it's one of the popular Java frameworks and

00:03:47,589 --> 00:03:50,792
it's quite popular for people to run on top of Cloud Foundry.

00:03:50,793 --> 00:03:55,066
So this is a Java app, simple sort of Java web application.

00:03:55,067 --> 00:03:59,026
And what I'm gonna do is cf push, so there's one command you

00:03:59,027 --> 00:04:02,918
need to know when working with Cloud Foundry, it's push, which

00:04:02,919 --> 00:04:06,668
basically takes an application, takes all the source code and

00:04:06,669 --> 00:04:09,423
pushes it up into the environment.

00:04:09,424 --> 00:04:12,673
So we think of Cloud Foundry as being an opinionated

00:04:13,933 --> 00:04:14,863
application platform.

00:04:14,864 --> 00:04:17,643
And what that means is they've basically taken a bunch of sort

00:04:17,644 --> 00:04:21,413
of best practices and common models and

00:04:21,414 --> 00:04:23,793
codified them into a set of operations.

00:04:23,794 --> 00:04:27,470
And so what's happening here is after I've pushed

00:04:27,471 --> 00:04:30,555
the application, it's gonna do a few things.

00:04:30,556 --> 00:04:33,723
It's gonna create an entry for the app in Cloud Foundry.

00:04:33,724 --> 00:04:36,273
It's going to take all the files and

00:04:36,274 --> 00:04:38,273
upload them into the Cloud Foundry environment.

00:04:38,274 --> 00:04:39,428
And interestingly,

00:04:39,429 --> 00:04:42,324
it's going to detect what type of application it is.

00:04:42,325 --> 00:04:45,222
And then determine what its dependencies are,

00:04:45,223 --> 00:04:48,845
package all of that up into a container that will actually be

00:04:48,846 --> 00:04:50,154
what gets deployed.

00:04:50,155 --> 00:04:50,853
>> Do I need to give it

00:04:50,854 --> 00:04:52,641
hints if it doesn't detect that correctly?

00:04:52,642 --> 00:04:56,341
>> Nope, so for standard The standard applications,

00:04:56,342 --> 00:04:58,031
including .NET Core.

00:04:58,032 --> 00:05:00,930
You can have it just automatically detect based on

00:05:00,931 --> 00:05:04,599
the files that it's pushing, what type of application it is.

00:05:04,600 --> 00:05:07,598
Bring all of those dependencies together into a container and

00:05:07,599 --> 00:05:09,433
push that out into the environment.

00:05:09,434 --> 00:05:12,176
>> Wow, does this Java application, this spring

00:05:12,177 --> 00:05:15,687
application know that it is in a Cloud Foundry environment?

00:05:15,688 --> 00:05:17,373
Or is it, it's ignorant to that?

00:05:17,374 --> 00:05:18,413
>> Exactly, yep.

00:05:18,414 --> 00:05:21,383
>> Nice. >> And so you can see that here

00:05:21,384 --> 00:05:24,883
it's detected that it is a Java application and

00:05:24,884 --> 00:05:26,973
it's gonna pair that with what's called a build pack.

00:05:26,974 --> 00:05:28,667
And a build pack is effectively a set of scripts.

00:05:28,668 --> 00:05:29,173
>> Mm-hm.

00:05:29,174 --> 00:05:31,783
>> It's going to take all of those files,

00:05:31,784 --> 00:05:32,873
figure out the dependencies and

00:05:32,874 --> 00:05:34,453
again package that up into a container.

00:05:35,613 --> 00:05:40,863
And then the other thing it's gonna do is actually

00:05:40,864 --> 00:05:45,370
create an endpoint for that application.

00:05:45,371 --> 00:05:49,147
So if I scroll down here, you'll see there's the URL and

00:05:49,148 --> 00:05:51,735
I can just go- >> And it's on your domain,

00:05:51,736 --> 00:05:53,893
of course, you have control.

00:05:53,894 --> 00:05:58,853
>> Yep, so you set up basically a wild card DNS entry, and

00:05:58,854 --> 00:06:01,043
then on top of that base domain.

00:06:01,044 --> 00:06:03,717
The application name will be added as an additional

00:06:03,718 --> 00:06:04,588
sub-domain and

00:06:04,589 --> 00:06:07,147
then you can immediately with the application.

00:06:07,148 --> 00:06:09,274
So basically with one command,

00:06:09,275 --> 00:06:11,723
I've taken all of that source code.

00:06:11,724 --> 00:06:12,513
Which as you mentioned,

00:06:12,514 --> 00:06:15,083
is completely ignorant of where it's going to run.

00:06:15,084 --> 00:06:16,843
Packaged it up with all of its dependencies,

00:06:16,844 --> 00:06:19,478
whatever it needs from Java and Spring into a container.

00:06:19,479 --> 00:06:20,452
>> Mm-hm. >> And pushed it into

00:06:20,453 --> 00:06:23,768
an environment that I can now hit directly in my web browser.

00:06:23,769 --> 00:06:25,531
>> So for people who are using Cloud Foundry and

00:06:25,532 --> 00:06:28,249
anyone's watching this and their company has maybe managing their

00:06:28,250 --> 00:06:30,108
own resources internally for Cloud Foundry,

00:06:30,109 --> 00:06:31,649
this is gonna feel very comfortable.

00:06:31,650 --> 00:06:32,843
>> Yes, absolutely.

00:06:32,844 --> 00:06:35,203
>> They could and put this up and move a lot, if not all,

00:06:35,204 --> 00:06:37,843
of that staff from there internal data center into Azure.

00:06:37,844 --> 00:06:39,274
>> Yep. >> And it'll feel just exactly

00:06:39,275 --> 00:06:40,713
right cuz it is Cloud Foundry.

00:06:40,714 --> 00:06:43,592
>> Yes, and that's exactly what we see a lot with Cloud Foundry,

00:06:43,593 --> 00:06:46,271
there are companies will start running it on-premises.

00:06:46,272 --> 00:06:47,673
>> Mm-hm. >> And then look

00:06:47,674 --> 00:06:51,493
to move some of those workloads into the cloud into Azure.

00:06:51,494 --> 00:06:54,833
And a huge part of value that Cloud Founder provides is that

00:06:54,834 --> 00:06:56,408
consistency and that portability.

00:06:56,409 --> 00:06:57,193
>> Mm-hm.

00:06:57,194 --> 00:06:59,023
And once I've got and installed this,

00:06:59,024 --> 00:07:01,908
once I've said get it now on the Azure market place.

00:07:01,909 --> 00:07:02,828
>> Mm-hm. >> Does it have

00:07:02,829 --> 00:07:05,203
its own administration tools, do I have to update it?

00:07:05,204 --> 00:07:08,206
How much of this is manage versus how much attention do I

00:07:08,207 --> 00:07:10,817
need to pay to it as new versions of Cloud Foundry

00:07:10,818 --> 00:07:11,433
come out?

00:07:11,434 --> 00:07:15,393
>> Yeah, so one of the told that you get with the pivotal

00:07:15,394 --> 00:07:18,813
distribution of Cloud Foundry a tool called operations manager,

00:07:18,814 --> 00:07:21,033
which provides you with the opportunity to do all of that

00:07:22,073 --> 00:07:22,673
management.

00:07:22,674 --> 00:07:25,097
In fact, I can probably bring it up here.

00:07:25,098 --> 00:07:25,597
Oops.

00:07:31,338 --> 00:07:33,256
>> Oop, again, at your custom URL.

00:07:33,257 --> 00:07:39,383
>> Little bit of a [INAUDIBLE] issue there.

00:07:39,384 --> 00:07:43,771
>> Yeah, interesting, so you log in as yourself.

00:07:43,772 --> 00:07:47,312
And now, still you're logged in interestingly,

00:07:47,313 --> 00:07:49,452
Azure Microsoft AD person, so

00:07:49,453 --> 00:07:53,009
you're managing your resources part of Azure AD.

00:07:53,010 --> 00:07:54,010
>> Yep. >> And you can use

00:07:54,011 --> 00:07:56,423
that to then log in to the Pivotal Ops Manager.

00:07:56,424 --> 00:07:58,703
You can see your different versions of your runtimes.

00:07:58,704 --> 00:08:03,762
You can see the Azure logo there and some custom Azure things.

00:08:03,763 --> 00:08:05,706
>> Yeah, so we have support for

00:08:05,707 --> 00:08:08,303
what's known as a service broker.

00:08:08,304 --> 00:08:11,973
So Cloud Foundry applications typically follow the 12 Factor

00:08:11,974 --> 00:08:12,783
app model.

00:08:12,784 --> 00:08:14,733
So there's stateless applications and

00:08:14,734 --> 00:08:17,363
then you bind them to staple backend services.

00:08:17,364 --> 00:08:22,223
So the service broker allows you to create those services and

00:08:22,224 --> 00:08:24,613
bind them into those applications.

00:08:24,614 --> 00:08:26,493
And so we provide the Azure service broker so

00:08:26,494 --> 00:08:30,343
that you can connect that to Azure storage, Azure SQL,

00:08:30,344 --> 00:08:32,353
Redis, whole bunch of different services.

00:08:32,354 --> 00:08:35,573
And provide those as backend storage for your applications.

00:08:35,574 --> 00:08:37,667
You mentioned the operational model.

00:08:37,668 --> 00:08:41,294
If I jump in here to the elastic run-time tile and

00:08:41,295 --> 00:08:44,343
go down to resource configuration.

00:08:44,344 --> 00:08:47,083
You'll see basically a mirroring of what we saw

00:08:47,084 --> 00:08:50,043
in the Azure portal in terms of the resources.

00:08:50,044 --> 00:08:53,163
So these are all the different roles that are-

00:08:53,164 --> 00:08:54,692
>> There's all of your virtual

00:08:54,693 --> 00:08:57,203
machines, what role each one takes.

00:08:57,204 --> 00:08:59,523
Memory, I see you're standard.

00:08:59,524 --> 00:09:01,813
Yeah, standard F-1, your ram, your disc, everything.

00:09:01,814 --> 00:09:03,523
>> Yep, and so if I wanted to,

00:09:03,524 --> 00:09:05,943
as an operator of this environment,

00:09:05,944 --> 00:09:10,025
I see that the number of applications that are getting

00:09:10,026 --> 00:09:12,173
deployed are starting to fill up those resources.

00:09:12,174 --> 00:09:17,713
I can go in here and say add more VMs,

00:09:17,714 --> 00:09:21,243
and then if I push that in to the environment, it will go and

00:09:21,244 --> 00:09:24,733
spin those VMs up inside of Azure and

00:09:24,734 --> 00:09:27,483
just add them into the pool of resources.

00:09:27,484 --> 00:09:28,063
>> That's very cool.

00:09:28,064 --> 00:09:29,973
So then anyone who is a Cloud Foundry person,

00:09:29,974 --> 00:09:31,003
this is all gonna be old hat.

00:09:31,004 --> 00:09:31,953
They're gonna see this and

00:09:31,954 --> 00:09:34,103
they're gonna go well yeah, it's Cloud Foundry.

00:09:34,104 --> 00:09:34,603
>> Yep. >> And it

00:09:34,604 --> 00:09:36,063
automatically works in Azure.

00:09:36,064 --> 00:09:38,701
You've got the plugins and the nozzles.

00:09:38,702 --> 00:09:39,303
>> Yep.

00:09:39,304 --> 00:09:41,283
>> For things like logging that we saw.

00:09:41,284 --> 00:09:42,904
>> Yep. >> As well as an entree into

00:09:42,905 --> 00:09:45,547
other Azure services, whether it be storage or

00:09:45,548 --> 00:09:47,103
whatever you want to do.

00:09:47,104 --> 00:09:48,254
>> Yep. >> All right, cool, and

00:09:48,255 --> 00:09:50,333
you can go as big as you want and it's available now?

00:09:50,334 --> 00:09:53,843
>> Yep, this is generally available in Azure.

00:09:53,844 --> 00:09:56,093
And in fact, one off the things that we've done recently is

00:09:56,094 --> 00:09:58,693
Microsoft has joined the Cloud Foundry Foundation.

00:09:58,694 --> 00:10:02,433
So we're making an even bigger bet on this platform and

00:10:02,434 --> 00:10:04,683
providing it as a great option for

00:10:04,684 --> 00:10:07,323
companies that want to run all different kinds of

00:10:07,324 --> 00:10:09,773
applications in a consistent way on Azure.

00:10:09,774 --> 00:10:10,863
>> Very cool, thank you very much.

00:10:10,864 --> 00:10:11,713
>> All right.

00:10:11,720 --> 00:10:15,820
>> I'm learning all about Pivotal's Cloud Foundry here on Azure Friday.

00:10:15,853 --> 00:10:20,150

YouTube URL: https://www.youtube.com/watch?v=eqOCCcon5CQ


