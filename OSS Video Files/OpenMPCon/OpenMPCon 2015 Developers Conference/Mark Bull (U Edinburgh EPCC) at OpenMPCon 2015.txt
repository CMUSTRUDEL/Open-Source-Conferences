Title: Mark Bull (U Edinburgh EPCC) at OpenMPCon 2015
Publication date: 2015-10-11
Playlist: OpenMPCon 2015 Developers Conference
Description: 
	Mark Bull (U Edinburgh EPCC) talks to Matthijs van Waveren about an interesting application of hybrid MPI/OpenMP/SIMD programming. Recorded at OpenMPCon 2015, RWTH Aachen University, Aachen, Germany, September 30, 2015
Captions: 
	00:00:03,960 --> 00:00:12,340
hello mark and you're from the Europe

00:00:09,090 --> 00:00:14,350
EPCC Edinburgh parallel computing center

00:00:12,340 --> 00:00:17,550
that's right so we're here to open and

00:00:14,350 --> 00:00:21,339
be calm and thank you very much for your

00:00:17,550 --> 00:00:24,039
insightful presentation tips thick

00:00:21,339 --> 00:00:27,339
tricks and gob chest very welcome yes

00:00:24,039 --> 00:00:29,550
and you you're evangelizing for people

00:00:27,339 --> 00:00:32,830
to use default love for instance

00:00:29,550 --> 00:00:34,900
absolutely yes I think it said so

00:00:32,830 --> 00:00:36,760
unfortunately was maybe one of the

00:00:34,900 --> 00:00:41,650
really bad decisions that was rated the

00:00:36,760 --> 00:00:44,410
very very early days of OpenMP so it's

00:00:41,650 --> 00:00:46,210
it's a really important tool to use to

00:00:44,410 --> 00:00:48,910
to make sure that you don't get most

00:00:46,210 --> 00:00:51,130
conditions yeah Graham yeah so the

00:00:48,910 --> 00:00:54,970
adviser users yeah always always always

00:00:51,130 --> 00:00:58,030
easily found on and I always say I mean

00:00:54,970 --> 00:01:00,010
it no exceptions and I have no sympathy

00:00:58,030 --> 00:01:06,039
with my students if they don't do it

00:01:00,010 --> 00:01:07,719
Randy okay so at the EPC see you will

00:01:06,039 --> 00:01:11,799
come across a variety of applications

00:01:07,719 --> 00:01:14,890
using openmp sure with it yeah yeah can

00:01:11,799 --> 00:01:17,979
you describe one of the applications in

00:01:14,890 --> 00:01:20,560
use case where OpenMP is used yeah

00:01:17,979 --> 00:01:22,960
something that's there's really quite an

00:01:20,560 --> 00:01:25,210
unusual application is is one that a

00:01:22,960 --> 00:01:27,450
student tonight and I've been working on

00:01:25,210 --> 00:01:31,810
for the last couple of years or so and

00:01:27,450 --> 00:01:35,289
it's it's an application for pensions

00:01:31,810 --> 00:01:37,030
companies to they need to do the

00:01:35,289 --> 00:01:39,399
calculation to figure it essentially to

00:01:37,030 --> 00:01:43,149
figure out do they currently hold enough

00:01:39,399 --> 00:01:45,459
reserves to meet their obligations for

00:01:43,149 --> 00:01:47,139
all their pensioners and some of these

00:01:45,459 --> 00:01:49,479
pensions companies are very big they

00:01:47,139 --> 00:01:52,270
might they may they may hold half a

00:01:49,479 --> 00:01:53,680
million pensions for you know what

00:01:52,270 --> 00:01:57,790
repentance for half a million

00:01:53,680 --> 00:02:00,390
and we need to they need to do a

00:01:57,790 --> 00:02:02,890
basically a large Monte Carlo simulation

00:02:00,390 --> 00:02:05,440
so they need to take into account the

00:02:02,890 --> 00:02:08,530
fact that interest rates may vary in the

00:02:05,440 --> 00:02:10,330
future so that's one unknown and another

00:02:08,530 --> 00:02:12,280
unknown is they don't know what the

00:02:10,330 --> 00:02:14,770
mortality rate of people they don't

00:02:12,280 --> 00:02:16,420
really know in the future how you know

00:02:14,770 --> 00:02:19,990
how fast people are going how long

00:02:16,420 --> 00:02:21,550
people are going to live what what the

00:02:19,990 --> 00:02:25,540
mortality is going to be so they need to

00:02:21,550 --> 00:02:27,310
do is large Monte Carlo simulation which

00:02:25,540 --> 00:02:29,890
is quite expensive and the solution

00:02:27,310 --> 00:02:32,530
we've come up with is a hybrid solution

00:02:29,890 --> 00:02:36,820
so at the outer level for the Monte

00:02:32,530 --> 00:02:38,620
Carlo part we use MPI and we are using

00:02:36,820 --> 00:02:41,800
so we did they need to do a thousand

00:02:38,620 --> 00:02:44,500
thousand multicolor scenarios as we can

00:02:41,800 --> 00:02:46,510
use a thousand to MPI processes because

00:02:44,500 --> 00:02:48,940
that part's essentially trivially to me

00:02:46,510 --> 00:02:51,640
parallel but we'd like to get some more

00:02:48,940 --> 00:02:54,100
parallelism out of that so we then

00:02:51,640 --> 00:02:57,730
inside in every mpi process we use

00:02:54,100 --> 00:03:01,209
openmp to exploit the power ilysm over

00:02:57,730 --> 00:03:03,910
the different policyholders second layer

00:03:01,209 --> 00:03:05,860
of powers and there we can use and it's

00:03:03,910 --> 00:03:08,410
convenient to use open mp4 that for a

00:03:05,860 --> 00:03:10,660
couple of reasons and so there is some

00:03:08,410 --> 00:03:12,760
dynamic load balancing required that's

00:03:10,660 --> 00:03:15,280
essentially because the amount of work

00:03:12,760 --> 00:03:17,620
that you need to do for one particular

00:03:15,280 --> 00:03:20,350
policy depends on the current age of the

00:03:17,620 --> 00:03:22,060
policyholder so the older you are the

00:03:20,350 --> 00:03:24,250
less computation we need to do because

00:03:22,060 --> 00:03:28,930
the sooner you we listened sooner we

00:03:24,250 --> 00:03:30,580
know you're going to be dead so that's

00:03:28,930 --> 00:03:33,070
so that's nice and the other thing we do

00:03:30,580 --> 00:03:36,700
is we also try to exploit vectorization

00:03:33,070 --> 00:03:39,959
so we use a blocking strategy and we can

00:03:36,700 --> 00:03:41,900
we are using the the new OpenMP simdi

00:03:39,959 --> 00:03:44,090
directives to

00:03:41,900 --> 00:03:45,799
nable the vector vectorization so we

00:03:44,090 --> 00:03:47,450
have so essentially we have these three

00:03:45,799 --> 00:03:50,900
levels of Parliament the we're

00:03:47,450 --> 00:03:52,849
exploiting here and it's really nice so

00:03:50,900 --> 00:03:55,849
a lot of the work we've done is to

00:03:52,849 --> 00:03:59,659
improve the algorithms but essentially

00:03:55,849 --> 00:04:01,220
what we've gone from is a case which in

00:03:59,659 --> 00:04:04,549
the industry using industry standard

00:04:01,220 --> 00:04:07,579
software is completely computationally

00:04:04,549 --> 00:04:11,390
infeasible to something that we can

00:04:07,579 --> 00:04:14,569
solve on a few thousand cause here in

00:04:11,390 --> 00:04:16,729
about ten minutes so this is from the

00:04:14,569 --> 00:04:18,739
financial were on the financial were a

00:04:16,729 --> 00:04:20,989
natural world yes and this is a problem

00:04:18,739 --> 00:04:24,080
that is also existing in the financial

00:04:20,989 --> 00:04:26,810
world yes absolutely so it's a it's

00:04:24,080 --> 00:04:29,510
essentially a regulatory requirement so

00:04:26,810 --> 00:04:32,630
the financial regulators will require

00:04:29,510 --> 00:04:36,070
that the financial companies do do this

00:04:32,630 --> 00:04:39,440
calculation to prove that they have

00:04:36,070 --> 00:04:41,720
sufficient reserves to prove to the

00:04:39,440 --> 00:04:44,050
regulators that they are that they are

00:04:41,720 --> 00:04:46,610
that they are holding enough reserves

00:04:44,050 --> 00:04:49,460
which we in the aftermath of we are

00:04:46,610 --> 00:04:52,940
massively answered the cry CLE 2008

00:04:49,460 --> 00:04:54,650
crisis yeah so instant they happen they

00:04:52,940 --> 00:04:57,349
will have to do this calculation have

00:04:54,650 --> 00:04:59,270
noted a new york your method method can

00:04:57,349 --> 00:05:00,590
be you will enable them to actually do

00:04:59,270 --> 00:05:02,510
it at the moment they're just holding

00:05:00,590 --> 00:05:04,310
their hands out there and saying we

00:05:02,510 --> 00:05:06,830
cannot do this yeah this is impossible

00:05:04,310 --> 00:05:08,570
it is absolutely impossible so this is a

00:05:06,830 --> 00:05:11,750
very valuable contribution to the

00:05:08,570 --> 00:05:13,370
financial we hope it will be yes okay

00:05:11,750 --> 00:05:16,940
great well thank you very much yeah

00:05:13,370 --> 00:05:19,419
that's it for your time yeah just right

00:05:16,940 --> 00:05:19,419

YouTube URL: https://www.youtube.com/watch?v=zF5YrKU5yl0


