Title: [2019] Keynote: QEMU Status Report by Paolo Bonzini
Publication date: 2019-11-07
Playlist: KVM Forum 2019
Description: 
	Paolo Bonzini
Red Hat, Inc.
Sr. Principal Software Engineer

Paolo is a long-time KVM contributor and co-maintainer; he also co-maintains some subsystems in QEMU. He works at Red Hat.

Note: We apologize for lower video quality due to technical problems.
Captions: 
	00:00:00,590 --> 00:00:02,740
[Music]

00:00:07,250 --> 00:00:11,750
so thanks everyone

00:00:09,269 --> 00:00:15,809
thanks Kristen for the key institution

00:00:11,750 --> 00:00:19,859
let's go on with QM start to support so

00:00:15,809 --> 00:00:24,779
since last year we we've had three

00:00:19,859 --> 00:00:27,570
releases with a slightly odd choice of

00:00:24,779 --> 00:00:30,230
release numbers and the reason for the

00:00:27,570 --> 00:00:33,030
release numbers is that we decided to

00:00:30,230 --> 00:00:35,520
have a new scheme where every year we

00:00:33,030 --> 00:00:37,800
get a new major release with no semantic

00:00:35,520 --> 00:00:40,410
versioning increase it we try to have

00:00:37,800 --> 00:00:43,399
strong backwards compatibility so don't

00:00:40,410 --> 00:00:47,610
read too much into version numbers but

00:00:43,399 --> 00:00:51,239
anyway then we are gonna put the good

00:00:47,610 --> 00:00:52,770
four months release cadence where if you

00:00:51,239 --> 00:00:56,039
check last year's you know

00:00:52,770 --> 00:00:59,579
even the day in the month are more or

00:00:56,039 --> 00:01:01,379
less the same anyway well is this in

00:00:59,579 --> 00:01:03,930
December it will I know who seems to be

00:01:01,379 --> 00:01:06,810
a scheme that works well for both pace

00:01:03,930 --> 00:01:10,979
of development and keeping the project

00:01:06,810 --> 00:01:13,229
stable actually 4.0 besides just being

00:01:10,979 --> 00:01:15,810
the first release in 2019 was also Polly

00:01:13,229 --> 00:01:18,750
with good release because it was the

00:01:15,810 --> 00:01:23,189
largest ever with almost 3,500 commits

00:01:18,750 --> 00:01:27,090
and we had a lot of new features in

00:01:23,189 --> 00:01:30,030
nineteen a lot of new also a factoring

00:01:27,090 --> 00:01:32,610
that took a lot of commitment were

00:01:30,030 --> 00:01:35,340
finally finished this time so let's see

00:01:32,610 --> 00:01:37,079
what we did this of course everybody

00:01:35,340 --> 00:01:39,600
loves what clouds I don't know if they

00:01:37,079 --> 00:01:45,210
are already out of fashion but they look

00:01:39,600 --> 00:01:47,189
cool so this is only done with the first

00:01:45,210 --> 00:01:49,560
part of the commit messages this stuff

00:01:47,189 --> 00:01:52,110
before the with the : so you can see

00:01:49,560 --> 00:01:55,950
what we work on we work on hardware we

00:01:52,110 --> 00:02:00,740
work on targets not very surprising of

00:01:55,950 --> 00:02:03,930
course we work on QM itself not bad and

00:02:00,740 --> 00:02:11,129
we work on G we work on tests a lot you

00:02:03,930 --> 00:02:13,370
can see both tests here and IO tests as

00:02:11,129 --> 00:02:16,310
well and top in the middle

00:02:13,370 --> 00:02:19,040
so this is the kind of stuff that you

00:02:16,310 --> 00:02:22,190
can expect and also let's see the part

00:02:19,040 --> 00:02:24,410
after the : so you can see what we do we

00:02:22,190 --> 00:02:25,519
fix stuff and we add stuff so probably

00:02:24,410 --> 00:02:28,340
the other way around

00:02:25,519 --> 00:02:30,319
first we add it and then we fix it we

00:02:28,340 --> 00:02:32,810
also support a lot of things and we use

00:02:30,319 --> 00:02:37,310
a lot of things but fortunately we also

00:02:32,810 --> 00:02:41,150
test things so after maybe after fixing

00:02:37,310 --> 00:02:42,830
it up before I don't knows but you can

00:02:41,150 --> 00:02:44,989
get some glimpse into how the

00:02:42,830 --> 00:02:48,200
development works not just for TMO

00:02:44,989 --> 00:02:50,989
probably adding and fixing things let's

00:02:48,200 --> 00:02:54,019
look at the highlights though we have

00:02:50,989 --> 00:02:56,410
deprecated Python to support one year in

00:02:54,019 --> 00:03:03,019
advance compared to the end of life of

00:02:56,410 --> 00:03:05,180
Python to one item that is maybe not the

00:03:03,019 --> 00:03:07,099
most visible change but certainly one of

00:03:05,180 --> 00:03:09,379
the more interesting thing is the

00:03:07,099 --> 00:03:12,170
integration with K config so that you

00:03:09,379 --> 00:03:15,170
can add new boards without knowing

00:03:12,170 --> 00:03:17,989
details of all subsystems and also you

00:03:15,170 --> 00:03:20,329
can easily build you a new with a subset

00:03:17,989 --> 00:03:23,299
of supported boards and devices and if

00:03:20,329 --> 00:03:27,590
you think that this is a smart plug of

00:03:23,299 --> 00:03:32,090
my own talk you're completely wrong we

00:03:27,590 --> 00:03:36,099
have also added the fastboot of x86

00:03:32,090 --> 00:03:40,819
guests with PVH which was contributed by

00:03:36,099 --> 00:03:44,380
half or : alpha that and also with them

00:03:40,819 --> 00:03:49,669
a mapping of the kernels so that you can

00:03:44,380 --> 00:03:53,989
have multiple guys with limited memory

00:03:49,669 --> 00:03:55,700
footprint we also have started process

00:03:53,989 --> 00:03:58,430
that will probably take a while but

00:03:55,700 --> 00:04:02,030
starting it is always the best thing to

00:03:58,430 --> 00:04:04,069
have it in the first place converting

00:04:02,030 --> 00:04:06,519
the commentation to be based on sphinx

00:04:04,069 --> 00:04:09,319
and to have better structured

00:04:06,519 --> 00:04:12,349
documentation and manuals and also the

00:04:09,319 --> 00:04:14,299
last edition for from this week we have

00:04:12,349 --> 00:04:18,310
started the support for bit of vertigo

00:04:14,299 --> 00:04:22,400
1.1 you might heard about it yesterday

00:04:18,310 --> 00:04:24,590
from michael there were a lot of other

00:04:22,400 --> 00:04:26,060
talks in the past years about new world

00:04:24,590 --> 00:04:30,350
to formats and

00:04:26,060 --> 00:04:32,000
other new things on video 1.1 and this

00:04:30,350 --> 00:04:33,770
will certainly be useful to push

00:04:32,000 --> 00:04:38,000
performance on whatever devices in the

00:04:33,770 --> 00:04:40,910
future also happily ever after

00:04:38,000 --> 00:04:46,070
cata containers is now using to remove

00:04:40,910 --> 00:04:49,060
after some folks in the past now in the

00:04:46,070 --> 00:04:53,540
end with the 1.8 release gemu is

00:04:49,060 --> 00:04:56,390
upgraded to qm 4.0 so coming for that 0

00:04:53,540 --> 00:05:00,820
also has this good thing to say about

00:04:56,390 --> 00:05:03,020
itself so how do we do the development

00:05:00,820 --> 00:05:06,260
we have a lot of continuous integration

00:05:03,020 --> 00:05:11,390
systems I could have also inserted the

00:05:06,260 --> 00:05:13,220
xkcd comic where somebody has 14

00:05:11,390 --> 00:05:15,470
standards and the best thing to improve

00:05:13,220 --> 00:05:18,590
things is to make 15 standards so we

00:05:15,470 --> 00:05:20,330
have 7 continuous integration systems

00:05:18,590 --> 00:05:24,890
and maybe we will have 8 next year I

00:05:20,330 --> 00:05:28,850
don't know so each of these tests

00:05:24,890 --> 00:05:32,660
something different there is Travis for

00:05:28,850 --> 00:05:35,510
a lot of build combinations acceptance

00:05:32,660 --> 00:05:37,729
tests covering various guests we have

00:05:35,510 --> 00:05:42,110
cost compilers sonship people we have

00:05:37,729 --> 00:05:43,760
BSD compiler compiles on zeroes we have

00:05:42,110 --> 00:05:47,510
get lab which is interesting because it

00:05:43,760 --> 00:05:49,820
also applies to maintain s and

00:05:47,510 --> 00:05:52,370
developers it's not just limited to what

00:05:49,820 --> 00:05:54,410
ends up in community it can also be used

00:05:52,370 --> 00:05:56,690
by maintenance to test their own stuff

00:05:54,410 --> 00:05:58,729
before sanim pull request we have

00:05:56,690 --> 00:06:01,640
Coverity where we are really close to

00:05:58,729 --> 00:06:04,280
zero the facts actually we sometimes get

00:06:01,640 --> 00:06:06,440
and then regress and then fix things we

00:06:04,280 --> 00:06:07,479
add and fix stuff we also had Coverity

00:06:06,440 --> 00:06:11,000
defects and fix them

00:06:07,479 --> 00:06:13,130
we have pachoo which is our beloved tool

00:06:11,000 --> 00:06:16,690
to apply in test patches that are sent

00:06:13,130 --> 00:06:21,560
to the mailing list and also we have the

00:06:16,690 --> 00:06:25,400
TCG emulation accuracy tests based on

00:06:21,560 --> 00:06:27,320
Rizzo from Lenovo and usually most of

00:06:25,400 --> 00:06:29,360
them are passing sometimes there are

00:06:27,320 --> 00:06:32,419
issues which is why we have more more

00:06:29,360 --> 00:06:34,010
than just one as usual we have

00:06:32,419 --> 00:06:34,970
participating in google Summer of Code

00:06:34,010 --> 00:06:37,940
and outreaching

00:06:34,970 --> 00:06:38,740
we had 5 projects accepted and 4 of them

00:06:37,940 --> 00:06:44,380
passed

00:06:38,740 --> 00:06:47,120
and phasing of chemo for more secure

00:06:44,380 --> 00:06:49,370
emulation improving measurement of

00:06:47,120 --> 00:06:54,740
technical generation quality from vinyl

00:06:49,370 --> 00:06:57,650
son support form of 4vx within TCG from

00:06:54,740 --> 00:07:02,900
yan and for ichi there was a uring

00:06:57,650 --> 00:07:04,550
support for russia and actually some of

00:07:02,900 --> 00:07:06,650
these have already been merged

00:07:04,550 --> 00:07:08,630
especially a gaussian wondersin have

00:07:06,650 --> 00:07:13,040
started contributing patches that have

00:07:08,630 --> 00:07:16,180
gotten in camo for the two and alexander

00:07:13,040 --> 00:07:19,760
is also working on his qm phasing driver

00:07:16,180 --> 00:07:22,310
also some updates to projects from the

00:07:19,760 --> 00:07:23,720
police here emerged ok configure was

00:07:22,310 --> 00:07:26,090
actually a project that started in

00:07:23,720 --> 00:07:29,060
Summer of Code took only six years to

00:07:26,090 --> 00:07:30,830
finish it but we got there and also the

00:07:29,060 --> 00:07:32,660
aq test-drive a framework form last year

00:07:30,830 --> 00:07:35,920
was also presented at given form and

00:07:32,660 --> 00:07:39,830
it's part of the test that we ran and

00:07:35,920 --> 00:07:42,500
kuhmo also has the Hall of Fame let's

00:07:39,830 --> 00:07:44,980
start from commits and Peter model like

00:07:42,500 --> 00:07:48,170
just Dwarfs everyone else especially

00:07:44,980 --> 00:07:52,070
considering that even if you remove the

00:07:48,170 --> 00:07:53,510
merge commits he still is by far first

00:07:52,070 --> 00:07:54,020
in the Hall of Fame in there in the

00:07:53,510 --> 00:07:58,400
ranking

00:07:54,020 --> 00:08:00,350
followed by Gibson and myself so this is

00:07:58,400 --> 00:08:02,870
not patches written by people it's

00:08:00,350 --> 00:08:06,110
patches committed so mostly armed people

00:08:02,870 --> 00:08:09,920
PowerPC people and random stuff for

00:08:06,110 --> 00:08:11,630
myself if you look at committee authored

00:08:09,920 --> 00:08:14,390
though it's not like it's very much

00:08:11,630 --> 00:08:16,760
different because Peter is also there in

00:08:14,390 --> 00:08:19,690
second place but this time is we shall

00:08:16,760 --> 00:08:23,240
handle some whiting lot of things and

00:08:19,690 --> 00:08:26,510
Philip also comes in in third place with

00:08:23,240 --> 00:08:29,210
a lot of interesting work on refactoring

00:08:26,510 --> 00:08:30,440
cleaning things up and making things

00:08:29,210 --> 00:08:34,280
more maintainable

00:08:30,440 --> 00:08:37,400
so all of these people should be thanked

00:08:34,280 --> 00:08:40,430
but before thanking all in the list

00:08:37,400 --> 00:08:43,460
let's also look at the reviews and there

00:08:40,430 --> 00:08:45,110
Philip is also like reviewing things at

00:08:43,460 --> 00:08:49,300
the pace of two patches per day

00:08:45,110 --> 00:08:49,300
including Saturday Sunday and Christmas

00:08:49,390 --> 00:08:54,990
followed by Richard Henderson and also

00:08:52,510 --> 00:08:57,280
my culture and so some people's name

00:08:54,990 --> 00:08:59,530
reoccurring but there's also people that

00:08:57,280 --> 00:09:01,330
focus more on applying other people's

00:08:59,530 --> 00:09:04,330
patches some people focus more on

00:09:01,330 --> 00:09:07,330
reviews so I think it's a balance mix

00:09:04,330 --> 00:09:11,620
where everybody can find their place in

00:09:07,330 --> 00:09:18,460
the community so what's next so there

00:09:11,620 --> 00:09:20,760
are a couple of quizzes here so what is

00:09:18,460 --> 00:09:26,830
this anybody can guess about it

00:09:20,760 --> 00:09:30,580
yeah asked so there's a lot of buzz

00:09:26,830 --> 00:09:34,030
about rust and we are considering

00:09:30,580 --> 00:09:37,180
replacing some parts of QM with parts

00:09:34,030 --> 00:09:39,100
with any rust it's not going to be a

00:09:37,180 --> 00:09:42,070
wholesaler right that would not be

00:09:39,100 --> 00:09:44,910
neither possible probably no really good

00:09:42,070 --> 00:09:50,950
use of our time but certainly there are

00:09:44,910 --> 00:09:53,560
particular places where security is more

00:09:50,950 --> 00:09:56,070
important than other places and safety

00:09:53,560 --> 00:10:00,370
especially and Russ can help for those

00:09:56,070 --> 00:10:04,570
so what are these people doing pulling

00:10:00,370 --> 00:10:06,580
so you can also see like when somebody

00:10:04,570 --> 00:10:08,770
sends a pull request it's kind of

00:10:06,580 --> 00:10:10,540
tug-of-war between the person sending

00:10:08,770 --> 00:10:13,180
requests and the maintainer rejecting it

00:10:10,540 --> 00:10:16,030
because it breaks some compilation on

00:10:13,180 --> 00:10:20,200
some machine so in order to avoid this

00:10:16,030 --> 00:10:22,450
we are also thinking of doing a more

00:10:20,200 --> 00:10:24,790
automated gating seei so that at least

00:10:22,450 --> 00:10:26,530
one side is sending the proquest but

00:10:24,790 --> 00:10:29,140
it's a machine that is rejecting it

00:10:26,530 --> 00:10:32,110
which maybe makes me feel better I don't

00:10:29,140 --> 00:10:33,730
know for not wasting time of Peter the

00:10:32,110 --> 00:10:37,120
other release managers and also this

00:10:33,730 --> 00:10:39,040
would allow increasing the bus factor

00:10:37,120 --> 00:10:42,760
and especially also allowing people to

00:10:39,040 --> 00:10:45,550
take turns and not have just one person

00:10:42,760 --> 00:10:48,100
handing all religious and finally this

00:10:45,550 --> 00:10:49,900
is a bit more tricky but maybe there is

00:10:48,100 --> 00:10:56,370
some physicists among you I don't know

00:10:49,900 --> 00:11:02,290
do you know what these guys it's amazing

00:10:56,370 --> 00:11:05,170
so so one of the things that may be

00:11:02,290 --> 00:11:09,060
interesting for new chiamo developers is

00:11:05,170 --> 00:11:09,060
the build system so we are considering

00:11:09,180 --> 00:11:16,420
switching or at least starting including

00:11:13,379 --> 00:11:18,339
a more specialized build system than

00:11:16,420 --> 00:11:22,079
what we have built over the years with

00:11:18,339 --> 00:11:24,430
shell scripts and make files so

00:11:22,079 --> 00:11:28,750
unfortunately despite my love for me the

00:11:24,430 --> 00:11:31,149
choice wasn't Auto Kampf I sincerely

00:11:28,750 --> 00:11:34,480
love outer curve but I also think that

00:11:31,149 --> 00:11:36,939
Mazin is a is a very good build systems

00:11:34,480 --> 00:11:38,379
and this could be one that maybe news in

00:11:36,939 --> 00:11:41,410
in the future in QM

00:11:38,379 --> 00:11:44,439
so thank you and let's move on to the

00:11:41,410 --> 00:11:48,750
next part with the talks and let's start

00:11:44,439 --> 00:11:48,750
with divert from Daniel

00:11:52,130 --> 00:11:59,000

YouTube URL: https://www.youtube.com/watch?v=6_1QQaXPjd4


