Title: A Perfect Solution for Live Migration with Pass-through Devices by Quan Xu
Publication date: 2018-11-17
Playlist: KVM Forum 2018
Description: 
	Several efforts have been made on enabling live migration with pass-through devices, however, it is inevitable to modify device driver to save and restore device states, and mark a page as dirty after DMA memory access. These ‘ugly’ modifications are not compatible with legacy drivers or Windows virtual machine.
We design new virtio hardware devices (virtio-net based Nic and virtio-blk based storage). These devices can be pass-through with VFIO, then the legacy virtio-net/virtio-blk drivers are working without any modification in virtual machine, including Windows. We also extend the capability of devices to support live migration, including being aware of live migration, logging the page of DMA memory access, saving and restoring device states on run-time. And then we extend the migration and VFIO code to support live migration with pass-through these devices as QEMU 'emulated' devices.

---

Quan Xu
staff engineer
alibaba

Xen community vTPM maintainer, committer | KVM committer
Captions: 
	00:00:01,040 --> 00:00:09,120
[Music]

00:00:05,960 --> 00:00:13,139
hello i'm chen from from China

00:00:09,120 --> 00:00:16,260
Alibaba cloud my topics the profess

00:00:13,139 --> 00:00:21,779
solution for Lamar migration will pass

00:00:16,260 --> 00:00:23,550
through device wasn't my topic at first

00:00:21,779 --> 00:00:27,599
let me introduce the background

00:00:23,550 --> 00:00:32,009
background background of this topic some

00:00:27,599 --> 00:00:35,250
other device past alluded to VM and the

00:00:32,009 --> 00:00:39,570
benefit our customers directly such as

00:00:35,250 --> 00:00:41,820
GPU device but in my topic the pass

00:00:39,570 --> 00:00:46,230
through devices whether a hardware

00:00:41,820 --> 00:00:50,010
device what our hardwood device is was

00:00:46,230 --> 00:00:54,570
introduced in last in lastik IBM open

00:00:50,010 --> 00:00:57,000
forum master came open forum Yamaha you

00:00:54,570 --> 00:01:00,930
may find something stranger points as

00:00:57,000 --> 00:01:06,180
the humor but what I advised we always

00:01:00,930 --> 00:01:11,040
always kill me am little device and IBM

00:01:06,180 --> 00:01:13,740
and vm v MJ front end Java can

00:01:11,040 --> 00:01:18,900
communicate with the back end pivot back

00:01:13,740 --> 00:01:22,759
and directly no needed to use VF IO like

00:01:18,900 --> 00:01:26,729
other device device pass-through device

00:01:22,759 --> 00:01:32,189
whenever GV fio2 pass through the but I

00:01:26,729 --> 00:01:36,030
advised to 12 a.m. and the front end the

00:01:32,189 --> 00:01:37,259
Java is working as you use no need no

00:01:36,030 --> 00:01:43,530
need to patch them

00:01:37,259 --> 00:01:48,259
I support VM minus VM and Windows Linux

00:01:43,530 --> 00:01:48,259
and Windows Windows virtual machine and

00:01:50,390 --> 00:01:57,350
the front-end front-end story

00:02:02,310 --> 00:02:11,620
as some other des lieux device just for

00:02:08,800 --> 00:02:14,739
for load balance and software meeting

00:02:11,620 --> 00:02:18,880
and maintenance well and migrations must

00:02:14,739 --> 00:02:22,150
to have in public cloud data centers but

00:02:18,880 --> 00:02:27,160
a sofa AB students support la migration

00:02:22,150 --> 00:02:30,489
with past load device also there's some

00:02:27,160 --> 00:02:32,980
QC to enable enable pass through pass

00:02:30,489 --> 00:02:34,799
through device with weather with past

00:02:32,980 --> 00:02:39,910
land migration will pass through device

00:02:34,799 --> 00:02:49,000
I will also talk about them Li incoming

00:02:39,910 --> 00:02:51,549
incoming page before - before - dug into

00:02:49,000 --> 00:02:54,280
the land migration with with pass

00:02:51,549 --> 00:03:00,700
through device let me introduce the

00:02:54,280 --> 00:03:02,890
general general emigration flow llama

00:03:00,700 --> 00:03:07,540
creation is the interesting ongoing

00:03:02,890 --> 00:03:09,790
topic at at migration stat which was

00:03:07,540 --> 00:03:14,440
that lock dirtiest and mark all the

00:03:09,790 --> 00:03:16,959
pages thirties and during iterate copies

00:03:14,440 --> 00:03:23,139
we should keep standing chemist 1830

00:03:16,959 --> 00:03:27,250
page to destination and stop stop device

00:03:23,139 --> 00:03:32,230
stop and copy stage stop the device if

00:03:27,250 --> 00:03:35,400
the condition reached and standing the

00:03:32,230 --> 00:03:39,760
remaining 30 page to destinations and

00:03:35,400 --> 00:03:43,170
resume the VM on destination also we

00:03:39,760 --> 00:03:47,230
should register a virtual device device

00:03:43,170 --> 00:03:55,260
stable device and restore what is divine

00:03:47,230 --> 00:04:00,340
status on destination on general or

00:03:55,260 --> 00:04:03,450
migration froze VM is not involved from

00:04:00,340 --> 00:04:07,359
VM views Vista peel memorized or

00:04:03,450 --> 00:04:10,780
devastate the same from host host a to

00:04:07,359 --> 00:04:12,210
host the be the earlier between the stop

00:04:10,780 --> 00:04:17,160
and copy

00:04:12,210 --> 00:04:20,600
the same stage for the CPU and virtual

00:04:17,160 --> 00:04:25,400
device as it's easy to save and restore

00:04:20,600 --> 00:04:29,190
but memory lost lost lost complex

00:04:25,400 --> 00:04:32,040
because not only wish to be used but

00:04:29,190 --> 00:04:36,690
Autobody device to rest

00:04:32,040 --> 00:04:42,270
lots of vm their memories PL can help us

00:04:36,690 --> 00:04:45,830
to check the dirty that he that he the

00:04:42,270 --> 00:04:49,500
dirty page found visibly new rights and

00:04:45,830 --> 00:04:53,630
when virtual device was the vm memories

00:04:49,500 --> 00:04:56,780
should updates 30 bitmap and then q

00:04:53,630 --> 00:05:00,800
signals that carry a modal bitmap and

00:04:56,780 --> 00:05:11,880
check for the corresponding page to

00:05:00,800 --> 00:05:15,920
destination what's that

00:05:11,880 --> 00:05:18,030
what's the problem to enable past

00:05:15,920 --> 00:05:20,780
lamellar migration will pass through

00:05:18,030 --> 00:05:24,990
device and what's the difference between

00:05:20,780 --> 00:05:29,250
general general and migration migration

00:05:24,990 --> 00:05:31,500
will pass to device first which will

00:05:29,250 --> 00:05:35,310
change as general land migration flows

00:05:31,500 --> 00:05:37,710
we should we should stay of the VCO

00:05:35,310 --> 00:05:41,430
state and the virtual device state from

00:05:37,710 --> 00:05:46,380
from whole source host to destination to

00:05:41,430 --> 00:05:49,860
destination and but not only the batter

00:05:46,380 --> 00:05:54,450
memories looks much a big challenge

00:05:49,860 --> 00:05:56,630
because not VC not only be CPU which

00:05:54,450 --> 00:05:59,820
device writes

00:05:56,630 --> 00:06:05,190
theme memories but also the device TM

00:05:59,820 --> 00:06:09,390
way were right the memories and so far

00:06:05,190 --> 00:06:10,880
as our memory you is tanta supporters

00:06:09,390 --> 00:06:16,370
who checks the

00:06:10,880 --> 00:06:20,270
that in 30 page and mmm the spackle

00:06:16,370 --> 00:06:24,470
published but the harvest is only load

00:06:20,270 --> 00:06:26,780
map panel daddy's also we should which

00:06:24,470 --> 00:06:30,650
was the virtual sales the hardware

00:06:26,780 --> 00:06:35,840
device state to from source to

00:06:30,650 --> 00:06:39,620
destination but device in no design no

00:06:35,840 --> 00:06:43,760
design for llama creations such as Intel

00:06:39,620 --> 00:06:48,170
Nick Nick a lot of a lot of register and

00:06:43,760 --> 00:06:54,490
read-only and it's not it's not easy to

00:06:48,170 --> 00:06:54,490
save them analyst or on land on one hand

00:06:58,150 --> 00:07:04,460
introduces the POC in detail

00:07:00,890 --> 00:07:09,970
first is from Intel Intel introduced

00:07:04,460 --> 00:07:14,810
step emulation layer for until internic

00:07:09,970 --> 00:07:17,780
it based on vm device Java is they save

00:07:14,810 --> 00:07:22,640
save and restore later writes register

00:07:17,780 --> 00:07:27,470
it only register stateless maybe they

00:07:22,640 --> 00:07:31,220
leave them inconsistent with device data

00:07:27,470 --> 00:07:34,790
and a Java also introduced a staff

00:07:31,220 --> 00:07:39,290
average device DMA page make a per page

00:07:34,790 --> 00:07:42,170
terabytes the interrupt handler Tamil

00:07:39,290 --> 00:07:45,920
artist with a bite and a yottabyte then

00:07:42,170 --> 00:07:51,050
when PMO is enabled can help us check

00:07:45,920 --> 00:07:53,780
the HTML page also the second is ladies

00:07:51,050 --> 00:07:56,630
and hardware and the demo gyros status

00:07:53,780 --> 00:07:59,270
Tom's mattnic

00:07:56,630 --> 00:08:02,390
because this is designed for Lama

00:07:59,270 --> 00:08:04,610
gracious so it should be aware of lamb

00:08:02,390 --> 00:08:07,910
occasion when lamb aggression start

00:08:04,610 --> 00:08:12,160
issue start start to lock the lock at

00:08:07,910 --> 00:08:17,180
the dirty page and oh sorry

00:08:12,160 --> 00:08:20,270
start start locker dirty dirty page also

00:08:17,180 --> 00:08:21,190
a Java is supposed step emulate device

00:08:20,270 --> 00:08:25,450
the

00:08:21,190 --> 00:08:27,940
Paige is the first one and all register

00:08:25,450 --> 00:08:32,530
later lights working still we can still

00:08:27,940 --> 00:08:36,159
understand on one time understood is our

00:08:32,530 --> 00:08:41,349
mmio set the field impatient and cheese

00:08:36,159 --> 00:08:45,010
yes the VDD spec is published but vdd

00:08:41,349 --> 00:08:48,090
hard worst onload map but no dradis I

00:08:45,010 --> 00:08:54,910
think that this the best solutions who

00:08:48,090 --> 00:09:01,000
checked the EMA page but I don't know

00:08:54,910 --> 00:09:03,790
when it's ready I will introduce my my

00:09:01,000 --> 00:09:06,910
solutions our solution our solution is

00:09:03,790 --> 00:09:10,570
best based on Intel but I or hardwood

00:09:06,910 --> 00:09:13,630
device we extend the capabilities of

00:09:10,570 --> 00:09:16,230
device and extend the migration

00:09:13,630 --> 00:09:20,940
migration code and the VFR a framework

00:09:16,230 --> 00:09:24,970
to leverage this new capabilities

00:09:20,940 --> 00:09:27,460
details incoming page first a new

00:09:24,970 --> 00:09:29,320
capability of device it should be aware

00:09:27,460 --> 00:09:32,260
of land migrations

00:09:29,320 --> 00:09:36,910
yes I'd start a start our migration sure

00:09:32,260 --> 00:09:42,270
they should log start log and allocated

00:09:36,910 --> 00:09:47,980
device 3030 bitmap also introduced a

00:09:42,270 --> 00:09:51,760
30/30 bitmap on coming page and also as

00:09:47,980 --> 00:09:54,670
a list or device state on one hand on

00:09:51,760 --> 00:09:57,010
all the register and later writes we can

00:09:54,670 --> 00:10:02,800
still them and restore them as the

00:09:57,010 --> 00:10:07,150
amulet device also extend the back

00:10:02,800 --> 00:10:07,890
relation in Kobach there were all a

00:10:07,150 --> 00:10:10,810
migration

00:10:07,890 --> 00:10:14,710
first we should our case as a start of

00:10:10,810 --> 00:10:19,300
Lamberg relations which was we should

00:10:14,710 --> 00:10:21,070
start log log dirty talk the device 30

00:10:19,300 --> 00:10:25,750
page and Stalin McLuhan

00:10:21,070 --> 00:10:29,220
an allocate devised 30 bitmap based on

00:10:25,750 --> 00:10:32,430
VM size one page per bit

00:10:29,220 --> 00:10:39,899
and stop the lock the device DM a page

00:10:32,430 --> 00:10:43,829
after stop and a copy let me introduce

00:10:39,899 --> 00:10:49,519
device dirty bitmap and in details first

00:10:43,829 --> 00:10:51,899
is based on vm vm memory size and a DMA

00:10:49,519 --> 00:10:54,990
anesthetic respond the device should

00:10:51,899 --> 00:10:57,860
have capabilities to DMA anesthetic

00:10:54,990 --> 00:11:02,310
corresponding Peter in the vast bitmap

00:10:57,860 --> 00:11:04,529
also come you can synchronize and clear

00:11:02,310 --> 00:11:07,620
the corresponding bit in the master the

00:11:04,529 --> 00:11:17,430
bitmap and all the action should be

00:11:07,620 --> 00:11:19,500
atomic both software and hardware during

00:11:17,430 --> 00:11:24,569
the lab migrations the device states

00:11:19,500 --> 00:11:29,129
include Kim SAE configurations MSI act

00:11:24,569 --> 00:11:34,230
stable and but our device common States

00:11:29,129 --> 00:11:37,559
and but our specific States under for

00:11:34,230 --> 00:11:40,769
detailed you can refer to kill me kill

00:11:37,559 --> 00:11:46,829
me Emily to the code it's kinda

00:11:40,769 --> 00:11:49,649
stimulates the hardware hardware 1 then

00:11:46,829 --> 00:11:52,439
our introduced the Camus human

00:11:49,649 --> 00:11:55,529
migrations thread as a stand-alone

00:11:52,439 --> 00:11:59,100
migration migration stars should notify

00:11:55,529 --> 00:12:03,089
the devices that logged in diverse DMA

00:11:59,100 --> 00:12:07,470
page and after land migration should

00:12:03,089 --> 00:12:11,300
notify devices stop log device DMA page

00:12:07,470 --> 00:12:14,850
and commute signals the device bitmap

00:12:11,300 --> 00:12:20,850
also during the lab migration Camille

00:12:14,850 --> 00:12:25,259
was synchronized km km 30 bitmap you

00:12:20,850 --> 00:12:27,240
should eat better to extend extend the v

00:12:25,259 --> 00:12:31,089
fi owe who

00:12:27,240 --> 00:12:33,819
uncommon faith in detail which still

00:12:31,089 --> 00:12:37,120
stay of the device list device state and

00:12:33,819 --> 00:12:41,680
lowest or device state collects

00:12:37,120 --> 00:12:52,350
weekend's tens of DM VM handles VM

00:12:41,680 --> 00:12:58,329
handler to do to do this also pet VFR

00:12:52,350 --> 00:13:01,740
kid key mode use K Modi to enable our

00:12:58,329 --> 00:13:05,350
migration with with past load demise

00:13:01,740 --> 00:13:08,290
first as mentioned current upstream code

00:13:05,350 --> 00:13:11,620
dance the Portland migration will pass

00:13:08,290 --> 00:13:16,029
through device in VFR models introduced

00:13:11,620 --> 00:13:19,120
am a global parameters they always said

00:13:16,029 --> 00:13:21,240
but to enable the land migration will

00:13:19,120 --> 00:13:25,810
pass through device which will clear

00:13:21,240 --> 00:13:30,670
clear VFL am a global parameters for

00:13:25,810 --> 00:13:36,790
given device 90 and Vanda ID in my topic

00:13:30,670 --> 00:13:37,990
is specific but i had had a diversity

00:13:36,790 --> 00:13:42,730
and vendor ID

00:13:37,990 --> 00:13:46,449
also we extended extender EF our memory

00:13:42,730 --> 00:13:50,259
listeners in lock star lock start

00:13:46,449 --> 00:13:56,279
collects the km de que vem dust we think

00:13:50,259 --> 00:13:56,279
we think think the diversity bitmap and

00:13:57,059 --> 00:14:06,459
when local locust local oboe start who

00:14:01,689 --> 00:14:12,250
we and we start to lock the lock locked

00:14:06,459 --> 00:14:17,579
device DM a page for for every every

00:14:12,250 --> 00:14:23,379
device and local about stop can stop the

00:14:17,579 --> 00:14:27,279
doctor 30 for every in device as things

00:14:23,379 --> 00:14:28,230
to benefit benefit to extend the VFR our

00:14:27,279 --> 00:14:30,290
memorylessness

00:14:28,230 --> 00:14:34,430
working care

00:14:30,290 --> 00:14:37,610
and no care about the Camille sting look

00:14:34,430 --> 00:14:43,610
and you know you're you know there a lot

00:14:37,610 --> 00:14:49,250
of spring logs in Camus also NSA analyst

00:14:43,610 --> 00:14:53,350
or device state and we can introduce vfm

00:14:49,250 --> 00:14:59,769
van handle to save analysts of a state

00:14:53,350 --> 00:15:02,810
also before to start to start a Masonic

00:14:59,769 --> 00:15:10,519
sorry before to start device which they

00:15:02,810 --> 00:15:16,190
enable ms/ms I interrupt there so true

00:15:10,519 --> 00:15:19,480
chance to enables MSI x1 is the the

00:15:16,190 --> 00:15:24,860
device Java initial initialization and

00:15:19,480 --> 00:15:27,620
the others to resume in device state as

00:15:24,860 --> 00:15:33,620
there'll be some difference okay hard

00:15:27,620 --> 00:15:38,170
work behaviors in initialization the

00:15:33,620 --> 00:15:43,790
West Division divides the channelization

00:15:38,170 --> 00:15:47,449
ways that states enabling Pete and the

00:15:43,790 --> 00:15:52,610
mud mask master all the device but

00:15:47,449 --> 00:15:54,699
vectors which are master but telling the

00:15:52,610 --> 00:16:00,410
llama grading will assuming the device

00:15:54,699 --> 00:16:03,800
remains a master X we we are also

00:16:00,410 --> 00:16:10,459
enabling the device capability Pete and

00:16:03,800 --> 00:16:15,380
but master or device is not unmasked but

00:16:10,459 --> 00:16:18,680
per vectors maybe maybe maybe masked so

00:16:15,380 --> 00:16:23,449
we better introduce a new function to

00:16:18,680 --> 00:16:28,610
enable the MSX from the from the lamp

00:16:23,449 --> 00:16:30,720
operation in constructible

00:16:28,610 --> 00:16:33,850
general emulation

00:16:30,720 --> 00:16:36,460
above these general are migrations new

00:16:33,850 --> 00:16:39,010
action required as at migration starts

00:16:36,460 --> 00:16:42,220
which you start to lock the best EMA

00:16:39,010 --> 00:16:44,470
demo page and sting the audience I trade

00:16:42,220 --> 00:16:48,090
and iterate copies we should think

00:16:44,470 --> 00:16:52,270
device thirty bitmap and also issues and

00:16:48,090 --> 00:16:54,850
at stop and a copy a stage which is a

00:16:52,270 --> 00:16:58,150
chemist I also think device thirty

00:16:54,850 --> 00:17:01,750
bitmap and stopped and lock diversity ma

00:16:58,150 --> 00:17:04,089
page and save the device States on

00:17:01,750 --> 00:17:07,959
destination host we should at least

00:17:04,089 --> 00:17:10,540
early CEO restorative a state and esteem

00:17:07,959 --> 00:17:17,350
the device and the summative virtual

00:17:10,540 --> 00:17:21,160
machine I start eaves first which enable

00:17:17,350 --> 00:17:24,070
a master after vcp you post

00:17:21,160 --> 00:17:28,960
initialization because compatible with

00:17:24,070 --> 00:17:32,490
the VTT in VDT post interrupt because

00:17:28,960 --> 00:17:35,980
when we enable the vector of a messiah

00:17:32,490 --> 00:17:39,850
mercerized why should we wish was that

00:17:35,980 --> 00:17:42,760
the Vista POF entities other words some

00:17:39,850 --> 00:17:45,460
windows some windows llama reinforce I'm

00:17:42,760 --> 00:17:48,220
gonna swirl makes the holster crash and

00:17:45,460 --> 00:17:51,220
also I should build a mmm you paid

00:17:48,220 --> 00:17:55,330
mapping before to start device yes

00:17:51,220 --> 00:17:58,650
just a tip no G no need to patch the

00:17:55,330 --> 00:18:02,620
current work current code is working so

00:17:58,650 --> 00:18:05,620
and also not compatible poster poster

00:18:02,620 --> 00:18:07,960
copula migration because the device

00:18:05,620 --> 00:18:13,390
contains a page and the vestibular

00:18:07,960 --> 00:18:18,100
couldn't chip and a market dirty some

00:18:13,390 --> 00:18:21,730
future work in this topic adjusted sure

00:18:18,100 --> 00:18:23,380
examples for how to enable the land

00:18:21,730 --> 00:18:24,690
migration will pass through demise I

00:18:23,380 --> 00:18:28,910
hope

00:18:24,690 --> 00:18:32,250
more style device can support migrations

00:18:28,910 --> 00:18:35,790
also we can leverage our animals check

00:18:32,250 --> 00:18:36,440
dirty diversity ma page if hardware is

00:18:35,790 --> 00:18:38,820
ready

00:18:36,440 --> 00:18:41,520
also it should reduce the downtown

00:18:38,820 --> 00:18:45,840
Orlando relations because we should

00:18:41,520 --> 00:18:50,910
which we needed to stink the device 30

00:18:45,840 --> 00:18:53,720
bitmap it's extra actions to channel or

00:18:50,910 --> 00:18:57,600
a llama be enclosed also it should be

00:18:53,720 --> 00:19:03,300
compatible with cumulative amulet device

00:18:57,600 --> 00:19:06,000
without device yes it's interesting but

00:19:03,300 --> 00:19:11,550
I hope I can I can discussed its in acts

00:19:06,000 --> 00:19:14,430
in next year if km of inform excitement

00:19:11,550 --> 00:19:17,580
talking because so fast a lambic regime

00:19:14,430 --> 00:19:25,970
is always based on between the same

00:19:17,580 --> 00:19:29,640
device same that our device for examples

00:19:25,970 --> 00:19:34,230
if we alarm aggression with hard work

00:19:29,640 --> 00:19:39,770
but our device and what kill me but kill

00:19:34,230 --> 00:19:43,700
me emulator but I advise the the IO past

00:19:39,770 --> 00:19:48,960
the hour passed and the IOT device and

00:19:43,700 --> 00:19:58,170
not the same and but but that's working

00:19:48,960 --> 00:20:02,190
I will show you nest next year upstream

00:19:58,170 --> 00:20:06,750
I hope I hope I can assume the framework

00:20:02,190 --> 00:20:10,220
to an obscene code that's all thank you

00:20:06,750 --> 00:20:10,220
any costume

00:20:10,370 --> 00:20:14,660
[Applause]

00:20:15,000 --> 00:20:25,059
also we can discuss the bitmap it's

00:20:20,110 --> 00:20:28,000
maintained by device itself know the

00:20:25,059 --> 00:20:31,510
dirty thirty device bitmap is meeting by

00:20:28,000 --> 00:20:34,570
VF iost extreme it's a host host

00:20:31,510 --> 00:20:37,809
memories but device Justin know where

00:20:34,570 --> 00:20:40,450
the device with mapper is and the states

00:20:37,809 --> 00:20:43,679
are corresponding beat at the start

00:20:40,450 --> 00:20:46,720
Olamide relations we can allocate

00:20:43,679 --> 00:20:49,390
allocates the memories for diversity

00:20:46,720 --> 00:20:54,190
bitmap and after lab migration we should

00:20:49,390 --> 00:20:59,950
free the device 30 bitmap it's also on

00:20:54,190 --> 00:21:04,470
VM Styles is not ignored in device in

00:20:59,950 --> 00:21:10,600
host but device device know where it is

00:21:04,470 --> 00:21:14,289
okay so do you have their host driver or

00:21:10,600 --> 00:21:19,179
folder for the work

00:21:14,289 --> 00:21:24,070
no hosted general because the way past

00:21:19,179 --> 00:21:26,429
slew the device into virtual machine and

00:21:24,070 --> 00:21:31,240
the virtual machine the front and the

00:21:26,429 --> 00:21:36,220
Java is working as you you so then no

00:21:31,240 --> 00:21:40,990
host Java okay so the kidnap job is work

00:21:36,220 --> 00:21:43,450
Joseph in the with our job right yes

00:21:40,990 --> 00:21:48,419
support Windows and Linux and the

00:21:43,450 --> 00:21:50,980
current upstream code is working

00:21:48,419 --> 00:21:58,630
notice that to patch the front-end each

00:21:50,980 --> 00:22:00,640
other ok yeah so I have a true question

00:21:58,630 --> 00:22:02,650
so the first one is that you mentioned

00:22:00,640 --> 00:22:04,900
you don't have a host or driver right

00:22:02,650 --> 00:22:08,659
but you introduce new API like save and

00:22:04,900 --> 00:22:11,519
restore device dates so who my dad's

00:22:08,659 --> 00:22:14,100
implantation on the whole side so this

00:22:11,519 --> 00:22:17,760
is a first caution second one is I'm

00:22:14,100 --> 00:22:24,600
sorry let me under the first question

00:22:17,760 --> 00:22:29,090
first in this in this in speeches I have

00:22:24,600 --> 00:22:34,740
introduced that actually the chemist rod

00:22:29,090 --> 00:22:39,000
extends the extend hook a vm handlers

00:22:34,740 --> 00:22:43,649
okay so you're saying so inhuman sort of

00:22:39,000 --> 00:22:49,710
for the VF i/o extended a hook so it

00:22:43,649 --> 00:22:55,309
well so does states so my mistake is a v

00:22:49,710 --> 00:23:00,000
fi o VF IO extender woke log think so

00:22:55,309 --> 00:23:02,970
it's like a clock it's like a so

00:23:00,000 --> 00:23:05,639
the hook is like a cork for so like that

00:23:02,970 --> 00:23:08,519
you your and I provided what I device so

00:23:05,639 --> 00:23:11,789
like you in Turkey me you add a hook to

00:23:08,519 --> 00:23:15,090
say at a in commute to say so I can

00:23:11,789 --> 00:23:17,970
say when they restored what I device but

00:23:15,090 --> 00:23:21,929
you your driver you don't have a driver

00:23:17,970 --> 00:23:30,779
right yes so do we need to read the last

00:23:21,929 --> 00:23:35,450
days from advice real estate device real

00:23:30,779 --> 00:23:43,289
hardware device device so maybe this

00:23:35,450 --> 00:23:44,850
detail or hard way so the second

00:23:43,289 --> 00:23:48,299
cross-range that I am trying to

00:23:44,850 --> 00:23:49,830
understand the possible way how hot the

00:23:48,299 --> 00:23:52,679
way you are going to support like point

00:23:49,830 --> 00:23:56,490
nine five so what I appoint now if I

00:23:52,679 --> 00:24:00,470
wish the most widely used or one so do

00:23:56,490 --> 00:24:05,059
you support that in the possible way so

00:24:00,470 --> 00:24:08,700
so I am in cinder in a variety of I've

00:24:05,059 --> 00:24:09,530
that abortion so a modified point five

00:24:08,700 --> 00:24:12,560
driver in

00:24:09,530 --> 00:24:15,740
gasps so the pastoral way is just work

00:24:12,560 --> 00:24:25,520
or have some you introduce some actual

00:24:15,740 --> 00:24:27,380
effort on that question this time of

00:24:25,520 --> 00:24:29,150
discuss offline and I will mention

00:24:27,380 --> 00:24:31,220
another thing so we are working on two

00:24:29,150 --> 00:24:34,190
similar things we introduced actually

00:24:31,220 --> 00:24:37,550
VDP a superb way we can talk the line

00:24:34,190 --> 00:24:39,860
now so I be in your you know future plan

00:24:37,550 --> 00:24:41,930
you you are going to support compatible

00:24:39,860 --> 00:24:45,520
embedded in bottle I twice so probably

00:24:41,930 --> 00:24:45,520
we can engage on that topic

00:24:50,830 --> 00:24:58,970
yeah I have questions edge so your

00:24:54,380 --> 00:25:08,600
betrayal hardware is imitated by FPGA or

00:24:58,970 --> 00:25:12,160
ASIC fpg okay so what kind of real

00:25:08,600 --> 00:25:18,110
device like Nico or block are you

00:25:12,160 --> 00:25:22,190
working working on I mean I mean what IO

00:25:18,110 --> 00:25:25,850
hardware should be only a abstract layer

00:25:22,190 --> 00:25:30,800
you know I'm not sure what kind of

00:25:25,850 --> 00:25:38,000
unique something else sorry maybe I

00:25:30,800 --> 00:25:40,910
couldn't share that hi when you're doing

00:25:38,000 --> 00:25:43,130
free copy migration like that um you may

00:25:40,910 --> 00:25:45,980
need to throttle the V CPUs for the

00:25:43,130 --> 00:25:47,950
migration to convert in this model where

00:25:45,980 --> 00:25:50,480
we have device directly doing the MA

00:25:47,950 --> 00:25:53,210
doing fusion anything in our API to

00:25:50,480 --> 00:25:55,580
actually tell the device to throttle how

00:25:53,210 --> 00:25:59,350
much memory it is starting during the

00:25:55,580 --> 00:25:59,350
migration and how it would look like

00:26:00,580 --> 00:26:08,950
during the pre during play memory copies

00:26:04,970 --> 00:26:11,850
I think the key measures should tell the

00:26:08,950 --> 00:26:24,700
device for the

00:26:11,850 --> 00:26:33,430
memory size as a migration start this

00:26:24,700 --> 00:26:43,660
answer to your concern slowing down and

00:26:33,430 --> 00:26:47,770
let me think twice and next year this

00:26:43,660 --> 00:26:52,120
just appears east we readjusted child to

00:26:47,770 --> 00:26:54,160
implement our idea so sorry I have a

00:26:52,120 --> 00:26:56,020
question so you said that you're

00:26:54,160 --> 00:27:00,310
basically track you basically provide a

00:26:56,020 --> 00:27:02,320
hook into the vfi alright so here so you

00:27:00,310 --> 00:27:04,420
basically provide a hook into the VFL

00:27:02,320 --> 00:27:07,990
assume and it also said you don't have a

00:27:04,420 --> 00:27:10,180
driver on the host right so lamb is your

00:27:07,990 --> 00:27:12,160
30 page and information is basically a

00:27:10,180 --> 00:27:16,960
superset of you're actually working

00:27:12,160 --> 00:27:19,660
right so the 30 pager you reported by

00:27:16,960 --> 00:27:21,640
this API is actually a superset of

00:27:19,660 --> 00:27:26,980
what's actually added 30 double pedal

00:27:21,640 --> 00:27:30,250
device this is your V is assume is a PG

00:27:26,980 --> 00:27:32,590
a device you are in know your own the

00:27:30,250 --> 00:27:34,300
driver actually from the gas right do

00:27:32,590 --> 00:27:36,250
you actually compare how big is a

00:27:34,300 --> 00:27:45,160
superset of course is actually active

00:27:36,250 --> 00:27:50,200
working cell in this Daenerys maybe our

00:27:45,160 --> 00:27:55,870
designs maybe not the rest hardwood

00:27:50,200 --> 00:28:01,690
Travers but to get to get access access

00:27:55,870 --> 00:28:07,240
the device in space in specific way to

00:28:01,690 --> 00:28:11,970
get to ask me the map maybe your your

00:28:07,240 --> 00:28:11,970
costume is required to do the hardware's

00:28:12,540 --> 00:28:17,610
maybe I couldn't

00:28:15,220 --> 00:28:20,590
all right so if that's going on who say

00:28:17,610 --> 00:28:22,809
the surface area is so probably so 10

00:28:20,590 --> 00:28:24,549
gigabyte right you're basically from

00:28:22,809 --> 00:28:26,020
your vfi of who can just you see the

00:28:24,549 --> 00:28:27,760
data actually is the memory actually

00:28:26,020 --> 00:28:28,210
that echidna by the device I thank you

00:28:27,760 --> 00:28:31,750
goodbye

00:28:28,210 --> 00:28:35,380
right yes actually the only active

00:28:31,750 --> 00:28:36,220
working side only it's a few megabyte is

00:28:35,380 --> 00:28:38,970
that possible

00:28:36,220 --> 00:28:42,990
do you actually have it it has data

00:28:38,970 --> 00:28:45,460
because from from the interface I see

00:28:42,990 --> 00:28:48,929
you can only know the superset of the

00:28:45,460 --> 00:28:52,030
Act the data now is actually working to

00:28:48,929 --> 00:28:55,240
3713 yeah

00:28:52,030 --> 00:28:56,860
whatever is whatever is actually mapped

00:28:55,240 --> 00:28:59,370
into devices latter what are you call

00:28:56,860 --> 00:29:01,900
30-page but that is actually not a page

00:28:59,370 --> 00:29:03,669
frankly maybe I couldn't follow your

00:29:01,900 --> 00:29:09,120
constants oh yeah we can talk about it

00:29:03,669 --> 00:29:17,559
in this kind of bland story I think you

00:29:09,120 --> 00:29:20,890
can I can ask a question okay thank you

00:29:17,559 --> 00:29:23,590
very much for this topic so I have a

00:29:20,890 --> 00:29:26,169
question is about you you may you

00:29:23,590 --> 00:29:30,820
mentioned that you are using kind of at

00:29:26,169 --> 00:29:35,100
V FPGA right so is it possible to share

00:29:30,820 --> 00:29:38,289
some kind of performance data to us like

00:29:35,100 --> 00:29:45,250
what about performance about software

00:29:38,289 --> 00:29:48,900
but how much data so I I didn't have the

00:29:45,250 --> 00:29:48,900
data okay

00:29:56,820 --> 00:30:02,169
regarding the time it takes to to

00:29:59,350 --> 00:30:05,080
migrate the fact that you need to take

00:30:02,169 --> 00:30:07,299
the dirty pages from the how the device

00:30:05,080 --> 00:30:12,360
does that make the live migration longer

00:30:07,299 --> 00:30:12,360
or is it the same or the same

00:30:14,279 --> 00:30:22,409
I think it would be longer than general

00:30:18,659 --> 00:30:25,139
lamentation flows because you should you

00:30:22,409 --> 00:30:27,059
should always the divan sturdy bitmap

00:30:25,139 --> 00:30:34,490
you should think the demands that milk

00:30:27,059 --> 00:30:37,379
and getting much more diversity my page

00:30:34,490 --> 00:30:40,889
so I think they'll be much longer

00:30:37,379 --> 00:30:54,749
also in our table is to reduce the done

00:30:40,889 --> 00:30:56,620
time also the photo time it's all thank

00:30:54,749 --> 00:30:59,600
you thank you

00:30:56,620 --> 00:31:05,380
[Applause]

00:30:59,600 --> 00:31:05,380

YouTube URL: https://www.youtube.com/watch?v=8eeLhzQvtpY


