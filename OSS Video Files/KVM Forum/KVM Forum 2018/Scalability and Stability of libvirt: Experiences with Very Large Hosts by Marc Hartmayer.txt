Title: Scalability and Stability of libvirt: Experiences with Very Large Hosts by Marc Hartmayer
Publication date: 2018-11-14
Playlist: KVM Forum 2018
Description: 
	With huge servers like IBM z there are many resources available so it was quite obvious to test the limits of libvirt. For example, one of the questions was how fast and how many minimal guests could be started in a short time period. How high is the system load for that? In times of CI and TDD this is especially interesting since thousands of guests are started and destroyed for regression tests.

This presentation will give an overview of bottlenecks in libvirt, what the reasons are and what problems came up during these tests.

---

Marc Hartmayer
IBM Germany Research & Development GmbH
Software engineer

Marc Hartmayer is a software engineer working at IBM Germany. The main project he works on is libvirt.
Captions: 
	00:00:00,340 --> 00:00:02,699
[Music]

00:00:06,319 --> 00:00:14,700
hello our couple are working for IBM Z

00:00:11,780 --> 00:00:15,900
as a software engineer and it's a

00:00:14,700 --> 00:00:18,270
pleasure for me to be here today

00:00:15,900 --> 00:00:20,310
actually in this presentation I will

00:00:18,270 --> 00:00:22,470
talk about my main project of IBM which

00:00:20,310 --> 00:00:24,750
is looked up and I will only talk about

00:00:22,470 --> 00:00:29,519
the administration of kidney breast why

00:00:24,750 --> 00:00:31,170
all the code so without them see we have

00:00:29,519 --> 00:00:33,540
really large systems with up to

00:00:31,170 --> 00:00:36,960
establish Elmo terabytes of RAM oh

00:00:33,540 --> 00:00:41,010
nothing you see 14 for the entire system

00:00:36,960 --> 00:00:43,050
and up to 16 kilobyte partition so this

00:00:41,010 --> 00:00:45,000
allows us to have many guests thousand

00:00:43,050 --> 00:00:47,640
hello for example for test-driven

00:00:45,000 --> 00:00:51,210
development of regression testing and so

00:00:47,640 --> 00:00:53,789
on so the main focus of this talk is

00:00:51,210 --> 00:00:56,579
about what happens if we stress networks

00:00:53,789 --> 00:01:00,840
to its limit and how does it scale how

00:00:56,579 --> 00:01:05,480
still was they will achieve it and so my

00:01:00,840 --> 00:01:05,480
overall goal is to harm and to improve

00:01:08,360 --> 00:01:15,479
[Laughter]

00:01:12,650 --> 00:01:17,880
performance but I got actually assigned

00:01:15,479 --> 00:01:21,509
what was thought the boss if you're

00:01:17,880 --> 00:01:24,390
reading a stop in Destroy operation the

00:01:21,509 --> 00:01:27,390
Liberty get stuck for about 30 seconds

00:01:24,390 --> 00:01:31,439
and this can happen only only sometimes

00:01:27,390 --> 00:01:33,420
but that often but it cannot happen so I

00:01:31,439 --> 00:01:35,880
guess that means in this context that

00:01:33,420 --> 00:01:38,040
now on you of the sea cause so remote

00:01:35,880 --> 00:01:40,350
procedure calls be accepted or any new

00:01:38,040 --> 00:01:42,840
connections could be established and do

00:01:40,350 --> 00:01:46,259
you think so the whole main loop of the

00:01:42,840 --> 00:01:48,509
loop he gets back and during the

00:01:46,259 --> 00:01:51,570
investigation it turns out that Mountain

00:01:48,509 --> 00:01:53,909
experience other issues then look at

00:01:51,570 --> 00:01:56,070
these push the limits so that was the

00:01:53,909 --> 00:01:58,469
reason for creating this presentation

00:01:56,070 --> 00:01:59,159
and now let's get back to the agenda of

00:01:58,469 --> 00:02:01,439
this talk

00:01:59,159 --> 00:02:03,899
so in the first chapter of the talk

00:02:01,439 --> 00:02:06,240
about the step they use test set up they

00:02:03,899 --> 00:02:08,399
use test environment and the testing

00:02:06,240 --> 00:02:11,340
units know it's like use to trying to

00:02:08,399 --> 00:02:12,050
reproduce the part then I will come to

00:02:11,340 --> 00:02:15,110
the

00:02:12,050 --> 00:02:21,920
stability issues and then in the third

00:02:15,110 --> 00:02:25,570
chapter of some performance we'll talk

00:02:21,920 --> 00:02:28,550
about some Tom's issues that occur and

00:02:25,570 --> 00:02:30,680
at the end of the gift of we've summary

00:02:28,550 --> 00:02:34,850
and outlook whereas one could

00:02:30,680 --> 00:02:38,950
investigate I will use guest VM and

00:02:34,850 --> 00:02:43,100
domains in this talks and ministry so

00:02:38,950 --> 00:02:47,780
now we will come to the u.s. I've used

00:02:43,100 --> 00:02:50,890
64 shaft cars actually I've used for c14

00:02:47,780 --> 00:02:55,430
project you can see on the right side

00:02:50,890 --> 00:02:58,280
image of such a defaulting box then I've

00:02:55,430 --> 00:02:59,690
used for terabyte of Graham I've used as

00:02:58,280 --> 00:03:03,740
distribution fatimata

00:02:59,690 --> 00:03:06,350
28 as in Linux and fast I have used

00:03:03,740 --> 00:03:10,790
himself put report that's within you

00:03:06,350 --> 00:03:13,370
then I've used for the 19 car or C

00:03:10,790 --> 00:03:18,590
version and for like younger I used

00:03:13,370 --> 00:03:20,360
sweet ago for the used guest I have used

00:03:18,590 --> 00:03:24,860
the following definite definition on the

00:03:20,360 --> 00:03:27,320
website you can think that some ginger

00:03:24,860 --> 00:03:30,770
Kemp like I use for my test test prepare

00:03:27,320 --> 00:03:33,140
it and actually the fact about this

00:03:30,770 --> 00:03:35,660
guest is it had its you start comic

00:03:33,140 --> 00:03:39,380
books so I'm using the host curved guest

00:03:35,660 --> 00:03:40,940
car and in combination with minimal

00:03:39,380 --> 00:03:43,460
initial when discussed we had that we

00:03:40,940 --> 00:03:47,180
have pearl and actually is using busybox

00:03:43,460 --> 00:03:49,910
for that and it has only one be CPU it

00:03:47,180 --> 00:03:52,670
has only born humbled megawatt firm and

00:03:49,910 --> 00:03:58,270
it has metal he comes over the trash and

00:03:52,670 --> 00:03:58,270
you can attach gas exists for the human

00:04:01,550 --> 00:04:07,190
for system configuration I have to use

00:04:03,670 --> 00:04:09,410
the parameters that were such a stir fry

00:04:07,190 --> 00:04:13,400
and planner in his presentation at the

00:04:09,410 --> 00:04:15,950
kagan for 2015 pushing the limits our

00:04:13,400 --> 00:04:17,810
guest host and beyond

00:04:15,950 --> 00:04:20,810
actually I've just increased the maximum

00:04:17,810 --> 00:04:23,600
number of youth processes the host can

00:04:20,810 --> 00:04:26,030
support I can have the maximum number of

00:04:23,600 --> 00:04:28,820
threads that our host can have then I

00:04:26,030 --> 00:04:30,980
think we spend mixing TT GYC the host in

00:04:28,820 --> 00:04:33,710
half and I'll have to increase the

00:04:30,980 --> 00:04:36,830
maximum open father's for the host and

00:04:33,710 --> 00:04:44,690
the I notified and the limits both of

00:04:36,830 --> 00:04:47,090
the people I have used the following

00:04:44,690 --> 00:04:48,800
configuration so I refuse to default

00:04:47,090 --> 00:04:51,920
except that I've increased the maximum

00:04:48,800 --> 00:04:54,290
number of anonymous client the maximum

00:04:51,920 --> 00:04:55,490
number of client requests and I think we

00:04:54,290 --> 00:04:59,810
used to make small number of blockers

00:04:55,490 --> 00:05:03,310
because I have money cost up to 64

00:04:59,810 --> 00:05:07,160
mascara is the number of $40 for that

00:05:03,310 --> 00:05:10,940
I'm using the default account provided

00:05:07,160 --> 00:05:12,350
by Liberty by the accept that I have at

00:05:10,940 --> 00:05:15,830
least it makes a number of process

00:05:12,350 --> 00:05:26,090
because I have also tried to create to

00:05:15,830 --> 00:05:28,250
power 14 guest because the animals are

00:05:26,090 --> 00:05:31,580
just big enough so I can create its

00:05:28,250 --> 00:05:33,710
guest they don't know exact science or

00:05:31,580 --> 00:05:34,480
something like that behind them they are

00:05:33,710 --> 00:05:39,830
just big enough

00:05:34,480 --> 00:05:42,710
I've also increased how many 505 secure

00:05:39,830 --> 00:05:44,930
user can have because the QA process is

00:05:42,710 --> 00:05:50,900
they are running as the MU user so I

00:05:44,930 --> 00:05:53,180
have to adapt these values become what

00:05:50,900 --> 00:05:57,130
is catalyst I haven't used real stuff

00:05:53,180 --> 00:05:59,840
lists because I have that many and

00:05:57,130 --> 00:06:01,760
because we're testing are amusing and

00:05:59,840 --> 00:06:04,370
used to use scar the debug mode

00:06:01,760 --> 00:06:07,940
wonderful that it was a usage of

00:06:04,370 --> 00:06:10,820
this but I can still join example hot

00:06:07,940 --> 00:06:14,060
dragon off of host devices has to go on

00:06:10,820 --> 00:06:17,080
so and so on at the bottom you can read

00:06:14,060 --> 00:06:22,910
an example command line how to create

00:06:17,080 --> 00:06:26,479
eight times eight times 256 Scott sees

00:06:22,910 --> 00:06:28,250
this and mr. Perlmutter def sized

00:06:26,479 --> 00:06:30,979
megabyte you are saying okay one

00:06:28,250 --> 00:06:33,560
megabyte disband for baking one of these

00:06:30,979 --> 00:06:36,070
Wisconsin disks so for the read and

00:06:33,560 --> 00:06:36,070
write access

00:06:38,150 --> 00:06:42,710
how did that's why do we could use the

00:06:39,919 --> 00:06:45,080
park so actually I did it was to stop

00:06:42,710 --> 00:06:47,300
and destroy multiple guest concurrently

00:06:45,080 --> 00:06:50,630
I try to define undefined guest

00:06:47,300 --> 00:06:52,639
concurrently I tried the South operation

00:06:50,630 --> 00:06:58,130
and we're saved operation for multiple

00:06:52,639 --> 00:07:01,250
domains concurrently and actually the

00:06:58,130 --> 00:07:04,970
first operational I put trigger back of

00:07:01,250 --> 00:07:08,030
course it was Holy Father so but what

00:07:04,970 --> 00:07:19,099
else could possibly go on if I'm playing

00:07:08,030 --> 00:07:24,470
this so actually many things so far no

00:07:19,099 --> 00:07:26,720
come on exit I have founded by running

00:07:24,470 --> 00:07:29,990
stopping this far in the loop for

00:07:26,720 --> 00:07:32,300
multiple domains concurrently and I

00:07:29,990 --> 00:07:34,669
fixed that what it meant then there was

00:07:32,300 --> 00:07:39,349
no waste condition when counting on

00:07:34,669 --> 00:07:42,229
authenticated clients i triggered this

00:07:39,349 --> 00:07:43,970
part by a simple connecting and just

00:07:42,229 --> 00:07:47,510
connecting to meet with multiple clients

00:07:43,970 --> 00:07:49,099
to the little team so for that case I

00:07:47,510 --> 00:07:54,080
have just used Mirage it stopped in the

00:07:49,099 --> 00:07:56,690
sky for example and it was sort of the

00:07:54,080 --> 00:07:58,699
Liberty that does not accept any new

00:07:56,690 --> 00:08:00,349
connection so as long as you have an

00:07:58,699 --> 00:08:02,360
established connection everything's fine

00:08:00,349 --> 00:08:04,099
but as soon as you are trying to

00:08:02,360 --> 00:08:07,099
reconnect or establish an you can

00:08:04,099 --> 00:08:10,970
actually give the fame I fixed that as

00:08:07,099 --> 00:08:13,719
well then away from secretary Forge

00:08:10,970 --> 00:08:15,909
another point that you are for entering

00:08:13,719 --> 00:08:19,239
the deep tries to reconnect to be any

00:08:15,909 --> 00:08:21,610
processes in that case I have started

00:08:19,239 --> 00:08:25,419
multiple domains then I have we stopped

00:08:21,610 --> 00:08:28,599
 T and it turns out that in

00:08:25,419 --> 00:08:32,289
this case Liberty has tried to handle

00:08:28,599 --> 00:08:35,620
their mmm your money talk events before

00:08:32,289 --> 00:08:39,610
the actual 312 or was initialized so

00:08:35,620 --> 00:08:42,129
yeah we started in the second tation for

00:08:39,610 --> 00:08:44,709
the fixed as well and then the most

00:08:42,129 --> 00:08:48,639
basic double feeding across the second

00:08:44,709 --> 00:08:50,620
tech support of course and found simple

00:08:48,639 --> 00:08:54,519
define and define same domain

00:08:50,620 --> 00:08:57,939
concurrently yeah and I fix that as well

00:08:54,519 --> 00:09:00,100
so two days running all these test cases

00:08:57,939 --> 00:09:01,959
I can't know the context apart

00:09:00,100 --> 00:09:04,360
everything was fine

00:09:01,959 --> 00:09:11,529
apart from the old message and so on but

00:09:04,360 --> 00:09:14,829
he's okay so x2 which not back because

00:09:11,529 --> 00:09:16,600
now everything was stable and now I can

00:09:14,829 --> 00:09:17,889
look at the performance back because it

00:09:16,600 --> 00:09:21,699
will only perform sparklenose

00:09:17,889 --> 00:09:23,319
expectation fall or anything else so for

00:09:21,699 --> 00:09:26,649
that time to tell you something about

00:09:23,319 --> 00:09:29,459
the internals of the protein Odie has

00:09:26,649 --> 00:09:33,309
amazement and this made for a test menu

00:09:29,459 --> 00:09:38,199
so left you can see in some kind of

00:09:33,309 --> 00:09:41,740
hiding sleep cycle code the mango they

00:09:38,199 --> 00:09:44,350
ask Impala to listen for them Jaime

00:09:41,740 --> 00:09:48,790
monitors for flying circles and so on

00:09:44,350 --> 00:09:52,509
and as soon as this college and it will

00:09:48,790 --> 00:09:54,629
call reinvent politics patch panels and

00:09:52,509 --> 00:10:00,550
other functions for this functions in

00:09:54,629 --> 00:10:03,699
this case there's and the fire event for

00:10:00,550 --> 00:10:06,459
the qme monitor they will pick them

00:10:03,699 --> 00:10:09,250
functioning oh I hope they're called

00:10:06,459 --> 00:10:11,079
this functionable called Jenny poses

00:10:09,250 --> 00:10:13,149
handle more time to file and that in

00:10:11,079 --> 00:10:15,730
this function I tries to get to the log

00:10:13,149 --> 00:10:18,569
off of the domain the domain object in

00:10:15,730 --> 00:10:22,209
this case we em and the problem here is

00:10:18,569 --> 00:10:26,120
the purple thread so what has me main

00:10:22,209 --> 00:10:29,830
loop picked up should just as petrol

00:10:26,120 --> 00:10:33,980
it's on request and so on to the rapport

00:10:29,830 --> 00:10:38,570
in this case for example is the RPC call

00:10:33,980 --> 00:10:41,990
destroy and yeah you may destroy flags

00:10:38,570 --> 00:10:46,279
and it will try to get a lock for the VM

00:10:41,990 --> 00:10:49,790
object and then sometimes it will still

00:10:46,279 --> 00:10:52,220
hold a lock and it will recall the

00:10:49,790 --> 00:10:56,930
debuff causal chastened Eva's car with

00:10:52,220 --> 00:11:00,110
the time out of 30 seconds okay so that

00:10:56,930 --> 00:11:02,330
is so possibly a lot contention between

00:11:00,110 --> 00:11:06,529
there's main threat in this bucket but

00:11:02,330 --> 00:11:07,460
this is all already bad so but it gets

00:11:06,529 --> 00:11:10,700
even worse

00:11:07,460 --> 00:11:13,279
as soon as just he was called neat the

00:11:10,700 --> 00:11:15,560
total time of time so 30 seconds and

00:11:13,279 --> 00:11:19,279
this is exactly what has happened

00:11:15,560 --> 00:11:22,820
so I have just to note that was

00:11:19,279 --> 00:11:25,339
interested in how often can you tell her

00:11:22,820 --> 00:11:26,690
that this called this people squad needs

00:11:25,339 --> 00:11:29,620
a total hang on time

00:11:26,690 --> 00:11:33,110
so I instrumented my coat the people's

00:11:29,620 --> 00:11:35,959
code and it has already some function

00:11:33,110 --> 00:11:38,720
for that for tracing its own so I have

00:11:35,959 --> 00:11:41,060
used that each race and system tab and I

00:11:38,720 --> 00:11:46,220
have measured how long it takes to

00:11:41,060 --> 00:11:47,870
return these Debose claws and actually I

00:11:46,220 --> 00:11:51,110
discovered that it was either really

00:11:47,870 --> 00:11:52,940
fast so about zero seconds oh it's we

00:11:51,110 --> 00:11:56,209
needed the total time or time but

00:11:52,940 --> 00:12:03,980
actually no real time of the castle to

00:11:56,209 --> 00:12:06,860
fly muster well it even the time it has

00:12:03,980 --> 00:12:09,770
needed 30 seconds the flag was still

00:12:06,860 --> 00:12:12,770
valid so no time of actually and this

00:12:09,770 --> 00:12:15,130
was really interesting so on the right

00:12:12,770 --> 00:12:18,840
side you can see that here is

00:12:15,130 --> 00:12:22,510
with scale use so it's much higher than

00:12:18,840 --> 00:12:29,050
the 30 seconds but it's still

00:12:22,510 --> 00:12:32,140
interesting and then yellow pop now so

00:12:29,050 --> 00:12:35,010
possible solution for that is for that I

00:12:32,140 --> 00:12:37,450
have just at first I have looked at the

00:12:35,010 --> 00:12:39,610
implementation of the keepers it give us

00:12:37,450 --> 00:12:45,520
a huge power in the pod for the cheapest

00:12:39,610 --> 00:12:48,580
cars actually mutations first of meet

00:12:45,520 --> 00:12:51,010
other people if you use this low-level

00:12:48,580 --> 00:12:55,510
API directly used you're signing up for

00:12:51,010 --> 00:12:57,640
some pain and yeah we do so so we could

00:12:55,510 --> 00:12:59,590
I don't try to fix it within the pot

00:12:57,640 --> 00:13:01,330
maybe we are just doing something

00:12:59,590 --> 00:13:03,840
completely wrong I'm not sure

00:13:01,330 --> 00:13:08,170
oh we could use now the deepest lottery

00:13:03,840 --> 00:13:12,100
if it's possible and feasible and I did

00:13:08,170 --> 00:13:15,220
some tests of - there's passing d-bus

00:13:12,100 --> 00:13:18,220
package this is using lucky bus and I've

00:13:15,220 --> 00:13:21,190
used GD bus with Verizon and I did

00:13:18,220 --> 00:13:25,060
chestnut would give us cause and it

00:13:21,190 --> 00:13:26,920
shows up the shot that GD bus forms much

00:13:25,060 --> 00:13:30,730
better than the Divas are much much

00:13:26,920 --> 00:13:33,430
better so it might be possible to use

00:13:30,730 --> 00:13:37,780
now the debugger I'm not sure about that

00:13:33,430 --> 00:13:40,600
and the most important problem is of

00:13:37,780 --> 00:13:46,180
course never ever block your main loop

00:13:40,600 --> 00:13:48,790
so no buckets what should ever be able

00:13:46,180 --> 00:13:52,120
to block our main loop we should only

00:13:48,790 --> 00:13:55,120
dispatch the whens may notice as fast as

00:13:52,120 --> 00:13:59,170
possible and then they actually man

00:13:55,120 --> 00:14:00,130
should be handled by the whatever so

00:13:59,170 --> 00:14:03,220
actually

00:14:00,130 --> 00:14:06,430
Flexner has already talked about that

00:14:03,220 --> 00:14:09,130
last at last year's carry on phone in

00:14:06,430 --> 00:14:11,560
her lessons in running lipid escape

00:14:09,130 --> 00:14:15,130
she has also sent already saw head

00:14:11,560 --> 00:14:18,970
shooters for that but there's a much

00:14:15,130 --> 00:14:21,010
work to do until it will be accepted so

00:14:18,970 --> 00:14:23,290
there were some segmentations falls

00:14:21,010 --> 00:14:27,900
within it and so on I have over when you

00:14:23,290 --> 00:14:27,900
fixed that at least whatever

00:14:28,450 --> 00:14:36,830
yeah so mom phones because I've tried

00:14:33,590 --> 00:14:39,230
that I got some feeling okay

00:14:36,830 --> 00:14:42,200
sometimes it's some kind of slow if I'm

00:14:39,230 --> 00:14:45,320
using lipid so yeah

00:14:42,200 --> 00:14:47,170
therefore I try to get some kind of

00:14:45,320 --> 00:14:49,430
feeling how fast can we go

00:14:47,170 --> 00:14:51,470
therefore I have created in comparison

00:14:49,430 --> 00:14:56,660
between and thyroid command-line booty

00:14:51,470 --> 00:15:00,500
mu roses lipid so for the dark month

00:14:56,660 --> 00:15:05,330
line good I've used a command line Cameo

00:15:00,500 --> 00:15:08,810
system or - between 90 X X minus capital

00:15:05,330 --> 00:15:13,130
S so I've started cameo with stop we CPU

00:15:08,810 --> 00:15:15,680
like lipid it does and so to be some

00:15:13,130 --> 00:15:18,980
kind of fair because I know it's really

00:15:15,680 --> 00:15:21,320
unfair to compare this because lipids

00:15:18,980 --> 00:15:23,510
are so much more than just a simple

00:15:21,320 --> 00:15:27,170
command line stuff that was thoughtful

00:15:23,510 --> 00:15:30,800
process therefore I created this or I

00:15:27,170 --> 00:15:34,839
use this method and connected yr so

00:15:30,800 --> 00:15:40,070
catch to the camera monitor and resumed

00:15:34,839 --> 00:15:44,540
CQ started CPUs but you can come up so

00:15:40,070 --> 00:15:49,130
it's similar to what we put actually

00:15:44,540 --> 00:15:51,980
does for that I have used no dis forget

00:15:49,130 --> 00:15:54,680
I have been used sell 50 paisa sweet

00:15:51,980 --> 00:15:57,440
Esprit for that and it just script uses

00:15:54,680 --> 00:16:01,670
64 threat yeah no there's a little

00:15:57,440 --> 00:16:08,660
problem with a lot but it's important

00:16:01,670 --> 00:16:09,860
methods that one line and lipid so we

00:16:08,660 --> 00:16:13,339
saw the purpose

00:16:09,860 --> 00:16:16,280
I used to the formula ratio of highs in

00:16:13,339 --> 00:16:20,030
this case the number yes she looked up I

00:16:16,280 --> 00:16:22,880
means the time needed for starting I

00:16:20,030 --> 00:16:27,250
guess while the plot and T commands and

00:16:22,880 --> 00:16:29,230
I means the time needed for starting I

00:16:27,250 --> 00:16:33,589
guessed

00:16:29,230 --> 00:16:36,380
using the establishment line actually

00:16:33,589 --> 00:16:39,260
I'm not sure why it happens but there's

00:16:36,380 --> 00:16:40,639
some kind of bathtub effect as you can

00:16:39,260 --> 00:16:43,720
see

00:16:40,639 --> 00:16:45,920
I'm not sure why but the main point is

00:16:43,720 --> 00:16:48,319
if you are starting here because

00:16:45,920 --> 00:16:53,839
directly Pokemon of your command line

00:16:48,319 --> 00:16:56,240
its yeah 20 to 30 times faster than my

00:16:53,839 --> 00:16:59,600
means of liveth and that was quite

00:16:56,240 --> 00:17:05,559
interesting and therefore I just waited

00:16:59,600 --> 00:17:07,669
on CPU playing there for that oh so

00:17:05,559 --> 00:17:09,890
venison where does the time go

00:17:07,669 --> 00:17:12,140
okay I'll look foot as I told you before

00:17:09,890 --> 00:17:15,490
that's the only things more for example

00:17:12,140 --> 00:17:20,120
it has the hose creates V so provides

00:17:15,490 --> 00:17:22,130
host of devices pacifiers a professor

00:17:20,120 --> 00:17:24,620
carry process setups to see groups the

00:17:22,130 --> 00:17:28,459
namespace is healing of players at a low

00:17:24,620 --> 00:17:31,370
profile handle security abilities that's

00:17:28,459 --> 00:17:35,659
all the chain just logging and so many

00:17:31,370 --> 00:17:38,059
things are so much more okay

00:17:35,659 --> 00:17:42,679
there are create non-civilian graph for

00:17:38,059 --> 00:17:45,590
the operation if I for that I have find

00:17:42,679 --> 00:17:49,250
guest for 60 seconds each of these

00:17:45,590 --> 00:17:54,380
guests with 21st canister touched and

00:17:49,250 --> 00:17:57,140
who sought of there is 96% of the time

00:17:54,380 --> 00:18:02,299
of the on CPU time I've to mention that

00:17:57,140 --> 00:18:06,169
it's only used for forking so that's

00:18:02,299 --> 00:18:09,230
pretty much so this function is called

00:18:06,169 --> 00:18:11,960
the little Q even kept sketch lookup and

00:18:09,230 --> 00:18:17,630
this function is called and will domain

00:18:11,960 --> 00:18:21,500
Death Valley directive I situated so for

00:18:17,630 --> 00:18:23,299
each device but you know caps cash book

00:18:21,500 --> 00:18:28,280
of his called the function and this

00:18:23,299 --> 00:18:31,990
function doesn't for I have created with

00:18:28,280 --> 00:18:35,360
a nice view on CPU of Plainville

00:18:31,990 --> 00:18:39,010
question and it still

00:18:35,360 --> 00:18:44,450
78% of the time that disbanded for

00:18:39,010 --> 00:18:46,810
talking we usually start with guest for

00:18:44,450 --> 00:18:52,300
60 seconds each of these guys

00:18:46,810 --> 00:18:55,110
with 20 scanners attached and yeah so

00:18:52,300 --> 00:18:57,730
what does looking catch cache look up to

00:18:55,110 --> 00:19:00,460
it was introduced because probing that

00:18:57,730 --> 00:19:03,240
um cable kisses expensive so there

00:19:00,460 --> 00:19:06,360
wasn't caching introduced for that and

00:19:03,240 --> 00:19:08,710
so the functioning doesn't look up and

00:19:06,360 --> 00:19:11,290
for the QM okay blue cheese for they get

00:19:08,710 --> 00:19:13,990
to keep the domain in the cache and it

00:19:11,290 --> 00:19:17,940
validates that these camu camu cheese

00:19:13,990 --> 00:19:21,010
are still valid for that it needs to

00:19:17,940 --> 00:19:24,610
check out to verify that KVM is still

00:19:21,010 --> 00:19:29,500
accessible as the key only user and for

00:19:24,610 --> 00:19:31,650
that is for its Fox and drops it you saw

00:19:29,500 --> 00:19:34,450
it change up to the use of to Kenya and

00:19:31,650 --> 00:19:39,310
twice to read the right exercise on that

00:19:34,450 --> 00:19:43,210
KN so the question is do we really need

00:19:39,310 --> 00:19:45,640
this validation for each device off of

00:19:43,210 --> 00:19:48,040
the main because the more devices are

00:19:45,640 --> 00:19:53,230
the domain has the more expensive it is

00:19:48,040 --> 00:19:55,510
and so possible improvements here are we

00:19:53,230 --> 00:19:57,040
could really geotechnical the keys once

00:19:55,510 --> 00:20:00,940
for each task for some form defined

00:19:57,040 --> 00:20:04,090
tasks start task whatever and I have

00:20:00,940 --> 00:20:06,550
sent excuse for that still on the

00:20:04,090 --> 00:20:11,310
discussion of the Stanton second person

00:20:06,550 --> 00:20:14,140
each part and what it also what is that

00:20:11,310 --> 00:20:17,140
actually if the company can happen that

00:20:14,140 --> 00:20:20,110
we are starting in the final question so

00:20:17,140 --> 00:20:23,440
if the called function tricky no caps

00:20:20,110 --> 00:20:27,700
cache look up and you will get a

00:20:23,440 --> 00:20:31,840
chemical keys personally then the cube

00:20:27,700 --> 00:20:34,950
and we will change so you will the next

00:20:31,840 --> 00:20:39,280
step you would call the chemo cache

00:20:34,950 --> 00:20:41,380
cache look up mmm now the time and this

00:20:39,280 --> 00:20:43,900
time it will return like um cavities

00:20:41,380 --> 00:20:45,760
will often be but instead of

00:20:43,900 --> 00:20:48,250
invalidating your thing what we have

00:20:45,760 --> 00:20:50,920
done before we are still continuing with

00:20:48,250 --> 00:20:54,760
these new communities and my opinion

00:20:50,920 --> 00:20:58,179
this is not so I tried to deal with it

00:20:54,760 --> 00:21:01,000
so this will be also

00:20:58,179 --> 00:21:03,580
you could also use be pork no last an

00:21:01,000 --> 00:21:05,620
extract and indicate spoken for that

00:21:03,580 --> 00:21:10,440
because that would be much cheaper than

00:21:05,620 --> 00:21:10,440
an expensive fog of the whole liberty

00:21:11,309 --> 00:21:22,590
then I want to trust some performance

00:21:16,660 --> 00:21:25,809
results so I I'm using as baseline

00:21:22,590 --> 00:21:28,660
Lippert with this using just come in and

00:21:25,809 --> 00:21:31,960
then I'm using an improved Clippers

00:21:28,660 --> 00:21:35,980
using saline washing with my pets you

00:21:31,960 --> 00:21:39,160
supplied so I calculated the ratio of

00:21:35,980 --> 00:21:43,890
our eyes number of guests equals to G

00:21:39,160 --> 00:21:47,020
baseline if I divide apply improve and

00:21:43,890 --> 00:21:51,809
to solid some something like that

00:21:47,020 --> 00:21:55,240
so for the definition if you're defining

00:21:51,809 --> 00:21:57,880
256 guests each of them lives 16

00:21:55,240 --> 00:22:04,530
scuzziest attached you get in speed-up

00:21:57,880 --> 00:22:08,350
of the factor 127 so it's amazing and

00:22:04,530 --> 00:22:11,500
you can also see the more devices you

00:22:08,350 --> 00:22:16,210
have attached their higher is this

00:22:11,500 --> 00:22:20,020
speedo so it's almost you know as you

00:22:16,210 --> 00:22:25,809
can see here if I did the same for

00:22:20,020 --> 00:22:28,059
simple stuff equation and it's the 26th

00:22:25,809 --> 00:22:34,390
I'm faster when you're trying to start

00:22:28,059 --> 00:22:37,660
at 165 656 guests each of their under 16

00:22:34,390 --> 00:22:41,350
casa disk attached yeah and you can also

00:22:37,660 --> 00:22:49,600
see here it's also the narrow and it

00:22:41,350 --> 00:22:53,350
still in my opinion the speed up so what

00:22:49,600 --> 00:22:57,790
can be optimized so we shouldn't block

00:22:53,350 --> 00:23:01,900
all mango so we should investigate into

00:22:57,790 --> 00:23:04,110
this and come up to a solution for that

00:23:01,900 --> 00:23:07,360
then you should try to optimize

00:23:04,110 --> 00:23:09,240
securities usage as I've shown you and

00:23:07,360 --> 00:23:15,180
you should try to fix this

00:23:09,240 --> 00:23:19,680
second Steve is problem and what at

00:23:15,180 --> 00:23:22,530
where else could be investigate we could

00:23:19,680 --> 00:23:25,680
analyze the office a few times because I

00:23:22,530 --> 00:23:27,630
think the locking is not optimal at all

00:23:25,680 --> 00:23:33,720
but they look lovely

00:23:27,630 --> 00:23:36,930
so I think we can achieve improvement if

00:23:33,720 --> 00:23:39,390
we own the last office a few times it

00:23:36,930 --> 00:23:42,180
could also try what happens for most

00:23:39,390 --> 00:23:45,090
sophisticated operations like life

00:23:42,180 --> 00:23:48,180
migration or what will happen if we

00:23:45,090 --> 00:23:51,710
could hear any process randomly for

00:23:48,180 --> 00:23:55,910
example during live migration and so on

00:23:51,710 --> 00:23:55,910
so questions

00:24:01,640 --> 00:24:13,070
yes now unconscious unfortunately not

00:24:09,020 --> 00:24:15,830
know another question could you go back

00:24:13,070 --> 00:24:18,559
and repeat the question just oh okay yes

00:24:15,830 --> 00:24:20,990
ask if the original pockets were already

00:24:18,559 --> 00:24:29,840
fixed and now it's not fixed

00:24:20,990 --> 00:24:31,610
unfortunately so just in the meantime

00:24:29,840 --> 00:24:37,520
thanks for fixing all the other bugs

00:24:31,610 --> 00:24:40,580
that you found just a quick question if

00:24:37,520 --> 00:24:45,710
you can go back to the first graph when

00:24:40,580 --> 00:24:46,490
you compared the just starting okay with

00:24:45,710 --> 00:24:49,880
come online

00:24:46,490 --> 00:24:54,679
yeah yeah that one so that's just a

00:24:49,880 --> 00:24:57,530
simple simple guest with no devices no

00:24:54,679 --> 00:25:04,160
discs exactly mentioned right I can show

00:24:57,530 --> 00:25:06,350
you that it's come on this remodeler

00:25:04,160 --> 00:25:09,830
knife used for that so it has nice

00:25:06,350 --> 00:25:12,559
low-key control it has here's your

00:25:09,830 --> 00:25:19,030
monitor and use the star token bucket

00:25:12,559 --> 00:25:19,030
and stop these CPUs thank you okay

00:25:33,290 --> 00:25:38,580
I love then the specific command line

00:25:36,390 --> 00:25:40,980
you are using is there anything specific

00:25:38,580 --> 00:25:43,530
to SP 90 in that or coach other

00:25:40,980 --> 00:25:45,960
developers repeat use something similar

00:25:43,530 --> 00:25:48,180
on interface systems and suppose he

00:25:45,960 --> 00:25:50,370
comes over yeah

00:25:48,180 --> 00:25:53,610
not just the command line just all of

00:25:50,370 --> 00:25:54,900
the start of our test expect most of

00:25:53,610 --> 00:25:56,580
that it would be architecture

00:25:54,900 --> 00:26:02,970
independent there could there be

00:25:56,580 --> 00:26:05,100
anything which would be different yeah

00:26:02,970 --> 00:26:08,040
the controllers that are used for

00:26:05,100 --> 00:26:10,200
discussed this so the procreate goseck

00:26:08,040 --> 00:26:12,600
components for death and that depends on

00:26:10,200 --> 00:26:16,820
the our architecture but I have tried

00:26:12,600 --> 00:26:22,550
that on x86 as well and there's also

00:26:16,820 --> 00:26:22,550
speed of similar to a synergy

00:26:30,950 --> 00:26:35,450
thank you so I also before because it

00:26:33,559 --> 00:26:36,980
was idiot sure I'm affected by the same

00:26:35,450 --> 00:26:39,350
book a good different source

00:26:36,980 --> 00:26:41,659
so to give you some priority it's not

00:26:39,350 --> 00:26:45,169
only a rare Debose issue if you pass

00:26:41,659 --> 00:26:48,289
through plenty of PCIT gpus okay

00:26:45,169 --> 00:26:50,769
you will hit it so anybody's planning

00:26:48,289 --> 00:26:53,649
passing through more than like 32 views

00:26:50,769 --> 00:26:55,850
you need not buy the same thing so it's

00:26:53,649 --> 00:26:57,679
more important than read and diverse

00:26:55,850 --> 00:27:04,609
issues yeah I get in touch with you

00:26:57,679 --> 00:27:07,639
because yeah we oh man yeah

00:27:04,609 --> 00:27:09,379
or you page 17 I think yeah well you

00:27:07,639 --> 00:27:12,759
have your process stuff I can show you

00:27:09,379 --> 00:27:16,580
another plus 37 exactly so all these

00:27:12,759 --> 00:27:19,190
cameo monitory events will be trying to

00:27:16,580 --> 00:27:22,989
get to the lock so not only in money 25

00:27:19,190 --> 00:27:22,989
event so that's a problem

00:27:28,810 --> 00:27:38,460
I tested quite a detector agnostic

00:27:34,480 --> 00:27:49,500
Eastern idea plan to get some

00:27:38,460 --> 00:27:49,500
configuration based on this oh yeah yeah

00:28:16,710 --> 00:28:23,950
you're comparing liquid against native

00:28:21,790 --> 00:28:26,890
yeah that's that's before you've done

00:28:23,950 --> 00:28:29,050
any of your improvements for the room

00:28:26,890 --> 00:28:31,570
what what would that reshare be after

00:28:29,050 --> 00:28:34,270
you've got your fixing did you measure

00:28:31,570 --> 00:28:40,090
that yeah but almost equal because I

00:28:34,270 --> 00:28:43,320
have no attached so it's the more

00:28:40,090 --> 00:28:50,830
devices you have and Mazdaspeed up so

00:28:43,320 --> 00:28:52,240
yeah not measure that but I know I was

00:28:50,830 --> 00:28:54,100
just wondering if there's any other pick

00:28:52,240 --> 00:28:55,870
after you fix the problems there's any

00:28:54,100 --> 00:28:57,820
other big causes of the difference in

00:28:55,870 --> 00:28:59,470
start-up time between the perturbation

00:28:57,820 --> 00:29:01,600
yeah you should analyze them was very

00:28:59,470 --> 00:29:04,000
interesting to know and of CPU types of

00:29:01,600 --> 00:29:07,750
cars so I think that will be really is

00:29:04,000 --> 00:29:10,740
interesting to look at this yeah I mean

00:29:07,750 --> 00:29:13,060
on only CI testing that's definitely

00:29:10,740 --> 00:29:14,890
definitely scope for doing performance

00:29:13,060 --> 00:29:17,500
regression testing to make sure some

00:29:14,890 --> 00:29:20,680
index that example of the iterating over

00:29:17,500 --> 00:29:25,650
the different realities captions that's

00:29:20,680 --> 00:29:25,650
moderately recent performance regression

00:29:25,870 --> 00:29:31,299
for the past 27 only 17 so at the F we

00:29:30,130 --> 00:29:33,669
had if we had perforce regression

00:29:31,299 --> 00:29:36,510
testing that which was father's kind of

00:29:33,669 --> 00:29:36,510
definite mistakes

00:29:41,740 --> 00:29:46,840
so

00:29:44,059 --> 00:29:46,840
any questions

00:29:47,030 --> 00:29:53,600
your time so a 30 second deepest thing

00:29:52,550 --> 00:29:56,890
yeah

00:29:53,600 --> 00:29:58,550
did you find anybody mentioning

00:29:56,890 --> 00:30:00,530
something like that

00:29:58,550 --> 00:30:02,360
don't miss someone else using the bus

00:30:00,530 --> 00:30:04,400
for some other reason how many back

00:30:02,360 --> 00:30:07,820
applause folded people say you're

00:30:04,400 --> 00:30:10,340
looking at the website so I'm not sure

00:30:07,820 --> 00:30:13,550
if it's the maintainer someone I say

00:30:10,340 --> 00:30:16,190
just use another library this one so I

00:30:13,550 --> 00:30:17,600
know this this particular book there was

00:30:16,190 --> 00:30:18,890
another thing to do with it it's not

00:30:17,600 --> 00:30:21,620
live D versus fault

00:30:18,890 --> 00:30:23,960
I mean what happens is we we register

00:30:21,620 --> 00:30:26,360
Liberty must needs an event Luke yeah it

00:30:23,960 --> 00:30:28,670
took any replies yeah but we register

00:30:26,360 --> 00:30:29,750
ourselves as the event in 40 bus so it's

00:30:28,670 --> 00:30:31,370
sitting there waiting for a reply

00:30:29,750 --> 00:30:33,290
because I'm mainly this blocked we never

00:30:31,370 --> 00:30:36,080
get over we never gives a reply to D bus

00:30:33,290 --> 00:30:39,490
I'm not sure because I have used in the

00:30:36,080 --> 00:30:41,840
second event just for the bus and it's

00:30:39,490 --> 00:30:43,670
well I'm not sure but they're going to

00:30:41,840 --> 00:30:45,850
different shows do different issues

00:30:43,670 --> 00:30:45,850
there

00:30:53,840 --> 00:31:00,490
no more questions then thanks for your

00:30:58,130 --> 00:31:00,490
attention

00:31:04,160 --> 00:31:10,019

YouTube URL: https://www.youtube.com/watch?v=H3lw50IKqGo


