Title: [2015] Keynote: QEMU status report by Alexander Graf
Publication date: 2015-09-03
Playlist: KVM Forum 2015
Description: 
	Alexander Graf
Upstream Maintainer, SUSE
Alexander started working for SUSE about 8 years ago. Since then he worked on fancy things like SUSE Studio, QEMU, KVM and openSUSE on ARM. Whenever something really useful comes to his mind, he tends to implement it. Among others he did Mac OS X virtualization using KVM, nested SVM, KVM on PowerPC and a lot of work in QEMU for openSUSE on ARM. He is the upstream maintainer of KVM for PowerPC, QEMU for PowerPC and QEMU for S390x.

Slides: https://drive.google.com/file/d/0BzyAwvVlQckecHRjZDFtVjRwdG8/view?usp=sharing
Captions: 
	00:00:14,269 --> 00:00:20,430
good morning and welcome to day two so

00:00:17,220 --> 00:00:23,340
today it's qmu yesterday we had a nice

00:00:20,430 --> 00:00:25,380
keynote about kvm and how kvm evolved

00:00:23,340 --> 00:00:28,500
during the last year since we did to a

00:00:25,380 --> 00:00:30,510
vm from 2014 now we're going to talk

00:00:28,500 --> 00:00:32,669
about how Cumae evolved so the biggest

00:00:30,510 --> 00:00:35,010
thing that we have on the cue side is we

00:00:32,669 --> 00:00:37,950
are now part of a Conservancy of a we

00:00:35,010 --> 00:00:39,780
have an entity we finally finally if you

00:00:37,950 --> 00:00:46,770
haven't read the news we can now do

00:00:39,780 --> 00:00:48,840
lawsuits the best thing ever now

00:00:46,770 --> 00:00:50,940
honestly and the major reason we joined

00:00:48,840 --> 00:00:52,350
them was so we can get funds before that

00:00:50,940 --> 00:00:54,120
we are always struggling we had summer

00:00:52,350 --> 00:00:55,350
of code coming up every year Google

00:00:54,120 --> 00:00:58,020
wanted to give us money you're like

00:00:55,350 --> 00:01:00,120
sorry we can take money can you just

00:00:58,020 --> 00:01:04,500
give it somewhere else like the tour

00:01:00,120 --> 00:01:06,090
Foundation and so we basically give gave

00:01:04,500 --> 00:01:07,979
away all the money we receive whereas

00:01:06,090 --> 00:01:09,810
now we can actually make use of it and

00:01:07,979 --> 00:01:12,869
can fund people to come over here and

00:01:09,810 --> 00:01:16,530
you know to do fancy things it's a

00:01:12,869 --> 00:01:18,150
really good step forward there were a

00:01:16,530 --> 00:01:21,060
lot more things happening throughout the

00:01:18,150 --> 00:01:23,640
last year though we were actually able

00:01:21,060 --> 00:01:26,040
to release three different versions of

00:01:23,640 --> 00:01:28,890
qmu just within the last year that's 22

00:01:26,040 --> 00:01:30,960
23 and 28 for getting released which is

00:01:28,890 --> 00:01:34,799
really i mean it's that's a lot of

00:01:30,960 --> 00:01:37,829
releases and in those we had a lot of

00:01:34,799 --> 00:01:40,560
really cool features I just think the

00:01:37,829 --> 00:01:43,470
few that looked like like totally

00:01:40,560 --> 00:01:45,170
outstanding and we have a CPI support

00:01:43,470 --> 00:01:49,439
and PCI support on arm now which is

00:01:45,170 --> 00:01:51,090
novel a new video vga adapter which

00:01:49,439 --> 00:01:53,640
basically sets the groundwork to finally

00:01:51,090 --> 00:01:56,159
get 3d support in virtual machines with

00:01:53,640 --> 00:01:58,020
paravirtualization we have a lot of

00:01:56,159 --> 00:01:59,759
groundwork that I've got done and there

00:01:58,020 --> 00:02:02,280
is still work in progress and hopefully

00:01:59,759 --> 00:02:06,000
by kvm phone 2016 you'll see real good

00:02:02,280 --> 00:02:08,039
results of multi-threaded TCG so if

00:02:06,000 --> 00:02:10,140
you're emulating a machine you could run

00:02:08,039 --> 00:02:12,270
it on multiple hosts cpus

00:02:10,140 --> 00:02:15,510
hell if the guest sees multiple CPUs

00:02:12,270 --> 00:02:16,740
which is very impressive work people

00:02:15,510 --> 00:02:19,130
have been talking about it for about 10

00:02:16,740 --> 00:02:21,780
years now finally be getting to it if

00:02:19,130 --> 00:02:24,270
you look through the commit locks oh my

00:02:21,780 --> 00:02:26,730
god that's a lot of MIPS in there so

00:02:24,270 --> 00:02:29,100
apparently somebody at imagination

00:02:26,730 --> 00:02:31,140
figured key musical project to

00:02:29,100 --> 00:02:33,450
contribute to let's just do it and now

00:02:31,140 --> 00:02:35,850
every every single Willie's we have new

00:02:33,450 --> 00:02:38,100
machine types new new cpu types new

00:02:35,850 --> 00:02:39,870
features coming in they're doing a lot

00:02:38,100 --> 00:02:43,260
of work and of course getting your car

00:02:39,870 --> 00:02:48,690
tricor I guess nobody's using that one

00:02:43,260 --> 00:02:51,170
sir we also have like every year google

00:02:48,690 --> 00:02:54,480
Summer of Code if you're participating

00:02:51,170 --> 00:02:57,360
congratulations if you're not please do

00:02:54,480 --> 00:02:59,070
so next year we do need more projects so

00:02:57,360 --> 00:03:00,750
this year round we have three big

00:02:59,070 --> 00:03:03,120
projects that happen doing some of code

00:03:00,750 --> 00:03:05,400
they're still going on going the summer

00:03:03,120 --> 00:03:08,459
coat period hasn't ended yet so we have

00:03:05,400 --> 00:03:10,890
mac OS 9 power pc support that call mike

00:03:08,459 --> 00:03:15,060
is implementing that's going pretty well

00:03:10,890 --> 00:03:17,730
we have a project to basically to

00:03:15,060 --> 00:03:20,329
finally merge the scuzzy cd-rom

00:03:17,730 --> 00:03:23,250
emulation in the attack ECG or emulation

00:03:20,329 --> 00:03:25,230
into one piece of code today if you're

00:03:23,250 --> 00:03:27,840
using a scuzzy adapter using different

00:03:25,230 --> 00:03:29,310
code then if you're using an IDE cd1

00:03:27,840 --> 00:03:30,989
which under the hood would actually be

00:03:29,310 --> 00:03:33,299
the same thing so we finally merging

00:03:30,989 --> 00:03:36,690
those code path is that's Alex's project

00:03:33,299 --> 00:03:38,489
and then if you've ever used audio in

00:03:36,690 --> 00:03:39,989
qmu you've probably realized that it's

00:03:38,489 --> 00:03:43,290
completely different from any other

00:03:39,989 --> 00:03:46,110
subsystem not only in coding style but

00:03:43,290 --> 00:03:48,150
also in how it works and how you use it

00:03:46,110 --> 00:03:50,670
use environment variables rather than

00:03:48,150 --> 00:03:53,310
command line switches use it is very

00:03:50,670 --> 00:03:55,410
very very special so it's all turn is

00:03:53,310 --> 00:03:57,769
cleaning all of that up and just doing

00:03:55,410 --> 00:03:59,519
really good work with good on it so

00:03:57,769 --> 00:04:01,440
thanks for all the Summer of Code

00:03:59,519 --> 00:04:04,019
contributors thanks to all the comma of

00:04:01,440 --> 00:04:06,030
code work that's been going on it's been

00:04:04,019 --> 00:04:07,709
very very useful and I hope I'm going to

00:04:06,030 --> 00:04:09,959
see a lot more in cool projects next

00:04:07,709 --> 00:04:11,220
year next year we also hosting lip-read

00:04:09,959 --> 00:04:13,500
project but since we're having a killer

00:04:11,220 --> 00:04:16,320
but keynote tomorrow are not mentioning

00:04:13,500 --> 00:04:18,660
those but I guess don't think you're

00:04:16,320 --> 00:04:20,669
most eager to see is how do we evolve

00:04:18,660 --> 00:04:21,620
during the last year how much did qu

00:04:20,669 --> 00:04:25,250
grow and I can

00:04:21,620 --> 00:04:28,669
it did grow we are almost at 1.6 million

00:04:25,250 --> 00:04:32,630
lines of code now just massive be a

00:04:28,669 --> 00:04:34,699
really big project by now there's a lot

00:04:32,630 --> 00:04:38,030
of stuff going on you can see during the

00:04:34,699 --> 00:04:41,900
last year we did shrink on the number of

00:04:38,030 --> 00:04:44,030
commits slightly but and the lines added

00:04:41,900 --> 00:04:46,160
as well but that doesn't mean that we

00:04:44,030 --> 00:04:50,120
don't grow right it's we're still

00:04:46,160 --> 00:04:51,979
growing a lot as a project of all what I

00:04:50,120 --> 00:04:55,639
find very very very impressing

00:04:51,979 --> 00:04:58,370
impressive however is the amount the

00:04:55,639 --> 00:04:59,960
review rate so back in the beginning in

00:04:58,370 --> 00:05:01,910
the early days of cumulative was a lot

00:04:59,960 --> 00:05:03,860
of code that got added and nobody

00:05:01,910 --> 00:05:05,630
reviewed it until a couple years ago

00:05:03,860 --> 00:05:07,910
when you finally switch to more Linux

00:05:05,630 --> 00:05:09,620
like workflow where you are doing signed

00:05:07,910 --> 00:05:12,440
offs and you do sub maintain errs and

00:05:09,620 --> 00:05:14,120
people review code and PS and ever since

00:05:12,440 --> 00:05:16,669
then you've seen a really nice take up

00:05:14,120 --> 00:05:19,520
on on reviews so by now we're actually

00:05:16,669 --> 00:05:21,650
almost at a level where most of the code

00:05:19,520 --> 00:05:24,370
that gets in gets reviewed by somebody

00:05:21,650 --> 00:05:27,260
else in parallel to just the maintainer

00:05:24,370 --> 00:05:30,770
just very very important if you want to

00:05:27,260 --> 00:05:32,000
have a high quality product out there if

00:05:30,770 --> 00:05:34,610
you take a look at the individual

00:05:32,000 --> 00:05:37,340
targets if you look at the lines of code

00:05:34,610 --> 00:05:41,240
edit you can see that Hardware models

00:05:37,340 --> 00:05:42,560
are basically averaging out so we're

00:05:41,240 --> 00:05:44,360
getting new hardware models we're

00:05:42,560 --> 00:05:45,800
getting changes in hardware models but

00:05:44,360 --> 00:05:47,930
this is about the level that we had

00:05:45,800 --> 00:05:49,550
where that's just not too much junk

00:05:47,930 --> 00:05:51,410
coming and that's not too much novel

00:05:49,550 --> 00:05:54,289
hardware coming in and new hardware is

00:05:51,410 --> 00:05:57,710
usually pretty simple to the Linux user

00:05:54,289 --> 00:06:00,680
target is I guess if you see that line

00:05:57,710 --> 00:06:02,090
you would say it's stable now if you've

00:06:00,680 --> 00:06:06,979
I use linux user it's never going to be

00:06:02,090 --> 00:06:09,020
either way it's we have changes we have

00:06:06,979 --> 00:06:10,760
still seek out going in but it's not a

00:06:09,020 --> 00:06:12,050
lot of churn which means you can

00:06:10,760 --> 00:06:13,970
probably use it for most use cases and

00:06:12,050 --> 00:06:15,260
whatever you people use it for it's good

00:06:13,970 --> 00:06:17,690
enough by now you don't see a lot of

00:06:15,260 --> 00:06:19,490
code in there the target directory is

00:06:17,690 --> 00:06:22,400
however you've seen a lot of really big

00:06:19,490 --> 00:06:24,199
spike there so does anybody have a nice

00:06:22,400 --> 00:06:26,539
guess on what is actually contributing

00:06:24,199 --> 00:06:28,310
to Alta to the increase in target

00:06:26,539 --> 00:06:32,860
directory usage and target directory

00:06:28,310 --> 00:06:35,390
commits all right we get to it

00:06:32,860 --> 00:06:38,480
so let's take a look at the lines of

00:06:35,390 --> 00:06:42,340
code edit by directory or eight we did

00:06:38,480 --> 00:06:45,470
that one of lines of code I / directory

00:06:42,340 --> 00:06:49,180
throughout the time so this is sorted by

00:06:45,470 --> 00:06:52,160
the total number of lines of codes added

00:06:49,180 --> 00:06:54,610
you can see that arm over there that

00:06:52,160 --> 00:06:58,340
that was when 64-bit ARM support came in

00:06:54,610 --> 00:06:59,810
despite to the yeah by now we're

00:06:58,340 --> 00:07:02,030
basically down to normal again so arm

00:06:59,810 --> 00:07:03,710
arm is a is an actively connective Lee

00:07:02,030 --> 00:07:05,480
supported equity maintain code base oh

00:07:03,710 --> 00:07:08,090
you always get new coding you always

00:07:05,480 --> 00:07:09,770
have some stuff going on it's actually

00:07:08,090 --> 00:07:12,200
one of the nicest targets we have power

00:07:09,770 --> 00:07:14,930
pc is very similar you can see that the

00:07:12,200 --> 00:07:16,370
spike up there to to the 9000 almost

00:07:14,930 --> 00:07:17,600
that was when Tom was around and

00:07:16,370 --> 00:07:20,390
implemented a lot of new power 8

00:07:17,600 --> 00:07:22,370
features power 8 is out that's only so

00:07:20,390 --> 00:07:24,440
much smoking at so right now it died

00:07:22,370 --> 00:07:27,380
down again but there's code changes

00:07:24,440 --> 00:07:29,450
across the line throughout MIPS is a

00:07:27,380 --> 00:07:31,640
massive GGC eating that spike going up

00:07:29,450 --> 00:07:33,290
and myths that that's when the guys came

00:07:31,640 --> 00:07:34,790
in and said we want to contribute and

00:07:33,290 --> 00:07:38,479
that's why you see us all so many myths

00:07:34,790 --> 00:07:41,270
changes during the last year if you look

00:07:38,479 --> 00:07:44,780
at the smaller targets x86 well fabrice

00:07:41,270 --> 00:07:47,210
did it and then it was done pretty much

00:07:44,780 --> 00:07:49,250
just like always when Kobe's takes

00:07:47,210 --> 00:07:50,840
things as you 90 is pretty similar you

00:07:49,250 --> 00:07:52,970
basically have to spike when support

00:07:50,840 --> 00:07:54,590
came in and ever since then it's kind of

00:07:52,970 --> 00:07:58,790
maintained it still we are still working

00:07:54,590 --> 00:08:01,520
on it tricor has a lot of lines of code

00:07:58,790 --> 00:08:04,700
edit but do if any guess what this line

00:08:01,520 --> 00:08:06,710
is going to look like tomorrow it's

00:08:04,700 --> 00:08:08,930
going to look like any other line over

00:08:06,710 --> 00:08:10,850
here so if you look at spark extends to

00:08:08,930 --> 00:08:12,440
Chris all here leaf architectures they

00:08:10,850 --> 00:08:14,630
basically had somebody committing code

00:08:12,440 --> 00:08:17,660
and then it died down and the leaf ugh

00:08:14,630 --> 00:08:19,520
you get the less changes you see so

00:08:17,660 --> 00:08:21,110
basically you have alpha that is

00:08:19,520 --> 00:08:22,640
actually meh getting maintained you see

00:08:21,110 --> 00:08:24,080
the negative numbers there that's

00:08:22,640 --> 00:08:28,900
because which is just cleaning up the

00:08:24,080 --> 00:08:31,400
code 68k is tied down sh4 is tied down

00:08:28,900 --> 00:08:33,680
microblaze is died down open viscous

00:08:31,400 --> 00:08:35,300
died down Oh unique or is basically

00:08:33,680 --> 00:08:37,760
committed and never looked at it again

00:08:35,300 --> 00:08:40,190
LMK 32 is has at least some

00:08:37,760 --> 00:08:42,419
contributions to it marks use one commit

00:08:40,190 --> 00:08:44,550
and that's it done again

00:08:42,419 --> 00:08:46,170
that's that's just the way it goes when

00:08:44,550 --> 00:08:48,029
you have all of these soft course that

00:08:46,170 --> 00:08:50,130
you want to implement as an experiment

00:08:48,029 --> 00:08:51,389
it experiment works or the code is good

00:08:50,130 --> 00:08:53,490
enough things don't change in the

00:08:51,389 --> 00:08:55,260
architecture and now we just live with

00:08:53,490 --> 00:08:57,810
them but keep that in mind if you ever

00:08:55,260 --> 00:09:02,100
have want to commute country the new

00:08:57,810 --> 00:09:03,260
architecture try to keep it alive so

00:09:02,100 --> 00:09:05,459
because we're going to be stuck with it

00:09:03,260 --> 00:09:08,519
so he was contributing to all this code

00:09:05,459 --> 00:09:12,660
well we have as always redhead as number

00:09:08,519 --> 00:09:14,430
one on who is writing patches but the

00:09:12,660 --> 00:09:16,410
top three have changed quite a bit so

00:09:14,430 --> 00:09:18,630
number two by now is linaro who've done

00:09:16,410 --> 00:09:20,790
a lot of say really really significant

00:09:18,630 --> 00:09:22,769
where I can cue you in the last year and

00:09:20,790 --> 00:09:24,750
all I'm really happy about this number

00:09:22,769 --> 00:09:26,940
three the individuals the people who I

00:09:24,750 --> 00:09:28,920
could not affiliated with any company at

00:09:26,940 --> 00:09:31,440
all not even that this doesn't even

00:09:28,920 --> 00:09:33,089
mention smaller companies like we also

00:09:31,440 --> 00:09:34,350
have a lot of like a really long tail

00:09:33,089 --> 00:09:36,779
where we have a lot of small companies

00:09:34,350 --> 00:09:38,370
contributing this is where there is no

00:09:36,779 --> 00:09:39,540
chance to tell whether this is a you

00:09:38,370 --> 00:09:42,139
come company at all it's just

00:09:39,540 --> 00:09:44,550
individuals who do random things

00:09:42,139 --> 00:09:46,350
university university students just

00:09:44,550 --> 00:09:47,820
somebody and they're in the open doing

00:09:46,350 --> 00:09:49,980
open-source work because they like it

00:09:47,820 --> 00:09:52,170
this is an awesome number so we have

00:09:49,980 --> 00:09:53,790
about a fourth of our of our commits

00:09:52,170 --> 00:09:57,360
come from individuals which is really

00:09:53,790 --> 00:09:59,760
nice if you look at the committee's you

00:09:57,360 --> 00:10:01,110
see basically about the same level we

00:09:59,760 --> 00:10:03,600
have read at this number warmly now a

00:10:01,110 --> 00:10:06,089
number two and individuals who maintain

00:10:03,600 --> 00:10:12,120
subtrees just because they like to do it

00:10:06,089 --> 00:10:14,430
on their free time nice so so but

00:10:12,120 --> 00:10:15,510
however one thing that the thing that I

00:10:14,430 --> 00:10:17,130
mentioned earlier which is what I'm

00:10:15,510 --> 00:10:19,500
really mostly happy about is all the

00:10:17,130 --> 00:10:22,410
reviews and you can definitely tell that

00:10:19,500 --> 00:10:24,570
redhead has a company culture where they

00:10:22,410 --> 00:10:29,069
basically encourage people to review

00:10:24,570 --> 00:10:30,240
code ah whereas we don't done there

00:10:29,069 --> 00:10:34,680
Susan

00:10:30,240 --> 00:10:37,520
oh well I'd say enough there is there is

00:10:34,680 --> 00:10:39,720
a lot of leave you're going on and

00:10:37,520 --> 00:10:43,170
compared to the number of kid commit

00:10:39,720 --> 00:10:45,029
sins that are the number of of authored

00:10:43,170 --> 00:10:47,480
patches from people it makes a lot of

00:10:45,029 --> 00:10:49,890
sense that what had also reviews knows

00:10:47,480 --> 00:10:52,470
but this is going to be the awesome part

00:10:49,890 --> 00:10:58,680
now so I would like to have Peter polo

00:10:52,470 --> 00:11:01,140
and Marcus stand up thank you guys you

00:10:58,680 --> 00:11:03,620
are the top three authors of patches

00:11:01,140 --> 00:11:03,620
this year

00:11:08,130 --> 00:11:14,250
so Marcus you can sit down Stefan gets

00:11:10,860 --> 00:11:15,900
up you guys committed the most patches

00:11:14,250 --> 00:11:25,820
last year as your or until your own

00:11:15,900 --> 00:11:28,560
trees and now Peter can go down and

00:11:25,820 --> 00:11:31,350
Stefan can and Eric and Michael should

00:11:28,560 --> 00:11:34,410
go up um where's Michael I don't see

00:11:31,350 --> 00:11:37,230
Michael I guess he's just still asleep

00:11:34,410 --> 00:11:38,400
um those guys reviewed way more code

00:11:37,230 --> 00:11:42,860
than anyone now look at those numbers

00:11:38,400 --> 00:11:42,860
this is gorgeous thank you guys and

00:11:44,300 --> 00:11:53,180
thanks Paula for being in all three so

00:11:49,320 --> 00:11:53,180

YouTube URL: https://www.youtube.com/watch?v=N1vw5C9XdNk


