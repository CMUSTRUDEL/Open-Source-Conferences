Title: RosCon2013 Track2 Day1 07   Chad Rockey   Android Sensors Driver
Publication date: 2014-08-31
Playlist: ROSCon 2013
Description: 
	Unaltered video by Open Robotics from http://roscon.ros.org/2013 under the Attribution-NonCommercial-NoDerivs 3.0 Unported (CC BY-NC-ND 3.0) License https://creativecommons.org/licenses/by-nc-nd/3.0/
Captions: 
	00:00:00,110 --> 00:00:06,899
so this is talk on Android sensors

00:00:02,820 --> 00:00:10,860
drivers so a quick overview of what my

00:00:06,899 --> 00:00:12,630
talk games to present is what robot

00:00:10,860 --> 00:00:15,450
platform is the most convenient for

00:00:12,630 --> 00:00:19,949
beginning Ross users is it a turtlebot

00:00:15,450 --> 00:00:22,680
to it's probably not the pr2 but maybe

00:00:19,949 --> 00:00:23,850
the simulator is a pretty good option so

00:00:22,680 --> 00:00:26,550
raise your hand if you brought a robot

00:00:23,850 --> 00:00:30,390
with you to Ross con it counts if your

00:00:26,550 --> 00:00:34,380
employer did one two three four five

00:00:30,390 --> 00:00:38,640
five so up to five robots but I know

00:00:34,380 --> 00:00:41,219
three of them were sharing one so at

00:00:38,640 --> 00:00:42,960
most two or three robots I think that

00:00:41,219 --> 00:00:47,489
Android devices are a great way to

00:00:42,960 --> 00:00:50,690
introduce Ross with hardware so a modern

00:00:47,489 --> 00:00:53,550
android phone has so many sensors it has

00:00:50,690 --> 00:00:55,410
so many that do the time limitations I'm

00:00:53,550 --> 00:00:58,739
not going to list them but trust me all

00:00:55,410 --> 00:01:00,359
these are there the most important ones

00:00:58,739 --> 00:01:02,370
and the ones that we've added the sensor

00:01:00,359 --> 00:01:05,280
messages within the last year are the

00:01:02,370 --> 00:01:10,110
magnetometer the barometer temperature

00:01:05,280 --> 00:01:12,420
sensors ambient light sensors and then a

00:01:10,110 --> 00:01:15,360
modern android phone also has plenty of

00:01:12,420 --> 00:01:17,340
interaction or possibly actuators if

00:01:15,360 --> 00:01:19,619
you'd like to think of it like that so

00:01:17,340 --> 00:01:21,390
you have a screen which are becoming

00:01:19,619 --> 00:01:24,210
more and more high resolution you have

00:01:21,390 --> 00:01:26,040
notification LEDs you have a speaker and

00:01:24,210 --> 00:01:29,100
you have a vibration motor so you can

00:01:26,040 --> 00:01:31,530
try to move a little it also has plenty

00:01:29,100 --> 00:01:35,009
of computing so one to four cores for

00:01:31,530 --> 00:01:36,920
now up to 1.7 gigahertz on the Nexus 10

00:01:35,009 --> 00:01:39,540
that's the highest i know of currently

00:01:36,920 --> 00:01:41,700
they use fairly low power and they have

00:01:39,540 --> 00:01:43,619
really good battery life for 29 hours

00:01:41,700 --> 00:01:48,450
and they say that they can do this play

00:01:43,619 --> 00:01:50,549
in HD movies so why so many sensors so

00:01:48,450 --> 00:01:53,939
originally they just had an

00:01:50,549 --> 00:01:57,750
accelerometer and when you try to play a

00:01:53,939 --> 00:02:00,930
game with your accelerometer then you

00:01:57,750 --> 00:02:03,119
ended up something like this so here I'm

00:02:00,930 --> 00:02:07,259
driving my car okay i can turn pretty

00:02:03,119 --> 00:02:09,509
soon and hard turn okay try to make

00:02:07,259 --> 00:02:11,440
sense of that in terms of how the

00:02:09,509 --> 00:02:15,040
screens rotating in terms of

00:02:11,440 --> 00:02:16,750
a short amount of time so developers had

00:02:15,040 --> 00:02:19,000
all kinds of fun with that they did

00:02:16,750 --> 00:02:21,070
low-pass filters high-pass filters and

00:02:19,000 --> 00:02:26,260
overall they just generally had a bad

00:02:21,070 --> 00:02:28,300
time so Apple and Google through Android

00:02:26,260 --> 00:02:31,120
listen to their demands and they added a

00:02:28,300 --> 00:02:34,450
gyroscope and so when you look at a

00:02:31,120 --> 00:02:44,590
gyroscope instead of that what you see

00:02:34,450 --> 00:02:49,600
is a life to type so now we'll compare

00:02:44,590 --> 00:02:51,940
the two and the gyroscope is in blue so

00:02:49,600 --> 00:02:55,060
now when I turn you can see that the

00:02:51,940 --> 00:02:58,750
rate of the turn is in blue and if we go

00:02:55,060 --> 00:03:00,820
quickly or we shake a lot especially in

00:02:58,750 --> 00:03:02,320
this direction you can see that the red

00:03:00,820 --> 00:03:04,450
goes all over the place but the blue

00:03:02,320 --> 00:03:06,490
remains relatively small so the

00:03:04,450 --> 00:03:08,880
gyroscope helps with short-term changes

00:03:06,490 --> 00:03:14,470
where the accelerometer is good for

00:03:08,880 --> 00:03:20,650
long-term orientation something and not

00:03:14,470 --> 00:03:22,780
really orientation of motion and so

00:03:20,650 --> 00:03:25,060
using the clever combinations of those

00:03:22,780 --> 00:03:27,400
two sensors you can mostly narrow down

00:03:25,060 --> 00:03:28,840
how phones oriented the last little

00:03:27,400 --> 00:03:30,580
trick is that you don't know which

00:03:28,840 --> 00:03:33,310
direction you've or how far you've

00:03:30,580 --> 00:03:35,709
turned globally so what they've added is

00:03:33,310 --> 00:03:38,680
a basically a compass and this helps

00:03:35,709 --> 00:03:40,959
with for apps like 3d street view where

00:03:38,680 --> 00:03:43,810
you can turn and on your phone pretend

00:03:40,959 --> 00:03:45,760
like you're on a street or yelps monocle

00:03:43,810 --> 00:03:48,940
which helps you identify restaurants on

00:03:45,760 --> 00:03:50,470
the street you're on they also added

00:03:48,940 --> 00:03:52,780
lots of other nice things like

00:03:50,470 --> 00:03:55,470
originally the iphone didn't have GPS

00:03:52,780 --> 00:03:58,540
use cell phone triangulation and said

00:03:55,470 --> 00:04:01,209
walk a block that way and then start the

00:03:58,540 --> 00:04:03,400
directions please and then eventually

00:04:01,209 --> 00:04:05,890
they added GPS for better initialization

00:04:03,400 --> 00:04:07,630
and then finally we all now in joyful

00:04:05,890 --> 00:04:12,400
turn-by-turn directions on our

00:04:07,630 --> 00:04:14,170
smartphone but more problems GPS doesn't

00:04:12,400 --> 00:04:16,959
work great indoors and even when it does

00:04:14,170 --> 00:04:18,880
altitude is poor quality just because of

00:04:16,959 --> 00:04:21,160
how the satellites typically orient

00:04:18,880 --> 00:04:22,870
themselves so one way you can fix that

00:04:21,160 --> 00:04:23,920
is the add a barometer which measures

00:04:22,870 --> 00:04:26,230
the

00:04:23,920 --> 00:04:29,320
metric pressure and that roughly

00:04:26,230 --> 00:04:31,570
correlates the altitude indoor

00:04:29,320 --> 00:04:34,240
localization especially with smartphones

00:04:31,570 --> 00:04:37,390
is a huge priority for the smartphone

00:04:34,240 --> 00:04:39,670
manufacturers they've created Ford maps

00:04:37,390 --> 00:04:41,920
of shopping centers so that you can try

00:04:39,670 --> 00:04:44,650
to identify which floor and which story

00:04:41,920 --> 00:04:47,050
are in and Apple has recently bought

00:04:44,650 --> 00:04:49,630
Wi-Fi slam which was a Palo Alto startup

00:04:47,050 --> 00:04:53,740
for 20 million which focused on indoor

00:04:49,630 --> 00:04:55,660
smartphone localization so okay that's

00:04:53,740 --> 00:04:58,510
weren't phone what does that have to do

00:04:55,660 --> 00:05:01,060
with robots well I'd like to claim that

00:04:58,510 --> 00:05:03,310
smartphones are now robots somewhere

00:05:01,060 --> 00:05:05,530
between the original iphone which was

00:05:03,310 --> 00:05:08,500
mostly a screen and a modern device like

00:05:05,530 --> 00:05:10,540
the Nexus 7 they basically turned into

00:05:08,500 --> 00:05:11,890
robots when they have more sensors than

00:05:10,540 --> 00:05:16,000
I can list in a 20-minute presentation

00:05:11,890 --> 00:05:18,700
that sounds like a robot to me and they

00:05:16,000 --> 00:05:21,940
even like here with the Romo you can see

00:05:18,700 --> 00:05:23,590
that they have bases for smartphones too

00:05:21,940 --> 00:05:28,720
because the only thing they're really

00:05:23,590 --> 00:05:30,850
lacking is the motion themselves so with

00:05:28,720 --> 00:05:36,610
all those sensors what's the main thing

00:05:30,850 --> 00:05:39,940
that a robot gets if it uses an android

00:05:36,610 --> 00:05:45,490
phone so here in our viz i'm going to

00:05:39,940 --> 00:05:50,610
show you my nexus 7 here so i'll pick it

00:05:45,490 --> 00:05:53,980
up and you see as i turn it it matches

00:05:50,610 --> 00:05:57,250
precisely because android has the very

00:05:53,980 --> 00:05:59,950
complicated accelerometer gyroscope and

00:05:57,250 --> 00:06:02,500
magnetometer sensor fusion built in so i

00:05:59,950 --> 00:06:03,910
can take it and just out of the box I

00:06:02,500 --> 00:06:06,730
didn't have to write that I didn't have

00:06:03,910 --> 00:06:08,890
to buy a thousand dollar plus i am you

00:06:06,730 --> 00:06:11,020
and it comes with all those other

00:06:08,890 --> 00:06:13,540
sensors you can buy a nexus 7 for two

00:06:11,020 --> 00:06:16,270
hundred dollars and it has the screen

00:06:13,540 --> 00:06:21,940
and everything that you need if you want

00:06:16,270 --> 00:06:25,570
to go a little more complex and let's

00:06:21,940 --> 00:06:27,910
see here i'm gonna try a new demo which

00:06:25,570 --> 00:06:30,690
I changed just because of how big this

00:06:27,910 --> 00:06:33,910
auditorium is so I'm going to switch to

00:06:30,690 --> 00:06:36,160
my nexus 4 in my pocket which actually

00:06:33,910 --> 00:06:36,840
is running my Wi-Fi hotspot because i

00:06:36,160 --> 00:06:39,180
can't get why

00:06:36,840 --> 00:06:43,380
for another room so yeah another

00:06:39,180 --> 00:06:45,389
advantage of the Android for robots so

00:06:43,380 --> 00:06:51,960
I'm going to start the sensors driver

00:06:45,389 --> 00:06:54,889
here hey let's see oh and now I need to

00:06:51,960 --> 00:06:59,810
zoom out because I added another feature

00:06:54,889 --> 00:07:02,850
so what I did here was I very quickly

00:06:59,810 --> 00:07:04,590
simulated the barometric pressure for

00:07:02,850 --> 00:07:26,700
the altitude so now we have orientation

00:07:04,590 --> 00:07:30,330
and altitude so if i go here ok so now

00:07:26,700 --> 00:07:33,060
on the chart we see altitude being

00:07:30,330 --> 00:07:34,380
plotted so with what Ryan did earlier

00:07:33,060 --> 00:07:37,669
running around the room i'm going to try

00:07:34,380 --> 00:07:37,669
to repeat his experiment

00:08:01,580 --> 00:08:07,800
they're so you can see that it's pretty

00:08:05,099 --> 00:08:10,009
accurate probably within the 10 or 20

00:08:07,800 --> 00:08:12,419
centimetres who's who and I'm exhausted

00:08:10,009 --> 00:08:14,099
which is more than enough to tell which

00:08:12,419 --> 00:08:16,530
floor you're currently on in a building

00:08:14,099 --> 00:08:21,000
so that's pretty good to come on with

00:08:16,530 --> 00:08:24,330
what they give with the rest that they

00:08:21,000 --> 00:08:26,009
give you I'm only exhausted because I

00:08:24,330 --> 00:08:32,010
ate up all my minutes by figuring out

00:08:26,009 --> 00:08:34,140
the screen I promise so how do you use

00:08:32,010 --> 00:08:35,940
these technologies so the easiest way

00:08:34,140 --> 00:08:38,279
with Android is just to install from the

00:08:35,940 --> 00:08:40,260
android market i'm also going to start

00:08:38,279 --> 00:08:43,560
marrying older versions on github in

00:08:40,260 --> 00:08:45,750
case you're actively using using the

00:08:43,560 --> 00:08:47,399
version for research and you don't want

00:08:45,750 --> 00:08:49,670
me to update and ruin your research with

00:08:47,399 --> 00:08:49,670
a bug

00:08:52,840 --> 00:08:57,070
source builds are awaiting some ross

00:08:55,160 --> 00:09:00,080
java pull requests that i have pending

00:08:57,070 --> 00:09:02,570
these are mostly things for near-field

00:09:00,080 --> 00:09:06,110
communication and a library called

00:09:02,570 --> 00:09:08,450
actionbarsherlock another cool feature i

00:09:06,110 --> 00:09:09,830
get this due to the android market i can

00:09:08,450 --> 00:09:12,020
see exactly how many people have

00:09:09,830 --> 00:09:15,110
installed the app so at this point i've

00:09:12,020 --> 00:09:18,440
had over 600 people install this app

00:09:15,110 --> 00:09:22,700
within the last two years I don't know

00:09:18,440 --> 00:09:24,320
the usage for most Ross packages but I

00:09:22,700 --> 00:09:26,960
think that for an issue one like this

00:09:24,320 --> 00:09:28,910
this is pretty cool I also get to see

00:09:26,960 --> 00:09:32,210
exactly what android version everyone

00:09:28,910 --> 00:09:35,180
uses the good news is is that we're

00:09:32,210 --> 00:09:37,610
fairly good adopters however even with

00:09:35,180 --> 00:09:39,890
us gingerbread is still at the top so

00:09:37,610 --> 00:09:43,520
that's why I still choose the support

00:09:39,890 --> 00:09:47,060
android 2.3 and up but you can see that

00:09:43,520 --> 00:09:49,700
i think yeah the two jelly beans are

00:09:47,060 --> 00:09:54,950
well above ice cream sandwich so we're

00:09:49,700 --> 00:09:57,560
at least upgrading a new so new things

00:09:54,950 --> 00:09:59,930
this year is that the ross java source

00:09:57,560 --> 00:10:02,480
has been moved to github so now pull

00:09:59,930 --> 00:10:05,420
requests are available we're aiming for

00:10:02,480 --> 00:10:08,780
stable within ross release cycles so

00:10:05,420 --> 00:10:09,890
that groovy won't change mid-cycle there

00:10:08,780 --> 00:10:13,250
are the links if you want to see the

00:10:09,890 --> 00:10:14,780
sources i'm trying to get together birds

00:10:13,250 --> 00:10:17,900
of a feather meeting for some time

00:10:14,780 --> 00:10:19,520
tomorrow maybe lunch and we should

00:10:17,900 --> 00:10:21,680
probably start a special interest group

00:10:19,520 --> 00:10:23,960
I know that it's used by Willow Garage

00:10:21,680 --> 00:10:28,160
Google ujin and the turtlebot

00:10:23,960 --> 00:10:30,470
manufacturers and then if you'd like to

00:10:28,160 --> 00:10:32,060
get started during the Rostov a

00:10:30,470 --> 00:10:34,100
hackathon we did a pretty good job

00:10:32,060 --> 00:10:38,240
documenting what to do here on the

00:10:34,100 --> 00:10:41,840
Android core wiki page and a few special

00:10:38,240 --> 00:10:44,930
thank yous for the last year so Google

00:10:41,840 --> 00:10:47,780
and Damon Koehler he was the primary

00:10:44,930 --> 00:10:52,430
ross java developer and the liz and gave

00:10:47,780 --> 00:10:56,270
us almost everything with ross java OS

00:10:52,430 --> 00:10:57,920
RF and their intern Kazuto he updated

00:10:56,270 --> 00:11:01,720
the ross android apps during his

00:10:57,920 --> 00:11:04,089
internship Yujin and Daniel

00:11:01,720 --> 00:11:05,829
they are updating and releasing

00:11:04,089 --> 00:11:08,379
turtlebot apps as well as starting to

00:11:05,829 --> 00:11:12,220
organize the community around ross java

00:11:08,379 --> 00:11:14,410
and then finally axel from the open

00:11:12,220 --> 00:11:16,629
source community he took my sensor

00:11:14,410 --> 00:11:21,009
driver and extended it to support the

00:11:16,629 --> 00:11:23,430
open sea be based cameras on android any

00:11:21,009 --> 00:11:23,430

YouTube URL: https://www.youtube.com/watch?v=6omZLaCCjrw


