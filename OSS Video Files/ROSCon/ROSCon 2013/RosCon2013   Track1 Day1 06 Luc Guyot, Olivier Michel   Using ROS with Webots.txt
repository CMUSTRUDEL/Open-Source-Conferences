Title: RosCon2013   Track1 Day1 06 Luc Guyot, Olivier Michel   Using ROS with Webots
Publication date: 2014-09-02
Playlist: ROSCon 2013
Description: 
	Unaltered video by Open Robotics from http://roscon.ros.org/2013 under the Attribution-NonCommercial-NoDerivs 3.0 Unported (CC BY-NC-ND 3.0) License https://creativecommons.org/licenses/by-nc-nd/3.0/
Captions: 
	00:00:00,000 --> 00:00:07,259
too short very short presentation of how

00:00:04,350 --> 00:00:09,120
to use Ross in combination with the web

00:00:07,259 --> 00:00:16,410
at software which is a simulation

00:00:09,120 --> 00:00:18,119
software so first a list of topics I

00:00:16,410 --> 00:00:23,070
will explain you briefly what is web

00:00:18,119 --> 00:00:26,550
bots and 0 to use rose in combination

00:00:23,070 --> 00:00:30,779
with my buds so I will must expand this

00:00:26,550 --> 00:00:33,960
topic and to exemplify the use of rocks

00:00:30,779 --> 00:00:37,739
inside webisode free I will take a very

00:00:33,960 --> 00:00:40,760
basic example of joysticks or do a

00:00:37,739 --> 00:00:44,250
joystick plug to you computer which will

00:00:40,760 --> 00:00:47,700
act on a simulated robots simulated in

00:00:44,250 --> 00:00:50,989
white balls that's what I will do so

00:00:47,700 --> 00:00:53,370
first what is web also it's a

00:00:50,989 --> 00:00:56,489
environment developments while you can

00:00:53,370 --> 00:01:00,719
model your robot first then you can

00:00:56,489 --> 00:01:04,140
program it and of course simulated so it

00:01:00,719 --> 00:01:06,750
is mostly used in research education but

00:01:04,140 --> 00:01:09,360
also industry so they are of thousand

00:01:06,750 --> 00:01:15,060
universities and research centers that

00:01:09,360 --> 00:01:17,369
are using white box right now so

00:01:15,060 --> 00:01:19,740
provided with the software you have a

00:01:17,369 --> 00:01:23,369
very complete technical documentation

00:01:19,740 --> 00:01:26,479
you have support service die live from

00:01:23,369 --> 00:01:31,170
the developers of web bots live also

00:01:26,479 --> 00:01:34,229
forum for users and a set of suit

00:01:31,170 --> 00:01:36,990
Orioles so what I'm going to do what I'm

00:01:34,229 --> 00:01:41,040
going to talk to you in a few minutes to

00:01:36,990 --> 00:01:43,829
calm is is a part of a tutorial which

00:01:41,040 --> 00:01:48,270
will be available soon on the on the web

00:01:43,829 --> 00:01:52,049
page so although it's non freely on

00:01:48,270 --> 00:01:54,329
software and non open source all the

00:01:52,049 --> 00:01:56,700
models all the programs inside the

00:01:54,329 --> 00:01:58,320
distribution are available for you

00:01:56,700 --> 00:02:02,070
therefore is out on the other busy

00:01:58,320 --> 00:02:06,000
license so let me summarize the key

00:02:02,070 --> 00:02:09,780
features of the software so first it's a

00:02:06,000 --> 00:02:10,970
cross-platform so mad windows linux you

00:02:09,780 --> 00:02:13,800
got them

00:02:10,970 --> 00:02:17,099
you can choose your favorite programming

00:02:13,800 --> 00:02:19,800
language so maybe must be videon to 20

00:02:17,099 --> 00:02:22,410
22 hours today is set birthplace and

00:02:19,800 --> 00:02:25,349
python because if you use Ross you are

00:02:22,410 --> 00:02:28,950
using C++ of piratin but you can also

00:02:25,349 --> 00:02:31,500
use Java in night lab so it's it's a

00:02:28,950 --> 00:02:33,510
real time a physics simulation in the

00:02:31,500 --> 00:02:36,470
sense that physically simulated and it's

00:02:33,510 --> 00:02:38,730
always aiming at real time so all the

00:02:36,470 --> 00:02:41,970
provided examples in its furniture now

00:02:38,730 --> 00:02:43,380
running the real time and evolve but

00:02:41,970 --> 00:02:45,930
depending on the complexity of your

00:02:43,380 --> 00:02:49,709
system you may be not able to reach your

00:02:45,930 --> 00:02:51,870
time you for some reports you can remote

00:02:49,709 --> 00:02:53,940
control your awards from the web at

00:02:51,870 --> 00:02:55,980
software and you can also cross compile

00:02:53,940 --> 00:02:58,470
your compiler so it's possible for

00:02:55,980 --> 00:03:03,959
instance for the epic or the robot is

00:02:58,470 --> 00:03:05,850
that we know p and a strong point of the

00:03:03,959 --> 00:03:09,209
software is also that you can build you

00:03:05,850 --> 00:03:11,989
robot from a quite md graphical user

00:03:09,209 --> 00:03:15,090
interface so you have copy and paste

00:03:11,989 --> 00:03:16,769
capabilities then you are you're adding

00:03:15,090 --> 00:03:18,660
nodes you are stacking nodes so

00:03:16,769 --> 00:03:21,329
following your tree like structure you

00:03:18,660 --> 00:03:23,670
are adding new components so a body's a

00:03:21,329 --> 00:03:25,380
body in a joint and the body and joint

00:03:23,670 --> 00:03:28,019
and so you are building robots and

00:03:25,380 --> 00:03:30,390
adding the devices and you pick the

00:03:28,019 --> 00:03:33,269
devices into a rich library of

00:03:30,390 --> 00:03:36,530
ready-made objects so ranging from

00:03:33,269 --> 00:03:39,390
bankers for sensors to lead our sick

00:03:36,530 --> 00:03:42,780
sensors or I don't know spherical

00:03:39,390 --> 00:03:45,090
cameras for instance and all this device

00:03:42,780 --> 00:03:48,600
which are simulated in my buds you can

00:03:45,090 --> 00:03:52,019
turn them into a Roth snowed so this I

00:03:48,600 --> 00:03:54,209
will explain later so it is working evil

00:03:52,019 --> 00:03:56,549
in the sense I am going to to explain

00:03:54,209 --> 00:03:59,190
and what I can say no is that there are

00:03:56,549 --> 00:04:01,769
several projects that which are using

00:03:59,190 --> 00:04:04,109
web bots in combination with with Ross

00:04:01,769 --> 00:04:07,590
so I know that in the German university

00:04:04,109 --> 00:04:09,720
of Australia trace where bouts cuca view

00:04:07,590 --> 00:04:12,720
bot model which is controlled by was

00:04:09,720 --> 00:04:16,530
controller and researchers at esa I

00:04:12,720 --> 00:04:19,289
Institute also using a landshark model

00:04:16,530 --> 00:04:20,290
controlled by Rose so it's a it's

00:04:19,289 --> 00:04:22,990
working

00:04:20,290 --> 00:04:25,510
so we are few robots similarly in

00:04:22,990 --> 00:04:28,810
software so robot is now in opaque oddly

00:04:25,510 --> 00:04:32,860
balance now so adept mobile robotics

00:04:28,810 --> 00:04:35,200
pioneer 380 and here is another view of

00:04:32,860 --> 00:04:38,320
the software so that people if we say

00:04:35,200 --> 00:04:40,000
what we what we see on the left side we

00:04:38,320 --> 00:04:42,370
have what we call the century this is

00:04:40,000 --> 00:04:45,130
where you design your robots and you see

00:04:42,370 --> 00:04:49,810
most of the characteristics of you

00:04:45,130 --> 00:04:53,110
simulations so the positions on the

00:04:49,810 --> 00:04:55,810
center the 3d view so that's where you

00:04:53,110 --> 00:04:58,120
run the simulation you have basic 3d

00:04:55,810 --> 00:05:01,360
dedication tools but you can also

00:04:58,120 --> 00:05:05,320
interact at runtime by adding a force or

00:05:01,360 --> 00:05:06,640
talk to you robot objects and in the

00:05:05,320 --> 00:05:09,970
next widdy's you will be able also to

00:05:06,640 --> 00:05:12,880
resize objects at runtime and on the

00:05:09,970 --> 00:05:15,040
right so most Rivlin forest today is the

00:05:12,880 --> 00:05:18,670
programming interface to build a detour

00:05:15,040 --> 00:05:20,770
with highlights in taxing and jumped

00:05:18,670 --> 00:05:23,230
where our capabilities and you can hear

00:05:20,770 --> 00:05:29,620
program you a sea controller in C++

00:05:23,230 --> 00:05:34,120
control Python control here so here's

00:05:29,620 --> 00:05:35,950
just the basic things about the web at

00:05:34,120 --> 00:05:37,900
you you have to know so when you are

00:05:35,950 --> 00:05:40,660
working with web as you are working on

00:05:37,900 --> 00:05:42,820
projects it's a directory and it contain

00:05:40,660 --> 00:05:45,790
at least two of our directories the

00:05:42,820 --> 00:05:49,540
first one code words contain the word

00:05:45,790 --> 00:05:52,750
files so that's files are describing the

00:05:49,540 --> 00:05:57,400
environments the euro bots are sharing

00:05:52,750 --> 00:06:00,790
so you define using an extension of the

00:05:57,400 --> 00:06:03,520
vrml language so virtual reality markup

00:06:00,790 --> 00:06:06,970
language the road and the robots you

00:06:03,520 --> 00:06:10,690
won't use so it's not you rdf but maybe

00:06:06,970 --> 00:06:13,160
later we will implement an unimportant

00:06:10,690 --> 00:06:18,770
but it's quite it's quite so you might

00:06:13,160 --> 00:06:20,690
be the evolving useful then you have the

00:06:18,770 --> 00:06:23,750
controllers directory and inside it

00:06:20,690 --> 00:06:26,690
choose you you program your controller

00:06:23,750 --> 00:06:29,509
files so controller in web bots word is

00:06:26,690 --> 00:06:32,330
just a NEX excel file that you drive

00:06:29,509 --> 00:06:36,979
over simulated robots or we were robots

00:06:32,330 --> 00:06:39,380
from from the software ok I know I know

00:06:36,979 --> 00:06:44,840
I explain you Oh to use bribery to use

00:06:39,380 --> 00:06:47,570
rolls inside web words so basically what

00:06:44,840 --> 00:06:50,900
we have to do is just to implement a web

00:06:47,570 --> 00:06:53,810
apps controller as a rose node possibly

00:06:50,900 --> 00:06:57,740
connected to other nodes and so inside

00:06:53,810 --> 00:07:02,710
the controllers whose file you use first

00:06:57,740 --> 00:07:05,539
the web ads API functions and then the

00:07:02,710 --> 00:07:07,880
rocks API function to publish on the

00:07:05,539 --> 00:07:12,169
design topics so very suspect for

00:07:07,880 --> 00:07:14,870
examples so for instance if you want to

00:07:12,169 --> 00:07:18,229
publish the camera image then you get

00:07:14,870 --> 00:07:21,020
this image with web ads API function and

00:07:18,229 --> 00:07:24,080
you can turn it very easily into the

00:07:21,020 --> 00:07:28,539
crowd spending rose message that's under

00:07:24,080 --> 00:07:31,970
the format of into a tiara for instance

00:07:28,539 --> 00:07:35,449
ok so it's a really simple two-step

00:07:31,970 --> 00:07:37,669
process first we generate the raw

00:07:35,449 --> 00:07:40,760
selectable using the raw speed system

00:07:37,669 --> 00:07:43,190
and then we copy the executable at the

00:07:40,760 --> 00:07:44,930
right place that that means we're we're

00:07:43,190 --> 00:07:47,180
buds expected so in the control

00:07:44,930 --> 00:07:50,120
directory that's what you have to do to

00:07:47,180 --> 00:07:53,900
set up you project now I go a bit

00:07:50,120 --> 00:07:56,960
further into the details so my example

00:07:53,900 --> 00:07:59,750
is the example of a single controller

00:07:56,960 --> 00:08:02,900
called joystick so it reads the output

00:07:59,750 --> 00:08:05,449
values of a real Hardware joystiq plug

00:08:02,900 --> 00:08:08,510
to your computer and transform them into

00:08:05,449 --> 00:08:10,669
motion commands for a simulated robot it

00:08:08,510 --> 00:08:14,960
will be a simple differential with

00:08:10,669 --> 00:08:18,770
bubbles so what we what you've got here

00:08:14,960 --> 00:08:21,710
so it's the joystick controller will be

00:08:18,770 --> 00:08:22,560
a rose node and we implement we have to

00:08:21,710 --> 00:08:24,600
implement it

00:08:22,560 --> 00:08:27,780
and he subscribes to the main topic of

00:08:24,600 --> 00:08:29,780
the joy I've called Jojo and listen to

00:08:27,780 --> 00:08:32,849
the axis and the booty own values and

00:08:29,780 --> 00:08:36,450
the joystiq also will launch the jury

00:08:32,849 --> 00:08:39,779
node so the joy note is already present

00:08:36,450 --> 00:08:42,659
in retribution it's not you and by means

00:08:39,779 --> 00:08:47,100
of Ralph launch so Anna launch file is

00:08:42,659 --> 00:08:50,279
quite standard stuff so here I'm going

00:08:47,100 --> 00:08:52,770
to rebuild the whole project you need to

00:08:50,279 --> 00:08:55,110
make the submersion rock from the bigger

00:08:52,770 --> 00:08:57,690
bones so what are the bare bones so

00:08:55,110 --> 00:09:00,930
first the description of your world so

00:08:57,690 --> 00:09:04,200
your environment and your robots here in

00:09:00,930 --> 00:09:07,890
the world file then the source file of

00:09:04,200 --> 00:09:11,400
your controller so I choose here ACP

00:09:07,890 --> 00:09:12,810
extension file and then we also need

00:09:11,400 --> 00:09:16,230
this launcher file which is quite

00:09:12,810 --> 00:09:19,650
straightforward so in the source file

00:09:16,230 --> 00:09:24,089
you have to add first The Rose eaters

00:09:19,650 --> 00:09:26,940
okay for the journal then the way both

00:09:24,089 --> 00:09:28,770
leaders so we will be simulating a robot

00:09:26,940 --> 00:09:32,520
which is differential will that's why we

00:09:28,770 --> 00:09:36,750
need all these two ears and then inside

00:09:32,520 --> 00:09:40,020
the code you launch the joy node with

00:09:36,750 --> 00:09:44,430
the Rose flew the web storage program so

00:09:40,020 --> 00:09:46,170
using the launcher defined earlier so

00:09:44,430 --> 00:09:49,200
and the 9 instruction we see in this

00:09:46,170 --> 00:09:54,720
controller is that we subscribe so at

00:09:49,200 --> 00:09:56,490
frequency 10 Earth's to a call back so

00:09:54,720 --> 00:09:59,580
we subscribe to the Jolly topic and

00:09:56,490 --> 00:10:01,710
every and so I frequency 10 else we are

00:09:59,580 --> 00:10:04,620
calling a joy callback which will read

00:10:01,710 --> 00:10:08,100
the value or along the axis of joystick

00:10:04,620 --> 00:10:11,310
and on the buttons and turn it into a

00:10:08,100 --> 00:10:13,740
robot notion by setting the speed of the

00:10:11,310 --> 00:10:15,420
wheels of the differentials so we

00:10:13,740 --> 00:10:19,440
grabbed the values from the joint out

00:10:15,420 --> 00:10:24,560
and set them using the API function from

00:10:19,440 --> 00:10:28,770
my boss called set velocities bonus ok

00:10:24,560 --> 00:10:32,490
know concretely oh do we build such a

00:10:28,770 --> 00:10:34,970
project so first we create a cake in

00:10:32,490 --> 00:10:39,110
workspace inside the way but I

00:10:34,970 --> 00:10:41,029
literally so these lines are except from

00:10:39,110 --> 00:10:42,860
the rows with beginner tutorial it's

00:10:41,029 --> 00:10:45,800
pretty standard you create a directory

00:10:42,860 --> 00:10:48,889
and you in it with cat king cat in

00:10:45,800 --> 00:10:51,920
command then inside this cat clean

00:10:48,889 --> 00:10:56,120
workspace so catkin is the official

00:10:51,920 --> 00:10:59,360
rosebud system and then you created a

00:10:56,120 --> 00:11:02,600
package with the command cat can create

00:10:59,360 --> 00:11:05,029
a cage now with the arguments the name

00:11:02,600 --> 00:11:06,649
of the package rebels drastic and two

00:11:05,029 --> 00:11:09,680
dependencies which are the obvious one

00:11:06,649 --> 00:11:12,319
so we are implementing a CPP controller

00:11:09,680 --> 00:11:14,480
and which depends on the joy node so we

00:11:12,319 --> 00:11:18,949
specified this to dependencies ear and

00:11:14,480 --> 00:11:20,689
when we when we did that there was a

00:11:18,949 --> 00:11:23,509
file you seem a list by that was

00:11:20,689 --> 00:11:25,730
automatically generated here in the

00:11:23,509 --> 00:11:29,000
package and web to happens a few lines

00:11:25,730 --> 00:11:32,060
to link the exact exact able to Weber's

00:11:29,000 --> 00:11:34,189
controller library so you know we add

00:11:32,060 --> 00:11:38,269
always the same four lines to this email

00:11:34,189 --> 00:11:41,329
key file then we go up in the catalog

00:11:38,269 --> 00:11:44,660
space to make essentially and we are

00:11:41,329 --> 00:11:46,819
done what remains to be done is just to

00:11:44,660 --> 00:11:48,350
copy the executable eventually possibly

00:11:46,819 --> 00:11:52,730
we may rename it inside the control

00:11:48,350 --> 00:11:55,490
dietary and that's that's that it's so a

00:11:52,730 --> 00:11:58,639
summary of what we did first we create

00:11:55,490 --> 00:12:01,250
the cat clean workspace inside the

00:11:58,639 --> 00:12:04,610
weapons confer dietary and inside this

00:12:01,250 --> 00:12:08,649
alkene workspace we created roth's

00:12:04,610 --> 00:12:11,269
package called web-based joystick and

00:12:08,649 --> 00:12:13,329
that's pretty much it so all the detail

00:12:11,269 --> 00:12:16,009
in friction can be found on the website

00:12:13,329 --> 00:12:18,379
there is a tutorial explaining oh you

00:12:16,009 --> 00:12:20,870
can set up you rust not inside weapons

00:12:18,379 --> 00:12:23,629
and what I did with the joystick you can

00:12:20,870 --> 00:12:27,189
do it with all the somatic devices that

00:12:23,629 --> 00:12:29,120
can find inside the web at software so

00:12:27,189 --> 00:12:32,470
thank you very much for your attention

00:12:29,120 --> 00:12:32,470

YouTube URL: https://www.youtube.com/watch?v=hYPR5dPge8s


