Title: Monzo Style Magic Links in your React Native App - React Native London - February 2019
Publication date: 2019-03-11
Playlist: React Native London
Description: 
	Josh Warwick from Theodo

Learn how to create Monzo style magic links in React Native. In this talk I will run through the different technologies needed to produce a great authentication flow, explain the common pitfalls involved in implementing. Iâ€™ll also show how this can be used with services other than email, such as facebook messenger - which we used on a project at Theodo recently.
_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,000 --> 00:00:04,710
I'm Josh I work at a consultancy called

00:00:02,190 --> 00:00:05,879
Theo doe we're a digital agency that

00:00:04,710 --> 00:00:08,220
help people solve their business

00:00:05,879 --> 00:00:09,690
problems using kippie designs and part

00:00:08,220 --> 00:00:12,920
of that is react native and running this

00:00:09,690 --> 00:00:15,299
Meetup and today I want to talk about

00:00:12,920 --> 00:00:16,680
Manzo's style magic links and so I'm

00:00:15,299 --> 00:00:18,029
sure you've all seen ones oh and for

00:00:16,680 --> 00:00:19,920
those of you that haven't gonna jump

00:00:18,029 --> 00:00:21,769
into it now and show a quick tutorial or

00:00:19,920 --> 00:00:25,800
demo of it

00:00:21,769 --> 00:00:28,650
so as you can see you open the app it's

00:00:25,800 --> 00:00:34,739
pretty pretty look in type your email

00:00:28,650 --> 00:00:36,899
address click Next

00:00:34,739 --> 00:00:38,340
have a nice loading animation while

00:00:36,899 --> 00:00:44,010
their server processes thousands of

00:00:38,340 --> 00:00:45,420
emails it takes a little while it's

00:00:44,010 --> 00:00:50,219
quite a nice animation so you let them

00:00:45,420 --> 00:00:55,110
off this is one I had earlier so yet you

00:00:50,219 --> 00:01:02,070
have to go back see how this lovely

00:00:55,110 --> 00:01:04,439
email from one's oh you click login it

00:01:02,070 --> 00:01:08,130
takes me to this page it takes me back

00:01:04,439 --> 00:01:09,540
to the app and now logged me in takes a

00:01:08,130 --> 00:01:11,869
little bit of time so I'm just gonna

00:01:09,540 --> 00:01:11,869
stand here

00:01:16,180 --> 00:01:22,690
and we're in it takes a little while to

00:01:21,160 --> 00:01:24,280
configure I probably recorded anyone had

00:01:22,690 --> 00:01:27,600
a mobile data it's not the important

00:01:24,280 --> 00:01:31,240
part there we go you can see my AWS

00:01:27,600 --> 00:01:33,190
lovely cool so what are the three things

00:01:31,240 --> 00:01:34,840
I want to talk about one is like the

00:01:33,190 --> 00:01:36,580
different all flow so sort here we saw a

00:01:34,840 --> 00:01:38,350
Mondale example there's actually lots of

00:01:36,580 --> 00:01:39,940
different things you can do the second

00:01:38,350 --> 00:01:42,040
thing is deep links and actually the

00:01:39,940 --> 00:01:44,230
majority the magic is actually around

00:01:42,040 --> 00:01:46,330
how to configure deep links and passing

00:01:44,230 --> 00:01:48,340
parameters between them and then thirdly

00:01:46,330 --> 00:01:50,050
is the alternatives so like what other

00:01:48,340 --> 00:01:51,790
what are these other deep links you can

00:01:50,050 --> 00:01:53,410
use that's using email but can you use

00:01:51,790 --> 00:01:56,020
other things like text facing messenger

00:01:53,410 --> 00:01:59,320
things like that so let's jump straight

00:01:56,020 --> 00:02:01,000
into the all flows so this is a very

00:01:59,320 --> 00:02:01,540
very basic one I thought I'd start very

00:02:01,000 --> 00:02:06,030
simple

00:02:01,540 --> 00:02:09,729
welcome to Josh so the new hip startup

00:02:06,030 --> 00:02:11,680
we collect emails and that's about it so

00:02:09,729 --> 00:02:13,690
the first thing you can do is very

00:02:11,680 --> 00:02:16,720
simple or you can just have an own

00:02:13,690 --> 00:02:18,990
endpoint except see my dress and gives

00:02:16,720 --> 00:02:21,550
you a lovely off token and you're in

00:02:18,990 --> 00:02:24,220
obviously we don't want to do this it's

00:02:21,550 --> 00:02:26,650
very insecure any user can log in as any

00:02:24,220 --> 00:02:29,470
other user but it's a good first step we

00:02:26,650 --> 00:02:30,850
actually are using email to log in the

00:02:29,470 --> 00:02:32,890
second one we look at is like a code

00:02:30,850 --> 00:02:34,209
verification system you may sit this is

00:02:32,890 --> 00:02:37,840
quite similar to like a text message

00:02:34,209 --> 00:02:39,940
thing so again you hit slash off you

00:02:37,840 --> 00:02:42,190
post your email this time yeah just

00:02:39,940 --> 00:02:43,989
getting okay and in the background send

00:02:42,190 --> 00:02:45,700
you an email with a automatically

00:02:43,989 --> 00:02:48,519
generated code which corresponds to

00:02:45,700 --> 00:02:50,620
email so you type in yeah then we go

00:02:48,519 --> 00:02:53,100
over to here you see my screens now

00:02:50,620 --> 00:02:55,900
change to actually enter your code in

00:02:53,100 --> 00:02:58,150
this time of a new endpoint slash verify

00:02:55,900 --> 00:03:01,030
where I passed my email and my code and

00:02:58,150 --> 00:03:02,650
this time I get my token so it's a bit

00:03:01,030 --> 00:03:04,330
more secure you know that the user has

00:03:02,650 --> 00:03:07,660
to have access to that email address to

00:03:04,330 --> 00:03:09,989
be able to log into your app tada we're

00:03:07,660 --> 00:03:09,989
in again

00:03:12,440 --> 00:03:17,430
so how can be more complicated how can

00:03:15,810 --> 00:03:19,500
we be a more seamless user experience

00:03:17,430 --> 00:03:21,330
than having to navigate to emails

00:03:19,500 --> 00:03:23,910
remember a code navigate all the white

00:03:21,330 --> 00:03:26,730
way back and type it in so this is the

00:03:23,910 --> 00:03:28,290
first start into deep links again we

00:03:26,730 --> 00:03:30,720
here slash off endpoint Rove our email

00:03:28,290 --> 00:03:32,850
we know this by now we get an OK this

00:03:30,720 --> 00:03:35,990
time the back end generates a little

00:03:32,850 --> 00:03:40,320
token and we actually generate a link

00:03:35,990 --> 00:03:42,900
which we can click in our app and we'll

00:03:40,320 --> 00:03:45,420
or in our email sorry and take us into

00:03:42,900 --> 00:03:46,590
our app so this time we're not entering

00:03:45,420 --> 00:03:48,660
your code we're just clicking that

00:03:46,590 --> 00:03:50,970
simple link and so the first thing which

00:03:48,660 --> 00:03:53,790
we saw in munzo opens this little menu

00:03:50,970 --> 00:03:56,490
which says open in your app in my case

00:03:53,790 --> 00:04:00,570
josh so and it has to pass around a URL

00:03:56,490 --> 00:04:02,880
parameter of the token you then take the

00:04:00,570 --> 00:04:04,500
token and I'm authenticated who's

00:04:02,880 --> 00:04:07,620
passing around the auth token in the URL

00:04:04,500 --> 00:04:09,240
parameters the alternative to this is

00:04:07,620 --> 00:04:11,910
actually just one step better and that's

00:04:09,240 --> 00:04:13,650
using Universal links or app links for

00:04:11,910 --> 00:04:14,820
Android and I'll come to that later but

00:04:13,650 --> 00:04:16,020
it means that you can click the link and

00:04:14,820 --> 00:04:20,670
go straight to your app without this

00:04:16,020 --> 00:04:28,020
middle step of going through Safari cool

00:04:20,670 --> 00:04:29,490
next cool again we're in our app ok so

00:04:28,020 --> 00:04:30,570
this is the big one this is the one we

00:04:29,490 --> 00:04:32,010
actually use in the project and I'll

00:04:30,570 --> 00:04:35,220
demonstrate the project at the end the

00:04:32,010 --> 00:04:36,660
talk so this time we hit slash off we've

00:04:35,220 --> 00:04:38,340
actually been smart in our at this time

00:04:36,660 --> 00:04:39,960
and we've generated a little token so

00:04:38,340 --> 00:04:41,820
that you we know that the users come

00:04:39,960 --> 00:04:44,310
from this app that's open right now

00:04:41,820 --> 00:04:45,810
because in the previous examples you

00:04:44,310 --> 00:04:47,700
could just click that link or know the

00:04:45,810 --> 00:04:49,940
code and type it in to any of the apps

00:04:47,700 --> 00:04:53,160
this has to be specifically this device

00:04:49,940 --> 00:04:55,500
again returns ok again we generate

00:04:53,160 --> 00:04:57,810
another token this is not a North token

00:04:55,500 --> 00:04:59,400
this is a separate open and with the way

00:04:57,810 --> 00:05:02,100
we know it's this users we have a triple

00:04:59,400 --> 00:05:06,180
of this email code and token that's that

00:05:02,100 --> 00:05:07,640
identity again click here to link this

00:05:06,180 --> 00:05:10,710
is the same as the previous example

00:05:07,640 --> 00:05:12,630
again opening Josh so but this time

00:05:10,710 --> 00:05:15,870
rather than being logged in we've only

00:05:12,630 --> 00:05:18,180
got this token we've got the code so

00:05:15,870 --> 00:05:20,580
what do we do we send off to our sash

00:05:18,180 --> 00:05:22,890
verify link with the token in code which

00:05:20,580 --> 00:05:24,870
then gives us our wall token this means

00:05:22,890 --> 00:05:27,000
that at this point we know

00:05:24,870 --> 00:05:28,710
only that device and that user who has

00:05:27,000 --> 00:05:31,460
access to that email can login to the

00:05:28,710 --> 00:05:33,660
device and so it's as good as a password

00:05:31,460 --> 00:05:35,160
it's actually once that bad and things

00:05:33,660 --> 00:05:37,530
like forget your password links which

00:05:35,160 --> 00:05:45,990
are equivalent to doing the the second

00:05:37,530 --> 00:05:47,970
solution anyway again you're in cool so

00:05:45,990 --> 00:05:50,880
this is like quite a big a bit of

00:05:47,970 --> 00:05:52,230
content for those of you that have don't

00:05:50,880 --> 00:05:55,770
know about deep links they are

00:05:52,230 --> 00:05:57,750
remarkably just difficult to work with

00:05:55,770 --> 00:06:00,240
so hopefully this clarifies a bit if

00:05:57,750 --> 00:06:02,790
you've tried to do use them and stop

00:06:00,240 --> 00:06:04,650
because you've got lost in it so

00:06:02,790 --> 00:06:07,050
basically there were kind of three

00:06:04,650 --> 00:06:09,390
different types URL schemes Universal

00:06:07,050 --> 00:06:10,830
linking and app links so I'm gonna talk

00:06:09,390 --> 00:06:12,570
about those for you first to talk about

00:06:10,830 --> 00:06:14,640
how we actually deal with that in read

00:06:12,570 --> 00:06:16,710
react native world as all of these three

00:06:14,640 --> 00:06:18,360
are all native lands and then talk about

00:06:16,710 --> 00:06:19,680
deep links to the service which kind of

00:06:18,360 --> 00:06:23,340
alleviates the problems you have with

00:06:19,680 --> 00:06:25,320
the first three so the first one is URL

00:06:23,340 --> 00:06:27,300
schemes and this is the what we saw when

00:06:25,320 --> 00:06:29,070
we saw the Mons I want this open in Josh

00:06:27,300 --> 00:06:31,920
so there's an example of using a URL

00:06:29,070 --> 00:06:33,660
scheme and so there you have the form of

00:06:31,920 --> 00:06:36,750
this thing at the bottom Josh so for

00:06:33,660 --> 00:06:41,550
slash just like a normal URL in fact

00:06:36,750 --> 00:06:43,620
your browser can actually do this I've

00:06:41,550 --> 00:06:45,390
changed the link in the background so

00:06:43,620 --> 00:06:47,430
it's not actually pointing to Josh so

00:06:45,390 --> 00:06:49,800
but the link hyperlink points to Spotify

00:06:47,430 --> 00:06:52,080
and you can see this prompted me at the

00:06:49,800 --> 00:06:53,660
top to open my Spotify on my computer so

00:06:52,080 --> 00:06:57,300
this isn't just an app thing this is a

00:06:53,660 --> 00:07:02,130
general that kind of web thing or app

00:06:57,300 --> 00:07:05,670
they weren't there can what I say native

00:07:02,130 --> 00:07:09,090
app thing on your computer as well cool

00:07:05,670 --> 00:07:12,710
I don't know whether areas are nicely

00:07:09,090 --> 00:07:16,320
animated that will take it cool and so

00:07:12,710 --> 00:07:18,090
to add your L schemes you have to change

00:07:16,320 --> 00:07:20,490
things in the Android manifest you

00:07:18,090 --> 00:07:25,830
simply add this bit of code and for iOS

00:07:20,490 --> 00:07:29,040
you just simply add the like URL schemes

00:07:25,830 --> 00:07:33,560
and you can see these in Xcode here I

00:07:29,040 --> 00:07:33,560
have a demo can't is it gonna work

00:07:34,550 --> 00:07:41,840
my phone cool so this is like the URL

00:07:40,100 --> 00:07:43,640
schemes in action so I see my Josh so

00:07:41,840 --> 00:07:45,740
what if I try and click that nothing

00:07:43,640 --> 00:07:49,340
happens but if I click my facebook

00:07:45,740 --> 00:07:51,860
Messenger 1 I go to get this prompt to

00:07:49,340 --> 00:07:55,580
go to messenger I click go

00:07:51,860 --> 00:07:56,840
go to messenger I don't Josh so doesn't

00:07:55,580 --> 00:08:00,080
work because my Josh so app doesn't

00:07:56,840 --> 00:08:05,500
exist unfortunately the second one is it

00:08:00,080 --> 00:08:08,060
hinter later there we go

00:08:05,500 --> 00:08:10,340
cool so Universal links I gave a little

00:08:08,060 --> 00:08:13,370
hint here on my demo but these are a

00:08:10,340 --> 00:08:15,680
standard URL so they're not like my Josh

00:08:13,370 --> 00:08:19,070
so that's like where hey just HTTP would

00:08:15,680 --> 00:08:21,020
be these are just web sites what so this

00:08:19,070 --> 00:08:23,030
to be WWE Josh said Oh cob slash login

00:08:21,020 --> 00:08:24,560
however you need to require that you

00:08:23,030 --> 00:08:26,840
prove this domain otherwise I could just

00:08:24,560 --> 00:08:29,750
say ok when people go on Google load my

00:08:26,840 --> 00:08:31,610
app nobody really wants that it's a

00:08:29,750 --> 00:08:33,710
universal links you have to configure in

00:08:31,610 --> 00:08:36,500
Xcode and you have to use app links

00:08:33,710 --> 00:08:38,420
slash Josh so app links just specifies

00:08:36,500 --> 00:08:40,310
the type of associated domain there are

00:08:38,420 --> 00:08:42,410
different ones are we going to them now

00:08:40,310 --> 00:08:44,060
and you have to add it to you

00:08:42,410 --> 00:08:45,920
entitlements file and it adds it to the

00:08:44,060 --> 00:08:48,010
app ID on dev Center so it's a specific

00:08:45,920 --> 00:08:56,120
entitlement that comes with bundled with

00:08:48,010 --> 00:08:58,430
your app ID cool and so you actually

00:08:56,120 --> 00:09:01,160
need to far it's going to set up Josh so

00:08:58,430 --> 00:09:03,380
universal linking I need to obviously

00:09:01,160 --> 00:09:05,390
I'll be using Josh so calm I need to set

00:09:03,380 --> 00:09:06,920
up an apple site association and you can

00:09:05,390 --> 00:09:08,330
actually look at these on anything that

00:09:06,920 --> 00:09:10,010
has deep link in their app so for

00:09:08,330 --> 00:09:11,870
example reddit.com slash apple sized

00:09:10,010 --> 00:09:14,390
sociation you can see what they've got

00:09:11,870 --> 00:09:16,340
for Josh so I needed to look like this

00:09:14,390 --> 00:09:17,780
I'm looking at dwell too much on this

00:09:16,340 --> 00:09:19,430
but I'll make the slides available and

00:09:17,780 --> 00:09:22,520
like there's a few good guides on the

00:09:19,430 --> 00:09:23,900
internet but I'll make this available my

00:09:22,520 --> 00:09:26,270
github afterwards so you can copy and

00:09:23,900 --> 00:09:28,340
paste this code that's probably the

00:09:26,270 --> 00:09:31,820
hardest part about doing this is finding

00:09:28,340 --> 00:09:33,740
something that actually works yeah and

00:09:31,820 --> 00:09:35,240
there's this the helpful tool by branch

00:09:33,740 --> 00:09:38,090
Daioh which I'll talk about later as

00:09:35,240 --> 00:09:40,340
well the company not the tool but this

00:09:38,090 --> 00:09:42,110
will validate the Apple site

00:09:40,340 --> 00:09:43,960
associations for you and verify that

00:09:42,110 --> 00:09:47,940
it's doing exactly what you wanted to do

00:09:43,960 --> 00:09:50,370
again so here's the demo the amazing

00:09:47,940 --> 00:09:58,050
Universal links I click this takes me

00:09:50,370 --> 00:10:01,740
straight to fit oh no no the amazing

00:09:58,050 --> 00:10:03,900
demo take me straight face and messenger

00:10:01,740 --> 00:10:06,750
without prompting me sears username not

00:10:03,900 --> 00:10:08,280
found because they have a scream sorry a

00:10:06,750 --> 00:10:10,320
scheme which tries to search the

00:10:08,280 --> 00:10:14,340
username of that user so no one has the

00:10:10,320 --> 00:10:19,020
usernames Josh so unfortunately might

00:10:14,340 --> 00:10:20,340
take it ok so that was actually all for

00:10:19,020 --> 00:10:24,150
iOS you may have noticed in my header

00:10:20,340 --> 00:10:26,280
BIOS only so what do we do if you're an

00:10:24,150 --> 00:10:28,740
Android user and we do care about

00:10:26,280 --> 00:10:31,200
Android users I swear it works the same

00:10:28,740 --> 00:10:32,990
as Universal links and you again you

00:10:31,200 --> 00:10:38,070
just add it into your Android manifest

00:10:32,990 --> 00:10:39,860
the same as your L schemes but you still

00:10:38,070 --> 00:10:42,600
have to set up to verify your domain

00:10:39,860 --> 00:10:44,310
this is quite similar but it has to be

00:10:42,600 --> 00:10:46,230
dot well known before such assets or

00:10:44,310 --> 00:10:48,270
JSON you can actually put the Apple site

00:10:46,230 --> 00:10:52,350
config under dot well known as well if

00:10:48,270 --> 00:10:55,020
that suits you again it just tells tells

00:10:52,350 --> 00:10:57,720
not actually your app that tells Google

00:10:55,020 --> 00:10:59,700
Play that this URL relates to your app

00:10:57,720 --> 00:11:01,230
so that when you click a link in the

00:10:59,700 --> 00:11:03,120
rest of the operating system it knows to

00:11:01,230 --> 00:11:07,530
then open your app and you have to give

00:11:03,120 --> 00:11:09,750
a fingerprint of your Gradle store so

00:11:07,530 --> 00:11:11,100
the seek your Gradle store you then have

00:11:09,750 --> 00:11:14,260
to yeah you probably fingerprint so it

00:11:11,100 --> 00:11:17,950
knows it has to be that precise app

00:11:14,260 --> 00:11:19,720
or than IRS needs IRS needs to your team

00:11:17,950 --> 00:11:23,080
identifier and your bundle ID which is

00:11:19,720 --> 00:11:25,210
kind of unique this cool

00:11:23,080 --> 00:11:27,760
so that's I've brush through it quite

00:11:25,210 --> 00:11:29,980
quickly but it's quite complicated to

00:11:27,760 --> 00:11:32,470
find on the internet so there are a few

00:11:29,980 --> 00:11:34,780
services that you can use you can use

00:11:32,470 --> 00:11:37,120
branch daya and firebase they're kind of

00:11:34,780 --> 00:11:40,330
two differently marketed tools branch

00:11:37,120 --> 00:11:42,160
dot IO is one for kind of using blink

00:11:40,330 --> 00:11:44,500
attribution more generally but they have

00:11:42,160 --> 00:11:46,570
a really good service that lets you

00:11:44,500 --> 00:11:48,580
handles all the site associations for

00:11:46,570 --> 00:11:52,060
you provide you some nice links like

00:11:48,580 --> 00:11:54,400
Josh slow link which isn't too bad

00:11:52,060 --> 00:11:55,900
so they handle attribution for you and

00:11:54,400 --> 00:11:58,690
you can customize them quite easily

00:11:55,900 --> 00:12:00,160
which is quite nice and has a really

00:11:58,690 --> 00:12:02,080
handy test death mode I don't have

00:12:00,160 --> 00:12:04,900
interviews you use stripe but it's the

00:12:02,080 --> 00:12:07,980
same experience of that really really

00:12:04,900 --> 00:12:11,140
nice to use firebase more of a service

00:12:07,980 --> 00:12:12,790
base thing it can handle note

00:12:11,140 --> 00:12:14,860
notifications and a lot of your app

00:12:12,790 --> 00:12:18,100
authentication yourself

00:12:14,860 --> 00:12:19,510
it lets you actually have a login very

00:12:18,100 --> 00:12:21,660
more service so you don't have to do any

00:12:19,510 --> 00:12:24,190
of the backend work that you'd need to

00:12:21,660 --> 00:12:26,440
have my nice little arrows and end

00:12:24,190 --> 00:12:30,880
points which otherwise can be tricky to

00:12:26,440 --> 00:12:32,770
implement okay so now we finally only

00:12:30,880 --> 00:12:34,300
just got the app to open we haven't even

00:12:32,770 --> 00:12:35,830
talked about any of the authentication

00:12:34,300 --> 00:12:40,270
part in the deep links that's just

00:12:35,830 --> 00:12:42,400
getting it to open so we need to

00:12:40,270 --> 00:12:44,710
actually get this URL parameters I

00:12:42,400 --> 00:12:46,300
mysteriously talked about before and so

00:12:44,710 --> 00:12:47,470
you can include them in the URL and they

00:12:46,300 --> 00:12:50,290
get passed straight to the app and you

00:12:47,470 --> 00:12:52,090
can read them and so to do this you need

00:12:50,290 --> 00:12:55,000
to actually link the react native

00:12:52,090 --> 00:12:57,490
linking library so on the retina t'v web

00:12:55,000 --> 00:12:58,390
page is quite nice it's all of this I

00:12:57,490 --> 00:13:00,760
won't dwell on it

00:12:58,390 --> 00:13:02,730
but you can find the guide here and it's

00:13:00,760 --> 00:13:05,740
perfectly perfect works perfectly well

00:13:02,730 --> 00:13:08,110
for services like branch do they have a

00:13:05,740 --> 00:13:09,790
similar readme it's very similar

00:13:08,110 --> 00:13:15,190
functions but they link back into their

00:13:09,790 --> 00:13:17,410
own native library and so we're finally

00:13:15,190 --> 00:13:19,330
finally in JavaScript world and actually

00:13:17,410 --> 00:13:22,240
it's remarkably easy it's just these two

00:13:19,330 --> 00:13:23,710
functions so the first one handles deep

00:13:22,240 --> 00:13:25,720
links when the app is cloade and the

00:13:23,710 --> 00:13:27,430
second one half of handles like any

00:13:25,720 --> 00:13:29,640
other app launches so when you come in

00:13:27,430 --> 00:13:29,640
via

00:13:31,270 --> 00:13:34,089
when the absolutely open you come to

00:13:32,500 --> 00:13:36,040
come into it and you can just handle

00:13:34,089 --> 00:13:38,080
your login there and then that you get

00:13:36,040 --> 00:13:40,630
past the URL so you can pass the URL

00:13:38,080 --> 00:13:45,339
parameters compare it to your code send

00:13:40,630 --> 00:13:49,180
it off to your back-end cool and that's

00:13:45,339 --> 00:13:51,760
me doing all of that stuff cool so

00:13:49,180 --> 00:13:53,589
that's one example what the alternative

00:13:51,760 --> 00:13:54,940
also you can keep showing mail

00:13:53,589 --> 00:13:58,089
I've briefly talked about Facebook

00:13:54,940 --> 00:13:59,830
Messenger so the reason I did this talk

00:13:58,089 --> 00:14:01,360
is because I implemented this using

00:13:59,830 --> 00:14:04,180
facebook Messenger with a company called

00:14:01,360 --> 00:14:07,750
Cleo we've worked for them for the last

00:14:04,180 --> 00:14:08,740
four weeks and build this app they're

00:14:07,750 --> 00:14:09,430
actually going to be keep doing a

00:14:08,740 --> 00:14:11,380
demonstrative

00:14:09,430 --> 00:14:16,150
deeper demonstration I will have this up

00:14:11,380 --> 00:14:22,050
later on so see the sort from the app

00:14:16,150 --> 00:14:22,050
store if it's in the part that breaks

00:14:23,010 --> 00:14:26,310
open it up

00:14:28,800 --> 00:14:32,880
so this apps completely build me out

00:14:30,480 --> 00:14:35,209
native there was character education and

00:14:32,880 --> 00:14:35,209
believe me

00:14:40,899 --> 00:14:44,480
if you don't already have a messenger

00:14:42,950 --> 00:14:51,980
account you can do the author using

00:14:44,480 --> 00:14:54,050
email so here we go into messenger so

00:14:51,980 --> 00:14:57,680
that actually provides a universal link

00:14:54,050 --> 00:15:00,399
into messenger using an Mme link and so

00:14:57,680 --> 00:15:04,790
the back end servers pick this up and

00:15:00,399 --> 00:15:07,430
notice that this user me has actually

00:15:04,790 --> 00:15:09,320
used this me Tommy link in that deep

00:15:07,430 --> 00:15:11,450
link we actually send something to the

00:15:09,320 --> 00:15:12,800
server in the back end that's the token

00:15:11,450 --> 00:15:15,529
from the file that the device has

00:15:12,800 --> 00:15:17,209
generated that's unique to my phone the

00:15:15,529 --> 00:15:18,890
back end then actually generates a new

00:15:17,209 --> 00:15:20,720
deep link with an other code which

00:15:18,890 --> 00:15:22,010
matches the one I've sent up and that's

00:15:20,720 --> 00:15:24,950
actually including this waitlist me

00:15:22,010 --> 00:15:26,480
button so when I click it unfortunately

00:15:24,950 --> 00:15:29,510
it's not a universal link that's

00:15:26,480 --> 00:15:30,680
Facebook's fault so Facebook don't

00:15:29,510 --> 00:15:31,850
really want you to leave the Apple in

00:15:30,680 --> 00:15:34,010
nice way and have a good user experience

00:15:31,850 --> 00:15:37,190
so it was in a web view and you have to

00:15:34,010 --> 00:15:41,470
use it falls back to use the URL scheme

00:15:37,190 --> 00:15:45,170
but continue go back to my app and

00:15:41,470 --> 00:15:46,160
hopefully logs me in I'm in this isn't

00:15:45,170 --> 00:15:47,029
because I've mentioned looking

00:15:46,160 --> 00:15:48,520
successfully

00:15:47,029 --> 00:15:51,380
there's the weightless mechanic and I'm

00:15:48,520 --> 00:15:53,680
so because I developed erm I'm on but

00:15:51,380 --> 00:15:59,690
you can see though now here say hello

00:15:53,680 --> 00:16:01,190
and get a nice reply and if you're

00:15:59,690 --> 00:16:02,720
hitting a few weeks I'm clear we're

00:16:01,190 --> 00:16:05,140
gonna come and talk one of the next

00:16:02,720 --> 00:16:12,320
meetups to talk about the app forever

00:16:05,140 --> 00:16:14,300
cool so in summary the really hard part

00:16:12,320 --> 00:16:16,550
about doing magic links is the deep

00:16:14,300 --> 00:16:18,020
linking and so ones are actually have

00:16:16,550 --> 00:16:21,040
their own web page which they link to

00:16:18,020 --> 00:16:26,300
and they constantly try and push you a

00:16:21,040 --> 00:16:30,199
URL scheme so so on the sit sorry that's

00:16:26,300 --> 00:16:33,140
not explained very well on the deep link

00:16:30,199 --> 00:16:35,540
URL if you don't get automatically

00:16:33,140 --> 00:16:39,920
shoved into the app they false put it

00:16:35,540 --> 00:16:42,980
like it tries to redirect you to the

00:16:39,920 --> 00:16:44,240
scheme so it basically forces you into

00:16:42,980 --> 00:16:45,589
the app even if you've got things

00:16:44,240 --> 00:16:47,750
blocking it like that facebook Messenger

00:16:45,589 --> 00:16:50,510
one that all sorts of fallback if that

00:16:47,750 --> 00:16:52,760
was copied into notes like mine one was

00:16:50,510 --> 00:16:54,820
I know the scheme so if I clicked it it

00:16:52,760 --> 00:16:58,280
would take me straight into Cleo

00:16:54,820 --> 00:17:01,250
it's yeah it's a bit annoying but it's

00:16:58,280 --> 00:17:02,600
you can use these services like whilst

00:17:01,250 --> 00:17:03,560
oh and firebase - trying to leave here

00:17:02,600 --> 00:17:05,390
some of these problems we're actually

00:17:03,560 --> 00:17:08,240
seeing branch to i/o and that handles

00:17:05,390 --> 00:17:10,790
all of the full-backs for us otherwise

00:17:08,240 --> 00:17:12,350
it'd be quite pain to implement and this

00:17:10,790 --> 00:17:16,040
shows it can be quite easily easy to

00:17:12,350 --> 00:17:18,410
create a good ol flow it's not too hard

00:17:16,040 --> 00:17:20,990
to bit link these native modules the

00:17:18,410 --> 00:17:23,360
tutorials are pretty sound and you can

00:17:20,990 --> 00:17:25,010
easily transfer it to text or face and

00:17:23,360 --> 00:17:27,110
message based apps that's the really

00:17:25,010 --> 00:17:28,700
cool part it's not tied down to email by

00:17:27,110 --> 00:17:31,670
doing this you can use any form of like

00:17:28,700 --> 00:17:33,290
identity so if you trust that your user

00:17:31,670 --> 00:17:35,420
has one phone you trust they up their

00:17:33,290 --> 00:17:37,070
phone you can use text what's up slack

00:17:35,420 --> 00:17:40,490
anything with basically an API to send a

00:17:37,070 --> 00:17:42,260
message which is super cool cool thank

00:17:40,490 --> 00:17:49,250
you it's been short but I wanted to give

00:17:42,260 --> 00:17:50,840
a brief figured out I say the question

00:17:49,250 --> 00:17:53,330
was to do have any problems using it

00:17:50,840 --> 00:17:55,100
with the test mode in branch do and so

00:17:53,330 --> 00:17:56,930
with react native that can be problems

00:17:55,100 --> 00:17:58,940
we actually have a really great set up

00:17:56,930 --> 00:18:00,710
for our staging in production

00:17:58,940 --> 00:18:03,110
environments so we do different builds

00:18:00,710 --> 00:18:05,750
based upon this we the thing called the

00:18:03,110 --> 00:18:07,100
BAM reacting a degenerate toolbox it's a

00:18:05,750 --> 00:18:09,110
really great tool sets of environments

00:18:07,100 --> 00:18:11,180
for you because of that we can then

00:18:09,110 --> 00:18:13,670
split between the branch mode and the

00:18:11,180 --> 00:18:15,410
branch test mode in the live mode and so

00:18:13,670 --> 00:18:18,650
we automatically injecting the keys when

00:18:15,410 --> 00:18:21,020
we build for production and staging so

00:18:18,650 --> 00:18:23,740
that's why it's been great for us you

00:18:21,020 --> 00:18:23,740

YouTube URL: https://www.youtube.com/watch?v=tKjQp7xjETg


