Title: My DiY Pinball on Debian
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Philippe Coval

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/23-my-diy-pinball-on-debian/

Debian gamers might already know "Emilia Pinball" which is in main since 2007 
and did not evolve much since and package was orphaned.

But this does not stop here !

During 2020 lock-down (first one) to get busy, I started to build my "Pincab" machine
to push the experience forward.

I'll explain the journey of this hobby project and how to replicate easily home 
on your favorite Debian or Yocto system using low cost materials.

Expect demos and track progress at:

https://purl.org/rzr/pinball

Meanwhile you can play with extra community tables I published in main repos.

Room: Main
Scheduled start: 2020-11-22 14:30:00
Captions: 
	                              hi                               everybody and welcome to our next talk                               my diy pinball on tvm with phillip cover                               please enjoy it                               hello mini dev conference watchers this                               is philip kovale and today i will share                               some experiments about                               how i built a pinball as a hobby                               so let me introduce myself so i'm a                                software engineer based in france                                i've been an open source contributor for                                a couple of decades now i'm currently                                involved into mozilla rap                                program i've been previously involved                                into a                                different business that use open source                                like a                                tizen operating system for intel then i                                act on                                octo with york                                                        and my main contribution when i joined                                samsung                                was iot framework you can contact me at                                pearl.org                                here i'm crying material for                                hi you can also check what i'm doing                                i shared a lot on the videos or twitter                                it's about                                open source linux and                                some experimental main main melting iot                                and                                           but let's talk about emilia pinball i                                should get                                credit to eric engvist that wrote this                                game in year                                     it's a plain regular linux game it's                                using opengl for rendering                                and the sdl simple direct layer                                library for os abstraction                                he also wrote an editor using qt                                framework for creating new tables                                everything has been published to                                sourceforge and a couple of years later                                i contributed a couple of patches                                to ports new platform load                                           try to wrote my own table                                and then progressive i own maintenance                                of the project                                meanwhile debian packagers                                made a package for this game so thanks a                                lot                                and recently it was often but it's not a                                problem because i will probably adopt it                                and                                update it through the debian game team                                and i've been already packaging new                                tables so you can try them                                let's now let's talk about the                                contributing the community contribution                                so there were some patches from                                communities that's pretty cool and                                even some extra tables but for legal                                reasons i didn't want to train the main                                project with                                different assets with different license                                it can be a nightmare to maintain                                and it can cause some scalability issue                                because asset size can be a little big                                so i didn't want to                                mix uh data and source too much so i                                suggested the authors to create their                                own project and try to                                make it as an external plugin for media                                because it's already designed to do this                                way                                but i believe that auto tools are auto                                full should i say                                blocked the creators to maintain their                                own table                                so they integrated their own tabling                                into their own forks of the project and                                there was different                                project ongoing so that's the problem i                                decided to solve recently because i did                                it by my own and i isolated the code                                i mean now i'm maintaining a separate                                package for each tables                                let me show you a short demonstration                                about the                                the new table which is in debian testing                                so if you load the table                                you can play this game so                                you can see uh it's uh like a regular                                pinball with some lot of                                effects like your nudge it has some                                magnets where it can                                triggers the balls and so on                                um but it doesn't stop here because i                                wanted to port on some                                 single ballpark computer like this one                                 from st                                 on and i've been using yocto this time                                 so why                                 did i i had a look at this because i                                 wanted to check about                                 how can legacy software can run on                                 modern                                 systems so here we are talking about                                 desktop opengl how can it's been                                 deployed to current software stack                                 because there is a lot of                                 improvements lately on mesa                                    x                                                                    have also the                                 canon mod settings to get rid of the                                 graphics stuff and we have also the api                                 for                                                                     one i tried to use an opengl                                 es wrapper to provide a gloss                                 implementation but probably the future                                 should go now to vulcan api                                 so to do this i needed to get access to                                 the board support package from different                                 vendors so i bought it to york to open                                 media and                                 made the packaging for this new                                 custom operating system which is a                                 quite interesting also and then i                                 benchmarked my board i have um so i                                 tried on the stm                                         i have this one which is supported by                                 octo also                                 there is also the dragon board which is                                 on v                                                       and uh what i really want to check is                                 about the support about the current                                 free driver we have on the um gpu                                 and i wrote my own custom profiler to                                 have some                                 metrics uh you can                                 decide to deploy to new system but i                                 wanted to compare to something i can                                 check easily without troubling                                 everything so i get                                 back to debian for having a stable                                 reference system                                 so anyway here's a strong demonstration                                 about                                 early results so this is uh                                 running on the stm                                                                                                i was using a software rendering and                                 it's not                                 displaying full screen but the                                 performance is                                 enough to be playable but it can be                                 accelerated that's                                 what i wanted to explore in the future                                 so something uh not related but                                 uh i wanted also to make a pin cab so                                 it's a                                 pinball simulator in a cabinet                                 um that's something uh i i've been uh                                 doing during the                                                                                                       busy                                 and uh i created something which is very                                 low cost so                                 you can should you can you can replicate                                 this without investing too much money                                 so it cost me virtually almost nothing                                 because i reuse                                 existing uh stuff                                 i say some paint some savage of existing                                 equipment                                 so i found a digital signage screen                                 which is quite heavy and i put it on two                                 threshold                                 and then you can level it up to                                 one meter and it fits like a real                                 pinball                                 for the soft so hardware i use a                                 very old pc which is running on the                                 pentium                                                                                                      needed to create uh add some new buttons                                 so                                 first i got the keyboard then i stripped                                 some mouse each side of the of the                                 display and it fit my needs                                 i wanted something easy to dismantle and                                 to move in different location                                 anyway i tried it on a future pinball                                 first                                 so it's a windows game and it's quite                                 old now but you can install it on linux                                 using lotteries there is a demo                                 table it's running wine                                 emulator for the loading                                 directx api uh it's not free                                 so i wanted something free like and                                 label like a media pinbar so                                 i want to port a media to this new                                 setup so                                 how to do a pin cab from using a media                                 so                                 first you need to support a different                                 display like in portrait mode with a                                 camera which is in static view and                                 displaying almost all the table                                 and i then i want some scrapes to boot                                 directly to a random table                                 and it's using x                                                 run on vylon and do some systemd                                 startup script and i wanted something                                 easy to boot and to turn it off uh                                 so i'm using a read-only file system on                                 a usb                                 key i also need to handle a new inputs                                 type and eventually in future new                                 outputs                                 so currently i just need some buttons to                                 control flippers so using the mouse i                                 can have                                 two buttons so if there is two two mouse                                 i can have four button but                                 only two are used because they are the                                 same so for flippers i can use a right                                 and left                                 button and the plugger i can use a                                 middle button                                 i can try to emulate a nudge effects by                                 combination of buttons also                                 so here is the demonstration of the                                 setup running                                 so it's running on this old pc                                 and here it's running the same green                                 table                                 and uh even the cut is staring at the                                 ball so i believe it's realistic enough                                 i have to display on this setup but                                 only one is animated currently and you                                 can notice some nudge                                 effects also                                 so now he wanted to support some new                                 inputs                                 so neutral control is not very intuitive                                 even if it's a combination of mouse i                                 might find                                 that tried it didn't really manage so                                 they were stitching the                                 thus pinball so i wanted to make                                 something more                                 natural so i relying now on a motion                                 sensor                                 it's more easy but i had to                                 develop something new so i use another                                 board which is uh                                 an xp freedom k                                              from netex conference and                                 it's shipping an accelerometer i wrote a                                 driver for it                                 running on nutex and currently i'm                                 using a proof of concept using embed os                                 using                                 h id classes for the                                 usb keyboard and so on                                 but this can be imported to other                                 hardware or other operating systems                                 there are many                                 like zephyus right out free rtos the                                 staizon rt                                 and so on so here's the demonstration of                                 my                                 nudge so let's see this in action                                 so here is what i have now this is a my                                 pin cap profile                                 and i can control it using just two                                 button                                 from the mouse and i can also                                 tap on my table on the right                                 and it will produce a new effects                                 that's pretty cool                                 and everything is running on debian of                                 course so first originally the software                                 was                                 supporting only keyboard events so                                 i try to produce the same events using a                                 mouse button so                                 it's our street button on the mouse here                                 i have two mouse uh                                 strip it to the edge of my display and                                 with the middle button i can                                 plunge the ball and control each fifth                                 on each button                                 and i can also emulate a nudge by                                 pressing combination of buttons                                 then i use this sensor using this nxp                                 board and if i'm moving my                                 table it will produce a new                                 event so it's using it's like a keyboard                                 and if i'm tapping on it it will trigger                                 this                                 new effect so it's currently supporting                                 not                                 the embed they can uh now import it to                                 net x                                 and uh and it's probably some help                                 and it just works this way just play and                                 tap and it will move                                 accordingly                                 now what's going on for the future so i                                 wrote my scripts i want to release this                                 in a                                 final sdl version then port it to uh                                 open embedded and bitback and then                                 publish                                 sdl                                                                      distro                                 and to want to deploy this to different                                 single board computers                                 some new some helps our new ids are                                 welcome                                 so something that can be valuable is to                                 pick a                                 community patch from a lot of ongoing                                 forks i didn't have a look but                                 most of them are on github experiment                                 some new                                                    opengl es for embody the vulcan api or                                 eventually play on a vr                                 that can be also interesting i want also                                 to support                                 many distribution and debian is fine but                                 it can be a little                                 slow so maybe it can be interesting to                                 have snapshot package                                 that anybody can try maybe it could make                                 sense also to modernize                                 the assets format so maybe                                 json or gltf could be the more revelant                                 today                                 also it can be interesting to support                                 the script                                 system and not to rely on the shared                                 library                                 and eventually see how i can pass                                 other games tables or try to import them                                 and it could make sense to revive this                                 all the penny                                 edit i'm not sure but if there is an                                 interest let me know                                 and uh yeah i already planned to join                                 deb                                 debian as a developer so if anyone want                                 to help me is that                                 something i had on my plans for a long                                 time now                                 so if you want to try it either you can                                 try the                                 debian packages once they are updated or                                 you can just                                 grab the code from gate so                                 i use github for managing my code but                                 it's also mirrored on sourceforge                                 and i use debian as a rep reference                                 operating system you can                                 build a snapshot package from my script                                 or my uh                                 personal repository or and if you're not                                 running on debian you can also use                                 docker                                 to build and run it on any os so if you                                 are even running on windows you can                                 also try the game                                 so feel free to share feedback on my                                 github or                                 upstream at this sourceforge i probably                                 need to update                                 the description and so on and if there                                 is no feedback you can                                 ping me on fedevers i have a mastodon                                 account and you can see                                 all the updates something that can be a                                 very helpful because i'm not                                 a graphic designer but many                                 tables that should be i think be updated                                 so this one is her table also so                                 it's working it's kind it can be fun but                                 uh                                 it should be i think                                 updated to make it nicer and more                                 convenient                                 so here are some links if you want to                                 get                                 more details some more uh information                                 about                                 related projects and uh yeah thanks a                                 lot                                 for everything and if there is any                                 question                                 i can handle them online on irc                                 and i think there is also a pad and                                 thank you very much                                 for this and uh your feedback will be                                 very available so                                 thanks a lot and see you bye                                 [Music]                                 thanks a lot for sharing this wonderful                                 setting phillip thank you for                                 questions so the first one                                 what is the model of that big screen you                                 are using                                 so yeah i started to answer on the pad                                 but um                                 this screen is actually um it's not like                                 a tv but it's a digital signage screen                                 it's not                                 the same quality of a tv set uh but                                 it's quite similar it says only um a                                 couple of input like hdmi and so on                                 uh this one is quite old it's a phillips                                 one i think                                 on the slide i put a reference and if                                 you go to it there is a                                 link to the reference of the model uh i                                 think yeah it's from                                 year                                                                   something i                                 i got from free because i i found                                 someone who wanted to get rid of it and                                 instead of putting into the trash i                                 rescued                                 it and uh first i plan to watch movies                                 on this but it's a bit noisy and there's                                 not                                 some weird pixel at the bottom of the                                 screen so                                 i was a bit annoyed and then i had this                                 idea of the pinball and it works back                                 perfectly fine and this one is super                                 bright if you look at the look because                                 it's using a plasma technology                                 that's something that being used before                                 the oleds and                                 leds so it's super bright it's super                                 heavy                                 the the the set is about                                                                                                          but it fits                                 on my tracer                                 yeah so i'm pretty sure you can do this                                 also                                 using a catalytic gray tray hold                                 tv use a big ones you know you just need                                 to put it on                                 on something to have it uh at the right                                 level so that's something important                                 because first                                 i it was just on the thruster and it was                                 only maybe                                                                                                       very convenient i have to                                 move my my arms down so it was not easy                                 so                                 then i found some way to elevate it                                 to                                                                       so yeah that's all i can share about my                                 tvs                                 um okay the next question                                 is there any news you would like to                                 share since your talk was recorded                                 yeah i know who asks a question yeah i                                 guess yesterday                                 uh when i was recorded this presentation                                 very late i                                 should have done this before but when i                                 check my mail to                                 send my video back to deviant.com team                                 i also get a notification and the new                                 herd table has been merged into debian                                 so                                 it's now in uh unstable and it has been                                 pretty quick because this table                                 this table has been fixed maybe one week                                 ago so it was submitted by uh he had                                 my uh uploader so i want to thank him                                 and it only took a week to                                 get it accepted while the first one                                 which was a                                 new table for some reason it took like                                 six months or maybe a bit more so                                 yeah ftp master sometimes can be can act                                 in a mysterious way                                 i think there is nothing more to                                 not no news to share as i said in the                                 video                                 i plan to probably join the debian                                 gaming team to                                 release a new version of a media pinball                                 that will be an anniversary release                                 because it was been                                 first released                                                      christmas                                 at last christmas i packaged the new                                 table for the community                                 so now i showed off a new                                 package updates                                 okay thanks a lot for talk philip                                 are you welcome i see one last question                                 about                                 if possible to have ramps actually the                                 tables i've shown i have ramps so                                 that's something that should be                                 investigated later because                                 i know that there is an editor made in                                 cute i didn't show this presentation                                 because uh                                 i i'm not sure it has any future because                                 i wanted to create                                 tables using a                                           and then try to convert this to a mega                                 pinball                                 but it's not something easy to be done                                 so i believe that most of the community                                 are using the pin                                 editor maybe this can be packaged in                                 debian also it's a qt                                                 it should be properly ported to new cute                                 framework                                 and with this yeah you can design                                 anything but it's not as easy as using                                 a                                                        great thanks a lot                                 thanks so i keep in touch with the                                 deviant                                 team and if there is any question here                                 you can reach me on irc my nickname is                                 azila                                 and uh goodbye and thanks a lot for                                 having me in this uh devconf this is the                                 first time for me and i really want to                                 thank you                                 bye-bye thank you flip bye
YouTube URL: https://www.youtube.com/watch?v=hv-AjindyEY


