Title: Open Source Game Achievements
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Dennis Payne

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/5-open-source-game-achievements/

Players now expect to record their game achievement to show their friends. Usually this is implemented differently for each game store. This requires developers to code the solution multiple times and create multiple builds. They won't support games acquired outside of the game store like those included in Debian. The game stores controls your data not you. Gamerzilla can help solve this problem.

Gamerzilla is an open source achievements for games. Development started after LibrePlanet 2020. It consists of multiple pieces. Games use the LibGamerzilla library to update the progress on achievements. Game launchers use the same library to keep track of achievements and to upload them. The Gamerzilla plugin for Hubzilla displays the achievements online but the protocol is simple enough it could be implemented in something else or a standalone service.

LibGamerzilla is already included in Fedora. Support is being added to several games.

Room: Main
Scheduled start: 2020-11-21 20:30:00
Captions: 
	                              so welcome back everybody                               this is our last talk of the day open                               soul game achievements with demi spain                               and it's a pleasure to introduce himself                               dennis is a free software game developer                               in his                               third time he has a start bt builder and                               troll bridge                               and maintain several other games                                he has a stumble across open game source                                is a series                                of articles about his game development                                efforts                                also he mostly uses fedora                                he has been using deviant to run                                hubzilla and his                                games here plugin please enjoy his talk                                okay so welcome to open source game                                achievements                                normally for this                                versions of this talk i've gone into how                                achievements have come about but i'm                                going to go on the assumption that                                as a game specific talk or conference                                most of you know what achievements are                                or trophies under uh                                the playstation they are available on                                all the major platforms uh                                playstation xbox steam gog                                and epic has them as well                                as a long time playstation user i                                tend to use trophy but i have been                                trying to switch to achievements because                                that's what                                computer users are more familiar with                                due to steam                                now the problem with achievements is                                that                                free and open source software have been                                left out                                we have no central server for the                                platform                                so where sony goes over and runs                                the achievements for the playstation                                uh there isn't something equivalent                                under linux                                and i don't think red hat wants to start                                running their own                                achievement servers and debian running                                their own so                                there is no central platform for setting                                up achievements                                uh additionally we have the problem of                                when you go over and create a                                open source game you just create it and                                release it out there                                there's no registering with any service                                and so you don't have the opportunity to                                set up all the achievements                                like you do under steam                                there is another wrinkle that                                free software and open source games have                                and that is that free software and open                                source                                users tend to be more privacy oriented                                so they don't necessarily want to have                                all of their information uploaded to                                some corporate site where they get to                                retain                                all of that um i i don't know that                                there's                                anything they can really do with that                                information                                but it is something that people probably                                don't like                                but we've already solved this problem                                for social networks uh we created the                                fetiverse                                a whole bunch of different social                                network                                software that can all uh talk to each                                other                                so if i'm running on a hubzilla server                                and someone else is running on mastodon                                it doesn't matter we can still exchange                                communications                                so what ended up happening is                                free game dev set up a hubzilla server                                and so i joined that for the first time                                i've had a social network account                                and i started looking over hubzilla and                                looking at the add-on system they had                                i figured you could create something                                like                                these achievement systems                                so you could go over and have                                the games upload their stats to hubzilla                                and display them on hubzilla                                and so that's what gamerzilla is that                                 i've been working on                                 uh these are some screenshots from it uh                                 the                                 the website of it so these are                                 a list of the games that i have                                 achievements for                                 and then a screenshot of one of the                                 achievements for one of the games i have                                 now why do you want something like this                                 gamer is expected at this point people                                 like these achievements not everyone but                                 it gives you something to do                                 in those situations where it's more of                                 an open world                                 and some people like the aspect of going                                 over and trying to get all the                                 achievements                                 the other thing about it is that it                                 gives you                                 visibility into what your friends are                                 playing think of it kind of like                                 a virtual bookshelf of your video games                                 so right now most video games are                                 delivered digitally                                 so it's not like you can go over to                                 someone's house and see                                 oh these are the games they've been                                 playing                                 so the achievements kind of serve                                 that role as a digital version so how                                 does it work                                 uh there are two big pieces                                 to uh gamerzilla there is                                 the gamerzilla add-on to hubzala                                 and there is lib gamerzilla                                 now you can write a game that uses                                 libgamerzilla and talk directly to                                 uh the hubzilla instance and update all                                 your stats and everything                                 but what that means is you would have to                                 enter in                                 your login information to every single                                 game                                 they would have to have a configuration                                 screen and you would have to be able to                                 enter in                                 how to get to your hubzilla instance                                 so what i've designed the system for                                 is to have a game launcher in the middle                                 i kind of like the way this what the                                 steam client does                                 so all the games would use libgamer                                 zilla to talk to the game launcher                                 and the game launcher would be the one                                 that actually goes over and                                 has all the information for login and                                 actually does the uh communication with                                 hubzilla                                 now everything is designed                                 to be cached in sync automatically                                 so if you go over and launch your game                                 without the launcher                                 and then later on you uh start up the                                 game launcher                                 it will automatically be able to sync                                 that information back to hubzilla                                 for the linux users                                 this is the communication between game                                 the games in the game launcher are done                                 using an anonymous                                 unix socket                                 now i've gone over and done converted                                 several different games to use uh                                 gamerzilla achievements                                 and in my time of doing these                                 conversions                                 i i've found what i believe to be the                                 best practice                                 and you could see that in super tux cart                                 and me in my shadow                                 both of those games had achievements                                 before i even touched them                                 they were just local achievements they                                 didn't upload to any service                                 and so what they end up doing is they                                 collect statistics                                 after all the statistics are collected                                 they see what achievements have been                                 earned and                                 awards them so this allows you to have                                 all of the achievement code in one                                 central place                                 instead of having it sprinkled                                 throughout your code                                 the small trek game i followed that                                 design as well when i added in                                 achievements to that                                 so for a game in c                                 you would do something similar to this                                 you would call gamerzilla start                                 the false tells you that you are                                 actually a game and not a game launcher                                 then you need to say where you want to                                 store                                 cash the information about what                                 achievements you've earned                                 you set up the achievements                                 for using the gamerzilla set game from                                 file                                 uh that is a just a simple json file                                 now in this case uh the second argument                                 there is just gamerzilla slash                                 that implies that this game is designed                                 to be run                                 from the directory that it's in                                 so not something i generally look for                                 for games i i like to have uh my games                                 designed with more of a unix                                 mentality where they could be installed                                 on                                 in uh user bin or                                 and have all the game files in user user                                 share                                 i also should mention that i i've put in                                 this example that it's going to                                 tilde dot local slash share slash test                                 that's actually not what you should be                                 doing because of the free desktop                                 standard has                                 has some variables you should be looking                                 for or some                                 environment variables you should be                                 looking for                                 but as a simple example i figured this                                 would work                                 uh at the end of the game you would call                                 gamers will acquit                                 and then you would have this game loop                                 uh                                 in the game loop you would have at some                                 point that you would collect                                 the game stats and call this                                 update trophies function and it would go                                 over and compare various stats                                 and update whatever trophies you would                                 have earned                                 now i i say game stats um                                 these are not necessarily global                                 all-time stats so in the case of super                                 tux                                 they have stats that are reset                                 every race i believe so you you can go                                 over and find                                 out information about just the last race                                 not just all the races                                 now if you want to add support to a game                                 launcher                                 gamerzilla start it's the same sort of                                 thing except the                                 first argument is true and then you need                                 to call                                 gamerzilla connect to connect your                                 hubzilla instance                                 you need to have a thread that's                                 periodically calling gamerzilla                                 server process                                 there's also a callback that you can get                                 the short name                                 and the full name of a game and so what                                 you can do with that                                 is uh you can go over and launch a game                                 and then the callback will be called and                                 you'll be able to see                                 oh this game is using gamerzilla                                 let me associate that in our launcher                                 without having to actually enter that                                 information directly into                                 the game launcher                                 and you can use the short name to get                                 information about what achievements have                                 been awarded                                 to to display that in the game launcher                                 all right for the current state uh one                                 of the things i                                 specifically tried to do was to get                                 a rather random collection of games                                 that use all sorts of different                                 technology to different compilers to                                 make sure that gamerzilla can support                                 any of them                                 so you've got super tux cart and me and                                 my shadow using c                                 plus shipping                                              small trek uses a language called nim                                 that                                 i hadn't even heard of until i i                                 was on uh the game dev irc forum at one                                 point                                 uh there's sea horse adventures                                 in python and pinball                                 disc rim in godot                                 now small trek in me and my shadow have                                 not been merged                                 the small trek i i have put in a pull                                 request but i haven't heard anything                                 from the developer so                                 it may not get merged me and my shadow                                 the same thing i i haven't heard                                 one way or the other all the other ones                                 have been merged in uh seahorse                                 adventures in                                 shippy                                                                they were unmaintained                                 for launchers the only launcher that i                                 have                                 support in so far is gamehub and that                                 one's technically not merged yet                                 that one's written in vala another                                 language i hadn't heard of until i                                 looked at adding support for uh into a                                 game launcher                                 so i i'm hoping to get that merged at                                 some point                                 the developer is willing to do that                                 but he's talking about uh reworking how                                 the achievement                                 code is done to be more generic and                                 i haven't gotten around to making it                                 more generic myself to try to                                 push it into a game hub faster uh                                 for super tux card i ended up having to                                 do the same thing they                                 they said you know it's great but                                 we would like to be able to support                                 other achievement systems in the future                                 now i will say that if you're a game                                 developer                                 uh the nice thing about                                 uh game one of the nice things about uh                                 gamerzilla                                 is that it is independent of the various                                 stores                                 so right now you would have to go over                                 and make a separate build for steam                                 a separate build for gog a separate                                 build for epic                                 if you wanted to be able to support all                                 of their achievement systems                                 so this one is designed to be                                 used on any of them so that if at some                                 point                                 ichio decides you know we'd like to have                                 achievements                                 they could go over and say you know what                                 lib gamer                                 gamerzilla already does what we needed                                 to do                                 we could just add in support for that at                                 least that's my hope                                 all right for what still needs to be                                 done                                 right now i mentioned that linux uses a                                 unix domain socket                                 wine does not it uses a regular network                                 socket                                 that's because the cross compiler under                                 fedora does not support                                 uh the unix domain sockets which i've                                 heard that windows now                                 does support                                 so that that's                                 one of those things if i'd like to have                                 the ability to turn on a wine mode                                 so that if you're running some game                                 launcher                                 and you know this game uses wine you can                                 go over and just turn on that mode                                 and it will automatically set up the                                 socket and listen                                 on there um                                 the godot gd native implementation that                                 i made                                 for the pinball disc room is                                 only available under linux at the moment                                 because i just                                 haven't gotten around to building it for                                 windows                                 for the godot before godot it uses                                 microsoft visual studio for compiling                                 the windows version                                 so i i haven't been able to compile                                 uh gamerzilla for that yet                                 i think it should compile very easily i                                 just                                 haven't had a chance to do that                                 i would love for there to be more game                                 launchers support                                 so in particular lutress                                 but i i'm not particular about what game                                 launchers are supported i i would                                 love any of them um                                 i intend to try to get more support into                                 game engines as well                                 so that bevy and love are                                 two of the ones that i've looked at but                                 haven't gotten around to do more                                 yet                                 obviously more game support would be                                 great                                 uh more distribution support uh right                                 now                                 it's available under fedora uh because i                                 maintain it there                                 the it also includes                                 cross compiler support under fedora                                 because i want to be able to make                                 windows builds and i don't want to                                 actually use a windows machine                                 obviously debian is one that i would                                 like to see                                 support added to                                 there are other things that would be                                 nice for features um                                 the the the playstation store has the                                 ability to compare                                 achievements with a friend so you can go                                 over and see which                                 achievements a friend has that you don't                                 the other thing that it currently does                                 not do right now is multi-language                                 support                                 the i haven't gotten around to                                 looking into hubzilla to see                                 if it's possible to add in some support                                 for this or not                                 um the                                 so that that's just kind of                                 sitting out there uh frankly i haven't                                 been                                 overly impressed with hubzilla after                                 doing the development with                                 it so i i'm not opposed to there being a                                 standalone                                 server as well but right now i've been                                 focused on                                 the hubzilla implementation                                 the social.freegamedev.net                                 is as far as i know the only uh                                 hubzilla instance that has support for                                 gamerzilla so far                                 obviously without game launcher support                                 it's not necessarily that useful to most                                 people                                 but i figured i'd put it out there                                 ideally i'd like to get more hubzilla                                 instances                                 supporting it but i i haven't looked                                 into that yet                                 and so that's uh pretty much it                                 here is my website for uh                                 gamerzilla                                 i am often on the i i frequent the free                                 game devs                                 forum                                 my email address and my social network                                 thanks a lot                                 dennis so                                 let's share the                                 the question we have um if you need a                                 different socket type of wine                                 why not just open it always and why                                 would not use                                 non-unique sockets for native games                                 is there a benefit to a unix domain                                 socket                                 uh the the reason i went with unix                                 domain sockets is because i feel that                                 that's the right solution                                 it doesn't have the ability to                                 uh accidentally leak out information                                 so we've had problems in the past where                                 people have been able to use compromise                                 the web browser to be able to use                                 make a local network socket connection                                 and so i think unix domain sockets are a                                 little more secure in that respect                                 okay and another question i have seen                                 federal linux has an award achievement                                 trophy system for                                 its contributors there are badges do you                                 think something like game                                 game ursila will also be used for                                 non-games                                 like this where people want to use                                 gamification like this                                 um i i don't know i i i know of the                                 fedora badges                                 and uh i i                                 the the way the fedora badges are set up                                 there isn't                                 any grouping so you just get badges                                 uh for working on fedora                                 whereas this you'd want to be able to                                 group them by games                                 so it's quite possible that you would                                 end up in this situation where you say                                 hey let's go over and use gamerzilla to                                 support that                                 uh but i haven't looked into that i i've                                 been focused on                                 supporting it for uh games now                                 i actually work for a learning company                                 and there is a open badge standard                                 for uh learning uh                                 systems as well and so i debated looking                                 into something like that but                                 for for now i've just focused on getting                                 a                                 minimal implementation up and running                                 for games                                 great thanks a lot for your talk denise                                 you
YouTube URL: https://www.youtube.com/watch?v=-hJTsb8onqE


