Title: GemRB: 20 years of the engine and a look forward
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Jaka Kranjc

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/7-gemrb-20-years-of-the-engine-and-a-look-forward/

A brief look at the RPG [engine's](https://gemrb.org "engine's") history & future, capabilities, potential for new games and the seemingly complicated relationship with game authors.

This light-hearted talk won't be very technical and targets both developers and gamers alike.

Room: Main
Scheduled start: 2020-11-22 12:00:00
Captions: 
	                              hello everyone and welcome to the                               second day of minidab.com online edition                               um today for the first talk first talk                               is entitled gem rb                                                                                                 forward and it will be by                               jaka who works as a full-time                               environmentalist but he also works                               in free software related projects such                                as gmrb                                and the ga                                            for two different game engines so uh                                let's have a warm-up come first for yaka                                hi i'm jaka and i'm a big open source                                open data open knowledge                                open science all that sort of stuff man                                and today i have my gaming hat on and                                i'll be speaking about jammer b                                which is an rpg engine and                                it doesn't have anything to do with ruby                                even though maybe the name                                kind of sounds like it nothing to do                                with rubies with gems                                but the name is deliberately                                odd in a sense for copyright reasons                                back in the day                                i had nothing to do with it but it                                stands for game engine made with                                pre-rendered background                                because it was an engine and still is an                                engine that is a                                re-implementation of ie which luckily                                doesn't mean internet explorer in our                                case but the infinity engine                                and this is the engine that powered some                                really epic and                                classic games such as baldur's gate                                ice windale planescape torment                                games that are really known for their                                powerful gameplay                                really intriguing storytelling some of                                the ugliest protagonists                                and some of the most memorable                                companions                                now of course these games are really                                known for their interactivity branching                                storylines and                                player choice which is not something                                that                                could be said about all modern rpgs                                but it is what it is and it's part of                                the reason why we love these games                                in general they're all isometric                                they all follow complex rule sets in                                this case mostly                                advanced dungeons and dragons which is                                dnd version                                            or                                              really complex system unique items not                                auto generated content                                and a lot of depth in a sense and all                                these games                                were really popular and still are and                                surely                                that created a lot of interest from the                                players to create additional content                                additional tweaks additional fixes and                                various gaming communities                                sprung up be general or dedicated                                just to this engine just to these games                                and on the gibberlings                                  is the one where we also find our home                                anyway the mother started exploring the                                games and this                                quick realize that some of the game                                formats are actually plain text                                like the                                                           or at least partially self-documenting                                so it was easy to make some of the                                quick tweaks but other parts of the                                engine                                other parts of the data is in binary                                formats                                so they weren't understood of course                                because they're all proprietary custom                                for the engine                                so as people were exploring them they                                started to collate all this information                                in this great                                tool this great website that we have                                called isdp                                which has the information about the file                                formats about the scripting system about                                the action system                                about the op codes for the effects all                                little details                                and it's still being built up as our                                understanding of the engines grows                                and a better understanding of course                                 enables                                 better modding and from that all these                                 tools                                 have been developed to modify and create                                 new binary files                                 but really i mean of course all these                                 tools are still                                 interesting also for us as a project                                 because they would be the main content                                 toolkit for gmrb as well                                 but the really cool thing about this                                 modding community is that they created                                 wado which is an objective camel based                                 language to write mods in and this                                 allows                                 basically two mods to modify binary                                 formats and files in a safe way but also                                 it allows intercompatibility between                                 mods so you can have                                 several mods modifying the same file and                                 unless they have                                 unless they try to modify the exact same                                 thing there won't be any conflicts and                                 radio allows                                 uninstalling reinstalling backups                                 configuration                                 of mods so you don't need to have                                    versions just to tweak                                 a little thing so very powerful tool                                 a bit opaque i guess and hard to                                 understand but                                 uh very powerful and i haven't seen                                 anything like it for any other                                 gaming system now jammer b                                 has been here for                                                    university                                 anniversary in august but it hasn't been                                 there after all the games came out it                                 actually came out                                 well let's say the official start as we                                 know it                                 came after the release of ice wind l                                  and baldur's gate                                                   there at that point                                 and what this means is that all these                                 engines                                 are not in well they are unique in a                                 sense that several studios worked on                                 them                                 in different branches not merging back                                 meaning that several things got                                 re-implemented several times in                                 different ways                                 sometimes poorly and there was not that                                 much code share                                 but it is what it is so                                 very studious various code bases but                                 jammer b                                 of course tries not to be a vanilla                                 engine implementation so not just                                 copying all the silly design decisions                                 mistakes and poor choices but we                                 want to do better we are one engine many                                 as one                                 unifying everything together and adding                                 little                                 small improvements here and there to                                 just enhance the                                 let's say vanilla experience so we're                                 this stretchatella                                 sort of project now                                 of course the type of work work has                                 changed                                 throughout time we initially had to                                 focus a lot on                                 reverse engineering uh disassembling and                                 really understanding how things work but                                 through time of course more and more                                 work                                 is going into improvements enhancements                                 themselves                                 and it's looking better and better and                                 better and this will also make it more                                 palatable for people that want to                                 implement the new games                                 using our engine when it comes to                                 features of course                                 since we already from the start want it                                 to be a portable                                 implementation we really do work on                                 really some bizarre hardware and some                                 bizarre operating systems                                 and we still try to maintain that                                 compatibility even though as the                                 software and the dependency that you use                                 is mature                                 we of course libre licensed we added a                                 bunch of innovations and enhancement on                                 top of the original                                 capabilities we had mobile ports like                                    years ago                                 the input changes stuff like that but                                 also we really try to                                 work on the engine in an extensible way                                 to make it easier for modders to enhance                                 these games to enhance or write further                                 games                                 to have as little hardcoded logic as                                 possible                                 and it shows but                                 also because i say it shows because                                 there are some really cool mod ideas                                 that are only possible in our engine and                                 some of them really sell it over the the                                 originals                                 anyway we haven't focused on multiplayer                                 support at all because that's just a big                                 can of worms and                                 maybe it will happen once we have really                                 excellent support for everything else                                 but it has never been a focus                                 general breed is written in c plus plus                                 that's the core of the engine                                 and most of the plugins but then you                                 also have a plug-in for                                 the python bindings and python bindings                                 is well i guess the original language                                 used a bit of lua                                 not sure why but we use python to                                 really create the graphical user                                 interface                                 so the original provide provides data                                 files that define the framework for how                                 windows should look and where the button                                 should be                                 but none of the logic so we implement                                 all of the setup all of the logic                                 in python because it's much faster to                                 iterate with                                 much more forgiving when it comes to                                 mistake and mistakes and differences                                 between engines                                 and it's much easier for people to                                 contribute as well and then we have game                                 script which is the                                 language for the scripts and dialogue                                 scripts in the original                                 engine so we have to implement that too                                 basically so all the ai                                 and cutscenes work now i mentioned                                 plugins                                 we have plugins for you know one per                                 file type basically so for                                 png support for bim support for creature                                 loaders and stuff like that                                 and it helps keep the code a bit split                                 up but of course                                 there are more improvements that could                                 be done here because some of the                                 core file score objects are still pretty                                 tightly                                 knit together and                                 as far as data and this extensibility                                 that i mentioned                                 the original came with a data folder and                                 an override folder and in the override                                 folder any files that are there will                                 basically override files from anywhere                                 else                                 so we want to support modding so we have                                 to enable modders to modify the files                                 that                                 we provide so we provide an unheard                                 folder for data                                 that is searched f well this is                                 it's basically meant for new files that                                 are there new tables stuff like that                                 but if modders want to override it they                                 can put it into the game override                                 it has precedence over it but then we                                 have also our own overrides folder                                 which is where we put files we rarely do                                 it but sometimes it's required                                 either for let's say very ugly fixes                                 for data bugs or for unification                                 purposes so                                 the few files that we have in arona                                 override are there to                                 override whatever the user the game                                 provides and can be overridden by mods                                 or at least not easily                                 and of course if it's done in an                                 incompatible way it will break other                                 things                                 and as far as the project infrastructure                                 we've done                                 the bronze badge most of the                                 silver batch of the core                                 infrastructure initiative best practice                                 thing we have a bunch of billboard                                 static analyzers                                 all that good stuff that helps us                                 create better software now you know                                 we've been                                 with the drawing backhand for like                                    years now so                                 screenshots have always been pretty much                                 the same not much to show                                 not much potential for visual changelogs                                 but                                 when it comes to games the tweet target                                 and support                                 all are playable but i swindle is not                                 fully playable yet you can't finish the                                 game with the play the                                 parts that you can play are pretty                                 polished but there are still some                                 scriptings things scripting things that                                 we don't understand fully                                 and are blocking a full run through                                 and planescape tournament is also not                                 polished as much because it has a bunch                                 of iron                                 ugly ugly hardcoded features and                                 projectiles that we still don't                                 understand fully so we haven't                                 managed to re-implement them fully                                 we also shipped a demo like a                                 small alpha of attack demo which could                                 be the basis of a new game                                 but a new game doesn't exist in our                                 engine but anywhere also don't support                                 the enhanced editions and the enhanced                                 editions are a thing that came out from                                                                      onwards beamdock got their hands on the                                 original source code for baldur's gate                                   and then they started updating games by                                 porting them to this engine                                 and this is an ongoing process we lose                                 one of our own developers to it but                                 uh no hard feelings and it really                                 also helped us in a sense because it                                 really revived the community brought new                                 contributors brought new interests                                 brought                                 really it was like a revival a                                 renaissance of                                 of the whole community in a wider sense                                 and of course that benefits also us and                                 we're not really competition in an                                 interview                                 the cto said very nice things about                                 jammerby                                 and we also don't support ees not                                 in from some diplomatic sense but there                                 just hasn't been much                                 interest in supporting the features that                                 were added later many we support already                                 because                                 they were added just because they had to                                 merge different engine features which we                                 did from the start we and some things                                 were actually inspired by our own work                                 but you know we have work to do for                                 making sure the originals work fine and                                 once some time passes i'm sure                                 beam dock will stop working and this                                 will stop updating games and maybe in                                    years times                                 there'll be again a need for jammer b                                 also for the ees and the                                 more interest to contribute ee only                                 features                                 so we can support the gameplay for                                 generations to come                                 so it's it's kind of a weird                                 relationship but it works                                 what are near future holds on the                                 roadmap we have to finish this                                 obvious branch which is a larger                                 factoring of our windowing system                                 really cleans up things and some                                 graphics stuff and some                                 tech subsystem it really turned into a                                 huge branch a huge refactoring that's                                 been taking over two years now                                 so we also miss the train to port to                                 python                                           so currently we're not even including in                                 debian anymore                                 because they purged all the python                                   packages so yeah this is the                                 really the near future roadmap in the                                 exact same order                                 and the current work relates to                                 improving the demo finally someone                                 started to add new content to it to                                 improve the placeholders that i put                                 there                                 and this would be you know the basis for                                 a new game if it                                 ever comes to that various scripting bug                                 fixes                                 various other drawing bug fixes so                                 finally some visual change logan show                                 really                                 small details in the bottom corner you                                 can see to properly draw                                 it's basically about order and overlaps                                 we've been integrating                                 some of the fixes of recent port updates                                 and basic cleanups that are there from                                 static analysis                                 so for a new game what would be needed                                 well                                 it really needs proper documentation of                                 all the workflows some automation                                 because you know existing tools and                                 modding instructions are there                                 but they're not there for all file                                 formats some things are                                 sort of off limits to modders if they                                 just work on the original or enhanced                                 games                                 and uh of course you're also limited in                                 a sense                                 uh with if you don't want to code to the                                 same rule sets that are implemented in                                 the engine                                 there were some interest from indie                                 studios so far                                 enough i don't know maybe two or three                                 across the years                                 but nobody actually chose to mrv so far                                 so                                 we are still only in this infinity                                 engine world                                 some are blocked by license                                 consideration but in general i think                                 we only need to keep improving                                 get some proper content creators on                                 board and                                 start the meta process of enabling                                 proper game                                 creation thank you for attention we'll                                 have a brief q a now                                 and i'm done one go                                 hello                                 hello                                 oh sorry my microphone was uh was muted                                 um sorry everyone                                 so um the first questions somebody asks                                 is uh how will you know when a project                                 is done when implementing a feature to                                 match the ie how do you determine if                                 you should copy the original                                 implementation or improve it and                                 how do you get improvements using the                                 same approach giving different                                 contributors                                 well it's a very good question first of                                 course                                 for the original games we in a sense                                 know what the                                 end target is we want them to be fully                                 playable                                 to be supported even in some of their                                 micro features                                 um so that's easy of course                                 you know there are different levels of                                 let's say perfectionism that you can                                 strive for and we've always had                                 different people contribute to different                                 levels and                                 you know some are better at the                                 beginning where                                 you know you just need the basics the                                 frameworks and some are really                                 pointillistic and want to really                                 polish things into pure diamonds                                 so i'm sure it will take quite some                                 quite a while still                                 we also want to really improve this tech                                 demo that we ship                                 which is an ongoing process and it's                                 more of a                                 data and exploration documentation                                 process                                 so it's in some some ways much easier                                 than                                 you know reverse engineering some weird                                 projector from planescape torment or                                 something like that                                 so we don't have uh we don't have a set                                 timeline to say okay by                                                 you know                                                                 need and                                 will be done and it will be just                                 maintenance mode from them                                 makes sense um so another question is uh                                 do you work with upstream developers                                 like beamdog                                 uh icewindail                                                         that the original source seems to be                                 lost                                 uh well we haven't worked directly with                                 them they were helpful by sharing                                 some file headers some pointers when                                 there were questions asked about                                 search on certain functionality but uh                                 besides avenger going to work for them                                 uh we haven't worked directly                                 really yeah sure ice windows                                          code is supposedly lost                                 but you know that's true but they                                 haven't                                 been interested in using jammer b for                                 their                                 enhanced edition or something like that                                 and in the meanwhile they missed the                                 train in a sense because                                 the modding community itself wrote a few                                 extra hacks to extend the original                                 capabilities and                                 uh bring this sort of an enhanced                                 edition version                                 themselves good um                                 maybe uh one last question if we have                                 time how much python two code                                 do you still have to port to python oh                                 that's                                 that's a good question but i think we                                 actually don't have that much code                                 because                                 most of the python that we use is                                 quite simple code i would say so i                                 believe                                 pi                                                             volume of python then we have                                 a little use of meta classes to make                                 things more concise                                 so maybe a bit of that will need to be                                 updated and the plugin itself that                                 provides the binding                                 has i know i mean if you look at the                                 plugin it looks like oh there's                                 thousands and thousands of lines of                                 codes but that's                                 actually individual functions that we                                 need so the                                 layer that makes it work is pretty thin                                 so i don't think                                 we'll have that much work i think if                                 anything the                                 biggest change will be with handling                                 strings because of the                                 the big change from python to python                                     once we got the                                 subviews branch merged i think we can                                 and i hope not just think i think we can                                 have a quick release afterwards with                                 python                                  just to be able to get back into the                                 debian and                                 children well that's that's thanks                                 thanks a lot for the talk that's                                 all the time we have sadly but the                                 thanks a lot and thanks                                 uh for your work on gmrb                                                 great achievement                                 thanks thank you                                 you
YouTube URL: https://www.youtube.com/watch?v=Ybif2SgGMdA


