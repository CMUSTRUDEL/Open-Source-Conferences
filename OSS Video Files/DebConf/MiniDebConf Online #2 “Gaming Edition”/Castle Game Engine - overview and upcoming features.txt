Title: Castle Game Engine - overview and upcoming features
Publication date: 2020-11-24
Playlist: MiniDebConf Online #2 “Gaming Edition”
Description: 
	by Michalis Kamburelis

At: MiniDebConf Online #2 "Gaming Edition"
https://mdco2.mini.debconf.org/talks/21-castle-game-engine-overview-and-upcoming-features/

[Castle Game Engine](https://castle-engine.io/) is a cross-platform open-source game engine using modern Object Pascal. It runs perfectly on Linux (and was mostly made on Linux), as well as other platforms (Windows, macOS, Android, iOS, Nintendo Switch). We use FPC and Lazarus (Pascal compiler and IDE, packaged in Debian as well). We proud ourselves on having support for many formats (including open standards glTF and X3D), visual editor and lots of graphic features.

During the talk I want to give a short overview how creating a simple game using Castle Game Engine looks like. We'll start from scratch, use the engine to create a new project, use Blender to design some amazing 3D programmer-art :), and put it into a small demo game. I will showcase and talk about Castle Game Engine new (soon-to-be-released) version 7.0.

Room: Main
Scheduled start: 2020-11-22 13:30:00
Captions: 
	                              okay                               hi hello everyone i'm mihais kamborelis                               and welcome to the presentation about                               castle game engine                               so we will jump very soon into actual                               leave demos of the engine                               but before this like a quick words of                               introduction some of the engine is fully                               open source as you would expect                                uh we support                                                         really support both those kinds of games                                and i will actually show you the demos                                of both those kinds of games along with                                the presentation                                we support many asset formats this has                                been like one of my goals when                                developing the engine to support                                many asset formats to like make it                                available whatever tool you use to                                create your assets you will be able to                                create assets using                                for our engine so in particular we have                                excellent gltf support                                and we use xvd nodes to express pretty                                much everything that you see on the                                screen                                we also support spine json um like                                colada wavefront object                                and actually many other formats so we                                really try to be                                versatile when it comes to that we                                support many platforms in particular                                desktops which means windows linux macos                                freebsd and                                actually a few more that are supported                                also by our compiler                                mobile which means android ios and                                during this presentation i want to                                actually show you                                how the game running on android how it                                looks like to compile the game to build                                the game on android using our engine                                and i will actually show it running on                                the android to you                                and we also support nintendo switch                                console nintendo switch                                uh yeah we as an as a language that is                                being used to develop the engine                                and also your games we use modern object                                pascal                                now is this kind of like rises some                                eyebrows well i will                                address it later into the presentation                                for now basically like                                it's kind of a cool modern                                object-oriented language with generics                                classes interfaces everything you would                                like to have to develop a                                large application so it's uh now we say                                more about it in during the presentation                                we will actually go also in modify some                                code                                okay so what about version uh                                in debian right now contains the version                                                                                                                                     release                                but since                                                         working on a new version of the engine                                right now it's called                                                become once released version                                                                                                     major release and we have added many new                                features to the engine since then                                whenever in particular we will have the                                editor which i will show during this                                presentation extensively                                we also support added excellent support                                for the gldf format which includes also                                support for the physical based rendering                                physical based rendering is also                                available in xvd version                                            engine                                we also added the support for nintendo                                switch we also wanted gamma correction                                and about a hundred i guess refactors                                and happy improvements                                and yeah so many many new features many                                new graphic features                                are going to appear in the new version                                of the engine so i'm going to be shop                                so i'm going to show you a new version                                of the engine not yet packaging debian                                we are working on making it released                                well i guess as soon as possible                                and when it will be released i'm pretty                                sure that it will also be packaged in                                debian                                so okay so going forward                                 as i thought the engine is using pascal                                 as a programming language and for this                                 reason we use a free pascal compiler                                 and open source pathway compiler um                                 it's packaged in debian and you can use                                 the fpc version that is packaged in                                 debian you can also download the free                                 pascal                                 upstream latest version yourself                                 various fpc versions work with our                                 engine                                 we also advise using lazarus which is                                 kind of an ide integrated development                                 environment                                 for pascal in particular integrated with                                 the free pascal compiler                                 you can use it it's an ide it's an                                 editor it's a debugger                                 but basically you don't have to i mean                                 you can actually just write pascal code                                 in any text editor you like i use emacs                                 most of the time                                 so most of the engine was developed                                 using emacs                                 just like that um okay so those are the                                 dependencies                                 okay and that is actually everything                                 that i wanted to say uh as far as the                                 introduction                                 is concerned to the engine and let's now                                 jump to the actual leaf demo of how to                                 use the engine and how to make cool                                 stuff                                 using the engine so once you download                                 the engine                                 you go to our web page you choose linux                                 of course                                 and this results in a zip file that                                 simply contains the engine                                 source code and also the pre-compiled                                 version of the engine editor and of the                                 engine build tool                                 and some other tools that are less                                 important                                 and so right now i have already the                                 engine installed on my system so i will                                 just                                 run it and you will be able to see the                                 editor okay                                 so once you have the editor running                                 well the things think the first thing                                 you actually want to do is actually you                                 want to look in the preferences                                 and you want to see what version of the                                 free pascal compiler is detected                                 it should automatically detect whatever                                 you have installed system-wide                                 but as i said well you can also choose                                 your own version of the free pascal                                 compiler if you'd like to                                 and yeah so this is something that you                                 have to make sure that is correctly set                                 if you want to build games using the                                 engine                                 but once you have it well you start                                 developing so we go                                 and create a new project and let me                                 start by creating a new project that is                                 a very very simple                                 three-dimensional first person shooter                                 game                                 so i will put some name for my project i                                 will create project                                 and yeah and this is the editor so this                                 is how it starts                                 at the bottom you can see the list of                                 your files                                 the list of your assets if you'd like to                                 call it in that way                                 data in particular contains all the data                                 all the data files that you will be able                                 to load at runtime                                 and to use to show the user and what in                                 particular data contains something like                                 castile user interface designs                                 and you can open any of them in this                                 particular template it creates for you                                 two to two user interface designs                                 already and the main menu                                 and the play which is like the actual                                 game state so i will just open the                                 actual game state and it looks like this                                 so on the left you have a hierarchy of                                 your objects which includes the user                                 interface items                                 also which includes the user interface                                 items                                 and you can choose any one of them you                                 can choose a few of them at once if                                 you'd like to                                 and on the right side you have all the                                 properties of the currently                                 selected object and in particular we                                 have some basic                                 properties layout everything else events                                 and also all which is like basically at                                 a top if you know everything about the                                 engine then you can                                 use the old top and that contains                                 everything uh you'd like to configure                                 about this particular object and okay so                                 as you can see                                 on the scene i have a few things the                                 most important thing actually is the                                 full screen viewport which well as i                                 said                                 it feels the full screen i mean the full                                 game window and                                 just to show you that it's possible uh                                 of course it doesn't have to be the full                                 screen lock you can                                 immediately make it and you can drag it                                 around so this is just a viewport it's a                                 two-dimensional control that you can                                 move and drag around                                 just by default with something full                                 screen okay                                 inside the viewport you have when you                                 have two things that are that are                                 important one is the navigation method                                 currently used inside the viewport you                                 can                                 switch between various navigation                                 methods using the menu like the                                 hamburger menu near the viewpoint                                 need the viewport sorry so you can                                 choose the examine flywork                                 and some other navigational methods you                                 don't have to use any of them actually                                 in                                 in a in a particular game you can                                 develop your own navigation method                                 uh there's not much to it you just                                 handle the keys you just handle the                                 mouse touch input whatever                                 joystick whatever you like and you move                                 the camera around                                 in any way you desire so those are just                                 the                                 like navigation methods that are like                                 pre-configured for you ready for you but                                 you don't have to use them you can                                 roll your own or you can customize the                                 existing ones okay                                 and of course since this is a component                                 i have selected it so i can also                                 configure                                 some properties of it already on the                                 right side for example there's the move                                 speed like i can make it                                 ten times faster initially it's actually                                                                                         and then it's                                                        average actually in this case                                 okay so this is one thing like your                                 navigation method inside the viewport                                 and well the rest is items which is like                                 a three-dimensional                                 in this case three-dimensional models                                 that you put in your game                                 and you can of course modify them and                                 play around with them                                 but the most important property of a                                 three-dimensional model                                 is the url which basically says well                                 what model to load                                 in this case it's coming from a gltf                                 model of                                 level dungeon this is the scene level                                 and for soldiers                                 for enemies kind of inside the game well                                 there's another gltf model                                 that is being used to display them okay                                 and i'll show you how to add them very                                 soon just feels like a quick overview of                                 what's happening here                                 okay so you have three dimensional                                 attempts here                                 in a two-dimensional game you would also                                 have two-dimensional items here and                                 actually you can mix and                                        two-dimensional games here because                                 at the low level there's no difference                                 there's just a different camera used for                                 two-dimensional games                                 conventionally but that's it i mean you                                 can mix and match                                                                                                          is the viewport                                 well aside from the viewport there are                                 also well other user interface elements                                 and those are just simple                                 labels that you can customize well this                                 is a label it's a text you can customize                                 it in any way you'd like for example                                 i can write here something                                 random as you saw i can customize the                                 color just to show you that it works                                 uh i can maybe change the                                 font size okay so nothing fancy here but                                 basically we have a                                 full library of user interface controls                                 available inside the engine we have                                 buttons images                                 uh groups for laying out controls we                                 have a scroll view so for                                 putting out something that has a scroll                                 bar on the side                                 so we have quite a full set of user                                 interface controls that you can use                                 so as i said well at the beginning those                                 user controls they are not                                 terribly terribly interesting right so                                 i'm just going to hide this label right                                 now                                 i will keep this label existing this                                 frames per second label it will be                                 actually filled at run time with code                                 with the well                                 actual value of frames per second which                                 means how fast your game is so this one                                 will be actually                                 useful for us when we run the demo uh                                 yeah so the viewport is also another                                 user interface controls and as i kind of                                 emphasized where you can                                 move and customize around things there                                 yeah so let me actually do                                 so you have you can select things you                                 can                                 move things rotate things scale things                                 inside of the viewport                                 so let me just select a soldier and                                 basically                                 move it around a little bit let me also                                 take this one                                 let me move him like this and let me                                 actually you know move the camera                                 once you use this button use components                                 as a normal user                                 well it means what it says it means that                                 now i can use the game and i can walk                                 around the game                                 uh using the navigation that i have                                 chosen which is right now the                                 walk navigation with                                                 than default                                 speed so i can move around my scene and                                 i can                                 look around uh well and inspect                                 everything                                 whether it's for debug purposes or                                 whether i just want to see                                 how the user look sees it well it's all                                 the same right                                 um okay so what can you do more well we                                 can delete stuff that's obvious and you                                 can also add stuff so let me actually                                 add something here first i will just add                                 an empty scene let me                                 make it inside the items you can                                 actually of course                                 construct here a transform hierarchy                                 when one item is a                                 parent or another of another of another                                 and well it's a transformation hierarchy                                 so so transforming a group                                 transforms everything inside so right                                 now i just added a simple scene and                                 place it at the top level                                 to basically not mess around more than i                                 need to                                 and let me just choose one uh                                          i'm going to choose the soldier again                                 but in like                                 five minutes i'm going to show you                                 actually how to create your own                                 models in blender just to show you that                                 it works like                                 from scratch you can create things as                                 you'd like here so                                 here i just added another soldier                                 he'll end it there usually initially at                                 the                                              so yeah so that's how you add things to                                 the engine                                 now if you want to by default the                                 soldier as you can see                                 is in like a t-pose because well his                                 animation was not initialized yet                                 you can initialize the animation from                                 code this code is actually this sample                                 is actually doing that                                 well but i have not yet run the code                                 right now i'm only in the editor mode                                 but also if you'd like to you can                                 actually experiment with animations                                 already in the editor                                 by switching the outer animation                                 property and                                 so i can choose the stand animation                                 which is kind of a boring it's actually                                 a steel frame                                 and i can choose the walk animation okay                                 and still i can experiment                                 move things around and see well how they                                 look like okay so sometimes it's useful                                 just for experimenting                                 and sometimes actually it's useful to                                 just you just want to set the animation                                 at the design time because this is the                                 animation that is going to be played                                 when user opens this model okay now                                 one final note before we go further is                                 that what everything you see here                                 well those are not just some uh stuff                                 inside the engines uh                                 stuffed inside the engine this is                                 actually all those things that you see                                 here like the castle scene the castle                                 root transform the castle viewport                                 all those things are actual classes in                                 pascal that you can create using code                                 so and this is a very important property                                 of our engine well everything you see                                 everything you design in the engine                                 it has one-to-one uh correspondence to                                 what you                                 actually do when using the code at                                 runtime all those things are just pascal                                 classes                                 and all the properties that you adjust                                 here like the url like the exists like                                 it's                                 means literally whether something is                                 existing or not whether it's visible and                                 colliding or not                                 so all of those things are possible you                                 can access them from the free                                 from the pascal code you can access them                                 by name here it comes the scene one                                 maybe let me make something like scene                                 uh better name because i run out of                                 ideas so basically now you i would be                                 able to access the scene using the scene                                 better name in pascal code                                 yes i'll show example of it later but                                 the point here is that you can access                                 the scene from the pascal code                                 change its properties and also of course                                 you can add                                 and create and new scenes inside your                                 pascal code so you are not                                 like limited to using the editor                                 actually you can                                 make a fully functional games we have                                 done it in the past                                 using without the editor at all because                                 everything that i talk about                                 it's it's possible to also achieve using                                 the                                 pure pascal code without any visual                                 editing                                 which means that you have well the power                                 of both both worlds you can design                                 things visually you can then tweak them                                 from code                                 and you can add stuff from code and it's                                 all like                                 mix it in any way you'd like in any way                                 that matches for your particular game                                 and yeah and those things as i started                                 saying those things on the right where                                 they are properties                                 properties is a pascal concept it's also                                 present in c sharp                                 uh property is basically it looks like a                                 field but actually it's something                                 that can be backed by a getter and                                 setter function                                 okay so it's a concept that also is                                 present in c sharp and it's a                                 well a language level yeah on a                                 conceptual level it's something present                                 in every possible language i guess                                 um okay so this was a quick demo of                                 adding some scene that was already                                 existing in the project                                 uh before we move on let's actually                                 compile this project just to make sure                                 that it works                                 and then i will add some more tweaks to                                 this demo                                 right so what i'm going to do now is i'm                                 going to save this design                                 okay this simply saves the file state                                 underscore play dot custom user                                 interface                                 and this file will be read at runtime by                                 the                                 way the application okay so how am i                                 compiling the application well i'm just                                 going to do                                 run compile and run and that's it                                 uh i mean that's how the building using                                 the engine looks like                                 and underneath it's actually calling the                                 build tool our                                 custom game engine build tool which is a                                 simple command line application that can                                 be used to                                 build your application uh underneath the                                 build tool well it calls                                 a free pascal compiler of course so                                 actually all the heavy work is done by                                 the free pascal compiler well none of                                 what i'm                                 none of what i'm describing would be                                 possible without the free pascal                                 compiler so so so the builder is just a                                 wrapper                                 here around the free pascal compiler                                 calling it                                 waiting for the compilation to happen                                 and once it does it will                                 run the application um just as you would                                 expect okay                                 and this is just a way to compile the                                 application without even leaving the                                 editor                                 the casting imaging editor so i didn't                                 yet run even a text editor or debugger                                 but i will do it soon so just now write                                 it down                                 right now only simple a demo that you                                 can actually just visualize and                                 something                                 and and yeah you don't actually need to                                 to go and edit code before                                 the basic template works okay so this is                                 the beginning of the game                                 this actually shows you the state mail                                 menu that you have                                 not touched here so it just has a very                                 simple code that says that when you                                 press the play button                                 well it should go to the state plane and                                 the state play                                 is whatever you have designed so it                                 looks like this                                 and here you can see uh the soldiers                                 with those                                 crazy tweaks that we have made                                 to them in code the soldiers have in the                                 template already ability                                 logic to move around in this well                                 not very intelligent way but it's just a                                 simple                                 something starting point for your own                                 artificial intelligence                                 and in particular this one guy this one                                 guy that is in the back                                 well this is the guy that we have added                                 using the editor i didn't yet plug here                                 the artificial intel                                 plug him the artificial intelligence                                 code and that's why he's standing                                 uh in place and also not even being                                 affected by gravity of course in the                                 engine you have                                 integration with the physics engine                                 craft you have also our own                                 simple physics which allows you to turn                                 on gravity                                 very easily okay so this is like very                                 simple demo working                                 oh and the frames per second as i kind                                 of advertised are also being updated                                 uh they are slow because i think the                                 camera is just recording it's at                                    frames per second                                 no worries in an actual environment                                 okay so this was just a quick demo of uh                                 running application on your linux okay                                 so what can i do more                                 well let's try and actually do something                                 in blender and put it inside the game                                 all right just                                 just to show that it's possible so let                                 me                                 just run                                 blender                                 okay so what's inside blender well let's                                 try to create a very simple level                                 okay so i'm going to delete the default                                 cube and also the default camera we are                                 we not don't need it although we could                                 use this camera as the initial                                 starting point in the game but in this                                 case we don't really need it                                 so i'm going to create a grid let's make                                 it a bit more subdivide that                                 let me also scale it up                                 let's go into the selecting vertexes                                 mode                                 deselect everything let's select some                                 walls around                                 they are not yet walls but we are going                                 to make them into walls                                 let's also select something in between                                 just because                                 we can i guess let's extrude them up                                 um this is i guess                                 good enough for the initial level let's                                 delete here something to create like i                                 guess the                                 simplest possible way to create those                                 okay                                 let's now create some columns i guess                                 because                                 why not again simply extruding them map                                 that's enough okay let's also well we                                 have one lighting stars here                                 already this blender light source will                                 uh                                 we're going to be is going to be                                 exported to the gltf and it's going to                                 be used by the castle game engine                                 so let's take one let's                                 duplicate it a few times i guess                                 all right and maybe here and maybe here                                 okay four light sources that should be                                 enough                                 okay now the point that i'm trying to                                 make here with the                                 squeak blender demo is well not my mud                                 blender skills                                 but simply be simply that it is really                                 easy                                 to make a model in blender and it's                                 really easy to export it in a way that                                 caster game engine can consume                                 because okay what i'm going to do now is                                 i'm going to simply export it to gltf                                 and load it into the engine and                                 really that's all there is to it so let                                 me save it somewhere                                 let's call it level                                   all right                                 let's export it to gltf now the default                                 gtf export settings are                                 actually ok they work but usually it's                                 more comfortable to select gltf separate                                 options                                 it's better to kind of diagnose stuff                                 it's also usually nice to select apply                                 modifiers if you have used any modifiers                                 i didn't                                 but just in case well i guess it's the                                 force of habit right now i kind of                                 remember to always select                                 apply modifiers and actually that's it                                 oh almost because now if i want to also                                 export my                                 light sources to the gltf well i have to                                 select the checkbox                                 okay so that's it we have created a                                 level in blender                                 i can actually close the blender now and                                 let's go back to the editor                                 so if i refresh this directory okay i                                 have new subdirectory new level that i                                 have just created                                 the editor simply shows the normal file                                 hierarchy inside the project and here i                                 have my blender model                                 which is not going to be read by the                                 engine directly instead the engine is                                 going to read the gltf file                                 now if you want to preview the glt or                                 any other                                 asset before putting it in the scene                                 well one way is to well as you can see i                                 just click on it and in the bottom right                                 corner i can see                                 kind of a preview inside our engine and                                 it's a bit interactive actually i can                                 move things around here another thing is                                 to double click on it                                 and if i double click on it then i run                                 our                                 view                                                                    the                                        some                                                                     case there's                                 still not i can really do the simple                                 model but in general it allows you to                                 have well it allows you to play around                                 with this model to have a lot of                                 like options to go to to test how it                                 looks like in various conditions                                 you can play animations here you can                                 even play around with light sources here                                 you can move them here so so it's a full                                 featured model viewer and                                 a very very small editor for models                                 actually                                 too so right now i just checked it is                                 okay it looks correct right                                 so let me put it in game so let's add                                 another scene                                 uh let's also delete this uh steam level                                 the default one                                 because well i guess otherwise they                                 would try to compete                                 both of them trying to display the level                                 uh now let's try to load the new level                                 i'm just pointing the engine to the gltf                                 file in the using the url field                                 and that was my tail sorry                                 so i'm just pointing the engine to my                                 level                                   and really that's it i have loaded the                                 level and                                 it's automatically it works uh                                 without collisions yet i mean everything                                 by default collides as a simple bounding                                 box                                 so for a level that's not really what                                 you want you want the level to collide                                 well precisely using triangles                                 so what you can select here is select                                 dynamic collisions and                                 rendering those two options make the                                 well in the simple case                                 the rendering isn't really much needed                                 but in general rendering means that the                                 wrap                                 is rendered using the efficient version                                 of the frustum cooling                                 and dynamic collisions well it means                                 that the level collides as a set of                                 triangles                                 as opposed to crude bounding blocks so                                 that's it                                 the level should already well basically                                 be functional we can                                 i will run the game in like one second                                 just one more notice that if you want                                 the level lighting to affect also the                                 soldiers then you have to do one other                                 thing which means that you need to set                                 the                                 scene one in this case which is our new                                 level as the main                                 scene okay so as you saw when i did it                                 the the soldiers got lit got lead by                                 additional lighting that we have defined                                 in blender                                 and that is now defined in the gltf file                                 and                                 that's it let's run it let's save this                                 design and let's run it                                 all right                                 yeah the first compilation of the                                 project by the way it compiles                                 not only your game but it compiles also                                 uh                                 the it compares also the engine this                                 which means that you can actually have                                 uh well                                 this is this was basically the simpler                                 approach to do and it also means that                                 you can experiment with the engine                                 freely                                 within your project but basically as you                                 my point here was that if you compile                                 the game again of course it doesn't                                 recompile the engine again so it is much                                 faster                                 okay so the game is running let's play                                 it                                 and that's it it works i can move around                                 with my                                 still too fast camera because that's                                 when i started this presentation                                 and everything works okay so this was a                                 very very simple demo that you can                                 basically design your models in blender                                 you can put it in the engine                                 and well it it works okay what word did                                 i want to                                 present so i wanted to add some button                                 and i wanted to                                 control what happens when you press this                                 button from code which means that i also                                 wanted to show you the source code of                                 the                                 project that we're making so let's do it                                 let's create a new button                                 this is very simple i'm just using the                                 add new button                                 now the things look small here but                                 remember that we by default the engine                                 uses user interface scaling                                 which means that the things well they                                 are small when they are displayed on a                                 small screen which the editor is right                                 now simulating but when the game window                                 will be larger when then everything                                 every user interface part will be                                 larger too this is fully configurable                                 inside                                 the project settings okay so what i want                                 to do right now is i want to                                 anchor this button to the right side of                                 the screen                                 because as you can see the according to                                 the latest left side of the screen isn't                                 really uh                                 isn't really working for me so i'm going                                 to do this i'm going to move it and i'm                                 going to do it like this                                 now the button is anchored to the right                                 side of the screen                                 nice i'm going to call it like                                 show message and i'm going to call this                                 button                                 button show message this is how i'm                                 going to access this button                                 from my code i can make the font also i                                 guess a little bit larger                                 but default the button size is adjust                                 itself                                 adjusts itself to the bottom caption but                                 of course this is configurable as well                                 as the look of the button like it's just                                 a default look of the button                                 you can of course configure it using                                 images                                 using uh using colors so                                 button is really something that is                                 clickable like how it looks it's                                 completely configurable using                                 a lot of options that you can see here                                 so                                 like don't worry about this default look                                 of the button you can                                 customize it in in many ways you like                                 okay                                 so we've done it we've made the button                                 when i run the game                                 it will already show the button there's                                 really nothing                                 fancy about this particular part of the                                 demo it's just a non-working button in                                 this case                                 all right let's hit play and there's the                                 button                                 i can click it nothing happens yet okay                                 so how to make something happen well to                                 make something happen i want to open                                 the uh source code which is in pascal as                                 i kind of mentioned                                 a few times now if you worry about                                 pascal being like an old language and so                                 on well                                 basically it's not i mean we're using                                 the modern object pascal as implemented                                 by free pascal compiler                                 uh as i think mentioned the support                                 generics glasses and well a lot of other                                 stuff and let's actually see                                 how it looks like inside so what i did                                 right now is i double clicked on the                                 game state play                                 uh source code which                                 contains the initial code of your                                 play state which is which corresponds by                                 default that's                                 actually very flexible but by default it                                 corresponds to what you have designed in                                 the                                 state play dot caster user interface                                 okay and what i can do right here                                 well i can for example access some                                 components                                 using their names okay so what did i                                 call it                                 button show message right                                 let me just go and copy paste it just to                                 be                                 sure that i won't make any                                 typo okay so we have button                                 show message                                 now for now i like have to do it                                 manually this accessing of the                                 components we have a plan to of course                                 make it automatic                                 but as you can see well it took me i                                 don't i didn't count but not much time                                 to do it                                 so once i have access the button show                                 message from code well i can do anything                                 i'd like to                                 for example i can configure its caption                                 but well we already actually said the                                 caption that makes sense i guess but                                 just to show you some message new                                 caption all right and well what is                                 actually                                 more useful for us here is i can say                                 what happens if you click the button                                 here i just assign assign an event to it                                 which is a simple                                 callback what happens when you click on                                 the button                                 and i found that the useful convention                                 called those things click                                 something something now i'm going to                                 press in last ctrl                                 shift c which means that lazarus will do                                 code completion which means that it will                                 actually automatically figure out that                                 hey what you wanted is you wanted to                                 create a method                                 called click show message it place the                                 declaration of this method                                 in the source code and now what i                                 have to do is simply fill it so i'm                                 going to use something that is                                 well it's really mostly for the                                 debugging i guess proposes                                 is that i'm going to simply use a                                 message okay                                 a procedure that displays a very very                                 simple                                 diagonal box so                                 here it goes okay i also want to add                                 this definition of application and                                 definition of message okay                                 do you need to define those things i                                 want to add them available to make this                                 thing compile                                 and that's it how to compile it now well                                 i can go back to the editor                                 i can do run compile let's and                                 it's just the same thing as if press                                 s pressing run and compile from the                                 lazarus it's just the same source code                                 using the service units                                 the same units um let me do it from the                                 editor right now but it really doesn't                                 matter you can                                 run your project on desktops from                                 lazarus                                 it's works the same way it compiles the                                 same thing so you can                                 and you can of course use debugger using                                 lazarus so if you develop using lazarus                                 it's                                 well usually it's better actually to run                                 the project from lazarus                                 okay so here it is play                                 show message new caption there you                                 clicked i warned you that this is going                                 to be like a                                 very it's not really a production it's a                                 it's an                                 ugly dialogue box okay let's say it                                 explicitly but                                 it's a simple way to set to show off                                 showing that something works                                 okay okay so                                 this was a very simple demo that you can                                 modify the                                                                                                       you can edit code there you can add the                                 resources from blender easily                                 and you can modify the user interface                                 and yeah you can control what happens                                 when you for example click on a button                                 so this is about the three dimensional                                 demo of our engine                                 now the next slide demo in two                                 dimensions this is going to be a little                                 bit quicker because i'm not going to                                 tweak it so much around as i did with                                 the three-dimensional demo                                 so let's go back let's close this                                  project and let's create a new one                                  starting from the two-dimensional demo                                  demo template                                  of course if you're worried about those                                  templates like doing too much for you                                  remember that there's also                                  always the empty template uh so i guess                                  you can tweak those kind of two and                                  three                                                                                                                     starting point i guess for some games                                  but once you learn the engine i guess                                  it's probably easiest to just start from                                  the empty template                                  still they are very useful for as you                                  can see demonstrations so here i'm going                                  to use the two-dimensional game                                  okay and again it's like                                  in the data file i can find uh state                                  play                                  which shows how the game will look like                                  once played                                  now again this is a viewport it contains                                  castle scenes                                  so the same thing as you saw in                                          simply by default right now it has a                                  two-dimensional                                  uh camera that has orthographic                                  projection so it's something more useful                                  for the traditional                                  two-dimensional games you can always                                  like switch between                                  two-dimensional orthographic camera and                                  perspective camera at runtime this is                                  certain configuration                                  using the camera properties of the                                  viewport you can say what is the                                  projection type you can configure all                                  those projection parameters                                  inside the orthographic or perspective                                  sub components okay so so as i emphasize                                  like                                                              playing very well together it's just a                                  matter of what is your default                                  camera view okay what happens here well                                  the same thing as we did before so you                                  can for example move things around like                                  let me move                                  this dragon around where it works uh                                  what can i do with it well i can compile                                  it for desktop it will work                                  it's something that you've already seen                                  so let's actually                                  go to something else let's do something                                  guys which means that                                  let us uh make it running on android                                  okay                                  now how to do it but one way to do it is                                  to well                                  you will need to one way to well                                  basically to compile something for                                  android you need android sdk ndk                                  and free pascal compiler with cross                                  compilation option to android                                  now one way to do it is basically a                                  manual it's explained in the                                  energy engine documentation of course                                  how to install all this necessary stuff                                  yourself                                  but there's another way and i'm going to                                  show it to you right now which is to use                                  our docker image                                  which is a ready to use docker image                                  that contains                                  a free passcode compiler with virus                                  cross compilers installed                                  it also contains caster game engine with                                  its built-in command line build tool                                  and it also contains android uh sdk and                                  ndk                                  uh tools to create easily create android                                  apk                                  uh yeah so we'll try to do it so this is                                  documented                                  in the custom game engine documentation                                  here i'm just going to copy paste the                                  basic line how to use the docker from                                  faster game engine                                  so because this docker line is mounting                                  my home directory                                  inside the docker image so i can simply                                  access my project                                  back going here all right this is my                                  project                                  now i want to build it okay to build it                                  for linux i would do this okay                                  compile by default simply compiles for                                  the current uh                                  operating system which means linux right                                  now                                  uh well actually but if i would like to                                  now what i want to do more                                  is i want to package which means to                                  create something distributable                                  and i also said that i want to create                                  this package for                                  android okay and that's it                                  now we simply wait uh the build tool as                                  i emphasized it                                  simply uses the free pascal compiler                                  under the hood                                  none of what i'm talking about would be                                  possible without free passcode compiler                                  and yeah it's using the free pascal                                  compiler right now two times to compile                                  the                                  engine for two architectures which is uh                                                                          arm and                                                         both cpu processor architectures that                                  are used by the                                  android devices okay and                                  this command once it finishes it will                                  just create a ready apk that you can                                  transfer to your device in any way you                                  like                                  and run it there and i'm going to show                                  you how this apk works on the actual                                  android device                                  uh for this i'm going to actually like                                  use the fact that this is the                                  pre-recorded session so i'm going to                                  basically                                  uh right at this point where i'm                                  speaking i'm going to paste                                  a bit of another video that i will                                  record on my android device                                  and showing you that it works okay                                  so right now                                  okay so thank you very much i think this                                  is all that i wanted to show you                                  in this presentation about caster game                                  engine i know that i started to speak                                  very very fast at some point right i                                  started fast and then i went even faster                                  i think along the way                                  so sorry about that i hope it was                                  comprehensible basically i hope it was                                  understandable what i was saying                                  uh if you have any questions about the                                  engine                                  please go ahead and ask them we have a                                  forum                                  biscuit chat i have a mail                                  i'm available like for all the questions                                  i'm curious about your                                  questions and well yeah                                  please feel welcome to use the engine                                  here's the link and it's all open source                                  please try it out yourself                                  and uh yeah and watch out for the                                      release that we are going to make i hope                                  really really soon because we have been                                  working on it for quite some time                                  thank you thank you very much                                  and welcome back so we have a few                                  questions                                  the first one is uh by elbrus and he                                  asks                                  will version                                                          bullseye freeze                                  yeah so basically i wrote the answers on                                  eater                                  but i can kind of repeat them shortly                                  here so basically we will be very close                                  and                                  i kind of very very much thank you for                                  the suggestion in the in the either part                                  that yeah indeed we should make uh like                                  an alpha release earlier                                  it's something that is already available                                  on our web page i mean we kind of treat                                  the                                  current master branch as a staple is                                  actually used in production games                                  so yeah i guess we should make a release                                  like                                           alpha releasing in debian and then                                  update it on february so thank you very                                  much for the suggestions                                  yeah this way when you will be able to                                  do it                                  so another question um                                  somebody asks uh what is it like for                                  developing                                  freenope or some software for the switch                                  nintendo switch                                  uh is it in the nintendo store                                  or is it side loaded yeah yeah so to                                  answer                                  to kind of to rephrase what i basically                                  wrote is that well                                  the problem with developing open source                                  on switch is that basically you cannot i                                  mean the nintendo switch api is closed                                  and has to remain closed because                                  nintendo                                  wants it that way so the way we had to                                  do it had no choice is to make a closed                                  source fork that is kind of under my                                  supervision that contains engine with                                  some small tweaks to make it work on                                  nintendo switch well it has to be closed                                  source we don't have a choice about it                                  but i kind of guarantee that it is                                  available for free                                  to anyone but to anyone that is also a                                  nintendo developer so to anyone that has                                  also signed the nintendo                                  uh nda and then i guarantee you that i                                  will make                                  this engine like free for you just                                  contact me through the nintendo forums                                  because then i can kind of verify                                  that you're also a nintendo developer                                  and that is like cool with nintendo then                                  so well that is the only way to do it so                                  so that was how it was done                                  uh and a final question uh why is it                                  called castle game engine                                  yeah that was the hard question i don't                                  know really i just like casters i like                                  fantasy stories and at some point it                                  sounded like a good name for the engine                                  uh and now it stays because we have a                                  lot of demos that actually show                                  casters but now it's like an effect not                                  a reason                                  yeah i just i like                                  oh well that's it thanks for a great                                  talk it was                                  it was really interesting and thanks                                  again for presenting                                  thank you for having me thank you                                  you
YouTube URL: https://www.youtube.com/watch?v=y3NkmdF5vpI


