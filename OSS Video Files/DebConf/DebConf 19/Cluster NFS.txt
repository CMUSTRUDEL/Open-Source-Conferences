Title: Cluster NFS
Publication date: 2020-02-18
Playlist: DebConf 19
Description: 
	by Gustavo Theodoro Laskoski

At: DebConf19
https://debconf19.debconf.org/talks/27-cluster-nfs/

This work presents the implementation of a Clustered Network File System. In 4th November 2017 we received nine old servers and it was started a recovery project [1]. As result, five servers were recovered and it has been currently used for research and educational applications. This Cluster uses five old servers (named as Amanda, Carolina, Elisa, Gabriela, and Helena) running Debian 9 (Stretch).
The Cluster is running at IFPR Telecommunications Laboratory (Labtelecom) in the internal network 192.168.1.0/24 [2]. Some characteristics of servers and network address are listed below:
Amanda - 192.168.1.3/24 - Dell Power Edge 2850 - Intel(R) Xeon(TM) CPU 3.00GHz, 4G
Carolina - 192.168.1.10/24 - Dell Power Edge 2850 - Intel(R) Xeon(TM) CPU 3.00GHz, 2G
Elisa - 192.168.1.12/24 - IBM X-series 346 - Intel(R) Xeon(TM) CPU 3.20GHz, 256M
Gabriela - 192.168.1.14/24 - HP Proliant DL380 - Intel(R) Pentium(R) III CPU family 1133MHz, 3G
Helena - 192.168.1.16/24 - IBM E-server - Intel(R) Pentium(R) III CPU family 1133MHz, 2G
Despite of legacy hardware, each server presents some operation and management functions, such as, DHCP Server, Local repository, Multimedia Server (DLNA), FTP Server, and Fail-over. This network has an average of 75 clients per day and an expansion up to 150 clients is expected in the next two years. The goal of this talk is to introduce how some minimalist configurations on Debian can easily provide network services in a low cost cluster.
Some information and references about this cluster are described in Portuguese at:
[1] https://sites.google.com/a/ifpr.edu.br/gustavothl/labtelecom/servidores-de-rede
[2] https://sites.google.com/a/ifpr.edu.br/gustavothl/labtelecom/cluster

Room: MiniauditÃ³rio
Scheduled start: 2019-07-22 13:30:00
Captions: 
	00:00:10,769 --> 00:00:15,730
welcome to the afternoon session we're

00:00:13,750 --> 00:00:17,830
listening today to Gustav for Laskowski

00:00:15,730 --> 00:00:21,029
who is going to talk about cluster in

00:00:17,830 --> 00:00:21,029
efface thank you

00:00:30,519 --> 00:00:35,829
at work file system

00:00:33,730 --> 00:00:38,770
a little short introduction about myself

00:00:35,829 --> 00:00:40,840
I am the bird and the graduating on

00:00:38,770 --> 00:00:44,710
electronics Master of Science and Doctor

00:00:40,840 --> 00:00:49,790
of Science in electro engineer it is

00:00:44,710 --> 00:00:53,390
reversed so it's good to be back home

00:00:49,790 --> 00:00:55,850
and the I am I'm a Linux user and devil

00:00:53,390 --> 00:00:59,490
purposes too

00:00:55,850 --> 00:01:03,000
2007 I worked with with harder and

00:00:59,490 --> 00:01:05,850
softer projects so this one I use Allah

00:01:03,000 --> 00:01:10,520
a lot of the hardware but us device

00:01:05,850 --> 00:01:14,070
drivers graphical interface using Linux

00:01:10,520 --> 00:01:16,680
another project that very complicated

00:01:14,070 --> 00:01:21,600
about that I have used a lot of digital

00:01:16,680 --> 00:01:26,930
signal processing of David but today and

00:01:21,600 --> 00:01:26,930
I will talk about another project

00:01:28,950 --> 00:01:34,130
that's my lab at Federal Institute and

00:01:33,060 --> 00:01:38,170
if we have diversed

00:01:34,130 --> 00:01:41,939
it's about one kilometer from here

00:01:38,170 --> 00:01:46,679
and it's a Brazilian government owes

00:01:41,939 --> 00:01:51,210
we have limited results and I didn't

00:01:46,679 --> 00:01:56,420
have any network server to this project

00:01:51,210 --> 00:01:58,799
and we former about 100 first part

00:01:56,420 --> 00:02:00,829
telecommunication technicans in nine

00:01:58,799 --> 00:02:00,829
years

00:02:02,180 --> 00:02:05,369
[Applause]

00:02:05,640 --> 00:02:12,250
2070 I received this nine year old piece

00:02:09,459 --> 00:02:15,670
of hardware like friend just call me and

00:02:12,250 --> 00:02:18,340
said I I have the servers do you want

00:02:15,670 --> 00:02:21,849
take a look as I said it's okay let's

00:02:18,340 --> 00:02:24,660
try to recover just projects just these

00:02:21,849 --> 00:02:24,660
web servers

00:02:25,069 --> 00:02:29,700
first

00:02:27,010 --> 00:02:35,370
first of all I decide to put some names

00:02:29,700 --> 00:02:41,610
so I choose female names in alphabetical

00:02:35,370 --> 00:02:44,830
order and with a so we have here

00:02:41,610 --> 00:02:46,890
Amanda Bianca Carlina Danielle Deleasa

00:02:44,830 --> 00:02:50,470
Fiorella cappella Liam

00:02:46,890 --> 00:02:53,950
Isabella I think he looks mind to have

00:02:50,470 --> 00:02:56,310
something like this male name is ending

00:02:53,950 --> 00:02:56,310
with

00:02:57,270 --> 00:03:03,780
up some harder procedures so we must

00:03:00,600 --> 00:03:08,160
check some juice harder harddrive disks

00:03:03,780 --> 00:03:13,860
this is memories power supply we first

00:03:08,160 --> 00:03:16,800
cleaning everything up and that's the

00:03:13,860 --> 00:03:18,110
server it's worked fine I'm on the

00:03:16,800 --> 00:03:21,720
Catalina's okay

00:03:18,110 --> 00:03:25,650
Bianca has semi hardware so it's a spare

00:03:21,720 --> 00:03:30,180
part of the mundane Karolina Daniela

00:03:25,650 --> 00:03:33,330
Fiorella Isabella rest in peace fortune

00:03:30,180 --> 00:03:36,990
and Alisa Gabrielle Elena Elena is

00:03:33,330 --> 00:03:43,230
amazing Linda that is Selena two power

00:03:36,990 --> 00:03:46,380
supplies disk arrays to the painting

00:03:43,230 --> 00:03:51,540
three processors very their vote butts

00:03:46,380 --> 00:03:56,240
worked fine and I don't have j k l

00:03:51,540 --> 00:04:00,030
server and I have M it's my wife Barra

00:03:56,240 --> 00:04:02,960
it's a total different OS work fine

00:04:00,030 --> 00:04:02,960
either way

00:04:03,230 --> 00:04:07,850
and

00:04:04,890 --> 00:04:10,560
that's what I what I have so I have

00:04:07,850 --> 00:04:13,860
Amanda Carolyn and Karolina

00:04:10,560 --> 00:04:19,260
Samer harbor dell poweredge two

00:04:13,860 --> 00:04:24,290
processors they are all its memory ELISA

00:04:19,260 --> 00:04:24,290
and Gabriella Elena it's a page on three

00:04:25,750 --> 00:04:28,860
- cheetah bytes of memory

00:04:29,919 --> 00:04:37,599
and we try to put it together plant work

00:04:34,810 --> 00:04:41,770
as a cluster that's the main idea

00:04:37,599 --> 00:04:45,669
so Amanda its main server Karolina

00:04:41,770 --> 00:04:49,479
it's a failover of of Amanda but run it

00:04:45,669 --> 00:04:53,710
run together same network ELISA ELISA

00:04:49,479 --> 00:04:58,620
Gabriella Nina provide any effects NFS

00:04:53,710 --> 00:05:04,379
disks to this cluster each server has a

00:04:58,620 --> 00:05:11,860
network interfacing this network 0.3 10

00:05:04,379 --> 00:05:14,319
10 12 that I don't have ID beat 6 only

00:05:11,860 --> 00:05:18,729
I'd be before that's a another project

00:05:14,319 --> 00:05:22,680
that I work for but everything is

00:05:18,729 --> 00:05:22,680
running this way today

00:05:23,700 --> 00:05:31,380
I'm among its main servers Amanda works

00:05:27,210 --> 00:05:35,010
a lot in 24 hours every day and she

00:05:31,380 --> 00:05:40,680
provides user access by Apache web

00:05:35,010 --> 00:05:44,160
server Amun dates here this tech and the

00:05:40,680 --> 00:05:49,260
she mounts an event and in EFS discs

00:05:44,160 --> 00:05:52,260
from another old other servers I don't

00:05:49,260 --> 00:05:55,410
have any time but it's very simple how

00:05:52,260 --> 00:05:57,670
to run my passion on Debian I have this

00:05:55,410 --> 00:05:59,350
example it's

00:05:57,670 --> 00:06:03,490
[Music]

00:05:59,350 --> 00:06:07,230
website just run this about fort lights

00:06:03,490 --> 00:06:07,230
they're very simple

00:06:12,110 --> 00:06:17,240
and the older servers only works when

00:06:15,409 --> 00:06:20,120
it's really necessary

00:06:17,240 --> 00:06:24,439
that's because economical energy

00:06:20,120 --> 00:06:26,689
environment noise reasons in turn or

00:06:24,439 --> 00:06:31,009
other services to noise the the

00:06:26,689 --> 00:06:34,669
laboratory and because of that if

00:06:31,009 --> 00:06:37,879
someone tried to us access Amanda that

00:06:34,669 --> 00:06:41,919
did Wabash Webber servers i dis matched

00:06:37,879 --> 00:06:45,500
this message is going to show up because

00:06:41,919 --> 00:06:48,379
just to show the user that that server

00:06:45,500 --> 00:06:52,430
is not work at the moment I just put a

00:06:48,379 --> 00:06:55,570
named file with his name indicated that

00:06:52,430 --> 00:06:58,210
the server is not like that depressed

00:06:55,570 --> 00:07:02,320
[Music]

00:06:58,210 --> 00:07:08,350
how to set up on if any F is then F s

00:07:02,320 --> 00:07:12,699
services varies so we just do to change

00:07:08,350 --> 00:07:17,350
this file intercept that and this did

00:07:12,699 --> 00:07:21,800
not work in address of the server's each

00:07:17,350 --> 00:07:24,030
server has a cluster user

00:07:21,800 --> 00:07:27,500
[Music]

00:07:24,030 --> 00:07:33,720
just to separate to mention reasons and

00:07:27,500 --> 00:07:37,920
this is the local at a local place at a

00:07:33,720 --> 00:07:41,700
posh web server in this setup is very

00:07:37,920 --> 00:07:46,170
easy to to mount a gist Network gist

00:07:41,700 --> 00:07:49,350
just mount and it is parameter and to

00:07:46,170 --> 00:07:52,290
amount the same idea

00:07:49,350 --> 00:07:56,850
here I have to do something because the

00:07:52,290 --> 00:07:57,870
server's stay offline so when I turn our

00:07:56,850 --> 00:08:00,870
server all

00:07:57,870 --> 00:08:05,940
for example Karolina she must send a

00:08:00,870 --> 00:08:10,020
common spin to Amanda and said hey mouth

00:08:05,940 --> 00:08:11,200
my gist something like that almost like

00:08:10,020 --> 00:08:13,360
you shortly

00:08:11,200 --> 00:08:19,930
[Music]

00:08:13,360 --> 00:08:23,580
amanda has on other servers running for

00:08:19,930 --> 00:08:27,280
example we need DLNA it's a much media

00:08:23,580 --> 00:08:31,300
sorry some would you media in streaming

00:08:27,280 --> 00:08:36,729
server I run there the stop flicks it's

00:08:31,300 --> 00:08:40,140
a lot it's very it's very easy to true I

00:08:36,729 --> 00:08:40,140
think I have

00:08:40,560 --> 00:08:51,090
you must change this file not everything

00:08:46,380 --> 00:08:54,980
just the naming mediatory

00:08:51,090 --> 00:08:54,980
and runs very very

00:08:56,790 --> 00:09:05,580
I have FTP and the nav server I have

00:09:02,490 --> 00:09:10,920
some IP cameras that send photos to the

00:09:05,580 --> 00:09:14,640
to the servers and I have the air arts

00:09:10,920 --> 00:09:17,100
to two server for advanced statistical

00:09:14,640 --> 00:09:20,430
analysis I think you have two sections

00:09:17,100 --> 00:09:22,780
this conference about our it's very

00:09:20,430 --> 00:09:26,100
interest

00:09:22,780 --> 00:09:26,100
I have something

00:09:26,540 --> 00:09:32,110
how to set up spirit berries either just

00:09:33,510 --> 00:09:41,339
[Music]

00:09:37,290 --> 00:09:46,310
and Karolina it's a fait over another

00:09:41,339 --> 00:09:51,649
server of Amanda said the green one

00:09:46,310 --> 00:09:58,550
it works about 50 hours a week it has a

00:09:51,649 --> 00:10:02,420
the tear gas DHCP server she used up her

00:09:58,550 --> 00:10:04,550
address and Amanda Lauer address so I

00:10:02,420 --> 00:10:08,779
don't have any conflicted

00:10:04,550 --> 00:10:11,059
IP conflict address this idea but but in

00:10:08,779 --> 00:10:11,629
general Carolina sent some pings -

00:10:11,059 --> 00:10:15,110
Amanda

00:10:11,629 --> 00:10:18,380
if Amanda does not respond she turns the

00:10:15,110 --> 00:10:21,620
server on that's the

00:10:18,380 --> 00:10:25,940
a partial much media left preservers

00:10:21,620 --> 00:10:28,850
runs that different IP future project

00:10:25,940 --> 00:10:32,150
idiots - to make a load balance between

00:10:28,850 --> 00:10:34,850
the two servers but I must still keep

00:10:32,150 --> 00:10:39,940
the current in our own that's a value of

00:10:34,850 --> 00:10:39,940
K so I don't know it

00:10:40,370 --> 00:10:49,759
and another service ELISA

00:10:43,660 --> 00:10:53,120
Gabriella Elena provides the NTFS disks

00:10:49,759 --> 00:11:00,399
the common regular users can only access

00:10:53,120 --> 00:11:04,189
by Amanda or Catalina that it is read

00:11:00,399 --> 00:11:09,139
Elena in yellow Gabriella is another hug

00:11:04,189 --> 00:11:14,300
and how to set up these clients we're

00:11:09,139 --> 00:11:16,910
reversing so we must stall part map NFS

00:11:14,300 --> 00:11:19,779
care service in a dress code the first

00:11:16,910 --> 00:11:19,779
first step

00:11:20,860 --> 00:11:28,240
and after that we must change this file

00:11:24,490 --> 00:11:33,430
so her clustered meds did the user the

00:11:28,240 --> 00:11:38,500
address of in any event servers and I

00:11:33,430 --> 00:11:41,800
must do it in each server and after that

00:11:38,500 --> 00:11:45,460
a must a must to choose a good dis

00:11:41,800 --> 00:11:50,410
common because every time that a server

00:11:45,460 --> 00:11:54,520
turns out it mounts the descriptor to

00:11:50,410 --> 00:11:57,940
the main server and of course I must

00:11:54,520 --> 00:12:02,800
change some permissions in this scenario

00:11:57,940 --> 00:12:06,760
I only clustered user and routine user

00:12:02,800 --> 00:12:11,590
can change files but other users can

00:12:06,760 --> 00:12:12,370
read and execute and that's Gabriela and

00:12:11,590 --> 00:12:15,760
other hacker

00:12:12,370 --> 00:12:20,620
that's amazing servers we have JISC is

00:12:15,760 --> 00:12:24,800
erase so we have a great five just Caray

00:12:20,620 --> 00:12:26,290
here I don't set before

00:12:24,800 --> 00:12:31,410
[Music]

00:12:26,290 --> 00:12:35,439
amanda is here she has six hard drivers

00:12:31,410 --> 00:12:39,999
frontier ID one debian eats in the first

00:12:35,439 --> 00:12:43,239
one slash home in sac one and a bash web

00:12:39,999 --> 00:12:46,550
servers the further one so i have

00:12:43,239 --> 00:12:49,610
handguns it's very very nice

00:12:46,550 --> 00:12:54,190
so that this curse has a hard driver

00:12:49,610 --> 00:12:54,190
barreled Natsu it's worth I

00:12:54,970 --> 00:13:02,800
and I must do this common to send the

00:12:59,410 --> 00:13:07,120
message the message to my server send AI

00:13:02,800 --> 00:13:13,720
I wake up put my disk on something like

00:13:07,120 --> 00:13:16,480
that so I use s as a best this common

00:13:13,720 --> 00:13:21,190
that I just sent it it's not so saved

00:13:16,480 --> 00:13:27,880
because I must put the best word off the

00:13:21,190 --> 00:13:30,990
server here so there you can use is a

00:13:27,880 --> 00:13:34,030
symmetrical keys but I must use it this

00:13:30,990 --> 00:13:39,690
because another device I wouldn't show a

00:13:34,030 --> 00:13:43,120
little later anyway just the SSH SSH

00:13:39,690 --> 00:13:48,400
password and a common to my server to

00:13:43,120 --> 00:13:54,060
mount the disk and after that we can put

00:13:48,400 --> 00:14:00,730
it on from top so I put this common

00:13:54,060 --> 00:14:04,360
after reboot my service wait 60 s 1

00:14:00,730 --> 00:14:08,490
minute 60 seconds yet that's important

00:14:04,360 --> 00:14:13,960
because I must ensure that my server

00:14:08,490 --> 00:14:15,460
receive a IP address before mount my

00:14:13,960 --> 00:14:19,180
disk

00:14:15,460 --> 00:14:23,050
I can put some fix address but I prefer

00:14:19,180 --> 00:14:29,320
this way because I can see when my

00:14:23,050 --> 00:14:32,360
server is online I have this despite

00:14:29,320 --> 00:14:36,280
here for example

00:14:32,360 --> 00:14:36,280
every time machine

00:14:36,320 --> 00:14:42,560
receive high RPM on network it shows to

00:14:40,009 --> 00:14:45,580
me here so I can control this

00:14:42,560 --> 00:14:48,390
that's because I

00:14:45,580 --> 00:14:48,390
this technique

00:14:49,060 --> 00:14:55,800
so it's received IPS and mounted INF

00:14:53,380 --> 00:14:58,759
disk sir

00:14:55,800 --> 00:15:02,879
Percy put America in a guest server

00:14:58,759 --> 00:15:08,759
cluster this way another things that I

00:15:02,879 --> 00:15:12,029
have Amanda has automatic test desks for

00:15:08,759 --> 00:15:15,540
Dropbox and g-drive for example here

00:15:12,029 --> 00:15:19,999
every 20 minutes she is a good kisser

00:15:15,540 --> 00:15:19,999
this script in fact I

00:15:22,260 --> 00:15:31,139
[Music]

00:15:26,370 --> 00:15:37,499
that's the spritz and date of time being

00:15:31,139 --> 00:15:41,339
to on other hacks devices and some some

00:15:37,499 --> 00:15:47,390
stuff here this is very nice because if

00:15:41,339 --> 00:15:50,540
you change G's IQ my network

00:15:47,390 --> 00:15:53,840
with this carbon so it's very nice

00:15:50,540 --> 00:15:58,210
but just keep it running

00:15:53,840 --> 00:16:01,760
and g-drive and another comments here

00:15:58,210 --> 00:16:05,960
the the output of this script is sent

00:16:01,760 --> 00:16:10,520
back to Dropbox in this file here God

00:16:05,960 --> 00:16:13,310
Daniel so we have a key

00:16:10,520 --> 00:16:15,430
time it is hard drivers

00:16:13,310 --> 00:16:17,130
[Music]

00:16:15,430 --> 00:16:19,930
I can

00:16:17,130 --> 00:16:22,950
ever meanest woman so

00:16:19,930 --> 00:16:22,950
I must change juice

00:16:23,000 --> 00:16:30,670
is go to Dropbox and one minute later is

00:16:27,050 --> 00:16:34,060
gonna change my output file so that I

00:16:30,670 --> 00:16:41,279
got show later

00:16:34,060 --> 00:16:41,279
[Music]

00:16:41,710 --> 00:16:45,390
so that's they all to death

00:16:46,170 --> 00:16:55,910
it's sent to GTA IV either and the this

00:16:51,450 --> 00:16:59,390
goes to my website at this link here

00:16:55,910 --> 00:16:59,390
Sperrys just

00:17:01,610 --> 00:17:08,240
so here I have everything in that it

00:17:05,180 --> 00:17:12,970
sends the starts of the server's here is

00:17:08,240 --> 00:17:12,970
very very easy to set up either

00:17:13,130 --> 00:17:17,380
I think in Dropbox response

00:17:20,970 --> 00:17:28,880
it's a response

00:17:22,710 --> 00:17:30,190
[Music]

00:17:28,880 --> 00:17:31,800
and

00:17:30,190 --> 00:17:35,990
[Music]

00:17:31,800 --> 00:17:35,990
I have some nice here

00:17:36,440 --> 00:17:40,570
that's because I use this comment

00:17:38,860 --> 00:17:43,240
absorbing

00:17:40,570 --> 00:17:46,570
that's because I used this woman and I

00:17:43,240 --> 00:17:50,170
can read it for example the temperature

00:17:46,570 --> 00:17:53,470
for our Cisco Network device routers

00:17:50,170 --> 00:17:56,650
switches so I said it is the best word

00:17:53,470 --> 00:18:00,760
and it is common and I can measure the

00:17:56,650 --> 00:18:03,090
temperature this had seen on my website

00:18:00,760 --> 00:18:03,090
either

00:18:03,220 --> 00:18:08,680
it's a little advance at the comments

00:18:05,980 --> 00:18:11,500
but I have here for example the

00:18:08,680 --> 00:18:14,590
temperature of the seven last dates of

00:18:11,500 --> 00:18:19,210
my sweetie router and our Raspberry Pi

00:18:14,590 --> 00:18:21,930
device with the disco to have some

00:18:19,210 --> 00:18:21,930
scripts

00:18:22,700 --> 00:18:26,880
generated his scruff

00:18:24,670 --> 00:18:30,120
[Music]

00:18:26,880 --> 00:18:32,900
up here there's a drop box response here

00:18:30,120 --> 00:18:32,900
a lot

00:18:34,750 --> 00:18:38,040
it's going to send the death

00:18:36,610 --> 00:18:41,610
[Music]

00:18:38,040 --> 00:18:44,430
it's going to send a cameras either I

00:18:41,610 --> 00:18:44,820
think I have something here that's my

00:18:44,430 --> 00:18:57,099
lab

00:18:44,820 --> 00:18:57,099
[Music]

00:18:57,320 --> 00:19:05,350
and I can do some stuff for example here

00:19:00,980 --> 00:19:05,350
I have my house

00:19:05,550 --> 00:19:12,210
house I can see our vehicle using the

00:19:08,790 --> 00:19:14,960
same technique with Debian Dropbox some

00:19:12,210 --> 00:19:14,960
scripts

00:19:15,150 --> 00:19:18,110
that's all

00:19:18,500 --> 00:19:25,940
so thank you so much the federal stood

00:19:22,520 --> 00:19:29,659
for conservative the free software

00:19:25,940 --> 00:19:33,029
community community deputy you always do

00:19:29,659 --> 00:19:39,449
me a great job that's all

00:19:33,029 --> 00:19:41,530
thank you very much we have one minute

00:19:39,449 --> 00:19:48,470
for quick questions

00:19:41,530 --> 00:19:51,620
[Music]

00:19:48,470 --> 00:19:54,140
control Aledo disclosures so social

00:19:51,620 --> 00:19:56,360
script amazed me as a saga pro

00:19:54,140 --> 00:20:07,750
communication dos do clusters so so

00:19:56,360 --> 00:20:07,750
shall we skip Yaga English control

00:20:08,620 --> 00:20:16,450
Dropbox shell scripture SSH it's very

00:20:14,000 --> 00:20:16,450
Pharisee

00:20:20,910 --> 00:20:28,930
that's okay thanks so much thank you

00:20:25,820 --> 00:20:32,049
[Applause]

00:20:28,930 --> 00:20:32,049

YouTube URL: https://www.youtube.com/watch?v=NMzo_zn5V6U


