Title: I still haven't found what I'm looking for - some ramblings about Xapian
Publication date: 2017-12-02
Playlist: DebConf 15
Description: 
	by Olly Betts

At: DebConf15
https://summit.debconf.org/debconf15/meeting/302/i-still-havent-found-what-im-looking-for-some-ramblings-about-xapian/
https://debconf15.debconf.org/

Debian uses Xapian-powered search extensively, both in the software we package and in our own infrastructure.

I'd like to share some thoughts on these different searches, where they work well, where they don't, and how we can improve them.

Room: Berlin/London
Scheduled start: 2015-08-15 11:30:00
Captions: 
	00:00:00,060 --> 00:00:06,750
from everyone it's my pleasure to

00:00:04,049 --> 00:00:10,139
introduce Holly bets to you he has is

00:00:06,750 --> 00:00:13,769
the long long term maintainer for the

00:00:10,139 --> 00:00:16,350
search engine is a peon he's also he's

00:00:13,769 --> 00:00:19,410
both upstream developer and Debian

00:00:16,350 --> 00:00:23,519
package err and apparently he's still

00:00:19,410 --> 00:00:25,730
searching oh hello everyone thanks

00:00:23,519 --> 00:00:28,080
coming along I'm say yes I've been a

00:00:25,730 --> 00:00:30,029
Debian developer for almost six years

00:00:28,080 --> 00:00:32,250
now it'll be six years next month and

00:00:30,029 --> 00:00:33,660
this is my first dead comp because about

00:00:32,250 --> 00:00:35,880
seven and a half years ago I moved New

00:00:33,660 --> 00:00:38,090
Zealand so it's it's quite a long way to

00:00:35,880 --> 00:00:38,090
come

00:00:38,510 --> 00:00:43,469
I'm self-employed I work as a consultant

00:00:41,879 --> 00:00:46,430
doing work on SAP Ian's bespoke

00:00:43,469 --> 00:00:48,390
development and helping people set it up

00:00:46,430 --> 00:00:55,680
and I've been involved in the project

00:00:48,390 --> 00:00:58,379
since the very beginning so if we were

00:00:55,680 --> 00:01:01,859
an audience survey two starters off so

00:00:58,379 --> 00:01:05,369
who has heard of zakian before okay so

00:01:01,859 --> 00:01:12,510
it's most two yoo-hoos searches using

00:01:05,369 --> 00:01:20,189
zakian okay and who's written code using

00:01:12,510 --> 00:01:21,930
zap Ian so one than two halves so I

00:01:20,189 --> 00:01:25,460
suspect in fact most of people who think

00:01:21,930 --> 00:01:29,009
they haven't used a paean have because

00:01:25,460 --> 00:01:33,869
it's it's installed on 95% of machines

00:01:29,009 --> 00:01:36,119
reporting to the Debian popcorn and it's

00:01:33,869 --> 00:01:37,799
used by a lot of the infrastructure and

00:01:36,119 --> 00:01:39,750
it's also used by other services so for

00:01:37,799 --> 00:01:43,170
example Gmail talk uses a paean for its

00:01:39,750 --> 00:01:46,619
search the project started about 16

00:01:43,170 --> 00:01:50,189
years ago it was originally a commercial

00:01:46,619 --> 00:01:52,229
closed source replacement for an engine

00:01:50,189 --> 00:01:54,360
and a company I was working for there

00:01:52,229 --> 00:01:55,770
very early on in event development they

00:01:54,360 --> 00:01:58,200
decided to open it up and release it

00:01:55,770 --> 00:02:00,390
under the GPL and the plan was at that

00:01:58,200 --> 00:02:02,610
time to jewel license it so people could

00:02:00,390 --> 00:02:04,020
use it under the GPL if they wanted and

00:02:02,610 --> 00:02:06,360
if they wanted to commercialize them so

00:02:04,020 --> 00:02:08,640
could pay for one and we'd have to deal

00:02:06,360 --> 00:02:10,709
with getting copyright assignment for

00:02:08,640 --> 00:02:13,260
patches however a company went out of

00:02:10,709 --> 00:02:13,580
business quite soon after that and I

00:02:13,260 --> 00:02:16,460
just

00:02:13,580 --> 00:02:18,140
kept working on it so I'm the most

00:02:16,460 --> 00:02:31,190
long-term contributor because I've been

00:02:18,140 --> 00:02:32,720
lessons to start and slide so we're

00:02:31,190 --> 00:02:35,390
using it on quite a lot of the Debian

00:02:32,720 --> 00:02:37,850
infrastructure now the numbers on the

00:02:35,390 --> 00:02:41,840
writer the number of documents like

00:02:37,850 --> 00:02:43,250
emails or pages so you can see from this

00:02:41,840 --> 00:02:49,370
we write a lot more email than anything

00:02:43,250 --> 00:02:51,410
else so just to run through them

00:02:49,370 --> 00:02:55,760
Lissa's was obviously for mailing list

00:02:51,410 --> 00:02:58,280
search searches save website packages

00:02:55,760 --> 00:02:59,590
there's a search of we're getting some

00:02:58,280 --> 00:03:05,960
ringing on there

00:02:59,590 --> 00:03:07,280
can you hear that but packages search as

00:03:05,960 --> 00:03:09,740
a package search so you can put search

00:03:07,280 --> 00:03:12,580
package descriptions with it the wiki's

00:03:09,740 --> 00:03:20,690
wiki pages and depth tags is Enrique's

00:03:12,580 --> 00:03:22,370
tax for Debian packages there's also a

00:03:20,690 --> 00:03:24,650
lot of packaged software it uses it this

00:03:22,370 --> 00:03:29,330
is just the sort of the top-ranked

00:03:24,650 --> 00:03:33,190
roughly by popularity contest so there's

00:03:29,330 --> 00:03:35,840
quite a lot of package management and

00:03:33,190 --> 00:03:37,550
similar things that students adapt to

00:03:35,840 --> 00:03:39,650
growth package managers cyclized is a

00:03:37,550 --> 00:03:41,959
thing in gnome which kind of tracks what

00:03:39,650 --> 00:03:48,709
activities you've been doing so it can

00:03:41,959 --> 00:03:50,090
suggest recently used things and because

00:03:48,709 --> 00:03:51,290
the package management stuff tends to

00:03:50,090 --> 00:03:52,340
get installed by a lot of people that

00:03:51,290 --> 00:03:54,560
stores the top of the list because

00:03:52,340 --> 00:03:58,570
there's a it's a long tail down below

00:03:54,560 --> 00:03:58,570
here which I didn't include I'm a slide

00:04:03,190 --> 00:04:09,440
so I was intending to talk a lot about

00:04:07,270 --> 00:04:10,970
this part of the thing but how does was

00:04:09,440 --> 00:04:13,280
shortened the talked Lots fits into the

00:04:10,970 --> 00:04:16,970
time available I'm going to touch on

00:04:13,280 --> 00:04:18,829
this briefly there's some usability

00:04:16,970 --> 00:04:20,450
issues with some researches as an

00:04:18,829 --> 00:04:25,850
example that for this search results

00:04:20,450 --> 00:04:27,970
layouts not very helpful I'll just show

00:04:25,850 --> 00:04:27,970
you that

00:04:41,830 --> 00:04:46,190
so this is the search for Melissa's

00:04:44,210 --> 00:04:49,069
sight this is actually got a bit worse

00:04:46,190 --> 00:04:51,009
for last week because I fixed the lists

00:04:49,069 --> 00:04:56,360
a search feature which had got disabled

00:04:51,009 --> 00:05:07,550
some time ago but if I search for

00:04:56,360 --> 00:05:10,520
something say you can see most of

00:05:07,550 --> 00:05:11,870
results page is just the form at the top

00:05:10,520 --> 00:05:13,370
and in fact if you have a small screen

00:05:11,870 --> 00:05:15,289
you don't even see any results and you

00:05:13,370 --> 00:05:17,389
think it's just not match to anything so

00:05:15,289 --> 00:05:19,250
on my netbook which is only six hundred

00:05:17,389 --> 00:05:22,639
high you don't get any of this part on

00:05:19,250 --> 00:05:25,220
the screen so clearly we need to do a

00:05:22,639 --> 00:05:27,789
bit of work on rearranging a form to

00:05:25,220 --> 00:05:27,789
take up less space

00:05:37,560 --> 00:05:43,440
so police ideally needs input for

00:05:40,770 --> 00:05:45,990
someone with some web design on now but

00:05:43,440 --> 00:05:48,410
just a simple tweaking of things would

00:05:45,990 --> 00:05:48,410
help here

00:05:49,700 --> 00:05:55,920
so visit it slightly embarrassing

00:05:53,790 --> 00:05:58,410
example if you go to the search dog

00:05:55,920 --> 00:05:59,610
Debian or dog and searched DFS g-v Code

00:05:58,410 --> 00:06:02,070
of Conduct page which is almost

00:05:59,610 --> 00:06:05,760
certainly the page you want it is 357th

00:06:02,070 --> 00:06:06,750
hit so the problem with this is that

00:06:05,760 --> 00:06:09,480
it's actually part of the Code of

00:06:06,750 --> 00:06:12,870
Conduct page it doesn't talk about DSD

00:06:09,480 --> 00:06:14,970
FSG a lot and the ranking is only based

00:06:12,870 --> 00:06:20,160
on keywords at the moment and it's only

00:06:14,970 --> 00:06:21,720
based on keywords on the page so this

00:06:20,160 --> 00:06:22,890
was actually a bit of an issue is paging

00:06:21,720 --> 00:06:24,150
other search engines so even the

00:06:22,890 --> 00:06:27,180
mainstream search engines which have

00:06:24,150 --> 00:06:28,800
more more reach database they have link

00:06:27,180 --> 00:06:30,570
analysis and click freeze and so forth

00:06:28,800 --> 00:06:38,820
you may only get it in the middle of a

00:06:30,570 --> 00:06:47,400
top 10 so ver of several ways we could

00:06:38,820 --> 00:06:49,440
improve these sort of issues and these

00:06:47,400 --> 00:06:50,730
issues were not very common but they're

00:06:49,440 --> 00:06:51,990
very annoying when you hit one because

00:06:50,730 --> 00:06:55,250
you just can't find the page you want

00:06:51,990 --> 00:06:57,270
and the DF SG ones that particularly

00:06:55,250 --> 00:06:59,460
particular embarrassing one because it's

00:06:57,270 --> 00:07:05,640
it's clearly something that yes this a

00:06:59,460 --> 00:07:06,720
key part of our our culture our ethos so

00:07:05,640 --> 00:07:08,220
one thing we could try to do is to tweet

00:07:06,720 --> 00:07:09,540
problematic pages which people have

00:07:08,220 --> 00:07:10,940
tried with this one in the past by

00:07:09,540 --> 00:07:12,870
adding some more keywords to a page

00:07:10,940 --> 00:07:15,660
which has helped a little bit they're

00:07:12,870 --> 00:07:17,670
not really solved it we could try to

00:07:15,660 --> 00:07:19,140
maintain some sort of list of golden

00:07:17,670 --> 00:07:21,750
answers to particular problematic

00:07:19,140 --> 00:07:24,450
queries that doesn't scale all that well

00:07:21,750 --> 00:07:26,730
because you have to do it manually and

00:07:24,450 --> 00:07:28,230
people have to find the queries to do it

00:07:26,730 --> 00:07:30,990
for me someone has to do it and then you

00:07:28,230 --> 00:07:32,400
have to make sure it keeps working we

00:07:30,990 --> 00:07:34,860
could look at the search logs and we've

00:07:32,400 --> 00:07:38,460
the website logs and so forth to do log

00:07:34,860 --> 00:07:42,050
analysis generally things that people

00:07:38,460 --> 00:07:44,790
click on a lot of results that they want

00:07:42,050 --> 00:07:46,020
and that's also true generally pages and

00:07:44,790 --> 00:07:48,730
people visit a lot and website even

00:07:46,020 --> 00:07:51,400
though they don't come through research

00:07:48,730 --> 00:07:53,230
other pages they want the possibly some

00:07:51,400 --> 00:07:56,350
privacy issues within our analyzing logs

00:07:53,230 --> 00:07:58,240
and there's also potentially abuse

00:07:56,350 --> 00:08:00,790
issues with people hammering away at

00:07:58,240 --> 00:08:02,080
websites trim promote pages it's

00:08:00,790 --> 00:08:03,820
probably not such an issue in deputies

00:08:02,080 --> 00:08:06,820
it is for something like on the big

00:08:03,820 --> 00:08:13,090
search engines but searching all sorts

00:08:06,820 --> 00:08:17,080
of website probably is simplest thing we

00:08:13,090 --> 00:08:21,370
could do is to also index pages by the

00:08:17,080 --> 00:08:23,770
link text so we're almost certainly lots

00:08:21,370 --> 00:08:25,630
of pages on the Debian website that link

00:08:23,770 --> 00:08:28,080
to the code of contact page with DFS G

00:08:25,630 --> 00:08:30,970
in the link text or near the link text

00:08:28,080 --> 00:08:33,310
so you can make use of Apter to decide

00:08:30,970 --> 00:08:36,070
for DFS G is important that page we

00:08:33,310 --> 00:08:39,220
don't can really do that that wouldn't

00:08:36,070 --> 00:08:43,080
work so well for the research foe

00:08:39,220 --> 00:08:43,080
because it's it's not a linked structure

00:08:58,800 --> 00:09:05,260
so think I'd like to talk about in

00:09:02,350 --> 00:09:10,270
particular is building a combined search

00:09:05,260 --> 00:09:12,460
system so currently if you want to

00:09:10,270 --> 00:09:13,600
search something Debian you need to you

00:09:12,460 --> 00:09:16,300
need to know where the answer is before

00:09:13,600 --> 00:09:17,950
you start so you can either go and

00:09:16,300 --> 00:09:20,560
search for lists or you can search a

00:09:17,950 --> 00:09:25,630
website or you can search wiki and so

00:09:20,560 --> 00:09:26,860
forth but the answer in some cases you

00:09:25,630 --> 00:09:27,970
know where the answer is if you're

00:09:26,860 --> 00:09:29,350
looking for a particular package the

00:09:27,970 --> 00:09:31,470
package search is the place to look for

00:09:29,350 --> 00:09:31,470
it

00:09:40,070 --> 00:09:46,260
but the many searches the answer could

00:09:43,470 --> 00:09:49,529
be usefully fulfilled by a result from

00:09:46,260 --> 00:09:53,519
any of the things so why don't we try

00:09:49,529 --> 00:09:55,019
and provide a unified search UI he

00:09:53,519 --> 00:09:56,579
searches all use a peon as a peon

00:09:55,019 --> 00:09:58,170
provides a way to transparently search

00:09:56,579 --> 00:10:03,329
either multiple databases at the same

00:09:58,170 --> 00:10:06,480
time so I had look at doing that at the

00:10:03,329 --> 00:10:08,610
end of this previous week so I'm

00:10:06,480 --> 00:10:11,430
presenting Sauron searching all useful

00:10:08,610 --> 00:10:24,750
resources over the network it's now time

00:10:11,430 --> 00:10:27,199
for demo so let's search for code of

00:10:24,750 --> 00:10:27,199
conduct

00:10:38,259 --> 00:10:45,879
okay so because we have nearly 50 times

00:10:43,779 --> 00:10:48,850
as many emails as we have anything else

00:10:45,879 --> 00:10:53,799
you'll notice these results a rather

00:10:48,850 --> 00:10:57,539
dominated by email results so all of

00:10:53,799 --> 00:11:00,189
these are email apart from this one here

00:10:57,539 --> 00:11:05,829
which is a page on a website about the

00:11:00,189 --> 00:11:11,559
vote for the code of conduct this is a

00:11:05,829 --> 00:11:14,619
bit of a it's we have a duct tape and

00:11:11,559 --> 00:11:16,359
blue string demo there's lots of things

00:11:14,619 --> 00:11:18,850
in it which don't quite line up properly

00:11:16,359 --> 00:11:21,669
the different searches use different

00:11:18,850 --> 00:11:23,709
formats to store their data in so I've

00:11:21,669 --> 00:11:26,859
had to just sort of budget together ways

00:11:23,709 --> 00:11:29,019
to handle that and in particular for

00:11:26,859 --> 00:11:31,809
weekly results the wiki stores the

00:11:29,019 --> 00:11:33,309
information in a Python pickle so I'm

00:11:31,809 --> 00:11:36,910
running a little external server which

00:11:33,309 --> 00:11:38,829
I've patched I may get to call out to to

00:11:36,910 --> 00:11:41,559
2d pickle results in return to means

00:11:38,829 --> 00:11:43,119
something I can handle there aren't

00:11:41,559 --> 00:11:48,149
actually any weak results in this one

00:11:43,119 --> 00:11:48,149
but what was the wiki query

00:12:18,510 --> 00:12:25,680
there we go so the wiki results are a

00:12:22,590 --> 00:12:27,480
bit brief because there's no there's no

00:12:25,680 --> 00:12:29,430
nothing snippet from a document stored

00:12:27,480 --> 00:12:32,850
there you have to go and get it which is

00:12:29,430 --> 00:12:35,330
how Moin Moin works but it doesn't lease

00:12:32,850 --> 00:12:35,330
find them

00:12:52,180 --> 00:12:58,640
so you can actually try this at home

00:12:54,560 --> 00:13:00,080
apart from a wiki part the wiki machine

00:12:58,640 --> 00:13:02,720
is restricted access

00:13:00,080 --> 00:13:06,410
I requested access to it specifically to

00:13:02,720 --> 00:13:09,260
set up miss that any Debian developer

00:13:06,410 --> 00:13:13,100
can SSH to this machine or machine which

00:13:09,260 --> 00:13:14,930
runs the search friends end you need to

00:13:13,100 --> 00:13:18,560
be running Jessie because that's the

00:13:14,930 --> 00:13:20,360
same version of zakian that the those

00:13:18,560 --> 00:13:22,210
machines are running and was a minor

00:13:20,360 --> 00:13:24,500
change in remote protocol to fix a bug

00:13:22,210 --> 00:13:26,720
so if you're using a version from

00:13:24,500 --> 00:13:30,890
unstable it doesn't work because the

00:13:26,720 --> 00:13:33,620
protocol versions aren't the same so you

00:13:30,890 --> 00:13:37,220
create this this small file which is in

00:13:33,620 --> 00:13:42,320
zapping causes a stub database and each

00:13:37,220 --> 00:13:45,230
line in this is a database to search so

00:13:42,320 --> 00:13:47,180
all this is telling us is that searching

00:13:45,230 --> 00:13:50,960
a remote database we search it by

00:13:47,180 --> 00:13:53,030
running the command SSH machine name and

00:13:50,960 --> 00:13:55,430
on remote machine we run zakian prog

00:13:53,030 --> 00:13:57,020
serve which is a version of remote

00:13:55,430 --> 00:13:59,780
protocol server which just talks on

00:13:57,020 --> 00:14:00,950
standard in and standard out and then

00:13:59,780 --> 00:14:04,460
thing at the end is the name of the

00:14:00,950 --> 00:14:07,940
database on the remote server so if you

00:14:04,460 --> 00:14:09,920
create that file and point Omega Omega

00:14:07,940 --> 00:14:13,790
is the CGI front-end I'm using here

00:14:09,920 --> 00:14:18,170
which is a part of sepia

00:14:13,790 --> 00:14:20,660
it just works and the other part you

00:14:18,170 --> 00:14:24,730
need is the bit to deal with the

00:14:20,660 --> 00:14:24,730
different formats of the two databases

00:14:25,450 --> 00:14:29,210
this is a sort of an undocumented

00:14:27,680 --> 00:14:32,900
feature you can do this I was quite

00:14:29,210 --> 00:14:34,220
pleased to discover this so it was two

00:14:32,900 --> 00:14:35,570
different ways you know McGee you can

00:14:34,220 --> 00:14:38,920
store the fields you can either store

00:14:35,570 --> 00:14:41,270
from his name and then value each time

00:14:38,920 --> 00:14:43,820
but because that's storing the name over

00:14:41,270 --> 00:14:45,350
and over again there's another way which

00:14:43,820 --> 00:14:46,940
is you just store them one on the line

00:14:45,350 --> 00:14:50,390
by myself and you put the names of

00:14:46,940 --> 00:14:52,520
fields in once and the list does it one

00:14:50,390 --> 00:14:55,610
way and web search does it the other way

00:14:52,520 --> 00:14:59,150
for just because the people you set them

00:14:55,610 --> 00:15:00,440
up to do different ways but you can

00:14:59,150 --> 00:15:02,900
actually dynamically switch which

00:15:00,440 --> 00:15:05,630
happens on the per hit basis when you

00:15:02,900 --> 00:15:08,810
search two databases it in two leaves

00:15:05,630 --> 00:15:11,540
document IDs so obvious is saying is

00:15:08,810 --> 00:15:14,060
that the dollar Maude dollar ID comma 2

00:15:11,540 --> 00:15:16,250
comma 1 that part very is basically

00:15:14,060 --> 00:15:19,790
saying is the document ID even or odd

00:15:16,250 --> 00:15:21,590
and if it's 1 then we set the field

00:15:19,790 --> 00:15:23,180
names and if isn't we set the field

00:15:21,590 --> 00:15:28,040
names to empty which means it looks for

00:15:23,180 --> 00:15:29,840
field names actually in there and with

00:15:28,040 --> 00:15:38,960
those two you basically get research I

00:15:29,840 --> 00:15:40,100
had but without the wiki part so there's

00:15:38,960 --> 00:15:41,540
some fairly obvious improvements we can

00:15:40,100 --> 00:15:44,990
make this it really is just a prototype

00:15:41,540 --> 00:15:46,940
at this point we could align the data

00:15:44,990 --> 00:15:48,560
formats better there's not really a good

00:15:46,940 --> 00:15:52,130
reason to do it differently in both ways

00:15:48,560 --> 00:15:53,570
and for a various fields which are

00:15:52,130 --> 00:15:58,310
present in some but not in others but a

00:15:53,570 --> 00:16:00,170
meaningful in both cases things like

00:15:58,310 --> 00:16:02,720
timestamps and languages aren't stored

00:16:00,170 --> 00:16:04,430
in entirely the same way and that means

00:16:02,720 --> 00:16:07,970
that I can't do a sorted search of this

00:16:04,430 --> 00:16:09,530
because to sort by date I need the same

00:16:07,970 --> 00:16:13,310
date format on both of them may use

00:16:09,530 --> 00:16:17,840
different ones it would be nice to have

00:16:13,310 --> 00:16:19,400
a UI though each layer to select which

00:16:17,840 --> 00:16:20,750
data sources you want because in some

00:16:19,400 --> 00:16:26,000
searches you don't want to search

00:16:20,750 --> 00:16:27,470
Seifert mailing lists and if that

00:16:26,000 --> 00:16:32,420
results for mailing lists we just

00:16:27,470 --> 00:16:34,070
distract for you it would also be good

00:16:32,420 --> 00:16:37,700
to add some more data sources to this I

00:16:34,070 --> 00:16:38,870
did start to look up the search for the

00:16:37,700 --> 00:16:40,820
packages that they're being at all but

00:16:38,870 --> 00:16:42,530
then I realized but I'd have to sort out

00:16:40,820 --> 00:16:45,580
with - I'm pickling I had to cut most of

00:16:42,530 --> 00:16:45,580
them yesterday afternoon

00:16:50,820 --> 00:16:56,170
and to make this into a system which is

00:16:53,709 --> 00:16:57,730
more from religious to demo we really

00:16:56,170 --> 00:16:59,620
want to have these databases on a common

00:16:57,730 --> 00:17:01,209
server rather than searching remotely

00:16:59,620 --> 00:17:02,800
we're searching remotely we get into

00:17:01,209 --> 00:17:04,660
issues if one service down and the other

00:17:02,800 --> 00:17:07,410
side I can talk to it and how the

00:17:04,660 --> 00:17:07,410
fallback works

00:17:07,480 --> 00:17:20,740
we're already replicating the databases

00:17:10,299 --> 00:17:22,630
for the web search I'm sorry we're ready

00:17:20,740 --> 00:17:25,120
replicating the databases for the web

00:17:22,630 --> 00:17:32,110
search so wouldn't be a hard to set that

00:17:25,120 --> 00:17:33,460
up to replicate the others and it'll be

00:17:32,110 --> 00:17:36,429
good to have some diversification of

00:17:33,460 --> 00:17:38,500
results because we basically write too

00:17:36,429 --> 00:17:39,700
much email and say all the results tend

00:17:38,500 --> 00:17:41,530
to get a little bit's for my results

00:17:39,700 --> 00:17:43,030
from email and it would be generally be

00:17:41,530 --> 00:17:44,169
good if the first page offers use some

00:17:43,030 --> 00:17:47,830
of you may results and some weekly

00:17:44,169 --> 00:17:49,270
results and so forth if anyone's

00:17:47,830 --> 00:17:51,210
interested in helping out with some help

00:17:49,270 --> 00:17:53,679
we very welcome

00:17:51,210 --> 00:17:55,419
with various skills required you don't

00:17:53,679 --> 00:17:59,370
need to know that being very well to

00:17:55,419 --> 00:17:59,370
help necessarily

00:18:04,680 --> 00:18:10,910
and that's really to pop some questions

00:18:11,000 --> 00:18:15,930
I'd like to thank stage 4 stage my DSA

00:18:14,490 --> 00:18:18,440
team for sorting me out with access to

00:18:15,930 --> 00:18:22,490
wiki machine without which a pod for

00:18:18,440 --> 00:18:25,650
demo in Divina wouldn't be impossible

00:18:22,490 --> 00:18:28,560
there's a sapiens off this afternoon at

00:18:25,650 --> 00:18:31,050
3:30 to 4:00 and Amsterdam which is

00:18:28,560 --> 00:18:33,990
slightly obscure if you walk down the

00:18:31,050 --> 00:18:35,610
hallway there's some vending machines

00:18:33,990 --> 00:18:37,410
and was a doorway just before them and

00:18:35,610 --> 00:18:41,730
the site little science is Amsterdam you

00:18:37,410 --> 00:18:43,350
go up the stairs you'll find out more as

00:18:41,730 --> 00:18:44,730
a peon website which is happy no talk

00:18:43,350 --> 00:18:47,010
there's an IRC channel on freenode

00:18:44,730 --> 00:18:51,750
there's mailing lists and I'll be here

00:18:47,010 --> 00:18:54,530
all week until week on Sunday so if you

00:18:51,750 --> 00:18:54,530
know us only questions

00:19:04,230 --> 00:19:09,330
hi so all he knows who I am but for

00:19:06,899 --> 00:19:11,789
those who don't I'm David Bremner I'm

00:19:09,330 --> 00:19:13,769
one of the not much developers so thanks

00:19:11,789 --> 00:19:15,450
for adding us to the longtail there I

00:19:13,769 --> 00:19:18,000
think you probably did that just because

00:19:15,450 --> 00:19:20,510
I was here that was actually where you

00:19:18,000 --> 00:19:26,250
were in the pop composition roughly

00:19:20,510 --> 00:19:29,850
right okay so I wondered about using one

00:19:26,250 --> 00:19:34,710
of the libraries built on top of sapiens

00:19:29,850 --> 00:19:38,639
that provides threaded search results if

00:19:34,710 --> 00:19:41,580
that would be a useful addition so in

00:19:38,639 --> 00:19:46,169
terms of presenting the results of mail

00:19:41,580 --> 00:19:49,590
search there's tools new and not much

00:19:46,169 --> 00:19:52,559
which are both in Debian which can give

00:19:49,590 --> 00:19:54,299
you a nice threaded view and then of

00:19:52,559 --> 00:19:57,380
course you have HTML issues about how to

00:19:54,299 --> 00:19:59,460
present those threads but still yeah I

00:19:57,380 --> 00:20:01,590
think that would be interesting it's

00:19:59,460 --> 00:20:03,929
it's also another way to deal with the

00:20:01,590 --> 00:20:05,220
they kind of avalanche of mail results

00:20:03,929 --> 00:20:10,799
you get is but a lot of them tend to be

00:20:05,220 --> 00:20:15,000
in the same threads and so a bit of a

00:20:10,799 --> 00:20:16,350
cold amount and really you don't want

00:20:15,000 --> 00:20:17,669
actually every message I'm afraid you

00:20:16,350 --> 00:20:18,990
want to collapse it down to show that

00:20:17,669 --> 00:20:21,110
this is a thread which is discussing

00:20:18,990 --> 00:20:21,110
this

00:20:29,190 --> 00:20:38,140
any other questions the problem you've

00:20:35,290 --> 00:20:39,880
got with the DFS G searching would it

00:20:38,140 --> 00:20:41,860
help if you had a distant in him for

00:20:39,880 --> 00:20:44,700
Debian free software guidelines to the

00:20:41,860 --> 00:20:48,010
list of synonyms and when it's indexed

00:20:44,700 --> 00:20:50,260
yes it probably is a synonym feature

00:20:48,010 --> 00:20:52,870
which works as search time often indexed

00:20:50,260 --> 00:21:02,310
time but yes I probably would help

00:20:52,870 --> 00:21:02,310
actually I'll make a note of that

00:21:05,350 --> 00:21:12,309
it's the source code for this demo

00:21:07,330 --> 00:21:13,809
available as it in get it isn't

00:21:12,309 --> 00:21:16,419
currently but it's a very small patch

00:21:13,809 --> 00:21:18,789
which all will mark available and I'm

00:21:16,419 --> 00:21:20,380
would adding some you've got you've got

00:21:18,789 --> 00:21:24,760
the source to the try it at home bit

00:21:20,380 --> 00:21:30,520
anyway okay which is where is that what

00:21:24,760 --> 00:21:33,250
was on the slide would it adding weights

00:21:30,520 --> 00:21:36,789
help could you wait the results from the

00:21:33,250 --> 00:21:38,559
the website heavier than the lists so

00:21:36,789 --> 00:21:44,559
give the lists an or point five waiting

00:21:38,559 --> 00:21:45,909
and we tend to get yes you could that

00:21:44,559 --> 00:21:48,100
the trick is to how to pick those

00:21:45,909 --> 00:21:50,110
weights there's a there's quite a

00:21:48,100 --> 00:21:51,280
popular area in academic research and

00:21:50,110 --> 00:21:53,620
then which is called learning to rank

00:21:51,280 --> 00:21:55,870
where you basically put all your waiting

00:21:53,620 --> 00:21:57,789
factors into machine learning and feed

00:21:55,870 --> 00:21:59,830
it to training set them in it it rejects

00:21:57,789 --> 00:22:01,780
all your factors so that would probably

00:21:59,830 --> 00:22:03,190
be the way to adjust the weights would

00:22:01,780 --> 00:22:05,169
be to simply get a machine learning

00:22:03,190 --> 00:22:07,179
thing to decide them for you probably

00:22:05,169 --> 00:22:08,260
thinking well but really is but they

00:22:07,179 --> 00:22:09,760
look great for the case you're looking

00:22:08,260 --> 00:22:15,549
at and then all the other cases will

00:22:09,760 --> 00:22:18,070
just get worse and are you thinking of

00:22:15,549 --> 00:22:19,659
adding search facets so that you know

00:22:18,070 --> 00:22:21,820
you could have a list of different

00:22:19,659 --> 00:22:23,289
facets like this is number of results

00:22:21,820 --> 00:22:26,919
we've got from lists and this is the

00:22:23,289 --> 00:22:29,350
number from from the wiki I hadn't

00:22:26,919 --> 00:22:32,820
thought about it but we could there are

00:22:29,350 --> 00:22:32,820
features exactly I'm allowed to do that

00:22:35,880 --> 00:22:46,120
so I maintain sort of the happen index

00:22:43,179 --> 00:22:48,070
and the query tool for it and I noticed

00:22:46,120 --> 00:22:50,200
that writing the software is reasonably

00:22:48,070 --> 00:22:54,130
easy but tuning it is an entirely

00:22:50,200 --> 00:22:58,799
different thing and I sort of have a bit

00:22:54,130 --> 00:22:58,799
of a hard time staying on top of it so

00:22:58,890 --> 00:23:07,840
would there be so I kind of like to have

00:23:05,010 --> 00:23:11,230
some people that occasionally try out

00:23:07,840 --> 00:23:13,480
these query things and figure out oh

00:23:11,230 --> 00:23:15,820
it's actually useless because you can't

00:23:13,480 --> 00:23:17,910
find things but it could be easily fixed

00:23:15,820 --> 00:23:19,810
by tuning

00:23:17,910 --> 00:23:23,500
indexing in this or that way or

00:23:19,810 --> 00:23:25,240
searching in this or that way we don't

00:23:23,500 --> 00:23:27,610
get very much feedback about bad

00:23:25,240 --> 00:23:29,260
searches from what I've seen yeah

00:23:27,610 --> 00:23:32,620
so I'm not sure how we can encourage

00:23:29,260 --> 00:23:35,440
people to and and finally the average

00:23:32,620 --> 00:23:37,620
user wouldn't know how to tune because

00:23:35,440 --> 00:23:42,010
there's a bit of no knowledge involved I

00:23:37,620 --> 00:23:44,020
would I would kind of like to have a

00:23:42,010 --> 00:23:47,740
group of people in Debian that kind of

00:23:44,020 --> 00:23:51,400
read up get a little bit of training on

00:23:47,740 --> 00:23:54,100
how to tell like good results from bad

00:23:51,400 --> 00:23:56,770
results and how to have a look at the

00:23:54,100 --> 00:23:58,660
indexing and propose things I don't know

00:23:56,770 --> 00:24:01,150
how that will help I don't know how to

00:23:58,660 --> 00:24:04,930
put that together but I can see that

00:24:01,150 --> 00:24:07,120
like 90% of the work is writing the code

00:24:04,930 --> 00:24:08,770
and the remaining 90% is tuning it and

00:24:07,120 --> 00:24:11,860
the remaining 90% to make it useful

00:24:08,770 --> 00:24:14,500
tends not to be done and I feel like I

00:24:11,860 --> 00:24:16,960
write lots of nice things that are

00:24:14,500 --> 00:24:19,360
nowhere near as useful as they could

00:24:16,960 --> 00:24:21,280
actually be so that's currently my

00:24:19,360 --> 00:24:26,560
concern and I don't know how to address

00:24:21,280 --> 00:24:28,720
it but I wanted to raise it it's

00:24:26,560 --> 00:24:31,770
probably quite an involved topping it's

00:24:28,720 --> 00:24:35,830
very worth discussing afterwards

00:24:31,770 --> 00:24:38,680
hi I'm video oh my so I'm sort of

00:24:35,830 --> 00:24:41,380
curious I mean Serbian is is totally

00:24:38,680 --> 00:24:43,240
cool technology and you know I couldn't

00:24:41,380 --> 00:24:45,850
live anymore without not much thanks

00:24:43,240 --> 00:24:48,070
David at all but I can't help wondering

00:24:45,850 --> 00:24:51,370
in the context of some of these searches

00:24:48,070 --> 00:24:54,400
to what extent does sort of relying

00:24:51,370 --> 00:24:57,160
fundamentally on a keyword oriented

00:24:54,400 --> 00:24:59,590
indexing mechanism sort of prevent us

00:24:57,160 --> 00:25:01,750
from being able to do other things that

00:24:59,590 --> 00:25:03,370
at least seem like they would be helpful

00:25:01,750 --> 00:25:06,130
and maybe it's just that I don't

00:25:03,370 --> 00:25:08,260
understand sort of the layering of what

00:25:06,130 --> 00:25:10,600
happens at sort of index bill time

00:25:08,260 --> 00:25:13,180
versus what extra intelligence is laid

00:25:10,600 --> 00:25:15,730
on at you know query and results

00:25:13,180 --> 00:25:17,740
integrating time but it seems to me for

00:25:15,730 --> 00:25:20,290
example then in the DFS G case a

00:25:17,740 --> 00:25:22,570
document whose title is Debian free

00:25:20,290 --> 00:25:24,850
software guidelines ought to carry more

00:25:22,570 --> 00:25:26,620
weight in search results than a document

00:25:24,850 --> 00:25:28,090
that makes reference to it so the

00:25:26,620 --> 00:25:30,940
documented question doesn't have that

00:25:28,090 --> 00:25:33,530
title it has the title

00:25:30,940 --> 00:25:35,420
okay yes it's an it's an indicator con

00:25:33,530 --> 00:25:37,550
SM know the Debian free software

00:25:35,420 --> 00:25:40,010
guidelines was originally an appendix to

00:25:37,550 --> 00:25:42,770
the social contract yes actually have a

00:25:40,010 --> 00:25:44,990
section title okay so these things not

00:25:42,770 --> 00:25:46,340
the page title right exactly but so this

00:25:44,990 --> 00:25:48,350
is the question that I'm asking though

00:25:46,340 --> 00:25:50,510
is it we somehow

00:25:48,350 --> 00:25:52,520
is there something strangely limiting

00:25:50,510 --> 00:25:56,000
about using something that's essentially

00:25:52,520 --> 00:25:58,520
just the underwear the underlying

00:25:56,000 --> 00:26:02,780
indexing technology is essentially just

00:25:58,520 --> 00:26:05,030
a text indexing thing or am I just being

00:26:02,780 --> 00:26:06,770
stupid and thinking that there's sort of

00:26:05,030 --> 00:26:08,780
a bunch of obvious optimizations here

00:26:06,770 --> 00:26:13,370
you'd want to use that might go against

00:26:08,780 --> 00:26:15,440
that model so I think we should make

00:26:13,370 --> 00:26:17,960
more use for the other information what

00:26:15,440 --> 00:26:19,580
we have so for example we have web looks

00:26:17,960 --> 00:26:23,000
that tell us what pages people look at

00:26:19,580 --> 00:26:25,250
and we have links in the pages that give

00:26:23,000 --> 00:26:27,650
us information about what other pages

00:26:25,250 --> 00:26:33,860
are about so I think we should make use

00:26:27,650 --> 00:26:36,050
of those and technically is that

00:26:33,860 --> 00:26:38,000
something that gets layered somehow into

00:26:36,050 --> 00:26:40,340
the search interface that we're using to

00:26:38,000 --> 00:26:43,040
access the underlying Sapien index or

00:26:40,340 --> 00:26:45,490
does that involve putting some kind of

00:26:43,040 --> 00:26:48,230
extra information into the index itself

00:26:45,490 --> 00:26:53,120
it's probably mostly an indexing side

00:26:48,230 --> 00:26:56,270
thing yeah

00:26:53,120 --> 00:27:01,310
and the DFA viddy FSG case is quite

00:26:56,270 --> 00:27:02,900
frustrating we do we do give extra way

00:27:01,310 --> 00:27:05,450
to document titles we don't give extra

00:27:02,900 --> 00:27:07,640
weight to section headings in them so

00:27:05,450 --> 00:27:10,610
that could help I've done some work in

00:27:07,640 --> 00:27:12,260
the past where it would actually look

00:27:10,610 --> 00:27:13,820
more at words near the beginning of the

00:27:12,260 --> 00:27:15,170
page and section headings and Manistee

00:27:13,820 --> 00:27:16,490
got down the page it would care less and

00:27:15,170 --> 00:27:18,620
less and that works quite nicely

00:27:16,490 --> 00:27:19,850
especially if you you then quite

00:27:18,620 --> 00:27:22,700
aggressively cut off which words you

00:27:19,850 --> 00:27:24,170
care about at that particular case

00:27:22,700 --> 00:27:29,090
essentially what it is is it's two

00:27:24,170 --> 00:27:30,740
documents in one file so the search side

00:27:29,090 --> 00:27:33,020
the search would be happier about it if

00:27:30,740 --> 00:27:34,820
they were separate pages but I realize

00:27:33,020 --> 00:27:41,660
we shouldn't be changing a structure

00:27:34,820 --> 00:27:42,429
over the it does seem to me somehow

00:27:41,660 --> 00:27:43,690
though

00:27:42,429 --> 00:27:46,749
some of those sorts of tricks

00:27:43,690 --> 00:27:48,999
particularly in pages that are things

00:27:46,749 --> 00:27:52,389
like web or wiki pages that have an

00:27:48,999 --> 00:27:53,919
intentional structure and some hopefully

00:27:52,389 --> 00:27:56,019
some thought was sort of put into how

00:27:53,919 --> 00:27:58,389
the information is organized ought to be

00:27:56,019 --> 00:28:00,820
weighted higher than the randomness of

00:27:58,389 --> 00:28:03,100
email I too I'm frustrated sometimes at

00:28:00,820 --> 00:28:05,590
search results return sort of a sea of

00:28:03,100 --> 00:28:07,240
emails that might or might not be

00:28:05,590 --> 00:28:09,490
terribly relevant and then the thing

00:28:07,240 --> 00:28:12,220
you're really looking for is buried 100

00:28:09,490 --> 00:28:13,899
hits down so yeah I don't have great

00:28:12,220 --> 00:28:15,369
answers this is not a space I spent a

00:28:13,899 --> 00:28:17,799
lot of time thinking that I just can't

00:28:15,369 --> 00:28:19,330
help wondering I think waiting emails

00:28:17,799 --> 00:28:21,639
down a bit just because in general they

00:28:19,330 --> 00:28:25,360
probably not what you wanted is a good

00:28:21,639 --> 00:28:27,879
starting point in a combined search but

00:28:25,360 --> 00:28:30,809
if reading would be quite useful to we

00:28:27,879 --> 00:28:30,809

YouTube URL: https://www.youtube.com/watch?v=I9KQwD0AwJY


