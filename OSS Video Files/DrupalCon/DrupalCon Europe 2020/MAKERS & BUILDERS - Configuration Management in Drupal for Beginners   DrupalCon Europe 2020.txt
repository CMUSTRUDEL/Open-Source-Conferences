Title: MAKERS & BUILDERS - Configuration Management in Drupal for Beginners   DrupalCon Europe 2020
Publication date: 2021-01-13
Playlist: DrupalCon Europe 2020
Description: 
	You just finished building a feature that has taken months to get right. Your work in the development environment is approved and you're ready to take it to production.
Captions: 
	00:00:04,059 --> 00:00:09,889
[Music]

00:00:12,799 --> 00:00:17,199
hello everyone and welcome to

00:00:14,480 --> 00:00:20,240
configuration management in drupal for

00:00:17,199 --> 00:00:21,840
beginners this is a session that i am

00:00:20,240 --> 00:00:24,080
particularly excited about and

00:00:21,840 --> 00:00:24,880
passionate about because it marked a

00:00:24,080 --> 00:00:28,240
time

00:00:24,880 --> 00:00:29,920
in my life as a drupal site builder as a

00:00:28,240 --> 00:00:32,960
drupal developer

00:00:29,920 --> 00:00:35,360
of growth because prior to

00:00:32,960 --> 00:00:37,840
configuration management i had to do a

00:00:35,360 --> 00:00:39,760
lot of configuration on my drupal site

00:00:37,840 --> 00:00:40,559
more than once or i had to do the work

00:00:39,760 --> 00:00:42,559
directly

00:00:40,559 --> 00:00:44,000
in the live environment which everybody

00:00:42,559 --> 00:00:45,920
should know is a very bad idea

00:00:44,000 --> 00:00:47,039
it's very risky it's a little bit

00:00:45,920 --> 00:00:49,280
dangerous

00:00:47,039 --> 00:00:51,120
so configuration management was

00:00:49,280 --> 00:00:52,320
important to me because it allowed me to

00:00:51,120 --> 00:00:54,239
do my work

00:00:52,320 --> 00:00:56,640
once it allowed me to move that

00:00:54,239 --> 00:00:59,440
configuration from one environment from

00:00:56,640 --> 00:00:59,840
staging to live or from local to live

00:00:59,440 --> 00:01:03,199
and

00:00:59,840 --> 00:01:05,680
not have to do it multiple times or

00:01:03,199 --> 00:01:07,439
risk doing it directly on the live site

00:01:05,680 --> 00:01:08,640
so let's actually start by going through

00:01:07,439 --> 00:01:11,760
an introduction

00:01:08,640 --> 00:01:15,119
of what configuration management is

00:01:11,760 --> 00:01:18,479
generally and what the problem is

00:01:15,119 --> 00:01:20,320
and maybe even some solutions first

00:01:18,479 --> 00:01:22,560
hello everyone my name is david needham

00:01:20,320 --> 00:01:24,640
i'm a developer advocate at pantheon

00:01:22,560 --> 00:01:26,799
i'm based out of champaign illinois

00:01:24,640 --> 00:01:28,479
which is just a couple hours south of

00:01:26,799 --> 00:01:32,079
chicago illinois

00:01:28,479 --> 00:01:34,000
in the united states i as a developer

00:01:32,079 --> 00:01:37,200
advocate i spend a fair bit of time

00:01:34,000 --> 00:01:39,680
presenting at conferences just like this

00:01:37,200 --> 00:01:41,680
all over the world i spend a lot of time

00:01:39,680 --> 00:01:43,200
working on our training materials so i

00:01:41,680 --> 00:01:44,240
spend a lot of time creating new

00:01:43,200 --> 00:01:46,479
workshops

00:01:44,240 --> 00:01:48,399
at pantheon taking everything that i

00:01:46,479 --> 00:01:51,600
learn being an employee here

00:01:48,399 --> 00:01:54,000
and kind of volunteer in the community

00:01:51,600 --> 00:01:55,840
i go out and present and help organize

00:01:54,000 --> 00:01:56,960
camps and conferences and other training

00:01:55,840 --> 00:01:59,680
workshops

00:01:56,960 --> 00:02:01,280
that's what i'm most excited about so

00:01:59,680 --> 00:02:02,960
with the introduction out of the way

00:02:01,280 --> 00:02:04,159
if you'd like to grab my slides or

00:02:02,960 --> 00:02:04,880
anything like that you can go to my

00:02:04,159 --> 00:02:08,800
website

00:02:04,880 --> 00:02:11,280
david needham dot me slash dceu

00:02:08,800 --> 00:02:12,080
2020 you can grab the slides and i'll

00:02:11,280 --> 00:02:15,120
have that link

00:02:12,080 --> 00:02:17,120
at the end of the presentation as well

00:02:15,120 --> 00:02:18,640
so let's talk about the anatomy of a

00:02:17,120 --> 00:02:21,680
content management system

00:02:18,640 --> 00:02:23,840
so this is not specifically

00:02:21,680 --> 00:02:25,840
you know just drupal this is relevant

00:02:23,840 --> 00:02:27,360
for pretty much any content management

00:02:25,840 --> 00:02:29,440
system that i'm aware of

00:02:27,360 --> 00:02:31,120
but as you're going through and creating

00:02:29,440 --> 00:02:32,800
your content management system or

00:02:31,120 --> 00:02:34,800
interacting with it you know kind of

00:02:32,800 --> 00:02:37,040
fleshing it out and building your site

00:02:34,800 --> 00:02:38,160
it's made up of three parts there's code

00:02:37,040 --> 00:02:41,760
which in drupal

00:02:38,160 --> 00:02:44,000
makes up the modules the themes

00:02:41,760 --> 00:02:44,800
basically any of the code that you are

00:02:44,000 --> 00:02:46,640
modifying

00:02:44,800 --> 00:02:47,920
to make your website a little bit

00:02:46,640 --> 00:02:50,239
special

00:02:47,920 --> 00:02:52,000
there's also configuration which in

00:02:50,239 --> 00:02:54,640
drupal refers to

00:02:52,000 --> 00:02:56,400
content types you have fields on those

00:02:54,640 --> 00:02:57,920
content types there's views

00:02:56,400 --> 00:03:00,640
there's all sorts of things that you're

00:02:57,920 --> 00:03:01,760
changing as part of your configuration

00:03:00,640 --> 00:03:04,159
on your site

00:03:01,760 --> 00:03:06,000
and then there's also content which

00:03:04,159 --> 00:03:07,120
maybe is self-explanatory but that's

00:03:06,000 --> 00:03:09,920
your blog post

00:03:07,120 --> 00:03:12,159
if you have a store it might be products

00:03:09,920 --> 00:03:14,879
you might have individual user accounts

00:03:12,159 --> 00:03:16,239
customers things like that all of that

00:03:14,879 --> 00:03:19,280
is counted as

00:03:16,239 --> 00:03:21,120
content and when you start

00:03:19,280 --> 00:03:23,360
trying to export your site you know

00:03:21,120 --> 00:03:24,959
maybe you're in drush you do a drush

00:03:23,360 --> 00:03:26,640
archive dump

00:03:24,959 --> 00:03:29,120
maybe you're working locally you want to

00:03:26,640 --> 00:03:30,799
get it up to your production site

00:03:29,120 --> 00:03:32,319
you know there's lots of reasons why you

00:03:30,799 --> 00:03:34,799
might want to export your site but

00:03:32,319 --> 00:03:35,840
the export is is made up of three parts

00:03:34,799 --> 00:03:37,840
there's code

00:03:35,840 --> 00:03:39,440
there's the database and there's the

00:03:37,840 --> 00:03:41,120
files

00:03:39,440 --> 00:03:43,280
now how do these actually map to each

00:03:41,120 --> 00:03:44,080
other well the code goes to code of

00:03:43,280 --> 00:03:46,159
course

00:03:44,080 --> 00:03:47,200
but the configuration goes to the

00:03:46,159 --> 00:03:49,200
database

00:03:47,200 --> 00:03:51,120
drupal is actively reading your

00:03:49,200 --> 00:03:51,920
configuration changes directly from the

00:03:51,120 --> 00:03:54,000
database

00:03:51,920 --> 00:03:56,879
whenever you make a configuration change

00:03:54,000 --> 00:03:58,720
it is getting saved to the database

00:03:56,879 --> 00:04:01,040
and you know that's that's how it's all

00:03:58,720 --> 00:04:02,959
being saved when you export it you grab

00:04:01,040 --> 00:04:05,120
a copy of the database so that you get

00:04:02,959 --> 00:04:06,159
all of that configuration but the

00:04:05,120 --> 00:04:08,480
problem

00:04:06,159 --> 00:04:09,680
is that your content is also being saved

00:04:08,480 --> 00:04:12,720
in the database

00:04:09,680 --> 00:04:14,159
you're stuck because you can't overwrite

00:04:12,720 --> 00:04:16,079
the live database

00:04:14,159 --> 00:04:17,840
because that would overwrite the content

00:04:16,079 --> 00:04:20,000
and if people are actively

00:04:17,840 --> 00:04:21,440
adding content on your live site or

00:04:20,000 --> 00:04:23,919
buying things from a store

00:04:21,440 --> 00:04:24,880
or leaving comments on your website

00:04:23,919 --> 00:04:27,120
you're you're

00:04:24,880 --> 00:04:28,800
kind of stuck a little bit so you you

00:04:27,120 --> 00:04:31,280
can't overwrite the database

00:04:28,800 --> 00:04:31,919
and then also content is writing to

00:04:31,280 --> 00:04:34,000
files

00:04:31,919 --> 00:04:35,919
which in drupal you know you upload an

00:04:34,000 --> 00:04:37,680
image or a pdf that gets saved in the

00:04:35,919 --> 00:04:40,479
files directory

00:04:37,680 --> 00:04:42,000
it's that sort of thing so as we start

00:04:40,479 --> 00:04:44,880
looking at a

00:04:42,000 --> 00:04:46,560
sort of modern development workflow we

00:04:44,880 --> 00:04:49,360
have three environments there's

00:04:46,560 --> 00:04:50,479
development or dev there's test and

00:04:49,360 --> 00:04:52,800
there's live

00:04:50,479 --> 00:04:53,600
now you're actively doing your work in

00:04:52,800 --> 00:04:55,520
the dev

00:04:53,600 --> 00:04:57,120
environment that's where you're doing

00:04:55,520 --> 00:04:58,960
your code that's where you're building

00:04:57,120 --> 00:05:01,199
out new functionality maybe applying

00:04:58,960 --> 00:05:02,800
security updates and all that stuff

00:05:01,199 --> 00:05:04,560
the live environment is where people are

00:05:02,800 --> 00:05:06,160
interacting with your site directly

00:05:04,560 --> 00:05:08,080
buying things from that store leaving

00:05:06,160 --> 00:05:09,759
those comments things like that

00:05:08,080 --> 00:05:11,919
and then the test environment becomes a

00:05:09,759 --> 00:05:12,880
safe place where those two things can

00:05:11,919 --> 00:05:14,720
come together

00:05:12,880 --> 00:05:16,479
so that you can experiment and make sure

00:05:14,720 --> 00:05:17,039
that your site changes that you're

00:05:16,479 --> 00:05:18,960
making

00:05:17,039 --> 00:05:20,479
are not going to break the live site

00:05:18,960 --> 00:05:23,600
before you actually deploy

00:05:20,479 --> 00:05:24,720
to live so the way that this works and

00:05:23,600 --> 00:05:26,320
you know it's

00:05:24,720 --> 00:05:28,639
no coincidence that this is what

00:05:26,320 --> 00:05:30,960
pantheon does you know pantheon provides

00:05:28,639 --> 00:05:32,479
this workflow out of the box but this is

00:05:30,960 --> 00:05:33,360
the best practice workflow i learned

00:05:32,479 --> 00:05:36,000
about before

00:05:33,360 --> 00:05:36,400
pantheon even existed as a company so

00:05:36,000 --> 00:05:38,080
this

00:05:36,400 --> 00:05:40,320
should be something you can get set up

00:05:38,080 --> 00:05:41,600
regardless of if you're on pantheon or

00:05:40,320 --> 00:05:44,400
somewhere else

00:05:41,600 --> 00:05:45,919
but uh as part of this workflow going

00:05:44,400 --> 00:05:47,840
through you're doing your work in dev

00:05:45,919 --> 00:05:49,120
your you know live stuff is happening in

00:05:47,840 --> 00:05:50,880
live you are

00:05:49,120 --> 00:05:51,840
syncing your files and database down

00:05:50,880 --> 00:05:53,440
from the test environment you're

00:05:51,840 --> 00:05:55,680
effectively rebuilding

00:05:53,440 --> 00:05:57,680
the test environment pretty regularly as

00:05:55,680 --> 00:06:00,160
a copy of live because you want to make

00:05:57,680 --> 00:06:02,160
sure that any changes you're making

00:06:00,160 --> 00:06:03,759
if there's a problem with it it's going

00:06:02,160 --> 00:06:06,319
to break the test site

00:06:03,759 --> 00:06:08,240
not the live site so when our

00:06:06,319 --> 00:06:11,280
development work is done we deploy

00:06:08,240 --> 00:06:13,680
that code up to our test environment

00:06:11,280 --> 00:06:14,400
because test is a fresh copy of live it

00:06:13,680 --> 00:06:16,720
should be

00:06:14,400 --> 00:06:17,600
the exact same situation we we know it's

00:06:16,720 --> 00:06:19,199
going to happen

00:06:17,600 --> 00:06:21,360
before we actually risk deploying to

00:06:19,199 --> 00:06:23,120
live and so we have a chance to test

00:06:21,360 --> 00:06:24,880
we have a chance to make sure you know

00:06:23,120 --> 00:06:27,520
that it's not going to cause any

00:06:24,880 --> 00:06:29,759
unexpected side effects and when we're

00:06:27,520 --> 00:06:31,759
confident that all of our code changes

00:06:29,759 --> 00:06:32,800
all of our you know improvements that

00:06:31,759 --> 00:06:34,800
we're making to the site

00:06:32,800 --> 00:06:36,080
are not actually going to break anything

00:06:34,800 --> 00:06:38,240
then we can safely

00:06:36,080 --> 00:06:39,759
deploy that up to the live environment

00:06:38,240 --> 00:06:41,919
and then you know make a copy

00:06:39,759 --> 00:06:43,840
you know rebuild our dev dev sites that

00:06:41,919 --> 00:06:44,880
we're developing against a recent copy

00:06:43,840 --> 00:06:48,319
of live

00:06:44,880 --> 00:06:50,560
and this is great this workflow is

00:06:48,319 --> 00:06:52,319
sort of the the best practice way of

00:06:50,560 --> 00:06:54,319
doing this sort of thing

00:06:52,319 --> 00:06:55,759
and that is wonderful this was a huge

00:06:54,319 --> 00:06:57,919
improvement over the sorts of

00:06:55,759 --> 00:07:01,759
development that i did prior to this

00:06:57,919 --> 00:07:05,440
however what about configuration

00:07:01,759 --> 00:07:07,280
well in this workflow when you are doing

00:07:05,440 --> 00:07:08,880
active configuration you might recall

00:07:07,280 --> 00:07:10,000
you know configuration gets saved into

00:07:08,880 --> 00:07:13,520
the database

00:07:10,000 --> 00:07:14,319
but the database it starts in the live

00:07:13,520 --> 00:07:16,639
environment

00:07:14,319 --> 00:07:18,319
and it goes down it only goes to the

00:07:16,639 --> 00:07:19,520
test it always goes down to the

00:07:18,319 --> 00:07:20,639
development environment

00:07:19,520 --> 00:07:22,479
and that's because we don't want to

00:07:20,639 --> 00:07:24,720
overwrite the database on live we don't

00:07:22,479 --> 00:07:27,520
want to lose that content there

00:07:24,720 --> 00:07:29,599
and so that's a problem it means that

00:07:27,520 --> 00:07:31,039
when we do configuration as part of this

00:07:29,599 --> 00:07:32,800
workflow

00:07:31,039 --> 00:07:34,639
we're doing it in dev because we don't

00:07:32,800 --> 00:07:36,479
want to

00:07:34,639 --> 00:07:38,720
make configuration changes on live

00:07:36,479 --> 00:07:41,680
that's very risky so we do it in dev

00:07:38,720 --> 00:07:42,560
but then we have to do it again in test

00:07:41,680 --> 00:07:44,800
and then

00:07:42,560 --> 00:07:46,879
we have to do it again in live we have

00:07:44,800 --> 00:07:48,479
to rebuild our configuration multiple

00:07:46,879 --> 00:07:49,759
times that's

00:07:48,479 --> 00:07:52,080
not really good that's that's

00:07:49,759 --> 00:07:53,840
demoralizing people don't like to do the

00:07:52,080 --> 00:07:55,039
same work more than once or at least i

00:07:53,840 --> 00:07:58,160
certainly don't like to do

00:07:55,039 --> 00:07:59,759
the same work more than once also the

00:07:58,160 --> 00:08:01,120
more times you have to redo something

00:07:59,759 --> 00:08:02,800
like that the more likely it is that

00:08:01,120 --> 00:08:04,240
you're going to make a mistake

00:08:02,800 --> 00:08:06,400
you're not going to do it exactly the

00:08:04,240 --> 00:08:08,800
same way that you did in dev

00:08:06,400 --> 00:08:10,400
and as part of this you start to ask

00:08:08,800 --> 00:08:12,560
yourself like well

00:08:10,400 --> 00:08:15,039
do we really need the test environment

00:08:12,560 --> 00:08:15,759
is do we really need to test again

00:08:15,039 --> 00:08:17,680
because

00:08:15,759 --> 00:08:18,879
i really don't want i i don't want to do

00:08:17,680 --> 00:08:20,639
it one more time

00:08:18,879 --> 00:08:22,319
let alone doing it two more times i

00:08:20,639 --> 00:08:23,759
don't have to rebuild that configuration

00:08:22,319 --> 00:08:25,120
so many more times

00:08:23,759 --> 00:08:27,840
and so you start to get a little bit

00:08:25,120 --> 00:08:28,319
lazy you start to not test as thoroughly

00:08:27,840 --> 00:08:31,120
as you

00:08:28,319 --> 00:08:32,159
should which results in mistakes it

00:08:31,120 --> 00:08:35,039
results in

00:08:32,159 --> 00:08:37,519
problems on your live production website

00:08:35,039 --> 00:08:41,279
which nobody wants

00:08:37,519 --> 00:08:44,399
so what's the solution to this well

00:08:41,279 --> 00:08:46,399
let's take a look at this chart again

00:08:44,399 --> 00:08:47,760
you know configuration as part of the

00:08:46,399 --> 00:08:49,920
standard practice

00:08:47,760 --> 00:08:51,360
gets saved into the database but with

00:08:49,920 --> 00:08:54,000
configuration management

00:08:51,360 --> 00:08:54,480
built within drupal core configuration

00:08:54,000 --> 00:08:57,200
gets

00:08:54,480 --> 00:08:59,519
moved over to code all of your

00:08:57,200 --> 00:09:01,760
configuration can be exported

00:08:59,519 --> 00:09:03,920
into code so that it moves through that

00:09:01,760 --> 00:09:04,880
workflow in a way that is easy for you

00:09:03,920 --> 00:09:06,160
to manage

00:09:04,880 --> 00:09:08,080
and it means that you don't have to

00:09:06,160 --> 00:09:10,240
recreate your work so

00:09:08,080 --> 00:09:12,320
if we take a look at how configuration

00:09:10,240 --> 00:09:14,320
management works

00:09:12,320 --> 00:09:15,519
on your drupal site well let's say

00:09:14,320 --> 00:09:16,959
you're going along you have your

00:09:15,519 --> 00:09:19,040
development environment or maybe your

00:09:16,959 --> 00:09:21,120
local environment if that's how you work

00:09:19,040 --> 00:09:23,360
you make changes you are building out a

00:09:21,120 --> 00:09:25,040
new content type with new fields you're

00:09:23,360 --> 00:09:26,399
adding some new functionality you're

00:09:25,040 --> 00:09:29,200
making changes

00:09:26,399 --> 00:09:31,120
throughout that process all that change

00:09:29,200 --> 00:09:33,600
is getting saved in the database

00:09:31,120 --> 00:09:34,640
and so when you're ready to go you can

00:09:33,600 --> 00:09:38,320
export

00:09:34,640 --> 00:09:39,920
that database configuration into code

00:09:38,320 --> 00:09:41,360
and then when you're ready to move it to

00:09:39,920 --> 00:09:43,760
the test environment you can

00:09:41,360 --> 00:09:45,600
deploy it to your your staging site your

00:09:43,760 --> 00:09:46,800
test site whatever your workflow might

00:09:45,600 --> 00:09:49,200
consist of

00:09:46,800 --> 00:09:51,200
and then you import configuration from

00:09:49,200 --> 00:09:54,240
code into the database because again

00:09:51,200 --> 00:09:56,720
drupal is reading from the database so

00:09:54,240 --> 00:09:58,399
the code allows us to move it safely

00:09:56,720 --> 00:10:00,160
from one space to the next

00:09:58,399 --> 00:10:02,160
and then we are always interacting with

00:10:00,160 --> 00:10:05,200
the database so that that is where

00:10:02,160 --> 00:10:06,720
drupal is actively reading from so if we

00:10:05,200 --> 00:10:08,800
take a look at that development workflow

00:10:06,720 --> 00:10:09,680
again but this time with configuration

00:10:08,800 --> 00:10:12,320
management

00:10:09,680 --> 00:10:13,040
we still have devtest in live but this

00:10:12,320 --> 00:10:15,279
time

00:10:13,040 --> 00:10:16,640
throughout our development cycle

00:10:15,279 --> 00:10:19,519
throughout our process

00:10:16,640 --> 00:10:21,920
we are actively exporting configuration

00:10:19,519 --> 00:10:23,120
we're making changes to the dev site or

00:10:21,920 --> 00:10:26,320
the local site

00:10:23,120 --> 00:10:27,440
but throughout the time we are exporting

00:10:26,320 --> 00:10:29,600
from the database

00:10:27,440 --> 00:10:30,480
into code and we might do that multiple

00:10:29,600 --> 00:10:33,360
times we might have

00:10:30,480 --> 00:10:35,200
multiple commits associated with that

00:10:33,360 --> 00:10:37,040
with the the various changes that we're

00:10:35,200 --> 00:10:38,399
making to our site

00:10:37,040 --> 00:10:40,480
and then you know the rest of the

00:10:38,399 --> 00:10:42,720
process is pretty similar we

00:10:40,480 --> 00:10:44,000
sync our files and database down from

00:10:42,720 --> 00:10:45,600
the live environment we're rebuilding

00:10:44,000 --> 00:10:47,440
the test environment making a

00:10:45,600 --> 00:10:49,519
copy of lives that we're working and

00:10:47,440 --> 00:10:52,959
testing against a site that's a

00:10:49,519 --> 00:10:55,200
representation of our live environment

00:10:52,959 --> 00:10:57,120
we deploy our code which in this case

00:10:55,200 --> 00:10:59,600
includes our configuration

00:10:57,120 --> 00:11:01,519
so we can then import our configuration

00:10:59,600 --> 00:11:03,600
into our test environment

00:11:01,519 --> 00:11:05,600
again go through and test make sure that

00:11:03,600 --> 00:11:07,519
everything's working try to break it

00:11:05,600 --> 00:11:08,720
if everything works well and there are

00:11:07,519 --> 00:11:10,880
no surprises

00:11:08,720 --> 00:11:11,839
we can then confidently deploy that up

00:11:10,880 --> 00:11:14,160
to the live and

00:11:11,839 --> 00:11:15,519
live environment and import our

00:11:14,160 --> 00:11:16,800
configuration there

00:11:15,519 --> 00:11:20,000
and we know we're not going to have any

00:11:16,800 --> 00:11:21,839
surprises we're not going to have any

00:11:20,000 --> 00:11:23,519
thing break as a result of importing

00:11:21,839 --> 00:11:25,760
this configuration because we've already

00:11:23,519 --> 00:11:30,480
done that in the test environment

00:11:25,760 --> 00:11:32,800
and this process works much better

00:11:30,480 --> 00:11:34,560
so let's talk briefly about the benefits

00:11:32,800 --> 00:11:36,240
of configuration management

00:11:34,560 --> 00:11:38,640
so first of all you get to move your

00:11:36,240 --> 00:11:40,640
configuration along with your module so

00:11:38,640 --> 00:11:42,480
if you are adding a new module to add

00:11:40,640 --> 00:11:44,800
some new piece of functionality

00:11:42,480 --> 00:11:46,160
uh you of course are configuring your

00:11:44,800 --> 00:11:48,880
site along with that

00:11:46,160 --> 00:11:50,800
you're able to export the configuration

00:11:48,880 --> 00:11:52,720
associated with that module

00:11:50,800 --> 00:11:54,720
along with that so it's a little bit

00:11:52,720 --> 00:11:56,240
more tidy the commits the deployments

00:11:54,720 --> 00:11:57,040
can make a little bit more sense because

00:11:56,240 --> 00:11:58,880
you're

00:11:57,040 --> 00:12:01,120
kind of bundling them together you don't

00:11:58,880 --> 00:12:02,320
have a bunch of random stuff you want a

00:12:01,120 --> 00:12:04,160
database dump here

00:12:02,320 --> 00:12:06,560
and your you know code there and things

00:12:04,160 --> 00:12:07,519
like that also you get to version

00:12:06,560 --> 00:12:10,399
control

00:12:07,519 --> 00:12:11,519
your configuration which is huge for two

00:12:10,399 --> 00:12:13,760
different reasons

00:12:11,519 --> 00:12:16,560
the first one is that you get to see who

00:12:13,760 --> 00:12:19,200
changed configuration on your website

00:12:16,560 --> 00:12:21,040
how often have you wondered who changed

00:12:19,200 --> 00:12:21,839
this particular section of the site or

00:12:21,040 --> 00:12:24,720
who

00:12:21,839 --> 00:12:25,920
made a uh an edit that broke this

00:12:24,720 --> 00:12:27,839
particular thing

00:12:25,920 --> 00:12:30,240
well with version controlled

00:12:27,839 --> 00:12:32,560
configuration you're able to see that

00:12:30,240 --> 00:12:33,920
also if someone did break something or

00:12:32,560 --> 00:12:37,440
if you want to go back you can

00:12:33,920 --> 00:12:39,519
revert configuration not just code

00:12:37,440 --> 00:12:41,519
but because configuration gets saved

00:12:39,519 --> 00:12:42,720
into code you're able to revert that and

00:12:41,519 --> 00:12:46,959
then re-import

00:12:42,720 --> 00:12:48,320
so you can undo configuration over time

00:12:46,959 --> 00:12:49,920
another benefit is that you get to

00:12:48,320 --> 00:12:51,279
rebuild the development environment

00:12:49,920 --> 00:12:54,000
whenever you want

00:12:51,279 --> 00:12:56,399
this might seem like a minor thing but

00:12:54,000 --> 00:12:59,040
developing actively developing against

00:12:56,399 --> 00:13:00,079
the most recent most active version of

00:12:59,040 --> 00:13:02,880
your live site

00:13:00,079 --> 00:13:03,440
can have very positive implications

00:13:02,880 --> 00:13:06,000
because

00:13:03,440 --> 00:13:07,680
if you are actively developing a module

00:13:06,000 --> 00:13:08,720
or you're actively building out some new

00:13:07,680 --> 00:13:10,800
part of the site

00:13:08,720 --> 00:13:13,120
while at the same time your content

00:13:10,800 --> 00:13:15,360
creators or your customers are doing

00:13:13,120 --> 00:13:16,320
interesting big things on the live

00:13:15,360 --> 00:13:19,360
environment

00:13:16,320 --> 00:13:20,720
as a traditional sort of like water flow

00:13:19,360 --> 00:13:22,160
stack of development where you have to

00:13:20,720 --> 00:13:23,600
get everything done before you can

00:13:22,160 --> 00:13:25,600
deploy

00:13:23,600 --> 00:13:27,040
it means that you might deploy something

00:13:25,600 --> 00:13:29,760
that is not quite lining up

00:13:27,040 --> 00:13:30,320
with what has changed on the live site

00:13:29,760 --> 00:13:31,920
this

00:13:30,320 --> 00:13:33,760
this way working with configuration

00:13:31,920 --> 00:13:36,240
management is much more agile

00:13:33,760 --> 00:13:37,360
you're able to actively sync your

00:13:36,240 --> 00:13:39,519
development environment

00:13:37,360 --> 00:13:40,880
with a copy from live at any point and

00:13:39,519 --> 00:13:42,880
then just re-import all the

00:13:40,880 --> 00:13:44,800
configuration changes you've made

00:13:42,880 --> 00:13:46,560
it means that you can sync up your

00:13:44,800 --> 00:13:48,560
development site or your local site

00:13:46,560 --> 00:13:50,160
with a copy of live anytime that you

00:13:48,560 --> 00:13:52,399
want and you'll always get

00:13:50,160 --> 00:13:54,160
up to date you can continue developing

00:13:52,399 --> 00:13:54,480
and then be on your way and you don't

00:13:54,160 --> 00:13:56,720
get

00:13:54,480 --> 00:13:58,399
stuck with those awkward sort of

00:13:56,720 --> 00:14:00,399
mismatches

00:13:58,399 --> 00:14:02,000
and then finally you can also automate

00:14:00,399 --> 00:14:04,160
your imports with drush and we'll talk

00:14:02,000 --> 00:14:04,480
about this in just a minute but drosh

00:14:04,160 --> 00:14:06,639
the

00:14:04,480 --> 00:14:08,639
drupal shell you're able to interact on

00:14:06,639 --> 00:14:12,160
the command line with your site

00:14:08,639 --> 00:14:13,600
and import and export your configuration

00:14:12,160 --> 00:14:15,279
but there are some gotchas to

00:14:13,600 --> 00:14:16,959
configuration management

00:14:15,279 --> 00:14:19,040
it is worth noting that config

00:14:16,959 --> 00:14:20,720
management only works

00:14:19,040 --> 00:14:23,279
to and from the same site and this is

00:14:20,720 --> 00:14:24,800
intentional um i mentioned you can grab

00:14:23,279 --> 00:14:25,600
my slides i'll have a link to the slides

00:14:24,800 --> 00:14:29,199
at the end but

00:14:25,600 --> 00:14:32,160
there was a great talk at drupalcon

00:14:29,199 --> 00:14:33,680
austin i believe where the team behind

00:14:32,160 --> 00:14:34,880
configuration management talked about

00:14:33,680 --> 00:14:36,959
this specifically

00:14:34,880 --> 00:14:38,399
shared their kind of logic behind it and

00:14:36,959 --> 00:14:39,680
there's more information there if you

00:14:38,399 --> 00:14:41,760
want to learn more

00:14:39,680 --> 00:14:43,120
also it's very important that you

00:14:41,760 --> 00:14:44,639
communicate with your team

00:14:43,120 --> 00:14:46,880
that you are using configuration

00:14:44,639 --> 00:14:48,880
management and that they understand how

00:14:46,880 --> 00:14:50,480
configuration management works and the

00:14:48,880 --> 00:14:53,120
reason for this is because

00:14:50,480 --> 00:14:54,320
you are actively importing exporting

00:14:53,120 --> 00:14:56,079
configuration

00:14:54,320 --> 00:14:57,680
you are deploying to a new site

00:14:56,079 --> 00:15:00,880
sometimes to the live site

00:14:57,680 --> 00:15:02,480
an importing configuration which is

00:15:00,880 --> 00:15:03,920
changing the way that people's

00:15:02,480 --> 00:15:05,680
configuration works

00:15:03,920 --> 00:15:09,600
it means that they could have changes on

00:15:05,680 --> 00:15:11,040
live that are actively being overwritten

00:15:09,600 --> 00:15:13,360
now nobody likes to do work more than

00:15:11,040 --> 00:15:16,240
once absolutely nobody

00:15:13,360 --> 00:15:17,360
likes to have their changes undone

00:15:16,240 --> 00:15:19,440
accidentally

00:15:17,360 --> 00:15:21,040
they don't like their work to be lost so

00:15:19,440 --> 00:15:22,480
it's very important that they understand

00:15:21,040 --> 00:15:23,360
that configuration should not be

00:15:22,480 --> 00:15:25,279
happening in live

00:15:23,360 --> 00:15:27,360
that you should be doing this in the dev

00:15:25,279 --> 00:15:29,440
site or your locally or

00:15:27,360 --> 00:15:30,959
whatever workflow it is that you have

00:15:29,440 --> 00:15:31,759
it's just important that they understand

00:15:30,959 --> 00:15:33,920
that their work

00:15:31,759 --> 00:15:35,759
their configuration could be overwritten

00:15:33,920 --> 00:15:39,120
unless they go through the proper

00:15:35,759 --> 00:15:40,240
workflow now another thing is that there

00:15:39,120 --> 00:15:42,000
are some areas

00:15:40,240 --> 00:15:43,360
to drupal that are a little bit

00:15:42,000 --> 00:15:46,560
ambiguous

00:15:43,360 --> 00:15:49,839
um blocks for example

00:15:46,560 --> 00:15:51,360
or taxonomy the menu system in some

00:15:49,839 --> 00:15:54,399
cases are those

00:15:51,360 --> 00:15:56,320
content or are those configuration

00:15:54,399 --> 00:15:57,920
well you know if you have a block that

00:15:56,320 --> 00:15:58,880
you put on the sidebar of your site and

00:15:57,920 --> 00:16:01,519
the text

00:15:58,880 --> 00:16:03,199
pretty much never changes if it's always

00:16:01,519 --> 00:16:04,320
a welcome message to your site or

00:16:03,199 --> 00:16:07,839
something like that

00:16:04,320 --> 00:16:08,720
that's probably configuration but if you

00:16:07,839 --> 00:16:11,279
have a block

00:16:08,720 --> 00:16:12,800
that is actively regularly changing out

00:16:11,279 --> 00:16:14,959
with new content and new things and

00:16:12,800 --> 00:16:18,240
maybe it's different on every page or

00:16:14,959 --> 00:16:19,360
that could be seen as content um

00:16:18,240 --> 00:16:20,880
it's a little ambiguous the

00:16:19,360 --> 00:16:22,320
configuration management system within

00:16:20,880 --> 00:16:23,279
drupal doesn't know what to do with that

00:16:22,320 --> 00:16:24,880
by default

00:16:23,279 --> 00:16:27,759
but there are some modules that you can

00:16:24,880 --> 00:16:29,839
add to define to say

00:16:27,759 --> 00:16:31,600
this is configuration this should be

00:16:29,839 --> 00:16:33,120
exported and imported

00:16:31,600 --> 00:16:34,880
so there are ways around this but it's

00:16:33,120 --> 00:16:36,000
worth remembering that there are some

00:16:34,880 --> 00:16:38,880
areas that are a little bit

00:16:36,000 --> 00:16:41,839
ambiguous that might not export

00:16:38,880 --> 00:16:43,519
automatically the way you'd expect it to

00:16:41,839 --> 00:16:45,440
now speaking of extra modules there are

00:16:43,519 --> 00:16:46,560
some ways to extend this process and go

00:16:45,440 --> 00:16:49,519
a little bit further

00:16:46,560 --> 00:16:50,720
there is the config direct save module

00:16:49,519 --> 00:16:52,480
this module makes

00:16:50,720 --> 00:16:53,759
the configuration configuration

00:16:52,480 --> 00:16:55,519
management system work

00:16:53,759 --> 00:16:57,920
the way that i personally would expect

00:16:55,519 --> 00:17:00,560
it to work by default

00:16:57,920 --> 00:17:01,199
when you go to export configuration on a

00:17:00,560 --> 00:17:04,720
site

00:17:01,199 --> 00:17:07,039
it will ask you to download a zip

00:17:04,720 --> 00:17:08,319
of the yaml files you have to download

00:17:07,039 --> 00:17:10,160
it to your computer

00:17:08,319 --> 00:17:11,679
and it's awkward because if you then

00:17:10,160 --> 00:17:12,959
want to import

00:17:11,679 --> 00:17:14,799
the configuration to your site if you

00:17:12,959 --> 00:17:16,880
want to show up in the

00:17:14,799 --> 00:17:18,720
in the correct folder on your site so

00:17:16,880 --> 00:17:20,000
you can actually commit it and deploy it

00:17:18,720 --> 00:17:21,039
and go through that process you then

00:17:20,000 --> 00:17:23,199
have to upload

00:17:21,039 --> 00:17:25,039
that zip so you you download a zip and

00:17:23,199 --> 00:17:27,439
then you upload a zip

00:17:25,039 --> 00:17:29,039
it's kind of weird i'm surprised that it

00:17:27,439 --> 00:17:30,480
works that way by default

00:17:29,039 --> 00:17:32,080
config direct save will give you a

00:17:30,480 --> 00:17:32,640
button so that all you have to do is

00:17:32,080 --> 00:17:35,520
click

00:17:32,640 --> 00:17:37,520
save and it will actually write the

00:17:35,520 --> 00:17:39,280
configuration directly to the config

00:17:37,520 --> 00:17:40,960
directory on your site

00:17:39,280 --> 00:17:42,480
instead of having to download and upload

00:17:40,960 --> 00:17:44,799
and do that sort of awkward

00:17:42,480 --> 00:17:46,000
dance there's another module that i

00:17:44,799 --> 00:17:48,160
recommend called

00:17:46,000 --> 00:17:50,240
configuration read-only mode this will

00:17:48,160 --> 00:17:52,960
make it so that your

00:17:50,240 --> 00:17:53,919
site builders your maybe customers that

00:17:52,960 --> 00:17:56,880
are using

00:17:53,919 --> 00:17:58,080
your site do not have access to change

00:17:56,880 --> 00:18:01,200
configuration

00:17:58,080 --> 00:18:02,480
that could be overwritten by an import

00:18:01,200 --> 00:18:04,240
this is important because it will sort

00:18:02,480 --> 00:18:05,360
of lock down the configuration of your

00:18:04,240 --> 00:18:08,720
live environment

00:18:05,360 --> 00:18:11,520
making it so that people don't have sad

00:18:08,720 --> 00:18:12,640
unexpected consequences to you know i

00:18:11,520 --> 00:18:14,559
made some change

00:18:12,640 --> 00:18:16,640
you didn't import now all of my changes

00:18:14,559 --> 00:18:18,240
are lost

00:18:16,640 --> 00:18:20,320
configuration read-only mode will make

00:18:18,240 --> 00:18:22,000
it so it's read-only they cannot make a

00:18:20,320 --> 00:18:25,200
configuration change unless you

00:18:22,000 --> 00:18:26,880
allow them to and maybe you know educate

00:18:25,200 --> 00:18:28,160
them at that point about your workflow

00:18:26,880 --> 00:18:31,280
so that they know the right way to do it

00:18:28,160 --> 00:18:33,039
so their changes are not lost

00:18:31,280 --> 00:18:35,760
and then another one here is config

00:18:33,039 --> 00:18:37,120
ignore in many cases you have

00:18:35,760 --> 00:18:38,799
modules that you have enabled on the

00:18:37,120 --> 00:18:39,520
development environment or on your local

00:18:38,799 --> 00:18:41,600
environment

00:18:39,520 --> 00:18:43,039
that you don't want to carry over to

00:18:41,600 --> 00:18:46,880
production you know

00:18:43,039 --> 00:18:49,840
one great example is maybe the views ui

00:18:46,880 --> 00:18:51,919
module the best practice in drupal says

00:18:49,840 --> 00:18:56,160
that you don't typically have those ui

00:18:51,919 --> 00:18:58,240
modules enabled on production on live

00:18:56,160 --> 00:18:59,520
for performance reasons but also so that

00:18:58,240 --> 00:19:02,080
you don't have people accidentally

00:18:59,520 --> 00:19:04,400
making configuration changes on live

00:19:02,080 --> 00:19:05,679
so you would probably have those enabled

00:19:04,400 --> 00:19:07,280
locally or on your development

00:19:05,679 --> 00:19:08,160
environment you don't have them enabled

00:19:07,280 --> 00:19:10,559
on live

00:19:08,160 --> 00:19:12,000
and you are set up to accidentally

00:19:10,559 --> 00:19:14,880
enable them on live by

00:19:12,000 --> 00:19:16,080
exporting your configuration on on dev

00:19:14,880 --> 00:19:18,000
importing it there

00:19:16,080 --> 00:19:19,120
uh you're very likely to make a mistake

00:19:18,000 --> 00:19:20,799
and accidentally

00:19:19,120 --> 00:19:22,240
have some configuration end up on live

00:19:20,799 --> 00:19:24,080
that you didn't want well

00:19:22,240 --> 00:19:25,679
configure ignore will let you define

00:19:24,080 --> 00:19:27,520
specific things and say

00:19:25,679 --> 00:19:28,960
i don't want these changes to be

00:19:27,520 --> 00:19:31,200
exported just

00:19:28,960 --> 00:19:32,799
ignore them completely that way any

00:19:31,200 --> 00:19:37,440
changes that i make to this section

00:19:32,799 --> 00:19:39,520
on my my dev site won't end up on live

00:19:37,440 --> 00:19:40,799
and then there's also the config split

00:19:39,520 --> 00:19:41,600
module and i'm not going to get too much

00:19:40,799 --> 00:19:43,840
into this but

00:19:41,600 --> 00:19:46,400
it allows for more advanced scenarios

00:19:43,840 --> 00:19:48,080
with using configuration management so

00:19:46,400 --> 00:19:49,760
you can dig more into these again you

00:19:48,080 --> 00:19:52,400
can get links to these

00:19:49,760 --> 00:19:53,280
in the slides at the end now i did

00:19:52,400 --> 00:19:55,520
mention drush

00:19:53,280 --> 00:19:56,880
and automation and things like that well

00:19:55,520 --> 00:19:57,760
here are the drush commands if you want

00:19:56,880 --> 00:20:00,080
to do a config

00:19:57,760 --> 00:20:01,760
import and export and this is what the

00:20:00,080 --> 00:20:02,960
workflow looks like when you're going

00:20:01,760 --> 00:20:05,840
through and using

00:20:02,960 --> 00:20:06,799
drush and if you can automate if you can

00:20:05,840 --> 00:20:09,120
kind of speed that up

00:20:06,799 --> 00:20:09,919
it works even better the key difference

00:20:09,120 --> 00:20:13,200
here is that

00:20:09,919 --> 00:20:16,320
the deploy code and import config

00:20:13,200 --> 00:20:18,080
is one step on pantheon we have a tool

00:20:16,320 --> 00:20:21,200
named quicksilver that lets you run

00:20:18,080 --> 00:20:22,080
scripts alongside any active workflow on

00:20:21,200 --> 00:20:24,320
pantheon

00:20:22,080 --> 00:20:25,440
so we have a script you can write a

00:20:24,320 --> 00:20:29,360
script it just uses

00:20:25,440 --> 00:20:31,679
a drush config import to automatically

00:20:29,360 --> 00:20:33,120
every time that you deploy to test or

00:20:31,679 --> 00:20:35,520
deploy to live

00:20:33,120 --> 00:20:37,520
it does a config import automatically

00:20:35,520 --> 00:20:39,600
this means you don't have to think about

00:20:37,520 --> 00:20:41,200
or remember to do that yourself

00:20:39,600 --> 00:20:42,960
but it also means that the other people

00:20:41,200 --> 00:20:44,320
on your team don't have to remember to

00:20:42,960 --> 00:20:46,400
do it they don't have to

00:20:44,320 --> 00:20:48,080
understand configuration management or

00:20:46,400 --> 00:20:50,799
know all the ins and outs

00:20:48,080 --> 00:20:51,760
or remember to do a drush config import

00:20:50,799 --> 00:20:54,880
it just happens

00:20:51,760 --> 00:20:55,679
every time that they deploy to test or

00:20:54,880 --> 00:20:57,039
to live

00:20:55,679 --> 00:20:58,880
and so you know quicksilver it's a

00:20:57,039 --> 00:21:00,400
pantheon thing but you know you can

00:20:58,880 --> 00:21:02,080
probably write scripts like that for

00:21:00,400 --> 00:21:03,760
just about any hosting platform

00:21:02,080 --> 00:21:05,919
you have out there so it's not really

00:21:03,760 --> 00:21:07,520
specific to pantheon

00:21:05,919 --> 00:21:09,600
but the important takeaway from this is

00:21:07,520 --> 00:21:10,080
that while this makes it easier for your

00:21:09,600 --> 00:21:12,720
team

00:21:10,080 --> 00:21:14,159
it makes it more convenient for you it's

00:21:12,720 --> 00:21:16,080
also an important

00:21:14,159 --> 00:21:18,159
if not essential part for actually

00:21:16,080 --> 00:21:20,400
automating testing

00:21:18,159 --> 00:21:22,559
if you want to have a visual regression

00:21:20,400 --> 00:21:25,360
test or a unit test or a

00:21:22,559 --> 00:21:27,360
b-hat test that runs automatically

00:21:25,360 --> 00:21:30,480
whenever you deploy to your test

00:21:27,360 --> 00:21:31,840
environment you cannot do that if you

00:21:30,480 --> 00:21:34,080
don't have your configuration be

00:21:31,840 --> 00:21:36,080
imported basically if you're

00:21:34,080 --> 00:21:37,679
if your configuration is still hanging

00:21:36,080 --> 00:21:39,679
out in a config file

00:21:37,679 --> 00:21:41,120
and it's not being imported when you

00:21:39,679 --> 00:21:42,559
deploy to test

00:21:41,120 --> 00:21:44,720
any automated tests that run

00:21:42,559 --> 00:21:46,480
automatically are not going to

00:21:44,720 --> 00:21:48,320
incorporate all of the configuration

00:21:46,480 --> 00:21:51,200
changes you've made making them

00:21:48,320 --> 00:21:52,720
kind of useless if not dangerous because

00:21:51,200 --> 00:21:53,840
they're not representing the changes

00:21:52,720 --> 00:21:56,000
you're making

00:21:53,840 --> 00:21:57,520
so you have to automate the

00:21:56,000 --> 00:21:59,760
configuration import

00:21:57,520 --> 00:22:00,799
if you want to automate the automated

00:21:59,760 --> 00:22:03,600
testing piece

00:22:00,799 --> 00:22:05,120
so it's maybe a minor part for a a basic

00:22:03,600 --> 00:22:07,120
a sort of beginner session

00:22:05,120 --> 00:22:10,480
but it is an important part to include

00:22:07,120 --> 00:22:12,240
if you are doing that sort of thing

00:22:10,480 --> 00:22:13,919
all right so we have about 20 minutes

00:22:12,240 --> 00:22:16,320
let me go through a quick live

00:22:13,919 --> 00:22:17,039
demo uh for this workshop i'm actually

00:22:16,320 --> 00:22:20,240
joined by

00:22:17,039 --> 00:22:23,280
a friend of mine he is mr jenkins

00:22:20,240 --> 00:22:24,159
he is the editor of umami magazine one

00:22:23,280 --> 00:22:27,360
moment i'm gonna go

00:22:24,159 --> 00:22:28,000
and get him real quick so something

00:22:27,360 --> 00:22:30,559
that's kind of

00:22:28,000 --> 00:22:32,559
funny mr jenkins is a little bit

00:22:30,559 --> 00:22:35,679
particular

00:22:32,559 --> 00:22:37,840
he asked for a green room and you know

00:22:35,679 --> 00:22:40,720
obviously we're doing this from home

00:22:37,840 --> 00:22:41,600
i didn't have a green room um so i had

00:22:40,720 --> 00:22:44,320
to

00:22:41,600 --> 00:22:44,960
sort of go out and get some paint i had

00:22:44,320 --> 00:22:46,799
to

00:22:44,960 --> 00:22:48,880
find a room in my house and paint it

00:22:46,799 --> 00:22:50,159
green for him he's like i said very very

00:22:48,880 --> 00:22:52,320
particular

00:22:50,159 --> 00:22:54,400
but he's a good friend so i think it's

00:22:52,320 --> 00:22:58,559
probably worth it but okay

00:22:54,400 --> 00:22:58,559
here we go you got the stage mr jenkins

00:23:02,000 --> 00:23:06,240
hello everybody my name is mr jenkins

00:23:04,880 --> 00:23:09,120
and as

00:23:06,240 --> 00:23:10,320
david said i am the editor-in-chief of

00:23:09,120 --> 00:23:13,919
umami

00:23:10,320 --> 00:23:18,559
magazine now i'm joined here today

00:23:13,919 --> 00:23:21,039
to show you how we at umami

00:23:18,559 --> 00:23:23,120
actually create articles on our website

00:23:21,039 --> 00:23:25,840
i think it would be

00:23:23,120 --> 00:23:26,880
an important thing to show today as we

00:23:25,840 --> 00:23:29,360
are

00:23:26,880 --> 00:23:30,159
demonstrating how to share content we're

00:23:29,360 --> 00:23:32,799
going through with

00:23:30,159 --> 00:23:33,919
drupalcon europe i'm very excited to be

00:23:32,799 --> 00:23:37,679
presenting today

00:23:33,919 --> 00:23:39,440
now we have umami we we share recipes we

00:23:37,679 --> 00:23:42,559
share food articles

00:23:39,440 --> 00:23:43,200
very important now uh to create a new

00:23:42,559 --> 00:23:47,679
article

00:23:43,200 --> 00:23:50,720
i go up to content on my site

00:23:47,679 --> 00:23:52,720
the umami food magazine website

00:23:50,720 --> 00:23:53,760
now we have all of this content here

00:23:52,720 --> 00:23:58,159
already i have

00:23:53,760 --> 00:24:01,440
a new article that we wrote about

00:23:58,159 --> 00:24:04,480
oatmeal i i personally

00:24:01,440 --> 00:24:05,279
love oatmeal i eat it for for every

00:24:04,480 --> 00:24:08,400
breakfast

00:24:05,279 --> 00:24:09,520
every single day it's a very hearty meal

00:24:08,400 --> 00:24:13,039
oops

00:24:09,520 --> 00:24:15,520
not recipe i'm sorry i need to add a

00:24:13,039 --> 00:24:15,520
article

00:24:16,559 --> 00:24:20,400
all right so let's go in and create an

00:24:19,440 --> 00:24:24,880
article

00:24:20,400 --> 00:24:24,880
this is eat more

00:24:25,600 --> 00:24:32,159
oatmeal now we have

00:24:29,679 --> 00:24:33,120
the rest of the article that has been

00:24:32,159 --> 00:24:35,520
created

00:24:33,120 --> 00:24:36,320
i wrote this in advance and since i am

00:24:35,520 --> 00:24:40,080
the

00:24:36,320 --> 00:24:41,679
the editor of umami i am able to publish

00:24:40,080 --> 00:24:43,279
this myself i don't have to go through

00:24:41,679 --> 00:24:46,880
moderation

00:24:43,279 --> 00:24:50,480
um but let's go ahead and add an image

00:24:46,880 --> 00:24:50,480
to this first

00:24:50,640 --> 00:24:58,640
i'm going to add media i'm going to

00:24:54,240 --> 00:24:58,640
find the oatmeal

00:24:58,880 --> 00:25:06,320
image that we created and i'm going to

00:25:02,400 --> 00:25:09,120
save as publish

00:25:06,320 --> 00:25:09,120
and click save

00:25:09,520 --> 00:25:16,480
here is our lovely article about oatmeal

00:25:13,600 --> 00:25:18,640
and it looks perfect for me and we

00:25:16,480 --> 00:25:20,960
should see it appear on the articles

00:25:18,640 --> 00:25:20,960
page

00:25:22,240 --> 00:25:29,360
it does appear on the articles page

00:25:25,919 --> 00:25:32,320
but we have more articles than

00:25:29,360 --> 00:25:33,760
just the one if i go to the content page

00:25:32,320 --> 00:25:36,320
i can confirm

00:25:33,760 --> 00:25:37,440
yes we have many articles that should be

00:25:36,320 --> 00:25:42,240
appearing we

00:25:37,440 --> 00:25:45,440
we have many more than just one article

00:25:42,240 --> 00:25:48,799
this does happen from time to time uh

00:25:45,440 --> 00:25:51,840
one moment i'm going to call uh my

00:25:48,799 --> 00:25:54,400
our developer uh kyle

00:25:51,840 --> 00:25:56,240
uh kyle is very helpful for for

00:25:54,400 --> 00:25:57,039
situations like this one moment while i

00:25:56,240 --> 00:25:59,440
call

00:25:57,039 --> 00:25:59,440
kyle

00:26:01,919 --> 00:26:06,000
hello kyle yep i am presenting at

00:26:05,120 --> 00:26:09,440
drupalcon

00:26:06,000 --> 00:26:10,400
and something happened i need you to

00:26:09,440 --> 00:26:13,840
come and take

00:26:10,400 --> 00:26:15,600
a look at the the website can you can

00:26:13,840 --> 00:26:18,000
you come and look okay

00:26:15,600 --> 00:26:18,000
thank you

00:26:20,799 --> 00:26:26,400
well howdy folks my name is kyle

00:26:24,000 --> 00:26:27,279
and i am very excited to be here today

00:26:26,400 --> 00:26:30,320
to present

00:26:27,279 --> 00:26:33,919
at drupalcon europe

00:26:30,320 --> 00:26:35,840
all right so uh mr jenkins contacted me

00:26:33,919 --> 00:26:38,720
he's the editor of umami magazine

00:26:35,840 --> 00:26:39,200
and he said that he's seen a problem on

00:26:38,720 --> 00:26:42,480
the

00:26:39,200 --> 00:26:45,120
live version of our website and i can

00:26:42,480 --> 00:26:45,600
see he is right uh we definitely have

00:26:45,120 --> 00:26:49,679
more

00:26:45,600 --> 00:26:52,080
than just the one article um

00:26:49,679 --> 00:26:53,919
well let me jump over to my my pantheon

00:26:52,080 --> 00:26:55,600
dashboard and take a look so

00:26:53,919 --> 00:26:57,360
uh you know if you don't have pantheon

00:26:55,600 --> 00:26:58,880
it's okay this is not necessarily a

00:26:57,360 --> 00:27:01,520
pantheon specific thing

00:26:58,880 --> 00:27:02,960
but it is really good to see visually

00:27:01,520 --> 00:27:04,159
what's going on so that's what we're

00:27:02,960 --> 00:27:06,799
using that's what we use for

00:27:04,159 --> 00:27:07,760
for production on our site anyway now i

00:27:06,799 --> 00:27:10,159
have the dev

00:27:07,760 --> 00:27:12,080
site right here uh and you know i

00:27:10,159 --> 00:27:14,159
confirmed with mr jenkins that that

00:27:12,080 --> 00:27:15,840
is not working properly now let me open

00:27:14,159 --> 00:27:17,919
up my my development

00:27:15,840 --> 00:27:20,640
environment and see if that one is also

00:27:17,919 --> 00:27:22,080
not working correctly now if i click on

00:27:20,640 --> 00:27:22,799
that link there i'm going to go to the

00:27:22,080 --> 00:27:26,080
dev

00:27:22,799 --> 00:27:27,760
site if i click on articles i should see

00:27:26,080 --> 00:27:29,600
there should be lots of articles there

00:27:27,760 --> 00:27:32,720
but no indeed i

00:27:29,600 --> 00:27:34,240
i don't see mr jenkins newest article

00:27:32,720 --> 00:27:36,480
which is expected because we're in a

00:27:34,240 --> 00:27:37,200
different environment but i also only

00:27:36,480 --> 00:27:40,399
see one

00:27:37,200 --> 00:27:43,600
article and that's that's not right

00:27:40,399 --> 00:27:47,279
we should we should fix this so

00:27:43,600 --> 00:27:48,240
well um let's see what we can do about

00:27:47,279 --> 00:27:50,559
that let's uh

00:27:48,240 --> 00:27:52,080
let's take a look at the view uh i was

00:27:50,559 --> 00:27:55,279
doing some stuff with views

00:27:52,080 --> 00:27:58,240
earlier in the year and uh maybe i

00:27:55,279 --> 00:27:59,840
forgot to do this correctly but let me

00:27:58,240 --> 00:28:02,559
go in and edit the view

00:27:59,840 --> 00:28:04,320
oh yeah here we go so it says display a

00:28:02,559 --> 00:28:08,159
specified number of items

00:28:04,320 --> 00:28:11,360
and i see one item now that is

00:28:08,159 --> 00:28:15,840
not correct we should be putting this

00:28:11,360 --> 00:28:20,159
on uh let's say mini pager

00:28:15,840 --> 00:28:22,320
page output mini pager i'll click apply

00:28:20,159 --> 00:28:23,200
number of items per page let's put this

00:28:22,320 --> 00:28:27,600
on

00:28:23,200 --> 00:28:27,600
6 and click apply

00:28:27,760 --> 00:28:31,120
alright now let me click save and we'll

00:28:29,279 --> 00:28:32,880
see if this actually looks the way we

00:28:31,120 --> 00:28:34,080
expect it to so here we go we got the

00:28:32,880 --> 00:28:36,320
articles page

00:28:34,080 --> 00:28:37,600
we got six articles we got a pager at

00:28:36,320 --> 00:28:40,559
the bottom i think this

00:28:37,600 --> 00:28:42,080
is good to go so as part of my

00:28:40,559 --> 00:28:44,720
development workflow

00:28:42,080 --> 00:28:46,320
i need to export my configuration in

00:28:44,720 --> 00:28:48,799
this environment so that i can

00:28:46,320 --> 00:28:50,320
move it through code up to our test

00:28:48,799 --> 00:28:51,520
environment we always test all of our

00:28:50,320 --> 00:28:54,640
changes

00:28:51,520 --> 00:28:56,320
so let me go ahead and give that a try

00:28:54,640 --> 00:28:58,159
i'm going to go through the drupal ui to

00:28:56,320 --> 00:28:59,919
do this i could use drush

00:28:58,159 --> 00:29:01,760
but i'm going to go through the

00:28:59,919 --> 00:29:04,640
configuration page

00:29:01,760 --> 00:29:06,240
we can take a look at the configuration

00:29:04,640 --> 00:29:08,000
synchronization

00:29:06,240 --> 00:29:10,320
from here it will show me what's in the

00:29:08,000 --> 00:29:11,919
database and what's changed from the

00:29:10,320 --> 00:29:14,559
database versus what is

00:29:11,919 --> 00:29:16,159
actually in the code and i can see right

00:29:14,559 --> 00:29:19,360
here there is one change

00:29:16,159 --> 00:29:22,080
in this views view featured

00:29:19,360 --> 00:29:23,200
articles which is that article section

00:29:22,080 --> 00:29:25,200
of our site

00:29:23,200 --> 00:29:26,799
now if i click on view differences it's

00:29:25,200 --> 00:29:30,799
actually going to show me a git

00:29:26,799 --> 00:29:34,480
diff so that i can compare and i see

00:29:30,799 --> 00:29:36,720
yep so right now in

00:29:34,480 --> 00:29:38,320
stage meaning in code in what we

00:29:36,720 --> 00:29:41,200
exported previously

00:29:38,320 --> 00:29:42,880
we have items per page one and in the

00:29:41,200 --> 00:29:44,880
database right now because we just made

00:29:42,880 --> 00:29:45,520
the change to this on our drupal site we

00:29:44,880 --> 00:29:48,559
have

00:29:45,520 --> 00:29:50,159
uh items per page six

00:29:48,559 --> 00:29:52,720
now this looks great this is exactly

00:29:50,159 --> 00:29:56,320
what we wanted so i'm going to take this

00:29:52,720 --> 00:29:57,520
and actually update so

00:29:56,320 --> 00:29:59,440
drupal does this cool thing the

00:29:57,520 --> 00:30:00,399
configuration management system is very

00:29:59,440 --> 00:30:04,000
very cool

00:30:00,399 --> 00:30:06,480
but by default you have to export your

00:30:04,000 --> 00:30:09,679
configuration which will generate a

00:30:06,480 --> 00:30:11,919
a gzips tar file which is

00:30:09,679 --> 00:30:13,760
which is good but then if i want to

00:30:11,919 --> 00:30:15,039
update the code that i have on the site

00:30:13,760 --> 00:30:16,880
i have to then go in and

00:30:15,039 --> 00:30:18,240
immediately import it which is a little

00:30:16,880 --> 00:30:20,159
bit awkward right

00:30:18,240 --> 00:30:21,279
well there's this great module called

00:30:20,159 --> 00:30:23,600
config direct

00:30:21,279 --> 00:30:25,279
save which we're using in this case and

00:30:23,600 --> 00:30:28,159
i can just come in here

00:30:25,279 --> 00:30:30,480
i can say sync update configuration and

00:30:28,159 --> 00:30:32,960
what this is going to do is actually

00:30:30,480 --> 00:30:34,399
update our configuration file it goes

00:30:32,960 --> 00:30:38,080
and writes it to the code

00:30:34,399 --> 00:30:40,559
directory so if i uh i've done this

00:30:38,080 --> 00:30:42,880
everything looks good now if i go back

00:30:40,559 --> 00:30:45,120
to my pantheon dashboard i can

00:30:42,880 --> 00:30:46,960
go in here i should be able to see oops

00:30:45,120 --> 00:30:48,880
actually i made a little mistake i need

00:30:46,960 --> 00:30:52,799
to be in sftp mode to make

00:30:48,880 --> 00:30:56,720
on server code changes to our site

00:30:52,799 --> 00:30:59,360
a little mistake on my part apologies

00:30:56,720 --> 00:31:00,480
uh so back over on our site here we can

00:30:59,360 --> 00:31:01,519
see that there are you know the

00:31:00,480 --> 00:31:04,399
different ways and i

00:31:01,519 --> 00:31:05,919
should be able to see still there's

00:31:04,399 --> 00:31:07,120
still this change made right here and

00:31:05,919 --> 00:31:08,960
that's because i

00:31:07,120 --> 00:31:10,960
did not have my environment set up to

00:31:08,960 --> 00:31:12,799
allow me to write to it just yet and so

00:31:10,960 --> 00:31:15,039
that will be fixed in

00:31:12,799 --> 00:31:15,840
just a moment just gotta wait for this

00:31:15,039 --> 00:31:18,480
switch over

00:31:15,840 --> 00:31:19,679
to happen so we can make code changes

00:31:18,480 --> 00:31:21,840
directly

00:31:19,679 --> 00:31:22,960
in development now if you're working

00:31:21,840 --> 00:31:24,559
locally

00:31:22,960 --> 00:31:26,880
it's not going to be a problem for you

00:31:24,559 --> 00:31:28,320
at all so what we're going to see in

00:31:26,880 --> 00:31:31,760
just a minute is we're going to

00:31:28,320 --> 00:31:32,399
sync up our configuration change with

00:31:31,760 --> 00:31:35,120
the

00:31:32,399 --> 00:31:37,039
recent content change that mr jenkins

00:31:35,120 --> 00:31:39,760
made up in the live environment

00:31:37,039 --> 00:31:40,559
so that we can test it in our test

00:31:39,760 --> 00:31:43,360
environment

00:31:40,559 --> 00:31:44,840
and that is going to let us to make sure

00:31:43,360 --> 00:31:47,919
that we don't have any

00:31:44,840 --> 00:31:49,919
unexpected changes associated with this

00:31:47,919 --> 00:31:53,279
configuration change

00:31:49,919 --> 00:31:55,440
now admittedly i should probably set up

00:31:53,279 --> 00:31:58,240
some kind of

00:31:55,440 --> 00:32:00,480
automated test because if i had a visual

00:31:58,240 --> 00:32:02,159
regression test in place

00:32:00,480 --> 00:32:03,760
this mistake probably wouldn't have

00:32:02,159 --> 00:32:06,960
happened because i would have noticed

00:32:03,760 --> 00:32:06,960
immediately that the

00:32:07,039 --> 00:32:11,120
there was a problem on the test

00:32:09,440 --> 00:32:12,559
environment if

00:32:11,120 --> 00:32:14,240
we didn't have the right number of

00:32:12,559 --> 00:32:16,480
articles there that would have been

00:32:14,240 --> 00:32:17,919
something easy to fix if i had had that

00:32:16,480 --> 00:32:21,039
set up so i can see

00:32:17,919 --> 00:32:22,559
now in our our pantheon dashboard in my

00:32:21,039 --> 00:32:24,559
development environment see there is one

00:32:22,559 --> 00:32:27,600
file change ready to commit

00:32:24,559 --> 00:32:29,840
and i can see that it is that view view

00:32:27,600 --> 00:32:32,000
views view featured article section and

00:32:29,840 --> 00:32:34,240
i can see that it is changing from

00:32:32,000 --> 00:32:36,000
one to six so that is good to go now i

00:32:34,240 --> 00:32:40,000
just need to commit that

00:32:36,000 --> 00:32:40,000
we're going to say fixing the

00:32:40,320 --> 00:32:44,559
fixing the articles

00:32:49,360 --> 00:32:57,039
page and i'm going to click on commit

00:32:54,799 --> 00:32:57,919
so this is committing this change with

00:32:57,039 --> 00:32:59,519
git

00:32:57,919 --> 00:33:01,200
on our development environment which

00:32:59,519 --> 00:33:04,399
will then allow us to

00:33:01,200 --> 00:33:06,640
deploy that up to our test environment

00:33:04,399 --> 00:33:08,960
now uh if you were working locally you

00:33:06,640 --> 00:33:09,679
just do get commit commands or if you're

00:33:08,960 --> 00:33:11,919
using a

00:33:09,679 --> 00:33:13,919
git app then you would probably just use

00:33:11,919 --> 00:33:15,840
whatever you're familiar with

00:33:13,919 --> 00:33:17,279
interacting with it there so i'm going

00:33:15,840 --> 00:33:20,399
to go ahead and do a

00:33:17,279 --> 00:33:21,840
git commit here in our test environment

00:33:20,399 --> 00:33:23,279
i'm going to pull files and database

00:33:21,840 --> 00:33:24,880
from the live environment again

00:33:23,279 --> 00:33:26,720
this is something that pantheon does

00:33:24,880 --> 00:33:28,960
automatically is sync up

00:33:26,720 --> 00:33:30,480
the live environment with test rebuilds

00:33:28,960 --> 00:33:32,320
it so that you don't have to

00:33:30,480 --> 00:33:33,519
do that yourself but this is absolutely

00:33:32,320 --> 00:33:34,399
something you could do on your own

00:33:33,519 --> 00:33:36,799
computer

00:33:34,399 --> 00:33:38,159
or with whatever hosting environment you

00:33:36,799 --> 00:33:40,320
might be using already

00:33:38,159 --> 00:33:41,840
so if i do a deploy log message i'm just

00:33:40,320 --> 00:33:46,799
going to put in

00:33:41,840 --> 00:33:46,799
fixing articles page

00:33:47,440 --> 00:33:52,000
and click on deploy code now after a

00:33:50,720 --> 00:33:54,320
moment it's going to take a moment

00:33:52,000 --> 00:33:55,279
for this workflow to kick in now i do

00:33:54,320 --> 00:33:57,440
not have

00:33:55,279 --> 00:33:59,039
drush automatically importing in this

00:33:57,440 --> 00:34:00,480
environment which means

00:33:59,039 --> 00:34:02,640
i'm going to have to import this

00:34:00,480 --> 00:34:05,279
manually not a big deal but

00:34:02,640 --> 00:34:07,279
i just need to wait for this workflow to

00:34:05,279 --> 00:34:08,399
complete this deployment to the test

00:34:07,279 --> 00:34:11,280
environment

00:34:08,399 --> 00:34:12,240
and then i will be able to import

00:34:11,280 --> 00:34:15,119
configuration

00:34:12,240 --> 00:34:17,200
but we'll see how that works and then we

00:34:15,119 --> 00:34:19,760
can

00:34:17,200 --> 00:34:20,720
just verify that the configuration

00:34:19,760 --> 00:34:23,919
change

00:34:20,720 --> 00:34:27,440
worked and we have the new content

00:34:23,919 --> 00:34:29,599
from mr jenkins as well so it'll just

00:34:27,440 --> 00:34:30,159
take a moment for this to complete now i

00:34:29,599 --> 00:34:33,280
can

00:34:30,159 --> 00:34:37,200
close my development

00:34:33,280 --> 00:34:37,200
url i don't need that anymore

00:34:38,879 --> 00:34:42,560
and let me go ahead and open up my test

00:34:41,599 --> 00:34:44,560
actually let me wait for this

00:34:42,560 --> 00:34:46,000
configuration the the workflow to

00:34:44,560 --> 00:34:51,119
complete and then i will

00:34:46,000 --> 00:34:51,119
click the link here to open our site

00:34:53,679 --> 00:34:57,359
all right looks like we have about 10

00:34:55,359 --> 00:34:59,359
more minutes left of this presentation

00:34:57,359 --> 00:35:00,560
so if you have not had a chance to ask a

00:34:59,359 --> 00:35:04,320
question yet please

00:35:00,560 --> 00:35:06,480
throw that into the live q a

00:35:04,320 --> 00:35:07,520
my my colleague or david's colleague

00:35:06,480 --> 00:35:09,280
john is

00:35:07,520 --> 00:35:10,880
uh he's online and able to kind of help

00:35:09,280 --> 00:35:12,480
facilitate some questions

00:35:10,880 --> 00:35:14,800
and we will leave some time for

00:35:12,480 --> 00:35:16,560
questions at the end as well and

00:35:14,800 --> 00:35:18,480
and john if you have any questions to

00:35:16,560 --> 00:35:20,079
throw into slack feel free to

00:35:18,480 --> 00:35:23,920
start putting them in there and david

00:35:20,079 --> 00:35:23,920
will get to those in just a moment

00:35:25,839 --> 00:35:32,079
all right let me just refresh my site

00:35:30,240 --> 00:35:36,079
let's just take a look and see if this

00:35:32,079 --> 00:35:36,079
synchronization is completed yet

00:35:40,400 --> 00:35:44,000
all right it looks like that deployment

00:35:42,240 --> 00:35:47,520
has completed so now i can go

00:35:44,000 --> 00:35:48,640
into site admin for this site i can see

00:35:47,520 --> 00:35:50,240
it's the test environment because it

00:35:48,640 --> 00:35:52,400
starts with test

00:35:50,240 --> 00:35:53,839
and now i'm just going to log in with my

00:35:52,400 --> 00:35:55,680
developer account oops

00:35:53,839 --> 00:35:57,760
one second sometimes during that

00:35:55,680 --> 00:36:00,480
database sync thing there's a brief

00:35:57,760 --> 00:36:02,880
moment where there is a

00:36:00,480 --> 00:36:04,800
error in the test environment it'll just

00:36:02,880 --> 00:36:05,920
take a moment for me to refresh this up

00:36:04,800 --> 00:36:08,720
again

00:36:05,920 --> 00:36:13,839
there we go now let me just log in as

00:36:08,720 --> 00:36:13,839
the developer

00:36:15,440 --> 00:36:17,839
oops

00:36:22,240 --> 00:36:26,800
my keyboard seems to not be working so

00:36:24,480 --> 00:36:29,520
well at the moment

00:36:26,800 --> 00:36:29,520
oh my goodness

00:36:31,119 --> 00:36:34,160
all right let's give that a try it is

00:36:33,599 --> 00:36:36,400
hard

00:36:34,160 --> 00:36:37,680
to write a password when your keyboard

00:36:36,400 --> 00:36:39,839
is eating your input

00:36:37,680 --> 00:36:41,040
oh my goodness all right let's go to the

00:36:39,839 --> 00:36:42,960
articles page we're on the test

00:36:41,040 --> 00:36:45,040
environment we should see that new piece

00:36:42,960 --> 00:36:45,839
of content that mr jenkins created on

00:36:45,040 --> 00:36:47,680
live

00:36:45,839 --> 00:36:49,520
there we go eat more oatmeal which is

00:36:47,680 --> 00:36:50,320
perfect but it has not been fixed yet

00:36:49,520 --> 00:36:53,280
because we have not

00:36:50,320 --> 00:36:56,160
imported configuration so let's go into

00:36:53,280 --> 00:36:56,160
configuration

00:36:56,960 --> 00:37:00,720
from configuration we'll go back to that

00:36:59,280 --> 00:37:02,640
uh synchronization

00:37:00,720 --> 00:37:04,480
page and we'll be able to see the

00:37:02,640 --> 00:37:08,640
difference

00:37:04,480 --> 00:37:10,160
it'll just take a second there we go now

00:37:08,640 --> 00:37:12,960
if i go into configuration

00:37:10,160 --> 00:37:16,720
synchronization we should see the change

00:37:12,960 --> 00:37:16,720
that we made back on the development

00:37:20,839 --> 00:37:23,839
environment

00:37:24,880 --> 00:37:29,200
there we go so there is one change and

00:37:27,760 --> 00:37:30,480
we can view the differences if we want

00:37:29,200 --> 00:37:33,280
but all we need to do is

00:37:30,480 --> 00:37:34,800
import all remember drupal is always

00:37:33,280 --> 00:37:37,680
reading from the database

00:37:34,800 --> 00:37:39,839
so we have changed the code in div we

00:37:37,680 --> 00:37:41,280
deployed that up to the test environment

00:37:39,839 --> 00:37:43,119
drupal is still reading from the

00:37:41,280 --> 00:37:44,079
database which has the incorrect

00:37:43,119 --> 00:37:46,000
information

00:37:44,079 --> 00:37:48,160
so what we want to do is import the

00:37:46,000 --> 00:37:49,520
changes that we made in code

00:37:48,160 --> 00:37:51,280
this is going to make it so that the

00:37:49,520 --> 00:37:53,520
database matches

00:37:51,280 --> 00:37:55,040
what we had in our code export from

00:37:53,520 --> 00:37:56,880
earlier

00:37:55,040 --> 00:37:58,560
so what this should do is update that

00:37:56,880 --> 00:38:01,680
view to show all

00:37:58,560 --> 00:38:03,200
six articles instead of just the one

00:38:01,680 --> 00:38:05,359
now after this completes we'll be able

00:38:03,200 --> 00:38:08,560
to take a look at the

00:38:05,359 --> 00:38:11,680
articles page and just verify

00:38:08,560 --> 00:38:12,160
that it is working correctly hey there

00:38:11,680 --> 00:38:15,200
we go

00:38:12,160 --> 00:38:17,440
so now we have six articles on this page

00:38:15,200 --> 00:38:19,040
alongside the new article that mr

00:38:17,440 --> 00:38:22,240
jenkins made on live

00:38:19,040 --> 00:38:23,839
now at this point i would slack or

00:38:22,240 --> 00:38:25,680
create a jira ticket or something like

00:38:23,839 --> 00:38:25,920
that i'd let mr jenkins know that this

00:38:25,680 --> 00:38:28,320
is

00:38:25,920 --> 00:38:29,920
fixed and it's ready for his review in

00:38:28,320 --> 00:38:31,760
the test environment

00:38:29,920 --> 00:38:34,320
after that he would go through and

00:38:31,760 --> 00:38:36,400
verify that is working and check it

00:38:34,320 --> 00:38:38,400
give his thumbs up of approval and we

00:38:36,400 --> 00:38:39,839
would deploy that to live

00:38:38,400 --> 00:38:41,920
and hopefully we won't have any

00:38:39,839 --> 00:38:43,520
surprises because we've already had a

00:38:41,920 --> 00:38:44,480
chance to test it in our test

00:38:43,520 --> 00:38:46,480
environment

00:38:44,480 --> 00:38:48,160
now the cool thing about this is with

00:38:46,480 --> 00:38:49,119
configuration management and with this

00:38:48,160 --> 00:38:51,520
workflow

00:38:49,119 --> 00:38:53,440
um there's no surprises this is the this

00:38:51,520 --> 00:38:54,800
is the most surprising part is deploying

00:38:53,440 --> 00:38:56,560
to test so

00:38:54,800 --> 00:38:58,560
in the interest of time i'm going to

00:38:56,560 --> 00:39:00,960
hand the microphone back to

00:38:58,560 --> 00:39:02,240
david and we're going to continue on

00:39:00,960 --> 00:39:03,760
with the presentation

00:39:02,240 --> 00:39:05,680
but just know that we have deployed it

00:39:03,760 --> 00:39:07,119
to test the next step of course would be

00:39:05,680 --> 00:39:09,839
to deploy to live

00:39:07,119 --> 00:39:10,400
import or configuration there but it is

00:39:09,839 --> 00:39:12,960
pretty much

00:39:10,400 --> 00:39:15,040
the same thing that we just did so one

00:39:12,960 --> 00:39:17,920
moment i'm going to go ahead and go

00:39:15,040 --> 00:39:21,200
let david know that it is time for him

00:39:17,920 --> 00:39:21,200
to come back on stage one moment

00:39:23,680 --> 00:39:27,839
all right everyone thank you very much

00:39:25,920 --> 00:39:28,640
that was the live demo thank you to our

00:39:27,839 --> 00:39:32,480
guests

00:39:28,640 --> 00:39:33,599
kyle and mr jenkins um

00:39:32,480 --> 00:39:35,839
so let's go ahead and continue so

00:39:33,599 --> 00:39:38,000
there's just one one more thing really

00:39:35,839 --> 00:39:39,119
is and the question that you might be

00:39:38,000 --> 00:39:43,040
asking yourself

00:39:39,119 --> 00:39:44,640
is who actually broke that page

00:39:43,040 --> 00:39:46,240
right because we have version control

00:39:44,640 --> 00:39:47,359
because this is all being tracked in

00:39:46,240 --> 00:39:49,280
version control

00:39:47,359 --> 00:39:51,200
it means that we are able to go into git

00:39:49,280 --> 00:39:52,079
and we can actually verify we can check

00:39:51,200 --> 00:39:55,599
to see

00:39:52,079 --> 00:39:58,000
who is responsible for this

00:39:55,599 --> 00:39:58,800
mistake that happened on the website

00:39:58,000 --> 00:40:00,720
well let's

00:39:58,800 --> 00:40:02,400
take a look we can actually go into git

00:40:00,720 --> 00:40:04,240
we can look at the log and reference

00:40:02,400 --> 00:40:06,000
that particular file and see

00:40:04,240 --> 00:40:08,319
when it was changed what the commit

00:40:06,000 --> 00:40:10,960
message was and who is responsible

00:40:08,319 --> 00:40:12,640
so let's take a look if we open up our

00:40:10,960 --> 00:40:14,240
command line interface which i happen to

00:40:12,640 --> 00:40:17,760
have right here

00:40:14,240 --> 00:40:19,599
i have my umami cfm site open

00:40:17,760 --> 00:40:22,400
i'm just going to cd into the place

00:40:19,599 --> 00:40:27,359
where configuration is actually saved so

00:40:22,400 --> 00:40:27,359
cd sites defaults config

00:40:27,839 --> 00:40:31,440
and then from here if i do a git log

00:40:30,319 --> 00:40:34,720
dash p

00:40:31,440 --> 00:40:36,480
and then the uh the the actual file

00:40:34,720 --> 00:40:41,500
that's been changed we have

00:40:36,480 --> 00:40:46,619
uh views dot view dot featured

00:40:41,500 --> 00:40:46,619
[Music]

00:40:48,480 --> 00:40:53,839
dot yaml

00:40:54,480 --> 00:40:57,920
sorry i actually needed a space between

00:40:56,319 --> 00:40:59,520
there uh so

00:40:57,920 --> 00:41:01,119
after running that i can see that this

00:40:59,520 --> 00:41:03,599
happened by me

00:41:01,119 --> 00:41:05,520
no big surprise there of course uh back

00:41:03,599 --> 00:41:06,560
in july so this has been broken for a

00:41:05,520 --> 00:41:08,800
while which is

00:41:06,560 --> 00:41:09,760
very unfortunate for the folks at umami

00:41:08,800 --> 00:41:11,520
magazine

00:41:09,760 --> 00:41:14,160
uh also i can see that the commit

00:41:11,520 --> 00:41:16,400
message was temporary change to try and

00:41:14,160 --> 00:41:18,400
fix article spacing issues

00:41:16,400 --> 00:41:19,520
so clearly this was a temporary change

00:41:18,400 --> 00:41:21,839
that was

00:41:19,520 --> 00:41:23,440
had unexpected consequences because they

00:41:21,839 --> 00:41:26,400
didn't have automated testing

00:41:23,440 --> 00:41:27,440
set up that is something that mr jenkins

00:41:26,400 --> 00:41:29,359
is

00:41:27,440 --> 00:41:30,960
going to ask kyle to take a look at in

00:41:29,359 --> 00:41:32,880
the future but yeah we can see

00:41:30,960 --> 00:41:34,000
exactly what changed who changed this

00:41:32,880 --> 00:41:36,720
configuration

00:41:34,000 --> 00:41:37,119
and when that happened so that's pretty

00:41:36,720 --> 00:41:40,240
cool

00:41:37,119 --> 00:41:42,160
to give that layer of information to the

00:41:40,240 --> 00:41:44,560
configuration the site building stage

00:41:42,160 --> 00:41:46,000
not just the development stage

00:41:44,560 --> 00:41:48,079
if you want more resources there are

00:41:46,000 --> 00:41:48,560
things here and again there there are

00:41:48,079 --> 00:41:51,760
links

00:41:48,560 --> 00:41:52,960
oops there are links in the uh in the

00:41:51,760 --> 00:41:55,040
slides that i'll give you

00:41:52,960 --> 00:41:56,319
in just a moment you can dig in deeper

00:41:55,040 --> 00:41:58,079
learning more about these you can get

00:41:56,319 --> 00:41:59,359
official training with configuration

00:41:58,079 --> 00:42:00,000
management as well if you want to learn

00:41:59,359 --> 00:42:01,839
more

00:42:00,000 --> 00:42:03,200
but with that we have three minutes left

00:42:01,839 --> 00:42:06,160
so i'll switch this slide

00:42:03,200 --> 00:42:09,160
uh feel free to grab my slides um just

00:42:06,160 --> 00:42:12,160
go to david needham dot me slash

00:42:09,160 --> 00:42:12,800
dceu2020 you can grab the slides from

00:42:12,160 --> 00:42:14,800
there

00:42:12,800 --> 00:42:17,119
and yeah i'll go ahead and take some

00:42:14,800 --> 00:42:21,119
questions thank you all very much

00:42:17,119 --> 00:42:23,119
i do see we have one question so far

00:42:21,119 --> 00:42:25,560
let's see it says is the same kind of

00:42:23,119 --> 00:42:28,160
workflow applicable with the file

00:42:25,560 --> 00:42:30,000
composer.json for sites using composer

00:42:28,160 --> 00:42:31,280
so we keep modules installation

00:42:30,000 --> 00:42:33,599
and version synchronized with

00:42:31,280 --> 00:42:37,119
configuration and all in one place

00:42:33,599 --> 00:42:38,640
uh i believe so um

00:42:37,119 --> 00:42:40,160
so the thing about using composer is

00:42:38,640 --> 00:42:41,480
that you don't have all the module files

00:42:40,160 --> 00:42:43,520
there you just have that

00:42:41,480 --> 00:42:44,640
composer.json which kind of keeps track

00:42:43,520 --> 00:42:46,720
of the versions of

00:42:44,640 --> 00:42:48,640
modules you're using and all that stuff

00:42:46,720 --> 00:42:52,400
so yeah i believe so

00:42:48,640 --> 00:42:54,079
um i i don't have as much experience

00:42:52,400 --> 00:42:56,960
using composer with configuration

00:42:54,079 --> 00:42:59,599
management side by side

00:42:56,960 --> 00:43:01,280
so i i'm not aware of any problems with

00:42:59,599 --> 00:43:03,760
that i don't see why it wouldn't work

00:43:01,280 --> 00:43:05,359
it should be pretty much the same thing

00:43:03,760 --> 00:43:07,440
uh and if someone else

00:43:05,359 --> 00:43:09,200
disagrees or has another opinion feel

00:43:07,440 --> 00:43:10,880
free to throw that into the chat because

00:43:09,200 --> 00:43:14,160
that would be a good thing to share and

00:43:10,880 --> 00:43:14,160
a great thing for me to know as well

00:43:16,160 --> 00:43:19,920
all right i don't see any other

00:43:18,720 --> 00:43:22,400
questions we have

00:43:19,920 --> 00:43:23,839
looks like a minute and a half left so

00:43:22,400 --> 00:43:24,960
i'll just go ahead and i guess end it

00:43:23,839 --> 00:43:26,079
here thank you all very much for

00:43:24,960 --> 00:43:29,280
attending the workshop i

00:43:26,079 --> 00:43:30,800
i hope it was entertaining but also

00:43:29,280 --> 00:43:32,319
educational i hope you learned something

00:43:30,800 --> 00:43:35,599
and it was useful

00:43:32,319 --> 00:43:36,720
for your kind of development as a drupal

00:43:35,599 --> 00:43:39,359
site builder

00:43:36,720 --> 00:43:41,200
um yeah if you have any other questions

00:43:39,359 --> 00:43:43,040
if you want to kind of screen share

00:43:41,200 --> 00:43:45,200
or if you want to jump on video with me

00:43:43,040 --> 00:43:45,760
and chat you can go to the pantheon

00:43:45,200 --> 00:43:47,760
booth

00:43:45,760 --> 00:43:49,359
after this i'm going to be going

00:43:47,760 --> 00:43:50,880
straight to the pantheon booth after

00:43:49,359 --> 00:43:54,480
this presentation

00:43:50,880 --> 00:43:54,960
so you can go to go to the exhibition

00:43:54,480 --> 00:43:57,440
hall

00:43:54,960 --> 00:43:59,119
go to pantheon there should be a button

00:43:57,440 --> 00:44:02,400
to join the group

00:43:59,119 --> 00:44:05,599
video if you go there i'll be there

00:44:02,400 --> 00:44:06,800
and john might be there too and so we

00:44:05,599 --> 00:44:10,319
can

00:44:06,800 --> 00:44:10,319
answer any questions you might have

00:44:10,960 --> 00:44:14,480
all right well i think with that we're

00:44:12,880 --> 00:44:16,319
we're good to go thank you again

00:44:14,480 --> 00:44:17,520
very much thank you for the opportunity

00:44:16,319 --> 00:44:20,640
uh folks at

00:44:17,520 --> 00:44:22,160
drupalcon europe um

00:44:20,640 --> 00:44:24,560
thank you very much have a great rest of

00:44:22,160 --> 00:44:24,560

YouTube URL: https://www.youtube.com/watch?v=AEsMKP9sTik


