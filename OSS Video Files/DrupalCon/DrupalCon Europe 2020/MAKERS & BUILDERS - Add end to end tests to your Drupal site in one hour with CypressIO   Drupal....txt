Title: MAKERS & BUILDERS - Add end to end tests to your Drupal site in one hour with CypressIO   Drupal...
Publication date: 2021-01-21
Playlist: DrupalCon Europe 2020
Description: 
	Add end to end tests to your Drupal site in one hour with CypressIO We'll go through the process of taking an already existing Drupal site and quickly add CypressIO and start writing end to end tests. It will be a live demo format. * Drupal 7 integration * Drupal 8 integration * First tests * Way forward
Captions: 
	00:00:04,059 --> 00:00:09,889
[Music]

00:00:13,040 --> 00:00:16,800
hello

00:00:14,000 --> 00:00:19,199
everybody i hope that you can see my

00:00:16,800 --> 00:00:22,240
screen

00:00:19,199 --> 00:00:25,519
so let me just move some controls

00:00:22,240 --> 00:00:28,960
around yes cool um

00:00:25,519 --> 00:00:32,320
okay so we have limited time

00:00:28,960 --> 00:00:34,800
and that's why i decided that having

00:00:32,320 --> 00:00:36,000
and that title wouldn't be very accurate

00:00:34,800 --> 00:00:39,120
so we are going to try

00:00:36,000 --> 00:00:40,879
try to add end-to-end tests in 20

00:00:39,120 --> 00:00:44,160
minutes with cyprus

00:00:40,879 --> 00:00:45,440
and my name is fran i work for amis labs

00:00:44,160 --> 00:00:49,200
and you can see there

00:00:45,440 --> 00:00:52,480
also my drupal profile

00:00:49,200 --> 00:00:56,840
and the agenda for today

00:00:52,480 --> 00:00:58,640
we need to bear in mind that is just 20

00:00:56,840 --> 00:01:01,199
minutes so

00:00:58,640 --> 00:01:02,800
our main goal is taking an already

00:01:01,199 --> 00:01:06,000
assisting drupal site and

00:01:02,800 --> 00:01:08,479
start writing end-to-end tests and

00:01:06,000 --> 00:01:09,119
i didn't say drupal 7 drawbar 8 i just

00:01:08,479 --> 00:01:12,799
set an

00:01:09,119 --> 00:01:16,159
existing drupal site so it's gonna be a

00:01:12,799 --> 00:01:18,799
live demo format i have uh videos as a

00:01:16,159 --> 00:01:21,600
fallback just in case things go wrong

00:01:18,799 --> 00:01:24,400
and but yeah hopefully we get there and

00:01:21,600 --> 00:01:25,920
i also have scripts to sort of automate

00:01:24,400 --> 00:01:28,240
a few things because i didn't want to

00:01:25,920 --> 00:01:30,799
start typing and

00:01:28,240 --> 00:01:32,240
without enough time and we're going to

00:01:30,799 --> 00:01:35,680
do a blank site

00:01:32,240 --> 00:01:36,560
first a very easy silly blank site so

00:01:35,680 --> 00:01:39,520
that we know

00:01:36,560 --> 00:01:41,040
how and cyprus is installed on how to

00:01:39,520 --> 00:01:42,799
write the first tests

00:01:41,040 --> 00:01:44,159
then we do a quick two by seven

00:01:42,799 --> 00:01:46,159
integration then a

00:01:44,159 --> 00:01:47,360
quick drupal 8 integration with some

00:01:46,159 --> 00:01:49,520
more tests

00:01:47,360 --> 00:01:50,880
and we'll briefly talk about a way

00:01:49,520 --> 00:01:53,439
forwards

00:01:50,880 --> 00:01:54,479
it seems a lot to cover but hopefully we

00:01:53,439 --> 00:01:57,360
will get there

00:01:54,479 --> 00:01:58,799
so bear with me and we start with the

00:01:57,360 --> 00:02:02,640
blank site

00:01:58,799 --> 00:02:04,640
and so i'm just creating

00:02:02,640 --> 00:02:06,560
a folder an empty folder i'm just

00:02:04,640 --> 00:02:08,879
creating a very simple

00:02:06,560 --> 00:02:10,000
index file as you can see it's just a

00:02:08,879 --> 00:02:13,920
link to the about

00:02:10,000 --> 00:02:15,680
page and i'm also creating about page

00:02:13,920 --> 00:02:17,200
and then i'm just going to create a

00:02:15,680 --> 00:02:19,040
local and

00:02:17,200 --> 00:02:22,400
server and with the php breaking

00:02:19,040 --> 00:02:24,959
function and then as we all know then

00:02:22,400 --> 00:02:26,959
that will be the result inside we can go

00:02:24,959 --> 00:02:27,599
with police a bit more we can add small

00:02:26,959 --> 00:02:31,760
details

00:02:27,599 --> 00:02:34,239
if needed and the first test

00:02:31,760 --> 00:02:36,000
and well first let's go into how to add

00:02:34,239 --> 00:02:39,040
cypress before even installing the

00:02:36,000 --> 00:02:41,280
test uh adding cyprus to a project

00:02:39,040 --> 00:02:43,280
is as easy as that first line that you

00:02:41,280 --> 00:02:46,800
can see and there is the equivalent

00:02:43,280 --> 00:02:48,000
one for uh john it would be just npn

00:02:46,800 --> 00:02:50,319
install cypress

00:02:48,000 --> 00:02:51,920
and then it's a death dependency and

00:02:50,319 --> 00:02:54,080
then you are done

00:02:51,920 --> 00:02:56,080
you have installed cyprus so that means

00:02:54,080 --> 00:02:59,200
that you can start writing tests

00:02:56,080 --> 00:03:01,519
so let's just create the very first one

00:02:59,200 --> 00:03:03,440
and just following cypress recommended

00:03:01,519 --> 00:03:06,159
and folder structure

00:03:03,440 --> 00:03:07,040
i just create a new file in cypress

00:03:06,159 --> 00:03:09,360
integrations

00:03:07,040 --> 00:03:10,800
first test and then we just write the

00:03:09,360 --> 00:03:13,680
test which we're gonna see

00:03:10,800 --> 00:03:14,400
in the next slide once we have written

00:03:13,680 --> 00:03:18,319
the tests

00:03:14,400 --> 00:03:21,599
and executing them would be as easy as

00:03:18,319 --> 00:03:25,120
running the binary for cyprus and then

00:03:21,599 --> 00:03:27,280
with the option open or and most likely

00:03:25,120 --> 00:03:29,120
you will have the mpx

00:03:27,280 --> 00:03:31,040
tool installed on your machine and you

00:03:29,120 --> 00:03:34,720
can just run mpx

00:03:31,040 --> 00:03:36,799
cyprus and open

00:03:34,720 --> 00:03:38,400
and then we can just click directly on

00:03:36,799 --> 00:03:40,400
the first test it will look

00:03:38,400 --> 00:03:41,680
something like this and as you can see

00:03:40,400 --> 00:03:44,799
there are green lights which

00:03:41,680 --> 00:03:47,200
is so what we came here for and

00:03:44,799 --> 00:03:49,040
i will quickly show you the test that we

00:03:47,200 --> 00:03:52,400
growed is very simple

00:03:49,040 --> 00:03:53,920
writing tests in cyprus it's super super

00:03:52,400 --> 00:03:56,560
super easy

00:03:53,920 --> 00:03:57,280
we just described what the test goes is

00:03:56,560 --> 00:03:59,680
about

00:03:57,280 --> 00:04:01,120
and describe this for a set of tests and

00:03:59,680 --> 00:04:03,840
then with the it

00:04:01,120 --> 00:04:04,879
we just write the individual tests so in

00:04:03,840 --> 00:04:06,640
this case

00:04:04,879 --> 00:04:08,080
our test is gonna be it goes to the

00:04:06,640 --> 00:04:10,400
about page

00:04:08,080 --> 00:04:11,200
and we're gonna visit this localhost

00:04:10,400 --> 00:04:13,920
00:04:11,200 --> 00:04:14,560
which we started before then we're gonna

00:04:13,920 --> 00:04:18,079
look for

00:04:14,560 --> 00:04:18,320
an about um link and we're gonna click

00:04:18,079 --> 00:04:20,479
it

00:04:18,320 --> 00:04:22,240
as you can see it's all very readable

00:04:20,479 --> 00:04:23,040
and then we will just make sure that the

00:04:22,240 --> 00:04:27,199
url

00:04:23,040 --> 00:04:30,320
should include about and that is it

00:04:27,199 --> 00:04:33,280
as i said i've got a video just in case

00:04:30,320 --> 00:04:34,880
but my idea was to do live demo so let's

00:04:33,280 --> 00:04:39,120
go ahead and do it

00:04:34,880 --> 00:04:42,240
uh that could be this blank site

00:04:39,120 --> 00:04:45,600
while it runs i will show you what it is

00:04:42,240 --> 00:04:48,800
is pretty much the same thing that i was

00:04:45,600 --> 00:04:49,600
showing in the slides all this code will

00:04:48,800 --> 00:04:52,240
be available

00:04:49,600 --> 00:04:54,400
after the presentation so we just create

00:04:52,240 --> 00:04:55,360
and the blank site we just create the

00:04:54,400 --> 00:04:58,639
files

00:04:55,360 --> 00:05:00,000
we launched the server we and just

00:04:58,639 --> 00:05:02,080
create an empty

00:05:00,000 --> 00:05:03,360
package json so that we can install

00:05:02,080 --> 00:05:05,600
cypress

00:05:03,360 --> 00:05:07,360
and we can see all that is kind of

00:05:05,600 --> 00:05:10,400
happening in the background

00:05:07,360 --> 00:05:13,840
okay then we create the first test

00:05:10,400 --> 00:05:14,479
which is just that one we copy that test

00:05:13,840 --> 00:05:17,120
into the

00:05:14,479 --> 00:05:19,199
first test file and then as you can see

00:05:17,120 --> 00:05:21,919
i just made it so that i need to hit

00:05:19,199 --> 00:05:22,400
enter and right after i hit enter it's

00:05:21,919 --> 00:05:25,680
gonna

00:05:22,400 --> 00:05:28,720
execute the next line

00:05:25,680 --> 00:05:30,639
that we see in here so

00:05:28,720 --> 00:05:32,639
i'm just going to hit intro and then

00:05:30,639 --> 00:05:35,759
this is going to open the cypress

00:05:32,639 --> 00:05:38,000
test runner and we can see triggering it

00:05:35,759 --> 00:05:42,000
in there and we can see my first test

00:05:38,000 --> 00:05:42,000
and then i can just click on it

00:05:42,080 --> 00:05:48,160
and it's launching google chrome

00:05:45,840 --> 00:05:49,199
and it actually went super fast through

00:05:48,160 --> 00:05:51,600
it but

00:05:49,199 --> 00:05:52,240
one of the coolest and cool things about

00:05:51,600 --> 00:05:54,320
cypress

00:05:52,240 --> 00:05:55,440
is that you can go back in time so you

00:05:54,320 --> 00:05:57,759
can go back to where

00:05:55,440 --> 00:05:59,120
you visited the home page then it

00:05:57,759 --> 00:06:02,080
contains the about

00:05:59,120 --> 00:06:03,759
uh link then i actually click on it and

00:06:02,080 --> 00:06:04,479
then cypress tell me even the events

00:06:03,759 --> 00:06:07,280
that happen

00:06:04,479 --> 00:06:07,600
and then it checks the url that it has

00:06:07,280 --> 00:06:11,039
the

00:06:07,600 --> 00:06:14,160
about part in it one of the cool things

00:06:11,039 --> 00:06:14,720
is that we can also ping a version in

00:06:14,160 --> 00:06:16,720
time

00:06:14,720 --> 00:06:18,960
and as we are talking about google

00:06:16,720 --> 00:06:22,080
chrome we can open the developers

00:06:18,960 --> 00:06:22,800
extensions and we can inspect anything

00:06:22,080 --> 00:06:25,199
we can check

00:06:22,800 --> 00:06:27,199
console messages we can do all the kind

00:06:25,199 --> 00:06:29,520
of things that we normally can do

00:06:27,199 --> 00:06:30,639
so on one hand we have an automatic test

00:06:29,520 --> 00:06:33,680
that can run

00:06:30,639 --> 00:06:36,720
as many times as we want but we can also

00:06:33,680 --> 00:06:39,759
inspect and debug the code

00:06:36,720 --> 00:06:41,360
so i wanted to do it in this blank site

00:06:39,759 --> 00:06:43,840
like there's no drupal in it

00:06:41,360 --> 00:06:44,800
and you could see how easy and quick was

00:06:43,840 --> 00:06:48,479
to really

00:06:44,800 --> 00:06:48,960
uh create the tests it came down to

00:06:48,479 --> 00:06:52,639
really

00:06:48,960 --> 00:06:54,880
two lines so one install the npm packets

00:06:52,639 --> 00:06:56,560
then obviously creating the test and

00:06:54,880 --> 00:07:00,000
then another one another one

00:06:56,560 --> 00:07:02,240
to run them so having done this uh

00:07:00,000 --> 00:07:03,360
blank site i think we're ready to move

00:07:02,240 --> 00:07:06,800
on into

00:07:03,360 --> 00:07:08,639
the drupal 7 integration we don't need

00:07:06,800 --> 00:07:12,720
to see the video now because it work

00:07:08,639 --> 00:07:15,840
that is great uh just checking

00:07:12,720 --> 00:07:16,240
yeah the things are going are suspected

00:07:15,840 --> 00:07:18,240
uh

00:07:16,240 --> 00:07:20,080
could there is no people complaining so

00:07:18,240 --> 00:07:23,599
i will just carry on

00:07:20,080 --> 00:07:26,639
drupal 7 integration uh then

00:07:23,599 --> 00:07:29,039
i mean why am i doing blank site drupal

00:07:26,639 --> 00:07:31,520
7 drupal 8 so a little bit of context of

00:07:29,039 --> 00:07:33,919
me working for a mislab i work in the

00:07:31,520 --> 00:07:34,960
and global maintenance team and in that

00:07:33,919 --> 00:07:38,560
thing we need to deal

00:07:34,960 --> 00:07:40,479
with a big number of sites and we work

00:07:38,560 --> 00:07:42,160
with many drop seven sites with many

00:07:40,479 --> 00:07:44,560
drupal 8 sites we're starting to work

00:07:42,160 --> 00:07:46,800
with drupal 8 sites we even have

00:07:44,560 --> 00:07:48,319
drupal 6 back in the day now we're

00:07:46,800 --> 00:07:50,879
having also gatsby

00:07:48,319 --> 00:07:52,080
so on our team anything many times we

00:07:50,879 --> 00:07:55,199
just need to have a

00:07:52,080 --> 00:07:58,160
quick way to add tests to our site so

00:07:55,199 --> 00:07:59,919
that we can automate what we've done

00:07:58,160 --> 00:08:02,080
and that's why now we're going to see

00:07:59,919 --> 00:08:03,520
with the drupal 7 integration

00:08:02,080 --> 00:08:05,440
and the process is going to be really

00:08:03,520 --> 00:08:07,919
similar so

00:08:05,440 --> 00:08:09,680
the key line again is going to be npm

00:08:07,919 --> 00:08:11,759
install cyprus

00:08:09,680 --> 00:08:13,840
and then we are going to write a test

00:08:11,759 --> 00:08:17,759
for user registration

00:08:13,840 --> 00:08:20,960
so in this case and user registration

00:08:17,759 --> 00:08:22,400
and could be as simple as we go to the

00:08:20,960 --> 00:08:25,680
homepage

00:08:22,400 --> 00:08:28,160
then we look for the create new account

00:08:25,680 --> 00:08:30,560
link we click on it and we should be in

00:08:28,160 --> 00:08:34,240
the user register url

00:08:30,560 --> 00:08:36,560
then in there i literally go to the

00:08:34,240 --> 00:08:37,839
inputs and i can start typing stuff

00:08:36,560 --> 00:08:41,200
which is pretty cool

00:08:37,839 --> 00:08:43,919
so i target the input with name name and

00:08:41,200 --> 00:08:45,519
i just type my name i type my email and

00:08:43,919 --> 00:08:48,480
then i can even and

00:08:45,519 --> 00:08:49,360
reproduce and enter so that it submits

00:08:48,480 --> 00:08:51,680
the form

00:08:49,360 --> 00:08:52,880
and then after that i'm gonna check that

00:08:51,680 --> 00:08:56,320
the resulting

00:08:52,880 --> 00:08:59,440
screen contains the word thank you

00:08:56,320 --> 00:09:03,760
and that should tell me that i have

00:08:59,440 --> 00:09:06,320
successfully and registered my user

00:09:03,760 --> 00:09:07,440
again it was like demo so there is the

00:09:06,320 --> 00:09:11,440
video feedback

00:09:07,440 --> 00:09:12,510
but i prefer to do it on real time

00:09:11,440 --> 00:09:15,649
so

00:09:12,510 --> 00:09:15,649
[Music]

00:09:16,800 --> 00:09:21,760
cool so i'm launching the drupal 7 site

00:09:19,519 --> 00:09:23,519
and just quickly check it on the editor

00:09:21,760 --> 00:09:23,920
the reason why it asked me the password

00:09:23,519 --> 00:09:26,240
just

00:09:23,920 --> 00:09:27,200
because i was cleaning up the folder to

00:09:26,240 --> 00:09:31,279
make sure before i

00:09:27,200 --> 00:09:34,399
create it again um yeah in here we can

00:09:31,279 --> 00:09:36,640
check it i'm just creating a folder for

00:09:34,399 --> 00:09:37,760
this demo i'm just using the drupal 7

00:09:36,640 --> 00:09:41,120
example available

00:09:37,760 --> 00:09:43,920
in amazing io which uses

00:09:41,120 --> 00:09:44,240
lagoon and the supporting tool is pikmi

00:09:43,920 --> 00:09:46,959
but

00:09:44,240 --> 00:09:48,000
again you can use any drupal 7 site that

00:09:46,959 --> 00:09:50,880
you have

00:09:48,000 --> 00:09:51,680
then i'm launching it with docker and

00:09:50,880 --> 00:09:53,519
once i've

00:09:51,680 --> 00:09:55,600
launched it in docker i'm just running

00:09:53,519 --> 00:09:58,240
the default site install

00:09:55,600 --> 00:09:59,360
in there so hopefully all that is

00:09:58,240 --> 00:10:02,160
happening in here

00:09:59,360 --> 00:10:03,040
as you can see in the background after

00:10:02,160 --> 00:10:05,920
that

00:10:03,040 --> 00:10:06,800
i'm going to create the test where i'm

00:10:05,920 --> 00:10:10,000
obviously going to

00:10:06,800 --> 00:10:11,920
install the npm packets and i'm just

00:10:10,000 --> 00:10:12,800
going to do the test for register the

00:10:11,920 --> 00:10:15,279
user and

00:10:12,800 --> 00:10:17,440
as we said this is pretty much the same

00:10:15,279 --> 00:10:19,360
thing that i went putting i was putting

00:10:17,440 --> 00:10:21,680
in the in the slides

00:10:19,360 --> 00:10:23,760
and as i said before this code will be

00:10:21,680 --> 00:10:26,160
available i'm just going super quick

00:10:23,760 --> 00:10:28,800
because i'm aware of the time

00:10:26,160 --> 00:10:29,279
and but all this is gonna be available

00:10:28,800 --> 00:10:32,000
in the

00:10:29,279 --> 00:10:34,320
in the repo and then we create the test

00:10:32,000 --> 00:10:34,880
and we do exactly as we did before we

00:10:34,320 --> 00:10:37,920
just run

00:10:34,880 --> 00:10:38,640
mpx cypress open and we are done so as

00:10:37,920 --> 00:10:42,079
we can see

00:10:38,640 --> 00:10:44,079
it is installing cypress and

00:10:42,079 --> 00:10:46,079
i'm just yeah just downloading npm

00:10:44,079 --> 00:10:46,720
packages and all these kind of things

00:10:46,079 --> 00:10:48,880
let's

00:10:46,720 --> 00:10:50,160
give it here we go okay cool it just

00:10:48,880 --> 00:10:53,040
finished so i'm just going to hit

00:10:50,160 --> 00:10:54,880
enter and this should trigger exactly

00:10:53,040 --> 00:10:55,920
the same experience as before before it

00:10:54,880 --> 00:10:58,880
was a blank

00:10:55,920 --> 00:11:00,000
site could be anything and now we are

00:10:58,880 --> 00:11:01,839
actually having a drupal

00:11:00,000 --> 00:11:03,440
site so i'm going to click on this user

00:11:01,839 --> 00:11:06,320
register

00:11:03,440 --> 00:11:06,720
and see what happens it opens the window

00:11:06,320 --> 00:11:10,800
it

00:11:06,720 --> 00:11:13,279
opens the url that and this project is

00:11:10,800 --> 00:11:14,399
in and as you can see it's all going

00:11:13,279 --> 00:11:16,880
pretty quick

00:11:14,399 --> 00:11:19,120
but again the cool thing i can go back

00:11:16,880 --> 00:11:22,079
in time this is the home page of a group

00:11:19,120 --> 00:11:23,920
of a plain drupal 7 vanilla installation

00:11:22,079 --> 00:11:25,920
i'm gonna look for the create new

00:11:23,920 --> 00:11:27,680
account link i'm gonna click on it

00:11:25,920 --> 00:11:29,920
and then i'm gonna check that the url is

00:11:27,680 --> 00:11:33,200
right so step one of the test

00:11:29,920 --> 00:11:34,000
green then i'm gonna start searching for

00:11:33,200 --> 00:11:37,120
the input

00:11:34,000 --> 00:11:39,040
i'm gonna type france here

00:11:37,120 --> 00:11:41,040
i'm gonna search for email i'm gonna

00:11:39,040 --> 00:11:43,920
type type my email

00:11:41,040 --> 00:11:45,360
and hit enter and then after that we can

00:11:43,920 --> 00:11:47,360
see all the events happening

00:11:45,360 --> 00:11:48,880
and we can see that i get redirected to

00:11:47,360 --> 00:11:52,399
the home page with this

00:11:48,880 --> 00:11:55,600
thank you page again remember we could

00:11:52,399 --> 00:11:56,959
ping any version in time trigger the

00:11:55,600 --> 00:11:59,600
inspector

00:11:56,959 --> 00:12:01,040
uh inspect the element because it's all

00:11:59,600 --> 00:12:05,120
running on google chrome

00:12:01,040 --> 00:12:06,800
so yeah there is a huge advantage when

00:12:05,120 --> 00:12:11,200
it comes to debugging the on

00:12:06,800 --> 00:12:12,880
the on tests um cool so that was 2x7 i

00:12:11,200 --> 00:12:15,600
also wanted to do this

00:12:12,880 --> 00:12:16,720
um as a reference to something i would

00:12:15,600 --> 00:12:19,839
say at the very end

00:12:16,720 --> 00:12:22,560
and we have five minutes left but i

00:12:19,839 --> 00:12:26,079
think we are actually good with time

00:12:22,560 --> 00:12:29,519
uh let me just go back to the

00:12:26,079 --> 00:12:30,480
slides uh here we go so we don't need to

00:12:29,519 --> 00:12:34,079
play the video

00:12:30,480 --> 00:12:35,519
we can just go ahead and now drupal 8

00:12:34,079 --> 00:12:37,040
integration

00:12:35,519 --> 00:12:38,880
you can imagine i think you know the

00:12:37,040 --> 00:12:42,160
drill by now we've been for

00:12:38,880 --> 00:12:45,040
long 10 minutes talking about it so

00:12:42,160 --> 00:12:48,000
you can guess how this goes we just

00:12:45,040 --> 00:12:51,519
installed cyprus and that's about it

00:12:48,000 --> 00:12:54,800
we saw before that we needed to actually

00:12:51,519 --> 00:12:57,360
type the url of the

00:12:54,800 --> 00:12:57,920
of the site that we're trying to test

00:12:57,360 --> 00:13:00,560
and

00:12:57,920 --> 00:13:02,000
it's not ideal when you are running like

00:13:00,560 --> 00:13:04,399
100 tests on a site

00:13:02,000 --> 00:13:06,160
to need it to write every single time it

00:13:04,399 --> 00:13:09,680
could be some idea to do something

00:13:06,160 --> 00:13:11,920
like this or like this um

00:13:09,680 --> 00:13:14,800
that's super easy with cypress all you

00:13:11,920 --> 00:13:15,440
need to do is just create a cypress.json

00:13:14,800 --> 00:13:17,600
file

00:13:15,440 --> 00:13:19,600
and in there you can add options that

00:13:17,600 --> 00:13:22,240
will be run and that will be

00:13:19,600 --> 00:13:23,760
taken for all the tests in this case we

00:13:22,240 --> 00:13:27,120
are just put the base url

00:13:23,760 --> 00:13:28,560
as localhost and 888

00:13:27,120 --> 00:13:30,320
so that we don't need to type it over

00:13:28,560 --> 00:13:32,160
and over and over and

00:13:30,320 --> 00:13:34,240
in here we are going to do three tests

00:13:32,160 --> 00:13:36,000
check that one page access imagine that

00:13:34,240 --> 00:13:38,079
that page is super important

00:13:36,000 --> 00:13:40,000
for my site we need to check that it's

00:13:38,079 --> 00:13:42,480
always available that is working

00:13:40,000 --> 00:13:44,079
then we also going to test quickly on

00:13:42,480 --> 00:13:45,120
language switcher and we're going to

00:13:44,079 --> 00:13:47,279
test logging

00:13:45,120 --> 00:13:49,199
and you can just get as creative as you

00:13:47,279 --> 00:13:51,519
want to the test

00:13:49,199 --> 00:13:53,839
for this i'm just using the umami demo

00:13:51,519 --> 00:13:56,560
and how could i check that a page exists

00:13:53,839 --> 00:14:00,079
now i don't need to type the whole url

00:13:56,560 --> 00:14:02,160
i can just check the recipes link

00:14:00,079 --> 00:14:03,199
click clicking it and then the url

00:14:02,160 --> 00:14:05,760
should be recipes

00:14:03,199 --> 00:14:08,000
the test could be as easy as that how do

00:14:05,760 --> 00:14:10,079
i test a language switcher i can just go

00:14:08,000 --> 00:14:12,240
to the link that says espanol

00:14:10,079 --> 00:14:14,560
uh click on it and then just make sure

00:14:12,240 --> 00:14:15,279
that the url contains es then i'm gonna

00:14:14,560 --> 00:14:17,600
go to the

00:14:15,279 --> 00:14:19,040
fetas link which is the equivalent of

00:14:17,600 --> 00:14:20,480
the one with check before

00:14:19,040 --> 00:14:22,480
and i'm going to even check that it

00:14:20,480 --> 00:14:24,320
contains crema catalana just because i

00:14:22,480 --> 00:14:25,519
like it and it should be visible so that

00:14:24,320 --> 00:14:27,360
could be the test

00:14:25,519 --> 00:14:28,560
and and then we're also going to check

00:14:27,360 --> 00:14:31,760
the logging so

00:14:28,560 --> 00:14:34,399
we could just go to the user login type

00:14:31,760 --> 00:14:36,079
username type the high security password

00:14:34,399 --> 00:14:38,399
that i added in here

00:14:36,079 --> 00:14:39,199
and then we could check that the url is

00:14:38,399 --> 00:14:42,959
user1

00:14:39,199 --> 00:14:46,240
and that the h1 actually contains admin

00:14:42,959 --> 00:14:49,519
let's see that in action again

00:14:46,240 --> 00:14:52,160
let's just run the drupal 8

00:14:49,519 --> 00:14:52,560
site on where we have around 3 minutes

00:14:52,160 --> 00:14:55,600
that

00:14:52,560 --> 00:14:55,600
should be enough

00:14:56,880 --> 00:14:59,839
hopefully

00:15:00,639 --> 00:15:04,560
here we go okay i will show you the

00:15:02,800 --> 00:15:08,399
script why this is uh

00:15:04,560 --> 00:15:10,639
running so the drupal 8 i'm just using

00:15:08,399 --> 00:15:14,000
the official documentation for drupal

00:15:10,639 --> 00:15:17,600
so i'm just bringing the lightest drupal

00:15:14,000 --> 00:15:19,440
i'm just running yeah i'm

00:15:17,600 --> 00:15:20,639
uncompressing it into into the folder

00:15:19,440 --> 00:15:22,959
i'm also bringing

00:15:20,639 --> 00:15:24,839
truss so i can just run the drast

00:15:22,959 --> 00:15:27,279
commands and

00:15:24,839 --> 00:15:27,839
because uh i tried with the default

00:15:27,279 --> 00:15:30,160
settings

00:15:27,839 --> 00:15:31,600
but it was crossing due to memory so i'm

00:15:30,160 --> 00:15:32,560
just making sure that we have enough

00:15:31,600 --> 00:15:35,399
memory

00:15:32,560 --> 00:15:37,040
uh i'm adding that url as i said to the

00:15:35,399 --> 00:15:40,000
cypress.json file

00:15:37,040 --> 00:15:41,360
i'm adding the cypress library and then

00:15:40,000 --> 00:15:43,360
in this case because i was copying

00:15:41,360 --> 00:15:44,160
several tests i just put them into this

00:15:43,360 --> 00:15:45,839
folder

00:15:44,160 --> 00:15:47,519
and that's all i'm doing i'm copying

00:15:45,839 --> 00:15:50,639
those assets into the

00:15:47,519 --> 00:15:51,920
right folder and then i'm just

00:15:50,639 --> 00:15:54,639
installing the demo

00:15:51,920 --> 00:15:56,399
mummy and with that database and we can

00:15:54,639 --> 00:15:58,320
see the account password

00:15:56,399 --> 00:16:00,079
and then launching everything on

00:15:58,320 --> 00:16:04,959
localhost and that's a bit

00:16:00,079 --> 00:16:06,880
so hopefully it is ready it is great

00:16:04,959 --> 00:16:09,839
and now we're gonna see again we follow

00:16:06,880 --> 00:16:10,560
the same process blank side drupal 7 0.8

00:16:09,839 --> 00:16:13,120
side

00:16:10,560 --> 00:16:16,639
and now we have the three tests in here

00:16:13,120 --> 00:16:16,639
so go to the recipes page

00:16:18,720 --> 00:16:22,320
remember we can always go back in time

00:16:21,120 --> 00:16:25,120
with all this

00:16:22,320 --> 00:16:26,320
and yeah here we go so it went there i

00:16:25,120 --> 00:16:29,920
can go back in time

00:16:26,320 --> 00:16:33,120
revisit the steps i can trigger the

00:16:29,920 --> 00:16:34,560
change language test which is pretty

00:16:33,120 --> 00:16:37,360
much

00:16:34,560 --> 00:16:38,800
yeah what we saw before it goes to the

00:16:37,360 --> 00:16:41,680
espanola clicks on it

00:16:38,800 --> 00:16:43,440
checks the url then checks rosettas and

00:16:41,680 --> 00:16:44,560
checks that it contains chrome catalan

00:16:43,440 --> 00:16:46,959
and we can see how

00:16:44,560 --> 00:16:48,079
it goes into the part of the site that

00:16:46,959 --> 00:16:51,839
contains it

00:16:48,079 --> 00:16:51,839
and then the logging page

00:16:54,639 --> 00:16:58,800
and we can see that there is the h1

00:16:56,560 --> 00:16:59,839
containing admin that the url is what we

00:16:58,800 --> 00:17:02,959
expected

00:16:59,839 --> 00:17:04,720
i could even run all the tests

00:17:02,959 --> 00:17:06,160
together i don't need to run them one at

00:17:04,720 --> 00:17:07,919
a time okay

00:17:06,160 --> 00:17:10,240
and this probably gives you ideas for

00:17:07,919 --> 00:17:10,720
the next slide so as you can see this is

00:17:10,240 --> 00:17:14,000
running

00:17:10,720 --> 00:17:17,439
all three tests and

00:17:14,000 --> 00:17:20,640
um cool so let's go back to the slides

00:17:17,439 --> 00:17:23,039
and it will work i'm happy about that

00:17:20,640 --> 00:17:24,640
i know it's 55 but i started two minutes

00:17:23,039 --> 00:17:26,559
late so i'm gonna take the liberty of

00:17:24,640 --> 00:17:30,240
taking those two minutes

00:17:26,559 --> 00:17:33,440
uh what's the way forward

00:17:30,240 --> 00:17:36,080
so just play with it you have seen how

00:17:33,440 --> 00:17:36,880
easy to to do it the documentation is

00:17:36,080 --> 00:17:40,240
great

00:17:36,880 --> 00:17:42,559
and we can go into we can think about

00:17:40,240 --> 00:17:44,240
ci integration we can think about cross

00:17:42,559 --> 00:17:47,280
browser testing we can

00:17:44,240 --> 00:17:48,720
do things like visual testing okay so

00:17:47,280 --> 00:17:50,640
you can do a lot of things the

00:17:48,720 --> 00:17:52,880
documentation is great and one of my

00:17:50,640 --> 00:17:55,120
main goals was for you all to see

00:17:52,880 --> 00:17:56,080
how easy to install it is it's just a

00:17:55,120 --> 00:17:58,559
few lines

00:17:56,080 --> 00:17:59,120
you're good you're good literally i was

00:17:58,559 --> 00:18:01,679
playing

00:17:59,120 --> 00:18:03,840
with one of the tests and i said okay

00:18:01,679 --> 00:18:06,160
what if i just test the

00:18:03,840 --> 00:18:06,960
yeah drupal europe page and i did it and

00:18:06,160 --> 00:18:09,200
it worked

00:18:06,960 --> 00:18:10,480
so you are free to even test with

00:18:09,200 --> 00:18:12,400
existing sites you don't

00:18:10,480 --> 00:18:14,640
even need to have a site there is a

00:18:12,400 --> 00:18:15,120
drupal 8 module the only reason why i

00:18:14,640 --> 00:18:16,720
didn't

00:18:15,120 --> 00:18:18,480
use it is because i wanted to show a

00:18:16,720 --> 00:18:20,480
generic way to use it

00:18:18,480 --> 00:18:21,600
but if you install this module it will

00:18:20,480 --> 00:18:24,320
do all the

00:18:21,600 --> 00:18:24,720
we've done so far and add a few goodies

00:18:24,320 --> 00:18:26,480
so

00:18:24,720 --> 00:18:28,160
i recommend it it's only available for

00:18:26,480 --> 00:18:31,919
drupal 8 and then just

00:18:28,160 --> 00:18:33,919
explore try and just yeah and

00:18:31,919 --> 00:18:35,280
using how easy is to to get up and

00:18:33,919 --> 00:18:37,840
running

00:18:35,280 --> 00:18:38,720
the code is available in my github

00:18:37,840 --> 00:18:41,600
account so

00:18:38,720 --> 00:18:43,280
it's just f j garling and then in there

00:18:41,600 --> 00:18:47,039
you should find a repo which is

00:18:43,280 --> 00:18:48,640
true by barcelona 2020 which is this one

00:18:47,039 --> 00:18:50,160
and then yeah you can see all the

00:18:48,640 --> 00:18:53,039
scripts that i've been running

00:18:50,160 --> 00:18:54,400
like blank site like it's exactly the

00:18:53,039 --> 00:18:54,880
same that i've been that i've been

00:18:54,400 --> 00:18:57,440
showing

00:18:54,880 --> 00:18:58,400
i've been working off that all the time

00:18:57,440 --> 00:19:00,480
so

00:18:58,400 --> 00:19:01,760
there is also a link to the slides in

00:19:00,480 --> 00:19:03,840
here so

00:19:01,760 --> 00:19:05,840
you have all the links that you might

00:19:03,840 --> 00:19:09,039
need in there

00:19:05,840 --> 00:19:12,640
um and i think that could be it

00:19:09,039 --> 00:19:14,000
and nick is there any are there any

00:19:12,640 --> 00:19:15,919
questions

00:19:14,000 --> 00:19:18,080
yeah we've got a couple for you here um

00:19:15,919 --> 00:19:19,679
so we've got one from sria

00:19:18,080 --> 00:19:21,360
which is kind of related to one of your

00:19:19,679 --> 00:19:23,840
last points and it's asking

00:19:21,360 --> 00:19:25,039
how we can automate microsoft login

00:19:23,840 --> 00:19:28,080
google login

00:19:25,039 --> 00:19:29,679
open id clients with cyprus um can you

00:19:28,080 --> 00:19:32,559
please provide some references

00:19:29,679 --> 00:19:33,120
for this or any examples so being able

00:19:32,559 --> 00:19:37,120
to kind of

00:19:33,120 --> 00:19:39,039
log in on a third-party site i guess

00:19:37,120 --> 00:19:40,400
yeah i mean that's a very good point um

00:19:39,039 --> 00:19:44,640
as you have seen on the test

00:19:40,400 --> 00:19:45,679
and cyprus follows up the links the the

00:19:44,640 --> 00:19:48,720
chain of links

00:19:45,679 --> 00:19:50,799
so it's an end-to-end test so

00:19:48,720 --> 00:19:52,000
whatever happens in real life you get

00:19:50,799 --> 00:19:55,039
redirected to

00:19:52,000 --> 00:19:58,960
to this or that it will just

00:19:55,039 --> 00:20:02,080
try to do it however for things like um

00:19:58,960 --> 00:20:02,880
yeah like external authentication i just

00:20:02,080 --> 00:20:04,559
recommend to

00:20:02,880 --> 00:20:06,799
check the documentation because each

00:20:04,559 --> 00:20:08,799
provider could be different like and

00:20:06,799 --> 00:20:12,240
we've been trying and playing with an

00:20:08,799 --> 00:20:15,280
oauth and we had a few issues to do it

00:20:12,240 --> 00:20:15,919
be a via cypress so i don't know if in

00:20:15,280 --> 00:20:18,240
this case

00:20:15,919 --> 00:20:19,760
the the microsoft experience could be

00:20:18,240 --> 00:20:22,799
different or similar

00:20:19,760 --> 00:20:25,840
so i really don't want to

00:20:22,799 --> 00:20:27,679
go into into an unknown territory i

00:20:25,840 --> 00:20:31,039
suggest that you check the documentation

00:20:27,679 --> 00:20:31,039
and see what's available for it

00:20:32,400 --> 00:20:37,440
cool uh yeah so um

00:20:35,440 --> 00:20:39,679
talking about iframes within a page

00:20:37,440 --> 00:20:43,919
testing those

00:20:39,679 --> 00:20:46,240
uh good point i mean it's uh

00:20:43,919 --> 00:20:48,080
again i would just ask you to refer to

00:20:46,240 --> 00:20:49,760
the to the documentation

00:20:48,080 --> 00:20:51,919
uh i don't know if in this case you're

00:20:49,760 --> 00:20:54,640
asking to have interaction within

00:20:51,919 --> 00:20:55,120
outside the iframe or inside the iframe

00:20:54,640 --> 00:20:57,440
i mean

00:20:55,120 --> 00:20:59,440
if the iphone at the end is a url an

00:20:57,440 --> 00:21:00,480
external url so you could always do

00:20:59,440 --> 00:21:03,679
something like

00:21:00,480 --> 00:21:05,440
testing purely the iframe guide that uri

00:21:03,679 --> 00:21:06,159
of the iframe and then do any test that

00:21:05,440 --> 00:21:08,799
you want

00:21:06,159 --> 00:21:09,440
within the iframe but i don't know if in

00:21:08,799 --> 00:21:12,559
this case

00:21:09,440 --> 00:21:13,919
uh you're saying interacting outside and

00:21:12,559 --> 00:21:16,799
inside the iframe

00:21:13,919 --> 00:21:17,440
and these kind of things uh as uh as

00:21:16,799 --> 00:21:19,520
mentioned

00:21:17,440 --> 00:21:20,799
i check the commentation and and have a

00:21:19,520 --> 00:21:24,240
have a go and play it

00:21:20,799 --> 00:21:26,320
and play with it and i'm also gonna be

00:21:24,240 --> 00:21:27,760
reachable i mean you can also ping me in

00:21:26,320 --> 00:21:30,240
the in the

00:21:27,760 --> 00:21:32,799
booth i'm just confused that it's 10 59

00:21:30,240 --> 00:21:34,640
and we can just

00:21:32,799 --> 00:21:36,799
we might just finish the session at any

00:21:34,640 --> 00:21:39,200
second so feel free to reach out to me

00:21:36,799 --> 00:21:41,120
i will stay also here and see if i can

00:21:39,200 --> 00:21:44,559
see the questions and try to

00:21:41,120 --> 00:21:46,880
reply and it's one of them

00:21:44,559 --> 00:21:47,840
uh individually but you can also you can

00:21:46,880 --> 00:21:51,039
also talk to me

00:21:47,840 --> 00:21:51,520
in the in the booth and i don't know if

00:21:51,039 --> 00:21:55,440
we have

00:21:51,520 --> 00:21:58,080
maybe nick one more quick quick one

00:21:55,440 --> 00:21:59,840
yeah sure um so rodrigo asked can you

00:21:58,080 --> 00:22:01,919
talk more about the drupal integration

00:21:59,840 --> 00:22:03,600
does it include concepts such as create

00:22:01,919 --> 00:22:06,640
node with field so i guess

00:22:03,600 --> 00:22:09,039
more not on the front end um but

00:22:06,640 --> 00:22:10,000
yeah back end admin connect users i

00:22:09,039 --> 00:22:12,640
guess

00:22:10,000 --> 00:22:13,520
um yeah i mean we have done one of the

00:22:12,640 --> 00:22:15,760
tests which is

00:22:13,520 --> 00:22:18,240
logging and once you are in the login i

00:22:15,760 --> 00:22:21,520
mean it's literally visiting urls

00:22:18,240 --> 00:22:22,720
having field names so um it listens for

00:22:21,520 --> 00:22:24,880
ajax requests

00:22:22,720 --> 00:22:26,320
so probably the most difficult part is

00:22:24,880 --> 00:22:28,240
to really find out

00:22:26,320 --> 00:22:29,520
what's the name of the input that we

00:22:28,240 --> 00:22:32,559
want to target

00:22:29,520 --> 00:22:33,360
uh sorry let me just yeah like this kind

00:22:32,559 --> 00:22:36,240
of things

00:22:33,360 --> 00:22:38,080
but we can i mean it follows obsessions

00:22:36,240 --> 00:22:39,120
and all these kind of things we we saw

00:22:38,080 --> 00:22:41,280
in the drupal 8

00:22:39,120 --> 00:22:43,360
tests that we were checking the login

00:22:41,280 --> 00:22:46,080
and at this point we are logging

00:22:43,360 --> 00:22:46,640
so we can we could just literally go to

00:22:46,080 --> 00:22:50,240
the

00:22:46,640 --> 00:22:51,120
node add url and then start adding notes

00:22:50,240 --> 00:22:55,039
and all these

00:22:51,120 --> 00:22:57,039
kind of things uh cool it's 11 o'clock

00:22:55,039 --> 00:22:57,440
and sorry for the rush of time we knew

00:22:57,039 --> 00:22:59,679
this

00:22:57,440 --> 00:23:00,880
from the beginning but as i said i will

00:22:59,679 --> 00:23:04,320
follow up on this

00:23:00,880 --> 00:23:05,039
and now shortly and you can reach out to

00:23:04,320 --> 00:23:07,200
me in the

00:23:05,039 --> 00:23:08,080
in the booth if you want sorry for the

00:23:07,200 --> 00:23:10,720
lightning speed

00:23:08,080 --> 00:23:12,080
but i hope that it was good for

00:23:10,720 --> 00:23:15,200
everybody

00:23:12,080 --> 00:23:15,200

YouTube URL: https://www.youtube.com/watch?v=eL4zkArYQLo


