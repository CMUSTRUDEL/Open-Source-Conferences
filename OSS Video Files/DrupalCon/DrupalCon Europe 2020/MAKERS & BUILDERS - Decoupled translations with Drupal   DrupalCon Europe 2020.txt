Title: MAKERS & BUILDERS - Decoupled translations with Drupal   DrupalCon Europe 2020
Publication date: 2021-01-19
Playlist: DrupalCon Europe 2020
Description: 
	Decoupled translations with Drupal Gatsby is a popular static site generator that uses React, and it’s a perfect match for a decoupled Drupal architecture to create lightning-fast websites. This session will detail how to utilise Drupal’s exceptional multilingual features to produce a fully localised Gatsby site.
Captions: 
	00:00:04,059 --> 00:00:09,889
[Music]

00:00:13,599 --> 00:00:17,279
hello there

00:00:14,880 --> 00:00:18,560
i'm nick o'sullivan i work at

00:00:17,279 --> 00:00:21,359
amazinglubs

00:00:18,560 --> 00:00:24,080
and today i'm going to talk to you about

00:00:21,359 --> 00:00:27,279
translations and multilingual content

00:00:24,080 --> 00:00:28,800
in the context of decoupled

00:00:27,279 --> 00:00:31,039
architectures

00:00:28,800 --> 00:00:32,800
and in this example we'll be looking at

00:00:31,039 --> 00:00:36,160
using drupal with

00:00:32,800 --> 00:00:37,280
gatsby which is a popular static site

00:00:36,160 --> 00:00:39,200
generator

00:00:37,280 --> 00:00:41,120
um i think we've already had one or two

00:00:39,200 --> 00:00:43,280
talks uh this morning on it and

00:00:41,120 --> 00:00:44,960
plenty more to come everyone's loving it

00:00:43,280 --> 00:00:48,000
so yeah you'll get acquainted

00:00:44,960 --> 00:00:50,879
uh with it if you don't already know um

00:00:48,000 --> 00:00:52,559
and yeah if you want to ask me a

00:00:50,879 --> 00:00:55,440
question and thing afterwards

00:00:52,559 --> 00:00:55,840
um or find me on drupal.org um these

00:00:55,440 --> 00:01:00,320
name

00:00:55,840 --> 00:01:00,320
and handle is o's sullivan

00:01:00,399 --> 00:01:04,159
and so yeah as i said i work at

00:01:03,199 --> 00:01:07,360
amazinglabs

00:01:04,159 --> 00:01:09,119
been there a bit over a year now um and

00:01:07,360 --> 00:01:11,280
in previous jobs i've worked with drupal

00:01:09,119 --> 00:01:14,479
7 and 8

00:01:11,280 --> 00:01:18,240
and bit of six over the past eight years

00:01:14,479 --> 00:01:21,200
and the sort of recurring theme um

00:01:18,240 --> 00:01:22,240
in 2020 has been sort of decoupled

00:01:21,200 --> 00:01:26,880
solutions

00:01:22,240 --> 00:01:30,079
um with

00:01:26,880 --> 00:01:30,640
um as the front end and a variety of of

00:01:30,079 --> 00:01:34,159
back ends

00:01:30,640 --> 00:01:36,240
including drupal 7 8 9 and other cms's

00:01:34,159 --> 00:01:37,680
like contentful which is sort of a cms

00:01:36,240 --> 00:01:40,560
as a service

00:01:37,680 --> 00:01:41,360
and so i've had a good bit of experience

00:01:40,560 --> 00:01:43,680
this year with

00:01:41,360 --> 00:01:44,799
different approaches to decoupled

00:01:43,680 --> 00:01:47,920
translations

00:01:44,799 --> 00:01:50,799
um using drupal and other cmss and

00:01:47,920 --> 00:01:51,200
most of our clients do need their sites

00:01:50,799 --> 00:01:54,560
uh

00:01:51,200 --> 00:01:57,200
in multiple languages and so yeah

00:01:54,560 --> 00:01:58,079
we've sort of been focused on that this

00:01:57,200 --> 00:02:01,360
year

00:01:58,079 --> 00:02:05,040
and the yeah the motive

00:02:01,360 --> 00:02:05,680
for for this uh talk and the associated

00:02:05,040 --> 00:02:08,399
module

00:02:05,680 --> 00:02:08,879
and gatsby plug-in that i created is

00:02:08,399 --> 00:02:11,440
just

00:02:08,879 --> 00:02:12,239
trying to find uh yeah sort of a unified

00:02:11,440 --> 00:02:14,400
approach

00:02:12,239 --> 00:02:16,160
uh to put my mind at rest because we've

00:02:14,400 --> 00:02:18,319
done things like in drupal 7

00:02:16,160 --> 00:02:19,680
there was an existing sort of custom

00:02:18,319 --> 00:02:22,959
entities used for

00:02:19,680 --> 00:02:26,319
translating um interface uh

00:02:22,959 --> 00:02:29,200
text and yeah we've had a variety of

00:02:26,319 --> 00:02:31,040
solutions that we've had to adapt to and

00:02:29,200 --> 00:02:34,080
yeah hopefully this kind of

00:02:31,040 --> 00:02:36,319
gathers that knowledge

00:02:34,080 --> 00:02:38,560
so as i just mentioned interface and

00:02:36,319 --> 00:02:40,720
content i thought it'd be good

00:02:38,560 --> 00:02:42,400
to just go over the difference of those

00:02:40,720 --> 00:02:43,440
and if you've worked in a sort of

00:02:42,400 --> 00:02:45,680
multilingual

00:02:43,440 --> 00:02:47,120
drupal site before they should be fairly

00:02:45,680 --> 00:02:49,440
familiar terms

00:02:47,120 --> 00:02:50,160
so content uh translations everything

00:02:49,440 --> 00:02:53,440
managed by

00:02:50,160 --> 00:02:56,800
a content editor or uh whoever's yeah

00:02:53,440 --> 00:02:59,519
editing that in drupal um

00:02:56,800 --> 00:03:00,400
and yeah other cms's and then interface

00:02:59,519 --> 00:03:03,360
translations

00:03:00,400 --> 00:03:04,480
are usually created by uh developers uh

00:03:03,360 --> 00:03:07,840
whether that's

00:03:04,480 --> 00:03:10,560
in tweak templates wrapping that in a t

00:03:07,840 --> 00:03:11,120
function or yeah like a javascript front

00:03:10,560 --> 00:03:13,920
end

00:03:11,120 --> 00:03:15,599
uh much with the same t function to say

00:03:13,920 --> 00:03:16,640
this is a string that i want to be

00:03:15,599 --> 00:03:19,200
translated

00:03:16,640 --> 00:03:19,920
at some point and so yeah the main

00:03:19,200 --> 00:03:22,640
difference there

00:03:19,920 --> 00:03:23,280
is uh you're sort of passing from a

00:03:22,640 --> 00:03:26,879
developer

00:03:23,280 --> 00:03:30,080
to a translation team or maybe just

00:03:26,879 --> 00:03:33,440
content editor so yeah just to get those

00:03:30,080 --> 00:03:36,080
two terms clear

00:03:33,440 --> 00:03:37,599
so after sort of recently when i heard

00:03:36,080 --> 00:03:40,400
drupalcon was coming up

00:03:37,599 --> 00:03:42,400
um i wanted to try and yeah combine the

00:03:40,400 --> 00:03:44,000
knowledge that i've i've got from

00:03:42,400 --> 00:03:45,519
an experience from the different

00:03:44,000 --> 00:03:47,360
projects that have been doing these sort

00:03:45,519 --> 00:03:50,480
of decoupled multilingual

00:03:47,360 --> 00:03:51,120
um solutions and try and bring it

00:03:50,480 --> 00:03:52,959
together

00:03:51,120 --> 00:03:54,480
uh in a unified place because we've

00:03:52,959 --> 00:03:57,519
we've sort of managed as i said

00:03:54,480 --> 00:04:00,000
in drupal 7 custom entities um

00:03:57,519 --> 00:04:02,080
google spreadsheets just as a quick kind

00:04:00,000 --> 00:04:04,799
of free

00:04:02,080 --> 00:04:06,159
solution to that and so i thought you

00:04:04,799 --> 00:04:08,640
know

00:04:06,159 --> 00:04:09,200
drupal 8 has yeah a fantastic way to

00:04:08,640 --> 00:04:12,400
manage

00:04:09,200 --> 00:04:15,599
um user interface strings

00:04:12,400 --> 00:04:17,519
so can we not you know leverage that in

00:04:15,599 --> 00:04:18,639
our decoupled sites because we're always

00:04:17,519 --> 00:04:21,840
having to whenever

00:04:18,639 --> 00:04:24,400
we ship or deploy a new feature

00:04:21,840 --> 00:04:26,639
there'll be certain um interface

00:04:24,400 --> 00:04:29,759
translations so for example the

00:04:26,639 --> 00:04:32,160
button like

00:04:29,759 --> 00:04:33,919
submit it and then that might have to

00:04:32,160 --> 00:04:35,040
get translated into nine different

00:04:33,919 --> 00:04:38,320
languages

00:04:35,040 --> 00:04:40,960
um and yeah it's

00:04:38,320 --> 00:04:41,680
yeah a workflow that you kind of need to

00:04:40,960 --> 00:04:44,160
consider

00:04:41,680 --> 00:04:45,520
when creating multilingual sites so the

00:04:44,160 --> 00:04:48,000
goal was to get

00:04:45,520 --> 00:04:48,560
drupal and providing the multilingual

00:04:48,000 --> 00:04:49,919
content

00:04:48,560 --> 00:04:52,240
and so that that can be consumed by

00:04:49,919 --> 00:04:53,280
front end which is nicely done within

00:04:52,240 --> 00:04:55,680
cornell within

00:04:53,280 --> 00:04:58,000
json api there are obviously other

00:04:55,680 --> 00:05:01,680
solutions like with graphql api

00:04:58,000 --> 00:05:02,400
um and also i wanted the ability to

00:05:01,680 --> 00:05:04,240
manage those

00:05:02,400 --> 00:05:06,240
interface translations so we already

00:05:04,240 --> 00:05:08,320
have that ui within drupal

00:05:06,240 --> 00:05:10,400
um and i wanted to be able to expose

00:05:08,320 --> 00:05:13,520
that and be able to write to it

00:05:10,400 --> 00:05:15,120
now those aren't um entities within

00:05:13,520 --> 00:05:18,080
drupal

00:05:15,120 --> 00:05:20,000
so it was necessary to create some

00:05:18,080 --> 00:05:22,240
custom end points for those

00:05:20,000 --> 00:05:23,120
want to be able to retrieve it and want

00:05:22,240 --> 00:05:25,039
to be able to add

00:05:23,120 --> 00:05:27,039
new strings because usually that picks

00:05:25,039 --> 00:05:30,400
up within drupal from using

00:05:27,039 --> 00:05:30,880
the t function um and we just needed a

00:05:30,400 --> 00:05:34,240
way

00:05:30,880 --> 00:05:37,360
for a decoupled architecture to

00:05:34,240 --> 00:05:39,919
work in the same way so i created the

00:05:37,360 --> 00:05:42,720
decoupled interface translations module

00:05:39,919 --> 00:05:45,600
um and that's yeah on drupal.org

00:05:42,720 --> 00:05:46,160
you'll be able to use that um in in

00:05:45,600 --> 00:05:49,759
projects

00:05:46,160 --> 00:05:51,360
now um it's yeah early stages um

00:05:49,759 --> 00:05:53,039
but yeah that's cool and then on the

00:05:51,360 --> 00:05:53,840
gatsby side of things so the chosen

00:05:53,039 --> 00:05:56,560
front end

00:05:53,840 --> 00:05:57,759
i wanted to be able to um source content

00:05:56,560 --> 00:06:01,039
from drupal um

00:05:57,759 --> 00:06:04,400
multilingual so every enabled language

00:06:01,039 --> 00:06:07,440
um which is made easy by the drupal

00:06:04,400 --> 00:06:09,520
uh the gatsby source drupal plugin um

00:06:07,440 --> 00:06:10,720
however currently it doesn't support

00:06:09,520 --> 00:06:12,880
multilingual content

00:06:10,720 --> 00:06:13,759
without a patch um it's been open for a

00:06:12,880 --> 00:06:17,440
while

00:06:13,759 --> 00:06:19,840
um and but with that it's all good

00:06:17,440 --> 00:06:20,639
and yeah apply the patch and you're able

00:06:19,840 --> 00:06:23,919
to get

00:06:20,639 --> 00:06:26,639
multilingual content via json api

00:06:23,919 --> 00:06:26,639
so that source

00:06:28,000 --> 00:06:34,000
makes all its requests to the json api

00:06:31,600 --> 00:06:36,560
and then pulls that into gatsby and then

00:06:34,000 --> 00:06:38,240
interface translations uh we wanted to

00:06:36,560 --> 00:06:40,880
achieve that so for example again the

00:06:38,240 --> 00:06:43,680
submit button if i was to

00:06:40,880 --> 00:06:44,639
if i was to write the submit label i

00:06:43,680 --> 00:06:48,000
want to make that

00:06:44,639 --> 00:06:51,280
translatable and also being able to talk

00:06:48,000 --> 00:06:53,440
from the gatsby app to drupal uh so

00:06:51,280 --> 00:06:54,400
being able to post to the drupal

00:06:53,440 --> 00:06:57,680
endpoint

00:06:54,400 --> 00:07:00,080
and have those created within uh drupal

00:06:57,680 --> 00:07:03,919
and be able to manage in the ui

00:07:00,080 --> 00:07:07,440
so i created these um two modules

00:07:03,919 --> 00:07:08,880
um so we have yeah the decoupled

00:07:07,440 --> 00:07:12,560
interface translation

00:07:08,880 --> 00:07:15,039
there and the gatsby um plugin here

00:07:12,560 --> 00:07:17,440
which kind of takes care of a lot of

00:07:15,039 --> 00:07:19,800
things and so it uses

00:07:17,440 --> 00:07:20,960
iot next which is an internet

00:07:19,800 --> 00:07:24,800
internationalization

00:07:20,960 --> 00:07:27,919
framework um for providing translations

00:07:24,800 --> 00:07:28,800
uh on in javascript so it could be in

00:07:27,919 --> 00:07:31,919
view

00:07:28,800 --> 00:07:34,800
um yeah

00:07:31,919 --> 00:07:37,199
and gatsby um so this plug-ins

00:07:34,800 --> 00:07:40,960
specifically for that

00:07:37,199 --> 00:07:41,440
so um yeah i've kind of already gone

00:07:40,960 --> 00:07:44,080
through

00:07:41,440 --> 00:07:45,440
um these couple of sites or miss it as

00:07:44,080 --> 00:07:47,840
we do have limited time

00:07:45,440 --> 00:07:49,840
in these lightning talks um but this is

00:07:47,840 --> 00:07:52,639
just basically going over

00:07:49,840 --> 00:07:53,520
uh content translations and interface

00:07:52,639 --> 00:07:56,800
translations

00:07:53,520 --> 00:08:00,160
within drupal how those are exposed

00:07:56,800 --> 00:08:02,080
and just um yeah mentioning the

00:08:00,160 --> 00:08:07,520
interface translations on

00:08:02,080 --> 00:08:07,520
um out the box available via an api

00:08:08,000 --> 00:08:14,879
so then uh the

00:08:11,599 --> 00:08:18,000
sort of example um repo i've got

00:08:14,879 --> 00:08:21,759
here um you should be able to

00:08:18,000 --> 00:08:25,199
access this um just url

00:08:21,759 --> 00:08:28,879
um or after the talk and

00:08:25,199 --> 00:08:32,320
that's basically uh just two

00:08:28,879 --> 00:08:34,959
folders with the gatsby app

00:08:32,320 --> 00:08:36,320
in here which includes that plugin that

00:08:34,959 --> 00:08:39,440
we've

00:08:36,320 --> 00:08:42,640
shown you here and also the

00:08:39,440 --> 00:08:45,920
drupal uh just a starting

00:08:42,640 --> 00:08:48,959
um point for using

00:08:45,920 --> 00:08:52,000
um the decoupled interface translations

00:08:48,959 --> 00:08:53,200
so if you feel yeah interested in this

00:08:52,000 --> 00:08:57,040
afterwards you can

00:08:53,200 --> 00:09:00,240
go on there and give it a go

00:08:57,040 --> 00:09:00,880
so now i'll just jump into um what we

00:09:00,240 --> 00:09:03,279
have to do

00:09:00,880 --> 00:09:04,160
so to get that content we're going to

00:09:03,279 --> 00:09:06,959
need to

00:09:04,160 --> 00:09:08,080
um yeah retrieve that from drupal try an

00:09:06,959 --> 00:09:11,839
api

00:09:08,080 --> 00:09:12,720
and thankfully that's all nice and easy

00:09:11,839 --> 00:09:15,839
these days

00:09:12,720 --> 00:09:17,760
and with json api included within core

00:09:15,839 --> 00:09:19,120
so that's as simple as enabling the

00:09:17,760 --> 00:09:23,120
module

00:09:19,120 --> 00:09:26,399
and then that exposes various endpoints

00:09:23,120 --> 00:09:28,880
um so for example this one

00:09:26,399 --> 00:09:30,480
we're listing out the recipes because

00:09:28,880 --> 00:09:33,040
i've just installed the

00:09:30,480 --> 00:09:34,160
mommy demo profile to make things a bit

00:09:33,040 --> 00:09:36,959
easier

00:09:34,160 --> 00:09:39,360
so yeah all the data that's necessary is

00:09:36,959 --> 00:09:42,880
exposed there

00:09:39,360 --> 00:09:45,680
and then um we need to look at

00:09:42,880 --> 00:09:46,560
being able to read and write in a

00:09:45,680 --> 00:09:49,680
similar way

00:09:46,560 --> 00:09:50,480
so having an end point and to retrieve

00:09:49,680 --> 00:09:53,279
those

00:09:50,480 --> 00:09:54,640
interface translations and also write

00:09:53,279 --> 00:09:56,800
them

00:09:54,640 --> 00:09:58,240
so that is something as i mentioned

00:09:56,800 --> 00:10:00,240
isn't um

00:09:58,240 --> 00:10:01,600
available out the box so yeah i had to

00:10:00,240 --> 00:10:04,160
look into it and

00:10:01,600 --> 00:10:05,200
um just created this simple module with

00:10:04,160 --> 00:10:08,320
a couple of

00:10:05,200 --> 00:10:11,680
endpoints that we can use

00:10:08,320 --> 00:10:14,800
um so yeah setting up json api

00:10:11,680 --> 00:10:17,519
making drupal um expose

00:10:14,800 --> 00:10:18,160
multilingual content is nice and easy as

00:10:17,519 --> 00:10:20,480
i said

00:10:18,160 --> 00:10:22,000
enabling the module um a bit of

00:10:20,480 --> 00:10:24,480
configuration obviously if you

00:10:22,000 --> 00:10:25,279
if you're not um starting from a demo

00:10:24,480 --> 00:10:27,680
profile

00:10:25,279 --> 00:10:28,959
uh and there's yeah a guide along how to

00:10:27,680 --> 00:10:32,079
do that

00:10:28,959 --> 00:10:33,519
and yeah just generally with these kind

00:10:32,079 --> 00:10:36,320
of things it's good to have

00:10:33,519 --> 00:10:37,279
an api user um to just lock down

00:10:36,320 --> 00:10:40,079
permissions

00:10:37,279 --> 00:10:40,079
and things like that

00:10:40,320 --> 00:10:43,600
and then over to the interface

00:10:42,320 --> 00:10:47,680
translations

00:10:43,600 --> 00:10:52,000
this is uh for everyone else enabling

00:10:47,680 --> 00:10:54,399
this module um and contributing to it um

00:10:52,000 --> 00:10:56,240
if it does seem to be useful uh it is

00:10:54,399 --> 00:10:58,880
kind of like a proof of concept

00:10:56,240 --> 00:11:00,959
at the moment um but it does work or at

00:10:58,880 --> 00:11:04,160
least it does on my computer

00:11:00,959 --> 00:11:07,920
and yeah within this module

00:11:04,160 --> 00:11:11,839
we've got a endpoint for retrieving

00:11:07,920 --> 00:11:11,839
the interface translations

00:11:12,640 --> 00:11:19,839
and what that looks like um is

00:11:16,480 --> 00:11:22,560
this provides this um path this route um

00:11:19,839 --> 00:11:23,839
that will go and fetch uh all the

00:11:22,560 --> 00:11:26,320
interface translations

00:11:23,839 --> 00:11:26,320
from within

00:11:27,440 --> 00:11:34,240
this might be a screen that you're um

00:11:30,560 --> 00:11:35,440
more familiar with and yeah that's a

00:11:34,240 --> 00:11:37,519
reduced

00:11:35,440 --> 00:11:40,000
list because it's basically filtering on

00:11:37,519 --> 00:11:43,360
context which is something you can pass

00:11:40,000 --> 00:11:44,399
with uh strings within drupal and so

00:11:43,360 --> 00:11:48,800
we've passed this

00:11:44,399 --> 00:11:52,480
um decoupled translation um

00:11:48,800 --> 00:11:53,600
context so at this end point we're just

00:11:52,480 --> 00:11:57,040
filtering by that

00:11:53,600 --> 00:12:00,000
and when we're adding any of them via a

00:11:57,040 --> 00:12:01,680
an endpoint that we can post to um i've

00:12:00,000 --> 00:12:05,279
just got an example here

00:12:01,680 --> 00:12:06,560
in uh postman uh we can just pass this

00:12:05,279 --> 00:12:10,000
to slash add

00:12:06,560 --> 00:12:11,360
and it's just a basic array of strings

00:12:10,000 --> 00:12:13,920
because that's all we need at that one

00:12:11,360 --> 00:12:16,959
point we just need kind of source

00:12:13,920 --> 00:12:20,399
and then that will go off and if it

00:12:16,959 --> 00:12:25,839
exists in that context of

00:12:20,399 --> 00:12:25,839
the coupled translation

00:12:32,800 --> 00:12:37,040
and yeah it will give you back some

00:12:34,720 --> 00:12:40,240
information if you need it

00:12:37,040 --> 00:12:43,920
so that kind of covers the uh

00:12:40,240 --> 00:12:46,800
drupal side of things and so we've got

00:12:43,920 --> 00:12:47,519
our endpoint to retrieve content and we

00:12:46,800 --> 00:12:49,440
have an

00:12:47,519 --> 00:12:50,639
endpoint to retrieve interface

00:12:49,440 --> 00:12:52,560
translations

00:12:50,639 --> 00:12:54,800
filtered by that context because you

00:12:52,560 --> 00:12:57,040
don't really want to be bringing in

00:12:54,800 --> 00:12:57,920
all of this um so early on when i was

00:12:57,040 --> 00:12:59,519
working on it

00:12:57,920 --> 00:13:00,959
i was like yeah cool brilliant got all

00:12:59,519 --> 00:13:01,440
those interface translations but i'm

00:13:00,959 --> 00:13:04,480
like

00:13:01,440 --> 00:13:06,160
that's like a lot of data and probably

00:13:04,480 --> 00:13:10,399
over sharing uh

00:13:06,160 --> 00:13:14,000
so yeah lock that down so then over into

00:13:10,399 --> 00:13:17,279
gatsby um or we want to

00:13:14,000 --> 00:13:20,480
be able to um yeah fetch that

00:13:17,279 --> 00:13:22,160
multilingual content and um

00:13:20,480 --> 00:13:24,320
yeah get it into the sort of gatsby

00:13:22,160 --> 00:13:26,959
ecosystem and that is made

00:13:24,320 --> 00:13:27,680
easy by the drupal source plugin i've

00:13:26,959 --> 00:13:30,880
linked to the

00:13:27,680 --> 00:13:33,839
the pr here um so you just use that as a

00:13:30,880 --> 00:13:34,320
a patch to the gatsby source plugin and

00:13:33,839 --> 00:13:37,440
then

00:13:34,320 --> 00:13:40,399
you configure the plugin and then um

00:13:37,440 --> 00:13:41,199
as with any sort of gatsby setup you

00:13:40,399 --> 00:13:44,320
would run

00:13:41,199 --> 00:13:48,320
gatsby develop or gatsby build and then

00:13:44,320 --> 00:13:50,079
within that build um sort of life cycle

00:13:48,320 --> 00:13:52,240
it will get to a point where it needs to

00:13:50,079 --> 00:13:56,320
source these nodes

00:13:52,240 --> 00:13:58,880
um so after enabling the plugin

00:13:56,320 --> 00:13:59,920
and configuring it so with your drupal

00:13:58,880 --> 00:14:04,560
um

00:13:59,920 --> 00:14:07,839
base url and so wherever it may be

00:14:04,560 --> 00:14:09,440
it then will create these um if you've

00:14:07,839 --> 00:14:10,160
used graphql before you might be

00:14:09,440 --> 00:14:12,800
familiar

00:14:10,160 --> 00:14:14,000
with this explorer so it creates the

00:14:12,800 --> 00:14:17,440
data

00:14:14,000 --> 00:14:21,680
in a way that can be query inside

00:14:17,440 --> 00:14:24,720
um xp so we can see here

00:14:21,680 --> 00:14:25,440
we've got a list of of the recipes in

00:14:24,720 --> 00:14:28,560
the different

00:14:25,440 --> 00:14:29,040
languages so then what you need to go

00:14:28,560 --> 00:14:33,120
and do

00:14:29,040 --> 00:14:36,000
is create pages um within gatsby

00:14:33,120 --> 00:14:37,279
so that's um probably for another talk

00:14:36,000 --> 00:14:40,480
um by someone else

00:14:37,279 --> 00:14:44,320
um but yes so then that would create

00:14:40,480 --> 00:14:47,120
pages within gatsby so here we have the

00:14:44,320 --> 00:14:48,480
gatsby app um and based on that data

00:14:47,120 --> 00:14:52,160
that we've retrieved from

00:14:48,480 --> 00:14:54,720
drupal we can then create these pages

00:14:52,160 --> 00:14:56,560
um and have sort of multilingual

00:14:54,720 --> 00:14:58,320
switching there

00:14:56,560 --> 00:14:59,760
so great i mean obviously it's missing

00:14:58,320 --> 00:15:13,839
out quite a bit but

00:14:59,760 --> 00:15:13,839
you've got

00:15:22,079 --> 00:15:27,839
three people

00:15:29,440 --> 00:15:41,839
he's mustachy

00:15:44,880 --> 00:15:48,079
nick you might want to share again yeah

00:15:46,959 --> 00:15:51,839
you're doing it cool

00:15:48,079 --> 00:15:55,120
all right i'm back sorry about that

00:15:51,839 --> 00:15:59,120
okay so again we would source those

00:15:55,120 --> 00:16:02,399
um and then yeah those are

00:15:59,120 --> 00:16:06,000
available in that kind of gaps

00:16:02,399 --> 00:16:08,800
the way yeah

00:16:06,000 --> 00:16:10,639
data that can be used within gatsby so

00:16:08,800 --> 00:16:14,560
then we can see based on

00:16:10,639 --> 00:16:18,720
on this endpoint that there's um

00:16:14,560 --> 00:16:21,920
yeah the uh translations available then

00:16:18,720 --> 00:16:25,279
so then the plugin itself we'll

00:16:21,920 --> 00:16:25,279
let's just get back to here

00:16:25,920 --> 00:16:31,360
the plugin that i've created will then

00:16:29,279 --> 00:16:34,399
pass that to iit next

00:16:31,360 --> 00:16:37,120
which is the internationalization

00:16:34,399 --> 00:16:38,160
framework and allows you to use the t

00:16:37,120 --> 00:16:41,360
function

00:16:38,160 --> 00:16:44,320
within your app to basically say

00:16:41,360 --> 00:16:44,639
this is a translatable string please can

00:16:44,320 --> 00:16:46,880
you

00:16:44,639 --> 00:16:47,920
um yeah put it into spanish german or

00:16:46,880 --> 00:16:51,839
whatever

00:16:47,920 --> 00:16:51,839
the current languages

00:16:55,199 --> 00:17:00,880
so what it will do is

00:16:58,240 --> 00:17:02,000
whenever it will circle these files and

00:17:00,880 --> 00:17:05,199
extract usages

00:17:02,000 --> 00:17:08,559
of the t function so for example

00:17:05,199 --> 00:17:12,400
let's have a look at the recipe page

00:17:08,559 --> 00:17:15,760
so nice red wiggly liner

00:17:12,400 --> 00:17:18,880
and then it will extract

00:17:15,760 --> 00:17:21,919
those and push those up to

00:17:18,880 --> 00:17:24,160
drupal and then those appear in our

00:17:21,919 --> 00:17:29,600
familiar

00:17:24,160 --> 00:17:29,600
uh user interface um with here

00:17:29,840 --> 00:17:33,600
so you've kind of got that end to end

00:17:31,280 --> 00:17:36,160
retrieval and passing and

00:17:33,600 --> 00:17:38,000
yeah you can translate in english and

00:17:36,160 --> 00:17:41,919
spanish whatever the enabled

00:17:38,000 --> 00:17:43,679
um languages are

00:17:41,919 --> 00:17:45,039
so that kind of shows the end to end so

00:17:43,679 --> 00:17:47,600
you've got um

00:17:45,039 --> 00:17:48,960
yeah the translatable strings within

00:17:47,600 --> 00:17:51,840
your front end app

00:17:48,960 --> 00:17:52,480
and the plug-in the gatsby plugin that

00:17:51,840 --> 00:17:56,720
i've created

00:17:52,480 --> 00:17:59,600
will scan those put them up to drupal

00:17:56,720 --> 00:18:00,320
you can then proceed to translate those

00:17:59,600 --> 00:18:02,559
and then

00:18:00,320 --> 00:18:05,840
it will pull them down the next time it

00:18:02,559 --> 00:18:10,160
refreshes its data

00:18:05,840 --> 00:18:10,160
so that's essentially it

00:18:12,840 --> 00:18:17,280
and

00:18:14,000 --> 00:18:20,320
looking at pro base api like the graphql

00:18:17,280 --> 00:18:22,960
api um which does provide some

00:18:20,320 --> 00:18:24,240
uh advantages um if you're in sort of

00:18:22,960 --> 00:18:26,640
typescript world

00:18:24,240 --> 00:18:29,200
within your um front-end applications it

00:18:26,640 --> 00:18:32,480
will provide better type inference

00:18:29,200 --> 00:18:33,600
um because it won't be based on content

00:18:32,480 --> 00:18:36,240
existing

00:18:33,600 --> 00:18:37,120
um yeah you've got these type schemas

00:18:36,240 --> 00:18:39,200
and then

00:18:37,120 --> 00:18:40,799
yeah interface translations could be

00:18:39,200 --> 00:18:42,880
managed elsewhere it might not always

00:18:40,799 --> 00:18:45,600
make sense to

00:18:42,880 --> 00:18:47,039
manage them in drupal and it would be

00:18:45,600 --> 00:18:49,280
cool to have a look at

00:18:47,039 --> 00:18:50,400
added specificity to that context for

00:18:49,280 --> 00:18:53,600
string

00:18:50,400 --> 00:18:56,000
source strings so maybe you could manage

00:18:53,600 --> 00:18:56,880
multiple gatsby apps and maybe a view

00:18:56,000 --> 00:18:59,200
app or something

00:18:56,880 --> 00:19:00,880
like that would be cool um and also

00:18:59,200 --> 00:19:03,840
filtering by context

00:19:00,880 --> 00:19:04,480
in the drupal ui might be a yeah might

00:19:03,840 --> 00:19:08,240
be useful

00:19:04,480 --> 00:19:11,840
um for yeah reasons outside of

00:19:08,240 --> 00:19:11,840
decoupled translations

00:19:12,240 --> 00:19:19,440
cool and so just going ahead if you

00:19:16,240 --> 00:19:21,360
do tackle a translation

00:19:19,440 --> 00:19:22,559
project you just got to consider who

00:19:21,360 --> 00:19:24,080
will be translating them

00:19:22,559 --> 00:19:25,679
because if they don't have access to

00:19:24,080 --> 00:19:28,400
drupal or it's

00:19:25,679 --> 00:19:29,760
cornered off or whatever reason you need

00:19:28,400 --> 00:19:31,919
to know

00:19:29,760 --> 00:19:35,520
who will be translating and how you can

00:19:31,919 --> 00:19:37,520
provide those translations to them

00:19:35,520 --> 00:19:38,720
and also consider complexity of

00:19:37,520 --> 00:19:40,480
translated strings

00:19:38,720 --> 00:19:41,679
in this example we just have the basic

00:19:40,480 --> 00:19:42,880
strings but obviously you've got to

00:19:41,679 --> 00:19:47,280
consider

00:19:42,880 --> 00:19:50,000
plurality uh having markup in there

00:19:47,280 --> 00:19:52,160
and also context which kind of refers

00:19:50,000 --> 00:19:54,640
back to the previous point um

00:19:52,160 --> 00:19:55,520
about what does this string actually

00:19:54,640 --> 00:19:57,520
mean because

00:19:55,520 --> 00:19:59,360
when a developer is adding that within a

00:19:57,520 --> 00:20:00,559
component or a page

00:19:59,360 --> 00:20:02,480
and then that's passed off to a

00:20:00,559 --> 00:20:05,600
translation team there might be

00:20:02,480 --> 00:20:08,080
something lost in translation

00:20:05,600 --> 00:20:09,760
so yeah getting some kind of context

00:20:08,080 --> 00:20:11,440
around there would be good

00:20:09,760 --> 00:20:13,440
and then also deployment because

00:20:11,440 --> 00:20:13,919
obviously as a developer i don't want to

00:20:13,440 --> 00:20:16,159
be

00:20:13,919 --> 00:20:17,039
um pushing those interface translations

00:20:16,159 --> 00:20:20,080
to prod

00:20:17,039 --> 00:20:21,840
um so think about where those

00:20:20,080 --> 00:20:23,840
yeah translations are actually going to

00:20:21,840 --> 00:20:25,559
be pushed whether it's in uat and then

00:20:23,840 --> 00:20:27,120
that goes to prod so then it can be

00:20:25,559 --> 00:20:30,000
translated

00:20:27,120 --> 00:20:31,200
in time for the deployment of the app or

00:20:30,000 --> 00:20:34,320
something like that

00:20:31,200 --> 00:20:36,080
um but yeah thank you very much for

00:20:34,320 --> 00:20:38,720
listening that might have been

00:20:36,080 --> 00:20:39,280
lightning speed uh hope it made some

00:20:38,720 --> 00:20:43,039
sense

00:20:39,280 --> 00:20:46,240
and yeah um let's get on to the

00:20:43,039 --> 00:20:46,240

YouTube URL: https://www.youtube.com/watch?v=SGm7bV4RgF4


