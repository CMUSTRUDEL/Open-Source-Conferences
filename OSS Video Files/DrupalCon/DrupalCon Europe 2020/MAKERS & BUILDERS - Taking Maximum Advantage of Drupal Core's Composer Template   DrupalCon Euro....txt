Title: MAKERS & BUILDERS - Taking Maximum Advantage of Drupal Core's Composer Template   DrupalCon Euro...
Publication date: 2021-01-13
Playlist: DrupalCon Europe 2020
Description: 
	If you're looking to build a modern Drupal 8 or 9 site, then you're probably going to want to use the Drupal core Composer "recommended-project" template. Debuting with Drupal 8.8, this modern, (officially) community-supported Composer template gets your project off on the right foot.
Captions: 
	00:00:04,059 --> 00:00:09,889
[Music]

00:00:13,280 --> 00:00:17,039
hello

00:00:13,840 --> 00:00:18,720
everybody good afternoon

00:00:17,039 --> 00:00:20,400
for those of you in europe and good

00:00:18,720 --> 00:00:23,840
morning to those of us

00:00:20,400 --> 00:00:27,119
in the us and good evening to

00:00:23,840 --> 00:00:29,599
folks in the far east i suppose

00:00:27,119 --> 00:00:30,960
so i just want to make sure everybody

00:00:29,599 --> 00:00:34,239
can hear me

00:00:30,960 --> 00:00:36,079
so if i can just get a

00:00:34,239 --> 00:00:37,760
hello or something in the chat real

00:00:36,079 --> 00:00:40,879
quick just to confirm that

00:00:37,760 --> 00:00:41,920
um everything as it should be that would

00:00:40,879 --> 00:00:44,320
be fantastic hey

00:00:41,920 --> 00:00:46,239
all right fantastic lots of hellos great

00:00:44,320 --> 00:00:49,440
to see thank you very much

00:00:46,239 --> 00:00:51,199
all right well good um so welcome so

00:00:49,440 --> 00:00:53,360
for the next 45 minutes or so i'm going

00:00:51,199 --> 00:00:55,920
to be talking about composer

00:00:53,360 --> 00:00:56,640
and this isn't going to be a basics

00:00:55,920 --> 00:00:57,840
session

00:00:56,640 --> 00:01:00,480
but it's not going to be a super

00:00:57,840 --> 00:01:03,760
advanced session this is really

00:01:00,480 --> 00:01:05,920
aimed right towards the middle so

00:01:03,760 --> 00:01:07,600
those who filled out the pool poll uh

00:01:05,920 --> 00:01:11,200
thank you very much

00:01:07,600 --> 00:01:13,360
um so the second one how comfortable are

00:01:11,200 --> 00:01:14,000
you using composer this is really geared

00:01:13,360 --> 00:01:16,320
towards

00:01:14,000 --> 00:01:18,640
the not comfortable at all and the

00:01:16,320 --> 00:01:20,479
comfortable with the basics

00:01:18,640 --> 00:01:23,200
so i'm pretty sure i'm going to teach

00:01:20,479 --> 00:01:25,280
those folks something new

00:01:23,200 --> 00:01:26,479
to the 34 percent of you who marked

00:01:25,280 --> 00:01:29,200
super comfortable

00:01:26,479 --> 00:01:29,600
now that's a bit of a challenge for me

00:01:29,200 --> 00:01:32,159
um

00:01:29,600 --> 00:01:33,600
i guess it depends on now it's 37 so

00:01:32,159 --> 00:01:36,240
it's not getting better

00:01:33,600 --> 00:01:38,159
um i guess it it depends on how we each

00:01:36,240 --> 00:01:40,000
define super comfortable but hopefully

00:01:38,159 --> 00:01:43,040
it'll be you know a few nuggets in here

00:01:40,000 --> 00:01:46,159
that will that everybody can can

00:01:43,040 --> 00:01:47,040
take away really interesting to see that

00:01:46,159 --> 00:01:51,119
only

00:01:47,040 --> 00:01:53,520
20 of you are using composer 2.

00:01:51,119 --> 00:01:55,520
um so maybe the big takeaway for a lot

00:01:53,520 --> 00:01:58,560
of you folks at the end of this is that

00:01:55,520 --> 00:02:00,000
you can for most of you um

00:01:58,560 --> 00:02:01,600
unless you're doing some wacky stuff

00:02:00,000 --> 00:02:04,159
with composer

00:02:01,600 --> 00:02:05,040
um composer 2 really shouldn't be a big

00:02:04,159 --> 00:02:06,719
deal

00:02:05,040 --> 00:02:08,560
and you get a lot of performance and a

00:02:06,719 --> 00:02:11,760
lot of speed

00:02:08,560 --> 00:02:14,239
and then for the drupal role question

00:02:11,760 --> 00:02:16,080
um you know the mix here usually it's

00:02:14,239 --> 00:02:19,040
mostly site builders encoders

00:02:16,080 --> 00:02:20,560
as as we see these results so that looks

00:02:19,040 --> 00:02:23,760
pretty good

00:02:20,560 --> 00:02:25,680
so um i say off we go

00:02:23,760 --> 00:02:27,120
so i don't know if um

00:02:25,680 --> 00:02:30,480
[Music]

00:02:27,120 --> 00:02:31,920
if when you join uh this panel or this

00:02:30,480 --> 00:02:33,519
session you can scroll up in the

00:02:31,920 --> 00:02:34,560
discussion chat but i actually have this

00:02:33,519 --> 00:02:37,680
url

00:02:34,560 --> 00:02:39,360
um right at the very top of the chat so

00:02:37,680 --> 00:02:41,360
um if you want access to these slides

00:02:39,360 --> 00:02:42,720
there it is right there and if someone

00:02:41,360 --> 00:02:44,239
else

00:02:42,720 --> 00:02:45,840
if you can't see it all the way at the

00:02:44,239 --> 00:02:47,120
top if you can't scroll for some reason

00:02:45,840 --> 00:02:49,760
someone else can just paste it in that

00:02:47,120 --> 00:02:52,720
would be fantastic so i can just

00:02:49,760 --> 00:02:53,760
keep on talking which is uh what i'm out

00:02:52,720 --> 00:02:55,280
to do

00:02:53,760 --> 00:02:57,599
and feel free if you have a question

00:02:55,280 --> 00:03:01,120
feel free to ask it in the um

00:02:57,599 --> 00:03:03,840
use the live q a and i've got a whole

00:03:01,120 --> 00:03:05,040
dashboard here provided by the on-air

00:03:03,840 --> 00:03:06,000
platform where i can see all the

00:03:05,040 --> 00:03:08,959
questions and

00:03:06,000 --> 00:03:10,159
i have it right in my eye line so um as

00:03:08,959 --> 00:03:12,000
questions come in i

00:03:10,159 --> 00:03:13,200
should be able to see them pretty

00:03:12,000 --> 00:03:15,040
readily and

00:03:13,200 --> 00:03:16,840
i will answer them you know as i get

00:03:15,040 --> 00:03:19,760
them or

00:03:16,840 --> 00:03:22,879
um uh

00:03:19,760 --> 00:03:26,000
you know or at the end but usually um

00:03:22,879 --> 00:03:27,840
you know as they come in all right so

00:03:26,000 --> 00:03:30,080
what are we gonna cover today

00:03:27,840 --> 00:03:31,599
so we're gonna go with uh we're gonna do

00:03:30,080 --> 00:03:33,120
a little bit of a deeper dive onto

00:03:31,599 --> 00:03:35,440
version constraints

00:03:33,120 --> 00:03:37,760
um especially when you run when you want

00:03:35,440 --> 00:03:39,280
a specific version of a dependency and

00:03:37,760 --> 00:03:41,760
you know we're at a drupal

00:03:39,280 --> 00:03:42,319
event here so i think for the most part

00:03:41,760 --> 00:03:44,400
this

00:03:42,319 --> 00:03:46,799
comes into play when we want like a you

00:03:44,400 --> 00:03:48,720
know an alpha version of a module or the

00:03:46,799 --> 00:03:50,400
dev version of a module or

00:03:48,720 --> 00:03:52,159
um or something like that so we'll talk

00:03:50,400 --> 00:03:55,280
about that go a little bit deeper

00:03:52,159 --> 00:03:57,280
we'll talk about plug-ins um i'm not

00:03:55,280 --> 00:04:01,360
again not super deep but we'll do

00:03:57,280 --> 00:04:03,439
a couple of examples um

00:04:01,360 --> 00:04:05,439
and dependency conflict resolution so

00:04:03,439 --> 00:04:06,560
this is a a big one because this is i

00:04:05,439 --> 00:04:08,400
know for me

00:04:06,560 --> 00:04:09,920
when i first started using composure

00:04:08,400 --> 00:04:12,560
this was the big scary

00:04:09,920 --> 00:04:12,959
right so you're trying to do something

00:04:12,560 --> 00:04:16,720
and

00:04:12,959 --> 00:04:17,759
composer says no um well what

00:04:16,720 --> 00:04:19,600
how do you how do you get around that

00:04:17,759 --> 00:04:20,079
how do you work through that i guess is

00:04:19,600 --> 00:04:22,240
the

00:04:20,079 --> 00:04:23,680
you know it's the biggest question so

00:04:22,240 --> 00:04:25,919
we'll talk about some strategies for

00:04:23,680 --> 00:04:25,919
that

00:04:26,840 --> 00:04:31,759
um

00:04:28,639 --> 00:04:33,600
and joe so i see your comment question

00:04:31,759 --> 00:04:35,759
okay very good i think everybody else

00:04:33,600 --> 00:04:38,720
can see that um

00:04:35,759 --> 00:04:41,759
i will well when we get to slide 26 we

00:04:38,720 --> 00:04:42,960
can we can talk about that

00:04:41,759 --> 00:04:44,960
we're going to talk a little bit about

00:04:42,960 --> 00:04:48,080
the composer.lockfile

00:04:44,960 --> 00:04:49,600
and how the composer.log file especially

00:04:48,080 --> 00:04:51,520
when you have divergent branches

00:04:49,600 --> 00:04:52,880
can be the source of code conflict with

00:04:51,520 --> 00:04:55,919
git so

00:04:52,880 --> 00:04:57,600
we can talk about that a little bit um

00:04:55,919 --> 00:04:58,479
and then composer two versus composer

00:04:57,600 --> 00:05:00,320
one

00:04:58,479 --> 00:05:01,759
um and we'll talk about that so that's

00:05:00,320 --> 00:05:04,400
kind of the plan for the next

00:05:01,759 --> 00:05:05,280
uh now we're down to 40 minutes so here

00:05:04,400 --> 00:05:06,960
we go

00:05:05,280 --> 00:05:08,240
so let's start with version constraints

00:05:06,960 --> 00:05:09,520
we'll kind of ease into this a little

00:05:08,240 --> 00:05:11,360
bit

00:05:09,520 --> 00:05:12,800
let's talk about this the carrot versus

00:05:11,360 --> 00:05:13,360
the tilda because again this is

00:05:12,800 --> 00:05:15,280
something

00:05:13,360 --> 00:05:16,639
um i find it i teach a lot of folks how

00:05:15,280 --> 00:05:18,160
to how to use drupal and how to use

00:05:16,639 --> 00:05:20,000
composer

00:05:18,160 --> 00:05:21,520
and this is a little bit of a gray area

00:05:20,000 --> 00:05:24,240
i think

00:05:21,520 --> 00:05:24,800
so really simply the simplest way to

00:05:24,240 --> 00:05:27,360
look at this

00:05:24,800 --> 00:05:28,880
is when you use the carrot when

00:05:27,360 --> 00:05:30,160
specifying a version constraint

00:05:28,880 --> 00:05:34,080
something like

00:05:30,160 --> 00:05:36,000
you know caret 1.0 what this does is it

00:05:34,080 --> 00:05:38,479
locks the first digit

00:05:36,000 --> 00:05:39,600
so when you in the future when you do a

00:05:38,479 --> 00:05:42,240
composer update

00:05:39,600 --> 00:05:43,600
and your version constraint is carrot

00:05:42,240 --> 00:05:45,919
1.0

00:05:43,600 --> 00:05:46,720
that will allow you to go to basically

00:05:45,919 --> 00:05:49,840
get any

00:05:46,720 --> 00:05:52,960
release version of version one

00:05:49,840 --> 00:05:55,199
so 1.3 1.4 1.5

00:05:52,960 --> 00:05:56,800
but the caret locks in that first digit

00:05:55,199 --> 00:06:00,080
so you won't be able to get

00:05:56,800 --> 00:06:01,600
version 2 unless you change the version

00:06:00,080 --> 00:06:06,000
constraint

00:06:01,600 --> 00:06:08,880
the tilde is a little bit different

00:06:06,000 --> 00:06:10,560
where it allows the last digit specified

00:06:08,880 --> 00:06:14,400
to float

00:06:10,560 --> 00:06:16,240
so if you have carrot 1.0 and tilde 1.0

00:06:14,400 --> 00:06:17,440
those are in fact the exact same

00:06:16,240 --> 00:06:19,360
constraint

00:06:17,440 --> 00:06:20,479
because the caret locks the first digit

00:06:19,360 --> 00:06:22,960
and the tilde

00:06:20,479 --> 00:06:24,319
allows this the last digit specified to

00:06:22,960 --> 00:06:26,240
float

00:06:24,319 --> 00:06:28,160
where the tool that comes in handy is

00:06:26,240 --> 00:06:31,120
when you want to

00:06:28,160 --> 00:06:32,240
basically lock down a particular

00:06:31,120 --> 00:06:36,120
dependency

00:06:32,240 --> 00:06:37,919
to a minor release if you have tilde

00:06:36,120 --> 00:06:40,160
1.1.0

00:06:37,919 --> 00:06:43,720
then a composer update will only allow

00:06:40,160 --> 00:06:47,039
you to go to 1.1.3

00:06:43,720 --> 00:06:48,319
1.1.4 it won't let you go to 1.2.

00:06:47,039 --> 00:06:50,319
anything

00:06:48,319 --> 00:06:51,440
unless again you change that version

00:06:50,319 --> 00:06:54,479
constraint

00:06:51,440 --> 00:06:56,479
so caret locks the first digit tilde

00:06:54,479 --> 00:07:01,039
allows that last digit specified

00:06:56,479 --> 00:07:02,639
to float and jaws i see your

00:07:01,039 --> 00:07:04,319
your comment um we're going to talk

00:07:02,639 --> 00:07:05,199
about that that's a slide coming up yeah

00:07:04,319 --> 00:07:09,039
we're going to demo that

00:07:05,199 --> 00:07:12,160
in a minute or so um so examples

00:07:09,039 --> 00:07:14,840
so uh carrot 2.0

00:07:12,160 --> 00:07:16,400
basically gets you anything in the to

00:07:14,840 --> 00:07:19,440
2.023.uh

00:07:16,400 --> 00:07:22,160
range without allowing

00:07:19,440 --> 00:07:22,160
3.0

00:07:23,000 --> 00:07:28,880
2.0.0 with the caret is exactly the same

00:07:27,440 --> 00:07:31,280
it doesn't matter how many digits you

00:07:28,880 --> 00:07:35,199
specified when you're using the caret

00:07:31,280 --> 00:07:39,240
it still only locks that first digit

00:07:35,199 --> 00:07:44,000
tilde 2.0 again is the same as

00:07:39,240 --> 00:07:46,400
carrot2.0 but tilda 2.0.0 allows

00:07:44,000 --> 00:07:48,000
that last digit to float so that gets

00:07:46,400 --> 00:07:51,599
you all the way up

00:07:48,000 --> 00:07:52,639
not including 2.1 so for those of you

00:07:51,599 --> 00:07:55,199
who had little uh

00:07:52,639 --> 00:07:57,199
gray area or a little trouble with the

00:07:55,199 --> 00:08:00,160
difference between carrot versus tilde

00:07:57,199 --> 00:08:01,039
there you go and then the pre-release

00:08:00,160 --> 00:08:02,560
versions

00:08:01,039 --> 00:08:04,160
so let's say you don't want a release

00:08:02,560 --> 00:08:08,240
version

00:08:04,160 --> 00:08:10,240
if you do a carrot 1.0 app beta

00:08:08,240 --> 00:08:11,440
that basically will get you anything

00:08:10,240 --> 00:08:14,240
between one

00:08:11,440 --> 00:08:14,800
major version one and two including all

00:08:14,240 --> 00:08:17,599
beta

00:08:14,800 --> 00:08:20,639
and release candidate versions so think

00:08:17,599 --> 00:08:23,280
of the app beta as a minimum

00:08:20,639 --> 00:08:25,039
um if you want a specific beta you can

00:08:23,280 --> 00:08:26,560
do that as well

00:08:25,039 --> 00:08:28,080
and this is you know super handy in the

00:08:26,560 --> 00:08:29,759
drupal community because we like our

00:08:28,080 --> 00:08:32,320
alphas and betas

00:08:29,759 --> 00:08:33,760
um and release candidates so even if

00:08:32,320 --> 00:08:36,959
there is a beta 3

00:08:33,760 --> 00:08:38,399
out for a particular module if you ask

00:08:36,959 --> 00:08:41,599
for beta dot 2

00:08:38,399 --> 00:08:41,599
you're going to get beta two

00:08:41,680 --> 00:08:45,519
um when you add the dash dev at the end

00:08:44,159 --> 00:08:48,080
this is a little bit different

00:08:45,519 --> 00:08:48,880
um now you're gonna this is getting the

00:08:48,080 --> 00:08:52,160
dev release

00:08:48,880 --> 00:08:53,760
but it's not a download this is a clone

00:08:52,160 --> 00:08:55,440
so we're not gonna get too deep into

00:08:53,760 --> 00:08:57,760
this discussion but if you are

00:08:55,440 --> 00:09:00,080
committing dependencies to your repo

00:08:57,760 --> 00:09:01,440
you have to you know understand that

00:09:00,080 --> 00:09:03,279
when you're cloning something you're now

00:09:01,440 --> 00:09:04,800
getting a repo inside of your repo and

00:09:03,279 --> 00:09:06,480
you have to handle that

00:09:04,800 --> 00:09:09,680
um if you're not committing dependencies

00:09:06,480 --> 00:09:11,519
then it's not a big deal

00:09:09,680 --> 00:09:13,360
and you can even get more granular than

00:09:11,519 --> 00:09:17,120
this you can

00:09:13,360 --> 00:09:17,760
clone a specific commit so say you don't

00:09:17,120 --> 00:09:20,000
want

00:09:17,760 --> 00:09:22,720
the entire dev version say you want the

00:09:20,000 --> 00:09:26,160
dev version minus one commit

00:09:22,720 --> 00:09:29,600
well you can then basically ask for

00:09:26,160 --> 00:09:31,920
dev dash the name of the branch pound

00:09:29,600 --> 00:09:34,320
the first few characters of york of the

00:09:31,920 --> 00:09:36,720
commit hash that you're looking for

00:09:34,320 --> 00:09:38,000
so composer's really flexible and um if

00:09:36,720 --> 00:09:39,040
you just know a few of these little

00:09:38,000 --> 00:09:41,600
rules you can

00:09:39,040 --> 00:09:43,360
normally get exactly what you're looking

00:09:41,600 --> 00:09:45,839
for

00:09:43,360 --> 00:09:49,279
and uh this goes to uh jaws so let's

00:09:45,839 --> 00:09:49,279
actually look at this semver

00:09:49,519 --> 00:09:52,880
for um moment this is a really super

00:09:52,160 --> 00:09:56,480
handy

00:09:52,880 --> 00:09:59,440
um way to visualize what these

00:09:56,480 --> 00:10:00,399
version constraints do so let's look at

00:09:59,440 --> 00:10:04,480
drupal

00:10:00,399 --> 00:10:07,040
core recommended and

00:10:04,480 --> 00:10:07,680
let's say that we are looking for you

00:10:07,040 --> 00:10:09,600
know version

00:10:07,680 --> 00:10:12,079
eight well here let's start with the

00:10:09,600 --> 00:10:15,920
tilde tilde eight dot zero

00:10:12,079 --> 00:10:15,920
uh well let me search for that one there

00:10:16,320 --> 00:10:22,959
till the 8.0 so remember the tilde

00:10:19,680 --> 00:10:26,079
locks in the first digit and i know the

00:10:22,959 --> 00:10:27,120
um the the color contrast here is

00:10:26,079 --> 00:10:29,040
terrible

00:10:27,120 --> 00:10:31,680
um so just bear with me please but i

00:10:29,040 --> 00:10:33,839
have tilde 8.0 in this box right here

00:10:31,680 --> 00:10:35,200
and we're only looking at stable so

00:10:33,839 --> 00:10:37,040
meaning

00:10:35,200 --> 00:10:38,959
we don't have an app beta you know we

00:10:37,040 --> 00:10:40,399
can change this to beta and this would

00:10:38,959 --> 00:10:41,839
this is equivalent to putting the app

00:10:40,399 --> 00:10:44,000
beta at the end of it but we're only

00:10:41,839 --> 00:10:45,600
looking at stable releases

00:10:44,000 --> 00:10:47,120
and obviously in all of these boxes

00:10:45,600 --> 00:10:49,440
these are all the various releases for

00:10:47,120 --> 00:10:52,880
drupal uh core recommended

00:10:49,440 --> 00:10:55,839
um but we are filtering it by tilde

00:10:52,880 --> 00:10:57,040
i'm sorry carrot 8.0 which means we're

00:10:55,839 --> 00:10:58,640
locking in the eight

00:10:57,040 --> 00:11:00,880
so sure enough we're getting everything

00:10:58,640 --> 00:11:04,560
from 8.0.

00:11:00,880 --> 00:11:08,320
up to the latest release of the 8.x

00:11:04,560 --> 00:11:09,680
major version which is 8.9.11

00:11:08,320 --> 00:11:12,320
because we're only looking at stable

00:11:09,680 --> 00:11:14,079
releases none of the devs or the betas

00:11:12,320 --> 00:11:15,040
or the release candidates or the alphas

00:11:14,079 --> 00:11:19,200
are in there

00:11:15,040 --> 00:11:19,200
now if we change this to tilde

00:11:21,040 --> 00:11:24,240
you'll see the results are exactly the

00:11:22,480 --> 00:11:28,680
same

00:11:24,240 --> 00:11:32,640
but if we do it if we add tilde

00:11:28,680 --> 00:11:36,000
8.0.0 now you see that we're limited

00:11:32,640 --> 00:11:40,079
just to the 8.0.x

00:11:36,000 --> 00:11:43,519
series so this is a really

00:11:40,079 --> 00:11:46,399
super handy way of kind of visualizing

00:11:43,519 --> 00:11:48,800
not only tilda versus carrot but also

00:11:46,399 --> 00:11:51,680
well what happens if we throw in

00:11:48,800 --> 00:11:53,360
the beta versions right so now we're

00:11:51,680 --> 00:11:56,880
going to get all betas and release

00:11:53,360 --> 00:12:00,079
candidates of the 8.0 branch there

00:11:56,880 --> 00:12:02,800
i'm sorry 8.0 series i should say

00:12:00,079 --> 00:12:03,920
and if we go all the way down to dev

00:12:02,800 --> 00:12:06,320
basically anything

00:12:03,920 --> 00:12:08,800
that starts with 8.0 is going to be

00:12:06,320 --> 00:12:08,800
eligible

00:12:09,040 --> 00:12:12,160
it's a really handy tool um you know

00:12:11,519 --> 00:12:15,279
definitely

00:12:12,160 --> 00:12:17,920
use it um you know i find i find it

00:12:15,279 --> 00:12:21,040
extremely helpful

00:12:17,920 --> 00:12:24,800
okay so um here's something

00:12:21,040 --> 00:12:26,639
that i kind of learned the hard way and

00:12:24,800 --> 00:12:28,720
are these two statements always

00:12:26,639 --> 00:12:31,519
equivalent if you do

00:12:28,720 --> 00:12:33,519
a series of requirements require vendor

00:12:31,519 --> 00:12:37,120
name one and require vendor name two are

00:12:33,519 --> 00:12:40,160
you always going to get the same results

00:12:37,120 --> 00:12:44,000
if you do that versus

00:12:40,160 --> 00:12:47,120
if you combine them if you ask to get

00:12:44,000 --> 00:12:49,440
both dependencies at the same time

00:12:47,120 --> 00:12:50,959
and the answer is while often you will

00:12:49,440 --> 00:12:53,600
get the same results there are some

00:12:50,959 --> 00:12:56,800
situations where you won't

00:12:53,600 --> 00:12:58,639
um and so consider the case where

00:12:56,800 --> 00:13:00,959
you're getting a you know a taco

00:12:58,639 --> 00:13:06,240
dependency that requires

00:13:00,959 --> 00:13:08,160
you know cheese version 3.0 or better

00:13:06,240 --> 00:13:09,519
you're also asking for a burrito

00:13:08,160 --> 00:13:13,360
dependency that requires

00:13:09,519 --> 00:13:16,079
cheese version 2.0 or better

00:13:13,360 --> 00:13:17,200
so if you do a composer require vendor

00:13:16,079 --> 00:13:19,279
taco

00:13:17,200 --> 00:13:20,240
you're likely to get or not likely you

00:13:19,279 --> 00:13:22,720
will get

00:13:20,240 --> 00:13:24,720
cheese version 3.0 and then in your

00:13:22,720 --> 00:13:27,920
second step if you then try to do vendor

00:13:24,720 --> 00:13:30,480
you know composer require vendor burrito

00:13:27,920 --> 00:13:31,120
you're going to get a conflict you're

00:13:30,480 --> 00:13:32,480
going to get

00:13:31,120 --> 00:13:34,320
well it's not going to be a conflict but

00:13:32,480 --> 00:13:36,639
composer's going to say i can't do that

00:13:34,320 --> 00:13:38,480
because

00:13:36,639 --> 00:13:39,920
this requires something in the 2.x

00:13:38,480 --> 00:13:41,600
branch of cheese and you have something

00:13:39,920 --> 00:13:45,680
in the 3.x

00:13:41,600 --> 00:13:46,959
a branch of cheese a version of cheese

00:13:45,680 --> 00:13:50,000
so you're going to have an issue if you

00:13:46,959 --> 00:13:53,279
try and do taco than burrito

00:13:50,000 --> 00:13:55,360
whoops sorry but if you try to combine

00:13:53,279 --> 00:13:56,079
them if you do a composer require vendor

00:13:55,360 --> 00:13:59,600
taco

00:13:56,079 --> 00:14:00,399
space vendor burrito then composer will

00:13:59,600 --> 00:14:03,199
look at

00:14:00,399 --> 00:14:05,279
all the sub for taco and all the sub

00:14:03,199 --> 00:14:08,959
dependencies for burrito

00:14:05,279 --> 00:14:12,560
and basically find a um

00:14:08,959 --> 00:14:14,000
a version that is um that works and in

00:14:12,560 --> 00:14:15,040
this case

00:14:14,000 --> 00:14:17,920
you know actually now that i look at the

00:14:15,040 --> 00:14:19,600
slide this is kind of a lie um

00:14:17,920 --> 00:14:21,199
we would actually have to loosen up the

00:14:19,600 --> 00:14:22,720
the um

00:14:21,199 --> 00:14:24,000
this is actually now that i look at this

00:14:22,720 --> 00:14:25,600
this is kind of a lie because these

00:14:24,000 --> 00:14:28,160
still won't resolve because

00:14:25,600 --> 00:14:30,560
this one wants to get a 3.0 but

00:14:28,160 --> 00:14:33,920
hopefully you can take my point where

00:14:30,560 --> 00:14:36,079
um if you have multiple dependencies

00:14:33,920 --> 00:14:38,079
where there could be a subdependency

00:14:36,079 --> 00:14:39,839
conflict often it's better to try to

00:14:38,079 --> 00:14:42,839
require them at the same time

00:14:39,839 --> 00:14:44,959
and let composer figure out figure it

00:14:42,839 --> 00:14:47,120
out

00:14:44,959 --> 00:14:50,399
okay moving on let's talk about plugins

00:14:47,120 --> 00:14:50,399
for a moment let me just grab a sip

00:14:52,399 --> 00:14:55,600
i'm going to make a note that i need to

00:14:53,839 --> 00:14:57,519
fix that um

00:14:55,600 --> 00:15:01,040
that one slide i have another example

00:14:57,519 --> 00:15:03,440
but not super handy

00:15:01,040 --> 00:15:04,880
all right so composer plugins um you

00:15:03,440 --> 00:15:06,480
know when i introduce composer plugins

00:15:04,880 --> 00:15:08,320
to folks who are brand new to composer

00:15:06,480 --> 00:15:09,839
but understand drupal

00:15:08,320 --> 00:15:12,000
um i always use the analogy that

00:15:09,839 --> 00:15:14,639
composer plugins are the composer

00:15:12,000 --> 00:15:15,760
what drupal modules are to dribble right

00:15:14,639 --> 00:15:18,240
drupal modules

00:15:15,760 --> 00:15:19,600
extend the functionality of drupal

00:15:18,240 --> 00:15:23,199
composer plugins

00:15:19,600 --> 00:15:24,880
extend the functionality of composer

00:15:23,199 --> 00:15:26,320
so hopefully most of you already realize

00:15:24,880 --> 00:15:28,160
that but sometimes it's good to say

00:15:26,320 --> 00:15:30,880
these things out loud

00:15:28,160 --> 00:15:32,800
so we do have some included with the

00:15:30,880 --> 00:15:34,240
drupal recommended project composer

00:15:32,800 --> 00:15:36,639
template

00:15:34,240 --> 00:15:37,600
obviously composer installers now this

00:15:36,639 --> 00:15:41,360
is a plugin

00:15:37,600 --> 00:15:42,720
that allows us to or doesn't allow us

00:15:41,360 --> 00:15:46,560
but it instructs

00:15:42,720 --> 00:15:47,839
um our project to um when we require a

00:15:46,560 --> 00:15:50,000
drupal module

00:15:47,839 --> 00:15:52,000
composer installers has the logic that

00:15:50,000 --> 00:15:53,600
says oh that's a drupal module

00:15:52,000 --> 00:15:55,680
i want to put that in the modules

00:15:53,600 --> 00:15:57,120
contrib directory as opposed to the

00:15:55,680 --> 00:15:59,839
vendor directory

00:15:57,120 --> 00:16:00,880
so composer install installers basically

00:15:59,839 --> 00:16:04,000
allows us

00:16:00,880 --> 00:16:06,800
to install dependencies in places

00:16:04,000 --> 00:16:08,480
other than the default vendor directory

00:16:06,800 --> 00:16:09,839
super handy this is not a drupal

00:16:08,480 --> 00:16:12,079
specific plugin

00:16:09,839 --> 00:16:13,839
there's lots of open source projects

00:16:12,079 --> 00:16:17,920
that use composer installers

00:16:13,839 --> 00:16:17,920
it's been around forever it's rock solid

00:16:18,000 --> 00:16:24,800
drupal core composer scaffold um

00:16:22,000 --> 00:16:26,399
before drupal 8.8 came out when this

00:16:24,800 --> 00:16:27,600
drupal recommended project composer

00:16:26,399 --> 00:16:31,199
template was released

00:16:27,600 --> 00:16:33,519
drupal core compose uh there was a

00:16:31,199 --> 00:16:35,120
plugin to handle the scaffolding files

00:16:33,519 --> 00:16:37,399
and and drupal scaffolding files are

00:16:35,120 --> 00:16:40,959
like the htaccess file

00:16:37,399 --> 00:16:43,279
index.php and the install

00:16:40,959 --> 00:16:44,560
well not really installer anymore but

00:16:43,279 --> 00:16:47,600
all the files that kind of

00:16:44,560 --> 00:16:50,240
exist outside of the core directory and

00:16:47,600 --> 00:16:51,519
before drupal 8.8

00:16:50,240 --> 00:16:53,360
the plugin that handled these

00:16:51,519 --> 00:16:56,399
scaffolding files basically

00:16:53,360 --> 00:16:59,040
phoned home to drupal.org every time

00:16:56,399 --> 00:17:00,480
that a composer command was run and

00:16:59,040 --> 00:17:01,839
re-downloaded those files from

00:17:00,480 --> 00:17:04,079
drupal.org

00:17:01,839 --> 00:17:05,839
so you can imagine that's a ton of

00:17:04,079 --> 00:17:08,319
requests on drupal.org

00:17:05,839 --> 00:17:09,679
to you know to download scaffolding

00:17:08,319 --> 00:17:11,600
files and that didn't really make any

00:17:09,679 --> 00:17:13,439
sense

00:17:11,600 --> 00:17:15,039
the new scaffolding plug-in that was

00:17:13,439 --> 00:17:15,679
released at the same time with drupal

00:17:15,039 --> 00:17:17,600
8.8

00:17:15,679 --> 00:17:19,839
it's called drupal slash core composer

00:17:17,600 --> 00:17:22,880
scaffold

00:17:19,839 --> 00:17:26,160
much more robust much

00:17:22,880 --> 00:17:27,280
more performant and a lot more flexible

00:17:26,160 --> 00:17:29,200
and we'll do a demo

00:17:27,280 --> 00:17:31,280
of its flexibility here in a minute or

00:17:29,200 --> 00:17:32,880
two but the bottom line is that

00:17:31,280 --> 00:17:35,679
scaffolding files are now

00:17:32,880 --> 00:17:37,200
included in an assets directory which is

00:17:35,679 --> 00:17:39,120
part of drupal core and you can actually

00:17:37,200 --> 00:17:40,799
look in your core directory and see

00:17:39,120 --> 00:17:42,799
assets and there there's scaffolding

00:17:40,799 --> 00:17:44,640
files and

00:17:42,799 --> 00:17:46,720
when the scaffolding plugin runs it

00:17:44,640 --> 00:17:49,120
basically just copies files

00:17:46,720 --> 00:17:49,919
from the core directory into the right

00:17:49,120 --> 00:17:53,280
place

00:17:49,919 --> 00:17:55,120
and as part of that process

00:17:53,280 --> 00:17:56,400
we can configure composer to get

00:17:55,120 --> 00:17:58,400
involved in the process

00:17:56,400 --> 00:18:00,000
so think of it kind of like a hook right

00:17:58,400 --> 00:18:02,000
we use drupal hooks all the time to get

00:18:00,000 --> 00:18:02,640
involved with user login or entity

00:18:02,000 --> 00:18:05,919
display

00:18:02,640 --> 00:18:07,679
or things like that well core composer

00:18:05,919 --> 00:18:09,440
scaffold allows us to get

00:18:07,679 --> 00:18:11,840
involved in the process of scaffolding

00:18:09,440 --> 00:18:11,840
files

00:18:12,880 --> 00:18:16,960
one that's not included with recommended

00:18:15,039 --> 00:18:19,360
project but most folks

00:18:16,960 --> 00:18:20,000
who start using composer ultimately end

00:18:19,360 --> 00:18:23,440
up using

00:18:20,000 --> 00:18:24,400
is composer patches which is a super

00:18:23,440 --> 00:18:26,160
easy way

00:18:24,400 --> 00:18:28,799
to apply patches to your site and we'll

00:18:26,160 --> 00:18:30,400
do a demo of this in a moment

00:18:28,799 --> 00:18:32,160
and there's a bunch of other ones i

00:18:30,400 --> 00:18:34,559
actually wrote a blog post about it a

00:18:32,160 --> 00:18:38,160
few months ago so you can go to this url

00:18:34,559 --> 00:18:41,520
um to see

00:18:38,160 --> 00:18:43,919
a few more all right so let's do a quick

00:18:41,520 --> 00:18:46,000
core composer scaffold example

00:18:43,919 --> 00:18:47,679
um again allows you to customize drupal

00:18:46,000 --> 00:18:50,039
scaffolding files so let's do the

00:18:47,679 --> 00:18:51,760
example of removing your project's

00:18:50,039 --> 00:18:55,440
readme.txt

00:18:51,760 --> 00:18:59,120
so over here i have a project

00:18:55,440 --> 00:19:02,559
um let me see cd web ls

00:18:59,120 --> 00:19:04,799
oh there we go so do i have uh

00:19:02,559 --> 00:19:06,480
yeah okay so i've got a project up and

00:19:04,799 --> 00:19:08,640
running this is a brand new drupal 9

00:19:06,480 --> 00:19:10,120
project i just created it yesterday

00:19:08,640 --> 00:19:11,679
and here's the scaffolding file

00:19:10,120 --> 00:19:13,360
readme.txt

00:19:11,679 --> 00:19:15,160
now this file is not necessary for the

00:19:13,360 --> 00:19:17,120
site to operate you know just like

00:19:15,160 --> 00:19:19,280
install.txt

00:19:17,120 --> 00:19:21,440
um you know these two files and there's

00:19:19,280 --> 00:19:22,480
some more in other places but these two

00:19:21,440 --> 00:19:24,320
files are not

00:19:22,480 --> 00:19:26,000
they're they're nice to have they're

00:19:24,320 --> 00:19:27,600
informational but we don't really need

00:19:26,000 --> 00:19:29,280
them so

00:19:27,600 --> 00:19:32,240
and they can actually provide

00:19:29,280 --> 00:19:35,120
information to potential attackers

00:19:32,240 --> 00:19:36,320
to help fingerprint what cms your site

00:19:35,120 --> 00:19:38,880
is running

00:19:36,320 --> 00:19:40,640
so why not all possible i try not to

00:19:38,880 --> 00:19:42,720
include these on production

00:19:40,640 --> 00:19:43,919
so what we can do with the scaffolding

00:19:42,720 --> 00:19:45,520
plug-in

00:19:43,919 --> 00:19:47,280
is we can actually tell the scaffolding

00:19:45,520 --> 00:19:49,600
plug-in to not

00:19:47,280 --> 00:19:51,520
include these scaffolding files um and

00:19:49,600 --> 00:19:52,080
it's it it's really easy so i'm going to

00:19:51,520 --> 00:19:55,200
go back

00:19:52,080 --> 00:19:59,039
out i'm going to up i'm going to

00:19:55,200 --> 00:20:02,480
modify my composure.json file

00:19:59,039 --> 00:20:06,400
and over here i've got a little

00:20:02,480 --> 00:20:07,600
code snippet so step one is uh well i'll

00:20:06,400 --> 00:20:09,039
do this in a second i should have done

00:20:07,600 --> 00:20:10,799
this a second ago we're gonna manually

00:20:09,039 --> 00:20:12,159
delete the existing one

00:20:10,799 --> 00:20:13,840
and then we're gonna add just a little

00:20:12,159 --> 00:20:15,520
bit of code and i've gotta come out of

00:20:13,840 --> 00:20:20,640
presentation mode here

00:20:15,520 --> 00:20:23,840
just so i can copy and paste

00:20:20,640 --> 00:20:27,039
we're going to add a little bit of code

00:20:23,840 --> 00:20:28,720
to our composer.json so this extra

00:20:27,039 --> 00:20:30,400
section of your composer.json this is

00:20:28,720 --> 00:20:33,039
basically like preferences

00:20:30,400 --> 00:20:35,039
for all of your composer plugins that's

00:20:33,039 --> 00:20:38,240
one way of thinking about it

00:20:35,039 --> 00:20:39,600
so here is the drupal scaffold area

00:20:38,240 --> 00:20:43,679
this is for the core composer

00:20:39,600 --> 00:20:43,679
scaffolding plugin so underneath that

00:20:44,000 --> 00:20:48,400
i'm going to add a new bit of

00:20:45,679 --> 00:20:51,840
information that says file mapping

00:20:48,400 --> 00:20:54,240
and we're basically going to tell it

00:20:51,840 --> 00:20:56,799
let me just get all of my things lined

00:20:54,240 --> 00:20:56,799
up here

00:20:58,400 --> 00:21:02,320
so we're going to basically say this is

00:20:59,919 --> 00:21:06,080
a two

00:21:02,320 --> 00:21:08,320
and a from so we're going to copy to

00:21:06,080 --> 00:21:09,919
the webroot which is our web directory

00:21:08,320 --> 00:21:11,360
to this file

00:21:09,919 --> 00:21:13,520
false meaning we're going to copy

00:21:11,360 --> 00:21:15,280
nothing to this

00:21:13,520 --> 00:21:17,280
and just by adding this we're basically

00:21:15,280 --> 00:21:19,200
telling the core composer

00:21:17,280 --> 00:21:21,280
scaffolding plugin that we don't want

00:21:19,200 --> 00:21:23,039
the readme file copied out of the core

00:21:21,280 --> 00:21:24,880
directory anymore we want this

00:21:23,039 --> 00:21:27,280
you know you know we just don't want

00:21:24,880 --> 00:21:32,240
this anymore so i'm going to

00:21:27,280 --> 00:21:32,240
save that i'm going to rm the readme

00:21:32,960 --> 00:21:41,120
rm where am i readme.txt

00:21:38,559 --> 00:21:41,919
where am i oh i'm sorry that's why it

00:21:41,120 --> 00:21:45,360
wasn't working

00:21:41,919 --> 00:21:49,039
web read

00:21:45,360 --> 00:21:52,240
yeah can't type today there we go

00:21:49,039 --> 00:21:53,840
all right so ls web okay so the readme

00:21:52,240 --> 00:21:59,840
file's gone

00:21:53,840 --> 00:21:59,840
so now if we just do a composer install

00:22:01,280 --> 00:22:05,919
so it basically uh checks to see um

00:22:04,320 --> 00:22:07,679
if anything needs to be installed it

00:22:05,919 --> 00:22:08,880
reruns the scaffolding plugin at this

00:22:07,679 --> 00:22:12,000
point

00:22:08,880 --> 00:22:14,799
and if we look again we still don't have

00:22:12,000 --> 00:22:16,400
the readme file there which means that

00:22:14,799 --> 00:22:20,000
it's not coming back so we can do the

00:22:16,400 --> 00:22:21,760
same thing for install.txt

00:22:20,000 --> 00:22:23,280
and virtually any other file and that's

00:22:21,760 --> 00:22:25,200
just kind of the tip of the iceberg when

00:22:23,280 --> 00:22:26,880
it comes to

00:22:25,200 --> 00:22:28,559
what the scaffolding core composer

00:22:26,880 --> 00:22:31,039
scaffold plug-in does

00:22:28,559 --> 00:22:33,520
we can also patch files which is very

00:22:31,039 --> 00:22:37,280
handy especially like the hd access file

00:22:33,520 --> 00:22:40,799
we can append um a lot of folks like to

00:22:37,280 --> 00:22:43,840
append things to their robots.txt

00:22:40,799 --> 00:22:48,159
you can actually have

00:22:43,840 --> 00:22:50,400
another composer dependency

00:22:48,159 --> 00:22:52,799
also get involved in the process of

00:22:50,400 --> 00:22:52,799
adding

00:22:53,200 --> 00:22:56,880
uh new adding new scaffolding files as

00:22:56,240 --> 00:22:59,520
well

00:22:56,880 --> 00:23:01,600
so i know a lot of hosting companies um

00:22:59,520 --> 00:23:02,960
they add like yaml files

00:23:01,600 --> 00:23:05,039
so you can actually automate that

00:23:02,960 --> 00:23:06,960
process using this plugin as well

00:23:05,039 --> 00:23:08,559
so super handy well documented it's part

00:23:06,960 --> 00:23:11,600
of drupal core uh

00:23:08,559 --> 00:23:15,760
as of triple a daddy

00:23:11,600 --> 00:23:15,760
okay so i see a question uh

00:23:18,320 --> 00:23:21,360
so let me say that one towards the end

00:23:19,840 --> 00:23:22,000
because that one's not specific to what

00:23:21,360 --> 00:23:25,679
i'm covering right

00:23:22,000 --> 00:23:25,679
now michael if that's okay

00:23:26,400 --> 00:23:31,919
okay so let me go back into presentation

00:23:28,559 --> 00:23:31,919
mode here for a moment

00:23:32,000 --> 00:23:35,200
where are we on time okay i've got about

00:23:33,679 --> 00:23:37,039
20 minutes left

00:23:35,200 --> 00:23:38,480
all right composer patches this is one

00:23:37,039 --> 00:23:40,720
again if you

00:23:38,480 --> 00:23:41,760
you know in the poll at the very top if

00:23:40,720 --> 00:23:44,080
you're comfortable with the basics and

00:23:41,760 --> 00:23:48,000
you're not using composer basics

00:23:44,080 --> 00:23:49,440
um then this is definitely

00:23:48,000 --> 00:23:51,440
something that i think you'd be

00:23:49,440 --> 00:23:54,320
interested in so i see a question nick

00:23:51,440 --> 00:23:58,960
can you copy files in the extra section

00:23:54,320 --> 00:24:01,120
for drupal scaffolding i'm not sure

00:23:58,960 --> 00:24:03,279
exactly what you're asking you make it

00:24:01,120 --> 00:24:06,240
like a duplicate

00:24:03,279 --> 00:24:07,840
or can you copy files one fr from one

00:24:06,240 --> 00:24:10,400
location

00:24:07,840 --> 00:24:13,520
to like the web directory if it's the

00:24:10,400 --> 00:24:13,520
second one then yes

00:24:15,279 --> 00:24:20,000
okay so composer patches really dead

00:24:17,919 --> 00:24:22,960
simple way to apply patches

00:24:20,000 --> 00:24:25,520
to um modules or drupal core i use it

00:24:22,960 --> 00:24:27,919
for drupal core modules all the time

00:24:25,520 --> 00:24:30,080
um it's again it's just a plug-in so you

00:24:27,919 --> 00:24:34,559
require it like anything else

00:24:30,080 --> 00:24:34,559
it is compatible with uh composer 2.0

00:24:34,799 --> 00:24:39,760
um selwyn hopefully i pronounce your

00:24:38,799 --> 00:24:41,840
name correctly

00:24:39,760 --> 00:24:43,039
um i'm going to answer that in a moment

00:24:41,840 --> 00:24:45,520
but short version

00:24:43,039 --> 00:24:46,799
most people yes can be using composer

00:24:45,520 --> 00:24:50,080
too

00:24:46,799 --> 00:24:50,480
all right so let's do this demo real

00:24:50,080 --> 00:24:53,840
quick

00:24:50,480 --> 00:24:56,320
so as part of this little demo project i

00:24:53,840 --> 00:24:56,320
have

00:24:58,240 --> 00:25:02,559
i have the module draggable views uh

00:25:00,880 --> 00:25:02,960
installed so i did a composer require

00:25:02,559 --> 00:25:04,480
this

00:25:02,960 --> 00:25:06,799
you know before the session just so we

00:25:04,480 --> 00:25:08,400
have we don't have to wait for that

00:25:06,799 --> 00:25:10,080
but let's say there's a patch for it

00:25:08,400 --> 00:25:12,400
that i want to apply

00:25:10,080 --> 00:25:14,159
um now i could go in and i could go in

00:25:12,400 --> 00:25:16,240
and you know manually apply

00:25:14,159 --> 00:25:18,080
it you know either like really manually

00:25:16,240 --> 00:25:19,360
apply or use like a patch command to

00:25:18,080 --> 00:25:22,080
apply it but

00:25:19,360 --> 00:25:22,559
um it's actually pretty darn easy just

00:25:22,080 --> 00:25:25,840
to let

00:25:22,559 --> 00:25:27,360
composer patches do it for us so again

00:25:25,840 --> 00:25:30,400
i'm just gonna do

00:25:27,360 --> 00:25:31,760
i'm going to update my composer.json

00:25:30,400 --> 00:25:33,760
and i'm going to come to the bottom here

00:25:31,760 --> 00:25:34,960
again in the extra section now the extra

00:25:33,760 --> 00:25:38,000
section is where we put

00:25:34,960 --> 00:25:40,960
configuration for our

00:25:38,000 --> 00:25:42,880
plugins so i'm going to come to the very

00:25:40,960 --> 00:25:44,400
bottom um

00:25:42,880 --> 00:25:47,919
and i believe it's going to be right

00:25:44,400 --> 00:25:47,919
here so i have to put a comma there

00:25:49,039 --> 00:25:56,880
and i'm just going to copy this code

00:25:52,960 --> 00:25:59,360
but we're already patches

00:25:56,880 --> 00:25:59,360
come on

00:26:01,279 --> 00:26:04,880
maybe i missed one but let's see

00:26:06,320 --> 00:26:10,320
oh no that's gonna be i have to i'm in

00:26:08,080 --> 00:26:12,000
the wrong place

00:26:10,320 --> 00:26:14,799
that's the end of the extra section so

00:26:12,000 --> 00:26:14,799
it's going to go here

00:26:18,159 --> 00:26:22,080
all right so you add a new patches

00:26:19,840 --> 00:26:24,080
section so again

00:26:22,080 --> 00:26:25,120
the composer patches module is going to

00:26:24,080 --> 00:26:29,360
be looking for

00:26:25,120 --> 00:26:33,120
this key inside of your extras

00:26:29,360 --> 00:26:34,320
and then for each two three four for

00:26:33,120 --> 00:26:39,039
each dependency you

00:26:34,320 --> 00:26:42,640
you wanna patch you basically add

00:26:39,039 --> 00:26:46,320
um its vendor name

00:26:42,640 --> 00:26:46,320
so oh that's actually the wrong code

00:26:47,279 --> 00:26:50,880
control control okay so look at that i

00:26:50,240 --> 00:26:52,480
updated

00:26:50,880 --> 00:26:54,799
up here but i didn't update down there

00:26:52,480 --> 00:26:58,320
so glad i caught that

00:26:54,799 --> 00:26:58,320
easy enough fix copy

00:27:02,400 --> 00:27:08,159
and i will talk about the uh there we go

00:27:06,159 --> 00:27:10,080
all right so we're gonna patch drupal

00:27:08,159 --> 00:27:11,520
draggable views and this is vendor name

00:27:10,080 --> 00:27:13,679
so this is the same name that we used

00:27:11,520 --> 00:27:17,840
when we required it

00:27:13,679 --> 00:27:21,039
and it's gonna be an array of patches

00:27:17,840 --> 00:27:22,480
in this case we only have one patch so

00:27:21,039 --> 00:27:25,120
the first part of it

00:27:22,480 --> 00:27:26,720
is basically just a description so this

00:27:25,120 --> 00:27:28,799
can be anything you want i tend to keep

00:27:26,720 --> 00:27:29,440
this the same description or the same

00:27:28,799 --> 00:27:32,399
text

00:27:29,440 --> 00:27:33,919
as what the issue description is and

00:27:32,399 --> 00:27:34,799
then the second half of this is

00:27:33,919 --> 00:27:37,360
basically

00:27:34,799 --> 00:27:38,880
just the path to the patch and this

00:27:37,360 --> 00:27:42,240
doesn't have to be local as you can see

00:27:38,880 --> 00:27:44,480
this is the patch directly on drupal.org

00:27:42,240 --> 00:27:48,399
um so if you can identify which patch

00:27:44,480 --> 00:27:50,240
you want to use

00:27:48,399 --> 00:27:52,000
and i think i have everything if you can

00:27:50,240 --> 00:27:53,840
identify which path you want to use and

00:27:52,000 --> 00:27:55,279
you can use composer patches

00:27:53,840 --> 00:27:57,760
and this is basically saying hey

00:27:55,279 --> 00:28:00,240
composer patches uh plugin

00:27:57,760 --> 00:28:02,799
i'd like you to patch this dependency

00:28:00,240 --> 00:28:03,840
with this patch so let's give that a

00:28:02,799 --> 00:28:05,840
shot

00:28:03,840 --> 00:28:07,600
i like composer validate this tells me

00:28:05,840 --> 00:28:10,399
if i have um

00:28:07,600 --> 00:28:11,600
any uh syntax errors like missing commas

00:28:10,399 --> 00:28:13,840
or anything like that

00:28:11,600 --> 00:28:16,799
which i don't but let's do a composer

00:28:13,840 --> 00:28:20,159
install and see if that patches

00:28:16,799 --> 00:28:23,440
so we can see um it gathered pack

00:28:20,159 --> 00:28:24,559
patches for the dependencies and so what

00:28:23,440 --> 00:28:27,440
happens is

00:28:24,559 --> 00:28:28,960
it reinstalls the dependency and this is

00:28:27,440 --> 00:28:31,039
i believe just to make sure it has an

00:28:28,960 --> 00:28:33,840
absolute clean copy

00:28:31,039 --> 00:28:34,320
and then it attempts to apply the patch

00:28:33,840 --> 00:28:37,520
um

00:28:34,320 --> 00:28:38,320
in this case it applied the patch and

00:28:37,520 --> 00:28:39,039
you can see here's our little

00:28:38,320 --> 00:28:40,640
description

00:28:39,039 --> 00:28:42,240
if the patch doesn't apply you'd get a

00:28:40,640 --> 00:28:43,120
little message saying patch did not

00:28:42,240 --> 00:28:46,159
apply

00:28:43,120 --> 00:28:48,399
but it's patched and even if we

00:28:46,159 --> 00:28:50,320
update draggable view say that come say

00:28:48,399 --> 00:28:54,399
there's a 2.0.1

00:28:50,320 --> 00:28:56,000
release it will still try to apply this

00:28:54,399 --> 00:28:57,600
patch

00:28:56,000 --> 00:28:59,039
if the patch doesn't apply well then we

00:28:57,600 --> 00:29:00,720
have to go back and do our homework in

00:28:59,039 --> 00:29:02,080
the issue and maybe reroll the patch or

00:29:00,720 --> 00:29:05,120
something but

00:29:02,080 --> 00:29:07,360
um until this patch gets committed

00:29:05,120 --> 00:29:09,279
you know just leave the the information

00:29:07,360 --> 00:29:10,880
in your composer.json once that patch

00:29:09,279 --> 00:29:12,320
becomes part of a release you can remove

00:29:10,880 --> 00:29:13,039
it from your composer.js and you're good

00:29:12,320 --> 00:29:14,799
to go

00:29:13,039 --> 00:29:16,720
but this makes it really just dead

00:29:14,799 --> 00:29:20,000
simple to patch core

00:29:16,720 --> 00:29:20,000
and other dependencies

00:29:20,480 --> 00:29:26,799
okay um looking at the questions here

00:29:23,840 --> 00:29:27,679
um nick had amazing captain paddle on

00:29:26,799 --> 00:29:30,159
from outside

00:29:27,679 --> 00:29:33,360
yep you can absolutely do that nick

00:29:30,159 --> 00:29:33,360
absolutely do that 100

00:29:36,480 --> 00:29:41,840
all right how are we on time we got 15

00:29:38,480 --> 00:29:41,840
minutes left i think we're gonna be fine

00:29:45,679 --> 00:29:48,960
okay let's talk about dependency

00:29:47,120 --> 00:29:51,919
conflict resolution a bit

00:29:48,960 --> 00:29:53,200
um this happens a lot when you think

00:29:51,919 --> 00:29:54,080
that you should be able to update

00:29:53,200 --> 00:29:55,919
something

00:29:54,080 --> 00:29:57,760
you can see that there's an update and

00:29:55,919 --> 00:29:58,159
you go to do a composer update vendor

00:29:57,760 --> 00:29:59,600
name

00:29:58,159 --> 00:30:01,200
and you get this message or something

00:29:59,600 --> 00:30:03,440
similar so this was the

00:30:01,200 --> 00:30:04,960
composer one this was the text it's a

00:30:03,440 --> 00:30:08,159
little bit different but the same the

00:30:04,960 --> 00:30:10,720
gist is the same in composer two

00:30:08,159 --> 00:30:12,320
um so how do you troubleshoot that i

00:30:10,720 --> 00:30:15,039
always start with why not

00:30:12,320 --> 00:30:16,960
um why not is actually an alias for the

00:30:15,039 --> 00:30:18,399
prohibits command

00:30:16,960 --> 00:30:20,640
but i think why not makes a lot more

00:30:18,399 --> 00:30:22,399
sense um you know are you trying to

00:30:20,640 --> 00:30:25,200
compose or update

00:30:22,399 --> 00:30:27,120
you know vendor slash taco and you get

00:30:25,200 --> 00:30:27,440
this message and i say well composer why

00:30:27,120 --> 00:30:29,360
not

00:30:27,440 --> 00:30:31,120
vendor slash taco why can't i update it

00:30:29,360 --> 00:30:33,520
so it just kind of makes sense

00:30:31,120 --> 00:30:35,279
and what why not we'll show you is it

00:30:33,520 --> 00:30:36,000
will basically give you a little summary

00:30:35,279 --> 00:30:38,559
of

00:30:36,000 --> 00:30:42,000
what's blocking it so here's like a

00:30:38,559 --> 00:30:44,960
really silly example but i like this one

00:30:42,000 --> 00:30:44,960
let's come over here

00:30:45,679 --> 00:30:53,520
so if i try and do a composer

00:30:50,240 --> 00:30:55,200
update twig twig now this is kind of a

00:30:53,520 --> 00:30:56,559
real obvious one because twig is part of

00:30:55,200 --> 00:30:58,399
drupal core

00:30:56,559 --> 00:31:00,240
so obviously twig is going to be locked

00:30:58,399 --> 00:31:02,480
to a specific version

00:31:00,240 --> 00:31:05,640
um but actually here let's use another

00:31:02,480 --> 00:31:08,240
command first out

00:31:05,640 --> 00:31:11,760
outdated twig

00:31:08,240 --> 00:31:14,320
outdated will let us know if there are

00:31:11,760 --> 00:31:17,279
any uh if there are any updates so we're

00:31:14,320 --> 00:31:18,159
currently using twig 2.14.1 and triple

00:31:17,279 --> 00:31:19,519
nine

00:31:18,159 --> 00:31:21,200
but there's you know version three of

00:31:19,519 --> 00:31:23,760
twig is out there so

00:31:21,200 --> 00:31:25,200
if you're kind of new to drupal or

00:31:23,760 --> 00:31:26,159
you're not really sure like how it all

00:31:25,200 --> 00:31:27,519
works yet

00:31:26,159 --> 00:31:29,200
you might think oh well i definitely

00:31:27,519 --> 00:31:29,679
want the new twig and you're gonna try

00:31:29,200 --> 00:31:33,279
and do

00:31:29,679 --> 00:31:35,279
a composer update twig

00:31:33,279 --> 00:31:37,039
twig and you're gonna get this little

00:31:35,279 --> 00:31:39,440
message

00:31:37,039 --> 00:31:41,360
um nothing to install update or remove

00:31:39,440 --> 00:31:44,080
you're like what are you talking about

00:31:41,360 --> 00:31:45,600
you know i can see very clearly that

00:31:44,080 --> 00:31:47,840
there's an update to twig

00:31:45,600 --> 00:31:49,519
and i'm telling you to update it so why

00:31:47,840 --> 00:31:53,919
can't i have

00:31:49,519 --> 00:31:53,919
so composer why not

00:31:54,559 --> 00:31:58,080
and if you do why not it'll tell you

00:31:56,480 --> 00:32:02,159
exactly that

00:31:58,080 --> 00:32:05,200
well this dependency requires

00:32:02,159 --> 00:32:09,519
this constraint so somewhere above 1.41

00:32:05,200 --> 00:32:12,000
or above 2.12. drupal core

00:32:09,519 --> 00:32:13,120
basically wants something in the 2.12

00:32:12,000 --> 00:32:16,640
range

00:32:13,120 --> 00:32:17,679
but core recommended requires exactly

00:32:16,640 --> 00:32:20,880
this

00:32:17,679 --> 00:32:23,440
so we cannot update twig because

00:32:20,880 --> 00:32:24,480
these these three things that depend on

00:32:23,440 --> 00:32:27,600
twig

00:32:24,480 --> 00:32:28,960
are specifying these versions so again

00:32:27,600 --> 00:32:31,360
this is a really simple

00:32:28,960 --> 00:32:32,080
easy example but you can extrapolate

00:32:31,360 --> 00:32:35,600
this for

00:32:32,080 --> 00:32:36,880
any dependency um and i know that this

00:32:35,600 --> 00:32:39,440
is you know i've had trouble with i

00:32:36,880 --> 00:32:39,440
think the the

00:32:39,720 --> 00:32:44,960
gspr module is that the right acronym

00:32:42,240 --> 00:32:44,960
gdpr

00:32:45,120 --> 00:32:49,440
at some point that was dependent on an

00:32:47,039 --> 00:32:53,279
older version of drush

00:32:49,440 --> 00:32:55,279
which seemed nutty it's no longer but

00:32:53,279 --> 00:32:56,559
i actually was doing office hours with

00:32:55,279 --> 00:32:58,720
some of my students one day and we

00:32:56,559 --> 00:33:00,480
stumbled upon that one and

00:32:58,720 --> 00:33:02,720
it ended up being a really great lesson

00:33:00,480 --> 00:33:03,679
in how to use why not to figure out what

00:33:02,720 --> 00:33:06,240
was blocking

00:33:03,679 --> 00:33:06,240
an update

00:33:07,600 --> 00:33:12,640
okay so i see oozman i see your question

00:33:10,640 --> 00:33:15,600
and i see some stuff in the chat i'm

00:33:12,640 --> 00:33:18,279
gonna save both of those to the end

00:33:15,600 --> 00:33:19,440
that's okay um you can also use

00:33:18,279 --> 00:33:21,039
composerdepends

00:33:19,440 --> 00:33:22,960
vendor name it gives you similar

00:33:21,039 --> 00:33:24,480
information um

00:33:22,960 --> 00:33:28,399
you know as far as well here let's just

00:33:24,480 --> 00:33:30,720
show it to you composer depends

00:33:28,399 --> 00:33:31,440
twig twig but to be quite honest i end

00:33:30,720 --> 00:33:34,000
up using

00:33:31,440 --> 00:33:35,760
you know why not all the time um they're

00:33:34,000 --> 00:33:36,880
not exactly i think in some cases they

00:33:35,760 --> 00:33:38,480
might give you done for different

00:33:36,880 --> 00:33:39,679
information but

00:33:38,480 --> 00:33:43,200
you know it's good to know that that one

00:33:39,679 --> 00:33:45,760
exists oops

00:33:43,200 --> 00:33:46,240
composer outdated i just showed you um

00:33:45,760 --> 00:33:49,120
this one

00:33:46,240 --> 00:33:51,120
is is pretty handy you can just do a

00:33:49,120 --> 00:33:54,720
composer out

00:33:51,120 --> 00:33:55,039
dated on everything and this will show

00:33:54,720 --> 00:33:58,000
you

00:33:55,039 --> 00:34:00,640
direct and indirect dependencies a

00:33:58,000 --> 00:34:02,720
direct dependency is one that you

00:34:00,640 --> 00:34:04,799
specified that you actually said

00:34:02,720 --> 00:34:07,840
composer require

00:34:04,799 --> 00:34:10,320
um so there's gonna be a lot of these um

00:34:07,840 --> 00:34:12,159
but if you can do a composer outdated

00:34:10,320 --> 00:34:14,040
direct

00:34:12,159 --> 00:34:15,520
if you just wanna see direct

00:34:14,040 --> 00:34:17,040
dependencies

00:34:15,520 --> 00:34:19,280
and there are none that are updated

00:34:17,040 --> 00:34:22,399
since i just created this site yesterday

00:34:19,280 --> 00:34:23,040
you can also do a composer outdated i

00:34:22,399 --> 00:34:26,399
believe it's

00:34:23,040 --> 00:34:27,839
minor only

00:34:26,399 --> 00:34:30,879
for minor updates this will throw out

00:34:27,839 --> 00:34:30,879
any major updates

00:34:33,520 --> 00:34:36,720
so let's let that finish

00:34:37,679 --> 00:34:42,079
yeah so i tend to use composer outdated

00:34:40,879 --> 00:34:44,560
instead of using

00:34:42,079 --> 00:34:46,399
the available updates page on drupal.org

00:34:44,560 --> 00:34:47,119
because available updates doesn't show

00:34:46,399 --> 00:34:49,200
you

00:34:47,119 --> 00:34:51,119
that there's an updated rush or there's

00:34:49,200 --> 00:34:52,800
an update to composer plugins

00:34:51,119 --> 00:34:54,399
um this basically shows you everything

00:34:52,800 --> 00:34:55,679
in your project so what

00:34:54,399 --> 00:34:57,599
you know i shouldn't say i never use

00:34:55,679 --> 00:35:00,640
available updates but

00:34:57,599 --> 00:35:02,000
um this is kind of my first stop um a

00:35:00,640 --> 00:35:03,920
composer outdated when it comes

00:35:02,000 --> 00:35:06,160
time to think about doing updates for my

00:35:03,920 --> 00:35:06,160
site

00:35:06,640 --> 00:35:10,160
there's a direct and i showed you

00:35:08,320 --> 00:35:13,280
earlier you can do twigs star

00:35:10,160 --> 00:35:14,800
you can use wildcards there

00:35:13,280 --> 00:35:16,640
okay so when you do get a conflict

00:35:14,800 --> 00:35:18,000
resolution my first stop is try and

00:35:16,640 --> 00:35:19,520
diagnose try and figure out what the

00:35:18,000 --> 00:35:22,880
problem is because if you can identify

00:35:19,520 --> 00:35:26,000
the problem you can usually solve it

00:35:22,880 --> 00:35:28,320
a lot of times i end up removing

00:35:26,000 --> 00:35:29,599
problem dependencies and then just

00:35:28,320 --> 00:35:31,760
re-requiring them

00:35:29,599 --> 00:35:33,520
and i would say 50 of the time for me

00:35:31,760 --> 00:35:36,160
this solves the problem

00:35:33,520 --> 00:35:38,320
so if i know that i have an issue with

00:35:36,160 --> 00:35:39,280
two modules or a module in drush as in

00:35:38,320 --> 00:35:42,560
that gdpr

00:35:39,280 --> 00:35:44,079
example i'll just remove them both

00:35:42,560 --> 00:35:45,839
and then require them together at the

00:35:44,079 --> 00:35:46,320
same time and see if composer can figure

00:35:45,839 --> 00:35:50,320
out the

00:35:46,320 --> 00:35:52,000
the dependency issues at that point

00:35:50,320 --> 00:35:53,359
um another thing which i'm sure a lot of

00:35:52,000 --> 00:35:56,000
folks

00:35:53,359 --> 00:35:57,680
have tried delete the vendor directories

00:35:56,000 --> 00:35:59,040
and i say vendor directories here

00:35:57,680 --> 00:36:00,400
because i'm not talking just about the

00:35:59,040 --> 00:36:02,880
vendor directory

00:36:00,400 --> 00:36:03,440
but any directory where dependencies end

00:36:02,880 --> 00:36:06,400
up

00:36:03,440 --> 00:36:07,599
so it'd be vendor module slash contrib

00:36:06,400 --> 00:36:10,560
theme slash contrib

00:36:07,599 --> 00:36:14,560
maybe even core and then do a composer

00:36:10,560 --> 00:36:14,560
install just to reinstall all that stuff

00:36:15,040 --> 00:36:19,200
i know some folks advocate deleting you

00:36:17,920 --> 00:36:21,280
know vendor directories

00:36:19,200 --> 00:36:23,200
and deleting the composer.lock and then

00:36:21,280 --> 00:36:25,920
doing a composer install

00:36:23,200 --> 00:36:26,720
i try to avoid this at all costs when

00:36:25,920 --> 00:36:28,880
you do this

00:36:26,720 --> 00:36:30,960
you're basically going to end up

00:36:28,880 --> 00:36:32,640
updating every single dependency at the

00:36:30,960 --> 00:36:34,800
same time on your site

00:36:32,640 --> 00:36:36,079
now if all of your dependencies are

00:36:34,800 --> 00:36:39,119
already up to date

00:36:36,079 --> 00:36:42,079
not a big deal but if you're like most

00:36:39,119 --> 00:36:43,520
folks you know your available updates

00:36:42,079 --> 00:36:46,320
page is a combination of

00:36:43,520 --> 00:36:49,359
yellow and green yellow being available

00:36:46,320 --> 00:36:51,040
updates but not security related

00:36:49,359 --> 00:36:52,400
if you delete that compose drop lock and

00:36:51,040 --> 00:36:54,320
run a composer

00:36:52,400 --> 00:36:55,520
install or compose or update for that

00:36:54,320 --> 00:36:57,280
matter you're going to get the latest

00:36:55,520 --> 00:37:00,800
version of everything

00:36:57,280 --> 00:37:01,280
and then testing you know testing can

00:37:00,800 --> 00:37:04,079
become

00:37:01,280 --> 00:37:05,359
you know a bit of a problem there so

00:37:04,079 --> 00:37:07,040
usually with

00:37:05,359 --> 00:37:08,400
steps one two and three i can solve

00:37:07,040 --> 00:37:11,680
eighty percent of the issues

00:37:08,400 --> 00:37:11,680
that that i come up against

00:37:12,160 --> 00:37:17,280
all right um i might

00:37:15,520 --> 00:37:18,640
since we're short on time i don't wanna

00:37:17,280 --> 00:37:20,079
ignore questions and i know we have to

00:37:18,640 --> 00:37:23,760
finish a quarter after

00:37:20,079 --> 00:37:25,040
i'm actually going to stop here answer

00:37:23,760 --> 00:37:26,240
questions and if i have

00:37:25,040 --> 00:37:27,680
a chance i'll come back to this

00:37:26,240 --> 00:37:29,200
otherwise you have the slides and i'll

00:37:27,680 --> 00:37:31,520
be around you can always

00:37:29,200 --> 00:37:33,359
um i'll show you my contact info so you

00:37:31,520 --> 00:37:33,680
can always ping me uh wherever and ask

00:37:33,359 --> 00:37:36,960
me

00:37:33,680 --> 00:37:39,520
questions about this stuff um

00:37:36,960 --> 00:37:41,599
so in the q a usman is there a way to

00:37:39,520 --> 00:37:43,119
build composer from multi-site setup

00:37:41,599 --> 00:37:46,720
where each site can specify

00:37:43,119 --> 00:37:49,760
their additional dependencies

00:37:46,720 --> 00:37:52,560
not that i know of um

00:37:49,760 --> 00:37:54,320
you're kind of asking for something that

00:37:52,560 --> 00:37:56,560
would be like a require

00:37:54,320 --> 00:37:58,079
and well not even a required dev

00:37:56,560 --> 00:38:01,839
situation

00:37:58,079 --> 00:38:02,880
um i mean the short answer is i don't

00:38:01,839 --> 00:38:04,400
know a way to do that i don't know if

00:38:02,880 --> 00:38:06,240
someone else does maybe they can they

00:38:04,400 --> 00:38:06,640
can comment in the chat but i do not

00:38:06,240 --> 00:38:10,240
know

00:38:06,640 --> 00:38:12,400
a way to do that the composer install

00:38:10,240 --> 00:38:13,760
or update so this is a phil question the

00:38:12,400 --> 00:38:16,240
composer installer update is often

00:38:13,760 --> 00:38:18,079
hanging at the update dependencies

00:38:16,240 --> 00:38:20,079
is there a way to save time phil are you

00:38:18,079 --> 00:38:21,520
using composer

00:38:20,079 --> 00:38:23,200
so you're saying hanging is that

00:38:21,520 --> 00:38:25,280
indefinite hanging

00:38:23,200 --> 00:38:26,480
or just is it just really slow because

00:38:25,280 --> 00:38:28,880
if it's just really slow

00:38:26,480 --> 00:38:30,640
i would say try composer two and i'll

00:38:28,880 --> 00:38:32,560
i'll skip ahead to the composer two uh

00:38:30,640 --> 00:38:36,480
slides here in a moment

00:38:32,560 --> 00:38:37,839
it could also be a memory issue um

00:38:36,480 --> 00:38:39,839
so those would be the two things i would

00:38:37,839 --> 00:38:43,040
look at so very slow

00:38:39,839 --> 00:38:43,040
composer one uh

00:38:43,200 --> 00:38:47,680
i would try composer two if possible um

00:38:46,400 --> 00:38:49,440
that might solve the problem because

00:38:47,680 --> 00:38:52,480
it's so much more performant

00:38:49,440 --> 00:38:55,680
it's faster um and

00:38:52,480 --> 00:38:57,359
it uses a lot less memory um

00:38:55,680 --> 00:39:00,720
so what i'm gonna have a hard time with

00:38:57,359 --> 00:39:00,720
your name f

00:39:02,160 --> 00:39:06,079
am i saying that right uh papadopoulos i

00:39:04,720 --> 00:39:07,680
actually grew up with someone whose last

00:39:06,079 --> 00:39:08,800
name was papadopoulos so that's pretty

00:39:07,680 --> 00:39:12,160
funny

00:39:08,800 --> 00:39:15,760
um anyway uh the

00:39:12,160 --> 00:39:17,839
dependency f stathios just mentioned

00:39:15,760 --> 00:39:19,920
uh you don't need that for composer two

00:39:17,839 --> 00:39:21,280
so composer one yes that can't optimize

00:39:19,920 --> 00:39:22,960
some things um

00:39:21,280 --> 00:39:24,400
composer if you can go to composer two

00:39:22,960 --> 00:39:25,680
that would be i think the better

00:39:24,400 --> 00:39:29,200
solution

00:39:25,680 --> 00:39:31,200
uh let me just uh go up in this in the

00:39:29,200 --> 00:39:33,280
chat here is there anything that i need

00:39:31,200 --> 00:39:36,560
to

00:39:33,280 --> 00:39:39,920
know what i do elsa yeah

00:39:36,560 --> 00:39:42,000
thomas um putting the note id

00:39:39,920 --> 00:39:42,960
in the description of the patch great

00:39:42,000 --> 00:39:47,599
idea

00:39:42,960 --> 00:39:49,200
yep yep yep um composer update nothing

00:39:47,599 --> 00:39:51,920
yep that's very similar to composer

00:39:49,200 --> 00:39:54,400
install so yes that's good

00:39:51,920 --> 00:39:56,000
usually you use the url okay it's all

00:39:54,400 --> 00:39:58,640
about composer patches and the patch

00:39:56,000 --> 00:40:00,480
description great great great great

00:39:58,640 --> 00:40:02,560
how to install patches modifies modules

00:40:00,480 --> 00:40:03,359
that info emo especially core version

00:40:02,560 --> 00:40:05,119
requirement

00:40:03,359 --> 00:40:07,040
um so bow house you basically have to

00:40:05,119 --> 00:40:10,240
create that patch

00:40:07,040 --> 00:40:13,200
and then apply to drupal core

00:40:10,240 --> 00:40:14,560
roger uh composer update dash act is the

00:40:13,200 --> 00:40:16,079
same as update nothing yeah i'm gonna

00:40:14,560 --> 00:40:18,160
talk about composer update lock here in

00:40:16,079 --> 00:40:21,440
a second

00:40:18,160 --> 00:40:23,599
um okay i think i'm all caught up with

00:40:21,440 --> 00:40:25,920
the chat

00:40:23,599 --> 00:40:27,040
what is the alternative to doing oh here

00:40:25,920 --> 00:40:30,640
um

00:40:27,040 --> 00:40:32,480
a bunch more questions so uh uh griom

00:40:30,640 --> 00:40:34,240
uh guinea hopefully i'm saying your name

00:40:32,480 --> 00:40:35,520
right i'm terrible with names

00:40:34,240 --> 00:40:37,280
what is the best strategy when it comes

00:40:35,520 --> 00:40:38,640
to updating plugins libraries during a

00:40:37,280 --> 00:40:39,839
project life do we do it regularly

00:40:38,640 --> 00:40:41,440
maintain everything up today even if it

00:40:39,839 --> 00:40:42,400
involves more testing

00:40:41,440 --> 00:40:45,760
you know it's kind of like drupal

00:40:42,400 --> 00:40:47,440
modules um you know

00:40:45,760 --> 00:40:49,280
you know all most of the stuff's on

00:40:47,440 --> 00:40:52,480
github so if you see an update to

00:40:49,280 --> 00:40:54,640
composer patches go to github

00:40:52,480 --> 00:40:56,240
see what changes are included in that in

00:40:54,640 --> 00:40:57,599
that update if it's a security update

00:40:56,240 --> 00:40:59,680
yeah sure

00:40:57,599 --> 00:41:01,680
but if it's like a minor update and it's

00:40:59,680 --> 00:41:03,839
like adding new functionality that you

00:41:01,680 --> 00:41:05,280
don't need and you're fine where you are

00:41:03,839 --> 00:41:06,319
then don't update if it means more

00:41:05,280 --> 00:41:08,319
testing

00:41:06,319 --> 00:41:10,400
i think it's it's not all that different

00:41:08,319 --> 00:41:13,280
from you know from non-security updates

00:41:10,400 --> 00:41:13,280
to drupal modules

00:41:14,160 --> 00:41:19,520
um what to do when you get memory limit

00:41:17,760 --> 00:41:21,280
apart from increasing server resources

00:41:19,520 --> 00:41:24,160
use composer 2.

00:41:21,280 --> 00:41:24,800
honestly that's going to solve 95 of the

00:41:24,160 --> 00:41:27,440
memory

00:41:24,800 --> 00:41:29,280
limit issues out there what is the

00:41:27,440 --> 00:41:30,240
alternative of deleting this is a david

00:41:29,280 --> 00:41:32,000
what is the alternative

00:41:30,240 --> 00:41:34,640
of deleting composer.lock and do a

00:41:32,000 --> 00:41:38,240
composer install um

00:41:34,640 --> 00:41:39,440
after um i'm not sure what you mean by

00:41:38,240 --> 00:41:41,440
like an alternative

00:41:39,440 --> 00:41:42,880
i you know i don't recommend deleting

00:41:41,440 --> 00:41:44,240
composer.lock

00:41:42,880 --> 00:41:47,040
that's like the nuclear option that's

00:41:44,240 --> 00:41:49,200
the absolute last resort

00:41:47,040 --> 00:41:50,319
um you know if you do that and do a

00:41:49,200 --> 00:41:53,359
composure install

00:41:50,319 --> 00:41:55,040
you're basically going to you're

00:41:53,359 --> 00:41:57,920
basically removing your

00:41:55,040 --> 00:41:59,280
history of that project not in a git

00:41:57,920 --> 00:42:01,760
sense but in in

00:41:59,280 --> 00:42:03,680
the versions that are currently in use

00:42:01,760 --> 00:42:05,359
and composer install is going to try to

00:42:03,680 --> 00:42:08,160
install the latest version

00:42:05,359 --> 00:42:11,839
based on every single version constraint

00:42:08,160 --> 00:42:11,839
so it's updating everything all at once

00:42:13,280 --> 00:42:17,280
the no install flag when when creating a

00:42:16,480 --> 00:42:19,280
project

00:42:17,280 --> 00:42:20,720
so when you do a composer create that

00:42:19,280 --> 00:42:24,319
does two things

00:42:20,720 --> 00:42:27,119
that downloads the composer template

00:42:24,319 --> 00:42:29,839
and then it runs a composer install when

00:42:27,119 --> 00:42:31,680
you add when you do a composer create

00:42:29,839 --> 00:42:34,960
dash dash no install

00:42:31,680 --> 00:42:36,319
you just do the first part right you

00:42:34,960 --> 00:42:38,240
just do the download but it doesn't

00:42:36,319 --> 00:42:39,920
actually do the composer install so

00:42:38,240 --> 00:42:41,599
a lot of folks do the no install because

00:42:39,920 --> 00:42:43,200
they want the template then they want to

00:42:41,599 --> 00:42:45,680
make changes to the template before they

00:42:43,200 --> 00:42:47,280
do the install

00:42:45,680 --> 00:42:49,440
uh version control conflicts related

00:42:47,280 --> 00:42:51,119
composer outlook uh boy on

00:42:49,440 --> 00:42:52,800
yes those are like some slides that

00:42:51,119 --> 00:42:53,839
unfortunately we're gonna get to because

00:42:52,800 --> 00:42:57,119
i think i'm just about

00:42:53,839 --> 00:42:58,880
out of time um

00:42:57,119 --> 00:43:00,720
i'm getting the i'm getting the hook

00:42:58,880 --> 00:43:03,920
here in just three minutes

00:43:00,720 --> 00:43:03,920
so i will um

00:43:06,640 --> 00:43:10,160
okay last question in the discussion

00:43:08,640 --> 00:43:11,680
chat for now then i'm gonna i'm gonna go

00:43:10,160 --> 00:43:13,040
skipped right to composer 2 since we

00:43:11,680 --> 00:43:14,079
seem to have a lot of questions about

00:43:13,040 --> 00:43:16,640
that

00:43:14,079 --> 00:43:17,839
um sergio hopefully again apologies if i

00:43:16,640 --> 00:43:19,200
didn't pronounce your name right the

00:43:17,839 --> 00:43:22,079
problem with composer 2 at the moment is

00:43:19,200 --> 00:43:25,280
not all contrib modules are compatible

00:43:22,079 --> 00:43:29,280
um true

00:43:25,280 --> 00:43:32,400
but a lot of them are um

00:43:29,280 --> 00:43:33,839
so i'm gonna i'm gonna

00:43:32,400 --> 00:43:35,680
fly past these so we can talk about

00:43:33,839 --> 00:43:39,440
composer two um

00:43:35,680 --> 00:43:40,319
composer two is here it's a lot faster

00:43:39,440 --> 00:43:43,920
and it uses

00:43:40,319 --> 00:43:46,720
way way way less memory

00:43:43,920 --> 00:43:51,040
um compatible with many i hate the word

00:43:46,720 --> 00:43:54,560
popular maybe well used composer plugins

00:43:51,040 --> 00:43:56,240
and they can be used concurrently so

00:43:54,560 --> 00:43:58,160
not everybody on your team has to update

00:43:56,240 --> 00:43:58,800
a composer too at the same time the lock

00:43:58,160 --> 00:44:01,200
files

00:43:58,800 --> 00:44:02,160
are compatible and i say that's

00:44:01,200 --> 00:44:03,200
semi-official

00:44:02,160 --> 00:44:05,520
because it's not anywhere in the

00:44:03,200 --> 00:44:08,079
documentation but one of the authors of

00:44:05,520 --> 00:44:11,280
composer did write about this

00:44:08,079 --> 00:44:12,960
in somewhere on github um

00:44:11,280 --> 00:44:15,520
so you can try today i know early on

00:44:12,960 --> 00:44:19,440
someone suggested i change this slide

00:44:15,520 --> 00:44:21,040
to self update dash dash one yep and i

00:44:19,440 --> 00:44:22,880
yeah that's fine i'm gonna agree with

00:44:21,040 --> 00:44:25,200
that so here let me i'll make this

00:44:22,880 --> 00:44:29,040
change so that everybody has that

00:44:25,200 --> 00:44:30,560
that dash one well here let me put the

00:44:29,040 --> 00:44:32,000
two first

00:44:30,560 --> 00:44:34,839
and then if you want to go back one you

00:44:32,000 --> 00:44:37,280
just do a dash dash

00:44:34,839 --> 00:44:40,880
one

00:44:37,280 --> 00:44:42,960
so it's very easy to oops

00:44:40,880 --> 00:44:43,920
sorry it's very easy to go up to version

00:44:42,960 --> 00:44:46,480
two

00:44:43,920 --> 00:44:48,640
um and then go back to version one if

00:44:46,480 --> 00:44:50,960
you're not cool with it

00:44:48,640 --> 00:44:52,480
um composer plugins that are that are

00:44:50,960 --> 00:44:54,560
often used you know the recommended

00:44:52,480 --> 00:44:57,520
project all the drupal core stuff is

00:44:54,560 --> 00:44:59,520
composer patches is ready um if you use

00:44:57,520 --> 00:45:01,359
the composer installer's extender this

00:44:59,520 --> 00:45:05,040
allows you to add like javascripty

00:45:01,359 --> 00:45:06,319
type dependencies using composer

00:45:05,040 --> 00:45:08,560
i use this because i have a lot of

00:45:06,319 --> 00:45:11,599
clients who where we do commit

00:45:08,560 --> 00:45:14,720
the dependencies

00:45:11,599 --> 00:45:15,760
this automatically removes extra.get

00:45:14,720 --> 00:45:17,040
directories

00:45:15,760 --> 00:45:18,880
and again it's not an official release

00:45:17,040 --> 00:45:20,160
but there is a composer two branch for

00:45:18,880 --> 00:45:23,280
this

00:45:20,160 --> 00:45:26,160
so for me once i have these four

00:45:23,280 --> 00:45:28,240
um pretty much for all my sites i i'm

00:45:26,160 --> 00:45:31,280
able to use composer two

00:45:28,240 --> 00:45:32,640
and um you know there are some

00:45:31,280 --> 00:45:34,640
some folks in the chat are mentioned

00:45:32,640 --> 00:45:36,480
there are still some some cases out

00:45:34,640 --> 00:45:38,560
there some modules

00:45:36,480 --> 00:45:40,319
um that aren't supported by composer two

00:45:38,560 --> 00:45:43,200
but i think those are

00:45:40,319 --> 00:45:45,920
the numbers rapidly dwindling so um i

00:45:43,200 --> 00:45:47,040
would say try composure two if it works

00:45:45,920 --> 00:45:50,400
you're never gonna go back

00:45:47,040 --> 00:45:51,520
because it's a lot faster there's the

00:45:50,400 --> 00:45:53,040
require statement if you

00:45:51,520 --> 00:45:55,040
want to use the composer two branch of

00:45:53,040 --> 00:45:56,640
something

00:45:55,040 --> 00:45:58,000
um here's my contact info i'll leave

00:45:56,640 --> 00:45:59,280
this up so if you have any questions i

00:45:58,000 --> 00:46:00,720
know we skipped a whole section so

00:45:59,280 --> 00:46:02,560
apologies for that

00:46:00,720 --> 00:46:04,000
you can ping me on drupal.org or on

00:46:02,560 --> 00:46:04,800
twitter or pretty much anywhere on

00:46:04,000 --> 00:46:06,720
ultimate

00:46:04,800 --> 00:46:08,240
ultimike i think we had one more

00:46:06,720 --> 00:46:09,920
question come in let me see if i can hit

00:46:08,240 --> 00:46:12,560
that

00:46:09,920 --> 00:46:12,560
um

00:46:13,200 --> 00:46:17,680
self-upgrade create compatibility issues

00:46:15,599 --> 00:46:20,880
and we need to

00:46:17,680 --> 00:46:24,000
uh downgrade so self-upgrade module

00:46:20,880 --> 00:46:25,920
i'm not sure what you're um

00:46:24,000 --> 00:46:27,520
and ravi shankar hopefully i'm saying

00:46:25,920 --> 00:46:30,160
your name right

00:46:27,520 --> 00:46:31,200
yeah and i'm not i'm i i absolutely

00:46:30,160 --> 00:46:34,880
believe that there are

00:46:31,200 --> 00:46:36,640
some cases out there that um

00:46:34,880 --> 00:46:37,920
uh some modules and some plug-ins out

00:46:36,640 --> 00:46:38,720
there that aren't yet compatible with

00:46:37,920 --> 00:46:41,119
composer 2.

00:46:38,720 --> 00:46:42,319
and all i can say is make sure there's

00:46:41,119 --> 00:46:44,480
an open issue

00:46:42,319 --> 00:46:45,359
either on github or on drupal.org about

00:46:44,480 --> 00:46:47,599
it

00:46:45,359 --> 00:46:49,440
um and the more people that comment on

00:46:47,599 --> 00:46:51,440
that issue and request it

00:46:49,440 --> 00:46:53,119
compatibility with composer 2 the faster

00:46:51,440 --> 00:46:56,240
it'll happen

00:46:53,119 --> 00:46:58,319
so all right with that i will

00:46:56,240 --> 00:47:00,720
take a deep breath i went one minute

00:46:58,319 --> 00:47:03,359
over sorry ricardo who is our

00:47:00,720 --> 00:47:03,760
moderator here thank you everybody for

00:47:03,359 --> 00:47:07,440
the

00:47:03,760 --> 00:47:08,319
um uh for the kind words on the slides

00:47:07,440 --> 00:47:09,680
are available

00:47:08,319 --> 00:47:11,040
if you want to go back and just review

00:47:09,680 --> 00:47:12,480
those slides if you're interested in

00:47:11,040 --> 00:47:15,440
that one section

00:47:12,480 --> 00:47:16,400
um again i i'm gonna try and be around

00:47:15,440 --> 00:47:18,000
um

00:47:16,400 --> 00:47:20,800
this week um otherwise you're always

00:47:18,000 --> 00:47:22,839
ping me on twitter or anywhere and um

00:47:20,800 --> 00:47:24,960
let me know oh very kind words wow

00:47:22,839 --> 00:47:27,359
fantastic

00:47:24,960 --> 00:47:29,520
thank you thank you thank you hopefully

00:47:27,359 --> 00:47:33,280
next year we will all be together

00:47:29,520 --> 00:47:34,079
in uh in europe i know my wife and i

00:47:33,280 --> 00:47:37,119
were very much

00:47:34,079 --> 00:47:38,240
uh very much looking forward to a little

00:47:37,119 --> 00:47:43,119
december trip

00:47:38,240 --> 00:47:43,119

YouTube URL: https://www.youtube.com/watch?v=OeIIDZ9yv-U


