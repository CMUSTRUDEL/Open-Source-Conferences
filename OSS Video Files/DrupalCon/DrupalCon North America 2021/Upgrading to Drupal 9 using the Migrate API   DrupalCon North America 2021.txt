Title: Upgrading to Drupal 9 using the Migrate API   DrupalCon North America 2021
Publication date: 2021-05-27
Playlist: DrupalCon North America 2021
Description: 
	Learn to use Migrate API to upgrade your Drupal 6/7 site to Drupal 8/9. Strategies, workflow, recommendations for upgrade will be presented
Captions: 
	00:00:05,279 --> 00:00:08,400
hello everyone thank you very much for

00:00:07,279 --> 00:00:11,120
joining us today

00:00:08,400 --> 00:00:11,440
this is upgrading to drupal 8 or 9 using

00:00:11,120 --> 00:00:13,920
my

00:00:11,440 --> 00:00:14,799
the migrate api my name is mauricio

00:00:13,920 --> 00:00:17,279
dinarde

00:00:14,799 --> 00:00:18,160
i go by dinnercon online and my pronouns

00:00:17,279 --> 00:00:21,199
are he

00:00:18,160 --> 00:00:23,439
him the slide the feedback forum

00:00:21,199 --> 00:00:26,000
some video and code examples that i'm

00:00:23,439 --> 00:00:29,679
going to present are already available

00:00:26,000 --> 00:00:32,960
you can find them in the in the chat uh

00:00:29,679 --> 00:00:35,200
so feel free to follow along that is my

00:00:32,960 --> 00:00:37,200
email address and my

00:00:35,200 --> 00:00:39,120
drupal.org profile and a personal

00:00:37,200 --> 00:00:41,840
website that i work on

00:00:39,120 --> 00:00:42,320
i am from nicaragua beautiful country

00:00:41,840 --> 00:00:45,440
known

00:00:42,320 --> 00:00:45,920
as the land of lakes and volcanoes and

00:00:45,440 --> 00:00:51,680
we

00:00:45,920 --> 00:00:54,320
mean that if you want to experience

00:00:51,680 --> 00:00:54,879
what it's like to almost touch lava you

00:00:54,320 --> 00:00:57,680
can come

00:00:54,879 --> 00:00:59,520
here and visit masaya volcano or go to

00:00:57,680 --> 00:01:02,239
that website and see

00:00:59,520 --> 00:01:03,359
some research that was done a few years

00:01:02,239 --> 00:01:06,080
ago

00:01:03,359 --> 00:01:07,840
i collaborate with the gothic we are a

00:01:06,080 --> 00:01:09,920
worker owner cooperative

00:01:07,840 --> 00:01:13,119
based in boston but we were distributed

00:01:09,920 --> 00:01:14,799
and i myself work from nicaragua

00:01:13,119 --> 00:01:16,400
and as i said before i am very

00:01:14,799 --> 00:01:19,560
passionate about

00:01:16,400 --> 00:01:20,720
teaching and i started this blog

00:01:19,560 --> 00:01:23,600
understanddrupal.com

00:01:20,720 --> 00:01:24,479
where i blog about migrations a lot

00:01:23,600 --> 00:01:26,479
lately but

00:01:24,479 --> 00:01:28,000
also site building concepts and i plan

00:01:26,479 --> 00:01:30,479
to include more topics

00:01:28,000 --> 00:01:31,840
ahead so if you speak either english

00:01:30,479 --> 00:01:33,600
spanish or french those are the

00:01:31,840 --> 00:01:38,479
languages that i have been

00:01:33,600 --> 00:01:38,479
producing content on feel free to visit

00:01:38,880 --> 00:01:44,079
today's session ex uh expects that you

00:01:42,000 --> 00:01:46,640
have a basic of understanding of

00:01:44,079 --> 00:01:47,439
the migrate system in drupal and if that

00:01:46,640 --> 00:01:49,759
is not the case

00:01:47,439 --> 00:01:51,040
don't worry there is in that website

00:01:49,759 --> 00:01:53,439
that i mentioned before

00:01:51,040 --> 00:01:54,479
a series of articles all 31 days of

00:01:53,439 --> 00:01:57,119
migrations

00:01:54,479 --> 00:01:58,399
where i teach you you know step by step

00:01:57,119 --> 00:02:00,640
one day at a time

00:01:58,399 --> 00:02:04,079
how to go from not knowing anything

00:02:00,640 --> 00:02:06,880
about the migraine api to be able to

00:02:04,079 --> 00:02:08,560
write different migrations from

00:02:06,880 --> 00:02:11,920
different sources from

00:02:08,560 --> 00:02:14,160
to create different entities and explain

00:02:11,920 --> 00:02:15,599
what tools are at your disposal so i

00:02:14,160 --> 00:02:18,000
invite you to check that out

00:02:15,599 --> 00:02:19,520
and also check the understand drupal

00:02:18,000 --> 00:02:23,440
migration course

00:02:19,520 --> 00:02:26,640
that is a three parts video course that

00:02:23,440 --> 00:02:29,360
goes way in depth into the migrate api

00:02:26,640 --> 00:02:30,879
so check that out if you have any

00:02:29,360 --> 00:02:33,920
questions during the sessions

00:02:30,879 --> 00:02:35,040
please use the q a tab make sure that

00:02:33,920 --> 00:02:38,400
you are in the session

00:02:35,040 --> 00:02:40,080
and then click q a and you can post your

00:02:38,400 --> 00:02:42,480
session your question there

00:02:40,080 --> 00:02:43,280
also i will be at pantheon's booth at 12

00:02:42,480 --> 00:02:45,120
30 pm

00:02:43,280 --> 00:02:47,599
about 30 minutes after the end of the

00:02:45,120 --> 00:02:49,280
session to continue the conversation if

00:02:47,599 --> 00:02:51,040
you know if you want to

00:02:49,280 --> 00:02:53,360
to talk more or if you have a specific

00:02:51,040 --> 00:02:56,800
question that cannot be covered today

00:02:53,360 --> 00:02:59,040
during the live presentation

00:02:56,800 --> 00:02:59,920
uh with all that said let's get started

00:02:59,040 --> 00:03:01,920
with the

00:02:59,920 --> 00:03:04,000
main content uh what we're going to be

00:03:01,920 --> 00:03:05,760
talking about today is the mitered api

00:03:04,000 --> 00:03:07,680
in drupal core which is an

00:03:05,760 --> 00:03:08,640
implementation of a design pattern

00:03:07,680 --> 00:03:11,760
called extract

00:03:08,640 --> 00:03:13,760
transform and load or etl if you have

00:03:11,760 --> 00:03:16,159
never heard of this before don't worry

00:03:13,760 --> 00:03:18,640
it is not a requirement

00:03:16,159 --> 00:03:19,840
to know about this but if you do it will

00:03:18,640 --> 00:03:21,840
help you a lot

00:03:19,840 --> 00:03:22,959
so there are different resources like

00:03:21,840 --> 00:03:25,760
the book on the left

00:03:22,959 --> 00:03:26,959
uh that is not drupal centric but talks

00:03:25,760 --> 00:03:30,400
about the

00:03:26,959 --> 00:03:32,400
the pattern in general and on the right

00:03:30,400 --> 00:03:34,480
that is the cover of the ebook version

00:03:32,400 --> 00:03:38,400
of the series that i mentioned before

00:03:34,480 --> 00:03:40,959
so from nothing to

00:03:38,400 --> 00:03:41,599
a lot of different examples including a

00:03:40,959 --> 00:03:45,280
basic

00:03:41,599 --> 00:03:47,200
introduction to the etl paradigm

00:03:45,280 --> 00:03:48,959
usually in this session i would do a

00:03:47,200 --> 00:03:51,760
demo recording but because of time

00:03:48,959 --> 00:03:54,159
constraints i'm just linking to a demo

00:03:51,760 --> 00:03:55,280
where i actually go a step by step into

00:03:54,159 --> 00:03:58,840
the process

00:03:55,280 --> 00:04:02,000
and instead of doing that i'm going to

00:03:58,840 --> 00:04:06,480
cover the theory the process

00:04:02,000 --> 00:04:09,120
uh via a presentation format instead of

00:04:06,480 --> 00:04:10,159
a demo but you can already go to that

00:04:09,120 --> 00:04:12,560
website and

00:04:10,159 --> 00:04:13,519
watch a video recording hopefully after

00:04:12,560 --> 00:04:15,280
this one is done

00:04:13,519 --> 00:04:17,680
and also the code repository is

00:04:15,280 --> 00:04:20,639
available there

00:04:17,680 --> 00:04:21,199
so let's talk about preparing for an

00:04:20,639 --> 00:04:23,120
operating

00:04:21,199 --> 00:04:24,720
let's say that you are in group 6 or in

00:04:23,120 --> 00:04:26,479
group 7 and you need to

00:04:24,720 --> 00:04:28,479
migrate your site to either drupal 8 or

00:04:26,479 --> 00:04:30,160
group online

00:04:28,479 --> 00:04:32,560
there are many things that you need to

00:04:30,160 --> 00:04:32,560
consider

00:04:32,720 --> 00:04:36,240
i would start by creating an inventory

00:04:34,880 --> 00:04:38,400
of the modules that you use

00:04:36,240 --> 00:04:40,639
in both your source and your destination

00:04:38,400 --> 00:04:43,040
sites throughout the

00:04:40,639 --> 00:04:44,240
presentation i'm going to use drupal 7

00:04:43,040 --> 00:04:47,360
and drupal 9

00:04:44,240 --> 00:04:50,000
but be aware that this applies as well

00:04:47,360 --> 00:04:51,919
if you are migrating from drupal 6 and

00:04:50,000 --> 00:04:54,320
if you are migrating into drupal 8

00:04:51,919 --> 00:04:55,759
but not to repeat myself over and over

00:04:54,320 --> 00:04:58,880
i'm going to be referring to

00:04:55,759 --> 00:05:01,520
seven and nine for the most part but

00:04:58,880 --> 00:05:04,320
everything that i say applies equally

00:05:01,520 --> 00:05:05,680
uh so once you have the inventory of the

00:05:04,320 --> 00:05:07,520
modules

00:05:05,680 --> 00:05:09,120
it is also important to understand the

00:05:07,520 --> 00:05:12,240
assumptions made by the

00:05:09,120 --> 00:05:13,440
migrate api be aware of known issues and

00:05:12,240 --> 00:05:15,919
limitations

00:05:13,440 --> 00:05:17,280
and know what is the scope of the system

00:05:15,919 --> 00:05:20,720
so we're going to go in

00:05:17,280 --> 00:05:24,320
in details for each of these topics

00:05:20,720 --> 00:05:25,759
for creating a source an inventory of

00:05:24,320 --> 00:05:26,400
the models that you have in your source

00:05:25,759 --> 00:05:28,960
site

00:05:26,400 --> 00:05:29,840
you can use the operating status module

00:05:28,960 --> 00:05:32,880
it can do

00:05:29,840 --> 00:05:34,880
way more than this just

00:05:32,880 --> 00:05:36,080
creating an inventory it actually has

00:05:34,880 --> 00:05:37,680
more functionality

00:05:36,080 --> 00:05:39,120
but to get started this is something

00:05:37,680 --> 00:05:41,360
that you can already use

00:05:39,120 --> 00:05:42,960
and this model is going to inspect

00:05:41,360 --> 00:05:44,800
everything that you have in your site in

00:05:42,960 --> 00:05:47,120
terms of modules enabled

00:05:44,800 --> 00:05:47,840
and it is going to determine if that

00:05:47,120 --> 00:05:50,160
module

00:05:47,840 --> 00:05:52,320
is available in in the target uh

00:05:50,160 --> 00:05:54,240
destination in this case uh

00:05:52,320 --> 00:05:55,759
it is configured the screenshot to show

00:05:54,240 --> 00:05:58,560
information about drupal 8

00:05:55,759 --> 00:06:00,240
but drupal 89 being so similar it is

00:05:58,560 --> 00:06:01,199
still a good reference as to what you

00:06:00,240 --> 00:06:02,800
can expect

00:06:01,199 --> 00:06:05,759
if you are migrating to drupal 9

00:06:02,800 --> 00:06:08,400
directly it is worth noting that

00:06:05,759 --> 00:06:10,479
there is no need to migrate into eight

00:06:08,400 --> 00:06:11,520
and then to nine you can jump directly

00:06:10,479 --> 00:06:14,880
from six to nine

00:06:11,520 --> 00:06:17,840
or from seven to nine uh but

00:06:14,880 --> 00:06:19,680
what you get from this module is that

00:06:17,840 --> 00:06:20,319
for example in drupal 7 there was a

00:06:19,680 --> 00:06:22,800
module called

00:06:20,319 --> 00:06:25,120
address field and that particular module

00:06:22,800 --> 00:06:25,919
doesn't have a release in drupal 9 at

00:06:25,120 --> 00:06:28,560
all

00:06:25,919 --> 00:06:29,840
so what they suggest is that there is a

00:06:28,560 --> 00:06:31,520
replacement module that

00:06:29,840 --> 00:06:33,520
you can use as an alternative called

00:06:31,520 --> 00:06:35,520
address so

00:06:33,520 --> 00:06:37,520
that's one thing that this module does

00:06:35,520 --> 00:06:39,199
another one is that it can structure if

00:06:37,520 --> 00:06:41,680
some of this functionality

00:06:39,199 --> 00:06:43,039
has been incorporated into drupal core

00:06:41,680 --> 00:06:45,280
and to what extent

00:06:43,039 --> 00:06:46,479
for example in the case of date some of

00:06:45,280 --> 00:06:49,039
the features

00:06:46,479 --> 00:06:50,639
were not ported into duple core and you

00:06:49,039 --> 00:06:52,560
still need either patches

00:06:50,639 --> 00:06:55,120
or contributed modules and you are going

00:06:52,560 --> 00:06:58,240
to get a reference to those as well

00:06:55,120 --> 00:07:00,720
in the case of the entity api everything

00:06:58,240 --> 00:07:01,759
um is already by core so you don't need

00:07:00,720 --> 00:07:04,080
to worry

00:07:01,759 --> 00:07:05,759
much about that one thing to point out

00:07:04,080 --> 00:07:07,520
that is very important about what

00:07:05,759 --> 00:07:08,319
information you get from overrated

00:07:07,520 --> 00:07:11,039
status

00:07:08,319 --> 00:07:13,120
is that this is about making sure that

00:07:11,039 --> 00:07:15,199
the modules are available

00:07:13,120 --> 00:07:16,960
it doesn't guarantee that there is an

00:07:15,199 --> 00:07:18,639
automated upgrade path and we're going

00:07:16,960 --> 00:07:19,919
to talk about that more during the

00:07:18,639 --> 00:07:21,680
session

00:07:19,919 --> 00:07:23,919
but this is just checking availability

00:07:21,680 --> 00:07:25,759
of modules not necessarily

00:07:23,919 --> 00:07:27,440
if something can be upgraded

00:07:25,759 --> 00:07:29,199
automatically

00:07:27,440 --> 00:07:31,360
when you have the inventory of your

00:07:29,199 --> 00:07:33,759
source site

00:07:31,360 --> 00:07:35,199
you need to understand the assumptions

00:07:33,759 --> 00:07:38,639
that the api makes

00:07:35,199 --> 00:07:40,639
for example drupal core both

00:07:38,639 --> 00:07:41,919
the source and the destination sites

00:07:40,639 --> 00:07:44,000
need to be updated

00:07:41,919 --> 00:07:45,680
to the latest version so if you're using

00:07:44,000 --> 00:07:47,360
six seven and eight

00:07:45,680 --> 00:07:48,879
they need to be in the latest version

00:07:47,360 --> 00:07:52,160
that was released for those

00:07:48,879 --> 00:07:54,639
uh environments also

00:07:52,160 --> 00:07:55,759
there should not be in your destination

00:07:54,639 --> 00:07:57,599
environment be

00:07:55,759 --> 00:07:59,680
through palladio drupal night any

00:07:57,599 --> 00:08:02,160
content or any configuration

00:07:59,680 --> 00:08:04,000
the expectation is that you install the

00:08:02,160 --> 00:08:06,560
minimal installation profile

00:08:04,000 --> 00:08:07,599
later on i'm going to explain what you

00:08:06,560 --> 00:08:09,759
can do about that

00:08:07,599 --> 00:08:12,160
if it is not possible for you to do this

00:08:09,759 --> 00:08:14,720
but that is what the minor api expects

00:08:12,160 --> 00:08:15,440
and the reason for this is because when

00:08:14,720 --> 00:08:18,160
you run the

00:08:15,440 --> 00:08:18,879
automatic upgrade procedure is going to

00:08:18,160 --> 00:08:21,759
try to

00:08:18,879 --> 00:08:22,560
move everything like make a one-to-one

00:08:21,759 --> 00:08:25,120
copy

00:08:22,560 --> 00:08:26,000
of your old site into the new one and if

00:08:25,120 --> 00:08:28,400
you have content

00:08:26,000 --> 00:08:30,080
that content might be overreading and if

00:08:28,400 --> 00:08:30,960
you have configuration like content

00:08:30,080 --> 00:08:33,760
types or fields

00:08:30,960 --> 00:08:35,919
those can also be overwritten so the

00:08:33,760 --> 00:08:38,000
recommendation if you go buy the book

00:08:35,919 --> 00:08:39,200
is to start with a minimal installation

00:08:38,000 --> 00:08:42,560
profile

00:08:39,200 --> 00:08:45,519
and let the mitered api run before

00:08:42,560 --> 00:08:46,560
entering any content or configuration

00:08:45,519 --> 00:08:50,000
manually

00:08:46,560 --> 00:08:52,160
another assumption is that for

00:08:50,000 --> 00:08:54,480
the automatic object path to be

00:08:52,160 --> 00:08:55,519
triggered you need to enable the modules

00:08:54,480 --> 00:08:59,120
on both sides

00:08:55,519 --> 00:09:01,440
for example if i want to migrate dates

00:08:59,120 --> 00:09:03,519
i need to have the date contributed

00:09:01,440 --> 00:09:06,320
module enabled in drupal 7

00:09:03,519 --> 00:09:07,200
and the date core module enabled in

00:09:06,320 --> 00:09:09,760
drupal

00:09:07,200 --> 00:09:10,880
9. if i were to have one of those

00:09:09,760 --> 00:09:13,839
disabled

00:09:10,880 --> 00:09:15,839
the automatic uh migration will not work

00:09:13,839 --> 00:09:18,480
so

00:09:15,839 --> 00:09:20,640
this is basically a way in which you can

00:09:18,480 --> 00:09:22,720
decide what features you want to migrate

00:09:20,640 --> 00:09:24,480
for example if you have forms in

00:09:22,720 --> 00:09:26,000
drupal 7 but you don't need that in

00:09:24,480 --> 00:09:28,240
drupal aaa in drupal 9

00:09:26,000 --> 00:09:30,880
you just disable that volume in drupal 9

00:09:28,240 --> 00:09:33,040
and that migration will not be executed

00:09:30,880 --> 00:09:34,000
but anything that you do want to migrate

00:09:33,040 --> 00:09:37,120
automatically

00:09:34,000 --> 00:09:37,839
needs to be enabled on both sides and in

00:09:37,120 --> 00:09:40,240
the case of

00:09:37,839 --> 00:09:41,360
address field and address uh you know

00:09:40,240 --> 00:09:44,800
even though it is not

00:09:41,360 --> 00:09:47,519
the same module like machine name

00:09:44,800 --> 00:09:48,160
it is still a a requirement that you

00:09:47,519 --> 00:09:50,959
enable

00:09:48,160 --> 00:09:52,880
both because the address in drupal 9 has

00:09:50,959 --> 00:09:54,160
the automatic output path for address

00:09:52,880 --> 00:09:55,920
field in drupal 7

00:09:54,160 --> 00:09:57,360
and there is going to be more

00:09:55,920 --> 00:10:00,720
information about this in a

00:09:57,360 --> 00:10:04,880
in a later slide now another thing to

00:10:00,720 --> 00:10:07,760
understand is the scope of the api

00:10:04,880 --> 00:10:09,920
the micro api is about moving content

00:10:07,760 --> 00:10:12,720
and configuration only

00:10:09,920 --> 00:10:14,880
this is not about upgrading your custom

00:10:12,720 --> 00:10:17,200
modules or your custom themes

00:10:14,880 --> 00:10:18,079
if you need to upgrade your custom

00:10:17,200 --> 00:10:20,000
modules

00:10:18,079 --> 00:10:22,720
you can use a combination of operator

00:10:20,000 --> 00:10:25,279
status and obvious rector

00:10:22,720 --> 00:10:26,240
to help you with the transition if you

00:10:25,279 --> 00:10:28,800
need to

00:10:26,240 --> 00:10:30,640
upgrade themes you basically need to

00:10:28,800 --> 00:10:33,680
create them from scratch

00:10:30,640 --> 00:10:35,279
so be aware that the migrated api is

00:10:33,680 --> 00:10:38,720
concerned about

00:10:35,279 --> 00:10:41,839
content and configuration

00:10:38,720 --> 00:10:44,880
so another thing is uh pay attention to

00:10:41,839 --> 00:10:47,839
known issues and limitations for example

00:10:44,880 --> 00:10:49,200
views do not offer an upgrade path you

00:10:47,839 --> 00:10:52,399
need to recreate them

00:10:49,200 --> 00:10:55,440
um they were determined that

00:10:52,399 --> 00:10:56,959
it was too difficult to provide an

00:10:55,440 --> 00:10:58,240
operating path for all the possible

00:10:56,959 --> 00:11:01,279
configuration for views

00:10:58,240 --> 00:11:03,120
so you know there is nothing there

00:11:01,279 --> 00:11:05,360
you basically need to create any view in

00:11:03,120 --> 00:11:07,279
your drupal 9 site again

00:11:05,360 --> 00:11:09,200
filter formats are not recognized

00:11:07,279 --> 00:11:11,120
recognized

00:11:09,200 --> 00:11:13,040
excuse me filter formats that are not

00:11:11,120 --> 00:11:15,360
recognized in the destination

00:11:13,040 --> 00:11:16,800
will return empty strings what this

00:11:15,360 --> 00:11:19,040
means is that if you have

00:11:16,800 --> 00:11:20,480
some filters in drupal 7 that are not

00:11:19,040 --> 00:11:22,480
available in drupal 9

00:11:20,480 --> 00:11:23,839
when you try to see the content you are

00:11:22,480 --> 00:11:27,200
basically going to see

00:11:23,839 --> 00:11:29,360
a blank field but the

00:11:27,200 --> 00:11:31,920
content itself is going to still be

00:11:29,360 --> 00:11:35,440
present in the database you just need to

00:11:31,920 --> 00:11:37,760
uh make sure that clean up the the

00:11:35,440 --> 00:11:40,079
text format configuration so that only

00:11:37,760 --> 00:11:43,440
valid filters are applied

00:11:40,079 --> 00:11:47,519
something that i have seen a lot uh is

00:11:43,440 --> 00:11:51,200
in drupal 6 or 2x7 side the php module

00:11:47,519 --> 00:11:53,360
was used heavily sometimes and that is

00:11:51,200 --> 00:11:56,000
absolutely not supported

00:11:53,360 --> 00:11:57,200
for security reasons and for practical

00:11:56,000 --> 00:11:59,680
reasons

00:11:57,200 --> 00:12:01,600
so if you have this module you cannot

00:11:59,680 --> 00:12:04,959
migrate that automatically

00:12:01,600 --> 00:12:07,760
and if you have content

00:12:04,959 --> 00:12:09,600
in drupal 8 or 9 already as i said

00:12:07,760 --> 00:12:12,800
before it can be overridden

00:12:09,600 --> 00:12:15,440
and in that case the relationships

00:12:12,800 --> 00:12:16,560
among entities might be lost for example

00:12:15,440 --> 00:12:19,680
you can have

00:12:16,560 --> 00:12:22,720
a node that was created by user one that

00:12:19,680 --> 00:12:26,079
has a file with id

00:12:22,720 --> 00:12:28,800
10 and so on if you if you

00:12:26,079 --> 00:12:30,320
after creating that content manually try

00:12:28,800 --> 00:12:32,000
to run a migration

00:12:30,320 --> 00:12:34,160
those elements might be might be

00:12:32,000 --> 00:12:37,200
overreading and the relationship with

00:12:34,160 --> 00:12:38,000
nodes with taxonomy terms with files

00:12:37,200 --> 00:12:40,959
with images

00:12:38,000 --> 00:12:42,320
with users and so on could be lost so be

00:12:40,959 --> 00:12:44,000
mindful about that

00:12:42,320 --> 00:12:46,000
there will be recommendations about what

00:12:44,000 --> 00:12:49,040
you can do about this later on

00:12:46,000 --> 00:12:52,079
but this is what the my api assumes

00:12:49,040 --> 00:12:56,399
and some of the limitations and

00:12:52,079 --> 00:12:58,399
advices that they provide now

00:12:56,399 --> 00:13:00,079
that being said let's talk about

00:12:58,399 --> 00:13:02,560
actually performing the outbreak

00:13:00,079 --> 00:13:04,880
procedure how do you do that

00:13:02,560 --> 00:13:06,560
there are two ways that you can do it

00:13:04,880 --> 00:13:08,000
and it is up to you you can choose your

00:13:06,560 --> 00:13:09,600
own adventure

00:13:08,000 --> 00:13:11,920
one way is to do it from the user

00:13:09,600 --> 00:13:13,279
interface the other way is to do it from

00:13:11,920 --> 00:13:17,600
the command line

00:13:13,279 --> 00:13:20,000
so if you go by the user interface route

00:13:17,600 --> 00:13:21,839
that means that it works out of the box

00:13:20,000 --> 00:13:22,720
you don't need any contributed modules

00:13:21,839 --> 00:13:26,399
for this to

00:13:22,720 --> 00:13:27,519
to happen but this process is not

00:13:26,399 --> 00:13:29,839
customizable

00:13:27,519 --> 00:13:31,040
and what you get is a one-to-one copy of

00:13:29,839 --> 00:13:33,920
the legacy site

00:13:31,040 --> 00:13:35,120
so you literally get as much as drupal

00:13:33,920 --> 00:13:38,079
can do

00:13:35,120 --> 00:13:39,360
a verbatin copy of the previous site

00:13:38,079 --> 00:13:41,199
most of the time

00:13:39,360 --> 00:13:42,399
at least in the projects that i have

00:13:41,199 --> 00:13:45,279
been involved

00:13:42,399 --> 00:13:47,040
with there is a need to change something

00:13:45,279 --> 00:13:48,000
like the content model changes you want

00:13:47,040 --> 00:13:49,920
to take advantages

00:13:48,000 --> 00:13:52,079
of new modules that were not available

00:13:49,920 --> 00:13:54,240
before or

00:13:52,079 --> 00:13:56,399
just best practices and recommendations

00:13:54,240 --> 00:13:58,880
in terms of site building

00:13:56,399 --> 00:14:00,320
so for them you know in those cases you

00:13:58,880 --> 00:14:02,880
might want to

00:14:00,320 --> 00:14:03,440
customize the migration and if that is

00:14:02,880 --> 00:14:04,959
the case

00:14:03,440 --> 00:14:07,360
you are pretty much forced to use the

00:14:04,959 --> 00:14:10,079
command line approach um

00:14:07,360 --> 00:14:11,120
in that case you require drugs and a set

00:14:10,079 --> 00:14:14,720
of contributed

00:14:11,120 --> 00:14:15,199
uh projects and the benefit is that you

00:14:14,720 --> 00:14:18,320
can

00:14:15,199 --> 00:14:20,639
do as in you know many changes as needed

00:14:18,320 --> 00:14:22,399
we're going to see both of them so if

00:14:20,639 --> 00:14:24,320
you want to upgrade via the user

00:14:22,399 --> 00:14:25,279
interface as i said before you install

00:14:24,320 --> 00:14:27,519
drupal 9

00:14:25,279 --> 00:14:29,040
using the minimal installation profile

00:14:27,519 --> 00:14:32,000
you enable migrate

00:14:29,040 --> 00:14:34,160
migrate drupal and migrate drupal ui so

00:14:32,000 --> 00:14:37,360
migrate is the core of the api

00:14:34,160 --> 00:14:41,839
migrate drupal is a test of is a set of

00:14:37,360 --> 00:14:44,079
uh of

00:14:41,839 --> 00:14:46,480
code that will allow you to do a

00:14:44,079 --> 00:14:47,760
migration specifically from drupal 6 or

00:14:46,480 --> 00:14:50,399
drupal 7

00:14:47,760 --> 00:14:52,639
and that is just the code on top of that

00:14:50,399 --> 00:14:53,279
code you can enable a user interface and

00:14:52,639 --> 00:14:55,839
that is the

00:14:53,279 --> 00:14:57,920
migrate drupal ui module once you have

00:14:55,839 --> 00:15:01,120
these three modules enabled

00:14:57,920 --> 00:15:03,279
you go as i said before enabling the

00:15:01,120 --> 00:15:06,399
modules that you want to migrate

00:15:03,279 --> 00:15:09,199
automatically and then you go to your

00:15:06,399 --> 00:15:11,519
your domain.com upgrade and you will be

00:15:09,199 --> 00:15:13,120
presented with a wizard

00:15:11,519 --> 00:15:15,279
in that wizard one of the things that

00:15:13,120 --> 00:15:16,880
you are required to enter are the

00:15:15,279 --> 00:15:18,880
database credentials

00:15:16,880 --> 00:15:20,079
and the files location so it is

00:15:18,880 --> 00:15:22,639
important that

00:15:20,079 --> 00:15:23,920
your drupal 9 site is able to connect to

00:15:22,639 --> 00:15:26,959
the database

00:15:23,920 --> 00:15:30,720
of the drupal 7 site and

00:15:26,959 --> 00:15:31,839
also if you only need to migrate public

00:15:30,720 --> 00:15:34,560
files you can

00:15:31,839 --> 00:15:36,480
use you know a domain and the media api

00:15:34,560 --> 00:15:38,639
is just going to get the file from there

00:15:36,480 --> 00:15:40,399
but if you want to migrate private files

00:15:38,639 --> 00:15:44,240
you can specify

00:15:40,399 --> 00:15:46,959
um a location in the same server

00:15:44,240 --> 00:15:49,120
where those files live like in that case

00:15:46,959 --> 00:15:49,839
the drupal 9 and the drupal 7 site needs

00:15:49,120 --> 00:15:51,680
to be

00:15:49,839 --> 00:15:54,240
located in the same server or you

00:15:51,680 --> 00:15:56,399
manually move the the files from one

00:15:54,240 --> 00:15:57,199
server to another but the reference will

00:15:56,399 --> 00:15:59,440
be instead of

00:15:57,199 --> 00:16:00,959
being a fully qualified domain name it's

00:15:59,440 --> 00:16:04,240
just going to be a path

00:16:00,959 --> 00:16:05,600
in the in the same machine after you

00:16:04,240 --> 00:16:07,839
enter the credentials

00:16:05,600 --> 00:16:09,360
this is the review process that i

00:16:07,839 --> 00:16:11,519
mentioned before that

00:16:09,360 --> 00:16:12,480
drupal is going to check what modules

00:16:11,519 --> 00:16:14,240
you have enabled

00:16:12,480 --> 00:16:16,320
and it is going to tell you what is

00:16:14,240 --> 00:16:17,440
possible to do automatically in this

00:16:16,320 --> 00:16:18,959
case it says

00:16:17,440 --> 00:16:21,120
11 modules cannot be upgraded

00:16:18,959 --> 00:16:24,000
automatically 34 can

00:16:21,120 --> 00:16:24,959
so let's stop for a moment and try to

00:16:24,000 --> 00:16:28,000
make sense of

00:16:24,959 --> 00:16:29,600
of what we see here for one we see that

00:16:28,000 --> 00:16:32,240
telephone

00:16:29,600 --> 00:16:33,680
is is part of the list of models that

00:16:32,240 --> 00:16:36,160
cannot be upgraded

00:16:33,680 --> 00:16:37,040
why because in when i took this

00:16:36,160 --> 00:16:39,680
screenshot

00:16:37,040 --> 00:16:42,720
the telephone module was disabled in 0.9

00:16:39,680 --> 00:16:44,399
so if i were to enable the module

00:16:42,720 --> 00:16:46,480
that field is going to be migrated

00:16:44,399 --> 00:16:47,839
automatically let's say that i don't

00:16:46,480 --> 00:16:50,639
care to move over

00:16:47,839 --> 00:16:50,959
any telephone from my old system i just

00:16:50,639 --> 00:16:53,680
leave

00:16:50,959 --> 00:16:55,199
that module disabled and that part of

00:16:53,680 --> 00:16:56,480
the migration is not going to be

00:16:55,199 --> 00:16:59,680
executed

00:16:56,480 --> 00:17:02,320
another thing to notice is the address

00:16:59,680 --> 00:17:04,160
field notice that in drupal 7 we have

00:17:02,320 --> 00:17:06,880
address field and

00:17:04,160 --> 00:17:09,199
in drupal 9 it's just called address and

00:17:06,880 --> 00:17:12,640
even though it appears in the list of

00:17:09,199 --> 00:17:13,039
not upgradable the the api is actually

00:17:12,640 --> 00:17:15,520
be

00:17:13,039 --> 00:17:17,679
will be able to perform the output

00:17:15,520 --> 00:17:19,919
similarly you see the views

00:17:17,679 --> 00:17:22,319
the app is not operatable and we

00:17:19,919 --> 00:17:24,959
discussed that already

00:17:22,319 --> 00:17:26,720
so you need to take this list with a

00:17:24,959 --> 00:17:27,600
grain of salt for the most but it is

00:17:26,720 --> 00:17:30,400
very accurate

00:17:27,600 --> 00:17:32,400
but there are some cases where something

00:17:30,400 --> 00:17:35,840
appears as not being able to

00:17:32,400 --> 00:17:37,039
be upgraded but it is sometimes uh it is

00:17:35,840 --> 00:17:40,240
the other way around

00:17:37,039 --> 00:17:41,440
so at least you need to to think about

00:17:40,240 --> 00:17:44,400
what you are seeing

00:17:41,440 --> 00:17:46,400
and try to understand if there is any

00:17:44,400 --> 00:17:48,799
model that you need to enable either on

00:17:46,400 --> 00:17:50,799
in the source or the destination for the

00:17:48,799 --> 00:17:53,679
automatic path

00:17:50,799 --> 00:17:55,200
automatic upgrade path to to happen

00:17:53,679 --> 00:17:57,039
another thing that i want to point out

00:17:55,200 --> 00:17:59,039
is that

00:17:57,039 --> 00:18:00,160
you can see in the list of modules that

00:17:59,039 --> 00:18:04,080
can be upgraded

00:18:00,160 --> 00:18:06,799
block in drupal 7 appears just as one

00:18:04,080 --> 00:18:08,799
listing block and in drupal 9 it appears

00:18:06,799 --> 00:18:09,760
as block and custom block it is actually

00:18:08,799 --> 00:18:12,400
two modules

00:18:09,760 --> 00:18:13,200
so you need two modules enabling drupal

00:18:12,400 --> 00:18:16,160
00:18:13,200 --> 00:18:18,320
to be able to market blocks and

00:18:16,160 --> 00:18:20,559
sometimes these things are not intuitive

00:18:18,320 --> 00:18:22,080
sometimes learning what modules to

00:18:20,559 --> 00:18:24,240
enable comes from practice

00:18:22,080 --> 00:18:25,360
and error or by attending session like

00:18:24,240 --> 00:18:27,520
this where you get the

00:18:25,360 --> 00:18:29,520
you know the introduction or the the

00:18:27,520 --> 00:18:32,640
case of what you need to do

00:18:29,520 --> 00:18:33,200
but as i said before at the very least

00:18:32,640 --> 00:18:35,280
you should

00:18:33,200 --> 00:18:37,120
pay attention and think about what you

00:18:35,280 --> 00:18:39,280
see on the screen

00:18:37,120 --> 00:18:40,160
and why some elements appear in the

00:18:39,280 --> 00:18:42,720
non-variable

00:18:40,160 --> 00:18:43,600
and in the upgradable list after you do

00:18:42,720 --> 00:18:46,559
this

00:18:43,600 --> 00:18:48,480
um you're going to you know start the

00:18:46,559 --> 00:18:50,559
the process of upgrading

00:18:48,480 --> 00:18:52,960
you will be seeing a lot of messages

00:18:50,559 --> 00:18:55,039
that you know something doesn't work

00:18:52,960 --> 00:18:56,160
those messages are actually locked to

00:18:55,039 --> 00:18:59,360
the database

00:18:56,160 --> 00:19:00,000
so you can go to the report section and

00:18:59,360 --> 00:19:02,559
go back

00:19:00,000 --> 00:19:03,280
and see what happened if something

00:19:02,559 --> 00:19:06,160
failed

00:19:03,280 --> 00:19:06,960
for the most part uh you know i have

00:19:06,160 --> 00:19:09,200
tested in

00:19:06,960 --> 00:19:10,160
relatively simple sites and it works

00:19:09,200 --> 00:19:11,919
really good

00:19:10,160 --> 00:19:13,200
but as you can see you know there are

00:19:11,919 --> 00:19:16,160
some broken blocks

00:19:13,200 --> 00:19:17,679
the the ui is not necessarily pretty

00:19:16,160 --> 00:19:20,880
because we're using

00:19:17,679 --> 00:19:22,320
a pretty plain theme by default remember

00:19:20,880 --> 00:19:24,640
that we installed using

00:19:22,320 --> 00:19:26,160
the minimal installation profile so what

00:19:24,640 --> 00:19:27,679
you do after the fact

00:19:26,160 --> 00:19:29,840
you change the theme to make the

00:19:27,679 --> 00:19:31,440
navigation you know easier

00:19:29,840 --> 00:19:33,520
you review the logs you review the

00:19:31,440 --> 00:19:35,120
content you review the configuration

00:19:33,520 --> 00:19:36,799
and if this is the first time that you

00:19:35,120 --> 00:19:38,559
do a migration

00:19:36,799 --> 00:19:39,919
it is very likely that something will be

00:19:38,559 --> 00:19:42,240
missing so you basically

00:19:39,919 --> 00:19:43,520
reinstall everything try again and

00:19:42,240 --> 00:19:45,919
enable

00:19:43,520 --> 00:19:47,760
uh more modules after all of that you

00:19:45,919 --> 00:19:50,840
profit from your work

00:19:47,760 --> 00:19:53,840
and that's basically the user interface

00:19:50,840 --> 00:19:57,360
migration

00:19:53,840 --> 00:20:00,160
the command line what you need to do

00:19:57,360 --> 00:20:02,000
before anything else is verify the

00:20:00,160 --> 00:20:02,480
compatibility of the modules that you

00:20:02,000 --> 00:20:05,120
use

00:20:02,480 --> 00:20:06,480
at the time of this presentation the

00:20:05,120 --> 00:20:09,200
latest version of drought

00:20:06,480 --> 00:20:11,039
temporary four is not compatible with

00:20:09,200 --> 00:20:13,760
the latest version of migrate tools

00:20:11,039 --> 00:20:15,200
5.0 so you actually need to install an

00:20:13,760 --> 00:20:18,480
older version of droish

00:20:15,200 --> 00:20:21,360
to be able to perform this migration uh

00:20:18,480 --> 00:20:22,320
as of you know this week uh there are

00:20:21,360 --> 00:20:26,000
people working

00:20:22,320 --> 00:20:26,880
on making this uh tool set compatibles

00:20:26,000 --> 00:20:28,880
again

00:20:26,880 --> 00:20:30,960
but as of today that is what you need to

00:20:28,880 --> 00:20:33,120
do specifically those versions

00:20:30,960 --> 00:20:34,159
you need to install once you install

00:20:33,120 --> 00:20:35,760
those version you know

00:20:34,159 --> 00:20:38,159
the the start of the process is very

00:20:35,760 --> 00:20:40,000
similar you install drupal using the

00:20:38,159 --> 00:20:41,840
minimal installation profile

00:20:40,000 --> 00:20:44,000
in this case you need to install migrate

00:20:41,840 --> 00:20:46,720
migrate dupl migrate plus

00:20:44,000 --> 00:20:48,640
migrate tools and miter upgrade and

00:20:46,720 --> 00:20:49,520
similarly enable the modules that you

00:20:48,640 --> 00:20:52,640
need on both

00:20:49,520 --> 00:20:55,200
sides then uh

00:20:52,640 --> 00:20:57,280
this is where things start to divert you

00:20:55,200 --> 00:20:59,760
need to go to settings.php

00:20:57,280 --> 00:21:00,400
or any file that might be loaded from

00:20:59,760 --> 00:21:02,400
this one

00:21:00,400 --> 00:21:03,520
like settings.local settings.local.php

00:21:02,400 --> 00:21:05,280
something like that

00:21:03,520 --> 00:21:06,559
and you need to enter the database

00:21:05,280 --> 00:21:10,640
credentials

00:21:06,559 --> 00:21:12,720
uh for your drupal 7 site

00:21:10,640 --> 00:21:13,760
before you would do this in the user

00:21:12,720 --> 00:21:16,000
interface

00:21:13,760 --> 00:21:17,280
in with this approach you actually have

00:21:16,000 --> 00:21:20,480
to do it in the

00:21:17,280 --> 00:21:23,440
at that at the code level in sims.php

00:21:20,480 --> 00:21:24,400
i want to point out the database

00:21:23,440 --> 00:21:26,640
connection key

00:21:24,400 --> 00:21:28,840
is legacy this is something that we're

00:21:26,640 --> 00:21:30,400
going to use in a moment so remember

00:21:28,840 --> 00:21:32,720
that

00:21:30,400 --> 00:21:34,640
after you do this you execute the

00:21:32,720 --> 00:21:37,280
migrate upgrade command and

00:21:34,640 --> 00:21:38,960
that legacy key that we saw before that

00:21:37,280 --> 00:21:44,000
is what we need to enter in the

00:21:38,960 --> 00:21:47,200
legacy db key argument for the

00:21:44,000 --> 00:21:50,080
for the command the legacy route can be

00:21:47,200 --> 00:21:52,080
uh either a path to where the file sleep

00:21:50,080 --> 00:21:54,080
or a fully qualified domain name

00:21:52,080 --> 00:21:56,000
that is the equivalent of indicating

00:21:54,080 --> 00:21:59,120
where the files are going to live

00:21:56,000 --> 00:22:00,400
and the important part here to enable

00:21:59,120 --> 00:22:03,039
a lot of the things that we're going to

00:22:00,400 --> 00:22:05,200
talk in a moment is pass the configure

00:22:03,039 --> 00:22:06,159
only flag if you don't pass this last

00:22:05,200 --> 00:22:08,799
flag

00:22:06,159 --> 00:22:10,960
the result of executing this command

00:22:08,799 --> 00:22:12,159
will be exactly the same as executing

00:22:10,960 --> 00:22:14,720
the migration via

00:22:12,159 --> 00:22:15,679
the user interface so by passing this

00:22:14,720 --> 00:22:19,039
command

00:22:15,679 --> 00:22:21,200
we get the benefit of being able to uh

00:22:19,039 --> 00:22:22,799
customize the migration to our specific

00:22:21,200 --> 00:22:24,720
needs

00:22:22,799 --> 00:22:26,480
so what what happens when you run that

00:22:24,720 --> 00:22:27,760
command a lot of migrations are

00:22:26,480 --> 00:22:30,559
generated for you

00:22:27,760 --> 00:22:32,320
but where are they they live in drupal's

00:22:30,559 --> 00:22:35,280
active configuration

00:22:32,320 --> 00:22:36,880
which by default is a database so how do

00:22:35,280 --> 00:22:38,400
you get those files if you need to make

00:22:36,880 --> 00:22:40,960
any modifications

00:22:38,400 --> 00:22:41,760
you need to export the configuration so

00:22:40,960 --> 00:22:44,320
you do that

00:22:41,760 --> 00:22:45,679
for example using rush with the config

00:22:44,320 --> 00:22:48,480
export command

00:22:45,679 --> 00:22:50,080
and it will go along with the rest of

00:22:48,480 --> 00:22:52,799
your configuration this is a

00:22:50,080 --> 00:22:55,520
trim down version of the folder but you

00:22:52,799 --> 00:22:58,320
can see that quarter.extension.yml

00:22:55,520 --> 00:23:00,480
inside confidencing is there and all of

00:22:58,320 --> 00:23:00,480
the

00:23:00,760 --> 00:23:04,799
migrateplus.migration.something else

00:23:02,320 --> 00:23:06,720
that was generated automatically so this

00:23:04,799 --> 00:23:09,600
is how you actually get a hold

00:23:06,720 --> 00:23:11,679
of the files so that you can modify them

00:23:09,600 --> 00:23:13,280
later

00:23:11,679 --> 00:23:15,200
what can you do when you have those

00:23:13,280 --> 00:23:15,840
migrations generated you can run all of

00:23:15,200 --> 00:23:19,039
them

00:23:15,840 --> 00:23:19,679
using a group configuration or some only

00:23:19,039 --> 00:23:22,000
the

00:23:19,679 --> 00:23:24,640
configuration migrations with attack or

00:23:22,000 --> 00:23:26,240
only the content migrations with attack

00:23:24,640 --> 00:23:28,159
but that is not that useful that is

00:23:26,240 --> 00:23:32,400
basically going back to

00:23:28,159 --> 00:23:35,039
the equivalent of a ui

00:23:32,400 --> 00:23:36,320
migration process so what we're going to

00:23:35,039 --> 00:23:39,679
do instead is

00:23:36,320 --> 00:23:42,000
from that uh exported version

00:23:39,679 --> 00:23:44,559
we're going to cherry pick only the

00:23:42,000 --> 00:23:48,000
migrations that we care about

00:23:44,559 --> 00:23:51,520
in this case i have a subset of nodes

00:23:48,000 --> 00:23:54,400
files users taxonomic terms so

00:23:51,520 --> 00:23:56,080
you know you can get 40 plus migrations

00:23:54,400 --> 00:23:58,080
automatically and you

00:23:56,080 --> 00:24:00,320
surely pick 10 of them that are the ones

00:23:58,080 --> 00:24:02,320
that you really care about

00:24:00,320 --> 00:24:04,240
and you create a custom module and in

00:24:02,320 --> 00:24:06,480
that custom module you create a config

00:24:04,240 --> 00:24:07,440
install directory and you place the

00:24:06,480 --> 00:24:11,840
files there

00:24:07,440 --> 00:24:13,919
so uh this is for one using migrate loss

00:24:11,840 --> 00:24:15,360
two it is managing the migrations as

00:24:13,919 --> 00:24:17,840
configuration entity

00:24:15,360 --> 00:24:19,600
and three this is using the

00:24:17,840 --> 00:24:21,840
configuration management system

00:24:19,600 --> 00:24:23,520
under the hood so anything that you

00:24:21,840 --> 00:24:25,440
would do for cmi

00:24:23,520 --> 00:24:27,760
you can do with these migrations like

00:24:25,440 --> 00:24:30,240
conf config import partial

00:24:27,760 --> 00:24:31,840
config sync config devel and so many

00:24:30,240 --> 00:24:33,840
other modules that integrate with the

00:24:31,840 --> 00:24:36,799
configuration management system

00:24:33,840 --> 00:24:37,520
you can use here so you know once you

00:24:36,799 --> 00:24:39,919
have

00:24:37,520 --> 00:24:41,279
those files you can modify them to your

00:24:39,919 --> 00:24:43,200
needs for example

00:24:41,279 --> 00:24:45,039
in this case i am changing the data

00:24:43,200 --> 00:24:47,679
model from a

00:24:45,039 --> 00:24:49,039
node into paragraph so i am converting

00:24:47,679 --> 00:24:51,840
nodes to paragraph

00:24:49,039 --> 00:24:53,760
uh in number one uh you can see that by

00:24:51,840 --> 00:24:55,840
source is actually notes

00:24:53,760 --> 00:24:56,799
ma in number two that is the field

00:24:55,840 --> 00:25:00,080
mapping of

00:24:56,799 --> 00:25:01,760
uh whatever is available in the

00:25:00,080 --> 00:25:04,480
in the paragraph itself like what fields

00:25:01,760 --> 00:25:06,320
were added and in number three you see

00:25:04,480 --> 00:25:06,880
the destination how it is configured you

00:25:06,320 --> 00:25:08,799
need to use

00:25:06,880 --> 00:25:10,799
entity reference revisions column

00:25:08,799 --> 00:25:12,400
paragraph and in a default bundle you

00:25:10,799 --> 00:25:14,559
specify the paragraph type

00:25:12,400 --> 00:25:16,080
and this is a very simple example of how

00:25:14,559 --> 00:25:19,200
you can go from nodes

00:25:16,080 --> 00:25:20,159
to paragraph but basically you can make

00:25:19,200 --> 00:25:24,159
that change

00:25:20,159 --> 00:25:27,120
you know as needed if you don't need

00:25:24,159 --> 00:25:29,200
uh revisions or translations you can use

00:25:27,120 --> 00:25:33,039
the classic migration approach

00:25:29,200 --> 00:25:35,440
uh for that you need to

00:25:33,039 --> 00:25:37,440
provide the migrate node migrate type

00:25:35,440 --> 00:25:40,320
classic equals true

00:25:37,440 --> 00:25:41,120
configuration setting in the setting.php

00:25:40,320 --> 00:25:43,039
file

00:25:41,120 --> 00:25:45,039
with that you change the source plugin

00:25:43,039 --> 00:25:47,520
to d7 underscore node

00:25:45,039 --> 00:25:48,960
and in this case you will not get

00:25:47,520 --> 00:25:52,880
neither revisions nor

00:25:48,960 --> 00:25:54,000
translations so some general tips and

00:25:52,880 --> 00:25:57,520
recommendations

00:25:54,000 --> 00:25:59,200
for working with upgrade projects

00:25:57,520 --> 00:26:00,400
if there is one thing that i would like

00:25:59,200 --> 00:26:02,320
you to remember from this whole

00:26:00,400 --> 00:26:02,960
presentation is this quote from leah

00:26:02,320 --> 00:26:05,760
bureau

00:26:02,960 --> 00:26:07,200
author of css secrets understand

00:26:05,760 --> 00:26:09,520
understanding the process of

00:26:07,200 --> 00:26:11,279
finding a solution is far more valuable

00:26:09,520 --> 00:26:14,000
than the solution itself

00:26:11,279 --> 00:26:15,520
something that i have seen uh while

00:26:14,000 --> 00:26:18,400
providing support for the

00:26:15,520 --> 00:26:20,240
migrant api is that people look for

00:26:18,400 --> 00:26:21,440
something specific but sometimes they

00:26:20,240 --> 00:26:23,200
don't take the time

00:26:21,440 --> 00:26:25,120
to understand the building blocks you

00:26:23,200 --> 00:26:27,360
know the mirror api is

00:26:25,120 --> 00:26:28,720
just like drupal in the sense that you

00:26:27,360 --> 00:26:30,640
get a lot of blocks

00:26:28,720 --> 00:26:33,120
that you can assemble to your specific

00:26:30,640 --> 00:26:35,919
needs so taking the time

00:26:33,120 --> 00:26:37,760
to understand how the micro api works

00:26:35,919 --> 00:26:40,480
outside of the context of

00:26:37,760 --> 00:26:42,320
an upgrade is going to help you a lot

00:26:40,480 --> 00:26:44,400
when you actually

00:26:42,320 --> 00:26:45,919
are in the process of writing an upgrade

00:26:44,400 --> 00:26:48,159
procedure

00:26:45,919 --> 00:26:49,200
so with that some other recommendations

00:26:48,159 --> 00:26:51,120
it is important

00:26:49,200 --> 00:26:54,000
to understand the difference between

00:26:51,120 --> 00:26:55,760
content and configuration entities

00:26:54,000 --> 00:26:57,840
it is important that for content

00:26:55,760 --> 00:26:59,039
entities you are familiar with the

00:26:57,840 --> 00:27:01,440
entity properties

00:26:59,039 --> 00:27:03,440
also called base field definitions

00:27:01,440 --> 00:27:06,559
whether these are field doubles or not

00:27:03,440 --> 00:27:08,080
whether they have bundles or not it is

00:27:06,559 --> 00:27:10,400
also important to understand the

00:27:08,080 --> 00:27:12,480
relationship among different entities

00:27:10,400 --> 00:27:14,080
for example how nodes connect to users

00:27:12,480 --> 00:27:16,720
taxonomic terms files

00:27:14,080 --> 00:27:17,520
paragraph and so on why this is

00:27:16,720 --> 00:27:19,840
important

00:27:17,520 --> 00:27:20,880
because let's say that between the node

00:27:19,840 --> 00:27:24,159
and the file

00:27:20,880 --> 00:27:25,919
we want to use media entities so if you

00:27:24,159 --> 00:27:28,320
understand the relationship you know

00:27:25,919 --> 00:27:30,320
that you need to connect from nodes

00:27:28,320 --> 00:27:31,679
to a media entity and the immediate

00:27:30,320 --> 00:27:34,880
entity from file

00:27:31,679 --> 00:27:36,960
so this is not necessarily about uh

00:27:34,880 --> 00:27:38,880
the merit api itself it's just

00:27:36,960 --> 00:27:39,440
understanding how drupal works as a

00:27:38,880 --> 00:27:42,240
whole

00:27:39,440 --> 00:27:42,640
and how the entity system connects uh

00:27:42,240 --> 00:27:45,760
with

00:27:42,640 --> 00:27:48,720
you know from one entity to another

00:27:45,760 --> 00:27:49,840
another recommendation measure tries and

00:27:48,720 --> 00:27:52,960
cut once

00:27:49,840 --> 00:27:53,440
and by this i mean sometimes you're

00:27:52,960 --> 00:27:56,799
going to

00:27:53,440 --> 00:28:00,480
spend a lot more time just researching

00:27:56,799 --> 00:28:03,440
the content model how the data is stored

00:28:00,480 --> 00:28:06,159
in drupal 7 and in drupal

00:28:03,440 --> 00:28:06,960
9 and the actual process of writing a

00:28:06,159 --> 00:28:10,240
migration is

00:28:06,960 --> 00:28:13,279
relatively you know short in

00:28:10,240 --> 00:28:14,559
so be aware of how the minded api works

00:28:13,279 --> 00:28:16,799
that you have that series at your

00:28:14,559 --> 00:28:17,520
disposal that you can read for free

00:28:16,799 --> 00:28:20,320
online

00:28:17,520 --> 00:28:20,799
in the understand group.com website uh

00:28:20,320 --> 00:28:22,720
know

00:28:20,799 --> 00:28:24,559
you know how the modules store the data

00:28:22,720 --> 00:28:27,039
across multiple tables and

00:28:24,559 --> 00:28:28,799
columns and if needed if you need

00:28:27,039 --> 00:28:31,840
revisions and translation

00:28:28,799 --> 00:28:34,320
pay a special attention to that uh

00:28:31,840 --> 00:28:36,159
create custom plugins as needed source

00:28:34,320 --> 00:28:39,760
and process plugins are the most common

00:28:36,159 --> 00:28:42,720
that you will be creating yourself

00:28:39,760 --> 00:28:45,039
uh also as i said before you know it is

00:28:42,720 --> 00:28:47,919
not always possible to go by the book

00:28:45,039 --> 00:28:48,720
so if you need to debate by the norm you

00:28:47,919 --> 00:28:50,799
can do it

00:28:48,720 --> 00:28:52,720
i actually have had to do this many

00:28:50,799 --> 00:28:54,640
times in different projects

00:28:52,720 --> 00:28:56,000
and for example things that you need to

00:28:54,640 --> 00:28:58,480
be very careful is

00:28:56,000 --> 00:29:00,880
entities ids if you are going to be

00:28:58,480 --> 00:29:03,039
creating content or configuration

00:29:00,880 --> 00:29:04,880
while working on the migration you need

00:29:03,039 --> 00:29:05,679
to be very mindful of the entities like

00:29:04,880 --> 00:29:08,240
this

00:29:05,679 --> 00:29:10,399
uh you also need to be very mindful that

00:29:08,240 --> 00:29:12,399
the development of new functionality

00:29:10,399 --> 00:29:14,399
doesn't break existing migrations you

00:29:12,399 --> 00:29:15,200
can do that by having an automatic test

00:29:14,399 --> 00:29:17,120
suite

00:29:15,200 --> 00:29:19,520
or just by running those migrations

00:29:17,120 --> 00:29:23,120
automatically or as part of a ci

00:29:19,520 --> 00:29:24,799
process and um you know the mighty api

00:29:23,120 --> 00:29:26,000
can read from multiple sources take

00:29:24,799 --> 00:29:28,960
advantage of that

00:29:26,000 --> 00:29:29,840
in a recent project i read from drupal 6

00:29:28,960 --> 00:29:32,960
from drupal 9

00:29:29,840 --> 00:29:34,720
and from csv file in you know to to

00:29:32,960 --> 00:29:36,720
produce the final result

00:29:34,720 --> 00:29:38,320
so this was a drupal 9 migration and we

00:29:36,720 --> 00:29:40,159
had a drupal 9

00:29:38,320 --> 00:29:43,200
content entry environment that we were

00:29:40,159 --> 00:29:45,600
using to read data from

00:29:43,200 --> 00:29:47,679
some more general tips start from an

00:29:45,600 --> 00:29:50,559
existing migration look for an example

00:29:47,679 --> 00:29:52,640
online that works and start from there

00:29:50,559 --> 00:29:54,640
read the official documentation

00:29:52,640 --> 00:29:56,159
pay close attention to the syntax of

00:29:54,640 --> 00:29:58,480
example files there are

00:29:56,159 --> 00:29:59,520
plugins for your ide that you can use to

00:29:58,480 --> 00:30:02,159
detect

00:29:59,520 --> 00:30:03,039
problems with the syntax migrate one

00:30:02,159 --> 00:30:06,720
field at a time

00:30:03,039 --> 00:30:08,720
commit code often clean up and prepare

00:30:06,720 --> 00:30:10,640
data outside of the migrations not

00:30:08,720 --> 00:30:12,960
everything needs to happen there

00:30:10,640 --> 00:30:14,799
uh sometimes it is easier to spend one

00:30:12,960 --> 00:30:17,279
hour before or after

00:30:14,799 --> 00:30:17,919
executing an upgrade process doing some

00:30:17,279 --> 00:30:20,080
cleanup

00:30:17,919 --> 00:30:22,000
than trying to come up with the perfect

00:30:20,080 --> 00:30:24,640
solution

00:30:22,000 --> 00:30:26,080
in just using the mirrored api and if

00:30:24,640 --> 00:30:27,039
needed seek help from the drupal

00:30:26,080 --> 00:30:29,279
community

00:30:27,039 --> 00:30:31,200
particularly in the migration channel in

00:30:29,279 --> 00:30:34,399
slack we are very active

00:30:31,200 --> 00:30:36,799
and offer a lot of support and

00:30:34,399 --> 00:30:38,880
these are just some examples of content

00:30:36,799 --> 00:30:41,360
model changes that i have had to do

00:30:38,880 --> 00:30:43,120
in some projects so you you can get a

00:30:41,360 --> 00:30:46,640
sense of what is possible

00:30:43,120 --> 00:30:49,279
uh file into media entities locations

00:30:46,640 --> 00:30:50,080
into address fields block of text into

00:30:49,279 --> 00:30:52,640
layout builder

00:30:50,080 --> 00:30:53,919
organic groups into group entities

00:30:52,640 --> 00:30:57,120
inline resources

00:30:53,919 --> 00:30:58,320
as media entities nodes to user groups

00:30:57,120 --> 00:31:00,960
or paragraph entities

00:30:58,320 --> 00:31:02,399
playing text into structured fields via

00:31:00,960 --> 00:31:04,960
regular expression

00:31:02,399 --> 00:31:05,679
basically anything that you might need

00:31:04,960 --> 00:31:07,840
to do

00:31:05,679 --> 00:31:09,440
the market api is super flexible and

00:31:07,840 --> 00:31:13,200
will allow you to

00:31:09,440 --> 00:31:16,240
uh to to to do what what's necessary

00:31:13,200 --> 00:31:17,440
so with that i reached the end of my

00:31:16,240 --> 00:31:19,360
presentation

00:31:17,440 --> 00:31:21,039
but maybe this is the start of your own

00:31:19,360 --> 00:31:24,000
journey

00:31:21,039 --> 00:31:25,679
i encourage you to check the the website

00:31:24,000 --> 00:31:28,000
again and the course

00:31:25,679 --> 00:31:29,039
and i will very much appreciate your

00:31:28,000 --> 00:31:30,880
feedback

00:31:29,039 --> 00:31:33,200
i go by dinarcon on twitter and

00:31:30,880 --> 00:31:35,200
drupal.org that is my email

00:31:33,200 --> 00:31:36,960
and the slides and the feedback form

00:31:35,200 --> 00:31:38,559
from the drupal association is already

00:31:36,960 --> 00:31:40,399
available

00:31:38,559 --> 00:31:42,480
i'm going to spend a couple more minutes

00:31:40,399 --> 00:31:45,840
here in the q a

00:31:42,480 --> 00:31:47,840
page and after that uh

00:31:45,840 --> 00:31:49,200
in about 30 minutes i will be also in

00:31:47,840 --> 00:31:50,480
the pantheon booth if

00:31:49,200 --> 00:31:53,120
if you want to have a longer

00:31:50,480 --> 00:31:56,000
conversation so

00:31:53,120 --> 00:31:58,840
um in the questions is it difficult to

00:31:56,000 --> 00:32:00,559
migrate into layout builder from older

00:31:58,840 --> 00:32:02,480
sites

00:32:00,559 --> 00:32:03,600
i would say it is a little bit

00:32:02,480 --> 00:32:06,159
complicated

00:32:03,600 --> 00:32:08,720
indeed uh there was a session yesterday

00:32:06,159 --> 00:32:11,840
by chris wells it was really good

00:32:08,720 --> 00:32:13,679
he explained um you know what is the

00:32:11,840 --> 00:32:16,000
content model for layout builder

00:32:13,679 --> 00:32:18,080
and how you can approach that my

00:32:16,000 --> 00:32:22,320
recommendation with layout builder or

00:32:18,080 --> 00:32:24,480
any other custom migration is understand

00:32:22,320 --> 00:32:26,000
your source understand your destination

00:32:24,480 --> 00:32:28,320
understand the content model

00:32:26,000 --> 00:32:30,000
understand the database structure

00:32:28,320 --> 00:32:31,279
because you will very likely have to

00:32:30,000 --> 00:32:33,279
write at some point

00:32:31,279 --> 00:32:34,399
custom source plugins or custom process

00:32:33,279 --> 00:32:37,120
plugins

00:32:34,399 --> 00:32:37,919
and if you know how that data is

00:32:37,120 --> 00:32:40,080
supposed to be

00:32:37,919 --> 00:32:42,240
saved and how it is supposed to be

00:32:40,080 --> 00:32:44,559
retrieved that is going to save you a

00:32:42,240 --> 00:32:47,120
lot of time

00:32:44,559 --> 00:32:48,240
another question we want to migrate from

00:32:47,120 --> 00:32:50,880
drupal

00:32:48,240 --> 00:32:52,880
7 multi-site to d9 can we migrate just

00:32:50,880 --> 00:32:55,679
one side from a multi-site

00:32:52,880 --> 00:32:58,240
can we break the sites apart and migrate

00:32:55,679 --> 00:32:58,880
to separate d9 yes it is possible you

00:32:58,240 --> 00:33:01,440
can

00:32:58,880 --> 00:33:02,559
make it one voltage at a time you can

00:33:01,440 --> 00:33:05,679
break it up

00:33:02,559 --> 00:33:10,960
in a recent project i work

00:33:05,679 --> 00:33:14,080
migrating from organic groups into

00:33:10,960 --> 00:33:16,559
one single site without uh

00:33:14,080 --> 00:33:18,880
anything other than core language

00:33:16,559 --> 00:33:21,760
negotiation to determine what

00:33:18,880 --> 00:33:23,840
uh one side differentiates from another

00:33:21,760 --> 00:33:24,880
it is not the specific example that you

00:33:23,840 --> 00:33:27,919
mentioned

00:33:24,880 --> 00:33:30,240
but these things are certainly possible

00:33:27,919 --> 00:33:32,159
for your course are these video

00:33:30,240 --> 00:33:35,120
walkthroughs or live sessions

00:33:32,159 --> 00:33:36,080
um the course uh that i mentioned there

00:33:35,120 --> 00:33:39,120
is

00:33:36,080 --> 00:33:42,880
a pre-recorded video uh with

00:33:39,120 --> 00:33:45,360
examples but i got it also offers

00:33:42,880 --> 00:33:47,519
online trains either public ones or

00:33:45,360 --> 00:33:52,159
private ones so if you are interested

00:33:47,519 --> 00:33:56,080
by all means send us an email

00:33:52,159 --> 00:33:59,440
uh yes there are options to purchase

00:33:56,080 --> 00:34:01,360
for your team and get discounts for that

00:33:59,440 --> 00:34:02,640
uh if my site is running the latest

00:34:01,360 --> 00:34:04,960
version of drupal 8 and

00:34:02,640 --> 00:34:08,079
modules are the 89 latest version can

00:34:04,960 --> 00:34:10,079
you just update the core to group online

00:34:08,079 --> 00:34:12,079
or do you still have to run a migration

00:34:10,079 --> 00:34:14,320
no you don't need to run a migration

00:34:12,079 --> 00:34:15,359
going from eight to nine or eventually

00:34:14,320 --> 00:34:17,599
from nine to ten

00:34:15,359 --> 00:34:18,560
it is going to be what is called an

00:34:17,599 --> 00:34:21,839
update

00:34:18,560 --> 00:34:24,000
not an upgrade so you will be for the

00:34:21,839 --> 00:34:26,480
most part using composer to do that

00:34:24,000 --> 00:34:28,720
uh procedure but you you don't need to

00:34:26,480 --> 00:34:30,639
use the mirrored api for going from 8 to

00:34:28,720 --> 00:34:33,359
9 or from 9 to 10.

00:34:30,639 --> 00:34:34,000
so this doesn't apply this is for six or

00:34:33,359 --> 00:34:38,320
seven

00:34:34,000 --> 00:34:38,320
two eight nine are eventually ten

00:34:38,800 --> 00:34:43,440
you need to migrate images uploaded

00:34:40,639 --> 00:34:46,480
through media ck editor

00:34:43,440 --> 00:34:46,480
into the body field

00:34:47,760 --> 00:34:51,679
it is possible there are two modules uh

00:34:50,079 --> 00:34:54,879
migrate

00:34:51,679 --> 00:34:58,960
my media migration and media

00:34:54,879 --> 00:35:02,320
handler if i recall correctly in the

00:34:58,960 --> 00:35:04,960
31 days of of migrations

00:35:02,320 --> 00:35:05,680
there is an article of about with a list

00:35:04,960 --> 00:35:08,960
of about

00:35:05,680 --> 00:35:11,359
50 modules that interact with the

00:35:08,960 --> 00:35:12,400
api and i have listed them there so i

00:35:11,359 --> 00:35:16,400
invite you to

00:35:12,400 --> 00:35:18,960
to check them out but yes it is possible

00:35:16,400 --> 00:35:20,000
sometimes you need to do some you know

00:35:18,960 --> 00:35:21,839
massaging from

00:35:20,000 --> 00:35:23,119
what you get out of the box but for the

00:35:21,839 --> 00:35:26,640
most part they are

00:35:23,119 --> 00:35:27,680
quite complete uh if you are performing

00:35:26,640 --> 00:35:29,520
a custom migration

00:35:27,680 --> 00:35:31,200
you need to clear cache or run a command

00:35:29,520 --> 00:35:34,400
so that the migrate api

00:35:31,200 --> 00:35:36,800
will recognize the changes uh

00:35:34,400 --> 00:35:37,920
this is not covering this session i have

00:35:36,800 --> 00:35:41,040
another session that

00:35:37,920 --> 00:35:45,280
talks about the migrate api in itself

00:35:41,040 --> 00:35:48,000
not in the context of an upgrade and

00:35:45,280 --> 00:35:48,880
i can share some links in twitter but

00:35:48,000 --> 00:35:50,640
what i want to

00:35:48,880 --> 00:35:53,040
point out is that there are two ways of

00:35:50,640 --> 00:35:55,440
managing migrations either via plugins

00:35:53,040 --> 00:35:56,320
or via configuration entities what i

00:35:55,440 --> 00:35:58,560
showed today

00:35:56,320 --> 00:36:00,480
was configuration entities in that case

00:35:58,560 --> 00:36:02,800
if you make any change

00:36:00,480 --> 00:36:04,640
what you do is like re-import the

00:36:02,800 --> 00:36:06,400
configuration

00:36:04,640 --> 00:36:07,680
because you are using the configuration

00:36:06,400 --> 00:36:10,400
management system

00:36:07,680 --> 00:36:12,160
if you are writing migrations as plugins

00:36:10,400 --> 00:36:14,400
the location of the migrations is

00:36:12,160 --> 00:36:16,480
different the file names is different

00:36:14,400 --> 00:36:18,400
and if you make changes to those files

00:36:16,480 --> 00:36:20,960
what you need to do is clear the cache

00:36:18,400 --> 00:36:21,760
so that is a very common question you

00:36:20,960 --> 00:36:24,160
can look for

00:36:21,760 --> 00:36:27,520
a video recording called drupal

00:36:24,160 --> 00:36:31,200
migrations for non-coders and i go over

00:36:27,520 --> 00:36:33,520
that specific topic in that presentation

00:36:31,200 --> 00:36:34,480
can you go over the process of handling

00:36:33,520 --> 00:36:38,400
unrecognized

00:36:34,480 --> 00:36:41,520
filter formats again please um i will

00:36:38,400 --> 00:36:43,040
uh in in one of the slides there was a

00:36:41,520 --> 00:36:45,280
link to the

00:36:43,040 --> 00:36:47,359
official documentation and they have a

00:36:45,280 --> 00:36:50,800
lot of information about

00:36:47,359 --> 00:36:52,480
handling uh text formats or filters that

00:36:50,800 --> 00:36:54,400
are not recognized that would be a

00:36:52,480 --> 00:36:55,280
longer conversation so i would be happy

00:36:54,400 --> 00:36:57,920
to have it

00:36:55,280 --> 00:36:59,520
later in the passion booth but for now i

00:36:57,920 --> 00:37:01,520
will just refer to

00:36:59,520 --> 00:37:03,040
the official documentation they are they

00:37:01,520 --> 00:37:05,359
have very detailed uh

00:37:03,040 --> 00:37:07,440
information about that what is the

00:37:05,359 --> 00:37:10,160
easiest way to deal with db

00:37:07,440 --> 00:37:11,920
integrity issues duplicate needs when

00:37:10,160 --> 00:37:15,040
migrating legacy content

00:37:11,920 --> 00:37:18,640
to an existing instance i have had

00:37:15,040 --> 00:37:21,440
to deal with this from time to time and

00:37:18,640 --> 00:37:22,560
basically you need to create custom

00:37:21,440 --> 00:37:25,599
source plugins

00:37:22,560 --> 00:37:27,280
that will be done will be cleaning up

00:37:25,599 --> 00:37:29,440
some of that source data

00:37:27,280 --> 00:37:30,800
sometimes you have the right process

00:37:29,440 --> 00:37:34,640
plugins

00:37:30,800 --> 00:37:37,599
i invite you to to check if you

00:37:34,640 --> 00:37:38,640
create search plugins to look at the

00:37:37,599 --> 00:37:41,200
query

00:37:38,640 --> 00:37:43,280
method in which you can filter out

00:37:41,200 --> 00:37:45,920
things directly from the source

00:37:43,280 --> 00:37:47,440
and if you are writing process blogging

00:37:45,920 --> 00:37:50,720
look at the prep

00:37:47,440 --> 00:37:52,640
at the process row method which

00:37:50,720 --> 00:37:54,640
you can based on different logic that

00:37:52,640 --> 00:37:57,920
you define you can determine

00:37:54,640 --> 00:38:00,400
uh if a record should be migrated or not

00:37:57,920 --> 00:38:01,680
um at this moment would you recommend

00:38:00,400 --> 00:38:04,560
going from drupal 7 to

00:38:01,680 --> 00:38:04,960
part 8 or the drupal 9 i would recommend

00:38:04,560 --> 00:38:07,359
go

00:38:04,960 --> 00:38:08,320
going directly to drupal 9 the only

00:38:07,359 --> 00:38:11,760
reason you

00:38:08,320 --> 00:38:14,400
might not want to do this is if

00:38:11,760 --> 00:38:15,920
you depend on modules that do not have a

00:38:14,400 --> 00:38:18,480
stable d9 release

00:38:15,920 --> 00:38:19,040
and you don't have the resources to you

00:38:18,480 --> 00:38:22,160
know

00:38:19,040 --> 00:38:25,119
help get the model into

00:38:22,160 --> 00:38:25,920
a stable release for drupal 9 but

00:38:25,119 --> 00:38:27,760
otherwise

00:38:25,920 --> 00:38:28,960
if anything sub everything that you need

00:38:27,760 --> 00:38:31,520
is available

00:38:28,960 --> 00:38:32,320
by all means go directly with drupal 9

00:38:31,520 --> 00:38:35,920
can migrate

00:38:32,320 --> 00:38:37,920
help with changing database from sqlite

00:38:35,920 --> 00:38:41,680
to mysql or mariadb

00:38:37,920 --> 00:38:43,920
yes um that's not even

00:38:41,680 --> 00:38:46,079
measured api that's drupal core that it

00:38:43,920 --> 00:38:48,960
is able to read from different

00:38:46,079 --> 00:38:50,560
sources so you just say hey my api i

00:38:48,960 --> 00:38:53,760
want to read from sql

00:38:50,560 --> 00:38:55,520
and i want to write to to um drupal 9

00:38:53,760 --> 00:38:57,359
installation in that case

00:38:55,520 --> 00:38:59,119
for example your drupal 7 site will be

00:38:57,359 --> 00:39:01,440
sql and your

00:38:59,119 --> 00:39:03,680
group online site will be my sequel or

00:39:01,440 --> 00:39:05,359
maria debay but it is possible

00:39:03,680 --> 00:39:07,040
how does this process change when you

00:39:05,359 --> 00:39:08,560
are migrating an old field field

00:39:07,040 --> 00:39:11,839
collection multi-field

00:39:08,560 --> 00:39:14,240
into a custom field uh you need for the

00:39:11,839 --> 00:39:15,119
most part to create a custom process

00:39:14,240 --> 00:39:18,960
plug-in there

00:39:15,119 --> 00:39:20,240
are examples in the code repository that

00:39:18,960 --> 00:39:22,640
i shared before

00:39:20,240 --> 00:39:23,520
that you can have a look at where i

00:39:22,640 --> 00:39:26,960
change from

00:39:23,520 --> 00:39:28,720
different fields into one

00:39:26,960 --> 00:39:31,040
into a single one like i combined two

00:39:28,720 --> 00:39:33,280
fields into one and the content one is

00:39:31,040 --> 00:39:35,520
completely different there so

00:39:33,280 --> 00:39:36,800
i will suggest that you look at that

00:39:35,520 --> 00:39:39,359
example

00:39:36,800 --> 00:39:40,839
how do you handle entity id conflicts

00:39:39,359 --> 00:39:44,480
for the most part

00:39:40,839 --> 00:39:46,720
uh if possible you try to

00:39:44,480 --> 00:39:47,839
keep the ideas if not possible what you

00:39:46,720 --> 00:39:51,359
do is

00:39:47,839 --> 00:39:53,599
use the migration lookup process plugin

00:39:51,359 --> 00:39:54,640
and that one will allow you to say to

00:39:53,599 --> 00:39:58,480
say okay

00:39:54,640 --> 00:39:59,839
id number one in drupal 7 corresponds to

00:39:58,480 --> 00:40:02,880
id number three

00:39:59,839 --> 00:40:03,599
in drupal 9 so if your ids need to

00:40:02,880 --> 00:40:06,079
change

00:40:03,599 --> 00:40:06,960
you use the migration lookup process

00:40:06,079 --> 00:40:09,040
plugin

00:40:06,960 --> 00:40:10,240
for for making those for making those

00:40:09,040 --> 00:40:12,319
connections

00:40:10,240 --> 00:40:14,079
adding migration jumbles in module

00:40:12,319 --> 00:40:17,760
migration versus config

00:40:14,079 --> 00:40:20,960
folder pros and cons this has to do with

00:40:17,760 --> 00:40:24,400
migrations as plugins or configuration

00:40:20,960 --> 00:40:26,960
entities um

00:40:24,400 --> 00:40:28,480
they are for the most part the same uh

00:40:26,960 --> 00:40:30,720
in the series of 31

00:40:28,480 --> 00:40:31,680
articles there is a blog post dedicated

00:40:30,720 --> 00:40:34,720
to this

00:40:31,680 --> 00:40:35,440
as a summary i can say that when you

00:40:34,720 --> 00:40:37,040
have

00:40:35,440 --> 00:40:39,119
configuration entities you have the

00:40:37,040 --> 00:40:41,359
opportunity to inherit

00:40:39,119 --> 00:40:43,440
configuration from your group so for

00:40:41,359 --> 00:40:44,800
example the source database that you're

00:40:43,440 --> 00:40:46,560
going to be reading from

00:40:44,800 --> 00:40:48,480
is called you just define it in one

00:40:46,560 --> 00:40:49,440
place in the group and it's going to be

00:40:48,480 --> 00:40:51,599
shared across

00:40:49,440 --> 00:40:53,680
10 20 or 50 migration files that you

00:40:51,599 --> 00:40:57,119
might have

00:40:53,680 --> 00:40:59,359
other than that if you have uh

00:40:57,119 --> 00:41:01,200
for example you know a university that

00:40:59,359 --> 00:41:03,839
might have 100 sites

00:41:01,200 --> 00:41:05,680
in those cases having them as templates

00:41:03,839 --> 00:41:08,000
might be more beneficial because

00:41:05,680 --> 00:41:09,520
it's a model you enable you execute you

00:41:08,000 --> 00:41:13,359
turn off when you're done

00:41:09,520 --> 00:41:16,000
and you don't mess with eu ids

00:41:13,359 --> 00:41:18,400
across the different sites that might be

00:41:16,000 --> 00:41:18,400
involved

00:41:18,839 --> 00:41:21,839
ah

00:41:22,240 --> 00:41:27,599
so there is a question about the left

00:41:25,280 --> 00:41:29,280
leftover magnet map and migrate messages

00:41:27,599 --> 00:41:32,400
tables

00:41:29,280 --> 00:41:36,240
there is a patch that you can use

00:41:32,400 --> 00:41:36,880
to delete those tables but for the most

00:41:36,240 --> 00:41:38,720
part

00:41:36,880 --> 00:41:40,560
they do not cause any harm and i would

00:41:38,720 --> 00:41:42,319
recommend to keep them at least for a

00:41:40,560 --> 00:41:42,880
couple of months after the migration is

00:41:42,319 --> 00:41:45,920
done

00:41:42,880 --> 00:41:48,400
in case you ever go back uh you

00:41:45,920 --> 00:41:50,480
need to go back because that is your log

00:41:48,400 --> 00:41:53,200
of everything that the merit api

00:41:50,480 --> 00:41:54,720
did and it is possible to trace back

00:41:53,200 --> 00:41:58,480
errors or problems

00:41:54,720 --> 00:42:00,720
by looking at those tables i think those

00:41:58,480 --> 00:42:01,599
are all the questions that i see in the

00:42:00,720 --> 00:42:03,839
chat

00:42:01,599 --> 00:42:05,680
thank you very much everyone again for

00:42:03,839 --> 00:42:08,480
joining me today

00:42:05,680 --> 00:42:08,960
and i will be in the bathroom booth in

00:42:08,480 --> 00:42:11,760
about

00:42:08,960 --> 00:42:13,839
20 minutes uh if you have more questions

00:42:11,760 --> 00:42:14,560
and enjoy the rest of the conference

00:42:13,839 --> 00:42:17,920
please provide

00:42:14,560 --> 00:42:23,040
feedback and contribute to the project

00:42:17,920 --> 00:42:23,040

YouTube URL: https://www.youtube.com/watch?v=AOHiB_ssM7o


