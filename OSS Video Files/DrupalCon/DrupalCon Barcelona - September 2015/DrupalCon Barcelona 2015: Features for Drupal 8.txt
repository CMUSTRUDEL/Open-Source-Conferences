Title: DrupalCon Barcelona 2015: Features for Drupal 8
Publication date: 2015-09-22
Playlist: DrupalCon Barcelona - September 2015
Description: 
	The Features module has played in important role in deploying site configuration for Drupal 7.  Now that Drupal 8 has configuration management (CMI) built into core, what's the role of the Features module in Drupal 8?  In Drupal 8, Features will return to it's original mission of bundling functionality rather than just managing configuration.  We will demo the latest version of the D8 Features module.

What you will learn:

What Features is and why it exists
The architecture of Features in Drupal 8
How Features integrates with D8 CMI
How to create a new Feature
How to manage existing Features
New Bundles and Namespaces in Features D8
How easily a complex D7 module was ported to Drupal 8
Captions: 
	00:00:00,020 --> 00:00:09,510
all right hola bon dia but it's not

00:00:05,850 --> 00:00:10,740
morning so it's beau no tarda that's

00:00:09,510 --> 00:00:14,969
about all the cattle and I notice oh

00:00:10,740 --> 00:00:18,750
sorry so hopefully you're here to learn

00:00:14,969 --> 00:00:21,810
about features for Drupal 8 and I hope

00:00:18,750 --> 00:00:23,760
we don't all fall asleep after lunch so

00:00:21,810 --> 00:00:27,570
I hope to keep you entertained in the

00:00:23,760 --> 00:00:29,670
next hour or so I'm Mike Potter and I'm

00:00:27,570 --> 00:00:31,410
the prime maintainer of the features

00:00:29,670 --> 00:00:33,870
module and the features override module

00:00:31,410 --> 00:00:35,850
I'm also the architect for the open

00:00:33,870 --> 00:00:39,960
atrium distribution if anybody's has

00:00:35,850 --> 00:00:42,809
used that I'm just curious how many so

00:00:39,960 --> 00:00:45,149
raise your hand if you were at Matt Matt

00:00:42,809 --> 00:00:48,719
Cheney session this morning on cmi

00:00:45,149 --> 00:00:50,129
deployment okay so we're gonna we're

00:00:48,719 --> 00:00:52,980
going to overlap a little bit with that

00:00:50,129 --> 00:00:54,719
and then go into some new stuff is

00:00:52,980 --> 00:00:58,109
anyone here who has already heard me

00:00:54,719 --> 00:00:59,760
talk about this at maybe drupalcon LA or

00:00:58,109 --> 00:01:03,600
we got a brand new audience all right

00:00:59,760 --> 00:01:05,400
and how many people here want to be

00:01:03,600 --> 00:01:07,439
brave and raise their hand to admit that

00:01:05,400 --> 00:01:09,390
they don't even know what features is or

00:01:07,439 --> 00:01:10,950
they don't use features and they they're

00:01:09,390 --> 00:01:13,470
just brand new here to learn something

00:01:10,950 --> 00:01:15,299
something new okay good so we're gonna

00:01:13,470 --> 00:01:17,070
have a little bit of intro and then

00:01:15,299 --> 00:01:19,020
we'll get into so then presumably rest

00:01:17,070 --> 00:01:22,619
of you use features and probably want to

00:01:19,020 --> 00:01:27,360
throw tomatoes or something right so in

00:01:22,619 --> 00:01:30,270
Drupal 8 about a year ago a famous core

00:01:27,360 --> 00:01:32,189
developer said that they asked who has

00:01:30,270 --> 00:01:34,560
wasted more than a hundred hours with

00:01:32,189 --> 00:01:38,070
the features module and that in Drupal 8

00:01:34,560 --> 00:01:39,210
that was gone problem solved so

00:01:38,070 --> 00:01:42,840
therefore this can be a really short

00:01:39,210 --> 00:01:45,780
talk because if we don't need features

00:01:42,840 --> 00:01:46,950
in t8 why are we here all right so why

00:01:45,780 --> 00:01:48,450
are we still talking about features

00:01:46,950 --> 00:01:50,549
especially if you're at the earlier talk

00:01:48,450 --> 00:01:53,549
like we have cmi whoo drupal 8 is great

00:01:50,549 --> 00:01:55,020
no needs features so to review a little

00:01:53,549 --> 00:01:56,399
bit about what we're talking about here

00:01:55,020 --> 00:01:57,960
and the problem we're trying to solve

00:01:56,399 --> 00:02:00,119
and this overlaps a little bit with Matt

00:01:57,960 --> 00:02:02,280
session this morning when you when you

00:02:00,119 --> 00:02:04,920
build a Drupal site you have this

00:02:02,280 --> 00:02:07,979
database and in the database you put a

00:02:04,920 --> 00:02:10,649
lot of stuff you put all of your content

00:02:07,979 --> 00:02:12,900
pages all of your articles your blogs

00:02:10,649 --> 00:02:15,480
your comments

00:02:12,900 --> 00:02:17,430
your users your user profiles and we

00:02:15,480 --> 00:02:19,650
call all of this collectively the

00:02:17,430 --> 00:02:21,120
content of the site it's what your it's

00:02:19,650 --> 00:02:22,920
what your end users are creating that's

00:02:21,120 --> 00:02:25,019
what your content creators are creating

00:02:22,920 --> 00:02:27,150
the content the site but in that same

00:02:25,019 --> 00:02:30,750
database we have things like custom

00:02:27,150 --> 00:02:34,769
content types and fields and views and

00:02:30,750 --> 00:02:36,930
just random check boxes that you select

00:02:34,769 --> 00:02:40,590
in your configuration we call that all

00:02:36,930 --> 00:02:42,390
configuration and having that stored in

00:02:40,590 --> 00:02:43,859
the same database can be a problem when

00:02:42,390 --> 00:02:45,510
you're trying to deploy things to

00:02:43,859 --> 00:02:47,639
different sites or just when you're

00:02:45,510 --> 00:02:50,220
trying to control that config what

00:02:47,639 --> 00:02:53,609
features does is it takes that config

00:02:50,220 --> 00:02:56,220
part of the database and it writes it to

00:02:53,609 --> 00:02:59,340
code and so now you can manage it as

00:02:56,220 --> 00:03:01,049
code so why is that a good thing so it's

00:02:59,340 --> 00:03:03,629
a good thing because if you can get your

00:03:01,049 --> 00:03:05,129
configuration into code you conversion

00:03:03,629 --> 00:03:06,599
control it you know let's say someone

00:03:05,129 --> 00:03:09,209
goes in your site and changes the name

00:03:06,599 --> 00:03:10,620
of a view how do you know you know if

00:03:09,209 --> 00:03:12,150
you can get into code and put it in

00:03:10,620 --> 00:03:13,620
version control you can see when it was

00:03:12,150 --> 00:03:16,379
changed to change that you can revert

00:03:13,620 --> 00:03:17,970
your changes all that good stuff so it

00:03:16,379 --> 00:03:19,949
allows you to then deploy your

00:03:17,970 --> 00:03:21,720
configuration like your new views and

00:03:19,949 --> 00:03:23,669
your new content types from your

00:03:21,720 --> 00:03:25,139
development environment to your testing

00:03:23,669 --> 00:03:27,180
and staging system and then onto

00:03:25,139 --> 00:03:28,440
production because it's in code so it's

00:03:27,180 --> 00:03:31,019
treated just like the rest of the code

00:03:28,440 --> 00:03:32,909
of your site it allows you to create

00:03:31,019 --> 00:03:35,400
reusable modules so you can put all that

00:03:32,909 --> 00:03:38,220
code into a custom module put that a

00:03:35,400 --> 00:03:41,370
module on another site turn it on and

00:03:38,220 --> 00:03:44,609
have that same functionality so features

00:03:41,370 --> 00:03:45,959
was never intended to be a configuration

00:03:44,609 --> 00:03:49,470
management system it was never intended

00:03:45,959 --> 00:03:51,690
to be cmi and drupal 7 or in Drupal 6 or

00:03:49,470 --> 00:03:54,989
it was first in bed the reason features

00:03:51,690 --> 00:03:57,840
was invented was to bundle functionality

00:03:54,989 --> 00:04:01,199
into reusable modules it was actually

00:03:57,840 --> 00:04:02,489
invented by development seed in Drupal 6

00:04:01,199 --> 00:04:05,310
as part of the open atrium one

00:04:02,489 --> 00:04:07,260
distribution and the idea was they

00:04:05,310 --> 00:04:09,870
wanted to put package functionality like

00:04:07,260 --> 00:04:11,760
a blog in a photo gallery they wanted to

00:04:09,870 --> 00:04:13,889
put that together so what it was meant

00:04:11,760 --> 00:04:16,139
to do to use photo galleries an example

00:04:13,889 --> 00:04:18,510
is for a photo gallery you've got a

00:04:16,139 --> 00:04:21,120
custom content type so you take that

00:04:18,510 --> 00:04:23,940
content type you have some fields on it

00:04:21,120 --> 00:04:26,280
like to store your image asset then

00:04:23,940 --> 00:04:28,139
you've got the instance of the field

00:04:26,280 --> 00:04:30,210
you've got a view to display those

00:04:28,139 --> 00:04:32,850
fields in a nice kind of gallery grid

00:04:30,210 --> 00:04:35,580
maybe you have an image style to size

00:04:32,850 --> 00:04:37,050
those images appropriately maybe you

00:04:35,580 --> 00:04:39,210
have some other miscellaneous config

00:04:37,050 --> 00:04:41,760
variables all that stuff gets packaged

00:04:39,210 --> 00:04:44,850
together and written to a module called

00:04:41,760 --> 00:04:46,110
my photo gallery module and now once you

00:04:44,850 --> 00:04:48,330
have that module you can move it from

00:04:46,110 --> 00:04:51,150
site to site and and freelancers

00:04:48,330 --> 00:04:52,770
developers use this all the time to gain

00:04:51,150 --> 00:04:54,450
efficiency you know if you build some

00:04:52,770 --> 00:04:56,070
functionality for a client you don't

00:04:54,450 --> 00:04:58,050
want to redo that over and over and over

00:04:56,070 --> 00:04:59,550
again you want to make it reusable and

00:04:58,050 --> 00:05:02,370
then deployed on the other client sites

00:04:59,550 --> 00:05:04,560
that's why features was invented but

00:05:02,370 --> 00:05:07,440
because it could write config to code

00:05:04,560 --> 00:05:11,010
and nothing else in Drupal 7 could it

00:05:07,440 --> 00:05:12,510
got abused so why was features bad and

00:05:11,010 --> 00:05:15,300
why do we sometimes including myself

00:05:12,510 --> 00:05:17,729
curse features so one of the problems

00:05:15,300 --> 00:05:20,040
that features is there's no consistency

00:05:17,729 --> 00:05:22,530
how do you put this stuff in code it's

00:05:20,040 --> 00:05:26,430
not code its data it's like a view of

00:05:22,530 --> 00:05:27,780
you encode like a view is an object some

00:05:26,430 --> 00:05:29,280
things are objects some things are

00:05:27,780 --> 00:05:31,110
arrays I was just in the issue queue

00:05:29,280 --> 00:05:33,180
dealing with this issue of arrays versus

00:05:31,110 --> 00:05:35,540
objects how do you write that to code

00:05:33,180 --> 00:05:37,979
there's no consistent way to do that

00:05:35,540 --> 00:05:39,240
code is just not good for data like I

00:05:37,979 --> 00:05:41,820
say where we're trying to write objects

00:05:39,240 --> 00:05:43,830
with properties or raised with keys or

00:05:41,820 --> 00:05:46,470
string values or things like that and

00:05:43,830 --> 00:05:48,360
trying to write it out as PHP code is

00:05:46,470 --> 00:05:51,539
just not very good PHP is not a very

00:05:48,360 --> 00:05:53,640
good data language and then you have

00:05:51,539 --> 00:05:55,650
things like now you've exported it to

00:05:53,640 --> 00:05:59,010
code someone goes and changes your view

00:05:55,650 --> 00:06:01,169
name in the system and now it's marked

00:05:59,010 --> 00:06:02,850
as overridden or you install some new

00:06:01,169 --> 00:06:05,400
module and something's marked as

00:06:02,850 --> 00:06:07,260
overridden or it's Tuesday and something

00:06:05,400 --> 00:06:08,910
gets marked as overridden you know and

00:06:07,260 --> 00:06:11,430
it's like who / wrote it what do you do

00:06:08,910 --> 00:06:13,740
you know all that good stuff but

00:06:11,430 --> 00:06:16,680
features is all we have and it's a very

00:06:13,740 --> 00:06:18,810
complex hard problem to solve as anybody

00:06:16,680 --> 00:06:22,320
on the cmi team interpolate will attest

00:06:18,810 --> 00:06:24,330
to but now in Drupal 8 we have see em I

00:06:22,320 --> 00:06:27,360
see em I stands for the configuration

00:06:24,330 --> 00:06:29,580
management initiative the idea in da was

00:06:27,360 --> 00:06:33,090
to separate configuration from content

00:06:29,580 --> 00:06:36,390
do it nice and clean and we can thank a

00:06:33,090 --> 00:06:37,090
bunch of people the original initiative

00:06:36,390 --> 00:06:40,720
head

00:06:37,090 --> 00:06:44,139
is hey rocker gregg he's now passed the

00:06:40,720 --> 00:06:45,220
torch to Alex pot and then of course a

00:06:44,139 --> 00:06:47,110
whole bunch of people I mean the whole

00:06:45,220 --> 00:06:49,419
community contributed and Angie and

00:06:47,110 --> 00:06:51,400
Reese were committing patches from from

00:06:49,419 --> 00:06:53,530
people across the whole community to cmi

00:06:51,400 --> 00:06:56,740
in my opinion I think it's one of the

00:06:53,530 --> 00:06:59,650
most you know the most successful

00:06:56,740 --> 00:07:02,440
initiatives in Drupal 8 it was started

00:06:59,650 --> 00:07:04,180
early it had a very clear focus very

00:07:02,440 --> 00:07:07,780
clear purpose on what it tried to do

00:07:04,180 --> 00:07:10,450
they did it it's done it's in there we

00:07:07,780 --> 00:07:12,070
can all use it and be happy so let's

00:07:10,450 --> 00:07:13,810
talk about cmi a little bit why is si mi

00:07:12,070 --> 00:07:15,400
so awesome and Matt talked about a

00:07:13,810 --> 00:07:17,320
little bit about this this morning so

00:07:15,400 --> 00:07:19,150
first of all in si mi configuration

00:07:17,320 --> 00:07:21,520
instead of trying to write this into PHP

00:07:19,150 --> 00:07:24,190
code we're going to write your data into

00:07:21,520 --> 00:07:27,160
these things called llamo files dot yml

00:07:24,190 --> 00:07:29,169
and in gamal is a standard format it

00:07:27,160 --> 00:07:31,090
exists outside of Drupal we didn't

00:07:29,169 --> 00:07:33,729
invent our own format for a change we

00:07:31,090 --> 00:07:35,680
adopted something community wide and

00:07:33,729 --> 00:07:40,930
it's a great format it's meant to store

00:07:35,680 --> 00:07:42,340
data we have in cmi of built-in import

00:07:40,930 --> 00:07:44,260
and export and that was demoed this

00:07:42,340 --> 00:07:46,410
morning you can go into the UI and

00:07:44,260 --> 00:07:49,090
quadruple you can import your

00:07:46,410 --> 00:07:50,800
configuration you can export individual

00:07:49,090 --> 00:07:52,599
things like a single view like you could

00:07:50,800 --> 00:07:56,460
in d 7 but now you can do that for any

00:07:52,599 --> 00:07:58,270
any entity or any system that has config

00:07:56,460 --> 00:08:00,340
so we don't have to worry about

00:07:58,270 --> 00:08:03,280
implementing any of these hooks anymore

00:08:00,340 --> 00:08:05,889
the hooks are all gone in da as far as

00:08:03,280 --> 00:08:08,560
configuration goes there's no magic if

00:08:05,889 --> 00:08:11,700
if your config and your llamo file says

00:08:08,560 --> 00:08:13,750
that your site name is my drupal site

00:08:11,700 --> 00:08:15,580
nobody's going to change that that is

00:08:13,750 --> 00:08:17,440
your site name there's no magic way for

00:08:15,580 --> 00:08:19,210
some module to do an override hook or an

00:08:17,440 --> 00:08:21,729
altar hook and and change it on the fly

00:08:19,210 --> 00:08:25,090
and that was done on purpose and it just

00:08:21,729 --> 00:08:29,710
works if you use Drupal 8 cm I is just

00:08:25,090 --> 00:08:32,140
there it works and we can be happy so

00:08:29,710 --> 00:08:33,520
again if si mi is so awesome why are we

00:08:32,140 --> 00:08:35,680
still talking about features why am I

00:08:33,520 --> 00:08:38,409
still up here so features exports config

00:08:35,680 --> 00:08:41,140
the code cmi exports config to yamo data

00:08:38,409 --> 00:08:44,529
files that allows version control for

00:08:41,140 --> 00:08:46,630
both that allows us to deploy from

00:08:44,529 --> 00:08:47,390
development stage into production for

00:08:46,630 --> 00:08:49,880
both

00:08:47,390 --> 00:08:53,240
and in features you can reuse bundled

00:08:49,880 --> 00:08:56,390
functionality and in dat mi you can't

00:08:53,240 --> 00:08:59,870
there is no mechanism for doing what

00:08:56,390 --> 00:09:01,670
features was designed for so there's

00:08:59,870 --> 00:09:03,380
some issues with cmi as great as it is

00:09:01,670 --> 00:09:06,410
everything's got issues we can't have a

00:09:03,380 --> 00:09:09,080
perfect world with with no bugs and no

00:09:06,410 --> 00:09:11,240
issues so one of the things is what if

00:09:09,080 --> 00:09:12,620
you do want to put what if you want to

00:09:11,240 --> 00:09:15,080
make that photo gallery module that we

00:09:12,620 --> 00:09:17,150
talked about you know and you can store

00:09:15,080 --> 00:09:18,710
llamo files as part of your module

00:09:17,150 --> 00:09:20,600
there's a directory structure you stick

00:09:18,710 --> 00:09:22,730
your llamo files in there and now your

00:09:20,600 --> 00:09:26,060
module can have a view or anything else

00:09:22,730 --> 00:09:29,030
so what they want you to do in d 8 is to

00:09:26,060 --> 00:09:31,400
go find that content type for your photo

00:09:29,030 --> 00:09:33,830
gallery and copy and paste at yamo file

00:09:31,400 --> 00:09:36,770
into your module directory go find the

00:09:33,830 --> 00:09:38,990
fields go find your view go find that

00:09:36,770 --> 00:09:41,570
image style and what else am I supposed

00:09:38,990 --> 00:09:43,520
to put in here like what what else is

00:09:41,570 --> 00:09:44,780
Drupal storing configuration and for my

00:09:43,520 --> 00:09:46,520
photo gallery I don't really know

00:09:44,780 --> 00:09:48,170
because I'm not a developer I'm just a

00:09:46,520 --> 00:09:49,910
site builder and I just want to make a

00:09:48,170 --> 00:09:51,800
photo gallery module so it's a little

00:09:49,910 --> 00:09:53,480
hard to do that even though cmi allows

00:09:51,800 --> 00:09:55,700
you to import and export individual

00:09:53,480 --> 00:10:00,290
things it's hard to pull that out as a

00:09:55,700 --> 00:10:02,180
separate piece of functionality the

00:10:00,290 --> 00:10:04,490
other fun thing is the when you put a

00:10:02,180 --> 00:10:07,070
llamo file in a module in Drupal 8 it's

00:10:04,490 --> 00:10:10,610
in a directory called config / install

00:10:07,070 --> 00:10:12,980
that llamo file is read into Drupal when

00:10:10,610 --> 00:10:15,980
you install the module so it provides

00:10:12,980 --> 00:10:17,450
the initial default configuration for

00:10:15,980 --> 00:10:20,180
that whatever it is that's in your

00:10:17,450 --> 00:10:22,910
module if you then go change that file

00:10:20,180 --> 00:10:24,800
in your module nothing happens that's

00:10:22,910 --> 00:10:26,240
only the initial value if you want to

00:10:24,800 --> 00:10:28,820
change it you need to do that through

00:10:26,240 --> 00:10:29,990
writing update hooks so you can say okay

00:10:28,820 --> 00:10:32,510
in this new you know I released a new

00:10:29,990 --> 00:10:34,400
version of my module if you change that

00:10:32,510 --> 00:10:36,350
llamo file and Eve and put it on the

00:10:34,400 --> 00:10:37,610
site that already has that module it's

00:10:36,350 --> 00:10:39,110
going to ignore your change you've got

00:10:37,610 --> 00:10:42,830
to go into an update hook and say you

00:10:39,110 --> 00:10:47,810
know change this value and so that's how

00:10:42,830 --> 00:10:50,240
you deal with site specific changes the

00:10:47,810 --> 00:10:53,180
other thing that's interesting is if you

00:10:50,240 --> 00:10:55,610
uninstall a module it doesn't

00:10:53,180 --> 00:10:57,980
necessarily remove all the configuration

00:10:55,610 --> 00:11:00,579
associated with that module so for

00:10:57,980 --> 00:11:01,989
example if a module defines of view and

00:11:00,579 --> 00:11:04,119
you want to install the module the views

00:11:01,989 --> 00:11:07,119
not necessarily gone depends on your

00:11:04,119 --> 00:11:08,889
dependency chains in the newest versions

00:11:07,119 --> 00:11:11,110
of Drupal you can actually end up with a

00:11:08,889 --> 00:11:13,089
system where you have some configuration

00:11:11,110 --> 00:11:15,369
dependencies that will prevent you from

00:11:13,089 --> 00:11:17,350
even uninstalling that module because

00:11:15,369 --> 00:11:19,179
maybe it's defining a field then you

00:11:17,350 --> 00:11:23,049
have data in that field and you don't

00:11:19,179 --> 00:11:25,209
want that field to go away so this is

00:11:23,049 --> 00:11:27,040
good we don't want you to remove

00:11:25,209 --> 00:11:29,049
configuration when you install a module

00:11:27,040 --> 00:11:30,369
I don't want to remove a field because I

00:11:29,049 --> 00:11:32,379
might have data in that field and

00:11:30,369 --> 00:11:33,639
features did the same thing in d7 and

00:11:32,379 --> 00:11:35,679
some people sometimes think this is a

00:11:33,639 --> 00:11:38,259
bug where you know you have a feature

00:11:35,679 --> 00:11:40,360
that has a field you turn the feature on

00:11:38,259 --> 00:11:43,119
the field pops up you turn the feature

00:11:40,360 --> 00:11:44,939
off the field is still there and people

00:11:43,119 --> 00:11:46,989
expect it to like clean up after itself

00:11:44,939 --> 00:11:48,519
but you don't want to do that because

00:11:46,989 --> 00:11:50,980
people might have already put data into

00:11:48,519 --> 00:11:53,739
that field so CM i did the same thing

00:11:50,980 --> 00:11:56,350
and that's good but the tricky part with

00:11:53,739 --> 00:11:58,389
SI mi is if you try to enable a module

00:11:56,350 --> 00:12:01,540
and the configuration of that module

00:11:58,389 --> 00:12:03,910
already exists on your site drupal 8

00:12:01,540 --> 00:12:05,410
will refuse to install that module it

00:12:03,910 --> 00:12:07,449
will actually give you a nasty little

00:12:05,410 --> 00:12:09,489
exception violation saying pre-existing

00:12:07,449 --> 00:12:11,949
configuration so for example if your

00:12:09,489 --> 00:12:13,989
module has a view and that view already

00:12:11,949 --> 00:12:16,179
exists on your site you can't turn on

00:12:13,989 --> 00:12:17,559
that module so that's a problem for

00:12:16,179 --> 00:12:19,029
developers trying to make one of these

00:12:17,559 --> 00:12:20,739
pieces of like photo gallery

00:12:19,029 --> 00:12:23,679
functionality right my photo gallery has

00:12:20,739 --> 00:12:25,299
a view maybe there's a bug in that view

00:12:23,679 --> 00:12:27,100
and I need to release a new version of

00:12:25,299 --> 00:12:28,449
it there's no way for you to install

00:12:27,100 --> 00:12:32,169
that new module because it already

00:12:28,449 --> 00:12:34,360
exists so you get this wonderful little

00:12:32,169 --> 00:12:36,970
catch-22 where if it lets you disable a

00:12:34,360 --> 00:12:42,089
module with config you then can tree in

00:12:36,970 --> 00:12:44,589
able the module so some fun issues good

00:12:42,089 --> 00:12:47,049
so we still need features to create

00:12:44,589 --> 00:12:48,999
bundles of functionality and that's what

00:12:47,049 --> 00:12:52,569
we finally get to go back to our roots

00:12:48,999 --> 00:12:53,709
in v8 and do with features so what is

00:12:52,569 --> 00:12:56,319
features going to do and I'm going to

00:12:53,709 --> 00:12:58,360
demo features for you today it lets you

00:12:56,319 --> 00:13:01,149
do the same things you could in d 7 you

00:12:58,360 --> 00:13:04,629
can import and export configuration much

00:13:01,149 --> 00:13:06,399
like cmi in fact it uses cmi you can

00:13:04,629 --> 00:13:08,829
detect changes if somebody changes

00:13:06,399 --> 00:13:11,169
something like a view you still can see

00:13:08,829 --> 00:13:12,700
those changes but there are some new

00:13:11,169 --> 00:13:16,150
features as well

00:13:12,700 --> 00:13:18,880
in d 7 features was kind of this black

00:13:16,150 --> 00:13:21,850
box you sometimes didn't know what to

00:13:18,880 --> 00:13:23,770
put in a feature how do you know to make

00:13:21,850 --> 00:13:25,690
a photo gallery to add all those things

00:13:23,770 --> 00:13:27,100
to it when you go into features in d7

00:13:25,690 --> 00:13:29,170
you just kind of have this blank page in

00:13:27,100 --> 00:13:30,670
da we have this concept called

00:13:29,170 --> 00:13:32,830
assignment plugins which will

00:13:30,670 --> 00:13:35,470
automatically package your configuration

00:13:32,830 --> 00:13:37,150
into suggested features so when you

00:13:35,470 --> 00:13:38,320
first go into features in d8 you don't

00:13:37,150 --> 00:13:40,510
have a blank page you have a whole bunch

00:13:38,320 --> 00:13:42,010
of suggestions for saying hey do you

00:13:40,510 --> 00:13:44,410
want to export this or export this or

00:13:42,010 --> 00:13:45,940
export this and it's a very pluggable

00:13:44,410 --> 00:13:49,630
configurable system that will show you

00:13:45,940 --> 00:13:51,370
in d8 we now have namespaces which we

00:13:49,630 --> 00:13:52,780
call bundles which I know is a little

00:13:51,370 --> 00:13:55,570
confusing because there's like bundles

00:13:52,780 --> 00:13:57,640
and content type in entities as well but

00:13:55,570 --> 00:14:00,340
basically a bundle in da it's kind of

00:13:57,640 --> 00:14:02,200
like indie 7 where you had categories on

00:14:00,340 --> 00:14:04,060
those tabs on the left where you could

00:14:02,200 --> 00:14:06,550
categorize your features into different

00:14:04,060 --> 00:14:08,680
categories same concept except here in

00:14:06,550 --> 00:14:11,020
da it's going to help you enforce name

00:14:08,680 --> 00:14:12,880
spacing so you're not going to pick a

00:14:11,020 --> 00:14:14,440
name for your module that might conflict

00:14:12,880 --> 00:14:16,480
with somebody else so if you're working

00:14:14,440 --> 00:14:18,220
on open atrium modules you'll be in the

00:14:16,480 --> 00:14:19,930
OA namespace and every one of your

00:14:18,220 --> 00:14:23,140
features will have 0 a underscore his

00:14:19,930 --> 00:14:25,450
part of the name we have support for the

00:14:23,140 --> 00:14:29,020
latest rush actually dress 8 support as

00:14:25,450 --> 00:14:31,450
well but we also support fresh 7 and

00:14:29,020 --> 00:14:34,210
features is very modular in da in fact

00:14:31,450 --> 00:14:36,700
the UI is a separate module so if you no

00:14:34,210 --> 00:14:38,620
longer want your and user clients

00:14:36,700 --> 00:14:42,010
messing with your features you can turn

00:14:38,620 --> 00:14:43,780
off the UI and so they can't do that but

00:14:42,010 --> 00:14:45,550
even better you don't even need features

00:14:43,780 --> 00:14:48,010
on production features is now a

00:14:45,550 --> 00:14:50,650
development module used to create

00:14:48,010 --> 00:14:52,810
bundles of functionality you then deploy

00:14:50,650 --> 00:14:54,520
those pieces of functionality as normal

00:14:52,810 --> 00:14:56,260
modules and you work with them on

00:14:54,520 --> 00:14:58,540
production as normal modules you don't

00:14:56,260 --> 00:15:01,000
need features anymore so in some sense

00:14:58,540 --> 00:15:04,570
features did go away in d8 just on

00:15:01,000 --> 00:15:07,360
production now I have to put a slide and

00:15:04,570 --> 00:15:09,250
a shout out here this was a this was a

00:15:07,360 --> 00:15:11,140
really fun collaboration when I first

00:15:09,250 --> 00:15:13,690
started getting into doing features 4 d8

00:15:11,140 --> 00:15:15,430
this past year I kind of survey the

00:15:13,690 --> 00:15:17,230
landscape and i found this module called

00:15:15,430 --> 00:15:19,180
config packager that was written by Ned

00:15:17,230 --> 00:15:21,610
Joe with Fame you know net oh he's a

00:15:19,180 --> 00:15:24,760
really prolific contributed to Drupal

00:15:21,610 --> 00:15:25,900
great guy and config packager that kind

00:15:24,760 --> 00:15:27,130
of sounded like what we want

00:15:25,900 --> 00:15:29,020
to do with features right we want to

00:15:27,130 --> 00:15:31,270
take configuration and package it up

00:15:29,020 --> 00:15:33,010
into things like photo galleries and so

00:15:31,270 --> 00:15:34,600
I looked at it I'm like huh this this

00:15:33,010 --> 00:15:36,700
looks like a lot of the base of what we

00:15:34,600 --> 00:15:38,170
want pitchers to be contacted Ned Joe I

00:15:36,700 --> 00:15:39,640
said hey do you want this to be features

00:15:38,170 --> 00:15:41,350
you want to maintain your own module me

00:15:39,640 --> 00:15:43,150
it's like I'd love to be you know have

00:15:41,350 --> 00:15:45,250
this be part of features so Ned Joe is

00:15:43,150 --> 00:15:47,410
now a co maintain on features and we

00:15:45,250 --> 00:15:49,360
built features d8 around his config

00:15:47,410 --> 00:15:51,880
packager module and it was really an

00:15:49,360 --> 00:15:54,640
example of how Drupal contribs to work

00:15:51,880 --> 00:15:56,980
because he had ideas I had ideas I had

00:15:54,640 --> 00:15:58,330
experienced from the d7 features he has

00:15:56,980 --> 00:16:00,370
things he's wanted to put in features

00:15:58,330 --> 00:16:02,470
for years we're able to kind of put that

00:16:00,370 --> 00:16:04,720
all together and end up with the result

00:16:02,470 --> 00:16:07,630
being better than the sum of the two

00:16:04,720 --> 00:16:09,370
parts or however that goes so if you

00:16:07,630 --> 00:16:12,490
seen edge oh shot out to him thank them

00:16:09,370 --> 00:16:17,470
for his work on this so let's jump into

00:16:12,490 --> 00:16:20,890
a demo a demo here so here I am on my

00:16:17,470 --> 00:16:23,950
local d8 site so features is located

00:16:20,890 --> 00:16:25,900
with cmi so you go into your site

00:16:23,950 --> 00:16:27,220
configuration you go down under

00:16:25,900 --> 00:16:29,140
development because this is a

00:16:27,220 --> 00:16:32,470
development module and you go to your

00:16:29,140 --> 00:16:34,660
configuration management page and this

00:16:32,470 --> 00:16:36,880
is where cmi lives it's just that we've

00:16:34,660 --> 00:16:38,440
added some feature or a tab to it but

00:16:36,880 --> 00:16:40,270
this is where your full import and

00:16:38,440 --> 00:16:42,460
export for cmi is that map showed this

00:16:40,270 --> 00:16:44,350
morning this is where your single import

00:16:42,460 --> 00:16:46,750
export is again part of core where you

00:16:44,350 --> 00:16:49,600
can you know go export a single view if

00:16:46,750 --> 00:16:51,670
you want and do that but now you can go

00:16:49,600 --> 00:16:53,620
to the features tab and look at your

00:16:51,670 --> 00:16:56,110
features and you'll see that by default

00:16:53,620 --> 00:16:58,480
in his auto picked or auto package

00:16:56,110 --> 00:17:00,010
several things together you can click on

00:16:58,480 --> 00:17:01,810
this to expand it and we'll show you

00:17:00,010 --> 00:17:03,940
that in this article feature that it's

00:17:01,810 --> 00:17:06,520
suggesting it has all these different

00:17:03,940 --> 00:17:09,550
things that are part of that and it says

00:17:06,520 --> 00:17:11,560
that it is currently not exported so if

00:17:09,550 --> 00:17:13,300
you want to export something you can

00:17:11,560 --> 00:17:15,400
just essentially click on it and export

00:17:13,300 --> 00:17:18,040
it and be done so that's what features

00:17:15,400 --> 00:17:20,650
looks like at a glance now in order to

00:17:18,040 --> 00:17:22,120
make a feature let's make that photo

00:17:20,650 --> 00:17:23,920
gallery that we talked about that we've

00:17:22,120 --> 00:17:25,990
talked about for a long time so in order

00:17:23,920 --> 00:17:28,360
to make a feature we first need to

00:17:25,990 --> 00:17:29,440
create the photo gallery we need to do

00:17:28,360 --> 00:17:31,360
all those things that I mentioned

00:17:29,440 --> 00:17:37,950
earlier so let's go back to our local

00:17:31,360 --> 00:17:37,950
site and let's go create some stuff

00:17:38,480 --> 00:17:47,660
so we have a content type we need to add

00:17:41,330 --> 00:17:56,030
an image field to it and now we're going

00:17:47,660 --> 00:17:58,490
to go create our image style if only it

00:17:56,030 --> 00:17:59,990
was this fast real life right now we're

00:17:58,490 --> 00:18:02,860
going to create our grid view so the

00:17:59,990 --> 00:18:04,730
grid is a view of our image content type

00:18:02,860 --> 00:18:06,350
and we're going to show all of them

00:18:04,730 --> 00:18:08,110
we're going to add the image field to

00:18:06,350 --> 00:18:10,780
the view so that it shows the images

00:18:08,110 --> 00:18:13,040
we're going to select our image style

00:18:10,780 --> 00:18:17,090
going to give it a menu link called

00:18:13,040 --> 00:18:19,610
gallery so now we need to make some

00:18:17,090 --> 00:18:21,710
content to display and so of course I

00:18:19,610 --> 00:18:25,179
love my cats so we're going to upload a

00:18:21,710 --> 00:18:25,179
bunch of cat pictures into our gallery

00:18:31,410 --> 00:18:36,760
and click gallery and there's our photo

00:18:34,360 --> 00:18:44,860
gallery alright so we've created a photo

00:18:36,760 --> 00:18:46,299
gallery alright so now let's take all

00:18:44,860 --> 00:18:47,920
that work and we don't want to do that

00:18:46,299 --> 00:18:49,900
again even though it was really fast we

00:18:47,920 --> 00:18:51,640
don't want to do that again okay imagine

00:18:49,900 --> 00:18:53,350
you spent weeks on this photo gallery

00:18:51,640 --> 00:18:55,720
it's like the world's best photo gallery

00:18:53,350 --> 00:18:59,020
now we want to feature eyes it and move

00:18:55,720 --> 00:19:02,230
it to a new site so with features how do

00:18:59,020 --> 00:19:04,000
we go create the feature so we go back

00:19:02,230 --> 00:19:06,400
to where features lives which as I said

00:19:04,000 --> 00:19:09,640
is in the development configuration

00:19:06,400 --> 00:19:12,520
management area and now we will see that

00:19:09,640 --> 00:19:15,340
our gallery is listed as a new feature

00:19:12,520 --> 00:19:18,400
we can export so right at the top there

00:19:15,340 --> 00:19:20,710
is my image and if we click on that to

00:19:18,400 --> 00:19:23,410
go look at it you can see it's got a

00:19:20,710 --> 00:19:24,730
name and here's all the things that are

00:19:23,410 --> 00:19:26,799
added to the feature we've got our

00:19:24,730 --> 00:19:29,470
content type we've got our field on our

00:19:26,799 --> 00:19:31,690
field storage we've got our view now it

00:19:29,470 --> 00:19:33,870
doesn't auto detect the image style yet

00:19:31,690 --> 00:19:37,299
because there's actually a bug in views

00:19:33,870 --> 00:19:38,890
it does not have a dependency on its

00:19:37,299 --> 00:19:41,559
field for matters so we add that

00:19:38,890 --> 00:19:43,450
manually and we can come down here and

00:19:41,559 --> 00:19:45,010
just like in features one we can click

00:19:43,450 --> 00:19:47,950
right which is equivalent to generate

00:19:45,010 --> 00:19:49,360
and poof we just made a module now if

00:19:47,950 --> 00:19:50,860
you want you can also click download

00:19:49,360 --> 00:19:53,290
archive and it will download a tarball

00:19:50,860 --> 00:19:55,179
of that if you want to move it to to

00:19:53,290 --> 00:19:59,049
your site manually that way you can do

00:19:55,179 --> 00:20:01,630
that just like in d7 ok so now we've

00:19:59,049 --> 00:20:03,160
made a module the features page does not

00:20:01,630 --> 00:20:05,710
allow you to enable the module you'll

00:20:03,160 --> 00:20:07,510
notice it says uninstalled but this is a

00:20:05,710 --> 00:20:10,120
normal everyday module we go to our

00:20:07,510 --> 00:20:12,700
Drupal extend page which is where the

00:20:10,120 --> 00:20:15,040
new module page lives in d eight and we

00:20:12,700 --> 00:20:17,500
go find our new module and we enable it

00:20:15,040 --> 00:20:20,049
and now we have our image gallery

00:20:17,500 --> 00:20:24,010
enabled on our site and now if we go

00:20:20,049 --> 00:20:25,720
back over to the features page just go

00:20:24,010 --> 00:20:27,610
back in the browser to where we were and

00:20:25,720 --> 00:20:29,799
refresh the page you'll see that where

00:20:27,610 --> 00:20:31,929
it says uninstalled and now switches now

00:20:29,799 --> 00:20:35,230
it says enabled so it shows us that that

00:20:31,929 --> 00:20:38,010
module is now an ape upon the site so

00:20:35,230 --> 00:20:40,330
there was a trick there right because

00:20:38,010 --> 00:20:42,240
when we were doing the fun thing with

00:20:40,330 --> 00:20:44,730
the music we created the

00:20:42,240 --> 00:20:46,470
contenttype in the view but now we just

00:20:44,730 --> 00:20:49,500
enabled a module that had that same

00:20:46,470 --> 00:20:51,690
content type in view so we just bypassed

00:20:49,500 --> 00:20:53,309
that Drupal 8 thing I told you about

00:20:51,690 --> 00:20:55,220
where it doesn't allow you to enable a

00:20:53,309 --> 00:20:57,450
module that has existing configuration

00:20:55,220 --> 00:20:59,700
and that's one of the tricks of having

00:20:57,450 --> 00:21:02,250
features on your site will do for you we

00:20:59,700 --> 00:21:05,880
extended the core config installer class

00:21:02,250 --> 00:21:07,770
and we said in this extension oh you're

00:21:05,880 --> 00:21:10,440
installing the feature we will let you

00:21:07,770 --> 00:21:13,080
do that and we will bypass this config

00:21:10,440 --> 00:21:14,970
exception so that is one reason why you

00:21:13,080 --> 00:21:16,380
might still want features on production

00:21:14,970 --> 00:21:17,970
is if you have a situation where you're

00:21:16,380 --> 00:21:20,160
trying to install modules that have

00:21:17,970 --> 00:21:21,960
pre-existing config-if its marked as a

00:21:20,160 --> 00:21:25,800
feature it will allow you to install

00:21:21,960 --> 00:21:29,220
that okay so we've now made the feature

00:21:25,800 --> 00:21:31,190
we we export it to a tarball to to this

00:21:29,220 --> 00:21:34,110
module so now let's go to another site

00:21:31,190 --> 00:21:35,910
so actually let's I mean this is this is

00:21:34,110 --> 00:21:38,400
pretty trivial bit like we're just going

00:21:35,910 --> 00:21:40,410
to copy this tarball so we go into our

00:21:38,400 --> 00:21:43,980
modules directory and we're going to

00:21:40,410 --> 00:21:45,150
copy that tarball that i downloaded into

00:21:43,980 --> 00:21:51,600
this directory and we're going to

00:21:45,150 --> 00:21:53,220
unarchive it and there's our module okay

00:21:51,600 --> 00:21:55,650
so now we're going to go to our new d8

00:21:53,220 --> 00:21:58,170
site we go to the modules page the

00:21:55,650 --> 00:21:59,790
extend page and now there is no features

00:21:58,170 --> 00:22:01,950
module on this site and so I'm going to

00:21:59,790 --> 00:22:04,200
type in features and see look no magic

00:22:01,950 --> 00:22:08,100
there's no features module but we're

00:22:04,200 --> 00:22:10,740
going to find our my image module that

00:22:08,100 --> 00:22:17,040
we just installed there it is so we now

00:22:10,740 --> 00:22:19,559
enable it save and when we go to our

00:22:17,040 --> 00:22:21,090
main site will see a gallery link but of

00:22:19,559 --> 00:22:23,370
course we have the gallery but we don't

00:22:21,090 --> 00:22:25,860
have content so yes once again we have

00:22:23,370 --> 00:22:27,809
to upload more cat videos or more calves

00:22:25,860 --> 00:22:32,760
images so we'll do this really quick i'm

00:22:27,809 --> 00:22:35,510
just going to put two of them in here at

00:22:32,760 --> 00:22:35,510
our second one

00:22:37,420 --> 00:22:44,650
and now when we go to our gallery page

00:22:40,920 --> 00:22:46,360
we see our gallery okay so we just

00:22:44,650 --> 00:22:47,710
created our gallery on a brand new site

00:22:46,360 --> 00:22:50,410
without creating the view or anything

00:22:47,710 --> 00:22:52,360
else so features works like everyone's

00:22:50,410 --> 00:22:54,690
like wow we've been doing this in d7 for

00:22:52,360 --> 00:22:57,250
a long time and now you can do it in d 8

00:22:54,690 --> 00:22:58,960
so let's talk about some of the the more

00:22:57,250 --> 00:23:02,590
nitty-gritty details so what happens

00:22:58,960 --> 00:23:03,900
when somebody changes your site so in

00:23:02,590 --> 00:23:05,860
this case we're going to use the

00:23:03,900 --> 00:23:08,650
in-place editor we're going to go edit

00:23:05,860 --> 00:23:10,360
this view and you know our CEO hates

00:23:08,650 --> 00:23:13,120
that it says my gallery they really want

00:23:10,360 --> 00:23:15,160
it to save my cat gallery because that's

00:23:13,120 --> 00:23:17,830
what this really is so they go and they

00:23:15,160 --> 00:23:21,850
change the view and we save the change

00:23:17,830 --> 00:23:23,860
and now we go over to our feature we're

00:23:21,850 --> 00:23:25,300
just going to go back look at our future

00:23:23,860 --> 00:23:28,060
and we're going to refresh the page and

00:23:25,300 --> 00:23:30,790
where it says enabled it now says that

00:23:28,060 --> 00:23:33,340
it's now changed and we can click the

00:23:30,790 --> 00:23:34,690
Change button and we're actually if we

00:23:33,340 --> 00:23:37,240
expand it will show us that what's

00:23:34,690 --> 00:23:38,950
actually changing is the view and if we

00:23:37,240 --> 00:23:41,200
click on where it says change that's a

00:23:38,950 --> 00:23:42,910
link and that will take us to a diff

00:23:41,200 --> 00:23:45,790
page that will show us that what has

00:23:42,910 --> 00:23:47,710
changed is the name so in the active

00:23:45,790 --> 00:23:50,110
configuration and yellow it says my cat

00:23:47,710 --> 00:23:52,930
gallery in the code configuration has

00:23:50,110 --> 00:23:55,240
just gallery so if we want to undo this

00:23:52,930 --> 00:23:57,720
we want to import the code back to the

00:23:55,240 --> 00:24:00,910
site we just check the box click import

00:23:57,720 --> 00:24:02,590
and now it's going to be back to just

00:24:00,910 --> 00:24:07,150
saying my gallery so if we actually go

00:24:02,590 --> 00:24:09,070
look at it see it says my gallery let's

00:24:07,150 --> 00:24:10,990
do that same change again let's change

00:24:09,070 --> 00:24:13,360
it back to my cat gallery and let's say

00:24:10,990 --> 00:24:15,370
this is no we really really really want

00:24:13,360 --> 00:24:17,620
it called my cat gallery we want to put

00:24:15,370 --> 00:24:20,950
that back into the code so we changed

00:24:17,620 --> 00:24:26,680
the view we save that we go back over to

00:24:20,950 --> 00:24:28,300
features and we refresh the page and now

00:24:26,680 --> 00:24:30,850
from the front page we can just click

00:24:28,300 --> 00:24:33,940
the box and say right and it will now

00:24:30,850 --> 00:24:36,700
export that feature again and now our

00:24:33,940 --> 00:24:38,680
changes in code so in fact if we go look

00:24:36,700 --> 00:24:40,450
at it in code so it says my calc gallery

00:24:38,680 --> 00:24:42,130
still on the site if we switch over to

00:24:40,450 --> 00:24:44,410
our code editor we're going to go into

00:24:42,130 --> 00:24:46,810
the gamo file for this view so this is

00:24:44,410 --> 00:24:48,580
for the real techy geeks here here's the

00:24:46,810 --> 00:24:50,070
view and Gamal we go down and look for

00:24:48,580 --> 00:24:52,620
title and we can see in

00:24:50,070 --> 00:24:54,300
it says my cat gallery so that's how you

00:24:52,620 --> 00:24:55,650
handle both import and export so you can

00:24:54,300 --> 00:24:58,350
see the names have changed a little bit

00:24:55,650 --> 00:25:00,840
this would be in d7 the equivalent of

00:24:58,350 --> 00:25:04,020
doing either a revert which is now

00:25:00,840 --> 00:25:05,940
import or an update which is now export

00:25:04,020 --> 00:25:07,860
so we've changed the terminology to be

00:25:05,940 --> 00:25:09,930
consistent with cmi so we're used to

00:25:07,860 --> 00:25:12,330
using the same import export because I

00:25:09,930 --> 00:25:14,220
was a problem in d 7 right revert update

00:25:12,330 --> 00:25:16,560
like it was generate like what do you

00:25:14,220 --> 00:25:19,110
call it it was all very confusing so we

00:25:16,560 --> 00:25:21,090
fixed all that so let's look at

00:25:19,110 --> 00:25:23,370
something new let's look at this new

00:25:21,090 --> 00:25:25,830
bundle functionality so as I mentioned

00:25:23,370 --> 00:25:27,540
bundles are kind of a way to group

00:25:25,830 --> 00:25:28,890
together your you're different features

00:25:27,540 --> 00:25:30,780
and so there's this little drop-down

00:25:28,890 --> 00:25:33,060
called bundles we can go to a config

00:25:30,780 --> 00:25:35,640
bundle tab to create a new one what a

00:25:33,060 --> 00:25:39,770
bundle is is both a namespace but also

00:25:35,640 --> 00:25:41,850
and I'm going to try to is it control k

00:25:39,770 --> 00:25:43,800
try to pause this a little bit here cuz

00:25:41,850 --> 00:25:46,410
I like to talk about this this page a

00:25:43,800 --> 00:25:48,240
little bit more so a bundle is not just

00:25:46,410 --> 00:25:50,970
a namespace it's also all of the

00:25:48,240 --> 00:25:53,670
settings for how you want your features

00:25:50,970 --> 00:25:54,960
to be auto packaged so when we saw when

00:25:53,670 --> 00:25:56,850
we wanted to feature is the first time

00:25:54,960 --> 00:25:59,730
it was you know it had things like

00:25:56,850 --> 00:26:01,740
article pre-selected as a feature how

00:25:59,730 --> 00:26:03,420
did it do that it did that through these

00:26:01,740 --> 00:26:05,070
things called assignment plugins and

00:26:03,420 --> 00:26:06,690
there's lots of different assignment

00:26:05,070 --> 00:26:09,360
plugins that you can see listed here and

00:26:06,690 --> 00:26:11,460
they run in a specific order so for

00:26:09,360 --> 00:26:13,920
example that first one called packages

00:26:11,460 --> 00:26:16,500
it goes out and it looks for existing

00:26:13,920 --> 00:26:19,800
feature modules and it brings those in

00:26:16,500 --> 00:26:21,510
as lines and our features listings the

00:26:19,800 --> 00:26:23,550
existing one then takes those modules

00:26:21,510 --> 00:26:25,500
and figures out what config goes into it

00:26:23,550 --> 00:26:27,270
and so on and so forth the really

00:26:25,500 --> 00:26:31,040
important one is the one kind of midway

00:26:27,270 --> 00:26:34,290
down called base type base type controls

00:26:31,040 --> 00:26:36,900
how you want your features organized and

00:26:34,290 --> 00:26:39,750
by default it's organized by content

00:26:36,900 --> 00:26:41,760
type so article is a content type so you

00:26:39,750 --> 00:26:43,140
get a suggested feature page as a

00:26:41,760 --> 00:26:45,240
content type you give this executive

00:26:43,140 --> 00:26:47,550
eater but as you'll see there's options

00:26:45,240 --> 00:26:49,530
in the config for that where you can

00:26:47,550 --> 00:26:51,690
bundle your features however you want

00:26:49,530 --> 00:26:53,940
maybe you want to feature for every view

00:26:51,690 --> 00:26:55,740
on your site so you go change it from

00:26:53,940 --> 00:26:57,510
content type to view and now it's going

00:26:55,740 --> 00:26:59,820
to suggest features for every one of

00:26:57,510 --> 00:27:01,440
your views so really powerful

00:26:59,820 --> 00:27:02,400
functionality for controlling how

00:27:01,440 --> 00:27:04,590
feature

00:27:02,400 --> 00:27:07,290
are displayed and all of these settings

00:27:04,590 --> 00:27:08,700
get saved as a bundle and you can have

00:27:07,290 --> 00:27:10,530
more than one bundle on your site and

00:27:08,700 --> 00:27:12,810
you can switch between them so you can

00:27:10,530 --> 00:27:15,240
have the content-type view of your site

00:27:12,810 --> 00:27:17,250
or you can have the views view of your

00:27:15,240 --> 00:27:19,560
site or the fields view of your site and

00:27:17,250 --> 00:27:21,750
so on and these are plugins that you can

00:27:19,560 --> 00:27:23,160
write you can write your own you can

00:27:21,750 --> 00:27:25,470
reorder them you can turn them on and

00:27:23,160 --> 00:27:27,330
off so for example if you don't want

00:27:25,470 --> 00:27:29,850
features to ever show you these auto

00:27:27,330 --> 00:27:31,920
detected dependencies you just unclick

00:27:29,850 --> 00:27:33,960
the dependency plug-in and now it won't

00:27:31,920 --> 00:27:35,430
show you those anymore if you don't want

00:27:33,960 --> 00:27:37,380
it to do namespaces you can actually

00:27:35,430 --> 00:27:40,440
turn off the namespaces okay let's

00:27:37,380 --> 00:27:42,380
proceed here so what we're going to do

00:27:40,440 --> 00:27:44,790
now is we're going to go show you the

00:27:42,380 --> 00:27:47,400
configuration page for this base type

00:27:44,790 --> 00:27:49,110
and you'll see all of the things that

00:27:47,400 --> 00:27:51,360
you can organize your features by and

00:27:49,110 --> 00:27:53,850
there is content type selected you can

00:27:51,360 --> 00:27:56,520
select more than one you can select

00:27:53,850 --> 00:27:58,860
views if you want honestly you can get

00:27:56,520 --> 00:28:00,240
really weird looking stuff by checking

00:27:58,860 --> 00:28:01,350
all sorts of different boxes there so

00:28:00,240 --> 00:28:03,840
it's not something you're probably going

00:28:01,350 --> 00:28:05,550
to typically do most of the time your

00:28:03,840 --> 00:28:06,390
bundle has a name in this case let's say

00:28:05,550 --> 00:28:08,970
we're going to work on open atrium

00:28:06,390 --> 00:28:11,130
features you give it a name you give it

00:28:08,970 --> 00:28:13,440
a machine name in this case we want a

00:28:11,130 --> 00:28:15,180
way to be the prefix now all of our

00:28:13,440 --> 00:28:18,750
feature modules are going to get name

00:28:15,180 --> 00:28:20,330
space with OA underscore so we'll go

00:28:18,750 --> 00:28:23,190
ahead and we'll create this bundle and

00:28:20,330 --> 00:28:25,230
now back on our main page when we list

00:28:23,190 --> 00:28:26,580
list our features it's going to show us

00:28:25,230 --> 00:28:28,260
all the features within the atrium

00:28:26,580 --> 00:28:30,120
bundle and then it's going to show us

00:28:28,260 --> 00:28:33,300
down below all the stuff that's not yet

00:28:30,120 --> 00:28:35,310
exported so if we want to put article

00:28:33,300 --> 00:28:37,350
and page into our atrium bundle we can

00:28:35,310 --> 00:28:39,810
just select them click the right button

00:28:37,350 --> 00:28:41,370
and now you can see we've created two

00:28:39,810 --> 00:28:45,180
new modules we have Oh a underscore

00:28:41,370 --> 00:28:47,190
article and OA underscore page we can go

00:28:45,180 --> 00:28:49,470
look at all bundles by selecting none

00:28:47,190 --> 00:28:51,720
here and now we'll see those two plus

00:28:49,470 --> 00:28:54,090
our original my image now let's say we

00:28:51,720 --> 00:28:56,160
want to put my image into this bundle we

00:28:54,090 --> 00:28:58,320
just click on my image we go down to the

00:28:56,160 --> 00:29:01,260
bundle field we select open atrium and

00:28:58,320 --> 00:29:03,900
the notice it tells you it's going to

00:29:01,260 --> 00:29:05,610
prefix this with OA underscore we can

00:29:03,900 --> 00:29:07,760
just write this out and now we'll have a

00:29:05,610 --> 00:29:11,100
new copy of the module called OA

00:29:07,760 --> 00:29:13,800
underscore my image so if we go back now

00:29:11,100 --> 00:29:15,520
to our features page you can see it says

00:29:13,800 --> 00:29:16,900
that this conflicts

00:29:15,520 --> 00:29:18,970
so we're currently looking at the atrium

00:29:16,900 --> 00:29:21,790
bundle if we expand this to look at all

00:29:18,970 --> 00:29:23,650
the features on our site we can see that

00:29:21,790 --> 00:29:25,990
we actually have two copies of my image

00:29:23,650 --> 00:29:29,380
module now we have the mayan certain we

00:29:25,990 --> 00:29:30,850
have the OA mi image so that's why it

00:29:29,380 --> 00:29:32,710
conflicts you've got two modules with

00:29:30,850 --> 00:29:35,350
the same config so let's just remove the

00:29:32,710 --> 00:29:45,850
old one just remove my image refresh the

00:29:35,350 --> 00:29:48,340
page and now our conflict is gone now it

00:29:45,850 --> 00:29:50,470
knows that stuff is in the Oh a bundle

00:29:48,340 --> 00:29:53,470
just because of the the prefix on it as

00:29:50,470 --> 00:29:54,730
well so let's talk about this for a

00:29:53,470 --> 00:29:56,020
second what it just did there is

00:29:54,730 --> 00:29:58,270
actually kind of interesting if you used

00:29:56,020 --> 00:30:01,810
to d7 how many people have tried to make

00:29:58,270 --> 00:30:04,630
a copy of a feature module in d7 right

00:30:01,810 --> 00:30:05,860
how many renames do you have to do to do

00:30:04,630 --> 00:30:07,330
that right you have to change the

00:30:05,860 --> 00:30:09,100
filenames but then you have to actually

00:30:07,330 --> 00:30:10,960
edit every file because there's all

00:30:09,100 --> 00:30:12,550
these hooks in these module names and

00:30:10,960 --> 00:30:15,970
you have to go edit all the module names

00:30:12,550 --> 00:30:18,430
right it's a huge pain here we just made

00:30:15,970 --> 00:30:20,980
a copy with like a couple clicks so

00:30:18,430 --> 00:30:23,560
features lets you make copies of modules

00:30:20,980 --> 00:30:24,820
with conflicting configuration again not

00:30:23,560 --> 00:30:26,710
something CM eyes don't like I'll let

00:30:24,820 --> 00:30:28,360
you do features lets you do it because

00:30:26,710 --> 00:30:30,340
it knows that's just a temporary thing

00:30:28,360 --> 00:30:32,080
you want to do it as a developer you

00:30:30,340 --> 00:30:34,060
don't want it to get in your way you're

00:30:32,080 --> 00:30:35,680
going to remove the duplicates hopefully

00:30:34,060 --> 00:30:36,760
when you're done but it's going to let

00:30:35,680 --> 00:30:39,760
you in the meantime you have that

00:30:36,760 --> 00:30:42,250
conflict so really easy to copy stuff

00:30:39,760 --> 00:30:46,920
now between namespaces and move things

00:30:42,250 --> 00:30:49,810
around so what makes a module a feature

00:30:46,920 --> 00:30:52,870
like let's look at this this my image

00:30:49,810 --> 00:30:54,850
you know let's go look at the code so in

00:30:52,870 --> 00:30:56,910
the my image module there's this yellow

00:30:54,850 --> 00:30:59,500
file and you can see it wrote features

00:30:56,910 --> 00:31:02,460
into that if I just remove that features

00:30:59,500 --> 00:31:04,690
key and then refresh the page it's gone

00:31:02,460 --> 00:31:06,490
it's still on the site it's still a

00:31:04,690 --> 00:31:08,620
module on your site it's no longer

00:31:06,490 --> 00:31:11,110
considered a feature it's just a regular

00:31:08,620 --> 00:31:14,530
old module if I go back and I just say

00:31:11,110 --> 00:31:16,300
features true that marks this module as

00:31:14,530 --> 00:31:17,950
a feature that's all you have to do so

00:31:16,300 --> 00:31:19,990
you can take an existing module if you

00:31:17,950 --> 00:31:21,940
want and mark it as a feature there's no

00:31:19,990 --> 00:31:24,820
magic there it's just a key in your

00:31:21,940 --> 00:31:27,389
llamo file now it actually knows this is

00:31:24,820 --> 00:31:29,999
in the atrium bundle because it's it

00:31:27,389 --> 00:31:31,679
Co a prefix so if you want to actually

00:31:29,999 --> 00:31:33,989
be more correct instead of just sing

00:31:31,679 --> 00:31:35,700
true you would actually specify what

00:31:33,989 --> 00:31:37,919
your bundle is so you would say bundle

00:31:35,700 --> 00:31:41,039
OA and then that ensures that things

00:31:37,919 --> 00:31:43,079
don't get confused in the future but

00:31:41,039 --> 00:31:44,369
that's all there is to it for for the

00:31:43,079 --> 00:31:46,769
difference between a module and feature

00:31:44,369 --> 00:31:48,299
now it's that one key no longer like

00:31:46,769 --> 00:31:50,339
indie 7 again if you look at your dot

00:31:48,299 --> 00:31:52,079
info file there's a bunch of stuff in

00:31:50,339 --> 00:31:54,629
there it has to tell you all the things

00:31:52,079 --> 00:31:56,159
that get exported in d8 we don't have to

00:31:54,629 --> 00:31:58,789
do that anymore because all that stuff

00:31:56,159 --> 00:32:04,489
is in the sea upon C mi llamo file a

00:31:58,789 --> 00:32:06,389
directory let's briefly look at drush

00:32:04,489 --> 00:32:08,039
we've tried to maintain some

00:32:06,389 --> 00:32:11,129
compatibility so all your favorite dress

00:32:08,039 --> 00:32:13,200
commands still exist so drush FL shows

00:32:11,129 --> 00:32:15,299
you your feature list it shows you that

00:32:13,200 --> 00:32:17,519
things are changed so it doesn't say

00:32:15,299 --> 00:32:20,279
overridden anymore just has changed it's

00:32:17,519 --> 00:32:22,200
a little bit less geeky we can look at a

00:32:20,279 --> 00:32:24,749
specific feature there and we can see

00:32:22,200 --> 00:32:26,820
all the config that's in it we can look

00:32:24,749 --> 00:32:29,190
at the difference so FB is featured

00:32:26,820 --> 00:32:31,619
difference and just like in d7 it shows

00:32:29,190 --> 00:32:34,979
us that our titles different so if we

00:32:31,619 --> 00:32:37,589
want to import the code we can say FIM

00:32:34,979 --> 00:32:40,709
for feature import and that would

00:32:37,589 --> 00:32:46,589
overwrite the view change or if we want

00:32:40,709 --> 00:32:48,719
to export we can do Fe X and that would

00:32:46,589 --> 00:32:52,049
export the change back to code so just

00:32:48,719 --> 00:32:54,539
like the UI so again going back to our

00:32:52,049 --> 00:32:56,639
feature difference I've maintain

00:32:54,539 --> 00:32:58,229
compatibility with the old commands so

00:32:56,639 --> 00:33:00,539
if you want if your if your fingers are

00:32:58,229 --> 00:33:02,820
used to typing feature revert fr is

00:33:00,539 --> 00:33:05,399
still there because of course we had to

00:33:02,820 --> 00:33:09,779
keep fu so fu is still there and of

00:33:05,399 --> 00:33:11,999
course fu all is still there we also

00:33:09,779 --> 00:33:13,320
have FC still there so FC is feature

00:33:11,999 --> 00:33:15,719
component this shows you all the

00:33:13,320 --> 00:33:17,279
components that you can export so here

00:33:15,719 --> 00:33:21,119
I've shown all the views I can export

00:33:17,279 --> 00:33:22,739
and then feature ad is drush fa so i can

00:33:21,119 --> 00:33:24,599
say feature ad give it the name of the

00:33:22,739 --> 00:33:26,909
feature give it a component so here i

00:33:24,599 --> 00:33:29,579
just added a new view to my feature and

00:33:26,909 --> 00:33:31,919
if I list that feature there's the who's

00:33:29,579 --> 00:33:33,809
online view that's been added if I go

00:33:31,919 --> 00:33:35,810
look at the directory there's the who's

00:33:33,809 --> 00:33:38,960
online the mo file that's part

00:33:35,810 --> 00:33:40,430
my part of my feature and if I want to

00:33:38,960 --> 00:33:42,010
remove it from the feature I just delete

00:33:40,430 --> 00:33:44,390
the llamo file it's as simple as that

00:33:42,010 --> 00:33:46,760
and if I now do a feature list you can

00:33:44,390 --> 00:33:48,830
see that who's online view is gone for

00:33:46,760 --> 00:33:50,560
the feature so it's not there's not a

00:33:48,830 --> 00:33:52,880
lot of magic going on in d8

00:33:50,560 --> 00:33:55,280
configuration is in the ammo files being

00:33:52,880 --> 00:33:57,020
controlled by cmi and features is really

00:33:55,280 --> 00:33:59,270
just manipulating those llamo files for

00:33:57,020 --> 00:34:00,830
you but you can also go delete them and

00:33:59,270 --> 00:34:05,030
create them yourself edit them yourself

00:34:00,830 --> 00:34:07,130
if you want to do that so that's the

00:34:05,030 --> 00:34:11,900
demo part let's talk a little bit about

00:34:07,130 --> 00:34:14,060
some future stuff so overriding so you

00:34:11,900 --> 00:34:16,370
can see as I said we've changed it from

00:34:14,060 --> 00:34:19,550
saying overrides to changed which again

00:34:16,370 --> 00:34:22,850
is consistent with what cmi is doing you

00:34:19,550 --> 00:34:24,170
still need to be able to save overrides

00:34:22,850 --> 00:34:25,880
you know we're still going to have the

00:34:24,170 --> 00:34:27,950
problem in d8 that we have in d7 right

00:34:25,880 --> 00:34:30,080
now of let's say we've got open atrium

00:34:27,950 --> 00:34:32,180
and d 8 and you want to change something

00:34:30,080 --> 00:34:34,790
that open atrium does it's in a feature

00:34:32,180 --> 00:34:37,220
now your features marked as changed and

00:34:34,790 --> 00:34:38,810
when you you know upgrade open atrium

00:34:37,220 --> 00:34:40,700
your change is going to get lost you

00:34:38,810 --> 00:34:42,410
have to save that change somewhere how

00:34:40,700 --> 00:34:45,590
do you save that so that's the features

00:34:42,410 --> 00:34:48,110
override module in d8d seven so we don't

00:34:45,590 --> 00:34:50,020
have that yet in d 8 there's a ride

00:34:48,110 --> 00:34:52,160
variety of ways to work around that

00:34:50,020 --> 00:34:54,110
there's a module which is another one

00:34:52,160 --> 00:34:56,330
that Ned Joe's module is actually called

00:34:54,110 --> 00:34:58,490
config synchronizer what that one does

00:34:56,330 --> 00:35:00,380
is it kind of monitors your config in

00:34:58,490 --> 00:35:02,510
the background and whenever somebody

00:35:00,380 --> 00:35:06,950
changes it it kind of marks that feature

00:35:02,510 --> 00:35:09,170
as as unsafe to revert you know it will

00:35:06,950 --> 00:35:11,330
help stop you from overriding a client

00:35:09,170 --> 00:35:13,610
change basically so with this module

00:35:11,330 --> 00:35:15,650
turned on you could actually write an

00:35:13,610 --> 00:35:16,880
auto update that every time you install

00:35:15,650 --> 00:35:19,010
a new version of the module it could

00:35:16,880 --> 00:35:20,930
automatically import it if it's safe and

00:35:19,010 --> 00:35:24,290
it would know if things have changed or

00:35:20,930 --> 00:35:26,210
not that's one way around it you can

00:35:24,290 --> 00:35:27,740
implement if you want in your module if

00:35:26,210 --> 00:35:30,080
you're a developer geek you can

00:35:27,740 --> 00:35:32,900
implement the config factory overwrite

00:35:30,080 --> 00:35:34,730
interface what your kind of recommended

00:35:32,900 --> 00:35:36,650
solution is is the same as it was in the

00:35:34,730 --> 00:35:38,900
seven without features override which is

00:35:36,650 --> 00:35:41,600
to do all of your changes in update

00:35:38,900 --> 00:35:43,160
hooks but you know update hooks that

00:35:41,600 --> 00:35:45,080
requires development knowledge and so

00:35:43,160 --> 00:35:46,700
forth so I think there still a problem

00:35:45,080 --> 00:35:48,230
to be solved here it's something I'm

00:35:46,700 --> 00:35:48,510
still very interested in because I'm

00:35:48,230 --> 00:35:49,680
work

00:35:48,510 --> 00:35:51,570
things like a tree and where this is

00:35:49,680 --> 00:35:53,400
going to be an issue what we're going to

00:35:51,570 --> 00:35:55,260
try to do and feel free to talk to me

00:35:53,400 --> 00:35:57,240
after or at the con if you have some

00:35:55,260 --> 00:36:00,000
ideas around this what we're looking at

00:35:57,240 --> 00:36:02,550
is doing something of merging partial

00:36:00,000 --> 00:36:04,620
yamo files something for example we're

00:36:02,550 --> 00:36:07,200
in the update process it could look in a

00:36:04,620 --> 00:36:09,750
certain update directory find a partial

00:36:07,200 --> 00:36:12,390
llamo file with for example just the

00:36:09,750 --> 00:36:14,160
title of a view merge that in with the

00:36:12,390 --> 00:36:16,920
active configuration to make that one

00:36:14,160 --> 00:36:18,330
change so that you can you know save

00:36:16,920 --> 00:36:21,180
these things where you're just changing

00:36:18,330 --> 00:36:23,610
one little thing as overrides so that's

00:36:21,180 --> 00:36:25,500
something coming something that happened

00:36:23,610 --> 00:36:27,870
this summer some brand new functionality

00:36:25,500 --> 00:36:30,000
got added to d8 called optional

00:36:27,870 --> 00:36:34,470
configuration and this is fairly

00:36:30,000 --> 00:36:37,860
interesting in normal Drupal if you have

00:36:34,470 --> 00:36:39,510
a module that say adds of you in order

00:36:37,860 --> 00:36:41,430
to enable that module you have to first

00:36:39,510 --> 00:36:42,900
enable the views module because

00:36:41,430 --> 00:36:45,210
otherwise you have a dependency that's

00:36:42,900 --> 00:36:47,490
not met what if you want to make that

00:36:45,210 --> 00:36:50,250
optional like maybe the view is just a

00:36:47,490 --> 00:36:51,600
little side feature of your module you

00:36:50,250 --> 00:36:53,490
want it to be there if they're using

00:36:51,600 --> 00:36:54,960
views but you know your module provides

00:36:53,490 --> 00:36:56,610
some other functionality and you don't

00:36:54,960 --> 00:36:59,220
want to be blocked by that by that

00:36:56,610 --> 00:37:01,140
dependency so now in d8 you can mark

00:36:59,220 --> 00:37:03,510
something as optional config you put it

00:37:01,140 --> 00:37:06,360
in you put the yamo file into the config

00:37:03,510 --> 00:37:08,550
/ optional directory and so let's say

00:37:06,360 --> 00:37:09,900
you have a view if views is not

00:37:08,550 --> 00:37:11,430
installed which of course doesn't make a

00:37:09,900 --> 00:37:13,380
whole lot of sense in d8 because it's

00:37:11,430 --> 00:37:16,020
part of core but let's just for example

00:37:13,380 --> 00:37:18,240
say that it's not it will still let you

00:37:16,020 --> 00:37:20,730
enable your module and then when views

00:37:18,240 --> 00:37:22,590
is enabled it will magically go back and

00:37:20,730 --> 00:37:24,720
say hey this module over here has a view

00:37:22,590 --> 00:37:26,880
I just enabled views let's enable this

00:37:24,720 --> 00:37:29,940
module so it lets you kind of do stuff

00:37:26,880 --> 00:37:31,110
in any order now for dependencies so

00:37:29,940 --> 00:37:33,480
there's some really cool stuff you can

00:37:31,110 --> 00:37:35,940
do with that what we want to do is add

00:37:33,480 --> 00:37:38,460
that functionality to features where

00:37:35,940 --> 00:37:44,610
there's a user interface that allows you

00:37:38,460 --> 00:37:49,170
to mark configuration as optional excuse

00:37:44,610 --> 00:37:51,720
me so right now everything goes in as a

00:37:49,170 --> 00:37:53,550
normal dependency we'd like some way to

00:37:51,720 --> 00:38:00,510
be able to change that so that's coming

00:37:53,550 --> 00:38:01,840
soon I want to segue just for a couple

00:38:00,510 --> 00:38:04,270
slides on da

00:38:01,840 --> 00:38:06,580
actually and and now that we've heard

00:38:04,270 --> 00:38:09,850
from dreese is it's coming like in two

00:38:06,580 --> 00:38:12,670
weeks I think this is very exciting this

00:38:09,850 --> 00:38:16,240
was my really first dip into the da pool

00:38:12,670 --> 00:38:18,400
I worked on this back in April phase two

00:38:16,240 --> 00:38:20,650
the company i work for was actually very

00:38:18,400 --> 00:38:22,210
generous and they essentially donated a

00:38:20,650 --> 00:38:24,580
month of my time to work on features

00:38:22,210 --> 00:38:25,990
because i told our CEO Jeff yeah I'll

00:38:24,580 --> 00:38:29,740
take about a month and so he said okay

00:38:25,990 --> 00:38:32,020
go do it for a month what I found was d8

00:38:29,740 --> 00:38:34,810
was actually really fun it was really

00:38:32,020 --> 00:38:36,400
refreshing compared to d7 now I've got a

00:38:34,810 --> 00:38:37,960
background in object-oriented

00:38:36,400 --> 00:38:39,910
programming so I know what MVC

00:38:37,960 --> 00:38:41,950
frameworks and stuff are but I'd never

00:38:39,910 --> 00:38:44,140
looked at a in the d8 core code before I

00:38:41,950 --> 00:38:45,820
didn't get involved in core it took

00:38:44,140 --> 00:38:47,230
about a week to really kind of get the

00:38:45,820 --> 00:38:49,480
lay of the land and figure out where

00:38:47,230 --> 00:38:51,970
configuration was stored and how things

00:38:49,480 --> 00:38:55,540
worked reading a lot of stuff online

00:38:51,970 --> 00:38:58,600
went to 10 Larry Garfield sessions on d8

00:38:55,540 --> 00:39:01,540
development which I highly recommend so

00:38:58,600 --> 00:39:03,580
about a week of learning and then a

00:39:01,540 --> 00:39:06,250
total of three more weeks later so four

00:39:03,580 --> 00:39:09,510
weeks total and features alpha one was

00:39:06,250 --> 00:39:12,850
done and it was pretty much from scratch

00:39:09,510 --> 00:39:15,760
so for a module like features which is

00:39:12,850 --> 00:39:18,880
really if you've looked at it in d 7

00:39:15,760 --> 00:39:21,220
it's not an easy module that was pretty

00:39:18,880 --> 00:39:22,690
good I thought so you know if you've if

00:39:21,220 --> 00:39:25,030
you've been out there waiting especially

00:39:22,690 --> 00:39:26,680
if you've got a module in d 7 this is a

00:39:25,030 --> 00:39:28,930
really good time to start looking at

00:39:26,680 --> 00:39:31,480
porting that module to d8 and don't just

00:39:28,930 --> 00:39:34,180
look at it as a line-by-line port or or

00:39:31,480 --> 00:39:35,470
you know function by function port take

00:39:34,180 --> 00:39:38,740
a look at some of the new stuff in there

00:39:35,470 --> 00:39:42,750
a lot of stuff is different but it will

00:39:38,740 --> 00:39:42,750
make your code a lot easier to maintain

00:39:44,730 --> 00:39:50,950
these are some stats for people to love

00:39:47,440 --> 00:39:54,580
the little pie charts and graphs so in

00:39:50,950 --> 00:39:56,500
the top one in blue is the Drupal 8

00:39:54,580 --> 00:39:58,840
version in red is the Drupal 7 version

00:39:56,500 --> 00:40:00,360
so yes and you can see in red there's

00:39:58,840 --> 00:40:02,950
this huge spike on the right which is

00:40:00,360 --> 00:40:04,930
essentially implementing cmi and d7

00:40:02,950 --> 00:40:06,940
which is what features had to do and

00:40:04,930 --> 00:40:08,440
that's gone there's no blue line for

00:40:06,940 --> 00:40:10,660
that because it's built into drupal now

00:40:08,440 --> 00:40:12,160
what we replaced all that work with in

00:40:10,660 --> 00:40:13,390
blue is some of the new stuff like the

00:40:12,160 --> 00:40:14,690
new plugins stuff and the new

00:40:13,390 --> 00:40:17,060
assignments in the new button

00:40:14,690 --> 00:40:18,520
so we we basically ended up with the

00:40:17,060 --> 00:40:20,569
same number of lions when we were done

00:40:18,520 --> 00:40:23,119
but all the stuff we got rid of we

00:40:20,569 --> 00:40:25,160
replaced by new functionality what was

00:40:23,119 --> 00:40:28,730
interesting is we were able to reuse

00:40:25,160 --> 00:40:30,140
almost verbatim the user interface so

00:40:28,730 --> 00:40:32,480
you'll notice in d8 the user interface

00:40:30,140 --> 00:40:34,819
looks really familiar you know it works

00:40:32,480 --> 00:40:37,010
just like in d7 it's because we were

00:40:34,819 --> 00:40:39,020
able to reuse all the JavaScript and all

00:40:37,010 --> 00:40:41,119
the form API stuff came over with very

00:40:39,020 --> 00:40:42,890
little change so if you've got a module

00:40:41,119 --> 00:40:44,750
that's more you I based in more of a

00:40:42,890 --> 00:40:47,240
forms based module you're going to have

00:40:44,750 --> 00:40:48,619
a pretty easy time at it and then of

00:40:47,240 --> 00:40:50,630
course we had to config packager

00:40:48,619 --> 00:40:52,310
providing a lot of the core code and

00:40:50,630 --> 00:40:55,220
then I wrote a bunch of new code to make

00:40:52,310 --> 00:40:57,470
it all work together so it was a very

00:40:55,220 --> 00:41:00,710
fun project highly recommend getting

00:40:57,470 --> 00:41:03,800
involved in d eight so we talked about

00:41:00,710 --> 00:41:06,140
let's just summarize so d 8 or features

00:41:03,800 --> 00:41:08,020
we're violating a couple cmi rules and

00:41:06,140 --> 00:41:10,190
features if you have features turned on

00:41:08,020 --> 00:41:11,569
and i mentioned if you have a module

00:41:10,190 --> 00:41:13,640
marked as a feature it's going to let

00:41:11,569 --> 00:41:16,190
you enable that even if it has existing

00:41:13,640 --> 00:41:17,990
config it allows you to have duplicate

00:41:16,190 --> 00:41:19,880
config across multiple modules so you

00:41:17,990 --> 00:41:21,740
can make copies but that's only

00:41:19,880 --> 00:41:24,680
temporary so those are the two things

00:41:21,740 --> 00:41:28,849
that are kind of cmi rules that features

00:41:24,680 --> 00:41:31,880
needed to work around and then of course

00:41:28,849 --> 00:41:34,069
you can import you know your your module

00:41:31,880 --> 00:41:36,109
config is no longer just your initial

00:41:34,069 --> 00:41:38,390
config you've got that import function

00:41:36,109 --> 00:41:42,410
now so you can overwrite with new

00:41:38,390 --> 00:41:44,089
changes so we're now using features the

00:41:42,410 --> 00:41:47,300
way it was intended to bundle

00:41:44,089 --> 00:41:48,829
functionality into reusable modules it's

00:41:47,300 --> 00:41:51,560
a development module you don't need a

00:41:48,829 --> 00:41:53,180
non-production has some new

00:41:51,560 --> 00:41:54,950
functionality that's kind of cool for

00:41:53,180 --> 00:41:59,720
suggesting features and auto creating

00:41:54,950 --> 00:42:01,310
features and palak cmi it just works so

00:41:59,720 --> 00:42:04,310
if you want to get involved we're

00:42:01,310 --> 00:42:09,140
currently in alpha 3 i push this about a

00:42:04,310 --> 00:42:11,569
week ago for beta 15 of d8 i expect a

00:42:09,140 --> 00:42:14,510
new are they going to do a new beta

00:42:11,569 --> 00:42:15,890
before rc1 probably who knows if there's

00:42:14,510 --> 00:42:17,930
a new version will keep this updated

00:42:15,890 --> 00:42:20,990
there have been some changes going on in

00:42:17,930 --> 00:42:22,520
core and reese referred to them as kind

00:42:20,990 --> 00:42:24,560
of the single big issue that's left in

00:42:22,520 --> 00:42:25,319
terms of some of the for the developer

00:42:24,560 --> 00:42:27,719
dies on the

00:42:25,319 --> 00:42:29,519
room some of the safe markup stuff I've

00:42:27,719 --> 00:42:32,029
had to kind of update features to keep

00:42:29,519 --> 00:42:34,829
up with that so there will be updates

00:42:32,029 --> 00:42:37,769
what we're waiting on so I review the

00:42:34,829 --> 00:42:40,859
code make suggestions if you really want

00:42:37,769 --> 00:42:42,569
to help help us with testing there is an

00:42:40,859 --> 00:42:44,670
issue that i posted here which is kind

00:42:42,569 --> 00:42:46,859
of the meta issue for the automated

00:42:44,670 --> 00:42:48,390
testing of features that's a beta

00:42:46,859 --> 00:42:51,029
blocker i'm not going to release a beta

00:42:48,390 --> 00:42:52,469
version without automated testing I'm

00:42:51,029 --> 00:42:54,329
not the greatest guy when it comes to

00:42:52,469 --> 00:42:56,489
automated tests so I would love for some

00:42:54,329 --> 00:42:58,319
help on that that will get us pushed to

00:42:56,489 --> 00:43:01,109
Bay the status once we're in beta status

00:42:58,319 --> 00:43:04,499
then we'll be able to preserve any kind

00:43:01,109 --> 00:43:06,420
of compatibility as we move forward in

00:43:04,499 --> 00:43:07,829
the Drupal chain which is also what RC

00:43:06,420 --> 00:43:10,109
is going to give us in d 8 by the way

00:43:07,829 --> 00:43:11,759
what the reason why RC one is so

00:43:10,109 --> 00:43:13,890
important is it's going to give us

00:43:11,759 --> 00:43:15,779
upgrade paths from RC one Darcy to and

00:43:13,890 --> 00:43:17,880
RC three if you've been playing in the

00:43:15,779 --> 00:43:19,920
beta world d 8 every time I beta comes

00:43:17,880 --> 00:43:24,449
out you're kind of on your own for for

00:43:19,920 --> 00:43:26,219
doing updates so help if you can and now

00:43:24,449 --> 00:43:29,309
we can finally you know stop hating

00:43:26,219 --> 00:43:32,729
features and start loving Drupal 8 if

00:43:29,309 --> 00:43:34,769
you want to learn more Alex who's the

00:43:32,729 --> 00:43:37,319
current lead of the cmi team he's going

00:43:34,769 --> 00:43:43,079
to go into a deep dot of configuration

00:43:37,319 --> 00:43:44,940
management on Wednesday there was a

00:43:43,079 --> 00:43:47,160
great talk on configure some deployment

00:43:44,940 --> 00:43:48,599
that's already happened but I didn't

00:43:47,160 --> 00:43:50,369
know that until I updated the slides

00:43:48,599 --> 00:43:52,309
this morning but you'll be able to find

00:43:50,369 --> 00:43:54,630
that video online if you want to go see

00:43:52,309 --> 00:43:55,829
deployment so that talks about really

00:43:54,630 --> 00:43:57,959
how you deploy if you're really

00:43:55,829 --> 00:43:59,369
interesting and interested in you know

00:43:57,959 --> 00:44:01,769
how do you go from dev to the stage to

00:43:59,369 --> 00:44:03,599
prod now that we're not using features

00:44:01,769 --> 00:44:06,569
for that we're using cmi for that that's

00:44:03,599 --> 00:44:08,609
the talk you want and go to d eight

00:44:06,569 --> 00:44:12,749
sessions learn about d8 start using d8

00:44:08,609 --> 00:44:14,459
it's it's time for d8 so with that open

00:44:12,749 --> 00:44:16,680
it up for questions and for questions

00:44:14,459 --> 00:44:18,890
there's a mic back there or I can repeat

00:44:16,680 --> 00:44:18,890
things

00:44:28,980 --> 00:44:33,880
thanks for your introduction into

00:44:31,539 --> 00:44:36,369
features because to be honest I was

00:44:33,880 --> 00:44:38,980
always asking myself why do we still

00:44:36,369 --> 00:44:42,039
need features for Drupal 8 now I didn't

00:44:38,980 --> 00:44:45,369
know more and I see why might be better

00:44:42,039 --> 00:44:49,420
than just the having cmi purely my

00:44:45,369 --> 00:44:51,519
question is on man first of all I want

00:44:49,420 --> 00:44:53,559
to invite you to join my session on

00:44:51,519 --> 00:44:56,230
Thursday where I talk about the

00:44:53,559 --> 00:45:00,160
experiences we had we made while

00:44:56,230 --> 00:45:03,609
developing distributions and I will tell

00:45:00,160 --> 00:45:06,400
you why we think feature I only talked

00:45:03,609 --> 00:45:08,589
about Drupal 7 and i will tell you

00:45:06,400 --> 00:45:10,749
mainly that building a distribution that

00:45:08,589 --> 00:45:13,150
should be a base for somebody else to

00:45:10,749 --> 00:45:15,220
start his project on you should not use

00:45:13,150 --> 00:45:17,470
features because then that other person

00:45:15,220 --> 00:45:20,410
has a really hard time overriding I know

00:45:17,470 --> 00:45:23,829
their stuff like f tools unlink in those

00:45:20,410 --> 00:45:27,759
features all right but they in very

00:45:23,829 --> 00:45:31,869
complex projects they don't work out so

00:45:27,759 --> 00:45:35,109
nice so I suggest some solution that we

00:45:31,869 --> 00:45:38,739
have on Thursday and I was hoping that

00:45:35,109 --> 00:45:41,589
when I when I when I visit your session

00:45:38,739 --> 00:45:44,380
today I could give them outlook on how

00:45:41,589 --> 00:45:47,349
it would be on Drupal 8 but now I don't

00:45:44,380 --> 00:45:49,989
feel it would solve that problem that

00:45:47,349 --> 00:45:52,720
when there is a feature you can override

00:45:49,989 --> 00:45:54,400
much yeah so yeah just a respond i mean

00:45:52,720 --> 00:45:56,079
i do the open atrium distribution which

00:45:54,400 --> 00:45:58,059
is one of the largest distributions with

00:45:56,079 --> 00:45:59,460
drupal and i think you can use features

00:45:58,059 --> 00:46:01,809
actually we use them all the time

00:45:59,460 --> 00:46:04,210
because features override as a module

00:46:01,809 --> 00:46:06,069
does mostly work it's it's got similar

00:46:04,210 --> 00:46:08,259
caveats to features and that it depends

00:46:06,069 --> 00:46:10,299
upon a lot of modules to support it

00:46:08,259 --> 00:46:11,980
properly and so and there's some that

00:46:10,299 --> 00:46:13,779
don't like you nope analyzer doesn't

00:46:11,980 --> 00:46:14,710
really support very well what you just

00:46:13,779 --> 00:46:16,509
have to be careful of in your

00:46:14,710 --> 00:46:18,789
distribution is your distribution can

00:46:16,509 --> 00:46:21,369
use features your distribution can't use

00:46:18,789 --> 00:46:23,019
features override in atrium that's

00:46:21,369 --> 00:46:25,269
particularly an issue because atrium is

00:46:23,019 --> 00:46:27,730
built on monopoly and probably has

00:46:25,269 --> 00:46:29,980
features and so in atrium we want to

00:46:27,730 --> 00:46:31,690
override the panoply feature but then

00:46:29,980 --> 00:46:34,569
people can't override re-train features

00:46:31,690 --> 00:46:36,970
so you know it can get complicated but

00:46:34,569 --> 00:46:38,370
but it can it can work it just it does

00:46:36,970 --> 00:46:39,600
take effort

00:46:38,370 --> 00:46:41,400
to make it work I think it's going to be

00:46:39,600 --> 00:46:44,580
a lot easier in d8 we're looking forward

00:46:41,400 --> 00:46:47,100
to partying atrium to d8 here in the

00:46:44,580 --> 00:46:49,050
coming months and i think you know

00:46:47,100 --> 00:46:51,390
features was a blocker actually if you

00:46:49,050 --> 00:46:53,070
talk to the panoply people as well they

00:46:51,390 --> 00:46:55,080
couldn't release properly on d8 without

00:46:53,070 --> 00:46:56,790
the new features atrium is the same way

00:46:55,080 --> 00:46:59,010
so so distributions are still going to

00:46:56,790 --> 00:47:01,440
use features even in d 8 I think having

00:46:59,010 --> 00:47:03,810
a cleaner way to do overrides is going

00:47:01,440 --> 00:47:05,250
to be super important and I kind of

00:47:03,810 --> 00:47:06,810
alluded to how I think we're looking at

00:47:05,250 --> 00:47:09,990
doing that with with doing layered

00:47:06,810 --> 00:47:13,020
merging of these llamo files in much

00:47:09,990 --> 00:47:14,250
more kind of a git merge method so so I

00:47:13,020 --> 00:47:15,480
think the future is going to be a little

00:47:14,250 --> 00:47:17,790
better but yeah I'll come to the session

00:47:15,480 --> 00:47:19,590
Thursday integrals a week then I'm

00:47:17,790 --> 00:47:22,260
excited what you have to say about what

00:47:19,590 --> 00:47:23,580
we did in these things cool see there is

00:47:22,260 --> 00:47:31,160
a question over here that I can repeat

00:47:23,580 --> 00:47:31,160
Oh same question Wow miracle yes I

00:47:35,060 --> 00:47:40,350
missed the last part his features ready

00:47:37,670 --> 00:47:41,730
for translated configuration that's a

00:47:40,350 --> 00:47:45,570
really good question especially here in

00:47:41,730 --> 00:47:47,160
Barcelona so the translation stuff in da

00:47:45,570 --> 00:47:49,440
if you if there's a session I think

00:47:47,160 --> 00:47:50,550
right after this on on the translation

00:47:49,440 --> 00:47:52,620
that I highly encourage you to go to

00:47:50,550 --> 00:47:54,420
because that's another chord initiative

00:47:52,620 --> 00:47:57,420
that I think has done a good job and

00:47:54,420 --> 00:47:59,970
done a lot because they worked with cmi

00:47:57,420 --> 00:48:02,580
on that and they did some things in si

00:47:59,970 --> 00:48:04,560
mi successively to support translations

00:48:02,580 --> 00:48:06,300
that should automatically work with

00:48:04,560 --> 00:48:08,460
features because features doesn't need

00:48:06,300 --> 00:48:10,800
to get into it at that low level anymore

00:48:08,460 --> 00:48:13,410
it basically is calling SI mi functions

00:48:10,800 --> 00:48:15,390
so I think we're okay I haven't

00:48:13,410 --> 00:48:16,800
personally tried it yet because I don't

00:48:15,390 --> 00:48:18,410
do a lot of personal translation I'm

00:48:16,800 --> 00:48:20,910
kind of waiting to get feedback on it

00:48:18,410 --> 00:48:22,590
but I'm hoping that's the case now they

00:48:20,910 --> 00:48:24,900
did do some little tricks that

00:48:22,590 --> 00:48:26,460
essentially are like overrides to do

00:48:24,900 --> 00:48:28,710
language specific versions of

00:48:26,460 --> 00:48:31,110
configuration but they didn't do that in

00:48:28,710 --> 00:48:33,120
kind of a generic override mechanism

00:48:31,110 --> 00:48:35,790
that we can reuse for like normal

00:48:33,120 --> 00:48:38,070
overrides so kind of pros and cons of

00:48:35,790 --> 00:48:39,810
that but I think it should just work I

00:48:38,070 --> 00:48:41,330
mean as far as it's ready yeah even

00:48:39,810 --> 00:48:43,560
though it's alpha it's fully functional

00:48:41,330 --> 00:48:44,910
it's just like to say there's no testing

00:48:43,560 --> 00:48:46,710
behind it and stuff like that so it

00:48:44,910 --> 00:48:48,180
might be you know if a new version of

00:48:46,710 --> 00:48:49,950
Drupal comes out it might be a week or

00:48:48,180 --> 00:48:51,480
two before I kind of get in and patch

00:48:49,950 --> 00:48:53,369
so there's you know some potential

00:48:51,480 --> 00:48:54,750
downtime there but since it's just a

00:48:53,369 --> 00:48:58,950
development module you know we started

00:48:54,750 --> 00:49:01,310
care as much right other questions yep

00:48:58,950 --> 00:49:01,310
vector

00:49:18,180 --> 00:49:23,350
so the question to repeat it is you know

00:49:21,010 --> 00:49:24,610
why does cmi give you that exception

00:49:23,350 --> 00:49:26,500
when you try to install a module that

00:49:24,610 --> 00:49:27,850
has existing configuration like why did

00:49:26,500 --> 00:49:29,290
they build it that way I mean that's

00:49:27,850 --> 00:49:32,860
what the issues that i posted are

00:49:29,290 --> 00:49:34,960
discussing as to why they actually made

00:49:32,860 --> 00:49:37,810
it an exception error which for you know

00:49:34,960 --> 00:49:39,370
non-developers is you know you kind of

00:49:37,810 --> 00:49:40,540
worried when you see a general exception

00:49:39,370 --> 00:49:43,060
error when you type address command

00:49:40,540 --> 00:49:44,560
right but yet you have to understand

00:49:43,060 --> 00:49:46,000
that the cmi guys I said in the

00:49:44,560 --> 00:49:47,530
beginning they had a very specific set

00:49:46,000 --> 00:49:50,980
of goals and very specific set of rules

00:49:47,530 --> 00:49:54,160
one of their rules was in d8 the site

00:49:50,980 --> 00:49:55,690
owns the configuration in d7 we're used

00:49:54,160 --> 00:49:57,280
to the modules only in the configuration

00:49:55,690 --> 00:49:59,530
especially when we work with features

00:49:57,280 --> 00:50:01,150
and that takes a little getting used to

00:49:59,530 --> 00:50:03,520
the site owns the configuration the

00:50:01,150 --> 00:50:06,400
configuration that exists in your in

00:50:03,520 --> 00:50:08,260
your Active Directory in your you know

00:50:06,400 --> 00:50:10,210
sites config wherever you tell it to

00:50:08,260 --> 00:50:11,530
store your staging you know that is the

00:50:10,210 --> 00:50:13,090
configuration if you go into one of

00:50:11,530 --> 00:50:15,970
those files and you change the site name

00:50:13,090 --> 00:50:19,360
the site name has changed you know and

00:50:15,970 --> 00:50:20,710
so they didn't want modules to own

00:50:19,360 --> 00:50:22,090
configuration because they were trying

00:50:20,710 --> 00:50:24,940
to get away from this problem of not

00:50:22,090 --> 00:50:26,950
knowing who's in charge you know that's

00:50:24,940 --> 00:50:28,300
why there's no altar hooks to alter

00:50:26,950 --> 00:50:30,130
configuration or any that kind of stuff

00:50:28,300 --> 00:50:32,260
they want you to just have it one place

00:50:30,130 --> 00:50:34,210
so they can do that import/export that

00:50:32,260 --> 00:50:35,770
allowed them to keep cmi really clean

00:50:34,210 --> 00:50:37,540
which is really important when you have

00:50:35,770 --> 00:50:39,460
it in core you wouldn't want something

00:50:37,540 --> 00:50:41,710
like features in core because it's it's

00:50:39,460 --> 00:50:44,950
it's not the fundamental piece that's

00:50:41,710 --> 00:50:47,500
needed there so back to your question

00:50:44,950 --> 00:50:49,750
you know why they went as far as making

00:50:47,500 --> 00:50:51,490
it an exception instead of made least

00:50:49,750 --> 00:50:53,050
you know mainly like they could have

00:50:51,490 --> 00:50:55,240
silently allowed you to enable the

00:50:53,050 --> 00:50:56,530
module and just ignored that config you

00:50:55,240 --> 00:50:58,710
know you can read the issue queue about

00:50:56,530 --> 00:51:00,850
you know why they did it that way I

00:50:58,710 --> 00:51:02,950
personally kind of disagreed with making

00:51:00,850 --> 00:51:05,890
it that level of an exception it could

00:51:02,950 --> 00:51:07,480
have just been informational but again

00:51:05,890 --> 00:51:09,610
they're trying to make it you know

00:51:07,480 --> 00:51:11,770
easier for people that aren't developers

00:51:09,610 --> 00:51:18,370
and aren't doing features to manage

00:51:11,770 --> 00:51:19,510
their site any other questions no great

00:51:18,370 --> 00:51:22,170
well thanks very much for coming have a

00:51:19,510 --> 00:51:29,850
great time in Barcelona

00:51:22,170 --> 00:51:32,400
oh and I should remind you to please

00:51:29,850 --> 00:51:34,740
please rate the session if you go to the

00:51:32,400 --> 00:51:36,660
session page on the website there'll be

00:51:34,740 --> 00:51:38,130
an evaluation button it's really

00:51:36,660 --> 00:51:40,320
important it was actually your

00:51:38,130 --> 00:51:42,360
evaluations from the people that went to

00:51:40,320 --> 00:51:44,040
juba Connie la that got me here is an

00:51:42,360 --> 00:51:46,470
encore for Barcelona so thank you very

00:51:44,040 --> 00:51:49,700
much but yeah please please go rate

00:51:46,470 --> 00:51:49,700

YouTube URL: https://www.youtube.com/watch?v=a6QLTjSFVhs


