Title: DrupalCon Barcelona 2015: Configuration Deployment Best Practices in Drupal 8
Publication date: 2015-09-22
Playlist: DrupalCon Barcelona - September 2015
Description: 
	Configuration Management is a game changer for Drupal development. Understanding how it works helps you to harmonize the moving pieces when designing a code deployment workflow for Drupal 8 sites. This session proposes a full circle workflow for pushing from multiple development environments to staging/QA and finally to production, and then integrating back changes that were made directly on Prod (a Block weight gets changed, a View gets changed, etc.).

The workflow proposes that code and config are stored together in a single git repository. The Drush config-export command is featured in order to update Git when config changes are made. Drush's config-import helps update Drupal's configuration store when a code deployment is pushed. Drush's config-merge (as part of config-extras) helps developers easily collaborate on configuration across multiple active development branches & environments.

Come to this session to learn how to implement a best practice managed workflow for your Drupal 8 projects and embrace Configuration Management in all its glory.
Captions: 
	00:00:00,030 --> 00:00:11,400
alright let's get started alright thanks

00:00:10,440 --> 00:00:13,769
for coming everyone

00:00:11,400 --> 00:00:16,619
this is configuration management on

00:00:13,769 --> 00:00:19,020
manage workflow my name is Moshe

00:00:16,619 --> 00:00:21,900
Weitzman I'm a longtime Drupal

00:00:19,020 --> 00:00:25,010
contributor now working for Acquia as

00:00:21,900 --> 00:00:29,160
the director of research and development

00:00:25,010 --> 00:00:30,929
my co-presenter here Matt Chaney is a

00:00:29,160 --> 00:00:34,649
distinguished at Drupal community member

00:00:30,929 --> 00:00:40,010
for many years and found in chapter 3

00:00:34,649 --> 00:00:43,140
and Pantheon so Matt's gonna kick us off

00:00:40,010 --> 00:00:45,600
awesome everyone it's a great to be here

00:00:43,140 --> 00:00:47,820
as most said my name's Matt Chaney I

00:00:45,600 --> 00:00:49,739
work at Pantheon most works in aqueous

00:00:47,820 --> 00:00:51,899
hopefully that shows you the importance

00:00:49,739 --> 00:00:54,210
and the like really awesomeness to this

00:00:51,899 --> 00:00:56,250
configuration management that I know

00:00:54,210 --> 00:00:57,870
you're all here because hopefully your

00:00:56,250 --> 00:01:00,090
favorite feature in Drupal 8 is

00:00:57,870 --> 00:01:02,100
configuration management it's certainly

00:01:00,090 --> 00:01:03,690
mine it's certainly emotions and we

00:01:02,100 --> 00:01:05,850
think that this is going to bring on a

00:01:03,690 --> 00:01:07,170
sort of new day for developers it's

00:01:05,850 --> 00:01:10,110
going to allow a lot of really awesome

00:01:07,170 --> 00:01:13,320
new things to happen in Drupal and it's

00:01:10,110 --> 00:01:15,710
something that is in fact going to

00:01:13,320 --> 00:01:18,210
happen in about two weeks

00:01:15,710 --> 00:01:20,250
that fusillade Reese's keynote this

00:01:18,210 --> 00:01:23,460
morning I hope you are all there we will

00:01:20,250 --> 00:01:25,830
have an RC one in two weeks time the

00:01:23,460 --> 00:01:27,689
long wait is over we'll have that relief

00:01:25,830 --> 00:01:30,930
candidate and the next time we gather

00:01:27,689 --> 00:01:33,869
together for Drupal con via in Mumbai or

00:01:30,930 --> 00:01:36,090
New Orleans we'll be using the kind of

00:01:33,869 --> 00:01:38,579
technology and techniques that we talked

00:01:36,090 --> 00:01:42,119
about in this presentation on a regular

00:01:38,579 --> 00:01:44,070
basis and that's awesome because this is

00:01:42,119 --> 00:01:44,909
something that for sort of a little bit

00:01:44,070 --> 00:01:47,549
of throat-clearing

00:01:44,909 --> 00:01:49,320
if you had been a Drupal con Amsterdam I

00:01:47,549 --> 00:01:51,990
gave a similar kind of talk on

00:01:49,320 --> 00:01:53,390
configuration management and it was sort

00:01:51,990 --> 00:01:55,979
of like hey it's all happening then

00:01:53,390 --> 00:01:57,540
we've updated this talk of course added

00:01:55,979 --> 00:02:00,329
a little motion magic I had some new

00:01:57,540 --> 00:02:02,430
updates but that you know this is a this

00:02:00,329 --> 00:02:03,840
is my favorite feature of Drupal 8 it's

00:02:02,430 --> 00:02:07,280
all happening and I think it's going to

00:02:03,840 --> 00:02:11,099
create Drupal 8 as a professional and

00:02:07,280 --> 00:02:13,020
really robust content management system

00:02:11,099 --> 00:02:15,330
that fits modern development practices

00:02:13,020 --> 00:02:19,200
and lets you me and everyone in this

00:02:15,330 --> 00:02:20,730
room build really awesome sites so just

00:02:19,200 --> 00:02:21,870
with that I'll sort of put that out

00:02:20,730 --> 00:02:23,760
there this is awesome

00:02:21,870 --> 00:02:25,500
I'm super excited about it I hope you

00:02:23,760 --> 00:02:27,270
are too the goal your press presentation

00:02:25,500 --> 00:02:30,090
is to make you be like variation

00:02:27,270 --> 00:02:33,420
management is awesome I want to use this

00:02:30,090 --> 00:02:35,790
for all my projects right now and it's

00:02:33,420 --> 00:02:38,310
important because configuration

00:02:35,790 --> 00:02:41,430
management solves a sort of problem that

00:02:38,310 --> 00:02:43,800
has existed in Drupal more or less since

00:02:41,430 --> 00:02:45,990
the beginning that we have a world of

00:02:43,800 --> 00:02:48,540
content management system where you

00:02:45,990 --> 00:02:52,080
really have these two different things

00:02:48,540 --> 00:02:54,330
on one hand we have the configuration of

00:02:52,080 --> 00:02:56,670
the website that sort of the feeds and

00:02:54,330 --> 00:03:00,330
speeds that make the website as awesome

00:02:56,670 --> 00:03:02,400
as it is it's the content types that

00:03:00,330 --> 00:03:04,920
define what kind of data we're storing

00:03:02,400 --> 00:03:07,110
it's the image styles that define sort

00:03:04,920 --> 00:03:09,990
of how the graphics will be presented

00:03:07,110 --> 00:03:12,690
the different fields on the data the

00:03:09,990 --> 00:03:15,270
listings of the data and any of the

00:03:12,690 --> 00:03:17,310
settings that you click to make Drupal

00:03:15,270 --> 00:03:19,800
do the kinds of things that you want and

00:03:17,310 --> 00:03:22,050
this is awesome this is actually one of

00:03:19,800 --> 00:03:25,560
the really powerful things about Drupal

00:03:22,050 --> 00:03:27,360
is that we as developers basically can

00:03:25,560 --> 00:03:30,270
click our way and work our way into

00:03:27,360 --> 00:03:31,920
building a pretty awesome site and

00:03:30,270 --> 00:03:33,720
that's the configuration that's done by

00:03:31,920 --> 00:03:35,940
professionals who more or less

00:03:33,720 --> 00:03:40,140
understand Drupal as part of their

00:03:35,940 --> 00:03:42,510
development process on the other hand we

00:03:40,140 --> 00:03:45,540
have the content of the website the blog

00:03:42,510 --> 00:03:48,300
posts the comments the taxonomy terms

00:03:45,540 --> 00:03:51,120
the user profiles these are the things

00:03:48,300 --> 00:03:52,890
that get put in by the end users by the

00:03:51,120 --> 00:03:55,290
people who are using the web sites as

00:03:52,890 --> 00:03:57,690
editors or people who are logging in to

00:03:55,290 --> 00:03:59,220
check it out and this is also a really

00:03:57,690 --> 00:04:01,350
good strength of Drupal this is an

00:03:59,220 --> 00:04:03,300
interactive kind of living website it's

00:04:01,350 --> 00:04:06,900
why a lot of folks choose Drupal as

00:04:03,300 --> 00:04:09,180
their solution and for every individual

00:04:06,900 --> 00:04:11,970
Drupal site we've got that configuration

00:04:09,180 --> 00:04:15,990
that's done by developers and we have

00:04:11,970 --> 00:04:17,609
that content done by end-users and now

00:04:15,990 --> 00:04:19,890
there's a little bit of gray area in the

00:04:17,609 --> 00:04:21,419
middle some things that are config sort

00:04:19,890 --> 00:04:24,030
of our content and vice-versa but

00:04:21,419 --> 00:04:27,060
there's a separation that I hope you all

00:04:24,030 --> 00:04:30,120
can see in this situation

00:04:27,060 --> 00:04:31,889
the the problem though and this gets

00:04:30,120 --> 00:04:34,139
into sort of this talk around manage

00:04:31,889 --> 00:04:36,810
workflow is that when we're building a

00:04:34,139 --> 00:04:39,060
modern website we don't just have one

00:04:36,810 --> 00:04:42,270
version of the site that we add the

00:04:39,060 --> 00:04:44,460
content and edit the code on we have a

00:04:42,270 --> 00:04:46,740
workflow that looks something like this

00:04:44,460 --> 00:04:49,169
I hope this is familiar to folks in the

00:04:46,740 --> 00:04:51,690
room that you are having a development

00:04:49,169 --> 00:04:53,610
environment one or several that you

00:04:51,690 --> 00:04:55,110
actually are gonna write code you're

00:04:53,610 --> 00:04:57,270
gonna do configuration you're gonna

00:04:55,110 --> 00:04:59,700
build the things that people want in

00:04:57,270 --> 00:05:01,590
that environment and then you have a

00:04:59,700 --> 00:05:03,330
live environment which is actually what

00:05:01,590 --> 00:05:05,430
people are seeing on the internet when

00:05:03,330 --> 00:05:06,930
they go to your site and then then you

00:05:05,430 --> 00:05:09,120
have a test environment in the middle

00:05:06,930 --> 00:05:11,460
that sort of looks at you know reviewing

00:05:09,120 --> 00:05:13,800
it before it goes live and as you see

00:05:11,460 --> 00:05:16,230
from sort of the diagram here the code

00:05:13,800 --> 00:05:20,310
which is the red line starts in dev

00:05:16,230 --> 00:05:23,160
moves to test and then to life and then

00:05:20,310 --> 00:05:25,500
the content the stuff that we want sort

00:05:23,160 --> 00:05:28,020
of detest against and work is obviously

00:05:25,500 --> 00:05:31,310
added to live and needs to go back to

00:05:28,020 --> 00:05:33,750
dev and back to test as appropriate and

00:05:31,310 --> 00:05:35,580
this a lot of modern sort of web

00:05:33,750 --> 00:05:38,430
platforms will do something like this

00:05:35,580 --> 00:05:39,690
for us for the content but when they say

00:05:38,430 --> 00:05:43,050
content what they really mean is

00:05:39,690 --> 00:05:44,850
database that if I'm refreshing my dev

00:05:43,050 --> 00:05:49,800
environment that means copying the

00:05:44,850 --> 00:05:52,620
database from live to dev the problem

00:05:49,800 --> 00:05:55,229
here is that the configuration of this

00:05:52,620 --> 00:05:57,780
site is caught up in that content store

00:05:55,229 --> 00:06:01,110
it's in the database right now in Drupal

00:05:57,780 --> 00:06:03,210
seven and this is a sort of a problem

00:06:01,110 --> 00:06:05,669
because Drupal doesn't really care in

00:06:03,210 --> 00:06:08,070
Drupal 7 world about having

00:06:05,669 --> 00:06:10,580
configuration be separated here's a

00:06:08,070 --> 00:06:12,960
bunch of tables from a Drupal 7 site

00:06:10,580 --> 00:06:16,620
some of the tables are configuration

00:06:12,960 --> 00:06:19,710
tables some are content tables and this

00:06:16,620 --> 00:06:23,340
creates a situation where I can't just

00:06:19,710 --> 00:06:25,620
if I want to update my my dev site I

00:06:23,340 --> 00:06:28,440
can't just take all the stuff from live

00:06:25,620 --> 00:06:30,750
because it might overwrite a view that I

00:06:28,440 --> 00:06:34,229
have or overwrite some configuration

00:06:30,750 --> 00:06:36,630
that I've done and this is a problem

00:06:34,229 --> 00:06:39,240
because I want to be able to do all my

00:06:36,630 --> 00:06:40,030
work in dev I want to be able to push it

00:06:39,240 --> 00:06:43,030
to test

00:06:40,030 --> 00:06:45,640
I want to push it to live without having

00:06:43,030 --> 00:06:51,790
to like worry a lot about you know is it

00:06:45,640 --> 00:06:53,950
gonna work etc etc and that luckily we

00:06:51,790 --> 00:06:56,290
do have some solutions to this problem I

00:06:53,950 --> 00:06:57,970
assume most of us in the room who are

00:06:56,290 --> 00:07:01,180
interested in configuration management

00:06:57,970 --> 00:07:04,060
are probably used to using one of these

00:07:01,180 --> 00:07:07,780
two methods right now that we have a

00:07:04,060 --> 00:07:11,200
very powerful function hook update n

00:07:07,780 --> 00:07:14,320
that will allow us when we do updates to

00:07:11,200 --> 00:07:16,540
our site to run any amount of Drupal

00:07:14,320 --> 00:07:19,150
code that we think is appropriate we can

00:07:16,540 --> 00:07:21,790
set configuration we can modify values

00:07:19,150 --> 00:07:23,650
we can do a lot of stuff and that's

00:07:21,790 --> 00:07:26,800
really cool that actually will in fact

00:07:23,650 --> 00:07:28,690
let us put configuration and code I've

00:07:26,800 --> 00:07:30,820
seen some projects that have literally

00:07:28,690 --> 00:07:33,520
thousands of these kind of update hooks

00:07:30,820 --> 00:07:36,430
because they're doing a lot of updating

00:07:33,520 --> 00:07:39,370
every single time the problem though is

00:07:36,430 --> 00:07:41,500
that hook update and it requires a lot

00:07:39,370 --> 00:07:43,510
of work you have to write each update

00:07:41,500 --> 00:07:45,910
function yourself you have to test it

00:07:43,510 --> 00:07:48,580
yourself you have to use the Drupal API

00:07:45,910 --> 00:07:50,740
and it can get a little crazy this is

00:07:48,580 --> 00:07:52,210
just an example from a module that just

00:07:50,740 --> 00:07:54,910
sets a bunch of variables that's a

00:07:52,210 --> 00:07:58,420
pretty simple case doing more gets to be

00:07:54,910 --> 00:08:00,250
a little bit wild we also have on the on

00:07:58,420 --> 00:08:01,870
the right features module which I

00:08:00,250 --> 00:08:04,060
personally love I know it can get some

00:08:01,870 --> 00:08:07,420
bad raps in the community but I think it

00:08:04,060 --> 00:08:10,480
it creates a solution to a problem which

00:08:07,420 --> 00:08:12,520
is features module does try to get us

00:08:10,480 --> 00:08:14,170
into this world where we can put all of

00:08:12,520 --> 00:08:17,170
the configuration that we've done on the

00:08:14,170 --> 00:08:22,950
site the content types the field groups

00:08:17,170 --> 00:08:25,240
the image styles etc into into code and

00:08:22,950 --> 00:08:27,310
that's cool there are a lot of

00:08:25,240 --> 00:08:30,010
successful Drupal projects that use

00:08:27,310 --> 00:08:33,910
features to put their configuration into

00:08:30,010 --> 00:08:36,250
code and that's cool the problem though

00:08:33,910 --> 00:08:40,930
and this is live from last year but I

00:08:36,250 --> 00:08:44,770
love it so much is that features wasn't

00:08:40,930 --> 00:08:46,390
set up to be a management solution for

00:08:44,770 --> 00:08:48,880
like all your site's configuration that

00:08:46,390 --> 00:08:52,570
was not what it was supposed to do that

00:08:48,880 --> 00:08:53,890
it was set up to be like a tool to like

00:08:52,570 --> 00:08:56,769
share like

00:08:53,890 --> 00:08:58,959
like image gallery or slideshow or or

00:08:56,769 --> 00:09:00,430
blog system or news system in your site

00:08:58,959 --> 00:09:02,200
it was was made for a Drupal

00:09:00,430 --> 00:09:04,990
distribution called open atrium which is

00:09:02,200 --> 00:09:06,839
fabulous but it was designed to be sort

00:09:04,990 --> 00:09:10,390
of a way to share stuff within atrium

00:09:06,839 --> 00:09:13,029
but it had this opportunity to grow into

00:09:10,390 --> 00:09:15,339
something bigger because it did in fact

00:09:13,029 --> 00:09:18,279
put content types and and views and

00:09:15,339 --> 00:09:23,950
stuff into code in a somewhat unified

00:09:18,279 --> 00:09:25,540
way the problem though is that it ends

00:09:23,950 --> 00:09:28,300
up getting blamed for a lot of problems

00:09:25,540 --> 00:09:30,490
sort of like this commander Worf from

00:09:28,300 --> 00:09:31,630
Star Trek much like Worf got blamed his

00:09:30,490 --> 00:09:35,019
father's got blamed for a lot of

00:09:31,630 --> 00:09:41,079
problems queue number is that features

00:09:35,019 --> 00:09:42,850
is a contributory to around what Drupal

00:09:41,079 --> 00:09:45,490
core will provide and there's

00:09:42,850 --> 00:09:48,070
limitations in Drupal core about putting

00:09:45,490 --> 00:09:50,769
stuff in code the Drupal core doesn't by

00:09:48,070 --> 00:09:53,350
default doesn't use you IDs to reference

00:09:50,769 --> 00:09:55,510
various things it uses incremental IDs

00:09:53,350 --> 00:09:57,490
well the problem is that if I have a dev

00:09:55,510 --> 00:09:58,810
site that has an incremental ID and a

00:09:57,490 --> 00:10:01,060
live site that has an incremental ID

00:09:58,810 --> 00:10:03,579
they may not be the same which will

00:10:01,060 --> 00:10:05,079
cause me problems the other thing is

00:10:03,579 --> 00:10:06,959
that features module because it's

00:10:05,079 --> 00:10:10,120
supporting a bunch of other contribs

00:10:06,959 --> 00:10:12,160
that all are doing that config and sort

00:10:10,120 --> 00:10:13,930
of their own way features module sort of

00:10:12,160 --> 00:10:15,220
has to you know work with views it has

00:10:13,930 --> 00:10:17,500
to work with court has to work with a

00:10:15,220 --> 00:10:18,910
lot of different kinds of modules to

00:10:17,500 --> 00:10:20,769
make it all work right and it's

00:10:18,910 --> 00:10:23,110
constantly chasing those modules the

00:10:20,769 --> 00:10:26,050
module updates changes its format a bit

00:10:23,110 --> 00:10:28,779
features has to change and this creates

00:10:26,050 --> 00:10:30,790
a little bit of confusion so if you use

00:10:28,779 --> 00:10:32,649
features you're definitely familiar with

00:10:30,790 --> 00:10:34,930
you know little variations of the code

00:10:32,649 --> 00:10:37,180
sort of struggling to get it all right I

00:10:34,930 --> 00:10:40,089
was talking to someone yesterday who was

00:10:37,180 --> 00:10:41,410
or two days ago who had had a site that

00:10:40,089 --> 00:10:43,540
didn't have features on it and they were

00:10:41,410 --> 00:10:45,880
tasked over the course of like six weeks

00:10:43,540 --> 00:10:47,829
to put it all into features and he's a

00:10:45,880 --> 00:10:49,930
smart guy he has a good team they worked

00:10:47,829 --> 00:10:52,810
on it they said they got 95% of it right

00:10:49,930 --> 00:10:54,910
on into features and I was like oh man

00:10:52,810 --> 00:10:57,459
well it's complicated site a lot of

00:10:54,910 --> 00:10:58,750
things a lot of custom stuff but that's

00:10:57,459 --> 00:11:01,329
a real problem that's sort of a legacy

00:10:58,750 --> 00:11:02,980
kind of problem of this config and

00:11:01,329 --> 00:11:05,260
content not being the same thing and

00:11:02,980 --> 00:11:05,860
this causes a trouble for developers

00:11:05,260 --> 00:11:07,000
Drupal 8

00:11:05,860 --> 00:11:07,370
obviously is going to be a little bit

00:11:07,000 --> 00:11:10,850
better

00:11:07,370 --> 00:11:14,120
and I say that because so one of the

00:11:10,850 --> 00:11:15,590
things in Klingon society is that if

00:11:14,120 --> 00:11:17,720
you're like a Klingon and you get

00:11:15,590 --> 00:11:20,000
dishonored like it's not just your

00:11:17,720 --> 00:11:22,970
dishonor you're the odd dishonor extends

00:11:20,000 --> 00:11:25,730
for seven generations into your family

00:11:22,970 --> 00:11:27,710
but I feel that was Drupal eight in the

00:11:25,730 --> 00:11:29,810
eighth version we can be free of this

00:11:27,710 --> 00:11:31,910
sort of you know distinction we can move

00:11:29,810 --> 00:11:34,970
on from that and we can have a solution

00:11:31,910 --> 00:11:36,650
for creating configuration and code that

00:11:34,970 --> 00:11:38,540
doesn't take six weeks three sprints

00:11:36,650 --> 00:11:41,630
that's just one button export all the

00:11:38,540 --> 00:11:43,640
config and sort of how we got there how

00:11:41,630 --> 00:11:44,830
we have this system starts with a

00:11:43,640 --> 00:11:49,100
pinball wizard

00:11:44,830 --> 00:11:52,790
Greg Dunlap in 2011 who basically came

00:11:49,100 --> 00:11:56,120
to the drupal a process and said we need

00:11:52,790 --> 00:11:58,190
to put a configuration in code because

00:11:56,120 --> 00:11:59,930
Greg's a smart developer has worked a

00:11:58,190 --> 00:12:02,180
lot of big Drupal companies a lot of big

00:11:59,930 --> 00:12:04,610
Drupal projects use features and he saw

00:12:02,180 --> 00:12:06,830
that the solutions that we had and in

00:12:04,610 --> 00:12:09,800
the Drupal 7 world were inadequate we

00:12:06,830 --> 00:12:11,780
needed a great solution to put all the

00:12:09,800 --> 00:12:13,790
configuration in code and have it be a

00:12:11,780 --> 00:12:16,370
core solution that's there by default

00:12:13,790 --> 00:12:19,310
that everyone has to use that makes it

00:12:16,370 --> 00:12:21,200
easy and consistent and he got a lot of

00:12:19,310 --> 00:12:23,660
help from a lot of smart people people

00:12:21,200 --> 00:12:27,440
like David Strauss Alec spot Matthew

00:12:23,660 --> 00:12:29,480
Tift xjm Tim Plunkett the Sun all came

00:12:27,440 --> 00:12:31,010
together and sort of brainstormed a lot

00:12:29,480 --> 00:12:32,270
of ideas like how are you gonna do this

00:12:31,010 --> 00:12:34,370
and how are you gonna make this work

00:12:32,270 --> 00:12:35,810
over the next three years and they

00:12:34,370 --> 00:12:37,820
looked at a lot of inspirations things

00:12:35,810 --> 00:12:40,100
like Jenkins that has a pretty cool

00:12:37,820 --> 00:12:42,350
configuration export option and they

00:12:40,100 --> 00:12:44,180
basically said what do we want to do we

00:12:42,350 --> 00:12:45,410
want something fun we want to clip it

00:12:44,180 --> 00:12:47,680
all the configuration and code in a

00:12:45,410 --> 00:12:52,180
standard way so what we need it to be

00:12:47,680 --> 00:12:56,000
the amyl time so I know these are camels

00:12:52,180 --> 00:12:58,790
but the idea and sort of the crux of the

00:12:56,000 --> 00:13:01,970
Drupal 8 configuration system is that on

00:12:58,790 --> 00:13:04,520
on the sort of data level it is possible

00:13:01,970 --> 00:13:08,030
to take any value that is put into

00:13:04,520 --> 00:13:11,150
Drupal as configuration and export it

00:13:08,030 --> 00:13:12,530
out into a yeah mol file and the mo file

00:13:11,150 --> 00:13:13,970
I'll show you it in just a second but

00:13:12,530 --> 00:13:17,200
it's just a structured data file it

00:13:13,970 --> 00:13:19,820
works like XML in that respect and

00:13:17,200 --> 00:13:21,020
what's really awesome about ya Mille is

00:13:19,820 --> 00:13:23,870
that it also

00:13:21,020 --> 00:13:25,430
exists in just one place that in the

00:13:23,870 --> 00:13:27,770
world of features you can sort of have

00:13:25,430 --> 00:13:30,440
multiple features that have the same

00:13:27,770 --> 00:13:31,760
value for the same or the same value but

00:13:30,440 --> 00:13:33,320
like different values and it can add

00:13:31,760 --> 00:13:35,540
conflicts and overrides and stuff like

00:13:33,320 --> 00:13:37,460
that in the case of configuration

00:13:35,540 --> 00:13:39,740
management you have just one place that

00:13:37,460 --> 00:13:41,300
keeps all of your configuration and you

00:13:39,740 --> 00:13:43,640
have this sort of this sort of

00:13:41,300 --> 00:13:47,590
authoritative version so here's the ammo

00:13:43,640 --> 00:13:50,330
file for the the system information

00:13:47,590 --> 00:13:52,640
field settings in Drupal that you have a

00:13:50,330 --> 00:13:55,130
title for the site Drupal eight CMI demo

00:13:52,640 --> 00:13:57,800
for example that when you put that into

00:13:55,130 --> 00:13:59,120
a Yama file that is the configuration is

00:13:57,800 --> 00:14:01,310
the configuration is the configuration

00:13:59,120 --> 00:14:04,790
it uses a model called declarative

00:14:01,310 --> 00:14:07,490
configuration that says for system site

00:14:04,790 --> 00:14:10,550
yeah system site name that's the value

00:14:07,490 --> 00:14:12,560
you know . and that's really awesome

00:14:10,550 --> 00:14:14,150
because we can now have this like

00:14:12,560 --> 00:14:16,460
central place that defines all the

00:14:14,150 --> 00:14:18,530
configuration that we can take a form

00:14:16,460 --> 00:14:20,300
like this that has all the site

00:14:18,530 --> 00:14:22,640
information you know this should be

00:14:20,300 --> 00:14:24,470
familiar to developers or folks using

00:14:22,640 --> 00:14:27,050
drupal you have the different fields

00:14:24,470 --> 00:14:29,510
these do different things in drupal they

00:14:27,050 --> 00:14:32,150
all can be represented here in this yamo

00:14:29,510 --> 00:14:32,750
file and yeah memo was chosen for a lot

00:14:32,150 --> 00:14:34,790
of reasons

00:14:32,750 --> 00:14:37,070
symphonie really likes it which is good

00:14:34,790 --> 00:14:38,840
but also it's pretty readable like if

00:14:37,070 --> 00:14:41,090
you compare this to like features code

00:14:38,840 --> 00:14:44,180
for example night and day difference

00:14:41,090 --> 00:14:46,280
this is is pretty clean it dips really

00:14:44,180 --> 00:14:49,220
well if you sort of look at it in a it's

00:14:46,280 --> 00:14:51,500
for a diff situation and it's the kind

00:14:49,220 --> 00:14:53,900
of sort of human readable format that we

00:14:51,500 --> 00:14:55,700
we sort of we sort of like I need to

00:14:53,900 --> 00:14:58,340
work for us or a simple page like

00:14:55,700 --> 00:15:00,620
something like this but we can also have

00:14:58,340 --> 00:15:01,940
other kinds of things settings in it in

00:15:00,620 --> 00:15:05,510
fact we have all the settings in it

00:15:01,940 --> 00:15:07,400
here's the blog type on the left this is

00:15:05,510 --> 00:15:09,410
you know type of blog you know

00:15:07,400 --> 00:15:11,360
description this kind of thing and then

00:15:09,410 --> 00:15:12,800
we have a field on the right and you can

00:15:11,360 --> 00:15:14,030
sort of tell from some of these values

00:15:12,800 --> 00:15:17,480
these are the things that you would be

00:15:14,030 --> 00:15:21,050
setting setting in the UI in fact you

00:15:17,480 --> 00:15:23,090
have files for everything in the website

00:15:21,050 --> 00:15:25,700
this is actually just Drupal core for

00:15:23,090 --> 00:15:27,590
Drupal 8 all the different files and you

00:15:25,700 --> 00:15:29,660
can sort of see the the pattern you know

00:15:27,590 --> 00:15:31,880
system dot something dot Yambol and

00:15:29,660 --> 00:15:32,540
these are sort of separated out before

00:15:31,880 --> 00:15:35,300
for

00:15:32,540 --> 00:15:38,780
it's happening and so this is how we

00:15:35,300 --> 00:15:42,200
store configuration in in Drupal 8 by

00:15:38,780 --> 00:15:44,660
design works pretty well and it's

00:15:42,200 --> 00:15:47,260
awesome because the great thing about

00:15:44,660 --> 00:15:50,360
having your configuration in files

00:15:47,260 --> 00:15:51,830
versus a database let's say is that I

00:15:50,360 --> 00:15:55,160
can put this in version control

00:15:51,830 --> 00:15:57,410
I can deploy this as part of my workflow

00:15:55,160 --> 00:15:59,270
I can make this something that I have a

00:15:57,410 --> 00:16:01,670
commit hash for that I can test against

00:15:59,270 --> 00:16:04,070
that I can be engaged with that this the

00:16:01,670 --> 00:16:06,470
configuration works the same way and the

00:16:04,070 --> 00:16:08,480
commit the code as being changes I make

00:16:06,470 --> 00:16:09,770
as module updates I make and stuff like

00:16:08,480 --> 00:16:11,270
that and that's really powerful that

00:16:09,770 --> 00:16:13,250
allows a lot of things you'll see in

00:16:11,270 --> 00:16:13,900
Motion's demo and the benefits of what

00:16:13,250 --> 00:16:17,060
we're doing

00:16:13,900 --> 00:16:20,810
so does that that drive with people we

00:16:17,060 --> 00:16:22,400
pumped it's good ok like that I like

00:16:20,810 --> 00:16:23,630
that I like the energy I know it's no

00:16:22,400 --> 00:16:26,060
this morning I know we're following

00:16:23,630 --> 00:16:29,840
trees it's a hard act also but I'm tall

00:16:26,060 --> 00:16:31,700
so I'll do the best I can ok so all our

00:16:29,840 --> 00:16:33,860
stuff sent in files that's great

00:16:31,700 --> 00:16:35,690
so like what about the database like how

00:16:33,860 --> 00:16:37,970
do we use the database and configuration

00:16:35,690 --> 00:16:39,920
management so this actually changed a

00:16:37,970 --> 00:16:41,360
little bit the original design for

00:16:39,920 --> 00:16:42,830
configuration management just had the

00:16:41,360 --> 00:16:43,130
stuff and files and that was how you did

00:16:42,830 --> 00:16:46,040
it

00:16:43,130 --> 00:16:48,530
problem is reading like all these files

00:16:46,040 --> 00:16:51,230
can be sort of expensive not always best

00:16:48,530 --> 00:16:52,910
so the way that you use the database the

00:16:51,230 --> 00:16:55,430
configuration management is that the

00:16:52,910 --> 00:16:58,010
database is sort of your runtime data

00:16:55,430 --> 00:17:00,350
store that use when you sort of save

00:16:58,010 --> 00:17:02,090
values from the webform it doesn't just

00:17:00,350 --> 00:17:03,860
write files every single time it

00:17:02,090 --> 00:17:06,260
actually puts it into the database it's

00:17:03,860 --> 00:17:07,340
where your runtime configuration it's

00:17:06,260 --> 00:17:09,380
only when you actually use the

00:17:07,340 --> 00:17:11,240
import/export operations that most will

00:17:09,380 --> 00:17:13,970
show you that you actually then push it

00:17:11,240 --> 00:17:15,350
out to the file system and the place

00:17:13,970 --> 00:17:17,570
where it goes in the file system is

00:17:15,350 --> 00:17:20,360
defined in settings that PR is defined

00:17:17,570 --> 00:17:22,790
in settings dot PHP basically here is a

00:17:20,360 --> 00:17:26,030
directory that the configuration will

00:17:22,790 --> 00:17:28,910
live all this all this stuff goes in to

00:17:26,030 --> 00:17:30,560
a place you find the settings dot PHP by

00:17:28,910 --> 00:17:32,270
default and through pallate it's been

00:17:30,560 --> 00:17:35,000
it's put into the files directory

00:17:32,270 --> 00:17:36,500
it's a files config underscore that it

00:17:35,000 --> 00:17:39,500
has like an EM time kind of security

00:17:36,500 --> 00:17:41,390
hash and that works for the sort of

00:17:39,500 --> 00:17:43,130
minimum use case you're just on a shared

00:17:41,390 --> 00:17:44,630
host or something that's not using

00:17:43,130 --> 00:17:45,890
version control you can still install

00:17:44,630 --> 00:17:47,630
Drupal 8 you

00:17:45,890 --> 00:17:49,160
still have all the files sort of be

00:17:47,630 --> 00:17:50,980
pushed out our config pushed out in the

00:17:49,160 --> 00:17:53,360
files directory totally works

00:17:50,980 --> 00:17:55,370
but the problem is something in the

00:17:53,360 --> 00:17:57,170
files directory is typically not put in

00:17:55,370 --> 00:18:00,350
version control we don't want to do that

00:17:57,170 --> 00:18:02,120
so what you can do is you can take yeah

00:18:00,350 --> 00:18:04,790
define your sort of config directories

00:18:02,120 --> 00:18:07,070
value to say hey I want my config app

00:18:04,790 --> 00:18:09,200
for example sites default config and I'm

00:18:07,070 --> 00:18:10,580
gonna put all the config there and then

00:18:09,200 --> 00:18:13,160
that's something that now can be put

00:18:10,580 --> 00:18:16,490
into version control and it could be you

00:18:13,160 --> 00:18:19,160
know set up as something to look into

00:18:16,490 --> 00:18:22,310
your manage workflow and this is the

00:18:19,160 --> 00:18:25,130
power of configuration management the

00:18:22,310 --> 00:18:27,890
ability to say I'm going to treat a

00:18:25,130 --> 00:18:30,410
click on my view the same way as I treat

00:18:27,890 --> 00:18:32,720
a custom module that I wrote they both

00:18:30,410 --> 00:18:34,940
exist in code they both have good at

00:18:32,720 --> 00:18:37,580
again get hashes and they can both work

00:18:34,940 --> 00:18:39,320
through a managed workflow so that's

00:18:37,580 --> 00:18:40,970
sort of my razzle-dazzle started off

00:18:39,320 --> 00:18:41,930
turn it over to motion to actually show

00:18:40,970 --> 00:18:43,160
you how this stuff works

00:18:41,930 --> 00:18:44,570
and then we'll go in and do a little

00:18:43,160 --> 00:18:47,620
more talking about some of the benefits

00:18:44,570 --> 00:18:47,620
but let's go

00:18:53,460 --> 00:19:02,170
okay that's taller than I am

00:18:58,500 --> 00:19:05,050
okay so you know we covered some of this

00:19:02,170 --> 00:19:09,640
but there's real magic in the work flow

00:19:05,050 --> 00:19:14,430
here here we see we start out with a dev

00:19:09,640 --> 00:19:17,170
site you can export from that dev site

00:19:14,430 --> 00:19:19,960
that will put yellow files onto your

00:19:17,170 --> 00:19:21,400
filesystem into the staging directory or

00:19:19,960 --> 00:19:25,510
wherever you've mapped that to in

00:19:21,400 --> 00:19:28,750
settings dot PHP and then over on your

00:19:25,510 --> 00:19:31,420
left on your live site you go ahead and

00:19:28,750 --> 00:19:33,700
do a configuration import and that's the

00:19:31,420 --> 00:19:36,430
moment when your live site starts

00:19:33,700 --> 00:19:42,870
recognizing the configuration that

00:19:36,430 --> 00:19:45,580
you've put in to get okay right here

00:19:42,870 --> 00:19:55,780
well we lost our animation in our like

00:19:45,580 --> 00:20:00,430
three transfers okay cool let's keep

00:19:55,780 --> 00:20:03,130
going alright so let's try this live I

00:20:00,430 --> 00:20:05,590
had a minor panic attack when Holly said

00:20:03,130 --> 00:20:09,430
none of your demos should be done on

00:20:05,590 --> 00:20:12,100
live during the keynote I did plan on

00:20:09,430 --> 00:20:14,620
using aqueous cloud for this demo I

00:20:12,100 --> 00:20:16,090
think I'm gonna just do it locally I was

00:20:14,620 --> 00:20:17,050
working furiously during Greece's

00:20:16,090 --> 00:20:20,110
keynote to get everything working

00:20:17,050 --> 00:20:23,740
locally so yes this is a talk about

00:20:20,110 --> 00:20:26,200
managed workflow but it's also a talk

00:20:23,740 --> 00:20:27,940
doing conference Wi-Fi that's awful

00:20:26,200 --> 00:20:29,800
so everything's going to be local my

00:20:27,940 --> 00:20:32,830
machine you got to take my word for it

00:20:29,800 --> 00:20:35,710
that this works perfectly on Pantheon it

00:20:32,830 --> 00:20:37,030
works perfectly on aqua cloud and other

00:20:35,710 --> 00:20:39,930
manage workflow environments should

00:20:37,030 --> 00:20:39,930
handle it just fine

00:20:44,500 --> 00:20:48,090
f1 I see

00:20:58,320 --> 00:21:14,750
okay cool okay here I am my terminal

00:21:11,280 --> 00:21:18,110
let's make the prompt a little smaller

00:21:14,750 --> 00:21:20,850
I'm on my local machine in a Drupal site

00:21:18,110 --> 00:21:22,770
called d8 the directory is called d8 you

00:21:20,850 --> 00:21:26,190
can see there at the bottom oh yeah you

00:21:22,770 --> 00:21:29,610
hopefully can see is the font big enough

00:21:26,190 --> 00:21:31,160
for people good okay I get thumbs up in

00:21:29,610 --> 00:21:33,480
the back

00:21:31,160 --> 00:21:35,610
okay so let's call this my development

00:21:33,480 --> 00:21:37,920
site the other local site that I'll show

00:21:35,610 --> 00:21:39,330
you in a minute is the testing site

00:21:37,920 --> 00:21:42,270
alright I'm going to show you how to

00:21:39,330 --> 00:21:45,330
move configuration from development to

00:21:42,270 --> 00:21:50,250
testing and then testing to live would

00:21:45,330 --> 00:21:53,370
be the exact same process okay okay so

00:21:50,250 --> 00:21:56,550
the first thing that I've done as a set

00:21:53,370 --> 00:21:59,550
up is I've installed Drupal I have done

00:21:56,550 --> 00:22:01,740
a config export of my installed Drupal

00:21:59,550 --> 00:22:04,710
so that means my staging directory is

00:22:01,740 --> 00:22:07,710
populated with hundreds of llamó files I

00:22:04,710 --> 00:22:10,440
have gone ahead and added that staging

00:22:07,710 --> 00:22:14,910
directory sites default config to my git

00:22:10,440 --> 00:22:15,870
repository so that's now being managed

00:22:14,910 --> 00:22:18,240
by git okay

00:22:15,870 --> 00:22:20,580
it's the same git repository as the one

00:22:18,240 --> 00:22:22,350
that's managing code okay so the

00:22:20,580 --> 00:22:23,520
solution that we're recommending for

00:22:22,350 --> 00:22:25,380
manage we're closed there is only one

00:22:23,520 --> 00:22:30,050
repository alright in case people

00:22:25,380 --> 00:22:30,050
weren't clear about that okay

00:22:36,899 --> 00:22:41,700
it's like let's get rid of this

00:22:47,840 --> 00:22:54,530
okay let's export from this site or

00:22:51,120 --> 00:22:54,530
let's make a configuration change

00:23:04,610 --> 00:23:12,990
there it is okay so we're now looking at

00:23:10,380 --> 00:23:15,590
the UI for the configuration management

00:23:12,990 --> 00:23:20,120
module in Drupal 8 this is a core module

00:23:15,590 --> 00:23:24,059
everyone's going to have it you can see

00:23:20,120 --> 00:23:26,070
three tabs here one tab which I'll show

00:23:24,059 --> 00:23:28,919
you but I don't necessarily encourage

00:23:26,070 --> 00:23:31,200
you use it is the single export and

00:23:28,919 --> 00:23:32,370
import but I think it's helpful to at

00:23:31,200 --> 00:23:34,919
least know about it and know what it

00:23:32,370 --> 00:23:38,130
does so you can take any of the yamo

00:23:34,919 --> 00:23:41,309
files or any of the configurations and

00:23:38,130 --> 00:23:46,409
just get them using the UI ok get all

00:23:41,309 --> 00:23:48,480
these values if you care to you can

00:23:46,409 --> 00:23:56,399
actually make changes on your site I

00:23:48,480 --> 00:23:57,419
just changed that from five to ten and I

00:23:56,399 --> 00:24:00,450
don't remember what the name of it was

00:23:57,419 --> 00:24:07,460
that I had actually so that's not gonna

00:24:00,450 --> 00:24:17,210
work too well let's do it again

00:24:07,460 --> 00:24:26,929
I'm on import contact settings exporting

00:24:17,210 --> 00:24:26,929
now importing I will

00:24:33,130 --> 00:24:40,809
okay so if you don't like the Drupal

00:24:36,080 --> 00:24:43,850
forms you can use other Drupal forms so

00:24:40,809 --> 00:24:46,669
full import and full export is closer to

00:24:43,850 --> 00:24:53,240
what we're recommending for manage

00:24:46,669 --> 00:24:54,500
workflow what these tabs provide is you

00:24:53,240 --> 00:24:56,360
can go ahead and get all of your

00:24:54,500 --> 00:24:59,450
configuration as a tarball

00:24:56,360 --> 00:25:01,070
okay it's useful you can see it

00:24:59,450 --> 00:25:04,760
downloading there at the bottom eye

00:25:01,070 --> 00:25:06,860
screen now let's say if I have like this

00:25:04,760 --> 00:25:09,140
is one way to go from production you

00:25:06,860 --> 00:25:11,929
grab a tarball and you take to your dev

00:25:09,140 --> 00:25:13,250
site and you can put it in the directory

00:25:11,929 --> 00:25:16,100
the staging directory and commit that

00:25:13,250 --> 00:25:17,360
and now you have taken all of the stuff

00:25:16,100 --> 00:25:19,960
that was done in production and put it

00:25:17,360 --> 00:25:23,270
into your kit code so it's a handy tab

00:25:19,960 --> 00:25:24,770
and similarly you can import one of

00:25:23,270 --> 00:25:28,460
these tarballs using the UI if you care

00:25:24,770 --> 00:25:30,049
to the way that we hope people are going

00:25:28,460 --> 00:25:33,980
to use this is actually to use a few

00:25:30,049 --> 00:25:35,419
dress commands that we've added so if

00:25:33,980 --> 00:25:38,950
you're using the latest version of dress

00:25:35,419 --> 00:25:41,390
brush eight you will find a bunch of

00:25:38,950 --> 00:25:43,520
config commands the ones that I'm going

00:25:41,390 --> 00:25:48,940
to show are called config export and

00:25:43,520 --> 00:25:48,940
config import okay okay

00:26:09,690 --> 00:26:14,610
I'm changing the site name don't get too

00:26:12,490 --> 00:26:14,610
excited

00:26:14,710 --> 00:26:19,260
the new site name for this dev site is

00:26:16,570 --> 00:26:19,260
barsa

00:26:33,350 --> 00:26:40,490
okay here we see that there's two

00:26:37,100 --> 00:26:42,740
changes about to be committed - they're

00:26:40,490 --> 00:26:44,929
about to be overwritten in my staging

00:26:42,740 --> 00:26:47,330
directory by the config export command

00:26:44,929 --> 00:26:49,220
one of them is a foo configuration

00:26:47,330 --> 00:26:51,049
change which is something I did for Matt

00:26:49,220 --> 00:26:53,000
right before this example it's okay to

00:26:51,049 --> 00:26:55,639
leave it like that the other one is the

00:26:53,000 --> 00:26:56,929
one we just made system dot sight that

00:26:55,639 --> 00:26:59,330
is a file that exists already that's

00:26:56,929 --> 00:27:01,130
being updated okay so dress is providing

00:26:59,330 --> 00:27:03,830
you a preview of what's about to happen

00:27:01,130 --> 00:27:07,669
to your staging directory we say yes to

00:27:03,830 --> 00:27:09,590
confirm it all of the what the yamo

00:27:07,669 --> 00:27:13,389
files from the runtime database got

00:27:09,590 --> 00:27:13,389
exported to the staging directory okay

00:27:22,809 --> 00:27:29,059
okay so we see that there's one modified

00:27:25,760 --> 00:27:31,610
file sites default config system site

00:27:29,059 --> 00:27:33,049
yeah mo all right so git has told me

00:27:31,610 --> 00:27:35,950
that there's one pending modification

00:27:33,049 --> 00:27:35,950
let's go ahead and commit it

00:27:48,659 --> 00:27:52,049
I didn't need to push it because that's

00:27:50,309 --> 00:27:56,279
actually the master repo in the local

00:27:52,049 --> 00:27:58,999
okay so we now have made a config change

00:27:56,279 --> 00:28:03,929
and we have pushed it to get okay so

00:27:58,999 --> 00:28:05,899
this is terrific now we go over to the

00:28:03,929 --> 00:28:08,369
next site which is the testing site and

00:28:05,899 --> 00:28:13,259
we do a git poll to get our new code and

00:28:08,369 --> 00:28:17,330
a config import to have that new code be

00:28:13,259 --> 00:28:17,330
recognized by the runtime all right I

00:28:20,629 --> 00:28:26,220
switched over to the other site that's

00:28:23,039 --> 00:28:28,999
d8 test okay and continuing in our

00:28:26,220 --> 00:28:28,999
terminal with drush

00:28:39,770 --> 00:28:44,360
bummer that's what happens with demos

00:28:42,679 --> 00:28:46,309
that are that are pushed too quickly

00:28:44,360 --> 00:28:50,200
okay so what I was expecting to see

00:28:46,309 --> 00:28:52,100
there is that I didn't pull thanks

00:28:50,200 --> 00:29:03,559
someone was looking quizzically out

00:28:52,100 --> 00:29:04,760
there and gave me a clue okay that's

00:29:03,559 --> 00:29:08,059
better

00:29:04,760 --> 00:29:09,470
okay so drush is telling me that is it

00:29:08,059 --> 00:29:11,900
okay do you really want this change

00:29:09,470 --> 00:29:14,150
before it goes into the runtime and it

00:29:11,900 --> 00:29:15,740
gives me a clue that it's system dot

00:29:14,150 --> 00:29:18,380
site that's being changed

00:29:15,740 --> 00:29:20,300
thrush actually has another option for

00:29:18,380 --> 00:29:21,470
viewing the preview you can actually see

00:29:20,300 --> 00:29:28,520
the code that's going to go in I'll show

00:29:21,470 --> 00:29:36,200
you that so if I say no here add the

00:29:28,520 --> 00:29:39,800
option - - preview equals diff I get a

00:29:36,200 --> 00:29:41,540
diff okay with the usual unified plus -

00:29:39,800 --> 00:29:46,300
stuff that says the site name is

00:29:41,540 --> 00:29:46,300
changing - bar sign okay if I say yes

00:29:49,840 --> 00:29:53,230
Drupal is working

00:29:54,060 --> 00:30:09,360
are imported successfully okay so the

00:30:06,840 --> 00:30:13,200
site name is changing from site install

00:30:09,360 --> 00:30:13,650
to barsa we hope there it is right up

00:30:13,200 --> 00:30:17,880
here

00:30:13,650 --> 00:30:20,550
okay so that was using two drush

00:30:17,880 --> 00:30:24,570
commands only - all right it's not a ton

00:30:20,550 --> 00:30:27,870
of things you have to learn and we have

00:30:24,570 --> 00:30:31,530
sort of a had brush and get doing a

00:30:27,870 --> 00:30:33,090
happy interaction here such that we're

00:30:31,530 --> 00:30:34,770
taking that staging directory and using

00:30:33,090 --> 00:30:39,060
it as a way to move configuration

00:30:34,770 --> 00:30:40,230
through sites all right so that's really

00:30:39,060 --> 00:30:46,890
the demo and then switch back to the

00:30:40,230 --> 00:30:48,540
slides I'm have a little more time I'm

00:30:46,890 --> 00:30:50,850
actually going to do with more complex

00:30:48,540 --> 00:30:54,120
just to show you something more exciting

00:30:50,850 --> 00:30:57,260
than the site name so let's go back to

00:30:54,120 --> 00:30:57,260
our dev site

00:31:13,030 --> 00:31:19,300
what I've done just there is I created

00:31:15,380 --> 00:31:19,300
the blog content type okay

00:31:36,010 --> 00:31:42,850
I've added a picture an image field

00:31:38,450 --> 00:31:42,850
called pic to the blog content type

00:32:09,480 --> 00:32:13,810
so what I'm doing right now is creating

00:32:11,680 --> 00:32:20,380
a view that's showing all of the blog's

00:32:13,810 --> 00:32:22,630
okay so what I'm simulating here is like

00:32:20,380 --> 00:32:25,180
a whole feature that I've created on

00:32:22,630 --> 00:32:26,740
this dev site it's a blog content type

00:32:25,180 --> 00:32:28,960
it has an image field it has a body

00:32:26,740 --> 00:32:39,460
field in a has a view that shows the

00:32:28,960 --> 00:32:48,190
data okay if I go over to my terminal

00:32:39,460 --> 00:32:50,260
now switch over to the dev site I'm

00:32:48,190 --> 00:32:51,700
gonna do an export okay so all the work

00:32:50,260 --> 00:32:53,230
I've been doing on my dev site I now

00:32:51,700 --> 00:32:55,390
need to export it so I can get it to get

00:32:53,230 --> 00:33:03,670
all right that's your next step once

00:32:55,390 --> 00:33:07,900
you're ready I'm gonna show you a new

00:33:03,670 --> 00:33:10,390
option here - - commit alright so if

00:33:07,900 --> 00:33:11,680
you're feeling kind of confident you can

00:33:10,390 --> 00:33:14,530
have dress go ahead and do the commit

00:33:11,680 --> 00:33:18,390
for you so it's doing the drush work and

00:33:14,530 --> 00:33:18,390
the get work for you all right

00:33:19,140 --> 00:33:25,170
we're still going to get our prompt from

00:33:23,290 --> 00:33:27,700
drush to say is everything looking okay

00:33:25,170 --> 00:33:29,320
and you can see all the stuff that all

00:33:27,700 --> 00:33:31,510
the mo files that are getting created

00:33:29,320 --> 00:33:33,340
based on that blog feature I just made

00:33:31,510 --> 00:33:37,930
all right I'm creating the node type

00:33:33,340 --> 00:33:41,230
obviously a body picture more picture

00:33:37,930 --> 00:33:44,380
stuff and then the form modes and the

00:33:41,230 --> 00:33:46,540
display modes that got created for my

00:33:44,380 --> 00:33:47,140
blog content type and finally the end

00:33:46,540 --> 00:33:48,820
the view

00:33:47,140 --> 00:33:50,620
alright the configuration entity that is

00:33:48,820 --> 00:33:53,530
the view so all that stuff is about to

00:33:50,620 --> 00:33:53,770
go into get if I say yes oh it just did

00:33:53,530 --> 00:33:56,440
it

00:33:53,770 --> 00:34:02,020
cool I think - that commit means keep

00:33:56,440 --> 00:34:04,330
going okay so just to show you this is

00:34:02,020 --> 00:34:07,170
the last commit on my repo you can see

00:34:04,330 --> 00:34:09,760
that drush went ahead and made a nice

00:34:07,170 --> 00:34:12,490
commit message that is basically the

00:34:09,760 --> 00:34:14,320
whole preview it put it in there and so

00:34:12,490 --> 00:34:17,470
if people are curious about what the get

00:34:14,320 --> 00:34:19,420
the commit it has in it they can go look

00:34:17,470 --> 00:34:20,950
at that commit message and just

00:34:19,420 --> 00:34:24,390
scrolling through the commits you see

00:34:20,950 --> 00:34:24,390
that it's a bunch of Yama

00:34:32,520 --> 00:34:37,980
okay so switch to the testing site the

00:34:35,879 --> 00:34:40,470
next site in the workflow did a get poll

00:34:37,980 --> 00:34:42,480
this time and now my staging directories

00:34:40,470 --> 00:34:46,560
up-to-date all right

00:34:42,480 --> 00:34:55,050
I didn't Oh something that said

00:34:46,560 --> 00:34:58,580
something wrong untracked would be

00:34:55,050 --> 00:34:58,580
overwritten I don't care about that file

00:35:01,250 --> 00:35:21,780
that's okay for now sites default files

00:35:09,510 --> 00:35:23,010
HD access sites the fault config easy

00:35:21,780 --> 00:35:29,250
for you guys you don't have everyone

00:35:23,010 --> 00:35:31,650
looking at you okay so did the poll

00:35:29,250 --> 00:35:34,170
really work or now now it worked okay

00:35:31,650 --> 00:35:37,080
all right

00:35:34,170 --> 00:35:39,150
so let's go ahead and import all right

00:35:37,080 --> 00:35:41,190
it's not sufficient to just move your

00:35:39,150 --> 00:35:48,630
code over you have to import it to bring

00:35:41,190 --> 00:35:51,380
it into the run time I had an idea to do

00:35:48,630 --> 00:35:51,380
it differently this time

00:36:07,930 --> 00:36:15,100
okay so here we're in the configuration

00:36:12,020 --> 00:36:16,970
UI the triple provides on our test site

00:36:15,100 --> 00:36:19,220
okay

00:36:16,970 --> 00:36:21,550
so there is a tab here called

00:36:19,220 --> 00:36:24,670
synchronize which I didn't show before

00:36:21,550 --> 00:36:27,710
the point of synchronize is it looks at

00:36:24,670 --> 00:36:29,360
your staging directory and sees what's

00:36:27,710 --> 00:36:34,310
different from what's in your run time

00:36:29,360 --> 00:36:36,740
okay so an alternative to running config

00:36:34,310 --> 00:36:38,000
import is to just do a synchronize using

00:36:36,740 --> 00:36:39,860
the UI so let's go ahead and try that

00:36:38,000 --> 00:36:41,810
here so you see all the different

00:36:39,860 --> 00:36:44,690
options that are provided by address and

00:36:41,810 --> 00:36:47,810
by core you get a preview of what's

00:36:44,690 --> 00:36:49,910
coming you can see the blog content type

00:36:47,810 --> 00:36:52,220
is coming along with the image field and

00:36:49,910 --> 00:36:53,840
the view and all that stuff so import

00:36:52,220 --> 00:36:56,950
all's our only option so let's go ahead

00:36:53,840 --> 00:36:56,950
and do that hope for the best

00:37:02,020 --> 00:37:08,420
failed Oh foo is invalid yeah that was a

00:37:05,690 --> 00:37:11,570
dodgy thing that I did by putting in

00:37:08,420 --> 00:37:15,470
something that has no module recognizing

00:37:11,570 --> 00:37:20,990
it so I shouldn't have done that right

00:37:15,470 --> 00:37:27,170
before getting on here let's just see if

00:37:20,990 --> 00:37:29,500
drush configure import will care yeah

00:37:27,170 --> 00:37:29,500
yeah

00:37:34,650 --> 00:37:42,160
can't do it same simmer okay all right

00:37:38,710 --> 00:37:45,990
so now you have almost seen a complex

00:37:42,160 --> 00:37:50,100
feature moving from dev to stage okay

00:37:45,990 --> 00:37:50,100
all right so let's go back to our slides

00:37:51,180 --> 00:37:58,420
let's go back to our slides all right

00:37:57,010 --> 00:38:01,000
you can get your speaker notes going

00:37:58,420 --> 00:38:04,510
when you need them all right hopefully

00:38:01,000 --> 00:38:06,070
the demo was cool it was mostly cool you

00:38:04,510 --> 00:38:10,870
even got to see me make a few mistakes

00:38:06,070 --> 00:38:13,000
which is kind of exciting let's let's go

00:38:10,870 --> 00:38:16,120
back to the top level and see what the

00:38:13,000 --> 00:38:19,000
benefits are of the configuration

00:38:16,120 --> 00:38:22,180
management on manage workflow all right

00:38:19,000 --> 00:38:24,100
I think this is the biggest one there is

00:38:22,180 --> 00:38:26,740
finally accountability and auditability

00:38:24,100 --> 00:38:29,650
of what's happening with the

00:38:26,740 --> 00:38:31,950
configuration on your website okay we

00:38:29,650 --> 00:38:35,350
are using git you know the world's best

00:38:31,950 --> 00:38:37,900
accountability and auditability tool it

00:38:35,350 --> 00:38:39,430
doesn't forget anything and it knows

00:38:37,900 --> 00:38:45,160
exactly who made what configuration

00:38:39,430 --> 00:38:48,570
changes okay config import and config

00:38:45,160 --> 00:38:51,700
export are very scriptable operations ok

00:38:48,570 --> 00:38:53,860
with script ability we finally get the

00:38:51,700 --> 00:38:56,950
things like configuration continuous

00:38:53,860 --> 00:39:00,370
integration alright it's quite easy now

00:38:56,950 --> 00:39:03,790
to just have config import and export as

00:39:00,370 --> 00:39:06,190
part of your routines and we can you

00:39:03,790 --> 00:39:09,900
know be testing our pull requests on our

00:39:06,190 --> 00:39:09,900
CI systems and all that kind of stuff

00:39:10,620 --> 00:39:17,500
since this is get you can roll back to a

00:39:14,320 --> 00:39:20,650
prior configuration if something went

00:39:17,500 --> 00:39:22,270
wrong let's say you weren't doing full

00:39:20,650 --> 00:39:24,160
testing which certainly happens

00:39:22,270 --> 00:39:27,580
something went wrong you can roll back

00:39:24,160 --> 00:39:32,230
to a prior configuration I will say your

00:39:27,580 --> 00:39:34,570
mileage may vary simple roll backs are

00:39:32,230 --> 00:39:36,490
pretty simple complex roll backs are

00:39:34,570 --> 00:39:38,920
still hard you know configuration

00:39:36,490 --> 00:39:44,260
management solves some of our problems

00:39:38,920 --> 00:39:46,750
but not all of them ok so I'll hand it

00:39:44,260 --> 00:39:49,260
over to Matt here and you'll hear about

00:39:46,750 --> 00:39:52,690
the live environment

00:39:49,260 --> 00:39:57,820
for the demo a free configuration

00:39:52,690 --> 00:40:00,730
management so I think this is really

00:39:57,820 --> 00:40:03,460
cool I think having a unification of git

00:40:00,730 --> 00:40:04,990
and your configuration like makes the

00:40:03,460 --> 00:40:07,300
kinds of things that most just showed

00:40:04,990 --> 00:40:08,830
and talked about possible that we can

00:40:07,300 --> 00:40:10,750
have the configure the get alias

00:40:08,830 --> 00:40:12,100
integration running all the commits we

00:40:10,750 --> 00:40:14,560
can have a lot of confidence in our

00:40:12,100 --> 00:40:16,870
development process and we can use this

00:40:14,560 --> 00:40:18,490
to do really honestly better and more

00:40:16,870 --> 00:40:20,620
awesome stuff and I think that's part of

00:40:18,490 --> 00:40:23,410
the Drupal story is we continually build

00:40:20,620 --> 00:40:25,000
tools and techniques to make bigger and

00:40:23,410 --> 00:40:26,770
better and more awesome websites for

00:40:25,000 --> 00:40:29,950
everyone I think variation management is

00:40:26,770 --> 00:40:31,540
part of that story there are a couple

00:40:29,950 --> 00:40:32,770
things I want to sort of point out sort

00:40:31,540 --> 00:40:35,050
of in closing before you do some

00:40:32,770 --> 00:40:37,050
questions just so like when we show

00:40:35,050 --> 00:40:39,490
demos and sort of show the simple cases

00:40:37,050 --> 00:40:41,320
they help to show you how this kind of

00:40:39,490 --> 00:40:42,820
stuff works there's you do your config

00:40:41,320 --> 00:40:45,060
in dev you push test

00:40:42,820 --> 00:40:48,220
you deploy live like that totally works

00:40:45,060 --> 00:40:51,280
but there's this thing called the real

00:40:48,220 --> 00:40:54,190
world we live in where this isn't always

00:40:51,280 --> 00:40:56,470
the case and this is specifically not

00:40:54,190 --> 00:40:59,410
the case when we're talking about sort

00:40:56,470 --> 00:41:02,530
of say a deploy project where we have a

00:40:59,410 --> 00:41:04,420
client or a customer or someone who

00:41:02,530 --> 00:41:07,440
wants to also make changes to the live

00:41:04,420 --> 00:41:10,360
environment so say we have a website

00:41:07,440 --> 00:41:12,820
customer has you know is paid for it has

00:41:10,360 --> 00:41:15,640
worked on it um they're like I'm just

00:41:12,820 --> 00:41:17,920
gonna edit views in in production this

00:41:15,640 --> 00:41:19,270
is what Drupal's for you know and

00:41:17,920 --> 00:41:21,280
they're gonna go do a bunch of config on

00:41:19,270 --> 00:41:24,160
the live environment if you as a

00:41:21,280 --> 00:41:26,590
developer don't realize that or don't

00:41:24,160 --> 00:41:28,690
care about that and you then go to make

00:41:26,590 --> 00:41:30,730
make some news new stuff on dev push it

00:41:28,690 --> 00:41:32,260
to test and import it to live what you

00:41:30,730 --> 00:41:36,430
effectively do is blow away all their

00:41:32,260 --> 00:41:38,350
work this is the problem and that this

00:41:36,430 --> 00:41:40,810
is something that sort of can duration

00:41:38,350 --> 00:41:42,610
management doesn't really because it's

00:41:40,810 --> 00:41:45,730
declarative it has a hard time doing

00:41:42,610 --> 00:41:48,220
this that if you make a commit that says

00:41:45,730 --> 00:41:49,750
the value for this is this and dev you

00:41:48,220 --> 00:41:51,820
push up to test you push it to live and

00:41:49,750 --> 00:41:53,260
you import lives just gonna accept that

00:41:51,820 --> 00:41:54,430
value it's not gonna be like oh like

00:41:53,260 --> 00:41:57,520
somebody changed this two days ago

00:41:54,430 --> 00:41:58,960
what's going on so but there are ways to

00:41:57,520 --> 00:42:00,730
deal with this and there's sort of three

00:41:58,960 --> 00:42:01,730
ways I'll show you of how to deal with

00:42:00,730 --> 00:42:03,770
this situation

00:42:01,730 --> 00:42:05,660
we're configuration changes have

00:42:03,770 --> 00:42:07,790
happened in the live environment and

00:42:05,660 --> 00:42:10,730
also in your dev environment what do you

00:42:07,790 --> 00:42:12,920
do well first option is you can just say

00:42:10,730 --> 00:42:14,780
no I was gonna use the flight of Nancy

00:42:12,920 --> 00:42:16,310
Reagan and that 80s her anti-drug

00:42:14,780 --> 00:42:20,450
campaign but I don't know if that works

00:42:16,310 --> 00:42:23,030
in Europe but there are there is a is a

00:42:20,450 --> 00:42:26,120
sort of best practice good practice that

00:42:23,030 --> 00:42:27,980
says look you can't make you can't edit

00:42:26,120 --> 00:42:29,420
you shouldn't edit your theme or your

00:42:27,980 --> 00:42:30,770
module code in live

00:42:29,420 --> 00:42:33,710
you shouldn't edit your config either

00:42:30,770 --> 00:42:35,360
like just don't do it push it through

00:42:33,710 --> 00:42:38,330
the workflow run it through the test

00:42:35,360 --> 00:42:41,810
like this is best and luckily there's a

00:42:38,330 --> 00:42:44,450
Drupal 8 module for it my project config

00:42:41,810 --> 00:42:46,490
read-only it's being worked on this week

00:42:44,450 --> 00:42:49,040
it's not super crazy as a module it

00:42:46,490 --> 00:42:50,480
basically just says hey if you put

00:42:49,040 --> 00:42:52,540
something special in your settings file

00:42:50,480 --> 00:42:55,580
that says only have configured only

00:42:52,540 --> 00:42:58,100
don't let people do config so if you

00:42:55,580 --> 00:43:00,560
install this module and you like turn it

00:42:58,100 --> 00:43:02,240
on your live site and then you know

00:43:00,560 --> 00:43:04,730
someone goes in and tries to edit of you

00:43:02,240 --> 00:43:07,280
it'll be like no no no you must do that

00:43:04,730 --> 00:43:08,930
in dev and I like this approach I

00:43:07,280 --> 00:43:11,060
actually think it's pretty good for

00:43:08,930 --> 00:43:12,590
discipline I think that's how you should

00:43:11,060 --> 00:43:15,110
work with the website you shouldn't do

00:43:12,590 --> 00:43:17,720
the changes in live so that's option one

00:43:15,110 --> 00:43:19,520
just say no use something module like

00:43:17,720 --> 00:43:23,360
this force the changes to go through

00:43:19,520 --> 00:43:23,990
death promise that does always work for

00:43:23,360 --> 00:43:25,760
everyone

00:43:23,990 --> 00:43:28,700
some people do want to do config in live

00:43:25,760 --> 00:43:31,160
okay okay option two

00:43:28,700 --> 00:43:34,040
oh this also is animated but it was from

00:43:31,160 --> 00:43:37,940
Windows so it's not that great so option

00:43:34,040 --> 00:43:40,010
two is you can have this process where

00:43:37,940 --> 00:43:41,960
if you're on dev and you're doing some

00:43:40,010 --> 00:43:44,300
work you can sort of export out your

00:43:41,960 --> 00:43:46,850
config from dev and then you can sort of

00:43:44,300 --> 00:43:49,820
refresh your dev environment so you can

00:43:46,850 --> 00:43:52,040
take like the like the database from

00:43:49,820 --> 00:43:55,310
live and put in your dev site and then

00:43:52,040 --> 00:43:57,260
you can do a config export again this is

00:43:55,310 --> 00:43:58,730
sort of how it commonly works now with

00:43:57,260 --> 00:44:01,040
features and such like if you do have

00:43:58,730 --> 00:44:04,940
changes you can pull it back to dev put

00:44:01,040 --> 00:44:06,110
it into code and whoa and there's some

00:44:04,940 --> 00:44:08,000
commands for that there's a really great

00:44:06,110 --> 00:44:10,070
Drudge command sequel sync that will

00:44:08,000 --> 00:44:12,230
bring your database back my suit will

00:44:10,070 --> 00:44:14,000
dump of course we'll do that and then as

00:44:12,230 --> 00:44:15,680
a developer you can do this process

00:44:14,000 --> 00:44:17,930
where you can sort of like

00:44:15,680 --> 00:44:19,910
your changes aside bringing the live and

00:44:17,930 --> 00:44:21,319
then put it together yourself and then

00:44:19,910 --> 00:44:23,359
you can push it up through the workflow

00:44:21,319 --> 00:44:25,010
and I feel this is probably going to be

00:44:23,359 --> 00:44:26,869
the most common way people handle this

00:44:25,010 --> 00:44:28,099
problem you know because the developers

00:44:26,869 --> 00:44:29,900
were used to refreshing our dev

00:44:28,099 --> 00:44:31,670
environments and we'll go we'll go push

00:44:29,900 --> 00:44:33,230
that push the code in that way the

00:44:31,670 --> 00:44:34,819
problem is that we can run into some

00:44:33,230 --> 00:44:36,230
issues where we don't want to overwrite

00:44:34,819 --> 00:44:37,460
config so if you do have something in

00:44:36,230 --> 00:44:39,380
live it something in dev and they're

00:44:37,460 --> 00:44:42,829
sort of both existing you got to be sort

00:44:39,380 --> 00:44:46,069
of careful when you do this so there's

00:44:42,829 --> 00:44:50,000
also an option 3 which is just use magic

00:44:46,069 --> 00:44:53,119
to do this there's a there's a new Josh

00:44:50,000 --> 00:44:54,410
command called config merge that is

00:44:53,119 --> 00:44:56,569
available at draw shops

00:44:54,410 --> 00:44:58,490
config extra and it's basically a

00:44:56,569 --> 00:45:01,400
command that says if I'm using Drudge

00:44:58,490 --> 00:45:03,920
and I can specify my live environment

00:45:01,400 --> 00:45:06,260
with like ad rush site alias and I'm

00:45:03,920 --> 00:45:08,720
running it on my local environment draw

00:45:06,260 --> 00:45:10,579
it'll actually go in and and do a really

00:45:08,720 --> 00:45:12,740
cool operation it'll say let's connect

00:45:10,579 --> 00:45:14,990
to the live site let's export that

00:45:12,740 --> 00:45:17,270
config off the live site let's bring it

00:45:14,990 --> 00:45:19,069
into local let's export like a fig from

00:45:17,270 --> 00:45:20,809
local and then we'll just take the to

00:45:19,069 --> 00:45:23,869
config and we'll try to merge them

00:45:20,809 --> 00:45:26,049
together and often this will work no

00:45:23,869 --> 00:45:28,430
problem we got a view edited on live

00:45:26,049 --> 00:45:30,079
developers made a new content type no

00:45:28,430 --> 00:45:33,170
conflicts we'll just put them both in

00:45:30,079 --> 00:45:34,760
and commit them all at once in the case

00:45:33,170 --> 00:45:38,329
where we do have some conflicts which we

00:45:34,760 --> 00:45:40,700
will this will bring up a visual dissing

00:45:38,329 --> 00:45:42,260
tool kf3 and it'll actually say okay

00:45:40,700 --> 00:45:44,030
like hey the view has been changed and

00:45:42,260 --> 00:45:46,670
live and in dev how do we want to

00:45:44,030 --> 00:45:48,200
reconcile this and then we can actually

00:45:46,670 --> 00:45:50,240
make the decisions we want to make and

00:45:48,200 --> 00:45:51,589
do commits so this is a little more

00:45:50,240 --> 00:45:53,960
advanced you have to sort of set up the

00:45:51,589 --> 00:45:57,079
drug the aliases you have to have SSH

00:45:53,960 --> 00:45:58,309
and get access to the server but it's

00:45:57,079 --> 00:45:59,839
something that I think is really cool

00:45:58,309 --> 00:46:02,059
and if you're interested in sort of

00:45:59,839 --> 00:46:04,010
being using configuration management and

00:46:02,059 --> 00:46:06,290
you have changes in live and changes in

00:46:04,010 --> 00:46:07,670
dev or for what it's worth that you have

00:46:06,290 --> 00:46:09,530
two or three developers they're all

00:46:07,670 --> 00:46:11,960
working on the same stuff you can use

00:46:09,530 --> 00:46:13,730
drush config merge to move merge and

00:46:11,960 --> 00:46:15,230
other developers you know she's working

00:46:13,730 --> 00:46:17,180
over here I could take her stuff and

00:46:15,230 --> 00:46:19,069
merge it with my stuff as well so

00:46:17,180 --> 00:46:21,200
definitely definitely point people check

00:46:19,069 --> 00:46:23,180
out drush config merge sort of works

00:46:21,200 --> 00:46:25,040
like magic which is off them but it is

00:46:23,180 --> 00:46:26,750
code you can see it as well and

00:46:25,040 --> 00:46:29,260
hopefully one of those three options

00:46:26,750 --> 00:46:32,830
will work to handle cases with with lies

00:46:29,260 --> 00:46:36,850
I'm live config the second sort of last

00:46:32,830 --> 00:46:39,010
thing that sort of can be an issue is is

00:46:36,850 --> 00:46:42,610
sharing of configuration sharing is

00:46:39,010 --> 00:46:44,530
super cute as my graphic suggests and

00:46:42,610 --> 00:46:47,020
it's something that we want to do that

00:46:44,530 --> 00:46:49,180
part of the drupal ethic is sharing the

00:46:47,020 --> 00:46:50,590
work you have we want people to do cool

00:46:49,180 --> 00:46:52,660
config and share it with other people

00:46:50,590 --> 00:46:55,720
it's you know part of like sharing code

00:46:52,660 --> 00:46:58,180
and such like that the problem or

00:46:55,720 --> 00:47:00,850
challenge is that Drupal 8 configuration

00:46:58,180 --> 00:47:03,640
system wasn't actually designed for

00:47:00,850 --> 00:47:05,620
sharing very well that if you take this

00:47:03,640 --> 00:47:08,560
is the export of all the Yambol files if

00:47:05,620 --> 00:47:10,540
I install Drupal 8 do a cool config and

00:47:08,560 --> 00:47:12,760
then be like hey this configs awesome

00:47:10,540 --> 00:47:15,220
and I export it all out and send it to

00:47:12,760 --> 00:47:16,600
you if you go spin up a Drupal site and

00:47:15,220 --> 00:47:18,010
import it in your site it's gonna give

00:47:16,600 --> 00:47:20,860
you an air it's like you can't use

00:47:18,010 --> 00:47:23,710
another site's config true story and

00:47:20,860 --> 00:47:24,880
there's some reasons for that but it

00:47:23,710 --> 00:47:26,620
makes it a little bit difficult because

00:47:24,880 --> 00:47:29,500
I just can't take what config from one

00:47:26,620 --> 00:47:32,050
and put it in the other very easily but

00:47:29,500 --> 00:47:35,590
we can do it so but this is a challenge

00:47:32,050 --> 00:47:38,260
we deal with so one option that we can

00:47:35,590 --> 00:47:40,830
do to deal with is the drush config

00:47:38,260 --> 00:47:43,720
import command has a - - partial option

00:47:40,830 --> 00:47:45,880
it'll soon be available at this URL the

00:47:43,720 --> 00:47:47,260
dress 8x8 it's only in the 8th branch

00:47:45,880 --> 00:47:48,970
which isn't yet address commands but it

00:47:47,260 --> 00:47:51,490
will when it will be it'll be there and

00:47:48,970 --> 00:47:53,800
the cool thing about partial is that say

00:47:51,490 --> 00:47:56,590
I make a really awesome blog blog system

00:47:53,800 --> 00:47:58,870
I've got five fields I've got a content

00:47:56,590 --> 00:48:01,240
type I've got a view I could export just

00:47:58,870 --> 00:48:04,390
those pieces and I could end up with

00:48:01,240 --> 00:48:06,400
like five or six of these files I could

00:48:04,390 --> 00:48:08,380
post them on my blog and say hey did you

00:48:06,400 --> 00:48:10,300
like this system do you want it yourself

00:48:08,380 --> 00:48:13,510
you could put those files into a

00:48:10,300 --> 00:48:15,460
directory run drush configure import - -

00:48:13,510 --> 00:48:17,470
partial and it'll actually pull all that

00:48:15,460 --> 00:48:19,060
stuff into your repository and it will

00:48:17,470 --> 00:48:21,280
just work with those files it'll just

00:48:19,060 --> 00:48:22,810
add that content type that view it won't

00:48:21,280 --> 00:48:24,760
be like oh there's not all the other

00:48:22,810 --> 00:48:27,490
content types so delete everything which

00:48:24,760 --> 00:48:29,020
is what Drupal would normally do so this

00:48:27,490 --> 00:48:30,220
is a cool way to share and I can see a

00:48:29,020 --> 00:48:32,170
world where people are tweeting and

00:48:30,220 --> 00:48:34,780
blogging and posting little config stuff

00:48:32,170 --> 00:48:36,430
they've done and let people share it

00:48:34,780 --> 00:48:39,460
that way so that's one way to share

00:48:36,430 --> 00:48:40,660
pretty easy to use um for what hardline

00:48:39,460 --> 00:48:42,430
even include slab of this you can also

00:48:40,660 --> 00:48:44,230
use the UI that most showed

00:48:42,430 --> 00:48:46,869
to do the import where if you have five

00:48:44,230 --> 00:48:50,140
files you could just go to single import

00:48:46,869 --> 00:48:54,309
one two three four five times totally

00:48:50,140 --> 00:48:56,170
possible second way you can share sort

00:48:54,309 --> 00:48:58,809
of config and this gets a little more of

00:48:56,170 --> 00:49:01,420
the developer world but if you write

00:48:58,809 --> 00:49:04,329
your own custom module you can actually

00:49:01,420 --> 00:49:07,359
provide new configuration defaults for

00:49:04,329 --> 00:49:10,000
the site so you basically make a folder

00:49:07,359 --> 00:49:11,440
config install and you put all the ammo

00:49:10,000 --> 00:49:14,230
files for the default for your module

00:49:11,440 --> 00:49:16,359
there so five shipping a cool module

00:49:14,230 --> 00:49:18,339
that does an awesome slideshow I want to

00:49:16,359 --> 00:49:20,589
make sure all the config is right I can

00:49:18,339 --> 00:49:23,109
put my default config in that directory

00:49:20,589 --> 00:49:25,569
and then everybody gets it and that's

00:49:23,109 --> 00:49:27,550
pretty cool this can't be I can't

00:49:25,569 --> 00:49:29,200
override existing config this way but I

00:49:27,550 --> 00:49:30,970
can add new config which is pretty

00:49:29,200 --> 00:49:34,839
awesome so I can share my config that

00:49:30,970 --> 00:49:36,760
way modules can have their defaults and

00:49:34,839 --> 00:49:38,890
that's neat that's works way better than

00:49:36,760 --> 00:49:40,690
like a variable get with like a default

00:49:38,890 --> 00:49:42,550
value that's the second argument that

00:49:40,690 --> 00:49:45,880
has to be always put in all the time

00:49:42,550 --> 00:49:47,319
and you just put it in this way the

00:49:45,880 --> 00:49:50,230
limitation though of this and this is

00:49:47,319 --> 00:49:52,299
very important for if you're install a

00:49:50,230 --> 00:49:55,750
module with default config it'll only

00:49:52,299 --> 00:49:57,520
read that configuration one time at the

00:49:55,750 --> 00:49:59,349
beginning it'll take the default and

00:49:57,520 --> 00:50:01,089
they'll put it in but if you get a new

00:49:59,349 --> 00:50:02,859
version of the module or maybe they

00:50:01,089 --> 00:50:06,069
change the description to make it better

00:50:02,859 --> 00:50:07,900
you won't get that that new that new

00:50:06,069 --> 00:50:11,589
configuration its one-time only

00:50:07,900 --> 00:50:12,910
operation luckily there is a module that

00:50:11,589 --> 00:50:17,380
will not make it a one-time only

00:50:12,910 --> 00:50:20,049
operation modpodge a module config

00:50:17,380 --> 00:50:23,829
update config update will allow you as a

00:50:20,049 --> 00:50:26,950
module maintainer to have a module with

00:50:23,829 --> 00:50:29,020
config that will get if you update the

00:50:26,950 --> 00:50:30,849
config it'll actually give you some some

00:50:29,020 --> 00:50:32,559
interactive ability to then continually

00:50:30,849 --> 00:50:33,309
update that configuration and that's

00:50:32,559 --> 00:50:34,960
pretty cool

00:50:33,309 --> 00:50:37,450
you can have a custom module for your

00:50:34,960 --> 00:50:39,040
site that has some default config that

00:50:37,450 --> 00:50:41,470
you can keep updating which is really

00:50:39,040 --> 00:50:44,290
awesome and this module is the

00:50:41,470 --> 00:50:47,650
foundation for coming full circle in

00:50:44,290 --> 00:50:49,869
this talk two features module which does

00:50:47,650 --> 00:50:52,540
exist for Drupal 8 is actually pretty

00:50:49,869 --> 00:50:54,730
cool and the stuff I point out here is

00:50:52,540 --> 00:50:56,540
that unlike Drupal the Drupal 7 version

00:50:54,730 --> 00:51:00,200
or features has sort its own

00:50:56,540 --> 00:51:02,120
if you look in the menu of this other

00:51:00,200 --> 00:51:04,340
thing features is actually sitting in

00:51:02,120 --> 00:51:05,920
the configuration management menu you

00:51:04,340 --> 00:51:08,330
have synchronized which most showed

00:51:05,920 --> 00:51:11,300
single import export full import export

00:51:08,330 --> 00:51:13,250
and features that it's working with the

00:51:11,300 --> 00:51:15,080
configuration management system so

00:51:13,250 --> 00:51:16,670
features a lot smaller than it is in

00:51:15,080 --> 00:51:18,530
Drupal 7 because I didn't have to do

00:51:16,670 --> 00:51:21,500
crud operations does it need to export

00:51:18,530 --> 00:51:24,800
or import its own stuff all features

00:51:21,500 --> 00:51:27,260
does is use the config update process to

00:51:24,800 --> 00:51:29,510
update default config and allows you to

00:51:27,260 --> 00:51:31,550
make stuff like to make actual features

00:51:29,510 --> 00:51:33,860
here's my article system here's my new

00:51:31,550 --> 00:51:35,540
system so if you are a person who likes

00:51:33,860 --> 00:51:37,610
features and uses it to actually share a

00:51:35,540 --> 00:51:39,170
configuration between sites this is

00:51:37,610 --> 00:51:41,030
still possible using figuration

00:51:39,170 --> 00:51:43,040
management and in my view it's better

00:51:41,030 --> 00:51:44,960
because features can doesn't have to

00:51:43,040 --> 00:51:48,980
work with all the weird exceptions just

00:51:44,960 --> 00:51:51,140
uses the config API so a big picture

00:51:48,980 --> 00:51:52,430
before I take a few questions I feel

00:51:51,140 --> 00:51:54,140
this is gonna change how you do

00:51:52,430 --> 00:51:56,180
development it's gonna allow a lot of

00:51:54,140 --> 00:51:57,470
new things for developers to use it will

00:51:56,180 --> 00:51:59,960
make things that continuous integration

00:51:57,470 --> 00:52:02,210
much easier it will make accountability

00:51:59,960 --> 00:52:04,550
and these other things real for your

00:52:02,210 --> 00:52:07,040
projects and that hopefully this talk

00:52:04,550 --> 00:52:09,110
has helped you to you know get a little

00:52:07,040 --> 00:52:10,790
more love for Farish management and make

00:52:09,110 --> 00:52:12,950
sure that it's your um you know favorite

00:52:10,790 --> 00:52:16,010
and best feature in Drupal 8 because

00:52:12,950 --> 00:52:17,300
it's something I believe well use and if

00:52:16,010 --> 00:52:18,620
you like what we're talking about and

00:52:17,300 --> 00:52:20,990
are more of a developer and building

00:52:18,620 --> 00:52:23,840
your own modules totally check out the

00:52:20,990 --> 00:52:25,280
great Alex pop session tomorrow she's

00:52:23,840 --> 00:52:26,990
going to talk more about configuration

00:52:25,280 --> 00:52:28,490
management but he's gonna get more into

00:52:26,990 --> 00:52:30,440
the developer kind of kind of stuff

00:52:28,490 --> 00:52:32,840
what's a configuration entity you know

00:52:30,440 --> 00:52:34,940
how do I write modules with this um how

00:52:32,840 --> 00:52:36,140
are your Gil schemas and getting this or

00:52:34,940 --> 00:52:38,270
some of the more nitty-gritty about

00:52:36,140 --> 00:52:40,220
using it on a site so if you want more

00:52:38,270 --> 00:52:42,380
connection management Alex is one of the

00:52:40,220 --> 00:52:44,450
co maintainer of the system he also

00:52:42,380 --> 00:52:46,940
knows a bunch of stuff so definitely

00:52:44,450 --> 00:52:48,320
definitely check that out tomorrow other

00:52:46,940 --> 00:52:49,850
than that well we both thank you for

00:52:48,320 --> 00:52:51,200
your attention and we'll take a couple

00:52:49,850 --> 00:52:55,000
of questions that people have it about

00:52:51,200 --> 00:52:55,000
our favorite system into play thank you

00:53:00,400 --> 00:53:05,810
I'll kick it off then what about when

00:53:04,400 --> 00:53:08,360
you don't want the configuration to be

00:53:05,810 --> 00:53:11,750
exactly the same on your live site on

00:53:08,360 --> 00:53:15,020
your dev site your servers might have

00:53:11,750 --> 00:53:17,090
different the hostname your don't want

00:53:15,020 --> 00:53:19,220
to push things actually to MailChimp

00:53:17,090 --> 00:53:25,130
whenever you touch a button in your test

00:53:19,220 --> 00:53:27,140
site and send out 20,000 yeah so a

00:53:25,130 --> 00:53:29,540
couple things which Alex will also talk

00:53:27,140 --> 00:53:30,980
about is all of the configuration man

00:53:29,540 --> 00:53:32,510
all the configuration made a great

00:53:30,980 --> 00:53:33,830
question also by the way all the

00:53:32,510 --> 00:53:36,740
configuration management can be

00:53:33,830 --> 00:53:39,500
overridden in settings not PHP so for

00:53:36,740 --> 00:53:41,300
example you have like in some sort of

00:53:39,500 --> 00:53:43,790
API key that's supposed to be different

00:53:41,300 --> 00:53:46,310
and in tests and dev than in live you

00:53:43,790 --> 00:53:48,290
can just in the settings dot PHP for

00:53:46,310 --> 00:53:50,390
those environments use you know dollar

00:53:48,290 --> 00:53:52,040
site configuration and then the values

00:53:50,390 --> 00:53:54,470
and you can override it on a per site

00:53:52,040 --> 00:53:55,910
basis using settings not PHP and that's

00:53:54,470 --> 00:53:59,570
a good way if you have sort of some

00:53:55,910 --> 00:54:01,580
differences there to deal with oh yeah

00:53:59,570 --> 00:54:03,170
just the the default settings dot PHP

00:54:01,580 --> 00:54:06,050
and Drupal eight actually references

00:54:03,170 --> 00:54:08,690
settings dot local dot PHP so you're

00:54:06,050 --> 00:54:14,030
welcome to put local changes there for

00:54:08,690 --> 00:54:17,290
just that environment right here I can

00:54:14,030 --> 00:54:17,290
repeat the question if you just ask him

00:54:31,760 --> 00:54:36,540
okay so the question was is there still

00:54:34,140 --> 00:54:39,900
a place for hook update n and the

00:54:36,540 --> 00:54:41,369
example was deleting a content type okay

00:54:39,900 --> 00:54:43,080
well there's definitely still hook

00:54:41,369 --> 00:54:45,060
update and still exists in Drupal and

00:54:43,080 --> 00:54:47,580
you're welcome to use it for arbitrary

00:54:45,060 --> 00:54:50,670
updates including things related to

00:54:47,580 --> 00:54:53,670
configuration if you so choose the

00:54:50,670 --> 00:54:54,030
specific example about updates content

00:54:53,670 --> 00:54:56,100
types

00:54:54,030 --> 00:54:57,510
content types are stored only in

00:54:56,100 --> 00:55:02,369
configuration there's no other way to do

00:54:57,510 --> 00:55:04,110
it so if it des fears if it disappears

00:55:02,369 --> 00:55:05,640
from your git directory your staging

00:55:04,110 --> 00:55:07,650
directory and you do an import that

00:55:05,640 --> 00:55:09,720
content type is definitely gone and not

00:55:07,650 --> 00:55:12,030
only is it gone anything that depended

00:55:09,720 --> 00:55:14,730
on that content type is also gone okay

00:55:12,030 --> 00:55:16,200
so I didn't show this in the demo but if

00:55:14,730 --> 00:55:17,430
you delete a content type interpolate

00:55:16,200 --> 00:55:19,950
there's a new section called

00:55:17,430 --> 00:55:21,810
configuration deletions and it will show

00:55:19,950 --> 00:55:24,660
you that such-and-such field are going

00:55:21,810 --> 00:55:26,460
to go away but that blog if I deleted

00:55:24,660 --> 00:55:29,220
the blog content type the the view would

00:55:26,460 --> 00:55:31,440
go away so Drupal 8 is quite good at

00:55:29,220 --> 00:55:33,210
tracking dependencies like that and it

00:55:31,440 --> 00:55:35,280
will keep your Drupal site very clean

00:55:33,210 --> 00:55:38,960
should you choose to delete something so

00:55:35,280 --> 00:55:38,960
that's something to keep in mind there

00:56:00,950 --> 00:56:06,480
ok good question

00:56:03,260 --> 00:56:09,050
so the staging folder that we've

00:56:06,480 --> 00:56:12,119
selected sites default config is

00:56:09,050 --> 00:56:14,430
multi-site friendly so each of your

00:56:12,119 --> 00:56:18,030
multi sites will have one of those so

00:56:14,430 --> 00:56:20,040
site slash site two slash config would

00:56:18,030 --> 00:56:21,630
be the next could finish config folder

00:56:20,040 --> 00:56:25,170
and so on so everyone gets our own

00:56:21,630 --> 00:56:26,850
folder in in yet I think you were

00:56:25,170 --> 00:56:29,580
starting to allude to the next level of

00:56:26,850 --> 00:56:35,210
complexity which is about how do I share

00:56:29,580 --> 00:56:37,890
my config across my multi sites and I

00:56:35,210 --> 00:56:40,650
don't have an answer for that one right

00:56:37,890 --> 00:56:41,609
now they all are different essentially

00:56:40,650 --> 00:56:44,130
they're all different folders in your

00:56:41,609 --> 00:56:46,890
get I think you can do some git

00:56:44,130 --> 00:56:48,870
Joe work to try to make them not be

00:56:46,890 --> 00:56:51,840
different or symlinks so that they're

00:56:48,870 --> 00:56:55,830
not different I think that you are in

00:56:51,840 --> 00:56:59,130
real trouble and in super-ninja land if

00:56:55,830 --> 00:57:31,980
you go that way but you know you guys

00:56:59,130 --> 00:57:34,650
are smart so you'll figure it out yeah

00:57:31,980 --> 00:57:37,340
so like the the library content

00:57:34,650 --> 00:57:40,170
configuration can get a little blurry

00:57:37,340 --> 00:57:41,760
for it I wouldn't propose know exactly

00:57:40,170 --> 00:57:44,880
all the different different things but

00:57:41,760 --> 00:57:47,160
something like you know the specific

00:57:44,880 --> 00:57:49,260
maybe callbacks in page manager would be

00:57:47,160 --> 00:57:51,600
configuration but maybe the individual

00:57:49,260 --> 00:57:53,490
you know content that we're placing in

00:57:51,600 --> 00:57:57,090
the panel maybe configure something like

00:57:53,490 --> 00:57:59,010
that the the line the line is a little

00:57:57,090 --> 00:58:00,510
bit arbitrage because people use Drupal

00:57:59,010 --> 00:58:02,370
in different ways like I've seen

00:58:00,510 --> 00:58:03,960
taxonomy terms for example be like

00:58:02,370 --> 00:58:07,800
structural parts of the site

00:58:03,960 --> 00:58:25,830
configuration that's like design it that

00:58:07,800 --> 00:58:26,970
way so stop working on that part because

00:58:25,830 --> 00:58:29,010
we're gonna make some changes in

00:58:26,970 --> 00:58:34,220
configuration we'll have it through

00:58:29,010 --> 00:58:34,220
testing and staging and about three days

00:58:35,780 --> 00:58:42,930
you know I think if you want it to be

00:58:39,840 --> 00:58:45,150
editable and testable then you put it in

00:58:42,930 --> 00:58:48,120
config and if that's actually a bad

00:58:45,150 --> 00:58:49,470
thing because of the speed of that you

00:58:48,120 --> 00:58:51,150
need to change it maybe it's not a good

00:58:49,470 --> 00:58:52,680
idea so I think we'd really have to ask

00:58:51,150 --> 00:58:54,030
the panel's folks how they're

00:58:52,680 --> 00:58:56,040
architecting panels for Drupal 8 and

00:58:54,030 --> 00:58:56,849
what is configure what isn't I'm not too

00:58:56,040 --> 00:59:02,609
familiar with how

00:58:56,849 --> 00:59:17,970
that's going at that level anyway yes

00:59:02,609 --> 00:59:20,309
sir yeah so the question is if I changed

00:59:17,970 --> 00:59:22,049
a field name for you no reasons I might

00:59:20,309 --> 00:59:24,029
want to change a field name how do we

00:59:22,049 --> 00:59:25,789
handle that in configuration management

00:59:24,029 --> 00:59:27,869
because this could cause some trouble I

00:59:25,789 --> 00:59:29,670
think my first cot would be like

00:59:27,869 --> 00:59:31,799
renaming field field names especially

00:59:29,670 --> 00:59:33,479
machine names is a little tricky anyway

00:59:31,799 --> 00:59:35,430
in Drupal it's not something I probably

00:59:33,479 --> 00:59:37,710
would recommend I changed the label for

00:59:35,430 --> 00:59:38,940
sure but this could be a situation where

00:59:37,710 --> 00:59:40,769
if you do would need to change the field

00:59:38,940 --> 00:59:42,390
name that this is like where you could

00:59:40,769 --> 00:59:43,710
use like a hook update and function

00:59:42,390 --> 00:59:46,380
because configuration management won't

00:59:43,710 --> 00:59:48,509
support that operation for you but what

00:59:46,380 --> 00:59:50,009
you could do is as part of the update

00:59:48,509 --> 00:59:52,499
process you could do actually some

00:59:50,009 --> 00:59:54,089
readjustment as well all of the

00:59:52,499 --> 00:59:55,229
configuration management stuff that

00:59:54,089 --> 00:59:57,630
we're showing with a config import

00:59:55,229 --> 00:59:59,249
config export all uses the configuration

00:59:57,630 --> 01:00:01,319
API and you could actually call those

00:59:59,249 --> 01:00:03,299
operations outside of the module and

01:00:01,319 --> 01:00:05,190
outside of drush and so you can write

01:00:03,299 --> 01:00:07,019
logic that says hey get this day to get

01:00:05,190 --> 01:00:08,969
this config change it in this way resave

01:00:07,019 --> 01:00:11,549
it modify the data that's a more

01:00:08,969 --> 01:00:12,630
advanced operation but I would say you

01:00:11,549 --> 01:00:14,759
could definitely use the configuration

01:00:12,630 --> 01:00:16,140
API to do do all this all the stuff for

01:00:14,759 --> 01:00:20,359
your own code that we're showing in the

01:00:16,140 --> 01:00:22,650
demo as you like it I'll just add that

01:00:20,359 --> 01:00:24,569
like in Drupal 7 the field API

01:00:22,650 --> 01:00:27,509
completely denies you the ability to

01:00:24,569 --> 01:00:29,190
rename a field name it doesn't know how

01:00:27,509 --> 01:00:31,200
to migrate your data from one table to

01:00:29,190 --> 01:00:33,390
the other and so it just denies it so

01:00:31,200 --> 01:00:39,420
like in Drupal 7 you're on your own if

01:00:33,390 --> 01:00:40,710
you want to do that operation other than

01:00:39,420 --> 01:00:42,719
that we thank you all for coming to this

01:00:40,710 --> 01:00:43,619
talk we're a round on conference and if

01:00:42,719 --> 01:00:45,380
you have questions or questions just

01:00:43,619 --> 01:00:49,549
come up here we'll keep chatting but um

01:00:45,380 --> 01:00:49,549

YouTube URL: https://www.youtube.com/watch?v=8F5glFDan1Q


