Title: DrupalCon Barcelona 2015: Mastering Twig
Publication date: 2015-09-22
Playlist: DrupalCon Barcelona - September 2015
Description: 
	Twig is the template engine used by Drupal 8 and other modern PHP

applications. Twig's expressiveness, consistency and secure-by-default

policy are still unparalleled among PHP's template engines.



In this session you'll learn advanced techniques, tips and tricks useful

for real-world applications and uncommonly used features that will allow

you to master Twig.
Captions: 
	00:04:08,280 --> 00:04:12,870
okay good good evening everyone and

00:04:10,680 --> 00:04:16,950
thanks for coming to the session about

00:04:12,870 --> 00:04:19,320
tweakin drupal let me first obviously

00:04:16,950 --> 00:04:21,359
introduce myself my name is career I

00:04:19,320 --> 00:04:22,800
work for this company called central

00:04:21,359 --> 00:04:25,770
apps which is the company that created

00:04:22,800 --> 00:04:28,110
both symphony and twig and many other

00:04:25,770 --> 00:04:30,510
open source projects which obviously are

00:04:28,110 --> 00:04:33,960
the main new technologies behind do

00:04:30,510 --> 00:04:37,080
ballet about this talk we won't talk

00:04:33,960 --> 00:04:39,780
about twix basics okay and we want

00:04:37,080 --> 00:04:41,820
either talk about all the low level

00:04:39,780 --> 00:04:43,910
technical details of everything we're

00:04:41,820 --> 00:04:46,260
going to sew but don't worry because the

00:04:43,910 --> 00:04:48,270
documentation is really excellent so all

00:04:46,260 --> 00:04:52,350
the details are there so you won't get

00:04:48,270 --> 00:04:55,680
blows home in real life okay okay drupal

00:04:52,350 --> 00:04:58,710
and twig twig hurts a lot of great

00:04:55,680 --> 00:05:02,100
features that's why drupal use choose to

00:04:58,710 --> 00:05:05,190
use this to again a template engine like

00:05:02,100 --> 00:05:08,130
Shaquille fast easy to learn cetera but

00:05:05,190 --> 00:05:12,780
to me they may the best feature of of

00:05:08,130 --> 00:05:15,810
tweak is that is very consistent in two

00:05:12,780 --> 00:05:18,479
ways the first one is the twink defines

00:05:15,810 --> 00:05:20,610
a very very small set of features so

00:05:18,479 --> 00:05:23,550
it's really easy to learn there are

00:05:20,610 --> 00:05:26,400
people concerned about hey I I know PHP

00:05:23,550 --> 00:05:28,560
and now I need to learn a new template

00:05:26,400 --> 00:05:31,280
engine and okay it's going to be very

00:05:28,560 --> 00:05:34,110
very easy to learn okay don't worry and

00:05:31,280 --> 00:05:37,140
even if it's a very small set of feature

00:05:34,110 --> 00:05:42,000
is enough to create any kind of template

00:05:37,140 --> 00:05:44,370
of any level of complexity okay and the

00:05:42,000 --> 00:05:48,539
syntax is very consistent since day one

00:05:44,370 --> 00:05:50,789
it hasn't changed in any way even if

00:05:48,539 --> 00:05:55,020
they are adding new features

00:05:50,789 --> 00:05:57,030
continuously it hasn't changed okay so

00:05:55,020 --> 00:05:58,710
that's why I think using twix ten places

00:05:57,030 --> 00:06:01,620
the wedge decision drupal ever made I

00:05:58,710 --> 00:06:05,850
know that it sounds like wow but I'm

00:06:01,620 --> 00:06:08,550
really confident about this okay however

00:06:05,850 --> 00:06:11,789
if you see all the twig features which

00:06:08,550 --> 00:06:16,409
are a lot drupal 8 at least the built-in

00:06:11,789 --> 00:06:18,409
themes only use like the thirty percent

00:06:16,409 --> 00:06:22,699
or less of the tick feature

00:06:18,409 --> 00:06:25,580
okay it's I'm very disappointed looking

00:06:22,699 --> 00:06:28,069
at the built-in templates so far they

00:06:25,580 --> 00:06:30,379
are not really using all the great

00:06:28,069 --> 00:06:33,110
features of tweaked and it's sad because

00:06:30,379 --> 00:06:35,719
Drupal is great week is great if both

00:06:33,110 --> 00:06:39,349
work together they could do really

00:06:35,719 --> 00:06:42,289
amazing things okay so we're going to

00:06:39,349 --> 00:06:46,099
see several things related to do it a

00:06:42,289 --> 00:06:49,669
lot of features so we don't have many

00:06:46,099 --> 00:06:52,360
times so let's start okay with the first

00:06:49,669 --> 00:06:55,069
blog with these accessing borrowers okay

00:06:52,360 --> 00:06:57,079
for each block the first slide will be

00:06:55,069 --> 00:06:59,989
this one why is this important why do

00:06:57,079 --> 00:07:02,659
you have to know this this case you can

00:06:59,989 --> 00:07:06,469
improve the application performance a

00:07:02,659 --> 00:07:08,809
lot if you do this okay if you want to

00:07:06,469 --> 00:07:11,419
output a simple variable like this one

00:07:08,809 --> 00:07:14,659
this is a real example from real Drupal

00:07:11,419 --> 00:07:17,149
8 template okay did you uh put a simple

00:07:14,659 --> 00:07:19,459
variable nothing exchange nothing

00:07:17,149 --> 00:07:22,129
strange happens it just me up to the

00:07:19,459 --> 00:07:24,110
value and that's that's all but if you

00:07:22,129 --> 00:07:26,839
all put a complex variable which is

00:07:24,110 --> 00:07:30,889
which are this one's which contains that

00:07:26,839 --> 00:07:35,449
dot here the trick magic happens when

00:07:30,889 --> 00:07:39,050
you put this in a template twix tries to

00:07:35,449 --> 00:07:42,589
do all of this to get the real value so

00:07:39,050 --> 00:07:45,349
links could be a key of a Content array

00:07:42,589 --> 00:07:49,039
or it could be a method or a property or

00:07:45,349 --> 00:07:51,289
a gator or ar e sir okay take price all

00:07:49,039 --> 00:07:54,800
of this in this order and the first one

00:07:51,289 --> 00:07:56,839
that exists is using the template okay

00:07:54,800 --> 00:07:59,659
so it's great for the template you don't

00:07:56,839 --> 00:08:02,559
have to change the template if the

00:07:59,659 --> 00:08:05,119
application change but obviously

00:08:02,559 --> 00:08:09,349
regarding performance this has some

00:08:05,119 --> 00:08:12,439
impact okay so especially for grupal I

00:08:09,349 --> 00:08:14,449
mean your templates are going to be very

00:08:12,439 --> 00:08:16,789
complex we are going to access a lot of

00:08:14,449 --> 00:08:20,089
variables so these matters this

00:08:16,789 --> 00:08:22,639
performance performance penalty so to

00:08:20,089 --> 00:08:25,579
provides a solution for this is a PHP

00:08:22,639 --> 00:08:29,200
extension which it doesn't really do

00:08:25,579 --> 00:08:31,330
anything else but resolving the

00:08:29,200 --> 00:08:34,300
the variable logic okay all these

00:08:31,330 --> 00:08:36,610
resolving my geek stuff is done in the

00:08:34,300 --> 00:08:40,540
HP extension so you can get just by

00:08:36,610 --> 00:08:42,790
installing the PHP extension just a at

00:08:40,540 --> 00:08:45,670
least fifteen percent perform increase

00:08:42,790 --> 00:08:47,830
in your website or your application okay

00:08:45,670 --> 00:08:50,650
so you should really install this pitch

00:08:47,830 --> 00:08:52,540
potential and the last thing about

00:08:50,650 --> 00:08:55,630
variables is that some of the Drupal

00:08:52,540 --> 00:08:59,830
variables are wrongly named like the

00:08:55,630 --> 00:09:02,320
mark up here if you put that twig is not

00:08:59,830 --> 00:09:04,930
going to work okay because of that

00:09:02,320 --> 00:09:08,710
character so you using a lot of Drupal

00:09:04,930 --> 00:09:10,780
templates this alternative way of doing

00:09:08,710 --> 00:09:13,960
things okay but the natural thing is

00:09:10,780 --> 00:09:19,150
using the dot does the way to do but

00:09:13,960 --> 00:09:21,400
sometimes you can do that in Rupa okay

00:09:19,150 --> 00:09:26,110
defensive programming this blog is val

00:09:21,400 --> 00:09:28,030
is about since sooner or later errors

00:09:26,110 --> 00:09:30,250
will happen in your application in your

00:09:28,030 --> 00:09:33,160
website what really matters is good you

00:09:30,250 --> 00:09:35,830
do with that error happens how do you

00:09:33,160 --> 00:09:37,810
recover from that situation okay so

00:09:35,830 --> 00:09:40,690
we're going to see several techniques

00:09:37,810 --> 00:09:43,510
tips tricks okay first one is dealing

00:09:40,690 --> 00:09:45,250
with empty or undefined variables there

00:09:43,510 --> 00:09:47,350
are a lot of different ways of dealing

00:09:45,250 --> 00:09:52,270
with this i will recommend using these

00:09:47,350 --> 00:09:54,640
two methods the first one if an the name

00:09:52,270 --> 00:09:58,000
of the variable checks if the variable

00:09:54,640 --> 00:10:00,880
is not move okay not empty veronique for

00:09:58,000 --> 00:10:05,350
a strain or array not empty and no zero

00:10:00,880 --> 00:10:07,480
from numbers okay however because you

00:10:05,350 --> 00:10:10,840
because it only works if the variable is

00:10:07,480 --> 00:10:12,550
defined if that variable doesn't exist

00:10:10,840 --> 00:10:15,340
in the template we are going to get an

00:10:12,550 --> 00:10:17,800
error okay in the second case this one

00:10:15,340 --> 00:10:19,450
the default filter this is always going

00:10:17,800 --> 00:10:21,760
to work it doesn't matter if the

00:10:19,450 --> 00:10:23,620
variable is empty doesn't exist is not

00:10:21,760 --> 00:10:26,410
defined doesn't matter it's always going

00:10:23,620 --> 00:10:29,470
to work so you can combine both like

00:10:26,410 --> 00:10:33,270
this and this is always going to work no

00:10:29,470 --> 00:10:33,270
matter what about the lab area

00:10:33,950 --> 00:10:39,710
and in case you don't know if a variable

00:10:36,890 --> 00:10:41,660
is defined or not interpolates this

00:10:39,710 --> 00:10:44,030
provincial not happen that's why I I put

00:10:41,660 --> 00:10:46,520
that in the right but that's in case if

00:10:44,030 --> 00:10:49,100
you need to check if the variable really

00:10:46,520 --> 00:10:52,850
exists or not you should use this check

00:10:49,100 --> 00:10:55,190
if variable is defined of course there

00:10:52,850 --> 00:10:59,090
are other specific checks like it's not

00:10:55,190 --> 00:11:01,520
only some tea or whatever okay okay

00:10:59,090 --> 00:11:05,240
second technique for empty collections

00:11:01,520 --> 00:11:08,150
you have an empty array of elements you

00:11:05,240 --> 00:11:10,700
can take care of that with this one

00:11:08,150 --> 00:11:13,100
which obviously in regular PHP it

00:11:10,700 --> 00:11:15,860
doesn't exist but here in to it you can

00:11:13,100 --> 00:11:18,020
use therefore else which is really

00:11:15,860 --> 00:11:21,050
really convenient and you can even

00:11:18,020 --> 00:11:23,600
filter run elements or element you don't

00:11:21,050 --> 00:11:27,920
want to fill to output in the in the

00:11:23,600 --> 00:11:30,890
loop with a if close so in PHP you have

00:11:27,920 --> 00:11:32,570
the fall for it do while whatever here

00:11:30,890 --> 00:11:37,520
you only have the fall but you have the

00:11:32,570 --> 00:11:40,490
four LS and the four if else now

00:11:37,520 --> 00:11:43,850
avoiding missing template when you use

00:11:40,490 --> 00:11:47,540
the include instruction to include any

00:11:43,850 --> 00:11:49,250
fragment of twist this is usually going

00:11:47,540 --> 00:11:52,160
to work I mean this is a regular

00:11:49,250 --> 00:11:55,220
template it's probably define in your

00:11:52,160 --> 00:11:58,310
theme the menu dot to template so this

00:11:55,220 --> 00:12:01,430
is gonna work always however if you do

00:11:58,310 --> 00:12:04,640
this if you try to include dynamic

00:12:01,430 --> 00:12:08,000
template this is probably in some cases

00:12:04,640 --> 00:12:10,670
not going to work because that name is

00:12:08,000 --> 00:12:12,590
dynamic is variables so probably the

00:12:10,670 --> 00:12:16,490
template the final template doesn't

00:12:12,590 --> 00:12:18,470
exist sometimes okay so there are two

00:12:16,490 --> 00:12:20,570
ways to avoid this problem the first one

00:12:18,470 --> 00:12:22,750
in the include instruction you can

00:12:20,570 --> 00:12:26,780
provide a collection of templates and

00:12:22,750 --> 00:12:28,550
they act as fall back to price to load

00:12:26,780 --> 00:12:30,230
the first one if it doesn't exist trace

00:12:28,550 --> 00:12:32,510
the second one the third one and

00:12:30,230 --> 00:12:35,420
obviously if none of these X's and error

00:12:32,510 --> 00:12:40,780
happens okay but the first one that

00:12:35,420 --> 00:12:43,670
exists is included the other technique

00:12:40,780 --> 00:12:44,660
sometimes you cannot really provide for

00:12:43,670 --> 00:12:48,319
back templates

00:12:44,660 --> 00:12:50,240
so you can instead of letting that error

00:12:48,319 --> 00:12:52,279
happening and the user getting a bad

00:12:50,240 --> 00:12:55,009
experience seeing an error in the world

00:12:52,279 --> 00:12:58,449
the website you can ignore the missing

00:12:55,009 --> 00:13:01,279
template maybe the user see a blank

00:12:58,449 --> 00:13:02,750
sectio sectioning in the web page or

00:13:01,279 --> 00:13:07,720
something like that but it's better than

00:13:02,750 --> 00:13:07,720
an actual error so you can do this you

00:13:11,019 --> 00:13:16,879
can tell to it hey if this template

00:13:14,300 --> 00:13:21,129
doesn't exist ignore the error don't

00:13:16,879 --> 00:13:25,160
include anything don't trigger another

00:13:21,129 --> 00:13:28,069
okay now filters this is the list of

00:13:25,160 --> 00:13:30,050
filters defined by drupal 8 so far it's

00:13:28,069 --> 00:13:32,209
not released yet so we we don't really

00:13:30,050 --> 00:13:34,399
know the final list but so far this is

00:13:32,209 --> 00:13:37,730
the list of filters provided by my

00:13:34,399 --> 00:13:39,709
trooper however being such a complex pro

00:13:37,730 --> 00:13:43,160
yet and long-standing project is going

00:13:39,709 --> 00:13:45,800
to be alive for years drupal probably

00:13:43,160 --> 00:13:48,860
they add and remove some of these

00:13:45,800 --> 00:13:51,800
filters the problem is that if they

00:13:48,860 --> 00:13:55,790
remove the filter your your themes your

00:13:51,800 --> 00:13:58,069
templates will break so recently twix

00:13:55,790 --> 00:14:00,259
has added this new feature would you

00:13:58,069 --> 00:14:03,319
create a filter you can define your own

00:14:00,259 --> 00:14:05,660
filters for your own things you can say

00:14:03,319 --> 00:14:08,449
hey this filter is now deprecated and

00:14:05,660 --> 00:14:11,689
the new one you should use instead of

00:14:08,449 --> 00:14:14,199
this one is another one okay this is the

00:14:11,689 --> 00:14:16,459
way to do those breaks in your

00:14:14,199 --> 00:14:20,029
applications and in your field okay this

00:14:16,459 --> 00:14:22,160
is the right way to do things in some

00:14:20,029 --> 00:14:24,709
applications like symphony this kind of

00:14:22,160 --> 00:14:27,380
errors are log and you can see the

00:14:24,709 --> 00:14:29,630
message you are using deprecated filter

00:14:27,380 --> 00:14:32,509
please update it as soon as possible and

00:14:29,630 --> 00:14:34,759
lalala in Drupal still you don't have

00:14:32,509 --> 00:14:36,410
this information but probably when

00:14:34,759 --> 00:14:39,290
through police finally released you'll

00:14:36,410 --> 00:14:42,439
get this log information also okay but

00:14:39,290 --> 00:14:45,829
for now you can see this information and

00:14:42,439 --> 00:14:48,589
this check also important if you use a

00:14:45,829 --> 00:14:50,569
lot of blogs and you do advanced stuff

00:14:48,589 --> 00:14:52,309
with your templates you can check if

00:14:50,569 --> 00:14:57,350
something is a blog or not if it's

00:14:52,309 --> 00:14:59,030
defined as a blog or not but this is for

00:14:57,350 --> 00:15:01,550
tweaked version which hasn't been

00:14:59,030 --> 00:15:04,540
released yet case for the next version

00:15:01,550 --> 00:15:07,220
of to this will be available value

00:15:04,540 --> 00:15:12,500
important because Drupal uses a lot of

00:15:07,220 --> 00:15:15,470
blocks in the template okay white spaces

00:15:12,500 --> 00:15:18,860
in this blog first I'm going to say to

00:15:15,470 --> 00:15:21,020
tell you a please don't care about white

00:15:18,860 --> 00:15:23,000
spaces and in the second part i'm going

00:15:21,020 --> 00:15:27,290
to say hey please care about why these

00:15:23,000 --> 00:15:30,440
spaces in some cases okay so first I

00:15:27,290 --> 00:15:34,370
want you to save time okay this is a tip

00:15:30,440 --> 00:15:37,430
from being happy pop by having made the

00:15:34,370 --> 00:15:40,100
templates for a few years with two okay

00:15:37,430 --> 00:15:43,130
so this is a trick from from experience

00:15:40,100 --> 00:15:45,230
okay so you have the following in a pic

00:15:43,130 --> 00:15:47,720
template the output obviously will be

00:15:45,230 --> 00:15:50,540
this one okay obviously because you

00:15:47,720 --> 00:15:53,630
don't are using you are really not using

00:15:50,540 --> 00:15:58,310
any tweet feature case pure HTML code

00:15:53,630 --> 00:16:02,300
but if you do this the output won't be

00:15:58,310 --> 00:16:04,220
the same you take a look it looks like

00:16:02,300 --> 00:16:08,450
it's the same but the output will be

00:16:04,220 --> 00:16:11,060
this one why because in the twix

00:16:08,450 --> 00:16:15,170
template there are these white spaces

00:16:11,060 --> 00:16:18,230
which are this one this is the green one

00:16:15,170 --> 00:16:20,660
and this is the orange one okay the

00:16:18,230 --> 00:16:24,260
problem is the orange space white space

00:16:20,660 --> 00:16:28,100
which breaks the lineman of the HTML

00:16:24,260 --> 00:16:31,280
templates that that's the problem int

00:16:28,100 --> 00:16:33,140
week obviously you can fix this with two

00:16:31,280 --> 00:16:39,200
alternatives with the space letters or

00:16:33,140 --> 00:16:41,690
with a dash to attack okay but my

00:16:39,200 --> 00:16:45,620
recommendation is please don't waste

00:16:41,690 --> 00:16:48,680
your time with this trying to fix the

00:16:45,620 --> 00:16:52,100
HTML white spaces and alignment please

00:16:48,680 --> 00:16:54,950
don't waste your time okay tooth

00:16:52,100 --> 00:16:57,530
template should be readable HTML should

00:16:54,950 --> 00:17:00,050
not I mean you are working with the 210

00:16:57,530 --> 00:17:03,440
place everywhere originally that's what

00:17:00,050 --> 00:17:06,160
you're working on the HTML is going to

00:17:03,440 --> 00:17:08,680
be sent to the browser minimize com

00:17:06,160 --> 00:17:11,050
and you want to be a mess so don't care

00:17:08,680 --> 00:17:14,520
about the HTML lineman and white space

00:17:11,050 --> 00:17:17,830
and things like that it's not worth it

00:17:14,520 --> 00:17:21,420
however sometimes you need to add I

00:17:17,830 --> 00:17:24,820
think you need to add some white spaces

00:17:21,420 --> 00:17:28,360
here for support on this real Drupal 8

00:17:24,820 --> 00:17:32,950
template in my opinion it has a minor

00:17:28,360 --> 00:17:35,410
problem which is this one as you can see

00:17:32,950 --> 00:17:38,200
the HTML content and the trick contest

00:17:35,410 --> 00:17:42,100
they are not separated for by a white

00:17:38,200 --> 00:17:44,680
space they are absolutely close why do

00:17:42,100 --> 00:17:47,380
they do this obviously because when

00:17:44,680 --> 00:17:50,410
title attribute is empty the generated

00:17:47,380 --> 00:17:53,890
HTML which is the second one is absolute

00:17:50,410 --> 00:17:57,640
perfect HTML code and in the first case

00:17:53,890 --> 00:18:01,230
obviously is also correct my

00:17:57,640 --> 00:18:04,150
recommendation is to always separate

00:18:01,230 --> 00:18:07,450
HTML and twig code with a white space

00:18:04,150 --> 00:18:09,760
and I know then if title attribute is

00:18:07,450 --> 00:18:12,250
empty you will end up with a white space

00:18:09,760 --> 00:18:15,600
with an extra work space my

00:18:12,250 --> 00:18:19,300
recommendation it does not matter at all

00:18:15,600 --> 00:18:22,030
this is valid HTML valid code it works

00:18:19,300 --> 00:18:24,820
perfectly and the twix template is more

00:18:22,030 --> 00:18:27,880
readable with that work space and this

00:18:24,820 --> 00:18:30,010
case is even more clear again real

00:18:27,880 --> 00:18:34,480
Drupal template and I think this is a

00:18:30,010 --> 00:18:37,630
real bad practice as you can see as

00:18:34,480 --> 00:18:40,060
always the HTML they generated HTML is

00:18:37,630 --> 00:18:45,250
perfect in both cases if height name

00:18:40,060 --> 00:18:48,940
exists or not okay but here are very

00:18:45,250 --> 00:18:51,730
very serious problems first you are

00:18:48,940 --> 00:18:55,330
hiding HTML things like the class

00:18:51,730 --> 00:18:57,880
attribute inside twig strings this is

00:18:55,330 --> 00:19:00,070
very easy to overlook and good and to to

00:18:57,880 --> 00:19:03,840
make mistakes this is the first bad

00:19:00,070 --> 00:19:07,630
practice and the second one is this one

00:19:03,840 --> 00:19:09,730
because we want perfect HTML we are

00:19:07,630 --> 00:19:12,390
doing weird things with the white spaces

00:19:09,730 --> 00:19:15,430
into it this means that if you remove

00:19:12,390 --> 00:19:16,480
accidentally that white specks all that

00:19:15,430 --> 00:19:18,160
page design is going

00:19:16,480 --> 00:19:21,070
to break and you're going to spend

00:19:18,160 --> 00:19:23,679
several hours trying to see what the

00:19:21,070 --> 00:19:25,630
problem is and what the CSS and things

00:19:23,679 --> 00:19:29,020
like that is not working it's because of

00:19:25,630 --> 00:19:31,780
that did you remove that quite space you

00:19:29,020 --> 00:19:37,480
break everything so I recommend you to

00:19:31,780 --> 00:19:39,790
do like that this is the my opinion the

00:19:37,480 --> 00:19:41,919
best way to do this obviously when I

00:19:39,790 --> 00:19:45,520
name doesn't exist you end up with an

00:19:41,919 --> 00:19:48,880
empty class attribute which again it

00:19:45,520 --> 00:19:51,520
doesn't matter it works is valid you can

00:19:48,880 --> 00:19:55,600
check with the official HTML validator

00:19:51,520 --> 00:19:59,530
is absolute valid code so please don't

00:19:55,600 --> 00:20:01,299
mess with white space and clicking HTML

00:19:59,530 --> 00:20:09,760
a sec don't waste your time with this

00:20:01,299 --> 00:20:11,559
okay okay the next block hopefully we'll

00:20:09,760 --> 00:20:15,760
save you a lot of time while developing

00:20:11,559 --> 00:20:18,010
your template your themes set up and the

00:20:15,760 --> 00:20:21,190
first thing I want to tell you is the

00:20:18,010 --> 00:20:24,700
about the twig from configuration this

00:20:21,190 --> 00:20:27,549
file sides / default / service dot yml

00:20:24,700 --> 00:20:30,669
is the way is the place where you can

00:20:27,549 --> 00:20:33,970
define the behavior in Drupal you can

00:20:30,669 --> 00:20:36,940
change three things will occur right now

00:20:33,970 --> 00:20:39,640
about this one debug you said it to draw

00:20:36,940 --> 00:20:41,799
by default is false but if you set it to

00:20:39,640 --> 00:20:44,790
true Drupal is going to add a lot of

00:20:41,799 --> 00:20:48,160
debug information in the generated HTML

00:20:44,790 --> 00:20:50,950
let's see an example this is the real

00:20:48,160 --> 00:20:53,530
HTML generated by drupal by default view

00:20:50,950 --> 00:20:57,429
change nothing but if you set the back

00:20:53,530 --> 00:21:01,090
to true you get this see the difference

00:20:57,429 --> 00:21:04,660
is the same code but you have a lot more

00:21:01,090 --> 00:21:08,070
comments which are this one's for each

00:21:04,660 --> 00:21:11,350
block for its piece of a theme of

00:21:08,070 --> 00:21:13,590
template juice bye-bye drupa we are

00:21:11,350 --> 00:21:16,960
going to see all the full list of

00:21:13,590 --> 00:21:21,040
templates that Drupal try to load before

00:21:16,960 --> 00:21:24,220
loading the real template juice in that

00:21:21,040 --> 00:21:27,640
page okay so you know exactly which

00:21:24,220 --> 00:21:30,040
template you should define to overwrite

00:21:27,640 --> 00:21:33,100
design of that block of that page of

00:21:30,040 --> 00:21:34,690
that thing it's very very easy to to

00:21:33,100 --> 00:21:39,280
know what to do what template to create

00:21:34,690 --> 00:21:41,200
or modify okay another thing that is

00:21:39,280 --> 00:21:42,730
very important by developing things is

00:21:41,200 --> 00:21:45,250
to know which variables which

00:21:42,730 --> 00:21:49,150
information is available in your theme

00:21:45,250 --> 00:21:51,910
your pages in your files okay one great

00:21:49,150 --> 00:21:54,910
thing that Drupal does is to as you can

00:21:51,910 --> 00:21:56,950
see add a lot of comments describing all

00:21:54,910 --> 00:21:59,680
the variables passed to the template

00:21:56,950 --> 00:22:02,590
message so you always know which

00:21:59,680 --> 00:22:05,920
variables are are in the template okay

00:22:02,590 --> 00:22:07,930
however you want a more dynamic way of

00:22:05,920 --> 00:22:11,680
doing things you can use this special

00:22:07,930 --> 00:22:16,090
function called dump and it you put that

00:22:11,680 --> 00:22:19,690
in a meet and play you get this all the

00:22:16,090 --> 00:22:22,420
variables under contents about available

00:22:19,690 --> 00:22:24,490
in that template okay all the

00:22:22,420 --> 00:22:28,210
information all the variables obviously

00:22:24,490 --> 00:22:31,180
this is too much doing the dump like

00:22:28,210 --> 00:22:33,970
that so probably you need this dump only

00:22:31,180 --> 00:22:36,700
the variables you are interested on so

00:22:33,970 --> 00:22:38,740
if you put several names you only get

00:22:36,700 --> 00:22:41,320
those variables which is much better

00:22:38,740 --> 00:22:47,290
obviously while debugging and developing

00:22:41,320 --> 00:22:49,390
the the themes the templates okay as

00:22:47,290 --> 00:22:51,490
always remember that whenever you change

00:22:49,390 --> 00:22:53,740
the both the templates and the

00:22:51,490 --> 00:22:58,210
configuration like a twig configuration

00:22:53,740 --> 00:23:01,450
you have to agree with your cash I do

00:22:58,210 --> 00:23:03,880
probably do it in the wrong way but I

00:23:01,450 --> 00:23:06,910
can recommend you this project drupal

00:23:03,880 --> 00:23:09,610
console which is a great way of

00:23:06,910 --> 00:23:12,190
controlling your Drupal websites and

00:23:09,610 --> 00:23:15,040
applications via the command console

00:23:12,190 --> 00:23:17,590
okay so to reveal the cash for any

00:23:15,040 --> 00:23:20,380
project you just have to execute this

00:23:17,590 --> 00:23:27,240
drupal cash tribute or the shortcut and

00:23:20,380 --> 00:23:27,240
that's all okay

00:23:28,660 --> 00:23:34,490
ok the next blog is about skyping which

00:23:31,820 --> 00:23:39,920
is very important for a sec you to avoid

00:23:34,490 --> 00:23:42,860
security-related issues ok however

00:23:39,920 --> 00:23:45,380
before starting be careful because the

00:23:42,860 --> 00:23:48,920
rupa has replaced the default and twig

00:23:45,380 --> 00:23:51,680
escaping filter and behavior with their

00:23:48,920 --> 00:23:53,840
own so i don't know if when Drew police

00:23:51,680 --> 00:23:58,550
finally release will be the same but for

00:23:53,840 --> 00:24:00,740
now this is a true one of the best

00:23:58,550 --> 00:24:03,410
things of twig compared with other

00:24:00,740 --> 00:24:05,030
Templeton engines that it always escapes

00:24:03,410 --> 00:24:08,480
by default the contents before

00:24:05,030 --> 00:24:10,850
displaying them ok so you have some HTML

00:24:08,480 --> 00:24:14,000
content inside of a screen and you try

00:24:10,850 --> 00:24:17,500
to output that extreme maybe you expect

00:24:14,000 --> 00:24:21,470
it to work it like that but it does not

00:24:17,500 --> 00:24:26,000
it was like this HTML content is not

00:24:21,470 --> 00:24:27,890
rendered its displayed as it is ok by

00:24:26,000 --> 00:24:30,650
default of the lease you can use the

00:24:27,890 --> 00:24:33,350
Royal filter when you are sure that you

00:24:30,650 --> 00:24:35,960
want to output HTML you can use that

00:24:33,350 --> 00:24:40,700
filter to to render the in the real

00:24:35,960 --> 00:24:43,990
content ok that's obvious to

00:24:40,700 --> 00:24:47,990
documentation speaking expense well ok

00:24:43,990 --> 00:24:51,410
however when you cut this some values

00:24:47,990 --> 00:24:56,930
some variable some contents inside not

00:24:51,410 --> 00:24:59,270
HTML but javascript a URL and HTML

00:24:56,930 --> 00:25:02,330
attribute for instance when you have

00:24:59,270 --> 00:25:04,760
that you may have problems you're

00:25:02,330 --> 00:25:08,180
generating an entire javascript file

00:25:04,760 --> 00:25:10,070
with tweek tweek is is smart enough to

00:25:08,180 --> 00:25:14,990
know that you are using javascript and

00:25:10,070 --> 00:25:17,870
so it doesn't scape like HTML it escapes

00:25:14,990 --> 00:25:20,390
contents for javascript but if you are

00:25:17,870 --> 00:25:24,920
using like this putting some javascript

00:25:20,390 --> 00:25:29,060
inside HTML the scaping may be wrong ok

00:25:24,920 --> 00:25:32,150
so you can use this filter the e for

00:25:29,060 --> 00:25:35,750
escape obviously to escape applying

00:25:32,150 --> 00:25:38,780
different strategies for instance i want

00:25:35,750 --> 00:25:39,460
to escape this value for including it in

00:25:38,780 --> 00:25:41,289
your

00:25:39,460 --> 00:25:44,200
well it will be the first case all for

00:25:41,289 --> 00:25:46,240
including it in a JavaScript code there

00:25:44,200 --> 00:25:48,490
are several strategies or explained in

00:25:46,240 --> 00:25:50,919
the documentation obviously okay but you

00:25:48,490 --> 00:25:54,370
should be aware of this okay twig does

00:25:50,919 --> 00:25:56,529
that's it the right mostly but probably

00:25:54,370 --> 00:25:58,570
you need to tweak some things when doing

00:25:56,529 --> 00:26:01,740
advanced things like JavaScript and

00:25:58,570 --> 00:26:01,740
stuff like that

00:26:06,440 --> 00:26:09,440
sorry

00:26:16,640 --> 00:26:19,270
and

00:26:26,119 --> 00:26:32,599
okay I they're talking about filtering

00:26:28,759 --> 00:26:36,199
and filters I guess I guess for drupal 7

00:26:32,599 --> 00:26:39,139
version you mean wait it had something

00:26:36,199 --> 00:26:41,059
like that or okay but in this case that

00:26:39,139 --> 00:26:44,479
they are using their own filter called

00:26:41,059 --> 00:26:46,519
drupal escape which do some changes and

00:26:44,479 --> 00:26:49,549
at the end it uses the tweak one so

00:26:46,519 --> 00:26:51,289
probably when is released by real the

00:26:49,549 --> 00:26:54,019
Drupal 8 final version probably they

00:26:51,289 --> 00:27:03,439
won't use their own escape filter but

00:26:54,019 --> 00:27:05,029
the real one day that week the 21 you

00:27:03,439 --> 00:27:07,449
mean the escape in filter or in general

00:27:05,029 --> 00:27:10,759
the scraping fit that you cannot really

00:27:07,449 --> 00:27:12,859
configure them because I mean if you

00:27:10,759 --> 00:27:14,299
want to escape for HTML you cannot

00:27:12,859 --> 00:27:16,279
configure which character are

00:27:14,299 --> 00:27:18,799
problematic or not for HTML I mean

00:27:16,279 --> 00:27:20,539
that's defined and it's like that you

00:27:18,799 --> 00:27:22,429
cannot really change it doesn't make

00:27:20,539 --> 00:27:28,429
sense for the escape filter for others

00:27:22,429 --> 00:27:31,939
obviously yes you can add new escape

00:27:28,429 --> 00:27:34,639
filters if you need another encoding for

00:27:31,939 --> 00:27:38,319
whatever format you are using this have

00:27:34,639 --> 00:27:38,319
the built-in the default ones

00:27:44,070 --> 00:27:48,820
okay about reducing templates this is

00:27:46,780 --> 00:27:50,950
obviously going to save you a lot of

00:27:48,820 --> 00:27:53,890
time and a lot of code and your themes

00:27:50,950 --> 00:27:57,340
are going to be great if they reduce a

00:27:53,890 --> 00:27:58,990
lot of contents okay as always there are

00:27:57,340 --> 00:28:02,040
a lot of different ways of reducing

00:27:58,990 --> 00:28:06,910
templates and fragments of templates

00:28:02,040 --> 00:28:11,770
this is probably how often are they use

00:28:06,910 --> 00:28:13,780
okay I mean for real with for comic book

00:28:11,770 --> 00:28:16,630
applications I don't know when Drupal is

00:28:13,780 --> 00:28:19,570
released if this is a what is going to

00:28:16,630 --> 00:28:23,260
be okay so we're going to do a quick

00:28:19,570 --> 00:28:25,510
recap of each one and recommend you when

00:28:23,260 --> 00:28:28,540
and when not to use each each of them

00:28:25,510 --> 00:28:31,270
okay extends it's very common for

00:28:28,540 --> 00:28:33,790
websites to share a lot of elements

00:28:31,270 --> 00:28:36,280
between pages I mean the header the

00:28:33,790 --> 00:28:39,220
footer the menu the sidebar the main

00:28:36,280 --> 00:28:41,770
styles and CSS the JavaScript libraries

00:28:39,220 --> 00:28:43,300
a lot of different elements are exactly

00:28:41,770 --> 00:28:45,580
the same for all the pages like this

00:28:43,300 --> 00:28:48,010
one's for the official drupalcon web

00:28:45,580 --> 00:28:50,080
page all the pages are the same contents

00:28:48,010 --> 00:28:51,730
obviously change but all the other

00:28:50,080 --> 00:28:54,179
things are exactly the same four pages

00:28:51,730 --> 00:28:57,790
so quick stop's this program like this

00:28:54,179 --> 00:29:01,150
he says hey you can define a complex

00:28:57,790 --> 00:29:02,830
complete template with all the common

00:29:01,150 --> 00:29:05,980
elements header footer menu cyber

00:29:02,830 --> 00:29:09,340
whatever and then all the pages that are

00:29:05,980 --> 00:29:11,110
exactly that like that can define only

00:29:09,340 --> 00:29:13,450
the contents only the things that are

00:29:11,110 --> 00:29:17,530
different from from the layout template

00:29:13,450 --> 00:29:20,290
for the big complex then play okay and

00:29:17,530 --> 00:29:23,650
it's really really easy to do that the

00:29:20,290 --> 00:29:25,570
layout is our regular HTML and tweak

00:29:23,650 --> 00:29:28,540
template so you can use everything

00:29:25,570 --> 00:29:31,960
obviously and the others the only thing

00:29:28,540 --> 00:29:35,470
you have to do is this one you need to

00:29:31,960 --> 00:29:37,720
define blocks which is like holes with

00:29:35,470 --> 00:29:40,720
which other templates can fill with

00:29:37,720 --> 00:29:42,640
their content so you say company opening

00:29:40,720 --> 00:29:44,710
a hole for the title because the title

00:29:42,640 --> 00:29:46,780
will be different from one page for

00:29:44,710 --> 00:29:49,090
knowledge obviously and for the main

00:29:46,780 --> 00:29:52,000
body content I'm going to open another

00:29:49,090 --> 00:29:55,820
hole with other templates will fill in

00:29:52,000 --> 00:29:58,490
with their content and it's like that

00:29:55,820 --> 00:30:01,280
the children templates the templates

00:29:58,490 --> 00:30:03,590
that use that layout that extends from

00:30:01,280 --> 00:30:05,510
the layout they only have to define the

00:30:03,590 --> 00:30:09,290
contents for those holes for those

00:30:05,510 --> 00:30:11,330
blocks so you don't have to repeat

00:30:09,290 --> 00:30:15,400
everything for every page for a written

00:30:11,330 --> 00:30:19,040
play okay so this obviously is really

00:30:15,400 --> 00:30:21,580
use a lot to create the layout of all

00:30:19,040 --> 00:30:25,070
the themes of their website obviously

00:30:21,580 --> 00:30:27,170
okay and you can also extend in several

00:30:25,070 --> 00:30:29,990
levels okay you only you don't have to

00:30:27,170 --> 00:30:32,420
have only one layout and then double our

00:30:29,990 --> 00:30:34,790
pages you can have one base layout then

00:30:32,420 --> 00:30:37,280
two or three main layouts for different

00:30:34,790 --> 00:30:41,240
sections and then pages and case very

00:30:37,280 --> 00:30:45,050
very cool okay they include function

00:30:41,240 --> 00:30:47,630
this is as easy as it looks you have

00:30:45,050 --> 00:30:50,780
some code that you are using in a lot of

00:30:47,630 --> 00:30:53,830
templates well extract that fragment of

00:30:50,780 --> 00:30:56,600
coke no matter how short or long is it

00:30:53,830 --> 00:30:58,820
extract and save it in another file and

00:30:56,600 --> 00:31:04,090
then include that file in the template

00:30:58,820 --> 00:31:04,090
and that's all as easy as it looks okay

00:31:04,450 --> 00:31:09,110
so to reduce lag large fragment like

00:31:07,340 --> 00:31:13,280
sidebars and things like that is really

00:31:09,110 --> 00:31:16,130
cool they include function macro this is

00:31:13,280 --> 00:31:18,890
not really used a lot inicia Shane

00:31:16,130 --> 00:31:23,150
because you could save a lot of time and

00:31:18,890 --> 00:31:25,760
a lot of code if you use this right for

00:31:23,150 --> 00:31:29,990
instance if you define complex forms you

00:31:25,760 --> 00:31:33,560
probably are using this HTML code and

00:31:29,990 --> 00:31:36,650
twix cold way to output all the values

00:31:33,560 --> 00:31:39,230
cetera for each 14 this is for the

00:31:36,650 --> 00:31:42,500
bootstrap CSS framework whether all the

00:31:39,230 --> 00:31:46,370
other friends are similar ok with a with

00:31:42,500 --> 00:31:49,670
a macro you could do this since almost

00:31:46,370 --> 00:31:54,490
the same the code is exactly the same

00:31:49,670 --> 00:31:57,860
but you wrap the code with a macro

00:31:54,490 --> 00:32:00,230
function okay and it's like a PP

00:31:57,860 --> 00:32:02,120
function due pass some arguments adult

00:32:00,230 --> 00:32:05,120
function return something in this case

00:32:02,120 --> 00:32:08,480
it renders the internal code that you

00:32:05,120 --> 00:32:09,820
define there so now forms can be as easy

00:32:08,480 --> 00:32:12,769
as this one

00:32:09,820 --> 00:32:15,139
you can say macro form field and then

00:32:12,769 --> 00:32:18,379
only the different things with between

00:32:15,139 --> 00:32:21,169
field the only strange things in this

00:32:18,379 --> 00:32:24,409
case is this one import self as matter

00:32:21,169 --> 00:32:26,779
you have to import macros before using

00:32:24,409 --> 00:32:29,750
them even if they are defined in death

00:32:26,779 --> 00:32:31,909
template you are using okay it's a bit

00:32:29,750 --> 00:32:33,889
strange but is useful because matters

00:32:31,909 --> 00:32:36,139
can be defined in a different template

00:32:33,889 --> 00:32:39,110
maybe you use a lot of matters well

00:32:36,139 --> 00:32:41,960
create one twig file to store all those

00:32:39,110 --> 00:32:49,879
macros and then import those macros in

00:32:41,960 --> 00:32:53,419
your template that's the idea ok now the

00:32:49,879 --> 00:32:55,360
embed again it's not used a lot but it's

00:32:53,419 --> 00:32:58,460
really really useful especially for

00:32:55,360 --> 00:33:00,679
modern web sites which are all of them

00:32:58,460 --> 00:33:03,950
based on that grid like the bootstrap

00:33:00,679 --> 00:33:07,429
grid ok and as you can see for instance

00:33:03,950 --> 00:33:11,149
in these two pages use the same three

00:33:07,429 --> 00:33:14,210
column grid for that road obviously and

00:33:11,149 --> 00:33:16,220
then one uses the two column grid and

00:33:14,210 --> 00:33:19,370
the other one again the three column

00:33:16,220 --> 00:33:21,289
grid but at that ball at that point both

00:33:19,370 --> 00:33:24,490
templates are using exactly the same

00:33:21,289 --> 00:33:27,799
structure is exactly the same grid ok

00:33:24,490 --> 00:33:29,840
and you may think well with the include

00:33:27,799 --> 00:33:32,779
function maybe I can solve this problem

00:33:29,840 --> 00:33:36,019
I mean you create the grid in some file

00:33:32,779 --> 00:33:37,429
you included and thus you can't do this

00:33:36,019 --> 00:33:39,590
because when you include something

00:33:37,429 --> 00:33:41,179
includes both the structure the HTML

00:33:39,590 --> 00:33:43,100
tiles and things like that and the

00:33:41,179 --> 00:33:44,809
content of that template you cannot

00:33:43,100 --> 00:33:48,139
change the content so obviously this

00:33:44,809 --> 00:33:51,169
doesn't work you may say home ok include

00:33:48,139 --> 00:33:54,440
now but maybe extends I can create a

00:33:51,169 --> 00:33:58,279
base template and then extend from it

00:33:54,440 --> 00:34:00,379
and it doesn't really work if your pages

00:33:58,279 --> 00:34:04,129
are very complex and if they use a lot

00:34:00,379 --> 00:34:06,139
of grit in a single page freak alone and

00:34:04,129 --> 00:34:08,869
there are two column and then no columns

00:34:06,139 --> 00:34:11,300
and in that case it doesn't work because

00:34:08,869 --> 00:34:15,619
you cannot extend at the same time from

00:34:11,300 --> 00:34:18,530
different pages you cannot do this so

00:34:15,619 --> 00:34:21,690
they the right solution to this problem

00:34:18,530 --> 00:34:23,599
is this one you define the code again

00:34:21,690 --> 00:34:27,629
for booze traveler it could be whatever

00:34:23,599 --> 00:34:29,609
for the three column grid and you define

00:34:27,629 --> 00:34:31,770
freak all three blocks which are the

00:34:29,609 --> 00:34:34,169
holes with someone has to fill in with

00:34:31,770 --> 00:34:36,419
contents okay you'll find three blocks

00:34:34,169 --> 00:34:39,839
for their columns and then whenever you

00:34:36,419 --> 00:34:43,020
need a three column grid do you only

00:34:39,839 --> 00:34:45,329
need to do this see embed is not include

00:34:43,020 --> 00:34:47,730
it's not extend is something different

00:34:45,329 --> 00:34:50,730
it's like a combination of both it

00:34:47,730 --> 00:34:54,690
includes something that I can change

00:34:50,730 --> 00:34:57,660
their contents before including them so

00:34:54,690 --> 00:35:00,060
it's really advanced for grids specially

00:34:57,660 --> 00:35:08,490
which are as I said very very popular

00:35:00,060 --> 00:35:11,010
nowadays okay and the set which is

00:35:08,490 --> 00:35:14,310
almost the last one it really easy to

00:35:11,010 --> 00:35:16,680
use it but it's not that common for

00:35:14,310 --> 00:35:19,410
instance imagine up to your page did use

00:35:16,680 --> 00:35:22,170
the dual display the navigation two

00:35:19,410 --> 00:35:24,540
times at the top of our listing and at

00:35:22,170 --> 00:35:27,089
the end of that listing instead of

00:35:24,540 --> 00:35:29,190
repeating that code in two different

00:35:27,089 --> 00:35:33,569
part of the same template you can do

00:35:29,190 --> 00:35:36,630
this you can enclose the common HTML

00:35:33,569 --> 00:35:39,000
code with a set instruction and that

00:35:36,630 --> 00:35:41,579
creates a variable called like that in

00:35:39,000 --> 00:35:44,310
this case navigation and the content of

00:35:41,579 --> 00:35:47,460
that variable would be all the code and

00:35:44,310 --> 00:35:49,800
close by set and then you can output

00:35:47,460 --> 00:35:51,390
like a real like a regular variable you

00:35:49,800 --> 00:35:55,560
cannot put that code as many times as

00:35:51,390 --> 00:35:57,270
you want so it's not that juiced but

00:35:55,560 --> 00:36:04,050
it's very useful for cases like this

00:35:57,270 --> 00:36:06,750
okay and the last one is the juice tag

00:36:04,050 --> 00:36:09,150
which is really advanced for us for

00:36:06,750 --> 00:36:14,730
drupal themes so i'm not going to

00:36:09,150 --> 00:36:16,530
explain it at all okay you can see it as

00:36:14,730 --> 00:36:20,790
always in the documentation they but

00:36:16,530 --> 00:36:22,619
forget for now about this okay dynamic

00:36:20,790 --> 00:36:26,310
ten place this is something that you

00:36:22,619 --> 00:36:28,560
usually don't use for normal web sites

00:36:26,310 --> 00:36:30,480
normal applications but since rupal is

00:36:28,560 --> 00:36:33,210
to advance and you can do so many great

00:36:30,480 --> 00:36:33,960
things probably sometimes you may need

00:36:33,210 --> 00:36:38,450
to do this

00:36:33,960 --> 00:36:42,180
okay does the reason why we see this

00:36:38,450 --> 00:36:44,010
okay the first thing about dynamic

00:36:42,180 --> 00:36:46,680
templates you can use that function

00:36:44,010 --> 00:36:50,099
called template front string to do

00:36:46,680 --> 00:36:53,010
exactly what it looks it creates a real

00:36:50,099 --> 00:36:55,500
template from the string code that you

00:36:53,010 --> 00:36:58,500
pass to it so you create some screen

00:36:55,500 --> 00:37:00,960
with tweek code inside and you can

00:36:58,500 --> 00:37:02,580
create can create on the fly that

00:37:00,960 --> 00:37:05,010
template and obviously you can include

00:37:02,580 --> 00:37:08,160
it or do whatever you do with a real

00:37:05,010 --> 00:37:10,920
template and even work on experience and

00:37:08,160 --> 00:37:13,859
better than everything so this is really

00:37:10,920 --> 00:37:16,320
really advanced you can do it all in one

00:37:13,859 --> 00:37:19,710
step like that include template from

00:37:16,320 --> 00:37:23,130
scream and whatever and obviously since

00:37:19,710 --> 00:37:25,800
this a regular screen you can manipulate

00:37:23,130 --> 00:37:28,320
it before creating a template you can

00:37:25,800 --> 00:37:32,849
replace the ins or do whatever you do

00:37:28,320 --> 00:37:35,940
but with strings so this is really

00:37:32,849 --> 00:37:39,450
really advanced and someone related to

00:37:35,940 --> 00:37:42,359
to this function will be this one source

00:37:39,450 --> 00:37:44,400
which get the source code of the given

00:37:42,359 --> 00:37:46,830
template without actually rendering it

00:37:44,400 --> 00:37:49,530
so you can get the source of any

00:37:46,830 --> 00:37:51,150
complaint manipulate it and create on

00:37:49,530 --> 00:37:54,510
the fly that template and improve it

00:37:51,150 --> 00:37:56,369
again and I know this is not common this

00:37:54,510 --> 00:37:58,470
is something that you usually don't do

00:37:56,369 --> 00:38:02,010
but again Drupal is very advanced to

00:37:58,470 --> 00:38:08,130
have very advanced needs so here the

00:38:02,010 --> 00:38:12,480
tools that we provide to you okay I

00:38:08,130 --> 00:38:15,060
problem with that site customization I

00:38:12,480 --> 00:38:16,920
mean in this case and you have a website

00:38:15,060 --> 00:38:20,390
with some header footer sidewalk

00:38:16,920 --> 00:38:23,760
whatever and you let some sections to

00:38:20,390 --> 00:38:27,450
customize / write some content and

00:38:23,760 --> 00:38:30,150
design of some part of top of that page

00:38:27,450 --> 00:38:33,420
like for instance reddit reddit a lot of

00:38:30,150 --> 00:38:38,010
credits can change the contents and the

00:38:33,420 --> 00:38:40,830
design of the sidebar writer etc okay

00:38:38,010 --> 00:38:42,839
you can do this using tweak obviously

00:38:40,830 --> 00:38:46,609
it's very very easy to do but the

00:38:42,839 --> 00:38:48,300
problem is that when you are rendering

00:38:46,609 --> 00:38:51,120
templates provided

00:38:48,300 --> 00:38:53,940
the user does probably a problem a

00:38:51,120 --> 00:38:57,120
security issue why because even if you

00:38:53,940 --> 00:38:59,820
restrict the kind of people who can

00:38:57,120 --> 00:39:02,130
actually create those templates maybe a

00:38:59,820 --> 00:39:04,380
special set of editors of publishers or

00:39:02,130 --> 00:39:06,990
special set of users even in that case

00:39:04,380 --> 00:39:10,470
you cannot really trust anything done by

00:39:06,990 --> 00:39:12,930
users the template on purpose or not can

00:39:10,470 --> 00:39:15,570
break everything it can be a real

00:39:12,930 --> 00:39:18,450
disaster okay so twix provides this cool

00:39:15,570 --> 00:39:22,440
thing which is the sandbox which is a

00:39:18,450 --> 00:39:26,010
way to run templates usually made by the

00:39:22,440 --> 00:39:27,420
users but in a safe way you can be sure

00:39:26,010 --> 00:39:29,820
that the application is not going to

00:39:27,420 --> 00:39:31,440
break or there is not going to be

00:39:29,820 --> 00:39:36,240
security issues and things like that

00:39:31,440 --> 00:39:40,080
okay and it's done like this you can

00:39:36,240 --> 00:39:43,560
sandbox a template with a tag or the

00:39:40,080 --> 00:39:47,100
argument okay and that template in this

00:39:43,560 --> 00:39:51,450
case I bartwick cannot use all the

00:39:47,100 --> 00:39:54,150
features available in tweak that

00:39:51,450 --> 00:39:56,520
template can only use the ones that you

00:39:54,150 --> 00:39:59,010
define here these are the details that

00:39:56,520 --> 00:40:02,610
we don't explain okay but you define a

00:39:59,010 --> 00:40:06,120
white list of methods tags filters

00:40:02,610 --> 00:40:08,910
properties that they the sandbox is some

00:40:06,120 --> 00:40:11,940
boxes template can access and anything

00:40:08,910 --> 00:40:14,040
that is not here won't be avail

00:40:11,940 --> 00:40:17,550
available to that template okay so it's

00:40:14,040 --> 00:40:19,980
a very secure way of including dynamic

00:40:17,550 --> 00:40:22,920
things or content done by users that you

00:40:19,980 --> 00:40:27,620
can strictly control what they can and

00:40:22,920 --> 00:40:27,620
cannot do in your application

00:40:31,930 --> 00:40:38,080
okay this is a very short block but is I

00:40:35,410 --> 00:40:42,250
love it because I am working with days

00:40:38,080 --> 00:40:43,810
what date is not that easy sometimes and

00:40:42,250 --> 00:40:46,570
do it already provides a lot of features

00:40:43,810 --> 00:40:49,930
so you can do a lot of things in tweak

00:40:46,570 --> 00:40:51,940
and forget about THP okay like for

00:40:49,930 --> 00:40:54,520
instance something like this displaying

00:40:51,940 --> 00:40:56,320
dates in the time zone of the user it's

00:40:54,520 --> 00:40:59,380
as easy as it looks you don't have to

00:40:56,320 --> 00:41:04,390
transform beds in the PHP code or do

00:40:59,380 --> 00:41:08,410
whatever you do is as easy as this or

00:41:04,390 --> 00:41:11,020
doing dynamic comparisons updates you

00:41:08,410 --> 00:41:13,810
can say hey if the event hasn't started

00:41:11,020 --> 00:41:16,930
is unlike this you can buy tickets if

00:41:13,810 --> 00:41:19,330
not you cannot keep buying tickets you

00:41:16,930 --> 00:41:21,910
can do this in the template and with a

00:41:19,330 --> 00:41:24,130
when the data right that link won't be

00:41:21,910 --> 00:41:26,890
display again so you don't have to do

00:41:24,130 --> 00:41:31,150
strange things in PHP or thick like that

00:41:26,890 --> 00:41:33,730
the template can take care of that and I

00:41:31,150 --> 00:41:36,160
love this this example the page modified

00:41:33,730 --> 00:41:40,990
filter you can do amazing things like

00:41:36,160 --> 00:41:45,100
this see you can say hey the alley Burt

00:41:40,990 --> 00:41:48,670
and fitting days before the event start

00:41:45,100 --> 00:41:50,650
you can display that day later you don't

00:41:48,670 --> 00:41:54,760
have to clone the date-time object in

00:41:50,650 --> 00:42:03,780
PHP and modify and you can do you can do

00:41:54,760 --> 00:42:03,780
it like that icici us as it looks okay

00:42:04,890 --> 00:42:12,430
and to end this session I'm going to do

00:42:08,350 --> 00:42:14,860
a query recap of some of other twig

00:42:12,430 --> 00:42:17,980
features that in my opinion put twig

00:42:14,860 --> 00:42:21,100
years ahead of PHP some of them are

00:42:17,980 --> 00:42:23,440
really really small okay like this one

00:42:21,100 --> 00:42:25,420
for instance I know is very small but

00:42:23,440 --> 00:42:28,420
it's very very convenient for collection

00:42:25,420 --> 00:42:31,420
and race to get the last element of a

00:42:28,420 --> 00:42:34,440
collection is like that last obviously

00:42:31,420 --> 00:42:37,270
but in PHP you cannot do this okay all

00:42:34,440 --> 00:42:41,700
this one I love with this vistas it

00:42:37,270 --> 00:42:44,140
starts with and sweet matches the

00:42:41,700 --> 00:42:46,630
template the template code is very very

00:42:44,140 --> 00:42:48,820
expressive and it's great and this is

00:42:46,630 --> 00:42:50,560
something that you cannot do with PHP in

00:42:48,820 --> 00:42:53,230
a lot of priming languages you have the

00:42:50,560 --> 00:42:56,260
starts with an n sweet function but it's

00:42:53,230 --> 00:42:59,440
not available in in PHP in fact is it's

00:42:56,260 --> 00:43:03,450
rejected by PHP they propose to add this

00:42:59,440 --> 00:43:07,980
and they say no we don't like this oh

00:43:03,450 --> 00:43:10,870
this one the in operator I love it is a

00:43:07,980 --> 00:43:13,240
multi-purpose operator okay you can

00:43:10,870 --> 00:43:15,610
check if some string is inside is

00:43:13,240 --> 00:43:17,950
contained in some other string or if

00:43:15,610 --> 00:43:21,250
some item variable spring water bed is

00:43:17,950 --> 00:43:25,330
containing some collection again this

00:43:21,250 --> 00:43:27,130
was proposed to PHP but rejected by PHP

00:43:25,330 --> 00:43:30,610
internal they say no we don't like the

00:43:27,130 --> 00:43:32,980
in operator it's at because it's very

00:43:30,610 --> 00:43:37,060
very expressive way of doing things in

00:43:32,980 --> 00:43:40,330
templates special and this one main

00:43:37,060 --> 00:43:43,330
parameters you have this filter the

00:43:40,330 --> 00:43:45,790
converting codeine filter you have two

00:43:43,330 --> 00:43:47,890
parameters is a filter to convert one

00:43:45,790 --> 00:43:51,490
encoding to another but my question is

00:43:47,890 --> 00:43:56,020
which one is the original chart set and

00:43:51,490 --> 00:43:58,720
one and which one is the target one you

00:43:56,020 --> 00:44:00,970
don't really know you should check the

00:43:58,720 --> 00:44:03,580
documentation or the short code is the

00:44:00,970 --> 00:44:05,860
usual needle haystack haystack problem

00:44:03,580 --> 00:44:07,810
you don't really know which is the the

00:44:05,860 --> 00:44:10,150
order well into it you don't have this

00:44:07,810 --> 00:44:11,980
problem because all the attributes all

00:44:10,150 --> 00:44:13,190
the arguments of the parameters of the

00:44:11,980 --> 00:44:16,400
all the filters

00:44:13,190 --> 00:44:19,700
functions have a name so you can use to

00:44:16,400 --> 00:44:22,730
it like that this works perfectly but

00:44:19,700 --> 00:44:24,560
you can put the name of the argument of

00:44:22,730 --> 00:44:27,200
the parameter when you use that

00:44:24,560 --> 00:44:30,170
parameter when you pass that value so

00:44:27,200 --> 00:44:32,660
now it's clearly which one is the origin

00:44:30,170 --> 00:44:35,420
chart set and which one is a target is

00:44:32,660 --> 00:44:38,900
obviously an obviously because you are

00:44:35,420 --> 00:44:41,480
using the name you can put those

00:44:38,900 --> 00:44:43,460
parameters in any order you can skip any

00:44:41,480 --> 00:44:46,630
of them you can do very things that

00:44:43,460 --> 00:44:49,460
obviously in PageSpeed you cannot okay

00:44:46,630 --> 00:44:52,220
this has been proposed several times for

00:44:49,460 --> 00:44:55,400
PHP but we'll see in a few years maybe

00:44:52,220 --> 00:44:57,470
they add this feature okay and it's

00:44:55,400 --> 00:44:59,510
great when function are filtering a

00:44:57,470 --> 00:45:01,339
function in this case has a lot of

00:44:59,510 --> 00:45:03,230
arguments because for instance in the

00:45:01,339 --> 00:45:05,869
first one if you want to change the

00:45:03,230 --> 00:45:08,630
fourth argument which is called ignore

00:45:05,869 --> 00:45:11,780
missing you have to define the first

00:45:08,630 --> 00:45:14,300
three arguments but into it you can do

00:45:11,780 --> 00:45:17,240
what you see at the at the bottom you

00:45:14,300 --> 00:45:19,460
can just define the argument you need in

00:45:17,240 --> 00:45:22,400
this case even or missing so you can

00:45:19,460 --> 00:45:27,950
avoid setting an empty second parameter

00:45:22,400 --> 00:45:30,560
and as empty third parameter another

00:45:27,950 --> 00:45:33,260
quick and cool thing about tweak is this

00:45:30,560 --> 00:45:35,329
one imagine you have a image gallery

00:45:33,260 --> 00:45:39,050
very common and you have several rows

00:45:35,329 --> 00:45:41,660
and each row displays three images but

00:45:39,050 --> 00:45:45,589
the HTML code will be something like

00:45:41,660 --> 00:45:48,260
that again for bootstrap and maybe if

00:45:45,589 --> 00:45:51,530
you are used to the PHP way of doing

00:45:48,260 --> 00:45:54,319
things maybe you do it like this which

00:45:51,530 --> 00:45:57,560
is not bad at all I mean with a cool

00:45:54,319 --> 00:46:00,349
divisible by filter and all of that but

00:45:57,560 --> 00:46:03,349
this is a bit ugly code I mean it's the

00:46:00,349 --> 00:46:11,390
PHP way of doing things you can do it

00:46:03,349 --> 00:46:13,849
like that into it which is using the

00:46:11,390 --> 00:46:16,579
batch filter you see you cite week okay

00:46:13,849 --> 00:46:20,390
I have a collection of items I want you

00:46:16,579 --> 00:46:24,619
to give them to me in groups of three or

00:46:20,390 --> 00:46:25,509
four or five or two or whatever then to

00:46:24,619 --> 00:46:27,969
give you

00:46:25,509 --> 00:46:29,949
soup collection of three elements and

00:46:27,969 --> 00:46:32,889
you can do whatever you want with those

00:46:29,949 --> 00:46:36,969
three elements so it's super clean and

00:46:32,889 --> 00:46:42,459
easy to understand code again you cannot

00:46:36,969 --> 00:46:44,649
do this easily at least with PHP another

00:46:42,459 --> 00:46:47,469
thing another cool thing the short

00:46:44,649 --> 00:46:50,189
ternary operator did you do this in PHP

00:46:47,469 --> 00:46:53,109
you know you should probably know you

00:46:50,189 --> 00:46:55,779
get an error this is wrong this is this

00:46:53,109 --> 00:46:59,559
doesn't world into it you can do this

00:46:55,779 --> 00:47:03,249
and obviously it works okay so you have

00:46:59,559 --> 00:47:06,999
again this example setting a class

00:47:03,249 --> 00:47:08,769
attribute both work but I obviously

00:47:06,999 --> 00:47:11,529
recommend the first one it's more

00:47:08,769 --> 00:47:13,869
readable most short more easy to

00:47:11,529 --> 00:47:21,699
understand and obviously it was into it

00:47:13,869 --> 00:47:25,239
not in PHP and most last one this cool

00:47:21,699 --> 00:47:29,199
filter which combines several PHP

00:47:25,239 --> 00:47:31,479
functions and which led to extract

00:47:29,199 --> 00:47:34,539
elements from a coaxial or character

00:47:31,479 --> 00:47:37,630
from screen very easy as you can see in

00:47:34,539 --> 00:47:40,839
these examples you can say it's like a

00:47:37,630 --> 00:47:43,029
souk screen well done and then are a

00:47:40,839 --> 00:47:44,889
slice well done okay it's very very easy

00:47:43,029 --> 00:47:46,989
and very cool and very easy to

00:47:44,889 --> 00:47:49,329
understand and to read and to write and

00:47:46,989 --> 00:47:51,489
to learn this way of doing things okay

00:47:49,329 --> 00:47:53,259
again this is available in lots of

00:47:51,489 --> 00:47:55,029
priming languages like Python for

00:47:53,259 --> 00:47:59,829
instance but in case P you cannot do

00:47:55,029 --> 00:48:03,009
this it doesn't work and this one

00:47:59,829 --> 00:48:05,589
probably for its for loop that you use

00:48:03,009 --> 00:48:08,259
in a template or the code you also

00:48:05,589 --> 00:48:10,569
define an I variable temporary variable

00:48:08,259 --> 00:48:13,479
to get the number the item number until

00:48:10,569 --> 00:48:17,049
like that in tweak this is already done

00:48:13,479 --> 00:48:19,239
for you inside a for loop you have this

00:48:17,049 --> 00:48:22,599
special magic variable called loop

00:48:19,239 --> 00:48:24,429
without the usual things do you need for

00:48:22,599 --> 00:48:27,999
instance give me the number of the item

00:48:24,429 --> 00:48:30,819
look dot index stores that information

00:48:27,999 --> 00:48:34,059
and it'll start with the number one with

00:48:30,819 --> 00:48:37,070
the way humans account but you want the

00:48:34,059 --> 00:48:40,130
matching way of counting things you have

00:48:37,070 --> 00:48:44,560
I'm index 0 and T like that so this is

00:48:40,130 --> 00:48:48,560
already done for you you see the classic

00:48:44,560 --> 00:48:51,380
and this one the last thing about

00:48:48,560 --> 00:48:53,120
arguments we said that you can use named

00:48:51,380 --> 00:48:55,520
arguments with twig which is great

00:48:53,120 --> 00:48:57,950
especially when a fight filter defines a

00:48:55,520 --> 00:49:01,130
lot of attribute and keeps adding more

00:48:57,950 --> 00:49:03,770
and more attributes okay you can do like

00:49:01,130 --> 00:49:06,050
this so for tweak it doesn't really

00:49:03,770 --> 00:49:08,330
matter how many a tree will do define

00:49:06,050 --> 00:49:10,040
and if you add new ones it doesn't

00:49:08,330 --> 00:49:13,970
matter whether the template is going to

00:49:10,040 --> 00:49:16,100
be still cool but for PHP this is the

00:49:13,970 --> 00:49:18,320
real PHP code you need to define this

00:49:16,100 --> 00:49:19,760
filter is going to be more and more and

00:49:18,320 --> 00:49:25,040
more complex as you keep having

00:49:19,760 --> 00:49:28,850
arguments well you can do is you can do

00:49:25,040 --> 00:49:31,910
this in recent versions you can do this

00:49:28,850 --> 00:49:34,670
define a filter asbury adik which means

00:49:31,910 --> 00:49:36,110
i don't mind how many attributes how

00:49:34,670 --> 00:49:39,410
many arguments are you going to pass me

00:49:36,110 --> 00:49:41,810
any number is okay zero or infinite I

00:49:39,410 --> 00:49:44,210
don't care all of them are going to be

00:49:41,810 --> 00:49:46,250
stored in some body roll in this case

00:49:44,210 --> 00:49:49,070
call options and you can access all of

00:49:46,250 --> 00:49:50,930
them like that like an array so it

00:49:49,070 --> 00:49:53,390
doesn't matter how many arguments you

00:49:50,930 --> 00:49:56,620
define or how many you add or remove

00:49:53,390 --> 00:50:00,710
everything is going to work this

00:49:56,620 --> 00:50:04,610
thankfully is already available in PHP

00:50:00,710 --> 00:50:06,620
PHP 7 I mean not in the current one but

00:50:04,610 --> 00:50:08,690
this body a big thing is the new way of

00:50:06,620 --> 00:50:14,450
doing things in PHP and into it you can

00:50:08,690 --> 00:50:16,220
use it today ok so to sum up in my

00:50:14,450 --> 00:50:19,220
opinion using twitten places the best

00:50:16,220 --> 00:50:22,550
decision drupal ever made I don't know

00:50:19,220 --> 00:50:25,160
if you agree after this session but well

00:50:22,550 --> 00:50:29,140
I think you agree is that tree templates

00:50:25,160 --> 00:50:33,200
are safe modern consistent beautiful and

00:50:29,140 --> 00:50:37,190
obviously Drupal 8 then placed art that

00:50:33,200 --> 00:50:40,540
too ok so they are already a lot of

00:50:37,190 --> 00:50:42,980
great drupal 08 things already done and

00:50:40,540 --> 00:50:45,020
available to use and i'm sure you are

00:50:42,980 --> 00:50:47,150
going to do great things with with two

00:50:45,020 --> 00:50:49,430
if you use all the features that it has

00:50:47,150 --> 00:50:51,819
ok so

00:50:49,430 --> 00:50:51,819
thank you

00:50:57,480 --> 00:51:03,270
oh you have any question you can say it

00:51:01,290 --> 00:51:06,720
aloud and I repeat or you can use the

00:51:03,270 --> 00:51:11,070
microphone out there any question or

00:51:06,720 --> 00:51:12,840
comment or whatever you teach this at

00:51:11,070 --> 00:51:15,480
the start of the presentation with the

00:51:12,840 --> 00:51:17,820
thought that Drupal 8 is only using like

00:51:15,480 --> 00:51:22,109
thirty percent of the power of tweet can

00:51:17,820 --> 00:51:25,100
you tell us what it is that that you

00:51:22,109 --> 00:51:27,690
would love to see in Drupal 8.1 aware

00:51:25,100 --> 00:51:31,800
the sort of hundred percent usage of

00:51:27,690 --> 00:51:33,570
twig the main things and in fact i would

00:51:31,800 --> 00:51:35,700
like to see everything used by him by

00:51:33,570 --> 00:51:37,200
drupal because the current in place if

00:51:35,700 --> 00:51:40,890
you take a look at them they are only

00:51:37,200 --> 00:51:42,800
using like they if close to say to see

00:51:40,890 --> 00:51:47,609
if somebody about it if i don't know and

00:51:42,800 --> 00:51:49,740
the way of outputting variables like the

00:51:47,609 --> 00:51:52,290
simple way of outputting variables they

00:51:49,740 --> 00:51:54,840
apply some filter sometimes but they

00:51:52,290 --> 00:51:59,100
don't really use any filter front wig

00:51:54,840 --> 00:52:01,950
they don't use any advanced embed thing

00:51:59,100 --> 00:52:05,010
for instance to create recently that the

00:52:01,950 --> 00:52:08,790
extent is also not used they use include

00:52:05,010 --> 00:52:11,130
but nothing else so i really cannot

00:52:08,790 --> 00:52:13,140
describe all the things i want i would

00:52:11,130 --> 00:52:15,960
like to see because they they are almost

00:52:13,140 --> 00:52:18,840
everything that I saw in this

00:52:15,960 --> 00:52:21,930
presentation I mean they are we not

00:52:18,840 --> 00:52:28,440
using almost anything okay thank it it

00:52:21,930 --> 00:52:38,180
really sad okay we have another question

00:52:28,440 --> 00:52:42,660
they're about that with the level that

00:52:38,180 --> 00:52:46,500
twig template I mean the level of

00:52:42,660 --> 00:52:49,859
functionality that we should use there

00:52:46,500 --> 00:52:54,359
because you say Drupal uses only if and

00:52:49,859 --> 00:52:57,000
the other easy tasks which is the

00:52:54,359 --> 00:53:00,150
highest level we could use on em on a

00:52:57,000 --> 00:53:04,619
twig the blade without

00:53:00,150 --> 00:53:07,239
having performance issues and sad okay

00:53:04,619 --> 00:53:09,789
regarding perform on issues I apart from

00:53:07,239 --> 00:53:13,269
the PHP extension which can really

00:53:09,789 --> 00:53:16,150
improve the performance all to eat and

00:53:13,269 --> 00:53:18,400
place our cash and transform into PHP

00:53:16,150 --> 00:53:24,309
code into raw PHP code before executing

00:53:18,400 --> 00:53:27,430
them so all the overhead of using not

00:53:24,309 --> 00:53:29,469
pure PHP to define the template is gone

00:53:27,430 --> 00:53:32,949
because everything is transformed

00:53:29,469 --> 00:53:35,920
automatically to PHP so obviously the

00:53:32,949 --> 00:53:38,170
overhead is going to be more than zero I

00:53:35,920 --> 00:53:41,349
mean using raw PHP is better for

00:53:38,170 --> 00:53:44,559
performance but this is very very small

00:53:41,349 --> 00:53:46,719
performance impact for four 4tube

00:53:44,559 --> 00:53:48,849
templates i mean i don't know for drupal

00:53:46,719 --> 00:53:51,160
but from my from my experience from

00:53:48,849 --> 00:53:55,509
symphony there are huge websites with

00:53:51,160 --> 00:53:57,190
hundreds of millions of users and a lot

00:53:55,509 --> 00:53:59,799
of traffic and everything works right

00:53:57,190 --> 00:54:02,410
with me I mean it's not incredibly slow

00:53:59,799 --> 00:54:06,009
is not the problem to look for four huge

00:54:02,410 --> 00:54:08,160
symphony application is not a program so

00:54:06,009 --> 00:54:11,559
you can really use any advanced feature

00:54:08,160 --> 00:54:13,809
safely do it it won't break your girl

00:54:11,559 --> 00:54:17,039
because you won't make it very slow at

00:54:13,809 --> 00:54:21,249
all and something else different about

00:54:17,039 --> 00:54:23,619
angular and other languages which is the

00:54:21,249 --> 00:54:26,859
best practice here to escape brackets

00:54:23,619 --> 00:54:30,670
and other things okay you can define in

00:54:26,859 --> 00:54:33,309
into it and the bracket that they use to

00:54:30,670 --> 00:54:35,380
output things or to do things or to

00:54:33,309 --> 00:54:38,469
comment things they are all configurable

00:54:35,380 --> 00:54:40,869
I don't know in Drupal and which file

00:54:38,469 --> 00:54:43,420
you have to change to configure that but

00:54:40,869 --> 00:54:46,180
you can change the syntax of click

00:54:43,420 --> 00:54:48,489
instead of and the double curly brace

00:54:46,180 --> 00:54:51,999
you can use brackets or parentheses or

00:54:48,489 --> 00:54:54,549
whatever you want to use for tweak so it

00:54:51,999 --> 00:54:57,209
doesn't clash with angularjs which is

00:54:54,549 --> 00:55:00,130
more straight and you can change angular

00:54:57,209 --> 00:55:02,949
so into you you can teach the syntax

00:55:00,130 --> 00:55:05,680
obviously don't do it in regular cases

00:55:02,949 --> 00:55:08,489
but in these cases with angular it may

00:55:05,680 --> 00:55:08,489
make sense

00:55:10,380 --> 00:55:20,460
ok any other comment or question ok so

00:55:20,520 --> 00:55:23,700
thank you again

00:56:29,329 --> 00:56:31,329

YouTube URL: https://www.youtube.com/watch?v=4KfkV1T3bhE


