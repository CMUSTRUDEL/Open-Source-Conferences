Title: DrupalCon Los Angeles 2015: The Symfony Framework: Your Free New Toolkit
Publication date: 2015-05-12
Playlist: DrupalCon Los Angeles - May 2015
Description: 
	Learning a new framework or CMS is hard. So, we usually stick to one: I use only Symfony, you use only Drupal. And that's too bad, because we all want to use the best tool for the job. But because Drupal 8 and Symfony have so much in common, that's about to change.

In this talk, we'll get started in the Symfony Framework by building a little app that takes us through routing, controllers, responses, events and the service container. For D8 users, you'll start to understand just how easy it'll be to use Symfony (or Silex) for certain projects. And if you haven't used it yet, you'll get a tour into the most fundamental pieces of Drupal 8 (since they're shared with Symfony!). Your toolkit is about to expand, and that's a reason to celebrate.

Hi guys! I've been lucky enough to speak at the last 2 DrupalCon's, which included a talk on Behat 2 years ago and 2 last year on Twig (https://austin2014.drupal.org/session/twig-friendly-curl-braces-invade-your-templates.html) and Silex/Symfony (https://austin2014.drupal.org/session/master-new-core-drupal-8-now-symfony-and-silex.html). I'm also the documentation lead for Symfony itself and routinely speak at other PHP conferences, like Sunshine PHP, PHP World, ZendCon, SymfonyCon, etc. I *love* the energy and DrupalCon, and am excited at the possibility of speaking again. It's a HUGE year, and I'm pumped to be there. Cheers!
Captions: 
	00:00:00,000 --> 00:00:05,879
um good morning everybody thanks Cronin

00:00:02,760 --> 00:00:07,970
I talked they put me first so how many

00:00:05,879 --> 00:00:11,519
of you were here this morning for the

00:00:07,970 --> 00:00:12,509
pre note the musical if you don't know

00:00:11,519 --> 00:00:13,349
I'm talking about you weren't there if

00:00:12,509 --> 00:00:15,690
you know I'm talking about you're like

00:00:13,349 --> 00:00:17,100
yeah I was there so I got me like a

00:00:15,690 --> 00:00:19,109
little hyped up that was my first pre

00:00:17,100 --> 00:00:20,850
note at a DrupalCon last year I didn't

00:00:19,109 --> 00:00:23,400
realize they had pre notes so I showed

00:00:20,850 --> 00:00:25,529
up promptly for the keynote only to be

00:00:23,400 --> 00:00:27,390
passed by like six superheroes going the

00:00:25,529 --> 00:00:29,429
other direction and I was like what just

00:00:27,390 --> 00:00:30,840
happened like this is awesome so I

00:00:29,429 --> 00:00:31,859
didn't mess it this year and and if you

00:00:30,840 --> 00:00:35,190
come next you if you miss it don't miss

00:00:31,859 --> 00:00:37,380
it it's totally ridiculous so I come

00:00:35,190 --> 00:00:38,790
from the symphony community we're back

00:00:37,380 --> 00:00:40,230
in developers so I don't know if any of

00:00:38,790 --> 00:00:41,520
us actually have any singing skills so

00:00:40,230 --> 00:00:46,579
we don't get to cool do things quite

00:00:41,520 --> 00:00:48,329
like that so today I want to talk about

00:00:46,579 --> 00:00:50,129
Symphony I'm really happy to see this

00:00:48,329 --> 00:00:51,210
room is actually pretty darn full

00:00:50,129 --> 00:00:52,410
especially considering we were all

00:00:51,210 --> 00:00:54,329
outside five minutes ago

00:00:52,410 --> 00:00:55,770
first I come from the symphony world so

00:00:54,329 --> 00:00:56,879
this is my third DrupalCon which is

00:00:55,770 --> 00:00:57,960
awesome for me because they don't

00:00:56,879 --> 00:00:59,850
actually use Drupal I've actually

00:00:57,960 --> 00:01:00,960
started to use it a little bit but I

00:00:59,850 --> 00:01:02,309
just come from a totally different world

00:01:00,960 --> 00:01:03,510
and it's one of my favorite conferences

00:01:02,309 --> 00:01:05,519
to come to because of the energy that

00:01:03,510 --> 00:01:08,670
everybody has and because of the

00:01:05,519 --> 00:01:10,860
musicals I'm the lead contributor to the

00:01:08,670 --> 00:01:13,409
symphony documentation so if and when

00:01:10,860 --> 00:01:15,900
you start reading that you can thank me

00:01:13,409 --> 00:01:17,460
or send me a mean email depending on

00:01:15,900 --> 00:01:18,960
like whatever your perspective is we

00:01:17,460 --> 00:01:20,670
write a lot of documentation so just met

00:01:18,960 --> 00:01:22,740
our finding things I'm also a writer for

00:01:20,670 --> 00:01:24,960
a camp University comm which is Symphony

00:01:22,740 --> 00:01:27,360
and Peach be tutorial screencasts and

00:01:24,960 --> 00:01:29,700
most importantly and you can help sell

00:01:27,360 --> 00:01:31,439
her out there I am the husband I'd be

00:01:29,700 --> 00:01:33,860
much more talented Liana Pelham

00:01:31,439 --> 00:01:36,210
who's gonna wait for us now hey Liana

00:01:33,860 --> 00:01:38,430
mmm yes I like good like that good

00:01:36,210 --> 00:01:39,720
applause they're very nice when she's

00:01:38,430 --> 00:01:41,130
not in the room sometimes I'll like have

00:01:39,720 --> 00:01:42,979
everybody like tweet at her and stuff

00:01:41,130 --> 00:01:46,350
like that so now we just wave instead

00:01:42,979 --> 00:01:47,640
all right so let's let's look at where

00:01:46,350 --> 00:01:50,220
we've come from we're going here cuz my

00:01:47,640 --> 00:01:53,909
goal is like how many people have have

00:01:50,220 --> 00:01:56,040
used Drupal 8 a little bit ok good good

00:01:53,909 --> 00:01:57,000
good ok so we can so you guys are

00:01:56,040 --> 00:01:58,560
anybody familiar with some of the stuff

00:01:57,000 --> 00:02:01,350
in the beginning the whole point of this

00:01:58,560 --> 00:02:03,000
talk is that in Drupal 7 if you're a

00:02:01,350 --> 00:02:04,259
Drupal 7 developer you or Drupal 7

00:02:03,000 --> 00:02:05,969
developer if you wanted to do something

00:02:04,259 --> 00:02:07,530
different you had you had some other

00:02:05,969 --> 00:02:09,270
project that didn't need Drupal maybe

00:02:07,530 --> 00:02:11,550
there's no content you had to kind of

00:02:09,270 --> 00:02:13,020
learn a different skill set that is no

00:02:11,550 --> 00:02:14,550
longer the case

00:02:13,020 --> 00:02:16,170
goes the other way too I can actually

00:02:14,550 --> 00:02:18,690
look at Drupal 8 and understand what's

00:02:16,170 --> 00:02:20,310
going on I have no right to know what's

00:02:18,690 --> 00:02:22,110
going on in Drupal 8 but because there's

00:02:20,310 --> 00:02:23,670
so much in common between the two I can

00:02:22,110 --> 00:02:26,840
move back and forth based on whatever

00:02:23,670 --> 00:02:29,040
problem I actually need to solve so um

00:02:26,840 --> 00:02:31,230
if I have anything wrong you guys can

00:02:29,040 --> 00:02:34,050
shout at me cuz I'm not a Drupal

00:02:31,230 --> 00:02:35,820
developer but apparently in Drupal 7 the

00:02:34,050 --> 00:02:37,530
way you make pages is the little hook

00:02:35,820 --> 00:02:40,140
menu stuff so I my dinosaur menu there

00:02:37,530 --> 00:02:41,580
and I have a page call back so favorite

00:02:40,140 --> 00:02:44,550
dinosaur and then it returns the string

00:02:41,580 --> 00:02:45,690
Triceratops because this is my favorite

00:02:44,550 --> 00:02:47,010
dinosaur we have these little pins we

00:02:45,690 --> 00:02:51,210
just made by the way you got one of

00:02:47,010 --> 00:02:52,830
those they're up here so in Symphony and

00:02:51,210 --> 00:02:54,480
Silex it's totally different but it's

00:02:52,830 --> 00:02:57,450
not really actually very different at

00:02:54,480 --> 00:02:59,790
all so in Symphony and Silex we have so

00:02:57,450 --> 00:03:01,620
let me back up in symphony we have

00:02:59,790 --> 00:03:03,180
something called routes and controllers

00:03:01,620 --> 00:03:04,800
and those of you that have used Drupal 8

00:03:03,180 --> 00:03:06,360
a little bit and may already know what

00:03:04,800 --> 00:03:08,370
these terms are we've routes of

00:03:06,360 --> 00:03:09,950
controllers we have ideas of requests

00:03:08,370 --> 00:03:12,690
and responses and we this really

00:03:09,950 --> 00:03:15,540
fundamentally important idea of a

00:03:12,690 --> 00:03:18,300
service container and what's really cool

00:03:15,540 --> 00:03:20,130
is interpolate we have the exact same

00:03:18,300 --> 00:03:21,510
thing so these things right here like

00:03:20,130 --> 00:03:22,740
the fundamental stuff that people have a

00:03:21,510 --> 00:03:24,300
hard time learning they're grabbing

00:03:22,740 --> 00:03:26,310
their heads around this philosophy once

00:03:24,300 --> 00:03:28,620
you got this though you have this for

00:03:26,310 --> 00:03:31,050
all of them so let me look at let's look

00:03:28,620 --> 00:03:32,670
at what what is the fundamental stuff

00:03:31,050 --> 00:03:34,080
for a framework because all frameworks

00:03:32,670 --> 00:03:36,510
whether they're in PHP or Ruby on Rails

00:03:34,080 --> 00:03:38,250
they all basically work the exact same

00:03:36,510 --> 00:03:40,650
way which again is a good thing because

00:03:38,250 --> 00:03:42,959
it means we can actually move our you

00:03:40,650 --> 00:03:47,070
know pick pick whatever solution we need

00:03:42,959 --> 00:03:49,260
for whatever problem we have so this is

00:03:47,070 --> 00:03:52,140
Silex how many people have seen Silex

00:03:49,260 --> 00:03:55,500
before ok actually a few less hands and

00:03:52,140 --> 00:03:57,600
I expected so Silex is a micro framework

00:03:55,500 --> 00:03:59,640
built on top of the symphony components

00:03:57,600 --> 00:04:01,530
so symphony is a framework built on top

00:03:59,640 --> 00:04:03,810
of the symphony components Drupal 8 is a

00:04:01,530 --> 00:04:06,240
framework or CMS built on top of Siffin

00:04:03,810 --> 00:04:08,790
components this is also that exact same

00:04:06,240 --> 00:04:11,370
thing except the entire application is

00:04:08,790 --> 00:04:14,070
those six lines that is your entire

00:04:11,370 --> 00:04:16,169
application in one file and we have

00:04:14,070 --> 00:04:18,450
here's we're defining one page CC /

00:04:16,169 --> 00:04:20,250
hello / curly brace name so basically

00:04:18,450 --> 00:04:22,200
it's defining au where l / hello /

00:04:20,250 --> 00:04:23,940
anything and when somebody goes to that

00:04:22,200 --> 00:04:25,590
URL it's going to reach say hello that

00:04:23,940 --> 00:04:26,730
person's name and that's the entire

00:04:25,590 --> 00:04:31,260
application

00:04:26,730 --> 00:04:32,820
there so let's say we are developing

00:04:31,260 --> 00:04:34,740
this hey we're gonna use Silex or

00:04:32,820 --> 00:04:37,560
something so we go ahead and throw these

00:04:34,740 --> 00:04:41,760
six lines of code together we spin up

00:04:37,560 --> 00:04:43,050
our web server or we don't how many

00:04:41,760 --> 00:04:45,600
people have used the built-in peach

00:04:43,050 --> 00:04:48,660
people app server okay if it's like a

00:04:45,600 --> 00:04:50,670
third or so it is awesome so PHP 5.4 and

00:04:48,660 --> 00:04:52,530
above which you are almost all probably

00:04:50,670 --> 00:04:54,660
definitely using since 5.3 is old and

00:04:52,530 --> 00:04:56,610
deprecated has a built-in web server you

00:04:54,660 --> 00:05:00,090
can go to any directory on your machine

00:04:56,610 --> 00:05:02,130
and just say PHP - capital s localhost :

00:05:00,090 --> 00:05:03,780
whatever port you want to dream up you

00:05:02,130 --> 00:05:05,190
have a web server running it's not

00:05:03,780 --> 00:05:06,120
something used in production there's

00:05:05,190 --> 00:05:07,950
something you can use when you're

00:05:06,120 --> 00:05:09,390
developing locally so you don't

00:05:07,950 --> 00:05:10,560
necessarily I don't really use web

00:05:09,390 --> 00:05:11,730
servers on my local machine

00:05:10,560 --> 00:05:13,170
very often I mean this can't do

00:05:11,730 --> 00:05:15,240
everything but I use this all the time

00:05:13,170 --> 00:05:16,380
and it kind of saves the whole like I've

00:05:15,240 --> 00:05:18,270
got to figure out where my patch you can

00:05:16,380 --> 00:05:20,490
figure is or nginx config and set up a

00:05:18,270 --> 00:05:22,830
virtual host and all that so I had this

00:05:20,490 --> 00:05:25,440
one file and now I've run this one

00:05:22,830 --> 00:05:28,500
command and I have a working application

00:05:25,440 --> 00:05:30,120
and that is all of the fundamental

00:05:28,500 --> 00:05:31,980
concepts using all the fundamental like

00:05:30,120 --> 00:05:34,380
difficult concepts that are common

00:05:31,980 --> 00:05:36,090
across Silex Symphony and Drupal ace you

00:05:34,380 --> 00:05:37,650
can see we can't quite see up top there

00:05:36,090 --> 00:05:42,500
but up top there I'm just running the

00:05:37,650 --> 00:05:42,500
PHP - capital S for localhost colon 8080

00:05:43,490 --> 00:05:48,210
and yes you can use that web server for

00:05:46,620 --> 00:05:50,850
Drupal while I use it for Drupal 7 a

00:05:48,210 --> 00:05:53,250
Drupal 8 so these are the fundamental

00:05:50,850 --> 00:05:54,780
concepts here requests routing

00:05:53,250 --> 00:05:56,880
controller and response and I'm gonna go

00:05:54,780 --> 00:05:57,870
over those really quickly because once

00:05:56,880 --> 00:05:59,750
you have your mind wrapped around those

00:05:57,870 --> 00:06:01,860
which are not difficult concepts

00:05:59,750 --> 00:06:03,590
everything just opens out you can just

00:06:01,860 --> 00:06:07,860
use things all kinds of tools everywhere

00:06:03,590 --> 00:06:09,360
so the first thing is the route so this

00:06:07,860 --> 00:06:10,920
is going to be like the URL to your page

00:06:09,360 --> 00:06:13,170
of the URL pattern so this is gonna

00:06:10,920 --> 00:06:15,420
match /hello slash star so the curly

00:06:13,170 --> 00:06:17,850
brace thing in symphony and Drupal and

00:06:15,420 --> 00:06:19,740
Drupal 8 I can't I can't actually block

00:06:17,850 --> 00:06:22,500
the microphone when I say stuff the

00:06:19,740 --> 00:06:24,600
curly brace thing is a wild-card so this

00:06:22,500 --> 00:06:26,760
is a page 4 slash hello / anything so

00:06:24,600 --> 00:06:28,710
this would be like pretty similar to

00:06:26,760 --> 00:06:30,090
hook menu right doesn't give me

00:06:28,710 --> 00:06:31,470
knowledge would be like no that was a

00:06:30,090 --> 00:06:34,170
wrong analogy okay I'm getting more

00:06:31,470 --> 00:06:35,640
doubts than those so it's the same exact

00:06:34,170 --> 00:06:37,050
idea that so I said earlier I was like

00:06:35,640 --> 00:06:38,640
it's the routes and controllers things

00:06:37,050 --> 00:06:39,810
are different but they're actually just

00:06:38,640 --> 00:06:40,260
the exact same thing you guys were

00:06:39,810 --> 00:06:42,720
always doing

00:06:40,260 --> 00:06:45,060
so you start with the route and then the

00:06:42,720 --> 00:06:46,530
route points to a controller which is a

00:06:45,060 --> 00:06:48,840
word you will hear a lot don't be

00:06:46,530 --> 00:06:51,060
confused a controller is a function that

00:06:48,840 --> 00:06:53,100
builds your page so that right there is

00:06:51,060 --> 00:06:55,200
just an anonymous function that builds

00:06:53,100 --> 00:06:57,120
your page maybe it returns JSON or full

00:06:55,200 --> 00:06:59,550
HTML this one's pretty darn simple and

00:06:57,120 --> 00:07:00,900
that's pretty much like the fundamental

00:06:59,550 --> 00:07:03,210
part of every framework you have routes

00:07:00,900 --> 00:07:04,740
which have the URL part and they point

00:07:03,210 --> 00:07:07,740
to a controller which is a function that

00:07:04,740 --> 00:07:09,780
you write to build a page and that's it

00:07:07,740 --> 00:07:11,790
that's why we only need these two parts

00:07:09,780 --> 00:07:13,860
here it's also one little extra credit

00:07:11,790 --> 00:07:16,350
thing any time you have a curly brace in

00:07:13,860 --> 00:07:17,880
the URL you can have that as an argument

00:07:16,350 --> 00:07:19,080
to your controller and you can even do

00:07:17,880 --> 00:07:20,970
that if you have multiple curly braces

00:07:19,080 --> 00:07:22,860
and again this is the same in Silex

00:07:20,970 --> 00:07:24,750
symphony Drupal because they're all

00:07:22,860 --> 00:07:28,680
using the same code behind the scenes

00:07:24,750 --> 00:07:30,210
which is wonderful and then our job our

00:07:28,680 --> 00:07:34,320
only job really is just to make this

00:07:30,210 --> 00:07:35,940
page so request so again I'll back up

00:07:34,320 --> 00:07:38,040
cuz I don't talk about this too much our

00:07:35,940 --> 00:07:40,470
job even more abstractly as developers

00:07:38,040 --> 00:07:42,180
is just to return a request into a

00:07:40,470 --> 00:07:44,580
response request comes into the server

00:07:42,180 --> 00:07:46,740
our only job is to create and return a

00:07:44,580 --> 00:07:49,500
response if you can do that in one

00:07:46,740 --> 00:07:51,300
little line awesome if you need to load

00:07:49,500 --> 00:07:53,190
up a bunch of node stuff and go through

00:07:51,300 --> 00:07:55,260
the theming layer awesome that's just

00:07:53,190 --> 00:07:57,870
another way to get to the end goal which

00:07:55,260 --> 00:07:59,970
is creating a response and when you boil

00:07:57,870 --> 00:08:02,010
this down to its smallest pieces this is

00:07:59,970 --> 00:08:03,660
done by having a route in a controller

00:08:02,010 --> 00:08:05,250
which is just a URL pattern and a

00:08:03,660 --> 00:08:07,350
function that builds the page and now we

00:08:05,250 --> 00:08:09,630
have it and now if you didn't know that

00:08:07,350 --> 00:08:11,370
before you now understand how every

00:08:09,630 --> 00:08:14,790
framework works basically in every

00:08:11,370 --> 00:08:17,910
language so that was Silex which is

00:08:14,790 --> 00:08:20,040
teeny-tiny so like what is symphony then

00:08:17,910 --> 00:08:21,690
well symphony is just Silex with kind of

00:08:20,040 --> 00:08:23,670
a directory structure so instead of just

00:08:21,690 --> 00:08:25,140
one file when you download like a new

00:08:23,670 --> 00:08:27,180
symphony project it kind of gives you

00:08:25,140 --> 00:08:28,770
just some directories and says hey maybe

00:08:27,180 --> 00:08:30,240
you can put stuff here and put this

00:08:28,770 --> 00:08:32,220
other stuff over here will give you some

00:08:30,240 --> 00:08:35,610
organization but it's still just that

00:08:32,220 --> 00:08:38,790
same routing controller kind of flow so

00:08:35,610 --> 00:08:40,380
download the symphony framework we have

00:08:38,790 --> 00:08:41,729
like a little installer here so if you

00:08:40,380 --> 00:08:43,740
go to symphony comm and click download

00:08:41,729 --> 00:08:45,630
you'll see this code here basically

00:08:43,740 --> 00:08:48,150
downloads like a little binary file a

00:08:45,630 --> 00:08:51,030
little downloader file once you have

00:08:48,150 --> 00:08:52,140
that I'll top once so the previous step

00:08:51,030 --> 00:08:53,790
gives you a little binary called

00:08:52,140 --> 00:08:55,440
symphony so you have symphony

00:08:53,790 --> 00:08:57,510
new up their symphonies the name of that

00:08:55,440 --> 00:08:58,590
binary once you download that whenever

00:08:57,510 --> 00:09:01,170
you want to start a new project it's

00:08:58,590 --> 00:09:02,910
just Symphony new and then a directory

00:09:01,170 --> 00:09:04,230
name and so this actually goes and grabs

00:09:02,910 --> 00:09:06,840
the latest version of symphony and

00:09:04,230 --> 00:09:09,120
downloads that onto your computer and

00:09:06,840 --> 00:09:10,800
puts it in that directory run some you

00:09:09,120 --> 00:09:12,180
know checks to make sure you have kind

00:09:10,800 --> 00:09:13,830
of a sane environment and all that good

00:09:12,180 --> 00:09:15,180
stuff it even gives you like this really

00:09:13,830 --> 00:09:16,580
friendly message down there to kind of

00:09:15,180 --> 00:09:19,980
tell you what to do next

00:09:16,580 --> 00:09:23,910
cool and this is what it gives you and

00:09:19,980 --> 00:09:25,560
one of the issues that you can run into

00:09:23,910 --> 00:09:26,940
in any framework is like the more files

00:09:25,560 --> 00:09:28,770
that they give you in the beginning the

00:09:26,940 --> 00:09:30,930
more you're like whoa I don't know

00:09:28,770 --> 00:09:33,000
what's going on so there's a couple non

00:09:30,930 --> 00:09:34,200
important files and I'm hiding here just

00:09:33,000 --> 00:09:35,640
to make it look easier if those files

00:09:34,200 --> 00:09:37,590
and I'm hiding aren't actually important

00:09:35,640 --> 00:09:39,420
this is basically all that we have

00:09:37,590 --> 00:09:40,950
inside of that new symphony project we

00:09:39,420 --> 00:09:43,260
have the app directory which is

00:09:40,950 --> 00:09:45,480
configuration and templates if you're

00:09:43,260 --> 00:09:48,600
writing anything that's not a PHP file

00:09:45,480 --> 00:09:49,860
is gonna go in that app directory then

00:09:48,600 --> 00:09:51,870
we have the source directory that's

00:09:49,860 --> 00:09:53,160
where your PHP files go and by the way

00:09:51,870 --> 00:09:55,410
in symphony if you're creating a PHP

00:09:53,160 --> 00:09:57,630
file it's gonna be a PHP class so this

00:09:55,410 --> 00:09:58,770
is where your PHP classes go and that's

00:09:57,630 --> 00:10:00,390
actually it those are really the only

00:09:58,770 --> 00:10:02,280
two directories that you are going to

00:10:00,390 --> 00:10:03,660
touch inside of a symphony project

00:10:02,280 --> 00:10:04,980
the other important directory is the

00:10:03,660 --> 00:10:06,900
vendor directory that's where like

00:10:04,980 --> 00:10:08,670
outside libraries live they're

00:10:06,900 --> 00:10:13,080
downloaded for you if you want to like

00:10:08,670 --> 00:10:14,880
go kung-fu and open up like a core code

00:10:13,080 --> 00:10:16,440
and look into it and you know mess

00:10:14,880 --> 00:10:17,820
around stuff you can go in there but you

00:10:16,440 --> 00:10:19,500
know you don't actually code in there so

00:10:17,820 --> 00:10:22,050
that's just kind of sitting there for us

00:10:19,500 --> 00:10:23,570
so it's all about app and source and

00:10:22,050 --> 00:10:26,400
that's it

00:10:23,570 --> 00:10:28,500
so same thing okay so we downloaded the

00:10:26,400 --> 00:10:30,060
project in Silex it was just write one

00:10:28,500 --> 00:10:33,990
file now we kind of get this little

00:10:30,060 --> 00:10:35,880
skeleton project and then we just start

00:10:33,990 --> 00:10:37,680
to beat up the built-in PHP web server

00:10:35,880 --> 00:10:40,710
which is already easy enough member as

00:10:37,680 --> 00:10:43,410
PHP - capitalist localhost colon 8080

00:10:40,710 --> 00:10:44,790
give you like a little command that does

00:10:43,410 --> 00:10:46,650
it for you but like don't get confused

00:10:44,790 --> 00:10:51,450
that behind the scenes is just running

00:10:46,650 --> 00:10:53,460
PHP - capital last localhost colon 8080

00:10:51,450 --> 00:10:56,100
R the only thing that's different

00:10:53,460 --> 00:10:57,780
between like Drupal and Symphony is CoA

00:10:56,100 --> 00:10:59,970
of that web directory that's your

00:10:57,780 --> 00:11:01,770
document root so it's not like the whole

00:10:59,970 --> 00:11:03,690
project is in the document root this

00:11:01,770 --> 00:11:05,130
command here actually sets up your web

00:11:03,690 --> 00:11:06,240
directory to be your document root so if

00:11:05,130 --> 00:11:07,379
you add a virtual host you point it at

00:11:06,240 --> 00:11:08,609
the web directories

00:11:07,379 --> 00:11:12,509
nothing outside a web is actually

00:11:08,609 --> 00:11:14,039
accessible cool and that's it so at this

00:11:12,509 --> 00:11:15,299
point we've downloaded the project and

00:11:14,039 --> 00:11:17,189
we have started the built-in web server

00:11:15,299 --> 00:11:21,119
and now we can go to localhost colon

00:11:17,189 --> 00:11:22,739
8080 while working right it's not it's a

00:11:21,119 --> 00:11:25,049
big error page may be working ich

00:11:22,739 --> 00:11:26,639
Symphony project and really what this is

00:11:25,049 --> 00:11:27,059
saying is hi I'm the symphony pac-man

00:11:26,639 --> 00:11:29,129
ghost

00:11:27,059 --> 00:11:30,359
things are looking awesome as you can

00:11:29,129 --> 00:11:32,069
tell by this beautiful looking error

00:11:30,359 --> 00:11:34,559
page you just don't have any pages yet

00:11:32,069 --> 00:11:35,629
it's like this is actually a good sign

00:11:34,559 --> 00:11:38,549
at this point

00:11:35,629 --> 00:11:40,289
cool so installation check in again

00:11:38,549 --> 00:11:42,149
what is installation it's downloading

00:11:40,289 --> 00:11:44,220
Symphony and then running the web server

00:11:42,149 --> 00:11:45,359
which is kind of like Drupal as well

00:11:44,220 --> 00:11:46,769
Drupal is the extra thing when you

00:11:45,359 --> 00:11:47,399
install that it does a bunch of setup in

00:11:46,769 --> 00:11:49,409
the database

00:11:47,399 --> 00:11:50,999
Symphony by default doesn't use anything

00:11:49,409 --> 00:11:52,439
in the database so there's it's

00:11:50,999 --> 00:11:54,089
literally just files on your computer if

00:11:52,439 --> 00:11:56,609
you are get fussy and don't like your

00:11:54,089 --> 00:11:57,959
project just RM dash RF it and it's gone

00:11:56,609 --> 00:12:00,299
so it doesn't like touch anything else

00:11:57,959 --> 00:12:02,159
there so let's just get the code start a

00:12:00,299 --> 00:12:02,819
web server you've got a working symphony

00:12:02,159 --> 00:12:05,189
installation

00:12:02,819 --> 00:12:06,869
alright so let's build a page which we

00:12:05,189 --> 00:12:10,889
already know the steps is gonna be route

00:12:06,869 --> 00:12:12,269
and controller so I'm gonna keep track

00:12:10,889 --> 00:12:15,149
of the files that we're modifying up

00:12:12,269 --> 00:12:16,470
there and well I'll have to help you

00:12:15,149 --> 00:12:18,779
because it's cutting off a little on top

00:12:16,470 --> 00:12:20,609
this is so we need the first thing we

00:12:18,779 --> 00:12:22,529
need to do is create the route the route

00:12:20,609 --> 00:12:24,419
is not a PHP file it's configuration

00:12:22,529 --> 00:12:26,249
file and yamo so it's going to be in the

00:12:24,419 --> 00:12:30,119
app directory somewhere app directory is

00:12:26,249 --> 00:12:31,649
for everything except for PHP files so

00:12:30,119 --> 00:12:34,069
this is an app that's the part you can't

00:12:31,649 --> 00:12:36,089
see if their app config routing dot yml

00:12:34,069 --> 00:12:38,249
and when we define here is member in

00:12:36,089 --> 00:12:39,929
Silex we just had like /hello slash

00:12:38,249 --> 00:12:41,279
curly brace name it's the same thing

00:12:39,929 --> 00:12:43,229
here in yellow you have thing called

00:12:41,279 --> 00:12:45,449
path that defines the path your routes

00:12:43,229 --> 00:12:46,949
and then the other job of your route is

00:12:45,449 --> 00:12:49,079
it needs to point to that function

00:12:46,949 --> 00:12:50,429
that's going to build the page that's

00:12:49,079 --> 00:12:53,220
the underscore controller part which is

00:12:50,429 --> 00:12:55,289
not really a dot dot dot I shortened it

00:12:53,220 --> 00:12:58,619
here that underscore controller points

00:12:55,289 --> 00:13:00,269
to a class call on : a method name so

00:12:58,619 --> 00:13:03,149
your controller is always a function in

00:13:00,269 --> 00:13:05,309
Silex it's an anonymous function in a

00:13:03,149 --> 00:13:07,949
symphony framework it's just a function

00:13:05,309 --> 00:13:10,019
inside of a class so class call and call

00:13:07,949 --> 00:13:11,939
and method name why is it at bundle

00:13:10,019 --> 00:13:13,799
slash controller I mean that really can

00:13:11,939 --> 00:13:15,389
be whatever you want there's some kind

00:13:13,799 --> 00:13:16,379
of rules about Auto loading and things

00:13:15,389 --> 00:13:18,710
like that but you can make your

00:13:16,379 --> 00:13:21,360
namespace whatever you want

00:13:18,710 --> 00:13:22,830
well and then here's the controller part

00:13:21,360 --> 00:13:24,960
so we created the route let's create

00:13:22,830 --> 00:13:26,640
that function so inside now this is a

00:13:24,960 --> 00:13:30,240
PHP class right so this is going inside

00:13:26,640 --> 00:13:33,540
of the SRC directory so inside source /

00:13:30,240 --> 00:13:34,890
app bundle / controller we're gonna put

00:13:33,540 --> 00:13:36,720
this file here by the way one thing I

00:13:34,890 --> 00:13:39,300
did not mention earlier that I meant to

00:13:36,720 --> 00:13:42,810
is that bundles and symphony are kind of

00:13:39,300 --> 00:13:45,360
like modules in Drupal except that the

00:13:42,810 --> 00:13:47,400
current recommendation is that you sort

00:13:45,360 --> 00:13:48,540
of put everything into one bundle okay

00:13:47,400 --> 00:13:50,760
now for like Drupal people you're like

00:13:48,540 --> 00:13:51,930
no have many have many bundles have many

00:13:50,760 --> 00:13:53,520
modules it's just kind of a

00:13:51,930 --> 00:13:55,080
philosophical thing if you are making

00:13:53,520 --> 00:13:56,700
something that's reusable that you're

00:13:55,080 --> 00:13:58,470
going to actually share across projects

00:13:56,700 --> 00:13:59,820
then you put it in its own bundle and

00:13:58,470 --> 00:14:00,810
make it decoupled and all that good

00:13:59,820 --> 00:14:01,980
stuff but if you're building your app

00:14:00,810 --> 00:14:03,510
we're just like hey keep your life

00:14:01,980 --> 00:14:05,160
simple and put everything into one

00:14:03,510 --> 00:14:06,600
directory so a bundle is just like a

00:14:05,160 --> 00:14:08,040
module it's kind of like a directory and

00:14:06,600 --> 00:14:09,810
when you start Symphony we kind of give

00:14:08,040 --> 00:14:10,920
you one called app bundle so that's why

00:14:09,810 --> 00:14:13,560
you're putting yourself inside of here

00:14:10,920 --> 00:14:15,300
so create the class have the function

00:14:13,560 --> 00:14:17,340
there's two really really important

00:14:15,300 --> 00:14:19,050
things I want to highlight here one and

00:14:17,340 --> 00:14:20,610
you'll see this in Drupal 8 and symphony

00:14:19,050 --> 00:14:22,950
and every other framework at this point

00:14:20,610 --> 00:14:24,930
the only rule about this file is that

00:14:22,950 --> 00:14:26,940
the namespace has to match the directory

00:14:24,930 --> 00:14:29,370
structure so the fact that we're in a

00:14:26,940 --> 00:14:31,830
app bundle / controller directory means

00:14:29,370 --> 00:14:33,750
our namespaces app Mundell / controller

00:14:31,830 --> 00:14:35,730
and then because our class name is

00:14:33,750 --> 00:14:38,880
polite controller we need to be impolite

00:14:35,730 --> 00:14:40,140
- controller dot PHP the reason has to

00:14:38,880 --> 00:14:42,090
do with Auto loading and the fact you

00:14:40,140 --> 00:14:43,590
know basically it has to follow those

00:14:42,090 --> 00:14:45,180
standards or else the framework doesn't

00:14:43,590 --> 00:14:46,800
know where your class lives and it's the

00:14:45,180 --> 00:14:47,850
same thing with Drupal 8 so just follow

00:14:46,800 --> 00:14:49,980
those rules and you'll be in good shape

00:14:47,850 --> 00:14:52,680
the second thing is remember I said

00:14:49,980 --> 00:14:54,930
earlier our only job as developers is to

00:14:52,680 --> 00:14:57,930
create and return a response from your

00:14:54,930 --> 00:14:59,160
application so in symphony the way we do

00:14:57,930 --> 00:15:00,690
that is literally our controllers

00:14:59,160 --> 00:15:02,400
because our controller is a function

00:15:00,690 --> 00:15:05,340
that builds the page so that function

00:15:02,400 --> 00:15:07,710
that we write needs to return a symphony

00:15:05,340 --> 00:15:09,390
response object which by the way is the

00:15:07,710 --> 00:15:11,250
same as Drupal 8 s response object

00:15:09,390 --> 00:15:13,620
Symphony response object which is pretty

00:15:11,250 --> 00:15:16,470
simple because what's in a response text

00:15:13,620 --> 00:15:18,270
and if you want to uh you know you can

00:15:16,470 --> 00:15:19,920
change the header or sorry a status code

00:15:18,270 --> 00:15:21,510
and then headers so response is nothing

00:15:19,920 --> 00:15:23,340
more than like the content of your

00:15:21,510 --> 00:15:24,930
response and some headers so in this

00:15:23,340 --> 00:15:27,240
case we're returning a new response from

00:15:24,930 --> 00:15:29,280
our controller and how you create that

00:15:27,240 --> 00:15:31,050
response it's totally up to you guys you

00:15:29,280 --> 00:15:32,130
guys could make a really nasty curl

00:15:31,050 --> 00:15:33,420
request out to a

00:15:32,130 --> 00:15:35,220
application here and have it do the work

00:15:33,420 --> 00:15:36,750
and be like Oh see I'm there's a

00:15:35,220 --> 00:15:38,700
response I took the text from that API

00:15:36,750 --> 00:15:39,990
endpoint stuck in this response Symphony

00:15:38,700 --> 00:15:42,060
doesn't care what you do in your

00:15:39,990 --> 00:15:43,770
controller it's entirely up to you to do

00:15:42,060 --> 00:15:45,300
whatever work you need to do to return

00:15:43,770 --> 00:15:49,020
like the all-important

00:15:45,300 --> 00:15:51,240
response object at the bottom cool and

00:15:49,020 --> 00:15:52,860
with that we have a working page we went

00:15:51,240 --> 00:15:54,750
to find the route we defined the

00:15:52,860 --> 00:15:56,910
controller function and it returns a

00:15:54,750 --> 00:15:58,800
response and that is the symphony

00:15:56,910 --> 00:15:59,970
framework when I do symphony trainings

00:15:58,800 --> 00:16:02,790
like I stopped at this point I was like

00:15:59,970 --> 00:16:04,650
you guys now know 50% of symphony it's

00:16:02,790 --> 00:16:06,120
the route controller thing this route

00:16:04,650 --> 00:16:08,490
controller thing is the same in Silex

00:16:06,120 --> 00:16:12,870
symphony Drupal 8 you see this flow it's

00:16:08,490 --> 00:16:14,460
very very simple now it is simple but

00:16:12,870 --> 00:16:16,110
let's I'm gonna look ahead to like how

00:16:14,460 --> 00:16:17,040
what kind of debugging tools we have

00:16:16,110 --> 00:16:18,840
like what if something's not working

00:16:17,040 --> 00:16:20,430
like what routes do I have in my

00:16:18,840 --> 00:16:22,410
application maybe I inherited an

00:16:20,430 --> 00:16:23,430
application that has like 500 routes and

00:16:22,410 --> 00:16:25,410
I'm trying to figure out where things

00:16:23,430 --> 00:16:27,540
are so when you use these symfony

00:16:25,410 --> 00:16:29,910
framework you have a number of tools

00:16:27,540 --> 00:16:30,930
first off you can't see out there I'll

00:16:29,910 --> 00:16:34,500
show you tell you what that command is

00:16:30,930 --> 00:16:36,270
we have a okay so Drupal has drush we

00:16:34,500 --> 00:16:38,040
have something called app console it's

00:16:36,270 --> 00:16:39,690
the same thing it's an executable file

00:16:38,040 --> 00:16:42,060
that's inside of your project basically

00:16:39,690 --> 00:16:43,860
and you can execute commands on it that

00:16:42,060 --> 00:16:45,150
help you debug so the part that's

00:16:43,860 --> 00:16:47,250
cutting up on top there is I'm calling

00:16:45,150 --> 00:16:49,800
that app console command and I'm calling

00:16:47,250 --> 00:16:51,870
a sub command called debug colon router

00:16:49,800 --> 00:16:53,490
now basically saying hey application

00:16:51,870 --> 00:16:54,060
show me all of the routes you have in

00:16:53,490 --> 00:16:55,500
the system

00:16:54,060 --> 00:16:57,240
I want to see like what the pages are

00:16:55,500 --> 00:16:59,130
inside of our system here the vast

00:16:57,240 --> 00:17:00,180
majority of these the profiler thing

00:16:59,130 --> 00:17:02,340
I'll show you that in a second that's

00:17:00,180 --> 00:17:04,620
just a debugging tool the key thing is

00:17:02,340 --> 00:17:06,930
there's our on bottom for a slash hello

00:17:04,620 --> 00:17:08,939
slash curly brace name so you can always

00:17:06,930 --> 00:17:11,220
get a you know a picture of like what

00:17:08,939 --> 00:17:13,370
are the routes in the system this also

00:17:11,220 --> 00:17:15,720
exists inside of Drupal 8 it's a

00:17:13,370 --> 00:17:17,699
contributor pool console it's just like

00:17:15,720 --> 00:17:21,329
app console and you can also list all of

00:17:17,699 --> 00:17:22,620
the routes inside of Drupal 8 cool when

00:17:21,329 --> 00:17:23,850
you're using simply frameworks or my

00:17:22,620 --> 00:17:26,579
favorite things you have something

00:17:23,850 --> 00:17:27,839
called the web debug toolbar when I

00:17:26,579 --> 00:17:29,790
don't have this I kind of panic

00:17:27,839 --> 00:17:31,260
sometimes if I'm not in a symphony frame

00:17:29,790 --> 00:17:33,120
project I'm gonna need my debug toolbar

00:17:31,260 --> 00:17:34,920
because it has really important stuff

00:17:33,120 --> 00:17:37,320
like if I hover over right there it

00:17:34,920 --> 00:17:39,150
actually tells me what route was matched

00:17:37,320 --> 00:17:40,410
on this page and what controller is

00:17:39,150 --> 00:17:42,840
being called sees Tommy polite

00:17:40,410 --> 00:17:44,850
controller Colin colons say hello action

00:17:42,840 --> 00:17:45,210
is what's being executed on this page so

00:17:44,850 --> 00:17:46,830
like

00:17:45,210 --> 00:17:49,080
Amaya what code is running this page

00:17:46,830 --> 00:17:50,280
it's telling you right there also as

00:17:49,080 --> 00:17:52,200
obviously like the amount of time it

00:17:50,280 --> 00:17:54,030
took the memory it tells you like how

00:17:52,200 --> 00:17:55,320
many database queries were made which

00:17:54,030 --> 00:17:56,880
were none on this page but if you do

00:17:55,320 --> 00:17:59,760
make database queries it tells you all

00:17:56,880 --> 00:18:02,520
that stuff and if you click any of these

00:17:59,760 --> 00:18:04,080
icons here you go into another page

00:18:02,520 --> 00:18:05,820
which is called the profiler which is

00:18:04,080 --> 00:18:08,730
like the web debug two of our times a

00:18:05,820 --> 00:18:09,870
hundred has like way more information so

00:18:08,730 --> 00:18:11,310
in this case I can actually see all the

00:18:09,870 --> 00:18:14,100
log entries that were made on that

00:18:11,310 --> 00:18:15,600
request the routing tab there which show

00:18:14,100 --> 00:18:16,830
me all of the routes in my system and

00:18:15,600 --> 00:18:19,050
show me which one matched for this

00:18:16,830 --> 00:18:20,730
security to tell me what user I have if

00:18:19,050 --> 00:18:22,260
I sent any emails on the requests it

00:18:20,730 --> 00:18:25,020
tells me about that on an emails and

00:18:22,260 --> 00:18:26,670
then doctrine is the engine that's we

00:18:25,020 --> 00:18:27,810
use for talking to a database if you

00:18:26,670 --> 00:18:29,520
click on doctrine you'd be able to see

00:18:27,810 --> 00:18:31,680
every single query that was made on that

00:18:29,520 --> 00:18:33,390
page you can even do like in explain on

00:18:31,680 --> 00:18:35,760
the query to like see why it was slow

00:18:33,390 --> 00:18:40,500
and all that good stuff but the most

00:18:35,760 --> 00:18:41,670
important one is the timeline this

00:18:40,500 --> 00:18:44,550
actually shows you everything that

00:18:41,670 --> 00:18:46,470
happens from request to response inside

00:18:44,550 --> 00:18:48,180
the symfony framework because us as

00:18:46,470 --> 00:18:50,460
developers all we do is write the route

00:18:48,180 --> 00:18:51,840
and then the controller like everything

00:18:50,460 --> 00:18:52,980
to happen between and around that like

00:18:51,840 --> 00:18:54,990
we don't really know something else is

00:18:52,980 --> 00:18:58,080
doing that this gives you vision into

00:18:54,990 --> 00:18:59,520
what that is I mean it's really supposed

00:18:58,080 --> 00:19:01,230
to be there for profiling to be like Oh

00:18:59,520 --> 00:19:02,430
which part was slow but you this is

00:19:01,230 --> 00:19:05,880
actually a great way to be like what's

00:19:02,430 --> 00:19:07,200
going on behind the scenes also two

00:19:05,880 --> 00:19:09,420
things I'll say about this is you can

00:19:07,200 --> 00:19:10,620
actually add your own stuff to this so

00:19:09,420 --> 00:19:11,880
there's an object in Symphony where you

00:19:10,620 --> 00:19:14,310
can basically say hey I want to start

00:19:11,880 --> 00:19:15,810
timeing something called API call and

00:19:14,310 --> 00:19:17,700
then you do it and then you say I'm done

00:19:15,810 --> 00:19:19,260
timing that and then when you refresh

00:19:17,700 --> 00:19:21,270
and go into this you're gonna see that

00:19:19,260 --> 00:19:22,950
line inside of this as well so you can

00:19:21,270 --> 00:19:24,630
add whatever you want into the profiler

00:19:22,950 --> 00:19:27,870
here the second thing I want to say is

00:19:24,630 --> 00:19:29,190
this also exists in Drupal 8 which I

00:19:27,870 --> 00:19:33,390
find fascinating

00:19:29,190 --> 00:19:35,910
it's a contribute there yes this is huge

00:19:33,390 --> 00:19:38,520
is amazing this is how I learned how

00:19:35,910 --> 00:19:40,560
Drupal 8 works because I went here and I

00:19:38,520 --> 00:19:42,570
said ok let's just start opening up the

00:19:40,560 --> 00:19:44,280
you can't see here but those are class

00:19:42,570 --> 00:19:46,020
names and functions it's telling you

00:19:44,280 --> 00:19:47,490
like what functions are being called so

00:19:46,020 --> 00:19:50,790
I was like ok let me go to the timeline

00:19:47,490 --> 00:19:52,230
and just open up these classes like see

00:19:50,790 --> 00:19:55,050
what they're doing see how Drupal 8

00:19:52,230 --> 00:19:58,290
actually works behind the scenes so it's

00:19:55,050 --> 00:19:59,010
called Drupal profiler so it's country

00:19:58,290 --> 00:20:00,300
my just

00:19:59,010 --> 00:20:04,560
stall them like a few weeks ago it's

00:20:00,300 --> 00:20:06,480
it's working really well um so again

00:20:04,560 --> 00:20:07,770
we've done routing controller so in

00:20:06,480 --> 00:20:11,190
order to create a page in Symphony you

00:20:07,770 --> 00:20:12,600
touch two files and that's it but in the

00:20:11,190 --> 00:20:14,760
symphony framework we can do even less

00:20:12,600 --> 00:20:16,260
work and we typically do not everybody

00:20:14,760 --> 00:20:17,610
does this one of things about Symphony

00:20:16,260 --> 00:20:19,530
for better or worse is we give you

00:20:17,610 --> 00:20:21,090
options we never like say you have to

00:20:19,530 --> 00:20:24,090
use the mo every time this configuration

00:20:21,090 --> 00:20:26,310
you can do an XML yamo PHP or annotation

00:20:24,090 --> 00:20:28,020
and in our Doc's we even have tabs for

00:20:26,310 --> 00:20:30,330
each of them yes I have some very very

00:20:28,020 --> 00:20:32,460
good core doc contributors that like go

00:20:30,330 --> 00:20:34,080
out of their way to like do an XML

00:20:32,460 --> 00:20:36,780
version of every single code block we

00:20:34,080 --> 00:20:38,430
have in the site so instead of doing

00:20:36,780 --> 00:20:40,230
routing in Y amel you can do it in

00:20:38,430 --> 00:20:41,490
annotations so if you haven't heard the

00:20:40,230 --> 00:20:43,800
word annotation before I'm guessing a

00:20:41,490 --> 00:20:45,990
lot of you have annotation is the word

00:20:43,800 --> 00:20:48,270
for a PHP comment that is actually

00:20:45,990 --> 00:20:50,250
parsed as configuration some people

00:20:48,270 --> 00:20:51,870
absolutely love them some people

00:20:50,250 --> 00:20:53,760
absolutely hate them I happen to be on

00:20:51,870 --> 00:20:55,170
the first side of things people that

00:20:53,760 --> 00:20:56,160
hate them is because like they're

00:20:55,170 --> 00:20:57,720
comments and so they're like

00:20:56,160 --> 00:20:59,340
functionality shouldn't go into comments

00:20:57,720 --> 00:21:01,890
fair enough if you don't like this then

00:20:59,340 --> 00:21:03,390
you stick to the gamal version but I

00:21:01,890 --> 00:21:05,760
like this because in order to create a

00:21:03,390 --> 00:21:06,990
page I create this file in this file

00:21:05,760 --> 00:21:09,360
alone and that's it

00:21:06,990 --> 00:21:11,700
so like one step to create a page inside

00:21:09,360 --> 00:21:12,960
of Symphony and as an added bonus right

00:21:11,700 --> 00:21:14,160
when you're looking at this six months

00:21:12,960 --> 00:21:15,990
from now you're like oh yeah oh yeah

00:21:14,160 --> 00:21:17,370
there's the URL to this page it's it's

00:21:15,990 --> 00:21:19,410
right there I don't have to go dig

00:21:17,370 --> 00:21:22,250
somewhere else to see like what what URL

00:21:19,410 --> 00:21:24,480
is feeding into this controller function

00:21:22,250 --> 00:21:25,980
all right so that's the route and

00:21:24,480 --> 00:21:29,780
controller that's the first half of

00:21:25,980 --> 00:21:29,780
symphony Oh question yeah

00:21:32,080 --> 00:21:39,130
yep oh good question so if you create a

00:21:37,210 --> 00:21:42,010
route in yamo and this way you can also

00:21:39,130 --> 00:21:43,570
do an XML or PHP which one wins and the

00:21:42,010 --> 00:21:45,070
in the same it's just the answers the

00:21:43,570 --> 00:21:47,920
same in Salix Drupal and Symphony I know

00:21:45,070 --> 00:21:50,320
I'm like a broken record the routes

00:21:47,920 --> 00:21:51,820
matched from top to bottom so if you

00:21:50,320 --> 00:21:53,890
have two routes that are likes to have

00:21:51,820 --> 00:21:55,510
the same pattern /hello slash curly

00:21:53,890 --> 00:21:57,160
brace name then it's gonna match the

00:21:55,510 --> 00:21:58,840
first one and that's because the router

00:21:57,160 --> 00:22:00,070
it actually just goes one by one to your

00:21:58,840 --> 00:22:02,080
routes and as soon as it finds the first

00:22:00,070 --> 00:22:03,070
one that matches it quits which is

00:22:02,080 --> 00:22:03,970
actually kind of good prefer for

00:22:03,070 --> 00:22:06,340
performance so if you have like a

00:22:03,970 --> 00:22:07,510
thousand routes or something you know or

00:22:06,340 --> 00:22:08,830
maybe it only goes through like 50 of

00:22:07,510 --> 00:22:16,360
them and finds the one and then stops

00:22:08,830 --> 00:22:18,550
yeah oh good yeah yeah okay good oh man

00:22:16,360 --> 00:22:20,110
love it love it okay so but the question

00:22:18,550 --> 00:22:21,610
was like yeah but let me repeat my

00:22:20,110 --> 00:22:22,810
question which is first which actually

00:22:21,610 --> 00:22:26,080
won and ends up being first

00:22:22,810 --> 00:22:27,610
so in Symphony like unlike Drupal and

00:22:26,080 --> 00:22:29,290
Drupal when you have a Drupal 8 module

00:22:27,610 --> 00:22:31,030
it just iterates over all of your

00:22:29,290 --> 00:22:33,190
modules and like looks for a routing dot

00:22:31,030 --> 00:22:34,720
yml file and loads that so you like

00:22:33,190 --> 00:22:36,280
there I'm sure there's some ways to

00:22:34,720 --> 00:22:38,380
control that maybe about it exactly sure

00:22:36,280 --> 00:22:40,600
in symphony you haven't that main app

00:22:38,380 --> 00:22:41,950
config routing dot yml file that I

00:22:40,600 --> 00:22:44,560
showed earlier with where we put the

00:22:41,950 --> 00:22:46,480
yamo route that's the only file that

00:22:44,560 --> 00:22:48,880
Symphony loads to load routes by default

00:22:46,480 --> 00:22:51,070
so what I didn't show here is in order

00:22:48,880 --> 00:22:52,570
for this to work there's actually an

00:22:51,070 --> 00:22:54,910
entry inside of your routing dot yml

00:22:52,570 --> 00:22:57,400
that it basically says go read

00:22:54,910 --> 00:22:58,930
annotations from this directory and so

00:22:57,400 --> 00:23:00,700
the answer to does an annotation route

00:22:58,930 --> 00:23:03,040
winner does a yeah morale win it spends

00:23:00,700 --> 00:23:04,930
if you have the EML route first and then

00:23:03,040 --> 00:23:06,760
the import or do you have the import

00:23:04,930 --> 00:23:08,500
first the annotation routes and then

00:23:06,760 --> 00:23:10,390
your yeah more out below that so it's

00:23:08,500 --> 00:23:13,660
all explicit inside of that ya know file

00:23:10,390 --> 00:23:15,220
the import for reading annotations like

00:23:13,660 --> 00:23:16,300
this is actually in there by default so

00:23:15,220 --> 00:23:17,560
i didn't show up when you actually like

00:23:16,300 --> 00:23:19,030
download the project and go into your

00:23:17,560 --> 00:23:20,620
app config routing dot yml you'll see

00:23:19,030 --> 00:23:22,600
three lines there that say hey go read

00:23:20,620 --> 00:23:26,680
annotations from the controller

00:23:22,600 --> 00:23:28,330
directory alright so second half of

00:23:26,680 --> 00:23:30,190
symphony is all about these services and

00:23:28,330 --> 00:23:32,980
containers let me hear you guys like 30

00:23:30,190 --> 00:23:35,230
seconds of really really simple non

00:23:32,980 --> 00:23:36,790
computer science a theory service cuz

00:23:35,230 --> 00:23:39,610
you'll hear that term a lot is a useful

00:23:36,790 --> 00:23:40,870
object i'm sure there's like even better

00:23:39,610 --> 00:23:42,280
definition than that like for me like

00:23:40,870 --> 00:23:43,720
this is what it means so you hear talk

00:23:42,280 --> 00:23:44,710
about like hey you should turn that into

00:23:43,720 --> 00:23:45,580
a service what are they talking about

00:23:44,710 --> 00:23:47,410
they're talking about having a

00:23:45,580 --> 00:23:48,730
object that does some work for you and

00:23:47,410 --> 00:23:51,640
I'll show you an example in a second so

00:23:48,730 --> 00:23:53,200
services artists useful PHP objects like

00:23:51,640 --> 00:23:54,700
for example a database connection where

00:23:53,200 --> 00:23:56,710
you can like maybe call a method called

00:23:54,700 --> 00:23:58,690
query on it that's a service it does

00:23:56,710 --> 00:24:00,160
some work for you it's useful it's

00:23:58,690 --> 00:24:02,890
called a service it's just kind of a

00:24:00,160 --> 00:24:04,120
computer science II sort of term second

00:24:02,890 --> 00:24:07,450
the other important term is container

00:24:04,120 --> 00:24:08,800
container is an object but I want you to

00:24:07,450 --> 00:24:11,050
think of it almost like an associative

00:24:08,800 --> 00:24:12,880
array it's an object that holds all of

00:24:11,050 --> 00:24:14,530
your services so obviously we in a

00:24:12,880 --> 00:24:15,730
symphony application or a drupal

00:24:14,530 --> 00:24:17,080
application we're gonna have lots of

00:24:15,730 --> 00:24:20,110
useful objects you know database

00:24:17,080 --> 00:24:21,280
connection translator object the service

00:24:20,110 --> 00:24:22,780
container is a place where we just kind

00:24:21,280 --> 00:24:24,280
of put them all into that central spot

00:24:22,780 --> 00:24:26,170
there's more to it than that

00:24:24,280 --> 00:24:28,420
but like that's the most important part

00:24:26,170 --> 00:24:30,700
so if you get access to the container

00:24:28,420 --> 00:24:32,830
inside symphony then you have access to

00:24:30,700 --> 00:24:38,590
all of the useful objects that are

00:24:32,830 --> 00:24:40,630
inside of it and in symphony and drupal

00:24:38,590 --> 00:24:44,140
those come preloaded with a bunch of

00:24:40,630 --> 00:24:45,670
stuff like for example like in symphony

00:24:44,140 --> 00:24:47,470
list as well as sex you're really

00:24:45,670 --> 00:24:48,940
important in symphony like nothing

00:24:47,470 --> 00:24:51,190
everything that does work in symphony

00:24:48,940 --> 00:24:53,650
even like the routing controller flow is

00:24:51,190 --> 00:24:55,480
actually done by a service so if you ask

00:24:53,650 --> 00:24:58,270
me like what Symphony does the answer is

00:24:55,480 --> 00:25:00,880
sort of nothing there's just this big

00:24:58,270 --> 00:25:02,950
bag of useful objects and those objects

00:25:00,880 --> 00:25:04,540
do the things and if you want to do some

00:25:02,950 --> 00:25:06,580
work inside of Symphony like log

00:25:04,540 --> 00:25:08,290
something which I'll show later all you

00:25:06,580 --> 00:25:09,700
need to do is say like what's the name

00:25:08,290 --> 00:25:12,010
of the service in the container that

00:25:09,700 --> 00:25:14,020
does logging or sends emails or does

00:25:12,010 --> 00:25:15,100
something else once you have that and

00:25:14,020 --> 00:25:16,330
that you're above what you have that

00:25:15,100 --> 00:25:17,650
name then you can go out to the

00:25:16,330 --> 00:25:19,480
Container say hey I need the logger

00:25:17,650 --> 00:25:23,410
object and it'll give it back to you and

00:25:19,480 --> 00:25:26,380
it's what actually does all the work and

00:25:23,410 --> 00:25:27,430
that's yes and there is the question is

00:25:26,380 --> 00:25:28,810
there one container yes there's one

00:25:27,430 --> 00:25:30,850
container it's the most fundamentally

00:25:28,810 --> 00:25:32,620
important object inside of like symphony

00:25:30,850 --> 00:25:34,510
or drupal area is one container yeah

00:25:32,620 --> 00:25:36,010
it's not a singleton nothing is a

00:25:34,510 --> 00:25:37,300
singleton there's no static context but

00:25:36,010 --> 00:25:38,500
if you know the singleton pattern you

00:25:37,300 --> 00:25:39,940
kind of kind of think of it like that

00:25:38,500 --> 00:25:41,380
because there is only one of them

00:25:39,940 --> 00:25:43,690
nothing stopping you from creating

00:25:41,380 --> 00:25:45,760
multiple ones though so inside of

00:25:43,690 --> 00:25:46,900
symphony so oh so now you guys can see

00:25:45,760 --> 00:25:48,790
us remember ice talked about that app

00:25:46,900 --> 00:25:50,260
console script that's the way to kind of

00:25:48,790 --> 00:25:53,440
like get debugging stuff from symphony

00:25:50,260 --> 00:25:55,180
so early I ran debug calling router got

00:25:53,440 --> 00:25:56,770
the list of routes debug calling

00:25:55,180 --> 00:25:57,970
container gives you the list of all of

00:25:56,770 --> 00:25:59,710
these services in

00:25:57,970 --> 00:26:03,790
out of there and right now they're

00:25:59,710 --> 00:26:06,430
actually 224 useful objects inside of a

00:26:03,790 --> 00:26:08,890
standard symfony framework install those

00:26:06,430 --> 00:26:10,570
for the most parts don't do anything by

00:26:08,890 --> 00:26:13,420
themselves they're just sitting there

00:26:10,570 --> 00:26:18,780
waiting for you if you want to to make

00:26:13,420 --> 00:26:21,460
use of them I'm in Drupal is even more

00:26:18,780 --> 00:26:22,870
so for example there's one service than

00:26:21,460 --> 00:26:24,490
container call the templating service

00:26:22,870 --> 00:26:26,170
and you wouldn't necessarily guess this

00:26:24,490 --> 00:26:27,730
you'd read the docs or you can even

00:26:26,170 --> 00:26:29,410
search this if I were on a napkin sole

00:26:27,730 --> 00:26:31,840
container calling our debug calling

00:26:29,410 --> 00:26:33,310
container and I put like temp in there

00:26:31,840 --> 00:26:35,170
it'll actually give me a list back it's

00:26:33,310 --> 00:26:36,940
like here's 10 services matching that

00:26:35,170 --> 00:26:38,410
term and you can kind of like select and

00:26:36,940 --> 00:26:40,300
get more information so there's one

00:26:38,410 --> 00:26:43,510
called templating and it's our way and

00:26:40,300 --> 00:26:44,980
Symphony to render tweak templates ok so

00:26:43,510 --> 00:26:46,720
now I know that like I said it's all on

00:26:44,980 --> 00:26:48,700
Symphony about figuring out what service

00:26:46,720 --> 00:26:49,840
does the work that I want to accomplish

00:26:48,700 --> 00:26:51,160
so in our controller right now we're

00:26:49,840 --> 00:26:52,810
just returning a response inside of our

00:26:51,160 --> 00:26:54,220
controller we ultimately maybe want to

00:26:52,810 --> 00:26:55,960
render a tweak template so we find out

00:26:54,220 --> 00:26:57,760
that it's the templating service that

00:26:55,960 --> 00:26:59,200
does that so inside of this container I

00:26:57,760 --> 00:27:01,030
said it's like full of useful objects

00:26:59,200 --> 00:27:03,340
it's it's basically an associative array

00:27:01,030 --> 00:27:05,770
so like every object has a nickname

00:27:03,340 --> 00:27:07,510
which is a string so this one's nickname

00:27:05,770 --> 00:27:09,730
happens to be templating an all

00:27:07,510 --> 00:27:11,140
lowercase okay so when you want the

00:27:09,730 --> 00:27:14,920
templating object later you'll ask for

00:27:11,140 --> 00:27:16,090
it by that little nickname so okay so

00:27:14,920 --> 00:27:17,770
now we know that we have this routing

00:27:16,090 --> 00:27:20,230
controller flow and we have all these

00:27:17,770 --> 00:27:22,030
random useful objects that are sitting

00:27:20,230 --> 00:27:24,670
out there waiting for us to use them so

00:27:22,030 --> 00:27:26,650
this is good so since the only place we

00:27:24,670 --> 00:27:28,930
really code to build a page at least now

00:27:26,650 --> 00:27:30,670
is the controller well we want is to get

00:27:28,930 --> 00:27:32,500
access to the container in the

00:27:30,670 --> 00:27:34,090
controller if we do that then we are

00:27:32,500 --> 00:27:38,080
dangerous because we can make use of

00:27:34,090 --> 00:27:39,790
whatever objects we want so I mean

00:27:38,080 --> 00:27:42,310
symphony and there's of course there's

00:27:39,790 --> 00:27:45,210
always like multiple ways to do this but

00:27:42,310 --> 00:27:48,130
in symphony your controller has a

00:27:45,210 --> 00:27:49,660
protected property called container the

00:27:48,130 --> 00:27:51,370
reason it does is because you extend a

00:27:49,660 --> 00:27:52,870
symphony based controller and symphony

00:27:51,370 --> 00:27:54,670
detects that and injects the container

00:27:52,870 --> 00:27:56,080
so if you're like the more technical you

00:27:54,670 --> 00:27:57,790
know yeah what were experience of that

00:27:56,080 --> 00:27:59,830
like this is not magic this is something

00:27:57,790 --> 00:28:01,450
that does is behind the scenes but

00:27:59,830 --> 00:28:03,460
basically means when your controller you

00:28:01,450 --> 00:28:05,470
can say this arrow container and that's

00:28:03,460 --> 00:28:07,990
the service container object and it only

00:28:05,470 --> 00:28:10,570
has basically one useful method on it

00:28:07,990 --> 00:28:11,830
get because like I said it's basically

00:28:10,570 --> 00:28:13,570
an associative array of

00:28:11,830 --> 00:28:15,519
useful objects so we're gonna say this

00:28:13,570 --> 00:28:17,649
arrow container arrow gets templating

00:28:15,519 --> 00:28:19,330
that returns us back that useful object

00:28:17,649 --> 00:28:21,190
and then we can just call a method on it

00:28:19,330 --> 00:28:23,590
how do we know a method to call on a

00:28:21,190 --> 00:28:24,789
service you know that's you you can read

00:28:23,590 --> 00:28:27,789
the documentation to figure out like how

00:28:24,789 --> 00:28:29,740
to Symphony's templating object work you

00:28:27,789 --> 00:28:31,360
can also look at this here and see oh

00:28:29,740 --> 00:28:33,340
this is an instance of this time to

00:28:31,360 --> 00:28:34,960
tweak engine so if you like diving into

00:28:33,340 --> 00:28:36,130
the source code and finding what methods

00:28:34,960 --> 00:28:37,570
are on stuff you can do it that way so

00:28:36,130 --> 00:28:38,950
you don't have to like dive into source

00:28:37,570 --> 00:28:41,140
code we have great documentation all

00:28:38,950 --> 00:28:42,640
this but so get the service call render

00:28:41,140 --> 00:28:45,100
on it and then we pass it you know the

00:28:42,640 --> 00:28:46,240
polite / - say hello dot HTML at wing

00:28:45,100 --> 00:28:48,940
this will be the name of our templates

00:28:46,240 --> 00:28:51,010
and then we pass a variable into that

00:28:48,940 --> 00:28:52,570
twig template so the my name and the

00:28:51,010 --> 00:28:54,220
left will be like how that variable is

00:28:52,570 --> 00:28:55,389
called in twig and its value will be

00:28:54,220 --> 00:28:57,730
assigned to name so I made this

00:28:55,389 --> 00:29:01,120
different for clarity purposes and then

00:28:57,730 --> 00:29:02,380
still we always return a response and by

00:29:01,120 --> 00:29:03,970
the way like I'm showing you guys some

00:29:02,380 --> 00:29:05,320
of the longer ways of doing things we

00:29:03,970 --> 00:29:06,820
have to shortcut methods and symfony

00:29:05,320 --> 00:29:08,559
framework to do this kind of stuff so

00:29:06,820 --> 00:29:10,659
normally you'd actually say this arrow

00:29:08,559 --> 00:29:12,370
render instead of this arrow container

00:29:10,659 --> 00:29:13,960
arrow get company render I'm showing you

00:29:12,370 --> 00:29:15,399
this way cuz this is really what's going

00:29:13,960 --> 00:29:17,080
on behind the scenes when you say this

00:29:15,399 --> 00:29:19,570
arrow render which is what you'll see in

00:29:17,080 --> 00:29:22,299
our documentation that's a shortcut to

00:29:19,570 --> 00:29:25,059
go get the templating service and call

00:29:22,299 --> 00:29:26,559
render on it so I'm showing us like

00:29:25,059 --> 00:29:28,450
really the low-level way cuz I want you

00:29:26,559 --> 00:29:30,190
us to understand that it's all about

00:29:28,450 --> 00:29:31,419
these services behind the scenes that do

00:29:30,190 --> 00:29:33,100
all the work but your code will actually

00:29:31,419 --> 00:29:35,559
in reality be a little bit smaller than

00:29:33,100 --> 00:29:37,269
this which is cool so we're rendering a

00:29:35,559 --> 00:29:38,860
template called polite slash to say

00:29:37,269 --> 00:29:40,929
hello that HTML at twig and just as a

00:29:38,860 --> 00:29:42,909
reminder because I got rid of my Yammer

00:29:40,929 --> 00:29:44,710
out we've only touched one file so far

00:29:42,909 --> 00:29:46,090
in our project this one right here

00:29:44,710 --> 00:29:48,010
we built our page and now we're using

00:29:46,090 --> 00:29:50,200
the templating engine so the second

00:29:48,010 --> 00:29:52,299
thing is remember that so polite

00:29:50,200 --> 00:29:54,880
/ - say hello that HTML twig that's the

00:29:52,299 --> 00:29:56,769
name of our template Symphony looks for

00:29:54,880 --> 00:29:58,899
templates because they're not PHP code

00:29:56,769 --> 00:30:01,570
in the app directory and it looks from

00:29:58,899 --> 00:30:03,399
the app resources views directory so

00:30:01,570 --> 00:30:06,130
when we say polite slash say hello to

00:30:03,399 --> 00:30:07,360
HTML that twig it just looks for app

00:30:06,130 --> 00:30:09,880
that's the part you can't see up there

00:30:07,360 --> 00:30:13,330
app actually app slash resources they're

00:30:09,880 --> 00:30:15,940
both hiding app resources views and then

00:30:13,330 --> 00:30:17,889
polite slash say hello dot HTML that's

00:30:15,940 --> 00:30:19,330
wig so simply is like a main spot where

00:30:17,889 --> 00:30:21,279
templates live you can put them other

00:30:19,330 --> 00:30:22,720
places if you want there's one main spot

00:30:21,279 --> 00:30:24,220
that the templates live and when you

00:30:22,720 --> 00:30:24,870
render something Symphony just looks

00:30:24,220 --> 00:30:26,610
there and

00:30:24,870 --> 00:30:27,840
pretty straightforward I'm not gonna

00:30:26,610 --> 00:30:30,240
talk about Twigg other people are

00:30:27,840 --> 00:30:32,280
talking about twig it's amazing this is

00:30:30,240 --> 00:30:35,160
me printing out a variable very fancy

00:30:32,280 --> 00:30:37,500
and also extending a base template so

00:30:35,160 --> 00:30:39,540
now we've touched two files to crater

00:30:37,500 --> 00:30:40,980
Symphony project that base dot html'

00:30:39,540 --> 00:30:42,090
that tweak is your base layout you can

00:30:40,980 --> 00:30:44,250
do whatever you want with it we actually

00:30:42,090 --> 00:30:45,960
kind of deliver a very basic one to you

00:30:44,250 --> 00:30:48,420
and a project to start but you'll

00:30:45,960 --> 00:30:49,800
customize it so we've gone one small

00:30:48,420 --> 00:30:52,110
level up which is we have the routing

00:30:49,800 --> 00:30:53,790
controller flow and now we know that

00:30:52,110 --> 00:30:55,230
there's this service container floating

00:30:53,790 --> 00:30:57,030
around and it's something that we're

00:30:55,230 --> 00:30:58,950
going to make use of from within our

00:30:57,030 --> 00:31:01,980
controller because it's this big bag of

00:30:58,950 --> 00:31:03,540
tools so what else does Symphony do what

00:31:01,980 --> 00:31:05,100
other useful objects are there and like

00:31:03,540 --> 00:31:08,250
the reason I'm part of the reason I put

00:31:05,100 --> 00:31:10,050
this up here is because if you want the

00:31:08,250 --> 00:31:13,500
answer to this question can be nothing

00:31:10,050 --> 00:31:15,090
you could not use any of the objects in

00:31:13,500 --> 00:31:17,100
the container that's totally up to you

00:31:15,090 --> 00:31:18,720
if you have a different way of creating

00:31:17,100 --> 00:31:20,640
your page inside of your controller and

00:31:18,720 --> 00:31:22,620
Symphony by all means to use your other

00:31:20,640 --> 00:31:24,330
tools you don't have to use any of

00:31:22,620 --> 00:31:26,490
symphonies built-in tools they're there

00:31:24,330 --> 00:31:28,650
as a tool like optional tool I think

00:31:26,490 --> 00:31:30,270
it's useful to you but sometimes I see

00:31:28,650 --> 00:31:31,830
people like using Symphony tools and a

00:31:30,270 --> 00:31:33,720
very like they've a really advanced

00:31:31,830 --> 00:31:35,550
crazy edge use case like maybe it's an

00:31:33,720 --> 00:31:36,870
HTML form that's like really really

00:31:35,550 --> 00:31:38,130
weird and they try to put in symphonies

00:31:36,870 --> 00:31:40,470
form system and they get really

00:31:38,130 --> 00:31:42,630
aggravated but when you back off you're

00:31:40,470 --> 00:31:45,960
like dude you had a form of two fields

00:31:42,630 --> 00:31:47,250
just make an HTML form and then handle

00:31:45,960 --> 00:31:48,960
under the controller like you don't have

00:31:47,250 --> 00:31:50,640
to fit everything into the symphony

00:31:48,960 --> 00:31:52,830
toolset if it doesn't work well for you

00:31:50,640 --> 00:31:54,720
in your use case so for example what

00:31:52,830 --> 00:31:56,280
does Symphony do it has integration with

00:31:54,720 --> 00:31:58,860
the library called doctrine which is an

00:31:56,280 --> 00:32:00,390
ORM for talking to the database and what

00:31:58,860 --> 00:32:02,130
I want you guys to notice here is how do

00:32:00,390 --> 00:32:04,920
you use doctrine inside of Symphony well

00:32:02,130 --> 00:32:07,290
it's a service called doctrine dot or m

00:32:04,920 --> 00:32:09,480
dot entity manager so like everything in

00:32:07,290 --> 00:32:10,890
symphony is just a service so how does

00:32:09,480 --> 00:32:15,059
that simply talk to the database

00:32:10,890 --> 00:32:17,790
it doesn't this service does though so

00:32:15,059 --> 00:32:18,809
you can use it or you can actually again

00:32:17,790 --> 00:32:20,880
if you have like a really advanced use

00:32:18,809 --> 00:32:22,380
case you can go one level lower and

00:32:20,880 --> 00:32:23,940
there's another service in symphony

00:32:22,380 --> 00:32:25,200
called database connection which is

00:32:23,940 --> 00:32:27,090
actually also part of doctrine and

00:32:25,200 --> 00:32:29,580
basically you make this is not entirely

00:32:27,090 --> 00:32:31,290
true you make just raw SQL queries to it

00:32:29,580 --> 00:32:32,790
and then you fetch results out it's like

00:32:31,290 --> 00:32:35,010
a small wrapper around the PDO object

00:32:32,790 --> 00:32:37,320
and it's in a container there for you to

00:32:35,010 --> 00:32:38,230
use forms I mentioned this earlier this

00:32:37,320 --> 00:32:39,520
is what it looks like the maker

00:32:38,230 --> 00:32:41,530
Forman Symphony you actually like build

00:32:39,520 --> 00:32:43,929
this nice beautiful object can you tell

00:32:41,530 --> 00:32:46,390
I have like I see an email user name

00:32:43,929 --> 00:32:47,830
gender field you kind of describe it you

00:32:46,390 --> 00:32:49,240
eventually pass this into your template

00:32:47,830 --> 00:32:50,890
on the bottom I'll show you that in a

00:32:49,240 --> 00:32:52,360
second and in the middle you actually

00:32:50,890 --> 00:32:54,760
process the form so this is where if

00:32:52,360 --> 00:32:56,919
this were a post request it will I go

00:32:54,760 --> 00:32:58,809
grab all the post parameters for you and

00:32:56,919 --> 00:33:00,820
like do validation so it's like a lot

00:32:58,809 --> 00:33:01,960
that goes in a symphonies form system

00:33:00,820 --> 00:33:04,750
it's probably the second most

00:33:01,960 --> 00:33:06,730
complicated part of symphony after

00:33:04,750 --> 00:33:07,840
security but it's one we're like the

00:33:06,730 --> 00:33:10,660
more you learn about it the more you

00:33:07,840 --> 00:33:11,799
like this is awesome and this is what it

00:33:10,660 --> 00:33:13,030
would look like inside of your template

00:33:11,799 --> 00:33:14,590
to render that so you don't have to run

00:33:13,030 --> 00:33:16,900
it by hand you just serve say you kind

00:33:14,590 --> 00:33:18,460
of render your fields one by one and it

00:33:16,900 --> 00:33:19,630
kind of builds the HTML form for you

00:33:18,460 --> 00:33:22,030
which of course you can customize how

00:33:19,630 --> 00:33:23,440
this looks and all kinds of different

00:33:22,030 --> 00:33:25,419
ways it's called form theming and

00:33:23,440 --> 00:33:27,970
symphony so this is really really

00:33:25,419 --> 00:33:28,450
powerful or you could just do it

00:33:27,970 --> 00:33:31,030
yourself

00:33:28,450 --> 00:33:32,140
so again optional tools like symphonies

00:33:31,030 --> 00:33:34,360
like they're like these tools are

00:33:32,140 --> 00:33:35,620
wonderful I use them but especially when

00:33:34,360 --> 00:33:36,970
you're like learning if like you're like

00:33:35,620 --> 00:33:39,130
dude I just don't understand the form

00:33:36,970 --> 00:33:42,669
thing yet having problems cool go into a

00:33:39,130 --> 00:33:44,799
twig template make an HTML form and then

00:33:42,669 --> 00:33:46,660
in your controller just go and get those

00:33:44,799 --> 00:33:48,280
post parameters manually so that's

00:33:46,660 --> 00:33:49,960
Symphony's request object obviously I'm

00:33:48,280 --> 00:33:51,790
there's some extra code that would go

00:33:49,960 --> 00:33:53,320
around this that's Symphony's request

00:33:51,790 --> 00:33:55,150
object which is the same as Drupal's

00:33:53,320 --> 00:33:56,710
request object and if you want to get

00:33:55,150 --> 00:33:59,020
post parameters dollar sign underscore

00:33:56,710 --> 00:34:02,080
post off of it you say request arrow

00:33:59,020 --> 00:34:04,450
request arrow get query parameters are

00:34:02,080 --> 00:34:05,799
request arrow query arrow gets why is it

00:34:04,450 --> 00:34:07,270
request arrow requests what kind of

00:34:05,799 --> 00:34:09,850
idiot would make a property called

00:34:07,270 --> 00:34:10,929
request on a object called request now

00:34:09,850 --> 00:34:12,639
it turns out apparently if you read

00:34:10,929 --> 00:34:15,790
something somewhere like post parameters

00:34:12,639 --> 00:34:19,869
are known as request parameters so hence

00:34:15,790 --> 00:34:21,129
why request arrow request arrow kit and

00:34:19,869 --> 00:34:24,159
there's infinitely more things that you

00:34:21,129 --> 00:34:26,109
can do in symphony via tools in the core

00:34:24,159 --> 00:34:28,659
of course but also bundles so just like

00:34:26,109 --> 00:34:31,210
you guys have contributed a open-source

00:34:28,659 --> 00:34:32,649
bundles the number one job of a bundle

00:34:31,210 --> 00:34:34,720
like why would I bring a bundle into my

00:34:32,649 --> 00:34:37,450
project and this is this statement is

00:34:34,720 --> 00:34:39,609
exactly true for Drupal 8 and modules

00:34:37,450 --> 00:34:41,230
the number one job that an open-source

00:34:39,609 --> 00:34:43,510
bundle brings to your project the thing

00:34:41,230 --> 00:34:46,419
that it does is it adds more services to

00:34:43,510 --> 00:34:48,100
your container and that's basically it's

00:34:46,419 --> 00:34:50,950
like oh I'm gonna get this bundle which

00:34:48,100 --> 00:34:52,020
helps me talk to Amazon's sdk because

00:34:50,950 --> 00:34:53,669
when I install it

00:34:52,020 --> 00:34:55,350
I suddenly have a new service in the

00:34:53,669 --> 00:34:58,020
container called I don't know

00:34:55,350 --> 00:34:59,730
AWS underscore s3 and that's an object

00:34:58,020 --> 00:35:04,590
that's useful that can help me talk to

00:34:59,730 --> 00:35:06,420
Amazon AWS s3 all right so we have

00:35:04,590 --> 00:35:07,980
services the container so next thing we

00:35:06,420 --> 00:35:08,850
need to do is actually put some of our

00:35:07,980 --> 00:35:10,800
own cord

00:35:08,850 --> 00:35:12,090
well actually move back up so we have

00:35:10,800 --> 00:35:14,070
the routing controller flow and we have

00:35:12,090 --> 00:35:16,530
services in the container so this next

00:35:14,070 --> 00:35:18,450
step has nothing to do with Symphony at

00:35:16,530 --> 00:35:19,950
all but it's like fundamentally

00:35:18,450 --> 00:35:21,870
important to like of the new pattern

00:35:19,950 --> 00:35:23,460
that's is kind of like in Drupal 8 the

00:35:21,870 --> 00:35:25,110
pattern we use in symphony a lot and

00:35:23,460 --> 00:35:26,880
it's creating your own services so

00:35:25,110 --> 00:35:28,110
remember service is just a useful object

00:35:26,880 --> 00:35:30,600
so I'm talking about creating your own

00:35:28,110 --> 00:35:32,250
classes to organize your code because

00:35:30,600 --> 00:35:34,080
once upon a time ok so we all know like

00:35:32,250 --> 00:35:35,760
we don't want to duplicate code except

00:35:34,080 --> 00:35:37,440
except say we want to reuse stuff so

00:35:35,760 --> 00:35:41,910
normally if you have like a whole bunch

00:35:37,440 --> 00:35:44,250
of code inside of get like a like 20

00:35:41,910 --> 00:35:45,450
lines of code and like in old-school PHP

00:35:44,250 --> 00:35:47,550
we take those 20 lines of code that

00:35:45,450 --> 00:35:49,500
maybe help us generate a thumbnail or

00:35:47,550 --> 00:35:51,000
something and we put them into a flat

00:35:49,500 --> 00:35:52,710
function called generate thumbnail

00:35:51,000 --> 00:35:54,930
because now we can reuse it and it's

00:35:52,710 --> 00:35:56,550
kind of like over there by itself so in

00:35:54,930 --> 00:35:58,500
symphony and Drupal 8 we're gonna do the

00:35:56,550 --> 00:36:00,510
exact same thing but instead of a flat

00:35:58,500 --> 00:36:02,970
function it's just gonna be a function

00:36:00,510 --> 00:36:05,640
inside of a class but exact same thing I

00:36:02,970 --> 00:36:07,020
want to isolate this ok function inside

00:36:05,640 --> 00:36:08,580
of a class that class is gonna be a

00:36:07,020 --> 00:36:11,250
service clasping and that's just kind of

00:36:08,580 --> 00:36:13,410
computer science these sort of stuff so

00:36:11,250 --> 00:36:15,630
right now um you know when you go to

00:36:13,410 --> 00:36:17,400
slash the low slash Ryan or Drupal con

00:36:15,630 --> 00:36:19,650
or whatever it just says hello that name

00:36:17,400 --> 00:36:20,700
so we have a new requirement where we're

00:36:19,650 --> 00:36:22,770
gonna actually generate a random

00:36:20,700 --> 00:36:25,080
greeting like a lot Ryan or something

00:36:22,770 --> 00:36:26,250
like that so where should you put this

00:36:25,080 --> 00:36:28,020
we could put it in our controller

00:36:26,250 --> 00:36:29,190
totally you know you guys can imagine

00:36:28,020 --> 00:36:31,050
what the code would look like you know a

00:36:29,190 --> 00:36:32,760
little ray of random things do an array

00:36:31,050 --> 00:36:34,650
R and et cetera except try pick out a

00:36:32,760 --> 00:36:36,810
random greeting boom all the code the

00:36:34,650 --> 00:36:38,310
controller no problem but you're

00:36:36,810 --> 00:36:39,690
supposed to keep your controllers skinny

00:36:38,310 --> 00:36:40,890
which you know it's a way of organizing

00:36:39,690 --> 00:36:42,000
your code you're supposed to whenever

00:36:40,890 --> 00:36:43,860
you have big chunks of code that do a

00:36:42,000 --> 00:36:45,630
job take that out and put it somewhere

00:36:43,860 --> 00:36:46,710
else so that it's you can reuse it and

00:36:45,630 --> 00:36:49,530
it's a little more clear and your

00:36:46,710 --> 00:36:50,820
controllers are easier to read so what

00:36:49,530 --> 00:36:53,070
we're gonna do in symphony or Drupal 8

00:36:50,820 --> 00:36:54,510
is create a class so all and this class

00:36:53,070 --> 00:36:55,880
the name of this class the location of

00:36:54,510 --> 00:36:58,140
this class none of that is important

00:36:55,880 --> 00:36:59,700
except your name space has to match your

00:36:58,140 --> 00:37:01,830
directory structure and your class name

00:36:59,700 --> 00:37:02,640
has to match your file name dot PHP so

00:37:01,830 --> 00:37:04,680
there's always that requirement

00:37:02,640 --> 00:37:05,760
otherwise you can put this name this

00:37:04,680 --> 00:37:07,260
however you want

00:37:05,760 --> 00:37:09,119
so I have a class called random greeter

00:37:07,260 --> 00:37:11,130
and I have a public function called

00:37:09,119 --> 00:37:13,230
randomly greets and the code there is

00:37:11,130 --> 00:37:14,820
super super simple so nothing special at

00:37:13,230 --> 00:37:16,200
all I'm using a private static property

00:37:14,820 --> 00:37:17,730
for the greetings but you know this is

00:37:16,200 --> 00:37:19,560
just basically what we would have done

00:37:17,730 --> 00:37:20,850
in a flat function before super

00:37:19,560 --> 00:37:24,030
straightforward just put inside of a

00:37:20,850 --> 00:37:26,970
class cool so that was nice so now how

00:37:24,030 --> 00:37:28,440
can we use this we just use it so if you

00:37:26,970 --> 00:37:30,630
put things in a flat function you just

00:37:28,440 --> 00:37:31,800
call that flat function the only added

00:37:30,630 --> 00:37:34,020
step here is you need to instantiate

00:37:31,800 --> 00:37:35,520
your object first so that's a greeter

00:37:34,020 --> 00:37:37,500
equals new random greeter that's kind of

00:37:35,520 --> 00:37:39,720
the extra step and then you just call

00:37:37,500 --> 00:37:42,030
the method on that object so create the

00:37:39,720 --> 00:37:43,740
object use the object same pattern now

00:37:42,030 --> 00:37:46,500
as before is with the flat function same

00:37:43,740 --> 00:37:47,730
goal of organising our code so again

00:37:46,500 --> 00:37:49,140
none of this has anything to do with

00:37:47,730 --> 00:37:50,550
Symphony Symphony doesn't care that

00:37:49,140 --> 00:37:52,590
you're doing this doesn't know you're

00:37:50,550 --> 00:37:53,790
doing this it's just us being like you

00:37:52,590 --> 00:37:56,369
know what I want to organize my code a

00:37:53,790 --> 00:37:59,040
little bit better so let's up the ante a

00:37:56,369 --> 00:38:00,390
little bit could we log which greeting

00:37:59,040 --> 00:38:01,350
was chosen maybe that's really important

00:38:00,390 --> 00:38:03,480
we're having a problem somewhere gonna

00:38:01,350 --> 00:38:04,859
log that well question number one is

00:38:03,480 --> 00:38:07,080
like well the symphony have built-in

00:38:04,859 --> 00:38:09,480
logging and it turns out it actually

00:38:07,080 --> 00:38:11,070
does and we know that if Symphony logs

00:38:09,480 --> 00:38:12,750
if Symphony has the ability to log out

00:38:11,070 --> 00:38:14,490
of the box there must be a service

00:38:12,750 --> 00:38:16,290
that's actually doing that and it turns

00:38:14,490 --> 00:38:17,609
out there's the service is called logger

00:38:16,290 --> 00:38:19,410
so if you want to lock something in

00:38:17,609 --> 00:38:22,260
Symphony you go out and get the logger

00:38:19,410 --> 00:38:23,640
service okay so now inside of our

00:38:22,260 --> 00:38:25,859
controller very simple this arrow

00:38:23,640 --> 00:38:27,570
container arrow gets logger so again

00:38:25,859 --> 00:38:29,550
it's always like go grab the service you

00:38:27,570 --> 00:38:31,530
need and then call a method on it how

00:38:29,550 --> 00:38:32,970
did I know to call info on here well

00:38:31,530 --> 00:38:34,470
either opened up the class that's the

00:38:32,970 --> 00:38:35,820
logger or I just googled you know

00:38:34,470 --> 00:38:37,230
Symphony's logger and read the

00:38:35,820 --> 00:38:37,800
documentation on what methods the logger

00:38:37,230 --> 00:38:39,840
gives me

00:38:37,800 --> 00:38:41,520
ok so perfectly straightforward it's

00:38:39,840 --> 00:38:44,670
another way we're just like using one of

00:38:41,520 --> 00:38:46,500
those optional tools love it ok so this

00:38:44,670 --> 00:38:48,840
is where things get interesting could we

00:38:46,500 --> 00:38:51,990
log something from inside of random

00:38:48,840 --> 00:38:53,609
greeter so the copy and paste method

00:38:51,990 --> 00:38:55,800
would give us this so I'm inside of

00:38:53,609 --> 00:38:57,480
class random greeter I've just basically

00:38:55,800 --> 00:38:59,490
copied that to this arrow container

00:38:57,480 --> 00:39:01,050
arrow get thing probably most of you

00:38:59,490 --> 00:39:03,150
like that's not gonna work because

00:39:01,050 --> 00:39:05,310
there's no container property notice

00:39:03,150 --> 00:39:06,990
this class is not extending anything why

00:39:05,310 --> 00:39:09,090
is it not extending anything because

00:39:06,990 --> 00:39:10,530
it's not useful for my application to

00:39:09,090 --> 00:39:12,119
make it extend anything simply doesn't

00:39:10,530 --> 00:39:14,010
know or care about this so we don't have

00:39:12,119 --> 00:39:16,170
to extend anything this is just our core

00:39:14,010 --> 00:39:17,910
class there's nothing magical about this

00:39:16,170 --> 00:39:19,200
at all we don't have a container

00:39:17,910 --> 00:39:20,460
property here so it's not

00:39:19,200 --> 00:39:22,200
going to work in fact the whole

00:39:20,460 --> 00:39:24,570
container property thing is totally

00:39:22,200 --> 00:39:26,880
special to controllers so don't expect

00:39:24,570 --> 00:39:29,250
to like magically get container property

00:39:26,880 --> 00:39:30,750
anywhere except for your controllers so

00:39:29,250 --> 00:39:32,250
this would be you know meth you know can

00:39:30,750 --> 00:39:33,960
property doesn't exist or method call

00:39:32,250 --> 00:39:37,050
than an on object or some air like that

00:39:33,960 --> 00:39:38,430
oh my god so dependency injection how

00:39:37,050 --> 00:39:41,070
many people have heard this term by this

00:39:38,430 --> 00:39:43,109
points good good good good fanciest term

00:39:41,070 --> 00:39:43,619
for the stupidest simplest idea of all

00:39:43,109 --> 00:39:47,280
time

00:39:43,619 --> 00:39:49,470
so Oh dependency injection is when you

00:39:47,280 --> 00:39:51,780
pass a function all of the values it

00:39:49,470 --> 00:39:54,060
needs to do its work the ridiculous

00:39:51,780 --> 00:39:56,579
example I give is you would never make a

00:39:54,060 --> 00:39:58,230
function called add and then not give it

00:39:56,579 --> 00:40:00,270
any arguments then you figure out what

00:39:58,230 --> 00:40:01,710
I'm adding you know I passed you the two

00:40:00,270 --> 00:40:03,300
values you go out to some global scope

00:40:01,710 --> 00:40:05,280
figured out yourself I mean it doesn't

00:40:03,300 --> 00:40:08,400
make any sense so we take this a step

00:40:05,280 --> 00:40:10,290
further inside of Drupal 8 and Symphony

00:40:08,400 --> 00:40:12,450
and the more realistic examples like you

00:40:10,290 --> 00:40:13,980
used to have flat functions and on the

00:40:12,450 --> 00:40:16,829
first line of that flat function you'd

00:40:13,980 --> 00:40:18,750
say like global DBH you'd actually go

00:40:16,829 --> 00:40:20,490
outside of the global scope to get some

00:40:18,750 --> 00:40:22,109
database handle or object or something

00:40:20,490 --> 00:40:23,819
like that that's not dependency

00:40:22,109 --> 00:40:25,109
injection your function needs the

00:40:23,819 --> 00:40:27,810
database connection so you should

00:40:25,109 --> 00:40:29,160
actually pass that in as an argument so

00:40:27,810 --> 00:40:31,140
that's all the dependence injection it's

00:40:29,160 --> 00:40:32,430
all what we've been doing all along even

00:40:31,140 --> 00:40:35,640
when we use the global keyword we were

00:40:32,430 --> 00:40:37,710
probably like not supposed to do that so

00:40:35,640 --> 00:40:39,180
in practice since we have our functions

00:40:37,710 --> 00:40:41,550
in classes what this means is whenever

00:40:39,180 --> 00:40:43,440
your class whenever any function in your

00:40:41,550 --> 00:40:45,150
class needs an outside object or an

00:40:43,440 --> 00:40:46,650
outside value you're going to add an

00:40:45,150 --> 00:40:48,359
argument to your construct function and

00:40:46,650 --> 00:40:49,829
put it there and then what are you gonna

00:40:48,359 --> 00:40:51,420
do in the construct function you're just

00:40:49,829 --> 00:40:53,700
going to set it on a private property

00:40:51,420 --> 00:40:55,980
basically save it for later and that's

00:40:53,700 --> 00:40:57,720
it if you want to get really fancy you

00:40:55,980 --> 00:41:01,079
can you know like look up like the class

00:40:57,720 --> 00:41:03,000
or interface that the logger implements

00:41:01,079 --> 00:41:05,099
but that's optional that's cool that's

00:41:03,000 --> 00:41:07,800
cool for auto completion but you don't

00:41:05,099 --> 00:41:10,319
have to do that then now that our we

00:41:07,800 --> 00:41:11,520
have this private logger property we

00:41:10,319 --> 00:41:13,650
just use that down there so instead of

00:41:11,520 --> 00:41:16,050
this arrow container arrow get logger we

00:41:13,650 --> 00:41:17,940
just say this arrow logger and call it

00:41:16,050 --> 00:41:19,650
now we are missing a step here like

00:41:17,940 --> 00:41:21,300
don't expect that to work you should be

00:41:19,650 --> 00:41:23,910
thinking yeah but like who who's gonna

00:41:21,300 --> 00:41:25,950
pass that there the point is this class

00:41:23,910 --> 00:41:28,560
now because that's a required construct

00:41:25,950 --> 00:41:30,330
argument cannot be used unless whoever

00:41:28,560 --> 00:41:32,580
instantiate it's it

00:41:30,330 --> 00:41:34,320
is it a logger interface object so as

00:41:32,580 --> 00:41:36,120
far as random greeter is concerned he

00:41:34,320 --> 00:41:38,580
doesn't care who's going to use him

00:41:36,120 --> 00:41:41,010
whoever uses em has to pass in the

00:41:38,580 --> 00:41:42,510
logger so inside of our controller we'll

00:41:41,010 --> 00:41:44,370
just do that we'll say greeter equals

00:41:42,510 --> 00:41:45,930
new random greeter and we know how to

00:41:44,370 --> 00:41:48,150
get the logger inside of our controller

00:41:45,930 --> 00:41:49,770
we say this arrow container arrow get

00:41:48,150 --> 00:41:51,840
logger past the logger into the

00:41:49,770 --> 00:41:52,470
construct set it on a property and then

00:41:51,840 --> 00:41:54,540
we use it later

00:41:52,470 --> 00:41:56,430
that's the dependency injection pattern

00:41:54,540 --> 00:41:58,680
and you'll do that over and over and

00:41:56,430 --> 00:42:00,630
over again if all of a sudden our random

00:41:58,680 --> 00:42:02,370
greeter needs to render a template we're

00:42:00,630 --> 00:42:04,380
gonna add a second constructor argument

00:42:02,370 --> 00:42:06,000
for the templating object set that on a

00:42:04,380 --> 00:42:07,590
second property and then use that

00:42:06,000 --> 00:42:10,620
property down within one of our

00:42:07,590 --> 00:42:12,000
functions cool so that entire thing was

00:42:10,620 --> 00:42:13,230
all about code organization dependency

00:42:12,000 --> 00:42:15,270
injection had nothing to do with

00:42:13,230 --> 00:42:16,860
symphony the last and very very

00:42:15,270 --> 00:42:18,540
important piece of this is we're gonna

00:42:16,860 --> 00:42:21,240
actually teach Symphony how to

00:42:18,540 --> 00:42:23,580
instantiate that random greeter object

00:42:21,240 --> 00:42:25,140
which is a service because it's a useful

00:42:23,580 --> 00:42:26,490
object doesn't work for us we're gonna

00:42:25,140 --> 00:42:30,060
teach Symphony how to instantiate that

00:42:26,490 --> 00:42:31,770
for us and the way to do that is with a

00:42:30,060 --> 00:42:33,990
yamo file and you can't see it here but

00:42:31,770 --> 00:42:35,670
this says app slash config slash

00:42:33,990 --> 00:42:37,080
services dot yml we were in the app

00:42:35,670 --> 00:42:39,420
config directory earlier because there's

00:42:37,080 --> 00:42:40,770
app config routing dot yml so when you

00:42:39,420 --> 00:42:42,240
want to teach Symphony's container how

00:42:40,770 --> 00:42:44,130
to instantiate your objects you go into

00:42:42,240 --> 00:42:45,840
this file and you just describe that so

00:42:44,130 --> 00:42:47,160
instead of us instantiating a random

00:42:45,840 --> 00:42:49,560
greeter we're gonna have Symphony do it

00:42:47,160 --> 00:42:51,270
for us in order for us to do that we

00:42:49,560 --> 00:42:54,030
have to say hey symphony I have a

00:42:51,270 --> 00:42:55,710
service whose nickname is gonna be my

00:42:54,030 --> 00:42:57,780
random greeter so that's the key I'm

00:42:55,710 --> 00:42:59,730
gonna use later to get it out and when

00:42:57,780 --> 00:43:02,190
you instantiate it when I ask for it and

00:42:59,730 --> 00:43:04,740
you need to instantiate it its class is

00:43:02,190 --> 00:43:06,990
that class and it has one constructor

00:43:04,740 --> 00:43:08,520
argument which is the logger service if

00:43:06,990 --> 00:43:10,230
I had multiple constructor arguments

00:43:08,520 --> 00:43:12,780
they would just be like another - on the

00:43:10,230 --> 00:43:13,860
next line and also see the only kind of

00:43:12,780 --> 00:43:16,320
like weird thing in here is that at

00:43:13,860 --> 00:43:18,270
symbol if you take off the @ symbol it

00:43:16,320 --> 00:43:20,850
will literally inject the string logger

00:43:18,270 --> 00:43:21,960
it will pass the string logger which may

00:43:20,850 --> 00:43:24,090
be what you want like if you're passing

00:43:21,960 --> 00:43:25,680
configuration totally legit but if you

00:43:24,090 --> 00:43:27,690
want it to be a service like no no it's

00:43:25,680 --> 00:43:29,550
not the string logger it's the service

00:43:27,690 --> 00:43:31,350
logger you put the @ symbol and then the

00:43:29,550 --> 00:43:33,150
service container is like oh yeah ok

00:43:31,350 --> 00:43:35,520
I'll go get the logger service first and

00:43:33,150 --> 00:43:37,020
then pass that in as an argument so this

00:43:35,520 --> 00:43:40,240
is enough to teach Symphony how to

00:43:37,020 --> 00:43:43,210
actually instantiate that object

00:43:40,240 --> 00:43:45,190
and now we can go to our console debug

00:43:43,210 --> 00:43:47,380
calling container my underscore random -

00:43:45,190 --> 00:43:48,580
er greeter and our service is now in the

00:43:47,380 --> 00:43:50,650
container so whatever number I had

00:43:48,580 --> 00:43:53,050
before like 216 services in the

00:43:50,650 --> 00:43:55,030
container is now 217 services in the

00:43:53,050 --> 00:43:57,400
container because our guys in there how

00:43:55,030 --> 00:43:58,599
do we use that very simple we just don't

00:43:57,400 --> 00:44:00,040
have to instantiate the object anymore

00:43:58,599 --> 00:44:01,780
that's like it's such a small thing

00:44:00,040 --> 00:44:03,640
not that instantiated the object was

00:44:01,780 --> 00:44:05,980
difficult but we've just centralized

00:44:03,640 --> 00:44:07,990
that so this arrow container arrow get

00:44:05,980 --> 00:44:09,310
my random greeter and that's it

00:44:07,990 --> 00:44:11,080
the kind of cool thing about this and

00:44:09,310 --> 00:44:12,400
actually turns out to be huge is that in

00:44:11,080 --> 00:44:14,080
our controller which is a kind of our

00:44:12,400 --> 00:44:16,510
day by day code we didn't really care

00:44:14,080 --> 00:44:18,790
how many constructor arguments that that

00:44:16,510 --> 00:44:21,040
service has so later we're using this

00:44:18,790 --> 00:44:22,270
and like 50 places in our code and we

00:44:21,040 --> 00:44:24,250
decide it needs a second constructor

00:44:22,270 --> 00:44:25,660
argument we can just go to services out

00:44:24,250 --> 00:44:27,400
yml and give it a second constructor

00:44:25,660 --> 00:44:28,540
argument cuz this codes just like just

00:44:27,400 --> 00:44:31,270
give me the random greet or whatever it

00:44:28,540 --> 00:44:33,339
takes just give that to me also

00:44:31,270 --> 00:44:35,290
corollary any services in the container

00:44:33,339 --> 00:44:37,359
is always only one of them so if you ask

00:44:35,290 --> 00:44:38,560
for my random greeter like 10 times on a

00:44:37,359 --> 00:44:40,810
request you just get back the same

00:44:38,560 --> 00:44:42,250
instance second thing I'll say is it's

00:44:40,810 --> 00:44:44,349
also lazy I keep describing the

00:44:42,250 --> 00:44:46,869
container is a array of useful objects

00:44:44,349 --> 00:44:49,960
it's actually an array of directions on

00:44:46,869 --> 00:44:52,540
how to create those objects if and when

00:44:49,960 --> 00:44:54,339
we ask for them so if we go a whole

00:44:52,540 --> 00:44:57,130
request response cycle and nobody ever

00:44:54,339 --> 00:44:58,839
asks for my random greeter we don't use

00:44:57,130 --> 00:45:00,010
the memory to instantiate that object

00:44:58,839 --> 00:45:03,430
that object is never actually

00:45:00,010 --> 00:45:05,140
instantiated so you can have 230 useful

00:45:03,430 --> 00:45:06,730
objects floating around without actually

00:45:05,140 --> 00:45:08,440
adding any extra overhead you're only

00:45:06,730 --> 00:45:17,170
actually instantiating them if you use

00:45:08,440 --> 00:45:18,730
them okay and this very quickly this

00:45:17,170 --> 00:45:19,660
part here so not at this point you guys

00:45:18,730 --> 00:45:21,880
know everything you need to know like

00:45:19,660 --> 00:45:23,230
all the most fundamental things of using

00:45:21,880 --> 00:45:24,580
symfony go download it start playing

00:45:23,230 --> 00:45:26,589
around with it you're good to go

00:45:24,580 --> 00:45:28,660
this last thing very quickly is extra

00:45:26,589 --> 00:45:30,280
credit this is a little bit harder it's

00:45:28,660 --> 00:45:32,589
also something that you don't do every

00:45:30,280 --> 00:45:34,630
single day so Symphony has events just

00:45:32,589 --> 00:45:36,550
like Drupal has hooks and Drupal 8 also

00:45:34,630 --> 00:45:37,900
has events so you think of events and

00:45:36,550 --> 00:45:41,619
hooks is basically the same idea it's

00:45:37,900 --> 00:45:43,480
way to come into a process and the way

00:45:41,619 --> 00:45:45,010
it works in symphony is you have events

00:45:43,480 --> 00:45:47,109
are less about like what you want to do

00:45:45,010 --> 00:45:48,550
like hook menu and more about timing as

00:45:47,109 --> 00:45:50,920
symphony goes through that request

00:45:48,550 --> 00:45:52,210
response router controller flow it kind

00:45:50,920 --> 00:45:53,270
of has these hook points at various

00:45:52,210 --> 00:45:55,130
times

00:45:53,270 --> 00:45:56,510
during that process so if you want to

00:45:55,130 --> 00:45:58,310
have a hook point very early on in

00:45:56,510 --> 00:45:59,870
symphony you the event you want to

00:45:58,310 --> 00:46:01,340
listen to is called Colonel dot request

00:45:59,870 --> 00:46:05,150
and you know one the one that's really

00:46:01,340 --> 00:46:06,980
late it's called Colonel dot response so

00:46:05,150 --> 00:46:09,290
I keep saying that you have to return a

00:46:06,980 --> 00:46:10,850
response from your controller guys like

00:46:09,290 --> 00:46:12,560
you that's our job return a response

00:46:10,850 --> 00:46:15,170
from the controller ok well technically

00:46:12,560 --> 00:46:17,150
and in a symphony framework most people

00:46:15,170 --> 00:46:18,590
do do that most people do not go to this

00:46:17,150 --> 00:46:20,420
extra level of fanciness I just want to

00:46:18,590 --> 00:46:22,640
like see what can we do with Symphony

00:46:20,420 --> 00:46:24,320
here kind of craziness can we do so

00:46:22,640 --> 00:46:26,360
let's say that we come from the drupal

00:46:24,320 --> 00:46:27,470
world and we love the render array so

00:46:26,360 --> 00:46:29,240
like you know and I gotta get I gotta

00:46:27,470 --> 00:46:30,920
get some render array up in my Symphony

00:46:29,240 --> 00:46:32,720
ok so we started doing something like

00:46:30,920 --> 00:46:35,000
that maybe we even put like some hash

00:46:32,720 --> 00:46:36,800
tag stuffs on there just to make us feel

00:46:35,000 --> 00:46:38,810
at home so now I'm just returning this

00:46:36,800 --> 00:46:41,270
random array template key and variables

00:46:38,810 --> 00:46:42,920
key and that's it if you do this you

00:46:41,270 --> 00:46:44,720
will get a terrible exception that says

00:46:42,920 --> 00:46:46,430
I'm so angry right now because you

00:46:44,720 --> 00:46:47,690
didn't return a symphony response object

00:46:46,430 --> 00:46:49,670
from your controller and I told you to

00:46:47,690 --> 00:46:50,780
do that under all circumstances well it

00:46:49,670 --> 00:46:52,190
turns out you don't have to do that

00:46:50,780 --> 00:46:54,020
there's an event after your controller

00:46:52,190 --> 00:46:55,100
is fired that if you don't return a

00:46:54,020 --> 00:46:58,160
response from your controller you can

00:46:55,100 --> 00:46:59,690
add a hook a listener to this event and

00:46:58,160 --> 00:47:01,490
you can basically try to transform

00:46:59,690 --> 00:47:03,710
whatever that value is into a symphony

00:47:01,490 --> 00:47:05,750
response so very quickly this is

00:47:03,710 --> 00:47:07,160
actually what a listener which again is

00:47:05,750 --> 00:47:10,070
kind of like an implementation of a hook

00:47:07,160 --> 00:47:11,330
looks like in symphony or Drupal 8 the

00:47:10,070 --> 00:47:12,530
important parts down there and they get

00:47:11,330 --> 00:47:14,180
subscribed events you're basically

00:47:12,530 --> 00:47:15,710
saying I listened to an event called

00:47:14,180 --> 00:47:17,450
Colonel dot view it's one his symphonies

00:47:15,710 --> 00:47:20,120
Corps events and when that event happens

00:47:17,450 --> 00:47:21,470
I want you to call my on View function

00:47:20,120 --> 00:47:23,660
which is that function up there which is

00:47:21,470 --> 00:47:25,370
empty right now and I also since I know

00:47:23,660 --> 00:47:27,680
we're gonna want to render a template

00:47:25,370 --> 00:47:29,090
inside of this class I've already gone

00:47:27,680 --> 00:47:30,650
done the step with the dependency

00:47:29,090 --> 00:47:32,030
injection where I'm injecting the temp I

00:47:30,650 --> 00:47:33,500
have the argument for my templating

00:47:32,030 --> 00:47:34,850
object cuz I know in a second I'm gonna

00:47:33,500 --> 00:47:38,270
need the templating object to render a

00:47:34,850 --> 00:47:40,340
template okay so the next step is we

00:47:38,270 --> 00:47:41,300
just read register this as a service so

00:47:40,340 --> 00:47:42,830
it's pretty common I was gonna be

00:47:41,300 --> 00:47:43,820
registering as a service the difference

00:47:42,830 --> 00:47:45,950
with this service though is I don't

00:47:43,820 --> 00:47:47,090
intend to use this in my controller like

00:47:45,950 --> 00:47:49,430
our random greeter we use in our

00:47:47,090 --> 00:47:50,630
controller I want Symphony to use this I

00:47:49,430 --> 00:47:52,250
want to hook this in a symphony so it

00:47:50,630 --> 00:47:54,380
actually calls my function when that

00:47:52,250 --> 00:47:55,400
event happens so the way you do that and

00:47:54,380 --> 00:47:56,540
this is a little bit more advanced but

00:47:55,400 --> 00:47:59,150
you'll see this all the time and

00:47:56,540 --> 00:48:00,470
symphony in Drupal 8 is with a tag so a

00:47:59,150 --> 00:48:03,110
lot of times you're like I need to like

00:48:00,470 --> 00:48:05,120
hook into core in some way when you like

00:48:03,110 --> 00:48:06,350
Google how do I add an event subscriber

00:48:05,120 --> 00:48:09,680
how do I add a

00:48:06,350 --> 00:48:11,150
I don't even know a custom route loader

00:48:09,680 --> 00:48:12,500
something that's really cost him hooking

00:48:11,150 --> 00:48:14,720
into the system the answer is always

00:48:12,500 --> 00:48:16,940
going to be make a service and then give

00:48:14,720 --> 00:48:18,290
it a specific tag when Symphony boots it

00:48:16,940 --> 00:48:20,090
looks for all services that have that

00:48:18,290 --> 00:48:21,620
kernel dot event subscriber tag and it

00:48:20,090 --> 00:48:23,630
kind of like consumes them says these

00:48:21,620 --> 00:48:25,160
guys are event listeners so it's a

00:48:23,630 --> 00:48:26,840
little more advanced that's kind of like

00:48:25,160 --> 00:48:28,730
a way to say my service is important

00:48:26,840 --> 00:48:30,230
it's not just a normal service I need to

00:48:28,730 --> 00:48:32,150
do something in core and some special

00:48:30,230 --> 00:48:34,970
ways there's a finite number of those

00:48:32,150 --> 00:48:36,290
tags in the system so cool so now inside

00:48:34,970 --> 00:48:38,540
of our on view function that's gonna be

00:48:36,290 --> 00:48:39,920
called after our controller and

00:48:38,540 --> 00:48:42,320
basically I'm not gonna go through the

00:48:39,920 --> 00:48:44,150
specifics here but we can just get the

00:48:42,320 --> 00:48:46,040
result back that array that we returned

00:48:44,150 --> 00:48:47,180
from the controller and then down there

00:48:46,040 --> 00:48:49,790
at the bottom we're like okay we had a

00:48:47,180 --> 00:48:51,830
template key we had a variables key and

00:48:49,790 --> 00:48:53,480
then just like we did in our controller

00:48:51,830 --> 00:48:55,610
earlier will say this arrow templating

00:48:53,480 --> 00:48:58,280
arrow render remember I I passed the

00:48:55,610 --> 00:48:59,360
templating service in as an arguments my

00:48:58,280 --> 00:49:00,950
controller put that on the template

00:48:59,360 --> 00:49:03,440
property and then we just set the

00:49:00,950 --> 00:49:04,640
response on the bottom cool so I said

00:49:03,440 --> 00:49:05,870
that part is something you don't do

00:49:04,640 --> 00:49:07,880
every day that's like us being like can

00:49:05,870 --> 00:49:09,220
be kung fu Symphony if we do something

00:49:07,880 --> 00:49:11,720
we're not supposed to be able to do

00:49:09,220 --> 00:49:13,370
alright so last thing like you guys

00:49:11,720 --> 00:49:13,790
getting into this stuff where's your

00:49:13,370 --> 00:49:16,870
question

00:49:13,790 --> 00:49:16,870
yep go for it

00:49:22,619 --> 00:49:26,670
oh good yeah so the app console that

00:49:24,900 --> 00:49:28,380
where you can view the services is there

00:49:26,670 --> 00:49:30,150
a way to view listeners there as well

00:49:28,380 --> 00:49:31,890
there actually is there's also something

00:49:30,150 --> 00:49:33,119
in the profiler he has like a debug :

00:49:31,890 --> 00:49:34,259
event dispatcher or something like that

00:49:33,119 --> 00:49:35,880
and get a list of all the listeners of

00:49:34,259 --> 00:49:37,740
the services which is really key cuz

00:49:35,880 --> 00:49:39,329
like listeners are magic there's no way

00:49:37,740 --> 00:49:41,490
you can't like follow execution flow and

00:49:39,329 --> 00:49:44,309
see listeners so what I'll leave you

00:49:41,490 --> 00:49:45,509
guys with is like extra thing too cuz I

00:49:44,309 --> 00:49:46,740
want you guys to like get started with

00:49:45,509 --> 00:49:48,900
this like it's not hard if you have a

00:49:46,740 --> 00:49:51,029
problem that you need to solve that

00:49:48,900 --> 00:49:53,160
doesn't involve a CMS use Symphony or

00:49:51,029 --> 00:49:54,509
use Silex the little tiny thing like

00:49:53,160 --> 00:49:56,789
people use Silex for all kinds of stuff

00:49:54,509 --> 00:49:57,990
so one thing we have and in addition to

00:49:56,789 --> 00:49:59,640
like just starting a new project we have

00:49:57,990 --> 00:50:01,230
a symphony demo so that same installer

00:49:59,640 --> 00:50:02,849
we used earlier we said Symphony new and

00:50:01,230 --> 00:50:05,940
then a directory you can say Symphony

00:50:02,849 --> 00:50:07,499
demo and it downloads a full kind of

00:50:05,940 --> 00:50:09,869
fully featured Symphony application

00:50:07,499 --> 00:50:10,920
talks to the database those forms you

00:50:09,869 --> 00:50:12,450
can look around there it's all like

00:50:10,920 --> 00:50:14,670
really well annotated with like here's

00:50:12,450 --> 00:50:15,660
why we're doing this so it's really

00:50:14,670 --> 00:50:17,549
really good it's actually kind of a

00:50:15,660 --> 00:50:18,690
newer thing that we have so older

00:50:17,549 --> 00:50:20,519
Symphony users might not even realize

00:50:18,690 --> 00:50:22,769
this exists but it's fantastic when I

00:50:20,519 --> 00:50:24,240
was adding more stuff to it this is what

00:50:22,769 --> 00:50:27,359
it looks like you like security you can

00:50:24,240 --> 00:50:28,470
log in all all kinds of good stuff we

00:50:27,359 --> 00:50:29,609
even have this fancy button where you

00:50:28,470 --> 00:50:32,009
can like click the button and see the

00:50:29,609 --> 00:50:35,609
source code that's like yeah in charge

00:50:32,009 --> 00:50:36,690
of that page second thing is especially

00:50:35,609 --> 00:50:39,359
when you get into this for the first

00:50:36,690 --> 00:50:40,710
time I you don't have to do this like I

00:50:39,359 --> 00:50:41,640
don't mean to step on anybody's workflow

00:50:40,710 --> 00:50:43,289
but like Pete's your storm is a

00:50:41,640 --> 00:50:44,489
wonderful ID it helps you thought of

00:50:43,289 --> 00:50:46,559
completion of the classes there's also

00:50:44,489 --> 00:50:48,269
ridiculous Symphony plugin so just go to

00:50:46,559 --> 00:50:50,190
bitly slash speech we storm - Symphony

00:50:48,269 --> 00:50:52,259
it gives you auto completion all kinds

00:50:50,190 --> 00:50:54,029
of amazingly weird ways our

00:50:52,259 --> 00:50:55,470
documentation is gigantic I think it's

00:50:54,029 --> 00:50:57,779
like a thousand pages if he printed out

00:50:55,470 --> 00:50:58,890
then also our site camp University if

00:50:57,779 --> 00:51:00,599
you want screencasts we have like

00:50:58,890 --> 00:51:02,249
screencasts all up and down about

00:51:00,599 --> 00:51:03,480
Symphony and all the scripts are free

00:51:02,249 --> 00:51:05,160
too so if you want to just read the

00:51:03,480 --> 00:51:06,180
scripts and look at the code block so

00:51:05,160 --> 00:51:09,869
you can just go there and do that right

00:51:06,180 --> 00:51:11,009
now I said also like you Silex use

00:51:09,869 --> 00:51:13,589
Drupal 8 cuz they're all using the same

00:51:11,009 --> 00:51:15,809
things so I'm gonna go through this

00:51:13,589 --> 00:51:17,400
because you guys already know this so

00:51:15,809 --> 00:51:19,140
all this is like you have three tools

00:51:17,400 --> 00:51:20,519
now Symphony Silex and Drupal and really

00:51:19,140 --> 00:51:21,809
there's even more stuff that uses the

00:51:20,519 --> 00:51:23,339
symphony components so that your world

00:51:21,809 --> 00:51:25,259
is even bigger than this and you can go

00:51:23,339 --> 00:51:27,210
to and from them without having to like

00:51:25,259 --> 00:51:28,980
relearn a whole thing so we just learned

00:51:27,210 --> 00:51:31,049
all the concepts in like 40 minutes

00:51:28,980 --> 00:51:32,910
routes controller services that's it

00:51:31,049 --> 00:51:34,890
it's all the same across them so you can

00:51:32,910 --> 00:51:36,110
use Silex to learn drupal 8 you can use

00:51:34,890 --> 00:51:38,120
Silex to learn simpler

00:51:36,110 --> 00:51:40,430
you can use Symphony to learn Drupal

00:51:38,120 --> 00:51:43,580
vice-versa so choose whatever tool is

00:51:40,430 --> 00:51:51,020
actually going to help you and that's it

00:51:43,580 --> 00:51:52,910
thank you guys very very much if you

00:51:51,020 --> 00:51:53,960
guys want to get started in Symphony and

00:51:52,910 --> 00:51:55,490
you like the screencast thing I have a

00:51:53,960 --> 00:51:59,030
coupon code there on the bottom see

00:51:55,490 --> 00:52:00,860
there it's Hollywood d8 see I was trying

00:51:59,030 --> 00:52:02,690
to think of something clever right I'm

00:52:00,860 --> 00:52:03,830
gonna keep that up for like a day so go

00:52:02,690 --> 00:52:05,990
on to keep University and that gives you

00:52:03,830 --> 00:52:07,100
like a free all access month and we

00:52:05,990 --> 00:52:09,320
don't ask for credit card anything like

00:52:07,100 --> 00:52:12,050
that so it's no weirdness and if you

00:52:09,320 --> 00:52:13,850
like it you guys can tell to tell us and

00:52:12,050 --> 00:52:16,550
I think I'm probably over time so if you

00:52:13,850 --> 00:52:20,920
have any questions come down and ask

00:52:16,550 --> 00:52:20,920

YouTube URL: https://www.youtube.com/watch?v=iQL1joxljho


