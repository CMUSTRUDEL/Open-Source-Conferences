Title: DrupalCon Nashville 2018: Symfony 4: From zero to hero
Publication date: 2018-04-11
Playlist: DrupalCon Nashville - April 2018
Description: 
	On November 30 was released the 4.0 version of Symfony. No doubts, that's the best version of Symfony released until now. However, being an early adopter has some caveats when trying to integrate some popular bundles that may not have a stable release compatible with SF4.
Through this talk, we'll create a small api that integrates some popular bundles and authentication. We'll use these bundles:
- FOSUserBundle
- FOSRestBundle
- NelmioApiDoc
- EasyAdminBundle

Our API will be authenticated using Json Web Tokens (JWT) to secure every existing endpoint.

Let's dive together into the best Symfony ever and you'll learn the building blocks to create great Symfony apps using the best version of Symfony!
Captions: 
	00:00:14,160 --> 00:00:21,540
I think we are on time so let's start

00:00:17,720 --> 00:00:23,279
welcome my name is Kevin porous well I'm

00:00:21,540 --> 00:00:26,189
the director of technology at Manatee

00:00:23,279 --> 00:00:29,760
you can find me on the web using K

00:00:26,189 --> 00:00:35,090
porous 0-7 Twitter Drupal or github

00:00:29,760 --> 00:00:39,030
whatever a word for vanity this is a

00:00:35,090 --> 00:00:41,399
full stack web agency with a human first

00:00:39,030 --> 00:00:44,220
collaborative approach in designing

00:00:41,399 --> 00:00:46,950
excellence in delivery we are based in

00:00:44,220 --> 00:00:51,030
Costa Rica so you are welcome to Costa

00:00:46,950 --> 00:00:55,020
Rica if you want to go what will we

00:00:51,030 --> 00:00:58,440
learn we'll get a quick overview about

00:00:55,020 --> 00:01:01,680
body Symphony Y symphony for we'll talk

00:00:58,440 --> 00:01:05,339
about flags about maker bundle about

00:01:01,680 --> 00:01:07,590
some useful bundles then we'll again

00:01:05,339 --> 00:01:10,409
take a quick overview to entities

00:01:07,590 --> 00:01:13,610
migrations and controllers then we are

00:01:10,409 --> 00:01:17,520
going to put all together and finally

00:01:13,610 --> 00:01:21,569
we'll get some final talks so let's

00:01:17,520 --> 00:01:24,109
start symphony is a set of PHP

00:01:21,569 --> 00:01:26,909
components a web application framework a

00:01:24,109 --> 00:01:28,109
philosophy and a community all working

00:01:26,909 --> 00:01:31,460
together in harmony

00:01:28,109 --> 00:01:35,609
these are some stats taken from symphony

00:01:31,460 --> 00:01:40,079
main page so as you can see it's a

00:01:35,609 --> 00:01:43,200
pretty used PHP framework actually we

00:01:40,079 --> 00:01:48,450
use that in Drupal 8 not this version

00:01:43,200 --> 00:01:51,359
but we use symphony in Drupal 8 so why

00:01:48,450 --> 00:01:55,350
symphony for this major version was

00:01:51,359 --> 00:01:59,659
released on November 30 last year it

00:01:55,350 --> 00:02:03,060
uses a micro G vector for example

00:01:59,659 --> 00:02:05,429
symphony for application is 70% smaller

00:02:03,060 --> 00:02:08,690
than the same application in symphony

00:02:05,429 --> 00:02:11,849
three it has a birth directory structure

00:02:08,690 --> 00:02:14,700
we have flags in the core of symphony

00:02:11,849 --> 00:02:18,620
and we have maker bundle we are going to

00:02:14,700 --> 00:02:22,110
see what is each one of these items so

00:02:18,620 --> 00:02:23,310
let's start with flex flex is a way to

00:02:22,110 --> 00:02:27,629
install bundles

00:02:23,310 --> 00:02:30,390
using recipes so you

00:02:27,629 --> 00:02:33,030
braum composure required common and it

00:02:30,390 --> 00:02:36,269
also downloads the recipe and executes

00:02:33,030 --> 00:02:39,239
the recipe that you require to install

00:02:36,269 --> 00:02:42,840
that bundle there is a screenshot it's

00:02:39,239 --> 00:02:45,569
an example we have two sources for the

00:02:42,840 --> 00:02:48,930
recipes the core recipes and the country

00:02:45,569 --> 00:02:51,090
recipes if there is a controversy P it

00:02:48,930 --> 00:02:54,659
asks you if you want to execute the

00:02:51,090 --> 00:02:56,939
recipe this is an example of yen as

00:02:54,659 --> 00:03:00,599
satellizer bundle installation it's

00:02:56,939 --> 00:03:04,019
saying that this is a controversy P so

00:03:00,599 --> 00:03:07,739
do you want to execute the recipe you

00:03:04,019 --> 00:03:11,459
say yes so if execute the recipe and

00:03:07,739 --> 00:03:13,379
finally it tells you hey some files may

00:03:11,459 --> 00:03:15,900
have been created or updated to

00:03:13,379 --> 00:03:18,510
configure your new package feel free to

00:03:15,900 --> 00:03:22,590
review edit and commit them these files

00:03:18,510 --> 00:03:25,500
are yours so it edited or created the

00:03:22,590 --> 00:03:26,599
files that it needs to configure the

00:03:25,500 --> 00:03:30,389
bundle

00:03:26,599 --> 00:03:35,189
now you are free to modify whatever you

00:03:30,389 --> 00:03:38,579
need another great thing I've seen 24 is

00:03:35,189 --> 00:03:41,729
the maker bundle this allows you to do

00:03:38,579 --> 00:03:44,790
some code scaffolding so this is a

00:03:41,729 --> 00:03:47,310
example a list of all the comments that

00:03:44,790 --> 00:03:50,370
are available with this bundle so for

00:03:47,310 --> 00:03:55,939
example you can make out comment

00:03:50,370 --> 00:03:59,909
controller CR UD entity fixtures forum

00:03:55,939 --> 00:04:03,810
functional tests migrations sterilizer

00:03:59,909 --> 00:04:08,159
encoder subscriber click extension unit

00:04:03,810 --> 00:04:14,759
test validator bolder and more comments

00:04:08,159 --> 00:04:16,680
are being added to the bundle ok let us

00:04:14,759 --> 00:04:20,099
start talking about some useful bundles

00:04:16,680 --> 00:04:22,079
that and that I require for the demo

00:04:20,099 --> 00:04:26,310
application that I made for this ischium

00:04:22,079 --> 00:04:28,860
so first of all force user bundle this

00:04:26,310 --> 00:04:31,139
is the most popular bundle in symphony

00:04:28,860 --> 00:04:33,460
to manage user it's really really

00:04:31,139 --> 00:04:38,680
helpful you can find the document

00:04:33,460 --> 00:04:44,620
in that link the installation is let's

00:04:38,680 --> 00:04:47,080
say easy there is kind of unlisted

00:04:44,620 --> 00:04:50,050
dependency on symphony a large

00:04:47,080 --> 00:04:52,539
templating so first of all you need to

00:04:50,050 --> 00:04:55,840
download symphony slash templating user

00:04:52,539 --> 00:04:58,630
using simple composer required common

00:04:55,840 --> 00:05:01,840
then you configure that package you do

00:04:58,630 --> 00:05:04,780
that in config slash packages in las

00:05:01,840 --> 00:05:09,729
framework the ml and you add the trick

00:05:04,780 --> 00:05:12,880
engine templating now you are supposed

00:05:09,729 --> 00:05:16,930
to be ready to install the user bundle

00:05:12,880 --> 00:05:19,300
however the user bundle I mean when I

00:05:16,930 --> 00:05:24,130
was creating this at least the user

00:05:19,300 --> 00:05:27,630
bundle didn't have flex recipe so it

00:05:24,130 --> 00:05:30,970
tries to install the bundle from

00:05:27,630 --> 00:05:33,220
auto-generated recipe and it wasn't

00:05:30,970 --> 00:05:37,000
working at that moment I haven't checked

00:05:33,220 --> 00:05:39,009
that during these days but I know the

00:05:37,000 --> 00:05:40,539
community is actively working on

00:05:39,009 --> 00:05:44,349
creating recipes for the bundle that

00:05:40,539 --> 00:05:48,190
still doesn't have it so I won't be

00:05:44,349 --> 00:05:50,830
surprised surprised if the bundle really

00:05:48,190 --> 00:05:56,050
have a recipe that would be great

00:05:50,830 --> 00:05:58,360
so if you run this comment it downloads

00:05:56,050 --> 00:06:01,979
the bundle but it fails executing the

00:05:58,360 --> 00:06:04,599
recipe so it's saying that there is a

00:06:01,979 --> 00:06:09,090
config file know that needs to be

00:06:04,599 --> 00:06:12,039
configured so you go and create the

00:06:09,090 --> 00:06:15,479
config file that should be located on

00:06:12,039 --> 00:06:16,810
config slash packages unless force user

00:06:15,479 --> 00:06:21,280
now

00:06:16,810 --> 00:06:25,060
each bundle has his own config file so

00:06:21,280 --> 00:06:27,490
here you configure this bundle the DB

00:06:25,060 --> 00:06:31,090
Treiber that was the error that we had

00:06:27,490 --> 00:06:34,750
here you said the user class the

00:06:31,090 --> 00:06:39,460
firewall name and some stuff for the

00:06:34,750 --> 00:06:41,500
emails that is bundle Wilson next you

00:06:39,460 --> 00:06:44,289
need to create a user class if you don't

00:06:41,500 --> 00:06:46,870
want to use the default user class so in

00:06:44,289 --> 00:06:49,360
this example I am just creating on

00:06:46,870 --> 00:06:52,360
normal entity class this class extends

00:06:49,360 --> 00:06:55,180
from the user that I renamed here but

00:06:52,360 --> 00:06:57,580
it's the user class that the bundles

00:06:55,180 --> 00:06:59,500
provides and you can add properties you

00:06:57,580 --> 00:07:02,100
can add function you can you can add

00:06:59,500 --> 00:07:04,870
whatever you need to your user class

00:07:02,100 --> 00:07:07,000
obviously this is an entity class so you

00:07:04,870 --> 00:07:11,110
need to link that to a repository class

00:07:07,000 --> 00:07:13,030
that you should also create actually we

00:07:11,110 --> 00:07:15,280
will see later in this presentation that

00:07:13,030 --> 00:07:18,550
you don't need to manually creating you

00:07:15,280 --> 00:07:24,370
can generate in using maker bundle as we

00:07:18,550 --> 00:07:26,950
saw a couple of slides ago then to

00:07:24,370 --> 00:07:29,770
continue configuring the first user

00:07:26,950 --> 00:07:32,290
bundle you need to configure security so

00:07:29,770 --> 00:07:34,720
here you need to set the encoder the

00:07:32,290 --> 00:07:38,080
providers and you need to create a

00:07:34,720 --> 00:07:40,000
firewall that will use your recently

00:07:38,080 --> 00:07:42,880
installed bundle so we are creating a

00:07:40,000 --> 00:07:47,790
firewall named main and we are setting

00:07:42,880 --> 00:07:47,790
the fourth user bundle for this firewall

00:07:48,540 --> 00:07:55,990
last but not least you need to configure

00:07:51,520 --> 00:07:59,560
routes in order to do this you create a

00:07:55,990 --> 00:08:03,670
file under config English routes and you

00:07:59,560 --> 00:08:06,790
name that first underscore user and you

00:08:03,670 --> 00:08:10,240
are saying that you import all of the

00:08:06,790 --> 00:08:14,590
resources the routes that these bundles

00:08:10,240 --> 00:08:16,810
provides at this path if you don't want

00:08:14,590 --> 00:08:18,970
to import all of the routes you can

00:08:16,810 --> 00:08:21,100
select what routes you want to import

00:08:18,970 --> 00:08:23,500
and you can do that and you can find

00:08:21,100 --> 00:08:25,180
more about this in the bundle

00:08:23,500 --> 00:08:32,020
documentation but it's pretty easy to

00:08:25,180 --> 00:08:34,360
you to do okay our next bundle it is JSC

00:08:32,020 --> 00:08:36,250
réaliser bundle this is an optional

00:08:34,360 --> 00:08:40,300
dependency for our next bundle but it

00:08:36,250 --> 00:08:43,630
it's pretty useful pretty powerful so if

00:08:40,300 --> 00:08:47,980
you want to create an API like we are

00:08:43,630 --> 00:08:49,320
going to do it's a really good bundle so

00:08:47,980 --> 00:08:53,140
for the installation

00:08:49,320 --> 00:09:00,580
it's only a composer comment and that's

00:08:53,140 --> 00:09:04,990
all next bundle first rest bundle it's a

00:09:00,580 --> 00:09:07,450
/ friendly way to create rest api's you

00:09:04,990 --> 00:09:11,290
can find the documentation in that link

00:09:07,450 --> 00:09:15,370
and the installation is again pretty

00:09:11,290 --> 00:09:18,190
simple this is thanks to flex so you

00:09:15,370 --> 00:09:21,550
only run composer required comment and

00:09:18,190 --> 00:09:26,050
you go you did a configuration file as

00:09:21,550 --> 00:09:27,820
you need it in this example here I added

00:09:26,050 --> 00:09:29,440
the Bulls

00:09:27,820 --> 00:09:32,709
I added some rules for the format

00:09:29,440 --> 00:09:36,279
listeners I'm saying that if the path is

00:09:32,709 --> 00:09:40,029
on the res lush API the fallback format

00:09:36,279 --> 00:09:43,690
is JSON if it's any other path the

00:09:40,029 --> 00:09:48,250
fallback format is HTML this is useful

00:09:43,690 --> 00:09:51,519
so that if you get an exception all

00:09:48,250 --> 00:09:55,089
exceptions on the rest api are shown in

00:09:51,519 --> 00:09:58,300
JSON and all call exceptions on there

00:09:55,089 --> 00:10:00,760
every other path are thrown in HTML if

00:09:58,300 --> 00:10:03,970
you are creating on API during one of

00:10:00,760 --> 00:10:07,060
your API throws exceptions in HTML the

00:10:03,970 --> 00:10:12,610
one that it throws exception in JSON so

00:10:07,060 --> 00:10:15,640
you can do that using this our next

00:10:12,610 --> 00:10:19,720
bundle is the admin bundle we are

00:10:15,640 --> 00:10:23,320
creating a pretty nice API but we want

00:10:19,720 --> 00:10:27,370
to manage the entities on this API and

00:10:23,320 --> 00:10:30,130
we don't want to complicate creating

00:10:27,370 --> 00:10:32,800
debugging so we are just using ECM in

00:10:30,130 --> 00:10:36,279
bundle it allows you to create Avakian

00:10:32,800 --> 00:10:38,200
in a really fast way the documentation

00:10:36,279 --> 00:10:42,760
can be found here and the installation

00:10:38,200 --> 00:10:46,120
is yes composer require admin and modify

00:10:42,760 --> 00:10:48,070
the configuration file in this case this

00:10:46,120 --> 00:10:50,800
is all that you need in your

00:10:48,070 --> 00:10:53,440
configuration file I mean you have a lot

00:10:50,800 --> 00:10:56,320
more options but if you only want a

00:10:53,440 --> 00:10:58,149
simple back-end for the user entity you

00:10:56,320 --> 00:11:02,620
only need to add in the configuration

00:10:58,149 --> 00:11:05,920
file the easy admin t-then entity scheme

00:11:02,620 --> 00:11:08,709
and finally the entities that you want

00:11:05,920 --> 00:11:10,940
that easy admin manage for you in this

00:11:08,709 --> 00:11:14,390
case only user

00:11:10,940 --> 00:11:17,120
that's enough in that way you have the

00:11:14,390 --> 00:11:19,760
index for the user you have created you

00:11:17,120 --> 00:11:23,030
have retrieved you have update you have

00:11:19,760 --> 00:11:25,070
delete you have search you have pretty

00:11:23,030 --> 00:11:29,870
much everything that you need to manage

00:11:25,070 --> 00:11:31,100
this entity another bundle and this is

00:11:29,870 --> 00:11:34,670
really really useful

00:11:31,100 --> 00:11:37,130
it's nelmieux api dog bundle its allows

00:11:34,670 --> 00:11:40,430
you to create documentation for your api

00:11:37,130 --> 00:11:42,500
so you don't need to bother about

00:11:40,430 --> 00:11:45,320
creating documents and keeping those

00:11:42,500 --> 00:11:49,010
documents updated now this is going to

00:11:45,320 --> 00:11:51,020
be in your code and it will generate the

00:11:49,010 --> 00:11:53,300
documentation and you could interact

00:11:51,020 --> 00:11:56,840
with that documentation page we are

00:11:53,300 --> 00:11:59,180
going to see that later again you can

00:11:56,840 --> 00:12:01,520
find the bundle documentation at that

00:11:59,180 --> 00:12:05,360
link and the installation is again

00:12:01,520 --> 00:12:10,010
simple composer required common and edit

00:12:05,360 --> 00:12:12,830
the configuration file for example I'm

00:12:10,010 --> 00:12:13,810
not sure if it with so well sorry about

00:12:12,830 --> 00:12:16,330
that

00:12:13,810 --> 00:12:19,790
but for example we have a key

00:12:16,330 --> 00:12:23,120
documentation here you have info in the

00:12:19,790 --> 00:12:26,300
info you list title description and

00:12:23,120 --> 00:12:28,580
version for your API then you have a key

00:12:26,300 --> 00:12:31,430
name security definitions where you

00:12:28,580 --> 00:12:33,890
define how your app is going to be

00:12:31,430 --> 00:12:38,600
authenticated in this case I'm defining

00:12:33,890 --> 00:12:41,570
defining authentication name bidder and

00:12:38,600 --> 00:12:44,090
say you need its type is API key it's

00:12:41,570 --> 00:12:48,080
actually not an API key but from the

00:12:44,090 --> 00:12:50,480
types available that works for us you

00:12:48,080 --> 00:12:54,830
saying that is in header and the meaning

00:12:50,480 --> 00:12:57,950
of the header is authorization then you

00:12:54,830 --> 00:13:01,610
can document pass here but you only

00:12:57,950 --> 00:13:03,890
document pass that are not been provided

00:13:01,610 --> 00:13:06,680
by your custom code so in this example

00:13:03,890 --> 00:13:09,800
in my custom code is not been provided

00:13:06,680 --> 00:13:12,200
the pass unless API is lászló in shock

00:13:09,800 --> 00:13:16,130
that's provided by a bundle we are going

00:13:12,200 --> 00:13:18,890
to see so I can go to that bundle and

00:13:16,130 --> 00:13:21,650
edit the code to get the documentation

00:13:18,890 --> 00:13:23,680
so I need to create the documentation in

00:13:21,650 --> 00:13:27,430
this bundle config file

00:13:23,680 --> 00:13:30,610
am ia dog bundle config file so here you

00:13:27,430 --> 00:13:33,220
can add tags description parameters

00:13:30,610 --> 00:13:36,520
responses and all what you need to

00:13:33,220 --> 00:13:39,160
document this endpoint finally you have

00:13:36,520 --> 00:13:43,870
areas where you'll find past patterns

00:13:39,160 --> 00:13:46,690
that will fetch API documentation in

00:13:43,870 --> 00:13:52,149
this example we are saying unless API

00:13:46,690 --> 00:13:55,209
will be documented our next bundle Lexi

00:13:52,149 --> 00:13:57,399
JWT authentication bundle we are

00:13:55,209 --> 00:14:00,700
authentication our authenticating our

00:13:57,399 --> 00:14:03,100
API using JSON web tokens these bundles

00:14:00,700 --> 00:14:06,220
provides that functionality in a simple

00:14:03,100 --> 00:14:09,130
simple way the documentation is

00:14:06,220 --> 00:14:13,149
available here and for the installation

00:14:09,130 --> 00:14:15,520
it's a little more complex than the

00:14:13,149 --> 00:14:19,360
other bundles but it's not so difficult

00:14:15,520 --> 00:14:23,290
so let's see composer required you can

00:14:19,360 --> 00:14:26,050
imagine at this moment you need to

00:14:23,290 --> 00:14:29,350
generate the kids using open SSL Commons

00:14:26,050 --> 00:14:32,589
because this is a pair of keys private

00:14:29,350 --> 00:14:34,690
and public and you need to edit the

00:14:32,589 --> 00:14:40,060
configuration file then you configure

00:14:34,690 --> 00:14:43,120
security and you configure routine so

00:14:40,060 --> 00:14:45,610
for the configuration file you need to

00:14:43,120 --> 00:14:48,970
set the private key path the public key

00:14:45,610 --> 00:14:53,110
path the passphrase for your private key

00:14:48,970 --> 00:14:55,660
and the token TTL that is the time to

00:14:53,110 --> 00:14:58,690
live for the JSON web token that you are

00:14:55,660 --> 00:15:00,490
going to generate these are the

00:14:58,690 --> 00:15:03,640
firewalls that you are creating were

00:15:00,490 --> 00:15:05,650
creating a firewall for the API logging

00:15:03,640 --> 00:15:09,459
and you are creating a framework for all

00:15:05,650 --> 00:15:11,620
of the rest of the API and here you are

00:15:09,459 --> 00:15:14,829
just importing a route that is provided

00:15:11,620 --> 00:15:17,380
by this module that is a lashe API at

00:15:14,829 --> 00:15:21,839
lászló inject the one that we documented

00:15:17,380 --> 00:15:25,480
in the previous bundle another bundle

00:15:21,839 --> 00:15:28,170
nel mio course bundle it's a simple and

00:15:25,480 --> 00:15:32,230
effective way to configure course and

00:15:28,170 --> 00:15:34,450
actually it's pretty easy I was working

00:15:32,230 --> 00:15:37,180
on a project and I had forgotten to

00:15:34,450 --> 00:15:40,330
configure course then the front-end

00:15:37,180 --> 00:15:42,430
per say hey what about course oh I

00:15:40,330 --> 00:15:45,730
forgot it what can I do

00:15:42,430 --> 00:15:48,730
google it oh I know course bundle and it

00:15:45,730 --> 00:15:50,890
was really really easy to configure the

00:15:48,730 --> 00:15:53,560
documentation can be found here the

00:15:50,890 --> 00:15:57,070
installation it's yes composer required

00:15:53,560 --> 00:15:59,770
curve and the configuration file is like

00:15:57,070 --> 00:16:02,230
this you have a default section and then

00:15:59,770 --> 00:16:06,310
you have a section for every path on

00:16:02,230 --> 00:16:08,260
your API so for example in API you are

00:16:06,310 --> 00:16:11,560
saying that the origin

00:16:08,260 --> 00:16:15,220
allows rejects we're saying that here

00:16:11,560 --> 00:16:18,190
and then the allows or rhenium variable

00:16:15,220 --> 00:16:20,170
that we are taking that as much as all

00:16:18,190 --> 00:16:22,390
the other configuration that we have

00:16:20,170 --> 00:16:25,450
already seen we are taking that from

00:16:22,390 --> 00:16:27,880
environment bars so I just put at that

00:16:25,450 --> 00:16:33,100
and file at the root of my project and

00:16:27,880 --> 00:16:36,730
it takes all those values now we are

00:16:33,100 --> 00:16:39,910
going to create an entity we are

00:16:36,730 --> 00:16:44,550
obviously using maker bundle to create

00:16:39,910 --> 00:16:47,560
an entity so console make column entity

00:16:44,550 --> 00:16:50,950
that's an interactive common that it's

00:16:47,560 --> 00:16:52,900
going to ask you the properties the type

00:16:50,950 --> 00:16:56,080
of those properties and some

00:16:52,900 --> 00:16:57,880
characteristics of those properties we

00:16:56,080 --> 00:17:00,610
are going to see that in the next slide

00:16:57,880 --> 00:17:02,860
then when you do that if you want you

00:17:00,610 --> 00:17:05,230
can edit your entity you can have

00:17:02,860 --> 00:17:06,820
properties you can add more annotation

00:17:05,230 --> 00:17:11,230
you can add every function that you

00:17:06,820 --> 00:17:13,690
require and that's all obviously you can

00:17:11,230 --> 00:17:15,910
also add functions to the repository

00:17:13,690 --> 00:17:20,980
that it generates if that's necessary

00:17:15,910 --> 00:17:23,260
for you this is how it looks you invoke

00:17:20,980 --> 00:17:25,930
the common it does you for the name of

00:17:23,260 --> 00:17:29,470
the entity then for the property name

00:17:25,930 --> 00:17:33,570
the field type and in this case I said

00:17:29,470 --> 00:17:37,540
it was a string so the filling is this

00:17:33,570 --> 00:17:39,730
funeral yes or no and it says hey I

00:17:37,540 --> 00:17:43,000
created this file or hey I updated this

00:17:39,730 --> 00:17:45,010
file finally when you finish doing this

00:17:43,000 --> 00:17:47,080
it says

00:17:45,010 --> 00:17:50,910
next when you are ready create a

00:17:47,080 --> 00:17:53,770
migration with make column migration so

00:17:50,910 --> 00:17:55,450
let's create a migration it's just a

00:17:53,770 --> 00:17:59,230
matter of ruining that common I did

00:17:55,450 --> 00:17:59,820
create you the migration classes that's

00:17:59,230 --> 00:18:03,100
all

00:17:59,820 --> 00:18:06,610
it now says next review a new migration

00:18:03,100 --> 00:18:09,600
then run the migration using doctrine

00:18:06,610 --> 00:18:14,610
column migrations column migrate to

00:18:09,600 --> 00:18:17,800
update your database schema pretty easy

00:18:14,610 --> 00:18:20,710
then we are going to create our

00:18:17,800 --> 00:18:24,580
controller this is a class that should

00:18:20,710 --> 00:18:27,100
be under SRC enlarged controller and for

00:18:24,580 --> 00:18:29,470
this specific application we are going

00:18:27,100 --> 00:18:32,890
to make that class extends from false

00:18:29,470 --> 00:18:35,530
breast bundle controller false rest

00:18:32,890 --> 00:18:38,080
controller for the functions naming we

00:18:35,530 --> 00:18:40,050
are following the conventions specified

00:18:38,080 --> 00:18:43,750
in the documentation in order to get

00:18:40,050 --> 00:18:46,840
automatic routing generation so for

00:18:43,750 --> 00:18:50,140
example we have an entity named notes

00:18:46,840 --> 00:18:53,920
and we want to create the endpoint to

00:18:50,140 --> 00:18:57,670
get one note so you pass the note ID and

00:18:53,920 --> 00:18:59,710
you get that specific note so the naming

00:18:57,670 --> 00:19:04,090
that I should give to the function is

00:18:59,710 --> 00:19:08,410
get note action the team this is how

00:19:04,090 --> 00:19:11,830
nelmieux API documentation looks like so

00:19:08,410 --> 00:19:14,350
you are saying this is a get method you

00:19:11,830 --> 00:19:18,400
are setting security it's name bitter

00:19:14,350 --> 00:19:21,730
like we did in the bundle configuration

00:19:18,400 --> 00:19:25,210
you said tax you can specify the

00:19:21,730 --> 00:19:28,150
responses and the parameters and that's

00:19:25,210 --> 00:19:31,770
all what the bundle needs we are going

00:19:28,150 --> 00:19:34,990
to see how it looks in a few moments and

00:19:31,770 --> 00:19:38,230
this note here that the parameter we are

00:19:34,990 --> 00:19:42,910
saying it's impasse and that it's type

00:19:38,230 --> 00:19:45,790
integer so let's see a function it's

00:19:42,910 --> 00:19:48,100
name get node action since the parameter

00:19:45,790 --> 00:19:51,010
is in path so the parameter is received

00:19:48,100 --> 00:19:53,380
as a function argument so do you have it

00:19:51,010 --> 00:19:56,110
here you can do all the logic that you

00:19:53,380 --> 00:19:56,880
need to do there for example if you need

00:19:56,110 --> 00:19:59,400
you can throw

00:19:56,880 --> 00:20:02,610
exceptions here I'm throwing a photo for

00:19:59,400 --> 00:20:05,030
exception note not fun Sheeran throwing

00:20:02,610 --> 00:20:08,610
a full of three exception acciden ayat

00:20:05,030 --> 00:20:10,980
if everything is okay I can call the

00:20:08,610 --> 00:20:13,140
view phones the view function to create

00:20:10,980 --> 00:20:19,860
my bill and then I can't return the view

00:20:13,140 --> 00:20:23,340
I'm here and return in JSON here note is

00:20:19,860 --> 00:20:26,610
my note entity and we don't need doing

00:20:23,340 --> 00:20:31,320
this and we turning that entity in JSON

00:20:26,610 --> 00:20:36,630
so that's great so let's put all

00:20:31,320 --> 00:20:41,880
together how does this look this is the

00:20:36,630 --> 00:20:44,490
main screen for note sorry for nameö API

00:20:41,880 --> 00:20:48,000
doc bundle here we have an authorized

00:20:44,490 --> 00:20:51,090
bottom and you can see I hope you can

00:20:48,000 --> 00:20:53,490
see there is a lock icon here we have

00:20:51,090 --> 00:20:56,280
the login endpoint and here are the

00:20:53,490 --> 00:20:59,430
notes and pin you can see there is no

00:20:56,280 --> 00:21:02,880
log iron not no lock icon in the logging

00:20:59,430 --> 00:21:06,450
endpoint and there is lock icon in all

00:21:02,880 --> 00:21:09,090
of the other endpoints this lock icon is

00:21:06,450 --> 00:21:11,340
open it means we have not authenticated

00:21:09,090 --> 00:21:13,050
to the API so if we are going to use

00:21:11,340 --> 00:21:18,000
that we are going to get exciting night

00:21:13,050 --> 00:21:23,100
so don't do that so let's use this one

00:21:18,000 --> 00:21:25,860
first it asks you for the credentials

00:21:23,100 --> 00:21:29,340
this is all of this is happening in the

00:21:25,860 --> 00:21:32,220
nelmieux API doc bundle so you can test

00:21:29,340 --> 00:21:34,800
the API using the same bundle and that's

00:21:32,220 --> 00:21:38,040
what we did here so it's really really

00:21:34,800 --> 00:21:40,890
great so for example it's asking you for

00:21:38,040 --> 00:21:44,460
the username and the password

00:21:40,890 --> 00:21:47,310
do you click execute here you go here

00:21:44,460 --> 00:21:50,580
you get the Cure equivalent common the

00:21:47,310 --> 00:21:53,790
response body you can see here is a

00:21:50,580 --> 00:21:58,470
token variable so you copy that token

00:21:53,790 --> 00:22:00,810
that's your JSON web token and now you

00:21:58,470 --> 00:22:03,900
can click authorize do you remember the

00:22:00,810 --> 00:22:08,730
button that was here and it gives you

00:22:03,900 --> 00:22:10,500
this pop-up you are giving the value the

00:22:08,730 --> 00:22:14,670
value is the token that you

00:22:10,500 --> 00:22:16,710
just God but prefix with bitter and then

00:22:14,670 --> 00:22:19,920
you click authorize once you click

00:22:16,710 --> 00:22:23,160
authorize you can click done and now all

00:22:19,920 --> 00:22:27,120
of the lock icons are closed that means

00:22:23,160 --> 00:22:29,160
you can use those endpoints for example

00:22:27,120 --> 00:22:33,390
the endpoint that we just created was a

00:22:29,160 --> 00:22:36,140
lash API a last note a last note ID so I

00:22:33,390 --> 00:22:39,870
entered the node ID and click execute

00:22:36,140 --> 00:22:42,900
and we get this again the clear

00:22:39,870 --> 00:22:45,180
equivalent common the request URL and

00:22:42,900 --> 00:22:47,670
the response body

00:22:45,180 --> 00:22:50,100
it contains the ID the title the body

00:22:47,670 --> 00:22:53,070
that's every property that our notes

00:22:50,100 --> 00:22:56,520
entity have and the user because our

00:22:53,070 --> 00:22:59,970
notes entity also have a user property

00:22:56,520 --> 00:23:02,190
and that user property have all of the

00:22:59,970 --> 00:23:05,760
property of the user this may not be

00:23:02,190 --> 00:23:08,550
convenient for example it also has the

00:23:05,760 --> 00:23:10,890
password hash but it has the password so

00:23:08,550 --> 00:23:13,290
we could remove some of these fields if

00:23:10,890 --> 00:23:15,680
we want to do that and it's pretty easy

00:23:13,290 --> 00:23:15,680
to do

00:23:16,910 --> 00:23:23,730
do you remember is the admin bundle here

00:23:20,400 --> 00:23:26,160
is how it looks this is the index page

00:23:23,730 --> 00:23:29,550
for the user entity you have search if

00:23:26,160 --> 00:23:32,460
you have so many users you can add user

00:23:29,550 --> 00:23:34,650
here if you scroll to the right I can do

00:23:32,460 --> 00:23:37,980
that because this is a screenshot you

00:23:34,650 --> 00:23:40,020
will find edit and delete buttons some

00:23:37,980 --> 00:23:42,780
properties can be seen yet dearly here

00:23:40,020 --> 00:23:45,600
the ones that are billions so it's

00:23:42,780 --> 00:23:49,800
really really great and really easy to

00:23:45,600 --> 00:23:52,110
configure so some final talks

00:23:49,800 --> 00:23:54,750
yeah this is the best symphony version

00:23:52,110 --> 00:23:56,520
ever it was released a couple of months

00:23:54,750 --> 00:24:00,900
ago and it's really really great

00:23:56,520 --> 00:24:04,230
it's really easy to use there is most so

00:24:00,900 --> 00:24:06,870
much ordering config files so where else

00:24:04,230 --> 00:24:10,560
can I say give it a try if you have time

00:24:06,870 --> 00:24:13,320
all the code examples that we use in

00:24:10,560 --> 00:24:15,690
this presentation can be found at this

00:24:13,320 --> 00:24:20,490
github wrapper so feel free to check it

00:24:15,690 --> 00:24:23,720
out and I don't think we have time for

00:24:20,490 --> 00:24:26,710
questions we have about one minute so

00:24:23,720 --> 00:24:30,830
be around here if you have any question

00:24:26,710 --> 00:24:35,049
it's 15 15 so I think that's all the

00:24:30,830 --> 00:24:37,940
time that I had yes when you invite

00:24:35,049 --> 00:24:40,789
there will be DrupalCon Costa Rica in

00:24:37,940 --> 00:24:43,720
August third and four so it would be a

00:24:40,789 --> 00:24:49,549
nice opportunity to go to Costa Rica

00:24:43,720 --> 00:24:53,299
we'll be waiting for you and remember

00:24:49,549 --> 00:24:55,940
contribution is Prince on Friday and you

00:24:53,299 --> 00:24:59,419
clan about my decision and evaluate they

00:24:55,940 --> 00:25:00,900
can't the con in those links so thank

00:24:59,419 --> 00:25:09,809
you very much

00:25:00,900 --> 00:25:09,809

YouTube URL: https://www.youtube.com/watch?v=g6wrBxWlZUI


