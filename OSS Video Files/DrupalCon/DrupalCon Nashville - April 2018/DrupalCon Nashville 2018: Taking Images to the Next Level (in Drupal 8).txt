Title: DrupalCon Nashville 2018: Taking Images to the Next Level (in Drupal 8)
Publication date: 2018-04-11
Playlist: DrupalCon Nashville - April 2018
Description: 
	Quit fighting with designers and clients over image restrictions; fight Drupal instead, and win!

In Drupal 8, core provides more image functionality than ever, but what if you want to go beyond the basics? What if you need more choices? This session will cover a variety of ways to bend Drupal images to your will, including:



Uploading and rendering SVG images via custom and/or contrib modules (and the security implications therein) 
Creating a bitmap fallback for your SVG field
Letting content creators choose from multiple aspect ratios and/or image styles
Using contrib modules to preserve the most important parts of your image (and ways to get around it when that's not an option)
Setting completely separate images as sources in a responsive picture tag
Retaining your will to live (and your code functionality) when the Media module comes along and throws a wrench in everything we just spoke about.


To get the most out of this session, attendees should be familiar with basic theming and site-building.

Code, config, and slides can now be seen at https://github.com/Abby805/d8-images.
Captions: 
	00:00:11,300 --> 00:00:20,210
alright let's go ahead and get started

00:00:13,290 --> 00:00:20,210
so hi everyone here for intro to Joomla

00:00:21,020 --> 00:00:29,460
good answer so hi I'm Abbi Milberg I'm a

00:00:26,130 --> 00:00:32,070
front-end architect at 3rd & Grove which

00:00:29,460 --> 00:00:35,520
is a full service digital agency

00:00:32,070 --> 00:00:37,800
primarily specializing in drupal and

00:00:35,520 --> 00:00:41,309
we're here today to talk about some

00:00:37,800 --> 00:00:43,350
things you can do in drupal 8 to make

00:00:41,309 --> 00:00:48,480
images a little more interesting and

00:00:43,350 --> 00:00:51,930
give a little more control so our goal

00:00:48,480 --> 00:00:53,489
here and a couple bullet points we want

00:00:51,930 --> 00:00:55,610
to give our content creators a little

00:00:53,489 --> 00:00:59,760
more control we want to keep the site

00:00:55,610 --> 00:01:01,320
consistent performant and secure so I

00:00:59,760 --> 00:01:02,940
think we've all had that project where

00:01:01,320 --> 00:01:06,030
the client wants a lot of control over

00:01:02,940 --> 00:01:09,600
images and then that winds up taking the

00:01:06,030 --> 00:01:12,600
form of putting it in CK editor and it's

00:01:09,600 --> 00:01:15,030
either 600 pixels or 6,000 pixels wide

00:01:12,600 --> 00:01:16,710
or its dimensions that don't go with a

00:01:15,030 --> 00:01:18,979
site it doesn't have margins all of

00:01:16,710 --> 00:01:21,840
these things right so we don't want that

00:01:18,979 --> 00:01:23,880
we do want some consistency but we still

00:01:21,840 --> 00:01:26,220
want to give the client or the content

00:01:23,880 --> 00:01:28,590
editor that power as well as the

00:01:26,220 --> 00:01:31,979
designers which has also driven a lot of

00:01:28,590 --> 00:01:34,470
this in my experience so today we're

00:01:31,979 --> 00:01:37,229
just going to talk about a couple

00:01:34,470 --> 00:01:38,970
examples of ways that I found over a

00:01:37,229 --> 00:01:40,890
number of projects to do that and

00:01:38,970 --> 00:01:44,009
hopefully you'll be able to take home

00:01:40,890 --> 00:01:46,649
the code see the config and use some of

00:01:44,009 --> 00:01:49,500
that and grown projects this is going to

00:01:46,649 --> 00:01:51,810
be pretty light on slides it's going to

00:01:49,500 --> 00:01:54,119
be very heavy on code but I'm gonna make

00:01:51,810 --> 00:01:56,640
the code and the config in a feature all

00:01:54,119 --> 00:01:59,790
available on github after the talk so

00:01:56,640 --> 00:02:01,829
you don't have to worry about trying to

00:01:59,790 --> 00:02:05,509
copy down every pre-process function

00:02:01,829 --> 00:02:05,509
line for line while you're sitting here

00:02:07,720 --> 00:02:14,720
okay just as a brief sort of to frame

00:02:11,720 --> 00:02:17,810
the issue Drupal 8 has given us a lot of

00:02:14,720 --> 00:02:20,480
power with images that we never had in

00:02:17,810 --> 00:02:22,640
core before you've got breakpoint in

00:02:20,480 --> 00:02:26,630
core you've got responsive images in

00:02:22,640 --> 00:02:29,120
core you've got media in core with the

00:02:26,630 --> 00:02:31,730
help of some contribute once you get

00:02:29,120 --> 00:02:33,470
that set up it's really powerful so

00:02:31,730 --> 00:02:36,950
these things give us a great foundation

00:02:33,470 --> 00:02:38,780
to build upon even from the get-go that

00:02:36,950 --> 00:02:42,770
we didn't have out of the box in Drupal

00:02:38,780 --> 00:02:46,989
7 again the question here should all

00:02:42,770 --> 00:02:49,310
images be treated the same when you're

00:02:46,989 --> 00:02:52,430
you know when your client your author

00:02:49,310 --> 00:02:54,860
has a blog post and an image field to go

00:02:52,430 --> 00:02:58,130
with it do they all really need the same

00:02:54,860 --> 00:03:02,510
crop you know does that make sense

00:02:58,130 --> 00:03:03,620
for all content probably not they don't

00:03:02,510 --> 00:03:08,720
you know so we're going to give them

00:03:03,620 --> 00:03:13,580
some ways to fix that the first example

00:03:08,720 --> 00:03:17,500
I'm going to go over is on using a CSS

00:03:13,580 --> 00:03:21,350
class generated by a list field to

00:03:17,500 --> 00:03:24,440
control the spacing of your images so

00:03:21,350 --> 00:03:27,049
I've used this primarily when I've been

00:03:24,440 --> 00:03:29,420
working with grids and it works with

00:03:27,049 --> 00:03:32,180
small images generally you know things

00:03:29,420 --> 00:03:35,090
like logos things like SVG's things that

00:03:32,180 --> 00:03:37,640
you may not want to ever crop because

00:03:35,090 --> 00:03:38,870
you don't know they're you know you

00:03:37,640 --> 00:03:42,829
don't want to cut off somebody's face

00:03:38,870 --> 00:03:44,570
part of a logo that sort of concern so

00:03:42,829 --> 00:03:50,180
small images where it may be appropriate

00:03:44,570 --> 00:03:55,970
to use CSS so I'll go over an example of

00:03:50,180 --> 00:03:58,510
this so I've uploaded here this is an

00:03:55,970 --> 00:04:01,040
example of an image grid without

00:03:58,510 --> 00:04:03,230
anything in place we've got an image

00:04:01,040 --> 00:04:07,670
style applied that is making all of

00:04:03,230 --> 00:04:09,709
these images the same width I think

00:04:07,670 --> 00:04:13,430
somewhere my design lead who's not here

00:04:09,709 --> 00:04:15,260
just shuddered in horror because those

00:04:13,430 --> 00:04:18,049
don't look even even though according to

00:04:15,260 --> 00:04:20,419
the rules of you know the same width

00:04:18,049 --> 00:04:20,650
they are and you also wouldn't want to

00:04:20,419 --> 00:04:22,240
put

00:04:20,650 --> 00:04:25,030
crop on them you wouldn't want a scaling

00:04:22,240 --> 00:04:26,650
crop style where you saw half of a can

00:04:25,030 --> 00:04:30,990
or half of a football that wouldn't make

00:04:26,650 --> 00:04:35,080
any sense so the effect we're going for

00:04:30,990 --> 00:04:39,729
is something more like that and this is

00:04:35,080 --> 00:04:42,160
a very rudimentary example but it's

00:04:39,729 --> 00:04:46,900
pretty it's pretty easy to pull off with

00:04:42,160 --> 00:04:48,400
a few lines of code so I'm going to show

00:04:46,900 --> 00:04:50,800
you what this looks like from the

00:04:48,400 --> 00:04:52,419
author's perspective and then we can dig

00:04:50,800 --> 00:04:55,949
a little deeper into the config and the

00:04:52,419 --> 00:04:55,949
pre process functions involved

00:05:00,470 --> 00:05:05,150
so this is the know that holds the

00:05:02,390 --> 00:05:09,890
aerosol can image you saw before I've

00:05:05,150 --> 00:05:12,500
created a drop down field here where you

00:05:09,890 --> 00:05:15,800
can choose its width is it default is it

00:05:12,500 --> 00:05:18,110
wide is it arrow and that's all that

00:05:15,800 --> 00:05:23,510
that is from the perspective of the

00:05:18,110 --> 00:05:30,920
content editor if we go into structure

00:05:23,510 --> 00:05:33,590
here you can see this is really just a

00:05:30,920 --> 00:05:41,380
plain image filled in a list text field

00:05:33,590 --> 00:05:43,820
and sorry and for display of the teaser

00:05:41,380 --> 00:05:46,850
we're rendering the image orientation as

00:05:43,820 --> 00:05:48,590
a key now you could you could render it

00:05:46,850 --> 00:05:54,050
however you wanted but the technique

00:05:48,590 --> 00:05:58,220
that I'm using here is all we're doing

00:05:54,050 --> 00:06:03,890
is with this pre pre process function on

00:05:58,220 --> 00:06:05,600
the node we are we're getting that the

00:06:03,890 --> 00:06:09,500
value of that field with the image

00:06:05,600 --> 00:06:12,890
orientation and we're adding it along

00:06:09,500 --> 00:06:16,130
with an orientation modifier to the

00:06:12,890 --> 00:06:19,880
attribute the classes array and then

00:06:16,130 --> 00:06:22,130
we're hiding the field itself and in

00:06:19,880 --> 00:06:26,750
this instance all I have that doesn't

00:06:22,130 --> 00:06:28,220
even require a custom Conte now that

00:06:26,750 --> 00:06:30,530
actually doesn't even require anything

00:06:28,220 --> 00:06:33,790
custom in the template all i've got

00:06:30,530 --> 00:06:40,220
going on here is some really basic CSS

00:06:33,790 --> 00:06:42,260
max with 40 75 90 in the you know

00:06:40,220 --> 00:06:44,690
obviously those could be modified to

00:06:42,260 --> 00:06:46,790
your exact purposes and in this case I

00:06:44,690 --> 00:06:49,040
also did apply an image style because

00:06:46,790 --> 00:06:50,600
when we're using CSS to make things

00:06:49,040 --> 00:06:53,450
smaller we still don't want to be making

00:06:50,600 --> 00:06:56,630
that 600 you know that 6,000 pixel pixel

00:06:53,450 --> 00:06:59,240
image smaller so I am applying an image

00:06:56,630 --> 00:07:01,700
style here which is just a scale a scale

00:06:59,240 --> 00:07:04,220
style down to 300 pixels something along

00:07:01,700 --> 00:07:07,000
those lines so that it's not taking a

00:07:04,220 --> 00:07:07,000
hit on performance

00:07:08,120 --> 00:07:12,410
so that has that has helped us a lot

00:07:10,550 --> 00:07:14,660
especially on the homepage of our own

00:07:12,410 --> 00:07:17,750
site we had a big grid of client logos

00:07:14,660 --> 00:07:23,449
and you know when it looks when it looks

00:07:17,750 --> 00:07:26,210
like this it's just not good so that one

00:07:23,449 --> 00:07:29,210
is probably the simplest example I'm

00:07:26,210 --> 00:07:31,850
going to show the next one I want to

00:07:29,210 --> 00:07:35,419
show is letting the user choose the

00:07:31,850 --> 00:07:37,040
actual image style from a drop-down and

00:07:35,419 --> 00:07:39,290
by this I mean you know predefined

00:07:37,040 --> 00:07:44,120
Drupal image styles that you're used to

00:07:39,290 --> 00:07:49,850
and we're using a similar technique well

00:07:44,120 --> 00:07:52,790
I'll show you it in an example first the

00:07:49,850 --> 00:07:54,889
screen is a little small but I've got my

00:07:52,790 --> 00:07:57,200
image field here and I've also done one

00:07:54,889 --> 00:07:59,450
as media just I'll demonstrate the code

00:07:57,200 --> 00:08:02,600
for both if you're using a generic image

00:07:59,450 --> 00:08:04,280
field or a media field and I've given it

00:08:02,600 --> 00:08:06,710
to options one that I'm calling

00:08:04,280 --> 00:08:14,500
landscape one that I'm calling portrait

00:08:06,710 --> 00:08:14,500
and when we get to the structure of that

00:08:17,710 --> 00:08:21,670
you can see that the fields themselves

00:08:19,540 --> 00:08:28,420
are pretty much as you would expect and

00:08:21,670 --> 00:08:32,500
when we manage the display we're using

00:08:28,420 --> 00:08:35,440
default on this one we've got the image

00:08:32,500 --> 00:08:39,520
itself rendering as an image and I'm

00:08:35,440 --> 00:08:42,880
applying a default style to it just in

00:08:39,520 --> 00:08:48,220
case we've also got the image style

00:08:42,880 --> 00:08:50,860
value as a key and I've created again a

00:08:48,220 --> 00:08:53,380
media field here it's important to note

00:08:50,860 --> 00:08:56,560
there are lots of ways to use media

00:08:53,380 --> 00:08:59,020
fields with their own display modes but

00:08:56,560 --> 00:09:01,150
in this instance the simplest solution

00:08:59,020 --> 00:09:03,400
for me has been to render it as a

00:09:01,150 --> 00:09:05,020
thumbnail which lets you apply an image

00:09:03,400 --> 00:09:11,040
style right here at the content-type

00:09:05,020 --> 00:09:11,040
level so if we go into the code here

00:09:16,910 --> 00:09:22,220
let's take this one at a time so just

00:09:20,030 --> 00:09:25,160
like we did in the earlier example we're

00:09:22,220 --> 00:09:32,480
getting the value of the image style

00:09:25,160 --> 00:09:34,160
itself out of the key there and we we're

00:09:32,480 --> 00:09:35,810
using a pre process function where for

00:09:34,160 --> 00:09:39,350
both that image field and that image

00:09:35,810 --> 00:09:42,560
media field we're able to simply replace

00:09:39,350 --> 00:09:44,360
the image style and this doesn't require

00:09:42,560 --> 00:09:48,620
any templates this doesn't require

00:09:44,360 --> 00:09:53,480
anything more complicated so if we go

00:09:48,620 --> 00:10:01,160
back to the browser and I change this to

00:09:53,480 --> 00:10:03,280
landscape now it's landscape both of

00:10:01,160 --> 00:10:03,280
them

00:10:11,060 --> 00:10:19,520
that's the slide for everything I just

00:10:12,650 --> 00:10:21,340
said okay so the next one is where we

00:10:19,520 --> 00:10:26,480
start to get a little trickier here

00:10:21,340 --> 00:10:29,210
so in Drupal's picture module with the

00:10:26,480 --> 00:10:32,570
responsive images we have this great

00:10:29,210 --> 00:10:34,580
ability to apply different image styles

00:10:32,570 --> 00:10:37,820
at different breakpoints and we can even

00:10:34,580 --> 00:10:40,160
use modules like focal point to set the

00:10:37,820 --> 00:10:43,490
exact spot that we want to make sure

00:10:40,160 --> 00:10:44,930
doesn't get cropped in each instance but

00:10:43,490 --> 00:10:48,320
what if we want to do a completely

00:10:44,930 --> 00:10:52,940
different image at different breakpoints

00:10:48,320 --> 00:10:55,040
so has everyone lost the battle of no

00:10:52,940 --> 00:10:59,060
you shouldn't put the text on the image

00:10:55,040 --> 00:11:00,770
for your website hero right so that's

00:10:59,060 --> 00:11:02,570
one where the image style for the

00:11:00,770 --> 00:11:09,980
smaller one doesn't work I don't like

00:11:02,570 --> 00:11:13,640
doing it I've I doesn't matter so this

00:11:09,980 --> 00:11:15,890
is a way to basically let the user fill

00:11:13,640 --> 00:11:23,750
in multiple fields for those different

00:11:15,890 --> 00:11:25,820
break points if they exist so I will say

00:11:23,750 --> 00:11:28,760
a thing about accessibility in this case

00:11:25,820 --> 00:11:31,340
this is not semantically correct if your

00:11:28,760 --> 00:11:34,130
images are drastically different from

00:11:31,340 --> 00:11:36,380
each other in terms of content you know

00:11:34,130 --> 00:11:39,080
or if the same alt text can't be

00:11:36,380 --> 00:11:41,390
reasonably applied to both images this

00:11:39,080 --> 00:11:43,730
isn't what you should use in that case

00:11:41,390 --> 00:11:45,950
this is for cases where you've got your

00:11:43,730 --> 00:11:49,340
banner image and you know they've made

00:11:45,950 --> 00:11:51,170
the text centered and bolder on mobile

00:11:49,340 --> 00:11:54,020
or things along that line if it's

00:11:51,170 --> 00:11:56,390
totally different that's not what the

00:11:54,020 --> 00:11:59,570
picture element is for so please just

00:11:56,390 --> 00:12:03,530
keep accessibility in mind in this

00:11:59,570 --> 00:12:04,730
example I'm using too drastically I say

00:12:03,530 --> 00:12:06,290
that because I'm about to use to

00:12:04,730 --> 00:12:09,890
drastically different images just to

00:12:06,290 --> 00:12:13,520
demonstrate what this does so we're

00:12:09,890 --> 00:12:15,620
getting smaller and now you've got a

00:12:13,520 --> 00:12:19,700
completely different image there from a

00:12:15,620 --> 00:12:22,700
different field from the content editors

00:12:19,700 --> 00:12:24,000
standpoint all this looks like is they

00:12:22,700 --> 00:12:27,070
have a large image feel

00:12:24,000 --> 00:12:29,230
they have a small image field you could

00:12:27,070 --> 00:12:32,080
add more breakpoints to this if you

00:12:29,230 --> 00:12:33,940
wanted using the same principles I've

00:12:32,080 --> 00:12:36,610
chosen to make the small image field

00:12:33,940 --> 00:12:40,870
optional normally because I find that

00:12:36,610 --> 00:12:42,460
making fields required comes back to

00:12:40,870 --> 00:12:47,830
bite you if they don't absolutely need

00:12:42,460 --> 00:12:51,190
to be so this gets a little trickier in

00:12:47,830 --> 00:12:58,750
the pre process but we will walk through

00:12:51,190 --> 00:13:01,630
it so in this instance yeah so first of

00:12:58,750 --> 00:13:03,460
all the the large image field I made

00:13:01,630 --> 00:13:05,200
required I made at least one of the

00:13:03,460 --> 00:13:06,880
images field it's required although

00:13:05,200 --> 00:13:08,710
again you could modify this you know

00:13:06,880 --> 00:13:12,130
just to skip over all of it if neither

00:13:08,710 --> 00:13:15,130
of them was filled in so I'm loading

00:13:12,130 --> 00:13:19,960
using the image style load function the

00:13:15,130 --> 00:13:23,740
hero wide image style of the URI of that

00:13:19,960 --> 00:13:28,510
image field since the small image field

00:13:23,740 --> 00:13:31,660
is optional I'm using an if-else

00:13:28,510 --> 00:13:35,950
statement to check for it and then set

00:13:31,660 --> 00:13:40,590
it appropriately so if it is set we are

00:13:35,950 --> 00:13:43,380
loading that images that image with the

00:13:40,590 --> 00:13:46,840
or that images URL with the narrow

00:13:43,380 --> 00:13:50,470
breakpoint or sorry the narrow image

00:13:46,840 --> 00:13:53,440
style and if the small field is not

00:13:50,470 --> 00:13:56,350
filled in we are applying the narrow

00:13:53,440 --> 00:13:58,930
image style to that larger image just

00:13:56,350 --> 00:14:02,920
like it would be if you did break point

00:13:58,930 --> 00:14:05,910
functionality out of the box and now

00:14:02,920 --> 00:14:09,040
we're passing these URLs to the template

00:14:05,910 --> 00:14:10,180
it's it's not my preference to do this

00:14:09,040 --> 00:14:12,940
sort of thing in the template but I

00:14:10,180 --> 00:14:15,490
haven't found a reliable way to build

00:14:12,940 --> 00:14:19,210
these picture tags in a pre process

00:14:15,490 --> 00:14:21,970
function if anyone you know can improve

00:14:19,210 --> 00:14:25,390
on that that'd be great I'm also passing

00:14:21,970 --> 00:14:27,370
the alt text of the large image field as

00:14:25,390 --> 00:14:30,810
I said we want to make sure we're using

00:14:27,370 --> 00:14:33,760
alt text the picture element in HTML

00:14:30,810 --> 00:14:35,430
doesn't allow for different alt text of

00:14:33,760 --> 00:14:38,220
the different sizes

00:14:35,430 --> 00:14:40,470
so right here I've in the content-type

00:14:38,220 --> 00:14:42,930
made alt text required for the large

00:14:40,470 --> 00:14:46,650
image but hidden it all together for the

00:14:42,930 --> 00:14:49,890
small one so this one we are going to go

00:14:46,650 --> 00:14:54,240
into the template and just build our

00:14:49,890 --> 00:14:58,740
picture tag oh I left out one step which

00:14:54,240 --> 00:15:00,690
is the break point so Drupal 8 also has

00:14:58,740 --> 00:15:04,290
breakpoints built in that you can use

00:15:00,690 --> 00:15:06,630
across modules across themes you know

00:15:04,290 --> 00:15:08,670
you use them if you're doing responsive

00:15:06,630 --> 00:15:11,640
images in the quote/unquote

00:15:08,670 --> 00:15:15,000
out-of-the-box way so we're gonna use

00:15:11,640 --> 00:15:16,470
those same those same breakpoints and

00:15:15,000 --> 00:15:19,620
leverage them in this so that we can

00:15:16,470 --> 00:15:21,480
keep it consistent across our site you

00:15:19,620 --> 00:15:24,030
you could hypothetically put this

00:15:21,480 --> 00:15:26,340
directly in the theme but there's

00:15:24,030 --> 00:15:30,120
there's not much of a reason to so these

00:15:26,340 --> 00:15:33,450
last few lines in this pre process

00:15:30,120 --> 00:15:37,560
function are to get all of the

00:15:33,450 --> 00:15:39,750
breakpoints out of that hero image group

00:15:37,560 --> 00:15:41,520
that I've created here now this happens

00:15:39,750 --> 00:15:45,590
to be minimal because I only needed one

00:15:41,520 --> 00:15:48,090
for the demo and set it as a variable

00:15:45,590 --> 00:15:53,240
set that get the media query set it as a

00:15:48,090 --> 00:15:56,130
variable to pass to the template and now

00:15:53,240 --> 00:15:59,280
what we have is a picture tag like

00:15:56,130 --> 00:16:02,120
you've probably seen before only it's

00:15:59,280 --> 00:16:02,120
using the two fields

00:16:12,840 --> 00:16:15,740
cropping

00:16:15,890 --> 00:16:25,990
who could tell who it is all right so

00:16:27,190 --> 00:16:32,540
yeah so there's a lot going on with

00:16:29,950 --> 00:16:35,029
cropping and ripple and part of the

00:16:32,540 --> 00:16:36,529
reason we're doing all of you know

00:16:35,029 --> 00:16:39,920
providing all of these choices around

00:16:36,529 --> 00:16:43,010
image styles and everything are to

00:16:39,920 --> 00:16:45,399
alleviate some of those situations where

00:16:43,010 --> 00:16:48,200
you're forced to crop the image that's

00:16:45,399 --> 00:16:51,380
you know ten people in a row and you

00:16:48,200 --> 00:16:54,220
have to crop it into a tall narrow image

00:16:51,380 --> 00:16:56,930
style and that just messes with things

00:16:54,220 --> 00:16:58,970
but sometimes you do need a style so

00:16:56,930 --> 00:17:02,600
you're going to talk about several ways

00:16:58,970 --> 00:17:06,939
to handle things to get around some of

00:17:02,600 --> 00:17:06,939
the issues that come up with that

00:17:13,550 --> 00:17:19,520
so has everyone used the focal point

00:17:16,190 --> 00:17:21,800
module if yeah great so if you haven't

00:17:19,520 --> 00:17:23,630
used the focal point module I highly

00:17:21,800 --> 00:17:28,520
recommend it I've been using it since

00:17:23,630 --> 00:17:36,620
Drupal 7 what it lets you do I will show

00:17:28,520 --> 00:17:38,060
really quickly there seems no caching

00:17:36,620 --> 00:17:40,210
hits you at the worst time that's a

00:17:38,060 --> 00:17:40,210
night

00:17:47,590 --> 00:17:56,770
there we go okay so if you can see maybe

00:17:54,100 --> 00:17:58,929
I'll try and zoom in on this a bit can

00:17:56,770 --> 00:18:02,260
everyone see the plus sign here on the

00:17:58,929 --> 00:18:04,480
middle of the image so with a focal

00:18:02,260 --> 00:18:08,350
point image style when you upload the

00:18:04,480 --> 00:18:10,840
image it lets you drag this little curse

00:18:08,350 --> 00:18:13,690
this little crosshair around on the

00:18:10,840 --> 00:18:17,740
image itself and what that tells it is

00:18:13,690 --> 00:18:20,169
that on any focal point image style it

00:18:17,740 --> 00:18:22,830
should retain that part when it crops so

00:18:20,169 --> 00:18:25,149
if I use a scale and crop image style

00:18:22,830 --> 00:18:27,240
normally in Drupal by default that'll

00:18:25,149 --> 00:18:29,950
just scale and crop towards the center

00:18:27,240 --> 00:18:32,169
which doesn't help me if somebody's face

00:18:29,950 --> 00:18:33,909
is on the left so in this sort of

00:18:32,169 --> 00:18:37,360
instance I could tell it to crop on the

00:18:33,909 --> 00:18:46,690
left so if I do that here now and save

00:18:37,360 --> 00:18:47,710
it and wait for caches to clear you can

00:18:46,690 --> 00:18:49,240
see now that that picture has been

00:18:47,710 --> 00:18:55,000
cropped all the way over to the left

00:18:49,240 --> 00:18:58,480
where I put that so that's a great

00:18:55,000 --> 00:19:01,440
out-of-the-box or not it's a fantastic

00:18:58,480 --> 00:19:04,960
entry of module I've found it works

00:19:01,440 --> 00:19:08,200
incredibly well in great many situations

00:19:04,960 --> 00:19:10,750
I have however had some situations where

00:19:08,200 --> 00:19:15,309
we couldn't use the focal point module

00:19:10,750 --> 00:19:20,850
either because the clients company had

00:19:15,309 --> 00:19:23,020
very strict policies about contribs

00:19:20,850 --> 00:19:26,649
perhaps we were uploading a lot of

00:19:23,020 --> 00:19:28,270
images via a script and there was never

00:19:26,649 --> 00:19:31,090
going to be a person actually going

00:19:28,270 --> 00:19:34,750
through and picking those those focal

00:19:31,090 --> 00:19:37,630
points and sometimes if you're lucky in

00:19:34,750 --> 00:19:39,669
those cases you know the part of the

00:19:37,630 --> 00:19:41,919
image that you probably want to be kept

00:19:39,669 --> 00:19:45,399
more often maybe you know that people's

00:19:41,919 --> 00:19:47,140
faces tend to be towards the top or you

00:19:45,399 --> 00:19:50,140
know in these situations they're

00:19:47,140 --> 00:19:54,149
normally not ideal but if you want to

00:19:50,140 --> 00:19:57,549
systematically mimic the focal point

00:19:54,149 --> 00:19:58,810
functionality without having it you can

00:19:57,549 --> 00:20:02,320
try to do so

00:19:58,810 --> 00:20:04,120
so there's there this is a problem I've

00:20:02,320 --> 00:20:06,520
been having for a long a very long time

00:20:04,120 --> 00:20:08,140
and there's a couple approaches so when

00:20:06,520 --> 00:20:10,870
you're creating an image style in Drupal

00:20:08,140 --> 00:20:12,730
if you just create a crop style and I'm

00:20:10,870 --> 00:20:22,810
sure you've all done this if you create

00:20:12,730 --> 00:20:28,960
a crop style you can that's what I named

00:20:22,810 --> 00:20:31,000
them all right yeah you create a crop

00:20:28,960 --> 00:20:35,380
style you can choose your anchor point

00:20:31,000 --> 00:20:37,870
and it's great but if you create a scale

00:20:35,380 --> 00:20:40,900
and crop style you don't have that

00:20:37,870 --> 00:20:44,380
option so whatever one thinks at first

00:20:40,900 --> 00:20:47,490
myself included in many cases learned

00:20:44,380 --> 00:20:50,440
the hard way was well I'll just scale it

00:20:47,490 --> 00:20:53,880
to the width or height that I want and

00:20:50,440 --> 00:20:59,710
then I'll crop the other dimension right

00:20:53,880 --> 00:21:01,840
so what happens when your image is not

00:20:59,710 --> 00:21:04,990
the orientation that you assumed it

00:21:01,840 --> 00:21:10,260
would be does ever I'll show you real

00:21:04,990 --> 00:21:10,260
quick if anyone hasn't hasn't seen it

00:21:20,080 --> 00:21:28,420
so let's say what I really want my

00:21:22,060 --> 00:21:30,040
images to be is 300 wide by 400 tall and

00:21:28,420 --> 00:21:33,760
I'm assuming they're all coming to me as

00:21:30,040 --> 00:21:37,510
portrait oriented images right so I

00:21:33,760 --> 00:21:41,260
scaled them down to 300 wide and I

00:21:37,510 --> 00:21:44,680
cropped them to 400 tall which will let

00:21:41,260 --> 00:21:47,830
me choose my nice top anchor point and I

00:21:44,680 --> 00:21:54,010
get that really nice black box as a

00:21:47,830 --> 00:21:57,760
bonus feature yeah it's a thing it's a

00:21:54,010 --> 00:22:00,160
thing we've been there many times so how

00:21:57,760 --> 00:22:04,780
do you get around that situation you

00:22:00,160 --> 00:22:08,590
basically have what you have is you need

00:22:04,780 --> 00:22:10,450
different behaviors based on the

00:22:08,590 --> 00:22:13,420
dimensions of the image that the user

00:22:10,450 --> 00:22:15,720
has uploaded right it depends whether

00:22:13,420 --> 00:22:19,180
it's wider than it is tall or vice versa

00:22:15,720 --> 00:22:22,680
or possibly even a more specific ratio

00:22:19,180 --> 00:22:30,220
than that depending on your image size

00:22:22,680 --> 00:22:32,800
so what I've got here is a preprint some

00:22:30,220 --> 00:22:38,470
pre process function a pre process

00:22:32,800 --> 00:22:43,530
function that lets us detect what those

00:22:38,470 --> 00:22:46,300
dimensions are and then potentially

00:22:43,530 --> 00:22:51,060
potentially modify the image style as

00:22:46,300 --> 00:22:56,350
appropriate so in this case I'm fetching

00:22:51,060 --> 00:22:58,900
the value of the image field and it's

00:22:56,350 --> 00:23:01,000
height and width are actually right

00:22:58,900 --> 00:23:02,890
there in the array you don't need to do

00:23:01,000 --> 00:23:04,900
anything funky to calculate them or

00:23:02,890 --> 00:23:06,580
anything it's just the height and width

00:23:04,900 --> 00:23:09,670
of the image that was generated that was

00:23:06,580 --> 00:23:12,010
uploaded not cropped or anything the

00:23:09,670 --> 00:23:15,870
uploaded image and then we're just

00:23:12,010 --> 00:23:20,290
calculating a ratio here so in my

00:23:15,870 --> 00:23:22,870
example I I'm saying that I want in this

00:23:20,290 --> 00:23:25,600
example a square image stuff a square

00:23:22,870 --> 00:23:30,190
image at the end of the day so the ratio

00:23:25,600 --> 00:23:31,610
that I'm testing for is 1 but if I had

00:23:30,190 --> 00:23:34,910
other

00:23:31,610 --> 00:23:37,070
a different image ratio that I wanted as

00:23:34,910 --> 00:23:39,860
the outcome let's say I wanted a 2 to 3

00:23:37,070 --> 00:23:43,460
ratio what I would need to test for

00:23:39,860 --> 00:23:47,179
would be if it met that that 2 to 3

00:23:43,460 --> 00:23:55,760
ratio or if it went over does that make

00:23:47,179 --> 00:23:58,370
sense ok so I think you can see here I'm

00:23:55,760 --> 00:24:01,250
using the same technique I used above

00:23:58,370 --> 00:24:05,660
with swapping out image styles only now

00:24:01,250 --> 00:24:07,370
I'm testing for that ratio and the cool

00:24:05,660 --> 00:24:10,850
thing about this one is the user doesn't

00:24:07,370 --> 00:24:13,400
actually have to invite user any content

00:24:10,850 --> 00:24:15,110
editor they don't actually have to do

00:24:13,400 --> 00:24:16,580
anything to make this happen this isn't

00:24:15,110 --> 00:24:19,030
like the other examples where they had

00:24:16,580 --> 00:24:19,030
to choose

00:24:19,090 --> 00:24:25,610
it just happens automatically if you got

00:24:22,580 --> 00:24:28,250
pre-process so let's look at this

00:24:25,610 --> 00:24:34,510
example we've got a test image I've got

00:24:28,250 --> 00:24:38,330
a square image style applied to it and

00:24:34,510 --> 00:24:42,290
you can see when I uploaded that that

00:24:38,330 --> 00:24:51,760
was a landscape image now if I go back

00:24:42,290 --> 00:24:51,760
to my image Styles asdf

00:24:57,130 --> 00:25:08,380
so I had profile default and profile alt

00:25:04,110 --> 00:25:10,600
profile default is assuming you know I

00:25:08,380 --> 00:25:13,059
am assuming that that is a landscape

00:25:10,600 --> 00:25:13,780
image and that I want to crop it in from

00:25:13,059 --> 00:25:16,570
the center

00:25:13,780 --> 00:25:19,510
it'll be 400 by 400 crap and scale 400

00:25:16,570 --> 00:25:23,559
by 400 that's normal you know we can do

00:25:19,510 --> 00:25:25,900
that but in that pre-process function

00:25:23,559 --> 00:25:31,539
we're saying if it's taller than it is

00:25:25,900 --> 00:25:37,179
wide I want it to first scale the width

00:25:31,539 --> 00:25:42,100
to 400 and then crop up so this one is

00:25:37,179 --> 00:25:45,600
just cropping in as you would expect but

00:25:42,100 --> 00:25:45,600
if we switch it out for

00:25:56,310 --> 00:25:59,570
I already had one

00:26:07,150 --> 00:26:13,360
so we're gonna switch it out for this

00:26:11,080 --> 00:26:14,950
image that's vertical and that is my

00:26:13,360 --> 00:26:18,460
brother and I did put that there to

00:26:14,950 --> 00:26:20,980
embarrass him he's not in Drupal you

00:26:18,460 --> 00:26:23,530
know but so this is the sort of image

00:26:20,980 --> 00:26:25,630
where we would want it to crop upwards

00:26:23,530 --> 00:26:27,880
and please ignore the focal point thing

00:26:25,630 --> 00:26:31,030
there because it's there because I'm

00:26:27,880 --> 00:26:32,920
using focal point elsewhere and we're

00:26:31,030 --> 00:26:34,690
not actually using it in this case so I

00:26:32,920 --> 00:26:40,540
put it you know down here and it

00:26:34,690 --> 00:26:42,550
wouldn't matter and now you can see it

00:26:40,540 --> 00:26:47,730
automatically cropped towards the top of

00:26:42,550 --> 00:26:47,730
that image so

00:26:55,410 --> 00:27:04,100
all right the next example I would like

00:26:58,890 --> 00:27:09,210
to talk about my slides still within

00:27:04,100 --> 00:27:11,460
background images all right so we love

00:27:09,210 --> 00:27:13,380
we have designers and clients and

00:27:11,460 --> 00:27:15,240
everyone who loved to have background

00:27:13,380 --> 00:27:18,270
images in heroes and things like that

00:27:15,240 --> 00:27:20,370
and I mean it makes complete sense from

00:27:18,270 --> 00:27:22,860
a design perspective right especially we

00:27:20,370 --> 00:27:24,840
can use background cover and CSS you

00:27:22,860 --> 00:27:27,380
know it's you get into a whole nother

00:27:24,840 --> 00:27:30,930
set of issues if you're trying to use

00:27:27,380 --> 00:27:33,570
you know an inline image that you want

00:27:30,930 --> 00:27:35,550
to cover an unknown amount of space it's

00:27:33,570 --> 00:27:38,550
just can be messy depending again on

00:27:35,550 --> 00:27:42,090
aspect ratios but Drupal doesn't give us

00:27:38,550 --> 00:27:45,810
a great way to handle background images

00:27:42,090 --> 00:27:47,430
out of the box I think many folks here

00:27:45,810 --> 00:27:50,580
have probably done the same that I have

00:27:47,430 --> 00:27:53,280
many times in just getting that

00:27:50,580 --> 00:27:56,370
background URL out of a pre process

00:27:53,280 --> 00:27:59,250
function and sticking it in an inline

00:27:56,370 --> 00:28:03,090
style tag and I admit that that is part

00:27:59,250 --> 00:28:04,980
of what I'm about to show you but the

00:28:03,090 --> 00:28:07,500
thing that always bugs me about that is

00:28:04,980 --> 00:28:09,770
that it's not performant on a smaller

00:28:07,500 --> 00:28:13,680
device right because an inline

00:28:09,770 --> 00:28:15,510
background image like that will load no

00:28:13,680 --> 00:28:17,220
matter what size you're looking at it

00:28:15,510 --> 00:28:18,840
doesn't matter if you've got display not

00:28:17,220 --> 00:28:20,160
on the div it doesn't you know it's just

00:28:18,840 --> 00:28:22,080
it's gonna load if it's in there and

00:28:20,160 --> 00:28:23,580
that's no good if you've got a

00:28:22,080 --> 00:28:25,170
background image that's going to look

00:28:23,580 --> 00:28:30,030
good on somebody's full time size

00:28:25,170 --> 00:28:33,090
desktop so in this instance I'm again

00:28:30,030 --> 00:28:36,660
using multiple fields to set different

00:28:33,090 --> 00:28:38,070
background images or is it sorry this

00:28:36,660 --> 00:28:40,290
one's not multiple fields although you

00:28:38,070 --> 00:28:43,410
could do that this one I'm applying

00:28:40,290 --> 00:28:47,520
multiple image styles to the same image

00:28:43,410 --> 00:28:49,350
at multiple sizes of multiple viewport

00:28:47,520 --> 00:28:51,270
widths and we're going to use a little

00:28:49,350 --> 00:28:53,490
bit of JavaScript to swap them out

00:28:51,270 --> 00:28:55,430
progressively so that we don't load

00:28:53,490 --> 00:28:58,350
those giant images when we don't need to

00:28:55,430 --> 00:29:01,050
so if you look carefully if you look

00:28:58,350 --> 00:29:03,570
carefully here for a second I've got

00:29:01,050 --> 00:29:07,370
this moose set as a background image on

00:29:03,570 --> 00:29:11,570
this div and I'm gonna make it smaller

00:29:07,370 --> 00:29:14,930
and all of a sudden the image style

00:29:11,570 --> 00:29:18,110
changed it wasn't smooth you can see you

00:29:14,930 --> 00:29:20,390
could see where it changed right it

00:29:18,110 --> 00:29:22,430
jumped there it is so that's what we're

00:29:20,390 --> 00:29:24,950
gonna do here and the markup

00:29:22,430 --> 00:29:32,450
I will show really quickly before trying

00:29:24,950 --> 00:29:34,190
to dive into the pre process what we're

00:29:32,450 --> 00:29:37,790
gonna use is a data attribute and an

00:29:34,190 --> 00:29:41,170
initial inline style is that that's a

00:29:37,790 --> 00:29:43,550
little hard to read but it's it's just

00:29:41,170 --> 00:29:45,800
about as big as I could get it but I've

00:29:43,550 --> 00:29:48,650
got in an initial inline style right

00:29:45,800 --> 00:29:50,720
there that is the smallest size of the

00:29:48,650 --> 00:29:53,480
image it's the size that you would need

00:29:50,720 --> 00:29:56,870
on your average smartphone and then I've

00:29:53,480 --> 00:29:59,630
got a couple data attributes here up the

00:29:56,870 --> 00:30:03,260
image at larger sizes and we're gonna

00:29:59,630 --> 00:30:09,470
need some JavaScript so let's let's go

00:30:03,260 --> 00:30:12,230
back to that to our code all right so

00:30:09,470 --> 00:30:13,730
this is pretty pretty much you know

00:30:12,230 --> 00:30:15,680
we're getting used to this right getting

00:30:13,730 --> 00:30:18,290
the images with image style out of the

00:30:15,680 --> 00:30:21,530
pre process function so we're getting

00:30:18,290 --> 00:30:24,110
out of a media file this a media field

00:30:21,530 --> 00:30:29,380
this time just to show that you can get

00:30:24,110 --> 00:30:32,390
these values out of either we're getting

00:30:29,380 --> 00:30:33,830
two versions of it the same image field

00:30:32,390 --> 00:30:37,730
we're gonna get it with the two

00:30:33,830 --> 00:30:42,200
different image styles applied and the

00:30:37,730 --> 00:30:44,180
URL of that the raw URL at this point

00:30:42,200 --> 00:30:48,410
I'm going to start applying these things

00:30:44,180 --> 00:30:52,660
as as attributes so I'm using in this

00:30:48,410 --> 00:30:54,920
case attributes on the node itself just

00:30:52,660 --> 00:30:57,020
because that's all I was doing with this

00:30:54,920 --> 00:30:58,550
demo but you could put these anywhere in

00:30:57,020 --> 00:31:01,130
the markup you want you could put these

00:30:58,550 --> 00:31:03,740
on a different field within the same

00:31:01,130 --> 00:31:06,560
node you could put these on a random div

00:31:03,740 --> 00:31:08,930
that you placed in your twig file it

00:31:06,560 --> 00:31:12,980
really doesn't matter but at the core of

00:31:08,930 --> 00:31:15,470
it I'm defaulting to the small URL just

00:31:12,980 --> 00:31:16,610
inline CSS just like I was complaining

00:31:15,470 --> 00:31:20,029
about a minute ago

00:31:16,610 --> 00:31:23,149
and I'm also creating to to background

00:31:20,029 --> 00:31:29,929
or to data attributes background small

00:31:23,149 --> 00:31:32,750
background large oh and I am yes

00:31:29,929 --> 00:31:35,029
adding adding a class adding a class to

00:31:32,750 --> 00:31:36,769
it has responsive background just so

00:31:35,029 --> 00:31:41,330
that we can keep off of that for our

00:31:36,769 --> 00:31:44,120
JavaScript later so the JavaScript on

00:31:41,330 --> 00:31:46,909
this one that's the trick here right

00:31:44,120 --> 00:31:52,429
because I hate using javascript for

00:31:46,909 --> 00:31:55,940
basic visual things like this right but

00:31:52,429 --> 00:31:57,549
I wound up weighing my hatred of using

00:31:55,940 --> 00:32:01,850
javascript for something this minor

00:31:57,549 --> 00:32:05,779
versus my hatred uploading a 3,000 pixel

00:32:01,850 --> 00:32:09,470
wide background on someone's iPhone the

00:32:05,779 --> 00:32:13,850
JavaScript one so the cool thing is a

00:32:09,470 --> 00:32:16,929
lot of this is Drupal gives us some

00:32:13,850 --> 00:32:20,269
great tools like the D balance function

00:32:16,929 --> 00:32:24,019
built in so I was able to not worry

00:32:20,269 --> 00:32:25,970
about that when when somebody's resizing

00:32:24,019 --> 00:32:28,880
their browser like crazy like you know

00:32:25,970 --> 00:32:35,059
only front-end developers do but you

00:32:28,880 --> 00:32:37,490
know let's be honest but yeah so what

00:32:35,059 --> 00:32:40,100
I'm doing I'm getting fun you know I'm

00:32:37,490 --> 00:32:41,769
finding the div with these attributes

00:32:40,100 --> 00:32:45,500
applied

00:32:41,769 --> 00:32:48,529
I'm defaulting I've got a variable here

00:32:45,500 --> 00:32:50,960
called small viewport I'm defaulting to

00:32:48,529 --> 00:32:53,659
assuming that it's the small value which

00:32:50,960 --> 00:32:55,340
I've chosen in this case is 768 you

00:32:53,659 --> 00:32:57,740
could do this with as many different

00:32:55,340 --> 00:33:03,669
break points or any break point that you

00:32:57,740 --> 00:33:07,909
choose may be odds be in your favor and

00:33:03,669 --> 00:33:11,179
and I'm defining what I want that inline

00:33:07,909 --> 00:33:12,620
CSS to be in both of those cases so when

00:33:11,179 --> 00:33:14,299
we're on the small viewport width I'm

00:33:12,620 --> 00:33:16,929
gonna you know this is the variable I'm

00:33:14,299 --> 00:33:20,950
going to apply the small background

00:33:16,929 --> 00:33:20,950
ditto for the large one and

00:33:25,820 --> 00:33:29,690
if ya

00:33:31,620 --> 00:33:36,299
oh that's okay sorry if you've got this

00:33:34,409 --> 00:33:38,640
if you don't have the small Newport

00:33:36,299 --> 00:33:40,770
we're going to apply the large CSS so

00:33:38,640 --> 00:33:42,630
that's happening on load since onload

00:33:40,770 --> 00:33:45,450
I've got the inline style showing the

00:33:42,630 --> 00:33:50,520
small image by default all this is doing

00:33:45,450 --> 00:33:53,429
is on page load checking if we don't

00:33:50,520 --> 00:33:56,029
have document width of less than 768

00:33:53,429 --> 00:33:59,010
okay this is a this is a boolean here

00:33:56,029 --> 00:34:01,620
then we're gonna swap out the style tag

00:33:59,010 --> 00:34:05,490
for the earth style attribute for the

00:34:01,620 --> 00:34:07,740
large background the trickier part is

00:34:05,490 --> 00:34:10,379
listening on resize please-please-please

00:34:07,740 --> 00:34:15,060
debounce this don't don't make it worse

00:34:10,379 --> 00:34:18,240
than loading the 3,000 pixel image i've

00:34:15,060 --> 00:34:24,570
got again i'm debouncing this every

00:34:18,240 --> 00:34:26,879
quarter second i chose if your this is

00:34:24,570 --> 00:34:33,690
again checking if we're on the small or

00:34:26,879 --> 00:34:41,010
large size and we also have the small

00:34:33,690 --> 00:34:44,339
viewport what weather yeah if if the

00:34:41,010 --> 00:34:45,480
state matches the existing state we

00:34:44,339 --> 00:34:48,510
don't need to know so we don't need to

00:34:45,480 --> 00:34:51,450
do anything if we resized but before it

00:34:48,510 --> 00:34:52,740
was 400 pixels and now it's 4:30 it you

00:34:51,450 --> 00:34:56,070
know it doesn't matter so we're

00:34:52,740 --> 00:34:58,650
returning out in that instance however

00:34:56,070 --> 00:35:01,740
if they don't match we're setting the

00:34:58,650 --> 00:35:05,670
appropriate style for the new state and

00:35:01,740 --> 00:35:08,790
then we're calling it on resize everyone

00:35:05,670 --> 00:35:12,030
with me it's it's not i have not

00:35:08,790 --> 00:35:15,839
discovered a completely clean scenario

00:35:12,030 --> 00:35:17,400
for these background image options but

00:35:15,839 --> 00:35:22,050
this is one I found that seems to be

00:35:17,400 --> 00:35:24,180
more performant than most if yeah I

00:35:22,050 --> 00:35:25,980
would be very interested if everyone if

00:35:24,180 --> 00:35:28,099
anyone has found another approach to

00:35:25,980 --> 00:35:28,099
that

00:35:30,350 --> 00:35:39,930
all right

00:35:31,710 --> 00:35:42,210
SVG next topic nope SVG's so I gave an

00:35:39,930 --> 00:35:45,480
earlier version of this talk at last

00:35:42,210 --> 00:35:47,550
year's triple goth con and when I did

00:35:45,480 --> 00:35:50,840
that and when I wrote my application for

00:35:47,550 --> 00:35:54,720
this talk there was really no good

00:35:50,840 --> 00:35:58,580
there was no non beta contribs solution

00:35:54,720 --> 00:36:03,750
or core solution to using SVG zazz

00:35:58,580 --> 00:36:05,730
images in drupal and and that's been a

00:36:03,750 --> 00:36:07,940
real struggle I think a lot of people

00:36:05,730 --> 00:36:11,100
have dealt with you know especially

00:36:07,940 --> 00:36:13,440
designers and clients and you know it's

00:36:11,100 --> 00:36:15,210
just not being able to have an SVG as an

00:36:13,440 --> 00:36:19,170
image in this day and age was I think a

00:36:15,210 --> 00:36:22,020
serious shortcoming for Drupal and I had

00:36:19,170 --> 00:36:24,360
a lot of methods I'd worked out to work

00:36:22,020 --> 00:36:27,810
around that and then in January a really

00:36:24,360 --> 00:36:32,160
cool control went stable called SVG

00:36:27,810 --> 00:36:35,640
image and I'd rewrite half my talk but

00:36:32,160 --> 00:36:37,710
no in all seriousness it's a fantastic

00:36:35,640 --> 00:36:40,410
module I've worked with it on client

00:36:37,710 --> 00:36:43,890
sites and it does exactly what you would

00:36:40,410 --> 00:36:46,200
want in it leaves 99 out of 100 cases

00:36:43,890 --> 00:36:50,100
for it to do which is it just lets you

00:36:46,200 --> 00:36:51,960
make SVG and accepted extension of you

00:36:50,100 --> 00:36:56,970
know on your image field your existing

00:36:51,960 --> 00:37:00,440
drupal image field so i'm gonna show you

00:36:56,970 --> 00:37:02,400
how that works real quickly and then

00:37:00,440 --> 00:37:08,130
we're going to talk about a few other

00:37:02,400 --> 00:37:11,310
things to keep in mind about SVG's so

00:37:08,130 --> 00:37:15,380
this is just an you know this is just

00:37:11,310 --> 00:37:18,560
your run-of-the-mill drupal image field

00:37:15,380 --> 00:37:18,560
I've got

00:37:25,980 --> 00:37:29,630
yeah I've got my alt text

00:37:31,190 --> 00:37:37,490
there it is so that is the size that it

00:37:35,210 --> 00:37:40,460
uploaded you saw that that planet was

00:37:37,490 --> 00:37:44,750
completely distorted you know that right

00:37:40,460 --> 00:37:49,300
there is the the view box that the the

00:37:44,750 --> 00:37:52,280
SVG came with out of the box when you're

00:37:49,300 --> 00:37:53,960
setting up this content type there are a

00:37:52,280 --> 00:37:56,750
few thing or this field in a content

00:37:53,960 --> 00:38:03,950
type there are a few things you can do

00:37:56,750 --> 00:38:05,960
about this so as I mentioned it just

00:38:03,950 --> 00:38:11,750
lets you add SVG is an acceptable

00:38:05,960 --> 00:38:14,470
extension right here when you manage

00:38:11,750 --> 00:38:14,470
display

00:38:18,660 --> 00:38:23,700
you get your normal image style choices

00:38:20,880 --> 00:38:26,010
which do they just the SVG will ignore

00:38:23,700 --> 00:38:27,330
them if you put an SVG in this field but

00:38:26,010 --> 00:38:29,220
they will still apply to your other ones

00:38:27,330 --> 00:38:30,660
I was worried when I first saw this that

00:38:29,220 --> 00:38:33,450
it was going to spit some horrible error

00:38:30,660 --> 00:38:37,200
if I tried to put an image cell here and

00:38:33,450 --> 00:38:41,460
it functions beautifully you can set

00:38:37,200 --> 00:38:45,380
image dimensions here for the SVG if you

00:38:41,460 --> 00:38:49,710
want to force them to be the same size

00:38:45,380 --> 00:38:50,940
that's you know that depends on your use

00:38:49,710 --> 00:38:51,810
case whether that's going to be a good

00:38:50,940 --> 00:38:53,970
idea for you

00:38:51,810 --> 00:38:56,490
in in my cases I haven't wanted always

00:38:53,970 --> 00:39:00,480
to force them to be the same size but

00:38:56,490 --> 00:39:04,020
I've also had pretty good control over

00:39:00,480 --> 00:39:06,000
what got uploaded so it depends and this

00:39:04,020 --> 00:39:08,490
is one of those scenarios where I found

00:39:06,000 --> 00:39:11,310
that choosing image orientation CSS

00:39:08,490 --> 00:39:13,740
trick to be really useful as well

00:39:11,310 --> 00:39:18,300
you can also choose whether you want to

00:39:13,740 --> 00:39:21,510
render I'll make this bigger whether you

00:39:18,300 --> 00:39:26,610
want to render the SVG as an image or as

00:39:21,510 --> 00:39:30,330
an SVG tag so that's that can be really

00:39:26,610 --> 00:39:31,500
cool or really dangerous so I'm gonna

00:39:30,330 --> 00:39:35,360
turn this off now I'm going to let it

00:39:31,500 --> 00:39:35,360
render as an SVG tag and show you

00:39:45,180 --> 00:39:58,190
okay so there's there's the phone here

00:39:53,730 --> 00:40:03,299
it is as an SVG an SVG tag I should say

00:39:58,190 --> 00:40:05,700
so nothing about this has changed from

00:40:03,299 --> 00:40:08,430
the file I uploaded if I pulled that

00:40:05,700 --> 00:40:12,299
file that SVG file from my computer open

00:40:08,430 --> 00:40:14,910
in sublime text it would be the exact

00:40:12,299 --> 00:40:21,569
same thing you can see the automated

00:40:14,910 --> 00:40:23,880
adobe illustrator generated thing what

00:40:21,569 --> 00:40:25,529
you see is what you get here so in this

00:40:23,880 --> 00:40:27,390
instance it's pretty good I know I

00:40:25,529 --> 00:40:30,150
happen to know that I can trust that

00:40:27,390 --> 00:40:34,289
image the thing to keep in mind about

00:40:30,150 --> 00:40:36,960
SVG's and I'm to be clear I'm not saying

00:40:34,289 --> 00:40:39,589
don't do this but the danger with

00:40:36,960 --> 00:40:44,460
rendering them in line as opposed to as

00:40:39,589 --> 00:40:46,410
images is that an SVG file is really a

00:40:44,460 --> 00:40:49,650
document in its own right right it's not

00:40:46,410 --> 00:40:55,710
really an image format you can put

00:40:49,650 --> 00:40:59,220
JavaScript in an SVG file just to stop

00:40:55,710 --> 00:41:00,210
and think about security for a minute so

00:40:59,220 --> 00:41:02,010
again that may be one of those

00:41:00,210 --> 00:41:07,440
situations where it depends on those use

00:41:02,010 --> 00:41:11,069
cases but a lot of it in those scenarios

00:41:07,440 --> 00:41:13,619
is going to come down to how much do you

00:41:11,069 --> 00:41:16,829
trust all of your content editors and

00:41:13,619 --> 00:41:17,640
buy trust I don't just mean their

00:41:16,829 --> 00:41:20,609
intentions

00:41:17,640 --> 00:41:23,490
hopefully nobody malicious hopefully it

00:41:20,609 --> 00:41:27,750
has access to your site but they're

00:41:23,490 --> 00:41:29,880
tech-savvy I can go Google for SVG's on

00:41:27,750 --> 00:41:33,660
google image search and come up with

00:41:29,880 --> 00:41:36,900
goodness knows what and I might really

00:41:33,660 --> 00:41:38,819
not want it on my site so just be very

00:41:36,900 --> 00:41:41,670
careful if you're going to do that make

00:41:38,819 --> 00:41:45,299
sure there's a good reason and that you

00:41:41,670 --> 00:41:48,020
have some sort of review process in

00:41:45,299 --> 00:41:51,900
place and that you and your client are

00:41:48,020 --> 00:41:56,549
aware of the risks and choosing to

00:41:51,900 --> 00:41:57,720
accept them with knowledge you know that

00:41:56,549 --> 00:41:58,619
said there's some really cool things you

00:41:57,720 --> 00:42:01,019
can do with CS

00:41:58,619 --> 00:42:05,039
with these in lines SVG's it's great on

00:42:01,019 --> 00:42:07,940
the other hand you given that these are

00:42:05,039 --> 00:42:10,319
no you know these are fields in nodes

00:42:07,940 --> 00:42:13,529
normally you're not going to be styling

00:42:10,319 --> 00:42:17,670
them on a one-off basis so I'm sure

00:42:13,529 --> 00:42:19,440
there are use cases but I think most of

00:42:17,670 --> 00:42:23,609
the time you probably don't need an

00:42:19,440 --> 00:42:26,670
inline SVG but using them as images is

00:42:23,609 --> 00:42:30,450
fantastic and by all means don't take me

00:42:26,670 --> 00:42:31,920
as the gospel on SVG security just keep

00:42:30,450 --> 00:42:38,279
in mind you know look it up if you're

00:42:31,920 --> 00:42:40,920
gonna do it and that is by the way over

00:42:38,279 --> 00:42:42,210
here in that same image grid well it

00:42:40,920 --> 00:42:44,390
doesn't look very fancy because it's

00:42:42,210 --> 00:42:48,299
such a small image to begin with but

00:42:44,390 --> 00:42:51,259
this is a mixture of SVG's and bitmaps

00:42:48,299 --> 00:42:57,710
so or not bitmap you know what I mean

00:42:51,259 --> 00:43:02,910
Ping's and JPEGs and gifts so I believe

00:42:57,710 --> 00:43:06,480
that that is it for my slides Oh

00:43:02,910 --> 00:43:09,960
the last parting thought here is modify

00:43:06,480 --> 00:43:12,089
anything you saw above mix match you

00:43:09,960 --> 00:43:14,009
know change the number of breakpoints

00:43:12,089 --> 00:43:15,299
change the number of styles combine them

00:43:14,009 --> 00:43:17,069
to you know make it your own

00:43:15,299 --> 00:43:20,400
I hope that you can take away from this

00:43:17,069 --> 00:43:23,519
talk not just what I showed specifically

00:43:20,400 --> 00:43:25,170
but also some general approaches and and

00:43:23,519 --> 00:43:27,539
I'll get questions in one second but if

00:43:25,170 --> 00:43:31,589
if you have to leave I understand and

00:43:27,539 --> 00:43:34,799
you can find the all of the code all the

00:43:31,589 --> 00:43:41,339
config and code that I showed on github

00:43:34,799 --> 00:43:42,840
at ABI 8:05 / d8 - images so thank you

00:43:41,339 --> 00:43:44,640
all so much

00:43:42,840 --> 00:43:47,180
[Applause]

00:43:44,640 --> 00:43:51,029
[Music]

00:43:47,180 --> 00:43:52,799
[Applause]

00:43:51,029 --> 00:43:55,559
questions please

00:43:52,799 --> 00:43:57,749
yes hi I I'm wondering if you've had any

00:43:55,559 --> 00:44:00,869
experience with the image effects module

00:43:57,749 --> 00:44:04,859
in Drupal 8 its predecessor image cached

00:44:00,869 --> 00:44:08,009
actions allows you to within the image

00:44:04,859 --> 00:44:10,319
styles area to choose aspect ratios to

00:44:08,009 --> 00:44:12,569
choose which styles you apply best

00:44:10,319 --> 00:44:15,299
morning I haven't had a chance to work

00:44:12,569 --> 00:44:20,029
with that one in d8 no I would be very

00:44:15,299 --> 00:44:22,499
interested to talk about it though sorry

00:44:20,029 --> 00:44:26,180
image effects in Drupal 8 and as image

00:44:22,499 --> 00:44:29,069
cache actions interval 7 yeah thank you

00:44:26,180 --> 00:44:30,989
I just wanted to point out that we at

00:44:29,069 --> 00:44:32,970
Eastern Standard have a solution for

00:44:30,989 --> 00:44:35,489
that responsive background thing that

00:44:32,970 --> 00:44:37,650
you were talking about we have a library

00:44:35,489 --> 00:44:40,019
it's called responsive backgrounds and

00:44:37,650 --> 00:44:42,119
it essentially uses the picture module

00:44:40,019 --> 00:44:45,509
so you just have one image and you'll

00:44:42,119 --> 00:44:48,660
pry the crops we're using what's that

00:44:45,509 --> 00:44:51,450
not crop API but image widget crop so

00:44:48,660 --> 00:44:53,969
you'll just set all of your images based

00:44:51,450 --> 00:44:56,579
on like alright on mobile I want it to

00:44:53,969 --> 00:44:58,319
look like this you know tablet on this

00:44:56,579 --> 00:45:00,210
desktop on this and then all you do in

00:44:58,319 --> 00:45:03,029
your template is spit out the picture

00:45:00,210 --> 00:45:05,460
tag and then in JavaScript you just say

00:45:03,029 --> 00:45:07,529
alright in this CSS class look for the

00:45:05,460 --> 00:45:10,529
picture module and it does essentially

00:45:07,529 --> 00:45:11,999
what you're doing and it's more flexible

00:45:10,529 --> 00:45:14,190
in that you don't have to go into

00:45:11,999 --> 00:45:16,140
JavaScript and actually manually just

00:45:14,190 --> 00:45:17,579
like add those breakpoints in its more

00:45:16,140 --> 00:45:19,229
flexible that way you could just define

00:45:17,579 --> 00:45:24,719
your breakpoints like straight off the

00:45:19,229 --> 00:45:26,489
bat if you want us to send you that no

00:45:24,719 --> 00:45:28,680
no it's just a lighter so the JavaScript

00:45:26,489 --> 00:45:30,599
library it just leverage is that we've

00:45:28,680 --> 00:45:39,059
been using it since 7 so that sounds

00:45:30,599 --> 00:45:40,589
great what I can do is just share it

00:45:39,059 --> 00:45:41,849
with her and then maybe she can share it

00:45:40,589 --> 00:45:43,969
with other people but it's something

00:45:41,849 --> 00:45:46,529
that we create it like in-house for that

00:45:43,969 --> 00:45:48,150
it's just a JavaScript library that just

00:45:46,529 --> 00:45:50,160
again looks at that picture tag and it

00:45:48,150 --> 00:45:52,259
already has like if you have used a

00:45:50,160 --> 00:45:54,089
picture tag it knows like the picture

00:45:52,259 --> 00:45:56,759
tag will say ok this image will be used

00:45:54,089 --> 00:45:58,289
in this media query that you defined or

00:45:56,759 --> 00:46:00,839
whatever so it'll just like look at that

00:45:58,289 --> 00:46:02,100
and then responsibly like change those

00:46:00,839 --> 00:46:04,410
things out

00:46:02,100 --> 00:46:06,270
so it's not like as hard-coded as like

00:46:04,410 --> 00:46:09,030
the example above where it's like you

00:46:06,270 --> 00:46:09,690
can actually manage it and your config

00:46:09,030 --> 00:46:12,570
or endurable

00:46:09,690 --> 00:46:14,310
so I'm not sure how we can spread that

00:46:12,570 --> 00:46:18,420
out but we'll figure it out

00:46:14,310 --> 00:46:20,100
great thank you um so you were talking

00:46:18,420 --> 00:46:21,510
about accessibility earlier and I went

00:46:20,100 --> 00:46:23,880
to a training yesterday and they were

00:46:21,510 --> 00:46:26,250
talking about the frustrations of

00:46:23,880 --> 00:46:29,550
background images and CSS and the lack

00:46:26,250 --> 00:46:33,380
of alt tags yeah and is there any way

00:46:29,550 --> 00:46:33,380
have you found any workarounds for that

00:46:33,620 --> 00:46:39,530
so I went to a fantastic talk earlier

00:46:38,340 --> 00:46:43,080
from a gentleman who could probably

00:46:39,530 --> 00:46:45,410
speak to this much better than I but I

00:46:43,080 --> 00:46:49,110
found a couple things I mean a if it's

00:46:45,410 --> 00:46:51,390
content in the sense that you can't miss

00:46:49,110 --> 00:46:54,960
it and still have the meaningful result

00:46:51,390 --> 00:46:57,210
on the page it or experience of the page

00:46:54,960 --> 00:46:59,010
it's probably it probably shouldn't be a

00:46:57,210 --> 00:47:00,870
background image I

00:46:59,010 --> 00:47:02,040
if anyone want you know I'd be

00:47:00,870 --> 00:47:04,530
interested to hear how their takes on

00:47:02,040 --> 00:47:07,230
that but I think of something if it has

00:47:04,530 --> 00:47:11,550
text on it that should be all captioned

00:47:07,230 --> 00:47:13,560
if it's just important content I think

00:47:11,550 --> 00:47:16,500
it probably belongs in an image tag if

00:47:13,560 --> 00:47:19,050
it's the flowery meadow in the

00:47:16,500 --> 00:47:21,030
background of your hero image like I I

00:47:19,050 --> 00:47:25,380
don't know what the thoughts are on

00:47:21,030 --> 00:47:28,890
whether that needs to be you know made

00:47:25,380 --> 00:47:33,660
it as accessible I guess I do know there

00:47:28,890 --> 00:47:37,020
are some Aria tags also that can be used

00:47:33,660 --> 00:47:42,930
to label things but I am honestly not

00:47:37,020 --> 00:47:46,380
sure if that's best practice so yeah hi

00:47:42,930 --> 00:47:49,410
oh thank you for your nice talk about

00:47:46,380 --> 00:47:52,110
this interesting topic about creating

00:47:49,410 --> 00:47:54,780
these file format herbs right which have

00:47:52,110 --> 00:47:57,690
state now and while formatters are

00:47:54,780 --> 00:48:00,840
supposed to not have any state which is

00:47:57,690 --> 00:48:02,190
something the core ships with and there

00:48:00,840 --> 00:48:04,020
are limitations why you would want to

00:48:02,190 --> 00:48:06,240
kind of style images one way or the

00:48:04,020 --> 00:48:09,120
other do you have any ideas about if

00:48:06,240 --> 00:48:13,290
this idea is generic enough for files

00:48:09,120 --> 00:48:16,080
also so for example I have a CSV file

00:48:13,290 --> 00:48:18,300
and I can based on the size I can choose

00:48:16,080 --> 00:48:20,190
to either display it in line in the

00:48:18,300 --> 00:48:23,310
browser or make it available only for

00:48:20,190 --> 00:48:26,010
downloads it's I think they can do that

00:48:23,310 --> 00:48:28,680
already like when you when you render a

00:48:26,010 --> 00:48:32,540
file in a view mode just a file field

00:48:28,680 --> 00:48:35,369
you can choose between displaying

00:48:32,540 --> 00:48:38,700
displaying in line or displaying a link

00:48:35,369 --> 00:48:41,760
that's probably limited by format right

00:48:38,700 --> 00:48:44,580
but I can't speak as much to non image I

00:48:41,760 --> 00:48:46,830
see so I'm thinking that yes you can set

00:48:44,580 --> 00:48:50,040
the formatter but its global I want to

00:48:46,830 --> 00:48:51,750
let the editor set it on a file per file

00:48:50,040 --> 00:48:52,680
basis whether they want to display it

00:48:51,750 --> 00:48:54,690
one way or the other

00:48:52,680 --> 00:48:58,590
CSV is just an example that can be

00:48:54,690 --> 00:49:00,900
extended to other kind of things I mean

00:48:58,590 --> 00:49:03,030
I think anything that Drupal allows you

00:49:00,900 --> 00:49:04,590
to choose between various modes of

00:49:03,030 --> 00:49:08,609
display you could alter that mode of

00:49:04,590 --> 00:49:11,100
display in a process function but there

00:49:08,609 --> 00:49:14,250
are certain file types that just won't

00:49:11,100 --> 00:49:18,510
render in a browser sure so yeah all

00:49:14,250 --> 00:49:20,609
right thank you yeah thank you all right

00:49:18,510 --> 00:49:22,790
well unless there's anything else thank

00:49:20,609 --> 00:49:24,060
you all so much for listening and

00:49:22,790 --> 00:49:30,760
appreciate it

00:49:24,060 --> 00:49:30,760

YouTube URL: https://www.youtube.com/watch?v=EWjRC6eY29M


