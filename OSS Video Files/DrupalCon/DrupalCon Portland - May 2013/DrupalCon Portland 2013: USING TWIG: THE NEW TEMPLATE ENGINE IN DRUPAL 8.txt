Title: DrupalCon Portland 2013: USING TWIG: THE NEW TEMPLATE ENGINE IN DRUPAL 8
Publication date: 2013-05-28
Playlist: DrupalCon Portland - May 2013
Description: 
	Drupal 8 will have a fancy new template engine (Twig) and a simplified theme layer. We'll show you the new syntax (don't worry, it's easy) and walk through how you can actually use Twig in your every day lives.

* Are you a theme developer? Come see how consistent, easy, and straightforward it will be to create your own custom themes.

* Do you maintain contributed modules? Come learn what you need to do in order to adapt your code for Drupal 8.
Captions: 
	00:00:00,000 --> 00:00:04,440
alright so in the interest of leaving as

00:00:02,159 --> 00:00:06,330
much time as possible for questions and

00:00:04,440 --> 00:00:08,940
discussion at the end we're going to get

00:00:06,330 --> 00:00:10,860
started welcome everybody my name is

00:00:08,940 --> 00:00:13,410
Ivan booth and I'm the drupalcon

00:00:10,860 --> 00:00:16,470
front-end track chair I'm a freelance

00:00:13,410 --> 00:00:18,119
developer at root work org and I'm happy

00:00:16,470 --> 00:00:22,080
to introduce three of the folks behind

00:00:18,119 --> 00:00:26,300
twig in Drupal twig a part of symphony

00:00:22,080 --> 00:00:29,070
is being adopted in Drupal 8 as long as

00:00:26,300 --> 00:00:30,679
some tweaks prints go well on Friday so

00:00:29,070 --> 00:00:33,000
I'm sure they'll talk more about that

00:00:30,679 --> 00:00:35,579
i'll leave it to these three to explain

00:00:33,000 --> 00:00:38,070
why twig is so great but i'll say that

00:00:35,579 --> 00:00:41,820
when these folks presented at bad camp

00:00:38,070 --> 00:00:44,370
there were literally gasps of joy from

00:00:41,820 --> 00:00:49,230
Drupal femurs not something that happens

00:00:44,370 --> 00:00:52,140
very often so to quickly introduce these

00:00:49,230 --> 00:00:54,690
three jen Lampton is leading the charge

00:00:52,140 --> 00:00:56,219
to overhaul theming in Drupal 8 she's

00:00:54,690 --> 00:00:58,829
been a contributor to the Drupal

00:00:56,219 --> 00:01:00,750
community since 2006 and maintains

00:00:58,829 --> 00:01:03,149
modules like total control admin

00:01:00,750 --> 00:01:05,330
dashboard she's also the lead

00:01:03,149 --> 00:01:09,720
coordinator of Bay Area drupalcamp

00:01:05,330 --> 00:01:12,479
despite her lack of an eyepatch bad camp

00:01:09,720 --> 00:01:14,580
it's pirate themed she does however like

00:01:12,479 --> 00:01:16,380
horses which makes sense because twig is

00:01:14,580 --> 00:01:20,400
basically a pony that everyone gets to

00:01:16,380 --> 00:01:23,520
have Fabien Franz was born on the same

00:01:20,400 --> 00:01:25,170
day as the new operating system and has

00:01:23,520 --> 00:01:26,970
pretty much been contributing to free

00:01:25,170 --> 00:01:29,310
and open source communities ever since

00:01:26,970 --> 00:01:31,619
he's been a contributor to the Drupal

00:01:29,310 --> 00:01:34,770
community since 2009 and end is a

00:01:31,619 --> 00:01:38,159
technical lead at Rowan fabien has been

00:01:34,770 --> 00:01:39,869
get helping jen get twig in core which

00:01:38,159 --> 00:01:43,259
makes sense because twig is going to

00:01:39,869 --> 00:01:45,210
make drupal theme errs dance and john

00:01:43,259 --> 00:01:49,470
Albin Wilkins has browsed the entire

00:01:45,210 --> 00:01:52,170
world wide web literally ok so it was

00:01:49,470 --> 00:01:54,119
1993 and consisted of two websites but

00:01:52,170 --> 00:01:56,460
still how many other people can make

00:01:54,119 --> 00:01:58,140
that claim apparently he found the web

00:01:56,460 --> 00:02:00,390
pretty ugly because since then he's been

00:01:58,140 --> 00:02:03,030
making websites more usable accessible

00:02:00,390 --> 00:02:05,610
and beautiful he works at palantir and

00:02:03,030 --> 00:02:08,250
has made foundational contributions to

00:02:05,610 --> 00:02:10,679
CSS sass and compass mobile and

00:02:08,250 --> 00:02:12,550
responsive web design he also maintains

00:02:10,679 --> 00:02:14,140
a little base thing called Zen

00:02:12,550 --> 00:02:16,600
which happens to be the most install

00:02:14,140 --> 00:02:18,520
drupal theme ever in his spare time he

00:02:16,600 --> 00:02:21,130
enjoys playing with lemurs at his home

00:02:18,520 --> 00:02:22,360
in Taiwan which makes sense because when

00:02:21,130 --> 00:02:26,440
theme is look at twig they're going to

00:02:22,360 --> 00:02:40,270
go ah so with that please welcome Jen

00:02:26,440 --> 00:02:45,180
Fabian and John we had some intro slides

00:02:40,270 --> 00:02:48,580
we're going to skip right to the point

00:02:45,180 --> 00:02:51,640
so Drupal 8 is going to have a new theme

00:02:48,580 --> 00:02:54,390
engine we evaluated a bunch of them very

00:02:51,640 --> 00:02:59,470
early in the process and decided on twig

00:02:54,390 --> 00:03:01,900
twig is a PHP templating engine that is

00:02:59,470 --> 00:03:03,460
already very well documented so Drupal

00:03:01,900 --> 00:03:05,230
itself has a little bit of a problem

00:03:03,460 --> 00:03:06,670
with creating great documentation so

00:03:05,230 --> 00:03:07,570
we're really happy to be adopting a

00:03:06,670 --> 00:03:10,960
framework that I already has

00:03:07,570 --> 00:03:12,820
documentation of its own twig is also

00:03:10,960 --> 00:03:14,200
extendable which means that we've

00:03:12,820 --> 00:03:16,210
written extensions for twig that works

00:03:14,200 --> 00:03:17,709
specifically for Drupal but also anyone

00:03:16,210 --> 00:03:19,420
in the contribs space can come along and

00:03:17,709 --> 00:03:21,459
further extend twig to meet whatever

00:03:19,420 --> 00:03:23,410
needs they have to so we're not relying

00:03:21,459 --> 00:03:27,700
on getting it exactly right the first

00:03:23,410 --> 00:03:29,680
time through which is good twig is also

00:03:27,700 --> 00:03:31,720
secure a security team has been

00:03:29,680 --> 00:03:33,760
complaining about one hundred percent of

00:03:31,720 --> 00:03:35,890
all Drupal themes with a little rounding

00:03:33,760 --> 00:03:37,330
error being insecure and that's just

00:03:35,890 --> 00:03:40,420
because it's really hard to do it right

00:03:37,330 --> 00:03:41,980
with twig we can put some protections

00:03:40,420 --> 00:03:43,120
into place little prevent all of the

00:03:41,980 --> 00:03:45,910
security holes that we're dealing with

00:03:43,120 --> 00:03:48,640
right now yeah there's still some vote

00:03:45,910 --> 00:03:51,520
going on so that's also a possibility to

00:03:48,640 --> 00:03:54,340
sprint on your on the security team and

00:03:51,520 --> 00:03:56,650
want to make it better weaksauce it

00:03:54,340 --> 00:03:59,080
really fast so compared to some similar

00:03:56,650 --> 00:04:00,580
templating engines like smarty it leaves

00:03:59,080 --> 00:04:01,630
all the other ones in the dust so we're

00:04:00,580 --> 00:04:02,950
really happy to be using something

00:04:01,630 --> 00:04:05,770
that's not going to be slowing us down

00:04:02,950 --> 00:04:10,120
too much it also has really great IDE

00:04:05,770 --> 00:04:12,610
integration um it turns out so it was a

00:04:10,120 --> 00:04:14,739
fast um for those that have been

00:04:12,610 --> 00:04:22,900
profiling trick there's one number that

00:04:14,739 --> 00:04:25,020
stand it out 0.3% so it also integrates

00:04:22,900 --> 00:04:26,639
really great with IDEs so any

00:04:25,020 --> 00:04:27,840
one who wants fancy syntax highlighting

00:04:26,639 --> 00:04:30,000
is going to get it which is really great

00:04:27,840 --> 00:04:32,879
can't get that right now with PHP

00:04:30,000 --> 00:04:34,139
template um and it also looks

00:04:32,879 --> 00:04:36,659
recognizable so even if you've never

00:04:34,139 --> 00:04:38,280
heard of twig before if you use used any

00:04:36,659 --> 00:04:40,379
of these other languages you'll be able

00:04:38,280 --> 00:04:43,979
to parse the files and scan them read

00:04:40,379 --> 00:04:45,900
them in ways that make sense so he was

00:04:43,979 --> 00:04:47,550
also written by the creator of symphony

00:04:45,900 --> 00:04:49,229
which are also adopting for Drupal 8 so

00:04:47,550 --> 00:04:54,330
those two systems play really nicely

00:04:49,229 --> 00:04:57,169
together I want to do it looks like no

00:04:54,330 --> 00:05:02,039
one okay well you can go then all right

00:04:57,169 --> 00:05:03,900
thank you in order to print a variable

00:05:02,039 --> 00:05:05,610
you use this syntax with two curly

00:05:03,900 --> 00:05:08,430
braces on either side and just type the

00:05:05,610 --> 00:05:10,259
name of the variable in order to drill

00:05:08,430 --> 00:05:11,880
into a variable so if your variable

00:05:10,259 --> 00:05:13,830
happens to be a more complicated data

00:05:11,880 --> 00:05:15,360
structure you get from the top level to

00:05:13,830 --> 00:05:16,949
the second level by putting in a dot and

00:05:15,360 --> 00:05:18,719
that's exactly the same whether it's an

00:05:16,949 --> 00:05:20,789
object an array or anything else that we

00:05:18,719 --> 00:05:22,560
can come to event in vent in the near

00:05:20,789 --> 00:05:24,990
future if you want to get something

00:05:22,560 --> 00:05:26,849
inside you just type a dot but by the

00:05:24,990 --> 00:05:29,190
way there's tons of chairs over on this

00:05:26,849 --> 00:05:38,580
side and it's hard to see from the door

00:05:29,190 --> 00:05:40,590
but chairs if you want to add a comment

00:05:38,580 --> 00:05:44,219
into a twig template it's a curly brace

00:05:40,590 --> 00:05:46,680
and a pound sign and if you want to run

00:05:44,219 --> 00:05:48,690
command so if statements for loops you

00:05:46,680 --> 00:05:50,250
use a curly brace and a percent symbol

00:05:48,690 --> 00:05:56,759
and we'll show you some actual code a

00:05:50,250 --> 00:06:04,199
little later too um wrong way uh so uh

00:05:56,759 --> 00:06:05,909
we had rolled together a bunch of

00:06:04,199 --> 00:06:08,580
patches that converted all of the PHP

00:06:05,909 --> 00:06:11,069
template template files in Drupal 7 or

00:06:08,580 --> 00:06:14,460
interpolate into twig files we got it

00:06:11,069 --> 00:06:16,770
ready at about eleven-thirty p.m. two

00:06:14,460 --> 00:06:18,240
nights ago and since then I started

00:06:16,770 --> 00:06:20,250
trying to actually use it to create a

00:06:18,240 --> 00:06:21,300
theme I created one last night some of

00:06:20,250 --> 00:06:22,710
you might have been watching on Twitter

00:06:21,300 --> 00:06:24,840
some of them went really really well so

00:06:22,710 --> 00:06:26,069
would not that well when I got to the

00:06:24,840 --> 00:06:27,599
end I decided that it wasn't really

00:06:26,069 --> 00:06:29,430
worth me going through the process of

00:06:27,599 --> 00:06:30,599
creating a theme in front of you but i

00:06:29,430 --> 00:06:32,009
do want to walk you through the same

00:06:30,599 --> 00:06:34,380
thing we created just so you can see

00:06:32,009 --> 00:06:35,940
what the code looks like but i'm going

00:06:34,380 --> 00:06:38,250
to start off by painting the picture of

00:06:35,940 --> 00:06:38,460
the site that i was trying to build so

00:06:38,250 --> 00:06:41,400
this

00:06:38,460 --> 00:06:47,160
usually however good one question before

00:06:41,400 --> 00:06:52,770
who if you have used trick before and

00:06:47,160 --> 00:06:54,479
who of you wants to use it Oh more

00:06:52,770 --> 00:06:57,240
importantly how many people here like

00:06:54,479 --> 00:07:02,009
PHP template yeah that's what I thought

00:06:57,240 --> 00:07:04,139
Thanks okay so here's the premise we're

00:07:02,009 --> 00:07:05,819
going to build a website its homepage is

00:07:04,139 --> 00:07:08,220
very straightforward just a bunch of

00:07:05,819 --> 00:07:10,020
text on it we're going to have a second

00:07:08,220 --> 00:07:11,400
kind of page that has one of the fields

00:07:10,020 --> 00:07:13,919
pulled out of the content and shoved

00:07:11,400 --> 00:07:15,720
into a little side area and then we want

00:07:13,919 --> 00:07:17,070
to treat the mark-up specially so that

00:07:15,720 --> 00:07:18,419
if there's more than one value in the

00:07:17,070 --> 00:07:20,639
field we want to wrap it in a section

00:07:18,419 --> 00:07:22,710
tag so we've got some special control we

00:07:20,639 --> 00:07:24,150
want to do over our HTML so three very

00:07:22,710 --> 00:07:28,349
simple things for trying to achieve here

00:07:24,150 --> 00:07:32,909
in this theme so I did happen to put on

00:07:28,349 --> 00:07:34,289
yes code please so if you could happen

00:07:32,909 --> 00:07:35,430
to put all of this code on github if you

00:07:34,289 --> 00:07:37,860
want to pull it down and rifle it threw

00:07:35,430 --> 00:07:41,099
yourself at your own pace to more than

00:07:37,860 --> 00:07:42,930
welcome to do that the get project is

00:07:41,099 --> 00:07:48,380
called twig ified although the theme has

00:07:42,930 --> 00:07:48,380
been renamed to Twiggy um okay

00:07:59,499 --> 00:08:06,939
okay um you will learn a song now we

00:08:03,409 --> 00:08:14,269
have actually a trick jingle and it's

00:08:06,939 --> 00:08:28,369
175 7550 can review it patch be a Drupal

00:08:14,269 --> 00:08:32,839
8 hero so all together 1757 550 come

00:08:28,369 --> 00:08:54,740
review a patch be a Drupal 8 hero and

00:08:32,839 --> 00:08:56,209
now you okay so we have here this theme

00:08:54,740 --> 00:08:59,540
that I created now that I've got my

00:08:56,209 --> 00:09:01,279
monitor resized um where the homepage

00:08:59,540 --> 00:09:04,550
just as a giant header on it we've got

00:09:01,279 --> 00:09:06,139
some content in a straight column and

00:09:04,550 --> 00:09:07,579
all that really is is just a new

00:09:06,139 --> 00:09:09,470
template file for the home page in a new

00:09:07,579 --> 00:09:12,560
temple new style sheet so just really

00:09:09,470 --> 00:09:14,600
quickly I want to show you the page

00:09:12,560 --> 00:09:18,170
template and it should look pretty

00:09:14,600 --> 00:09:24,290
similar to PHP template right now if you

00:09:18,170 --> 00:09:25,670
could see it all and that's because the

00:09:24,290 --> 00:09:28,639
first step of making all of these

00:09:25,670 --> 00:09:30,500
conversions is just getting it working

00:09:28,639 --> 00:09:32,329
and the easiest way to get stuff working

00:09:30,500 --> 00:09:33,620
is not to actually change very much so

00:09:32,329 --> 00:09:35,120
right now we just took the PHP template

00:09:33,620 --> 00:09:36,410
and we're converting it to twig once we

00:09:35,120 --> 00:09:37,939
get that done there will be a lot of

00:09:36,410 --> 00:09:39,410
room for improvements I know Martin is

00:09:37,939 --> 00:09:41,269
eagerly waiting to get his hands on the

00:09:39,410 --> 00:09:42,439
mark up so we can change that there's a

00:09:41,269 --> 00:09:44,089
whole bunch of people teams of people

00:09:42,439 --> 00:09:45,949
were getting ready to change the CSS

00:09:44,089 --> 00:09:48,290
right now all we're looking at is the

00:09:45,949 --> 00:09:50,120
syntax of this template file so just as

00:09:48,290 --> 00:09:51,800
in PHP template top of the file starts

00:09:50,120 --> 00:09:53,990
with a bunch of documentation points out

00:09:51,800 --> 00:09:55,639
all of the available variables this

00:09:53,990 --> 00:09:56,930
might not be exactly the same the end

00:09:55,639 --> 00:09:58,309
you know when we're done with all this

00:09:56,930 --> 00:09:59,509
but for the most part it'll tell you

00:09:58,309 --> 00:10:01,160
everything that's here for you to use

00:09:59,509 --> 00:10:03,319
and then when you get to the actual

00:10:01,160 --> 00:10:06,500
markup it's going to look a little bit

00:10:03,319 --> 00:10:08,300
more like markup we basically have HTML

00:10:06,500 --> 00:10:10,069
tags and when a variable needs to be

00:10:08,300 --> 00:10:11,120
printed it's just printed in little

00:10:10,069 --> 00:10:14,690
curly braces

00:10:11,120 --> 00:10:16,220
when you need to run some logic on it it

00:10:14,690 --> 00:10:19,190
reads a little bit more like English

00:10:16,220 --> 00:10:20,300
than PHP did if site name or site slogan

00:10:19,190 --> 00:10:24,020
you don't need to worry about dollar

00:10:20,300 --> 00:10:25,940
signs or you know if is sets or is array

00:10:24,020 --> 00:10:28,430
and not empty or any of that stuff that

00:10:25,940 --> 00:10:30,760
you had to do in in Drupal 7 land you

00:10:28,430 --> 00:10:34,250
can just say if site name and print it

00:10:30,760 --> 00:10:36,440
so pretty straightforward and we've got

00:10:34,250 --> 00:10:39,890
a lot of white space in here makes it

00:10:36,440 --> 00:10:41,779
easy to read a lot of things that should

00:10:39,890 --> 00:10:44,000
look really similar and there's a couple

00:10:41,779 --> 00:10:45,500
of differences variables like we said if

00:10:44,000 --> 00:10:47,660
you want to render something that's a

00:10:45,500 --> 00:10:50,210
second level or deeper you separate you

00:10:47,660 --> 00:10:51,620
drill into them with a dot it should be

00:10:50,210 --> 00:10:53,540
four for most of the stuff you see

00:10:51,620 --> 00:10:55,490
printed in any template file in Drupal 8

00:10:53,540 --> 00:10:56,990
we've got a section at the documentation

00:10:55,490 --> 00:10:59,060
at the top it tells you what all of

00:10:56,990 --> 00:11:00,500
those things are there's also a little

00:10:59,060 --> 00:11:01,760
method that lets you print out all the

00:11:00,500 --> 00:11:03,020
available variables so we're going to

00:11:01,760 --> 00:11:07,040
clean up and give you a really pretty

00:11:03,020 --> 00:11:10,370
view into later so the next thing I want

00:11:07,040 --> 00:11:12,830
to show you is a node template and we

00:11:10,370 --> 00:11:20,480
have Morton so Martin will make sure it

00:11:12,830 --> 00:11:29,000
will be usable where you complain so

00:11:20,480 --> 00:11:31,370
long until that's good we have been

00:11:29,000 --> 00:11:33,400
heard finally so the node template and

00:11:31,370 --> 00:11:35,600
what we want to do here is pull out a

00:11:33,400 --> 00:11:37,910
individual field and display it in a

00:11:35,600 --> 00:11:39,200
sidebar I'm not sure how good the color

00:11:37,910 --> 00:11:40,220
is on these matters I can see up here

00:11:39,200 --> 00:11:42,200
it's just got a little gray background

00:11:40,220 --> 00:11:43,370
and on the side we pulled out an image

00:11:42,200 --> 00:11:46,279
and we just moved it somewhere else on

00:11:43,370 --> 00:11:48,890
the page so if we look at the node

00:11:46,279 --> 00:11:50,600
template you'll notice I put in a new

00:11:48,890 --> 00:11:52,790
little dip here called info bar I've

00:11:50,600 --> 00:11:55,100
pulled out the individual field content

00:11:52,790 --> 00:11:58,459
dot field underscore image and thrown it

00:11:55,100 --> 00:12:04,160
in that little sidebar um and let's say

00:11:58,459 --> 00:12:06,260
we had I guess I could talk about this

00:12:04,160 --> 00:12:08,120
now oh one thing you'll notice here is a

00:12:06,260 --> 00:12:10,459
little bit weird it's got a section of

00:12:08,120 --> 00:12:12,200
code in here that says block and what

00:12:10,459 --> 00:12:14,180
that's doing is identifying a place on

00:12:12,200 --> 00:12:16,100
the page where you can say hey twig

00:12:14,180 --> 00:12:18,680
something in this area is going to be

00:12:16,100 --> 00:12:20,570
different and then what we can do drupal

00:12:18,680 --> 00:12:21,680
7 land when you would create a copy of

00:12:20,570 --> 00:12:23,360
this node template to use for a

00:12:21,680 --> 00:12:24,560
different node type you would have to

00:12:23,360 --> 00:12:26,720
copy the whole thing all over

00:12:24,560 --> 00:12:28,040
and well in twig land what we can do is

00:12:26,720 --> 00:12:31,040
create a specific version of it that

00:12:28,040 --> 00:12:32,660
says here's the article template it's

00:12:31,040 --> 00:12:35,270
exactly the same as that no template

00:12:32,660 --> 00:12:36,830
except for this difference so in here

00:12:35,270 --> 00:12:38,060
I've just got a little piece of content

00:12:36,830 --> 00:12:39,529
that says hey this is just the

00:12:38,060 --> 00:12:41,000
difference of the two templates so you

00:12:39,529 --> 00:12:42,770
no longer have duplicate code all over

00:12:41,000 --> 00:12:45,920
your site so if I wanted to go and look

00:12:42,770 --> 00:12:49,100
at what an article looks like that is

00:12:45,920 --> 00:12:51,500
actually in my blog section you'll

00:12:49,100 --> 00:12:53,000
notice that the caption now has some

00:12:51,500 --> 00:12:55,370
additional text there that says hey this

00:12:53,000 --> 00:12:57,730
is the diff of the original node

00:12:55,370 --> 00:13:00,350
template and now it's article override

00:12:57,730 --> 00:13:02,450
yeah the fact that this you know this

00:13:00,350 --> 00:13:05,450
node dash dash article twig file is

00:13:02,450 --> 00:13:06,860
literally three lines long or I mean the

00:13:05,450 --> 00:13:11,839
significant part of it anyway is like

00:13:06,860 --> 00:13:15,110
okay four lines but this is this is a

00:13:11,839 --> 00:13:18,320
huge win for me there's so many times I

00:13:15,110 --> 00:13:21,470
see themes that have like seven or eight

00:13:18,320 --> 00:13:24,290
no dash dash something dot TPL files and

00:13:21,470 --> 00:13:25,790
they all look almost identical and I

00:13:24,290 --> 00:13:28,010
can't tell what the heck's going on and

00:13:25,790 --> 00:13:32,120
when I open up a file this is going to

00:13:28,010 --> 00:13:33,950
make it really really obvious and just

00:13:32,120 --> 00:13:43,940
just so much better for everybody to

00:13:33,950 --> 00:13:46,580
workflow ok so I'm so the only thing

00:13:43,940 --> 00:13:49,370
about that is we want to ask the Drupal

00:13:46,580 --> 00:13:51,680
community here and do you find the term

00:13:49,370 --> 00:13:58,130
block for that confusing who finds it

00:13:51,680 --> 00:14:07,820
confusing who would prefer code block

00:13:58,130 --> 00:14:12,980
instead who does not find it confusing

00:14:07,820 --> 00:14:15,860
and finds us pretty straightforward so

00:14:12,980 --> 00:14:20,510
okay are you all people who've used to

00:14:15,860 --> 00:14:22,400
twig before a couple if you use twig

00:14:20,510 --> 00:14:23,810
before and you called it block and you

00:14:22,400 --> 00:14:24,890
open a Drupal file it was called code

00:14:23,810 --> 00:14:30,320
block would you be able to figure out

00:14:24,890 --> 00:14:32,810
was doing no so we might need to

00:14:30,320 --> 00:14:35,570
document that we might be able to just

00:14:32,810 --> 00:14:37,900
provide you with bells and Drupal coding

00:14:35,570 --> 00:14:41,500
standards would have code block but

00:14:37,900 --> 00:14:43,420
block for Twix background backwards

00:14:41,500 --> 00:14:56,460
compatibility woods the work would that

00:14:43,420 --> 00:15:01,600
be a good compromise who likes that know

00:14:56,460 --> 00:15:03,190
what the question was are is a twig

00:15:01,600 --> 00:15:04,930
block the same as a drupal block and

00:15:03,190 --> 00:15:07,060
they're not at all you know one of the

00:15:04,930 --> 00:15:10,090
one of the great winds of integrating

00:15:07,060 --> 00:15:11,410
all these other third-party code is that

00:15:10,090 --> 00:15:12,940
we don't have to write so much in the

00:15:11,410 --> 00:15:15,790
integration because my cleaner the

00:15:12,940 --> 00:15:17,740
downside is that everybody has their own

00:15:15,790 --> 00:15:19,300
sort of terminologies and they seem to

00:15:17,740 --> 00:15:21,370
conflict with each other how many people

00:15:19,300 --> 00:15:23,800
were at this smacks session yesterday

00:15:21,370 --> 00:15:25,900
and then beat their head against the

00:15:23,800 --> 00:15:31,240
wall afterwards because of the module

00:15:25,900 --> 00:15:32,980
and themes and smacks right and I this

00:15:31,240 --> 00:15:36,670
is a really thorny problem and there's

00:15:32,980 --> 00:15:38,140
no there is no good solution and I tried

00:15:36,670 --> 00:15:41,440
to rename block but it didn't go over

00:15:38,140 --> 00:15:44,830
well like our box and and I say there is

00:15:41,440 --> 00:15:47,410
no good solution but really what I

00:15:44,830 --> 00:15:48,910
really want to happen is I want for you

00:15:47,410 --> 00:15:53,530
to figure out the really good solution

00:15:48,910 --> 00:15:55,360
and tell me amigo yeah obviously but so

00:15:53,530 --> 00:15:59,160
just think about it everybody and then

00:15:55,360 --> 00:15:59,160
come talk to me afterwards okay thanks

00:15:59,220 --> 00:16:04,840
alright so the next example what we want

00:16:02,650 --> 00:16:06,550
to do is treat the field in the sidebar

00:16:04,840 --> 00:16:07,780
slightly differently if there's more

00:16:06,550 --> 00:16:10,480
than one of them so if there's one thing

00:16:07,780 --> 00:16:12,250
we just throw it in this little gray

00:16:10,480 --> 00:16:14,530
area if there's two of them we want to

00:16:12,250 --> 00:16:16,060
wrap it in a section tag so this is a

00:16:14,530 --> 00:16:20,860
you want really fine grained control

00:16:16,060 --> 00:16:22,570
over your HTML in particular this is the

00:16:20,860 --> 00:16:24,310
code you want to generate it's a section

00:16:22,570 --> 00:16:26,470
tag surrounded by a couple of figure

00:16:24,310 --> 00:16:28,300
tags each one should contain only its

00:16:26,470 --> 00:16:29,620
image in its caption so I'm going to be

00:16:28,300 --> 00:16:31,300
overriding the field template

00:16:29,620 --> 00:16:32,980
specifically for images because these

00:16:31,300 --> 00:16:35,440
are figure tags don't don't want to roam

00:16:32,980 --> 00:16:36,850
in every field around my images and so

00:16:35,440 --> 00:16:40,840
I've written some code here which checks

00:16:36,850 --> 00:16:42,970
to see how many items are inside my

00:16:40,840 --> 00:16:45,700
field and if there's more than one it'll

00:16:42,970 --> 00:16:47,110
print a section tag and then it'll loop

00:16:45,700 --> 00:16:49,540
through all of the items print each one

00:16:47,110 --> 00:16:50,860
out along with the caption which happens

00:16:49,540 --> 00:16:53,290
to just be captioned because it's what I

00:16:50,860 --> 00:16:54,730
put there um and then at the end again

00:16:53,290 --> 00:16:56,080
it checks to see how many items are in

00:16:54,730 --> 00:16:57,940
there and prints the closing tag if

00:16:56,080 --> 00:17:01,110
there's more than one so if we go to a

00:16:57,940 --> 00:17:05,590
page on the site that has more than one

00:17:01,110 --> 00:17:07,180
image it'll wrap it in a section tag

00:17:05,590 --> 00:17:10,420
which is styled slightly differently in

00:17:07,180 --> 00:17:19,000
this case yay that's how you do that

00:17:10,420 --> 00:17:20,320
okay um back to presentation mode so I

00:17:19,000 --> 00:17:21,640
wanted to go over a little bit the

00:17:20,320 --> 00:17:23,680
things we're trying to solve the

00:17:21,640 --> 00:17:24,760
problems in Drupal 7 because you're like

00:17:23,680 --> 00:17:27,100
yeah of course it's supposed to work

00:17:24,760 --> 00:17:29,710
that way but didn't always go so well um

00:17:27,100 --> 00:17:31,480
so one of the first pain points that we

00:17:29,710 --> 00:17:33,580
have in Drupal 7 is the fact that inside

00:17:31,480 --> 00:17:36,040
template files there are variables there

00:17:33,580 --> 00:17:37,930
are sometimes they're strings sometimes

00:17:36,040 --> 00:17:40,510
they're arrays sometimes they're objects

00:17:37,930 --> 00:17:41,710
and it's up to everybody who is using

00:17:40,510 --> 00:17:42,820
the template files to know which ones

00:17:41,710 --> 00:17:45,370
are which which can be really

00:17:42,820 --> 00:17:47,560
frustrating so here's an example of node

00:17:45,370 --> 00:17:49,270
template where it uses an arrow to print

00:17:47,560 --> 00:17:50,740
out the node ID there's an example of

00:17:49,270 --> 00:17:52,240
the page template where it uses square

00:17:50,740 --> 00:17:56,500
brackets and text to get into an array

00:17:52,240 --> 00:17:57,610
um so in twig anytime you print any one

00:17:56,500 --> 00:17:59,320
of those variables you're always going

00:17:57,610 --> 00:18:00,820
to use a dot operator to get deeper

00:17:59,320 --> 00:18:03,430
inside it so that problem should be

00:18:00,820 --> 00:18:04,420
solved the second one is that we

00:18:03,430 --> 00:18:05,920
actually have two different ways of

00:18:04,420 --> 00:18:07,990
printing things into our template files

00:18:05,920 --> 00:18:09,820
as well sometimes you just print the

00:18:07,990 --> 00:18:13,210
variable out like printing classes and

00:18:09,820 --> 00:18:14,650
sometimes you print render a variable so

00:18:13,210 --> 00:18:16,090
now it's up to the person using these

00:18:14,650 --> 00:18:17,530
template files to know which variables

00:18:16,090 --> 00:18:18,610
are safe to just print and which ones

00:18:17,530 --> 00:18:20,760
need to be rendered in order to be

00:18:18,610 --> 00:18:24,100
printed so that's also pretty confusing

00:18:20,760 --> 00:18:26,050
in twig we're removing all calls to

00:18:24,100 --> 00:18:27,310
render from any template so if you want

00:18:26,050 --> 00:18:29,710
to print anything you just put the very

00:18:27,310 --> 00:18:31,330
name of the variable in there and it'll

00:18:29,710 --> 00:18:33,700
know whether it needs to be rendered or

00:18:31,330 --> 00:18:36,030
not and do it correctly so that problem

00:18:33,700 --> 00:18:36,030
solved

00:18:38,540 --> 00:18:42,720
right now in Drupal there are two ways

00:18:41,280 --> 00:18:45,930
to override the mark-up that comes out

00:18:42,720 --> 00:18:47,460
of core first you can find a template

00:18:45,930 --> 00:18:48,870
somewhere in the file system create a

00:18:47,460 --> 00:18:50,910
copy and your theme and change the mark

00:18:48,870 --> 00:18:52,020
up there and second sometimes the

00:18:50,910 --> 00:18:53,430
mark-up you're looking for doesn't

00:18:52,020 --> 00:18:55,020
actually come from a template it comes

00:18:53,430 --> 00:18:57,180
from a PHP function which is called a

00:18:55,020 --> 00:18:59,340
theme function well in a perfect world

00:18:57,180 --> 00:19:01,110
and twig we would be able to replace all

00:18:59,340 --> 00:19:02,340
of the theme functions in all of core

00:19:01,110 --> 00:19:04,590
with template files so there would only

00:19:02,340 --> 00:19:08,160
be a single way of overriding any kind

00:19:04,590 --> 00:19:10,050
of markup in any part of Drupal so right

00:19:08,160 --> 00:19:11,520
now there's two ways it's really

00:19:10,050 --> 00:19:14,460
confusing to figure out when to use

00:19:11,520 --> 00:19:16,260
which one sometimes there's one that's

00:19:14,460 --> 00:19:17,460
provided but it's not actually used and

00:19:16,260 --> 00:19:18,330
so you've got to do some magic in order

00:19:17,460 --> 00:19:20,700
to make your stuff get used

00:19:18,330 --> 00:19:21,810
appropriately and what we want to do in

00:19:20,700 --> 00:19:23,010
the future is make it so that there's no

00:19:21,810 --> 00:19:24,660
question you always go to the same place

00:19:23,010 --> 00:19:28,200
you can copy and change your markup in

00:19:24,660 --> 00:19:29,790
the same way we started converting every

00:19:28,200 --> 00:19:31,380
single theme function in every single

00:19:29,790 --> 00:19:35,880
template file and all of cord a twig

00:19:31,380 --> 00:19:38,100
turns out there's a lot and a lot more

00:19:35,880 --> 00:19:39,660
than even I ever anticipated and we

00:19:38,100 --> 00:19:42,120
realized that you know Drupal 8 it

00:19:39,660 --> 00:19:44,280
should be coming out soon ish and so

00:19:42,120 --> 00:19:46,140
maybe we should you know just focus on

00:19:44,280 --> 00:19:47,640
may be replacing PHP template with twig

00:19:46,140 --> 00:19:50,340
before we try and like rewrite the world

00:19:47,640 --> 00:19:51,870
um so what we've done is split all of

00:19:50,340 --> 00:19:53,070
our issues apart into first template

00:19:51,870 --> 00:19:55,050
conversions and then we'll do theme

00:19:53,070 --> 00:19:56,730
functions later so right now if you were

00:19:55,050 --> 00:19:58,560
to go and play with a giant mega patch

00:19:56,730 --> 00:20:00,600
it's only going to comfort PHP templates

00:19:58,560 --> 00:20:01,950
to to wake templates but what we can do

00:20:00,600 --> 00:20:03,360
is go through all of those other

00:20:01,950 --> 00:20:04,680
functions later and be like do we need

00:20:03,360 --> 00:20:07,020
this throw it out if we don't need it

00:20:04,680 --> 00:20:08,430
okay we do anything let's see it would

00:20:07,020 --> 00:20:10,200
it be better served as a theme function

00:20:08,430 --> 00:20:11,490
or wait why is this even in the theme

00:20:10,200 --> 00:20:12,660
system we have themed functions that

00:20:11,490 --> 00:20:15,180
don't need to be themed functions so

00:20:12,660 --> 00:20:16,790
refactoring the whole thing with a kind

00:20:15,180 --> 00:20:19,320
of a holistic approach from top down

00:20:16,790 --> 00:20:21,600
takes time and we want to do it but

00:20:19,320 --> 00:20:23,400
there's only so much of us so come to

00:20:21,600 --> 00:20:24,840
the sprint on Friday and we can

00:20:23,400 --> 00:20:25,890
hopefully make this make more sense to

00:20:24,840 --> 00:20:29,280
people with a single way to override

00:20:25,890 --> 00:20:32,580
markup so and to do and the other thing

00:20:29,280 --> 00:20:35,040
here was that when I mean it seemed

00:20:32,580 --> 00:20:37,650
function is just some PHP code that's

00:20:35,040 --> 00:20:40,110
pretty fast it's not even going through

00:20:37,650 --> 00:20:42,240
the whole templating system and when we

00:20:40,110 --> 00:20:45,060
started this process and kind of had

00:20:42,240 --> 00:20:47,490
this first kind of work in progress mega

00:20:45,060 --> 00:20:49,920
mega patch which had like all the same

00:20:47,490 --> 00:20:51,350
function and everything converted we did

00:20:49,920 --> 00:20:54,740
some profiling on it

00:20:51,350 --> 00:20:57,350
pretty bad because as Jen said there

00:20:54,740 --> 00:21:01,669
were things like seemed HTML tag which

00:20:57,350 --> 00:21:05,419
template was just output and you really

00:21:01,669 --> 00:21:07,970
don't need a template for the end so um

00:21:05,419 --> 00:21:10,160
where we're going is into a direction

00:21:07,970 --> 00:21:11,990
where drupal is still fast by default

00:21:10,160 --> 00:21:15,200
and talk a little bit more about that

00:21:11,990 --> 00:21:18,470
later and but you for everything you can

00:21:15,200 --> 00:21:20,660
implement template and then the Drupal

00:21:18,470 --> 00:21:23,600
kinship with some example files and

00:21:20,660 --> 00:21:25,730
those can be used just copy it into your

00:21:23,600 --> 00:21:29,510
seam remove the example and you are all

00:21:25,730 --> 00:21:32,270
set yeah and in Drupal 7 the theme

00:21:29,510 --> 00:21:36,380
system get a little crazy we had a bunch

00:21:32,270 --> 00:21:40,429
of back-end developers who we have

00:21:36,380 --> 00:21:41,450
pictures late yeah yeah we they they

00:21:40,429 --> 00:21:42,950
were like oh this should be a thing

00:21:41,450 --> 00:21:47,110
function because I has HTML and they

00:21:42,950 --> 00:21:49,429
just did that like crazy and with twig

00:21:47,110 --> 00:21:57,500
front-end developers are taking control

00:21:49,429 --> 00:21:59,450
of the theme system and and and Morton

00:21:57,500 --> 00:22:02,240
has promised that he will spank any

00:21:59,450 --> 00:22:09,020
back-end developer who yeah that sounds

00:22:02,240 --> 00:22:11,179
bad actually nevermind yes cool it will

00:22:09,020 --> 00:22:14,809
school any back-end developer is true I

00:22:11,179 --> 00:22:18,620
know yeah on any proper method of adding

00:22:14,809 --> 00:22:21,169
a twig file and we I want all of us to

00:22:18,620 --> 00:22:22,490
work together so that we don't have the

00:22:21,169 --> 00:22:25,340
issues that we've had in the past where

00:22:22,490 --> 00:22:26,450
the back end developers were just you

00:22:25,340 --> 00:22:28,220
know they didn't have any direction from

00:22:26,450 --> 00:22:30,740
us and they just did whatever they

00:22:28,220 --> 00:22:32,960
thought was right and they had no clue

00:22:30,740 --> 00:22:35,030
what they were doing really so we need

00:22:32,960 --> 00:22:37,970
everybody to get involved and and take

00:22:35,030 --> 00:22:39,799
control of the theme system and the

00:22:37,970 --> 00:22:42,049
front-end developers have now taken over

00:22:39,799 --> 00:22:46,460
the performance department so we own a

00:22:42,049 --> 00:22:48,280
good way so yeah there's a lot there's

00:22:46,460 --> 00:22:50,390
way too many versions of everything

00:22:48,280 --> 00:22:51,590
probably because every module developer

00:22:50,390 --> 00:22:53,720
decided to create their own theme

00:22:51,590 --> 00:22:55,280
function any time they had any output to

00:22:53,720 --> 00:22:56,510
produce so one of the things we're

00:22:55,280 --> 00:22:57,500
noticing is that we've got a bunch of

00:22:56,510 --> 00:22:58,909
different functions that I'll do the

00:22:57,500 --> 00:23:00,740
same thing so what we're trying to do is

00:22:58,909 --> 00:23:02,330
consolidate and instead of saying you

00:23:00,740 --> 00:23:03,470
know this doesn't need to be a theme

00:23:02,330 --> 00:23:05,059
function this does we're saying these

00:23:03,470 --> 00:23:06,440
two things are almost the same is there

00:23:05,059 --> 00:23:08,690
we can use the same function for these

00:23:06,440 --> 00:23:10,789
and in the process of analyzing all of

00:23:08,690 --> 00:23:12,649
the mark-up Drupal Drupal normally

00:23:10,789 --> 00:23:14,179
produces we can put together kind of a

00:23:12,649 --> 00:23:17,090
set of components that are like these

00:23:14,179 --> 00:23:18,679
are the standard patterns of HTML that

00:23:17,090 --> 00:23:19,700
are used all around Drupal and if you

00:23:18,679 --> 00:23:21,710
need to implement something in the

00:23:19,700 --> 00:23:23,029
future module developer use one of these

00:23:21,710 --> 00:23:24,889
things that already exists don't write

00:23:23,029 --> 00:23:27,019
your own so we're also going through a

00:23:24,889 --> 00:23:28,549
whole holistic kind of what's the most

00:23:27,019 --> 00:23:29,840
important patterns we see and dribble

00:23:28,549 --> 00:23:31,039
and can we create templates that

00:23:29,840 --> 00:23:32,389
encourage people to follow those

00:23:31,039 --> 00:23:36,620
patterns instead of slightly breaking

00:23:32,389 --> 00:23:37,909
them for their own purposes and so these

00:23:36,620 --> 00:23:39,919
are lists of all of our template

00:23:37,909 --> 00:23:41,269
actually it's probably not enough

00:23:39,919 --> 00:23:43,519
because this is before we had some new

00:23:41,269 --> 00:23:45,409
modules get in the car but this is the

00:23:43,519 --> 00:23:47,749
the code we're looking at cleaning up

00:23:45,409 --> 00:23:50,929
here you just need two doubles at one

00:23:47,749 --> 00:23:52,879
side to have few said it yeah just twice

00:23:50,929 --> 00:23:55,009
as many as you could not pick out in

00:23:52,879 --> 00:23:56,960
that list so again this is something

00:23:55,009 --> 00:23:58,399
that takes a lot of time trying to break

00:23:56,960 --> 00:23:59,929
down everything we have so we're working

00:23:58,399 --> 00:24:02,090
on it we could do some help to come to

00:23:59,929 --> 00:24:05,090
this print on Friday and we're going to

00:24:02,090 --> 00:24:07,460
mark that one is to do as well so the

00:24:05,090 --> 00:24:08,929
next problem is in security this is

00:24:07,460 --> 00:24:10,909
something that plagues everyone whether

00:24:08,929 --> 00:24:12,529
they know about it or not usually more

00:24:10,909 --> 00:24:14,090
when they don't know about it just

00:24:12,529 --> 00:24:15,830
because Drupal makes it really easy to

00:24:14,090 --> 00:24:18,440
do things in a way that's really bad for

00:24:15,830 --> 00:24:21,409
your site for example when you need to

00:24:18,440 --> 00:24:23,629
get at the data of something in Drupal 7

00:24:21,409 --> 00:24:25,009
you have a node object there and you can

00:24:23,629 --> 00:24:27,169
just drill right into it and grab

00:24:25,009 --> 00:24:28,399
whatever you need and it's PHP so you

00:24:27,169 --> 00:24:30,139
can just print it right to the page no

00:24:28,399 --> 00:24:31,789
problem well actually it is a problem

00:24:30,139 --> 00:24:33,080
most people who are doing this don't

00:24:31,789 --> 00:24:35,299
know it's a problem they don't know that

00:24:33,080 --> 00:24:36,649
needs to be sanitized they don't know it

00:24:35,299 --> 00:24:38,210
might need to be translated they don't

00:24:36,649 --> 00:24:39,440
know what's going on in that data they

00:24:38,210 --> 00:24:42,470
just know it's there and they can use it

00:24:39,440 --> 00:24:43,999
so they do what we want to do in twig is

00:24:42,470 --> 00:24:45,320
make that sanitization happen

00:24:43,999 --> 00:24:46,999
automatically so that you have a

00:24:45,320 --> 00:24:48,470
variable there and you can drill into it

00:24:46,999 --> 00:24:50,419
you can print it to the page and the

00:24:48,470 --> 00:24:51,799
instant you say print this thing to a Go

00:24:50,419 --> 00:24:53,419
Go hold on a minute let me get you a

00:24:51,799 --> 00:24:55,070
safe version to use and gives you what

00:24:53,419 --> 00:24:56,809
you need so we want to make that

00:24:55,070 --> 00:24:58,399
invisible so front-end developers can

00:24:56,809 --> 00:25:00,169
focus on what they're good at their HTML

00:24:58,399 --> 00:25:02,419
CSS JavaScript to not have to care about

00:25:00,169 --> 00:25:04,159
the Drupal and hopefully that'll make

00:25:02,419 --> 00:25:05,899
things go a little bit better I was

00:25:04,159 --> 00:25:07,399
actually creating this set of slides for

00:25:05,899 --> 00:25:08,749
the first time and I was like well you

00:25:07,399 --> 00:25:10,009
know what's really horrible some people

00:25:08,749 --> 00:25:12,320
put sequel queries in their template

00:25:10,009 --> 00:25:13,429
files hahaha and so i type Lin and then

00:25:12,320 --> 00:25:14,529
I got distracted by something and

00:25:13,429 --> 00:25:16,850
accidentally reloaded my page and

00:25:14,529 --> 00:25:17,530
actually dropped my node table when I

00:25:16,850 --> 00:25:20,650
was creating

00:25:17,530 --> 00:25:22,630
a second one so I was like man our game

00:25:20,650 --> 00:25:25,360
system is so dumb it should not let that

00:25:22,630 --> 00:25:26,710
happen so another thing we want to do is

00:25:25,360 --> 00:25:28,330
make sure that only the functions that

00:25:26,710 --> 00:25:30,100
we want people to be able to use in

00:25:28,330 --> 00:25:32,320
template files are allowed so you can't

00:25:30,100 --> 00:25:33,970
do things like run database queries and

00:25:32,320 --> 00:25:37,720
get yourself into a lot of trouble when

00:25:33,970 --> 00:25:40,660
you're working on presentations so um

00:25:37,720 --> 00:25:42,340
we've got a auto escape feature in twig

00:25:40,660 --> 00:25:43,510
that we're learning how to implement for

00:25:42,340 --> 00:25:45,040
Drupal which will help with the

00:25:43,510 --> 00:25:46,420
sanitization we've got us three

00:25:45,040 --> 00:25:48,340
different approaches of how we can turn

00:25:46,420 --> 00:25:50,470
that on so that'll definitely happen in

00:25:48,340 --> 00:25:51,850
one way or another and we're limiting

00:25:50,470 --> 00:25:53,110
the PHP functions that are allowed and

00:25:51,850 --> 00:25:55,240
it was probably some of you who are like

00:25:53,110 --> 00:25:57,100
don't take away my PHP well that's okay

00:25:55,240 --> 00:25:58,540
remember how we said to is extendable if

00:25:57,100 --> 00:25:59,590
you have some crazy use case where you

00:25:58,540 --> 00:26:01,450
need to add some functions that we

00:25:59,590 --> 00:26:04,390
haven't thought of you can do it you can

00:26:01,450 --> 00:26:05,950
extend it to do whatever you need so

00:26:04,390 --> 00:26:09,970
that's what you can even put that DB

00:26:05,950 --> 00:26:13,990
drop back no don't do that don't don't

00:26:09,970 --> 00:26:16,420
do that mostly fixed so the next problem

00:26:13,990 --> 00:26:18,610
is that the language of Drupal least in

00:26:16,420 --> 00:26:20,740
the front end in Drupal 7 in particular

00:26:18,610 --> 00:26:22,750
was getting too specific to only Drupal

00:26:20,740 --> 00:26:24,340
so you're having a hard time onboarding

00:26:22,750 --> 00:26:26,230
people who are experts in HTML and CSS

00:26:24,340 --> 00:26:27,550
and JavaScript because they need to know

00:26:26,230 --> 00:26:29,920
all of the Drupal that's stuck into

00:26:27,550 --> 00:26:31,240
these files we want to take the dribble

00:26:29,920 --> 00:26:33,580
out and make the files look more like

00:26:31,240 --> 00:26:36,340
what they were used to working with and

00:26:33,580 --> 00:26:38,230
also make it more approachable to anyone

00:26:36,340 --> 00:26:40,810
so if you know twig we want to bring you

00:26:38,230 --> 00:26:41,980
in if you know any other similar

00:26:40,810 --> 00:26:43,840
framework we want to be able to bring

00:26:41,980 --> 00:26:45,520
you into and the first place you look

00:26:43,840 --> 00:26:47,140
when you try and customize something in

00:26:45,520 --> 00:26:48,910
Drupal as usually in the front end so we

00:26:47,140 --> 00:26:52,060
want those files to be legible readable

00:26:48,910 --> 00:26:53,320
approachable and not scary so the fact

00:26:52,060 --> 00:26:55,690
that twig is used elsewhere on the web

00:26:53,320 --> 00:26:57,910
is good it's syntactically too similar

00:26:55,690 --> 00:26:59,560
to other languages which is also good

00:26:57,910 --> 00:27:01,270
and it's going to look a lot more like

00:26:59,560 --> 00:27:03,520
HTML by the time we're done with it less

00:27:01,270 --> 00:27:05,080
PHP functions more template files and

00:27:03,520 --> 00:27:09,460
hopefully people will find that more

00:27:05,080 --> 00:27:12,460
appealing so that's fixed and the last

00:27:09,460 --> 00:27:14,020
one this is really hard to fix but

00:27:12,460 --> 00:27:17,380
Drupal right now is running a really

00:27:14,020 --> 00:27:20,050
really complicated set of systems in

00:27:17,380 --> 00:27:23,230
order to generate content on the page it

00:27:20,050 --> 00:27:25,000
looks a little bit like this so if you

00:27:23,230 --> 00:27:26,590
tried to follow the path of a page

00:27:25,000 --> 00:27:28,450
request to figure out where some

00:27:26,590 --> 00:27:30,730
variable is coming from you'll notice

00:27:28,450 --> 00:27:31,640
that it doesn't just come from one place

00:27:30,730 --> 00:27:33,050
and go to some

00:27:31,640 --> 00:27:35,330
replace it kind of goes around in

00:27:33,050 --> 00:27:37,490
circles and triangles and death spirals

00:27:35,330 --> 00:27:40,430
yeah this was a slide that I presented

00:27:37,490 --> 00:27:42,920
at dribble con San Francisco trying to

00:27:40,430 --> 00:27:45,380
explain you know that the new theming

00:27:42,920 --> 00:27:49,550
system that we just created to back-end

00:27:45,380 --> 00:27:51,980
developers and it was it was really

00:27:49,550 --> 00:27:53,240
really frightening and once I laid it

00:27:51,980 --> 00:27:56,060
out like this I tried explaining it in

00:27:53,240 --> 00:28:00,620
60 seconds or less it was very very

00:27:56,060 --> 00:28:02,060
challenging but we noticed that once I

00:28:00,620 --> 00:28:03,980
laid it out like this that there was

00:28:02,060 --> 00:28:08,500
some sort of hidden messages about this

00:28:03,980 --> 00:28:08,500
system you don't have that slide oh

00:28:08,530 --> 00:28:14,960
there's a video for a better slide that

00:28:11,360 --> 00:28:20,840
anyway so this is like crazy crazy

00:28:14,960 --> 00:28:26,810
complicated I I don't even know how to

00:28:20,840 --> 00:28:28,850
just I don't have to explain it yeah you

00:28:26,810 --> 00:28:30,740
know lived this you know how horrible

00:28:28,850 --> 00:28:32,990
this is there's just too many different

00:28:30,740 --> 00:28:35,120
things going on all at the same time the

00:28:32,990 --> 00:28:38,030
point is what we want to try to do is

00:28:35,120 --> 00:28:41,870
kind of to say to you use a template and

00:28:38,030 --> 00:28:43,100
don't care about the rest so what we're

00:28:41,870 --> 00:28:45,230
going to try and do is fix this up a

00:28:43,100 --> 00:28:46,550
little bit in Drupal 8 and the first

00:28:45,230 --> 00:28:48,230
thing we want to do is remove theme

00:28:46,550 --> 00:28:49,610
functions right so we only have template

00:28:48,230 --> 00:28:51,500
files and if we can do that it

00:28:49,610 --> 00:28:53,300
eliminates two of these subsystems the

00:28:51,500 --> 00:28:55,850
original theme function and the theme

00:28:53,300 --> 00:28:57,560
override you put in your theme the next

00:28:55,850 --> 00:28:59,960
thing we want to do is remove process

00:28:57,560 --> 00:29:02,180
functions this was a another layer of

00:28:59,960 --> 00:29:04,970
processing that went between pre process

00:29:02,180 --> 00:29:06,470
and rendering and templates that we

00:29:04,970 --> 00:29:07,910
added basically so that we could flatten

00:29:06,470 --> 00:29:09,140
arrays in two strings so that in the

00:29:07,910 --> 00:29:10,760
preprocessed later you can stick your

00:29:09,140 --> 00:29:12,110
classes into an array and in the

00:29:10,760 --> 00:29:13,100
template you could print classes and it

00:29:12,110 --> 00:29:14,440
would come out as a string when we

00:29:13,100 --> 00:29:16,640
needed someplace to make that happen

00:29:14,440 --> 00:29:18,080
weltweit can do that for us it can do

00:29:16,640 --> 00:29:19,460
that when you say show me the classes it

00:29:18,080 --> 00:29:21,440
goes hold on let me make that array into

00:29:19,460 --> 00:29:23,750
a string for you OOP so we don't need

00:29:21,440 --> 00:29:26,240
that whole layer of rendering in there

00:29:23,750 --> 00:29:28,640
to make all of that happen so and this

00:29:26,240 --> 00:29:30,230
is actually not entirely thanks to twig

00:29:28,640 --> 00:29:32,570
there a whole bunch of advancements in

00:29:30,230 --> 00:29:33,980
PHP that make this possible so using a

00:29:32,570 --> 00:29:36,170
new version of PHP made as possible but

00:29:33,980 --> 00:29:37,520
wait does it already so by using twig we

00:29:36,170 --> 00:29:40,580
can get rid of the process layer which

00:29:37,520 --> 00:29:42,950
will help a lot too we'd like to remove

00:29:40,580 --> 00:29:45,430
the entire Drupal render pipeline as

00:29:42,950 --> 00:29:47,800
well drupal render was something that we

00:29:45,430 --> 00:29:49,360
created in Drupal 7 so that you could do

00:29:47,800 --> 00:29:51,400
really complicated things with all of

00:29:49,360 --> 00:29:56,920
your content at the very last minute not

00:29:51,400 --> 00:29:59,320
we this isn't it sorry someone created

00:29:56,920 --> 00:30:00,580
and its really really powerful as long

00:29:59,320 --> 00:30:03,130
as you know how to do exactly what you

00:30:00,580 --> 00:30:06,610
want with it but there's one person who

00:30:03,130 --> 00:30:09,970
knew exactly what they want with it it

00:30:06,610 --> 00:30:11,980
might be John and so for him it's great

00:30:09,970 --> 00:30:13,480
but he still hates it so we're like well

00:30:11,980 --> 00:30:15,790
if it's great but you hate it maybe it's

00:30:13,480 --> 00:30:17,680
not the right tool for the job so what

00:30:15,790 --> 00:30:19,240
we want to do is let twink twig actually

00:30:17,680 --> 00:30:20,800
handle the rendering of all of those

00:30:19,240 --> 00:30:22,600
things when you say hey give me a note

00:30:20,800 --> 00:30:23,770
or twig will say hey I know a notifier

00:30:22,600 --> 00:30:25,300
supposed to be a link here's the link

00:30:23,770 --> 00:30:27,070
and give it to you without having to run

00:30:25,300 --> 00:30:28,960
through the render system so this is

00:30:27,070 --> 00:30:30,730
something that's been on our list of to

00:30:28,960 --> 00:30:32,110
do's for a really really long time and

00:30:30,730 --> 00:30:33,160
we postponed it because we're like oh

00:30:32,110 --> 00:30:35,590
we're not going to get to it and then

00:30:33,160 --> 00:30:37,570
yesterday when I tried to make a theme

00:30:35,590 --> 00:30:39,370
without it I realized that it's not good

00:30:37,570 --> 00:30:41,710
enough we have to fix this render

00:30:39,370 --> 00:30:43,150
problem so we're going to go back to the

00:30:41,710 --> 00:30:44,710
board we've got some working ideas of

00:30:43,150 --> 00:30:47,320
how to solve it and see if we can get

00:30:44,710 --> 00:30:49,720
that done ASAP so come to this print on

00:30:47,320 --> 00:30:51,430
Friday and the next thing we'd like to

00:30:49,720 --> 00:30:52,960
do is a hook page elter we need to get

00:30:51,430 --> 00:30:55,000
rid of that that's kind of a big

00:30:52,960 --> 00:30:56,680
question mark it might be the

00:30:55,000 --> 00:31:00,400
responsibility of a core initiative

00:30:56,680 --> 00:31:02,260
called scotch it might not happen it

00:31:00,400 --> 00:31:03,790
might who knows we don't know we don't

00:31:02,260 --> 00:31:05,380
like it we want to kill it we're going

00:31:03,790 --> 00:31:08,650
to figure out how but it might not

00:31:05,380 --> 00:31:10,390
happen in interpolate we'd also like to

00:31:08,650 --> 00:31:13,120
get rid of template preprocess and the

00:31:10,390 --> 00:31:14,170
entire preprocess layer and now you'll

00:31:13,120 --> 00:31:15,760
notice that the title of the slide

00:31:14,170 --> 00:31:17,110
change to drupal nine because we

00:31:15,760 --> 00:31:19,150
probably won't have time to do this into

00:31:17,110 --> 00:31:20,800
your plate but it's one of these things

00:31:19,150 --> 00:31:21,760
where you know a lot of people who are

00:31:20,800 --> 00:31:23,440
already theme developers you're like

00:31:21,760 --> 00:31:25,090
wait wait that's my favorite toy why are

00:31:23,440 --> 00:31:26,650
you taking that away what we want to

00:31:25,090 --> 00:31:28,360
give you another toy that that's exactly

00:31:26,650 --> 00:31:30,610
the same thing but doesn't require

00:31:28,360 --> 00:31:31,870
Drupal to stop what it's doing and get a

00:31:30,610 --> 00:31:33,160
bunch of stuff ready that you're never

00:31:31,870 --> 00:31:34,810
going to use and then start what it's

00:31:33,160 --> 00:31:36,040
doing again and so we want to give you

00:31:34,810 --> 00:31:37,810
the same tool probably a different name

00:31:36,040 --> 00:31:39,070
that does exactly the same thing that'll

00:31:37,810 --> 00:31:41,770
work a little more efficiently with the

00:31:39,070 --> 00:31:44,260
rest of twig so there's a lot of

00:31:41,770 --> 00:31:45,640
preprocess functions in core and we need

00:31:44,260 --> 00:31:48,040
to do a lot of work on cleaning them up

00:31:45,640 --> 00:31:49,810
in Drupal 8 and then a lot more work on

00:31:48,040 --> 00:31:54,100
getting rid of them entirely in triple

00:31:49,810 --> 00:31:56,680
nine but I mean just that alone gets rid

00:31:54,100 --> 00:31:58,490
of a lot of those complicated subsystems

00:31:56,680 --> 00:32:00,590
that are going on in Drupal 7 and

00:31:58,490 --> 00:32:02,090
think that'll help make the process of

00:32:00,590 --> 00:32:03,890
creating themes a lot simpler for

00:32:02,090 --> 00:32:06,800
everyone as well the most important part

00:32:03,890 --> 00:32:08,990
here is it's no longer visible to the

00:32:06,800 --> 00:32:12,110
sea men that we are kind of hiding all

00:32:08,990 --> 00:32:13,820
that complexity some of it is still

00:32:12,110 --> 00:32:16,280
available kind of in the back end and

00:32:13,820 --> 00:32:18,440
you can still all do crazy stuff i mean

00:32:16,280 --> 00:32:22,370
drupal you can do everything with 20

00:32:18,440 --> 00:32:24,440
ways but the usual seema that just once

00:32:22,370 --> 00:32:26,840
it seemed done it just wants to add the

00:32:24,440 --> 00:32:29,360
change this tag and just wants to change

00:32:26,840 --> 00:32:32,210
this list and just months to add a class

00:32:29,360 --> 00:32:38,150
here can do that and thats kind as a

00:32:32,210 --> 00:32:40,340
goal to make it consistent and usable so

00:32:38,150 --> 00:32:42,290
we've got a lot of stuff to remove we

00:32:40,340 --> 00:32:43,580
like cutting stuff out of core but

00:32:42,290 --> 00:32:46,059
that's going take a lot of work so we're

00:32:43,580 --> 00:32:49,010
going to mark that one as to do as well

00:32:46,059 --> 00:32:50,090
so I don't know do you guys think twig

00:32:49,010 --> 00:32:51,380
is going to help us get through all of

00:32:50,090 --> 00:32:59,480
these problems for having the triple

00:32:51,380 --> 00:33:01,280
seven okay we do too um so as it turns

00:32:59,480 --> 00:33:02,540
out we are going through this process of

00:33:01,280 --> 00:33:04,340
saying hey okay well now that we're

00:33:02,540 --> 00:33:05,570
using twig let's kind of look at the way

00:33:04,340 --> 00:33:07,460
we're doing things in Drupal with a new

00:33:05,570 --> 00:33:08,809
I and see what else we get out of it and

00:33:07,460 --> 00:33:10,490
it turns out that there's a bunch of

00:33:08,809 --> 00:33:12,350
cool stuff that we get for free the way

00:33:10,490 --> 00:33:15,860
like had never anticipated even being

00:33:12,350 --> 00:33:17,179
possible um the first one is that people

00:33:15,860 --> 00:33:19,190
want to be able to edit stuff in the

00:33:17,179 --> 00:33:21,620
browser right having an IDE or some

00:33:19,190 --> 00:33:23,420
complicated workflow to change things is

00:33:21,620 --> 00:33:24,890
great for those of us who already work

00:33:23,420 --> 00:33:26,150
that way but it's a bunch of people were

00:33:24,890 --> 00:33:27,260
like I just want to change this template

00:33:26,150 --> 00:33:29,900
file can you just show it to me and then

00:33:27,260 --> 00:33:33,559
I can tip edit and hit save and guess

00:33:29,900 --> 00:33:35,720
what there's a module and contribute or

00:33:33,559 --> 00:33:37,790
contemplate which does that and it's

00:33:35,720 --> 00:33:39,980
been doing that with PHP for a really

00:33:37,790 --> 00:33:41,690
long time just a really horrible idea so

00:33:39,980 --> 00:33:44,720
nobody go install it right now don't do

00:33:41,690 --> 00:33:47,120
this it's bad but with using something

00:33:44,720 --> 00:33:49,190
like twig that's no longer PHP code it's

00:33:47,120 --> 00:33:50,600
now safe to save it you can edit it you

00:33:49,190 --> 00:33:52,160
can make changes you can save it it's

00:33:50,600 --> 00:33:54,530
not going to you know explode your

00:33:52,160 --> 00:33:55,970
database or whatever contemplate was

00:33:54,530 --> 00:33:58,750
going to do when you weren't looking and

00:33:55,970 --> 00:34:01,370
it will even be fast and it will be fast

00:33:58,750 --> 00:34:03,170
so yeah we got a huge win by being able

00:34:01,370 --> 00:34:04,940
to finally added this stuff yeah the the

00:34:03,170 --> 00:34:07,730
the favorite thing to do with

00:34:04,940 --> 00:34:09,440
contemplate was to edit your PHP file

00:34:07,730 --> 00:34:11,480
and accidentally introduced a syntax

00:34:09,440 --> 00:34:12,200
error and then have your entire site

00:34:11,480 --> 00:34:13,849
going

00:34:12,200 --> 00:34:15,200
widescreen and have no way to edit it

00:34:13,849 --> 00:34:19,879
because now your website's a white

00:34:15,200 --> 00:34:21,429
screen yeah what twig though basically

00:34:19,879 --> 00:34:25,310
it would do validation and it would not

00:34:21,429 --> 00:34:27,530
allow you to save that file or or even

00:34:25,310 --> 00:34:29,149
if it did it would just it would just

00:34:27,530 --> 00:34:32,419
skip that template and go on to

00:34:29,149 --> 00:34:34,429
something else so so saving PHP go to

00:34:32,419 --> 00:34:36,260
the database is bad twig in the

00:34:34,429 --> 00:34:38,929
databases okay you can also save it to

00:34:36,260 --> 00:34:41,419
disk much was like contemplate become

00:34:38,929 --> 00:34:42,859
useful again which is great and people

00:34:41,419 --> 00:34:44,300
who are used to systems like wordpress

00:34:42,859 --> 00:34:46,129
or other tools to give you in browser

00:34:44,300 --> 00:34:47,300
editing we can build something in

00:34:46,129 --> 00:34:51,079
contribs it would do something similar

00:34:47,300 --> 00:34:55,790
to make those people have also twig is a

00:34:51,079 --> 00:34:57,619
language that's mah but it also can be

00:34:55,790 --> 00:34:59,420
used in conjunction with other languages

00:34:57,619 --> 00:35:01,040
that aren't PHP ish for example a

00:34:59,420 --> 00:35:02,720
JavaScript so if you wanted to use the

00:35:01,040 --> 00:35:05,839
same template file on the back end as

00:35:02,720 --> 00:35:07,790
the front end you can do that so for

00:35:05,839 --> 00:35:09,680
example if you're doing a ajax page

00:35:07,790 --> 00:35:10,790
rebuild right where you edit save and

00:35:09,680 --> 00:35:11,839
you don't want to reload the whole page

00:35:10,790 --> 00:35:14,119
just want to load the piece of the page

00:35:11,839 --> 00:35:16,280
you changed you can just say template

00:35:14,119 --> 00:35:19,240
file to render that from PHP as you can

00:35:16,280 --> 00:35:21,200
in javascript so they're already

00:35:19,240 --> 00:35:22,599
packages out there that do this in

00:35:21,200 --> 00:35:24,770
particular there's one called Twix jas

00:35:22,599 --> 00:35:26,180
that because we're using something like

00:35:24,770 --> 00:35:27,589
twig we can just integrate with this

00:35:26,180 --> 00:35:28,880
other project and build a really cool

00:35:27,589 --> 00:35:31,839
contraband tool that lets you do that

00:35:28,880 --> 00:35:34,400
both ways so I think that's really cool

00:35:31,839 --> 00:35:35,869
and then the biggest thing for me and

00:35:34,400 --> 00:35:37,369
this is just this is definitely a pipe

00:35:35,869 --> 00:35:40,190
dream but if someone here wants to build

00:35:37,369 --> 00:35:41,450
it I'll be your best friend we finally

00:35:40,190 --> 00:35:43,700
have the ability to have dual a

00:35:41,450 --> 00:35:45,619
communication between the code and the

00:35:43,700 --> 00:35:47,450
user interface so for a really long time

00:35:45,619 --> 00:35:48,920
we've always had this issue of like okay

00:35:47,450 --> 00:35:50,359
you know I'm I went on the theme

00:35:48,920 --> 00:35:52,609
settings and I changed something and

00:35:50,359 --> 00:35:53,900
then my template file I did something

00:35:52,609 --> 00:35:55,069
else and the two things disagree with

00:35:53,900 --> 00:35:56,329
each other like this those don't print

00:35:55,069 --> 00:35:58,220
the menu and this was print the menu

00:35:56,329 --> 00:35:59,569
which one wins and for forever we

00:35:58,220 --> 00:36:00,829
visible the code always wins I mean

00:35:59,569 --> 00:36:02,119
we'll just break the user interface it's

00:36:00,829 --> 00:36:03,440
no big deal like that checkbox won't do

00:36:02,119 --> 00:36:05,270
anything anymore I'll remove the if

00:36:03,440 --> 00:36:06,680
check it'll be fine but then you have

00:36:05,270 --> 00:36:08,089
some poor end user who's like I keep

00:36:06,680 --> 00:36:10,550
checking the checkbox and saving the

00:36:08,089 --> 00:36:12,760
page nothing's happening well finally we

00:36:10,550 --> 00:36:15,020
have the ability to like hey hey twig

00:36:12,760 --> 00:36:16,339
has this file been changed into it'll be

00:36:15,020 --> 00:36:17,869
like yeah you know someone removed that

00:36:16,339 --> 00:36:20,089
if statement or you know that variable

00:36:17,869 --> 00:36:21,440
doesn't exist and then Drupal go well

00:36:20,089 --> 00:36:23,720
i'm just going to disable this checkbox

00:36:21,440 --> 00:36:25,099
so someone goes to the settings page and

00:36:23,720 --> 00:36:25,790
it says you know sorry your templates

00:36:25,099 --> 00:36:28,070
been overridden

00:36:25,790 --> 00:36:29,540
and the settings are disabled there's at

00:36:28,070 --> 00:36:30,560
least a cue to the user that oh they

00:36:29,540 --> 00:36:31,850
can't change the store not going to keep

00:36:30,560 --> 00:36:34,460
clicking the button and wondering what's

00:36:31,850 --> 00:36:35,900
going on so that's like a you know

00:36:34,460 --> 00:36:37,610
low-level like okay two-way

00:36:35,900 --> 00:36:39,260
communication cool but if you take that

00:36:37,610 --> 00:36:41,180
one step further and say if twig can

00:36:39,260 --> 00:36:44,540
trap to talk to Drupal and make it to

00:36:41,180 --> 00:36:46,550
stuff like disable files maybe we can go

00:36:44,540 --> 00:36:48,350
once observer further and say well okay

00:36:46,550 --> 00:36:50,600
the normal workflow for creating a theme

00:36:48,350 --> 00:36:52,460
is writing this beautiful HTML and CSS

00:36:50,600 --> 00:36:54,050
and then handing it over to a femur

00:36:52,460 --> 00:36:55,790
developer and saying make triple do this

00:36:54,050 --> 00:36:57,290
and then developer i just sent a lot of

00:36:55,790 --> 00:36:58,250
times like cutting up until pieces and

00:36:57,290 --> 00:37:00,140
figuring out where to put it and

00:36:58,250 --> 00:37:01,790
building architecture that matches and

00:37:00,140 --> 00:37:03,470
then like sticking it on it doesn't

00:37:01,790 --> 00:37:04,820
always work right well what if you could

00:37:03,470 --> 00:37:06,530
just take that template file and throw

00:37:04,820 --> 00:37:08,360
it into your twig theme into it well

00:37:06,530 --> 00:37:09,620
with your new jeans click would say okay

00:37:08,360 --> 00:37:12,050
I see that you've put this lock in this

00:37:09,620 --> 00:37:14,950
region and this field over here so here

00:37:12,050 --> 00:37:18,650
you go I built your Drupal site for you

00:37:14,950 --> 00:37:21,380
yay okay so it's it's it's got to have

00:37:18,650 --> 00:37:23,030
the architecture it's kinda have the

00:37:21,380 --> 00:37:24,200
architecture to match you got to know

00:37:23,030 --> 00:37:25,700
the name with a block you got to know

00:37:24,200 --> 00:37:27,170
the name of the field but there is a

00:37:25,700 --> 00:37:29,060
possibility for something like this to

00:37:27,170 --> 00:37:31,370
actually happen which is definitely

00:37:29,060 --> 00:37:34,040
going to completely revolutionize the

00:37:31,370 --> 00:37:36,380
Drupal world if not the whole world and

00:37:34,040 --> 00:37:39,200
so I think that's the coolest thing ever

00:37:36,380 --> 00:37:43,520
so anyone working on that start coding

00:37:39,200 --> 00:37:47,210
already and um we are working very hard

00:37:43,520 --> 00:37:50,600
at the moment to get quick trick in core

00:37:47,210 --> 00:37:54,320
so that we can do all those things later

00:37:50,600 --> 00:37:56,780
in contrib as well so that's one very

00:37:54,320 --> 00:37:59,210
important goal of our initiative that

00:37:56,780 --> 00:38:01,790
even if we cannot get to all things now

00:37:59,210 --> 00:38:05,900
in core we are enabling contrib to do

00:38:01,790 --> 00:38:07,910
endless possibilities all right so

00:38:05,900 --> 00:38:09,380
that's like our basic our basic idea

00:38:07,910 --> 00:38:11,960
here but there's a lot of stuff that you

00:38:09,380 --> 00:38:17,930
can do to make your twig different from

00:38:11,960 --> 00:38:20,390
our twig yeah just be quick what we did

00:38:17,930 --> 00:38:23,990
was we shout we edit really nice

00:38:20,390 --> 00:38:26,480
debugging output so there's a key cool

00:38:23,990 --> 00:38:29,210
trick t-back equals true and we just

00:38:26,480 --> 00:38:31,460
need to get quickly back to our test

00:38:29,210 --> 00:38:36,260
same here and take a look at the source

00:38:31,460 --> 00:38:37,910
and what you can see is for each of

00:38:36,260 --> 00:38:41,809
those nodes and

00:38:37,910 --> 00:38:44,140
as a team course like our region etc you

00:38:41,809 --> 00:38:47,839
see the file name you see the same

00:38:44,140 --> 00:38:50,329
suggestions and everything so you're

00:38:47,839 --> 00:38:52,730
easily able to kind of now what

00:38:50,329 --> 00:39:02,799
templates could I use here and that's a

00:38:52,730 --> 00:39:05,359
useful debug output wave build so

00:39:02,799 --> 00:39:08,089
activating the back is one way kind of

00:39:05,359 --> 00:39:10,430
to always rebuild your templates while

00:39:08,089 --> 00:39:12,740
you are working on them currently in

00:39:10,430 --> 00:39:15,440
Drupal 8 it needs to be fast by default

00:39:12,740 --> 00:39:17,930
for production side so if you are

00:39:15,440 --> 00:39:20,839
editing a template nothing happens and

00:39:17,930 --> 00:39:24,289
you're like what this is by design

00:39:20,839 --> 00:39:26,900
because we want to not have to check

00:39:24,289 --> 00:39:29,059
every time has this template change test

00:39:26,900 --> 00:39:31,910
this template changed as this template

00:39:29,059 --> 00:39:34,010
changed but you can actually enable this

00:39:31,910 --> 00:39:36,680
functionality and that's very easy you

00:39:34,010 --> 00:39:40,010
just go in your settings PHP and you set

00:39:36,680 --> 00:39:42,230
this other key click autore lead reload

00:39:40,010 --> 00:39:44,180
equals true and then it will

00:39:42,230 --> 00:39:46,250
automatically reload and you can just

00:39:44,180 --> 00:39:49,430
edit your template files normally and it

00:39:46,250 --> 00:39:52,160
will always be compiled on the fly and

00:39:49,430 --> 00:39:55,430
always be accurate the other thing is

00:39:52,160 --> 00:39:57,020
there's a trick cache key and some

00:39:55,430 --> 00:40:02,329
people try to change it and they were

00:39:57,020 --> 00:40:04,970
like my drupal is so slow son Lee and so

00:40:02,329 --> 00:40:08,029
don't do this this is really a kind of

00:40:04,970 --> 00:40:11,630
more developer only key you don't need

00:40:08,029 --> 00:40:16,940
it forget it just unless you want to see

00:40:11,630 --> 00:40:19,309
how your site is slow the other nice

00:40:16,940 --> 00:40:22,490
thing is it's very easy and that's just

00:40:19,309 --> 00:40:24,859
one little code example how you can

00:40:22,490 --> 00:40:28,400
extend trick you're just defining a

00:40:24,859 --> 00:40:30,470
trick extension and then you have two

00:40:28,400 --> 00:40:34,069
functions like get functions and get

00:40:30,470 --> 00:40:37,190
filters and you can just define URL and

00:40:34,069 --> 00:40:38,990
T and then you can from then on you can

00:40:37,190 --> 00:40:42,200
use these functions and filters from

00:40:38,990 --> 00:40:45,289
your trick temper lights and those are

00:40:42,200 --> 00:40:47,630
just kind of the first key is kind of

00:40:45,289 --> 00:40:51,250
the PHP that's called and the other part

00:40:47,630 --> 00:40:51,250
is how it's called and trick

00:40:51,880 --> 00:40:59,360
then we have people might ask kind of

00:40:55,460 --> 00:41:02,350
what does change for me I'm so used to

00:40:59,360 --> 00:41:05,930
the Drupal 7 way whether the API changes

00:41:02,350 --> 00:41:09,410
so one of the things we made sure of is

00:41:05,930 --> 00:41:11,840
um yes we created actually more ran a

00:41:09,410 --> 00:41:15,440
trace for now but that's a good thing

00:41:11,840 --> 00:41:18,320
because this will allow us to together

00:41:15,440 --> 00:41:20,630
with the infrastructure the other people

00:41:18,320 --> 00:41:22,430
are working on to drill down into

00:41:20,630 --> 00:41:24,410
everything and relay the render

00:41:22,430 --> 00:41:26,450
everything so for example there were

00:41:24,410 --> 00:41:29,270
some templates that were like doing a

00:41:26,450 --> 00:41:31,670
huge staff of preparation and rendering

00:41:29,270 --> 00:41:33,260
and doing everything and you're in your

00:41:31,670 --> 00:41:35,840
template and you don't need all of that

00:41:33,260 --> 00:41:38,450
because you just want to do this some of

00:41:35,840 --> 00:41:41,680
that output you can remove it and

00:41:38,450 --> 00:41:44,990
because we are connecting everything

00:41:41,680 --> 00:41:48,080
it's much much faster in that so

00:41:44,990 --> 00:41:50,660
whenever you use to use in pre-process

00:41:48,080 --> 00:41:52,310
you used to use to cause seem instead

00:41:50,660 --> 00:41:55,820
what you want to do is to create an

00:41:52,310 --> 00:41:57,800
array and you use this hash seem equal

00:41:55,820 --> 00:42:01,490
to your function and then your arguments

00:41:57,800 --> 00:42:05,780
like normally so that's a simple change

00:42:01,490 --> 00:42:08,000
here as s Jen said there will be some

00:42:05,780 --> 00:42:11,930
more changes with a refactoring of the

00:42:08,000 --> 00:42:14,060
render API of that stay tuned and the

00:42:11,930 --> 00:42:16,070
other thing is markup utility functions

00:42:14,060 --> 00:42:18,530
I've already talked a little about that

00:42:16,070 --> 00:42:21,290
there are some things like an HTML tag

00:42:18,530 --> 00:42:26,240
or a link with really does not make so

00:42:21,290 --> 00:42:28,790
much sense that you need to change all

00:42:26,240 --> 00:42:31,460
of that link there might be however a

00:42:28,790 --> 00:42:35,030
use case that you want to alter the

00:42:31,460 --> 00:42:36,440
input of a link like the pass or

00:42:35,030 --> 00:42:38,120
something where you need to change

00:42:36,440 --> 00:42:41,030
something in the structure of the link

00:42:38,120 --> 00:42:43,790
but most often you don't need to change

00:42:41,030 --> 00:42:46,010
the template itself so what am a

00:42:43,790 --> 00:42:49,070
functional markapur tility function is

00:42:46,010 --> 00:42:52,850
it's a seam function that is always fast

00:42:49,070 --> 00:42:54,860
and a variable kind of preprocessor that

00:42:52,850 --> 00:42:58,580
can be used for a template in one and

00:42:54,860 --> 00:43:02,480
this month initiative kind of allows us

00:42:58,580 --> 00:43:04,610
to makes it possible that for every seam

00:43:02,480 --> 00:43:04,890
function and for everything that is in

00:43:04,610 --> 00:43:07,140
drew

00:43:04,890 --> 00:43:11,010
but you can implement a template but you

00:43:07,140 --> 00:43:15,450
don't need to and that's kind of the

00:43:11,010 --> 00:43:18,990
idea here the other thing is well I've

00:43:15,450 --> 00:43:21,690
built this really really big seam in

00:43:18,990 --> 00:43:24,600
Drupal 7 and it's all to coding

00:43:21,690 --> 00:43:27,560
standards and now I want to switch to

00:43:24,600 --> 00:43:30,990
Drupal 8 do I have to redo this again

00:43:27,560 --> 00:43:34,380
we've been given today a very impressive

00:43:30,990 --> 00:43:37,860
demo of tricky fire it's a module called

00:43:34,380 --> 00:43:41,070
by first mass and at elephant ventures

00:43:37,860 --> 00:43:44,370
on Twitter and they've demoed it today

00:43:41,070 --> 00:43:46,350
they've shown a Drupal 7 theme did some

00:43:44,370 --> 00:43:48,780
drush command and out came a trick

00:43:46,350 --> 00:43:50,790
drupal 8 seemed so it's not yet

00:43:48,780 --> 00:43:53,010
completed ready it's in the sandbox but

00:43:50,790 --> 00:43:55,380
when Drupal 8 ships it will be ready and

00:43:53,010 --> 00:44:06,330
it will be your upgrade path to upgrade

00:43:55,380 --> 00:44:07,470
your seems we've gone a long road so

00:44:06,330 --> 00:44:08,550
yeah we want to talk a little bit about

00:44:07,470 --> 00:44:10,920
all of the work that we've been doing

00:44:08,550 --> 00:44:12,720
for the past 13 months in order to get

00:44:10,920 --> 00:44:15,120
here and I know you guys are like wait

00:44:12,720 --> 00:44:17,160
why isn't twagan core right now it's

00:44:15,120 --> 00:44:19,380
it's hard to change all of the market

00:44:17,160 --> 00:44:21,390
that comes out of Drupal it originally

00:44:19,380 --> 00:44:24,750
started in one sandbox and we tried one

00:44:21,390 --> 00:44:26,400
approach which made a little bit of

00:44:24,750 --> 00:44:28,170
progress we got to play with all of the

00:44:26,400 --> 00:44:29,550
systems but it didn't actually get it

00:44:28,170 --> 00:44:31,110
working so then we abandon the first

00:44:29,550 --> 00:44:32,520
sandbox moved to another sandbox just

00:44:31,110 --> 00:44:34,590
basically 4th Corps and started playing

00:44:32,520 --> 00:44:36,090
around with everything we got it working

00:44:34,590 --> 00:44:37,920
in the second but sandbox and then we

00:44:36,090 --> 00:44:39,210
started changing every single thing we

00:44:37,920 --> 00:44:40,380
changed every theme function we changed

00:44:39,210 --> 00:44:42,420
every template file we changed

00:44:40,380 --> 00:44:44,550
everything we had hundreds of people

00:44:42,420 --> 00:44:46,470
working on it and then when we got it

00:44:44,550 --> 00:44:47,580
close enough we're like okay let's take

00:44:46,470 --> 00:44:48,870
all these conversions that we've been

00:44:47,580 --> 00:44:50,670
working on generating all these

00:44:48,870 --> 00:44:52,470
spreadsheets and lists of who's working

00:44:50,670 --> 00:44:54,180
on what and move it into the Drupal core

00:44:52,470 --> 00:44:55,500
queue and group it in two ways that

00:44:54,180 --> 00:44:56,790
makes sense so like where would you want

00:44:55,500 --> 00:44:58,500
to apply patch so we went through every

00:44:56,790 --> 00:44:59,790
single module and every single theme and

00:44:58,500 --> 00:45:01,440
sometimes we broke them into smaller

00:44:59,790 --> 00:45:04,440
things like themed ancora themed

00:45:01,440 --> 00:45:06,030
maintenance page and created a bunch of

00:45:04,440 --> 00:45:07,200
little issues or like this file is

00:45:06,030 --> 00:45:08,580
getting converted with these themed

00:45:07,200 --> 00:45:10,650
functions in these template files so

00:45:08,580 --> 00:45:12,780
here's change and we started working

00:45:10,650 --> 00:45:16,290
through all of this stuff we've got this

00:45:12,780 --> 00:45:17,870
meta issue here at node 1 757 550 you

00:45:16,290 --> 00:45:19,970
might have heard that before tonight

00:45:17,870 --> 00:45:21,950
and where we started going through and

00:45:19,970 --> 00:45:23,480
making all these changes every single

00:45:21,950 --> 00:45:25,040
one of these needs to be reviewed they

00:45:23,480 --> 00:45:26,570
need to be tested we need to compare the

00:45:25,040 --> 00:45:27,680
markup before and after and so if you

00:45:26,570 --> 00:45:29,240
guys want to jump in and start working

00:45:27,680 --> 00:45:31,430
on these that would be awesome but hold

00:45:29,240 --> 00:45:32,570
tight something more important about

00:45:31,430 --> 00:45:34,390
halfway through we realized that the

00:45:32,570 --> 00:45:36,830
scope of what we were trying to do

00:45:34,390 --> 00:45:39,440
exceeded our ability to do it in the

00:45:36,830 --> 00:45:40,520
next week which is what we wanted so we

00:45:39,440 --> 00:45:42,320
ended up saying okay what's the most

00:45:40,520 --> 00:45:44,600
important thing most important thing is

00:45:42,320 --> 00:45:46,630
to get rid of PHP template so what we're

00:45:44,600 --> 00:45:48,590
going to do is create this new issue and

00:45:46,630 --> 00:45:50,300
it's just going to be all of the

00:45:48,590 --> 00:45:55,280
conversions of PHP template files into

00:45:50,300 --> 00:45:56,900
twig and so enter node 1987 510 where we

00:45:55,280 --> 00:45:58,310
started just doing all the conversions

00:45:56,900 --> 00:45:59,870
of the template files and as we're doing

00:45:58,310 --> 00:46:01,160
these conversions people are like wait a

00:45:59,870 --> 00:46:02,600
minute we don't want to make Drupal any

00:46:01,160 --> 00:46:04,040
slow works with Drupal is already really

00:46:02,600 --> 00:46:05,480
slow and it's really late and if we make

00:46:04,040 --> 00:46:08,240
any slower we're going to be in trouble

00:46:05,480 --> 00:46:09,860
so it came down to all of the front-end

00:46:08,240 --> 00:46:11,810
developers to learn how to benchmark

00:46:09,860 --> 00:46:14,300
Drupal and benchmark every single

00:46:11,810 --> 00:46:15,620
template conversion we had so Fabian

00:46:14,300 --> 00:46:17,480
North is awesome little script and

00:46:15,620 --> 00:46:19,940
everybody got training on how to install

00:46:17,480 --> 00:46:21,920
XH prof all of these like CSS experts

00:46:19,940 --> 00:46:24,140
are like I let me test that for you and

00:46:21,920 --> 00:46:27,830
we got most of it done which is amazing

00:46:24,140 --> 00:46:28,970
so this is node 1987 510 what we've done

00:46:27,830 --> 00:46:31,070
is converted all of these things

00:46:28,970 --> 00:46:33,290
benchmark gotten core committer sign off

00:46:31,070 --> 00:46:34,670
to make sure that they pass approval and

00:46:33,290 --> 00:46:36,980
we want to get this committed this week

00:46:34,670 --> 00:46:38,540
so if you have five minutes right now or

00:46:36,980 --> 00:46:39,680
five hours tomorrow or whenever you want

00:46:38,540 --> 00:46:41,630
to do it this is where we need the most

00:46:39,680 --> 00:46:43,460
attention and this will basically get

00:46:41,630 --> 00:46:46,010
rid of PHP template and get twagan core

00:46:43,460 --> 00:46:47,660
so this is definitely the most important

00:46:46,010 --> 00:46:50,060
thing to do right now and once we have

00:46:47,660 --> 00:46:52,580
this mega patch in it is in core it's

00:46:50,060 --> 00:46:55,690
not getting out again it is fixed so

00:46:52,580 --> 00:46:55,690
let's get this done

00:47:00,440 --> 00:47:04,650
so now we've got all that stuff

00:47:03,059 --> 00:47:06,720
benchmarks and we're getting in core

00:47:04,650 --> 00:47:08,430
we're getting it approved we also

00:47:06,720 --> 00:47:10,470
realized yesterday that it's not good

00:47:08,430 --> 00:47:11,730
enough some people might be happy that I

00:47:10,470 --> 00:47:12,900
don't think it's good enough not good

00:47:11,730 --> 00:47:14,430
enough for me I want to wake to be

00:47:12,900 --> 00:47:16,470
awesome I don't want to just be slightly

00:47:14,430 --> 00:47:18,059
better than PHP template in order to do

00:47:16,470 --> 00:47:19,770
that we've got to make sure all of the

00:47:18,059 --> 00:47:21,450
use cases that theme developers have

00:47:19,770 --> 00:47:23,730
brought to us and said I want to do this

00:47:21,450 --> 00:47:25,799
in Drupal 8 I want to print a node and I

00:47:23,730 --> 00:47:28,799
want to drill into its field image field

00:47:25,799 --> 00:47:30,900
and bright my own IMG tag and print out

00:47:28,799 --> 00:47:32,099
the source right there we need to make

00:47:30,900 --> 00:47:33,960
sure that all of that data is available

00:47:32,099 --> 00:47:35,190
in that node template in order for them

00:47:33,960 --> 00:47:37,079
to do that which requires the

00:47:35,190 --> 00:47:39,480
refactoring of the render system so oh

00:47:37,079 --> 00:47:41,700
by the way we got to start working on

00:47:39,480 --> 00:47:43,500
that yesterday as well so that's where

00:47:41,700 --> 00:47:44,970
we stand right now we're really close to

00:47:43,500 --> 00:47:47,220
getting twig in we've got a lot more

00:47:44,970 --> 00:47:49,349
work to do to make Drupal 8 as awesome

00:47:47,220 --> 00:47:50,280
as it possibly could do but it looks

00:47:49,349 --> 00:47:52,349
like there's a lot of people in this

00:47:50,280 --> 00:47:54,480
room so if we could close the door and

00:47:52,349 --> 00:47:56,990
just have everyone just get out your

00:47:54,480 --> 00:47:59,160
laptop's I think we'll be okay um

00:47:56,990 --> 00:48:00,720
there's also a bunch of people who have

00:47:59,160 --> 00:48:02,579
already worked on this so you're all

00:48:00,720 --> 00:48:04,619
going to be working now but everyone who

00:48:02,579 --> 00:48:05,670
came before definitely we need to thank

00:48:04,619 --> 00:48:07,380
there are a whole bunch of people who

00:48:05,670 --> 00:48:09,510
contributed to the first two sandbox is

00:48:07,380 --> 00:48:10,920
it previous sprints we've got a whole

00:48:09,510 --> 00:48:13,490
bunch of people who have posted patches

00:48:10,920 --> 00:48:16,020
from their home or office or car phone

00:48:13,490 --> 00:48:17,400
with conversions we've got a whole bunch

00:48:16,020 --> 00:48:18,299
of people reviewing all of those patches

00:48:17,400 --> 00:48:19,680
maybe they didn't feel comfortable

00:48:18,299 --> 00:48:21,510
posting a patch but they know how to

00:48:19,680 --> 00:48:22,859
look HTML we've got a whole bunch of

00:48:21,510 --> 00:48:23,940
people attending sprints now there are

00:48:22,859 --> 00:48:25,140
people here on Monday there are people

00:48:23,940 --> 00:48:26,940
beer home Friday there's people in the

00:48:25,140 --> 00:48:28,200
sprint rooms right now working on it and

00:48:26,940 --> 00:48:30,359
we've got a whole bunch of new people

00:48:28,200 --> 00:48:32,970
added to maintain a text just because of

00:48:30,359 --> 00:48:35,490
their work on this twig project which

00:48:32,970 --> 00:48:38,430
has been really great we have a list

00:48:35,490 --> 00:48:39,900
here of all of these names I'm not sure

00:48:38,430 --> 00:48:41,789
you can read them all but they're a lot

00:48:39,900 --> 00:48:44,010
a lot of people Brendan developers

00:48:41,789 --> 00:48:45,930
mostly who are now core developers which

00:48:44,010 --> 00:48:47,700
i think is really great for drupal as a

00:48:45,930 --> 00:48:49,109
whole if you've contributed a twig can

00:48:47,700 --> 00:48:51,799
you please stand up right now yeah we

00:48:49,109 --> 00:48:51,799
have everyone stand up

00:48:54,359 --> 00:49:02,170
thank you so much I really created all

00:48:57,820 --> 00:49:06,700
the work you've done so like I said

00:49:02,170 --> 00:49:08,230
we're not done um node 1 757 550 we need

00:49:06,700 --> 00:49:09,640
more help but there's an IRC channel

00:49:08,230 --> 00:49:10,960
Drupal dash twig if you've got questions

00:49:09,640 --> 00:49:12,490
about anything you can go in there if

00:49:10,960 --> 00:49:15,040
you want mentoring you can come and talk

00:49:12,490 --> 00:49:16,300
to us in the coder lounge there's a

00:49:15,040 --> 00:49:18,310
bunch of stuff we got to do finishing

00:49:16,300 --> 00:49:20,020
template conversions and benchmarks

00:49:18,310 --> 00:49:21,820
refactoring the render API removing the

00:49:20,020 --> 00:49:23,680
process layer converting all the theme

00:49:21,820 --> 00:49:24,970
functions to template files or markup

00:49:23,680 --> 00:49:26,760
utility functions that also be

00:49:24,970 --> 00:49:28,810
determined by the render API refactor

00:49:26,760 --> 00:49:30,730
cleaning up the preprocessed layer

00:49:28,810 --> 00:49:32,980
cleaning up the mark-up generated by

00:49:30,730 --> 00:49:35,650
core and overall improving Drupal's

00:49:32,980 --> 00:49:37,060
performance I know five weeks isn't a

00:49:35,650 --> 00:49:39,000
lot of time but I think we can

00:49:37,060 --> 00:49:41,230
definitely get it done so come help us

00:49:39,000 --> 00:49:42,760
especially come to the sprint on Friday

00:49:41,230 --> 00:49:44,380
and we will take all of the new

00:49:42,760 --> 00:49:46,240
contributors just go to the session get

00:49:44,380 --> 00:49:50,050
set up come to come see us and we'll get

00:49:46,240 --> 00:49:52,300
you to work so with that one last thing

00:49:50,050 --> 00:49:56,200
before that I was really really amazed

00:49:52,300 --> 00:49:59,530
I'm dizzy for this XH profit we had like

00:49:56,200 --> 00:50:03,369
four days like 12 people spending at

00:49:59,530 --> 00:50:05,619
every time it was amazingly awesome here

00:50:03,369 --> 00:50:07,840
at rubicon it's the Drupal community is

00:50:05,619 --> 00:50:12,070
fantastic and the front end as I even

00:50:07,840 --> 00:50:13,810
more fantastic alright so we have a

00:50:12,070 --> 00:50:15,700
microphone up here in the front so if

00:50:13,810 --> 00:50:19,420
anyone has any questions come up and ask

00:50:15,700 --> 00:50:23,770
them and i'm sure you have questions so

00:50:19,420 --> 00:50:25,930
don't be shy we're friendly i will i

00:50:23,770 --> 00:50:27,880
will take this to grab another little

00:50:25,930 --> 00:50:31,240
issue at again she will hate me for this

00:50:27,880 --> 00:50:34,090
but as soon as jen says go we have to

00:50:31,240 --> 00:50:36,010
make a patch in then we as front tenders

00:50:34,090 --> 00:50:37,830
who know about marker but know about CSS

00:50:36,010 --> 00:50:40,090
have a responsibility that

00:50:37,830 --> 00:50:44,740
responsibility is to make you look like

00:50:40,090 --> 00:50:46,330
a modern system that means that I used

00:50:44,740 --> 00:50:50,430
to blame John for all of the bad things

00:50:46,330 --> 00:50:53,080
in Drupal 7 which i think is pretty fair

00:50:50,430 --> 00:50:54,820
the thing is that what Jonathan's me is

00:50:53,080 --> 00:50:56,500
that apparently I'm leading the Markov

00:50:54,820 --> 00:50:57,820
initiative for something for this so

00:50:56,500 --> 00:51:00,960
everything that's going to be wrong and

00:50:57,820 --> 00:51:00,960
the mark I was going to be my fault

00:51:02,070 --> 00:51:06,820
I'm a very short man I don't have to

00:51:04,870 --> 00:51:08,680
shoulders to pay all of Drupal on my

00:51:06,820 --> 00:51:10,960
shoulders I need help i need people with

00:51:08,680 --> 00:51:13,090
opinions about markup we used to be

00:51:10,960 --> 00:51:14,590
really pretty opinionated so if you

00:51:13,090 --> 00:51:16,900
don't know even know how to do all the

00:51:14,590 --> 00:51:18,910
stuff just know about markup and CSS we

00:51:16,900 --> 00:51:21,820
have an issue called dream markup which

00:51:18,910 --> 00:51:23,590
is just a hashtag for auntie dodo go in

00:51:21,820 --> 00:51:25,810
the search there and you can see us

00:51:23,590 --> 00:51:27,760
going really into the specifics about

00:51:25,810 --> 00:51:30,340
markup but even more important on Friday

00:51:27,760 --> 00:51:32,980
I won't be willing to sit in the corner

00:51:30,340 --> 00:51:34,300
and fletch out each little bits and

00:51:32,980 --> 00:51:36,070
pieces figure out how we are to kind of

00:51:34,300 --> 00:51:38,530
do it so if you don't even know how to

00:51:36,070 --> 00:51:39,760
install to blue on your side on your on

00:51:38,530 --> 00:51:42,070
your machine but you actually know how

00:51:39,760 --> 00:51:44,050
margov should look and be I need your

00:51:42,070 --> 00:51:45,760
help I need it really bad because I'm

00:51:44,050 --> 00:51:48,610
willing to take the fight with John and

00:51:45,760 --> 00:51:50,320
Republican I ended what Thank You Martin

00:51:48,610 --> 00:52:00,610
okay so one member to take one more

00:51:50,320 --> 00:52:07,510
confession it's morally came next

00:52:00,610 --> 00:52:09,280
question please next question hi so now

00:52:07,510 --> 00:52:12,010
that PHP it's outside of the team played

00:52:09,280 --> 00:52:15,610
the bad at all which is like to know

00:52:12,010 --> 00:52:18,580
where the variables huge array has

00:52:15,610 --> 00:52:22,030
inside how can i check that now without

00:52:18,580 --> 00:52:23,830
peach pins hi so there's a snot dbm

00:52:22,030 --> 00:52:26,200
anymore I guess well so we're going to

00:52:23,830 --> 00:52:28,360
give you a twig inspector that'll

00:52:26,200 --> 00:52:30,100
basically be a DPM right now there's a

00:52:28,360 --> 00:52:31,810
dump function that you can put anything

00:52:30,100 --> 00:52:34,090
you want to look into inside the dump

00:52:31,810 --> 00:52:36,760
function it's not pretty we only use it

00:52:34,090 --> 00:52:38,110
for the first time a couple days ago so

00:52:36,760 --> 00:52:39,520
we've got a refactor a little bit but

00:52:38,110 --> 00:52:41,170
you will have a variable inspector

00:52:39,520 --> 00:52:42,760
inside that template file and it might

00:52:41,170 --> 00:52:44,200
even be in the docks at the top so you

00:52:42,760 --> 00:52:45,460
just uncomment it and then it'll say

00:52:44,200 --> 00:52:46,510
these are your available variables and

00:52:45,460 --> 00:52:48,790
you comment it back out when you're done

00:52:46,510 --> 00:52:51,760
do you need to check the source code or

00:52:48,790 --> 00:52:54,430
can I just say like like that like is

00:52:51,760 --> 00:52:57,100
DPN right now basically yes there will

00:52:54,430 --> 00:52:58,420
be a replacement for DPM yeah okay you

00:52:57,100 --> 00:53:03,160
won't need the vowel module it'll just

00:52:58,420 --> 00:53:05,370
be in core all right thank you sure so

00:53:03,160 --> 00:53:07,570
you said that some functions with still

00:53:05,370 --> 00:53:10,800
PHP functions with still available in

00:53:07,570 --> 00:53:13,510
twig I guess yeah which ones are there

00:53:10,800 --> 00:53:14,170
so you saw a screenshot where we had

00:53:13,510 --> 00:53:16,870
added you

00:53:14,170 --> 00:53:18,130
L&T right so inside a template file you

00:53:16,870 --> 00:53:19,510
can pipe anything to t and it'll

00:53:18,130 --> 00:53:22,780
translate it you can pipe something to

00:53:19,510 --> 00:53:24,280
URL and it'll return a path into a link

00:53:22,780 --> 00:53:25,780
right so there's gonna be a whole bunch

00:53:24,280 --> 00:53:27,400
of those and it's going to be based on

00:53:25,780 --> 00:53:29,260
what we find in our existing templates

00:53:27,400 --> 00:53:31,360
and what's needed there might be stuff

00:53:29,260 --> 00:53:33,010
like format plural so we're really handy

00:53:31,360 --> 00:53:34,330
to have right in a template file so

00:53:33,010 --> 00:53:35,200
we're going to come up with a list of

00:53:34,330 --> 00:53:36,940
stuff that we think should be added

00:53:35,200 --> 00:53:38,200
there's already a issue on Drupal at

00:53:36,940 --> 00:53:40,060
work it's like add these things as

00:53:38,200 --> 00:53:42,760
filters or functions or whatever it is

00:53:40,060 --> 00:53:44,590
we want them to be but if you have use

00:53:42,760 --> 00:53:46,180
cases that are different than the ones

00:53:44,590 --> 00:53:48,070
that we know add them to that issue and

00:53:46,180 --> 00:53:50,830
we can get them in and can we are tour

00:53:48,070 --> 00:53:53,080
this list or the white listed can we wet

00:53:50,830 --> 00:53:54,910
can we alter the list can we act so you

00:53:53,080 --> 00:53:57,040
can extend twig so if you had your own

00:53:54,910 --> 00:53:58,240
like twig pack or something to wake

00:53:57,040 --> 00:54:00,940
super PAC I don't know you want to call

00:53:58,240 --> 00:54:02,770
it you can add anything you want in the

00:54:00,940 --> 00:54:05,320
same thing and also and you can also

00:54:02,770 --> 00:54:08,710
replace any functions you don't want you

00:54:05,320 --> 00:54:15,070
can alter take completely and hundred

00:54:08,710 --> 00:54:17,170
percent so with your vision of having

00:54:15,070 --> 00:54:20,440
all the process and preprocess functions

00:54:17,170 --> 00:54:22,360
gone where do you see the functionality

00:54:20,440 --> 00:54:24,760
going from there we're going to give you

00:54:22,360 --> 00:54:27,460
a shiny new toy that over you place the

00:54:24,760 --> 00:54:28,870
ugly old toys that are broken I don't

00:54:27,460 --> 00:54:30,520
know what that looks like yet and we

00:54:28,870 --> 00:54:33,250
won't until we get closer to it right

00:54:30,520 --> 00:54:36,310
now we're really focused on getting this

00:54:33,250 --> 00:54:37,780
converted so for Drupal 8 at least as

00:54:36,310 --> 00:54:39,220
far as we can see right now preprocess

00:54:37,780 --> 00:54:40,690
will still be there and you'll be doing

00:54:39,220 --> 00:54:41,740
everything in preprocess exactly as you

00:54:40,690 --> 00:54:43,090
did before so if you want to add new

00:54:41,740 --> 00:54:44,680
variables you want to alter variables

00:54:43,090 --> 00:54:46,720
want to add classes you can do it all in

00:54:44,680 --> 00:54:48,100
pre process but we want to build is a

00:54:46,720 --> 00:54:49,750
way that you can do it more easily

00:54:48,100 --> 00:54:51,550
directly from the template file and

00:54:49,750 --> 00:54:53,410
don't need to go into free process boot

00:54:51,550 --> 00:54:55,120
process will still be there in Drupal 9

00:54:53,410 --> 00:54:56,470
i'd like to get rid of free process

00:54:55,120 --> 00:55:00,220
entirely and give us something that's

00:54:56,470 --> 00:55:01,780
not quite so non performant something so

00:55:00,220 --> 00:55:03,160
that rather than saying wait wait before

00:55:01,780 --> 00:55:04,480
i render this template file let me get a

00:55:03,160 --> 00:55:05,860
whole bunch of variables ready none of

00:55:04,480 --> 00:55:07,570
those variables prepared at all until

00:55:05,860 --> 00:55:09,190
the instant you say print this variable

00:55:07,570 --> 00:55:11,800
and that'll make triple a lot faster

00:55:09,190 --> 00:55:14,710
yeah one of the things that I do a lot

00:55:11,800 --> 00:55:19,480
with pre-processed functions is you know

00:55:14,710 --> 00:55:21,460
there's like 18 18 different types of

00:55:19,480 --> 00:55:24,970
node types on like really large sites

00:55:21,460 --> 00:55:27,220
and and rather than having 18 TPL files

00:55:24,970 --> 00:55:28,000
you just have one preprocess file and do

00:55:27,220 --> 00:55:30,190
some sort of logic

00:55:28,000 --> 00:55:32,920
they're two different things that's the

00:55:30,190 --> 00:55:35,290
easiest way in Drupal 7 but with twig

00:55:32,920 --> 00:55:40,030
they've got that new code block thing

00:55:35,290 --> 00:55:42,610
and then it it becomes like having an

00:55:40,030 --> 00:55:44,710
actual like no dash dash article twig

00:55:42,610 --> 00:55:47,110
file that that just has that little bit

00:55:44,710 --> 00:55:48,610
of three bits of lines of code actually

00:55:47,110 --> 00:55:50,620
makes it easier to see what's going on

00:55:48,610 --> 00:55:52,150
the system then trying to dive into the

00:55:50,620 --> 00:55:53,650
template a PHP file and find the right

00:55:52,150 --> 00:55:56,140
pre-process and then understand the

00:55:53,650 --> 00:55:58,180
logic so that actually a lot of those

00:55:56,140 --> 00:56:01,300
things that you have to do it inside to

00:55:58,180 --> 00:56:02,950
pre-process will be much simpler and

00:56:01,300 --> 00:56:06,220
better organized and easier to

00:56:02,950 --> 00:56:07,510
understand using twigs native stuff part

00:56:06,220 --> 00:56:08,440
of the reason why we don't know what it

00:56:07,510 --> 00:56:10,030
looks like yet is because we're not

00:56:08,440 --> 00:56:14,260
planning on removing pre-process in

00:56:10,030 --> 00:56:15,760
Drupal 8 thank you I'm one of those

00:56:14,260 --> 00:56:16,840
developers that got lightheaded when you

00:56:15,760 --> 00:56:19,140
said something about removing

00:56:16,840 --> 00:56:22,660
pre-process because I use it quite a bit

00:56:19,140 --> 00:56:24,250
one of the Drupal the best practices as

00:56:22,660 --> 00:56:26,530
always understood it is to keep your

00:56:24,250 --> 00:56:28,510
templates as clean from logic as

00:56:26,530 --> 00:56:30,430
possible into everything in preprocess

00:56:28,510 --> 00:56:31,570
but yet in examples I was noticing you

00:56:30,430 --> 00:56:33,760
were doing stuff like running through

00:56:31,570 --> 00:56:35,290
loops and doing a lot of logic in the

00:56:33,760 --> 00:56:38,350
template so I'm wondering is that basic

00:56:35,290 --> 00:56:40,060
premise changing no so it's exactly the

00:56:38,350 --> 00:56:41,950
same code as we had in the PHP template

00:56:40,060 --> 00:56:44,290
file so the HP template files also had

00:56:41,950 --> 00:56:47,470
loops and stuff in them it's just the

00:56:44,290 --> 00:56:50,110
twig equivalent syntax for doing that so

00:56:47,470 --> 00:56:52,600
in what what we want to keep out of the

00:56:50,110 --> 00:56:54,520
template files are stuff like database

00:56:52,600 --> 00:56:56,320
queries and complicated you know

00:56:54,520 --> 00:56:57,760
functions we want to move those

00:56:56,320 --> 00:56:59,500
someplace else and just have you print

00:56:57,760 --> 00:57:00,880
the variables but sometimes printing the

00:56:59,500 --> 00:57:02,380
variable means looping through all the

00:57:00,880 --> 00:57:04,630
items in a menu or looping through all

00:57:02,380 --> 00:57:07,870
the items in a field and so there's

00:57:04,630 --> 00:57:10,660
syntax for that in twig so um first of

00:57:07,870 --> 00:57:13,120
all logic should be in templates that's

00:57:10,660 --> 00:57:15,100
my trick is not just print this variable

00:57:13,120 --> 00:57:17,410
or something that has kind of like this

00:57:15,100 --> 00:57:19,150
programming language but that so far

00:57:17,410 --> 00:57:21,820
everyone could understand that I've

00:57:19,150 --> 00:57:24,670
spoken to and quite easily in that the

00:57:21,820 --> 00:57:27,250
other thing is if you now in Drupal 7

00:57:24,670 --> 00:57:28,840
wanted to have an item list and you want

00:57:27,250 --> 00:57:30,970
to have your own item list you would

00:57:28,840 --> 00:57:33,490
need to copy all of this code from api

00:57:30,970 --> 00:57:36,430
to drupal.org copy it in your template

00:57:33,490 --> 00:57:38,680
PHP then change the little thing and

00:57:36,430 --> 00:57:40,330
it's very very complicated would be much

00:57:38,680 --> 00:57:41,680
easier if you just copy the template

00:57:40,330 --> 00:57:44,890
change the saying it you

00:57:41,680 --> 00:57:46,930
done and in that it's easy and it's also

00:57:44,890 --> 00:57:50,080
easier to understand because all of that

00:57:46,930 --> 00:57:51,580
complicated logic is all there still

00:57:50,080 --> 00:57:54,220
some complicated logic in the pre

00:57:51,580 --> 00:57:55,990
process but no more complicated logic in

00:57:54,220 --> 00:57:58,630
the template and that's kind of the goal

00:57:55,990 --> 00:58:00,640
of that I just want to like follow on

00:57:58,630 --> 00:58:02,680
others just this idea of this best

00:58:00,640 --> 00:58:05,500
practice of not having any logic in the

00:58:02,680 --> 00:58:07,180
template file and I'm I bet you can go

00:58:05,500 --> 00:58:09,310
back and find videos of me saying that

00:58:07,180 --> 00:58:13,780
right and the truth is that that is a

00:58:09,310 --> 00:58:16,140
lie for these years and and the reason

00:58:13,780 --> 00:58:19,150
for that is is I've come to understand

00:58:16,140 --> 00:58:20,920
is that really there there are two

00:58:19,150 --> 00:58:23,500
different kinds of logic right there's

00:58:20,920 --> 00:58:26,140
business logic and then there's you know

00:58:23,500 --> 00:58:29,170
display logic we need some things for

00:58:26,140 --> 00:58:31,870
like you know lists right this is a a

00:58:29,170 --> 00:58:33,400
display design decision about you have

00:58:31,870 --> 00:58:35,950
to loop through these these items right

00:58:33,400 --> 00:58:38,200
and it's perfectly fine for that kind of

00:58:35,950 --> 00:58:39,940
logic to be in a template file but what

00:58:38,200 --> 00:58:42,580
you don't want is the sort of business

00:58:39,940 --> 00:58:44,200
logic stuff and keeping that stuff in

00:58:42,580 --> 00:58:46,840
the template dot PHP makes a lot of

00:58:44,200 --> 00:58:53,350
sense or whatever you know a module or

00:58:46,840 --> 00:58:55,420
something like that right hi I was just

00:58:53,350 --> 00:58:57,730
wondering even explain how the editing

00:58:55,420 --> 00:59:00,700
of templates through the Drupal UI is

00:58:57,730 --> 00:59:02,590
going to affect disk-based templates are

00:59:00,700 --> 00:59:04,650
stored in kotor and version control it

00:59:02,590 --> 00:59:06,610
depends on whoever writes the module

00:59:04,650 --> 00:59:08,200
we're not that's not something we're

00:59:06,610 --> 00:59:10,450
doing in course oh that's not commute so

00:59:08,200 --> 00:59:12,220
yeah and it's definitely the kind of

00:59:10,450 --> 00:59:13,690
thing where whoever takes that on and

00:59:12,220 --> 00:59:15,070
wants to make that happen will make

00:59:13,690 --> 00:59:16,960
their own decisions and it'll be based

00:59:15,070 --> 00:59:19,180
on that those were just things that like

00:59:16,960 --> 00:59:20,710
oh look what we could also get us but

00:59:19,180 --> 00:59:24,550
that's not something we're working on

00:59:20,710 --> 00:59:28,420
okay thanks sorry I can put on my sort

00:59:24,550 --> 00:59:30,010
of prognostication hat there there's a

00:59:28,420 --> 00:59:31,060
you know the cmi initiative where

00:59:30,010 --> 00:59:33,940
they're writing like all these different

00:59:31,060 --> 00:59:35,460
um well files to to you know yamo

00:59:33,940 --> 00:59:37,330
configurations that go into files and

00:59:35,460 --> 00:59:41,080
certainly there's going to be a lot of

00:59:37,330 --> 00:59:43,360
sort of existing drupal aids of examples

00:59:41,080 --> 00:59:44,710
of how different things are supposed to

00:59:43,360 --> 00:59:47,680
work as far as configuration management

00:59:44,710 --> 00:59:50,080
and I i think that like the person who

00:59:47,680 --> 00:59:51,880
decides to take you know contemplate

00:59:50,080 --> 00:59:54,040
module which seems a logical place for

00:59:51,880 --> 00:59:55,300
it to do to be the Drupal 8 version of

00:59:54,040 --> 00:59:57,280
this module

00:59:55,300 --> 00:59:59,350
you look at those examples and come up

00:59:57,280 --> 01:00:01,660
with a system where you your edit again

00:59:59,350 --> 01:00:04,570
on the fly and maybe it's saving it to

01:00:01,660 --> 01:00:09,520
disk you know inside these files are

01:00:04,570 --> 01:00:11,680
similar to wherever it stored it's not

01:00:09,520 --> 01:00:15,430
important because this trick justifies

01:00:11,680 --> 01:00:18,460
our comp compile to PHP so it's still a

01:00:15,430 --> 01:00:20,050
PHP like template that's generated in

01:00:18,460 --> 01:00:22,240
the end so it really doesn't matter

01:00:20,050 --> 01:00:24,190
where that file is coming from if you

01:00:22,240 --> 01:00:27,430
wanted to you could store that file on

01:00:24,190 --> 01:00:30,970
amazon s3 or wherever and just get it or

01:00:27,430 --> 01:00:32,770
get it from ftp server or quit it on the

01:00:30,970 --> 01:00:34,450
fly you could create a template on the

01:00:32,770 --> 01:00:37,020
fly you could create something that

01:00:34,450 --> 01:00:39,610
would quit template on the fly so

01:00:37,020 --> 01:00:40,900
possibilities are endless yeah I guess

01:00:39,610 --> 01:00:43,180
my question was just if you're editing a

01:00:40,900 --> 01:00:44,380
template through the UI that's stored

01:00:43,180 --> 01:00:46,930
out on your server and then you're

01:00:44,380 --> 01:00:48,550
pushing code updated code from version

01:00:46,930 --> 01:00:50,650
control that's got an old version that

01:00:48,550 --> 01:00:52,480
template your where are you sourcing

01:00:50,650 --> 01:00:54,370
from but it probably wouldn't overwrite

01:00:52,480 --> 01:00:55,780
the template that's already on disk and

01:00:54,370 --> 01:00:57,790
we've got patterns for this already with

01:00:55,780 --> 01:00:59,440
CM I wear when you export something to

01:00:57,790 --> 01:01:01,510
cmi it goes into a directory that's not

01:00:59,440 --> 01:01:03,010
actually overriding its original you

01:01:01,510 --> 01:01:04,390
just have to grab it and import it some

01:01:03,010 --> 01:01:06,790
other way so there might be a similar

01:01:04,390 --> 01:01:07,960
model like that you might also you could

01:01:06,790 --> 01:01:14,980
still save it to the database you could

01:01:07,960 --> 01:01:17,800
save it anywhere so okay thanks sure any

01:01:14,980 --> 01:01:20,800
other questions ok so we need you all to

01:01:17,800 --> 01:01:23,110
come to this print on Friday but please

01:01:20,800 --> 01:01:25,450
also evaluate this session if you go to

01:01:23,110 --> 01:01:28,060
the schedule for drupalcon you can find

01:01:25,450 --> 01:01:30,420
our session and evaluate their go thank

01:01:28,060 --> 01:01:30,420
you very much

01:01:32,890 --> 01:01:44,440
oh yeah so we're also doing a ball if

01:01:43,120 --> 01:01:46,710
anyone's interested in talking about

01:01:44,440 --> 01:01:51,310
this more casually that starts right now

01:01:46,710 --> 01:01:55,750
at five o'clock so in 12 minutes Zuma

01:01:51,310 --> 01:01:57,550
chromatin a1 something go look at the

01:01:55,750 --> 01:02:01,860
boss schedule or follow someone who

01:01:57,550 --> 01:02:01,860
knows but we're going to do a twig buff

01:02:02,040 --> 01:02:05,760

YouTube URL: https://www.youtube.com/watch?v=tPJ6LRJN0nw


