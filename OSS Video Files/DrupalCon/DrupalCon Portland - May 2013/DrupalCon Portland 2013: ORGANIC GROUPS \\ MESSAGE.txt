Title: DrupalCon Portland 2013: ORGANIC GROUPS \\ MESSAGE
Publication date: 2013-05-28
Playlist: DrupalCon Portland - May 2013
Description: 
	Learn about the new capabilities of OG 2.x :
* Multiple group-audience fields
* Fine-grained roles and permissions
* New Integration with Views & VBO
* Exciting new secrets about EntityFieldQuery and OG!

In this session you will also learn about the Message stack (a replacement for Messaging & Notifications) and how it can be used to send notifications in a scalable way.
Captions: 
	00:00:15,680 --> 00:00:26,580
so that's from the message issue queue

00:00:18,150 --> 00:00:29,670
and obviously when I read it I felt

00:00:26,580 --> 00:00:32,220
ashamed because I do make a fuss about

00:00:29,670 --> 00:00:34,410
the message model and we gon regarding

00:00:32,220 --> 00:00:36,930
that commerce stuff I still have a

00:00:34,410 --> 00:00:40,200
really sad memory of ryan from commerce

00:00:36,930 --> 00:00:42,300
guys literally on his knees begging and

00:00:40,200 --> 00:00:44,129
crying and saying no let's have one

00:00:42,300 --> 00:00:46,640
product for each variation and what like

00:00:44,129 --> 00:00:50,010
nigh we will have 1,000,000 product and

00:00:46,640 --> 00:00:52,050
and i felt ashamed because you know this

00:00:50,010 --> 00:00:53,940
guy he's using my model and he doesn't

00:00:52,050 --> 00:00:55,739
work for him and now we need to lose

00:00:53,940 --> 00:00:58,890
more time in getting into the issue and

00:00:55,739 --> 00:01:01,260
write a new issue so I've decided to

00:00:58,890 --> 00:01:03,929
rectify that problem and I've invented

00:01:01,260 --> 00:01:05,940
it actually developed there are a de AG

00:01:03,929 --> 00:01:08,040
commonly known as the ridiculously

00:01:05,940 --> 00:01:12,689
annoying issue generator or in short

00:01:08,040 --> 00:01:15,299
rage so the idea of rage is that it

00:01:12,689 --> 00:01:16,860
automates your issue submission so in

00:01:15,299 --> 00:01:20,640
the first version I actually had one

00:01:16,860 --> 00:01:22,710
checkbox obscure but complexity and when

00:01:20,640 --> 00:01:24,390
you submit it it basically finds an

00:01:22,710 --> 00:01:27,090
issue that already has tons of comments

00:01:24,390 --> 00:01:28,680
and adds another comment and it makes

00:01:27,090 --> 00:01:34,079
you to it a lot of low quality

00:01:28,680 --> 00:01:37,890
information there and are you laughing

00:01:34,079 --> 00:01:39,479
at serious and and just in case you the

00:01:37,890 --> 00:01:41,220
main tenets don't have enough low

00:01:39,479 --> 00:01:43,320
quality information it will make sure to

00:01:41,220 --> 00:01:45,680
zip the whole internet and attach it to

00:01:43,320 --> 00:01:45,680
the issue

00:01:49,210 --> 00:01:54,680
but I told myself that I could do better

00:01:51,380 --> 00:01:56,690
I could make it obscure even more

00:01:54,680 --> 00:01:58,909
obscure so I change the checkbox to

00:01:56,690 --> 00:02:00,830
obscure and when you submit it it

00:01:58,909 --> 00:02:05,390
creates something like can create work a

00:02:00,830 --> 00:02:07,369
group it doesn't work but I'm a

00:02:05,390 --> 00:02:10,429
perfectionist you see and I told myself

00:02:07,369 --> 00:02:12,350
an atty you can do better than that so I

00:02:10,429 --> 00:02:19,220
made the obscure checkbox obscure and

00:02:12,350 --> 00:02:31,459
now and now when you submit it it just

00:02:19,220 --> 00:02:32,720
as can't and it won't next we have the

00:02:31,459 --> 00:02:34,459
check box saying every piece of

00:02:32,720 --> 00:02:36,530
information is equally important and I

00:02:34,459 --> 00:02:41,690
think it's pretty self-explanatory what

00:02:36,530 --> 00:02:43,459
the output is after that we have to

00:02:41,690 --> 00:02:46,250
assume the maintainer knows everything

00:02:43,459 --> 00:02:48,500
may assume the material knows everything

00:02:46,250 --> 00:02:52,519
in every possible language and when you

00:02:48,500 --> 00:02:54,200
submit it the output is this error who

00:02:52,519 --> 00:02:56,570
knows which are it is it's in Tamil

00:02:54,200 --> 00:02:58,549
that's the clue that I can give you it's

00:02:56,570 --> 00:03:00,769
the maximum function nesting and i'm

00:02:58,549 --> 00:03:05,450
using google translate to help me with

00:03:00,769 --> 00:03:07,280
that and thanks thanks to to google

00:03:05,450 --> 00:03:09,530
translated I took google translate I've

00:03:07,280 --> 00:03:11,959
actually realized that it's also a

00:03:09,530 --> 00:03:13,940
cultural thing because the same error

00:03:11,959 --> 00:03:15,650
has different severity level in

00:03:13,940 --> 00:03:18,230
different languages so for example if

00:03:15,650 --> 00:03:19,549
i'll ask a google translate to read out

00:03:18,230 --> 00:03:22,489
loud with the english version it sounds

00:03:19,549 --> 00:03:27,079
like that fatal error maximum function

00:03:22,489 --> 00:03:28,640
nesting level of 100 reached aborting so

00:03:27,079 --> 00:03:32,420
you can hear by her tone she's not

00:03:28,640 --> 00:03:35,299
really mad at you or angry batches kind

00:03:32,420 --> 00:03:39,109
of disappointed and that's the spanish

00:03:35,299 --> 00:03:42,519
version fatale a roar función de nivel

00:03:39,109 --> 00:03:45,209
de ne da miento Maximo def en dijo

00:03:42,519 --> 00:03:47,650
avatar

00:03:45,209 --> 00:03:50,470
to better understand the next check box

00:03:47,650 --> 00:03:52,720
I would like to read a little poem once

00:03:50,470 --> 00:03:55,390
upon a time there was an issue and now

00:03:52,720 --> 00:03:59,620
it is fixed and now it is closed and now

00:03:55,390 --> 00:04:05,829
it is dead so the next red box is called

00:03:59,620 --> 00:04:08,799
resurrection when you click on when you

00:04:05,829 --> 00:04:10,599
click on the check box you have a slider

00:04:08,799 --> 00:04:12,970
with the issue queue etiquette awareness

00:04:10,599 --> 00:04:15,250
and you are able to change the different

00:04:12,970 --> 00:04:18,030
levels and basically when submitted when

00:04:15,250 --> 00:04:21,070
we're starting with the minimum like the

00:04:18,030 --> 00:04:23,770
lowest level it will find an issue that

00:04:21,070 --> 00:04:26,380
is already closed for years and the next

00:04:23,770 --> 00:04:30,340
step that it will just set it to active

00:04:26,380 --> 00:04:33,520
after that it will set the study

00:04:30,340 --> 00:04:35,590
priority from from normal to critical

00:04:33,520 --> 00:04:38,020
and of course it will not fail adding a

00:04:35,590 --> 00:04:41,560
comment such as setting to critical as

00:04:38,020 --> 00:04:43,990
I'm on a tight schedule and of course me

00:04:41,560 --> 00:04:46,810
as I maintainer you can you can guess

00:04:43,990 --> 00:04:49,270
how I react I scream at the office

00:04:46,810 --> 00:04:51,300
everybody stop this guide is on a tight

00:04:49,270 --> 00:04:51,300
schedule

00:04:53,899 --> 00:04:58,589
next is setting the status the needs

00:04:56,550 --> 00:04:59,849
review meaning that you is the maintain

00:04:58,589 --> 00:05:02,279
you need to review what this guy is

00:04:59,849 --> 00:05:03,869
saying and then if you take the slider

00:05:02,279 --> 00:05:06,599
the issue queue etiquette awareness

00:05:03,869 --> 00:05:09,029
slider all the way to the maximum it

00:05:06,599 --> 00:05:12,029
will do the most insult anything it will

00:05:09,029 --> 00:05:14,339
set the status to network meaning that

00:05:12,029 --> 00:05:16,649
you domain tell you thought you fix it

00:05:14,339 --> 00:05:20,789
but you need to work on it just a little

00:05:16,649 --> 00:05:23,939
more and after I finished working on on

00:05:20,789 --> 00:05:26,069
on rage on that version i have actually

00:05:23,939 --> 00:05:28,349
realized that which can also cater their

00:05:26,069 --> 00:05:30,599
maintain errs and this time i don't need

00:05:28,349 --> 00:05:32,759
the check boxes and fancy widgets I

00:05:30,599 --> 00:05:34,559
think it just enough to have one button

00:05:32,759 --> 00:05:38,509
saying generate respond so when you

00:05:34,559 --> 00:05:38,509
click on it it just generates a response

00:05:43,249 --> 00:05:52,259
so organic groups I have I had quite a

00:05:50,159 --> 00:05:54,479
few sessions and postcards and blog post

00:05:52,259 --> 00:05:56,069
about the basic concepts of organic

00:05:54,479 --> 00:05:58,709
group so I'd like to take advantage of

00:05:56,069 --> 00:06:01,199
this presentation and talk about some

00:05:58,709 --> 00:06:03,389
more advanced concept and we will talk

00:06:01,199 --> 00:06:05,669
we'll start with the selection handler

00:06:03,389 --> 00:06:07,949
which is actually applying not only 20 g

00:06:05,669 --> 00:06:09,689
it's part of the entity reference it so

00:06:07,949 --> 00:06:12,180
it applies to entity reference in Drupal

00:06:09,689 --> 00:06:17,699
7 and it applies also 23 reference which

00:06:12,180 --> 00:06:20,279
is now in the core of Drupal 8 so what

00:06:17,699 --> 00:06:22,259
do we have here we know OG the basic

00:06:20,279 --> 00:06:24,329
staff with group and we have group

00:06:22,259 --> 00:06:27,479
content and it's a group and permission

00:06:24,329 --> 00:06:29,129
on the on the group level and it's

00:06:27,479 --> 00:06:31,889
working nicely with field API you in

00:06:29,129 --> 00:06:33,899
entity I API and views and so on but

00:06:31,889 --> 00:06:36,329
let's talk about that idea of selection

00:06:33,899 --> 00:06:38,969
handlers so over here I have a post this

00:06:36,329 --> 00:06:41,729
is a group content so I see the title

00:06:38,969 --> 00:06:44,639
and I see a group audience field now I'm

00:06:41,729 --> 00:06:46,679
as an administrator I see two widget one

00:06:44,639 --> 00:06:48,449
is the your groups and one is the other

00:06:46,679 --> 00:06:50,639
groups and remember you're the your

00:06:48,449 --> 00:06:52,919
groups is changing from user to user so

00:06:50,639 --> 00:06:55,709
any ties use your groups is different

00:06:52,919 --> 00:06:58,800
from Jim's your group port or Jones your

00:06:55,709 --> 00:07:01,379
groups and what I'm seeing over here

00:06:58,800 --> 00:07:04,259
that your groups I call it a field mode

00:07:01,379 --> 00:07:04,590
in OG didn't have a better name so this

00:07:04,259 --> 00:07:06,540
is the

00:07:04,590 --> 00:07:08,790
default field mode every user will she

00:07:06,540 --> 00:07:10,800
will sit and the other groups this is

00:07:08,790 --> 00:07:15,810
only for privileged user I call it the

00:07:10,800 --> 00:07:17,580
admin field mode so og is taking

00:07:15,810 --> 00:07:19,710
advantage advantage of the fact that

00:07:17,580 --> 00:07:21,960
enter it entity reference is Club

00:07:19,710 --> 00:07:24,120
pluggable and it allows us to have our

00:07:21,960 --> 00:07:29,160
own logic when we are creating select a

00:07:24,120 --> 00:07:31,980
when we are creating sorry have our own

00:07:29,160 --> 00:07:36,090
logic when we want to fetch values into

00:07:31,980 --> 00:07:38,370
the your groups so for example if I go

00:07:36,090 --> 00:07:40,080
to the group audience field settings and

00:07:38,370 --> 00:07:41,880
I've enabled the model called organic

00:07:40,080 --> 00:07:44,130
groups example this is part of the og

00:07:41,880 --> 00:07:47,280
package I have a new selection handler

00:07:44,130 --> 00:07:50,370
that I can now change so looking a bit

00:07:47,280 --> 00:07:51,930
into the code this is OG and I've OG

00:07:50,370 --> 00:07:55,110
example plugins entity reference

00:07:51,930 --> 00:07:56,550
selection and let's have a tiny look at

00:07:55,110 --> 00:07:59,160
the code it's not really important

00:07:56,550 --> 00:08:01,320
what's written over here just and to

00:07:59,160 --> 00:08:03,390
understand the concept I have the OG

00:08:01,320 --> 00:08:05,280
example selection handler I have the

00:08:03,390 --> 00:08:07,710
function bill entity field query which

00:08:05,280 --> 00:08:10,560
is basically the function that builds

00:08:07,710 --> 00:08:12,330
the logic of saying which groups should

00:08:10,560 --> 00:08:13,980
appear in the your groups and which one

00:08:12,330 --> 00:08:16,110
through the pier in the other groups and

00:08:13,980 --> 00:08:18,300
in the OG example and doing a really

00:08:16,110 --> 00:08:22,800
silly example saying if the field mode

00:08:18,300 --> 00:08:24,540
is default meaning a meaning a normal

00:08:22,800 --> 00:08:27,570
user then show me all the groups that

00:08:24,540 --> 00:08:29,550
are below node 85 otherwise if I'm an

00:08:27,570 --> 00:08:33,570
administrator in the other other groups

00:08:29,550 --> 00:08:37,950
show me all the node IDs that are above

00:08:33,570 --> 00:08:40,080
5 and in drupal commons we took

00:08:37,950 --> 00:08:43,410
advantage of that acquires drupal

00:08:40,080 --> 00:08:45,440
commons and we've written a selection

00:08:43,410 --> 00:08:48,720
handler for drupal commons that allows

00:08:45,440 --> 00:08:50,610
people to post content into groups they

00:08:48,720 --> 00:08:54,090
don't belong to up until now that was

00:08:50,610 --> 00:08:55,710
not let's say easily possible in Drupal

00:08:54,090 --> 00:08:57,120
7 and now thanks to those selection

00:08:55,710 --> 00:08:59,250
handler you can have it for example in

00:08:57,120 --> 00:09:02,880
drupal commons but this is now also now

00:08:59,250 --> 00:09:05,040
part of OG itself out of the box you're

00:09:02,880 --> 00:09:07,500
able to have create / mission meaning

00:09:05,040 --> 00:09:10,230
create creating out permission for

00:09:07,500 --> 00:09:13,860
non-members and this is using entity

00:09:10,230 --> 00:09:16,800
reference pre-populate up until nine up

00:09:13,860 --> 00:09:17,910
until now we didn't have that and every

00:09:16,800 --> 00:09:19,560
time

00:09:17,910 --> 00:09:20,850
people were asking me why we don't have

00:09:19,560 --> 00:09:22,640
it I was saying because we don't have

00:09:20,850 --> 00:09:25,320
enough context and I'd like to explain

00:09:22,640 --> 00:09:27,630
for example if I have a group content a

00:09:25,320 --> 00:09:29,490
certain note that is associated with the

00:09:27,630 --> 00:09:32,250
other groups and the user comes and

00:09:29,490 --> 00:09:34,770
wants to edit that node then the OG

00:09:32,250 --> 00:09:38,430
system knows which group to ask is that

00:09:34,770 --> 00:09:40,860
user allowed to edit that group but when

00:09:38,430 --> 00:09:43,320
I'm creating a new node it's still not

00:09:40,860 --> 00:09:46,860
associated with any group so I cannot

00:09:43,320 --> 00:09:49,380
know it however if i go to know dead

00:09:46,860 --> 00:09:52,530
post right now when the og's new version

00:09:49,380 --> 00:09:55,620
if i go to know that post under your

00:09:52,530 --> 00:09:58,110
groups I see nothing however in the URL

00:09:55,620 --> 00:10:00,930
if I pass it the field name and the

00:09:58,110 --> 00:10:04,050
group ID then OD is smart enough to know

00:10:00,930 --> 00:10:06,150
that that group should be populated and

00:10:04,050 --> 00:10:11,010
it checks if I have the permission and

00:10:06,150 --> 00:10:21,060
then he used it uses it multiple sorry

00:10:11,010 --> 00:10:25,650
multiple group audience fields this one

00:10:21,060 --> 00:10:30,330
is one of the reasons why I rewrote OG

00:10:25,650 --> 00:10:32,460
the second time and because at first it

00:10:30,330 --> 00:10:34,440
was really hard coded to the field

00:10:32,460 --> 00:10:36,690
called OG group breath but it's no

00:10:34,440 --> 00:10:39,480
longer hard-coded and again using an

00:10:36,690 --> 00:10:43,320
example for drupal commons i will i will

00:10:39,480 --> 00:10:45,480
try to explain this concept so in drupal

00:10:43,320 --> 00:10:47,940
commons they want to have what they call

00:10:45,480 --> 00:10:50,190
trusted contacts it's basically a mini

00:10:47,940 --> 00:10:51,930
facebook so not only a user can post

00:10:50,190 --> 00:10:55,320
contact into different groups which are

00:10:51,930 --> 00:10:57,540
nodes they also want to have this

00:10:55,320 --> 00:11:00,030
feature that will allow a user to have

00:10:57,540 --> 00:11:03,470
friends okay like in facebook and

00:11:00,030 --> 00:11:06,540
there'll be able to to post content in

00:11:03,470 --> 00:11:08,910
to themselves so basically what we were

00:11:06,540 --> 00:11:11,070
saying since we already have the OG

00:11:08,910 --> 00:11:14,310
infrastructure in place we're saying

00:11:11,070 --> 00:11:18,150
okay each user is actually also a group

00:11:14,310 --> 00:11:19,980
so I'd like to go over the different the

00:11:18,150 --> 00:11:21,810
different screen so will better

00:11:19,980 --> 00:11:26,160
understand the flow of how we built it

00:11:21,810 --> 00:11:28,740
so we have here the users the account

00:11:26,160 --> 00:11:30,810
setting fields we can see that og out of

00:11:28,740 --> 00:11:31,290
the box has just one field called group

00:11:30,810 --> 00:11:32,730
membership

00:11:31,290 --> 00:11:34,380
through that field at an entity

00:11:32,730 --> 00:11:36,509
reference field a group audience field

00:11:34,380 --> 00:11:39,750
which is referencing nodes different

00:11:36,509 --> 00:11:41,220
nodes that the user belongs to so in

00:11:39,750 --> 00:11:44,160
order to have that functionality the

00:11:41,220 --> 00:11:47,940
trusted content functionality we go to

00:11:44,160 --> 00:11:51,000
the og field settings we make it we make

00:11:47,940 --> 00:11:53,910
a user also a group a bit confusing but

00:11:51,000 --> 00:11:55,980
that's the way it is and we also had

00:11:53,910 --> 00:11:57,690
another group audience field remember

00:11:55,980 --> 00:11:59,579
multiple group buttons will now that

00:11:57,690 --> 00:12:01,410
that's the second field and the second

00:11:59,579 --> 00:12:03,360
field I call it this time trusted

00:12:01,410 --> 00:12:05,220
contacts so now again in the account

00:12:03,360 --> 00:12:09,029
settings fields we can see that the user

00:12:05,220 --> 00:12:12,060
now has is a group okay just by adding

00:12:09,029 --> 00:12:15,269
that field that group field and a second

00:12:12,060 --> 00:12:17,399
field called the trusted contacts after

00:12:15,269 --> 00:12:19,769
that I create a new oh gee membership

00:12:17,399 --> 00:12:21,209
type okay OD membership that's the

00:12:19,769 --> 00:12:23,279
entity and can have different bundles

00:12:21,209 --> 00:12:25,230
like node can have different no types of

00:12:23,279 --> 00:12:28,139
different bundles article page and so on

00:12:25,230 --> 00:12:31,319
so does OG membership so usually when

00:12:28,139 --> 00:12:33,600
you use OG then the membership is the

00:12:31,319 --> 00:12:35,399
default it's the default bundle that you

00:12:33,600 --> 00:12:36,810
can have as many bundles as you want and

00:12:35,399 --> 00:12:40,500
you can attach different fields weights

00:12:36,810 --> 00:12:42,839
and so on so back I'm looking at the

00:12:40,500 --> 00:12:44,880
trusted content fields and I click on

00:12:42,839 --> 00:12:47,160
the Edit link and then in the field

00:12:44,880 --> 00:12:49,949
settings I'm able to say that the target

00:12:47,160 --> 00:12:52,199
type is a user meaning i'm going to

00:12:49,949 --> 00:12:54,300
reference groups which are users and

00:12:52,199 --> 00:12:55,860
when i'm going to reference it when i'm

00:12:54,300 --> 00:12:57,750
going to create a new membership i'm

00:12:55,860 --> 00:13:03,300
going to create it through the trusted

00:12:57,750 --> 00:13:06,000
contacts membership and now when i'm

00:13:03,300 --> 00:13:08,100
going to asp s specific user user one

00:13:06,000 --> 00:13:10,500
edit for example i can see i have two

00:13:08,100 --> 00:13:14,189
group audiences and each group audience

00:13:10,500 --> 00:13:16,170
is referencing its own groups and here

00:13:14,189 --> 00:13:18,480
lays all the power because you can have

00:13:16,170 --> 00:13:20,790
as many group audiences as you want with

00:13:18,480 --> 00:13:22,439
different settings one can have can be

00:13:20,790 --> 00:13:25,230
required and multiple value and the

00:13:22,439 --> 00:13:27,899
added non-required with with one value

00:13:25,230 --> 00:13:31,050
and for the coders among us if you want

00:13:27,899 --> 00:13:33,149
to attach if you want to associate to

00:13:31,050 --> 00:13:34,889
content together then you use the

00:13:33,149 --> 00:13:37,040
function OG group which is the api

00:13:34,889 --> 00:13:40,170
function but have a look that I'm

00:13:37,040 --> 00:13:42,810
creating that association oops through a

00:13:40,170 --> 00:13:43,889
specific field called the trusted

00:13:42,810 --> 00:13:47,069
contacts

00:13:43,889 --> 00:13:50,519
that was the most hard concept to

00:13:47,069 --> 00:13:53,369
explain from here it becames it becomes

00:13:50,519 --> 00:13:55,410
easier so when we have that now it makes

00:13:53,369 --> 00:13:57,779
more sense that we have the Rosen

00:13:55,410 --> 00:14:00,569
permission / group type we didn't have

00:13:57,779 --> 00:14:02,279
that before so i can have completely

00:14:00,569 --> 00:14:04,169
different roles and talking about aussie

00:14:02,279 --> 00:14:06,480
rules not site wide world i can have

00:14:04,169 --> 00:14:09,540
completely different roles for the node

00:14:06,480 --> 00:14:11,970
and group and for the user itself

00:14:09,540 --> 00:14:15,600
different roles and different

00:14:11,970 --> 00:14:18,239
permissions the people page was also

00:14:15,600 --> 00:14:20,970
overruled and now what we're seeing here

00:14:18,239 --> 00:14:23,790
that's completely views okay nothing is

00:14:20,970 --> 00:14:27,209
hard-coded here even the group / you on

00:14:23,790 --> 00:14:29,519
top this is just an area handler you can

00:14:27,209 --> 00:14:30,899
you know remove it or change it or move

00:14:29,519 --> 00:14:33,720
it to the footer or whatever you want

00:14:30,899 --> 00:14:35,399
and down below this table is again using

00:14:33,720 --> 00:14:37,439
views and views bulk operation to have

00:14:35,399 --> 00:14:39,449
different actions so you can set

00:14:37,439 --> 00:14:42,209
different roles you can set different

00:14:39,449 --> 00:14:45,389
status active active pending blocked and

00:14:42,209 --> 00:14:48,660
so on and you can now also edit the

00:14:45,389 --> 00:14:50,819
membership directly from that table if

00:14:48,660 --> 00:14:53,129
you have the right permission and change

00:14:50,819 --> 00:14:55,110
the different fields so you can change

00:14:53,129 --> 00:14:57,419
maybe the request method but maybe you

00:14:55,110 --> 00:15:00,230
have expiration dates attached to it

00:14:57,419 --> 00:15:04,589
donations or whatever you can do that

00:15:00,230 --> 00:15:07,589
query magic so we know that the post is

00:15:04,589 --> 00:15:10,829
referencing a group using entity

00:15:07,589 --> 00:15:13,259
reference but we're actually not using

00:15:10,829 --> 00:15:15,119
the field storage meaning that if you go

00:15:13,259 --> 00:15:17,309
into in the database in the table of the

00:15:15,119 --> 00:15:20,040
field there is nothing over there we

00:15:17,309 --> 00:15:22,379
actually use the og membership entity to

00:15:20,040 --> 00:15:24,269
do that referencing and the reason we

00:15:22,379 --> 00:15:25,860
are using it is because we need some

00:15:24,269 --> 00:15:28,110
meta data it's not enough to say this

00:15:25,860 --> 00:15:29,610
post is associated with the group you

00:15:28,110 --> 00:15:31,559
also know I want to know when was it

00:15:29,610 --> 00:15:33,839
created what is the state active or

00:15:31,559 --> 00:15:37,949
pending and we can add different fields

00:15:33,839 --> 00:15:41,160
to it so even though we don't have that

00:15:37,949 --> 00:15:44,609
information in the field storage we can

00:15:41,160 --> 00:15:47,309
still have such a query saying bring me

00:15:44,609 --> 00:15:48,569
all the nodes which are referencing

00:15:47,309 --> 00:15:51,059
through a group audience filled a

00:15:48,569 --> 00:15:55,100
specific group and through some black

00:15:51,059 --> 00:15:58,740
magic and voodoo it will actually work

00:15:55,100 --> 00:16:00,959
accessibility so this one is again back

00:15:58,740 --> 00:16:04,949
to back to the issue queue I saw this

00:16:00,959 --> 00:16:07,889
issue not long ago asking to evaluate OG

00:16:04,949 --> 00:16:10,199
for accessibility and we've actually

00:16:07,889 --> 00:16:13,740
seen this page before that's the first

00:16:10,199 --> 00:16:16,769
page as thought about that this page

00:16:13,740 --> 00:16:20,269
should definitely have should be checked

00:16:16,769 --> 00:16:24,629
for accessibility I had some doubts and

00:16:20,269 --> 00:16:29,279
I was really away I was really curious

00:16:24,629 --> 00:16:31,740
so I downloaded a screen reader and its

00:16:29,279 --> 00:16:33,959
really pretty amazing how smart screen

00:16:31,740 --> 00:16:36,750
readers are and how they can analyze the

00:16:33,959 --> 00:16:39,649
page and actually recorded it in a one I

00:16:36,750 --> 00:16:43,019
want you to him bundles post group

00:16:39,649 --> 00:16:46,740
fields group audience group Group group

00:16:43,019 --> 00:16:50,819
Group group Group group Group group holy

00:16:46,740 --> 00:16:54,089
crap how many more groups oh my god this

00:16:50,819 --> 00:16:57,089
page sucks I am just a screen reader I

00:16:54,089 --> 00:17:08,789
can't bear it any longer please make

00:16:57,089 --> 00:17:10,679
your stop patches are welcome so first

00:17:08,789 --> 00:17:14,370
we had the message model and now we have

00:17:10,679 --> 00:17:15,480
the message stack the message stacked is

00:17:14,370 --> 00:17:17,970
composed of three different models

00:17:15,480 --> 00:17:21,270
message message notify and message

00:17:17,970 --> 00:17:23,429
subscribe message is probably the

00:17:21,270 --> 00:17:25,949
important model is and it's what's doing

00:17:23,429 --> 00:17:29,250
the heavy lifting so the idea message is

00:17:25,949 --> 00:17:31,679
that it allows us to create different

00:17:29,250 --> 00:17:34,080
activity stream activity streams and it

00:17:31,679 --> 00:17:36,570
has zero assumptions regarding how I

00:17:34,080 --> 00:17:39,330
want to create those activity stream so

00:17:36,570 --> 00:17:42,270
to better understand the the concept of

00:17:39,330 --> 00:17:44,190
what the messages we have different

00:17:42,270 --> 00:17:46,770
message types it's equivalent to saying

00:17:44,190 --> 00:17:48,720
like we have an o-type right article

00:17:46,770 --> 00:17:50,490
page and so on we can have different

00:17:48,720 --> 00:17:53,520
message types and those messages are

00:17:50,490 --> 00:17:55,980
basically templates of events that

00:17:53,520 --> 00:18:00,360
happen so I can have for example you can

00:17:55,980 --> 00:18:02,130
see no you can't because it's it's too

00:18:00,360 --> 00:18:05,559
tiny

00:18:02,130 --> 00:18:08,679
imagine that you can see that it's

00:18:05,559 --> 00:18:11,950
basically some HTML saying link to a

00:18:08,679 --> 00:18:16,630
user that created a link to some title

00:18:11,950 --> 00:18:19,090
using some Drupal tokens and it has also

00:18:16,630 --> 00:18:21,730
a special token which is hard to see

00:18:19,090 --> 00:18:24,460
which is just outside and with curly

00:18:21,730 --> 00:18:27,070
brackets instead of the normal brackets

00:18:24,460 --> 00:18:29,440
and we'll talk about those tokens later

00:18:27,070 --> 00:18:32,080
and when I go into the message type

00:18:29,440 --> 00:18:33,549
itself and I edit it so I see some

00:18:32,080 --> 00:18:35,830
information what's the name of the

00:18:33,549 --> 00:18:37,539
message and so on but I also see the

00:18:35,830 --> 00:18:40,149
message text that's a field that's a

00:18:37,539 --> 00:18:42,580
normal field with multiple values and it

00:18:40,149 --> 00:18:44,409
has different deltas and each Delta I

00:18:42,580 --> 00:18:46,570
call a partial for some reason I don't

00:18:44,409 --> 00:18:48,279
know that's the way how I call it and in

00:18:46,570 --> 00:18:52,840
each Delta your head you are able to

00:18:48,279 --> 00:18:55,659
have your own own text so in on delta 0

00:18:52,840 --> 00:18:58,179
or partial number 0 I have the text

00:18:55,659 --> 00:19:00,370
saying what we saw before the user that

00:18:58,179 --> 00:19:02,730
created something something and in the

00:19:00,370 --> 00:19:05,799
second in the second partial we can see

00:19:02,730 --> 00:19:09,760
well in the second partial we concede or

00:19:05,799 --> 00:19:13,539
there is a token and a token that brings

00:19:09,760 --> 00:19:16,270
the notes teaser we can also attach

00:19:13,539 --> 00:19:18,880
different fields to those message types

00:19:16,270 --> 00:19:21,250
for example the node reference field so

00:19:18,880 --> 00:19:24,549
we can have our own logic going on there

00:19:21,250 --> 00:19:27,880
and like I said message has 0 assumption

00:19:24,549 --> 00:19:29,799
regarding regarding how you're going to

00:19:27,880 --> 00:19:31,990
use it is not as smart as a screen

00:19:29,799 --> 00:19:34,360
reader so we cannot read its own its own

00:19:31,990 --> 00:19:37,750
text so it's up to you the implementer

00:19:34,360 --> 00:19:39,429
to to create new messages so if you will

00:19:37,750 --> 00:19:42,130
enable the message example model it's

00:19:39,429 --> 00:19:44,110
part of the method part of the message

00:19:42,130 --> 00:19:46,270
package you can see that we have here

00:19:44,110 --> 00:19:48,520
hook note insert there's actually more

00:19:46,270 --> 00:19:50,020
comments than code itself we have here

00:19:48,520 --> 00:19:52,000
hook node insert meaning when there

00:19:50,020 --> 00:19:54,630
whenever there is a new note that is

00:19:52,000 --> 00:19:57,520
being created create a new message

00:19:54,630 --> 00:19:59,559
reference reference it to the note that

00:19:57,520 --> 00:20:03,490
was just created and saved the message

00:19:59,559 --> 00:20:05,919
and this means that now we have a new

00:20:03,490 --> 00:20:07,480
message message with ID number one like

00:20:05,919 --> 00:20:09,640
there is no with no TD number one day's

00:20:07,480 --> 00:20:11,799
message ID number one sayings two

00:20:09,640 --> 00:20:13,890
stepper created probe equipos vocal I

00:20:11,799 --> 00:20:15,640
always make sure to read it out loud

00:20:13,890 --> 00:20:20,110
whatever the well generate

00:20:15,640 --> 00:20:22,480
it created and if i'll create many

00:20:20,110 --> 00:20:24,250
messages like that then i will see the

00:20:22,480 --> 00:20:26,230
view that comes with message example

00:20:24,250 --> 00:20:29,020
show me all the messages that were

00:20:26,230 --> 00:20:33,010
created and it doesn't look very

00:20:29,020 --> 00:20:35,230
exciting I know that yeah it looks a

00:20:33,010 --> 00:20:37,660
little lame but I can throw some buzz

00:20:35,230 --> 00:20:39,540
words at you and since you're all geeks

00:20:37,660 --> 00:20:42,970
I think you'll get excited like

00:20:39,540 --> 00:20:45,930
translatable fields and TPL overrides

00:20:42,970 --> 00:20:48,940
and pre-process function and view modes

00:20:45,930 --> 00:20:50,890
and personally these words fill me up

00:20:48,940 --> 00:21:03,970
with so much joy I've decided to make a

00:20:50,890 --> 00:21:07,060
nice postcard out of it but also with

00:21:03,970 --> 00:21:08,860
some hard work and using for example the

00:21:07,060 --> 00:21:11,230
message model along with Babel model

00:21:08,860 --> 00:21:13,750
this is a mess this is a model written

00:21:11,230 --> 00:21:15,670
by foobie which allows you basically to

00:21:13,750 --> 00:21:17,980
have comments attached two different

00:21:15,670 --> 00:21:20,880
entities so with some glue code and a

00:21:17,980 --> 00:21:23,740
little styling we're able to have

00:21:20,880 --> 00:21:28,420
activist activity student that looks a

00:21:23,740 --> 00:21:30,880
bit like Facebook so we talked about the

00:21:28,420 --> 00:21:33,820
translatable field and that's one of the

00:21:30,880 --> 00:21:35,350
biggest features of message that feel

00:21:33,820 --> 00:21:37,360
that message text field which is a

00:21:35,350 --> 00:21:40,600
normal field is actually translatable

00:21:37,360 --> 00:21:43,360
that's part of what Drupal course gives

00:21:40,600 --> 00:21:45,130
us so it means that one that field can

00:21:43,360 --> 00:21:47,560
hold information for the English version

00:21:45,130 --> 00:21:50,650
and for the Spanish version and for the

00:21:47,560 --> 00:21:52,390
Tamil version so the text this text

00:21:50,650 --> 00:21:54,430
which is completely unreadable is in

00:21:52,390 --> 00:21:56,860
English and that text which is also

00:21:54,430 --> 00:21:58,810
completely unreadable it's in Spanish so

00:21:56,860 --> 00:22:00,730
the tokens are in different places but

00:21:58,810 --> 00:22:03,070
those are the same token just the word

00:22:00,730 --> 00:22:07,120
that are gluing it together and now in

00:22:03,070 --> 00:22:09,970
spanish so if i go to en / message x

00:22:07,120 --> 00:22:13,390
example or ear / method message example

00:22:09,970 --> 00:22:16,270
i'm seeing the same message just being

00:22:13,390 --> 00:22:18,310
rendered in different in different

00:22:16,270 --> 00:22:24,190
languages say message LED different

00:22:18,310 --> 00:22:29,799
language so beforehand we saw that

00:22:24,190 --> 00:22:31,690
orange looking weird looking token so

00:22:29,799 --> 00:22:33,940
happens let's talk about the yellow tag

00:22:31,690 --> 00:22:35,769
the yellow tokens the normal one I have

00:22:33,940 --> 00:22:39,100
here the message field note reference

00:22:35,769 --> 00:22:41,559
title every time I show this measured

00:22:39,100 --> 00:22:43,320
miss a message every time you hit f5

00:22:41,559 --> 00:22:46,629
every time you're refreshing your page

00:22:43,320 --> 00:22:48,369
message loads and it goes to the token

00:22:46,629 --> 00:22:50,950
system and it tells the token system

00:22:48,369 --> 00:22:54,249
please bring me the title of that node

00:22:50,950 --> 00:22:57,340
and that and the token system node loads

00:22:54,249 --> 00:22:59,529
the node gets that gets the title and

00:22:57,340 --> 00:23:00,909
brings it back to the message and that's

00:22:59,529 --> 00:23:03,279
fine because you know which Drupal

00:23:00,909 --> 00:23:04,509
somebody might edit the node and change

00:23:03,279 --> 00:23:07,690
the title and I wouldn't want my

00:23:04,509 --> 00:23:09,489
activity stream to reference stale data

00:23:07,690 --> 00:23:11,529
I wouldn't want it to reference and I

00:23:09,489 --> 00:23:14,169
wouldn't want it to show a title which

00:23:11,529 --> 00:23:16,899
is wrong but if we're looking at that

00:23:14,169 --> 00:23:18,519
orange token which is the message user

00:23:16,899 --> 00:23:22,419
name meaning bring me the username

00:23:18,519 --> 00:23:24,909
there's absolutely no reason for message

00:23:22,419 --> 00:23:27,519
every time it's being load every time

00:23:24,909 --> 00:23:29,590
it's being shown to ask the token system

00:23:27,519 --> 00:23:31,629
bring me that using and bring me that

00:23:29,590 --> 00:23:33,399
username that username is not going to

00:23:31,629 --> 00:23:37,149
change so there is really no value in

00:23:33,399 --> 00:23:39,549
loading the user every time and asking

00:23:37,149 --> 00:23:42,220
the user name so if we're using that

00:23:39,549 --> 00:23:44,049
special token the message understand

00:23:42,220 --> 00:23:46,539
that whenever the message is being saved

00:23:44,049 --> 00:23:48,190
it calculates the information getting

00:23:46,539 --> 00:23:50,830
the user name for example amitai and

00:23:48,190 --> 00:23:52,690
hard coated so the next time i'm going

00:23:50,830 --> 00:23:54,489
to show the message instead of calling

00:23:52,690 --> 00:23:56,379
the token system I'm just going to

00:23:54,489 --> 00:24:00,129
replace it with the already hard coded

00:23:56,379 --> 00:24:03,009
version and I won't like to you message

00:24:00,129 --> 00:24:07,929
when you're showing it it has some

00:24:03,009 --> 00:24:10,480
performance penalty and you should take

00:24:07,929 --> 00:24:13,840
care about it and whenever I'm thinking

00:24:10,480 --> 00:24:16,210
about performance I think about Mark

00:24:13,840 --> 00:24:18,580
schoenebaum from aquia he's a real

00:24:16,210 --> 00:24:21,009
performance is a real performance wizard

00:24:18,580 --> 00:24:23,919
and I learned a lot for him and is also

00:24:21,009 --> 00:24:26,679
a wizard with words he is really ill

00:24:23,919 --> 00:24:29,230
equipped and and I really like the the

00:24:26,679 --> 00:24:31,590
tender way he explains how to improve

00:24:29,230 --> 00:24:31,590
performance

00:24:41,340 --> 00:24:47,559
so it's true you should cash your views

00:24:45,039 --> 00:24:49,419
even if it's just for 10 seconds or 30

00:24:47,559 --> 00:24:55,210
seconds or one minute don't hit your

00:24:49,419 --> 00:24:57,909
database so hard next in the stack the

00:24:55,210 --> 00:25:00,399
message notified so now we have a

00:24:57,909 --> 00:25:03,159
message and we understand it and the

00:25:00,399 --> 00:25:06,429
next logical thing is after we had the

00:25:03,159 --> 00:25:08,169
activity stream is sending it and pay

00:25:06,429 --> 00:25:10,269
attention we don't call it a message

00:25:08,169 --> 00:25:12,960
email we call it message notify because

00:25:10,269 --> 00:25:15,940
it's it has a pluggable architecture

00:25:12,960 --> 00:25:18,549
basically message notify allows us to

00:25:15,940 --> 00:25:20,279
have notifier plugins and those notifier

00:25:18,549 --> 00:25:23,169
plugins are responsible for two things

00:25:20,279 --> 00:25:26,230
declaring view mode which we'll see in a

00:25:23,169 --> 00:25:28,630
few min a few minutes and sending it out

00:25:26,230 --> 00:25:31,419
of the box message notified comes with

00:25:28,630 --> 00:25:33,730
two plugins one is the email notifier

00:25:31,419 --> 00:25:38,370
plugin and the other is the SMS notify

00:25:33,730 --> 00:25:41,049
plugin so the email for example is

00:25:38,370 --> 00:25:43,120
responsible of having a subject and a

00:25:41,049 --> 00:25:45,070
body and the logics for example that we

00:25:43,120 --> 00:25:47,260
need to strip the tag from the subject

00:25:45,070 --> 00:25:49,360
whereas in SMS we don't have a subject

00:25:47,260 --> 00:25:52,000
without just have a body and we need to

00:25:49,360 --> 00:25:55,059
make sure that we have a phone number so

00:25:52,000 --> 00:25:57,580
again looking a bit at at code these are

00:25:55,059 --> 00:25:59,559
the view modes for the email saying I

00:25:57,580 --> 00:26:02,110
need to have a view mode for the subject

00:25:59,559 --> 00:26:04,000
and a view mode for the body and then

00:26:02,110 --> 00:26:05,679
again looking a bit at code the code is

00:26:04,000 --> 00:26:07,210
absolutely not relevant right now just

00:26:05,679 --> 00:26:09,549
to understand that this is the amount of

00:26:07,210 --> 00:26:11,200
code needed to create the plugin and for

00:26:09,549 --> 00:26:14,309
example we can see that over here we are

00:26:11,200 --> 00:26:17,110
stripping the tags from the subject so

00:26:14,309 --> 00:26:19,090
now the view modes should make a little

00:26:17,110 --> 00:26:22,360
more sense we may remember those partial

00:26:19,090 --> 00:26:25,690
that's Delta so over here and now in the

00:26:22,360 --> 00:26:29,980
manage display of my message type so

00:26:25,690 --> 00:26:33,399
under the email subject view mode I take

00:26:29,980 --> 00:26:35,919
the zero partial just the partial just

00:26:33,399 --> 00:26:39,220
that part will be on the View mode and

00:26:35,919 --> 00:26:43,750
in the email body I'll take another

00:26:39,220 --> 00:26:45,670
partial and message is actually nice

00:26:43,750 --> 00:26:48,610
enough that whenever

00:26:45,670 --> 00:26:50,830
you editing it it shows you each view

00:26:48,610 --> 00:26:52,330
mode that partial appears and now I

00:26:50,830 --> 00:26:56,380
think you can see the true power of

00:26:52,330 --> 00:26:58,120
message because you can have a lot of

00:26:56,380 --> 00:27:00,250
different view modes meaning you can

00:26:58,120 --> 00:27:02,260
have for example if you have an activity

00:27:00,250 --> 00:27:03,940
stream you can have a teaser activity

00:27:02,260 --> 00:27:06,040
stream and you can have a long activity

00:27:03,940 --> 00:27:08,830
stream and you can send an email with

00:27:06,040 --> 00:27:11,710
certain partials and you can send SMS

00:27:08,830 --> 00:27:14,470
with other partials and each one will

00:27:11,710 --> 00:27:21,730
render itself as you decided will render

00:27:14,470 --> 00:27:24,730
itself plus the correct language Nestle

00:27:21,730 --> 00:27:27,220
subscribe and not only which we reach

00:27:24,730 --> 00:27:31,300
the last stacking method subscribe we've

00:27:27,220 --> 00:27:33,100
also reached slide number 102 and I

00:27:31,300 --> 00:27:40,840
always tell myself that that's the best

00:27:33,100 --> 00:27:42,580
slide to actually introduce myself so my

00:27:40,840 --> 00:27:44,800
name is a meat I Borstein and me tae bo

00:27:42,580 --> 00:27:46,870
is the nickname and I'm from I'm a

00:27:44,800 --> 00:27:48,730
co-founder of DS run this race a

00:27:46,870 --> 00:27:51,100
boutique development shop in tel aviv

00:27:48,730 --> 00:27:54,010
israel and we're doing some interesting

00:27:51,100 --> 00:27:57,180
stuff and we have some fancy clans one

00:27:54,010 --> 00:28:00,180
of them is Harvard University Harvard

00:27:57,180 --> 00:28:00,180
University

00:28:00,650 --> 00:28:06,680
that our team is working with their team

00:28:03,600 --> 00:28:08,970
and in case you have a university and

00:28:06,680 --> 00:28:10,200
you're looking to develop the site you

00:28:08,970 --> 00:28:12,180
should definitely look at the open

00:28:10,200 --> 00:28:13,560
scholar distribution even if you're not

00:28:12,180 --> 00:28:15,450
going to use it you should definitely

00:28:13,560 --> 00:28:17,940
look at the code there are some great

00:28:15,450 --> 00:28:20,190
stuff over there another client that

00:28:17,940 --> 00:28:22,260
we're working is is a choir I guess you

00:28:20,190 --> 00:28:25,050
probably heard about them we're helping

00:28:22,260 --> 00:28:26,910
them work we're helping them in

00:28:25,050 --> 00:28:29,040
development of the drupal commons and

00:28:26,910 --> 00:28:32,130
that's like a really really rapid sales

00:28:29,040 --> 00:28:34,200
pitch that i gave you and actually like

00:28:32,130 --> 00:28:37,050
ninety percent ninety-nine percent of

00:28:34,200 --> 00:28:39,210
the reasons why i'm here in drupal cone

00:28:37,050 --> 00:28:41,940
is because i want to find the next big

00:28:39,210 --> 00:28:43,350
client but there's one more percent of

00:28:41,940 --> 00:28:45,480
why I'm here and that's because

00:28:43,350 --> 00:28:48,300
basically I'm really proud of what I'm

00:28:45,480 --> 00:28:51,540
doing and I like it and I like people

00:28:48,300 --> 00:28:53,250
using it and I guess what I'm trying to

00:28:51,540 --> 00:28:55,350
say is like Twitter is nice and

00:28:53,250 --> 00:28:57,210
evaluations is nice and everything but I

00:28:55,350 --> 00:28:59,310
really encourage you to take advantage

00:28:57,210 --> 00:29:03,000
of the fact that you guys are here and

00:28:59,310 --> 00:29:05,190
I'm here and if you use my models and

00:29:03,000 --> 00:29:07,320
you enjoy it or my presentation and so

00:29:05,190 --> 00:29:10,050
on come say hello introduce yourself and

00:29:07,320 --> 00:29:12,090
I can assure you that that one percent

00:29:10,050 --> 00:29:14,330
is what keeps me motivated for the rest

00:29:12,090 --> 00:29:14,330
of you

00:29:24,330 --> 00:29:28,960
so back in the days in Drupal 6 although

00:29:27,010 --> 00:29:32,350
there is also a Drupal 7 version we had

00:29:28,960 --> 00:29:35,260
messaging and notification I wouldn't

00:29:32,350 --> 00:29:38,350
say what I think about it I just put two

00:29:35,260 --> 00:29:41,980
arrows regarding showing when it when it

00:29:38,350 --> 00:29:44,770
was last updated so basically method

00:29:41,980 --> 00:29:47,860
subscribe is just a really thin layer

00:29:44,770 --> 00:29:51,220
just a more of a glue model which glues

00:29:47,860 --> 00:29:54,220
together message and message notify and

00:29:51,220 --> 00:29:57,400
the idea is that the subscription system

00:29:54,220 --> 00:29:59,710
is actually being dealt by flag model so

00:29:57,400 --> 00:30:02,440
we can have different flags for example

00:29:59,710 --> 00:30:04,570
the subscribe underscore user subscribe

00:30:02,440 --> 00:30:06,100
underscore node basically every flag

00:30:04,570 --> 00:30:09,220
that is prefixed by the word subscribe

00:30:06,100 --> 00:30:11,140
message subscribe treated as its own but

00:30:09,220 --> 00:30:13,060
it's important to note that the word

00:30:11,140 --> 00:30:15,790
node and user is not important we can

00:30:13,060 --> 00:30:19,330
have also subscribe underscore OG and

00:30:15,790 --> 00:30:23,470
and it will use it the flag is actually

00:30:19,330 --> 00:30:25,810
responsible on showing the flag links so

00:30:23,470 --> 00:30:27,970
you are able as the implementer again it

00:30:25,810 --> 00:30:30,490
doesn't have many assumption it's up to

00:30:27,970 --> 00:30:32,380
you the implementer to decide where your

00:30:30,490 --> 00:30:34,840
links you will appear and if you want to

00:30:32,380 --> 00:30:36,550
define the access then flag is a great

00:30:34,840 --> 00:30:39,730
model and it has its own hooks and its

00:30:36,550 --> 00:30:42,040
own axis system that you can set

00:30:39,730 --> 00:30:44,080
according to your business logic and if

00:30:42,040 --> 00:30:46,090
you enable them the message subscribe

00:30:44,080 --> 00:30:48,580
you UI which is an optional model it

00:30:46,090 --> 00:30:50,830
will show you a tub in the user page

00:30:48,580 --> 00:30:53,290
which just shows you all the different

00:30:50,830 --> 00:30:55,240
content you are subscribed to again this

00:30:53,290 --> 00:30:57,850
is views this is really highly Cuzco

00:30:55,240 --> 00:31:00,100
customizable if you if you don't want to

00:30:57,850 --> 00:31:01,960
use it you can just you can just turn it

00:31:00,100 --> 00:31:04,360
off but let's talk about the flow of

00:31:01,960 --> 00:31:08,640
message subscribe because unlike message

00:31:04,360 --> 00:31:11,320
it has a little some assumptions so a

00:31:08,640 --> 00:31:13,930
common was added somebody posted the

00:31:11,320 --> 00:31:15,910
comment and then it's up to you to

00:31:13,930 --> 00:31:17,470
create a message from it okay who

00:31:15,910 --> 00:31:20,530
comment insert or something like that

00:31:17,470 --> 00:31:22,180
and then it's up to you to pass it on to

00:31:20,530 --> 00:31:24,520
the message subscribe send message

00:31:22,180 --> 00:31:27,940
that's the main the main function and

00:31:24,520 --> 00:31:30,370
then from there it's up to me to get the

00:31:27,940 --> 00:31:33,130
basic context and now when I say context

00:31:30,370 --> 00:31:33,910
I just wanted like every other model to

00:31:33,130 --> 00:31:36,130
abuse the word

00:31:33,910 --> 00:31:38,590
context so it's not context model

00:31:36,130 --> 00:31:41,110
context it's not settle context it's not

00:31:38,590 --> 00:31:44,620
panels context it's my own context and

00:31:41,110 --> 00:31:46,870
when I say context and when I said

00:31:44,620 --> 00:31:48,670
context I made for example the note that

00:31:46,870 --> 00:31:51,370
the comment belongs to the comment

00:31:48,670 --> 00:31:53,440
author and the note author and then from

00:31:51,370 --> 00:31:55,510
the note I extract also the terms that

00:31:53,440 --> 00:31:57,520
are associated with it and the groups

00:31:55,510 --> 00:32:00,160
that are associated with it and from

00:31:57,520 --> 00:32:02,950
that I get the subscribers okay I get

00:32:00,160 --> 00:32:06,070
all the people who actually flagged one

00:32:02,950 --> 00:32:08,950
of those entities and then after I have

00:32:06,070 --> 00:32:11,770
all the user list I can pass it on to

00:32:08,950 --> 00:32:14,620
message you notify and I don't pass it

00:32:11,770 --> 00:32:16,930
on just as a as a flat list I pass it on

00:32:14,620 --> 00:32:19,180
with the users with every with the

00:32:16,930 --> 00:32:22,000
notifier plugins so one user can get in

00:32:19,180 --> 00:32:23,950
can get the message through email and

00:32:22,000 --> 00:32:26,880
other three SMS and other through fax

00:32:23,950 --> 00:32:26,880
and so on

00:32:36,320 --> 00:32:42,090
so it's really highly customizable if

00:32:39,360 --> 00:32:44,120
you want to alter the context or the

00:32:42,090 --> 00:32:47,190
subscriber list you can do that and

00:32:44,120 --> 00:32:48,960
there is also integration with Drupal

00:32:47,190 --> 00:32:52,920
QAPI because we want to make it scalable

00:32:48,960 --> 00:32:56,520
I cannot send 1,000 emails at once so if

00:32:52,920 --> 00:32:59,130
you check the use Q option then it will

00:32:56,520 --> 00:33:01,590
just create an item in the in the queue

00:32:59,130 --> 00:33:04,110
and then it's up to you to create ad

00:33:01,590 --> 00:33:06,780
rush from it it up to you to execute the

00:33:04,110 --> 00:33:11,400
drug that will actually do the sending

00:33:06,780 --> 00:33:12,450
and you can see that up until now and if

00:33:11,400 --> 00:33:14,790
you've been following different

00:33:12,450 --> 00:33:17,190
presentation that I've done I've never

00:33:14,790 --> 00:33:18,990
said that it's working in a performant

00:33:17,190 --> 00:33:21,870
way I never said that it's working fast

00:33:18,990 --> 00:33:24,060
and it is working fast as I did just

00:33:21,870 --> 00:33:26,640
this time and it is working performance

00:33:24,060 --> 00:33:31,230
but the reason I'm not saying it is

00:33:26,640 --> 00:33:34,800
mostly from like personal issues and the

00:33:31,230 --> 00:33:37,890
issue is that me and my father for years

00:33:34,800 --> 00:33:41,400
we have this weird funny argument that I

00:33:37,890 --> 00:33:44,340
say that faster is better ! and my

00:33:41,400 --> 00:33:45,720
father is saying no and these are funny

00:33:44,340 --> 00:33:48,540
argument like we're laughing and

00:33:45,720 --> 00:33:50,370
everything and and my dad has retired

00:33:48,540 --> 00:33:54,990
this year after working in the same

00:33:50,370 --> 00:33:57,030
place for 37 years in the same job and a

00:33:54,990 --> 00:34:00,180
few months back we had the same argument

00:33:57,030 --> 00:34:02,100
and I said faster is better and he

00:34:00,180 --> 00:34:05,400
didn't laugh I mean he looked a little

00:34:02,100 --> 00:34:08,610
sad as if as if things are really just

00:34:05,400 --> 00:34:10,650
too fast for him so I mean I love my dad

00:34:08,610 --> 00:34:14,010
and I did want to fill one of make him

00:34:10,650 --> 00:34:16,320
feel bad so I thought about where fast

00:34:14,010 --> 00:34:18,330
isn't necessarily better in the computer

00:34:16,320 --> 00:34:20,850
world and I realized that password

00:34:18,330 --> 00:34:23,280
hashing is like a good example so for

00:34:20,850 --> 00:34:25,380
example if I have the md5 algorithm if

00:34:23,280 --> 00:34:28,860
I'm a hacker and I want to hack into a

00:34:25,380 --> 00:34:31,410
site and the site is using the md5

00:34:28,860 --> 00:34:33,270
algorithm then it it returns the

00:34:31,410 --> 00:34:34,679
response too fast so as a hacker it

00:34:33,270 --> 00:34:36,960
might take you to find one password

00:34:34,679 --> 00:34:39,840
let's say three days and if you have

00:34:36,960 --> 00:34:41,940
other algorithms smarter algorithms loud

00:34:39,840 --> 00:34:43,679
like the big crypt what happens the big

00:34:41,940 --> 00:34:45,660
group gets the password and then it

00:34:43,679 --> 00:34:47,700
rehashes it like a hundred times and

00:34:45,660 --> 00:34:49,400
then it returns the response but it does

00:34:47,700 --> 00:34:51,110
it really really slow

00:34:49,400 --> 00:34:54,200
so the same hacker if it would take

00:34:51,110 --> 00:34:57,440
three days in md5 it will take like 12

00:34:54,200 --> 00:34:58,820
years with big crypt and I explained it

00:34:57,440 --> 00:35:02,320
to my father and is really intelligent

00:34:58,820 --> 00:35:05,420
but he didn't really understand it and

00:35:02,320 --> 00:35:07,670
and I I wanted to give him another

00:35:05,420 --> 00:35:09,860
example and I found it very beneficial

00:35:07,670 --> 00:35:12,500
to explain to educated people like my

00:35:09,860 --> 00:35:15,040
father like like like you folks to give

00:35:12,500 --> 00:35:17,630
it example from the world of math and

00:35:15,040 --> 00:35:23,750
sorry I have a typo here i meant math

00:35:17,630 --> 00:35:31,430
like crystal meth so we have our math

00:35:23,750 --> 00:35:33,890
addict and and and that's our hacker and

00:35:31,430 --> 00:35:36,230
every night he goes to clubs he has this

00:35:33,890 --> 00:35:39,650
this trick he has every night it goes to

00:35:36,230 --> 00:35:41,990
this club he says is somebody's somebody

00:35:39,650 --> 00:35:43,760
else in personnel to be somebody else it

00:35:41,990 --> 00:35:47,240
goes inside the clubs he steals all the

00:35:43,760 --> 00:35:49,430
bunny and it buys math and every night

00:35:47,240 --> 00:35:52,790
it goes to the club that's the bouncer

00:35:49,430 --> 00:35:54,890
that is that's md5 is really strong is

00:35:52,790 --> 00:35:58,670
really fast not the most intelligent

00:35:54,890 --> 00:36:01,520
person in the world so the mathematic

00:35:58,670 --> 00:36:03,260
said I'm Benny and the bouncer is

00:36:01,520 --> 00:36:06,920
looking at the late answer I don't have

00:36:03,260 --> 00:36:10,250
nobody so it goes so I'm Johnny I don't

00:36:06,920 --> 00:36:12,820
have no Johnny and then then then the

00:36:10,250 --> 00:36:15,680
hacker takes a big breath and it goes

00:36:12,820 --> 00:36:17,450
Ricky Gwen Jane Eric Derek Elvis bread

00:36:15,680 --> 00:36:20,600
breathe Alex Tony brother Chris what

00:36:17,450 --> 00:36:24,530
wait wait oh oh yeah mr. Ryan sorry I

00:36:20,600 --> 00:36:26,030
didn't recognize you oh yeah Go Go Go

00:36:24,530 --> 00:36:30,190
righty and go writing by the way the

00:36:26,030 --> 00:36:33,230
cashier is all the way in the back and

00:36:30,190 --> 00:36:35,660
every club for some reason is hiring

00:36:33,230 --> 00:36:37,970
this bouncer and I'm telling you this

00:36:35,660 --> 00:36:40,220
hacker this meth addict is being

00:36:37,970 --> 00:36:42,680
partying is telling so much money in

00:36:40,220 --> 00:36:44,060
this buying the best math out there i'm

00:36:42,680 --> 00:36:47,079
not talking about normal meth and

00:36:44,060 --> 00:36:52,479
talking about Heisenberg quality

00:36:47,079 --> 00:36:54,099
man and then one day our hacker is

00:36:52,479 --> 00:36:56,289
walking in the street and this is a huge

00:36:54,099 --> 00:36:59,200
club is never seen something that an

00:36:56,289 --> 00:37:01,509
approach is really cocky approaches to

00:36:59,200 --> 00:37:05,680
the entrance of the club and over there

00:37:01,509 --> 00:37:09,819
he sees mr. bcrypt an old Jewish guy

00:37:05,680 --> 00:37:13,450
from Brooklyn not very fast not very

00:37:09,819 --> 00:37:17,259
strong super intelligent it takes a big

00:37:13,450 --> 00:37:21,190
breath Ryan by wait wait wait wait wait

00:37:17,259 --> 00:37:23,529
today you saying your name is brah he

00:37:21,190 --> 00:37:26,170
say your name is Ryan I have to check it

00:37:23,529 --> 00:37:28,359
I'll go back I have on my list over

00:37:26,170 --> 00:37:32,219
there i will check it but first i'm

00:37:28,359 --> 00:37:36,160
still on the phone with mother excuse

00:37:32,219 --> 00:37:39,069
Yes Mother yes I had the cool girl it

00:37:36,160 --> 00:37:42,339
was good now now the gefilte fish are we

00:37:39,069 --> 00:37:44,979
late for later yep mother I have a very

00:37:42,339 --> 00:37:47,440
important customer here it's a dirty

00:37:44,979 --> 00:37:49,660
filter higher but you know all anonymous

00:37:47,440 --> 00:37:53,949
users are treated alike so I need to

00:37:49,660 --> 00:37:56,339
check it goodbye mother okay I go back

00:37:53,949 --> 00:37:56,339
to the

00:38:01,750 --> 00:38:06,730
I now go to the back I have a little

00:38:04,570 --> 00:38:09,010
vote here but i will go to the back

00:38:06,730 --> 00:38:10,870
anyway so it goes all the way to the

00:38:09,010 --> 00:38:14,040
back now is may be slow but it's very

00:38:10,870 --> 00:38:18,790
organized so it goes over the list ah

00:38:14,040 --> 00:38:20,920
yes I see a lion and oh my god the

00:38:18,790 --> 00:38:22,150
heckler is like twitching and I don't

00:38:20,920 --> 00:38:23,410
know what are the symptoms of when

00:38:22,150 --> 00:38:26,830
you're taking math on you getting

00:38:23,410 --> 00:38:33,220
excited but it's look all excited but

00:38:26,830 --> 00:38:35,230
now we need to take it 99 more times so

00:38:33,220 --> 00:38:37,150
obviously the hacker is kicking and

00:38:35,230 --> 00:38:39,250
screaming and spitting and getting crazy

00:38:37,150 --> 00:38:41,500
then it turns around and goes away and

00:38:39,250 --> 00:38:44,470
he swears that he will never come back

00:38:41,500 --> 00:38:47,470
to this club and mr. big crypt is

00:38:44,470 --> 00:38:49,900
getting back to his to his front desk

00:38:47,470 --> 00:38:52,540
and he mumbles to himself I'm obligated

00:38:49,900 --> 00:38:54,610
to give them a response but this time i

00:38:52,540 --> 00:38:56,800
will use a new technology I've learned I

00:38:54,610 --> 00:38:59,050
will send them a text message I will

00:38:56,800 --> 00:39:01,930
send him a text message with the message

00:38:59,050 --> 00:39:04,270
notifying SMS plug in and it types on

00:39:01,930 --> 00:39:06,580
the computer really slowly and then he

00:39:04,270 --> 00:39:10,150
screams to the hacker which is all the

00:39:06,580 --> 00:39:12,750
way down the street hey Ryan look at

00:39:10,150 --> 00:39:12,750
your phone

00:39:33,029 --> 00:39:41,309
thank you AQA means the questions and

00:39:37,829 --> 00:39:42,269
answers by the way so I'm not a first of

00:39:41,309 --> 00:39:44,729
all thank you very much for everything

00:39:42,269 --> 00:39:46,769
you do atrium to would not exist without

00:39:44,729 --> 00:39:50,309
all of your modules thank you very much

00:39:46,769 --> 00:39:52,919
thank you I do have a question on the

00:39:50,309 --> 00:39:54,479
the email notifications and the message

00:39:52,919 --> 00:39:56,249
notified module so right now with the

00:39:54,479 --> 00:39:58,409
email and SMS we're setting out an

00:39:56,249 --> 00:40:01,079
individual message every time there's an

00:39:58,409 --> 00:40:03,419
event generated is it on your road map

00:40:01,079 --> 00:40:05,429
to do some kind of digesting where you

00:40:03,419 --> 00:40:07,199
have like a weekly summary kind of thing

00:40:05,429 --> 00:40:09,749
is that something you would be looking

00:40:07,199 --> 00:40:10,949
at putting into the the message stack or

00:40:09,749 --> 00:40:13,079
is that something you're looking at a

00:40:10,949 --> 00:40:14,459
contributor help with I think it should

00:40:13,079 --> 00:40:16,289
start with the contrary the problem we

00:40:14,459 --> 00:40:17,909
did with digest is I don't know how to

00:40:16,289 --> 00:40:20,039
do it in a generic way I'm not sure

00:40:17,909 --> 00:40:22,289
there is a generic way so I think it

00:40:20,039 --> 00:40:23,880
could be exploding contraband then if we

00:40:22,289 --> 00:40:25,949
have something solid we can move it back

00:40:23,880 --> 00:40:29,119
into the message stack okay we'll try to

00:40:25,949 --> 00:40:29,119
help you out with that okay thank you

00:40:29,959 --> 00:40:38,939
any more questions all right everybody

00:40:33,989 --> 00:40:41,249
ah yeah sorry hi hi so you talked about

00:40:38,939 --> 00:40:44,909
the notifications I talked about a lot

00:40:41,249 --> 00:40:48,299
of things in yeah but is there a way

00:40:44,909 --> 00:40:50,369
you're with is the best way for the

00:40:48,299 --> 00:40:54,329
other way around so you send me a

00:40:50,369 --> 00:40:56,969
notification by email I reply and send

00:40:54,329 --> 00:40:58,619
you a mail and it becomes a comment or

00:40:56,969 --> 00:41:00,390
something you should talk with mike just

00:40:58,619 --> 00:41:03,059
behind you because they just did it in

00:41:00,390 --> 00:41:04,319
open atrium right and I yeah they just

00:41:03,059 --> 00:41:07,409
did it the fact that you are able to

00:41:04,319 --> 00:41:10,519
answer via email and gatherers ok cool

00:41:07,409 --> 00:41:13,949
so another question you talked about

00:41:10,519 --> 00:41:17,609
energy different membership types yeah

00:41:13,949 --> 00:41:19,829
can you please make a some other example

00:41:17,609 --> 00:41:22,380
yeah when you use different for example

00:41:19,829 --> 00:41:24,509
if I have an exploration membership that

00:41:22,380 --> 00:41:26,609
I want a membership to be expired after

00:41:24,509 --> 00:41:28,949
one month meaning for me expired meaning

00:41:26,609 --> 00:41:31,169
that this status will be from active to

00:41:28,949 --> 00:41:33,059
pending then I heaven I will have an

00:41:31,169 --> 00:41:34,949
expired membership type and I have a

00:41:33,059 --> 00:41:37,229
date field on it and then I will need

00:41:34,949 --> 00:41:39,539
some custom logic like in hook Crone or

00:41:37,229 --> 00:41:42,299
something check all the message all the

00:41:39,539 --> 00:41:44,759
membership types that are now beyond

00:41:42,299 --> 00:41:47,160
that date and if so to slow those

00:41:44,759 --> 00:41:50,070
membership type set the status from

00:41:47,160 --> 00:41:51,840
in two pending and save it in that case

00:41:50,070 --> 00:41:55,050
why would you use a different membership

00:41:51,840 --> 00:41:58,500
types instead of a field inside the same

00:41:55,050 --> 00:42:00,060
membership because like you like a page

00:41:58,500 --> 00:42:01,950
is not an article it's something

00:42:00,060 --> 00:42:04,050
different it represents something at

00:42:01,950 --> 00:42:07,830
something different okay thank you

00:42:04,050 --> 00:42:10,230
Thanks hey there just speaking as a

00:42:07,830 --> 00:42:12,150
distribution developer I wanted to say

00:42:10,230 --> 00:42:14,220
thank you because this this whole

00:42:12,150 --> 00:42:16,710
architecture and this whole stack of OG

00:42:14,220 --> 00:42:19,770
to and the message modules have really

00:42:16,710 --> 00:42:21,840
made it not just possible but practical

00:42:19,770 --> 00:42:23,880
for us as distribution developers to do

00:42:21,840 --> 00:42:26,400
things that our clients want and that we

00:42:23,880 --> 00:42:27,930
want is product designers and so you

00:42:26,400 --> 00:42:29,490
know thank you for your innovation in

00:42:27,930 --> 00:42:31,830
the space it's really being useful for

00:42:29,490 --> 00:42:34,140
all of us you know Commons and I know

00:42:31,830 --> 00:42:36,780
for atrium and commerce and really and

00:42:34,140 --> 00:42:40,730
all of the distribution so thanks thank

00:42:36,780 --> 00:42:40,730

YouTube URL: https://www.youtube.com/watch?v=WAk1p2fP8tM


