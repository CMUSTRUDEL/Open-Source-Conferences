Title: DrupalCon Denver 2012: CU-BOULDER'S JOURNEY INTO DRUPAL
Publication date: 2013-03-28
Playlist: DrupalCon Denver - March 2012
Description: 
	Over the past few years, the University of Colorado Boulder has been adopting Drupal in a fairly organic process. However, University Communications and the Office of Information Technology are jointly building an enterprise class Drupal web platform for websites throughout the entire campus. We're thrilled to be able to offer Drupal as a service to the campus - making it easier for our campus faculty, professors, students, and alumni to build and interact with complex, functional websites. In January of 2012, we launched the most visible change, a new homepage for colorado.edu. Over the coming months leading up to DrupalCon we're going to be expanding the system by bringing more sites online. By then we'll have all our kinks worked out, and we'll be able to share our successes and failures. This will be a panel discussion run by a handful of the key members of the team. We'll cover a wide range of topics:
Getting the initial funding
Building the stack - F5, Varnish, Memcache, Apache, PHP, MySql
Nuts and bolts of Enterprise Class
Drupal site building
Design process and theming
Training our faculty and staff
Spreading the word around campus
We won't have time to go in to every detail, but we'll go as far as we can. It's been a year long project that's going to be well worth the wait. We're excited to share some of what we've been working on, but we also know that we've only scratched the surface. This project is going to change over time, and we're adapting everyday. We'll try to give a glimpse of where this could go in the future. We're from Boulder, Colorado and we're looking forward to having DrupalCon Denver in our own backyard. We're honored to be allowed to share our story to the community.

Questions answered by this session: 
Why did CU choose Drupal?
How long and what does it really take to go from initial idea to launch?
Technically, what was involved in this project? Hardware, software?
What are some of the specifics of your deployment strategy? How do you roll out maintenance updates and new features?
What's the basis of the Drupal site structure? What content types, views, modules used, etc?
Captions: 
	                              alright good afternoon and welcome we                               are with the university of colorado                               boulder which is just about                                        northwest of denver here and we're very                               excited to share with you today see you                               boulders journey into drupal you can                               hear did you hear any of that alright so                               i'm joe varan i'm the web manager in our                               university communications department and                                my co-presenters today our mike carter                                our integrations manager in our office                                of information technology and matt                                tucker our lead web developer and                                university communications and in the                                spirit of our open source community we                                really wanted to share with the                                community particularly our fellow                                universities are experienced as a large                                University in developing and                                implementing an enterprise-level Drupal                                environment to be used as a campus-wide                                service in particular what we're going                                to go over today is we're going to give                                you a brief overview some of the                                challenges that we're faced on our                                campus the solutions we identified as                                well as some of the research and                                planning that we put into the project                                most of the presentation is going to be                                Mike and Matt going into some of the                                technical details of how we built an                                architect our web infrastructure how we                                configured our Drupal environment as                                well as our deployment process we will                                also kind of wrap up with some like                                lesson learns and expected outcomes of                                our project we would like to take                                questions after our presentation so we                                strongly encourage you if you do have                                any questions if you want to tweet them                                to use the following hashtag we've had                                some staff members up here who are going                                to be monitoring for us as well as if                                you want to just like jot them down we                                have plenty time for Q&A afterwards in                                addition we have also scheduled a buff                                called Drupal in higher education it's                                at five o'clock this evening and that's                                going to be in room                                                curiosity how many higher end in                                it's are in the room all right well                                we're very excited that you're here and                                we're hoping that you can join us at                                five o'clock we'd love to see what some                                of the things that you guys are doing as                                well so this is the University of                                Colorado Boulder our university is                                located at the foothills of the Rocky                                Mountains and we have a population of                                about twenty nine thousand eight hundred                                and eighty-four thousand degree seeking                                students with approximately twenty-four                                thousand of those are undergraduate                                students and around                                                   students we also have approximately                                                                                                        well we are a Tier one research                                university and what that means is that                                we have very strong research                                partnerships with federal institutes and                                labs such as NASA and NOAA and unreal to                                name a few so in relation to that we                                have about nine research institutes and                                approximately                                                           campus we also have eight colleges and                                schools that are overarching with                                architecture arts and sciences business                                education engineering law and music                                think I got them all and within those we                                have over                                                          colleges and schools so as you can see                                we have a fairly large internal audience                                base that we are serving and I think                                that helps to kind of put in perspective                                for you some of the things that we as a                                team really needed to keep into                                consideration as we were looking to roll                                out a new solution for our campus some                                of the challenges that we were facing on                                our campus was that we were sitting on                                an extremely outdated server environment                                that would not allow us to use the most                                latest technologies such as a CMS it was                                really just a static HTML environment                                where we can use perl or CGI scripts to                                do some of the more dynamic stuff what                                is extremely limiting and our                                departments were finding it very                                challenging in trying to build and                                 maintain and update their their websites                                 within that                                 it in turn a lot of our departments were                                 starting the JumpShip they're starting                                 to jump off of a free campus-wide server                                 and going out and purchasing and                                 supporting their own server so they can                                 take care of modern the latest                                 technologies on their own we did a                                 survey about two years ago and found                                 that there were over                                                    campus sitting under people's desks and                                 their closets being used as coasters                                 that our departments were using for                                 various websites and web application                                 needs that our main campus server could                                 not support it was really quickly                                 becoming a nighty nightmare for us in                                 very decentralized environment and just                                 not the best resources for our campus                                 and many many of our departments are                                 struggling with this on top of that we                                 were getting a lot of complaints that                                 our university web presence our website                                 was completely lagging it was                                 out-and-out pretty lame um we I was                                 involved with it so I can say that we                                 were because that we were stuck on this                                 um static HTML environment we really                                 just did not have the capabilities to                                 really showcase some of the amazing                                 research that was going on across campus                                 and some of the great things that our                                 faculty and staff are doing one other                                 key challenge that we also identified us                                 at because our current server                                 environment had been around for at least                                 correct me if I'm wrong                                                that we had a ton of legacy data on                                 those servers Mike did a quick tally and                                 he found that we had about                                              on her campus environment some were                                 probably have been abandoned and some                                 were still active and so we needed to                                 make sure that whatever we came up with                                 with her with our new solution that we                                 had to figure out what we were going to                                 do with all of this content and all this                                 data on our current server environment                                 and then on top of that our university                                 rolled out a new brand in the Spring of                                                                                                          timeframe to conform all of our                                 department websites into                                 branding standard so we quickly realized                                 that we needed an entirely new                                 environment to help us to manage this                                 brand and to roll it out for all of our                                 different departments drink water so we                                 identified three main solutions to help                                 us with these challenges first and                                 foremost we completely needed to                                 modernize and revamp our entire campus                                 web infrastructure and really build                                 something that was enterprise class it                                 was highly available highly scalable and                                 something that will meet all the                                 particular server needs that we were                                 seeing across campus we also identified                                 that we really needed to convert to a                                 CMS environment and really leverage the                                 power that a CMS can provide us in                                 really streamlining our web development                                 process for not only in the University                                 website how we can roll that out and                                 create a service for our departments for                                 their websites as well we also identify                                 that we really needed to to create a                                 completely new service model for our                                 campus around our web development                                 process as well as web application                                 hosting looking at a service that would                                 allow our departments to very easily                                 build and maintain their own website                                 without having to go out and hire their                                 own web staff or technical staff as well                                 as a service that will allow our                                 departments to take advantage for all                                 their different web application or                                 database needs so as we started to plan                                 out this project we really realized that                                 to do this correctly we needed to do                                 first and foremost we needed to invest                                 in equipment and invest in our staff the                                 equipment part was pretty much a                                 no-brainer we were sitting on some                                 pretty old hardware that we really                                 needed to invest to bring in some new                                 hardware to really build a more robots                                 technical infrastructure but we also                                 realized that if we were going to                                 support this whole new environment as                                 well as this whole new service we wanted                                 to provide our campus we really needed                                 to invest in our staff so that we made                                 sure that                                 we had the van with to be able to                                 support the                                                            that were on our campus we also did a we                                 took a deeper look into the type of                                 service model that we really wanted to                                 provide the campus around our new CMS                                 environment that we are going to build                                 and we identified two key areas that                                 will meet a lot of the different needs                                 that we're seeing the first is is what                                 we've been calling for now is a                                 self-service template environment and                                 the idea behind that is really to have                                 an environment that our departments can                                 go to login give us some credentials and                                 we provide them with a suite of packages                                 of pre-developed designs that are within                                 brand standards of course and um as well                                 as pre-configured functionality that the                                 departments can really kind of turn on                                 and turn off based on their specific                                 their particular need for their website                                 and the idea is that once they kind of                                 give us all this information they pick                                 their package that we would have it have                                 this environment ready for them within a                                                                                                          can then start to build their website on                                 their own we identify that this will                                 probably mean you know good fifty sixty                                 percent of our campus needs we also                                 identified that around our CMS                                 environment we wanted to provide kind of                                 more of a professional service around                                 building custom websites so that for                                 those departments such as our larger                                 ones like admissions or financial aid                                 that have very specific business                                 requirements for their website that we                                 could build a custom theme we can build                                 custom content I a really a custom                                 Drupal environment just for them and all                                 this supported by our team as well as on                                 the new campus infrastructure we also                                 identify that another service we wanted                                 to provide was related to web                                 application hosting something that will                                 will help us departments get rid of all                                 of the                                                                campus and really kind of come back in                                 and use the campus-wide service model so                                 that we can kind of get away from this                                 decentralized model                                 we are we were in and really create                                 something that's more of a consolidated                                 and streamlined service for our                                 departments take advantage for their                                 various server needs it could be for a                                 non Drupal website I'm gone out we won't                                 mention those others um it could be for                                 you know file storage it can be for                                 backups or database needs so the idea                                 behind is something that's really                                 flexible for the various needs that we                                 are seeing across campus we also started                                 the plan for how we can create a process                                 to to phase the migration of our legacy                                 content into either our new CMS                                 environment that will be building or                                 into this hosting environment that will                                 be building we realize that there's just                                 no way that we are going to be able to                                 convert the                                                        identified within our time frame into                                 into a Drupal website and so we really                                 need to make sure that we could provide                                 a way to have both our new shiny                                 infrastructure as well as our legacy                                 infrastructure both under the colorado                                 edu domain name some of the research                                 that we put into this project is first                                 we created a list of requirements for                                 our CMS so that we can use that to                                 evaluate all the different tools are                                 that are out there I think we've looked                                 at about                                                            Drupal by far rose to the top very                                 quickly it not only met all of our                                 requirements on our on our sheet but                                 really just kind of went beyond that and                                 the other thing that was very that fit                                 very well toast is the whole Drupal                                 community the idea that there's this                                 amazing community that is really                                 dedicated to advancing and grow in this                                 environment just really was a great                                 match for our campus we also did some                                 research into kind of an internal audit                                 of our staff as I mentioned we                                 identified that we're really going to                                 need a strong staff support to to run                                 this new environment and new service and                                 so we looked at what we currently who we                                 had on staff what their roles were and                                 look to see if where we can maybe                                 reallocate some staff re-defined some                                 job descriptions and once we finished                                 with that we could see where the holes                                 were                                 and so we identify a couple new                                 positions that we needed to hire to make                                 sure that we can provide a nice robust                                 service for our campus the other thing                                 is we reached out to our community                                 external expertise we we talked to about                                 four different universities that have                                 implemented Drupal on some form or                                 fashion on their campus and really just                                 ask them you know what do they do what                                 do they do with what did they do with                                 Drupal how do they do it and was it                                 successful what were some of the                                 challenges that they faced and what were                                 some of the the Vantage's on their                                 campus for for rolling out Drupal and                                 really just really figure out if they                                 had any kind of words of wisdom for us                                 and this was very very available                                 valuable information for us and we                                 really strongly encourage anyone who's                                 about to embark on a very similar                                 journey as us to really reach out to                                 your pure institutes and find out what                                 they're doing and and connect with them                                 because they're more than willing to                                 help you out that's what is us we also                                 realized that we we engage some                                 professional experts to really bring us                                 up to speed two years ago none of us                                 knew how to work in Drupal let alone                                 spell it correctly um yeah we spelled it                                 wrong a couple times and so we realized                                 that in order for us to do this                                 correctly we needed to bring in some                                 experts to not only help us with the                                 Drupal part and how we want to configure                                 our Drupal environment but also how we                                 were going to build this infrastructure                                 to support that how we are going to                                 create a deployment process that will                                 make it very easy for us to manage the                                 many sites that we were we were                                 anticipating that would be under this                                 new environment and then once we had                                 identified Drupal as our CMS for our                                 campus we reached out to the Drupal                                 community and that has been just an                                 amazing experience for us and and I                                 think really solidified for us that we                                 made the right choice with moving                                 forward with Drupal after we finished                                 kind of all of our research and so in                                 the planning we decided that that                                 there's no way we can do this all at                                 once so we created                                 phased approach for this project and                                 we're just finishing up with our first                                 phase which was is really just building                                 out the infrastructure building out the                                 foundation for this environment and for                                 the service that's couldn't going to be                                 on top of it and on top of that we                                 decided to start out with the University                                 website and we launched that on January                                 for um so we did not have a holiday we                                 really wanted to start with the                                 University website one so it kind of                                 gave a face to this this really amazing                                 robust infrastructure that we just built                                 and also to generate some buzz and                                 excitement on campus to show off that we                                 had we have now invested in this new                                 technology for the entire campuses take                                 advantage of this is just an example of                                 a site that has built and Drupal and                                 letting them know that we are now in the                                 process of building a service for them                                 to take advantage of and so phase two is                                 where we're going to build out that CMS                                 service environment that I was talking                                 about so that self-service template                                 environment and that custom development                                 environment and we're just about to                                 start on that phase and then phase three                                 is when we'll start to roll out the web                                 application hosting for all the other                                 various service needs that we have on                                 campus and with that I will pass it off                                 to my Carter who's going to go into more                                 of the technical details of how we built                                 out our infrastructure                                 so I'm Mike Carter I didn't see you                                 pretty much since before there was even                                 a web first thing we had is some really                                 core decisions to make about how we were                                 going to try and roll up this service                                 out and obviously the first one that you                                 know you've probably been hearing about                                 for the last two days is do you do this                                 in the cloud do you do it yourself and                                 there were there were some key points                                 that made us take the road of doing it                                 ourselves rather than hosting it in the                                 cloud we're a big University we have                                 data centers we've been running data                                 centers since the                                                       were in place the other thing that                                 really drove that is that as Joe pointed                                 out we had                                                            that needed to be maintained and trying                                 to figure out the networking for that in                                 the cloud with what we with what we were                                 rolling out new it was beyond our                                 ability and comprehension to be able to                                 do that in the cloud and so we did                                 decide to do it locally the other thing                                 that we needed to decide is how we were                                 going to do this load balancing and web                                 traffic management we picked up five                                 will cleanse it up in a little bit more                                 detail later VMware we we already had                                 via more clusters running we have the                                 people that understand them the people                                 that manage them day to day so that was                                 a pretty easy choice and the last thing                                 we did is we built this hand box we                                 wanted to see if we could do this and                                 how all these different layers that we                                 didn't understand would talk to each                                 other so the first thing I'm going to                                 talk about a little bit is the web                                 traffic manager and the big big thing                                 that that gave us is that we didn't have                                 to move everything at once as you                                 pointed out we had lots and lots of                                 sites we were going to bring one site                                 the university homepage up first and                                 then additional sites that had already                                 been brought into Drupal but we're                                 running either in the cloud or on other                                 hosted services on campus and the big                                 part of that was keeping legacy alive                                 we've got a half a terabyte of spinning                                 static and CGI content out there many                                 much of which is extremely important to                                 some Department or some Nobel laureate                                 that if we disturbed would be not very                                 happy with us and the last thing that I                                 want to point out about that is that it                                 does bring up a little bit of                                 maintenance a little bit of overhead                                 that our University Communications Group                                 wasn't used to in that they can't just                                 spin up a new site and have it magically                                 appear they have to work with our                                 networking group we're developing a                                 process it's fairly manual today we've                                 got a tool that we're prototyping to                                 make all that much easier so what we're                                 doing with the web traffic manager is                                 directing really five different kinds of                                 traffic to different places so the first                                 and most obvious one is the stuff that's                                 going straight to Drupal not                                 authenticated Drupal via HTTP and we                                 inserted a varnish layer in there we'll                                 talk a little bit more about that in a                                 minute and then there's the                                 authenticated Drupal which we bypass                                 varnish so we're doing the web traffic                                 manager sitting there in the middle                                 making all these decisions for us data                                 groups all sorts of stuff in there that                                 make that happen we can also keeping                                 just that one single domain route                                 traffic to somebody else our housing                                 department if they want to live under                                 the dub dub dub top-level domain we can                                 route there traffic and then of course                                 the thing that we've been harping on                                 here which is our                                                       sit out there on static HTML and CGI so                                 the really important thing about this                                 slide from my perspective is that we                                 have a lot of layers here and there are                                 lots of VMs at each layer so obviously                                 the web traffic manager is sitting there                                 at the top and that's what we'll talk                                 about well I just talked about that                                 underneath that we have a web proxy                                 cache for speed                                 and we'll go into each one of those in a                                 little bit more detail as we talked so I                                 guess the thing that I really want to                                 point out here is everything here is in                                 the open all this stack is all open                                 source from how we're providing our                                 database files I mean you guys all know                                 that the the core of of Drupal is all                                 open source but everything else that                                 we're doing here other than the web                                 traffic manager the f                                              everything else is open source so that                                 web proxy cache layer is for those of                                 you that aren't familiar with it X just                                 speed being able to cash pages etc in in                                 Moran we have we're currently in our                                 production environment we have for as at                                 least one of the experts in our audience                                 will tell us he prepped tell you we                                 probably don't need for yet um but we've                                 got four we're sort of in that more is                                 better but we may scale some of those                                 down after the varnish layer we've got                                 the web Drupal layer obviously I think                                 probably everybody here understands what                                 makes that up the one thing that's added                                 to that is our APC cash which again is                                 just one more thing to try and cash your                                 PHP bytecode speed things up we've got                                 an object cache layer here meant we're                                 using memcache again we've got four we                                 may not need for but that's where we                                 started our my sequel is in a duel                                 master configuration with the non master                                 node being a read-only node and we're                                 using red hat five actually because the                                 pacemaker cluster that we chose to to                                 implement that on didn't support six yet                                 but that's obviously highly available                                 that's actually the only layer here from                                 the UNIX east side of the world that's                                 not virtualized and we did that again                                 for speed and the last layer for what                                 Drupal needs in terms of files we had an                                 existing highly available and                                 test cluster that we use is actually the                                 NFS cluster for our legacy sites we just                                 brought we've added a little bit more                                 storage to that and that's what's                                 providing the site's default files for                                 the Drupal heads in the in the room                                 specifics on Hardware f                                                                                                                        hundreds for those of you that are out                                 shopping for things with the LTM package                                 that's the local traffic manager package                                 when we were looking at all these layers                                 we we've figured out pretty quickly that                                 there was a lot of intra communication                                 between these layers and so we we were                                 using pairs of                                                        let all the layers whether it's memcache                                 talking to Drupal or varnish talking to                                 Drupal or whatever needs to talk within                                 these stacks on dedicated                                        switches that solve two things for us                                 when it simplified our overhead wiring                                 and it also made our racks more easily                                 portable which we'll talk about in a                                 minute there del are seven tens is the                                 is the base technology we pick                                         around six cores fairly standard to                                 Union it's the storage for all of this                                 whether it's the VMS or the highly                                 available NFS is what we call at the                                 University of Colorado our enterprise                                 storage that's HP left hand I scuzzy                                 sort of stuff fairly standard the one                                 downside to doing something locally is                                 obviously you don't get the geographic                                 separation that you would in the cloud                                 or that if you do things right in the                                 class you get in the cloud and so we                                 planned for that we haven't actually                                 implemented it yet because our second                                 data centers networking isn't ready to                                 support the f                                                   available nfm NFS and the enterprise                                 storage at the moment but i'll bet were                                 there within a year and so before i let                                 matt here talk about where we are where                                 we are today and show you some some                                 pretty cool stuff just a real couple                                 quick slides about where we came from so                                 this slide                                 is actually our website in                                              in netscape                                                             thing to me about this is that that                                 Netscape                                                            still running on my desktop on an old                                 solaris box so i was able to recreate                                 that web image pretty easily and the                                 last one is just to sort of show where                                 we came in terms of servers in                                          the server that was serving this page                                 was a single son enterprise                                        wasn't really sitting in a hallway like                                 that outside my office but we've come a                                 long way from                                                        tens for dedicated network switches and                                 for f                                                                  the lead developer at the University                                 Communications and Joe wasn't completely                                 right in saying that nobody could spell                                 Drupal two years ago because i've been                                 using drupal for about five years but                                 just joined the team about a year ago                                 and today the University Communications                                 maintains approximately                                              Drupal sites and most of these are still                                 currently living on external servers                                 that are not using this new production                                 stack but we are slowly moving these                                 over as we have the time but again the                                 most visible change was the Colorado to                                 edu home page and what I'm going to kind                                 of just quickly run through is some of                                 the modules that we use to build this                                 our search in the top right is using the                                 google appliance well it we have a                                 google appliance sitting in our data                                 center and what just happened to my                                 screen my screen is gone                                 tak help                                 interest honestly interesting                                 yeah well we just might kind of have to                                 make this up of course well I'm kind of                                 stuck                                                                    is done with the Google appliance one of                                 the big things that we really really                                 like about Drupal is its robust taxonomy                                 system so the primary menu that's at the                                 top of the screen are all top level                                 terms in a vocabulary that we're                                 actually planning on sharing across                                 multiple sites so we're using we've                                 prototyped a combination of the services                                 module in combination with feeds and                                 there we go where's my mouse                                 cool and this is just going to pan                                 through again so yeah we're planning a                                 combination of the services module in                                 the feeds module to actually share this                                 vocabulary across multiple sites on                                 campus so that we all maintained the                                 same general taxonomy system there's two                                 main node types on the site that are of                                 course we have about                                                    node types on the site but there's                                 really two main ones and that is news                                 releases and feature articles feature                                 articles are a little bit richer content                                 it allows our news editors to add in                                 photo galleries and videos and                                 slideshows whereas news releases are a                                 little more just basic text be all of                                 the different displays are of course                                 done using the views module with heavy                                 caching on all fronts the fight itself                                 is built on a the                                                        it's built using a responsive design and                                 so if you pull up the site on your                                 iPhone or iPads you can you can see the                                 site responding to the size of the                                 screen responsive design is an                                 interesting topic that Luke will go into                                 a lot more during tomorrow's keynote but                                 it's really difficult not necessarily                                 technically the media queries in                                 javascript is actually pretty simple but                                 it's really hard to in a way                                 philosophically determine what you what                                 is the most important content for mobile                                 users what's the most important content                                 for somebody on an iPad and how much of                                 the site do you need to change for the                                 various devices and so we actually just                                 launched this responsive design on                                 Monday and so it's definitely still                                 evolving we're going to continue to                                 change it over time as you scroll down                                 the site there's quite a bit of content                                 but if you keep scrolling all the way                                 down you get to a beautiful campus image                                 we're able to quickly swap this out for                                 major events it's snow day we put the                                 beautiful snow picture and when see you                                 was recently in the NC double-a                                 basketball                                 tournament we were able to switch out                                 the image in support of that team as                                 well this particular functionality is                                 provided by a module that I've                                 contributed back called the backstretch                                 module and it's simply using a jQuery                                 library that already existed but it just                                 integrates it into the droop into your                                 Drupal environment it allows you to very                                 easily select which images get displayed                                 as the background image so kind of                                 moving off of the home page and on to                                 the bigger scope of this project in                                 terms of maintaining lots and lots of                                 group of websites a single purple                                 website really isn't that hard it's just                                 a couple files the talks to a single                                 database but when you start working with                                 twenty and thirty and fifty and a                                 hundred sites it becomes extremely                                 difficult and there's a lot of                                 challenges that you run into in terms of                                 keeping modules all up-to-date across                                 all the sites and keeping Drupal core                                 up-to-date and so we developed a module                                 called the Drupal symlink manager or DSL                                 m which is its goal is to try to make                                 this slightly easier basically what it                                 does in order to use the slm I                                 you
YouTube URL: https://www.youtube.com/watch?v=ogxxg8VjtDU


