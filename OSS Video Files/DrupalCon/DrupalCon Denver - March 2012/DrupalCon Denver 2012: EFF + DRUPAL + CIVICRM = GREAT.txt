Title: DrupalCon Denver 2012: EFF + DRUPAL + CIVICRM = GREAT
Publication date: 2013-03-28
Playlist: DrupalCon Denver - March 2012
Description: 
	The Electronic Frontier Foundation (EFF) is the leading non-profit working to defend civil liberties in the realm of the internet and the digital world. This is a story about how the EFF was an early adopter of Drupal, tragically became encumbered with an aging Drupal5 site, and eventually triumphed with a migration and re-launch of their website in Drupal7. Also, there is a B Plot: The move from the proprietary advocacy/CRM service known as Convio into a Drupal-powered CiviCRM donation and CRM system. Presenters: Elly Jonez of Chapter Three and Micah Lee, EFF's Web Developer.

Questions answered by this session: 
What are some challenges that sites still on Drupal 5 face, and what are some techniques for upgrading to Drupal7?
How can Drupal configurations, Apache configurations, and other tools enhance user privacy on a Drupal site?
How difficult is it to move from a proprietary 3rd party CRM such as Convio to a Drupal / open source solution such as CiviCRM?
What are some unique issues that non-profits face when it comes to upgrading and maintaining a Drupal site?
Captions: 
	                              ok hello everybody my name is Micah I'm                               the web developer for the Electronic                               Frontier Foundation and this is Ellie                               I'm Ellie Jones I'm the director of                               nonprofit projects at chapter three so                               who is the eff you ask does everybody                               know who the eff of yay um well great in                               case there's somebody who doesn't we are                               a non-profit law firm that protects                                digital civil liberties and we do things                                like make it so you could legally                                jailbreak your iphone and so that you                                don't have a censored internet and we                                write some tools to make it so you your                                use of the Internet is more secure and                                things like that um so this is kind of a                                story about like the history of the eff                                website a little bit um back in two                                thousand six I was the webmaster at the                                eff and I moved the eff website into                                Drupal five and we were kind of like                                early Drupal adopters it was like a                                giant project there were thousands of                                legal PDFs tons of flat files laying                                around a directory structure and we did                                that it was great and then I left to go                                do freelance e things and left eff to                                its own devices with its Drupal                                       and you know that we do this a lot in                                agencies we build sites and then we go                                away so I built a site and then I went                                away to do more drupal stuff and then I                                came back a few years later because                                still friends with people eff and                                they're like look we need to upgrade to                                Drupal                                                                 there and it's just like I had to face                                my own mess that I had made basically I                                had to eat my own dog food and look at                                this site that I had built when it was                                my very first Drupal site ever so yes                                whether they were still in Drupal                                      that's a common situation actually it's                                kind of like the dirty secret of the                                Drupal world especially in nonprofit                                world it's a lot of sites out there                                they're still on Drupal                                             here still on Drupal                                               that's on Drupal five yeah Drupal five                                is no longer supported so um when I                                started working at eff about a year ago                                we were using cambios our CRM and we use                                it for a variety of things basically for                                those who don't know cambio is a CRM                                which is a constituent relations manager                                something like that so it contains the                                whole database of our contacts and we                                use it to accept donations and to send                                bulk emails and to do action alerts                                which is something that we do a lot of                                the FF um but it had problems it was                                really expensive cambio costs more than                                my salary so like every year and its                                proprietary and we like to use free                                software when we can and you know as                                like an organization that is really into                                privacy and really into protecting                                people's data we don't like the idea                                that our whole like membership database                                is stored on a third party that can get                                subpoenaed and things like that and they                                have some security problems like we                                discovered that if you are a eff member                                and you want to log in and change your                                contact information or something or                                unsubscribe from a list or something and                                you don't know what your password is you                                can use their password reset function                                and it just emailed you your password                                and in plain text and which means that                                they're not storing the passwords                                encrypted and so we talked to them about                                it and they insisted that they were                                encrypting passwords even though that's                                not possible um they also have some like                                weird limitations where they don't let                                you use a lot of special characters and                                your passwords and it can't be more than                                eight characters I don't know why and                                then also cambio for like Action Alerts                                especially in for donate pages and stuff                                it's very hard to make it look exactly                                how you want to make it look I make it                                work exactly how you want to make it                                work because you basically are able to                                define templates but not                                too much more and savvy CRM is kind of                                difficult to but it's definitely it's                                possible because we're hosting ourselves                                 and we have programmers basically um and                                 our conv contract was close to running                                 out and so I actually got hired                                 specifically to move us over to City CRM                                 from convida so the solution to both of                                 these problems that were on old Drupal                                   and that we wanted to leave cameo and                                 start using savvy CRM was to upgrade to                                 Drupal                                                                 and they needed each other because civvy                                 CRM the latest version didn't work on                                 Drupal                                                                 decided to do the upgrades all at the                                 same time and that was in October and                                 then we launched our Drupal site and                                 then like a week or two later we                                 launched City serum and TV serum is                                 actually on a different sub domain from                                 our website because it has different                                 needs kind of like our main website                                 doesn't have like it's basically a lot                                 of static content there's no like                                 comments or anything and no one's                                 submitting forms and so the entire thing                                 to be cached behind a caching proxy like                                 varnish where civvy crm like the donate                                 pages needs to use sessions and it needs                                 to do all this stuff and it just made                                 sense to split them in two separate                                 sites and we're actually sharing the                                 same code base and using a Drupal                                 multi-site with different modules                                 enabled in each and so what is City CRM                                 it's a open-source crm software and                                 technically it's a giant giant drupal                                 module and it's also a giant giant                                 joomla module and a giant giant                                 wordpress plugin so the idea is it just                                 works with whatever your CMS's and yeah                                 so it does all of the stuff that cambia                                 was doing or the other CRMs like salsa                                 which we're going to talk about more do                                 except you host your                                 Alton your Drupal site so let's talk a                                 little bit about what happens if you're                                 still on Drupal                                                       you start talking about getting off of                                 Drupal step                                                             say oh well you should upgrade from                                 Drupal five to Drupal                                                 Drupal                                                                 that that I think if your site is quite                                 small and very simple then that will                                 work but for the most part pretty much                                 if you've been on durable                                            long you've probably built some things                                 in crazy ways that are different than                                 how you would want to do it on Drupal                                   so you're pretty much looking at                                 building a Drupal                                                     possible best practices awesomest way                                 and then migrating your data from here                                 happy drupal                                                    migration process so it's a little bit                                 of a bummer at first you're like oh I                                 can't use the upgrade path but in                                 general I think it's good because it                                 causes you to have to step back and                                 reevaluate kind of what your best                                 practices are and what you want to do in                                 the future and if you're using Drupal                                   you probably made that website a long                                 time ago and things have changed since                                 then so the approach that we took with                                 the eff was we tried to just keep what                                 we were doing really minimal it's                                 tempting when you're once you get past                                 the thing where you're like okay now                                 we're going to rebuild a site we make a                                 new site in Drupal                                                      into it it's tempting to be like okay                                 let's also do a redesign and let's like                                 reorganize all of our information                                 architecture and etc like that's a giant                                 thing to undertake and I think you know                                 it's kind of a better approach to do the                                 bare minimum to get your current                                 information architecture clean it up a                                 bit if you need to get it into Drupal                                   and then you have your foundation for                                 the redesign the beautiful wonderful                                 phase to redesign you're going to do                                 later on so this is just an example of                                 kind of just show you just the minimal                                 changes we had to make a new theme so it                                 would have been like criminal not to                                 spiff things up a bit but we didn't so                                 this is how it used to look and this is                                 what we did to it so we kept the same                                 basic feel like the sidebar is the same                                 the                                 call outs are the same not too shocking                                 just trying to get the data in there                                 except that sign up for our mailing list                                 thing it goes to City serum instead of                                 caviar now so along the way we learned                                 some things which is good to do we wrote                                 a bunch of custom migration scripts they                                 were nice migration scripts to get                                 things from Drupal                                                   they were like drush integrated and                                 everything but about three weeks after                                 we finished the eff migration we                                 discovered that there's this awesome                                 module called migrate module which gives                                 you these great tools for doing data                                 migrations into Drupal so use that and                                 probably one of the biggest mistakes we                                 made was sort of more like a human                                 communication mistake which is the eff                                 site was really old and because it had                                 been through so many migrations and                                 there's just tons of content on it and                                 we were kind of cavalier about it we                                 just sort of moved everything old into                                 the new site and there's a lot of                                 stakeholders at the eff like everyone's                                 very involved in the website and I think                                 that's the case with a lot of nonprofits                                 that people are all very involved like                                 you're not going to get like a                                 department that is just doing the web                                 communication and that no one else cares                                 like everyone's kind of in there so we                                 definitely ended up with a situation                                 where like we moved everything over and                                 there was this nice new redesign and                                 people were looking at new at content                                 that they hadn't seen in a few years or                                 hadn't really noticed and there were                                 definitely some problems there was like                                 things that hadn't been there like                                 hadn't been moved in from the first                                 migration yeah there was a there was a                                 lot of content missing that people were                                 complaining about that never made it to                                 Drupal                                                                  flood of like problems that we had to                                 fix and so we had to set up a bug                                 tracker to handle it all like internally                                 for our website yes so the lesson there                                 is to do better content strategy before                                 you start and get more people involved                                 with like checking the content that                                 you're moving over and testing the site                                 before you push it live                                 so a civvie serum can do a lot of things                                 but it didn't do everything that we were                                 using Kavya for you can send bulk                                 mailings your city serum but you need to                                 have an email server and so civvy smtp                                 is a service that basically they let                                 people who used to be crm just use their                                 smtp server to send massive amounts of                                 emails and we've been working closely                                 with them to get our both males to go a                                 bit quicker because our mailing list has                                 been growing and growing in size but                                 it's way nicer to do that then try and                                 just use your web server as an email                                 server because then you have to deal                                 with all this drama that happens when                                 you try and send bulk emails and then                                 simply serum doesn't have an advocacy                                 campaign section and so we're actually                                 using salsa for the action alerts and we                                 have it integrated into civvies serum                                 and I'll explain how that works more but                                 the reason why so V serum doesn't have                                 this and the reason why it's kind of a                                 hard problem to solve is basically an                                 action alert is a form that people come                                 to and fill out and it contacts their                                 representative it has to look up their                                 representative based on their zip code                                 and it sends an email and a for fax to                                 their representative but different                                 members of Congress do things in                                 different ways I think they all have                                 publicly available fax numbers but only                                 some of them have email addresses and a                                 lot of them don't have email addresses                                 and only have forms on their website and                                 some of these forms have different                                 fields that are required and sometimes                                 and so like what's also has done is they                                 basically wrote scripts that set that                                 submit these forms on people's websites                                 automatically but as soon as like some                                 senator redesigns their website their                                 script might break and then they have to                                 fix it and it's and you know the people                                 who are elected change every couple                                 years and so it it's like a full-time                                 job is to keep this whole infrastructure                                 working and it's something that you need                                 that you can't really have like an open                                 source project that just here's an                                 action alerts thing you need to actually                                 have like                                 an API that does the sending and then                                 the other things are we accept donations                                 through silly crm and so we need a                                 payment processors and we're using                                 authorize.net and paypal for that and                                 those are fully supported and sub-zero                                 so the migration from convey unto savvy                                 crm was an API party it was wild um                                 there was there was lots of good laughs                                 but really it was a nightmare because                                 the comm VOA pii really doesn't work for                                 trying to get massive amounts of data                                 out of cambio like you can't actually                                 get more than                                                         requests to the comedy api and there's                                 they only let you have access to very                                 specific pieces of information so we                                 used a little bit but we mostly didn't                                 use it and what we found is that the                                 Salesforce API does let you get access                                 to everything and Tom bo has the service                                 called common ground where they sink                                 your comio database with your Salesforce                                 database and so we started using that                                 and had our convio data synced into                                 Salesforce and then we use the                                 Salesforce API to migrate it into                                 civvies CRMs for the Civic Center mapi                                 and we didn't really use the salsa API                                 for this but we use it every single hour                                 now talk more about that later um but in                                 order to do this we had about                                         contacts to move into civvy CRM and we                                 had to basically just write this crazy                                 huge sprawling script and tested in a                                 bunch of different ways and run it in                                 different segments like you have to have                                 contacts imported before you can import                                 the donations and all sorts of stuff and                                 we did all this and it took several                                 months but we finally managed to get all                                 of the data into civvies erm well that's                                 what we thought and then it turned out                                 like a month later that we realized that                                 random like contacts that we knew were                                 there were missing and random donations                                 were missing and we tracked it down to                                 common ground not actually working there                                 was a lot of a data that was still in                                 cambio that never made it to Salesforce                                 and so we had to like go and run reports                                 and cambio and write other scripts to                                 import it and it was pretty it was                                 totally a nightmare and it was                                 p I party also spent time at but it was                                 worth it because now we're using city                                 serum and since we launched in october                                 when we started with around                                         contacts we have over a million contacts                                 now and we have we're hosting in                                 ourselves and so and we have you know                                 we're lucky enough to have web                                 developers on staff at eff and so we are                                 able to just do whatever we want with it                                 like if the fundraising team needs some                                 a special thing for some special                                 fundraising campaign that what's all                                 crazy and has counters and stuff we                                 could like spend a couple days and build                                 it for them and so that's pretty cool oh                                 and so then recurring credit card                                 donations this was a really tough                                 problem because we had about a thousand                                 recurring donors in cambio and when we                                 close our convio account then suddenly                                 their credit cards will stop getting                                 charged and we thought we're gonna have                                 to like contact these cells and people                                 and ask them to Reese I nup in civvy CRM                                 which means a lot of them wouldn't sign                                 up um but we were we heard from someone                                 at Rainforest Action Network actually                                 that they had the exact same issue when                                 they switched from cambio de salsa and                                 they were able to save their occurring                                 donation so we spent a lot of work                                 trying to save ours and we eventually                                 did by getting figuring out who our                                 payment processor was which was pretty                                 hard to figure out and then getting them                                 to send us the actual credit card                                 numbers and then recharging the credit                                 card numbers through City CRM but we                                 only had credit card numbers and                                 expiration dates and like cambio user                                 IDs we didn't have anything else and so                                 we had to like figure out what's a VCR                                 I'm contacts they were we had to like                                 pack the payment processors in civvy                                 serum temporarily to disable checking                                 the security code because we didn't have                                 security codes and we had to write a                                 selenium script every day charged credit                                 cards for that day so the moral of this                                 story is if you want to save recurring                                 donors because you're switching from one                                 CRM to another serum if you have like a                                 small number of recurring if you have                                 like less than                                                          to just call those hundred people and                                 get them to do it yeah so this is how                                 our eff Action Center works basically                                 the point of our action                                 Center it so that the people can stick                                 it to the man and we're using salsa to                                 host our action alerts and this green                                 line is get requests or HTTP requests                                 and so what happens is when people go to                                 take action they load our action learn                                 on salsa and then they submit it to                                 salsa and salsa contacts Congress and                                 then on success they got redirected to                                 supporters said eff tour to a Thank You                                 page and the thank you page is actually                                 a civvie CRM donate page it lets you                                 like share this stuff on Twitter and                                 Facebook and also donate if you want and                                 then the blue line is a cron job that we                                 run once an hour that use the salsa API                                 to figure out the latest people who have                                 taken action and then import those                                 people into city CRM and record in their                                 contacts record that they took action                                 and this has actually been working                                 pretty well for us and so that way we're                                 still just using civvies serum for                                 everything and salsa for the action                                 Lance but this is actually something                                 that we want to make it look like                                 instead and the people in right now it's                                 not really possible to be the people                                 it's also said that we can do it we want                                 to make it so that we host our own                                 action alerts because we can do a lot of                                 cool stuff with we could host your own                                 action alerts and then use the salsa API                                 to just say here's a contact here's the                                 message send a message to Congress and                                 sometime when we have time we're going                                 to work with salsa and start doing it                                 this way instead and then you know it's                                 like sauce posting your actual Nets with                                 salsa is similar to hosting them with                                 convio you're able to change the                                 template but you can't change all that                                 much but if we hosted ourselves we'll be                                 able to like add live counters of how                                 many people have signed so far and like                                 pull data from other places to put on                                 that action on our page and other things                                 like that so um the open source                                 community is pretty awesome and one of                                 the things that we really like about                                 City serum is that it's open source and                                 we could look at the source code and you                                 know when bugs happen we could actually                                 just patch the bug                                 and submit patches and everyone benefits                                 and we can extend it really easily we                                 could write Drupal modules that work                                 with Sevilla CRM which we've done a lot                                 of to make semi serum work for us um and                                 we also go to code sprints and we hosted                                 a code sprint like the week that we were                                 launching civvy serum actually there was                                 a code sprint and it was really cool                                 because there were all these divi serum                                 developers and like we're like oh crap                                 how do we do this thing and then like                                 some of the core developers or like oh                                 here's how so that was cool um and we                                 hosted a meet-up recently and now we                                 actually have like some stuff that we                                 need in civvy crm and so we're giving                                 the savvy serum project money to develop                                 it for us and everyone will benefit from                                 that and so part of the story is that                                 eff is really lucky and that it has some                                 like hardcore nerds working there who                                 are able to connect all these pieces but                                 one of the themes here is that you know                                 eff start has started working with                                 Sevilla CRM and just becoming part of                                 that community and if you are at a                                 non-profit and you don't have in-house                                 development capacity what do you do                                 there's a couple of things one thing is                                 that you can hire a civvie CRM expert                                 using that those URLs that are down                                 there you can find a contractor to help                                 you build out your city CRM installation                                 and the other thing is that there's a                                 lot of nonprofits getting together who                                 collaborate to sort of pull their                                 resources and pull their funding to get                                 the features that they need for their                                 websites built and all benefit from that                                 at the same time a good example of that                                 is a the watershed now project which you                                 can google and find out about civics                                 Iran has make it happen campaigns which                                 are pretty cool it's a there if there                                 are features that a lot of different                                 organizations want in civvy crm um they                                 estimate how much it'll cost to develop                                 this feature and then organizations                                 could donate money towards this feature                                 and so a good example of a make it                                 happen campaign is we accept donations                                 through credit cards do authorize.net                                 and through paypal and we also want to                                 accept it                                 Google Checkout but the way that it                                 works now every donate page can only                                 work with one payment processor which is                                 really annoying so that means we have                                 for every donate page we have we have                                 another one for paypal and then if we                                 were going to do Google Google Checkout                                 we'd have to have three donate pages for                                 every donate page and one of the make it                                 happen campaigns is to have let people                                 choose what payment processor they want                                 to use when they're donating on the same                                 donate page and so that's actually one                                 of the things that we're helping fund                                 and then everyone will be able to start                                 accepting lots of payment processes and                                 it'll be great so mistakes were made                                 part                                                                  Micah told me that they were needing to                                 build their eff shop and I was like oh                                 you should use Drupal commerce it's                                 awesome it's new it's great and it                                 turned out that Drupal commerce was just                                 kind of like too much for what they                                 needed they really needed a small shop                                 where people could kind of like buy a                                 t-shirt or buy like what a First                                 Amendment rights metal card that you can                                 carry in your wallet to set off the                                 metal detectors of the TSA or                                     amendment rights sorry so eventually                                 they just kind of ended up using uber                                 cart instead after struggling with                                 drupal commerce a lot that's a good                                 example of something where like it                                 doesn't really tools that are great for                                 business which is like a giant shop with                                 love giant for API framework for                                 building a store they really just needed                                 something out of the box they could open                                 up that was like all right now we have                                 products in a shopping cart at the end                                 so um here's some security stuff that we                                 do on our website um so our website is                                 separated out into WWF fo RG and                                 supporters at eff too dark for civic                                 serum and the whole www part of our                                 website is just a whole lot of static                                 content there's like blog posts FOIA                                 requests documents you could download                                 and like lots of other information and                                 as a privacy organization we decided it                                 make sense to not set cookies in                                 people's browsers when they visit our                                 website and so we did some stuff to                                 totally disable cookies getting set                                 and we did this in some burner settings                                 and also we changed our settings PHP                                 file for WWE FF ugh and this also has                                 other benefits it means that if you                                 can't have cookies set at that domain                                 name then you can't login at that domain                                 name which means that even if we have                                 like gaping security holes in some                                 module and someone figures out how to                                 hack it to get like administrative                                 rights they can't do it because they                                 can't get administrative rights if they                                 don't have a session and so there's just                                 no way of logging in so it's pretty cool                                 but then that means how do we log into                                 our site we have a different domain name                                 that we use to log into our site and                                 that different domain name is all                                 protected with HTTP basic authentication                                 so when you go to the domain name more                                 cookies are allowed to go at set it pops                                 up a thing we have to type any user name                                 and password so people actually have to                                 type into usernames and passwords                                 together but it definitely makes things                                 really nice and secure and I actually                                 hear that a whitehouse gov that uses                                 Drupal does a very similar type of thing                                 cookies don't get set on whitehouse.gov                                 and instead they have to be using a                                 specific White House VPN to login they                                 have to come from like the right IP                                 address or else you can't log on which                                 just has like very huge security                                 benefits for a lot of things and then we                                 oh yeah um so we are big proponent of                                 deprecating HTTP and making it so that                                 everything goes over HTTPS and so our                                 whole like everything at WWE ft /                                 supporters that eff torgo's is just                                 through https if you go to http you got                                 redirected and but our website has been                                 getting more and more traffic the more                                 week the more popular we got in the more                                 we grow and Drupal has had hard times                                 handling all of this traffic and so we                                 decided we needed to have a caching                                 proxy and so we're using varnish but                                 varnish can't handle HTTP so we're also                                 using pound which is a server that that                                 like handles that initiates https to                                 know                                 and then forwards that stuff onto                                 varnish and then varnish either serves                                 cache copies or forwards that stuff on                                 to a patch a and so it's this big                                 convoluted thing but it it works and                                 it's pretty cool because we're able to                                 actually like I don't know there's lots                                 of scaling stuff that could happen like                                 if we wanted to we can make it so that                                 pound is just running on one server and                                 then n varnish is running on that server                                 and then apache is running on lots of                                 different servers and it could all work                                 out and then also we don't like it when                                 people store more information about                                 visitors are about anyone than they need                                 to store because all that information                                 sitting around is like it could contain                                 lots of private information and it also                                 could be an easy target for subpoenas                                 and so we don't log IP addresses and for                                 the longest time we were just not                                 logging IP addresses but now we are                                 equipped you logging IP addresses which                                 is a crypto log as the software that I                                 wrote that is its it's not done yet it                                 hasn't officially been launched but if                                 you actually want to look at it there's                                 the code is that a get the F F dot org                                 but it's basically a instead of logging                                 IP addresses in your logs it it logs a                                 hash and it's a hash of your IP address                                 that's salted with some random data and                                 the salt changes once a day so what this                                 means in practice is that we don't log                                 IP addresses and if someone's looking at                                 our logs they can't figure out people's                                 IP addresses from it but we still get to                                 know the difference between unique                                 that's a unique hits and pageviews so                                 yeah um so I'm going to go off on a                                 tangent about sopa pipa blackout day and                                 how this works with City sear on but                                 first are there any questions that you                                 have about any of this stuff so far do                                 you want to walk up to the mic                                 how are you dealing with PCI DSS with                                 authorize.net in silly um so we are                                 we're starting to deal with it we're not                                 we don't have PCI compliance yet but we                                 are in the process of going through all                                 of the things to get PCI compliance                                 which is kind of annoying I actually                                 thought that we didn't have to use we                                 didn't have to be PCI compliant if we                                 were using authorized on that but we do                                 and so we've been implementing lots of                                 stuff and we're looking into vendors to                                 do security scans on our site and stuff                                 we have like all sorts of security                                 policy that we already have implemented                                 but we need to like make it fit within                                 PCI's requirements so that means you're                                 using authorized Nets aim profile in                                 civvy right um yes I believe so where                                 it's all embedded it's not jumping out                                 toss right yeah when people so when                                 people submit credit card numbers onto                                 our website if they're making a post                                 request with the credit card numbers to                                 our website and then we're using oscar                                 has done that's API to charge the card                                 we had to build a sim custom module for                                 that we're using ourselves we haven't                                 submitted it back yet I was just                                 wondering how you were Oh interesting                                 does does that avoid PCI compliant                                 because what we actually do is we we                                 built the sim module and then what it                                 does is when you get to the payment                                 screen you jumped authorize.net and then                                 we post back after the fact but that's                                 the only way we were able to get around                                 PCI DSS with University interesting do                                 you want to show me that later no be                                 useful no no yes I'd like to okay as                                 someone who's built many difficult                                 websites at integrated Drupal                                       severe Emma was just extremely curious                                 how much do you leverage entities and                                 views drupal constructs with inside suvi                                 CRM                                 we built the site using panels for                                 everything so it's mostly the well for                                 for the eff to work part of the site                                 it's all panels panels everywhere and                                 views content pains and occasionally                                 custom content type pains using the C                                 tools API and then I think micah built                                 the other supporters that eff to work                                 also uses panels everywhere on the same                                 theme and some views and yeah so well so                                 in terms of actually like integrating                                 City crm with the rest of the site we                                 don't do that much of that like the                                 public facing severe CRM stuff is like                                 donate pages and the form to subscribe                                 to our mailing list and like you know                                 our salsa Action Alerts um and we and we                                 like did some custom stuff like we made                                 a Drupal forum where you can submit your                                 email address and it looks up your                                 contact in civvy CRM and then sends you                                 an email it's a link to change your data                                 because Timmy serum doesn't have any way                                 of like letting people change their data                                 out of the box but in terms of actually                                 displaying information from civvy CRM to                                 people we don't really do that we pretty                                 much just the eff staff does the display                                 of information so we haven't needed to                                 do much of that stuff um out of                                 curiosity when you're talking about                                 drupal commerce and not not really using                                 that kind of similar to his question how                                 do you how do you decide when to use you                                 know drupal commerce like if you're                                 selling products and then and you                                 obviously want to display them on your                                 public page and not your civvy crm page                                 so do you have to have two separate                                 purchasing options like you have a                                 donation which is sipi CRM and then your                                 products is still commerce I think you'd                                 have to just pick one or the other well                                 so civvy serum doesn't have a store it                                 doesn't have a way of buying stuff as a                                 way of donating and getting premiums                                 like you got a t-shirt if you donate                                 enough money but it doesn't actually                                 have an online store and so that's why                                 we decided to use like drupal commerce                                 in uber cart so that we can                                 like a store with a shopping her and you                                 can decide to get your Fourth Amendment                                 tape so that when you know if it's                                 packaging tape when people cut through                                 your packaging tape to search your boxes                                 they're cutting through the Fourth                                 Amendment did it but if you like so what                                 we we haven't actually done this yet but                                 we want to it's still like a ticket to                                 do is a integrate the store with Sevilla                                 serum right now it's not integrated but                                 we want to make it so that when people                                 buy stuff through Burkhardt it just adds                                 a like a record in their City sir I'm                                 contact saying that they bought it would                                 that be the same like event                                 registrations as well well event                                 registrations you could do that directly                                 through study serum and we haven't done                                 we're like a bet we're just starting to                                 test the city serum events stuff like                                 we're going to have some of that's                                 coming up i think around Def Con and                                 we're going to have used civic serums                                 event registration and have people                                 register through supporters study of F                                 dot org so I'm not sure exactly how all                                 that stuff works so I haven't looked a                                 whole lot of it yet but that's just a                                 savvy serum feature I you want to hear                                 about the blackout day it was pretty fun                                 um so blackout day was January                                          um you probably remember it because the                                 inter won internet went dark and big                                 websites like Wikipedia and Google                                 participated in it and we at eff have                                 been doing a lot of work against                                 internet censorship for a long time and                                 we've been doing work against SOPA and                                 PIPA since the bills were introduced and                                 quake of which was the bill before it                                 there was a censorship bill that didn't                                 make it and so we got a lot of traffic                                 around that time and so blackout day was                                 on a Wednesday and the Friday before                                 that like around five o'clock we heard                                 from wikipedia that they wanted to link                                 to our petition and but they warned us                                 that we need to be able to handle                                 millions and millions and                                 millions of hits in the course of a                                 couple minutes which we can't handle and                                 so we decide we basically just like                                 spent from that friday evening to the                                 next tuesday building something that                                 could handle that and wikipedia ended up                                 not linking to us because i don't i                                 don't think they have faith that we                                 could do it in time but we did but we                                 got lots of other traffic but basically                                 we built a big infinitely scalable                                 system on the amazon cloud with a load                                 balancer and lots of lots of servers                                 sitting behind it and each server like I                                 don't know so we needed to be able to                                 handle submissions of petitions and we                                 also needed to be able to handle                                 donations because our cities like we                                 load balanced our city cm donate forum                                 and sent a thousand requests edit like                                 immediately one after another and it                                 crushed Apache which isn't good because                                 we were going to get much more than a                                 thousand hits immediately and so we                                 actually programmed a basically HTML                                 form that when you submit it it just                                 stores the row and a my sequel database                                 and and that's that was the petition and                                 then we made another basically in HTML                                 form that's a credit card form for a                                 donate form and when you submit it it it                                 charges the credit card using the                                 authorize.net API and then stores ergo                                 in a database this is like the person                                 with this email address donated this                                 much and we made it like very very very                                 like streamlined we like had to do                                 things like make it so we don't don't                                 connect to my sequel until after people                                 click Submit because otherwise you have                                 like millions of my sequel connections                                 that are open not doing anything and in                                 order to do the credit card processing                                 stuff we actually just like looked at                                 the civvies erm authorize.net source                                 code and ripped a bunch of stuff out and                                 like read made it like a little bit                                 simpler and used it and that was pretty                                 cool because it's another way that happy                                 being open source really helped us in                                 this case but anyways it was like                                        the day before blackout day and that was                                 on the west                                 which was midnight on the East Coast                                 when all of these websites were starting                                 to black out and so our plan was host or                                 petition with salsa and as soon as salsa                                 like if salsa couldn't handle it then we                                 would fall back to hosting our petition                                 ourselves with this big thing that we                                 built and it took about an hour before                                 salsa stopped being able to handle it                                 and their server just crashed and it                                 just stopped working and I that was                                 around the same time that minecraft done                                 that started redirecting their whole                                 website to us and I think that that's                                 probably why I guess there's a lot of                                 minecrft others out there um so we fell                                 back to our thing and our petition I                                 didn't look super pretty and Mozilla was                                 going to start their black out at like                                                                                                      walking out it was like if people                                 installed firefox and didn't change                                 their default homepage when they open                                 firefox they'll see you like going to                                 our petition and then also when people                                 are trying to download firefox or                                 thunderbird or anything almost illit org                                 it would like just be replaced with the                                 blackout with willing to our petition                                 and they were considering linking to the                                 American censorship dederick petition                                 instead because it looks a lot better                                 but then they're like but if you guys                                 make your petition look a lot better                                 before we launch at                                                   our time then we'll in key instead so at                                 like from midnight to like three I                                 designed this thing which looks way                                 nicer and we also looked at the like how                                 many people were submitting before this                                 versus how many people were submitting                                 after this I don't have a screenshot of                                 what it looks like before but it was                                 much uglier but um like over twice as                                 many people submit the nice form                                 compared to like how many people of it                                 which is pretty cool and that's actually                                 one of the reasons why we want to host                                 our action lights ourselves because we                                 can't actually make them look like like                                 this with this has fancy ajax stuff and                                 or fancy jquery stuff and we can't                                 really do all of that stuff posted on                                 salsa but we will be able to do this                                 stuff if we hosted all ourselves but                                 yeah in the end we sent over a million                                 emails to Congress and we won so it's                                 cool                                 so if you know someone who's still on                                 Drupal                                                                  you're stuck on something that's really                                 difficult to work with like calm be                                      cantera some people are on the message                                 here is you can totally do it it's hard                                 you're gonna have to write some data                                 migration scripts but you can do it you                                 can get your stuff in to where it needs                                 to be it's going to be an API party but                                 it's gonna be fun because open source is                                 here to help you and yeah Hey oh and                                 also eff is hiring a web developer right                                 now so look at our website and apply if                                 you want to work for eff it's pretty                                 awesome place to work are there any                                 other questions                                 the question it was would you would you                                 plan more we did actually we were lucky                                 and that the architecture on the Drupal                                 five site pretty much informed the                                 architecture on the Drupal                                              planned in that we looked at what was on                                 the Drupal                                                            needed to move over and the only thing                                 we really changed was that there was a                                 giant taxonomy of issues that are sort                                 of like the topics eff covers and the in                                 the former site issues had been nodes                                 and in Drupal                                                          terms we were doing a lot of node                                 reference stuff before and then we sort                                 of switched it over so our plan was                                 pretty much just like using the schema                                 that we already had and then kind of                                 adjusting it slightly I I think and we                                 did write a development plan for part of                                 the two so I mean you can always plan                                 more but I think we did pretty good what                                 strategy are you deploying that deals                                 with Drupal accounts versus just like a                                 regular individual civvy account are all                                 of your civvy accounts also Drupal                                 accounts or do you have some variation                                 in so we haven't so that um city crm                                 doesn't create drupal users so yeah yeah                                 yeah you could you could do that you can                                 make it so when people when contacts are                                 created in civvy serum it creates a                                 Drupal user for them and likes the                                 accounts and stuff but we don't want                                 anyone logging into our site basically                                 besides us and so we just don't make                                 users for them and instead of instead of                                 that we made it so that people could                                 still like update the information in                                  their contact record by doing this form                                  that we made so is that one of the                                  reasons you're separating on different                                  domains here's an example I would say                                  let's say you had a blog running or                                  comments running on eff gorg and people                                  feel that they've already gone in they                                  donated they've created an account but                                  they can't use that account to come they                                  would have two accounts at your site                                  that's that's currently your strategy                                  well we actually don't have comments on                                  AFF the dark which makes us so we don't                                  have that problem like eff that org is                                  all static for the                                  sides that look at it so so we just                                  avoid the issue by having nobody login                                  to our website just a VCR em or to                                  Drupal like at all except for uff staff                                  and it's actually like it turns out to                                  be really nice like how come Bo used to                                  store plaintext passwords well we don't                                  have passwords for our members anymore                                  which it's a lot nicer to not have to                                  have a giant database of passwords that                                  would really suck if somebody hacked us                                  and dumped that database anything else                                  okay thank you for coming
YouTube URL: https://www.youtube.com/watch?v=8Ci4y-i4MDY


