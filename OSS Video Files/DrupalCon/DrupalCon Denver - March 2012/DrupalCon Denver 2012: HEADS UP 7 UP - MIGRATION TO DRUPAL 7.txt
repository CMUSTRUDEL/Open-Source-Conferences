Title: DrupalCon Denver 2012: HEADS UP 7 UP - MIGRATION TO DRUPAL 7
Publication date: 2013-03-28
Playlist: DrupalCon Denver - March 2012
Description: 
	You have a legacy Drupal website and are unsure if you should upgrade to Drupal 7. There are some amazing new features in Drupal 7 and you want to get your hands on them. New modules are coming out for it every day. How do you identify if your current Drupal website can or should be migrated to Drupal 7? This presentation will take you though the questions you should be asking as well as show you some of the tools and tricks of the trade to migrate your Drupal 6 site into Drupal 7. After migrating over 180 websites in a massive multi-site setup we have a good understanding on this process and have some words of wisdom to share with you.

Questions answered by this session: 
Should I upgrade to Drupal 7
How much work / time is involved in the upgrade process and what tools are available to me to make the upgrade process easier
What about my contributed and custom modules
What are some of the gotchas or pain points of the upgrade process
What are the benefits to upgrading my website
Captions: 
	                              one of the major projects that we had                               was upgrading close to                                             Portland State University from the                               Drupal                                                            system and we did that all in one go it                               wasn't one day but it was one go so to                               speak and that's a little bit                               information about what image X media is                               doing and some of our clients so I'm                                going to stop with the shameless                                plugging right here should you upgrade                                to Drupal                                                            answer is relatively obvious but for a                                lot of people that topic is one that                                that causes some nightmares and some                                headaches if you were probably the                                reason why you're sitting in this room                                today is that you're an administrator                                maybe in an organization that has a                                Drupal                                                               you may be the site owner yourself and                                your current system is in Drupal                                      you thinking about like going over to                                upgrading to Drupal                                                  owner or freelancer and in recent times                                now the requests have become more and                                more from clients to hey can you upgrade                                my site from six to seven so we want to                                talk about a couple of things and make                                the headaches go away a little bit or                                make you aware of when the right time is                                to take a tylenol so to speak so these                                are a couple of the things that we're                                going to talk about should you upgrade                                to Drupal                                                      resounding yes but there's a little                                asterisk beside it because that's a                                pretty definitive statement so we're                                going to briefly touch on some areas                                also where it might not be the best way                                to upgrade your site from triple six in                                Drupal                                                              program carefully you saw that there are                                a lot of sessions this year about                                actually migrating your site not going                                the usual upgrade way but migrating                                contact and not only from a third party                                from a different system like WordPress                                that also is                                well the way of going from a Drupal                                  site to a drupal                                                   session we want to concentrate a little                                bit more of like the traditional way the                                upgrading path the upgrade path that is                                that is there we're going to briefly                                talk about some of the benefits that                                that you will gain from from going to                                Drupal                                                                 status is regarding core and also                                contributed modules we're going to talk                                about actually how to upgrade what the                                steps are there regarding core contract                                your custom modules you theme what is                                going to happen to your content cck                                fields we're going to talk a little bit                                about catastrophes that you might run                                across or that we experience and                                contrary to every recommendation from                                the drupal association that said don't                                do live demos we're going to do a live                                demo and she is very sure that his                                script that he has written will work I'm                                not so sure about that so if you're                                getting bored tweet to hashtag hu                                    fail or win and bet if we actually                                manage to get this life then we're                                working at the end of the session or not                                and you might get a lollipop if you do                                so let's talk a little bit about the new                                things in in Drupal                                                  that is a little bit more from a                                programmers perspective I chose these                                cars because let's be honest like the                                old Mustang that that's a classic that's                                so a pretty good car and I feel the same                                way about Drupal                                                      good system and it's one of the systems                                that really made Drupal take off more                                than anything before but there's just a                                lot of nice new bling and a nice new                                things in Drupal                                                 considering switching over there in                                cornell we have the concept of entities                                we have done improved form API that has                                a lot of cool features then programmers                                can use we have a new database                                abstraction layer that makes it much                                easier to integrate with other databases                                other than mysql and on the contract                                 level we also have a lot of exciting new                                 developments and modules coming out some                                 of these have backports Drupal                                   or Drupal                                                              like a fully featured as in as in Drupal                                                                                                          the theming related amega or Delta and                                 some of the other benefits and features                                 that came in                                                             like now you can cancel accounts we have                                 a new base theme and admin theme                                 accessibility has become better                                 usability and I know some of you might                                 cringe when I'm when I'm saying these                                 keywords but we have now a dashboard and                                 an overlay in core we have contextual                                 links right in there we have in like                                 improvements when it comes to security                                 you cannot you need like now the hash                                 salt in order to trigger crone runs we                                 have methods against brute force attacks                                 and of course mobile as you heard in                                 rhesus keynote will be even a more                                 integral part in Drupal                                                is already on a good way to make it much                                 easier to have mobile-friendly site and                                 mobile applications that you can develop                                 and in order to bring like a really lame                                 Drupal joke and web chicks will dig you                                 if you go with Drupal                                                    very happy if you use that                                 so these are some of the benefits that                                 you will gain by going to triple seven                                 but now the question is is Drupal                                   ready for you for the website in your                                 organization or for the client that is                                 coming to you and wants an upgrade and                                 Shay's going to talk a little bit about                                 that all right well he at the back to                                 the point that we had earlier is Drupal                                                                                                          yes yes it is as far as it goes right                                 now the core is stable but it's more                                 than stable if you notice the Drees key                                 point yesterday the Drupal                                               lifecycle is now in the mature stage so                                 that means is there's not going to be                                 any radical changes bugs and kind of                                 problems in that have been you know kind                                 of their out of the way so you shouldn't                                 be running into anything Cole related                                 that will prevent you from upgrading                                 from six to seven and from that as well                                 one of the reasons why we're saying this                                 upgrade a little bit later core has been                                 stable for about a year and a half now                                 and we haven't said that may okay well                                 maybe you shouldn't do wait a little bit                                 because a lot of the things that make up                                 Drupal and make it that what it is is                                 the contributed modules and a lot of                                 those weren't ready yet when Drupal                                   came out so right now there is                                      contributed modules that are now of                                 Drupal                                                                and majority these ones are the are the                                 core ones that you use on your websites                                 in the day-to-day things like context                                 views panels and stuff like that so                                 they're they're ready and that means                                 that Drupal                                                              well as far as Drupal                                               might be wondering hey should I you know                                 which I wait you know Jesus telling me                                 like hey there's a functionality fees in                                 December and then there's me code for                                 use in February and then august eight                                 hey we're gonna have a life why don't I                                 just wait until next year again like                                 when I was talking about Drupal                                        about a year and a half later now that                                 we're saying okay now it's time to                                 upgrade although core is stable a lot of                                 the other contributed modules have to                                 catch up as well and just another point                                 as well on just not dead you know this                                 is a open source community and when                                 these deadlines are set just be aware                                 that a lot of the times the leis happen                                 you guys / the software industry                                 that you guys have had push back stand                                 and things get delayed so I would I                                 would anticipate that as well one great                                 notice would be I've got a tweet here                                 from angie and this this was on februari                                                                                                          week was the first week that Drupal                                   usage overtook Drupal                                                 want to show you that the trend is                                 coming up here this is the weekly                                 project users breakdown on do on March                                                                                                  forty-two thousand websites in Drupal                                   and no only                                                         there's                                                                                                                                     upgrade as well the if you can see                                 through the time here like drupal                                   popularity is growing quite quickly so                                 the velocity of the changes is huge to                                 go back and point to the contributed                                 modules this is a screenshot of drupal                                 contribute or giz put together by angie                                 byron it's got a listing of the status                                 of the top                                                        modules in Drupal                                                        at the top                                                              them are in beta                                                         but they are stable and unusable so I'd                                 check out that that site along with the                                 ones that you use that are stable and                                 are usable there are a few problem                                 modules but those of you that have                                 modules like organic groups right now in                                 Drupal                                                           individual modules they add                                 functionality to organic groups there's                                                                                                         the whole thing we're going to try to                                 explain to today is you got to do a bit                                 of research on whether or not some of                                 the stuff that you use has an upgrade                                 path and is ready in Drupal                                            some of these ones are the common ones                                 ubercart commis changes a whole bunch of                                 Drupal                                                               using Drupal                                                          anything Commerce related the Drupal the                                 Commerce guy is actually just acquired I                                 think with about                                                      funding to progress Drupal                                              so if you guys are into that I                                 definitely focused                                 I'm moving up to Drupal                                             using uber card right now I know there's                                 a lot of development happening for that                                 but you might not be ready other things                                 to make note is a lot of the the SEO                                 tools that are in in Drupal                                             strong as in Drupal                                                     itself is a lot more SEO friendly with                                 the adoption a lot of themes that are                                 html                                                                 your HD your SEO gurus are quite there                                 yet so we have things like node words                                 which have an upgrade path to a new                                 module called meta tags or made it takes                                 quick so the tools that you're used to                                 and that you spend all the money and                                 give to your SEO gurus might not be                                 there in Drupal                                                       still do everything in seven but again                                 it's just a couple of modules might not                                 be available there for you and just a                                 couple of ones to note path redirect                                 content profile so on top of this these                                 are just a couple handful again you'll                                 have to do a little bit of research when                                 it comes to your own personal site if                                 you are using a module go to the page                                 check it out there's an issue queue that                                 Avila usually have an upgrade path                                 status or an issue status so you can                                 kind of see and understand whether or                                 not what I have on my site has a path                                    so now a little bit less of the Y and                                 more of the hell whoever tweeted that                                 out here how to upgrade core and con                                 trip let's say you have done your                                 research as shay just mentioned and your                                 site is a relatively straightforward and                                 standard side regarding Drupal sakes and                                 the modules that you that you're using                                 on it now if you look at these steps and                                 and you have already done a little bit                                 of your research you say like well okay                                 this steps they seem to be the same                                 steps that are mentioned on drupal.org                                 come documentation and and that's true                                 this is repetition for emphasis these                                 steps are really important to follow                                 along the first step as stupid as it                                 sounds it's like back up everything if                                 if you don't have your code yet and get                                 or any version control system shame on                                 you it's really important that you have                                 a quick fall back when you're starting                                 to work on the upgrade in case anything                                 goes south or you need to you need to go                                 quickly back to the last point where you                                 where you started off the next point                                 that you need to do is you need to                                 upgrade everything to the latest and                                 greatest with in Drupal                                              have to do that in order to make the                                 transition as quick and as painless as                                 possible third step is to disable all                                 non core modules sometimes maybe if you                                 didn't did transitions from five to six                                 it also worked if you didn't do that but                                 we found like in the projects that we                                 work with that actually this really                                 helped in order to have a clean                                 transition then if you're using it this                                 should be that's can be really a simple                                 step is to switching out core and                                 contraband where you already put the new                                 files in run update PHP enable all the                                 modules again that you need run update                                 PHP again and in a perfect world you                                 will have a new site                                 there are tools that can help you to                                 achieve that much quicker than and much                                 simpler than doing all of this by hand                                 and of course that's where rush comes in                                 and hopefully all of you most of you are                                 using dress the two commands that I want                                 to highlight here is you pc or which is                                 short for update code which if you just                                 use the command like this is looking at                                 your whole Drupal installation and it's                                 looking for the core as well as for any                                 contributed modules that have an update                                 available and then we'll run that update                                 you have to follow that up though with a                                 with the database update and there's                                 even though there's in a rush command                                 that promise you to do the whole steps                                                                                                        sub that works if you have a very                                 straight forward side again it doesn't                                 work in all cases so be careful with                                 that but you definitely can try that out                                 and that can actually help you quite a                                 lot and some of these steps shay will                                 alig out on run the demonstration so                                 just a quick reminder I think so far we                                 only have fails but that's okay so what                                 about your custom module if you if you                                 have created your custom audio is it                                 looking really bad or good okay if you                                 have a custom module that you want to                                 upgrade and a lot of sites have at least                                 a little helper module where you need to                                 put in any kind of like minor changes                                 may be like form tweaks or things like                                 that one thing you can do again the                                 Drupal the damp the documentation on d                                 dot org is really good for this but I                                 want to give you a quick show of a                                 module Dakota module in the code or                                 upgrade module and how these modules can                                 really help you with your side upgrades                                 so let me quickly go                                 okay so it's kind of like this is a                                 clean drupal                                                           want to see again which module it is                                 that I'm talking about it's called coder                                 and in that package is also code or                                 review and coder upgrade so and I dug                                 out like to really old from ancient all                                 Drupal                                                                  it so one was a custom tie into cck and                                 now in the in a in a module page you see                                 a link for code review and when I'm when                                 I'm clicking on it the first thing that                                 it does it complains about what crappy                                 code I wrote there and that I didn't                                 indented it in spaces for missing and                                 all this but that's actually not what                                 I'm interested in in the review section                                 i can say i want to convert this module                                 from six to seven and also want you to                                 tell me about the coding standards and                                 things like that but just for this                                 demonstration I say just show me the                                 critical things that I really need to do                                 that need to be definitely need to be                                 done in order to get this module from                                 six to seven and now it gives me a                                 number of things already for example                                 hook permissions is the new name of that                                 hook instead of hookworm things that I                                 need to change in my info file a couple                                 of other functions that don't exist                                 anymore a nice thing is it gives me                                 already the replacement functions for it                                 as well as a direct link to the Drupal                                 dark side where I can read more about                                 these changes and what needs to be done                                 there and it also went into the                                 javascript file and told me like the way                                 you have started that javascript file is                                 not going to work in                                 in six anymore now there's also the                                 upgrade feature here and the upgrade                                 feature has two sections that you can                                 run the first one is that it says like                                 okay I'm going to help you with getting                                 your coding standards in line because                                 that might be all over the place and it                                 makes it easier to migrate a module over                                 and then the second one is actually to                                 apply the core API changes to it and                                 just quickly to show you so here's a                                 module that I really can be that ugly                                 fight I took spaces out and indenting                                 out and all sorts of things so that was                                 a Drupal                                                               now for the coder upgrade it has a                                 directory called coder upgrade old in                                 files directory so this is where you                                 plug in your old module and now I say                                 okay I want you to try to upgrade this                                 module and I want you to come back I                                 want you to look for the coding                                 standards and also the core API changes                                 loop                                 this one here                                 okay so this has now worked and I can                                 show you the changes that happened now                                 in in a new directory called new it                                 placed that module again and what you                                 see is still like the old module and                                 this is the new module so just to show                                 you your changes it actually indented                                 everything it made sure that it all                                 conforms with what we have in triple                                 dark but also you might know that hook                                 block has changed from just one big hook                                 function into multiple so it already did                                 that to me and split that up and it left                                 some to do messages for me about things                                 that I still need to look at in my                                 module so for example rename the blocks                                 the deltas to something more useful and                                 not just                                                                that i didn't had any documentation                                 about what this function is doing and if                                 i'm looking at the install file I'm                                 actually seeing that it tells me well                                 the DB query that syntax has changed so                                 this is the new syntax that I have given                                 you this is your old one just make sure                                 that this is this statement is still                                 doing what you want to do so a super                                 helpful tool does it work with like                                 extremely complex modules that you that                                 you work with maybe not the code or                                 upgrade right away but definitely the                                 code review will give you a good first                                 start in order to find the different                                 functions that might be deprecated in                                 your module and make it easier for you                                 to upgrade in this regard now that's                                 about the the steps on how to use or how                                 to go about                                 core and me about core and your custom                                 modules but then there's also the themes                                 so she is going to talk a little bit                                 about we can what you have to take into                                 consideration regarding your theme                                 okay I like to thank you guys right away                                 for the hashtags I expected boat two or                                 three and to answer questions yeah we                                 got a couple of a couple more demos and                                 answers to your questions coming up so                                 one of them right here is what about my                                 sites theme unfortunately your site                                 theme doesn't have a code or module your                                 site theme is most likely custom because                                 you want to reflect your brand so                                 chances are you have something homebrew                                 that reflects your needs as your own                                 regions so we'll talk about that in a                                 sec but what's new in Drupal                                           new PHP template functions in Drupal                                   so those of you that use pre process and                                 process functions heavily in your theme                                 and this would be a bit of work to                                 migrate those across you're going to                                 need developers is what I'm going to get                                 at                                                                   themes upgrade but there's new variables                                 there's new content variable which is                                 now a block and you can place it around                                 your safe theme and move it around                                 there's new template files there's new a                                 new HTML and in your region template                                 file they got rid of the box template                                 file so if you happen to use that I                                 don't know who here would or has they                                 got rid of that one so the things to be                                 aware of if you had overlaying and kind                                 of wrapped around code in multiple                                 regions at different templates it could                                 be a bit of work in that regard so                                 things to consider is your theme is                                 usually custom there's not too many you                                 that I'm sure that are here running                                 something but like say minnelli or or                                 nope Arctic or something well that's                                    but and you're gonna have something that                                 you've gone out and you paid a developer                                 for that brings your your brand to life                                 so the upgrade paths for that Chancellor                                 doesn't exist those of you that are                                 running contributed themes you might be                                 lucky I'd go back and take a look and                                 see that if there is a dribble                                           and whether or not that actually that                                 meets your needs still the demo me show                                 you later actually has a Marinelli which                                 does actually have an upgrade path which                                 is quite nice within your within your                                 theme when you're considering about time                                 and cost to upgrade using a lot of you                                 I'm sure use views and a lot of you you                                 have multiple template files in views                                 I've gone to a couple of themes around                                 finding them all over the sites and                                 custom modules and they have hundreds                                 for every row and field so as you're                                 going through those not only with the                                 module upgrade with your theme upgrade                                 as well so keep that in mind that you'll                                 have to make changes to those but when                                 you're upgrading to Drupal                                            this a really good opportunity to take a                                 moment to refresh your design to take a                                 look at your look and feel and and maybe                                 this is a good chance for you to come up                                 with a new design you know you might                                 have just actually gone through a whole                                 upgrade to your site's look and feel and                                 now I real is that oh there's cool stuff                                 in seven now it's time to go to seven so                                 you might have to upgrade but this                                 actually be really good opportunity to                                 to start again to create another new                                 fresh look for your site and with that                                 you can then convert it to html                                         is a very big big thing right now and                                 it's a big consideration so when you are                                 going to are going to upgrade to seven                                 there's lots of great tools there's lots                                 of great frameworks those of you                                 familiar with the Omega framework I use                                 that I think it's great but it'd be good                                 chance to switch over to an html                                        site and then to get into the mobile                                 market well okay so now we got all my                                 modules all my theme accor's up to date                                 I got content and I've written a lot of                                 content and I want to keep that content                                 what do I do well you have two choices                                 been mentioned earlier that there's                                 migration a lot of times if you've                                 developed a new site you might want to                                 just migrate the content over from the                                 d                                                                        there's actually I believe a session                                 coming up with Morton after this one                                 would be good idea to go check that one                                 out but the upgrade path core should                                 take along take along your content what                                 happens with the site upgrade is if you                                 built your content types with with CC k                                 and with core when you run the upgrade                                 that should take all your content along                                 with you all your fields all your data                                 but it's not one hundred percent there's                                 a few contributed modules out there                                 likes a date or even like image                                 for that matter which is now a core                                 which is big that they might not come                                 out straight across so what you have to                                 do after you actually upgrade is do a                                 field migration so I got a demo coming                                 up later that will show you again when                                 you do the core upgrade what comes out                                 and what doesn't will you lose anything                                 when you upgrade will you lose your                                 content if you don't back up most likely                                 so I highly again stress the fact is                                 that the upgrade process is a bit of a                                 buggy ones with you have a lot of                                 contributed and custom modules so make                                 sure you backup but will be loosing no                                 and you're not going to lose into your                                 content all that will get come forward                                 but something to keep in mind is that if                                 you have custom modules that define                                 content types or custom modules a divine                                 define fields you will have to upgrade                                 those with the coder first the core                                 upgrade won't do that for you what about                                 my images and other files within my                                 content again if you use them file field                                 that will upgrade through core which is                                 great there's a new module media let's                                 not new there's a six version but it's                                 not the same as the seven version again                                 I highly recommend using that it's                                 compatible with the file field so after                                 you upgrade you should be able to switch                                 what's called the the widget type on the                                 field over to the media field and use                                 the new robust features and media module                                 and then I am CEO well I used sorry                                 elder a lot of you probably use imce as                                 your file browser again this would be a                                 good opportunity to move away from that                                 into the medium module it'll actually                                 allow you to import your IMC file                                 directly structor directly into the                                 media module so within the media file                                 browser you can see a structured folded                                 layout of all your files app and preview                                 it's quite slick actually                                 yep                                 ok                                 okay how to upgrade catastrophes this                                 this is my personal slide for my rant                                 but the demo that i put together I spent                                 I don't know how many hours are pulling                                 my hair out I'm lucky I have more than                                 this chem but it has issues and some of                                 the common issues that you might find                                 are something like volume of content                                 we've had a number of sites that have                                 hundreds of thousands of nodes and when                                 you run scripts with hundreds of                                 thousands of nodes things time out                                 things break and things you know just                                 your heart there are limitations to your                                 hardware so you have to break it up into                                 batches compress them or which we say a                                 lot of times when you have such a volume                                 of content is that actually the best                                 option might be a my grade is to export                                 out pieces of your site and import them                                 in one at a time but while you're doing                                 that upgrades can take a while so while                                 that's those large batches of content                                 are being upgraded you're getting new                                 content you have a user contributor site                                 guys or blog and guys are posting on the                                 forums guys you're leaving comments you                                 don't want to lose any of that so how do                                 you control that well solution you have                                 a development environment and you have                                 you automate the process as much as you                                 can if you come to a shop or a freelance                                 developer if you happen to write scripts                                 something that they can constantly reuse                                 which again I'll again highlight the                                 importance of having a backup and                                 writing scripts because as you do the                                 process is a bit tedious things break                                 you have to fix something and start all                                 over again when you do when you're                                 upgrading a site and it doesn't doesn't                                 work it doesn't complete it's broken you                                 actually have to go restore and started                                 again so having and writing scripts is a                                 really important thing in that regard so                                 while your users are making new content                                 and your scripts are running have it so                                 that you can be ready for when your                                 script stop to quickly QA take a look                                 make sure everything's there do what you                                 have to do switch over to your site that                                 you upgraded from your live production                                 site and at that point you'll have to                                 migrate in the new content depending how                                 much it is you could do this manually or                                 you could have something like the                                 migrated module                                 no to export or some other sort of                                 service to move them across common                                 things that break our file paths how do                                 you track them down when they're in your                                 content link checker and a couple of                                 interns would be really handy and again                                 the reiterate the process is it's a                                 picky and finicky process there are a                                 number of modules that during the                                 process will break will cause issues                                 will halt the whole thing you got to                                 stop make the fix adjust the order of                                 operations sometime and restart so I'm                                 going to hopefully be able to prove this                                 later okay so one important thing also                                 especially if you're if you're a company                                 that offers the service of upgrading the                                 site or if you're thinking about it for                                 your organization and want to know what                                 it all will entail is really to be aware                                 and count the cost of what will come                                 ahead of you there might be still a                                 couple of deal-breakers out there Shay                                 mentioned the organic groups module                                 there has been a lot of great work done                                 for that also in Drupal                                               Drupal                                                                 so exotic modules that have been created                                 for organic groups in six you might be                                 out of luck at the moment in Drupal                                   because there were having such major                                 changes to to organic groups if you have                                 an extremely hacked core I have my                                 personal opinion about people who had                                 course but you might be a little bit out                                 of luck or there might be actually a lot                                 of work ahead of you in order to make                                 this to make this upgrade working and                                 also if your site is quite outdated                                 you're running still unused one beta or                                 something like that you really should                                 consider just to maybe to build a new                                 than to try to run the upgrade path so a                                 number of things to take into                                 consideration that Shay and I already                                 mentioned about and just to recap that                                 you have to take into consideration the                                 number of the contributed modules that                                 you use in your side and what the status                                 is of the of those modules so you have                                 to do your research there is there an                                 upgrade                                 if there is if that module doesn't exist                                 in g                                                                   that functionality what needs to be done                                 there the number of custom modules we                                 showed you what can help you but that                                 was like those were like two relatively                                 simple modules if we're talking about                                 like                                                             thousands of lines of code you can kind                                 of imagine how long it will take also                                 then with QA and testing until you have                                 that up and then kind of like the number                                 of themes that are using on your side                                 and the views TPL hell that it was                                 really easy to get into in Drupal                                   remember these template files need to be                                 adjusted so you have to count them and                                 kind of like think about like okay man                                 how many files do I actually need to                                 adjust how many files and do I have to                                 work on and also the server and hosting                                 requirements Drupal                                                    more lightweight than Drupal                                         needs a little bit more power behind it                                 so that's also definitely something that                                 you need to that you need to check in                                 order to see if you need to make any                                 changes if you switch over to Drupal                                   environment so                                 to recap is Drupal                                                      it sure is it's it's on it's on the top                                 of its life cycle it's a great product                                 the features that that are in there you                                 you want to have them and they're really                                 great and it's it's the best way to move                                 forward especially when it comes also to                                 to mobile development is upgrading an                                 easy thing not necessarily but it's not                                 as bad specially if you use the tools                                 that are out there if you for example                                 all that you you contributed modules                                 check the there's usually like a ticket                                 in the in the issue queue that says like                                 dv                                                                   start and looking at like what happened                                 to a number of people that had maybe                                 issues in the past with upgrading their                                 module you have to take your costs into                                 consideration and do a proper site audit                                 of your site in order to really see what                                 you have and how much it will will cost                                 you but in the end everything is going                                 to be all right it's it's it's not as                                 not as bad as it looks and it's not as                                 expensive as it looks it really can be                                 done so I saw a couple of wins last time                                 I checked and Shay's going to start the                                 demo and but once he started the demo                                 there is a it's going to take a couple                                 of minutes so you can either then                                 starting already to line up if you have                                 any questions to us or are we going to                                 try to answer some of the questions that                                 came in through the through the Twitter                                 or back channel                                 it's got a little nervous at first the                                 fail calm was quite heavily out in front                                 in the start but I think we caught up in                                 a wind and near the end and to answer                                 the question yes the slides will be                                 posted there will be link at the end of                                 this will show you where to get those                                 who I gettin head myself here all right                                 come on                                 that's four on two                                                                                                      I've done and I'm going to show you a                                 website what I've done is I've created a                                 triple six sub website from a lot of                                 very common very common modules this is                                 big we're gonna make this dismal you                                 guys see that probably okay what i've                                 done as i created a not a simple site                                 but a site here that law go play quickly                                 just so you can see the rest enough i've                                 created a site using a lot of very                                 common drupal contributed modules so                                 there's a new system mcallen your system                                 there's a blog there's four arms there                                 is actually an e-commerce store a very                                 simple one that just this products                                 really solid this there's a quick taps                                 here on the right-hand side of this                                 recent news there's poll there's no                                 integration with social media navigation                                 so it's quite a bit things going on in                                 this so this is although small it's got                                 only got roughly about                                                  although small it's not simple and the                                 fact is that it's a page and a                                 navigation menu so as a few things here                                 is what what I'm trying to hope to do is                                 go from this site which is actually                                 using a contributed drupal theme so                                 there's a there was an upgrade path                                 there so those are that you were                                 wondering and what it would take this                                 one actually had not free path quite                                 nice to get to the new one shrink this                                 which is nice new shiny theme and to                                 have something that looks kind of sort                                 of like this so you have your content                                 comes through your navigation comes                                 through count on your blog forums so                                 that's what we're going to try to do                                 today and for proof of concept i'm going                                 to show you guys here it is update hop                                 this is the Drupal                                                     I'm going to run the script and it's                                 going to go through the process that we                                 did today so nothing like a cold live                                 code to make people run away and while                                 this is runs it's going to take                                 Oh anyway when this starts this going to                                 take about five minutes to complete so                                 again we'll get to first you guys please                                 take up to the mic and start answering                                 questions but what this script is doing                                 is it takes I've upgraded all the the                                 contribute modules to the latest                                 development versions so that Laurie has                                 been prepared but this script will then                                 take take all those development modules                                 are sorry contributed modules disable                                 them run upgrade encore re-enable the                                 contributed modules with the d                                           and then run the update on those as well                                 sounds simple there's probably a couple                                 hundred lines of code in this this is                                 super excited I know it's not hasn't                                 been a whole lot right yet but it'll                                 start spinning there we go and within                                 this script as well there's a number of                                 DB fixes that I had to do with some                                 contributed modules actually causing                                 errors in the database so there's a                                 number of little tweaks to get this to                                 work so I'll probably provide this code                                 is not pretty at the moment i'll have to                                 actually upgrade it and actually leave                                 some comments it's actually reusable                                 somewhat but what this is doing this is                                 using dress and a few scripts to                                 actually automate the process of                                 operating from a d                                                version so right now it's actually doing                                 all the contributed module updates I                                 know these are core updates but it's                                 again so please take the mic and we'll                                 have some Q&A session here and just to                                 follow up with what Shay has said                                 once he has commented properly the code                                 in this script and it's run through the                                 corner module for proper syntax oh                                 really we will make that we will make                                 that code available to you we're gonna                                 post probably a link on the on the                                 session page if you have any but if                                 you're also interested in it feel free                                 to just shoot share me in an email in                                 our through the presenter site on a                                 drupal kong now yeah and will be                                 available for a while after the                                 presentation as well so feel free to                                 come up there first question I guess I'm                                 senpai just last week there was a new                                 brush alias committed to crush five that                                 in one step will disable all enabled                                 contribs it loose through the site                                 looking for anything that's not core and                                 not theme and disables it in a single                                 command and if you're savvy you can also                                 get that to export to a text file so                                 that you can use the same clan and                                 reverse to re-enable everything so you                                 might want to look for that it's kind of                                 cool and I question question on the                                 contribs because Drupal                                            install files of all the modules that                                 are in the site regardless of whether                                 they're disabled or not how are you guys                                 handling that and is it do you find that                                 it's still necessary to disable contribs                                 or does it matter from upgrading from                                 Drupal                                                                contributors prior to operate in core                                 what I actually did with this script is                                 I because of the way that this works it                                 will actually try to upgrade not only                                 the core but I look at RIT modules at                                 once I have this in a git branch that                                 actually checks out from a d                                            a d                                                                 modules in it so then it runs core very                                 clean leak without any interference from                                 the contributed modules completes that                                 and then checks out a new branch which                                 has all the contributed modules in it                                 and then runs the app enables and runs                                 all the updates on the on the d                                  versions of those                                 that's good how that work so I think                                 it's very i do of what you're saying I                                 think it's important to disable them                                 prior to upgrade so what does that clear                                 you a quick question for the the droshky                                 manned which one was that and get you                                 back you it's it's actually commented                                 out in one of the RC files i think it's                                 not in cord rush but they put it in                                 there as a reference it's called dis                                 dash all and you can find the the drupal                                 org no debt i think it's                                             hook it up oh that's yeah give or take                                 one or two right yeah great so thank you                                 do you have any experience with                                 upgrading internationalization or the                                 domains models                                 I'm going to be extremely honest with                                 you know                                 and I'm going to be very honest with you                                 the answer would be no for that sorry                                 you mentioned going all the way to dev                                 versions of all your contributed modules                                 rather than a stable release that's that                                 seems crazy but yeah absolutely the                                 reason why is a lot of the development                                 versions have the bug fixes and and                                 there that were pushed out for the the                                 upgrade to Drupal                                                     few actual Drupal                                                       development versions of just because                                 things like even like see tools and                                 views those have the latest bug fixes                                 and those are actually are the latest                                 and stabilus modules out there so it is                                 a bit scary saying running the deb                                 versions of things and it is a is not                                 for every module sometimes it is best                                 that you run the stable version in                                 Drupal                                                            upgrade from six to seven a majority of                                 the time you want to upgrade to the                                 development version because it has all                                 the latest code and then any upgrade                                 process or patches that were needed to                                 be applied to that that's for both in                                 six and seven well six will definitely                                 development version                                                       staple branches sorry for two questions                                  but the other one is is this a good                                  moment to switch to a different theme or                                  should that sort of be a separate                                  project this is a good moment for that                                  if i switch a different theme do you                                  mean that another contributing going                                  from specifically for me is n                                            well I have a bit of a biased and then                                  so as it takes my two cents on that one                                  I'm sure they'd be a few guys are giving                                  this argue with me in this car but                                  absolutely i think this is a wonderful                                  time to really take the time to move                                  from your old theme into a new modern                                  responsive layout again like trees                                  pointed out mobile is very big and is                                  something you should consider so yes                                  this is the time to them so I'm going to                                  pause you for one second year I'm going                                  to quickly show you this is completed so                                  hopefully we have a new site and I get                                  nervous about this lines right here                                  which says block administration was                                  assigned to an invalid region that tends                                  to happen so the layup might look a                                  little bit different but when we get                                  back we'll find out come on                                  one two three go okay it doesn't count                                  as a feel that's a mac OS problem okay                                  so this is the moment of truth hopefully                                  we have a final tally on the in-law stop                                  counting may still be like you okay so                                  this is the Drupal                                                      looks like something a little bit like                                  the Drupal                                                         refresh button so fingers crossed for                                  many people hey it works so it's there                                  as much as that was done during a live                                  demonstration that took a while and                                  again it's it took a few minutes to run                                  as well so when we quick point is we'll                                  get to the questions in a sec not                                  everything does get across one hundred                                  percent with this you'll notice that the                                  blog is missing some images and some                                  social media links those fields a lot of                                  times or contributed fields and actually                                  have to come in and update them using                                  the cck migrate field upgrade tool that                                  comes out with Cort well she is getting                                  to to that tool i'm just going to                                  quickly answer a question that was                                  supposed to you on twitter you said                                  there are two ways upgrade versus fresh                                  install which do you prefer or had to                                  take most of the time you works and why                                  it really depends on on the project that                                  you're working with this if the site is                                  relatively straightforward it can save                                  you a lot of time do you have all that                                  content moved over and the content types                                  moved over and you                                  have to recreate any of this but the                                  moment you get into more complex                                  projects especially if there are new                                  requirements that kind of like came in                                  as part of that project that's when it                                  then becomes something where we kind of                                  like say okay you know what this might                                  actually be a good case where it would                                  make more sense to start with a with a                                  clean slate and just migrate the content                                  yeah ok I'm going to quickly go through                                  this page then we'll get to the                                  questions again what does that this page                                  is it's under the structure and then                                  migrate fields i'm using the admin menu                                  module for those that wondering what                                  that is this will show you some of the                                  fields that didn't actually make it                                  through during for update and the reason                                  why so we have a date field the                                  five-star rating field and an image                                  thumbnail field that didn't make it                                  across and also also a field list at the                                  bottom here saying it's missing a                                  reference so this is one of the trouble                                  modules the node reference field there's                                  multiple new entity reference fields                                  that you'll have to either migrate to or                                  provide a kind of a transition to but                                  with this one we have these new Drupal                                    contributes we have date a new five-star                                  and field thumb come in here you check                                  them off on the fields and you run the                                  migrate selected fields button and what                                  this will do is actually migrate your                                  old fields up to the new Drupal                                    entities so that will then allow this                                  site to show the five-star ratings and                                  the images again so I'll show you that                                  in sec so if we carry on with the                                  questions yes you mentioned sites using                                  Drupal                                                                  not be ready for                                  did you elaborate on that                                  I'll be honest I'm not an e-commerce                                  expert we have another individual on                                  within their in our office that takes                                  care of that but as far as e-commerce                                  goes and from what I understand is that                                  ubercart is it hasn't progressed as far                                  as the Commerce module and that is the                                  focus in Drupal                                                          lot more development happening for the                                  Commerce module like I mentioned that                                  the Commerce guys quite a whole bunch of                                  funding to develop and to build out that                                  one so that will most likely be the                                  dominant ecommerce tool for Drupal                                       that's a consideration you should have                                  what tips or recommendations would you                                  recommend for dealing with a lot of                                  views template files and upgraded at                                  what point would you                                  maybe not                                  pursue the upgrade path                                  is there a certain number or                                  I wouldn't say there's any magical                                  number a lot of those views template                                  fields to you might just even have a                                  syntax change with with the actual                                  rapper element that can be accomplished                                  a lot of times through things like                                  semantic views and the new view                                           allow you to pick and choose rapper and                                  labels that again is this is a bit of a                                  give-and-take you'd have to take a look                                  and see what was actually done in those                                  views template files as well a lot of                                  times there's actually be custom logic                                  and functionality met which would create                                  even more of a nightmare so there's it's                                  really hard to say kind of if there's a                                  magic number for that so again if                                  there's if there's logic and there is a                                  whole bunch a whole bunch of files and                                  they all have logic definitely something                                  to look into even creating fresh new                                  template files but yeah I can't really                                  give you a magic number on that one I                                  mean going forward properly you                                  definitely want to look at those                                  template files that have been just                                  created in order to make that feel be in                                  a span tag instead of like a div tag or                                  something like that and audited in this                                  way and try to get rid of these template                                  files that don't have any additional                                  logic in because it has become now on                                  the latest version in Drupal                                            to do that right for the UI                                  I thanks for the demo pretty impressive                                  I think you addressed this question like                                  about five minutes ago while we were                                  waiting but let me maybe you can't                                  detail a little bit more you said that                                  in some cases when the site is a bit                                  complicated a big complex as you say                                  then it's best to try my great strategy                                  and operations and you actually my                                  question was about no reference and you                                  addressed that in the sense that now                                  that is the entities reference module                                  and with multi values when you have a                                  mock no reference that is multi-valued                                  and could you detail a little bit how                                  you go about that but you run first and                                  upgrade and then you take care of things                                  that those those connections that were                                  not properly migrated or how how would                                  you go about that in a case like this                                  again drush can probably be a big friend                                  for you because the thing is you're not                                  losing anything in the database the                                  information and the references are all                                  there so if you have something we're                                  really there is where you don't know                                  exactly there is no upgrade path there                                  is nothing documented because it's a                                  very specific case or so through drush                                  you can run your own PHP scripts with                                  the whole with the whole bootstrap so                                  you have everything to you and it's                                  basically just as if you would write                                  your own module so going back to what I                                  mentioned in the beginning the upgrade                                  for Portland State University from                                  Drupal                                                              number of things that we needed to to                                  adjust in this way so what we had was                                  like a about                                                            and lines of code and scripts that what                                  Shay was using for that demo today in                                  order to upgrade these these multi sites                                  and then also run specific upgrades                                  where there was just there was no way to                                  go from like what they had in the old                                  and how it was supposed to work in a new                                  system where you just had to go in and                                  say like okay this new module is saving                                  the data information in this way so what                                  I need to do is get the information from                                  from the old tables and I'm plugging                                  them into the new tables and regarding                                  North reference I think the jury is a                                  little bit out there because there are                                  two modules that are competing in this                                  realm the ones entity reference and the                                  other one is just references i think so                                  that's a little bit it's hard to say                                  which one to go there at the moment yeah                                  there's a third one out there I can't                                  remember what it's called that it does                                  take care of that that gap between six                                  and seven it's kind of a patch module                                  that is out there camera with the name                                  but it does a for this particular one it                                  allows you to upgrade into it and then                                  from there you might be able to easily                                  or use that kind of weird time but may                                  be able to manipulate those references                                  from there to the new entity reference                                  field for example a little easier than                                  it would be for directly coming from six                                  hi I have two questions actually the                                  first one is you mentioned about imce                                  and media module is RIT what was the                                  technical reason for switch into media                                  and Drupal                                                              say was imce there's no problem with                                  that at all actually a lot of guys still                                  use that as far as the the new                                  functionality in seven media module is                                  pretty cool it's really it's it's easy                                  to manage it allows you to organize                                  folders and create thumbnails and it                                  integrates with WYSIWYG so it really is                                  the the new leader and what's going to                                  go forward in file management so I MC                                  still works but again if you're working                                  on file directory to fall browser media                                  module has it actually creates fall                                  entities and it manages on top of that                                  so there's a lot more power with using                                  the media module and you can't import                                  your existing file structures into it so                                  it's a you don't have to and it's as a                                  preference choice but I quite recommend                                  using it and I use it for all all the                                  sites i built going forward okay the                                  other question is is I'm from a large                                  educational institution and it's                                  interesting to hear that you did                                  Portland State University is there any                                  specific advice you'd give because quite                                  a few people at our University of taking                                  the migrate or rebuild scratch what was                                  there anything being in the university                                  situation that you could think of you                                  would add is good advice well specific                                  in this case why we chose the upgrade                                  road was because                                  how they had their content types                                  structured beforehand was really simple                                  relatively simple they didn't use Drupal                                                                                                          upgrade was just an easier step                                  especially when you were thinking about                                  like                                                               project it was only a hundred sixty side                                  by the time we came to the point where                                  we're saying well now we have to run the                                  scripts it was like hundred eighty up to                                                                                                       really again it really depends on do you                                  want to introduce new functionality                                  there is it just about getting it from                                  one platform in the other but it should                                  just do basically the same thing I think                                  that's this is a you have to look at                                  this on a case case by case there is no                                  general rule I would say where you can                                  say this is the this is the border like                                  if your site falls under these criterias                                  you do upgrade if it's if it goes beyond                                  that you should migrate I think this                                  board is like is that so it's large gray                                  zone where you have to really do the the                                  content audit and also the site audit                                  about the features and functionality and                                  definitely if you want to go a step                                  further if you want to go and say like                                  we want to use this opportunity to                                  introduce new features and to introduce                                  a new theme and these kind of things                                  then it's definitely something we're                                  migrating it might be actually the                                  better option                                  whether the time that you would spend on                                  figuring out how to upgrade it you could                                  use that time against building something                                  new but that's somehow make sense                                  so I have two questions as well the                                  first is how many people did you have on                                  your migration project                                  long did it                                  this is it this is the two of us here I                                  get the steer from the Portland State                                  people there in the back row Heights ya                                  know so how long did the like the actual                                  technical migration and Elliott just                                  just nod or shake your head like the the                                  actual part on a code base to run all of                                  these scripts we had them done like in                                  four days a week was that about about                                  right yeah and then after that they                                  still was it was it was necessary to                                  actually go in and check some of the                                  Android content manually and for that we                                  had we had a couple of more people the                                  team was that we additionally NASA to go                                  through these three sides and check a                                  couple of Manuel things regarding tables                                  that for example where in the body field                                  and how they look at and these kind of                                  things that that are really hard to to                                  automate one more quest we can do one                                  more question and I think then sorry was                                  that four days to run the scripts or                                  four days to build the scripts oh no                                  building the scripts are longer yeah how                                  long did that process it's hard to say                                  because there was a lot of there's a                                  couple of features there that actually                                  changed on us so not only did we write                                  it once where we had to write a couple                                  of times one example was that media                                  module they changed their underlying                                  methodology of how they're actually                                  handle files so we had an upgrade path                                  for that our migration path for that and                                  then they decided that not we're not                                  going to do this anymore completely                                  changed it so that was a that was a big                                  headache on our side of things that to                                  move it over so there was quite a few                                  quite a few late nights I'd be                                  hard-pressed to put a number on                                  it to be honest but yeah this one here I                                  put in probably about                                                   was setting up the sights and getting up                                  configured and working all patches and                                  things like that so it and that's not                                  including this morning okay thanks                                  everyone and also things for like all                                  your messages on the back channel there
YouTube URL: https://www.youtube.com/watch?v=5Gfp4tMHVGk


