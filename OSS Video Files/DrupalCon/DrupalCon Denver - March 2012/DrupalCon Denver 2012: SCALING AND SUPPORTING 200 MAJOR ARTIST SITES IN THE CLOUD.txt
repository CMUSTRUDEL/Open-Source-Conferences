Title: DrupalCon Denver 2012: SCALING AND SUPPORTING 200 MAJOR ARTIST SITES IN THE CLOUD
Publication date: 2013-03-28
Playlist: DrupalCon Denver - March 2012
Description: 
	In late 2010, a major media company began exploring the option of consolidating all of their sites to a single hosted web platform. The internal team had been very successful in site deployment, feature development, innovation, integration and customization of business services. The customer reached out to Acquia to see if the media company's Drupal platform could be changed to provide them with the best of both worlds. Despite the success of the existing Drupal platform it faced a number of challenges including: It was targeted to meet site development needs but fell short in operations, maintenance, and marketing team member needs. Scalability issues caused problems with meeting business' service level requirements. This was disruptive to the business internally and externally to artists and their fans. The costs for the platform were fixed Acquia provided a number of services to help migrate, stabilize, optimize, support, and manage the sites. We will present on how we extended managed cloud to support 200 sites. We will explain the improvements we added: DNS database failover Multi-data center high availability Per site APC optimizations Memcache tuning Separated database services including replication to Solr, Syslog, and no-replication strategies Caching strategies using the reverse proxy-cache Varnish, and the Akamai CDN Amazon Web Services to experiment, scale, and stabilize a platform that could handle unpredictable, predictable, and growing web site loads. We load tested this platform using Soasta for 10,000 concurrent authenticated and anonymous users across 120 sites, including four very large traffic sites with 100% authenticated users. Once their instance of managed cloud was stabilized we migrated over 120 media sites and prepared for an additional 80 sites to be added. To help provide the enterprise tools needed by the operations teams and marketing teams we added new features to the Acquia Network and Drupal Gardens. The Acquia network provides a web based user experience for dozens of common Drupal system administration tasks including migrating sites between dev, staging, production.

Questions answered by this session: 
What would it take to host hundreds of music artists?
What are the business drivers for moving to the cloud?
What migration tools, deployment tools are needed to migrate and manage hundreds of sites?
What scaling and performance optimizations where need to host hundreds of sites?
What are the great stories about artists and technologists that lead to this innovative platform?
Captions: 
	                              okay thanks everyone my name is Kiran                               lolim the technical director for                               enterprise sales in aquia I want to tell                               you what I think is one of the most                               exciting stories that I've been involved                               in about migrating Drupal sites worked                               with with a customer that needed a lot                               of Drupal and needed to to move to the                               cloud and work with them over a period                                of time to help them do that I think                                they were they had a combination of                                business challenges that they had to                                address as well as a series of technical                                challenges that they had to address and                                they had to think about scaling and code                                migration and tools that they needed for                                their developers and so one of the                                challenges they had was what would it                                take to move all other artists to one                                platform imagine if you will this photo                                we are the world being done for Haiti                                where all these artists to get got                                together Bieber Celine Dion usher bunch                                of folks in there coming together and                                getting on one platform for one thing to                                deliver their artistic expression and                                help raise money to help people together                                what would it take to build a platform                                for all of them to be able to have their                                websites and get delivered out of the                                cloud well first there'd be a budget                                costs involved thinking about what it                                would take to cost to that out and the                                next question is could you do it could                                you have one platform that could scale                                that big could really get up there well                                before you did that I think you'd want                                to take a few minutes and pull back and                                say if you wanted to do this on Drupal                                what are other large organizations doing                                to address this first and see what's                                going on in the marketplace so what                                we're seeing today is a lot of people                                are migrating away from physical servers                                to cloud services because they don't                                want to manage hardware anymore that I                                want to manage capital costs they want                                to be able to take Drupal which is for                                many people a web content management                                system or web content management                                framework and they want to turn it into                                a product that their customers can use                                that the people who work for their                                organizations can have it in a finished                                form just to do their job another thing                                we see as we see incredibly small Drupal                                sites and incredibly large Drupal sites                                those demand different service levels                                right different organizations need                                different service levels to be able to                                deliver those sites and then there are                                searching for Drupal talent how do they                                get this done what are the parts of                                managing an entire Drupal stack that                                they want to do that they want to be a                                center of excellence and which parts do                                they not want to have a be a center of                                excellence I tell you a little bit of                                story about an organization that kind of                                says there on the slide but that was                                going through a transition one of the                                things they had to do was restructure                                their business as many organizations do                                and they were looking at you know how to                                make things more manageable cost wise                                and so one of the challenges they had is                                they got towards the end of                                             we manage these costs more effectively                                and many organizations today really want                                to be able to align the costs of doing                                business with the operating parts of                                their business not their upfront capital                                parts of their business and so they they                                realigned their costs to be closer to                                operating costs as opposed to pure                                capital costs it's a great picture of                                Metallica great band from near my                                hometown San Francisco and they have                                this great quote called sleep sleep with                                one eye open and I think when you're                                trying to help with a business and I                                think those of you have had to stay up                                in the middle of the night and help keep                                a Drupal site up you know that having                                service levels and being around                                        managing things in the middle of the                                night is something that you have to                                worry about and so like like Metallica                                sleeping with one eye open you have to                                 create a business that's got service                                 levels and has staff that can help and                                 if you get it wrong then it gets really                                 disruptive and I think we've all know                                 what the experience is having Drupal                                 developers working on a site trying to                                 get something done on schedule and then                                 all of a sudden they're pulled off and                                 they go into a firefight for                                          because there's been a spike in traffic                                 or something has gone wrong right and so                                 being able to have a team that's on                                 standby to be able to go fight those                                 fires and deal with those issues is                                 really critical and so in order to do                                 that and have that team available for                                 those fire fire fighting and that kind                                 of support you need to build out some                                 infrastructure so you got to make an                                 investment in your service level                                 infrastructure so                                 you got to first think about what kind                                 of proactive monitoring how do I stop                                 problems and identify problems before                                 they occur how do i resize and have                                 elastic computing resources how do I                                 have more storage more bandwidth more                                 computing resources or memory how do i                                 do run time monitoring so that I know                                 when my systems what's going on at that                                 time how do I have a                                                    team any guesses on how many people it                                 takes to run a                                                         yeah                                                                 will say                                                              then one backup because somebody goes on                                 vacation right pretty heavy investment                                 for running a bunch of websites right                                 and then you also have to be able to                                 diagnose problems across many systems                                 that are involved in Drupal sites you've                                 got a look at the logging infrastructure                                 and log your mem cache and your                                 databases and your web servers so you                                 can go in and look at these more complex                                 debugging situations and look at                                 everything simultaneously so it's a big                                 thing and then you got to go out in the                                 marketplace you going to hire expert                                 Drupal systems ops people which are                                 really hard to come by there's not a lot                                 of them and so it gets really                                 competitive so a pretty hefty investment                                 in meeting service levels for Drupal                                 this is a picture of Lollapalooza and                                 they've just opened the fan gates                                 letting the fans rush the stage                                 migrating if you will from the queue up                                 to the stage to go see their favorite                                 artists when we worked with this                                 customer they had to move a lot of data                                 a lot of fan sites in a similar way from                                 their hardware to the cloud in order to                                 do that there were a lot of things that                                 were involved they had to worry about                                 things like how do I move the code where                                 the past that the code are pointing to                                 how do I move the database over how do I                                 break up the data that's in the database                                 do I bring it over all do I bring the                                 caches do I bring the non stateful data                                 over how do i get assets if I've got                                 media artists and lots of content teens                                 maybe potentially hundreds of content                                 teams that are putting up all kinds of                                 digital assets how do I get that all                                 over to the infrastructure and and have                                 the site still pointing at where those                                 assets are so that when the sites come                                 back up they're not missing pictures and                                 those kinds of things                                 and these were all sorts of the                                 challenges that they had to be able to                                 do so we built some tools to help them                                 do that migration and a lot of it was                                 spent debugging hard-coded paths in                                 their environment that made it less                                 flexible for them to be able to move                                 from one virtual environment to another                                 virtual environment or from their                                 hardware environment to a cloud                                 environment and the reasons you want to                                 be able to do this is in the media                                 business and in the music business you                                 have artists that maybe release an album                                 every two years maybe every three years                                 and there's a huge amount of                                 anticipation when that happens you get                                 floods and whenever you see an artist                                 come out you often hear about they got                                 the number one album with them of the                                 week or the month and getting that buzz                                 and getting the press to cover that you                                 don't get a lot of shots when you launch                                 that album it might be three years for a                                 career artist to put out an album and                                 that day that it goes live you got to                                 sell a lot of albums you got to sell a                                 lot of tickets you've got to sell a lot                                 of merchandise you've got to be ready                                 for those spikes and sometimes you got                                 to move from one cloud provider to                                 another cloud provider you got to move                                 from a private cloud to a public cloud                                 you got to be able to resize really                                 quickly and so to do that you need those                                 tools that I talked about those code                                 tools those asset management tools and                                 those data tools another thing that a                                 lot of people are afraid of in the cloud                                 and we hear this feedback all the time                                 is that they say well we need special                                 hardware we need really big systems                                 because our sites huge and we have                                 massive database that has a lot of data                                 in it but what we found is that using a                                 common systems principle of component                                 izing systems you can actually break up                                 the amount of data you're storing so                                 that you're not required to have is                                 hefty hardware with really intense io                                 operations by breaking the system's up                                 so for example in Drupal you can put                                 everything in MySQL but you can also                                 take some of your dynamic data and put                                 it in memcache and serve the most user                                 data session cookies things like that                                 that you need to get access to from em                                 cash and have a network memcache pool                                 you can take the data that you're                                 logging all of your Drupal activities                                 and instead of logging that into the                                 Drupal database you can log it at the                                 syslog which is much more resource                                 effective than logging in the database                                 you can use a tool like varnish which is                                 a reverse proxy and so you can set the                                 lifetimes                                 custom varnish configuration files that                                 say exactly how long that page can last                                 and then deliver it from virtual memory                                 on Linux rather than generate it with a                                 Drupal bootstrap and pulling it from the                                 database and so you can get huge                                 scalability and we've seen things where                                 and the Aqua Club where we've had over                                                                                                      able to hit those kind of varnish                                 benchmarks and then using a CDN helps a                                 lot because you can take you can put a                                 lot of the assets there it avoids doing                                 bootstraps or invoice page is being                                 delivered from the Apache web servers                                 and last but not least Drupal's native                                 search is not optimized for sites with a                                 lot of data and so pulling search out of                                 Drupal core and put it into something                                 like solar you can break it and so you                                 can see you can break it down and then                                 get get you know more advanced search a                                 better index content be able to deliver                                 faceted search so instead of saying I                                 need really special gigantic hardware                                 that can only be delivered in a data                                 center where I own the machines you can                                 move to the cloud if you're willing to                                 break your data up and deliver it from                                 five or six different services another                                 thing that people talk about is you know                                 tools people be able to have better code                                 management or better tools for                                 developers because Drupal developers are                                 expensive and having to bottleneck on an                                 Operations team that's got a long queue                                 of tasks to do is difficult people want                                 self-service tools so one of the things                                 we did was we worked with them to take                                 their code that was stored centrally                                 largely in a one major product or a few                                 products in an svn repository and take                                 it from being in Drupal to press flow a                                 distribution of Drupal in Drupal                                        had in particular some great performance                                 tweaks that were in Drupal                                          particular those were allowing varnish                                 the reverse proxy to be used and rather                                 than having one as for svn repository                                 for all the products you could give                                 every team their own svn repository so                                 every team could sync up with the main                                 project branch but then they could                                 deploy code in many phases in many                                 branches that they wanted to and that                                 really empowered the team to to be able                                 to do development a lot faster and have                                 a lot more independence so I want to                                 just take a second and show you what                                 some of those tools are like and show                                 you why it was so powerful                                 so for some organizations let me start                                 get this right                                 for some organizations when they have a                                 problem on a website or they have a                                 problem on their staging server they                                 call their developer and they ask their                                 developer to push it to the next branch                                 because really it's the developers in                                 the organization that have command line                                 skills not the content people not the                                 project managers not the designers so                                 you can imagine a situation where your                                 your project manager basically says hey                                 did you fix that bug and the developer                                 says yes I fixed that bug and they say                                 well what branches it on you say hey                                 it's on the master branch you say that's                                 great I'm going to grab the code on the                                 master branch and I'm going to just go                                 ahead and deploy it into my stage and                                 environment totally bypassing the need                                 for somebody to be an expert code                                 command line jockey who understands all                                 the systems in different development                                 environments and then they go and they                                 look at that bug and they say you know                                 what it's not working here and we're                                 still seeing in a production that's a                                 real problem for us we really need to                                 debug what's going on in production and                                 so they can go in here and they can say                                 hey let's copy the content from the                                 production system and so we'll grab the                                 databases to file system in the code and                                 automatically move it from the                                 production system back into the dev                                 environment and it's going and doing                                 that and you can see it's copying files                                 and importing database and giving an                                 update right so now project managers                                 content editors designers are able to                                 use this UI and have a lot more                                 flexibility to book deploy code to                                 different environments and make the                                 changes they need and if they want to go                                 do QA well there's a nice little link                                 right there and they can go and click on                                 that button and the site launches and                                 they can go in immediately do QA and                                 these this design has come from                                 something called continuous integration                                 and the                                                             integration or the nine principles of                                 software deployment making it easy for                                 people to be able to do this stuff                                 without again having to be command-line                                 experts we've got other tools in here                                 that help that help people to do it note                                 I want to show them all but if you're                                 interested you can swing by the Aqua                                 booth and get a look at some of those                                 tools                                 so you have some really incredibly                                 famous artists and hypothetically we've                                 seen you know in the past artists can                                 get a huge amount of traffic on a given                                 day maybe they're doing ticket sales                                 maybe they get on Twitter and they                                 encourage their fans to come and talk                                 about a popular event or to come talk                                 about you know something in the gossip                                 magazines or something like that and                                 have a discussion and so different                                 artists can get a huge amount of traffic                                 and so you know here's an example of an                                 artist that you know could go on TV                                 could have a show can get on social                                 media and you have to be prepared to be                                 able to scale and so what we've talked                                 about so far as we talked about the                                 business rules and the business needs                                 which were moving your capital costs to                                 moving your capital costs to operating                                 costs moving to be able to support                                 different service levels we talked a                                 little bit about the migration of code                                 and content and I showed different tools                                 that the teams needed to be able to do                                 those kinds of migrations and manage                                 their code and then you have to deal                                 with scalability and scalability you                                 know Drupal is pretty scalable out of                                 the box and even add a lot of systems                                 you can really scale in a really great                                 way but sometimes you need an expert and                                 Anaka we have some really great experts                                 in particular guy named Eric web but                                 among many on our team and Eric travels                                 around the country to meet with                                 customers and so back in late                                          early                                                                   customer and they were actually my boss                                 got a phone call from the customer and                                 they said hey we want to come out and                                 talk to you about what can we do to                                 basically do some optimization can we                                 run Drupal a little bit better you know                                 we're so busy delivering artist sites                                 all the time we don't get a chance to go                                 back and really reflect and do all the                                 optimization that we want can you come                                 help us so I met with them at their                                 office and rockefeller plaza in new york                                 and then meet left that meeting had a                                 great meeting you know was able to                                 encourage them that drupal could work                                 better and that there was a there was a                                 way to be able to get better service                                 levels and operating costs that they                                 wanted and so I flew back and flew to                                 Los Angeles and met with her team in LA                                 and went and spent a day on site and                                 really sat down and got the team to give                                 me a bit of a brain dump on what their                                 systems were i took a lot of notes and                                 was able to write a report and give it                                 to my colleague and so my colleague Eric                                 was able then to come we were scheduling                                 him and he was able to come and spend                                 all the weeks on site and he went                                 through and he did a lot of analysis to                                 be able to take a look at and see you                                 know what kind of systems tune you know                                 what kind of performance and so he wrote                                 a report and gave it to the team about                                 all the different things that they could                                 do to improve and as part of that                                 assessment also was a consideration of                                 could we move off the existing hardware                                 infrastructure to a cloud solution was                                 that viable would they be able to get                                 the kinds of things in the performance                                 improvements that they wanted and so                                 they were and so after we did that proud                                 of performance tuning recommendations we                                 had to take into consideration something                                 else does anybody know what this is                                 there you go spinal tap right in the                                 music business the big artists their                                 speakers go to                                                      you're talking to somebody in the music                                 industry they know that they might have                                 the biggest hottest band and the biggest                                 hottest launch at any time and so their                                 sites have to go to                                                    partnered with a company called sosta                                 that basically would go in and do load                                 testing to                                                          dozens of low tests to try to get the                                 Aqua platform up for them and to be able                                 to support their artists and somewhere                                 close to you know a couple hundred                                 artists dozens and dozens of artists and                                 then be able to have sites where a                                 certain amount of the traffic                                 significant amount of the traffic were                                 authenticated some were uncashed and                                 some were anonymous and so we would go                                 through that and we would tune and tune                                 the platform constantly finding things                                 and and that was really useful to be                                 getting ready because you know with                                 Drupal a lot of the sites are custom the                                 modules are constantly getting updated                                 and the traffic patterns can be                                 different and you never really know for                                 sure until you do a really solid load                                 test whether you can scale to hit that                                 those kinds of numbers so to help with                                 that we have an Operations team and                                 here's a couple of guys a man who's one                                 of the leads of on our operations team                                 in our office in Burlington and so you                                 can see that he's got I think four                                 different screens here where he's                                 watching the different systems and being                                 able to monitor that and we had a guy on                                 our team an operation sea of guy named                                 Chris rudder who's a really amazing sis                                 ops guy who just poured his heart in his                                 soul and just was a real hero through                                 this project where he just worked on it                                 you know with everything he's got tune                                 tuner systems at an amazing level and                                 constantly found problems made                                 recommendations tuned it and hit some                                 pretty tough deadlines because you know                                 in a hit hit driven business                                 you know things are often on demand you                                 got to hit these tough deadlines there's                                 a lot of scheduling that's going on and                                 you got to be ready to go and so I want                                 to geek out for a little bit and I want                                 to talk about some some of the issues                                 that we ran into now some of you will                                 want to take notes on this and you want                                 to write down these specific                                 optimizations and sometimes maybe                                 they're generic for you other times                                 they're only appropriate at really high                                 levels of scale that we were starting to                                 see so we tune the PHP and we made a                                 series of recommendations previously but                                 one of the things we found out and one                                 of these you may find is that if you                                 have a lot of modules that you want to                                 you want to compress the code and you                                 want to pre compile it using an opcode                                 cash and so the opcode cash that we used                                 is a PC and an APC what we found was                                 that we were setting the default amount                                 for everybody on our platform of the                                 same amount of memory and it turns out                                 that that wasn't enough memory to do the                                 proper opcode caching particularly for                                 some of the larger sites so what we did                                 is we made it so that each individual                                 customer and each individual site could                                 go in and tune their own op coach opcode                                 cash and allocate a certain amount of                                 memory and so for this customer we had a                                 really large amount of memory made                                 available to a PC we also found that you                                 know they were very focused on Io and                                 how important it was to have a really                                 fast network system to be able to read I                                 oh but it turns out that when PHP reads                                 code off the file system it can read on                                 every page pull and every time it reads                                 a code or you can set a cache about how                                 fast and how frequently it reads and                                 just by tuning that cash you can                                 effectively replace really expensive                                 hardware that's been optimized to                                 deliver code really fast just by tuning                                 the cache correctly and so we were able                                 to find that that really helped with PHP                                 scaling at the database level we looked                                 at the right buffer and so one of the                                 things that's happening is when you've                                 got highly available databases you're                                 doing replication and every transaction                                 that's happening in a database like nodb                                 as part of MySQL you're you're                                 effectively writing out to the right                                 buffer and so you can make a decision do                                 I want to write on every transaction to                                 disk or do I want to take a risk and put                                 some of those in memory and hope that my                                 server doesn't go down and I think for                                 this customer appropriately so we wanted                                 to write to disk on everyone but tuning                                 that right but for helped and then we                                 also looked at the replication binlog                                 and in mysql you've got a binary log                                 that's effectively writing every                                 transaction and there's been replicated                                 across to the failover server and so                                 looking at the                                 speed and the tuning of that and trying                                 to reduce the amount of data that's                                 being written to that big log can really                                 help in the performance one of the other                                 things that we did is we turned off the                                 access log and pointed it at syslog so                                 every time somebody did something in                                 Drupal instead of writing it to the                                 database we pointed to the act to syslog                                 and then the other thing that we needed                                 to do is this business was really                                 critical they had a you know you can't                                 can't have an artist that hits that one                                 magic moment in a couple of years and                                 then just because the data center goes                                 down the websites off that's just not                                 possible it's not acceptable in those                                 businesses and so the kinds of thing you                                 have to do is set up global replication                                 and so in this case we did a series of                                 things where we had different databases                                 we put one database in one data center                                 at amazon and another database in                                 another datacenter amazon so if somebody                                 drove a truck into the power pole                                 outside of that data center or there was                                 a failure in that data center the data                                 one of the database active databases                                 would be up but even that wasn't enough                                 really had to go the next level and so                                 what we did was introduced Akamai global                                 traffic redirector so you effectively                                 had high availability across multiple                                 data centers in the same region but then                                 globally we were either on the east                                 coast to the west coast or over in                                 Ireland and were able to failover                                 because we were going through the Akamai                                 global traffic redirector to a whole                                 other cluster setup in a whole other                                 data center in the event that it went                                 down and those are the kinds of services                                 that a business that has to be up                                 unconditionally needs so that kind of                                 disaster recovery and we introduced a                                 technology called tungsten which was a                                 drop-in replacement for mysql native                                 replication that enabled us to do that                                 for caching a lot of people ask about                                 how to cash and sometimes when you have                                 you know these sudden bursts of traffic                                 a lot of times that people aren't                                 offended they're just they're getting                                 static pages and so there's a there's a                                 couple things you can do with akamai you                                 could go and store all of your pages in                                 Drupal and deliver all your static pages                                 in Drupal sometimes you want a different                                 profile and so what you do is you store                                 your assets in Akamai your media assets                                 your JavaScript your CSS all your images                                 all your video your videos but then the                                 XHTML that Drupal is generating you                                 store in varnish okay and so in this                                 case we basically found that right mix                                 of XHTML serve from large varnish                                 servers                                 and then Akamai for all the assets now                                 getting each of the content teams as                                 they're going and configuring their                                 Drupal site to know how to use the                                 Akamai out of the box is a pretty pretty                                 daunting challenge so one of the things                                 we did is we scripted it so that any                                 time we ruled out a site on their                                 platform caching and integration with                                 akamai automatically worked and so they                                 automatically got that benefit of                                 scalability out of the box and so that                                 was a huge help in helping them to scale                                 that every sake at scale and that was                                 consistent with what people needed in                                 the business so this is nirvana one of                                 my favorite bands and the thing I love                                 about nirvana is that Nirvana was                                 alternative rock you know they were it                                 came in at a time where it was really                                 about how tight your spandex was how                                 frizzy your hair was you know how much                                 swain on the microphone you could do and                                 Nirvana came in with his totally                                 different alternative approach to rock                                 and roll and shook up the music scene                                 and I think what was special is that                                 they're very similar to open source in                                 that way they're kind of this grungy                                 alternative different way of rock and                                 roll that's not as polished and stuff                                 like that but that wasn't enough what                                 they also had to do was do some of the                                 things that made the business work and I                                 think what we've seen here is that you                                 know Nirvana and their alternative music                                 was like open source but they also                                 needed to get their business right and                                 and in order to meet those demands they                                 needed a technical solution I've been in                                 the Drupal community for eight years and                                 I think for a long time ago we would sit                                 back and we thought open source is going                                 to take over the world we thought if we                                 wrote great code and put it out there                                 that everybody would just see the wisdom                                 of open source and they would move                                 automatically and maybe people in                                 alternative music thought that they were                                 Greek creating music and everybody would                                 just do alternative music but it wasn't                                 enough right and so now with things like                                 cloud solutions were actually able to                                 put open source in the cloud in an open                                 cloud and be able to                                 be able to deliver both the innovation                                 of the code but the business levels in                                 the service levels and that's what I                                 love about this picture is it's nirvana                                 alternative rock band wearing suits and                                 getting it right and they fundamentally                                 change the market of music where that                                 was a whole new genre and the market                                 shifted over to them and I think that's                                 where we're at the crux right now is                                 we're partway between moving open source                                 to the mainstream where the market is                                 basically said we recognize and                                 acknowledge open source in the way that                                 the market acknowledged the role of the                                 role of open source so I want to talk a                                 little bit about what we've seen here                                 you start off with Drupal and you're                                 doing internal hosting and then you say                                 hey can you take care of it give me the                                 service levels get my operating costs                                 under control deliver it and so you move                                 to this platform as a service but that's                                 not the whole vision right that's only                                 part of the vision and you have                                 revolutionary customers we're visionary                                 who really understand how far they can                                 go with open source can they get all the                                 features they want can they get the rate                                 of innovation can they participate in an                                 active community but then have every                                 feature that they want all together and                                 so we've got and we've been really lucky                                 to have a great partner who's been able                                 to build out a product with us called                                 enterprise gardens an enterprise gardens                                 is all the wonders of Drupal in the                                 cloud with the business and the service                                 levels but a fixed set of features that                                 their content editors their designers                                 their teams can basically work integrate                                 build and launch hundreds and hundreds                                 of sites and deliver that vision of                                 unifying all artists on a single                                 platform and I think this is something                                 that you know when you look at the                                 marketplace going forward people are                                 looking for great sass solutions that                                 work but they want the freedom to be                                 able to press the eject button and take                                 it outside and go innovate somewhere                                 else if they need to and I think this is                                 the kinds of things that you should be                                 looking at so we've got internal hosting                                 Acquia cloud Drupal gardens and what I'd                                 encourage you to do is to come see some                                 of the amazing stuff that's going to                                 happen tomorrow at                                                   over here on the day stage we're going                                 to have some of the people who were                                 involved in the site in the building of                                 the platform and launching a lot of                                 sites be able to do that and they're                                 going to showcase some cool stuff                                 there's bands like kitten and they're                                 basically building in mobile integration                                 and you saw at reeces keynote and                                 they're coming together and being able                                 to deliver that and so you'll see some                                 of those demos and be able to check it                                 out and see that and ask them questions                                 about the platform they've built and the                                 limitations and what kinds of site                                 they've done in their going to continue                                 to do development and the best thing I                                 think and what the most amazing thing                                 about this company is not only do they                                 love and get the innovation of open                                 source and not in the cloud but they                                 chose to share it with everybody so that                                 if you have a garden site as many of                                 those features that they're developing                                 are going to be shared back because                                 they've funded it because they                                 understand that making that code                                 available to people is really the right                                 thing to do and to really be                                 collaborative in a way that that you                                 know we've seen great work come out of                                 when artists collaborate if you want to                                 see some more details there's a great                                 diagram and you can see you know sort of                                 desktop and mobile apps and social                                 authentication with janrain be able to                                 plug in and then have a series of                                 templates that are built out and we can                                 have templated sites that go out in                                 certain ways and have all kinds of                                 business reporting and analytics and you                                 can plug-in API is if you need external                                 systems because these sites are never                                 really just rupal there Jubal is just                                 one part of that they've got dozens of                                 business systems that need to integrate                                 pull data input data out and be able to                                 plug into all that kind of stuff and so                                 that's really key and then you know                                 what's key is that they're on a                                 fundamental platform that they can scale                                 up and they can roll out lots of sites                                 so come and learn more about that                                 tomorrow so I want to thank everybody                                 for you know attending today I really                                 think this is some of the most exciting                                 work moving to the cloud getting the                                 right business model around Drupal has                                 been really incredible it's been an                                 exciting project to see and I hope                                 you're able to check out enterprise                                 gardens and come see some of the                                 visionary thinking behind where they're                                 going in the next phase hopefully in                                 Drupal con Munich will be able to have a                                 full presentation or the next drupalcon                                 site you'll be able to see a full                                 presentation exactly what they want to                                 do but you'll get a great preview                                 tomorrow if you like user experience and                                 you like some of the things that we've                                 done around gardens and trying to make                                 it better it usable people make it                                 usable and Drupal usable for people so                                 that you know people who just want that                                 point and click experience for building                                 sites we're doing a bunch of user                                 experience testing dar mesh and Lisa Rex                                 from art from the Aqua team are working                                 on                                 usability testing as well as some of the                                 engineering of the products and so                                 they're doing that so you can contact                                 them here and they're going to do over a                                 hundred usability tests when they're                                 here so thank you very much I really                                 appreciate it thank you Steve I started                                 first started doing the research story                                 around this story when when Steve Jobs                                 passed away and i think you know he's                                 kind of one of those visionary                                 revolutionary leaders who made it                                 technology easier for all of us to use                                 and i think there's a lot of inspiration                                 there from all of us about you know what                                 we can do and where we can go if we have                                 really you know put our minds in our                                 innovation our passion towards it so                                 i'll take some questions now and be                                 happy to hear from anybody who's worked                                 on the project as well                                 hey Karen thanks Elise on thank you it's                                 a cool presentation I just want to give                                 a shout out to some of the people that                                 worked on this project yeah Tim Holtz                                 for my team is one of the unsung heroes                                 at Warner Music this was arguably one of                                 the most difficult projects in all of                                 the company in the year                                             killed it and then I completely echoed                                 the sentiment about Chris rudder from                                 aquia an amazing guy shout out to Chris                                 if you're here and anyway thank you guys                                 for all your work thanks Tim you wanna                                 raise your hand awesome take and ripple                                 the new levels cool so i was wondering                                 for a surprise hit situation like you                                 see kind of internet spikes these days                                 hmm is is there a possibility of like a                                 and just basically an insurance service                                 or something like that if you were to                                 run into like like an on-demand if you                                 will yeah for a hip yeah well i think i                                 think there's things that you can do i                                 don't think there's a magic silver                                 bullet i think that you can set up a                                 service you go to a right scale or right                                 Simone ruby scripts that would just                                 start deploying servers automatically I                                 can pretty much guarantee you that if                                 you did that you would figure out really                                 really quickly that the reason you had a                                 gigantic hosting bill is because you                                 have a bug in the Drupal application                                 layer right somebody pushed out a query                                 you know we've seen instances where we                                 had a customer recently was the first                                 person to post a picture of Snooki                                 without her makeup on right boom got                                 linked from the front page of yahoo and                                 boom that site goes down so is the                                 answer to add more hardware or is the                                 answer to get somebody who really                                 understands views queries to go in make                                 sure that queries cash rewrite that                                 query on the fly and be able to do it so                                 I think when you build infrastructure                                 like I showed in the scaling where you                                 say we've got cloud elastic resources in                                 the database we segment the services we                                 fine-tune everything so we get as much                                 scalability we use Akamai we use big                                 varnish servers we have failover data                                 centers you're doing a really good job                                 of preparing for that but it's really                                 the people who were there on call                                                                                                          attack right am I did we just push out                                 code are we seeing patterns of traffic                                 come                                 away because ashton couch or some                                 artists you know posted something on                                 Twitter and all of a sudden we're                                 hitting some part of the site that's                                 never seen a surge of traffic like that                                 because they directly linked to it so I                                 think you know it's a combination of                                 magic cool technology but at the end of                                 the day it's really people and the                                 business you know you can't                                 underestimate the importance of the                                 business having a real gut-check of                                 saying we want to be this big we need to                                 be able to deal with this and then                                 preparing and financing it one cool                                 thing that we're doing with with aqua on                                 this is they actually have the authority                                 to add up to five times the current                                 servers that we have an Amazon without                                 even asking us so in our in our                                 relationship if there's a spike they can                                 just do it and tell us later and the                                 cool thing about Amazon is it be on                                 demand instances so it's can be up for                                                                                                      they're auto scaling for us as part of                                 our agreement cool not sure how much                                 that might picked up but just to repeat                                 what what was said was that in this                                 relationship we've got the ability to                                 allocate as much as five times extra                                 Hardware on demand as part of the                                 contract so that we can do it and then                                 get back to them and amazon has you know                                 the capacity to be able to do that good                                 so for something like the Acquia                                 continuous integration thing that you                                 were showing up there earlier and I                                 actually have two questions this is                                 first one sure could we mix and match                                 something where we are using we're using                                 like an AWS type of setup can we mix and                                 match and use that continuous                                 integration on top of that yeah and                                 second second this is kind of unrelated                                 what would you say is the most gives the                                 most impact to a high-traffic Drupal                                 site out of everything memcache or                                 reverse proxy whatever else so you know                                 I think I think part of the answer is it                                 depends as always so the first let me                                 let me address the first one and if you                                 haven't got a trial of aqua a library                                 you can go in here and you can type in                                 continuous integration and we're                                 starting to see some customers do this I                                 basically what they're doing is they're                                 using our Devon staging environments in                                 the cloud but then                                 tying into their production environments                                 in the back end because for some                                 business reason or whatever they want to                                 be able to do that they want to use                                 these tools and so I've written up a                                 story here about how to do it in some rd                                 that we were doing with a customer and                                 basically it comes down to three things                                 first you're moving your drupal site                                 it's the code it's the database it's the                                 files and you isolate that in the cloud                                 environment and you make sure that you                                 can migrate between those environments                                 we've added something to the cloud                                 called cloud hooks and so at the end of                                 any of those you I actions that you see                                 you can have a cloud hook that copies                                 from our production environment launches                                 a perl script launches a bash script                                 launches a certain outer perl PHP or a                                 bash script maybe a ruby script and then                                 sends it to that remote production                                 environment ok that's one thing the                                  second thing is that there's always                                  environment variables that are different                                  between Drupal sites and your dev you                                  want HTTP off and your staging you want                                  HTTP off in your production you don't so                                  you have a file that's located in the                                  same place in the file system and your                                  settings dot PHP file you basically                                  point to that file which has environment                                  specific variables that have things like                                  in Devon staging don't only use a read                                  solar index but in production use the                                  real live and write to that index so                                  those kinds of environments then last                                  but not least you've got to be able to                                  get your data from your production                                  environment all the way over here so now                                  when you go when you say I want to grab                                  code from the production environment and                                  aqua cloud it launches the script talks                                  to your production server in a staging                                  environment so it's pull give me a copy                                  of the database scrub all the data out                                  of it pull it in SSH and ship it back in                                  and be able to do that so three ways to                                  do that about two integrated if you're                                  interested in doing that we're piloting                                  with some customers be happy to work                                  with you to have a professional service                                  engagement to do that or you could you                                  could give it a shot on your own and                                  tell us how it works out the second                                  question was what's better reverse proxy                                  or memcache and I mean sir I think for                                  anonymous page delivery there's nothing                                  that's nothing is as impactful as as                                  varnish it's a reverse proxy being able                                  to just basically say I mean I think                                  it's too i think as a bunch of things                                  that varnish can do for you one you can                                  jason say hey we can deliver                                              a second anonymous pages will never even                                  hit the drupal will never even hit the                                  work web server that's immensely useful                                  the second thing is is in varnished                                    and some parts of varnish to you can do                                  things like have something called grace                                  and st. mode                                  which basically will handle errors                                  correctly if you're getting errors from                                  the back end so if there's a timeout on                                  the database it'll continue deliver a                                  page or you can say if you can't reach                                  the back entered at all under the                                  following rules continue to deliver                                  scale content until the site comes back                                  up so I think from a high availability                                  and a scalability for initial skin is                                  the Wonder kid but things like you know                                  a lot of people on our support team                                  really like recommending memcache and                                  all ways to use it for certain things                                  because it's just a it's it's just more                                  effective than just going all the way to                                  the database and getting it so you know                                  certain tables and we could talk about                                  which ones it's appropriate to just                                  always almost always put them in                                  memcache does that answer your question                                  cool any other questions that i can                                  answer okay let me go talk a little bit                                  more about tungsten i can try so                                  tungsten is a it's like a distribution                                  of the mysql replication and it's got a                                  couple of features Chris do you rember                                  exactly what the features are the                                  tungsten has that make it allow us to do                                  global replication
YouTube URL: https://www.youtube.com/watch?v=bxubCySbTzw


