Title: DrupalCon Denver 2012: THE ALICE IN WONDERLAND WORLD OF FIELDS AND ENTITIES
Publication date: 2013-03-28
Playlist: DrupalCon Denver - March 2012
Description: 
	Drupal 7 is a topsy turvy place where everything you thought you knew about content types and fields goes out the window. Enter the Mad Hatter's world where anything can be an entity and fields can go everywhere. Already the floodgates are opening as developers and users find new ways to take advantage of all the possibilities: Field Collection, Entity Reference, and Entity Construction Kit are brand new concepts. Bean has re-invented blocks as entities. Media has re-invented files as entities. Organic Groups has been re-written to make groups entities. Drupal Commerce makes commerce transactions into entities. The new Entity Translation module treats groups of translated fields as entities. And D7 is just getting out of the gate. This session will look at some of the new entity and field modules, and some older modules that have been re-invented for D7. We'll talk about how they work and where they could be useful and what they get from using the new entity framework. We'll also discuss some of the questions they raise, like when you might want to create a new entity rather than a content type. We will discuss:
A little $entity, history
Fields that relate fields
Fields that relate entities
Fields that ARE entities
Entities that relate entities
Entity utility modules
Field utility modules
Don't forget properties!
Everything is a Node, Take 2

Questions answered by this session: 
How do the new entities work?
When do you need an entity rather than a content type?
What's different about fields in D7?
What are some of the most interesting modules that take advantage of the new field and entity APIs?
See some of the possibilities of the new Field and Entity system.
Captions: 
	                              well good morning everybody feeling like                               all charged up here I anybody have a do                               a little partying last night saw a few                               people out there looked pretty relaxed                               thinking that we're going to talk about                               the Alice in Wonderland world of fields                               and entities today and I was thinking                               that a couple more drinks might be                               really nice about now because this is a                                really greasy subject but we're going to                                have to deal with it without that I                                wanted the best analogy I could come up                                with for the what's going on in Drupal                                  in fields and entities was the story of                                Alice in Wonderland right this is the                                story where Alice jumps into this world                                where nothing is normal everything's                                crazy anything anything is possible and                                that's kind of where we've gone so                                little background about me for those of                                you who don't know me I'm Karen                                Stevenson I'm maintainer cck and Dayton                                calendar and some other modules I was a                                member of the team that got fields into                                core we had a lot of sprints and did a                                lot of work to make that happen and I'm                                a logo bot and if you know anything                                about Lola bot you know we're pretty                                passionate about what we do whether that                                is making having parties or writing code                                or creating modules so here we are                                before we get into this I want to tell                                you that I'm going to talk about a lot                                of modules a lot of projects not all of                                them are recommended not all of them are                                production ready don't don't say just                                because you saw this module in here that                                I should go slap it on my production                                site don't come and talk to me if things                                blow up but there are some crazy and                                really interesting things going on and I                                thought it was worth sort of exploring                                the universe of the fields that are the                                modules that are out there and some of                                the things that they're doing so let's                                let's go ahead and dive right into this                                topsy-turvy crazy                                upside down aliceinwonderland world of                                fields and entities in Drupal                                         going to start with what I call                                everything is a node take one if you've                                been around Drupal for any length of                                time you've heard the everything as a                                note right we've been we've been doing                                the everything is a node mantra in the                                very beginning which is not all the way                                back but back a little ways there was a                                story module so if we go into Drupal                                    we had Interpol core the page module in                                the story module and that with there                                were two bit modules and they did very                                specific things there was a module that                                created a page content type and had a                                title and it had text field and then                                there was another module and it was the                                module that created the story content                                type and it had a title indicate a text                                field and if you wanted some other                                fields or you wanted some other content                                types go write some code and in fact the                                instructions were take the story module                                copy it change every place where it says                                story and give it and change it to the                                name of whatever it is you want it to be                                and that's how you that's how you do it                                so in Drupal                                                          module in the story module and then we                                had an interesting experiment called                                flexi node and this was John Bob started                                this and this was kind of going down the                                path of saying wouldn't it be nice if we                                could let people create their own fields                                you know have some flexibility in the                                way that they create fields so he kind                                of did it as an experiment and and just                                he threw some some ideas out there and                                put some code out there and it just took                                off he really had no idea was going to                                be as popular as it turned out to be and                                in fact it turned out that it wasn't                                written in a way that it's scaled or                                anything else I mean he really wasn't                                expecting it to go where it went and so                                he and some other guys kind of went into                                a room one of the drupal cons around                                that time and they said all right looks                                like this is something people want let's                                figure out how to do it right and they                                kind of put their heads together and                                 came up with a whole new idea in Drupal                                                                                                      page module in the story module but now                                 we have content construction kit                                 and the content construction kit did two                                 things it allowed you to create custom                                 content types and allows you to create                                 custom fields and you could do the whole                                 thing in the UI and have to write any                                 code to do this you could you had a nice                                 UI well a UI I won't go that far but a                                 UI and you could create custom constant                                 to any number of custom content types                                 and you can create any number of custom                                 fields well this is pretty darn exciting                                 and so pretty soon we're saying hey you                                 know this this really opens up all kinds                                 of possibilities you know maybe nodes                                 now are really powerful because notes                                 were the things that you could do all                                 these things so you can create all these                                 new node types and you can create all                                 these new fields on notes and then we                                 started all these discussions about                                 maybe everything should be a note maybe                                 and we'd like to have some fields on                                 users and we'd like to have fields on                                 comments maybe everything should be a                                 note maybe that's the answer so now we                                 go into Drupal five and six and we                                 started saying okay well this content                                 construction kit is is pretty useful we                                 should get some of this stuff into core                                 and we wanted to be able to get custom                                 fields into core we didn't quite make it                                 but we did get custom content types into                                 core and bye bye Paige module and story                                 module and now in core instead of                                 creating our having two modules that did                                 one specific thing the page module in                                 the story module core has the code that                                 creates custom content types and it                                 provided to custom content types out of                                 the box the page module are the page                                 content type in the story content type                                 so cck is still the place where the                                 custom fields are we didn't we didn't                                 get that into core for Drupal                                            didn't get that into core for Drupal                                   so more talk talk talk talk talk talk we                                 did lots of talking and you know                                 everybody said you know it's not                                 necessarily that everything needs to be                                 a note but you know everything should                                 have fields it would be really really                                 nice if we could be fields on anything                                 we should be able to put fields on users                                 we should be able to put fields on                                 comments let's put fields on everything                                 and let's put it in the car so in Drupal                                                                                                         types now we've got custom fields and CC                                 k bye bye done with you the only thing                                 we really need CC k for in drupal                                      to migrate the old d                                                    apple                                                                    in the process of trying to figure out                                 how we're going to put fields on                                 anything that actually that was sort of                                 thrown out why don't we put fields on                                 anything we were going to put fields in                                 core but then this idea of saying fields                                 in core on anything kind of came out of                                 that whole process we said well yeah we                                 should do that and then we started                                 looking at it and you know the way that                                 nodes and users work in Drupal                                          the same and they don't look the same                                 they don't have the same hooks they                                 don't behave the same way and it turned                                 out to be a little bit complicated to                                 figure out how are you going to get                                 fields on users and notes and we said                                 you know the way things really are now                                 we're going to end up writing a whole                                 bunch of crazy custom code to make this                                 work on every possible type of entity                                 what we really need is we need a layer                                 over the top of things that's consistent                                 and that we can rely on and then we're                                 going to attach fields in a consistent                                 way to something and initially there are                                 objects and then somewhere along the                                 line that the word got changed to                                 entities but basically the idea was kind                                 of a global name for for things to which                                 you could attach fields so a node is an                                 entity and a user is an entity and so                                 let's talk about what is an entity you                                 know only the cheshire cat knows I've                                 heard that question quite a bit at this                                 conference what the heck is an entity I                                 don't know that I'm going to answer the                                 question I'm going to tell you about                                 entities and hopefully at the end you'll                                 sort of get the idea so we had all kinds                                 of discussions about the fact that we                                 needed standardization we need a                                 consistent standardized way to deal with                                 the things that we are going to attach                                 fields who so we had all kinds of issues                                 about this there are some some                                 components to entity                                 and a lot of these are the things that                                 we see in nodes but there are things                                 that potentially might be in other types                                 of entities they have a key so a note                                 has an N idea and a user has a UID in a                                 term as a tid they've got some sort of a                                 label a node has a title and a user has                                 a name they have a base table they                                 actually don't have to be stored in the                                 database although I all the core ones                                 and I think all the contraband in the                                 database but if they're going to store                                 their data in the database they have to                                 they have to communicate what what is                                 the table where they're storing their                                 data they may have properties and                                 properties are not fields properties are                                 things that are very hard coded specific                                 to that so in the case of a node a                                 property would be something like the                                 status field or the author field in the                                 case of a user be something like the                                 email field and the properties are                                 actually stored in the base table and                                 then they have the possibility of having                                 field integration now we create                                 identities so that we could attach                                 fields but in fact entities don't have                                 to have fields entities can say I am                                 feel double or I'm not feel double but                                 if an entity is feel double then then                                 then you can attach fields to it we                                 realized that we have to have some                                 concept of what caching is so the entity                                 has to be able to say you know can I be                                 cached an entity might have the concept                                 of bundles so content nodes have content                                 types so content has bundles users don't                                 use bundles they don't have to use                                 bundles they might use bundles entities                                 might have revisions and again nodes                                 have revisions users don't have                                 revisions and then we have to have some                                 consistent ways that we can say where is                                 this thing located what's the path to it                                 how do you load it how do you view it                                 and how do you get to the edit form so                                 we had to have a way that we could                                 declare what are the callbacks what are                                 the functions that are going to take                                 care of these things and then we might                                 have view modes nodes have like a teaser                                 view mode and a fall view mode and other                                 kinds of entities might have their own                                 kinds of view modes and we might have                                 translation                                 so that's the stuff that goes into                                 entities we got a whole bunch of new                                 api's now we we knew it all along we                                 were going to have a field API that was                                 the whole point of the work that was                                 being done we picked up an entity API                                 that was new that was not initially                                 something that we were going to do and                                 for those of you who are not developers                                 or not coders and you say what the heck                                 is an API yeah if you want to visualize                                 that you've got a shiny new car and you                                 want to drive that car you got to have                                 some keys you know without the keys you                                 can't drive the car so an epi is just                                 the keys that go with it so that so that                                 people can use these things and then we                                 there was something else that came out                                 in this was kind of late in the cycle                                 and this energy field query what                                 happened was now we've got data in all                                 these new different places and it became                                 a little confusing to figure out how are                                 you going to retrieve all this data and                                 so this entity field query is a new API                                 in core that you can use to retrieve the                                 value of a specific field and it will do                                 things like it's smart about what                                 language should should it retrieve what                                 value whereas the floors the field                                 stored all those kinds of things a lot                                 of the things that we needed to do to be                                 able to use entities in a consistent way                                 didn't quite make it into core and so                                 there is a contributor dapi and that                                 module actually that module actually is                                 being used by an awful lot of the                                 controls that are doing anything with                                 entity so if you don't if you're not a                                 developer you're probably not going to                                 do anything with that module directly                                 but you're almost certainly going to                                 find that it's required for a lot of the                                 things that you want to do so we ended                                 up here we ended up with some entities                                 that made it in a core we got an entity                                 node user term comment all of those were                                 things that existed in core but now they                                 are quote entities and as entities they                                 are feel double which means you can now                                 put fields on all those things there are                                 some other kinds of entities that either                                 didn't make it into core didn't belong                                 in core and so for instance the idea of                                 a file                                 is an entity did not make it into core                                 but there's a module that does that                                 blocks is entity we had a big discussion                                 about trying to get that into core                                 didn't make it into core but there there                                 is contributes to do that profiles this                                 entities user profiles didn't make it                                 into core but there's there's                                 contributes that deal with it and group                                 like organic group is another example of                                 a contributed entity so one of the                                 questions is you know why why do we care                                 about entities what what the heck                                 difference does it make well the thing                                 is that this entity system that we have                                 created makes it really really easy to                                 manipulate manage data so we can use the                                 entity API to handle all the stuff that                                 goes along with the base table how do                                 you store it how do you retrieve values                                 how do you load values the field API                                 does all the same thing for the fields                                 there's Adam attic integration with                                 views and a whole lot of other modules                                 that come with it and so what happens is                                 potentially this idea of creating custom                                 entities is potentially useful for any                                 module that needs to store data                                 basically we have a lot of modules that                                 had their own ways of storing data they                                 weren't a part of the field system they                                 weren't nodes but if you use the entity                                 in the field API now these modules can                                 take advantage of all that and they can                                 have a whole lot of work already taken                                 care of and they just have to layer on                                 top of that the you know their special                                 sauce and in particular if you have data                                 of your own and you want to allow users                                 to dynamically add additional                                 information to that you know this is                                 particularly interesting because the nad                                 API then allows you to create field of                                 all entities so here we are we're in                                 this Mad Hatter's world we got new api's                                 we have new entities we have new fields                                 we have fields on anything you can put                                 terms on terms you can entities that do                                 things with other entities and it needs                                 to do things with fields fields do                                 things with entities fields at our                                 entities entities their fields feel                                 double fields Wow all right jumping down                                 the rap aliceinwonderland I think so                                 okay jumping down the rabbit hole                                 so like I said kind of the basis for a                                 lot of the stuff that's being done in                                 contribs this entity API module again if                                 you don't write code you're probably                                 never going to have any idea what's in                                 here just all you got to do is install                                 it it's going to be a requirement for a                                 lot of things that you do one of the                                 things that we had to do was start                                 thinking about blocks again there was                                 there was some hope early on that we                                 would actually make blocks into entities                                 in court that didn't happen so a lot of                                 kind of experimental stuff was going on                                 and could trib there was a block to                                 point O in an entity block and a block                                 API a lot of people playing around with                                 the idea of what could look at how could                                 you make blocks into entities and make                                 them feel double and it looks to me like                                 the one that's sort of emerging that has                                 legs is the bean module and the bean                                 module lets you create little blocks in                                 the same way that you create content                                 types so you can actually create create                                 block types in the same way that you can                                 create content types and then each type                                 of block can have fields attached to it                                 and you can say this this type of block                                 has an image field and that type of                                 block has two text fields and who knows                                 what else so you can you can do all                                 those things and it adds a tab so when                                 you go to the screen where you where you                                 see all your content into in addition to                                 the node content that you see now that                                 you'll have a tab to see your blog                                 content so that's kind of cool another                                 thing that we're doing is we're kind of                                 rethinking the idea of user profiles                                 what the heck is going on with user                                 profiles so in core we've always had                                 this profile module or this is the been                                 apart of core for a really long time it                                 allows you to put fields attach fields                                 to users but it doesn't use the field                                 system it's got its own really funky way                                 of storing fields and it's not it's not                                 a good way and it's it's there was a lot                                 of effort made to try and switch that                                 over and actually change it so that we                                 had profiles that used fields using the                                 field API and that all that would be in                                 decor but that got into a hole                                 debate about profiles and what should be                                 in profiles and should those fields be                                 attached to the user or should they be                                 attached to the profile and should there                                 be a different thing and and it just it                                 didn't make it so as it stands right now                                 in core you can attach fields directly                                 to users and there still is a profile                                 module and I exited out here because                                 basically we don't want anybody to start                                 using it who isn't already using it so                                 we we've got sites that are coming up                                 from Drupal                                                             been using the profile module in the                                 past that's not the recommended path                                 forward it's not going to be broken they                                 can still use it in d                                                   but basically if there's not data in it                                 I believe that's it's either if there's                                 not data in it or if you hadn't had the                                 module enabled it's just not going to                                 show up at all so if you're building a                                 new site you won't even see an option to                                 use it you're not supposed to see an                                 option to use it it's trite that we're                                 trying to find a path out of that for                                 for probably Drupal                                                   couple of projects we have a profile to                                 in a profile like they've taken a couple                                 of different approaches to how to handle                                 fields on user's profile light says                                 let's go ahead and attach the fields                                 directly to the user that's fine but we                                 need some ways to categorize it so let's                                 add categories and that was one of the                                 things that the profile module did for                                 us profile to takes a little bit                                 different approach profile to takes a                                 more complex approach and it says let's                                 create let's let people create as many                                 profiles as they want a profile is                                 another entity that is connected to the                                 user so you could put fields directly on                                 the user or you could put fields on the                                 profile and the profile is attached to                                 the user and the reason why that might                                 be of interest well first of all is is                                 you could create like various profiles                                 for various purposes that all have                                 different kinds of fields attached to                                 them and also that way you're not                                 necessarily loading all those if you                                 have a lot of fields you're not                                 necessarily loading all those fields                                 every time you do a user load you're                                 only loading those fields if you are                                 looking at the profile                                 so that is something that's going on                                 we've got all kinds of modules that are                                 you know have built whole subsystems                                 around two entities and I'm not going to                                 talk about any of these in any detail I                                 think there have been sessions about all                                 of these at the conference and if you                                 missed the sessions you can go back and                                 try and see the videos drupal commerce                                 if you know what Oh Burkhart was in                                 Drupal sex Drupal commerce is like a                                 complete ground had ground-up rewrite of                                 the whole idea of doing commerce using                                 the whole energy and field system                                 organic groups again existed in Drupal                                 sex but it was allowing you to make                                 groups out of nodes so you could you                                 could designate a node as the group and                                 then and then add other nodes to that                                 group as content interval seven complete                                 ground-up rewrite to say this is all                                 about entities and any any entity can be                                 the group and any entity can be added to                                 the group media is like a complete                                 ground up look at reworking the way that                                 file handling is done using the entity                                 system han we have more entities so the                                 file entity this this kind of came out                                 of the medium module the yeah the medium                                 module event initially was doing a whole                                 lot of things with files and they've                                 split the file entity out and it's                                 actually a separate project that you can                                 use with or without but again it's the                                 idea of letting you attach fields to                                 files so you could for instance add a                                 lot of metadata about your files panels                                 came out with the idea of there's a                                 module called feel double panel pains                                 and so if you've used if you've used                                 panels in the past you know that there                                 were these little custom content which                                 was sort of like a block it was just a                                 title in a body and and that was a                                 little panel pain that you could use in                                 panels in various ways so the field of a                                 panel paints is the same idea only it's                                 a little entity and since it's an entity                                 it can have fields attached to it so you                                 can you can have a little entity that                                 has image field and that can be a pain                                 that you can use in panels                                 the message module has written a whole                                 messaging system that uses entities as                                 the messages in and again since the                                 messages are entities they can have                                 fields attached to them so you can                                 control what kinds of data you can                                 collect in your entity this one's really                                 interesting there's entity forms create                                 forms that are filled obel entities and                                 the idea it's it's sort of an                                 alternative to the webform module I                                 don't know if it's it you know if it's a                                 good idea or a bad idea but it's an                                 interesting idea and the idea is then                                 went the form submission then creates                                 new entities Oh entities and need ease                                 so you start loading up all these new                                 entity and you see we've got lots of                                 things here even if you aren't creating                                 your own custom entities and one of the                                 things that's really confusing is where                                 the heck do you manage all these you                                 know the manage field screen for all                                 these things is all over the place so                                 some of them are putting them in the                                 structure area and some of them are                                 putting them in the configuration area                                 and some of them are two or three levels                                 deep as I've been trying out different                                 ones of these modules you know like I                                 spend the first five minutes trying to                                 figure out where the heck I configure                                 them because they're all over the place                                 another thing that we're doing is we're                                 rethinking the whole idea of references                                 so old school references Drupal                                       earlier you had node references and you                                 had user references no drefan says i'm                                 connected to node                                                      references I'm connected to user                                      whatever and initially that's what we                                 had in Drupal                                                          we had created the references module                                 which was kind of an outgrowth of cck                                 and it basically moved that same old                                 node reference user reference stuff into                                 Drupal                                                               it's out there it's fine but as we                                 created all these new kinds of entities                                 said you know we really want some way of                                 referencing every kind of an entity and                                 so finally the the entity reference                                 module was created and saying you know                                 rather than try and think of all the                                 possible entities that we might want to                                 create let's do it in average                                 Eric Wayne and say we can reference any                                 kind of entity and so that is the new                                 school way of doing it and if you're                                 starting a new site and you've got a                                 choice between using the old school or                                 the new school go with the new school                                 because that's where all the cool kids                                 are and and if you go back and look at                                 the project page for references you'll                                 see that it says the goal is to                                 deprecate it in in favor of entity                                 reference because we like the more                                 modular approach of entity reference at                                 this point there's so many people using                                 those we can't just they can't be pulled                                 but but if you're making decisions about                                 what to do going forward you should you                                 should be going with entity reference so                                 this is the entity reference module and                                 it also provides nice things like if you                                 use it in views it's got not not just                                 references but reverse references which                                 is nice another thing that's interesting                                 and kind of illustrates what's going on                                 in all this is organic groups came out                                 really really early in the Drupal                                   cycle and like I said they created the                                 whole this whole entity system for doing                                 groups on any kind of entity and                                 initially at the time entity reference                                 didn't exist and they initially created                                 fields organic group fields that were                                 used for connecting the the group                                 content to the group whatever the group                                 was and they were just custom fields                                 that that he had created and they turned                                 out to be kind of weak copies of node                                 reference and user reference they                                 actually didn't have all the                                 functionality that we we wanted them to                                 have and so then there were some issues                                 about adding more functionality to them                                 and then finally the issues went around                                 and by this time the entity reference to                                 come out and said you know we wanted to                                 be like entity reference and then                                 finally he said you know maybe it should                                 just be an AE reference and he actually                                 that was the original organic groups                                 with                                                               organic groups where he threw out the                                 custom fields and he's going completely                                 over to using the entity reference field                                 now one of the things that he ran into                                 was the entity reference field didn't                                 have some of the flexibility that he                                 needed and he became a co maintainer of                                 the entity reference module and added                                 the functionality that he needed for                                 organic groups to work we                                 means it's also additional functionality                                 that might be useful to other modules so                                 I just think it's a really interesting                                 exercise in what people are have done so                                 sorry about that okay so we can go                                 beyond references so we have this module                                 called relation so a relation is another                                 kind of reference it's sort of                                 references on steroids really she the                                 relation module says not only do I want                                 to connect this item to that item but I                                 want to know what kind of connection                                 they have I want to be able to save                                 their sisters or they belong you know                                 one of them belongs to the other I want                                 to be able to you know I want to have                                 some additional information about the                                 the relationship itself so what relation                                 module does is it creates an entity for                                 the relation so the relation itself is                                 an entity and then that relation is used                                 to connect to other entities and allows                                 you to do things like belongs to sister                                 a parent of that kind of thing the                                 registration module is really                                 interesting so in earlier versions of                                 Drupal and in fact they have Drupal                                   versions there's there was a sign up                                 module than a cck sign up module and                                 those were modules that you could use to                                 sign up for an event they are both                                 specific to signing up for nodes and and                                 that's great the registration module is                                 one that came in and said well why don't                                 we take a step back from all that and                                 say what if we could just register for                                 and you know any kind of entity you know                                 forget whether it's a node any kind of                                 an entity any kind of a registration and                                 so basically it has created a                                 registration which is an entity and it's                                 a feel double entity which means you                                 could have a type of registration that                                 requires an email address in a file                                 attachment in three text fields and                                 another type of registration that has                                 different kind of data that goes along                                 with it and then you can assign use use                                 those registrations on any type of                                 entity and it adds these tabs it on the                                 Edit tab at                                 she just say I want to enable this                                 entity for registration and then it has                                 a managed registration so that if                                 anybody registers you've got a list of                                 all the people that have registered for                                 this entity but it's it's a really                                 interesting idea of kind of kind of                                 stepping back and getting out of the                                 node centric way of looking at things                                 this is just an interesting module I                                 think this is totally broken I tried to                                 tried to use it and I couldn't get it                                 working at all but I it's it's an                                 interesting concept so this is                                 embeddable the idea of trying to create                                 a module in which you can plug anything                                 into anything else so I want to embed a                                 node in a note or I want to embed a                                 block in a user or whatever interesting                                 idea then we've got a whole bunch of                                 utility modules now one thing that I i                                 should mention and anyone who's trying                                 to use drupal                                                           is all this stuff that we do to build                                 these fancy entities what the field is                                 very expensive and we need to cash them                                 and and the system was designed to be                                 you know to and built to be cached and                                 and the goal all along has been that if                                 you have any concerns about performance                                 you are going to want to catch them                                 there but what happened was core doesn't                                 automatically do that caching it has all                                 the puts all the things in place that                                 allow caching to happen but it doesn't                                 it doesn't automatically happen so                                 there's a module called entity cash you                                 don't have to do anything but enable the                                 module and it will take care of the                                 caching for you if you have bigger sites                                 and you have more performance issues                                 there's a couple other modules that are                                 really interesting one is entity cash                                 flush to give you some control over when                                 the kennedy cash is flush and then                                 there's a cash warmer to give you some                                 control over slowly refilling the cash                                 after you flush it instead of having it                                 all just hit at one time any D                                 translation so this is bringing entities                                 to the world of translation and                                 multilingual sites so in Drupal                                       way that we did multilingual sites was                                 we actually create up created other                                 notes so if I wanted to have a French                                 version of something in a German version                                 of something I actually create two                                 different nodes and I have here's all                                 the french text over here and here's all                                 the german text over here the entity                                 translation                                 and that's got disadvantages because now                                 you've got two nodes instead of one note                                 and what if you want to do things like                                 registrations or references or something                                 like that it doesn't make sense so what                                 the entity translation module does is it                                 basically hooks into it doesn't actually                                 create an ADIZ but kind of hooks into                                 the entity system to do what it does and                                 it allow it allows each field on the                                 note to become translatable so instead                                 of having a frenched node and a german                                 node you have a single node that has                                 French fields and German fields                                 interesting module that I had never seen                                 before but it was kind of interesting                                 this is a module that's playing around                                 with different ways to lists entities so                                 views is one way that you can create a                                 list but it's also got options to use                                 things like the entity field query and                                 entity reference fields and other things                                 as sources of those lists that you might                                 create so all this entity stuff looks                                 pretty exciting maybe you want to create                                 some entities well there's a couple of                                 ways you can create entities there is an                                 entity construction kit how sounds kind                                 of like hunting construction kit I don't                                 know where he came up with that name but                                 anyway there's an entity construction                                 kit and it allows you to use the UI to                                 create custom entities if you're a                                 developer and you would rather do this                                 in code there is a module called model                                 and model is if you think back to story                                 module page module that we talked about                                 earlier it's the same kind of an idea it                                 is basically just example code and you                                 copy it and you rename everything and                                 you've got your you've got all the stuff                                 you need to build a new entity without                                 figuring it all out yourself you might                                 want to copy entities so now there's a                                 module called bundle switcher and you                                 can create an entity of one type of                                 bundle and you can say you know I I                                 started with this as a page and I want                                 it to be a story and let you do that                                 kind of thing bundle copy is kind of the                                 equivalent of what we had in Drupal                                      had content copy where you could export                                 you know export and import the the stuff                                 that you had on a piece of content and                                 that's what bundle copy does in Drupal                                   and then there's another one called                                 attached existing                                 builds but these these are all about                                 different ways of copying data from from                                 one to another on this is not                                 technically about the entity system but                                 the entity system is all built on                                 classes and uses the registry and if you                                 are playing around with some of these                                 new entities and then you disable them                                 you may find that funny things happen                                 like suddenly you have these fatal                                 errors about missing ink files and you                                 can't get anywhere on your site and you                                 don't know why everything blew up what                                 happens is the information about all                                 these classes is stored in the registry                                 and that registry didn't get cleared out                                 properly and this is happening                                 frequently enough that there's a module                                 for this and this is not a normal module                                 this is a module that you download you                                 you run from the command line or you can                                 use address command the instructions are                                 on there and I'm just bringing it up                                 because if you are going to try and and                                 install and try out some of these things                                 and then get rid of them you are                                 probably going to run into this there's                                 an interesting module called restful web                                 services so this module is designed to                                 create a rest endpoint for any type of                                 entity so if you want to create a                                 service from your entity this is what                                 you can use there's a module called rush                                 entity and this is a add some drush                                 commands to actually load and read and                                 get value grab values off of entities                                 entity autocomplete so you know we have                                 auto complete four nodes and users and                                 some of our standard kinds of entities                                 and those are really handy you can't                                 have an auto complete without having an                                 auto complete path somebody has to                                 create the auto complete path in the                                 code that actually populates the                                 autocomplete so entity autocomplete is                                 about the idea of saying creating a way                                 to do an auto complete path for any kind                                 of entity nad label if in Drupal                                      had automatic no titles which was a way                                 if you had a node or a content type and                                 you didn't want people to actually                                 physically enter the title you wanted to                                 control what the title was going to be                                 you could use something called automatic                                 no titles which let you use something                                 like tokens                                 to create a pattern for what the title                                 would be automatic entity label does the                                 same thing for entities kind of in a                                 generic way nad view mode modal this                                 brings up a modal window that uses a                                 view mode which just kind of blew my                                 mind taxonomy entity index this actually                                 creates a physical index of actual table                                 of index for taxonomy terms and this was                                 around some problems that people were                                 having with revision content and being                                 able to make sure that taxonomy worked                                 on revision content energy dependency                                 this came out of the deploy module and                                 so we've got potentially we do entity                                 relationships you know we got an entity                                 reference which references something                                 else which references something else and                                 if I pull an entity I need to pull all                                 the things that are related to it and so                                 this entity dependency API is about                                 finding you know drilling down and                                 finding all the things that are related                                 and pulling them all back and also                                 pulling them back in the right order so                                 that the the bottom level dependencies                                 are first okay all right fields we got                                 all kinds of stuff going on about fields                                 we had we've been talking about feel                                 double fields for a long time I've sort                                 of a pet thing of mine for a long time                                 was was doing a feel double field                                 because I thought we knew you could we                                 knew it was possible and the exhibit in                                 the example for when you would want                                 something like this is something like                                 worse a recipe for instance so you say a                                 recipe has an amount in a description                                 and maybe a picture for an ingredient                                 and then you want to have several of                                 those and you don't want like three                                 amounts and then three ingredients and                                 then three pictures because they have to                                 maintain their relationship to each                                 other so what you really need is you                                 when you need a like a combo field you                                 need a field that contains those three                                 elements and then you need to be able to                                 add as many of those as you need to and                                 treat it that way so that's what the                                 idea of feel double fields because a                                 field anything can be a field can be an                                 entity and an entity can be a field                                 and in an entity can have fields so we                                 can have feel double entities so there                                 was a micro project and there was a                                 field entity project and I think those                                 sort of died died down there's a field                                 collection project and I think that's                                 kind of where most of the activity seems                                 to be and so this is a field that you                                 can attach to any entity and you can                                 attach fields to it so it'll you can                                 create your little sub thing and then                                 you can attach that to pieces of content                                 and then it's there's a growing                                 collection of modules around that to                                 display it in different ways and to make                                 the views work better and various other                                 things so this is filled collection then                                 there's field group and and field group                                 is pretty much the same as as what it                                 was in grupal                                                        more powerful because you can do like                                 nested field groups now and and this is                                 not physically moving things around this                                 is just grouping them on forms I thought                                 this was kind of mind-blowing so we had                                 entity references and we had user                                 references and we have no references                                 this is a field reference so this is                                 referencing one field from another                                 interesting idea ok you field utility                                 module one of the things that didn't                                 make it into core was a the ability to                                 control format or settings of my other                                 modules you know if a module has                                 formatter settings and you want to alter                                 them too bad you really can't do that so                                 this is a module design to try and make                                 that more possible field permissions                                 this is pulled out the field permission                                 system so that if you need to have field                                 by field permissions this would be the                                 way that you do it this is a module to                                 do to add field validation to each                                 instance so it lets allows you to create                                 some space some custom validation rules                                 field tools module is just kind of the                                 beginning of something right now but the                                 idea is to create a collection of tools                                 for working with fields and manipulating                                 fields the formatter field this one is                                 you know for matters if you work within                                 if you go into the display field screen                                 you're setting like for a content type                                 you're saying I want to see this format                                 for this field and this format for that                                 field for mater field is saying what if                                 you need it more specific than that what                                 if you need to have different format or                                 settings on individual pieces of content                                 and so it's trying to add that kind of                                 functionality so now we're kind of                                 coming remember we did this like                                 everything is a node thing and and we                                 said well you know the only thing we                                  really want from nodes is the ability to                                  be filled above but it turns out we                                  actually want some other things from                                  notes you know with you know there's a                                  whole bunch of things that are                                  properties in this line between what are                                  properties and water fields and which                                  things do we really want is really                                  getting fuzzy so what exactly makes a                                  node a node we should we should think                                  about that little nodes have fields they                                  have view modes they have access control                                  which turns out to be really important                                  they have revisions they have menu items                                  they have authors they have status their                                  comments their workflow of creation                                  dates change dates so they've got a lot                                  of aspects about them now if I don't                                  want any of that kind of stuff a little                                  custom entity is perfect right but what                                  if I want some of those things now what                                  do I do well I could create a custom                                  content type and then I want to get all                                  of them on I'm have to hide the ones i                                  don't want or maybe i need an entity but                                  i need to pick back some pick back up                                  some of these things that i lost and so                                  now we're kind of coming into this                                  really crazy world where now we're                                  saying oh my god everything can be like                                  a node really scary so there's a title                                  field now the what the title field                                  actually grew out of was the fact that                                  the content ID translation model needed                                  a way to translate the title the title                                  is not a feel the title of a node is                                  still a property of the note and we                                  needed to translate it in the entity                                  translation model module translates                                  fields so this field makes the title                                  into a field and actually what it does                                  is it creates a field and kind of swaps                                  it in but anyway it makes it possible to                                  create translations for the title field                                  properties so this is                                  yeah line is getting really blurry so                                  this is something to turn fields into                                  properties I don't know why but you                                  could rain durable elements so if you're                                  looking at the display field screen you                                  know you can you can move all your                                  fields around but the properties aren't                                  there so this is saying okay maybe you                                  want to be able to have that same level                                  of control for the properties as well as                                  the field so this adds that dynamic                                  properties this one's really crazy this                                  came out of the Commerce module in there                                  may not be a lot of use cases outside of                                  Commerce but the idea is you might have                                  things that are so dynamic and so                                  complex that you really don't want to                                  create fields for all these things it                                  would just be overwhelming and so what                                  it is is a method of creating things                                  that are like fields but not really                                  fields the properties for like beads                                  aunt one of the examples is a camera and                                  you've got all the possible things that                                  a camera might have in a Commerce                                  situation I don't think we're done yet                                  maybe we want comments we've got a                                  couple of modules that are exploring the                                  idea of putting comments on other kinds                                  of entities so there's a reply module in                                  a comet field module and these are both                                  looking at the idea of making it                                  possible to add comments to other kinds                                  of entities maybe we want menus and has                                  you know that was nice thing about notes                                  was you can have menus and paths and                                  maybe we want some of those kinds of                                  things on our entity so we've got a                                  couple things here we've got a menu link                                  field in an entity path field that are                                  gone going down the road of trying to                                  figure out how to add those things to                                  any kind of identity we talked about the                                  fact that access control is nice we like                                  to have access control and it would be                                  kind of nice to have a more generic                                  access control that is like for any kind                                  of entity instead of a very specific                                  node access control system these are I                                  believe really really rough early                                  experimental kinds of things I don't I                                  don't think either of these is a                                  polished thing but they're they're                                  interesting exploring the idea of access                                  control for entities what about status                                  field you know it's kind of nice to have                                  that status field there are times when                                  you                                  might want to use that so here's a                                  couple of projects to add a status field                                  two files into terms and there's more                                  stuff there's the entity view modes to                                  say you know I might want to have other                                  kinds of view modes on my entities not                                  not just nodes and I might want to have                                  flags on other things it turns out you                                  can't put flags on all kinds of entities                                  but now there now you can so the funny                                  thing about this is I feel like we've                                  come full cycle and we did everything is                                  a node back when everything was a node                                  and we thought everything should be a                                  node and now everything's not a note                                  everything is an entity but everything                                  is an entity that like a node so it's a                                  really topsy-turvy world it's a pretty                                  crazy world we got here I just want to                                  have a couple of provisions again I                                  flashed through a whole bunch of modules                                  here the fact that I named them does not                                  mean they are production ready or even                                  recommended they are just interesting                                  and you got to do your own due diligence                                  on them I'm sure you couldn't keep up                                  with all the names but if there's a PDF                                  there's a link to the PDF on the session                                  page and i actually will publish it                                  after here I didn't want it to get                                  clobbered before with the session but                                  i'll publish it after this session and                                  on that in that PDF I made every place                                  that you see the name of a module is                                  should be a clickable link to the                                  project page to help you find them so                                  questions                                  okay my question is can we wake up now /                                  can you wake up now but actually I'm                                  really confused by a lot of this there                                  are men so many options my question is                                  how do we come up with best how do we                                  learn about best practices best                                  practices I don't know if we know what                                  the best practices are yet that's that's                                  part of this topsy-turvy world if you                                  are not a developer and you're just                                  going with you know working with you                                  mostly using modules that exist and you                                  can do what you need to do using                                  standard tools like content types I                                  would I would probably do that if you're                                  a developer and you're and you want to                                  dive into some of these kinds of things                                  I'm not sure yet what the best practices                                  are going to I think we're working that                                  out right now if I you built                                  applications in the past which of the                                  relationship flavors you've mentioned                                  would you recommend for a traditional                                  primary key foreign key relationship on                                  if you build relationships in the past                                  database                                                              right note these references then there's                                  the reference on steroids is                                  relationship the none of the reference                                  modules are actually creating primary                                  key foreign key things there they're                                  just it's just it's just on the number                                  the ID it's just storing the ID of the                                  of the thing that it's related to so                                  build a module the old-fashioned way                                  yeah I'm not I'm not sure I understand                                  sorry yeah could you speak a little more                                  about what bundles are Oh bundles yes I                                  did kind of gloss over bundles so so in                                  with nodes we have content types right                                  you familiar that we've got page and                                  we've got story basically they're just                                  variations of a node we had to find a                                  kind of a generic word for what that was                                  going to be                                  we can't use the word content type in                                  Drupal                                                                  because that doesn't make any sense we                                  had to kind of back up to a word that                                  that didn't have any meaning of its own                                  and we we actually tried all kinds of                                  things and we finally ended up with                                  bundles as in bundle of fields you know                                  a thing that is a collection of stuff                                  that belongs together it's not                                  necessarily the best word but that's                                  what we ended up with a couple years ago                                  I built a project what's something                                  called cck                                                               of that yes don't worry to what was                                  going to happen with that the triple                                    in the fields module came in I'm                                  assuming that this feel double fields or                                  field collection is where is the                                  replacement for that that's yeah the                                  idea is that that cck three the the                                  multi group thing is good is Mike would                                  migrate to the to the field collection                                  module okay thank you yeah somebody                                  needs to actually write the migration                                  code which I know needs to be done what                                  would your advice be if you're creating                                  a module that defines maybe three types                                  of data should it be a single entity                                  with three bundles or three entities say                                  that again sorry so if you're defining a                                  module that defines say it's three types                                  of data would you go with three entities                                  or one XD with three bundles I don't                                  know if I can give a generic that the                                  question was if you have an entity with                                  three types of data would it be the                                  three entities or three and entity with                                  three bundles well a bundle is this is a                                  separate entity I mean no one entity has                                  more than one bundle in any particular                                  instant you know identity entity has has                                  a single bundle yeah i'm i'm not sure                                  are their pros and cons with an ed tag                                  you're talking about any types right                                  correct yes yes okay I don't know again                                  I don't know if there's a generic answer                                  for that I to me the big question is do                                  you want entity or do you want content                                  type and I think the way that you make                                  that call is do you want all the stuff                                  that goes with                                  nodes and if you do then you want                                  content types or if you really just want                                  to really slim mean and mean clean thing                                  that doesn't have all the nodes stuff on                                  it then you want an entity thank you                                  okay migration from reference to entity                                  reference is there any discussions for                                  that uh yes he needs to happen I don't                                  think it'll be hard it should be a                                  pretty easy transition somebody just                                  needs to write the code so the new                                  address field is that a field of bull                                  field oh I'd address field I actually                                  had that in my slide originally and then                                  I took out i had to ahead o like another                                                                                                            gonna have time to cover them all so I                                  pulled those out an address field was                                  one of them editor's field is just a                                  collection of fields it's not it's not                                  the field collection module it's just a                                  module that defines its own set of                                  fields and she questioned it's a it's a                                  field that has fields attached to it as                                  a feel double field no it's not about                                  it's not a feel double field it's not an                                  entity it is just a complex field that                                  has multiple columns in it okay I think                                  I blew your minds that's it                                  you
YouTube URL: https://www.youtube.com/watch?v=zODedjpBRcI


