Title: DrupalCon Munich 2012: The Drush Ecosystem
Publication date: 2013-03-29
Playlist: DrupalCon Munich - August 2012
Description: 
	Learn about all the cool projects which ship with Drush commands, or build upon core Drush. For example:

Devel Generate quickly populates a site with placeholder content/users/terms/comments, etc.
Ctools exportables integration
Features commands
Drush Deploy
Drush Bench
PHPSH. A console for Drupal.
Git release notes generator for module maintainers
Captions: 
	                              makes you better                               alright let's get started welcome                               everyone we're going to talk a bit about                               the dress ecosystem and you guys will                               then ask a bunch of questions I'm                               looking forward to that my name is moshe                               Weitzman I'm the director of research                               and development at aquia long time                               Drupal core developer and one of the                                dress maintained errs I want to                                introduce two other dress maintainers                                here Jonathan hedstrom from open sorcery                                maintainer of drush make if you guys                                haven't been following closely make is                                now part of dress                                                       bomb also performance engineer at aquia                                alright just want to give you an                                overview of what we're going to talk                                about today these are all of the                                projects or institutions that are part                                of the dress ecosystem that we're going                                to talk about today all right so                                hopefully you'll find something you're                                interested in this list something you                                haven't heard about yet and maybe we can                                increase your dress happiness here I                                figure I can take                                              introduce drush for people who haven't                                heard about it after that I'm going to                                assume that you have heard about it and                                used it thrush is a command line program                                okay so it's not about web pages it's                                not about modules that you install into                                your drupal site this is a command line                                program that actually works outside of                                drupal and drives drupal the version                                that we're working on still is drush                                  that works with either drush six or                                seven and sometimes drush eight drupal                                sorry that was confusing let's try that                                again drupal five drupal six not five                                drupal                                                                 want to say is if you're just learning                                about to rush there's a command that                                ships with it called rush topic you                                definitely want to use topic to read all                                of the documentation that we've written                                okay the first member of the brush                                ecosystem that I want to talk about are                                two terrific ISPs or web hosts that you                                use to host your sites aquia and                                Pantheon are specialists at hosting                                Drupal sites as drupal experts they                                recognize that drush integration is                                really important and they support it as                                well as anyone on the planet okay we can                                look a little bit about how aqua                                supports drush there's a URL down here                                that we can go to this is the dress                                cloud reference for aquia when you are                                in aquia customer you can run all of the                                usual drush commands okay in addition                                Acquia cloud provides maybe                                         commands here that are custom to its                                environment that you can run what these                                commands do our let you log in to the                                system and get authentication tokens and                                then you can do all the things that aqua                                cloud lets you do you can push code to                                any of your environments you get a dev                                stage or production environment without                                clear cloud you can push code to any new                                environment change what tag it's at and                                get you can create database backups you                                can restore database backups you can                                sling your drupal database around from                                one environment to the other you can                                learn environment commands about what                                you're what you're running in your                                environment what tag it's at and so                                forth push SSS SSH keys and find out                                about your pending tasks so there's like                                a tremendous amount of dress integration                                that aqua cloud offers you the other big                                piece that offers use it gives you a                                site alias file with all the aliases to                                your environments okay so on your local                                machine you can ssh to the production                                environment and                                I'm commands they're just from your                                local machine okay that's actually a                                feature of pantheon also they will                                provide you an alias file that lets you                                get to your environments also so                                definitely encourage you if your dress                                fans to host with one of those two if                                either of those don't suit you on dub                                dub dub dress org we have a resources                                page we list some other web hosts that                                 are friendly to jesh which usually means                                 they have direct pre-installed for you                                 okay just to show you a little bit about                                 what that looks like here let me make                                 this a little bit bigger whoops the                                 essay command stands for site alias and                                 it tells me all the society Alice's I                                 have on my system the ones at the top                                 here were provided by aqua cloud okay so                                 aqua compra is the production dub dub                                 aqua com site you know I can go run                                 commands against that no idea if it's                                 going to work because i'm not on let's                                 not even try that                                 you know you can find out more                                 information about your aliases you can                                 see that that has a remote host and a                                 remote user and and I can run commands                                 against it okay so those are how the I                                 the web host participate in the dress                                 yuko system next big project I want to                                 mention is the ager project okay agar                                 uses drush very deeply in its system and                                 all over in its system agar is a way to                                 install upgrade deploy and back up a                                 network of Drupal sites so if you are in                                 the situation where you have a dozen or                                 a hundred or several hundred sites that                                 you have to manage and you want to self                                 host them you don't want to use Pantheon                                 and an aqua cloud to do it ager is a                                 great solution okay one of the great                                 things it does is it enforces best                                 practices around code deployments so if                                 you are going to do a push of your code                                 you basically prepare a package in agar                                 and it runs through a script of                                 deploying to a new directory changing                                 your symlink so the web server now                                 serves a new set of code running the                                 database upgrade and giving you tools to                                 roll back if you're not happy with that                                 release okay so definitely check out                                 agar project.org if you're interested in                                 learning more about a gir it's a pretty                                 big system I can't demo it right now                                 would take a little bit too long but                                 just want to call that one out okay                                 devel devel is a project on drupal.org                                 this is a module it runs inside your                                 drupal site okay it stands for                                 development it's made for drupal                                 developers it has pretty nice drush                                 integration that I can show you the                                 kinds of things it does you can generate                                 content okay generate users terms images                                 all of this kind of stuff if you're                                 building out a Drupal site and your                                 client hasn't given you the content yet                                 it's a new site you can                                 quickly populated with lots of content                                 and get a feel for exactly how it's                                 working show the client how it's working                                 it's really a nice tool developing                                 that's really useful for profiling if                                 you set up develop integrated prof you                                 will get a link to your XH prof run at                                 the end of every drush request so you                                 can go see why you're dressed request                                 was slow or not slow and go in and                                 optimize the functions that took the                                 most time okay super handy and there are                                 a couple commands for for viewing source                                 code so let's take a look at developing                                 a Grayson I'm in a Drupal                                              now so Jen C stands for generate content                                 alright so the next two parameters we                                 can learn what they mean here if you                                 just append dash H on any brush command                                 you see the help for that command ok so                                 we're passing an argument for a number                                 of nodes which is                                                      to pass a maximum comments of four all                                 right so take off the dash H run it                                 drush is now creating                                                                                                                         that's all it took took maybe a second                                 or two I can go to my site that's the                                 admin page of my sight here's the home                                 page you can see that there's lots of                                 Latin nodes here ok this is what devel                                 does feels your nodes in with Latin it's                                 filled API aware ok so there's an image                                 field on article notes it went ahead and                                 generated an image and put it in there                                 it generates these sort of quadrant                                 images with a circle in them which is                                 cool we can think and thank Nate hug for                                 that and there's comments on these nodes                                 ok                                 so that's generate content generate                                 users it's about to generate                                          all done there's some notice here that's                                 happening that appears not to matter                                 that I can look into at some point but I                                 verified earlier that it is in fact                                 generating users all these user-created                                                                                                       put fuel API fields on your user                                 entities it would populate those also                                 other commands that developers                                 this is the help command it has a dash                                 dash filter option I passed filter                                 equals to bail which says just show me                                 the devel commands that can be handy                                 sometimes you can also use grep for that                                 kind of thing but some people don't like                                 the pipe so we have a filter here are                                 two more commands that I was starting to                                 talk about FN hook and FN dash view if                                 you want to look at your drupal site and                                 find out who implements what hook that's                                 what FN dash hook is all about just pass                                 the hook name and you can see that                                 there's                                                            permission in my drupal                                                  go ahead and look at the source for any                                 of these I'll take number two which is                                 comment permission and now i can see                                 that function ok and FN dash view is the                                 same sort of thing for any function it                                 doesn't have to be a hook there's the                                 user access function and you can pipe                                 that to be I I haven't done this in a                                 while no it's the other way around right                                 it's not a pipe you've put the VI dash                                 oh really yeah so its reach from center                                 let's see how good you are mark                                        yep there it is good job my favorite                                 commanded VI                                 I'm spazzing out here okay all right                                 where were we we're getting past the vel                                 my great okay my great is a module that                                 I maintain along with mike ryan and its                                 goal is to take data from other systems                                 and move it into Drupal okay this is a                                 pretty extensive module and features                                 fantastic brush integration so i can                                 show you a little bit about how my great                                 uses drush let's take a look at that so                                 my great offers about a dozen commands                                 alright the first one we'll use is my                                 great status which has an alias to ms my                                 great status will show us that we have a                                 group of migrations that our beer                                 migrations okay this this terminology                                 will be familiar to people who are who                                 have used the my great example module                                 just like the docs for a migraine                                 there's three nodes that haven't been                                 migrated yet or three terms i should say                                 beer terms we can go ahead and migrate                                 those the my great import command is how                                 you do that okay so it just processed                                 three terms and three were created if                                 you weren't happy with those terms you                                 look to your website and something was                                 wrong with them you just roll them back                                 and fix your code and roll them forward                                 until you have a successful term                                 migration okay so the point here is that                                 sure the question was what are we                                 migrating from here yeah it briefly                                 migrated module is about migrating                                 either from an old drupal site to a new                                 drupal site or migrating from some other                                 database or file system and putting                                 content into nodes and users and terms                                 and so forth so it's a generic data                                 migration tool                                 yeah that's true why don't we talk                                 afterwards because I have a lot to say                                 about data migration but not here and so                                 I really want to answer that question                                 all right but we'll do it right after                                 this talk I did yes okay okay next                                 member of the ecosystem site upgrade                                 site upgrade is a command that used to                                 be part of cord rush it got so full                                 feature that we actually moved it out                                 into its own project ok so the project                                 is called rush underscore sup its goal                                 is to give a really robust way for you                                 to run a upgrade from Drupal                                                                                                                    migrate module which also provides that                                 service but this really follows the                                 traditional way to upgrade Drupal sites                                 which is to run update dot PHP so what                                 what sup does is you install it into                                 your Drupal                                                            your Drupal                                                       upgrade me all right so it will look at                                 all the modules that you are running in                                 your Drupal                                                          latest stable or dev releases of                                 everything that is available in Drupal                                   and then it will copy your Drupal                                   database to your Drupal                                               will run the upgrade path on it ok or it                                 will install the dribble set aside and                                 then we'll run the upgrade so it's a                                 real full service tool for a major                                 version upgrades it's the sort of tool                                 that doesn't work the first time you try                                 it ok that's the nature of major version                                 upgrades is that not everything that was                                 on your Drupal                                                         Drupal                                                                then you have to open up your Drupal                                   site and see what's broken and make you                                 know tell sup about what you want to do                                 if you used to use content profile in                                 triple six and you want to use user                                 entities in drupal                                                   right don't upgrade my profile stuff or                                 write a special update function to                                 handle that kind of migration and then                                 your your upgrade will start working so                                 it's very much a way to just like run an                                 upgrade trash what you did run another                                 upgrade fix some things and keep doing                                 that until you have a nice upgrade path                                 for your site okay here's a module which                                 is pretty handy again for developers                                 called module builder it has a nice UI                                 for doing its thing but it has pretty                                 great rush integration also what module                                 builders about is get the end goal is to                                 give you a dot module file and a dot                                 info file and a dot install file that                                 are skeletons that you can adjust but                                 it's very much an accelerator okay so                                 let me just show you and you'll get an                                 even better feel of what it does it's                                 aliased to the command mb okay so i'm                                 running drush mb here i get a warning                                 here that is of no consequence it                                 appears enter the module name so let's                                 say we're building the temp                                          enter the required hook presets I skip I                                 don't know what it means enter the                                 required hooks so you can say that the                                 module I want to write                                                  it's going to implement permission I                                 know that it's going to implement block                                 info I know that it's going to implement                                 block view what's its human rate human                                 name temporary                                                          lorem ipsum lorem ipsum what's its                                 dependencies this is stuff that goes in                                 the done info file it depends on the OG                                 module and it's part of the devel                                 package okay so                                 what OMB has done here let me see where                                 I can show you all right here's the                                 proposed temp                                                         Nice doxygen at the top of the file like                                 we're supposed to do and told me where                                 I'm supposed to customize it it                                 implemented hook help for me and put all                                 the help text in that I had pasted it                                 implemented hook block view for me and                                 put the name                                                          the function okay and it gave me a nice                                 stub inside with a case of my block and                                 the subject and content here for the                                 block view I don't see block info here                                 so maybe I did something wrong when i                                 inputted them all in or its maybe not                                 called block info i'm not sure in any                                 case this is a really fast way to get                                 started it has lots of options about                                 where you want to write the files to                                 when you're done and if you want to                                 write them and you don't actually have                                 to go through that interactive wizard                                 that i did you can pass everything you                                 want to mb drush mb my module menu cron                                 dash dash right dash dash quiet but the                                 name is this the description is this and                                 so forth and so on so pretty neat                                 function for getting started with                                 modules okay seatools export see tools                                 in its latest versions has pretty nice                                 brush integration and specifically with                                 its X portables feature if you add a                                 really new module called export bonus                                 you get even more drush integration and                                 its really pretty amazing all the stuff                                 that export and export get bonus give                                 you                                 so if you just run drush see texts                                 without any parameters you get the                                 interactive wizard again and it's asking                                 me if I want to export everything or                                 export some things let's just export                                 everything and it's telling me that the                                 following Bloody Bloody Bloody is going                                 to happen all right do I want to                                 overwrite the last module yes yes sorry                                 I should have said yes to all this stuff                                 before I started                                 okay so what's e-tolls export has done                                 in this directory is it has written out                                 exported PHP for all the things that it                                 supports okay so this is something that                                 a lot of people have used features for                                 I'm kind of excited by this because it                                 sort of cuts features out of the loop                                 and just uses see tools directly to do                                 exports okay so if you look at these                                 files here that one's not doesn't have a                                 lot of contents but if you have some                                 imagination you can get excited here                                 we've taken all our pathway laces and                                 exported them we've taken all our blocks                                 and exported them aha this is the one I                                 want okay so here's the system main                                 bartok block and it's been exported to                                 code okay same for all my other blocks                                 content types exported to code date                                 formats fields and in two instances                                 exported to code okay filters menus                                 roles and permissions variables vocabs                                 you know all of this stuff is exportable                                 by c tools and see tools export bonus                                 okay presumably what you do here you                                 check these files into your git                                 repository you do a git pull on                                 production and you have you have new new                                 configuration there alright hopefully                                 this can get us through Drupal                                         we have better stuff for Drupal                                        the cmi system so that was seat X Omega                                 and Zen themes I wanted to point out                                 that drush isn't only for sis admin's                                 and developers there's some things to                                 offer for femurs also both of these                                 great base themes offered rush                                 integration                                 and they offer the same feature which is                                 that you can quickly create a sub-theme                                 using dress so let me just demo that for                                 you so if i look at my list of commands                                 i have a command called Zen i look at                                 the help for zen i can see that the main                                 argument is the name of the theme i want                                 to create or the sub-theme and                                 optionally the machine name so if i want                                 to create the pretty theme i just called                                 dr zen pretty and it said the starter                                 kit for pretty was created in my sights                                 all themes directory and here you would                                 get all the things that didn't work                                    that you would expect in a Zen starter                                 theme okay so instead of having to copy                                 directories around change a bunch of                                 function names it's gone ahead and done                                 all that work for me if I look at                                 template dot PHP you can see here that                                 it's already replaced the function names                                 to be prefixed with pretty okay so if I                                 was just copying the starter theme I'd                                 have to do all this work myself but the                                 dress command went ahead and did this                                 work for me okay so there's things to                                 like fevers have things to like from                                 drush as well get release notes better                                 to just show you what it does this one                                 is for module for project maintainers on                                 drupal.org                                 okay Wow okay so I ran drush RN which is                                 the release notes command I passed two                                 arguments which is the get tag that I                                 want to start from in the get tag that I                                 want to end at so the dress                                             to the dress                                                             list are all of the changes that                                 happened during that timeframe as the                                 commit logs tell us what happened you                                 can just copy and paste this perhaps                                 clean it up a little bit and put it into                                 your release node okay so this is a huge                                 time savings if you're a module                                 maintainer and the project is get                                 released notes on drupal.org okay so the                                 next project is drush deploy mark is                                 actually the maintainer of drush deploy                                 and let him introduce this one oh yeah                                 okay so drush deploy is a tool to deploy                                 your code not you are content or                                 anything else like that if you've ever                                 heard of a project called Capistrano                                 which I think there was a Capistrano                                 session here it's a great best practices                                 way to get your code out there and                                 possibly run tasks when you're done I                                 found that not a lot of people were                                 using that possibly because it's such a                                 ruby project and it's not religious in                                 our vocabulary so I rode rush deploy                                 which is just a complete ripoff of it                                 but it uses parts of drush to to enable                                 that functionality it was the actual                                 part of just reply that I had to write                                 was really the only deployment code                                 because brush happens to have I mean it                                 has site aliases it s systems to rear to                                 to specify specific parameters for a                                 command line or for a command by default                                 in those aliases and all of those things                                 made it really simple to write this tool                                 that ends up being simple yet yeah and                                 really all it does is you give it you                                 give it you have a special like deployed                                 rush hour see file and you give it the                                 basic parameters                                 and you will s actually I can show that                                 that part are you ready to switch yeah                                 yeah I could talk a little bit about to                                 play while you're getting set up sorry                                 okay so one of the fundamental ideas                                 around rush deploy is a site list okay                                 and site lists are a feature of drush we                                 talked a little bit about site aliases                                 before how you can have an alias that                                 points to a remote server and rush will                                 ssh over to that server and execute                                 whatever commands you want a list is                                 basically a collection of remote servers                                 okay and so when you run drush deploy                                 you run it over a list of servers                                 typically so you say I need to deploy a                                 new code code code tag to my staging                                 servers and you've setup which you set                                 up a site list of staging servers and so                                 mark we'll go over that a little bit but                                 yeah so I can show you the basics here                                 so I just have this one site alias setup                                 lekebusch said you usually use this with                                 site alias groups where if you have                                 multiple in the same file that will just                                 go across the mall I only have one set                                 up here but that's sort of the the                                 minimal minimal setup for a typical side                                 alias and here's the deployed rush hour                                 see file so you can give it up                                 application name because it supports                                 multiple applications on the same server                                 you make this little bigger perhaps yeah                                 you tell it what git repository you're                                 deploying from and here i just have like                                 the like my fork or press flow what                                 branch to the boy from so in this case                                 this would be like a dev set up so it's                                 just master keep releases so every every                                 time rush deploys it deploys to a new                                 directory and then it swaps assembling                                 and so if you want to say keep some of                                 those around you can like by default it                                 keeps around three and then new new                                 deploys will delete the other one so                                 that you're just doesn't fill up from                                 from big deploys deploy via sets a                                 that's the strategy you want to use                                 there's like a pluggable strategy class                                 for how for how deploy actually puts                                 code on the server the remote cash                                 basically just it doesn't do a full git                                 clone every time it has one git clone                                 and a shared directory and then fetches                                 on that so that it has all the reps that                                 it needs our sinks into a new directory                                 and then just checks out the tag that                                 you want which is much much faster than                                 actually doing the clone and then you                                 you aren't you aren't like pulling in                                 place it's much safer to just affection                                 than check out your tag and usually the                                 toilet where the doctor it is and put                                 one example of a task here it with brush                                 deploys supports its concept of tasks                                 because of as it is it doesn't seem                                 probably that useful to just have a                                 command that puts your coat on a server                                 because you've probably probably                                 thinking yes I can do that there's a                                 little more to it that to that but it                                 has a really powerful notion of tasks                                 where if you just define a function in                                 this file and then give it the                                 annotation task address deploy will know                                 that it is a task until register it and                                 then there's actually another annotation                                 that's not that I don't have in here or                                 you can say this task runs before or                                 after a certain event like the symlink                                 is the big event and if any of you've                                 dealt with Capistrano this is the exact                                 same concept where the symlink means                                 everything went fine with the deploy and                                 I'm now seem I'm my current symlink is                                 now going to go to this new directory so                                 beforehand if there was like some checks                                 you wanted to run you can just write                                 them as tasks and then every task and                                 every drush operation has to exit                                       the entire thing to complete if anything                                 exits one then the entire thing is                                 rolled back it's basically a big                                 transaction so                                 and you can see it just made sure that                                 it had the directories it needs and then                                 then it's basically ready to go so now                                 we'll do a rush deployed                                 it until you can see it's a sh and                                 informing doing the git clone then they                                 get check out and then updating their                                 vision yep so then that that works just                                 fine and if i go to actually I probably                                 dress that's just a figure how that                                 works alias first yeah so deploys a                                 little different usually you put your                                 alias first and then you run the command                                 because when you put the alias first                                 that's telling drush everything after                                 this run this stretch command on the                                 remote server right and deploy runs                                 entirely on your machine all that does                                 is SSH SSH is into the command earned                                 the other server to check out the code                                 you actually don't have to have dress on                                 the other server for deploy to work so                                 in deploy its taking your alias as a                                 parameter right so it's just an argument                                 into that command and then I can get                                 that alias and then look up all the                                 information about how to SSH into the                                 machine separately so if you have if you                                 have address command that you don't                                 necessarily want drush to exist on the                                 other server you want you don't want                                 that to be a requirement you can always                                 just take the alias as an argument and                                 there's also drush ssh we added that                                 recently i don't know if a lot of people                                 don't use that yet so then I look into                                 here i have the deployed directory                                 that's the application name i had                                 gen you can see that current simile is                                 pointing to the release i just did                                 that's all time stamp and if you look in                                 releases there's only one but that yeah                                 that's what that does it's a might seem                                 simple but it's a it sort of packages                                 all of the best practices about                                 deployment up for you and I've noticed                                 that I mean it's rare that the custom                                 deployment setups are taking care of all                                 the same things because if you don't                                 especially we don't have like really                                 expensive tasks like update that PHP                                 every time you deploy this will let you                                 very easily do a zero downtime to put                                 where you just switch over I mean you                                 can even actually do expensive past and                                 you jealous of tasks before the symlink                                 and then as long as that happens you                                 just switch over right at the end and                                 you're and you're good to go so yeah                                 that's just yes no they could that part                                 of dress deploy is pluggable but someone                                 else is going to have to write that I've                                 in my contract that I don't use this via                                 so let's let's just hold the questions                                 because we're nearly at the end and then                                 people can go to the microphone and ask                                 questions the last project we want to                                 talk about in the dress ecosystem is                                 cash audit guess you're on so cash Radha                                 is super super simple it's a good                                 example of of how simple it is to write                                 drush commands and how like if you have                                 a small need like this I would HIGHLY                                 encourage everyone to just write these                                 small load rush extensions even if it's                                 a custom thing for your site because                                 they can be it's just I'm saving to just                                 put things on the command line sometime                                 so in so if you're if you normally need                                 to look look at a new site and figure                                 out what's being cached what isn't                                 especially with views if you for trying                                 to figure out why this why this page is                                 taking a long time I have a bunch of                                 views on that page and you have to go                                 through every single view to go check                                 the cash settings on each one that's                                 really tedious so I wrote cash audit                                 that you can just dude rush                                 I shot it it's the only one command no                                 arguments and gives you a really nice                                 brief overview of all of the core cash                                 settings so you can check release easily                                 I mean is something you'd also check for                                 like consistency on a deployment to make                                 sure that like these settings are set to                                 the things that you that you need to                                 have set and then for each view for                                 every display of that view why do they                                 look so bad well the columns are odd but                                 oh because of this resolution but you                                 can see the cash settings whether block                                 cash is enabled and what the times are                                 for each view so you can quickly audit                                 your site to see which which views are                                 not being cached so you can go catch                                 them easily and there's there's a patch                                 in the queue to add panels support so if                                 you're using panels and using paying                                 cash you might take a look at that it                                 still needs to be reviewed and I think                                 the see the end module there's a hook in                                 it where any control can implement that                                 hook and then add their own cash                                 settings to it so the CDN module has                                 done this for example all right well                                 that's the brush ecosystem that we                                 wanted to talk about today I hope you                                 guys have some questions why don't you                                 just come up to the mic here and kick it                                 off                                 hi this task that you just show to us                                 are these to be run every time a new                                 deploy is done or are related to a                                 particular deploy yeah so that would                                 actually happen on every single boy for                                 example you did a change in the source                                 code in the module and that needs for                                 example to run drush update abhi for                                 that particular thing too when it's                                 deployed yeah so good question and let                                 me pull up the readme so I have                                 reference                                 yeah so here's the example right here                                 that type of thing is something you want                                 to control / deploy you it's probably                                 not a great idea to say I mean so my                                 deploys used to be I mean by default I                                 would always do Josh CCL drush features                                 revert because that's an item opponent                                 process that always is going to happen                                 but update DB doesn't always need to                                 happen right so or there might be other                                 expense or the other expensive processes                                 like maybe on some deploys you need to                                 rebuild note access god forbid but                                 that's not something that you want to                                 necessarily hard code and this because                                 your dress deploy file is likely going                                 to be committed into source control and                                 you don't want to hard code that so                                 because you're going to want to change                                 it from to deploy to the boy what I do                                 and I mean what I used to do in                                 capistrano and in this I would say so                                 this is the line this options after                                 deploy sibling that means I'm going to                                 run that custom task after the symlink I                                 would set up those like have all your                                 tasks in that file and then set all                                 those up with all the expensive ones or                                 the ones that you don't do every time                                 comment it out and open this up and                                 uncomment it right when you're doing                                 your deploy because that's something                                 like this is made to do the deploy I                                 mean like Jenkins isn't doing this                                 deploy like you're going to be doing it                                 most time and so that bit of a manual                                 process I don't really see is that big                                 of an inconvenience because you're going                                 to have to make those decisions anyways                                 and so yeah you just really done comment                                 them                                 I have been struggling with site aliases                                 for example to developers working on the                                 same project I'd like to both of them                                 use the same site alias definition but                                 one has his development environment set                                 up differently it's different professore                                 webroot defined and is there a way to                                 override project base the scientist or                                 is there another solution for this are                                 you are you working on the same server                                 as the other person or how how old you                                 are you know local diamonds on the                                 computer and they I'd like to them to                                 share the same site alias file because                                 it's simply set up and maintained and                                 store it in yeah and the site aliases                                 that are inside the file are pointing to                                 remote servers that you both use or and                                 both remote servers and local servers                                 for their own death alright yo what's                                 the use case for site alias is locally                                 they can but have we have one script to                                 pull the database from acceptance or                                 life to development environment and                                 there's one script that uses the same                                 alias so pull from acceptance to death                                 and so they have the same script yeah I                                 mean I would say that the sites that are                                 local should be in a different file than                                 the sites that are remote and the local                                 one you basically maintain in your home                                 directory and do what you want with it                                 so get your that's the solution and the                                 only other I mean if you if you really                                 want to do this one of the nice things                                 about our configuration files being PHP                                 is that you can sort of do whatever you                                 want you could do something like like                                 look like check or like do a like a get                                 and a local em and then like how I get                                 somebody's name and then do a switch                                 based on that and then have all that in                                 code                                 and then just make sure that everyone                                 exports that variable in their batch RC                                 or includes a local file well but you                                 can have to yeah yeah or it includes a                                 local file if there that's essentially                                 oh no that's the way you usually do that                                 like setting us up HP yeah okay                                 I have a question about installation of                                 drush because for a while there has been                                 this deep in package which I always                                 found like really useful because i was                                 running deep in any way and then i                                 recently read that that's not the                                 preferred way to installed rush anymore                                 so could you just comment on that or                                 yeah so we had that and we were working                                 on maintaining that a little better so                                 that we could because yeah I mean having                                 drush in apps is really inconvenient                                 like lots of packages in a boon to they                                 just get outdated really really quickly                                 right so it's important they're also                                 can't change a major version with a                                 within that so you can't have so if just                                 for is on whatever version of ubuntu we                                 can't then just upgrade that to dress                                   because it's a major version so it just                                 doesn't work well and if we're going to                                 really make that better we'd also need                                 to do it for yum and everything else I                                 just tried well we have pear and I                                 notice house in selling phpunit with                                 parent said well how hard would it be to                                 do that and so I set that up and                                 actually works really well and so for                                 probably over a year now we have set up                                 Paris org and it's a custom pair channel                                 which I mean most most most things you                                 can solve impaired have custom channels                                 nowadays and all you do is use pear                                 channel will discover peridot dress or                                 pair install drush flush brush and                                 that's it if you go to the dress the                                 dress project page I'm pretty sure it                                 has those instructions on there and I                                 mean it's it might be you need to make                                 sure you have a recent version of pear                                 peach pina has the same the same                                 limitation and you can just upgrade your                                 pair but I would if you have any trouble                                 doing that I would really highly suggest                                 just just getting through that and                                 making it work because we as a community                                 we tend not to use packages that much                                 like we don't use pear very often                                 composer is fixing a lot of that we're                                 trying to use that more but we're                                 generally kind of bad at sharing code                                 because of that and pear does suck if                                 there's a lot of things about other two                                 wrong but it's what we have so as PHP                                 developers we should probably be more                                 comfortable with using it is my opinion                                 and certainly folks who want to just get                                 drush and follow along and run head or                                 run a stable release that's a perfectly                                 fine way to you know keep up with drush                                 also so fair use get whatever you prefer                                 and say usually it's like the impair                                 will be updated like that the day we                                 make a release except that it's not                                 right now because my laptop broke when I                                 was here and so I don't have my ssh keys                                 so I'm going to do it soon sorry about                                 that I I wondered if you could say two                                 tents well the distinction or maybe how                                 complimenting a year and thrush deploy                                 would be it's in like which use case or                                 this best practice went to you switch                                 the dress deploy is is more for a single                                 site I mean you could do it in a big                                 multi-site setup but like what dress                                 deploy does is is sort of a small part                                 of what Edgar does & Eggar actually uses                                 a very similar process they just they                                 actually just symlink into the dock                                 route instead of sim linking the entire                                 Locker but they they use the very                                 similar process and a good technique but                                 really I would say the that's an issue                                 of whether a like you have a good use                                 case for ager or not if you don't                                 address I'm address deploy is going to                                 work for pretty much any site as long as                                 you ain't or the plane from getting you                                 have us hear your point via SSH but I                                 mean agar is much more geared towards                                 just a massively like massive multi-site                                 where you're constantly creating new                                 sites if that answers the question yeah                                 that's I mean being a uracil basically                                 kind of adding rush reply to this whole                                 concept wouldn't really give much more                                 like beneficial functionality or                                 something so that's all understand this                                 with you okay thanks                                 hi there also may be a sight                                 configurator or a site generator will                                 just write a little file and you know I                                 say okay this website has this in this                                 manual this template is block blah blah                                 blah I write a text file and now click                                 on a button and then the complete                                 website is generated maybe in Italian                                 maybe in English maybe so that I don't                                 have to click in the administration's I                                 building blah blah blah manual blocks                                 etc all right so are you proposing a new                                 project for drush that that is like a                                 text file spec for your website yeah                                 maybe just a generator such an irate oh                                 yeah seems like that there's a lot of                                 overlap that idea and say like features                                 and install profiles yeah and brush make                                 to a certain extent is a little bit like                                 a text file that defines your website so                                 there are pieces of that out there I                                 think what you describe is a really big                                 project so that's probably why people                                 haven't taken it on but it certainly                                 would be handy to be able to write a                                 text file one afternoon and have a                                 website come out okay                                 okay so there's a comment here that                                 there's a Drupal                                                       that attempted to do this sort of thing                                 so perhaps someone will revive bone and                                 save us from all our consulting hours                                 any other questions about drush or drush                                 ecosystem all right oh there is right                                 great one last question regarding ctools                                 export I didn't get exactly the                                 difference order how is a difference a                                 difference between features is it made                                 to take over features or can you                                 elaborate please so I'm definitely not                                 the expert on ctools export or hub as a                                 collection and share features with other                                 people and so forth and the                                 functionality that I mean that's not new                                 it's just like sweep the residuals has                                 always had like the import/export UI and                                 then the old way of doing this before                                 features which you took that export and                                 you put it in a file and then see tools                                 will load it the only thing the dress                                 command did is it made it it automated                                 taking that and then putting it in a                                 module and doing all that stuff for you                                 which then makes it sort of overlap with                                 features because it's easy to export                                  that way but the functionality is is                                  something that's been there actually                                  before features existed and features                                  actually uses the exact same code that                                  CTools is generating so features is like                                  an extra set of and so as long as all of                                  your exportable zara ctools likes                                  portables you could potentially use that                                  I think instead of features yeah one                                  other question not strictly related to                                  the ecosystem but um can you tell us                                  anything about like your plans for drush                                  what's what's next for drush or any big                                  features or where you know we worked                                  really hard to get dressed                                            we're kind of in a blissful rest period                                  now with drush as far as brush                                           know I'm open to everyone's ideas about                                  what dress                                              and you know future versions of drush                                  but I guess we don't really have                                  concrete plans for the next version and                                  what we might add there I think it's                                  likely we'll do some internal refractory                                  to make it more Oh probably not like as                                  as intense as Drupal                                                 simple like clean up and refactoring I I                                  honestly I don't want to add any                                  features I mean I think the brush core                                  as a framework is getting really close                                  to being feature complete and so I just                                  want to make a Stabler chord rush that                                  makes it simpler and easier for people                                  to write command sport well thanks I was                                  curious somebody mentioned the idea of                                  using Drudge to download a copy of the                                  production website to a development                                  environment or your local laptop do you                                  have any suggestions about additional                                  commands you might want to use and other                                  modules that would extend those for                                  example to sanitize the database uh-huh                                  okay well just around slinging whole                                  sites around that's the archive dump                                  command if people haven't used it so                                  where is the site archive no archive                                  dump right archive dump so this command                                  will take the code for your site and the                                  database for your site and the files for                                  your site and zip them all up into one                                  tar ball okay so you can move that                                  somewhere else and restore it somewhere                                  it's actually a standard Drupal format                                  the site archive format and there's a                                  corresponding archive restore drush                                  command that is for untiring those files                                  and restoring your drupal site greg also                                  mentioned sanitizing your database this                                  is a feature of the sequel sink command                                  sequel sink in chord rush allows you to                                  move your database from one server to                                  another server typically using site                                  aliases to move it to a remote server                                  and you can sanitize along the way which                                  is to say you can remove the passwords                                  and email addresses if you want to                                  sanitize is pluggable so if you're                                  site has more confidential information                                  than just email addresses and passwords                                  you can implement a hook and scrub that                                  data out of the database dump it can be                                  useful if you're providing a database                                  dump to all your developers you might                                  want to sanitize it first you have less                                  PII going out to your dev team and                                  possibly getting leaked that way the                                  sanitized release the sanitized                                  functionality can be used on its own                                  there's a sequel sanitized command so if                                  you're not doing a sequel sync and you                                  just want to sanitize my sequel dump                                  that you have you can just do it that                                  way too lots of sites implement their                                  own commands to like pull their code and                                  their database and sing to local                                  environments and sometimes that's                                  necessary but it's really worth checking                                  out and rush our sink and dress sequel                                  sink because I think it's pretty likely                                  that those commands would actually do it                                  all for you just an another project that                                  does similar is Josh fetcher that's a                                  sandbox that Howard just released like                                  last week and that kind of builds your                                  entire development environment and gets                                  your database and you know sets up your                                  Apache and get pulls from get and gets                                  any sub modules in the does all that                                  stuff huh it's worth checking that out                                  too oh yeah dress dress fetch your                                  sandbox by Howard Tyson okay yeah check                                  that one out I know the vagrant module                                  has some drush integration which is                                  pretty neat there was a droop unto                                  project which i think is a little bit                                  passé now perhaps Quick Start is the one                                  that sets up your dress for you and sets                                  up your whole environment for you to do                                  development so check that one out also                                  all right well please give us feedback                                  by searching for dress ecosystem and                                  filling out what you thought of our                                  session last thing I want to add is that                                  we have some aqua t-shirts here so feel                                  free to come up and get grab a t-shirt                                  around the edge of the table here thanks                                  for coming see you later
YouTube URL: https://www.youtube.com/watch?v=pksR_s4i-D8


