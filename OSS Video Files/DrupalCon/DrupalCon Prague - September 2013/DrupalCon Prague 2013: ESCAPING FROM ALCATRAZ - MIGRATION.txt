Title: DrupalCon Prague 2013: ESCAPING FROM ALCATRAZ - MIGRATION
Publication date: 2013-09-26
Playlist: DrupalCon Prague - September 2013
Description: 
	Have you ever tried to migrate your site from one framework to another?
Have you ever tried to upgrade your drupal core from older to newer system?
Have you ever come to conclusion that there are less successful implementations?
Have you ever tried to escape from .... ?
Platform migration, data migration? For past years Drupal has been very successful as a platform for creating small and large scale web applications.
Recently an emerging problem has become migration from "something" to Drupal.

HAVING A SMOOTH DATA TRANSFER FORM PROPRIETARY AND NON PROPRIETARY SYSTEMS, FROM OFFLINE TO ONLINE SYSTEMS HAS ALWAYS BEEN A TOUGH TASK FOR TECHNICAL IMPLEMENTERS.

Recently being involved in massive and sophisticated migration projects. Me and Florian are very thrilled to share our experience with you. We will focus on various examples migrating from unimaginable sources to our beloved Drupal.

WE'LL GIVE YOU A SURVIVAL KIT AND ACTION PLAN TO GET PREPARED FOR YOUR ESCAPE FROM "ALCATRAZ" !

And getting your project ashore safely.
Captions: 
	00:00:00,000 --> 00:00:05,430
okay well hello everyone I think there's

00:00:02,790 --> 00:00:08,639
still some people coming in but we'll

00:00:05,430 --> 00:00:12,030
get started so today we're going to be

00:00:08,639 --> 00:00:15,210
talking about migrations and this is the

00:00:12,030 --> 00:00:17,820
one thing that we like to do before we

00:00:15,210 --> 00:00:20,820
start presentation on any topic is to

00:00:17,820 --> 00:00:23,970
ask well why why would you want to

00:00:20,820 --> 00:00:27,480
migrate and in the case of migration the

00:00:23,970 --> 00:00:30,090
opposite question why wouldn't you

00:00:27,480 --> 00:00:33,420
migrate is actually a very good question

00:00:30,090 --> 00:00:35,840
because you have a website it works it's

00:00:33,420 --> 00:00:41,520
functional why would you want to migrate

00:00:35,840 --> 00:00:43,890
and well sometimes you don't need to

00:00:41,520 --> 00:00:47,160
migrate you don't always need to migrate

00:00:43,890 --> 00:00:49,680
some sometimes you can just leave your

00:00:47,160 --> 00:00:51,510
website as it is or sometimes well as

00:00:49,680 --> 00:00:53,610
you mentioned yesterday you can also

00:00:51,510 --> 00:00:58,460
just shut it down and that's the end of

00:00:53,610 --> 00:01:02,960
it but sometimes you need to migrate and

00:00:58,460 --> 00:01:07,650
yannis found this this quote and from a

00:01:02,960 --> 00:01:10,290
general I think you wanted to stop hmm a

00:01:07,650 --> 00:01:12,900
Russian politician who wanted to stop a

00:01:10,290 --> 00:01:17,070
bird migration and no you cannot do that

00:01:12,900 --> 00:01:19,380
it's impossible and in the same way when

00:01:17,070 --> 00:01:22,380
you need to migrate you know that you

00:01:19,380 --> 00:01:25,049
have to migrate and so if you're stuck

00:01:22,380 --> 00:01:28,229
and with a system this could be an

00:01:25,049 --> 00:01:30,180
enterprise preparatory content

00:01:28,229 --> 00:01:33,840
management system it could be an old

00:01:30,180 --> 00:01:36,090
platform that's unmaintained when you

00:01:33,840 --> 00:01:40,290
need to migrate well you just have to

00:01:36,090 --> 00:01:42,360
migrate its natural thing and well when

00:01:40,290 --> 00:01:44,430
you can't migrate or when you really

00:01:42,360 --> 00:01:48,479
have soon well it kind of feels like

00:01:44,430 --> 00:01:52,460
being in prison most famous prison is of

00:01:48,479 --> 00:01:57,509
course Alcatraz which gave its name to

00:01:52,460 --> 00:02:00,119
source a title of our session on our

00:01:57,509 --> 00:02:03,509
escape from alcatraz we have two fellow

00:02:00,119 --> 00:02:07,380
criminals here to to assist you on this

00:02:03,509 --> 00:02:09,899
way this way out so hello everyone my

00:02:07,380 --> 00:02:12,380
name is Florian lorton I'm a software

00:02:09,899 --> 00:02:15,800
architect at winter crops Germany

00:02:12,380 --> 00:02:18,170
and I'm yiannis i'm a developer in when

00:02:15,800 --> 00:02:23,840
the crowd latvian office so he's welcome

00:02:18,170 --> 00:02:25,970
to our criminal session and now let's

00:02:23,840 --> 00:02:28,400
get started not with the way it is now

00:02:25,970 --> 00:02:30,050
but with things well what are the

00:02:28,400 --> 00:02:33,560
different ways that people have done

00:02:30,050 --> 00:02:35,210
migrations before and actually we took

00:02:33,560 --> 00:02:36,350
it in a way let's let's we took it in a

00:02:35,210 --> 00:02:40,520
way really we look back to the history

00:02:36,350 --> 00:02:42,410
how people actually migrated away or to

00:02:40,520 --> 00:02:44,210
some things and we look but really

00:02:42,410 --> 00:02:45,920
really far away in the history and then

00:02:44,210 --> 00:02:49,220
actually look back you know back in the

00:02:45,920 --> 00:02:51,200
day is about 4,000 years ago people had

00:02:49,220 --> 00:02:53,060
some writing so they basically writing

00:02:51,200 --> 00:02:54,770
things not in a computer soro and pay

00:02:53,060 --> 00:02:58,700
for the writing things and stones so you

00:02:54,770 --> 00:03:01,580
had to do a pretty heavy stuff so you

00:02:58,700 --> 00:03:04,220
had to rely on quite reliable animals

00:03:01,580 --> 00:03:06,500
and firstly we use donkeys mules Sun

00:03:04,220 --> 00:03:10,100
camels to my great things from one place

00:03:06,500 --> 00:03:13,820
to another PP used to migrate data right

00:03:10,100 --> 00:03:15,710
we moved on and we we became clever so

00:03:13,820 --> 00:03:20,840
we invented typing machine it's a great

00:03:15,710 --> 00:03:23,030
way to migrate the next thing when we

00:03:20,840 --> 00:03:24,860
became more clever they actually started

00:03:23,030 --> 00:03:29,500
to use more clever options things like

00:03:24,860 --> 00:03:29,500
copying and pasting has anyone done this

00:03:29,530 --> 00:03:37,850
no one its okay its okay its okay bye

00:03:33,980 --> 00:03:39,350
yeah you're great people we're studying

00:03:37,850 --> 00:03:41,990
copying and pasting a friend of mine

00:03:39,350 --> 00:03:45,680
copied a book of 2,400 pages from

00:03:41,990 --> 00:03:48,770
webpage to an Excel spreadsheet so just

00:03:45,680 --> 00:03:54,020
for your inspiration if you can't get

00:03:48,770 --> 00:03:57,350
things done go back to old days right if

00:03:54,020 --> 00:04:00,500
we move to the next stage we probably

00:03:57,350 --> 00:04:02,810
have braised so big in our organization

00:04:00,500 --> 00:04:05,240
so we don't have time to do this copying

00:04:02,810 --> 00:04:07,610
pasting so what we do we hire somebody

00:04:05,240 --> 00:04:09,860
well actually we don't hire anyone we

00:04:07,610 --> 00:04:11,690
just say somebody that we are going to

00:04:09,860 --> 00:04:13,700
hire that person and at the end we just

00:04:11,690 --> 00:04:15,380
said I'm sorry we don't have budget you

00:04:13,700 --> 00:04:16,790
will be unpaid so and we'll give you

00:04:15,380 --> 00:04:18,700
this wonderful option to be in an

00:04:16,790 --> 00:04:24,460
Internet and a massive big organization

00:04:18,700 --> 00:04:24,460
we don't do that with some do

00:04:25,170 --> 00:04:29,920
we go mother to direct mortar direction

00:04:28,120 --> 00:04:32,560
we want to talk about later land

00:04:29,920 --> 00:04:35,470
obviously we start to move things into

00:04:32,560 --> 00:04:37,990
various sophisticated systems things

00:04:35,470 --> 00:04:40,090
like drupal and then when we moved to

00:04:37,990 --> 00:04:41,650
drupal when there were no day when back

00:04:40,090 --> 00:04:43,990
in the days we didn't have any migration

00:04:41,650 --> 00:04:48,010
support kind of maintained and software

00:04:43,990 --> 00:04:51,910
we used to do a custom script yeah if

00:04:48,010 --> 00:04:56,100
you can read it if you can read it

00:04:51,910 --> 00:04:56,100
thoroughly you'll get a chocolate for me

00:04:56,280 --> 00:05:01,810
right this is my own creation my own

00:04:58,870 --> 00:05:03,730
script the it went very well by the way

00:05:01,810 --> 00:05:06,730
there about fifteen hundred items files

00:05:03,730 --> 00:05:09,700
and some some texts it went well but it

00:05:06,730 --> 00:05:11,380
had no backwards compatibility by that I

00:05:09,700 --> 00:05:13,500
mean it had no rollback options so you

00:05:11,380 --> 00:05:18,730
created nose and they were kind of

00:05:13,500 --> 00:05:21,580
stable stubborn and finally this is the

00:05:18,730 --> 00:05:23,410
thing I mostly like I've done many i've

00:05:21,580 --> 00:05:24,910
done this many times before actually

00:05:23,410 --> 00:05:27,070
started the things in a more clever well

00:05:24,910 --> 00:05:33,100
this is in to insert into statements has

00:05:27,070 --> 00:05:36,150
anyone done this one two three two

00:05:33,100 --> 00:05:38,620
statement don't be afraid nothing weird

00:05:36,150 --> 00:05:42,070
yeah don't be afraid you can be honest

00:05:38,620 --> 00:05:44,230
here yeah we used to do insert answers

00:05:42,070 --> 00:05:46,300
by the way if you can create by this you

00:05:44,230 --> 00:05:48,040
can create users you can take users from

00:05:46,300 --> 00:05:50,140
some weird database or a system of

00:05:48,040 --> 00:05:51,940
tables and just put them into a drupal

00:05:50,140 --> 00:05:56,620
database system for instance this is

00:05:51,940 --> 00:05:59,800
Drupal 7 good since we've covered the

00:05:56,620 --> 00:06:02,380
history we will now see how to do things

00:05:59,800 --> 00:06:05,380
in a proper way in a triple way let's go

00:06:02,380 --> 00:06:09,430
and head and look at the way how we can

00:06:05,380 --> 00:06:12,730
do it yeah so in the modern Drupal

00:06:09,430 --> 00:06:16,060
ecosystem there are two main modules

00:06:12,730 --> 00:06:17,680
that can help us with migrations most

00:06:16,060 --> 00:06:19,330
popular one I would say is the migrate

00:06:17,680 --> 00:06:21,790
module it is the one that we will focus

00:06:19,330 --> 00:06:24,210
on mainly today but it is worth

00:06:21,790 --> 00:06:28,870
mentioning the feeds module which is

00:06:24,210 --> 00:06:31,930
also an alternative migrate module and

00:06:28,870 --> 00:06:35,169
feeds module work in different ways but

00:06:31,930 --> 00:06:37,180
you can do pretty much everything with

00:06:35,169 --> 00:06:40,070
both of them

00:06:37,180 --> 00:06:43,360
but they have very different direction

00:06:40,070 --> 00:06:45,740
different approaches to the migration

00:06:43,360 --> 00:06:48,919
one to the task of doing a migration

00:06:45,740 --> 00:06:53,300
migrate module is really about migrating

00:06:48,919 --> 00:06:54,979
all the data from a an obsolete system

00:06:53,300 --> 00:06:57,229
that you really want to get rid of you

00:06:54,979 --> 00:07:00,740
get all the data out and you put it in

00:06:57,229 --> 00:07:04,360
your system leave the old one behind the

00:07:00,740 --> 00:07:06,770
feeds module is more about synchronizing

00:07:04,360 --> 00:07:10,280
synchronizing data between an old

00:07:06,770 --> 00:07:13,130
environments and a new one it works well

00:07:10,280 --> 00:07:15,560
to do that and you can actually do a

00:07:13,130 --> 00:07:18,370
migration as a synchronization or you

00:07:15,560 --> 00:07:21,530
can do a synchronization as a migration

00:07:18,370 --> 00:07:23,840
but it I think it's important to know

00:07:21,530 --> 00:07:25,820
what kind you're doing and if you want

00:07:23,840 --> 00:07:27,289
to do a synchronization maybe have a

00:07:25,820 --> 00:07:29,300
look at feeds if you want to do a

00:07:27,289 --> 00:07:31,039
migration look at the migrate module and

00:07:29,300 --> 00:07:34,430
this is the one that we're going to talk

00:07:31,039 --> 00:07:38,690
about today so no matter which one you

00:07:34,430 --> 00:07:42,800
use migration always has three basic

00:07:38,690 --> 00:07:46,490
steps the first one is to get your data

00:07:42,800 --> 00:07:48,470
out of the old system then to do some

00:07:46,490 --> 00:07:50,630
processing of the data to make sure that

00:07:48,470 --> 00:07:53,419
it matches the format that you want to

00:07:50,630 --> 00:07:56,870
have and then you want to save that data

00:07:53,419 --> 00:07:59,510
somewhere so you have a source some

00:07:56,870 --> 00:08:03,260
mappings and then you have a destination

00:07:59,510 --> 00:08:07,340
in our example of getting out of prison

00:08:03,260 --> 00:08:10,210
not the legal way first you dig a hole

00:08:07,340 --> 00:08:12,590
you get out then you have some

00:08:10,210 --> 00:08:15,259
transformation that's where most of the

00:08:12,590 --> 00:08:18,470
work happens crawling running swimming

00:08:15,259 --> 00:08:20,659
as fast as possible and then you want to

00:08:18,470 --> 00:08:22,520
make sure that this stays oh it is so

00:08:20,659 --> 00:08:27,470
you change your identity something out

00:08:22,520 --> 00:08:31,490
of that not an expert in terms of doing

00:08:27,470 --> 00:08:34,729
this as an actual migration from an

00:08:31,490 --> 00:08:37,279
external source to a triple website for

00:08:34,729 --> 00:08:39,680
example we could be importing from a CSV

00:08:37,279 --> 00:08:42,589
file or from a sequel database so first

00:08:39,680 --> 00:08:46,579
step is really to get the data the

00:08:42,589 --> 00:08:49,760
second step is to figure out how the old

00:08:46,579 --> 00:08:53,210
data will be mapped to the new data and

00:08:49,760 --> 00:08:56,330
then we actually want to save the we

00:08:53,210 --> 00:08:58,040
want to say the the note or the user or

00:08:56,330 --> 00:09:02,090
anything that we want to save in the

00:08:58,040 --> 00:09:03,680
drupal system and here it's very

00:09:02,090 --> 00:09:06,260
interesting to see this separation

00:09:03,680 --> 00:09:09,470
because it makes it very clear why it's

00:09:06,260 --> 00:09:12,200
helpful to use a system like the migrate

00:09:09,470 --> 00:09:15,620
module we have sources we have

00:09:12,200 --> 00:09:18,350
destinations and we have the mapping the

00:09:15,620 --> 00:09:21,790
sources it's generally something very

00:09:18,350 --> 00:09:26,750
common a CSV file a sequel database and

00:09:21,790 --> 00:09:28,910
API from some external system the

00:09:26,750 --> 00:09:31,130
destination it's also very common it's

00:09:28,910 --> 00:09:34,130
an entity it's a node it's a file it's

00:09:31,130 --> 00:09:36,440
something like this and the only part

00:09:34,130 --> 00:09:38,720
that's really where business logic lies

00:09:36,440 --> 00:09:42,140
the thing that's really project specific

00:09:38,720 --> 00:09:44,210
is a step in the middle and when you use

00:09:42,140 --> 00:09:47,900
my grade module for example you can

00:09:44,210 --> 00:09:50,060
actually reuse an existing source in

00:09:47,900 --> 00:09:54,610
existing destination and just focus on

00:09:50,060 --> 00:09:57,770
the mapping part so how does it work

00:09:54,610 --> 00:10:00,140
here's an example well actually the

00:09:57,770 --> 00:10:03,080
migrate module itself has a very good

00:10:00,140 --> 00:10:07,400
example module and it's an example that

00:10:03,080 --> 00:10:09,590
migrates beer that creates a beer nodes

00:10:07,400 --> 00:10:11,420
the thing though is that it only has

00:10:09,590 --> 00:10:13,040
three different kinds of beer and I

00:10:11,420 --> 00:10:14,840
don't think that it is relevant and

00:10:13,040 --> 00:10:17,780
especially being in the Czech Republic

00:10:14,840 --> 00:10:20,060
we thought that you know three beers

00:10:17,780 --> 00:10:22,490
we've already had more than three

00:10:20,060 --> 00:10:23,600
different kinds of beer at the bar so we

00:10:22,490 --> 00:10:25,600
want to have something that's more

00:10:23,600 --> 00:10:30,560
relevant so we found a website that

00:10:25,600 --> 00:10:32,810
documents czech beer and as you can see

00:10:30,560 --> 00:10:37,130
it's a beautiful websites modern web

00:10:32,810 --> 00:10:40,930
design fully responsive but it could use

00:10:37,130 --> 00:10:40,930
a migration so

00:10:41,320 --> 00:10:48,200
and so we what we did in this case we

00:10:45,800 --> 00:10:50,839
did a copy paste and we put this in a

00:10:48,200 --> 00:10:53,269
spreadsheet which we exported as CSV

00:10:50,839 --> 00:10:56,180
file this was the only copy and pasting

00:10:53,269 --> 00:11:00,709
in step involves in this in this example

00:10:56,180 --> 00:11:04,010
and then we decided to create a module

00:11:00,709 --> 00:11:07,160
so the migrated module it is a module

00:11:04,010 --> 00:11:09,140
but it does not do any work for you so

00:11:07,160 --> 00:11:12,110
it does not declare any migrations it

00:11:09,140 --> 00:11:14,480
declares the tools and in order to use

00:11:12,110 --> 00:11:17,360
my grade module you have to create your

00:11:14,480 --> 00:11:21,920
own module which will build on top of

00:11:17,360 --> 00:11:24,410
the manipulation my great framework so

00:11:21,920 --> 00:11:26,779
here this is just the info file nothing

00:11:24,410 --> 00:11:28,519
special about about this we depend on

00:11:26,779 --> 00:11:31,940
the migrated module and we have an

00:11:28,519 --> 00:11:37,279
include file which which I'll get to in

00:11:31,940 --> 00:11:40,940
just a second so there's a module file

00:11:37,279 --> 00:11:42,829
the my module name module this one stays

00:11:40,940 --> 00:11:44,690
empty you don't need to have anything in

00:11:42,829 --> 00:11:47,329
there the migrated module well a

00:11:44,690 --> 00:11:49,250
migration really happens and it's a

00:11:47,329 --> 00:11:51,800
separate thing it does not happen while

00:11:49,250 --> 00:11:55,130
your website is running its separate

00:11:51,800 --> 00:11:57,680
step so for this we have a separate

00:11:55,130 --> 00:12:00,709
include file the module named my grey

00:11:57,680 --> 00:12:03,380
tank and there we implement hook my

00:12:00,709 --> 00:12:05,540
great API there's two things that we

00:12:03,380 --> 00:12:08,089
need to define first the version of the

00:12:05,540 --> 00:12:10,940
API that want to use this is pretty

00:12:08,089 --> 00:12:14,029
self-explanatory and then we want to

00:12:10,940 --> 00:12:16,910
define a list of the migrations that we

00:12:14,029 --> 00:12:18,940
want to do so one specific migration in

00:12:16,910 --> 00:12:21,740
this case would be I want to import

00:12:18,940 --> 00:12:24,949
content front of this type I want to

00:12:21,740 --> 00:12:29,000
import users I want to import a list of

00:12:24,949 --> 00:12:31,910
breweries for example so we define this

00:12:29,000 --> 00:12:34,850
and we we just indicates the class name

00:12:31,910 --> 00:12:37,459
this class is going to be in a separate

00:12:34,850 --> 00:12:41,570
include file which we included in our

00:12:37,459 --> 00:12:44,029
info file and here we just extend the

00:12:41,570 --> 00:12:49,610
base migration class from the migrate

00:12:44,029 --> 00:12:51,779
module there's one only one method that

00:12:49,610 --> 00:12:56,639
we need to override from base from the

00:12:51,779 --> 00:12:59,069
biz class it is the constructor so we

00:12:56,639 --> 00:13:02,370
just override constructor called the

00:12:59,069 --> 00:13:05,040
parent constructor first and everything

00:13:02,370 --> 00:13:08,970
else that follows is happening inside of

00:13:05,040 --> 00:13:12,180
the constructor first step we just give

00:13:08,970 --> 00:13:14,279
a good description I think Czech beer is

00:13:12,180 --> 00:13:19,050
now in this case not very descriptive

00:13:14,279 --> 00:13:21,420
but it works the second step is to

00:13:19,050 --> 00:13:23,819
define what other migrations need to

00:13:21,420 --> 00:13:27,089
happen before this so typically if you

00:13:23,819 --> 00:13:29,449
want to associate nodes with users you

00:13:27,089 --> 00:13:32,339
would migrate the user first and then

00:13:29,449 --> 00:13:36,389
when you import the notes you attach

00:13:32,339 --> 00:13:39,540
notes to the proper users in this case

00:13:36,389 --> 00:13:41,819
well we could have had an example with

00:13:39,540 --> 00:13:44,459
well you want to improve import

00:13:41,819 --> 00:13:46,889
breweries first and then import the beer

00:13:44,459 --> 00:13:49,079
some playing at this this is with the

00:13:46,889 --> 00:13:51,389
place where we'd have done it but in

00:13:49,079 --> 00:13:56,490
this case nothing nothing needs to be

00:13:51,389 --> 00:13:58,889
done one more thing that we need to do

00:13:56,490 --> 00:14:01,470
is we need to establish a mapping

00:13:58,889 --> 00:14:03,360
between the old pieces of contents and

00:14:01,470 --> 00:14:06,629
the new pieces of contents to figure out

00:14:03,360 --> 00:14:08,459
what what were the identifiers in the

00:14:06,629 --> 00:14:10,259
old system and what are they the new

00:14:08,459 --> 00:14:12,240
system this is also something that's

00:14:10,259 --> 00:14:15,269
really important so that we can roll

00:14:12,240 --> 00:14:18,089
back the the content that we imported so

00:14:15,269 --> 00:14:21,269
can we can test the the important

00:14:18,089 --> 00:14:23,490
multiple times and the migrate module

00:14:21,269 --> 00:14:26,220
has a helper class that pretty much does

00:14:23,490 --> 00:14:29,519
all the word for this we just give it

00:14:26,220 --> 00:14:32,730
the ID of the old system the ideas in

00:14:29,519 --> 00:14:34,709
the new system and it just goes ahead

00:14:32,730 --> 00:14:37,769
and creates a table and establishes the

00:14:34,709 --> 00:14:42,779
mapping as the as the migration gets

00:14:37,769 --> 00:14:44,730
gets run now we get into the part that I

00:14:42,779 --> 00:14:46,769
talked about before we have a source and

00:14:44,730 --> 00:14:50,249
a destination we're going to start with

00:14:46,769 --> 00:14:52,769
the source in this case we have a CSV

00:14:50,249 --> 00:14:55,620
file so we just indicate where the CSV

00:14:52,769 --> 00:15:00,480
file is located in on the file system

00:14:55,620 --> 00:15:02,370
and we define explicitly which which

00:15:00,480 --> 00:15:04,320
columns are available in the CSV file

00:15:02,370 --> 00:15:06,510
you can also use the headers

00:15:04,320 --> 00:15:09,030
CSV file that works too but sometimes

00:15:06,510 --> 00:15:10,950
it's better to define things formally so

00:15:09,030 --> 00:15:12,780
you know exactly what to expect you know

00:15:10,950 --> 00:15:18,390
exactly what ideas you're going to have

00:15:12,780 --> 00:15:24,240
and well and then we just add em the

00:15:18,390 --> 00:15:25,710
source to to our migration same thing

00:15:24,240 --> 00:15:28,140
for the destination but this time it's

00:15:25,710 --> 00:15:31,140
even simpler we just want to save this

00:15:28,140 --> 00:15:33,510
into node types into nodes of the type

00:15:31,140 --> 00:15:37,440
beer which we have defined previously

00:15:33,510 --> 00:15:42,750
and this is the only thing you need to

00:15:37,440 --> 00:15:44,570
do to set the destination now comes the

00:15:42,750 --> 00:15:46,920
mapping not the mapping between

00:15:44,570 --> 00:15:50,130
individual pieces of content but really

00:15:46,920 --> 00:15:51,900
about the fields available on these

00:15:50,130 --> 00:15:54,750
pieces of content so in this case we

00:15:51,900 --> 00:15:57,630
want to map the columns of the CSV file

00:15:54,750 --> 00:16:01,800
that we are important to the fields on

00:15:57,630 --> 00:16:03,920
the nodes that we want to create so this

00:16:01,800 --> 00:16:06,480
is something that we can do in code and

00:16:03,920 --> 00:16:09,500
this is also something that you can do

00:16:06,480 --> 00:16:14,850
through the user into the user interface

00:16:09,500 --> 00:16:17,190
starting with the 2.62 detects so this

00:16:14,850 --> 00:16:19,770
is it's a it's a release candidate edna

00:16:17,190 --> 00:16:22,320
boned so if you just do dress GL migrate

00:16:19,770 --> 00:16:24,660
you will not get this version but h

00:16:22,320 --> 00:16:26,850
should be a should be out soon and if

00:16:24,660 --> 00:16:30,930
you explicitly want this one you can

00:16:26,850 --> 00:16:34,200
definitely get it very stable and here

00:16:30,930 --> 00:16:36,900
you can set the mapping not through code

00:16:34,200 --> 00:16:38,820
but through user interface so if you're

00:16:36,900 --> 00:16:41,850
a developer you will not get a huge

00:16:38,820 --> 00:16:44,550
advantage of that but what is very nice

00:16:41,850 --> 00:16:47,490
is that well this mapping is something

00:16:44,550 --> 00:16:49,290
that really often requires input from

00:16:47,490 --> 00:16:51,750
the customer and yannis we'll talk a

00:16:49,290 --> 00:16:53,850
little bit more about that later but

00:16:51,750 --> 00:16:56,010
having a user interface like this

00:16:53,850 --> 00:16:59,220
actually makes it possible to take this

00:16:56,010 --> 00:17:01,830
into the meeting room and say well you

00:16:59,220 --> 00:17:03,720
have this and where should what should

00:17:01,830 --> 00:17:06,410
this be mapped to and you can really

00:17:03,720 --> 00:17:09,420
have a conversation with your customer

00:17:06,410 --> 00:17:10,949
through this user interface this is no

00:17:09,420 --> 00:17:15,720
Sonia this is not something that you can

00:17:10,949 --> 00:17:17,520
do with writing code and finally through

00:17:15,720 --> 00:17:17,970
user interface you can also select a

00:17:17,520 --> 00:17:22,350
migraine

00:17:17,970 --> 00:17:25,319
tell it you to import and here we see 16

00:17:22,350 --> 00:17:30,000
beers types were imported not very much

00:17:25,319 --> 00:17:32,210
but for example it works so as a proof

00:17:30,000 --> 00:17:34,919
that it works we've actually we have

00:17:32,210 --> 00:17:38,700
functional code that this does this this

00:17:34,919 --> 00:17:41,070
is the same data exported from the front

00:17:38,700 --> 00:17:44,159
that web page into a triple website all

00:17:41,070 --> 00:17:48,630
the nodes were created no copy pasted

00:17:44,159 --> 00:17:51,240
involved in the migration itself and of

00:17:48,630 --> 00:17:53,700
course you also have ad rush commands

00:17:51,240 --> 00:17:55,799
that can rent the migrations can roll

00:17:53,700 --> 00:17:57,419
back the migration all the operations

00:17:55,799 --> 00:17:59,909
that you can do in the front end you can

00:17:57,419 --> 00:18:03,450
also glue them through the command line

00:17:59,909 --> 00:18:06,299
interface via trash and this is very

00:18:03,450 --> 00:18:08,580
helpful not because well it's cool and

00:18:06,299 --> 00:18:10,080
you can use the command line but this is

00:18:08,580 --> 00:18:12,890
something that you can trigger as part

00:18:10,080 --> 00:18:16,470
of a script like a deployment script or

00:18:12,890 --> 00:18:18,090
continuous integration stripped or if

00:18:16,470 --> 00:18:22,350
you want to have something that runs

00:18:18,090 --> 00:18:24,630
regularly you can also use a cron job so

00:18:22,350 --> 00:18:27,330
this is a very very powerful tool and

00:18:24,630 --> 00:18:31,080
you can really integrate this into much

00:18:27,330 --> 00:18:33,480
bigger workflows and now we're going to

00:18:31,080 --> 00:18:36,210
talk a little bit about the less

00:18:33,480 --> 00:18:39,240
technical aspect but just as important

00:18:36,210 --> 00:18:41,490
if not even more important planning and

00:18:39,240 --> 00:18:46,650
collaboration before the migration

00:18:41,490 --> 00:18:48,600
happens this way this floor n just

00:18:46,650 --> 00:18:50,370
demonstrated the the migration module

00:18:48,600 --> 00:18:52,559
itself it's quite easy to set up things

00:18:50,370 --> 00:18:54,780
you can set up field mappings use

00:18:52,559 --> 00:18:56,039
various sorts of sequel CSVs and things

00:18:54,780 --> 00:18:58,049
like that but if you move to more

00:18:56,039 --> 00:18:59,940
sophisticated systems you get maybe more

00:18:58,049 --> 00:19:02,090
data you get more sophisticated data

00:18:59,940 --> 00:19:05,010
stored in many columns or many databases

00:19:02,090 --> 00:19:06,929
you would definitely need to go a couple

00:19:05,010 --> 00:19:08,730
of steps before you actually start to do

00:19:06,929 --> 00:19:11,130
any coding or even throwing about

00:19:08,730 --> 00:19:13,320
stinking about coding so let's go ahead

00:19:11,130 --> 00:19:16,309
and move to a very important subject

00:19:13,320 --> 00:19:18,840
planning and I've knotted myself down

00:19:16,309 --> 00:19:20,700
from experience what things you have to

00:19:18,840 --> 00:19:22,350
go through and what I would recommend to

00:19:20,700 --> 00:19:25,830
go through before you actually move to

00:19:22,350 --> 00:19:28,320
any coding creating modules or maybe

00:19:25,830 --> 00:19:31,480
thinking when to do first thing field

00:19:28,320 --> 00:19:33,880
mapping you've showed an example it's

00:19:31,480 --> 00:19:35,800
easy to do in terms of an interface and

00:19:33,880 --> 00:19:37,420
the programming but field mapping here I

00:19:35,800 --> 00:19:39,880
mean you have to agree with your

00:19:37,420 --> 00:19:42,670
customer which fields go where you

00:19:39,880 --> 00:19:45,010
sometimes and have not like we had five

00:19:42,670 --> 00:19:46,990
five or six columns yeah five or six

00:19:45,010 --> 00:19:48,700
columns that's that's not much that's

00:19:46,990 --> 00:19:51,100
really easy but if you can have

00:19:48,700 --> 00:19:53,710
sometimes 10 20 multiple columns you may

00:19:51,100 --> 00:19:55,890
need to join other tables so the system

00:19:53,710 --> 00:19:59,470
you create at the end it needs a really

00:19:55,890 --> 00:20:01,960
really thorough look through it and just

00:19:59,470 --> 00:20:04,360
make sense to discuss it which fields in

00:20:01,960 --> 00:20:06,250
order to agree with a customer what is

00:20:04,360 --> 00:20:07,840
the end result he wants to see this is

00:20:06,250 --> 00:20:09,850
an initial thing you have to do you have

00:20:07,840 --> 00:20:11,080
to do field mapping the one of the

00:20:09,850 --> 00:20:14,260
easiest things you just create a

00:20:11,080 --> 00:20:16,870
spreadsheet and you if customer has

00:20:14,260 --> 00:20:18,670
given you certain data you create a

00:20:16,870 --> 00:20:20,500
selection of fields you can offer from

00:20:18,670 --> 00:20:21,850
the source and a sexual external field

00:20:20,500 --> 00:20:24,940
you have developed on your Drupal

00:20:21,850 --> 00:20:26,590
project and you just go to a meeting and

00:20:24,940 --> 00:20:27,850
agree which fields go where you can use

00:20:26,590 --> 00:20:30,520
the same intervals we've just

00:20:27,850 --> 00:20:33,880
demonstrated second important thing is

00:20:30,520 --> 00:20:36,250
time when when you do migration it

00:20:33,880 --> 00:20:37,930
really matters sometimes it your

00:20:36,250 --> 00:20:40,330
migration is a crucial part of your work

00:20:37,930 --> 00:20:41,950
you are the way how are your project is

00:20:40,330 --> 00:20:43,690
set up you're not able to do any further

00:20:41,950 --> 00:20:45,010
work if you haven't done migration if

00:20:43,690 --> 00:20:47,500
you haven't pulled the content from

00:20:45,010 --> 00:20:49,390
somewhere so it needs to be planned when

00:20:47,500 --> 00:20:51,220
how you need to discuss with the

00:20:49,390 --> 00:20:53,560
customer things like what systems and

00:20:51,220 --> 00:20:55,600
stuff like that what time maybe the

00:20:53,560 --> 00:20:57,490
site's the project sites they're not

00:20:55,600 --> 00:20:59,680
allowed to have a massive downtime they

00:20:57,490 --> 00:21:02,500
can have only very short periods you can

00:20:59,680 --> 00:21:05,020
switch off the site and think various

00:21:02,500 --> 00:21:09,190
things like that so planet when agree on

00:21:05,020 --> 00:21:13,000
that amount of quality of legacy data

00:21:09,190 --> 00:21:15,400
third another crucial aspect first thing

00:21:13,000 --> 00:21:17,740
amount so how many how much data you

00:21:15,400 --> 00:21:20,920
have the type of data whether there are

00:21:17,740 --> 00:21:23,170
files whether there are files like x

00:21:20,920 --> 00:21:26,410
files i mean images documents PDFs and

00:21:23,170 --> 00:21:28,780
cetera etc the amount of data helmet how

00:21:26,410 --> 00:21:30,490
many are those files or how much rose

00:21:28,780 --> 00:21:32,020
you have in your database tables you

00:21:30,490 --> 00:21:34,120
want to migrate or how much how many

00:21:32,020 --> 00:21:35,980
rows you have in your CSV file or XML

00:21:34,120 --> 00:21:42,120
file you need to go through them and

00:21:35,980 --> 00:21:44,020
just see data quality the fourth one

00:21:42,120 --> 00:21:45,370
Laurieann will demonstrate you an

00:21:44,020 --> 00:21:48,460
example about not the

00:21:45,370 --> 00:21:50,590
best source data quality but these

00:21:48,460 --> 00:21:52,450
things can happen so we make sure that

00:21:50,590 --> 00:21:55,470
your the data quality you are satisfied

00:21:52,450 --> 00:21:57,250
as an organization as a implement eight

00:21:55,470 --> 00:21:59,380
implementation obviously the one who

00:21:57,250 --> 00:22:01,210
implements the site does the migration

00:21:59,380 --> 00:22:03,460
in your work for make sure that you are

00:22:01,210 --> 00:22:05,950
kind of less more or less satisfied with

00:22:03,460 --> 00:22:08,290
the quality of data any weird character

00:22:05,950 --> 00:22:09,610
sets we will talk about character

00:22:08,290 --> 00:22:13,420
encoding and things like that they have

00:22:09,610 --> 00:22:14,860
to be whether removed or encoded decoded

00:22:13,420 --> 00:22:16,540
or a bit of just discussed with a

00:22:14,860 --> 00:22:19,059
customer that they might be some issues

00:22:16,540 --> 00:22:21,070
and migration work well that's that's a

00:22:19,059 --> 00:22:22,900
crucial import all those five steps this

00:22:21,070 --> 00:22:26,110
is your work for when to do one how to

00:22:22,900 --> 00:22:27,610
do and things why to do and in my

00:22:26,110 --> 00:22:32,290
example a little bit later i'll

00:22:27,610 --> 00:22:34,630
demonstrate white matters the next thing

00:22:32,290 --> 00:22:37,450
collaboration this is a crucial thing

00:22:34,630 --> 00:22:39,490
because when you migrate this is like

00:22:37,450 --> 00:22:41,530
anyone can imagine it's like a building

00:22:39,490 --> 00:22:44,559
a house you built a house and you have

00:22:41,530 --> 00:22:46,840
various stages you the initial stage you

00:22:44,559 --> 00:22:49,420
have to set up your fundament all the

00:22:46,840 --> 00:22:51,970
concrete works you had to dig the

00:22:49,420 --> 00:22:53,890
pipelines so make sure that the

00:22:51,970 --> 00:22:55,990
electricity is there all the wired

00:22:53,890 --> 00:22:58,030
networks and things like that but your

00:22:55,990 --> 00:23:00,580
client it doesn't seem actually the

00:22:58,030 --> 00:23:02,050
result you just do something you do lots

00:23:00,580 --> 00:23:04,300
of mess the mud and things like that so

00:23:02,050 --> 00:23:05,830
there should be some collaboration

00:23:04,300 --> 00:23:08,080
involved you should demonstrate your

00:23:05,830 --> 00:23:09,880
customer what's going on why it is

00:23:08,080 --> 00:23:11,890
important and things like that and by

00:23:09,880 --> 00:23:13,809
the event in about don't know ninety

00:23:11,890 --> 00:23:16,450
five percent of cases customer will not

00:23:13,809 --> 00:23:18,400
use the end result of your work by that

00:23:16,450 --> 00:23:21,460
I mean they're your code your code will

00:23:18,400 --> 00:23:24,970
not be reused so collaborate between

00:23:21,460 --> 00:23:26,920
team developers you can do mall you can

00:23:24,970 --> 00:23:28,929
work in currently on the same tasks you

00:23:26,920 --> 00:23:31,150
can have multiple migrations one person

00:23:28,929 --> 00:23:33,400
can do the work on one migration other

00:23:31,150 --> 00:23:34,870
can do the other one collaborate so what

00:23:33,400 --> 00:23:37,330
dependencies you know which should go

00:23:34,870 --> 00:23:38,980
first with clients always try to

00:23:37,330 --> 00:23:40,420
demonstrate them as long as you are

00:23:38,980 --> 00:23:42,220
ready with just a simple part of

00:23:40,420 --> 00:23:45,490
migration try to demonstrate them so it

00:23:42,220 --> 00:23:47,110
works to build trust work for

00:23:45,490 --> 00:23:48,940
integration again try to integrate

00:23:47,110 --> 00:23:51,130
within your projects work for time to

00:23:48,940 --> 00:23:53,170
understand where you are why you are how

00:23:51,130 --> 00:23:56,260
to do it what when it's the best time to

00:23:53,170 --> 00:23:58,870
do it and things like that and yeah

00:23:56,260 --> 00:24:02,050
those are kind of three basic rules for

00:23:58,870 --> 00:24:04,000
our correlation and let's now go ahead

00:24:02,050 --> 00:24:07,840
and move to more interesting but let's

00:24:04,000 --> 00:24:11,350
look at some examples so our things

00:24:07,840 --> 00:24:14,230
we've done mine is first this is just

00:24:11,350 --> 00:24:17,140
recently finished and this is the one

00:24:14,230 --> 00:24:19,120
which I can't show you because this the

00:24:17,140 --> 00:24:21,580
work is still going on we've done the

00:24:19,120 --> 00:24:23,230
migration but the work is still going on

00:24:21,580 --> 00:24:25,059
this is our word poem so I can't show

00:24:23,230 --> 00:24:29,170
you what I'll just go through this is a

00:24:25,059 --> 00:24:32,740
suissa Red Cross website about 1500

00:24:29,170 --> 00:24:35,890
nodes and about same amount of files we

00:24:32,740 --> 00:24:38,980
migrated maybe not a big figure but it

00:24:35,890 --> 00:24:41,080
was pretty interesting and Quentin was

00:24:38,980 --> 00:24:43,510
migrated from Tycho three yeah it was

00:24:41,080 --> 00:24:45,160
migrated of systems of type of three

00:24:43,510 --> 00:24:47,679
mixed together I was various custom

00:24:45,160 --> 00:24:49,780
builds so actually if you look at table

00:24:47,679 --> 00:24:51,040
systems or the dumps we received from a

00:24:49,780 --> 00:24:52,990
customer would you didn't have any

00:24:51,040 --> 00:24:57,010
prefixes typical to type our systems

00:24:52,990 --> 00:24:58,840
there were just some tables and the way

00:24:57,010 --> 00:25:00,460
our kind of customer wanted to be them

00:24:58,840 --> 00:25:02,440
displayed in a various ways you got

00:25:00,460 --> 00:25:05,140
those fifty hundred fifteen hundred rose

00:25:02,440 --> 00:25:07,210
about thirty five columns and he wanted

00:25:05,140 --> 00:25:10,090
to pull the data he wanted to create

00:25:07,210 --> 00:25:11,920
entities file entities nodes not typed

00:25:10,090 --> 00:25:13,390
different things taxonomies them and

00:25:11,920 --> 00:25:16,020
things like that it has to be done by

00:25:13,390 --> 00:25:18,700
our migration it had to be done sorry

00:25:16,020 --> 00:25:20,530
nevertheless and what was the

00:25:18,700 --> 00:25:23,920
interesting thing customer new Drupal so

00:25:20,530 --> 00:25:25,420
he knew possibilities of Drupal I don't

00:25:23,920 --> 00:25:26,950
know why maybe he read the lots of blogs

00:25:25,420 --> 00:25:29,710
about the migration but he knew very

00:25:26,950 --> 00:25:31,510
well that that's possible so he knew

00:25:29,710 --> 00:25:33,790
Drupal in the same time we were always

00:25:31,510 --> 00:25:36,220
getting to a quick feedback so anytime I

00:25:33,790 --> 00:25:37,929
I sent him some some queries so message

00:25:36,220 --> 00:25:39,760
I don't understand your you're poor

00:25:37,929 --> 00:25:41,440
you're saying to me or I'm not fully

00:25:39,760 --> 00:25:43,150
sure whether this has to go there or

00:25:41,440 --> 00:25:45,610
whether this has to be categorized it

00:25:43,150 --> 00:25:47,920
was so easy to work with him easy easy

00:25:45,610 --> 00:25:50,650
feedback he spoke perfect Drupal

00:25:47,920 --> 00:25:52,929
language perfect Drupal language you

00:25:50,650 --> 00:25:54,580
understood everything customers

00:25:52,929 --> 00:25:56,530
suppliers field mapping so we just

00:25:54,580 --> 00:25:58,540
created a small spreadsheet having you

00:25:56,530 --> 00:26:00,070
whatever we just stopped you had a list

00:25:58,540 --> 00:26:02,110
of fields we have in a source who had a

00:26:00,070 --> 00:26:04,000
list of fields we've we've created based

00:26:02,110 --> 00:26:06,520
in your specification and can you please

00:26:04,000 --> 00:26:08,800
just add a third column and give us what

00:26:06,520 --> 00:26:12,010
you want to see if you did that a

00:26:08,800 --> 00:26:12,760
reusable meeting notes perfect thing he

00:26:12,010 --> 00:26:15,700
created

00:26:12,760 --> 00:26:18,070
sana make excited categorization by so

00:26:15,700 --> 00:26:19,870
how I was able to make them are usable

00:26:18,070 --> 00:26:21,880
so what I did i downloaded that small

00:26:19,870 --> 00:26:24,220
really small spreadsheet as a csv file

00:26:21,880 --> 00:26:26,800
and i created a parser which just parse

00:26:24,220 --> 00:26:29,140
the dating that CSV and that gave me the

00:26:26,800 --> 00:26:31,000
categorization of items because

00:26:29,140 --> 00:26:32,230
sometimes in the source you may not get

00:26:31,000 --> 00:26:34,450
the data you want to see in a

00:26:32,230 --> 00:26:36,280
destination so there is a now there is a

00:26:34,450 --> 00:26:38,230
possibility for you to apply some

00:26:36,280 --> 00:26:41,680
callbacks and function which you can

00:26:38,230 --> 00:26:45,040
parse the data and then put it back to a

00:26:41,680 --> 00:26:47,710
system and obviously based on all this

00:26:45,040 --> 00:26:50,470
we built an initial trust on a very very

00:26:47,710 --> 00:26:52,060
good communication it's kind of here is

00:26:50,470 --> 00:26:53,680
bonded so quickly there were no emails

00:26:52,060 --> 00:26:56,770
at all we chatted on the skype loves

00:26:53,680 --> 00:27:00,850
Lisa nice and easy way and I think next

00:26:56,770 --> 00:27:03,970
one is a bit more interesting yeah with

00:27:00,850 --> 00:27:06,040
more data yes so the this is for a

00:27:03,970 --> 00:27:09,390
different project we were not migrating

00:27:06,040 --> 00:27:14,230
from a website but we were migrating

00:27:09,390 --> 00:27:16,240
from a commercial database so we needed

00:27:14,230 --> 00:27:19,870
to have a list of all commercial

00:27:16,240 --> 00:27:22,720
addresses in Germany that's about three

00:27:19,870 --> 00:27:28,210
and a half million addresses with

00:27:22,720 --> 00:27:31,750
metadata and it's a lot of data so we we

00:27:28,210 --> 00:27:33,820
ordered when we bought this and the

00:27:31,750 --> 00:27:35,170
place where we bought it they say okay

00:27:33,820 --> 00:27:37,060
it's going to be there in three days and

00:27:35,170 --> 00:27:40,480
you're like why what does it taste long

00:27:37,060 --> 00:27:43,480
like well that's the time it takes for

00:27:40,480 --> 00:27:46,810
the mail to deliver the DVD like okay

00:27:43,480 --> 00:27:49,060
that's so just for a reminder this is

00:27:46,810 --> 00:27:51,730
what a DVD looks like so it's it's a

00:27:49,060 --> 00:27:55,300
round disk that's George data and it can

00:27:51,730 --> 00:27:58,360
be a good amount of data so it's three

00:27:55,300 --> 00:28:02,140
gigabytes over three gigabytes of text

00:27:58,360 --> 00:28:06,250
data and this I mean it's a CSV file so

00:28:02,140 --> 00:28:09,150
relatively standard format but Excel

00:28:06,250 --> 00:28:14,610
can't open it because it's too big no no

00:28:09,150 --> 00:28:19,120
no Excel alternative can open it and and

00:28:14,610 --> 00:28:22,240
well it's also too big for for PHP to

00:28:19,120 --> 00:28:24,669
open the file at once so the only way to

00:28:22,240 --> 00:28:28,690
do this is to go through chunks

00:28:24,669 --> 00:28:32,259
and by default the my grades CSV source

00:28:28,690 --> 00:28:34,779
does not do that so we we ended up just

00:28:32,259 --> 00:28:37,659
killing our web server well local

00:28:34,779 --> 00:28:39,039
environments but but still trying to do

00:28:37,659 --> 00:28:41,889
that important there's actually a quick

00:28:39,039 --> 00:28:45,029
trick which I will get to and but

00:28:41,889 --> 00:28:49,840
there's one well a couple more issues

00:28:45,029 --> 00:28:52,779
it's well the the import well when you

00:28:49,840 --> 00:28:54,639
import a hundred items or what I showed

00:28:52,779 --> 00:28:56,710
in my examples you see exactly how many

00:28:54,639 --> 00:28:59,889
milliseconds it took and this is very

00:28:56,710 --> 00:29:02,350
important because originally we wanted

00:28:59,889 --> 00:29:05,499
to import the data we also had a

00:29:02,350 --> 00:29:06,820
separate source for logos for each of

00:29:05,499 --> 00:29:08,950
the companies that we wanted to

00:29:06,820 --> 00:29:12,809
represent and we wanted to save the

00:29:08,950 --> 00:29:16,539
files and we realized that at the speed

00:29:12,809 --> 00:29:19,600
at which things were going it would have

00:29:16,539 --> 00:29:21,850
taken two and a half months of just

00:29:19,600 --> 00:29:25,330
letting the script run if we want to

00:29:21,850 --> 00:29:27,580
migrate all the data so this you know

00:29:25,330 --> 00:29:31,149
the the time it takes and how many you

00:29:27,580 --> 00:29:33,639
get how many items important per seconds

00:29:31,149 --> 00:29:35,409
or per minute this is very important

00:29:33,639 --> 00:29:39,129
information because if you have a lot of

00:29:35,409 --> 00:29:42,419
data it's going to matter and in the end

00:29:39,129 --> 00:29:46,899
well we ended up making some compromises

00:29:42,419 --> 00:29:50,830
separating the logo import from the from

00:29:46,899 --> 00:29:53,470
the the just plain text import and we

00:29:50,830 --> 00:29:56,350
were able to optimize this to run into

00:29:53,470 --> 00:29:58,509
well in 20 minutes so it's still a good

00:29:56,350 --> 00:30:02,470
amount of time but it's still a lot less

00:29:58,509 --> 00:30:08,970
than 20 med and over two months and also

00:30:02,470 --> 00:30:12,549
the file was encoded as as a windows 8

00:30:08,970 --> 00:30:14,529
encoding and so all the special

00:30:12,549 --> 00:30:17,739
characters all the accents which of

00:30:14,529 --> 00:30:20,649
course matter a lot in Germany well they

00:30:17,739 --> 00:30:22,570
were all messed up and so we it's pretty

00:30:20,649 --> 00:30:25,359
easy to fix you just need to fix the

00:30:22,570 --> 00:30:27,009
file encoding before you import it but

00:30:25,359 --> 00:30:29,710
it this is really something that you

00:30:27,009 --> 00:30:32,769
have to notice well you are testing the

00:30:29,710 --> 00:30:37,149
import because there is really no way to

00:30:32,769 --> 00:30:37,639
do to fix it later and well there are

00:30:37,149 --> 00:30:39,469
ways but

00:30:37,639 --> 00:30:41,899
it's really you really don't want to be

00:30:39,469 --> 00:30:44,749
doing that so it's it's very important

00:30:41,899 --> 00:30:49,419
to recognize text encoding issues first

00:30:44,749 --> 00:30:49,419
and and really be able to address them

00:30:49,809 --> 00:30:56,450
when you want to migrate a very big data

00:30:53,989 --> 00:30:58,429
source and this applies to the CSV

00:30:56,450 --> 00:31:01,009
source but also if you want to migrate a

00:30:58,429 --> 00:31:02,479
lot of data from from a sequel file well

00:31:01,009 --> 00:31:04,249
from a seagull that it is and you want

00:31:02,479 --> 00:31:06,109
to make a Kree if you create for

00:31:04,249 --> 00:31:09,859
everything it's also not going to work

00:31:06,109 --> 00:31:12,109
that well so what he wants to do is in

00:31:09,859 --> 00:31:14,749
well and the thing that that actually

00:31:12,109 --> 00:31:17,690
causes the problem is that when you try

00:31:14,749 --> 00:31:19,519
to import a CSV file my grade module

00:31:17,690 --> 00:31:21,679
will try to figure out how many lines

00:31:19,519 --> 00:31:23,570
are in there and the way it does that it

00:31:21,679 --> 00:31:27,320
goes through every line and just count

00:31:23,570 --> 00:31:31,009
them so if you have a lot of lines like

00:31:27,320 --> 00:31:33,139
over three millions then it will just

00:31:31,009 --> 00:31:36,139
run continued until it runs out of

00:31:33,139 --> 00:31:39,079
memory so what you really want to do

00:31:36,139 --> 00:31:41,599
there is to just say well I know how

00:31:39,079 --> 00:31:45,499
many how much data isn't there more or

00:31:41,599 --> 00:31:49,070
less and I well don't count them just go

00:31:45,499 --> 00:31:51,709
through it and there's this skip count

00:31:49,070 --> 00:31:53,989
parameter that you can pass you any any

00:31:51,709 --> 00:31:55,940
source and it actually makes it work so

00:31:53,989 --> 00:32:00,289
that you can really advanced chunk by

00:31:55,940 --> 00:32:04,999
chunk and it works really well now we

00:32:00,289 --> 00:32:07,779
have one more example and lucky to you

00:32:04,999 --> 00:32:10,339
this is live you can see this website

00:32:07,779 --> 00:32:12,200
this says this is quite an interesting

00:32:10,339 --> 00:32:14,629
way it's a property website just there's

00:32:12,200 --> 00:32:17,269
white not fully understand what it does

00:32:14,629 --> 00:32:19,639
you can sign up you can post your ad and

00:32:17,269 --> 00:32:21,409
then others can rent it so it's a fairly

00:32:19,639 --> 00:32:23,329
interesting system and this is an

00:32:21,409 --> 00:32:25,909
example of migrating from on Drupal to

00:32:23,329 --> 00:32:28,129
another one it's kind of we are we had a

00:32:25,909 --> 00:32:29,719
dry speaking about the Drupal 8 so I

00:32:28,129 --> 00:32:32,149
think there will be a pretty interesting

00:32:29,719 --> 00:32:33,919
subject in the next six seven months how

00:32:32,149 --> 00:32:36,049
to migrate from all dopo systems to you

00:32:33,919 --> 00:32:39,829
and this is exactly an example this is

00:32:36,049 --> 00:32:41,599
Drupal 6 to dribble 7 not kind of a

00:32:39,829 --> 00:32:43,969
straight migration site had to be

00:32:41,599 --> 00:32:45,409
relative redeveloped so it's a different

00:32:43,969 --> 00:32:48,619
completely different look but it was too

00:32:45,409 --> 00:32:50,659
so yeah I think we faced a couple of

00:32:48,619 --> 00:32:53,570
challenges a couple

00:32:50,659 --> 00:32:56,359
yeah it was sophisticated list of

00:32:53,570 --> 00:32:57,859
destination fields the way our customer

00:32:56,359 --> 00:32:59,830
wanted to display in the way here we

00:32:57,859 --> 00:33:02,869
wanted site to work we had a lots of

00:32:59,830 --> 00:33:04,999
fields were in a various formats we had

00:33:02,869 --> 00:33:07,190
a lot of field collections which is one

00:33:04,999 --> 00:33:09,919
of the challenging situations in the

00:33:07,190 --> 00:33:12,710
migration we had lots of entities

00:33:09,919 --> 00:33:15,649
creating when the node gets saved and

00:33:12,710 --> 00:33:17,029
things like that it was people don't do

00:33:15,649 --> 00:33:18,799
that these days but this was a

00:33:17,029 --> 00:33:23,419
requirement ubercart to hoob ikot

00:33:18,799 --> 00:33:25,159
migration so 2 to 3 we did that yes we

00:33:23,419 --> 00:33:27,739
it was a challenge in the first instance

00:33:25,159 --> 00:33:31,099
because uber caught it doesn't kind of

00:33:27,739 --> 00:33:32,960
comply to any typical duple way just its

00:33:31,099 --> 00:33:35,419
kind of entity but in the same way it's

00:33:32,960 --> 00:33:38,599
a custom table so it's kind of you don't

00:33:35,419 --> 00:33:40,369
know what it is what you can do there's

00:33:38,599 --> 00:33:42,889
lots of custom entities as I mentioned

00:33:40,369 --> 00:33:44,659
already creating getting created when

00:33:42,889 --> 00:33:48,139
the when you create and when you add a

00:33:44,659 --> 00:33:51,049
new property put things through a kind

00:33:48,139 --> 00:33:53,210
of as they are if you create an entity a

00:33:51,049 --> 00:33:55,220
lots of other entities are created lots

00:33:53,210 --> 00:33:56,659
of messaging system then the messages

00:33:55,220 --> 00:33:57,739
are stored in a table than they are

00:33:56,659 --> 00:34:02,119
getting emailed and things like that

00:33:57,739 --> 00:34:04,999
various stops a long set of process yay

00:34:02,119 --> 00:34:07,340
was really long and painful to set it up

00:34:04,999 --> 00:34:09,679
unmaintained files that was the most

00:34:07,340 --> 00:34:11,539
funniest thing so we had files as you

00:34:09,679 --> 00:34:14,599
know drupal stores managed and unmanaged

00:34:11,539 --> 00:34:17,510
files managed files are at once which

00:34:14,599 --> 00:34:19,460
tuple keeps the file path is in the

00:34:17,510 --> 00:34:21,470
database system so can easily find them

00:34:19,460 --> 00:34:23,059
you just run a query and just hope that

00:34:21,470 --> 00:34:25,010
the files exist actually in a file

00:34:23,059 --> 00:34:28,399
system but we had a lots of fun

00:34:25,010 --> 00:34:31,909
maintained files and underlay on a

00:34:28,399 --> 00:34:34,490
reliable data sources so dever in terms

00:34:31,909 --> 00:34:37,849
of the columns were a bit different the

00:34:34,490 --> 00:34:39,470
data stored in a Drupal 6 obviously the

00:34:37,849 --> 00:34:41,629
data was different from the way it

00:34:39,470 --> 00:34:45,740
should be stored and rupal 7 and things

00:34:41,629 --> 00:34:47,480
like that right and I'll go through a

00:34:45,740 --> 00:34:50,629
couple of code examples how we resolve

00:34:47,480 --> 00:34:52,369
them first thing drupal this was done

00:34:50,629 --> 00:34:53,899
with the help of another module which is

00:34:52,369 --> 00:34:56,929
really great when it's called my great

00:34:53,899 --> 00:34:59,289
job with Drupal it's a helper one if you

00:34:56,929 --> 00:35:01,130
want to migrate in between Drupal

00:34:59,289 --> 00:35:03,410
releases

00:35:01,130 --> 00:35:06,049
and the way I do it it's a bit easier

00:35:03,410 --> 00:35:08,000
way this is taken from the example

00:35:06,049 --> 00:35:11,089
module which is in the Drupal migrated

00:35:08,000 --> 00:35:13,099
dufault otoko migrate the way you apply

00:35:11,089 --> 00:35:16,210
it whenever I flash caches all crashes

00:35:13,099 --> 00:35:18,289
then it just runs through my register

00:35:16,210 --> 00:35:21,470
migration register and checks whether

00:35:18,289 --> 00:35:23,180
there is something new you can do it

00:35:21,470 --> 00:35:28,279
anyway but it was just a convenience

00:35:23,180 --> 00:35:30,349
thing for us then I'm not going to kind

00:35:28,279 --> 00:35:31,640
of browse through it thoroughly which is

00:35:30,349 --> 00:35:33,559
a couple of things when you do here you

00:35:31,640 --> 00:35:36,529
divine a source which is a separate

00:35:33,559 --> 00:35:38,029
database legacy source version this is

00:35:36,529 --> 00:35:39,589
crucial you have to say which version

00:35:38,029 --> 00:35:42,559
you are mating from migrating chrome on

00:35:39,589 --> 00:35:46,329
this case was six and then you set up

00:35:42,559 --> 00:35:48,109
the first thing we migrated kind of

00:35:46,329 --> 00:35:50,059
having done all the mapping

00:35:48,109 --> 00:35:52,130
collaboration and thinking planning that

00:35:50,059 --> 00:35:53,990
we did users and that was kind of plan

00:35:52,130 --> 00:35:56,359
everything else dependent mostly in

00:35:53,990 --> 00:35:59,029
users and we define a user's we define

00:35:56,359 --> 00:36:00,200
some array of arguments which are some

00:35:59,029 --> 00:36:01,930
are pretty obvious you define

00:36:00,200 --> 00:36:04,819
description and the Machine name and

00:36:01,930 --> 00:36:08,089
then you just this is a static method in

00:36:04,819 --> 00:36:10,759
the migration module a bit one version

00:36:08,089 --> 00:36:12,920
downwards to 25 you just register the

00:36:10,759 --> 00:36:15,440
migration and apply those arguments you

00:36:12,920 --> 00:36:16,940
just created and the another example

00:36:15,440 --> 00:36:19,250
it's just I would demonstrate you how

00:36:16,940 --> 00:36:21,380
you can use this as a dependency so we

00:36:19,250 --> 00:36:23,930
had some node types we had a source type

00:36:21,380 --> 00:36:25,670
I've just renamed them because I can't

00:36:23,930 --> 00:36:27,890
disclose you to know types in the

00:36:25,670 --> 00:36:29,539
original system and the destination type

00:36:27,890 --> 00:36:31,460
so we had those types greater than you

00:36:29,539 --> 00:36:34,190
just grade again you create an array of

00:36:31,460 --> 00:36:36,829
arguments various things you want to do

00:36:34,190 --> 00:36:39,559
class name description that appears on

00:36:36,829 --> 00:36:43,819
your UI whether you do it some brush or

00:36:39,559 --> 00:36:47,420
web interface and then machine name and

00:36:43,819 --> 00:36:50,000
stuff like that and then here in down in

00:36:47,420 --> 00:36:52,160
the bottom we apply the user dependency

00:36:50,000 --> 00:36:54,529
so our migration depends on a user

00:36:52,160 --> 00:36:58,579
migration so users have to be migrated

00:36:54,529 --> 00:37:00,259
first and then we can say afterwards we

00:36:58,579 --> 00:37:03,680
can basically apply those users to a

00:37:00,259 --> 00:37:06,380
node three top stuff and then yeah

00:37:03,680 --> 00:37:08,269
that's it this probably a bit weird

00:37:06,380 --> 00:37:11,930
example but that's again is taken from

00:37:08,269 --> 00:37:13,759
the example module within the Jupiter

00:37:11,930 --> 00:37:14,350
group on my great and it just allows you

00:37:13,759 --> 00:37:16,810
to

00:37:14,350 --> 00:37:18,730
to merge those users to various node

00:37:16,810 --> 00:37:20,920
types you may register various node

00:37:18,730 --> 00:37:23,650
migrations like not only one in this

00:37:20,920 --> 00:37:26,080
case but many then just run through all

00:37:23,650 --> 00:37:30,640
of them apply the user dependency and

00:37:26,080 --> 00:37:33,220
then register the migration so what we

00:37:30,640 --> 00:37:35,020
did the other thing we did we we were

00:37:33,220 --> 00:37:37,210
not migrating all entities using

00:37:35,020 --> 00:37:39,460
migration we were creating custom

00:37:37,210 --> 00:37:41,500
entities on the fly and then you can use

00:37:39,460 --> 00:37:44,260
hooks so there are various things which

00:37:41,500 --> 00:37:45,760
which which kind of various processes

00:37:44,260 --> 00:37:48,100
which takes place when you create

00:37:45,760 --> 00:37:50,380
something in Drupal users nodes so in

00:37:48,100 --> 00:37:53,230
this case I use an example of hook user

00:37:50,380 --> 00:37:55,540
insert and then here is the crucial

00:37:53,230 --> 00:37:58,240
thing is this first three lines of code

00:37:55,540 --> 00:38:00,010
for with a comment you'll have to check

00:37:58,240 --> 00:38:02,110
whether you are in the migration or not

00:38:00,010 --> 00:38:04,180
otherwise if you don't do that you're

00:38:02,110 --> 00:38:05,860
the follow that the following script

00:38:04,180 --> 00:38:07,840
will probably run any time when you will

00:38:05,860 --> 00:38:10,450
create a new user so this is just a

00:38:07,840 --> 00:38:12,910
simple check of weather if we are in a

00:38:10,450 --> 00:38:14,200
migration cool and I'm just doing a

00:38:12,910 --> 00:38:17,680
negative statement because I had a lot

00:38:14,200 --> 00:38:20,860
of code following and then I just say if

00:38:17,680 --> 00:38:24,220
that's not set stop stop the script in

00:38:20,860 --> 00:38:26,410
this module and then we had another

00:38:24,220 --> 00:38:29,430
problems with greater consistency and

00:38:26,410 --> 00:38:32,170
the validity of data so i just use try

00:38:29,430 --> 00:38:34,150
the type is sometimes this is a bundle

00:38:32,170 --> 00:38:36,850
as you know entities in drupal have

00:38:34,150 --> 00:38:38,890
types and bundles they nodes case

00:38:36,850 --> 00:38:41,260
entities node and type such as content

00:38:38,890 --> 00:38:43,780
types and you have to say which type you

00:38:41,260 --> 00:38:45,340
want to create in the profile so in this

00:38:43,780 --> 00:38:48,070
case we were creating profile to

00:38:45,340 --> 00:38:50,950
entities this are just description away

00:38:48,070 --> 00:38:52,540
of some fields for drupal more fields

00:38:50,950 --> 00:38:54,400
like address first name surname and

00:38:52,540 --> 00:38:57,520
things like that and then i ran a

00:38:54,400 --> 00:39:01,390
specific function i just put the code in

00:38:57,520 --> 00:39:03,310
a function and then if it doesn't work

00:39:01,390 --> 00:39:06,310
it just carries on to the next direction

00:39:03,310 --> 00:39:07,690
that's it and if you want to find more

00:39:06,310 --> 00:39:09,940
about that where i took it from this

00:39:07,690 --> 00:39:13,450
great blog post gave me a great

00:39:09,940 --> 00:39:15,520
inspiration and this is the actual

00:39:13,450 --> 00:39:18,340
function what i do i just demonstrate

00:39:15,520 --> 00:39:20,230
you that i assigned some values to user

00:39:18,340 --> 00:39:25,150
into a profile entity and then obviously

00:39:20,230 --> 00:39:27,569
i returned it so it gets created yep

00:39:25,150 --> 00:39:29,999
that's basically it

00:39:27,569 --> 00:39:33,239
and now we will talk about the tricky

00:39:29,999 --> 00:39:38,849
subject if you want to move away from

00:39:33,239 --> 00:39:40,680
Drupal so I think this well this might

00:39:38,849 --> 00:39:44,759
be as maybe a little bit controversial

00:39:40,680 --> 00:39:46,469
but sometimes Drupal is Alcatraz and an

00:39:44,759 --> 00:39:48,449
example of this I think there's many

00:39:46,469 --> 00:39:50,789
people who have a triple based blog and

00:39:48,449 --> 00:39:53,309
they're realizing that well it's a

00:39:50,789 --> 00:39:57,299
little bit too much of a hassle to have

00:39:53,309 --> 00:39:59,430
a server that runs apache and PHP and

00:39:57,299 --> 00:40:02,519
all of that where you just want to have

00:39:59,430 --> 00:40:04,709
a blog that's just read only and and so

00:40:02,519 --> 00:40:08,489
people use that excite generators the

00:40:04,709 --> 00:40:12,019
problem is how do you get your ten years

00:40:08,489 --> 00:40:19,079
of blogging history into such a system

00:40:12,019 --> 00:40:22,199
and well um actually the same thing the

00:40:19,079 --> 00:40:25,559
same thing the same principles apply so

00:40:22,199 --> 00:40:27,989
instead of migrating from a different

00:40:25,559 --> 00:40:29,670
system to Drupal well your source is

00:40:27,989 --> 00:40:31,859
Drupal you want to do some

00:40:29,670 --> 00:40:34,920
transformation and then you save this

00:40:31,859 --> 00:40:40,469
Institute into llamo files which is the

00:40:34,920 --> 00:40:43,709
most common standards used for for it

00:40:40,469 --> 00:40:46,499
for static site generators and one thing

00:40:43,709 --> 00:40:49,319
that's well static site generators can

00:40:46,499 --> 00:40:51,779
be pretty cool but they don't really

00:40:49,319 --> 00:40:53,819
have that many tools for migrating there

00:40:51,779 --> 00:40:55,769
are some scripts that are around but you

00:40:53,819 --> 00:40:58,440
know they're of the same quality of what

00:40:55,769 --> 00:41:01,609
we showed earlier as an example of how

00:40:58,440 --> 00:41:04,680
things used to be done in the past and

00:41:01,609 --> 00:41:06,719
so the tools there are really not that

00:41:04,680 --> 00:41:09,420
great and we happen to have the

00:41:06,719 --> 00:41:11,369
microwave module which is very agnostic

00:41:09,420 --> 00:41:14,549
about which sources and which targets is

00:41:11,369 --> 00:41:17,400
use so you can actually use the migrate

00:41:14,549 --> 00:41:19,739
module do you migrate away from Drupal

00:41:17,400 --> 00:41:21,839
so you define your source as the your

00:41:19,739 --> 00:41:23,670
Drupal site could be nodes could be

00:41:21,839 --> 00:41:27,150
users whatever you want to migrate and

00:41:23,670 --> 00:41:29,099
then on the destination you just save

00:41:27,150 --> 00:41:33,029
files and then you can take those files

00:41:29,099 --> 00:41:35,729
wherever you want to go and so that's a

00:41:33,029 --> 00:41:38,099
tool I think that is pretty familiar to

00:41:35,729 --> 00:41:39,569
too many of us and it's a tool that

00:41:38,099 --> 00:41:45,209
actually does a great job

00:41:39,569 --> 00:41:48,209
this now we have a quick checklist of

00:41:45,209 --> 00:41:50,369
what kind of things you want to make

00:41:48,209 --> 00:41:52,979
sure that you include when you're doing

00:41:50,369 --> 00:41:56,640
a migration I think the first one is

00:41:52,979 --> 00:41:59,249
make sure that you have redirects in

00:41:56,640 --> 00:42:02,759
place for any of the pages any of the

00:41:59,249 --> 00:42:05,130
URLs that you used to have on your old

00:42:02,759 --> 00:42:07,259
system because you want any anybody

00:42:05,130 --> 00:42:09,719
who's following a link to the old page

00:42:07,259 --> 00:42:12,479
to come to the rights page on the new

00:42:09,719 --> 00:42:16,729
system this is especially important for

00:42:12,479 --> 00:42:20,219
SEO if your website realize heavily on

00:42:16,729 --> 00:42:22,650
on SEO and has some great content that

00:42:20,219 --> 00:42:24,690
that bring in a lot of traffic if you

00:42:22,650 --> 00:42:26,819
don't put this in place you're pretty

00:42:24,690 --> 00:42:28,650
much losing the entire value of your

00:42:26,819 --> 00:42:30,660
order of your website so you want to

00:42:28,650 --> 00:42:34,130
make sure that every single whatever II

00:42:30,660 --> 00:42:38,579
single page gets redirected properly and

00:42:34,130 --> 00:42:41,640
you wanted to talk we talked about that

00:42:38,579 --> 00:42:43,739
a lot already validated data make sure

00:42:41,640 --> 00:42:48,239
to do your data and both ends are valid

00:42:43,739 --> 00:42:50,009
so the way where we mean here basically

00:42:48,239 --> 00:42:51,719
you have to demonstrate your customer

00:42:50,009 --> 00:42:53,819
that this this is the data he wants so

00:42:51,719 --> 00:42:55,799
he just comes back sometimes saying well

00:42:53,819 --> 00:42:57,660
actually we've talked but this is this

00:42:55,799 --> 00:42:59,160
is not the way I just I don't want those

00:42:57,660 --> 00:43:01,410
fields you have to be sure that the data

00:42:59,160 --> 00:43:03,359
you migrate and then the smaller

00:43:01,410 --> 00:43:05,219
projects we demonstrated with a beer

00:43:03,359 --> 00:43:07,109
example you can just use your own use a

00:43:05,219 --> 00:43:08,369
testing there are 16 items you just

00:43:07,109 --> 00:43:10,529
browse through them and just compare

00:43:08,369 --> 00:43:13,170
it's nice and easy but there is a

00:43:10,529 --> 00:43:15,959
sandbox text module of a test module

00:43:13,170 --> 00:43:18,719
available which you can apply and use

00:43:15,959 --> 00:43:20,729
Drupal one of the built-in systems for

00:43:18,719 --> 00:43:22,859
testing an automated testing to run

00:43:20,729 --> 00:43:26,069
through those tables you migrated and

00:43:22,859 --> 00:43:30,029
check whether your data match with the

00:43:26,069 --> 00:43:31,739
source that's when to stop referential

00:43:30,029 --> 00:43:33,900
integrity make sure that all the

00:43:31,739 --> 00:43:35,999
references are created correctly so

00:43:33,900 --> 00:43:37,559
whether your source and destinations if

00:43:35,999 --> 00:43:39,749
there are some references in both ends

00:43:37,559 --> 00:43:41,670
they reference at the if there are some

00:43:39,749 --> 00:43:44,489
references and sources they reference in

00:43:41,670 --> 00:43:48,630
the destination integrate with other

00:43:44,489 --> 00:43:51,900
modules there can be various stuff so

00:43:48,630 --> 00:43:53,110
you make migration runs by ninety

00:43:51,900 --> 00:43:55,120
percent at the end

00:43:53,110 --> 00:43:57,280
smoothly and nicely but sometimes

00:43:55,120 --> 00:43:58,990
obviously you have other custom things

00:43:57,280 --> 00:44:00,900
you've built on all things like that to

00:43:58,990 --> 00:44:03,730
make sure that they integrate very well

00:44:00,900 --> 00:44:06,910
string encoding that's we talked about

00:44:03,730 --> 00:44:09,850
that a lot yourlust saving one of the

00:44:06,910 --> 00:44:12,190
last saving kind of things is you can

00:44:09,850 --> 00:44:14,020
apply whenever you do a field marking

00:44:12,190 --> 00:44:16,480
you apply a call back and you can do

00:44:14,020 --> 00:44:18,700
something with that string this is one

00:44:16,480 --> 00:44:20,380
of the Savior's just in case and

00:44:18,700 --> 00:44:22,300
obviously when you've done with your

00:44:20,380 --> 00:44:23,920
migration you can actually kill

00:44:22,300 --> 00:44:25,810
everything with relates to it just

00:44:23,920 --> 00:44:27,850
disable the module uninstall it and

00:44:25,810 --> 00:44:29,950
probably if you don't need it you can

00:44:27,850 --> 00:44:32,020
just remove it from your repository you

00:44:29,950 --> 00:44:34,150
don't actually need it if module they

00:44:32,020 --> 00:44:36,040
migrate module is constructed an

00:44:34,150 --> 00:44:38,800
architecture in the way that it just

00:44:36,040 --> 00:44:41,530
whatever you've migrated if that's done

00:44:38,800 --> 00:44:43,120
it's finished it stays there so whatever

00:44:41,530 --> 00:44:45,700
you do with the module it doesn't do any

00:44:43,120 --> 00:44:48,610
harm to the date and to the new data and

00:44:45,700 --> 00:44:51,850
actually have one more and that I

00:44:48,610 --> 00:44:53,140
realized we haven't covered in any of

00:44:51,850 --> 00:44:55,720
our examples and it's something that

00:44:53,140 --> 00:44:59,950
belongs in here dates make sure that

00:44:55,720 --> 00:45:01,870
your dates are correct because different

00:44:59,950 --> 00:45:04,090
systems use different ways of saving

00:45:01,870 --> 00:45:06,880
dates sometimes wait time zones

00:45:04,090 --> 00:45:09,280
sometimes without time zones and so it's

00:45:06,880 --> 00:45:11,560
also it often happens that you don't

00:45:09,280 --> 00:45:13,870
realize that everything else well

00:45:11,560 --> 00:45:16,780
everything that all the dates are like

00:45:13,870 --> 00:45:18,970
two hours later something like that so

00:45:16,780 --> 00:45:20,230
you want to make sure that the dates

00:45:18,970 --> 00:45:26,230
match this is something that happens

00:45:20,230 --> 00:45:28,420
pretty often yeah this is we we've done

00:45:26,230 --> 00:45:30,610
a small list of a helper modules which

00:45:28,420 --> 00:45:32,290
might help you in your migration there

00:45:30,610 --> 00:45:34,720
are various stops which already set up

00:45:32,290 --> 00:45:37,030
like I think my gray texture is one of

00:45:34,720 --> 00:45:39,250
the cases it provides some more

00:45:37,030 --> 00:45:42,370
sophisticated things to work with entity

00:45:39,250 --> 00:45:44,530
migrations I think it has profile

00:45:42,370 --> 00:45:46,570
integration and whether whether various

00:45:44,530 --> 00:45:48,190
other stuff and my greater migrated

00:45:46,570 --> 00:45:52,000
x-rays one of the things that is

00:45:48,190 --> 00:45:54,580
inspired to migrate the inspiration is

00:45:52,000 --> 00:45:56,680
taken ecommerce migration search one

00:45:54,580 --> 00:45:59,050
migrated once some some source to a

00:45:56,680 --> 00:46:01,180
drupal commerce distribution there are

00:45:59,050 --> 00:46:03,100
ready modules to migrate from away from

00:46:01,180 --> 00:46:05,770
Jupiter II it's from sorry typo3

00:46:03,100 --> 00:46:06,700
wordpress and joomla and just simply

00:46:05,770 --> 00:46:08,619
take them

00:46:06,700 --> 00:46:11,109
I've demonstrated already Drupal to

00:46:08,619 --> 00:46:13,450
Drupal migration is my great redirect

00:46:11,109 --> 00:46:17,290
sandbox this is the one I've just put on

00:46:13,450 --> 00:46:18,910
this week there is a destination class

00:46:17,290 --> 00:46:20,950
that I've created which will help you to

00:46:18,910 --> 00:46:22,990
make migrate your redirect so you can

00:46:20,950 --> 00:46:25,390
take your source data and then create

00:46:22,990 --> 00:46:27,940
redirects on the fly because ren directs

00:46:25,390 --> 00:46:29,320
our entities in drupal 7 so that's a

00:46:27,940 --> 00:46:32,050
convenient thing and then a blogger

00:46:29,320 --> 00:46:33,849
migration this is not kind of it doesn't

00:46:32,050 --> 00:46:35,890
stick into a migration system but it

00:46:33,849 --> 00:46:38,109
there is a module which will help you to

00:46:35,890 --> 00:46:40,180
migrate your all blogger blog boxed into

00:46:38,109 --> 00:46:42,690
a Drupal it uses a bit different

00:46:40,180 --> 00:46:45,099
approach but anyway it migrated and

00:46:42,690 --> 00:46:47,770
there is a long list of other modules

00:46:45,099 --> 00:46:49,359
probably you may check the chocolate org

00:46:47,770 --> 00:46:51,250
forward slash project forward slash

00:46:49,359 --> 00:46:54,250
migrate there are lots of other modules

00:46:51,250 --> 00:46:56,829
which might resolve exactly your case if

00:46:54,250 --> 00:47:02,050
you can't do it you may apply those

00:46:56,829 --> 00:47:06,089
examples we just showed you and yeah

00:47:02,050 --> 00:47:10,780
we've got a conclusion thing so um I

00:47:06,089 --> 00:47:12,849
think that well and it is anyone

00:47:10,780 --> 00:47:16,540
convinced that well when you need to

00:47:12,849 --> 00:47:20,740
migrate well you have to I think anybody

00:47:16,540 --> 00:47:22,599
objects okay good and well so yeah as a

00:47:20,740 --> 00:47:25,329
conclusion yeah when you need to migrate

00:47:22,599 --> 00:47:27,119
well you have to and so it's one of

00:47:25,329 --> 00:47:30,460
those things that's kind of unavoidable

00:47:27,119 --> 00:47:33,700
but it can be fun to do as a developer

00:47:30,460 --> 00:47:36,190
and it is also something that does not

00:47:33,700 --> 00:47:38,079
bring value to the customer directly

00:47:36,190 --> 00:47:41,980
because it is not a feature it is

00:47:38,079 --> 00:47:44,349
something that it is a chore but if you

00:47:41,980 --> 00:47:46,720
present it to the customer correctly if

00:47:44,349 --> 00:47:49,030
you communicated well enough you can do

00:47:46,720 --> 00:47:51,069
so in a way that they really understand

00:47:49,030 --> 00:47:53,079
the value that they get out of this and

00:47:51,069 --> 00:47:56,859
this is something that is very important

00:47:53,079 --> 00:47:59,710
and the migrated module is a great

00:47:56,859 --> 00:48:04,050
solution that really facilitates doing

00:47:59,710 --> 00:48:04,050
this in a great way thank

00:48:09,739 --> 00:48:45,959
do you have any questions in terms of

00:48:13,199 --> 00:48:49,559
questions any good question will be so

00:48:45,959 --> 00:48:52,319
to answer the first question the the

00:48:49,559 --> 00:48:54,329
migrant module actually has well when

00:48:52,319 --> 00:48:55,829
you define the mapping you can either

00:48:54,329 --> 00:48:58,619
say I wanted you to find a mapping

00:48:55,829 --> 00:49:01,680
between fields or you can also say this

00:48:58,619 --> 00:49:05,400
is actually referencing the entity

00:49:01,680 --> 00:49:07,140
created by an hour migration so it will

00:49:05,400 --> 00:49:08,880
for example if you say well I want to

00:49:07,140 --> 00:49:11,160
migrate this and it's it's a reference

00:49:08,880 --> 00:49:14,009
to a user it will look up the reference

00:49:11,160 --> 00:49:15,630
in the mapping table for the user so you

00:49:14,009 --> 00:49:18,630
need to make sure that you import the

00:49:15,630 --> 00:49:20,189
user first and it will actually use this

00:49:18,630 --> 00:49:23,219
to make sure that the referential

00:49:20,189 --> 00:49:24,809
integrity is there so the same way you

00:49:23,219 --> 00:49:26,160
add a mapping and this is also something

00:49:24,809 --> 00:49:28,380
that you can do through the user

00:49:26,160 --> 00:49:29,789
interface and the same way you add a

00:49:28,380 --> 00:49:32,069
mapping between fields you can add a

00:49:29,789 --> 00:49:33,749
mapping between entities it's called the

00:49:32,069 --> 00:49:38,579
source migration you apply the source

00:49:33,749 --> 00:49:43,410
which from which it comes and the second

00:49:38,579 --> 00:49:45,929
question about estimates it's it's

00:49:43,410 --> 00:49:47,880
difficult because typically there's one

00:49:45,929 --> 00:49:50,130
end of the migration that you cannot

00:49:47,880 --> 00:49:55,140
control so you need to have a look at

00:49:50,130 --> 00:49:56,459
the data and I would it is the kind of

00:49:55,140 --> 00:50:00,779
estimates where you need to have a

00:49:56,459 --> 00:50:04,049
bigger buffer and it really helps to

00:50:00,779 --> 00:50:07,739
have a quick look at at the data and see

00:50:04,049 --> 00:50:09,390
well look for encoding look for what is

00:50:07,739 --> 00:50:11,579
the structure of the data so I would

00:50:09,390 --> 00:50:14,670
never make an estimate without having

00:50:11,579 --> 00:50:17,359
seen the data at least but it is

00:50:14,670 --> 00:50:17,359
something that is diff

00:50:27,930 --> 00:50:33,940
how long it took the migration part for

00:50:31,840 --> 00:50:37,510
the Red Cross or the property that aside

00:50:33,940 --> 00:50:41,350
that makes all the Red Cross how much

00:50:37,510 --> 00:50:43,390
name was well they did the home I think

00:50:41,350 --> 00:50:46,090
it I was involved in this for about

00:50:43,390 --> 00:50:49,000
three weeks it's including planning

00:50:46,090 --> 00:50:53,590
collaboration and then the migration

00:50:49,000 --> 00:51:07,900
itself it was plus minus know it really

00:50:53,590 --> 00:51:11,140
depends on the complexity of the day how

00:51:07,900 --> 00:51:14,290
many people wasn't just you it was just

00:51:11,140 --> 00:51:18,820
me it was down we're a team of three

00:51:14,290 --> 00:51:20,920
guys a scrum master and a customer side

00:51:18,820 --> 00:51:23,290
but the solidity migration for the

00:51:20,920 --> 00:51:25,750
migration pass was just between me and

00:51:23,290 --> 00:51:27,910
the customer we resolve a project owner

00:51:25,750 --> 00:51:32,290
and this in this project so it was just

00:51:27,910 --> 00:51:34,240
only two bus chatting the other consumer

00:51:32,290 --> 00:51:37,290
we really like you through the part I

00:51:34,240 --> 00:51:37,290
can't or SMS

00:51:41,119 --> 00:51:48,600
so further questions what's the

00:51:45,240 --> 00:51:51,300
situation with the collection I with the

00:51:48,600 --> 00:51:54,270
integration because I am some problems

00:51:51,300 --> 00:52:02,610
lost in six months ago decided to write

00:51:54,270 --> 00:52:08,070
my own code okay and it was the best

00:52:02,610 --> 00:52:12,510
intermediate format I told my straight

00:52:08,070 --> 00:52:16,500
but I will be prepared migrated from if

00:52:12,510 --> 00:52:18,360
you have a choice well the first

00:52:16,500 --> 00:52:22,950
question was about fuel collections your

00:52:18,360 --> 00:52:24,869
collections actually it's it's their

00:52:22,950 --> 00:52:27,750
entities so it's lots of entities at

00:52:24,869 --> 00:52:30,720
each of them had killed so if you look

00:52:27,750 --> 00:52:33,180
at the way it sorted in the back end I

00:52:30,720 --> 00:52:35,610
know there are some rats that blog post

00:52:33,180 --> 00:52:37,410
that blog post at one of the slides will

00:52:35,610 --> 00:52:39,570
put this one on lay on the website

00:52:37,410 --> 00:52:42,020
drupalcon there is a blog post actually

00:52:39,570 --> 00:52:44,520
that blog post is about the entity

00:52:42,020 --> 00:52:46,590
collection migration and it uses the

00:52:44,520 --> 00:52:51,270
hook when you insert a new entity then

00:52:46,590 --> 00:52:53,700
it crates filled collections and yeah so

00:52:51,270 --> 00:53:02,190
I think this is the way you do it I

00:52:53,700 --> 00:53:04,350
think typically basically what what

00:53:02,190 --> 00:53:06,570
happens if you migrate basically it's

00:53:04,350 --> 00:53:08,340
kind of it's an it's almost a messaging

00:53:06,570 --> 00:53:11,730
thing you create a message in the source

00:53:08,340 --> 00:53:13,680
by just creating your entity it doesn't

00:53:11,730 --> 00:53:16,950
exist and then you send it to Drupal and

00:53:13,680 --> 00:53:19,640
then Drupal just uses a note great and

00:53:16,950 --> 00:53:21,990
the note saving and it receives those

00:53:19,640 --> 00:53:25,320
fields the from the source which should

00:53:21,990 --> 00:53:27,780
then be parsed to those entity of entity

00:53:25,320 --> 00:53:30,390
sorry field collections sorry so pretty

00:53:27,780 --> 00:53:33,599
much you create the

00:53:30,390 --> 00:53:36,170
on the fly so you are not doing to set

00:53:33,599 --> 00:53:39,569
it at just that migration because well

00:53:36,170 --> 00:53:42,210
it's really the entity that attached

00:53:39,569 --> 00:53:46,890
directly to the base entity that you are

00:53:42,210 --> 00:54:00,329
important and the second question and if

00:53:46,890 --> 00:54:03,269
you have a choice and well it depends on

00:54:00,329 --> 00:54:07,440
the kind of data that you have CSV is

00:54:03,269 --> 00:54:09,539
very simple and but it's only it can

00:54:07,440 --> 00:54:11,519
only do things are later so you could

00:54:09,539 --> 00:54:13,589
have like multiple valued fields you

00:54:11,519 --> 00:54:16,349
cannot do this with CSP or you do

00:54:13,589 --> 00:54:18,329
something crazy like multiple values

00:54:16,349 --> 00:54:20,430
inside the sale or something that so

00:54:18,329 --> 00:54:25,079
it's and it could be done but there

00:54:20,430 --> 00:54:27,450
really no need to go through that so if

00:54:25,079 --> 00:54:29,490
well sometimes you can just migrate

00:54:27,450 --> 00:54:32,069
directly away from the original source

00:54:29,490 --> 00:54:35,579
if you need to have an internal and

00:54:32,069 --> 00:54:38,519
intermediate format sequel would be fine

00:54:35,579 --> 00:54:40,980
I think it's you use something that

00:54:38,519 --> 00:54:44,490
already has been an exiting integration

00:54:40,980 --> 00:54:47,000
and use it well see if it matches the

00:54:44,490 --> 00:54:47,000
data that

00:54:59,360 --> 00:55:07,970
it well it was a custom entity that that

00:55:04,910 --> 00:55:10,670
was created so we define our own custom

00:55:07,970 --> 00:55:13,090
educated it's the performance in this

00:55:10,670 --> 00:55:15,290
case was not really concerned because

00:55:13,090 --> 00:55:19,610
actually Olga careering were done

00:55:15,290 --> 00:55:21,890
through a search so using apache solr so

00:55:19,610 --> 00:55:28,760
you're the cream in the database was not

00:55:21,890 --> 00:55:32,000
a co-op migrant several group of 15 20

00:55:28,760 --> 00:55:34,970
min 20 s something like that after squee

00:55:32,000 --> 00:55:39,950
minutes my grade goes down with only two

00:55:34,970 --> 00:55:41,960
entities permanent every single time if

00:55:39,950 --> 00:55:49,760
i migrated to script runs three minutes

00:55:41,960 --> 00:55:52,580
and then this is good question and as a

00:55:49,760 --> 00:55:54,830
mother I don't have an answer is it do

00:55:52,580 --> 00:56:01,100
you use that web web interface or you're

00:55:54,830 --> 00:56:02,990
drunk you know know you but when you

00:56:01,100 --> 00:56:04,340
when you actually come to migration do

00:56:02,990 --> 00:56:08,180
you do it while you are this migrated

00:56:04,340 --> 00:56:12,680
you is now tried rush it you might see

00:56:08,180 --> 00:56:15,820
some occurrences I will forgot a guy and

00:56:12,680 --> 00:56:15,820
then we can do yep

00:56:43,800 --> 00:56:51,810
and research you to get the content from

00:56:48,190 --> 00:56:55,480
the product inside to staging site yes

00:56:51,810 --> 00:56:57,520
it's good work but generally you really

00:56:55,480 --> 00:56:59,880
want to not to get only the content you

00:56:57,520 --> 00:57:02,140
want to get a full copy of the database

00:56:59,880 --> 00:57:04,330
because you want to make sure that your

00:57:02,140 --> 00:57:07,150
your upgrades work you want to make sure

00:57:04,330 --> 00:57:09,730
that everything well you want to have an

00:57:07,150 --> 00:57:12,040
actual copy of the live site you don't

00:57:09,730 --> 00:57:15,580
want to just have the content so I think

00:57:12,040 --> 00:57:19,930
that in this case having an actual copy

00:57:15,580 --> 00:57:23,080
of the database would work better we've

00:57:19,930 --> 00:57:25,290
got to two questions okay yeah yeah you

00:57:23,080 --> 00:57:25,290
will

00:57:35,880 --> 00:57:56,559
that's a good question yeah it would be

00:57:54,249 --> 00:57:58,749
possible but it is in this case it is

00:57:56,559 --> 00:58:01,630
not a feel that it's being mapped to

00:57:58,749 --> 00:58:03,759
field it is a fields that you take you

00:58:01,630 --> 00:58:05,919
do some transformation you extract the

00:58:03,759 --> 00:58:09,249
data that you want and then you put that

00:58:05,919 --> 00:58:11,650
in a circle so if you want to do this

00:58:09,249 --> 00:58:15,279
then use well of course you would need

00:58:11,650 --> 00:58:18,400
to create your own migration and there's

00:58:15,279 --> 00:58:24,640
this this method called pre-processed

00:58:18,400 --> 00:58:27,660
rose this is on the source so you create

00:58:24,640 --> 00:58:30,640
your own sources of that extent whatever

00:58:27,660 --> 00:58:33,099
typical source tool you have and you

00:58:30,640 --> 00:58:35,349
pre-process each of the rows using

00:58:33,099 --> 00:58:37,689
regular expressions or whatever the

00:58:35,349 --> 00:58:41,250
right role would be to generally

00:58:37,689 --> 00:58:44,280
converts to convert that data

00:58:41,250 --> 00:58:48,620
my last question if you have any

00:58:44,280 --> 00:58:53,520
experience we had a notch sizes like

00:58:48,620 --> 00:58:59,790
articles for this question that just two

00:58:53,520 --> 00:59:01,440
articles in a minute everyone if you

00:58:59,790 --> 00:59:05,790
have the earthquake return in time for

00:59:01,440 --> 00:59:08,100
that commits the job will run under two

00:59:05,790 --> 00:59:11,700
minutes and they can use deafen each

00:59:08,100 --> 00:59:13,890
process in mid watch yeah so increase it

00:59:11,700 --> 00:59:15,930
for like 10 hours if you run for 10

00:59:13,890 --> 00:59:18,540
hours and it'll increase because the

00:59:15,930 --> 00:59:20,700
problem I have is that we have our other

00:59:18,540 --> 00:59:23,310
times and articles and large as well

00:59:20,700 --> 00:59:27,510
with lots of content into the model

00:59:23,310 --> 00:59:31,400
database and this girl is complex I take

00:59:27,510 --> 00:59:31,400
a long time to run get all dark ass

00:59:33,960 --> 00:59:39,700
what you're doing especially if you have

00:59:36,400 --> 00:59:43,240
that conversation so minimizing the

00:59:39,700 --> 00:59:46,420
museum and minimizing downtime yeah well

00:59:43,240 --> 00:59:49,180
you can I think in this case it it's

00:59:46,420 --> 00:59:51,400
worth taking a look at really what is

00:59:49,180 --> 00:59:53,470
making the system slope so the same way

00:59:51,400 --> 00:59:56,410
you do performance analysis for

00:59:53,470 --> 00:59:58,780
scalability and high traffic you can do

00:59:56,410 --> 01:00:01,290
performance analysis and like what

00:59:58,780 --> 01:00:05,440
workers are making this slope sometimes

01:00:01,290 --> 01:00:07,840
you well when you say but no typically

01:00:05,440 --> 01:00:09,340
there's a lot of things that happen you

01:00:07,840 --> 01:00:14,440
want to say fields you want to save

01:00:09,340 --> 01:00:16,540
images and sometimes the only thing that

01:00:14,440 --> 01:00:20,320
you need to migrate is not the entire

01:00:16,540 --> 01:00:21,910
know just what the basic data and this

01:00:20,320 --> 01:00:23,740
is something that I mean it is a

01:00:21,910 --> 01:00:25,990
performance improvements that you only

01:00:23,740 --> 01:00:27,550
need to do if you are entirely sure of

01:00:25,990 --> 01:00:29,470
this but sometimes you can write

01:00:27,550 --> 01:00:32,230
directly to database get a huge

01:00:29,470 --> 01:00:34,150
performance improvement this is up or

01:00:32,230 --> 01:00:36,370
something that I mean it comes with the

01:00:34,150 --> 01:00:40,830
responsibility of writing directly to

01:00:36,370 --> 01:00:40,830
that is so be careful with this it

01:00:42,750 --> 01:00:52,450
yep that's it guys thank you for coming

01:00:45,280 --> 01:00:56,890
we've run out if you have more questions

01:00:52,450 --> 01:01:00,220
we are here all week way up and please

01:00:56,890 --> 01:01:01,900
please fill out an evaluation we would

01:01:00,220 --> 01:01:04,030
be very happy to hear what you have to

01:01:01,900 --> 01:01:06,609
say and I think the drupalcon organizers

01:01:04,030 --> 01:01:08,940
also want to know thank you enjoy rest

01:01:06,609 --> 01:01:08,940
of the day

01:01:15,720 --> 01:01:18,720

YouTube URL: https://www.youtube.com/watch?v=DeFpJgcip0A


