Title: DrupalCon Austin 2014: DRUPAL 8 THEME SYSTEM: HOOK_THEME TO TWIG TEMPLATE
Publication date: 2014-06-03
Playlist: DrupalCon Austin - June 2014
Description: 
	Speakers: Cottserjoelpittet
The Twig templating engine is in Drupal 8 and has generated a lot of excitement. Many passionate contributors have stepped up during the Drupal 8 development cycle to not only convert Drupal's markup to Twig but also clean up and simplify the theme system as a whole. But what does all this mean to you?

In this session some of your friendly Drupal 8 theme system co-maintainers will walk through the state of Drupal 8's theme system. We'll talk about what's different from Drupal 7 but also walk through some of the internals of different aspects of the theme system and how they might affect your day-to-day work with Drupal.

We'll also talk about some of the exciting ways that Twig and Drupal 8 can be leveraged and built upon to make life better and touch on some opportunities there are in the contrib space.

We're going to talk a lot about code and APIs and look at plenty of PHP, so an understanding of PHP basics will be helpful.

TOPICS INCLUDE:

A high-level overview of the changes to the theme system in Drupal 8.
Some of the goodies that are possible now that we're using Twig as our templating engine.
Using theme hook suggestions to cut down on custom code and have themers thanking you.
Phases of the theme system and where you can step in to alter things.
Captions: 
	00:00:00,410 --> 00:00:09,450
hi everyone have a good lunch mm-hmm

00:00:05,120 --> 00:00:14,700
all right so we're gonna talk about the

00:00:09,450 --> 00:00:17,190
Drupal 8 theme system talk about a lot

00:00:14,700 --> 00:00:18,690
of different stuff so that any further

00:00:17,190 --> 00:00:20,220
ado will tell you a bit about ourselves

00:00:18,690 --> 00:00:25,199
and then we'll just jump right into it

00:00:20,220 --> 00:00:28,349
so my name is Scott Reeves I'm a

00:00:25,199 --> 00:00:31,019
developer at digital echidna we are a

00:00:28,349 --> 00:00:34,050
30-person Drupal shop in London Canada

00:00:31,019 --> 00:00:37,430
and we are a Silver Sponsor I believe

00:00:34,050 --> 00:00:40,829
yep I'm being told that's correct

00:00:37,430 --> 00:00:45,360
what else I'm also a Drupal 8 theme

00:00:40,829 --> 00:00:47,850
system Co maintainer and a Drupal core

00:00:45,360 --> 00:00:49,680
mentor the core mentoring program is

00:00:47,850 --> 00:00:52,170
actually how I got started helping with

00:00:49,680 --> 00:00:54,480
core because it's just something I I

00:00:52,170 --> 00:00:57,030
always knew I wanted to help but I never

00:00:54,480 --> 00:01:00,390
knew how so if anyone is like me I

00:00:57,030 --> 00:01:02,430
encourage you to check that out by the

00:01:00,390 --> 00:01:05,430
way can everyone hear me okay and see

00:01:02,430 --> 00:01:10,439
the slides okay just give me a high sign

00:01:05,430 --> 00:01:13,320
okay thank you and this is I played I

00:01:10,439 --> 00:01:17,220
like beans because this is me and the

00:01:13,320 --> 00:01:20,340
bean in Chicago and it ties into the

00:01:17,220 --> 00:01:23,070
next picture so I'll let you all

00:01:20,340 --> 00:01:26,880
introduce himself so everybody can hear

00:01:23,070 --> 00:01:32,299
me okay it was as well okay so my name

00:01:26,880 --> 00:01:36,329
is Joel Patent and I'm from Canada and I

00:01:32,299 --> 00:01:43,079
have been a developer for about since

00:01:36,329 --> 00:01:45,540
about 2001 ish I'm a friend and back-end

00:01:43,079 --> 00:01:48,930
developer so I try to I I try to bridge

00:01:45,540 --> 00:01:51,450
both gaps like I come from a design

00:01:48,930 --> 00:01:53,670
background but I doing a lot of the

00:01:51,450 --> 00:01:55,710
backend programming it seems and

00:01:53,670 --> 00:02:00,810
connecting the two so I try to sit in

00:01:55,710 --> 00:02:02,909
the middle I'm also a co team a Drupal 8

00:02:00,810 --> 00:02:07,920
theme system maintainer with Scott and a

00:02:02,909 --> 00:02:09,840
few others and I obviously love

00:02:07,920 --> 00:02:11,819
pierogies that's me

00:02:09,840 --> 00:02:13,829
hugging a giant pierogi in northerners

00:02:11,819 --> 00:02:16,590
catch one there certain northern

00:02:13,829 --> 00:02:19,049
northern Alberta sorry and it's yeah

00:02:16,590 --> 00:02:24,359
it's a giant pierogi there's a lot of

00:02:19,049 --> 00:02:24,959
giant things in Canada just in the

00:02:24,359 --> 00:02:36,180
prairies

00:02:24,959 --> 00:02:37,620
I'm the prayer is it okay let me just

00:02:36,180 --> 00:02:40,650
see if I can fix this to get this in

00:02:37,620 --> 00:02:45,209
full-screen there we go that's a bit

00:02:40,650 --> 00:02:47,579
better all right so at this point we

00:02:45,209 --> 00:02:50,699
just like to get an eye idea a sort of

00:02:47,579 --> 00:02:53,040
overview of who you guys are so we know

00:02:50,699 --> 00:02:56,159
who were talking to so just raise your

00:02:53,040 --> 00:02:57,930
hand if you're a site builder that

00:02:56,159 --> 00:03:02,959
should be almost everyone yep

00:02:57,930 --> 00:03:02,959
you can all click things good femurs

00:03:04,250 --> 00:03:13,500
yeah okay um developers Wow awesome and

00:03:12,290 --> 00:03:17,790
DevOps

00:03:13,500 --> 00:03:19,290
oh sweet nice good handful and is there

00:03:17,790 --> 00:03:21,449
anyone who doesn't fit into any of these

00:03:19,290 --> 00:03:25,079
categories Thanks

00:03:21,449 --> 00:03:30,569
cool okay hopefully you learn a few

00:03:25,079 --> 00:03:33,199
things regardless of who you are and we

00:03:30,569 --> 00:03:38,129
will have time for questions at the end

00:03:33,199 --> 00:03:40,590
if if we're really not making sense feel

00:03:38,129 --> 00:03:43,459
free to like wave your hands wildly and

00:03:40,590 --> 00:03:48,689
tell us that we're crazy

00:03:43,459 --> 00:03:50,909
we're not proud that's fine so to start

00:03:48,689 --> 00:03:53,790
with we're gonna talk about some of the

00:03:50,909 --> 00:03:56,549
changes in the Drupal 8 theme layer then

00:03:53,790 --> 00:03:58,709
we're gonna talk about some of the

00:03:56,549 --> 00:04:01,680
practicals and show you an example and

00:03:58,709 --> 00:04:04,949
then after that we're gonna just kind of

00:04:01,680 --> 00:04:08,009
throw in some more stuff at the end all

00:04:04,949 --> 00:04:10,799
right so the first thing that we're

00:04:08,009 --> 00:04:15,689
gonna be going through is the removal of

00:04:10,799 --> 00:04:17,489
the process layer and so what we did is

00:04:15,689 --> 00:04:20,250
we looked at the theme system and we're

00:04:17,489 --> 00:04:23,430
looking at okay is this useful as it's

00:04:20,250 --> 00:04:24,889
not useful and we found that the process

00:04:23,430 --> 00:04:26,240
layer was useful for

00:04:24,889 --> 00:04:28,039
collecting all the information you got

00:04:26,240 --> 00:04:30,050
from pre-process a lot of people

00:04:28,039 --> 00:04:33,139
actually don't even know when to use

00:04:30,050 --> 00:04:36,050
process and when to use pre process yeah

00:04:33,139 --> 00:04:39,439
so we decided to kind of cut that out

00:04:36,050 --> 00:04:41,539
and is there a possibility for that and

00:04:39,439 --> 00:04:43,400
we found a nice way to do that so we've

00:04:41,539 --> 00:04:45,650
removed that and the only real things

00:04:43,400 --> 00:04:48,800
that kind of linger on in that whole

00:04:45,650 --> 00:04:52,219
that idea of pre process is your assets

00:04:48,800 --> 00:04:53,960
your scripts your styles and they were

00:04:52,219 --> 00:04:57,409
they were getting aggregated from all

00:04:53,960 --> 00:05:00,529
your idea that's add drupal add CSS and

00:04:57,409 --> 00:05:02,150
ruble add jeaious and a few other little

00:05:00,529 --> 00:05:04,340
things like that and that's where

00:05:02,150 --> 00:05:06,319
process did all its work everything else

00:05:04,340 --> 00:05:08,479
was done in pre process so pre process

00:05:06,319 --> 00:05:11,599
is still there but process is gone and

00:05:08,479 --> 00:05:14,629
we managed to let twig deal with it so

00:05:11,599 --> 00:05:18,020
that was kinda nice yeah these it's

00:05:14,629 --> 00:05:20,960
basically the process layer was

00:05:18,020 --> 00:05:24,080
flattening strings likely or creating

00:05:20,960 --> 00:05:26,419
strings if you prefer but in in Drupal 8

00:05:24,080 --> 00:05:29,719
the paradigm is more so something that

00:05:26,419 --> 00:05:31,370
we're calling lazy rendering so keeping

00:05:29,719 --> 00:05:33,979
the raw data alive as long as possible

00:05:31,370 --> 00:05:35,810
and then rendering whatever output as

00:05:33,979 --> 00:05:38,360
late as possible which in most cases now

00:05:35,810 --> 00:05:40,550
means in the twig template in fact that

00:05:38,360 --> 00:05:42,439
gives you that data all the way to the

00:05:40,550 --> 00:05:45,469
last second you have access to that

00:05:42,439 --> 00:05:47,960
information whereas before it was

00:05:45,469 --> 00:05:49,460
flattened into a string and yeah you had

00:05:47,960 --> 00:05:51,169
to deal with this string at that point

00:05:49,460 --> 00:05:52,210
well show it will show an example of

00:05:51,169 --> 00:05:56,750
that in a bit as well

00:05:52,210 --> 00:05:59,659
so theme functions are being converted

00:05:56,750 --> 00:06:03,830
to twig templates they're effectively

00:05:59,659 --> 00:06:06,439
deprecated if you are a contributor or a

00:06:03,830 --> 00:06:08,870
theme developer in Drupal 8 and you add

00:06:06,439 --> 00:06:11,599
a new theme function people will yell at

00:06:08,870 --> 00:06:14,169
you because we're taking them out for a

00:06:11,599 --> 00:06:16,939
reason or they're just their pain I

00:06:14,169 --> 00:06:19,159
haven't met anyone so far who enjoys the

00:06:16,939 --> 00:06:21,319
experience of finding where the theme

00:06:19,159 --> 00:06:24,050
function is taking the whole thing which

00:06:21,319 --> 00:06:25,460
might be massive in some cases copying

00:06:24,050 --> 00:06:27,860
it into your template PHP and then

00:06:25,460 --> 00:06:30,349
changing one or two lines theme item

00:06:27,860 --> 00:06:32,009
list is probably the worst in terms of

00:06:30,349 --> 00:06:33,360
its complexity and the

00:06:32,009 --> 00:06:37,139
fact that a lot of its just building a

00:06:33,360 --> 00:06:39,749
string in the end and the one of the

00:06:37,139 --> 00:06:41,490
smallest ones is theme button you might

00:06:39,749 --> 00:06:43,860
have used that one to change the input

00:06:41,490 --> 00:06:46,680
button into like a actual button type in

00:06:43,860 --> 00:06:48,659
HTML and found that it broke everything

00:06:46,680 --> 00:06:50,689
do you want to talk about where markup

00:06:48,659 --> 00:06:53,639
belongs well yeah

00:06:50,689 --> 00:06:57,569
markup really belongs in the template

00:06:53,639 --> 00:06:59,580
you should be able to see you should be

00:06:57,569 --> 00:07:01,979
able to let your editor actually see

00:06:59,580 --> 00:07:03,360
these these tags and and syntax

00:07:01,979 --> 00:07:04,409
highlight these things instead of being

00:07:03,360 --> 00:07:06,779
instead of a string if you haven't your

00:07:04,409 --> 00:07:07,949
markup in a string the syntax highlight

00:07:06,779 --> 00:07:11,009
is not going to see that mistake that

00:07:07,949 --> 00:07:13,289
you forgot the endings left on or less

00:07:11,009 --> 00:07:15,389
than a greater than signs it's not going

00:07:13,289 --> 00:07:17,430
to be able to tell you like autocomplete

00:07:15,389 --> 00:07:19,110
things for you if you're writing markup

00:07:17,430 --> 00:07:20,580
of string it just feels like you're

00:07:19,110 --> 00:07:22,199
doing it wrong so we're trying to remove

00:07:20,580 --> 00:07:25,139
that and put it into the template so

00:07:22,199 --> 00:07:28,339
that at least you have you can use the

00:07:25,139 --> 00:07:30,149
tools that are meant for those types of

00:07:28,339 --> 00:07:32,819
files yeah

00:07:30,149 --> 00:07:35,699
get rid of all as many of the dot equals

00:07:32,819 --> 00:07:37,589
dot equals equals as we can and then it

00:07:35,699 --> 00:07:39,629
also another kind of side benefit is

00:07:37,589 --> 00:07:42,719
that you don't have to escape ten

00:07:39,629 --> 00:07:45,120
million quotes if you are say quoting an

00:07:42,719 --> 00:07:49,529
HTML attribute I don't know why you'd

00:07:45,120 --> 00:07:52,620
ever do that theme suggestion hooks are

00:07:49,529 --> 00:07:54,479
something new in Drupal 8 I don't know

00:07:52,620 --> 00:07:57,019
if anyone's worked with theme hooks

00:07:54,479 --> 00:08:00,330
suggestions in pre process in Drupal 7

00:07:57,019 --> 00:08:02,459
yeah they're there they're not super

00:08:00,330 --> 00:08:05,370
super common but there's there's often

00:08:02,459 --> 00:08:07,949
use cases for this so a theme suggestion

00:08:05,370 --> 00:08:11,550
the example that I usually use is an

00:08:07,949 --> 00:08:14,189
article node so a node we all know what

00:08:11,550 --> 00:08:15,269
a node is right so there's nodes but

00:08:14,189 --> 00:08:17,610
then there's different types of nodes

00:08:15,269 --> 00:08:19,529
you have your content types so it's

00:08:17,610 --> 00:08:22,499
pretty common and I'm sure you've done

00:08:19,529 --> 00:08:25,469
this on a site where you make a node - -

00:08:22,499 --> 00:08:27,899
article template right and those

00:08:25,469 --> 00:08:30,389
actually come those suggestions come

00:08:27,899 --> 00:08:33,659
from this kind of thing where you're in

00:08:30,389 --> 00:08:35,399
pre process and you're doing your you're

00:08:33,659 --> 00:08:36,870
taking the variables that are coming in

00:08:35,399 --> 00:08:38,909
and you're kind of using that as

00:08:36,870 --> 00:08:40,769
contextual information to say hey

00:08:38,909 --> 00:08:42,209
actually I might want to provide a

00:08:40,769 --> 00:08:46,110
slightly different template for this

00:08:42,209 --> 00:08:48,600
case right so there's sort of a few

00:08:46,110 --> 00:08:51,569
problems with pushing that into the idea

00:08:48,600 --> 00:08:53,189
of preparing variables one of them is

00:08:51,569 --> 00:08:55,439
that you might just be wasting your time

00:08:53,189 --> 00:08:57,089
because if you're preparing all these

00:08:55,439 --> 00:08:58,980
variables and you're saying actually you

00:08:57,089 --> 00:09:02,399
can go over to this completely different

00:08:58,980 --> 00:09:05,550
template then you a lot of the time you

00:09:02,399 --> 00:09:07,889
can waste effort and it could be some

00:09:05,550 --> 00:09:09,180
kind of heavy operation which hopefully

00:09:07,889 --> 00:09:10,560
you're not doing heavy heavy operations

00:09:09,180 --> 00:09:14,970
in pre process but it does happen

00:09:10,560 --> 00:09:17,250
so another problem too is that what we

00:09:14,970 --> 00:09:19,769
want to do hopefully for Drupal 8 is

00:09:17,250 --> 00:09:22,370
make it so that you can have a pre

00:09:19,769 --> 00:09:25,620
process function for that article node

00:09:22,370 --> 00:09:28,680
so right now you would have to do my

00:09:25,620 --> 00:09:30,149
theme or my module pre-process node and

00:09:28,680 --> 00:09:31,470
then you'd have to have an if in there

00:09:30,149 --> 00:09:33,420
so you'd have to say you know if

00:09:31,470 --> 00:09:35,579
variables node type equals equals

00:09:33,420 --> 00:09:38,370
article but it would be nice if you

00:09:35,579 --> 00:09:40,319
could just say my theme pre-process node

00:09:38,370 --> 00:09:42,510
underscore underscore article right if

00:09:40,319 --> 00:09:46,079
you do know directly what you want to

00:09:42,510 --> 00:09:48,720
target so this was the first step along

00:09:46,079 --> 00:09:51,870
that path anyway and this got in last

00:09:48,720 --> 00:09:56,010
fall around Drupal con Prague so there's

00:09:51,870 --> 00:09:56,760
new hooks that come before pre process

00:09:56,010 --> 00:09:59,430
and will kind of give you an overview

00:09:56,760 --> 00:10:02,670
later of what that process looks like

00:09:59,430 --> 00:10:06,540
but essentially you're you're either

00:10:02,670 --> 00:10:08,699
returning an array if you're if you're

00:10:06,540 --> 00:10:10,589
the node module you're returning an

00:10:08,699 --> 00:10:12,899
array and you're saying here's here's my

00:10:10,589 --> 00:10:14,370
initial set of suggestions and if you're

00:10:12,899 --> 00:10:15,750
any other modular theme then it's just

00:10:14,370 --> 00:10:19,130
an alter hook and you're altering an

00:10:15,750 --> 00:10:21,990
array that's all there is to it and

00:10:19,130 --> 00:10:23,760
we'll we'll be able to see if the the

00:10:21,990 --> 00:10:26,040
concept of template suggestions is not

00:10:23,760 --> 00:10:30,809
yet clear we'll be able to see a better

00:10:26,040 --> 00:10:36,319
example in a few minutes so now we're

00:10:30,809 --> 00:10:36,319
gonna say goodbye to theme function this

00:10:37,600 --> 00:10:44,510
glad some people like it was theme

00:10:42,230 --> 00:10:46,160
function returns a string and this is

00:10:44,510 --> 00:10:47,870
the same problem as we had before if

00:10:46,160 --> 00:10:50,000
you're returning a string to the

00:10:47,870 --> 00:10:51,830
template then it's already flat and

00:10:50,000 --> 00:10:53,780
useless to anybody that's trying to

00:10:51,830 --> 00:10:55,430
theme it so you have to go look for

00:10:53,780 --> 00:10:59,630
something higher up the chain to

00:10:55,430 --> 00:11:01,370
manipulate that information so theme is

00:10:59,630 --> 00:11:03,730
still actually in there it's just called

00:11:01,370 --> 00:11:06,620
underscore theme so don't touch it

00:11:03,730 --> 00:11:08,450
but we've tried to get rid of it in all

00:11:06,620 --> 00:11:12,440
cases most of the cases as remaining or

00:11:08,450 --> 00:11:13,660
tests actually but yeah and so now we're

00:11:12,440 --> 00:11:15,950
actually using renderable arrays like

00:11:13,660 --> 00:11:17,840
all over the place we would have

00:11:15,950 --> 00:11:20,000
preferred maybe some object oriented

00:11:17,840 --> 00:11:22,250
solution for this maybe that's a d9

00:11:20,000 --> 00:11:24,470
thing but for now we're at least

00:11:22,250 --> 00:11:26,780
consistent with how we're building the

00:11:24,470 --> 00:11:30,080
building the structure that gets sent to

00:11:26,780 --> 00:11:31,820
a template so at least that part's

00:11:30,080 --> 00:11:33,830
consistent and that's kind of kind of a

00:11:31,820 --> 00:11:36,020
nice thing to have yeah theme functions

00:11:33,830 --> 00:11:37,880
were always producing strings so

00:11:36,020 --> 00:11:41,600
whenever that theme function gets called

00:11:37,880 --> 00:11:43,010
its ending the string yep and and just

00:11:41,600 --> 00:11:46,100
to kind of touch back on that lazy

00:11:43,010 --> 00:11:48,590
rendering concept if this if this this

00:11:46,100 --> 00:11:50,060
is a list variable so let's just pretend

00:11:48,590 --> 00:11:52,490
that this list variable is getting

00:11:50,060 --> 00:11:55,070
passed to some template in the first

00:11:52,490 --> 00:11:56,480
case you're getting a string so if you

00:11:55,070 --> 00:11:58,370
need to do anything special with that

00:11:56,480 --> 00:12:01,940
you're looking at regular expressions

00:11:58,370 --> 00:12:04,250
XPath choose your poison basically and

00:12:01,940 --> 00:12:06,140
in the second case it's actually still

00:12:04,250 --> 00:12:08,510
structured data so like I was saying

00:12:06,140 --> 00:12:11,300
earlier and Joel was saying you actually

00:12:08,510 --> 00:12:13,310
still have access to the raw data so if

00:12:11,300 --> 00:12:15,560
there was some use case in the second

00:12:13,310 --> 00:12:17,840
case from your twig template you could

00:12:15,560 --> 00:12:19,550
say hey I want to pull out the items

00:12:17,840 --> 00:12:21,110
from this list variable and then you

00:12:19,550 --> 00:12:22,850
could do your own completely custom

00:12:21,110 --> 00:12:25,070
markup you don't need to necessarily use

00:12:22,850 --> 00:12:27,970
the preset item list that triple

00:12:25,070 --> 00:12:30,650
provides so it's it has many benefits

00:12:27,970 --> 00:12:33,680
another kind of side benefit of this is

00:12:30,650 --> 00:12:35,750
that it can be a performance improvement

00:12:33,680 --> 00:12:38,380
because if you go down to the template

00:12:35,750 --> 00:12:41,570
and you never even output list then

00:12:38,380 --> 00:12:43,670
you're not losing anything you're not

00:12:41,570 --> 00:12:45,080
wasting time rendering this thing that

00:12:43,670 --> 00:12:48,070
is just kind of sitting there waiting

00:12:45,080 --> 00:12:48,070
and never being used

00:12:48,080 --> 00:12:54,890
oh yeah and twig is in core by the way

00:12:52,180 --> 00:12:56,420
this this talk has evolved quite a bit

00:12:54,890 --> 00:12:59,440
there's a lot of other people talking

00:12:56,420 --> 00:13:01,730
about twig now so we decided that we

00:12:59,440 --> 00:13:05,450
would talk about more of the theme

00:13:01,730 --> 00:13:07,010
system but how many people was probably

00:13:05,450 --> 00:13:09,980
easier how many people haven't heard of

00:13:07,010 --> 00:13:13,970
twig okay couple

00:13:09,980 --> 00:13:16,010
okay so twig is this is a quote is a

00:13:13,970 --> 00:13:19,250
flexible fast and secure template engine

00:13:16,010 --> 00:13:21,920
for PHP the twig engine and the initial

00:13:19,250 --> 00:13:25,519
integration code to Drupal was committed

00:13:21,920 --> 00:13:28,700
at bat camp in November 2012 and the

00:13:25,519 --> 00:13:31,190
conversions of the TPL PHP files or the

00:13:28,700 --> 00:13:35,390
tipple Phipps as they're sometimes

00:13:31,190 --> 00:13:37,519
lovingly called to dot HTML twig files

00:13:35,390 --> 00:13:40,550
which I we haven't really come up with

00:13:37,519 --> 00:13:42,920
something for them yet it's their twig

00:13:40,550 --> 00:13:45,380
templates that was committed during the

00:13:42,920 --> 00:13:49,190
Drupal con Portland in last year May

00:13:45,380 --> 00:13:52,070
2013 and twig is now the default

00:13:49,190 --> 00:13:53,870
template engine for Drupal 8 woohoo so

00:13:52,070 --> 00:13:54,529
yeah that's basically the reason why I

00:13:53,870 --> 00:13:56,750
got involved

00:13:54,529 --> 00:13:59,089
I couldn't imagine another release of

00:13:56,750 --> 00:14:05,170
Drupal that used PHP template and called

00:13:59,089 --> 00:14:08,899
it a templating language so yeah so

00:14:05,170 --> 00:14:10,820
tweets us some pretty cool stuff and not

00:14:08,899 --> 00:14:12,649
necessarily twig but just sort of the

00:14:10,820 --> 00:14:14,120
momentum behind it this this is

00:14:12,649 --> 00:14:16,880
something that we probably could have

00:14:14,120 --> 00:14:18,920
done with PHP template but since we had

00:14:16,880 --> 00:14:20,870
all this momentum and movement this is

00:14:18,920 --> 00:14:25,279
we got twig and we we've got some cool

00:14:20,870 --> 00:14:26,570
stuff like this so in Drupal 8 there's

00:14:25,279 --> 00:14:28,670
some there's some things kind of moving

00:14:26,570 --> 00:14:31,250
around I it says settings dot PHP at the

00:14:28,670 --> 00:14:33,079
top but right now I believe it's in a

00:14:31,250 --> 00:14:35,810
file called something like example dot

00:14:33,079 --> 00:14:37,820
Settings dot local dot PHP somewhere in

00:14:35,810 --> 00:14:39,920
one structure one pulled her down yeah

00:14:37,820 --> 00:14:41,540
it's in there somewhere or you can just

00:14:39,920 --> 00:14:43,250
add this line to your settings PHP that

00:14:41,540 --> 00:14:45,709
works perfectly fine too so anyway twig

00:14:43,250 --> 00:14:47,209
twig underscore debug equals true will

00:14:45,709 --> 00:14:50,420
be your new best friend and Drupal eight

00:14:47,209 --> 00:14:53,540
theming so once you turn that on clear

00:14:50,420 --> 00:14:54,949
your caches view your source everything

00:14:53,540 --> 00:14:57,290
that's coming from a twig template gets

00:14:54,949 --> 00:14:59,690
marked in sorry gets wrapped in HTML

00:14:57,290 --> 00:15:01,220
comments so

00:14:59,690 --> 00:15:04,490
let me see if I couldn't kind of

00:15:01,220 --> 00:15:06,050
highlight this so no I can yeah a little

00:15:04,490 --> 00:15:09,080
bit anyway this stuff at the top here

00:15:06,050 --> 00:15:12,500
that is the theme suggestions that I was

00:15:09,080 --> 00:15:15,110
talking about so it goes from most

00:15:12,500 --> 00:15:18,860
specific to least specific so the first

00:15:15,110 --> 00:15:20,300
one that it finds it will use and the

00:15:18,860 --> 00:15:23,690
template that's currently being used

00:15:20,300 --> 00:15:25,640
will have a little X beside it so I

00:15:23,690 --> 00:15:28,790
don't know if anyone's tried that try to

00:15:25,640 --> 00:15:31,070
develop Emer but this is basically that

00:15:28,790 --> 00:15:33,020
but it doesn't mess up your CSS and

00:15:31,070 --> 00:15:37,910
JavaScript that you're trying to do in

00:15:33,020 --> 00:15:40,070
your theme yeah so I mean this is one of

00:15:37,910 --> 00:15:42,280
my favorite things in in Drupal 8

00:15:40,070 --> 00:15:43,880
because I've always I always struggled

00:15:42,280 --> 00:15:46,130
especially when I was first learning

00:15:43,880 --> 00:15:46,760
Drupal theming like how where is this

00:15:46,130 --> 00:15:48,500
coming from

00:15:46,760 --> 00:15:50,150
right you want it to you know you want

00:15:48,500 --> 00:15:52,100
to change something where is coming from

00:15:50,150 --> 00:15:55,190
and the great thing with this is

00:15:52,100 --> 00:15:57,280
basically how I envision things and how

00:15:55,190 --> 00:15:58,970
it works today is you basically

00:15:57,280 --> 00:16:01,940
right-click something on the page

00:15:58,970 --> 00:16:03,560
inspect it and then it tells you where

00:16:01,940 --> 00:16:05,930
the template is and actually I should

00:16:03,560 --> 00:16:08,060
point out too that it gives you the full

00:16:05,930 --> 00:16:12,950
path in the file system to where that

00:16:08,060 --> 00:16:15,350
template is yes this shows in your

00:16:12,950 --> 00:16:16,610
source yeah so I mean it's not something

00:16:15,350 --> 00:16:18,560
you really want to turn on for

00:16:16,610 --> 00:16:23,870
production but for development purposes

00:16:18,560 --> 00:16:25,400
this is fantastic and we'll show you a

00:16:23,870 --> 00:16:27,650
little live demo of that a little bit

00:16:25,400 --> 00:16:30,470
later so let's talk a little bit about

00:16:27,650 --> 00:16:31,850
sandwiches it's good that you've already

00:16:30,470 --> 00:16:35,540
eaten the first time we gave this was

00:16:31,850 --> 00:16:37,520
like right before lunch so we don't feel

00:16:35,540 --> 00:16:40,220
as bad this time we were hungry when we

00:16:37,520 --> 00:16:43,970
came up with the example though the code

00:16:40,220 --> 00:16:45,500
is on github as well github comm slash

00:16:43,970 --> 00:16:46,850
Drupal twig slash sandwich if you want

00:16:45,500 --> 00:16:50,870
to take a peek it's just like a little

00:16:46,850 --> 00:16:53,440
example module so we're trying to give

00:16:50,870 --> 00:16:53,440
an overview of

00:16:56,439 --> 00:17:05,829
I'm sorry I'm going too far

00:17:00,949 --> 00:17:05,829
sure yeah sure

00:17:07,600 --> 00:17:10,929
missing this light

00:17:14,620 --> 00:17:23,350
yes

00:17:17,350 --> 00:17:24,279
good so kind of walk you through the so

00:17:23,350 --> 00:17:27,429
we're going to kind of walk you through

00:17:24,279 --> 00:17:30,090
how you get stuff be mobile so that

00:17:27,429 --> 00:17:32,289
maybe if you're doing stuff for

00:17:30,090 --> 00:17:35,009
contribute rying to make something so

00:17:32,289 --> 00:17:39,840
that somebody else can extend it and

00:17:35,009 --> 00:17:42,850
what Drupal does for you oh geez

00:17:39,840 --> 00:17:46,929
can you hear me now okay I'll be really

00:17:42,850 --> 00:17:50,970
close so we're gonna try to give you an

00:17:46,929 --> 00:17:54,789
example of what you'd use to help

00:17:50,970 --> 00:17:58,870
provide the mobile output for for

00:17:54,789 --> 00:18:01,720
contribs what actually we are doing in

00:17:58,870 --> 00:18:06,750
Drupal core to give you this information

00:18:01,720 --> 00:18:08,500
so define define is how you kind of

00:18:06,750 --> 00:18:11,470
define that you're going to be

00:18:08,500 --> 00:18:12,879
developing a twig template and you're

00:18:11,470 --> 00:18:15,730
gonna find what variables are going to

00:18:12,879 --> 00:18:18,009
be put into that or be passed along to

00:18:15,730 --> 00:18:20,049
that that theme template and also what's

00:18:18,009 --> 00:18:22,360
the templates name in this case it's

00:18:20,049 --> 00:18:29,350
sandwich and the variables are like

00:18:22,360 --> 00:18:30,700
attributes name bread cheese etc and

00:18:29,350 --> 00:18:40,720
this is the kind of the rendering flow

00:18:30,700 --> 00:18:42,190
that happens it there we go okay so then

00:18:40,720 --> 00:18:44,740
the next step is we're gonna be building

00:18:42,190 --> 00:18:47,169
the building the information passing the

00:18:44,740 --> 00:18:49,389
information into the template so we need

00:18:47,169 --> 00:18:50,559
to build a render array and so in this

00:18:49,389 --> 00:18:54,639
case we have a function called build

00:18:50,559 --> 00:18:56,350
that's irrelevant and we're building a

00:18:54,639 --> 00:18:59,049
render array so you have theme and then

00:18:56,350 --> 00:19:02,169
the name of that theme hook which was

00:18:59,049 --> 00:19:04,149
sandwich and we're gonna be passing a

00:19:02,169 --> 00:19:07,090
bunch of variables and we can pass in

00:19:04,149 --> 00:19:10,299
stuff from translation translated

00:19:07,090 --> 00:19:16,059
variables or translated strings in this

00:19:10,299 --> 00:19:18,190
case or an array of attributes any type

00:19:16,059 --> 00:19:19,299
of variable you're trying to pass to any

00:19:18,190 --> 00:19:21,580
type of data that you're trying to pass

00:19:19,299 --> 00:19:23,019
to a twig template that's where you kind

00:19:21,580 --> 00:19:27,120
of pass it in isn't through the

00:19:23,019 --> 00:19:30,330
variables of the render render blurry

00:19:27,120 --> 00:19:30,330
that's better

00:19:30,670 --> 00:19:35,140
and this is how you take all that

00:19:33,130 --> 00:19:39,400
information and present it inside your

00:19:35,140 --> 00:19:40,960
trick template so we have the attributes

00:19:39,400 --> 00:19:42,640
gets put up into the top and then we

00:19:40,960 --> 00:19:44,260
have the name right after in those curly

00:19:42,640 --> 00:19:47,680
brackets or how you do print so that's

00:19:44,260 --> 00:19:50,710
your echo or print and in PHP it's a lot

00:19:47,680 --> 00:19:53,200
simpler and less likely that you won't

00:19:50,710 --> 00:19:55,210
make a mistake because well your

00:19:53,200 --> 00:19:57,040
template will are you sorry your ID you

00:19:55,210 --> 00:20:00,520
will probably syntax highlight like this

00:19:57,040 --> 00:20:03,370
kind of us then you have like if

00:20:00,520 --> 00:20:05,320
statements so this twig actually has if

00:20:03,370 --> 00:20:10,840
statements as well and you can check to

00:20:05,320 --> 00:20:12,190
see if something has a is empty and also

00:20:10,840 --> 00:20:14,500
has four loops as well at the very

00:20:12,190 --> 00:20:16,450
bottom of the screen there you'll see we

00:20:14,500 --> 00:20:18,280
have the concept of four loops there's

00:20:16,450 --> 00:20:22,480
some things in the templating language

00:20:18,280 --> 00:20:24,970
that are are there for convenience sake

00:20:22,480 --> 00:20:26,680
and but there's not absolutely

00:20:24,970 --> 00:20:29,020
everything that you have in PHP is kind

00:20:26,680 --> 00:20:32,950
of limited to limited scope and there's

00:20:29,020 --> 00:20:36,660
some niceties there too and what we get

00:20:32,950 --> 00:20:39,460
out of that is a nice little sandwich

00:20:36,660 --> 00:20:41,380
it's a sandwich for like a recipe or non

00:20:39,460 --> 00:20:43,000
recipe with like a a menu of what's

00:20:41,380 --> 00:20:46,350
inside of our sandwich and we just kind

00:20:43,000 --> 00:20:53,230
of spit it out into a template and

00:20:46,350 --> 00:20:55,200
format it the way I wanted it all right

00:20:53,230 --> 00:21:00,540
demo time enough looking at screenshots

00:20:55,200 --> 00:21:00,540
let's do the real thing all right so

00:21:01,920 --> 00:21:12,550
eight can't see what I'm typing

00:21:06,550 --> 00:21:19,570
there we go okay so we got some

00:21:12,550 --> 00:21:23,140
sandwiches here right cool so I want to

00:21:19,570 --> 00:21:25,710
show a quick demo of twig debug this

00:21:23,140 --> 00:21:28,450
might take some doing so bear with me

00:21:25,710 --> 00:21:31,170
live demo good times

00:21:28,450 --> 00:21:31,170
okay so

00:21:33,150 --> 00:21:39,850
and we made this sandwich module really

00:21:36,460 --> 00:21:41,140
quick also while we were hungry and just

00:21:39,850 --> 00:21:42,730
trying to show all the different

00:21:41,140 --> 00:21:44,440
favorite variables that you can kind of

00:21:42,730 --> 00:21:46,419
pass in through a render a renderable

00:21:44,440 --> 00:21:50,140
array and then you can use those exact

00:21:46,419 --> 00:21:51,700
same variables in your template so

00:21:50,140 --> 00:21:53,919
everything you passed through is is

00:21:51,700 --> 00:21:55,659
available through your template and

00:21:53,919 --> 00:21:58,450
you're defining the ideas that you're

00:21:55,659 --> 00:21:59,830
you're defining what you can be passing

00:21:58,450 --> 00:22:03,730
to your templates so your template knows

00:21:59,830 --> 00:22:05,289
what to expect your your building and

00:22:03,730 --> 00:22:06,669
actually passing those variables into

00:22:05,289 --> 00:22:08,980
that template so that's that build stage

00:22:06,669 --> 00:22:12,280
and then the this the last part there is

00:22:08,980 --> 00:22:15,070
getting that opening up your template

00:22:12,280 --> 00:22:17,860
and putting in those variables that it's

00:22:15,070 --> 00:22:19,270
supposed to expect and trying to deal

00:22:17,860 --> 00:22:22,720
with them either by checking to see if

00:22:19,270 --> 00:22:24,490
they exist are not empty or wrapping

00:22:22,720 --> 00:22:26,230
them in in tags that you're looking to

00:22:24,490 --> 00:22:28,179
wrap them in essentially and that's

00:22:26,230 --> 00:22:30,220
that's what you're getting it usually

00:22:28,179 --> 00:22:34,510
takes that I was the sorry that was the

00:22:30,220 --> 00:22:39,419
before and let's just search for

00:22:34,510 --> 00:22:46,750
sandwich in here there we go

00:22:39,419 --> 00:22:50,460
so page - test sandwich there we go so

00:22:46,750 --> 00:22:51,780
this is our sandwich template all right

00:22:50,460 --> 00:22:56,530
cool

00:22:51,780 --> 00:23:02,799
took debug goodness and we can also just

00:22:56,530 --> 00:23:06,640
show you quickly the code behind this it

00:23:02,799 --> 00:23:08,230
is only github as well so let's start

00:23:06,640 --> 00:23:12,789
with the info file there's a lot of

00:23:08,230 --> 00:23:14,500
gamal in Drupal 8 so it's instead the

00:23:12,789 --> 00:23:16,809
info file was before it was like kind of

00:23:14,500 --> 00:23:18,460
like a dot I and I thing so a lot of

00:23:16,809 --> 00:23:19,960
things are standardized into Yambol now

00:23:18,460 --> 00:23:23,409
and some hooks and things have been

00:23:19,960 --> 00:23:25,390
replaced by animals so it's it's pretty

00:23:23,409 --> 00:23:28,179
good change I think I think most people

00:23:25,390 --> 00:23:31,210
like it so your info files is fairly

00:23:28,179 --> 00:23:34,570
similar we also have a routing file

00:23:31,210 --> 00:23:37,299
which is similar to hook menu in Drupal

00:23:34,570 --> 00:23:39,460
7 does most of the same things except

00:23:37,299 --> 00:23:43,059
for creating menu items it just does

00:23:39,460 --> 00:23:45,250
your router and what else do we have we

00:23:43,059 --> 00:23:48,490
have a module file I think

00:23:45,250 --> 00:23:52,000
our controller yep so our module file is

00:23:48,490 --> 00:23:54,010
our where our hook theme goes dot module

00:23:52,000 --> 00:23:55,720
files are optional in Drupal 8 so if you

00:23:54,010 --> 00:23:58,539
don't have any procedural code like this

00:23:55,720 --> 00:24:03,250
you don't need to have one so as more of

00:23:58,539 --> 00:24:07,390
the code is object oriented and then you

00:24:03,250 --> 00:24:09,909
also have a controller which is is

00:24:07,390 --> 00:24:12,429
basically essentially like the same as a

00:24:09,909 --> 00:24:14,650
page callback in Drupal 7 that's really

00:24:12,429 --> 00:24:16,870
all this is so interest in this case

00:24:14,650 --> 00:24:20,950
it's just it's returning this this big

00:24:16,870 --> 00:24:22,809
render array okay so that's the live

00:24:20,950 --> 00:24:34,380
demo portion let me see if I can get

00:24:22,809 --> 00:24:37,720
back to the slides there we go okay

00:24:34,380 --> 00:24:39,820
so we're just gonna give you a quick

00:24:37,720 --> 00:24:41,590
overview of the rendering flow this is

00:24:39,820 --> 00:24:44,049
more probably more of a reference thing

00:24:41,590 --> 00:24:47,679
just so that you know this is how things

00:24:44,049 --> 00:24:50,470
work I know it helped me a lot to

00:24:47,679 --> 00:24:53,200
understand things too to actually get an

00:24:50,470 --> 00:24:55,750
overview of when things get called and

00:24:53,200 --> 00:24:58,030
everything so Drupal render is that the

00:24:55,750 --> 00:25:00,640
primary thing that's going to spit out

00:24:58,030 --> 00:25:04,480
markup inside Drupal render you have

00:25:00,640 --> 00:25:06,730
optional pre-rendered callbacks and that

00:25:04,480 --> 00:25:08,620
is working on your structured data so

00:25:06,730 --> 00:25:11,409
normally your render rays so if you need

00:25:08,620 --> 00:25:12,850
to do if there's something it's usually

00:25:11,409 --> 00:25:15,070
something that you're kind of doing as a

00:25:12,850 --> 00:25:17,080
reusable thing most cases you can do in

00:25:15,070 --> 00:25:18,610
pre process but there's some cases where

00:25:17,080 --> 00:25:20,409
you need to do some kind of reusable

00:25:18,610 --> 00:25:23,260
pattern that's when you might use pre

00:25:20,409 --> 00:25:26,200
render and then the underscore theme

00:25:23,260 --> 00:25:29,289
which is the artist previously known as

00:25:26,200 --> 00:25:30,880
theme is called and then inside there

00:25:29,289 --> 00:25:33,640
you have the new theme suggestion hooks

00:25:30,880 --> 00:25:36,100
and then you have pre process functions

00:25:33,640 --> 00:25:38,020
and then you have the template actually

00:25:36,100 --> 00:25:40,720
getting rendered so in our case of the

00:25:38,020 --> 00:25:43,270
twig template and then you're kind of

00:25:40,720 --> 00:25:46,450
back out into Drupal render and then you

00:25:43,270 --> 00:25:48,340
have post render call box and the call

00:25:46,450 --> 00:25:50,559
box are just PHP cobbles by the way they

00:25:48,340 --> 00:25:53,440
can be it can be a procedural function

00:25:50,559 --> 00:25:55,500
or can be a method on class and the post

00:25:53,440 --> 00:25:58,080
render functions operate on

00:25:55,500 --> 00:26:00,420
the string of HTML so there's some use

00:25:58,080 --> 00:26:02,460
use cases there for caching for example

00:26:00,420 --> 00:26:04,470
or you might be putting some kind of a

00:26:02,460 --> 00:26:06,390
token in there and then in the post

00:26:04,470 --> 00:26:08,700
render you could replace that token with

00:26:06,390 --> 00:26:15,150
an actual value but still keep it cached

00:26:08,700 --> 00:26:17,070
things like that so that's that and then

00:26:15,150 --> 00:26:20,900
we're gonna talk about some more stuff

00:26:17,070 --> 00:26:20,900
so joeld you wanna talk about twig magic

00:26:21,050 --> 00:26:31,650
okay so there's a number of ways that

00:26:27,930 --> 00:26:33,000
twig actually will try to determine what

00:26:31,650 --> 00:26:36,450
your variable is when you're trying to

00:26:33,000 --> 00:26:38,610
print it and for the first thing is you

00:26:36,450 --> 00:26:40,980
can pass the the variable in directly so

00:26:38,610 --> 00:26:44,010
sandwich has trees the cheese and that's

00:26:40,980 --> 00:26:46,740
the array key and it will print cheese

00:26:44,010 --> 00:26:49,620
so if you do curly brackets cheese you

00:26:46,740 --> 00:26:52,380
will be getting the value of that that

00:26:49,620 --> 00:26:55,830
array key the second one is a property

00:26:52,380 --> 00:26:58,550
of an object if I pass sandwich if it

00:26:55,830 --> 00:27:01,260
was an object sandwich is an object

00:26:58,550 --> 00:27:03,120
cheese was the property of that object I

00:27:01,260 --> 00:27:07,740
can actually do the same thing ago

00:27:03,120 --> 00:27:09,330
sandwich dot cheese and the same thing

00:27:07,740 --> 00:27:11,580
is if there's a method so whenever

00:27:09,330 --> 00:27:12,810
you're printing something it twig is

00:27:11,580 --> 00:27:15,150
actually going to be going through a

00:27:12,810 --> 00:27:17,340
list of different trying to find what

00:27:15,150 --> 00:27:21,330
you're trying to print and if you pass

00:27:17,340 --> 00:27:24,990
in if you pass in an object it'll

00:27:21,330 --> 00:27:27,570
actually look for a property a method a

00:27:24,990 --> 00:27:30,570
getter method with the word get in front

00:27:27,570 --> 00:27:32,490
of it and and is if you're trying to

00:27:30,570 --> 00:27:35,040
deal with boolean's so if you do use

00:27:32,490 --> 00:27:37,470
those conventions of get or is in your

00:27:35,040 --> 00:27:41,370
method names and their public twig will

00:27:37,470 --> 00:27:44,220
be able to use those so and then you can

00:27:41,370 --> 00:27:47,310
also use magic is that magic magic

00:27:44,220 --> 00:27:49,080
headers those are PHP constructs that

00:27:47,310 --> 00:27:51,300
allow you to be a little more dynamic

00:27:49,080 --> 00:27:54,570
with what the actual key is going to be

00:27:51,300 --> 00:27:55,860
you pass in a key and then your object

00:27:54,570 --> 00:27:59,520
will actually determine whether or not

00:27:55,860 --> 00:28:01,770
it has that that that key and and then

00:27:59,520 --> 00:28:03,359
tried to print its value and you can

00:28:01,770 --> 00:28:05,129
store that anywhere

00:28:03,359 --> 00:28:07,889
so yeah there's lots of ways that twig

00:28:05,129 --> 00:28:09,989
will try to get at your data as that

00:28:07,889 --> 00:28:11,549
you're passing through so you have lots

00:28:09,989 --> 00:28:16,320
of options and you can get quite

00:28:11,549 --> 00:28:18,659
creative with how how those methods will

00:28:16,320 --> 00:28:20,269
work or if you need to have a method on

00:28:18,659 --> 00:28:23,129
an object that gets passed at Wigan

00:28:20,269 --> 00:28:28,320
maybe changes depending on what

00:28:23,129 --> 00:28:30,690
parameters get passed in it basically

00:28:28,320 --> 00:28:34,739
this is the order that it does it in so

00:28:30,690 --> 00:28:36,720
the first one it finds it uses cool yeah

00:28:34,739 --> 00:28:38,309
so the the question was what if you have

00:28:36,720 --> 00:28:41,730
multiples by the way for the for the

00:28:38,309 --> 00:28:45,179
recording so and then just add on just

00:28:41,730 --> 00:28:47,940
to finish this part if none of these are

00:28:45,179 --> 00:28:53,369
true you'll just get a null value back

00:28:47,940 --> 00:28:54,749
and also by the way twig magic is one of

00:28:53,369 --> 00:28:57,359
the coolest features of twig in my

00:28:54,749 --> 00:28:58,409
opinion and it's also one of the slowest

00:28:57,359 --> 00:29:02,720
right because it's doing all these

00:28:58,409 --> 00:29:06,739
checks however there's a PHP extension I

00:29:02,720 --> 00:29:10,409
believe it's just called twig and that

00:29:06,739 --> 00:29:13,379
provides AC native version of this

00:29:10,409 --> 00:29:15,419
function so it in your templates that

00:29:13,379 --> 00:29:18,149
are compiled it replaces all those with

00:29:15,419 --> 00:29:19,950
its own kind of native PHP function and

00:29:18,149 --> 00:29:22,609
that makes it a lot faster so if you're

00:29:19,950 --> 00:29:25,590
running if performance is an issue then

00:29:22,609 --> 00:29:27,269
get the PHP extension set up I don't

00:29:25,590 --> 00:29:32,850
have it set up on my laptop that's

00:29:27,269 --> 00:29:35,129
pretty easy then and attributes so

00:29:32,850 --> 00:29:38,309
attributes are quite different in Drupal

00:29:35,129 --> 00:29:40,259
8 there may still be some changes but

00:29:38,309 --> 00:29:42,779
this is this is the status quo right now

00:29:40,259 --> 00:29:45,149
so you you may have seen things like

00:29:42,779 --> 00:29:46,559
attributes array classes array things

00:29:45,149 --> 00:29:49,769
like that if you're working especially

00:29:46,559 --> 00:29:53,700
in the pre process layer in Drupal 8

00:29:49,769 --> 00:29:55,200
there is a attributes object which has

00:29:53,700 --> 00:29:57,239
its own storage and everything but also

00:29:55,200 --> 00:30:00,480
knows how to print out all your

00:29:57,239 --> 00:30:02,639
different attributes so there's a an

00:30:00,480 --> 00:30:04,559
array of attributes for example classes

00:30:02,639 --> 00:30:05,940
there's a boolean which would be like

00:30:04,559 --> 00:30:07,499
you're checked and unchecked and that

00:30:05,940 --> 00:30:10,080
kind of thing and then there's just

00:30:07,499 --> 00:30:13,919
string so if you have like an ID ID or

00:30:10,080 --> 00:30:15,930
something so in your twig template all

00:30:13,919 --> 00:30:17,820
you're doing is you are

00:30:15,930 --> 00:30:20,190
printing doing the double curly braces

00:30:17,820 --> 00:30:22,800
and doing attributes and then under the

00:30:20,190 --> 00:30:25,160
behind-the-scenes nots calling the two

00:30:22,800 --> 00:30:30,260
string method on the object to actually

00:30:25,160 --> 00:30:33,180
spit out a string and if you need to

00:30:30,260 --> 00:30:37,080
split out the classes you can do that as

00:30:33,180 --> 00:30:39,570
well there's a new we added a few

00:30:37,080 --> 00:30:41,190
filters and functions to twig if you

00:30:39,570 --> 00:30:43,440
want to learn more about extending twig

00:30:41,190 --> 00:30:45,330
you can come to the twig playground lab

00:30:43,440 --> 00:30:46,530
tomorrow and we'll we'll have that time

00:30:45,330 --> 00:30:48,960
and stuff for that at the end of this

00:30:46,530 --> 00:30:51,600
but anyway if you want to split out the

00:30:48,960 --> 00:30:53,970
attributes you do attributes class

00:30:51,600 --> 00:30:58,590
that's kind of that drill ability thing

00:30:53,970 --> 00:31:02,220
and then you do attributes pipe without

00:30:58,590 --> 00:31:03,600
class and we won't go too much into the

00:31:02,220 --> 00:31:06,000
filters and functions there is another

00:31:03,600 --> 00:31:08,580
twig talk as well today that will talk

00:31:06,000 --> 00:31:15,080
more about that but it's it's pretty

00:31:08,580 --> 00:31:18,780
sweet so that's pretty much it thank you

00:31:15,080 --> 00:31:21,630
you can yell at us on Twitter you can go

00:31:18,780 --> 00:31:24,540
to Drupal twig org we hang up an IRC a

00:31:21,630 --> 00:31:27,120
lot at drupal - twig and there's a

00:31:24,540 --> 00:31:28,620
Drupal twig hashtag where we post hang

00:31:27,120 --> 00:31:30,870
ups and stuff we do hangouts usually

00:31:28,620 --> 00:31:33,150
every week I also want to mention before

00:31:30,870 --> 00:31:35,510
I forget that there's a big sprint

00:31:33,150 --> 00:31:39,330
Friday so if anyone is interested in

00:31:35,510 --> 00:31:41,490
helping us make this even better and fix

00:31:39,330 --> 00:31:43,470
some of the bugs and just in general

00:31:41,490 --> 00:31:44,910
just make it better then please come to

00:31:43,470 --> 00:31:49,290
the Sprint's on Friday we'd be really

00:31:44,910 --> 00:31:52,110
happy to have you there is a mic kind of

00:31:49,290 --> 00:31:56,940
in the middle there in in between rows

00:31:52,110 --> 00:32:00,450
if anyone has questions about anything

00:31:56,940 --> 00:32:02,040
at all or if you don't want to get up

00:32:00,450 --> 00:32:05,750
you can you can shout it out and I can

00:32:02,040 --> 00:32:05,750
repeat it sure

00:32:09,389 --> 00:32:14,110
no that's that's a good question the

00:32:11,889 --> 00:32:18,009
theme registry so far hasn't changed too

00:32:14,110 --> 00:32:20,529
much some of the logic has moved into a

00:32:18,009 --> 00:32:24,309
service well it's basically just a class

00:32:20,529 --> 00:32:26,739
but oh sorry thank you yeah thank you

00:32:24,309 --> 00:32:28,149
so the question was essentially has

00:32:26,739 --> 00:32:31,320
anything does this affect anything

00:32:28,149 --> 00:32:34,029
having to do with the theme registry so

00:32:31,320 --> 00:32:35,830
to my knowledge there's there's minimal

00:32:34,029 --> 00:32:39,700
with any changes to the theme registry

00:32:35,830 --> 00:32:41,730
so far that might change but not to my

00:32:39,700 --> 00:32:41,730
knowledge

00:32:50,159 --> 00:33:07,659
yeah four blocks or twig blocks okay so

00:33:05,590 --> 00:33:10,119
so the question was what's the game plan

00:33:07,659 --> 00:33:12,279
for twig blocks we originally weren't

00:33:10,119 --> 00:33:14,230
planning to use them in core but now

00:33:12,279 --> 00:33:16,480
with the actual just to make it extra

00:33:14,230 --> 00:33:18,789
confusing the block template has a twig

00:33:16,480 --> 00:33:22,869
block inside of it you know it's the

00:33:18,789 --> 00:33:24,759
like the exhibit thing um but anyway so

00:33:22,869 --> 00:33:25,570
does that help I mean we're worried I

00:33:24,759 --> 00:33:28,359
don't know if we're gonna introduce

00:33:25,570 --> 00:33:32,350
anymore in in Drupal 8 but we'll be a

00:33:28,359 --> 00:33:33,789
lot of it in contributing features we

00:33:32,350 --> 00:33:37,299
haven't we haven't used them in court

00:33:33,789 --> 00:33:39,429
too often but what it'll actually

00:33:37,299 --> 00:33:41,019
provide is we try to make it we try to

00:33:39,429 --> 00:33:44,019
at least use one and so that one

00:33:41,019 --> 00:33:46,210
actually added an extra feature that

00:33:44,019 --> 00:33:49,179
allows you to extend extend existing

00:33:46,210 --> 00:33:51,700
blocks or existing templates in in

00:33:49,179 --> 00:33:56,080
Drupal system with some little helpers

00:33:51,700 --> 00:33:58,899
for the name spacing and it should help

00:33:56,080 --> 00:34:03,129
you be able to extend your own templates

00:33:58,899 --> 00:34:04,989
so if you copy your page TPL or no TBL

00:34:03,129 --> 00:34:06,940
in your theme you should be able to

00:34:04,989 --> 00:34:08,409
extend an existing one for your articles

00:34:06,940 --> 00:34:11,230
node and you don't have to copy and

00:34:08,409 --> 00:34:12,549
paste all of the HTML that's surrounding

00:34:11,230 --> 00:34:15,399
the stuff that you're changing and

00:34:12,549 --> 00:34:17,799
that's the big benefit of that yeah and

00:34:15,399 --> 00:34:20,589
I'm positive there will be more of that

00:34:17,799 --> 00:34:22,179
in the actually I'll go to this slide so

00:34:20,589 --> 00:34:24,549
you guys don't miss this and by the way

00:34:22,179 --> 00:34:26,950
if you go to the session node for this

00:34:24,549 --> 00:34:28,629
session on the Drupal con Austin site we

00:34:26,950 --> 00:34:29,950
have a link to the slide deck at the

00:34:28,629 --> 00:34:33,069
very bottom there's the link that just

00:34:29,950 --> 00:34:35,349
says slide deck if you don't want to dig

00:34:33,069 --> 00:34:36,970
these up but these are all so there's

00:34:35,349 --> 00:34:37,750
twig friendly curly braces and maybe

00:34:36,970 --> 00:34:40,359
your templates

00:34:37,750 --> 00:34:41,649
Ryan Weaver today at five and then

00:34:40,359 --> 00:34:44,710
there's two talks two more that are

00:34:41,649 --> 00:34:47,250
pretty heavily related to this stuff see

00:34:44,710 --> 00:34:50,079
for RL Carl Wiedemann is giving one on

00:34:47,250 --> 00:34:51,819
object oriented render API and then me

00:34:50,079 --> 00:34:53,710
Joelle and Morton are doing a twig

00:34:51,819 --> 00:34:55,720
playground lab where we're gonna be

00:34:53,710 --> 00:34:57,400
showing off a lot of cool things I think

00:34:55,720 --> 00:34:58,839
the time is actually not correct for the

00:34:57,400 --> 00:35:03,099
twig playground because it's definitely

00:34:58,839 --> 00:35:05,799
longer than an hour and also the

00:35:03,099 --> 00:35:08,770
obligatory evaluate our session please

00:35:05,799 --> 00:35:10,630
let us know how we did did you get what

00:35:08,770 --> 00:35:11,770
you expected to get out of this is there

00:35:10,630 --> 00:35:16,510
anything you wish we would have talked

00:35:11,770 --> 00:35:18,130
about etc etc and yeah I just wanted to

00:35:16,510 --> 00:35:26,650
get that in there before everyone leaves

00:35:18,130 --> 00:35:28,390
any other questions it right now it's a

00:35:26,650 --> 00:35:29,859
it's actually still hasn't been

00:35:28,390 --> 00:35:32,200
converted it's still using a theme

00:35:29,859 --> 00:35:33,460
function but there's two two approaches

00:35:32,200 --> 00:35:36,400
one of them is the straight conversion

00:35:33,460 --> 00:35:38,140
issue to get it just into tweak as is

00:35:36,400 --> 00:35:41,369
and the other one is it looks really

00:35:38,140 --> 00:35:44,470
promising is a recursive macro that

00:35:41,369 --> 00:35:46,089
looks awesome because it allows you to

00:35:44,470 --> 00:35:50,589
have all that all the template

00:35:46,089 --> 00:35:52,450
information in one one template file so

00:35:50,589 --> 00:35:54,099
there's two of them maybe you can go in

00:35:52,450 --> 00:36:00,569
there and flag which one's your favorite

00:35:54,099 --> 00:36:03,099
oh yeah so the question was what's

00:36:00,569 --> 00:36:05,170
what's happening with the menu system

00:36:03,099 --> 00:36:09,750
and it's rendering with twig correct

00:36:05,170 --> 00:36:09,750
yeah more or less any questions

00:36:16,990 --> 00:36:21,970
okay so the question was if you add a

00:36:19,270 --> 00:36:23,500
new field to a content type do you then

00:36:21,970 --> 00:36:25,960
need to go into your twig template and

00:36:23,500 --> 00:36:29,890
add it to your twig template so the

00:36:25,960 --> 00:36:32,290
short answer is no because it's similar

00:36:29,890 --> 00:36:35,260
to Drupal 7 that you have in your node

00:36:32,290 --> 00:36:38,500
at least you have I believe it's just

00:36:35,260 --> 00:36:40,480
the content variable and so if you print

00:36:38,500 --> 00:36:43,140
if you do double curly braces content

00:36:40,480 --> 00:36:45,310
that will print out all your fields and

00:36:43,140 --> 00:36:47,080
that without filter that we showed

00:36:45,310 --> 00:36:49,930
earlier can be used on render arrays as

00:36:47,080 --> 00:36:51,520
well so if you not replaces actually the

00:36:49,930 --> 00:36:52,900
show and hide which I don't know about

00:36:51,520 --> 00:36:57,580
you guys but I've always found that

00:36:52,900 --> 00:36:59,170
really confusing yes yeah so it's it

00:36:57,580 --> 00:37:00,339
reads a lot more like English now and

00:36:59,170 --> 00:37:02,230
you don't have to remember oh what's

00:37:00,339 --> 00:37:04,180
shown what's hidden and so it's it's

00:37:02,230 --> 00:37:06,640
basically now it's you know if you

00:37:04,180 --> 00:37:08,680
wanted to print out your links

00:37:06,640 --> 00:37:09,970
underneath your content if you even want

00:37:08,680 --> 00:37:11,890
to print out your links twice you can do

00:37:09,970 --> 00:37:14,260
that really easily now new content dot

00:37:11,890 --> 00:37:15,780
links and content without links and then

00:37:14,260 --> 00:37:20,140
content not links again if you want to

00:37:15,780 --> 00:37:22,750
so the other part of that is also twig

00:37:20,140 --> 00:37:25,660
templates are not PHP but they can be

00:37:22,750 --> 00:37:28,119
parsed so there's been some discussions

00:37:25,660 --> 00:37:31,750
there might be a really cool contrib

00:37:28,119 --> 00:37:34,359
modules that would actually basically

00:37:31,750 --> 00:37:36,700
mirror the field you field UI with your

00:37:34,359 --> 00:37:38,050
twig templates so that if you have in

00:37:36,700 --> 00:37:40,240
your twig template if you pulled out

00:37:38,050 --> 00:37:42,490
fields the UI could actually know about

00:37:40,240 --> 00:37:44,710
that and at least reflect the right the

00:37:42,490 --> 00:37:46,330
correct order and potentially you could

00:37:44,710 --> 00:37:49,230
drag a field and your twig template

00:37:46,330 --> 00:37:54,580
would get updated anything is possible

00:37:49,230 --> 00:38:00,130
it's pretty exciting yeah in fact they

00:37:54,580 --> 00:38:01,750
well you got the mic thanks few projects

00:38:00,130 --> 00:38:03,849
ago we switched instead of using this

00:38:01,750 --> 00:38:04,700
point speed a lot to reduce the volume

00:38:03,849 --> 00:38:07,310
of kind of

00:38:04,700 --> 00:38:09,020
three templates - for cleaning out the

00:38:07,310 --> 00:38:09,619
various fields but TPL files and things

00:38:09,020 --> 00:38:13,160
like that

00:38:09,619 --> 00:38:14,900
sure it would seem that with this switch

00:38:13,160 --> 00:38:17,750
- twig all those are now I'm gonna have

00:38:14,900 --> 00:38:20,780
to be totally re-engineered and I

00:38:17,750 --> 00:38:22,190
haven't seen that as far as reducing

00:38:20,780 --> 00:38:25,910
redundant templates what this would do

00:38:22,190 --> 00:38:28,880
differently that the handle well I do

00:38:25,910 --> 00:38:33,349
know that display suite is coming to

00:38:28,880 --> 00:38:35,300
Drupal 8 ask delicious I'm sorry if I'm

00:38:33,349 --> 00:38:36,770
mispronouncing his name but he is he's

00:38:35,300 --> 00:38:38,540
been working really hard on porting and

00:38:36,770 --> 00:38:41,500
has actually found some core bugs and

00:38:38,540 --> 00:38:43,760
stuff in the process so as far as I know

00:38:41,500 --> 00:38:48,609
you'll basically have the display suite

00:38:43,760 --> 00:38:54,680
you know and love in Drupal 8 yeah

00:38:48,609 --> 00:38:56,990
anything else all right well thanks for

00:38:54,680 --> 00:39:00,730
coming and if you're interested in

00:38:56,990 --> 00:39:00,730

YouTube URL: https://www.youtube.com/watch?v=-Ksbm3w64nk


