Title: DrupalCon Latin America 2015: Capture the (D8) Flag
Publication date: 2015-02-10
Playlist: DrupalCon Latin America - Feb 2015
Description: 
	Speakers: socketwench
We've all heard about the big changes coming in Drupal 8. And if you maintain a module, you're wondering just how complicated it's going to be to update. Is now even the right time to update? Example modules like Pants can help, but what does a "real" module look like on Drupal 8?

In this session, we'll discuss the tasks, challenges, and choices that you'll encounter when porting your module to Drupal 8. You'll get a broad understanding of the porting process as we touch many of Drupal 8's new and updated APIs. You'll see how Flag module was rebuilt and redesigned to work using 8's updated Entity system, use of plugins to provide for further expandability, and other tips and tricks you can use!

This session will be technical and assumes you are familiar with Drupal 7 development concepts and have a high level understanding of object oriented programming.
Captions: 
	00:00:00,000 --> 00:00:05,759
so here in the basement in drupal

00:00:03,090 --> 00:00:07,649
eligible con latin america and we're

00:00:05,759 --> 00:00:10,769
going to talk about capturing the drupal

00:00:07,649 --> 00:00:12,719
8 flag you might be wondering who this

00:00:10,769 --> 00:00:15,360
weird person standing in front of you

00:00:12,719 --> 00:00:17,880
and yes at 3am when i'm writing tests i

00:00:15,360 --> 00:00:21,449
really do sound like that and make that

00:00:17,880 --> 00:00:23,279
expression my name is Tess Flynn that

00:00:21,449 --> 00:00:24,900
saw I'm socket much on Twitter on

00:00:23,279 --> 00:00:27,390
various other social networks that's

00:00:24,900 --> 00:00:30,599
when she not wrench I am a developer for

00:00:27,390 --> 00:00:32,340
drove with blink reaction I'm the module

00:00:30,599 --> 00:00:34,890
co maintena for flag for flag friend and

00:00:32,340 --> 00:00:38,399
for example module so the first question

00:00:34,890 --> 00:00:41,040
is why port flag other than we really

00:00:38,399 --> 00:00:43,980
need to Drupal 8 module so it was back

00:00:41,040 --> 00:00:46,469
in 2013 and I was actually sitting in

00:00:43,980 --> 00:00:48,539
the auditorium watching web chick at

00:00:46,469 --> 00:00:52,379
drupalcon Portland talk about how we

00:00:48,539 --> 00:00:56,250
really need modules to be ported now to

00:00:52,379 --> 00:00:58,289
Drupal 8 because the idea was that they

00:00:56,250 --> 00:01:00,180
had plenty of time working on core

00:00:58,289 --> 00:01:03,300
itself but they didn't have a lot of

00:01:00,180 --> 00:01:05,400
time actually using real modules and

00:01:03,300 --> 00:01:09,420
testing all of their ideas to make sure

00:01:05,400 --> 00:01:11,970
that they actually worked so you might

00:01:09,420 --> 00:01:13,650
wonder well why not just contribute to

00:01:11,970 --> 00:01:15,390
Drupal 8 directly instead of porting

00:01:13,650 --> 00:01:16,799
flag module well I was doing that

00:01:15,390 --> 00:01:18,960
actually I was doing that for about a

00:01:16,799 --> 00:01:21,299
year at this point and I was getting

00:01:18,960 --> 00:01:24,119
pretty pretty well but then I kind of

00:01:21,299 --> 00:01:26,130
got stuck I was working on issues

00:01:24,119 --> 00:01:28,470
working on core every night but then I

00:01:26,130 --> 00:01:31,350
started realizing I was stuck in kind of

00:01:28,470 --> 00:01:33,329
a pattern i was in what I call the

00:01:31,350 --> 00:01:36,150
reserve I had the reverse Sisyphus

00:01:33,329 --> 00:01:38,729
problem now since this vest is a myth

00:01:36,150 --> 00:01:41,790
where we had a man condemned by the gods

00:01:38,729 --> 00:01:43,680
to roll a boulder up a hill for all

00:01:41,790 --> 00:01:46,020
eternity by the time he got to the very

00:01:43,680 --> 00:01:48,479
top of the hill it rolled a hallway back

00:01:46,020 --> 00:01:52,350
down again and it would had to start all

00:01:48,479 --> 00:01:55,110
over again prom is with Drupal 8 I had

00:01:52,350 --> 00:01:57,630
the opposite problem the boulder was

00:01:55,110 --> 00:01:59,490
already running down the hill and all I

00:01:57,630 --> 00:02:00,990
had to do was run after it as much as

00:01:59,490 --> 00:02:03,930
they could try to catch up to it every

00:02:00,990 --> 00:02:06,840
night and hope that me just maybe I will

00:02:03,930 --> 00:02:08,670
impart some small sense of momentum into

00:02:06,840 --> 00:02:11,220
Drupal 8 before it rolls away ever meet

00:02:08,670 --> 00:02:12,000
again and this is the problem that I was

00:02:11,220 --> 00:02:14,940
facing

00:02:12,000 --> 00:02:17,310
every hour every night for about three

00:02:14,940 --> 00:02:20,040
hours I had available I had to spend a

00:02:17,310 --> 00:02:22,290
lot of time studying your blade and by

00:02:20,040 --> 00:02:25,170
the time I got caught up to actually

00:02:22,290 --> 00:02:26,850
contribute to an issue I couldn't find

00:02:25,170 --> 00:02:32,010
anything or I was too tired to head a

00:02:26,850 --> 00:02:33,690
bit of bed so was it going to do I had

00:02:32,010 --> 00:02:35,940
this problem and I couldn't figure out

00:02:33,690 --> 00:02:39,540
what was going on I was stuck in the

00:02:35,940 --> 00:02:41,220
valley of death when you're a beginner

00:02:39,540 --> 00:02:43,290
and you're working I'm contributing to

00:02:41,220 --> 00:02:46,739
Drupal core you're on beginner beginner

00:02:43,290 --> 00:02:49,709
as hell and there's plenty of stuff to

00:02:46,739 --> 00:02:52,020
do issue summaries you can run tests you

00:02:49,709 --> 00:02:54,540
can reroll patches but everyone really

00:02:52,020 --> 00:02:56,520
wants to be in dev city where it's

00:02:54,540 --> 00:02:59,700
there's real issues you can contribute

00:02:56,520 --> 00:03:02,730
real code to the project but the problem

00:02:59,700 --> 00:03:06,989
is there's a big valley in between those

00:03:02,730 --> 00:03:11,010
two points what do you work on their api

00:03:06,989 --> 00:03:13,709
docs code style you to just sit there

00:03:11,010 --> 00:03:16,410
looking up at dev City wanting to be

00:03:13,709 --> 00:03:20,840
there but rarely finding the opportunity

00:03:16,410 --> 00:03:23,280
to actually contribute so I was sitting

00:03:20,840 --> 00:03:25,830
trying to figure this out and as all

00:03:23,280 --> 00:03:29,220
good ideas come come to you this one

00:03:25,830 --> 00:03:33,660
came to the shower and there's got to be

00:03:29,220 --> 00:03:36,810
a better way and it occur to me they

00:03:33,660 --> 00:03:39,690
should just port flop module I was a

00:03:36,810 --> 00:03:41,190
commoner a flag module at the time but I

00:03:39,690 --> 00:03:44,220
didn't have a lot of knowledge and how

00:03:41,190 --> 00:03:45,630
Drupal 8 in a Drupal 7 work the module

00:03:44,220 --> 00:03:48,060
was a little bit unfamiliar to me I

00:03:45,630 --> 00:03:51,480
tried were contributing to it but I

00:03:48,060 --> 00:03:54,269
didn't know what that well and I was so

00:03:51,480 --> 00:03:57,299
focused on contributing back to jubilate

00:03:54,269 --> 00:03:59,910
that I never got back so is having a

00:03:57,299 --> 00:04:01,769
problem what do i do important flag

00:03:59,910 --> 00:04:03,660
module seemed like the most bizarre

00:04:01,769 --> 00:04:05,040
ridiculous idea that it could come up

00:04:03,660 --> 00:04:09,600
with that would satisfy both

00:04:05,040 --> 00:04:12,750
requirements so before I go any further

00:04:09,600 --> 00:04:17,959
who in this room doesn't know what flag

00:04:12,750 --> 00:04:20,959
module is anyone raise your hand no one

00:04:17,959 --> 00:04:23,360
okay you this section is for you because

00:04:20,959 --> 00:04:26,270
you raise your hand so here we have a

00:04:23,360 --> 00:04:28,880
node display and it looks like any other

00:04:26,270 --> 00:04:30,400
typical node display in Drupal except

00:04:28,880 --> 00:04:33,380
for these two little links at the bottom

00:04:30,400 --> 00:04:37,490
these two little links our flag links

00:04:33,380 --> 00:04:39,949
and we've attached them to the node so

00:04:37,490 --> 00:04:41,960
if we generalize this a little bit we

00:04:39,949 --> 00:04:47,060
imagine our note our happy little node

00:04:41,960 --> 00:04:50,599
sitting out on Drupal and we have a user

00:04:47,060 --> 00:04:53,599
come by and they go ooh shiny and they

00:04:50,599 --> 00:04:57,039
stick a flag in the module that makes

00:04:53,599 --> 00:05:00,080
the point sound has yet to be developed

00:04:57,039 --> 00:05:02,180
other users come along they also add

00:05:00,080 --> 00:05:05,389
flags to it now from this we can

00:05:02,180 --> 00:05:07,970
actually define what flag module is it

00:05:05,389 --> 00:05:10,099
enables administrators to define boolean

00:05:07,970 --> 00:05:13,909
fields that can be attached to site

00:05:10,099 --> 00:05:17,360
content which each user a set or unset

00:05:13,909 --> 00:05:19,819
it kind of works like this there's three

00:05:17,360 --> 00:05:22,820
principal objects involved an

00:05:19,819 --> 00:05:25,729
administrator define flag and patches it

00:05:22,820 --> 00:05:28,070
to any kind of empty on the site this

00:05:25,729 --> 00:05:29,419
entity is called a flagpole a term that

00:05:28,070 --> 00:05:33,949
makes my eighth-grade English teacher

00:05:29,419 --> 00:05:36,409
cry once we've defined the flag users

00:05:33,949 --> 00:05:39,349
can come along and actually use that

00:05:36,409 --> 00:05:43,070
flag on that piece of content in so

00:05:39,349 --> 00:05:45,919
doing they create a flagging users can

00:05:43,070 --> 00:05:47,630
also unflagging entity at any time if

00:05:45,919 --> 00:05:50,330
they flagged it and have the appropriate

00:05:47,630 --> 00:05:52,580
permission to unflagging administrators

00:05:50,330 --> 00:05:55,099
obviously can also delete the flag at

00:05:52,580 --> 00:06:00,440
any time and therefore remove all of the

00:05:55,099 --> 00:06:02,870
flagons that apply to that flag so let's

00:06:00,440 --> 00:06:04,400
break down flags are an administrator to

00:06:02,870 --> 00:06:06,830
find boolean field they've been stored

00:06:04,400 --> 00:06:09,289
as an entity since the point since to

00:06:06,830 --> 00:06:11,750
point X they may be attached to only one

00:06:09,289 --> 00:06:14,419
entity type but multiple bundles of the

00:06:11,750 --> 00:06:17,030
same entity type so you can define a

00:06:14,419 --> 00:06:20,479
node flag and have that flag apply to

00:06:17,030 --> 00:06:23,419
articles to stories to pages or any one

00:06:20,479 --> 00:06:25,310
of those or any combination of those you

00:06:23,419 --> 00:06:27,529
can also define a user flag and have it

00:06:25,310 --> 00:06:28,380
work on users or comment flag and divide

00:06:27,529 --> 00:06:32,460
it on common

00:06:28,380 --> 00:06:34,440
in fact any entity type you can create

00:06:32,460 --> 00:06:37,080
flags under admin structure flags and

00:06:34,440 --> 00:06:41,190
flags may also be fielded since version

00:06:37,080 --> 00:06:44,280
three acts flagging czar an entity that

00:06:41,190 --> 00:06:46,710
is created created to that's created to

00:06:44,280 --> 00:06:47,970
store when a user sets a flag it

00:06:46,710 --> 00:06:51,390
basically stores four pieces of

00:06:47,970 --> 00:06:54,420
information which flag was set on what

00:06:51,390 --> 00:06:59,040
entity the five was sat when was the

00:06:54,420 --> 00:07:01,320
flag set and who set the flag flag

00:06:59,040 --> 00:07:04,310
bubbles are any piece of content on your

00:07:01,320 --> 00:07:07,020
site any entity that has a flag a flag

00:07:04,310 --> 00:07:12,030
defined for it and for which flagons may

00:07:07,020 --> 00:07:14,250
be created alright so we know what flag

00:07:12,030 --> 00:07:15,210
does we're going to pour in it so what's

00:07:14,250 --> 00:07:16,170
the first thing we're going to do we're

00:07:15,210 --> 00:07:17,250
going to sit down we're going to open

00:07:16,170 --> 00:07:21,330
our ID Ethan we're going to start

00:07:17,250 --> 00:07:22,800
writing code right the very first thing

00:07:21,330 --> 00:07:24,750
that you should do when you're looking

00:07:22,800 --> 00:07:27,450
at porting a module to Drupal 8 is to

00:07:24,750 --> 00:07:30,240
first do a code review what you want to

00:07:27,450 --> 00:07:33,270
do is ask your module how does it really

00:07:30,240 --> 00:07:34,860
work when it comes to flag mantra we had

00:07:33,270 --> 00:07:37,530
Drupal on the bottom and we had several

00:07:34,860 --> 00:07:41,190
implemented and alters any other mop

00:07:37,530 --> 00:07:44,520
tool a function based API itself also

00:07:41,190 --> 00:07:46,080
defined a number of flag hooks and also

00:07:44,520 --> 00:07:49,800
implemented those hooks for its own

00:07:46,080 --> 00:07:51,630
purposes behind that we had a number of

00:07:49,800 --> 00:07:53,760
straight back end functions but the

00:07:51,630 --> 00:07:57,630
majority of the code was in handler

00:07:53,760 --> 00:08:00,390
classes we had a ham Abby's handler

00:07:57,630 --> 00:08:03,090
class called flag flag and then we had

00:08:00,390 --> 00:08:05,130
specific cases for each entity type one

00:08:03,090 --> 00:08:09,510
for Anna for all entities one for nodes

00:08:05,130 --> 00:08:12,420
users comments and so on we also had a

00:08:09,510 --> 00:08:14,760
special case flag flag broken that was

00:08:12,420 --> 00:08:18,810
used when it he typed no longer existed

00:08:14,760 --> 00:08:21,360
on the site mostly this is a pretty

00:08:18,810 --> 00:08:23,160
typical seven module we have a large

00:08:21,360 --> 00:08:25,440
surface areas of straight functions

00:08:23,160 --> 00:08:27,690
entity support was refactored in later

00:08:25,440 --> 00:08:30,920
in its life object-oriented programming

00:08:27,690 --> 00:08:34,620
was used but what's a bit like the blob

00:08:30,920 --> 00:08:37,110
blob is a 1958 movie in which an alien

00:08:34,620 --> 00:08:38,849
space creature devours an entire town

00:08:37,110 --> 00:08:40,310
and that's what a lot of pH before

00:08:38,849 --> 00:08:44,510
classes look like today

00:08:40,310 --> 00:08:46,670
they have weird factory methods all

00:08:44,510 --> 00:08:48,980
methods were public I'll class variables

00:08:46,670 --> 00:08:53,690
Republic basically we had a big blob of

00:08:48,980 --> 00:08:55,160
functions so now that we've done a code

00:08:53,690 --> 00:08:58,730
review we need to pick where we need to

00:08:55,160 --> 00:09:00,410
start our porting process the first

00:08:58,730 --> 00:09:02,660
thing you can do to really help yourself

00:09:00,410 --> 00:09:05,480
is to question everything nothing is

00:09:02,660 --> 00:09:07,910
secret down a nap does it really have to

00:09:05,480 --> 00:09:10,790
work when we define this module before

00:09:07,910 --> 00:09:12,410
we had to assume certain assumptions do

00:09:10,790 --> 00:09:14,930
those really apply anymore do people

00:09:12,410 --> 00:09:19,730
really use it that way can we do this

00:09:14,930 --> 00:09:22,580
better can we do the simpler then set

00:09:19,730 --> 00:09:24,290
some expectations if your want her the

00:09:22,580 --> 00:09:26,540
kind of person who just wants to go sit

00:09:24,290 --> 00:09:29,210
down and get work done you might want to

00:09:26,540 --> 00:09:30,950
wait while Drupal 8 has largely

00:09:29,210 --> 00:09:33,920
solidified in the last year there's

00:09:30,950 --> 00:09:36,620
still a lot of tooling and documentation

00:09:33,920 --> 00:09:39,500
that's yet to be written or yet to be

00:09:36,620 --> 00:09:41,450
very well documented as a result you

00:09:39,500 --> 00:09:43,430
might have some frustration if you just

00:09:41,450 --> 00:09:45,980
want to sit down port and get it over

00:09:43,430 --> 00:09:48,710
with if on the other hand you're here to

00:09:45,980 --> 00:09:50,810
learn go for it don't wait today don't

00:09:48,710 --> 00:09:53,570
wait just start right now this minute

00:09:50,810 --> 00:09:56,930
the second go ahead open your laptop I'm

00:09:53,570 --> 00:09:59,330
waiting if you're like most people

00:09:56,930 --> 00:10:01,550
you're probably in the middle you kind

00:09:59,330 --> 00:10:03,140
of want to learn but you also really

00:10:01,550 --> 00:10:04,760
need to get some work done in that case

00:10:03,140 --> 00:10:07,730
you kind of want to keep it experimental

00:10:04,760 --> 00:10:09,680
you want to start working on it but

00:10:07,730 --> 00:10:11,540
don't really commit to it don't make a

00:10:09,680 --> 00:10:13,280
huge fuss that you're doing it just

00:10:11,540 --> 00:10:17,750
start working on it and see where it

00:10:13,280 --> 00:10:19,730
goes you might be tempted to actually

00:10:17,750 --> 00:10:22,280
start by porting your test so you can

00:10:19,730 --> 00:10:25,190
use test-driven development simple test

00:10:22,280 --> 00:10:27,890
is available in Drupal 8 but it's a bit

00:10:25,190 --> 00:10:30,620
of a double-edged sword while it's easy

00:10:27,890 --> 00:10:32,660
to port your tests Drupal 8 you may also

00:10:30,620 --> 00:10:38,180
limit your thinking and then you're not

00:10:32,660 --> 00:10:39,980
longer questioning all the things the

00:10:38,180 --> 00:10:42,260
best piece of advice is to start with

00:10:39,980 --> 00:10:45,200
the most central piece within your

00:10:42,260 --> 00:10:48,230
module and work your way out now with

00:10:45,200 --> 00:10:50,240
flag module it was the flag entity that

00:10:48,230 --> 00:10:51,830
was the most central piece that on which

00:10:50,240 --> 00:10:54,180
everything depended so that's where I

00:10:51,830 --> 00:10:57,339
started my work

00:10:54,180 --> 00:10:59,350
first we wanted to design the flag class

00:10:57,339 --> 00:11:01,149
now we could start with just a plain

00:10:59,350 --> 00:11:03,819
base class but that's not very good

00:11:01,149 --> 00:11:06,089
object oriented design so what we

00:11:03,819 --> 00:11:08,470
started with as we used in interface

00:11:06,089 --> 00:11:10,839
interface as a new kata is a new concept

00:11:08,470 --> 00:11:12,249
of the PHP world but it's been an

00:11:10,839 --> 00:11:16,240
object-oriented lives for the better

00:11:12,249 --> 00:11:19,089
part of a decade it's rather common also

00:11:16,240 --> 00:11:23,259
once we find the flag interface we also

00:11:19,089 --> 00:11:25,869
want to derive our class from a Drupal

00:11:23,259 --> 00:11:30,879
provided class called config entity base

00:11:25,869 --> 00:11:33,490
now get back to that in sac so we have

00:11:30,879 --> 00:11:36,999
five interface 500 face is kind of like

00:11:33,490 --> 00:11:39,899
a contract it sketches out what the

00:11:36,999 --> 00:11:43,089
object can do and what we can do with it

00:11:39,899 --> 00:11:45,189
it is basically like a class but it only

00:11:43,089 --> 00:11:46,990
has method needs it doesn't have any

00:11:45,189 --> 00:11:48,639
function bodies it doesn't have any

00:11:46,990 --> 00:11:52,779
variables it has no speed ascent

00:11:48,639 --> 00:11:54,160
attached to it defining an interface is

00:11:52,779 --> 00:11:55,839
best practice object-oriented

00:11:54,160 --> 00:11:58,269
programming because it's very light

00:11:55,839 --> 00:12:00,759
layer and then we can define classes

00:11:58,269 --> 00:12:03,459
underneath that this allows people to

00:12:00,759 --> 00:12:05,559
later on completely replace say in this

00:12:03,459 --> 00:12:10,720
case the flag class to do whatever you

00:12:05,559 --> 00:12:13,179
want half boards the flag entity is also

00:12:10,720 --> 00:12:15,939
a configuration entity now in triple

00:12:13,179 --> 00:12:17,949
seven entities an entity was an entity

00:12:15,939 --> 00:12:20,410
was an entity was an entity but in

00:12:17,949 --> 00:12:22,709
triple 8 we have configuration entities

00:12:20,410 --> 00:12:24,879
and we have content entities

00:12:22,709 --> 00:12:27,370
configuration entities are best for

00:12:24,879 --> 00:12:28,929
administrator defined structures while

00:12:27,370 --> 00:12:31,629
they live in the database they may be

00:12:28,929 --> 00:12:34,449
exported to yamel and it's basically

00:12:31,629 --> 00:12:36,399
structure not data anytime that you

00:12:34,449 --> 00:12:41,649
create say a node type that's a

00:12:36,399 --> 00:12:43,089
configuration entity instead of doing a

00:12:41,649 --> 00:12:45,160
lot of work and implementing a whole

00:12:43,089 --> 00:12:47,679
bunch of hooks in order to define our

00:12:45,160 --> 00:12:51,850
entity type we simply derive the flag

00:12:47,679 --> 00:12:53,829
class from configure a few days config

00:12:51,850 --> 00:12:56,259
entity base does all the foundation work

00:12:53,829 --> 00:13:01,319
that we need for configuration does all

00:12:56,259 --> 00:13:01,319
the Drupal stuff so we can on our stuff

00:13:02,000 --> 00:13:05,970
now that we have our aunt our

00:13:04,199 --> 00:13:09,000
configuration entity we need add fields

00:13:05,970 --> 00:13:11,819
to it this is done by defining a config

00:13:09,000 --> 00:13:14,040
entity schema it defines what kinda

00:13:11,819 --> 00:13:16,620
config entity feels are the data type of

00:13:14,040 --> 00:13:21,329
each field and it basically tells Drupal

00:13:16,620 --> 00:13:25,110
what deceive for this entity this is

00:13:21,329 --> 00:13:27,629
what the flag schema looks like it's it

00:13:25,110 --> 00:13:29,970
lives in the module root directory /

00:13:27,629 --> 00:13:32,370
configs visage schema and it's a file

00:13:29,970 --> 00:13:35,370
called flag schema yamo and it's a

00:13:32,370 --> 00:13:43,139
fairly straightforward Hamill file we

00:13:35,370 --> 00:13:45,480
actually have the flat have the kind of

00:13:43,139 --> 00:13:47,300
entity it is so we can tell Drupal what

00:13:45,480 --> 00:13:51,889
to do with it and then a number of feet

00:13:47,300 --> 00:13:55,019
it's a very simple file to to define

00:13:51,889 --> 00:13:57,389
once we have our schema define we need

00:13:55,019 --> 00:14:00,089
to actually take those schema variables

00:13:57,389 --> 00:14:02,610
and create class variables within our

00:14:00,089 --> 00:14:05,339
entity object and we do know what we

00:14:02,610 --> 00:14:09,029
want to do is we want to match every

00:14:05,339 --> 00:14:12,569
field we define in our schema to a class

00:14:09,029 --> 00:14:15,000
variable in our entity class the reason

00:14:12,569 --> 00:14:16,170
for this is that it provides you code

00:14:15,000 --> 00:14:17,639
completion in your integrated

00:14:16,170 --> 00:14:20,759
development environment and it's the

00:14:17,639 --> 00:14:22,730
easiest plate document your schema don't

00:14:20,759 --> 00:14:27,050
document it in the gamble file

00:14:22,730 --> 00:14:31,559
documented instead in the entity object

00:14:27,050 --> 00:14:34,500
this gets to another point please please

00:14:31,559 --> 00:14:36,089
use an IDE and a debugger I would get up

00:14:34,500 --> 00:14:41,069
these but i think the mic would fall off

00:14:36,089 --> 00:14:44,339
my outfit yes really it's time triple

00:14:41,069 --> 00:14:45,689
step three thousand files and some of

00:14:44,339 --> 00:14:48,629
those were very sizable and

00:14:45,689 --> 00:14:51,750
well-organized Drupal 8 has at least

00:14:48,629 --> 00:14:54,809
four top knee and probably several more

00:14:51,750 --> 00:14:57,000
by this time but the strategy is also

00:14:54,809 --> 00:14:58,889
different instead of large single files

00:14:57,000 --> 00:15:02,720
that contain a huge suite of functions

00:14:58,889 --> 00:15:02,720
its many small files

00:15:03,790 --> 00:15:08,420
once we define our class variables we

00:15:06,320 --> 00:15:10,250
want to define getters and setters best

00:15:08,420 --> 00:15:13,100
thing to do is define a getter and

00:15:10,250 --> 00:15:15,829
setter for every variable in your schema

00:15:13,100 --> 00:15:21,110
your interface will not be complete

00:15:15,829 --> 00:15:23,660
unless if you do this first also never

00:15:21,110 --> 00:15:25,069
mark schema class variables as private

00:15:23,660 --> 00:15:27,709
because Drupal won't be able to read

00:15:25,069 --> 00:15:30,740
them Drupal actually uses the config

00:15:27,709 --> 00:15:36,470
entity based class to actually read

00:15:30,740 --> 00:15:38,630
class variables so any protected class

00:15:36,470 --> 00:15:41,420
variables that aren't visible outside of

00:15:38,630 --> 00:15:45,949
the class are still visible the config

00:15:41,420 --> 00:15:47,779
entity so we have our configuration

00:15:45,949 --> 00:15:52,670
entity and now we need to plug it into

00:15:47,779 --> 00:15:55,790
Drupal so what do we do well here's the

00:15:52,670 --> 00:15:58,220
speaker so we have our flag object we

00:15:55,790 --> 00:15:59,750
have triple a so what do we do we hand

00:15:58,220 --> 00:16:02,870
the Sun we build this class and it off

00:15:59,750 --> 00:16:04,970
to Drupal and well says that's just a

00:16:02,870 --> 00:16:07,459
class what the heck am I supposed to do

00:16:04,970 --> 00:16:11,660
with that and the flag I was just

00:16:07,459 --> 00:16:13,160
sitting there going I'm so lonely what

00:16:11,660 --> 00:16:15,230
we need is we need an additional piece

00:16:13,160 --> 00:16:17,870
of information we need to tell Drupal

00:16:15,230 --> 00:16:20,959
what this class does if you really handy

00:16:17,870 --> 00:16:24,589
if we had like a I know a config entity

00:16:20,959 --> 00:16:28,029
assemblymen / flag what this assembly

00:16:24,589 --> 00:16:31,160
manual is is actually something we call

00:16:28,029 --> 00:16:33,649
something we call an annotation an

00:16:31,160 --> 00:16:36,260
annotation is an assembly manner annual

00:16:33,649 --> 00:16:38,269
that's used by drupal to know what the

00:16:36,260 --> 00:16:41,660
class does so drupal can go off and

00:16:38,269 --> 00:16:45,560
build stuff its metadata that's included

00:16:41,660 --> 00:16:47,170
in the class doc block it tells Drupal a

00:16:45,560 --> 00:16:49,850
few very important pieces of information

00:16:47,170 --> 00:16:51,889
what following class is why it's

00:16:49,850 --> 00:16:53,199
important and where to find other

00:16:51,889 --> 00:16:57,500
important pieces of functionality

00:16:53,199 --> 00:17:00,889
related to this object this is a portion

00:16:57,500 --> 00:17:02,269
of flags annotation so we have a number

00:17:00,889 --> 00:17:04,520
of different things here it's basically

00:17:02,269 --> 00:17:06,919
a hierarchical structure of key value

00:17:04,520 --> 00:17:09,169
pairs we can actually see at the very

00:17:06,919 --> 00:17:12,470
top something called config entity type

00:17:09,169 --> 00:17:13,970
so let's start there basically this

00:17:12,470 --> 00:17:15,679
annotation tells Drupal that the

00:17:13,970 --> 00:17:17,420
following class is a configuration

00:17:15,679 --> 00:17:19,690
entity so anytime that we

00:17:17,420 --> 00:17:25,730
form a cache clear it's going to appear

00:17:19,690 --> 00:17:27,860
with it Drupal next we have a handler

00:17:25,730 --> 00:17:29,270
sequence the handler sequence tells

00:17:27,860 --> 00:17:31,520
Drupal where to find other related

00:17:29,270 --> 00:17:33,950
pieces of functionality such as the list

00:17:31,520 --> 00:17:38,840
all entities page and also forms like

00:17:33,950 --> 00:17:40,280
the add edit and delete for speaking of

00:17:38,840 --> 00:17:43,880
add edit and delete it's time to build

00:17:40,280 --> 00:17:45,200
that administration interface so this is

00:17:43,880 --> 00:17:47,210
what the flag administration interface

00:17:45,200 --> 00:17:50,780
it looks like it's very straightforward

00:17:47,210 --> 00:17:53,900
we have a table of 15 burro we have a

00:17:50,780 --> 00:17:56,480
button or add new flag and have some

00:17:53,900 --> 00:17:59,450
text at the bottom how do we provide

00:17:56,480 --> 00:18:01,250
this page to Drupal what what we do is

00:17:59,450 --> 00:18:03,170
we create a class called flag list

00:18:01,250 --> 00:18:05,330
troller it derives from a Drupal

00:18:03,170 --> 00:18:07,370
provided class called config entity list

00:18:05,330 --> 00:18:10,580
builder and basically it provides the

00:18:07,370 --> 00:18:14,150
admin structure flags page it only has

00:18:10,580 --> 00:18:16,400
two important methods the first method

00:18:14,150 --> 00:18:18,290
will actually tell you what the columns

00:18:16,400 --> 00:18:21,320
are and the build header method and the

00:18:18,290 --> 00:18:23,840
other one is actually for to build each

00:18:21,320 --> 00:18:26,030
individual row you don't even have to

00:18:23,840 --> 00:18:28,220
get the entity Drupal does that for you

00:18:26,030 --> 00:18:33,020
it grabs that and puts it in a parameter

00:18:28,220 --> 00:18:35,720
to the method next we have the add and

00:18:33,020 --> 00:18:38,810
edit pages the add and edit pages and

00:18:35,720 --> 00:18:40,400
flag are very similar so some that we

00:18:38,810 --> 00:18:44,120
might as well take advantage of it and

00:18:40,400 --> 00:18:46,970
reuse a lot of code so what we do is we

00:18:44,120 --> 00:18:49,100
create the following class structure so

00:18:46,970 --> 00:18:51,740
we start with a quadruple prior to class

00:18:49,100 --> 00:18:54,200
called entity form and for the add and

00:18:51,740 --> 00:18:57,170
edit form we create another base class

00:18:54,200 --> 00:18:59,060
called flag form base there's also the

00:18:57,170 --> 00:19:01,400
flag delete form which tries from

00:18:59,060 --> 00:19:05,140
another Drupal provided class called SD

00:19:01,400 --> 00:19:08,960
confirm form base now get back to that

00:19:05,140 --> 00:19:10,850
slide form base does all the real form

00:19:08,960 --> 00:19:12,830
stuff don't perform it handles this I

00:19:10,850 --> 00:19:15,800
have a validation it handles the submit

00:19:12,830 --> 00:19:18,590
it does all the real work so what does

00:19:15,800 --> 00:19:22,580
flag ad and flag edit form actually do

00:19:18,590 --> 00:19:24,440
it modifies the behavior in a tenant

00:19:22,580 --> 00:19:27,230
tells you where the default values come

00:19:24,440 --> 00:19:29,660
from such as with the add page it just

00:19:27,230 --> 00:19:30,330
grabs them from static values or the

00:19:29,660 --> 00:19:33,750
edit page

00:19:30,330 --> 00:19:36,500
it loads them from the entity and it

00:19:33,750 --> 00:19:39,269
also modifies the name of submit button

00:19:36,500 --> 00:19:41,460
this is actually a very calm pattern

00:19:39,269 --> 00:19:44,100
with in Drupal modules to define a base

00:19:41,460 --> 00:19:48,210
class and then two very similar classes

00:19:44,100 --> 00:19:49,890
that will do the add and edit form the

00:19:48,210 --> 00:19:52,169
delete form is a completely different

00:19:49,890 --> 00:19:54,630
animal it derives from confirmed form

00:19:52,169 --> 00:19:57,720
base in apically performant provides a

00:19:54,630 --> 00:20:04,950
simple yes/no question can in view want

00:19:57,720 --> 00:20:07,110
to do this or not the end of the class

00:20:04,950 --> 00:20:09,330
that it uses is entity confirm form base

00:20:07,110 --> 00:20:11,970
and it really only has a few different

00:20:09,330 --> 00:20:13,799
methods it has what the question is what

00:20:11,970 --> 00:20:15,870
the title of the page should be what to

00:20:13,799 --> 00:20:19,730
do if someone clicks cancel and what to

00:20:15,870 --> 00:20:19,730
do if something someone clicks go ahead

00:20:20,029 --> 00:20:24,929
so we have our forums we have our

00:20:22,049 --> 00:20:27,570
entities we need to make it routable so

00:20:24,929 --> 00:20:29,250
user comes by and with their web browser

00:20:27,570 --> 00:20:32,460
and goes to Drupal 8 and say I want some

00:20:29,250 --> 00:20:34,559
content Drupal it now drupal 8 needs to

00:20:32,460 --> 00:20:37,590
match whatever that half is to some

00:20:34,559 --> 00:20:39,330
other piece of code within Drupal now in

00:20:37,590 --> 00:20:41,789
previous versions we use to have many

00:20:39,330 --> 00:20:44,429
but we don't have hook menu anymore so

00:20:41,789 --> 00:20:46,679
what do we do well we actually define a

00:20:44,429 --> 00:20:50,220
new man a new file called flagged

00:20:46,679 --> 00:20:52,919
routing ammo and this basically provides

00:20:50,220 --> 00:20:57,630
a list of route names combined with a

00:20:52,919 --> 00:21:00,389
list of path names this is an important

00:20:57,630 --> 00:21:04,169
point tripoli doesn't think in past it

00:21:00,389 --> 00:21:05,880
thinks in route names so when we have

00:21:04,169 --> 00:21:09,419
route names how do we add stuff to

00:21:05,880 --> 00:21:11,460
existing paths well you think well we're

00:21:09,419 --> 00:21:13,769
going to add that to the routing page

00:21:11,460 --> 00:21:17,880
right I mean that oh no that doesn't

00:21:13,769 --> 00:21:19,980
work because flag trout Gamal only adds

00:21:17,880 --> 00:21:22,860
new routes it doesn't allow you to

00:21:19,980 --> 00:21:27,149
modify existing rats for that we need

00:21:22,860 --> 00:21:29,580
another file flagged links menu yeah to

00:21:27,149 --> 00:21:33,299
allow us to add to existing rounds and

00:21:29,580 --> 00:21:36,480
it basically contains is the destination

00:21:33,299 --> 00:21:38,100
route name followed by the parents try

00:21:36,480 --> 00:21:39,929
the parent rap name in this case

00:21:38,100 --> 00:21:42,090
structure data

00:21:39,929 --> 00:21:48,590
system dot admin structure is for a deep

00:21:42,090 --> 00:21:54,090
admin structure page so now we have that

00:21:48,590 --> 00:21:56,789
we need our ad form to our page and we

00:21:54,090 --> 00:21:58,470
do that through a local action so how do

00:21:56,789 --> 00:22:01,740
we do that well we have another file

00:21:58,470 --> 00:22:03,840
flag out links that action animal this

00:22:01,740 --> 00:22:06,659
allows us to attach click actions to

00:22:03,840 --> 00:22:08,360
existing rounds it also contains two

00:22:06,659 --> 00:22:11,460
really important pieces of information

00:22:08,360 --> 00:22:18,059
the route name to attach and where it

00:22:11,460 --> 00:22:20,519
goes to okay so we have all of our and

00:22:18,059 --> 00:22:23,490
config entity stuff ready to go and now

00:22:20,519 --> 00:22:24,869
we can actually start making flags so we

00:22:23,490 --> 00:22:26,490
need to start porting the flagging

00:22:24,869 --> 00:22:29,129
entity so how do we do that well we

00:22:26,490 --> 00:22:31,860
pretty much the sick one we know it's a

00:22:29,129 --> 00:22:34,710
Content entity because its user created

00:22:31,860 --> 00:22:36,779
so we defer how we create a flagging

00:22:34,710 --> 00:22:39,869
interface just like we created a flag

00:22:36,779 --> 00:22:42,269
interface and we create a Content entity

00:22:39,869 --> 00:22:44,639
you know we derive our flagging class

00:22:42,269 --> 00:22:49,019
from content entity base another Drupal

00:22:44,639 --> 00:22:51,840
provided class this is used for infant

00:22:49,019 --> 00:22:54,149
for user defined objects fields are

00:22:51,840 --> 00:22:55,830
defined not by creating a schema but by

00:22:54,149 --> 00:22:58,200
actually overloading a method called

00:22:55,830 --> 00:23:00,720
base field definitions interestingly

00:22:58,200 --> 00:23:02,700
enough we don't need to use hook schema

00:23:00,720 --> 00:23:05,519
to actually define database tables

00:23:02,700 --> 00:23:07,679
Drupal use the information if a field

00:23:05,519 --> 00:23:09,960
definitions to actually create the

00:23:07,679 --> 00:23:14,549
tables for us so we don't have to do all

00:23:09,960 --> 00:23:16,679
that extra work the flagging contains a

00:23:14,549 --> 00:23:20,820
few pieces of information that retina

00:23:16,679 --> 00:23:24,149
that maps it to other objects a flag ID

00:23:20,820 --> 00:23:26,549
for the parent flag the in type and ID

00:23:24,149 --> 00:23:30,419
for the flag of all and the ID of the

00:23:26,549 --> 00:23:32,610
user that created the flag beyond that

00:23:30,419 --> 00:23:34,950
flagons are kind of weird because

00:23:32,610 --> 00:23:37,559
they're not really created by a with

00:23:34,950 --> 00:23:40,289
forms so what do we do and what happens

00:23:37,559 --> 00:23:42,299
well a user comes by and uses the web

00:23:40,289 --> 00:23:44,309
browser and they go home they go to view

00:23:42,299 --> 00:23:47,580
and out and what happens is that we use

00:23:44,309 --> 00:23:49,590
flag entity view in order to attach that

00:23:47,580 --> 00:23:51,990
link to the node

00:23:49,590 --> 00:23:55,520
the user clicks the Flag link and then

00:23:51,990 --> 00:23:58,169
it goes to Drupal some in some route

00:23:55,520 --> 00:23:59,640
well what happens that because what we

00:23:58,169 --> 00:24:01,500
really want to do is we want to get to

00:23:59,640 --> 00:24:03,750
entity saved to create the flagging

00:24:01,500 --> 00:24:05,669
entity so we need to figure out what

00:24:03,750 --> 00:24:08,520
we're going to do in the middle before

00:24:05,669 --> 00:24:10,950
we make method called flag but that's

00:24:08,520 --> 00:24:13,650
not really a very Drupal 8 way of doing

00:24:10,950 --> 00:24:16,110
things so you don't want to do that we

00:24:13,650 --> 00:24:19,890
want to do instead is we create a flag

00:24:16,110 --> 00:24:22,470
service the flank service is basically a

00:24:19,890 --> 00:24:23,940
pin a plain old PHP object but it's

00:24:22,470 --> 00:24:26,549
special in that it's registered

00:24:23,940 --> 00:24:29,309
container wide through the file flagged

00:24:26,549 --> 00:24:31,710
services yamo so all other certain all

00:24:29,309 --> 00:24:34,049
other modules within Drupal know how to

00:24:31,710 --> 00:24:39,330
locate flagging configuration

00:24:34,049 --> 00:24:41,970
information and flagging methods to flag

00:24:39,330 --> 00:24:44,429
or unflagging entity we simply call flag

00:24:41,970 --> 00:24:48,120
service with the flag service and then

00:24:44,429 --> 00:24:50,940
flat you can also inject this and serve

00:24:48,120 --> 00:24:56,159
the flag service into your own services

00:24:50,940 --> 00:24:58,440
for your own use so we have the ability

00:24:56,159 --> 00:25:00,210
to flag stuff now but now we need to

00:24:58,440 --> 00:25:03,990
make it expandable because there's still

00:25:00,210 --> 00:25:05,490
one more problem left so we have our

00:25:03,990 --> 00:25:07,620
flag entity and we have several

00:25:05,490 --> 00:25:11,789
different target flag double entities

00:25:07,620 --> 00:25:13,110
such as node user and other entities so

00:25:11,789 --> 00:25:17,130
if you're looking at this you might say

00:25:13,110 --> 00:25:19,500
well okay flag one and well why don't we

00:25:17,130 --> 00:25:21,690
just create a new flag node subclass and

00:25:19,500 --> 00:25:23,220
a flag user subclass I mean that makes

00:25:21,690 --> 00:25:25,080
sense right then we can handle all those

00:25:23,220 --> 00:25:28,649
special cases and configuration stuff

00:25:25,080 --> 00:25:31,429
but then we get to entities and then you

00:25:28,649 --> 00:25:35,520
get a problem because there are lots of

00:25:31,429 --> 00:25:38,510
entities in Drupal 8 Drupal 7 had a lot

00:25:35,520 --> 00:25:40,950
of entities Drupal 8 is even bigger so

00:25:38,510 --> 00:25:45,840
this also looks really familiar doesn't

00:25:40,950 --> 00:25:47,370
it ah for classes again we don't read

00:25:45,840 --> 00:25:49,710
handler classes we don't want the blob

00:25:47,370 --> 00:25:52,140
to come and eat our module so we want to

00:25:49,710 --> 00:25:53,970
instead the problem is with handler

00:25:52,140 --> 00:25:55,590
classes is they're hard to expand

00:25:53,970 --> 00:25:57,600
because you have to zone derive from

00:25:55,590 --> 00:26:00,090
base class and they're not discoverable

00:25:57,600 --> 00:26:01,810
in any way so if you're not the flag

00:26:00,090 --> 00:26:05,500
module you can do not

00:26:01,810 --> 00:26:07,390
so there's got to be a better one so we

00:26:05,500 --> 00:26:09,040
have our flag entity and we have our

00:26:07,390 --> 00:26:11,680
flag poles or lead some way to relate

00:26:09,040 --> 00:26:15,460
them what we do instead is we use a

00:26:11,680 --> 00:26:18,820
plug-in in this case a flag tight plugin

00:26:15,460 --> 00:26:22,450
the flag type plug-in relates the flag

00:26:18,820 --> 00:26:24,970
to the flag double entity flag type

00:26:22,450 --> 00:26:28,450
plugins are also discoverable by a via a

00:26:24,970 --> 00:26:31,360
custom flag type annotation it's not a

00:26:28,450 --> 00:26:35,230
subclass it's added dynamically into the

00:26:31,360 --> 00:26:37,750
flag class the wonderful thing about

00:26:35,230 --> 00:26:39,490
this is that any other module that needs

00:26:37,750 --> 00:26:41,770
to define their own flag type because

00:26:39,490 --> 00:26:44,110
they have their own custom entity only

00:26:41,770 --> 00:26:48,610
has to create a flag type annotation and

00:26:44,110 --> 00:26:51,190
then they derive from flag type base and

00:26:48,610 --> 00:26:55,450
they can do whatever they want and flag

00:26:51,190 --> 00:26:57,130
will just pick it up automatically so we

00:26:55,450 --> 00:26:59,830
have a very similar structure for the

00:26:57,130 --> 00:27:01,810
handler classes to the plugins we have

00:26:59,830 --> 00:27:03,160
plug-in base which is a Drupal provided

00:27:01,810 --> 00:27:06,190
class which does all the plugins stuff

00:27:03,160 --> 00:27:08,410
we have flag tight base we have entity

00:27:06,190 --> 00:27:10,570
flag type and then several specific flag

00:27:08,410 --> 00:27:12,130
types but you might still think we got a

00:27:10,570 --> 00:27:15,160
problem still what do we do with all

00:27:12,130 --> 00:27:18,010
those other entities what we use is we

00:27:15,160 --> 00:27:19,660
use plug-in derivatives but plug in

00:27:18,010 --> 00:27:21,580
derivatives what we can do is we use

00:27:19,660 --> 00:27:23,980
data to create the appearance of

00:27:21,580 --> 00:27:26,830
multiple different plug-in types one for

00:27:23,980 --> 00:27:30,720
each entity and we do so dynamically so

00:27:26,830 --> 00:27:30,720
everybody gets their own plugin

00:27:31,840 --> 00:27:37,150
so now we have how to handle the flag to

00:27:35,320 --> 00:27:40,360
the pluggable but we still have one more

00:27:37,150 --> 00:27:43,299
problem we still have some route after

00:27:40,360 --> 00:27:45,909
we click the flag think where does that

00:27:43,299 --> 00:27:47,500
come from who does that what we do is we

00:27:45,909 --> 00:27:49,630
have another plug-in we have a link type

00:27:47,500 --> 00:27:52,630
plugin the link type plug-in provides

00:27:49,630 --> 00:27:56,409
the route that will connect the clicked

00:27:52,630 --> 00:27:58,510
Flag link to the flag service again this

00:27:56,409 --> 00:28:01,480
is also discoverable there's a link type

00:27:58,510 --> 00:28:03,250
annotation so that any other module can

00:28:01,480 --> 00:28:07,140
define their own link type you can

00:28:03,250 --> 00:28:07,140
create any all kinds of crazy link types

00:28:08,250 --> 00:28:12,520
because it's also a plugin that's also

00:28:10,450 --> 00:28:18,730
dynamically selectable when you edit the

00:28:12,520 --> 00:28:20,440
fly edit or add a flag alright we have

00:28:18,730 --> 00:28:22,179
most of our functionality now we need to

00:28:20,440 --> 00:28:24,399
open up even further we need to create

00:28:22,179 --> 00:28:28,029
an API so what we don't know what we had

00:28:24,399 --> 00:28:30,399
in flag 7 was hooks for everything we

00:28:28,029 --> 00:28:31,890
did every one thing with hooks there

00:28:30,399 --> 00:28:34,299
wasn't a hook we would make a hook for

00:28:31,890 --> 00:28:36,700
we did it to define flags validate

00:28:34,299 --> 00:28:38,500
exeter interactive events to provide

00:28:36,700 --> 00:28:42,760
flag / link type those a whole bunch of

00:28:38,500 --> 00:28:46,419
stuff well in drupal 8 aren't everything

00:28:42,760 --> 00:28:49,029
we've got a bigger world and it looks a

00:28:46,419 --> 00:28:51,100
lot like this we use the configuration

00:28:49,029 --> 00:28:53,350
management in order to define flags or

00:28:51,100 --> 00:28:55,600
use plugins for flag types and link

00:28:53,350 --> 00:28:59,559
types we use events to react to events

00:28:55,600 --> 00:29:05,620
don't date and grant access we actually

00:28:59,559 --> 00:29:08,140
still use hooks interpolate about this

00:29:05,620 --> 00:29:10,539
event thing how does that work we have

00:29:08,140 --> 00:29:12,700
the flag service and we have another

00:29:10,539 --> 00:29:15,309
service with interval called the event

00:29:12,700 --> 00:29:17,740
dispatcher the event and people

00:29:15,309 --> 00:29:19,600
subscribe to the event dispatcher to

00:29:17,740 --> 00:29:21,760
receive particular kinds of events I

00:29:19,600 --> 00:29:24,010
want to listen to whenever somebody

00:29:21,760 --> 00:29:27,490
flags a note or unflagging out or

00:29:24,010 --> 00:29:29,289
something like that whenever that

00:29:27,490 --> 00:29:31,720
happens flag service is going to

00:29:29,289 --> 00:29:33,940
dispatch a flag event class to the event

00:29:31,720 --> 00:29:35,980
dispatcher and then have that populated

00:29:33,940 --> 00:29:38,289
to all the different subscribers

00:29:35,980 --> 00:29:43,799
automatically all flag service has to do

00:29:38,289 --> 00:29:43,799
is just submit that one event class once

00:29:43,910 --> 00:29:51,450
there's only a few of flag events so far

00:29:46,530 --> 00:29:53,490
but there might be more in the future we

00:29:51,450 --> 00:29:55,110
still use hooks how we do that is

00:29:53,490 --> 00:29:57,270
instead of having the straight invoke

00:29:55,110 --> 00:29:59,370
all method what we do is we actually

00:29:57,270 --> 00:30:01,770
inject the modular handler interface

00:29:59,370 --> 00:30:05,750
into the flag service and from there we

00:30:01,770 --> 00:30:05,750
can call any other hooks that we need to

00:30:06,140 --> 00:30:11,490
so there's flag so what's a few things

00:30:09,360 --> 00:30:13,730
that I learned during this how do we run

00:30:11,490 --> 00:30:16,080
our projects more effectively with great

00:30:13,730 --> 00:30:18,450
well the first thing I can tell you is

00:30:16,080 --> 00:30:21,210
do it in public but do so with a warning

00:30:18,450 --> 00:30:22,740
label when you're starting your Drupal 8

00:30:21,210 --> 00:30:24,990
project you're not sure if you're going

00:30:22,740 --> 00:30:27,450
to start end with the same code that you

00:30:24,990 --> 00:30:29,550
start with you might end up in a back

00:30:27,450 --> 00:30:31,950
alley you might go down an interesting

00:30:29,550 --> 00:30:34,140
idea and find it's not really viable so

00:30:31,950 --> 00:30:36,630
you really don't want to just put it on

00:30:34,140 --> 00:30:38,280
your module page you could you could

00:30:36,630 --> 00:30:40,740
actually put it on your drupal.org

00:30:38,280 --> 00:30:43,140
project but is your module really ready

00:30:40,740 --> 00:30:45,810
do you really want to do that I mean

00:30:43,140 --> 00:30:47,640
sure you could work in private and

00:30:45,810 --> 00:30:49,800
develop all the stuff in your in your

00:30:47,640 --> 00:30:51,090
off time then push it to Drupal but then

00:30:49,800 --> 00:30:54,360
you're not doing it in public anymore

00:30:51,090 --> 00:30:55,890
you're not generating that interest well

00:30:54,360 --> 00:30:58,650
then so what do you did we could put it

00:30:55,890 --> 00:31:01,530
in sandbox but and that's easy but few

00:30:58,650 --> 00:31:02,970
people see Drupal sandboxes it's hard to

00:31:01,530 --> 00:31:04,650
get visibility there although the

00:31:02,970 --> 00:31:07,050
community processes are exactly the

00:31:04,650 --> 00:31:09,120
singing so then you might wonder okay

00:31:07,050 --> 00:31:10,530
maybe I just need a clean break let's

00:31:09,120 --> 00:31:13,020
put it on a completely different public

00:31:10,530 --> 00:31:15,690
repo like github or bit bucket or

00:31:13,020 --> 00:31:17,580
something like that what we did was flag

00:31:15,690 --> 00:31:20,040
is we decided a completely new break

00:31:17,580 --> 00:31:21,900
because I had no idea if I was going to

00:31:20,040 --> 00:31:24,330
get anywhere with this I had no idea it

00:31:21,900 --> 00:31:25,290
would work out and I was getting some

00:31:24,330 --> 00:31:27,150
pushback from some of the other

00:31:25,290 --> 00:31:29,490
contributors so it was probably a good

00:31:27,150 --> 00:31:34,770
idea to just move it off of the

00:31:29,490 --> 00:31:36,060
drupal.org project page entire next when

00:31:34,770 --> 00:31:37,860
you're working on this you're going to

00:31:36,060 --> 00:31:39,270
have problems going to have questions

00:31:37,860 --> 00:31:41,400
that you can't answer you're going to

00:31:39,270 --> 00:31:42,240
update core at seven p.m. at night and

00:31:41,400 --> 00:31:44,520
then spend the next three hours

00:31:42,240 --> 00:31:46,920
wondering why nothing works again and

00:31:44,520 --> 00:31:48,660
then you'll hope and beg that some core

00:31:46,920 --> 00:31:51,210
developer will show up on IRC that you

00:31:48,660 --> 00:31:52,710
could beg for an answer for and they're

00:31:51,210 --> 00:31:55,140
there to help but you've got to be

00:31:52,710 --> 00:31:56,179
patient and when they do help you you

00:31:55,140 --> 00:31:58,340
need to really show you

00:31:56,179 --> 00:32:01,600
appreciation for it I can't tell you how

00:31:58,340 --> 00:32:04,190
many beers that I owe people right now

00:32:01,600 --> 00:32:06,080
they're plenty of places to find help

00:32:04,190 --> 00:32:07,669
you can find it on triple contribute you

00:32:06,080 --> 00:32:09,769
can go to the drupal.org list changes

00:32:07,669 --> 00:32:12,559
page there's also the issue queue for

00:32:09,769 --> 00:32:15,139
drupal itself the list changes page is

00:32:12,559 --> 00:32:18,499
your one-stop-shop for anything that's

00:32:15,139 --> 00:32:20,629
changed in Drupal core after that

00:32:18,499 --> 00:32:26,029
contributes really useful for tracking

00:32:20,629 --> 00:32:27,950
down and debugging specific issues next

00:32:26,029 --> 00:32:30,019
you might find yourself needing money in

00:32:27,950 --> 00:32:31,549
order to do stuff I mean you might need

00:32:30,019 --> 00:32:33,080
travel money to go get your team

00:32:31,549 --> 00:32:35,090
together so you can sit down and just

00:32:33,080 --> 00:32:37,129
hack maybe you need to attend a

00:32:35,090 --> 00:32:39,169
conference maybe you need off from work

00:32:37,129 --> 00:32:40,700
just so that you can code there's a lot

00:32:39,169 --> 00:32:42,440
of different reasons why you might need

00:32:40,700 --> 00:32:44,690
funding in order to support your module

00:32:42,440 --> 00:32:47,720
development efforts so what you can do

00:32:44,690 --> 00:32:51,080
and I did is I actually round I ran a

00:32:47,720 --> 00:32:53,090
crowd fund uncle phone my goal is to

00:32:51,080 --> 00:32:54,860
actually get me to drupalcon Austin last

00:32:53,090 --> 00:32:56,869
year so that I could sit down with some

00:32:54,860 --> 00:32:59,299
core developers and really push the

00:32:56,869 --> 00:33:01,639
module forward and in a few days we went

00:32:59,299 --> 00:33:05,649
from no view support to complete view

00:33:01,639 --> 00:33:05,649
support it was really really impressive

00:33:06,519 --> 00:33:10,610
later on in your project you might start

00:33:08,929 --> 00:33:13,369
wondering especially if you've moved

00:33:10,610 --> 00:33:16,129
your project off of drupal.org or into a

00:33:13,369 --> 00:33:19,519
sandbox when should I move back to my

00:33:16,129 --> 00:33:21,860
project page if this official you have a

00:33:19,519 --> 00:33:24,080
lot of different different things that

00:33:21,860 --> 00:33:27,230
you need to balance you be worried that

00:33:24,080 --> 00:33:29,149
you're on your module out there right on

00:33:27,230 --> 00:33:31,009
your project page might result in a lot

00:33:29,149 --> 00:33:33,320
of people posting issues well you're

00:33:31,009 --> 00:33:34,970
still developing your module yes I know

00:33:33,320 --> 00:33:37,519
that feature doesn't work it because I

00:33:34,970 --> 00:33:40,009
haven't written it yet or you might have

00:33:37,519 --> 00:33:42,619
get log pollution especially if you've

00:33:40,009 --> 00:33:44,210
moved your module off drupal.org and now

00:33:42,619 --> 00:33:46,700
you reference pull requests and issue

00:33:44,210 --> 00:33:49,940
numbers that exist on Drupal or what you

00:33:46,700 --> 00:33:51,799
do that on the other if you put it in a

00:33:49,940 --> 00:33:53,690
project branch you can leverage your

00:33:51,799 --> 00:33:55,700
community but it also comes with a lot

00:33:53,690 --> 00:33:57,139
of visibility and if you end up in a

00:33:55,700 --> 00:34:00,320
back alley that can be really

00:33:57,139 --> 00:34:02,090
discouraging to a lot of people you

00:34:00,320 --> 00:34:04,399
might be tempted looking at this to do

00:34:02,090 --> 00:34:06,350
this to slide the fulcrum all the way

00:34:04,399 --> 00:34:08,329
over so that you keep it in the sandbox

00:34:06,350 --> 00:34:10,900
as long as possible until you're certain

00:34:08,329 --> 00:34:13,730
that it's ready to go

00:34:10,900 --> 00:34:16,400
don't do this this will cause you

00:34:13,730 --> 00:34:18,770
problems the problem is that the longer

00:34:16,400 --> 00:34:20,750
you keep it in the sandbox the more your

00:34:18,770 --> 00:34:22,610
lack of visibility and the lack of

00:34:20,750 --> 00:34:24,560
leveraging your community will hinder

00:34:22,610 --> 00:34:27,170
your module development what you want to

00:34:24,560 --> 00:34:30,500
do is this instead you want to wait

00:34:27,170 --> 00:34:32,300
until your module is just done enough to

00:34:30,500 --> 00:34:33,770
do the major stuff it needs to do and

00:34:32,300 --> 00:34:36,260
then move it back to your project page

00:34:33,770 --> 00:34:39,140
you need to define a minimum point of

00:34:36,260 --> 00:34:40,700
module viability and that's when you

00:34:39,140 --> 00:34:43,010
should move your module back to drupal

00:34:40,700 --> 00:34:45,440
org and that will eliminate the issue

00:34:43,010 --> 00:34:47,900
queue noise and the get my log pollution

00:34:45,440 --> 00:34:50,720
a lot faster the more you keep it off

00:34:47,900 --> 00:34:54,110
the more that will accumulate in reality

00:34:50,720 --> 00:34:55,790
flag actually only had about 120 issue

00:34:54,110 --> 00:34:59,300
tickets and most of them were reminders

00:34:55,790 --> 00:35:04,040
to myself so these issues are way

00:34:59,300 --> 00:35:06,910
overblown also to bots easier now than

00:35:04,040 --> 00:35:09,740
they were last year and even in 20-30

00:35:06,910 --> 00:35:11,270
example module for Drupal 8 and it does

00:35:09,740 --> 00:35:13,160
a lot of stuff we have a config-if

00:35:11,270 --> 00:35:15,350
donatti example we have a content

00:35:13,160 --> 00:35:17,690
example we have a plug-in example that's

00:35:15,350 --> 00:35:20,330
in progress and that well we'll have you

00:35:17,690 --> 00:35:22,700
I'll get you very far in doing stuff

00:35:20,330 --> 00:35:24,290
there's also wonderful things like

00:35:22,700 --> 00:35:25,850
drupal console which can actually

00:35:24,290 --> 00:35:27,530
provide you a lot of that stub code

00:35:25,850 --> 00:35:33,920
necessary to get your module off the

00:35:27,530 --> 00:35:36,740
ground a lot faster so looking back at

00:35:33,920 --> 00:35:38,870
all of this if you're already if you're

00:35:36,740 --> 00:35:41,450
looking at working on a Drupal 8 module

00:35:38,870 --> 00:35:45,020
you want to learn portnow start right

00:35:41,450 --> 00:35:49,250
now don't wait go go back to your hotel

00:35:45,020 --> 00:35:51,320
room open your laptop come on if you're

00:35:49,250 --> 00:35:52,730
waiting to work you just want to sit

00:35:51,320 --> 00:35:54,650
down and get it over with and then move

00:35:52,730 --> 00:35:57,560
on with your life you might want to wait

00:35:54,650 --> 00:35:59,840
but don't wait too long Drupal 8 has

00:35:57,560 --> 00:36:02,210
actually been fairly stable module wise

00:35:59,840 --> 00:36:04,190
for the last year there's only been a

00:36:02,210 --> 00:36:07,160
few times that I've really needed to

00:36:04,190 --> 00:36:09,260
massively modify my module in order to

00:36:07,160 --> 00:36:12,200
make it work again and mostly it's this

00:36:09,260 --> 00:36:14,480
base class change this interface changed

00:36:12,200 --> 00:36:16,550
and then it took longer for me to track

00:36:14,480 --> 00:36:18,710
it down I figure out what broke that's

00:36:16,550 --> 00:36:19,790
actually figure out does it actually fix

00:36:18,710 --> 00:36:23,940
it

00:36:19,790 --> 00:36:26,070
so in reality don't wait too long do a

00:36:23,940 --> 00:36:28,290
code review make sure that you know how

00:36:26,070 --> 00:36:30,210
your module really works if you have to

00:36:28,290 --> 00:36:32,250
get up at three in the morning after a

00:36:30,210 --> 00:36:34,020
long vacation to go and look at it with

00:36:32,250 --> 00:36:36,540
fresh new eyes do that do whatever you

00:36:34,020 --> 00:36:39,240
have to do also question everything

00:36:36,540 --> 00:36:40,830
nothing is sacred really look at your

00:36:39,240 --> 00:36:45,690
modules see if there's any way that you

00:36:40,830 --> 00:36:48,360
can make it work better please use an

00:36:45,690 --> 00:36:51,270
IDE and a debugger I can't stress this

00:36:48,360 --> 00:36:53,820
enough you know finding your code

00:36:51,270 --> 00:36:55,650
completion is wonderful thing and you

00:36:53,820 --> 00:36:58,640
will faint yourself after you get over

00:36:55,650 --> 00:37:01,230
the initial frustration of not useful

00:36:58,640 --> 00:37:02,700
there are lots of them available many of

00:37:01,230 --> 00:37:05,310
them are open source or free there's

00:37:02,700 --> 00:37:09,240
also plenty of demo versions for ones

00:37:05,310 --> 00:37:11,970
that are before pay you need help

00:37:09,240 --> 00:37:14,310
patiently asked for it and show

00:37:11,970 --> 00:37:16,620
appreciation when you get at that will

00:37:14,310 --> 00:37:20,270
help people to be more encouraged to

00:37:16,620 --> 00:37:23,520
help you in the future do it in public

00:37:20,270 --> 00:37:25,350
don't sit in your basement and were like

00:37:23,520 --> 00:37:27,360
we are right now actually and we're

00:37:25,350 --> 00:37:30,930
going to work on your module in the dark

00:37:27,360 --> 00:37:32,820
and then push it up to drupal.org start

00:37:30,930 --> 00:37:36,600
working on it let people know but also

00:37:32,820 --> 00:37:38,370
put a warning label on it if money their

00:37:36,600 --> 00:37:41,610
problem consider crowdfunding it might

00:37:38,370 --> 00:37:43,800
work for you move out of your sandbox as

00:37:41,610 --> 00:37:46,200
fast as possible don't get stuck in the

00:37:43,800 --> 00:37:50,000
sandbox as soon as you hit that point of

00:37:46,200 --> 00:37:52,290
minimum module viability move out and

00:37:50,000 --> 00:37:54,360
things are a lot easier now because

00:37:52,290 --> 00:37:56,100
there's example module there's Drupal

00:37:54,360 --> 00:37:58,020
come there's a lot of things that you

00:37:56,100 --> 00:38:02,790
can do to make your module development

00:37:58,020 --> 00:38:04,020
efforts a lot like to take a moment to

00:38:02,790 --> 00:38:06,930
give special thanks to a lot of people

00:38:04,020 --> 00:38:09,450
that need flag and have 58 x and this

00:38:06,930 --> 00:38:12,090
presentation and papa possible like

00:38:09,450 --> 00:38:13,380
timba Catlin Rowland de Vitry Wiz one

00:38:12,090 --> 00:38:15,450
solutions which helped me a lot with

00:38:13,380 --> 00:38:17,370
this presentation Lauren Shay which is

00:38:15,450 --> 00:38:21,000
why today and blink reaction which I now

00:38:17,370 --> 00:38:22,830
for thanks everyone you can find me on

00:38:21,000 --> 00:38:25,760
do and Tehran socket lunch and you can

00:38:22,830 --> 00:38:25,760
find this presentation

00:38:26,560 --> 00:38:28,620

YouTube URL: https://www.youtube.com/watch?v=i529o9LQu_I


