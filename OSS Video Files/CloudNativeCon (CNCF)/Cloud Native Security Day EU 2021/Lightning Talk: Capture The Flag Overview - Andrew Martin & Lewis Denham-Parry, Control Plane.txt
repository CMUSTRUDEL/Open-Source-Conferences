Title: Lightning Talk: Capture The Flag Overview - Andrew Martin & Lewis Denham-Parry, Control Plane
Publication date: 2021-05-04
Playlist: Cloud Native Security Day EU 2021
Description: 
	Donâ€™t miss out! Join us at our upcoming event: KubeCon + CloudNativeCon North America 2021 in Los Angeles, CA from October 12-15. Learn more at https://kubecon.io The conference features presentations from developers and end users of Kubernetes, Prometheus, Envoy, and all of the other CNCF-hosted projects.

Lightning Talk: Capture The Flag Overview - Andrew Martin & Lewis Denham-Parry, Control Plane

Delve deeper into the dark and mysterious world of Kubernetes security! Exploit a supply chain attack and start your journey deep inside the target infrastructure, exploit your position to hunt and collect the flags, and hopefully learn something new and wryly amusing along the way!

Attendees can play six increasingly beguiling and demanding scenarios to bushwhack their way through the dense jungle of Kubernetes security. Everybody is welcome, from beginner to hardened veteran, as we venture amongst the low-hanging fruits of insecure configuration and scale the lofty peaks of cluster compromise!

Note: Registration for Cloud Native Security Day Europe is required to participate in Capture The Flag.
Captions: 
	00:00:01,599 --> 00:00:05,759
hello and welcome to

00:00:03,439 --> 00:00:07,279
the cloud native security day courtesy

00:00:05,759 --> 00:00:09,120
of sig security

00:00:07,279 --> 00:00:10,639
we shall be playing a capture the flag

00:00:09,120 --> 00:00:13,679
game today and this

00:00:10,639 --> 00:00:15,440
is how you participate

00:00:13,679 --> 00:00:17,440
first of all we will run through a

00:00:15,440 --> 00:00:18,640
precap but at the end of the day we will

00:00:17,440 --> 00:00:21,439
have a companion

00:00:18,640 --> 00:00:22,400
recap to go through the scenarios and

00:00:21,439 --> 00:00:24,720
understand

00:00:22,400 --> 00:00:26,000
during a rye retrospective exactly what

00:00:24,720 --> 00:00:27,760
happened

00:00:26,000 --> 00:00:29,439
but first of all we are going to wet

00:00:27,760 --> 00:00:32,800
your appetites for some

00:00:29,439 --> 00:00:36,239
parental honking peace indeed

00:00:32,800 --> 00:00:39,120
was never an option for a naughty goose

00:00:36,239 --> 00:00:40,480
today's goal is to learn in a happy and

00:00:39,120 --> 00:00:43,040
joyous environment

00:00:40,480 --> 00:00:44,879
we're grateful to have the absolute

00:00:43,040 --> 00:00:46,000
pleasure of helping people on their

00:00:44,879 --> 00:00:48,960
security journey

00:00:46,000 --> 00:00:49,920
and containery hackery we've built this

00:00:48,960 --> 00:00:52,399
in collaboration

00:00:49,920 --> 00:00:53,680
with sig security and we have a learning

00:00:52,399 --> 00:00:56,559
outcome in mind

00:00:53,680 --> 00:00:58,160
for every scenario throughout the day we

00:00:56,559 --> 00:01:00,480
are using the same platform

00:00:58,160 --> 00:01:01,199
as last time so those of you with prior

00:01:00,480 --> 00:01:04,000
experience

00:01:01,199 --> 00:01:05,040
will know how to enter the game for

00:01:04,000 --> 00:01:07,520
everybody else

00:01:05,040 --> 00:01:08,080
we have a companion website slack

00:01:07,520 --> 00:01:10,400
channel

00:01:08,080 --> 00:01:11,600
and plenty of volunteers to aid you on

00:01:10,400 --> 00:01:14,880
your way

00:01:11,600 --> 00:01:15,920
we also have a newly minted twitch

00:01:14,880 --> 00:01:18,640
channel this year

00:01:15,920 --> 00:01:20,320
with a roster of pre-eminent kubernetes

00:01:18,640 --> 00:01:22,080
security personalities

00:01:20,320 --> 00:01:24,240
to give you a red or blue team

00:01:22,080 --> 00:01:24,960
perspective on the scenarios as we

00:01:24,240 --> 00:01:27,680
navigate

00:01:24,960 --> 00:01:28,479
the turbulent waters of kubernetes and

00:01:27,680 --> 00:01:33,040
cloud native

00:01:28,479 --> 00:01:35,520
security so what can you expect

00:01:33,040 --> 00:01:37,119
to delve deeper into the dark and

00:01:35,520 --> 00:01:39,759
mysterious world

00:01:37,119 --> 00:01:41,600
of kubernetes your adversary has

00:01:39,759 --> 00:01:44,000
exploited a supply chain

00:01:41,600 --> 00:01:45,360
and you start your journey deep inside a

00:01:44,000 --> 00:01:47,280
kubernetes system

00:01:45,360 --> 00:01:48,479
looking to hunt and collect the flags

00:01:47,280 --> 00:01:50,720
they dropped

00:01:48,479 --> 00:01:52,640
and hopefully learn something along the

00:01:50,720 --> 00:01:55,920
way

00:01:52,640 --> 00:01:58,079
no waterway is safe and you can play six

00:01:55,920 --> 00:02:00,240
increasingly beguiling and demanding

00:01:58,079 --> 00:02:00,880
scenarios to bushwhack your way through

00:02:00,240 --> 00:02:03,680
the dense

00:02:00,880 --> 00:02:05,840
jungle of cloud native security

00:02:03,680 --> 00:02:08,319
everybody is of course welcome

00:02:05,840 --> 00:02:09,200
from beginner to hardened veteran as we

00:02:08,319 --> 00:02:10,879
venture out

00:02:09,200 --> 00:02:12,400
amongst the low hanging fruits of

00:02:10,879 --> 00:02:15,360
insecure configuration

00:02:12,400 --> 00:02:17,840
and scale the lofty peaks of full

00:02:15,360 --> 00:02:20,080
cluster compromise

00:02:17,840 --> 00:02:21,120
so yes you should find these a little

00:02:20,080 --> 00:02:24,480
bit tricky

00:02:21,120 --> 00:02:25,840
and increasingly difficult but you can

00:02:24,480 --> 00:02:29,120
and please do

00:02:25,840 --> 00:02:32,239
ask for help at any time at the point of

00:02:29,120 --> 00:02:33,599
today is to learn and not to compete

00:02:32,239 --> 00:02:35,599
of course you're welcome to compete

00:02:33,599 --> 00:02:39,040
against friends family

00:02:35,599 --> 00:02:40,480
and colleagues now these clusters aren't

00:02:39,040 --> 00:02:43,360
going to stand up themselves

00:02:40,480 --> 00:02:44,879
so we have a team of task masters

00:02:43,360 --> 00:02:47,920
managing the infrastructure

00:02:44,879 --> 00:02:50,000
and on hand to provide help on slack

00:02:47,920 --> 00:02:51,840
there are six scenarios to advance

00:02:50,000 --> 00:02:53,920
through throughout the day

00:02:51,840 --> 00:02:55,840
and the instructions are all in the

00:02:53,920 --> 00:02:58,800
companion website

00:02:55,840 --> 00:02:59,680
so let's see louis guide us through a

00:02:58,800 --> 00:03:02,879
first time

00:02:59,680 --> 00:03:02,879
user's experience

00:03:02,959 --> 00:03:06,720
thank you for that introduction andy and

00:03:05,599 --> 00:03:08,239
what a great day

00:03:06,720 --> 00:03:11,280
it is going to be to break out of some

00:03:08,239 --> 00:03:12,800
containers i am indeed lewis the head of

00:03:11,280 --> 00:03:14,319
training at control plane

00:03:12,800 --> 00:03:15,680
and what i'm going to do now is i'm

00:03:14,319 --> 00:03:17,680
going to give you a demo of one of the

00:03:15,680 --> 00:03:19,120
scenarios that we did last year for the

00:03:17,680 --> 00:03:20,640
ctf

00:03:19,120 --> 00:03:22,800
to get started you're going to need to

00:03:20,640 --> 00:03:26,000
contact the taskmaster via dm

00:03:22,800 --> 00:03:28,239
on the cncf slack channel

00:03:26,000 --> 00:03:31,440
you'll be able to find us taskmaster

00:03:28,239 --> 00:03:33,599
probably posting gifs throughout the day

00:03:31,440 --> 00:03:34,799
now once you've contacted the taskmaster

00:03:33,599 --> 00:03:36,640
they're going to go and they're going to

00:03:34,799 --> 00:03:38,000
get a cluster from cubesim

00:03:36,640 --> 00:03:39,760
now these clusters have been

00:03:38,000 --> 00:03:41,360
misconfigured on purpose

00:03:39,760 --> 00:03:43,040
the taskmaster then needs to send you

00:03:41,360 --> 00:03:46,080
credentials the safest way

00:03:43,040 --> 00:03:48,000
they know how over slack

00:03:46,080 --> 00:03:49,840
incidentally don't worry because we've

00:03:48,000 --> 00:03:52,959
got an intern ready to take the fall

00:03:49,840 --> 00:03:52,959
if anything should happen

00:03:53,040 --> 00:03:57,920
so once we received our file we want to

00:03:56,400 --> 00:03:59,599
check that we've got it downloaded and

00:03:57,920 --> 00:04:02,239
we see we have a tar file here

00:03:59,599 --> 00:04:04,959
so we need to get the contents out so

00:04:02,239 --> 00:04:04,959
tar xf

00:04:05,040 --> 00:04:10,080
and then with these files i'm able to

00:04:07,439 --> 00:04:13,439
run an ssh command

00:04:10,080 --> 00:04:16,320
and accepting the fingerprint i'm now

00:04:13,439 --> 00:04:17,120
inside a container that was a little bit

00:04:16,320 --> 00:04:18,560
quick

00:04:17,120 --> 00:04:20,959
if you're not used to doing things like

00:04:18,560 --> 00:04:23,040
this then have a look at the website

00:04:20,959 --> 00:04:23,759
we'll have videos specific to operating

00:04:23,040 --> 00:04:25,360
systems

00:04:23,759 --> 00:04:27,040
and equally if you're still struggling

00:04:25,360 --> 00:04:29,600
just reach out to the task master

00:04:27,040 --> 00:04:31,840
we're there to help now i can see that

00:04:29,600 --> 00:04:33,840
i'm in someone else's

00:04:31,840 --> 00:04:35,120
shell well someone else's container who

00:04:33,840 --> 00:04:37,199
knows where we are

00:04:35,120 --> 00:04:39,680
but let's get started now i'm going to

00:04:37,199 --> 00:04:41,120
go through the quick happy route

00:04:39,680 --> 00:04:42,800
i'm going to start by looking at what we

00:04:41,120 --> 00:04:45,440
have mounted within our

00:04:42,800 --> 00:04:47,759
container and i can see here that there

00:04:45,440 --> 00:04:50,960
is something interesting called the dev

00:04:47,759 --> 00:04:51,600
xvda1 what does that not mean i still

00:04:50,960 --> 00:04:53,520
don't know

00:04:51,600 --> 00:04:54,639
um i'd recommend having a look on a

00:04:53,520 --> 00:04:56,880
search engine

00:04:54,639 --> 00:04:57,919
just find out that's what's encouraged

00:04:56,880 --> 00:04:59,440
today

00:04:57,919 --> 00:05:03,759
so we're going to mount this so we're

00:04:59,440 --> 00:05:03,759
going to mount dev xvd a1

00:05:03,919 --> 00:05:08,960
onto our mount directory now let's have

00:05:06,560 --> 00:05:11,759
a look in here

00:05:08,960 --> 00:05:13,199
now i wasn't expecting to see something

00:05:11,759 --> 00:05:15,360
like this this looks like the root file

00:05:13,199 --> 00:05:17,600
system

00:05:15,360 --> 00:05:19,440
of another machine so i might have just

00:05:17,600 --> 00:05:21,280
broken out of a container onto the host

00:05:19,440 --> 00:05:22,840
machine running for container that we're

00:05:21,280 --> 00:05:25,919
on

00:05:22,840 --> 00:05:27,759
yeah now having a look through here i

00:05:25,919 --> 00:05:29,840
can see some interesting folders

00:05:27,759 --> 00:05:31,759
um but the one that really sticks out to

00:05:29,840 --> 00:05:33,840
me is the node secrets

00:05:31,759 --> 00:05:35,840
so let's just have a look in there so

00:05:33,840 --> 00:05:39,840
check them out no secrets

00:05:35,840 --> 00:05:39,840
and let's just cut out

00:05:40,720 --> 00:05:44,479
there we go we've captured the flag i

00:05:42,960 --> 00:05:46,080
would copy this flag and i'll send it

00:05:44,479 --> 00:05:48,560
across for taskmaster

00:05:46,080 --> 00:05:50,320
who will probably send even more gifs to

00:05:48,560 --> 00:05:52,320
congratulate breaking out the container

00:05:50,320 --> 00:05:53,360
and completing the scenario we've got

00:05:52,320 --> 00:05:55,840
six scenarios

00:05:53,360 --> 00:05:57,440
all different uh difficulty levels um

00:05:55,840 --> 00:05:58,400
but the main thing about today's is just

00:05:57,440 --> 00:06:00,960
have fun and learn

00:05:58,400 --> 00:06:02,160
um you're gonna break out of container

00:06:00,960 --> 00:06:04,800
it's gonna be great fun

00:06:02,160 --> 00:06:06,080
and well with myself as being one of the

00:06:04,800 --> 00:06:08,240
taskmasters here

00:06:06,080 --> 00:06:10,400
we learned from the peers around us and

00:06:08,240 --> 00:06:12,160
so it's just our absolute pleasure to

00:06:10,400 --> 00:06:14,000
help you break out of your containers

00:06:12,160 --> 00:06:15,360
today

00:06:14,000 --> 00:06:16,880
i think that's pretty much it and i

00:06:15,360 --> 00:06:17,280
haven't even mentioned that we're hiring

00:06:16,880 --> 00:06:19,199
so

00:06:17,280 --> 00:06:20,560
to this point i'd like to pass back to

00:06:19,199 --> 00:06:23,759
the mr andrew

00:06:20,560 --> 00:06:26,080
martin and with that

00:06:23,759 --> 00:06:27,280
thoroughly captivating introduction from

00:06:26,080 --> 00:06:31,280
the right honorable

00:06:27,280 --> 00:06:33,199
task master lewis we are ready to roll

00:06:31,280 --> 00:06:34,560
everything that you need to participate

00:06:33,199 --> 00:06:37,440
is in the top link

00:06:34,560 --> 00:06:39,840
the task master is on the cncf slack so

00:06:37,440 --> 00:06:42,800
please sign up to engage with the ctf

00:06:39,840 --> 00:06:44,160
and we'll be rolling all day on twitch

00:06:42,800 --> 00:06:48,400
please create an account

00:06:44,160 --> 00:06:51,120
if you'd like to comment on the stream

00:06:48,400 --> 00:06:51,919
and with that go forth and assault these

00:06:51,120 --> 00:06:54,639
foolish and

00:06:51,919 --> 00:06:55,039
wantonly misconfigured clusters control

00:06:54,639 --> 00:06:56,800
plane

00:06:55,039 --> 00:06:58,800
are more than proud to support sig

00:06:56,800 --> 00:07:01,360
security and today's ctf

00:06:58,800 --> 00:07:02,400
and plenty of task masters are on hand

00:07:01,360 --> 00:07:05,199
to help

00:07:02,400 --> 00:07:07,280
beware pirates sparing gifts have fun

00:07:05,199 --> 00:07:10,080
and future andy and lewis will be back

00:07:07,280 --> 00:07:10,720
later for a line-by-line teardown of the

00:07:10,080 --> 00:07:12,720
mystical

00:07:10,720 --> 00:07:14,319
incantations and command line

00:07:12,720 --> 00:07:17,840
invocations required

00:07:14,319 --> 00:07:17,840
to complete each scenario

00:07:24,720 --> 00:07:29,680
hi hey andy i haven't seen you for ages

00:07:28,080 --> 00:07:31,919
man how you doing

00:07:29,680 --> 00:07:33,039
really good really good indeed how are

00:07:31,919 --> 00:07:35,039
you doing yeah

00:07:33,039 --> 00:07:36,720
well i just finished the video for the

00:07:35,039 --> 00:07:39,919
keynote that we're delivering

00:07:36,720 --> 00:07:40,400
one thing i forgot though like i had a

00:07:39,919 --> 00:07:42,720
suit

00:07:40,400 --> 00:07:43,440
i had like a shirt and tie on and i just

00:07:42,720 --> 00:07:46,240
completely

00:07:43,440 --> 00:07:47,039
forgot so i just kept my hoodie on just

00:07:46,240 --> 00:07:49,520
what a fall

00:07:47,039 --> 00:07:52,160
but was there anything else this felt

00:07:49,520 --> 00:07:54,240
like something else we forgot

00:07:52,160 --> 00:07:56,720
it does feel like something has eluded

00:07:54,240 --> 00:07:57,599
us well it won't be the first time to be

00:07:56,720 --> 00:08:01,680
honest but

00:07:57,599 --> 00:08:03,440
this is oh it's not the flag

00:08:01,680 --> 00:08:04,720
no we've got the flags we've hidden him

00:08:03,440 --> 00:08:08,160
really well in those directions

00:08:04,720 --> 00:08:10,400
yeah we've done that um it's not

00:08:08,160 --> 00:08:12,400
defense against the dark and nefarious

00:08:10,400 --> 00:08:14,879
captain jack

00:08:12,400 --> 00:08:16,240
well after last time jeez let's hope

00:08:14,879 --> 00:08:19,919
it's not that again

00:08:16,240 --> 00:08:23,120
but uh oh twitch

00:08:19,919 --> 00:08:26,080
the twitch stream of course

00:08:23,120 --> 00:08:26,720
um wait okay i've got an idea andy but i

00:08:26,080 --> 00:08:30,000
need you

00:08:26,720 --> 00:08:32,080
i need you to believe in me

00:08:30,000 --> 00:08:33,839
i believe lewis no i believe no last

00:08:32,080 --> 00:08:36,080
time he said that i fell and i

00:08:33,839 --> 00:08:37,519
and it hurt so i needed it it was all a

00:08:36,080 --> 00:08:40,240
bit weird i was distracted

00:08:37,519 --> 00:08:42,159
okay all right okay come on just look at

00:08:40,240 --> 00:08:46,320
me look into my eyes

00:08:42,159 --> 00:08:49,839
okay three two one

00:08:46,320 --> 00:08:52,640
there it is look that worked out

00:08:49,839 --> 00:08:53,760
i mean fantastic wait that's exactly

00:08:52,640 --> 00:08:56,000
what we needed

00:08:53,760 --> 00:08:56,959
and we got everyone at cubecon as well

00:08:56,000 --> 00:08:58,800
hey

00:08:56,959 --> 00:09:00,080
how are you doing good morning we're

00:08:58,800 --> 00:09:01,920
just catching up um

00:09:00,080 --> 00:09:03,600
yeah no here's the twitch stream that

00:09:01,920 --> 00:09:04,399
you need to join to be able to follow

00:09:03,600 --> 00:09:06,720
it's important

00:09:04,399 --> 00:09:08,000
yeah it's really important and for some

00:09:06,720 --> 00:09:11,040
reason we forgot but

00:09:08,000 --> 00:09:11,600
it's here now um all right i think we

00:09:11,040 --> 00:09:13,839
gotta go

00:09:11,600 --> 00:09:15,200
um i need to go and spin up some

00:09:13,839 --> 00:09:17,440
clusters

00:09:15,200 --> 00:09:18,320
they will not spin up themselves no that

00:09:17,440 --> 00:09:21,440
just won't happen

00:09:18,320 --> 00:09:23,680
um but we're i'll see you later on yeah

00:09:21,440 --> 00:09:24,959
um yeah see you in a few hours and we'll

00:09:23,680 --> 00:09:26,480
we'll do this again

00:09:24,959 --> 00:09:28,480
yeah yeah and we'll show people how to

00:09:26,480 --> 00:09:31,120
get the flags and um yeah

00:09:28,480 --> 00:09:31,519
cool yeah and bundle all the magic all

00:09:31,120 --> 00:09:32,800
right

00:09:31,519 --> 00:09:34,800
i think i just used up all my magic

00:09:32,800 --> 00:09:37,600
doing that but i'll try and find some up

00:09:34,800 --> 00:09:38,480
yeah it was mighty impressive well shut

00:09:37,600 --> 00:09:45,600
up

00:09:38,480 --> 00:09:45,600

YouTube URL: https://www.youtube.com/watch?v=Bn_0NjvoDoo


