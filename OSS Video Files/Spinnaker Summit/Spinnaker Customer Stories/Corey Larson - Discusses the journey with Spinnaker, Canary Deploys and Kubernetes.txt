Title: Corey Larson - Discusses the journey with Spinnaker, Canary Deploys and Kubernetes
Publication date: 2018-12-13
Playlist: Spinnaker Customer Stories
Description: 
	
Captions: 
	00:00:00,140 --> 00:00:05,580
all right we are reporting so hey it's

00:00:03,060 --> 00:00:08,309
rodeo with armory and I'm here with Cory

00:00:05,580 --> 00:00:10,200
only you introduce yourself

00:00:08,309 --> 00:00:11,969
Cory Larson I'm with a company called

00:00:10,200 --> 00:00:12,809
imagine learning Brent a company off the

00:00:11,969 --> 00:00:14,790
Provo Utah

00:00:12,809 --> 00:00:16,710
alright means that you are experienced

00:00:14,790 --> 00:00:21,060
yes when did you start your spray your

00:00:16,710 --> 00:00:22,890
journey about eight nine months ago when

00:00:21,060 --> 00:00:24,510
we first start moving to kubernetes okay

00:00:22,890 --> 00:00:29,730
sorry how did you first hear about

00:00:24,510 --> 00:00:32,070
somebody I don't remember I think it was

00:00:29,730 --> 00:00:34,649
a cute con when someone mentioned

00:00:32,070 --> 00:00:35,760
spinnaker and then we saw had Canary

00:00:34,649 --> 00:00:37,410
releases which is something we were

00:00:35,760 --> 00:00:38,850
interested in we didn't know it wasn't

00:00:37,410 --> 00:00:40,950
actually in there yet but they were

00:00:38,850 --> 00:00:45,230
actually going to get there and that's

00:00:40,950 --> 00:00:45,230
where I started so what were you doing

00:00:46,340 --> 00:00:54,449
we were net shot we were ten city baits

00:00:50,039 --> 00:00:56,940
and it was hockey Oda ploy okay so you

00:00:54,449 --> 00:00:59,190
you've been weigh-in eight months ago

00:00:56,940 --> 00:01:02,129
you started entertainer eyes yes it tell

00:00:59,190 --> 00:01:04,500
me more a bit more about with that yes

00:01:02,129 --> 00:01:06,270
so we had two large s like service

00:01:04,500 --> 00:01:08,100
oriented hats NetApp's and we've been

00:01:06,270 --> 00:01:10,140
just putting pieces off micro servicing

00:01:08,100 --> 00:01:11,939
them here putting them up in kubernetes

00:01:10,140 --> 00:01:14,040
and we need a deployment story around

00:01:11,939 --> 00:01:15,119
that in Seneca zombies so what balsam

00:01:14,040 --> 00:01:16,680
what were some of the specific things

00:01:15,119 --> 00:01:19,170
you are hoping to solve this for the

00:01:16,680 --> 00:01:20,820
ground we wanted to get to a point where

00:01:19,170 --> 00:01:22,229
I mean octo deploy was cool but we just

00:01:20,820 --> 00:01:24,540
wanted to get to a point where it was

00:01:22,229 --> 00:01:27,509
automatic code was committed into github

00:01:24,540 --> 00:01:30,270
and we knew something would yell at us

00:01:27,509 --> 00:01:32,490
if something was wrong and otherwise we

00:01:30,270 --> 00:01:33,750
just go to production and we didn't care

00:01:32,490 --> 00:01:37,560
like which wanted everything to make it

00:01:33,750 --> 00:01:39,119
production like what using vinegar could

00:01:37,560 --> 00:01:43,140
get us there eventually

00:01:39,119 --> 00:01:46,049
so the opinionation yeah yeah what what

00:01:43,140 --> 00:01:46,840
else were goals that maybe you haven't

00:01:46,049 --> 00:01:48,579
achieved yet over

00:01:46,840 --> 00:01:49,689
you have but we're not totally there yet

00:01:48,579 --> 00:01:51,850
we're still working on some canary

00:01:49,689 --> 00:01:54,369
release stuff that's been and that's

00:01:51,850 --> 00:01:55,810
been an interesting journey some of our

00:01:54,369 --> 00:01:57,189
other technical details of our platform

00:01:55,810 --> 00:02:00,520
about how to actually collect canary

00:01:57,189 --> 00:02:07,270
data do a parallel deployment there but

00:02:00,520 --> 00:02:09,369
most of our yes that's the worst worst

00:02:07,270 --> 00:02:12,299
question again I got lost because I knew

00:02:09,369 --> 00:02:14,319
just a few yeah just just the you know

00:02:12,299 --> 00:02:15,760
for anybody who is watching this who

00:02:14,319 --> 00:02:18,760
maybe is on the front end of the

00:02:15,760 --> 00:02:20,739
spinnaker journey and hasn't yet really

00:02:18,760 --> 00:02:24,670
started digging into it what are some of

00:02:20,739 --> 00:02:27,250
the things that you and then how has

00:02:24,670 --> 00:02:29,140
that how is it actually evidence as you

00:02:27,250 --> 00:02:31,299
yeah so we were hoping it solved that it

00:02:29,140 --> 00:02:33,010
has evidence to self quite a bit and

00:02:31,299 --> 00:02:35,379
what we've done is we've got this really

00:02:33,010 --> 00:02:36,849
cool templating system right a lot of

00:02:35,379 --> 00:02:38,290
people use helm for coop templating

00:02:36,849 --> 00:02:39,700
they're kubernetes manifests I know

00:02:38,290 --> 00:02:40,900
spinnaker can do that but we're not

00:02:39,700 --> 00:02:42,459
using it cuz all we need is the

00:02:40,900 --> 00:02:44,079
templating art using comes up a little

00:02:42,459 --> 00:02:46,660
bit like using a cannon to shoot flies

00:02:44,079 --> 00:02:48,280
so we're not doing that yeah we're using

00:02:46,660 --> 00:02:49,629
a different tool that templates out are

00:02:48,280 --> 00:02:51,730
yeah malls but at the same time we're

00:02:49,629 --> 00:02:54,160
templating out our kubernetes vinegar

00:02:51,730 --> 00:02:56,079
pipelines and our build process applies

00:02:54,160 --> 00:02:58,810
the pipeline ahead of sending the

00:02:56,079 --> 00:03:00,790
manifest to spinnaker together so we can

00:02:58,810 --> 00:03:03,489
update our pipeline in conjunction with

00:03:00,790 --> 00:03:05,500
our manifests and it all just kind of

00:03:03,489 --> 00:03:08,500
rolls through there and so the end

00:03:05,500 --> 00:03:10,000
result is our most of our developers who

00:03:08,500 --> 00:03:11,580
are developing and deploying their

00:03:10,000 --> 00:03:12,990
kubernetes don't know

00:03:11,580 --> 00:03:14,250
kubernetes manifests they don't have to

00:03:12,990 --> 00:03:15,570
know they don't have to know how to do

00:03:14,250 --> 00:03:17,430
spinnaker pipelines

00:03:15,570 --> 00:03:19,490
they just know we've got their back and

00:03:17,430 --> 00:03:21,810
we have these well-defined work-like

00:03:19,490 --> 00:03:23,640
pipelines that will get them there is

00:03:21,810 --> 00:03:25,620
their writing have some standardization

00:03:23,640 --> 00:03:27,990
then understanding as all slots of

00:03:25,620 --> 00:03:29,970
standardization because we're just

00:03:27,990 --> 00:03:31,920
starting our journey we discovered we

00:03:29,970 --> 00:03:33,600
were doing some bad things we were able

00:03:31,920 --> 00:03:35,820
to bake those into our templates and our

00:03:33,600 --> 00:03:37,350
pipelines on their next deploy they got

00:03:35,820 --> 00:03:41,640
those for free and they didn't even know

00:03:37,350 --> 00:03:45,360
it was really okay and then what targets

00:03:41,640 --> 00:03:47,100
you to point out to we're deploying to a

00:03:45,360 --> 00:03:49,920
couple of kubernetes clusters have

00:03:47,100 --> 00:03:54,150
gotten an on pad one out on AWS setup

00:03:49,920 --> 00:03:55,980
using cops and it's actually really our

00:03:54,150 --> 00:03:59,190
entire deployment or we'd love to get

00:03:55,980 --> 00:04:01,620
lambdas in there and some other non

00:03:59,190 --> 00:04:02,220
kubernetes stuff but we haven't gone

00:04:01,620 --> 00:04:05,190
there yet

00:04:02,220 --> 00:04:07,830
is is that is that an important piece of

00:04:05,190 --> 00:04:11,640
the spinnaker kind of decision-making

00:04:07,830 --> 00:04:15,000
process for you the ability to expand

00:04:11,640 --> 00:04:16,770
into those other targets yes I've been

00:04:15,000 --> 00:04:18,390
seeing like chatter and serious benefits

00:04:16,770 --> 00:04:21,810
talk about some of the stuff that he WS

00:04:18,390 --> 00:04:22,950
teams do has yeah and if we really

00:04:21,810 --> 00:04:25,110
wanted to I mean we could just use like

00:04:22,950 --> 00:04:28,169
an AWS CLI container and get it up there

00:04:25,110 --> 00:04:29,310
we just haven't done the work yet what

00:04:28,169 --> 00:04:32,400
are some of the things that you wish

00:04:29,310 --> 00:04:36,780
spinnaker could do that doesn't do or

00:04:32,400 --> 00:04:38,580
aren't easy to figure out jobs just work

00:04:36,780 --> 00:04:42,870
holes around jobs especially could be to

00:04:38,580 --> 00:04:44,400
provider didn't we we had some troubles

00:04:42,870 --> 00:04:46,950
with that we were creating a lot of jobs

00:04:44,400 --> 00:04:48,450
for some post deployments that some

00:04:46,950 --> 00:04:50,220
teams are doing some caption validation

00:04:48,450 --> 00:04:52,530
with that and it would end up running

00:04:50,220 --> 00:04:53,820
this kubernetes job and then one time

00:04:52,530 --> 00:04:55,169
hopped into the cluster and it was like

00:04:53,820 --> 00:04:57,270
oh wait what are all these like

00:04:55,169 --> 00:04:59,970
containers and jobs lying around and I

00:04:57,270 --> 00:05:01,320
mean we can do that with like a some

00:04:59,970 --> 00:05:03,410
like a little operator that will go

00:05:01,320 --> 00:05:05,390
clean those up on the backend but

00:05:03,410 --> 00:05:07,580
I don't know just felt like the whole

00:05:05,390 --> 00:05:09,710
story around v2 Jobs was a little

00:05:07,580 --> 00:05:11,900
frustrating four steps to make sure that

00:05:09,710 --> 00:05:13,460
you know like delete before you try and

00:05:11,900 --> 00:05:15,980
deploy it and then try and clean up

00:05:13,460 --> 00:05:17,390
afterward to handle things and it just

00:05:15,980 --> 00:05:18,590
felt a little weird it was a little

00:05:17,390 --> 00:05:19,370
frustrating and you were early to the

00:05:18,590 --> 00:05:21,230
supervisor

00:05:19,370 --> 00:05:24,050
we were very early to be to provide were

00:05:21,230 --> 00:05:26,210
you using the v1 right before that we

00:05:24,050 --> 00:05:28,550
were but only intent like deploying test

00:05:26,210 --> 00:05:30,380
stuff we went to the v2 provider before

00:05:28,550 --> 00:05:32,000
we went to Prague just to so we didn't

00:05:30,380 --> 00:05:36,050
have stuff to back migrate we just kind

00:05:32,000 --> 00:05:37,700
of like went all in well thank you for

00:05:36,050 --> 00:05:40,190
sharing your story anything else that

00:05:37,700 --> 00:05:42,200
someone who's watching this who is not

00:05:40,190 --> 00:05:45,110
yet started on their journey should know

00:05:42,200 --> 00:05:46,790
and even approach its best practices

00:05:45,110 --> 00:05:48,890
I found the slack channel really really

00:05:46,790 --> 00:05:50,450
helpful for the spinnaker community

00:05:48,890 --> 00:05:55,370
they've been great answering the

00:05:50,450 --> 00:05:56,780
questions and helping their the if this

00:05:55,370 --> 00:05:58,070
the stories got along better how yours

00:05:56,780 --> 00:05:59,930
your friend if you're just starting out

00:05:58,070 --> 00:06:02,630
it's also a great tool to learn and pick

00:05:59,930 --> 00:06:04,190
up as everything the code labs were also

00:06:02,630 --> 00:06:05,450
invaluable when we're getting started

00:06:04,190 --> 00:06:07,190
running through those just run through

00:06:05,450 --> 00:06:08,480
one or two the somewhat match your

00:06:07,190 --> 00:06:11,750
scenario and that'll get you most of the

00:06:08,480 --> 00:06:14,000
way there and let's play break anything

00:06:11,750 --> 00:06:16,100
yeah all right well if you're watching

00:06:14,000 --> 00:06:18,470
this and you are new to the community

00:06:16,100 --> 00:06:20,180
there's a slack team that has about

00:06:18,470 --> 00:06:21,890
5,000 people in it and as you mentioned

00:06:20,180 --> 00:06:23,600
you very firmly might be intimidating at

00:06:21,890 --> 00:06:24,730
the beginning but just jump in and start

00:06:23,600 --> 00:06:26,590
asking questions

00:06:24,730 --> 00:06:28,840
lots of you like where they help you

00:06:26,590 --> 00:06:30,970
feel free to ping me if you like i'm d

00:06:28,840 --> 00:06:32,170
CH w on that slack channel I'd love to

00:06:30,970 --> 00:06:36,240
try and help if you need it it's awesome

00:06:32,170 --> 00:06:36,240

YouTube URL: https://www.youtube.com/watch?v=KS4nREUFaqI


