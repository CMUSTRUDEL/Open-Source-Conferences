Title: The Web API - Bristol JS - November 2018
Publication date: 2018-12-11
Playlist: Bristol JS
Description: 
	Presented by Mike Oram.

The web API has been a vital part of the JavaScript ecosystem for quite some time now, giving us AJAX, window timers and more. With the rise of progressive web apps, the web API's functionality is increasing like never before. To compete with native applications, the web API has some fantastic and powerful new features, with some awesome, and scary results. During this talk we will explore some of the newer web API features, how to use them and more importantly, the risks that they pose.

_

About Pusher Sessions:

We're bringing the meetup to you. With Sessions, you can watch recordings of top-notch talks from developer meetups -- wherever and whenever you want.

Meetups are a great way to learn from our peers and to keep up with the latest trends and technologies. As developers ourselves, we at Pusher wanted to bring this great content to more people... So we built Sessions. On Sessions, you can watch talks that interest you and subscribe to be notified when new content gets added.

If you run a meetup and want to get involved, kindly get in touch.

_

About Pusher:

Pusher is a hosted service with APIs, developer tools and open source libraries that greatly simplify integrating real-time functionality into web and mobile applications. 

Pusher will automatically scale when required, removing all the pain of setting up and maintaining a secure, real-time infrastructure. 

Pusher is already trusted to do so by thousands of developers and companies like GitHub, MailChimp, the Financial Times, Buffer and many more. 

Getting started takes just a few seconds: simply go to pusher.com and create a free account. Happy hacking!
Captions: 
	00:00:00,030 --> 00:00:03,659
hey everyone just before we get started

00:00:02,399 --> 00:00:09,030
real quick who's got an android device

00:00:03,659 --> 00:00:15,660
with them today okay good

00:00:09,030 --> 00:00:18,090
so about six eight weeks ago or so PHP

00:00:15,660 --> 00:00:19,580
Southwest which is the local PHP meetup

00:00:18,090 --> 00:00:21,900
asked me if I would do a talk on

00:00:19,580 --> 00:00:23,100
something JavaScript related so I

00:00:21,900 --> 00:00:27,140
thought it'd be a great opportunity for

00:00:23,100 --> 00:00:29,250
me to play around with the Web API I

00:00:27,140 --> 00:00:30,689
more of a PHP developer than a

00:00:29,250 --> 00:00:32,570
JavaScript developer so it was just an

00:00:30,689 --> 00:00:35,610
excuse to kind of get my hands wet a bit

00:00:32,570 --> 00:00:36,930
so I started doing it and realize that

00:00:35,610 --> 00:00:38,399
you could do some quite scary things

00:00:36,930 --> 00:00:40,530
with it and the talk quite quickly

00:00:38,399 --> 00:00:43,460
became more of a security talk than it

00:00:40,530 --> 00:00:45,420
is about the Web API

00:00:43,460 --> 00:00:47,039
so then I kind of thought well actually

00:00:45,420 --> 00:00:53,340
the best we're demoing the security

00:00:47,039 --> 00:00:54,809
stuff is to actually demo it so anybody

00:00:53,340 --> 00:00:56,309
with an Android device and this does

00:00:54,809 --> 00:00:57,480
work a little bit on iPhones but I'm

00:00:56,309 --> 00:01:00,359
going to hack all of your devices

00:00:57,480 --> 00:01:04,110
tonight I'm going to attempt to it works

00:01:00,359 --> 00:01:05,850
sometimes all see what happens you don't

00:01:04,110 --> 00:01:08,670
have to join in with this if you don't

00:01:05,850 --> 00:01:11,100
want to if you do join in

00:01:08,670 --> 00:01:12,840
I will not access any of your files you

00:01:11,100 --> 00:01:14,970
can't do that yet and I won't leave

00:01:12,840 --> 00:01:16,650
anything on your devices afterwards if

00:01:14,970 --> 00:01:19,950
at any point you want to opt out just

00:01:16,650 --> 00:01:21,810
close the browser and it will stop but

00:01:19,950 --> 00:01:24,390
we'll see how it goes and we'll see if

00:01:21,810 --> 00:01:29,990
we can demo some some stuff on your

00:01:24,390 --> 00:01:32,310
devices so if you'd like to join in and

00:01:29,990 --> 00:01:37,020
if nobody does this is gonna be a really

00:01:32,310 --> 00:01:38,880
short talk please go to this URL or scan

00:01:37,020 --> 00:01:42,079
the QR code because you've all got cure

00:01:38,880 --> 00:01:46,500
scanners now from the talk earlier right

00:01:42,079 --> 00:01:48,450
it should take you to HTTPS but if it

00:01:46,500 --> 00:01:51,420
doesn't just make sure that it is on

00:01:48,450 --> 00:01:52,590
there when you get there it will ask you

00:01:51,420 --> 00:01:55,259
for a little prompts and permissions

00:01:52,590 --> 00:01:58,829
please accept all of them otherwise none

00:01:55,259 --> 00:02:02,759
of it work please also make sure that

00:01:58,829 --> 00:02:04,860
you're not on a battery saver mode on

00:02:02,759 --> 00:02:07,860
your phone because it disables a lot of

00:02:04,860 --> 00:02:09,360
the API stuff and unlike most dogs

00:02:07,860 --> 00:02:10,340
please turn your volume up to the

00:02:09,360 --> 00:02:13,849
maximum

00:02:10,340 --> 00:02:16,970
humm and we'll see if we can break some

00:02:13,849 --> 00:02:19,790
stuff but before we do that I'm gonna

00:02:16,970 --> 00:02:22,730
kind of introduce myself and talk about

00:02:19,790 --> 00:02:24,140
some of the things from the Web API so

00:02:22,730 --> 00:02:27,230
my name is Mike

00:02:24,140 --> 00:02:28,790
I wrote made an academy in bath we do

00:02:27,230 --> 00:02:32,090
software development training mostly for

00:02:28,790 --> 00:02:34,280
juniors as I say I'm primarily a PHP

00:02:32,090 --> 00:02:37,700
developer but I do JavaScript and all

00:02:34,280 --> 00:02:40,480
sorts of other stuff as well and yeah

00:02:37,700 --> 00:02:42,980
I'm here to talk about the Web API

00:02:40,480 --> 00:02:48,380
primarily some of the fun things it does

00:02:42,980 --> 00:02:50,980
beyond just like Ajax and stuff so let's

00:02:48,380 --> 00:02:50,980
get started

00:02:51,310 --> 00:02:56,620
boring one one that hopefully everyone's

00:02:53,630 --> 00:02:58,879
kind of seen before the geolocation API

00:02:56,620 --> 00:03:01,610
all my code samples do actually work

00:02:58,879 --> 00:03:03,319
some of them are readable and some of

00:03:01,610 --> 00:03:04,879
them are a little bit small they're

00:03:03,319 --> 00:03:06,590
mostly just there so you can see kind of

00:03:04,879 --> 00:03:09,379
how much code is required to do some of

00:03:06,590 --> 00:03:11,299
this stuff so the geolocation API allows

00:03:09,379 --> 00:03:13,970
you to pull the last student longitude

00:03:11,299 --> 00:03:15,370
and there is other bits of data about

00:03:13,970 --> 00:03:19,310
the user's device

00:03:15,370 --> 00:03:21,350
it requires HTTP it requires user

00:03:19,310 --> 00:03:23,569
permission so pop up a little thing and

00:03:21,350 --> 00:03:25,430
ask them and it pretty much works on all

00:03:23,569 --> 00:03:26,900
devices these days it's been around for

00:03:25,430 --> 00:03:29,120
a while you're all probably using it

00:03:26,900 --> 00:03:31,880
next one the share API this one's a bit

00:03:29,120 --> 00:03:33,470
newer doesn't require to see GPS there's

00:03:31,880 --> 00:03:37,400
no user permissions for it at all it

00:03:33,470 --> 00:03:39,470
literally just hooks into the native

00:03:37,400 --> 00:03:42,829
sharing capabilities of the user's

00:03:39,470 --> 00:03:44,329
device it does require a user

00:03:42,829 --> 00:03:47,750
interaction so they have to click on

00:03:44,329 --> 00:03:50,239
something or scroll or do some kind of

00:03:47,750 --> 00:03:51,859
event in order to trigger this but what

00:03:50,239 --> 00:03:55,940
it allows you to do is effectively share

00:03:51,859 --> 00:03:57,980
some text and a URL via whatever apps

00:03:55,940 --> 00:04:00,709
are installed on their users device so

00:03:57,980 --> 00:04:02,419
you can tweet you can what send whatsapp

00:04:00,709 --> 00:04:04,400
messages that kind of stuff but it is

00:04:02,419 --> 00:04:05,569
obviously down to the user to pick the

00:04:04,400 --> 00:04:08,359
medium that they would like to share

00:04:05,569 --> 00:04:11,540
your messages via at the moment this

00:04:08,359 --> 00:04:13,910
ending works on Android and only on

00:04:11,540 --> 00:04:16,190
chrome on Android as a lot of these

00:04:13,910 --> 00:04:18,079
examples are but it is it is coming to

00:04:16,190 --> 00:04:20,840
some of the other platforms next one the

00:04:18,079 --> 00:04:23,570
vibration API this one allows you to

00:04:20,840 --> 00:04:24,470
basically make Advice vibrate partly

00:04:23,570 --> 00:04:26,880
enough

00:04:24,470 --> 00:04:27,960
you can give it a single integer and

00:04:26,880 --> 00:04:29,970
it'll just vibrate for that many

00:04:27,960 --> 00:04:32,880
milliseconds or you can give it an array

00:04:29,970 --> 00:04:36,750
of integers and it will vibrate on and

00:04:32,880 --> 00:04:39,090
off for that many milliseconds so 200

00:04:36,750 --> 00:04:41,280
off 200 on for 200 and if you put that

00:04:39,090 --> 00:04:42,260
in a loop it'll just never stop don't do

00:04:41,280 --> 00:04:47,300
that

00:04:42,260 --> 00:04:51,060
this is supported by Chrome and Firefox

00:04:47,300 --> 00:04:52,520
strangely on desktops says that you can

00:04:51,060 --> 00:04:55,530
do it

00:04:52,520 --> 00:04:56,760
yeah I don't know but don't say you can

00:04:55,530 --> 00:05:00,570
do it and it does an error when you run

00:04:56,760 --> 00:05:02,820
the code but it also doesn't vibrate but

00:05:00,570 --> 00:05:05,520
yeah is on mobile devices is supported

00:05:02,820 --> 00:05:10,560
by by Android Chrome it's not an iPhone

00:05:05,520 --> 00:05:12,210
yet the Audio API so this one's actually

00:05:10,560 --> 00:05:13,710
broken into two sections there's kind of

00:05:12,210 --> 00:05:16,770
the boring bit and then slightly more

00:05:13,710 --> 00:05:18,200
fun bit we'll get onto later so this

00:05:16,770 --> 00:05:20,760
allows you to play audio files

00:05:18,200 --> 00:05:22,919
synthesized sounds create effects from

00:05:20,760 --> 00:05:26,790
from audio visualizations that kind of

00:05:22,919 --> 00:05:29,100
stuff it's it still got a WebKit

00:05:26,790 --> 00:05:30,660
implementation but there is kind of a

00:05:29,100 --> 00:05:32,640
standard implementation as well but the

00:05:30,660 --> 00:05:34,020
way you have to do is just specify

00:05:32,640 --> 00:05:35,190
whether you want the standard the

00:05:34,020 --> 00:05:35,880
standard one of the WebKit one and it

00:05:35,190 --> 00:05:37,500
just works

00:05:35,880 --> 00:05:39,930
from that point on which you can pretty

00:05:37,500 --> 00:05:42,169
much control or generate any sounds that

00:05:39,930 --> 00:05:44,820
you want you can control like the gain

00:05:42,169 --> 00:05:49,860
the oscillation type the frequency

00:05:44,820 --> 00:05:53,220
values set how long the the sound should

00:05:49,860 --> 00:05:55,740
play all sorts of things the values

00:05:53,220 --> 00:05:58,950
don't really make any sense I mean I

00:05:55,740 --> 00:06:02,490
don't do music so maybe they do make

00:05:58,950 --> 00:06:04,350
sense to people that do music but if you

00:06:02,490 --> 00:06:05,700
look online you can find basically a

00:06:04,350 --> 00:06:07,950
list of values that will give you all

00:06:05,700 --> 00:06:12,560
the different notes so if you want you

00:06:07,950 --> 00:06:14,520
know CEO F or I don't know music sounds

00:06:12,560 --> 00:06:15,990
you can pull them off the internet and

00:06:14,520 --> 00:06:17,430
there's just lists of them you just put

00:06:15,990 --> 00:06:18,630
the put the numbers in and it will give

00:06:17,430 --> 00:06:19,650
you those sounds so if you're building

00:06:18,630 --> 00:06:21,479
something that where you need specific

00:06:19,650 --> 00:06:23,310
noises you can do that and you can

00:06:21,479 --> 00:06:24,720
basically get it to synthesize any kind

00:06:23,310 --> 00:06:27,690
of noise or any kind of sound that you

00:06:24,720 --> 00:06:31,830
want it's to put it by everything except

00:06:27,690 --> 00:06:34,620
Internet Explorer most things aren't no

00:06:31,830 --> 00:06:36,580
HTTP no user permissions you can just

00:06:34,620 --> 00:06:42,610
play stuff

00:06:36,580 --> 00:06:44,110
we'll have a go at that in a minute the

00:06:42,610 --> 00:06:46,570
online offline status one this one's

00:06:44,110 --> 00:06:50,250
quite cool if you do any stuff with

00:06:46,570 --> 00:06:52,450
service workers or with offline support

00:06:50,250 --> 00:06:54,270
then this is just from the front end not

00:06:52,450 --> 00:06:59,170
from not from within the Service Worker

00:06:54,270 --> 00:07:03,300
you've got a new boolean and yeah is

00:06:59,170 --> 00:07:05,770
online with a capital L I don't know why

00:07:03,300 --> 00:07:06,820
and it will contain the true or false as

00:07:05,770 --> 00:07:09,100
to whether the device is currently

00:07:06,820 --> 00:07:11,890
connected to the internet there's also

00:07:09,100 --> 00:07:13,630
an event that fires when the

00:07:11,890 --> 00:07:15,970
connectivity changes so you can hook

00:07:13,630 --> 00:07:18,550
into that and display messages when the

00:07:15,970 --> 00:07:21,400
users device becomes connected or

00:07:18,550 --> 00:07:24,070
becomes disconnected it's supported

00:07:21,400 --> 00:07:26,620
across the board again no HTTP no user

00:07:24,070 --> 00:07:29,250
permissions it just it works straight

00:07:26,620 --> 00:07:32,200
out the box this is actually part of the

00:07:29,250 --> 00:07:33,760
network status API which I haven't got

00:07:32,200 --> 00:07:36,010
as part of this presentation because

00:07:33,760 --> 00:07:37,510
it's kind of a bit newer this is part of

00:07:36,010 --> 00:07:39,190
the network status API that actually

00:07:37,510 --> 00:07:41,520
does fully work but you can pull a lot

00:07:39,190 --> 00:07:45,340
more information if you use that API

00:07:41,520 --> 00:07:47,890
things like what level of connectivity

00:07:45,340 --> 00:07:50,680
that that users device has got so 3G 4G

00:07:47,890 --> 00:07:52,360
2g that kind of information the speed

00:07:50,680 --> 00:07:54,700
there download and upload speed you can

00:07:52,360 --> 00:07:56,650
pull there's quite a few different ones

00:07:54,700 --> 00:07:58,270
but those are the different parts of

00:07:56,650 --> 00:08:01,750
that API are not actually fully

00:07:58,270 --> 00:08:05,020
supported yet their support by basically

00:08:01,750 --> 00:08:06,400
it's just Android so this one is the one

00:08:05,020 --> 00:08:12,660
that actually you can you can you start

00:08:06,400 --> 00:08:17,470
using now okay this one's a bit more fun

00:08:12,660 --> 00:08:19,690
web the speech synthesis API so this one

00:08:17,470 --> 00:08:22,180
actually literally lets you turn text

00:08:19,690 --> 00:08:26,710
into speech on the user's device and

00:08:22,180 --> 00:08:28,450
make it talk to you it uses the the

00:08:26,710 --> 00:08:34,870
Google stuff to do it but actually it

00:08:28,450 --> 00:08:36,790
does work on on the iOS things it's yeah

00:08:34,870 --> 00:08:39,210
literally just as simple as putting your

00:08:36,790 --> 00:08:42,130
text into the speech synthesis utterance

00:08:39,210 --> 00:08:43,570
object setting the pitch the rate and

00:08:42,130 --> 00:08:45,820
then telling it to speak and it will

00:08:43,570 --> 00:08:49,480
just kind of talk to you it will also

00:08:45,820 --> 00:08:50,410
allow you to hook into the available

00:08:49,480 --> 00:08:52,660
voices or

00:08:50,410 --> 00:08:57,399
the users device so you can make you can

00:08:52,660 --> 00:09:00,670
pick the the voice that the that it will

00:08:57,399 --> 00:09:02,050
talk to you in so for example built into

00:09:00,670 --> 00:09:05,230
Mac there's there's like seven or eight

00:09:02,050 --> 00:09:06,819
different default voices and you can you

00:09:05,230 --> 00:09:09,670
can actually pull those voices down and

00:09:06,819 --> 00:09:10,810
then pick the voice that you want and

00:09:09,670 --> 00:09:17,170
get it to speak to you in all sorts of

00:09:10,810 --> 00:09:19,779
different accents in theory this one so

00:09:17,170 --> 00:09:21,519
it doesn't require gtps and there's no

00:09:19,779 --> 00:09:24,730
user permissions for this but in theory

00:09:21,519 --> 00:09:26,500
it does require the user to do some

00:09:24,730 --> 00:09:28,089
interaction so they should have to click

00:09:26,500 --> 00:09:30,420
on something they'll scroll or do

00:09:28,089 --> 00:09:32,949
something in order to make this work

00:09:30,420 --> 00:09:35,079
that's according to the docs actually

00:09:32,949 --> 00:09:37,810
that's not true you can just get it to

00:09:35,079 --> 00:09:40,860
do it randomly so we're gonna do that as

00:09:37,810 --> 00:09:44,170
well later I'm not actually sure why

00:09:40,860 --> 00:09:46,060
they haven't implemented that if you

00:09:44,170 --> 00:09:48,639
read the docs anywhere it all says oh

00:09:46,060 --> 00:09:54,639
yeah it needs user interaction and then

00:09:48,639 --> 00:09:57,250
it doesn't speak to recognition this one

00:09:54,639 --> 00:09:59,980
is yeah this one was a bit a bit scarier

00:09:57,250 --> 00:10:02,100
when I got this one working so this

00:09:59,980 --> 00:10:04,630
literally allows you to record speech

00:10:02,100 --> 00:10:07,389
through the user's device and it will

00:10:04,630 --> 00:10:08,439
translate it back to text for you and

00:10:07,389 --> 00:10:13,019
then you can do whatever you want with

00:10:08,439 --> 00:10:16,509
it it does require HTTP and it does

00:10:13,019 --> 00:10:18,220
require some user permission stuff but

00:10:16,509 --> 00:10:20,740
the user permission stuff as with most

00:10:18,220 --> 00:10:23,769
of the API is for this one once you have

00:10:20,740 --> 00:10:26,829
accepted it it then remembers that

00:10:23,769 --> 00:10:28,930
forever unless you go into your settings

00:10:26,829 --> 00:10:30,730
and change it so if you just on page

00:10:28,930 --> 00:10:32,800
load like I just made some of you do

00:10:30,730 --> 00:10:35,970
accidentally accept things I can now

00:10:32,800 --> 00:10:45,040
listen to the stuff through your phone

00:10:35,970 --> 00:10:48,009
unless you go and change it yes on yeah

00:10:45,040 --> 00:10:50,709
on desktop machines when you do this it

00:10:48,009 --> 00:10:53,170
will show the little like red recording

00:10:50,709 --> 00:10:57,160
icon in the tab at the top so you know

00:10:53,170 --> 00:10:58,569
it's recording on your mobile devices if

00:10:57,160 --> 00:10:59,860
you've got the sound turned up then it

00:10:58,569 --> 00:11:01,000
will beep at you when it starts to

00:10:59,860 --> 00:11:02,529
record and then it will be for you and

00:11:01,000 --> 00:11:03,130
it's finished recording so you know that

00:11:02,529 --> 00:11:03,699
it's recording

00:11:03,130 --> 00:11:05,319
but if you

00:11:03,699 --> 00:11:06,850
have you sound turn up turned up there's

00:11:05,319 --> 00:11:10,319
actually no way of knowing that

00:11:06,850 --> 00:11:14,559
somebody's listening to you which is

00:11:10,319 --> 00:11:17,019
concerning maybe at the moment only

00:11:14,559 --> 00:11:22,269
supported by chrome on on amp both on

00:11:17,019 --> 00:11:23,829
Android and on desktop the only one kind

00:11:22,269 --> 00:11:25,359
of caveat or thing that makes me feel

00:11:23,829 --> 00:11:27,069
mildly better about this one is that it

00:11:25,359 --> 00:11:30,549
does require the browser to be in focus

00:11:27,069 --> 00:11:31,929
so unlike some of the other api's that

00:11:30,549 --> 00:11:35,109
you could just run from a serviceworker

00:11:31,929 --> 00:11:37,269
after there the user's closed closed the

00:11:35,109 --> 00:11:38,379
browser you can't do that with this one

00:11:37,269 --> 00:11:41,259
they actually have to have the browser

00:11:38,379 --> 00:11:42,429
open in front of them so you know when

00:11:41,259 --> 00:11:47,319
you're surfing their webpage they're

00:11:42,429 --> 00:11:50,589
just listening to you just fine push

00:11:47,319 --> 00:11:52,299
notifications these ones less less less

00:11:50,589 --> 00:11:54,279
new I haven't put the code in for this

00:11:52,299 --> 00:11:57,429
one because it's long and doesn't fit on

00:11:54,279 --> 00:12:00,639
my slide but basically allows you to

00:11:57,429 --> 00:12:03,639
push stuff from the server to to the

00:12:00,639 --> 00:12:05,799
front end to the client you can push

00:12:03,639 --> 00:12:09,369
stuff even when the app isn't running so

00:12:05,799 --> 00:12:11,559
it doesn't have to be loaded into the

00:12:09,369 --> 00:12:13,179
browser or even the browser be open

00:12:11,559 --> 00:12:16,209
provided you've got a serviceworker it

00:12:13,179 --> 00:12:20,679
can just listen to the notifications and

00:12:16,209 --> 00:12:22,720
then wake the application up and yeah

00:12:20,679 --> 00:12:26,039
basically this this one's pretty cool

00:12:22,720 --> 00:12:28,299
it's good for kind of mirroring native

00:12:26,039 --> 00:12:31,359
notifications that you would get from a

00:12:28,299 --> 00:12:33,220
native app just when you're using this

00:12:31,359 --> 00:12:35,949
make sure you're using CSRF tokens

00:12:33,220 --> 00:12:38,709
otherwise your application will accept

00:12:35,949 --> 00:12:43,029
push notifications from anyone which you

00:12:38,709 --> 00:12:44,439
don't want again requires HTTPS requires

00:12:43,029 --> 00:12:46,509
user permissions when you when you load

00:12:44,439 --> 00:12:52,059
the app the first time currently only

00:12:46,509 --> 00:12:56,049
works on Android and Chrome and Firefox

00:12:52,059 --> 00:12:57,819
okay full screen API so this one yeah

00:12:56,049 --> 00:13:00,970
again is it's kind of any Chrome on

00:12:57,819 --> 00:13:04,119
mobile but works on Chrome Firefox and

00:13:00,970 --> 00:13:05,739
Safari on desktop there's no HTTP for it

00:13:04,119 --> 00:13:07,720
and doesn't what kind of user

00:13:05,739 --> 00:13:11,259
permissions it will just straight up

00:13:07,720 --> 00:13:13,539
take the take the browser into

00:13:11,259 --> 00:13:15,730
full-screen mode and you can also force

00:13:13,539 --> 00:13:17,980
it out of full screen mode it doesn't

00:13:15,730 --> 00:13:19,780
stop the user for

00:13:17,980 --> 00:13:21,040
extinct fullscreen so it'll put them in

00:13:19,780 --> 00:13:23,140
fullscreen but they can take themselves

00:13:21,040 --> 00:13:24,550
back out of it or vice versa it just

00:13:23,140 --> 00:13:26,770
gives you the control to kind of do that

00:13:24,550 --> 00:13:28,300
if you loaded my app just a minute ago

00:13:26,770 --> 00:13:29,950
you will have seen it do that if you're

00:13:28,300 --> 00:13:35,730
on an Android device it will have full

00:13:29,950 --> 00:13:39,160
screen to you okay let's have some fun

00:13:35,730 --> 00:13:42,340
if this works okay so if you've got the

00:13:39,160 --> 00:13:46,210
got the app if you haven't already can

00:13:42,340 --> 00:13:56,290
you click start and it'll sync you with

00:13:46,210 --> 00:14:07,350
my server and four brave souls just give

00:13:56,290 --> 00:14:12,580
it a minute just in case no it's I phone

00:14:07,350 --> 00:14:14,260
no it yes yes pretty much in order so

00:14:12,580 --> 00:14:17,110
some of these are supported on iPhones

00:14:14,260 --> 00:14:21,370
but rather than writing a cacophony of

00:14:17,110 --> 00:14:23,140
if statements to figure out which API is

00:14:21,370 --> 00:14:24,970
are supported by which users I've just

00:14:23,140 --> 00:14:28,510
done it as you need to have all of these

00:14:24,970 --> 00:14:30,190
in order to join in and my free okay

00:14:28,510 --> 00:14:32,350
cool so let's just try some of the

00:14:30,190 --> 00:14:35,080
easier ones so the sound API I please

00:14:32,350 --> 00:14:37,680
make sure your volumes turned up see if

00:14:35,080 --> 00:14:37,680
we can make this

00:14:50,600 --> 00:14:58,420
oh now I just turn a little on her to

00:14:55,940 --> 00:14:58,420
see if that works

00:14:59,530 --> 00:15:09,940
is it really quiet it is yeah I did

00:15:05,510 --> 00:15:12,020
adjust it slightly okay

00:15:09,940 --> 00:15:13,580
okay clearly need to make it a higher

00:15:12,020 --> 00:15:16,130
frequency let's try let's try the

00:15:13,580 --> 00:15:25,670
vibration one let's see if we can make

00:15:16,130 --> 00:15:27,470
these yeah so those are the kind of the

00:15:25,670 --> 00:15:32,120
simple ones making making noises and

00:15:27,470 --> 00:15:34,570
vibrations and yeah the geolocation one

00:15:32,120 --> 00:15:37,430
this one's fairly very simple so

00:15:34,570 --> 00:15:38,990
apparently I've yeah that's just

00:15:37,430 --> 00:15:42,260
everybody in the room or everybody

00:15:38,990 --> 00:15:45,700
that's connected your locations let's

00:15:42,260 --> 00:15:45,700
see if we can do some of this stuff

00:16:15,090 --> 00:16:18,300
thanks guys

00:16:19,980 --> 00:16:39,330
okay how about this one Oh John have a

00:16:26,320 --> 00:16:43,510
go as well oh okay let's try this one

00:16:39,330 --> 00:16:44,980
somebody wanna who whose two four six

00:16:43,510 --> 00:16:46,990
let's go with that yeah

00:16:44,980 --> 00:16:49,210
okay so in a minute when that goes blue

00:16:46,990 --> 00:16:51,190
you know you need to talk to your device

00:16:49,210 --> 00:16:54,700
just say a couple of words something

00:16:51,190 --> 00:16:56,410
simple and with any luck it will grab

00:16:54,700 --> 00:17:00,700
your voice and put it up on the screen

00:16:56,410 --> 00:17:02,140
for us it will beep when it's actually

00:17:00,700 --> 00:17:04,530
recording or it should be point it's

00:17:02,140 --> 00:17:04,530
recording

00:17:21,030 --> 00:17:28,360
so along with yeah it's just gonna keep

00:17:25,150 --> 00:17:29,980
going now forever so along with being

00:17:28,360 --> 00:17:31,360
able to translate whatever you say or

00:17:29,980 --> 00:17:34,059
being able to detect what you say and

00:17:31,360 --> 00:17:35,770
turn it into text obviously Google have

00:17:34,059 --> 00:17:37,750
now stolen all that information as well

00:17:35,770 --> 00:17:39,850
because it does it by their service but

00:17:37,750 --> 00:17:42,280
it also gives you a confidence gives you

00:17:39,850 --> 00:17:44,890
a percentage as to how sure they think

00:17:42,280 --> 00:17:46,150
they are with what you said so depending

00:17:44,890 --> 00:17:47,620
on what you say you can get it to do

00:17:46,150 --> 00:17:48,820
some do some funny things

00:17:47,620 --> 00:17:50,050
does anyone else we'll have a go

00:17:48,820 --> 00:17:57,370
somebody shout out their number if

00:17:50,050 --> 00:17:59,290
you'll never go no it's okay okay so

00:17:57,370 --> 00:18:02,050
those are the kind of the ones that we

00:17:59,290 --> 00:18:04,270
know actually work these ones were these

00:18:02,050 --> 00:18:07,990
are a little bit harder to do but in

00:18:04,270 --> 00:18:10,179
theory and last time this didn't go so

00:18:07,990 --> 00:18:11,710
well but we'll see in theory this is

00:18:10,179 --> 00:18:15,340
going to do a Mexican wave through the

00:18:11,710 --> 00:18:17,230
room of noises from your devices based

00:18:15,340 --> 00:18:20,100
on its combining the sound and the

00:18:17,230 --> 00:18:20,100
geolocation API

00:18:26,800 --> 00:18:31,850
still it's to lower-frequency to be able

00:18:29,210 --> 00:18:33,650
to hear in the group isn't it clearly

00:18:31,850 --> 00:18:39,560
got the frequency number wrong see not

00:18:33,650 --> 00:18:44,530
musician okay let's keep going actually

00:18:39,560 --> 00:18:47,420
no I'll do that in a minute okay

00:18:44,530 --> 00:18:51,770
there is another API ad that I want to

00:18:47,420 --> 00:18:55,400
talk about the Bluetooth API so this

00:18:51,770 --> 00:18:59,750
allows you to connect to any Bluetooth

00:18:55,400 --> 00:19:03,380
device which supports the the the new

00:18:59,750 --> 00:19:06,110
protocol basically provided your

00:19:03,380 --> 00:19:07,670
Bluetooth is turned on it will allow you

00:19:06,110 --> 00:19:08,990
to from from your browser connect

00:19:07,670 --> 00:19:10,460
connect to that device and then actually

00:19:08,990 --> 00:19:12,800
control that device so you can send it

00:19:10,460 --> 00:19:15,500
to commands and make it do things it

00:19:12,800 --> 00:19:16,910
does require HTTP it does require user

00:19:15,500 --> 00:19:19,220
permission so there is a pop-up on it

00:19:16,910 --> 00:19:21,020
and it does require the browser to be in

00:19:19,220 --> 00:19:23,690
focus so you can't do it from behind the

00:19:21,020 --> 00:19:24,770
scenes or I I'm not going to say

00:19:23,690 --> 00:19:27,680
anything nefarious because that's not

00:19:24,770 --> 00:19:32,510
true but currently only works on Chrome

00:19:27,680 --> 00:19:33,710
and Android in theory what it what's

00:19:32,510 --> 00:19:35,720
supposed to happen and I will show you

00:19:33,710 --> 00:19:38,930
in a minute is that when you try and

00:19:35,720 --> 00:19:41,240
connect it will pop up a list of devices

00:19:38,930 --> 00:19:47,630
that you can connect to that support the

00:19:41,240 --> 00:19:49,640
right frequencies and and support the

00:19:47,630 --> 00:19:51,080
protocol and then you can kind of pick

00:19:49,640 --> 00:19:54,890
the one that you want to and click okay

00:19:51,080 --> 00:19:58,250
so even if even if you haven't had the

00:19:54,890 --> 00:19:59,840
permissions it's okay even if you

00:19:58,250 --> 00:20:00,980
haven't given it permissions it will

00:19:59,840 --> 00:20:04,720
still pop up and ask you which device

00:20:00,980 --> 00:20:07,850
you want to connect to I did find and

00:20:04,720 --> 00:20:09,740
the I really wanted to do this demo but

00:20:07,850 --> 00:20:11,930
I don't think it would gone down very

00:20:09,740 --> 00:20:14,720
well I did find a way of actually just

00:20:11,930 --> 00:20:18,140
making it connect to any device that you

00:20:14,720 --> 00:20:19,970
have previously paired with when you try

00:20:18,140 --> 00:20:22,010
and pair to a device if you do this bit

00:20:19,970 --> 00:20:23,630
of code it'll just say yeah connect to

00:20:22,010 --> 00:20:24,950
any kind of device and it'll give you a

00:20:23,630 --> 00:20:26,120
list and let you pick the device and

00:20:24,950 --> 00:20:27,860
I'll give you a demo of that in a minute

00:20:26,120 --> 00:20:29,930
but if you want to connect to a specific

00:20:27,860 --> 00:20:33,500
device you have to give it the UUID of

00:20:29,930 --> 00:20:34,850
that of that device there is a separate

00:20:33,500 --> 00:20:37,340
part of the Bluetooth API that allows

00:20:34,850 --> 00:20:38,100
you to pull all the UU IDs that are

00:20:37,340 --> 00:20:39,900
available for you

00:20:38,100 --> 00:20:41,070
connective so if you pull all the UUID s

00:20:39,900 --> 00:20:43,230
and then loop over them one at a time

00:20:41,070 --> 00:20:44,940
and just attempt to connect at some

00:20:43,230 --> 00:20:46,770
point one of them will say yes and it

00:20:44,940 --> 00:20:48,480
will just let you in without any use of

00:20:46,770 --> 00:20:49,890
permissions and then you can take

00:20:48,480 --> 00:20:51,120
control of that device which I found out

00:20:49,890 --> 00:20:55,890
in my lounge when I turned off my

00:20:51,120 --> 00:20:57,919
speakers on my TV by accident I haven't

00:20:55,890 --> 00:21:00,450
got a demo doing that I thought that was

00:20:57,919 --> 00:21:05,760
probably beyond what I'd get away with

00:21:00,450 --> 00:21:08,070
doing so but just to prove that the

00:21:05,760 --> 00:21:09,240
Bluetooth API does work and this is not

00:21:08,070 --> 00:21:11,610
gonna go well if nobody's got the

00:21:09,240 --> 00:21:12,990
ability to turned on but if I that's

00:21:11,610 --> 00:21:16,080
just running a bit of code for my slide

00:21:12,990 --> 00:21:17,750
so this is just immediately detecting

00:21:16,080 --> 00:21:20,760
all the Bluetooth devices in the area

00:21:17,750 --> 00:21:23,250
and you can see it tells me whether it's

00:21:20,760 --> 00:21:27,059
a supported device with the with the ble

00:21:23,250 --> 00:21:32,340
protocol which clearly at the moment

00:21:27,059 --> 00:21:33,690
none of these are oh oh there's one so I

00:21:32,340 --> 00:21:36,090
could connect to that and then I would

00:21:33,690 --> 00:21:43,530
be able to control that device via via

00:21:36,090 --> 00:21:46,620
by the protocols is that you don't worry

00:21:43,530 --> 00:21:51,900
I won't it but yes so I could just

00:21:46,620 --> 00:21:53,820
connect to that so yeah it is quite easy

00:21:51,900 --> 00:21:55,710
but all about all that's doing is it's

00:21:53,820 --> 00:21:56,880
just literally just running this bit of

00:21:55,710 --> 00:21:58,350
code which is just requesting all

00:21:56,880 --> 00:22:00,830
devices and just saying yeah accept

00:21:58,350 --> 00:22:05,340
anything and it'll just try and connect

00:22:00,830 --> 00:22:08,190
that was my demo okay there are some

00:22:05,340 --> 00:22:10,679
other API is available so that's just

00:22:08,190 --> 00:22:12,690
kind of the fun ones I wanted to play

00:22:10,679 --> 00:22:16,110
with but there are some other ones so

00:22:12,690 --> 00:22:18,570
the Webb USB API is it's kind of still

00:22:16,110 --> 00:22:20,669
under development but it is available

00:22:18,570 --> 00:22:22,919
for you to start using probably not in

00:22:20,669 --> 00:22:24,900
production yet allows you to read and

00:22:22,919 --> 00:22:32,760
write data to and from USB devices

00:22:24,900 --> 00:22:36,480
connected to that device yeah I don't

00:22:32,760 --> 00:22:40,590
know if that's a good idea but you can

00:22:36,480 --> 00:22:42,600
do it cool local storage and indexeddb

00:22:40,590 --> 00:22:43,770
so that's I mean I'm talking to a

00:22:42,600 --> 00:22:45,240
JavaScript community here I hope

00:22:43,770 --> 00:22:47,400
everybody probably knows what these

00:22:45,240 --> 00:22:49,830
things are so local storage is like

00:22:47,400 --> 00:22:51,320
session data and index TV is a database

00:22:49,830 --> 00:22:54,700
in your browser

00:22:51,320 --> 00:22:58,400
a payment gateway currently only in

00:22:54,700 --> 00:23:01,100
Android but allows you to use google pay

00:22:58,400 --> 00:23:03,710
from javascript basically so you can pay

00:23:01,100 --> 00:23:05,540
for stuff it'll connect to Google pane

00:23:03,710 --> 00:23:09,290
then can grab credit card details and

00:23:05,540 --> 00:23:11,690
stuff through the front end obviously

00:23:09,290 --> 00:23:14,720
requires like fingerprint access and pin

00:23:11,690 --> 00:23:19,310
codes and stuff so there's usual device

00:23:14,720 --> 00:23:20,840
orientation is just a a bunch of

00:23:19,310 --> 00:23:24,860
properties that will tell you which way

00:23:20,840 --> 00:23:28,730
the devices landscape or portrait the

00:23:24,860 --> 00:23:32,500
clipboard API is still under development

00:23:28,730 --> 00:23:36,830
it's actually only available in fire OS

00:23:32,500 --> 00:23:38,150
which clearly everybody uses but allows

00:23:36,830 --> 00:23:40,880
you to read and write stuff from the

00:23:38,150 --> 00:23:42,140
clipboard there was a scary bit when

00:23:40,880 --> 00:23:43,730
they first put it in where you could

00:23:42,140 --> 00:23:46,190
read stuff that you hadn't written from

00:23:43,730 --> 00:23:48,680
the clipboard and then loads of people

00:23:46,190 --> 00:23:50,390
had their passwords stolen but they have

00:23:48,680 --> 00:23:53,030
fixed that so now you can only read

00:23:50,390 --> 00:23:57,010
stuff that you put in there and now that

00:23:53,030 --> 00:24:01,640
they fix that it is coming to other

00:23:57,010 --> 00:24:03,620
platforms the animation API is just

00:24:01,640 --> 00:24:04,940
designed to make animations easier in

00:24:03,620 --> 00:24:10,970
JavaScript so Daffy to keep using

00:24:04,940 --> 00:24:13,160
animation libraries it's rubbish it's

00:24:10,970 --> 00:24:14,960
just not better than using a library I

00:24:13,160 --> 00:24:17,360
had to play with it it's so complicated

00:24:14,960 --> 00:24:22,160
that I was like I just I just want my

00:24:17,360 --> 00:24:24,260
library back yeah but it does exist the

00:24:22,160 --> 00:24:27,800
battery status API this one's quite a

00:24:24,260 --> 00:24:30,050
cool one so it was around for quite a

00:24:27,800 --> 00:24:31,340
while actually and nobody really used it

00:24:30,050 --> 00:24:34,030
because nobody really knew why it was

00:24:31,340 --> 00:24:36,170
there for the theory behind it was that

00:24:34,030 --> 00:24:37,610
if you were using a lot of front-end

00:24:36,170 --> 00:24:38,080
data if you're using particularly things

00:24:37,610 --> 00:24:41,090
like

00:24:38,080 --> 00:24:43,190
indexeddb or something like that you

00:24:41,090 --> 00:24:44,480
could hook into the battery status and

00:24:43,190 --> 00:24:46,640
then when it got down to a certain

00:24:44,480 --> 00:24:47,900
percentage you could then decide okay

00:24:46,640 --> 00:24:49,970
actually I'm gonna save all this data

00:24:47,900 --> 00:24:51,560
properly to my back-end before the

00:24:49,970 --> 00:24:53,450
before the device crashes that was kind

00:24:51,560 --> 00:24:56,450
of a concept which seems nice but

00:24:53,450 --> 00:25:00,290
actually advertisers started doing

00:24:56,450 --> 00:25:03,620
nefarious things with it so what

00:25:00,290 --> 00:25:04,850
happened was they figured out that they

00:25:03,620 --> 00:25:06,679
could embed some jobs

00:25:04,850 --> 00:25:12,019
in the advert in an advert that would

00:25:06,679 --> 00:25:16,220
pick up your current battery level on a

00:25:12,019 --> 00:25:19,399
specific page and store up that

00:25:16,220 --> 00:25:20,990
somewhere and then when they when when

00:25:19,399 --> 00:25:22,279
you visited another page that they were

00:25:20,990 --> 00:25:23,570
serving the ad for they could pick up

00:25:22,279 --> 00:25:26,450
your battery status level on that page

00:25:23,570 --> 00:25:28,549
as well and then based on the amount of

00:25:26,450 --> 00:25:30,860
time that your device is going to take

00:25:28,549 --> 00:25:33,200
to de chardin find that out from it as

00:25:30,860 --> 00:25:35,299
well they could calculate how long it

00:25:33,200 --> 00:25:38,690
took you to get from page a to page B

00:25:35,299 --> 00:25:41,090
and likelihood of where you went in

00:25:38,690 --> 00:25:45,440
between and basically tracked you like

00:25:41,090 --> 00:25:48,679
everywhere people didn't like that so

00:25:45,440 --> 00:25:49,909
much so they got rid of it actually

00:25:48,679 --> 00:25:52,009
because nobody was using it from what it

00:25:49,909 --> 00:25:54,590
was designed for anyway so yeah it

00:25:52,009 --> 00:25:57,230
doesn't exist if you go here to MD end

00:25:54,590 --> 00:25:59,269
the web api stuff there is a huge list

00:25:57,230 --> 00:26:00,980
of all the different api's which is

00:25:59,269 --> 00:26:02,570
quite cool that's basically where I got

00:26:00,980 --> 00:26:06,409
my whole talk Crump it's definitely

00:26:02,570 --> 00:26:08,450
worth a read there are some new api's

00:26:06,409 --> 00:26:10,399
being considered or drafted being talked

00:26:08,450 --> 00:26:13,250
about the moment the wakelock

00:26:10,399 --> 00:26:16,190
API to prevent a device from going to

00:26:13,250 --> 00:26:17,600
sleep anybody joining in with the demo

00:26:16,190 --> 00:26:20,649
will have probably noticed that your

00:26:17,600 --> 00:26:20,649
phone hasn't yet gone to sleep

00:26:20,860 --> 00:26:26,500
the I haven't actually used the wakelock

00:26:23,929 --> 00:26:29,059
API because it's not out yet there is a

00:26:26,500 --> 00:26:33,289
way of doing this without that API if

00:26:29,059 --> 00:26:35,690
you play a mp4 video or any video

00:26:33,289 --> 00:26:37,850
actually on your device the device goes

00:26:35,690 --> 00:26:40,039
off you're watching a video so I'm not

00:26:37,850 --> 00:26:43,070
going to go to sleep so if you make that

00:26:40,039 --> 00:26:45,080
video one pixel in size and transparent

00:26:43,070 --> 00:26:46,940
and play it in the background the device

00:26:45,080 --> 00:26:49,429
then goes off and we're watching a video

00:26:46,940 --> 00:26:51,080
how are we going to sleep and actually

00:26:49,429 --> 00:26:52,639
you're not watching a video so that's

00:26:51,080 --> 00:26:55,389
how I did it to you guys but there is

00:26:52,639 --> 00:26:57,769
because that's like a common solution

00:26:55,389 --> 00:27:01,909
that they've made a minute or they're

00:26:57,769 --> 00:27:04,370
making an API for it the media captured

00:27:01,909 --> 00:27:06,080
one there was a reasonable amount of

00:27:04,370 --> 00:27:09,500
documentation about this at the moment

00:27:06,080 --> 00:27:13,639
on on mdn and it does exist in fire OS

00:27:09,500 --> 00:27:16,129
again but basically it allows you to tap

00:27:13,639 --> 00:27:18,400
into the camera of the user's device and

00:27:16,129 --> 00:27:20,950
to take screenshots and

00:27:18,400 --> 00:27:25,540
any kind of media there's also talk of

00:27:20,950 --> 00:27:28,300
it being able to tap into the files on

00:27:25,540 --> 00:27:29,680
the user's device all of those things

00:27:28,300 --> 00:27:32,710
sound really scary to me

00:27:29,680 --> 00:27:34,630
so I don't know what with any luck it'll

00:27:32,710 --> 00:27:37,570
be HTTP user permissions and all of that

00:27:34,630 --> 00:27:40,240
kind of stuff but it's it's still under

00:27:37,570 --> 00:27:41,860
consideration and then the the last one

00:27:40,240 --> 00:27:43,840
which sounds pretty cool which actually

00:27:41,860 --> 00:27:46,030
will probably be helpful in comparison

00:27:43,840 --> 00:27:48,810
with native applications is the contact

00:27:46,030 --> 00:27:51,220
access so that will give us access to

00:27:48,810 --> 00:27:55,870
the users contacts saved in their on

00:27:51,220 --> 00:27:58,150
their device with any luck behind user

00:27:55,870 --> 00:28:02,100
permission access so that people can't

00:27:58,150 --> 00:28:05,290
just read all of our phone numbers yeah

00:28:02,100 --> 00:28:06,910
last thing to remember and this is

00:28:05,290 --> 00:28:08,620
although although this kind of stuff

00:28:06,910 --> 00:28:11,650
that we've talked about it might sound a

00:28:08,620 --> 00:28:13,780
little bit scary actually native apps

00:28:11,650 --> 00:28:15,670
can already do all of this stuff and a

00:28:13,780 --> 00:28:18,370
lot of this stuff does not require user

00:28:15,670 --> 00:28:20,830
permission at time of use just a time of

00:28:18,370 --> 00:28:22,900
install on native applications so

00:28:20,830 --> 00:28:25,630
arguably ours is slightly more secure if

00:28:22,900 --> 00:28:27,580
you're on web but it still seems a bit

00:28:25,630 --> 00:28:30,700
scary to me I have got one more so I've

00:28:27,580 --> 00:28:32,590
got a demo of the share so if you're

00:28:30,700 --> 00:28:34,630
still on the device it will have just

00:28:32,590 --> 00:28:36,010
change screens or hopefully it'd be

00:28:34,630 --> 00:28:37,420
about to change screens and it will pop

00:28:36,010 --> 00:28:40,330
up with a share button if you hit the

00:28:37,420 --> 00:28:44,610
share button it will share my talk on

00:28:40,330 --> 00:28:44,610
Twitter obviously

00:28:45,280 --> 00:28:50,530
yeah

00:28:47,960 --> 00:28:56,980
and that's it thank you very much

00:28:50,530 --> 00:28:56,980

YouTube URL: https://www.youtube.com/watch?v=oSchwKjD1I0


